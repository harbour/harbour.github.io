From philb at philb.us  Fri May  1 01:43:33 2009
From: philb at philb.us (Phil Barnett)
Date: Fri May  1 01:43:40 2009
Subject: [Harbour] Some xhb developers giving no credit when copying work
	from Harbour
In-Reply-To: <18d502870904282341n77edfbbfh4225d4fdf932ca63@mail.gmail.com>
References: <18d502870904240534u6728518t1dbc975dab98ec23@mail.gmail.com>	<18d502870904240946v48d49099gcdfd38ab120ec2d0@mail.gmail.com>	<49F28670.3040907@philb.us>	<18d502870904260124i6e666c48vb4069f15065a06c4@mail.gmail.com>	<49F521CD.1070203@philb.us>	<6B4FAF45-46D9-4259-820B-3B08A2C30DB0@syenar.hu>	<49F64253.6060101@philb.us>	<18d502870904280113p462a69f2t5457fdbd2670a8b1@mail.gmail.com>	<57A8983C-9142-4744-8D1F-EDD3A7918320@syenar.hu>	<49F7CA62.1000108@philb.us>
	<18d502870904282341n77edfbbfh4225d4fdf932ca63@mail.gmail.com>
Message-ID: <49FA8C05.10708@philb.us>

Viktor Szak?ts wrote:
> Hi Phil,
>
> You write about code, while my intent isn't to change any code 
> license at all. My intent is to *add* license for non-code, particularly 
> my non-code parts and future additions, these parts didn't have any 
> license so far. Having two licenses is no problem at all, since code 
> and non-code (docs/text) are two different things with very different 
> licensing issues, hence FSF came out with GFDL and that's the whole 
> point of CC's existence. Code and non-code are very easy to distinguish 
> by the file type. This new license is endorsed by both FSF and CC, 
> and even by Debian, or at least the goal is that they be compatible with 
> all important entities.
So, you want to license the change log? If we are adding licenses to 
unlicensed things, I don't have a problem with that.
>
> Please be more specific what kind of disaster you expect here.
>
> [ Flagging this as "vanity" is yet another interesting attribute I see 
> here, 
> and I don't even want to go great length into this, some of us were 
> contributing for many years, for a huge amount of time and watching names 
> hidden, yes, it is bothering. For me this is the only kind of reward I 
> may be 
> getting for all this, and this doesn't cost money even. I'm just using 
> some 
> free licenses to protect my works, this is fair and legal, and notice 
> that 
> I've chosen fairly allowing alternatives to resolve this issue. ]
>
> Brgds,
> Viktor

I"m sure you have heard the term, 'Standing on the Shoulders of Giants' 
before. When you write code, you stand on the Shoulders of other Giants. 
The guys that wrote the operating system, the people who created the 
computer, the teams that created the compilers, etc.

When other people borrow from your work and stand on top of it, You are 
the Giant. To me, this seems like flattery, not lack of reward. I guess 
we all view this differently.
From bedipritpal at hotmail.com  Fri May  1 03:03:11 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri May  1 03:03:16 2009
Subject: [Harbour] GTWVT | WVG - Question about Mutex
Message-ID: <23329155.post@talk.nabble.com>


Hello Przemek

In GTWVT | GTWVG we have this function:

static PHB_GTWVT hb_gt_wvt_Find( HWND hWnd )
{
   int iCount = s_wvtCount, iPos = 0;
   PHB_GTWVT pWVT = NULL;

   HB_WVT_LOCK
   while( iCount && iPos < WVT_MAX_WINDOWS )
   {
      if( s_wvtWindows[ iPos ] )
      {
         if( s_wvtWindows[ iPos ]->hWnd == hWnd )
         {
            pWVT = s_wvtWindows[ iPos ];
            break;
         }
         --iCount;
      }
      ++iPos;
   }
   HB_WVT_UNLOCK

   return pWVT;
}

As this function just reads the static array, 
can we avoid HB_WVT_LOCK | UNLOCK calls ?

It sppeds up the things considerably.
But I do not know the fatalitites in real life.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/GTWVT-%7C-WVG---Question-about-Mutex-tp23329155p23329155.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From e.m.giordano at emagsoftware.it  Fri May  1 06:23:00 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri May  1 06:23:06 2009
Subject: [Harbour] Some xhb developers giving no credit when copying
	workfrom Harbour
References: <18d502870904240534u6728518t1dbc975dab98ec23@mail.gmail.com>	<18d502870904240946v48d49099gcdfd38ab120ec2d0@mail.gmail.com>	<49F28670.3040907@philb.us>	<18d502870904260124i6e666c48vb4069f15065a06c4@mail.gmail.com>	<49F521CD.1070203@philb.us>	<6B4FAF45-46D9-4259-820B-3B08A2C30DB0@syenar.hu>	<49F64253.6060101@philb.us>	<18d502870904280113p462a69f2t5457fdbd2670a8b1@mail.gmail.com>	<57A8983C-9142-4744-8D1F-EDD3A7918320@syenar.hu>	<49F7CA62.1000108@philb.us><18d502870904282341n77edfbbfh4225d4fdf932ca63@mail.gmail.com>
	<49FA8C05.10708@philb.us>
Message-ID: <0D6364E6AE0F44F6A566F3C223CC4A1B@emag>


-----Messaggio Originale----- 
Da: "Phil Barnett" <philb@philb.us>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: venerd? 1 maggio 2009 7.43
Oggetto: Re: [Harbour] Some xhb developers giving no credit when copying 
workfrom Harbour


> I"m sure you have heard the term, 'Standing on the Shoulders of Giants' 
> before. When you write code, you stand on the Shoulders of other Giants. 
> The guys that wrote the operating system, the people who created the 
> computer, the teams that created the compilers, etc.
>
> When other people borrow from your work and stand on top of it, You are 
> the Giant.

Wise words!

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at acn.waw.pl  Fri May  1 07:23:33 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri May  1 07:15:30 2009
Subject: [Harbour] GTWVT | WVG - Question about Mutex
In-Reply-To: <23329155.post@talk.nabble.com>
References: <23329155.post@talk.nabble.com>
Message-ID: <20090501112333.GA22061@uran.home.aster.pl>

On Fri, 01 May 2009, Pritpal Bedi wrote:

Hi,

> In GTWVT | GTWVG we have this function:
> static PHB_GTWVT hb_gt_wvt_Find( HWND hWnd )
> {
>    int iCount = s_wvtCount, iPos = 0;
>    PHB_GTWVT pWVT = NULL;
> 
>    HB_WVT_LOCK
>    while( iCount && iPos < WVT_MAX_WINDOWS )
>    {
>       if( s_wvtWindows[ iPos ] )
>       {
>          if( s_wvtWindows[ iPos ]->hWnd == hWnd )
>          {
>             pWVT = s_wvtWindows[ iPos ];
>             break;
>          }
>          --iCount;
>       }
>       ++iPos;
>    }
>    HB_WVT_UNLOCK
> 
>    return pWVT;
> }
> As this function just reads the static array, 
> can we avoid HB_WVT_LOCK | UNLOCK calls ?

This static array can be modified by hb_gt_wvt_Free(). Without
protection the above loop can GPF. F.e.:

   while( iCount && iPos < WVT_MAX_WINDOWS )
   {
      if( s_wvtWindows[ iPos ] )
      {
         // s_wvtWindows[ iPos ] was not NULL but
         // now other thread closed the window at iPos setting
         // s_wvtWindows[ iPos ] to NULL
         if( s_wvtWindows[ iPos ]->hWnd == hWnd )
            // so in above line we have GPF

> It sppeds up the things considerably.
> But I do not know the fatalitites in real life.

Have you made some real speed tests?
Hwat is the difference?
Have you used single or multi CPU machine?

In fact this loop is not efficient but the most expensive should
be the scanning process not lock/unlock operations.
It can be resolved in different way. We can store pointer to PHB_GTWVT
structure inside window data, f.e. at GWL_USERDATA:

   SetWindowLongPtr( pWVT->hWnd, GWL_USERDATA, ( LONG_PTR ) pWVT );

In such case it's possible to extract PHB_GTWVT by:

   PHB_GTWVT pWVT = GetWindowLongPtr( hWnd, GWL_USERDATA );

It's highly possible that it will be faster but you should check it.
I do not know what internally GetWindowLongPtr() does and how expnesive
it can be.
Of course it also means that GWL_USERDATA cannot be used to any other
things and should be documented that it belongs GT internal structures.

Different GUI libraries usually gives some support to bounf with given
window some cargo value which can be used in the same way as GWL_USERDATA
in the above example.

There is also yeat another solution. We can try to change hb_gt_wvt_Find()
to make it safe for concurent modifications, f.e. we can try to make:

static PHB_GTWVT hb_gt_wvt_Find( HWND hWnd )
{
   int iPos = 0;
   PHB_GTWVT pWVT;
   while( iPos < WVT_MAX_WINDOWS )
   {
      pWVT = s_wvtWindows[ iPos ];
      if( pWVT )
      {
         if( pWVT->hWnd == hWnd )
            return pWVT;
      }
      ++iPos;
   }
   return NULL;
}

In such case we should replace possible accessing NULL pointer with
acessing some memory which may not belong to the process. Probably
it will reduce the chance for GPF but it's still not 100% safe solution.
To make it fully safe we should change the structure of s_wvtWindows
array. Instead of storing pointer to PHB_GTWVT structures we can store
pairs: pWVT and hWnd. To reach such effect we can change s_wvtWindows or
we can add new static array:
   static HWND s_wvtWindowsHandles[ WVT_MAX_WINDOWS ];
which will be updated with s_wvtWindows in hb_gt_wvt_Alloc():

      s_wvtWindows[ iPos ] = pWVT;
      s_wvtWindowsHandles[ iPos ] == pWVT->hWnd;

and in hb_gt_wvt_Free():

      s_wvtWindowsHandles[ pWVT->iHandle ] == NULL;
      s_wvtWindows[ pWVT->iHandle ] = NULL;

of course the locks in hb_gt_wvt_Alloc() and hb_gt_wvt_Free() have to
still exists. Then hb_gt_wvt_Find() can look:

static PHB_GTWVT hb_gt_wvt_Find( HWND hWnd )
{
   int iPos = 0;
   while( iPos < WVT_MAX_WINDOWS )
   {
      if( s_wvtWindowsHandles[ iPos ] == hWnd )
         return s_wvtWindows[ iPos ];
   }
   return NULL;
}

and such version is MT safe. You can use it and if you think it causes
noticeable speed difference then you can update SVN (of course please
verify my possible typos in the above peaces of code)
Anyhow it still makes WVT_MAX_WINDOWS iterations what may consume some
noticeable peace of time. The linear scan can be replaces by binary search
but in such case we will have to restore locking inside hb_gt_wvt_Find()
because hb_gt_wvt_Alloc() and hb_gt_wvt_Free() have to recreate good order
and such operation has to be mutual exclusive to hb_gt_wvt_Find(). What is
the most expensive: locking or scanning?
To answer you will have to make some tests with big number of open windows.
You can also try to introduce some type of hashing with bucket sorting.
In such case it should be possible to keep hb_gt_wvt_Find() without any
locks. But it can improve the performance only if you can create some
efficient function which maps hWnd to some window handle set numbers
(bucket number). I do not know how windows allocate handles and if it's
easy or not to create such function which can also give good unique
results.

best regards,
Przemek
From vszakats at users.sourceforge.net  Fri May  1 07:18:18 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May  1 07:18:23 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10964] trunk/harbour
Message-ID: <E1Lzql0-00008I-IL@74yxhf1.ch3.sourceforge.com>

Revision: 10964
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10964&view=rev
Author:   vszakats
Date:     2009-05-01 11:18:17 +0000 (Fri, 01 May 2009)

Log Message:
-----------
2009-05-01 13:17 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * bin/postinst.bat
    + Added generation of libpq.lib from .dll for msvc. (not tested)
    + Added generation of QT implibs for msvc. (not tested)
    + Copying QT implibs for mingw.

  * source/common/hbverdsp.c
    ! Minor in comment.

  * utils/hbmk2/hbmk2.prg
    + Added MT support for C compilation phase.
      Single input compilers aren't covered yet (gcc, pocc).
    + Added -debugtime internal option to measure running time.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/postinst.bat
    trunk/harbour/source/common/hbverdsp.c
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Fri May  1 08:23:37 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri May  1 08:15:33 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10963] trunk/harbour
In-Reply-To: <18d502870904300724q5b825b2me71fa0bca82e1693@mail.gmail.com>
References: <E1LzW9R-0008AZ-M6@d5vjzd1.ch3.sourceforge.com>
	<18d502870904300724q5b825b2me71fa0bca82e1693@mail.gmail.com>
Message-ID: <20090501122337.GA4642@uran.home.aster.pl>

On Thu, 30 Apr 2009, Szak?ts Viktor wrote:

Hi,

> Shouldn't we rather always generate hbvmmt, even in DOS, but
> on these non-MT platforms hbvmmt be the same as hbvm.
> I think we already do this for WinCE platforms. This way no such
> platform tricks would be needed at build time.
> What do you think?

I think it could be source of some other problems.
On some platforms support for threads can be optional and may
depend on some other system libraries and/or kernel version.
We have such situation in Linux.
In such case introducing not fully functional hbvmmt when it's
possible that working one also exists in some cases is not good idea.
It may confuse users and it will be even possible that user by mistake
will create wrong final binaries using wrong hbvmmt library.
BTW I was wrong about MT in WinCE. Threads can be created and should
work correctly and only it's not possible to execute simultaneously
many processes in this OS. The background ones seems to be suspended.

best regards,
Przemek
From vszakats at users.sourceforge.net  Fri May  1 08:54:59 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May  1 08:55:04 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10965] trunk/harbour
Message-ID: <E1LzsGZ-0002Yh-3u@74yxhf1.ch3.sourceforge.com>

Revision: 10965
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10965&view=rev
Author:   vszakats
Date:     2009-05-01 12:54:58 +0000 (Fri, 01 May 2009)

Log Message:
-----------
2009-05-01 14:53 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + Added MT support for rest of C compilers (gcc, pocc).
      Please test. MT support is now complete, maybe in the 
      future it can be added for resource compiling if that's 
      a bottleneck for some users.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bedipritpal at hotmail.com  Fri May  1 09:49:30 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri May  1 09:49:35 2009
Subject: [Harbour] GTWVT | WVG - Question about Mutex
In-Reply-To: <20090501112333.GA22061@uran.home.aster.pl>
References: <23329155.post@talk.nabble.com>
	<20090501112333.GA22061@uran.home.aster.pl>
Message-ID: <23333364.post@talk.nabble.com>


Hello Przemek

First thanks for detailed analysis.



> This static array can be modified by hb_gt_wvt_Free(). Without
> protection the above loop can GPF. F.e.:
> 

I knew this can be the case so that is why I posted this 
message to gather your other views.



> Have you made some real speed tests?
> Hwat is the difference?
> Have you used single or multi CPU machine?
> 

No, I did not made any tests. Infact it is not practical
to measure speed by any means. But I could sense it can
make considerable difference as Windows issues a tons 
of messages and hence in hb_gt_wvt_WndProc() this 
loop is scanned hundreds of time per second. And 
multiply this scenario with number of windows open, 
and you can imagine the facts.



> In fact this loop is not efficient but the most expensive should
> be the scanning process not lock/unlock operations.
> 

True.



> It can be resolved in different way. We can store pointer to PHB_GTWVT
> structure inside window data, f.e. at GWL_USERDATA:
> 
>    SetWindowLongPtr( pWVT->hWnd, GWL_USERDATA, ( LONG_PTR ) pWVT );
> 
> In such case it's possible to extract PHB_GTWVT by:
> 
>    PHB_GTWVT pWVT = GetWindowLongPtr( hWnd, GWL_USERDATA );
> 
> It's highly possible that it will be faster but you should check it.
> I do not know what internally GetWindowLongPtr() does and how expnesive
> it can be.
> Of course it also means that GWL_USERDATA cannot be used to any other
> things and should be documented that it belongs GT internal structures.
> 

By far this is the most efficient way on paper, 
but I do not know the real cost of 
PHB_GTWVT pWVT = GetWindowLongPtr( hWnd, GWL_USERDATA );
But for sure itwill be much lighter than mutexing and scanning the whole
array.



> Different GUI libraries usually gives some support to bounf with given
> window some cargo value which can be used in the same way as GWL_USERDATA
> in the above example.
> 

Yes. Alternatively we can used 
SetProp( hWnd, "pWVT", ( LONG_PTR ) pWVT ) | GetProp( hWnd, "pWVT" ).
Infact in GTWVG I am using this mechanism to store CallBack pointers.
But for GTWVT and GTWVG 
Set|GetWindowLongPtr( hWnd, GWL_USERDATA );
appears to be more optimized.



> There is also yeat another solution. We can try to change hb_gt_wvt_Find()
> to make it safe for concurent modifications, f.e. we can try to make:
> 
> static PHB_GTWVT hb_gt_wvt_Find( HWND hWnd )
> {
>    int iPos = 0;
>    PHB_GTWVT pWVT;
>    while( iPos < WVT_MAX_WINDOWS )
>    {
>       pWVT = s_wvtWindows[ iPos ];
>       if( pWVT )
>       {
>          if( pWVT->hWnd == hWnd )
>             return pWVT;
>       }
>       ++iPos;
>    }
>    return NULL;
> }
> 
> In such case we should replace possible accessing NULL pointer with
> acessing some memory which may not belong to the process. Probably
> it will reduce the chance for GPF but it's still not 100% safe solution.
> To make it fully safe we should change the structure of s_wvtWindows
> array. Instead of storing pointer to PHB_GTWVT structures we can store
> pairs: pWVT and hWnd. To reach such effect we can change s_wvtWindows or
> we can add new static array:
>    static HWND s_wvtWindowsHandles[ WVT_MAX_WINDOWS ];
> which will be updated with s_wvtWindows in hb_gt_wvt_Alloc():
> 
>       s_wvtWindows[ iPos ] = pWVT;
>       s_wvtWindowsHandles[ iPos ] == pWVT->hWnd;
> 
> and in hb_gt_wvt_Free():
> 
>       s_wvtWindowsHandles[ pWVT->iHandle ] == NULL;
>       s_wvtWindows[ pWVT->iHandle ] = NULL;
> 
> of course the locks in hb_gt_wvt_Alloc() and hb_gt_wvt_Free() have to
> still exists. Then hb_gt_wvt_Find() can look:
> 
> static PHB_GTWVT hb_gt_wvt_Find( HWND hWnd )
> {
>    int iPos = 0;
>    while( iPos < WVT_MAX_WINDOWS )
>    {
>       if( s_wvtWindowsHandles[ iPos ] == hWnd )
>          return s_wvtWindows[ iPos ];
>    }
>    return NULL;
> }
> 
> and such version is MT safe. You can use it and if you think it causes
> noticeable speed difference then you can update SVN (of course please
> verify my possible typos in the above peaces of code)
> Anyhow it still makes WVT_MAX_WINDOWS iterations what may consume some
> noticeable peace of time. The linear scan can be replaces by binary search
> but in such case we will have to restore locking inside hb_gt_wvt_Find()
> because hb_gt_wvt_Alloc() and hb_gt_wvt_Free() have to recreate good order
> and such operation has to be mutual exclusive to hb_gt_wvt_Find(). What is
> the most expensive: locking or scanning?
> To answer you will have to make some tests with big number of open
> windows.
> You can also try to introduce some type of hashing with bucket sorting.
> In such case it should be possible to keep hb_gt_wvt_Find() without any
> locks. But it can improve the performance only if you can create some
> efficient function which maps hWnd to some window handle set numbers
> (bucket number). I do not know how windows allocate handles and if it's
> easy or not to create such function which can also give good unique
> results.
> 

The other options are more or less have the same scanning panelty.
Imagine a scenario:
1) Open 20 windows.
2) Close first 19 windows, keep open 20th window.
3) Open another window, close, open, close.
4) There is no reduction in scan loop, it will always scan 20th iteration
for 
    any message sent to 20th window.

I will make some experiments with Set|GetWindowLong() | Set|GetProp()
methods and will report which is working correctly.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/GTWVT-%7C-WVG---Question-about-Mutex-tp23329155p23333364.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Fri May  1 10:05:02 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May  1 10:05:11 2009
Subject: [Harbour] hb_i18n_gettext( "" ) warning. is it normal?
Message-ID: <18d502870905010705h2f57005bqb2e58a5b1c20e59e@mail.gmail.com>

Hi All,
Compiling this code:
---
   ? hb_i18n_gettext( "" )
---

results in this:
---
Warning W0017  Incompatible parameter 'String', expected 'String'
---

I understand there is no point in passing empty string to
hb_i18n_gettext(),
but the warning text seems misleading and bogus.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090501/614f8a6b/attachment.html
From harbour.01 at syenar.hu  Fri May  1 10:11:45 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May  1 10:11:50 2009
Subject: [Harbour] Re: hb_i18n_gettext( "" ) warning. is it normal?
In-Reply-To: <18d502870905010705h2f57005bqb2e58a5b1c20e59e@mail.gmail.com>
References: <18d502870905010705h2f57005bqb2e58a5b1c20e59e@mail.gmail.com>
Message-ID: <18d502870905010711w742d9e44o152b8d13c145f36e@mail.gmail.com>

I had to create workaround for this warning by passing " " string instead of
zero length one, IMO we should support empty values and simply always
return it as is in hb_i18n_gettext().

Brgds,
Viktor

On Fri, May 1, 2009 at 4:05 PM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:

> Hi All,
> Compiling this code:
> ---
>    ? hb_i18n_gettext( "" )
> ---
>
> results in this:
> ---
> Warning W0017  Incompatible parameter 'String', expected 'String'
> ---
>
> I understand there is no point in passing empty string to
> hb_i18n_gettext(),
> but the warning text seems misleading and bogus.
>
> Brgds,
> Viktor
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090501/5dc32733/attachment.html
From vszakats at users.sourceforge.net  Fri May  1 10:14:01 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May  1 10:14:37 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10966] trunk/harbour
Message-ID: <E1LztV3-0001lS-Tk@bj8yhf1.ch3.sourceforge.com>

Revision: 10966
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10966&view=rev
Author:   vszakats
Date:     2009-05-01 14:14:00 +0000 (Fri, 01 May 2009)

Log Message:
-----------
2009-05-01 16:12 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + Changed all output texts to translatable format, using hb_StrFormat().
    + Added hb_i18n_gettext() to all translatable texts, so now it's possible 
      to create a .pot file. It's not yet perfect for the help text yet.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From leonardo at sygecom.com.br  Fri May  1 11:24:28 2009
From: leonardo at sygecom.com.br (sygecom)
Date: Fri May  1 11:24:32 2009
Subject: [Harbour] hb_i18n_gettext( "" ) warning. is it normal?
In-Reply-To: <18d502870905010705h2f57005bqb2e58a5b1c20e59e@mail.gmail.com>
References: <18d502870905010705h2f57005bqb2e58a5b1c20e59e@mail.gmail.com>
Message-ID: <23334794.post@talk.nabble.com>


Hi Viktor,

Speaking on hb_i18n_gettext() would be put in hbcompat.ch to be compatible
with xHarbour i18n().

I would like to better understand i18n if we can get the example of examples
of the tests xharbour folder? or if you have any other example that shows
how to use the practice in Harbour.

Note: I saw you made some changes for LIBPQ.LIB for MSVC, next time I
compile already post the results. Advance thank you.

Leonardo Machado


Szak?ts Viktor wrote:
> 
> Hi All,
> Compiling this code:
> ---
>    ? hb_i18n_gettext( "" )
> ---
> 
> results in this:
> ---
> Warning W0017  Incompatible parameter 'String', expected 'String'
> ---
> 
> I understand there is no point in passing empty string to
> hb_i18n_gettext(),
> but the warning text seems misleading and bogus.
> 
> Brgds,
> Viktor
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/hb_i18n_gettext%28-%22%22-%29-warning.-is-it-normal--tp23333626p23334794.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Fri May  1 12:42:27 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May  1 12:42:33 2009
Subject: [Harbour] hb_i18n_gettext( "" ) warning. is it normal?
In-Reply-To: <23334794.post@talk.nabble.com>
References: <18d502870905010705h2f57005bqb2e58a5b1c20e59e@mail.gmail.com>
	<23334794.post@talk.nabble.com>
Message-ID: <18d502870905010942t3826ff70ic5a8d21f78c1ee1@mail.gmail.com>

>
> Hi Viktor,
>
> Speaking on hb_i18n_gettext() would be put in hbcompat.ch to be compatible
> with xHarbour i18n().


Yes, we should. I don't know xhb i18n implementation, but if someone has
more translations I can add them.

Actually, we might add an alias for hb_i18n_gettext() even in Harbour to
give a short alternative, like hb_i(). If there are no objections I can add
it.


> I would like to better understand i18n if we can get the example of
> examples
> of the tests xharbour folder? or if you have any other example that shows
> how to use the practice in Harbour.


Dunno if there is a way to translate functions as-is, in Harbour we didn't
use the xhb implementation as a base. The language file format is
completely different and we use a more modular approach with the API.

Check this ChangeLog entry for available functions:
2008-12-11 19:48 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090501/b38524b3/attachment.html
From vszakats at users.sourceforge.net  Fri May  1 14:10:53 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May  1 14:10:59 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10967] trunk/harbour
Message-ID: <E1LzxCH-0007yL-Ou@bj8yhf1.ch3.sourceforge.com>

Revision: 10967
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10967&view=rev
Author:   vszakats
Date:     2009-05-01 18:10:52 +0000 (Fri, 01 May 2009)

Log Message:
-----------
2009-05-01 20:09 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * ChangeLog
    ! Typo in old i18n entry.

  * utils/hbmk2/hbmk2.prg
    * Formatting.

  * contrib/xhb/hbcompat.ch
    + Added i18n() compatibility translation.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/xhb/hbcompat.ch
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Fri May  1 14:13:09 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May  1 14:13:14 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10968] trunk/harbour
Message-ID: <E1LzxET-00081A-34@bj8yhf1.ch3.sourceforge.com>

Revision: 10968
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10968&view=rev
Author:   vszakats
Date:     2009-05-01 18:13:08 +0000 (Fri, 01 May 2009)

Log Message:
-----------
2009-05-01 20:12 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! hbmk2 -> hbmk

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From leonardo at sygecom.com.br  Fri May  1 17:35:48 2009
From: leonardo at sygecom.com.br (sygecom)
Date: Fri May  1 17:35:53 2009
Subject: [Harbour] hb_i18n_gettext( "" ) warning. is it normal?
In-Reply-To: <18d502870905010942t3826ff70ic5a8d21f78c1ee1@mail.gmail.com>
References: <18d502870905010705h2f57005bqb2e58a5b1c20e59e@mail.gmail.com>
	<23334794.post@talk.nabble.com>
	<18d502870905010942t3826ff70ic5a8d21f78c1ee1@mail.gmail.com>
Message-ID: <23340067.post@talk.nabble.com>


Hi Viktor,

Thanks for clarifying, I took a good look and it looked quite different
there.
Well as I'm hanging down the side of the harbour for a while then I will
investigate the functions of the Harbour and I adptar for use with Harbour.
If not ask for more until they could take these explanations of Przemyslaw
that the ChangeLog and put in a file in the folder \DOC

Leonardo Machado


Szak?ts Viktor wrote:
> 
>>
>> Hi Viktor,
>>
>> Speaking on hb_i18n_gettext() would be put in hbcompat.ch to be
>> compatible
>> with xHarbour i18n().
> 
> 
> Yes, we should. I don't know xhb i18n implementation, but if someone has
> more translations I can add them.
> 
> Actually, we might add an alias for hb_i18n_gettext() even in Harbour to
> give a short alternative, like hb_i(). If there are no objections I can
> add
> it.
> 
> 
>> I would like to better understand i18n if we can get the example of
>> examples
>> of the tests xharbour folder? or if you have any other example that shows
>> how to use the practice in Harbour.
> 
> 
> Dunno if there is a way to translate functions as-is, in Harbour we didn't
> use the xhb implementation as a base. The language file format is
> completely different and we use a more modular approach with the API.
> 
> Check this ChangeLog entry for available functions:
> 2008-12-11 19:48 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> 
> Brgds,
> Viktor
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/hb_i18n_gettext%28-%22%22-%29-warning.-is-it-normal--tp23333626p23340067.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vailtom at gmail.com  Fri May  1 21:27:16 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Fri May  1 21:27:21 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10966] trunk/harbour
In-Reply-To: <E1LztV3-0001lS-Tk@bj8yhf1.ch3.sourceforge.com>
References: <E1LztV3-0001lS-Tk@bj8yhf1.ch3.sourceforge.com>
Message-ID: <531d7a750905011827p228cacex55ac0fc203f671c8@mail.gmail.com>

Using this feature, how I can build something to help translate it
into Portuguese?

Vailton Renato
From harbour.01 at syenar.hu  Fri May  1 22:17:17 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May  1 22:17:25 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10966] trunk/harbour
In-Reply-To: <531d7a750905011827p228cacex55ac0fc203f671c8@mail.gmail.com>
References: <E1LztV3-0001lS-Tk@bj8yhf1.ch3.sourceforge.com>
	<531d7a750905011827p228cacex55ac0fc203f671c8@mail.gmail.com>
Message-ID: <18d502870905011917n4906b514n93b98280bb2292eb@mail.gmail.com>

Hi Vailton,
You should create a .pot file from hbmk2.prg using this command:
> ..\..\bin\harbour hbmk2.prg /jhbmk2-pt_BR.pot /i..\..\include

Then the .pot file should be translated and selection/loading logic
added to hbmk2. I'll do the latter when we have some translation
to test with.

If you start translating, pls leave the usage screen as last, as I'm still
thinking on how to make it more translation friendly. Probably I'll
generate the screen from some internal text database.

Brgds,
Viktor

On Sat, May 2, 2009 at 3:27 AM, Vailton Renato <vailtom@gmail.com> wrote:

> Using this feature, how I can build something to help translate it
> into Portuguese?
>
> Vailton Renato
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090502/7c0f52e0/attachment.html
From vailtom at gmail.com  Sat May  2 00:04:16 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Sat May  2 00:04:21 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10966] trunk/harbour
In-Reply-To: <18d502870905011917n4906b514n93b98280bb2292eb@mail.gmail.com>
References: <E1LztV3-0001lS-Tk@bj8yhf1.ch3.sourceforge.com>
	<531d7a750905011827p228cacex55ac0fc203f671c8@mail.gmail.com>
	<18d502870905011917n4906b514n93b98280bb2292eb@mail.gmail.com>
Message-ID: <531d7a750905012104s62034a3aj5e592d68e6769009@mail.gmail.com>

I did the procedure specified above and I created a file with 816
lines. I already translated 33% of the file and would like to know if
I'm doing this the correct way:

http://www.kssoftware.com.br/hbmk2-pt_BR.pot

Then I remove any tabs. Can I use accents in translation?

Vailton Renato
From harbour.01 at syenar.hu  Sat May  2 04:49:44 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sat May  2 04:49:56 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10966] trunk/harbour
In-Reply-To: <531d7a750905012104s62034a3aj5e592d68e6769009@mail.gmail.com>
References: <E1LztV3-0001lS-Tk@bj8yhf1.ch3.sourceforge.com>
	<531d7a750905011827p228cacex55ac0fc203f671c8@mail.gmail.com>
	<18d502870905011917n4906b514n93b98280bb2292eb@mail.gmail.com>
	<531d7a750905012104s62034a3aj5e592d68e6769009@mail.gmail.com>
Message-ID: <18d502870905020149w1c701530qb485ee730ea1e11a@mail.gmail.com>

Yes, it looks good. There are few remaining tabs, plus I found two s&r errs
in original text which I'll fix ASAP.

You can definitely use accents. I suggest using ISO CP.

Brgds,
Viktor

On Sat, May 2, 2009 at 6:04 AM, Vailton Renato <vailtom@gmail.com> wrote:

> I did the procedure specified above and I created a file with 816
> lines. I already translated 33% of the file and would like to know if
> I'm doing this the correct way:
>
> http://www.kssoftware.com.br/hbmk2-pt_BR.pot
>
> Then I remove any tabs. Can I use accents in translation?
>
> Vailton Renato
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090502/2ec53ae9/attachment.html
From vszakats at users.sourceforge.net  Sat May  2 04:53:14 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat May  2 04:53:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10969] trunk/harbour
Message-ID: <E1M0AyA-0006zT-Kb@3kljzd1.ch3.sourceforge.com>

Revision: 10969
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10969&view=rev
Author:   vszakats
Date:     2009-05-02 08:53:13 +0000 (Sat, 02 May 2009)

Log Message:
-----------
2009-05-02 10:52 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Minor s&r error in help text.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sat May  2 06:06:09 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat May  2 06:06:14 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10970] trunk/harbour
Message-ID: <E1M0C6j-00006f-Vv@3kljzd1.ch3.sourceforge.com>

Revision: 10970
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10970&view=rev
Author:   vszakats
Date:     2009-05-02 10:06:09 +0000 (Sat, 02 May 2009)

Log Message:
-----------
2009-05-02 12:05 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + Added multilanguage support. Now LC_ALL, LC_MESSAGES and 
      LANG envvar will be checked for language ID and loading 
      of translation will be attempted from <hbmkdir>hbmk2.<lang>.hbl 
      file (not final name yet). You can compile such .hbl file by using 
      command:
      > hbi18n -g -ohbmk2.<lang>.hbl hbmk2.<lang>.pot
      You can create .pot using this command:
      > ..\..\bin\harbour hbmk2.prg /jhbmk2-<lang>.pot /i..\..\include
      Where <lang> is preferable the std ISO language ID, like: pt_BR.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sat May  2 06:10:53 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat May  2 06:10:58 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10971] trunk/harbour
Message-ID: <E1M0CBJ-0000Ck-UN@3kljzd1.ch3.sourceforge.com>

Revision: 10971
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10971&view=rev
Author:   vszakats
Date:     2009-05-02 10:10:53 +0000 (Sat, 02 May 2009)

Log Message:
-----------
2009-05-02 12:10 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    * Minor cleanups. (func/proc scopes)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dbtopas at dbtopas.lt  Sat May  2 08:36:18 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sat May  2 08:38:26 2009
Subject: [Harbour] Re: hb_i18n_gettext( "" ) warning. is it normal?
In-Reply-To: <18d502870905010711w742d9e44o152b8d13c145f36e@mail.gmail.com>
References: <18d502870905010705h2f57005bqb2e58a5b1c20e59e@mail.gmail.com>
	<18d502870905010711w742d9e44o152b8d13c145f36e@mail.gmail.com>
Message-ID: <49FC3E42.4060305@dbtopas.lt>

Hi,


Viktor Szak?ts wrote:
> I had to create workaround for this warning by passing " " string instead 
> of zero length one, IMO we should support empty values and simply always 
> return it as is in hb_i18n_gettext().

>     Compiling this code:
>     ---
>        ? hb_i18n_gettext( "" )
>     ---
> 
>     results in this:
>     ---
>     Warning W0017  Incompatible parameter 'String', expected 'String'
>     ---
> 
>     I understand there is no point in passing empty string to
>     hb_i18n_gettext(), 
>     but the warning text seems misleading and bogus.

The warning is not related to behaviour of hb_i18n_gettext() function 
itself, it's a question of compiler. Current compiler i18n logic does 
not write empty string to .pot file. The question is, that we have to do 
in this case:

1) write empty strings to .pot file
Change include/hbexprb.c line #1899:
      if( pArg->ExprType == HB_ET_STRING && pArg->ulLength > 0 )
to:
      if( pArg->ExprType == HB_ET_STRING )

2) do not write empty string to .pot file and do not show any warning:
Change:
      if( pArg->ExprType == HB_ET_STRING && pArg->ulLength > 0 )
      {
         if( HB_COMP_PARAM->fI18n )
to:
      if( pArg->ExprType == HB_ET_STRING )
      {
         if( HB_COMP_PARAM->fI18n  && pArg->ulLength > 0 )

3) remain current logic, but change warning text. This is perhaps the 
best choice.
Change:
      if( pArg->ExprType == HB_ET_STRING && pArg->ulLength > 0 )
      {
         if( HB_COMP_PARAM->fI18n )
         {
            ...
         }
to:
     if( pArg->ExprType == HB_ET_STRING )
     {
       if( pArg->ulLength > 0 )
       {
          if( HB_COMP_PARAM->fI18n )
          {
             ...
          }
       }
       else
       {
          iWarning = HB_COMP_WARN_PARAM_TYPE;
          pBadParam = pArg;
          szExpect = "not empty string";
       }


Regards,
Mindaugas

From bedipritpal at hotmail.com  Sat May  2 13:53:24 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat May  2 13:53:29 2009
Subject: [Harbour] HBMK2 - Few Changes
Message-ID: <23348709.post@talk.nabble.com>


Hello Viktor

I have implemented a few enhancements in the area of
parsing .hbp | .hbm files, mainly belonging to visual layout
of key/value pairs. 

This need initiated because I was trying to compile and 
link my very large flagship product "Vouch" through hbmk 
engine. Hopefully it will be useful for others.

Should I commit or post it here on the list.
I do not know on which part of the file you are currently 
working on. Also I have few more optimizations in mind coming
my way to compile with msvc and mingw.

At present I am been able to link Vouch with hbmk2 engine.
Accept my compliments for this great and much needed
contribution.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/HBMK2---Few-Changes-tp23348709p23348709.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sat May  2 13:57:02 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sat May  2 13:57:08 2009
Subject: [Harbour] Re: hb_i18n_gettext( "" ) warning. is it normal?
In-Reply-To: <49FC3E42.4060305@dbtopas.lt>
References: <18d502870905010705h2f57005bqb2e58a5b1c20e59e@mail.gmail.com>
	<18d502870905010711w742d9e44o152b8d13c145f36e@mail.gmail.com>
	<49FC3E42.4060305@dbtopas.lt>
Message-ID: <18d502870905021057n2a35f125l23253ad949782ad3@mail.gmail.com>

Hi Mindaugas,

1) write empty strings to .pot file
> Change include/hbexprb.c line #1899:
>     if( pArg->ExprType == HB_ET_STRING && pArg->ulLength > 0 )
> to:
>     if( pArg->ExprType == HB_ET_STRING )


> 2) do not write empty string to .pot file and do not show any warning:
> Change:
>     if( pArg->ExprType == HB_ET_STRING && pArg->ulLength > 0 )
>     {
>        if( HB_COMP_PARAM->fI18n )
> to:
>     if( pArg->ExprType == HB_ET_STRING )
>     {
>        if( HB_COMP_PARAM->fI18n  && pArg->ulLength > 0 )


My vote for this one (no 2). IMO empty strings may
happen in translation, but there is no point in offering
them for translation. And if we issue a warning it ruins
-es2 -w3 setup while the source is still valid. It's also
relatively easy to grep for such empty strings if someone
would like to find them.

If we chose this one, will hb_i18n_gettext() always
return an empty string without doing a lookup?

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090502/ec7847c3/attachment.html
From harbour.01 at syenar.hu  Sat May  2 14:00:06 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sat May  2 14:00:11 2009
Subject: [Harbour] HBMK2 - Few Changes
In-Reply-To: <23348709.post@talk.nabble.com>
References: <23348709.post@talk.nabble.com>
Message-ID: <18d502870905021100ye2b58dck9a9a48bf53749edf@mail.gmail.com>

Hi Pritpal,
Thanks, please send them to the list or to me and I'll try to add
them to source.

Part of my goal is to present a relatively strict format for these
files, otherwise we will fall back to formatting issues and choosing
formatting styles. I wanted to avoid that. Anyhow there is probably
a few ways to enhance current state (like placement of filters f.e.).

Brgds,
Viktor

On Sat, May 2, 2009 at 7:53 PM, Pritpal Bedi <bedipritpal@hotmail.com>wrote:

>
> Hello Viktor
>
> I have implemented a few enhancements in the area of
> parsing .hbp | .hbm files, mainly belonging to visual layout
> of key/value pairs.
>
> This need initiated because I was trying to compile and
> link my very large flagship product "Vouch" through hbmk
> engine. Hopefully it will be useful for others.
>
> Should I commit or post it here on the list.
> I do not know on which part of the file you are currently
> working on. Also I have few more optimizations in mind coming
> my way to compile with msvc and mingw.
>
> At present I am been able to link Vouch with hbmk2 engine.
> Accept my compliments for this great and much needed
> contribution.
>
> Regards
> Pritpal Bedi
>
> --
> View this message in context:
> http://www.nabble.com/HBMK2---Few-Changes-tp23348709p23348709.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090502/ae78d345/attachment.html
From bedipritpal at hotmail.com  Sat May  2 14:28:44 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat May  2 14:28:48 2009
Subject: [Harbour] HBMK2 - Few Changes
In-Reply-To: <18d502870905021100ye2b58dck9a9a48bf53749edf@mail.gmail.com>
References: <23348709.post@talk.nabble.com>
	<18d502870905021100ye2b58dck9a9a48bf53749edf@mail.gmail.com>
Message-ID: <23348999.post@talk.nabble.com>


Hi


Szak?ts Viktor wrote:
> 
> Hi Pritpal,
> Thanks, please send them to the list or to me and I'll try to add
> them to source.
> 
> Part of my goal is to present a relatively strict format for these
> files, otherwise we will fall back to formatting issues and choosing
> formatting styles. I wanted to avoid that. Anyhow there is probably
> a few ways to enhance current state (like placement of filters f.e.).
> 

Here it is. It is just separating key=value pairs in .hbp files.

STATIC PROCEDURE HBP_ProcessOne( cFileName,;
                                 /* @ */ aPOT,;
                                 /* @ */ aLIBUSER,;
                                 /* @ */ aLIBUSERGT,;
                                 /* @ */ aLIBPATH,;
                                 /* @ */ aLIBDYNHAS,;
                                 /* @ */ aINCPATH,;
                                 /* @ */ aINCTRYPATH,;
                                 /* @ */ aOPTPRG,;
                                 /* @ */ aOPTC,;
                                 /* @ */ aOPTRES,;
                                 /* @ */ aOPTL,;
                                 /* @ */ lGUI,;
                                 /* @ */ lMT,;
                                 /* @ */ lSHARED,;
                                 /* @ */ lSTATICFULL,;
                                 /* @ */ lDEBUG,;
                                 /* @ */ lOPT,;
                                 /* @ */ lNULRDD,;
                                 /* @ */ lMAP,;
                                 /* @ */ lSTRIP,;
                                 /* @ */ nCOMPR,;
                                 /* @ */ nHEAD,;
                                 /* @ */ lRUN,;
                                 /* @ */ lINC,;
                                 /* @ */ cGT )
   LOCAL cFile := MemoRead( cFileName ) /* NOTE: Intentionally using
MemoRead() which handles EOF char. */
   LOCAL cLine, cKeyWord, n
   LOCAL cItem

   IF ! hb_osNewLine() == _EOL
      cFile := StrTran( cFile, hb_osNewLine(), _EOL )
   ENDIF
   IF ! hb_osNewLine() == Chr( 13 ) + Chr( 10 )
      cFile := StrTran( cFile, Chr( 13 ) + Chr( 10 ), _EOL )
   ENDIF

   FOR EACH cLine IN hb_ATokens( cFile, _EOL )

      cLine := AllTrim( ArchCompFilter( AllTrim( cLine ) ) )

      if ( n := at( '=', cLine ) ) > 0
         cKeyWord := lower( alltrim( substr( cLine, 1, n-1 ) ) )
         cLine    := alltrim( substr( cLine, n+1 ) )
      endif


      DO CASE
      //CASE Lower( Left( cLine, Len( "pots="        ) ) ) == "pots="         
; cLine := SubStr( cLine, Len( "pots="         ) + 1 )
      CASE cKeyWord == "pots"
         FOR EACH cItem IN hb_ATokens( cLine,, .T. )
            cItem := PathSepToTarget( MacroProc( StrStripQuote( cItem ),
FN_DirGet( cFileName ) ) )
            IF AScan( aPOT, {|tmp| tmp == cItem } ) == 0
               AAddNotEmpty( aPOT, cItem )
            ENDIF
         NEXT

      //CASE Lower( Left( cLine, Len( "libs="         ) ) ) == "libs="        
; cLine := SubStr( cLine, Len( "libs="         ) + 1 )
      CASE cKeyWord == "libs"
         FOR EACH cItem IN hb_ATokens( cLine,, .T. )
            cItem := PathSepToTarget( MacroProc( StrStripQuote( cItem ),
FN_DirGet( cFileName ) ) )
            IF AScan( aLIBUSER, {|tmp| tmp == cItem } ) == 0
               AAddNotEmpty( aLIBUSER, cItem )
            ENDIF
         NEXT

      //CASE Lower( Left( cLine, Len( "libpaths="     ) ) ) == "libpaths="    
; cLine := SubStr( cLine, Len( "libpaths="     ) + 1 )
      CASE cKeyWord == "libpaths"  
         FOR EACH cItem IN hb_ATokens( cLine,, .T. )
            cItem := PathSepToTarget( MacroProc( StrStripQuote( cItem ),
FN_DirGet( cFileName ) ) )
            IF ! Empty( cItem ) .AND. hb_DirExists( cItem )
               IF AScan( aLIBPATH, {|tmp| tmp == cItem } ) == 0
                  AAdd( aLIBPATH, cItem )
               ENDIF
            ENDIF
         NEXT

      //CASE Lower( Left( cLine, Len( "incpaths="     ) ) ) == "incpaths="    
; cLine := SubStr( cLine, Len( "incpaths="     ) + 1 )
      CASE cKeyWord == "incpaths"
         FOR EACH cItem IN hb_ATokens( cLine,, .T. )
            cItem := PathSepToTarget( MacroProc( StrStripQuote( cItem ),
FN_DirGet( cFileName ) ) )
            IF AScan( aINCPATH, {|tmp| tmp == cItem } ) == 0
               AAddNotEmpty( aINCPATH, cItem )
            ENDIF
         NEXT

      //CASE Lower( Left( cLine, Len( "inctrypaths="  ) ) ) ==
"inctrypaths="  ; cLine := SubStr( cLine, Len( "inctrypaths="  ) + 1 )
      CASE cKeyWord == "inctrypaths"
         FOR EACH cItem IN hb_ATokens( cLine,, .T. )
            cItem := PathSepToTarget( MacroProc( StrStripQuote( cItem ),
FN_DirGet( cFileName ) ) )
            IF AScan( aINCTRYPATH, {|tmp| tmp == cItem } ) == 0
               AAddNotEmpty( aINCTRYPATH, cItem )
            ENDIF
         NEXT

      /* NOTE: This keyword is used in hbmk.cfg and signals whether
               a given optional module (gtsln, gtcrs, gtxwc) is part of the
               Harbour shared library, so that we can automatically add
               the required libs here. [vszakats] */
      //CASE Lower( Left( cLine, Len( "libdynhas="    ) ) ) == "libdynhas="   
; cLine := SubStr( cLine, Len( "libdynhas="    ) + 1 )
      CASE cKeyWord == "libdynhas"
         FOR EACH cItem IN hb_ATokens( cLine,, .T. )
            cItem := PathSepToTarget( StrStripQuote( cItem ) )
            IF ! Empty( cItem )
               IF AScan( aLIBDYNHAS, {|tmp| tmp == cItem } ) == 0
                  AAdd( aLIBDYNHAS, cItem )
               ENDIF
               IF Lower( Left( cItem, 2 ) ) == "gt" .AND. ;
                  AScan( s_aLIBCOREGT, {|tmp| Lower( tmp ) == Lower( cItem )
} ) == 0
                  AAdd( s_aLIBCOREGT, cItem )
               ENDIF
            ENDIF
         NEXT

      //CASE Lower( Left( cLine, Len( "echo="         ) ) ) == "echo="        
; cLine := SubStr( cLine, Len( "echo="         ) + 1 )
      CASE cKeyWord == "echo"
         cLine := MacroProc( cLine, FN_DirGet( cFileName ) )
         IF ! Empty( cLine )
            OutStd( hb_StrFormat( I_( "%1$s" ), cLine ), hb_osNewLine() )
         ENDIF

      //CASE Lower( Left( cLine, Len( "prgflags="     ) ) ) == "prgflags="    
; cLine := SubStr( cLine, Len( "prgflags="     ) + 1 )
      CASE cKeyWord == "prgflags"
         FOR EACH cItem IN hb_ATokens( cLine,, .T. )
            cItem := PathSepToTarget( MacroProc( StrStripQuote( cItem ),
FN_DirGet( cFileName ) ) )
            IF AScan( aOPTPRG, {|tmp| tmp == cItem } ) == 0
               AAddNotEmpty( aOPTPRG, cItem )
            ENDIF
         NEXT

      //CASE Lower( Left( cLine, Len( "cflags="       ) ) ) == "cflags="      
; cLine := SubStr( cLine, Len( "cflags="       ) + 1 )
      CASE cKeyWord == "cflags"
         FOR EACH cItem IN hb_ATokens( cLine,, .T. )
            cItem := MacroProc( StrStripQuote( cItem ), FN_DirGet( cFileName
) )
            IF AScan( aOPTC, {|tmp| tmp == cItem } ) == 0
               AAddNotEmpty( aOPTC, cItem )
            ENDIF
         NEXT

      //CASE Lower( Left( cLine, Len( "resflags="     ) ) ) == "resflags="    
; cLine := SubStr( cLine, Len( "resflags="     ) + 1 )
      CASE cKeyWord == "resflags"
         FOR EACH cItem IN hb_ATokens( cLine,, .T. )
            cItem := MacroProc( StrStripQuote( cItem ), FN_DirGet( cFileName
) )
            IF AScan( aOPTRES, {|tmp| tmp == cItem } ) == 0
               AAddNotEmpty( aOPTRES, cItem )
            ENDIF
         NEXT

      //CASE Lower( Left( cLine, Len( "ldflags="      ) ) ) == "ldflags="     
; cLine := SubStr( cLine, Len( "ldflags="      ) + 1 )
      CASE cKeyWord == "ldflags"
         FOR EACH cItem IN hb_ATokens( cLine,, .T. )
            cItem := MacroProc( StrStripQuote( cItem ), FN_DirGet( cFileName
) )
            IF AScan( aOPTL, {|tmp| tmp == cItem } ) == 0
               AAddNotEmpty( aOPTL, cItem )
            ENDIF
         NEXT

      //CASE Lower( Left( cLine, Len( "gui="          ) ) ) == "gui="         
; cLine := SubStr( cLine, Len( "gui="          ) + 1 )
      CASE cKeyWord == "gui"
         DO CASE
         CASE ValueIsT( cLine ) ; lGUI := .T.
         CASE ValueIsF( cLine ) ; lGUI := .F.
         ENDCASE

      //CASE Lower( Left( cLine, Len( "mt="           ) ) ) == "mt="          
; cLine := SubStr( cLine, Len( "mt="           ) + 1 )
      CASE cKeyWord == "mt"
         DO CASE
         CASE Lower( cLine ) == "mt" ; lMT := .T. /* Compatibility */
         CASE ValueIsT( cLine ) ; lMT := .T.
         CASE ValueIsF( cLine ) ; lMT := .F.
         ENDCASE

      //CASE Lower( Left( cLine, Len( "shareddef="    ) ) ) == "shareddef="   
; cLine := SubStr( cLine, Len( "shareddef="    ) + 1 )
      CASE cKeyWord == "shareddef"
         IF lSHARED == NIL
            DO CASE
            CASE ValueIsT( cLine ) ; lSHARED := .T. ; lSTATICFULL := .F.
            CASE ValueIsF( cLine ) ; lSHARED := .F. ; lSTATICFULL := .F.
            ENDCASE
         ENDIF
      //CASE Lower( Left( cLine, Len( "shared="       ) ) ) == "shared="      
; cLine := SubStr( cLine, Len( "shared="       ) + 1 )
      CASE cKeyWord == "shared"
         DO CASE
         CASE ValueIsT( cLine ) ; lSHARED := .T. ; lSTATICFULL := .F.
         CASE ValueIsF( cLine ) ; lSHARED := .F. ; lSTATICFULL := .F.
         ENDCASE

      //CASE Lower( Left( cLine, Len( "fullstatic="   ) ) ) == "fullstatic="  
; cLine := SubStr( cLine, Len( "fullstatic="   ) + 1 )
      CASE cKeyWord == "fullstatic"  
         DO CASE
         CASE ValueIsT( cLine ) ; lSHARED := .F. ; lSTATICFULL := .T.
         CASE ValueIsF( cLine ) ; lSHARED := .F. ; lSTATICFULL := .F.
         ENDCASE

      //CASE Lower( Left( cLine, Len( "debug="        ) ) ) == "debug="       
; cLine := SubStr( cLine, Len( "debug="        ) + 1 )
      CASE cKeyWord == "debug"
         DO CASE
         CASE ValueIsT( cLine ) ; lDEBUG := .T.
         CASE ValueIsF( cLine ) ; lDEBUG := .F.
         ENDCASE

      //CASE Lower( Left( cLine, Len( "opt="          ) ) ) == "opt="         
; cLine := SubStr( cLine, Len( "opt="          ) + 1 )
      CASE cKeyWord == "opt"
         DO CASE
         CASE ValueIsT( cLine ) ; lOPT := .T.
         CASE ValueIsF( cLine ) ; lOPT := .F.
         ENDCASE

      //CASE Lower( Left( cLine, Len( "nulrdd="       ) ) ) == "nulrdd="      
; cLine := SubStr( cLine, Len( "nulrdd="       ) + 1 )
      CASE cKeyWord == "nulrdd"
         DO CASE
         CASE ValueIsT( cLine ) ; lNULRDD := .T.
         CASE ValueIsF( cLine ) ; lNULRDD := .F.
         ENDCASE

      //CASE Lower( Left( cLine, Len( "map="          ) ) ) == "map="         
; cLine := SubStr( cLine, Len( "map="          ) + 1 )
      CASE cKeyWord == "map"
         DO CASE
         CASE ValueIsT( cLine ) ; lMAP := .T.
         CASE ValueIsF( cLine ) ; lMAP := .F.
         ENDCASE

      //CASE Lower( Left( cLine, Len( "strip="        ) ) ) == "strip="       
; cLine := SubStr( cLine, Len( "strip="        ) + 1 )
      CASE cKeyWord == "strip"
         DO CASE
         CASE ValueIsT( cLine ) ; lSTRIP := .T.
         CASE ValueIsF( cLine ) ; lSTRIP := .F.
         ENDCASE

      //CASE Lower( Left( cLine, Len( "compr="        ) ) ) == "compr="       
; cLine := SubStr( cLine, Len( "compr="        ) + 1 )
      CASE cKeyWord == "compr"
         DO CASE
         CASE ValueIsT( cLine )       ; nCOMPR := _COMPR_DEF
         CASE ValueIsF( cLine )       ; nCOMPR := _COMPR_OFF
         CASE Lower( cLine ) == "def" ; nCOMPR := _COMPR_DEF
         CASE Lower( cLine ) == "min" ; nCOMPR := _COMPR_MIN
         CASE Lower( cLine ) == "max" ; nCOMPR := _COMPR_MAX
         ENDCASE

      //CASE Lower( Left( cLine, Len( "head="         ) ) ) == "head="        
; cLine := SubStr( cLine, Len( "head="         ) + 1 )
      CASE cKeyWord == "head"
         DO CASE
         CASE Lower( cLine ) == "off"     ; nHEAD := _HEAD_OFF
         CASE Lower( cLine ) == "full"    ; nHEAD := _HEAD_FULL
         CASE Lower( cLine ) == "partial" ; nHEAD := _HEAD_PARTIAL
         ENDCASE

      //CASE Lower( Left( cLine, Len( "run="          ) ) ) == "run="         
; cLine := SubStr( cLine, Len( "run="          ) + 1 )
      CASE cKeyWord == "run"
         DO CASE
         CASE ValueIsT( cLine ) ; lRUN := .T.
         CASE ValueIsF( cLine ) ; lRUN := .F.
         ENDCASE

      //CASE Lower( Left( cLine, Len( "inc="          ) ) ) == "inc="         
; cLine := SubStr( cLine, Len( "inc="          ) + 1 )
      CASE cKeyWord == "inc"
         DO CASE
         CASE ValueIsT( cLine ) ; lINC := .T.
         CASE ValueIsF( cLine ) ; lINC := .F.
         ENDCASE

      /* NOTE: This keyword is used to signal the default GT used when
               building Harbour. It only needs to be filled if this default
               GT is different from the Harbour default one, IOW when it
               was overridden by user at Harbour build time. [vszakats] */
      //CASE Lower( Left( cLine, Len( "gtdef="        ) ) ) == "gtdef="       
; cLine := SubStr( cLine, Len( "gtdef="        ) + 1 )
      CASE cKeyWord == "gtdef"
         IF ! Empty( cLine )
            IF ! SetupForGT( cLine, @s_cGTDEFAULT, @lGUI )
               cLine := NIL
            ENDIF
            IF ! Empty( cLine ) .AND. !( Lower( cLine ) == "gtnul" )
               IF AScan( s_aLIBCOREGT, {|tmp| Lower( tmp ) == Lower( cLine )
} ) == 0 .AND. ;
                  AScan( aLIBUSERGT  , {|tmp| Lower( tmp ) == Lower( cLine )
} ) == 0
                  AAddNotEmpty( aLIBUSERGT, PathSepToTarget( cLine ) )
               ENDIF
            ENDIF
         ENDIF

      //CASE Lower( Left( cLine, Len( "gt="           ) ) ) == "gt="          
; cLine := SubStr( cLine, Len( "gt="           ) + 1 )
      CASE cKeyWord == "gt"
         IF ! Empty( cLine )
            IF cGT == NIL
               IF ! SetupForGT( cLine, @cGT, @lGUI )
                  cLine := NIL
               ENDIF
            ENDIF
            IF ! Empty( cLine ) .AND. !( Lower( cLine ) == "gtnul" )
               IF AScan( s_aLIBCOREGT, {|tmp| Lower( tmp ) == Lower( cLine )
} ) == 0 .AND. ;
                  AScan( aLIBUSERGT  , {|tmp| Lower( tmp ) == Lower( cLine )
} ) == 0
                  AAddNotEmpty( aLIBUSERGT, PathSepToTarget( cLine ) )
               ENDIF
            ENDIF
         ENDIF

      ENDCASE
   NEXT

   RETURN


Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/HBMK2---Few-Changes-tp23348709p23348999.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Sat May  2 14:55:08 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat May  2 14:55:14 2009
Subject: [Harbour] HBMK2 - Few Changes
In-Reply-To: <18d502870905021100ye2b58dck9a9a48bf53749edf@mail.gmail.com>
References: <23348709.post@talk.nabble.com>
	<18d502870905021100ye2b58dck9a9a48bf53749edf@mail.gmail.com>
Message-ID: <23349227.post@talk.nabble.com>


Hello Viktor

Few more observations:

1.
-workdir= 

This switch is not a part of .hbp. 
Can it be included here?

2.
No support for commented block. 
/*
*/ 
IMO it must be avialble in both .hbp and .hbm.

3. 
-o<OutFileName> also cannot be defined in .hbp.

4.
Can we define a macro in .hbm like:
$source_folder=c:\dev_sources\vouch

{source_folder}\vouch.prg
{source_folder}\b_myprg.prg
...

OR 
in .hbp a keyword prgdirsource= or something like...


Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/HBMK2---Few-Changes-tp23348709p23349227.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Sat May  2 15:15:29 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat May  2 15:15:35 2009
Subject: [Harbour] HBMK2 - Few Changes
In-Reply-To: <18d502870905021100ye2b58dck9a9a48bf53749edf@mail.gmail.com>
References: <23348709.post@talk.nabble.com>
	<18d502870905021100ye2b58dck9a9a48bf53749edf@mail.gmail.com>
Message-ID: <23349387.post@talk.nabble.com>


Hi

Here is what I placed at the end of hbmk.prg to strip commented block:

STATIC FUNCTION StripCommnets( cFile )
   LOCAL n, n1

   DO WHILE .T.
      IF ( n := at( '/*', cFile ) ) == 0
         EXIT
      ENDIF
      IF ( n1 := at( '*/', cFile ) ) == 0
         EXIT
      ENDIF
      
      cFile := SubStr( cFile, 1, n-1 ) + SubStr( cFile, n1+2 )
   ENDDO

   RETURN cFile

And then in:

STATIC PROCEDURE HBM_Load( aParams, cFileName, /* @ */ nEmbedLevel )
   LOCAL cFile
   LOCAL cLine
   LOCAL cParam

   IF hb_FileExists( cFileName )

      cFile := MemoRead( cFileName ) /* NOTE: Intentionally using MemoRead()
which handles EOF char. */
      cFile := StripCommnets( cFile )
...

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/HBMK2---Few-Changes-tp23348709p23349387.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sat May  2 15:20:56 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sat May  2 15:21:01 2009
Subject: [Harbour] HBMK2 - Few Changes
In-Reply-To: <23349227.post@talk.nabble.com>
References: <23348709.post@talk.nabble.com>
	<18d502870905021100ye2b58dck9a9a48bf53749edf@mail.gmail.com>
	<23349227.post@talk.nabble.com>
Message-ID: <18d502870905021220o3fa7678qdb46df502bd6cde8@mail.gmail.com>

>
> 1.
> -workdir=
>
> This switch is not a part of .hbp.
> Can it be included here?


I left it because it's target specific detail. Best to have it
in .hbm or cmdline.


> 2.
> No support for commented block.
> /*
> */
> IMO it must be avialble in both .hbp and .hbm.


I really wanted to keep it simple, so no such freeform
comments are supported, intentionally. If we complicate
it each .hbp reader and parser will have to be much heavier,
error prone and hard to implement. Usually these files are really
small, f.e. my whole project with 600+ files is no more than
8 lines + lib template is 30-50. For similar reasons I left
out any usual freeform support for parameter lines.


> 3.
> -o<OutFileName> also cannot be defined in .hbp.


Also build/app/target specific option. .hbp is meant to accompany
3rd party libs and in such file is best to leave out everything
which is app specific. What you need is probably an .hbm
file if you miss -o.


> 4.
> Can we define a macro in .hbm like:
> $source_folder=c:\dev_sources\vouch
>
> {source_folder}\vouch.prg
> {source_folder}\b_myprg.prg


You can define envvars outside hbmk2 and use them as ${ENVVAR}
I prefer to encourage users to minimize such hard wired paths in
these config files. You can use relative to .hbm dirs, usually it's
much more flexible. I mean you place your .hbm file in C:\dev_sources\vouch
and simply put the .prg file in there as vouch.prg, b_myprg.prg.
You can include this .hbm file from other .hbm files or from command
line either by absolute or relative dir and hbmk2 will find your .prg
files. Adding such variable handling engine in hbmk2 would create a
quite heavy layer with several complications not just for hbmk2
development,
but also for users, f.e. how these can be inherited, which is stronger,
envvar or local var, exporting, importing, so basically all the burden what
is present in regular script files and GNU make, and which makes them
much more complicated to use than necessary.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090502/6dcaa5ff/attachment.html
From harbour.01 at syenar.hu  Sat May  2 15:23:47 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sat May  2 15:23:53 2009
Subject: [Harbour] HBMK2 - Few Changes
In-Reply-To: <23349387.post@talk.nabble.com>
References: <23348709.post@talk.nabble.com>
	<18d502870905021100ye2b58dck9a9a48bf53749edf@mail.gmail.com>
	<23349387.post@talk.nabble.com>
Message-ID: <18d502870905021223v50fd4009j13ba78ef30b5628d@mail.gmail.com>

Than we have the embedded comment problem, plus detecting /* / */ in already
commented lines (#). All too many problems with
little gain IMO. Not to mention /* appearing as regular and valid file
items:
---
src/*.prg
---

Brgds,
Viktor

On Sat, May 2, 2009 at 9:15 PM, Pritpal Bedi <bedipritpal@hotmail.com>wrote:

>
> Hi
>
> Here is what I placed at the end of hbmk.prg to strip commented block:
>
> STATIC FUNCTION StripCommnets( cFile )
>   LOCAL n, n1
>
>   DO WHILE .T.
>      IF ( n := at( '/*', cFile ) ) == 0
>         EXIT
>      ENDIF
>      IF ( n1 := at( '*/', cFile ) ) == 0
>         EXIT
>      ENDIF
>
>      cFile := SubStr( cFile, 1, n-1 ) + SubStr( cFile, n1+2 )
>   ENDDO
>
>   RETURN cFile
>
> And then in:
>
> STATIC PROCEDURE HBM_Load( aParams, cFileName, /* @ */ nEmbedLevel )
>   LOCAL cFile
>   LOCAL cLine
>   LOCAL cParam
>
>   IF hb_FileExists( cFileName )
>
>      cFile := MemoRead( cFileName ) /* NOTE: Intentionally using MemoRead()
> which handles EOF char. */
>       cFile := StripCommnets( cFile )
> ...
>
> Regards
> Pritpal Bedi
>
> --
> View this message in context:
> http://www.nabble.com/HBMK2---Few-Changes-tp23348709p23349387.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090502/54476554/attachment.html
From bedipritpal at hotmail.com  Sat May  2 15:58:17 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat May  2 15:58:22 2009
Subject: [Harbour] HBMK2 - Few Changes
In-Reply-To: <18d502870905021223v50fd4009j13ba78ef30b5628d@mail.gmail.com>
References: <23348709.post@talk.nabble.com>
	<18d502870905021100ye2b58dck9a9a48bf53749edf@mail.gmail.com>
	<23349387.post@talk.nabble.com>
	<18d502870905021223v50fd4009j13ba78ef30b5628d@mail.gmail.com>
Message-ID: <23349702.post@talk.nabble.com>


Hi


Szak?ts Viktor wrote:
> 
> Than we have the embedded comment problem, plus detecting /* / */ in
> already
> commented lines (#). All too many problems with
> little gain IMO. Not to mention /* appearing as regular and valid file
> items:
> ---
> src/*.prg
> ---
> 

Your reasoning is valid. It can be avoided.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/HBMK2---Few-Changes-tp23348709p23349702.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Sat May  2 16:09:23 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat May  2 16:09:28 2009
Subject: [Harbour] HBMK2 - Few Changes
In-Reply-To: <18d502870905021220o3fa7678qdb46df502bd6cde8@mail.gmail.com>
References: <23348709.post@talk.nabble.com>
	<18d502870905021100ye2b58dck9a9a48bf53749edf@mail.gmail.com>
	<23349227.post@talk.nabble.com>
	<18d502870905021220o3fa7678qdb46df502bd6cde8@mail.gmail.com>
Message-ID: <23349792.post@talk.nabble.com>


Hi


Szak?ts Viktor wrote:
> 
>> 1.
>> -workdir=
>>
>> This switch is not a part of .hbp.
>> Can it be included here?
> 
> 
> I left it because it's target specific detail. Best to have it
> in .hbm or cmdline.
> 

IMO it is useful in this form:
{bcc}workdir=...

I am trying to reduce the number of batch configurations.




> I really wanted to keep it simple, so no such freeform
> comments are supported, intentionally. If we complicate
> it each .hbp reader and parser will have to be much heavier,
> error prone and hard to implement. Usually these files are really
> small, f.e. my whole project with 600+ files is no more than
> 8 lines + lib template is 30-50. For similar reasons I left
> out any usual freeform support for parameter lines.
> 

I agree to not implement commented blocks. 
May be src/*.prg is not an option for everybody.
BTW I am interested how you designed your 
8 lines + lib templates.



>> 3.
>> -o<OutFileName> also cannot be defined in .hbp.
> 
> 
> Also build/app/target specific option. .hbp is meant to accompany
> 3rd party libs and in such file is best to leave out everything
> which is app specific. What you need is probably an .hbm
> file if you miss -o.
> 

You already have implemented filters, no?
So 
{bcc}outfile=c:\dev_exes\vouch.bcc
{msvc}outfile=c:\dev_exes\vouch.msvc

I avoid one more parameter in routine batch file.
What is the loss if it is implemented in .hbp also 
alongwith how it is behaving as of current.


 4.
>> Can we define a macro in .hbm like:
>> $source_folder=c:\dev_sources\vouch
>>
>> {source_folder}\vouch.prg
>> {source_folder}\b_myprg.prg
> 
> You can define envvars outside hbmk2 and use them as ${ENVVAR}
> I prefer to encourage users to minimize such hard wired paths in
> these config files. You can use relative to .hbm dirs, usually it's
> much more flexible. I mean you place your .hbm file in
> C:\dev_sources\vouch
> and simply put the .prg file in there as vouch.prg, b_myprg.prg.
> You can include this .hbm file from other .hbm files or from command
> line either by absolute or relative dir and hbmk2 will find your .prg
> files. Adding such variable handling engine in hbmk2 would create a
> quite heavy layer with several complications not just for hbmk2
> development,
> but also for users, f.e. how these can be inherited, which is stronger,
> envvar or local var, exporting, importing, so basically all the burden
> what
> is present in regular script files and GNU make, and which makes them
> much more complicated to use than necessary.
> 

Ameen.
What is the syntax of using ${ENVVAR} in .hbm files.
It practically solves my purpose.

Regards
Pritpal

PS : I am asking so much because though xMate has served well
all these years still I felt the punch of some very important missing
features which Andy could never get a time to implement.

-- 
View this message in context: http://www.nabble.com/HBMK2---Few-Changes-tp23348709p23349792.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vszakats at users.sourceforge.net  Sat May  2 16:10:58 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat May  2 16:11:03 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10972] trunk/harbour
Message-ID: <E1M0LY2-000620-KH@c3vjzd1.ch3.sourceforge.com>

Revision: 10972
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10972&view=rev
Author:   vszakats
Date:     2009-05-02 20:10:57 +0000 (Sat, 02 May 2009)

Log Message:
-----------
2009-05-02 22:09 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    * Cleanup: Added few internal constants.
    * Cleanup: Some debug strings marked as non-translatable.
    + Help screen forming changed to be friendly to translators.
      Please update .pot files.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bedipritpal at hotmail.com  Sat May  2 16:15:31 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat May  2 16:15:36 2009
Subject: [Harbour] HBMK2 - Few Changes
In-Reply-To: <18d502870905021220o3fa7678qdb46df502bd6cde8@mail.gmail.com>
References: <23348709.post@talk.nabble.com>
	<18d502870905021100ye2b58dck9a9a48bf53749edf@mail.gmail.com>
	<23349227.post@talk.nabble.com>
	<18d502870905021220o3fa7678qdb46df502bd6cde8@mail.gmail.com>
Message-ID: <23349852.post@talk.nabble.com>


Hi



>> 4.
>> Can we define a macro in .hbm like:
>> $source_folder=c:\dev_sources\vouch
>>
>> {source_folder}\vouch.prg
>> {source_folder}\b_myprg.prg
> 
> You can define envvars outside hbmk2 and use them as ${ENVVAR}
> I prefer to encourage users to minimize such hard wired paths in
> these config files. You can use relative to .hbm dirs, usually it's
> much more flexible. I mean you place your .hbm file in
> C:\dev_sources\vouch
> and simply put the .prg file in there as vouch.prg, b_myprg.prg.
> You can include this .hbm file from other .hbm files or from command
> line either by absolute or relative dir and hbmk2 will find your .prg
> files. Adding such variable handling engine in hbmk2 would create a
> quite heavy layer with several complications not just for hbmk2
> development,
> but also for users, f.e. how these can be inherited, which is stronger,
> envvar or local var, exporting, importing, so basically all the burden
> what
> is present in regular script files and GNU make, and which makes them
> much more complicated to use than necessary.
> 

BTW the follwoing code implements what you already have and more:

STATIC PROCEDURE HBM_Load( aParams, cFileName, /* @ */ nEmbedLevel )
   LOCAL cFile
   LOCAL cLine
   LOCAL cParam
   LOCAL cMacro := ''
   LOCAL cValue := ''
   LOCAL n

   IF hb_FileExists( cFileName )

      cFile := MemoRead( cFileName ) /* NOTE: Intentionally using MemoRead()
which handles EOF char. */
      cFile := StripCommnets( cFile )

      IF ! hb_osNewLine() == _EOL
         cFile := StrTran( cFile, hb_osNewLine(), _EOL )
      ENDIF
      IF ! hb_osNewLine() == Chr( 13 ) + Chr( 10 )
         cFile := StrTran( cFile, Chr( 13 ) + Chr( 10 ), _EOL )
      ENDIF

      FOR EACH cLine IN hb_ATokens( cFile, _EOL )
         cLine := AllTrim( cLine )
  
         IF !( Left( cLine, 1 ) == "#" )
            IF Left( cLine, 1 ) == "{"
               IF ( n := At( '=', cLine ) ) > 0
                  cMacro := AllTrim( cLine, 1, n-1 )
                  cValue := AllTrim( cLine, n+1 )
                  /* Parse cValue again along lines of generic make systems
*/
                  IF Left( cValue, 2 ) == "$("
                     cValue := SubStr( cValue, 3 )
                     cValue := SubStr( cValue, 1, Len( cValue ) - 1 )
                     IF GetEnv( cValue ) != ""
                        cValue := GetEnv( cValue ) /* Just to avoid one more
variable */
                     ENDIF 
                  ENDIF
               ENDIF 

            ELSE
               cLine := StrTran( cLine, cMacro, cValue )

               FOR EACH cParam IN hb_ATokens( cLine,, .T. )
                  cParam := StrStripQuote( cParam )
                  IF ! Empty( cParam )
                     DO CASE
                     CASE ( Len( cParam ) >= 1 .AND. Left( cParam, 1 ) ==
"@" )
                        IF nEmbedLevel < 3
                           cParam := SubStr( cParam, 2 )
                           IF Empty( FN_ExtGet( cParam ) )
                              cParam := FN_ExtSet( cParam, ".hbm" )
                           ENDIF
                           nEmbedLevel++
                           HBM_Load( aParams, PathProc( cParam, cFileName ),
@nEmbedLevel ) /* Load parameters from script file */
                        ENDIF
                     CASE Lower( FN_ExtGet( cParam ) ) == ".hbm"
                        IF nEmbedLevel < 3
                           nEmbedLevel++
                           HBM_Load( aParams, PathProc( cParam, cFileName ),
@nEmbedLevel ) /* Load parameters from script file */
                        ENDIF
                     OTHERWISE
                        AAdd( aParams, { cParam, cFileName,
cLine:__enumIndex() } )
                     ENDCASE
                  ENDIF
               NEXT
            ENDIF 

         ENDIF
      NEXT
   ELSE
      OutErr( hb_StrFormat( "hbmk: Warning: File cannot be found: %1$s",
cFileName ), hb_osNewLine() )
   ENDIF

   RETURN


Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/HBMK2---Few-Changes-tp23348709p23349852.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sat May  2 16:24:21 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sat May  2 16:24:25 2009
Subject: [Harbour] HBMK2 - Few Changes
In-Reply-To: <23349792.post@talk.nabble.com>
References: <23348709.post@talk.nabble.com>
	<18d502870905021100ye2b58dck9a9a48bf53749edf@mail.gmail.com>
	<23349227.post@talk.nabble.com>
	<18d502870905021220o3fa7678qdb46df502bd6cde8@mail.gmail.com>
	<23349792.post@talk.nabble.com>
Message-ID: <18d502870905021324r35198d1drda48376720f24080@mail.gmail.com>

>
> IMO it is useful in this form:
> {bcc}workdir=...


A .hbp just plugs in into a build process and there can
be multiple .hbp files (even picked automatically), so
speccing workdir here is not the best, can create conflicts
or unexpected results for the user.


> >> 3.
>
>> -o<OutFileName> also cannot be defined in .hbp.
> >
> >
> > Also build/app/target specific option. .hbp is meant to accompany
> > 3rd party libs and in such file is best to leave out everything
> > which is app specific. What you need is probably an .hbm
> > file if you miss -o.
> >
>
> You already have implemented filters, no?
> So
> {bcc}outfile=c:\dev_exes\vouch.bcc
> {msvc}outfile=c:\dev_exes\vouch.msvc


Or even (in .hbm file or cmdline):
-oC:\dev_exes\vouch.${hb_comp}

I avoid one more parameter in routine batch file.
> What is the loss if it is implemented in .hbp also
> alongwith how it is behaving as of current.


It doesn't belong here. I think in your case it's
enough to use .hbm files and no .hbp files.


> > is present in regular script files and GNU make, and which makes them
> > much more complicated to use than necessary.
> >
>
> Ameen.
> What is the syntax of using ${ENVVAR} in .hbm files.
> It practically solves my purpose.


Well, just simply ${ENVVAR} :) where ENVVAR is the
name of your environment variable.

PS : I am asking so much because though xMate has served well
> all these years still I felt the punch of some very important missing
> features which Andy could never get a time to implement.


I didn't look closely into xMate project files yet, the goal wasn't to
mimic
it, anyhow since the purpose is similar you can probably find several
similarities in final implementation.

The basic idea of hbmk2 is that you can do everything in command
line and you can extend your command line into .hbm scripts which
use the exact same format as cmdline. Plus you can embed them.

.hbp files serve the specific purpose of accompanying libraries and
add that lib specific requirements to a given app build (project). So it's
not to be confused with "project files" used in some builders. Project
files are rather .hbms.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090502/1c8c1ad5/attachment.html
From harbour.01 at syenar.hu  Sat May  2 18:22:37 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sat May  2 18:22:46 2009
Subject: [Harbour] Merging .pot files
Message-ID: <18d502870905021522p35f4c2ecs1d9aad06587adaf6@mail.gmail.com>

Hi Przemek and All,
I've just tried to update a half-translated (HU) .pot file from hbmk2
source,
but didn't succeed. Maybe I'm missing something. The goal would be
to retain still existing in source translations while deleting no longer
existing ones.

If I try to regenerate .pot file with Harbour -j option, it will simply
overwrite existing file, so it's no good. Then I've tried hbi18n -m
(merge) option, and it indeed merged the old .pot with the newly
generated one, but it didn't delete no longer existing items.

What is the way update .pot files from source?

Brgds,
Viktor

[ I have a local tool that does this (with some house specific tweak),
but I wanted to use Harbour tools only. This tool would move deleted
entries to a backup file because it may contain useful content. Also,
new entries are marked with date of addition to help translators. ]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090503/620b11be/attachment.html
From bedipritpal at hotmail.com  Sat May  2 23:59:13 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat May  2 23:59:18 2009
Subject: [Harbour] MT - DBFCDX - Next Appln Instance Hangs ...
Message-ID: <23352456.post@talk.nabble.com>


Hello Przemek

Next applicantion instance is put under 
indefinite loop in dbUseArea() if a table is 
attempted to be opened in EXCLUSIVE mode where
first instance has alreay that table open in 
SHARED mode. Appln is compiled with MT support.

Here is the code from my appln ( working since 
good old Clipper days )

function Sema4Init()
   local fname := if( SetCache(), SEMA4FILE , SEMA4PATH+'\'+SEMA4FILE  )
   local iName := if( SetCache(), SEMA4INDEX, SEMA4PATH+'\'+SEMA4INDEX )

   if !VouExistTable( SEMA4ALIAS, SEMA4FILE, SEMA4PATH, cSemaDrv, .f. )
      bDbCreate( fName,{ { 'sema4name','C',20,0 },{ 'username','C',5,0 } },
cSemaDrv )
      if !VouExistTable( SEMA4ALIAS, SEMA4FILE, SEMA4PATH, cSemaDrv,.f. )
         alert( 'SemaPhore file could not be created' )
         return .f.
      endif
   endif

   //  check if anybody is logged with exclusive use
   //
   //     /////////////   NEXT INSTANCE HANGS HERE ( CPU USAGE 50% FOR THIS
INSTANCE )  ////////
   //
   if eval( {|| dbUseArea( .t.,cSemaDrv,fName,SEMA4ALIAS,.f. ), !NetErr() }
)

      // other code

      DbCloseArea()

   endif

   //  compulsory use sema4 in shared mode
   do while .t.
      if eval( {|| dbusearea(.t.,cSemaDrv,fName,SEMA4ALIAS,.T.),!netErr()} )

         if !VouExistIndex( SEMA4ALIAS, SEMA4INDEX, SEMA4PATH, cSemaDrv, .f.
)
            dbclosearea()
            return .f.
         endif

         ordlistclear()
         ordlistadd( iName )
         ordsetfocus( 1 )

      else
         return .f.

      endif
      exit
   enddo

   do while !dbRelease( SEMA4ALIAS )     //////////////// NOTE, may be
important  ////////////
   enddo

   return .t.

//----------------------------------------------------------------------//


Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/MT---DBFCDX---Next-Appln-Instance-Hangs-...-tp23352456p23352456.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sun May  3 04:14:57 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May  3 04:15:05 2009
Subject: [Harbour] Support for __enumLen(), possible?
Message-ID: <18d502870905030114s6e695852i75814ea57f1cc291@mail.gmail.com>

Hi All,
I'm wondering if it would be possible to add support for __enumLen()
which would return the total number of enumerations in a FOR EACH loop?

Opinions? is it possible?

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090503/7d9014c8/attachment.html
From vszakats at users.sourceforge.net  Sun May  3 04:37:14 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun May  3 04:37:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10973] trunk/harbour
Message-ID: <E1M0XCE-0003d4-M7@d5vjzd1.ch3.sourceforge.com>

Revision: 10973
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10973&view=rev
Author:   vszakats
Date:     2009-05-03 08:37:13 +0000 (Sun, 03 May 2009)

Log Message:
-----------
2009-05-03 10:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + Added experimental and partial support to build using/for xhb.
      This is to help some 3rd party lib developers who'd like to
      target both compilers. Some aspects of xhb support aren't working
      or working slightly differently: Default Harbour switch is
      -n instead of -n2 which isn't supported in xhb. Everything
      related to dll handling won't currently work. Cross-compiling
      won't work either due to at least differences in __PLATFORM__
      macros. Anyway, play with it and tweak the source if needed.
      I hope we can add support without adding too much hacks into
      hbmk2 source, if however we need to bend logic too far, I'd
      rather leave those problematic parts of to keep the code
      maintainable. F.e. xhb compatible COMP/ARCH values aren't
      supported and I don't plan to add them.
      Enable support by renaming hbmk2 to have an 'x' prefix: xhbmk2,
      or use -xhb command line switch. The only intent is be able
      to use hbmk2 to build binaries from sources using xhb compiler
      and libs. Also notice that I've made just very light tests
      only with bcc55 compiler.
      [ notice: xhb support doesn't mean you can compile hbmk2 with
        xhb. This wasn't intented or planned. ]

  * utils/hbmk2/examples/contribf.hbp
    ! Fixes.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/examples/contribf.hbp
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From mbelgrano at deltain.it  Sun May  3 05:08:37 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun May  3 05:09:06 2009
Subject: [Harbour] FW: Sobre Harbour
In-Reply-To: <18d502870904100820g1f23cb51m1fef97a974d88904@mail.gmail.com>
References: <BAY132-W20037A81456CAAC347920580800@phx.gbl>
	<BLU145-W3A2FA834C8F048C60A89E85800@phx.gbl> 
	<609353e70904100707h65e6e3a8s5dc01164bd47a7b@mail.gmail.com> 
	<18d502870904100820g1f23cb51m1fef97a974d88904@mail.gmail.com>
Message-ID: <609353e70905030208g3a6667f0wb86b7725ceec4398@mail.gmail.com>

I notice that in this distribution are missed tests of contrib library
for example gtwvg.lib is present but demowvg.prg and demoxbp.prg are non present
so i suggest put  under tests\contri\gtwvg


2009/4/10 Viktor Szak?ts <harbour.01@syenar.hu>:
> Yes, but the instructions has changed since:
> ---
> Hi All,
> I've updated the unified release to the latest Harbour version, and
> this time with only one package which, hopefully will fit most
> users' needs:
> http://www.syenar.hu/harbour/harbour-11-win-20090408.7z?(48MB)
> http://www.syenar.hu/harbour/harbour-11-win-20090408.exe?(50MB)
> Installed size: 168MB (40MB - 314MB)
> It contains all components of former 'full' package, with some more
> fine grained control and without mingw64/mingwce embedded
> versions to keep size down.?Now there is a README with links and
> short instructions how to get?these tools from official locations.
> The default installation will install MinGW compiler + x86 static and
> shared?libs, MSVC and BCC x86 libs and examples.
> Options: x86 shared tools, x64 shared tools, MinGW x64?and WinCE-ARM libs,
> MSVC x64 libs, Open Watcom x86 libs,?Pelles C x86/x64/WinCE-ARM libs,
> shared x64/WinCE-ARM libs.
> Usage:
> 1) install/unpack to any directory (C:\harbour-11)
> 2) go to bin dir (optional if you specify path for hbmk2)
> 3) For x86 executable type: 'hbmk2 ../tests/hello.prg'
> 4) For x64 executable type: 'hbmk2 ../tests/hello.prg -comp=mingw64'
> 5) For WinCE/ARM executable type: 'hbmk2 ../tests/hello.prg?-comp=mingwarm'
> Tools/libs used to create the package:
> MinGW 4.3.3, MinGW64 4.4.0, MinGWCE 4.1.0, BCC 5.5.1, Open Watcom 1.8,
> MSVC 2008, Pelles C 5.00.1,?ace 9.10,?allegro 4.2.2,?blat 2.6.2,?libcurl
> 7.19.3,
> firebird 2.1.1,?freeimage 3.11.0,?gd 2.0.34,?mysql 5.0.67,?openssl 0.9.8j,
> pgsql 8.3.3,?qt 4.5.0 (2009.01)
> Feedback is welcome, I plan to make this the default format for?the?next
> official release for Windows/Windows CE platforms.
> Brgds,
> Viktor
> [ Note: Some of the size growth is attributed to hbqt lib, especially
> with MSVC, which is C++ and huge.?It's not a problem, but please
> keep this?in mind when comparing size to prev versions. ]
> ---
> On Fri, Apr 10, 2009 at 4:07 PM, Massimo Belgrano <mbelgrano@deltain.it>
> wrote:
>>
>> I suggest try the Viktor's way
>> http://www.syenar.hu/harbour/hb-1.1.0dev.7z
>> 1) unpack to any directory (C:\hb-1.1.0dev)
>> 2) go to bin dir (optional if you specify path for hbmk2
>> 5) For WinCE/ARM executable type: 'hbmk2 ../tests/hello.prg?-comp=mingwce'
>>
>>
>>
>> --------------------------------------------
>>
>> Hi All,
>> I've made available a unified and self-contained Windows release
>> package,?which is able to create x86, x64, WinCE/ARM executables
>> (both shared and static) out?of the box without the need of any
>> external tools or settings.
>> Download:
>> http://www.syenar.hu/harbour/hb-1.1.0dev.7z
>> (size: 136MB)
>> To use:
>> 1) unpack to any directory (C:\hb-1.1.0dev)
>> 2) go to bin dir (optional if you specify path for hbmk2)
>> 3) For x86 executable type: 'hbmk2 ../tests/hello.prg'
>> 4) For x64 executable type: 'hbmk2 ../tests/hello.prg -comp=mingw64'
>> 5) For WinCE/ARM executable type: 'hbmk2 ../tests/hello.prg?-comp=mingwce'
>> The package also contains Harbour libraries to build MSVC 2008,
>> Open Watcom 1.8 and Borland C 5.5.1 executables. For these,
>> you need to have these compilers installed on your computer. The libs
>> will automatically be picked?by hbmk2.
>> The package contains MinGW 4.3.3, MinGW 4.4.0 for x64 and
>> MinGW 4.1.0 for ARM/CE embedded.
>> I've used 7-Zip instead of .zip, because it cut the archive size by
>> a factor of 2-3. If this package will get good reception I may add
>> installer with de-selectable x64, WinCE and additional target libs.
>> While it takes significant amount of time to assemble such package,
>> nevertheless IMO it should be the definitive and official release
>> methods instead of the separate compiler/CPU target specific
>> packages we offer for 1.0.1.
>> Following external dependencies were used to build corresponding
>> Harbour libs:
>> ace 9.10
>> allegro 4.2.2
>> blat 2.6.2
>> libcurl 7.19.3
>> firebird 2.1.1
>> freeimage 3.11.0
>> gd 2.0.34
>> mysql 5.0.67
>> openssl 0.9.8j
>> pgsql 8.3.3
>> qt 4.5.0 (2009.01)
>> Brgds,
>> Viktor
>>
>>
>> 2009/4/10 Alejandro de Garate <alex_degarate@hotmail.com>
>>>
>>>
>>> ?A potencially (spanish speaking) user wants to know if could be possible
>>> to make aplications for Windows Mobile 5 using Harbour ?
>>> He have a cell phone (mobil) Motorola Q.
>>> I have no idea about that matter, can anyone answer him ?
>>>
>>> regards
>>> Alejandro
>>>
>>>
>>> ---
>>>
>>> From: ken_torrealba AT hotmail DOT com
>>> To:
>>> Subject: Sobre Harbour
>>> Date: Fri, 10 Apr 2009 04:44:10 -0400
>>>
>>> ---
>>>
>>>
>>>
>>> _________________________________________________________________
>>> More than messages?check out the rest of the Windows Live?.
>>>
>>> http://www.microsoft.com/windows/windowslive/_______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>
>>
>> --
>> Massimo Belgrano
>>
>> Analisi e sviluppo software per Lan e Web - Consulenza informatica -
>> Formazione
>> Delta Informatica S.r.l. http://www.deltain.it/ ? +39 0321 455962
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>



-- 
Massimo Belgrano
From harbour.01 at syenar.hu  Sun May  3 05:33:30 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May  3 05:33:38 2009
Subject: [Harbour] FW: Sobre Harbour
In-Reply-To: <609353e70905030208g3a6667f0wb86b7725ceec4398@mail.gmail.com>
References: <BAY132-W20037A81456CAAC347920580800@phx.gbl>
	<BLU145-W3A2FA834C8F048C60A89E85800@phx.gbl>
	<609353e70904100707h65e6e3a8s5dc01164bd47a7b@mail.gmail.com>
	<18d502870904100820g1f23cb51m1fef97a974d88904@mail.gmail.com>
	<609353e70905030208g3a6667f0wb86b7725ceec4398@mail.gmail.com>
Message-ID: <18d502870905030233j8cb7e8dje2d14d8e2a58f531@mail.gmail.com>

I couldn't find a generic and proper way to gather these and put them
in final distro.I hope someone will do it.

Brgds,
Viktor

On Sun, May 3, 2009 at 11:08 AM, Massimo Belgrano <mbelgrano@deltain.it>wrote:

> I notice that in this distribution are missed tests of contrib library
> for example gtwvg.lib is present but demowvg.prg and demoxbp.prg are non
> present
> so i suggest put  under tests\contri\gtwvg
>
>
> 2009/4/10 Viktor Szak?ts <harbour.01@syenar.hu>:
> > Yes, but the instructions has changed since:
> > ---
> > Hi All,
> > I've updated the unified release to the latest Harbour version, and
> > this time with only one package which, hopefully will fit most
> > users' needs:
> > http://www.syenar.hu/harbour/harbour-11-win-20090408.7z (48MB)
> > http://www.syenar.hu/harbour/harbour-11-win-20090408.exe (50MB)
> > Installed size: 168MB (40MB - 314MB)
> > It contains all components of former 'full' package, with some more
> > fine grained control and without mingw64/mingwce embedded
> > versions to keep size down. Now there is a README with links and
> > short instructions how to get these tools from official locations.
> > The default installation will install MinGW compiler + x86 static and
> > shared libs, MSVC and BCC x86 libs and examples.
> > Options: x86 shared tools, x64 shared tools, MinGW x64 and WinCE-ARM
> libs,
> > MSVC x64 libs, Open Watcom x86 libs, Pelles C x86/x64/WinCE-ARM libs,
> > shared x64/WinCE-ARM libs.
> > Usage:
> > 1) install/unpack to any directory (C:\harbour-11)
> > 2) go to bin dir (optional if you specify path for hbmk2)
> > 3) For x86 executable type: 'hbmk2 ../tests/hello.prg'
> > 4) For x64 executable type: 'hbmk2 ../tests/hello.prg -comp=mingw64'
> > 5) For WinCE/ARM executable type: 'hbmk2
> ../tests/hello.prg -comp=mingwarm'
> > Tools/libs used to create the package:
> > MinGW 4.3.3, MinGW64 4.4.0, MinGWCE 4.1.0, BCC 5.5.1, Open Watcom 1.8,
> > MSVC 2008, Pelles C 5.00.1, ace 9.10, allegro 4.2.2, blat 2.6.2, libcurl
> > 7.19.3,
> > firebird 2.1.1, freeimage 3.11.0, gd 2.0.34, mysql 5.0.67, openssl
> 0.9.8j,
> > pgsql 8.3.3, qt 4.5.0 (2009.01)
> > Feedback is welcome, I plan to make this the default format for the next
> > official release for Windows/Windows CE platforms.
> > Brgds,
> > Viktor
> > [ Note: Some of the size growth is attributed to hbqt lib, especially
> > with MSVC, which is C++ and huge. It's not a problem, but please
> > keep this in mind when comparing size to prev versions. ]
> > ---
> > On Fri, Apr 10, 2009 at 4:07 PM, Massimo Belgrano <mbelgrano@deltain.it>
> > wrote:
> >>
> >> I suggest try the Viktor's way
> >> http://www.syenar.hu/harbour/hb-1.1.0dev.7z
> >> 1) unpack to any directory (C:\hb-1.1.0dev)
> >> 2) go to bin dir (optional if you specify path for hbmk2
> >> 5) For WinCE/ARM executable type: 'hbmk2
> ../tests/hello.prg -comp=mingwce'
> >>
> >>
> >>
> >> --------------------------------------------
> >>
> >> Hi All,
> >> I've made available a unified and self-contained Windows release
> >> package, which is able to create x86, x64, WinCE/ARM executables
> >> (both shared and static) out of the box without the need of any
> >> external tools or settings.
> >> Download:
> >> http://www.syenar.hu/harbour/hb-1.1.0dev.7z
> >> (size: 136MB)
> >> To use:
> >> 1) unpack to any directory (C:\hb-1.1.0dev)
> >> 2) go to bin dir (optional if you specify path for hbmk2)
> >> 3) For x86 executable type: 'hbmk2 ../tests/hello.prg'
> >> 4) For x64 executable type: 'hbmk2 ../tests/hello.prg -comp=mingw64'
> >> 5) For WinCE/ARM executable type: 'hbmk2
> ../tests/hello.prg -comp=mingwce'
> >> The package also contains Harbour libraries to build MSVC 2008,
> >> Open Watcom 1.8 and Borland C 5.5.1 executables. For these,
> >> you need to have these compilers installed on your computer. The libs
> >> will automatically be picked by hbmk2.
> >> The package contains MinGW 4.3.3, MinGW 4.4.0 for x64 and
> >> MinGW 4.1.0 for ARM/CE embedded.
> >> I've used 7-Zip instead of .zip, because it cut the archive size by
> >> a factor of 2-3. If this package will get good reception I may add
> >> installer with de-selectable x64, WinCE and additional target libs.
> >> While it takes significant amount of time to assemble such package,
> >> nevertheless IMO it should be the definitive and official release
> >> methods instead of the separate compiler/CPU target specific
> >> packages we offer for 1.0.1.
> >> Following external dependencies were used to build corresponding
> >> Harbour libs:
> >> ace 9.10
> >> allegro 4.2.2
> >> blat 2.6.2
> >> libcurl 7.19.3
> >> firebird 2.1.1
> >> freeimage 3.11.0
> >> gd 2.0.34
> >> mysql 5.0.67
> >> openssl 0.9.8j
> >> pgsql 8.3.3
> >> qt 4.5.0 (2009.01)
> >> Brgds,
> >> Viktor
> >>
> >>
> >> 2009/4/10 Alejandro de Garate <alex_degarate@hotmail.com>
> >>>
> >>>
> >>>  A potencially (spanish speaking) user wants to know if could be
> possible
> >>> to make aplications for Windows Mobile 5 using Harbour ?
> >>> He have a cell phone (mobil) Motorola Q.
> >>> I have no idea about that matter, can anyone answer him ?
> >>>
> >>> regards
> >>> Alejandro
> >>>
> >>>
> >>> ---
> >>>
> >>> From: ken_torrealba AT hotmail DOT com
> >>> To:
> >>> Subject: Sobre Harbour
> >>> Date: Fri, 10 Apr 2009 04:44:10 -0400
> >>>
> >>> ---
> >>>
> >>>
> >>>
> >>> _________________________________________________________________
> >>> More than messages?check out the rest of the Windows Live?.
> >>>
> >>>
> http://www.microsoft.com/windows/windowslive/_______________________________________________
> >>> Harbour mailing list
> >>> Harbour@harbour-project.org
> >>> http://lists.harbour-project.org/mailman/listinfo/harbour
> >>
> >>
> >>
> >> --
> >> Massimo Belgrano
> >>
> >> Analisi e sviluppo software per Lan e Web - Consulenza informatica -
> >> Formazione
> >> Delta Informatica S.r.l. http://www.deltain.it/   +39 0321 455962
> >>
> >> _______________________________________________
> >> Harbour mailing list
> >> Harbour@harbour-project.org
> >> http://lists.harbour-project.org/mailman/listinfo/harbour
> >>
> >
> >
> > _______________________________________________
> > Harbour mailing list
> > Harbour@harbour-project.org
> > http://lists.harbour-project.org/mailman/listinfo/harbour
> >
> >
>
>
>
> --
> Massimo Belgrano
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090503/5cd88005/attachment-0001.html
From vszakats at users.sourceforge.net  Sun May  3 09:44:56 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun May  3 09:45:01 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10974] trunk/harbour
Message-ID: <E1M0c00-0000hC-Nw@74yxhf1.ch3.sourceforge.com>

Revision: 10974
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10974&view=rev
Author:   vszakats
Date:     2009-05-03 13:44:55 +0000 (Sun, 03 May 2009)

Log Message:
-----------
2009-05-03 15:44 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    * Translation improvements.
    ! Fixed some strings not marked as translatable.
    + Added CVS detection (not much use, but anyway).
    ; Pls regerenate .pot files.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From qiinfo at ig.com.br  Sun May  3 09:49:41 2009
From: qiinfo at ig.com.br (Rossine)
Date: Sun May  3 09:49:46 2009
Subject: [Harbour] Ascan for Hash
Message-ID: <23355934.post@talk.nabble.com>


Hello,

How to use variables with the ascan type hash ()?

[CODE]
function Main

local n, cVar := "Two", hHash := hb_Hash()

hb_HSetCaseMatch( hHash, .F. )

hHash := { 1, "One" }
hHash := { 2, "Two" }
hHash := { 3, "Tree" }

n := ascan( hHash, { |aField| aField[2] == cVar } )

? n

return NIL

[ENDCODE]

...i generated the following error:

[ERROR]

Error BASE/1068  Argument error: array access
Called from (b)MAIN(13)
Called from ASCAN(0)
Called from MAIN(13) 

[ENDERROR]

Best Regards,

Rossine.

-- 
View this message in context: http://www.nabble.com/Ascan-for-Hash-tp23355934p23355934.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bruno.luciani at gmail.com  Sun May  3 10:25:18 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Sun May  3 10:25:23 2009
Subject: [Harbour] HB_Sendmail( ) Time OUT ?
Message-ID: <133778360905030725u12c32f3fxc6c394acd9cfa0ac@mail.gmail.com>

I need  to know if this function of HBTIP library have time out
if smtp server is down , whats happens if this occurs ?

thanks

Bruno
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090503/40154bc3/attachment.html
From myorg63 at mail.ru  Sun May  3 10:47:14 2009
From: myorg63 at mail.ru (Petr Chornyj)
Date: Sun May  3 10:47:19 2009
Subject: [Harbour] Ascan for Hash
In-Reply-To: <23355934.post@talk.nabble.com>
References: <23355934.post@talk.nabble.com>
Message-ID: <23356371.post@talk.nabble.com>




Rossine wrote:
> 
> How to use variables with the ascan type hash ()?
> 

Something like

[CODE]
FUNCTION main()
local n, cVar := "Two", hHash := hb_Hash(), aArray 

hHash := { 1, "One" } 
hHash := { 2, "Two" } 
hHash := { 3, "Tree" } 

?hb_isHash( hHash )

hHash := { 1 => "One", 2 => "Two" } 
hb_hSet( hHash, 3, "Tree" )

?hb_isHash( hHash )

//hb_HCaseMatch( hHash, .F. ) 

n := hb_hScan( hHash, { |key,value| value == cVar } ) 
? n 

aArray := hb_hValues( hHash )
n := aScan( aArray, { |value| value == cVar } ) 
? n 

return NIL
[END CODE]

Regards,
Petr
-- 
View this message in context: http://www.nabble.com/Ascan-for-Hash-tp23355934p23356371.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From abe.buch at att.net  Sun May  3 12:09:16 2009
From: abe.buch at att.net (AbeB)
Date: Sun May  3 12:09:22 2009
Subject: [Harbour] hbmk2.prg
Message-ID: <1241366956098-2778120.post@n2.nabble.com>


should it say hbrddall?


      aLIB_BASE_RDD_ST := {;
         "hbrdd" ,;
         "hbusrrdd" ,;
 >>     "hbuddall" ,;
         "hbhsx" ,;
         "hbsix" ,;
         "rddntx" ,;
         "rddnsx" ,;
         "rddcdx" ,;
         "rddfpt" }
-- 
View this message in context: http://n2.nabble.com/hbmk2.prg-tp2778120p2778120.html
Sent from the harbour-devel mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sun May  3 12:27:10 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May  3 12:27:18 2009
Subject: [Harbour] hbmk2.prg
In-Reply-To: <1241366956098-2778120.post@n2.nabble.com>
References: <1241366956098-2778120.post@n2.nabble.com>
Message-ID: <18d502870905030927m7ad7dfacn111b6a6546a71b01@mail.gmail.com>

No, it's correct, "udd" stands for "user rdd".

Brgds,
Viktor

On Sun, May 3, 2009 at 6:09 PM, AbeB <abe.buch@att.net> wrote:

>
> should it say hbrddall?
>
>
>      aLIB_BASE_RDD_ST := {;
>         "hbrdd" ,;
>         "hbusrrdd" ,;
>  >>     "hbuddall" ,;
>         "hbhsx" ,;
>         "hbsix" ,;
>         "rddntx" ,;
>         "rddnsx" ,;
>         "rddcdx" ,;
>         "rddfpt" }
> --
> View this message in context:
> http://n2.nabble.com/hbmk2.prg-tp2778120p2778120.html
> Sent from the harbour-devel mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090503/ce0e6f54/attachment.html
From abe.buch at att.net  Sun May  3 12:34:09 2009
From: abe.buch at att.net (AbeB)
Date: Sun May  3 12:34:14 2009
Subject: [Harbour] hbmk2.prg
In-Reply-To: <18d502870905030927m7ad7dfacn111b6a6546a71b01@mail.gmail.com>
References: <18d502870905030927m7ad7dfacn111b6a6546a71b01@mail.gmail.com>
Message-ID: <1241368449556-2778225.post@n2.nabble.com>


sorry, my mistake.


Viktor Szak?ts wrote:
> 
> No, it's correct, "udd" stands for "user rdd".
> 
> Brgds,
> Viktor
> 
> On Sun, May 3, 2009 at 6:09 PM, AbeB <abe.buch@att.net> wrote:
> 
>>
>> should it say hbrddall?
>>
>>
>>      aLIB_BASE_RDD_ST := {;
>>         "hbrdd" ,;
>>         "hbusrrdd" ,;
>>  >>     "hbuddall" ,;
>>         "hbhsx" ,;
>>         "hbsix" ,;
>>         "rddntx" ,;
>>         "rddnsx" ,;
>>         "rddcdx" ,;
>>         "rddfpt" }
>> --
>> View this message in context:
>> http://n2.nabble.com/hbmk2.prg-tp2778120p2778120.html
>> Sent from the harbour-devel mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://n2.nabble.com/Re%3A-hbmk2.prg-tp2778195p2778225.html
Sent from the harbour-devel mailing list archive at Nabble.com.

From abe.buch at att.net  Sun May  3 12:35:52 2009
From: abe.buch at att.net (AbeB)
Date: Sun May  3 12:35:56 2009
Subject: [Harbour] hbbmcdx broken?
Message-ID: <1241368552731-2778228.post@n2.nabble.com>


Hi All,

hbbmcdx started to GPF on me.
is it broken?
-- 
View this message in context: http://n2.nabble.com/hbbmcdx-broken--tp2778228p2778228.html
Sent from the harbour-devel mailing list archive at Nabble.com.

From qiinfo at ig.com.br  Sun May  3 12:51:56 2009
From: qiinfo at ig.com.br (Rossine)
Date: Sun May  3 12:52:01 2009
Subject: [Harbour] Ascan for Hash
In-Reply-To: <23356371.post@talk.nabble.com>
References: <23355934.post@talk.nabble.com> <23356371.post@talk.nabble.com>
Message-ID: <23357456.post@talk.nabble.com>


Hello Petr,


Petr Chornyj wrote:
> 
> 
> Something like
> 
> [CODE]
> FUNCTION main()
> local n, cVar := "Two", hHash := hb_Hash(), aArray 
> 
> hHash := { 1, "One" } 
> hHash := { 2, "Two" } 
> hHash := { 3, "Tree" } 
> 
> ?hb_isHash( hHash )
> 
> hHash := { 1 => "One", 2 => "Two" } 
> hb_hSet( hHash, 3, "Tree" )
> 
> ?hb_isHash( hHash )
> 
> //hb_HCaseMatch( hHash, .F. ) 
> 
> n := hb_hScan( hHash, { |key,value| value == cVar } ) 
> ? n 
> 
> aArray := hb_hValues( hHash )
> n := aScan( aArray, { |value| value == cVar } ) 
> 
> ? n 
> 
> return NIL
> [END CODE]
> 
> 

OK, I understand your example.

Thank you very much,

Rossine.

-- 
View this message in context: http://www.nabble.com/Ascan-for-Hash-tp23355934p23357456.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dbtopas at dbtopas.lt  Sun May  3 12:53:43 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sun May  3 12:55:51 2009
Subject: [Harbour] Re: hb_i18n_gettext( "" ) warning. is it normal?
In-Reply-To: <18d502870905021057n2a35f125l23253ad949782ad3@mail.gmail.com>
References: <18d502870905010705h2f57005bqb2e58a5b1c20e59e@mail.gmail.com>	<18d502870905010711w742d9e44o152b8d13c145f36e@mail.gmail.com>	<49FC3E42.4060305@dbtopas.lt>
	<18d502870905021057n2a35f125l23253ad949782ad3@mail.gmail.com>
Message-ID: <49FDCC17.5010209@dbtopas.lt>

Hi,

>     1) write empty strings to .pot file
>     Change include/hbexprb.c line #1899:
>         if( pArg->ExprType == HB_ET_STRING && pArg->ulLength > 0 )
>     to:
>         if( pArg->ExprType == HB_ET_STRING )
> 
> 
>     2) do not write empty string to .pot file and do not show any warning:
>     Change:
>         if( pArg->ExprType == HB_ET_STRING && pArg->ulLength > 0 )
>         {
>            if( HB_COMP_PARAM->fI18n )
>     to:
>         if( pArg->ExprType == HB_ET_STRING )
>         {
>            if( HB_COMP_PARAM->fI18n  && pArg->ulLength > 0 )
> 
> 
> My vote for this one (no 2). IMO empty strings may 
> happen in translation, but there is no point in offering 
> them for translation. And if we issue a warning it ruins 
> -es2 -w3 setup while the source is still valid. It's also 
> relatively easy to grep for such empty strings if someone 
> would like to find them.
> 
> If we chose this one, will hb_i18n_gettext() always 
> return an empty string without doing a lookup?

hb_i18n_gettext() return original text if lookup failed, so, it will 
return empty string if parameter is empty string, but it will happen 
after lookup. Of cause we can implement additional check for empty 
string, but do not see any reason for it. It will make empty string 
"conversion" faster, and all other lookup will take longer (because one 
more test for empty string).
Actually, I do not imagine, why we need use hb_i18n_gettext("") at 
all??? Do you have any real life sample?


Regards,
Mindaugas

From harbour.01 at syenar.hu  Sun May  3 13:27:16 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May  3 13:27:22 2009
Subject: [Harbour] Re: hb_i18n_gettext( "" ) warning. is it normal?
In-Reply-To: <49FDCC17.5010209@dbtopas.lt>
References: <18d502870905010705h2f57005bqb2e58a5b1c20e59e@mail.gmail.com>
	<18d502870905010711w742d9e44o152b8d13c145f36e@mail.gmail.com>
	<49FC3E42.4060305@dbtopas.lt>
	<18d502870905021057n2a35f125l23253ad949782ad3@mail.gmail.com>
	<49FDCC17.5010209@dbtopas.lt>
Message-ID: <18d502870905031027s29761c76u6ba27076c87d2cb1@mail.gmail.com>

Hi Mindaugas,

hb_i18n_gettext() return original text if lookup failed, so, it will return
> empty string if parameter is empty string, but it will happen after lookup.
> Of cause we can implement additional check for empty string, but do not see
> any reason for it. It will make empty string "conversion" faster, and all
> other lookup will take longer (because one more test for empty string).


No, it is IMO perfect this way, empty strings are rare.


>
> Actually, I do not imagine, why we need use hb_i18n_gettext("") at all???
> Do you have any real life sample?


>From hbmk2:
---
   LOCAL aText_Basic := {;
      I_( "Syntax:" ),;
      I_( "" ),;
      I_( "  hbmk [options] [<script[s]>]
<src[s][.prg|.c|.obj|.o|.rc|.res|.pot|.hbl]>" ),;
      I_( "" ),;
      I_( "Options:" ) }
---

Of course you can swap I_( "" ) to I_( " " ) or "", but it makes source less
consistent.
Anyway there are other solution for this specific case, but a fatal warning
is too heavy
here IMO.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090503/30817719/attachment.html
From mbelgrano at deltain.it  Sun May  3 14:03:51 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun May  3 14:04:18 2009
Subject: [Harbour] FW: Sobre Harbour
In-Reply-To: <18d502870905030233j8cb7e8dje2d14d8e2a58f531@mail.gmail.com>
References: <BAY132-W20037A81456CAAC347920580800@phx.gbl>
	<BLU145-W3A2FA834C8F048C60A89E85800@phx.gbl> 
	<609353e70904100707h65e6e3a8s5dc01164bd47a7b@mail.gmail.com> 
	<18d502870904100820g1f23cb51m1fef97a974d88904@mail.gmail.com> 
	<609353e70905030208g3a6667f0wb86b7725ceec4398@mail.gmail.com> 
	<18d502870905030233j8cb7e8dje2d14d8e2a58f531@mail.gmail.com>
Message-ID: <609353e70905031103p1799112cq33d1438138698597@mail.gmail.com>

This can be a way?

xcopy c:\harbour\contrib\examples\*.* c:\hh\sample\contrib\example /s /e
copy c:\harbour\contrib\gtalleg\tests c:\hh\sample\contrib\gtalleg
copy  c:\harbour\contrib\gtqtc\tests c:\hh\sample\contrib\gtqtc
copy c:\harbour\contrib\gtwvg\tests c:\hh\sample\contrib\gtwvg
copy c:\harbour\contrib\hbblat\tests c:\hh\sample\contrib\hblat
copy c:\harbour\contrib\hbbtree\tests c:\hh\sample\contrib\hbtree
copy c:\harbour\contrib\hbclipsm\tests c:\hh\sample\contrib\hbclipsm
copy c:\harbour\contrib\hbcrypt\tests c:\hh\sample\contrib\hbcrypt
copy  c:\harbour\contrib\hbct\tests c:\hh\sample\contrib\hbct
copy  c:\harbour\contrib\hbcurl\tests c:\hh\sample\contrib\hbcurl
copy  c:\harbour\contrib\hbfbird\tests c:\hh\sample\contrib\hbfird
copy  c:\harbour\contrib\hbfimage\tests c:\hh\sample\contrib\hbfimage
copy  c:\harbour\contrib\hbgd\tests c:\hh\sample\contrib\
copy c:\harbour\contrib\hbhpdf\tests c:\hh\sample\contrib\
copy  c:\harbour\contrib\hbmisc\tests c:\hh\sample\contrib\
copy  c:\harbour\contrib\hbmsql\tests c:\hh\sample\contrib\
copy c:\harbour\contrib\hbmysql\tests c:\hh\sample\contrib\
copy  c:\harbour\contrib\hbmzip\tests c:\hh\sample\contrib\
copy  c:\harbour\contrib\hbnf\tests c:\hh\sample\contrib\
copy c:\harbour\contrib\hbodbc\tests c:\hh\sample\contrib\
copy c:\harbour\contrib\hbole\tests c:\hh\sample\contrib\
copy  c:\harbour\contrib\hbpgsql\tests c:\hh\sample\contrib\
copy  c:\harbour\contrib\hbqt\tests c:\hh\sample\contrib\
copy  c:\harbour\contrib\hbsqlit3\tests c:\hh\sample\contrib\
copy c:\harbour\contrib\hbssl\tests c:\hh\sample\contrib\
copy  c:\harbour\contrib\hbtip\tests c:\hh\sample\contrib\
copy c:\harbour\contrib\hbtpathy\tests c:\hh\sample\contrib\
copy c:\harbour\contrib\hbvpdf\tests c:\hh\sample\contrib\
copy c:\harbour\contrib\hbwin\tests c:\hh\sample\contrib\
copy  c:\harbour\contrib\hbziparc\tests c:\hh\sample\contrib\
copy  c:\harbour\contrib\rddado\tests c:\hh\sample\contrib\
copy  c:\harbour\contrib\rddads\tests c:\hh\sample\contrib\
copy  c:\harbour\contrib\rddsql\tests c:\hh\sample\contrib\
copy  c:\harbour\contrib\xhb\tests c:\hh\sample\contrib\


2009/5/3 Viktor Szak?ts <harbour.01@syenar.hu>:
> I couldn't find a generic and proper way to gather these and put them
> in?final distro.
> I hope someone will do it.
>
> Brgds,
> Viktor
>
> On Sun, May 3, 2009 at 11:08 AM, Massimo Belgrano <mbelgrano@deltain.it>
> wrote:
>>
>> I notice that in this distribution are missed tests of contrib library
>> for example gtwvg.lib is present but demowvg.prg and demoxbp.prg are non
>> present
>> so i suggest put ?under tests\contri\gtwvg
>>
>>
>> 2009/4/10 Viktor Szak?ts <harbour.01@syenar.hu>:
>> > Yes, but the instructions has changed since:
>> > ---
>> > Hi All,
>> > I've updated the unified release to the latest Harbour version, and
>> > this time with only one package which, hopefully will fit most
>> > users' needs:
>> > http://www.syenar.hu/harbour/harbour-11-win-20090408.7z?(48MB)
>> > http://www.syenar.hu/harbour/harbour-11-win-20090408.exe?(50MB)
>> > Installed size: 168MB (40MB - 314MB)
>> > It contains all components of former 'full' package, with some more
>> > fine grained control and without mingw64/mingwce embedded
>> > versions to keep size down.?Now there is a README with links and
>> > short instructions how to get?these tools from official locations.
>> > The default installation will install MinGW compiler + x86 static and
>> > shared?libs, MSVC and BCC x86 libs and examples.
>> > Options: x86 shared tools, x64 shared tools, MinGW x64?and WinCE-ARM
>> > libs,
>> > MSVC x64 libs, Open Watcom x86 libs,?Pelles C x86/x64/WinCE-ARM libs,
>> > shared x64/WinCE-ARM libs.
>> > Usage:
>> > 1) install/unpack to any directory (C:\harbour-11)
>> > 2) go to bin dir (optional if you specify path for hbmk2)
>> > 3) For x86 executable type: 'hbmk2 ../tests/hello.prg'
>> > 4) For x64 executable type: 'hbmk2 ../tests/hello.prg -comp=mingw64'
>> > 5) For WinCE/ARM executable type: 'hbmk2
>> > ../tests/hello.prg?-comp=mingwarm'
>> > Tools/libs used to create the package:
>> > MinGW 4.3.3, MinGW64 4.4.0, MinGWCE 4.1.0, BCC 5.5.1, Open Watcom 1.8,
>> > MSVC 2008, Pelles C 5.00.1,?ace 9.10,?allegro 4.2.2,?blat 2.6.2,?libcurl
>> > 7.19.3,
>> > firebird 2.1.1,?freeimage 3.11.0,?gd 2.0.34,?mysql 5.0.67,?openssl
>> > 0.9.8j,
>> > pgsql 8.3.3,?qt 4.5.0 (2009.01)
>> > Feedback is welcome, I plan to make this the default format for?the?next
>> > official release for Windows/Windows CE platforms.
>> > Brgds,
>> > Viktor
>> > [ Note: Some of the size growth is attributed to hbqt lib, especially
>> > with MSVC, which is C++ and huge.?It's not a problem, but please
>> > keep this?in mind when comparing size to prev versions. ]
>> > ---
>> > On Fri, Apr 10, 2009 at 4:07 PM, Massimo Belgrano <mbelgrano@deltain.it>
>> > wrote:
>> >>
>> >> I suggest try the Viktor's way
>> >> http://www.syenar.hu/harbour/hb-1.1.0dev.7z
>> >> 1) unpack to any directory (C:\hb-1.1.0dev)
>> >> 2) go to bin dir (optional if you specify path for hbmk2
>> >> 5) For WinCE/ARM executable type: 'hbmk2
>> >> ../tests/hello.prg?-comp=mingwce'
>> >>
>> >>
>> >>
>> >> --------------------------------------------
>> >>
>> >> Hi All,
>> >> I've made available a unified and self-contained Windows release
>> >> package,?which is able to create x86, x64, WinCE/ARM executables
>> >> (both shared and static) out?of the box without the need of any
>> >> external tools or settings.
>> >> Download:
>> >> http://www.syenar.hu/harbour/hb-1.1.0dev.7z
>> >> (size: 136MB)
>> >> To use:
>> >> 1) unpack to any directory (C:\hb-1.1.0dev)
>> >> 2) go to bin dir (optional if you specify path for hbmk2)
>> >> 3) For x86 executable type: 'hbmk2 ../tests/hello.prg'
>> >> 4) For x64 executable type: 'hbmk2 ../tests/hello.prg -comp=mingw64'
>> >> 5) For WinCE/ARM executable type: 'hbmk2
>> >> ../tests/hello.prg?-comp=mingwce'
>> >> The package also contains Harbour libraries to build MSVC 2008,
>> >> Open Watcom 1.8 and Borland C 5.5.1 executables. For these,
>> >> you need to have these compilers installed on your computer. The libs
>> >> will automatically be picked?by hbmk2.
>> >> The package contains MinGW 4.3.3, MinGW 4.4.0 for x64 and
>> >> MinGW 4.1.0 for ARM/CE embedded.
>> >> I've used 7-Zip instead of .zip, because it cut the archive size by
>> >> a factor of 2-3. If this package will get good reception I may add
>> >> installer with de-selectable x64, WinCE and additional target libs.
>> >> While it takes significant amount of time to assemble such package,
>> >> nevertheless IMO it should be the definitive and official release
>> >> methods instead of the separate compiler/CPU target specific
>> >> packages we offer for 1.0.1.
>> >> Following external dependencies were used to build corresponding
>> >> Harbour libs:
>> >> ace 9.10
>> >> allegro 4.2.2
>> >> blat 2.6.2
>> >> libcurl 7.19.3
>> >> firebird 2.1.1
>> >> freeimage 3.11.0
>> >> gd 2.0.34
>> >> mysql 5.0.67
>> >> openssl 0.9.8j
>> >> pgsql 8.3.3
>> >> qt 4.5.0 (2009.01)
>> >> Brgds,
>> >> Viktor
>> >>
>> >>
>> >> 2009/4/10 Alejandro de Garate <alex_degarate@hotmail.com>
>> >>>
>> >>>
>> >>> ?A potencially (spanish speaking) user wants to know if could be
>> >>> possible
>> >>> to make aplications for Windows Mobile 5 using Harbour ?
>> >>> He have a cell phone (mobil) Motorola Q.
>> >>> I have no idea about that matter, can anyone answer him ?
>> >>>
>> >>> regards
>> >>> Alejandro
>> >>>
>> >>>
>> >>> ---
>> >>>
>> >>> From: ken_torrealba AT hotmail DOT com
>> >>> To:
>> >>> Subject: Sobre Harbour
>> >>> Date: Fri, 10 Apr 2009 04:44:10 -0400
>> >>>
>> >>> ---
>> >>>
>> >>>
>> >>>
>> >>> _________________________________________________________________
>> >>> More than messages?check out the rest of the Windows Live?.
>> >>>
>> >>>
>> >>> http://www.microsoft.com/windows/windowslive/_______________________________________________
>> >>> Harbour mailing list
>> >>> Harbour@harbour-project.org
>> >>> http://lists.harbour-project.org/mailman/listinfo/harbour
>> >>
>> >>
>> >>
>> >> --
>> >> Massimo Belgrano
>> >>
>> >> Analisi e sviluppo software per Lan e Web - Consulenza informatica -
>> >> Formazione
>> >> Delta Informatica S.r.l. http://www.deltain.it/ ? +39 0321 455962
>> >>
>> >> _______________________________________________
>> >> Harbour mailing list
>> >> Harbour@harbour-project.org
>> >> http://lists.harbour-project.org/mailman/listinfo/harbour
>> >>
>> >
>> >
>> > _______________________________________________
>> > Harbour mailing list
>> > Harbour@harbour-project.org
>> > http://lists.harbour-project.org/mailman/listinfo/harbour
>> >
>> >
>>
>>
>>
>> --
>> Massimo Belgrano
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>



-- 
Massimo Belgrano
From harbour.01 at syenar.hu  Sun May  3 14:18:27 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May  3 14:18:35 2009
Subject: [Harbour] FW: Sobre Harbour
In-Reply-To: <609353e70905031103p1799112cq33d1438138698597@mail.gmail.com>
References: <BAY132-W20037A81456CAAC347920580800@phx.gbl>
	<BLU145-W3A2FA834C8F048C60A89E85800@phx.gbl>
	<609353e70904100707h65e6e3a8s5dc01164bd47a7b@mail.gmail.com>
	<18d502870904100820g1f23cb51m1fef97a974d88904@mail.gmail.com>
	<609353e70905030208g3a6667f0wb86b7725ceec4398@mail.gmail.com>
	<18d502870905030233j8cb7e8dje2d14d8e2a58f531@mail.gmail.com>
	<609353e70905031103p1799112cq33d1438138698597@mail.gmail.com>
Message-ID: <18d502870905031118r55bad978md950199178b94ecc@mail.gmail.com>

Yes, something similar, but I'd need something which goes through all
contribs automatically (to avoid an update each time we add/remove
contribs) plus creates dirs. Plus we also need to deal with the problem
that 'tests' may contain any kind of files (this is the sandbox after all),
so we must only copy .prg and certain other files as needed,
sometimes even subdirs are needed to make tests work.

Brgds,
Viktor

On Sun, May 3, 2009 at 8:03 PM, Massimo Belgrano <mbelgrano@deltain.it>wrote:

> This can be a way?
>
> xcopy c:\harbour\contrib\examples\*.* c:\hh\sample\contrib\example /s /e
> copy c:\harbour\contrib\gtalleg\tests c:\hh\sample\contrib\gtalleg
> copy  c:\harbour\contrib\gtqtc\tests c:\hh\sample\contrib\gtqtc
> copy c:\harbour\contrib\gtwvg\tests c:\hh\sample\contrib\gtwvg
> copy c:\harbour\contrib\hbblat\tests c:\hh\sample\contrib\hblat
> copy c:\harbour\contrib\hbbtree\tests c:\hh\sample\contrib\hbtree
> copy c:\harbour\contrib\hbclipsm\tests c:\hh\sample\contrib\hbclipsm
> copy c:\harbour\contrib\hbcrypt\tests c:\hh\sample\contrib\hbcrypt
> copy  c:\harbour\contrib\hbct\tests c:\hh\sample\contrib\hbct
> copy  c:\harbour\contrib\hbcurl\tests c:\hh\sample\contrib\hbcurl
> copy  c:\harbour\contrib\hbfbird\tests c:\hh\sample\contrib\hbfird
> copy  c:\harbour\contrib\hbfimage\tests c:\hh\sample\contrib\hbfimage
> copy  c:\harbour\contrib\hbgd\tests c:\hh\sample\contrib\
> copy c:\harbour\contrib\hbhpdf\tests c:\hh\sample\contrib\
> copy  c:\harbour\contrib\hbmisc\tests c:\hh\sample\contrib\
> copy  c:\harbour\contrib\hbmsql\tests c:\hh\sample\contrib\
> copy c:\harbour\contrib\hbmysql\tests c:\hh\sample\contrib\
> copy  c:\harbour\contrib\hbmzip\tests c:\hh\sample\contrib\
> copy  c:\harbour\contrib\hbnf\tests c:\hh\sample\contrib\
> copy c:\harbour\contrib\hbodbc\tests c:\hh\sample\contrib\
> copy c:\harbour\contrib\hbole\tests c:\hh\sample\contrib\
> copy  c:\harbour\contrib\hbpgsql\tests c:\hh\sample\contrib\
> copy  c:\harbour\contrib\hbqt\tests c:\hh\sample\contrib\
> copy  c:\harbour\contrib\hbsqlit3\tests c:\hh\sample\contrib\
> copy c:\harbour\contrib\hbssl\tests c:\hh\sample\contrib\
> copy  c:\harbour\contrib\hbtip\tests c:\hh\sample\contrib\
> copy c:\harbour\contrib\hbtpathy\tests c:\hh\sample\contrib\
> copy c:\harbour\contrib\hbvpdf\tests c:\hh\sample\contrib\
> copy c:\harbour\contrib\hbwin\tests c:\hh\sample\contrib\
> copy  c:\harbour\contrib\hbziparc\tests c:\hh\sample\contrib\
> copy  c:\harbour\contrib\rddado\tests c:\hh\sample\contrib\
> copy  c:\harbour\contrib\rddads\tests c:\hh\sample\contrib\
> copy  c:\harbour\contrib\rddsql\tests c:\hh\sample\contrib\
> copy  c:\harbour\contrib\xhb\tests c:\hh\sample\contrib\
>
>
> 2009/5/3 Viktor Szak?ts <harbour.01@syenar.hu>:
> > I couldn't find a generic and proper way to gather these and put them
> > in final distro.
> > I hope someone will do it.
> >
> > Brgds,
> > Viktor
> >
> > On Sun, May 3, 2009 at 11:08 AM, Massimo Belgrano <mbelgrano@deltain.it>
> > wrote:
> >>
> >> I notice that in this distribution are missed tests of contrib library
> >> for example gtwvg.lib is present but demowvg.prg and demoxbp.prg are non
> >> present
> >> so i suggest put  under tests\contri\gtwvg
> >>
> >>
> >> 2009/4/10 Viktor Szak?ts <harbour.01@syenar.hu>:
> >> > Yes, but the instructions has changed since:
> >> > ---
> >> > Hi All,
> >> > I've updated the unified release to the latest Harbour version, and
> >> > this time with only one package which, hopefully will fit most
> >> > users' needs:
> >> > http://www.syenar.hu/harbour/harbour-11-win-20090408.7z (48MB)
> >> > http://www.syenar.hu/harbour/harbour-11-win-20090408.exe (50MB)
> >> > Installed size: 168MB (40MB - 314MB)
> >> > It contains all components of former 'full' package, with some more
> >> > fine grained control and without mingw64/mingwce embedded
> >> > versions to keep size down. Now there is a README with links and
> >> > short instructions how to get these tools from official locations.
> >> > The default installation will install MinGW compiler + x86 static and
> >> > shared libs, MSVC and BCC x86 libs and examples.
> >> > Options: x86 shared tools, x64 shared tools, MinGW x64 and WinCE-ARM
> >> > libs,
> >> > MSVC x64 libs, Open Watcom x86 libs, Pelles C x86/x64/WinCE-ARM libs,
> >> > shared x64/WinCE-ARM libs.
> >> > Usage:
> >> > 1) install/unpack to any directory (C:\harbour-11)
> >> > 2) go to bin dir (optional if you specify path for hbmk2)
> >> > 3) For x86 executable type: 'hbmk2 ../tests/hello.prg'
> >> > 4) For x64 executable type: 'hbmk2 ../tests/hello.prg -comp=mingw64'
> >> > 5) For WinCE/ARM executable type: 'hbmk2
> >> > ../tests/hello.prg -comp=mingwarm'
> >> > Tools/libs used to create the package:
> >> > MinGW 4.3.3, MinGW64 4.4.0, MinGWCE 4.1.0, BCC 5.5.1, Open Watcom 1.8,
> >> > MSVC 2008, Pelles C 5.00.1, ace 9.10, allegro 4.2.2, blat
> 2.6.2, libcurl
> >> > 7.19.3,
> >> > firebird 2.1.1, freeimage 3.11.0, gd 2.0.34, mysql 5.0.67, openssl
> >> > 0.9.8j,
> >> > pgsql 8.3.3, qt 4.5.0 (2009.01)
> >> > Feedback is welcome, I plan to make this the default format
> for the next
> >> > official release for Windows/Windows CE platforms.
> >> > Brgds,
> >> > Viktor
> >> > [ Note: Some of the size growth is attributed to hbqt lib, especially
> >> > with MSVC, which is C++ and huge. It's not a problem, but please
> >> > keep this in mind when comparing size to prev versions. ]
> >> > ---
> >> > On Fri, Apr 10, 2009 at 4:07 PM, Massimo Belgrano <
> mbelgrano@deltain.it>
> >> > wrote:
> >> >>
> >> >> I suggest try the Viktor's way
> >> >> http://www.syenar.hu/harbour/hb-1.1.0dev.7z
> >> >> 1) unpack to any directory (C:\hb-1.1.0dev)
> >> >> 2) go to bin dir (optional if you specify path for hbmk2
> >> >> 5) For WinCE/ARM executable type: 'hbmk2
> >> >> ../tests/hello.prg -comp=mingwce'
> >> >>
> >> >>
> >> >>
> >> >> --------------------------------------------
> >> >>
> >> >> Hi All,
> >> >> I've made available a unified and self-contained Windows release
> >> >> package, which is able to create x86, x64, WinCE/ARM executables
> >> >> (both shared and static) out of the box without the need of any
> >> >> external tools or settings.
> >> >> Download:
> >> >> http://www.syenar.hu/harbour/hb-1.1.0dev.7z
> >> >> (size: 136MB)
> >> >> To use:
> >> >> 1) unpack to any directory (C:\hb-1.1.0dev)
> >> >> 2) go to bin dir (optional if you specify path for hbmk2)
> >> >> 3) For x86 executable type: 'hbmk2 ../tests/hello.prg'
> >> >> 4) For x64 executable type: 'hbmk2 ../tests/hello.prg -comp=mingw64'
> >> >> 5) For WinCE/ARM executable type: 'hbmk2
> >> >> ../tests/hello.prg -comp=mingwce'
> >> >> The package also contains Harbour libraries to build MSVC 2008,
> >> >> Open Watcom 1.8 and Borland C 5.5.1 executables. For these,
> >> >> you need to have these compilers installed on your computer. The libs
> >> >> will automatically be picked by hbmk2.
> >> >> The package contains MinGW 4.3.3, MinGW 4.4.0 for x64 and
> >> >> MinGW 4.1.0 for ARM/CE embedded.
> >> >> I've used 7-Zip instead of .zip, because it cut the archive size by
> >> >> a factor of 2-3. If this package will get good reception I may add
> >> >> installer with de-selectable x64, WinCE and additional target libs.
> >> >> While it takes significant amount of time to assemble such package,
> >> >> nevertheless IMO it should be the definitive and official release
> >> >> methods instead of the separate compiler/CPU target specific
> >> >> packages we offer for 1.0.1.
> >> >> Following external dependencies were used to build corresponding
> >> >> Harbour libs:
> >> >> ace 9.10
> >> >> allegro 4.2.2
> >> >> blat 2.6.2
> >> >> libcurl 7.19.3
> >> >> firebird 2.1.1
> >> >> freeimage 3.11.0
> >> >> gd 2.0.34
> >> >> mysql 5.0.67
> >> >> openssl 0.9.8j
> >> >> pgsql 8.3.3
> >> >> qt 4.5.0 (2009.01)
> >> >> Brgds,
> >> >> Viktor
> >> >>
> >> >>
> >> >> 2009/4/10 Alejandro de Garate <alex_degarate@hotmail.com>
> >> >>>
> >> >>>
> >> >>>  A potencially (spanish speaking) user wants to know if could be
> >> >>> possible
> >> >>> to make aplications for Windows Mobile 5 using Harbour ?
> >> >>> He have a cell phone (mobil) Motorola Q.
> >> >>> I have no idea about that matter, can anyone answer him ?
> >> >>>
> >> >>> regards
> >> >>> Alejandro
> >> >>>
> >> >>>
> >> >>> ---
> >> >>>
> >> >>> From: ken_torrealba AT hotmail DOT com
> >> >>> To:
> >> >>> Subject: Sobre Harbour
> >> >>> Date: Fri, 10 Apr 2009 04:44:10 -0400
> >> >>>
> >> >>> ---
> >> >>>
> >> >>>
> >> >>>
> >> >>> _________________________________________________________________
> >> >>> More than messages?check out the rest of the Windows Live?.
> >> >>>
> >> >>>
> >> >>>
> http://www.microsoft.com/windows/windowslive/_______________________________________________
> >> >>> Harbour mailing list
> >> >>> Harbour@harbour-project.org
> >> >>> http://lists.harbour-project.org/mailman/listinfo/harbour
> >> >>
> >> >>
> >> >>
> >> >> --
> >> >> Massimo Belgrano
> >> >>
> >> >> Analisi e sviluppo software per Lan e Web - Consulenza informatica -
> >> >> Formazione
> >> >> Delta Informatica S.r.l. http://www.deltain.it/   +39 0321 455962
> >> >>
> >> >> _______________________________________________
> >> >> Harbour mailing list
> >> >> Harbour@harbour-project.org
> >> >> http://lists.harbour-project.org/mailman/listinfo/harbour
> >> >>
> >> >
> >> >
> >> > _______________________________________________
> >> > Harbour mailing list
> >> > Harbour@harbour-project.org
> >> > http://lists.harbour-project.org/mailman/listinfo/harbour
> >> >
> >> >
> >>
> >>
> >>
> >> --
> >> Massimo Belgrano
> >> _______________________________________________
> >> Harbour mailing list
> >> Harbour@harbour-project.org
> >> http://lists.harbour-project.org/mailman/listinfo/harbour
> >
> >
> > _______________________________________________
> > Harbour mailing list
> > Harbour@harbour-project.org
> > http://lists.harbour-project.org/mailman/listinfo/harbour
> >
> >
>
>
>
> --
> Massimo Belgrano
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090503/75e42563/attachment.html
From dbtopas at dbtopas.lt  Sun May  3 16:19:26 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sun May  3 16:21:37 2009
Subject: [Harbour] Re: hb_i18n_gettext( "" ) warning. is it normal?
In-Reply-To: <18d502870905031027s29761c76u6ba27076c87d2cb1@mail.gmail.com>
References: <18d502870905010705h2f57005bqb2e58a5b1c20e59e@mail.gmail.com>	<18d502870905010711w742d9e44o152b8d13c145f36e@mail.gmail.com>	<49FC3E42.4060305@dbtopas.lt>	<18d502870905021057n2a35f125l23253ad949782ad3@mail.gmail.com>	<49FDCC17.5010209@dbtopas.lt>
	<18d502870905031027s29761c76u6ba27076c87d2cb1@mail.gmail.com>
Message-ID: <49FDFC4E.8050803@dbtopas.lt>

Hi,


>    LOCAL aText_Basic := {;
>       I_( "Syntax:" ),;
>       I_( "" ),;
>       I_( "  hbmk [options] [<script[s]>] 
> <src[s][.prg|.c|.obj|.o|.rc|.res|.pot|.hbl]>" ),;
>       I_( "" ),;
>       I_( "Options:" ) }

In this case I would write:

     LOCAL aText_Basic := {;
        I_( "Syntax:" ),;
        "",;
        I_( "  hbmk [options] [<script[s]>]
  <src[s][.prg|.c|.obj|.o|.rc|.res|.pot|.hbl]>" ),;
        "",;
        I_( "Options:" ) }

Or perhaps it is even better to include all help text into one string.

I'll commit hbexprb.c fix tomorrow.


Regards,
Mindaugas
From bedipritpal at hotmail.com  Sun May  3 17:21:50 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun May  3 17:21:55 2009
Subject: [Harbour] HBMK2 - MINGW - Resource Compiler
Message-ID: <23360014.post@talk.nabble.com>


Hello Viktor

For the last two days I was busy preparing folder structures
and next-years-to-be-good strategy to adopt HBMK2 tool for 
all my project needs. And so far so good.

I am been able to compile my applns which are dependent
on many libs, resources, etc, on BCC and MSVC without problems.
MINGW has given me some more bumps than expected. I could cover
almost all of them but for one as under:

hbmk: Processing configuration: c:\harbour_dev\harbour\mingw\bin\hbmk.cfg 
Compiling Harbour sources... 
hbmk: Harbour compiler command (internal) job #1: 
C:\harbour_dev\harbour\mingw\bin\harbour.exe -n2
c:/dev_sources/vouch/source/VOUCH.PRG
c:/dev_sources/vouch/source/A_ARRAY.PRG c:/dev_sources/vouch/source/B_53.PRG 
...   |
...   |      A LONG LIST OF PRGS
...   |
c:/dev_sources/cachemgr/source/CJReport.prg
c:/dev_sources/cachemgr/source/FuncList.prg -d__VOUCH__ -d__WVT__
-d__oHARBOUR__ -d__OCX__ -d__MT__ -d__MW_PURE__ -oc:/dev_objs/mingw/vouch\
-iC:/harbour_dev/harbour/mingw/include -ic:/dev_sources/vouch/include
-ic:/dev_sources/cachemgr/include -ic:/dev_sources/v32lib/include
-ic:/dev_sources/freewin/include -ic:/harbour/contrib/gtwvg
-ic:/harbour/contrib/xhb 
Compiling resources... 
hbmk: Resource compiler command: 
windres -I"C:/harbour_dev/harbour/mingw/include"
-I"c:/dev_sources/vouch/include" -I"c:/dev_sources/cachemgr/include"
-I"c:/dev_sources/v32lib/include" -I"c:/dev_sources/freewin/include"
-I"c:/harbour/contrib/gtwvg" -I"c:/harbour/contrib/xhb"
c:/dev_sources/dev_resources/vouchsrv.res -O coff -o
c:/dev_objs/mingw/vouch/vouchsrv.reso 
hbmk: Resource compiler command: 
windres -I"C:/harbour_dev/harbour/mingw/include"
-I"c:/dev_sources/vouch/include" -I"c:/dev_sources/cachemgr/include"
-I"c:/dev_sources/v32lib/include" -I"c:/dev_sources/freewin/include"
-I"c:/harbour/contrib/gtwvg" -I"c:/harbour/contrib/xhb"
c:/dev_sources/dev_resources/txtext.res -O coff -o
c:/dev_objs/mingw/vouch/txtext.reso 

I have not gone into details how hbmk2 is handelling resource commands.
Can you please forward me what should be the cause?

Can we have filters on source files in .hbm like:
#
vouch.hbm
----------
c:/dev_sources/vouch/source/VOUCH.PRG 
c:/dev_sources/vouch/source/VOUCH_1.PRG 
{msvc|bcc}c:/dev_sources/vouch/source/VOUCH_3.PRG 
{mingw}c:/dev_sources/vouch/source/VOUCH_4.PRG 

Regards
Pritpal Bedi

PS:  TESTIMONY TO HBMK2:  
       I have only one .hbm per EXE and per LIB to generate final outout for
every compiler.

-- 
View this message in context: http://www.nabble.com/HBMK2---MINGW---Resource-Compiler-tp23360014p23360014.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sun May  3 18:55:43 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May  3 18:55:51 2009
Subject: [Harbour] HBMK2 - MINGW - Resource Compiler
In-Reply-To: <23360014.post@talk.nabble.com>
References: <23360014.post@talk.nabble.com>
Message-ID: <18d502870905031555s6197de41i77cd2df833db9581@mail.gmail.com>

Hi Pritpal,

MINGW has given me some more bumps than expected. I could cover
> almost all of them but for one as under:
>
> Compiling resources...
> hbmk: Resource compiler command:
> windres -I"C:/harbour_dev/harbour/mingw/include"
> -I"c:/dev_sources/vouch/include" -I"c:/dev_sources/cachemgr/include"
> -I"c:/dev_sources/v32lib/include" -I"c:/dev_sources/freewin/include"
> -I"c:/harbour/contrib/gtwvg" -I"c:/harbour/contrib/xhb"
> c:/dev_sources/dev_resources/vouchsrv.res -O coff -o
> c:/dev_objs/mingw/vouch/vouchsrv.reso
> hbmk: Resource compiler command:
> windres -I"C:/harbour_dev/harbour/mingw/include"
> -I"c:/dev_sources/vouch/include" -I"c:/dev_sources/cachemgr/include"
> -I"c:/dev_sources/v32lib/include" -I"c:/dev_sources/freewin/include"
> -I"c:/harbour/contrib/gtwvg" -I"c:/harbour/contrib/xhb"
> c:/dev_sources/dev_resources/txtext.res -O coff -o
> c:/dev_objs/mingw/vouch/txtext.reso
>
> I have not gone into details how hbmk2 is handelling resource commands.
> Can you please forward me what should be the cause?


What is the problem you're experiencing?

[hbmk2 will use windres to compile .rc/.res files to coff format files
(with extension .reso), which can be then processed by MinGW linker.


> Can we have filters on source files in .hbm like:
> #
> vouch.hbm
> ----------
> c:/dev_sources/vouch/source/VOUCH.PRG
> c:/dev_sources/vouch/source/VOUCH_1.PRG
> {msvc|bcc}c:/dev_sources/vouch/source/VOUCH_3.PRG
> {mingw}c:/dev_sources/vouch/source/VOUCH_4.PRG


Yes, it's possible, I'll do it in a few days.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090504/72e8ce81/attachment.html
From bedipritpal at hotmail.com  Sun May  3 19:14:30 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun May  3 19:14:35 2009
Subject: [Harbour] HBMK2 - MINGW - Resource Compiler
In-Reply-To: <18d502870905031555s6197de41i77cd2df833db9581@mail.gmail.com>
References: <23360014.post@talk.nabble.com>
	<18d502870905031555s6197de41i77cd2df833db9581@mail.gmail.com>
Message-ID: <23360915.post@talk.nabble.com>


Hi


Viktor Szak?ts wrote:
> 
>> c:/dev_sources/dev_resources/txtext.res -O coff -o
>> c:/dev_objs/mingw/vouch/txtext.reso
> 
> What is the problem you're experiencing?
> 

Compilation process just astops at this line as above.
Exe is not generated, probably next command is not executed,
at least I cannot see any other operation either on console
screen or in log file.



> [hbmk2 will use windres to compile .rc/.res files to coff format files
> (with extension .reso), which can be then processed by MinGW linker.
> 

Ok.



>> Can we have filters on source files in .hbm like:
>> #
>> vouch.hbm
>> ----------
>> c:/dev_sources/vouch/source/VOUCH.PRG
>> c:/dev_sources/vouch/source/VOUCH_1.PRG
>> {msvc|bcc}c:/dev_sources/vouch/source/VOUCH_3.PRG
>> {mingw}c:/dev_sources/vouch/source/VOUCH_4.PRG
> 
> Yes, it's possible, I'll do it in a few days.
> 

Here is the modified code, check if is corrcet one 
[ I am been able to compile properly with it ]

STATIC PROCEDURE HBM_Load( aParams, cFileName, /* @ */ nEmbedLevel )
   LOCAL cFile
   LOCAL cLine
   LOCAL cParam

   IF hb_FileExists( cFileName )

      cFile := MemoRead( cFileName ) /* NOTE: Intentionally using MemoRead()
which handles EOF char. */
      /* Switch it on if we feel its need in future */
         cFile := StripCommnets( cFile ) 
      */ 

      IF ! hb_osNewLine() == _EOL
         cFile := StrTran( cFile, hb_osNewLine(), _EOL )
      ENDIF
      IF ! hb_osNewLine() == Chr( 13 ) + Chr( 10 )
         cFile := StrTran( cFile, Chr( 13 ) + Chr( 10 ), _EOL )
      ENDIF

      FOR EACH cLine IN hb_ATokens( cFile, _EOL )
         cLine := AllTrim( cLine )
  
         IF !( Left( cLine, 1 ) == "#" )
            /* Let it expand with macros if defined */
            cLine := MacroProc( cLine )

            /* Put it to compiler filter */
            cLine := ArchCompFilter( cLine )

            IF ! Empty( cLine ) 
               FOR EACH cParam IN hb_ATokens( cLine,, .T. )
                  cParam := StrStripQuote( cParam )
                  IF ! Empty( cParam )
                     DO CASE
                     CASE ( Len( cParam ) >= 1 .AND. Left( cParam, 1 ) ==
"@" )
                        IF nEmbedLevel < 3
                           cParam := SubStr( cParam, 2 )
                           IF Empty( FN_ExtGet( cParam ) )
                              cParam := FN_ExtSet( cParam, ".hbm" )
                           ENDIF
                           nEmbedLevel++
                           HBM_Load( aParams, PathProc( cParam, cFileName ),
@nEmbedLevel ) /* Load parameters from script file */
                        ENDIF
                     CASE Lower( FN_ExtGet( cParam ) ) == ".hbm"
                        IF nEmbedLevel < 3
                           nEmbedLevel++
                           HBM_Load( aParams, PathProc( cParam, cFileName ),
@nEmbedLevel ) /* Load parameters from script file */
                        ENDIF
                     OTHERWISE
                        AAdd( aParams, { cParam, cFileName,
cLine:__enumIndex() } )
                     ENDCASE
                  ENDIF
               NEXT
            ENDIF 
         ENDIF
      NEXT
   ELSE
      OutErr( hb_StrFormat( "hbmk: Warning: File cannot be found: %1$s",
cFileName ), hb_osNewLine() )
   ENDIF

   RETURN


Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/HBMK2---MINGW---Resource-Compiler-tp23360014p23360915.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Sun May  3 19:20:18 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun May  3 19:20:23 2009
Subject: [Harbour] HBMK2 - MINGW - Resource Compiler
In-Reply-To: <18d502870905031555s6197de41i77cd2df833db9581@mail.gmail.com>
References: <23360014.post@talk.nabble.com>
	<18d502870905031555s6197de41i77cd2df833db9581@mail.gmail.com>
Message-ID: <23360966.post@talk.nabble.com>


Hi
>What is the problem you're experiencing?

This is the screen dump

windres: unexpected version string length 48 != 32 + 12
hbmk: Error: Running resource compiler. 1:
windres -I"C:/harbour_dev/harbour/mingw/include"
-I"c:/dev_sources/vouch/include
" -I"c:/dev_sources/cachemgr/include" -I"c:/dev_sources/v32lib/include"
-I"c:/de
v_sources/freewin/include" -I"c:/harbour/contrib/gtwvg"
-I"c:/harbour/contrib/xh
b" c:/dev_sources/dev_resources/txtext.res -O coff -o
c:/dev_objs/mingw/vouch/tx
text.reso

windres: unexpected version string length 48 != 32 + 12
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Let me check how I have defined version info.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/HBMK2---MINGW---Resource-Compiler-tp23360014p23360966.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Sun May  3 20:02:02 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun May  3 20:02:08 2009
Subject: [Harbour] HBMK2 - MINGW - Resource Compiler
In-Reply-To: <23360966.post@talk.nabble.com>
References: <23360014.post@talk.nabble.com>
	<18d502870905031555s6197de41i77cd2df833db9581@mail.gmail.com>
	<23360966.post@talk.nabble.com>
Message-ID: <23361249.post@talk.nabble.com>


Hi


Pritpal Bedi wrote:
> 
> windres: unexpected version string length 48 != 32 + 12
> ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> 
> Let me check how I have defined version info.
> 

I cannot make out where is the problem.
Version info is like:
VOUCH  x  6 times  == 5 Characters 30
7.70     x  2 times  == 4 Character    8

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/HBMK2---MINGW---Resource-Compiler-tp23360014p23361249.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Mon May  4 00:00:13 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May  4 00:00:19 2009
Subject: [Harbour] HBMK2 - MINGW - Resource Compiler
In-Reply-To: <23360915.post@talk.nabble.com>
References: <23360014.post@talk.nabble.com>
	<18d502870905031555s6197de41i77cd2df833db9581@mail.gmail.com>
	<23360915.post@talk.nabble.com>
Message-ID: <18d502870905032100l32abeef5i6b3dbf29e91343b8@mail.gmail.com>

>
> >
>
> Here is the modified code, check if is corrcet one
> [ I am been able to compile properly with it ]


For best results you should add this line:
         cParam := ArchCompFilter( cParam )
after:
      CASE FN_ExtGet( cParamL ) == ".prg"
and:
      CASE FN_ExtGet( cParamL ) == ".c" .OR. ;
           FN_ExtGet( cParamL ) == ".cpp" /* .cc, .cxx, .cx */

I'll commit this with other changes a bit later today.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090504/99f0022a/attachment.html
From harbour.01 at syenar.hu  Mon May  4 00:00:55 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May  4 00:01:03 2009
Subject: [Harbour] HBMK2 - MINGW - Resource Compiler
In-Reply-To: <23361249.post@talk.nabble.com>
References: <23360014.post@talk.nabble.com>
	<18d502870905031555s6197de41i77cd2df833db9581@mail.gmail.com>
	<23360966.post@talk.nabble.com> <23361249.post@talk.nabble.com>
Message-ID: <18d502870905032100r745c4634w7e5557915ad30a8a@mail.gmail.com>

Dunno, but it looks like windres isn't happy about something.
Brgds,
Viktor

On Mon, May 4, 2009 at 2:02 AM, Pritpal Bedi <bedipritpal@hotmail.com>wrote:

>
> Hi
>
>
> Pritpal Bedi wrote:
> >
> > windres: unexpected version string length 48 != 32 + 12
> > ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> >
> > Let me check how I have defined version info.
> >
>
> I cannot make out where is the problem.
> Version info is like:
> VOUCH  x  6 times  == 5 Characters 30
> 7.70     x  2 times  == 4 Character    8
>
> Regards
> Pritpal Bedi
>
> --
> View this message in context:
> http://www.nabble.com/HBMK2---MINGW---Resource-Compiler-tp23360014p23361249.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090504/4ce9b503/attachment.html
From harbour.01 at syenar.hu  Mon May  4 00:03:19 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May  4 00:03:25 2009
Subject: [Harbour] HBMK2 - MINGW - Resource Compiler
In-Reply-To: <18d502870905032100l32abeef5i6b3dbf29e91343b8@mail.gmail.com>
References: <23360014.post@talk.nabble.com>
	<18d502870905031555s6197de41i77cd2df833db9581@mail.gmail.com>
	<23360915.post@talk.nabble.com>
	<18d502870905032100l32abeef5i6b3dbf29e91343b8@mail.gmail.com>
Message-ID: <18d502870905032103j6105668bl952e0791c6e1b87@mail.gmail.com>

Well, thinking about it, this change prevents using certain filenames to be
used for source files (anything having '{' char.
So I'm not sure this is very good.

Brgds,
Viktor

On Mon, May 4, 2009 at 6:00 AM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:

> >
>>
>> Here is the modified code, check if is corrcet one
>> [ I am been able to compile properly with it ]
>
>
> For best results you should add this line:
>          cParam := ArchCompFilter( cParam )
> after:
>       CASE FN_ExtGet( cParamL ) == ".prg"
> and:
>       CASE FN_ExtGet( cParamL ) == ".c" .OR. ;
>            FN_ExtGet( cParamL ) == ".cpp" /* .cc, .cxx, .cx */
>
> I'll commit this with other changes a bit later today.
>
> Brgds,
> Viktor
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090504/ac8e9ba7/attachment.html
From bedipritpal at hotmail.com  Mon May  4 00:29:19 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon May  4 00:29:24 2009
Subject: [Harbour] HBMK2 - MINGW - Resource Compiler
In-Reply-To: <18d502870905032103j6105668bl952e0791c6e1b87@mail.gmail.com>
References: <23360014.post@talk.nabble.com>
	<18d502870905031555s6197de41i77cd2df833db9581@mail.gmail.com>
	<23360915.post@talk.nabble.com>
	<18d502870905032100l32abeef5i6b3dbf29e91343b8@mail.gmail.com>
	<18d502870905032103j6105668bl952e0791c6e1b87@mail.gmail.com>
Message-ID: <23362939.post@talk.nabble.com>


Hello Viktor


Viktor Szak?ts wrote:
> 
> Well, thinking about it, this change prevents using certain filenames to
> be
> used for source files (anything having '{' char.
> So I'm not sure this is very good.
> 

This is not '{' only, it is with '}'. So it is rare someone
may use this combination in a file name. May be we can restrict
it to be the first token in file name.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/HBMK2---MINGW---Resource-Compiler-tp23360014p23362939.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From marchuet at users.sourceforge.net  Mon May  4 04:02:34 2009
From: marchuet at users.sourceforge.net (marchuet@users.sourceforge.net)
Date: Mon May  4 04:02:39 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10975] trunk/harbour
Message-ID: <E1M0t8E-0003Sk-Vv@c3vjzd1.ch3.sourceforge.com>

Revision: 10975
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10975&view=rev
Author:   marchuet
Date:     2009-05-04 08:02:34 +0000 (Mon, 04 May 2009)

Log Message:
-----------
2009-05-04 10:00 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
  * contrib/hbbmcdx/bmdbfcdx.c
  * contrib/hbbmcdx/hbbmcdx.h
    * Synchronized with current dbfcdx.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbbmcdx/bmdbfcdx.c
    trunk/harbour/contrib/hbbmcdx/hbbmcdx.h


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From miguelangel at marchuet.net  Mon May  4 04:04:18 2009
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Mon May  4 04:03:31 2009
Subject: [Harbour] 2009-05-04 10:00 UTC+0100 Miguel Angel Marchuet
	<miguelangel@marchuet.net>
Message-ID: <49FEA182.7060900@marchuet.net>

2009-05-04 10:00 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
   * contrib/hbbmcdx/bmdbfcdx.c
   * contrib/hbbmcdx/hbbmcdx.h
     * Synchronized with current dbfcdx.

Best regards,
Miguel Angel Marchuet


__________ Informaci?n de ESET NOD32 Antivirus, versi?n de la base de firmas de virus 4050 (20090503) __________

ESET NOD32 Antivirus ha comprobado este mensaje.

http://www.eset.com


From druzus at acn.waw.pl  Mon May  4 05:00:37 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon May  4 04:52:26 2009
Subject: [Harbour] Support for __enumLen(), possible?
In-Reply-To: <18d502870905030114s6e695852i75814ea57f1cc291@mail.gmail.com>
References: <18d502870905030114s6e695852i75814ea57f1cc291@mail.gmail.com>
Message-ID: <20090504090037.GA7737@uran.home.aster.pl>

On Sun, 03 May 2009, Szak?ts Viktor wrote:

Hi,

> I'm wondering if it would be possible to add support for __enumLen()
> which would return the total number of enumerations in a FOR EACH loop?
> Opinions? is it possible?

   len( enum:__enumbase() )

best regards,
Przemek
From eghorbino at yahoo.com  Mon May  4 06:14:41 2009
From: eghorbino at yahoo.com (Edmer)
Date: Mon May  4 06:14:46 2009
Subject: [Harbour] Harbour 1.1
Message-ID: <23365773.post@talk.nabble.com>


Hi Viktor & Przemek,

Do you already have a tentative timeline for harbour 1.1 release ?

Thanks,
Ed

-- 
View this message in context: http://www.nabble.com/Harbour-1.1-tp23365773p23365773.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From snaiperis at users.sourceforge.net  Mon May  4 09:48:27 2009
From: snaiperis at users.sourceforge.net (snaiperis@users.sourceforge.net)
Date: Mon May  4 09:48:33 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10976] trunk/harbour
Message-ID: <E1M0yWx-0002xD-9s@74yxhf1.ch3.sourceforge.com>

Revision: 10976
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10976&view=rev
Author:   snaiperis
Date:     2009-05-04 13:48:26 +0000 (Mon, 04 May 2009)

Log Message:
-----------
2009-05-04 16:40 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
  * harbour/include/hbexprb.h
    * suppressed warning for hb_i18n_gettext("")

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/include/hbexprb.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bedipritpal at hotmail.com  Mon May  4 09:50:25 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon May  4 09:50:30 2009
Subject: [Harbour] MT - DBFCDX - Next Appln Instance Hangs ...
In-Reply-To: <23352456.post@talk.nabble.com>
References: <23352456.post@talk.nabble.com>
Message-ID: <23367852.post@talk.nabble.com>


Hello Przemek


Pritpal Bedi wrote:
> 
> Next applicantion instance is put under 
> indefinite loop in dbUseArea() if a table is 
> attempted to be opened in EXCLUSIVE mode where
> first instance has alreay that table open in 
> SHARED mode. Appln is compiled with MT support.
> 

This behavior is after Apr 26, 2009. 
Probably your commit for VFP related features
is causing it.

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/MT---DBFCDX---Next-Appln-Instance-Hangs-...-tp23352456p23367852.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Mon May  4 10:23:52 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May  4 10:23:58 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10976] trunk/harbour
In-Reply-To: <E1M0yWx-0002xD-9s@74yxhf1.ch3.sourceforge.com>
References: <E1M0yWx-0002xD-9s@74yxhf1.ch3.sourceforge.com>
Message-ID: <18d502870905040723g33099689x8e795e74145412de@mail.gmail.com>

Thanks a lot!
Brgds,
Viktor

On Mon, May 4, 2009 at 3:48 PM, <snaiperis@users.sourceforge.net> wrote:

> Revision: 10976
>
> http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10976&view=rev
> Author:   snaiperis
> Date:     2009-05-04 13:48:26 +0000 (Mon, 04 May 2009)
>
> Log Message:
> -----------
> 2009-05-04 16:40 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
>  * harbour/include/hbexprb.h
>    * suppressed warning for hb_i18n_gettext("")
>
> Modified Paths:
> --------------
>    trunk/harbour/ChangeLog
>    trunk/harbour/include/hbexprb.c
>
>
> This was sent by the SourceForge.net collaborative development platform,
> the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090504/f2e00253/attachment.html
From harbour.01 at syenar.hu  Mon May  4 10:25:41 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May  4 10:25:47 2009
Subject: [Harbour] Support for __enumLen(), possible?
In-Reply-To: <20090504090037.GA7737@uran.home.aster.pl>
References: <18d502870905030114s6e695852i75814ea57f1cc291@mail.gmail.com>
	<20090504090037.GA7737@uran.home.aster.pl>
Message-ID: <18d502870905040725g7922f60fmfa821ab8b57fa4dd@mail.gmail.com>

Oh, great, many thanks!
Brgds,
Viktor

On Mon, May 4, 2009 at 11:00 AM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:

> On Sun, 03 May 2009, Szak?ts Viktor wrote:
>
> Hi,
>
> > I'm wondering if it would be possible to add support for __enumLen()
> > which would return the total number of enumerations in a FOR EACH loop?
> > Opinions? is it possible?
>
>    len( enum:__enumbase() )
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090504/c3b27277/attachment.html
From druzus at acn.waw.pl  Mon May  4 10:49:37 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon May  4 10:41:27 2009
Subject: [Harbour] MT - DBFCDX - Next Appln Instance Hangs ...
In-Reply-To: <23352456.post@talk.nabble.com>
References: <23352456.post@talk.nabble.com>
Message-ID: <20090504144937.GA26850@uran.home.aster.pl>

On Sat, 02 May 2009, Pritpal Bedi wrote:

Hi,

> Next applicantion instance is put under 
> indefinite loop in dbUseArea() if a table is 
> attempted to be opened in EXCLUSIVE mode where
> first instance has alreay that table open in 
> SHARED mode. Appln is compiled with MT support.
> Here is the code from my appln ( working since 
> good old Clipper days )

Can you convert this example to self contain code which I can compile
and run with Harbour or Clipper to replicate the problem?

best regards,
Przemek
From snaiperis at users.sourceforge.net  Mon May  4 10:43:56 2009
From: snaiperis at users.sourceforge.net (snaiperis@users.sourceforge.net)
Date: Mon May  4 10:44:02 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10977] trunk/harbour
Message-ID: <E1M0zOe-0004gu-TK@dn4whf1.ch3.sourceforge.com>

Revision: 10977
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10977&view=rev
Author:   snaiperis
Date:     2009-05-04 14:43:56 +0000 (Mon, 04 May 2009)

Log Message:
-----------
2009-05-04 17:40 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
  * harbour/contrib/hbole/oleauto.prg
  * harbour/contrib/hbole/olecore.c
    * added runtime error on descend FOR EACH ICollection enumeration
    * added a few more runtime errors
    * fixed reference counter managament if OLE object is used as 
      parameter for another OLE function call
    + implemented array parameter support
      TODO/TOCHECK: multidimentional array support

  * harbour/contrib/hbole/tests/testole.prg
    * changed test to work with current hbole library
    + added new OppenOffice tests

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbole/oleauto.prg
    trunk/harbour/contrib/hbole/olecore.c
    trunk/harbour/contrib/hbole/tests/testole.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Mon May  4 11:05:16 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon May  4 10:57:05 2009
Subject: [Harbour] Merging .pot files
In-Reply-To: <18d502870905021522p35f4c2ecs1d9aad06587adaf6@mail.gmail.com>
References: <18d502870905021522p35f4c2ecs1d9aad06587adaf6@mail.gmail.com>
Message-ID: <20090504150516.GA32372@uran.home.aster.pl>

On Sun, 03 May 2009, Szak?ts Viktor wrote:

Hi,

> I've just tried to update a half-translated (HU) .pot file from hbmk2
> source,
> but didn't succeed. Maybe I'm missing something. The goal would be
> to retain still existing in source translations while deleting no longer
> existing ones.
> If I try to regenerate .pot file with Harbour -j option, it will simply
> overwrite existing file, so it's no good. Then I've tried hbi18n -m
> (merge) option, and it indeed merged the old .pot with the newly
> generated one, but it didn't delete no longer existing items.
> What is the way update .pot files from source?

If I understand what you need then you want to take some clean .pot
file generated by Harbour and make some automatic translation for
sentences which are already translated in some other files.
You can find tools which makes such operations designed for gettext.
Harbour hb18n does not have such functionality but I can add it using
some new switch, f.e.:
   -a       add automatic translations to 1-st .pot file using translations
            from other .pot or .hbl files

> [ I have a local tool that does this (with some house specific tweak),
> but I wanted to use Harbour tools only. This tool would move deleted
> entries to a backup file because it may contain useful content. Also,
> new entries are marked with date of addition to help translators. ]

I'm not sure we are talking about the same functionality.
Will the above -a option cover your needs?

best regards,
Przemek
From dbtopas at dbtopas.lt  Mon May  4 11:02:14 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon May  4 11:04:20 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10930] trunk/harbour
In-Reply-To: <18d502870904282350u59ceda33p79a5cb536ef6f086@mail.gmail.com>
References: <E1LxRng-0003v3-4i@74yxhf1.ch3.sourceforge.com>	<49F22565.8060009@dbtopas.lt>
	<18d502870904282350u59ceda33p79a5cb536ef6f086@mail.gmail.com>
Message-ID: <49FF0376.6090600@dbtopas.lt>

Hi,


> For me array support is enough to cover passing arrays to 
> OLE calls and maybe getting back arrays from OLE calls.

I've implemented some limited support for arrays. It's enough for the 
simplest OpenOffice oDesktop:loadComponentFromURL() calls. Though, I do 
not have more tests for multidimensional array parameters, or array 
return values.
See, new hbole/tests/testole.prg -> OpenOffice Writer test. It creates 
table and formating inside Writer.


> Full support in hbwin (xhb) is quite strange, f.e. there is such 
> code in testole.prg:
> 
> [ #xtranslate :<!Method!>( <args,...> ) := => :<Method>( <args> ):Value := ]
> 
> #1      oAS:Cells( 3, 1 ) := "Explict DEFAULT Method Text:"
> #2      oAS:Cells[ 2, 3 ] += "!"
> #3      oAS:Cells( 4, 1 ):Value := "Numeric:"
> 
> Three different ways next to each other to express the same thing, 
> quite unclean. We should probably employ a syntax which works 
> properly in all situations, whatever that syntax might be. Pbly array 
> assignment is the one, but I also trust your judgement.


#1 requires PP hack, it also has some side effects.
The real type of oAS:Cells(3,1) is object (HB_OLEAUTO to be precise). #1 
  look like a attempt to assign string value to object.
Using PP hack
    oAS:Cells( 3, 1 ) := "Explict DEFAULT Method Text:"
will work, but
    oI := oAS:Cells( 3, 1 )
    oI := "Explict DEFAULT Method Text:"
will not work.

Another problem is, that
    oAS:Cells( 3, 1 ) := "Explict DEFAULT Method Text:"
    ? oAS:Cells( 3, 1 )
will not print anything because oAS:Cells(3,1) is object! So, I want to 
avoid automatic/hidden :Value property implementation and suggest to use 
:Value explicitly. This will help to avoid side effects also.


#2 is hidden :Item() method call, for ICollection interface. You can 
always do:
   oAS:Cells:Item(2):Item(3)
instead of
   oAS:Cells[2,3]
but oAS:Cells[2,3] is also a object, not a value of the cell, so most 
side effect for #1 ir valid for #2 also.
One more thing is that OLE uses different (aka column based, Fortran) 
array index order. So,
   oAS:Cell[2, 3]
is equivalent to:
   oAS:Cells(3, 2)
Notice a different index order. These are the reasons, why I do not want 
implement array access operator. Those who want to reach the exact array 
access action can call a documented :Item() method of ICollection.
Array assignment causes even more problems!

So, I left a valid #3 and changed testole.prg to work using this syntax.


Regards,
Mindaugas
From bedipritpal at hotmail.com  Mon May  4 11:12:46 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon May  4 11:12:51 2009
Subject: [Harbour] MT - DBFCDX - Next Appln Instance Hangs ...
In-Reply-To: <20090504144937.GA26850@uran.home.aster.pl>
References: <23352456.post@talk.nabble.com>
	<20090504144937.GA26850@uran.home.aster.pl>
Message-ID: <23370463.post@talk.nabble.com>


Hi


Przemyslaw Czerpak-2 wrote:
> 
> Can you convert this example to self contain code which I can compile
> and run with Harbour or Clipper to replicate the problem?
> 

I tried my level best but as a stand alone demo
everything works fine, infact the same code works fine. But...

I will download 26 Apr SVN and then I will have concrete
results as to what exactly is happening. 

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/MT---DBFCDX---Next-Appln-Instance-Hangs-...-tp23352456p23370463.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Mon May  4 11:30:30 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon May  4 11:22:18 2009
Subject: [Harbour] MT - DBFCDX - Next Appln Instance Hangs ...
In-Reply-To: <23370463.post@talk.nabble.com>
References: <23352456.post@talk.nabble.com>
	<20090504144937.GA26850@uran.home.aster.pl>
	<23370463.post@talk.nabble.com>
Message-ID: <20090504153029.GA25046@uran.home.aster.pl>

On Mon, 04 May 2009, Pritpal Bedi wrote:

Hi,

> > Can you convert this example to self contain code which I can compile
> > and run with Harbour or Clipper to replicate the problem?
> I tried my level best but as a stand alone demo
> everything works fine, infact the same code works fine. But...
> I will download 26 Apr SVN and then I will have concrete
> results as to what exactly is happening. 

I can only guess that you do not make full clean build and you
are still uses some DBF* RDDs binaries compiled with older header
files without some new DBFAREA members.
It's also possible that you reached such effect by mixing header files
from older and current Harbour versions.
Anyhow it does not seems to be Harbour problem but rather sth wrong
with your local builds.
It's also possible that you used BMDBFCDX before it was updated.

best regards,
Przemek
From dbtopas at dbtopas.lt  Mon May  4 11:33:28 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon May  4 11:35:34 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10930] trunk/harbour
In-Reply-To: <20090428234948.GA5346@uran.home.aster.pl>
References: <E1LxRng-0003v3-4i@74yxhf1.ch3.sourceforge.com>	<49F22565.8060009@dbtopas.lt>
	<20090428234948.GA5346@uran.home.aster.pl>
Message-ID: <49FF0AC8.6080703@dbtopas.lt>

Hi,


Przemyslaw Czerpak wrote:
>> Should we ignore backward 
>> (descending) iteration flag and do forward iteration, should we do not 
>> iterate at all (current behavior), or should we give runtime error (which 
>> one?)?
> 
> Thank you very much.
> Probably RTE will be better - easier to detect potential problem by
> programmer.

RTE added.

> If you ask about RTE code then it's a problem. IMHO we should start
> to define all RTEs as #define constant and use separate error codes
> for different functions/RTEs just like in Clipper.
> It means that the whole core code have to be updated.

Yes. I remember this question. Your letter about error codes:
   Date: Mon, 19 Jan 2009 18:01:14 +0100
   From: Przemyslaw Czerpak <druzus@acn.waw.pl>
   Subject: Re: [Harbour] Harbour SHA2 and SHA2-HMAC support
is on my "to answer" list, but I'm not used to Clipper error code 
numbers and do not have a strong opinion about it.

Using many different error code for the same general "argument error" 
seems a little meaningless. We are limited in error numbers also if we 
add more and more Harbour functions and each of it can have "argument 
error" error.
If error code gives more information, what is wrong: indicates parameter 
number, or information about expected parameter type, it would be 
useful, but (perhaps) it is not Clipper compatible and will need to 
enhance error detection code.

In writing of OLE code a had these problems related to error processing:
1) should I use BASE subsystem, or create OLE;
2) it would be nice to put OLE error value (in case of RTE) into error 
object. But OLE error codes is 32-bit side and does not fit into OS 
error code. So, additional ole error variable is required to set before 
any RTE call;
3) that error subcode should be used for errors.


>> but this work also in current hbole implementation. That is array access 
>> syntax in VB? Does it work for OLE collections?
> 
> Here I cannot help you. Sorry but I do not know OLE enough.
> As above. Please only remember that our old OLE code comes from xHarbour
> were overloading [] in assign operation was not working correctly in the
> past so the code may have some workarounds for it. I do not know if it's
> fixed in current xHarbour code.

The problem is that I'm not an OLE user also :) I've left the most 
simple and most clean implementation here. If we will have a strong 
argument to extend implementation, we can do it in the future. But I 
guess, current one is enough to reach all ICollection functionality.


> As I can see there are two things else which are missing and we should
> define if we want to implement them:
> 1. array support
> 2. passing parameters by reference

I've added the basic (simple, but perhaps not full) support for arrays. 
It is not clear from OLE documentation for me, if we need to add 
checking of array items type to by the same if we pass it as array of 
VARIANT. Multidimensional array is passed as array of array in current 
implementation. I'm not sure if this is valid. I'll try to fix/change 
these things if I have some real life code to test it.

Passing of params by references is not yet implemented. This remains to 
be the only one major missing feature, though, nobody yet passed any 
sample for this major feature :).


> We can also think about introducing yet another feature:
> Function which makes explicit conversion from Harbour item given by user
> to variant with type also explicitly specified by user. The result should
> be returned as GC pointer item and such pointer items should be detected
> and supported in OLE function calls. It should help when it's necessary
> to pass some strictly defined parameters, f.e.:

>    oOle:table( oleVariant( NIL, VT_EMPTY ), ;
>                oleVariant( NIL, VT_NULL ), ;
>                oleVariant( 123, VT_UI8 ) )
> Our default conversion methods does not allow to strictly control variant
> types.

Yes, it could be necessary if for example some ole object accepts VT_I2 
type, but do not accept VT_I4 and we pass our HB_IT_INTEGER data via 
VT_I4 type by default. I do not have a real life needs for such function 
yet.


Regards,
Mindaugas


P.S. To Francesco Saverio Giudice: I have your MS Outlook problem in 
mind, but I do not have computer with Outlook. I hope to be able to find 
computer and test/solve your problem soon.
From harbour.01 at syenar.hu  Mon May  4 12:04:12 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May  4 12:04:18 2009
Subject: [Harbour] Merging .pot files
In-Reply-To: <20090504150516.GA32372@uran.home.aster.pl>
References: <18d502870905021522p35f4c2ecs1d9aad06587adaf6@mail.gmail.com>
	<20090504150516.GA32372@uran.home.aster.pl>
Message-ID: <18d502870905040904u6934b081i6ac205e51eb349e8@mail.gmail.com>

Hi Przemek,


> If I understand what you need then you want to take some clean .pot
> file generated by Harbour and make some automatic translation for
> sentences which are already translated in some other files.
> You can find tools which makes such operations designed for gettext.
> Harbour hb18n does not have such functionality but I can add it using
> some new switch, f.e.:
>   -a       add automatic translations to 1-st .pot file using translations
>            from other .pot or .hbl files


Yes, it's what you say, just put in the other way. IMO such switch
would be very useful as we wouldn't need any external tools to deal with.


> > [ I have a local tool that does this (with some house specific tweak),
> > but I wanted to use Harbour tools only. This tool would move deleted
> > entries to a backup file because it may contain useful content. Also,
> > new entries are marked with date of addition to help translators. ]
>
> I'm not sure we are talking about the same functionality.
> Will the above -a option cover your needs?


Yes. The extra feature I mentioned here is that no longer used
translations are retained (saved to another file), so that they can
be used as a base for translators. It happens many times that just
a small part of a string changes, so keeping already translated
previous versions can be helpful to avoid retranslating the whole
string. AFAIK some of these tools will even include previous translations
as comments for strings which are "more or less" identical to
the new one [ my local tools doesn't do that however ]. Anyway
this is just extra goodie for translators, not needed for base
functionality.

--- Old code:
a := hb_i18n_gettext( "Error happened. Params: %1$s" )
--- Old .pot:
msgid "Error happened. Params: %1$s"
msgstr "Hiba tortent. Parameterek: %1$s"
---

--- New code:
a := hb_i18n_gettext( "Error happened. Params: %1$s, %2$s" )
--- New .pot after remerge:
# possible old translation: "Hiba tortent. Parameterek: %1$s"
msgid "Error happened. Params: %1$s, %2$s"
msgstr ""
---

or as a simple alternative leaving out "similar" entry detection:

--- New code:
a := hb_i18n_gettext( "Error happened. Params: %1$s, %2$s" )
--- New .pot after remerge:
msgid "Error happened. Params: %1$s, %2$s"
msgstr ""
--- New .deleted.pot file after remerge:
msgid "Error happened. Params: %1$s"
msgstr "Hiba tortent. Parameterek: %1$s"
---

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090504/0f574095/attachment.html
From harbour.01 at syenar.hu  Mon May  4 12:07:54 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May  4 12:07:59 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10930] trunk/harbour
In-Reply-To: <49FF0376.6090600@dbtopas.lt>
References: <E1LxRng-0003v3-4i@74yxhf1.ch3.sourceforge.com>
	<49F22565.8060009@dbtopas.lt>
	<18d502870904282350u59ceda33p79a5cb536ef6f086@mail.gmail.com>
	<49FF0376.6090600@dbtopas.lt>
Message-ID: <18d502870905040907t30c7daecq629b7d6847d3888@mail.gmail.com>

Hi Mindaugas,
Thanks for the explanation, I think it's now perfect after your commit.

[ I'll readd CDO and OO open tests, they are also working properly. ]

Brgds,
Viktor

On Mon, May 4, 2009 at 5:02 PM, Mindaugas Kavaliauskas
<dbtopas@dbtopas.lt>wrote:

> Hi,
>
>
>  For me array support is enough to cover passing arrays to OLE calls and
>> maybe getting back arrays from OLE calls.
>>
>
> I've implemented some limited support for arrays. It's enough for the
> simplest OpenOffice oDesktop:loadComponentFromURL() calls. Though, I do not
> have more tests for multidimensional array parameters, or array return
> values.
> See, new hbole/tests/testole.prg -> OpenOffice Writer test. It creates
> table and formating inside Writer.
>
>
>  Full support in hbwin (xhb) is quite strange, f.e. there is such code in
>> testole.prg:
>>
>> [ #xtranslate :<!Method!>( <args,...> ) := => :<Method>( <args> ):Value :=
>> ]
>>
>> #1      oAS:Cells( 3, 1 ) := "Explict DEFAULT Method Text:"
>> #2      oAS:Cells[ 2, 3 ] += "!"
>> #3      oAS:Cells( 4, 1 ):Value := "Numeric:"
>>
>> Three different ways next to each other to express the same thing, quite
>> unclean. We should probably employ a syntax which works properly in all
>> situations, whatever that syntax might be. Pbly array assignment is the one,
>> but I also trust your judgement.
>>
>
>
> #1 requires PP hack, it also has some side effects.
> The real type of oAS:Cells(3,1) is object (HB_OLEAUTO to be precise). #1
>  look like a attempt to assign string value to object.
> Using PP hack
>   oAS:Cells( 3, 1 ) := "Explict DEFAULT Method Text:"
> will work, but
>   oI := oAS:Cells( 3, 1 )
>   oI := "Explict DEFAULT Method Text:"
> will not work.
>
> Another problem is, that
>   oAS:Cells( 3, 1 ) := "Explict DEFAULT Method Text:"
>   ? oAS:Cells( 3, 1 )
> will not print anything because oAS:Cells(3,1) is object! So, I want to
> avoid automatic/hidden :Value property implementation and suggest to use
> :Value explicitly. This will help to avoid side effects also.
>
>
> #2 is hidden :Item() method call, for ICollection interface. You can always
> do:
>  oAS:Cells:Item(2):Item(3)
> instead of
>  oAS:Cells[2,3]
> but oAS:Cells[2,3] is also a object, not a value of the cell, so most side
> effect for #1 ir valid for #2 also.
> One more thing is that OLE uses different (aka column based, Fortran) array
> index order. So,
>  oAS:Cell[2, 3]
> is equivalent to:
>  oAS:Cells(3, 2)
> Notice a different index order. These are the reasons, why I do not want
> implement array access operator. Those who want to reach the exact array
> access action can call a documented :Item() method of ICollection.
> Array assignment causes even more problems!
>
> So, I left a valid #3 and changed testole.prg to work using this syntax.
>
>
>
> Regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090504/94b2361d/attachment.html
From vszakats at users.sourceforge.net  Mon May  4 12:19:31 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May  4 12:19:38 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10978] trunk/harbour
Message-ID: <E1M10t9-0006tU-Ml@74yxhf1.ch3.sourceforge.com>

Revision: 10978
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10978&view=rev
Author:   vszakats
Date:     2009-05-04 16:19:30 +0000 (Mon, 04 May 2009)

Log Message:
-----------
2009-05-04 18:16 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbole/tests/testole.prg
    + Readded CDO and OO open examples (working).

  * utils/hbmk2/hbmk2.hbm
    + Added .hbl file generation.

  * utils/hbmk2/hbmk2.prg
    + Added translator info to banner.
    ! Minor fix to now display job # if single-threaded compilation is done.
      (Thanks for __enumBase() trick to Przemek)
    * Some steps to better support xhb shared mode (untested).
    + Added filter support for .prg and .c/.cpp input files.
      (This also means that input files with '{' '}' char pairs in them
      aren't supported anymore).
    ! Minor terminology fix in one of the rare error messages.
    ; TODO: ? Adding GNU Make support to .pot -> .hbl generation, plus
            we'd also need to develop a common rule for naming and
            placement for these translation files. Current hbmk2 method
            cannot be considered final.

  + utils/hbmk2/hbmk2.hu_HU.pot
    + Added Hungarian translation (not complete/final yet).

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbole/tests/testole.prg
    trunk/harbour/utils/hbmk2/hbmk2.hbm
    trunk/harbour/utils/hbmk2/hbmk2.prg

Added Paths:
-----------
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.pot


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Mon May  4 12:37:00 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May  4 12:37:08 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10977] trunk/harbour
In-Reply-To: <E1M0zOe-0004gu-TK@dn4whf1.ch3.sourceforge.com>
References: <E1M0zOe-0004gu-TK@dn4whf1.ch3.sourceforge.com>
Message-ID: <18d502870905040937u30c18265o8c579727d5173655@mail.gmail.com>

Hi All,
First of all many thanks to Mindaugas for new and clean OLE support.

I'd like to replace hbwin OLE support with new hbole implementation,
and my question is if there is still anything important missing which
would justify delaying this move?

IMO we're ready and passing by ref can wait, at least until we're
getting some actual examples. Multidim arrays aren't currently
supported anyway in hbwin, so this isn't a showstopper.

If there is no objection, I'd like to do this in a few days.

Brgds,
Viktor

On Mon, May 4, 2009 at 4:43 PM, <snaiperis@users.sourceforge.net> wrote:

> Revision: 10977
>
> http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10977&view=rev
> Author:   snaiperis
> Date:     2009-05-04 14:43:56 +0000 (Mon, 04 May 2009)
>
> Log Message:
> -----------
> 2009-05-04 17:40 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
>  * harbour/contrib/hbole/oleauto.prg
>  * harbour/contrib/hbole/olecore.c
>    * added runtime error on descend FOR EACH ICollection enumeration
>    * added a few more runtime errors
>    * fixed reference counter managament if OLE object is used as
>      parameter for another OLE function call
>    + implemented array parameter support
>      TODO/TOCHECK: multidimentional array support
>
>  * harbour/contrib/hbole/tests/testole.prg
>    * changed test to work with current hbole library
>    + added new OppenOffice tests
>
> Modified Paths:
> --------------
>    trunk/harbour/ChangeLog
>    trunk/harbour/contrib/hbole/oleauto.prg
>    trunk/harbour/contrib/hbole/olecore.c
>    trunk/harbour/contrib/hbole/tests/testole.prg
>
>
> This was sent by the SourceForge.net collaborative development platform,
> the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090504/b1656e8f/attachment.html
From bedipritpal at hotmail.com  Mon May  4 13:29:22 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon May  4 13:29:27 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10977] trunk/harbour
In-Reply-To: <18d502870905040937u30c18265o8c579727d5173655@mail.gmail.com>
References: <E1M0zOe-0004gu-TK@dn4whf1.ch3.sourceforge.com>
	<18d502870905040937u30c18265o8c579727d5173655@mail.gmail.com>
Message-ID: <23372885.post@talk.nabble.com>


Hello Viktor


Viktor Szak?ts wrote:
> 
> First of all many thanks to Mindaugas for new and clean OLE support.
> 

+1



> I'd like to replace hbwin OLE support with new hbole implementation,
> and my question is if there is still anything important missing which
> would justify delaying this move?
> 
> IMO we're ready and passing by ref can wait, at least until we're
> getting some actual examples. Multidim arrays aren't currently
> supported anyway in hbwin, so this isn't a showstopper.
> 
> If there is no objection, I'd like to do this in a few days.
> 

Wait, not all the functionality is implemented in new OLE.
At least for parameters passing. GTWVG's Avtive-X controls 
are heavily dependant on this. I will evaluate what is missing
and then if equals we can move.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-10977--trunk-harbour-tp23369919p23372885.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From abe.buch at att.net  Mon May  4 14:16:27 2009
From: abe.buch at att.net (AbeB)
Date: Mon May  4 14:16:31 2009
Subject: [Harbour] 2009-05-04 10:00 UTC+0100 Miguel Angel Marchuet
	<miguelangel@marchuet.net>
In-Reply-To: <49FEA182.7060900@marchuet.net>
References: <49FEA182.7060900@marchuet.net>
Message-ID: <1241460987285-2788661.post@n2.nabble.com>


Great.
Thanks A Lot.


Miguel Angel Marchuet wrote:
> 
> 2009-05-04 10:00 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
>    * contrib/hbbmcdx/bmdbfcdx.c
>    * contrib/hbbmcdx/hbbmcdx.h
>      * Synchronized with current dbfcdx.
> 
> Best regards,
> Miguel Angel Marchuet
> 
> 
> __________ Informaci?n de ESET NOD32 Antivirus, versi?n de la base de
> firmas de virus 4050 (20090503) __________
> 
> ESET NOD32 Antivirus ha comprobado este mensaje.
> 
> http://www.eset.com
> 
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://n2.nabble.com/2009-05-04-10%3A00-UTC%2B0100-Miguel-Angel-Marchuet-%3Cmiguelangel%40marchuet.net%3E-tp2786066p2788661.html
Sent from the harbour-devel mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Mon May  4 14:27:41 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon May  4 14:19:30 2009
Subject: [Harbour] Re: [xHarbour-developers] 2009-05-04 10:25 UTC+0100
	Miguel Angel Marchuet <miguelangel@marchuet.net>
In-Reply-To: <4e84184b0905041034k7e7015f5mcbefcdaecdba4723@mail.gmail.com>
References: <49FEA722.3030608@marchuet.net>
	<20090504200950.353E.422BA498@telkom.net.id>
	<4e84184b0905041034k7e7015f5mcbefcdaecdba4723@mail.gmail.com>
Message-ID: <20090504182741.GA1355@uran.home.aster.pl>

On Mon, 04 May 2009, Patrick Mast, xHarbour.com Inc. wrote:
> Same here:
> contrib\rdd_ads\ads1.c(575) : error C3861: 'HB_IS_TIMESTAMP':
> identifier not found
> On Mon, May 4, 2009 at 3:10 PM, Andi Jahja <xharbour@telkom.net.id> wrote:
> > On Mon, 04 May 2009 10:28:18 +0200
> > Miguel Angel Marchuet <miguelangel@marchuet.net> wrote:
> >> 2009-05-04 10:25 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
> >> ? ?* contrib\rdd_ads\ads1.c
> >> ? ? ?* changed FAILURE by HB_FAILURE, SUCCESS by HB_SUCCESS
> >> ? ? ?* changed support of datetime (TIMESTAMP) fields from string items to datetime items.
> >> ? ? ?* changes support of varlength fields adding subtypes ADS_VARBINARY_FOX, ADS_VARCHAR_FOX, ADS_VARCHAR
> >> ? ? ? ?(synced with harbour as possible)
> >> ? ?* source\rdd\dbf1.c
> >> ? ?* source\rdd\dbfcdx\dbfcdx1.c
> >> ? ? ?* white spaces.
> >> Requested by Brian Hays.
> > After this:
> > contrib\rdd_ads\ads1.c(575) : error C3861: 'HB_IS_TIMESTAMP': identifier not found

Because the above code was copied "as is" from current Harbour SVN code.
And yes I added native timestamp support to Harbour RDD ADS because I've
seen Brian's message asking about it. But I created this code not Miguel.
There is no any note about original author. The Message suggests that
Miguel added it because Brian asked about it.
I want to ask xHarbour developers what do you plan to do with it.

best regards,
Przemek
From mbelgrano at deltain.it  Mon May  4 14:26:29 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon May  4 14:26:35 2009
Subject: [Harbour] Re: [xHarbour-developers] 2009-05-04 10:25 UTC+0100 
	Miguel Angel Marchuet <miguelangel@marchuet.net>
In-Reply-To: <20090504182741.GA1355@uran.home.aster.pl>
References: <49FEA722.3030608@marchuet.net>
	<20090504200950.353E.422BA498@telkom.net.id>
	<4e84184b0905041034k7e7015f5mcbefcdaecdba4723@mail.gmail.com>
	<20090504182741.GA1355@uran.home.aster.pl>
Message-ID: <609353e70905041126q4b6a3522t682a6cb96423db19@mail.gmail.com>

i read a note
" (synced with harbour as possible)"
that can be read as
"(copied from harbour whenever possible"

2009/5/4 Przemyslaw Czerpak <druzus@acn.waw.pl>:
> On Mon, 04 May 2009, Patrick Mast, xHarbour.com Inc. wrote:
>> Same here:
>> contrib\rdd_ads\ads1.c(575) : error C3861: 'HB_IS_TIMESTAMP':
>> identifier not found
>> On Mon, May 4, 2009 at 3:10 PM, Andi Jahja <xharbour@telkom.net.id> wrote:
>> > On Mon, 04 May 2009 10:28:18 +0200
>> > Miguel Angel Marchuet <miguelangel@marchuet.net> wrote:
>> >> 2009-05-04 10:25 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
>> >> ? ?* contrib\rdd_ads\ads1.c
>> >> ? ? ?* changed FAILURE by HB_FAILURE, SUCCESS by HB_SUCCESS
>> >> ? ? ?* changed support of datetime (TIMESTAMP) fields from string items to datetime items.
>> >> ? ? ?* changes support of varlength fields adding subtypes ADS_VARBINARY_FOX, ADS_VARCHAR_FOX, ADS_VARCHAR
>> >> ? ? ? ?(synced with harbour as possible)
>> >> ? ?* source\rdd\dbf1.c
>> >> ? ?* source\rdd\dbfcdx\dbfcdx1.c
>> >> ? ? ?* white spaces.
>> >> Requested by Brian Hays.
>> > After this:
>> > contrib\rdd_ads\ads1.c(575) : error C3861: 'HB_IS_TIMESTAMP': identifier not found
>
> Because the above code was copied "as is" from current Harbour SVN code.
> And yes I added native timestamp support to Harbour RDD ADS because I've
> seen Brian's message asking about it. But I created this code not Miguel.
> There is no any note about original author. The Message suggests that
> Miguel added it because Brian asked about it.
> I want to ask xHarbour developers what do you plan to do with it.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From miguelangel at marchuet.net  Mon May  4 15:49:12 2009
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Mon May  4 15:48:47 2009
Subject: [Harbour] Some xhb developers giving no credit when copying work
	from Harbour
In-Reply-To: <49F31639.7030800@cultura.com.br>
References: <20090425122719.A940.422BA498@telkom.net.id>	<23228875.post@talk.nabble.com>	<20090425125837.A94A.422BA498@telkom.net.id>	<18d502870904250054l20ad2caw4cf2bcdfcd0db7e9@mail.gmail.com>
	<49F31639.7030800@cultura.com.br>
Message-ID: <49FF46B8.8070802@marchuet.net>


Ranier Vilela escribi?:
> I?m a wrong or Miguel (xharbour) continue with politic "not to the 
> credit of author"?
>
> 2009-04-24 17:49 UTC+0100 Miguel Angel Marchuet 
> <miguelangel@marchuet.net <mailto:miguelangel@marchuet.net>>
>  * include\hbapi.h
>  * source\rtl\dateshb.c
>  * source\rtl\set.c
>    + Added setget function for TIMEFORMAT
>  * source\rtl\tbrowse.prg
>    ! fixed show values of datetime and timestamp fields
>  * source\rtl\transfrm.c
>    ! fixed transform to return proper values with datetime items.
>  + tests\datetime.prg
>    + Added sample test, to see how works timestamp and datetime 
> fields. Remark that
>      field timestamp is auto fill field with current datetime.
>
>
This particular job is only mine in the api supported by Walter Negro.

thanks
From druzus at users.sourceforge.net  Mon May  4 18:17:08 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Mon May  4 18:17:13 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10979] trunk/harbour
Message-ID: <E1M16TE-0004l5-0i@c3vjzd1.ch3.sourceforge.com>

Revision: 10979
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10979&view=rev
Author:   druzus
Date:     2009-05-04 22:17:07 +0000 (Mon, 04 May 2009)

Log Message:
-----------
2009-05-05 00:25 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/hbi18n2.prg
    + added new Harbour internal i18n functions:
       __I18N_POTARRAYTRANS() and __I18N_HASHJOIN()

  * harbour/utils/hbi18n/hbi18n.prg
    + added new switch to hb18n tool:
         -a    add automatic translations to 1-st .pot file using
               translations from other .pot or .hbl files

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/rtl/hbi18n2.prg
    trunk/harbour/utils/hbi18n/hbi18n.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From toninhofwi at yahoo.com.br  Mon May  4 18:31:14 2009
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon May  4 18:31:20 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10977] trunk/harbour
In-Reply-To: <18d502870905040937u30c18265o8c579727d5173655@mail.gmail.com>
References: <E1M0zOe-0004gu-TK@dn4whf1.ch3.sourceforge.com>
	<18d502870905040937u30c18265o8c579727d5173655@mail.gmail.com>
Message-ID: <rsquv4dbdmjr11s3t77f21baaeapdu5lmg@4ax.com>

>First of all many thanks to Mindaugas for new and clean OLE support.
Yes, +1

>I'd like to replace hbwin OLE support with new hbole implementation,
>and my question is if there is still anything important missing which
>would justify delaying this move?

Viktor, TActiveX from FWH works in this way:

---cut---
   hActiveX = FWH_CreateActiveX()
   hObj = FWH_AtlAxGetDisp( hActiveX ) 
   oOle = ToleAuto():New( hObj )
---cut---

If you replace hbwin now, TActiveX FWH will be broken.

Thanks and best regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From harbour.01 at syenar.hu  Mon May  4 18:32:33 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May  4 18:32:38 2009
Subject: [Harbour] Some xhb developers giving no credit when copying work 
	from Harbour
In-Reply-To: <49FF46B8.8070802@marchuet.net>
References: <20090425122719.A940.422BA498@telkom.net.id>
	<23228875.post@talk.nabble.com>
	<20090425125837.A94A.422BA498@telkom.net.id>
	<18d502870904250054l20ad2caw4cf2bcdfcd0db7e9@mail.gmail.com>
	<49F31639.7030800@cultura.com.br> <49FF46B8.8070802@marchuet.net>
Message-ID: <18d502870905041532t5817f22evd0747c7b3596de46@mail.gmail.com>

These particular jobs however aren't, yet you didn't mention original author
and/or source:
2009-04-23 16:25 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
2009-03-02 10:24 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
2009-02-24 13:40 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
2009-02-20 13:50 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
2009-01-16 11:53 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
2008-10-23 17:52 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
2008-10-22 10:30 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
2008-09-05 10:10 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
2008-08-18 11:40 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
[misspelled name]

(list incomplete, just a quick lookup)

Brgds,
Viktor

On Mon, May 4, 2009 at 9:49 PM, Miguel Angel Marchuet <
miguelangel@marchuet.net> wrote:

>
> Ranier Vilela escribi?:
>
>> I?m a wrong or Miguel (xharbour) continue with politic "not to the credit
>> of author"?
>>
>> 2009-04-24 17:49 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net<mailto:
>> miguelangel@marchuet.net>>
>>  * include\hbapi.h
>>  * source\rtl\dateshb.c
>>  * source\rtl\set.c
>>   + Added setget function for TIMEFORMAT
>>  * source\rtl\tbrowse.prg
>>   ! fixed show values of datetime and timestamp fields
>>  * source\rtl\transfrm.c
>>   ! fixed transform to return proper values with datetime items.
>>  + tests\datetime.prg
>>   + Added sample test, to see how works timestamp and datetime fields.
>> Remark that
>>     field timestamp is auto fill field with current datetime.
>>
>>
>>  This particular job is only mine in the api supported by Walter Negro.
>
> thanks
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090505/8de65acf/attachment.html
From harbour.01 at syenar.hu  Mon May  4 19:16:59 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May  4 19:17:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10979] trunk/harbour
In-Reply-To: <E1M16TE-0004l5-0i@c3vjzd1.ch3.sourceforge.com>
References: <E1M16TE-0004l5-0i@c3vjzd1.ch3.sourceforge.com>
Message-ID: <18d502870905041616w66430ad6k5e9dbdf5e205c0ea@mail.gmail.com>

Hi Przemek,
Thanks a lot, it works great. I've successfully updated hbmk2 HU
translation with it already.
Brgds,
Viktor

On Tue, May 5, 2009 at 12:17 AM, <druzus@users.sourceforge.net> wrote:

> Revision: 10979
>
> http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10979&view=rev
> Author:   druzus
> Date:     2009-05-04 22:17:07 +0000 (Mon, 04 May 2009)
>
> Log Message:
> -----------
> 2009-05-05 00:25 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/rtl/hbi18n2.prg
>    + added new Harbour internal i18n functions:
>       __I18N_POTARRAYTRANS() and __I18N_HASHJOIN()
>
>  * harbour/utils/hbi18n/hbi18n.prg
>    + added new switch to hb18n tool:
>         -a    add automatic translations to 1-st .pot file using
>               translations from other .pot or .hbl files
>
> Modified Paths:
> --------------
>    trunk/harbour/ChangeLog
>    trunk/harbour/source/rtl/hbi18n2.prg
>    trunk/harbour/utils/hbi18n/hbi18n.prg
>
>
> This was sent by the SourceForge.net collaborative development platform,
> the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090505/588ee751/attachment-0001.html
From bedipritpal at hotmail.com  Mon May  4 20:11:42 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon May  4 20:11:47 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10977] trunk/harbour
In-Reply-To: <rsquv4dbdmjr11s3t77f21baaeapdu5lmg@4ax.com>
References: <E1M0zOe-0004gu-TK@dn4whf1.ch3.sourceforge.com>
	<18d502870905040937u30c18265o8c579727d5173655@mail.gmail.com>
	<rsquv4dbdmjr11s3t77f21baaeapdu5lmg@4ax.com>
Message-ID: <23378973.post@talk.nabble.com>


Hello


Toninho@fwi wrote:
> 
> Viktor, TActiveX from FWH works in this way:
> 
> ---cut---
>    hActiveX = FWH_CreateActiveX()
>    hObj = FWH_AtlAxGetDisp( hActiveX ) 
>    oOle = ToleAuto():New( hObj )
> ---cut---
> 
> If you replace hbwin now, TActiveX FWH will be broken.
> 

Similar is the approach in GTWVG.

Instead of 
oOle = ToleAuto():New( hObj )
GTWVG calls

   ::hObj := HB_AX_AtlAxGetControl( "ATLAXWin", ::hContainer, ::CLSID,
::nID, ;
                                    ::aPos[ 1 ], ::aPos[ 2 ], ::aSize[ 1 ],
::aSize[ 2 ], ;
                                    ::style, ::exStyle, NIL, @hx, @pUnk )

   /* Required as to AddRef() to self */
   TOleAuto():New( ::hObj )


First ActiveX control  is created then it is presented as an Object.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-10977--trunk-harbour-tp23369919p23378973.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Mon May  4 20:28:25 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon May  4 20:28:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10978] trunk/harbour
In-Reply-To: <E1M10t9-0006tU-Ml@74yxhf1.ch3.sourceforge.com>
References: <E1M10t9-0006tU-Ml@74yxhf1.ch3.sourceforge.com>
Message-ID: <23379077.post@talk.nabble.com>


Hello Viktor


vszakats wrote:
> 
>   * utils/hbmk2/hbmk2.prg
>     + Added translator info to banner.
> 

Thank you. 
But still it does not support macro parsing.

It should be like 

      CASE FN_ExtGet( cParamL ) == ".prg"

         cParam := MacroComp( cParam )
         cParam := ArchCompFilter( cParam )

IMO it will be more powerful, dynamic feature.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-10978--trunk-harbour-tp23371687p23379077.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Mon May  4 20:52:23 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May  4 20:52:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10978] trunk/harbour
In-Reply-To: <23379077.post@talk.nabble.com>
References: <E1M10t9-0006tU-Ml@74yxhf1.ch3.sourceforge.com>
	<23379077.post@talk.nabble.com>
Message-ID: <18d502870905041752u1a7220dcp3f3eb5d84b896249@mail.gmail.com>

Dunno, my opinion is that kind of flexibiliy just adds up to create
confusing setups, so I'm not even sure filters are
really a positive thing. I mean, you can create platform filters
in code using __PLATFORM__* macros and any code which
is compiler dependent is going against good practices, all
other situations should be solvable using hbmk2 independent
means like hb_mtvm() calls or other predefined macros.
Adding up macro support IMO just really helps to create
even more confusing scenarios. What is the situation this is
needed?

Brgds,
Viktor

On Tue, May 5, 2009 at 2:28 AM, Pritpal Bedi <bedipritpal@hotmail.com>wrote:

>
> Hello Viktor
>
>
> vszakats wrote:
> >
> >   * utils/hbmk2/hbmk2.prg
> >     + Added translator info to banner.
> >
>
> Thank you.
> But still it does not support macro parsing.
>
> It should be like
>
>      CASE FN_ExtGet( cParamL ) == ".prg"
>
>          cParam := MacroComp( cParam )
>         cParam := ArchCompFilter( cParam )
>
> IMO it will be more powerful, dynamic feature.
>
> Regards
> Pritpal Bedi
>
> --
> View this message in context:
> http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-10978--trunk-harbour-tp23371687p23379077.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090505/5da6c863/attachment.html
From vszakats at users.sourceforge.net  Mon May  4 21:11:24 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May  4 21:11:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10980] trunk/harbour
Message-ID: <E1M19Bs-00013u-9a@c3vjzd1.ch3.sourceforge.com>

Revision: 10980
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10980&view=rev
Author:   vszakats
Date:     2009-05-05 01:11:23 +0000 (Tue, 05 May 2009)

Log Message:
-----------
2009-05-05 03:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * utils/hbmk2/hbmk2.prg
    ! Minor fixes to texts.

  * utils/hbmk2/hbmk2.hu_HU.pot
    + Continued HU translation.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.pot
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vouchcac at users.sourceforge.net  Mon May  4 21:18:10 2009
From: vouchcac at users.sourceforge.net (vouchcac@users.sourceforge.net)
Date: Mon May  4 21:18:15 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10981] trunk/harbour
Message-ID: <E1M19IQ-0001D1-CZ@c3vjzd1.ch3.sourceforge.com>

Revision: 10981
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10981&view=rev
Author:   vouchcac
Date:     2009-05-05 01:18:09 +0000 (Tue, 05 May 2009)

Log Message:
-----------
2009-05-04 17:52 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/gtwvg.h
  * harbour/contrib/gtwvg/hbgtwvg.ch
  * harbour/contrib/gtwvg/gtwvg.c
  * harbour/contrib/gtwvg/wvgcore.c
  * harbour/contrib/gtwvg/wvgcuig.c
  * harbour/contrib/gtwvg/wvgcrt.prg
    ! Fixed many artifacts. Probbaly it is difficult to jot down all.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtwvg/gtwvg.c
    trunk/harbour/contrib/gtwvg/gtwvg.h
    trunk/harbour/contrib/gtwvg/hbgtwvg.ch
    trunk/harbour/contrib/gtwvg/wvgcore.c
    trunk/harbour/contrib/gtwvg/wvgcrt.prg
    trunk/harbour/contrib/gtwvg/wvgcuig.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Mon May  4 21:24:20 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May  4 21:24:25 2009
Subject: [Harbour] harbour -j option
Message-ID: <18d502870905041824h78ac875bldcb5f495b07c1c7d@mail.gmail.com>

Hi All,
I've noticed Harbour compiler will generate .c source also when using -j
option
to generate .pot file. This confuses make process. I've tried -s option, but
with
-s also the .pot file isn't generated.

What is the way to generate a .pot file without actually doing any normal
.prg to .c compilation?

[ IMO -s either shouldn't disable .pot creation, or, -j should only
generate
.pot output. But maybe I'm missing something on the workflow side. ]

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090505/4e8663fc/attachment.html
From miguelangel at marchuet.net  Tue May  5 04:49:00 2009
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Tue May  5 04:48:06 2009
Subject: [Harbour] Re: [xHarbour-developers] 2009-05-04 10:25 UTC+0100
 Miguel	Angel Marchuet <miguelangel@marchuet.net>
In-Reply-To: <20090504182741.GA1355@uran.home.aster.pl>
References: <49FEA722.3030608@marchuet.net>	<20090504200950.353E.422BA498@telkom.net.id>	<4e84184b0905041034k7e7015f5mcbefcdaecdba4723@mail.gmail.com>
	<20090504182741.GA1355@uran.home.aster.pl>
Message-ID: <49FFFD7C.30408@marchuet.net>

WHY YOU DON'T PUT CREDITS !!!

2009-01-12 15:15 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
   * harbour/source/vm/fm.c
   * harbour/include/hbwmain.c
     * use HeapAlloc( GetProcessHeap(), ... ) instead of LocalAlloc()
       when HB_FM_WIN32_ALLOC macro is set - Toninho's tests show that
       it's a little bit more efficient - thanks.

This code was added by me after months of tests, and i don't see my name in your
upload.

Best regards,
Miguel Angel Marchuet


Przemyslaw Czerpak escribi:
> On Mon, 04 May 2009, Patrick Mast, xHarbour.com Inc. wrote:
>> Same here:
>> contrib\rdd_ads\ads1.c(575) : error C3861: 'HB_IS_TIMESTAMP':
>> identifier not found
>> On Mon, May 4, 2009 at 3:10 PM, Andi Jahja <xharbour@telkom.net.id> wrote:
>>> On Mon, 04 May 2009 10:28:18 +0200
>>> Miguel Angel Marchuet <miguelangel@marchuet.net> wrote:
>>>> 2009-05-04 10:25 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
>>>>    * contrib\rdd_ads\ads1.c
>>>>      * changed FAILURE by HB_FAILURE, SUCCESS by HB_SUCCESS
>>>>      * changed support of datetime (TIMESTAMP) fields from string items to datetime items.
>>>>      * changes support of varlength fields adding subtypes ADS_VARBINARY_FOX, ADS_VARCHAR_FOX, ADS_VARCHAR
>>>>        (synced with harbour as possible)
>>>>    * source\rdd\dbf1.c
>>>>    * source\rdd\dbfcdx\dbfcdx1.c
>>>>      * white spaces.
>>>> Requested by Brian Hays.
>>> After this:
>>> contrib\rdd_ads\ads1.c(575) : error C3861: 'HB_IS_TIMESTAMP': identifier not found
> 
> Because the above code was copied "as is" from current Harbour SVN code.
> And yes I added native timestamp support to Harbour RDD ADS because I've
> seen Brian's message asking about it. But I created this code not Miguel.
> There is no any note about original author. The Message suggests that
> Miguel added it because Brian asked about it.
> I want to ask xHarbour developers what do you plan to do with it.
> 
> best regards,
> Przemek
> 
> ------------------------------------------------------------------------------
> Register Now & Save for Velocity, the Web Performance & Operations 
> Conference from O'Reilly Media. Velocity features a full day of 
> expert-led, hands-on workshops and two days of sessions from industry 
> leaders in dedicated Performance & Operations tracks. Use code vel09scf 
> and Save an extra 15% before 5/3. http://p.sf.net/sfu/velocityconf
> _______________________________________________
> xHarbour-developers mailing list
> xHarbour-developers@lists.sourceforge.net
> https://lists.sourceforge.net/lists/listinfo/xharbour-developers



__________ Informacin de ESET NOD32 Antivirus, versin de la base de firmas de virus 4052 (20090504) __________

ESET NOD32 Antivirus ha comprobado este mensaje.

http://www.eset.com


From druzus at acn.waw.pl  Tue May  5 05:06:29 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue May  5 04:58:16 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10979] trunk/harbour
In-Reply-To: <18d502870905041616w66430ad6k5e9dbdf5e205c0ea@mail.gmail.com>
References: <E1M16TE-0004l5-0i@c3vjzd1.ch3.sourceforge.com>
	<18d502870905041616w66430ad6k5e9dbdf5e205c0ea@mail.gmail.com>
Message-ID: <20090505090629.GA19093@uran.home.aster.pl>

On Tue, 05 May 2009, Szak?ts Viktor wrote:

Hi,

> Thanks a lot, it works great. I've successfully updated hbmk2 HU
> translation with it already.

Thanks for the confirmation.
It works in a little bit different way then the option you were talking
about. It allows to use any existing translations also from different
programs to make some automatic translation.
You were asking also about a little bit different functionality:
compare two .pot files (current empty one and the old one with
translations), translate in the current .pot file sentences which
are translated in the old one and store unused translations in old
.pot file in some new file which can be used as translation source
for manual or automatic translation in the future.
If you think it's really important then we can try to add also such
option to hbi18n though user can reach similar functionality by merging
all .pot files with translation into one big file to use it as dictionary
for -a option.

best regards,
Przemek
From mbelgrano at deltain.it  Tue May  5 06:23:54 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue May  5 06:24:21 2009
Subject: [Harbour] HMG SCRIPT PROJECT will be a way for having a web
	application in harbour?
Message-ID: <609353e70905050323s5c364afdo54eb70951f33ecbb@mail.gmail.com>

Roberto Lopez have show a way in follow post
What think harbour developer of this way?

Minigui is an harbour distribution for win32 that include harbour
without same part minigui.lib (gui) ,Mingw,Documentation
Latest Test version is HMG 2.8.8 (6.5 MB)
http://fastbull.dl.sourceforge.net/sourceforge/harbourminigui/hmg288.exe
Official website http://harbourminigui.googlepages.com/
HMG forum http://www.hmgforum.com/viewtopic.php?f=17&t=155&st=0&sk=t&sd=a
Two other project are based on hbm :minigui extended and oohg


-----------------------------
HMG SCRIPT PROJECT
------------------



1. PROJECT GOALS



The main project goal is to write a Harbour MiniGUI to JavaScript/HTML
translator.

The translator must generate pages containing HTML+JavaScript code
with equivalent functionality to the original (source) HMG program.

Because JavaScript and web browsers limitations, the translator will
support only a SMALL SUBSET of current Harbour+MiniGUI features.

Data will be accessed via XmlHttpRequest object (client side).

Server side code (returning the data to XmlHttpRequest object) will be
implemented via GENERIC routines (reusable for all programs) written
in PHP.

The backend database will be MySql.



2. WHY?



IMHO, web browsers must be considered as the new 'operating systems'
or 'target platforms'.

If our applications were capable to run on web browsers, then will run
on any place on any device.

Most web browsers can run JavaScript, so the choice is obvious.

Regarding server side, I've choosen PHP+MySql because it is a
worldwide standard for servers (even for free hosting providers).

Finally, the concept is already proven. Google applications works this
way. The Google web toolkit, allows you to translate Java to
JavaScript to create applications like those.



3. WEB SITES VS. WEB APPLICATIONS AND A TWISTED PARADIGM STORY



I will be exaggeratedly provocative on this topic... please, don't
report as a 'bug' :)


The web was created to read static documents across a computer
network, NOT AS AN APPLICATION DEVELOPMENT PLATFORM.

Across time, it was transformed (patch over patch over patch...) into
a strange hybrid that appears to be against the programmers :) .

IMHO this paradigm is clearly a technical involution, not only because
the difficulty to create applications, but because the centralized
processing.

Today, even cheap/portable computers has a tremendous processing
power, so, wasting it, doing application processing in centralized
servers is (at least) a silly thing.

You need more and more server power, while client computers uses their
tremendous processing capabilities only to show the text that you
server send to them. This is a really strange thing that this appears
to be 'good' and 'reasonable' for most people.

So, imagine that your application is downloaded to the client
(embedded into an HTML page) and then executed into the client machine
using an universal programming language available for all client
computers, despite the web browser, hardware or operating system that
they use. JavaScript is such language.

More important yet, is that executing your applications into the
client, you can 'think' your programs in a 'natural', 'common sense'
and 'easy'  way... AS IT MUST BE!!!



4. PROJECT LICENSE


GPL v2.



6. HOW TO DO IT?



My first idea was to use the Harbour preprocessor to do the job (only
preprocessor directives needed) but I've found certain problems that
could impede its use for this project.

Basically, the problem is that attempting to generate HTML tags, the
preprocessor adds unwanted spaces that makes those tags unusable.

In the case that a workaround for this can't be found, we must write a
translator from the scratch.



7. GOALS FOR THE FIRST RELEASE (SUPPORTED FEATURES)



a) Numeric variables
b) String variables
c) IF...ELSE...ENDIF control structure.
d) FOR...NEXT control structure.
e) DO WHILE...ENDDO control structure.
f) Support for the following operators:

   := , == , >= , <= , <> , .AND. , .OR. , .NOT. , + , - , / , *

g) Basic support for the following controls:

   - TextBox
   - CheckBox
   - ComboBox
   - RadioGroup
   - Button

h) Basic support for the following functions:

   i. DataBase Functions:

      - DbCreate()
      - DbUseArea()
      - DbCloseArea()
      - DbSkip()
      - DbGoTop()
      - DbGoBottom()
      - Eof()
      - DbFieldGet()
      - DbFieldPut()
      - DbAppend()
      - DbDelete()
      - DbSetOrder()
      - DbSeek()

   ii) String Functions:

      - AllTrim()
      - Upper()
      - Lower()
      - SubStr()
      - Left()
      - Right()
      - Ltrim()
      - Rtrim()
      - Space()

   iii) Other Functions:

      - Val()
      - Str()



8. TASK LIST



I've created a preliminar task list (suggestions are welcome).


a). Harbour preprocessor tests to know if it is useful for the project
(capable of generate JavaScript and HTML code from HMG code).

b). Research about the translator programs structure and working to
consider the development of our own translator in the case that
Harbour preprocessor can't be used.

c). From the propossed feature list, only some items has direct
support in JavaScript. When direct support exists, the only work
involved is to translate (ie) a Harbour function name and its
parameters into its JavaScript equivalent. The goal for this task is
to do a list for the proposed features with NO DIRECT SUPPORT in
JavaScript. Features in that list shoud be coded as functions in
JavaScript itself to be invoked in translated programs to support
source (HMG) features.


Tasks Assignment:


If you are interested in pick one of them, please answer to this
message, to let us know about that.

A particular task can be taken for more than one person, since in this
stage, comparing notes and opinions between people with different
points of view, will be a good thing.


I'll take for myself all tasks too, but I'll take it easy, since I'm
pretty busy by these days.



-- 
Massimo Belgrano
From druzus at acn.waw.pl  Tue May  5 06:39:46 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue May  5 06:31:33 2009
Subject: [Harbour] Re: [xHarbour-developers] 2009-05-04 10:25 UTC+0100
	Miguel Angel Marchuet <miguelangel@marchuet.net>
In-Reply-To: <49FFFD7C.30408@marchuet.net>
References: <49FEA722.3030608@marchuet.net>
	<20090504200950.353E.422BA498@telkom.net.id>
	<4e84184b0905041034k7e7015f5mcbefcdaecdba4723@mail.gmail.com>
	<20090504182741.GA1355@uran.home.aster.pl>
	<49FFFD7C.30408@marchuet.net>
Message-ID: <20090505103946.GA13958@uran.home.aster.pl>

On Tue, 05 May 2009, Miguel Angel Marchuet wrote:

Hi,

> 2009-01-12 15:15 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/vm/fm.c
>   * harbour/include/hbwmain.c
>     * use HeapAlloc( GetProcessHeap(), ... ) instead of LocalAlloc()
>       when HB_FM_WIN32_ALLOC macro is set - Toninho's tests show that
>       it's a little bit more efficient - thanks.
> 
> WHY YOU DON'T PUT CREDITS !!!

Because it was my code only. I didn't copied even single line from xHarbour
adding above feature. There was nothing to copy because only some WIN32
API calls were changed. I knew that xHarbour used HeapAlloc() instead of
LocalAlloc() but it was not enough for me to accept it and adopt to Harbour
without real windows tests. I was afraid that Giancarlo using LocalAlloc()
instead of suggested by MS HeapAlloc() made it intentionally as some type
of workaround for some problems. When Toninho asked me about some behavior
of memory managers in Harbour and xHarbour I asked him to make some speed
tests with HeapAlloc() which is used in xHarbour instead of LocalAlloc().
He did it and the results confirmed that it can be used to replace
LocalAlloc() with some small performance improvement. Because it was
possible that using HeapAlloc() operating on process heap GetProcessHeap()
can interact with some other code which needs some strict process heap
behavior I kept support for old LocalAlloc() covered by HB_FM_LOCALALLOC
macro.
Here is the full patch for fm.c:

Index: fm.c
===================================================================
--- fm.c	(wersja 10018)
+++ fm.c	(wersja 10032)
@@ -152,9 +152,15 @@
 #     define free( p )           dlfree( ( p ) )
 #  endif
 #elif defined( HB_FM_WIN32_ALLOC ) && defined( HB_OS_WIN_32 )
-#  define malloc( n )         ( void * ) LocalAlloc( LMEM_FIXED, ( n ) )
-#  define realloc( p, n )     ( void * ) LocalReAlloc( ( HLOCAL ) ( p ), ( n ), LMEM_MOVEABLE )
-#  define free( p )           LocalFree( ( HLOCAL ) ( p ) )
+#  if defined( HB_FM_LOCALALLOC )
+#     define malloc( n )      ( void * ) LocalAlloc( LMEM_FIXED, ( n ) )
+#     define realloc( p, n )  ( void * ) LocalReAlloc( ( HLOCAL ) ( p ), ( n ), LMEM_MOVEABLE )
+#     define free( p )        LocalFree( ( HLOCAL ) ( p ) )
+#  else
+#     define malloc( n )      ( void * ) HeapAlloc( GetProcessHeap(), 0, ( n ) )
+#     define realloc( p, n )  ( void * ) HeapReAlloc( GetProcessHeap(), 0, ( void * ) ( p ), ( n ) )
+#     define free( p )        HeapFree( GetProcessHeap(), 0, ( void * ) ( p ) )
+#  endif
 #endif

If you think that I should leave a note that HeapAlloc() were used also
in xHarbour before it was added to Harbour then I'll add it in next commit.
I hope that adding this info:

   Thanks also to Miguel Angel Marchuet which 1-st used HeapAlloc() 
   in xHarbour.

will be enough of you. But maybe you have different proposition?

But as I can see you copied some parts of this modifications two days later
to xHarbour:

2009-01-14 11:34 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
  * source\vm\fm.c
    ! minor optimization, 1 seg more quick speedtst, but remains one important question
      fmapi is used before its initialization (void hb_xinit( void )) I think this function
      need be called first of all.
    - removed test comments.
    + Added macro HB_FM_LOCALALLOC to use LocalAlloc instead of HeapAlloc. Microsoft says that
      the use of LocalAlloc need be changed by HeapAlloc, but we leave it here to user election.

and as usual without any information from where HB_FM_LOCALALLOC comes from.
BTW as I can see you haven't copied the whole modification so inside
source/vm/mainwin.c function WinMain() still uses LocalAlloc() - it
should be fixed.
Looks that missing notes about source of the modifications confuse even
you and you send above message though current code in both repositories
due to your synchronization is created by me. But in this particular case
there is no problem for me at all. I do not want to check from where each
macro or variable name comes from or in which project some API function
was used the 1-st time. It will be nonsense. I'm only talking about direct
code coping without information about original authors.
And I hope you will update all your ChangeLog entry in xHarbour adding notes
about authors. Nothing more nothing less.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue May  5 07:42:11 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Tue May  5 07:42:21 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10979] trunk/harbour
In-Reply-To: <20090505090629.GA19093@uran.home.aster.pl>
References: <E1M16TE-0004l5-0i@c3vjzd1.ch3.sourceforge.com>
	<18d502870905041616w66430ad6k5e9dbdf5e205c0ea@mail.gmail.com>
	<20090505090629.GA19093@uran.home.aster.pl>
Message-ID: <18d502870905050442m4a3a62dap9e85f47e7347efaf@mail.gmail.com>

Hi Przemek,
I'd be happy if we could further streamline the workflow.
Now I realized some practical issue with current Harbour -j
option. While it works perfectly well, I think it'd better to
integrate it with hbi18n -a option and also to keep old
translations.

First I was thinking if we could somehow pull the -j functionality
into a callable library function: __i18n_extractstring() (name
tentative). This way we could integrate it into hbi18n, so the
process could be made as one step instead of the current flow,
which looks like this:

1) harbour -j for each file to generate one .pot for each source
2) hbi18n.exe -a new.pot <all new.pots> <all old.pots>
3) rename new.pot to unified app .pot name (f.e. app_hu_HU.pot)
4) delete old and new pots except app_hu_HU.pot.

Instead it could be something like this:
1) hbi18n.exe *.prg *.ch -oapp_hu_HU.pot -del=app_hu_HU.unused.pot
(this would automatically pickup existing app_hu_HU.pot and use
it to merge existing translations, maybe some comments and even
ordering of items, if possible).

Some more thoughts I've bumped into along the way:
- Date/time of addition of new translation entries would be a useful
  info to see in comments.
- To work smoothly with translation files (like making diffs and
  moving inside the file with familiarity) IMO it's best to retain
  some sort of ordering of the entries, plus also to retain certain types
  of comment (like date/time of addition). Currently the order of
  msgid/msgstr pairs will change completely after doing a
refresh-from-source
  session.

Maybe there are better ideas. Current system have one advantage:
source file to .pot conversion can be integrated in normal build process,
which is good to keep unified .pot updated, but IMO the rest of the
process is not easy enough to automatize. In my experience though,
.pot files aren't rebuilt all the time with the source code itself, it's
rather something rebuilt occasionally before translation sessions.
Well, any thought is welcome in this area.

Brgds,
Viktor

On Tue, May 5, 2009 at 11:06 AM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:

> On Tue, 05 May 2009, Szak?ts Viktor wrote:
>
> Hi,
>
> > Thanks a lot, it works great. I've successfully updated hbmk2 HU
> > translation with it already.
>
> Thanks for the confirmation.
> It works in a little bit different way then the option you were talking
> about. It allows to use any existing translations also from different
> programs to make some automatic translation.
> You were asking also about a little bit different functionality:
> compare two .pot files (current empty one and the old one with
> translations), translate in the current .pot file sentences which
> are translated in the old one and store unused translations in old
> .pot file in some new file which can be used as translation source
> for manual or automatic translation in the future.
> If you think it's really important then we can try to add also such
> option to hbi18n though user can reach similar functionality by merging
> all .pot files with translation into one big file to use it as dictionary
> for -a option.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090505/7ac7e5ad/attachment.html
From itamarlins at bol.com.br  Tue May  5 07:43:03 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Tue May  5 07:43:52 2009
Subject: [Harbour] contrib blat Fail
Message-ID: <gtp8p3$5gs$1@ger.gmane.org>

Hi!
No possible use with bcc 5.5

Unresolved external _cSend referenced  from 
D:\DEV\HARBOUR\LIB\HBBLAT.LIB|blatwrp

TIA,
Itamar M. Lins Jr. 



From harbour.01 at syenar.hu  Tue May  5 08:26:57 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue May  5 08:27:10 2009
Subject: [Harbour] Re: [xHarbour-developers] 2009-05-04 10:25 UTC+0100
	Miguel	Angel Marchuet <miguelangel@marchuet.net>
In-Reply-To: <49FFFD7C.30408@marchuet.net>
References: <49FEA722.3030608@marchuet.net>	<20090504200950.353E.422BA498@telkom.net.id>	<4e84184b0905041034k7e7015f5mcbefcdaecdba4723@mail.gmail.com>
	<20090504182741.GA1355@uran.home.aster.pl>
	<49FFFD7C.30408@marchuet.net>
Message-ID: <FAFE4037-1DD5-4BF1-9AA1-90438EF7846F@syenar.hu>

Miguel,

If you feel you didn't get credit, it's no justification
to not give credit for others for years. If you feel like
someone used your work without giving credit, just simply
report it, everyone on this list will happily correct such
mistake if it really was one. In Harbour we always like to
give credit in ChangeLog when copying code from xhb, applying
fixes from others and many similar cases when we're just
committing something as opposed to doing the actual brain
work for it also. There are plenty such credits in our
ChangeLog. Fortunately this is true for most xhb developers,
see Phil Krylov for a good example.

I gave you specific and valid examples, please correct them
and also the rest of such entries. You also miss some copyrights
of mine for hb_osEncode()/hb_osDecode() which is violating
our license.

Brgds,
Viktor

On 2009.05.05., at 10:49, Miguel Angel Marchuet wrote:

> WHY YOU DON'T PUT CREDITS !!!
>
> 2009-01-12 15:15 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/vm/fm.c
>  * harbour/include/hbwmain.c
>    * use HeapAlloc( GetProcessHeap(), ... ) instead of LocalAlloc()
>      when HB_FM_WIN32_ALLOC macro is set - Toninho's tests show that
>      it's a little bit more efficient - thanks.
>
> This code was added by me after months of tests, and i don't see my  
> name in your
> upload.
>
> Best regards,
> Miguel Angel Marchuet
>
>
> Przemyslaw Czerpak escribi??:
>> On Mon, 04 May 2009, Patrick Mast, xHarbour.com Inc. wrote:
>>> Same here:
>>> contrib\rdd_ads\ads1.c(575) : error C3861: 'HB_IS_TIMESTAMP':
>>> identifier not found
>>> On Mon, May 4, 2009 at 3:10 PM, Andi Jahja  
>>> <xharbour@telkom.net.id> wrote:
>>>> On Mon, 04 May 2009 10:28:18 +0200
>>>> Miguel Angel Marchuet <miguelangel@marchuet.net> wrote:
>>>>> 2009-05-04 10:25 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net 
>>>>> >
>>>>>   * contrib\rdd_ads\ads1.c
>>>>>     * changed FAILURE by HB_FAILURE, SUCCESS by HB_SUCCESS
>>>>>     * changed support of datetime (TIMESTAMP) fields from string  
>>>>> items to datetime items.
>>>>>     * changes support of varlength fields adding subtypes  
>>>>> ADS_VARBINARY_FOX, ADS_VARCHAR_FOX, ADS_VARCHAR
>>>>>       (synced with harbour as possible)
>>>>>   * source\rdd\dbf1.c
>>>>>   * source\rdd\dbfcdx\dbfcdx1.c
>>>>>     * white spaces.
>>>>> Requested by Brian Hays.
>>>> After this:
>>>> contrib\rdd_ads\ads1.c(575) : error C3861: 'HB_IS_TIMESTAMP':  
>>>> identifier not found
>> Because the above code was copied "as is" from current Harbour SVN  
>> code.
>> And yes I added native timestamp support to Harbour RDD ADS because  
>> I've
>> seen Brian's message asking about it. But I created this code not  
>> Miguel.
>> There is no any note about original author. The Message suggests that
>> Miguel added it because Brian asked about it.
>> I want to ask xHarbour developers what do you plan to do with it.
>> best regards,
>> Przemek
>> ------------------------------------------------------------------------------
>> Register Now & Save for Velocity, the Web Performance & Operations  
>> Conference from O'Reilly Media. Velocity features a full day of  
>> expert-led, hands-on workshops and two days of sessions from  
>> industry leaders in dedicated Performance & Operations tracks. Use  
>> code vel09scf and Save an extra 15% before 5/3. http://p.sf.net/sfu/velocityconf
>> _______________________________________________
>> xHarbour-developers mailing list
>> xHarbour-developers@lists.sourceforge.net
>> https://lists.sourceforge.net/lists/listinfo/xharbour-developers
>
>
>
> __________ Informaci?n de ESET NOD32 Antivirus, versi?n de la base  
> de firmas de virus 4052 (20090504) __________
>
> ESET NOD32 Antivirus ha comprobado este mensaje.
>
> http://www.eset.com
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue May  5 08:41:46 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Tue May  5 08:41:52 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10979] trunk/harbour
In-Reply-To: <18d502870905050442m4a3a62dap9e85f47e7347efaf@mail.gmail.com>
References: <E1M16TE-0004l5-0i@c3vjzd1.ch3.sourceforge.com>
	<18d502870905041616w66430ad6k5e9dbdf5e205c0ea@mail.gmail.com>
	<20090505090629.GA19093@uran.home.aster.pl>
	<18d502870905050442m4a3a62dap9e85f47e7347efaf@mail.gmail.com>
Message-ID: <18d502870905050541k5030e66ew6977d06a96044221@mail.gmail.com>

Thinking about it maybe retaining comments and marking addition date/time
isn't that important, as it's just as easy
to search for 'msgstr ""' strings. So that section of my prev
mail can be ignored.

Brgds,
Viktor

On Tue, May 5, 2009 at 1:42 PM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:

> Hi Przemek,
> I'd be happy if we could further streamline the workflow.
> Now I realized some practical issue with current Harbour -j
> option. While it works perfectly well, I think it'd better to
> integrate it with hbi18n -a option and also to keep old
> translations.
>
> First I was thinking if we could somehow pull the -j functionality
> into a callable library function: __i18n_extractstring() (name
> tentative). This way we could integrate it into hbi18n, so the
> process could be made as one step instead of the current flow,
> which looks like this:
>
> 1) harbour -j for each file to generate one .pot for each source
> 2) hbi18n.exe -a new.pot <all new.pots> <all old.pots>
> 3) rename new.pot to unified app .pot name (f.e. app_hu_HU.pot)
> 4) delete old and new pots except app_hu_HU.pot.
>
> Instead it could be something like this:
> 1) hbi18n.exe *.prg *.ch -oapp_hu_HU.pot -del=app_hu_HU.unused.pot
> (this would automatically pickup existing app_hu_HU.pot and use
> it to merge existing translations, maybe some comments and even
> ordering of items, if possible).
>
> Some more thoughts I've bumped into along the way:
> - Date/time of addition of new translation entries would be a useful
>   info to see in comments.
> - To work smoothly with translation files (like making diffs and
>   moving inside the file with familiarity) IMO it's best to retain
>   some sort of ordering of the entries, plus also to retain certain types
>   of comment (like date/time of addition). Currently the order of
>   msgid/msgstr pairs will change completely after doing a
> refresh-from-source
>   session.
>
> Maybe there are better ideas. Current system have one advantage:
> source file to .pot conversion can be integrated in normal build process,
> which is good to keep unified .pot updated, but IMO the rest of the
> process is not easy enough to automatize. In my experience though,
> .pot files aren't rebuilt all the time with the source code itself, it's
> rather something rebuilt occasionally before translation sessions.
> Well, any thought is welcome in this area.
>
> Brgds,
> Viktor
>
> On Tue, May 5, 2009 at 11:06 AM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:
>
>> On Tue, 05 May 2009, Szak?ts Viktor wrote:
>>
>> Hi,
>>
>> > Thanks a lot, it works great. I've successfully updated hbmk2 HU
>> > translation with it already.
>>
>> Thanks for the confirmation.
>> It works in a little bit different way then the option you were talking
>> about. It allows to use any existing translations also from different
>> programs to make some automatic translation.
>> You were asking also about a little bit different functionality:
>> compare two .pot files (current empty one and the old one with
>> translations), translate in the current .pot file sentences which
>> are translated in the old one and store unused translations in old
>> .pot file in some new file which can be used as translation source
>> for manual or automatic translation in the future.
>> If you think it's really important then we can try to add also such
>> option to hbi18n though user can reach similar functionality by merging
>> all .pot files with translation into one big file to use it as dictionary
>> for -a option.
>>
>> best regards,
>> Przemek
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090505/1dd2571e/attachment-0001.html
From druzus at acn.waw.pl  Tue May  5 09:04:39 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue May  5 08:56:26 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10979] trunk/harbour
In-Reply-To: <18d502870905050442m4a3a62dap9e85f47e7347efaf@mail.gmail.com>
References: <E1M16TE-0004l5-0i@c3vjzd1.ch3.sourceforge.com>
	<18d502870905041616w66430ad6k5e9dbdf5e205c0ea@mail.gmail.com>
	<20090505090629.GA19093@uran.home.aster.pl>
	<18d502870905050442m4a3a62dap9e85f47e7347efaf@mail.gmail.com>
Message-ID: <20090505130439.GA16658@uran.home.aster.pl>

On Tue, 05 May 2009, Szak?ts Viktor wrote:

Hi,

> I'd be happy if we could further streamline the workflow.
> Now I realized some practical issue with current Harbour -j
> option. While it works perfectly well, I think it'd better to
> integrate it with hbi18n -a option and also to keep old
> translations.
> First I was thinking if we could somehow pull the -j functionality
> into a callable library function: __i18n_extractstring() (name
> tentative). This way we could integrate it into hbi18n, so the
> process could be made as one step instead of the current flow,
> which looks like this:
> 1) harbour -j for each file to generate one .pot for each source
> 2) hbi18n.exe -a new.pot <all new.pots> <all old.pots>
> 3) rename new.pot to unified app .pot name (f.e. app_hu_HU.pot)
> 4) delete old and new pots except app_hu_HU.pot.

I think the above procedure is wrong. -a option cannot replace -m one
used to merge many different files into single one.
I used different procedure. I compile my .prg files generating .pot
files into some directory, f.e.:
   hhcmp -n -w3 -es2 myprg1 -ji18n/
   hhcmp -n -w3 -es2 myprg2 -ji18n/
Then I merge all files into single one:
   hbi18n -m -omyprog.pot i18n/*.pot
and I have myprog.pot which can be distributed with my application and
updated by users. If some wants to merge it with old translation then he
can simply make
   hbi18n -m new/myprog.pot old/myprog.pot
Now he can also make:
   hbi18n -a new/myprog.pot old/myprog.pot
or even:
   hbi18n -a new/myprog.pot old/myprog.hbl
to add only still existing translations from the old file.

> Instead it could be something like this:
> 1) hbi18n.exe *.prg *.ch -oapp_hu_HU.pot -del=app_hu_HU.unused.pot
> (this would automatically pickup existing app_hu_HU.pot and use
> it to merge existing translations, maybe some comments and even
> ordering of items, if possible).

I do not think it's good idea to separate compilation process from
generating .pot files. It will reduce the functionality like automatic
updating of generating PCODE and can be source of mistakes like .pot
files generated for different .prg code then PCODE due to some modifications.
I also do not think it's possible to implement it without integrating
compiler and PP with hbi18n, f.e.:

   #command OUT <*msg*> => QOUT( hb_i18n_gettext( #<msg> ) )
   OUT Hello World !!!

or:

   #ifdef NO_I18N
      #xtranslate _( <msg,...> ) => hb_i18n_gettext_noop( <msg> )
   #elif defined( I18N_TEST )
      #xtranslate _( <msg,...> ) => hb_i18n_gettext_strict( <msg> )
   #else
      #xtranslate _( <msg,...> ) => hb_i18n_gettext( <msg> )
   #endif
   #ifdef VER_1
      ? _( "Hello World !!!" )
   #else
      ? _( "Hello Jimmy !!!" )
   #endif

It means that the new hbi18n will have to replicate nearly whole compiler
job with exactly the same compile time switches which can interacts with
existing macros and conditional code compilation.
I do not see any improvement in such solution but rather potential source
of problems. The only one think which can be usable in some cases is adding
special additive mode to -j switch so existing .pot file will be open and
new translations added. It can be used for clean compilation to collect
translation strings from many different .prg files into single .pot file
without calling hbi18n with -m option. It will eliminate one step but
if the old .pot files is not erased at compilation startup then it will
collect some garbage information like old and not longer existing
translations or wrong source code line numbers mixed with current ones
so it's also not perfect solution. Just an alternative option which may
be usable in some cases if some does not want to call:
   hbi18n -m -omyprog.pot i18n/*.pot

> Some more thoughts I've bumped into along the way:
> - Date/time of addition of new translation entries would be a useful
>   info to see in comments.

We will have to agree some type of comments in .pot files which will
be merged.

> - To work smoothly with translation files (like making diffs and
>   moving inside the file with familiarity) IMO it's best to retain
>   some sort of ordering of the entries, plus also to retain certain types
>   of comment (like date/time of addition). Currently the order of
>   msgid/msgstr pairs will change completely after doing a
>   refresh-from-source
>   session.

It will depend on the method of updating the .pot files.
For me it does not change at all.

> Maybe there are better ideas. Current system have one advantage:
> source file to .pot conversion can be integrated in normal build process,
> which is good to keep unified .pot updated, but IMO the rest of the
> process is not easy enough to automatize. In my experience though,

We can add any extensions we will find interesting and usable but
personally I do not see any way to separate .pot file generation
from preprocessing and compilation process without intorducing very
serious for me limitations/problems.

> .pot files aren't rebuilt all the time with the source code itself, it's
> rather something rebuilt occasionally before translation sessions.
> Well, any thought is welcome in this area.

I always used to build them during compilation process when I create
final binaries to be sure that they are synced with source code.
Only in some developing process I do not generate them but in such case
I simply do not use -j switch.

BTW I've found one problem with current -j<dirname>/ switch.
If you pass more then one .prg file to harbour compiler then
only the 1-st one uses -j<dirname>/ and all others use -j.
It should be fixed.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue May  5 09:35:16 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue May  5 09:35:28 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10979] trunk/harbour
In-Reply-To: <20090505130439.GA16658@uran.home.aster.pl>
References: <E1M16TE-0004l5-0i@c3vjzd1.ch3.sourceforge.com>
	<18d502870905041616w66430ad6k5e9dbdf5e205c0ea@mail.gmail.com>
	<20090505090629.GA19093@uran.home.aster.pl>
	<18d502870905050442m4a3a62dap9e85f47e7347efaf@mail.gmail.com>
	<20090505130439.GA16658@uran.home.aster.pl>
Message-ID: <FAEEEBBC-9E03-4387-B426-6E1B74C5297C@syenar.hu>

Okay I see your points. I'll rethink the process.

For me reordering occured for hbmk2.prg which is a one
file project, I'm not sure what I'm doing wrong, but it
was completely changed after doing a merge with -m. It's
also visible in my committed diff.

One other problem is that i18n/*.pot option does only
work on *nix systems. I'd be great to add equal support
for rest of OSes.

Brgds,
Viktor

> I think the above procedure is wrong. -a option cannot replace -m one
> used to merge many different files into single one.
> I used different procedure. I compile my .prg files generating .pot
> files into some directory, f.e.:
>   hhcmp -n -w3 -es2 myprg1 -ji18n/
>   hhcmp -n -w3 -es2 myprg2 -ji18n/
> Then I merge all files into single one:
>   hbi18n -m -omyprog.pot i18n/*.pot
> and I have myprog.pot which can be distributed with my application and
> updated by users. If some wants to merge it with old translation  
> then he
> can simply make
>   hbi18n -m new/myprog.pot old/myprog.pot
> Now he can also make:
>   hbi18n -a new/myprog.pot old/myprog.pot
> or even:
>   hbi18n -a new/myprog.pot old/myprog.hbl
> to add only still existing translations from the old file.
>
>> Instead it could be something like this:
>> 1) hbi18n.exe *.prg *.ch -oapp_hu_HU.pot -del=app_hu_HU.unused.pot
>> (this would automatically pickup existing app_hu_HU.pot and use
>> it to merge existing translations, maybe some comments and even
>> ordering of items, if possible).
>
> I do not think it's good idea to separate compilation process from
> generating .pot files. It will reduce the functionality like automatic
> updating of generating PCODE and can be source of mistakes like .pot
> files generated for different .prg code then PCODE due to some  
> modifications.
> I also do not think it's possible to implement it without integrating
> compiler and PP with hbi18n, f.e.:
>
>   #command OUT <*msg*> => QOUT( hb_i18n_gettext( #<msg> ) )
>   OUT Hello World !!!
>
> or:
>
>   #ifdef NO_I18N
>      #xtranslate _( <msg,...> ) => hb_i18n_gettext_noop( <msg> )
>   #elif defined( I18N_TEST )
>      #xtranslate _( <msg,...> ) => hb_i18n_gettext_strict( <msg> )
>   #else
>      #xtranslate _( <msg,...> ) => hb_i18n_gettext( <msg> )
>   #endif
>   #ifdef VER_1
>      ? _( "Hello World !!!" )
>   #else
>      ? _( "Hello Jimmy !!!" )
>   #endif
>
> It means that the new hbi18n will have to replicate nearly whole  
> compiler
> job with exactly the same compile time switches which can interacts  
> with
> existing macros and conditional code compilation.
> I do not see any improvement in such solution but rather potential  
> source
> of problems. The only one think which can be usable in some cases is  
> adding
> special additive mode to -j switch so existing .pot file will be  
> open and
> new translations added. It can be used for clean compilation to  
> collect
> translation strings from many different .prg files into single .pot  
> file
> without calling hbi18n with -m option. It will eliminate one step but
> if the old .pot files is not erased at compilation startup then it  
> will
> collect some garbage information like old and not longer existing
> translations or wrong source code line numbers mixed with current ones
> so it's also not perfect solution. Just an alternative option which  
> may
> be usable in some cases if some does not want to call:
>   hbi18n -m -omyprog.pot i18n/*.pot
>
>> Some more thoughts I've bumped into along the way:
>> - Date/time of addition of new translation entries would be a useful
>>  info to see in comments.
>
> We will have to agree some type of comments in .pot files which will
> be merged.
>
>> - To work smoothly with translation files (like making diffs and
>>  moving inside the file with familiarity) IMO it's best to retain
>>  some sort of ordering of the entries, plus also to retain certain  
>> types
>>  of comment (like date/time of addition). Currently the order of
>>  msgid/msgstr pairs will change completely after doing a
>>  refresh-from-source
>>  session.
>
> It will depend on the method of updating the .pot files.
> For me it does not change at all.
>
>> Maybe there are better ideas. Current system have one advantage:
>> source file to .pot conversion can be integrated in normal build  
>> process,
>> which is good to keep unified .pot updated, but IMO the rest of the
>> process is not easy enough to automatize. In my experience though,
>
> We can add any extensions we will find interesting and usable but
> personally I do not see any way to separate .pot file generation
> from preprocessing and compilation process without intorducing very
> serious for me limitations/problems.
>
>> .pot files aren't rebuilt all the time with the source code itself,  
>> it's
>> rather something rebuilt occasionally before translation sessions.
>> Well, any thought is welcome in this area.
>
> I always used to build them during compilation process when I create
> final binaries to be sure that they are synced with source code.
> Only in some developing process I do not generate them but in such  
> case
> I simply do not use -j switch.
>
> BTW I've found one problem with current -j<dirname>/ switch.
> If you pass more then one .prg file to harbour compiler then
> only the 1-st one uses -j<dirname>/ and all others use -j.
> It should be fixed.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From leonardo at sygecom.com.br  Tue May  5 09:43:00 2009
From: leonardo at sygecom.com.br (sygecom)
Date: Tue May  5 09:43:04 2009
Subject: [Harbour] contrib blat Fail
In-Reply-To: <gtp8p3$5gs$1@ger.gmane.org>
References: <gtp8p3$5gs$1@ger.gmane.org>
Message-ID: <23387728.post@talk.nabble.com>


Hi Itamar,

Try updating your SVN Harbour of the Viktor already corrected this error.

Leonardo Machado


Itamar Lins wrote:
> 
> Hi!
> No possible use with bcc 5.5
> 
> Unresolved external _cSend referenced  from 
> D:\DEV\HARBOUR\LIB\HBBLAT.LIB|blatwrp
> 
> TIA,
> Itamar M. Lins Jr. 
> 
> 
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/contrib-blat-Fail-tp23385817p23387728.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From leonardo at sygecom.com.br  Tue May  5 09:47:07 2009
From: leonardo at sygecom.com.br (sygecom)
Date: Tue May  5 09:47:14 2009
Subject: [Harbour] contrib blat Fail
In-Reply-To: <gtp8p3$5gs$1@ger.gmane.org>
References: <gtp8p3$5gs$1@ger.gmane.org>
Message-ID: <23387741.post@talk.nabble.com>


Hi Itamar,

As I am migrating from xHarbour, I am using the example below and going very
well with Blat. even faster than before hb_sendmail ()

#ifndef __XHARBOUR__
   #include "hbblat.ch"

   FUNCTION SendMail( cServer, nPort , ccFrom, aTo, aCC, aBCC, ccBody,
cSubject, aFiles, cUser, cPass, cPopServer, nPriority, lRead, lTrace,
lPopAuth, lNoAuth, nTimeOut, cReplyTo )
   LOCAL nRet
   LOCAL oBlat := HBBlat():New()
   WITH OBJECT oBlat
      :cFrom                   := ccFrom
      :cTo                     := aTo[1]
      :cUserAUTH               := cUser
      :cPasswordAUTH           := cPass
      :cHostname               := WUSUARIO
      if aCC#Nil
        :cCC                   := aCC[1]   // com copia
      endif
      //:cBCC                  := aBCC[1]  // com copia oculta
      :cServerSMTP             := cServer  // servidor SMTP
      :nPortSMTP               := nPort    // porta do servidor SMTP
      :cSubject                := cSubject // asunto da mensagem
      :cBody                   := ccBody   // corpo da mensagem
      //:lRequestDisposition     := TRUE   // confirma??o de leitura
      //:lRequestReturnReceipt   := TRUE   //
      :aAttachBinFiles         := aFiles   // arquivos anexos
      //:cLogFile              := "a.txt"  // habilita um LOG
      //:lDebug                := TRUE     // habilita o debug
      //:lLogOverwrite         := TRUE     // quando o LOG ? usado deve
sobre-escrever no arquivo LOG
   END
   nRet := oBlat:Send()
   if nRet # 0
      MsgStop("Ocorreu o seguinte Erro ao tenta enviar e-mail: " +
HB_OsNewLine() + ;
               oBlat:BlatErrorString() ,"Avido do Sistema")
   endif
   Return(IIF( nRet == 0,.T.,.F.))
#else
   FUNCTION SendMail( cServer, nPort , cFrom, aTo, aCC, aBCC, cBody,
cSubject, aFiles, cUser, cPass, cPopServer, nPriority, lRead, lTrace,
lPopAuth, lNoAuth, nTimeOut, cReplyTo )
   Return(HB_SendMail(cServer, nPort , cFrom, aTo, aCC,aBCC , cBody,
cSubject, aFiles, cUser, cPass, cPopServer, nPriority, lRead, lTrace,
lPopAuth, lNoAuth, nTimeOut, cReplyTo ))
#endif
***END CODE

Leonardo Machado


Itamar Lins wrote:
> 
> Hi!
> No possible use with bcc 5.5
> 
> Unresolved external _cSend referenced  from 
> D:\DEV\HARBOUR\LIB\HBBLAT.LIB|blatwrp
> 
> TIA,
> Itamar M. Lins Jr. 
> 
> 
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/contrib-blat-Fail-tp23385817p23387741.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Tue May  5 09:50:20 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Tue May  5 09:50:25 2009
Subject: [Harbour] contrib blat Fail
In-Reply-To: <23387728.post@talk.nabble.com>
References: <gtp8p3$5gs$1@ger.gmane.org> <23387728.post@talk.nabble.com>
Message-ID: <18d502870905050650v2e6d84d8te42fa7641b739c9c@mail.gmail.com>

It was always working for BCC, last fixes were targeting C++ mode only (MSVC
by default).
Probably blat.lib is not specified or not generated for Itamar.
INSTALL has information on how to generate it by build process.

Brgds,
Viktor

On Tue, May 5, 2009 at 3:43 PM, sygecom <leonardo@sygecom.com.br> wrote:

>
> Hi Itamar,
>
> Try updating your SVN Harbour of the Viktor already corrected this error.
>
> Leonardo Machado
>
>
> Itamar Lins wrote:
> >
> > Hi!
> > No possible use with bcc 5.5
> >
> > Unresolved external _cSend referenced  from
> > D:\DEV\HARBOUR\LIB\HBBLAT.LIB|blatwrp
> >
> > TIA,
> > Itamar M. Lins Jr.
> >
> >
> >
> > _______________________________________________
> > Harbour mailing list
> > Harbour@harbour-project.org
> > http://lists.harbour-project.org/mailman/listinfo/harbour
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/contrib-blat-Fail-tp23385817p23387728.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090505/2c295af3/attachment.html
From dbtopas at dbtopas.lt  Tue May  5 09:48:32 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue May  5 09:50:36 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10979] trunk/harbour
In-Reply-To: <18d502870905050442m4a3a62dap9e85f47e7347efaf@mail.gmail.com>
References: <E1M16TE-0004l5-0i@c3vjzd1.ch3.sourceforge.com>	<18d502870905041616w66430ad6k5e9dbdf5e205c0ea@mail.gmail.com>	<20090505090629.GA19093@uran.home.aster.pl>
	<18d502870905050442m4a3a62dap9e85f47e7347efaf@mail.gmail.com>
Message-ID: <4A0043B0.2050005@dbtopas.lt>

Hi,


> 1) hbi18n.exe *.prg *.ch -oapp_hu_HU.pot -del=app_hu_HU.unused.pot

I'm not sure I understand your idea. The line above means we need to 
include lexer, PP and compiler code (including all bison generate 
source) into hbi18n. Otherwise we will be always able to fail on samples 
like:

1) // hb_i18n_gettext("...")

2) #define x(x)  hb_i18n_gettext("...")
    x("...")

etc. Fixing code to work correctly will require to add more and more 
hacks if we will try to add all compiler code to hbi18n.exe



Regards,
Mindaugas
From harbour.01 at syenar.hu  Tue May  5 09:56:43 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Tue May  5 09:56:49 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10979] trunk/harbour
In-Reply-To: <4A0043B0.2050005@dbtopas.lt>
References: <E1M16TE-0004l5-0i@c3vjzd1.ch3.sourceforge.com>
	<18d502870905041616w66430ad6k5e9dbdf5e205c0ea@mail.gmail.com>
	<20090505090629.GA19093@uran.home.aster.pl>
	<18d502870905050442m4a3a62dap9e85f47e7347efaf@mail.gmail.com>
	<4A0043B0.2050005@dbtopas.lt>
Message-ID: <18d502870905050656n74032d3ene0c660e02031a336@mail.gmail.com>

>
> 1) hbi18n.exe *.prg *.ch -oapp_hu_HU.pot -del=app_hu_HU.unused.pot
>>
>
> I'm not sure I understand your idea. The line above means we need to
> include lexer, PP and compiler code (including all bison generate source)
> into hbi18n. Otherwise we will be always able to fail on samples like:


I know we need all these to do it, but since we already have
hb_compile(), this is probably also doable with a slightly
different interface.


> 1) // hb_i18n_gettext("...")
>
> 2) #define x(x)  hb_i18n_gettext("...")
>   x("...")
>
> etc. Fixing code to work correctly will require to add more and more hacks
> if we will try to add all compiler code to hbi18n.exe


That wasn't my intent, just a lib callable interface.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090505/633aafcd/attachment-0001.html
From druzus at users.sourceforge.net  Tue May  5 10:59:38 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue May  5 10:59:43 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10982] trunk/harbour
Message-ID: <E1M1M7O-0006s4-QJ@c3vjzd1.ch3.sourceforge.com>

Revision: 10982
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10982&view=rev
Author:   druzus
Date:     2009-05-05 14:59:12 +0000 (Tue, 05 May 2009)

Log Message:
-----------
2009-05-05 17:05 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcomp.h
  * harbour/source/compiler/hbmain.c
  * harbour/source/compiler/hbcomp.c
  * harbour/source/compiler/compi18n.c
    * changed -j<path>/ and -j<file> behavior when more the one .prg file
      is compiled. Now when <path>/ is used then it's respected by all
      compiler .prg modules. When <file> is used then only single .pot
      file is generated but it contains i18n entries from all compiled
      .prg modules.

  * harbour/ChangeLog
    + added two thanks notes, one to Miguel and using HeapAlloc() and
      second to Walter Negro for his DATETIME work in xHarbour what gives
      valuable test platform for Harbour and was important inspiration for
      Harbour TIMESTAMP implementation.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/include/hbcomp.h
    trunk/harbour/source/compiler/compi18n.c
    trunk/harbour/source/compiler/hbcomp.c
    trunk/harbour/source/compiler/hbmain.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Tue May  5 11:12:55 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue May  5 11:13:01 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10983]
	trunk/harbour/ChangeLog
Message-ID: <E1M1MKE-00077X-Vq@c3vjzd1.ch3.sourceforge.com>

Revision: 10983
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10983&view=rev
Author:   druzus
Date:     2009-05-05 15:12:28 +0000 (Tue, 05 May 2009)

Log Message:
-----------
2009-05-05 17:19 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/ChangeLog
    * generate .pot files when -j is used with -s switch just like .ppo
      are created when with -p is used with -s

Modified Paths:
--------------
    trunk/harbour/ChangeLog


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Tue May  5 11:33:27 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue May  5 11:33:32 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10984] trunk/harbour
Message-ID: <E1M1Me7-0000YE-8E@3kljzd1.ch3.sourceforge.com>

Revision: 10984
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10984&view=rev
Author:   vszakats
Date:     2009-05-05 15:33:26 +0000 (Tue, 05 May 2009)

Log Message:
-----------
2009-05-05 17:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Further fixes to texts.
    + Added hb_cdpSelect() call as provision. Also included a few CPs
      in executable.

  * utils/hbmk2/hbmk2.hu_HU.pot
    + Finished HU translation (probably it could be tweak with
      regards to terminology).

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.pot
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vouchcac at users.sourceforge.net  Tue May  5 11:57:26 2009
From: vouchcac at users.sourceforge.net (vouchcac@users.sourceforge.net)
Date: Tue May  5 11:57:30 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10985] trunk/harbour
Message-ID: <E1M1N1K-0008Gh-G6@bj8yhf1.ch3.sourceforge.com>

Revision: 10985
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10985&view=rev
Author:   vouchcac
Date:     2009-05-05 15:57:25 +0000 (Tue, 05 May 2009)

Log Message:
-----------
2009-05-05 08:54 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtqtc/gtqtc.cpp
  * harbour/contrib/gtwvg/tests/demoxbp.prg
    ! Minor formattings.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtqtc/gtqtc.cpp
    trunk/harbour/contrib/gtwvg/tests/demoxbp.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Tue May  5 12:01:04 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue May  5 12:01:20 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10986] trunk/harbour
Message-ID: <E1M1N4q-0001id-Hw@d5vjzd1.ch3.sourceforge.com>

Revision: 10986
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10986&view=rev
Author:   druzus
Date:     2009-05-05 16:01:03 +0000 (Tue, 05 May 2009)

Log Message:
-----------
2009-05-05 18:09 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/utils/hbi18n/hbi18n.prg
    * expand wildcards in given file names on non *nix like platforms

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbi18n/hbi18n.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From snaiperis at users.sourceforge.net  Tue May  5 12:44:30 2009
From: snaiperis at users.sourceforge.net (snaiperis@users.sourceforge.net)
Date: Tue May  5 12:44:35 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10987] trunk/harbour
Message-ID: <E1M1Nks-0001Pz-Ot@c3vjzd1.ch3.sourceforge.com>

Revision: 10987
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10987&view=rev
Author:   snaiperis
Date:     2009-05-05 16:43:24 +0000 (Tue, 05 May 2009)

Log Message:
-----------
2009-05-04 19:40 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
  * harbour/contrib/rddsql/sddmy/mysqldd.c
  * harbour/contrib/rddsql/sddpg/pgsqldd.c
    * added protection against double resource freeing 

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/rddsql/sddmy/mysqldd.c
    trunk/harbour/contrib/rddsql/sddpg/pgsqldd.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Tue May  5 14:02:05 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue May  5 14:02:12 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10988] trunk/harbour
Message-ID: <E1M1Oxx-0008OI-0b@74yxhf1.ch3.sourceforge.com>

Revision: 10988
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10988&view=rev
Author:   vszakats
Date:     2009-05-05 18:02:04 +0000 (Tue, 05 May 2009)

Log Message:
-----------

2009-05-05 19:52 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
  * utils/hbmk2/hbmk2.hu_HU.pot
    + Added new -pot= switch with which it's possible to create
      one .pot file for the whole project. When this switch is
      used, Harbour compiler will be run with -j parameter so
      that .pot files will be generated.
      hbmk will take care of preserving existing translations.
      This changes contains parts taken from hbi18n, work of
      Przemek, copyright retained.
    ; TOFIX: For some reason update of existing .pot file with
             new one doesn't work. It's probably something obvious
             but I cannot see what.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.pot
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Tue May  5 15:04:07 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Tue May  5 15:04:13 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10986] trunk/harbour
In-Reply-To: <E1M1N4q-0001id-Hw@d5vjzd1.ch3.sourceforge.com>
References: <E1M1N4q-0001id-Hw@d5vjzd1.ch3.sourceforge.com>
Message-ID: <18d502870905051204h46423242t3054ab658d80834e@mail.gmail.com>

Thanks for this and previous changes.
I'll have another request, but I'm starting a new thread.

Brgds,
Viktor

On Tue, May 5, 2009 at 6:01 PM, <druzus@users.sourceforge.net> wrote:

> Revision: 10986
>
> http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10986&view=rev
> Author:   druzus
> Date:     2009-05-05 16:01:03 +0000 (Tue, 05 May 2009)
>
> Log Message:
> -----------
> 2009-05-05 18:09 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/utils/hbi18n/hbi18n.prg
>    * expand wildcards in given file names on non *nix like platforms
>
> Modified Paths:
> --------------
>    trunk/harbour/ChangeLog
>    trunk/harbour/utils/hbi18n/hbi18n.prg
>
>
> This was sent by the SourceForge.net collaborative development platform,
> the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090505/c16e58f2/attachment.html
From harbour.01 at syenar.hu  Tue May  5 15:08:53 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Tue May  5 15:08:58 2009
Subject: [Harbour] Using alternate translatable text marker functions
Message-ID: <18d502870905051208r6e90237etdbd1e8e28260bf48@mail.gmail.com>

Hi All,
I have an app which uses translatable texts, but it's using
a different, local function to mark/translate texts. This function
is doing some extra text processing plus deals with loading
/ caching translations on demand.

But since this is a different function than hb_i18n_gettext()
I cannot utilize -j switch to extract strings.

Questions:
- Would it be possible to pass extra alternate function names,
  which would get extracted also?
- If not, would it be possible to override functionality of
  hb_i18n_gettext() at runtime? (without penalizing performance of course)

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090505/d289cf4e/attachment.html
From vszakats at users.sourceforge.net  Tue May  5 18:25:02 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue May  5 18:25:06 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10989] trunk/harbour
Message-ID: <E1M1T4Q-0003oJ-3e@dn4whf1.ch3.sourceforge.com>

Revision: 10989
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10989&view=rev
Author:   vszakats
Date:     2009-05-05 22:25:01 +0000 (Tue, 05 May 2009)

Log Message:
-----------
2009-05-06 00:20 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed -pot= option mentioned in prev entry.
    ! -pot= refinement to handle missing source .pots (which
      is normal). Also added/fixed some lng related debug options.
    ! Remaining debug texts made non-translatable.
    ; NOTE: It's now possible to handle all aspect of translation
            files using hbmk2 alone. (extraction from source ->
            creation of unified translation file -> merging this
            file with previous version retaining existing
            translations -> creation of .hbl file from .pots)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bedipritpal at hotmail.com  Tue May  5 23:22:49 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue May  5 23:22:54 2009
Subject: [Harbour] MT - DBFCDX - Next Appln Instance Hangs ...
In-Reply-To: <20090504153029.GA25046@uran.home.aster.pl>
References: <23352456.post@talk.nabble.com>
	<20090504144937.GA26850@uran.home.aster.pl>
	<23370463.post@talk.nabble.com>
	<20090504153029.GA25046@uran.home.aster.pl>
Message-ID: <23399380.post@talk.nabble.com>


Hello Przemek


Przemyslaw Czerpak-2 wrote:
> 
> I can only guess that you do not make full clean build and you
> are still uses some DBF* RDDs binaries compiled with older header
> files without some new DBFAREA members.
> It's also possible that you reached such effect by mixing header files
> from older and current Harbour versions.
> 

I tried these procedures [ BCC55 - Using Since Ages]:

1. Removed sub-folders and files in harbour folder.
2. Updated from SVN afresh as a clean slate.
3. c:\harbour>make_gnu.bat clean
4. c:\harbour>make_gnu.bat install >log-%HB_COMPILER% 2>&1
5. Harbour builds perfectly as I checked the log twice.
6. Rebuild all my libraries and application.
7. The first instance executed as expected without any bumps.
8. Second instance [ same behavior with 2nd terminal also ] 
      put into never ending loop - cpu 50% - appln seems active.
9 Procedure 1 : No results.

Appln reaches well to the point where this table is opened.
Before this point there are many tables which are opened successfully.
The I looked into what is the difference in opening sequence of 
this particular table. I found that this table is opened twice, first time
with EXCLUSIVE use, then is closed, and then opened in SHARED mode, 
then DbRelease()d.

Then I commented out code where table is opened in EXCLUSIVE mode.
It means now it was being opened once and in SHARED mode. And voila
I was able to run any number of instances, no problems. BUT this is not 
an option for me as I do some cleanups etc when first user is entering.

I tried another method.
I opened this table wth Foxpro in shared mode from Foxpro's command 
window. Then I executed appln with EXCLUSIVE routine intact. The first
instance itself displayed the hung behavior. 

Then I peeped into source/rdd/dbcmd.c : DBUSEARE() function.
I put check points as follows:

HB_FUNC( DBUSEAREA )
{
   BOOL bOpened;

hb_ToOutDebug( "DBUSEAREA: %s", hb_parc( 3 ) );

   bOpened = hb_rddOpenTable( hb_parc( 3 ), hb_parc( 2 ),
         hb_parl( 1 ) ? 0 : hb_rddGetCurrentWorkAreaNumber(),
         hb_parc( 4 ), ISLOG( 5 ) ? hb_parl( 5 ) : !hb_setGetExclusive(),
         hb_parl( 6 ), hb_parc( 7 ), hb_parnl( 8 ), NULL, NULL ) ;

   hb_retl( bOpened == HB_SUCCESS );

hb_ToOutDebug( "DBUSEAREA: %s Opened=%i", hb_parc( 3 ), bOpened );
}

DBUSEAREA() reported correctly and it seems funtion
returned normally, but I could never see next command
executed where DbUseArea() has been called.



> Anyhow it does not seems to be Harbour problem but rather sth wrong
> with your local builds.
> 

I agree to this point but what has went terribly wrong with my builds,
I am trying to fiigure out. In view of above procedure I adopted to 
debug can you guide me what else I should do to recover from it.
Any tips will be helpful.

>It's also possible that you used BMDBFCDX before it was updated.

No, never. Only DBFCDX.

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/MT---DBFCDX---Next-Appln-Instance-Hangs-...-tp23352456p23399380.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Wed May  6 02:19:21 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May  6 02:19:27 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10989] trunk/harbour
In-Reply-To: <E1M1T4Q-0003oJ-3e@dn4whf1.ch3.sourceforge.com>
References: <E1M1T4Q-0003oJ-3e@dn4whf1.ch3.sourceforge.com>
Message-ID: <18d502870905052319q322da5d0j9f4e341b608bc180@mail.gmail.com>

So I though, but it's still not good, existing translation aren't retained
now. TOFIX still remains.

Brgds,
Viktor

On Wed, May 6, 2009 at 12:25 AM, <vszakats@users.sourceforge.net> wrote:

> Revision: 10989
>
> http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10989&view=rev
> Author:   vszakats
> Date:     2009-05-05 22:25:01 +0000 (Tue, 05 May 2009)
>
> Log Message:
> -----------
> 2009-05-06 00:20 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>  * utils/hbmk2/hbmk2.prg
>    ! Fixed -pot= option mentioned in prev entry.
>    ! -pot= refinement to handle missing source .pots (which
>      is normal). Also added/fixed some lng related debug options.
>    ! Remaining debug texts made non-translatable.
>    ; NOTE: It's now possible to handle all aspect of translation
>            files using hbmk2 alone. (extraction from source ->
>            creation of unified translation file -> merging this
>            file with previous version retaining existing
>            translations -> creation of .hbl file from .pots)
>
> Modified Paths:
> --------------
>    trunk/harbour/ChangeLog
>    trunk/harbour/utils/hbmk2/hbmk2.prg
>
>
> This was sent by the SourceForge.net collaborative development platform,
> the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090506/a3b8e3b3/attachment.html
From M.Horodyski at pzuzycie.com.pl  Wed May  6 03:00:52 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Wed May  6 03:00:58 2009
Subject: [Harbour] Hangs install proces.
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C95022E1C88@PINK.zycie.pzu>

Hello after a short holiday :)
In Monday and yesterday I tried to compile HARBOR from naigtly zip file, and the install process are suspended/hangs.
In tree process I see :
------------------------------
Cmd
|-make
 |-make
  |-make
   |-make
    |-wpp386
--------------------------------

and from this moment wpp386 work without end with procesor utilization > 87%.
until the suspension this file are created :

-----------------------------------
2009-05-06  05:44    <DIR>          .
2009-05-06  05:44    <DIR>          ..
2009-05-06  05:41    <DIR>          bin
2009-05-06  05:41    <DIR>          doc
2009-05-06  05:41    <DIR>          include
2009-05-06  05:42    <DIR>          lib
2009-05-06  05:44                 0 listfile
               1 plik(?w)               0 bajt?w

 Katalog: D:\hrbdev\bin

2009-05-06  05:41    <DIR>          .
2009-05-06  05:41    <DIR>          ..
2009-05-06  05:41           596?480 harbour.exe
2009-05-06  05:41           157?184 hbpp.exe
               2 plik(?w)         753?664 bajt?w

 Katalog: D:\hrbdev\doc

2009-05-06  05:41    <DIR>          .
2009-05-06  05:41    <DIR>          ..
2009-03-25  11:34             3?647 class_tp.txt
[snip many files]
2008-09-16  00:18             4?001 windll.txt
              28 plik(?w)         340?686 bajt?w

 Katalog: D:\hrbdev\include

2009-05-06  05:41    <DIR>          .
2009-05-06  05:41    <DIR>          ..
2001-04-27  16:03             3?245 achoice.ch
[snip many files]
2007-11-23  16:14             2?786 tbrowse.ch
2008-08-19  10:11             3?786 vm.api
             111 plik(?w)       1?119?248 bajt?w

 Katalog: D:\hrbdev\lib

2009-05-06  05:42    <DIR>          .
2009-05-06  05:42    <DIR>          ..
2009-05-06  05:42             6?144 gtcgi.lib
2009-05-06  05:42             4?096 gtgui.lib
2009-05-06  05:42            13?824 gtpca.lib
2009-05-06  05:42             8?704 gtstd.lib
2009-05-06  05:42            22?016 gtwin.lib
2009-05-06  05:42            51?200 gtwvt.lib
2009-05-06  05:41            91?136 hbcommon.lib
2009-05-06  05:41           418?304 hbcplr.lib
2009-05-06  05:41           348?160 hbpp.lib
2009-05-06  05:42         2?157?056 hbrtl.lib
              10 plik(?w)       3?120?640 bajt?w

     Razem wymienionych plik?w:
             152 plik(?w)       5?334?238 bajt?w
              14 katalog(?w)  123?405?111?296 bajt?w wolnych
----------------------------



On screen (or in end of log file ) before hangs I'm see :

----------------------------
D:\harbour\source\vm>if not exist ..\..\lib\win\owatcom\. md ..\..\lib\win\owatcom 
make.exe[3]: Entering directory `D:/harbour/source/vm/win/owatcom'
wpp386 -zq -bt=NT -bm -w3 -6s -fp6 -onaehtr -s -ei -zp4 -zt0 -oi+ -i. -i../../../../include      ../../hvmall.c -fo=hvmall.obj
D:\WATCOM\H\NT\basetsd.h(35): Warning! W583: col(34) redefinition of the typedef name 'INT32' ignored
D:\WATCOM\H\NT\basetsd.h(35): Note! N393: col(34) included from D:\WATCOM\H\NT\winnt.h(22)
D:\WATCOM\H\NT\basetsd.h(35): Note! N393: col(34) included from D:\WATCOM\H\NT\windef.h(110)
D:\WATCOM\H\NT\basetsd.h(35): Note! N393: col(34) included from D:\WATCOM\H\NT\windows.h(31)
D:\WATCOM\H\NT\basetsd.h(35): Note! N393: col(34) included from ../../../../include/hbthread.h(64)
D:\WATCOM\H\NT\basetsd.h(35): Note! N393: col(34) included from ../../classes.c(148)
D:\WATCOM\H\NT\basetsd.h(35): Note! N393: col(34) included from ../../hvmall.c(70)
../../../../include/hbdefs.h(355): Note! N392: col(28) definition: 'INT32'
../../dlmalloc.c(2789): Warning! W367: col(7) conditional expression in if statement is always true
../../dlmalloc.c(2827): Warning! W367: col(7) conditional expression in if statement is always true
../../dlmalloc.c(3356): Warning! W368: col(27) conditional expression in if statement is always false
../../dlmalloc.c(3362): Warning! W013: col(5) unreachable code
../../dlmalloc.c(3428): Warning! W368: col(21) conditional expression in if statement is always false
../../dlmalloc.c(3430): Warning! W013: col(5) unreachable code
../../dlmalloc.c(3559): Warning! W887: col(13) unary '-' of unsigned operand produces unsigned result
../../dlmalloc.c(3582): Warning! W368: col(18) conditional expression in if statement is always false
../../dlmalloc.c(3583): Warning! W013: col(11) unreachable code
../../dlmalloc.c(3609): Warning! W367: col(9) conditional expression in if statement is always true
../../dlmalloc.c(3737): Warning! W887: col(16) unary '-' of unsigned operand produces unsigned result
../../dlmalloc.c(3741): Warning! W367: col(7) conditional expression in if statement is always true
../../dlmalloc.c(3802): Warning! W013: col(3) unreachable code
../../dlmalloc.c(3818): Warning! W887: col(16) unary '-' of unsigned operand produces unsigned result
../../dlmalloc.c(3832): Warning! W368: col(22) conditional expression in if statement is always false
../../dlmalloc.c(3832): Warning! W013: col(25) unreachable code
../../dlmalloc.c(3962): Warning! W368: col(18) conditional expression in if statement is always false
../../dlmalloc.c(3962): Warning! W013: col(21) unreachable code
../../dlmalloc.c(4049): Warning! W367: col(7) conditional expression in if statement is always true
../../dlmalloc.c(4086): Warning! W368: col(32) conditional expression in if statement is always false
../../dlmalloc.c(4087): Warning! W013: col(60) unreachable code
../../dlmalloc.c(4105): Warning! W887: col(23) unary '-' of unsigned operand produces unsigned result
../../dlmalloc.c(4154): Warning! W013: col(3) unreachable code
../../dlmalloc.c(4175): Warning! W367: col(9) conditional expression in if statement is always true
../../dlmalloc.c(4326): Warning! W367: col(7) conditional expression in if statement is always true
../../fm.c(383): Warning! W367: col(19) conditional expression in if statement is always true
----------------------------

Regards,
Marek Horodyski
From vszakats at users.sourceforge.net  Wed May  6 03:09:19 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May  6 03:09:24 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10990] trunk/harbour
Message-ID: <E1M1bFn-0002p2-Aw@74yxhf1.ch3.sourceforge.com>

Revision: 10990
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10990&view=rev
Author:   vszakats
Date:     2009-05-06 07:09:18 +0000 (Wed, 06 May 2009)

Log Message:
-----------
2009-05-06 09:07 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
  * utils/hbmk2/hbmk2.hbm
  - utils/hbmk2/hbmk2.hu_HU.pot
  + utils/hbmk2/hbmk2.hu_HU.po
    * Changed hbmk to use official gettext terminology, where
      .pot refers to raw extracted translation file, .po refers
      to merged .pot files which holds the actual translations.
      hbmk switch names and extensions changed accordingly.
    ! Fixes to .po from .pot generation support.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.hbm
    trunk/harbour/utils/hbmk2/hbmk2.prg

Added Paths:
-----------
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.po

Removed Paths:
-------------
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.pot


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Wed May  6 03:18:33 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May  6 03:18:38 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10991] trunk/harbour
Message-ID: <E1M1bOj-0002ye-V6@74yxhf1.ch3.sourceforge.com>

Revision: 10991
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10991&view=rev
Author:   vszakats
Date:     2009-05-06 07:18:33 +0000 (Wed, 06 May 2009)

Log Message:
-----------
2009-05-06 09:18 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/vm/Makefile
    ! Disabled HB_HVM_ALL for owatcom/win compiler.
      The compiler hangs in hvmall.c (Reported by Marek Horodyski).
      Please make tests on other platforms whether it does the same.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/vm/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Wed May  6 04:31:50 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May  6 04:31:55 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10992]
	trunk/harbour/ChangeLog
Message-ID: <E1M1cXe-0002zT-Qh@c3vjzd1.ch3.sourceforge.com>

Revision: 10992
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10992&view=rev
Author:   vszakats
Date:     2009-05-06 08:31:49 +0000 (Wed, 06 May 2009)

Log Message:
-----------
minor mod to avoid misattribution

Modified Paths:
--------------
    trunk/harbour/ChangeLog


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Wed May  6 04:39:20 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May  6 04:39:26 2009
Subject: [Harbour] Re: Using alternate translatable text marker functions
In-Reply-To: <18d502870905051208r6e90237etdbd1e8e28260bf48@mail.gmail.com>
References: <18d502870905051208r6e90237etdbd1e8e28260bf48@mail.gmail.com>
Message-ID: <18d502870905060139p4c62f870l85d7ea0397fd4ed5@mail.gmail.com>

Can it be a solution to reserve a certain namespace which can be freely used
for such user-defined gettext functions?

Like: hb_i18n_gettext[_strict|_noop]*() ?
Where '*' can be any valid postfix (with length > 0).

These function names would be handled similarly to
hb_i18n_gettext[_strict|_noop](), but would not be defined by
Harbour itself, they'd be left for the user programs.

Any opinions?

Brgds,
Viktor

On Tue, May 5, 2009 at 9:08 PM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:

> Hi All,
> I have an app which uses translatable texts, but it's using
> a different, local function to mark/translate texts. This function
> is doing some extra text processing plus deals with loading
> / caching translations on demand.
>
> But since this is a different function than hb_i18n_gettext()
> I cannot utilize -j switch to extract strings.
>
> Questions:
> - Would it be possible to pass extra alternate function names,
>   which would get extracted also?
> - If not, would it be possible to override functionality of
>   hb_i18n_gettext() at runtime? (without penalizing performance of course)
>
> Brgds,
> Viktor
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090506/90efe0e2/attachment.html
From druzus at acn.waw.pl  Wed May  6 05:03:12 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed May  6 04:54:56 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10991] trunk/harbour
In-Reply-To: <E1M1bOj-0002ye-V6@74yxhf1.ch3.sourceforge.com>
References: <E1M1bOj-0002ye-V6@74yxhf1.ch3.sourceforge.com>
Message-ID: <20090506090312.GA20047@uran.home.aster.pl>

On Wed, 06 May 2009, vszakats@users.sourceforge.net wrote:

Hi,

> Log Message:
> -----------
> 2009-05-06 09:18 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * source/vm/Makefile
>     ! Disabled HB_HVM_ALL for owatcom/win compiler.
>       The compiler hangs in hvmall.c (Reported by Marek Horodyski).
>       Please make tests on other platforms whether it does the same.

It does not hang. At least 1.8 I tested with Wine. It only needs a lot
of time to finish compilation. On slow computer it can be more then an
hour. Probably due to i+ in optimization flags but I haven't tested it.

best regards,
Przemek
From vszakats at users.sourceforge.net  Wed May  6 05:08:51 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May  6 05:08:55 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10993] trunk/harbour
Message-ID: <E1M1d7T-0005rD-1O@74yxhf1.ch3.sourceforge.com>

Revision: 10993
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10993&view=rev
Author:   vszakats
Date:     2009-05-06 09:08:50 +0000 (Wed, 06 May 2009)

Log Message:
-----------
2009-05-06 10:50 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbexprb.c
    + Allowing user defined 'gettext' functions to be used
      under the names hb_i18n_gettext[_strict|_noop]_*(),
      where * is a function name postfix.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/include/hbexprb.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Wed May  6 05:19:50 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed May  6 05:11:34 2009
Subject: [Harbour] Re: Using alternate translatable text marker functions
In-Reply-To: <18d502870905060139p4c62f870l85d7ea0397fd4ed5@mail.gmail.com>
References: <18d502870905051208r6e90237etdbd1e8e28260bf48@mail.gmail.com>
	<18d502870905060139p4c62f870l85d7ea0397fd4ed5@mail.gmail.com>
Message-ID: <20090506091950.GB20047@uran.home.aster.pl>

On Wed, 06 May 2009, Szak?ts Viktor wrote:

Hi,

> Can it be a solution to reserve a certain namespace which can be freely used
> for such user-defined gettext functions?
> Like: hb_i18n_gettext[_strict|_noop]*() ?
> Where '*' can be any valid postfix (with length > 0).
> These function names would be handled similarly to
> hb_i18n_gettext[_strict|_noop](), but would not be defined by
> Harbour itself, they'd be left for the user programs.
> Any opinions?

If you want to use your own i18n functions then you can always
divide compilation and generation of .pot file.
For compilation use some:
   #xtranslate hb_i18n_gettext( <x,...> ) => my_i18n_gettext( <x> )
For generating .pot files does not use above PP rules and use -s
compiler switch.

About runtime I18N module switching. Here is the note I left in the
ChangeLog:

2008-12-11 19:48 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
    + added i18n module. Now only for internal Harbour usage without support
      for optional switching to alternative implementations.
      I'll add such functionality later when I will work on native gettext
      support.

I plan to add method which allow to register some basic functions at C level
used by HVM and HB_I18N_GETTEXT[_strict|_noop]() so user can create his
own independent I18N implementation. If internal representation of
translation tables in alternative i18n implementation is not compatible
with Harbour one then it cannot use other Harbour HB_I18N_ functions
and has to provide own set of functions giving necessary functionality.
I plan to add real gettext wrapper to Harbour using alternative i18n
implementation.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed May  6 05:17:01 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May  6 05:17:06 2009
Subject: [Harbour] Re: Using alternate translatable text marker functions
In-Reply-To: <20090506091950.GB20047@uran.home.aster.pl>
References: <18d502870905051208r6e90237etdbd1e8e28260bf48@mail.gmail.com>
	<18d502870905060139p4c62f870l85d7ea0397fd4ed5@mail.gmail.com>
	<20090506091950.GB20047@uran.home.aster.pl>
Message-ID: <18d502870905060217u507df0fcq4550e635ce83af58@mail.gmail.com>

>
> > Can it be a solution to reserve a certain namespace which can be freely
> used
> > for such user-defined gettext functions?
> > Like: hb_i18n_gettext[_strict|_noop]*() ?
> > Where '*' can be any valid postfix (with length > 0).
> > These function names would be handled similarly to
> > hb_i18n_gettext[_strict|_noop](), but would not be defined by
> > Harbour itself, they'd be left for the user programs.
> > Any opinions?
>
> If you want to use your own i18n functions then you can always
> divide compilation and generation of .pot file.
> For compilation use some:
>   #xtranslate hb_i18n_gettext( <x,...> ) => my_i18n_gettext( <x> )
> For generating .pot files does not use above PP rules and use -s
> compiler switch.


Thought about it but this requires two distinct passes of
compilation, and in recent days I went for one-pass hbmk2
integrated .pot/.po generation. I've yet to test it in practice
though. I'll do this now that my translated texts are generated.

The .po generation is somewhat fragile, but I'll see how it goes
in reality.


> I plan to add method which allow to register some basic functions at C
> level
> used by HVM and HB_I18N_GETTEXT[_strict|_noop]() so user can create his
> own independent I18N implementation. If internal representation of
> translation tables in alternative i18n implementation is not compatible
> with Harbour one then it cannot use other Harbour HB_I18N_ functions
> and has to provide own set of functions giving necessary functionality.
> I plan to add real gettext wrapper to Harbour using alternative i18n
> implementation.


Definitely sounds good. I've committed the postfix solution in the
meanwhile, looks quite benign and without any impact at runtime.
My other issue is that I have multiple local gettext call flavours, so
simply overriding hb_i18n_gettext() isn't sufficient here.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090506/e1eeed5f/attachment.html
From druzus at users.sourceforge.net  Wed May  6 07:06:12 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Wed May  6 07:06:17 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10994] trunk/harbour
Message-ID: <E1M1ex2-0003Vr-UT@bj8yhf1.ch3.sourceforge.com>

Revision: 10994
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10994&view=rev
Author:   druzus
Date:     2009-05-06 11:06:11 +0000 (Wed, 06 May 2009)

Log Message:
-----------
2009-05-06 13:14 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/blob.ch
    ! fixed minor typo

  * harbour/source/rdd/dbffpt/dbffpt1.c
    ! fixed two bugs in garbage collector. One of them was critical and could
      cause FPT or DBV file corruption when memoblock size was smaller then 8
      bytes. Thanks to Mike Evans for self contain example.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/include/blob.ch
    trunk/harbour/source/rdd/dbffpt/dbffpt1.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Wed May  6 07:41:21 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed May  6 07:33:09 2009
Subject: [Harbour] MT - DBFCDX - Next Appln Instance Hangs ...
In-Reply-To: <23399380.post@talk.nabble.com>
References: <23352456.post@talk.nabble.com>
	<20090504144937.GA26850@uran.home.aster.pl>
	<23370463.post@talk.nabble.com>
	<20090504153029.GA25046@uran.home.aster.pl>
	<23399380.post@talk.nabble.com>
Message-ID: <20090506114121.GA11067@uran.home.aster.pl>

On Tue, 05 May 2009, Pritpal Bedi wrote:

Hi,

[...]
> I am trying to fiigure out. In view of above procedure I adopted to 
> debug can you guide me what else I should do to recover from it.
> Any tips will be helpful.

It looks like some type of memory corruption.
In Linux I would suggest to use valgrind to check final binaries but
AFAIK it's not available for MS-Windows yet.
If you use BCC then you can try to use CodeGuard.
Try to compile Harbour and all your code with CodeGuard support and then
repeat your tests. Then check CodeGuard reports.

best regards,
Przemek
From kleyber at tkinformidia.net  Wed May  6 07:57:21 2009
From: kleyber at tkinformidia.net (Kleyber)
Date: Wed May  6 07:57:27 2009
Subject: [Harbour] Error in Harbour generation with MSVC (again)
Message-ID: <23405168.post@talk.nabble.com>


Hi,

I've upgraded my Harbour with tha last revision, but when I try to compile
all with make_gnu (using MSVC) it gives me this errors:

make (e=193): Error 193
make.exe[3]: *** [expropt.obj] Error 193
make.exe[3]: Leaving directory 'C:/harbour/source/common/win/msvc'
make.exe[2]: *** [descend] Error 2
make.exe[2] Leaving directory 'C:/harbour/source/common'
make.exe[1]: *** [common.inst] Error 2
make.exe[1]: Leaving directory 'C:/harbour/source'
make.exe: *** [source.inst] Error 2

Where am I wrong?

TIA

Kleyber
-- 
View this message in context: http://www.nabble.com/Error-in-Harbour-generation-with-MSVC-%28again%29-tp23405168p23405168.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From Jaroslav.Janik at siemens.com  Wed May  6 08:10:58 2009
From: Jaroslav.Janik at siemens.com (Janik, Jaroslav)
Date: Wed May  6 08:11:10 2009
Subject: [Harbour] 2009-01-20 00:20 UTC+0100 Francesco Saverio
	Giudice(info/at/fsgiudice.com)
In-Reply-To: <49750AA1.7010806@fsgiudice.com>
References: <49750AA1.7010806@fsgiudice.com>
Message-ID: <D372649F61577F4AA917D493CA06ECBDF3F294@btss020a.ww300.siemens.net>

Has anybody description or some more samples how to use these functions:

      socket_init()    - WSAStartup()
      socket_exit()    - WSACleanup()
      socket_error()   - WSALastError()
      socket_select()  - select()
      socket_create()       - socket()
      socket_close()        - closesocket()
      socket_shutdown()     - shutdown()
      socket_bind()         - bind()
      socket_listen()       - listen()
      socket_accept()       - accept()
      socket_send()         - send()
      socket_recv()         - recv()
      socket_recv()         - recv()
      socket_getsockname()  - getsockname()
      socket_getpeername()  - getpeername() 

Especially how tu use socket_accept().

Thanks.
Jaroslav Janik

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Francesco
Saverio Giudice
Sent: Tuesday, January 20, 2009 12:20 AM
To: Harbour Project Main Developer List.
Subject: [Harbour] 2009-01-20 00:20 UTC+0100 Francesco Saverio
Giudice(info/at/fsgiudice.com)

2009-01-20 00:20 UTC+0100 Francesco Saverio Giudice
(info/at/fsgiudice.com)
   + harbour/contrib/examples/uhttpd/modules/info.prg
     + New sample showing server variables
   * harbour/contrib/examples/uhttpd/home/index.html
   * harbour/contrib/examples/uhttpd/readme.txt
   * harbour/contrib/examples/uhttpd/uhttpd.prg
     * updated for new sample


Best regards

Francesco
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From vailtom at gmail.com  Wed May  6 08:36:37 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Wed May  6 08:36:42 2009
Subject: [Harbour] MT - DBFCDX - Next Appln Instance Hangs ...
In-Reply-To: <20090506114121.GA11067@uran.home.aster.pl>
References: <23352456.post@talk.nabble.com>
	<20090504144937.GA26850@uran.home.aster.pl>
	<23370463.post@talk.nabble.com>
	<20090504153029.GA25046@uran.home.aster.pl>
	<23399380.post@talk.nabble.com>
	<20090506114121.GA11067@uran.home.aster.pl>
Message-ID: <531d7a750905060536j3c00eb03wcd64fc537b969ebf@mail.gmail.com>

Where can I get more information about compiling the HB with the
Codeguard, Przemek?

Many thanks,
Vailton Renato
From vszakats at users.sourceforge.net  Wed May  6 08:46:19 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May  6 08:46:24 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10995] trunk/harbour
Message-ID: <E1M1gVv-0006Hv-3w@3kljzd1.ch3.sourceforge.com>

Revision: 10995
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10995&view=rev
Author:   vszakats
Date:     2009-05-06 12:46:18 +0000 (Wed, 06 May 2009)

Log Message:
-----------
2009-05-06 14:45 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Further fixes to .po file handling functionality after real
      life testing. What needs to be handled gracefully is that
      it's perfectly normal that a file doesn't have a .pot
      file generated (when the source doesn't have any translatable
      texts). Unfortunately this situation adds some hard-to-detect
      problems which can in turn cause .po translations to be lost.
      Since the only current way to detect if translatable texts
      exist is to check for the .pot file, if a .pot file is missing
      for other reasons (manual deletion, corruption) hbmk will take
      it normally and remove related translations from .po files.
      I don't know what could be a good solution to this problem.
      The other issue is scalability: Since there is no way to
      update .po files with only partial .pot information (coming
      from recompiled sources in that build session), each build
      session has to do a full .pot merge and update (for all
      languages). This is slow, if you have some idea how to make
      this incremental, please speak up.
      Probably we should reverse the logic and take the .po file
      (containing translations) as a base, and add new pairs from
      _available_ .pots. Pair removal (IOW cleanup) should be an
      option, done periodically (before release), but not something
      happening in each build session. This would also solve the problem
      of retaining old translations, since they will stay there until
      we specifically ask the system to remove them. Maybe that's 
      what we should do. Przemek, what do you think?

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From snaiperis at users.sourceforge.net  Wed May  6 09:06:52 2009
From: snaiperis at users.sourceforge.net (snaiperis@users.sourceforge.net)
Date: Wed May  6 09:06:56 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10996] trunk/harbour
Message-ID: <E1M1gpo-0006ng-Bl@3kljzd1.ch3.sourceforge.com>

Revision: 10996
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10996&view=rev
Author:   snaiperis
Date:     2009-05-06 13:06:51 +0000 (Wed, 06 May 2009)

Log Message:
-----------
2009-05-06 16:05 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
  * harbour/contrib/rddsql/sqlbase.c
    ! fixed double memory freeing and GPF. Thanks valgrind!

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/rddsql/sqlbase.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From itamarlins at bol.com.br  Wed May  6 09:07:58 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Wed May  6 09:08:52 2009
Subject: [Harbour] Re: contrib blat Fail
References: <gtp8p3$5gs$1@ger.gmane.org> <23387728.post@talk.nabble.com>
	<18d502870905050650v2e6d84d8te42fa7641b739c9c@mail.gmail.com>
Message-ID: <gts24a$d60$1@ger.gmane.org>

Hi!
But see:
Maybe this line into blatwrp.c

HB_EXTERN_BEGIN

extern int cSend( char * szCmd );

HB_EXTERN_END

TIA,
Itamar M. Lins Jr.
"Viktor Szakts" <harbour.01@syenar.hu> 
escreveu na mensagem 
news:18d502870905050650v2e6d84d8te42fa7641b739c9c@mail.gmail.com...
It was always working for BCC, last fixes were targeting C++ mode only (MSVC 
by default).


Probably blat.lib is not specified or not generated for Itamar.
INSTALL has information on how to generate it by build process.



Brgds,
Viktor


On Tue, May 5, 2009 at 3:43 PM, sygecom 
<leonardo@sygecom.com.br> wrote:


Hi Itamar,

Try updating your SVN Harbour of the Viktor already corrected this error.

Leonardo Machado



Itamar Lins wrote:
>
> Hi!
> No possible use with bcc 5.5
>
> Unresolved external _cSend referenced  from
> D:\DEV\HARBOUR\LIB\HBBLAT.LIB|blatwrp
>
> TIA,
> Itamar M. Lins Jr.
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>


--
View this message in context: 
http://www.nabble.com/contrib-blat-Fail-tp23385817p23387728.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.


_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour 



From itamarlins at bol.com.br  Wed May  6 09:12:11 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Wed May  6 09:15:09 2009
Subject: [Harbour] Re: contrib blat Fail
References: <gtp8p3$5gs$1@ger.gmane.org>
	<23387728.post@talk.nabble.com><18d502870905050650v2e6d84d8te42fa7641b739c9c@mail.gmail.com>
	<gts24a$d60$1@ger.gmane.org>
Message-ID: <gts2c7$e23$1@ger.gmane.org>

Ok! now. Sygecom Tks!
External blat is necessary

Tks!
Itamar M. Lins Jr.

"Itamar Lins" <itamarlins@bol.com.br> escreveu 
na mensagem news:gts24a$d60$1@ger.gmane.org...
> Hi!
> But see:
> Maybe this line into blatwrp.c
>
> HB_EXTERN_BEGIN
>
> extern int cSend( char * szCmd );
>
> HB_EXTERN_END
>
> TIA,
> Itamar M. Lins Jr.
> "Viktor Szakts" <harbour.01@syenar.hu> 
> escreveu na mensagem 
> news:18d502870905050650v2e6d84d8te42fa7641b739c9c@mail.gmail.com...
> It was always working for BCC, last fixes were targeting C++ mode only 
> (MSVC by default).
>
>
> Probably blat.lib is not specified or not generated for Itamar.
> INSTALL has information on how to generate it by build process.
>
>
>
> Brgds,
> Viktor
>
>
> On Tue, May 5, 2009 at 3:43 PM, sygecom 
> <leonardo@sygecom.com.br> wrote:
>
>
> Hi Itamar,
>
> Try updating your SVN Harbour of the Viktor already corrected this error.
>
> Leonardo Machado
>
>
>
> Itamar Lins wrote:
>>
>> Hi!
>> No possible use with bcc 5.5
>>
>> Unresolved external _cSend referenced  from
>> D:\DEV\HARBOUR\LIB\HBBLAT.LIB|blatwrp
>>
>> TIA,
>> Itamar M. Lins Jr.
>>
>>
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>
>
>
> --
> View this message in context: 
> http://www.nabble.com/contrib-blat-Fail-tp23385817p23387728.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> 



From itamarlins at bol.com.br  Wed May  6 11:03:47 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Wed May  6 11:04:34 2009
Subject: [Harbour] Re: contrib blat Fail
References: <gtp8p3$5gs$1@ger.gmane.org> <23387728.post@talk.nabble.com>
	<18d502870905050650v2e6d84d8te42fa7641b739c9c@mail.gmail.com>
Message-ID: <gts8tg$61j$1@ger.gmane.org>

Hi!
No possible.
I get blat.lib
But no work with bcc 5.5

../../../../source/main/win/bcc/harbour.exe 
../../blatcls.prg -n1 -i../../../../include -q0 -w3 -es2 -kmo -l -gc3
bcc32.exe -I. -I../../../../include -q -tWM -w -w-sig- -Q -d -6 -O2 -OS -Ov  
-Oi -Oc    -c blatcls.c -oblatcls.obj
blatcls.c:
tlib.exe ..\..\..\..\lib\win\bcc\hbblat.lib /P64  @__lib__.tmp
TLIB 4.5 Copyright (c) 1987, 1999 Inprise Corporation
-+blatwrp.obj &
-+blatcls.obj &
-+
Warning: 'blatwrp' not found in library
Warning: 'blatcls' not found in library
mingw32-make.exe[3]: Leaving directory 
`D:/harbour/trunk/harbour/contrib/hbblat/win/bcc'
cmd.exe /c for %f in (..\..\lib\win\bcc\hbblat.lib) do copy %f 
D:\DEV\HARBOUR\lib

D:\harbour\trunk\harbour\contrib\hbblat>copy ..\..\lib\win\bcc\hbblat.lib 
D:\DEV\HARBOUR\lib
        1 arquivo(s) copiado(s).
cmd.exe /c for %f in (..\..\lib\win\bcc\hbblat.lib) do copy %f 
D:\DEV\HARBOUR\lib

D:\harbour\trunk\harbour\contrib\hbblat>copy ..\..\lib\win\bcc\hbblat.lib 
D:\DEV\HARBOUR\lib
        1 arquivo(s) copiado(s).
cmd.exe /c for %f in ( hbblat.ch  ) do copy %f D:\DEV\HARBOUR\include

D:\harbour\trunk\harbour\contrib\hbblat>copy hbblat.ch 
D:\DEV\HARBOUR\include
        1 arquivo(s) copiado(s).

My enviroment is:
HB_DIR_BLAT=G:\BLAT\BLAT262\FULL
HB_INC_BLAT=G:\BLAT\BLAT262\FULL\SOURCE
implib blat.lib blat.dll
copy blat.lib d:\dev\harbour\lib
hbmk2 blattest
hbmk: Processing configuration: D:\DEV\HARBOUR\BIN\hbmk.cfg
hbmk: Processing: hbblat.hbp
blattest.c:
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Error: Unresolved external '_cSend' referenced from 
D:\DEV\HARBOUR\LIB\HBBLAT.LIB|blatwrp


Tks!
Itamar M. Lins Jr. 



From harbour.01 at syenar.hu  Wed May  6 11:09:51 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May  6 11:09:56 2009
Subject: [Harbour] Re: contrib blat Fail
In-Reply-To: <gts8tg$61j$1@ger.gmane.org>
References: <gtp8p3$5gs$1@ger.gmane.org> <23387728.post@talk.nabble.com>
	<18d502870905050650v2e6d84d8te42fa7641b739c9c@mail.gmail.com>
	<gts8tg$61j$1@ger.gmane.org>
Message-ID: <18d502870905060809s3d9e01d1pde5538e2af94e75e@mail.gmail.com>

You're doing it unnecessary complicated and also wrong.Please read INSTALL
how to create proper blat.lib.

Brgds,
Viktor

On Wed, May 6, 2009 at 5:03 PM, Itamar Lins <itamarlins@bol.com.br> wrote:

> Hi!
> No possible.
> I get blat.lib
> But no work with bcc 5.5
>
> ../../../../source/main/win/bcc/harbour.exe
> ../../blatcls.prg -n1 -i../../../../include -q0 -w3 -es2 -kmo -l -gc3
> bcc32.exe -I. -I../../../../include -q -tWM -w -w-sig- -Q -d -6 -O2 -OS -Ov
> -Oi -Oc    -c blatcls.c -oblatcls.obj
> blatcls.c:
> tlib.exe ..\..\..\..\lib\win\bcc\hbblat.lib /P64  @__lib__.tmp
> TLIB 4.5 Copyright (c) 1987, 1999 Inprise Corporation
> -+blatwrp.obj &
> -+blatcls.obj &
> -+
> Warning: 'blatwrp' not found in library
> Warning: 'blatcls' not found in library
> mingw32-make.exe[3]: Leaving directory
> `D:/harbour/trunk/harbour/contrib/hbblat/win/bcc'
> cmd.exe /c for %f in (..\..\lib\win\bcc\hbblat.lib) do copy %f
> D:\DEV\HARBOUR\lib
>
> D:\harbour\trunk\harbour\contrib\hbblat>copy ..\..\lib\win\bcc\hbblat.lib
> D:\DEV\HARBOUR\lib
>        1 arquivo(s) copiado(s).
> cmd.exe /c for %f in (..\..\lib\win\bcc\hbblat.lib) do copy %f
> D:\DEV\HARBOUR\lib
>
> D:\harbour\trunk\harbour\contrib\hbblat>copy ..\..\lib\win\bcc\hbblat.lib
> D:\DEV\HARBOUR\lib
>        1 arquivo(s) copiado(s).
> cmd.exe /c for %f in ( hbblat.ch  ) do copy %f D:\DEV\HARBOUR\include
>
> D:\harbour\trunk\harbour\contrib\hbblat>copy hbblat.ch
> D:\DEV\HARBOUR\include
>        1 arquivo(s) copiado(s).
>
> My enviroment is:
> HB_DIR_BLAT=G:\BLAT\BLAT262\FULL
> HB_INC_BLAT=G:\BLAT\BLAT262\FULL\SOURCE
> implib blat.lib blat.dll
> copy blat.lib d:\dev\harbour\lib
> hbmk2 blattest
> hbmk: Processing configuration: D:\DEV\HARBOUR\BIN\hbmk.cfg
> hbmk: Processing: hbblat.hbp
> blattest.c:
> Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
> Error: Unresolved external '_cSend' referenced from
> D:\DEV\HARBOUR\LIB\HBBLAT.LIB|blatwrp
>
>
> Tks!
> Itamar M. Lins Jr.
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090506/abf93e17/attachment-0001.html
From mbelgrano at deltain.it  Wed May  6 11:16:23 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed May  6 11:16:49 2009
Subject: [Harbour] Re: contrib blat Fail
In-Reply-To: <18d502870905060809s3d9e01d1pde5538e2af94e75e@mail.gmail.com>
References: <gtp8p3$5gs$1@ger.gmane.org> <23387728.post@talk.nabble.com> 
	<18d502870905050650v2e6d84d8te42fa7641b739c9c@mail.gmail.com> 
	<gts8tg$61j$1@ger.gmane.org>
	<18d502870905060809s3d9e01d1pde5538e2af94e75e@mail.gmail.com>
Message-ID: <609353e70905060816t4e7d493ev883c4cdf12646966@mail.gmail.com>

Have you tried with
set HB_DIR_BLAT=D:\devel\blat262
and recompiling harbour from source

2009/5/6 Viktor Szak?ts <harbour.01@syenar.hu>

> You're doing it unnecessary complicated and also wrong.Please read INSTALL
> how to create proper blat.lib.
>
> Brgds,
> Viktor
>
>
> On Wed, May 6, 2009 at 5:03 PM, Itamar Lins <itamarlins@bol.com.br> wrote:
>
>> Hi!
>> No possible.
>> I get blat.lib
>> But no work with bcc 5.5
>>
>> ../../../../source/main/win/bcc/harbour.exe
>> ../../blatcls.prg -n1 -i../../../../include -q0 -w3 -es2 -kmo -l -gc3
>> bcc32.exe -I. -I../../../../include -q -tWM -w -w-sig- -Q -d -6 -O2 -OS
>> -Ov
>> -Oi -Oc    -c blatcls.c -oblatcls.obj
>> blatcls.c:
>> tlib.exe ..\..\..\..\lib\win\bcc\hbblat.lib /P64  @__lib__.tmp
>> TLIB 4.5 Copyright (c) 1987, 1999 Inprise Corporation
>> -+blatwrp.obj &
>> -+blatcls.obj &
>> -+
>> Warning: 'blatwrp' not found in library
>> Warning: 'blatcls' not found in library
>> mingw32-make.exe[3]: Leaving directory
>> `D:/harbour/trunk/harbour/contrib/hbblat/win/bcc'
>> cmd.exe /c for %f in (..\..\lib\win\bcc\hbblat.lib) do copy %f
>> D:\DEV\HARBOUR\lib
>>
>> D:\harbour\trunk\harbour\contrib\hbblat>copy ..\..\lib\win\bcc\hbblat.lib
>> D:\DEV\HARBOUR\lib
>>        1 arquivo(s) copiado(s).
>> cmd.exe /c for %f in (..\..\lib\win\bcc\hbblat.lib) do copy %f
>> D:\DEV\HARBOUR\lib
>>
>> D:\harbour\trunk\harbour\contrib\hbblat>copy ..\..\lib\win\bcc\hbblat.lib
>> D:\DEV\HARBOUR\lib
>>        1 arquivo(s) copiado(s).
>> cmd.exe /c for %f in ( hbblat.ch  ) do copy %f D:\DEV\HARBOUR\include
>>
>> D:\harbour\trunk\harbour\contrib\hbblat>copy hbblat.ch
>> D:\DEV\HARBOUR\include
>>        1 arquivo(s) copiado(s).
>>
>> My enviroment is:
>> HB_DIR_BLAT=G:\BLAT\BLAT262\FULL
>> HB_INC_BLAT=G:\BLAT\BLAT262\FULL\SOURCE
>> implib blat.lib blat.dll
>> copy blat.lib d:\dev\harbour\lib
>> hbmk2 blattest
>> hbmk: Processing configuration: D:\DEV\HARBOUR\BIN\hbmk.cfg
>> hbmk: Processing: hbblat.hbp
>> blattest.c:
>> Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
>> Error: Unresolved external '_cSend' referenced from
>> D:\DEV\HARBOUR\LIB\HBBLAT.LIB|blatwrp
>>
>>
>> Tks!
>> Itamar M. Lins Jr.
>>
>>
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>


-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090506/204c2fec/attachment.html
From itamarlins at bol.com.br  Wed May  6 11:23:56 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Wed May  6 11:24:46 2009
Subject: [Harbour] Re: Re: contrib blat Fail
References: <gtp8p3$5gs$1@ger.gmane.org>
	<23387728.post@talk.nabble.com><18d502870905050650v2e6d84d8te42fa7641b739c9c@mail.gmail.com><gts8tg$61j$1@ger.gmane.org>
	<18d502870905060809s3d9e01d1pde5538e2af94e75e@mail.gmail.com>
Message-ID: <gtsa38$aj7$1@ger.gmane.org>

Hi!
Thanks for response.
But, my enviroment is basead of install file.

--------------8<--------------
set HB_BUILD_IMPLIB=yes
set HB_DIR_BLAT=C:\blat
set HB_INC_BLAT=C:\blat\full\source
---------------->8--------------
My envar is:
HB_ARCHITECTURE=win
HB_BIN_INSTALL=D:\DEV\HARBOUR\bin
HB_BUILD_DLL=yes
HB_BUILD_IMPLIB=yes
HB_COMPILER=bcc
HB_DIR_BLAT=G:\BLAT\BLAT262\FULL
HB_DIR_GD=G:\GD\BIN
HB_DOC_INSTALL=D:\DEV\HARBOUR\doc
HB_DYNLIB=no
HB_INC_BLAT=G:\BLAT\BLAT262\FULL\SOURCE
HB_INC_GD=G:\GD\INCLUDE
HB_INC_INSTALL=D:\DEV\HARBOUR\include
HB_INSTALL_PREFIX=D:\DEV\HARBOUR
HB_LIB_INSTALL=D:\DEV\HARBOUR\lib
HB_PATH=D:\DEV\HARBOUR

Ps. HB_DYNLIB not found reference into install file.

Thanks,
Itamar M. Lins Jr. 



From itamarlins at bol.com.br  Wed May  6 11:51:05 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Wed May  6 11:51:59 2009
Subject: [Harbour] Re: Re: contrib blat Fail
References: <gtp8p3$5gs$1@ger.gmane.org> <23387728.post@talk.nabble.com>
	<18d502870905050650v2e6d84d8te42fa7641b739c9c@mail.gmail.com>
	<gts8tg$61j$1@ger.gmane.org><18d502870905060809s3d9e01d1pde5538e2af94e75e@mail.gmail.com>
	<609353e70905060816t4e7d493ev883c4cdf12646966@mail.gmail.com>
Message-ID: <gtsbm5$gko$1@ger.gmane.org>

Hi!
g:\blat\blat262
tree /f
docs
      ChangeLog.txt
      changes-194.txt
      credits.html
      file_id.diz
      license.txt
      readme.txt
      syntax.html
      syntax.txt
   
   cgi
           blat-cgi.htm
           blat-fail.htm
           blat-success.htm

full
       blat.dll
       blat.exe
       blat.lib
       blatx.lib
    
    source
           attach.cpp
           base64.cpp
           BLAT.CPP
           blat.h
           BLAT.RC
           blat.sln
           blat.vcproj
           blatcgi.cpp
           blatdllvs2005.sln
           blatvs2005.sln
           blatvs2005.vcproj
           bldhdrs.cpp
           buf.h
           ChangeLog.txt
           filetype.cpp
           gensock.cpp
           gensock.h
           gssapi_generic.h
           gssfuncs.cpp
           gssfuncs.h
           makeargv.cpp
           MAKEFILE
           makefile.g32
           makefile.w32
           md5.c
           md5.h
           mime.cpp
           msgbody.cpp
           OPTIONS.CPP
           parsing.cpp
           reg.cpp
           resource.h
           sendnntp.cpp
           sendsmtp.cpp
           server.cpp
           unicode.cpp
           uuencode.cpp
           win-mac.h
           winfile.h
           yenc.cpp
        
        BF
               BLAT.H
        
        BL
               BLAT.H
        
        blatdll
               blat.def
               BLAT.RC
               blatdll.vcproj
               blatdllvs2005.vcproj
               resource.h
        
        BS
               BLAT.H
        
        BY
               BLAT.H
        
        GSSAPI
                gssapi.h

P.S.:blat.lib is obtained with implib blat.lib blat.dll

Tks!
Itamar M. Lins Jr. 



From harbour.01 at syenar.hu  Wed May  6 11:52:38 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May  6 11:52:43 2009
Subject: [Harbour] Re: Re: contrib blat Fail
In-Reply-To: <gtsa38$aj7$1@ger.gmane.org>
References: <gtp8p3$5gs$1@ger.gmane.org> <23387728.post@talk.nabble.com>
	<18d502870905050650v2e6d84d8te42fa7641b739c9c@mail.gmail.com>
	<gts8tg$61j$1@ger.gmane.org>
	<18d502870905060809s3d9e01d1pde5538e2af94e75e@mail.gmail.com>
	<gtsa38$aj7$1@ger.gmane.org>
Message-ID: <18d502870905060852y608e70fdl46c157334be54a8f@mail.gmail.com>

On Wed, May 6, 2009 at 5:23 PM, Itamar Lins <itamarlins@bol.com.br> wrote:

> Hi!
> Thanks for response.
> But, my enviroment is basead of install file.


Please verify your HB_DIR_BLAT envvar, it's pointing to the
wrong place. Also HB_DIR_GD is wrong.


> --------------8<--------------
> set HB_BUILD_IMPLIB=yes
> set HB_DIR_BLAT=C:\blat
> set HB_INC_BLAT=C:\blat\full\source
> ---------------->8--------------
> My envar is:
> HB_ARCHITECTURE=win
> HB_BIN_INSTALL=D:\DEV\HARBOUR\bin
> HB_BUILD_DLL=yes
> HB_BUILD_IMPLIB=yes
> HB_COMPILER=bcc
> HB_DIR_BLAT=G:\BLAT\BLAT262\FULL
> HB_DIR_GD=G:\GD\BIN
> HB_DOC_INSTALL=D:\DEV\HARBOUR\doc
> HB_DYNLIB=no
> HB_INC_BLAT=G:\BLAT\BLAT262\FULL\SOURCE
> HB_INC_GD=G:\GD\INCLUDE
> HB_INC_INSTALL=D:\DEV\HARBOUR\include
> HB_INSTALL_PREFIX=D:\DEV\HARBOUR
> HB_LIB_INSTALL=D:\DEV\HARBOUR\lib
> HB_PATH=D:\DEV\HARBOUR
>
> Ps. HB_DYNLIB not found reference into install file.


It's not a public option, 'HB_BUILD_DLL=yes' is enough
to build Harbour .dlls. Directly setting HB_DYNLIB can
cause unexpected results.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090506/f7e4f990/attachment.html
From harbour.01 at syenar.hu  Wed May  6 12:04:56 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed May  6 12:05:06 2009
Subject: [Harbour] Re: Re: contrib blat Fail
In-Reply-To: <gtsbm5$gko$1@ger.gmane.org>
References: <gtp8p3$5gs$1@ger.gmane.org> <23387728.post@talk.nabble.com>
	<18d502870905050650v2e6d84d8te42fa7641b739c9c@mail.gmail.com>
	<gts8tg$61j$1@ger.gmane.org><18d502870905060809s3d9e01d1pde5538e2af94e75e@mail.gmail.com>
	<609353e70905060816t4e7d493ev883c4cdf12646966@mail.gmail.com>
	<gtsbm5$gko$1@ger.gmane.org>
Message-ID: <97E8E093-2366-456E-B8B3-F37F36E2EDBA@syenar.hu>

If you watch the examples in INSTALL, HB_DIR_* always
have to point to the *root dir* of external libs. Maybe
I'll make that clear with some additional notes if it's
not apparent. IOW, you mustn't add any internal subdirs
to these settings. Just set them to the root and Harbour
build process will find the required .lib or .dlls,
whichever required for a given situation.

You can look into bin/postinst.bat to see the actual logic.

In your case Harbour tries to find C:\blat\blat262\full\full\blat.dll
which it obviously cannot find.

You'll have to correct your settings.

Brgds,
Viktor

On 2009.05.06., at 17:51, Itamar Lins wrote:

> Hi!
> g:\blat\blat262
> tree /f
> ????docs
> ?   ?   ChangeLog.txt
> ?   ?   changes-194.txt
> ?   ?   credits.html
> ?   ?   file_id.diz
> ?   ?   license.txt
> ?   ?   readme.txt
> ?   ?   syntax.html
> ?   ?   syntax.txt
> ?   ?
> ?   ????cgi
> ?           blat-cgi.htm
> ?           blat-fail.htm
> ?           blat-success.htm
> ?
> ????full
>    ?   blat.dll
>    ?   blat.exe
>    ?   blat.lib
>    ?   blatx.lib
>    ?
>    ????source
>        ?   attach.cpp
>        ?   base64.cpp
>        ?   BLAT.CPP
>        ?   blat.h
>        ?   BLAT.RC
>        ?   blat.sln
>        ?   blat.vcproj
>        ?   blatcgi.cpp
>        ?   blatdllvs2005.sln
>        ?   blatvs2005.sln
>        ?   blatvs2005.vcproj
>        ?   bldhdrs.cpp
>        ?   buf.h
>        ?   ChangeLog.txt
>        ?   filetype.cpp
>        ?   gensock.cpp
>        ?   gensock.h
>        ?   gssapi_generic.h
>        ?   gssfuncs.cpp
>        ?   gssfuncs.h
>        ?   makeargv.cpp
>        ?   MAKEFILE
>        ?   makefile.g32
>        ?   makefile.w32
>        ?   md5.c
>        ?   md5.h
>        ?   mime.cpp
>        ?   msgbody.cpp
>        ?   OPTIONS.CPP
>        ?   parsing.cpp
>        ?   reg.cpp
>        ?   resource.h
>        ?   sendnntp.cpp
>        ?   sendsmtp.cpp
>        ?   server.cpp
>        ?   unicode.cpp
>        ?   uuencode.cpp
>        ?   win-mac.h
>        ?   winfile.h
>        ?   yenc.cpp
>        ?
>        ????BF
>        ?       BLAT.H
>        ?
>        ????BL
>        ?       BLAT.H
>        ?
>        ????blatdll
>        ?       blat.def
>        ?       BLAT.RC
>        ?       blatdll.vcproj
>        ?       blatdllvs2005.vcproj
>        ?       resource.h
>        ?
>        ????BS
>        ?       BLAT.H
>        ?
>        ????BY
>        ?       BLAT.H
>        ?
>        ????GSSAPI
>                gssapi.h
>
> P.S.:blat.lib is obtained with implib blat.lib blat.dll
>
> Tks!
> Itamar M. Lins Jr.
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From snaiperis at users.sourceforge.net  Wed May  6 12:12:51 2009
From: snaiperis at users.sourceforge.net (snaiperis@users.sourceforge.net)
Date: Wed May  6 12:12:56 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10997] trunk/harbour
Message-ID: <E1M1jjn-00005f-3W@74yxhf1.ch3.sourceforge.com>

Revision: 10997
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10997&view=rev
Author:   snaiperis
Date:     2009-05-06 16:12:50 +0000 (Wed, 06 May 2009)

Log Message:
-----------
2009-05-06 19:10 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
  * harbour/contrib/hbole/olecore.c
    ! fixed assign method return value
    * modified hb_oleVariantToItem() to save stack's return item

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbole/olecore.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dbtopas at dbtopas.lt  Wed May  6 12:13:14 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed May  6 12:15:16 2009
Subject: [Harbour] error in hbwin ole with msvc
In-Reply-To: <49F24BDA.9000902@fsgiudice.com>
References: <49C6ACF1.4080407@fsgiudice.com>	<18d502870903230236r1abc2715ueab289f7d541cccd@mail.gmail.com>	<49C76F6D.6050205@fsgiudice.com>	<18d502870903230430y4c4a6eb5t7a5122b5dd50184b@mail.gmail.com>	<49CA1CA4.2050607@dbtopas.lt>	<18d502870903250637j3cbe7f76o82a72c24565bd396@mail.gmail.com>	<49CA346E.7080409@dbtopas.lt>	<20090326201107.GA14874@uran.home.aster.pl>	<49DCAA16.2060306@dbtopas.lt>	<49DCAD88.4080006@fsgiudice.com>	<49F23769.6070105@dbtopas.lt>	<49F23806.4080209@fsgiudice.com>	<49F23E88.1060408@fsgiudice.com>	<49F24706.6070309@dbtopas.lt>	<49F24979.9070101@fsgiudice.com>
	<49F24BDA.9000902@fsgiudice.com>
Message-ID: <4A01B71A.7030400@dbtopas.lt>

Hi,


Francesco Saverio Giudice wrote:
> Just a small error:
> ? :Birthday := CToD( "23/05/2006" )
> Returns NIL, instead it should returns assigned date
> Think to
> ? dDate := :Birthday := CToD( "23/05/2006" )
> in this case dDate is Nil.
> 
> ? :Birthday                       // here it should return a date
> correctly returns the assigned date.


Fixed.


Regards,
Mindaugas
From itamarlins at bol.com.br  Wed May  6 12:54:11 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Wed May  6 12:54:57 2009
Subject: [Harbour] Re: Re: Re: contrib blat Fail
References: <gtp8p3$5gs$1@ger.gmane.org>
	<23387728.post@talk.nabble.com><18d502870905050650v2e6d84d8te42fa7641b739c9c@mail.gmail.com><gts8tg$61j$1@ger.gmane.org><18d502870905060809s3d9e01d1pde5538e2af94e75e@mail.gmail.com><609353e70905060816t4e7d493ev883c4cdf12646966@mail.gmail.com><gtsbm5$gko$1@ger.gmane.org>
	<97E8E093-2366-456E-B8B3-F37F36E2EDBA@syenar.hu>
Message-ID: <gtsfce$u2m$1@ger.gmane.org>

Hi!
Resolved.
blat works with bcc 5.5
My fault.

Tks a lot!
Itamar M. Lins Jr.



From harbour.01 at syenar.hu  Wed May  6 13:12:49 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May  6 13:12:55 2009
Subject: [Harbour] hbmk2 .po generation real life testing - speed issue
Message-ID: <18d502870905061012u10e881adp81e920eedadac0a8@mail.gmail.com>

Hi Przemek,
I'm testing .po generation in hbmk2. This project has more than 500
source files with translatable texts, that equals to the amount of .pots
to be merged. There are 8 languages currently generated.

What I noticed is that POTMerge() -> LoadPOTFiles() -> probably
__i18n_potArrayJoin() gets slower and slower by processing .pot
files which makes processing quite long, about 10 minutes on my
machine.

Do you think it's possible to speed that up? It may be an option to
merge POTMerge() and AutoTrans() into one, as they are called next
to each other in this scenario. ( That may also need reverse logic
to retain existing translations. )

You can test the same effect with hbi18n probably as above functions
came from it. I can send you the .pot files if it helps.

This is an issue even if we manage to solve incremental .po updates,
as it happens for every fresh rebuild.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090506/ca7863d6/attachment.html
From vszakats at users.sourceforge.net  Wed May  6 14:15:05 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May  6 14:15:11 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10998] trunk/harbour
Message-ID: <E1M1le5-0002Ze-N5@c3vjzd1.ch3.sourceforge.com>

Revision: 10998
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10998&view=rev
Author:   vszakats
Date:     2009-05-06 18:15:04 +0000 (Wed, 06 May 2009)

Log Message:
-----------
2009-05-06 20:14 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
  * utils/hbmk2/hbmk2.hu_HU.po
    % Optimize to do only one .pot -> .po merge per session 
      (was one merge per target language)
    + Added screen feedback for .po/.hbl related operations.
    % Don't do .po rebuild if no source file has changed.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.po
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From ranier at cultura.com.br  Wed May  6 14:14:52 2009
From: ranier at cultura.com.br (Ranier Vilela)
Date: Wed May  6 14:15:15 2009
Subject: [Harbour] Error in Harbour generation with MSVC (again)
In-Reply-To: <23405168.post@talk.nabble.com>
References: <23405168.post@talk.nabble.com>
Message-ID: <4A01D39C.5020304@cultura.com.br>

Kleyber escreveu:
> Hi,
>
> I've upgraded my Harbour with tha last revision, but when I try to compile
> all with make_gnu (using MSVC) it gives me this errors:
>
> make (e=193): Error 193
> make.exe[3]: *** [expropt.obj] Error 193
> make.exe[3]: Leaving directory 'C:/harbour/source/common/win/msvc'
> make.exe[2]: *** [descend] Error 2
> make.exe[2] Leaving directory 'C:/harbour/source/common'
> make.exe[1]: *** [common.inst] Error 2
> make.exe[1]: Leaving directory 'C:/harbour/source'
> make.exe: *** [source.inst] Error 2
>
> Where am I wrong?
>
> TIA
>
> Kleyber
>   
Try with gnu-make vers 3.81.

Best regards,

Ranier Vilela
From harbour.01 at syenar.hu  Wed May  6 14:23:06 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed May  6 14:23:13 2009
Subject: [Harbour] Re: hbmk2 .po generation real life testing - speed issue
In-Reply-To: <18d502870905061012u10e881adp81e920eedadac0a8@mail.gmail.com>
References: <18d502870905061012u10e881adp81e920eedadac0a8@mail.gmail.com>
Message-ID: <4C48E8B4-FB87-437B-8771-97C7780B26E3@syenar.hu>

One thing I did is to do only one merge per build, as opposed
to one for each language, but that still leaves it quite slow,
especially in incremental mode.

Brgds,
Viktor

On 2009.05.06., at 19:12, Viktor Szak?ts wrote:

> Hi Przemek,
>
> I'm testing .po generation in hbmk2. This project has more than 500
> source files with translatable texts, that equals to the amount  
> of .pots
> to be merged. There are 8 languages currently generated.
>
> What I noticed is that POTMerge() -> LoadPOTFiles() -> probably
> __i18n_potArrayJoin() gets slower and slower by processing .pot
> files which makes processing quite long, about 10 minutes on my
> machine.
>
> Do you think it's possible to speed that up? It may be an option to
> merge POTMerge() and AutoTrans() into one, as they are called next
> to each other in this scenario. ( That may also need reverse logic
> to retain existing translations. )
>
> You can test the same effect with hbi18n probably as above functions
> came from it. I can send you the .pot files if it helps.
>
> This is an issue even if we manage to solve incremental .po updates,
> as it happens for every fresh rebuild.
>
> Brgds,
> Viktor
>

From druzus at acn.waw.pl  Wed May  6 14:35:19 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed May  6 14:27:06 2009
Subject: [Harbour] hbmk2 .po generation real life testing - speed issue
In-Reply-To: <18d502870905061012u10e881adp81e920eedadac0a8@mail.gmail.com>
References: <18d502870905061012u10e881adp81e920eedadac0a8@mail.gmail.com>
Message-ID: <20090506183519.GA16613@uran.home.aster.pl>

On Wed, 06 May 2009, Szak?ts Viktor wrote:

Hi,

> I'm testing .po generation in hbmk2. This project has more than 500
> source files with translatable texts, that equals to the amount of .pots
> to be merged. There are 8 languages currently generated.
> What I noticed is that POTMerge() -> LoadPOTFiles() -> probably
> __i18n_potArrayJoin() gets slower and slower by processing .pot
> files which makes processing quite long, about 10 minutes on my
> machine.
> Do you think it's possible to speed that up? It may be an option to
> merge POTMerge() and AutoTrans() into one, as they are called next
> to each other in this scenario. ( That may also need reverse logic
> to retain existing translations. )

It should not give noticeable improvement. If you try to execute autotrans
for each .pot file then maybe in the most optimistic case you will reduce
the time by half - IMHO not worth to make the internal logic more complicated
then necessary. If you first merge all .pot files and then call autotrans
for such merged new and old file then it can give rather very small
improvement which can be reduced if you compile the old .pot file to .hbl
and use it instead of the new one.
Merging all .pot file into single one before executing autotrans seems to
be optimal solution and can be easy adopted work with -j+<file> compile
time switch if we add it. -j+<file> means add new translation to the ones
which already exist in <file> what should finally give the same translation
set as after merging all .pot file generated for each .prg module.

Probably the one thing which can give important speed improvement when
you merge many .pot files is reusing hIndex in __I18N_POTARRAYJOIN() for
each next file. This can be done in few lines and I'll commit it ASAP.
Please check how it will change the time of:
   hb18n -m *.pot -oresult.po
executed against your 500 .pot files.
After this modification it will be hard to find sth what can reduce
the cost by better algorithm. We can still reduce it a little bit, f.e.
by replacing some [AH]Clone() with simple assign or reusing some already
decoded data but it will not reduce the cost level.
Anyhow the whole process can be still improved by rewriting it in C using
different internal structures. The question is if we want to make it.
Current .prg code give us a chance that we will find developers who add
some extensions like tools for manual translations of .pot files by users.
Just simply not everyone knows C.

best regards,
Przemek
From druzus at users.sourceforge.net  Wed May  6 14:32:18 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Wed May  6 14:32:23 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10999] trunk/harbour
Message-ID: <E1M1luk-00011P-Ep@dn4whf1.ch3.sourceforge.com>

Revision: 10999
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10999&view=rev
Author:   druzus
Date:     2009-05-06 18:32:17 +0000 (Wed, 06 May 2009)

Log Message:
-----------
2009-05-06 20:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/utils/hbi18n/hbi18n.prg
    % added support for optional reusing hIndex table in repeated calls
      to __I18N_potArrayJoin() with the same aTrans array.

  * harbour/source/rtl/hbi18n2.prg
    % reuse hIndex table in repeated calls to __I18N_potArrayJoin()

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/rtl/hbi18n2.prg
    trunk/harbour/utils/hbi18n/hbi18n.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Wed May  6 14:52:11 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Wed May  6 14:52:18 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11000] trunk/harbour
Message-ID: <E1M1mDz-0001O0-2y@dn4whf1.ch3.sourceforge.com>

Revision: 11000
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11000&view=rev
Author:   druzus
Date:     2009-05-06 18:52:08 +0000 (Wed, 06 May 2009)

Log Message:
-----------
2009-05-06 21:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/mpkg_deb.sh
    * accept also slang1 for GTSLN

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/mpkg_deb.sh


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Wed May  6 15:31:37 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May  6 15:31:43 2009
Subject: [Harbour] hbmk2 .po generation real life testing - speed issue
In-Reply-To: <20090506183519.GA16613@uran.home.aster.pl>
References: <18d502870905061012u10e881adp81e920eedadac0a8@mail.gmail.com>
	<20090506183519.GA16613@uran.home.aster.pl>
Message-ID: <18d502870905061231u7e9a47f2i5f4e158dfd59cbf1@mail.gmail.com>

Hi Przemek,

> Do you think it's possible to speed that up? It may be an option to
> > merge POTMerge() and AutoTrans() into one, as they are called next
> > to each other in this scenario. ( That may also need reverse logic
> > to retain existing translations. )
>
> It should not give noticeable improvement. If you try to execute autotrans
> for each .pot file then maybe in the most optimistic case you will reduce
> the time by half - IMHO not worth to make the internal logic more
> complicated
> then necessary. If you first merge all .pot files and then call autotrans
> for such merged new and old file then it can give rather very small
> improvement which can be reduced if you compile the old .pot file to .hbl
> and use it instead of the new one.
> Merging all .pot file into single one before executing autotrans seems to
> be optimal solution and can be easy adopted work with -j+<file> compile
> time switch if we add it. -j+<file> means add new translation to the ones
> which already exist in <file> what should finally give the same translation
> set as after merging all .pot file generated for each .prg module.


Sounds like a useful option. There is one problem again though:
Incremental builds. In this mode -j+ would only create .pots for files
actually recompiled, while we'd need the full set in order to make
it work with current autotrans logic. Here maybe reversing the logic
so that existing .po becomes the main input and merged .pots are
processed into the existing one by adding new items, and optionally
deleting no longer existing items, could give better results.


> Probably the one thing which can give important speed improvement when
> you merge many .pot files is reusing hIndex in __I18N_POTARRAYJOIN() for
> each next file. This can be done in few lines and I'll commit it ASAP.
> Please check how it will change the time of:
>   hb18n -m *.pot -oresult.po
> executed against your 500 .pot files.


I've retested hbmk2 (after applying your change to it) and it dramatically
increased performance, many thanks for the quick tweak. Now it's usable
for full rebuilds, but we'd still need to do something about incremental
builds, the delay is too high (extra ~15s) for simple rebuilds, even if
only
source file has changed.


> After this modification it will be hard to find sth what can reduce
> the cost by better algorithm. We can still reduce it a little bit, f.e.
> by replacing some [AH]Clone() with simple assign or reusing some already
> decoded data but it will not reduce the cost level.
> Anyhow the whole process can be still improved by rewriting it in C using
> different internal structures. The question is if we want to make it.
> Current .prg code give us a chance that we will find developers who add
> some extensions like tools for manual translations of .pot files by users.
> Just simply not everyone knows C.


See my above thoughs. Do you think it's possible to do the 'reverse'
logic I was referring to? To put it simply, I'd like to be able to update
my full .po (containing translation) with one simple .pot file. In this
mode only new strings should be added. In another (full-sync) mode,
which can only occure with merged .pot files, deleted items are
also dropped (this is basically what we already have). So what we'd
need is a new method to update .po with one source .pot.

[ Here the compromise is that the .po file will contain even deleted
strings until we don't issue a full sync, but in practice this seems to
be okay to me. ]

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090506/332d9855/attachment.html
From harbour.01 at syenar.hu  Wed May  6 15:35:12 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May  6 15:35:17 2009
Subject: [Harbour] hbmk2 .po generation real life testing - speed issue
In-Reply-To: <18d502870905061231u7e9a47f2i5f4e158dfd59cbf1@mail.gmail.com>
References: <18d502870905061012u10e881adp81e920eedadac0a8@mail.gmail.com>
	<20090506183519.GA16613@uran.home.aster.pl>
	<18d502870905061231u7e9a47f2i5f4e158dfd59cbf1@mail.gmail.com>
Message-ID: <18d502870905061235g270c70cfs9f7e498565c24d48@mail.gmail.com>

>
> After this modification it will be hard to find sth what can reduce
>> the cost by better algorithm. We can still reduce it a little bit, f.e.
>> by replacing some [AH]Clone() with simple assign or reusing some already
>> decoded data but it will not reduce the cost level.
>> Anyhow the whole process can be still improved by rewriting it in C using
>> different internal structures. The question is if we want to make it.
>> Current .prg code give us a chance that we will find developers who add
>> some extensions like tools for manual translations of .pot files by users.
>> Just simply not everyone knows C.
>
>
Ops forgot to answer to your thoughts above: [A|H]Clone idea also
looks nice but I also agree that rewriting this to C might not be a good
idea
at this point yet. If the feature set has matured though, it's also an
option. BTW I don't think too many people would tinker with this code
even now.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090506/1b67ec60/attachment.html
From vszakats at users.sourceforge.net  Wed May  6 15:37:40 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May  6 15:37:45 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11001] trunk/harbour
Message-ID: <E1M1mw0-0000N9-JR@3kljzd1.ch3.sourceforge.com>

Revision: 11001
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11001&view=rev
Author:   vszakats
Date:     2009-05-06 19:37:39 +0000 (Wed, 06 May 2009)

Log Message:
-----------
2009-05-06 21:35 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    % Applied __I18N_potArrayJoin() tweak to embedded LoadPOTFiles()
      function. This hugely boosts .pot merge performance for large 
      number of these files.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From ranier at cultura.com.br  Wed May  6 15:46:44 2009
From: ranier at cultura.com.br (Ranier Vilela)
Date: Wed May  6 15:47:51 2009
Subject: [Harbour] gtwvt screen ugly in 800x600
Message-ID: <4A01E924.1060806@cultura.com.br>

I?m workaround this... but not sucessful yet.

GTWVT (harbour 1.0.1 works fine)
GTWVT (harbour 1.1.0 rev 10926)

1. Screen ugly in 800x600 modes (bad dotted lines)
Init window with FONTWITDH = 9 and FONTSIZE = 21, despite DEFAULTS are 
10 and 20.

In PRG calling
Hb_GTInfo( HB_GTI_FONTWIDTH, nWIDTH )  // nWIDTH = 10
Hb_GTInfo( HB_GTI_FONTSIZE, nHEIGHT ) // nHEIGHT = 20

FONTWIDTH correct set to 10
FONTSIZE doesn?t set to 20, remains 21.

2. Window title doesn?t modify with call above:
Hb_GTInfo( HB_GTI_WINTITLE, sTITLE ) // sTITLE = "New Title for Windows"

Best regards,

Ranier Vilela
From bedipritpal at hotmail.com  Wed May  6 16:18:39 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed May  6 16:18:44 2009
Subject: [Harbour] Scanner Manipulation Library
Message-ID: <23414688.post@talk.nabble.com>


Hello All

I am looking for a librray to acquire images from 
TWAIN compliant scanners and need to display them
on GTWVT|WVG window. 

Before I start googling it seems better to know 
about your experiences.

Thanks in advance.

Regards
Pritpal Bedi

PS : FREE or COMMERCIAL, both will do.
-- 
View this message in context: http://www.nabble.com/Scanner-Manipulation-Library-tp23414688p23414688.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Wed May  6 18:27:32 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed May  6 18:28:00 2009
Subject: [Harbour] Scanner Manipulation Library
In-Reply-To: <23414688.post@talk.nabble.com>
References: <23414688.post@talk.nabble.com>
Message-ID: <609353e70905061527j40a8826sfc41e210979880ad@mail.gmail.com>

I am using in a vb.net project?atalasoft Dotimage Document Imaging
Toolkits for .NET
Multipage PDF WITH Annotations Support AND OCR
Thanks to Dotimage my application recognise barcode on scanned page
and made an  automatic archiving
Near perfect but high licenze price

in a small project i have used
http://sourceforge.net/projects/twainnet/ basic function not
comparable to DOtimage


In my clipboard i have also this link
http://sourceforge.net/projects/twain-dsm/
http://sourceforge.net/projects/scantwain/


2009/5/6 Pritpal Bedi <bedipritpal@hotmail.com>
>
> Hello All
>
> I am looking for a librray to acquire images from
> TWAIN compliant scanners and need to display them
> on GTWVT|WVG window.
>
> Before I start googling it seems better to know
> about your experiences.
>
> Thanks in advance.
>
> Regards
> Pritpal Bedi
>
> PS : FREE or COMMERCIAL, both will do.
> --
> View this message in context: http://www.nabble.com/Scanner-Manipulation-Library-tp23414688p23414688.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour



--
Massimo Belgrano
From info at fsgiudice.com  Wed May  6 19:16:49 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed May  6 19:16:59 2009
Subject: [Harbour] error in hbwin ole with msvc
In-Reply-To: <4A01B71A.7030400@dbtopas.lt>
References: <49C6ACF1.4080407@fsgiudice.com>	<18d502870903230236r1abc2715ueab289f7d541cccd@mail.gmail.com>	<49C76F6D.6050205@fsgiudice.com>	<18d502870903230430y4c4a6eb5t7a5122b5dd50184b@mail.gmail.com>	<49CA1CA4.2050607@dbtopas.lt>	<18d502870903250637j3cbe7f76o82a72c24565bd396@mail.gmail.com>	<49CA346E.7080409@dbtopas.lt>	<20090326201107.GA14874@uran.home.aster.pl>	<49DCAA16.2060306@dbtopas.lt>	<49DCAD88.4080006@fsgiudice.com>	<49F23769.6070105@dbtopas.lt>	<49F23806.4080209@fsgiudice.com>	<49F23E88.1060408@fsgiudice.com>	<49F24706.6070309@dbtopas.lt>	<49F24979.9070101@fsgiudice.com>	<49F24BDA.9000902@fsgiudice.com>
	<4A01B71A.7030400@dbtopas.lt>
Message-ID: <4A021A61.1000408@fsgiudice.com>

Hi.

Il 06/05/2009 18.13, Mindaugas Kavaliauskas ha scritto:
> 
> Fixed.
> 
Thank you.

Best regards,
Francesco
From vszakats at users.sourceforge.net  Thu May  7 02:17:22 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu May  7 02:17:28 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11002] trunk/harbour
Message-ID: <E1M1wv4-0006NS-Qy@bj8yhf1.ch3.sourceforge.com>

Revision: 11002
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11002&view=rev
Author:   vszakats
Date:     2009-05-07 06:17:21 +0000 (Thu, 07 May 2009)

Log Message:
-----------
2009-05-07 08:16 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
  * utils/hbmk2/hbmk2.hu_HU.po
    % LoadPOTFiles() loop optimized. (debug condition removed,
      initializing aTrans manually, moved one assigment.)
    * Tweaked a few message texts.
    + Added support for xhb compatible platform macros.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.po
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Thu May  7 02:56:11 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu May  7 02:56:16 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11003] trunk/harbour
Message-ID: <E1M1xWd-0007qO-Nq@c3vjzd1.ch3.sourceforge.com>

Revision: 11003
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11003&view=rev
Author:   vszakats
Date:     2009-05-07 06:56:10 +0000 (Thu, 07 May 2009)

Log Message:
-----------
2009-05-07 08:55 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/tget.prg
    + Added TIMESTAMP support for GETs.
    % Optimizations using SWITCH and FOR EACH.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/rtl/tget.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From M.Horodyski at pzuzycie.com.pl  Thu May  7 03:38:52 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu May  7 03:39:01 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10991] trunk/harbour
In-Reply-To: <20090506090312.GA20047@uran.home.aster.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C95022E1F30@PINK.zycie.pzu>

>-----Original Message-----
>From: Przemyslaw Czerpak [mailto:druzus@acn.waw.pl] 
>Sent: Wednesday, May 06, 2009 11:03 AM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] SF.net SVN: harbour-project:[10991] 
>trunk/harbour
>
>On Wed, 06 May 2009, vszakats@users.sourceforge.net wrote:
>
>Hi,
>
>> Log Message:
>> -----------
>> 2009-05-06 09:18 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>>   * source/vm/Makefile
>>     ! Disabled HB_HVM_ALL for owatcom/win compiler.
>>       The compiler hangs in hvmall.c (Reported by Marek Horodyski).
>>       Please make tests on other platforms whether it does the same.
>
>It does not hang. At least 1.8 I tested with Wine. It only 
>needs a lot of time to finish compilation. On slow computer it 
>can be more then an hour. Probably due to i+ in optimization 
>flags but I haven't tested it.

You are right, it not hang. AMD Athlon 64 3000+ 1800 Mhz with 1Gb Ram
and fast ram.
During the compilation takes 1 hour, then moves on. It looks like a
standing position on one instruction.
Very strange. 

Regards,
Marek Horodyski
From mbelgrano at deltain.it  Thu May  7 04:20:50 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu May  7 04:21:16 2009
Subject: [Harbour] Scanner Manipulation Library
In-Reply-To: <609353e70905061527j40a8826sfc41e210979880ad@mail.gmail.com>
References: <23414688.post@talk.nabble.com>
	<609353e70905061527j40a8826sfc41e210979880ad@mail.gmail.com>
Message-ID: <609353e70905070120x497b3728g6e67c98e288b6570@mail.gmail.com>

In Windows imaging applications, the most used API for scanning is
TWAIN www.twain.org.


2009/5/7 Massimo Belgrano <mbelgrano@deltain.it>:
> I am using in a vb.net project?atalasoft Dotimage Document Imaging
> Toolkits for .NET
> Multipage PDF WITH Annotations Support AND OCR
> Thanks to Dotimage my application recognise barcode on scanned page
> and made an ?automatic archiving
> Near perfect but high licenze price
>
> in a small project i have used
> http://sourceforge.net/projects/twainnet/ basic function not
> comparable to DOtimage
>
>
> In my clipboard i have also this link
> http://sourceforge.net/projects/twain-dsm/
> http://sourceforge.net/projects/scantwain/
>
>
> 2009/5/6 Pritpal Bedi <bedipritpal@hotmail.com>
>>
>> Hello All
>>
>> I am looking for a librray to acquire images from
>> TWAIN compliant scanners and need to display them
>> on GTWVT|WVG window.
>>
>> Before I start googling it seems better to know
>> about your experiences.
>>
>> Thanks in advance.
>>
>> Regards
>> Pritpal Bedi
>>
>> PS : FREE or COMMERCIAL, both will do.
>> --
>> View this message in context: http://www.nabble.com/Scanner-Manipulation-Library-tp23414688p23414688.html
>> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
>
> --
> Massimo Belgrano
>



-- 
Massimo Belgrano
From druzus at acn.waw.pl  Thu May  7 06:12:57 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May  7 06:04:40 2009
Subject: [Harbour] hbmk2 .po generation real life testing - speed issue
In-Reply-To: <18d502870905061231u7e9a47f2i5f4e158dfd59cbf1@mail.gmail.com>
References: <18d502870905061012u10e881adp81e920eedadac0a8@mail.gmail.com>
	<20090506183519.GA16613@uran.home.aster.pl>
	<18d502870905061231u7e9a47f2i5f4e158dfd59cbf1@mail.gmail.com>
Message-ID: <20090507101257.GA9690@uran.home.aster.pl>

On Wed, 06 May 2009, Szak?ts Viktor wrote:

Hi,

> Sounds like a useful option. There is one problem again though:
> Incremental builds. In this mode -j+ would only create .pots for files
> actually recompiled, while we'd need the full set in order to make
> it work with current autotrans logic. Here maybe reversing the logic
> so that existing .po becomes the main input and merged .pots are
> processed into the existing one by adding new items, and optionally
> deleting no longer existing items, could give better results.
[...]
> See my above thoughs. Do you think it's possible to do the 'reverse'
> logic I was referring to? To put it simply, I'd like to be able to update
> my full .po (containing translation) with one simple .pot file. In this
> mode only new strings should be added. In another (full-sync) mode,
> which can only occure with merged .pot files, deleted items are
> also dropped (this is basically what we already have). So what we'd
> need is a new method to update .po with one source .pot.

I think that you missed one think. You do not have to use autotrans
at all. The functionality you are asking have existed from beginning
and it's simple -m option. The only one think you have to  make is:

   hbi18n -m mergedtranslation.{pot,po} <new_pot_files,...>

and inside mergedtranslation.{pot,pot} you will have all existing
translation and if sth new has appeared in <new_pot_files,...> it
will be added to mergedtranslation.{pot,po}.
The -m option works like -a and it tries to save any existing translations
in any of the given .po[t] files.

> [ Here the compromise is that the .po file will contain even deleted
> strings until we don't issue a full sync, but in practice this seems to
> be okay to me. ]

Exactly and this is the result of above command. It's also possible that
line numbers will be replicated when translation strings will be moved
in source code due to some other modifications.
If you want to remove all garbage information like old unused translations
then it's enough to make:
   hbi18n -a cleanmergedtrans.{pot,po} mergedtranslation.{pot,po,hbl}

Maybe I'm missing sth but for me it looks that you already have everything
what you are asking for.


There is also one thing related to -j+ option we should discuss.
Should it merge existing and new data or only append new one?
The merge can be time consumed because compiler will have to open
existing files and decode all existing strings then append new ones
respecting already existing strings and translations (we will have
to store also existing translations) and then the whole file will
have to be generated from scratch. For very long .pot files it can
take a lot of time reducing the compilation performance.
We can also append new information without decoding the old one.
In such case we should only add internal merging for 1-st given .pot
file, f.e. LoadFiles() should be modified a little bit:

STATIC FUNCTION LoadFiles( aFiles )
   LOCAL aTrans, aTrans2
   LOCAL hIndex
   LOCAL cErrorMsg
   LOCAL n

   aTrans := {}
   FOR n := 1 TO Len( aFiles )
      aTrans2 := __I18N_potArrayLoad( aFiles[ n ], @cErrorMsg )
      IF aTrans2 == NIL
         ErrorMsg( cErrorMsg )
      ENDIF
      __I18N_potArrayJoin( aTrans, aTrans2, @hIndex )
   NEXT

   RETURN aTrans

As you can see the code is even simpler though it has one additional call
to __I18N_potArrayJoin(). Anyhow it should not be very expensive in
comparison to other operations. But above gives also yet another feature.
You can simply append many different .pot files into single one, f.e.
   cat *.pot > all_trans.po
and then make:
   hbi18n -m all_trans.po
to merge all repeated translations inside all_trans.po so we will have
additional functionality.

best regards,
Przemek
From druzus at users.sourceforge.net  Thu May  7 06:05:11 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Thu May  7 06:05:17 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11004] trunk/harbour
Message-ID: <E1M20TX-0003aS-PB@3kljzd1.ch3.sourceforge.com>

Revision: 11004
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11004&view=rev
Author:   druzus
Date:     2009-05-07 10:05:10 +0000 (Thu, 07 May 2009)

Log Message:
-----------
2009-05-07 12:13 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/debug/dbgwa.prg
    ! Guard against recursive debugger activation when a user callback
      containing debug info is implicitly called from the debugger's workarea
      browser. By Phil Krylov borrowed from xHarbour.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/debug/dbgwa.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From mbelgrano at deltain.it  Thu May  7 06:10:56 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu May  7 06:11:21 2009
Subject: [Harbour] Added some missing credits at changelog of xharbour
Message-ID: <609353e70905070310y3490d491t17a313a832270f59@mail.gmail.com>

From: Miguel Angel Marchuet <miguelangel@...>
Subject: Added some missing credits at changelog.
Newsgroups: gmane.comp.lang.xharbour.devel
Date: 2009-05-06 08:25:54 GMT (1 day, 1 hour and 43 minutes ago)
Added some missing credits at changelog.

Best regards,
Miguel Angel Marchuet



-- 
Massimo Belgrano
From mbelgrano at deltain.it  Thu May  7 06:13:56 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu May  7 06:14:21 2009
Subject: [Harbour] QT - Xbase++ XbpParts Library - Namespace
In-Reply-To: <22990487.post@talk.nabble.com>
References: <22990487.post@talk.nabble.com>
Message-ID: <609353e70905070313i6fc90851y839041aa123bd2e@mail.gmail.com>

Will  prefix "XBP" be made first of 1.1?

2009/4/10 Pritpal Bedi <bedipritpal@hotmail.com>:
>
> Hello Everybody
>
> Before starting the project XbpParts.lib (?) based on QT,
> I need group opinion on the namespace we should be
> using. All parts in Xbase++ begins with prefix "XBP".
>
> If we retain the same namespace, i.e., existing code
> will be portable as is. Opinions...
>
> Regards
> Pritpal Bedi
> --
> View this message in context: http://www.nabble.com/QT---Xbase%2B%2B-XbpParts-Library---Namespace-tp22990487p22990487.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From harbour.01 at syenar.hu  Thu May  7 06:21:47 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May  7 06:21:54 2009
Subject: [Harbour] Added some missing credits at changelog of xharbour
In-Reply-To: <609353e70905070310y3490d491t17a313a832270f59@mail.gmail.com>
References: <609353e70905070310y3490d491t17a313a832270f59@mail.gmail.com>
Message-ID: <18d502870905070321p352cfe40x6622577662465d3e@mail.gmail.com>

In fact added one credit, missed to add my copyright, missed to correct all
previous entries for all Harbour authors and missed to
correct misspelled names.

Brgds,
Viktor

On Thu, May 7, 2009 at 12:10 PM, Massimo Belgrano <mbelgrano@deltain.it>wrote:

> From: Miguel Angel Marchuet <miguelangel@...>
> Subject: Added some missing credits at changelog.
> Newsgroups: gmane.comp.lang.xharbour.devel
> Date: 2009-05-06 08:25:54 GMT (1 day, 1 hour and 43 minutes ago)
> Added some missing credits at changelog.
>
> Best regards,
> Miguel Angel Marchuet
>
>
>
> --
> Massimo Belgrano
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090507/60ad1214/attachment.html
From druzus at acn.waw.pl  Thu May  7 06:33:46 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May  7 06:25:27 2009
Subject: [Harbour] Added some missing credits at changelog of xharbour
In-Reply-To: <609353e70905070310y3490d491t17a313a832270f59@mail.gmail.com>
References: <609353e70905070310y3490d491t17a313a832270f59@mail.gmail.com>
Message-ID: <20090507103346.GA25766@uran.home.aster.pl>

On Thu, 07 May 2009, Massimo Belgrano wrote:
> From: Miguel Angel Marchuet <miguelangel@...>
> Subject: Added some missing credits at changelog.
> Newsgroups: gmane.comp.lang.xharbour.devel
> Date: 2009-05-06 08:25:54 GMT (1 day, 1 hour and 43 minutes ago)
> Added some missing credits at changelog.
> Best regards,
> Miguel Angel Marchuet

Better check what he really did.
he did not address even 5% of his commits.
I do not plan to longer fight with it.
I resolve this problem in different way.
If I find time to finish my next version of core RDDs then
I simply do not release them as open source code.

best regards,
Przemek
From mbelgrano at deltain.it  Thu May  7 06:26:04 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu May  7 06:26:29 2009
Subject: [Harbour] Added some missing credits at changelog of xharbour
In-Reply-To: <18d502870905070321p352cfe40x6622577662465d3e@mail.gmail.com>
References: <609353e70905070310y3490d491t17a313a832270f59@mail.gmail.com> 
	<18d502870905070321p352cfe40x6622577662465d3e@mail.gmail.com>
Message-ID: <609353e70905070326l55b9f0afjd52a535f8ae3ef77@mail.gmail.com>

Will be a first step
Better that nothing

2009/5/7 Viktor Szak?ts <harbour.01@syenar.hu>:
> In fact added one credit, missed to add my copyright, missed to
> correct all previous entries for all Harbour authors and missed to
> correct misspelled?names.
> Brgds,
> Viktor
>
> On Thu, May 7, 2009 at 12:10 PM, Massimo Belgrano <mbelgrano@deltain.it>
> wrote:
>>
>> From: Miguel Angel Marchuet <miguelangel@...>
>> Subject: Added some missing credits at changelog.
>> Newsgroups: gmane.comp.lang.xharbour.devel
>> Date: 2009-05-06 08:25:54 GMT (1 day, 1 hour and 43 minutes ago)
>> Added some missing credits at changelog.
>>
>> Best regards,
>> Miguel Angel Marchuet
>>
>>
>>
>> --
>> Massimo Belgrano
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>



-- 
Massimo Belgrano
From mbelgrano at deltain.it  Thu May  7 06:31:01 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu May  7 06:31:26 2009
Subject: [Harbour] Added some missing credits at changelog of xharbour
In-Reply-To: <20090507103346.GA25766@uran.home.aster.pl>
References: <609353e70905070310y3490d491t17a313a832270f59@mail.gmail.com> 
	<20090507103346.GA25766@uran.home.aster.pl>
Message-ID: <609353e70905070331u16434bd1g5cca9de88b59fd99@mail.gmail.com>

What is planed in next version od code RDD?


2009/5/7 Przemyslaw Czerpak <druzus@acn.waw.pl>:
> On Thu, 07 May 2009, Massimo Belgrano wrote:
>> From: Miguel Angel Marchuet <miguelangel@...>
>> Subject: Added some missing credits at changelog.
>> Newsgroups: gmane.comp.lang.xharbour.devel
>> Date: 2009-05-06 08:25:54 GMT (1 day, 1 hour and 43 minutes ago)
>> Added some missing credits at changelog.
>> Best regards,
>> Miguel Angel Marchuet
>
> Better check what he really did.
> he did not address even 5% of his commits.
> I do not plan to longer fight with it.
> I resolve this problem in different way.
> If I find time to finish my next version of core RDDs then
> I simply do not release them as open source code.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From harbour.01 at syenar.hu  Thu May  7 07:51:37 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu May  7 07:53:23 2009
Subject: [Harbour] hbmk2 .po generation real life testing - speed issue
In-Reply-To: <20090507101257.GA9690@uran.home.aster.pl>
References: <18d502870905061012u10e881adp81e920eedadac0a8@mail.gmail.com>
	<20090506183519.GA16613@uran.home.aster.pl>
	<18d502870905061231u7e9a47f2i5f4e158dfd59cbf1@mail.gmail.com>
	<20090507101257.GA9690@uran.home.aster.pl>
Message-ID: <EA3B27F3-C857-4DA6-AC36-83EC2E27791E@syenar.hu>

>> See my above thoughs. Do you think it's possible to do the 'reverse'
>> logic I was referring to? To put it simply, I'd like to be able to  
>> update
>> my full .po (containing translation) with one simple .pot file. In  
>> this
>> mode only new strings should be added. In another (full-sync) mode,
>> which can only occure with merged .pot files, deleted items are
>> also dropped (this is basically what we already have). So what we'd
>> need is a new method to update .po with one source .pot.
>
> I think that you missed one think. You do not have to use autotrans
> at all. The functionality you are asking have existed from beginning
> and it's simple -m option. The only one think you have to  make is:
>
>   hbi18n -m mergedtranslation.{pot,po} <new_pot_files,...>
>
> and inside mergedtranslation.{pot,pot} you will have all existing
> translation and if sth new has appeared in <new_pot_files,...> it
> will be added to mergedtranslation.{pot,po}.
> The -m option works like -a and it tries to save any existing  
> translations
> in any of the given .po[t] files.

Hm, that's exactly what I need. I'll try to implement this
method in hbmk2, but probably only sometimes next week.

>> [ Here the compromise is that the .po file will contain even deleted
>> strings until we don't issue a full sync, but in practice this  
>> seems to
>> be okay to me. ]
>
> Exactly and this is the result of above command. It's also possible  
> that
> line numbers will be replicated when translation strings will be moved
> in source code due to some other modifications.
> If you want to remove all garbage information like old unused  
> translations
> then it's enough to make:
>   hbi18n -a cleanmergedtrans.{pot,po} mergedtranslation.{pot,po,hbl}

Okay, I'll try to add that to hbmk2 as a separate command.

The only remaining issue here is how to ensure that all source
.pots are present. One option is to run a harbour -j -s on all
sources in a separate pass when this option is chosen, or
maybe we could also tweak -j option to *always* create a .pot file,
even if there isn't any translatable strings (in this case an
empty one). This way it's easy to rebuild what's needed on
demand, and the whole pass can be done incrementally. It wouldn't
raise disk space requirements on modern FSes.

> Maybe I'm missing sth but for me it looks that you already have  
> everything
> what you are asking for.

It seems to me also, except the missing .pot uncertainty issue.
I'll know for sure after I reimplemented hese parts using above
information.

> There is also one thing related to -j+ option we should discuss.
> Should it merge existing and new data or only append new one?
> The merge can be time consumed because compiler will have to open
> existing files and decode all existing strings then append new ones
> respecting already existing strings and translations (we will have
> to store also existing translations) and then the whole file will
> have to be generated from scratch. For very long .pot files it can
> take a lot of time reducing the compilation performance.
> We can also append new information without decoding the old one.

Few j+ scenarios:

a) multiple/single file(s), single output, addition
    - useful, but not without potential drawbacks for incremental  
build situations.
      Consecutive compile sessions can make the .pot grow very large
      until forcing a clean rebuild. Difficult to guesstimate
      whether we save more time by eliminating .pot merge in hbmk2,
      than we lose by dealing with size growth of single output .pot.
      My guess is that it will for normal situation, but it's just a  
guess.
      This feature will certainly force periodic rebuilds in order to
      perform well.

b) multiple/single files(s), single output, merge
    - not usable for incremental build situations.
      Old entries may be deleted in a partial project compile session.
    - usable for small projects as it can make hbi18n unnecessary.

c) multiple files, multiple output, addition
    - has no advantage over simply recreating the .pot.

d) multiple files, multiple output, merge
    - eliminates one hbi18n step, but hbi18n is still required.

Only a) and b) seems useful but for other situations each.
b) still requires aid from hbmk2 or hbi18n in order to create
a real-life workflow, so probably we should go for a), and
it's also much simpler to implement.

Later if we want to introduce merge operation we can still
add it using additional -j modifier switch.

To me though it looks that if we'd add a switch to create
empty .pot for non-translatable sources (f.e. -j! switch),
plus I implement incremental merge + separate clean option,
we will end up with a more optimal solution.

> In such case we should only add internal merging for 1-st given .pot
> file, f.e. LoadFiles() should be modified a little bit:
>
> STATIC FUNCTION LoadFiles( aFiles )
>   LOCAL aTrans, aTrans2
>   LOCAL hIndex
>   LOCAL cErrorMsg
>   LOCAL n
>
>   aTrans := {}
>   FOR n := 1 TO Len( aFiles )
>      aTrans2 := __I18N_potArrayLoad( aFiles[ n ], @cErrorMsg )
>      IF aTrans2 == NIL
>         ErrorMsg( cErrorMsg )
>      ENDIF
>      __I18N_potArrayJoin( aTrans, aTrans2, @hIndex )
>   NEXT
>
>   RETURN aTrans
>
> As you can see the code is even simpler though it has one additional  
> call
> to __I18N_potArrayJoin(). Anyhow it should not be very expensive in
> comparison to other operations. But above gives also yet another  
> feature.
> You can simply append many different .pot files into single one, f.e.
>   cat *.pot > all_trans.po
> and then make:
>   hbi18n -m all_trans.po
> to merge all repeated translations inside all_trans.po so we will have
> additional functionality.

I did this exact modification to LoadFiles() present in hbmk2 [rev  
11002],
thinking it's a functionally equivalent modification. Do you think I  
broke it?

Brgds,
Viktor

From qiinfo at ig.com.br  Thu May  7 08:05:58 2009
From: qiinfo at ig.com.br (Rossine)
Date: Thu May  7 08:12:01 2009
Subject: [Harbour] Error with DumpVar
Message-ID: <23425403.post@talk.nabble.com>


Hello,

This sample:

[CODE]
PROCEDURE Main
      LOCAL aArray   := { 1, 2, 3 }
      LOCAL cString  := "Test"
      LOCAL dDate    := Date()
      LOCAL hHash    := { "A" => 1, "B" => 2 }
      LOCAL lLogic   := .T.
      LOCAL nNumber  := 1.2345
      LOCAL pPointer := ( @Main() )
      LOCAL undef   := NIL

      ? hb_dumpvar( aArray   ) 
      ? hb_dumpvar( cString  ) 
      ? hb_dumpvar( dDate    ) 
      ? hb_dumpvar( hHash    ) 
      ? hb_dumpvar( lLogic   )
      ? hb_dumpvar( pPointer )
      ? hb_dumpvar( undef    )

   RETURN

[ENDCODE]

... generate this errors:

[ERRORS]
Error: Unresolved external '_HB_FUN___SETCLASSSCOPE' referenced from
C:\HRB_BCC\LIB\XHB.LIB|dumpvar
Error: Unresolved external '_HB_FUN___OBJGETMSGFULLLIST' referenced from
C:\HRB_BCC\LIB\XHB.LIB|dumpvar
Error: Unresolved external '_HB_FUN___OBJGETVALUEFULLLIST' referenced from
C:\HRB_BCC\LIB\XHB.LIB|dumpvar
Error: Unresolved external '_HB_FUN_HB_HGETKEYS' referenced from
C:\HRB_BCC\LIB\XHB.LIB|dumpvar
[ENDERRORS]

How to fix this?

Best regards,

Rossine.

-- 
View this message in context: http://www.nabble.com/Error-with-DumpVar-tp23425403p23425403.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Thu May  7 08:19:50 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu May  7 08:27:41 2009
Subject: [Harbour] Error with DumpVar
In-Reply-To: <23425403.post@talk.nabble.com>
References: <23425403.post@talk.nabble.com>
Message-ID: <04397052-D9DF-4E71-9C5D-57F9FCF76580@syenar.hu>

Hi Rossine,

I will fix one of these errors, but for the rest
AFAIK we don't support them in Harbour as they
are dealing with internals on the user/app level.

Maybe someone can help with the Harbour alternatives
(debug functions?), or by modifying this function
to at least build under Harbour with supported
functionality only.

Brgds,
Viktor

On 2009.05.07., at 14:05, Rossine wrote:

>
> Hello,
>
> This sample:
>
> [CODE]
> PROCEDURE Main
>      LOCAL aArray   := { 1, 2, 3 }
>      LOCAL cString  := "Test"
>      LOCAL dDate    := Date()
>      LOCAL hHash    := { "A" => 1, "B" => 2 }
>      LOCAL lLogic   := .T.
>      LOCAL nNumber  := 1.2345
>      LOCAL pPointer := ( @Main() )
>      LOCAL undef   := NIL
>
>      ? hb_dumpvar( aArray   )
>      ? hb_dumpvar( cString  )
>      ? hb_dumpvar( dDate    )
>      ? hb_dumpvar( hHash    )
>      ? hb_dumpvar( lLogic   )
>      ? hb_dumpvar( pPointer )
>      ? hb_dumpvar( undef    )
>
>   RETURN
>
> [ENDCODE]
>
> ... generate this errors:
>
> [ERRORS]
> Error: Unresolved external '_HB_FUN___SETCLASSSCOPE' referenced from
> C:\HRB_BCC\LIB\XHB.LIB|dumpvar
> Error: Unresolved external '_HB_FUN___OBJGETMSGFULLLIST' referenced  
> from
> C:\HRB_BCC\LIB\XHB.LIB|dumpvar
> Error: Unresolved external '_HB_FUN___OBJGETVALUEFULLLIST'  
> referenced from
> C:\HRB_BCC\LIB\XHB.LIB|dumpvar
> Error: Unresolved external '_HB_FUN_HB_HGETKEYS' referenced from
> C:\HRB_BCC\LIB\XHB.LIB|dumpvar
> [ENDERRORS]
>
> How to fix this?
>
> Best regards,
>
> Rossine.
>
> -- 
> View this message in context: http://www.nabble.com/Error-with-DumpVar-tp23425403p23425403.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vszakats at users.sourceforge.net  Thu May  7 09:29:05 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu May  7 10:18:57 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11005] trunk/harbour
Message-ID: <E1M23er-0008LN-NX@bj8yhf1.ch3.sourceforge.com>

Revision: 11005
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11005&view=rev
Author:   vszakats
Date:     2009-05-07 13:29:04 +0000 (Thu, 07 May 2009)

Log Message:
-----------
2009-05-07 15:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/alert.prg
    + Added TIMESTAMP support for Alert() (extended mode only)

  * contrib/xhb/dumpvar.prg
    ! Fixed hash function name.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/xhb/dumpvar.prg
    trunk/harbour/source/rtl/alert.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Thu May  7 10:44:37 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Thu May  7 11:05:27 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11006] trunk/harbour
Message-ID: <E1M24px-0002yC-Vn@d5vjzd1.ch3.sourceforge.com>

Revision: 11006
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11006&view=rev
Author:   druzus
Date:     2009-05-07 14:44:36 +0000 (Thu, 07 May 2009)

Log Message:
-----------
2009-05-07 16:52 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcompdf.h
  * harbour/source/compiler/harbour.y
  * harbour/source/compiler/harbour.yyc
    + added compile time optimization for switch statements with constant
      values, i.e. for code like:
            proc main()
               local x := 0
               switch 3
                  case 1;     x += 100;   exit
                  case 2;     x += 200
                  case 3;     x += 300
                  case 4;     x += 400;   exit
                  case 5;     x += 505;   exit
                  case 6;     x += 606
                  otherwise;  x += 1000
               endswitch
               ? x
            return

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/include/hbcompdf.h
    trunk/harbour/source/compiler/harbour.y
    trunk/harbour/source/compiler/harbour.yyc


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From info at fsgiudice.com  Thu May  7 10:29:47 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Thu May  7 11:41:59 2009
Subject: [Harbour] Error with DumpVar
In-Reply-To: <04397052-D9DF-4E71-9C5D-57F9FCF76580@syenar.hu>
References: <23425403.post@talk.nabble.com>
	<04397052-D9DF-4E71-9C5D-57F9FCF76580@syenar.hu>
Message-ID: <4A02F05B.6010008@fsgiudice.com>

Hi Viktor,
I have my version ho dumpvar for harbour, but I have modified internals 
to access objects.
I will post a diff here ASAP to see if my changes can be added to svn.

Best regards
Francesco

Il 07/05/2009 14.19, Szak?ts Viktor ha scritto:
> Hi Rossine,
> 
> I will fix one of these errors, but for the rest
> AFAIK we don't support them in Harbour as they
> are dealing with internals on the user/app level.
> 
> Maybe someone can help with the Harbour alternatives
> (debug functions?), or by modifying this function
> to at least build under Harbour with supported
> functionality only.
> 
> Brgds,
> Viktor
> 
> On 2009.05.07., at 14:05, Rossine wrote:
> 
>>
>> Hello,
>>
>> This sample:
>>
>> [CODE]
>> PROCEDURE Main
>>      LOCAL aArray   := { 1, 2, 3 }
>>      LOCAL cString  := "Test"
>>      LOCAL dDate    := Date()
>>      LOCAL hHash    := { "A" => 1, "B" => 2 }
>>      LOCAL lLogic   := .T.
>>      LOCAL nNumber  := 1.2345
>>      LOCAL pPointer := ( @Main() )
>>      LOCAL undef   := NIL
>>
>>      ? hb_dumpvar( aArray   )
>>      ? hb_dumpvar( cString  )
>>      ? hb_dumpvar( dDate    )
>>      ? hb_dumpvar( hHash    )
>>      ? hb_dumpvar( lLogic   )
>>      ? hb_dumpvar( pPointer )
>>      ? hb_dumpvar( undef    )
>>
>>   RETURN
>>
>> [ENDCODE]
>>
>> ... generate this errors:
>>
>> [ERRORS]
>> Error: Unresolved external '_HB_FUN___SETCLASSSCOPE' referenced from
>> C:\HRB_BCC\LIB\XHB.LIB|dumpvar
>> Error: Unresolved external '_HB_FUN___OBJGETMSGFULLLIST' referenced from
>> C:\HRB_BCC\LIB\XHB.LIB|dumpvar
>> Error: Unresolved external '_HB_FUN___OBJGETVALUEFULLLIST' referenced 
>> from
>> C:\HRB_BCC\LIB\XHB.LIB|dumpvar
>> Error: Unresolved external '_HB_FUN_HB_HGETKEYS' referenced from
>> C:\HRB_BCC\LIB\XHB.LIB|dumpvar
>> [ENDERRORS]
>>
>> How to fix this?
>>
>> Best regards,
>>
>> Rossine.
>>
>> -- 
>> View this message in context: 
>> http://www.nabble.com/Error-with-DumpVar-tp23425403p23425403.html
>> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Thu May  7 11:58:14 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May  7 12:49:20 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11003] trunk/harbour
In-Reply-To: <E1M1xWd-0007qO-Nq@c3vjzd1.ch3.sourceforge.com>
References: <E1M1xWd-0007qO-Nq@c3vjzd1.ch3.sourceforge.com>
Message-ID: <20090507155814.GA7612@uran.home.aster.pl>

On Thu, 07 May 2009, vszakats@users.sourceforge.net wrote:

Hi,

> 2009-05-07 08:55 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * source/rtl/tget.prg
>     + Added TIMESTAMP support for GETs.
>     % Optimizations using SWITCH and FOR EACH.

Thank you very much anyhow there is one problem with above modification.
SWITCH accepts only integer and string values and ::cType in GET class
is NIL in some cases so when you use
   SWITCH ::cType
then RT error is generated for NIL value:
   Error BASE/3104  Argument error: SWITCH
You should 1-st test for NIL, f.e. tget.prg[1123] should look like:

      IF Empty( ::cPicMask ) .OR. ::cPicture == NIL && ::cType != NIL

         SWITCH ::cType
         CASE "D"
      [...]

best regards,
Przemek
From druzus at acn.waw.pl  Thu May  7 12:21:45 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May  7 13:19:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11005] trunk/harbour
In-Reply-To: <E1M23er-0008LN-NX@bj8yhf1.ch3.sourceforge.com>
References: <E1M23er-0008LN-NX@bj8yhf1.ch3.sourceforge.com>
Message-ID: <20090507162145.GA25336@uran.home.aster.pl>

On Thu, 07 May 2009, vszakats@users.sourceforge.net wrote:

Hi,

> 2009-05-07 15:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * source/rtl/alert.prg
>     + Added TIMESTAMP support for Alert() (extended mode only)

What do you think about using:

   cMessage := hb_CStr( xMessage )

Instead of this whole DO CASE statement. It will address also hash,
pointer and any other item types we may add in the future.

best regards,
Przemek
From druzus at acn.waw.pl  Thu May  7 12:24:58 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May  7 13:26:38 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11005] trunk/harbour
In-Reply-To: <20090507162145.GA25336@uran.home.aster.pl>
References: <E1M23er-0008LN-NX@bj8yhf1.ch3.sourceforge.com>
	<20090507162145.GA25336@uran.home.aster.pl>
Message-ID: <20090507162458.GA5992@uran.home.aster.pl>

On Thu, 07 May 2009, Przemyslaw Czerpak wrote:
> > 2009-05-07 15:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
> >   * source/rtl/alert.prg
> >     + Added TIMESTAMP support for Alert() (extended mode only)
> What do you think about using:
>    cMessage := hb_CStr( xMessage )

Ups, it should be:

   if hb_isString( xMessage )
      cMessage := StrTran( xMessage, ";", Chr( 10 ) )
   else
      cMessage := hb_CStr( xMessage )
   endif

best regards,
Przemek
From harbour.01 at syenar.hu  Thu May  7 13:50:39 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May  7 14:57:36 2009
Subject: [Harbour] Error with DumpVar
In-Reply-To: <4A02F05B.6010008@fsgiudice.com>
References: <23425403.post@talk.nabble.com>
	<04397052-D9DF-4E71-9C5D-57F9FCF76580@syenar.hu>
	<4A02F05B.6010008@fsgiudice.com>
Message-ID: <18d502870905071050t353a250fu2eb02b8c41b56c1d@mail.gmail.com>

Thanks Francesco.
Brgds,
Viktor

On Thu, May 7, 2009 at 4:29 PM, Francesco Saverio Giudice <
info@fsgiudice.com> wrote:

> Hi Viktor,
> I have my version ho dumpvar for harbour, but I have modified internals to
> access objects.
> I will post a diff here ASAP to see if my changes can be added to svn.
>
> Best regards
> Francesco
>
> Il 07/05/2009 14.19, Szak?ts Viktor ha scritto:
>
>  Hi Rossine,
>>
>> I will fix one of these errors, but for the rest
>> AFAIK we don't support them in Harbour as they
>> are dealing with internals on the user/app level.
>>
>> Maybe someone can help with the Harbour alternatives
>> (debug functions?), or by modifying this function
>> to at least build under Harbour with supported
>> functionality only.
>>
>> Brgds,
>> Viktor
>>
>> On 2009.05.07., at 14:05, Rossine wrote:
>>
>>
>>> Hello,
>>>
>>> This sample:
>>>
>>> [CODE]
>>> PROCEDURE Main
>>>     LOCAL aArray   := { 1, 2, 3 }
>>>     LOCAL cString  := "Test"
>>>     LOCAL dDate    := Date()
>>>     LOCAL hHash    := { "A" => 1, "B" => 2 }
>>>     LOCAL lLogic   := .T.
>>>     LOCAL nNumber  := 1.2345
>>>     LOCAL pPointer := ( @Main() )
>>>     LOCAL undef   := NIL
>>>
>>>     ? hb_dumpvar( aArray   )
>>>     ? hb_dumpvar( cString  )
>>>     ? hb_dumpvar( dDate    )
>>>     ? hb_dumpvar( hHash    )
>>>     ? hb_dumpvar( lLogic   )
>>>     ? hb_dumpvar( pPointer )
>>>     ? hb_dumpvar( undef    )
>>>
>>>  RETURN
>>>
>>> [ENDCODE]
>>>
>>> ... generate this errors:
>>>
>>> [ERRORS]
>>> Error: Unresolved external '_HB_FUN___SETCLASSSCOPE' referenced from
>>> C:\HRB_BCC\LIB\XHB.LIB|dumpvar
>>> Error: Unresolved external '_HB_FUN___OBJGETMSGFULLLIST' referenced from
>>> C:\HRB_BCC\LIB\XHB.LIB|dumpvar
>>> Error: Unresolved external '_HB_FUN___OBJGETVALUEFULLLIST' referenced
>>> from
>>> C:\HRB_BCC\LIB\XHB.LIB|dumpvar
>>> Error: Unresolved external '_HB_FUN_HB_HGETKEYS' referenced from
>>> C:\HRB_BCC\LIB\XHB.LIB|dumpvar
>>> [ENDERRORS]
>>>
>>> How to fix this?
>>>
>>> Best regards,
>>>
>>> Rossine.
>>>
>>> --
>>> View this message in context:
>>> http://www.nabble.com/Error-with-DumpVar-tp23425403p23425403.html
>>> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>>>
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>>
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090507/3bc74ccb/attachment.html
From harbour.01 at syenar.hu  Thu May  7 13:55:18 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May  7 15:02:49 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11003] trunk/harbour
In-Reply-To: <20090507155814.GA7612@uran.home.aster.pl>
References: <E1M1xWd-0007qO-Nq@c3vjzd1.ch3.sourceforge.com>
	<20090507155814.GA7612@uran.home.aster.pl>
Message-ID: <18d502870905071055v7c63f8fej8f13dfe32376244d@mail.gmail.com>

Thanks a lot, and I even realized it can be NIL but forgot to apply it to
this logic.

I'll add checks to all such statements, later we may optimize
out those not necessary.

I'll commit ASAP.

Brgds,
Viktor

On Thu, May 7, 2009 at 5:58 PM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:

> On Thu, 07 May 2009, vszakats@users.sourceforge.net wrote:
>
> Hi,
>
> > 2009-05-07 08:55 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
> >   * source/rtl/tget.prg
> >     + Added TIMESTAMP support for GETs.
> >     % Optimizations using SWITCH and FOR EACH.
>
> Thank you very much anyhow there is one problem with above modification.
> SWITCH accepts only integer and string values and ::cType in GET class
> is NIL in some cases so when you use
>   SWITCH ::cType
> then RT error is generated for NIL value:
>   Error BASE/3104  Argument error: SWITCH
> You should 1-st test for NIL, f.e. tget.prg[1123] should look like:
>
>      IF Empty( ::cPicMask ) .OR. ::cPicture == NIL && ::cType != NIL
>
>         SWITCH ::cType
>         CASE "D"
>      [...]
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090507/3ec60fda/attachment.html
From harbour.01 at syenar.hu  Thu May  7 14:06:44 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May  7 15:16:44 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11005] trunk/harbour
In-Reply-To: <20090507162458.GA5992@uran.home.aster.pl>
References: <E1M23er-0008LN-NX@bj8yhf1.ch3.sourceforge.com>
	<20090507162145.GA25336@uran.home.aster.pl>
	<20090507162458.GA5992@uran.home.aster.pl>
Message-ID: <18d502870905071106w59516508u70924a06ea99cf2c@mail.gmail.com>

Even better, I've committed it, with some more minor opt.
[

didn't test it though, probably we should have an hb_alert()
function with this and maybe more feature, I was thinking
adding it. IMO we should gradually do something with all
HB_EXTENSIONs we have, there isn't too many in fact:
  ALERT()
  AT()       -> HB_AT()
  GETE()     -> HB_GETENV()
  GETENV()   -> HB_GETENV()
  MEMOWRIT() -> HB_MEMOWRIT()
  MEMOLINE(), MLCOUNT(), MLPOS(), MLCTOPOS(), MPOSTOLC() -> Set( _SET_EOL,
... )
  SAVESCREEN()/RESTSCREEN() -> functionality ignored
  __SetFunction() -> 11/12 -> K_F11/K_F12 or SetKey( nFunctionKey, {||
__Keyboard(), hb_KeyPut( xKeySeq ) } )
  RADIOBUTTON()

]

Brgds,
Viktor

On Thu, May 7, 2009 at 6:24 PM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:

> On Thu, 07 May 2009, Przemyslaw Czerpak wrote:
> > > 2009-05-07 15:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
> > >   * source/rtl/alert.prg
> > >     + Added TIMESTAMP support for Alert() (extended mode only)
> > What do you think about using:
> >    cMessage := hb_CStr( xMessage )
>
> Ups, it should be:
>
>   if hb_isString( xMessage )
>       cMessage := StrTran( xMessage, ";", Chr( 10 ) )
>    else
>      cMessage := hb_CStr( xMessage )
>   endif
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090507/0d47c63c/attachment.html
From kleyber at tkinformidia.net  Thu May  7 15:05:43 2009
From: kleyber at tkinformidia.net (Kleyber)
Date: Thu May  7 16:04:40 2009
Subject: [Harbour] Error in Harbour generation with MSVC (again)
In-Reply-To: <4A01D39C.5020304@cultura.com.br>
References: <23405168.post@talk.nabble.com> <4A01D39C.5020304@cultura.com.br>
Message-ID: <23433209.post@talk.nabble.com>




Ranier Vilela wrote:
> 
> Kleyber escreveu:
>> Hi,
>>
>> I've upgraded my Harbour with tha last revision, but when I try to
>> compile
>> all with make_gnu (using MSVC) it gives me this errors:
>>
>> make (e=193): Error 193
>> make.exe[3]: *** [expropt.obj] Error 193
>> make.exe[3]: Leaving directory 'C:/harbour/source/common/win/msvc'
>> make.exe[2]: *** [descend] Error 2
>> make.exe[2] Leaving directory 'C:/harbour/source/common'
>> make.exe[1]: *** [common.inst] Error 2
>> make.exe[1]: Leaving directory 'C:/harbour/source'
>> make.exe: *** [source.inst] Error 2
>>
>> Where am I wrong?
>>
>> TIA
>>
>> Kleyber
>>   
> Try with gnu-make vers 3.81.
> 
> Best regards,
> 
> Ranier Vilela
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

Hi,

I discovered the problem. I have uninstalled VC 2008 and just created a
folder called VC2008 (with the libs and includes I need to compile my apps)
which I thought it was enough to recompile Harbour, but I was wrong. When I
reinstalled VC 2008, everything was fine.

Thanks,

Kleyber


-- 
View this message in context: http://www.nabble.com/Error-in-Harbour-generation-with-MSVC-%28again%29-tp23405168p23433209.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From qiinfo at ig.com.br  Thu May  7 15:40:39 2009
From: qiinfo at ig.com.br (Rossine)
Date: Thu May  7 16:39:45 2009
Subject: [Harbour] Error with DumpVar
In-Reply-To: <23425403.post@talk.nabble.com>
References: <23425403.post@talk.nabble.com>
Message-ID: <23433768.post@talk.nabble.com>


Hello All,

I try with harbour 11007 and this errors persist:

[ERRORS]
Error: Unresolved external '_HB_FUN___SETCLASSSCOPE' referenced from
C:\HRB_BCC\LIB\XHB.LIB|dumpvar
Error: Unresolved external '_HB_FUN___OBJGETMSGFULLLIST' referenced from
C:\HRB_BCC\LIB\XHB.LIB|dumpvar
Error: Unresolved external '_HB_FUN___OBJGETVALUEFULLLIST' referenced from
C:\HRB_BCC\LIB\XHB.LIB|dumpvar
[ENDERRORS]

Best regards,

Rossine.

-- 
View this message in context: http://www.nabble.com/Error-with-DumpVar-tp23425403p23433768.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From calimero22 at freemail.it  Thu May  7 16:08:22 2009
From: calimero22 at freemail.it (calimero22@freemail.it)
Date: Thu May  7 17:17:17 2009
Subject: [Harbour] Harbour AND MDB
Message-ID: <20090507200822.A4312EA4@eva87.dadanet.it>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090507/bd5fedbf/attachment.html
From mbelgrano at deltain.it  Thu May  7 17:39:02 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu May  7 18:43:49 2009
Subject: [Harbour] Harbour AND MDB
In-Reply-To: <20090507200822.A4312EA4@eva87.dadanet.it>
References: <20090507200822.A4312EA4@eva87.dadanet.it>
Message-ID: <609353e70905071439m51ac26a6r59612ad54077fb7e@mail.gmail.com>

hbmk2 access.prg rddado.lib hbwin.lib
----------access.prg------------
#include "adordd.ch"
REQUEST ADORDD
function Main()
USE Test.mdb VIA "ADORDD" TABLE "mail"
Browse()
USE
return nil

2009/5/7 <calimero22@freemail.it>

> Hi
> what have i do to open MDB Access archieves with harbour?
> Which libraries have i to download?
> In which folder must i store them?
> How to compile the program PRG?
> Thank you very much to ALL.
> Giovanni
>
> --
>
> Dada.net has a new music store! Get MP3s and Ringtones from 1000s of
> artists, transfer them to any device and keep them forever.Click here to
> check it out. <http://us.dada.net/>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>


-- 
Massimo Belgrano

Analisi e sviluppo software per Lan e Web - Consulenza informatica -
Formazione
Delta Informatica S.r.l. http://www.deltain.it/   +39 0321 455962
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090507/7f07936c/attachment.html
From e.m.giordano at emagsoftware.it  Thu May  7 18:01:04 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Thu May  7 19:00:59 2009
Subject: [Harbour] Harbour AND MDB
References: <20090507200822.A4312EA4@eva87.dadanet.it>
Message-ID: <1BC086AD82B246F98070239859F016F1@emag>


-----Messaggio Originale----- 
Da: <calimero22@freemail.it>
A: <harbour@harbour-project.org>
Data invio: gioved? 7 maggio 2009 22.08
Oggetto: [Harbour] Harbour AND MDB


> Hi
> what have i do to open MDB Access archieves with harbour?

This is a sample:

#define adOpenForwardOnly 0
#define adOpenKeyset      1
#define adOpenDynamic     2
#define adOpenStatic      3

#define adLockReadOnly        1
#define adLockPessimistic     2
#define adLockOptimistic      3
#define adLockBatchOptimistic 4

#define adUseNone   1
#define adUseServer 2
#define adUseClient 3


FUNCTION MAIN()

    LOCAL oRs := CREATEOBJECT( "ADODB.Recordset" )

    oRs:Open( "SELECT * FROM Clienti ORDER BY Cliente", 
"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=clienti.mdb", 
adOpenForwardOnly, adLockReadOnly )

    WHILE !oRs:EOF
        ? oRs:Fields( "Cliente" ):Value
        oRs:MoveNext()
    ENDDO

    oRs:Close()

    RETURN NIL

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Fri May  8 01:13:39 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May  8 02:19:39 2009
Subject: [Harbour] Slowness on mailing list ?
Message-ID: <18d502870905072213n6d00ff1fo6f5518bf117e10fc@mail.gmail.com>

Hi Phil,
It seems we're experiencing slow response times on the list since
yesterday. I haven't received commit notifications for last two commits,
one of them done 13 hours ago, the other 8 hours ago.

Could you take a look at it?

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090508/94c9c42a/attachment.html
From harbour.01 at syenar.hu  Fri May  8 01:20:01 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May  8 02:25:53 2009
Subject: [Harbour] hb_SToT() without parameter
Message-ID: <18d502870905072220r6e6cbc88w502ec7234ddb8639@mail.gmail.com>

Hi Przemek,
Can we you support for hb_SToT() call with no parameter?
Currently it RTEs in this case. It's pair hb_SToD() does work
without it, and does the same as hb_SToD( "" ).

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090508/f75426fb/attachment.html
From vszakats at users.sourceforge.net  Fri May  8 01:50:23 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May  8 02:52:41 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11010] trunk/harbour
Message-ID: <E1M2IyV-0007YG-Um@bj8yhf1.ch3.sourceforge.com>

Revision: 11010
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11010&view=rev
Author:   vszakats
Date:     2009-05-08 05:50:23 +0000 (Fri, 08 May 2009)

Log Message:
-----------
2009-05-08 07:48 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/tclass.prg
    % All loops optimized to use FOR EACH.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/rtl/tclass.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Fri May  8 03:32:29 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May  8 03:55:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11011] trunk/harbour
Message-ID: <E1M2KZJ-0002p4-4l@3kljzd1.ch3.sourceforge.com>

Revision: 11011
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11011&view=rev
Author:   vszakats
Date:     2009-05-08 07:32:28 +0000 (Fri, 08 May 2009)

Log Message:
-----------
2009-05-08 09:30 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed to not attempt cycling through all specified languages
      if target .po or .hbl filename doesn't contain a language macro.
    ! Fixed to strip encoding from LANG value.
    * Some changes to modularize language/encoding detection.
      (work in progress)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Fri May  8 04:15:09 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May  8 05:14:08 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11012] trunk/harbour
Message-ID: <E1M2LEb-0001JO-U8@74yxhf1.ch3.sourceforge.com>

Revision: 11012
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11012&view=rev
Author:   vszakats
Date:     2009-05-08 08:15:08 +0000 (Fri, 08 May 2009)

Log Message:
-----------
2009-05-08 10:14 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/tclass.prg
    ! Fix to prev commit.

  * contrib/hbole/tests/testole.prg
    + Added ADODB example. Submitted by Enrico Maria Giordano.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbole/tests/testole.prg
    trunk/harbour/source/rtl/tclass.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From e.m.giordano at emagsoftware.it  Fri May  8 05:32:34 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri May  8 06:39:49 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11012] trunk/harbour
References: <E1M2LEb-0001JO-U8@74yxhf1.ch3.sourceforge.com>
Message-ID: <ED71327D02774B838034A89E29E894AD@emag>


-----Messaggio Originale----- 
Da: <vszakats@users.sourceforge.net>
A: <harbour@harbour-project.org>
Data invio: venerd? 8 maggio 2009 10.15
Oggetto: [Harbour] SF.net SVN: harbour-project:[11012] trunk/harbour


>  * contrib/hbole/tests/testole.prg
>    + Added ADODB example. Submitted by Enrico Maria Giordano.

Thank you!

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From mbelgrano at deltain.it  Fri May  8 06:41:40 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri May  8 07:43:15 2009
Subject: [Harbour] ready-to-use and unified harbour distro
Message-ID: <609353e70905080341t1fd08a2dpfd5ca1be3f70eccb@mail.gmail.com>

Now user can choice two distribution:
ready-to-use Harbour distro from Pritpal Bedi
http://www.vouch.info/downloads/HarbourDev_10824_2009-04-09.exe
80 MB
Include Xmate from Andy Wos
 To be considered ready to use for windows the Visual Approach given from
xmate is  important
Also xdevstudio (spanish product made by  Renato Vailton)  can be considered
as real and updated alternative

 The official unified release (from Viktor Szakats) to the latest Harbour
version, with only one package which will fit most users' needs:
 http://www.syenar.hu/harbour/harbour-11-win-20090408.exe(50MB)
Installed size: 168MB (40MB - 314MB)


I invide post here commentation about this
What you prefer and why

-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090508/73314af0/attachment-0001.html
From dbtopas at dbtopas.lt  Fri May  8 06:41:37 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri May  8 07:43:19 2009
Subject: [Harbour] RDD inheritance
Message-ID: <4A040C61.6000608@dbtopas.lt>

Hi,


I'm using ADSX RDD, but sometimes I need to call ADS*() function. It 
does not work, because hb_adsGetWorkAreaPointer() know nothing about 
ADSX. I need to duplicate existing ADS*() function, changing the only 
function hb_adsGetWorkAreaPointer() call to hb_adsxGetWorkAreaPointer().

What is the more beautiful way to do this? I mean, I'd like to make 
ADS*() functions work for all RDDs inherited from ADS RDD.


Regards,
Mindaugas
From eghorbino at yahoo.com  Fri May  8 07:03:42 2009
From: eghorbino at yahoo.com (Edmer)
Date: Fri May  8 08:02:54 2009
Subject: [Harbour] Question about ADORDD
Message-ID: <23443976.post@talk.nabble.com>


Hi Guys,

I noticed that the contents of the function ADO_SEEK was commented out.
Would there be a replacement for the context of this function ?

Thanks,
Ed

-- 
View this message in context: http://www.nabble.com/Question-about-ADORDD-tp23443976p23443976.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at users.sourceforge.net  Fri May  8 08:27:41 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Fri May  8 09:17:36 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11013] trunk/harbour
Message-ID: <E1M2PAz-0008Ot-Nw@bj8yhf1.ch3.sourceforge.com>

Revision: 11013
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11013&view=rev
Author:   druzus
Date:     2009-05-08 12:27:40 +0000 (Fri, 08 May 2009)

Log Message:
-----------
2009-05-08 14:35 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/Makefile
    * respect HB_HVM_ALL user settings
    ! export HB_HVM_ALL value set automatically - otherwise it's not seen
      when HBVMMT is compiled

  * harbour/source/vm/classes.c
    * exteneded :classsel() build in method to repsect scope given as
      2-nd parameter and return extended information compatible with
      :ClassFullSel() implemented in xHarbour by Francesco Saverio Giudice.
      This extended info is returned when 3-rd parameter is .T.

  * harbour/source/rtl/dateshb.c
    * do not generate RTE on wrong params in HB_STOT() function

  * harbour/contrib/xhb/xhbfunc.c
    + added hacked function which allows to send messages without respecting
      scope. It works only for the most visible data and does not support
      any automatic casting.

  * harbour/contrib/xhb/dumpvar.prg
    ! fixed HB_DumpVar() results on platforms where CRLF has different
       length then 2
    % small improve in hash item presentation
    + added __objGetMsgFullList() and __objGetValueFullList() as static
      functions. Code borrowed form xHarbour by Francesco Saverio Giudice.
    * make HB_DumpVar() working with object values.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/xhb/dumpvar.prg
    trunk/harbour/contrib/xhb/xhbfunc.c
    trunk/harbour/source/rtl/dateshb.c
    trunk/harbour/source/vm/Makefile
    trunk/harbour/source/vm/classes.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Fri May  8 08:54:51 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May  8 09:50:37 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11014] trunk/harbour
Message-ID: <E1M2PbH-0002q8-Bk@3kljzd1.ch3.sourceforge.com>

Revision: 11014
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11014&view=rev
Author:   vszakats
Date:     2009-05-08 12:54:50 +0000 (Fri, 08 May 2009)

Log Message:
-----------
2009-05-08 14:53 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/tget.prg
  * source/rtl/tclass.prg
    * hb_SToT( "" ) -> hb_SToT().

  * contrib/hbodbc/odbc.c
    + Added copyright, after extensive cleanup/fixing work.
    * ISCHAR() protected hb_parcx() calls changed to hb_parc().

  * contrib/hbole/tests/testole.prg
    * Checking for object creation in ADO example.

  * contrib/rddado/adordd.prg
    * Minor formatting.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbodbc/odbc.c
    trunk/harbour/contrib/hbole/tests/testole.prg
    trunk/harbour/contrib/rddado/adordd.prg
    trunk/harbour/source/rtl/tclass.prg
    trunk/harbour/source/rtl/tget.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From tkeefe at teksystems.com  Fri May  8 10:22:52 2009
From: tkeefe at teksystems.com (Keefe, Tracy)
Date: Fri May  8 11:44:37 2009
Subject: [Harbour] Clipper Advice
Message-ID: <D1B776AA48507448AEA8F185F029E9940255134C@ag00-exmbx05.allegisgroup.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 3681 bytes
Desc: image001.gif
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090508/f2b28c4a/attachment.gif
From mbelgrano at deltain.it  Fri May  8 12:11:31 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri May  8 13:21:09 2009
Subject: [Harbour] Litte problem in demowvg
Message-ID: <609353e70905080911h7d98c58fm6ab8d48c0e762e05@mail.gmail.com>

An Italian user have segnalate this little problem using
contrib\gtwvg\tests\demowvg
Maximize button not work as expectedwhen you click it disable
maximize/restore button
to be clear I am referring to this button
http://content.answers.com/main/content/img/CDE/_MAXIMIZ.GIF

Also From  menu (F)unctionality the option (M)aximize not work


-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090508/0a3b1fb5/attachment.html
From info at fsgiudice.com  Fri May  8 13:22:55 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri May  8 14:20:35 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11013] trunk/harbour
In-Reply-To: <E1M2PAz-0008Ot-Nw@bj8yhf1.ch3.sourceforge.com>
References: <E1M2PAz-0008Ot-Nw@bj8yhf1.ch3.sourceforge.com>
Message-ID: <4A046A6F.5070809@fsgiudice.com>

Hi Przemek,
thank you. Your diff is better than mine ;-)

Best Regards
Francesco

Il 08/05/2009 14.27, druzus@users.sourceforge.net ha scritto:
> Revision: 11013
>           http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11013&view=rev
> Author:   druzus
> Date:     2009-05-08 12:27:40 +0000 (Fri, 08 May 2009)
> 


From calimero22 at freemail.it  Fri May  8 12:24:02 2009
From: calimero22 at freemail.it (calimero22@freemail.it)
Date: Fri May  8 14:45:27 2009
Subject: [Harbour] Remote MDB e Harbour
Message-ID: <20090508162402.1D2B468001A3@eva105.dadanet.it>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090508/19e14b0b/attachment.html
From bedipritpal at hotmail.com  Fri May  8 14:44:31 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri May  8 15:40:47 2009
Subject: [Harbour] Litte problem in demowvg
In-Reply-To: <609353e70905080911h7d98c58fm6ab8d48c0e762e05@mail.gmail.com>
References: <609353e70905080911h7d98c58fm6ab8d48c0e762e05@mail.gmail.com>
Message-ID: <23451499.post@talk.nabble.com>


Hi

Tell your friend that it is not possible to implement "RESTORE"
button in GTWVG. This is a limitation I cannot cover.

(F)unctionality the option (M)aximize - I will fix it in a day or two.

Regards
Pritpal Bedi


Massimo Belgrano-3 wrote:
> 
> An Italian user have segnalate this little problem using
> contrib\gtwvg\tests\demowvg
> Maximize button not work as expectedwhen you click it disable
> maximize/restore button
> to be clear I am referring to this button
> http://content.answers.com/main/content/img/CDE/_MAXIMIZ.GIF
> 
> Also From  menu (F)unctionality the option (M)aximize not work
> 

-- 
View this message in context: http://www.nabble.com/Litte-problem-in-demowvg-tp23450030p23451499.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Fri May  8 17:18:47 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri May  8 18:19:50 2009
Subject: [Harbour] TWAIN Devices - EZTwain Librray Wrappers for Harbour
Message-ID: <23453842.post@talk.nabble.com>


Hello Everybody

I have complete EZTwain ( www.dosadi.com ) wrappers ( barring few functions
)
library ready and working. As EZTwain library is a commercial product,
is it appropriate to place hbeztwain.lib in contribs ?

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/TWAIN-Devices---EZTwain-Librray-Wrappers-for-Harbour-tp23453842p23453842.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Fri May  8 17:46:04 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri May  8 18:48:39 2009
Subject: [Harbour] Litte problem in demowvg
In-Reply-To: <23451499.post@talk.nabble.com>
References: <609353e70905080911h7d98c58fm6ab8d48c0e762e05@mail.gmail.com> 
	<23451499.post@talk.nabble.com>
Message-ID: <609353e70905081446m73fd8f38o8a204931bd3e7589@mail.gmail.com>

Thanks for clarificationwe have  in GTWVG same exciting feature like
 elastic resize, Mark and Copy but not restore
You need a GT api that save/restore all gt setting (font,col,row,xpos,ypos,
ecc)




2009/5/8 Pritpal Bedi <bedipritpal@hotmail.com>

>
> Hi
>
> Tell your friend that it is not possible to implement "RESTORE"
> button in GTWVG. This is a limitation I cannot cover.
>
> (F)unctionality the option (M)aximize - I will fix it in a day or two.
>
> Regards
> Pritpal Bedi
>
>
> Massimo Belgrano-3 wrote:
> >
> > An Italian user have segnalate this little problem using
> > contrib\gtwvg\tests\demowvg
> > Maximize button not work as expectedwhen you click it disable
> > maximize/restore button
> > to be clear I am referring to this button
> > http://content.answers.com/main/content/img/CDE/_MAXIMIZ.GIF
> >
> > Also From  menu (F)unctionality the option (M)aximize not work
> >
>
> --
> View this message in context:
> http://www.nabble.com/Litte-problem-in-demowvg-tp23450030p23451499.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090508/bafe995f/attachment.html
From mbelgrano at deltain.it  Fri May  8 18:32:46 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri May  8 19:37:57 2009
Subject: [Harbour] TWAIN Devices - EZTwain Librray Wrappers for Harbour
In-Reply-To: <23453842.post@talk.nabble.com>
References: <23453842.post@talk.nabble.com>
Message-ID: <609353e70905081532p2d54312obe4f35736c267747@mail.gmail.com>

Sure It is same situation in rddads that is wrapper for Sybase advantage
database server that is commercial product

2009/5/8 Pritpal Bedi <bedipritpal@hotmail.com>

>
> Hello Everybody
>
> I have complete EZTwain ( www.dosadi.com ) wrappers ( barring few
> functions
> )
> library ready and working. As EZTwain library is a commercial product,
> is it appropriate to place hbeztwain.lib in contribs ?
>
> Regards
> Pritpal Bedi
>
> --
> View this message in context:
> http://www.nabble.com/TWAIN-Devices---EZTwain-Librray-Wrappers-for-Harbour-tp23453842p23453842.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090509/9a4f0876/attachment.html
From bruno.luciani at gmail.com  Fri May  8 20:33:24 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Fri May  8 21:42:21 2009
Subject: [Harbour] Howto Create GTWVG contrib library in linux
Message-ID: <133778360905081733h475d0a53t18fb0fcebfc8c421@mail.gmail.com>

Which are software dependencis for this library ?

is the only library that I can' t make


Thanks in advance

Bruno


PD : the other is HBQT but I don' t know why
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090508/1cf480a0/attachment.html
From teo at windtelsoft.com  Fri May  8 20:52:41 2009
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Fri May  8 21:56:27 2009
Subject: [Harbour] Using OLE and WIN_PRN classes
Message-ID: <200905081952.42658.teo@windtelsoft.com>

Hello friendly Harbourians,

Under "contrib" dir there are two implementations of OLE; one in "hbwin", and 
the other in "hbole", personally I want to use the one contained in "hbole", 
the problem is that I need to link in too the "hbwin" lib because I need to 
use the WIN_PRN printer class contained there.

This results in linking phase errors showing that some functions are 
duplicated:

  - hb_oleVariantToItem
  - HB_FUN___OLEENUMNEXT
  - HB_FUN_OLEERROR
  - HB_FUN_GETACTIVEOBJECT
  - HB_FUN_CREATEOBJECT

Should I move the entire WIN_PRN implementation out of "hbwin" to a new 
"hbwinprn" contrib lib ?


best regards,

Teo


From bedipritpal at hotmail.com  Fri May  8 22:56:48 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri May  8 23:56:43 2009
Subject: [Harbour] Howto Create GTWVG contrib library in linux
In-Reply-To: <133778360905081733h475d0a53t18fb0fcebfc8c421@mail.gmail.com>
References: <133778360905081733h475d0a53t18fb0fcebfc8c421@mail.gmail.com>
Message-ID: <23456572.post@talk.nabble.com>


Hi


Bugzilla from bruno.luciani@gmail.com wrote:
> 
> Which are software dependencis for this library ?
> 
> is the only library that I can' t make
> 

GTWVG is WINDOWS specific lib and thus you cannot 
compile it on linux. It is excluded in default builds for *nixes.

HBQT should compile. Study INSTALL.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Howto-Create-GTWVG-contrib-library-in-linux-tp23456197p23456572.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sat May  9 13:08:45 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sat May  9 14:04:29 2009
Subject: [Harbour] TWAIN Devices - EZTwain Librray Wrappers for Harbour
In-Reply-To: <23453842.post@talk.nabble.com>
References: <23453842.post@talk.nabble.com>
Message-ID: <18d502870905091008t66245937lfdaaa9efdd3a6183@mail.gmail.com>

Hi Pritpal, imo not really as few ppl could build it, test it. Maybe
in examples. Brgds, Viktor

On 5/8/09, Pritpal Bedi <bedipritpal@hotmail.com> wrote:
>
> Hello Everybody
>
> I have complete EZTwain ( www.dosadi.com ) wrappers ( barring few functions
> )
> library ready and working. As EZTwain library is a commercial product,
> is it appropriate to place hbeztwain.lib in contribs ?
>
> Regards
> Pritpal Bedi
>
> --
> View this message in context:
> http://www.nabble.com/TWAIN-Devices---EZTwain-Librray-Wrappers-for-Harbour-tp23453842p23453842.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From harbour.01 at syenar.hu  Sat May  9 13:10:26 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sat May  9 14:06:46 2009
Subject: [Harbour] TWAIN Devices - EZTwain Librray Wrappers for Harbour
In-Reply-To: <609353e70905081532p2d54312obe4f35736c267747@mail.gmail.com>
References: <23453842.post@talk.nabble.com>
	<609353e70905081532p2d54312obe4f35736c267747@mail.gmail.com>
Message-ID: <18d502870905091010q54ba274bxe0f23ed4d0cd6a42@mail.gmail.com>

No, ace client is free. All can build rddads.

On 5/9/09, Massimo Belgrano <mbelgrano@deltain.it> wrote:
> Sure It is same situation in rddads that is wrapper for Sybase advantage
> database server that is commercial product
>
> 2009/5/8 Pritpal Bedi <bedipritpal@hotmail.com>
>
>>
>> Hello Everybody
>>
>> I have complete EZTwain ( www.dosadi.com ) wrappers ( barring few
>> functions
>> )
>> library ready and working. As EZTwain library is a commercial product,
>> is it appropriate to place hbeztwain.lib in contribs ?
>>
>> Regards
>> Pritpal Bedi
>>
>> --
>> View this message in context:
>> http://www.nabble.com/TWAIN-Devices---EZTwain-Librray-Wrappers-for-Harbour-tp23453842p23453842.html
>> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
>
>
> --
> Massimo Belgrano
>
From joe_bernardes at yahoo.com.br  Sun May 10 09:11:57 2009
From: joe_bernardes at yahoo.com.br (Joel-YAHOO)
Date: Sun May 10 10:17:09 2009
Subject: [Harbour] libhbvm error.
Message-ID: <DFEE41C80AB547C08CD85850A2FA15CE@xjadsrv>

Hello Everybody.
Please could someone tell me how to fix this error below.
In the generation of the binary harbour.

gcc  -Wall -W -O3 -fomit-frame-pointer -ohbtest.exe rt_miscc.o hbtest.o rt_array.o rt_date.o rt_file.o rt_hvm.o rt_hvma.o rt_math.o rt_misc.o rt_mt.o rt_str.o rt_stra.o rt_trans.o rt_class.o    -L../../../../lib/w32/mingw32 -Wl,--start-group    -lhbdebug  -lhbvm  -lhbrtl  -lhblang  -lhbrdd  -lhbrtl  -lhbvm  -lhbmacro  -lhbpp  -lhbcommon  -lrddntx  -lrddnsx  -lrddcdx  -lrddfpt  -lhbsix  -lhbhsx  -lhbusrrdd  -lhbuddall -lhbmainstd  -lgtcgi  -lgtpca  -lgtstd  -lgtwin  -lgtwvt  -lgtgui -Wl,--end-group -luser32 -lgdi32 -lwinspool -lcomctl32 -lcomdlg32 -lole32 -loleaut32 -luuid -lmpr -lws2_32 -lmapi32
../../../../lib/w32/mingw32/libhbvm.a(hvmall.o):hvmall.c:(.text+0xcc1): undefined reference to `hb_forceLinkMainWin'
collect2: ld returned 1 exit status
make[3]: *** [hbtest.exe] Error 1


//--------------------------------------------//
Best Regards
Joel M Bernardes
Programmer design - Oracle OCA.
+55 19 3565-4665
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090510/57388fab/attachment.html
From bruno.luciani at gmail.com  Sun May 10 18:34:52 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Sun May 10 19:42:13 2009
Subject: [Harbour] Printing in Linux
Message-ID: <133778360905101534q14943082r5597286b69ac418a@mail.gmail.com>

Howto setup printing ?

set printer to ....................


I need to print in default printer but
I just get a "Not ready printer" message

Of  course I have a printer configured

My linux use CUPS

Thanks in advance

Bruno
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090510/e98547d4/attachment.html
From druzus at acn.waw.pl  Mon May 11 06:00:09 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon May 11 06:53:40 2009
Subject: [Harbour] RDD inheritance
In-Reply-To: <4A040C61.6000608@dbtopas.lt>
References: <4A040C61.6000608@dbtopas.lt>
Message-ID: <20090511100009.GB25447@uran.home.aster.pl>

On Fri, 08 May 2009, Mindaugas Kavaliauskas wrote:

Hi,

> I'm using ADSX RDD, but sometimes I need to call ADS*() function. It does 
> not work, because hb_adsGetWorkAreaPointer() know nothing about ADSX. I 
> need to duplicate existing ADS*() function, changing the only function 
> hb_adsGetWorkAreaPointer() call to hb_adsxGetWorkAreaPointer().
> What is the more beautiful way to do this? I mean, I'd like to make ADS*() 
> functions work for all RDDs inherited from ADS RDD.

Good question. There is no easy way to detect inheritance order. We do
not keep such information in general RDD structures so it will have to
be implemented in given GT.
In this case probably the easiest way is using new DBI_ or RDDI_ action.
To not cause additional overhead you can add action which will not operate
on given item value so you can pass NULL as parameter, f.e.:
add to dbinfo.ch:

   #define RDDI_ADSBASED   45 /* check if given RDD inherits from ADS* ones */

add to adsRddInfo() method:

      case RDDI_ADSBASED:
         break;

and changed hb_adsGetWorkAreaPointer():

   ADSAREAP hb_adsGetWorkAreaPointer( void )
   {
      ADSAREAP pArea = ( ADSAREAP ) hb_rddGetCurrentWorkAreaPointer();

      if( pArea )
      {
         if( SELF_RDDINFO( SELF_RDDNODE( pArea ),
                           RDDI_ADSBASED, 0, NULL ) == HB_SUCCESS )
            return pArea;
      }
      return NULL;
   }

best regards,
Przemek
From toninhofwi at yahoo.com.br  Mon May 11 06:36:58 2009
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon May 11 07:23:25 2009
Subject: [Harbour] Using OLE and WIN_PRN classes
In-Reply-To: <200905081952.42658.teo@windtelsoft.com>
References: <200905081952.42658.teo@windtelsoft.com>
Message-ID: <ctvf05tt0inuhg7ddfeikk94bditgoj4rs@4ax.com>

Hi Teo,

I have the same problem here, so I'm using OLE from hbwin by now,
because hbole is not 100% ready yet.

Regards,

Toninho.


PS: send secont time... mail probelm again?
__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From druzus at users.sourceforge.net  Mon May 11 06:51:40 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Mon May 11 07:50:57 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11015] trunk/harbour
Message-ID: <E1M3T6i-0007U3-CJ@74yxhf1.ch3.sourceforge.com>

Revision: 11015
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11015&view=rev
Author:   druzus
Date:     2009-05-11 10:51:39 +0000 (Mon, 11 May 2009)

Log Message:
-----------
2009-05-11 13:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/workarea.c
    * formatting

  * harbour/source/vm/Makefile
    * minor cleanup

  * harbour/config/dir.cf
    ! added protection against double build call when -j<n> is used in
      install phase

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/dir.cf
    trunk/harbour/source/rdd/workarea.c
    trunk/harbour/source/vm/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Mon May 11 07:00:20 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May 11 08:06:17 2009
Subject: [Harbour] RDD inheritance
In-Reply-To: <20090511100009.GB25447@uran.home.aster.pl>
References: <4A040C61.6000608@dbtopas.lt>
	<20090511100009.GB25447@uran.home.aster.pl>
Message-ID: <18d502870905110400p798ca5ecm13712aff64d44bdc@mail.gmail.com>

>
> Good question. There is no easy way to detect inheritance order. We do
> not keep such information in general RDD structures so it will have to
> be implemented in given GT.
> In this case probably the easiest way is using new DBI_ or RDDI_ action.
> To not cause additional overhead you can add action which will not operate
> on given item value so you can pass NULL as parameter, f.e.:
> add to dbinfo.ch:
>
>   #define RDDI_ADSBASED   45 /* check if given RDD inherits from ADS* ones
> */


Or even:
dbInfo( RDDI_BASEDON, "ADS" ) -> .T./.F.

This way we won't introduce 3rd party specific names and macros in
core dbinfo.ch. Anyhow such constant as RDDI_ADSBASED should
better be defined in ads.ch anyway.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090511/583400ab/attachment.html
From druzus at acn.waw.pl  Mon May 11 05:46:11 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon May 11 08:40:26 2009
Subject: [Harbour] Printing in Linux
In-Reply-To: <133778360905101534q14943082r5597286b69ac418a@mail.gmail.com>
References: <133778360905101534q14943082r5597286b69ac418a@mail.gmail.com>
Message-ID: <20090511094611.GA25447@uran.home.aster.pl>

On Sun, 10 May 2009, Bruno Luciani wrote:

Hi,

> Howto setup printing ?
> set printer to ....................
> I need to print in default printer but
> I just get a "Not ready printer" message
> Of  course I have a printer configured
> My linux use CUPS

SET PRINTER TO "|lpr -P<lpname>"

best regards,
Przemek
From vszakats at users.sourceforge.net  Mon May 11 08:09:20 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May 11 09:02:41 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11016] trunk/harbour
Message-ID: <E1M3UJs-00021D-OB@dn4whf1.ch3.sourceforge.com>

Revision: 11016
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11016&view=rev
Author:   vszakats
Date:     2009-05-11 12:09:17 +0000 (Mon, 11 May 2009)

Log Message:
-----------
2009-05-11 14:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * INSTALL
    + Added TROUBLESHOOTING section. Contains only obvious,
      yet missed information.
    + Added few words about HB_DIR* envvar.

  * external/libpng/LICENSE
  * external/libpng/pngerror.c
  * external/libpng/pngrio.c
  * external/libpng/pngconf.h
  * external/libpng/pngset.c
  * external/libpng/pngwio.c
  * external/libpng/pngrutil.c
  * external/libpng/pngwutil.c
  * external/libpng/pngread.c
  * external/libpng/pngmem.c
  * external/libpng/png.c
  * external/libpng/pngtest.c
  * external/libpng/png.h
  * external/libpng/pngrtran.c
  * external/libpng/link.txt
    * Updated libpng to 1.2.36 (from 1.2.35)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/external/libpng/LICENSE
    trunk/harbour/external/libpng/link.txt
    trunk/harbour/external/libpng/png.c
    trunk/harbour/external/libpng/png.h
    trunk/harbour/external/libpng/pngconf.h
    trunk/harbour/external/libpng/pngerror.c
    trunk/harbour/external/libpng/pngmem.c
    trunk/harbour/external/libpng/pngread.c
    trunk/harbour/external/libpng/pngrio.c
    trunk/harbour/external/libpng/pngrtran.c
    trunk/harbour/external/libpng/pngrutil.c
    trunk/harbour/external/libpng/pngset.c
    trunk/harbour/external/libpng/pngtest.c
    trunk/harbour/external/libpng/pngwio.c
    trunk/harbour/external/libpng/pngwutil.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From adam_l at poczta.onet.pl  Mon May 11 08:30:19 2009
From: adam_l at poczta.onet.pl (Adam Lubszczyk)
Date: Mon May 11 09:35:44 2009
Subject: [Harbour] Timer
Message-ID: <23482401.post@talk.nabble.com>


Hi!

Can I define in Harbout timer ?

Like:
PROCEDURE main
LOCAL hTimer:=hb_TimerNew( {|hT|MyProc(hT)} , 1000)  //call in 1000ms cycle
MyProc()
hb_TimerStart(hTimer)   // enable timer
...
...
hb_TimerStop(hTimer)    // disable timer
hb_TimerDelete(hTimer)  //destroy timer
RETURN
//****
PROCEDURE MyProc(hTr)
hb_TimerStop(hTr)
...
hb_TimerStart(hTr)
RETURN


Adam
-- 
View this message in context: http://www.nabble.com/Timer-tp23482401p23482401.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at users.sourceforge.net  Mon May 11 08:35:21 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Mon May 11 09:42:14 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11017] trunk/harbour
Message-ID: <E1M3Uj3-0002Vj-BG@dn4whf1.ch3.sourceforge.com>

Revision: 11017
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11017&view=rev
Author:   druzus
Date:     2009-05-11 12:35:20 +0000 (Mon, 11 May 2009)

Log Message:
-----------
2009-05-11 14:43 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbexprop.h
  * harbour/include/hbexprb.c
  * harbour/source/common/expropt2.c
    + added compile time optimization for hb_stot() function

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/include/hbexprb.c
    trunk/harbour/include/hbexprop.h
    trunk/harbour/source/common/expropt2.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Mon May 11 09:04:32 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon May 11 09:58:51 2009
Subject: [Harbour] RDD inheritance
In-Reply-To: <18d502870905110400p798ca5ecm13712aff64d44bdc@mail.gmail.com>
References: <4A040C61.6000608@dbtopas.lt>
	<20090511100009.GB25447@uran.home.aster.pl>
	<18d502870905110400p798ca5ecm13712aff64d44bdc@mail.gmail.com>
Message-ID: <20090511130432.GA28307@uran.home.aster.pl>

On Mon, 11 May 2009, Szak?ts Viktor wrote:

Hi,

> > Good question. There is no easy way to detect inheritance order. We do
> > not keep such information in general RDD structures so it will have to
> > be implemented in given GT.
> > In this case probably the easiest way is using new DBI_ or RDDI_ action.
> > To not cause additional overhead you can add action which will not operate
> > on given item value so you can pass NULL as parameter, f.e.:
> > add to dbinfo.ch:
> >   #define RDDI_ADSBASED   45 /* check if given RDD inherits from ADS* ones
> > */
> Or even:
> dbInfo( RDDI_BASEDON, "ADS" ) -> .T./.F.
> This way we won't introduce 3rd party specific names and macros in
> core dbinfo.ch. Anyhow such constant as RDDI_ADSBASED should
> better be defined in ads.ch anyway.

I agree that it's nice solution but there are two problems with it:
1. it forces allocating new item for "ADS" string what in some cases can
   cause noticeable performance overhead in C code and it's sth what I'd
   like to eliminate when I proposed RDDI_ADSBASED.
2. We have few ADS based RDDs: "ADS" (old for historical reasons, kept
   only for backward compatibility), "ADT", "ADSCDX", "ADSNTX", "ADSVFP".
   Expect "ADS" non of them inherits from "ADS" RDD so we will have to
   hard code that all of them accept such string as super RDD name so it
   stops to be as nice as it should. Calling:
      dbInfo( RDDI_BASEDON, "ADS" ) .or. ;
      dbInfo( RDDI_BASEDON, "ADT" )
      dbInfo( RDDI_BASEDON, "ADSCDX" )
      [...]
   to keep it clean will cause additional speed overhead.
The 2-nd one is not very important so we can ignore it and hard code
the "ADS" string as supper RDD name but the 1-st one can be in code
which has to very often call hb_adsGetWorkAreaPointer().

best regards,
Przemek
From dbtopas at dbtopas.lt  Mon May 11 10:03:27 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon May 11 11:00:52 2009
Subject: [Harbour] Timer
In-Reply-To: <23482401.post@talk.nabble.com>
References: <23482401.post@talk.nabble.com>
Message-ID: <4A08302F.1040809@dbtopas.lt>

Hi,


> Can I define in Harbout timer ?

If MultiThread solution is acceptable for you, read a longer discussion 
having subject "hblognet, inet and threads", from
http://lists.harbour-project.org/pipermail/harbour/2008-December/date.html


Regards,
Mindaugas

From harbour.01 at syenar.hu  Mon May 11 13:15:18 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May 11 14:13:59 2009
Subject: [Harbour] Error(2) BASE/1301 Object destructor failure: Reference
	to freed block
Message-ID: <18d502870905111015u17d365eel4aba394dd55ada86@mail.gmail.com>

Hi All,
I just received this error in my otherwise stable app:
Error(2) BASE/1301 Object destructor failure: Reference to freed block
Then it gave an MSVC RTL error message, finally a
regular app crash (but without logs).

This happened with an MSVC 2005 build, rev 10222, in
an hb_idleSleep() call, after leaving the app running for
hours, most of the time idling with a screen saver and
playing with it for a few minutes. The error happened
when trying to exit to idle app. This also means I cannot
create a small example to replicate the error.

Is there anything I can do to track this down, or other
ideas why could this happen?

[ The app uses some private C code, but only simple
function calls and it also does some GC collected
allocations in gauge/file viewer functionality. ]

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090511/61337724/attachment.html
From calimero22 at freemail.it  Mon May 11 13:18:01 2009
From: calimero22 at freemail.it (calimero22@freemail.it)
Date: Mon May 11 14:18:19 2009
Subject: [Harbour] MySQL Problem
Message-ID: <20090511171801.106396800261@eva105.dadanet.it>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090511/ba1407c9/attachment.html
From qiinfo at ig.com.br  Mon May 11 13:42:15 2009
From: qiinfo at ig.com.br (Rossine)
Date: Mon May 11 14:42:38 2009
Subject: [Harbour] Errors with 11017
Message-ID: <23488092.post@talk.nabble.com>


Hello,

I see this errors in 11017:

[ERRORS]
../../../../source/main/win/bcc/harbour.exe ../../tclass.prg -n1
-i../../../../include -q0 -w3 -es2 -kmo -l -gc3  
bcc32.exe -I. -I../../../../include -q -tWM -w -w-sig- -Q -d -6 -O2 -OS -Ov
-Oi -Oc  -DHB_GC_AUTO  -c tclass.c -otclass.obj
tclass.c:
Warning W8066 tclass.c 1086: Unreachable code in function HB_FUN_ADDDATA
Error E2448 tclass.c 1140: Undefined label 'lab00006' in function
HB_FUN_ADDDATA
Warning W8066 tclass.c 1235: Unreachable code in function
HB_FUN_ADDCLASSDATA
Error E2448 tclass.c 1289: Undefined label 'lab00006' in function
HB_FUN_ADDCLASSDATA
*** 2 errors in Compile ***
make.exe[3]: Leaving directory `C:/harbour/source/rtl/win/bcc'
make.exe[2]: Leaving directory `C:/harbour/source/rtl'
make.exe[1]: Leaving directory `C:/harbour/source'
[ENDERRORS]

Best Regards,

Rossine.

-- 
View this message in context: http://www.nabble.com/Errors-with-11017-tp23488092p23488092.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at users.sourceforge.net  Mon May 11 15:13:14 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Mon May 11 16:09:57 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11018] trunk/harbour
Message-ID: <E1M3aw6-0004rQ-Ci@dn4whf1.ch3.sourceforge.com>

Revision: 11018
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11018&view=rev
Author:   druzus
Date:     2009-05-11 19:13:09 +0000 (Mon, 11 May 2009)

Log Message:
-----------
2009-05-11 21:21 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/compiler/gencc.c
    ! added missing HB_GENC_LABEL() call in hb_p_pushtimestamp

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/compiler/gencc.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Mon May 11 19:15:15 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May 11 20:18:07 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11019] trunk/harbour
Message-ID: <E1M3eiJ-00032u-EN@dn4whf1.ch3.sourceforge.com>

Revision: 11019
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11019&view=rev
Author:   vszakats
Date:     2009-05-11 23:15:14 +0000 (Mon, 11 May 2009)

Log Message:
-----------
2009-05-12 01:13 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + Added -beep/nobeep/beep- options to enable beep signal
      when build is finished. In case of error a double beep
      will be heard.

  * INSTALL
    * Minor formatting.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From qiinfo at ig.com.br  Mon May 11 19:41:15 2009
From: qiinfo at ig.com.br (Rossine)
Date: Mon May 11 21:04:07 2009
Subject: [Harbour] Errors with 11017
In-Reply-To: <23488092.post@talk.nabble.com>
References: <23488092.post@talk.nabble.com>
Message-ID: <23493792.post@talk.nabble.com>


Hi,

Problem solved.

Thank you very much,

Rossine.

-- 
View this message in context: http://www.nabble.com/Errors-with-11017-tp23488092p23493792.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From fmancera at viaopen.com  Tue May 12 02:43:34 2009
From: fmancera at viaopen.com (Fernando Mancera)
Date: Tue May 12 03:27:45 2009
Subject: [Harbour] MySQL Problem
In-Reply-To: <20090511171801.106396800261@eva105.dadanet.it>
References: <20090511171801.106396800261@eva105.dadanet.it>
Message-ID: <000901c9d2cc$fa217db0$ee647910$@com>

Hello Giovanni,

Please, check your firewall for allow your application connect with db4free.net.
Also check what port need db4free.net for connect to MYSQL DB.

Regards,

Fernando Mancera
www.viaopen.com



 

De: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] En nombre de calimero22@freemail.it
Enviado el: lunes, 11 de mayo de 2009 19:18
Para: harbour@harbour-project.org; harbour@harbour-project.org
Asunto: [Harbour] MySQL Problem

 

Hi

i've a mysql database on www.db4free.net

I want to connect it with my harbour PRG.

Here's the source code:

#include "adordd.ch"
 REQUEST ADORDD
 function Main()
    setmode(25,80)
    USE giovanni VIA "ADORDD" TABLE "clienti" MYSQL FROM "db4free.net" USER "gio22" PASSWORD "marcella"
    Browse()
    USE
 return nil

 

The compilation is OK, but at the execution it shows the following message:

 Error ADODB.Connection/0  S_OK: OPEN (in the red alert window).

Why?

Thank you in advance.

Giovanni

 

 

 




--

Dada.net has a new music store! Get MP3s and Ringtones from 1000s of artists, transfer them to any device and keep them forever.Click <http://us.dada.net/>  here to check it out. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090512/2cf0c412/attachment.html
From vszakats at users.sourceforge.net  Tue May 12 03:32:46 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue May 12 04:38:36 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11020] trunk/harbour
Message-ID: <E1M3mTm-0001mC-SV@bj8yhf1.ch3.sourceforge.com>

Revision: 11020
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11020&view=rev
Author:   vszakats
Date:     2009-05-12 07:32:45 +0000 (Tue, 12 May 2009)

Log Message:
-----------
2009-05-12 09:25 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * doc/cmdline.txt
  * doc/howtosvn.txt
    + Added CC copyright.

  * source/rtl/alert.prg
  * include/hbextern.ch
    + HB_ALERT(). Now this function holds all extended features:
      nDelay support and any type for first parameter.
    * ALERT() now behaves completely along Clipper version, without
      extensions. HB_EXTENSION no longer modifies its behaviour, so
      if someone needs these extended features, there is no need to
      build with HB_EXTENSION, only ALERT() calls have to be
      converted to HB_ALERT(). INCOMPATIBLE (in some scenarios).

  * contrib/hbtip/utils.c
    % TIP_TIMESTAMP() code cleaned to remove redundancy of
      having two full distinct copies of this function. Now
      platform independent parts are kept common.
    ! TIP_TIMESTAMP() fixed hb_parl() to hb_parnl() for 'hours'
      parameter. I wonder how this bug wasn't noticed till now.
      Please someone test, maybe I'm missing the point of this
      parameter, but it's unlikely the intent was a logical value
      as it's later converted to timestamp.

  * contrib/hbtip/thtml.prg
  * contrib/hbtip/sendmail.prg
  * contrib/hbtip/httpcln.prg
  * contrib/hbtip/ftpcln.prg
    * END -> END*
    * Minor formatting.

  * contrib/hbtip/base64x.c
  * contrib/hbtip/smtpcln.prg
    * Formatted.
    * Minor optimizations (File() -> hb_FileExists(), ::AuthPlain()
      simplification).
    % BUILDUSERPASSSTRING() rewritten in Harbour. It's a very
      simple function.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbtip/base64x.c
    trunk/harbour/contrib/hbtip/ftpcln.prg
    trunk/harbour/contrib/hbtip/httpcln.prg
    trunk/harbour/contrib/hbtip/sendmail.prg
    trunk/harbour/contrib/hbtip/smtpcln.prg
    trunk/harbour/contrib/hbtip/thtml.prg
    trunk/harbour/contrib/hbtip/utils.c
    trunk/harbour/doc/cmdline.txt
    trunk/harbour/doc/howtosvn.txt
    trunk/harbour/include/hbextern.ch
    trunk/harbour/source/rtl/alert.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Tue May 12 04:44:04 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue May 12 05:43:44 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11021] trunk/harbour
Message-ID: <E1M3nam-0004wh-3P@c3vjzd1.ch3.sourceforge.com>

Revision: 11021
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11021&view=rev
Author:   vszakats
Date:     2009-05-12 08:44:03 +0000 (Tue, 12 May 2009)

Log Message:
-----------
2009-05-12 10:37 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/xhb/hbcompat.ch
    + Added HB_GETENV() <-> GETENV() conversions.
    + Added MEMOWRIT() translation for xhb sources.

  * source/rtl/at.c
  * source/rtl/gete.c
  * source/rtl/memofile.c
    - Deleted HB_EXTENSION branches. Users of extended
      GETENV(), GETE(), AT() and MEMOWRIT() functionality
      will have to use hbcompat.ch to stay compatible with xhb
      (this isn't needed for MEMOWRIT()).
      INCOMPATIBLE change for those who enabled HB_EXTENSION
      in Harbour. Hopefully xhb will implement HB_AT() and
      HB_GETENV() in the future so hbcompat.ch will become
      unnecessary.

   * include/hbextern.ch
   + source/rtl/radiobhb.prg
   * source/rtl/radiobtn.prg
     * RADIOBUTTON() Harbour extension moved to a separate file
       to cause no harm for programs defining this function locally.
       At the same time, HB_EXTENSION protection got removed so
       it can be accessed in default builds as a RADIOBUTTO() 
       alternative.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/xhb/hbcompat.ch
    trunk/harbour/include/hbextern.ch
    trunk/harbour/source/rtl/Makefile
    trunk/harbour/source/rtl/at.c
    trunk/harbour/source/rtl/gete.c
    trunk/harbour/source/rtl/memofile.c
    trunk/harbour/source/rtl/radiobtn.prg

Added Paths:
-----------
    trunk/harbour/source/rtl/radiobhb.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Tue May 12 07:14:11 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Tue May 12 08:10:20 2009
Subject: [Harbour] hbmk2: any features still missing?
Message-ID: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>

Hi All,
Is there any important feature still missing from hbmk2?

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090512/73cf2917/attachment.html
From druzus at acn.waw.pl  Mon May 11 14:52:24 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue May 12 08:41:44 2009
Subject: [Harbour] Error(2) BASE/1301 Object destructor failure:
	Reference to freed block
In-Reply-To: <18d502870905111015u17d365eel4aba394dd55ada86@mail.gmail.com>
References: <18d502870905111015u17d365eel4aba394dd55ada86@mail.gmail.com>
Message-ID: <20090511185224.GA19554@uran.home.aster.pl>

On Mon, 11 May 2009, Szak?ts Viktor wrote:

Hi,

> I just received this error in my otherwise stable app:
> Error(2) BASE/1301 Object destructor failure: Reference to freed block
> Then it gave an MSVC RTL error message, finally a
> regular app crash (but without logs).
> This happened with an MSVC 2005 build, rev 10222, in
> an hb_idleSleep() call, after leaving the app running for
> hours, most of the time idling with a screen saver and
> playing with it for a few minutes. The error happened
> when trying to exit to idle app. This also means I cannot
> create a small example to replicate the error.
> Is there anything I can do to track this down, or other
> ideas why could this happen?
> [ The app uses some private C code, but only simple
> function calls and it also does some GC collected
> allocations in gauge/file viewer functionality. ]

hb_idleSleep() can activate the GC so it can be shown in call stack
but the problem is not in this function but somewhere else, probably
in your local code but I can only guess. Harbour counts all GC allocations
and deallocations and if they are not equal or when destructor reattach
destroyed block to known item which is not destroyed in the same pass
then above RT error message is generated.
It can be caused by stupid typo like dummy hb_gcAlloc() call without
attaching the result to know for HVM HB_ITEM, f.e.:

   proc main()
      f()
      hb_idleReset(); hb_idleSleep(1)
   return
   #pragma begindump
   #include "hbapi.h"
   HB_FUNC_STATIC( F ) { hb_gcAlloc( 10, NULL ); }
   #pragma enddump

or it can be sth more serious like result of some memory corruption, f.e.:

   proc main()
      f( {} )
      hb_idleReset(); hb_idleSleep(1)
   return
   #pragma begindump
   #include "hbapi.h"
   HB_FUNC_STATIC( F )
   {
      PHB_ITEM pItem = hb_param( 1, HB_IT_ANY );
      /* simulate memory corruption */
      memset( pItem, 0, 4 );
   }
   #pragma enddump


What exactly happen in you case I do not know. I can only tell you that
one memory blocks allocated by hb_gcAlloc():
   1. was not attached to know item at all
or:
   2. it was reused and attached to new item after destroy (hb_gcFree())
or:
   3. the reference counter to such memory block (or item which kept such
      reference counter) had been corrupted (overwritten) by some buggy code.

best regards,
Przemek
From M.Horodyski at pzuzycie.com.pl  Tue May 12 07:51:12 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Tue May 12 08:53:51 2009
Subject: [Harbour] Optimization
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C95022E2749@PINK.zycie.pzu>

In my app one expression is very often done. 
Due to the saving of memory, important of information is in string, not
in array.
In xHarbour, this instruction was :

If  hb_isNumeric( l := tab_prg[ n]:Eval()) .and. tab_skok[ n] == '1'

In Harbour ( withot indexed strings) now I have :

If hb_isNumeric( l := tab_prg[ n]:Eval()) .and. StrPeek( tab_skok, n) ==
49 // 0x31

Speed of evaluation in Hanbour is 2 times faster than in xHarbour, but
my ask is, can I this more speed ?

Regards,
Marek Horodyski
From myorg63 at mail.ru  Tue May 12 08:03:50 2009
From: myorg63 at mail.ru (Petr Chornyj)
Date: Tue May 12 09:02:49 2009
Subject: [Harbour] hbzlib and NO_GZCOMPRESS
Message-ID: <23501245.post@talk.nabble.com>


Hi All!

It is possible to change our rtl/hbzlib.c to respect a NO_GZCOMPRESS
definition (see gzio.c)?
And second question: can we add a wrapper for gputc also?


Thanks,
Petr
-- 
View this message in context: http://www.nabble.com/hbzlib-and-NO_GZCOMPRESS-tp23501245p23501245.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From sscc at mweb.co.za  Tue May 12 08:21:10 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue May 12 09:22:06 2009
Subject: [Harbour] hbmk2: any features still missing?
In-Reply-To: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
References: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
Message-ID: <4A0969B6.6030605@mweb.co.za>

Viktor Szak?ts wrote:

> Is there any important feature still missing from hbmk2?

Yes, automatic correction of my bugs.

Thank you very much for your herculean efforts.

Regards
Alex
From mbelgrano at deltain.it  Tue May 12 08:20:33 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue May 12 09:25:41 2009
Subject: [Harbour] hbmk2: any features still missing?
In-Reply-To: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
References: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
Message-ID: <609353e70905120520l261c549csacea0b7e943bca@mail.gmail.com>

I am using with pleasure hbmk2 and the only item can be
Simpler language Script for manipulate  and copy in final dir,harbour
library, ecc

2009/5/12 Viktor Szak?ts <harbour.01@syenar.hu>

> Hi All,
> Is there any important feature still missing from hbmk2?
>
> Brgds,
> Viktor
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>


-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090512/f6003eab/attachment.html
From druzus at users.sourceforge.net  Tue May 12 09:39:53 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue May 12 10:33:16 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11022] trunk/harbour
Message-ID: <E1M3sD3-00073M-Lw@3kljzd1.ch3.sourceforge.com>

Revision: 11022
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11022&view=rev
Author:   druzus
Date:     2009-05-12 13:39:52 +0000 (Tue, 12 May 2009)

Log Message:
-----------
2009-05-12 15:48 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/hbzlib.c
    + added HB_GZPUTC( <pGZipStream>, <nByte> ) => <nResult>

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/rtl/hbzlib.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bedipritpal at hotmail.com  Tue May 12 09:42:17 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue May 12 10:35:40 2009
Subject: [Harbour] hbmk2: any features still missing?
In-Reply-To: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
References: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
Message-ID: <23502866.post@talk.nabble.com>


Hi


Viktor Szak?ts wrote:
> 
> Hi All,
> Is there any important feature still missing from hbmk2?
> 

Macro parser in .PRG and .C | .CPP files.

In batch file:
SET MySourceFolder=c:\dev_sources\vouch

In .HBM
${MySourceFolder}\vouch.prg

This way I can move my projects to any drive | directory
just changing one entry in batch file only.

Rest all is fine with hbmk2. Thank you for this tool.

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/hbmk2%3A-any-features-still-missing--tp23501356p23502866.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vailtom at gmail.com  Tue May 12 10:06:46 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Tue May 12 10:57:25 2009
Subject: [Harbour] hbmk2: any features still missing?
In-Reply-To: <609353e70905120520l261c549csacea0b7e943bca@mail.gmail.com>
References: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
	<609353e70905120520l261c549csacea0b7e943bca@mail.gmail.com>
Message-ID: <531d7a750905120706j1d8aba43l6bb203487c4c3ab3@mail.gmail.com>

In this latter comments may cite as an example file. HBM with the
following lines:

-GC3
-ES2
-w

main.prg
test.prg

!copy main.exe c:\soft\demo\main.exe
!del main.exe

But think well ... Wich the commands what should be executed in
several situations? Such as:

* If an error occurs, which commands will be executed?
* When finished with the build, which commands will be executed?

or other issues such as:
* Does hbmk2 could compress the files generating a ZIP?
* Is it possible what increment the version information in my. windows exe?

Personally I think what I can do all this with a good batch file and
transfer this to the hbmk2 really does not make a tool better than it
already is.
From vszakats at users.sourceforge.net  Tue May 12 10:11:22 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue May 12 11:04:25 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11023] trunk/harbour
Message-ID: <E1M3shW-0006Il-82@c3vjzd1.ch3.sourceforge.com>

Revision: 11023
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11023&view=rev
Author:   vszakats
Date:     2009-05-12 14:11:21 +0000 (Tue, 12 May 2009)

Log Message:
-----------
2009-05-12 16:10 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + Added -hbrun option which will run the target without trying to
      build it. If target is missing, the command will fail.
    + -run/-hbrun options will now run GUI target executable using 'start'
      command on Windows platforms so that hbmk2 will return and leave
      the app running.

  * include/hbextern.ch
    + Added HB_GZPUTC().

  * include/hbsetup.ch
    - Removed HB_EXTENSION from documented list of build modified macros.

  * source/common/hbverdsp.c
    - Deleted HB_EXTENSION dependent part.

  * source/rtl/mlcfunc.c
    - Deleted HB_EXTENSION branch. Please modify your program to
      use Set( _SET_EOL ) instead of passing EOLs explicitly to
      memo functions. This works also in xhb.
      INCOMPATIBLE when for HB_EXTENSION builds.

  * source/rtl/alert.prg
    ! Minor in comment.

  * source/rtl/saverest.c
    - Removed SAVESCREEN()/RESTSCREEN() extra "lNoCheck" parameter
      when HB_EXTENSION is enabled. Please report on the list
      if you need this functionality.

  * source/compiler/hbfunchk.c
    ! Fix to prev: AT() declaration.

  ; TODO: Clean rest of HB_EXTENSION stuff.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/include/hbextern.ch
    trunk/harbour/include/hbsetup.ch
    trunk/harbour/source/common/hbverdsp.c
    trunk/harbour/source/compiler/hbfunchk.c
    trunk/harbour/source/rtl/alert.prg
    trunk/harbour/source/rtl/mlcfunc.c
    trunk/harbour/source/rtl/saverest.c
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From toninhofwi at yahoo.com.br  Tue May 12 09:56:13 2009
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue May 12 11:04:36 2009
Subject: [Harbour] hbmk2: any features still missing?
In-Reply-To: <4A0969B6.6030605@mweb.co.za>
References: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
	<4A0969B6.6030605@mweb.co.za>
Message-ID: <3vvi05p131ttpfs4ikpcjp9nhmi3dugv36@4ax.com>

>Thank you very much for your herculean efforts.

+1,

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From bedipritpal at hotmail.com  Tue May 12 10:16:38 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue May 12 11:12:05 2009
Subject: [Harbour] hbmk2: any features still missing?
In-Reply-To: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
References: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
Message-ID: <23503451.post@talk.nabble.com>


Hello Viktor


Viktor Szak?ts wrote:
> 
> Hi All,
> Is there any important feature still missing from hbmk2?
> 

Nested projects.

I mean if .hbm includes another .hbm 
it should treat it as a nested another project 
contrary to current implementation where another .hbm 
becomes a part of the current.

May be .hbm implementation be kept as is and a new
extension is introduced, say .hbprj and if encountered,
replace  .hbprj with  .hbm and treated as nested project
redefining all attributes from .hbprj.

This way I can stay only in one folder and any changes 
in related libs ae automatically taken care of. Just like xMate.

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/hbmk2%3A-any-features-still-missing--tp23501356p23503451.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From myorg63 at mail.ru  Tue May 12 10:05:39 2009
From: myorg63 at mail.ru (Petr Chornyj)
Date: Tue May 12 11:39:03 2009
Subject: [Harbour] hbmk2: any features still missing?
In-Reply-To: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
References: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
Message-ID: <23503236.post@talk.nabble.com>




Viktor Szak?ts wrote:
> 
> Is there any important feature still missing from hbmk2?
> 

Hi,
I don't know is important or not
but, please tell my what expected result for this

hbmk2 @all.hbm
hbmk2 @all2.hbm

-------- all.hbm -------
test2.hbm
test1.hbm
test.hbm
-----------------------

-------- all2.hbm ------
test1.hbm
test2.hbm
test.hbm
-----------------------

------ test.hbm -------
test.prg
-omytest
-----------------------

------ test1.hbm ------
-hblib
test1.prg
-omytest1
-----------------------
------ test2.hbm ------
-hbcc
-gh
test2.prg
-omytest2
-----------------------

------ test.prg ------
proc main
? (__FILE__)
return
-----------------------

------ test1.prg ------
proc libtest
? (__FILE__)
return
-----------------------

------ test2.prg ------
proc hrbtest
? (__FILE__)
return
-----------------------


Regards,
Petr

 



-- 
View this message in context: http://www.nabble.com/hbmk2%3A-any-features-still-missing--tp23501356p23503236.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Tue May 12 11:00:40 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue May 12 11:50:56 2009
Subject: [Harbour] hbmk2: any features still missing?
In-Reply-To: <23502866.post@talk.nabble.com>
References: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
	<23502866.post@talk.nabble.com>
Message-ID: <8D0F2119-FC74-418A-8F26-484FF74463D3@syenar.hu>

Hi Pritpal,

>> Hi All,
>> Is there any important feature still missing from hbmk2?
>>
>
> Macro parser in .PRG and .C | .CPP files.
>
> In batch file:
> SET MySourceFolder=c:\dev_sources\vouch
>
> In .HBM
> ${MySourceFolder}\vouch.prg

I think you should just let go this idea of storing any
absolute paths in an .hbm file at all. As I wrote, all paths
in .hbm will inherit its owner .hbm base dir, so if
you move the .hbm it will automatically move all file
references without doing any additional steps.

Maybe your situation is special in some ways I don't know,
but for me it works like this without any problem. The
only absolute reference I need is to the *root* .hbm file,
and even for this only if it's not in current dir. The
other possible location for absolute paths is .hbm file
references inside an .hbm file, but that's again only one
occurrence, so it's just as easy to modify it as an envvar.
Macro expansion could be added to .hbm file parameters,
but IMO this wouldn't really help making things simpler.
Pls tell if it would.

[ Macro expansion in source files is would just make
parsing slower and would give way to hard to port/move
.hbm files, I'd like to avoid both. ]

> This way I can move my projects to any drive | directory
> just changing one entry in batch file only.

Pls try what I suggested. Store you .hbm in your project
root and refer to that file from other locations, use
simple relative dirs inside that .hbm.

> Rest all is fine with hbmk2. Thank you for this tool.

You're welcome.

I'd still like to finish incremental .po generation, but
didn't start it yet.

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue May 12 11:36:31 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue May 12 12:39:05 2009
Subject: [Harbour] hbmk2: any features still missing?
In-Reply-To: <531d7a750905120706j1d8aba43l6bb203487c4c3ab3@mail.gmail.com>
References: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
	<609353e70905120520l261c549csacea0b7e943bca@mail.gmail.com>
	<531d7a750905120706j1d8aba43l6bb203487c4c3ab3@mail.gmail.com>
Message-ID: <45CE2AD5-A40C-403B-AB68-6AABF58E2D6C@syenar.hu>

> In this latter comments may cite as an example file. HBM with the
> following lines:
>
> -GC3
> -ES2
> -w
>
> main.prg
> test.prg
>
> !copy main.exe c:\soft\demo\main.exe
> !del main.exe
>
> But think well ... Wich the commands what should be executed in
> several situations? Such as:
>
> * If an error occurs, which commands will be executed?
> * When finished with the build, which commands will be executed?

Probably we could add an -install option which would
simply copy the resulting executable to one (or more)
locations, as a post processing command, before
execution, after compression. I don't really see the
need for it yet, maybe if we'd like to replace GNU Make
for contribs, it could be useful.

> or other issues such as:
> * Does hbmk2 could compress the files generating a ZIP?

No, hbmk2 won't create an install pack. This is a wholly
different issue with different inputs. Other such ideas
is to upload it to an FTP, but that's again only useful
by itself in very few situations.

> * Is it possible what increment the version information in my.  
> windows exe?

Probably such thing could be added, however I prefer to
use some version number coming from a version control
system, there is option available to do that. The idea
could be extended to work in some ways without any
version control system, but it's difficult for me to
develop it when I don't need it. Could be autoincrement
(fragile), could be formed from timestamp (too many possible
variations), but the trend is definitely VCS.

> Personally I think what I can do all this with a good batch file and
> transfer this to the hbmk2 really does not make a tool better than it
> already is.

Thanks, good news.

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue May 12 11:47:23 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue May 12 12:50:30 2009
Subject: [Harbour] hbmk2: any features still missing?
In-Reply-To: <23503236.post@talk.nabble.com>
References: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
	<23503236.post@talk.nabble.com>
Message-ID: <3CD2703A-34A6-4415-AAA8-6AC63797689B@syenar.hu>

Hi Petr,

Not a successful build that's for sure :)

Remember that one hbmk2 call can only have one target,
one call == one project.

.hbm files are scripts you can embeded, any number
of them, but they should result in *one* final valid
command line.

What you want to do is probably:
hbmk2 test.hbm
hbmk2 test1.hbm
hbmk2 test2.hbm

Brgds,
Viktor

> Viktor Szak?ts wrote:
>>
>> Is there any important feature still missing from hbmk2?
>>
>
> Hi,
> I don't know is important or not
> but, please tell my what expected result for this
>
> hbmk2 @all.hbm
> hbmk2 @all2.hbm
>
> -------- all.hbm -------
> test2.hbm
> test1.hbm
> test.hbm
> -----------------------
>
> -------- all2.hbm ------
> test1.hbm
> test2.hbm
> test.hbm
> -----------------------
>
> ------ test.hbm -------
> test.prg
> -omytest
> -----------------------
>
> ------ test1.hbm ------
> -hblib
> test1.prg
> -omytest1
> -----------------------
> ------ test2.hbm ------
> -hbcc
> -gh
> test2.prg
> -omytest2
> -----------------------
>
> ------ test.prg ------
> proc main
> ? (__FILE__)
> return
> -----------------------
>
> ------ test1.prg ------
> proc libtest
> ? (__FILE__)
> return
> -----------------------
>
> ------ test2.prg ------
> proc hrbtest
> ? (__FILE__)
> return
> -----------------------
>
>
> Regards,
> Petr
>
>
>
>
>
> -- 
> View this message in context: http://www.nabble.com/hbmk2%3A-any-features-still-missing--tp23501356p23503236.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vszakats at users.sourceforge.net  Tue May 12 12:20:16 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue May 12 13:29:07 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11025] trunk/harbour
Message-ID: <E1M3uiG-00073a-Ox@bj8yhf1.ch3.sourceforge.com>

Revision: 11025
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11025&view=rev
Author:   vszakats
Date:     2009-05-12 16:20:15 +0000 (Tue, 12 May 2009)

Log Message:
-----------
2009-05-12 18:14 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed not recognizing -incpath/-inctrypath
    ! Removed prioritizing own C compiler when detecting
      C compiler. This resulted in msvc64 not being recognized
      when using an MSVC build of hbmk2.
    + Added -instpath= option to specifiy dirs where target gets
      copied after a successful build.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From e.m.giordano at emagsoftware.it  Tue May 12 14:40:37 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue May 12 16:42:17 2009
Subject: [Harbour] Warning
Message-ID: <B388D8E1D92E4D799717F797B7135C0C@emag>

Warning W8004 ../../mlcfunc.c 156: 'pEOLs' is assigned a value that is never 
used in function hb_mlGetEOLs

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From tfonrouge at users.sourceforge.net  Tue May 12 16:52:47 2009
From: tfonrouge at users.sourceforge.net (tfonrouge@users.sourceforge.net)
Date: Tue May 12 17:59:42 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11027]
	trunk/harbour/ChangeLog
Message-ID: <E1M3yxz-0001sh-Cc@74yxhf1.ch3.sourceforge.com>

Revision: 11027
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11027&view=rev
Author:   tfonrouge
Date:     2009-05-12 20:52:46 +0000 (Tue, 12 May 2009)

Log Message:
-----------
! Fixed header entry

Modified Paths:
--------------
    trunk/harbour/ChangeLog


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Tue May 12 17:03:34 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Tue May 12 18:14:07 2009
Subject: [Harbour] 2009-05-12 15:49 UTC-0500 Teo Fonrouge
	(teo/at/windtelsoft/dot/com) + contrib/hbwinprn
Message-ID: <18d502870905121403v21442c2btbcbd7250bebe5225@mail.gmail.com>

Hi Teo,
Please undo this change, this is an extremely bad idea,
and ruins the whole concept of having one proper hbwin
library. Even worse solution to solve a temporary problem
of a few users.

The solution is to either use old OLE, or if it doesn't fit
you should either not block moving to the new version or
help adding missing bits to new implementation.

Quite disappointing to see that you completely ignored
my message regarding this topic a few days ago.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090512/f5b33d95/attachment.html
From harbour.01 at syenar.hu  Tue May 12 17:12:42 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Tue May 12 18:31:26 2009
Subject: [Harbour] Re: 2009-05-12 15:49 UTC-0500 Teo Fonrouge
	(teo/at/windtelsoft/dot/com) + contrib/hbwinprn
In-Reply-To: <18d502870905121403v21442c2btbcbd7250bebe5225@mail.gmail.com>
References: <18d502870905121403v21442c2btbcbd7250bebe5225@mail.gmail.com>
Message-ID: <18d502870905121412j1ccfdcc1odeb81fca3ceb04a3@mail.gmail.com>

You've also successfully deleted the whole change history of "moved"
files by simply readding them instead of using the
'svn move' command.

Great!

Brgds,
Viktor

On Tue, May 12, 2009 at 11:03 PM, Viktor Szak?ts <harbour.01@syenar.hu>wrote:

> Hi Teo,
> Please undo this change, this is an extremely bad idea,
> and ruins the whole concept of having one proper hbwin
> library. Even worse solution to solve a temporary problem
> of a few users.
>
> The solution is to either use old OLE, or if it doesn't fit
> you should either not block moving to the new version or
> help adding missing bits to new implementation.
>
> Quite disappointing to see that you completely ignored
> my message regarding this topic a few days ago.
>
> Brgds,
> Viktor
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090512/f7861dbf/attachment.html
From harbour.01 at syenar.hu  Tue May 12 11:43:55 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue May 12 19:38:17 2009
Subject: [Harbour] hbmk2: any features still missing?
In-Reply-To: <23503451.post@talk.nabble.com>
References: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
	<23503451.post@talk.nabble.com>
Message-ID: <A1DF1AFC-3946-4C2C-A217-3F1E0FD147D9@syenar.hu>

> Nested projects.
>
> I mean if .hbm includes another .hbm
> it should treat it as a nested another project
> contrary to current implementation where another .hbm
> becomes a part of the current.
>
> May be .hbm implementation be kept as is and a new
> extension is introduced, say .hbprj and if encountered,
> replace  .hbprj with  .hbm and treated as nested project
> redefining all attributes from .hbprj.
>
> This way I can stay only in one folder and any changes
> in related libs ae automatically taken care of. Just like xMate.

Yes, probably some new extension is needed for that,
plus a new processing loop inside hbmk2. Plus possibly
concerting the whole internal hbmk2 process to a self
contained (quasi) object to allow for recursion.

In most cases it would be equivalent to calling hbmk2
multiple times, so I don't really see the time investment
justified yet.

The other important (but optional) part is dependency
detection, but that's too far yet to think about.

Brgds,
Viktor

From teo at windtelsoft.com  Tue May 12 21:45:23 2009
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Tue May 12 22:26:59 2009
Subject: [Harbour] Re: 2009-05-12 15:49 UTC-0500 Teo Fonrouge
	(teo/at/windtelsoft/dot/com) + contrib/hbwinprn
In-Reply-To: <18d502870905121412j1ccfdcc1odeb81fca3ceb04a3@mail.gmail.com>
References: <18d502870905121403v21442c2btbcbd7250bebe5225@mail.gmail.com>
	<18d502870905121412j1ccfdcc1odeb81fca3ceb04a3@mail.gmail.com>
Message-ID: <200905122045.23136.teo@windtelsoft.com>

On Tuesday 12 May 2009 16:12:42 Viktor Szak?ts wrote:

(btw, can you please avoid top posting? thanks.)

> You've also successfully deleted the whole change history of "moved"
> files by simply readding them instead of using the
> 'svn move' command.

I'm sorry, my mistake. Today was a tough day for me.

>
> Great!

I'dont like your tone. So I'll assume that you had also a hard day today.

[snip]

best regards,

Teo


From teo at windtelsoft.com  Tue May 12 21:45:21 2009
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Tue May 12 22:29:35 2009
Subject: [Harbour] 2009-05-12 15:49 UTC-0500 Teo Fonrouge
	(teo/at/windtelsoft/dot/com) + contrib/hbwinprn
In-Reply-To: <18d502870905121403v21442c2btbcbd7250bebe5225@mail.gmail.com>
References: <18d502870905121403v21442c2btbcbd7250bebe5225@mail.gmail.com>
Message-ID: <200905122045.21360.teo@windtelsoft.com>

On Tuesday 12 May 2009 16:03:34 Viktor Szak?ts wrote:
> Hi Teo,
> Please undo this change, this is an extremely bad idea,
> and ruins the whole concept of having one proper hbwin

I'm sorry, but I fail to see any specification in the hole Harbour tree 
regarding on what must be included in the hbwin library. Exception made on 
this brief entry:

	doc/dirstruc.txt
		- Collection of Windows specific utility functions.


> library. Even worse solution to solve a temporary problem
> of a few users.
>
> The solution is to either use old OLE, or if it doesn't fit
> you should either not block moving to the new version or
> help adding missing bits to new implementation.

By removing the WIN_PRN class out of hbwin I was precisely promoting the use 
of the new ole lib "hbole" and consequently on their improvement (if any).

In fact, WIN_PRN class stored in hbwin lib simply blocks the usage and testing 
of the "hbole" lib for users that need WIN_PRN functionality.

>
> Quite disappointing to see that you completely ignored
> my message regarding this topic a few days ago.

What message is that ?

You should post that message in my message requesting advice specifically on 
this matter in last friday: "Using OLE and WIN_PRN classes" 

I just react to the only reply to this message by an user having the same 
problem.

best regards,

Teo

From vszakats at users.sourceforge.net  Wed May 13 01:51:27 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May 13 02:53:07 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11029] trunk/harbour
Message-ID: <E1M47NH-0005xf-Ea@3kljzd1.ch3.sourceforge.com>

Revision: 11029
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11029&view=rev
Author:   vszakats
Date:     2009-05-13 05:51:26 +0000 (Wed, 13 May 2009)

Log Message:
-----------
2009-05-13 07:45 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbwin/win_prn2.c
  * contrib/hbwin/win_tprn.prg
  * contrib/hbwin/tests/testprn.prg
  * contrib/hbwin/win_prn1.c
    ! Trying to restore these files with their revision history, 
      after recent removal.

Modified Paths:
--------------
    trunk/harbour/ChangeLog

Added Paths:
-----------
    trunk/harbour/contrib/hbwin/tests/testprn.prg
    trunk/harbour/contrib/hbwin/win_prn1.c
    trunk/harbour/contrib/hbwin/win_prn2.c
    trunk/harbour/contrib/hbwin/win_tprn.prg

Removed Paths:
-------------
    trunk/harbour/contrib/hbwin/tests/testprn.prg
    trunk/harbour/contrib/hbwin/win_prn1.c
    trunk/harbour/contrib/hbwin/win_prn2.c
    trunk/harbour/contrib/hbwin/win_tprn.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Wed May 13 01:54:29 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May 13 02:55:59 2009
Subject: [Harbour] winprn contrib posted separately
Message-ID: <18d502870905122254i62a0b71cl611383147604182c@mail.gmail.com>

Hi All,
I've saved hbwinprn separate Windows printing lib here,
so testers can use it to test new OLE, or use it for any
purpose:

http://www.syenar.hu/harbour/hbwinprn.zip

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090513/1da93182/attachment.html
From vszakats at users.sourceforge.net  Wed May 13 02:12:06 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May 13 03:08:23 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11030] trunk/harbour
Message-ID: <E1M47hG-0006I0-Eg@3kljzd1.ch3.sourceforge.com>

Revision: 11030
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11030&view=rev
Author:   vszakats
Date:     2009-05-13 06:12:05 +0000 (Wed, 13 May 2009)

Log Message:
-----------
2009-05-13 08:10 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.hu_HU.po
  * utils/hbmk2/hbmk2.prg
    + Added -tshead=<file> option to create a .ch header with
      build timestamp information in it: _HBMK_BUILD_DATE,
      _HBMK_BUILD_TIME_, HB_BUILD_TIMESTAMP_.
    * -opt/-noopt -> -optim/-nooptim to avoid name ambiguity.
    + Added feature to -vcshead= to create a locally rolled
      build number if there is no version control system detected.
      In this case _HBMK_VCS_TYPE_ will be defined as "hbmk"
      and _HBMK_VCS_ID_ will be initialized with a string, starting
      with "1" and incremented on each hbmk2 call.
    * Internal change to componentize hbmk2 functionality, clearing
      away all STATIC vars and some parameter passing hacks.
      Work in progress, TODO added.
    ! Fixed cosmetic bug in debug output when making .po.

  * source/rtl/mlcfunc.c
    ! Fixed warning appeard in latest change.

  * source/rtl/trim.c
  * source/compiler/hbfunchk.c
    - Removed HB_EXTENSION protected second extended parameters
      from RTRIM() and ALLTRIM(). If you miss this option, please
      report it on the list, we may readd such functionality under
      some different name.
      INCOMPATIBLE for HB_EXTENSION builds.

   * doc/dirstruc.txt
   * bin/hb-func.sh
   * utils/hbmk2/examples/contribf.hbp
   - contrib/hbole
   * contrib/Makefile
   + contrib/hbwin/oleinit.c
   + contrib/hbwin/olecore.c
   + contrib/hbwin/hbwinole.h
   + contrib/hbwin/oleauto.prg
   + contrib/hbwin/tests/sample.odt
   * contrib/hbwin/tests/testole.prg
   - contrib/hbwin/win_tole.prg
   - contrib/hbwin/win_ole.c
   + contrib/examples/hboleold
   + contrib/examples/hboleold/tests
   + contrib/examples/hboleold/tests/testole.prg
   + contrib/examples/hboleold/win_tole.prg
   + contrib/examples/hboleold/win_ole.c
   + contrib/examples/hboleold/Makefile
     * Replaced old hbwin OLE implementation with
       new implementation in hbole. Thanks to
       Mindaugas Kavaliauskas for the new implementation.
       Those who need the old implementation in the
       meantime for any reason, can find it in contrib/example/hboleold.
     ; TODO: Fill the few missing features (ActiveX/FiveWin
             compatibility).

   * ChangeLog
     * Marked two TODO/TOFIX done.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/hb-func.sh
    trunk/harbour/contrib/Makefile
    trunk/harbour/doc/dirstruc.txt
    trunk/harbour/source/compiler/hbfunchk.c
    trunk/harbour/source/rtl/mlcfunc.c
    trunk/harbour/source/rtl/trim.c
    trunk/harbour/utils/hbmk2/examples/contribf.hbp
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.po
    trunk/harbour/utils/hbmk2/hbmk2.prg

Added Paths:
-----------
    trunk/harbour/contrib/examples/hboleold/
    trunk/harbour/contrib/examples/hboleold/Makefile
    trunk/harbour/contrib/examples/hboleold/tests/
    trunk/harbour/contrib/examples/hboleold/tests/testole.prg
    trunk/harbour/contrib/examples/hboleold/win_ole.c
    trunk/harbour/contrib/examples/hboleold/win_tole.prg
    trunk/harbour/contrib/hbwin/hbwinole.h
    trunk/harbour/contrib/hbwin/oleauto.prg
    trunk/harbour/contrib/hbwin/olecore.c
    trunk/harbour/contrib/hbwin/oleinit.c
    trunk/harbour/contrib/hbwin/tests/sample.odt
    trunk/harbour/contrib/hbwin/tests/testole.prg

Removed Paths:
-------------
    trunk/harbour/contrib/hbole/
    trunk/harbour/contrib/hbwin/tests/sample.odt
    trunk/harbour/contrib/hbwin/tests/testole.prg
    trunk/harbour/contrib/hbwin/win_ole.c
    trunk/harbour/contrib/hbwin/win_tole.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Wed May 13 02:29:22 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May 13 03:22:51 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11031] trunk/harbour
Message-ID: <E1M47xy-0006ur-8H@3kljzd1.ch3.sourceforge.com>

Revision: 11031
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11031&view=rev
Author:   vszakats
Date:     2009-05-13 06:29:21 +0000 (Wed, 13 May 2009)

Log Message:
-----------
2009-05-13 08:29 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbwin/Makefile
    ! Updated according to prev commit.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Wed May 13 02:31:28 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May 13 03:24:59 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11032] trunk/harbour
Message-ID: <E1M4800-0006xb-RU@3kljzd1.ch3.sourceforge.com>

Revision: 11032
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11032&view=rev
Author:   vszakats
Date:     2009-05-13 06:31:28 +0000 (Wed, 13 May 2009)

Log Message:
-----------
2009-05-13 08:30 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbwin/olecore.c
    % Using hb_retc_const()

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/olecore.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From M.Horodyski at pzuzycie.com.pl  Wed May 13 03:42:34 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Wed May 13 04:39:35 2009
Subject: [Harbour] Count of variable
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C95022E2861@PINK.zycie.pzu>

Please see, how many private variabel named "n" I have :

 File  Locate  View  Run  Point  Monitor  Options  Window  Help
?[?]?????????????????????????? Monitor: Private ????????????????????????????????
?16) MSOPDO <Private, C>: "Moment - wysy?am zaleg?e informacje o op?aceniach po?
?17) N <Private, N>:          1                                                ?
?18) N <Private, N>:          1                                                ?
?19) NADUP <Private, C>: "Nadanie uprawnie? dla "                              ?
?20) NBK <Private, C>: "Podstaw( 'NOWEPROD\M_c ksiegowy:@,  Jedn:@,  Oper:[@,@,?
?21) PL <Private, U>: NIL                                                      ?
????????????????????????????????????????????????????????????????????????????????
?[?]??????????????????????? c:\library.xhb\BOSS.prg ????????????????????????????
?180:    Next                                                                  ?
?181:   RECOVER USING oe                                                       ?
?182:    // AltD()                                                             ?
?183:    e := oe:description + hb_OsNewLine() + 'Blad wykonania, sprwdz ERROR.L?
?184:    n := 0 ; Na_Dysk( Zrodlo() + "ERROR.LOG", e)                          ?
?185:    While n == 0                                                          ?
?186:     n := Opcja( e, { "Omin", "Koniec"}, , .t., , 'W+/R')[ 1]             ?
?187:    End                                                                   ?
????????????????????????????????????????????????????????????????????????????????
?[?]??????????????????????????????? Command ????????????????????????????????????
?                                                                              ?
?                                                                              ?
?>                                                                             ?
????????????????????????????????????????????????????????????????????????????????
F1-Help F2-Zoom F3-Repeat F4-User F5-Go F6-WA F7-Here F8-Step F9-BkPt F10-Trace

Variable are created after macro - probably my mistake.
But is it possible, that compilator in runtime is not control this ?

Regards,
Marek Horodyski
From harbour.01 at syenar.hu  Wed May 13 04:21:00 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May 13 05:08:25 2009
Subject: [Harbour] cdx internal error question
Message-ID: <18d502870905130121n22e5b182m9deb94f051c8e5db@mail.gmail.com>

Hi All,
I'm getting this internal error with DBFCDX RDD (didn't test other RDDs):
---
Unrecoverable error 9101: hb_cdxIndexLockWrite: readonly index.
Called from ORDCREATE(0)
---

This happens if I try to open a table for indexing in read-only mode,
but only when another station has kept the same table + index open
until the open command:

dbUseArea(.T., NIL, "test.dbf", "w_TEST", .F., .T.)
ordCreate( ... )

I'm not exactly sure what conditions are causing it, because I couldn't
create a small example, but the condition is consistently there with
an app: open two instances, go to a menu which keeps some table
open in shared mode, go to other instance and start a full reindex,
wait for screen message showing that a table is currently being used
by other station, switch back to other instance, close menu + tables,
switch instance, press continue, and bang, the app disappears when
it tries to start the reindexing with the same command which otherwise
works. No .c tricks are involved here.

Any ideas what could cause this?

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090513/94422cbc/attachment.html
From harbour.01 at syenar.hu  Wed May 13 01:41:23 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May 13 05:40:09 2009
Subject: [Harbour] 2009-05-12 15:49 UTC-0500 Teo Fonrouge 
	(teo/at/windtelsoft/dot/com) + contrib/hbwinprn
In-Reply-To: <200905122045.21360.teo@windtelsoft.com>
References: <18d502870905121403v21442c2btbcbd7250bebe5225@mail.gmail.com>
	<200905122045.21360.teo@windtelsoft.com>
Message-ID: <18d502870905122241m3fdc383fqf6c1b91ccf5c0e9a@mail.gmail.com>

Hi Teo,

On Wed, May 13, 2009 at 3:45 AM, Teo Fonrouge <teo@windtelsoft.com> wrote:

> On Tuesday 12 May 2009 16:03:34 Viktor Szak?ts wrote:
> > Hi Teo,
> > Please undo this change, this is an extremely bad idea,
> > and ruins the whole concept of having one proper hbwin
>
> I'm sorry, but I fail to see any specification in the hole Harbour tree
> regarding on what must be included in the hbwin library. Exception made on
> this brief entry:
>
>        doc/dirstruc.txt
>                - Collection of Windows specific utility functions.


In the last two years you could see that I've merged a lot of
separate win libs into one which is hbwin. The last bit of that
effort would have been moving hbole to hbwin, as I've said it
many times on this list.


> > library. Even worse solution to solve a temporary problem
> > of a few users.
> >
> > The solution is to either use old OLE, or if it doesn't fit
> > you should either not block moving to the new version or
> > help adding missing bits to new implementation.
>
> By removing the WIN_PRN class out of hbwin I was precisely promoting the
> use
> of the new ole lib "hbole" and consequently on their improvement (if any).


This could have been solved with a lot smaller impact for whole
Harbour user base.

In fact, WIN_PRN class stored in hbwin lib simply blocks the usage and
> testing
> of the "hbole" lib for users that need WIN_PRN functionality.


If you seriously want to test winprn, you can do this locally, no
need to force all Harbour users (most of them not really into the
differences between these two OLE implementation) to adapt
to splitting libs.


> > Quite disappointing to see that you completely ignored
> > my message regarding this topic a few days ago.
>
> What message is that ?
>
> You should post that message in my message requesting advice specifically
> on
> this matter in last friday: "Using OLE and WIN_PRN classes"
>
> I just react to the only reply to this message by an user having the same
> problem.


One message confirming the same problem is too little to start
reorganizing contribs IMO.

Seems like my message was lost due to recent mailing list problem,
it's in my sent folder along with two others which I've sent the same
time, and which arrived properly. Here it is:

---
In-Reply-To: <200905081952.42658.teo@windtelsoft.com>
Date: Sat, 9 May 2009 19:06:32 +0200
Subject: Re: [Harbour] Using OLE and WIN_PRN classes
From: =?UTF-8?Q?Viktor_Szak=C3=A1ts?= <harbour.01@syenar.hu>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>

Hi Teo, not yet pls. The plan is to replace hbwin ole imp. with hbole,
until then do this but locally. Brgds, Viktor

On 5/9/09, Teo Fonrouge <teo@windtelsoft.com> wrote:
> Hello friendly Harbourians,
---

Anyhow I'd like to undo this change and it's completely out of
concept. Moreover I'll move hbole to hbwin, otherwise I don't
see the remaining issue will ever be fixed. I'll keep old OLE
in some backup dir.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090513/66023412/attachment-0001.html
From jfl at mafact.com  Wed May 13 05:03:00 2009
From: jfl at mafact.com (J. Lefebvre)
Date: Wed May 13 05:47:27 2009
Subject: [Harbour] HRB problem with inherited classes
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C95022E2861@PINK.zycie.pzu>
Message-ID: <b80d854a.1c9d3a9.657340.7385@mafact.com>

This mail seem to never reach the list ... New test !

++++++++++++++++++++++++++++++++++++++++++++++++++++++

Hi,

I'm working with HRB files and suddently discovered a serious problem when using Classes defined within the HRB files inheriting from classes from the main program.


Suppose we have those two classes, Dialog within the main exe, and MyDlg from the HRB file. (This sample is NOT tested nor compiled, it could contain errors, just here to explain the problem !!!)


Main prog ;

Class Dialog
 VAR x
 Method New() Inline x:=1, Self
 Method Destroy() 
 Method OnClose() INLINE .F.
endclass
  

Method Destroy() Class Dialog
 if(::Onclose())
  x:=NIL
 endif
Return Self



HRB prog ;

Class MyDlg inherit Dialog
 VAR y
 Method New() INLINE y:=1, Super:New()
 Method OnClose  
Endclass

Method OnClose() Class MyDlg
Return .T.


When Running the (similar, bug much much biger) prog, at the time of Calling Destroy() method, the super class method is used, so ::Onclose() is called and the class hierarchy is working nicely, to use the onclose() method defined in MyDlg class, within the HRB file.

Then, class system is looking for the associated static function   MyDlg_Onclose() defined within the MyDlg Class Header and ... IT DOES'NT FIND IT (as expected) because it should be called by HB_HrbDo(...) and not directly ...


Now some questions :

Could we imagine a system where we could create a new HBR function like HB_HBRDYNSYMLOAD(cHbrFile) wich not only would load the HBR header, but also would list all internal function and add them to main symbol list (event more powerfull, it could replace some if some with same name exist, allowing the HRB file to patch program easily)


Where should I have a look if I want to add this kind of functionalities ?

I found runner.c but I have to 1) scan HRB to list existing function, 2) scan the actual symbol list and either replace some symbol or add new symbol


Finally, I shoud be able to unload the HRB file and restore the symbol list (but I can live without it  :-) ).

Apart the last point, this is how Blinker was working with blinker special DLL for clipper. You can load a Dll with some code (new or existing) and the loader add all the function and vars to the symbol table, eventually replacing existing one. With Blinker, you CAN'T unload it without GPFying your program !!!


JF,

From jfl at mafact.com  Wed May 13 05:22:00 2009
From: jfl at mafact.com (J. Lefebvre)
Date: Wed May 13 06:34:04 2009
Subject: [Harbour] test
In-Reply-To: <E1M4800-0006xb-RU@3kljzd1.ch3.sourceforge.com>
Message-ID: <5b60787f.1c9d3ac.76bc5c.1b79@mafact.com>

Test !

Sorry,

From kadziola at tlen.pl  Wed May 13 06:15:45 2009
From: kadziola at tlen.pl (Jaroslaw Kadziola)
Date: Wed May 13 07:10:42 2009
Subject: [Harbour] How to debug ?
Message-ID: <682517768.20090513121545@tlen.pl>

Hi all,

How is simply road to debugging my .prg ?
 * AltD() in first line of .prg doing nothing,
 * -debug switch in hbmk2.exe  doing nothing

-- 
Regards,
Jaroslaw Kadziola

From druzus at acn.waw.pl  Wed May 13 06:34:08 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed May 13 07:15:39 2009
Subject: [Harbour] HRB problem with inherited classes
In-Reply-To: <b80d854a.1c9d3a9.657340.7385@mafact.com>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C95022E2861@PINK.zycie.pzu>
	<b80d854a.1c9d3a9.657340.7385@mafact.com>
Message-ID: <20090513103408.GA21208@uran.home.aster.pl>

On Wed, 13 May 2009, J. Lefebvre wrote:

Hi,

> This mail seem to never reach the list ... New test !
> ++++++++++++++++++++++++++++++++++++++++++++++++++++++

And it's very serious problem. I still cannot see some messages
I sent to this list in last days. They are not available also on
http://lists.harbour-project.org/pipermail/harbour/2009-May.
Phil please look at it. The messages does not appear at all or are
delivered with huge delay.
The same was happening in the December and then the list died.

> I'm working with HRB files and suddently discovered a serious problem when
> using Classes defined within the HRB files inheriting from classes from the
> main program.
> Suppose we have those two classes, Dialog within the main exe, and MyDlg
> from the HRB file. (This sample is NOT tested nor compiled, it could
> contain errors, just here to explain the problem !!!)
>
> Main prog ;
> Class Dialog
>  VAR x
>  Method New() Inline x:=1, Self
>  Method Destroy() 
>  Method OnClose() INLINE .F.
> endclass
>
> Method Destroy() Class Dialog
>  if(::Onclose())
>   x:=NIL
>  endif
> Return Self
>
>
> HRB prog ;
> Class MyDlg inherit Dialog
>  VAR y
>  Method New() INLINE y:=1, Super:New()
>  Method OnClose  
> Endclass
>
> Method OnClose() Class MyDlg
> Return .T.
>
> When Running the (similar, bug much much biger) prog, at the time of
> Calling Destroy() method, the super class method is used, so ::Onclose()
> is called and the class hierarchy is working nicely, to use the onclose()
> method defined in MyDlg class, within the HRB file.
>
> Then, class system is looking for the associated static function
> MyDlg_Onclose() defined within the MyDlg Class Header and ...
> IT DOES'NT FIND IT (as expected) because it should be called by
> HB_HrbDo(...) and not directly ...

The above is not true. There is nothing what has to be called by HB_HrbDo()
The above function does not make anything more then executing the 1-st
non static function from the .hrb file. The only one functionality given
by this function is executing the 1-st function from loaded .hrb file when
it's not known at all. It does not provide any other functionality and is
not necessary to use .hrb files.

> Now some questions :
> Could we imagine a system where we could create a new HBR function like
> HB_HBRDYNSYMLOAD(cHbrFile) wich not only would load the HBR header, but
> also would list all internal function and add them to main symbol list
> (event more powerfull, it could replace some if some with same name exist,
> allowing the HRB file to patch program easily)

It works in such way. For HVM there is not difference between code loaded
from .hrb files, static part of applications or shared libraries loaded
statically or dynamically. The new functions are registered and are visible
and usable as any other functions until module is unloaded. If module is
unloaded the references to functions insiade the module are cleared so
if they were stored in some other structures, f.e. in classes code or in
some variables ( var := @myhrbfunc() ) then when you try to execute them
you will have function not found RTE what is expected behavior.
If the same modules is loaded again the all references are resotred
automatically.

> Where should I have a look if I want to add this kind of functionalities ?

I can only guess that in your case the .hrb module was unloaded explicitly
by your code or azutomnatically by destructor, f.e.:

   pHRB := hb_hrbLoad( cHrbFile )
   [...]
   pHRB := NIL // activate automatic destructor which calls hb_hrbUnLoad()

> I found runner.c but I have to
> 1) scan HRB to list existing function,
> 2) scan the actual symbol list and either replace some symbol or add
> new symbol
> Finally, I shoud be able to unload the HRB file and restore the symbol
> list (but I can live without it  :-) ).

I'm sorry but I do not understand what you want to do in above.
You can cleanly unload .hrb files at any moment. But if you will
later try to execute some function or method from unloaded .hrb
file using some references or macro compiler ( &("myhrbfunc")() )
then you will have Error BASE/1001 Undefined function: MYHRBFUNC
or similar method/ivar not found.
What seems to be nice and clean solution.
Of cousre we can also replace unloaded functions with some dummy code
but IMHO it's not good idea.

> Apart the last point, this is how Blinker was working with blinker
> special DLL for clipper. You can load a Dll with some code (new or
> existing) and the loader add all the function and vars to the symbol
> table, eventually replacing existing one. With Blinker, you CAN'T
> unload it without GPFying your program !!!

And with Harbour you can do it cleanly and if you try to access unloaded
functions then you should have clean RTE: function/message not found.
Of course it's possible the we have some bugs in existing code and we
have GPF but in such case such I will need self contain example to fix it.

best regards,
Przemek
From bedipritpal at hotmail.com  Wed May 13 06:39:26 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed May 13 07:32:03 2009
Subject: [Harbour] cdx internal error question
In-Reply-To: <18d502870905130121n22e5b182m9deb94f051c8e5db@mail.gmail.com>
References: <18d502870905130121n22e5b182m9deb94f051c8e5db@mail.gmail.com>
Message-ID: <23519390.post@talk.nabble.com>


Hello


Viktor Szak?ts wrote:
> 
> Hi All,
> I'm getting this internal error with DBFCDX RDD (didn't test other RDDs):
> ---
> Unrecoverable error 9101: hb_cdxIndexLockWrite: readonly index.
> Called from ORDCREATE(0)
> ---
> 

This is a similar like situation which I reported a few days back 
and which still persists. Though I do not get a RTE, but appln just
enter a indefinite loop with cpu at 50%.

May be now we will expect a fix.

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/cdx-internal-error-question-tp23518164p23519390.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Wed May 13 06:55:00 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed May 13 07:55:06 2009
Subject: [Harbour] test
In-Reply-To: <5b60787f.1c9d3ac.76bc5c.1b79@mafact.com>
References: <E1M4800-0006xb-RU@3kljzd1.ch3.sourceforge.com> 
	<5b60787f.1c9d3ac.76bc5c.1b79@mafact.com>
Message-ID: <609353e70905130355g72fedceam9d39d7b524d0989d@mail.gmail.com>

I read this test

2009/5/13 J. Lefebvre <jfl@mafact.com>

> Test !
>
> Sorry,
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090513/e57a276a/attachment.html
From harbour.01 at syenar.hu  Wed May 13 07:23:03 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May 13 08:29:11 2009
Subject: [Harbour] HRB problem with inherited classes
In-Reply-To: <20090513103408.GA21208@uran.home.aster.pl>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C95022E2861@PINK.zycie.pzu>
	<b80d854a.1c9d3a9.657340.7385@mafact.com>
	<20090513103408.GA21208@uran.home.aster.pl>
Message-ID: <18d502870905130423v2eec797fn864fe0287a830d3c@mail.gmail.com>

>
> > This mail seem to never reach the list ... New test !
> > ++++++++++++++++++++++++++++++++++++++++++++++++++++++
>
> And it's very serious problem. I still cannot see some messages
> I sent to this list in last days. They are not available also on
> http://lists.harbour-project.org/pipermail/harbour/2009-May.
> Phil please look at it. The messages does not appear at all or are
> delivered with huge delay.
> The same was happening in the December and then the list died.


Still large delays on my side (what used to be seconds is now hours),
mails are arriving in random order, some sf.net mails from last week
still haven't reached the list, plus some others sent by users (me for
sure).

This already caused some unfortunate miscommunication so it'd be
nice to have it fixed.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090513/e67288ea/attachment.html
From vailtom at gmail.com  Wed May 13 08:03:30 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Wed May 13 09:06:56 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11030] trunk/harbour
In-Reply-To: <E1M47hG-0006I0-Eg@3kljzd1.ch3.sourceforge.com>
References: <E1M47hG-0006I0-Eg@3kljzd1.ch3.sourceforge.com>
Message-ID: <531d7a750905130503s357b7258n194efc411df8be4f@mail.gmail.com>

> ?* utils/hbmk2/hbmk2.prg
> ? ?+ Added -tshead=<file> option to create a .ch header with
> ? ? ?build timestamp information in it: _HBMK_BUILD_DATE,
> ? ? ?_HBMK_BUILD_TIME_, HB_BUILD_TIMESTAMP_.
> ? ?* -opt/-noopt -> -optim/-nooptim to avoid name ambiguity.
> ? ?+ Added feature to -vcshead= to create a locally rolled
> ? ? ?build number if there is no version control system detected.
> ? ? ?In this case _HBMK_VCS_TYPE_ will be defined as "hbmk"
> ? ? ?and _HBMK_VCS_ID_ will be initialized with a string, starting
> ? ? ?with "1" and incremented on each hbmk2 call.
> ? ?* Internal change to componentize hbmk2 functionality, clearing
> ? ? ?away all STATIC vars and some parameter passing hacks.
> ? ? ?Work in progress, TODO added.

Very, very useful even this feature! Much grateful!
=D
From druzus at users.sourceforge.net  Wed May 13 08:50:32 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Wed May 13 09:52:10 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11034] trunk/harbour
Message-ID: <E1M4Duq-0003Ui-0m@c3vjzd1.ch3.sourceforge.com>

Revision: 11034
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11034&view=rev
Author:   druzus
Date:     2009-05-13 12:50:31 +0000 (Wed, 13 May 2009)

Log Message:
-----------
2009-05-13 14:59 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/runner.c
    % optimized memory allocation for symbol tables used in loaded .hrb
      files to store whole symbol table with all symbol names in single
      memory block. It makes HVM cloned table structure synced with the
      one used by runner.c fixing possible static memory leak.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/vm/runner.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From qiinfo at ig.com.br  Wed May 13 09:16:17 2009
From: qiinfo at ig.com.br (Rossine)
Date: Wed May 13 10:05:56 2009
Subject: [Harbour] Errors with 11032
Message-ID: <23521549.post@talk.nabble.com>


Hello,

Using version 11021 compile with BCC55 works fine, but I am using version
11032 is the seguints errors:

[ERRORS]
Error: Unresolved external '_hb_oleAnsiToWide' referenced from
C:\FWH\LIB\FIVEHC.LIB|MSGSAPI
Error: Unresolved external '_HB_FUN_ANSITOWIDE' referenced from
C:\FWH\LIB\FIVEH.LIB|tget
Error: Unresolved external '_HB_FUN_TOLEAUTO' referenced from
C:\QI\WIN\OBJETOS\GERAL\QILIB.LIB|XBROWSE
Error: Unresolved external '_HB_FUN_OLE2TXTERROR' referenced from
C:\QI\WIN\OBJETOS\GERAL\QILIB.LIB|qilib
[ENDERRORS]

How to fix this?

Best regards,

Rossine.



-- 
View this message in context: http://www.nabble.com/Errors-with-11032-tp23521549p23521549.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Wed May 13 09:33:37 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed May 13 10:14:52 2009
Subject: [Harbour] cdx internal error question
In-Reply-To: <23519390.post@talk.nabble.com>
References: <18d502870905130121n22e5b182m9deb94f051c8e5db@mail.gmail.com>
	<23519390.post@talk.nabble.com>
Message-ID: <20090513133337.GB18724@uran.home.aster.pl>

On Wed, 13 May 2009, Pritpal Bedi wrote:

Hi,

> This is a similar like situation which I reported a few days back 
> and which still persists. Though I do not get a RTE, but appln just
> enter a indefinite loop with cpu at 50%.
> May be now we will expect a fix.

If this it the same situation then for sure you have to fix your code.

best regards,
Przemek
From mbelgrano at deltain.it  Wed May 13 09:50:45 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed May 13 10:51:21 2009
Subject: [Harbour] How to debug ?
In-Reply-To: <682517768.20090513121545@tlen.pl>
References: <682517768.20090513121545@tlen.pl>
Message-ID: <609353e70905130650k301535bdl3b784181060859b8@mail.gmail.com>

try hbmk2 -b (and add hbdebug.lib)
.-debug is for debugging c

2009/5/13 Jaroslaw Kadziola <kadziola@tlen.pl>

> Hi all,
>
> How is simply road to debugging my .prg ?
>  * AltD() in first line of .prg doing nothing,
>  * -debug switch in hbmk2.exe  doing nothing
>
> --
> Regards,
> Jaroslaw Kadziola
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Analisi e sviluppo software per Lan e Web - Consulenza informatica -
Formazione
Delta Informatica S.r.l. http://www.deltain.it/   +39 0321 455962
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090513/3ae4aa22/attachment.html
From M.Horodyski at pzuzycie.com.pl  Wed May 13 10:07:21 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Wed May 13 11:21:56 2009
Subject: [Harbour] How to debug ?
In-Reply-To: <682517768.20090513121545@tlen.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9502356233@PINK.zycie.pzu>

>-----Original Message-----
>From: Jaroslaw Kadziola [mailto:kadziola@tlen.pl] 
>Sent: Wednesday, May 13, 2009 12:16 PM
>To: Harbour Project Main Developer List .
>Subject: [Harbour] How to debug ?
>
>Hi all,
>
>How is simply road to debugging my .prg ?
> * AltD() in first line of .prg doing nothing,
> * -debug switch in hbmk2.exe  doing nothing
>

Like in Clipper. Compile with -b and link with hbdebug.lib

Regards,
Marek Horodyski
From vszakats at users.sourceforge.net  Wed May 13 10:49:09 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May 13 11:51:24 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11035] trunk/harbour
Message-ID: <E1M4Fld-0007V1-Mu@bj8yhf1.ch3.sourceforge.com>

Revision: 11035
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11035&view=rev
Author:   vszakats
Date:     2009-05-13 14:49:08 +0000 (Wed, 13 May 2009)

Log Message:
-----------
2009-05-13 16:47 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbwin/Makefile
  + contrib/hbwin/legacy.c
    + Added deprecated compatibility wrappers:
      MESSAGEBOX(), ANSITOWIDE(), WIDETOANSI(), OLE2TXTERROR().
    + Added deprecated compatibility wrapper TOLEAUTO for HB_OLEAUTO
      class. This is probably not enough as there are other remaining
      incompatibilities.
    ; TODO: users needing this please tweak it further.
    + Added deprecated compatibility wrapper hb_oleWideToAnsi(), which
      now calls hb_mbtowc(). Not fully compatible for error cases, old
      one could return NULL in some cases.
    ; TODO: Switch to hb_mbntowc().
    + Added deprecated compatibility wrapper hb_oleAnsiToWide(), which
      now calls hb_wctomb(). Not fully compatible for error cases, old
      one could return NULL in some cases.
    ; TODO: Switch to hb_wcntomb().

  * contrib/hbwin/win_misc.c
    + Added WAPI_MESSAGEBOX()
    + Added WIN_ANSITOWIDE() (rewritten using common API. Please check.)
    + Added WIN_WIDETOANSI() (rewritten using common API. Please check.)
    ; NOTE: ANSI/WIDE conversions aren't 100% compatible for error
            situations and empty strings. Old version could return NIL
            in certain situations.

  ; None of these were tested besides successful compile.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/Makefile
    trunk/harbour/contrib/hbwin/win_misc.c

Added Paths:
-----------
    trunk/harbour/contrib/hbwin/legacy.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Wed May 13 10:52:42 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May 13 11:54:06 2009
Subject: [Harbour] cdx internal error question
In-Reply-To: <20090513133337.GB18724@uran.home.aster.pl>
References: <18d502870905130121n22e5b182m9deb94f051c8e5db@mail.gmail.com>
	<23519390.post@talk.nabble.com>
	<20090513133337.GB18724@uran.home.aster.pl>
Message-ID: <18d502870905130752m112bb1acy9b75ae73b75fab6a@mail.gmail.com>

Hi Przemek,

How should I fix this on .prg level? It's a simple open + reindex done in
read-only mode, which sometimes fails, but works in most cases.

I can easily switch off RO mode if that's the problematic part, but I still
wonder on the reasons and also why an internal error is generated
instead of an RTE, if the condition can be caused by .prg code.

Brgds,
Viktor

On Wed, May 13, 2009 at 3:33 PM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:

> On Wed, 13 May 2009, Pritpal Bedi wrote:
>
> Hi,
>
> > This is a similar like situation which I reported a few days back
> > and which still persists. Though I do not get a RTE, but appln just
> > enter a indefinite loop with cpu at 50%.
> > May be now we will expect a fix.
>
> If this it the same situation then for sure you have to fix your code.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090513/00c66d23/attachment.html
From harbour.01 at syenar.hu  Wed May 13 10:53:42 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May 13 11:54:44 2009
Subject: [Harbour] How to debug ?
In-Reply-To: <609353e70905130650k301535bdl3b784181060859b8@mail.gmail.com>
References: <682517768.20090513121545@tlen.pl>
	<609353e70905130650k301535bdl3b784181060859b8@mail.gmail.com>
Message-ID: <18d502870905130753w24480b33uf0df0e26a75d6dc2@mail.gmail.com>

No need to add hbdebug.lib, it will be done by hbmk2.
Brgds,
Viktor

On Wed, May 13, 2009 at 3:50 PM, Massimo Belgrano <mbelgrano@deltain.it>wrote:

>
> try hbmk2 -b (and add hbdebug.lib)
> .-debug is for debugging c
>
> 2009/5/13 Jaroslaw Kadziola <kadziola@tlen.pl>
>
> Hi all,
>>
>> How is simply road to debugging my .prg ?
>>  * AltD() in first line of .prg doing nothing,
>>  * -debug switch in hbmk2.exe  doing nothing
>>
>> --
>> Regards,
>> Jaroslaw Kadziola
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
>
>
> --
> Massimo Belgrano
>
> Analisi e sviluppo software per Lan e Web - Consulenza informatica -
> Formazione
> Delta Informatica S.r.l. http://www.deltain.it/   +39 0321 455962
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090513/33e9d039/attachment.html
From calimero22 at freemail.it  Wed May 13 11:15:19 2009
From: calimero22 at freemail.it (calimero22@freemail.it)
Date: Wed May 13 12:02:00 2009
Subject: [Harbour] Mini-tutorial MySQL connection
Message-ID: <20090513151519.68E98680846A@eva104.dadanet.it>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090513/3246df0c/attachment.html
From druzus at acn.waw.pl  Wed May 13 11:41:21 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed May 13 12:17:40 2009
Subject: [Harbour] cdx internal error question
In-Reply-To: <20090513133337.GB18724@uran.home.aster.pl>
References: <18d502870905130121n22e5b182m9deb94f051c8e5db@mail.gmail.com>
	<23519390.post@talk.nabble.com>
	<20090513133337.GB18724@uran.home.aster.pl>
Message-ID: <20090513154121.GA3395@uran.home.aster.pl>

On Wed, 13 May 2009, Przemyslaw Czerpak wrote:

Hi,

> > This is a similar like situation which I reported a few days back 
> > and which still persists. Though I do not get a RTE, but appln just
> > enter a indefinite loop with cpu at 50%.
> > May be now we will expect a fix.
> If this it the same situation then for sure you have to fix your code.

My messages are delivered randomly :-(
Looks that this one reach the list but the one with information about
Viktor problem not so the above sentence looks rude.
I'll try to forward some of them agin.

Anyhow I strongly suggest you to rebuild Harbour and all your code
with CodeGuard support and look for _any_ warning/error messages.
I think you will find the reason of your problems.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed May 13 10:37:32 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed May 13 12:36:45 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <23521549.post@talk.nabble.com>
References: <23521549.post@talk.nabble.com>
Message-ID: <4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>

Hi Rossine,

Thanks for your report.

I suggest to keep using the older revision until these
incompatibilities with certain 3rd parties get resolved
in one way or another.

We will probably have to introduce some compatibility
calls to satisfy these tools until they adapt to our
changes. We should decide wether to put these calls to
xhb.lib or protect them using LEGACY macros.

Brgds,
Viktor

On 2009.05.13., at 15:16, Rossine wrote:

>
> Hello,
>
> Using version 11021 compile with BCC55 works fine, but I am using  
> version
> 11032 is the seguints errors:
>
> [ERRORS]
> Error: Unresolved external '_hb_oleAnsiToWide' referenced from
> C:\FWH\LIB\FIVEHC.LIB|MSGSAPI
> Error: Unresolved external '_HB_FUN_ANSITOWIDE' referenced from
> C:\FWH\LIB\FIVEH.LIB|tget
> Error: Unresolved external '_HB_FUN_TOLEAUTO' referenced from
> C:\QI\WIN\OBJETOS\GERAL\QILIB.LIB|XBROWSE
> Error: Unresolved external '_HB_FUN_OLE2TXTERROR' referenced from
> C:\QI\WIN\OBJETOS\GERAL\QILIB.LIB|qilib
> [ENDERRORS]
>
> How to fix this?
>
> Best regards,
>
> Rossine.
>
>
>
> -- 
> View this message in context: http://www.nabble.com/Errors-with-11032-tp23521549p23521549.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Wed May 13 12:20:02 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed May 13 13:29:40 2009
Subject: [Harbour] Mini-tutorial MySQL connection
In-Reply-To: <20090513151519.68E98680846A@eva104.dadanet.it>
References: <20090513151519.68E98680846A@eva104.dadanet.it>
Message-ID: <609353e70905130920p62708581y8296fadc85963841@mail.gmail.com>

Very thanks for sharing info here

2009/5/13 <calimero22@freemail.it>

>  MINI-TUTORIAL TO CONNECT HARBOUR PROGRAM WITH MYSQL DB
>
> Here's my little and nice tutorial about connection
> between a local Harbour program AND a remote MySQL Database.
>
> by GIOVANNI DI MARIA
>
> Follow the following steps:
> ====================================
>
> 1) You need a mysql server (local or remote).
>    I use the remote service www.db4free.net.
>
> 2) Create the database on the server.
>
> 3) Create the table on this database.
>
> 4) Create some column on this table.
>
> 5) Download and install the connector
> "mysql-connector-odbc-3.51.27-win32.msi".
> Don't create ANY DSN!
>
> 6) Write and compile the following harbour program:
>
> #include "adordd.ch"
> REQUEST ADORDD
> function Main()
>    clear screen
>    setmode(25,80)
>    USE DatabaseName VIA "ADORDD" TABLE "TableName" MYSQL FROM "db4free.net"
> USER "username" PASSWORD "password"
>    dbedit()
>    USE
>    clear screen
> return nil
>
>
> 7) Compile it with hbmk2 program.prg rddado.lib hbbin.lib
>
> 8) Run it and ENJOY!!
>
> ====================================
>
>
>
>
>
> --- Dada Music Movement <http://www.dada.it/>, tutta la musica che vuoi!
> ---
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>


-- 
Massimo Belgrano

Analisi e sviluppo software per Lan e Web - Consulenza informatica -
Formazione
Delta Informatica S.r.l. http://www.deltain.it/   +39 0321 455962
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090513/2ef927ff/attachment.html
From druzus at acn.waw.pl  Wed May 13 12:32:09 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed May 13 13:35:59 2009
Subject: [Harbour] cdx internal error question
In-Reply-To: <18d502870905130752m112bb1acy9b75ae73b75fab6a@mail.gmail.com>
References: <18d502870905130121n22e5b182m9deb94f051c8e5db@mail.gmail.com>
	<23519390.post@talk.nabble.com>
	<20090513133337.GB18724@uran.home.aster.pl>
	<18d502870905130752m112bb1acy9b75ae73b75fab6a@mail.gmail.com>
Message-ID: <20090513163209.GA12911@uran.home.aster.pl>

On Wed, 13 May 2009, Szak?ts Viktor wrote:

Hi,

> How should I fix this on .prg level? It's a simple open + reindex done in
> read-only mode, which sometimes fails, but works in most cases.
> I can easily switch off RO mode if that's the problematic part, but I still
> wonder on the reasons and also why an internal error is generated
> instead of an RTE, if the condition can be caused by .prg code.

Below is a message I sent few hours ago but it has not been delivered
so far :-(
Maybe this time? If not I'm setting CC to your and Pritpal address too.

best regards,
Przemek



----- Forwarded message from Przemyslaw Czerpak <druzus@acn.waw.pl> -----

From: Przemyslaw Czerpak <druzus@acn.waw.pl>
Subject: Re: [Harbour] cdx internal error question
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Date: Wed, 13 May 2009 15:31:24 +0200
Lines: 57

On Wed, 13 May 2009, Szak?ts Viktor wrote:

Hi,

> I'm getting this internal error with DBFCDX RDD (didn't test other RDDs):
> Unrecoverable error 9101: hb_cdxIndexLockWrite: readonly index.
> Called from ORDCREATE(0)
> This happens if I try to open a table for indexing in read-only mode,
> but only when another station has kept the same table + index open
> until the open command:
> dbUseArea(.T., NIL, "test.dbf", "w_TEST", .F., .T.)
> ordCreate( ... )

No. This is not the reason though due to some of your own synchronization
conditions you created in your code above situation can exploit the problem
in your case.

> Any ideas what could cause this?

It happens when you open table in read only mode then you open some
existing indexes to this table (they are automatically open in readonly
mode too just like the table) and then you try to add or change TAG in
such readonly opened index. That's all.
You description suggests that in your case it's structural index which
is automatically open due to _SET_AUTOPEN flag in readonly mode in
dbUseArea(). Here is self contain example which illustrates such situation:

   request DBFCDX
   proc main()
      field F
      ? version()
      rddSetDefault("DBFCDX")
      dbcreate( "_tst", {{"F","C",10,0}} )
      ferase( "_tst.cdx" )
      use _tst readonly
      ? "indexing..."
      index on F tag T
      close
      ? "indexing..."
      use _tst readonly
      index on F tag T
   return

Both Harbour and Clipper generate RTE error in such case so the behavior
is compatible though literal error message in both cases is a little
bit different, in Clipper52/53 it is:

   Unrecoverable error 24: Write error

in [x]Harbour:

   Unrecoverable error 9101: hb_cdxIndexLockWrite: readonly index.

IMHO the Harbour message is more precise.

best regards,
Przemek

----- End forwarded message -----
From abe.buch at att.net  Wed May 13 15:20:30 2009
From: abe.buch at att.net (AbeB)
Date: Wed May 13 16:19:15 2009
Subject: [Harbour] Bug in ADS
Message-ID: <1242242430411-2886000.post@n2.nabble.com>


with the following test.prgProc MAIN()


----------
REQUEST ADS
AdsSetServerType( 1 )

dbCreate( "test.DBF", {;
{     "ITEMID", "C",   8,  0 }, ;
{       "ITEM", "C",  12,  0 }, ;
{      "CLASS", "C",   8,  0 }, ;
{        "SUB", "C",   8,  0 }, ;
{       "CQTY", "N",   7,  2 }, ;
{ "R_PAK_BULK", "C",   1,  0 }, ;
{ "C_PAK_BULK", "C",   1,  0 }, ;
{      "LDESC", "C",  30,  0 }, ;
{        "MAN", "C",  15,  0 }, ;
{      "BRAND", "C",  15,  0 }, ;
{      "SHELF", "C",   6,  0 }, ;
{       "DESC", "C",  40,  0 }, ;
{       "MINS", "N",   8,  2 }, ;
{     "ONHAND", "N",  15,  2 }, ;
{      "PRICE", "N",   6,  2 }, ;
{     "PRICE2", "N",   6,  2 }} )


USE test VIA "ADS" SHARED
for lop  :=  1 to 100
    append blank
NEXT

BROWSE()
------------
and make command

hbmk2 test -lrddads -lace32

now look at field DESC it's being expended to lenght 41 with a garbage
character at the end.





-- 
View this message in context: http://n2.nabble.com/Bug-in-ADS-tp2886000p2886000.html
Sent from the harbour-devel mailing list archive at Nabble.com.

From jarabal at gmail.com  Wed May 13 15:23:58 2009
From: jarabal at gmail.com (Xavi)
Date: Wed May 13 16:21:25 2009
Subject: [Harbour] MemoEdit() Patch to avoid recursive calls in endless loop.
Message-ID: <4A0B1E4E.2060802@gmail.com>

Procedure Main()

     MemoEdit( 'Please press F2 abc...', 0, 0, MaxRow(), MaxCol(), .F., 'FunCtr' )
return

Function FunCtr()
return 0

When you press F2 MemoEdit() enters an endless loop of recursive calls, this patch prevent the recursion.
Please update the repository.

Is correct that exits the application without any errors ?

Xavi

-------------- next part --------------
/*
 * $Id: memoedit.prg 10595 2009-03-12 09:59:20Z vszakats $
 */

/*
 * Harbour Project source code:
 * MemoEdit() function
 *
 * Copyright 2000 Maurilio Longo <maurilio.longo@libero.it>
 * www - http://www.harbour-project.org
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2, or (at your option)
 * any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this software; see the file COPYING.  If not, write to
 * the Free Software Foundation, Inc., 59 Temple Place, Suite 330,
 * Boston, MA 02111-1307 USA (or visit the web site http://www.gnu.org/).
 *
 * As a special exception, the Harbour Project gives permission for
 * additional uses of the text contained in its release of Harbour.
 *
 * The exception is that, if you link the Harbour libraries with other
 * files to produce an executable, this does not by itself cause the
 * resulting executable to be covered by the GNU General Public License.
 * Your use of that executable is in no way restricted on account of
 * linking the Harbour library code into it.
 *
 * This exception does not however invalidate any other reasons why
 * the executable file might be covered by the GNU General Public License.
 *
 * This exception applies only to the code released by the Harbour
 * Project under the name Harbour.  If you copy code from other
 * Harbour Project or Free Software Foundation releases into a copy of
 * Harbour, as the General Public License permits, the exception does
 * not apply to the code that you add in this way.  To avoid misleading
 * anyone as to the status of such modified files, you must delete
 * this exception notice from them.
 *
 * If you write modifications of your own for Harbour, it is your choice
 * whether to permit this exception to apply to your modifications.
 * If you do not wish that, delete this exception notice.
 *
 */

#include "hbclass.ch"

#include "common.ch"
#include "inkey.ch"
#include "memoedit.ch"
#include "setcurs.ch"

// A specialized HBEditor which can simulate MemoEdit() behaviour
CREATE CLASS HBMemoEditor INHERIT HBEditor

   VAR lCallKeyboardHook AS LOGICAL INIT .F. // Patch to avoid recursive calls in endless loop. [jarabal]

   VAR xUserFunction                      // User Function called to change default MemoEdit() behaviour

   METHOD MemoInit( xUserFunction )       // This method is called after ::New() returns to perform ME_INIT actions
   METHOD Edit()                          // Calls super:Edit( nKey ) but is needed to handle configurable keys
   METHOD KeyboardHook( nKey )            // Gets called every time there is a key not handled directly by HBEditor
   METHOD IdleHook()                      // Gets called every time there are no more keys to hanlde

   METHOD HandleUserKey( nKey, nUserKey ) // Handles keys returned to MemoEdit() by user function
   METHOD xDo( nStatus )                  // Calls xUserFunction saving and restoring cursor position and shape

   METHOD MoveCursor( nKey )              // Redefined to properly managed CTRL-W

ENDCLASS

METHOD MemoInit( xUserFunction ) CLASS HBMemoEditor

   LOCAL nKey

   // Save/Init object internal representation of user function
   ::xUserFunction := xUserFunction

   IF ISCHARACTER( ::xUserFunction )
      // Keep calling user function until it returns ME_DEFAULT
      DO WHILE ( nKey := ::xDo( ME_INIT ) ) != ME_DEFAULT

         // At this time there is no input from user of MemoEdit() only handling
         // of values returned by ::xUserFunction, so I pass these value on both
         // parameters of ::HandleUserKey()
         ::HandleUserKey( nKey, nKey )

      ENDDO

   ENDIF

   RETURN Self

METHOD Edit() CLASS HBMemoEditor

   LOCAL nKey

   // NOTE: K_ALT_W is not compatible with clipper exit memo and save key, but I cannot discriminate
   //       K_CTRL_W and K_CTRL_END from harbour code.
   LOCAL aConfigurableKeys := { K_CTRL_Y, K_CTRL_T, K_CTRL_B, K_CTRL_V, K_ALT_W, K_ESC }
   LOCAL bKeyBlock

   // If I have an user function I need to trap configurable keys and ask to
   // user function if handle them the standard way or not
   IF ::lEditAllow .AND. ISCHARACTER( ::xUserFunction )

      DO WHILE ! ::lExitEdit

         // I need to test this condition here since I never block inside HBEditor:Edit()
         // if there is an user function
         IF NextKey() == 0
            ::IdleHook()
         ENDIF

         nKey := Inkey( 0 )

         IF ( bKeyBlock := SetKey( nKey ) ) != NIL
            Eval( bKeyBlock )
            LOOP
         ENDIF

         // Is it a configurable key ?
         IF AScan( aConfigurableKeys, nKey ) > 0
            ::HandleUserKey( nKey, ::xDo( iif( ::lDirty, ME_UNKEYX, ME_UNKEY ) ) )
         ELSE
            ::super:Edit( nKey )
         ENDIF
      ENDDO
   ELSE
      // If I can't edit text buffer or there is not a user function enter standard HBEditor
      // ::Edit() method which is able to handle everything
      ::super:Edit()
   ENDIF

   RETURN Self

// I come here if I have an unknown key and it is not a configurable key
// if there is an user function I leave to it its handling
METHOD KeyboardHook( nKey ) CLASS HBMemoEditor

   LOCAL nYesNoKey
   LOCAL cBackScr
   LOCAL nRow
   LOCAL nCol

   IF ISCHARACTER( ::xUserFunction )
      if( !::lCallKeyboardHook )    // Patch to avoid recursive calls
         ::lCallKeyboardHook := .T. // in endless loop. [jarabal]
         ::HandleUserKey( nKey, ::xDo( iif( ::lDirty, ME_UNKEYX, ME_UNKEY ) ) )
         ::lCallKeyboardHook := .F.
      endif
   ELSE
      IF nKey == K_ESC
         IF ::lDirty .AND. Set( _SET_SCOREBOARD )
            cBackScr := SaveScreen( ::nTop, ::nRight - 18, ::nTop, ::nRight )

            nRow := Row()
            nCol := Col()
            hb_dispOutAt( ::nTop, ::nRight - 18, "Abort Edit? (Y/N)" )
            SetPos( ::nTop, ::nRight - 1 )

            nYesNoKey := Inkey( 0 )

            RestScreen( ::nTop, ::nRight - 18, ::nTop, ::nRight, cBackScr )
            SetPos( nRow, nCol )

            IF Upper( Chr( nYesNoKey ) ) == "Y"
               ::lSaved := .F.
               ::lExitEdit := .T.
            ENDIF
         ELSE
            ::lExitEdit := .T.
         ENDIF
      ENDIF
   ENDIF

   RETURN Self

METHOD IdleHook() CLASS HBMemoEditor

   IF ISCHARACTER( ::xUserFunction )
      ::xDo( ME_IDLE )
   ENDIF

   RETURN Self

METHOD HandleUserKey( nKey, nUserKey ) CLASS HBMemoEditor

   /* Only one call from KeyboardHook() with the patch lCallKeyboardHook. Not necessary aUnHandledKeys. [jarabal]
    *
   // HBEditor does not handle these keys and would call ::KeyboardHook() causing infinite loop
   LOCAL aUnHandledKeys := { K_CTRL_J, K_CTRL_K, K_CTRL_L, K_CTRL_N, K_CTRL_O,;
                             K_CTRL_P, K_CTRL_Q, K_CTRL_T, K_CTRL_U, K_F1 }
   */

   DO CASE
   // I won't reach this point during ME_INIT since ME_DEFAULT ends initialization phase of MemoEdit()
   CASE nUserKey == ME_DEFAULT

      // HBEditor is not able to handle keys with a value higher than 256, but I have to tell him
      // that user wants to save text
      IF ( nKey <= 256 .OR. nKey == K_ALT_W ) // .AND. AScan( aUnHandledKeys, nKey ) == 0
         ::super:Edit( nKey )
      ENDIF

   // TOFIX: Not CA-Cl*pper compatible, see teditor.prg
   CASE ( nUserKey >= 1 .AND. nUserKey <= 31 ) .OR. nUserKey == K_ALT_W
      // IF AScan( aUnHandledKeys, nUserKey ) == 0
         ::super:Edit( nUserKey )
      // ENDIF

   CASE nUserKey == ME_DATA
      IF nKey <= 256    // .AND. AScan( aUnHandledKeys, nKey ) == 0
         ::super:Edit( nKey )
      ENDIF

   CASE nUserKey == ME_TOGGLEWRAP
      ::lWordWrap := !::lWordWrap

   CASE nUserKey == ME_TOGGLESCROLL
      // TODO: HBEditor does not support vertical scrolling of text inside window without moving cursor position

   CASE nUserKey == ME_WORDRIGHT
      ::MoveCursor( K_CTRL_RIGHT )

   CASE nUserKey == ME_BOTTOMRIGHT
      ::MoveCursor( K_CTRL_END )

#ifdef HB_COMPAT_XPP
   CASE nUserKey == ME_PASTE
      // TODO
#endif

   OTHERWISE
      // Do nothing
   ENDCASE

   RETURN Self

METHOD xDo( nStatus ) CLASS HBMemoEditor

   LOCAL nOldRow := ::Row()
   LOCAL nOldCol := ::Col()
   LOCAL nOldCur := SetCursor()

   LOCAL xResult := Do( ::xUserFunction, nStatus, ::nRow, ::nCol - 1 )

   IF ! ISNUMBER( xResult )
      xResult := ME_DEFAULT
   ENDIF

   ::SetPos( nOldRow, nOldCol )
   SetCursor( nOldCur )

   RETURN xResult

METHOD MoveCursor( nKey ) CLASS HBMemoEditor

   IF nKey == K_CTRL_END // same value as CTRL-W
      ::lSaved := .T.
      ::lExitEdit := .T.
   ELSE
      RETURN ::Super:MoveCursor( nKey )
   ENDIF

   RETURN .f.

/*----------------------------------------------------------------------------------------*/

FUNCTION MemoEdit( cString,;
                   nTop,;
                   nLeft,;
                   nBottom,;
                   nRight,;
                   lEditMode,;
                   xUserFunction,;
                   nLineLength,;
                   nTabSize,;
                   nTextBuffRow,;
                   nTextBuffColumn,;
                   nWindowRow,;
                   nWindowColumn )

   LOCAL oEd

   LOCAL nOldCursor

   DEFAULT nTop            TO 0
   DEFAULT nLeft           TO 0
   DEFAULT nBottom         TO MaxRow()
   DEFAULT nRight          TO MaxCol()
   DEFAULT lEditMode       TO .T.
   DEFAULT nLineLength     TO nRight - nLeft
   DEFAULT nTabSize        TO 4
   DEFAULT nTextBuffRow    TO 1
   DEFAULT nTextBuffColumn TO 0
   DEFAULT nWindowRow      TO 0
   DEFAULT nWindowColumn   TO nTextBuffColumn
   DEFAULT cString         TO ""

   // Original MemoEdit() converts Tabs into spaces;
   oEd := HBMemoEditor():New( StrTran( cString, Chr( K_TAB ), Space( 1 ) ), nTop, nLeft, nBottom, nRight, lEditMode, nLineLength, nTabSize, nTextBuffRow, nTextBuffColumn, nWindowRow, nWindowColumn )
   oEd:MemoInit( xUserFunction )
   oEd:display()

   IF ! ISLOGICAL( xUserFunction ) .OR. xUserFunction == .T.
      nOldCursor := SetCursor( iif( Set( _SET_INSERT ), SC_INSERT, SC_NORMAL ) )
      oEd:Edit()
      IF oEd:Changed()
         cString := oEd:GetText()
         // dbu tests for LastKey() == K_CTRL_END, so I try to make it happy
         HB_SetLastKey( K_CTRL_END )
      ENDIF
      SetCursor( nOldCursor )
   ENDIF

   RETURN cString


From harbour.01 at syenar.hu  Wed May 13 15:44:31 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May 13 16:40:21 2009
Subject: [Harbour] Error(2) BASE/1301 Object destructor failure: Reference
	to freed block
In-Reply-To: <18d502870905131242ifaee4a0ib079129c5629f254@mail.gmail.com>
References: <18d502870905111015u17d365eel4aba394dd55ada86@mail.gmail.com>
	<20090511185224.GA19554@uran.home.aster.pl>
	<18d502870905130811j6a99fed1pd0adc056a3f6fb01@mail.gmail.com>
	<18d502870905131242ifaee4a0ib079129c5629f254@mail.gmail.com>
Message-ID: <18d502870905131244s3048e68gfd2058841760c111@mail.gmail.com>

An even simpler one:---
PROCEDURE Main()
   LOCAL oBrowse, tmp

   oBrowse := TBrowseNew( 0, 0, MaxRow(), MaxCol() )
   oBrowse:addColumn( TBColumnNew( "a", {|| "b" } ) )

   tmp := oBrowse:getColumn( 1 )
   tmp := oBrowse:colWidth( 1 ) + Len( oBrowse:colSep )

   RETURN
---

Brgds,
Viktor

On Wed, May 13, 2009 at 9:42 PM, Viktor Szak?ts <harbour.01@syenar.hu>wrote:

> Hi Przemek,
> I could reduce the bug to this small example, important that
> it only happens with -gc3:
> ---
> PROCEDURE Main()
>    LOCAL oBrowse, tmp
>
>    dbCreate( "test.dbf", { { "FIRST", "C", 10, 0 } } )
>
>    USE test.dbf
>
>    oBrowse := TBrowseNew( 0, 0, MaxRow(), MaxCol() )
>
>    oBrowse:addColumn( TBColumnNew( "FIRST", {|| FIELD->FIRST } ) )
>
>    tmp := oBrowse:getColumn( 1 )
>    tmp := oBrowse:colWidth( 1 ) + Len( oBrowse:colSep )
>
>    RETURN
> ---
>
> Result:
> ---
> Error BASE/1301  Object destructor failure: Reference to freed block
> Error BASE/1301  Object destructor failure: Reference to freed block
> ---
>
> Brgds,
> Viktor
>
>
> On Wed, May 13, 2009 at 5:11 PM, Viktor Szak?ts <harbour.01@syenar.hu>wrote:
>
>> Hi Przemek,
>> I can now consistently replicate the problem with latest Harbour
>> build, smaller app, also with MinGW and under Linux/gcc. Now I'm doing
>> tests with valgrind, but it doesn't signal anything interesting.
>>
>> Can you suggest a valgrind command line which could help
>> locating such problem? or any non-valgrind method?
>>
>> Brgds,
>> Viktor
>>
>> On Mon, May 11, 2009 at 8:52 PM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:
>>
>>> On Mon, 11 May 2009, Szak?ts Viktor wrote:
>>>
>>> Hi,
>>>
>>> > I just received this error in my otherwise stable app:
>>> > Error(2) BASE/1301 Object destructor failure: Reference to freed block
>>> > Then it gave an MSVC RTL error message, finally a
>>> > regular app crash (but without logs).
>>> > This happened with an MSVC 2005 build, rev 10222, in
>>> > an hb_idleSleep() call, after leaving the app running for
>>> > hours, most of the time idling with a screen saver and
>>> > playing with it for a few minutes. The error happened
>>> > when trying to exit to idle app. This also means I cannot
>>> > create a small example to replicate the error.
>>> > Is there anything I can do to track this down, or other
>>> > ideas why could this happen?
>>> > [ The app uses some private C code, but only simple
>>> > function calls and it also does some GC collected
>>> > allocations in gauge/file viewer functionality. ]
>>>
>>> hb_idleSleep() can activate the GC so it can be shown in call stack
>>> but the problem is not in this function but somewhere else, probably
>>> in your local code but I can only guess. Harbour counts all GC
>>> allocations
>>> and deallocations and if they are not equal or when destructor reattach
>>> destroyed block to known item which is not destroyed in the same pass
>>> then above RT error message is generated.
>>> It can be caused by stupid typo like dummy hb_gcAlloc() call without
>>> attaching the result to know for HVM HB_ITEM, f.e.:
>>>
>>>   proc main()
>>>      f()
>>>      hb_idleReset(); hb_idleSleep(1)
>>>   return
>>>   #pragma begindump
>>>   #include "hbapi.h"
>>>   HB_FUNC_STATIC( F ) { hb_gcAlloc( 10, NULL ); }
>>>   #pragma enddump
>>>
>>> or it can be sth more serious like result of some memory corruption,
>>> f.e.:
>>>
>>>   proc main()
>>>      f( {} )
>>>      hb_idleReset(); hb_idleSleep(1)
>>>   return
>>>   #pragma begindump
>>>   #include "hbapi.h"
>>>   HB_FUNC_STATIC( F )
>>>   {
>>>      PHB_ITEM pItem = hb_param( 1, HB_IT_ANY );
>>>      /* simulate memory corruption */
>>>      memset( pItem, 0, 4 );
>>>   }
>>>   #pragma enddump
>>>
>>>
>>> What exactly happen in you case I do not know. I can only tell you that
>>> one memory blocks allocated by hb_gcAlloc():
>>>   1. was not attached to know item at all
>>> or:
>>>   2. it was reused and attached to new item after destroy (hb_gcFree())
>>> or:
>>>   3. the reference counter to such memory block (or item which kept such
>>>      reference counter) had been corrupted (overwritten) by some buggy
>>> code.
>>>
>>> best regards,
>>> Przemek
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090513/0082a6d4/attachment.html
From fmancera at viaopen.com  Wed May 13 17:32:11 2009
From: fmancera at viaopen.com (fmancera@viaopen.com)
Date: Wed May 13 18:29:34 2009
Subject: [Harbour] Bug in ADS
In-Reply-To: <1242242430411-2886000.post@n2.nabble.com>
References: <1242242430411-2886000.post@n2.nabble.com>
Message-ID: <29c193f769dd6de36df14cec9dbf5d22@viaopen.com>

Hello Abe,

> with the following test.prgProc MAIN()
> 
> 
> ----------
> REQUEST ADS
> AdsSetServerType( 1 )
> 
> dbCreate( "test.DBF", {;
> {     "ITEMID", "C",   8,  0 }, ;
> {       "ITEM", "C",  12,  0 }, ;
> {      "CLASS", "C",   8,  0 }, ;
> {        "SUB", "C",   8,  0 }, ;
> {       "CQTY", "N",   7,  2 }, ;
> { "R_PAK_BULK", "C",   1,  0 }, ;
> { "C_PAK_BULK", "C",   1,  0 }, ;
> {      "LDESC", "C",  30,  0 }, ;
> {        "MAN", "C",  15,  0 }, ;
> {      "BRAND", "C",  15,  0 }, ;
> {      "SHELF", "C",   6,  0 }, ;
> {       "DESC", "C",  40,  0 }, ;
> {       "MINS", "N",   8,  2 }, ;
> {     "ONHAND", "N",  15,  2 }, ;
> {      "PRICE", "N",   6,  2 }, ;
> {     "PRICE2", "N",   6,  2 }} )
> 
> 
> USE test VIA "ADS" SHARED
> for lop  :=  1 to 100
>     append blank
> NEXT
> 
> BROWSE()
> ------------
> and make command
> 
> hbmk2 test -lrddads -lace32
> 
> now look at field DESC it's being expended to lenght 41 with a garbage
> character at the end.

I had that problem. I solved using the latest ADS 9.10 SDK.

Regards,

Fernando Mancera
www.viaopen.com
From jfl at mafact.com  Wed May 13 17:53:00 2009
From: jfl at mafact.com (J. Lefebvre)
Date: Wed May 13 19:02:44 2009
Subject: [Harbour] HRB problem with inherited classes
In-Reply-To: <20090513103408.GA21208@uran.home.aster.pl>
Message-ID: <43ed7eb4.1c9d415.3263a0b.3004@mafact.com>

Hi Przemek,

Thanks for the clarification about HB_HRBDO(), my mistake. 

You where right, Hrb file was closed by the garbage collector.

The call to hRb was done from a function wich stored pHrb into a local var, saving Hrb pointer to some static var solved the problem.
Finally, I even don't need to use HB_HrbDo(), just loading the HRB and unloading it at the end of the program is enough.

Many thanks for the clarification,

Regards,

JF,

-----Message d'origine-----
De?: Przemyslaw Czerpak [mailto:druzus@acn.waw.pl] 
Envoy??: mercredi 13 mai 2009 12:34
??: Harbour Project Main Developer List.; J. Lefebvre; Phil Barnett
Objet?: Re: [Harbour] HRB problem with inherited classes

On Wed, 13 May 2009, J. Lefebvre wrote:

Hi,

> This mail seem to never reach the list ... New test !
> ++++++++++++++++++++++++++++++++++++++++++++++++++++++

And it's very serious problem. I still cannot see some messages
I sent to this list in last days. They are not available also on
http://lists.harbour-project.org/pipermail/harbour/2009-May.
Phil please look at it. The messages does not appear at all or are
delivered with huge delay.
The same was happening in the December and then the list died.

> I'm working with HRB files and suddently discovered a serious problem when
> using Classes defined within the HRB files inheriting from classes from the
> main program.
> Suppose we have those two classes, Dialog within the main exe, and MyDlg
> from the HRB file. (This sample is NOT tested nor compiled, it could
> contain errors, just here to explain the problem !!!)
>
> Main prog ;
> Class Dialog
>  VAR x
>  Method New() Inline x:=1, Self
>  Method Destroy() 
>  Method OnClose() INLINE .F.
> endclass
>
> Method Destroy() Class Dialog
>  if(::Onclose())
>   x:=NIL
>  endif
> Return Self
>
>
> HRB prog ;
> Class MyDlg inherit Dialog
>  VAR y
>  Method New() INLINE y:=1, Super:New()
>  Method OnClose  
> Endclass
>
> Method OnClose() Class MyDlg
> Return .T.
>
> When Running the (similar, bug much much biger) prog, at the time of
> Calling Destroy() method, the super class method is used, so ::Onclose()
> is called and the class hierarchy is working nicely, to use the onclose()
> method defined in MyDlg class, within the HRB file.
>
> Then, class system is looking for the associated static function
> MyDlg_Onclose() defined within the MyDlg Class Header and ...
> IT DOES'NT FIND IT (as expected) because it should be called by
> HB_HrbDo(...) and not directly ...

The above is not true. There is nothing what has to be called by HB_HrbDo()
The above function does not make anything more then executing the 1-st
non static function from the .hrb file. The only one functionality given
by this function is executing the 1-st function from loaded .hrb file when
it's not known at all. It does not provide any other functionality and is
not necessary to use .hrb files.

> Now some questions :
> Could we imagine a system where we could create a new HBR function like
> HB_HBRDYNSYMLOAD(cHbrFile) wich not only would load the HBR header, but
> also would list all internal function and add them to main symbol list
> (event more powerfull, it could replace some if some with same name exist,
> allowing the HRB file to patch program easily)

It works in such way. For HVM there is not difference between code loaded
from .hrb files, static part of applications or shared libraries loaded
statically or dynamically. The new functions are registered and are visible
and usable as any other functions until module is unloaded. If module is
unloaded the references to functions insiade the module are cleared so
if they were stored in some other structures, f.e. in classes code or in
some variables ( var := @myhrbfunc() ) then when you try to execute them
you will have function not found RTE what is expected behavior.
If the same modules is loaded again the all references are resotred
automatically.

> Where should I have a look if I want to add this kind of functionalities ?

I can only guess that in your case the .hrb module was unloaded explicitly
by your code or azutomnatically by destructor, f.e.:

   pHRB := hb_hrbLoad( cHrbFile )
   [...]
   pHRB := NIL // activate automatic destructor which calls hb_hrbUnLoad()

> I found runner.c but I have to
> 1) scan HRB to list existing function,
> 2) scan the actual symbol list and either replace some symbol or add
> new symbol
> Finally, I shoud be able to unload the HRB file and restore the symbol
> list (but I can live without it  :-) ).

I'm sorry but I do not understand what you want to do in above.
You can cleanly unload .hrb files at any moment. But if you will
later try to execute some function or method from unloaded .hrb
file using some references or macro compiler ( &("myhrbfunc")() )
then you will have Error BASE/1001 Undefined function: MYHRBFUNC
or similar method/ivar not found.
What seems to be nice and clean solution.
Of cousre we can also replace unloaded functions with some dummy code
but IMHO it's not good idea.

> Apart the last point, this is how Blinker was working with blinker
> special DLL for clipper. You can load a Dll with some code (new or
> existing) and the loader add all the function and vars to the symbol
> table, eventually replacing existing one. With Blinker, you CAN'T
> unload it without GPFying your program !!!

And with Harbour you can do it cleanly and if you try to access unloaded
functions then you should have clean RTE: function/message not found.
Of course it's possible the we have some bugs in existing code and we
have GPF but in such case such I will need self contain example to fix it.

best regards,
Przemek

From druzus at acn.waw.pl  Wed May 13 18:20:14 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed May 13 19:33:12 2009
Subject: [Harbour] Bug in ADS
In-Reply-To: <1242242430411-2886000.post@n2.nabble.com>
References: <1242242430411-2886000.post@n2.nabble.com>
Message-ID: <20090513222014.GB29975@uran.home.aster.pl>

On Wed, 13 May 2009, AbeB wrote:
Hi,
> with the following test.prgProc MAIN()
> ----------
> REQUEST ADS
> AdsSetServerType( 1 )
> 
> dbCreate( "test.DBF", {;
> {     "ITEMID", "C",   8,  0 }, ;
> {       "ITEM", "C",  12,  0 }, ;
> {      "CLASS", "C",   8,  0 }, ;
> {        "SUB", "C",   8,  0 }, ;
> {       "CQTY", "N",   7,  2 }, ;
> { "R_PAK_BULK", "C",   1,  0 }, ;
> { "C_PAK_BULK", "C",   1,  0 }, ;
> {      "LDESC", "C",  30,  0 }, ;
> {        "MAN", "C",  15,  0 }, ;
> {      "BRAND", "C",  15,  0 }, ;
> {      "SHELF", "C",   6,  0 }, ;
> {       "DESC", "C",  40,  0 }, ;
> {       "MINS", "N",   8,  2 }, ;
> {     "ONHAND", "N",  15,  2 }, ;
> {      "PRICE", "N",   6,  2 }, ;
> {     "PRICE2", "N",   6,  2 }} )
> USE test VIA "ADS" SHARED
> for lop  :=  1 to 100
>     append blank
> NEXT
> BROWSE()
> ------------
> and make command
> hbmk2 test -lrddads -lace32
> now look at field DESC it's being expended to lenght 41 with a garbage
> character at the end.

It seems to be ACE bug. Not Harbour.

Here is reduced example:

      REQUEST ADS
      proc main()
      adsSetServerType( 1 )
      rddSetDefault( "ADS" )
      dbCreate( "test.dbf", { { "F", "C", 24, 0 } } )
      USE test
      while lastrec() < 10
         dbappend()
         field->F := repl( "1234567890", 10 )
      enddo
      dbgotop()
      browse()

For filed F shorted then 24 bytes AdsGetField() returns correct results
but for longer it adds dummy char at the end.
It should be reported to Extended System.
Meanwhile I can add workaround and cut the filed to maximum size reported
by table structure info but such hack will badly damage values if ADS
introduce compressed fields which can be longer.

best regards,
Przemek
From druzus at users.sourceforge.net  Wed May 13 18:15:01 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Wed May 13 19:36:50 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11037] trunk/harbour
Message-ID: <E1M4Mj7-0002Wp-BV@d5vjzd1.ch3.sourceforge.com>

Revision: 11037
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11037&view=rev
Author:   druzus
Date:     2009-05-13 22:14:57 +0000 (Wed, 13 May 2009)

Log Message:
-----------
2009-05-14 00:23 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/rddads/ads1.c
    ! added workaround for ACE bug: character fields longer then 23 bytes are
      increased by one byte when read by AdsGetField().

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/rddads/ads1.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Wed May 13 19:06:38 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May 13 19:59:49 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11038] trunk/harbour
Message-ID: <E1M4NX4-00054i-I4@bj8yhf1.ch3.sourceforge.com>

Revision: 11038
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11038&view=rev
Author:   vszakats
Date:     2009-05-13 23:06:37 +0000 (Wed, 13 May 2009)

Log Message:
-----------
2009-05-14 01:05 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed -map for msvc compilers.
      (regression since splitting compile/link phase)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Wed May 13 19:08:13 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Wed May 13 19:59:53 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11039] trunk/harbour
Message-ID: <E1M4NYb-0003u9-Qk@d5vjzd1.ch3.sourceforge.com>

Revision: 11039
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11039&view=rev
Author:   druzus
Date:     2009-05-13 23:08:13 +0000 (Wed, 13 May 2009)

Log Message:
-----------
2009-05-14 01:16 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/rddads/ads1.c
    * enable workaround code added in previous commit only for ACE 9.00.
      If other ACE clients need it too then please report them.
      Fernando reported that 9.10 is fixed.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/rddads/ads1.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Wed May 13 19:16:44 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed May 13 20:20:11 2009
Subject: [Harbour] Bug in ADS
In-Reply-To: <29c193f769dd6de36df14cec9dbf5d22@viaopen.com>
References: <1242242430411-2886000.post@n2.nabble.com>
	<29c193f769dd6de36df14cec9dbf5d22@viaopen.com>
Message-ID: <20090513231643.GA9994@uran.home.aster.pl>

On Wed, 13 May 2009, fmancera@viaopen.com wrote:

Hi,

> I had that problem. I solved using the latest ADS 9.10 SDK.

Thanks for the information. So it's already fixed.
Can someone who has older ACE libraries check if the problem is local to
version 9.00 and does not exist in 8.10 and/or in older versions?

I've just added workaround for this problem to our ADS RDD code but
if possible I would like to reduce it by #if to exact version of
libraries which need it.
In next commit I'll cover the workaround code by
   #if ADS_LIB_VERSION == 900
so other ACE version can be easy tested and added to above #if condition
if necessary.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed May 13 18:58:16 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed May 13 20:22:08 2009
Subject: [Harbour] Harbour nomination for sf.net best project/best dev tool
Message-ID: <68948A51-EE0E-4CBD-903F-025C8F49D751@syenar.hu>

Hi Vailton,

Would you please add this little icon to our webpage:

<a href="http://sourceforge.net/community/cca09/nominate/?project_name=Harbour&project_url=http://www.harbour-project.org/ 
"><img src="http://sourceforge.net/images/cca/cca_nominate.png"  
border="0"/></a>

[ If someone has any objection, please speak up. ]

Brgds,
Viktor

From abe.buch at att.net  Wed May 13 18:51:07 2009
From: abe.buch at att.net (AbeB)
Date: Wed May 13 20:25:26 2009
Subject: [Harbour] Bug in ADS
In-Reply-To: <29c193f769dd6de36df14cec9dbf5d22@viaopen.com>
References: <1242242430411-2886000.post@n2.nabble.com>
	<29c193f769dd6de36df14cec9dbf5d22@viaopen.com>
Message-ID: <1242255067071-2887030.post@n2.nabble.com>


Przemyslaw just fixed it, in't this guy just great?! Thanks Przemyslaw.

2009-05-14 00:23 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/rddads/ads1.c
    ! added workaround for ACE bug: character fields longer then 23 bytes
are
      increased by one byte when read by AdsGetField().


fmancera wrote:
> 
> Hello Abe,
> 
>> with the following test.prgProc MAIN()
>> 
>> 
>> ----------
>> REQUEST ADS
>> AdsSetServerType( 1 )
>> 
>> dbCreate( "test.DBF", {;
>> {     "ITEMID", "C",   8,  0 }, ;
>> {       "ITEM", "C",  12,  0 }, ;
>> {      "CLASS", "C",   8,  0 }, ;
>> {        "SUB", "C",   8,  0 }, ;
>> {       "CQTY", "N",   7,  2 }, ;
>> { "R_PAK_BULK", "C",   1,  0 }, ;
>> { "C_PAK_BULK", "C",   1,  0 }, ;
>> {      "LDESC", "C",  30,  0 }, ;
>> {        "MAN", "C",  15,  0 }, ;
>> {      "BRAND", "C",  15,  0 }, ;
>> {      "SHELF", "C",   6,  0 }, ;
>> {       "DESC", "C",  40,  0 }, ;
>> {       "MINS", "N",   8,  2 }, ;
>> {     "ONHAND", "N",  15,  2 }, ;
>> {      "PRICE", "N",   6,  2 }, ;
>> {     "PRICE2", "N",   6,  2 }} )
>> 
>> 
>> USE test VIA "ADS" SHARED
>> for lop  :=  1 to 100
>>     append blank
>> NEXT
>> 
>> BROWSE()
>> ------------
>> and make command
>> 
>> hbmk2 test -lrddads -lace32
>> 
>> now look at field DESC it's being expended to lenght 41 with a garbage
>> character at the end.
> 
> I had that problem. I solved using the latest ADS 9.10 SDK.
> 
> Regards,
> 
> Fernando Mancera
> www.viaopen.com
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://n2.nabble.com/Bug-in-ADS-tp2886000p2887030.html
Sent from the harbour-devel mailing list archive at Nabble.com.

From vszakats at users.sourceforge.net  Wed May 13 19:37:19 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May 13 20:25:50 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11040] trunk/harbour
Message-ID: <E1M4O0l-00065a-8d@bj8yhf1.ch3.sourceforge.com>

Revision: 11040
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11040&view=rev
Author:   vszakats
Date:     2009-05-13 23:37:18 +0000 (Wed, 13 May 2009)

Log Message:
-----------
2009-05-14 01:35 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/memoedit.prg
    ! Fixed infinite loop in code below (this was a long time problem):
      ---
      MemoEdit( "Please press F2 for infinite loop", 0, 0, MaxRow(), MaxCol(), .F., "FunCtr" )
      FUNCTION FunCtr()
         RETURN 0
      ---
      Patch provided by Xavi [jarabal]. Thank you.

  * contrib/hbwin/oleauto.prg
  * contrib/hbwin/olecore.c
    * Minor formatting.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/oleauto.prg
    trunk/harbour/contrib/hbwin/olecore.c
    trunk/harbour/source/rtl/memoedit.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Wed May 13 19:48:52 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May 13 20:52:14 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11041] trunk/harbour
Message-ID: <E1M4OBw-0006IH-2H@bj8yhf1.ch3.sourceforge.com>

Revision: 11041
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11041&view=rev
Author:   vszakats
Date:     2009-05-13 23:48:51 +0000 (Wed, 13 May 2009)

Log Message:
-----------
2009-05-14 01:47 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed very rare potential inconsistency between timestamp values.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Wed May 13 20:15:23 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May 13 21:24:01 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11042] trunk/harbour
Message-ID: <E1M4Obb-0005Yf-Qy@d5vjzd1.ch3.sourceforge.com>

Revision: 11042
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11042&view=rev
Author:   vszakats
Date:     2009-05-14 00:15:22 +0000 (Thu, 14 May 2009)

Log Message:
-----------
2009-05-14 02:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbextern.ch
  * contrib/xhb/hbcompat.ch
  * source/rtl/setkey.c
    + Added HB_SETKEY() which is similar to SETKEY() but contains
      3rd parameter extension. Now this functionality is available
      for default Harbour builds under this new function name.
    + Added cross mappings for xhb SETKEY().

  * source/rtl/setfunc.prg
    + F11/F12 key handling now protected with HB_C52_STRICT instead
      of HB_EXTENSION so it will available in default builds.
    - Other HB_EXTENSION protected feature deleted (allowing to
      assign non-string key sequences to F keys. This effect can
      easily be achieved with direct SETKEY() calls, so it wasn't
      an essential extension here.

  * source/rtl/hbffind.c
    + Internal HB_EXTENSION protected part enabled.
    - Deleted HB_EXTENSION dealing with Windows-specific attribute
      chars. Those needing this functionality can access it using
      C level API.

  * source/rtl/tpopup.prg
  * source/rtl/ttopbar.prg
    - Deleted minor (non Clipper-compatible) behaviour change
      in handling disabled menu items when HB_EXTENSION
      is enabled.

  ; Only remains few class extensions covered by HB_EXTENSION.
    Overall there is no reason anymore to use this macro.
    TODO: Solve these using inheritance.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/xhb/hbcompat.ch
    trunk/harbour/include/hbextern.ch
    trunk/harbour/source/rtl/hbffind.c
    trunk/harbour/source/rtl/setfunc.prg
    trunk/harbour/source/rtl/setkey.c
    trunk/harbour/source/rtl/tpopup.prg
    trunk/harbour/source/rtl/ttopbar.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Wed May 13 20:32:16 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May 13 21:46:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11043] trunk/harbour
Message-ID: <E1M4Orw-0006Gt-DJ@d5vjzd1.ch3.sourceforge.com>

Revision: 11043
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11043&view=rev
Author:   vszakats
Date:     2009-05-14 00:31:36 +0000 (Thu, 14 May 2009)

Log Message:
-----------
2009-05-14 02:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbextern.ch
  * source/rtl/Makefile
  + source/rtl/tgethb.prg
  * source/rtl/tget.prg
    + HB_EXTENSION functionality (:hideInput() and :style()) moved
      from GET to a new derived class called HB_GET(). It means
      this functionality is available in default builds.
      Further extensions can be added to this class.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/include/hbextern.ch
    trunk/harbour/source/rtl/Makefile
    trunk/harbour/source/rtl/tget.prg

Added Paths:
-----------
    trunk/harbour/source/rtl/tgethb.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From toninhofwi at yahoo.com.br  Wed May 13 20:50:10 2009
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed May 13 21:51:49 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11039] trunk/harbour
In-Reply-To: <E1M4NYb-0003u9-Qk@d5vjzd1.ch3.sourceforge.com>
References: <E1M4NYb-0003u9-Qk@d5vjzd1.ch3.sourceforge.com>
Message-ID: <raqm059d2t0teesknpvp3sf4apaftjllcb@4ax.com>

>2009-05-14 01:16 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/contrib/rddads/ads1.c
>    * enable workaround code added in previous commit only for ACE 9.00.
>      If other ACE clients need it too then please report them.

Hi Przemek.

Thanks for your fix, but I'm an ADS 9.10 user and I can see that if I
use ads1.c 10193 2009-02-06 18:23:08Z vszakats, I see no bug.

The bug appear in ads1.c 10946 2009-04-28 19:35:27Z druzus.

Can you check it please?  Maybe I'm wrong.


>      Fernando reported that 9.10 is fixed.
I'm not confirm this information. 9.10 still bugged without your fix.


Thank you and best regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From cigcor at hotmail.com  Wed May 13 21:37:50 2009
From: cigcor at hotmail.com (=?utf-8?Q?S=C3=A9rgio_Kondo?=)
Date: Wed May 13 22:21:57 2009
Subject: [Harbour] Mini-tutorial MySQL connection
In-Reply-To: <20090513151519.68E98680846A@eva104.dadanet.it>
References: <20090513151519.68E98680846A@eva104.dadanet.it>
Message-ID: <COL103-DS751F1E1A097CECE2A2D52DC5E0@phx.gbl>

Hi,
ADORDD need MyODBC in all Client?
Thanks
S?rgio


From: calimero22@freemail.it 
Sent: Wednesday, May 13, 2009 12:15 PM
To: harbour@harbour-project.org ; harbour@harbour-project.org 
Subject: [Harbour] Mini-tutorial MySQL connection


MINI-TUTORIAL TO CONNECT HARBOUR PROGRAM WITH MYSQL DB

Here's my little and nice tutorial about connection
between a local Harbour program AND a remote MySQL Database.

by GIOVANNI DI MARIA

Follow the following steps:
====================================

1) You need a mysql server (local or remote).
   I use the remote service www.db4free.net.

2) Create the database on the server.

3) Create the table on this database.

4) Create some column on this table.

5) Download and install the connector "mysql-connector-odbc-3.51.27-win32.msi".
Don't create ANY DSN!

6) Write and compile the following harbour program:

#include "adordd.ch"
REQUEST ADORDD
function Main()
   clear screen
   setmode(25,80)
   USE DatabaseName VIA "ADORDD" TABLE "TableName" MYSQL FROM "db4free.net" USER "username" PASSWORD "password"
   dbedit()
   USE
   clear screen
return nil


7) Compile it with hbmk2 program.prg rddado.lib hbbin.lib

8) Run it and ENJOY!!

====================================






--- Dada Music Movement, tutta la musica che vuoi! --- 


--------------------------------------------------------------------------------


_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090513/6d1afbbd/attachment-0001.html
From druzus at users.sourceforge.net  Wed May 13 17:39:36 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Wed May 13 22:33:03 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11036] trunk/harbour
Message-ID: <E1M4MAq-0001q7-PV@bj8yhf1.ch3.sourceforge.com>

Revision: 11036
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11036&view=rev
Author:   druzus
Date:     2009-05-13 21:39:35 +0000 (Wed, 13 May 2009)

Log Message:
-----------
2009-05-13 23:48 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/hvm.c
    ! fixed vary bad bug: possible complex variable corruption caused by
      missing hb_itemClear().
    % minor optimization

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/vm/hvm.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Wed May 13 17:49:11 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed May 13 22:43:07 2009
Subject: [Harbour] Error(2) BASE/1301 Object destructor failure:
	Reference to freed block
In-Reply-To: <18d502870905131244s3048e68gfd2058841760c111@mail.gmail.com>
References: <18d502870905111015u17d365eel4aba394dd55ada86@mail.gmail.com>
	<20090511185224.GA19554@uran.home.aster.pl>
	<18d502870905130811j6a99fed1pd0adc056a3f6fb01@mail.gmail.com>
	<18d502870905131242ifaee4a0ib079129c5629f254@mail.gmail.com>
	<18d502870905131244s3048e68gfd2058841760c111@mail.gmail.com>
Message-ID: <20090513214911.GA29975@uran.home.aster.pl>

On Wed, 13 May 2009, Szak?ts Viktor wrote:

Hi,

> An even simpler one:---
> PROCEDURE Main()
>    LOCAL oBrowse, tmp
>    oBrowse := TBrowseNew( 0, 0, MaxRow(), MaxCol() )
>    oBrowse:addColumn( TBColumnNew( "a", {|| "b" } ) )
>    tmp := oBrowse:getColumn( 1 )
>    tmp := oBrowse:colWidth( 1 ) + Len( oBrowse:colSep )
>    RETURN
> > I could reduce the bug to this small example, important that
> > it only happens with -gc3:

It could be even much simpler.
The bug is inside HVM and it's caused my missing hb_itemClear() call
in some cases. It can be exploited also with -gc0/2 output but it
needs different code.
Many thanks for information and code exampled.
I've just committed the fix.

best regards,
Przemek
From niki at synel.co.il  Thu May 14 01:24:12 2009
From: niki at synel.co.il (Chen Kedem)
Date: Thu May 14 02:20:57 2009
Subject: [Harbour] Re: Harbour nomination for sf.net best project/best dev
Message-ID: <1A07FEDC778C3E4AA417F089511F859C14A8F872E1@Mail-yoq.SYNEL-COMPANY.LTD>

On Thu, 14 May 2009 00:58:16 +0200, Szak?ts Viktor  wrote:
> Hi Vailton,
> Would you please add this little icon to our webpage:

While you do that, if you can update the SF logo as I wrote in this mail:
http://lists.harbour-project.org/pipermail/harbour/2009-March/016796.html

Thanks,

  Chen.
From niki at synel.co.il  Thu May 14 01:48:42 2009
From: niki at synel.co.il (Chen Kedem)
Date: Thu May 14 03:02:03 2009
Subject: [Harbour] Re: Harbour nomination for sf.net best project/best dev
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C14A8F872E1@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C14A8F872E1@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <1A07FEDC778C3E4AA417F089511F859C14A8F872E3@Mail-yoq.SYNEL-COMPANY.LTD>

(sending this message again as I can't see it in the archive, with a direct CC just to make sure)

On Thu, 14 May 2009 00:58:16 +0200, Szak?ts Viktor  wrote:
> Hi Vailton,
> Would you please add this little icon to our webpage:

While you do that, if you can update the SF logo as I wrote in this mail:
http://lists.harbour-project.org/pipermail/harbour/2009-March/016796.html

Thanks,

  Chen.
From druzus at acn.waw.pl  Thu May 14 02:13:08 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May 14 03:16:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11039] trunk/harbour
In-Reply-To: <raqm059d2t0teesknpvp3sf4apaftjllcb@4ax.com>
References: <E1M4NYb-0003u9-Qk@d5vjzd1.ch3.sourceforge.com>
	<raqm059d2t0teesknpvp3sf4apaftjllcb@4ax.com>
Message-ID: <20090514061308.GA10754@uran.home.aster.pl>

On Wed, 13 May 2009, Toninho@fwi wrote:

Hi

> Thanks for your fix, but I'm an ADS 9.10 user and I can see that if I
> use ads1.c 10193 2009-02-06 18:23:08Z vszakats, I see no bug.
> The bug appear in ads1.c 10946 2009-04-28 19:35:27Z druzus.
> Can you check it please?  Maybe I'm wrong.

It's possible. Just simply our older ADS RDD versions ignored the size
returned by ADS client and always used fixed size. It was wrong because
in such way we changed the field size in some cases, f.e. for varlength
VFP character fields. I fixed it but it exploited bug in ACE library.

> >      Fernando reported that 9.10 is fixed.
> I'm not confirm this information. 9.10 still bugged without your fix.

So it means that it has to be reported to Extended System and the workaround
activated also for other version.
ADS users interested in in please ask ACE authors about it. Maybe we are
missing sth important.

best regards,
Przemek
From druzus at acn.waw.pl  Thu May 14 02:20:12 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May 14 03:18:03 2009
Subject: (fwd) Re: [Harbour] SF.net SVN: harbour-project:[11023] trunk/harbour
Message-ID: <20090514062012.GA21864@uran.home.aster.pl>

----- Forwarded message from Przemyslaw Czerpak <druzus@acn.waw.pl> -----

From: Przemyslaw Czerpak <druzus@acn.waw.pl>
Subject: Re: [Harbour] SF.net SVN: harbour-project:[11023] trunk/harbour
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Date: Tue, 12 May 2009 17:54:36 +0200
Lines: 20

On Tue, 12 May 2009, vszakats@users.sourceforge.net wrote:

Hi,

>   * source/rtl/mlcfunc.c
>     - Deleted HB_EXTENSION branch. Please modify your program to
>       use Set( _SET_EOL ) instead of passing EOLs explicitly to
>       memo functions. This works also in xhb.
>       INCOMPATIBLE when for HB_EXTENSION builds.

In this case you removed important functionality without leaving any
alternative for users. _SET_EOL is not a solution or replacement at all.
Now it's not possible to use multiple EOLs in this set of functions what
is very important in some portable programs which have to accept data
with different EOLs.
Can you revert this modification until we will not have any working
alternative?

best regards,
Przemek

----- End forwarded message -----
From druzus at acn.waw.pl  Thu May 14 02:20:26 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May 14 03:18:07 2009
Subject: (fwd) Re: [Harbour] hbmk2: any features still missing?
Message-ID: <20090514062026.GB21864@uran.home.aster.pl>

----- Forwarded message from Przemyslaw Czerpak <druzus@acn.waw.pl> -----

From: Przemyslaw Czerpak <druzus@acn.waw.pl>
Subject: Re: [Harbour] hbmk2: any features still missing?
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Date: Tue, 12 May 2009 14:47:55 +0200
Lines: 12

On Tue, 12 May 2009, Szak?ts Viktor wrote:

Hi,

> Hi All,
> Is there any important feature still missing from hbmk2?

I cannot test it in real environment because -o does not work
for hbcmp.

best regards,
Przemek

----- End forwarded message -----
From bedipritpal at hotmail.com  Thu May 14 02:20:07 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu May 14 03:21:47 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <23527339.post@talk.nabble.com>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com>
Message-ID: <23535023.post@talk.nabble.com>


Hello


Rossine wrote:
> 
> METHOD New( oWnd, cProgID, nRow, nCol, nWidth, nHeight ) CLASS TActiveX
>       ::oOleAuto = TOleauto():New( ActXPdisp( ::hActiveX ) )
> 

Apply this patch in olecore.c and let me know it solves this issue:
Mindaugus, please check if this can be implemented like this or 
some else construct is needed.

HB_FUNC( OLECREATEOBJECT ) /* ( cOleName | cCLSID  [, cIID ] ) */
{
   wchar_t*    cCLSID;
   GUID        ClassID, iid;
   BOOL        fIID = FALSE;
   IDispatch*  pDisp = NULL;
   IDispatch** ppDisp;
   const char* cOleName = hb_parc( 1 );
   const char* cID = hb_parc( 2 );
   HRESULT     lOleError;

   if( HB_IS_NUMBER( 1 ) )
   {
      IDispatch * pDisp = ( IDispatch * ) ( HB_PTRDIFF ) hb_parnint( 1 );
      lOleError = pDisp->lpVtbl->AddRef( pDisp );

      hb_setOleError( lOleError );
      if( lOleError == S_OK )
      {
         hb_retnint( ( HB_PTRDIFF ) hb_param( 1, HB_IT_ANY ) );
      }
      else
         hb_ret();
   }
   else if( cOleName )

....................

I cannot test it because I cannot even compile with new SVN.


Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Errors-with-11032-tp23521549p23535023.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Thu May 14 02:48:36 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May 14 03:38:49 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11039] trunk/harbour
In-Reply-To: <20090514061308.GA10754@uran.home.aster.pl>
References: <E1M4NYb-0003u9-Qk@d5vjzd1.ch3.sourceforge.com>
	<raqm059d2t0teesknpvp3sf4apaftjllcb@4ax.com>
	<20090514061308.GA10754@uran.home.aster.pl>
Message-ID: <20090514064836.GA4700@uran.home.aster.pl>

On Thu, 14 May 2009, Przemyslaw Czerpak wrote:

Hi

> > >      Fernando reported that 9.10 is fixed.
> > I'm not confirm this information. 9.10 still bugged without your fix.
> So it means that it has to be reported to Extended System and the workaround
> activated also for other version.

I've just made test in Linux using aceapi-9.10.0.0.tar.gz and it gives
wrong results so also needs above workaround.
So I'll re-enable the hack I added. I do not know if newer ACE client
exists. Please inform Extended System that AdsGetField(..., ADS_NONE)
for character fields longer then 23 bytes read from DBF tables increase
pulLen by one adding one garbage character to the end of string.

BTW I also found that aceapi-9.00.0.7.tar.gz is wrongly autodetected as
9.10 not 9.00. Viktor Can you look at it?

best regards,
Przemek
From druzus at users.sourceforge.net  Thu May 14 02:48:19 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Thu May 14 03:48:07 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11044] trunk/harbour
Message-ID: <E1M4Ujr-0000jj-TB@74yxhf1.ch3.sourceforge.com>

Revision: 11044
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11044&view=rev
Author:   druzus
Date:     2009-05-14 06:48:19 +0000 (Thu, 14 May 2009)

Log Message:
-----------
2009-05-14 08:56 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/rddads/ads1.c
    * re-enabled workaround code for wrong character field size returned by
      AdsGetFiled() for all ACE versions until we will not have good
      confirmation from Extended System that problem is fixed in some
      newer client versions.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/rddads/ads1.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From mbelgrano at deltain.it  Thu May 14 02:59:13 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu May 14 03:50:32 2009
Subject: [Harbour] Mini-tutorial MySQL connection
In-Reply-To: <COL103-DS751F1E1A097CECE2A2D52DC5E0@phx.gbl>
References: <20090513151519.68E98680846A@eva104.dadanet.it> 
	<COL103-DS751F1E1A097CECE2A2D52DC5E0@phx.gbl>
Message-ID: <609353e70905132359s68bd822x5dd8f612f867dbf9@mail.gmail.com>

ADO like ODBC need a driver in each client


2009/5/14 S?rgio Kondo <cigcor@hotmail.com>:
> Hi,
> ADORDD need MyODBC in all Client?
> Thanks
> S?rgio
>
>
> From: calimero22@freemail.it
> Sent: Wednesday, May 13, 2009 12:15 PM
> To: harbour@harbour-project.org ; harbour@harbour-project.org
> Subject: [Harbour] Mini-tutorial MySQL connection
>
> MINI-TUTORIAL TO CONNECT HARBOUR PROGRAM WITH MYSQL DB
>
> Here's my little and nice tutorial about connection
> between a local Harbour program AND a remote MySQL Database.
>
> by GIOVANNI DI MARIA
>
> Follow the following steps:
> ====================================
>
> 1) You need a mysql server (local or remote).
> ?? I use the remote service www.db4free.net.
>
> 2) Create the database on the server.
>
> 3) Create the table on this database.
>
> 4) Create some column on this table.
>
> 5) Download and install the connector
> "mysql-connector-odbc-3.51.27-win32.msi".
> Don't create ANY DSN!
>
> 6) Write and compile the following harbour program:
>
> #include "adordd.ch"
> REQUEST ADORDD
> function Main()
> ?? clear screen
> ?? setmode(25,80)
> ?? USE DatabaseName VIA "ADORDD" TABLE "TableName" MYSQL FROM "db4free.net"
> USER "username" PASSWORD "password"
> ?? dbedit()
> ?? USE
> ?? clear screen
> return nil
>
> 7) Compile it with hbmk2 program.prg rddado.lib hbbin.lib
>
> 8) Run it and ENJOY!!
>
> ====================================
>
>
>
>
> --- Dada Music Movement, tutta la musica che vuoi! ---
>
> ________________________________
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>



-- 
Massimo Belgrano
From druzus at acn.waw.pl  Thu May 14 03:15:30 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May 14 03:57:27 2009
Subject: (fwd) Re: [Harbour] hbzlib and NO_GZCOMPRESS
Message-ID: <20090514071530.GA32137@uran.home.aster.pl>

----- Forwarded message from Przemyslaw Czerpak <druzus@acn.waw.pl> -----

From: Przemyslaw Czerpak <druzus@acn.waw.pl>
Subject: Re: [Harbour] hbzlib and NO_GZCOMPRESS
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Date: Tue, 12 May 2009 15:43:05 +0200
Lines: 26

On Tue, 12 May 2009, Petr Chornyj wrote:

Hi,

> It is possible to change our rtl/hbzlib.c to respect a NO_GZCOMPRESS
> definition (see gzio.c)?

Can you explain what you want to do and what does it mean for you
"respect a NO_GZCOMPRESS definition"?
If you use zlib compiled with this macro then it does not contain
any functions used for compression like gzwrite() or gzflush() so
you cannot even link final binaries if code use such functions.
Do you want to remove HB_GZWRITE()/HB_GZFLUSH()/... from rtl/hbzlib.c
when this macro is set?
Why do you want to make it?

> And second question: can we add a wrapper for gputc also?

I guess you ask about gzputc(). Yes we can, I'll add it.
Meanwhile you can use:

   FUNCTION HB_GZPUTC( gz, nChar )
   RETURN IIF( HB_GZWRITE( gz, Chr( nChar ) ) <= 0, -1, nChar )

best regards,
Przemek

----- End forwarded message -----
From harbour.01 at syenar.hu  Thu May 14 03:21:06 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 14 04:09:47 2009
Subject: [Harbour] Error(2) BASE/1301 Object destructor failure: Reference
	to freed block
In-Reply-To: <20090513214911.GA29975@uran.home.aster.pl>
References: <18d502870905111015u17d365eel4aba394dd55ada86@mail.gmail.com>
	<20090511185224.GA19554@uran.home.aster.pl>
	<18d502870905130811j6a99fed1pd0adc056a3f6fb01@mail.gmail.com>
	<18d502870905131242ifaee4a0ib079129c5629f254@mail.gmail.com>
	<18d502870905131244s3048e68gfd2058841760c111@mail.gmail.com>
	<20090513214911.GA29975@uran.home.aster.pl>
Message-ID: <18d502870905140021r4304cbb4kae21aaccb0c5dd53@mail.gmail.com>

Thanks very much for the quick fix, the problem is now gone.
Brgds,
Viktor

On Wed, May 13, 2009 at 11:49 PM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:

> On Wed, 13 May 2009, Szak?ts Viktor wrote:
>
> Hi,
>
> > An even simpler one:---
> > PROCEDURE Main()
> >    LOCAL oBrowse, tmp
> >    oBrowse := TBrowseNew( 0, 0, MaxRow(), MaxCol() )
> >    oBrowse:addColumn( TBColumnNew( "a", {|| "b" } ) )
> >    tmp := oBrowse:getColumn( 1 )
> >    tmp := oBrowse:colWidth( 1 ) + Len( oBrowse:colSep )
> >    RETURN
> > > I could reduce the bug to this small example, important that
> > > it only happens with -gc3:
>
> It could be even much simpler.
> The bug is inside HVM and it's caused my missing hb_itemClear() call
> in some cases. It can be exploited also with -gc0/2 output but it
> needs different code.
> Many thanks for information and code exampled.
> I've just committed the fix.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090514/9b567c18/attachment.html
From harbour.01 at syenar.hu  Thu May 14 03:26:19 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 14 04:23:54 2009
Subject: (fwd) Re: [Harbour] SF.net SVN: harbour-project:[11023] 
	trunk/harbour
In-Reply-To: <20090514062012.GA21864@uran.home.aster.pl>
References: <20090514062012.GA21864@uran.home.aster.pl>
Message-ID: <18d502870905140026w748c8d61se0f7714e13ddc3c4@mail.gmail.com>

>
> >   * source/rtl/mlcfunc.c
> >     - Deleted HB_EXTENSION branch. Please modify your program to
> >       use Set( _SET_EOL ) instead of passing EOLs explicitly to
> >       memo functions. This works also in xhb.
> >       INCOMPATIBLE when for HB_EXTENSION builds.
>
> In this case you removed important functionality without leaving any
> alternative for users. _SET_EOL is not a solution or replacement at all.
> Now it's not possible to use multiple EOLs in this set of functions what
> is very important in some portable programs which have to accept data
> with different EOLs.
> Can you revert this modification until we will not have any working
> alternative?


I can revert it although IMO we should rather think about a proper
alternative, these options were missing from default builds since
last year and no one reported them missing, which suggest it
isn't that important. I've since removed all HB_EXTENSION from
code, so readding this one looks a bit overkill.

One alternative is to readd all of them with HB_ prefix, but this is
quite ugly. The other ugly solution is to readd it under a different
macro like HB_MEMO_EOL_PARAM_EXTENSION.

What would be a proper solution here, another Set()?

[ I personally wonder on the usefulness of this feature, as IMO
such text handling functions should automatically work on all
available EOLs on all system without any explicit help from the
user. ]

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090514/40745677/attachment.html
From harbour.01 at syenar.hu  Thu May 14 03:27:50 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 14 04:24:19 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <23535023.post@talk.nabble.com>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
Message-ID: <18d502870905140027r69aa2c56u6c02b7fd3903bf5b@mail.gmail.com>

>
> Apply this patch in olecore.c and let me know it solves this issue:
> Mindaugus, please check if this can be implemented like this or
> some else construct is needed.
>
> HB_FUNC( OLECREATEOBJECT ) /* ( cOleName | cCLSID  [, cIID ] ) */
> {
>   wchar_t*    cCLSID;
>   GUID        ClassID, iid;
>   BOOL        fIID = FALSE;
>   IDispatch*  pDisp = NULL;
>   IDispatch** ppDisp;
>   const char* cOleName = hb_parc( 1 );
>   const char* cID = hb_parc( 2 );
>   HRESULT     lOleError;
>
>   if( HB_IS_NUMBER( 1 ) )
>   {
>      IDispatch * pDisp = ( IDispatch * ) ( HB_PTRDIFF ) hb_parnint( 1 );
>      lOleError = pDisp->lpVtbl->AddRef( pDisp );
>
>      hb_setOleError( lOleError );
>      if( lOleError == S_OK )
>      {
>         hb_retnint( ( HB_PTRDIFF ) hb_param( 1, HB_IT_ANY ) );
>      }
>      else
>         hb_ret();
>   }
>   else if( cOleName )
>
> ....................
>
> I cannot test it because I cannot even compile with new SVN.


Please report such error, so we can fix it.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090514/76909b49/attachment.html
From fmancera at viaopen.com  Thu May 14 03:32:21 2009
From: fmancera at viaopen.com (fmancera@viaopen.com)
Date: Thu May 14 04:28:17 2009
Subject: [Harbour] Bug in ADS
In-Reply-To: <20090513231643.GA9994@uran.home.aster.pl>
References: <1242242430411-2886000.post@n2.nabble.com>
	<29c193f769dd6de36df14cec9dbf5d22@viaopen.com>
	<20090513231643.GA9994@uran.home.aster.pl>
Message-ID: <49266.88.18.189.189.1242286341.squirrel@www.viaopen.com>

Hello Przemek,

>> I had that problem. I solved using the latest ADS 9.10 SDK.
>
> Thanks for the information. So it's already fixed.
> Can someone who has older ACE libraries check if the problem is local to
> version 9.00 and does not exist in 8.10 and/or in older versions?

I was using before ACESDK 8.x and had no problems. Was changed to 9.0 and
have problems.

> I've just added workaround for this problem to our ADS RDD code but
> if possible I would like to reduce it by #if to exact version of
> libraries which need it.
> In next commit I'll cover the workaround code by
>    #if ADS_LIB_VERSION == 900
> so other ACE version can be easy tested and added to above #if condition
> if necessary.

I think that only happens with version 9.0
Let's look at other comments :-)

Best Regards,

Fernando Mancera
www.viaopen.com


From harbour.01 at syenar.hu  Thu May 14 03:49:08 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 14 04:53:59 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11039] trunk/harbour
In-Reply-To: <20090514064836.GA4700@uran.home.aster.pl>
References: <E1M4NYb-0003u9-Qk@d5vjzd1.ch3.sourceforge.com>
	<raqm059d2t0teesknpvp3sf4apaftjllcb@4ax.com>
	<20090514061308.GA10754@uran.home.aster.pl>
	<20090514064836.GA4700@uran.home.aster.pl>
Message-ID: <18d502870905140049q6a2a0841s386285462488a61e@mail.gmail.com>

Hi,


> I've just made test in Linux using aceapi-9.10.0.0.tar.gz and it gives
> wrong results so also needs above workaround.
> So I'll re-enable the hack I added. I do not know if newer ACE client
> exists. Please inform Extended System that AdsGetField(..., ADS_NONE)
> for character fields longer then 23 bytes read from DBF tables increase
> pulLen by one adding one garbage character to the end of string.
>
> BTW I also found that aceapi-9.00.0.7.tar.gz is wrongly autodetected as
> 9.10 not 9.00. Viktor Can you look at it?


Of course, could you post me ace.h included in aceapi-9.00.0.7.tar.gz?

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090514/bea93431/attachment.html
From druzus at acn.waw.pl  Thu May 14 04:07:43 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May 14 05:14:47 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <23535023.post@talk.nabble.com>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
Message-ID: <20090514080743.GA21979@uran.home.aster.pl>

On Wed, 13 May 2009, Pritpal Bedi wrote:

Hi,

> > METHOD New( oWnd, cProgID, nRow, nCol, nWidth, nHeight ) CLASS TActiveX
> >       ::oOleAuto = TOleauto():New( ActXPdisp( ::hActiveX ) )
> Apply this patch in olecore.c and let me know it solves this issue:
> Mindaugus, please check if this can be implemented like this or 
> some else construct is needed.
> HB_FUNC( OLECREATEOBJECT ) /* ( cOleName | cCLSID  [, cIID ] ) */
> {
>    wchar_t*    cCLSID;
>    GUID        ClassID, iid;
>    BOOL        fIID = FALSE;
>    IDispatch*  pDisp = NULL;
>    IDispatch** ppDisp;
>    const char* cOleName = hb_parc( 1 );
>    const char* cID = hb_parc( 2 );
>    HRESULT     lOleError;
> 
>    if( HB_IS_NUMBER( 1 ) )
>    {
>       IDispatch * pDisp = ( IDispatch * ) ( HB_PTRDIFF ) hb_parnint( 1 );
>       lOleError = pDisp->lpVtbl->AddRef( pDisp );

Now OLECREATEOBJECT( 1 ) cause GPF. Any code which makes casting from
numbers to pointers is potential source of GPF or memory corruption.
The second one is even worse because it may damage some other clean
subsystems, f.e. when user by mistake reuse old pointer stored as numeric
item and this memory was reused by some other code.
I hope that we clean our whole code and eliminate any peaces of such
conversion so we will not have even single ( HB_PTRDIFF ) hb_parnint( 1 )
or hb_retnint( ( HB_PTRDIFF ) ... ) instruction.

>       hb_setOleError( lOleError );
>       if( lOleError == S_OK )
>       {
>          hb_retnint( ( HB_PTRDIFF ) hb_param( 1, HB_IT_ANY ) );

Yet another example of bugs which can be introduce by such conversion.
You are returning pointer to some Harbour item converted to number.
I guess that it's a typo but if someone tries to reuse such pointer
as a number then he corrupts HVM internal structures. The bad thing is
that such code may not GPF so the exact buggy place will be very hard
to locate. If application uses a lot of such pointers as numbers and
some problems appear then it can be extremely hard to locate them
and fix. If the application is huge probably the easiest way will be
rewriting it from scratch.
I guess that you want to make sth like:
      hb_retnint( ( HB_PTRDIFF ) pDisp );
but it will not work with rest of OLE code which expect pointer item.
In summary I guess that you wanted to make sth like:

       if( lOleError == S_OK )
          lOleError = CoCreateInstance( HB_ID_REF( ClassID ), NULL, CLSCTX_SERVER, fIID ? HB_ID_REF( iid ) : HB_ID_REF( IID_IDispatch ), ( void** ) ( void * ) &pDisp );
    }
+   else if( ISNUM( 1 ) )
+   {
+      pDisp = ( IDispatch * ) ( HB_PTRDIFF ) hb_parnint( 1 );
+#if HB_OLE_C_API
+      lOleError = ( HRESULT ) pDisp->lpVtbl->AddRef( pDisp );
+#else
+      lOleError = ( HRESULT ) pDisp->AddRef();
+#endif
+   }
    else
       lOleError = CO_E_CLASSSTRING;
   hb_setOleError( lOleError );

but there is a question if we want to still tolerate code with
C pointer <-> HVM number item conversions and keep workarounds
for it. I'm leaving the decision to Mindaugas. 

> I cannot test it because I cannot even compile with new SVN.

What's the exact problem?

best regards,
Przemek
From niki at synel.co.il  Thu May 14 04:09:09 2009
From: niki at synel.co.il (Chen Kedem)
Date: Thu May 14 05:28:49 2009
Subject: [Harbour] hbzlib and NO_GZCOMPRESS
Message-ID: <1A07FEDC778C3E4AA417F089511F859C14A8F872E6@Mail-yoq.SYNEL-COMPANY.LTD>

Przemek,

> Can you explain what you want to do and what does it mean for you
> "respect a NO_GZCOMPRESS definition"?
> If you use zlib compiled with this macro then it does not contain
> any functions used for compression like gzwrite() or gzflush() so
> you cannot even link final binaries if code use such functions.
> Do you want to remove HB_GZWRITE()/HB_GZFLUSH()/... from rtl/hbzlib.c
> when this macro is set?
> Why do you want to make it?

Hmm, I don't know if this GZ had something to do with the LZ algorithm,
But there was used to be an issue with the Uniss patent on LZ algorithm.
(the patent expired a few years ago and is not a problem any more).

  Chen.
From druzus at acn.waw.pl  Thu May 14 05:04:08 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May 14 05:55:09 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11023] trunk/harbour
In-Reply-To: <18d502870905140026w748c8d61se0f7714e13ddc3c4@mail.gmail.com>
References: <20090514062012.GA21864@uran.home.aster.pl>
	<18d502870905140026w748c8d61se0f7714e13ddc3c4@mail.gmail.com>
Message-ID: <20090514090408.GA14366@uran.home.aster.pl>

On Thu, 14 May 2009, Szak?ts Viktor wrote:

Hi,

> > In this case you removed important functionality without leaving any
> > alternative for users. _SET_EOL is not a solution or replacement at all.
> > Now it's not possible to use multiple EOLs in this set of functions what
> > is very important in some portable programs which have to accept data
> > with different EOLs.
> > Can you revert this modification until we will not have any working
> > alternative?
> I can revert it although IMO we should rather think about a proper
> alternative, these options were missing from default builds since
> last year and no one reported them missing, which suggest it
> isn't that important. I've since removed all HB_EXTENSION from
> code, so readding this one looks a bit overkill.

I stoped to use default builds when you disable some extensions so
I cannot say much about it.

> One alternative is to readd all of them with HB_ prefix, but this is
> quite ugly. The other ugly solution is to readd it under a different
> macro like HB_MEMO_EOL_PARAM_EXTENSION.
> What would be a proper solution here, another Set()?

I do not like to use SETs because for structural code I have to
set and restore them what in some cases has serious performance
overhead. In some other it can be even killer.
F.e. we have SET callback functions registered by ADS. It means
that such simple Clipper code:

   func ansidate( dDate )
      local cFormat := set_( _SET_DATEFORMAT, "YYYY-MM-DD" ), cDate
      cDate := dtoc( dDate )
      set_( _SET_DATEFORMAT, cFormat )
      return cDate

Ported to Harbour activates callbacks and ACE function calls if user
linked any of ADS based RDD.
If you use ansidate() function to format some chosen columns in very
long reports then you can imagine the cost.
BTW This part is also not MT safe. I do not believe that ACE
client keeps such sets in some thread local storage.

> [ I personally wonder on the usefulness of this feature, as IMO
> such text handling functions should automatically work on all
> available EOLs on all system without any explicit help from the
> user. ]

I do not find it as good idea. Such extension will always break sth.
F.e. code which tries to make visualization of some printer output and
strongly depends on some strict CR and LF behavior which have to be
compatible with external device he uses.

best regards,
Przemek
From druzus at acn.waw.pl  Thu May 14 05:12:01 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May 14 05:58:25 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11039] trunk/harbour
In-Reply-To: <18d502870905140049q6a2a0841s386285462488a61e@mail.gmail.com>
References: <E1M4NYb-0003u9-Qk@d5vjzd1.ch3.sourceforge.com>
	<raqm059d2t0teesknpvp3sf4apaftjllcb@4ax.com>
	<20090514061308.GA10754@uran.home.aster.pl>
	<20090514064836.GA4700@uran.home.aster.pl>
	<18d502870905140049q6a2a0841s386285462488a61e@mail.gmail.com>
Message-ID: <20090514091201.GA28767@uran.home.aster.pl>

On Thu, 14 May 2009, Szak?ts Viktor wrote:

Hi,

> > BTW I also found that aceapi-9.00.0.7.tar.gz is wrongly autodetected as
> > 9.10 not 9.00. Viktor Can you look at it?
> Of course, could you post me ace.h included in aceapi-9.00.0.7.tar.gz?

In attachment you a have diff for version 9.00.0.7 and 9.10.0.0.

best regards,
Przemek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ace.h.diff
Type: text/x-patch
Size: 3176 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090514/de0830a2/ace.h.bin
From vszakats at users.sourceforge.net  Thu May 14 05:04:51 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu May 14 05:59:01 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11045] trunk/harbour
Message-ID: <E1M4Wrz-0001kr-Fh@d5vjzd1.ch3.sourceforge.com>

Revision: 11045
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11045&view=rev
Author:   vszakats
Date:     2009-05-14 09:04:50 +0000 (Thu, 14 May 2009)

Log Message:
-----------
2009-05-14 10:55 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed regression causing -o not to work in -hbcmp mode.
      (bug introd in the compile/link phase switch)
    + Added support for -o in -hbcmp mode for pocc compilers.
    + Added support for -o in -hbcmp mode for owatcom compilers.
    ; Please test.

  * contrib/rddads/rddads.h
    - Deleted some commented lines targeting compatibility with
      some now forgotten macros.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/rddads/rddads.h
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Thu May 14 05:19:29 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu May 14 06:08:31 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11046] trunk/harbour
Message-ID: <E1M4X69-00021W-9w@d5vjzd1.ch3.sourceforge.com>

Revision: 11046
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11046&view=rev
Author:   vszakats
Date:     2009-05-14 09:19:28 +0000 (Thu, 14 May 2009)

Log Message:
-----------
2009-05-14 11:18 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/rddads/rddads.h
    ! Fixed version autodetection for ACE clients 9.00.0.7.
      Now 900 is detected, previously it was 910 (Sybase
      retrofitted some macros from 9.10 into this minor update.)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/rddads/rddads.h


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Thu May 14 05:48:45 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May 14 06:32:15 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11039] trunk/harbour
In-Reply-To: <18d502870905140219t6791e557gfe1fd227fab4ecbe@mail.gmail.com>
References: <E1M4NYb-0003u9-Qk@d5vjzd1.ch3.sourceforge.com>
	<raqm059d2t0teesknpvp3sf4apaftjllcb@4ax.com>
	<20090514061308.GA10754@uran.home.aster.pl>
	<20090514064836.GA4700@uran.home.aster.pl>
	<18d502870905140049q6a2a0841s386285462488a61e@mail.gmail.com>
	<20090514091201.GA28767@uran.home.aster.pl>
	<18d502870905140219t6791e557gfe1fd227fab4ecbe@mail.gmail.com>
Message-ID: <20090514094845.GA809@uran.home.aster.pl>

On Thu, 14 May 2009, Szak?ts Viktor wrote:
> Thanks, please test it now.

Thanks, looks OK.

I made some test with recent hbmk2 and it stop to automatically
add [n]curses, slang and x11 libraries in link phase.

Can I set some default libraries which should be used with all
projects in hbmk.cfg?

best regards,
Przemek
From niki at synel.co.il  Thu May 14 04:41:08 2009
From: niki at synel.co.il (Chen Kedem)
Date: Thu May 14 06:40:00 2009
Subject: [Harbour] hbzlib and NO_GZCOMPRESS
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C14A8F872E6@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C14A8F872E6@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <1A07FEDC778C3E4AA417F089511F859C14A8F872E7@Mail-yoq.SYNEL-COMPANY.LTD>

On 14 May 2009 11:09, I wrote:
> Hmm, I don't know if this GZ had something to do with the LZ algorithm...

Total nonsense, I should had looked at the code.
Its a flag to avoid linking parts which are not used, to create a smaller code.

  Chen.
From harbour.01 at syenar.hu  Thu May 14 06:08:14 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu May 14 07:17:03 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11023] trunk/harbour
In-Reply-To: <20090514090408.GA14366@uran.home.aster.pl>
References: <20090514062012.GA21864@uran.home.aster.pl>
	<18d502870905140026w748c8d61se0f7714e13ddc3c4@mail.gmail.com>
	<20090514090408.GA14366@uran.home.aster.pl>
Message-ID: <E3C4EAFF-D654-4B43-B3B6-B77EE342C05A@syenar.hu>

Hi Przemek,

>> I can revert it although IMO we should rather think about a proper
>> alternative, these options were missing from default builds since
>> last year and no one reported them missing, which suggest it
>> isn't that important. I've since removed all HB_EXTENSION from
>> code, so readding this one looks a bit overkill.
>
> I stoped to use default builds when you disable some extensions so
> I cannot say much about it.

Which extensions do you miss? or what extra settings do you use?

>> One alternative is to readd all of them with HB_ prefix, but this is
>> quite ugly. The other ugly solution is to readd it under a different
>> macro like HB_MEMO_EOL_PARAM_EXTENSION.
>> What would be a proper solution here, another Set()?
>
> I do not like to use SETs because for structural code I have to
> set and restore them what in some cases has serious performance
> overhead. In some other it can be even killer.
> F.e. we have SET callback functions registered by ADS. It means
> that such simple Clipper code:
>
>   func ansidate( dDate )
>      local cFormat := set_( _SET_DATEFORMAT, "YYYY-MM-DD" ), cDate
>      cDate := dtoc( dDate )
>      set_( _SET_DATEFORMAT, cFormat )
>      return cDate
>
> Ported to Harbour activates callbacks and ACE function calls if user
> linked any of ADS based RDD.
> If you use ansidate() function to format some chosen columns in very
> long reports then you can imagine the cost.
> BTW This part is also not MT safe. I do not believe that ACE
> client keeps such sets in some thread local storage.

Most probably non-MT safe. In this case I can't really decide as
I'm not and RDDADS user and I have no idea why these callbacks
were added back then. If it's unsafe or kills performance we
should IMO disable it or find better solution. Fortunately with
HB_DTOC() this specific problem can be solved.

>> [ I personally wonder on the usefulness of this feature, as IMO
>> such text handling functions should automatically work on all
>> available EOLs on all system without any explicit help from the
>> user. ]
>
> I do not find it as good idea. Such extension will always break sth.
> F.e. code which tries to make visualization of some printer output and
> strongly depends on some strict CR and LF behavior which have to be
> compatible with external device he uses.

Can be, yes, however I still can't see a good solution without
adding a new "memo" API with such feature. If we readd it like it
was (but as default), we also readd a hidden parameter extension,
which may collide with other implementations and create usual
back-port problems.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Thu May 14 06:18:55 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu May 14 07:28:59 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11047] trunk/harbour
Message-ID: <E1M4Y1f-0005T4-VR@bj8yhf1.ch3.sourceforge.com>

Revision: 11047
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11047&view=rev
Author:   vszakats
Date:     2009-05-14 10:18:55 +0000 (Thu, 14 May 2009)

Log Message:
-----------
2009-05-14 12:18 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbwin/tests/testdll.prg
  * contrib/hbwin/win_dll.c
    + DLLPREPARECALL() will now accept pointer type as dll handle.
    + DLLLOAD() will now return pointer type, instead of numeric pointer.
      May be incompatible if the value is used outside the scope of hbwin lib.
    + DLLUNLOAD() will now accept pointer type for dll handle.
    + DLLUNLOAD() will now gracefully fail if non pointer or numeric param 
      is passed.
    + DLLCALL() will now accept pointer type for dll handle.
    + GETPROCADDRESS() will now accept pointer type for dll handle.
    ; TODO: Remove compatibility with numeric pointers.

  * contrib/hbwin/win_misc.c
    * WIN_SHELLEXECUTE() no longer accepts numeric pointers 
      as optional first parameter. Use pointers instead.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/tests/testdll.prg
    trunk/harbour/contrib/hbwin/win_dll.c
    trunk/harbour/contrib/hbwin/win_misc.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Thu May 14 06:18:56 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 14 07:29:04 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <20090514080743.GA21979@uran.home.aster.pl>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
	<20090514080743.GA21979@uran.home.aster.pl>
Message-ID: <18d502870905140318w307e512bi84cdc91b9ad7c253@mail.gmail.com>

>
>       if( lOleError == S_OK )
>          lOleError = CoCreateInstance( HB_ID_REF( ClassID ), NULL,
> CLSCTX_SERVER, fIID ? HB_ID_REF( iid ) : HB_ID_REF( IID_IDispatch ), (
> void** ) ( void * ) &pDisp );
>    }
> +   else if( ISNUM( 1 ) )
> +   {
> +      pDisp = ( IDispatch * ) ( HB_PTRDIFF ) hb_parnint( 1 );
> +#if HB_OLE_C_API
> +      lOleError = ( HRESULT ) pDisp->lpVtbl->AddRef( pDisp );
> +#else
> +      lOleError = ( HRESULT ) pDisp->AddRef();
> +#endif
> +   }
>    else
>       lOleError = CO_E_CLASSSTRING;
>   hb_setOleError( lOleError );
>
> but there is a question if we want to still tolerate code with
> C pointer <-> HVM number item conversions and keep workarounds
> for it. I'm leaving the decision to Mindaugas.


IMO for compatibility we should try to leave it for now and remove
it later when 3rd parties have adapted.

I've checked whole codebase and found a few occurrences of these
constructs in hbwin (misc/dll/prn) and a lot in GTWVG and WAPI
headers.

I'd be glad to delete them from hbwin. If there are no objections,
I'll do it, so that we can see what effect will it have on users.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090514/ccac56be/attachment.html
From toninhofwi at yahoo.com.br  Thu May 14 06:35:32 2009
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Thu May 14 07:43:12 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11039] trunk/harbour
In-Reply-To: <20090514064836.GA4700@uran.home.aster.pl>
References: <E1M4NYb-0003u9-Qk@d5vjzd1.ch3.sourceforge.com>
	<raqm059d2t0teesknpvp3sf4apaftjllcb@4ax.com>
	<20090514061308.GA10754@uran.home.aster.pl>
	<20090514064836.GA4700@uran.home.aster.pl>
Message-ID: <3tsn05hg7vk8h8bucfjq7vv87mrdu6fseo@4ax.com>

Przemek, thanks!

>Please inform Extended System that AdsGetField(..., ADS_NONE)
>for character fields longer then 23 bytes read from DBF tables increase
>pulLen by one adding one garbage character to the end of string.

Done.

I?ll post any news here.


Best regards,

Toninho.

__________________________________________________
Fa?a liga??es para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From dbtopas at dbtopas.lt  Thu May 14 06:33:13 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu May 14 07:43:19 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <23535023.post@talk.nabble.com>
References: <23521549.post@talk.nabble.com>	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>	<23527339.post@talk.nabble.com>
	<23535023.post@talk.nabble.com>
Message-ID: <4A0BF369.8050804@dbtopas.lt>

Hello, Pritpul,


> Apply this patch in olecore.c and let me know it solves this issue:
> Mindaugus, please check if this can be implemented like this or 
> some else construct is needed.
> 
> HB_FUNC( OLECREATEOBJECT ) /* ( cOleName | cCLSID  [, cIID ] ) */
> {
> ...
>    if( HB_IS_NUMBER( 1 ) )
>    {

We will to change at least numeric type to pointer type...


Regards,
Mindaugas
From myorg63 at mail.ru  Thu May 14 06:32:14 2009
From: myorg63 at mail.ru (Petr Chornyj)
Date: Thu May 14 07:43:33 2009
Subject: [Harbour] (fwd) Re: hbzlib and NO_GZCOMPRESS
In-Reply-To: <20090514071530.GA32137@uran.home.aster.pl>
References: <20090514071530.GA32137@uran.home.aster.pl>
Message-ID: <23537993.post@talk.nabble.com>



Przemyslaw Czerpak-2 wrote:
> 
> 
> If you use zlib compiled with this macro then it does not contain
> any functions used for compression like gzwrite() or gzflush() so
> you cannot even link final binaries if code use such functions.
> Do you want to remove HB_GZWRITE()/HB_GZFLUSH()/... from rtl/hbzlib.c
> when this macro is set?
> Why do you want to make it?
> 

Yes, in few cases I want to remove HB_GZWRITE()/HB_GZFLUSH(), as, as I do
guess  majority  from the users of Windows never use by the functions of
HB_GZ* family and it can reduce the size of final binary file (little
piece). I understand usually, that this is not important vitally  or even it
can be badly in future. 

> I guess you ask about gzputc()

Yes, sorry it's typo. Thank you

Regards,
Petr

-- 
View this message in context: http://www.nabble.com/%28fwd%29-Re%3A-hbzlib-and-NO_GZCOMPRESS-tp23536013p23537993.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From toninhofwi at yahoo.com.br  Thu May 14 06:58:25 2009
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Thu May 14 07:57:08 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11039] trunk/harbour
In-Reply-To: <20090514064836.GA4700@uran.home.aster.pl>
References: <E1M4NYb-0003u9-Qk@d5vjzd1.ch3.sourceforge.com>
	<raqm059d2t0teesknpvp3sf4apaftjllcb@4ax.com>
	<20090514061308.GA10754@uran.home.aster.pl>
	<20090514064836.GA4700@uran.home.aster.pl>
Message-ID: <daun05568se52q4uh30kcr8p66qdjlk66o@4ax.com>

Przemek, thanks!

>Please inform Extended System that AdsGetField(..., ADS_NONE)
>for character fields longer then 23 bytes read from DBF tables increase
>pulLen by one adding one garbage character to the end of string.

Done.

I?ll post any news here.


Best regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From druzus at acn.waw.pl  Thu May 14 07:25:11 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May 14 08:12:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11039] trunk/harbour
In-Reply-To: <18d502870905140322r32e7d32w1b0e1ab332324ac9@mail.gmail.com>
References: <E1M4NYb-0003u9-Qk@d5vjzd1.ch3.sourceforge.com>
	<raqm059d2t0teesknpvp3sf4apaftjllcb@4ax.com>
	<20090514061308.GA10754@uran.home.aster.pl>
	<20090514064836.GA4700@uran.home.aster.pl>
	<18d502870905140049q6a2a0841s386285462488a61e@mail.gmail.com>
	<20090514091201.GA28767@uran.home.aster.pl>
	<18d502870905140219t6791e557gfe1fd227fab4ecbe@mail.gmail.com>
	<20090514094845.GA809@uran.home.aster.pl>
	<18d502870905140322r32e7d32w1b0e1ab332324ac9@mail.gmail.com>
Message-ID: <20090514112511.GA21217@uran.home.aster.pl>

On Thu, 14 May 2009, Szak?ts Viktor wrote:
> > I made some test with recent hbmk2 and it stop to automatically
> > add [n]curses, slang and x11 libraries in link phase.
> I'll try to make some tests, but it'd help if you'd post your hbmk.cfg
> cmdline and -trace output.

I've found the reason.
Because I cannot use hbmk2 installed in nonsystem directories to create
portable shared libraries I created softlink from /usr/bin to <mydir>hbmk2
but in such case it cannot find hbmk.cfg.

How can I create distributable shared binaries using harbour.so which
will not have hard coded <local_harbour_libpath> inside?
I usually have more then one Harbour and [x]Harbour installation in my
devel computers so I cannot use system libraries.
Sometimes I also have to create binaries remotely on some more exotic
OS-es and hardware and I do not have write permission to system directories
so I have to make everything locally.
If you plan to use hbmk2 in the Harbour build process in the future
then such functionality is a must to create shared linked binaries,
f.e. when you create RPMs then the destination directories used in
build process are not the real system directories.

> > Can I set some default libraries which should be used with all
> > projects in hbmk.cfg?
> Yes, add line(s):
> libs=<lib1> [<lib2>] [<libn>]

Thank you very much it works nice.

best regards,
Przemek
From dbtopas at dbtopas.lt  Thu May 14 07:42:42 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu May 14 08:22:57 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <20090514080743.GA21979@uran.home.aster.pl>
References: <23521549.post@talk.nabble.com>	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>	<23527339.post@talk.nabble.com>
	<23535023.post@talk.nabble.com>
	<20090514080743.GA21979@uran.home.aster.pl>
Message-ID: <4A0C03B2.9020809@dbtopas.lt>

Hi,


>> Apply this patch in olecore.c and let me know it solves this issue:

> but there is a question if we want to still tolerate code with
> C pointer <-> HVM number item conversions and keep workarounds
> for it. I'm leaving the decision to Mindaugas. 

Usage of numbers instead of pointers is one of the things I want to 
eliminate.

I understand this numeric pointers approach (and used myself in the 
past), but this make Harbour programmer a little C or ASM programmer. 
All mistakes becomes GPF or some mystic errors (later you found, it was 
  just a memory corruption).

Numeric to pointer conversion does not fit current OLE implementation 
after collectible pointers was implemented. Just numbers does not have 
counter. Some things start to be different, for example, we do not need 
to do AddRef() in Harbour code on cloning object, because our 
collectible pointer does the job. So, some existing hacky numeric 
pointer code does not fit.


I have an idea to make some compatibility layer. Some kind of:
CLASS TOleAuto FROM HB_OleAuto, implement compatibility :New() 
constructor for it, add :hObj for compatibility. But do not know all 
FWH, etc code and how hacky it is.


Regards,
Mindaugas


P.S. some messages does not reach newsgroup. I replay to individual 
persons too.


From qiinfo at ig.com.br  Thu May 14 08:01:04 2009
From: qiinfo at ig.com.br (Rossine)
Date: Thu May 14 09:03:50 2009
Subject: [Harbour] Problem with return of LoadLibrary and Harbour 11047
Message-ID: <23539143.post@talk.nabble.com>


Hello,

In class TIMAGE de FWH, when using:

[CODE]
hLib = LoadLibrary( "freeimage.dll" )
msgstop( hLib ) 
[ENDCODE]

...with harbour 11021, i see:

[RESULT]

Type = N   Value = 61997056

[ENDRESULT]

...and harbour 11047:

[RESULT]

Type = P   value = 0x03D20000

[ENDRESULT]

...and i see this error:

[ERROR]

Error: Erro BASE/1074  Error parameters: <=

[ENDERROR]

This is the code of TIMAGE.PRG:

[CODE]

static function FILOADIMG( cFile )

   local nFormat, hDib, hInfoH, hInfo, hBits, hWnd, hDC, hBmp

   if empty( cFile )
      return 0
   endif

   if Upper( cFileExt( cFile ) ) = "BMP"
      return ReadBitmap( 0, cFile )
   endif

   hLib = LoadLibrary( "" ) && Simple Test :)

msgstop( valtype( hlib ) + "-"+ valtoprg( hlib ) )  Here return with 1021:
N-0   and with 11047: P-0x00000000

   hLib = LoadLibrary() && Simple Test :)
 
msgstop( valtype( hlib ) + "-"+ valtoprg( hlib ) )  Here return with 1021:
N-0   and with 11047: P-0x00000000

   #ifdef __CLIPPER__
      hLib = LoadLib32( "freeimage.dll" )
   #else
      hLib = LoadLibrary( "freeimage.dll" )
   #endif

msgstop( valtype( hlib ) + "-"+ valtoprg( hlib ) )

   if hLib <= 32  && <<<------ Here error

      MsgStop( "Cannot load FreeImage.dll" )
      return 0
   endif
...

[ENDCODE]

How to fix this ?

Best regards,

Rossine.


-- 
View this message in context: http://www.nabble.com/Problem-with-return-of-LoadLibrary-and-Harbour-11047-tp23539143p23539143.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Thu May 14 08:01:29 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 14 09:03:56 2009
Subject: [Harbour] (fwd) Re: hbzlib and NO_GZCOMPRESS
In-Reply-To: <23537993.post@talk.nabble.com>
References: <20090514071530.GA32137@uran.home.aster.pl>
	<23537993.post@talk.nabble.com>
Message-ID: <18d502870905140501y28e8ea86yc125702313246a4f@mail.gmail.com>

>
> Yes, in few cases I want to remove HB_GZWRITE()/HB_GZFLUSH(), as, as I do
> guess  majority  from the users of Windows never use by the functions of
> HB_GZ* family and it can reduce the size of final binary file (little
> piece). I understand usually, that this is not important vitally  or even
> it
> can be badly in future.


I'll split the source into two, so GZ stuff won't be included if you
use Z functions.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090514/9c5eaa7a/attachment.html
From sscc at mweb.co.za  Thu May 14 08:02:23 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu May 14 09:04:15 2009
Subject: [Harbour] My typo in win_prt.c
Message-ID: <4A0C084F.7020903@mweb.co.za>

Hi Viktor

Some time ago you tidied up my code and added it to the hbwin library. I found a 
typo I made, it is at line 237 :

    NewTimeouts.ReadTotalTimeoutConstant = ( s_ReadIntervalTimeout == -1 ? 0 : 
s_ReadTotalTimeoutConstant );

It should be:

    NewTimeouts.ReadTotalTimeoutConstant = ( s_ReadTotalTimeoutConstant == -1 ? 
0 : s_ReadTotalTimeoutConstant );

Would you mind correcting it?

Thank you
Alex
From harbour.01 at syenar.hu  Thu May 14 08:04:00 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu May 14 09:04:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11039] trunk/harbour
In-Reply-To: <20090514112511.GA21217@uran.home.aster.pl>
References: <E1M4NYb-0003u9-Qk@d5vjzd1.ch3.sourceforge.com>
	<raqm059d2t0teesknpvp3sf4apaftjllcb@4ax.com>
	<20090514061308.GA10754@uran.home.aster.pl>
	<20090514064836.GA4700@uran.home.aster.pl>
	<18d502870905140049q6a2a0841s386285462488a61e@mail.gmail.com>
	<20090514091201.GA28767@uran.home.aster.pl>
	<18d502870905140219t6791e557gfe1fd227fab4ecbe@mail.gmail.com>
	<20090514094845.GA809@uran.home.aster.pl>
	<18d502870905140322r32e7d32w1b0e1ab332324ac9@mail.gmail.com>
	<20090514112511.GA21217@uran.home.aster.pl>
Message-ID: <DDDD08BC-4A48-420E-8920-168B277A79CC@syenar.hu>

> On Thu, 14 May 2009, Szak?ts Viktor wrote:
>>> I made some test with recent hbmk2 and it stop to automatically
>>> add [n]curses, slang and x11 libraries in link phase.
>> I'll try to make some tests, but it'd help if you'd post your  
>> hbmk.cfg
>> cmdline and -trace output.
>
> I've found the reason.
> Because I cannot use hbmk2 installed in nonsystem directories to  
> create
> portable shared libraries I created softlink from /usr/bin to  
> <mydir>hbmk2
> but in such case it cannot find hbmk.cfg.

In this case you can copy hbmk.cfg to one of these location neutral  
dirs:
/etc/harbour or ~/.harbour.

If there is a way to detect that softlink condition we can add support
for it.

> How can I create distributable shared binaries using harbour.so which
> will not have hard coded <local_harbour_libpath> inside?
> I usually have more then one Harbour and [x]Harbour installation in my
> devel computers so I cannot use system libraries.
> Sometimes I also have to create binaries remotely on some more exotic
> OS-es and hardware and I do not have write permission to system  
> directories
> so I have to make everything locally.
> If you plan to use hbmk2 in the Harbour build process in the future
> then such functionality is a must to create shared linked binaries,
> f.e. when you create RPMs then the destination directories used in
> build process are not the real system directories.

Yes, I'll add a new switch to control this behaviour.

I'm thinking about a good name... Any suggestions? It would
control inclusion of dir for both when Harbour is installed in
system location and also when not, only the defaults will be
different in these cases.

-shareable? -shareddist?

Brgds,
Viktor

From vailtom at gmail.com  Thu May 14 08:08:27 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Thu May 14 09:06:59 2009
Subject: [Harbour] Harbour nomination for sf.net best project/best dev 
	tool
In-Reply-To: <68948A51-EE0E-4CBD-903F-025C8F49D751@syenar.hu>
References: <68948A51-EE0E-4CBD-903F-025C8F49D751@syenar.hu>
Message-ID: <531d7a750905140508r2bd7e05ala5699a5957c4dd30@mail.gmail.com>

During the day now available...
From vszakats at users.sourceforge.net  Thu May 14 08:17:48 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu May 14 09:31:06 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11048] trunk/harbour
Message-ID: <E1M4Zsi-0000XE-2z@bj8yhf1.ch3.sourceforge.com>

Revision: 11048
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11048&view=rev
Author:   vszakats
Date:     2009-05-14 12:17:47 +0000 (Thu, 14 May 2009)

Log Message:
-----------
2009-05-14 14:17 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + Added -shareable/-shareable- option to control the aspect 
      of harbour.so absolute dir reference. It can override 
      previous rule controlled by system location detection. See 
      more in help.
    * Minor internal change to one of the functions.

  + source/rtl/hbzlibgz.c
  * source/rtl/hbzlib.c
  * source/rtl/Makefile
    % Split source into two, so unnecessary code parts won't be 
      included in final binaries.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/rtl/Makefile
    trunk/harbour/source/rtl/hbzlib.c
    trunk/harbour/utils/hbmk2/hbmk2.prg

Added Paths:
-----------
    trunk/harbour/source/rtl/hbzlibgz.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Thu May 14 09:13:44 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 14 10:08:21 2009
Subject: [Harbour] Problem with return of LoadLibrary and Harbour 11047
In-Reply-To: <23539143.post@talk.nabble.com>
References: <23539143.post@talk.nabble.com>
Message-ID: <18d502870905140613g2b8b734chff298c55fc0d7810@mail.gmail.com>

On Thu, May 14, 2009 at 2:01 PM, Rossine <qiinfo@ig.com.br> wrote:

>
> Hello,
>
> In class TIMAGE de FWH, when using:
>
>
>   #ifdef __CLIPPER__
>      hLib = LoadLib32( "freeimage.dll" )
>   #else
>      hLib = LoadLibrary( "freeimage.dll" )
>   #endif
>
> msgstop( valtype( hlib ) + "-"+ valtoprg( hlib ) )
>
>   if hLib <= 32  && <<<------ Here error


Probably 'IF Empty( hLib )' should be used
here, and LoadLibrary() modified to return NULL
when pointer is <= 32.

But now I know why we had this code full of
numeric pointers.

We can also leave LoadLibrary() as compatibility
function and switch it back to return numeric. This
wouldn't be a huge step forward though...

Please FWH and Windows users (developers?) comment.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090514/4a1df912/attachment.html
From harbour.01 at syenar.hu  Thu May 14 09:14:37 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 14 10:08:28 2009
Subject: [Harbour] My typo in win_prt.c
In-Reply-To: <4A0C084F.7020903@mweb.co.za>
References: <4A0C084F.7020903@mweb.co.za>
Message-ID: <18d502870905140614k6360c04exf776d61ef4d633b@mail.gmail.com>

Thanks Alex, I'll commit it in next session.
Brgds,
Viktor

On Thu, May 14, 2009 at 2:02 PM, Alex Strickland <sscc@mweb.co.za> wrote:

> Hi Viktor
>
> Some time ago you tidied up my code and added it to the hbwin library. I
> found a typo I made, it is at line 237 :
>
>   NewTimeouts.ReadTotalTimeoutConstant = ( s_ReadIntervalTimeout == -1 ? 0
> : s_ReadTotalTimeoutConstant );
>
> It should be:
>
>   NewTimeouts.ReadTotalTimeoutConstant = ( s_ReadTotalTimeoutConstant == -1
> ? 0 : s_ReadTotalTimeoutConstant );
>
> Would you mind correcting it?
>
> Thank you
> Alex
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090514/052d82f8/attachment.html
From harbour.01 at syenar.hu  Thu May 14 09:17:20 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 14 10:09:18 2009
Subject: [Harbour] Harbour nomination for sf.net best project/best dev 
	tool
In-Reply-To: <531d7a750905140508r2bd7e05ala5699a5957c4dd30@mail.gmail.com>
References: <68948A51-EE0E-4CBD-903F-025C8F49D751@syenar.hu>
	<531d7a750905140508r2bd7e05ala5699a5957c4dd30@mail.gmail.com>
Message-ID: <18d502870905140617p485956b4sb40a61be9421c58c@mail.gmail.com>

Thank you. Please also Chens request about the sf.net logo update, plus IMO
we should also have a link from the sf.net logo (in the
middle left of homepage) to sf.net as per sf.net instructions.
I think right now we're missing page loads from sf.net stats because
of the missing/old link.

Brgds,
Viktor


On Thu, May 14, 2009 at 2:08 PM, Vailton Renato <vailtom@gmail.com> wrote:

> During the day now available...
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090514/4aca1426/attachment.html
From bedipritpal at hotmail.com  Thu May 14 09:37:39 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu May 14 10:20:41 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <20090514080743.GA21979@uran.home.aster.pl>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
	<20090514080743.GA21979@uran.home.aster.pl>
Message-ID: <23540779.post@talk.nabble.com>


Hello Przemek and All,


Przemyslaw Czerpak-2 wrote:
> 
> In summary I guess that you wanted to make sth like:
> 
>        if( lOleError == S_OK )
>           lOleError = CoCreateInstance( HB_ID_REF( ClassID ), NULL,
> CLSCTX_SERVER, fIID ? HB_ID_REF( iid ) : HB_ID_REF( IID_IDispatch ), (
> void** ) ( void * ) &pDisp );
>     }
> +   else if( ISNUM( 1 ) )
> +   {
> +      pDisp = ( IDispatch * ) ( HB_PTRDIFF ) hb_parnint( 1 );
> +#if HB_OLE_C_API
> +      lOleError = ( HRESULT ) pDisp->lpVtbl->AddRef( pDisp );
> +#else
> +      lOleError = ( HRESULT ) pDisp->AddRef();
> +#endif
> +   }
>     else
>        lOleError = CO_E_CLASSSTRING;
>    hb_setOleError( lOleError );
> 
> but there is a question if we want to still tolerate code with
> C pointer <-> HVM number item conversions and keep workarounds
> for it. I'm leaving the decision to Mindaugas. 
> 

Yes, exactly. But I posted a very primitive and dirty way just 
to flareup this issue. IMO very important as per new scenario.



>> I cannot test it because I cannot even compile with new SVN.
> 
> What's the exact problem?
> 

No, you misunderstood me. hbwin.lib ( as of now ) compiles fine
but I cannot use it for missine ole features as my applications are 
heavily dependant on above funtionality as I use a lot of Active-X's
and now it is impossible to test code at all. 

Viktor can you restore previous hbole and hbwin until we find 
the complete compatibility at least on syntax level just to test 
my code with new implementation.

Toe was wrong when he split hbwin but I cannot understand
why did you took the similar approach and broke all the compatibility.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Errors-with-11032-tp23521549p23540779.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vailtom at gmail.com  Thu May 14 08:29:16 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Thu May 14 10:27:44 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <4A0C03B2.9020809@dbtopas.lt>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
	<20090514080743.GA21979@uran.home.aster.pl>
	<4A0C03B2.9020809@dbtopas.lt>
Message-ID: <531d7a750905140529g433a4560qe9660c8d402e0ed7@mail.gmail.com>

Antonio Linares can perhaps give us a opni?o about this ...
From qiinfo at ig.com.br  Thu May 14 08:35:14 2009
From: qiinfo at ig.com.br (Rossine)
Date: Thu May 14 10:37:46 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <23535023.post@talk.nabble.com>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
Message-ID: <23539642.post@talk.nabble.com>


Hello Pritpal,

Including this in my example: (WEBEXP.PRG)

[CODE]

#include "FiveWin.ch"

function Main()

   local oWnd, oActiveX
   local cEvents := ""

   DEFINE WINDOW oWnd TITLE "FiveWin ActiveX Support"

   oActiveX = TActiveX():New( oWnd, "Shell.Explorer" )

   oWnd:oClient = oActiveX // To fill the entire window surface

   // oActiveX:Do( "GoHome" )
   oActiveX:Do( "Navigate", "http://www.google.com.br" )

   oActiveX:SetProp( "StatusBar", .t. )
   
   // MsgInfo( oActiveX:GetProp( "StatusBar" ) )

   oActiveX:bOnEvent = { | event, aParams, pParams | cEvents += EventInfo(
event, aParams, pParams, oActiveX ) }

   ACTIVATE WINDOW oWnd ;
      VALID ( MemoEdit( cEvents ), .t. )
      
return nil

function EventInfo( event, aParams, pParams, oActiveX )

   local cMsg := "Event: " + cValToChar( event ) + CRLF
   local n
   
   cMsg += "Params: " + CRLF
   
   for n = 1 to Len( aParams )
      cMsg += cValToChar( aParams[ n ] ) + CRLF
   next

   if event == "BeforeNavigate2"
      // MsgInfo( aParams[ 2 ] )
      // SetEventParam( pParams, 7, .t. ) // Comment this to allow
navigation
   endif

return cMsg + CRLF

#ifdef __MSVC__

       function OleGetProperty( hObj, cPropName )
       
          local o := TOleAuto()
          local uRet
       
          o:hObj = hObj
          uRet = __ObjSendMsg( o, cPropName )
          o:hObj = nil
       
       return uRet
       
       function OleSetProperty( hObj, cPropName, uValue )
       
          local o := TOleAuto()
          local uRet
       
          o:hObj := hObj
          uRet   := __ObjSendMsg( o, "_" + cPropName, uValue )
          o:hObj := nil
       
       return uRet
       
    #ifdef __XHARBOUR__
       function OleInvoke( hObj, cMethName ) 
    #else
       function OleInvoke( hObj, cMethName, ... ) 
    #endif
       
          local o := TOleAuto() 
          local uRet 
       
          o:hObj := hObj 
       
       #ifdef __XHARBOUR__
          uRet := o:Invoke( cMethName ) 
       #else
          uRet := o:Invoke( cMethName, ... ) 
       #endif
          o:hObj := nil 
       
       return uRet 

//----------------------------------------------------------------------------//

       #pragma begindump
       
           #include <windows.h>
           #include <hbapi.h>
           
           void * hb_oleAnsiToWide( char * );
           
           HB_FUNC( SENDWIDESTRINGMESSAGE )
           {
              HWND hWnd = ( HWND ) hb_parnl( 1 );
              char * cString = hb_parc( 4 );
              void * wString = hb_oleAnsiToWide( cString );
              
              if( IsWindow( hWnd ) || hWnd == ( HWND ) -1 || wString )
                 hb_retnl( SendMessage( hWnd, hb_parnl( 2 ), ( WPARAM )
hb_parl( 3 ), ( LPARAM ) wString ) );
              else
                 hb_retnl( 0 );
                 
              hb_xfree( wString );   
           }

       #pragma enddump

#endif


#pragma begindump

#include <windows.h>
#include <hbapi.h>

HB_FUNC( OLECREATEOBJECT ) /* ( cOleName | cCLSID  [, cIID ] ) */
{
  wchar_t*    cCLSID;
  GUID        ClassID, iid;
  BOOL        fIID = FALSE;
  IDispatch*  pDisp = NULL;
  IDispatch** ppDisp;
  const char* cOleName = hb_parc( 1 );
  const char* cID = hb_parc( 2 );
  HRESULT     lOleError;

  if( HB_IS_NUMBER( 1 ) )
  {
     IDispatch * pDisp = ( IDispatch * ) ( HB_PTRDIFF ) hb_parnint( 1 );
     lOleError = pDisp->lpVtbl->AddRef( pDisp );

     hb_setOleError( lOleError );
     if( lOleError == S_OK )
     {
        hb_retnint( ( HB_PTRDIFF ) hb_param( 1, HB_IT_ANY ) );
     }
     else
        hb_ret();
  }
  else if( cOleName )
   {
      cCLSID = AnsiToWide( cOleName );
      if( cOleName[ 0 ] == '{' )
         lOleError = CLSIDFromString( (LPOLESTR) cCLSID, &ClassID );
      else
         lOleError = CLSIDFromProgID( (LPCOLESTR) cCLSID, &ClassID );
      hb_xfree( cCLSID );

      if( cID )
      {
         if( cID[ 0 ] == '{' )
         {
            cCLSID = AnsiToWide( cID );
            lOleError = CLSIDFromString( (LPOLESTR) cCLSID, &iid );
            hb_xfree( cCLSID );
            fIID = TRUE;
         }
         else if( hb_parclen( 2 ) == ( ULONG ) sizeof( iid ) )
         {
            memcpy( (LPVOID) &iid, cID, sizeof( iid ) );
            fIID = TRUE;
         }
      }

      if( lOleError == S_OK )
         lOleError = CoCreateInstance( HB_ID_REF( ClassID ), NULL,
CLSCTX_SERVER, fIID ? HB_ID_REF( iid ) : HB_ID_REF( IID_IDispatch ), (
void** ) ( void * ) &pDisp );
   }
   else
      lOleError = CO_E_CLASSSTRING;

   hb_setOleError( lOleError );
   if( lOleError == S_OK )
   {
      ppDisp = ( IDispatch** ) hb_gcAlloc( sizeof( IDispatch* ),
hb_ole_destructor );
      *ppDisp = pDisp;
      hb_retptrGC( ppDisp );
   }
   else
      hb_ret();
}

#pragma enddump

[ENDCODE]

...and generate this errors:

[ERRORS]


??????????????????????????????????????????????????????????????????????????????
? FiveWin for Harbour 9.02 - Feb. 2009            Harbour development power 
??
? (c) FiveTech, 1993-2009     for Microsoft Windows 9X/NT/200X/ME/XP/Vista/7
??
???????????????????????????????????????????????????????????????????????????????
?
?????????????????????????????????????????????????????????????????????????????
Compiling...
Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
WEBEXP.c:
Warning W8065 webexp.prg 139: Call to function 'hb_setOleError' with no
prototype in function HB_FUN_OLECREATEOBJECT
Warning W8065 webexp.prg 149: Call to function 'AnsiToWide' with no
prototype in function HB_FUN_OLECREATEOBJECT
Warning W8069 webexp.prg 149: Nonportable pointer conversion in function
HB_FUN_OLECREATEOBJECT
Warning W8065 webexp.prg 160: Call to function 'AnsiToWide' with no
prototype in function HB_FUN_OLECREATEOBJECT
Warning W8069 webexp.prg 160: Nonportable pointer conversion in function
HB_FUN_OLECREATEOBJECT
Warning W8065 webexp.prg 173: Call to function 'HB_ID_REF' with no prototype
in function HB_FUN_OLECREATEOBJECT
Warning W8065 webexp.prg 173: Call to function 'HB_ID_REF' with no prototype
in function HB_FUN_OLECREATEOBJECT
Warning W8065 webexp.prg 173: Call to function 'HB_ID_REF' with no prototype
in function HB_FUN_OLECREATEOBJECT
Error E2342 webexp.prg 173: Type mismatch in parameter 'rclsid' (wanted
'const _GUID * const', got 'int') in function HB_FUN_OLECREATEOBJECT
Error E2342 webexp.prg 173: Type mismatch in parameter 'riid' (wanted 'const
_GUID * const', got 'int') in function HB_FUN_OLECREATEOBJECT
Warning W8065 webexp.prg 178: Call to function 'hb_setOleError' with no
prototype in function HB_FUN_OLECREATEOBJECT
Error E2451 webexp.prg 181: Undefined symbol 'hb_ole_destructor' in function
HB_FUN_OLECREATEOBJECT
Warning W8004 webexp.prg 187: 'fIID' is assigned a value that is never used
in function HB_FUN_OLECREATEOBJECT
*** 3 errors in Compile ***
Borland Resource Compiler  Version 5.40
Copyright (c) 1990, 1999 Inprise Corporation.  All rights reserved.
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
* Application successfully built *

[ENDERRORS]

Any more suggestions ?

Best Regards,

Rossine.


-- 
View this message in context: http://www.nabble.com/Errors-with-11032-tp23521549p23539642.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From qiinfo at ig.com.br  Thu May 14 08:37:11 2009
From: qiinfo at ig.com.br (Rossine)
Date: Thu May 14 10:40:48 2009
Subject: [Harbour] Errors with 11032
Message-ID: <23539642.post@talk.nabble.com>


Hello Pritpal,

Including this in my example: (WEBEXP.PRG)

[CODE]

#include "FiveWin.ch"

function Main()

   local oWnd, oActiveX
   local cEvents := ""

   DEFINE WINDOW oWnd TITLE "FiveWin ActiveX Support"

   oActiveX = TActiveX():New( oWnd, "Shell.Explorer" )

   oWnd:oClient = oActiveX // To fill the entire window surface

   // oActiveX:Do( "GoHome" )
   oActiveX:Do( "Navigate", "http://www.google.com.br" )

   oActiveX:SetProp( "StatusBar", .t. )
   
   // MsgInfo( oActiveX:GetProp( "StatusBar" ) )

   oActiveX:bOnEvent = { | event, aParams, pParams | cEvents += EventInfo(
event, aParams, pParams, oActiveX ) }

   ACTIVATE WINDOW oWnd ;
      VALID ( MemoEdit( cEvents ), .t. )
      
return nil

function EventInfo( event, aParams, pParams, oActiveX )

   local cMsg := "Event: " + cValToChar( event ) + CRLF
   local n
   
   cMsg += "Params: " + CRLF
   
   for n = 1 to Len( aParams )
      cMsg += cValToChar( aParams[ n ] ) + CRLF
   next

   if event == "BeforeNavigate2"
      // MsgInfo( aParams[ 2 ] )
      // SetEventParam( pParams, 7, .t. ) // Comment this to allow
navigation
   endif

return cMsg + CRLF

#ifdef __MSVC__

       function OleGetProperty( hObj, cPropName )
       
          local o := TOleAuto()
          local uRet
       
          o:hObj = hObj
          uRet = __ObjSendMsg( o, cPropName )
          o:hObj = nil
       
       return uRet
       
       function OleSetProperty( hObj, cPropName, uValue )
       
          local o := TOleAuto()
          local uRet
       
          o:hObj := hObj
          uRet   := __ObjSendMsg( o, "_" + cPropName, uValue )
          o:hObj := nil
       
       return uRet
       
    #ifdef __XHARBOUR__
       function OleInvoke( hObj, cMethName ) 
    #else
       function OleInvoke( hObj, cMethName, ... ) 
    #endif
       
          local o := TOleAuto() 
          local uRet 
       
          o:hObj := hObj 
       
       #ifdef __XHARBOUR__
          uRet := o:Invoke( cMethName ) 
       #else
          uRet := o:Invoke( cMethName, ... ) 
       #endif
          o:hObj := nil 
       
       return uRet 

//----------------------------------------------------------------------------//

       #pragma begindump
       
           #include <windows.h>
           #include <hbapi.h>
           
           void * hb_oleAnsiToWide( char * );
           
           HB_FUNC( SENDWIDESTRINGMESSAGE )
           {
              HWND hWnd = ( HWND ) hb_parnl( 1 );
              char * cString = hb_parc( 4 );
              void * wString = hb_oleAnsiToWide( cString );
              
              if( IsWindow( hWnd ) || hWnd == ( HWND ) -1 || wString )
                 hb_retnl( SendMessage( hWnd, hb_parnl( 2 ), ( WPARAM )
hb_parl( 3 ), ( LPARAM ) wString ) );
              else
                 hb_retnl( 0 );
                 
              hb_xfree( wString );   
           }

       #pragma enddump

#endif


#pragma begindump

#include <windows.h>
#include <hbapi.h>

HB_FUNC( OLECREATEOBJECT ) /* ( cOleName | cCLSID  [, cIID ] ) */
{
  wchar_t*    cCLSID;
  GUID        ClassID, iid;
  BOOL        fIID = FALSE;
  IDispatch*  pDisp = NULL;
  IDispatch** ppDisp;
  const char* cOleName = hb_parc( 1 );
  const char* cID = hb_parc( 2 );
  HRESULT     lOleError;

  if( HB_IS_NUMBER( 1 ) )
  {
     IDispatch * pDisp = ( IDispatch * ) ( HB_PTRDIFF ) hb_parnint( 1 );
     lOleError = pDisp->lpVtbl->AddRef( pDisp );

     hb_setOleError( lOleError );
     if( lOleError == S_OK )
     {
        hb_retnint( ( HB_PTRDIFF ) hb_param( 1, HB_IT_ANY ) );
     }
     else
        hb_ret();
  }
  else if( cOleName )
   {
      cCLSID = AnsiToWide( cOleName );
      if( cOleName[ 0 ] == '{' )
         lOleError = CLSIDFromString( (LPOLESTR) cCLSID, &ClassID );
      else
         lOleError = CLSIDFromProgID( (LPCOLESTR) cCLSID, &ClassID );
      hb_xfree( cCLSID );

      if( cID )
      {
         if( cID[ 0 ] == '{' )
         {
            cCLSID = AnsiToWide( cID );
            lOleError = CLSIDFromString( (LPOLESTR) cCLSID, &iid );
            hb_xfree( cCLSID );
            fIID = TRUE;
         }
         else if( hb_parclen( 2 ) == ( ULONG ) sizeof( iid ) )
         {
            memcpy( (LPVOID) &iid, cID, sizeof( iid ) );
            fIID = TRUE;
         }
      }

      if( lOleError == S_OK )
         lOleError = CoCreateInstance( HB_ID_REF( ClassID ), NULL,
CLSCTX_SERVER, fIID ? HB_ID_REF( iid ) : HB_ID_REF( IID_IDispatch ), (
void** ) ( void * ) &pDisp );
   }
   else
      lOleError = CO_E_CLASSSTRING;

   hb_setOleError( lOleError );
   if( lOleError == S_OK )
   {
      ppDisp = ( IDispatch** ) hb_gcAlloc( sizeof( IDispatch* ),
hb_ole_destructor );
      *ppDisp = pDisp;
      hb_retptrGC( ppDisp );
   }
   else
      hb_ret();
}

#pragma enddump

[ENDCODE]

...and generate this errors: (compiled with 11035)

[ERRORS]


??????????????????????????????????????????????????????????????????????????????
? FiveWin for Harbour 9.02 - Feb. 2009            Harbour development power 
??
? (c) FiveTech, 1993-2009     for Microsoft Windows 9X/NT/200X/ME/XP/Vista/7
??
???????????????????????????????????????????????????????????????????????????????
?
?????????????????????????????????????????????????????????????????????????????
Compiling...
Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
WEBEXP.c:
Warning W8065 webexp.prg 139: Call to function 'hb_setOleError' with no
prototype in function HB_FUN_OLECREATEOBJECT
Warning W8065 webexp.prg 149: Call to function 'AnsiToWide' with no
prototype in function HB_FUN_OLECREATEOBJECT
Warning W8069 webexp.prg 149: Nonportable pointer conversion in function
HB_FUN_OLECREATEOBJECT
Warning W8065 webexp.prg 160: Call to function 'AnsiToWide' with no
prototype in function HB_FUN_OLECREATEOBJECT
Warning W8069 webexp.prg 160: Nonportable pointer conversion in function
HB_FUN_OLECREATEOBJECT
Warning W8065 webexp.prg 173: Call to function 'HB_ID_REF' with no prototype
in function HB_FUN_OLECREATEOBJECT
Warning W8065 webexp.prg 173: Call to function 'HB_ID_REF' with no prototype
in function HB_FUN_OLECREATEOBJECT
Warning W8065 webexp.prg 173: Call to function 'HB_ID_REF' with no prototype
in function HB_FUN_OLECREATEOBJECT
Error E2342 webexp.prg 173: Type mismatch in parameter 'rclsid' (wanted
'const _GUID * const', got 'int') in function HB_FUN_OLECREATEOBJECT
Error E2342 webexp.prg 173: Type mismatch in parameter 'riid' (wanted 'const
_GUID * const', got 'int') in function HB_FUN_OLECREATEOBJECT
Warning W8065 webexp.prg 178: Call to function 'hb_setOleError' with no
prototype in function HB_FUN_OLECREATEOBJECT
Error E2451 webexp.prg 181: Undefined symbol 'hb_ole_destructor' in function
HB_FUN_OLECREATEOBJECT
Warning W8004 webexp.prg 187: 'fIID' is assigned a value that is never used
in function HB_FUN_OLECREATEOBJECT
*** 3 errors in Compile ***
Borland Resource Compiler  Version 5.40
Copyright (c) 1990, 1999 Inprise Corporation.  All rights reserved.
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
* Application successfully built *

[ENDERRORS]

Any more suggestions ?

Best Regards,

Rossine.


-- 
View this message in context: http://www.nabble.com/Errors-with-11032-tp23521549p23539642.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dbtopas at dbtopas.lt  Thu May 14 08:43:19 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu May 14 10:44:15 2009
Subject: [Harbour] Bug in ADS
In-Reply-To: <20090513231643.GA9994@uran.home.aster.pl>
References: <1242242430411-2886000.post@n2.nabble.com>	<29c193f769dd6de36df14cec9dbf5d22@viaopen.com>
	<20090513231643.GA9994@uran.home.aster.pl>
Message-ID: <4A0C11E7.2010706@dbtopas.lt>

Przemyslaw Czerpak wrote:
> Here is reduced example:
> 
>       REQUEST ADS
>       proc main()
>       adsSetServerType( 1 )
>       rddSetDefault( "ADS" )
>       dbCreate( "test.dbf", { { "F", "C", 24, 0 } } )
>       USE test
>       while lastrec() < 10
>          dbappend()
>          field->F := repl( "1234567890", 10 )
>       enddo
>       dbgotop()
>       browse()

> In next commit I'll cover the workaround code by
>    #if ADS_LIB_VERSION == 900
> so other ACE version can be easy tested and added to above #if condition
> if necessary.


I've commented out your fix and compiled the test above using ace.h 
version 7.10.

Final executable tested using .dlls of versions 7.00, 7.10, 8.00, 8.10, 
9.1. In all cases I see an extra character (blank) in browse.



Regards,
Mindaugas
From bedipritpal at hotmail.com  Thu May 14 09:47:52 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu May 14 10:50:37 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <23539642.post@talk.nabble.com>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
	<23539642.post@talk.nabble.com>
Message-ID: <23540931.post@talk.nabble.com>


Rossine

You have to apply patch in olecore.c itself.
You cannot club this function in #prgma begin/end
construct. Rebuild olecore.c. 

Also try Przemek's refinements. May be any could help.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Errors-with-11032-tp23521549p23540931.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Thu May 14 10:19:08 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May 14 11:26:13 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11039] trunk/harbour
In-Reply-To: <DDDD08BC-4A48-420E-8920-168B277A79CC@syenar.hu>
References: <raqm059d2t0teesknpvp3sf4apaftjllcb@4ax.com>
	<20090514061308.GA10754@uran.home.aster.pl>
	<20090514064836.GA4700@uran.home.aster.pl>
	<18d502870905140049q6a2a0841s386285462488a61e@mail.gmail.com>
	<20090514091201.GA28767@uran.home.aster.pl>
	<18d502870905140219t6791e557gfe1fd227fab4ecbe@mail.gmail.com>
	<20090514094845.GA809@uran.home.aster.pl>
	<18d502870905140322r32e7d32w1b0e1ab332324ac9@mail.gmail.com>
	<20090514112511.GA21217@uran.home.aster.pl>
	<DDDD08BC-4A48-420E-8920-168B277A79CC@syenar.hu>
Message-ID: <20090514141908.GA16161@uran.home.aster.pl>

On Thu, 14 May 2009, Szak?ts Viktor wrote:
> In this case you can copy hbmk.cfg to one of these location neutral dirs:
> /etc/harbour or ~/.harbour.

The problem is that such hbmk.cfg will be common to all Harbour
installations I will have in the system.

> If there is a way to detect that softlink condition we can add support
> for it.

There is no portable method. In fact also hb_argv(0) may not be usable
or even accessible in POSIX system. Program may not have rights to scan
directories from it was executed or can be even executed in some different
chroot-ed environment.

But let's leave it as is if user can disable hard coded paths in final
shared binaries.

> Yes, I'll add a new switch to control this behaviour.
> I'm thinking about a good name... Any suggestions? It would
> control inclusion of dir for both when Harbour is installed in
> system location and also when not, only the defaults will be
> different in these cases.
> -shareable? -shareddist?

We already have:
   -[full]static
We can have corresponding:
   -[full|fix]shared

best regards,
Przemek
From druzus at acn.waw.pl  Thu May 14 10:34:21 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May 14 11:42:29 2009
Subject: [Harbour] (fwd) Re: hbzlib and NO_GZCOMPRESS
In-Reply-To: <23537993.post@talk.nabble.com>
References: <20090514071530.GA32137@uran.home.aster.pl>
	<23537993.post@talk.nabble.com>
Message-ID: <20090514143421.GA8317@uran.home.aster.pl>

On Thu, 14 May 2009, Petr Chornyj wrote:

Hi,

> > If you use zlib compiled with this macro then it does not contain
> > any functions used for compression like gzwrite() or gzflush() so
> > you cannot even link final binaries if code use such functions.
> > Do you want to remove HB_GZWRITE()/HB_GZFLUSH()/... from rtl/hbzlib.c
> > when this macro is set?
> > Why do you want to make it?
> Yes, in few cases I want to remove HB_GZWRITE()/HB_GZFLUSH(), as, as I do
> guess  majority  from the users of Windows never use by the functions of
> HB_GZ* family and it can reduce the size of final binary file (little
> piece). I understand usually, that this is not important vitally  or even it
> can be badly in future. 

NO_GZCOMPRESS macro in ZLIB does not disable gz* functions but only disable
the compassion part of gz* functions. gzRead(), gzGet(), etc. are still
available. I do not think that you will reduce total application code size
much using it. Maybe 2 or 3 KB but I haven't measured it.

best regards,
Przemek
From qiinfo at ig.com.br  Thu May 14 10:50:43 2009
From: qiinfo at ig.com.br (Rossine)
Date: Thu May 14 11:51:34 2009
Subject: [Harbour] Problem with return of LoadLibrary and Harbour 11047
In-Reply-To: <18d502870905140613g2b8b734chff298c55fc0d7810@mail.gmail.com>
References: <23539143.post@talk.nabble.com>
	<18d502870905140613g2b8b734chff298c55fc0d7810@mail.gmail.com>
Message-ID: <23542246.post@talk.nabble.com>


Hello Viktor, 

The same would be true to use this: 'IF Empty (hLib)', but this in itself
will fivewin about some changes for this work and in my application also
been several changes :(.

 I suggest you make a test for when using fivewin together with the harbour,
that the "LoadLibrary" return number, and when not fivewin return "pointer"
that in my opni?o is correct.

Best Regards,

Rossine.


-- 
View this message in context: http://www.nabble.com/Problem-with-return-of-LoadLibrary-and-Harbour-11047-tp23539143p23542246.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From rportnoff at spendmap.com  Thu May 14 08:48:11 2009
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Thu May 14 12:34:49 2009
Subject: [Harbour] Bug in ADS
In-Reply-To: <20090513231643.GA9994@uran.home.aster.pl>
References: <1242242430411-2886000.post@n2.nabble.com>
	<29c193f769dd6de36df14cec9dbf5d22@viaopen.com>
	<20090513231643.GA9994@uran.home.aster.pl>
Message-ID: <B0088342073@ms1.3peaks.com>


>Can someone who has older ACE libraries check if the problem is local to
>version 9.00 and does not exist in 8.10 and/or in older versions?

Not an issue in ACE 6.2



From lkrausem at shaw.ca  Thu May 14 11:46:35 2009
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Thu May 14 12:48:11 2009
Subject: [Harbour] Bug in ADS
In-Reply-To: <20090513222014.GB29975@uran.home.aster.pl>
References: <1242242430411-2886000.post@n2.nabble.com>
	<20090513222014.GB29975@uran.home.aster.pl>
Message-ID: <4A0C3CDB.2060501@shaw.ca>

Przemek:

FWIW, I tested with xHarbour with ads 8.1, 9.0 and 9.1 dlls
and it does not add an extra dummy char.  I changed the field
length to 40 and it still worked as expected.

Regards,

> It seems to be ACE bug. Not Harbour.
>
> Here is reduced example:
>
>       REQUEST ADS
>       proc main()
>       adsSetServerType( 1 )
>       rddSetDefault( "ADS" )
>       dbCreate( "test.dbf", { { "F", "C", 24, 0 } } )
>       USE test
>       while lastrec() < 10
>          dbappend()
>          field->F := repl( "1234567890", 10 )
>       enddo
>       dbgotop()
>       browse()
>
> For filed F shorted then 24 bytes AdsGetField() returns correct results
> but for longer it adds dummy char at the end.
> It should be reported to Extended System.
> Meanwhile I can add workaround and cut the filed to maximum size reported
> by table structure info but such hack will badly damage values if ADS
> introduce compressed fields which can be longer.
>
>
>   

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From harbour.01 at syenar.hu  Thu May 14 12:02:03 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 14 13:07:05 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11039] trunk/harbour
In-Reply-To: <20090514141908.GA16161@uran.home.aster.pl>
References: <raqm059d2t0teesknpvp3sf4apaftjllcb@4ax.com>
	<20090514064836.GA4700@uran.home.aster.pl>
	<18d502870905140049q6a2a0841s386285462488a61e@mail.gmail.com>
	<20090514091201.GA28767@uran.home.aster.pl>
	<18d502870905140219t6791e557gfe1fd227fab4ecbe@mail.gmail.com>
	<20090514094845.GA809@uran.home.aster.pl>
	<18d502870905140322r32e7d32w1b0e1ab332324ac9@mail.gmail.com>
	<20090514112511.GA21217@uran.home.aster.pl>
	<DDDD08BC-4A48-420E-8920-168B277A79CC@syenar.hu>
	<20090514141908.GA16161@uran.home.aster.pl>
Message-ID: <18d502870905140902x508d5635q1e9ff61debd31368@mail.gmail.com>

>
> > In this case you can copy hbmk.cfg to one of these location neutral dirs:
> > /etc/harbour or ~/.harbour.
>
> The problem is that such hbmk.cfg will be common to all Harbour
> installations I will have in the system.


True.


> > If there is a way to detect that softlink condition we can add support
> > for it.
>
> There is no portable method. In fact also hb_argv(0) may not be usable
> or even accessible in POSIX system. Program may not have rights to scan
> directories from it was executed or can be even executed in some different
> chroot-ed environment.
>
> But let's leave it as is if user can disable hard coded paths in final
> shared binaries.


There are still some choices you can use:
- Put .hbp file with libs= lines into your project dir. It will be found and
parsed by hbmk2.
- Specify any .hbp file directly on the command line. You can even include
it
  from an .hbm file.


> > -shareable? -shareddist?
>
> We already have:
>   -[full]static
> We can have corresponding:
>   -[full|fix]shared


I'll add it.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090514/ab2636b3/attachment.html
From harbour.01 at syenar.hu  Thu May 14 12:12:46 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 14 13:27:22 2009
Subject: [Harbour] Problem with return of LoadLibrary and Harbour 11047
In-Reply-To: <23542246.post@talk.nabble.com>
References: <23539143.post@talk.nabble.com>
	<18d502870905140613g2b8b734chff298c55fc0d7810@mail.gmail.com>
	<23542246.post@talk.nabble.com>
Message-ID: <18d502870905140912o74148c1cvbb2421810da793c2@mail.gmail.com>

Hi Rossine,


> Hello Viktor,
>
> The same would be true to use this: 'IF Empty (hLib)', but this in itself
> will fivewin about some changes for this work and in my application also
> been several changes :(.


Yes I know, and I'm happy that we see know what sort of problems
we need to deal with


>  I suggest you make a test for when using fivewin together with the
> harbour,
> that the "LoadLibrary" return number, and when not fivewin return "pointer"
> that in my opni?o is correct.


Rather such app/3rd party lib code should be fixed to use pointers, but for
that to happen we need to define an upgrade path for hbwin APIs. See my
other mail. [ BTW, hbwin is a pretty huge pile of mess, so such cleanup
could be done for most of its components. ]

Until then I suggest to stick with last known working hbwin.lib, f.e.
the one found in my binary distro.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090514/e42a09df/attachment.html
From vailtom at gmail.com  Thu May 14 12:25:43 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Thu May 14 13:43:11 2009
Subject: [Harbour] Harbour nomination for sf.net best project/best dev 
	tool
In-Reply-To: <68948A51-EE0E-4CBD-903F-025C8F49D751@syenar.hu>
References: <68948A51-EE0E-4CBD-903F-025C8F49D751@syenar.hu>
Message-ID: <531d7a750905140925h35b84fey739b66cf197148a2@mail.gmail.com>

> Would you please add this little icon to our webpage:
>
> <a
> href="http://sourceforge.net/community/cca09/nominate/?project_name=Harbour&project_url=http://www.harbour-project.org/"><img
> src="http://sourceforge.net/images/cca/cca_nominate.png" border="0"/></a>
>
> [ If someone has any objection, please speak up. ]

One doubts: The Harbor project is already entered in this contest?
From vailtom at gmail.com  Thu May 14 12:25:44 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Thu May 14 13:43:17 2009
Subject: [Harbour] Harbour nomination for sf.net best project/best dev 
	tool
In-Reply-To: <68948A51-EE0E-4CBD-903F-025C8F49D751@syenar.hu>
References: <68948A51-EE0E-4CBD-903F-025C8F49D751@syenar.hu>
Message-ID: <531d7a750905140925u5391de0di82ee4a269cc57a48@mail.gmail.com>

> Would you please add this little icon to our webpage:
>
> <a
> href="http://sourceforge.net/community/cca09/nominate/?project_name=Harbour&project_url=http://www.harbour-project.org/"><img
> src="http://sourceforge.net/images/cca/cca_nominate.png" border="0"/></a>
>
> [ If someone has any objection, please speak up. ]

One doubts: The Harbor project is already entered in this contest?
From toninhofwi at yahoo.com.br  Thu May 14 12:30:06 2009
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Thu May 14 13:43:20 2009
Subject: [Harbour] About bug in AdsGetField()
Message-ID: <cfho051uu2pfdfmml481h53trlgdpq8cc5@4ax.com>

Hi ppl.

I?d posted this message in Advantage.General:

---cut---
I?m a Harbour user and our group found a problem when use
AdsGetField(..., ADS_NONE): character fields longer then 23 bytes read
from tables increase pulLen by one adding one garbage character to the
end of string. Is this an expected behaviour ?
---cut---

and this is the answer:

---cut---
There is no specific length check involving 23 bytes.  The parameters
passed to the AdsGetField function might not be correct.  Was an error
returned from the call?  If the call succeeds, it returns AE_SUCCESS
(0).  If the buffer passed in is too short, it will return
AE_INSUFFICIENT_BUFFER (5005).

The buffer length that you pass in must include room for the null
terminator character.  So, for example, if the data is 25 bytes, you
must pass a buffer of at least 26 bytes.  If you pass a buffer of only
25 bytes (as specified by the pulLen parameter), then the function
will return AE_INSUFFICIENT_BUFFER and will not null-terminate the
result.  It will copy all 25 bytes of the data into the result buffer.
This may be what you are seeing.  Since there would be no null
terminator, it would appear that there is junk on the end of the
string.

http://devzone.advantagedatabase.com/dz/webhelp/Advantage9.1/mergedProjects/ace/api2/adsgetfield.htm
---cut---



Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From toninhofwi at yahoo.com.br  Thu May 14 13:09:22 2009
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Thu May 14 14:14:26 2009
Subject: [Harbour] About bug in AdsGetField()
Message-ID: <u1ko0594sad3omlfm3qd8hd90teqr2s5i8@4ax.com>

Hi ppl.

I?d posted this message in Advantage.General:

---cut---
I?m a Harbour user and our group found a problem when use
AdsGetField(..., ADS_NONE): character fields longer then 23 bytes read
from tables increase pulLen by one adding one garbage character to the
end of string. Is this an expected behaviour ?
---cut---

and this is the answer:

---cut---
There is no specific length check involving 23 bytes.  The parameters
passed to the AdsGetField function might not be correct.  Was an error
returned from the call?  If the call succeeds, it returns AE_SUCCESS
(0).  If the buffer passed in is too short, it will return
AE_INSUFFICIENT_BUFFER (5005).

The buffer length that you pass in must include room for the null
terminator character.  So, for example, if the data is 25 bytes, you
must pass a buffer of at least 26 bytes.  If you pass a buffer of only
25 bytes (as specified by the pulLen parameter), then the function
will return AE_INSUFFICIENT_BUFFER and will not null-terminate the
result.  It will copy all 25 bytes of the data into the result buffer.
This may be what you are seeing.  Since there would be no null
terminator, it would appear that there is junk on the end of the
string.

http://devzone.advantagedatabase.com/dz/webhelp/Advantage9.1/mergedProjects/ace/api2/adsgetfield.htm
---cut---



Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From vszakats at users.sourceforge.net  Thu May 14 13:04:55 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu May 14 14:15:39 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11049] trunk/harbour
Message-ID: <E1M4eMZ-0001qF-Mc@dn4whf1.ch3.sourceforge.com>

Revision: 11049
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11049&view=rev
Author:   vszakats
Date:     2009-05-14 17:04:54 +0000 (Thu, 14 May 2009)

Log Message:
-----------
2009-05-14 19:01 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    * -shareable -> -fullshared/-fixshared

  + contrib/hbmysql/mysqlold.c
  * contrib/hbmysql/mysql.c
  * contrib/hbmysql/Makefile
    * Compatibility function names moved to separate file.

  + contrib/hbodbc/odbcold.c
  * contrib/hbodbc/odbc.c
  * contrib/hbodbc/Makefile
    * Compatibility function names moved to separate file.

  * contrib/hbwin/win_prt.c
    ! Applied fix submitted by Alex Strickland. Thank you.

  * contrib/hbwin/legacy.c
  * contrib/hbwin/win_dll.c
    * GETLASTERROR()/SETLASTERROR() moved to legacy.c.
      We have WAPI_GETLASTERROR()/WAPI_SETLASTERROR() and
      it's recommended to use them instead.
    + XBase++ compatible DLL handling functions marked with
      HB_COMPAT_XPP.
    ! DLLLOAD() changed back to return numeric pointer. This
      is required to stay compatible with XBase++.
    ; TODO:
      - Add C API to make DLL calls.
      - Move CALLDLL*() functions to xhb lib.
      - Add WAPI_LOADLIBRARY()/WAPI_FREELIBRARY()/WIN_GETPROCADDRESS()
        functions to replace current LOADLIBRARY()/FREELIBRARY()/GETPROCADDRESS()
        calls, fixing them to work on pointers only.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbmysql/Makefile
    trunk/harbour/contrib/hbmysql/mysql.c
    trunk/harbour/contrib/hbodbc/Makefile
    trunk/harbour/contrib/hbodbc/odbc.c
    trunk/harbour/contrib/hbwin/legacy.c
    trunk/harbour/contrib/hbwin/win_dll.c
    trunk/harbour/contrib/hbwin/win_prt.c
    trunk/harbour/utils/hbmk2/hbmk2.prg

Added Paths:
-----------
    trunk/harbour/contrib/hbmysql/mysqlold.c
    trunk/harbour/contrib/hbodbc/odbcold.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dbtopas at dbtopas.lt  Thu May 14 13:15:20 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu May 14 14:23:16 2009
Subject: [Harbour] Bug in ADS
In-Reply-To: <4A0C3CDB.2060501@shaw.ca>
References: <1242242430411-2886000.post@n2.nabble.com>	<20090513222014.GB29975@uran.home.aster.pl>
	<4A0C3CDB.2060501@shaw.ca>
Message-ID: <4A0C51A8.9020600@dbtopas.lt>

Luis Krause Mantilla wrote:
> Przemek:
> 
> FWIW, I tested with xHarbour with ads 8.1, 9.0 and 9.1 dlls
> and it does not add an extra dummy char.  I changed the field
> length to 40 and it still worked as expected.

Hi,


Have you tried with ads1.c file revision 1.141 (Mon May 4 08:25:44 2009 
UTC) or newer?


Regards,
Mindaugas

From calimero22 at freemail.it  Thu May 14 13:36:11 2009
From: calimero22 at freemail.it (calimero22@freemail.it)
Date: Thu May 14 14:40:47 2009
Subject: [Harbour] MYSQL and Use Exclusive
Message-ID: <20090514173611.C7819680026A@eva105.dadanet.it>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090514/32ae2b00/attachment.html
From vailtom at gmail.com  Thu May 14 13:38:53 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Thu May 14 14:43:28 2009
Subject: [Harbour] Problem with return of LoadLibrary and Harbour 11047
In-Reply-To: <23542246.post@talk.nabble.com>
References: <23539143.post@talk.nabble.com>
	<18d502870905140613g2b8b734chff298c55fc0d7810@mail.gmail.com>
	<23542246.post@talk.nabble.com>
Message-ID: <531d7a750905141038w27b82df0pa3bcd6d0edc80893@mail.gmail.com>

Try change it:

IF Empty (hLib) ---> IF Valtype(hLib) <> "P"
if hLib <= 32   ---> IF Valtype(hLib) <> "P"
From dbtopas at dbtopas.lt  Thu May 14 14:27:43 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu May 14 15:08:06 2009
Subject: [Harbour] About bug in AdsGetField()
In-Reply-To: <u1ko0594sad3omlfm3qd8hd90teqr2s5i8@4ax.com>
References: <u1ko0594sad3omlfm3qd8hd90teqr2s5i8@4ax.com>
Message-ID: <4A0C629F.3090303@dbtopas.lt>

Hi,


great! The fix below should be enough (not tested), but maybe we should 
add a better error check for ads function return values...


Index: C:/harboursvn/contrib/rddads/ads1.c
===================================================================
--- C:/harboursvn/contrib/rddads/ads1.c	(revision 11047)
+++ C:/harboursvn/contrib/rddads/ads1.c	(working copy)
@@ -2054,14 +2054,6 @@
                 update area flags, Druzus */
              hb_adsUpdateAreaFlags( pArea );
           }
-         /* workaround for ACE bug: character fields longer then 23 
bytes are
-          * increased by one byte when read by AdsGetField(). This hack can
-          * cut the results read from some type of compressed fields so it
-          * should be removed for ACE clients which does not have such
-          * problems [druzus].
-          */
-         if( u32Length > ( ULONG ) pField->uiLen )
-            u32Length = pField->uiLen;
           hb_itemPutCL( pItem, ( char * ) pBuffer, u32Length );
           break;

@@ -2707,8 +2699,8 @@
     pField = pArea->lpFields;
     for( uiCount = 0; uiCount < pArea->uiFieldCount; uiCount++ )
     {
-      if( ( ULONG ) pField->uiLen > pArea->maxFieldLen )
-        pArea->maxFieldLen = pField->uiLen;
+      if( ( ULONG ) pField->uiLen + 1 > pArea->maxFieldLen )
+        pArea->maxFieldLen = pField->uiLen + 1;

        cType = NULL;
        switch( pField->uiType )
@@ -3196,9 +3188,9 @@
        dbFieldInfo.uiLen = ( USHORT ) u32Length;
        dbFieldInfo.uiDec = 0;
        dbFieldInfo.uiFlags = 0;
-      if( u32Length > pArea->maxFieldLen )
+      if( u32Length + 1 > pArea->maxFieldLen )
        {
-         pArea->maxFieldLen = u32Length;
+         pArea->maxFieldLen = u32Length + 1;
        }
        dbFieldInfo.uiTypeExtended = usType;
        switch( usType )


Regards,
Mindaugas


Toninho@fwi wrote:
> Hi ppl.
> 
> I?d posted this message in Advantage.General:
> 
> ---cut---
> I?m a Harbour user and our group found a problem when use
> AdsGetField(..., ADS_NONE): character fields longer then 23 bytes read
> from tables increase pulLen by one adding one garbage character to the
> end of string. Is this an expected behaviour ?
> ---cut---
> 
> and this is the answer:
> 
> ---cut---
> There is no specific length check involving 23 bytes.  The parameters
> passed to the AdsGetField function might not be correct.  Was an error
> returned from the call?  If the call succeeds, it returns AE_SUCCESS
> (0).  If the buffer passed in is too short, it will return
> AE_INSUFFICIENT_BUFFER (5005).
> 
> The buffer length that you pass in must include room for the null
> terminator character.  So, for example, if the data is 25 bytes, you
> must pass a buffer of at least 26 bytes.  If you pass a buffer of only
> 25 bytes (as specified by the pulLen parameter), then the function
> will return AE_INSUFFICIENT_BUFFER and will not null-terminate the
> result.  It will copy all 25 bytes of the data into the result buffer.
> This may be what you are seeing.  Since there would be no null
> terminator, it would appear that there is junk on the end of the
> string.
> 
> http://devzone.advantagedatabase.com/dz/webhelp/Advantage9.1/mergedProjects/ace/api2/adsgetfield.htm
> ---cut---



From lkrausem at shaw.ca  Thu May 14 14:53:50 2009
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Thu May 14 15:52:17 2009
Subject: [Harbour] Bug in ADS
In-Reply-To: <4A0C51A8.9020600@dbtopas.lt>
References: <1242242430411-2886000.post@n2.nabble.com>
	<20090513222014.GB29975@uran.home.aster.pl>
	<4A0C3CDB.2060501@shaw.ca> <4A0C51A8.9020600@dbtopas.lt>
Message-ID: <4A0C68BE.6090302@shaw.ca>

Mindaugas:

I'm using 1.140.  I'm in the middle of heave code changes on our
app and I won't be able to try 1.141 anytime soon but will see if
someone else can test it and confirm/deny.

Regards,

Mindaugas Kavaliauskas wrote:
> Luis Krause Mantilla wrote:
>> Przemek:
>>
>> FWIW, I tested with xHarbour with ads 8.1, 9.0 and 9.1 dlls
>> and it does not add an extra dummy char.  I changed the field
>> length to 40 and it still worked as expected.
>
> Hi,
>
>
> Have you tried with ads1.c file revision 1.141 (Mon May 4 08:25:44 
> 2009 UTC) or newer?
>
>
> Regards,
> Mindaugas
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From dbtopas at dbtopas.lt  Thu May 14 14:55:59 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu May 14 15:53:29 2009
Subject: [Fwd: Re: [Harbour] Problem with return of LoadLibrary and Harbour
	11047]
In-Reply-To: <18d502870905141127l34a1b2al485d010336cd267a@mail.gmail.com>
References: <4A0C566C.5090406@takas.lt>
	<18d502870905141127l34a1b2al485d010336cd267a@mail.gmail.com>
Message-ID: <4A0C693F.6030500@dbtopas.lt>

Viktor Szak?ts wrote:
> Hi Mindaugas,
>              if hLib <= 32  && <<<------ Here error
> 
>         Probably 'IF Empty( hLib )' should be used here, and
>         LoadLibrary() modified to return NULL when pointer is <= 32.
> 
>         But now I know why we had this code full of numeric pointers.
> 
>         We can also leave LoadLibrary() as compatibility function and
>         switch it back to return numeric. This wouldn't be a huge step
>         forward though...
> 
>         Please FWH and Windows users (developers?) comment.
> 
> 
>     In my code in cases like this I return NIL instead of NULL pointer. This
>     is better for future compatibility, if we are going to change to
>     collectible pointers in the future. Since the value of the collectible
>     pointer will not be NULL.
> 
> 
> My vote goes to returning same type for both error and success 
> cases. Anyhow "Empty( retval )" is working for both cases, so 
> it seems the "best practice" when validating such return values.


We can not return empty collectible pointer! So, simple NULL pointer 
instead of collectible is also a kind of different type. Well, both has 
VALTYPE() == "P", but in C code it looks like different type:

HB_FUNC( AAA )
{
if( somefunc() == OK )
    hb_retptrGC( ... );
else
    hb_retptr( NULL );
}

HB_FUNC( BBB )
{
    some* pPtr = hb_parptrGC( ..., 1 );

    // If AAA returned NULL, here we do not have a valid GC pointer
    // just like invalid type was passed...
    if( pPtr )
       ....
    else
      hb_errRT_BASE_SubstR( EG_ARG, 3012, NULL, HB_ERR_FUNCNAME, 
HB_ERR_ARGS_BASEPARAMS );
}


All above does not mean we need NIL instead of NULL pointer, but 
difference is minor. Sometimes it is even better to have NIL, for 
example: printed error log is more clear if you see NIL as parameter 
instead of <POINTER> parameter, if we do not see pointer value explicitly.

One of the reason why I am writing this letter without having the strong 
opinion NIL vs. NULL is future extension of pointers. Przemek has some 
ideas about extending pointers to support methods. Maybe EMPTY() should 
be a kind of overloadable method/operator and every class (including 
pointers) can have EMPTY() overloaded. This gives possibility to test 
EMPTY() for varios classes/pointer. In this case we can use return value 
of exactly same type. So, one more vote "EMPTY()".

Summary: I would be nice, if we can see (or think about) a future 
extensions to decide some "no important" things like NIL vs. NULL today.


Regards,
Mindaugas

From harbour.01 at syenar.hu  Thu May 14 14:57:43 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu May 14 15:57:56 2009
Subject: [Harbour] Problem with return of LoadLibrary and Harbour 11047
In-Reply-To: <531d7a750905141038w27b82df0pa3bcd6d0edc80893@mail.gmail.com>
References: <23539143.post@talk.nabble.com>
	<18d502870905140613g2b8b734chff298c55fc0d7810@mail.gmail.com>
	<23542246.post@talk.nabble.com>
	<531d7a750905141038w27b82df0pa3bcd6d0edc80893@mail.gmail.com>
Message-ID: <3E86F834-C9C4-48AF-8C39-475819FB45E0@syenar.hu>

> Try change it:
>
> IF Empty (hLib) ---> IF Valtype(hLib) <> "P"
> if hLib <= 32   ---> IF Valtype(hLib) <> "P"

I'm not sure this would work. 'P' type is returned
even in case of error, but its content is NULL.

To solve this specific and similar cases, I've
added WIN_P2N() function, so such code can be used
(until we don't find something even better):

h := wapi_LoadLibrary( "my.dll" )
IF win_P2N( h ) > 32
    ? "OK"
ENDIF

Probably better would be to use something like
wapi_GetLastError() or even to embed '<= 32' to
a slightly higher level API, win_LoadLibrary(), which
would return NULL in all error cases, automatically:

// [ this isn't implemented yet in Harbour ]
h := win_LoadLibrary( "my.dll" )
IF ! Empty( h )
    ? "OK"
ENDIF

Maybe I should explain the win_ vs. wapi_ naming
logic: 'wapi_' is everything which is a plain wrapper
to a single Windows API call, replicating all functions
and return values as is. 'win_' is everything which
uses Windows API calls to achieve a goal, but such
function may combine these or add some extra logic to
make usage easier, in fact everything which isn't
wapi_ should be called win_.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu May 14 15:03:46 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu May 14 16:05:28 2009
Subject: [Fwd: Re: [Harbour] Problem with return of LoadLibrary and
	Harbour 11047]
In-Reply-To: <4A0C693F.6030500@dbtopas.lt>
References: <4A0C566C.5090406@takas.lt>
	<18d502870905141127l34a1b2al485d010336cd267a@mail.gmail.com>
	<4A0C693F.6030500@dbtopas.lt>
Message-ID: <977D0651-6B86-4308-B0BE-F761E249A4CF@syenar.hu>

>>    In my code in cases like this I return NIL instead of NULL  
>> pointer. This
>>    is better for future compatibility, if we are going to change to
>>    collectible pointers in the future. Since the value of the  
>> collectible
>>    pointer will not be NULL.
>> My vote goes to returning same type for both error and success  
>> cases. Anyhow "Empty( retval )" is working for both cases, so it  
>> seems the "best practice" when validating such return values.
>
> We can not return empty collectible pointer! So, simple NULL pointer  
> instead of collectible is also a kind of different type. Well, both  
> has VALTYPE() == "P", but in C code it looks like different type:

You're right, but in this case I used to return hb_retptr( NULL ), which
is also "P" type, but non-collectible. Hard to tell which is better.
Problem creep in probably as soon as we start to have collectible
*typed* pointers, because in this case we may not be able to keep the
type while returning NULL, but the same is the problem with NIL,
maybe NIL is slightly cleaner here, as it doesn't suggest anything
more than just being empty.

>
> HB_FUNC( AAA )
> {
> if( somefunc() == OK )
>   hb_retptrGC( ... );
> else
>   hb_retptr( NULL );
> }
>
> HB_FUNC( BBB )
> {
>   some* pPtr = hb_parptrGC( ..., 1 );
>
>   // If AAA returned NULL, here we do not have a valid GC pointer
>   // just like invalid type was passed...
>   if( pPtr )
>      ....
>   else
>     hb_errRT_BASE_SubstR( EG_ARG, 3012, NULL, HB_ERR_FUNCNAME,  
> HB_ERR_ARGS_BASEPARAMS );
> }
>
>
> All above does not mean we need NIL instead of NULL pointer, but  
> difference is minor. Sometimes it is even better to have NIL, for  
> example: printed error log is more clear if you see NIL as parameter  
> instead of <POINTER> parameter, if we do not see pointer value  
> explicitly.

Yes.

> One of the reason why I am writing this letter without having the  
> strong opinion NIL vs. NULL is future extension of pointers. Przemek  
> has some ideas about extending pointers to support methods. Maybe  
> EMPTY() should be a kind of overloadable method/operator and every  
> class (including pointers) can have EMPTY() overloaded. This gives  
> possibility to test EMPTY() for varios classes/pointer. In this case  
> we can use return value of exactly same type. So, one more vote  
> "EMPTY()".
>
> Summary: I would be nice, if we can see (or think about) a future  
> extensions to decide some "no important" things like NIL vs. NULL  
> today.

I agree. No strong opinion here on either side yet, so far I used to  
use NULL in practice.

So far conclusion is that callers should use Empty().

Brgds,
Viktor

From druzus at acn.waw.pl  Thu May 14 17:20:10 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May 14 18:11:57 2009
Subject: [Harbour] Re: [xHarbour-developers] Possible bug in ADS
In-Reply-To: <4A0C69B1.90107@shaw.ca>
References: <4A0C69B1.90107@shaw.ca>
Message-ID: <20090514212010.GA8794@uran.home.aster.pl>

On Thu, 14 May 2009, Luis Krause Mantilla wrote:

Hi,

> The Harbour list claims there's a bug recently introduced
> to rddads.   Char fields larger than 23 display one extra
> char at the end.  I can't try the latest xharbour from cvs
> but with ads1.c v. 1.140 there aren't any problems.

The bug is not recently introduced.
It has been existing for years because was hidden by someone who disabled
checking for AE_SUCCESS value returned by AdsGet*() functions and hardcoded
the size of returned value to maximum size of declared field ignoring real
size returned by ADS.
Recently it was was only exploited when I added support for varlangth fields
for which is necessary to check the real size and now it's fixed by:

2009-05-14 19:20 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/rddads/ads1.c
    ! fixed minimal record buffer size calculation
    ! fixed adsGetValue() method hacked to not report errors due to too
      small field buffer.
      Warning! Now ADS RDD will report any error as RTE if sth wrong
      will happen in one of AdsGet*() function when field is read so
      it's possible that also some other hidden bugs will be exploited
      and you will see RTE. Please test it.

Looks that the ChangeLog message was not delivered yet to Harbour
mailing list yet.

best regards,
Przemek
From abe.buch at att.net  Thu May 14 17:48:30 2009
From: abe.buch at att.net (AbeB)
Date: Thu May 14 18:49:35 2009
Subject: [Harbour] newest ads len( area->cfield )  generate RTE
Message-ID: <1242337710886-2902639.post@n2.nabble.com>


newest ads  * $Id: ads1.c 11050 2009-05-14 17:12:31Z druzus $

len( items->desc) generating error
ERROR BASE/1111  Argument error: LEN
-- 
View this message in context: http://n2.nabble.com/newest-ads-len%28-area-%3Ecfield-%29--generate-RTE-tp2902639p2902639.html
Sent from the harbour-devel mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Thu May 14 19:45:22 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May 14 20:39:51 2009
Subject: [Harbour] Re: [xHarbour-developers] Possible bug in ADS
In-Reply-To: <20090514212010.GA8794@uran.home.aster.pl>
References: <4A0C69B1.90107@shaw.ca> <20090514212010.GA8794@uran.home.aster.pl>
Message-ID: <20090514234522.GA18418@uran.home.aster.pl>

On Thu, 14 May 2009, Przemyslaw Czerpak wrote:

Hi,

> The bug is not recently introduced.
> It has been existing for years because was hidden by someone who disabled
> checking for AE_SUCCESS value returned by AdsGet*() functions and hardcoded
> the size of returned value to maximum size of declared field ignoring real
> size returned by ADS.

Verification.
The bug exist from 2000-09-28 (nearly the beginning of ADS RDD life before
xHarbour started) and for this whole time the result and size returned by
GetField*() were ignored in ADS RDD. It was not critical as long as only
fields with fixed size were used.

best regards,
Przemek
From vailtom at gmail.com  Thu May 14 20:02:50 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Thu May 14 21:01:07 2009
Subject: [Fwd: Re: [Harbour] Problem with return of LoadLibrary and 
	Harbour 11047]
In-Reply-To: <977D0651-6B86-4308-B0BE-F761E249A4CF@syenar.hu>
References: <4A0C566C.5090406@takas.lt>
	<18d502870905141127l34a1b2al485d010336cd267a@mail.gmail.com>
	<4A0C693F.6030500@dbtopas.lt>
	<977D0651-6B86-4308-B0BE-F761E249A4CF@syenar.hu>
Message-ID: <531d7a750905141702j1a2089a5m12903c1e523509a3@mail.gmail.com>

I have much code writing using something like this:

HB_FUNC (TEST)
(
   some *pPtr;

   if (! ISPOINTER (1))
       return;

   pPtr = (add *) hb_parptr (1);
   ... more code here
)

As I understand it then from now on the right would add a further validation as:

HB_FUNC (TEST)
(
   some *pPtr;

   if (! ISPOINTER (1))
      return;

   pPtr = (add *) hb_parptr (1);

   if (! pPtr)
      return;

   ... more code here
)

Brgds,
Vailton Renato
From vailtom at gmail.com  Thu May 14 20:02:54 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Thu May 14 21:01:12 2009
Subject: [Fwd: Re: [Harbour] Problem with return of LoadLibrary and 
	Harbour 11047]
In-Reply-To: <977D0651-6B86-4308-B0BE-F761E249A4CF@syenar.hu>
References: <4A0C566C.5090406@takas.lt>
	<18d502870905141127l34a1b2al485d010336cd267a@mail.gmail.com>
	<4A0C693F.6030500@dbtopas.lt>
	<977D0651-6B86-4308-B0BE-F761E249A4CF@syenar.hu>
Message-ID: <531d7a750905141702l7e595dccyc8a09d16fb0c08bc@mail.gmail.com>

I have much code writing using something like this:

HB_FUNC (TEST)
(
   some *pPtr;

   if (! ISPOINTER (1))
       return;

   pPtr = (add *) hb_parptr (1);
   ... more code here
)

As I understand it then from now on the right would add a further validation as:

HB_FUNC (TEST)
(
   some *pPtr;

   if (! ISPOINTER (1))
      return;

   pPtr = (add *) hb_parptr (1);

   if (! pPtr)
      return;

   ... more code here
)

Brgds,
Vailton Renato
From cigcor at hotmail.com  Thu May 14 21:07:45 2009
From: cigcor at hotmail.com (=?iso-8859-1?Q?S=E9rgio_Kondo?=)
Date: Thu May 14 22:13:43 2009
Subject: [Harbour] Mini-tutorial MySQL connection
In-Reply-To: <609353e70905132359s68bd822x5dd8f612f867dbf9@mail.gmail.com>
References: <20090513151519.68E98680846A@eva104.dadanet.it>
	<COL103-DS751F1E1A097CECE2A2D52DC5E0@phx.gbl>
	<609353e70905132359s68bd822x5dd8f612f867dbf9@mail.gmail.com>
Message-ID: <COL103-DS4340ABD4FD38E5DD5DB62DC5F0@phx.gbl>

Thanks Massimo!
Another question: RDDSQL for MySQL also need MyODBC?
S?rgio
--------------------------------------------------
From: "Massimo Belgrano" <mbelgrano@deltain.it>
Sent: Thursday, May 14, 2009 3:59 AM
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Subject: Re: [Harbour] Mini-tutorial MySQL connection

> ADO like ODBC need a driver in each client
>
>
> 2009/5/14 S?rgio Kondo <cigcor@hotmail.com>:
>> Hi,
>> ADORDD need MyODBC in all Client?
>> Thanks
>> S?rgio
>>
>>
>> From: calimero22@freemail.it
>> Sent: Wednesday, May 13, 2009 12:15 PM
>> To: harbour@harbour-project.org ; harbour@harbour-project.org
>> Subject: [Harbour] Mini-tutorial MySQL connection
>>
>> MINI-TUTORIAL TO CONNECT HARBOUR PROGRAM WITH MYSQL DB
>>
>> Here's my little and nice tutorial about connection
>> between a local Harbour program AND a remote MySQL Database.
>>
>> by GIOVANNI DI MARIA
>>
>> Follow the following steps:
>> ====================================
>>
>> 1) You need a mysql server (local or remote).
>>    I use the remote service www.db4free.net.
>>
>> 2) Create the database on the server.
>>
>> 3) Create the table on this database.
>>
>> 4) Create some column on this table.
>>
>> 5) Download and install the connector
>> "mysql-connector-odbc-3.51.27-win32.msi".
>> Don't create ANY DSN!
>>
>> 6) Write and compile the following harbour program:
>>
>> #include "adordd.ch"
>> REQUEST ADORDD
>> function Main()
>>    clear screen
>>    setmode(25,80)
>>    USE DatabaseName VIA "ADORDD" TABLE "TableName" MYSQL FROM 
>> "db4free.net"
>> USER "username" PASSWORD "password"
>>    dbedit()
>>    USE
>>    clear screen
>> return nil
>>
>> 7) Compile it with hbmk2 program.prg rddado.lib hbbin.lib
>>
>> 8) Run it and ENJOY!!
>>
>> ====================================
>>
>>
>>
>>
>> --- Dada Music Movement, tutta la musica che vuoi! ---
>>
>> ________________________________
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>
>
>
>
> -- 
> Massimo Belgrano
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
From dbtopas at dbtopas.lt  Fri May 15 02:36:54 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri May 15 03:21:21 2009
Subject: [Harbour] Mini-tutorial MySQL connection
In-Reply-To: <COL103-DS4340ABD4FD38E5DD5DB62DC5F0@phx.gbl>
References: <20090513151519.68E98680846A@eva104.dadanet.it>	<COL103-DS751F1E1A097CECE2A2D52DC5E0@phx.gbl>	<609353e70905132359s68bd822x5dd8f612f867dbf9@mail.gmail.com>
	<COL103-DS4340ABD4FD38E5DD5DB62DC5F0@phx.gbl>
Message-ID: <4A0D0D86.5040005@dbtopas.lt>

S?rgio Kondo wrote:
> Another question: RDDSQL for MySQL also need MyODBC?

No, it uses native client library.


Regards,
Mindaugas
From harbour.01 at syenar.hu  Fri May 15 02:40:42 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 15 03:27:13 2009
Subject: [Fwd: Re: [Harbour] Problem with return of LoadLibrary and 
	Harbour 11047]
In-Reply-To: <531d7a750905141702l7e595dccyc8a09d16fb0c08bc@mail.gmail.com>
References: <4A0C566C.5090406@takas.lt>
	<18d502870905141127l34a1b2al485d010336cd267a@mail.gmail.com>
	<4A0C693F.6030500@dbtopas.lt>
	<977D0651-6B86-4308-B0BE-F761E249A4CF@syenar.hu>
	<531d7a750905141702l7e595dccyc8a09d16fb0c08bc@mail.gmail.com>
Message-ID: <18d502870905142340m347fd6d0i5fa21561da3128b7@mail.gmail.com>

Hi Vailton,
Not exactly "from now on" :) rather, it's better practice, since a normal
pointer may be NULL. Even if you don't return NULL, user may pass
one to your function.

BTW, it can be even simpler by using this code:
---
HB_FUNC (TEST)
(
  some *pPtr = (add *) hb_parptr(1);

  if (! pPtr)
     return;
---

Because if param 1 isn't of pointer type, hb_parptr(1) will return NULL
anyway.

[ Here there may be a problem if user passed an array, we need
to fix this in our hb_par*() functions AFAIR. ]

Brgds,
Viktor

On Fri, May 15, 2009 at 2:02 AM, Vailton Renato <vailtom@gmail.com> wrote:

> I have much code writing using something like this:
>
> HB_FUNC (TEST)
> (
>   some *pPtr;
>
>   if (! ISPOINTER (1))
>       return;
>
>   pPtr = (add *) hb_parptr (1);
>   ... more code here
> )
>
> As I understand it then from now on the right would add a further
> validation as:
>
> HB_FUNC (TEST)
> (
>   some *pPtr;
>
>   if (! ISPOINTER (1))
>      return;
>
>   pPtr = (add *) hb_parptr (1);
>
>   if (! pPtr)
>      return;
>
>   ... more code here
> )
>
> Brgds,
> Vailton Renato
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090515/802d22ab/attachment.html
From mbelgrano at deltain.it  Fri May 15 03:01:43 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri May 15 04:04:47 2009
Subject: [Harbour] Mini-tutorial MySQL connection
In-Reply-To: <COL103-DS4340ABD4FD38E5DD5DB62DC5F0@phx.gbl>
References: <20090513151519.68E98680846A@eva104.dadanet.it> 
	<COL103-DS751F1E1A097CECE2A2D52DC5E0@phx.gbl>
	<609353e70905132359s68bd822x5dd8f612f867dbf9@mail.gmail.com> 
	<COL103-DS4340ABD4FD38E5DD5DB62DC5F0@phx.gbl>
Message-ID: <609353e70905150001k4ac1d1f4v81d72726c03130dc@mail.gmail.com>

AFAIK RDDSQL talk directly with the sql language so in not neccessary
this is message post by Mindaugas Kavaliauskas on this  list
Other capability like deleted(),recno() can be emulated adding special field
	
Code:
===================================================================
                     Simple SQL Interface for Harbour



1. Introduction

    Simple SQL interface implements accessing SQL query result via RDD
interface. It is not intended to be replacement for "transparent" move of
DBFCDX application to SQL world.

    I want to discuss this in more detail. Many current RDDs for SQL servers
(ex. SQLRDD from xHarbour.com) tries to make a feeling you are working with
DBF file, but not with SQL database. SQL server does not support many
features, ex. RECNO(), deleted flag, file locks, record locks. These RDDs
are emulating these features to make feeling of DBF. DELETED() function is
emulated by creating additional table columns to store delete flag. Some
"hidden system" tables are used to register locking operations and emulate
record and file locks in DBF style. The idea of SQL query is also lost. If
you do a simple loop

  DBUSEAREA(, "select * from my_table")
  DO WHILE ! EOF()
    somefunc( FIELD->some_sql_field )
    DBSKIP()
  ENDDO

RDD usualy will read SQL rows in portions, let's say 100 records per query.
So, hidden queries are generated. If you are using indexes these queries
are really complicated. Let's have index on FIELD1 + STR(FIELD2). A seek to
value cValue1 + STR(nValue2) will generate a query like:

  SELECT * FROM my_table
      WHERE (FIELD1 == cValue1 and FIELD2 >= nValue2) or FIELD1 > cValue1
      ORDER BY FIELD1, FIELD2, _RECNO
      LIMIT 100

After evaluation of first 100 cached records, next query will be generated:

  SELECT * FROM my_table
      WHERE (FIELD1 == cLastField1 and FIELD2 == nLastValue2 and
_RECNO > nLastRecno) or
            (FIELD1 == cLastField1 and FIELD2 > nLastValue2) or
            FIELD1 > cLastValue1
      ORDER BY FIELD1, FIELD2, _RECNO
      LIMIT 100

To optimize these queries the SQL index expresion should be
"FIELD1,FIELD2,_RECNO", but not "FIELD1,FIELD2" as written in INDEX ON
command.

    "Simple SQL interface" is too long to repeat every time I want to
address this library. I'll also use acronym "SSI" to address it.

    The idea of SSI is different. It does not make hidden queries. All
queries should be made explicitly by programmer. SSI gives access to query
result via RDD interface, it does not tries to emulate DBF and be
"plug-and-play" solution for DBF to SQL migration. If you do

  DBUSEAREA(, "select * from my_table")

all query (it could contain millions of records!) will be cached.

    The features of SSI approach are:

- It's possible to access SQL database of other applications. Other
  applications usualy does not follow agreement of "plug-and-play" SQL drivers
  about additional DELETED column, _RECNO in the end of index expression, etc.
  Access of SQL database of other applications is sometimes not possible.

- It's query oriented. That means a simple DO WHILE ! EOF() loop will iterate
  each records once and only once. This is not true for "plug-and-play" SQL
  drivers, if indexing is used. Just like in the case of loop over DBF file.
  It is not guaranteed that all records are included! Yes! If key value of the
  first record in index is changed to be the last record in index during the
  phase of record processing, DO WHILE ! EOF() loop will iterate only this
  single records even if the database contains millions of records. Your sould
  do FLOCK() on DBF to guarantee the records are not changed. Do you use FLOCK()
  before readonly DO WHILE ! EOF() loops? :)



2. Architecture


              +-------------+
              |             |
              | SQLMIX RDD  |
              |             |
              +-------------+
                   |  ^
                   V  |
              +-------------+    +---------+
              |             |--->|         |
              | SQLBASE RDD |    |   SDD   |
              |             |<---|         |
              +-------------+    +---------+


    SQLBASE RDD implements basic functionality for accessing SQL query result
via RDD interface. This RDD could be used, if indexing of query result is not
necessary or all indexing is done by SQL server (by using ORDER BY clause).

    SQLMIX RDD implements indexing of query result. This indexing is not
related to SQL server ORDER BY clause. SQLMIX do indexing of the query on the
client side.

    SDD is acronym for Sql Database Driver. RDD is used to implement access
of different database formats like DBF, SDF, etc. SDD is used to implement
access of different SQL databases. Every SQL server (MySQL, PostgreSQL, etc.)
has a corresponding SDD. SDD driver implements a specific part of data
exchange interface between SQLBASE and SQL server.

    A few additional functions are also implemented, ex. HB_SQLCONNECT().
Usualy these functions are just a shorter version of corresponding RDDINFO()
call.



3. Modifying database

    SSI presents a query result via RDD interface and generates no hidden
SQL queries. So, how database can be changed? Does DBAPPEND() and FIELDPUT()
works, or is it readonly SQL interface?
    DBAPPEND(), FIELDPUT() and other similiar functions work on cached query
result, i.e. query can be appended by new rows and field values can be
changed, but SQL database is not changed. DBCREATE() function can also be
used to create an "empty query result" but no table is created on SQL server.
So, SSI can also be used as implementation of "array RDD".
    The programmer must call SQL command explicitly to modify SQL tables.
SSI provides a method to detect which cached rows was changed or appended.

===================================================================

2009/5/15 S?rgio Kondo <cigcor@hotmail.com>:
> Thanks Massimo!
> Another question: RDDSQL for MySQL also need MyODBC?
> S?rgio
> --------------------------------------------------
> From: "Massimo Belgrano" <mbelgrano@deltain.it>
> Sent: Thursday, May 14, 2009 3:59 AM
> To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
> Subject: Re: [Harbour] Mini-tutorial MySQL connection
>
>> ADO like ODBC need a driver in each client
>>
>>
>> 2009/5/14 S?rgio Kondo <cigcor@hotmail.com>:
>>>
>>> Hi,
>>> ADORDD need MyODBC in all Client?
>>> Thanks
>>> S?rgio
>>>
>>>
>>> From: calimero22@freemail.it
>>> Sent: Wednesday, May 13, 2009 12:15 PM
>>> To: harbour@harbour-project.org ; harbour@harbour-project.org
>>> Subject: [Harbour] Mini-tutorial MySQL connection
>>>
>>> MINI-TUTORIAL TO CONNECT HARBOUR PROGRAM WITH MYSQL DB
>>>
>>> Here's my little and nice tutorial about connection
>>> between a local Harbour program AND a remote MySQL Database.
>>>
>>> by GIOVANNI DI MARIA
>>>
>>> Follow the following steps:
>>> ====================================
>>>
>>> 1) You need a mysql server (local or remote).
>>> ? I use the remote service www.db4free.net.
>>>
>>> 2) Create the database on the server.
>>>
>>> 3) Create the table on this database.
>>>
>>> 4) Create some column on this table.
>>>
>>> 5) Download and install the connector
>>> "mysql-connector-odbc-3.51.27-win32.msi".
>>> Don't create ANY DSN!
>>>
>>> 6) Write and compile the following harbour program:
>>>
>>> #include "adordd.ch"
>>> REQUEST ADORDD
>>> function Main()
>>> ? clear screen
>>> ? setmode(25,80)
>>> ? USE DatabaseName VIA "ADORDD" TABLE "TableName" MYSQL FROM
>>> "db4free.net"
>>> USER "username" PASSWORD "password"
>>> ? dbedit()
>>> ? USE
>>> ? clear screen
>>> return nil
>>>
>>> 7) Compile it with hbmk2 program.prg rddado.lib hbbin.lib
>>>
>>> 8) Run it and ENJOY!!
>>>
>>> ====================================
>>>
>>>
>>>
>>>
>>> --- Dada Music Movement, tutta la musica che vuoi! ---
>>>
>>> ________________________________
>>>
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>>
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>>
>>>
>>
>>
>>
>> --
>> Massimo Belgrano
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From jfl at mafact.com  Fri May 15 04:42:00 2009
From: jfl at mafact.com (J. Lefebvre)
Date: Fri May 15 05:42:30 2009
Subject: [Harbour] adsGetValue() return NIL
In-Reply-To: <1242337710886-2902639.post@n2.nabble.com>
Message-ID: <ab0ee9e.1c9d539.a9e681c.6e6@mafact.com>

Hi Przemek,

Since this modif, most getvalue return NIL. (ADS 8.1)

Back to older ads1.c solve the problem.

Thanks,

2009-05-14 19:20 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/rddads/ads1.c
    ! fixed minimal record buffer size calculation
    ! fixed adsGetValue() method hacked to not report errors due to too
      small field buffer.
      Warning! Now ADS RDD will report any error as RTE if sth wrong
      will happen in one of AdsGet*() function when field is read so
      it's possible that also some other hidden bugs will be exploited
      and you will see RTE. Please test it.


From druzus at acn.waw.pl  Fri May 15 05:22:57 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri May 15 06:11:48 2009
Subject: [Fwd: Re: [Harbour] Problem with return of LoadLibrary and
	Harbour 11047]
In-Reply-To: <4A0C693F.6030500@dbtopas.lt>
References: <4A0C566C.5090406@takas.lt>
	<18d502870905141127l34a1b2al485d010336cd267a@mail.gmail.com>
	<4A0C693F.6030500@dbtopas.lt>
Message-ID: <20090515092257.GA23705@uran.home.aster.pl>

On Thu, 14 May 2009, Mindaugas Kavaliauskas wrote:

Hi,

> We can not return empty collectible pointer! So, simple NULL pointer 
> instead of collectible is also a kind of different type. Well, both has 
> VALTYPE() == "P", but in C code it looks like different type:

Exactly and personally I prefer NIL.

> All above does not mean we need NIL instead of NULL pointer, but difference 
> is minor. Sometimes it is even better to have NIL, for example: printed 
> error log is more clear if you see NIL as parameter instead of <POINTER> 
> parameter, if we do not see pointer value explicitly.

Good argument though the visualization can be easy extended, f.e. to sth
like <NULL> and <POINTER> or even <0x00000000> and <0xDEADBEAF>.

> One of the reason why I am writing this letter without having the strong 
> opinion NIL vs. NULL is future extension of pointers. Przemek has some 
> ideas about extending pointers to support methods. Maybe EMPTY() should be 
> a kind of overloadable method/operator and every class (including pointers) 
> can have EMPTY() overloaded. This gives possibility to test EMPTY() for 
> varios classes/pointer. In this case we can use return value of exactly 
> same type. So, one more vote "EMPTY()".

Yes, we can add such functionality. I haven't added classes for pointer
items yet because I still looking for a method to mix them with classes
using array items and to add some other OOP functionality like inheritance.
So far without big success :-(
So now I can add it but I'll have to block any inheritance from such
classes.
The idea of using EMPTY() was introduce for code which was using
pointers as number items so it can be later adopted to pointers/NIL
item without any code modifications, f.e. code like:
   hVal := GetResource(...)
   if hVal != 0
      [do sth]
   endif

gives RTE if user replace adress returned in numeric item by pointer item
but code like:
   hVal := GetResource(...)
   if !empty( hVal )
      [do sth]
   endif
works in both cases.

> Summary: I would be nice, if we can see (or think about) a future 
> extensions to decide some "no important" things like NIL vs. NULL today.

Personally I prefer NIL as long as returning some dummy collectible pointer
item does not give additional important functionality, f.e. it will store
error code. But it's a different case in the sense of testing results because
user cannot compare to NIL or call EMPTY() but have to use dedicated function
like hb_inetError() to check the result of operation.
Please also remember that test for NIL works for any types so if we agree
such behavior then code like:

   hVal := GetResource(...)
   if hVal != NIL
      [do sth]
   endif

will also work and it's the fastest one. The next thing is catching RTE.
If GetResource(...) generates RTE instead of returning NIL then code like:

   begin sequence with {||break()}
      hVal := GetResource(...)
   endsequence
   if hVal != NIL
      [do sth]
   endif

also works if hVal has been not initialized so far.

best regards,
Przemek
From druzus at acn.waw.pl  Fri May 15 06:06:50 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri May 15 07:03:03 2009
Subject: [Harbour] adsGetValue() return NIL
In-Reply-To: <ab0ee9e.1c9d539.a9e681c.6e6@mafact.com>
References: <1242337710886-2902639.post@n2.nabble.com>
	<ab0ee9e.1c9d539.a9e681c.6e6@mafact.com>
Message-ID: <20090515100650.GA20210@uran.home.aster.pl>

On Fri, 15 May 2009, J. Lefebvre wrote:

Hi,

> Since this modif, most getvalue return NIL. (ADS 8.1)
> Back to older ads1.c solve the problem.

Please try it after:

2009-05-15 12:03 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/rddads/ads1.c
    ! fixed typo in recent modification which caused that character fields
      at EOF position were not returned
From vszakats at users.sourceforge.net  Fri May 15 06:39:59 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 15 07:32:27 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11054] trunk/harbour
Message-ID: <E1M4upb-0002MD-Sb@bj8yhf1.ch3.sourceforge.com>

Revision: 11054
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11054&view=rev
Author:   vszakats
Date:     2009-05-15 10:39:59 +0000 (Fri, 15 May 2009)

Log Message:
-----------
2009-05-15 12:36 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    % Changed default way of updating .po files. New method supports
      incremental updates, thus much faster than previous solution.
      As a side-effect, removed from source and changed translatable
      strings won't automatically disappear from .po files.
      This new method is also much friendlier to version control
      systems, as .po entry order won't change on each minor update
      (and generate a huge commit diff).
    + Added -rebuildpo option to activate a complete rebuild of .po
      files, clearing all no more existing entries. This operation 
      will take more time, will create big diffs and it's recommended 
      to be done when doing a complete rebuild (maybe this will 
      be automatically enforced later on).
    ; With this, hbmk2 seems feature complete. (maybe C++/C mode
      switching could be added yet, it's on the TODO list)

  * bin/hb-func.sh
    * Addition of libs= entry in hbmk.cfg file will now be
      initiated by setting envvar HB_USER_LIBS_DEF (was HB_USER_LIBS),
      to avoid potential binary build problems where locally
      set HB_USER_LIBS envvar could create an unusuable (on other
      systems) builds (hbmk2 setup).

  + contrib/rddsql/readme.txt
    + Added readme (posted on the list). Work of Mindaugas.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/hb-func.sh
    trunk/harbour/utils/hbmk2/hbmk2.prg

Added Paths:
-----------
    trunk/harbour/contrib/rddsql/readme.txt


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Fri May 15 06:57:24 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Fri May 15 07:56:31 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11055] trunk/harbour
Message-ID: <E1M4v6S-0008QP-QU@d5vjzd1.ch3.sourceforge.com>

Revision: 11055
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11055&view=rev
Author:   druzus
Date:     2009-05-15 10:57:13 +0000 (Fri, 15 May 2009)

Log Message:
-----------
2009-05-15 13:05 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/pp/hbpp.c
    ! fixed -q2 parameter in hbpp

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/pp/hbpp.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From mbelgrano at deltain.it  Fri May 15 08:21:23 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri May 15 09:17:07 2009
Subject: [Harbour] Mini-tutorial MySQL connection
In-Reply-To: <4A0D0D86.5040005@dbtopas.lt>
References: <20090513151519.68E98680846A@eva104.dadanet.it> 
	<COL103-DS751F1E1A097CECE2A2D52DC5E0@phx.gbl>
	<609353e70905132359s68bd822x5dd8f612f867dbf9@mail.gmail.com> 
	<COL103-DS4340ABD4FD38E5DD5DB62DC5F0@phx.gbl>
	<4A0D0D86.5040005@dbtopas.lt>
Message-ID: <609353e70905150521g7517ea85jc3f3528918491d66@mail.gmail.com>

Can you share more sample regarding rddsql?

2009/5/15 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>:
> S?rgio Kondo wrote:
>>
>> Another question: RDDSQL for MySQL also need MyODBC?
>
> No, it uses native client library.
>
>
> Regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From rportnoff at spendmap.com  Fri May 15 09:17:37 2009
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Fri May 15 10:28:10 2009
Subject: [Harbour] Bug in ADS (v1.0.1)
In-Reply-To: <4A0C68BE.6090302@shaw.ca>
References: <1242242430411-2886000.post@n2.nabble.com>
	<20090513222014.GB29975@uran.home.aster.pl>
	<4A0C3CDB.2060501@shaw.ca> <4A0C51A8.9020600@dbtopas.lt>
	<4A0C68BE.6090302@shaw.ca>
Message-ID: <B0088378498@ms1.3peaks.com>

Hi all,

Will this ADS bug also be fixed in the stable build (v1.0.1)?

Regards,
Randy.


From mbelgrano at deltain.it  Fri May 15 11:38:18 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri May 15 12:39:04 2009
Subject: [Harbour] Mini-tutorial MySQL connection
In-Reply-To: <4A0D0D86.5040005@dbtopas.lt>
References: <20090513151519.68E98680846A@eva104.dadanet.it> 
	<COL103-DS751F1E1A097CECE2A2D52DC5E0@phx.gbl>
	<609353e70905132359s68bd822x5dd8f612f867dbf9@mail.gmail.com> 
	<COL103-DS4340ABD4FD38E5DD5DB62DC5F0@phx.gbl>
	<4A0D0D86.5040005@dbtopas.lt>
Message-ID: <609353e70905150838s7bfac5b3p3f81898b3a140614@mail.gmail.com>

Compiling with hbmk2 test1.prg the file sqlrdd\tests\test1.prg
i receive  error cannot find  -lsddfb?


2009/5/15 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>:
> S?rgio Kondo wrote:
>>
>> Another question: RDDSQL for MySQL also need MyODBC?
>
> No, it uses native client library.
>
>
> Regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From vszakats at users.sourceforge.net  Fri May 15 11:42:20 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 15 12:41:49 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11060] trunk/harbour
Message-ID: <E1M4zYC-0002Mv-IY@bj8yhf1.ch3.sourceforge.com>

Revision: 11060
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11060&view=rev
Author:   vszakats
Date:     2009-05-15 15:42:19 +0000 (Fri, 15 May 2009)

Log Message:
-----------
2009-05-15 17:41 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed incremental .hbl generation not using the whole 
      list of .po's as input.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From jfl at mafact.com  Fri May 15 11:46:00 2009
From: jfl at mafact.com (J. Lefebvre)
Date: Fri May 15 12:48:01 2009
Subject: [Harbour] adsGetValue() return NIL
In-Reply-To: <20090515100650.GA20210@uran.home.aster.pl>
Message-ID: <41e2141c.1c9d574.c227aca.1d7d@mafact.com>

Solved,

Thanks,

JF,

-----Message d'origine-----
De?: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] De la part de Przemyslaw Czerpak
Envoy??: vendredi 15 mai 2009 12:07
??: Harbour Project Main Developer List.
Objet?: Re: [Harbour] adsGetValue() return NIL

On Fri, 15 May 2009, J. Lefebvre wrote:

Hi,

> Since this modif, most getvalue return NIL. (ADS 8.1)
> Back to older ads1.c solve the problem.

Please try it after:

2009-05-15 12:03 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/rddads/ads1.c
    ! fixed typo in recent modification which caused that character fields
      at EOF position were not returned
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From vszakats at users.sourceforge.net  Fri May 15 13:06:27 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 15 14:03:53 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11061] trunk/harbour
Message-ID: <E1M50rb-0004hB-U7@bj8yhf1.ch3.sourceforge.com>

Revision: 11061
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11061&view=rev
Author:   vszakats
Date:     2009-05-15 17:06:27 +0000 (Fri, 15 May 2009)

Log Message:
-----------
2009-05-15 19:05 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Fix to prev commit.
    ! Fix ignoring .po input without a language macro when
      checking .hbl dependencies.
    ! Cosmetic fix to some i18n related outputs.
    ! Fixed recent RTE when generating .hbl.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From gvarona at ec-red.com  Fri May 15 14:12:18 2009
From: gvarona at ec-red.com (gvarona)
Date: Fri May 15 15:13:23 2009
Subject: [Harbour] How to capture keypress ALT?
Message-ID: <20090515181218.31841.qmail@ml110b.qnet.com.pe>

Is it possible? 

TIA 

Best Regards
GVS
---------------------------------------------------------------
EC Red Internet gr@tis
Inscr?bete en www.ec-red.com
From bedipritpal at hotmail.com  Fri May 15 20:25:56 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri May 15 21:25:47 2009
Subject: [Harbour] MemoEdit() Patch to avoid recursive calls in endless
	loop.
In-Reply-To: <4A0B1E4E.2060802@gmail.com>
References: <4A0B1E4E.2060802@gmail.com>
Message-ID: <23569153.post@talk.nabble.com>


Hello Xavi


Xavi-13 wrote:
> 
> Procedure Main()
>      MemoEdit( 'Please press F2 abc...', 0, 0, MaxRow(), MaxCol(), .F.,
> 'FunCtr' )
> 

Thanks for this patch.

Now application does not terminate but another 
issue has come up as:

MemoEdit( 'Please press F2 abc...', 0, 0, MaxRow(), MaxCol(), .F., 'FunCtr'
)

Function FunCtr( nMode, nRow, nCol )

nMode is first ME_INIT and next always ME_IDLE. 
So application never reaches next to ME_IDLE.
Probably every keypress should send ME_KEY/ME_UNKEY
first then ME_IDLE.

As you are now more into this code, can you look into?

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/MemoEdit%28%29-Patch-to-avoid-recursive-calls-in-endless-loop.-tp23529253p23569153.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From abe.buch at att.net  Thu May 14 12:51:58 2009
From: abe.buch at att.net (AbeB)
Date: Sat May 16 00:51:26 2009
Subject: [Harbour] Bug in ADS
In-Reply-To: <20090513231643.GA9994@uran.home.aster.pl>
References: <1242242430411-2886000.post@n2.nabble.com>
	<29c193f769dd6de36df14cec9dbf5d22@viaopen.com>
	<20090513231643.GA9994@uran.home.aster.pl>
Message-ID: <1242319918132-2895272.post@n2.nabble.com>


Thanks, it's good now
I had the problem with 7.0 ace32.dll
interesting though is, that linking with an older rddads.lib I had from
around 12/25/08 it seemed to be OK!


Przemyslaw Czerpak wrote:
> 
> On Wed, 13 May 2009, fmancera@viaopen.com wrote:
> 
> Hi,
> 
>> I had that problem. I solved using the latest ADS 9.10 SDK.
> 
> Thanks for the information. So it's already fixed.
> Can someone who has older ACE libraries check if the problem is local to
> version 9.00 and does not exist in 8.10 and/or in older versions?
> 
> I've just added workaround for this problem to our ADS RDD code but
> if possible I would like to reduce it by #if to exact version of
> libraries which need it.
> In next commit I'll cover the workaround code by
>    #if ADS_LIB_VERSION == 900
> so other ACE version can be easy tested and added to above #if condition
> if necessary.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://n2.nabble.com/Bug-in-ADS-tp2886000p2895272.html
Sent from the harbour-devel mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sat May  9 13:06:32 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sat May 16 01:13:51 2009
Subject: [Harbour] Using OLE and WIN_PRN classes
In-Reply-To: <200905081952.42658.teo@windtelsoft.com>
References: <200905081952.42658.teo@windtelsoft.com>
Message-ID: <18d502870905091006me3f2d48xe06292594386e827@mail.gmail.com>

Hi Teo, not yet pls. The plan is to replace hbwin ole imp. with hbole,
until then do this but locally. Brgds, Viktor

On 5/9/09, Teo Fonrouge <teo@windtelsoft.com> wrote:
> Hello friendly Harbourians,
>
> Under "contrib" dir there are two implementations of OLE; one in "hbwin",
> and
> the other in "hbole", personally I want to use the one contained in "hbole",
> the problem is that I need to link in too the "hbwin" lib because I need to
> use the WIN_PRN printer class contained there.
>
> This results in linking phase errors showing that some functions are
> duplicated:
>
>   - hb_oleVariantToItem
>   - HB_FUN___OLEENUMNEXT
>   - HB_FUN_OLEERROR
>   - HB_FUN_GETACTIVEOBJECT
>   - HB_FUN_CREATEOBJECT
>
> Should I move the entire WIN_PRN implementation out of "hbwin" to a new
> "hbwinprn" contrib lib ?
>
>
> best regards,
>
> Teo
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From harbour.01 at syenar.hu  Tue May 12 12:23:46 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat May 16 03:22:04 2009
Subject: [Harbour] Error(2) BASE/1301 Object destructor failure: Reference
	to freed block
In-Reply-To: <20090511185224.GA19554@uran.home.aster.pl>
References: <18d502870905111015u17d365eel4aba394dd55ada86@mail.gmail.com>
	<20090511185224.GA19554@uran.home.aster.pl>
Message-ID: <F35F93A4-53D3-4F2A-A114-24E94662F015@syenar.hu>

Thanks Przemek. I'll keep an open eye, my C code is
now really bare bones (and only 100K) and reviewed
to death, but maybe there's something in it still.
Will try to collect more info and review along your
suggestions.

Brgds,
Viktor

On 2009.05.11., at 20:52, Przemyslaw Czerpak wrote:

> On Mon, 11 May 2009, Szak?ts Viktor wrote:
>
> Hi,
>
>> I just received this error in my otherwise stable app:
>> Error(2) BASE/1301 Object destructor failure: Reference to freed  
>> block
>> Then it gave an MSVC RTL error message, finally a
>> regular app crash (but without logs).
>> This happened with an MSVC 2005 build, rev 10222, in
>> an hb_idleSleep() call, after leaving the app running for
>> hours, most of the time idling with a screen saver and
>> playing with it for a few minutes. The error happened
>> when trying to exit to idle app. This also means I cannot
>> create a small example to replicate the error.
>> Is there anything I can do to track this down, or other
>> ideas why could this happen?
>> [ The app uses some private C code, but only simple
>> function calls and it also does some GC collected
>> allocations in gauge/file viewer functionality. ]
>
> hb_idleSleep() can activate the GC so it can be shown in call stack
> but the problem is not in this function but somewhere else, probably
> in your local code but I can only guess. Harbour counts all GC  
> allocations
> and deallocations and if they are not equal or when destructor  
> reattach
> destroyed block to known item which is not destroyed in the same pass
> then above RT error message is generated.
> It can be caused by stupid typo like dummy hb_gcAlloc() call without
> attaching the result to know for HVM HB_ITEM, f.e.:
>
>   proc main()
>      f()
>      hb_idleReset(); hb_idleSleep(1)
>   return
>   #pragma begindump
>   #include "hbapi.h"
>   HB_FUNC_STATIC( F ) { hb_gcAlloc( 10, NULL ); }
>   #pragma enddump
>
> or it can be sth more serious like result of some memory corruption,  
> f.e.:
>
>   proc main()
>      f( {} )
>      hb_idleReset(); hb_idleSleep(1)
>   return
>   #pragma begindump
>   #include "hbapi.h"
>   HB_FUNC_STATIC( F )
>   {
>      PHB_ITEM pItem = hb_param( 1, HB_IT_ANY );
>      /* simulate memory corruption */
>      memset( pItem, 0, 4 );
>   }
>   #pragma enddump
>
>
> What exactly happen in you case I do not know. I can only tell you  
> that
> one memory blocks allocated by hb_gcAlloc():
>   1. was not attached to know item at all
> or:
>   2. it was reused and attached to new item after destroy  
> (hb_gcFree())
> or:
>   3. the reference counter to such memory block (or item which kept  
> such
>      reference counter) had been corrupted (overwritten) by some  
> buggy code.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sat May 16 03:18:30 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sat May 16 03:49:15 2009
Subject: [Harbour] List problems still
Message-ID: <18d502870905160018m47411c09j7aca084e52611a31@mail.gmail.com>

Hi Phil and All,
We're still having apparently serious mailing list problems, some
mails didn't yet arrive from two days ago. (I'm getting two copies
of all commit mails, one directly from sf.net, one via the list, so
it's easy to see). Unfortunately we don't know what else mails we
are missing. Mails are also arriving out of order. This is so since
more than a week.

It makes coop very difficult... Phil, could you check what's happening?

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090516/aeaa57a0/attachment.html
From harbour.01 at syenar.hu  Wed May 13 11:11:38 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sat May 16 04:35:59 2009
Subject: [Harbour] Error(2) BASE/1301 Object destructor failure: Reference
	to freed block
In-Reply-To: <20090511185224.GA19554@uran.home.aster.pl>
References: <18d502870905111015u17d365eel4aba394dd55ada86@mail.gmail.com>
	<20090511185224.GA19554@uran.home.aster.pl>
Message-ID: <18d502870905130811j6a99fed1pd0adc056a3f6fb01@mail.gmail.com>

Hi Przemek,
I can now consistently replicate the problem with latest Harbour
build, smaller app, also with MinGW and under Linux/gcc. Now I'm doing tests
with valgrind, but it doesn't signal anything interesting.

Can you suggest a valgrind command line which could help
locating such problem? or any non-valgrind method?

Brgds,
Viktor

On Mon, May 11, 2009 at 8:52 PM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:

> On Mon, 11 May 2009, Szak?ts Viktor wrote:
>
> Hi,
>
> > I just received this error in my otherwise stable app:
> > Error(2) BASE/1301 Object destructor failure: Reference to freed block
> > Then it gave an MSVC RTL error message, finally a
> > regular app crash (but without logs).
> > This happened with an MSVC 2005 build, rev 10222, in
> > an hb_idleSleep() call, after leaving the app running for
> > hours, most of the time idling with a screen saver and
> > playing with it for a few minutes. The error happened
> > when trying to exit to idle app. This also means I cannot
> > create a small example to replicate the error.
> > Is there anything I can do to track this down, or other
> > ideas why could this happen?
> > [ The app uses some private C code, but only simple
> > function calls and it also does some GC collected
> > allocations in gauge/file viewer functionality. ]
>
> hb_idleSleep() can activate the GC so it can be shown in call stack
> but the problem is not in this function but somewhere else, probably
> in your local code but I can only guess. Harbour counts all GC allocations
> and deallocations and if they are not equal or when destructor reattach
> destroyed block to known item which is not destroyed in the same pass
> then above RT error message is generated.
> It can be caused by stupid typo like dummy hb_gcAlloc() call without
> attaching the result to know for HVM HB_ITEM, f.e.:
>
>   proc main()
>      f()
>      hb_idleReset(); hb_idleSleep(1)
>   return
>   #pragma begindump
>   #include "hbapi.h"
>   HB_FUNC_STATIC( F ) { hb_gcAlloc( 10, NULL ); }
>   #pragma enddump
>
> or it can be sth more serious like result of some memory corruption, f.e.:
>
>   proc main()
>      f( {} )
>      hb_idleReset(); hb_idleSleep(1)
>   return
>   #pragma begindump
>   #include "hbapi.h"
>   HB_FUNC_STATIC( F )
>   {
>      PHB_ITEM pItem = hb_param( 1, HB_IT_ANY );
>      /* simulate memory corruption */
>      memset( pItem, 0, 4 );
>   }
>   #pragma enddump
>
>
> What exactly happen in you case I do not know. I can only tell you that
> one memory blocks allocated by hb_gcAlloc():
>   1. was not attached to know item at all
> or:
>   2. it was reused and attached to new item after destroy (hb_gcFree())
> or:
>   3. the reference counter to such memory block (or item which kept such
>      reference counter) had been corrupted (overwritten) by some buggy
> code.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090513/b65bef65/attachment-0001.html
From harbour.01 at syenar.hu  Thu May 14 14:03:07 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat May 16 04:40:10 2009
Subject: [Harbour] Re: SF.net SVN: harbour-project:[11050] trunk/harbour
In-Reply-To: <E1M4eTv-0003Pd-IF@c3vjzd1.ch3.sourceforge.com>
References: <E1M4eTv-0003Pd-IF@c3vjzd1.ch3.sourceforge.com>
Message-ID: <3DB9C6C8-3240-48D8-9FE0-1F38E4F72FF9@syenar.hu>

Hi Przemek,

> 2009-05-14 19:20 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/bin/hb-func.sh
>    * respect HB_USER_LIBS creating hbmk.cfg

Is this for sure what you intented? I'm asking because
this way someone building Harbour while having HB_USER_LIBS
set (which may contain any local libs), will be hard
coded into the final distribution. This could still be okay,
although builders will now have to take care of clearing this
envvar before creating a public release, I expect someone
will forget it. At the same time, hbmk2 will pick envvar
HB_USER_LIBS anyway, so I'm not sure it's necessary to have
it hard coded also in hbmk.cfg, unless you want to create
an internal distro with some extra bundled libs.

To have the same end-result without such side-effect,
maybe reading a different envvar at build time would be
better, like HB_USER_EXTRA_LIBS, HB_USER_DEF_LIBS or similar.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Fri May 15 03:40:40 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat May 16 04:45:02 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11052] trunk/harbour
Message-ID: <E1M4s24-0005ya-FQ@bj8yhf1.ch3.sourceforge.com>

Revision: 11052
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11052&view=rev
Author:   vszakats
Date:     2009-05-15 07:40:39 +0000 (Fri, 15 May 2009)

Log Message:
-----------
2009-05-15 09:21 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + Using HB_USERLANG() to detect language, so it now also
      works on Windows.
    + Added support for -lang= switch to override language.
    + Added support for HB_LANG envvar to override language.
      (this is the recommended method)

  * include/hbextern.ch
  * source/rtl/Makefile
  + source/rtl/lang.c
    + Added HB_USERLANG() function to retrieve ietf code of
      language set by user. Works also on Windows.

  * contrib/hbwin/win_misc.c
  * contrib/hbwin/wapi_winbase.c
  * contrib/hbwin/wapi_winuser.c
    * WAPI_*() functions moved to wapi_* files.
    + WAPI_GETPROCADDRESS() added. This is a pure wrapper to
      this Windows API.

  * contrib/hbwin/win_prn1.c
  * contrib/hbwin/win_prt.c
    % hb_parnl() -> hb_parni() where it was cast to int anyway.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/wapi_winbase.c
    trunk/harbour/contrib/hbwin/wapi_winuser.c
    trunk/harbour/contrib/hbwin/win_misc.c
    trunk/harbour/contrib/hbwin/win_prn1.c
    trunk/harbour/contrib/hbwin/win_prt.c
    trunk/harbour/include/hbextern.ch
    trunk/harbour/source/rtl/Makefile
    trunk/harbour/utils/hbmk2/hbmk2.prg

Added Paths:
-----------
    trunk/harbour/source/rtl/lang.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From abe.buch at att.net  Thu May  7 19:20:34 2009
From: abe.buch at att.net (AbeB)
Date: Sat May 16 04:48:39 2009
Subject: [Harbour] can't make wcecon.prg with latest SVN
Message-ID: <1241738434429-2840995.post@n2.nabble.com>


$ hbcemk wcecon
Harbour 1.1.0dev (Rev. 10671)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 'wcecon.prg'...
Lines 284, Functions/Procedures 2
Generating C source output to 'wcecon.c'... Done.
./wcecon.o:wcecon.c:(.text+0xc): undefined reference to `hb_vmExecute'
./wcecon.o:wcecon.c:(.text+0x24): undefined reference to `hb_vmExecute'
./wcecon.o:wcecon.c:(.text+0x50): undefined reference to
`hb_vmProcessSymbolsEx'
./wcecon.o:wcecon.c:(.data+0x2c): undefined reference to `HB_FUN_HB_GTINFO'
./wcecon.o:wcecon.c:(.data+0x3c): undefined reference to
`HB_FUN_HB_SETCODEPAGE'
./wcecon.o:wcecon.c:(.data+0x4c): undefined reference to
`HB_FUN_HB_SETTERMCP'
./wcecon.o:wcecon.c:(.data+0x5c): undefined reference to `HB_FUN_SETMODE'
./wcecon.o:wcecon.c:(.data+0x6c): undefined reference to `HB_FUN_QOUT'
./wcecon.o:wcecon.c:(.data+0x7c): undefined reference to `HB_FUN_LTRIM'
./wcecon.o:wcecon.c:(.data+0x8c): undefined reference to `HB_FUN_STR'
./wcecon.o:wcecon.c:(.data+0x9c): undefined reference to `HB_FUN_MAXROW'
./wcecon.o:wcecon.c:(.data+0xac): undefined reference to `HB_FUN_MAXCOL'
./wcecon.o:wcecon.c:(.data+0xbc): undefined reference to `HB_FUN_INKEY'
./wcecon.o:wcecon.c:(.data+0xcc): undefined reference to `HB_FUN_ALERT'
./wcecon.o:wcecon.c:(.data+0xdc): undefined reference to `HB_FUN_OS'
./wcecon.o:wcecon.c:(.data+0xec): undefined reference to `HB_FUN_VERSION'
./wcecon.o:wcecon.c:(.data+0xfc): undefined reference to
`HB_FUN_HB_GTVERSION'
./wcecon.o:wcecon.c:(.data+0x10c): undefined reference to
`HB_FUN_HB_FNAMESPLIT'
./wcecon.o:wcecon.c:(.data+0x11c): undefined reference to `HB_FUN_HB_ARGV'
./wcecon.o:wcecon.c:(.data+0x12c): undefined reference to
`HB_FUN_HB_OSPATHSEPARATOR'
./wcecon.o:wcecon.c:(.data+0x13c): undefined reference to
`HB_FUN_RDDSETDEFAULT'
./wcecon.o:wcecon.c:(.data+0x14c): undefined reference to
`HB_FUN_HB_DIREXISTS'
./wcecon.o:wcecon.c:(.data+0x15c): undefined reference to `HB_FUN_MAKEDIR'
./wcecon.o:wcecon.c:(.data+0x16c): undefined reference to `HB_FUN_DBCREATE'
./wcecon.o:wcecon.c:(.data+0x17c): undefined reference to `HB_FUN_DBUSEAREA'
./wcecon.o:wcecon.c:(.data+0x18c): undefined reference to
`HB_FUN_ORDCONDSET'
./wcecon.o:wcecon.c:(.data+0x19c): undefined reference to `HB_FUN_RECNO'
./wcecon.o:wcecon.c:(.data+0x1ac): undefined reference to `HB_FUN_ORDCREATE'
./wcecon.o:wcecon.c:(.data+0x1dc): undefined reference to `HB_FUN_LASTREC'
./wcecon.o:wcecon.c:(.data+0x1ec): undefined reference to `HB_FUN_DBAPPEND'
./wcecon.o:wcecon.c:(.data+0x20c): undefined reference to `HB_FUN_DBCOMMIT'
./wcecon.o:wcecon.c:(.data+0x21c): undefined reference to `HB_FUN_DBGOTOP'
./wcecon.o:wcecon.c:(.data+0x22c): undefined reference to `HB_FUN_BROWSE'
./wcecon.o:wcecon.c:(.data+0x23c): undefined reference to `HB_FUN_SCROLL'
./wcecon.o:wcecon.c:(.data+0x24c): undefined reference to `HB_FUN_SETPOS'
./wcecon.o:wcecon.c:(.data+0x25c): undefined reference to `HB_FUN_DISPOUT'
./wcecon.o:wcecon.c:(.data+0x26c): undefined reference to `HB_FUN_CHR'
./wcecon.o:wcecon.c:(.data+0x27c): undefined reference to `HB_FUN_DEVOUT'
./wcecon.o:wcecon.c:(.data+0x28c): undefined reference to `HB_FUN_DBFCDX'
/cygdrive/c/DOCUME~1/abebuch/LOCALS~1/Temp/cciEs96L.o:hb-build--1868.c:(.text+0x14):
undefined reference to `__imp_hb_gt_szNameDefault'
/cygdrive/c/DOCUME~1/abebuch/LOCALS~1/Temp/cciEs96L.o:hb-build--1868.c:(.text+0x1c):
undefined reference to `HB_FUN_HB_GT_STD'
C:/msys/1.0/local/harbourCE/lib/libhbmainwin.a(mainwin.o):mainwin.c:(.text+0x38):
undefined reference to `hb_wctomb'
C:/msys/1.0/local/harbourCE/lib/libhbmainwin.a(mainwin.o):mainwin.c:(.text+0x130):
undefined reference to `hb_xfree'
C:/msys/1.0/local/harbourCE/lib/libhbmainwin.a(mainwin.o):mainwin.c:(.text+0x140):
undefined reference to `hb_winmainArgInit'
C:/msys/1.0/local/harbourCE/lib/libhbmainwin.a(mainwin.o):mainwin.c:(.text+0x14c):
undefined reference to `hb_cmdargInit'
C:/msys/1.0/local/harbourCE/lib/libhbmainwin.a(mainwin.o):mainwin.c:(.text+0x154):
undefined reference to `hb_vmInit'
C:/msys/1.0/local/harbourCE/lib/libhbmainwin.a(mainwin.o):mainwin.c:(.text+0x158):
undefined reference to `hb_vmQuit'
collect2: ld returned 1 exit status
abebuch@LAPTOP /harbourdev/tests


-- 
View this message in context: http://n2.nabble.com/can%27t-make-wcecon.prg-with-latest-SVN-tp2840995p2840995.html
Sent from the harbour-devel mailing list archive at Nabble.com.

From alex at belacy.belgorod.su  Tue May 12 08:45:20 2009
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Sat May 16 04:53:11 2009
Subject: [Harbour] Re: hbmk2: any features still missing?
In-Reply-To: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
References: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
Message-ID: <4A096F60.8080905@belacy.belgorod.su>

Viktor Szak?ts writes:
> Hi All,
> 
> Is there any important feature still missing from hbmk2?
> 

  Yes - documentation :), at least, very basic.

Regards, Alexander.
From calimero22 at freemail.it  Wed May 13 09:07:40 2009
From: calimero22 at freemail.it (calimero22@freemail.it)
Date: Sat May 16 05:20:04 2009
Subject: [Harbour] Test
Message-ID: <20090513130740.88B486800368@eva124.dadanet.it>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090513/5b65fa63/attachment.html
From invite+zj4oc_ya9tfy at facebookmail.com  Fri May  8 19:24:45 2009
From: invite+zj4oc_ya9tfy at facebookmail.com (Vailton Renato)
Date: Sat May 16 05:20:40 2009
Subject: [Harbour] =?utf-8?q?Quero_que_voc=C3=AA_entre_no_Facebook?=
Message-ID: <570971d12a30caeb8af28e716c2e5cd3@localhost.localdomain>

Ol? Harbour@harbour-project.org,

Eu o convidei para participar do Facebook h? algum tempo e queria lembrar-lhe que assim que voc? criar sua conta, n?s poderemos manter contato quando conectados, compartilhar fotos, organizar grupos e eventos, e mais.

Atenciosamente,
Vailton

Para se cadastrar no Facebook, clique no link abaixo:
http://www.facebook.com/p.php?i=1063025811&k=Z6A5325YPZ4CUCD1QB63QVQTRWAK&r


harbour@harbour-project.org foi convidado a participar do Facebook por Vailton Renato. Caso n?o queira receber este tipo de e-mail do Facebook no futuro, clique no link a seguir para cancelar o recebimento. 
http://www.facebook.com/o.php?k=a8f1ce&u=100000002071228&mid=6ebc6bG5af31099dabcG0G8
Os escrit?rios do Facebook est?o localizados em 156 University Ave., Palo Alto, CA 94301.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090508/bf08237f/attachment.html
From bruno.luciani at gmail.com  Fri May  8 13:04:50 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Sat May 16 05:22:50 2009
Subject: [Harbour] Howto Create GTWVG contrib library in linux
Message-ID: <133778360905081004g6fdbaa5chfcd8796330d698c5@mail.gmail.com>

Which are software dependencis for this library ?

is the only library that I can' t make


Thanks in advance

Bruno


PD : the other is HBQT but I don' t know why
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090508/a1cdc458/attachment.html
From vailtom at gmail.com  Thu May 14 12:36:46 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Sat May 16 05:23:38 2009
Subject: [Harbour] Harbour nomination for sf.net best project/best dev 
	tool
In-Reply-To: <18d502870905140617p485956b4sb40a61be9421c58c@mail.gmail.com>
References: <68948A51-EE0E-4CBD-903F-025C8F49D751@syenar.hu>
	<531d7a750905140508r2bd7e05ala5699a5957c4dd30@mail.gmail.com>
	<18d502870905140617p485956b4sb40a61be9421c58c@mail.gmail.com>
Message-ID: <531d7a750905140936m7bd6b727x66fe576994eefaba@mail.gmail.com>

> I think right now we're missing page loads from sf.net stats?because
> of the missing/old link.

Where are the links so I can determine which are incorrect?
I looked quickly to sf.net and did not find any references, if anyone
knows and can tell me what I'll correct the problem promptly!
From bedipritpal at hotmail.com  Thu May 14 09:57:18 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat May 16 05:27:00 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <4A0BF369.8050804@dbtopas.lt>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
	<4A0BF369.8050804@dbtopas.lt>
Message-ID: <23541110.post@talk.nabble.com>


Hello Mindaugus


Mindaugas Kavaliauskas wrote:
> 
> We will to change at least numeric type to pointer type...
> 

Yes, but how. I am following your code but am been 
unbale to hook any code inside it because of WINAPI background.

harbour/contrib/gtwvg/wvgsink.c

   AtlAxCreateControl = ( PATLAXCREATECONTROL ) GetProcAddress( hLib,
"AtlAxCreateControl" );
   if ( AtlAxCreateControl )
   {
      hContainer = ( HWND ) CreateWindowEx( Exstyle, cClass, TEXT(""),
Style, x, y, w, h,
                                            hParent, id, GetModuleHandle(
NULL ), NULL );
      if( hContainer )
      {
         ...
         ...
         ( AtlAxCreateControl ) ( wString, hContainer, NULL, &pUnk );
         if( pUnk )
         {
            pUnk->lpVtbl->QueryInterface( pUnk, HB_ID_REF( IID_IDispatch ),
( void** ) (void*) &obj );
            pUnk->lpVtbl->Release( pUnk );
            hb_retnint( ( HB_PTRDIFF ) obj ); 
            ^^^^^^^^^^^^^^^^^^^^

This code returns a obj as a numeric handle which in turn 
is used to initialize TOleAuto() for handelling messages.

If we can either change this code or olecore implementation
then we can come close of two implementations.

Regards
Pritpal Bedi

PS. I am really poor in OLE concepts and implementations.
     I just tweaked the code forwarded by Andy Wos. So all 
     my words can be interpreted as a layman's.



-- 
View this message in context: http://www.nabble.com/Errors-with-11032-tp23521549p23541110.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From qiinfo at ig.com.br  Thu May 14 07:23:48 2009
From: qiinfo at ig.com.br (Rossine)
Date: Sat May 16 05:32:24 2009
Subject: [Harbour] Problem with TREG32 and Harbour 11047
Message-ID: <23538623.post@talk.nabble.com>


Hello,

With harbour 11047 see this errors:

[ERROR]
Application Internal Error - C:\fwh\samples\testreg3.exe
Terminated at: 2009.05.14 08:19:13
Unrecoverable error 9003: Too many recursive error handler calls
Called from ABS(0)
Called from REGOPENKEYEXA(0) in classes\reg32.prg
Called from TREG32:NEW(0) in classes\reg32.prg
Called from GETCPU(0) in function\errsysw.prg
Called from ERRORDIALOG(0) in function\errsysw.prg
Called from (b)ERRORSYS(0) in function\errsysw.prg
Called from ABS(0)
Called from REGOPENKEYEXA(0) in classes\reg32.prg
Called from TREG32:NEW(0) in classes\reg32.prg
Called from GETCPU(0) in function\errsysw.prg
Called from ERRORDIALOG(0) in function\errsysw.prg
Called from (b)ERRORSYS(0) in function\errsysw.prg
Called from ABS(0)
Called from REGOPENKEYEXA(0) in classes\reg32.prg
Called from TREG32:NEW(0) in classes\reg32.prg
Called from GETCPU(0) in function\errsysw.prg
Called from ERRORDIALOG(0) in function\errsysw.prg
Called from (b)ERRORSYS(0) in function\errsysw.prg
Called from ABS(0)
Called from REGOPENKEYEXA(0) in classes\reg32.prg
Called from TREG32:NEW(0) in classes\reg32.prg
Called from GETCPU(0) in function\errsysw.prg
Called from ERRORDIALOG(0) in function\errsysw.prg
Called from (b)ERRORSYS(0) in function\errsysw.prg
Called from ABS(0)
Called from REGOPENKEYEXA(0) in classes\reg32.prg
Called from TREG32:NEW(0) in classes\reg32.prg
Called from GETCPU(0) in function\errsysw.prg
Called from ERRORDIALOG(0) in function\errsysw.prg
Called from (b)ERRORSYS(0) in function\errsysw.prg
Called from ABS(0)
Called from REGOPENKEYEXA(0) in classes\reg32.prg
Called from TREG32:NEW(0) in classes\reg32.prg
Called from GETCPU(0) in function\errsysw.prg
Called from ERRORDIALOG(0) in function\errsysw.prg
Called from (b)ERRORSYS(0) in function\errsysw.prg
Called from ABS(0)
Called from REGOPENKEYEXA(0) in classes\reg32.prg
Called from TREG32:NEW(0) in classes\reg32.prg
Called from GETCPU(0) in function\errsysw.prg
Called from ERRORDIALOG(0) in function\errsysw.prg
Called from (b)ERRORSYS(0) in function\errsysw.prg
Called from ABS(0)
Called from REGOPENKEYEXA(0) in classes\reg32.prg
Called from TREG32:NEW(0) in classes\reg32.prg
Called from GETCPU(0) in function\errsysw.prg
Called from ERRORDIALOG(0) in function\errsysw.prg
Called from (b)ERRORSYS(0) in function\errsysw.prg
Called from ABS(0)
Called from REGOPENKEYEXA(0) in classes\reg32.prg
Called from TREG32:NEW(0) in classes\reg32.prg
Called from GETOUTLOOKPATH(7) in testreg3.prg
------------------------------------------------------------------------
[ENDERROR]

How to fix this ?

Best Regards,

Rossine.


-- 
View this message in context: http://www.nabble.com/Problem-with-TREG32-and-Harbour-11047-tp23538623p23538623.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From abe.buch at att.net  Thu May 14 11:39:41 2009
From: abe.buch at att.net (AbeB)
Date: Sat May 16 05:34:51 2009
Subject: [Harbour] Big Bug!!!! with negitive input
Message-ID: <1242315581661-2893416.post@n2.nabble.com>


try this entering -333, you'll get 33, at least this is what i get.

proc main()
local v := 0
cls
@ 10,10 get v
read
? v


-- 
View this message in context: http://n2.nabble.com/Big-Bug%21%21%21%21-with-negitive-input-tp2893416p2893416.html
Sent from the harbour-devel mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Sat May 16 04:46:29 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat May 16 05:47:19 2009
Subject: [Harbour] Xbase++ 1.90 SL1 is out and alaska go to impelement
	Pass-Through SQL to merge xBase navigational data access and SQL
Message-ID: <609353e70905160146if43031cof87cb35271b2af76@mail.gmail.com>

Alaska Software TechWire 05/2009
--------------------------------------------------------------
Featuring:

1.) Xbase++ 1.90 Service Level #1 is out!

2.) Opinion Poll: Developers Conference versus Training.

3.) Arctica: What's next?

--------------------------------------------------------------
1.) Xbase++ 1.90 Service Level #1 is out!

   First the good news: Xbase++ 1.90 SL1 has been released since
   April 21st 2009. Those of you who have not yet realized that,
   should check their customer account at www.alaska-software.com
   -> Login for more details. Xbase++ 1.90 SL1 can be downloaded
   under -> Login -> Downloads -> Latest releases.

   Remember: There are two flavours of Service Level #1!

   First, there is Xbase++ 1.90 Service Level #1; this is more
   like a new version as it includes many new features and updated
   online documentation. Xbase++ 1.90 SL1 with all the new
   features is available to Xbase++ customers who have purchased
   Xbase++ within the last 12 months and to all active
   subscription customers.

   Second, there will be Service Level #1 for Xbase++ 1.90, which
   includes existing Hotfix-Rollups, many new PDR corrections
   plus support for Windows Vista and Windows Server 2008. Service
   Level #1 will be available free of charge to any registered
   Xbase++ 1.9 customer. Since Service Level #1 is currently being
   packaged, we anticipate to release it within the next couple of
   weeks. Download location will be  -> Login -> Downloads ->
   Service Levels.

   More details about Service Level #1 can be found here:
   ftp://ftp.alaska-software.com/documents/feature-overview-v19sl1-en.pdf

   More information about our product maintenance policy can be
   found here:
   http://www.alaska-software.com/fixes/overview.shtm

   Note: Xbase++ 1.90 SL1 is a pre-requisite to join future
   technology previews.

--------------------------------------------------------------
2.)  Opinion Poll: Developers Conference versus Training.

   Since we like to be in touch with our customers, we are in the
   process of planning the next developers conferences. In doing
   so various questions have popped up, so we decided to get direct
   feedback from our customers to learn what they deem suitable
   regarding the next DevCon!

   Therefore, we would like to invite you to join in our customer
   opinion poll regarding the next developers conferences. It will
   only take a couple of minutes, and your thoughts and feedback
   will be taken into account!

   To participate, simply log onto your customer account and go
   to Feedback -> Opinion Poll. Make sure to get your vote in as
   this poll ends on Friday, May 29th, 2009.

   Note: Unfortunately there is nothing to win. However it is
   now up to you to tell us what, where, how and when you would
   like to meet others of the Xbase++ community.

   Thank you very much upfront for taking the time.

-------------------------------------------------------------
3.) Arctica: what's next?

   The product development at Alaska Software is currently preparing
   the next technology preview. According to our plans, we will start
   the Arctica related technology previews in June/July.

   We would like to invite every active Subscription customer to
   participate in this technology preview. More details about the
   different data access, SQL and client/server technologies in
   the context of this technology preview can be found here:

   www.alaska-software.com/arctica

   A detailed schedule will be released in early June, containing
   the details about how to prepare yourself. It also explains the
   different stages of this technology preview. So much said
   upfront, in this technology preview participants will learn the
   following:

   - how to migrate your existing DBF/NTX/CDX-based application
     to the PostgreSQL client/server with almost no effort.

   - how to design your application's data access and business
     logic to prepare yourself for the next decade.

   - how to make use of SQL and Universal SQL to reduce application
     complexity and to increase performance and flexibility.

   - finally participants will be able to decide which database
     technology, i.e. local files, network file-based data acces,
     client/server-based storage management, SQL or navigational
     data access, will best meet their requirements.

   This preview is not only about exciting new technologies, but it
   is also about best practice; how to make use of these
   technologies, and the traps and pitfalls involved. Hence this
   technology preview is your chance to extend your existing
   knowledge and to increase your future productivity.

   Of course, nothing is set and carved in stone as of yet. There
   are various final design decisions still to be taken. But for
   sure, this is another aspect to join this technology preview -
   ensure that your requirements are considered.

---------------------------------------------------------

-- 
Massimo Belgrano
From harbour.01 at syenar.hu  Thu May 14 11:18:33 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sat May 16 06:05:17 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <23540931.post@talk.nabble.com>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
	<23539642.post@talk.nabble.com> <23540931.post@talk.nabble.com>
Message-ID: <18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>

I've moved new ole to hbwin, because otherwise we will very very
slowly adapt to
it, since very few users would test it.

In just one day now at least we begin to have a better idea about problems,
which is good, and until things settle everyone can use the last know
revision which is compatible with all old tools, or can even revert to last
known untouched hbwin.lib alone and continue using it locally. We're in
development / unstable phase and such unstable periods are expected
and normal in such environment. Luckily we have these periods rarely,
this is one of them.

Now, back to topic, since it seems some 3rd party tools and code are
heavily relying on some wrong (well, at the time maybe only) concepts
established in the past, I'm more and more thinking of moving new
implementations to a new namespace or just simply new function
names and leaving the old ones under either some sort of compatibility
lib or compatibility names. Probably a whole hbwinold lib would be
needed to satisfy some 3rd parties. This approach could keep full
compatibility without any compromises and could give us freedom to
develop / bugfix anything at our best without being tied up with such
concerns.

So:

hbwin.lib - New implementation, with clean concepts, names, OLE, etc.
hbwinold.lib - Old implementation kept for compatibility until 3rd parties
can adapt. Code frozen.

Any opinions?

Brgds,
Viktor

On Thu, May 14, 2009 at 3:47 PM, Pritpal Bedi <bedipritpal@hotmail.com>wrote:

>
> Rossine
>
> You have to apply patch in olecore.c itself.
> You cannot club this function in #prgma begin/end
> construct. Rebuild olecore.c.
>
> Also try Przemek's refinements. May be any could help.
>
> Regards
> Pritpal Bedi
> --
> View this message in context:
> http://www.nabble.com/Errors-with-11032-tp23521549p23540931.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090514/6d1eedd1/attachment.html
From harbour.01 at syenar.hu  Wed May 13 15:42:36 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sat May 16 06:06:18 2009
Subject: [Harbour] Error(2) BASE/1301 Object destructor failure: Reference
	to freed block
In-Reply-To: <18d502870905130811j6a99fed1pd0adc056a3f6fb01@mail.gmail.com>
References: <18d502870905111015u17d365eel4aba394dd55ada86@mail.gmail.com>
	<20090511185224.GA19554@uran.home.aster.pl>
	<18d502870905130811j6a99fed1pd0adc056a3f6fb01@mail.gmail.com>
Message-ID: <18d502870905131242ifaee4a0ib079129c5629f254@mail.gmail.com>

Hi Przemek,
I could reduce the bug to this small example, important that
it only happens with -gc3:
---
PROCEDURE Main()
   LOCAL oBrowse, tmp

   dbCreate( "test.dbf", { { "FIRST", "C", 10, 0 } } )

   USE test.dbf

   oBrowse := TBrowseNew( 0, 0, MaxRow(), MaxCol() )

   oBrowse:addColumn( TBColumnNew( "FIRST", {|| FIELD->FIRST } ) )

   tmp := oBrowse:getColumn( 1 )
   tmp := oBrowse:colWidth( 1 ) + Len( oBrowse:colSep )

   RETURN
---

Result:
---
Error BASE/1301  Object destructor failure: Reference to freed block
Error BASE/1301  Object destructor failure: Reference to freed block
---

Brgds,
Viktor

On Wed, May 13, 2009 at 5:11 PM, Viktor Szak?ts <harbour.01@syenar.hu>wrote:

> Hi Przemek,
> I can now consistently replicate the problem with latest Harbour
> build, smaller app, also with MinGW and under Linux/gcc. Now I'm doing
> tests with valgrind, but it doesn't signal anything interesting.
>
> Can you suggest a valgrind command line which could help
> locating such problem? or any non-valgrind method?
>
> Brgds,
> Viktor
>
> On Mon, May 11, 2009 at 8:52 PM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:
>
>> On Mon, 11 May 2009, Szak?ts Viktor wrote:
>>
>> Hi,
>>
>> > I just received this error in my otherwise stable app:
>> > Error(2) BASE/1301 Object destructor failure: Reference to freed block
>> > Then it gave an MSVC RTL error message, finally a
>> > regular app crash (but without logs).
>> > This happened with an MSVC 2005 build, rev 10222, in
>> > an hb_idleSleep() call, after leaving the app running for
>> > hours, most of the time idling with a screen saver and
>> > playing with it for a few minutes. The error happened
>> > when trying to exit to idle app. This also means I cannot
>> > create a small example to replicate the error.
>> > Is there anything I can do to track this down, or other
>> > ideas why could this happen?
>> > [ The app uses some private C code, but only simple
>> > function calls and it also does some GC collected
>> > allocations in gauge/file viewer functionality. ]
>>
>> hb_idleSleep() can activate the GC so it can be shown in call stack
>> but the problem is not in this function but somewhere else, probably
>> in your local code but I can only guess. Harbour counts all GC allocations
>> and deallocations and if they are not equal or when destructor reattach
>> destroyed block to known item which is not destroyed in the same pass
>> then above RT error message is generated.
>> It can be caused by stupid typo like dummy hb_gcAlloc() call without
>> attaching the result to know for HVM HB_ITEM, f.e.:
>>
>>   proc main()
>>      f()
>>      hb_idleReset(); hb_idleSleep(1)
>>   return
>>   #pragma begindump
>>   #include "hbapi.h"
>>   HB_FUNC_STATIC( F ) { hb_gcAlloc( 10, NULL ); }
>>   #pragma enddump
>>
>> or it can be sth more serious like result of some memory corruption, f.e.:
>>
>>   proc main()
>>      f( {} )
>>      hb_idleReset(); hb_idleSleep(1)
>>   return
>>   #pragma begindump
>>   #include "hbapi.h"
>>   HB_FUNC_STATIC( F )
>>   {
>>      PHB_ITEM pItem = hb_param( 1, HB_IT_ANY );
>>      /* simulate memory corruption */
>>      memset( pItem, 0, 4 );
>>   }
>>   #pragma enddump
>>
>>
>> What exactly happen in you case I do not know. I can only tell you that
>> one memory blocks allocated by hb_gcAlloc():
>>   1. was not attached to know item at all
>> or:
>>   2. it was reused and attached to new item after destroy (hb_gcFree())
>> or:
>>   3. the reference counter to such memory block (or item which kept such
>>      reference counter) had been corrupted (overwritten) by some buggy
>> code.
>>
>> best regards,
>> Przemek
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090513/21f0d19d/attachment-0001.html
From mbelgrano at deltain.it  Sat May 16 05:22:58 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat May 16 06:08:44 2009
Subject: [Harbour] List problems still
In-Reply-To: <18d502870905160018m47411c09j7aca084e52611a31@mail.gmail.com>
References: <18d502870905160018m47411c09j7aca084e52611a31@mail.gmail.com>
Message-ID: <609353e70905160222x121107ccnb451932d7ae505b9@mail.gmail.com>

Can be evalutated moving mailing  to google or yhaoo group?
 it can be accessible hrough the web interface, or by e-mail.
 it have better attachment management
 For example for gogole group you can visit  Discuss developing
Android applications using the Android framework (Member: 18000
Messages: 55000)
http://groups.google.com/group/android-developers?lnk=


Naturally thanks to Phil for his effort

2009/5/16 Viktor Szak?ts <harbour.01@syenar.hu>:
> Hi Phil and All,
> We're still having apparently serious mailing list problems, some
> mails didn't yet arrive from two days ago. (I'm getting two copies
> of all commit mails, one directly from sf.net, one via the list, so
> it's easy to see).?Unfortunately we don't know what else mails we
> are missing.?Mails are also arriving out of order. This is so since
> more than a week.
> It makes coop very difficult... Phil, could you check what's?happening?
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>



-- 
Massimo Belgrano
From mbelgrano at deltain.it  Sat May 16 05:37:18 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat May 16 06:32:58 2009
Subject: [Harbour] Test
In-Reply-To: <20090513130740.88B486800368@eva124.dadanet.it>
References: <20090513130740.88B486800368@eva124.dadanet.it>
Message-ID: <609353e70905160237o2ae259ccu9e50cb2b36e8423@mail.gmail.com>

In this day harbour mailig list is slow

2009/5/13  <calimero22@freemail.it>:
> This is a test.
>
> This is a test
>
> BY
>
> Giovanni
>
> Excuse me for test.
>
>
>
>
> --- Dada Music Movement, tutta la musica che vuoi! ---
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>



-- 
Massimo Belgrano
From vszakats at users.sourceforge.net  Fri May 15 09:23:09 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat May 16 06:33:50 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11058] trunk/harbour
Message-ID: <E1M4xNV-0004VQ-NT@c3vjzd1.ch3.sourceforge.com>

Revision: 11058
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11058&view=rev
Author:   vszakats
Date:     2009-05-15 13:23:08 +0000 (Fri, 15 May 2009)

Log Message:
-----------
2009-05-15 15:22 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/hbi18n2.prg
    ! Minor fix to change dir separators to "/" so that
      there won't be multiple entries for the same file
      in mixed environments.
      (like: '#: src\file.prg:1022 src/file.prg:1022')

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/rtl/hbi18n2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From mbelgrano at deltain.it  Sat May 16 05:42:21 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat May 16 06:37:35 2009
Subject: [Harbour] Howto Create GTWVG contrib library in linux
In-Reply-To: <133778360905081004g6fdbaa5chfcd8796330d698c5@mail.gmail.com>
References: <133778360905081004g6fdbaa5chfcd8796330d698c5@mail.gmail.com>
Message-ID: <609353e70905160242k4d530c0cx6e68281e525311b5@mail.gmail.com>

c:\harbour\contrib\gtwvg\tests>
HBMK2 demowvg.prg -gui -gtwvg

2009/5/8 Bruno Luciani <bruno.luciani@gmail.com>:
> Which are software dependencis for this library ?
>
> is the only library that I can' t make
>
>
> Thanks in advance
>
> Bruno
>
>
> PD : the other is HBQT but I don' t know why
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>



-- 
Massimo Belgrano
From vszakats at users.sourceforge.net  Sat May 16 02:05:00 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat May 16 06:42:17 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11062] trunk/harbour
Message-ID: <E1M5D12-000425-0n@d5vjzd1.ch3.sourceforge.com>

Revision: 11062
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11062&view=rev
Author:   vszakats
Date:     2009-05-16 06:04:59 +0000 (Sat, 16 May 2009)

Log Message:
-----------
2009-05-16 08:05 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/tget.prg
    ! Fixed recent regression causing negative number to be 
      handled wrongly on input.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/rtl/tget.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Tue May 12 11:57:31 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Sat May 16 06:47:18 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11024] trunk/harbour
Message-ID: <E1M3uMF-0002EA-OS@3kljzd1.ch3.sourceforge.com>

Revision: 11024
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11024&view=rev
Author:   druzus
Date:     2009-05-12 15:57:30 +0000 (Tue, 12 May 2009)

Log Message:
-----------
2009-05-12 18:05 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/filesys.c
    + added support for millisecond precision in hb_fsGetFileTime()/
      hb_fsSetFileTime() in Linux builds. Please note that file time
      precision depends also on used file system and Linux kernel so
      it does not have to work in all cases.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/rtl/filesys.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Tue May 12 09:43:05 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat May 16 06:47:30 2009
Subject: [Harbour] hbzlib and NO_GZCOMPRESS
In-Reply-To: <23501245.post@talk.nabble.com>
References: <23501245.post@talk.nabble.com>
Message-ID: <20090512134305.GA15083@uran.home.aster.pl>

On Tue, 12 May 2009, Petr Chornyj wrote:

Hi,

> It is possible to change our rtl/hbzlib.c to respect a NO_GZCOMPRESS
> definition (see gzio.c)?

Can you explain what you want to do and what does it mean for you
"respect a NO_GZCOMPRESS definition"?
If you use zlib compiled with this macro then it does not contain
any functions used for compression like gzwrite() or gzflush() so
you cannot even link final binaries if code use such functions.
Do you want to remove HB_GZWRITE()/HB_GZFLUSH()/... from rtl/hbzlib.c
when this macro is set?
Why do you want to make it?

> And second question: can we add a wrapper for gputc also?

I guess you ask about gzputc(). Yes we can, I'll add it.
Meanwhile you can use:

   FUNCTION HB_GZPUTC( gz, nChar )
   RETURN IIF( HB_GZWRITE( gz, Chr( nChar ) ) <= 0, -1, nChar )

best regards,
Przemek
From druzus at acn.waw.pl  Tue May 12 11:54:36 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat May 16 07:03:56 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11023] trunk/harbour
In-Reply-To: <E1M3shW-0006Il-82@c3vjzd1.ch3.sourceforge.com>
References: <E1M3shW-0006Il-82@c3vjzd1.ch3.sourceforge.com>
Message-ID: <20090512155436.GA8287@uran.home.aster.pl>

On Tue, 12 May 2009, vszakats@users.sourceforge.net wrote:

Hi,

>   * source/rtl/mlcfunc.c
>     - Deleted HB_EXTENSION branch. Please modify your program to
>       use Set( _SET_EOL ) instead of passing EOLs explicitly to
>       memo functions. This works also in xhb.
>       INCOMPATIBLE when for HB_EXTENSION builds.

In this case you removed important functionality without leaving any
alternative for users. _SET_EOL is not a solution or replacement at all.
Now it's not possible to use multiple EOLs in this set of functions what
is very important in some portable programs which have to accept data
with different EOLs.
Can you revert this modification until we will not have any working
alternative?

best regards,
Przemek
From jfl at mafact.com  Tue May 12 10:30:00 2009
From: jfl at mafact.com (J. Lefebvre)
Date: Sat May 16 07:06:22 2009
Subject: [Harbour] HRB files and classes !!!!!
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C95022E2749@PINK.zycie.pzu>
Message-ID: <348dfa29.1c9d30e.1879992.6952@mafact.com>

Hi,

I'm working with HRB files and suddently discovered a serious problem when using Classes defined within the HRB files inheriting from classes from the main program.


Suppose we have those two classes, Dialog within the main exe, and MyDlg from the HRB file. (This sample is NOT tested nor compiled, it could contain errors, just here to explain the problem !!!)


Main prog ;

Class Dialog
 VAR x
 Method New() Inline x:=1, Self
 Method Destroy() 
 Method OnClose() INLINE .F.
endclass
  

Method Destroy() Class Dialog
 if(::Onclose())
  x:=NIL
 endif
Return Self



HRB prog ;

Class MyDlg inherit Dialog
 VAR y
 Method New() INLINE y:=1, Super:New()
 Method OnClose  
Endclass

Method OnClose() Class MyDlg
Return .T.


When Running the (similar, bug much much biger) prog, at the time of Calling Destroy() method, the super class method is used, so ::Onclose() is called and the class hierarchy is working nicely, to use the onclose() method defined in MyDlg class, within the HRB file.

Then, class system is looking for the associated static function   MyDlg_Onclose() defined within the MyDlg Class Header and ... IT DOES'NT FIND IT (as expected) because it should be called by HB_HrbDo(...) and not directly ...


Now some questions :

Could we imagine a system where we could create a new HBR function like HB_HBRDYNSYMLOAD(cHbrFile) wich not only would load the HBR header, but also would list all internal function and add them to main symbol list (event more powerfull, it could replace some if some with same name exist, allowing the HRB file to patch program easily)


Where should I have a look if I want to add this kind of functionalities ?

I found runner.c but I have to 1) scan HRB to list existing function, 2) scan the actual symbol list and either replace some symbol or add new symbol


Finally, I shoud be able to unload the HRB file and restore the symbol list (but I can live without it  :-) ).

Apart the last point, this is how Blinker was working with blinker special DLL for clipper. You can load a Dll with some code (new or existing) and the loader add all the function and vars to the symbol table, eventually replacing existing one. With Blinker, you CAN'T unload it without GPFying your program !!!


JF,

From abe.buch at att.net  Thu May 14 15:28:45 2009
From: abe.buch at att.net (AbeB)
Date: Sat May 16 07:24:51 2009
Subject: [Harbour] Bug in Get system
Message-ID: <1242329325002-2899254.post@n2.nabble.com>


try this entering -333, you'll get 33, at least this is what i get. 

proc main() 
local v := 0 
cls 
@ 10,10 get v 
read 
? v 

if compiled with  $Id: tget.prg 10172 2009-02-04 18:21:23Z vszakats $
then it is OK
-- 
View this message in context: http://n2.nabble.com/Bug-in-Get-system-tp2899254p2899254.html
Sent from the harbour-devel mailing list archive at Nabble.com.

From calimero22 at freemail.it  Sat May 16 06:19:26 2009
From: calimero22 at freemail.it (calimero22@freemail.it)
Date: Sat May 16 07:26:35 2009
Subject: [Harbour] Big Bug!!!! with negitive input
Message-ID: <20090516101926.1ADD668005D5@eva125.dadanet.it>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090516/fdb5e1ee/attachment.html
From vszakats at users.sourceforge.net  Fri May 15 07:16:17 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat May 16 07:32:13 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11057] trunk/harbour
Message-ID: <E1M4vOj-0003R4-J6@bj8yhf1.ch3.sourceforge.com>

Revision: 11057
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11057&view=rev
Author:   vszakats
Date:     2009-05-15 11:16:16 +0000 (Fri, 15 May 2009)

Log Message:
-----------
2009-05-15 13:15 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  + utils/hbmk2/hbmk2.pt_BR.po
  * utils/hbmk2/hbmk2.hbm
    + Added Portuguese translation. Work of Vailton Renato. Thanks!
    ; NOTE: Quite some strings has changed since version, so the .po 
            file by now needs an update from source plus some parts 
            translated.

  * utils/hbmk2/hbmk2.hu_HU.po
  * utils/hbmk2/hbmk2.prg
    * Minor updates.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.hbm
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.po
    trunk/harbour/utils/hbmk2/hbmk2.prg

Added Paths:
-----------
    trunk/harbour/utils/hbmk2/hbmk2.pt_BR.po


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From info at fsgiudice.com  Fri May 15 17:43:38 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat May 16 07:33:59 2009
Subject: [Harbour] error building current SVN
Message-ID: <4A0DE20A.8020208@fsgiudice.com>

Hi,

I got below error building SVN with mingw:
make -C vmmt install _HB_BLD=yes
make[3]: Entering directory `/j/cvs/harbourSVN_trunk/source/vm/vmmt'
make[4]: Entering directory 
`/j/cvs/harbourSVN_trunk/source/vm/vmmt/win/mingw'
gcc -I. -I../../../../../include  -Wall -W -O3 -fomit-frame-pointer 
-march=i586 -mtune=pentiumpro  -DHB_LEGACY_OFF -DHB_FM_STATISTICS_OFF 
-DHB_FM_DLMT_ALLOC -DHB_GC_AUTO -DHB_HASH_MSG_ITEMS -DHB_MT_VM  -c 
../../../hvmall.c -ohvmall.o
In file included from ../../../hvmall.c:70:
../../../classes.c: In function 'hb_objGetVarRef':
../../../classes.c:2069: error: '_hb_stack_ptr_' undeclared (first use 
in this function)
../../../classes.c:2069: error: (Each undeclared identifier is reported 
only once
../../../classes.c:2069: error: for each function it appears in.)
../../../classes.c:2069: warning: left-hand operand of comma expression 
has no effect
make[4]: *** [hvmall.o] Error 1
make[4]: Leaving directory 
`/j/cvs/harbourSVN_trunk/source/vm/vmmt/win/mingw'
make[3]: *** [descend] Error 2
make[3]: Leaving directory `/j/cvs/harbourSVN_trunk/source/vm/vmmt'
make[2]: *** [vmmt.inst] Error 2
make[2]: Leaving directory `/j/cvs/harbourSVN_trunk/source/vm'
make[1]: *** [vm.inst] Error 2
make[1]: Leaving directory `/j/cvs/harbourSVN_trunk/source'
make: *** [source.inst] Error 2

I use this setting:

export HB_USER_CFLAGS="-DHB_LEGACY_OFF -DHB_FM_STATISTICS_OFF 
-DHB_FM_DLMT_ALLOC -DHB_GC_AUTO -DHB_HASH_MSG_ITEMS"

and at line 2061 of classes.c there is:

BOOL hb_objGetVarRef( PHB_ITEM pObject, PHB_SYMB pMessage,
                       PHB_STACK_STATE pStack )
{
    PHB_SYMB pExecSym;

#if defined( HB_HASH_MSG_ITEMS )
    if( HB_IS_HASH( pObject ) )
    {
       PHB_ITEM pIndex = hb_itemPutCConst( hb_stackAllocItem(), 
pMessage->szName + 1 );
       PHB_ITEM pValue = hb_hashGetItemRefPtr( pObject, pIndex );
       hb_stackPop();
       if( pValue )
          hb_itemReturn( pValue );
       return pValue != NULL;
    }
#endif

Best regards,
Francesco

From druzus at acn.waw.pl  Sat May 16 06:59:24 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat May 16 07:50:06 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <23541110.post@talk.nabble.com>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
	<4A0BF369.8050804@dbtopas.lt> <23541110.post@talk.nabble.com>
Message-ID: <20090516105924.GA7910@uran.home.aster.pl>

On Thu, 14 May 2009, Pritpal Bedi wrote:

Hi,

> Mindaugas Kavaliauskas wrote:
> > We will to change at least numeric type to pointer type...
> Yes, but how. I am following your code but am been 
> unbale to hook any code inside it because of WINAPI background.
> harbour/contrib/gtwvg/wvgsink.c
>    AtlAxCreateControl = ( PATLAXCREATECONTROL ) GetProcAddress( hLib,
> "AtlAxCreateControl" );
>    if ( AtlAxCreateControl )
>    {
>       hContainer = ( HWND ) CreateWindowEx( Exstyle, cClass, TEXT(""),
> Style, x, y, w, h,
>                                             hParent, id, GetModuleHandle(
> NULL ), NULL );
>       if( hContainer )
>       {
>          ...
>          ...
>          ( AtlAxCreateControl ) ( wString, hContainer, NULL, &pUnk );
>          if( pUnk )
>          {
>             pUnk->lpVtbl->QueryInterface( pUnk, HB_ID_REF( IID_IDispatch ),
> ( void** ) (void*) &obj );
>             pUnk->lpVtbl->Release( pUnk );
>             hb_retnint( ( HB_PTRDIFF ) obj ); 
>             ^^^^^^^^^^^^^^^^^^^^
> This code returns a obj as a numeric handle which in turn 
> is used to initialize TOleAuto() for handelling messages.
> If we can either change this code or olecore implementation
> then we can come close of two implementations.

It's enough to add to olecore.c this function:

PHB_ITEM hb_oleItemPut( PHB_ITEM pItem, IDispatch* pDisp )
{
   IDispatch** ppDisp;

   ppDisp = ( IDispatch** ) hb_gcAlloc( sizeof( IDispatch* ), hb_ole_destructor );
   *ppDisp = pDisp;

   return hb_itemPutPtrGC( pItem, ppDisp );
}

It should be declared as public C function in hbwinole.h.
Then you use it to create Harbour GC pointer item and return it instead
of hb_retint(), f.e.:

   hb_itemReturnRelease( hb_oleItemPut( NULL, obj ) );

best regards,
Przemek
From dbtopas at dbtopas.lt  Sat May 16 07:28:40 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sat May 16 07:50:30 2009
Subject: [Harbour] Mini-tutorial MySQL connection
In-Reply-To: <609353e70905150521g7517ea85jc3f3528918491d66@mail.gmail.com>
References: <20090513151519.68E98680846A@eva104.dadanet.it>
	<COL103-DS751F1E1A097CECE2A2D52DC5E0@phx.gbl>	<609353e70905132359s68bd822x5dd8f612f867dbf9@mail.gmail.com>
	<COL103-DS4340ABD4FD38E5DD5DB62DC5F0@phx.gbl>	<4A0D0D86.5040005@dbtopas.lt>
	<609353e70905150521g7517ea85jc3f3528918491d66@mail.gmail.com>
Message-ID: <4A0EA368.7010203@dbtopas.lt>

Hi,


Massimo Belgrano wrote:
> Can you share more sample regarding rddsql?


Bruno Luciani wrote:
> could you send to me
> a sample more complete of using RDDSQL ?
> 
> The sample in the contrib is very little and I'  dont understand
> the full use of this library


I have a few applications using rddsql, but none of it is a sample for 
rddsql. That features do you want to see inside sample? The main idea of 
rddsql is that it represents query result as database workarea. After 
SQL query result is opened, any Harbour/Clipper database code is a sample:
   ? FIELDGET(1)
   AMOUNT := AMOUNT + 1
etc.


Regards,
Mindaugas
From itamarlins at bol.com.br  Sat May 16 07:14:03 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Sat May 16 08:02:05 2009
Subject: [Harbour] class ftp
Message-ID: <gum76r$94v$1@ger.gmane.org>

Hi!
How to disable log of ftp.
Many files ftp???.log on the my directore :-(

Tks!
Itamar M. Lins Jr. 



From dbtopas at dbtopas.lt  Sat May 16 07:19:35 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sat May 16 08:02:46 2009
Subject: [Harbour] Mini-tutorial MySQL connection
In-Reply-To: <609353e70905150838s7bfac5b3p3f81898b3a140614@mail.gmail.com>
References: <20090513151519.68E98680846A@eva104.dadanet.it>
	<COL103-DS751F1E1A097CECE2A2D52DC5E0@phx.gbl>	<609353e70905132359s68bd822x5dd8f612f867dbf9@mail.gmail.com>
	<COL103-DS4340ABD4FD38E5DD5DB62DC5F0@phx.gbl>	<4A0D0D86.5040005@dbtopas.lt>
	<609353e70905150838s7bfac5b3p3f81898b3a140614@mail.gmail.com>
Message-ID: <4A0EA147.7080303@dbtopas.lt>

Hi,


so, perhaps, you've not compiled sddfb. But I do not see why do you need 
Firebird, test1.prg depends on MySQL only.


Regards,
Mindaugas


Massimo Belgrano wrote:
> Compiling with hbmk2 test1.prg the file sqlrdd\tests\test1.prg
> i receive  error cannot find  -lsddfb?
> 
> 
> 2009/5/15 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>:
>> S?rgio Kondo wrote:
>>> Another question: RDDSQL for MySQL also need MyODBC?
>> No, it uses native client library.
From toninhofwi at yahoo.com.br  Sat May  9 09:06:25 2009
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sat May 16 08:10:35 2009
Subject: [Harbour] Using OLE and WIN_PRN classes
In-Reply-To: <200905081952.42658.teo@windtelsoft.com>
References: <200905081952.42658.teo@windtelsoft.com>
Message-ID: <gpva05po5gcu21cf0d0jb7t97mcqs67ufb@4ax.com>

Hi Teo,

I have the same problem here, so I'm using OLE from hbwin by now,
because hbole is not 100% ready yet.

Regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From calimero22 at freemail.it  Wed May 13 12:40:15 2009
From: calimero22 at freemail.it (calimero22@freemail.it)
Date: Sat May 16 08:14:24 2009
Subject: [Harbour] Tutorial MYSQL-HARBOUR (Correction)
Message-ID: <20090513164015.4FDBF6800359@eva105.dadanet.it>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090513/dd129fbd/attachment.html
From druzus at users.sourceforge.net  Thu May  7 19:28:14 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Sat May 16 08:16:53 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11008] trunk/harbour
Message-ID: <E1M2D0g-0006vD-FV@bj8yhf1.ch3.sourceforge.com>

Revision: 11008
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11008&view=rev
Author:   druzus
Date:     2009-05-07 23:28:13 +0000 (Thu, 07 May 2009)

Log Message:
-----------
2009-05-08 01:36 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/xhb/stream.prg
    ! disabled call to HB_IsByRef(). Such function does not exist in Harbour
      and in current xHarbour it does not work.

  * harbour/contrib/xhb/hbserv.c
    ! removed some peaces of not working old code which used pHVMFuncService.
      With some calling convention this code can cause application crash on
      exit in xHarbour so it should be fixed there too.

  * harbour/contrib/xhb/regexrpl.prg
    ! use HB_ISREGEX() instead of xHarbour only HB_ISREGEXSTRING()

  * harbour/contrib/xhb/xhbfunc.c
    + added xHarbour compatible HB_CREATELEN8() and HB_GETLEN8() functions.
      They save/restore 64bit signed integers in/from 8 bytes strings.
      In Clipper terminology they can be called: LL2BIN()/BIN2LL().
      Original xHarbour version of HB_CREATELEN8() and HB_GETLEN8() were
      implemented by Giancarlo Niccolai.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/xhb/hbserv.c
    trunk/harbour/contrib/xhb/regexrpl.prg
    trunk/harbour/contrib/xhb/stream.prg
    trunk/harbour/contrib/xhb/xhbfunc.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Tue May 12 08:47:55 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat May 16 08:21:08 2009
Subject: [Harbour] hbmk2: any features still missing?
In-Reply-To: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
References: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
Message-ID: <20090512124755.GA13151@uran.home.aster.pl>

On Tue, 12 May 2009, Szak?ts Viktor wrote:

Hi,

> Hi All,
> Is there any important feature still missing from hbmk2?

I cannot test it in real environment because -o does not work
for hbcmp.

best regards,
Przemek
From druzus at acn.waw.pl  Mon May 11 09:12:32 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat May 16 08:26:28 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11013] trunk/harbour
In-Reply-To: <4A046A6F.5070809@fsgiudice.com>
References: <E1M2PAz-0008Ot-Nw@bj8yhf1.ch3.sourceforge.com>
	<4A046A6F.5070809@fsgiudice.com>
Message-ID: <20090511131232.GA15467@uran.home.aster.pl>

On Fri, 08 May 2009, Francesco Saverio Giudice wrote:

Hi,

> thank you. Your diff is better than mine ;-)

I haven't seen your patch but if you think it's sth what should be ported
yet then I can check and add it if you send it here. In the above commit
I tried to minimize the number of modifications in core code.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu May 14 14:27:39 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sat May 16 08:40:32 2009
Subject: [Fwd: Re: [Harbour] Problem with return of LoadLibrary and 
	Harbour 11047]
In-Reply-To: <4A0C566C.5090406@takas.lt>
References: <4A0C566C.5090406@takas.lt>
Message-ID: <18d502870905141127l34a1b2al485d010336cd267a@mail.gmail.com>

Hi Mindaugas,


>      if hLib <= 32  && <<<------ Here error
>>
>> Probably 'IF Empty( hLib )' should be used here, and LoadLibrary()
>> modified to return NULL when pointer is <= 32.
>>
>> But now I know why we had this code full of numeric pointers.
>>
>> We can also leave LoadLibrary() as compatibility function and switch it
>> back to return numeric. This wouldn't be a huge step forward though...
>>
>> Please FWH and Windows users (developers?) comment.
>>
>
> In my code in cases like this I return NIL instead of NULL pointer. This
> is better for future compatibility, if we are going to change to
> collectible pointers in the future. Since the value of the collectible
> pointer will not be NULL.


My vote goes to returning same type for both error and success
cases. Anyhow "Empty( retval )" is working for both cases, so
it seems the "best practice" when validating such return values.

Maybe we should have a distince opcode for it (plus for RETURN .T.,
RETURN .F., RETURN NIL), to speed up processing.

The error code itself could be returned using some error function like
> FERROR(), GetLastError(), etc. We just need to find that kind of group
> function belong to, and that is the best choice for function name to
> return error code.


I agree, we have WAPI_GETLASTERROR() for this purpose, or
also old version GETLASTERROR(). If we miss some more of these,
we can easily add them.

BTW, we have AnsiToWide() and WideToAnsi() and these seem like
exact functional copies of our existing hb_mbtowc() and hb_wctomb()
functions respectively. If there isn't any special reason to replicate
them,
IMO we should simply use hb_* function directly or call them inside
above functions. I did that change already for similar purpose legacy
OLE functions (hb_oleAnsiToWide(), hb_oleWideToAnsi(),
[WIN_]ANSITOWIDE(), [WIN_]WIDETOANSI()).

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090514/75474790/attachment-0001.html
From bedipritpal at hotmail.com  Wed May 13 10:57:09 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat May 16 08:42:48 2009
Subject: [Harbour] cdx internal error question
In-Reply-To: <20090513133337.GB18724@uran.home.aster.pl>
References: <18d502870905130121n22e5b182m9deb94f051c8e5db@mail.gmail.com>
	<23519390.post@talk.nabble.com>
	<20090513133337.GB18724@uran.home.aster.pl>
Message-ID: <23523533.post@talk.nabble.com>


Hello Przemek


Przemyslaw Czerpak-2 wrote:
> 
>> This is a similar like situation which I reported a few days back 
>> and which still persists. Though I do not get a RTE, but appln just
>> enter a indefinite loop with cpu at 50%.
>> May be now we will expect a fix.
> 
> If this it the same situation then for sure you have to fix your code.
> 

Please note that I know how much excellent is your RDD and 
all other contributions and believe on your hints and suggestions.

As you pointed out I should fix my code, true, but where should I
look into is not known to me. The same code has been working 
with Clipper, Harbour ( till recently ) and xHarbour. I did not change 
any routine upto that point of code in years. 

Though this is not an issue with me anymore as I have stopped
using any table in EXCLUSIVE mode and has adopted another
approach, still I believe it is worth the time to investigate what the 
hell I changed in my code which is causing it.

I tried to use MemProof to locate but it does not report any abnormality.
The instance has to be killed by task manager. No other way to 
come out of it.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/cdx-internal-error-question-tp23518164p23523533.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Thu May 14 13:11:36 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat May 16 08:45:55 2009
Subject: [Harbour] Bug in ADS
In-Reply-To: <4A0C49EB.50409@shaw.ca>
References: <1242242430411-2886000.post@n2.nabble.com>
	<20090513222014.GB29975@uran.home.aster.pl>
	<4A0C49EB.50409@shaw.ca>
Message-ID: <20090514171136.GB7288@uran.home.aster.pl>

On Thu, 14 May 2009, Luis Krause Mantilla wrote:

Hi Luis,

> FWIW, I tested with xHarbour with ads 8.1, 9.0 and 9.1 dlls
> and it does not add an extra dummy char.  I changed the field
> length to 40 and it still worked as expected.

I located the reason and the bug is in all versions of ADS RDD
I know in Harbour and xHarbour.
In the past someone had to find the problem but instead of fixing it
he hide it removing error checking in AdsGetFiled*().
I'll fix it.

best regards,
Przemek
From druzus at users.sourceforge.net  Fri May 15 05:55:10 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Sat May 16 09:16:49 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11053] trunk/harbour
Message-ID: <E1M4u8E-0006oo-Ii@d5vjzd1.ch3.sourceforge.com>

Revision: 11053
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11053&view=rev
Author:   druzus
Date:     2009-05-15 09:55:09 +0000 (Fri, 15 May 2009)

Log Message:
-----------
2009-05-15 12:03 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/rddads/ads1.c
    ! fixed typo in recent modification which caused that character fields
      at EOF position were not returned

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/rddads/ads1.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Thu May 14 13:52:45 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat May 16 09:23:24 2009
Subject: [Harbour] Harbour nomination for sf.net best project/best dev tool
In-Reply-To: <531d7a750905140925h35b84fey739b66cf197148a2@mail.gmail.com>
References: <68948A51-EE0E-4CBD-903F-025C8F49D751@syenar.hu>
	<531d7a750905140925h35b84fey739b66cf197148a2@mail.gmail.com>
Message-ID: <651F0877-FF1A-4E4A-AF84-9815CC852FC2@syenar.hu>

AFAIU all projects entered it, it probably goes down on
getting enough votes / nominations.

I received a mail from sf.net and "nominated" it in
Best Project and Best Dev Util / Tool.

Brgds,
Viktor

On 2009.05.14., at 18:25, Vailton Renato wrote:

>> Would you please add this little icon to our webpage:
>>
>> <a
>> href="http://sourceforge.net/community/cca09/nominate/?project_name=Harbour&project_url=http://www.harbour-project.org/ 
>> "><img
>> src="http://sourceforge.net/images/cca/cca_nominate.png" border="0"/ 
>> ></a>
>>
>> [ If someone has any objection, please speak up. ]
>
> One doubts: The Harbor project is already entered in this contest?
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at users.sourceforge.net  Thu May 14 13:12:32 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Sat May 16 09:23:36 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11050] trunk/harbour
Message-ID: <E1M4eTw-0003Pl-7U@c3vjzd1.ch3.sourceforge.com>

Revision: 11050
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11050&view=rev
Author:   druzus
Date:     2009-05-14 17:12:31 +0000 (Thu, 14 May 2009)

Log Message:
-----------
2009-05-14 19:20 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/hb-func.sh
    * respect HB_USER_LIBS creating hbmk.cfg

  * harbour/contrib/rddads/ads1.c
    ! fixed minimal record buffer size calculation
    ! fixed adsGetValue() method hacked to not report errors due to too
      small field buffer.
      Warning! Now ADS RDD will report any error as RTE if sth wrong
      will happen in one of AdsGet*() function when field is read so
      it's possible that also some other hidden bugs will be exploited
      and you will see RTE. Please test it.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/hb-func.sh
    trunk/harbour/contrib/rddads/ads1.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From qiinfo at ig.com.br  Sat May  9 09:26:02 2009
From: qiinfo at ig.com.br (Rossine)
Date: Sat May 16 09:24:05 2009
Subject: [Harbour] Error with DumpVar
In-Reply-To: <23425403.post@talk.nabble.com>
References: <23425403.post@talk.nabble.com>
Message-ID: <23460524.post@talk.nabble.com>


Hello,

Works perfectly now :)

Thank you very much to all,

Rossine.


-- 
View this message in context: http://www.nabble.com/Error-with-DumpVar-tp23425403p23460524.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dbtopas at dbtopas.lt  Mon May 11 18:04:33 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sat May 16 09:38:33 2009
Subject: [Harbour] MySQL Problem
In-Reply-To: <20090511171801.106396800261@eva105.dadanet.it>
References: <20090511171801.106396800261@eva105.dadanet.it>
Message-ID: <4A08A0F1.6040606@dbtopas.lt>

Hi,

> I want to connect it with my harbour PRG.
> The compilation is OK, but at the execution it shows the following message:
>  Error ADODB.Connection/0  S_OK: OPEN (in the red alert window).
> Why?

the answer is a little "out of topic", since I do not solve you ADODB 
problem, but propose another solution. The following code compiled with 
rddsql and sddmy libraries:
-----------------------------------------
#define RDDI_CONNECT          1001

REQUEST SDDMY
ANNOUNCE RDDSYS

PROC main()
LOCAL nI
   RDDSETDEFAULT("SQLBASE")
   ? "Connect:", RDDINFO(RDDI_CONNECT, {"MYSQL", "db4free.net", "gio22", 
"marcella", "giovanni"})
   DBUSEAREA(.T.,, "select * from clienti", "clienti")
   ? "Structure:", HB_VALTOEXP(DBSTRUCT())
   DO WHILE !EOF()
     ? ""
     FOR nI := 1 TO FCOUNT()
       ?? FIELDGET(nI), " "
     NEXT
     DBSKIP()
   ENDDO
   DBCLOSEALL()
RETURN
-----------------------------------------

prints:
-----------------------------------------
Connect:          1
Structure: {{"COGNOME", "C", 20, 0}, {"NOME", "C", 20, 0}, {"ETA", "N", 
3, 0}}
rossi  mario   44
verdi  luigi   33
neri  carmelo   88
-----------------------------------------


Regards,
Mindaugas

P.S. you can also use BROWSE() instead of DO WHILE loop. I've used DO 
WHILE to be able copy-paste results of application. Notice: editing of 
table requires to generate SQL queries explicitly.
From harbour.01 at syenar.hu  Wed May 13 06:10:28 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat May 16 09:39:11 2009
Subject: [Harbour] HRB problem with inherited classes
In-Reply-To: <b80d854a.1c9d3a9.657340.7385@mafact.com>
References: <b80d854a.1c9d3a9.657340.7385@mafact.com>
Message-ID: <2C3106BE-BC8F-4E5F-8D7F-C41EC94D5AEF@syenar.hu>

With unload an interesting question is what happens
in this scenario:

1. Load HRB1 overloading existing function: HELLO
2. Load HRB2 overloading existing function: HELLO
3. Unload HRB1
4. ? Which version of HELLO will now execute?
5. Unload HRB2
6. ? Which version of HELLO will now execute?

I suppose there should be a stack of versions for all
symbols for this to work.

While patching by itself is nice, we should also be aware
that if we allow such feature, it could very easily create
a huge security hole, where a maliciously extended .hrb
file may redefine some core (app or Harbour) functions
and executing undesired program parts. Same can be done
by mistake also.

One solution for this is to somehow explicitly allow
overloading of existing symbols (VIRTUAL FUNCTION/PROCEDURE),
but by default a function shouldn't change by loading a
.dll IMO.

Brds,
Viktor

On 2009.05.13., at 11:03, J. Lefebvre wrote:

> This mail seem to never reach the list ... New test !
>
> ++++++++++++++++++++++++++++++++++++++++++++++++++++++
>
> Hi,
>
> I'm working with HRB files and suddently discovered a serious  
> problem when using Classes defined within the HRB files inheriting  
> from classes from the main program.
>
>
> Suppose we have those two classes, Dialog within the main exe, and  
> MyDlg from the HRB file. (This sample is NOT tested nor compiled, it  
> could contain errors, just here to explain the problem !!!)
>
>
> Main prog ;
>
> Class Dialog
> VAR x
> Method New() Inline x:=1, Self
> Method Destroy()
> Method OnClose() INLINE .F.
> endclass
>
>
> Method Destroy() Class Dialog
> if(::Onclose())
>  x:=NIL
> endif
> Return Self
>
>
>
> HRB prog ;
>
> Class MyDlg inherit Dialog
> VAR y
> Method New() INLINE y:=1, Super:New()
> Method OnClose
> Endclass
>
> Method OnClose() Class MyDlg
> Return .T.
>
>
> When Running the (similar, bug much much biger) prog, at the time of  
> Calling Destroy() method, the super class method is used,  
> so ::Onclose() is called and the class hierarchy is working nicely,  
> to use the onclose() method defined in MyDlg class, within the HRB  
> file.
>
> Then, class system is looking for the associated static function    
> MyDlg_Onclose() defined within the MyDlg Class Header and ... IT  
> DOES'NT FIND IT (as expected) because it should be called by  
> HB_HrbDo(...) and not directly ...
>
>
> Now some questions :
>
> Could we imagine a system where we could create a new HBR function  
> like HB_HBRDYNSYMLOAD(cHbrFile) wich not only would load the HBR  
> header, but also would list all internal function and add them to  
> main symbol list (event more powerfull, it could replace some if  
> some with same name exist, allowing the HRB file to patch program  
> easily)
>
>
> Where should I have a look if I want to add this kind of  
> functionalities ?
>
> I found runner.c but I have to 1) scan HRB to list existing  
> function, 2) scan the actual symbol list and either replace some  
> symbol or add new symbol
>
>
> Finally, I shoud be able to unload the HRB file and restore the  
> symbol list (but I can live without it  :-) ).
>
> Apart the last point, this is how Blinker was working with blinker  
> special DLL for clipper. You can load a Dll with some code (new or  
> existing) and the loader add all the function and vars to the symbol  
> table, eventually replacing existing one. With Blinker, you CAN'T  
> unload it without GPFying your program !!!
>
>
> JF,
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vailtom at gmail.com  Sat May 16 08:51:57 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Sat May 16 09:44:55 2009
Subject: =?ISO-8859-1?Q?Re=3A_=5BHarbour=5D_Quero_que_voc=EA_entre_no_Facebook?=
In-Reply-To: <570971d12a30caeb8af28e716c2e5cd3@localhost.localdomain>
References: <570971d12a30caeb8af28e716c2e5cd3@localhost.localdomain>
Message-ID: <531d7a750905160551j36bb1be7yc65c71c38869c088@mail.gmail.com>

Unfortunately this email sent by mistake .. I clicked the link without
reading, sorry.
From jfl at mafact.com  Sat May 16 08:56:00 2009
From: jfl at mafact.com (J. Lefebvre)
Date: Sat May 16 09:51:36 2009
Subject: [Harbour] HRB files and classes !!!!!
In-Reply-To: <348dfa29.1c9d30e.1879992.6952@mafact.com>
Message-ID: <c43809fe.1c9d625.10adcc1d.9a4@mafact.com>

Ok, forget this message, it was sended days ago, and is solved since ...

-----Message d'origine-----
De?: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] De la part de J. Lefebvre
Envoy??: mardi 12 mai 2009 16:30
??: 'Harbour Project Main Developer List.'
Objet?: [Harbour] HRB files and classes !!!!!

Hi,

I'm working with HRB files and suddently discovered a serious problem when using Classes defined within the HRB files inheriting from classes from the main program.


Suppose we have those two classes, Dialog within the main exe, and MyDlg from the HRB file. (This sample is NOT tested nor compiled, it could contain errors, just here to explain the problem !!!)


Main prog ;

Class Dialog
 VAR x
 Method New() Inline x:=1, Self
 Method Destroy() 
 Method OnClose() INLINE .F.
endclass
  

Method Destroy() Class Dialog
 if(::Onclose())
  x:=NIL
 endif
Return Self



HRB prog ;

Class MyDlg inherit Dialog
 VAR y
 Method New() INLINE y:=1, Super:New()
 Method OnClose  
Endclass

Method OnClose() Class MyDlg
Return .T.


When Running the (similar, bug much much biger) prog, at the time of Calling Destroy() method, the super class method is used, so ::Onclose() is called and the class hierarchy is working nicely, to use the onclose() method defined in MyDlg class, within the HRB file.

Then, class system is looking for the associated static function   MyDlg_Onclose() defined within the MyDlg Class Header and ... IT DOES'NT FIND IT (as expected) because it should be called by HB_HrbDo(...) and not directly ...


Now some questions :

Could we imagine a system where we could create a new HBR function like HB_HBRDYNSYMLOAD(cHbrFile) wich not only would load the HBR header, but also would list all internal function and add them to main symbol list (event more powerfull, it could replace some if some with same name exist, allowing the HRB file to patch program easily)


Where should I have a look if I want to add this kind of functionalities ?

I found runner.c but I have to 1) scan HRB to list existing function, 2) scan the actual symbol list and either replace some symbol or add new symbol


Finally, I shoud be able to unload the HRB file and restore the symbol list (but I can live without it  :-) ).

Apart the last point, this is how Blinker was working with blinker special DLL for clipper. You can load a Dll with some code (new or existing) and the loader add all the function and vars to the symbol table, eventually replacing existing one. With Blinker, you CAN'T unload it without GPFying your program !!!


JF,

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour


From snaiperis at users.sourceforge.net  Sat May 16 09:54:48 2009
From: snaiperis at users.sourceforge.net (snaiperis@users.sourceforge.net)
Date: Sat May 16 10:16:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11064] trunk/harbour
Message-ID: <E1M5KLg-0003St-05@bj8yhf1.ch3.sourceforge.com>

Revision: 11064
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11064&view=rev
Author:   snaiperis
Date:     2009-05-16 13:54:46 +0000 (Sat, 16 May 2009)

Log Message:
-----------
2009-05-16 16:55 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
  * harbour/contrib/rddsql/hbrddsql.h
    + added field to connection structure to store database dependent 
      data

  + harbour/contrib/rddsql/sddodbc
  + harbour/contrib/rddsql/sddodbc/Makefile
  + harbour/contrib/rddsql/sddodbc/sddodbc.c
  + harbour/contrib/rddsql/sddodbc/tests
  + harbour/contrib/rddsql/sddodbc/tests/sddodbc.hbp
  + harbour/contrib/rddsql/sddodbc/tests/test1.prg
  * harbour/contrib/rddsql/Makefile
    + implemented ODBC driver for RDDSQL

  * harbour/contrib/rddsql/tests/rddsql.hbp
  - harbour/contrib/rddsql/tests/test1.prg
  + harbour/contrib/rddsql/sddmy/tests
  + harbour/contrib/rddsql/sddmy/tests/sddmy.hbp
  + harbour/contrib/rddsql/sddmy/tests/test1.prg
    * moved sddmy tests to sddmy subfolder

  * harbour/contrib/rddsql/tests/rddsql.hbp
    * changed to use rddsql library only

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/rddsql/Makefile
    trunk/harbour/contrib/rddsql/hbrddsql.h
    trunk/harbour/contrib/rddsql/sqlbase.c
    trunk/harbour/contrib/rddsql/tests/rddsql.hbp

Added Paths:
-----------
    trunk/harbour/contrib/rddsql/sddmy/tests/
    trunk/harbour/contrib/rddsql/sddmy/tests/sddmy.hbp
    trunk/harbour/contrib/rddsql/sddmy/tests/test1.prg
    trunk/harbour/contrib/rddsql/sddodbc/
    trunk/harbour/contrib/rddsql/sddodbc/Makefile
    trunk/harbour/contrib/rddsql/sddodbc/odbcdd.c
    trunk/harbour/contrib/rddsql/sddodbc/tests/
    trunk/harbour/contrib/rddsql/sddodbc/tests/sddodbc.hbp
    trunk/harbour/contrib/rddsql/sddodbc/tests/test1.prg

Removed Paths:
-------------
    trunk/harbour/contrib/rddsql/tests/test1.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bedipritpal at hotmail.com  Sat May 16 10:41:57 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat May 16 10:42:02 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
	<23539642.post@talk.nabble.com> <23540931.post@talk.nabble.com>
	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>
Message-ID: <23574376.post@talk.nabble.com>


Hello


Viktor Szak?ts wrote:
> 
> I've moved new ole to hbwin, because otherwise we will very very
> slowly adapt to
> it, since very few users would test it.
> 

Not exactly. It just broke all the linking process itself, simply
unusable to test either.



> hbwin.lib - New implementation, with clean concepts, names, OLE, etc.
> hbwinold.lib - Old implementation kept for compatibility until 3rd parties
> can adapt. Code frozen.
> 

Why to force existing scripts to be changed?

It should be like:
hbole.lib - As current hbwin - make sure that it compiles and at least links
fine stand alone.
hbwin.lib - As standard old one - and frozen for new work.

I mean two parallel libs ao that user could switch over to other
for testing purposes. Once matured, we could face out hbwin.

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/Errors-with-11032-tp23521549p23574376.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Sat May 16 10:48:29 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat May 16 10:48:34 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <20090516105924.GA7910@uran.home.aster.pl>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
	<4A0BF369.8050804@dbtopas.lt> <23541110.post@talk.nabble.com>
	<20090516105924.GA7910@uran.home.aster.pl>
Message-ID: <23574445.post@talk.nabble.com>


Thanks Przemek


Przemyslaw Czerpak-2 wrote:
> 
> It's enough to add to olecore.c this function:
> 
> PHB_ITEM hb_oleItemPut( PHB_ITEM pItem, IDispatch* pDisp )
> {
>    IDispatch** ppDisp;
> 
>    ppDisp = ( IDispatch** ) hb_gcAlloc( sizeof( IDispatch* ),
> hb_ole_destructor );
>    *ppDisp = pDisp;
> 
>    return hb_itemPutPtrGC( pItem, ppDisp );
> }
> 
> It should be declared as public C function in hbwinole.h.
> Then you use it to create Harbour GC pointer item and return it instead
> of hb_retint(), f.e.:
> 
>    hb_itemReturnRelease( hb_oleItemPut( NULL, obj ) );
> 

I will try this approach. 
The problem at this moment is I cannot link my applns at all
with new lib structure for various reasons. I cannot use 
either hbole.lib or hbwin.lib explicitly anymore.

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/Errors-with-11032-tp23521549p23574445.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From info at fsgiudice.com  Sat May 16 11:09:55 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat May 16 11:10:07 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11013] trunk/harbour
In-Reply-To: <20090511131232.GA15467@uran.home.aster.pl>
References: <E1M2PAz-0008Ot-Nw@bj8yhf1.ch3.sourceforge.com>	<4A046A6F.5070809@fsgiudice.com>
	<20090511131232.GA15467@uran.home.aster.pl>
Message-ID: <4A0ED743.3090203@fsgiudice.com>


Hi Przemek,
I have received this mail only today (Phil please help us).

Il 11/05/2009 15.12, Przemyslaw Czerpak ha scritto:
> On Fri, 08 May 2009, Francesco Saverio Giudice wrote:
> 
> Hi,
> 
>> thank you. Your diff is better than mine ;-)
> 
> I haven't seen your patch but if you think it's sth what should be ported
> yet then I can check and add it if you send it here. In the above commit
> I tried to minimize the number of modifications in core code.
> 

It was a joke, because you have uploaded your updates before mine (I 
didn't as I see yours) and them are the better solution as you known 
internal core code.

Best regards,
Francesco

From info at fsgiudice.com  Sat May 16 11:10:41 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat May 16 11:10:50 2009
Subject: [Harbour] hbmk2: any features still missing?
In-Reply-To: <3vvi05p131ttpfs4ikpcjp9nhmi3dugv36@4ax.com>
References: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>	<4A0969B6.6030605@mweb.co.za>
	<3vvi05p131ttpfs4ikpcjp9nhmi3dugv36@4ax.com>
Message-ID: <4A0ED771.6060805@fsgiudice.com>



Il 12/05/2009 15.56, Toninho@fwi ha scritto:
>> Thank you very much for your herculean efforts.
> 
> +1,
> 
+2

Best regards,
Francesco
From philb at philb.us  Sat May 16 12:43:48 2009
From: philb at philb.us (Phil Barnett)
Date: Sat May 16 12:43:55 2009
Subject: [Harbour] Mailing list slowness
Message-ID: <4A0EED44.7020705@philb.us>

Ok, I have the mailing list slowness fixed and the speed should be back 
to normal.

There was a mail directory on the machine with nearly 500k messages 
(spam that was supposed to be only redirected to the trash bin) and the 
machine was struggling with that. I cleared it out and set up a cron job 
to keep it clean.

Now the machine is running back to normal.

You can see the effect here:

http://www.linuxceptional.com/mrgt/taz_la.html

Sorry 'bout that.
From lorenzo.fiorini at gmail.com  Sat May 16 12:55:27 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat May 16 12:55:33 2009
Subject: [Harbour] Mailing list slowness
In-Reply-To: <4A0EED44.7020705@philb.us>
References: <4A0EED44.7020705@philb.us>
Message-ID: <9257026e0905160955j70808a7cx6de34e6861c4e41@mail.gmail.com>

On Sat, May 16, 2009 at 6:43 PM, Phil Barnett <philb@philb.us> wrote:

> Ok, I have the mailing list slowness fixed and the speed should be back to
> normal.

Many thanks.

regards,
Lorenzo
From mbelgrano at deltain.it  Sat May 16 12:56:56 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat May 16 12:57:22 2009
Subject: [Harbour] Mini-tutorial MySQL connection
In-Reply-To: <4A0EA368.7010203@dbtopas.lt>
References: <20090513151519.68E98680846A@eva104.dadanet.it> 
	<COL103-DS751F1E1A097CECE2A2D52DC5E0@phx.gbl>
	<609353e70905132359s68bd822x5dd8f612f867dbf9@mail.gmail.com> 
	<COL103-DS4340ABD4FD38E5DD5DB62DC5F0@phx.gbl>
	<4A0D0D86.5040005@dbtopas.lt> 
	<609353e70905150521g7517ea85jc3f3528918491d66@mail.gmail.com> 
	<4A0EA368.7010203@dbtopas.lt>
Message-ID: <609353e70905160956y64500bf6kc331b9d87ab10a1@mail.gmail.com>

Wich function  of dbxcdx are not supported by sqlrdd?
deleted(),rlock(),....

2009/5/16 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>:
> Hi,
>
>
> Massimo Belgrano wrote:
>>
>> Can you share more sample regarding rddsql?
>
>
> Bruno Luciani wrote:
>>
>> could you send to me
>> a sample more complete of using RDDSQL ?
>>
>> The sample in the contrib is very little and I' ?dont understand
>> the full use of this library
>
>
> I have a few applications using rddsql, but none of it is a sample for
> rddsql. That features do you want to see inside sample? The main idea of
> rddsql is that it represents query result as database workarea. After SQL
> query result is opened, any Harbour/Clipper database code is a sample:
> ?? FIELDGET(1)
> ?AMOUNT := AMOUNT + 1
> etc.
>
>
> Regards,
> Mindaugas
>



-- 
Massimo Belgrano
From philb at philb.us  Sat May 16 13:36:04 2009
From: philb at philb.us (Phil Barnett)
Date: Sat May 16 13:36:11 2009
Subject: [Harbour] List problems still
In-Reply-To: <609353e70905160222x121107ccnb451932d7ae505b9@mail.gmail.com>
References: <18d502870905160018m47411c09j7aca084e52611a31@mail.gmail.com>
	<609353e70905160222x121107ccnb451932d7ae505b9@mail.gmail.com>
Message-ID: <4A0EF984.4010203@philb.us>

Massimo Belgrano wrote:
> Can be evalutated moving mailing  to google or yhaoo group?
>  it can be accessible hrough the web interface, or by e-mail.
>  it have better attachment management
>  For example for gogole group you can visit  Discuss developing
> Android applications using the Android framework (Member: 18000
> Messages: 55000)
> http://groups.google.com/group/android-developers?lnk=
>
>
> Naturally thanks to Phil for his effort
>
> 2009/5/16 Viktor Szak?ts <harbour.01@syenar.hu>:
>   
>> Hi Phil and All,
>> We're still having apparently serious mailing list problems, some
>> mails didn't yet arrive from two days ago. (I'm getting two copies
>> of all commit mails, one directly from sf.net, one via the list, so
>> it's easy to see). Unfortunately we don't know what else mails we
>> are missing. Mails are also arriving out of order. This is so since
>> more than a week.
>> It makes coop very difficult... Phil, could you check what's happening?
>> Brgds,
>> Viktor
>>     
It's fixed.
From dbtopas at dbtopas.lt  Sat May 16 14:36:35 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sat May 16 14:37:32 2009
Subject: [Harbour] Mini-tutorial MySQL connection
In-Reply-To: <609353e70905160956y64500bf6kc331b9d87ab10a1@mail.gmail.com>
References: <20090513151519.68E98680846A@eva104.dadanet.it>
	<COL103-DS751F1E1A097CECE2A2D52DC5E0@phx.gbl>	<609353e70905132359s68bd822x5dd8f612f867dbf9@mail.gmail.com>
	<COL103-DS4340ABD4FD38E5DD5DB62DC5F0@phx.gbl>	<4A0D0D86.5040005@dbtopas.lt>
	<609353e70905150521g7517ea85jc3f3528918491d66@mail.gmail.com>
	<4A0EA368.7010203@dbtopas.lt>
	<609353e70905160956y64500bf6kc331b9d87ab10a1@mail.gmail.com>
Message-ID: <4A0F07B3.8090505@dbtopas.lt>

Massimo Belgrano wrote:
> Wich function  of dbxcdx are not supported by sqlrdd?
> deleted(),rlock(),....

Hi,


you should ask it SQLRDD^{(TM)} developers. If you are talking about 
RDDSQL, NONE of dbfcdx behaviour is emulated. If native SQL server does 
not have DELETED() flag or RLOCK(), you will not find it in RDDSQL also.

You can read more about it my text you've resent a few days ago on 
mailing list.


Regards,
Mindaugas
From dbtopas at dbtopas.lt  Sat May 16 14:49:28 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sat May 16 14:50:26 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <23541110.post@talk.nabble.com>
References: <23521549.post@talk.nabble.com>	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>	<23527339.post@talk.nabble.com>
	<23535023.post@talk.nabble.com>	<4A0BF369.8050804@dbtopas.lt>
	<23541110.post@talk.nabble.com>
Message-ID: <4A0F0AB8.5060304@dbtopas.lt>

Hello Pritpul,

>> We will to change at least numeric type to pointer type...
> 
> Yes, but how. I am following your code but am been 
> unbale to hook any code inside it because of WINAPI background.
> 
> harbour/contrib/gtwvg/wvgsink.c

Thanks for this line. I did not know we have more OLE/ActiveX code in 
Harbour. I see here pointers passed as numerics. This should be changed. 
It can be easy rewritten to use pointers, but we need rethink AddRef(), 
Release(), because collectible pointers changes things a little. I see 
Andy copyright of 2008 in the top of a file. I guess he knows ActiveX 
better, it would be nice he can put a hand here. I can try to read more 
about ActiveX otherwise.


Regards,
Mindaugas
From harbour.01 at syenar.hu  Sat May 16 18:22:29 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sat May 16 18:22:35 2009
Subject: [Harbour] Mailing list slowness
In-Reply-To: <4A0EED44.7020705@philb.us>
References: <4A0EED44.7020705@philb.us>
Message-ID: <18d502870905161522x27000990l2fd87167c1daf3b5@mail.gmail.com>

Thank you Phil.
Brgds,
Viktor

On Sat, May 16, 2009 at 6:43 PM, Phil Barnett <philb@philb.us> wrote:

> Ok, I have the mailing list slowness fixed and the speed should be back to
> normal.
>
> There was a mail directory on the machine with nearly 500k messages (spam
> that was supposed to be only redirected to the trash bin) and the machine
> was struggling with that. I cleared it out and set up a cron job to keep it
> clean.
>
> Now the machine is running back to normal.
>
> You can see the effect here:
>
> http://www.linuxceptional.com/mrgt/taz_la.html
>
> Sorry 'bout that.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090517/f621295d/attachment.html
From harbour.01 at syenar.hu  Sat May 16 18:26:00 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sat May 16 18:26:06 2009
Subject: [Harbour] List problems still
In-Reply-To: <609353e70905160222x121107ccnb451932d7ae505b9@mail.gmail.com>
References: <18d502870905160018m47411c09j7aca084e52611a31@mail.gmail.com>
	<609353e70905160222x121107ccnb451932d7ae505b9@mail.gmail.com>
Message-ID: <18d502870905161526h6fccbd39i916840616fcbfe9e@mail.gmail.com>

On Sat, May 16, 2009 at 11:22 AM, Massimo Belgrano <mbelgrano@deltain.it>wrote:

> Can be evalutated moving mailing  to google or yhaoo group?
>  it can be accessible hrough the web interface, or by e-mail.
>  it have better attachment management
>  For example for gogole group you can visit  Discuss developing
> Android applications using the Android framework (Member: 18000
> Messages: 55000)
> http://groups.google.com/group/android-developers?lnk=


Yahoo s*cks big time, google groups not much better (for this purpose
at least), sf.net list is dead slow with less features, what we have though
is pretty slick so I'd say lets stick with it.

BTW, we have at least *3* web interfaces for this very list...

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090517/b1fc4dda/attachment.html
From mbelgrano at deltain.it  Sat May 16 18:28:48 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat May 16 18:29:15 2009
Subject: [Harbour] List problems still
In-Reply-To: <18d502870905161526h6fccbd39i916840616fcbfe9e@mail.gmail.com>
References: <18d502870905160018m47411c09j7aca084e52611a31@mail.gmail.com> 
	<609353e70905160222x121107ccnb451932d7ae505b9@mail.gmail.com> 
	<18d502870905161526h6fccbd39i916840616fcbfe9e@mail.gmail.com>
Message-ID: <609353e70905161528w3c09c419v63dcba8578334f90@mail.gmail.com>

FreeGroups.net
http://freegroups.net/faq/groups-comparison-matrix.html


2009/5/17 Viktor Szak?ts <harbour.01@syenar.hu>:
> On Sat, May 16, 2009 at 11:22 AM, Massimo Belgrano <mbelgrano@deltain.it>
> wrote:
>>
>> Can be evalutated moving mailing ?to google or yhaoo group?
>> ?it can be accessible hrough the web interface, or by e-mail.
>> ?it have better attachment management
>> ?For example for gogole group you can visit ?Discuss developing
>> Android applications using the Android framework (Member: 18000
>> Messages: 55000)
>> http://groups.google.com/group/android-developers?lnk=
>
> Yahoo s*cks big time, google groups not much better (for this purpose
> at least), sf.net list?is dead slow with less features, what we have though
> is pretty slick so I'd say lets stick with it.
> BTW, we have at least *3* web interfaces for this very list...
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>



-- 
Massimo Belgrano

Analisi e sviluppo software per Lan e Web - Consulenza informatica - Formazione
Delta Informatica S.r.l. http://www.deltain.it/   +39 0321 455962
From harbour.01 at syenar.hu  Sat May 16 18:30:49 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sat May 16 18:30:55 2009
Subject: [Harbour] Re: hbmk2: any features still missing?
In-Reply-To: <4A096F60.8080905@belacy.belgorod.su>
References: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
	<4A096F60.8080905@belacy.belgorod.su>
Message-ID: <18d502870905161530i321ee461p8c05c958b0643825@mail.gmail.com>

>
> Is there any important feature still missing from hbmk2?
>>
>>
>  Yes - documentation :), at least, very basic.


Quite true, we have the -help option though. Writing comprehensible
docs isn't my strongest side, so I'd appreciate if someone could contribute
something in this area. I can help in the process.

That should probably be a man page which I've started already, but
I didn't have the capacity to update/complete it.

For one type of usage, hbmk (script) help applies.

BTW, if there is anything unclear/incomplete in the current help, please
speak up, I'd like to make it usable.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090517/0be68207/attachment-0001.html
From qiinfo at ig.com.br  Sat May 16 20:10:37 2009
From: qiinfo at ig.com.br (Rossine)
Date: Sat May 16 20:10:43 2009
Subject: [Harbour] Problem with TREG32 and Harbour 11047
In-Reply-To: <23538623.post@talk.nabble.com>
References: <23538623.post@talk.nabble.com>
Message-ID: <23578979.post@talk.nabble.com>


Hello,

Problem solved :)

Thank you very much.

Rossine.

-- 
View this message in context: http://www.nabble.com/Problem-with-TREG32-and-Harbour-11047-tp23538623p23578979.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From niki at synel.co.il  Sun May 17 01:36:38 2009
From: niki at synel.co.il (Chen Kedem)
Date: Sun May 17 01:36:50 2009
Subject: [Harbour] Harbour nomination for sf.net best project/best dev tool
Message-ID: <1A07FEDC778C3E4AA417F089511F859C14A8F872EE@Mail-yoq.SYNEL-COMPANY.LTD>

> Where are the links so I can determine which are incorrect?

The SOURCEFORGE.NET logo we have on the main page need to be changed according to new guidelines from SF, the link should point to the Harbour project page in SF (it used to be pointed at SF main page):


Here is the copy of my mail sent at Tue Mar 10 02:03:16 EDT 2009:
http://lists.harbour-project.org/pipermail/harbour/2009-March/016796.html

I got this mail from SF:
-----------------------------
Hi!  This message is being sent to you because you're an administrator of a
project at SourceForge.net.  I'd like to notify you about some changes
we've made to the SF.net logo that many of you display on your web pages.
The HTML we provided in the past for these logos linked to the front page
of SourceForge.net (http://sourceforge.net), and instead we would like them
to link to your project summary page (i.e., http://sourceforge.net/projects/harbour-project).
 We've also provided a few different sizes and colors for you to choose from, to help the
logo integrate better into the aesthetic design of your pages.
We have updated your project's Logo Display information section
accordingly, and request that you review it and update affected web pages
at your earliest convenience.  It can be found on your project's Analytics
page, under the Project Admin menu.
More details and instructions can be found at:
http://sourceforge.net/community/forum/topic.php?id=4666
Regards,
Ross Turk
Director of Community, SourceForge
-----------------------------

And here is the section from the Admin page:
-----------------------------
The available logos and the correct HTML to use for the Harbour project are:
Logo 1 (Dimensions: 80 x 15; Background: Black)
HTML Code:
<a href="http://sourceforge.net/projects/harbour-project"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=681&type=8" width="80" height="15" border="0" alt="Get Harbour at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a>

Logo 2 (Dimensions: 80 x 15; Background: Silver)
HTML Code:
<a href="http://sourceforge.net/projects/harbour-project"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=681&type=9" width="80" height="15" border="0" alt="Get Harbour at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a>

Logo 3 (Dimensions: 80 x 15; Background: White)
HTML Code:
<a href="http://sourceforge.net/projects/harbour-project"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=681&type=10" width="80" height="15" border="0" alt="Get Harbour at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a>

Logo 4 (Dimensions: 120 x 30; Background: Black)
HTML Code:
<a href="http://sourceforge.net/projects/harbour-project"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=681&type=11" width="120" height="30" border="0" alt="Get Harbour at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a>

Logo 5 (Dimensions: 120 x 30; Background: Silver)
HTML Code:
<a href="http://sourceforge.net/projects/harbour-project"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=681&type=12" width="120" height="30" border="0" alt="Get Harbour at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a>

Logo 6 (Dimensions: 120 x 30; Background: White)
HTML Code:
<a href="http://sourceforge.net/projects/harbour-project"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=681&type=13" width="120" height="30" border="0" alt="Get Harbour at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a>

Logo 7 (Dimensions: 150 x 40; Background: Black)
HTML Code:
<a href="http://sourceforge.net/projects/harbour-project"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=681&type=14" width="150" height="40" border="0" alt="Get Harbour at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a>

Logo 8 (Dimensions: 150 x 40; Background: Silver)
HTML Code:
<a href="http://sourceforge.net/projects/harbour-project"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=681&type=15" width="150" height="40" border="0" alt="Get Harbour at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a>

Logo 9 (Dimensions: 150 x 40; Background: White)
HTML Code:
<a href="http://sourceforge.net/projects/harbour-project"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=681&type=16" width="150" height="40" border="0" alt="Get Harbour at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a>
-----------------------------

The logo used today is:
<img src="http://sflogo.sourceforge.net/sflogo.php?group_id=681&amp;type=4" alt="SourceForge.net Logo" style="border-width: 0pt;" width="125" height="37">



=======================================================

And for the Harbour nomination, you should add a new badge on the main page for advertising this project nomination (the 10 projects with most nominations will be at the final vote):

On Wed May 13 18:58:16 EDT 2009, Szak?ts Viktor wrote:
http://lists.harbour-project.org/pipermail/harbour/2009-May/019149.html

Hi Vailton,
Would you please add this little icon to our webpage:
<a href="http://sourceforge.net/community/cca09/nominate/?project_name=Harbour&project_url=http://www.harbour-project.org/
"><img src="http://sourceforge.net/images/cca/cca_nominate.png"
border="0"/></a>

=======================================================


  Chen.
From info at fsgiudice.com  Sun May 17 02:40:11 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun May 17 02:40:21 2009
Subject: [Harbour] Mailing list slowness
In-Reply-To: <4A0EED44.7020705@philb.us>
References: <4A0EED44.7020705@philb.us>
Message-ID: <4A0FB14B.1020800@fsgiudice.com>



Il 16/05/2009 18.43, Phil Barnett ha scritto:
> Ok, I have the mailing list slowness fixed and the speed should be back 
> to normal.
> 
Thank you.

Best regards
Francesco
From mbelgrano at deltain.it  Sun May 17 03:19:37 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun May 17 03:20:02 2009
Subject: [Harbour] Re: hbmk2: any features still missing?
In-Reply-To: <18d502870905161530i321ee461p8c05c958b0643825@mail.gmail.com>
References: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com> 
	<4A096F60.8080905@belacy.belgorod.su>
	<18d502870905161530i321ee461p8c05c958b0643825@mail.gmail.com>
Message-ID: <609353e70905170019p54943a4dwd34784838c553778@mail.gmail.com>

I am working on italianthis is a preview
Using hbmk2
hbmk2 is a Tool that allow compile sample and large project
basic use of this tools is
hbmk2 ac_test
hbmk2 ac_test.prg
After this command you have ac_test.exe created
You can also immediaply execute simple using
hbmk2 ac_test -run

Hbmk2 is indipendent from Platform and Compiler that you use

Please also try the recommended way with hbmk2, it does
a similar job to your manual Makefile, but it's portable, works

for all future test programs and just one line.

If hbmk2 doesn't work for you for some reason, post your
-trace output here.

How compile several. PRG & lib?*hbmk2* test1 test2 testn -lmylib1 -lmylib2
-lmylibn
*hbmk2* test1.prg test2.prg testn.prg mylib1.lib mylib2.lib mylibn.lib

How create a lib?*hbmk2* myprg1.PRG myprg2.prg myrc.rc  -b -m  -*hblib*
 -omiolib.lib

How have additional information?-info -trace

How compile incremental?


How obain help?



2009/5/17 Viktor Szak?ts <harbour.01@syenar.hu>:
>>> Is there any important feature still missing from hbmk2?
>>>
>>
>>  Yes - documentation :), at least, very basic.
>
> Quite true, we have the -help option though. Writing comprehensible
> docs isn't my strongest side, so I'd appreciate if someone could
contribute
> something in this area. I can help in the process.
> That should probably be a man page which I've started already, but
> I didn't have the capacity to update/complete it.
> For one type of usage, hbmk (script) help applies.
> BTW, if there is anything unclear/incomplete in the current help, please
> speak up, I'd like to make it usable.
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090517/006de119/attachment.html
From niki at synel.co.il  Sun May 17 04:12:15 2009
From: niki at synel.co.il (Chen Kedem)
Date: Sun May 17 04:12:29 2009
Subject: [Harbour] hbmk2 require libpaths PSDK for bcc
Message-ID: <1A07FEDC778C3E4AA417F089511F859C14A8F872F0@Mail-yoq.SYNEL-COMPANY.LTD>

Did built Harbour in a while, and I see that since 2009-04-21 16:25 UTC+0200 Viktor Szakats,
it is now require to add PSDK to the libpath of BCC.

Now my question is why?
I work 10 years with Borland C++Builder 3/5 and never had to add such reference,
and I see no direct reference in my make or project files.
I do call Windows API from my programs and see no missing references during link.

Current bcc32.cfg and ilink32.cfg which I had for years, point to Borland's
.....\lib;.....\lib\obj;.....\lib\release

Why do I need now to link kernel32.lib to my Harbour application?
(this and other lib files that only exist in lib\psdk)


  Chen.
From harbour.01 at syenar.hu  Sun May 17 06:19:28 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May 17 06:19:34 2009
Subject: [Harbour] Re: hbmk2: any features still missing?
In-Reply-To: <609353e70905170019p54943a4dwd34784838c553778@mail.gmail.com>
References: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
	<4A096F60.8080905@belacy.belgorod.su>
	<18d502870905161530i321ee461p8c05c958b0643825@mail.gmail.com>
	<609353e70905170019p54943a4dwd34784838c553778@mail.gmail.com>
Message-ID: <18d502870905170319y679e2e81qbf3c2fabc8c948bd@mail.gmail.com>

Thanks.

On Sun, May 17, 2009 at 9:19 AM, Massimo Belgrano <mbelgrano@deltain.it>wrote:

> I am working on italianthis is a preview
> Using hbmk2
> hbmk2 is a Tool that allow compile sample and large project
> basic use of this tools is
> hbmk2 ac_test
> hbmk2 ac_test.prg
> After this command you have ac_test.exe created
> You can also immediaply execute simple using
> hbmk2 ac_test -run
>
> Hbmk2 is indipendent from Platform and Compiler that you use
>
> Please also try the recommended way with hbmk2, it does
> a similar job to your manual Makefile, but it's portable, works
>
> for all future test programs and just one line.
>
> If hbmk2 doesn't work for you for some reason, post your
> -trace output here.
>
> How compile several. PRG & lib?*hbmk2* test1 test2 testn -lmylib1 -lmylib2
> -lmylibn
> *hbmk2* test1.prg test2.prg testn.prg mylib1.lib mylib2.lib mylibn.lib
>

Just one comment:

Using .lib extension works, but isn't recommended, because
it creates non-portable command lines.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090517/7744592a/attachment.html
From marek.horodyski at interia.pl  Sun May 17 06:25:37 2009
From: marek.horodyski at interia.pl (marek.horodyski@interia.pl)
Date: Sun May 17 06:25:45 2009
Subject: [Harbour] serious error in harbour (mistake field and variable)
Message-ID: <20090517102537.E5BC67DC82D@f20.poczta.interia.pl>

Hi,
try compile and execute this sample code in Harbour.
It correctly work in Clipper and xHarbour.

*-------------------------------------------------
Function Main()
Public operator := Array( 14)
Cls
/*
dbCreate( 'test', {{'OPERATOR', 'C', 3, 0}})
dbUseArea( .t.,, 'TEST', 'TEST', .f.)
dbAppend()
Field->Operator := '106'
? Alias(), Field->operator, ValType( m->operator)
*/
operator[ 11] := {}
AADD( Operator[ 11], Array( 36))
AADD( operator[ 11], Array( 37))
AEval( operator[ 11][ 1], { | x, i| operator[ 11][ 1][ i] := PadL( i, 2, '0')})
Afill( operator[ 11][ 2], 'O')
Operator[ 12]:= { | x| Operator[ 11][ 2][ Ascan( Operator[ 11][ 1], PadL( x, 2, "0")) + 1]}


dbCreate( 'test', {{'OPERATOR', 'C', 3, 0}})
dbUseArea( .t.,, 'TEST', 'TEST', .f.)
dbAppend()
Field->Operator := '106'
? Alias(), Field->operator, ValType( m->operator), Version() // TEST 106 A Harbour 1.1.0dev (Rev. 11001)



? operator[ 12]:Eval( '04') // Error BASE/1068  Argument error: array access
                            // Called from MAIN(27)

inKey( 0)
Return Nil
*--------------------------------------------------

Regards,
Marek Horodyski



----------------------------------------------------------------------
Zrob sobie prezent. Wygraj nagrode!
Sprawdz >>  http://link.interia.pl/f2176 


From marek.horodyski at interia.pl  Sun May 17 06:26:42 2009
From: marek.horodyski at interia.pl (marek.horodyski@interia.pl)
Date: Sun May 17 06:26:48 2009
Subject: [Harbour] serious error in harbour (mistake field and variable)
Message-ID: <20090517102642.AEA6C7DC83A@f20.poczta.interia.pl>

Hi,=0Atry compile and execute this sample code in Harbour.=0AIt correctly w=
ork in Clipper and xHarbour.=0A=0A*----------------------------------------=
---------=0AFunction Main()=0APublic operator :=3D Array( 14)=0ACls=0A/*=0A=
dbCreate( 'test', {{'OPERATOR', 'C', 3, 0}})=0AdbUseArea( .t.,, 'TEST', 'TE=
ST', .f.)=0AdbAppend()=0AField->Operator :=3D '106'=0A? Alias(), Field->ope=
rator, ValType( m->operator)=0A*/=0Aoperator[ 11] :=3D {}=0AAADD( Operator[=
 11], Array( 36))=0AAADD( operator[ 11], Array( 37))=0AAEval( operator[ 11]=
[ 1], { | x, i| operator[ 11][ 1][ i] :=3D PadL( i, 2, '0')})=0AAfill( oper=
ator[ 11][ 2], 'O')=0AOperator[ 12]:=3D { | x| Operator[ 11][ 2][ Ascan( Op=
erator[ 11][ 1], PadL( x, 2, "0")) + 1]}=0A=0A=0AdbCreate( 'test', {{'OPERA=
TOR', 'C', 3, 0}})=0AdbUseArea( .t.,, 'TEST', 'TEST', .f.)=0AdbAppend()=0AF=
ield->Operator :=3D '106'=0A? Alias(), Field->operator, ValType( m->operato=
r), Version() // TEST 106 A Harbour 1.1.0dev (Rev. 11001)=0A=0A=0A=0A? oper=
ator[ 12]:Eval( '04') // Error BASE/1068  Argument error: array access=0A  =
                          // Called from MAIN(27)=0A=0AinKey( 0)=0AReturn N=
il=0A*--------------------------------------------------=0A=0ARegards,=0AMa=
rek Horodyski=0A=0A


----------------------------------------------------------------------
Studencie - zrb zdjcie! i Wygraj!
Kliknij >>> http://link.interia.pl/f2179

From alex at belacy.belgorod.su  Sun May 17 06:28:20 2009
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Sun May 17 06:28:25 2009
Subject: [Harbour] Re: hbmk2: any features still missing?
Message-ID: <571650d5c982d3254446b4461cfca840@83.234.176.3>

> BTW, if there is anything unclear/incomplete in the current help, please
speak up,I'd like to make it usable.
> 

 Ok. The main thing, which is unclear for me from the help is about scripts.
 What are .hbm files, are they different from .hbp ?
 Are the "libs", "cflags", "ldflags", "libpaths", "gui|..." the only options
of .hbp, or there may be others ( I ask this, because I was supposed that,
as usually, such kind of files may include any option from command line ) ?
 The help says, that ".hbp option files in current dir are automatically
processed." What may be a reason of having few .hbp files in current
directory and processing all of them while building a project ?
 What filters may be intended for ? As I suppose, they limits the usage of a
library for a choosen platform. But why may I need to designate a library in
a command line ( -l ), if I don't use it for current build process ?

Regards, Alexander.


________________________________________________


From harbour.01 at syenar.hu  Sun May 17 07:09:19 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May 17 07:09:25 2009
Subject: [Harbour] Re: hbmk2: any features still missing?
In-Reply-To: <571650d5c982d3254446b4461cfca840@83.234.176.3>
References: <571650d5c982d3254446b4461cfca840@83.234.176.3>
Message-ID: <18d502870905170409s2c2c5b21yc74398098c7f14a7@mail.gmail.com>

>
>  Ok. The main thing, which is unclear for me from the help is about
> scripts.
>  What are .hbm files, are they different from .hbp ?


1) .hbm is simple the extension of the command line, same
rules, same content, similar to many tools' @script functionality.
It serves (just like command line) to build *one project*.

2) .hbp is a lib parameter file, with just a subset of feature.
.hbp file serves to easily add a lib (or libs) to a project.

If you're a lib developer, you will need an .hbm file to create
your lib, and you can also provide a .hbp file for your users to
make it easy for them to include your lib in their projects.

 Are the "libs", "cflags", "ldflags", "libpaths", "gui|..." the only options
> of .hbp, or there may be others ( I ask this, because I was supposed that,
> as usually, such kind of files may include any option from command line ) ?


(see above)

 The help says, that ".hbp option files in current dir are automatically
> processed." What may be a reason of having few .hbp files in current
> directory and processing all of them while building a project ?


F.e. you have a project you want to build and you just copy
in the .hbp files belonging to your project and they're automatically
processed and your project built. See such scenario in contrib
'tests' dirs. You can disable this feature using -nohbp.


>  What filters may be intended for ? As I suppose, they limits the usage of
> a
> library for a choosen platform. But why may I need to designate a library
> in
> a command line ( -l ), if I don't use it for current build process ?


It's your choice, of course you can use a different command line
for different situations (platform or compilers), but if you want to
keep only one, you may use these filters to adapt your effective
cmdline automatically.

F.e. suppose I have a project for both MSVC and MinGW, but
some external libraries have different names in these two envs,
you can still have a single command line which works on both
platforms, by using this:

-l{msvc}libeay32s
-l{msvc}ssleay32s
-l{mingw}crypto
-l{mingw}eay32
-l{mingw}ssl
-l{mingw}ssl32

Or you may want to add platform/compiler dependent libs protected
by a filter to not break build when switching environments:

-l{allwin}hbwin

('allwin' means all Windows platforms, which is 'win' and 'wce')

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090517/0f966f20/attachment.html
From mbelgrano at deltain.it  Sun May 17 07:42:01 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun May 17 07:42:27 2009
Subject: [Harbour] Re: hbmk2: any features still missing?
In-Reply-To: <18d502870905170319y679e2e81qbf3c2fabc8c948bd@mail.gmail.com>
References: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com> 
	<4A096F60.8080905@belacy.belgorod.su>
	<18d502870905161530i321ee461p8c05c958b0643825@mail.gmail.com> 
	<609353e70905170019p54943a4dwd34784838c553778@mail.gmail.com> 
	<18d502870905170319y679e2e81qbf3c2fabc8c948bd@mail.gmail.com>
Message-ID: <609353e70905170442x68725550u88d0177f4b68cf75@mail.gmail.com>

You can't support .lib extension on linux platform?

>
> Just one comment:
>
> Using .lib extension works, but isn't recommended, because
> it creates non-portable command lines.
>
> Brgds,
> Viktor
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>


-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090517/6e72e248/attachment.html
From druzus at acn.waw.pl  Sun May 17 08:02:19 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun May 17 07:53:36 2009
Subject: [Harbour] serious error in harbour (mistake field and variable)
In-Reply-To: <20090517102642.AEA6C7DC83A@f20.poczta.interia.pl>
References: <20090517102642.AEA6C7DC83A@f20.poczta.interia.pl>
Message-ID: <20090517120219.GA17312@uran.home.aster.pl>

On Sun, 17 May 2009, marek.horodyski@interia.pl wrote:

Hi,

> try compile and execute this sample code in Harbour.
> It correctly work in Clipper and xHarbour.

I know about this incompatibility but so far I had doubts if I should
make it 100% Clipper compatible due to support for arrays in fields by
some RDDs.
The incompatibility can be exploited when undeclared variables are
used so only by code which cannot be cleanly compiled without warnings
when -w is used.

Here is the self contain example which shows the difference:

   proc main()
      field var3
      public VAR := "memvar"
      ? "undeclared:", var    // now only 'memvar' exists
      dbcreate( '_tst', {{"VAR",  "C", 5, 0}})
      use _tst
      dbappend(); field->var:= "field"
      ? "declared:", m->var, field->var
      ? "undeclared:", var    // now 'memvar' and 'field' exist,
                              // 'field' has higher priority
      errorBlock({|e|qqout("array access error:", e:args[1]),break(e)})
      begin sequence
         ? "undeclared with array index: "
         ?? var[1]            // now 'memvar' and 'field' exist
                              // but in Clipper [] forces using memvars only
      endsequence
   return

The preferred solution is cleaning the code so it can be compiled without
any warnings with -w switch (add 'memvar operator' to your code or use -a
compiler switch to declare operator variable) anyhow I accept the argument
that Harbour should be able to compile and execute existing Clipper code
replicating Clipper behavior as close as possible if it does not introduce
some bad bugs. In this case we are talking about code which operates on
some gray area using undeclared variables so replicating exact Clipper
behavior will not interact with code which can be cleanly compiled with
-w option so I'll make it 100% Clipper compatible in next commit.

best regards,
Przemek
From harbour.01 at syenar.hu  Sun May 17 07:56:15 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May 17 07:56:20 2009
Subject: [Harbour] Re: hbmk2: any features still missing?
In-Reply-To: <609353e70905170442x68725550u88d0177f4b68cf75@mail.gmail.com>
References: <18d502870905120414m3bd6356bw3f260cda1d39b2db@mail.gmail.com>
	<4A096F60.8080905@belacy.belgorod.su>
	<18d502870905161530i321ee461p8c05c958b0643825@mail.gmail.com>
	<609353e70905170019p54943a4dwd34784838c553778@mail.gmail.com>
	<18d502870905170319y679e2e81qbf3c2fabc8c948bd@mail.gmail.com>
	<609353e70905170442x68725550u88d0177f4b68cf75@mail.gmail.com>
Message-ID: <18d502870905170456x66c22872od72ba977a568d3b7@mail.gmail.com>

On Sun, May 17, 2009 at 1:42 PM, Massimo Belgrano <mbelgrano@deltain.it>wrote:

> You can't support .lib extension on linux platform?
>

No, I don't like to change input names provided by users.
Such hidden logic can create more problems than it solves
especially on the long run. Consider that in this case we
should also convert .a to .lib on Windows, plus who knows
what else combinations, some platforms may also support
both kind of names. This can quickly lead to a mess.

We already have -l which solves the problem perfectly, it's
enough to use it ;) It's not obligatory to use portable command
lines of course, someone may not need them, but IMO in
the documentation it's good to show best practices or
document such properties of alternative solutions)

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090517/8c62e03e/attachment.html
From harbour.01 at syenar.hu  Sun May 17 07:59:25 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May 17 07:59:32 2009
Subject: [Harbour] serious error in harbour (mistake field and variable)
In-Reply-To: <20090517120219.GA17312@uran.home.aster.pl>
References: <20090517102642.AEA6C7DC83A@f20.poczta.interia.pl>
	<20090517120219.GA17312@uran.home.aster.pl>
Message-ID: <18d502870905170459x43ce358dk23877b7127a0d9e1@mail.gmail.com>

Also this variation didn't work in my tests, although it would be even more
expected:

? m->operator[ 12 ]:Eval( '04' )

(well, I've never used m->, so I might be wrong)

Brgds,
Viktor

On Sun, May 17, 2009 at 2:02 PM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:

> On Sun, 17 May 2009, marek.horodyski@interia.pl wrote:
>
> Hi,
>
> > try compile and execute this sample code in Harbour.
> > It correctly work in Clipper and xHarbour.
>
> I know about this incompatibility but so far I had doubts if I should
> make it 100% Clipper compatible due to support for arrays in fields by
> some RDDs.
> The incompatibility can be exploited when undeclared variables are
> used so only by code which cannot be cleanly compiled without warnings
> when -w is used.
>
> Here is the self contain example which shows the difference:
>
>   proc main()
>      field var3
>      public VAR := "memvar"
>      ? "undeclared:", var    // now only 'memvar' exists
>      dbcreate( '_tst', {{"VAR",  "C", 5, 0}})
>      use _tst
>      dbappend(); field->var:= "field"
>      ? "declared:", m->var, field->var
>      ? "undeclared:", var    // now 'memvar' and 'field' exist,
>                              // 'field' has higher priority
>      errorBlock({|e|qqout("array access error:", e:args[1]),break(e)})
>      begin sequence
>         ? "undeclared with array index: "
>         ?? var[1]            // now 'memvar' and 'field' exist
>                              // but in Clipper [] forces using memvars only
>      endsequence
>   return
>
> The preferred solution is cleaning the code so it can be compiled without
> any warnings with -w switch (add 'memvar operator' to your code or use -a
> compiler switch to declare operator variable) anyhow I accept the argument
> that Harbour should be able to compile and execute existing Clipper code
> replicating Clipper behavior as close as possible if it does not introduce
> some bad bugs. In this case we are talking about code which operates on
> some gray area using undeclared variables so replicating exact Clipper
> behavior will not interact with code which can be cleanly compiled with
> -w option so I'll make it 100% Clipper compatible in next commit.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090517/6d6dea54/attachment-0001.html
From druzus at acn.waw.pl  Sun May 17 08:19:18 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun May 17 08:10:34 2009
Subject: [Harbour] serious error in harbour (mistake field and variable)
In-Reply-To: <18d502870905170459x43ce358dk23877b7127a0d9e1@mail.gmail.com>
References: <20090517102642.AEA6C7DC83A@f20.poczta.interia.pl>
	<20090517120219.GA17312@uran.home.aster.pl>
	<18d502870905170459x43ce358dk23877b7127a0d9e1@mail.gmail.com>
Message-ID: <20090517121918.GA18648@uran.home.aster.pl>

On Sun, 17 May 2009, Szak?ts Viktor wrote:
> Also this variation didn't work in my tests, although it would be even more
> expected:
> ? m->operator[ 12 ]:Eval( '04' )

No True. It perfectly works.
Just simply you haven't check that after adding M-> to above example
the RTE in this line stop to be generated but new one apeears inside
evaluated codeblock:
   { | x| Operator[ 11][ 2][ Ascan( Operator[ 11][ 1], PadL( x, 2,"0")) + 1]}
stored in m->operator[ 12 ].
Try to add m-> also to this code.

best regards,
Przemek
From harbour.01 at syenar.hu  Sun May 17 08:23:24 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun May 17 08:23:31 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <23574376.post@talk.nabble.com>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
	<23539642.post@talk.nabble.com> <23540931.post@talk.nabble.com>
	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>
	<23574376.post@talk.nabble.com>
Message-ID: <5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>

>>
>> I've moved new ole to hbwin, because otherwise we will very very
>> slowly adapt to
>> it, since very few users would test it.
>>
>
> Not exactly. It just broke all the linking process itself, simply
> unusable to test either.

You still didn't post what error you're getting. First you
wrote that you cannot compile, now you cannot link.

Again, we're in unstable state, you can go back to last working
hbwin.lib anytime, it's not obligatory to use the latest version,
if you do though, we'd like to hear about problems.

>> hbwin.lib - New implementation, with clean concepts, names, OLE, etc.
>> hbwinold.lib - Old implementation kept for compatibility until 3rd  
>> parties
>> can adapt. Code frozen.
>>
>
> Why to force existing scripts to be changed?

Nobody is forced to use the current SVN, this means nobody
is forced to rename anything. We hope to make hbwin
compatible on the mid run, so for Harbour users who can
wait a little bit, nothing should be changed. If we don't
manage or don't decide to create fully compatible hbwin
implementation, we can think about how to name them to
encourage users to switch to new, yet not break their
scripts.

> It should be like:
> hbole.lib - As current hbwin - make sure that it compiles and at  
> least links
> fine stand alone.
> hbwin.lib - As standard old one - and frozen for new work.
>
> I mean two parallel libs ao that user could switch over to other
> for testing purposes. Once matured, we could face out hbwin.

hbole and hbwin aren't two parallel libs, they don't provide
the same functionality, they are not plugin replacements for
each other, so what you say isn't an option.

Anyhow I've now read messages from Przemek and Mindaugas targeting
your specific AX problem, I hope it will be committed and we
can move on to next issues. IMO your GTWVG AX code can also quite
easily changed to use real pointers, or call an API. What we
should still keep in mind is that 3rd party code may well have
numeric pointers for some time, so some additional tweaks will be
needed to give a compatibility layer. Such stuff is currently
gathered in contrib/hbwin/legacy.c.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun May 17 08:27:07 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May 17 08:27:13 2009
Subject: [Harbour] serious error in harbour (mistake field and variable)
In-Reply-To: <20090517121918.GA18648@uran.home.aster.pl>
References: <20090517102642.AEA6C7DC83A@f20.poczta.interia.pl>
	<20090517120219.GA17312@uran.home.aster.pl>
	<18d502870905170459x43ce358dk23877b7127a0d9e1@mail.gmail.com>
	<20090517121918.GA18648@uran.home.aster.pl>
Message-ID: <18d502870905170527q5af5957fy8e6ef855e312ef40@mail.gmail.com>

Ops, I stand corrected.
Brgds,
Viktor

On Sun, May 17, 2009 at 2:19 PM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:

> On Sun, 17 May 2009, Szak?ts Viktor wrote:
> > Also this variation didn't work in my tests, although it would be even
> more
> > expected:
> > ? m->operator[ 12 ]:Eval( '04' )
>
> No True. It perfectly works.
> Just simply you haven't check that after adding M-> to above example
> the RTE in this line stop to be generated but new one apeears inside
> evaluated codeblock:
>    { | x| Operator[ 11][ 2][ Ascan( Operator[ 11][ 1], PadL( x, 2,"0")) +
> 1]}
> stored in m->operator[ 12 ].
> Try to add m-> also to this code.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090517/dd41407f/attachment.html
From dbtopas at dbtopas.lt  Sun May 17 09:31:12 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sun May 17 09:33:19 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>
References: <23521549.post@talk.nabble.com>	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>	<23527339.post@talk.nabble.com>
	<23535023.post@talk.nabble.com>	<23539642.post@talk.nabble.com>
	<23540931.post@talk.nabble.com>	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>	<23574376.post@talk.nabble.com>
	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>
Message-ID: <4A1011A0.3010308@dbtopas.lt>

> Anyhow I've now read messages from Przemek and Mindaugas targeting
> your specific AX problem, I hope it will be committed and we
> can move on to next issues. IMO your GTWVG AX code can also quite
> easily changed to use real pointers, or call an API. 

Hi,


I've put my hands a to change gtwvg to be compatible with OLE 
implementation, but I'm unable to test changes. Does anyone have gtwvg 
sample with working (or GPFing) ActiveX controls. I've tried to use 
contrib/gtwvg/tests samples. They do not give any error, but demowvg 
window is not redrawn also. Usage of pointers to store IDispatch* values 
does not changes anything, i.e. no GPF's, no error, but window is not 
redrawn. I'm not sure I have installed required ActiveX controls...

More comments about gtwvg state required.



Regards,
Mindaugas
From myorg63 at mail.ru  Sun May 17 10:05:46 2009
From: myorg63 at mail.ru (Petr Chornyj)
Date: Sun May 17 10:05:51 2009
Subject: [Harbour] hbtest result with Pelles C ver. 6.0
Message-ID: <23583642.post@talk.nabble.com>


Harbour Regression Test Suite
Copyright (c) 1999-2009, http://www.harbour-project.org/
---------------------------------------------------------------------------
      Version: Harbour 1.1.0dev (Rev. 11064)
     Compiler: Pelles ISO C Compiler 6.0 (32-bit)
           OS: Windows XP 5.1.2600 Service Pack 3
..
!  719 MAIN_HVMA(0)    Empty( {|x|x+x}               )         
       Result: .T.
     Expected: .F.
..
Test calls passed:       4736 ( 99.49 % )
Test calls failed:         24 ( 0.51 % )
                   ----------
            Total:       4760 ( Time elapsed: 0.11 seconds )

WARNING ! Failures detected

Regards,
Petr
-- 
View this message in context: http://www.nabble.com/hbtest-result-with-Pelles-C-ver.-6.0-tp23583642p23583642.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Sun May 17 10:19:32 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun May 17 10:19:37 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <4A1011A0.3010308@dbtopas.lt>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
	<23539642.post@talk.nabble.com> <23540931.post@talk.nabble.com>
	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>
	<23574376.post@talk.nabble.com>
	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>
	<4A1011A0.3010308@dbtopas.lt>
Message-ID: <23583794.post@talk.nabble.com>


Hello Mindaugus


Mindaugas Kavaliauskas wrote:
> 
> I've put my hands a to change gtwvg to be compatible with OLE 
> implementation, but I'm unable to test changes. Does anyone have gtwvg 
> sample with working (or GPFing) ActiveX controls. I've tried to use 
> contrib/gtwvg/tests samples. They do not give any error, but demowvg 
> window is not redrawn also. Usage of pointers to store IDispatch* values 
> does not changes anything, i.e. no GPF's, no error, but window is not 
> redrawn. I'm not sure I have installed required ActiveX controls...
> 
> More comments about gtwvg state required.
> 

Which prg did you use for test?

c:\>harbour\contrib\gtwvg\tests\hbmk2.exe demowvg
c:\>harbour\contrib\gtwvg\tests\demowvg.exe

The main window is pure console with some GUI elements, 
so it must be redrawn as it does not take use of ole.

Point to <xbpDialogs> and then click <ActiveX - Visualize a PDF>
if you have  Acrobat Reader installed or <ActiveX - Explorer DHTML>.

If you were using demoxbp.prg then main window itself hosts 
activex so you may not reach to any consclusion.

Can you drop me what changed did you made to test it?

Regards
Pritpal Bedi



-- 
View this message in context: http://www.nabble.com/Errors-with-11032-tp23521549p23583794.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Sun May 17 10:49:59 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun May 17 10:41:14 2009
Subject: [Harbour] hbtest result with Pelles C ver. 6.0
In-Reply-To: <23583642.post@talk.nabble.com>
References: <23583642.post@talk.nabble.com>
Message-ID: <20090517144959.GA27305@uran.home.aster.pl>

On Sun, 17 May 2009, Petr Chornyj wrote:

Hi,

> Harbour Regression Test Suite
> Copyright (c) 1999-2009, http://www.harbour-project.org/
> ---------------------------------------------------------------------------
>       Version: Harbour 1.1.0dev (Rev. 11064)
>      Compiler: Pelles ISO C Compiler 6.0 (32-bit)
>            OS: Windows XP 5.1.2600 Service Pack 3
> !  719 MAIN_HVMA(0)    Empty( {|x|x+x}               )         
>        Result: .T.
>      Expected: .F.
> ..
> Test calls passed:       4736 ( 99.49 % )
> Test calls failed:         24 ( 0.51 % )
>                    ----------
>             Total:       4760 ( Time elapsed: 0.11 seconds )
> WARNING ! Failures detected

10 against 1 that it's the problem with SWITCH() statment optimization
in new POCC.
Probably as workarond you can change in expropt2.c in function
   BOOL hb_compExprReduceEMPTY( HB_EXPR_PTR pSelf, HB_COMP_DECL )
the code:
      case HB_ET_CODEBLOCK:
         break;

to:
      case HB_ET_CODEBLOCK:
         fResult = FALSE;
         break;

and make clean Harbour build.
If it helps then report the bug to POCC author.

best regards,
Przemek
From druzus at users.sourceforge.net  Sun May 17 11:27:16 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Sun May 17 11:27:22 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11065] trunk/harbour
Message-ID: <E1M5iGi-0001dI-51@dn4whf1.ch3.sourceforge.com>

Revision: 11065
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11065&view=rev
Author:   druzus
Date:     2009-05-17 15:27:15 +0000 (Sun, 17 May 2009)

Log Message:
-----------
2009-05-17 17:35 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/pp/ppcore.c
    + added new  predefined macro __TIMESTAMP__

  * harbour/source/vm/classes.c
    ! fixed compilation in MT mode and HB_HASH_MSG_ITEMS macro

  * harbour/source/compiler/compi18n.c
    * translate '\' in source code references in .pot files to '/'

  * harbour/contrib/rddsql/sddodbc/odbcdd.c
    * cleared non ANSI C initialization

  * harbour/include/hbmacro.h
  * harbour/source/vm/macro.c
  * harbour/include/hbexprb.c
    ! force memvar context to undeclared variables used with array index
      operator []. Clipper compatible behavior

  * harbour/contrib/hbwin/hbwinole.h
  * harbour/contrib/hbwin/olecore.c
    + added hb_oleItemPut()

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/hbwinole.h
    trunk/harbour/contrib/hbwin/olecore.c
    trunk/harbour/contrib/rddsql/sddodbc/odbcdd.c
    trunk/harbour/include/hbexprb.c
    trunk/harbour/include/hbmacro.h
    trunk/harbour/source/compiler/compi18n.c
    trunk/harbour/source/pp/ppcore.c
    trunk/harbour/source/vm/classes.c
    trunk/harbour/source/vm/macro.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From snaiperis at users.sourceforge.net  Sun May 17 12:07:43 2009
From: snaiperis at users.sourceforge.net (snaiperis@users.sourceforge.net)
Date: Sun May 17 12:07:48 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11066] trunk/harbour
Message-ID: <E1M5itr-0002nl-4Y@dn4whf1.ch3.sourceforge.com>

Revision: 11066
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11066&view=rev
Author:   snaiperis
Date:     2009-05-17 16:07:42 +0000 (Sun, 17 May 2009)

Log Message:
-----------
2009-05-17 19:05 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
  * harbour/contrib/hbwin/hbwinole.h
  * harbour/contrib/hbwin/olecore.c
    + functions hb_oleParam(), hb_oleItemToVariant() made public

  * harbour/contrib/rddsql/hbrddsql.h
  * harbour/contrib/rddsql/sqlbase.c
    + added NULL SDD driver. It allows to use SQLBASE, SQLMIX RDD 
      without any real SDD driver. It could be usefull to implement 
      memory/array RDD
    * unspecified SDD methods are "inherited" from NULL SDD

  + harbour/contrib/rddsql/tests/arrayrdd.prg
    + "Array RDD" example added

  * harbour/contrib/rddsql/sddfb/fbirddd.c
  * harbour/contrib/rddsql/sddmy/mysqldd.c
  * harbour/contrib/rddsql/sddodbc/odbcdd.c
  * harbour/contrib/rddsql/sddpg/pgsqldd.c
    * deleted empty or default SDD methods. They are inherited from 
      NULL SDD now

  * harbour/contrib/rddsql/sddodbc/tests/test1.prg
    + added svn:keywords header
    * extended to show SQLMIX index features

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/hbwinole.h
    trunk/harbour/contrib/hbwin/olecore.c
    trunk/harbour/contrib/rddsql/hbrddsql.h
    trunk/harbour/contrib/rddsql/sddfb/fbirddd.c
    trunk/harbour/contrib/rddsql/sddmy/mysqldd.c
    trunk/harbour/contrib/rddsql/sddodbc/odbcdd.c
    trunk/harbour/contrib/rddsql/sddodbc/tests/test1.prg
    trunk/harbour/contrib/rddsql/sddpg/pgsqldd.c
    trunk/harbour/contrib/rddsql/sqlbase.c

Added Paths:
-----------
    trunk/harbour/contrib/rddsql/tests/arrayrdd.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Sun May 17 12:37:05 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Sun May 17 12:37:10 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11067] trunk/harbour
Message-ID: <E1M5jMH-0005xt-BS@3kljzd1.ch3.sourceforge.com>

Revision: 11067
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11067&view=rev
Author:   druzus
Date:     2009-05-17 16:37:04 +0000 (Sun, 17 May 2009)

Log Message:
-----------
2009-05-17 18:45 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/rddsql/sddmy/mysqldd.c
  * harbour/contrib/rddsql/sddpg/pgsqldd.c
  * harbour/contrib/rddsql/sddfb/fbirddd.c
  * harbour/contrib/rddsql/sddodbc/odbcdd.c
    * removed dummy declarations for functions eliminated by previous commit

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/rddsql/sddfb/fbirddd.c
    trunk/harbour/contrib/rddsql/sddmy/mysqldd.c
    trunk/harbour/contrib/rddsql/sddodbc/odbcdd.c
    trunk/harbour/contrib/rddsql/sddpg/pgsqldd.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From myorg63 at mail.ru  Sun May 17 12:38:42 2009
From: myorg63 at mail.ru (Petr Chornyj)
Date: Sun May 17 12:38:47 2009
Subject: [Harbour] hbtest result with Pelles C ver. 6.0
In-Reply-To: <20090517144959.GA27305@uran.home.aster.pl>
References: <23583642.post@talk.nabble.com>
	<20090517144959.GA27305@uran.home.aster.pl>
Message-ID: <23585083.post@talk.nabble.com>


Hi, Przemyslaw


Przemyslaw Czerpak-2 wrote:
> 
> Probably as workarond you can change in expropt2.c in function
>    BOOL hb_compExprReduceEMPTY( HB_EXPR_PTR pSelf, HB_COMP_DECL )
> the code:
>       case HB_ET_CODEBLOCK:
>          break;
> 
> to:
>       case HB_ET_CODEBLOCK:
>          fResult = FALSE;
>          break;
> 
> and make clean Harbour build.
> 

Yes, it's helps. After rebuild

Test calls passed:       4737 ( 99.51 % )
Test calls failed:         23 ( 0.49 % )
                   ----------
            Total:       4760 ( Time elapsed: 0.06 seconds )

Thank you.

Regards,
Petr
-- 
View this message in context: http://www.nabble.com/hbtest-result-with-Pelles-C-ver.-6.0-tp23583642p23585083.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sun May 17 13:44:47 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May 17 13:44:54 2009
Subject: [Harbour] hbmk2 require libpaths PSDK for bcc
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C14A8F872F0@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C14A8F872F0@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <18d502870905171044u4b15a952xba3c0b4aa4a1e4fb@mail.gmail.com>

Hi Chen,


> Now my question is why?
> I work 10 years with Borland C++Builder 3/5 and never had to add such
> reference,
> and I see no direct reference in my make or project files.
> I do call Windows API from my programs and see no missing references during
> link.
>
> Current bcc32.cfg and ilink32.cfg which I had for years, point to Borland's
> .....\lib;.....\lib\obj;.....\lib\release
>
> Why do I need now to link kernel32.lib to my Harbour application?
> (this and other lib files that only exist in lib\psdk)


hbmk2 uses a common set of Windows libraries for all
supported compilers which are automatically included in
link command. For convenience. For some reason BCC
chose to store some of these libs in its PSDK subdir.
Many ppl didn't have that in central configuration for some
other reasons (even if it's documented in their readme),
but added PSDK in local link commands. Some other
ppl didn't need it.

It's not about kernel32, which is automatically included
anyway, but libs like winspool (quite commonly used),
or mapi32. So removing kernel32 from the list wouldn't
solve the problem.

Overall I cannot see what could I do to fix this problem
with this compiler, but the configuration is so simple and
without any bad effects (in fact it's the proper way to
configure BCC), that I feel this is no problem users.

The other option is to try to fix such compiler configurations
by hbmk2. It's possible to do with some hacks, but it really
is a hack as it's not hbmk2's job to solve such problems.
Could also be broken if Codegear decides to change this
logic, so it's maintenance burden, which will be difficult to
fix for me not using newer versions of this compiler.

Anyhow I'll commit this hack for BCC55/58 (probably newers,
but I cannot confirm). [ BTW using this same hack I could
easily fix broken BCC installation due to missing / wrong
bcc32.cfg / ilink32.cfg files, this was also a problem for many
BCC users a while ago. ]

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090517/14b5dd4f/attachment.html
From vszakats at users.sourceforge.net  Sun May 17 13:52:33 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun May 17 13:52:37 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11068] trunk/harbour
Message-ID: <E1M5kXJ-0003fX-Ov@d5vjzd1.ch3.sourceforge.com>

Revision: 11068
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11068&view=rev
Author:   vszakats
Date:     2009-05-17 17:52:32 +0000 (Sun, 17 May 2009)

Log Message:
-----------
2009-05-17 19:40 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + Added automatic bcc configuration hack to add PSDK dir to
      the libpath list. This is to fix bcc installations where
      this isn't done in bcc configuration itself in bcc32.cfg,
      ilink32.cfg. PSDK dir is required for hbmk2 because most
      libs on the standard hbmk2 list of Windows system libs
      (like winspool) included in link process are stored in
      this subdir. It's still recommended to do this tweak in
      local bcc environment.
    ; Please test it.

  * utils/hbmk2/examples/contribf.hbp
    + Added hbqt.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/examples/contribf.hbp
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sun May 17 13:55:45 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun May 17 13:55:49 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11069] trunk/harbour
Message-ID: <E1M5kaP-0003i2-57@d5vjzd1.ch3.sourceforge.com>

Revision: 11069
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11069&view=rev
Author:   vszakats
Date:     2009-05-17 17:55:44 +0000 (Sun, 17 May 2009)

Log Message:
-----------
2009-05-17 19:42 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Just added bcc hack fixed to not cause problems when 
      bcc is explicitly selected, but the compiler cannot be 
      detected in path.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From info at fsgiudice.com  Sun May 17 14:08:30 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun May 17 14:08:42 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11065] trunk/harbour
In-Reply-To: <E1M5iGi-0001dI-51@dn4whf1.ch3.sourceforge.com>
References: <E1M5iGi-0001dI-51@dn4whf1.ch3.sourceforge.com>
Message-ID: <4A10529E.4000606@fsgiudice.com>



Il 17/05/2009 17.27, druzus@users.sourceforge.net ha scritto:
> 2009-05-17 17:35 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/vm/classes.c
>     ! fixed compilation in MT mode and HB_HASH_MSG_ITEMS macro

Thank you

Best Regards,
Francesco
From druzus at acn.waw.pl  Sun May 17 14:36:34 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun May 17 14:27:50 2009
Subject: [Harbour] hbtest result with Pelles C ver. 6.0
In-Reply-To: <23585083.post@talk.nabble.com>
References: <23583642.post@talk.nabble.com>
	<20090517144959.GA27305@uran.home.aster.pl>
	<23585083.post@talk.nabble.com>
Message-ID: <20090517183634.GA31251@uran.home.aster.pl>

On Sun, 17 May 2009, Petr Chornyj wrote:

Hi,

> > Probably as workarond you can change in expropt2.c in function
> >    BOOL hb_compExprReduceEMPTY( HB_EXPR_PTR pSelf, HB_COMP_DECL )
> > the code:
> >       case HB_ET_CODEBLOCK:
> >          break;
> > to:
> >       case HB_ET_CODEBLOCK:
> >          fResult = FALSE;
> >          break;
> > 
> > and make clean Harbour build.
> Yes, it's helps. After rebuild
> Test calls passed:       4737 ( 99.51 % )
> Test calls failed:         23 ( 0.49 % )
>                    ----------
>             Total:       4760 ( Time elapsed: 0.06 seconds )

So I suggest to not use this compiler until it will not be fixed.
It's possible that this bug will break also some other Harbour code
but it cannot be such easy located.

best regards,
Przemek
From bedipritpal at hotmail.com  Sun May 17 14:45:30 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun May 17 14:45:35 2009
Subject: [Harbour] hbtest result with Pelles C ver. 6.0
In-Reply-To: <20090517183634.GA31251@uran.home.aster.pl>
References: <23583642.post@talk.nabble.com>
	<20090517144959.GA27305@uran.home.aster.pl>
	<23585083.post@talk.nabble.com>
	<20090517183634.GA31251@uran.home.aster.pl>
Message-ID: <23586366.post@talk.nabble.com>


Hi


Przemyslaw Czerpak-2 wrote:
> 
> So I suggest to not use this compiler until it will not be fixed. 
> It's possible that this bug will break also some other Harbour code 
> but it cannot be such easy located. 
> 

Can you draft a small code which I can post to Pelle Orinius ?
V 6.0 is still a RC-1.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/hbtest-result-with-Pelles-C-ver.-6.0-tp23583642p23586366.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vailtom at gmail.com  Sun May 17 15:10:48 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Sun May 17 15:10:56 2009
Subject: [Harbour] Harbour nomination for sf.net best project/best dev 
	tool
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C14A8F872EE@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C14A8F872EE@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <531d7a750905171210o390ccefdwf1abffe26f382091@mail.gmail.com>

Yesterday and today I was missing and therefore could not respond, but
it is at least 3 days that I have all the changes the site ready and I
can not update the site!

I do not know if there is any relation with the problem of e-mail
list, but the FTP is not even asking for username and password ...
apparently the FTP service is disabled, how can I do to update your
content?

c:\Projects> ftp ftp.harbour-project.org
Connected to the harbor-project.org.
Connection terminated by remote host.

c:\Projects>
From harbour.01 at syenar.hu  Sun May 17 15:15:00 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May 17 15:15:06 2009
Subject: [Harbour] Harbour nomination for sf.net best project/best dev 
	tool
In-Reply-To: <531d7a750905171210o390ccefdwf1abffe26f382091@mail.gmail.com>
References: <1A07FEDC778C3E4AA417F089511F859C14A8F872EE@Mail-yoq.SYNEL-COMPANY.LTD>
	<531d7a750905171210o390ccefdwf1abffe26f382091@mail.gmail.com>
Message-ID: <18d502870905171215v3d066ccar140fdbfab2dcac89@mail.gmail.com>

I can access it via SCP (with WinSCP). I believe we've disabled FTP for
security reasons.
Brgds,
Viktor

On Sun, May 17, 2009 at 9:10 PM, Vailton Renato <vailtom@gmail.com> wrote:

> Yesterday and today I was missing and therefore could not respond, but
> it is at least 3 days that I have all the changes the site ready and I
> can not update the site!
>
> I do not know if there is any relation with the problem of e-mail
> list, but the FTP is not even asking for username and password ...
> apparently the FTP service is disabled, how can I do to update your
> content?
>
> c:\Projects> ftp ftp.harbour-project.org
> Connected to the harbor-project.org.
> Connection terminated by remote host.
>
> c:\Projects>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090517/0d55e0eb/attachment.html
From vailtom at gmail.com  Sun May 17 15:47:15 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Sun May 17 15:47:22 2009
Subject: [Harbour] Harbour nomination for sf.net best project/best dev 
	tool
In-Reply-To: <18d502870905140617p485956b4sb40a61be9421c58c@mail.gmail.com>
References: <68948A51-EE0E-4CBD-903F-025C8F49D751@syenar.hu>
	<531d7a750905140508r2bd7e05ala5699a5957c4dd30@mail.gmail.com>
	<18d502870905140617p485956b4sb40a61be9421c58c@mail.gmail.com>
Message-ID: <531d7a750905171247k15c3debfwc18bd99746947498@mail.gmail.com>

> I think right now we're missing page loads from sf.net stats?because
> of the missing/old link.

Is there a broken link on site or any valid reference? As I'm updating
it if someone has any tips will be welcome!

Best Regards,
Vailton Renato
From vailtom at gmail.com  Sun May 17 18:12:52 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Sun May 17 18:12:57 2009
Subject: [Harbour] Harbour nomination for sf.net best project/best dev 
	tool
In-Reply-To: <531d7a750905171247k15c3debfwc18bd99746947498@mail.gmail.com>
References: <68948A51-EE0E-4CBD-903F-025C8F49D751@syenar.hu>
	<531d7a750905140508r2bd7e05ala5699a5957c4dd30@mail.gmail.com>
	<18d502870905140617p485956b4sb40a61be9421c58c@mail.gmail.com>
	<531d7a750905171247k15c3debfwc18bd99746947498@mail.gmail.com>
Message-ID: <531d7a750905171512w17449228m40e8a96426f32d50@mail.gmail.com>

I managed to update the site successfully accessing via WinSCP. I put
a banner at the entrance of the site and updated the page of news with
this reference. Having completed this phase of the projects nomeating
will remove the banner and leave only the references in the page for
news.

If anyone can review the text in the site would, because I doubt if he
is completely correct. Any comments please post here.

Best Regards,
Vailton Renato
From harbour.01 at syenar.hu  Sun May 17 18:41:47 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May 17 18:41:55 2009
Subject: [Harbour] Harbour nomination for sf.net best project/best dev 
	tool
In-Reply-To: <531d7a750905171512w17449228m40e8a96426f32d50@mail.gmail.com>
References: <68948A51-EE0E-4CBD-903F-025C8F49D751@syenar.hu>
	<531d7a750905140508r2bd7e05ala5699a5957c4dd30@mail.gmail.com>
	<18d502870905140617p485956b4sb40a61be9421c58c@mail.gmail.com>
	<531d7a750905171247k15c3debfwc18bd99746947498@mail.gmail.com>
	<531d7a750905171512w17449228m40e8a96426f32d50@mail.gmail.com>
Message-ID: <18d502870905171541s2eae6c4ci4a8bb7139590f826@mail.gmail.com>

On Mon, May 18, 2009 at 12:12 AM, Vailton Renato <vailtom@gmail.com> wrote:

> I managed to update the site successfully accessing via WinSCP. I put
> a banner at the entrance of the site and updated the page of news with
> this reference. Having completed this phase of the projects nomeating
> will remove the banner and leave only the references in the page for
> news.


Thank you.

Now the sf.net logo is the new one, however I still cannot click on it to
go
to our sf.net page. Can you add a link for the logo to
http://sourceforge.net/projects/harbour-project/ ?

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090518/01edb9e1/attachment.html
From dbtopas at dbtopas.lt  Sun May 17 18:59:31 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sun May 17 19:01:37 2009
Subject: [Harbour] Harbour nomination for sf.net best project/best dev tool
In-Reply-To: <18d502870905171541s2eae6c4ci4a8bb7139590f826@mail.gmail.com>
References: <68948A51-EE0E-4CBD-903F-025C8F49D751@syenar.hu>	<531d7a750905140508r2bd7e05ala5699a5957c4dd30@mail.gmail.com>	<18d502870905140617p485956b4sb40a61be9421c58c@mail.gmail.com>	<531d7a750905171247k15c3debfwc18bd99746947498@mail.gmail.com>	<531d7a750905171512w17449228m40e8a96426f32d50@mail.gmail.com>
	<18d502870905171541s2eae6c4ci4a8bb7139590f826@mail.gmail.com>
Message-ID: <4A1096D3.6060603@dbtopas.lt>

Viktor Szak?ts wrote:
> Now the sf.net <http://sf.net> logo is the new one, however I still 
> cannot click on it to go 
> to our sf.net <http://sf.net> page. Can you add a link for the logo to 
> http://sourceforge.net/projects/harbour-project/ ?

Hi,


Is it ok that, nominate link redirects to different "Project URL" 
address in nomination vote form :
     http://www.harbour-project.org/
     http://sourceforge.net/projects/harbour-project/

Project name is in both cases the same "Harbour", though we are 
"harbour-project" on sf.net page.


Regards,
Mindaugas
From vailtom at gmail.com  Sun May 17 20:05:30 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Sun May 17 20:05:35 2009
Subject: [Harbour] Harbour nomination for sf.net best project/best dev 
	tool
In-Reply-To: <4A1096D3.6060603@dbtopas.lt>
References: <68948A51-EE0E-4CBD-903F-025C8F49D751@syenar.hu>
	<531d7a750905140508r2bd7e05ala5699a5957c4dd30@mail.gmail.com>
	<18d502870905140617p485956b4sb40a61be9421c58c@mail.gmail.com>
	<531d7a750905171247k15c3debfwc18bd99746947498@mail.gmail.com>
	<531d7a750905171512w17449228m40e8a96426f32d50@mail.gmail.com>
	<18d502870905171541s2eae6c4ci4a8bb7139590f826@mail.gmail.com>
	<4A1096D3.6060603@dbtopas.lt>
Message-ID: <531d7a750905171705n3443d3a0k22cb659d7b16a1f0@mail.gmail.com>

Hi,

I have  updated the link at the logo SF.NET and I sync the links that
appears on our website are equal to the on page SF.NET in the HB
project.

Regards,
Vailton Renato
From philb at philb.us  Sun May 17 21:53:05 2009
From: philb at philb.us (Phil Barnett)
Date: Sun May 17 21:52:03 2009
Subject: [Harbour] Harbour nomination for sf.net best project/best dev tool
In-Reply-To: <531d7a750905171210o390ccefdwf1abffe26f382091@mail.gmail.com>
References: <1A07FEDC778C3E4AA417F089511F859C14A8F872EE@Mail-yoq.SYNEL-COMPANY.LTD>
	<531d7a750905171210o390ccefdwf1abffe26f382091@mail.gmail.com>
Message-ID: <4A10BF81.6000707@philb.us>

Vailton Renato wrote:
> Yesterday and today I was missing and therefore could not respond, but
> it is at least 3 days that I have all the changes the site ready and I
> can not update the site!
>
> I do not know if there is any relation with the problem of e-mail
> list, but the FTP is not even asking for username and password ...
> apparently the FTP service is disabled, how can I do to update your
> content?
>
> c:\Projects> ftp ftp.harbour-project.org
> Connected to the harbor-project.org.
> Connection terminated by remote host.
I would prefer that you use scp, however it appears that a new version 
of proftp was being disturbed by a depricated directive in one of the 
scripts that I used to set it up for ftp on the legacy site The Oasis. I 
made a small change to the config and it's starting fine now.

Thanks for letting me know.
From niki at synel.co.il  Mon May 18 01:23:56 2009
From: niki at synel.co.il (Chen Kedem)
Date: Mon May 18 01:24:07 2009
Subject: [Harbour] Harbour nomination for sf.net best project/best dev tool
Message-ID: <1A07FEDC778C3E4AA417F089511F859C14A8F872F9@Mail-yoq.SYNEL-COMPANY.LTD>

> If anyone can review the text in the site would, because I doubt if he
> is completely correct. Any comments please post here.

The SF logo link is now Ok - Thanks.

I don't like the popup nomination badge, it block some of the site text and is just a
bit too "pushy". Can you put a small icon (fixed and not a popup), something like the
one in http://sourceforge.net/projects/harbour-project/


  Chen.
From vszakats at users.sourceforge.net  Mon May 18 02:26:57 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May 18 02:27:02 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11070] trunk/harbour
Message-ID: <E1M5wJN-0002xa-Tx@3kljzd1.ch3.sourceforge.com>

Revision: 11070
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11070&view=rev
Author:   vszakats
Date:     2009-05-18 06:26:56 +0000 (Mon, 18 May 2009)

Log Message:
-----------
2009-05-18 08:25 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    % bcc hack cleaned.

  * source/rtl/memoedit.prg
    * Minor.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/rtl/memoedit.prg
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Mon May 18 02:39:15 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May 18 02:39:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11071] trunk/harbour
Message-ID: <E1M5wVH-0003C6-1S@3kljzd1.ch3.sourceforge.com>

Revision: 11071
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11071&view=rev
Author:   vszakats
Date:     2009-05-18 06:39:14 +0000 (Mon, 18 May 2009)

Log Message:
-----------
2009-05-18 08:38 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + Added -map support for djgpp. (untested)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From sscc at mweb.co.za  Mon May 18 03:33:09 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Mon May 18 03:33:10 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11064] trunk/harbour
In-Reply-To: <E1M5KLg-0003St-05@bj8yhf1.ch3.sourceforge.com>
References: <E1M5KLg-0003St-05@bj8yhf1.ch3.sourceforge.com>
Message-ID: <4A110F35.8050906@mweb.co.za>

snaiperis@users.sourceforge.net wrote:

>   * harbour/contrib/rddsql/Makefile
>     + implemented ODBC driver for RDDSQL

Thank you for these major contributions.

Out of interest, and in your opinion, does using ODBC instead of native 
libraries make a big performance difference?

Regards
Alex
From vszakats at users.sourceforge.net  Mon May 18 03:58:13 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May 18 03:58:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11072] trunk/harbour
Message-ID: <E1M5xjh-0001Ig-So@bj8yhf1.ch3.sourceforge.com>

Revision: 11072
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11072&view=rev
Author:   vszakats
Date:     2009-05-18 07:58:12 +0000 (Mon, 18 May 2009)

Log Message:
-----------
2009-05-18 09:57 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/rddsql/sddmy/mysqldd.c
  * contrib/rddsql/sddpg/pgsqldd.c
  * contrib/rddsql/sddfb/fbirddd.c
  * contrib/rddsql/sddodbc/odbcdd.c
    % Minor opt.

  * utils/hbmk2/hbmk2.hu_HU.po
    * Updated.

  * utils/hbmk2/hbmk2.prg
    * Minor updates (help text).

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/rddsql/sddfb/fbirddd.c
    trunk/harbour/contrib/rddsql/sddmy/mysqldd.c
    trunk/harbour/contrib/rddsql/sddodbc/odbcdd.c
    trunk/harbour/contrib/rddsql/sddpg/pgsqldd.c
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.po
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Mon May 18 04:51:46 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon May 18 04:43:00 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11052] trunk/harbour
In-Reply-To: <E1M4s24-0005ya-FQ@bj8yhf1.ch3.sourceforge.com>
References: <E1M4s24-0005ya-FQ@bj8yhf1.ch3.sourceforge.com>
Message-ID: <20090518085145.GA8343@uran.home.aster.pl>

On Fri, 15 May 2009, vszakats@users.sourceforge.net wrote:

Hi,

> 2009-05-15 09:21 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * include/hbextern.ch
>   * source/rtl/Makefile
>   + source/rtl/lang.c
>     + Added HB_USERLANG() function to retrieve ietf code of
>       language set by user. Works also on Windows.

In this code and also in other places you are using lang IDs in
the form <LL>-<CC>. Nearly all tools I'm using use a little bit
different convention and store LANG id in the form <LL>_<CC>
where <LL> is an ISO 639 two-lower-letter language code and <CC>
is an ISO 3166 two-upper-letter country code.
It's also the convention used for LNAG envvar which has form:
   <LL>_<CC>[.<enconding>]
f.e. in my current computer `echo $LANG` returns:
   pl_PL.UTF-8
Can we use the same convention instead of our own?
As I can see HB_USERLANG() also looks for LC_ALL and LC_MESSAGES envvars.
I think you should check for "C" and "POSIX" values which are often
used to disable some type of national settings and do not return then
as language ID.

best regards,
Przemek
From druzus at acn.waw.pl  Mon May 18 04:58:40 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon May 18 04:49:54 2009
Subject: [Harbour] Re: SF.net SVN: harbour-project:[11050] trunk/harbour
In-Reply-To: <3DB9C6C8-3240-48D8-9FE0-1F38E4F72FF9@syenar.hu>
References: <E1M4eTv-0003Pd-IF@c3vjzd1.ch3.sourceforge.com>
	<3DB9C6C8-3240-48D8-9FE0-1F38E4F72FF9@syenar.hu>
Message-ID: <20090518085840.GB8343@uran.home.aster.pl>

On Thu, 14 May 2009, Szak?ts Viktor wrote:

Hi,

>> 2009-05-14 19:20 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>>  * harbour/bin/hb-func.sh
>>    * respect HB_USER_LIBS creating hbmk.cfg
> Is this for sure what you intented? I'm asking because
> this way someone building Harbour while having HB_USER_LIBS
> set (which may contain any local libs), will be hard
> coded into the final distribution. This could still be okay,
> although builders will now have to take care of clearing this
> envvar before creating a public release, I expect someone
> will forget it. At the same time, hbmk2 will pick envvar
> HB_USER_LIBS anyway, so I'm not sure it's necessary to have
> it hard coded also in hbmk.cfg, unless you want to create
> an internal distro with some extra bundled libs.

HB_USER_LIBS is used as default library list by hb* scripts.
I wanted to use the same name. We can change of course but it
should be synced with envvar name used by hb* scripts.

> To have the same end-result without such side-effect,
> maybe reading a different envvar at build time would be
> better, like HB_USER_EXTRA_LIBS, HB_USER_DEF_LIBS or similar.

I see you used HB_USER_LIBS_DEF.
I'd suggested to use name similar to the other ones we use for default
settings, f.e. CC_HB_USER_LIBS.

best regards,
Przemek
From druzus at users.sourceforge.net  Mon May 18 04:55:07 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Mon May 18 04:55:16 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11073] trunk/harbour
Message-ID: <E1M5ycl-0006kE-Ct@3kljzd1.ch3.sourceforge.com>

Revision: 11073
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11073&view=rev
Author:   druzus
Date:     2009-05-18 08:55:06 +0000 (Mon, 18 May 2009)

Log Message:
-----------
2009-05-18 11:03 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/filesys.c
    ! fixed OpenWatcom Linux builds which does not support utimes() yet.

  * harbour/contrib/rddads/ads1.c
    * pacified two BCC warnings

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/rddads/ads1.c
    trunk/harbour/source/rtl/filesys.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Mon May 18 05:01:52 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon May 18 05:02:02 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11052] trunk/harbour
In-Reply-To: <20090518085145.GA8343@uran.home.aster.pl>
References: <E1M4s24-0005ya-FQ@bj8yhf1.ch3.sourceforge.com>
	<20090518085145.GA8343@uran.home.aster.pl>
Message-ID: <375E798D-6846-42F3-9EB2-75F9D91E306F@syenar.hu>

Hi Przemek,

>> 2009-05-15 09:21 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>>  * include/hbextern.ch
>>  * source/rtl/Makefile
>>  + source/rtl/lang.c
>>    + Added HB_USERLANG() function to retrieve ietf code of
>>      language set by user. Works also on Windows.
>
> In this code and also in other places you are using lang IDs in
> the form <LL>-<CC>. Nearly all tools I'm using use a little bit
> different convention and store LANG id in the form <LL>_<CC>
> where <LL> is an ISO 639 two-lower-letter language code and <CC>
> is an ISO 3166 two-upper-letter country code.
> It's also the convention used for LNAG envvar which has form:
>   <LL>_<CC>[.<enconding>]

AFAICS the standard says that the delimiter is '-', that's
why I choose it. Many tools use '_', that's true (not all though).
Sometimes (like in filenames) '_' is more convenient than '-'.

F.e. in hbmk2 code I'm doing the conversion locally from '-'
to '_', but internally I'm dealing with '-' flavor. F.e IMO
it's best to store standard lang code in databases, where you
don't know where will you use them in the future.

If we decide it's better to use '_' we can do it though.

Anyhow if LANG returns '_' (also on OSX), we should fix
HB_USERLANG() to convert it to '-' to stay consistent.

> f.e. in my current computer `echo $LANG` returns:
>   pl_PL.UTF-8
> Can we use the same convention instead of our own?

This function does strip lang from the encoding, so it should
in this case return pl_PL. Anyhow please feel free to modify
it as you feel it best. We should in the future also deal
with the encoding part, when we have the infrastructure
inside Harbour.

> As I can see HB_USERLANG() also looks for LC_ALL and LC_MESSAGES  
> envvars.
> I think you should check for "C" and "POSIX" values which are often
> used to disable some type of national settings and do not return then
> as language ID.

You must be right, but I'm lost here, again please do
any modification you think is good.

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon May 18 05:07:05 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon May 18 05:07:14 2009
Subject: [Harbour] Re: SF.net SVN: harbour-project:[11050] trunk/harbour
In-Reply-To: <20090518085840.GB8343@uran.home.aster.pl>
References: <E1M4eTv-0003Pd-IF@c3vjzd1.ch3.sourceforge.com>
	<3DB9C6C8-3240-48D8-9FE0-1F38E4F72FF9@syenar.hu>
	<20090518085840.GB8343@uran.home.aster.pl>
Message-ID: <F698AA90-A937-48B8-977B-AE5858991C5F@syenar.hu>

>>>
>> an internal distro with some extra bundled libs.
>
> HB_USER_LIBS is used as default library list by hb* scripts.
> I wanted to use the same name. We can change of course but it
> should be synced with envvar name used by hb* scripts.
>
>> To have the same end-result without such side-effect,
>> maybe reading a different envvar at build time would be
>> better, like HB_USER_EXTRA_LIBS, HB_USER_DEF_LIBS or similar.
>
> I see you used HB_USER_LIBS_DEF.
> I'd suggested to use name similar to the other ones we use for default
> settings, f.e. CC_HB_USER_LIBS.

No problem for me. [ maybe we should change them all to
HB_CC_* to stay within the HB_ namespace, or HB_DEF_*?,
I'm not sure what CC stands for. ]

I'll change to CC_* in the meantime.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Mon May 18 05:20:35 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May 18 05:20:39 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11074] trunk/harbour
Message-ID: <E1M5z1P-0003fY-7f@bj8yhf1.ch3.sourceforge.com>

Revision: 11074
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11074&view=rev
Author:   vszakats
Date:     2009-05-18 09:20:34 +0000 (Mon, 18 May 2009)

Log Message:
-----------
2009-05-18 11:19 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * bin/hb-func.sh
    ! HB_USER_LIBS_DEF -> CC_HB_USER_LIBS
    ; QUESTION: Is it a problem to move these to HB_ namespace?

  * source/rtl/lang.c
    ! Fixed to return language IDs with consistent '-' separators
      instead of '_'. We may change this to consistent '_', if
      we decide it's better.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/hb-func.sh
    trunk/harbour/source/rtl/lang.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Mon May 18 05:24:49 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Mon May 18 05:24:54 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11075] trunk/harbour
Message-ID: <E1M5z5V-0003IM-DD@dn4whf1.ch3.sourceforge.com>

Revision: 11075
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11075&view=rev
Author:   druzus
Date:     2009-05-18 09:24:44 +0000 (Mon, 18 May 2009)

Log Message:
-----------
2009-05-18 11:33 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/itemapi.c
    * removed some old BCC hacks. They do not resolve possible problem
      with FPE errors so there is no sense to keep them.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/vm/itemapi.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Mon May 18 05:35:29 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon May 18 05:26:43 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11074] trunk/harbour
In-Reply-To: <E1M5z1P-0003fY-7f@bj8yhf1.ch3.sourceforge.com>
References: <E1M5z1P-0003fY-7f@bj8yhf1.ch3.sourceforge.com>
Message-ID: <20090518093529.GA4703@uran.home.aster.pl>

On Mon, 18 May 2009, vszakats@users.sourceforge.net wrote:

Hi,

> 2009-05-18 11:19 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * bin/hb-func.sh
>     ! HB_USER_LIBS_DEF -> CC_HB_USER_LIBS
>     ; QUESTION: Is it a problem to move these to HB_ namespace?
>   * source/rtl/lang.c
>     ! Fixed to return language IDs with consistent '-' separators
>       instead of '_'. We may change this to consistent '_', if
>       we decide it's better.

Thank you.

best regards,
Przemek
From sscc at mweb.co.za  Mon May 18 06:12:37 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Mon May 18 06:12:38 2009
Subject: [Harbour] $ operator
Message-ID: <4A113495.8090908@mweb.co.za>

Hi all

I was looking at letodb and there was some use of the the $ operator to search 
in arrays. However, this would crash in Harbour.

Is there any good *technical* reason not to implement this in Harbour? It's use 
with arrays certainly feels intuitive.

Thanks
Alex
From harbour.01 at syenar.hu  Mon May 18 06:32:47 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon May 18 06:33:00 2009
Subject: [Harbour] $ operator
In-Reply-To: <4A113495.8090908@mweb.co.za>
References: <4A113495.8090908@mweb.co.za>
Message-ID: <F3469E7A-200A-4EE9-87A0-0597C6ABDE06@syenar.hu>

> I was looking at letodb and there was some use of the the $ operator  
> to search in arrays. However, this would crash in Harbour.
>
> Is there any good *technical* reason not to implement this in  
> Harbour? It's use with arrays certainly feels intuitive.

It's a hidden extension very difficult to track down,
which makes .prg code prone to break when ported to
other xbase compilers (enough to see this example
on LetoDB). It can also break valid Clipper code in
some situations.

It's possible to overload $ operator to achieve the
same effect though in Harbour. It's implemented in
xhb.lib.

Brgds,
Viktor

From zen25000 at zen.co.uk  Mon May 18 06:37:41 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Mon May 18 06:37:07 2009
Subject: [Harbour] Harbour nomination for sf.net best project/best dev tool
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C14A8F872F9@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C14A8F872F9@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <4A113A75.5030402@zen.co.uk>

Anyone else getting this after responding to the confirmation email?

Error
Could not find nomination with that confirmation hash, or nominations 
are already confirmed.

From dbtopas at dbtopas.lt  Mon May 18 07:31:46 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon May 18 07:33:50 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11064] trunk/harbour
In-Reply-To: <4A110F35.8050906@mweb.co.za>
References: <E1M5KLg-0003St-05@bj8yhf1.ch3.sourceforge.com>
	<4A110F35.8050906@mweb.co.za>
Message-ID: <4A114722.9000700@dbtopas.lt>

Hi,


Alex Strickland wrote:
>>   * harbour/contrib/rddsql/Makefile
>>     + implemented ODBC driver for RDDSQL
> 
> Thank you for these major contributions.
> 
> Out of interest, and in your opinion, does using ODBC instead of native 
> libraries make a big performance difference?

The only ODBC application I've ever tried to write in my life is 
contrib/rddsql/sddodbc/tests/test1.prg, so, I have no idea that the 
answer is. I would expect to be it a little slower on client part (I 
mean result set manipulation).

The only reason I've wrote this is that it makes an easy access to .mdb 
(or other specific MicroSoft databases), and writing of SDD driver is "a 
few" lines of code, most of these "few" lines can be copied from another 
SDD driver.

One more SDD driver I am thinking about is ADO SDD. But I'm not sure if 
it is worth to invest time. Using IDispatch* interface will make result 
set manipulation even slower (character message names should be resolved 
to do IDispatch call). Using more low level interface (I guess it is 
called OLE DB) requires using of many interfaces : IADOConnection, 
IRowset, IColumnsInfo, ... The full list is on 
http://msdn.microsoft.com/en-us/library/ms709709(VS.85).aspx and has 81 
(!) interface in specification. I do not want to put my hands on dirty 
things like this.


Regards,
Mindaugas

From vailtom at gmail.com  Mon May 18 07:37:55 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Mon May 18 07:38:00 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11064] trunk/harbour
In-Reply-To: <4A114722.9000700@dbtopas.lt>
References: <E1M5KLg-0003St-05@bj8yhf1.ch3.sourceforge.com>
	<4A110F35.8050906@mweb.co.za> <4A114722.9000700@dbtopas.lt>
Message-ID: <531d7a750905180437ocf86c3ftc0052a61f5e22f4a@mail.gmail.com>

The native interface is much faster than ODBC and ADO, because they
usually represent a layer on the native DLL if I remember well. So
here in the company we use whenever possible direct access to the
native DLL.

Regards,
Vailton Renato
From qiinfo at ig.com.br  Mon May 18 08:24:40 2009
From: qiinfo at ig.com.br (Rossine)
Date: Mon May 18 08:24:46 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <23521549.post@talk.nabble.com>
References: <23521549.post@talk.nabble.com>
Message-ID: <23595864.post@talk.nabble.com>


Hello all,

This error, still persists:

[ERROR]

   Error description: Error BASE/3012  Argument error: NEW
   Args:
     [   1] = N   1470288

Stack Calls
===========
   Called from:  => HB_OLEAUTO:NEW(0)
   Called from: classes\ACTIVEX.PRG => TACTIVEX:NEW(0)
   Called from: webexp.prg => MAIN(10)

[ENDERROR]

This is part of the code of ACTIVEX.PRG:

[CODE]

METHOD New( oWnd, cProgID, nRow, nCol, nWidth, nHeight ) CLASS TActiveX

   DEFAULT oWnd := GetWndDefault(), nRow := 0, nCol := 0, nWidth := 200,;
           nHeight := 200

   ::nTop    = nRow
   ::nLeft   = nCol
   ::nBottom = nRow + nHeight
   ::nRight  = nCol + nWidth
   ::oWnd    = oWnd
   ::nId     = ::GetNewId()
   ::nStyle  = nOR( WS_CHILD, WS_VISIBLE, WS_TABSTOP )
   ::cProgID = cProgID
   ::cString = ActXString( cProgID )

   ::Register()

   if ! Empty( oWnd:hWnd )
      ::Create()
      oWnd:AddControl( Self )
      ::hActiveX = CreateActiveX( ::hWnd, cProgID, Self )
      ::oOleAuto = TOleauto():New( ActXPdisp( ::hActiveX ) ) && HERE THIS
ERROR
      ::nTop = nRow
      ::nLeft = nCol
      ::nWidth = nWidth
      ::nHeight = nHeight
      ::ReadTypes()
   else
      oWnd:DefControl( Self )
   endif

return Self

[ENDCODE]

...and the sample WEBEXP.PRG

[SAMPLE]

#include "FiveWin.ch"

function Main()

   local oWnd, oActiveX
   local cEvents := ""

   DEFINE WINDOW oWnd TITLE "FiveWin ActiveX Support"

   oActiveX = TActiveX():New( oWnd, "Shell.Explorer" )

   oWnd:oClient = oActiveX // To fill the entire window surface

   // oActiveX:Do( "GoHome" )
   oActiveX:Do( "Navigate", "http://www.google.com.br" )

   oActiveX:SetProp( "StatusBar", .t. )
   
   // MsgInfo( oActiveX:GetProp( "StatusBar" ) )

   oActiveX:bOnEvent = { | event, aParams, pParams | cEvents += EventInfo(
event, aParams, pParams, oActiveX ) }

   ACTIVATE WINDOW oWnd ;
      VALID ( MemoEdit( cEvents ), .t. )
      
return nil

function EventInfo( event, aParams, pParams, oActiveX )

   local cMsg := "Event: " + cValToChar( event ) + CRLF
   local n
   
   cMsg += "Params: " + CRLF
   
   for n = 1 to Len( aParams )
      cMsg += cValToChar( aParams[ n ] ) + CRLF
   next

   if event == "BeforeNavigate2"
      // MsgInfo( aParams[ 2 ] )
      // SetEventParam( pParams, 7, .t. ) // Comment this to allow
navigation
   endif

return cMsg + CRLF

[ENDSAMPLE]

I am using harbour 11075

Compiling the example above, using MSVC when this error occurred and always
performed well with BCC, is the same error :(

How to fix this ?

Best Regards,

Rossine.

-- 
View this message in context: http://www.nabble.com/Errors-with-11032-tp23521549p23595864.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dbtopas at dbtopas.lt  Mon May 18 08:38:38 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon May 18 08:40:42 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <23583794.post@talk.nabble.com>
References: <23521549.post@talk.nabble.com>	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>	<23527339.post@talk.nabble.com>
	<23535023.post@talk.nabble.com>	<23539642.post@talk.nabble.com>
	<23540931.post@talk.nabble.com>	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>	<23574376.post@talk.nabble.com>	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>	<4A1011A0.3010308@dbtopas.lt>
	<23583794.post@talk.nabble.com>
Message-ID: <4A1156CE.9050407@dbtopas.lt>

Hello Pritpul,
>> I've put my hands a to change gtwvg to be compatible with OLE 
>> implementation, but I'm unable to test changes. Does anyone have gtwvg 
>> sample with working (or GPFing) ActiveX controls. I've tried to use 
>> contrib/gtwvg/tests samples. They do not give any error, but demowvg 
>> window is not redrawn also. Usage of pointers to store IDispatch* values 
>> does not changes anything, i.e. no GPF's, no error, but window is not 
>> redrawn. I'm not sure I have installed required ActiveX controls...
>>
>> More comments about gtwvg state required.
>>
> 
> Which prg did you use for test?

Both.

> If you were using demoxbp.prg then main window itself hosts 
> activex so you may not reach to any consclusion.

The middle part of mail window is not redrawn, but I get no error.


> Can you drop me what changed did you made to test it?
Here it is:

Index: C:/harboursvn/contrib/gtwvg/wvgax.prg
===================================================================
--- C:/harboursvn/contrib/gtwvg/wvgax.prg	(revision 11075)
+++ C:/harboursvn/contrib/gtwvg/wvgax.prg	(working copy)
@@ -155,7 +155,7 @@
     ::CLSID      := cCLSID
     ::license    := cLicense

-   ::hObj       := 0
+   ::hObj       := NIL
     ::hSink      := 0

     ::hContainer := ::oParent:getHWND()
@@ -177,19 +177,19 @@
                                      ::aPos[ 1 ], ::aPos[ 2 ], ::aSize[ 
1 ], ::aSize[ 2 ], ;
                                      ::style, ::exStyle, NIL, @hx, @pUnk )
     #endif
-   if ::hObj == 0
+   if EMPTY( ::hObj )
        Return NIL
     endif

     /* Required as to AddRef() to self */
-   TOleAuto():New( ::hObj )
+   /* TOleAuto():New( ::hObj )  Collectible pointers do the job */

     ::oParent:addChild( SELF )
     ::hWnd := hx

     HB_AX_AtlSetVerb( ::hWnd, pUnk, -4 )

-   IF ::hObj <> 0  .AND. !Empty( ::hEvents )
+   IF ! EMPTY( ::hObj )  .AND. !Empty( ::hEvents )
        ::AdviseEvents()
     ENDIF

@@ -223,7 +223,7 @@

     BEGIN SEQUENCE

-   IF hb_IsNumeric( ::hObj ) .and. ::hObj <> 0
+   IF ! EMPTY( ::hObj )

        IF Win_IsWindow( ::hWnd )
           Win_DestroyWindow( ::hWnd )
===================================================================



Index: C:/harboursvn/contrib/gtwvg/wvgsink.c
===================================================================
--- C:/harboursvn/contrib/gtwvg/wvgsink.c	(revision 11075)
+++ C:/harboursvn/contrib/gtwvg/wvgsink.c	(working copy)
@@ -101,6 +101,7 @@
  #include "hbvm.h"
  #include "hbstack.h"
  #include "hbthread.h"
+#include "..\hbwin\hbwinole.h"

  #include <shlobj.h>
  #include <objbase.h>
@@ -111,7 +112,7 @@
  #include <ole2.h>
  #include <oleauto.h>

-
+/*
  #if defined( __cplusplus ) && \
     ( defined( __BORLANDC__ ) || defined( _MSC_VER ) || \
       ( defined(__WATCOMC__) && ( __WATCOMC__ >= 1280 ) ) )
@@ -120,6 +121,8 @@
  #  define HB_ID_REF( id )     ( &(id) )
  #endif

+*/
+
  /*----------------------------------------------------------------------*/

  #if defined(__BORLANDC__) && !defined(HB_ARCH_64BIT)
@@ -139,10 +142,7 @@
  typedef HRESULT ( CALLBACK *PATLAXCREATECONTROL )( LPCOLESTR, HWND, 
IStream*, IUnknown** );
  typedef HRESULT ( CALLBACK *PATLAXCREATECONTROLEX )( LPCOLESTR, HWND, 
IStream*, IUnknown**, IUnknown**, REFIID, IUnknown* );
  /*----------------------------------------------------------------------*/
-HB_EXPORT void hb_oleItemToVariant( VARIANT *pVariant, PHB_ITEM pItem );

-HRESULT hb_oleVariantToItem( PHB_ITEM pItem, VARIANT *pVariant );
-
  /* Switch it on when required tracing. While committing switch it off */
  #if 0
  #define __HBTOOUT__
@@ -707,7 +707,7 @@
     LPIID                riid  = ( LPIID ) &IID_IDispatch;
     int                  n = 0;

-   hr = SetupConnectionPoint( ( device_interface* ) ( HB_PTRDIFF ) 
hb_parnint( 1 ), ( REFIID ) riid, ( void** ) (void*) &hSink, &n ) ;
+   hr = SetupConnectionPoint( ( device_interface* ) hb_oleParam( 1 ), ( 
REFIID ) riid, ( void** ) (void*) &hSink, &n ) ;

     hSink->pEvents = hb_itemNew( hb_param( 4, HB_IT_ANY ) );

@@ -881,7 +881,7 @@
           {
              pUnk->lpVtbl->QueryInterface( pUnk, HB_ID_REF( 
IID_IDispatch ), ( void** ) (void*) &obj );
              pUnk->lpVtbl->Release( pUnk );
-            hb_retnint( ( HB_PTRDIFF ) obj );
+            hb_itemReturnRelease( hb_oleItemPut( NULL, obj ) );

              #if 0
              {
@@ -898,7 +898,7 @@

              pUnkCtrl->lpVtbl->QueryInterface( pUnkCtrl, HB_ID_REF( 
IID_IDispatch ), ( void** ) (void*) &obj );
              pUnkCtrl->lpVtbl->Release( pUnkCtrl );
-            hb_retnint( ( long ) obj );
+            hb_itemReturnRelease( hb_oleItemPut( NULL, obj ) );

              GetClientRect( hContainer, &rc );
              MoveWindow( GetDlgItem( hContainer, ( int ) id ), 0, 0, 
rc.right-rc.left, rc.bottom-rc.top, TRUE );
@@ -906,17 +906,17 @@
           #endif
           else
           {
-            hb_retnint( 0 );
+            hb_ret();
           }
        }
        else
        {
-         hb_retnint( 0 );
+         hb_ret();
        }
     }
     else
     {
-      hb_retnint( 0 );
+      hb_ret();
     }

     /* return the container handle */
===================================================================


Regards,
Mindaugas

From harbour.01 at syenar.hu  Mon May 18 09:17:51 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May 18 09:17:57 2009
Subject: [Harbour] Extensions - possible cleanup?
Message-ID: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>

Hi All,

I used .hbp for library parameter files in hbmk2, but this is not very
clear for most ppl, as they think it's a "project" file (not suprisingly).

Now, I'm thinking how to make this more intuitive, and one solution
could be to use .hbl for library parameter files (as Harbour Library),
and to use .hbp for project (target) files (currently in experimental
development stage with the extension .hbt - which isn't very intuitive
either).

The problem is we already use .hbl for compiled language files, so
I cannot make above change.

These are my questions:
- Is there any better idea how to cleanup these file extensions?
- The standard extension for compiled .po language files is .mo.
  Would it be possible to switch to that? This could also mean
  to change binary format to be .mo compatible. I can't really
  oversee the performance and development consequences of
  that, but it *might* be nice to use an already existing file format.
  This could open usage of already existing external tools which
  can handle .mo files natively.
  [ I like current .hbl format very much BTW, so no offence on
  current format. ]

[ BTW2: hbi18n won't allow .po extension in -m operation, it
will automatically change it to .pot.

These are the official gettext extensions:
- .pot - extracted strings from a source file (template)
- .po - extracted strings + translations - text format
- .mo - extracted strings + translations - binary format ]

Brgds,
Viktor
From guy.roussin at teledetection.fr  Mon May 18 09:48:51 2009
From: guy.roussin at teledetection.fr (Guy Roussin)
Date: Mon May 18 09:48:58 2009
Subject: [Harbour] Little error et xml parser 
Message-ID: <4A116743.30300@teledetection.fr>

Hi,

1. I notice this error when i run prg with hbrun :
$ ./td.prg                 ( or    $ hbrun td.prg )
Error BASE/6101  Unknown or unregistered symbol: HB_GT_CGI_DEFAULT (Quit)
Error BASE/6101  Unknown or unregistered symbol: HB_GT_CGI_DEFAULT
Called from HB_HRBRUN(0) 

( I know that i can make #!/usr/bin/hbrun //GTCGI in the first line )


2. I'm looking for a "simple" xml parser for harbour (xml file => array 
of hash)
Do you know a free parser for harbour ?

Thank you,

-- 
Guy 

From vszakats at users.sourceforge.net  Mon May 18 10:08:28 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May 18 10:08:34 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11076] trunk/harbour
Message-ID: <E1M63W0-0002fB-7K@bj8yhf1.ch3.sourceforge.com>

Revision: 11076
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11076&view=rev
Author:   vszakats
Date:     2009-05-18 14:08:27 +0000 (Mon, 18 May 2009)

Log Message:
-----------
2009-05-18 15:59 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + Added experimental support for multitarget command lines.
      The final usage may be changed.
      There are two ways to do multitarget hbmk2 sessions:
      1.) hbmk2 [<common_params1>] target1.hbt [<common_params2>] target2.hbt [<common_params3>]
          where .hbt is an .hbm file just with an .hbt extension.
          Examples:
             hbmk2 mylib1.hbt mylib2.hbt myapp.hbt
             hbmk2 -trace -pause mylib1.hbt mylib2.hbt myapp.hbt -beep
      2.) hbmk2 [<common_params1>] -target <target1_params> -target <target2_params> [-notarget <common_params2>]
          Examples:
             hbmk2 -target hello1.prg -target hello2.prg
             hbmk2 -trace -target hello1.prg -target hello2.prg
             hbmk2 -trace -target hello1.prg -target hello2.prg -notarget -beep
    ! Fixed not expanding wildcards in .hbm files on *nix systems.

  * contrib/xhb/xhbcomp.prg
    * Minor formatting.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/xhb/xhbcomp.prg
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From sscc at mweb.co.za  Mon May 18 10:11:34 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Mon May 18 10:11:36 2009
Subject: [Harbour] Extensions - possible cleanup?
In-Reply-To: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>
References: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>
Message-ID: <4A116C96.5010306@mweb.co.za>

Viktor Szak?ts wrote:

> The problem is we already use .hbl for compiled language files, so
> I cannot make above change.

How about .hblib? No requirements that extensions be 3 chars, it's more just a 
habit.

Regards
Alex
From harbour.01 at syenar.hu  Mon May 18 10:26:36 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon May 18 10:26:44 2009
Subject: [Harbour] Extensions - possible cleanup?
In-Reply-To: <4A116C96.5010306@mweb.co.za>
References: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>
	<4A116C96.5010306@mweb.co.za>
Message-ID: <468CEFD6-A709-48E6-B424-E25F9F33B26D@syenar.hu>

>> The problem is we already use .hbl for compiled language files, so
>> I cannot make above change.
>
> How about .hblib? No requirements that extensions be 3 chars, it's  
> more just a habit.

Not just a habit, Harbour (and of course hbmk2) also supports
DOS, and potentially other such limited OSes/filesystems where
LFN isn't available. So in Harbour core we stick to 8.3 names.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Mon May 18 11:51:54 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May 18 11:52:00 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11077] trunk/harbour
Message-ID: <E1M6586-0000nP-Nl@c3vjzd1.ch3.sourceforge.com>

Revision: 11077
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11077&view=rev
Author:   vszakats
Date:     2009-05-18 15:51:53 +0000 (Mon, 18 May 2009)

Log Message:
-----------
2009-05-18 17:51 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
  * utils/hbmk2/hbmk2.hu_HU.po
    * Minor cleanup to a few texts.
    ! Fixed doing nothing for single target cmdlines after latest commit.
    + Added dir/path inheritance of .hbm file path to more options
      (-hbl, -po, -o, -L, -instpath, -incpath, -incpathtry, -i, -workdir, 
      -vcshead, -tshead, *.hbl + .hbp equivalents.)
    + Added dir support for VCS ID readout.

  * utils/hbmk2/hbmk2.pt_BR.po
    ! Tabs -> Spaces

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.po
    trunk/harbour/utils/hbmk2/hbmk2.prg
    trunk/harbour/utils/hbmk2/hbmk2.pt_BR.po


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Mon May 18 11:54:40 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May 18 11:54:44 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11078] trunk/harbour
Message-ID: <E1M65Am-0000qZ-7x@c3vjzd1.ch3.sourceforge.com>

Revision: 11078
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11078&view=rev
Author:   vszakats
Date:     2009-05-18 15:54:39 +0000 (Mon, 18 May 2009)

Log Message:
-----------
2009-05-18 17:54 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed handling empty command lines.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Mon May 18 12:08:15 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May 18 12:08:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11079] trunk/harbour
Message-ID: <E1M65Nv-0001AP-84@c3vjzd1.ch3.sourceforge.com>

Revision: 11079
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11079&view=rev
Author:   vszakats
Date:     2009-05-18 16:08:14 +0000 (Mon, 18 May 2009)

Log Message:
-----------
2009-05-18 18:03 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed handling of self-detected name inducted automatic
      options (like -xhb when xhbmk2 is used) after adding 
      multitarget support.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From sscc at mweb.co.za  Mon May 18 12:09:31 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Mon May 18 12:09:32 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11064] trunk/harbour
In-Reply-To: <4A114722.9000700@dbtopas.lt>
References: <E1M5KLg-0003St-05@bj8yhf1.ch3.sourceforge.com>	<4A110F35.8050906@mweb.co.za>
	<4A114722.9000700@dbtopas.lt>
Message-ID: <4A11883B.1010305@mweb.co.za>

Mindaugas Kavaliauskas wrote:

> The only ODBC application I've ever tried to write in my life is 
> contrib/rddsql/sddodbc/tests/test1.prg, so, I have no idea that the 
> answer is. I would expect to be it a little slower on client part (I 
> mean result set manipulation).

I found some quite old "research". The figures indicate very little speed 
difference.

> One more SDD driver I am thinking about is ADO SDD. But I'm not sure if 
> it is worth to invest time. Using IDispatch* interface will make result 
> set manipulation even slower (character message names should be resolved 
> to do IDispatch call). Using more low level interface (I guess it is 
> called OLE DB) requires using of many interfaces : IADOConnection, 
> IRowset, IColumnsInfo, ... The full list is on 
> http://msdn.microsoft.com/en-us/library/ms709709(VS.85).aspx and has 81 
> (!) interface in specification. I do not want to put my hands on dirty 
> things like this.

Yes, I think OLE DB would be a world of pain. FWIW I have used ADO directly from 
Harbour (simply as an object), and it is acceptable for drawing down a wildcard 
list of 2 or 300 debtors and details (< 1s). This must involve the same 
resolving of character names to IDispatch calls that you mention.

Regards
Alex

From bedipritpal at hotmail.com  Mon May 18 12:46:25 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon May 18 12:46:30 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <4A1156CE.9050407@dbtopas.lt>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
	<23539642.post@talk.nabble.com> <23540931.post@talk.nabble.com>
	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>
	<23574376.post@talk.nabble.com>
	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>
	<4A1011A0.3010308@dbtopas.lt> <23583794.post@talk.nabble.com>
	<4A1156CE.9050407@dbtopas.lt>
Message-ID: <23601197.post@talk.nabble.com>


Hello


Mindaugas Kavaliauskas wrote:
> 
> The middle part of mail window is not redrawn, but I get no error.
> 

It means ActiveX is not initialized even.

I will apply your changes and will do some tests todays.
Till then...

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/Errors-with-11032-tp23521549p23601197.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vszakats at users.sourceforge.net  Mon May 18 13:47:44 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May 18 13:47:49 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11080] trunk/harbour
Message-ID: <E1M66wC-0006XZ-7G@d5vjzd1.ch3.sourceforge.com>

Revision: 11080
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11080&view=rev
Author:   vszakats
Date:     2009-05-18 17:47:43 +0000 (Mon, 18 May 2009)

Log Message:
-----------
2009-05-18 19:46 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed setup of .hbl input codepages.
    + Added support to specify output CPs for Windows/DOS/OS2
      and *nix systems.
    ; TOFIX: This isn't enough as f.e. all my *nixes require
             UTF-8 output which we currently cannot provide in a
             transparent way, so accented chars are all broken
             on these platforms. I could hack it around by
             calling HB_STRTOUTF8() on all strings going to
             output when *nix is detected, but if possible it'd
             better to do it transparently.

  * utils/hbmk2/hbmk2.hu_HU.po
    * Converted to ISO CP from 852.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.po
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Mon May 18 14:26:03 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon May 18 14:17:21 2009
Subject: [Harbour] Extensions - possible cleanup?
In-Reply-To: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>
References: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>
Message-ID: <20090518182603.GA12537@uran.home.aster.pl>

On Mon, 18 May 2009, Szak?ts Viktor wrote:

Hi,

> The problem is we already use .hbl for compiled language files, so
> I cannot make above change.
> These are my questions:
> - Is there any better idea how to cleanup these file extensions?
> - The standard extension for compiled .po language files is .mo.
>   Would it be possible to switch to that? This could also mean
>   to change binary format to be .mo compatible. I can't really
>   oversee the performance and development consequences of
>   that, but it *might* be nice to use an already existing file format.
>   This could open usage of already existing external tools which
>   can handle .mo files natively.
>   [ I like current .hbl format very much BTW, so no offence on
>   current format. ]

.mo are gettext compatible compiled .po files. I plan to add support
for native gettext usage and in such case it will use .mo files by
gettext API resepcting domain names and .mo file localization (it's
strictly defined), etc.
I think it will be important extension for people who want to create
well integrated with *nix systems applications, f.e. some additional
system tools. Anyhow I do not think that non *nix users will use it.
gettext is hard to use with stand alone Windows or DOS applications.
We can also try to use .mo files as holder for our compiled .po modules
(now stored in .hbl files) but it will cause the some problems:
1. we have extensions which are not gettext compatible and probably we
   will have to drop them. In some cases it will be serious functionality
   reduction. We will lost plural form support for non EN languages used
   as based language. Evan more, the base language should be EN what creates
   problem for people who want to use i18n API with their existing
   application which do not use English as base language. It will be
   necessary to respect strict enocding rules used by gettext, etc.
2. we are using compiled binary format to speed-up load operation.
   If we use .mo files then we will have to read data and then decode
   it to the format acceptable by our HVM (of course if we do not want
   to replicate the rest of gettext runtime logic in our code). It means
   that we will not have performance improvement by using binary format.
   In such case it's possible that it will be more efficient to rewrite
   in C function to decode .po files and use them directly instead of
   .mo files.
3. .mo files have strictly defined localization which is OS dependent.
   Distributing our own .mo files with our own localization rules adopted
   to easy use in other OS-es can create serious troubles if real gettext
   applications are also used or when we add native gettext support.

In summary.
I'll add support for .mo files as alternative i18n module which will use
internally gettext library respecting all gettext rules. In some cases
users may find it as important extension and use it instead of our own
i18n formats but I do not think that it's good idea to hack .mo files and
use them as holder for translations without strict respecting all gettext
rules but with our own ones which will make them usable in non *nix
environments.

> [ BTW2: hbi18n won't allow .po extension in -m operation, it
> will automatically change it to .pot.

AFAIK it respects any extensions when -o <filename> is used and does not
add any new one or overwrite existing if <filename> already has extension.
It only forces .pot extension when there is no -o option.
I planed to ask about default extension for merged .pot files (.pot or .po)
preferred by Harbour developers/users and I even marked it in the hb18n help
info as .po_ but I simply forgot about it. As I can see the ".po_" is still
in the usage screen so we should decide about it.

> These are the official gettext extensions:
> - .pot - extracted strings from a source file (template)
> - .po - extracted strings + translations - text format
> - .mo - extracted strings + translations - binary format ]

yes, it is.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon May 18 14:36:13 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May 18 14:36:18 2009
Subject: [Harbour] Extensions - possible cleanup?
In-Reply-To: <20090518182603.GA12537@uran.home.aster.pl>
References: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>
	<20090518182603.GA12537@uran.home.aster.pl>
Message-ID: <18d502870905181136o5f503505y38db3a01024d0ca5@mail.gmail.com>

> .mo are gettext compatible compiled .po files. I plan to add support
> for native gettext usage and in such case it will use .mo files by
> gettext API resepcting domain names and .mo file localization (it's
> strictly defined), etc.
[snip]
>
> In summary.
> I'll add support for .mo files as alternative i18n module which will use
> internally gettext library respecting all gettext rules. In some cases
> users may find it as important extension and use it instead of our own
> i18n formats but I do not think that it's good idea to hack .mo files and
> use them as holder for translations without strict respecting all gettext
> rules but with our own ones which will make them usable in non *nix
> environments.

I see, and many thanks for your answer. The only reason I'd personally
need .mo files is to free up .hbl as an extension, so for me, especially
after reading your description about .mo properties/restrictions, this
feature don't seem very high on the priority list, if we cannot do a full
switch to it (and we can't that's for sure).

>>> [ BTW2: hbi18n won't allow .po extension in -m operation, it
>> will automatically change it to .pot.
>
> AFAIK it respects any extensions when -o <filename> is used and does not
> add any new one or overwrite existing if <filename> already has extension.
> It only forces .pot extension when there is no -o option.
> I planed to ask about default extension for merged .pot files (.pot or .po)
> preferred by Harbour developers/users and I even marked it in the hb18n help
> info as .po_ but I simply forgot about it. As I can see the ".po_" is still
> in the usage screen so we should decide about it.

My vote is a definite .po.

Otherwise thanks for the -o tip, with it it works as expected.
I need it to update / compile hbmk2 .po files.

These are the batches if someone is interested in translating hbmk2:

--- i18n_make_hbl.bat
..\..\bin\hbi18n.exe -g -ohbmk2.hu_HU.hbl hbmk2.hu_HU.po
..\..\bin\hbi18n.exe -g -ohbmk2.pt_BR.hbl hbmk2.pt_BR.po
---

--- i18n_upd_po.bat
..\..\bin\harbour.exe hbmk2.prg /jhbmk2.pot /i..\..\include /s
..\..\bin\hbi18n.exe -ohbmk2.hu_HU.po -m hbmk2.hu_HU.po hbmk2.pot
..\..\bin\hbi18n.exe -ohbmk2.pt_BR.po -m hbmk2.pt_BR.po hbmk2.pot
del hbmk2.pot
---

--- i18n_rebuild_po.bat
..\..\bin\harbour.exe hbmk2.prg /jhbmk2.pot /i..\..\include /s
..\..\bin\hbi18n.exe -a hbmk2.pot hbmk2.hu_HU.po -ohbmk2.hu_HU.po
..\..\bin\hbi18n.exe -a hbmk2.pot hbmk2.pt_BR.po -ohbmk2.pt_BR.po
del hbmk2.pot
---

Brgds,
Viktor
From dbtopas at dbtopas.lt  Mon May 18 14:48:01 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon May 18 14:50:06 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <23601197.post@talk.nabble.com>
References: <23521549.post@talk.nabble.com>	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>	<23527339.post@talk.nabble.com>
	<23535023.post@talk.nabble.com>	<23539642.post@talk.nabble.com>
	<23540931.post@talk.nabble.com>	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>	<23574376.post@talk.nabble.com>	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>	<4A1011A0.3010308@dbtopas.lt>
	<23583794.post@talk.nabble.com>	<4A1156CE.9050407@dbtopas.lt>
	<23601197.post@talk.nabble.com>
Message-ID: <4A11AD61.4010705@dbtopas.lt>

Hi,


Pritpal Bedi wrote:
> Mindaugas Kavaliauskas wrote:
>> The middle part of mail window is not redrawn, but I get no error.
>>
> 
> It means ActiveX is not initialized even.
> 
> I will apply your changes and will do some tests todays.
> Till then...


wvgax.prg wvgsink.c if full of commented out code, full of #if 0, #if 1. 
Only now I've noticed, that actually it uses HB_Ax_AtlAxGetControl(), 
but not HB_AX_AtlAxCreateControl(). So, please use the following diff 
for wvgsink.c:

Index: C:/harboursvn/contrib/gtwvg/wvgsink.c
===================================================================
--- C:/harboursvn/contrib/gtwvg/wvgsink.c	(revision 11075)
+++ C:/harboursvn/contrib/gtwvg/wvgsink.c	(working copy)
@@ -101,6 +101,7 @@
  #include "hbvm.h"
  #include "hbstack.h"
  #include "hbthread.h"
+#include "..\hbwin\hbwinole.h"

  #include <shlobj.h>
  #include <objbase.h>
@@ -111,7 +112,7 @@
  #include <ole2.h>
  #include <oleauto.h>

-
+/*
  #if defined( __cplusplus ) && \
     ( defined( __BORLANDC__ ) || defined( _MSC_VER ) || \
       ( defined(__WATCOMC__) && ( __WATCOMC__ >= 1280 ) ) )
@@ -120,6 +121,8 @@
  #  define HB_ID_REF( id )     ( &(id) )
  #endif

+*/
+
  /*----------------------------------------------------------------------*/

  #if defined(__BORLANDC__) && !defined(HB_ARCH_64BIT)
@@ -139,10 +142,7 @@
  typedef HRESULT ( CALLBACK *PATLAXCREATECONTROL )( LPCOLESTR, HWND, 
IStream*, IUnknown** );
  typedef HRESULT ( CALLBACK *PATLAXCREATECONTROLEX )( LPCOLESTR, HWND, 
IStream*, IUnknown**, IUnknown**, REFIID, IUnknown* );
  /*----------------------------------------------------------------------*/
-HB_EXPORT void hb_oleItemToVariant( VARIANT *pVariant, PHB_ITEM pItem );

-HRESULT hb_oleVariantToItem( PHB_ITEM pItem, VARIANT *pVariant );
-
  /* Switch it on when required tracing. While committing switch it off */
  #if 0
  #define __HBTOOUT__
@@ -707,7 +707,7 @@
     LPIID                riid  = ( LPIID ) &IID_IDispatch;
     int                  n = 0;

-   hr = SetupConnectionPoint( ( device_interface* ) ( HB_PTRDIFF ) 
hb_parnint( 1 ), ( REFIID ) riid, ( void** ) (void*) &hSink, &n ) ;
+   hr = SetupConnectionPoint( ( device_interface* ) hb_oleParam( 1 ), ( 
REFIID ) riid, ( void** ) (void*) &hSink, &n ) ;

     hSink->pEvents = hb_itemNew( hb_param( 4, HB_IT_ANY ) );

@@ -881,7 +881,7 @@
           {
              pUnk->lpVtbl->QueryInterface( pUnk, HB_ID_REF( 
IID_IDispatch ), ( void** ) (void*) &obj );
              pUnk->lpVtbl->Release( pUnk );
-            hb_retnint( ( HB_PTRDIFF ) obj );
+            hb_itemReturnRelease( hb_oleItemPut( NULL, obj ) );

              #if 0
              {
@@ -898,7 +898,7 @@

              pUnkCtrl->lpVtbl->QueryInterface( pUnkCtrl, HB_ID_REF( 
IID_IDispatch ), ( void** ) (void*) &obj );
              pUnkCtrl->lpVtbl->Release( pUnkCtrl );
-            hb_retnint( ( long ) obj );
+            hb_itemReturnRelease( hb_oleItemPut( NULL, obj ) );

              GetClientRect( hContainer, &rc );
              MoveWindow( GetDlgItem( hContainer, ( int ) id ), 0, 0, 
rc.right-rc.left, rc.bottom-rc.top, TRUE );
@@ -906,17 +906,17 @@
           #endif
           else
           {
-            hb_retnint( 0 );
+            hb_ret();
           }
        }
        else
        {
-         hb_retnint( 0 );
+         hb_ret();
        }
     }
     else
     {
-      hb_retnint( 0 );
+      hb_ret();
     }

     /* return the container handle */
@@ -993,21 +993,21 @@
              GetClientRect( hWnd, &rc );
              /* MoveWindow( GetDlgItem( hParent, ( int ) id ), 0, 0, 
rc.right-rc.left, rc.bottom-rc.top, TRUE ); */
              MoveWindow( hWnd, 0, 0, rc.right-rc.left, 
rc.bottom-rc.top, TRUE );
-            hb_retnint( ( HB_PTRDIFF ) obj );
+            hb_itemReturnRelease( hb_oleItemPut( NULL, obj ) );
           }
           else
           {
-            hb_retnint( 0 );
+            hb_ret();
           }
        }
        else
        {
-         hb_retnint( 0 );
+         hb_ret();
        }
     }
     else
     {
-      hb_retnint( 0 );
+      hb_ret();
     }

     /* return the control handle */
==============================================================


Regards,
Mindaugas
From vszakats at users.sourceforge.net  Mon May 18 15:37:10 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May 18 15:37:15 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11081] trunk/harbour
Message-ID: <E1M68e6-0002fq-Ft@dn4whf1.ch3.sourceforge.com>

Revision: 11081
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11081&view=rev
Author:   vszakats
Date:     2009-05-18 19:37:06 +0000 (Mon, 18 May 2009)

Log Message:
-----------
2009-05-18 21:36 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + Changed default workdir to use output binary dir as a base.
    ! Fixed -instpath and -compr option not working with -hblib and -hbdyn modes.

  * utils/hbmk2/hbmk2.hu_HU.po
    ! Cleaned.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.po
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dbtopas at dbtopas.lt  Mon May 18 15:38:50 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon May 18 15:40:54 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <4A11AD61.4010705@dbtopas.lt>
References: <23521549.post@talk.nabble.com>	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>	<23527339.post@talk.nabble.com>	<23535023.post@talk.nabble.com>	<23539642.post@talk.nabble.com>	<23540931.post@talk.nabble.com>	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>	<23574376.post@talk.nabble.com>	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>	<4A1011A0.3010308@dbtopas.lt>	<23583794.post@talk.nabble.com>	<4A1156CE.9050407@dbtopas.lt>	<23601197.post@talk.nabble.com>
	<4A11AD61.4010705@dbtopas.lt>
Message-ID: <4A11B94A.2090904@dbtopas.lt>

Hi,


I've tried to add ActiveX to my plain WinAPI Hello world sample. I 
needed to add *TWO* lines (marked by /* !!!*/) below and #pragma 
begindump/enddump. THAT'S ALL! I understand that event handler is 
missing and OleAutomation object should be created, but this is not so 
much code. I have a feeling, that if I'll do some ActiveX support, I'll 
do that starting from zero, instead of trying to analyse all current 
code. WARNING: The bad side will be that my code could be not compatible 
to existing one, the good one is that it will be simple and clear.

===============================================
#include "c:\cawi32\include\windows.ch"

REQUEST HB_GT_NUL_DEFAULT

FUNC main()
LOCAL nAddr, hWnd, cMsg

   AtlAxInit() /* !!! */

   nAddr := MakeWndProc({|X,Y,Z,T| WndProc(X,Y,Z,T)})
   RegisterClass("MainWndCls",, COLOR_WINDOW + 1, LoadCursor(EMPTYPTR(), 
IDC_ARROW), LoadIcon(EMPTYPTR(), IDI_APPLICATION),,,, nAddr)
   hWnd := CreateWindow("MainWndCls", "CAWI32 Sample Hello", 
WS_OVERLAPPEDWINDOW, 100, 100, 600, 500)
   ShowWindow(hWnd, SW_SHOWNORMAL)
   UpdateWindow(hWnd)
   DO WHILE GetMessage(@cMsg)
     TranslateMessage(cMsg)
     DispatchMessage(cMsg)
   ENDDO
RETURN 0

FUNC WndProc(hWnd, nMsg, wParam, lParam)
LOCAL hDC, sPS, hMenu, hSubMenu

   IF nMsg == WM_CREATE

     CreateWindow("ATLAXWin", "http://www.harbour-project.org", WS_CHILD 
+ WS_VISIBLE + WS_BORDER + WS_HSCROLL + WS_VSCROLL, 10, 10, 500, 400, 
hWnd) /* !!! */

   ELSEIF nMsg == WM_PAINT
     hDC := BeginPaint(hWnd, @sPS)
     EndPaint(hWnd, @sPS)
   ELSEIF nMsg == WM_DESTROY
     PostQuitMessage()
     RETURN 0
   ENDIF
RETURN DefWindowProc(hWnd, nMsg, wParam, lParam)

PROC RDDSYS();  RETURN

PROC HB_GTSYS();  RETURN

#pragma begindump
#include "hbapi.h"
#include <windows.h>
static HMODULE hLib = NULL;

HB_FUNC( ATLAXINIT )
{
    BOOL ( CALLBACK *pAtlAxWinInit )( void );

    hLib = LoadLibrary( "atl.dll" );
    if( ( unsigned long ) hLib > 32 )
    {
       pAtlAxWinInit = GetProcAddress( hLib, "AtlAxWinInit" );
       if( pAtlAxWinInit )
          ( *pAtlAxWinInit )();
    }
    // I leave hLib not freed to avoid unloading of library
}
#pragma enddump
===============================================

You'll not be able to compile it, but all function are straight wrappers 
of WinAPI (MakeWndProc() is an exception, it registers codeblock and 
returns window procedure address). So, I hope you'll be able to create 
ActiveX control in your environment, if you have idea how to create a 
window in it and access hWnd.


Regards,
Mindaugas

From info at fsgiudice.com  Mon May 18 16:01:59 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon May 18 16:02:08 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <4A11B94A.2090904@dbtopas.lt>
References: <23521549.post@talk.nabble.com>	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>	<23527339.post@talk.nabble.com>	<23535023.post@talk.nabble.com>	<23539642.post@talk.nabble.com>	<23540931.post@talk.nabble.com>	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>	<23574376.post@talk.nabble.com>	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>	<4A1011A0.3010308@dbtopas.lt>	<23583794.post@talk.nabble.com>	<4A1156CE.9050407@dbtopas.lt>	<23601197.post@talk.nabble.com>	<4A11AD61.4010705@dbtopas.lt>
	<4A11B94A.2090904@dbtopas.lt>
Message-ID: <4A11BEB7.9070501@fsgiudice.com>

Hi Mindaugas, Pritpal,

I was just writing about and Mindaugas sent this mail, great!
I was thinking about adding a separate handling for ActiveX code to 
leave isolate as Ole code we already have, so it will be enough (!) to 
add an upper layer where ActiveX can attach itself without needs of 
gtwvg and passing only hWnd to it.
Obviously nothing against gtwvg but in this way that code it will be 
more general and usable also with other libs.

What do you think about ?

Best Regards,
Francesco

Il 18/05/2009 21.38, Mindaugas Kavaliauskas ha scritto:
> Hi,
> 
> 
> I've tried to add ActiveX to my plain WinAPI Hello world sample. I 
> needed to add *TWO* lines (marked by /* !!!*/) below and #pragma 
> begindump/enddump. THAT'S ALL! I understand that event handler is 
> missing and OleAutomation object should be created, but this is not so 
> much code. I have a feeling, that if I'll do some ActiveX support, I'll 
> do that starting from zero, instead of trying to analyse all current 
> code. WARNING: The bad side will be that my code could be not compatible 
> to existing one, the good one is that it will be simple and clear.
> 
> ===============================================
> #include "c:\cawi32\include\windows.ch"
> 
> REQUEST HB_GT_NUL_DEFAULT
> 
> FUNC main()
> LOCAL nAddr, hWnd, cMsg
> 
>   AtlAxInit() /* !!! */
> 
>   nAddr := MakeWndProc({|X,Y,Z,T| WndProc(X,Y,Z,T)})
>   RegisterClass("MainWndCls",, COLOR_WINDOW + 1, LoadCursor(EMPTYPTR(), 
> IDC_ARROW), LoadIcon(EMPTYPTR(), IDI_APPLICATION),,,, nAddr)
>   hWnd := CreateWindow("MainWndCls", "CAWI32 Sample Hello", 
> WS_OVERLAPPEDWINDOW, 100, 100, 600, 500)
>   ShowWindow(hWnd, SW_SHOWNORMAL)
>   UpdateWindow(hWnd)
>   DO WHILE GetMessage(@cMsg)
>     TranslateMessage(cMsg)
>     DispatchMessage(cMsg)
>   ENDDO
> RETURN 0
> 
> FUNC WndProc(hWnd, nMsg, wParam, lParam)
> LOCAL hDC, sPS, hMenu, hSubMenu
> 
>   IF nMsg == WM_CREATE
> 
>     CreateWindow("ATLAXWin", "http://www.harbour-project.org", WS_CHILD 
> + WS_VISIBLE + WS_BORDER + WS_HSCROLL + WS_VSCROLL, 10, 10, 500, 400, 
> hWnd) /* !!! */
> 
>   ELSEIF nMsg == WM_PAINT
>     hDC := BeginPaint(hWnd, @sPS)
>     EndPaint(hWnd, @sPS)
>   ELSEIF nMsg == WM_DESTROY
>     PostQuitMessage()
>     RETURN 0
>   ENDIF
> RETURN DefWindowProc(hWnd, nMsg, wParam, lParam)
> 
> PROC RDDSYS();  RETURN
> 
> PROC HB_GTSYS();  RETURN
> 
> #pragma begindump
> #include "hbapi.h"
> #include <windows.h>
> static HMODULE hLib = NULL;
> 
> HB_FUNC( ATLAXINIT )
> {
>    BOOL ( CALLBACK *pAtlAxWinInit )( void );
> 
>    hLib = LoadLibrary( "atl.dll" );
>    if( ( unsigned long ) hLib > 32 )
>    {
>       pAtlAxWinInit = GetProcAddress( hLib, "AtlAxWinInit" );
>       if( pAtlAxWinInit )
>          ( *pAtlAxWinInit )();
>    }
>    // I leave hLib not freed to avoid unloading of library
> }
> #pragma enddump
> ===============================================
> 
> You'll not be able to compile it, but all function are straight wrappers 
> of WinAPI (MakeWndProc() is an exception, it registers codeblock and 
> returns window procedure address). So, I hope you'll be able to create 
> ActiveX control in your environment, if you have idea how to create a 
> window in it and access hWnd.
> 
> 
> Regards,
> Mindaugas
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
From dbtopas at dbtopas.lt  Mon May 18 17:13:48 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon May 18 17:15:52 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <4A11BEB7.9070501@fsgiudice.com>
References: <23521549.post@talk.nabble.com>	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>	<23527339.post@talk.nabble.com>	<23535023.post@talk.nabble.com>	<23539642.post@talk.nabble.com>	<23540931.post@talk.nabble.com>	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>	<23574376.post@talk.nabble.com>	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>	<4A1011A0.3010308@dbtopas.lt>	<23583794.post@talk.nabble.com>	<4A1156CE.9050407@dbtopas.lt>	<23601197.post@talk.nabble.com>	<4A11AD61.4010705@dbtopas.lt>	<4A11B94A.2090904@dbtopas.lt>
	<4A11BEB7.9070501@fsgiudice.com>
Message-ID: <4A11CF8C.5030401@dbtopas.lt>

Hi Francesco,


in the past I've wrote some code to "include Internet Explorer window 
into my dialogs as a separate control". Using some sample on the 
internet I've implemented: IOleInPlaceFrame, IOleClientSite, 
IOleInPlaceSite interfaces (3 dozens methods), used IOleObject, 
IHTMLDocument2, IWebBrowser2 interfaces. It was a large piece of code, 
and only one browser object was supported.

Using atl.dll I need a few lines of code and everything is (almost) 
working. Also, I see here we talking about completely different 
interfaces: IEventHandler, IConnectionPoint, IEnumConnectionPoints, 
IConnectionPointContainer.

Are these two different things the same ActiveX?

Sorry, it's perhaps out of Harbour topic, but for me it is very 
difficult to understand something reading MS docs.


Regards,
Mindaugas

From vouchcac at users.sourceforge.net  Mon May 18 17:28:55 2009
From: vouchcac at users.sourceforge.net (vouchcac@users.sourceforge.net)
Date: Mon May 18 17:29:01 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11082] trunk/harbour
Message-ID: <E1M6AOF-00065v-P4@74yxhf1.ch3.sourceforge.com>

Revision: 11082
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11082&view=rev
Author:   vouchcac
Date:     2009-05-18 21:28:54 +0000 (Mon, 18 May 2009)

Log Message:
-----------
2009-05-18 14:26 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/wvgsink.c
  * harbour/contrib/gtwvg/wvgax.c
    ! Fixes to newer OLE implementation. 
      Thanks to Mindaugus and Przemek for doing all the spadework.
      Now I can receive events as was doing before, fantastic.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtwvg/wvgax.prg
    trunk/harbour/contrib/gtwvg/wvgsink.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bedipritpal at hotmail.com  Mon May 18 17:36:50 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon May 18 17:36:55 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <4A11B94A.2090904@dbtopas.lt>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
	<23539642.post@talk.nabble.com> <23540931.post@talk.nabble.com>
	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>
	<23574376.post@talk.nabble.com>
	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>
	<4A1011A0.3010308@dbtopas.lt> <23583794.post@talk.nabble.com>
	<4A1156CE.9050407@dbtopas.lt> <23601197.post@talk.nabble.com>
	<4A11AD61.4010705@dbtopas.lt> <4A11B94A.2090904@dbtopas.lt>
Message-ID: <23605843.post@talk.nabble.com>


Hi Mindaugus


Mindaugas Kavaliauskas wrote:
> 
> I've tried to add ActiveX to my plain WinAPI Hello world sample. I 
> needed to add *TWO* lines (marked by /* !!!*/) below and #pragma 
> begindump/enddump. THAT'S ALL! I understand that event handler is 
> missing and OleAutomation object should be created, but this is not so 
> much code. I have a feeling, that if I'll do some ActiveX support, I'll 
> do that starting from zero, instead of trying to analyse all current 
> code. WARNING: The bad side will be that my code could be not compatible 
> to existing one, the good one is that it will be simple and clear.
> 
> ===============================================
> #include "c:\cawi32\include\windows.ch"
> 
> REQUEST HB_GT_NUL_DEFAULT
> 
> FUNC main()
> LOCAL nAddr, hWnd, cMsg
> 
>    AtlAxInit() /* !!! */
> 
>    nAddr := MakeWndProc({|X,Y,Z,T| WndProc(X,Y,Z,T)})
>    RegisterClass("MainWndCls",, COLOR_WINDOW + 1, LoadCursor(EMPTYPTR(), 
> IDC_ARROW), LoadIcon(EMPTYPTR(), IDI_APPLICATION),,,, nAddr)
>    hWnd := CreateWindow("MainWndCls", "CAWI32 Sample Hello", 
> WS_OVERLAPPEDWINDOW, 100, 100, 600, 500)
>    ShowWindow(hWnd, SW_SHOWNORMAL)
>    UpdateWindow(hWnd)
>    DO WHILE GetMessage(@cMsg)
>      TranslateMessage(cMsg)
>      DispatchMessage(cMsg)
>    ENDDO
> RETURN 0
> 
> FUNC WndProc(hWnd, nMsg, wParam, lParam)
> LOCAL hDC, sPS, hMenu, hSubMenu
> 
>    IF nMsg == WM_CREATE
> 
>      CreateWindow("ATLAXWin", "http://www.harbour-project.org", WS_CHILD 
> + WS_VISIBLE + WS_BORDER + WS_HSCROLL + WS_VSCROLL, 10, 10, 500, 400, 
> hWnd) /* !!! */
> 
>    ELSEIF nMsg == WM_PAINT
>      hDC := BeginPaint(hWnd, @sPS)
>      EndPaint(hWnd, @sPS)
>    ELSEIF nMsg == WM_DESTROY
>      PostQuitMessage()
>      RETURN 0
>    ENDIF
> RETURN DefWindowProc(hWnd, nMsg, wParam, lParam)
> 
> PROC RDDSYS();  RETURN
> 
> PROC HB_GTSYS();  RETURN
> 
> #pragma begindump
> #include "hbapi.h"
> #include <windows.h>
> static HMODULE hLib = NULL;
> 
> HB_FUNC( ATLAXINIT )
> {
>     BOOL ( CALLBACK *pAtlAxWinInit )( void );
> 
>     hLib = LoadLibrary( "atl.dll" );
>     if( ( unsigned long ) hLib > 32 )
>     {
>        pAtlAxWinInit = GetProcAddress( hLib, "AtlAxWinInit" );
>        if( pAtlAxWinInit )
>           ( *pAtlAxWinInit )();
>     }
>     // I leave hLib not freed to avoid unloading of library
> }
> #pragma enddump
> ===============================================
> 

Almost thi smuch I am using in one of my old xHarbour project where
I needed only to display something. But I wanted more with evenets 
and all that. Only control does not mean anything. So this big code.
But at the heart of it it is almost the same you explained above.



> You'll not be able to compile it, but all function are straight wrappers 
> of WinAPI (MakeWndProc() is an exception, it registers codeblock and 
> returns window procedure address). So, I hope you'll be able to create 
> ActiveX control in your environment, if you have idea how to create a 
> window in it and access hWnd.
> 

It will be good to have this lighter code as well. 
So please do so. Though current one already is working, see other post.

Thanks for this clean implementation.

NOTE: FWH has to adopt new implementation into its core code.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Errors-with-11032-tp23521549p23605843.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From info at fsgiudice.com  Mon May 18 17:53:04 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon May 18 17:53:13 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <4A11CF8C.5030401@dbtopas.lt>
References: <23521549.post@talk.nabble.com>	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>	<23527339.post@talk.nabble.com>	<23535023.post@talk.nabble.com>	<23539642.post@talk.nabble.com>	<23540931.post@talk.nabble.com>	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>	<23574376.post@talk.nabble.com>	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>	<4A1011A0.3010308@dbtopas.lt>	<23583794.post@talk.nabble.com>	<4A1156CE.9050407@dbtopas.lt>	<23601197.post@talk.nabble.com>	<4A11AD61.4010705@dbtopas.lt>	<4A11B94A.2090904@dbtopas.lt>	<4A11BEB7.9070501@fsgiudice.com>
	<4A11CF8C.5030401@dbtopas.lt>
Message-ID: <4A11D8C0.3040701@fsgiudice.com>

Hi Mindaugas,

Il 18/05/2009 23.13, Mindaugas Kavaliauskas ha scritto:
> Hi Francesco,
> 
> in the past I've wrote some code to "include Internet Explorer window 
> into my dialogs as a separate control". Using some sample on the 
> internet I've implemented: IOleInPlaceFrame, IOleClientSite, 
> IOleInPlaceSite interfaces (3 dozens methods), used IOleObject, 
> IHTMLDocument2, IWebBrowser2 interfaces. It was a large piece of code, 
> and only one browser object was supported.
> 
> Using atl.dll I need a few lines of code and everything is (almost) 
> working. Also, I see here we talking about completely different 
> interfaces: IEventHandler, IConnectionPoint, IEnumConnectionPoints, 
> IConnectionPointContainer.
> 
> Are these two different things the same ActiveX?
> 
> Sorry, it's perhaps out of Harbour topic, but for me it is very 
> difficult to understand something reading MS docs.
> 
> 

ATL is, AFAIK, a MS general interface towards ActiveX.
So implementing it should permits use of most of ActiveX.
I used the free implementation posted from Lira Lira Oscar Joel in 
FreeWin project, that was used from various [x]harbour based projects.
But, probably for my limits or erroneous use, it doesn't work well in my 
projects (instances were still in memory at program end so my app does 
not quit gracefully).

I will look at Pritpal's upload, but, as I wrote before, I would like to 
have an independent (from gtwvg) version.

Best Regards,
Francesco



From dbtopas at dbtopas.lt  Mon May 18 18:44:29 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon May 18 18:46:32 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <4A11D8C0.3040701@fsgiudice.com>
References: <23521549.post@talk.nabble.com>	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>	<23527339.post@talk.nabble.com>	<23535023.post@talk.nabble.com>	<23539642.post@talk.nabble.com>	<23540931.post@talk.nabble.com>	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>	<23574376.post@talk.nabble.com>	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>	<4A1011A0.3010308@dbtopas.lt>	<23583794.post@talk.nabble.com>	<4A1156CE.9050407@dbtopas.lt>	<23601197.post@talk.nabble.com>	<4A11AD61.4010705@dbtopas.lt>	<4A11B94A.2090904@dbtopas.lt>	<4A11BEB7.9070501@fsgiudice.com>	<4A11CF8C.5030401@dbtopas.lt>
	<4A11D8C0.3040701@fsgiudice.com>
Message-ID: <4A11E4CD.9090004@dbtopas.lt>

Francesco Saverio Giudice wrote:
>> Are these two different things the same ActiveX?
>>
> I will look at Pritpal's upload, but, as I wrote before, I would like to 
> have an independent (from gtwvg) version.

I've extended my previous sample by:
===========================================================
     HB_AtlAxGetControl( hWndAx, @pDisp )
     IF ! EMPTY( pDisp )
       oAx := HB_OleAuto()
       oAx:__hObj := pDisp
     ENDIF
===========================================================

and

===========================================================
HB_FUNC( HB_ATLAXGETCONTROL )
{
    IUnknown*   pUnk = NULL;
    IDispatch*  pDisp = NULL;
    PHB_ITEM    pItem;
    HRESULT     lOleError;

    lOleError = ( *s_pAtlAxGetControl )( ( HWND ) hb_parptr( 1 ), &pUnk );

    if( lOleError == S_OK )
    {
       /* AtlAxGetControl returns IUnknown, but we are goint to use OLE 
Automation
          on ActiveX control, so let's deal with IDispatch only 
[Mindaugas] */
#if HB_OLE_C_API
       lOleError = pUnk->lpVtbl->QueryInterface( pUnk, &IID_IDispatch, ( 
void** ) ( void * ) &pDisp );
       pUnk->lpVtbl->Release( pUnk );
#else
       lOleError = pUnk->QueryInterface( IID_IDispatch, ( void** ) ( 
void * ) &pDisp );
       pUnk->Release();
#endif
    }

    if( lOleError == S_OK )
    {
       pItem = hb_oleItemPut( NULL, pDisp );
       hb_itemParamStoreForward( 2, pItem );
       hb_itemRelease( pItem );
       hb_retnl( S_OK );
    }
    else
    {
       /* TODO: RTE */
    }
    hb_retnl( lOleError );
}
===========================================================

And I can navigate (using menu commands):
    oAx:Navigate("http://sourceforge.net")
    oAx:Navigate("http://www.google.lt")
    oAx:GoBack()
    oAx:GoForward()
    oAx:Refresh()
without any problem.

Do we have some light-weight WinAPI library now? (To include these 
samples in to Harbour). WHAT32 was something like that...

I'll try to look into event handling tomorrow.


Regards,
Mindaugas

From jarabal at gmail.com  Mon May 18 19:01:27 2009
From: jarabal at gmail.com (Xavi)
Date: Mon May 18 19:03:07 2009
Subject: [Harbour] MemoEdit() Patch to avoid recursive calls in endless
	loop.
In-Reply-To: <23569153.post@talk.nabble.com>
References: <4A0B1E4E.2060802@gmail.com> <23569153.post@talk.nabble.com>
Message-ID: <4A11E8C7.9090303@gmail.com>

Hi Pritpal,

Not is another issue is the same except that now, with the patch, not repeated infinitely and my old application will work.	
The logic of call control function is different to Clipper. Could to say something Maurilio?
I'm more worried about leaving the application.

Xavi

Pritpal Bedi escribi?:
> Hello Xavi
> 
> 
> Xavi-13 wrote:
>> Procedure Main()
>>      MemoEdit( 'Please press F2 abc...', 0, 0, MaxRow(), MaxCol(), .F.,
>> 'FunCtr' )
>>
> 
> Thanks for this patch.
> 
> Now application does not terminate but another 
> issue has come up as:
> 
> MemoEdit( 'Please press F2 abc...', 0, 0, MaxRow(), MaxCol(), .F., 'FunCtr'
> )
> 
> Function FunCtr( nMode, nRow, nCol )
> 
> nMode is first ME_INIT and next always ME_IDLE. 
> So application never reaches next to ME_IDLE.
> Probably every keypress should send ME_KEY/ME_UNKEY
> first then ME_IDLE.
> 
> As you are now more into this code, can you look into?
> 
> Regards
> Pritpal Bedi
> 


From dbtopas at dbtopas.lt  Mon May 18 19:06:57 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon May 18 19:09:00 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <23605843.post@talk.nabble.com>
References: <23521549.post@talk.nabble.com>	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>	<23527339.post@talk.nabble.com>
	<23535023.post@talk.nabble.com>	<23539642.post@talk.nabble.com>
	<23540931.post@talk.nabble.com>	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>	<23574376.post@talk.nabble.com>	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>	<4A1011A0.3010308@dbtopas.lt>
	<23583794.post@talk.nabble.com>	<4A1156CE.9050407@dbtopas.lt>
	<23601197.post@talk.nabble.com>	<4A11AD61.4010705@dbtopas.lt>
	<4A11B94A.2090904@dbtopas.lt> <23605843.post@talk.nabble.com>
Message-ID: <4A11EA11.5010105@dbtopas.lt>

Pritpal Bedi wrote:
> Hi Mindaugus


Hi Pritpal,


my name is Mindaugas. I've tried to joke a few times writing Pritpul, 
but it seems you are not enough sharp-eyed to notice the difference 
neither in spelling of my name nor in yours.


Regards,
Mindaugas
From bedipritpal at hotmail.com  Mon May 18 19:50:16 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon May 18 19:50:20 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <4A11E4CD.9090004@dbtopas.lt>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
	<23539642.post@talk.nabble.com> <23540931.post@talk.nabble.com>
	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>
	<23574376.post@talk.nabble.com>
	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>
	<4A1011A0.3010308@dbtopas.lt> <23583794.post@talk.nabble.com>
	<4A1156CE.9050407@dbtopas.lt> <23601197.post@talk.nabble.com>
	<4A11AD61.4010705@dbtopas.lt> <4A11B94A.2090904@dbtopas.lt>
	<4A11BEB7.9070501@fsgiudice.com> <4A11CF8C.5030401@dbtopas.lt>
	<4A11D8C0.3040701@fsgiudice.com> <4A11E4CD.9090004@dbtopas.lt>
Message-ID: <23607332.post@talk.nabble.com>


Hello Mindaugus


Mindaugas Kavaliauskas wrote:
> 
> I've extended my previous sample by:
> 

> nAddr := MakeWndProc( {|X,Y,Z,T| WndProc( X,Y,Z,T ) } ) 

Can you make this function public. Probably this may pave the 
way to clean a non-portable part of GTWVG, whio knows.


Just to put everything together, to have a whole picture:

//----------------------------------------------------//

#include "windows.ch"

FUNC main() 
   LOCAL nAddr, hWnd, cMsg, hWndAx, oAx, pDisp, nStyle

   AtlAxInit() /* !!! */ 

   nAddr := MakeWndProc( {|X,Y,Z,T| WndProc( X,Y,Z,T ) } ) 

   RegisterClass("MainWndCls",, COLOR_WINDOW + 1, LoadCursor( EMPTYPTR(),
IDC_ARROW ), 
                                    LoadIcon(EMPTYPTR(),
IDI_APPLICATION),,,, nAddr ) 

   hWnd := CreateWindow("MainWndCls", "CAWI32 Sample Hello",
WS_OVERLAPPEDWINDOW, 100, 100, 600, 500) 

   /* ActiveX Window and object */
   nStyle := WS_CHILD + WS_VISIBLE + WS_BORDER + WS_HSCROLL + WS_VSCROLL
   hWndAx := CreateWindow( "ATLAXWin", "http://www.harbour-project.org",
nStyle, 10, 10, 500, 400, hWnd ) /* !!! */ 
   HB_AtlAxGetControl( hWndAx, @pDisp ) 
   IF ! EMPTY( pDisp ) 
      oAx := HB_OleAuto() 
      oAx:__hObj := pDisp 
   ENDIF 

   ShowWindow(hWnd, SW_SHOWNORMAL) 
   UpdateWindow(hWnd) 

   DO WHILE GetMessage(@cMsg) 
     TranslateMessage(cMsg) 
     DispatchMessage(cMsg) 
   ENDDO 

   RETURN 0 

FUNC WndProc(hWnd, nMsg, wParam, lParam) 
   LOCAL hDC, sPS, hMenu, hSubMenu, nStyle 
   LOCAL nStyle := WS_CHILD + WS_VISIBLE + WS_BORDER + WS_HSCROLL +
WS_VSCROLL

   IF nMsg == WM_CREATE 

   ELSEIF nMsg == WM_PAINT 
     hDC := BeginPaint(hWnd, @sPS) 
     EndPaint(hWnd, @sPS) 

   ELSEIF nMsg == WM_DESTROY 
     PostQuitMessage() 
     RETURN 0 

   ENDIF 

   RETURN DefWindowProc( hWnd, nMsg, wParam, lParam ) 

PROC RDDSYS();  RETURN 

PROC HB_GTSYS();  RETURN 


#pragma begindump 

#include "hbapi.h" 
#include <windows.h> 

static HMODULE hLib = NULL; 

HB_FUNC( ATLAXINIT ) 
{ 
    BOOL ( CALLBACK *pAtlAxWinInit )( void ); 

    if( hLib == NULL )
       hLib = LoadLibrary( "atl.dll" ); 
    if( ( unsigned long ) hLib > 32 ) 
    { 
       pAtlAxWinInit = GetProcAddress( hLib, "AtlAxWinInit" ); 
       if( pAtlAxWinInit ) 
          ( *pAtlAxWinInit )(); 
    } 
    // I leave hLib not freed to avoid unloading of library 
} 

HB_FUNC( HB_ATLAXGETCONTROL ) 
{ 
    IUnknown*   pUnk = NULL; 
    IDispatch*  pDisp = NULL; 
    PHB_ITEM    pItem; 
    HRESULT     lOleError; 

    lOleError = ( *s_pAtlAxGetControl )( ( HWND ) hb_parptr( 1 ), &pUnk ); 

    if( lOleError == S_OK ) 
    { 
       /* AtlAxGetControl returns IUnknown, but we are goint to use OLE
Automation 
          on ActiveX control, so let's deal with IDispatch only [Mindaugas]
*/ 
#if HB_OLE_C_API 
       lOleError = pUnk->lpVtbl->QueryInterface( pUnk, &IID_IDispatch, (
void** ) ( void * ) &pDisp ); 
       pUnk->lpVtbl->Release( pUnk ); 
#else 
       lOleError = pUnk->QueryInterface( IID_IDispatch, ( void** ) ( void *
) &pDisp ); 
       pUnk->Release(); 
#endif 
    } 

    if( lOleError == S_OK ) 
    { 
       pItem = hb_oleItemPut( NULL, pDisp ); 
       hb_itemParamStoreForward( 2, pItem ); 
       hb_itemRelease( pItem ); 
       hb_retnl( S_OK ); 
    } 
    else 
    { 
       /* TODO: RTE */ 
    } 
    hb_retnl( lOleError ); 
} 

#pragma enddump 

//----------------------------------------------------//

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/Errors-with-11032-tp23521549p23607332.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Mon May 18 19:56:02 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon May 18 19:56:06 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <4A11EA11.5010105@dbtopas.lt>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
	<23539642.post@talk.nabble.com> <23540931.post@talk.nabble.com>
	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>
	<23574376.post@talk.nabble.com>
	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>
	<4A1011A0.3010308@dbtopas.lt> <23583794.post@talk.nabble.com>
	<4A1156CE.9050407@dbtopas.lt> <23601197.post@talk.nabble.com>
	<4A11AD61.4010705@dbtopas.lt> <4A11B94A.2090904@dbtopas.lt>
	<23605843.post@talk.nabble.com> <4A11EA11.5010105@dbtopas.lt>
Message-ID: <23607352.post@talk.nabble.com>


Sorry Mindaugas


Mindaugas Kavaliauskas wrote:
> 
> my name is Mindaugas. I've tried to joke a few times writing Pritpul, 
> but it seems you are not enough sharp-eyed to notice the difference 
> neither in spelling of my name nor in yours.
> 

I did notice. At times a foreign name tends to have 
these mistakes, though these should not be. 

I have now remembered you well. It is just a matter to tune your memory.
The same problem I had with writing Przemek's full first name 
so I adopted this version which probably goes ok with him.
Will take care in future.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Errors-with-11032-tp23521549p23607352.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Mon May 18 20:02:37 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May 18 20:02:47 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <4A11E4CD.9090004@dbtopas.lt>
References: <23521549.post@talk.nabble.com> <23583794.post@talk.nabble.com>
	<4A1156CE.9050407@dbtopas.lt> <23601197.post@talk.nabble.com>
	<4A11AD61.4010705@dbtopas.lt> <4A11B94A.2090904@dbtopas.lt>
	<4A11BEB7.9070501@fsgiudice.com> <4A11CF8C.5030401@dbtopas.lt>
	<4A11D8C0.3040701@fsgiudice.com> <4A11E4CD.9090004@dbtopas.lt>
Message-ID: <18d502870905181702g4b765101me20159b6f9c12a28@mail.gmail.com>

Hi Mindaugas,

I'd certainly welcome your lightweight AX implementation,
this way hopefully not every contrib would need to reinvent
it again and again.

As for lightweight winapi, HBWHAT had a lot of problems, so
it's no more. Some WINAPI's are now implemented
(hopefully properly) as WAPI_*() functions in HBWIN. But
this effort seem to have stalled.

Your CAWI lib still looks far the best I've seen. Too bad
we don't have it in Harbour :)

Brgds,
Viktor

On Tue, May 19, 2009 at 12:44 AM, Mindaugas Kavaliauskas
<dbtopas@dbtopas.lt> wrote:
> Francesco Saverio Giudice wrote:
>>>
>>> Are these two different things the same ActiveX?
>>>
>> I will look at Pritpal's upload, but, as I wrote before, I would like to
>> have an independent (from gtwvg) version.
>
> I've extended my previous sample by:
> ===========================================================
> ? ?HB_AtlAxGetControl( hWndAx, @pDisp )
> ? ?IF ! EMPTY( pDisp )
> ? ? ?oAx := HB_OleAuto()
> ? ? ?oAx:__hObj := pDisp
> ? ?ENDIF
> ===========================================================
>
> and
>
> ===========================================================
> HB_FUNC( HB_ATLAXGETCONTROL )
> {
> ? IUnknown* ? pUnk = NULL;
> ? IDispatch* ?pDisp = NULL;
> ? PHB_ITEM ? ?pItem;
> ? HRESULT ? ? lOleError;
>
> ? lOleError = ( *s_pAtlAxGetControl )( ( HWND ) hb_parptr( 1 ), &pUnk );
>
> ? if( lOleError == S_OK )
> ? {
> ? ? ?/* AtlAxGetControl returns IUnknown, but we are goint to use OLE
> Automation
> ? ? ? ? on ActiveX control, so let's deal with IDispatch only [Mindaugas] */
> #if HB_OLE_C_API
> ? ? ?lOleError = pUnk->lpVtbl->QueryInterface( pUnk, &IID_IDispatch, (
> void** ) ( void * ) &pDisp );
> ? ? ?pUnk->lpVtbl->Release( pUnk );
> #else
> ? ? ?lOleError = pUnk->QueryInterface( IID_IDispatch, ( void** ) ( void * )
> &pDisp );
> ? ? ?pUnk->Release();
> #endif
> ? }
>
> ? if( lOleError == S_OK )
> ? {
> ? ? ?pItem = hb_oleItemPut( NULL, pDisp );
> ? ? ?hb_itemParamStoreForward( 2, pItem );
> ? ? ?hb_itemRelease( pItem );
> ? ? ?hb_retnl( S_OK );
> ? }
> ? else
> ? {
> ? ? ?/* TODO: RTE */
> ? }
> ? hb_retnl( lOleError );
> }
> ===========================================================
>
> And I can navigate (using menu commands):
> ? oAx:Navigate("http://sourceforge.net")
> ? oAx:Navigate("http://www.google.lt")
> ? oAx:GoBack()
> ? oAx:GoForward()
> ? oAx:Refresh()
> without any problem.
>
> Do we have some light-weight WinAPI library now? (To include these samples
> in to Harbour). WHAT32 was something like that...
>
> I'll try to look into event handling tomorrow.
>
>
> Regards,
> Mindaugas
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From bedipritpal at hotmail.com  Mon May 18 20:10:46 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon May 18 20:10:51 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <18d502870905181702g4b765101me20159b6f9c12a28@mail.gmail.com>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
	<23539642.post@talk.nabble.com> <23540931.post@talk.nabble.com>
	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>
	<23574376.post@talk.nabble.com>
	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>
	<4A1011A0.3010308@dbtopas.lt> <23583794.post@talk.nabble.com>
	<4A1156CE.9050407@dbtopas.lt> <23601197.post@talk.nabble.com>
	<4A11AD61.4010705@dbtopas.lt> <4A11B94A.2090904@dbtopas.lt>
	<4A11BEB7.9070501@fsgiudice.com> <4A11CF8C.5030401@dbtopas.lt>
	<4A11D8C0.3040701@fsgiudice.com> <4A11E4CD.9090004@dbtopas.lt>
	<18d502870905181702g4b765101me20159b6f9c12a28@mail.gmail.com>
Message-ID: <23607506.post@talk.nabble.com>


Hello


Viktor Szak?ts wrote:
> 
> As for lightweight winapi, HBWHAT had a lot of problems, so
> it's no more. Some WINAPI's are now implemented
> (hopefully properly) as WAPI_*() functions in HBWIN. But
> this effort seem to have stalled.
> 

Not exactly.

The development in this direction got stalled due to attention 
to QT implementation. At a given point of time one may have 
limited times.

HBWHAT was not bad either. It needs just few tweaks and by far 
the most comprehensive API so far. Perhaps we need more resources 
to join the effort.

Of course, Mindaugas's contribution, if he decides to this effect,
could prove to be a big boost to Windows developers.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Errors-with-11032-tp23521549p23607506.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Mon May 18 20:33:14 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May 18 20:33:19 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <23607506.post@talk.nabble.com>
References: <23521549.post@talk.nabble.com> <23601197.post@talk.nabble.com>
	<4A11AD61.4010705@dbtopas.lt> <4A11B94A.2090904@dbtopas.lt>
	<4A11BEB7.9070501@fsgiudice.com> <4A11CF8C.5030401@dbtopas.lt>
	<4A11D8C0.3040701@fsgiudice.com> <4A11E4CD.9090004@dbtopas.lt>
	<18d502870905181702g4b765101me20159b6f9c12a28@mail.gmail.com>
	<23607506.post@talk.nabble.com>
Message-ID: <18d502870905181733g2815f1fdwe829b29134cd8bb2@mail.gmail.com>

> The development in this direction got stalled due to attention
> to QT implementation. At a given point of time one may have
> limited times.
>
> HBWHAT was not bad either. It needs just few tweaks and by far
> the most comprehensive API so far. Perhaps we need more resources
> to join the effort.

It would need a huge amount of tweaks, it had tons of bugs
and compatibility problems. No support for Unicode, no support
for x64, no support for WinCE and no support from developers.
I've been doing tweaks for a year (or a half?) to address the most
serious ones, all alone. Nobody was interested to fix anything in
it, and the codebase was huge, and I didn't need it or use it, so
even my fixes were untested. Overall the code looked so bad,
that it still seems easier to start from scratch.

BTW I feel the same for some parts of HBWIN and some other
Win specific parts in Harbour.

Anyhow I personally only need just a few simple functions from
HBWIN, so for me WinAPI isn't an issue. It'd just be very good
for 3rd parties to build upon a high quality WINAPI base and not
having the need to reinvent subsets of it locally (usually in
lower quality or with missing features).

It was refreshing to see the new OLE implementation which
concentrated on quality. Now OLE can be used in real apps
without worrying about various issues, so it's a very big step.

HBWIN DLL handling (still no x64 support - with embedded
ASM and numeric pointers) could also use such enhancements.
Also the WINPRN subsystem could use such fixes in some
of its code parts. I plan to change the registry functions to use
real pointers.

Brgds,
Viktor
From vszakats at users.sourceforge.net  Tue May 19 01:21:25 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue May 19 01:21:30 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11083] trunk/harbour
Message-ID: <E1M6HlV-0000rw-9o@74yxhf1.ch3.sourceforge.com>

Revision: 11083
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11083&view=rev
Author:   vszakats
Date:     2009-05-19 05:21:24 +0000 (Tue, 19 May 2009)

Log Message:
-----------
2009-05-19 07:20 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbwin/win_reg.prg
  * contrib/hbwin/win_regc.c
    * Cleanups: Documenting params, changing default, using SWITCH,
      HKEY to HKCU (from HKLM) to be friendly with restricted user
      situations (code may become incompatible), removed unused params,
      changed return values to logical, more consistently filling params
      returned by ref, fixed hkResult usage, fixed hbResult to use real
      pointer type, minor opts.
      Some of these changes may create incompatibility if:
         - no hkey is passed, since the default has changed.
         - using win_reg*() functions directly, since return value and
           hbResult type has changed.
    ! Fixed potential GPF is non-string was passed for string params.

  * contrib/hbwin/tests/testreg.prg
    + Added registry write test.

  * utils/hbmk2/hbmk2.prg
  * utils/hbi18n/hbi18n.prg
  * utils/hbrun/hbrun.prg
    * Minor opt.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/tests/testreg.prg
    trunk/harbour/contrib/hbwin/win_reg.prg
    trunk/harbour/contrib/hbwin/win_regc.c
    trunk/harbour/utils/hbi18n/hbi18n.prg
    trunk/harbour/utils/hbmk2/hbmk2.prg
    trunk/harbour/utils/hbrun/hbrun.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Tue May 19 01:39:42 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue May 19 01:39:47 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11084] trunk/harbour
Message-ID: <E1M6I3C-0001bV-EL@74yxhf1.ch3.sourceforge.com>

Revision: 11084
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11084&view=rev
Author:   vszakats
Date:     2009-05-19 05:39:40 +0000 (Tue, 19 May 2009)

Log Message:
-----------
2009-05-19 07:31 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * external/sqlite3/sqlite3.c
  * external/sqlite3/sqlite3.h
    * sqlite upgraded to 3.6.14.1 (from 3.6.11)

  * external/sqlite3/Makefile
    + Enabled for bcc compiler. Seems to compile fine now.
    ; NOTE: poccarm still fails, even with pocc6.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/external/sqlite3/Makefile
    trunk/harbour/external/sqlite3/sqlite3.c
    trunk/harbour/external/sqlite3/sqlite3.h


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Tue May 19 02:20:48 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue May 19 02:20:53 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11085] trunk/harbour
Message-ID: <E1M6Igy-0002Og-Eq@74yxhf1.ch3.sourceforge.com>

Revision: 11085
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11085&view=rev
Author:   vszakats
Date:     2009-05-19 06:20:47 +0000 (Tue, 19 May 2009)

Log Message:
-----------
2009-05-19 08:19 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.pt_BR.po
  * utils/hbmk2/hbmk2.hu_HU.po
  * utils/hbmk2/hbmk2.prg
    + Displaying C compiler used (with path) if autodetection
      was used and -info enabled.
    ! Workaround added to MemoLine() sometimes returning empty 
      string for the last line.

  * source/rtl/tget.prg
    % Minor opt.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/rtl/tget.prg
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.po
    trunk/harbour/utils/hbmk2/hbmk2.prg
    trunk/harbour/utils/hbmk2/hbmk2.pt_BR.po


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Tue May 19 05:37:29 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue May 19 05:37:34 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11086] trunk/harbour
Message-ID: <E1M6LlJ-0004vC-7C@d5vjzd1.ch3.sourceforge.com>

Revision: 11086
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11086&view=rev
Author:   druzus
Date:     2009-05-19 09:37:28 +0000 (Tue, 19 May 2009)

Log Message:
-----------
2009-05-19 11:46 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/xhb/xhbmsgs.c
    ! fixed one byte string as number emulation in some math operations
      where both expressions are one byte strings, f.e.:
         ? "A" * "B"

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/xhb/xhbmsgs.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From sscc at mweb.co.za  Tue May 19 05:49:22 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue May 19 05:49:31 2009
Subject: [Harbour] Extensions - possible cleanup?
In-Reply-To: <468CEFD6-A709-48E6-B424-E25F9F33B26D@syenar.hu>
References: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>	<4A116C96.5010306@mweb.co.za>
	<468CEFD6-A709-48E6-B424-E25F9F33B26D@syenar.hu>
Message-ID: <4A1280A2.5050201@mweb.co.za>

Szak?ts Viktor wrote:

> Not just a habit, Harbour (and of course hbmk2) also supports
> DOS, and potentially other such limited OSes/filesystems where
> LFN isn't available. So in Harbour core we stick to 8.3 names.

Perhaps it is time to drop support for those limits. I cannot imagine them 
pertaining to any development environment commonly in use today?

This change would not stop anyone deploying to one of those OS's. The only one I 
can think of would be DOS. I would say the situation would be similar to 
cross-compiling for CE, I doubt anyone wants harbour to run on CE, just to 
deploy harbour apps to it.

Regards
Alex
From druzus at acn.waw.pl  Tue May 19 06:16:08 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue May 19 06:07:20 2009
Subject: [Harbour] Extensions - possible cleanup?
In-Reply-To: <4A1280A2.5050201@mweb.co.za>
References: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>
	<4A116C96.5010306@mweb.co.za>
	<468CEFD6-A709-48E6-B424-E25F9F33B26D@syenar.hu>
	<4A1280A2.5050201@mweb.co.za>
Message-ID: <20090519101608.GA12423@uran.home.aster.pl>

On Tue, 19 May 2009, Alex Strickland wrote:

Hi,

>> Not just a habit, Harbour (and of course hbmk2) also supports
>> DOS, and potentially other such limited OSes/filesystems where
>> LFN isn't available. So in Harbour core we stick to 8.3 names.
> Perhaps it is time to drop support for those limits. I cannot imagine them 
> pertaining to any development environment commonly in use today?

I can. DOS is quite often used in embedded systems like extended barcode
readers with small PC inside. It's nice that I can write applications
for them in Harbour. I also knows some installations which still uses
compters with DOS terminals.
Please also note that the limitations comes from file system not OS.
Most of popular mass storage devices are reformatted with FAT. They
are very often used with some external devices f.e. physical printers
which do not support VFAT, f.e. due to MS patents. It will not change
in the nearest years.

> This change would not stop anyone deploying to one of those OS's. The only 
> one I can think of would be DOS. I would say the situation would be similar 
> to cross-compiling for CE, I doubt anyone wants harbour to run on CE, just 
> to deploy harbour apps to it.

I do not see any problem in using different names by user in his programs
if he only wants it. But dropping 8.3 file name support in core code and
forcing names which does not feet above condition because it looks nicer
is not enough argument for me.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue May 19 06:17:36 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue May 19 06:17:49 2009
Subject: [Harbour] Extensions - possible cleanup?
In-Reply-To: <4A1280A2.5050201@mweb.co.za>
References: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>	<4A116C96.5010306@mweb.co.za>
	<468CEFD6-A709-48E6-B424-E25F9F33B26D@syenar.hu>
	<4A1280A2.5050201@mweb.co.za>
Message-ID: <C908C7BB-FD78-432C-A91F-4E6639207B6E@syenar.hu>

>> Not just a habit, Harbour (and of course hbmk2) also supports
>> DOS, and potentially other such limited OSes/filesystems where
>> LFN isn't available. So in Harbour core we stick to 8.3 names.
>
> Perhaps it is time to drop support for those limits. I cannot  
> imagine them pertaining to any development environment commonly in  
> use today?
>
> This change would not stop anyone deploying to one of those OS's.  
> The only one I can think of would be DOS. I would say the situation  
> would be similar to cross-compiling for CE, I doubt anyone wants  
> harbour to run on CE, just to deploy harbour apps to it.

We allow to build Harbour on DOS, so it's not only a target
at this moment. We also allow to build apps on DOS. Our
target is still to keep Clipper compatibility and Clipper runs
on DOS. I can imagine users who wouldn't want to switch
directly to Windows/Linux, but first compile app for Harbour/DOS.
Some ppl may even need to run apps in pure DOS environment.
This also seems to be backed by sf.net download stats, where
our DOS downloads rank quite high (also to my surprise).

So for now I wouldn't agree to drop DOS support, just to
introduce one long filename extension, otherwise the 8.3
isn't very pressing for Harbour IMO.

Of course if other group members agree to drop DOS support,
or partially drop DOS support as a build platform, we can
do it. I personally don't need it.

However we decide IMO there should be a pretty pressing need
to introduce long extensions for our few basic file types, for
me they look very strange in most cases, and in case of hbmk2
I most probably wouldn't use them. We will see, maybe there
are some other good 3 char choices for .hbm/.hbp/.hbt.

Brgds,
Viktor

From sscc at mweb.co.za  Tue May 19 06:22:16 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue May 19 06:22:25 2009
Subject: [Harbour] Extensions - possible cleanup?
In-Reply-To: <20090519101608.GA12423@uran.home.aster.pl>
References: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>	<4A116C96.5010306@mweb.co.za>	<468CEFD6-A709-48E6-B424-E25F9F33B26D@syenar.hu>	<4A1280A2.5050201@mweb.co.za>
	<20090519101608.GA12423@uran.home.aster.pl>
Message-ID: <4A128858.1000001@mweb.co.za>

Przemyslaw Czerpak wrote:

> I can. DOS is quite often used in embedded systems like extended barcode
> readers with small PC inside. It's nice that I can write applications
> for them in Harbour. I also knows some installations which still uses
> compters with DOS terminals.
> Please also note that the limitations comes from file system not OS.
> Most of popular mass storage devices are reformatted with FAT. They
> are very often used with some external devices f.e. physical printers
> which do not support VFAT, f.e. due to MS patents. It will not change
> in the nearest years.

I hear you, but, does anyone *develop* systems on those devices etc.

> I do not see any problem in using different names by user in his programs
> if he only wants it. But dropping 8.3 file name support in core code and
> forcing names which does not feet above condition because it looks nicer
> is not enough argument for me.

It's not just nicer, Viktor was finding it difficult to come up with a 
technically elegant solution.

Regards
Alex
From druzus at acn.waw.pl  Tue May 19 07:15:41 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue May 19 07:06:53 2009
Subject: [Harbour] Extensions - possible cleanup?
In-Reply-To: <4A128858.1000001@mweb.co.za>
References: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>
	<4A116C96.5010306@mweb.co.za>
	<468CEFD6-A709-48E6-B424-E25F9F33B26D@syenar.hu>
	<4A1280A2.5050201@mweb.co.za>
	<20090519101608.GA12423@uran.home.aster.pl>
	<4A128858.1000001@mweb.co.za>
Message-ID: <20090519111541.GB16229@uran.home.aster.pl>

On Tue, 19 May 2009, Alex Strickland wrote:

Hi,

>> I can. DOS is quite often used in embedded systems like extended barcode
>> readers with small PC inside. It's nice that I can write applications
>> for them in Harbour. I also knows some installations which still uses
>> compters with DOS terminals.
>> Please also note that the limitations comes from file system not OS.
>> Most of popular mass storage devices are reformatted with FAT. They
>> are very often used with some external devices f.e. physical printers
>> which do not support VFAT, f.e. due to MS patents. It will not change
>> in the nearest years.
> I hear you, but, does anyone *develop* systems on those devices etc.

I am. I also think that anyone here can write very simple .prg application
customized for final user and install it in barcode reader to use it instead
of a default one. He only need Harbour with pure console DOS support.
I also think that any Harbour user may need write program which will
have to exchange data or store all files in some storage device where
pure FAT will be available only. I do not see any reason why we should
forbid or reduce such possibilities.

>> I do not see any problem in using different names by user in his programs
>> if he only wants it. But dropping 8.3 file name support in core code and
>> forcing names which does not feet above condition because it looks nicer
>> is not enough argument for me.
> It's not just nicer, Viktor was finding it difficult to come up with a 
> technically elegant solution.

I think that you misunderstood him.

best regards,
Przemek
From itamarlins at bol.com.br  Tue May 19 07:26:19 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Tue May 19 07:27:16 2009
Subject: [Harbour] Unrecoverable error 1010: hb_cdxIndexPageRead: Read index
	page failed.
Message-ID: <guu51v$hbl$1@ger.gmane.org>

Hi!
I get the error.
Application Internal Error - C:\letodb\bin\letodb.exe
Terminated at: 2009.05.18 17:22:09
Unrecoverable error 1010: hb_cdxIndexPageRead: Read index page failed.
Called from DBUSEAREA(0)
Called from HS_OPENTABLE(390) in source\server\server.prg
Called from LETO_SERVER(0)
Called from STARTSERVER(239) in source\server\server.prg
Called from MAIN(157) in source\server\server.prg
------------------------------------------------------------------------
My RDD is CDX, and i am using Harbour, SVN.
My enviroment is:
c:\dados\Dir01\clientes.dbf
c:\dados\Dir02\clientes.dbf
c:\dados\Dir03\clientes.dbf
c:\dados\Dir04\clientes.dbf
I need to know what file this with corrupted index and in that place(sub 
directory). The letodb not informed.

This is the reply of Mr Alexander:
> Unfortunately, there is no possibility to know this. [x]Harbour doesn't 
> allow to catch, to handle the internal error, it simply terminates the 
> application.

> Theoretically, if there wasn't hardware problems, including power off, if 
> the table and index are handled by Harbour only and  the DBFCDX RDD hasn't 
> errors, such kind of problems >shouldn't appear. But if it appears, the 
> only way is to reindex tables and restart the letodb.

>Regards, Alexander.

I need to know which file is corrupted.

Maybe:
Unrecoverable error 1010: hb_cdxIndexPageRead: Read index page failed.
Called from DBUSEAREA(0) - c:\dados\Dir01\clientes.dbf. //So I know to fix 
the problem!!!!

Regards,
Itamar M. Lins Jr.



From sscc at mweb.co.za  Tue May 19 07:56:40 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue May 19 07:56:49 2009
Subject: [Harbour] Extensions - possible cleanup?
In-Reply-To: <20090519111541.GB16229@uran.home.aster.pl>
References: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>	<4A116C96.5010306@mweb.co.za>	<468CEFD6-A709-48E6-B424-E25F9F33B26D@syenar.hu>	<4A1280A2.5050201@mweb.co.za>	<20090519101608.GA12423@uran.home.aster.pl>	<4A128858.1000001@mweb.co.za>
	<20090519111541.GB16229@uran.home.aster.pl>
Message-ID: <4A129E78.2030001@mweb.co.za>

Przemyslaw Czerpak wrote:

>> I hear you, but, does anyone *develop* systems on those devices etc.
> 
> I am. 

Well, I can't argue with that then :).

Regards
Alex

From dbtopas at dbtopas.lt  Tue May 19 08:18:05 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue May 19 08:20:05 2009
Subject: [Harbour] Extensions - possible cleanup?
In-Reply-To: <4A128858.1000001@mweb.co.za>
References: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>	<4A116C96.5010306@mweb.co.za>	<468CEFD6-A709-48E6-B424-E25F9F33B26D@syenar.hu>	<4A1280A2.5050201@mweb.co.za>	<20090519101608.GA12423@uran.home.aster.pl>
	<4A128858.1000001@mweb.co.za>
Message-ID: <4A12A37D.6010209@dbtopas.lt>

Hi,


> I hear you, but, does anyone *develop* systems on those devices etc.

I was. Though, it was C application, I did not know anything about 
Harbour that time.


Regards,
Mindaugas
From dbtopas at dbtopas.lt  Tue May 19 09:09:15 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue May 19 09:11:15 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <23607332.post@talk.nabble.com>
References: <23521549.post@talk.nabble.com>	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>	<23527339.post@talk.nabble.com>
	<23535023.post@talk.nabble.com>	<23539642.post@talk.nabble.com>
	<23540931.post@talk.nabble.com>	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>	<23574376.post@talk.nabble.com>	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>	<4A1011A0.3010308@dbtopas.lt>
	<23583794.post@talk.nabble.com>	<4A1156CE.9050407@dbtopas.lt>
	<23601197.post@talk.nabble.com>	<4A11AD61.4010705@dbtopas.lt>
	<4A11B94A.2090904@dbtopas.lt>	<4A11BEB7.9070501@fsgiudice.com>
	<4A11CF8C.5030401@dbtopas.lt>	<4A11D8C0.3040701@fsgiudice.com>
	<4A11E4CD.9090004@dbtopas.lt> <23607332.post@talk.nabble.com>
Message-ID: <4A12AF7B.8040202@dbtopas.lt>

Hi,


>> nAddr := MakeWndProc( {|X,Y,Z,T| WndProc( X,Y,Z,T ) } ) 
> 
> Can you make this function public. Probably this may pave the 
> way to clean a non-portable part of GTWVG, whio knows.

This function is not 64bit compatible. So, I do not want to propose it 
for the masses. The source of it was published on [x]Harbour lists I 
guess 2 or 3 times, in a few last years.


> Just to put everything together, to have a whole picture:

Yes. It's OK, though I create
    hWndAx := CreateWindow( ...
in the message handler of main windows on WM_CREATE message.


Regards,
Mindaugas
From mbelgrano at deltain.it  Tue May 19 10:22:04 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue May 19 10:22:32 2009
Subject: [Harbour] Unrecoverable error 1010: hb_cdxIndexPageRead: Read 
	index page failed.
In-Reply-To: <guu51v$hbl$1@ger.gmane.org>
References: <guu51v$hbl$1@ger.gmane.org>
Message-ID: <609353e70905190722j75effd3cv99d43f2305e7ea13@mail.gmail.com>

Client server not reduce data corruption?
I am Using ads it is never crashed on server side (register error in log but
non crash server)
what appen if you Restart letodb executable on error and not use corrupted
file


2009/5/19 Itamar Lins <itamarlins@bol.com.br>

> Hi!
> I get the error.
> Application Internal Error - C:\letodb\bin\letodb.exe
> Terminated at: 2009.05.18 17:22:09
> Unrecoverable error 1010: hb_cdxIndexPageRead: Read index page failed.
> Called from DBUSEAREA(0)
> Called from HS_OPENTABLE(390) in source\server\server.prg
> Called from LETO_SERVER(0)
> Called from STARTSERVER(239) in source\server\server.prg
> Called from MAIN(157) in source\server\server.prg
> ------------------------------------------------------------------------
> My RDD is CDX, and i am using Harbour, SVN.
> My enviroment is:
> c:\dados\Dir01\clientes.dbf
> c:\dados\Dir02\clientes.dbf
> c:\dados\Dir03\clientes.dbf
> c:\dados\Dir04\clientes.dbf
> I need to know what file this with corrupted index and in that place(sub
> directory). The letodb not informed.
>
> This is the reply of Mr Alexander:
> > Unfortunately, there is no possibility to know this. [x]Harbour doesn't
> > allow to catch, to handle the internal error, it simply terminates the
> > application.
>
> > Theoretically, if there wasn't hardware problems, including power off, if
> > the table and index are handled by Harbour only and  the DBFCDX RDD
> hasn't
> > errors, such kind of problems >shouldn't appear. But if it appears, the
> > only way is to reindex tables and restart the letodb.
>
> >Regards, Alexander.
>
> I need to know which file is corrupted.
>
> Maybe:
> Unrecoverable error 1010: hb_cdxIndexPageRead: Read index page failed.
> Called from DBUSEAREA(0) - c:\dados\Dir01\clientes.dbf. //So I know to fix
> the problem!!!!
>
> Regards,
> Itamar M. Lins Jr.
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090519/b3df58b1/attachment-0001.html
From vszakats at users.sourceforge.net  Tue May 19 11:15:10 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue May 19 11:15:16 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11087] trunk/harbour
Message-ID: <E1M6R26-0008GN-JG@bj8yhf1.ch3.sourceforge.com>

Revision: 11087
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11087&view=rev
Author:   vszakats
Date:     2009-05-19 15:15:09 +0000 (Tue, 19 May 2009)

Log Message:
-----------
2009-05-19 17:10 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.hu_HU.po
  * utils/hbmk2/hbmk2.prg
    + Added support for UTF-8 output. Currently on on *nix
      systems. The current solution is just an ugly hack, 
      for the most part to test this problem in real life.
      The output format is also fixed to *nix OSes, there is 
      not attempt made to detect terminal encoding, so it 
      may be wrong if terminal expects something else.

  * utils/hbi18n/hbi18n.prg
    * .po_ -> .po (Przemek, please verify me, or modify it as
      you think best)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbi18n/hbi18n.prg
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.po
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From philb at philb.us  Tue May 19 13:22:10 2009
From: philb at philb.us (Phil Barnett)
Date: Tue May 19 13:22:24 2009
Subject: [Harbour] Extensions - possible cleanup?
In-Reply-To: <4A1280A2.5050201@mweb.co.za>
References: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>	<4A116C96.5010306@mweb.co.za>	<468CEFD6-A709-48E6-B424-E25F9F33B26D@syenar.hu>
	<4A1280A2.5050201@mweb.co.za>
Message-ID: <4A12EAC2.5020504@philb.us>

Alex Strickland wrote:
> Szak?ts Viktor wrote:
>
>> Not just a habit, Harbour (and of course hbmk2) also supports
>> DOS, and potentially other such limited OSes/filesystems where
>> LFN isn't available. So in Harbour core we stick to 8.3 names.
>
> Perhaps it is time to drop support for those limits. I cannot imagine 
> them pertaining to any development environment commonly in use today?
>
> This change would not stop anyone deploying to one of those OS's. The 
> only one I can think of would be DOS. I would say the situation would 
> be similar to cross-compiling for CE, I doubt anyone wants harbour to 
> run on CE, just to deploy harbour apps to it. 
Our primary goal is near 100% backwards compatibility with Clipper 
5.2/5.3. That in itself means we need to support DOS.

It's difficult to understand what the world wants to do with Harbour 
Project in the future.
From e.m.giordano at emagsoftware.it  Tue May 19 13:22:23 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue May 19 13:22:32 2009
Subject: [Harbour] Warning
Message-ID: <E2C81B42F12F43FC899A8B8CB7E7CF91@emag>

Warning W8080 ../../sqlite3.c 105501: 'sqlite3one' is declared but never 
used

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From mbelgrano at deltain.it  Tue May 19 13:32:49 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue May 19 13:33:14 2009
Subject: [Harbour] Extensions - possible cleanup?
In-Reply-To: <4A12EAC2.5020504@philb.us>
References: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com> 
	<4A116C96.5010306@mweb.co.za>
	<468CEFD6-A709-48E6-B424-E25F9F33B26D@syenar.hu> 
	<4A1280A2.5050201@mweb.co.za> <4A12EAC2.5020504@philb.us>
Message-ID: <609353e70905191032n34f0a803g504bfe6a69e181f0@mail.gmail.com>

The compatibility regard that a source code clipper5.2/5.3 must run also
without modification and not refered the original os environment (DOS)
Now harbour have a lot of feature that clip52 not have:
Command line compiler HBMK2 ,Multi Windows, Multi Thread, Multiplatform
But also today we can have an application that be executed on fat16 disk  on
windows xp so we must sopport fat filesystem and not dos


2009/5/19 Phil Barnett <philb@philb.us>

>
> Our primary goal is near 100% backwards compatibility with Clipper 5.2/5.3.
> That in itself means we need to support DOS.
>
> It's difficult to understand what the world wants to do with Harbour
> Project in the future.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090519/bf2b7300/attachment.html
From harbour.01 at syenar.hu  Tue May 19 13:34:32 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue May 19 13:34:41 2009
Subject: [Harbour] Warning
In-Reply-To: <E2C81B42F12F43FC899A8B8CB7E7CF91@emag>
References: <E2C81B42F12F43FC899A8B8CB7E7CF91@emag>
Message-ID: <5510A5FF-376B-47A9-AD74-DFDCE65941C5@syenar.hu>

I guess it comes from BCC, but I can't reproduce it
with my installed versions. Anyhow it should be reported
to sqlite3 developers for a fix, it won't cause any
harm for Harbour.

Brgds,
Viktor

On 2009.05.19., at 19:22, Enrico Maria Giordano wrote:

> Warning W8080 ../../sqlite3.c 105501: 'sqlite3one' is declared but  
> never used
>
> EMG
>
> --
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From e.m.giordano at emagsoftware.it  Tue May 19 13:39:21 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue May 19 13:39:27 2009
Subject: [Harbour] Warning
References: <E2C81B42F12F43FC899A8B8CB7E7CF91@emag>
	<5510A5FF-376B-47A9-AD74-DFDCE65941C5@syenar.hu>
Message-ID: <FAD2DA9F883B4E458BF47F3D35E414DB@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 19 maggio 2009 19.34
Oggetto: Re: [Harbour] Warning


>I guess it comes from BCC, but I can't reproduce it
> with my installed versions. Anyhow it should be reported
> to sqlite3 developers for a fix, it won't cause any
> harm for Harbour.

Ok.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From bedipritpal at hotmail.com  Tue May 19 15:25:48 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue May 19 15:25:52 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <4A12AF7B.8040202@dbtopas.lt>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
	<23539642.post@talk.nabble.com> <23540931.post@talk.nabble.com>
	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>
	<23574376.post@talk.nabble.com>
	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>
	<4A1011A0.3010308@dbtopas.lt> <23583794.post@talk.nabble.com>
	<4A1156CE.9050407@dbtopas.lt> <23601197.post@talk.nabble.com>
	<4A11AD61.4010705@dbtopas.lt> <4A11B94A.2090904@dbtopas.lt>
	<4A11BEB7.9070501@fsgiudice.com> <4A11CF8C.5030401@dbtopas.lt>
	<4A11D8C0.3040701@fsgiudice.com> <4A11E4CD.9090004@dbtopas.lt>
	<23607332.post@talk.nabble.com> <4A12AF7B.8040202@dbtopas.lt>
Message-ID: <23622741.post@talk.nabble.com>


Hello Mindaugas


Mindaugas Kavaliauskas wrote:
> 
>>> nAddr := MakeWndProc( {|X,Y,Z,T| WndProc( X,Y,Z,T ) } ) 
>> 
>> Can you make this function public. Probably this may pave the 
>> way to clean a non-portable part of GTWVG, whio knows.
> 
> This function is not 64bit compatible. So, I do not want to propose it 
> for the masses. The source of it was published on [x]Harbour lists I 
> guess 2 or 3 times, in a few last years.
> 

I have tried to search for it but could not. 
can you point-out the link, or to be easier, post on this list again.
I just want to compare with contrib/gtwvg/wincallb.c.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Errors-with-11032-tp23521549p23622741.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dbtopas at dbtopas.lt  Tue May 19 15:41:27 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue May 19 15:43:27 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <23622741.post@talk.nabble.com>
References: <23521549.post@talk.nabble.com>	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>	<23527339.post@talk.nabble.com>
	<23535023.post@talk.nabble.com>	<23539642.post@talk.nabble.com>
	<23540931.post@talk.nabble.com>	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>	<23574376.post@talk.nabble.com>	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>	<4A1011A0.3010308@dbtopas.lt>
	<23583794.post@talk.nabble.com>	<4A1156CE.9050407@dbtopas.lt>
	<23601197.post@talk.nabble.com>	<4A11AD61.4010705@dbtopas.lt>
	<4A11B94A.2090904@dbtopas.lt>	<4A11BEB7.9070501@fsgiudice.com>
	<4A11CF8C.5030401@dbtopas.lt>	<4A11D8C0.3040701@fsgiudice.com>
	<4A11E4CD.9090004@dbtopas.lt>	<23607332.post@talk.nabble.com>
	<4A12AF7B.8040202@dbtopas.lt> <23622741.post@talk.nabble.com>
Message-ID: <4A130B67.1090707@dbtopas.lt>

Hi,


> I have tried to search for it but could not. 
> can you point-out the link, or to be easier, post on this list again.
> I just want to compare with contrib/gtwvg/wincallb.c.

I'd rather say wvg's is better. It uses VirtualAlloc() to allocate page 
having the correct (read/write/execute) permissions. But I'm lost among 
the details. _AsCallback() has many strange parameters instead of a 
single codeblock.

The problem is I'm to lazy to change a working code. Win32 allows 
execute code on memory allocated using hb_xgrab(), so, this solution is 
Intel x86 Win 32bit only. I do not want to publish my code until it is 
"dirty".


Regards,
Mindaugas
From gvarona at ec-red.com  Tue May 19 16:36:03 2009
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Tue May 19 16:33:59 2009
Subject: [Harbour] How can create a library with hbmk2?
Message-ID: <4A131833.3060505@ec-red.com>

Best Regards
GVS
From mbelgrano at deltain.it  Tue May 19 17:03:27 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue May 19 17:03:52 2009
Subject: [Harbour] How can create a library with hbmk2?
In-Reply-To: <4A131833.3060505@ec-red.com>
References: <4A131833.3060505@ec-red.com>
Message-ID: <609353e70905191403n649621dexa4075ed945f64db1@mail.gmail.com>

hbmk2 myprg.PRG myprg2.PRG  -hblib -omylib.lib


2009/5/19 Guillermo Varona Silup? <gvarona@ec-red.com>

> Best Regards
> GVS
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090519/df4ef6a3/attachment.html
From dbtopas at dbtopas.lt  Tue May 19 17:07:41 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue May 19 17:09:40 2009
Subject: [Harbour] HB_VALTOEXP 
Message-ID: <4A131F9D.2090900@dbtopas.lt>

Hi,


HB_VALTOEXP() works bad if object overloads enum operator. F.e., if I 
pass HB_OleAuto object, it gives RTE, since the specified class is not a 
collection and enum is overloaded. Using FOR and array access instead of 
FOR EACH seams to be bad solution, since array access can also be 
overloaded. It would be nice if HB_VALTOEXP() can use some internal 
function to drop class handle and write object as plain array.


Regards,
Mindaugas
From gvarona at ec-red.com  Tue May 19 17:15:42 2009
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Tue May 19 17:13:32 2009
Subject: [Harbour] How can create a library with hbmk2?
In-Reply-To: <609353e70905191403n649621dexa4075ed945f64db1@mail.gmail.com>
References: <4A131833.3060505@ec-red.com>
	<609353e70905191403n649621dexa4075ed945f64db1@mail.gmail.com>
Message-ID: <4A13217E.2060005@ec-red.com>

Massimo Belgrano escribi?:
> hbmk2 myprg.PRG myprg2.PRG  -hblib -omylib.lib
Thank you Massimo, I have just discovered in a previous post of yours 
and it works fine.

Best Regards
GVS
From bedipritpal at hotmail.com  Tue May 19 17:24:30 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue May 19 17:24:34 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <4A130B67.1090707@dbtopas.lt>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
	<23539642.post@talk.nabble.com> <23540931.post@talk.nabble.com>
	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>
	<23574376.post@talk.nabble.com>
	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>
	<4A1011A0.3010308@dbtopas.lt> <23583794.post@talk.nabble.com>
	<4A1156CE.9050407@dbtopas.lt> <23601197.post@talk.nabble.com>
	<4A11AD61.4010705@dbtopas.lt> <4A11B94A.2090904@dbtopas.lt>
	<4A11BEB7.9070501@fsgiudice.com> <4A11CF8C.5030401@dbtopas.lt>
	<4A11D8C0.3040701@fsgiudice.com> <4A11E4CD.9090004@dbtopas.lt>
	<23607332.post@talk.nabble.com> <4A12AF7B.8040202@dbtopas.lt>
	<23622741.post@talk.nabble.com> <4A130B67.1090707@dbtopas.lt>
Message-ID: <23624655.post@talk.nabble.com>


Hi

Mindaugas Kavaliauskas wrote:
> 
> I'd rather say wvg's is better. It uses VirtualAlloc() to allocate page 
> having the correct (read/write/execute) permissions. But I'm lost among 
> the details. _AsCallback() has many strange parameters instead of a 
> single codeblock.
> 

Me too do not have any idea about its internals, but it works correct.



> The problem is I'm to lazy to change a working code. Win32 allows 
> execute code on memory allocated using hb_xgrab(), so, this solution is 
> Intel x86 Win 32bit only. I do not want to publish my code until it is 
> "dirty".
> 

NP, take your own time to clean it.

Now some issues with plain CreateObject() function.
I am using CodeJock's Calender Control. It has many 
interfaces and then it binds control with the interfaces.
The code goes like this:

oCal := hb_ActiveX( ... )
..
..
oDialogs := CreateObject( "Codejock.CalendarDialog.11.2.2" )
? valtype( oDialogs )  // "O"

oDialogs:calendar := oCal  ->    Here it GPF's

Investigating deep I find 
? valtype( oDialogs:calendar ) -> U

What I assume that some interfaces do not suppot IID_Dispatch,
may be it is IID_Unknown, I am not sure.
Extending above:

? valtype( oDialogs:ParentHWND ) -> 0    Correct

So I am lost why some properties are accessible while others not.

With previous implementation everything was fine.

Then I tried to implement pDisp->lpVtbl->AddRef( pDisp );
but it does not work on hb_oleParam(), probably it expects numeric handle.

Regards
Pritpal Bedi

Can we implement 
-- 
View this message in context: http://www.nabble.com/Errors-with-11032-tp23521549p23624655.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From itamarlins at bol.com.br  Tue May 19 17:46:08 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Tue May 19 17:47:07 2009
Subject: [Harbour] Re: Unrecoverable error 1010: hb_cdxIndexPageRead: Read
	index page failed.
References: <guu51v$hbl$1@ger.gmane.org>
	<609353e70905190722j75effd3cv99d43f2305e7ea13@mail.gmail.com>
Message-ID: <guv9c1$khq$1@ger.gmane.org>

Hi!
Thanks for response, but ADS is $$$$... for me.  :-(

I need to know which file is corrupted.

Maybe:
Unrecoverable error 1010: hb_cdxIndexPageRead: Read index page failed.
Called from DBUSEAREA(0) - c:\dados\Dir01\clientes.dbf. //So, can correct the correct file.

Regards,
Itamar M. Lins Jr.

  "Massimo Belgrano" <mbelgrano@deltain.it> escreveu na mensagem news:609353e70905190722j75effd3cv99d43f2305e7ea13@mail.gmail.com...
  Client server not reduce data corruption?
  I am Using ads it is never crashed on server side (register error in log but non crash server)
  what appen if you Restart letodb executable on error and not use corrupted file



  2009/5/19 Itamar Lins <itamarlins@bol.com.br>

    Hi!
    I get the error.
    Application Internal Error - C:\letodb\bin\letodb.exe
    Terminated at: 2009.05.18 17:22:09
    Unrecoverable error 1010: hb_cdxIndexPageRead: Read index page failed.
    Called from DBUSEAREA(0)
    Called from HS_OPENTABLE(390) in source\server\server.prg
    Called from LETO_SERVER(0)
    Called from STARTSERVER(239) in source\server\server.prg
    Called from MAIN(157) in source\server\server.prg
    ------------------------------------------------------------------------
    My RDD is CDX, and i am using Harbour, SVN.
    My enviroment is:
    c:\dados\Dir01\clientes.dbf
    c:\dados\Dir02\clientes.dbf
    c:\dados\Dir03\clientes.dbf
    c:\dados\Dir04\clientes.dbf
    I need to know what file this with corrupted index and in that place(sub
    directory). The letodb not informed.

    This is the reply of Mr Alexander:
    > Unfortunately, there is no possibility to know this. [x]Harbour doesn't
    > allow to catch, to handle the internal error, it simply terminates the
    > application.

    > Theoretically, if there wasn't hardware problems, including power off, if
    > the table and index are handled by Harbour only and  the DBFCDX RDD hasn't
    > errors, such kind of problems >shouldn't appear. But if it appears, the
    > only way is to reindex tables and restart the letodb.

    >Regards, Alexander.

    I need to know which file is corrupted.

    Maybe:
    Unrecoverable error 1010: hb_cdxIndexPageRead: Read index page failed.
    Called from DBUSEAREA(0) - c:\dados\Dir01\clientes.dbf. //So I know to fix
    the problem!!!!

    Regards,
    Itamar M. Lins Jr.



    _______________________________________________
    Harbour mailing list
    Harbour@harbour-project.org
    http://lists.harbour-project.org/mailman/listinfo/harbour




  -- 
  Massimo Belgrano



------------------------------------------------------------------------------

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090519/c974bf2f/attachment.html
From zen25000 at zen.co.uk  Tue May 19 18:38:24 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Tue May 19 18:37:39 2009
Subject: [Harbour] How can create a library with hbmk2?
In-Reply-To: <4A13217E.2060005@ec-red.com>
References: <4A131833.3060505@ec-red.com>	<609353e70905191403n649621dexa4075ed945f64db1@mail.gmail.com>
	<4A13217E.2060005@ec-red.com>
Message-ID: <4A1334E0.8050103@zen.co.uk>

Guillermo Varona Silup? wrote:
> Massimo Belgrano escribi?:
>> hbmk2 myprg.PRG myprg2.PRG  -hblib -omylib.lib
> Thank you Massimo, I have just discovered in a previous post of yours 
> and it works fine.
> 
> Best Regards
> GVS
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
Does this also work?

hbmk2 @myprglist.txt -hblib -omylib.lib

I don't have an installation to test just now.

From harbour.01 at syenar.hu  Tue May 19 18:54:33 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Tue May 19 18:54:41 2009
Subject: [Harbour] How can create a library with hbmk2?
In-Reply-To: <4A1334E0.8050103@zen.co.uk>
References: <4A131833.3060505@ec-red.com>
	<609353e70905191403n649621dexa4075ed945f64db1@mail.gmail.com>
	<4A13217E.2060005@ec-red.com> <4A1334E0.8050103@zen.co.uk>
Message-ID: <18d502870905191554s599480d0x255b743a097a4fe9@mail.gmail.com>

> Does this also work?
>
> hbmk2 @myprglist.txt -hblib -omylib.lib

Yes, it does. Also 'hbmk2 *.prg -hblib -omylib' works.

I'd (again) recommend not to explicitly add .lib extension,
as it makes the command line compiler and platform
dependent. This is portable and simpler:

'hbmk2 @myprglist.txt -hblib -omylib'

Brgds,
Viktor
From dbtopas at dbtopas.lt  Tue May 19 18:56:28 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue May 19 18:58:27 2009
Subject: [Harbour] ActiveX names
Message-ID: <4A13391C.6010402@dbtopas.lt>

Hi,


I've successfully implemented ActiveX notification event support from 
scratch. All code is 200 lines of C. I want to talk about names for all 
OLE/ActiveX things. What prefixes should be used for objects, methods, 
functions, etc?


--- Question 1: Minimal method namespace polution ---
Current implementations is:
CLASS HB_OleAuto
    VAR __hObj
    VAR __hObjEnum
ENDCLASS

Previous class used TOleAuto and hObj, pOleEnumerator. It also used 
:New() constructor, some other 22 methods. My argument for __hObj is: 
HB_OleAuto is used to call methods of OLE objects. If HB_OleAuto has 
defined some methods, OLE methods having the same name could not be 
reached! F.e., TOleAuto() can not call :New() method of original OLE 
object. I even used HB_CLS_NOTOBJECT define to avoid inheritance from 
HBObject and leave method namespace as clean as possible.


--- Question 2: No HB_ActiveX, because it's the same HB_OleAuto ---
I think it is logical to continue the same approach in ActiveX. My 
current implementation of HB_ActiveX is:
CLASS HB_ActiveX FROM HB_OleAuto
    VAR __hSink
ENDCLASS
Nothing more!

HB_ActiveX also uses OLE automation to reach original methods so I want 
to keep its methods namespace clean. If __hSink if the only additional 
memeber, I'm thinking about adding it to HB_OleAuto. In this case we 
will have the same HB_OleAuto class for ActiveX controls. What is your 
opinion? Do we need a separate class?

Actually HB_ActiveX is nothing more than HB_OleAuto if I do not use 
event handler to handle messages sent by OLE/ActiveX control to Harbour. 
If you look at my sample sent yesterday, it has:
     hWndAx := CreateWindowEx(WS_EX_CLIENTEDGE, "ATLAXWin", ...
     HB_AtlAxGetControl( hWndAx, @pDisp )
     IF ! EMPTY( pDisp )
       oAx := HB_OleAuto()
       oAx:__hObj := pDisp
     ENDIF
As you can see I've used HB_OleAuto with "ActiveX" control. But I do not 
defined any event handler, so I did not need any :__hSink.
So, this HB_ActiveX is exactly HB_OleAuto.


--- Question 3: Function names for OLE  ---
We have:
* GetActiveObject - .prg function uses OLEGETACTIVEOBJECT returns 
HB_OleAuto object if object can be obtained;
* CreateObject - .prg function uses OLEGETACTIVEOBJECT returns 
HB_OleAuto object if object can be obtained;
* OLECREATEOBJECT returns Pointer.IDispatch;
* OLEGETACTIVEOBJECT returns Pointer.IDispatch;
* OLERELEASE releases object using Pointer.IDispatch (I'm thinking about 
removing this function, since collectible pointers do the job, ant it is 
a kind of internal function which should be marked as "DO NOT USE");
* __OLEENUMCREATE returns Pointer.IEnumIterator;
* __OLEENUMNEXT uses Pointer.IEnumIterator to skip on next item;
* OLEERROR, OLEERRORTEXT returns error code ant text for OLE errors.

Since we are in very unstable state, I guess it is time to decide that 
name should be used in Harbour. Thus making a stable background for 
changes in 3rd party projects like FiveWin.

The developer should use GetActiveObject, CreateObject, OleError and 
OleErrorText. Do we need HB_* prefix? GetActiveObject and CreateObject 
has VERY general name, shouldn't it belong to some OLE* prefixed namespace?

All other are a kind of internal. From this point of view 
OLECREATEOBJECT should has two underscores just like __OLEENUMCREATE.

So, the final names could be:
HB_OleGetActiveObject <- GetActiveObject
HB_OleCreateObject    <- OleCreateObject
HB_OleError           <- OLEERROR
HB_OleErrorText       <- OLEERRORTEXT
__OLECREATEOBJECT     <- OLECREATEOBJECT
__OLEGETACTIVEOBJECT  <- OLEGETACTIVEOBJECT
__OLEENUMCREATE is ok
__OLEENUMNEXT is ok


--- Question 4: Function names for ActiveX  ---
My current not yet committed ActiveX code has three functions:
* HB_AtlAxInit - it's AtlAxInit from atl.dll plus dynamic loading of 
that .dll plus some more initialisation;
* HB_AtlAxGetControl - it's AtlAxGetControl from atl.dll plus IDispatch 
interface request (since we are not going to work with IUnknown, and I 
want to hide conversion inside the same function making interface simple);
* __AxRegisterHandler - this function is not a member of atl.dll. It 
registers codeblock or function symbol for event notification.

It would be nice to have a nice prefixed naming for these functions in 
similar way as OLE functions. The first two has HB_ prefixed C function 
names, but it acts a little different, it is not just a wrappers and do 
more. It also return OLE error code, but I'm thinking about generating 
RTE on error and returning result collectible pointer or NIL. In OLE 
code the functions returning pointer has __* prefix (are internal).

I'm thinking about (Ax is for ActiveX):
HB_AxInit <- HB_AtlAxInit
__AxGetControl <- HB_AtlAxGetControl
__AxRegisterHandler is ok

But if you compare these names to proposed above OLE function names, the 
last two returns pointers instead of final ActiveX object, so it should 
have __* prefix instead of HB_*.

The final ActiveX function (not internal, without underscores) will be 
HB_AxGetControl(). Source code could be (see [HB_Ole]GetActiveobject() 
for comparison):
FUNC HB_AxGetControl( hWnd, bHandler )
LOCAL oAx := HB_OleAuto()
    oAx:__hObj := __AxGetControl( hWnd )
    IF bHandler != NIL
       oAx:__hSink := __AxRegisterHandler( oAx:__hObj, bHandler )
    ENDIF
RETURN oAx

We can have also HB_AxCreateControl() (just like HB_OleCreateObject()). 
This function should have to create control, but creation of control is 
creation of the window. It has many of parameters like parent, ID, 
coordinates, flags. This part could depend on GUI library. So, I want to 
leave CreateWindow[Ex]() call outside of OLE/ActiveX code.

Does the proposed naming has sence?


--- Question 5: HB_OleAuto compatibility and :__cargo ---
TOleAuto, TActiveX can be derived from original HB_OleAuto, implementing 
all other stuff (and polluting method namespace). For example:

CLASS TOleAuto FROM HB_OleAuto
    ACCESS hObj       INLINE  self:__hObj
    ASSIGN hObj( X )  INLINE  self:__hObj := X
    METHOD New()
ENDCLASS

METHOD New( hObj ) CLASS TOleAuto
   ::__hObj := hObj
RETURN Self

If someone wants to store addition data in not polluted method namespace 
I propose, to add __cargo. It can used to store class name, method 
handler codeblock (for example for emulating event from inside Harbour) 
or array of anything. Ex.:

METHOD New( hObj, cClassName ) CLASS TOleAuto
   ::__hObj := CONVERT_ME_TO_POINTER_IF_I_AM_A_NUMBER( hObj )
   ::__cargo := cClassName
RETURN Self

or:

CLASS TActiveX FROM HB_OleAuto
    METHOD New()
    METHOD RegisterEventHandler()
    METHOD Event()
ENDCLASS

METHOD New( hWnd )
    ::__hObj := __AxGetControl( hWnd )
RETURN Self

METHOD RegisterEventHandler( bHandler )
    ::__hSink := __AxRegisterHandler( ::__hObj, bHandler )
    ::__cargo := bHandler
RETURN Self

METHOD Event( ... )
    ::__cargo:EVAL( ... )
RETURN Self

etc...



Regards,
Mindaugas
From dbtopas at dbtopas.lt  Tue May 19 19:16:50 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue May 19 19:18:50 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <23624655.post@talk.nabble.com>
References: <23521549.post@talk.nabble.com>	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>	<23527339.post@talk.nabble.com>
	<23535023.post@talk.nabble.com>	<23539642.post@talk.nabble.com>
	<23540931.post@talk.nabble.com>	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>	<23574376.post@talk.nabble.com>	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>	<4A1011A0.3010308@dbtopas.lt>
	<23583794.post@talk.nabble.com>	<4A1156CE.9050407@dbtopas.lt>
	<23601197.post@talk.nabble.com>	<4A11AD61.4010705@dbtopas.lt>
	<4A11B94A.2090904@dbtopas.lt>	<4A11BEB7.9070501@fsgiudice.com>
	<4A11CF8C.5030401@dbtopas.lt>	<4A11D8C0.3040701@fsgiudice.com>
	<4A11E4CD.9090004@dbtopas.lt>	<23607332.post@talk.nabble.com>
	<4A12AF7B.8040202@dbtopas.lt>	<23622741.post@talk.nabble.com>
	<4A130B67.1090707@dbtopas.lt> <23624655.post@talk.nabble.com>
Message-ID: <4A133DE2.2040900@dbtopas.lt>

Hi,


> oCal := hb_ActiveX( ... )
> ..
> ..
> oDialogs := CreateObject( "Codejock.CalendarDialog.11.2.2" )
> ? valtype( oDialogs )  // "O"
> 
> oDialogs:calendar := oCal  ->    Here it GPF's

I do not know the reason for without a deeper debugging. What is result of:
   ? oCal:ClassName

Current code converts only HB_OLEAUTO class to VT_DISPATCH parameter, 
but I'm going to change it use a class inherited from HB_OLEAUTO, thus, 
making
   CLASS TOleAuto FROM HB_OleAuto
available for passing as IDispatch variant parameter.


> Investigating deep I find 
> ? valtype( oDialogs:calendar ) -> U
> 
> What I assume that some interfaces do not suppot IID_Dispatch,
> may be it is IID_Unknown, I am not sure.
> Extending above:
> 
> ? valtype( oDialogs:ParentHWND ) -> 0    Correct
> 
> So I am lost why some properties are accessible while others not.
> 
> With previous implementation everything was fine.

What is result of
   ? valtype( oDialogs:calendar )
in previous version.


> Then I tried to implement pDisp->lpVtbl->AddRef( pDisp );
> but it does not work on hb_oleParam(), probably it expects numeric handle.

I'm not sure that you mean. hb_oleParam() returns IDispatch, and 
AddRef() could be called.




Regards,
Mindaugas
From harbour.01 at syenar.hu  Tue May 19 19:29:08 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Tue May 19 19:29:15 2009
Subject: [Harbour] ActiveX names
In-Reply-To: <4A13391C.6010402@dbtopas.lt>
References: <4A13391C.6010402@dbtopas.lt>
Message-ID: <18d502870905191629u2008a6dbx8be0bc87732c4917@mail.gmail.com>

Hi Mindaugas,

> I've successfully implemented ActiveX notification event support from
> scratch. All code is 200 lines of C. I want to talk about names for all

Sounds very nice.

> OLE/ActiveX things. What prefixes should be used for objects, methods,
> functions, etc?
>
> --- Question 1: Minimal method namespace polution ---
> Current implementations is:
> CLASS HB_OleAuto
> ? VAR __hObj
> ? VAR __hObjEnum
> ENDCLASS
>
> Previous class used TOleAuto and hObj, pOleEnumerator. It also used :New()
> constructor, some other 22 methods. My argument for __hObj is: HB_OleAuto is
> used to call methods of OLE objects. If HB_OleAuto has defined some methods,
> OLE methods having the same name could not be reached! F.e., TOleAuto() can
> not call :New() method of original OLE object. I even used HB_CLS_NOTOBJECT
> define to avoid inheritance from HBObject and leave method namespace as
> clean as possible.

Strictly speaking HB_OLEAUTO should be in the WIN_
namespace, so WIN_OLE would be the compliant class name,
maybe now it's a good time to change it, if we depart from
TOleAuto anyway. We already have WIN_PRN and WINPRT
(should be WIN_PORT). [ HB_* is for core, WIN_* is for Windows
specific stuff, WAPI_* if for API bindings. ]

As for methods I think '__' prefix, or 'HB_' prefix (or both) is fine
to avoid collision.

> --- Question 2: No HB_ActiveX, because it's the same HB_OleAuto ---
> I think it is logical to continue the same approach in ActiveX. My current
> implementation of HB_ActiveX is:
> CLASS HB_ActiveX FROM HB_OleAuto
> ? VAR __hSink
> ENDCLASS
> Nothing more!

My vote to WIN_ACTIVEX or WIN_AX.

> HB_ActiveX also uses OLE automation to reach original methods so I want to
> keep its methods namespace clean. If __hSink if the only additional memeber,
> I'm thinking about adding it to HB_OleAuto. In this case we will have the
> same HB_OleAuto class for ActiveX controls. What is your opinion? Do we need
> a separate class?

Just a light opinion here: A separate name could
better emphasis this feature and users may more
easily find it.

> --- Question 3: Function names for OLE ?---
> We have:
> * GetActiveObject - .prg function uses OLEGETACTIVEOBJECT returns HB_OleAuto
> object if object can be obtained;
> * CreateObject - .prg function uses OLEGETACTIVEOBJECT returns HB_OleAuto
> object if object can be obtained;
> * OLECREATEOBJECT returns Pointer.IDispatch;
> * OLEGETACTIVEOBJECT returns Pointer.IDispatch;
> * OLERELEASE releases object using Pointer.IDispatch (I'm thinking about
> removing this function, since collectible pointers do the job, ant it is a
> kind of internal function which should be marked as "DO NOT USE");
> * __OLEENUMCREATE returns Pointer.IEnumIterator;
> * __OLEENUMNEXT uses Pointer.IEnumIterator to skip on next item;
> * OLEERROR, OLEERRORTEXT returns error code ant text for OLE errors.
>
> Since we are in very unstable state, I guess it is time to decide that name
> should be used in Harbour. Thus making a stable background for changes in
> 3rd party projects like FiveWin.

Good point. I'd try to apply the WIN_/WAPI_ rules to these names
as much as possible, inside the WIN_ namespace we have
full freedom to form names, so it can be WIN_OLE*(). We can
also use the internal namespace for appropriate functions, but
for public functions exposed to users I'd say we shouldn't use them.

> The developer should use GetActiveObject, CreateObject, OleError and
> OleErrorText. Do we need HB_* prefix? GetActiveObject and CreateObject has
> VERY general name, shouldn't it belong to some OLE* prefixed namespace?

IMO they should. Strictly speaking these should be:
WIN_OLEGETACTIVEOBJECT()
WIN_OLECREATEOBJECT()
WIN_OLEERROR()
WIN_OLEERRORTEXT()

For C level we have no such rule yet, and the considerations
are a little bit different, so for these we should probably also
use an hb_ prefix instead of win_. And this is what we use now
AFAIK, so it's okay.

> All other are a kind of internal. From this point of view OLECREATEOBJECT
> should has two underscores just like __OLEENUMCREATE.
>
> So, the final names could be:
> HB_OleGetActiveObject <- GetActiveObject
> HB_OleCreateObject ? ?<- OleCreateObject
> HB_OleError ? ? ? ? ? <- OLEERROR
> HB_OleErrorText ? ? ? <- OLEERRORTEXT
> __OLECREATEOBJECT ? ? <- OLECREATEOBJECT
> __OLEGETACTIVEOBJECT ?<- OLEGETACTIVEOBJECT
> __OLEENUMCREATE is ok
> __OLEENUMNEXT is ok

(see above)

What are we using these __ prefixed ones for?

> --- Question 4: Function names for ActiveX ?---
> My current not yet committed ActiveX code has three functions:
> * HB_AtlAxInit - it's AtlAxInit from atl.dll plus dynamic loading of that
> .dll plus some more initialisation;
> * HB_AtlAxGetControl - it's AtlAxGetControl from atl.dll plus IDispatch
> interface request (since we are not going to work with IUnknown, and I want
> to hide conversion inside the same function making interface simple);
> * __AxRegisterHandler - this function is not a member of atl.dll. It
> registers codeblock or function symbol for event notification.
>
> It would be nice to have a nice prefixed naming for these functions in
> similar way as OLE functions. The first two has HB_ prefixed C function
> names, but it acts a little different, it is not just a wrappers and do
> more. It also return OLE error code, but I'm thinking about generating RTE
> on error and returning result collectible pointer or NIL. In OLE code the
> functions returning pointer has __* prefix (are internal).
>
> I'm thinking about (Ax is for ActiveX):
> HB_AxInit <- HB_AtlAxInit
> __AxGetControl <- HB_AtlAxGetControl
> __AxRegisterHandler is ok

For me AX is good for a prefix, but if we stick with AX prefix, I
think we should
use WIN_AX for the class name.

Plus, instead of HB_AX*() it would better make it WIN_AX*().

> But if you compare these names to proposed above OLE function names, the
> last two returns pointers instead of final ActiveX object, so it should have
> __* prefix instead of HB_*.

If these are functions presented for the user, and we want
to guarantee their functionality and presence for future
versions, we should give them non-internal names.

> --- Question 5: HB_OleAuto compatibility and :__cargo ---
> TOleAuto, TActiveX can be derived from original HB_OleAuto, implementing all
> other stuff (and polluting method namespace). For example:
>
> CLASS TOleAuto FROM HB_OleAuto
> ? ACCESS hObj ? ? ? INLINE ?self:__hObj
> ? ASSIGN hObj( X ) ?INLINE ?self:__hObj := X
> ? METHOD New()
> ENDCLASS
>
> METHOD New( hObj ) CLASS TOleAuto
> ?::__hObj := hObj
> RETURN Self
>
> If someone wants to store addition data in not polluted method namespace I
> propose, to add __cargo. It can used to store class name, method handler
> codeblock (for example for emulating event from inside Harbour) or array of
> anything. Ex.:
>
> METHOD New( hObj, cClassName ) CLASS TOleAuto
> ?::__hObj := CONVERT_ME_TO_POINTER_IF_I_AM_A_NUMBER( hObj )
> ?::__cargo := cClassName
> RETURN Self
>
> or:
>
> CLASS TActiveX FROM HB_OleAuto
> ? METHOD New()
> ? METHOD RegisterEventHandler()
> ? METHOD Event()
> ENDCLASS
>
> METHOD New( hWnd )
> ? ::__hObj := __AxGetControl( hWnd )
> RETURN Self
>
> METHOD RegisterEventHandler( bHandler )
> ? ::__hSink := __AxRegisterHandler( ::__hObj, bHandler )
> ? ::__cargo := bHandler
> RETURN Self
>
> METHOD Event( ... )
> ? ::__cargo:EVAL( ... )
> RETURN Self

This is good. We should also add all these to a separate file,
just like legacy.c. Probably legacy.c should be renamed to
legacyc.c and legacy.prg added for .prg level.

Brgds,
Viktor
From vszakats at users.sourceforge.net  Tue May 19 19:49:18 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue May 19 19:49:23 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11088] trunk/harbour
Message-ID: <E1M6Z3e-0007wF-8s@c3vjzd1.ch3.sourceforge.com>

Revision: 11088
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11088&view=rev
Author:   vszakats
Date:     2009-05-19 23:49:17 +0000 (Tue, 19 May 2009)

Log Message:
-----------
2009-05-20 01:39 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * INSTALL
    * Minor update to Pelles C version support.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bedipritpal at hotmail.com  Tue May 19 20:33:23 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue May 19 20:33:28 2009
Subject: [Harbour] ActiveX names
In-Reply-To: <4A13391C.6010402@dbtopas.lt>
References: <4A13391C.6010402@dbtopas.lt>
Message-ID: <23626853.post@talk.nabble.com>


Hi



> I've successfully implemented ActiveX notification event support from 
> scratch. All code is 200 lines of C.
> 

WOW. Unbelievable!

Whatever way you think is right, go, though Viktor suggessions 
are also valid. 

My understanding of OLE implementation is as:

CreateObject()
GetActiveObject() 

is widely used functions in almost all the languages.
These two functions implement non-rectangular COM 
objects or those object whech have their own user-interfaces
like Excel, Word, etc. And I would like to keep them as is.
To avoid colision with current code, to start with we
can give them whatever prefix you deem fit - HB_* or WIN_*
but after these are tested we need to rename them to CreteObject()
and GetActiveObject().

ActiveX Control is one which is hosted in the window 
provided by the application. So you are completely free to 
implement in whatever way you want. Just make sure that those
could be obtained via a function call.

I am really thrilled and looking forward to feel the code.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/ActiveX-names-tp23625955p23626853.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Tue May 19 20:46:59 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Tue May 19 20:47:05 2009
Subject: [Harbour] ActiveX names
In-Reply-To: <23626853.post@talk.nabble.com>
References: <4A13391C.6010402@dbtopas.lt> <23626853.post@talk.nabble.com>
Message-ID: <18d502870905191746q2d77361cg6ec3f66858fea2a@mail.gmail.com>

> is widely used functions in almost all the languages.
> These two functions implement non-rectangular COM
> objects or those object whech have their own user-interfaces
> like Excel, Word, etc. And I would like to keep them as is.
> To avoid colision with current code, to start with we
> can give them whatever prefix you deem fit - HB_* or WIN_*
> but after these are tested we need to rename them to CreteObject()
> and GetActiveObject().

We will create these compatibility aliases, but let's please stick
to our rules for new functions. We've already agreed on them
once, and it would be very important to aim to some direction
I've been talking about just a day ago and which I miss from
many Windows specific parts in Harbour. It would look quite
strange to forgot about these rules as soon as we'd actually
apply them in practice.

"CreateObject" and also "GetActiveObject" are so vague,
that it's quite easy to collide with them. Moreover, it's useful
to see where a function comes from, especially when those
functions are non-portable ones. WIN_ signals that clearly,
these names by themselves don't.

Brgds,
Viktor
From bedipritpal at hotmail.com  Tue May 19 21:20:16 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue May 19 21:20:20 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <4A133DE2.2040900@dbtopas.lt>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
	<23539642.post@talk.nabble.com> <23540931.post@talk.nabble.com>
	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>
	<23574376.post@talk.nabble.com>
	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>
	<4A1011A0.3010308@dbtopas.lt> <23583794.post@talk.nabble.com>
	<4A1156CE.9050407@dbtopas.lt> <23601197.post@talk.nabble.com>
	<4A11AD61.4010705@dbtopas.lt> <4A11B94A.2090904@dbtopas.lt>
	<4A11BEB7.9070501@fsgiudice.com> <4A11CF8C.5030401@dbtopas.lt>
	<4A11D8C0.3040701@fsgiudice.com> <4A11E4CD.9090004@dbtopas.lt>
	<23607332.post@talk.nabble.com> <4A12AF7B.8040202@dbtopas.lt>
	<23622741.post@talk.nabble.com> <4A130B67.1090707@dbtopas.lt>
	<23624655.post@talk.nabble.com> <4A133DE2.2040900@dbtopas.lt>
Message-ID: <23627409.post@talk.nabble.com>


Hi

? valtype( oDialogs:calendar ) -> U
This is OK as at this point :calendar property is uninitialized.


oDialogs:calendar := oCal  ->    GPF 

If I omit above line then Calandar Control behaves properly.
I just cannot open any of the dialogs provided by the control.
Later one more error is generated but so far I am concentrating
upto this point. 

It also implies that oCal is initialized properly. 
oDialog is also intialized properly but do not accept oCal.

May be this gives a clue.

? HB_Atl_AddRef( oCal:__hObj ) -> 6 == INVALID HANDLE   ???

HB_FUNC( HB_ATL_ADDREF )
{
   IDispatch *pDisp = ( IDispatch * ) hb_oleParam( 1 );
   HRESULT hr = pDisp->lpVtbl->AddRef( pDisp );
   hb_retni( ( int ) hr );
}

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Errors-with-11032-tp23521549p23627409.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From alex_degarate at hotmail.com  Tue May 19 22:59:04 2009
From: alex_degarate at hotmail.com (Alejandro de Garate)
Date: Tue May 19 22:59:08 2009
Subject: [Harbour] Extensions - possible cleanup?
Message-ID: <BLU145-W8C05473F796F1F7EDF66F85580@phx.gbl>


 

Alex Strickland wrote:

 

 >I hear you, but, does anyone *develop* systems on those devices etc. 

 

You'd be surprised to see how many account software exist running over only DOS 
and most of the Banks (CIT*, HSB*, etc) have several system running on old DOS7 
and Novell networks.

 

I know it's really difficult to imagine that, but is true, at least in Latin america
and I suppose..., in many other countries of the world.

 

Sometimes we assume that other people needs are the same as ours

 

I am still suscribed to old Clipper groups, and you wonder how many developers have not 
yet migrated to a GUI environment.

 

I can't say that this is good or bad, just happens.

 

Alejandro


_________________________________________________________________
More than messages?check out the rest of the Windows Live?.
http://www.microsoft.com/windows/windowslive/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090520/8994813e/attachment.html
From bedipritpal at hotmail.com  Tue May 19 23:15:02 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue May 19 23:15:07 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <4A133DE2.2040900@dbtopas.lt>
References: <23521549.post@talk.nabble.com>
	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>
	<23527339.post@talk.nabble.com> <23535023.post@talk.nabble.com>
	<23539642.post@talk.nabble.com> <23540931.post@talk.nabble.com>
	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>
	<23574376.post@talk.nabble.com>
	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>
	<4A1011A0.3010308@dbtopas.lt> <23583794.post@talk.nabble.com>
	<4A1156CE.9050407@dbtopas.lt> <23601197.post@talk.nabble.com>
	<4A11AD61.4010705@dbtopas.lt> <4A11B94A.2090904@dbtopas.lt>
	<4A11BEB7.9070501@fsgiudice.com> <4A11CF8C.5030401@dbtopas.lt>
	<4A11D8C0.3040701@fsgiudice.com> <4A11E4CD.9090004@dbtopas.lt>
	<23607332.post@talk.nabble.com> <4A12AF7B.8040202@dbtopas.lt>
	<23622741.post@talk.nabble.com> <4A130B67.1090707@dbtopas.lt>
	<23624655.post@talk.nabble.com> <4A133DE2.2040900@dbtopas.lt>
Message-ID: <23628301.post@talk.nabble.com>


Hello

I was experimenting and got to this point : olecore.c line # 231


      case HB_IT_OBJECT: /* or ARRAY */
         if( HB_IS_OBJECT( pItem ) )
         {
//          if( hb_stricmp( hb_objGetClsName( pItem ), "HB_OLEAUTO" ) == 0 )     
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            {
               IDispatch * pDisp;

               hb_vmPushDynSym( s_pDyns_hObjAccess );
               hb_vmPush( pItem );
               hb_vmSend( 0 );

               pDisp = hb_oleParam( -1 );

               /* pVariant will be freed using VariantClear().
                  We increment reference count to keep OLE object alive */
#if HB_OLE_C_API
               pDisp->lpVtbl->AddRef( pDisp );
#else
               pDisp->AddRef();
#endif
               pVariant->n1.n2.vt = VT_DISPATCH;
               pVariant->n1.n2.n3.pdispVal = pDisp;
            }
         }


If I comment out line # 231 as above 
oDialogs:calendar := oCal   works fine and I can open the dialogs.
You can see that the object is issued AddRef().

May it help you understanding what is happening.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Errors-with-11032-tp23521549p23628301.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Wed May 20 02:12:33 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed May 20 02:13:01 2009
Subject: [Harbour] ActiveX names
In-Reply-To: <4A13391C.6010402@dbtopas.lt>
References: <4A13391C.6010402@dbtopas.lt>
Message-ID: <609353e70905192312k55b5ccc3o87f151271990524f@mail.gmail.com>

Can we have a syntax/namespace compatible with visual foxpro or  xbase++?
a vb trlanslator?
http://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=5e3b203d-af8a-41dc-88d0-28cdc1c4508d
http://www.dfpug.de/loseblattsammlung\migration\whitepapers/activex.htm<http://www.dfpug.de/loseblattsammlung/migration/whitepapers/activex.htm>


<http://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=5e3b203d-af8a-41dc-88d0-28cdc1c4508d>
*Creating an ActiveX Object Instance*

In Visual FoxPro, ActiveX objects are created using the CreateObject
function. This requires a single*ClassName* parameter, for example:

LOCAL loMailman
loMailman = CreateObject('Chilkat.MailMan2'

 *Object Keyword***
A new Object keyword has been added to Visual FoxPro 5.0 so you can specify
properties for ActiveX controls in class definitions defined
programmatically. Class definitions are processed before the ActiveX control
is instantiated; the Object keyword indicates to Visual FoxPro that a
property value should be applied when the ActiveX control is instantiated.
If the Object keyword is not included, a custom property for the ActiveX
control is created when the control is instantiated. Note that the Object
keyword must be immediately preceded by a period.

The following example adds the ActiveX Outline control (MSOUTL32.OCX) to a
form. The Object keyword is used to specify the BackColor property for the
Outline control before the control is instantiated. Run the example, remove
the Object keyword from the program line containing the BackColor property,
and run the example again to see the effect of the Object keyword on the
Outline control.

PUBLIC frmOLETest

frmOLETest = CREATEOBJECT('Form')  && Create a form
frmOLETest.Visible = .T.  && Display the form

* The following line adds the Outline control to the form
frmOLETest.ADDOBJECT ( 'OCXTest', 'BlueOLEControl',
      ; 'MSOutl.Outline')

frmOLETest.OCXTest.AddItem( 'Item One' )   && Add an item to the control
frmOLETest.OCXTest.AddItem( 'Item Two' )   && Add an item to the control

DEFINE CLASS BlueOLEControl AS OLEControl
      * Use the Object keyword to set the Backcolor
      * property for the Outline control

      .Object.Backcolor = 16776960 && Light blue

      Set properties of the OLE Container Control
      Height = 100       Width = 200       Visible = .T.
ENDDEFINE

*Passing Arrays to ActiveX Controls***
If you pass an array to an ActiveX control - for example, if you call one of
the control's methods and want to pass it an array - you must pass the array
by reference. If you pass the array by value (the default), only the first
element will be passed.

*Programmatically Adding ActiveX Controls to an OLE Container Control***
You can use ADDOBJECT( ) to add an ActiveX control to an OLE Container
control programmatically at run time. The third argument in ADDOBJECT( ) is
the OLE class ID for the ActiveX control. To determine the OLE class ID for
an ActiveX control, add the ActiveX control to a form. The class ID for the
ActiveX control appears in the OLEClass property in the Properties window.

The following example demonstrates how you can programmatically add the
ActiveX ProgressBar control contained in COMCTRL32.OCX to a form. Note the
third argument of ADDOBJECT( ) (COMCTL.ProgCtrl.1) that specifies the OLE
class ID for the ActiveX ProgressBar control.

PUBLIC oForm
oForm = CREATEOBJECT("Form")   && Create a form

* The following line adds the ProgessBar control to the form

oForm.ADDOBJECT("OleProgress", "OLEControl", "COMCTL.ProgCtrl.1")

* The following lines specify the location
* and size of the ProgressBar control

oForm.OleProgress.Top = 5
oForm.OleProgress.Left = 5
oForm.OleProgress.Height = 25
oForm.OleProgress.Width = 289

oForm.OleProgress.Visible = .T. && Display the ProgessBar
oForm.Visible = .T. && Display the Form

FOR i = 1 to 10
  oForm.OleProgress.Value=i*10 && Update the ProgressBar
  = INKEY(1)   && Wait one second
ENDFOR If an ActiveX control is programmatically added to an OLE Container
control, the ActiveX control must be properly registered on the computer on
which the Visual FoxPro application is run. Proper registration of the
ActiveX control is the responsibility of the developer who distributes an
application utilizing ActiveX controls. The ActiveX controls included with
Visual FoxPro (with the exception of MEDV141N.OCX, the MediaView 1.41
ActiveX control) are licensed to be distributed with any application.

You can register an ActiveX control used by your Visual FoxPro application
during the installation of that application. Include the ActiveX control and
any supporting files it requires in the list of distributed files specified
in the Setup Wizard. In the "Change File Settings" step of the Setup Wizard,
check the ActiveX checkbox for each ActiveX control that you distribute.
This instructs Setup to register the control when the distributed
application is installed. Note that the list of supporting files required
for each of the ActiveX Control shipped with Visual FoxPro is listed in the
control's help file or help topic.

The preferred method for distributing an application utilizing the ActiveX
controls included with Visual FoxPro is to add ActiveX controls to .VCX
visual class libraries. The .VCX visual class libraries are included in the
Setup Wizard distribution directory, and the setup created by the Setup
Wizard will automatically register the ActiveX controls on the computer on
which the distributed application is installed.



2009/5/20 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>

> Hi,
>
>
> I've successfully implemented ActiveX notification event support from
> scratch. All code is 200 lines of C. I want to talk about names for all
> OLE/ActiveX things. What prefixes should be used for objects, methods,
> functions, etc?
>
>
> --- Question 1: Minimal method namespace polution ---
> Current implementations is:
> CLASS HB_OleAuto
>   VAR __hObj
>   VAR __hObjEnum
> ENDCLASS
>
> Previous class used TOleAuto and hObj, pOleEnumerator. It also used :New()
> constructor, some other 22 methods. My argument for __hObj is: HB_OleAuto is
> used to call methods of OLE objects. If HB_OleAuto has defined some methods,
> OLE methods having the same name could not be reached! F.e., TOleAuto() can
> not call :New() method of original OLE object. I even used HB_CLS_NOTOBJECT
> define to avoid inheritance from HBObject and leave method namespace as
> clean as possible.
>
>
> --- Question 2: No HB_ActiveX, because it's the same HB_OleAuto ---
> I think it is logical to continue the same approach in ActiveX. My current
> implementation of HB_ActiveX is:
> CLASS HB_ActiveX FROM HB_OleAuto
>   VAR __hSink
> ENDCLASS
> Nothing more!
>
> HB_ActiveX also uses OLE automation to reach original methods so I want to
> keep its methods namespace clean. If __hSink if the only additional memeber,
> I'm thinking about adding it to HB_OleAuto. In this case we will have the
> same HB_OleAuto class for ActiveX controls. What is your opinion? Do we need
> a separate class?
>
> Actually HB_ActiveX is nothing more than HB_OleAuto if I do not use event
> handler to handle messages sent by OLE/ActiveX control to Harbour. If you
> look at my sample sent yesterday, it has:
>    hWndAx := CreateWindowEx(WS_EX_CLIENTEDGE, "ATLAXWin", ...
>    HB_AtlAxGetControl( hWndAx, @pDisp )
>    IF ! EMPTY( pDisp )
>      oAx := HB_OleAuto()
>      oAx:__hObj := pDisp
>    ENDIF
> As you can see I've used HB_OleAuto with "ActiveX" control. But I do not
> defined any event handler, so I did not need any :__hSink.
> So, this HB_ActiveX is exactly HB_OleAuto.
>
>
> --- Question 3: Function names for OLE  ---
> We have:
> * GetActiveObject - .prg function uses OLEGETACTIVEOBJECT returns
> HB_OleAuto object if object can be obtained;
> * CreateObject - .prg function uses OLEGETACTIVEOBJECT returns HB_OleAuto
> object if object can be obtained;
> * OLECREATEOBJECT returns Pointer.IDispatch;
> * OLEGETACTIVEOBJECT returns Pointer.IDispatch;
> * OLERELEASE releases object using Pointer.IDispatch (I'm thinking about
> removing this function, since collectible pointers do the job, ant it is a
> kind of internal function which should be marked as "DO NOT USE");
> * __OLEENUMCREATE returns Pointer.IEnumIterator;
> * __OLEENUMNEXT uses Pointer.IEnumIterator to skip on next item;
> * OLEERROR, OLEERRORTEXT returns error code ant text for OLE errors.
>
> Since we are in very unstable state, I guess it is time to decide that name
> should be used in Harbour. Thus making a stable background for changes in
> 3rd party projects like FiveWin.
>
> The developer should use GetActiveObject, CreateObject, OleError and
> OleErrorText. Do we need HB_* prefix? GetActiveObject and CreateObject has
> VERY general name, shouldn't it belong to some OLE* prefixed namespace?
>
> All other are a kind of internal. From this point of view OLECREATEOBJECT
> should has two underscores just like __OLEENUMCREATE.
>
> So, the final names could be:
> HB_OleGetActiveObject <- GetActiveObject
> HB_OleCreateObject    <- OleCreateObject
> HB_OleError           <- OLEERROR
> HB_OleErrorText       <- OLEERRORTEXT
> __OLECREATEOBJECT     <- OLECREATEOBJECT
> __OLEGETACTIVEOBJECT  <- OLEGETACTIVEOBJECT
> __OLEENUMCREATE is ok
> __OLEENUMNEXT is ok
>
>
> --- Question 4: Function names for ActiveX  ---
> My current not yet committed ActiveX code has three functions:
> * HB_AtlAxInit - it's AtlAxInit from atl.dll plus dynamic loading of that
> .dll plus some more initialisation;
> * HB_AtlAxGetControl - it's AtlAxGetControl from atl.dll plus IDispatch
> interface request (since we are not going to work with IUnknown, and I want
> to hide conversion inside the same function making interface simple);
> * __AxRegisterHandler - this function is not a member of atl.dll. It
> registers codeblock or function symbol for event notification.
>
> It would be nice to have a nice prefixed naming for these functions in
> similar way as OLE functions. The first two has HB_ prefixed C function
> names, but it acts a little different, it is not just a wrappers and do
> more. It also return OLE error code, but I'm thinking about generating RTE
> on error and returning result collectible pointer or NIL. In OLE code the
> functions returning pointer has __* prefix (are internal).
>
> I'm thinking about (Ax is for ActiveX):
> HB_AxInit <- HB_AtlAxInit
> __AxGetControl <- HB_AtlAxGetControl
> __AxRegisterHandler is ok
>
> But if you compare these names to proposed above OLE function names, the
> last two returns pointers instead of final ActiveX object, so it should have
> __* prefix instead of HB_*.
>
> The final ActiveX function (not internal, without underscores) will be
> HB_AxGetControl(). Source code could be (see [HB_Ole]GetActiveobject() for
> comparison):
> FUNC HB_AxGetControl( hWnd, bHandler )
> LOCAL oAx := HB_OleAuto()
>   oAx:__hObj := __AxGetControl( hWnd )
>   IF bHandler != NIL
>      oAx:__hSink := __AxRegisterHandler( oAx:__hObj, bHandler )
>   ENDIF
> RETURN oAx
>
> We can have also HB_AxCreateControl() (just like HB_OleCreateObject()).
> This function should have to create control, but creation of control is
> creation of the window. It has many of parameters like parent, ID,
> coordinates, flags. This part could depend on GUI library. So, I want to
> leave CreateWindow[Ex]() call outside of OLE/ActiveX code.
>
> Does the proposed naming has sence?
>
>
> --- Question 5: HB_OleAuto compatibility and :__cargo ---
> TOleAuto, TActiveX can be derived from original HB_OleAuto, implementing
> all other stuff (and polluting method namespace). For example:
>
> CLASS TOleAuto FROM HB_OleAuto
>   ACCESS hObj       INLINE  self:__hObj
>   ASSIGN hObj( X )  INLINE  self:__hObj := X
>   METHOD New()
> ENDCLASS
>
> METHOD New( hObj ) CLASS TOleAuto
>  ::__hObj := hObj
> RETURN Self
>
> If someone wants to store addition data in not polluted method namespace I
> propose, to add __cargo. It can used to store class name, method handler
> codeblock (for example for emulating event from inside Harbour) or array of
> anything. Ex.:
>
> METHOD New( hObj, cClassName ) CLASS TOleAuto
>  ::__hObj := CONVERT_ME_TO_POINTER_IF_I_AM_A_NUMBER( hObj )
>  ::__cargo := cClassName
> RETURN Self
>
> or:
>
> CLASS TActiveX FROM HB_OleAuto
>   METHOD New()
>   METHOD RegisterEventHandler()
>   METHOD Event()
> ENDCLASS
>
> METHOD New( hWnd )
>   ::__hObj := __AxGetControl( hWnd )
> RETURN Self
>
> METHOD RegisterEventHandler( bHandler )
>   ::__hSink := __AxRegisterHandler( ::__hObj, bHandler )
>   ::__cargo := bHandler
> RETURN Self
>
> METHOD Event( ... )
>   ::__cargo:EVAL( ... )
> RETURN Self
>
> etc...
>
>
>
> Regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Analisi e sviluppo software per Lan e Web - Consulenza informatica -
Formazione
Delta Informatica S.r.l. http://www.deltain.it/   +39 0321 455962
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090520/051f7bac/attachment-0001.html
From harbour.01 at syenar.hu  Wed May 20 02:33:39 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May 20 02:33:50 2009
Subject: [Harbour] ActiveX names
In-Reply-To: <609353e70905192312k55b5ccc3o87f151271990524f@mail.gmail.com>
References: <4A13391C.6010402@dbtopas.lt>
	<609353e70905192312k55b5ccc3o87f151271990524f@mail.gmail.com>
Message-ID: <18d502870905192333t4c2e4fe4s179aff93041f1ce2@mail.gmail.com>

Someone will have to check how these functions work (accepted params,
return values/types, error handling, etcetc) in these languages and we
probably can, but if there is anything different to our implementation,
we should either add support to it, or implement an alternate compatibility
version, with a different name, like xpp_CreateObject(), fox_CreateObject().
(or some clever combination of above).

Brgds,
Viktor

On Wed, May 20, 2009 at 8:12 AM, Massimo Belgrano <mbelgrano@deltain.it> wrote:
> Can we have a syntax/namespace compatible with visual foxpro or ?xbase++?
> a vb trlanslator?
> http://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=5e3b203d-af8a-41dc-88d0-28cdc1c4508d
> http://www.dfpug.de/loseblattsammlung\migration\whitepapers/activex.htm
>
> Creating an ActiveX Object Instance
>
> In Visual FoxPro, ActiveX objects are created using the CreateObject
> function. This requires a singleClassName?parameter, for example:
>
> LOCAL loMailman
> loMailman = CreateObject('Chilkat.MailMan2'
>
> Object Keyword
> A new Object keyword has been added to Visual FoxPro 5.0 so you can specify
> properties for ActiveX controls in class definitions defined
> programmatically. Class definitions are processed before the ActiveX control
> is instantiated; the Object keyword indicates to Visual FoxPro that a
> property value should be applied when the ActiveX control is instantiated.
> If the Object keyword is not included, a custom property for the ActiveX
> control is created when the control is instantiated. Note that the Object
> keyword must be immediately preceded by a period.
>
> The following example adds the ActiveX Outline control (MSOUTL32.OCX) to a
> form. The Object keyword is used to specify the BackColor property for the
> Outline control before the control is instantiated. Run the example, remove
> the Object keyword from the program line containing the BackColor property,
> and run the example again to see the effect of the Object keyword on the
> Outline control.
>
> PUBLIC frmOLETest
>
> frmOLETest = CREATEOBJECT('Form') ?&& Create a form
> frmOLETest.Visible = .T.? && Display the form
>
> * The following line adds the Outline control to the form
> frmOLETest.ADDOBJECT ( 'OCXTest', 'BlueOLEControl',
> ? ? ? ; 'MSOutl.Outline')
>
> frmOLETest.OCXTest.AddItem( 'Item One' ) ? && Add an item to the control
> frmOLETest.OCXTest.AddItem( 'Item Two' ) ? && Add an item to the control
>
> DEFINE CLASS BlueOLEControl AS OLEControl
> ? ? ? * Use the Object keyword to set the Backcolor
> ? ? ? * property for the Outline control
>
> ? ? ? .Object.Backcolor = 16776960 && Light blue
>
> ? ? ? Set properties of the OLE Container Control
> ? ? ? Height = 100 ? ? ? Width = 200 ? ? ? Visible = .T.
> ENDDEFINE
>
> Passing Arrays to ActiveX Controls
> If you pass an array to an ActiveX control - for example, if you call one of
> the control's methods and want to pass it an array - you must pass the array
> by reference. If you pass the array by value (the default), only the first
> element will be passed.
>
> Programmatically Adding ActiveX Controls to an OLE Container Control
> You can use ADDOBJECT( ) to add an ActiveX control to an OLE Container
> control programmatically at run time. The third argument in ADDOBJECT( ) is
> the OLE class ID for the ActiveX control. To determine the OLE class ID for
> an ActiveX control, add the ActiveX control to a form. The class ID for the
> ActiveX control appears in the OLEClass property in the Properties window.
>
> The following example demonstrates how you can programmatically add the
> ActiveX ProgressBar control contained in COMCTRL32.OCX to a form. Note the
> third argument of ADDOBJECT( ) (COMCTL.ProgCtrl.1) that specifies the OLE
> class ID for the ActiveX ProgressBar control.
>
> PUBLIC oForm
> oForm = CREATEOBJECT("Form") ? && Create a form
>
> * The following line adds the ProgessBar control to the form
>
> oForm.ADDOBJECT("OleProgress", "OLEControl", "COMCTL.ProgCtrl.1")
>
> * The following lines specify the location
> * and size of the ProgressBar control
>
> oForm.OleProgress.Top = 5
> oForm.OleProgress.Left = 5
> oForm.OleProgress.Height = 25
> oForm.OleProgress.Width = 289
>
> oForm.OleProgress.Visible = .T. && Display the ProgessBar
> oForm.Visible = .T. && Display the Form
>
> FOR i = 1 to 10
> ? oForm.OleProgress.Value=i*10 && Update the ProgressBar
> ? = INKEY(1) ? && Wait one second
> ENDFOR?If an ActiveX control is programmatically added to an OLE Container
> control, the ActiveX control must be properly registered on the computer on
> which the Visual FoxPro application is run. Proper registration of the
> ActiveX control is the responsibility of the developer who distributes an
> application utilizing ActiveX controls. The ActiveX controls included with
> Visual FoxPro (with the exception of MEDV141N.OCX, the MediaView 1.41
> ActiveX control) are licensed to be distributed with any application.
>
> You can register an ActiveX control used by your Visual FoxPro application
> during the installation of that application. Include the ActiveX control and
> any supporting files it requires in the list of distributed files specified
> in the Setup Wizard. In the "Change File Settings" step of the Setup Wizard,
> check the ActiveX checkbox for each ActiveX control that you distribute.
> This instructs Setup to register the control when the distributed
> application is installed. Note that the list of supporting files required
> for each of the ActiveX Control shipped with Visual FoxPro is listed in the
> control's help file or help topic.
>
> The preferred method for distributing an application utilizing the ActiveX
> controls included with Visual FoxPro is to add ActiveX controls to .VCX
> visual class libraries. The .VCX visual class libraries are included in the
> Setup Wizard distribution directory, and the setup created by the Setup
> Wizard will automatically register the ActiveX controls on the computer on
> which the distributed application is installed.
>
> 2009/5/20 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>
>>
>> Hi,
>>
>>
>> I've successfully implemented ActiveX notification event support from
>> scratch. All code is 200 lines of C. I want to talk about names for all
>> OLE/ActiveX things. What prefixes should be used for objects, methods,
>> functions, etc?
>>
>>
>> --- Question 1: Minimal method namespace polution ---
>> Current implementations is:
>> CLASS HB_OleAuto
>> ? VAR __hObj
>> ? VAR __hObjEnum
>> ENDCLASS
>>
>> Previous class used TOleAuto and hObj, pOleEnumerator. It also used :New()
>> constructor, some other 22 methods. My argument for __hObj is: HB_OleAuto is
>> used to call methods of OLE objects. If HB_OleAuto has defined some methods,
>> OLE methods having the same name could not be reached! F.e., TOleAuto() can
>> not call :New() method of original OLE object. I even used HB_CLS_NOTOBJECT
>> define to avoid inheritance from HBObject and leave method namespace as
>> clean as possible.
>>
>>
>> --- Question 2: No HB_ActiveX, because it's the same HB_OleAuto ---
>> I think it is logical to continue the same approach in ActiveX. My current
>> implementation of HB_ActiveX is:
>> CLASS HB_ActiveX FROM HB_OleAuto
>> ? VAR __hSink
>> ENDCLASS
>> Nothing more!
>>
>> HB_ActiveX also uses OLE automation to reach original methods so I want to
>> keep its methods namespace clean. If __hSink if the only additional memeber,
>> I'm thinking about adding it to HB_OleAuto. In this case we will have the
>> same HB_OleAuto class for ActiveX controls. What is your opinion? Do we need
>> a separate class?
>>
>> Actually HB_ActiveX is nothing more than HB_OleAuto if I do not use event
>> handler to handle messages sent by OLE/ActiveX control to Harbour. If you
>> look at my sample sent yesterday, it has:
>> ? ?hWndAx := CreateWindowEx(WS_EX_CLIENTEDGE, "ATLAXWin", ...
>> ? ?HB_AtlAxGetControl( hWndAx, @pDisp )
>> ? ?IF ! EMPTY( pDisp )
>> ? ? ?oAx := HB_OleAuto()
>> ? ? ?oAx:__hObj := pDisp
>> ? ?ENDIF
>> As you can see I've used HB_OleAuto with "ActiveX" control. But I do not
>> defined any event handler, so I did not need any :__hSink.
>> So, this HB_ActiveX is exactly HB_OleAuto.
>>
>>
>> --- Question 3: Function names for OLE ?---
>> We have:
>> * GetActiveObject - .prg function uses OLEGETACTIVEOBJECT returns
>> HB_OleAuto object if object can be obtained;
>> * CreateObject - .prg function uses OLEGETACTIVEOBJECT returns HB_OleAuto
>> object if object can be obtained;
>> * OLECREATEOBJECT returns Pointer.IDispatch;
>> * OLEGETACTIVEOBJECT returns Pointer.IDispatch;
>> * OLERELEASE releases object using Pointer.IDispatch (I'm thinking about
>> removing this function, since collectible pointers do the job, ant it is a
>> kind of internal function which should be marked as "DO NOT USE");
>> * __OLEENUMCREATE returns Pointer.IEnumIterator;
>> * __OLEENUMNEXT uses Pointer.IEnumIterator to skip on next item;
>> * OLEERROR, OLEERRORTEXT returns error code ant text for OLE errors.
>>
>> Since we are in very unstable state, I guess it is time to decide that
>> name should be used in Harbour. Thus making a stable background for changes
>> in 3rd party projects like FiveWin.
>>
>> The developer should use GetActiveObject, CreateObject, OleError and
>> OleErrorText. Do we need HB_* prefix? GetActiveObject and CreateObject has
>> VERY general name, shouldn't it belong to some OLE* prefixed namespace?
>>
>> All other are a kind of internal. From this point of view OLECREATEOBJECT
>> should has two underscores just like __OLEENUMCREATE.
>>
>> So, the final names could be:
>> HB_OleGetActiveObject <- GetActiveObject
>> HB_OleCreateObject ? ?<- OleCreateObject
>> HB_OleError ? ? ? ? ? <- OLEERROR
>> HB_OleErrorText ? ? ? <- OLEERRORTEXT
>> __OLECREATEOBJECT ? ? <- OLECREATEOBJECT
>> __OLEGETACTIVEOBJECT ?<- OLEGETACTIVEOBJECT
>> __OLEENUMCREATE is ok
>> __OLEENUMNEXT is ok
>>
>>
>> --- Question 4: Function names for ActiveX ?---
>> My current not yet committed ActiveX code has three functions:
>> * HB_AtlAxInit - it's AtlAxInit from atl.dll plus dynamic loading of that
>> .dll plus some more initialisation;
>> * HB_AtlAxGetControl - it's AtlAxGetControl from atl.dll plus IDispatch
>> interface request (since we are not going to work with IUnknown, and I want
>> to hide conversion inside the same function making interface simple);
>> * __AxRegisterHandler - this function is not a member of atl.dll. It
>> registers codeblock or function symbol for event notification.
>>
>> It would be nice to have a nice prefixed naming for these functions in
>> similar way as OLE functions. The first two has HB_ prefixed C function
>> names, but it acts a little different, it is not just a wrappers and do
>> more. It also return OLE error code, but I'm thinking about generating RTE
>> on error and returning result collectible pointer or NIL. In OLE code the
>> functions returning pointer has __* prefix (are internal).
>>
>> I'm thinking about (Ax is for ActiveX):
>> HB_AxInit <- HB_AtlAxInit
>> __AxGetControl <- HB_AtlAxGetControl
>> __AxRegisterHandler is ok
>>
>> But if you compare these names to proposed above OLE function names, the
>> last two returns pointers instead of final ActiveX object, so it should have
>> __* prefix instead of HB_*.
>>
>> The final ActiveX function (not internal, without underscores) will be
>> HB_AxGetControl(). Source code could be (see [HB_Ole]GetActiveobject() for
>> comparison):
>> FUNC HB_AxGetControl( hWnd, bHandler )
>> LOCAL oAx := HB_OleAuto()
>> ? oAx:__hObj := __AxGetControl( hWnd )
>> ? IF bHandler != NIL
>> ? ? ?oAx:__hSink := __AxRegisterHandler( oAx:__hObj, bHandler )
>> ? ENDIF
>> RETURN oAx
>>
>> We can have also HB_AxCreateControl() (just like HB_OleCreateObject()).
>> This function should have to create control, but creation of control is
>> creation of the window. It has many of parameters like parent, ID,
>> coordinates, flags. This part could depend on GUI library. So, I want to
>> leave CreateWindow[Ex]() call outside of OLE/ActiveX code.
>>
>> Does the proposed naming has sence?
>>
>>
>> --- Question 5: HB_OleAuto compatibility and :__cargo ---
>> TOleAuto, TActiveX can be derived from original HB_OleAuto, implementing
>> all other stuff (and polluting method namespace). For example:
>>
>> CLASS TOleAuto FROM HB_OleAuto
>> ? ACCESS hObj ? ? ? INLINE ?self:__hObj
>> ? ASSIGN hObj( X ) ?INLINE ?self:__hObj := X
>> ? METHOD New()
>> ENDCLASS
>>
>> METHOD New( hObj ) CLASS TOleAuto
>> ?::__hObj := hObj
>> RETURN Self
>>
>> If someone wants to store addition data in not polluted method namespace I
>> propose, to add __cargo. It can used to store class name, method handler
>> codeblock (for example for emulating event from inside Harbour) or array of
>> anything. Ex.:
>>
>> METHOD New( hObj, cClassName ) CLASS TOleAuto
>> ?::__hObj := CONVERT_ME_TO_POINTER_IF_I_AM_A_NUMBER( hObj )
>> ?::__cargo := cClassName
>> RETURN Self
>>
>> or:
>>
>> CLASS TActiveX FROM HB_OleAuto
>> ? METHOD New()
>> ? METHOD RegisterEventHandler()
>> ? METHOD Event()
>> ENDCLASS
>>
>> METHOD New( hWnd )
>> ? ::__hObj := __AxGetControl( hWnd )
>> RETURN Self
>>
>> METHOD RegisterEventHandler( bHandler )
>> ? ::__hSink := __AxRegisterHandler( ::__hObj, bHandler )
>> ? ::__cargo := bHandler
>> RETURN Self
>>
>> METHOD Event( ... )
>> ? ::__cargo:EVAL( ... )
>> RETURN Self
>>
>> etc...
>>
>>
>>
>> Regards,
>> Mindaugas
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
>
> --
> Massimo Belgrano
>
> Analisi e sviluppo software per Lan e Web - Consulenza informatica -
> Formazione
> Delta Informatica S.r.l. http://www.deltain.it/ ? +39 0321 455962
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
From vszakats at users.sourceforge.net  Wed May 20 03:32:02 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May 20 03:32:07 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11089] trunk/harbour
Message-ID: <E1M6gHS-0007Kw-9h@dn4whf1.ch3.sourceforge.com>

Revision: 11089
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11089&view=rev
Author:   vszakats
Date:     2009-05-20 07:31:59 +0000 (Wed, 20 May 2009)

Log Message:
-----------
2009-05-20 09:31 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  - hbwin/legacy.c
  + hbwin/legacyc.c
  * hbwin/Makefile
    * Renamed legacy.c to legacyc.c.

  * hbwin/win_tprn.prg
  * hbwin/hbwin.ch
    * Moved #defines to hbwin.ch header.
    * Formatting.
    + Added HB_COMPAT_XPP protection for XBPBITMAP class.

  * hbwin/win_tprn.prg
  * hbwin/win_prn1.c
    * WIN_OS_ISWIN9X() removed, now using OS_ISWIN9X().
      These OS_*() functions should be renamed in the future.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/Makefile
    trunk/harbour/contrib/hbwin/hbwin.ch
    trunk/harbour/contrib/hbwin/win_prn1.c
    trunk/harbour/contrib/hbwin/win_tprn.prg

Added Paths:
-----------
    trunk/harbour/contrib/hbwin/legacyc.c

Removed Paths:
-------------
    trunk/harbour/contrib/hbwin/legacy.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From alex at belacy.belgorod.su  Wed May 20 06:37:39 2009
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Wed May 20 06:37:54 2009
Subject: [Harbour] Re: Unrecoverable error 1010: hb_cdxIndexPageRead: Read
 index	page failed.
In-Reply-To: <guu51v$hbl$1@ger.gmane.org>
References: <guu51v$hbl$1@ger.gmane.org>
Message-ID: <4A13DD73.5050900@belacy.belgorod.su>

Hi All,

> Application Internal Error - C:\letodb\bin\letodb.exe
> Terminated at: 2009.05.18 17:22:09
> Unrecoverable error 1010: hb_cdxIndexPageRead: Read index page failed.

  The internal errors may be a problem for any kind of "NETRDD", they 
cause terminating of server's program in case of tables or index corruption.
  Maybe, we could refuse of using the hb_errInternal() in RDD code, 
replacing it with a common error handler ? Or, at least, add a 
possibility to set a callback function in hb_errInternal(), to be able 
output some additional info about a problem ?

Regards, Alexander.
From dbtopas at dbtopas.lt  Wed May 20 06:52:57 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed May 20 06:54:56 2009
Subject: [Harbour] Errors with 11032
In-Reply-To: <23628301.post@talk.nabble.com>
References: <23521549.post@talk.nabble.com>	<4546500C-FF65-4283-8C31-0723E3FD2E6B@syenar.hu>	<23527339.post@talk.nabble.com>
	<23535023.post@talk.nabble.com>	<23539642.post@talk.nabble.com>
	<23540931.post@talk.nabble.com>	<18d502870905140818h42c75779vf13bc738453349b5@mail.gmail.com>	<23574376.post@talk.nabble.com>	<5E3E514A-6BDB-422C-9703-34E228325BC9@syenar.hu>	<4A1011A0.3010308@dbtopas.lt>
	<23583794.post@talk.nabble.com>	<4A1156CE.9050407@dbtopas.lt>
	<23601197.post@talk.nabble.com>	<4A11AD61.4010705@dbtopas.lt>
	<4A11B94A.2090904@dbtopas.lt>	<4A11BEB7.9070501@fsgiudice.com>
	<4A11CF8C.5030401@dbtopas.lt>	<4A11D8C0.3040701@fsgiudice.com>
	<4A11E4CD.9090004@dbtopas.lt>	<23607332.post@talk.nabble.com>
	<4A12AF7B.8040202@dbtopas.lt>	<23622741.post@talk.nabble.com>
	<4A130B67.1090707@dbtopas.lt>	<23624655.post@talk.nabble.com>
	<4A133DE2.2040900@dbtopas.lt> <23628301.post@talk.nabble.com>
Message-ID: <4A13E109.6040905@dbtopas.lt>

Pritpal Bedi wrote:
> I was experimenting and got to this point : olecore.c line # 231
>       case HB_IT_OBJECT: /* or ARRAY */
>          if( HB_IS_OBJECT( pItem ) )
>          {
> //          if( hb_stricmp( hb_objGetClsName( pItem ), "HB_OLEAUTO" ) == 0 )     
>             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> 
> If I comment out line # 231 as above 
> oDialogs:calendar := oCal   works fine and I can open the dialogs.
> You can see that the object is issued AddRef().
> 
> May it help you understanding what is happening.

So, the reason is the one I've mentioned before, but you haven't 
answered a question about oCal:ClassName :
-------------------
What is result of:
   ? oCal:ClassName

Current code converts only HB_OLEAUTO class to VT_DISPATCH parameter, 
but I'm going to change it use a class inherited from HB_OLEAUTO, thus, 
making
   CLASS TOleAuto FROM HB_OleAuto
available for passing as IDispatch variant parameter.
-------------------


Regards,
Mindaugas
From harbour.01 at syenar.hu  Wed May 20 07:10:39 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May 20 07:10:44 2009
Subject: [Harbour] pocc6 results
Message-ID: <18d502870905200410o7cf06355p8744ab2add33be2b@mail.gmail.com>

Hi All,

This is a new warning in our code (probably harmless):
pocc.exe -I. -Ze -Go -MT -W1 -Ot -I../../../../include    -DHB_DYNLIB
-c ../../ppcore.c -Foppcore.obj
../../ppcore.c(3480): warning #2154: Unreachable code.

This should be reported to POCC author by interested users:
pocc.exe -I. -Ze -Go -MT -W1 -Ot -I../../../../include     -c
../../sha2.c -Fosha2.obj
../../sha2.c(444): fatal error: Internal error: find_cheapest_spill_range().

Brgds,
Viktor
From harbour.01 at syenar.hu  Wed May 20 07:11:57 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed May 20 07:12:09 2009
Subject: [Harbour] Re: Unrecoverable error 1010: hb_cdxIndexPageRead: Read
	index	page failed.
In-Reply-To: <4A13DD73.5050900@belacy.belgorod.su>
References: <guu51v$hbl$1@ger.gmane.org> <4A13DD73.5050900@belacy.belgorod.su>
Message-ID: <B609EDFA-60D3-4AA3-A6C4-5E65437F9FD3@syenar.hu>

I agree it'd be better. I'd vote for an RTE to
not complicate things with developing another
override interface for internal errors, we
already have one for RTEs.

Brgds,
Viktor

On 2009.05.20., at 12:37, Alexander S.Kresin wrote:

> Hi All,
>
>> Application Internal Error - C:\letodb\bin\letodb.exe
>> Terminated at: 2009.05.18 17:22:09
>> Unrecoverable error 1010: hb_cdxIndexPageRead: Read index page  
>> failed.
>
> The internal errors may be a problem for any kind of "NETRDD", they  
> cause terminating of server's program in case of tables or index  
> corruption.
> Maybe, we could refuse of using the hb_errInternal() in RDD code,  
> replacing it with a common error handler ? Or, at least, add a  
> possibility to set a callback function in hb_errInternal(), to be  
> able output some additional info about a problem ?
>
> Regards, Alexander.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From toninhofwi at yahoo.com.br  Wed May 20 08:58:42 2009
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed May 20 08:54:05 2009
Subject: [Harbour] ActiveX names
In-Reply-To: <4A13391C.6010402@dbtopas.lt>
References: <4A13391C.6010402@dbtopas.lt>
Message-ID: <7gv7151rpqg0uik76tjr331q6ugo561sp8@4ax.com>

Hi Mindaugas.

Thank you for this great implementation.  

>current implementation of HB_ActiveX is:
>CLASS HB_ActiveX FROM HB_OleAuto
>    VAR __hSink
>ENDCLASS
>Nothing more!

Why not use __hSink directly in HB_OleAuto class?  In this way we need
only use HB_OleAuto to define an activex control.

Regards,

Toninho.


	

	
		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From gvarona at ec-red.com  Wed May 20 09:33:10 2009
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Wed May 20 09:31:09 2009
Subject: [Harbour] How can create a library with hbmk2?
In-Reply-To: <4A1334E0.8050103@zen.co.uk>
References: <4A131833.3060505@ec-red.com>	<609353e70905191403n649621dexa4075ed945f64db1@mail.gmail.com>	<4A13217E.2060005@ec-red.com>
	<4A1334E0.8050103@zen.co.uk>
Message-ID: <4A140696.50400@ec-red.com>

Barry Jackson escribi?:
> Guillermo Varona Silup? wrote:
>> Massimo Belgrano escribi?:
>>> hbmk2 myprg.PRG myprg2.PRG  -hblib -omylib.lib
>> Thank you Massimo, I have just discovered in a previous post of yours 
>> and it works fine.
>>
>> Best Regards
>> GVS
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
> Does this also work?
> hbmk2 @myprglist.txt -hblib -omylib.lib
Yes, it works.

I used this:
hbmk2 @abraxas.hbp -b -m -hblib -oAbraxasMinGW

Best Regards
GVS


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090520/fb784b2e/attachment.html
From mbelgrano at deltain.it  Wed May 20 09:38:11 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed May 20 09:38:35 2009
Subject: [Harbour] How can create a library with hbmk2?
In-Reply-To: <4A140696.50400@ec-red.com>
References: <4A131833.3060505@ec-red.com>
	<609353e70905191403n649621dexa4075ed945f64db1@mail.gmail.com> 
	<4A13217E.2060005@ec-red.com> <4A1334E0.8050103@zen.co.uk> 
	<4A140696.50400@ec-red.com>
Message-ID: <609353e70905200638t4b1aedbg3e0d66810c554189@mail.gmail.com>

and imo is better because is a multiplatform solution
is suggest if is possible display a warning using non portable .lib syntax


2009/5/20 Guillermo Varona Silup? <gvarona@ec-red.com>

>  Barry Jackson escribi?:
>
> Guillermo Varona Silup? wrote:
>
> Massimo Belgrano escribi?:
>
> hbmk2 myprg.PRG myprg2.PRG  -hblib -omylib.lib
>
> Thank you Massimo, I have just discovered in a previous post of yours and
> it works fine.
>
> Best Regards
> GVS
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>  Does this also work?
> hbmk2 @myprglist.txt -hblib -omylib.lib
>
> Yes, it works.
>
> I used this:
> hbmk2 @abraxas.hbp -b -m -hblib -oAbraxasMinGW
>
> Best Regards
> GVS
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>


-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090520/f73679ab/attachment.html
From gvarona at ec-red.com  Wed May 20 09:47:54 2009
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Wed May 20 09:45:45 2009
Subject: [Harbour] How can create a library with hbmk2?
In-Reply-To: <4A140696.50400@ec-red.com>
References: <4A131833.3060505@ec-red.com>	<609353e70905191403n649621dexa4075ed945f64db1@mail.gmail.com>	<4A13217E.2060005@ec-red.com>	<4A1334E0.8050103@zen.co.uk>
	<4A140696.50400@ec-red.com>
Message-ID: <4A140A0A.6030107@ec-red.com>

Guillermo Varona Silup? escribi?:
> Barry Jackson escribi?:
>> Guillermo Varona Silup? wrote:
>>> Massimo Belgrano escribi?:
>>>> hbmk2 myprg.PRG myprg2.PRG  -hblib -omylib.lib
>>> Thank you Massimo, I have just discovered in a previous post of 
>>> yours and it works fine.
>>>
>>> Best Regards
>>> GVS
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>>
>> Does this also work?
>> hbmk2 @myprglist.txt -hblib -omylib.lib
> Yes, it works.
20/05/2009  08:21 a.m.            *_93,528_* LibAbrxMinGw.a
>
> I used this:
> hbmk2 @abraxas.hbp -b -m -hblib -oAbraxasMinGW
20/05/2009  08:34 a.m.           _*115,614*_ libAbraxasMinGW.a

Best Regards
GVS



From gvarona at ec-red.com  Wed May 20 09:58:18 2009
From: gvarona at ec-red.com (=?UTF-8?B?R3VpbGxlcm1vIFZhcm9uYSBTaWx1cMO6?=)
Date: Wed May 20 09:56:10 2009
Subject: [Harbour] How can create a library with hbmk2?
In-Reply-To: <18d502870905191554s599480d0x255b743a097a4fe9@mail.gmail.com>
References: <4A131833.3060505@ec-red.com>	<609353e70905191403n649621dexa4075ed945f64db1@mail.gmail.com>	<4A13217E.2060005@ec-red.com>
	<4A1334E0.8050103@zen.co.uk>
	<18d502870905191554s599480d0x255b743a097a4fe9@mail.gmail.com>
Message-ID: <4A140C7A.3020201@ec-red.com>

Viktor Szak?ts escribi?:
>> Does this also work?
>>
>> hbmk2 @myprglist.txt -hblib -omylib.lib
>>     
>
> Yes, it does. Also 'hbmk2 *.prg -hblib -omylib' works.
>   

I tried this:

D:\SyS_GVS\ABRAXAS\PRG>d:\hrbmingw\bin\hbmk2 *.prg -hblib -oAbrAll
hbmk: Processing configuration: d:\hrbmingw\bin\hbmk.cfg
hbmk: Error: No source files were specified.

and does not work

Best Regards
GVS


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090520/1490f93f/attachment.html
From mbelgrano at deltain.it  Wed May 20 10:39:09 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed May 20 10:39:37 2009
Subject: [Harbour] How create sdd*.lib during harbour compilation?
Message-ID: <609353e70905200739t4485b67bne71f487bd8034ee2@mail.gmail.com>

How create sdd*.lib during harbour compilation?
sddfb.lib, sddmy,sddodbc.lib,sddpg.lib

SET HB_COMPILER=mingw
sh make_gnu.sh clean install

-- 
Massimo Belgrano

Analisi e sviluppo software per Lan e Web - Consulenza informatica -
Formazione
Delta Informatica S.r.l. http://www.deltain.it/   +39 0321 455962
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090520/dcbaeb93/attachment.html
From dbtopas at dbtopas.lt  Wed May 20 10:42:00 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed May 20 10:43:57 2009
Subject: [Harbour] How create sdd*.lib during harbour compilation?
In-Reply-To: <609353e70905200739t4485b67bne71f487bd8034ee2@mail.gmail.com>
References: <609353e70905200739t4485b67bne71f487bd8034ee2@mail.gmail.com>
Message-ID: <4A1416B8.1070307@dbtopas.lt>

Massimo Belgrano wrote:
> How create sdd*.lib during harbour compilation?
> sddfb.lib, sddmy,sddodbc.lib,sddpg.lib
> 
> SET HB_COMPILER=mingw
> sh make_gnu.sh clean install

I'm using:

set HB_DIR_FIREBIRD=c:\firebird
set HB_INC_FIREBIRD=c:\firebird\include

set HB_DIR_MYSQL=c:\mysql-4.1.7-win
set HB_INC_MYSQL=c:\mysql-4.1.7-win\include

set HB_DIR_PGSQL=c:\pgsql
set HB_INC_PGSQL=c:\pgsql\include

set HB_INC_ODBC=c:\bcc55\include

call make_gnu.bat


Regards,
Mindaugas
From mbelgrano at deltain.it  Wed May 20 10:59:57 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed May 20 11:00:22 2009
Subject: [Harbour] How create sdd*.lib during harbour compilation?
In-Reply-To: <4A1416B8.1070307@dbtopas.lt>
References: <609353e70905200739t4485b67bne71f487bd8034ee2@mail.gmail.com> 
	<4A1416B8.1070307@dbtopas.lt>
Message-ID: <609353e70905200759t2c6a022cm974e076b2dc38592@mail.gmail.com>

Where found odbc dir/HB_INC_ODBC  for mingw,msvc8?

2009/5/20 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>

> Massimo Belgrano wrote:
>
>> How create sdd*.lib during harbour compilation?
>> sddfb.lib, sddmy,sddodbc.lib,sddpg.lib
>>
>> SET HB_COMPILER=mingw
>> sh make_gnu.sh clean install
>>
>
> I'm using:
>
> set HB_DIR_FIREBIRD=c:\firebird
> set HB_INC_FIREBIRD=c:\firebird\include
>
> set HB_DIR_MYSQL=c:\mysql-4.1.7-win
> set HB_INC_MYSQL=c:\mysql-4.1.7-win\include
>
> set HB_DIR_PGSQL=c:\pgsql
> set HB_INC_PGSQL=c:\pgsql\include
>
> set HB_INC_ODBC=c:\bcc55\include
>
> call make_gnu.bat
>
>
> Regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090520/190a273a/attachment.html
From dbtopas at dbtopas.lt  Wed May 20 11:11:39 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed May 20 11:13:36 2009
Subject: [Harbour] How create sdd*.lib during harbour compilation?
In-Reply-To: <609353e70905200759t2c6a022cm974e076b2dc38592@mail.gmail.com>
References: <609353e70905200739t4485b67bne71f487bd8034ee2@mail.gmail.com>
	<4A1416B8.1070307@dbtopas.lt>
	<609353e70905200759t2c6a022cm974e076b2dc38592@mail.gmail.com>
Message-ID: <4A141DAB.1060301@dbtopas.lt>

Massimo Belgrano wrote:
> Where found odbc dir/HB_INC_ODBC  for mingw,msvc8?

Hi,


for mingw it is c:\mingw\include



Regards,
Mindaugas
From snaiperis at users.sourceforge.net  Wed May 20 11:19:36 2009
From: snaiperis at users.sourceforge.net (snaiperis@users.sourceforge.net)
Date: Wed May 20 11:19:41 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11090] trunk/harbour
Message-ID: <E1M6nZw-0005qc-IB@c3vjzd1.ch3.sourceforge.com>

Revision: 11090
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11090&view=rev
Author:   snaiperis
Date:     2009-05-20 15:19:17 +0000 (Wed, 20 May 2009)

Log Message:
-----------
2009-05-20 18:15 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
  * harbour/contrib/hbwin/hbwinole.h
  * harbour/contrib/hbwin/olecore.c
    + added public functions hb_oleSetError(), hb_oleGetError()

  * harbour/contrib/hbwin/Makefile
  + harbour/contrib/hbwin/axcore.c
  + harbour/contrib/hbwin/axfunc.prg
    + added ActiveX support. Public functions are:
      WIN_AxInit() --> lSuccess
      WIN_AxGetControl( hWnd, [ bEventHandler ] ) --> oActiveX
    
    ; TODO: a few warnings left. I do not know howto recast function 
      type pointer

  * harbour/contrib/hbwin/oleauto.c
    * function renames
    + :__hSink, :__cargo members

  * harbour/contrib/hbwin/olecore.c
    * function renames
    + support item to variant conversion for classes inherited from 
      WIN_OLEAUTO
    - removed internal OLERELEASE()
    + added optional parameter for WIN_OleErrorText( [ nOleError ] ) 

  * harbour/source/vm/classes.c
    * minor optimisation

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/Makefile
    trunk/harbour/contrib/hbwin/hbwinole.h
    trunk/harbour/contrib/hbwin/oleauto.prg
    trunk/harbour/contrib/hbwin/olecore.c
    trunk/harbour/source/vm/classes.c

Added Paths:
-----------
    trunk/harbour/contrib/hbwin/axcore.c
    trunk/harbour/contrib/hbwin/axfunc.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From mbelgrano at deltain.it  Wed May 20 11:24:12 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed May 20 11:24:40 2009
Subject: [Harbour] How create sdd*.lib during harbour compilation?
In-Reply-To: <4A141DAB.1060301@dbtopas.lt>
References: <609353e70905200739t4485b67bne71f487bd8034ee2@mail.gmail.com> 
	<4A1416B8.1070307@dbtopas.lt>
	<609353e70905200759t2c6a022cm974e076b2dc38592@mail.gmail.com> 
	<4A141DAB.1060301@dbtopas.lt>
Message-ID: <609353e70905200824y61f18a2ao7c1623bbc41aae39@mail.gmail.com>

for mingw i am going to try follow settingset HB_DIR_MYSQL=/C/Program
Files/MySQL/MySQL Server 5.1
set HB_INC_MYSQL=/C/Program Files/MySQL/MySQL Server 5.1/include
set HB_INC_ODBC=/c/devl/mingw/include
for msvc
set HB_DIR_MYSQL=C:\Program Files\MySQL\MySQL Server 5.1
set HB_INC_MYSQL=c:\Program Files\MySQL\MySQL Server 5.1/include
set HB_INC_ODBC=???

2009/5/20 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>

> Massimo Belgrano wrote:
>
>> Where found odbc dir/HB_INC_ODBC  for mingw,msvc8?
>>
>
> Hi,
>
>
> for mingw it is c:\mingw\include
>
>
>
>
> Regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090520/23367786/attachment.html
From dbtopas at dbtopas.lt  Wed May 20 11:25:07 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed May 20 11:27:05 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11090] trunk/harbour
In-Reply-To: <E1M6nZw-0005qc-IB@c3vjzd1.ch3.sourceforge.com>
References: <E1M6nZw-0005qc-IB@c3vjzd1.ch3.sourceforge.com>
Message-ID: <4A1420D3.9030704@dbtopas.lt>

>     + added ActiveX support.


Hi,


my ActiveX test code is three additional lines in Hello World GUI sample:
   WIN_AxInit()

   hWndAx := CreateWindow("ATLAXWin", "http://sf.net", ...
   oAx := WIN_AxGetControl( hWndAx, @SomeEventLogFunc() )

here SomeEventLogFunc() logs events to file, to be sure event handler is 
working.

oAx can be used:
   oAx:Navigate("http://www.google.lt")
   oAx:GoBack()
etc...


Regards,
Mindaugas
From dbtopas at dbtopas.lt  Wed May 20 11:30:25 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed May 20 11:32:22 2009
Subject: [Harbour] How create sdd*.lib during harbour compilation?
In-Reply-To: <609353e70905200824y61f18a2ao7c1623bbc41aae39@mail.gmail.com>
References: <609353e70905200739t4485b67bne71f487bd8034ee2@mail.gmail.com>
	<4A1416B8.1070307@dbtopas.lt>	<609353e70905200759t2c6a022cm974e076b2dc38592@mail.gmail.com>
	<4A141DAB.1060301@dbtopas.lt>
	<609353e70905200824y61f18a2ao7c1623bbc41aae39@mail.gmail.com>
Message-ID: <4A142211.9040106@dbtopas.lt>

Hi,

Massimo Belgrano wrote:
> for msvc
> set HB_INC_ODBC=???

do you know where general/common include files of msvc is? ODBC is the 
part of windows, there is no need to look for another include folder.


Regards,
Mindaugas
From mbelgrano at deltain.it  Wed May 20 11:37:26 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed May 20 11:37:51 2009
Subject: [Harbour] How create sdd*.lib during harbour compilation?
In-Reply-To: <4A142211.9040106@dbtopas.lt>
References: <609353e70905200739t4485b67bne71f487bd8034ee2@mail.gmail.com> 
	<4A1416B8.1070307@dbtopas.lt>
	<609353e70905200759t2c6a022cm974e076b2dc38592@mail.gmail.com> 
	<4A141DAB.1060301@dbtopas.lt>
	<609353e70905200824y61f18a2ao7c1623bbc41aae39@mail.gmail.com> 
	<4A142211.9040106@dbtopas.lt>
Message-ID: <609353e70905200837r1e86dd56n67a89409735cb65b@mail.gmail.com>

set HB_INC_ODBC="%ProgramFiles%\Microsoft Visual Studio 9.0\VC\INCLUDE

2009/5/20 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>

> Hi,
>
> Massimo Belgrano wrote:
>
>> for msvc
>> set HB_INC_ODBC=???
>>
>
> do you know where general/common include files of msvc is? ODBC is the part
> of windows, there is no need to look for another include folder.
>
>
>
> Regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090520/02393518/attachment.html
From alcisoft at arrakis.es  Wed May 20 11:56:09 2009
From: alcisoft at arrakis.es (Antonio Martinez)
Date: Wed May 20 12:00:52 2009
Subject: [Harbour] Re: How create sdd*.lib during harbour compilation?
References: <609353e70905200739t4485b67bne71f487bd8034ee2@mail.gmail.com>
Message-ID: <gv19eu$ovr$1@ger.gmane.org>

Massimo,

Are there a harbour's layer for to use all SGDB access ? For example, a class...

Regards

Massimo Belgrano escribi? en mensaje <609353e70905200739t4485b67bne71f487bd8034ee2@mail.gmail.com>...
    How create sdd*.lib during harbour compilation?
    sddfb.lib, sddmy,sddodbc.lib,sddpg.lib
    
    
    SET HB_COMPILER=mingw
    sh make_gnu.sh clean install
    
    -- 
    Massimo Belgrano
    
    Analisi e sviluppo software per Lan e Web - Consulenza informatica - Formazione
    Delta Informatica S.r.l. http://www.deltain.it/   +39 0321 455962
    
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090520/dd2ca9d8/attachment.html
From harbour.01 at syenar.hu  Wed May 20 12:06:23 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May 20 12:06:28 2009
Subject: [Harbour] How can create a library with hbmk2?
In-Reply-To: <4A140C7A.3020201@ec-red.com>
References: <4A131833.3060505@ec-red.com>
	<609353e70905191403n649621dexa4075ed945f64db1@mail.gmail.com>
	<4A13217E.2060005@ec-red.com> <4A1334E0.8050103@zen.co.uk>
	<18d502870905191554s599480d0x255b743a097a4fe9@mail.gmail.com>
	<4A140C7A.3020201@ec-red.com>
Message-ID: <18d502870905200906i7a2cd285ldc97a6969938ae06@mail.gmail.com>

Sorry I cannot reproduce this problem. Pls check if you have .prg
in your dir and using latest version.

Brgds,
Viktor

On Wed, May 20, 2009 at 3:58 PM, Guillermo Varona Silup?
<gvarona@ec-red.com> wrote:
> Viktor Szak?ts escribi?:
>
> Does this also work?
>
> hbmk2 @myprglist.txt -hblib -omylib.lib
>
>
> Yes, it does. Also 'hbmk2 *.prg -hblib -omylib' works.
>
>
> I tried this:
>
> D:\SyS_GVS\ABRAXAS\PRG>d:\hrbmingw\bin\hbmk2 *.prg -hblib -oAbrAll
> hbmk: Processing configuration: d:\hrbmingw\bin\hbmk.cfg
> hbmk: Error: No source files were specified.
>
> and does not work
>
> Best Regards
> GVS
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
From harbour.01 at syenar.hu  Wed May 20 12:32:00 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed May 20 12:32:10 2009
Subject: [Harbour] How can create a library with hbmk2?
In-Reply-To: <609353e70905200638t4b1aedbg3e0d66810c554189@mail.gmail.com>
References: <4A131833.3060505@ec-red.com>
	<609353e70905191403n649621dexa4075ed945f64db1@mail.gmail.com>
	<4A13217E.2060005@ec-red.com> <4A1334E0.8050103@zen.co.uk>
	<4A140696.50400@ec-red.com>
	<609353e70905200638t4b1aedbg3e0d66810c554189@mail.gmail.com>
Message-ID: <DAAC4FD7-FF70-4EA8-9ED0-D73FDD5B0736@syenar.hu>

>> Does this also work?
>> hbmk2 @myprglist.txt -hblib -omylib.lib
> Yes, it works.
>
> I used this:
> hbmk2 @abraxas.hbp -b -m -hblib -oAbraxasMinGW

One minor correction to this cmdline, just to not
make ppl mislead by it: @scriptfile parameter always
requires a file using .hbm format, so the .hbp extension
in this case is misleading. It won't cause any problem,
because hbmk2 won't reject it because of such extension,
but it's good practice to use .hbm even in this case:

hbmk2 @abraxas.hbm -b -m -hblib -oAbraxasMinGW

or even just:

hbmk2 abraxas.hbm -b -m -hblib -oAbraxasMinGW

(because .hbm files are recognized even without @ prefix).

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed May 20 12:34:33 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed May 20 12:34:41 2009
Subject: [Harbour] How create sdd*.lib during harbour compilation?
In-Reply-To: <609353e70905200759t2c6a022cm974e076b2dc38592@mail.gmail.com>
References: <609353e70905200739t4485b67bne71f487bd8034ee2@mail.gmail.com>
	<4A1416B8.1070307@dbtopas.lt>
	<609353e70905200759t2c6a022cm974e076b2dc38592@mail.gmail.com>
Message-ID: <4BD22FBE-8C36-474B-9567-9F197E364184@syenar.hu>

> Where found odbc dir/HB_INC_ODBC  for mingw,msvc8?

This envvar isn't needed for Windows systems.

Brgds,
Viktor

From mbelgrano at deltain.it  Wed May 20 12:40:00 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed May 20 12:40:25 2009
Subject: [Harbour] How create sdd*.lib during harbour compilation?
In-Reply-To: <4BD22FBE-8C36-474B-9567-9F197E364184@syenar.hu>
References: <609353e70905200739t4485b67bne71f487bd8034ee2@mail.gmail.com> 
	<4A1416B8.1070307@dbtopas.lt>
	<609353e70905200759t2c6a022cm974e076b2dc38592@mail.gmail.com> 
	<4BD22FBE-8C36-474B-9567-9F197E364184@syenar.hu>
Message-ID: <609353e70905200940g245d21f9t97672864665ef25c@mail.gmail.com>

set HB_DIR_MYSQL=/C/Program Files/MySQL/MySQL Server 5.1
set HB_INC_MYSQL=/C/Program Files/MySQL/MySQL Server 5.1/include
but i not have ssdmysql.lib created only sddodbc.lib

my %ProgramFiles% is c:\Program Files

2009/5/20 Szak?ts Viktor <harbour.01@syenar.hu>

> Where found odbc dir/HB_INC_ODBC  for mingw,msvc8?
>>
>
> This envvar isn't needed for Windows systems.
>
> Brgds,
> Viktor
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090520/fe6fdc2a/attachment.html
From harbour.01 at syenar.hu  Wed May 20 12:51:08 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed May 20 12:51:17 2009
Subject: [Harbour] How create sdd*.lib during harbour compilation?
In-Reply-To: <609353e70905200940g245d21f9t97672864665ef25c@mail.gmail.com>
References: <609353e70905200739t4485b67bne71f487bd8034ee2@mail.gmail.com>
	<4A1416B8.1070307@dbtopas.lt>
	<609353e70905200759t2c6a022cm974e076b2dc38592@mail.gmail.com>
	<4BD22FBE-8C36-474B-9567-9F197E364184@syenar.hu>
	<609353e70905200940g245d21f9t97672864665ef25c@mail.gmail.com>
Message-ID: <7BF8A41A-9CF0-4560-B6CE-4AAF49E469F8@syenar.hu>

> set HB_DIR_MYSQL=/C/Program Files/MySQL/MySQL Server 5.1
> set HB_INC_MYSQL=/C/Program Files/MySQL/MySQL Server 5.1/include
> but i not have ssdmysql.lib created only sddodbc.lib

You probably still didn't read INSTALL. First, above
kind of MinGW usage is now obsolete and not recommended,
secondly there are spaces in the dirspec, which was
never tested and I bet it won't work, INSTALL recommends
not to use any. Using space and MinGW dir notation is
an almost 100% sure way to screw your setup.

Brgds,
Viktor

From gvarona at ec-red.com  Wed May 20 13:12:23 2009
From: gvarona at ec-red.com (=?UTF-8?B?R3VpbGxlcm1vIFZhcm9uYSBTaWx1cMO6?=)
Date: Wed May 20 13:10:27 2009
Subject: [Harbour] How can create a library with hbmk2?
In-Reply-To: <18d502870905200906i7a2cd285ldc97a6969938ae06@mail.gmail.com>
References: <4A131833.3060505@ec-red.com>	<609353e70905191403n649621dexa4075ed945f64db1@mail.gmail.com>	<4A13217E.2060005@ec-red.com>
	<4A1334E0.8050103@zen.co.uk>	<18d502870905191554s599480d0x255b743a097a4fe9@mail.gmail.com>	<4A140C7A.3020201@ec-red.com>
	<18d502870905200906i7a2cd285ldc97a6969938ae06@mail.gmail.com>
Message-ID: <4A1439F7.1040301@ec-red.com>

Viktor Szak?ts escribi?:
> Sorry I cannot reproduce this problem. Pls check if you have .prg
> in your dir and using latest version.
>   
In my folder (dir) i have:
****************************************************
D:\SyS_GVS\ABRAXAS\PRG>dir
 El volumen de la unidad D es ACERDATA
 El n?mero de serie del volumen es: B4D2-293B
 Directorio de D:\SyS_GVS\ABRAXAS\PRG
20/05/2009  08:52 a.m.    <DIR>          .
20/05/2009  08:52 a.m.    <DIR>          ..
02/02/2009  01:22 p.m.               468 ABORRAR.PRG
02/02/2009  01:22 p.m.             1,453 ABREDBF.PRG
. . .
02/02/2009  01:22 p.m.               215 VARREP.PRG
02/02/2009  01:22 p.m.               916 XINKEY.PRG
             107 archivos         90,972 bytes
               2 dirs  208,762,658,816 bytes libres
D:\SyS_GVS\ABRAXAS\PRG>
****************************************************
And the version de harbour is:
****************************************************
D:\SyS_GVS\ABRAXAS\PRG>\hrbMinGW\bin\harbour
Harbour 1.1.0dev (Rev. 11086)
Copyright (c) 1999-2009, http://www.harbour-project.org/
. . .
D:\SyS_GVS\ABRAXAS\PRG>cd \harbour
****************************************************

Best Regards
GVS

> On Wed, May 20, 2009 at 3:58 PM, Guillermo Varona Silup?
> <gvarona@ec-red.com> wrote:
>   
>> Viktor Szak?ts escribi?:
>>
>> Does this also work?
>>
>> hbmk2 @myprglist.txt -hblib -omylib.lib
>>
>>
>> Yes, it does. Also 'hbmk2 *.prg -hblib -omylib' works.
>>
>>
>> I tried this:
>>
>> D:\SyS_GVS\ABRAXAS\PRG>d:\hrbmingw\bin\hbmk2 *.prg -hblib -oAbrAll
>> hbmk: Processing configuration: d:\hrbmingw\bin\hbmk.cfg
>> hbmk: Error: No source files were specified.
>>
>> and does not work
>>
>> Best Regards
>> GVS
>>     

From harbour.01 at syenar.hu  Wed May 20 13:24:25 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed May 20 13:24:34 2009
Subject: [Harbour] How can create a library with hbmk2?
In-Reply-To: <4A1439F7.1040301@ec-red.com>
References: <4A131833.3060505@ec-red.com>	<609353e70905191403n649621dexa4075ed945f64db1@mail.gmail.com>	<4A13217E.2060005@ec-red.com>
	<4A1334E0.8050103@zen.co.uk>	<18d502870905191554s599480d0x255b743a097a4fe9@mail.gmail.com>	<4A140C7A.3020201@ec-red.com>
	<18d502870905200906i7a2cd285ldc97a6969938ae06@mail.gmail.com>
	<4A1439F7.1040301@ec-red.com>
Message-ID: <0C76B3AD-FDC4-44B7-87F3-560D51E10F3D@syenar.hu>

I'll fix it, it gets confused about uppercase .PRG
when double checking the extension to workaround
DIRECTORY() bug.

Brgds,
Viktor

On 2009.05.20., at 19:12, Guillermo Varona Silup? wrote:

> Viktor Szak?ts escribi?:
>> Sorry I cannot reproduce this problem. Pls check if you have .prg
>> in your dir and using latest version.
>>
> In my folder (dir) i have:
> ****************************************************
> D:\SyS_GVS\ABRAXAS\PRG>dir
> El volumen de la unidad D es ACERDATA
> El n?mero de serie del volumen es: B4D2-293B
> Directorio de D:\SyS_GVS\ABRAXAS\PRG
> 20/05/2009  08:52 a.m.    <DIR>          .
> 20/05/2009  08:52 a.m.    <DIR>          ..
> 02/02/2009  01:22 p.m.               468 ABORRAR.PRG
> 02/02/2009  01:22 p.m.             1,453 ABREDBF.PRG
> . . .
> 02/02/2009  01:22 p.m.               215 VARREP.PRG
> 02/02/2009  01:22 p.m.               916 XINKEY.PRG
>            107 archivos         90,972 bytes
>              2 dirs  208,762,658,816 bytes libres
> D:\SyS_GVS\ABRAXAS\PRG>
> ****************************************************
> And the version de harbour is:
> ****************************************************
> D:\SyS_GVS\ABRAXAS\PRG>\hrbMinGW\bin\harbour
> Harbour 1.1.0dev (Rev. 11086)
> Copyright (c) 1999-2009, http://www.harbour-project.org/
> . . .
> D:\SyS_GVS\ABRAXAS\PRG>cd \harbour
> ****************************************************
>
> Best Regards
> GVS
>
>> On Wed, May 20, 2009 at 3:58 PM, Guillermo Varona Silup?
>> <gvarona@ec-red.com> wrote:
>>
>>> Viktor Szak?ts escribi?:
>>>
>>> Does this also work?
>>>
>>> hbmk2 @myprglist.txt -hblib -omylib.lib
>>>
>>>
>>> Yes, it does. Also 'hbmk2 *.prg -hblib -omylib' works.
>>>
>>>
>>> I tried this:
>>>
>>> D:\SyS_GVS\ABRAXAS\PRG>d:\hrbmingw\bin\hbmk2 *.prg -hblib -oAbrAll
>>> hbmk: Processing configuration: d:\hrbmingw\bin\hbmk.cfg
>>> hbmk: Error: No source files were specified.
>>>
>>> and does not work
>>>
>>> Best Regards
>>> GVS
>>>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Wed May 20 13:26:50 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed May 20 13:27:15 2009
Subject: [Harbour] How create sdd*.lib during harbour compilation?
In-Reply-To: <7BF8A41A-9CF0-4560-B6CE-4AAF49E469F8@syenar.hu>
References: <609353e70905200739t4485b67bne71f487bd8034ee2@mail.gmail.com> 
	<4A1416B8.1070307@dbtopas.lt>
	<609353e70905200759t2c6a022cm974e076b2dc38592@mail.gmail.com> 
	<4BD22FBE-8C36-474B-9567-9F197E364184@syenar.hu>
	<609353e70905200940g245d21f9t97672864665ef25c@mail.gmail.com> 
	<7BF8A41A-9CF0-4560-B6CE-4AAF49E469F8@syenar.hu>
Message-ID: <609353e70905201026m18592c22pa3e728da1a4fe06a@mail.gmail.com>

Changed to
set HB_DIR_MYSQL=/C/devl/MySQL51
set HB_INC_MYSQL=/C/devl/MySQL51/include


2009/5/20 Szak?ts Viktor <harbour.01@syenar.hu>

> set HB_DIR_MYSQL=/C/Program Files/MySQL/MySQL Server 5.1
>> set HB_INC_MYSQL=/C/Program Files/MySQL/MySQL Server 5.1/include
>> but i not have ssdmysql.lib created only sddodbc.lib
>>
>
> You probably still didn't read INSTALL. First, above
> kind of MinGW usage is now obsolete and not recommended,
> secondly there are spaces in the dirspec, which was
> never tested and I bet it won't work, INSTALL recommends
> not to use any. Using space and MinGW dir notation is
> an almost 100% sure way to screw your setup.
>
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090520/afb77476/attachment-0001.html
From dbtopas at dbtopas.lt  Wed May 20 13:25:23 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed May 20 13:27:22 2009
Subject: [Harbour] How create sdd*.lib during harbour compilation?
In-Reply-To: <4BD22FBE-8C36-474B-9567-9F197E364184@syenar.hu>
References: <609353e70905200739t4485b67bne71f487bd8034ee2@mail.gmail.com>	<4A1416B8.1070307@dbtopas.lt>	<609353e70905200759t2c6a022cm974e076b2dc38592@mail.gmail.com>
	<4BD22FBE-8C36-474B-9567-9F197E364184@syenar.hu>
Message-ID: <4A143D03.6080607@dbtopas.lt>

Hi,


>> Where found odbc dir/HB_INC_ODBC  for mingw,msvc8?
> 
> This envvar isn't needed for Windows systems.

Doesn't?

----------------------------
HB_INC_ODBC_OK += $(foreach d, $(HB_INC_ODBC), $(if $(wildcard 
$(d)/sql.h),$(d),))

ifneq ($(strip $(HB_INC_ODBC_OK)),)

HB_USER_CFLAGS += $(foreach d, $(HB_INC_ODBC_OK), -I$(d))

C_SOURCES=\
	odbcdd.c \

include $(TOP)$(ROOT)config/lib.cf
else
include $(TOP)$(ROOT)config/none.cf
endif
----------------------------


Regards,
Mindaugas
From qiinfo at ig.com.br  Wed May 20 13:31:43 2009
From: qiinfo at ig.com.br (Rossine)
Date: Wed May 20 13:31:48 2009
Subject: [Harbour] Errors with 11090
Message-ID: <23640020.post@talk.nabble.com>


Hello,

I see this errors with release 11090 when compiling with MSVC:

[ERRORS]

 cannot convert parameter 2 from 'const IID *' to 'const IID &'
        Reason: cannot convert from 'const IID *' to 'const IID'
        No constructor could take the source type, or constructor overload
resol
ution was ambiguous
../../wvgsink.c(981) : error C2664: 'HRESULT (IUnknown *,const IID &,void
**)' :
 cannot convert parameter 2 from 'const IID *' to 'const IID &'
        Reason: cannot convert from 'const IID *' to 'const IID'
        No constructor could take the source type, or constructor overload
resol
ution was ambiguous
../../wvgsink.c(1024) : error C2664: 'HRESULT (IUnknown *,const IID &,void
**)'
: cannot convert parameter 2 from 'const IID *' to 'const IID &'
        Reason: cannot convert from 'const IID *' to 'const IID'
        No constructor could take the source type, or constructor overload
resol
ution was ambiguous
make.exe[3]: *** [wvgsink.obj] Error 2
make.exe[3]: Leaving directory `C:/harbour/contrib/gtwvg/win/msvc'
make.exe[2]: *** [descend] Error 2
make.exe[2]: Leaving directory `C:/harbour/contrib/gtwvg'
make.exe[1]: *** [gtwvg.inst] Error 2
make.exe[1]: Leaving directory `C:/harbour/contrib'
make.exe: *** [contrib.inst] Error 2

[ENDERRORS]

Best Regards,

Rossine.


-- 
View this message in context: http://www.nabble.com/Errors-with-11090-tp23640020p23640020.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From qiinfo at ig.com.br  Wed May 20 13:38:12 2009
From: qiinfo at ig.com.br (Rossine)
Date: Wed May 20 13:38:17 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11090] trunk/harbour
In-Reply-To: <E1M6nZw-0005qc-IB@c3vjzd1.ch3.sourceforge.com>
References: <E1M6nZw-0005qc-IB@c3vjzd1.ch3.sourceforge.com>
Message-ID: <23640089.post@talk.nabble.com>


Hello,

Compiling my application with this release, i see this errors:

[ERRORS]
hbmk: Autodetected architecture: win                                             
hbmk: Using Harbour: C:\hrb_bcc\bin C:\hrb_bcc\include C:\hrb_bcc\lib            
      C:\hrb_bcc\lib                                                             
hbmk: Using C compiler: c:\bcc55\bin\bcc32.exe                                   
hbmk: Processing configuration: C:\hrb_bcc\bin\hbmk.cfg                          
hbmk: Processing: QISTART.HBP                                                    
hbmk: Processing: qistart.hbp                                                    
hbmk: Harbour compiler command (internal):                                       
C:\hrb_bcc\bin\harbour.exe -n2 qistart -n -iC:\hrb_bcc\include
hbmk: Resource compiler command:                                                 
brcc32.exe -IC:\hrb_bcc\include QISTART.rc -foQISTART.res
Borland Resource Compiler  Version 5.40
Copyright (c) 1990, 1999 Inprise Corporation.  All rights reserved.
hbmk: C compiler command:                                                        
bcc32.exe -c -q -tWM -d -6 -O2 -OS -Ov -Oi -Oc -DHB_GC_AUTO -tW
-IC:\hrb_bcc\include qistart.c C:\TMP\hbmk_ys4xau.c
qistart.c:
C:\TMP\hbmk_ys4xau.c:
hbmk: Linker command:                                                            
ilink32.exe @C:\TMP\wwkyae.lnk
hbmk: Linker script:                                                             
-Gn -Tpe -L"c:\bcc55\Lib\PSDK\;C:\hrb_bcc\lib"  -aa c0w32.obj qistart.obj
hbmk_ys4xau.obj, qistart.exe, nul, ..\geral\qilib.lib ..\btnget\btnget.lib
\fwh\lib\fiveh.lib \fwh\lib\fivehc.lib biomet\grfingeB.lib
\sqllib\lib\libpq.lib \sqllib\lib\sqllib.lib hbwin.lib hbct.lib xhb.lib
rddads.lib ads\ace32.lib c:\bcc55\lib\psdk\msimg32.lib hbcpage.lib
hblang.lib hbcommon.lib hbcplr.lib hbdebug.lib hbvm.lib hbrdd.lib
hbusrrdd.lib hbuddall.lib hbhsx.lib hbsix.lib rddntx.lib rddnsx.lib
rddcdx.lib rddfpt.lib hbrtl.lib hbpp.lib hbmacro.lib hbextern.lib gtcgi.lib
gtpca.lib gtstd.lib gtwin.lib gtwvt.lib gtgui.lib hbpcre.lib hbzlib.lib
kernel32.lib user32.lib gdi32.lib advapi32.lib ws2_32.lib winspool.lib
comctl32.lib comdlg32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib
mpr.lib winmm.lib mapi32.lib imm32.lib msimg32.lib import32.lib cw32mt.lib,,
QISTART.res
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Error: Unresolved external '_HB_FUN_OLEERRORTEXT' referenced from
C:\HRB_BCC\LIB\HBWIN.LIB|legacyc
Error: Unresolved external '_HB_FUN_HB_OLEAUTO' referenced from
C:\HRB_BCC\LIB\HBWIN.LIB|legacyc
Error: Unresolved external '_HB_FUN_CREATEOBJECT' referenced from
C:\QI\WIN\OBJETOS\GERAL\QILIB.LIB|qilib
[ENDERRORS]

How to fix this ?

Best Regards,

Rossine.

-- 
View this message in context: http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-11090--trunk-harbour-tp23637661p23640089.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Wed May 20 13:53:05 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May 20 13:53:11 2009
Subject: [Harbour] How can create a library with hbmk2?
In-Reply-To: <0C76B3AD-FDC4-44B7-87F3-560D51E10F3D@syenar.hu>
References: <4A131833.3060505@ec-red.com>
	<609353e70905191403n649621dexa4075ed945f64db1@mail.gmail.com>
	<4A13217E.2060005@ec-red.com> <4A1334E0.8050103@zen.co.uk>
	<18d502870905191554s599480d0x255b743a097a4fe9@mail.gmail.com>
	<4A140C7A.3020201@ec-red.com>
	<18d502870905200906i7a2cd285ldc97a6969938ae06@mail.gmail.com>
	<4A1439F7.1040301@ec-red.com>
	<0C76B3AD-FDC4-44B7-87F3-560D51E10F3D@syenar.hu>
Message-ID: <18d502870905201053n29a2c5b3t8e6aa52c8e4ab2fb@mail.gmail.com>

On Wed, May 20, 2009 at 7:24 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:
> I'll fix it, it gets confused about uppercase .PRG
> when double checking the extension to workaround
> DIRECTORY() bug.

To be more precise it isn't a bug in DIRECTORY() but it's
rather some strange property of Windows FileFind API,
we should probably work it around in core code, to avoid
doing such ugly hacks on app level.

Currently on Windows DIRECTORY( "*.ext" ) will return
"*.ext*". This only happens when the extension is three
chars long. I just can guess this is another weird attempt
by MS to solve some compatibility issues.

Anyone knowing more about this phenomenon?

Brgds,
Viktor
From harbour.01 at syenar.hu  Wed May 20 14:08:32 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed May 20 14:08:40 2009
Subject: [Harbour] How create sdd*.lib during harbour compilation?
In-Reply-To: <4A143D03.6080607@dbtopas.lt>
References: <609353e70905200739t4485b67bne71f487bd8034ee2@mail.gmail.com>	<4A1416B8.1070307@dbtopas.lt>	<609353e70905200759t2c6a022cm974e076b2dc38592@mail.gmail.com>
	<4BD22FBE-8C36-474B-9567-9F197E364184@syenar.hu>
	<4A143D03.6080607@dbtopas.lt>
Message-ID: <8D3A2498-DCAD-451E-82DB-C99BDB95ED3A@syenar.hu>

>>> Where found odbc dir/HB_INC_ODBC  for mingw,msvc8?
>> This envvar isn't needed for Windows systems.
>
> Doesn't?

No, because sql*.h are present in usually one of the
compiler's include dir (next to windows.h), which is by
default on the include dir list.

I never had to use it with any compilers I tested and
I tested all of them :)

[ In fact I didn't know this envvar exist until I saw
your message, but now I've added it to INSTALL. ]

[ svn commit is dead, so it will committed when it
starts to work again. ]

Brgds,
Viktor

From zen25000 at zen.co.uk  Wed May 20 14:54:37 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Wed May 20 14:53:55 2009
Subject: [Harbour] rpm builds fail
Message-ID: <4A1451ED.3040701@zen.co.uk>

[baz@jackodesktop harbour]$ ./mpkg_rpm_from_svn.sh
Checked out revision 11090.
--without: unknown option
[baz@jackodesktop harbour]$

[baz@jackodesktop harbour]$ ./mpkg_rpm.sh
--without: unknown option
[baz@jackodesktop harbour]$

Any ideas?


From jarabal at gmail.com  Wed May 20 15:15:53 2009
From: jarabal at gmail.com (Xavi)
Date: Wed May 20 15:18:16 2009
Subject: [Harbour] SET PRINTER TO or Set( _SET_PRINTFILE,
 "" ) activate the default printer.
Message-ID: <4A1456E9.2000604@gmail.com>

Procedure Main()

        SET PRINTER TO out.txt
        SET DEVICE TO PRINTER
        @ 0,0 say 'This print in out.txt'
        SET PRINTER TO  // or Set( _SET_PRINTFILE, "" ) Activate default printer in Clipper
        @ 0,0 say 'This *does not* print in default printer ???'
        SET DEVICE TO SCREEN
        @ 0,0 say 'Ok ?'
        Wait

return

I thought that was resolved because the issue comes with any Clipper program that turn off printing in files but ...
Please update the repository. Thanks.

Xavi


-------------- next part --------------
A non-text attachment was scrubbed...
Name: set.c.zip
Type: application/x-zip-compressed
Size: 13350 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090520/5f0ec163/set.c-0001.bin
From rodrmigu at gmail.com  Wed May 20 15:18:58 2009
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Wed May 20 15:19:05 2009
Subject: [Harbour] Error trying to compile harbour with bcc55
Message-ID: <80b05d460905201218s30216bf2oc1be5afa23c97907@mail.gmail.com>

All,
I'm currently using mingw and msvc, but I'm testing harbour with bcc and I
found the error below when trying to compile the harbour from svn. Is BCC
still being supported?

D:\Cvs\harbour>make_gnu.bat install
config/dir.cf:54: *** missing `endef', unterminated `define'.  Stop.
D:\Cvs\harbour>make_gnu.bat install
config/dir.cf:57: *** missing `endif'.  Stop.
D:\Cvs\harbour>


54 comma=,
55 define dep_rule
56 $(subst $(comma),$(2) ,$(subst },$(2),$(subst {,$(2)::|,$(1))))
57 endef

Also, this are my envars:
set HB_COMPILER=bcc
set HB_PATH=D:\Harbour
set HB_INSTALL_PREFIX=%HB_PATH%
set HB_EXTERNALLIBS=no
set PATH=%HB_PATH%\bin;D:\Borland\bcc55\bin;g:\tools;%PATH%

Thanks & Regards,
Rodrigo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090520/bf9f0b7b/attachment.html
From druzus at acn.waw.pl  Wed May 20 15:28:30 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed May 20 15:19:39 2009
Subject: [Harbour] rpm builds fail
In-Reply-To: <4A1451ED.3040701@zen.co.uk>
References: <4A1451ED.3040701@zen.co.uk>
Message-ID: <20090520192830.GA1659@uran.home.aster.pl>

On Wed, 20 May 2009, Barry Jackson wrote:
> [baz@jackodesktop harbour]$ ./mpkg_rpm_from_svn.sh
> Checked out revision 11090.
> --without: unknown option
> [baz@jackodesktop harbour]$
> [baz@jackodesktop harbour]$ ./mpkg_rpm.sh
> --without: unknown option
> [baz@jackodesktop harbour]$
> Any ideas?

Yes. You haven't installed rpmbuild in your system.

best regards,
Przemek
From vszakats at users.sourceforge.net  Wed May 20 15:19:54 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May 20 15:19:59 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11091] trunk/harbour
Message-ID: <E1M6rKU-0003h5-9o@c3vjzd1.ch3.sourceforge.com>

Revision: 11091
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11091&view=rev
Author:   vszakats
Date:     2009-05-20 19:19:45 +0000 (Wed, 20 May 2009)

Log Message:
-----------
2009-05-20 20:02 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Added workaround for DIRECTORY() problem under Windows.
      '*.ext' input files weren't working if the actual filenames
      had different casing (on Windows). Also changed the hack
      to only kick in on Windows platforms, *nixes seems to work
      as expected.
    ; NOTE: This workaround should probably be moved to Harbour
            FileFind API.

  * INSTALL
    + Added HB_INC_ODBC.

  * contrib/hbwin/tests/testole.prg
  * contrib/hbwin/legacyc.c
    * Updated to reflect OLE function name changes.

  * contrib/hbwin/legacyc.c
    + Added GETACTIVEOBJECT(), CREATEOBJECT(), OLEERROR()
      compatibility calls. All of them are simple aliases to
      new OLE function, which means there may be differences
      in behviour. Users will need to adjust them for full
      compatibility.
      However, I'd recommend changing all code to use our
      new OLE functions and classes.

  * contrib/hbwin/Makefile
  + contrib/hbwin/legacy.prg
    * Moved TOLEAUTO() compatibility class to .prg level.
      It's a stub, inheriting from WIN_OLEAUTO. I hope TOLEAUTO
      users will fill it with required compitibility methods.

  ; NOTE: Getting these warnings with bcc:
          Warning W8075 ../../axcore.c 93: Suspicious pointer conversion in function hb_ax_init
          Warning W8075 ../../axcore.c 322: Suspicious pointer conversion in function HB_FUN___AXREGISTERHANDLER

  ; NOTE: Getting these errors with msvc (default C++ mode):
          ../../axcore.c(93) : error C2440: '=' : cannot convert from 'FARPROC' to 'HRESULT (__stdcall *)(HWND,IUnknown **)'
                  This conversion requires a reinterpret_cast, a C-style cast or function-style cast
          ../../axcore.c(146) : error C2143: syntax error : missing ';' before '*'
          ../../axcore.c(146) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
          ../../axcore.c(146) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
          ../../axcore.c(175) : error C2039: 'lpVtbl' : is not a member of 'ISink'
                  ../../axcore.c(145) : see declaration of 'ISink'
          ../../axcore.c(175) : error C2227: left of '->Release' must point to class/struct/union/generic type
          ../../axcore.c(179) : error C2143: syntax error : missing ')' before 'this'
          ../../axcore.c(179) : error C2143: syntax error : missing ';' before 'this'
          ../../axcore.c(179) : error C2059: syntax error : ')'
          ../../axcore.c(180) : error C2143: syntax error : missing ';' before '{'
          ../../axcore.c(180) : error C2447: '{' : missing function header (old-style formal list?)
          [ ...snip... ]
          ../../axcore.c(198) : error C2365: 'Release' : redefinition; previous definition was 'formerly unknown identifier'
          [ ...snip... ]
          ../../axcore.c(282) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
          ../../axcore.c(282) : error C2146: syntax error : missing ';' before identifier 'ISink_Vtbl'
          ../../axcore.c(282) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
          ../../axcore.c(283) : error C2440: 'initializing' : cannot convert from 'HRESULT (__stdcall *)(IDispatch *)' to 'int'
                  There is no context in which this conversion is possible
          ../../axcore.c(284) : error C2078: too many initializers
          ../../axcore.c(322) : error C2039: 'lpVtbl' : is not a member of 'ISink'
                  ../../axcore.c(145) : see declaration of 'ISink'

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/contrib/hbwin/Makefile
    trunk/harbour/contrib/hbwin/legacyc.c
    trunk/harbour/contrib/hbwin/tests/testole.prg
    trunk/harbour/utils/hbmk2/hbmk2.prg

Added Paths:
-----------
    trunk/harbour/contrib/hbwin/legacy.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Wed May 20 15:27:07 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May 20 15:27:12 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11092] trunk/harbour
Message-ID: <E1M6rRT-0004HH-1f@c3vjzd1.ch3.sourceforge.com>

Revision: 11092
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11092&view=rev
Author:   vszakats
Date:     2009-05-20 19:27:06 +0000 (Wed, 20 May 2009)

Log Message:
-----------
2009-05-20 21:25 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/vm/set.c
    ! Applied fix sent by Xavi. Thanks.
      I did a few minor formattings and rename, and did a
      light review, please review further and test. I seem to 
      remember some deeper problems with this feature, 
      reported a while ago on the list.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/vm/set.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Wed May 20 15:33:33 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May 20 15:33:38 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11093] trunk/harbour
Message-ID: <E1M6rXh-0004QY-R6@c3vjzd1.ch3.sourceforge.com>

Revision: 11093
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11093&view=rev
Author:   vszakats
Date:     2009-05-20 19:33:33 +0000 (Wed, 20 May 2009)

Log Message:
-----------
2009-05-20 21:32 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * INSTALL
    + Added typical ("FAQ") error message encountered with old,
      buggy, unsupported GNU Make versions which users seem to
      often use. In case someone would RTFM.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From qiinfo at ig.com.br  Wed May 20 15:50:40 2009
From: qiinfo at ig.com.br (Rossine)
Date: Wed May 20 15:50:47 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11090] trunk/harbour
In-Reply-To: <23640089.post@talk.nabble.com>
References: <E1M6nZw-0005qc-IB@c3vjzd1.ch3.sourceforge.com>
	<23640089.post@talk.nabble.com>
Message-ID: <23642264.post@talk.nabble.com>


Hello,

Works fine Now :)

Thank you very much,

Rossine.

-- 
View this message in context: http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-11090--trunk-harbour-tp23637661p23642264.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dbtopas at dbtopas.lt  Wed May 20 16:57:01 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed May 20 16:58:58 2009
Subject: [Harbour] How create sdd*.lib during harbour compilation?
In-Reply-To: <8D3A2498-DCAD-451E-82DB-C99BDB95ED3A@syenar.hu>
References: <609353e70905200739t4485b67bne71f487bd8034ee2@mail.gmail.com>	<4A1416B8.1070307@dbtopas.lt>	<609353e70905200759t2c6a022cm974e076b2dc38592@mail.gmail.com>	<4BD22FBE-8C36-474B-9567-9F197E364184@syenar.hu>	<4A143D03.6080607@dbtopas.lt>
	<8D3A2498-DCAD-451E-82DB-C99BDB95ED3A@syenar.hu>
Message-ID: <4A146E9D.90404@dbtopas.lt>

Szak?ts Viktor wrote:
>>>> Where found odbc dir/HB_INC_ODBC  for mingw,msvc8?
>>> This envvar isn't needed for Windows systems.
>>
>> Doesn't?
> 
> No, because sql*.h are present in usually one of the
> compiler's include dir (next to windows.h), which is by
> default on the include dir list.
> 
> I never had to use it with any compilers I tested and
> I tested all of them :)

Viktor, perhaps I'm missing something...

Can you look at contrib/rddsql/sddodbc/Makefile

If HB_INC_ODBC is not defined, then HB_INC_ODBC_OK os empty. Then 
sddodbc.lib is not build. The test shows the same logic for me.

Well, this Makefile is added by me using analogy to other sdd* 
makefiles, but contrib/hbodbc also uses the similar logic. I'm not a 
Makefile guru, can you modify this makefile to build sddodbc.lib always 
without adding HB_INC_ODBC. Thanks.


Regards,
Mindaugas

From harbour.01 at syenar.hu  Wed May 20 17:18:27 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May 20 17:18:33 2009
Subject: [Harbour] How create sdd*.lib during harbour compilation?
In-Reply-To: <4A146E9D.90404@dbtopas.lt>
References: <609353e70905200739t4485b67bne71f487bd8034ee2@mail.gmail.com>
	<4A1416B8.1070307@dbtopas.lt>
	<609353e70905200759t2c6a022cm974e076b2dc38592@mail.gmail.com>
	<4BD22FBE-8C36-474B-9567-9F197E364184@syenar.hu>
	<4A143D03.6080607@dbtopas.lt>
	<8D3A2498-DCAD-451E-82DB-C99BDB95ED3A@syenar.hu>
	<4A146E9D.90404@dbtopas.lt>
Message-ID: <18d502870905201418i3ccda115u4a917d98918cf021@mail.gmail.com>

>> I never had to use it with any compilers I tested and
>> I tested all of them :)
>
> Viktor, perhaps I'm missing something...
>
> Can you look at contrib/rddsql/sddodbc/Makefile
>
> If HB_INC_ODBC is not defined, then HB_INC_ODBC_OK os empty. Then
> sddodbc.lib is not build. The test shows the same logic for me.

Yes, you're right I didn't inspect the new Makefile, I was talking
about hbodbc. I think we should copy the exact same logic to
sddodbc, since the dependency is also the same.

> Well, this Makefile is added by me using analogy to other sdd* makefiles,
> but contrib/hbodbc also uses the similar logic. I'm not a Makefile guru, can
> you modify this makefile to build sddodbc.lib always without adding
> HB_INC_ODBC. Thanks.

No problem, I'll do it in next commit.

Brgds,
Viktor
From zen25000 at zen.co.uk  Wed May 20 17:26:41 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Wed May 20 17:25:57 2009
Subject: [Harbour] rpm builds fail
In-Reply-To: <20090520192830.GA1659@uran.home.aster.pl>
References: <4A1451ED.3040701@zen.co.uk>
	<20090520192830.GA1659@uran.home.aster.pl>
Message-ID: <4A147591.90807@zen.co.uk>

Przemyslaw Czerpak wrote:
> 
> Yes. You haven't installed rpmbuild in your system.
> 
> best regards,
> Przemek
> 
Thanks! - sorry abt direct mail - I hit reply!
Regards, Barry
From vszakats at users.sourceforge.net  Wed May 20 17:32:51 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May 20 17:32:58 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11094] trunk/harbour
Message-ID: <E1M6tP9-0003ro-9O@3kljzd1.ch3.sourceforge.com>

Revision: 11094
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11094&view=rev
Author:   vszakats
Date:     2009-05-20 21:32:50 +0000 (Wed, 20 May 2009)

Log Message:
-----------
2009-05-20 23:32 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/rddsql/sddodbc/Makefile
    ! Applied logic from contrib/hbodbc/Makefile.

  * contrib/rddsql/sddodbc/odbcdd.c
    ! Fixed three warnings (2 casts + 1 uninit var) with MSVC.

  ; TOFIX: These errors are shown when trying to compiler in UNICODE mode:
    ../../odbcdd.c(168) : error C2664: 'SQLDriverConnectW' : cannot convert parameter 3 from 'SQLCHAR *' to 'SQLWCHAR *'
    ../../odbcdd.c(204) : error C2664: 'SQLExecDirectW' : cannot convert parameter 2 from 'SQLCHAR *' to 'SQLWCHAR *'
    ../../odbcdd.c(239) : error C2664: 'SQLExecDirectW' : cannot convert parameter 2 from 'SQLCHAR *' to 'SQLWCHAR *'
    ../../odbcdd.c(263) : error C2664: 'SQLDescribeColW' : cannot convert parameter 3 from 'SQLCHAR *' to 'SQLWCHAR *'

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/rddsql/sddodbc/Makefile
    trunk/harbour/contrib/rddsql/sddodbc/odbcdd.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From carozodequilmes at gmail.com  Wed May 20 17:42:11 2009
From: carozodequilmes at gmail.com (CarozoDeQuilmes)
Date: Wed May 20 17:42:16 2009
Subject: [Harbour] Sample of HBQT
Message-ID: <578c73340905201442p367782aeia30e87f6f0927214@mail.gmail.com>

Hi, sorry by my bad english

I need a sample for HBQT with a lot of controls (label, pushbutton,
checkbox, grid, combobox, etc)

Can someone send me some sample?

Thanks and regards
CdQ
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090520/494e5e1f/attachment.html
From druzus at acn.waw.pl  Wed May 20 18:39:11 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed May 20 18:30:26 2009
Subject: [Harbour] How can create a library with hbmk2?
In-Reply-To: <18d502870905201053n29a2c5b3t8e6aa52c8e4ab2fb@mail.gmail.com>
References: <4A131833.3060505@ec-red.com>
	<609353e70905191403n649621dexa4075ed945f64db1@mail.gmail.com>
	<4A13217E.2060005@ec-red.com> <4A1334E0.8050103@zen.co.uk>
	<18d502870905191554s599480d0x255b743a097a4fe9@mail.gmail.com>
	<4A140C7A.3020201@ec-red.com>
	<18d502870905200906i7a2cd285ldc97a6969938ae06@mail.gmail.com>
	<4A1439F7.1040301@ec-red.com>
	<0C76B3AD-FDC4-44B7-87F3-560D51E10F3D@syenar.hu>
	<18d502870905201053n29a2c5b3t8e6aa52c8e4ab2fb@mail.gmail.com>
Message-ID: <20090520223911.GA13295@uran.home.aster.pl>

On Wed, 20 May 2009, Szak?ts Viktor wrote:
> To be more precise it isn't a bug in DIRECTORY() but it's
> rather some strange property of Windows FileFind API,
> we should probably work it around in core code, to avoid
> doing such ugly hacks on app level.
> Currently on Windows DIRECTORY( "*.ext" ) will return
> "*.ext*". This only happens when the extension is three
> chars long. I just can guess this is another weird attempt
> by MS to solve some compatibility issues.
> Anyone knowing more about this phenomenon?

I only guess so it's possible that I'm wrong but AFAIR MS-Win write each
file with two name: full_name and short_name which is in 8.3 format.
Each file with extension longer then 3 bytes after conversion to 8.3
format has as extension first 3 bytes from original extension.
FindFirstFile()/FindNextFile() respects both short and long names
so if you use *.prg pattern then you also see all files which has
prg extension after conversion to 8.3 format.
If I'm right then using longer extensions in MS-Windows is very bad idea
because for many programs only the 1-st three characters will be significant
due to 8.3 aliases created for such names in directories. We should remember
about it in the future.

Now we have the question: Should we accept aliases or not?
In summary these are valid names which match given wild pattern like *.prg.
I guess that in Clipper:
   aeval( directory( "*.prg" ), {|x,i|qout(i,x[1],x[2],x[3],x[4],x[5])} )
also shows the same files though using short 8.3 names.
We can add additional code which will ignore 8.3 aliases and verifying the
results using long file names but the above code will show different list
of files then in Clipper. I'm not MS-Windows users so I should not decide
here. Personally I'd prefer using real names only and ignore aliases but
I do not know how it may interact with real life code in Windows.
If you decide to add such file name verification then it can be quite
easy implemented and I can do that.

best regards,
Przemek
From vailtom at gmail.com  Wed May 20 21:09:24 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Wed May 20 21:09:29 2009
Subject: [Harbour] Error trying to compile harbour with bcc55
In-Reply-To: <80b05d460905201218s30216bf2oc1be5afa23c97907@mail.gmail.com>
References: <80b05d460905201218s30216bf2oc1be5afa23c97907@mail.gmail.com>
Message-ID: <531d7a750905201809m6c0d3920q4bc3a563e30aa5f7@mail.gmail.com>

Download mingw-32-make version 3.81 or later. Check with --version switch.
From vszakats at users.sourceforge.net  Thu May 21 01:47:10 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu May 21 01:47:16 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11095] trunk/harbour
Message-ID: <E1M717W-00088a-Jp@3kljzd1.ch3.sourceforge.com>

Revision: 11095
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11095&view=rev
Author:   vszakats
Date:     2009-05-21 05:47:09 +0000 (Thu, 21 May 2009)

Log Message:
-----------
2009-05-21 07:46 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * config/global.cf
    + Added Make version check and appropriate error message in case 
      wrong version found.

  * ChangeLog
    ! Typos.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/global.cf


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Thu May 21 01:51:24 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 21 01:51:30 2009
Subject: [Harbour] How can create a library with hbmk2?
In-Reply-To: <20090520223911.GA13295@uran.home.aster.pl>
References: <4A131833.3060505@ec-red.com> <4A13217E.2060005@ec-red.com>
	<4A1334E0.8050103@zen.co.uk>
	<18d502870905191554s599480d0x255b743a097a4fe9@mail.gmail.com>
	<4A140C7A.3020201@ec-red.com>
	<18d502870905200906i7a2cd285ldc97a6969938ae06@mail.gmail.com>
	<4A1439F7.1040301@ec-red.com>
	<0C76B3AD-FDC4-44B7-87F3-560D51E10F3D@syenar.hu>
	<18d502870905201053n29a2c5b3t8e6aa52c8e4ab2fb@mail.gmail.com>
	<20090520223911.GA13295@uran.home.aster.pl>
Message-ID: <18d502870905202251y36db4192x2d42aacbfb388e7b@mail.gmail.com>

> I only guess so it's possible that I'm wrong but AFAIR MS-Win write each
> file with two name: full_name and short_name which is in 8.3 format.
> Each file with extension longer then 3 bytes after conversion to 8.3
> format has as extension first 3 bytes from original extension.
> FindFirstFile()/FindNextFile() respects both short and long names
> so if you use *.prg pattern then you also see all files which has
> prg extension after conversion to 8.3 format.
> If I'm right then using longer extensions in MS-Windows is very bad idea
> because for many programs only the 1-st three characters will be significant
> due to 8.3 aliases created for such names in directories. We should remember
> about it in the future.
>
> Now we have the question: Should we accept aliases or not?
> In summary these are valid names which match given wild pattern like *.prg.
> I guess that in Clipper:
> ? aeval( directory( "*.prg" ), {|x,i|qout(i,x[1],x[2],x[3],x[4],x[5])} )
> also shows the same files though using short 8.3 names.
> We can add additional code which will ignore 8.3 aliases and verifying the
> results using long file names but the above code will show different list
> of files then in Clipper. I'm not MS-Windows users so I should not decide
> here. Personally I'd prefer using real names only and ignore aliases but
> I do not know how it may interact with real life code in Windows.
> If you decide to add such file name verification then it can be quite
> easy implemented and I can do that.

Thanks. I did some more tests and even 'dir' command works like this,
and common things like file open dialog, so I'm not really sure what
we're dealing with here. Maybe this is something normal on Windows
which we have to get used to. For sure it makes it behave differently
than other platforms. Plus I'm not sure how *.??? masks should be
handled (seems that in this case '???' counts as '*').

Any input from other Windows users?

Brgds,
Viktor
From vszakats at users.sourceforge.net  Thu May 21 02:54:06 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu May 21 02:54:11 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11096] trunk/harbour
Message-ID: <E1M72AI-0005fO-83@d5vjzd1.ch3.sourceforge.com>

Revision: 11096
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11096&view=rev
Author:   vszakats
Date:     2009-05-21 06:54:01 +0000 (Thu, 21 May 2009)

Log Message:
-----------
2009-05-21 08:53 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + Added automatic configuration for bcc compiler. This kicks in 
      for bcc installations missing bcc32.cfg or ilink32.cfg next to 
      bcc32.exe. In this case Lib/Include dir will automatically
      added to the lib/include lists by hbmk2. This means that
      hbmk2 will work with bare bcc installations without doing any
      manual configuration.

  * config/global.cf
    + Added link to blog dealing with GNU Make.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/global.cf
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From M.Horodyski at pzuzycie.com.pl  Thu May 21 02:55:50 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu May 21 02:55:59 2009
Subject: [Harbour] Upper\Lower nationals chars.
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9502356CD3@PINK.zycie.pzu>

I don't can compile :

hbmk2 gtchars

from tests folder. I have this error list :

Error! E2028: hb_vmProcessSymbolsEx is an undefined reference
Error! E2028: hb_vmExecute is an undefined reference
Error! E2028: HB_FUN_EMPTY is an undefined reference
Error! E2028: HB_FUN_UPPER is an undefined reference
Error! E2028: HB_FUN_HB_GTINFO is an undefined reference
Error! E2028: HB_FUN_HB_SETTERMCP is an undefined reference
Error! E2028: HB_FUN_QOUT is an undefined reference
Error! E2028: HB_FUN_OS is an undefined reference
Error! E2028: HB_FUN_VERSION is an undefined reference
Error! E2028: HB_FUN_DATE is an undefined reference
Error! E2028: HB_FUN_TIME is an undefined reference
Error! E2028: HB_FUN_HB_GTVERSION is an undefined reference
Error! E2028: HB_FUN_DISPOUT is an undefined reference
Error! E2028: HB_FUN_CHR is an undefined reference
Error! E2028: HB_FUN_INKEY is an undefined reference
Error! E2028: HB_FUN_ALERT is an undefined reference
Error! E2028: HB_FUN_ROW is an undefined reference
Error! E2028: HB_FUN_COL is an undefined reference
Error! E2028: HB_FUN_DISPBOX is an undefined reference
Error! E2028: HB_FUN_SUBSTR is an undefined reference
Error! E2028: HB_FUN_SETPOS is an undefined reference
Error! E2028: HB_FUN_LEN is an undefined reference
Error! E2028: HB_FUN_HB_CODEPAGE_PLMAZ is an undefined referenc
Error! E2028: HB_FUN_HB_CODEPAGE_PLISO is an undefined referenc
Error! E2028: HB_FUN_HB_CODEPAGE_PL852 is an undefined referenc
Error! E2028: HB_FUN_HB_CODEPAGE_PLWIN is an undefined referenc


In my app not work upper/lower function :

Function Main()
Cls

Request hb_langSelect, hb_langName, NationMsg, HB_LANGMESSAGE
Request hb_lang_pl852, hb_lang_plMAZ, hb_lang_plWIN, hb_lang_plISO


hb_LangSelect(  'PL852')
hb_SetCodePage( 'PL852')

// Set( _SET_OSCODEPAGE)

? upper( '?????????')

inKey( 0)
Return nil

in xHarbour was :
Request hb_codepage_pl852, hb_codepage_plMAZ, hb_codepage_plWIN, hb_codepage_plISO

but in Harbour this request is wrong. How can I get the correct upper action ?

Regards,
Marek Horodyski
From harbour.01 at syenar.hu  Thu May 21 03:06:02 2009
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu May 21 03:06:15 2009
Subject: [Harbour] Upper\Lower nationals chars.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C9502356CD3@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C9502356CD3@PINK.zycie.pzu>
Message-ID: <B5B9F63A-BDF8-4C19-9810-5E8ED8EBA29A@syenar.hu>

Probably you're mixing libs built with different compilers,
or you have an incomplete Harbour build maybe.

Here it works ok.

Brgds,
Viktor

On 2009.05.21., at 8:55, Horodyski Marek (PZUZ) wrote:

> I don't can compile :
>
> hbmk2 gtchars
>
> from tests folder. I have this error list :
>
> Error! E2028: hb_vmProcessSymbolsEx is an undefined reference
> Error! E2028: hb_vmExecute is an undefined reference
> Error! E2028: HB_FUN_EMPTY is an undefined reference
> Error! E2028: HB_FUN_UPPER is an undefined reference
> Error! E2028: HB_FUN_HB_GTINFO is an undefined reference
> Error! E2028: HB_FUN_HB_SETTERMCP is an undefined reference
> Error! E2028: HB_FUN_QOUT is an undefined reference
> Error! E2028: HB_FUN_OS is an undefined reference
> Error! E2028: HB_FUN_VERSION is an undefined reference
> Error! E2028: HB_FUN_DATE is an undefined reference
> Error! E2028: HB_FUN_TIME is an undefined reference
> Error! E2028: HB_FUN_HB_GTVERSION is an undefined reference
> Error! E2028: HB_FUN_DISPOUT is an undefined reference
> Error! E2028: HB_FUN_CHR is an undefined reference
> Error! E2028: HB_FUN_INKEY is an undefined reference
> Error! E2028: HB_FUN_ALERT is an undefined reference
> Error! E2028: HB_FUN_ROW is an undefined reference
> Error! E2028: HB_FUN_COL is an undefined reference
> Error! E2028: HB_FUN_DISPBOX is an undefined reference
> Error! E2028: HB_FUN_SUBSTR is an undefined reference
> Error! E2028: HB_FUN_SETPOS is an undefined reference
> Error! E2028: HB_FUN_LEN is an undefined reference
> Error! E2028: HB_FUN_HB_CODEPAGE_PLMAZ is an undefined referenc
> Error! E2028: HB_FUN_HB_CODEPAGE_PLISO is an undefined referenc
> Error! E2028: HB_FUN_HB_CODEPAGE_PL852 is an undefined referenc
> Error! E2028: HB_FUN_HB_CODEPAGE_PLWIN is an undefined referenc
>
>
> In my app not work upper/lower function :
>
> Function Main()
> Cls
>
> Request hb_langSelect, hb_langName, NationMsg, HB_LANGMESSAGE
> Request hb_lang_pl852, hb_lang_plMAZ, hb_lang_plWIN, hb_lang_plISO
>
>
> hb_LangSelect(  'PL852')
> hb_SetCodePage( 'PL852')
>
> // Set( _SET_OSCODEPAGE)
>
> ? upper( '?????????')
>
> inKey( 0)
> Return nil
>
> in xHarbour was :
> Request hb_codepage_pl852, hb_codepage_plMAZ, hb_codepage_plWIN,  
> hb_codepage_plISO
>
> but in Harbour this request is wrong. How can I get the correct  
> upper action ?
>
> Regards,
> Marek Horodyski
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Thu May 21 04:33:24 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May 21 04:24:37 2009
Subject: [Harbour] How can create a library with hbmk2?
In-Reply-To: <18d502870905202251y36db4192x2d42aacbfb388e7b@mail.gmail.com>
References: <4A13217E.2060005@ec-red.com> <4A1334E0.8050103@zen.co.uk>
	<18d502870905191554s599480d0x255b743a097a4fe9@mail.gmail.com>
	<4A140C7A.3020201@ec-red.com>
	<18d502870905200906i7a2cd285ldc97a6969938ae06@mail.gmail.com>
	<4A1439F7.1040301@ec-red.com>
	<0C76B3AD-FDC4-44B7-87F3-560D51E10F3D@syenar.hu>
	<18d502870905201053n29a2c5b3t8e6aa52c8e4ab2fb@mail.gmail.com>
	<20090520223911.GA13295@uran.home.aster.pl>
	<18d502870905202251y36db4192x2d42aacbfb388e7b@mail.gmail.com>
Message-ID: <20090521083324.GA2896@uran.home.aster.pl>

On Thu, 21 May 2009, Szak?ts Viktor wrote:
> > I only guess so it's possible that I'm wrong but AFAIR MS-Win write each
> > file with two name: full_name and short_name which is in 8.3 format.
> > Each file with extension longer then 3 bytes after conversion to 8.3
> > format has as extension first 3 bytes from original extension.
> > FindFirstFile()/FindNextFile() respects both short and long names
> > so if you use *.prg pattern then you also see all files which has
> > prg extension after conversion to 8.3 format.
> > If I'm right then using longer extensions in MS-Windows is very bad idea
> > because for many programs only the 1-st three characters will be significant
> > due to 8.3 aliases created for such names in directories. We should remember
> > about it in the future.
> > Now we have the question: Should we accept aliases or not?
> > In summary these are valid names which match given wild pattern like *.prg.
> > I guess that in Clipper:
> > ? aeval( directory( "*.prg" ), {|x,i|qout(i,x[1],x[2],x[3],x[4],x[5])} )
> > also shows the same files though using short 8.3 names.
> > We can add additional code which will ignore 8.3 aliases and verifying the
> > results using long file names but the above code will show different list
> > of files then in Clipper. I'm not MS-Windows users so I should not decide
> > here. Personally I'd prefer using real names only and ignore aliases but
> > I do not know how it may interact with real life code in Windows.
> > If you decide to add such file name verification then it can be quite
> > easy implemented and I can do that.
> Thanks. I did some more tests and even 'dir' command works like this,
> and common things like file open dialog, so I'm not really sure what

Exactly. It has to if I'm right and the above DIR behavior confirms
that I'm. For each file with extension longer then 3 characters Windows
create alias in 8.3 form using as extension 1-st three characters from
original extension and such aliases are respected by directory scan
functions.

> we're dealing with here. Maybe this is something normal on Windows
> which we have to get used to. For sure it makes it behave differently
> than other platforms. Plus I'm not sure how *.??? masks should be
> handled (seems that in this case '???' counts as '*').
> Any input from other Windows users?

It's not important what type of wildcards you will use.
It's only important how looks 8.3 bytes alias crated for long file name
because such aliases are significant for directory scan functions.
AFAIR Windows7 allows to disable creating aliases for chosen volumes and
probably it will eliminate such effect.

best regards,
Przemek
From druzus at acn.waw.pl  Thu May 21 04:49:24 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May 21 04:40:38 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11092] trunk/harbour
In-Reply-To: <E1M6rRT-0004HH-1f@c3vjzd1.ch3.sourceforge.com>
References: <E1M6rRT-0004HH-1f@c3vjzd1.ch3.sourceforge.com>
Message-ID: <20090521084924.GA12910@uran.home.aster.pl>

On Wed, 20 May 2009, vszakats@users.sourceforge.net wrote:
> Log Message:
> -----------
> 2009-05-20 21:25 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * source/vm/set.c
>     ! Applied fix sent by Xavi. Thanks.
>       I did a few minor formattings and rename, and did a
>       light review, please review further and test. I seem to 
>       remember some deeper problems with this feature, 
>       reported a while ago on the list.

The above fix introduce very serious problem.
Now there is no way to close printer file handle.
In *nixes it means that to each harbour application lpr process
is attached which waiting for printer input and user cannot disable/
close it. In other OS-es it means that some device like "PRN" or "LPT1"
is still open. If OS forces exclusive mode for such resources then
only one application can print.
In summary from small problem we have much bigger one ;-)
It has to be written in different way. I'll try to make it ASAP.
Please only test it.

best regards,
Przemek
From M.Horodyski at pzuzycie.com.pl  Thu May 21 04:40:33 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu May 21 04:40:44 2009
Subject: [Harbour] Upper\Lower nationals chars.
In-Reply-To: <B5B9F63A-BDF8-4C19-9810-5E8ED8EBA29A@syenar.hu>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9502356D3F@PINK.zycie.pzu>

>-----Original Message-----
>From: Szak?ts Viktor [mailto:harbour.01@syenar.hu] 
>Sent: Thursday, May 21, 2009 9:06 AM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] Upper\Lower nationals chars.
>
>Probably you're mixing libs built with different compilers, or 
>you have an incomplete Harbour build maybe.
>
>Here it works ok.
>
>Brgds,
>Viktor

Strange. You are right when I'm in work, when I'm in home, no ;)

Regards,
Marek Horodyski
From harbour.01 at syenar.hu  Thu May 21 04:46:26 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu May 21 04:46:36 2009
Subject: [Harbour] How can create a library with hbmk2?
In-Reply-To: <20090521083324.GA2896@uran.home.aster.pl>
References: <4A13217E.2060005@ec-red.com> <4A1334E0.8050103@zen.co.uk>
	<18d502870905191554s599480d0x255b743a097a4fe9@mail.gmail.com>
	<4A140C7A.3020201@ec-red.com>
	<18d502870905200906i7a2cd285ldc97a6969938ae06@mail.gmail.com>
	<4A1439F7.1040301@ec-red.com>
	<0C76B3AD-FDC4-44B7-87F3-560D51E10F3D@syenar.hu>
	<18d502870905201053n29a2c5b3t8e6aa52c8e4ab2fb@mail.gmail.com>
	<20090520223911.GA13295@uran.home.aster.pl>
	<18d502870905202251y36db4192x2d42aacbfb388e7b@mail.gmail.com>
	<20090521083324.GA2896@uran.home.aster.pl>
Message-ID: <4039D6C0-7C3F-4673-8B3D-DDACA7634D34@syenar.hu>

>>>
>> Thanks. I did some more tests and even 'dir' command works like this,
>> and common things like file open dialog, so I'm not really sure what
>
> Exactly. It has to if I'm right and the above DIR behavior confirms
> that I'm. For each file with extension longer then 3 characters  
> Windows
> create alias in 8.3 form using as extension 1-st three characters from
> original extension and such aliases are respected by directory scan
> functions.
>
>> we're dealing with here. Maybe this is something normal on Windows
>> which we have to get used to. For sure it makes it behave differently
>> than other platforms. Plus I'm not sure how *.??? masks should be
>> handled (seems that in this case '???' counts as '*').
>> Any input from other Windows users?
>
> It's not important what type of wildcards you will use.
> It's only important how looks 8.3 bytes alias crated for long file  
> name
> because such aliases are significant for directory scan functions.
> AFAIR Windows7 allows to disable creating aliases for chosen volumes  
> and
> probably it will eliminate such effect.

Okay, I'd say let's leave it at that. I'm thinking to
remove this hack from hbmk2, as I've found that by renaming
.prg to .prg.ext it can still be excluded from *.prg
mask. This is a realistic compromise.

Many thanks for your input.

Brgds,
Viktor

From M.Horodyski at pzuzycie.com.pl  Thu May 21 04:54:22 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu May 21 04:54:29 2009
Subject: [Harbour] Upper\Lower nationals chars.
In-Reply-To: <B5B9F63A-BDF8-4C19-9810-5E8ED8EBA29A@syenar.hu>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9502356D47@PINK.zycie.pzu>

>-----Original Message-----
>From: Szak?ts Viktor [mailto:harbour.01@syenar.hu] 
>Sent: Thursday, May 21, 2009 9:06 AM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] Upper\Lower nationals chars.
>
>Probably you're mixing libs built with different compilers, or 
>you have an incomplete Harbour build maybe.
>
>Here it works ok.
>
>Brgds,
>Viktor

More. I have build from terminal prompt big app ( no small test) with hbmk2, and this app is smaller than from batch file and now all is compiled and app corretly work :)
We should write HBMK2!

Thx to HBMK2,
Marek Horodyski
From druzus at acn.waw.pl  Thu May 21 05:15:04 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May 21 05:06:10 2009
Subject: [Harbour] How can create a library with hbmk2?
In-Reply-To: <4039D6C0-7C3F-4673-8B3D-DDACA7634D34@syenar.hu>
References: <18d502870905191554s599480d0x255b743a097a4fe9@mail.gmail.com>
	<4A140C7A.3020201@ec-red.com>
	<18d502870905200906i7a2cd285ldc97a6969938ae06@mail.gmail.com>
	<4A1439F7.1040301@ec-red.com>
	<0C76B3AD-FDC4-44B7-87F3-560D51E10F3D@syenar.hu>
	<18d502870905201053n29a2c5b3t8e6aa52c8e4ab2fb@mail.gmail.com>
	<20090520223911.GA13295@uran.home.aster.pl>
	<18d502870905202251y36db4192x2d42aacbfb388e7b@mail.gmail.com>
	<20090521083324.GA2896@uran.home.aster.pl>
	<4039D6C0-7C3F-4673-8B3D-DDACA7634D34@syenar.hu>
Message-ID: <20090521091504.GA12882@uran.home.aster.pl>

On Thu, 21 May 2009, Szak?ts Viktor wrote:
> Okay, I'd say let's leave it at that. I'm thinking to
> remove this hack from hbmk2, as I've found that by renaming
> .prg to .prg.ext it can still be excluded from *.prg
> mask. This is a realistic compromise.

What means that windows creates and extension in 8.3 file name alias
from the last extension in long file name.
I guess that if you create file 'filename.prg.extension' then it can
be seen as *.ext but not as *.prg
I think that removing the hack from hbmk2 is good idea.
If we want to ignore aliases in directory scan code then
we should make it inside hb_fsFind*() function.

best regards,
Przemek
From druzus at users.sourceforge.net  Thu May 21 05:10:42 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Thu May 21 05:10:48 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11097] trunk/harbour
Message-ID: <E1M74IU-0006UA-U1@bj8yhf1.ch3.sourceforge.com>

Revision: 11097
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11097&view=rev
Author:   druzus
Date:     2009-05-21 09:10:41 +0000 (Thu, 21 May 2009)

Log Message:
-----------
2009-05-21 11:19 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/filebuf.c
    ! refuse to share file handles if they were open in different mode
      TODO: add support for keeping more then one handle for single file
            open and allow such combinations.

  * harbour/source/rtl/hbffind.c
    % optimized *nix version of hb_fsFind*()

  * harbour/utils/hbmk2/hbmk2.prg
    ! fixed compilation on non Windows platforms (unused variable warning)

  * harbour/include/hbset.h
  * harbour/source/vm/set.c
    + added new function hb_setGetPrinterHandle() which allows to open
      closed printer port
    ! do not force opening default port after SET PRINTER TO ""
      but delay the initialization untill other code does not call
      hb_setGetPrinterHandle()
    ! fixed filename returned by _SET_PRINTFILE, _SET_ALTFILE, _SET_EXTRAFILE
    ! fixed dpossible resource leaks whne _SET_*FILE is called recurisvely
      for user error block
    ! fixed _SET_*FILE settings to not accept files which cannot be open
      (just like in Clipper)

  * harbour/source/rtl/console.c
    * use hb_setGetPrinterHandle() to access printer handler

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/include/hbset.h
    trunk/harbour/source/rtl/console.c
    trunk/harbour/source/rtl/filebuf.c
    trunk/harbour/source/rtl/hbffind.c
    trunk/harbour/source/vm/set.c
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Thu May 21 06:12:51 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 21 06:12:58 2009
Subject: [Harbour] How can create a library with hbmk2?
In-Reply-To: <20090521091504.GA12882@uran.home.aster.pl>
References: <18d502870905191554s599480d0x255b743a097a4fe9@mail.gmail.com>
	<18d502870905200906i7a2cd285ldc97a6969938ae06@mail.gmail.com>
	<4A1439F7.1040301@ec-red.com>
	<0C76B3AD-FDC4-44B7-87F3-560D51E10F3D@syenar.hu>
	<18d502870905201053n29a2c5b3t8e6aa52c8e4ab2fb@mail.gmail.com>
	<20090520223911.GA13295@uran.home.aster.pl>
	<18d502870905202251y36db4192x2d42aacbfb388e7b@mail.gmail.com>
	<20090521083324.GA2896@uran.home.aster.pl>
	<4039D6C0-7C3F-4673-8B3D-DDACA7634D34@syenar.hu>
	<20090521091504.GA12882@uran.home.aster.pl>
Message-ID: <18d502870905210312i228e76c8nb23c10a6a22b54cd@mail.gmail.com>

> What means that windows creates and extension in 8.3 file name alias
> from the last extension in long file name.
> I guess that if you create file 'filename.prg.extension' then it can
> be seen as *.ext but not as *.prg

Exactly.

> I think that removing the hack from hbmk2 is good idea.
> If we want to ignore aliases in directory scan code then
> we should make it inside hb_fsFind*() function.

I agree, I'll commit this change to hbmk2, we can later
think about readding something to core. I hope some
other Windows users will comment on this, for me this
Windows feature caused some problems already, and
may also cause strange platform differences. I'd surely
not expect *.extension to be returned when I'm looking
for *.ext. It was a surprise which I had to find out the hard
way.

Brgds,
Viktor
From vszakats at users.sourceforge.net  Thu May 21 06:24:58 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu May 21 06:25:03 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11098] trunk/harbour
Message-ID: <E1M75SM-00066U-EF@dn4whf1.ch3.sourceforge.com>

Revision: 11098
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11098&view=rev
Author:   vszakats
Date:     2009-05-21 10:24:57 +0000 (Thu, 21 May 2009)

Log Message:
-----------
2009-05-21 12:24 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    - Removed file extension retaining hack for win platforms.
      Please be aware that *.prg means *.prg* on Windows platforms.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Thu May 21 07:56:52 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Thu May 21 07:56:57 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11099] trunk/harbour
Message-ID: <E1M76tI-0004bR-9m@d5vjzd1.ch3.sourceforge.com>

Revision: 11099
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11099&view=rev
Author:   druzus
Date:     2009-05-21 11:56:51 +0000 (Thu, 21 May 2009)

Log Message:
-----------
2009-05-21 14:05 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/memvars.c
    * modified __mvDbgInfo():
      - accept as 1-st parameter also  HB_MV_PRIVATE_LOCAL and
        HB_MV_PRIVATE_GLOBAL values
      - changed parameters meaning now when less then 3 parameters is
        given this function returns number of variables and the second
        parameter is the call stack level. Memvar value and optionally
        name is returned only if 3 or more parameters is given.
        3-rd party code which used this function with two parameters
        has to be updated.

  * harbour/source/debug/debugger.prg
    * mark non local private variables in monitor as "Private^" (with "^")
    * do not show public and private variables hidden by other private
      declarations

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/debug/debugger.prg
    trunk/harbour/source/vm/memvars.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bedipritpal at hotmail.com  Thu May 21 11:25:54 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu May 21 11:25:59 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11090] trunk/harbour
In-Reply-To: <E1M6nZw-0005qc-IB@c3vjzd1.ch3.sourceforge.com>
References: <E1M6nZw-0005qc-IB@c3vjzd1.ch3.sourceforge.com>
Message-ID: <23655175.post@talk.nabble.com>


Hello Mindaugas


snaiperis wrote:
> 
> Revision: 11090
>          
> http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11090&view=rev
> Author:   snaiperis
> Date:     2009-05-20 15:19:17 +0000 (Wed, 20 May 2009)
> 

Fantastic.

COM part is working fine, ActiveX MAY have some issues.

Here are few queries:

1. You have left CreateWindowEx() for obivious reasons.
   But I think it should be a part of the code as a separate function 
   because it uses "ATL" specific constructs. The function could be like
   __AXCREATEWINDOW() -> pointerHWND.

2. __AXGETCONTROL control expects hWnd as a pointer which, sadly,
   majority of developers and also third party libs are not accustomed to.
   Can you check "hWnd" is a pointer or numeric?
   HWND        hwnd = ( ISPOINTER( 1 ) ? ( HWND ) hb_parptr( 1 ) : ( HWND )(
HB_PTRDIFF ) hb_parnint( 1 ) );

3. Mostly third party libs are written to work on, at least for "hWnd", 
   as a numeric, what other options can you suggest?

4. HB_FUNC( __AXREGISTERHANDLER ) takes care of IDispatch interface
   while in practice COM objects publish more interfaces than IDispatch
only.
   This led me to write very hacky code in wvgsink.c : static HRESULT
SetupConnectionPoint().

For sure this is a very clean implementation.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-11090--trunk-harbour-tp23637661p23655175.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Thu May 21 12:06:05 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 21 12:06:13 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11090] trunk/harbour
In-Reply-To: <23655175.post@talk.nabble.com>
References: <E1M6nZw-0005qc-IB@c3vjzd1.ch3.sourceforge.com>
	<23655175.post@talk.nabble.com>
Message-ID: <18d502870905210906m37fb0cb1q9d86146f00d77f69@mail.gmail.com>

> 1. You have left CreateWindowEx() for obivious reasons.
> ? But I think it should be a part of the code as a separate function
> ? because it uses "ATL" specific constructs. The function could be like
> ? __AXCREATEWINDOW() -> pointerHWND.
>
> 2. __AXGETCONTROL control expects hWnd as a pointer which, sadly,
> ? majority of developers and also third party libs are not accustomed to.
> ? Can you check "hWnd" is a pointer or numeric?
> ? HWND ? ? ? ?hwnd = ( ISPOINTER( 1 ) ? ( HWND ) hb_parptr( 1 ) : ( HWND )(
> HB_PTRDIFF ) hb_parnint( 1 ) );

Use WIN_N2P() function to convert numeric to pointer.

> 3. Mostly third party libs are written to work on, at least for "hWnd",
> ? as a numeric, what other options can you suggest?

See above.

> 4. HB_FUNC( __AXREGISTERHANDLER ) takes care of IDispatch interface
> ? while in practice COM objects publish more interfaces than IDispatch
> only.
> ? This led me to write very hacky code in wvgsink.c : static HRESULT
> SetupConnectionPoint().

Can't judge how important these functions are, but I'd suggest
using WIN_AX*() is these are meant to be used by users.

Brgds,
Viktor
From jarabal at gmail.com  Thu May 21 13:41:23 2009
From: jarabal at gmail.com (Xavi)
Date: Thu May 21 13:43:57 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11097] trunk/harbour
In-Reply-To: <E1M74IU-0006UA-U1@bj8yhf1.ch3.sourceforge.com>
References: <E1M74IU-0006UA-U1@bj8yhf1.ch3.sourceforge.com>
Message-ID: <4A159243.9060001@gmail.com>

Przemek,
Well, look at the positive side: now it's better. :)
And it works .-

Procedure Main()

    SET PRINTER TO out.txt
    SET DEVICE TO PRINTER
    @ 0,0 say 'This print in out.txt'
    SET PRINTER TO  // or Set( _SET_PRINTFILE, "" ) Activate default printer and *not break* the display !!!
    @ 0,0 say 'This print in default printer!'
    SET DEVICE TO SCREEN
    @ 0,0 say 'Ok'
    SET PRINTER TO  // Print *now* in Win!
    @ 1,0 say 'Great!'
    Wait

return

Thanks
Xavi

Przemyslaw Czerpak escribi?:
> On Wed, 20 May 2009, vszakats@users.sourceforge.net wrote:
>> Log Message:
>> -----------
>> 2009-05-20 21:25 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>>   * source/vm/set.c
>>     ! Applied fix sent by Xavi. Thanks.
>>       I did a few minor formattings and rename, and did a
>>       light review, please review further and test. I seem to 
>>       remember some deeper problems with this feature, 
>>       reported a while ago on the list.
> 
> The above fix introduce very serious problem.
> Now there is no way to close printer file handle.
> In *nixes it means that to each harbour application lpr process
> is attached which waiting for printer input and user cannot disable/
> close it. In other OS-es it means that some device like "PRN" or "LPT1"
> is still open. If OS forces exclusive mode for such resources then
> only one application can print.
> In summary from small problem we have much bigger one  ;-) 
> It has to be written in different way. I'll try to make it ASAP.
> Please only test it.
> 
> best regards,
> Przemek
>


From marek.horodyski at interia.pl  Thu May 21 14:12:12 2009
From: marek.horodyski at interia.pl (marek.horodyski@interia.pl)
Date: Thu May 21 14:12:23 2009
Subject: [Harbour] errors log from last nigtly zip file.
Message-ID: <20090521181212.666BCCF0C4@f06.poczta.interia.pl>

D:\harbour>find /i "error" log-owatcom.txt

---------- LOG-OWATCOM.TXT
../../wvgsink.c(313): Error! E473: col(59) function argument(s) do not match those in prototype
../../wvgsink.c(324): Error! E473: col(60) function argument(s) do not match those in prototype
../../wvgsink.c(334): Error! E473: col(109) function argument(s) do not match those in prototype
../../wvgsink.c(455): Error! E473: col(50) function argument(s) do not match those in prototype
../../wvgsink.c(597): Error! E333: col(78) cannot convert argument to type specified in function prototype
../../wvgsink.c(600): Error! E333: col(118) cannot convert argument to type specified in function prototype
../../wvgsink.c(872): Error! E333: col(74) cannot convert argument to type specified in function prototype
../../wvgsink.c(981): Error! E333: col(74) cannot convert argument to type specified in function prototype
../../wvgsink.c(1024): Error! E333: col(123) cannot convert argument to type specified in function prototype
make.exe[3]: *** [wvgsink.obj] Error 8
make.exe[2]: *** [descend] Error 2
make.exe[1]: *** [gtwvg] Error 2
make.exe: *** [contrib] Error 2

Regards,
Marek Horodyski


----------------------------------------------------------------------
Oryginalne przepisy na grilla. Zaskocz swoich gosci!
Sprawdz >>> http://link.interia.pl/f217c




From daniel.particular at gmail.com  Thu May 21 16:32:20 2009
From: daniel.particular at gmail.com (Daniel Pereira da Silva)
Date: Thu May 21 16:32:31 2009
Subject: [Harbour]
Message-ID: <4A15BA54.4060201@gmail.com>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090521/3e32b5c4/attachment.html
From carozodequilmes at gmail.com  Thu May 21 17:12:53 2009
From: carozodequilmes at gmail.com (CarozoDeQuilmes)
Date: Thu May 21 17:12:58 2009
Subject: [Harbour] PushButton and QT
Message-ID: <578c73340905211412k57c8121fsb1b65047796dc3a4@mail.gmail.com>

Hi, sorry by my bad english.

I have a problem with PushButton running in HBQT

When I defined:

   oWnd := QMainWindow():new()
      ......

   oButton := QPushButton():New( QT_PTROF( oWnd ) )
   oButton:setText( "Testing PushButton HbQt" )
   oButton:move( 200,200 )
   oButton:show()

      .....
   oWnd:Show()

the PushButton is displayed in a new little Window ignoring the oWnd
parameter.

Can I help me ?

Environment:

Windows XP SP2
Harbour-11
MinGW

Thanks and Regards
CdQ
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090521/3e72ba14/attachment.html
From carozodequilmes at gmail.com  Thu May 21 17:21:14 2009
From: carozodequilmes at gmail.com (CarozoDeQuilmes)
Date: Thu May 21 17:21:22 2009
Subject: [Harbour] Language OS
Message-ID: <578c73340905211421u357e08f7k7adef8c198d6220d@mail.gmail.com>

Hi, is there any function in Harbour to get the OS language? (english
(en-US), portuguese (pt-BR), etc)

Thanks and Regards
CdQ

-- 
QAC (I want something comfortable !!!) - Incremental Compilation with all
MiniGUIs versions
QAC (Quiero Algo C?modo !!!) - Compilaci?n Incremental con todas las
versiones de MiniGUI

Download: www.CarozoDeQuilmes.com.ar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090521/dc71c16d/attachment.html
From druzus at acn.waw.pl  Thu May 21 19:25:40 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May 21 19:16:45 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11097] trunk/harbour
In-Reply-To: <4A159243.9060001@gmail.com>
References: <E1M74IU-0006UA-U1@bj8yhf1.ch3.sourceforge.com>
	<4A159243.9060001@gmail.com>
Message-ID: <20090521232540.GA18336@uran.home.aster.pl>

On Thu, 21 May 2009, Xavi wrote:

Hi,

> Well, look at the positive side: now it's better. :)
> And it works .-
> Procedure Main()
>
>    SET PRINTER TO out.txt
>    SET DEVICE TO PRINTER
>    @ 0,0 say 'This print in out.txt'
>    SET PRINTER TO  // or Set( _SET_PRINTFILE, "" ) Activate default printer and *not break* the display !!!
>    @ 0,0 say 'This print in default printer!'
>    SET DEVICE TO SCREEN
>    @ 0,0 say 'Ok'
>    SET PRINTER TO  // Print *now* in Win!
>    @ 1,0 say 'Great!'
>    Wait
> return

But I can easy change such code and replace
   SET PRINTER TO  // or Set( _SET_PRINTFILE, "" ) Activate default printer and *not break* the display !!!
with:
   SET PRINTER TO "|lpr"
what resolves the problem.

So I could live with it and it was not a problem form me but the
recent modification give me no choice because I couldn't fix the
new problem from .prg code so instead of minor problem I had very
serious one which can be fix/resolved only by changes in Harbour
core code. I did them but for many other users such modifications
can make Harbour unusable. Please remember that it's multiplatform
project. Anyhow the positive is that it forced me to touch the code
which should be fixed long time ago but I was too lazy to make
necessary modifications and I need a kick ;-)

If possible please make some tests after:

   2009-05-21 11:19 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
     * harbour/include/hbset.h
     * harbour/source/vm/set.c
       + added new function hb_setGetPrinterHandle() which allows to open
         closed printer port
       ! do not force opening default port after SET PRINTER TO ""
         but delay the initialization untill other code does not call
         hb_setGetPrinterHandle()
       ! fixed filename returned by _SET_PRINTFILE, _SET_ALTFILE, _SET_EXTRAFILE
       ! fixed possible resource leaks when _SET_*FILE is called recurisvely
         from user error block
       ! fixed _SET_*FILE settings to not accept files which cannot be open
         (just like in Clipper)
     * harbour/source/rtl/console.c
       * use hb_setGetPrinterHandle() to access printer handler

best regards,
Przemek
From harbour.01 at syenar.hu  Thu May 21 19:29:43 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 21 19:29:49 2009
Subject: [Harbour] Language OS
In-Reply-To: <578c73340905211421u357e08f7k7adef8c198d6220d@mail.gmail.com>
References: <578c73340905211421u357e08f7k7adef8c198d6220d@mail.gmail.com>
Message-ID: <18d502870905211629w32ef402eg771771be4b56c0eb@mail.gmail.com>

HB_USERLANG()

Brgds,
Viktor

On Thu, May 21, 2009 at 11:21 PM, CarozoDeQuilmes
<carozodequilmes@gmail.com> wrote:
> Hi, is there any function in Harbour to get the OS language? (english
> (en-US), portuguese (pt-BR), etc)
>
> Thanks and Regards
> CdQ
>
> --
> QAC (I want something comfortable !!!) - Incremental Compilation with all
> MiniGUIs versions
> QAC (Quiero Algo C?modo !!!) - Compilaci?n Incremental con todas las
> versiones de MiniGUI
>
> Download: www.CarozoDeQuilmes.com.ar
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
From harbour.01 at syenar.hu  Thu May 21 19:30:31 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 21 19:30:38 2009
Subject: [Harbour]
In-Reply-To: <4A15BA54.4060201@gmail.com>
References: <4A15BA54.4060201@gmail.com>
Message-ID: <18d502870905211630p335d5d16g6b4dca2c316757a3@mail.gmail.com>

/source/utils/hbmk2/hbmk2.prg

Brgds,
Viktor

On Thu, May 21, 2009 at 10:32 PM, Daniel Pereira da Silva
<daniel.particular@gmail.com> wrote:
> Hello All,
>
> Anybody has a sample using i18n functions ?
>
> Thanks!
>
> Daniel Pereira
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
From carozodequilmes at gmail.com  Thu May 21 20:55:45 2009
From: carozodequilmes at gmail.com (CarozoDeQuilmes)
Date: Thu May 21 20:55:51 2009
Subject: [Harbour] Language OS
In-Reply-To: <18d502870905211629w32ef402eg771771be4b56c0eb@mail.gmail.com>
References: <578c73340905211421u357e08f7k7adef8c198d6220d@mail.gmail.com>
	<18d502870905211629w32ef402eg771771be4b56c0eb@mail.gmail.com>
Message-ID: <578c73340905211755p4f8777e1q298f1b1914e31994@mail.gmail.com>

Thanks !!!!
CdQ

On Thu, May 21, 2009 at 8:29 PM, Viktor Szak?ts <harbour.01@syenar.hu>wrote:

> HB_USERLANG()
>
> Brgds,
> Viktor
>
> On Thu, May 21, 2009 at 11:21 PM, CarozoDeQuilmes
> <carozodequilmes@gmail.com> wrote:
> > Hi, is there any function in Harbour to get the OS language? (english
> > (en-US), portuguese (pt-BR), etc)
> >
> > Thanks and Regards
> > CdQ
> >
> > --
> > QAC (I want something comfortable !!!) - Incremental Compilation with all
> > MiniGUIs versions
> > QAC (Quiero Algo C?modo !!!) - Compilaci?n Incremental con todas las
> > versiones de MiniGUI
> >
> > Download: www.CarozoDeQuilmes.com.ar
> >
> > _______________________________________________
> > Harbour mailing list
> > Harbour@harbour-project.org
> > http://lists.harbour-project.org/mailman/listinfo/harbour
> >
> >
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
QAC (I want something comfortable !!!) - Incremental Compilation with all
MiniGUIs versions
QAC (Quiero Algo C?modo !!!) - Compilaci?n Incremental con todas las
versiones de MiniGUI

Download: www.CarozoDeQuilmes.com.ar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090521/4818406f/attachment.html
From bedipritpal at hotmail.com  Thu May 21 21:24:46 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu May 21 21:24:52 2009
Subject: [Harbour] PushButton and QT
In-Reply-To: <578c73340905211412k57c8121fsb1b65047796dc3a4@mail.gmail.com>
References: <578c73340905211412k57c8121fsb1b65047796dc3a4@mail.gmail.com>
Message-ID: <23663016.post@talk.nabble.com>


Hello

   oWnd := QMainWindow():new()
      ......

   oButton := QPushButton():New( QT_PTROF( oWnd ) )
   oButton:setParent( QT_PTROF( oWnd ) )
   oButton:setText( "Testing PushButton HbQt" )
   oButton:setSize( 120,40 )
   oButton:move( 200,200 )
   oButton:show()

      .....
   oWnd:Show()


I am wondering why pointer to parent is not taken care of in 
the constructore. Will check in a short while.

Regards

-- 
View this message in context: http://www.nabble.com/PushButton-and-QT-tp23660562p23663016.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Thu May 21 21:28:57 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu May 21 21:29:02 2009
Subject: [Harbour] PushButton and QT
In-Reply-To: <578c73340905211412k57c8121fsb1b65047796dc3a4@mail.gmail.com>
References: <578c73340905211412k57c8121fsb1b65047796dc3a4@mail.gmail.com>
Message-ID: <23663057.post@talk.nabble.com>


Hi


CarozoDeQuilmes wrote:
> 
>    oWnd := QMainWindow():new()
>       ......
> 
>    oButton := QPushButton():New( QT_PTROF( oWnd ) )
>    oButton:setText( "Testing PushButton HbQt" )
>    oButton:move( 200,200 )
>    oButton:show()
> 
>       .....
>    oWnd:Show()
> 
> the PushButton is displayed in a new little Window ignoring the oWnd
> parameter.
> 

I have found the issue, will fix in a while.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/PushButton-and-QT-tp23660562p23663057.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From carozodequilmes at gmail.com  Thu May 21 21:38:38 2009
From: carozodequilmes at gmail.com (CarozoDeQuilmes)
Date: Thu May 21 21:38:53 2009
Subject: [Harbour] PushButton and QT
In-Reply-To: <23663057.post@talk.nabble.com>
References: <578c73340905211412k57c8121fsb1b65047796dc3a4@mail.gmail.com>
	<23663057.post@talk.nabble.com>
Message-ID: <578c73340905211838i385f0860nb49c64f4bd5e9b7e@mail.gmail.com>

Thanks !!!
CdQ

On Thu, May 21, 2009 at 10:28 PM, Pritpal Bedi <bedipritpal@hotmail.com>wrote:

>
> Hi
>
>
> CarozoDeQuilmes wrote:
> >
> >    oWnd := QMainWindow():new()
> >       ......
> >
> >    oButton := QPushButton():New( QT_PTROF( oWnd ) )
> >    oButton:setText( "Testing PushButton HbQt" )
> >    oButton:move( 200,200 )
> >    oButton:show()
> >
> >       .....
> >    oWnd:Show()
> >
> > the PushButton is displayed in a new little Window ignoring the oWnd
> > parameter.
> >
>
> I have found the issue, will fix in a while.
>
> Regards
> Pritpal Bedi
>
> --
> View this message in context:
> http://www.nabble.com/PushButton-and-QT-tp23660562p23663057.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
QAC (I want something comfortable !!!) - Incremental Compilation with all
MiniGUIs versions
QAC (Quiero Algo C?modo !!!) - Compilaci?n Incremental con todas las
versiones de MiniGUI

Download: www.CarozoDeQuilmes.com.ar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090521/18637b2e/attachment.html
From calimero22 at freemail.it  Thu May 21 22:00:59 2009
From: calimero22 at freemail.it (calimero22@freemail.it)
Date: Thu May 21 22:01:05 2009
Subject: [Harbour] MySQL ODBC 3.51 and 5.1
Message-ID: <20090522020059.873C46806A28@eva124.dadanet.it>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090522/29ce8793/attachment.html
From alex at belacy.belgorod.su  Fri May 22 01:39:42 2009
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Fri May 22 01:40:13 2009
Subject: [Harbour] Re: Unrecoverable error 1010: hb_cdxIndexPageRead: Read
 index	page failed.
In-Reply-To: <4A13DD73.5050900@belacy.belgorod.su>
References: <guu51v$hbl$1@ger.gmane.org> <4A13DD73.5050900@belacy.belgorod.su>
Message-ID: <4A163A9E.1050002@belacy.belgorod.su>

> Hi All,
> 
>> Application Internal Error - C:\letodb\bin\letodb.exe
>> Terminated at: 2009.05.18 17:22:09
>> Unrecoverable error 1010: hb_cdxIndexPageRead: Read index page failed.
> 
>  The internal errors may be a problem for any kind of "NETRDD", they 
> cause terminating of server's program in case of tables or index 
> corruption.
>  Maybe, we could refuse of using the hb_errInternal() in RDD code, 
> replacing it with a common error handler ? Or, at least, add a 
> possibility to set a callback function in hb_errInternal(), to be able 
> output some additional info about a problem ?
> 

  After thinking a bit I've inderstood that the second option ( callback 
function ) isn't needed, because I can simply override hb_errInternal(), 
placing a function with this name in my code. In letodb such function 
may write to the log all necessary info ( a problem table name, for 
example ) and close all tables before terminating.

But, anyway, I believe that RDD code shouldn't use the hb_errInternal(). 
Replacing it with a standard error handler is a very hard and unpleasant 
work, though ...

Regards, Alexander.

From M.Horodyski at pzuzycie.com.pl  Fri May 22 03:20:08 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri May 22 03:20:15 2009
Subject: [Harbour] Upper\Lower nationals chars.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C9502356D3F@PINK.zycie.pzu>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9502356EB4@PINK.zycie.pzu>

>-----Original Message-----
>From: Horodyski Marek (PZUZ) 
>Sent: Thursday, May 21, 2009 10:41 AM
>To: Harbour Project Main Developer List.
>Subject: RE: [Harbour] Upper\Lower nationals chars.
>
>>-----Original Message-----
>>From: Szak?ts Viktor [mailto:harbour.01@syenar.hu]
>>Sent: Thursday, May 21, 2009 9:06 AM
>>To: Harbour Project Main Developer List.
>>Subject: Re: [Harbour] Upper\Lower nationals chars.
>>
>>Probably you're mixing libs built with different compilers, 
>or you have 
>>an incomplete Harbour build maybe.
>>
>>Here it works ok.
>>
>>Brgds,
>>Viktor
>
>Strange. You are right when I'm in work, when I'm in home, no ;)

Between work and home einvironment I have only one difference.
It was HB_INSTALL_PREFIX. When I remove it in home, all work ok., like in work (both : hbmk2 and compile and link from script files).

Regards,
Marek Horodyski
From harbour.01 at syenar.hu  Fri May 22 03:29:33 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 22 03:29:39 2009
Subject: [Harbour] Upper\Lower nationals chars.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C9502356EB4@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C9502356D3F@PINK.zycie.pzu>
	<FFAFD6EA63A3FC4784FBDA52BE7A7C9502356EB4@PINK.zycie.pzu>
Message-ID: <18d502870905220029s4dc4618dgee42a2eccd2610d0@mail.gmail.com>

>>>Here it works ok.
>>>
>>>Brgds,
>>>Viktor
>>
>>Strange. You are right when I'm in work, when I'm in home, no ;)
>
> Between work and home einvironment I have only one difference.
> It was HB_INSTALL_PREFIX. When I remove it in home, all work ok., like in work (both : hbmk2 and compile and link from script files).

Yes, hbmk2 will respect HB_INSTALL_PREFIX and use the
Harbour installation pointed by it. I'll think about removing this,
right now I cannot think of any such situations where this could
come handy. Anyway you normally don't need this envvar so
I'd suggest to only use it while building Harbour. It's best to use
a minimal set of default envvars anyway.

Brgds,
Viktor
From vszakats at users.sourceforge.net  Fri May 22 04:22:04 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 22 04:22:12 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11100] trunk/harbour
Message-ID: <E1M7Q0y-0001ra-H5@dn4whf1.ch3.sourceforge.com>

Revision: 11100
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11100&view=rev
Author:   vszakats
Date:     2009-05-22 08:22:03 +0000 (Fri, 22 May 2009)

Log Message:
-----------
2009-05-22 10:21 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/rddsql/sddodbc/odbcdd.c
    ! Added UNICODE support to the extent it compiles. Please 
      make tests. Also SQLGetData() / SQL_C_CHAR may also need 
      conversion from UNICODE.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/rddsql/sddodbc/odbcdd.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From alex at belacy.belgorod.su  Fri May 22 05:19:02 2009
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Fri May 22 05:19:12 2009
Subject: [Harbour] Source code formatter
Message-ID: <4A166E06.4010506@belacy.belgorod.su>

Hi All,

    for a long time I used Click to format prgs, but last time I get 
some problems with it and became to look for something other. The only 
one I've found is xMate, but it isn't convenient for me, because it 
doesn't include formatter as a standalone utility and to format a file, 
I need to create a project, add this file and open it with an editor. 
Besides, it have too few options and I can't format prg in a way I like.
    That's why week ago I've decided to wright the formatter myself and 
now I get it with the basic functionality, which is enough for me.

    If nobody has objection, I'll upload it to the utils/ directory. 
Could someone prompt me how to add new directory and files in it ( I 
never did it with SVN ) ?

Regards, Alexander.
From harbour.01 at syenar.hu  Fri May 22 05:39:41 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri May 22 05:39:52 2009
Subject: [Harbour] Source code formatter
In-Reply-To: <4A166E06.4010506@belacy.belgorod.su>
References: <4A166E06.4010506@belacy.belgorod.su>
Message-ID: <98C2E4C2-4D75-446D-8CA0-C3BB038F5052@syenar.hu>

>   for a long time I used Click to format prgs, but last time I get  
> some problems with it and became to look for something other. The  
> only one I've found is xMate, but it isn't convenient for me,  
> because it doesn't include formatter as a standalone utility and to  
> format a file, I need to create a project, add this file and open it  
> with an editor. Besides, it have too few options and I can't format  
> prg in a way I like.
>   That's why week ago I've decided to wright the formatter myself  
> and now I get it with the basic functionality, which is enough for me.

Yesterday I was thinking of committing a recently written
reindentor :) Not a full blown formatter (like my tool 'DST'
was trying to be, written 17 years ago), but it can change
indentation (including continued lines), it assumes a properly
and consistently indented source, autodetects it and can
change this to any number of chars or tabs.

>   If nobody has objection, I'll upload it to the utils/ directory.  
> Could someone prompt me how to add new directory and files in it ( I  
> never did it with SVN ) ?

Adding dir: svn add <dir>
then see doc/howtosvn.txt how to add files and svn props in particular.

Do you think we can make the default setup to produce
std Harbour .prg formatting? If it goes to utils, I think
this would be nice and expected.

Brgds,
Viktor

From druzus at users.sourceforge.net  Fri May 22 05:59:24 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Fri May 22 05:59:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11101] trunk/harbour
Message-ID: <E1M7RXA-0008VC-Ck@d5vjzd1.ch3.sourceforge.com>

Revision: 11101
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11101&view=rev
Author:   druzus
Date:     2009-05-22 09:59:20 +0000 (Fri, 22 May 2009)

Log Message:
-----------
2009-05-22 12:07 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/debug/debugger.prg
    * minor simplification

  * harbour/contrib/rddsql/sddodbc/odbcdd.c
    ! added dummy unicode conversion macros to fix compilation in
      non windows builds

  * harbour/contrib/hbwin/olecore.c
    ! casting

  * harbour/contrib/hbwin/axcore.c
    ! fixed unicode and WinCE compilation
    ! casting

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/axcore.c
    trunk/harbour/contrib/hbwin/olecore.c
    trunk/harbour/contrib/rddsql/sddodbc/odbcdd.c
    trunk/harbour/source/debug/debugger.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dbtopas at dbtopas.lt  Fri May 22 06:00:19 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri May 22 06:02:12 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11094] trunk/harbour
In-Reply-To: <E1M6tP9-0003ro-9O@3kljzd1.ch3.sourceforge.com>
References: <E1M6tP9-0003ro-9O@3kljzd1.ch3.sourceforge.com>
Message-ID: <4A1677B3.8000308@dbtopas.lt>

>   ; TOFIX: These errors are shown when trying to compiler in UNICODE mode:
>     ../../odbcdd.c(168) : error C2664: 'SQLDriverConnectW' : cannot convert parameter 3 from 'SQLCHAR *' to 'SQLWCHAR *'
>     ../../odbcdd.c(204) : error C2664: 'SQLExecDirectW' : cannot convert parameter 2 from 'SQLCHAR *' to 'SQLWCHAR *'
>     ../../odbcdd.c(239) : error C2664: 'SQLExecDirectW' : cannot convert parameter 2 from 'SQLCHAR *' to 'SQLWCHAR *'
>     ../../odbcdd.c(263) : error C2664: 'SQLDescribeColW' : cannot convert parameter 3 from 'SQLCHAR *' to 'SQLWCHAR *'

Hi Viktor,


I see you've committed the fix using HB_TCHAR_CONVTO. A few arguments, 
that stopped me from doing this simple change:

AFAIK, odbc library could be used on linux also (fix me if I'm wrong). 
HB_TCHAR* is defined for Windows only. So, I guess now linux compile is 
broken. We need to add HB_TCHAR* macos for other OS too, not for Windows 
only. We need an opinion fro linux developers here.

HB_TCHAR* is defined in wince.h, I see it is included in all windows 
builds, but include (and source) file name is a little confusing. 
Actually this was the only reason, why I've left AnsiToWide(), 
WideToAnsi() is OLE code, instead of using hb_mbtowc(), etc. I think we 
must move these unicode convertion function to a separate module.


Regards,
Mindaugas
From harbour.01 at syenar.hu  Fri May 22 06:09:30 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 22 06:09:36 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11094] trunk/harbour
In-Reply-To: <4A1677B3.8000308@dbtopas.lt>
References: <E1M6tP9-0003ro-9O@3kljzd1.ch3.sourceforge.com>
	<4A1677B3.8000308@dbtopas.lt>
Message-ID: <18d502870905220309j2e828cabqa831338da8267175@mail.gmail.com>

> I see you've committed the fix using HB_TCHAR_CONVTO. A few arguments, that
> stopped me from doing this simple change:
>
> AFAIK, odbc library could be used on linux also (fix me if I'm wrong).
> HB_TCHAR* is defined for Windows only. So, I guess now linux compile is
> broken. We need to add HB_TCHAR* macos for other OS too, not for Windows
> only. We need an opinion fro linux developers here.

Ops forgot about it. In hbodbc it's solved a little bit differently so that it
also compiles with Linux (we can apply it to here), but the real solution would
be to also have these macros on Linux as you say, as even now, UNICODE
mode isn't support in hbodbc on Linux. Dunno how UNICODE API mode can
be detected on that platform.

> HB_TCHAR* is defined in wince.h, I see it is included in all windows builds,
> but include (and source) file name is a little confusing. Actually this was
> the only reason, why I've left AnsiToWide(), WideToAnsi() is OLE code,
> instead of using hb_mbtowc(), etc. I think we must move these unicode
> convertion function to a separate module.

Fully agree.

For OLE code though (and in fact for whole hbwin code) I think you can
safely use hb_mbtowc(), as both are Windows-only by definition. (at least
I'm not aware that OLE API is available on other platforms, if it is, we need
to do some more steps anyway).

Brgds,
Viktor
From druzus at users.sourceforge.net  Fri May 22 06:10:21 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Fri May 22 06:10:26 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11102] trunk/harbour
Message-ID: <E1M7Rhl-0000EL-KQ@d5vjzd1.ch3.sourceforge.com>

Revision: 11102
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11102&view=rev
Author:   druzus
Date:     2009-05-22 10:10:20 +0000 (Fri, 22 May 2009)

Log Message:
-----------
2009-05-22 12:18 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/mpkg_rpm.sh
  * harbour/harbour.spec
    ! fixed to build with sddodbc library

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/harbour.spec
    trunk/harbour/mpkg_rpm.sh


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From alex at belacy.belgorod.su  Fri May 22 06:26:00 2009
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Fri May 22 06:26:50 2009
Subject: [Harbour] Re:  Source code formatter
In-Reply-To: <98C2E4C2-4D75-446D-8CA0-C3BB038F5052@syenar.hu>
References: <4A166E06.4010506@belacy.belgorod.su>
	<98C2E4C2-4D75-446D-8CA0-C3BB038F5052@syenar.hu>
Message-ID: <4A167DB8.4000409@belacy.belgorod.su>

> Yesterday I was thinking of committing a recently written
> reindentor :)

  I had a feeling that I must hurry :)


> Not a full blown formatter (like my tool 'DST'
> was trying to be, written 17 years ago), but it can change
> indentation (including continued lines), it assumes a properly
> and consistently indented source, autodetects it and can
> change this to any number of chars or tabs.
>

  Mine for now, if it is pointed in options, indents source, changes 
case of commands, functions and booleans, inserts/deletes empty lines 
and inserts spaces before/after operators and brackets, changes EOL.

> Do you think we can make the default setup to produce
> std Harbour .prg formatting?
> 

  I plan to set default options in accordance of how Harbour's prg files 
are formatted now.

Regards, Alexander.

From vszakats at users.sourceforge.net  Fri May 22 06:30:52 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 22 06:30:55 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11103] trunk/harbour
Message-ID: <E1M7S1c-00083o-43@3kljzd1.ch3.sourceforge.com>

Revision: 11103
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11103&view=rev
Author:   vszakats
Date:     2009-05-22 10:30:51 +0000 (Fri, 22 May 2009)

Log Message:
-----------
2009-05-22 12:30 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbodbc/odbc.c
    + Copied dummy HB_TCHAR* macros from odbcdd.c, plus
      added dummy HB_TCHAR_CONVFROM().
    % Removed separate branches for Windows platform.
      Please test it on *nix.
    ; TODO: Except one. Currently we have no TCHAR macro 
            which deals with byte strings with lengths.
            Przemek, do you think it's possible to add it?

  * contrib/rddsql/sddodbc/odbcdd.c
    + Added HB_TCHAR_CONVFROM().

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbodbc/odbc.c
    trunk/harbour/contrib/rddsql/sddodbc/odbcdd.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dbtopas at dbtopas.lt  Fri May 22 06:33:07 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri May 22 06:35:00 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11090] trunk/harbour
In-Reply-To: <23655175.post@talk.nabble.com>
References: <E1M6nZw-0005qc-IB@c3vjzd1.ch3.sourceforge.com>
	<23655175.post@talk.nabble.com>
Message-ID: <4A167F63.3070802@dbtopas.lt>

Hi,


> Here are few queries:
> 
> 1. You have left CreateWindowEx() for obivious reasons.
>    But I think it should be a part of the code as a separate function 
>    because it uses "ATL" specific constructs. The function could be like
>    __AXCREATEWINDOW() -> pointerHWND.

In this case I was thinking about simple define:
   #deinfe WIN_AXWINDOWCLASSNAME "ATLAXWin"

But I still do not want to do CreateWindow, because it could be:
    WIN_CreateWindow()
    WAPI_CreateWindow()
    FWH_CreateWindow()
    GUI_CreateWindow()
    GVW_CreateWindow()
etc.

CreateWindow has a lot of parameters. Some users different way to pass 
coordinates, f.e., as cRect struct. The last parameter is structure. 
There there are many possible approaches to handle it also. I want to 
leave it outside ActiveX implementation. The only ActiveX dependent 
thing is WIN_AXWINDOWCLASSNAME.


> 2. __AXGETCONTROL control expects hWnd as a pointer which, sadly,
>    majority of developers and also third party libs are not accustomed to.
>    Can you check "hWnd" is a pointer or numeric?
>    HWND        hwnd = ( ISPOINTER( 1 ) ? ( HWND ) hb_parptr( 1 ) : ( HWND )(
> HB_PTRDIFF ) hb_parnint( 1 ) );
> 
> 3. Mostly third party libs are written to work on, at least for "hWnd", 
>    as a numeric, what other options can you suggest?


This could be added, but it should be depreciated. Users usually do not 
fix code until it is necessary. So, I support proposal of Viktor of 
WIN_NumberToPointer(), and do this compatibility call outside Harbour 
ActiveX library.


> 4. HB_FUNC( __AXREGISTERHANDLER ) takes care of IDispatch interface
>    while in practice COM objects publish more interfaces than IDispatch
> only.
>    This led me to write very hacky code in wvgsink.c : static HRESULT
> SetupConnectionPoint().

It's hard for me to understand your idea and SetupConnectionPoint() 
source together. riid is not even used in SetupConnectionPoint()! This 
function returns the first interface found in connection point 
container. If I understand all this connection point idea correctly, our 
event handler object (MyRealEventHandler) should implement this 
particular rriid obtained by GetConnectionInterface(). But our object 
event handler object implements IDispatch only, so how can you use this 
object for another interface??? I would expect GPF here!
F.e., let's say we want to use DWebBrowserEvents2 connection point 
interface (instead of IDispatch), for WebBrowser object. We need 
implement DWebBrowserEvents2 in this case.


Regards,
Mindaugas

From harbour.01 at syenar.hu  Fri May 22 06:42:54 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 22 06:43:01 2009
Subject: [Harbour] Re: Source code formatter
In-Reply-To: <4A167DB8.4000409@belacy.belgorod.su>
References: <4A166E06.4010506@belacy.belgorod.su>
	<98C2E4C2-4D75-446D-8CA0-C3BB038F5052@syenar.hu>
	<4A167DB8.4000409@belacy.belgorod.su>
Message-ID: <18d502870905220342p32fc2c5dheb178d4fc2be188f@mail.gmail.com>

On Fri, May 22, 2009 at 12:26 PM, Alexander S.Kresin
<alex@belacy.belgorod.su> wrote:
>> Yesterday I was thinking of committing a recently written
>> reindentor :)
>
> ?I had a feeling that I must hurry :)

> ?Mine for now, if it is pointed in options, indents source, changes case of
> commands, functions and booleans, inserts/deletes empty lines and inserts
> spaces before/after operators and brackets, changes EOL.

No, just take your time :) Yours is clearly a much more complete solution.

> ?I plan to set default options in accordance of how Harbour's prg files are
> formatted now.

Sounds good!

Brgds,
Viktor
From dbtopas at dbtopas.lt  Fri May 22 06:47:42 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri May 22 06:49:35 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11101] trunk/harbour
In-Reply-To: <E1M7RXA-0008VC-Ck@d5vjzd1.ch3.sourceforge.com>
References: <E1M7RXA-0008VC-Ck@d5vjzd1.ch3.sourceforge.com>
Message-ID: <4A1682CE.1020303@dbtopas.lt>

>   * harbour/contrib/rddsql/sddodbc/odbcdd.c
>     ! added dummy unicode conversion macros to fix compilation in
>       non windows builds
> 
>   * harbour/contrib/hbwin/olecore.c
>     ! casting
> 
>   * harbour/contrib/hbwin/axcore.c
>     ! fixed unicode and WinCE compilation
>     ! casting


Hi,


a few questions just to make a C knowledge better...

1)
typedef HRESULT   ( CALLBACK * PHB_AX_GETCTRL )( HWND, IUnknown** );
ptr = ( PHB_AX_GETCTRL ) GetProcAddress( s_hLib, "AtlAxGetControl" );

Can function pointer type be casted without definition of new type?



2)
-  pSink->lpVtbl = &ISink_Vtbl;
+  pSink->lpVtbl = ( IDispatchVtbl * ) &ISink_Vtbl;

Why compiler generated an error here? ISink_Vtbl has IDispatchVtbl type.


Regards,
Mindaugas
From kadziola at tlen.pl  Fri May 22 07:00:15 2009
From: kadziola at tlen.pl (Jaroslaw Kadziola)
Date: Fri May 22 07:00:36 2009
Subject: [Harbour] WinCE build
Message-ID: <1681735926.20090522130015@tlen.pl>

Hi all,

When i'm building WinCE using msys + mingw :

make[2]: Entering directory `C:/msys/1.0/harbour/utils/hbmk2'
make[3]: Entering directory `C:/msys/1.0/harbour/utils/hbmk2/wce/mingwarm'
C:/msys/1.0/harbour/bin/harbour.exe ../../hbmk2.prg -n1 -i../../../../include -q0 -w3 -es2 -kmo -l -gc0 -D__PLATFORM__WINCE 
arm-wince-mingw32ce-gcc -I. -I../../../../include  -Wall -W -O2 -fomit-frame-pointer    -c hbmk2.c -ohbmk2.o
arm-wince-mingw32ce-gcc  -Wall -W -O2 -fomit-frame-pointer -ohbmk2.exe hbmk2.o    -L../../../../lib/wce/mingwarm -Wl,--start-group    -lhbdebug  -lhbvmmt  -lhbrtl  -lhblang  -lhbcpage  -lhbnulrdd  -lhbrtl  -lhbvmmt  -lhbmacro  -lhbcommon  -lhbpp  -lhbcplr  -lrddntx  -lrddnsx  -lrddcdx  -lrddfpt  -lhbsix  -lhbhsx  -lhbusrrdd  -lhbuddall  -lgtcgi  -lgtpca  -lgtstd  -lgtwvt  -lgtgui -Wl,--end-group -lwininet -lws2 -lcommdlg -lcommctrl -luuid -lole32
hbmk2.o:hbmk2.c:(.data+0xc2c): undefined reference to `HB_FUN_HB_GT_WIN'
collect2: ld returned 1 exit status
make[3]: *** [hbmk2.exe] Error 1
make[3]: Leaving directory `C:/msys/1.0/harbour/utils/hbmk2/wce/mingwarm'
make[2]: *** [descend] Error 2
make[2]: Leaving directory `C:/msys/1.0/harbour/utils/hbmk2'
make[1]: *** [hbmk2.inst] Error 2
make[1]: Leaving directory `C:/msys/1.0/harbour/utils'
make: *** [utils.inst] Error 2

What's wrong ?

My env :

export PATH=".:/usr/local/bin:/mingw/bin:/bin:/opt/mingw32ce/bin:/harbour/bin:$PATH"
export HB_BIN_COMPILE="/harbour/bin"
export HB_PPGEN_PATH="$HB_BIN_COMPILE"
export HB_CCPATH="/opt/mingw32ce/bin"
export HB_COMPILER=mingwarm 
export HB_ARCHITECTURE=wce      
export HB_INSTALL_PREFIX="/hb-$HB_COMPILER"
export HB_LIB_INSTALL="/hb-$HB_COMPILER/lib"
export HB_INC_INSTALL="/hb-$HB_COMPILER/include"
export HB_CCPREFIX="arm-wince-mingw32ce-"

-- 
Regards,

Jaroslaw Kadziola

From vszakats at users.sourceforge.net  Fri May 22 07:05:37 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 22 07:05:41 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104] trunk/harbour
Message-ID: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>

Revision: 11104
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11104&view=rev
Author:   vszakats
Date:     2009-05-22 11:05:36 +0000 (Fri, 22 May 2009)

Log Message:
-----------
2009-05-22 13:04 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed extra GT for WinCE builds.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Fri May 22 07:41:38 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri May 22 07:32:42 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11101] trunk/harbour
In-Reply-To: <4A1682CE.1020303@dbtopas.lt>
References: <E1M7RXA-0008VC-Ck@d5vjzd1.ch3.sourceforge.com>
	<4A1682CE.1020303@dbtopas.lt>
Message-ID: <20090522114138.GA6423@uran.home.aster.pl>

On Fri, 22 May 2009, Mindaugas Kavaliauskas wrote:

Hi,

> a few questions just to make a C knowledge better...
> 1)
> typedef HRESULT   ( CALLBACK * PHB_AX_GETCTRL )( HWND, IUnknown** );
> ptr = ( PHB_AX_GETCTRL ) GetProcAddress( s_hLib, "AtlAxGetControl" );
> Can function pointer type be casted without definition of new type?

Yes:
      ptr = ( HRESULT ( CALLBACK * )( HWND, IUnknown** ) )
            GetProcAddress( s_hLib, HBTEXT( "AtlAxGetControl" ) );

I defined new types only for readability for people who are not very
familiar with C code.
I.e. most of people with some C knowledge should understand this code:

   typedef void (*sighandler_t)(int);
   sighandler_t signal(int signum, sighandler_t handler);

but this one may be to enigmatic for them ;-):

   void (*signal(int signum, void (*handler)(int)))(int);

> 2)
> -  pSink->lpVtbl = &ISink_Vtbl;
> +  pSink->lpVtbl = ( IDispatchVtbl * ) &ISink_Vtbl;
> Why compiler generated an error here? ISink_Vtbl has IDispatchVtbl type.

It was add only to pacify the warning.
pSink->lpVtbl is declared as 'IDispatchVtbl *' not 'const IDispatchVtbl *'
so compiler warn that 'const' qualifier is discarded by assignment.
Real fix should be done in C header files and const added (I believe it's
really constant otherwise we may expect GPFs if above table is stored
in readonly memory segments) and my modification is only workaround for
wrong declaration outside Harbour code.

best regards,
Przemek
From kadziola at tlen.pl  Fri May 22 07:44:57 2009
From: kadziola at tlen.pl (Jaroslaw Kadziola)
Date: Fri May 22 07:45:07 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104] trunk/harbour
In-Reply-To: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
Message-ID: <173100328.20090522134457@tlen.pl>

Hi Victor,


vusn> Revision: 11104
vusn>           http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11104&view=rev
vusn> Author:   vszakats
vusn> Date:     2009-05-22 11:05:36 +0000 (Fri, 22 May 2009)

vusn> Log Message:
vusn> -----------
vusn> 2009-05-22 13:04 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
vusn>   * utils/hbmk2/hbmk2.prg
vusn>     ! Fixed extra GT for WinCE builds.

vusn> Modified Paths:
vusn> --------------
vusn>     trunk/harbour/ChangeLog
vusn>     trunk/harbour/utils/hbmk2/hbmk2.prg


Now hbmk2 build OK but :

c:/WINDOWS/make -C sqlite3 install _HB_BLD=yes
make[2]: Entering directory `C:/msys/1.0/harbour/external/sqlite3'
make[3]: Entering directory `C:/msys/1.0/harbour/external/sqlite3/wce/mingwarm'
arm-wince-mingw32ce-gcc -I. -I../../../../include  -O2 -fomit-frame-pointer  -D_WIN32_WCE  -c ../../sqlite3.c -osqlite3.o
../../sqlite3.c: In function 'localtime':
../../sqlite3.c:26524: warning: integer constant is too large for 'long' type
../../sqlite3.c:27835:43: error: macro "GetDiskFreeSpaceW" passed 5 arguments, but takes just 0
../../sqlite3.c: In function 'getSectorSize':
../../sqlite3.c:27831: warning: assignment makes integer from pointer without a cast
make[3]: *** [sqlite3.o] Error 1
make[3]: Leaving directory `C:/msys/1.0/harbour/external/sqlite3/wce/mingwarm'
make[2]: *** [descend] Error 2
make[2]: Leaving directory `C:/msys/1.0/harbour/external/sqlite3'
make[1]: *** [sqlite3.inst] Error 2
make[1]: Leaving directory `C:/msys/1.0/harbour/external'
make: *** [external.inst] Error 2

Besides after run hbmk2.exe under msys i get :
- permission denied

-- 
Regards,
 Jaroslaw Kadziola

From druzus at acn.waw.pl  Fri May 22 08:11:22 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri May 22 08:02:26 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104] trunk/harbour
In-Reply-To: <173100328.20090522134457@tlen.pl>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<173100328.20090522134457@tlen.pl>
Message-ID: <20090522121122.GA2212@uran.home.aster.pl>

[pi?tek, 22 maj 2009], Jaroslaw Kadziola napisa?(a):

Hi Jarek,

> Besides after run hbmk2.exe under msys i get :
> - permission denied

It is expected behavior. You cannot execute binaries created for
WinCE and ARM CPUs in x86 MS-Windows.
Neither Windows versions nor CPUs are binary compatible.

If you want to create your own binaries for WinCE working with
x86-Windows then you have to use harbour and other tools like
hbmk2 compiled for x86-Windows with libraries created for WinCE
builds and C compiler which can generated WinCE-ARM code.

Probably Viktor can write more about using hbmk2 for cross compilation.
I haven't tried to use it for such job in Linux yet and still use hb*
scripts for cross compilation.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri May 22 08:12:13 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri May 22 08:12:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104] trunk/harbour
In-Reply-To: <173100328.20090522134457@tlen.pl>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<173100328.20090522134457@tlen.pl>
Message-ID: <FFE4BEB1-534D-4CAE-80CF-7BDBDF3B01F6@syenar.hu>

> c:/WINDOWS/make -C sqlite3 install _HB_BLD=yes
> make[2]: Entering directory `C:/msys/1.0/harbour/external/sqlite3'
> make[3]: Entering directory `C:/msys/1.0/harbour/external/sqlite3/ 
> wce/mingwarm'
> arm-wince-mingw32ce-gcc -I. -I../../../../include  -O2 -fomit-frame- 
> pointer  -D_WIN32_WCE  -c ../../sqlite3.c -osqlite3.o
> ../../sqlite3.c: In function 'localtime':
> ../../sqlite3.c:26524: warning: integer constant is too large for  
> 'long' type
> ../../sqlite3.c:27835:43: error: macro "GetDiskFreeSpaceW" passed 5  
> arguments, but takes just 0
> ../../sqlite3.c: In function 'getSectorSize':
> ../../sqlite3.c:27831: warning: assignment makes integer from  
> pointer without a cast

Looks like new sqlite3 broke mingwce compatibility. I've reported it,
and I'll disable it for mingwarm in the meantime.

> make[3]: *** [sqlite3.o] Error 1
> make[3]: Leaving directory `C:/msys/1.0/harbour/external/sqlite3/wce/ 
> mingwarm'
> make[2]: *** [descend] Error 2
> make[2]: Leaving directory `C:/msys/1.0/harbour/external/sqlite3'
> make[1]: *** [sqlite3.inst] Error 2
> make[1]: Leaving directory `C:/msys/1.0/harbour/external'
> make: *** [external.inst] Error 2
>
> Besides after run hbmk2.exe under msys i get :
> - permission denied

Here it displays help screen if I start MinGW build hbmk2
under msys / sh.exe.

Maybe you're trying to run CE build hbmk2 on your PC?
This is unlikely to work, but you also don't need such
build to create CE apps using hbmk2, simple Windows
build will do.

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri May 22 08:17:07 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri May 22 08:17:17 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104] trunk/harbour
In-Reply-To: <20090522121122.GA2212@uran.home.aster.pl>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<173100328.20090522134457@tlen.pl>
	<20090522121122.GA2212@uran.home.aster.pl>
Message-ID: <AA4A082E-A288-41C7-A1CE-FA48B15C3BC0@syenar.hu>

> Probably Viktor can write more about using hbmk2 for cross  
> compilation.
> I haven't tried to use it for such job in Linux yet and still use hb*
> scripts for cross compilation.

I've posted such command lines a few times on this list.

In unified binary build it's enough to do this:
 > hbmk2 ../tests/hello.prg -comp=mingwarm

Same command will work if Windows hbmk2.exe is copied
into a mingwarm build bin dir. Nothing else is needed.

There are other combinations, but this is the simplest
method.

Brgds,
Viktor

From druzus at acn.waw.pl  Fri May 22 08:42:59 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri May 22 08:34:03 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104] trunk/harbour
In-Reply-To: <AA4A082E-A288-41C7-A1CE-FA48B15C3BC0@syenar.hu>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<173100328.20090522134457@tlen.pl>
	<20090522121122.GA2212@uran.home.aster.pl>
	<AA4A082E-A288-41C7-A1CE-FA48B15C3BC0@syenar.hu>
Message-ID: <20090522124259.GA31901@uran.home.aster.pl>

On Fri, 22 May 2009, Szak?ts Viktor wrote:

Hi,

> I've posted such command lines a few times on this list.
> In unified binary build it's enough to do this:
> > hbmk2 ../tests/hello.prg -comp=mingwarm
> Same command will work if Windows hbmk2.exe is copied
> into a mingwarm build bin dir. Nothing else is needed.
> There are other combinations, but this is the simplest
> method.

AFAIK neither of the above methods works in Linux.
How should I use hbmk2 in Linux to create Win-x86 and WinCE
binaries?

best regards,
Przemek
From harbour.01 at syenar.hu  Fri May 22 09:02:21 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri May 22 09:02:30 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104] trunk/harbour
In-Reply-To: <20090522124259.GA31901@uran.home.aster.pl>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<173100328.20090522134457@tlen.pl>
	<20090522121122.GA2212@uran.home.aster.pl>
	<AA4A082E-A288-41C7-A1CE-FA48B15C3BC0@syenar.hu>
	<20090522124259.GA31901@uran.home.aster.pl>
Message-ID: <2302650B-1DD5-4432-8296-E52EFA9A80CA@syenar.hu>

>>> hbmk2 ../tests/hello.prg -comp=mingwarm
>> Same command will work if Windows hbmk2.exe is copied
>> into a mingwarm build bin dir. Nothing else is needed.
>> There are other combinations, but this is the simplest
>> method.
>
> AFAIK neither of the above methods works in Linux.

That's true.

> How should I use hbmk2 in Linux to create Win-x86 and WinCE
> binaries?

Let's try the hard way and simplify it later on:

---
export HB_CCPREFIX=<mingw32ce setting>
export HB_CCPATH=<mingw32ce setting>
export HB_BIN_INSTALL=<mingwarm built Harbour bin dir (for shared  
libs, I'm not sure where they are on Linux builds)>
export HB_LIB_INSTALL=<mingwarm built Harbour lib dir>
./hbmk2 ../tests/hello.prg -comp=mingwarm
---

My other machine is busy at the moment with other tasks, so can't try  
it,
so it'd be great if you could report settings / results.

If this works out okay, I can add autodetection for mingw/mingw32ce
on Linux, so that HB_CC* envvars can be dropped for default  
installations.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Fri May 22 09:32:39 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 22 09:32:44 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11105] trunk/harbour
Message-ID: <E1M7UrX-00065M-3R@74yxhf1.ch3.sourceforge.com>

Revision: 11105
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11105&view=rev
Author:   vszakats
Date:     2009-05-22 13:32:37 +0000 (Fri, 22 May 2009)

Log Message:
-----------
2009-05-22 15:32 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + Added autodetection of xmingw and mingw32ce tools on Linux.
      (untested)

  * contrib/hbwin/legacy.prg
    + Added win32prn and win32bmp compatibility classes.

  * contrib/hbwin/hbwin.ch
  * contrib/hbwin/tests/testprn.prg
    * Moved macros to hbwin.ch.
    * Minor opt in test.

  * external/sqlite3/Makefile
    - Disabled for mingwarm due to compile errors.
      Error reported on sqlite3 site.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/hbwin.ch
    trunk/harbour/contrib/hbwin/legacy.prg
    trunk/harbour/contrib/hbwin/tests/testprn.prg
    trunk/harbour/external/sqlite3/Makefile
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From rodrmigu at gmail.com  Fri May 22 09:34:27 2009
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Fri May 22 09:34:32 2009
Subject: [Harbour] Re: Error trying to compile harbour with bcc55
Message-ID: <80b05d460905220634h16703204s38bd61d4ae495b69@mail.gmail.com>

Hi Vailton,

I just realized that I have 3 differents version of Gnu Make, 3.79, 3.80 &
3.81, the DOS was getting the 3.80 version.

Thanks
Rodrigo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090522/4ba84e8c/attachment.html
From vailtom at gmail.com  Fri May 22 09:43:43 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Fri May 22 09:43:53 2009
Subject: [Harbour] Re: Error trying to compile harbour with bcc55
In-Reply-To: <80b05d460905220634h16703204s38bd61d4ae495b69@mail.gmail.com>
References: <80b05d460905220634h16703204s38bd61d4ae495b69@mail.gmail.com>
Message-ID: <531d7a750905220643h6cf4a426n8decd15490a5aa30@mail.gmail.com>

I do not know if this detail can help you, but the last time this
error happened to me was because I had downloaded the mingw32-make.exe
and was saved as c:\harbor\make.exe ... When saved as
c:\harbor\mingw32-make.exe my problems were solved.

Vailton Renato
From harbour.01 at syenar.hu  Fri May 22 09:56:46 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri May 22 09:56:54 2009
Subject: [Harbour] Re: Error trying to compile harbour with bcc55
In-Reply-To: <531d7a750905220643h6cf4a426n8decd15490a5aa30@mail.gmail.com>
References: <80b05d460905220634h16703204s38bd61d4ae495b69@mail.gmail.com>
	<531d7a750905220643h6cf4a426n8decd15490a5aa30@mail.gmail.com>
Message-ID: <B911A907-8527-4A0D-B249-109E01974688@syenar.hu>

This is good (and the recommended) practice, but by itself
it just makes it *more likely* the right make program will be
picked by Harbour build process. If the different make versions
are properly sorted out from the environment (meaning there
are no other such programs in the PATH or current dir), the
name doesn't matter, can be make.exe and mingw32-make.exe as
well. BCC's make is also called make.exe so in this case
special attention is needed to keep right PATH order (GNU
make must be first).

Brgds,
Viktor

On 2009.05.22., at 15:43, Vailton Renato wrote:

> I do not know if this detail can help you, but the last time this
> error happened to me was because I had downloaded the mingw32-make.exe
> and was saved as c:\harbor\make.exe ... When saved as
> c:\harbor\mingw32-make.exe my problems were solved.
>
> Vailton Renato
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vailtom at gmail.com  Fri May 22 10:04:17 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Fri May 22 10:04:23 2009
Subject: [Harbour] Re: Error trying to compile harbour with bcc55
In-Reply-To: <B911A907-8527-4A0D-B249-109E01974688@syenar.hu>
References: <80b05d460905220634h16703204s38bd61d4ae495b69@mail.gmail.com>
	<531d7a750905220643h6cf4a426n8decd15490a5aa30@mail.gmail.com>
	<B911A907-8527-4A0D-B249-109E01974688@syenar.hu>
Message-ID: <531d7a750905220704i70190592j9bb47f094939858f@mail.gmail.com>

Indeed! Well remembered ...
From druzus at users.sourceforge.net  Fri May 22 10:19:51 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Fri May 22 10:19:57 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11106] trunk/harbour
Message-ID: <E1M7VbD-0001dD-Vl@bj8yhf1.ch3.sourceforge.com>

Revision: 11106
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11106&view=rev
Author:   druzus
Date:     2009-05-22 14:19:51 +0000 (Fri, 22 May 2009)

Log Message:
-----------
2009-05-22 16:28 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/dir.cf
    * do not enable parallel execution rules for GNU makes 3.7* and 3.80*
      which are known to have problems with them

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/dir.cf


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vouchcac at users.sourceforge.net  Fri May 22 10:57:35 2009
From: vouchcac at users.sourceforge.net (vouchcac@users.sourceforge.net)
Date: Fri May 22 10:57:41 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11107] trunk/harbour
Message-ID: <E1M7WBj-0005JB-Ob@3kljzd1.ch3.sourceforge.com>

Revision: 11107
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11107&view=rev
Author:   vouchcac
Date:     2009-05-22 14:57:34 +0000 (Fri, 22 May 2009)

Log Message:
-----------
2009-05-22 07:52 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/hbqt/generator/hbqtgen.prg
  * harbour/contrib/hbqt/hbqt.h
  * harbour/contrib/hbqt/hbqt_qpushbutton.cpp
  * harbour/contrib/hbqt/qth/QPushButton.qth
  * harbour/contrib/hbqt/tests/demoqt.prg
    ! Fixed an abnormality in QPushButton() implementation.
      Thanks CarozoDeQuilmes for info.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbqt/generator/hbqtgen.prg
    trunk/harbour/contrib/hbqt/hbqt.h
    trunk/harbour/contrib/hbqt/hbqt_qpushbutton.cpp
    trunk/harbour/contrib/hbqt/qth/QPushButton.qth
    trunk/harbour/contrib/hbqt/tests/demoqt.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Fri May 22 11:16:27 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri May 22 11:07:31 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104] trunk/harbour
In-Reply-To: <2302650B-1DD5-4432-8296-E52EFA9A80CA@syenar.hu>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<173100328.20090522134457@tlen.pl>
	<20090522121122.GA2212@uran.home.aster.pl>
	<AA4A082E-A288-41C7-A1CE-FA48B15C3BC0@syenar.hu>
	<20090522124259.GA31901@uran.home.aster.pl>
	<2302650B-1DD5-4432-8296-E52EFA9A80CA@syenar.hu>
Message-ID: <20090522151627.GA22034@uran.home.aster.pl>

On Fri, 22 May 2009, Szak?ts Viktor wrote:

Hi,

> Let's try the hard way and simplify it later on:
> ---
> export HB_CCPREFIX=<mingw32ce setting>
> export HB_CCPATH=<mingw32ce setting>
> export HB_BIN_INSTALL=<mingwarm built Harbour bin dir (for shared libs, I'm 
> not sure where they are on Linux builds)>

The version encapsulate din RPMs does not have it at all. No WinCE binaries
are created and harbour.dll is located in the same directory as static
libraries.

> export HB_LIB_INSTALL=<mingwarm built Harbour lib dir>
> ./hbmk2 ../tests/hello.prg -comp=mingwarm
> ---
> My other machine is busy at the moment with other tasks, so can't try it,
> so it'd be great if you could report settings / results.
> If this works out okay, I can add autodetection for mingw/mingw32ce
> on Linux, so that HB_CC* envvars can be dropped for default installations.

I tried after:
   2009-05-22 15:32 UTC+0200 Viktor Szakats (harbour.01 syenar hu)

and it shows:
   hbmk: Error: HB_INSTALL_PREFIX not set, failed to autodetect.
so I set HB_INSTALL_PREFIX envvar to directory where I have full
Harbour-WinCE build: /home/druzus/CVS/harbour/out-cmg
and now hbmk2 fails at:
   /opt/mingw32ce/bin\arm-wince-mingw32ce-gcc.exe -c -O3 -march=i586 \
      -mtune=pentiumpro -fomit-frame-pointer  \
      -I"/home/druzus/CVS/harbour/out-cmg/include" hbmk2.c /tmp/hbmk_5fq2vq.c
dues to backslash (\) used instead of slash (/) in:
   /opt/mingw32ce/bin\arm-wince-mingw32ce-gcc.exe
and unnecessary .exe extension.

BTW such cross build should not be limited to Linux only but should work
also with other *nixes like BSD, Darwin or SunOS for each MinGW* ports exist
so instead of HB_OS_LINUX I suggest to use HB_OS_UNIX macro in hbmk2.

best regards,
Przemek
From mbelgrano at deltain.it  Fri May 22 11:17:12 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri May 22 11:17:37 2009
Subject: [Harbour] where get last version of minigui
Message-ID: <609353e70905220817n2b1ef92ej3bff213904df3e2b@mail.gmail.com>

where get last version of minigui For windows platform,
I search a version good for recompile harbour and  hbqt
Is usable follow version of tragon.net?  tragon.net not required msys?
http://tdragon.net/recentgcc/
Bundled Installer:?[tdm-mingw-1.905.0-4.4.0-2.exe]?(26.0 MB)
Includes C and C++ SJLJ packages from GCC 4.4.0 TDM-1 (r2), plus
binutils (2.19.1), mingw-runtime (3.15.2), w32api (3.13), mingw32-make
(3.81-20080326-3) and gdb (6.8-mingw-3).

Possible having a refresh of Universal binary?

--
Massimo Belgrano
From harbour.01 at syenar.hu  Fri May 22 11:19:57 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 22 11:20:04 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104] trunk/harbour
In-Reply-To: <20090522151627.GA22034@uran.home.aster.pl>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<173100328.20090522134457@tlen.pl>
	<20090522121122.GA2212@uran.home.aster.pl>
	<AA4A082E-A288-41C7-A1CE-FA48B15C3BC0@syenar.hu>
	<20090522124259.GA31901@uran.home.aster.pl>
	<2302650B-1DD5-4432-8296-E52EFA9A80CA@syenar.hu>
	<20090522151627.GA22034@uran.home.aster.pl>
Message-ID: <18d502870905220819v5320761ft1dcb07332055fbc8@mail.gmail.com>

> I tried after:
> ? 2009-05-22 15:32 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>
> and it shows:
> ? hbmk: Error: HB_INSTALL_PREFIX not set, failed to autodetect.

Quite strange. Looks like hbmk2 was moved from its original location.
Can it be?

> so I set HB_INSTALL_PREFIX envvar to directory where I have full
> Harbour-WinCE build: /home/druzus/CVS/harbour/out-cmg
> and now hbmk2 fails at:
> ? /opt/mingw32ce/bin\arm-wince-mingw32ce-gcc.exe -c -O3 -march=i586 \
> ? ? ?-mtune=pentiumpro -fomit-frame-pointer ?\
> ? ? ?-I"/home/druzus/CVS/harbour/out-cmg/include" hbmk2.c /tmp/hbmk_5fq2vq.c
> dues to backslash (\) used instead of slash (/) in:
> ? /opt/mingw32ce/bin\arm-wince-mingw32ce-gcc.exe
> and unnecessary .exe extension.

Yes, thanks for confirming .exe. I'll simply remove it.
I'll fix the path sep prob.

> BTW such cross build should not be limited to Linux only but should work
> also with other *nixes like BSD, Darwin or SunOS for each MinGW* ports exist
> so instead of HB_OS_LINUX I suggest to use HB_OS_UNIX macro in hbmk2.

Okay, I'll change it.

Brgds,
Viktor
From vszakats at users.sourceforge.net  Fri May 22 11:31:57 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 22 11:32:02 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11108] trunk/harbour
Message-ID: <E1M7Wiz-000067-9i@74yxhf1.ch3.sourceforge.com>

Revision: 11108
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11108&view=rev
Author:   vszakats
Date:     2009-05-22 15:31:56 +0000 (Fri, 22 May 2009)

Log Message:
-----------
2009-05-22 17:31 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed to use hb_osPathSeparator() instead of hardcoded 
      backslash in mingw* init section, as it may also be used 
      on *nix in cross compilation scenarios.
    ! Dropped .exe extensions from mingw* init section to also 
      work on *nix systems.
    * Extended xmingw, mingw32ce detection for all *nix systems.

  * contrib/hbodbc/odbc.c
    ! Cast.

  * INSTALL
  * config/global.cf
    * Removed requirement of 3.81 or upper GNU Make, now it's a
      recommendation only. If I understand correctly after
      2009-05-22 16:28 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
      older ones can also be used without parallel build feature.
      Lowered minimum version to 3.70.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/config/global.cf
    trunk/harbour/contrib/hbodbc/odbc.c
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Fri May 22 11:34:42 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri May 22 11:34:49 2009
Subject: [Harbour] where get last version of minigui
In-Reply-To: <609353e70905220817n2b1ef92ej3bff213904df3e2b@mail.gmail.com>
References: <609353e70905220817n2b1ef92ej3bff213904df3e2b@mail.gmail.com>
Message-ID: <2D5871D2-CF18-4773-9659-D52D0CC27DE7@syenar.hu>

> where get last version of minigui For windows platform,
> I search a version good for recompile harbour and  hbqt
> Is usable follow version of tragon.net?  tragon.net not required msys?
> http://tdragon.net/recentgcc/
> Bundled Installer: [tdm-mingw-1.905.0-4.4.0-2.exe] (26.0 MB)
> Includes C and C++ SJLJ packages from GCC 4.4.0 TDM-1 (r2), plus
> binutils (2.19.1), mingw-runtime (3.15.2), w32api (3.13), mingw32-make
> (3.81-20080326-3) and gdb (6.8-mingw-3).
>
> Possible having a refresh of Universal binary?

Possible but I'd rather make a next version RC1 release,
than wasting time with another unofficial one.

We need an agreement and team participation to start
this process.

Brgds,
Viktor

From mbelgrano at deltain.it  Fri May 22 11:37:51 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri May 22 11:38:17 2009
Subject: [Harbour] MySQL ODBC 3.51 and 5.1
In-Reply-To: <20090522020059.873C46806A28@eva124.dadanet.it>
References: <20090522020059.873C46806A28@eva124.dadanet.it>
Message-ID: <609353e70905220837j26bd0d3ey4b21bdebb8bf6a54@mail.gmail.com>

not a complete reply, only a suggestion
 verify your connection string
search wich is good connection string for ado and odbc 5.1 mysql


2009/5/22  <calimero22@freemail.it>:
>
> Hi
> Why does MySql ODBC connector 3.51 work fine and
> MySql ODBC connector 5.1 does NOT work?
> Thank in advance.
> Giovanni Di Maria
>
> --
>
> Dada.net has a new music store! Get MP3s and Ringtones from 1000s of
> artists, transfer them to any device and keep them forever.Click here to
> check it out.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>



-- 
Massimo Belgrano
From mbelgrano at deltain.it  Fri May 22 11:42:25 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri May 22 11:42:51 2009
Subject: [Harbour] where get last version of minigui
In-Reply-To: <2D5871D2-CF18-4773-9659-D52D0CC27DE7@syenar.hu>
References: <609353e70905220817n2b1ef92ej3bff213904df3e2b@mail.gmail.com> 
	<2D5871D2-CF18-4773-9659-D52D0CC27DE7@syenar.hu>
Message-ID: <609353e70905220842l78968571gc27c6bb329a33958@mail.gmail.com>

I agree and wait for a final decision

2009/5/22 Szak?ts Viktor <harbour.01@syenar.hu>:
>> where get last version of minigui For windows platform,
>> I search a version good for recompile harbour and ?hbqt
>> Is usable follow version of tragon.net? ?tragon.net not required msys?
>> http://tdragon.net/recentgcc/
>> Bundled Installer: [tdm-mingw-1.905.0-4.4.0-2.exe] (26.0 MB)
>> Includes C and C++ SJLJ packages from GCC 4.4.0 TDM-1 (r2), plus
>> binutils (2.19.1), mingw-runtime (3.15.2), w32api (3.13), mingw32-make
>> (3.81-20080326-3) and gdb (6.8-mingw-3).
>>
>> Possible having a refresh of Universal binary?
>
> Possible but I'd rather make a next version RC1 release,
> than wasting time with another unofficial one.
>
> We need an agreement and team participation to start
> this process.
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From broadcastmail at 123mail.org  Fri May 22 11:49:58 2009
From: broadcastmail at 123mail.org (Paul)
Date: Fri May 22 11:50:06 2009
Subject: [Harbour] Source code formatter
Message-ID: <4A16C9A6.3040503@123mail.org>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090522/f11c2311/attachment.html
From druzus at acn.waw.pl  Fri May 22 12:23:48 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri May 22 12:14:52 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11108] trunk/harbour
In-Reply-To: <E1M7Wiz-000067-9i@74yxhf1.ch3.sourceforge.com>
References: <E1M7Wiz-000067-9i@74yxhf1.ch3.sourceforge.com>
Message-ID: <20090522162348.GA13133@uran.home.aster.pl>

On Fri, 22 May 2009, vszakats@users.sourceforge.net wrote:
>   * INSTALL
>   * config/global.cf
>     * Removed requirement of 3.81 or upper GNU Make, now it's a
>       recommendation only. If I understand correctly after
>       2009-05-22 16:28 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>       older ones can also be used without parallel build feature.
>       Lowered minimum version to 3.70.

I hope but I tested only with 3.79.1 in Linux and RH7.3.
If someone can test 3.79 and/or 3.80 in Windows then it would be nice.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri May 22 12:23:44 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 22 12:23:52 2009
Subject: [Harbour] gcc 4.4.0 warnings
Message-ID: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>

FYI, otherwise the build process went smoothly, I'll make some speed
tests later:

../../binnum.c:115: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../binnum.c:123: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../binnumx.c:85: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../binnumx.c:93: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../memvars.c:1637: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../memvars.c:1649: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../memvars.c:1661: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbf1.c:207: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbf1.c:208: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbf1.c:231: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbf1.c:232: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbf1.c:1116: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbf1.c:1120: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbf1.c:1121: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbf1.c:1191: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbf1.c:1192: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbf1.c:1193: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbf1.c:2979: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbf1.c:3146: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbf1.c:3156: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbf1.c:3186: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbf1.c:5258: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbf1.c:5259: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbf1.c:5337: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbf1.c:5338: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbf1.c:5339: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbf1.c:232: warning: dereferencing pointer '({anonymous})' does
break strict-aliasing rules
../../dbf1.c:207: warning: dereferencing pointer '({anonymous})' does
break strict-aliasing rules
../../dbf1.c:208: warning: dereferencing pointer '({anonymous})' does
break strict-aliasing rules
../../dbfntx1.c:988: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1054: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1054: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1055: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1055: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1302: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1559: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1587: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1588: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1597: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1598: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1605: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1606: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1633: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1644: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1651: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1661: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1671: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1683: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1689: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1740: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1741: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1742: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1743: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1749: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1750: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1751: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1752: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1753: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1846: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1847: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1848: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1849: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1850: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1887: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1890: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1891: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1892: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1897: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1945: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1946: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1947: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1981: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1982: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1983: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:4736: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfntx1.c:1740: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfntx1.c:1741: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfntx1.c:1742: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfntx1.c:1743: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfntx1.c:1749: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfntx1.c:1750: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfntx1.c:1751: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfntx1.c:1752: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfntx1.c:1753: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfnsx1.c:1282: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1284: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1285: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1285: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1573: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1573: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1622: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1622: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1781: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1782: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1783: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1784: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1816: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1826: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1837: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1840: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1849: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1859: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1871: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1877: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1905: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1914: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1915: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1998: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1999: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:2000: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:2001: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:2036: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:2044: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:2045: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:2046: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:2050: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:2085: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:2086: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:2087: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfnsx1.c:1905: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfnsx1.c:1914: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfnsx1.c:1915: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfcdx1.c:1164: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:1250: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:1333: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:1493: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:1517: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2396: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2397: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2398: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2399: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2404: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2405: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2444: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2445: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2446: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2447: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2451: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2452: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3536: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3537: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3541: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3554: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3555: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3556: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3557: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3582: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3583: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3584: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3585: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3587: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3596: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3615: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3646: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3805: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3536: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfcdx1.c:3537: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfcdx1.c:3541: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfcdx1.c:3554: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfcdx1.c:3555: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfcdx1.c:3556: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfcdx1.c:3557: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfcdx1.c:1164: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:1250: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:1333: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:1493: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:1517: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2396: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2397: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2398: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2399: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2404: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2405: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2444: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2445: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2446: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2447: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2451: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:2452: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3536: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3537: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3541: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3554: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3555: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3556: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3557: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3582: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3583: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3584: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3585: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3587: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3596: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3615: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3646: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3805: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbfcdx1.c:3536: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfcdx1.c:3537: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfcdx1.c:3541: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfcdx1.c:3554: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfcdx1.c:3555: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfcdx1.c:3556: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbfcdx1.c:3557: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbffpt1.c:392: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:410: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:854: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:864: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:888: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:889: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:890: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:952: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:1050: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:1051: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:1052: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:1062: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:1307: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:1319: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:1454: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:1469: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:1487: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:1505: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:2541: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:3067: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:3084: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:3091: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:3099: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:3108: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:3994: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:4001: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:4002: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:4183: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:4200: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:4430: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:4563: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:4662: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../dbffpt1.c:3994: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbffpt1.c:4001: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbffpt1.c:4002: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbffpt1.c:1050: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbffpt1.c:1051: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbffpt1.c:1052: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../dbffpt1.c:1062: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../sxcompr.c:641: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../sxsem.c:158: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../sxsem.c:162: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../sxsem.c:188: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../sxsem.c:190: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../hsx.c:674: warning: dereferencing type-punned pointer will break
strict-aliasing rules
../../hsx.c:675: warning: dereferencing type-punned pointer will break
strict-aliasing rules
../../hsx.c:676: warning: dereferencing type-punned pointer will break
strict-aliasing rules
../../hsx.c:677: warning: dereferencing type-punned pointer will break
strict-aliasing rules
../../hsx.c:678: warning: dereferencing type-punned pointer will break
strict-aliasing rules
../../hsx.c:679: warning: dereferencing type-punned pointer will break
strict-aliasing rules
../../hsx.c:744: warning: dereferencing type-punned pointer will break
strict-aliasing rules
../../hsx.c:745: warning: dereferencing type-punned pointer will break
strict-aliasing rules
../../hsx.c:746: warning: dereferencing type-punned pointer will break
strict-aliasing rules
../../hsx.c:747: warning: dereferencing type-punned pointer will break
strict-aliasing rules
../../hsx.c:748: warning: dereferencing type-punned pointer will break
strict-aliasing rules
../../wvgsink.c:650: warning: dereferencing pointer 'hSink.34' does
break strict-aliasing rules
../../wvgcuig.c:1554: warning: 'iTop' may be used uninitialized in this function
../../wvgcuig.c:1554: warning: 'iLeft' may be used uninitialized in
this function
../../wvgcuig.c:1554: warning: 'iBottom' may be used uninitialized in
this function
../../wvgcuig.c:1554: warning: 'iRight' may be used uninitialized in
this function
../../bmdbfcdx.c:1180: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:1266: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:1349: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:1530: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:1554: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2433: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2434: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2435: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2436: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2441: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2442: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2481: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2482: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2483: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2484: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2488: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2489: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3573: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3574: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3578: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3591: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3592: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3593: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3594: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3619: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3620: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3621: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3622: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3624: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3633: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3652: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3683: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3842: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3573: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../bmdbfcdx.c:3574: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../bmdbfcdx.c:3578: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../bmdbfcdx.c:3591: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../bmdbfcdx.c:3592: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../bmdbfcdx.c:3593: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../bmdbfcdx.c:3594: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../bmdbfcdx.c:1180: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:1266: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:1349: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:1530: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:1554: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2433: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2434: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2435: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2436: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2441: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2442: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2481: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2482: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2483: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2484: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2488: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:2489: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3573: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3574: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3578: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3591: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3592: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3593: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3594: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3619: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3620: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3621: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3622: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3624: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3633: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3652: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3683: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3842: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../bmdbfcdx.c:3573: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../bmdbfcdx.c:3574: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../bmdbfcdx.c:3578: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../bmdbfcdx.c:3591: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../bmdbfcdx.c:3592: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../bmdbfcdx.c:3593: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../bmdbfcdx.c:3594: warning: dereferencing pointer '({anonymous})'
does break strict-aliasing rules
../../ftoc.c:98: warning: dereferencing type-punned pointer will break
strict-aliasing rules
../../misc1.c:116: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../xhbfunc.c:152: warning: dereferencing type-punned pointer will
break strict-aliasing rules
../../xhbfunc.c:158: warning: dereferencing type-punned pointer will
break strict-aliasing rules

Brgds,
Viktor
From druzus at acn.waw.pl  Fri May 22 12:33:45 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri May 22 12:24:48 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11108] trunk/harbour
In-Reply-To: <E1M7Wiz-000067-9i@74yxhf1.ch3.sourceforge.com>
References: <E1M7Wiz-000067-9i@74yxhf1.ch3.sourceforge.com>
Message-ID: <20090522163345.GA24360@uran.home.aster.pl>

On Fri, 22 May 2009, vszakats@users.sourceforge.net wrote:

Hi,

> 2009-05-22 17:31 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * utils/hbmk2/hbmk2.prg
>     ! Fixed to use hb_osPathSeparator() instead of hardcoded 
>       backslash in mingw* init section, as it may also be used 
>       on *nix in cross compilation scenarios.
>     ! Dropped .exe extensions from mingw* init section to also 
>       work on *nix systems.
>     * Extended xmingw, mingw32ce detection for all *nix systems.

Thank you very much. Now arch and tune options should be updated
to work with ARM GCC versions.

/opt/mingw32ce/bin/arm-wince-mingw32ce-gcc -c -O3 \
   -march=i586 -mtune=pentiumpro -fomit-frame-pointer \
   -I"/home/druzus/CVS/harbour/out-cmg/include" hbmk2.c /tmp/hbmk_ixhbt1.c

hbmk2.c:1: error: bad value (pentiumpro) for -mtune= switch
hbmk2.c:1: error: bad value (i586) for -march= switch

best regards,
Przemek
From harbour.01 at syenar.hu  Fri May 22 12:26:22 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 22 12:26:28 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11108] trunk/harbour
In-Reply-To: <20090522162348.GA13133@uran.home.aster.pl>
References: <E1M7Wiz-000067-9i@74yxhf1.ch3.sourceforge.com>
	<20090522162348.GA13133@uran.home.aster.pl>
Message-ID: <18d502870905220926x47a123fcv561b692f1d3480d7@mail.gmail.com>

3.80 under Windows works fine.

I'm still getting these errors with hbwin with MSVC (I've made the
test using this compiler):

---
../../axcore.c(155) : error C2143: syntax error : missing ';' before '*'
../../axcore.c(155) : error C4430: missing type specifier - int
assumed. Note: C++ does not support default-int
../../axcore.c(155) : error C4430: missing type specifier - int
assumed. Note: C++ does not support default-int
../../axcore.c(184) : error C2039: 'lpVtbl' : is not a member of 'ISink'
        ../../axcore.c(154) : see declaration of 'ISink'
../../axcore.c(184) : error C2227: left of '->Release' must point to
class/struct/union/generic type
../../axcore.c(188) : error C2143: syntax error : missing ')' before 'this'
../../axcore.c(188) : error C2143: syntax error : missing ';' before 'this'
../../axcore.c(188) : error C2059: syntax error : ')'
../../axcore.c(189) : error C2143: syntax error : missing ';' before '{'
../../axcore.c(189) : error C2447: '{' : missing function header
(old-style formal list?)
../../axcore.c(201) : error C2143: syntax error : missing ')' before 'this'
../../axcore.c(201) : error C2143: syntax error : missing ';' before 'this'
../../axcore.c(201) : error C2059: syntax error : ')'
../../axcore.c(202) : error C2143: syntax error : missing ';' before '{'
../../axcore.c(202) : error C2447: '{' : missing function header
(old-style formal list?)
../../axcore.c(207) : error C2143: syntax error : missing ')' before 'this'
../../axcore.c(207) : error C2143: syntax error : missing ';' before 'this'
../../axcore.c(207) : error C2365: 'Release' : redefinition; previous
definition was 'formerly unknown identifier'
../../axcore.c(207) : error C2059: syntax error : ')'
../../axcore.c(208) : error C2143: syntax error : missing ';' before '{'
../../axcore.c(208) : error C2447: '{' : missing function header
(old-style formal list?)
../../axcore.c(218) : error C2143: syntax error : missing ')' before 'this'
../../axcore.c(218) : error C2143: syntax error : missing ';' before 'this'
../../axcore.c(218) : error C2059: syntax error : ')'
../../axcore.c(219) : error C2143: syntax error : missing ';' before '{'
../../axcore.c(219) : error C2447: '{' : missing function header
(old-style formal list?)
../../axcore.c(226) : error C2143: syntax error : missing ')' before 'this'
../../axcore.c(226) : error C2143: syntax error : missing ';' before 'this'
../../axcore.c(226) : error C2059: syntax error : ')'
../../axcore.c(227) : error C2143: syntax error : missing ';' before '{'
../../axcore.c(227) : error C2447: '{' : missing function header
(old-style formal list?)
../../axcore.c(236) : error C2143: syntax error : missing ')' before 'this'
../../axcore.c(236) : error C2143: syntax error : missing ';' before 'this'
../../axcore.c(236) : error C2059: syntax error : ')'
../../axcore.c(237) : error C2143: syntax error : missing ';' before '{'
../../axcore.c(237) : error C2447: '{' : missing function header
(old-style formal list?)
../../axcore.c(248) : error C2143: syntax error : missing ')' before 'this'
../../axcore.c(248) : error C2143: syntax error : missing ';' before 'this'
../../axcore.c(250) : error C2059: syntax error : ')'
../../axcore.c(251) : error C2143: syntax error : missing ';' before '{'
../../axcore.c(251) : error C2447: '{' : missing function header
(old-style formal list?)
../../axcore.c(291) : error C4430: missing type specifier - int
assumed. Note: C++ does not support default-int
../../axcore.c(291) : error C2146: syntax error : missing ';' before
identifier 'ISink_Vtbl'
../../axcore.c(291) : error C4430: missing type specifier - int
assumed. Note: C++ does not support default-int
../../axcore.c(292) : error C2440: 'initializing' : cannot convert
from 'HRESULT (__stdcall *)(IDispatch *)' to 'int'
        There is no context in which this conversion is possible
../../axcore.c(293) : error C2078: too many initializers
../../axcore.c(331) : error C2039: 'lpVtbl' : is not a member of 'ISink'
        ../../axcore.c(154) : see declaration of 'ISink'
../../axcore.c(331) : error C2059: syntax error : ')'
---

Brgds,
Viktor
From vszakats at users.sourceforge.net  Fri May 22 12:32:39 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 22 12:32:44 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11109] trunk/harbour
Message-ID: <E1M7Xfj-0004P7-Gr@bj8yhf1.ch3.sourceforge.com>

Revision: 11109
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11109&view=rev
Author:   vszakats
Date:     2009-05-22 16:32:38 +0000 (Fri, 22 May 2009)

Log Message:
-----------
2009-05-22 18:32 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed to only add -march/-mtune gcc parameters for mingw/gcc 
      targets. These values are ignored by mingwarm on Windows, but 
      generate errors on Linux.

  * contrib/hbfimage/fi_winfu.c
    + FI_WINDRAW() now accepts pointer type as second parameter.
    ! FI_WINDRAW() fixed warning with gcc 4.4.0.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbfimage/fi_winfu.c
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Fri May 22 13:05:47 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri May 22 12:56:50 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11108] trunk/harbour
In-Reply-To: <18d502870905220926x47a123fcv561b692f1d3480d7@mail.gmail.com>
References: <E1M7Wiz-000067-9i@74yxhf1.ch3.sourceforge.com>
	<20090522162348.GA13133@uran.home.aster.pl>
	<18d502870905220926x47a123fcv561b692f1d3480d7@mail.gmail.com>
Message-ID: <20090522170547.GA31912@uran.home.aster.pl>

On Fri, 22 May 2009, Szak?ts Viktor wrote:
> I'm still getting these errors with hbwin with MSVC (I've made the
> test using this compiler):
> ---
> ../../axcore.c(188) : error C2143: syntax error : missing ')' before 'this'
> ../../axcore.c(188) : error C2143: syntax error : missing ';' before 'this'
> ../../axcore.c(188) : error C2059: syntax error : ')'

'this' and 'class' are reserved words in C++.
To all:
   Never create C code which use such identifiers if you plan to use
   also C++ compilers.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri May 22 13:58:10 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 22 13:58:18 2009
Subject: [Harbour] constant array index optimization idea
Message-ID: <18d502870905221058p540568c1m68a57adfb3de1125@mail.gmail.com>

Hi Przemek and All,

It's common practice in Clipper/Harbour to use arrays to "emulate" structures:
---
#define _STRU_xVAR1  1
#define _STRU_xVAR2  2
#define _STRU_MAX_

LOCAL stru[ _STRU_MAX_ ]

stru[ _STRU_xVAR1 ] := 100
? stru[ _STRU_xVAR1 ]
---

In these scenarios, the array is indexed with a constant
in almost all cases.

This, currently, generates this pcode:
---
	HB_P_PUSHBYTE, 100,	/* 100 */
	HB_P_PUSHLOCALNEAR, 1,	/* STRU */
	HB_P_ONE,
	HB_P_ARRAYPOP,

	HB_P_PUSHFUNCSYM, 1, 0,	/* QOUT */
	HB_P_PUSHLOCALNEAR, 1,	/* STRU */
	HB_P_ONE,
	HB_P_ARRAYPUSH,
---

I wonder if we could optimize it by using one indexed
array pop opcode:

---
	HB_P_PUSHBYTE, 100,	/* 100 */
	HB_P_ARRAYPOPINDEX, 1,

	HB_P_PUSHFUNCSYM, 1, 0,	/* QOUT */
	HB_P_ARRAYPUSHINDEX, 1,
---

Since these kind of lines may appear in mass, such optimization
may result in code size reduction and speed increase.

Any opinion?

Brgds,
Viktor
From vszakats at users.sourceforge.net  Fri May 22 14:00:06 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 22 14:00:12 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11110] trunk/harbour
Message-ID: <E1M7Z2M-00010W-Ol@d5vjzd1.ch3.sourceforge.com>

Revision: 11110
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11110&view=rev
Author:   vszakats
Date:     2009-05-22 18:00:05 +0000 (Fri, 22 May 2009)

Log Message:
-----------
2009-05-22 19:59 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbwin/axcore.c
    ! Fixed 'this' -> 'lpThis'
    ; Lots of errors remain with msvc.

  * utils/hbmk2/hbmk2.prg
    * Minor cleanup.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/axcore.c
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Fri May 22 15:44:05 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri May 22 15:35:09 2009
Subject: [Harbour] constant array index optimization idea
In-Reply-To: <18d502870905221058p540568c1m68a57adfb3de1125@mail.gmail.com>
References: <18d502870905221058p540568c1m68a57adfb3de1125@mail.gmail.com>
Message-ID: <20090522194405.GA8327@uran.home.aster.pl>

On Fri, 22 May 2009, Szak?ts Viktor wrote:

Hi,

> It's common practice in Clipper/Harbour to use arrays to "emulate" structures:
> ---
> #define _STRU_xVAR1  1
> #define _STRU_xVAR2  2
> #define _STRU_MAX_
> LOCAL stru[ _STRU_MAX_ ]
> stru[ _STRU_xVAR1 ] := 100
> ? stru[ _STRU_xVAR1 ]
> ---
> In these scenarios, the array is indexed with a constant
> in almost all cases.
> This, currently, generates this pcode:
> ---
> 	HB_P_PUSHBYTE, 100,	/* 100 */
> 	HB_P_PUSHLOCALNEAR, 1,	/* STRU */
> 	HB_P_ONE,
> 	HB_P_ARRAYPOP,
> 
> 	HB_P_PUSHFUNCSYM, 1, 0,	/* QOUT */
> 	HB_P_PUSHLOCALNEAR, 1,	/* STRU */
> 	HB_P_ONE,
> 	HB_P_ARRAYPUSH,
> ---
> I wonder if we could optimize it by using one indexed
> array pop opcode:
> ---
> 	HB_P_PUSHBYTE, 100,	/* 100 */
> 	HB_P_ARRAYPOPINDEX, 1,
> 	HB_P_PUSHFUNCSYM, 1, 0,	/* QOUT */
> 	HB_P_ARRAYPUSHINDEX, 1,
> ---
> Since these kind of lines may appear in mass, such optimization
> may result in code size reduction and speed increase.

Yes, it will give some speed improvement but please remember that
we have limited PCODE list. Such problem does not exist in -gc3
output because we can use unlimited list of functions and such
code is already optimized. Just look at code generated when -gc3
is used and hb_xvmArrayItemPush()/hb_xvmArrayItemPop().

best regards,
Przemek
From harbour.01 at syenar.hu  Fri May 22 16:07:18 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 22 16:07:24 2009
Subject: [Harbour] constant array index optimization idea
In-Reply-To: <20090522194405.GA8327@uran.home.aster.pl>
References: <18d502870905221058p540568c1m68a57adfb3de1125@mail.gmail.com>
	<20090522194405.GA8327@uran.home.aster.pl>
Message-ID: <18d502870905221307w2c04dae2ic2bfc792283cad22@mail.gmail.com>

>> Since these kind of lines may appear in mass, such optimization
>> may result in code size reduction and speed increase.
>
> Yes, it will give some speed improvement but please remember that
> we have limited PCODE list. Such problem does not exist in -gc3
> output because we can use unlimited list of functions and such
> code is already optimized. Just look at code generated when -gc3
> is used and hb_xvmArrayItemPush()/hb_xvmArrayItemPop().

Nice, I didn't know it. But, since -gc3 makes code pretty big, and
it's not very practical to compile whole app level code with it (I'm
getting a 27MB executable - vs. 10.8MB), and it's the app code
which holds most of these constructs, at the end, the final app
cannot benefit much from it, certainly not size-wise.

We still have 75 free pcode slots, I'm not saying to waste them,
but if we could give benefit by cleverly adding a few ones, we should
IMO do it. If we use them up all in the future, we can make a usage
statistics, and convert rarely used, or non-speed/size criticial ones
to two bytes.

[ Well, such quasi structures are an relatively ugly hack anyway,
maybe we should rather think about some sort of record / structure
syntax, but that leads very far and I don't know what would be a
good way to do it, if at all. ]

Some more optimization ideas from the past: SUBSTR(), ASC( SUBSTR() ),
RETURN .T., RETURN .F., RETURN NIL

Another nice optimization is what Mindaugas wrote in a document:
If compiler detects that a given variable was only used with numeric
values (assigned constant numeric, and wasn't involved in any other
assignments, passed by reference, etc) it can be safely optimized
to use native C type with -gc3 output. Such case is typical for loop
variables. Loops are often used in generic code, compiler with -gc3,
so it looks like to give benefit.

--- quote from Mindaugas:
"P.S. Here is another thing (not related to virtual machine and pcode
evaluation), but pcode tracing allows to find out various things, for
example to trace type of variables, or trace usage of constant values.
This allows to make constant folding other optimisations
(see http://en.wikipedia.org/wiki/Constant_folding). Ex.:

   FOR nI := 1 TO 50
      QOUT(nI)
   NEXT

can be compiled to:

   int   local1;
   local1 = 1;
 lab00001:
   hb_xvmPushFuncSymbol( symbols + 1 );
   hb_xvmPushInteger( local1 );
   if( hb_xvmDo( 1 ) ) break;
   local1++;
 lab00002:
   fValue = local1 > 50;
   if( !fValue )
      goto lab00001;

instead of:

   hb_xvmPushInteger( 1 );
   hb_xvmPushUnRef();
   hb_xvmPopLocal( 1 );
   goto lab00002;
 lab00001: ;
   hb_xvmPushFuncSymbol( symbols + 1 );
   hb_xvmPushLocal( 1 );
   if( hb_xvmDo( 1 ) ) break;
   if( hb_xvmLocalIncPush( 1 ) ) break;
 lab00002: ;
   if( hb_xvmGreaterThenIntIs( 50, &fValue ) ) break;
   if( !fValue )
      goto lab00001;

But perhaps we must wait for type declarations in Harbour instead of
trying to guess variable types from pcode."
---

Brgds,
Viktor
From vszakats at users.sourceforge.net  Fri May 22 16:29:21 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 22 16:29:27 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11111] trunk/harbour
Message-ID: <E1M7bMn-00068K-QJ@74yxhf1.ch3.sourceforge.com>

Revision: 11111
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11111&view=rev
Author:   vszakats
Date:     2009-05-22 20:29:20 +0000 (Fri, 22 May 2009)

Log Message:
-----------
2009-05-22 22:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    % mingw tool extensions now again have ".exe" extension, but 
      only on Windows, it's slightly more optimal this way.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Fri May 22 17:10:36 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 22 17:10:44 2009
Subject: [Harbour] Re: gcc 4.4.0 warnings
In-Reply-To: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>
References: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>
Message-ID: <18d502870905221410t6c059f5fiba7b9b812218c2e1@mail.gmail.com>

About this warning and possible resolutions:
http://gcc.gnu.org/ml/gcc-help/2007-07/msg00294.html

As for speed: GCC 4.4.0 is a bit speedier and generates
slightly smaller code, but not significantly.

Brgds,
Viktor

On Fri, May 22, 2009 at 6:23 PM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:
> FYI, otherwise the build process went smoothly, I'll make some speed
> tests later:
>
> ../../binnum.c:115: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../binnum.c:123: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../binnumx.c:85: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../binnumx.c:93: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../memvars.c:1637: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../memvars.c:1649: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../memvars.c:1661: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbf1.c:207: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbf1.c:208: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbf1.c:231: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbf1.c:232: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbf1.c:1116: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbf1.c:1120: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbf1.c:1121: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbf1.c:1191: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbf1.c:1192: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbf1.c:1193: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbf1.c:2979: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbf1.c:3146: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbf1.c:3156: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbf1.c:3186: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbf1.c:5258: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbf1.c:5259: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbf1.c:5337: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbf1.c:5338: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbf1.c:5339: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbf1.c:232: warning: dereferencing pointer '({anonymous})' does
> break strict-aliasing rules
> ../../dbf1.c:207: warning: dereferencing pointer '({anonymous})' does
> break strict-aliasing rules
> ../../dbf1.c:208: warning: dereferencing pointer '({anonymous})' does
> break strict-aliasing rules
> ../../dbfntx1.c:988: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1054: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1054: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1055: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1055: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1302: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1559: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1587: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1588: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1597: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1598: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1605: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1606: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1633: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1644: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1651: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1661: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1671: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1683: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1689: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1740: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1741: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1742: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1743: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1749: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1750: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1751: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1752: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1753: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1846: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1847: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1848: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1849: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1850: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1887: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1890: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1891: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1892: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1897: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1945: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1946: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1947: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1981: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1982: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1983: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:4736: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfntx1.c:1740: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfntx1.c:1741: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfntx1.c:1742: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfntx1.c:1743: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfntx1.c:1749: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfntx1.c:1750: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfntx1.c:1751: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfntx1.c:1752: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfntx1.c:1753: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfnsx1.c:1282: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1284: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1285: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1285: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1573: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1573: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1622: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1622: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1781: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1782: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1783: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1784: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1816: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1826: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1837: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1840: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1849: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1859: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1871: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1877: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1905: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1914: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1915: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1998: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1999: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:2000: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:2001: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:2036: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:2044: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:2045: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:2046: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:2050: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:2085: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:2086: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:2087: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfnsx1.c:1905: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfnsx1.c:1914: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfnsx1.c:1915: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfcdx1.c:1164: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:1250: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:1333: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:1493: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:1517: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2396: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2397: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2398: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2399: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2404: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2405: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2444: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2445: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2446: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2447: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2451: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2452: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3536: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3537: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3541: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3554: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3555: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3556: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3557: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3582: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3583: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3584: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3585: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3587: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3596: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3615: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3646: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3805: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3536: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfcdx1.c:3537: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfcdx1.c:3541: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfcdx1.c:3554: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfcdx1.c:3555: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfcdx1.c:3556: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfcdx1.c:3557: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfcdx1.c:1164: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:1250: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:1333: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:1493: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:1517: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2396: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2397: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2398: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2399: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2404: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2405: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2444: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2445: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2446: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2447: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2451: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:2452: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3536: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3537: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3541: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3554: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3555: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3556: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3557: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3582: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3583: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3584: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3585: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3587: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3596: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3615: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3646: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3805: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbfcdx1.c:3536: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfcdx1.c:3537: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfcdx1.c:3541: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfcdx1.c:3554: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfcdx1.c:3555: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfcdx1.c:3556: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbfcdx1.c:3557: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbffpt1.c:392: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:410: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:854: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:864: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:888: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:889: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:890: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:952: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:1050: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:1051: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:1052: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:1062: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:1307: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:1319: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:1454: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:1469: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:1487: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:1505: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:2541: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:3067: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:3084: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:3091: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:3099: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:3108: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:3994: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:4001: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:4002: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:4183: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:4200: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:4430: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:4563: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:4662: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../dbffpt1.c:3994: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbffpt1.c:4001: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbffpt1.c:4002: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbffpt1.c:1050: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbffpt1.c:1051: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbffpt1.c:1052: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../dbffpt1.c:1062: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../sxcompr.c:641: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../sxsem.c:158: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../sxsem.c:162: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../sxsem.c:188: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../sxsem.c:190: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../hsx.c:674: warning: dereferencing type-punned pointer will break
> strict-aliasing rules
> ../../hsx.c:675: warning: dereferencing type-punned pointer will break
> strict-aliasing rules
> ../../hsx.c:676: warning: dereferencing type-punned pointer will break
> strict-aliasing rules
> ../../hsx.c:677: warning: dereferencing type-punned pointer will break
> strict-aliasing rules
> ../../hsx.c:678: warning: dereferencing type-punned pointer will break
> strict-aliasing rules
> ../../hsx.c:679: warning: dereferencing type-punned pointer will break
> strict-aliasing rules
> ../../hsx.c:744: warning: dereferencing type-punned pointer will break
> strict-aliasing rules
> ../../hsx.c:745: warning: dereferencing type-punned pointer will break
> strict-aliasing rules
> ../../hsx.c:746: warning: dereferencing type-punned pointer will break
> strict-aliasing rules
> ../../hsx.c:747: warning: dereferencing type-punned pointer will break
> strict-aliasing rules
> ../../hsx.c:748: warning: dereferencing type-punned pointer will break
> strict-aliasing rules
> ../../wvgsink.c:650: warning: dereferencing pointer 'hSink.34' does
> break strict-aliasing rules
> ../../wvgcuig.c:1554: warning: 'iTop' may be used uninitialized in this function
> ../../wvgcuig.c:1554: warning: 'iLeft' may be used uninitialized in
> this function
> ../../wvgcuig.c:1554: warning: 'iBottom' may be used uninitialized in
> this function
> ../../wvgcuig.c:1554: warning: 'iRight' may be used uninitialized in
> this function
> ../../bmdbfcdx.c:1180: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:1266: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:1349: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:1530: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:1554: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2433: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2434: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2435: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2436: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2441: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2442: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2481: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2482: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2483: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2484: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2488: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2489: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3573: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3574: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3578: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3591: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3592: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3593: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3594: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3619: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3620: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3621: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3622: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3624: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3633: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3652: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3683: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3842: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3573: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../bmdbfcdx.c:3574: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../bmdbfcdx.c:3578: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../bmdbfcdx.c:3591: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../bmdbfcdx.c:3592: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../bmdbfcdx.c:3593: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../bmdbfcdx.c:3594: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../bmdbfcdx.c:1180: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:1266: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:1349: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:1530: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:1554: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2433: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2434: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2435: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2436: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2441: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2442: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2481: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2482: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2483: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2484: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2488: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:2489: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3573: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3574: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3578: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3591: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3592: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3593: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3594: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3619: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3620: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3621: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3622: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3624: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3633: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3652: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3683: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3842: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../bmdbfcdx.c:3573: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../bmdbfcdx.c:3574: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../bmdbfcdx.c:3578: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../bmdbfcdx.c:3591: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../bmdbfcdx.c:3592: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../bmdbfcdx.c:3593: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../bmdbfcdx.c:3594: warning: dereferencing pointer '({anonymous})'
> does break strict-aliasing rules
> ../../ftoc.c:98: warning: dereferencing type-punned pointer will break
> strict-aliasing rules
> ../../misc1.c:116: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../xhbfunc.c:152: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
> ../../xhbfunc.c:158: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
>
> Brgds,
> Viktor
>
From mbelgrano at deltain.it  Fri May 22 19:42:24 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri May 22 19:42:48 2009
Subject: [Harbour] where get last version of minigui
In-Reply-To: <2D5871D2-CF18-4773-9659-D52D0CC27DE7@syenar.hu>
References: <609353e70905220817n2b1ef92ej3bff213904df3e2b@mail.gmail.com> 
	<2D5871D2-CF18-4773-9659-D52D0CC27DE7@syenar.hu>
Message-ID: <609353e70905221642m7470d1f3ke48aa51427c17ed9@mail.gmail.com>

Msys is required for compiling harbour?
where  can donwload right version for http://tdragon.net/recentgcc/

2009/5/22 Szak?ts Viktor <harbour.01@syenar.hu>:
>> where get last version of minigui For windows platform,
>> I search a version good for recompile harbour and ?hbqt
>> Is usable follow version of tragon.net? ?tragon.net not required msys?
>> http://tdragon.net/recentgcc/
>> Bundled Installer: [tdm-mingw-1.905.0-4.4.0-2.exe] (26.0 MB)
>> Includes C and C++ SJLJ packages from GCC 4.4.0 TDM-1 (r2), plus
>> binutils (2.19.1), mingw-runtime (3.15.2), w32api (3.13), mingw32-make
>> (3.81-20080326-3) and gdb (6.8-mingw-3).
>>
>> Possible having a refresh of Universal binary?
>
> Possible but I'd rather make a next version RC1 release,
> than wasting time with another unofficial one.
>
> We need an agreement and team participation to start
> this process.
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From druzus at acn.waw.pl  Fri May 22 20:52:10 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri May 22 20:43:13 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11109] trunk/harbour
In-Reply-To: <E1M7Xfj-0004P7-Gr@bj8yhf1.ch3.sourceforge.com>
References: <E1M7Xfj-0004P7-Gr@bj8yhf1.ch3.sourceforge.com>
Message-ID: <20090523005210.GA11044@uran.home.aster.pl>

On Fri, 22 May 2009, vszakats@users.sourceforge.net wrote:

Hi,

> 2009-05-22 18:32 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * utils/hbmk2/hbmk2.prg
>     ! Fixed to only add -march/-mtune gcc parameters for mingw/gcc 
>       targets. These values are ignored by mingwarm on Windows, but 
>       generate errors on Linux.

Thank you. The link phase has some problems yet.

   /opt/mingw32ce/bin/arm-wince-mingw32ce-gcc hbmk2.o hbmk_5qp70y.o \
      -Wl,--start-group -lgttrm -lhbcpage -lhblang -lhbcommon -lhbcplr \
      -lhbdebug -lhbvm -lhbrdd -lhbusrrdd -lhbuddall -lhbhsx -lhbsix \
      -lrddntx -lrddnsx -lrddcdx -lrddfpt -lhbrtl -lhbpp -lhbmacro -lhbextern \
      -lgtcgi -lgtpca -lgtstd -lgtwvt -lgtgui  -lhbpcre \
      -lhbzlib -lwininet -lws2 -lcommdlg -lcommctrl -luuid -lole32 \
      -Wl,--end-group -ohbmk2.exe -L/home/druzus/CVS/harbour/out-cmg/lib

/opt/mingw32ce/lib/gcc/arm-wince-mingw32ce/4.1.0/../../../../arm-wince-mingw32ce/bin/ld: cannot find -lgttrm
collect2: ld returned 1 exit status
hbmk: Error: Running linker. 1

Looks that the library list contains:
   -lgttrm -lgtxwc -lgtcrs -lgtsln
which do not exist in Windows builds.
I've found that -lgtxwc -lgtcrs -lgtsln are added by:
   libdynhas=gtxwc
   libdynhas=gtcrs
   libdynhas=gtsln
in hbmk.cfg from native hbmk2 build. I think that hbmk2 should ignore any
settings from hbmk.cfg if it has incompatible 'arch' or 'comp' settings
to the one used by user in command line. Anyhow here I can create some
custom hbmk2 and hbmk.cfg copy for cross builds but how to disable default
GT (-lgttrm)?

best regards,
Przemek
From harbour.01 at syenar.hu  Sat May 23 02:29:34 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat May 23 02:29:43 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11109] trunk/harbour
In-Reply-To: <20090523005210.GA11044@uran.home.aster.pl>
References: <E1M7Xfj-0004P7-Gr@bj8yhf1.ch3.sourceforge.com>
	<20090523005210.GA11044@uran.home.aster.pl>
Message-ID: <37003A84-F1D9-4AEA-B54A-B19938DED1DD@syenar.hu>

> Looks that the library list contains:
>   -lgttrm -lgtxwc -lgtcrs -lgtsln
> which do not exist in Windows builds.
> I've found that -lgtxwc -lgtcrs -lgtsln are added by:
>   libdynhas=gtxwc
>   libdynhas=gtcrs
>   libdynhas=gtsln
> in hbmk.cfg from native hbmk2 build. I think that hbmk2 should  
> ignore any
> settings from hbmk.cfg if it has incompatible 'arch' or 'comp'  
> settings
> to the one used by user in command line. Anyhow here I can create some
> custom hbmk2 and hbmk.cfg copy for cross builds but how to disable  
> default
> GT (-lgttrm)?

I think the best solution here is to generate a little bit different
hbmk.cfg at build time:

libdynhas={linux}gtxwc
libdynhas={linux}gtcrs
libdynhas={linux}gtsln

Can you make a try with these settings in both native and cross- 
compile mode?

Bgds,
Viktor

From druzus at acn.waw.pl  Sat May 23 04:57:02 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat May 23 04:48:04 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11109] trunk/harbour
In-Reply-To: <37003A84-F1D9-4AEA-B54A-B19938DED1DD@syenar.hu>
References: <E1M7Xfj-0004P7-Gr@bj8yhf1.ch3.sourceforge.com>
	<20090523005210.GA11044@uran.home.aster.pl>
	<37003A84-F1D9-4AEA-B54A-B19938DED1DD@syenar.hu>
Message-ID: <20090523085702.GA14625@uran.home.aster.pl>

On Sat, 23 May 2009, Szak?ts Viktor wrote:

Hi,

>> Looks that the library list contains:
>>   -lgttrm -lgtxwc -lgtcrs -lgtsln
>> which do not exist in Windows builds.
>> I've found that -lgtxwc -lgtcrs -lgtsln are added by:
>>   libdynhas=gtxwc
>>   libdynhas=gtcrs
>>   libdynhas=gtsln
>> in hbmk.cfg from native hbmk2 build. I think that hbmk2 should ignore any
>> settings from hbmk.cfg if it has incompatible 'arch' or 'comp' settings
>> to the one used by user in command line. Anyhow here I can create some
>> custom hbmk2 and hbmk.cfg copy for cross builds but how to disable default
>> GT (-lgttrm)?
> I think the best solution here is to generate a little bit different
> hbmk.cfg at build time:
> libdynhas={linux}gtxwc
> libdynhas={linux}gtcrs
> libdynhas={linux}gtsln
> Can you make a try with these settings in both native and cross-compile 
> mode?

Thanks for the hint it resolves the problem and default GT is also here
as gtdef=.
I suggest to add such condition to all options in hbmk.cfg and also with
compiler protection so it will look like:

   arch=linux
   comp={linux}gcc
   gtdef={linux&gcc}gttrm
   libdynhas={linux&gcc}gtxwc
   libdynhas={linux&gcc}gtcrs
   libdynhas={linux&gcc}gtsln

If you agree I'll commit it.
The next thing is setting HB_INSTALL_PREFIX.
Autodetection works until I'll do not use -comp=mingwarm switch,
If I set it then I have message:
   hbmk: Error: HB_INSTALL_PREFIX not set, failed to autodetect
It's caused by .exe extension when hbmk2 looks for harbour binaries.
Can you resolve it?, f.e. ignore auto detection when user forces cross
compiling.

The second interesting thing is -trace output. hbmk2 shows:

   /home/druzus/CVS/harbour/out-cmg-tst/bin/harbour.exe -n2 hbmk2.prg \
      -i/home/druzus/CVS/harbour/out-cmg-tst/include \
      -undef:__PLATFORM__LINUX -undef:__PLATFORM__UNIX \
      -D__PLATFORM__WINDOWS -D__PLATFORM__WINCE
   Harbour 1.1.0dev (Rev. 11106)
   Copyright (c) 1999-2009, http://www.harbour-project.org/
   Compiling 'hbmk2.prg'...
   Lines 6453, Functions/Procedures 80
   Generating C source output to 'hbmk2.c'... Done.
   hbmk: C compiler command:

but /home/druzus/CVS/harbour/out-cmg-tst/bin/harbour.exe for sure
cannot be executed because it's WinCE executable. I even removed
whole /home/druzus/CVS/harbour/out-cmg-tst/bin directory and executed
   hbmk2 -comp=mingwarm ...
and it was working still printing above command.
I guess it's result of some desynchronization between real executed
commands and messages showed by trace. IMHO such things should be fixed
because they makes debugging very hard and hbmk2 always have to show
real executed command.

best regards,
Przemek
From druzus at users.sourceforge.net  Sat May 23 05:04:56 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Sat May 23 05:05:03 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11112] trunk/harbour
Message-ID: <E1M7nA0-0007fz-HG@d5vjzd1.ch3.sourceforge.com>

Revision: 11112
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11112&view=rev
Author:   druzus
Date:     2009-05-23 09:04:55 +0000 (Sat, 23 May 2009)

Log Message:
-----------
2009-05-23 11:13 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/hb-func.sh
    * reduce the scope of default options in hbmk.cfg to given platform
      and compiler {arch&comp}. Viktor please verify it.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/hb-func.sh


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Sat May 23 05:44:12 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat May 23 05:44:21 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11112] trunk/harbour
In-Reply-To: <E1M7nA0-0007fz-HG@d5vjzd1.ch3.sourceforge.com>
References: <E1M7nA0-0007fz-HG@d5vjzd1.ch3.sourceforge.com>
Message-ID: <BA29E941-B28A-4335-848C-88D74ABF191D@syenar.hu>

> Log Message:
> -----------
> 2009-05-23 11:13 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/bin/hb-func.sh
>    * reduce the scope of default options in hbmk.cfg to given platform
>      and compiler {arch&comp}. Viktor please verify it.

Thank you. Two observations: comp= doesn't accept filter value,
so I think we should leave it as it was (it's overridden
anyway by cmdline -comp= switch in case of cross-compiling).
The other is that it might be better to filter for platform
only for a few settings, as they seem to be platform rather
than platform+compiler specific. gtdef=, libdynhas= and libs=
are these options. But maybe there are some factors I'm
missing here.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sat May 23 05:50:54 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat May 23 05:51:03 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11109] trunk/harbour
In-Reply-To: <20090523085702.GA14625@uran.home.aster.pl>
References: <E1M7Xfj-0004P7-Gr@bj8yhf1.ch3.sourceforge.com>
	<20090523005210.GA11044@uran.home.aster.pl>
	<37003A84-F1D9-4AEA-B54A-B19938DED1DD@syenar.hu>
	<20090523085702.GA14625@uran.home.aster.pl>
Message-ID: <EC9C2BDB-3F15-45B4-BC8E-AAE587F142B6@syenar.hu>

> The next thing is setting HB_INSTALL_PREFIX.
> Autodetection works until I'll do not use -comp=mingwarm switch,
> If I set it then I have message:
>   hbmk: Error: HB_INSTALL_PREFIX not set, failed to autodetect
> It's caused by .exe extension when hbmk2 looks for harbour binaries.
> Can you resolve it?, f.e. ignore auto detection when user forces cross
> compiling.

Okay, that explains it, I'll commit a fix for it a bit later today.

> The second interesting thing is -trace output. hbmk2 shows:
>
>   /home/druzus/CVS/harbour/out-cmg-tst/bin/harbour.exe -n2 hbmk2.prg \
>      -i/home/druzus/CVS/harbour/out-cmg-tst/include \
>      -undef:__PLATFORM__LINUX -undef:__PLATFORM__UNIX \
>      -D__PLATFORM__WINDOWS -D__PLATFORM__WINCE
>   Harbour 1.1.0dev (Rev. 11106)
>   Copyright (c) 1999-2009, http://www.harbour-project.org/
>   Compiling 'hbmk2.prg'...
>   Lines 6453, Functions/Procedures 80
>   Generating C source output to 'hbmk2.c'... Done.
>   hbmk: C compiler command:
>
> but /home/druzus/CVS/harbour/out-cmg-tst/bin/harbour.exe for sure
> cannot be executed because it's WinCE executable. I even removed
> whole /home/druzus/CVS/harbour/out-cmg-tst/bin directory and executed
>   hbmk2 -comp=mingwarm ...
> and it was working still printing above command.
> I guess it's result of some desynchronization between real executed
> commands and messages showed by trace. IMHO such things should be  
> fixed
> because they makes debugging very hard and hbmk2 always have to show
> real executed command.

What happens here is that hbmk2 uses its internal Harbour compiler
in all cases (except in -xhb mode), and it prints an *equivalent*
command line on screen (in case someone would like to copy it, or
just FYI). This cmdline might be misleading for cross-compilation
sessions. What I can do is first to fix the .exe extension, this
is easy, but the path could still be off (since external Harbour
executable isn't needed and may not be present at all). If this is
a problem, I can change this text to something else (like "(internal
compiler)") when cross-compiling is done. I'd vote to fix the
extension only.

Anyway it's just a cosmetic issue and it should properly compile
regardless.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Sat May 23 08:10:45 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat May 23 08:10:51 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11113] trunk/harbour
Message-ID: <E1M7q3p-0007tB-Ms@c3vjzd1.ch3.sourceforge.com>

Revision: 11113
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11113&view=rev
Author:   vszakats
Date:     2009-05-23 12:10:44 +0000 (Sat, 23 May 2009)

Log Message:
-----------
2009-05-23 14:05 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * utils/hbmk2/hbmk2.prg
    ! Fixed to morph harbour binary extension according to target
      platform. This should fix HB_INSTALL_PREFIX autodetection and
      also -trace display of harbour command line.
      Please test.

  * harbour/bin/hb-func.sh
    ! Changed comp= line to not have a filter. Filters aren't
      supported here, even the whole line isn't processed yet
      by hbmk2.

  * INSTALL
    * Minor correction.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/bin/hb-func.sh
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From marek.horodyski at interia.pl  Sat May 23 15:18:56 2009
From: marek.horodyski at interia.pl (marek.horodyski@interia.pl)
Date: Sat May 23 15:19:03 2009
Subject: [Harbour] exit with switch and for each
Message-ID: <20090523191856.A05E77E8074@f17.poczta.interia.pl>

How we can without additive rules use exit for escape from loop in this
syntax :

for each x in stringORarray
switch x
case 'a'
 exit // but we need exit from "for each", not only from switch
end
next

Maby, for optimization, for escape from switch we need another rules word
?

Regards,
Marek Horodyski





 	
----------------------------------------------------------------------
Sprawdz pogode na dzis!
Kliknij >>> http://link.interia.pl/f217d

From vailtom at gmail.com  Sat May 23 16:02:42 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Sat May 23 16:02:47 2009
Subject: [Harbour] Updated: www.harbour-project.org & some ideias...
Message-ID: <531d7a750905231302x1782084em52abbc49fb7e3e45@mail.gmail.com>

Updated the main page of the project with a link into the right side
and also in the news section. Here in Brazil I made the call in many
programming forums for all support our project in the voting link on
our page.

I would like take this opportunity to comment on some ideas for our
site ... I believe that with the launch of the next release we can put
more content on our site including things like:

* Uhttp - demonstrates the use of resources such as threads, Mutex,
support INET () among others.

* INSTALL - I'm thinking of putting as an "article" about how to
"download, compile and install the HB"

* HBMK2 - An article with some simple examples on how to use it with
Linux, Windows and even with FW, hwGUI.

I'm still developing more ideas, any suggestions will be welcome.

Well the weekend to all,
Vailton Renato
From vailtom at gmail.com  Sat May 23 16:05:56 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Sat May 23 16:06:01 2009
Subject: [Harbour] exit with switch and for each
In-Reply-To: <20090523191856.A05E77E8074@f17.poczta.interia.pl>
References: <20090523191856.A05E77E8074@f17.poczta.interia.pl>
Message-ID: <531d7a750905231305r10f44100t1a14a1504891f559@mail.gmail.com>

Here I use something like this:

lExit := .F.

for each x in stringORarray
switch x
case 'a'
 lExit := .T.
 exit // but we need exit from "for each", not only from switch
end
 if lExit
   exit;
 end
next
From zen25000 at zen.co.uk  Sat May 23 17:55:27 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Sat May 23 17:54:22 2009
Subject: [Harbour] Problem linking.  /usr/bin/ld: cannot find....
Message-ID: <4A1870CF.1040606@zen.co.uk>

I wonder if anyone can help me. This compiles and links OK in an older 
installation of Mandriva Linux and Harbour which is set up the same AFAIK.
I have other applications building OK in this new installation with both 
hbmk and hbmk2, however I cannot link this one which has an external C 
library (libk8055 - special usb device driver)
libk8055 is installed in /usr/lib which is in my PATH as can be seen 
below. I have /usr/lib in /etc/ld.so.conf.
I have no special Harbour paths set in either installation.
I have run out of ideas after two days - what might I be missing? :-(

[baz@jackodesktop husb]$ hbmk -gc -mt @usb.txt
Harbour 1.1.0dev (Rev. 11090)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Reading 'usb.txt'...
Compiling module 'usb.prg'...
Compiling module 'f_browsedit.prg'...
Lines 1228, Functions/Procedures 10
Generating C source output to 'usb.c'... Done.

[baz@jackodesktop husb]$ hbcc -mt -libk8055 hbk8055.c usb.c -o husb
/usr/bin/ld: cannot find -libk8055
collect2: ld returned 1 exit status

[baz@jackodesktop husb]$ echo $PATH
/usr/bin:/bin:/usr/local/bin:/usr/X11R6/bin/:/usr/games:/usr/lib/qt4/bin:/usr/bin:/opt/kde3/bin:/home/baz/bin:/usr/lib

[baz@jackodesktop husb]$ whereis libk8055
libk8055: /usr/lib/libk8055.a /usr/lib/libk8055.c /usr/lib/libk8055.so 
/usr/lib/libk8055.o

From philb at philb.us  Sat May 23 19:06:48 2009
From: philb at philb.us (Phil Barnett)
Date: Sat May 23 19:06:55 2009
Subject: [Harbour] Updated: www.harbour-project.org & some ideias...
In-Reply-To: <531d7a750905231302x1782084em52abbc49fb7e3e45@mail.gmail.com>
References: <531d7a750905231302x1782084em52abbc49fb7e3e45@mail.gmail.com>
Message-ID: <4A188188.3000005@philb.us>

Vailton Renato wrote:
> Updated the main page of the project with a link into the right side
> and also in the news section. Here in Brazil I made the call in many
> programming forums for all support our project in the voting link on
> our page.
>
> I would like take this opportunity to comment on some ideas for our
> site ... I believe that with the launch of the next release we can put
> more content on our site including things like:
>
> * Uhttp - demonstrates the use of resources such as threads, Mutex,
> support INET () among others.
>
> * INSTALL - I'm thinking of putting as an "article" about how to
> "download, compile and install the HB"
>
> * HBMK2 - An article with some simple examples on how to use it with
> Linux, Windows and even with FW, hwGUI.
>
> I'm still developing more ideas, any suggestions will be welcome.
>   

Sounds good. The site looks great, thanks for all the work you have put 
into it for all of us!
From zen25000 at zen.co.uk  Sat May 23 19:29:06 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Sat May 23 19:28:01 2009
Subject: [Harbour] Problem linking.  /usr/bin/ld: cannot find....
In-Reply-To: <4A1870CF.1040606@zen.co.uk>
References: <4A1870CF.1040606@zen.co.uk>
Message-ID: <4A1886C2.4040205@zen.co.uk>

Barry Jackson wrote:
> I wonder if anyone can help me. This compiles and links OK in an older 
> installation of Mandriva Linux and Harbour which is set up the same AFAIK.
> I have other applications building OK in this new installation with both 
> hbmk and hbmk2, however I cannot link this one which has an external C 
> library (libk8055 - special usb device driver)
> libk8055 is installed in /usr/lib which is in my PATH as can be seen 
> below. I have /usr/lib in /etc/ld.so.conf.
> I have no special Harbour paths set in either installation.
> I have run out of ideas after two days - what might I be missing? :-(
> 
> [baz@jackodesktop husb]$ hbmk -gc -mt @usb.txt
> Harbour 1.1.0dev (Rev. 11090)
> Copyright (c) 1999-2009, http://www.harbour-project.org/
> Reading 'usb.txt'...
> Compiling module 'usb.prg'...
> Compiling module 'f_browsedit.prg'...
> Lines 1228, Functions/Procedures 10
> Generating C source output to 'usb.c'... Done.
> 
> [baz@jackodesktop husb]$ hbcc -mt -libk8055 hbk8055.c usb.c -o husb
> /usr/bin/ld: cannot find -libk8055
> collect2: ld returned 1 exit status
> 
> [baz@jackodesktop husb]$ echo $PATH
> /usr/bin:/bin:/usr/local/bin:/usr/X11R6/bin/:/usr/games:/usr/lib/qt4/bin:/usr/bin:/opt/kde3/bin:/home/baz/bin:/usr/lib 
> 
> 
> [baz@jackodesktop husb]$ whereis libk8055
> libk8055: /usr/lib/libk8055.a /usr/lib/libk8055.c /usr/lib/libk8055.so 
> /usr/lib/libk8055.o
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
OK I found it!
hbcc -mt -libk8055 hbk8055.c usb.c -o husb
should be:-
hbcc -mt -lk8055 hbk8055.c usb.c -o husb
which now works.
Sorry for the noise!

From marek.horodyski at interia.pl  Sun May 24 01:33:18 2009
From: marek.horodyski at interia.pl (marek.horodyski@interia.pl)
Date: Sun May 24 01:33:25 2009
Subject: [Harbour] gpf
Message-ID: <20090524053319.127B1CF0C0@f06.poczta.interia.pl>

This small example work :

Function Main()
Local a, b, c, t := {}
 rtzp( "x := -1, pd, iu, np := 'Drukarka.', p := Zrodlo() + 'prewencj.a', v := V(), l",, t)
 for each c in t
  ? c
 next
Return Nil

Function RTZP( l, s, t)
 Local z := '', n := 1, c, depth := 0, i := Len( l), o := .t., lc := '"'+"'", lo := ''
 #include 'common.ch'
 DEFAULT s TO ',', t TO {}
 If !Empty( t)
  Asize( t, 0)
 End
 for each c in l
  If     c == s .AND. depth == 0      ; AADD( t, AllTrim( z)) ; z := ''
  Else                                ; z += c
  End
  switch c
  case '([{' ; depth++ ; loop
  case ')]}' ; depth-- ; loop
  end
  If      o .AND. c $  lc ; o := !o ; lo := c  ; depth++
  ElseIf !o .AND. c == lo ; o := !o ; lo := '' ; depth--
  End
 next // here is 21 line.
 if !Empty( z) ; AADD( t, AllTrim( z))
 end
 Return t

but in real big app I have this gpf :

Nienaprawialny b??d nr 6005: Exception error:

    Exception Code:C0000005
    Exception Address:00409BC4
    EAX:00AE31E4  EBX:00AE31E4  ECX:00AE237C  EDX:00AE2564
    ESI:00000001  EDI:00000001  EBP:00AE31E4
    CS:EIP:001B:00409BC4  SS:ESP:0023:0006FC8C
    DS:0023  ES:0023  FS:003B  GS:0000
    Flags:00010202
    CS:EIP: F6 46 01 20 74 0B 56 E8 10 06 09 00 83 C4 04 89
    SS:ESP: 0006FE00 00AE23A8 00000001 0065AC8C 0040EB45 00580C6C 00000001 00000
000 00689670 0040B3B4 00000034 00000000 00AE961C 00000000 00010015 0006FE00

    C stack:
    EIP:     EBP:       Frame: OldEBP, RetAddr, Params...


Modules:
0x00400000 0x002C1000 D:\NOWEPROD\EXE\homar.exe
0x7C900000 0x000B2000 C:\WINDOWS\system32\ntdll.dll
0x7C800000 0x000FC000 C:\WINDOWS\system32\kernel32.dll
0x77D30000 0x00090000 C:\WINDOWS\system32\USER32.DLL
0x77F10000 0x00047000 C:\WINDOWS\system32\GDI32.dll
0x77DC0000 0x000AC000 C:\WINDOWS\system32\ADVAPI32.DLL
0x77E70000 0x00091000 C:\WINDOWS\system32\RPCRT4.dll
0x72F90000 0x00026000 C:\WINDOWS\system32\WINSPOOL.DRV
0x77C00000 0x00058000 C:\WINDOWS\system32\msvcrt.dll
0x76360000 0x0001D000 C:\WINDOWS\system32\IMM32.DLL

Called from RTZP(21) in rtzp.prg
Called from KOMPILATOR(0) in kompilat.prg
Called from BOSS(0) in boss.prg
Called from START(0) in START.PRG
Called from MAIN(163) in homar.prg

Regards,
Marek Horodyski



----------------------------------------------------------------------
Fantastyczne nagrody do zgarniecia!
Zagraj >> http://link.interia.pl/f2177 


From vszakats at users.sourceforge.net  Sun May 24 05:27:05 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun May 24 05:27:10 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11114] trunk/harbour
Message-ID: <E1M89yz-0007Md-T7@d5vjzd1.ch3.sourceforge.com>

Revision: 11114
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11114&view=rev
Author:   vszakats
Date:     2009-05-24 09:27:01 +0000 (Sun, 24 May 2009)

Log Message:
-----------
2009-05-24 11:25 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * INSTALL
    + Added section: HOW TO GET SOURCE CODE.
    + Added hint how to use dirs with spaces.

  * ChangeLog
    ! Fixed header in my prev commit.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sun May 24 05:53:20 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun May 24 05:53:27 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11115] trunk/harbour
Message-ID: <E1M8AOO-0004Kv-No@bj8yhf1.ch3.sourceforge.com>

Revision: 11115
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11115&view=rev
Author:   vszakats
Date:     2009-05-24 09:53:19 +0000 (Sun, 24 May 2009)

Log Message:
-----------
2009-05-24 11:52 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * INSTALL
    * Terminology cleanup: x64 -> x86-64

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From mbelgrano at deltain.it  Sun May 24 05:53:58 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun May 24 05:54:24 2009
Subject: [Harbour] Extensions - possible cleanup?
In-Reply-To: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>
References: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>
Message-ID: <609353e70905240253i71631a6fn6001615844341a9e@mail.gmail.com>

possible rename  extension (hbl  for library and hbp for project) for rc1 ?

imo is good an clear having hbl for library parameter files (as
Harbour Library),and to use .hbp for project (target) files (currently
in experimental development stage with the extension .hbt -).


2009/5/18 Viktor Szak?ts <harbour.01@syenar.hu>:
> Hi All,
>
> I used .hbp for library parameter files in hbmk2, but this is not very
> clear for most ppl, as they think it's a "project" file (not suprisingly).
>
> Now, I'm thinking how to make this more intuitive, and one solution
> could be to use .hbl for library parameter files (as Harbour Library),
> and to use .hbp for project (target) files (currently in experimental
> development stage with the extension .hbt - which isn't very intuitive
> either).
>
> The problem is we already use .hbl for compiled language files, so
> I cannot make above change.
>
> These are my questions:
> - Is there any better idea how to cleanup these file extensions?
> - The standard extension for compiled .po language files is .mo.
> ?Would it be possible to switch to that? This could also mean
> ?to change binary format to be .mo compatible. I can't really
> ?oversee the performance and development consequences of
> ?that, but it *might* be nice to use an already existing file format.
> ?This could open usage of already existing external tools which
> ?can handle .mo files natively.
> ?[ I like current .hbl format very much BTW, so no offence on
> ?current format. ]
>
> [ BTW2: hbi18n won't allow .po extension in -m operation, it
> will automatically change it to .pot.
>
> These are the official gettext extensions:
> - .pot - extracted strings from a source file (template)
> - .po - extracted strings + translations - text format
> - .mo - extracted strings + translations - binary format ]
>
> Brgds,
> Viktor
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From jarabal at gmail.com  Sun May 24 06:10:42 2009
From: jarabal at gmail.com (Xavi)
Date: Sun May 24 06:13:16 2009
Subject: [Harbour] gpf
In-Reply-To: <20090524053319.127B1CF0C0@f06.poczta.interia.pl>
References: <20090524053319.127B1CF0C0@f06.poczta.interia.pl>
Message-ID: <4A191D22.8070607@gmail.com>

Hi Marek,

marek.horodyski@interia.pl escribi?:
> How we can without additive rules use exit for escape from loop in this
> syntax :
> 
> for each x in stringORarray
> switch x
> case 'a'
>  exit // but we need exit from "for each", not only from switch
> end
> next
> 
> Maby, for optimization, for escape from switch we need another rules word
> ?

May be, __enumExit() ;) but ...
hmmm... try with -gc3

> but in real big app I have this gpf

How is compiled the real big app?

Xavi

marek.horodyski@interia.pl escribi?:
> This small example work :
> 
> Function Main()
> Local a, b, c, t := {}
>  rtzp( "x := -1, pd, iu, np := 'Drukarka.', p := Zrodlo() + 'prewencj.a', v := V(), l",, t)
>  for each c in t
>   ? c
>  next
> Return Nil
> 
> Function RTZP( l, s, t)
>  Local z := '', n := 1, c, depth := 0, i := Len( l), o := .t., lc := '"'+"'", lo := ''
>  #include 'common.ch'
>  DEFAULT s TO ',', t TO {}
>  If !Empty( t)
>   Asize( t, 0)
>  End
>  for each c in l
>   If     c == s .AND. depth == 0      ; AADD( t, AllTrim( z)) ; z := ''
>   Else                                ; z += c
>   End
>   switch c
>   case '([{' ; depth++ ; loop
>   case ')]}' ; depth-- ; loop
>   end
>   If      o .AND. c $  lc ; o := !o ; lo := c  ; depth++
>   ElseIf !o .AND. c == lo ; o := !o ; lo := '' ; depth--
>   End
>  next // here is 21 line.
>  if !Empty( z) ; AADD( t, AllTrim( z))
>  end
>  Return t
> 
> but in real big app I have this gpf :
> 
> Nienaprawialny b??d nr 6005: Exception error:
> 
>     Exception Code:C0000005
>     Exception Address:00409BC4
>     EAX:00AE31E4  EBX:00AE31E4  ECX:00AE237C  EDX:00AE2564
>     ESI:00000001  EDI:00000001  EBP:00AE31E4
>     CS:EIP:001B:00409BC4  SS:ESP:0023:0006FC8C
>     DS:0023  ES:0023  FS:003B  GS:0000
>     Flags:00010202
>     CS:EIP: F6 46 01 20 74 0B 56 E8 10 06 09 00 83 C4 04 89
>     SS:ESP: 0006FE00 00AE23A8 00000001 0065AC8C 0040EB45 00580C6C 00000001 00000
> 000 00689670 0040B3B4 00000034 00000000 00AE961C 00000000 00010015 0006FE00
> 
>     C stack:
>     EIP:     EBP:       Frame: OldEBP, RetAddr, Params...
> 
> 
> Modules:
> 0x00400000 0x002C1000 D:\NOWEPROD\EXE\homar.exe
> 0x7C900000 0x000B2000 C:\WINDOWS\system32\ntdll.dll
> 0x7C800000 0x000FC000 C:\WINDOWS\system32\kernel32.dll
> 0x77D30000 0x00090000 C:\WINDOWS\system32\USER32.DLL
> 0x77F10000 0x00047000 C:\WINDOWS\system32\GDI32.dll
> 0x77DC0000 0x000AC000 C:\WINDOWS\system32\ADVAPI32.DLL
> 0x77E70000 0x00091000 C:\WINDOWS\system32\RPCRT4.dll
> 0x72F90000 0x00026000 C:\WINDOWS\system32\WINSPOOL.DRV
> 0x77C00000 0x00058000 C:\WINDOWS\system32\msvcrt.dll
> 0x76360000 0x0001D000 C:\WINDOWS\system32\IMM32.DLL
> 
> Called from RTZP(21) in rtzp.prg
> Called from KOMPILATOR(0) in kompilat.prg
> Called from BOSS(0) in boss.prg
> Called from START(0) in START.PRG
> Called from MAIN(163) in homar.prg
> 
> Regards,
> Marek Horodyski
> 
> 
> 
> ----------------------------------------------------------------------
> Fantastyczne nagrody do zgarniecia!
> Zagraj >> http://link.interia.pl/f2177 
> 
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

From harbour.01 at syenar.hu  Sun May 24 06:34:14 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May 24 06:34:20 2009
Subject: [Harbour] Extensions - possible cleanup?
In-Reply-To: <609353e70905240253i71631a6fn6001615844341a9e@mail.gmail.com>
References: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>
	<609353e70905240253i71631a6fn6001615844341a9e@mail.gmail.com>
Message-ID: <18d502870905240334u78201700p8ecf7c7a4da5f36c@mail.gmail.com>

> possible rename ?extension (hbl ?for library and hbp for project) for rc1 ?
>
> imo is good an clear having hbl for library parameter files (as
> Harbour Library),and to use .hbp for project (target) files (currently
> in experimental development stage with the extension .hbt -).

.hbl is already used for Harbour Language files, hence I cannot
use it for hbmk2 libraries, that was the starting point of my e-mail.

Brgds,
Viktor
From mbelgrano at deltain.it  Sun May 24 06:40:19 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun May 24 06:40:47 2009
Subject: [Harbour] Client Server Database Access the xBase Way
Message-ID: <609353e70905240340m63920d0fl7026e52990d325d3@mail.gmail.com>

This is an interesting post regarding client server in [x]harbour

---------antonio linares
Doug,
Excellent!
Could you provide us some more tech details about it ? As far as I
understand it, you are using sockets and you have built a server using
Harbour (console mode).
----------------------------xProgrammer Doug
Before I present actual code (in the posts to follow) I should provide
the following by way of explanation.
Whilst this code is functional in the sense that I am using it in an
application it is very much work in progress. The code is not claimed
to be complete, neat, robust or optimised.
Also please note that the code has been written to meet my needs and
not as a general "library" in any sense. Along the way I have had to
make many design decisions where there were many alternatives which
may suit you better.
Why would you bother going client-server with xBase? In my case the
answer is simple. I need better performance across a VPN than I can
achieve with conventional xBase code. The alternative is to use a
third party data base back end such as mySQL, PostrgeSQL, or if you
want to pay for the privilege Advantage DataBase Server, Sybase or
SQLServer.
Those options will in general give you more than my option will, the
extent of those extras depending upon your choice. Features such as
transaction control, roll forward / roll back, ad hoc queries /
reports and management tools.
At this stage all I have set out to do is to write a data base back
end to do reads, updates and inserts.
-----------------------
http://forums.fivetechsupport.com/viewtopic.php?f=3&t=12269&sid=67b77548105a764ac90877ebf6282dba&start=15

will harbour multithread give a big improvements to xdoug?
I dream about a universal harbour  compoment installed on server side
will be basic compoment for an application who connect to his server
side remotizing data access (netrdd) and gui (netgt)


-- 
Massimo Belgrano
From mbelgrano at deltain.it  Sun May 24 06:47:33 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun May 24 06:47:59 2009
Subject: [Harbour] Extensions - possible cleanup?
In-Reply-To: <18d502870905240334u78201700p8ecf7c7a4da5f36c@mail.gmail.com>
References: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com> 
	<609353e70905240253i71631a6fn6001615844341a9e@mail.gmail.com> 
	<18d502870905240334u78201700p8ecf7c7a4da5f36c@mail.gmail.com>
Message-ID: <609353e70905240347y3bca5772kdd6e34f095f91fd6@mail.gmail.com>

This will be my suggestion
hml,hmp Harbour Mk2 (Link,project)
hal,hap HArbour (Link,project)
hhl,hhp Harbour..Harbour (Link,project)
xhl,xhp eXtented harbour (Link,project)
hpl,hpp Harbour Project(Link,project)



2009/5/24 Viktor Szak?ts <harbour.01@syenar.hu>:
>> possible rename ?extension (hbl ?for library and hbp for project) for rc1 ?
>>
>> imo is good an clear having hbl for library parameter files (as
>> Harbour Library),and to use .hbp for project (target) files (currently
>> in experimental development stage with the extension .hbt -).
>
> .hbl is already used for Harbour Language files, hence I cannot
> use it for hbmk2 libraries, that was the starting point of my e-mail.
>
> Brgds,
> Viktor
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From harbour.01 at syenar.hu  Sun May 24 06:48:11 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May 24 06:48:14 2009
Subject: [Harbour] Extensions - possible cleanup?
In-Reply-To: <18d502870905240334u78201700p8ecf7c7a4da5f36c@mail.gmail.com>
References: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>
	<609353e70905240253i71631a6fn6001615844341a9e@mail.gmail.com>
	<18d502870905240334u78201700p8ecf7c7a4da5f36c@mail.gmail.com>
Message-ID: <18d502870905240348h638aa887xb3ca6207c7455ba1@mail.gmail.com>

Just some wild ideas to free up .hbl:

- We could rename .hbl (language) files to .hbt (Harbour Translation)
- We could rename .hbl (language) files to .hbi (Harbour i18n)

I don't particularly like either of above, just speculating.

Probably .hbl (language) isn't very widely used yet, so it not yet too
late to change it, we just need to discuss it.

It's also a possibility to not define any special extension for compiler
language at all and leave the decision for the app developers. F.e. I use
.lng, as the internal format is most of the time a private matter for the app.
This is true even if we decide to distribute such compiled language files
in Harbour binary distros.

Currently the .hbl extension is only used by hbi18n (and consequently
hbmk2).

Still it would be nice to have a short abbrev we could refer to these files,
but my point is that we're yet free to change it and the decision isn't
a too heavy one.

We can also use a neutral extension like .bin, .lng, or .hbs (as Harbour
Serialized).

Brgds,
Viktor
From harbour.01 at syenar.hu  Sun May 24 06:52:49 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May 24 06:52:55 2009
Subject: [Harbour] Extensions - possible cleanup?
In-Reply-To: <609353e70905240347y3bca5772kdd6e34f095f91fd6@mail.gmail.com>
References: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>
	<609353e70905240253i71631a6fn6001615844341a9e@mail.gmail.com>
	<18d502870905240334u78201700p8ecf7c7a4da5f36c@mail.gmail.com>
	<609353e70905240347y3bca5772kdd6e34f095f91fd6@mail.gmail.com>
Message-ID: <18d502870905240352t27391c1bt240358964a75d600@mail.gmail.com>

On Sun, May 24, 2009 at 12:47 PM, Massimo Belgrano <mbelgrano@deltain.it> wrote:
> This will be my suggestion
> hml,hmp Harbour Mk2 (Link,project)
> hal,hap HArbour (Link,project)
> hhl,hhp Harbour..Harbour (Link,project)
> xhl,xhp eXtented harbour (Link,project)
> hpl,hpp Harbour Project(Link,project)

I don't understand the purpose of these. IMO three extensions
is more than enough overall, or even *two*, since I'd favour -target
notation instead of special .hbt extension. I may even replace it
with -target=<file.hbm> format for clarity.

This way:
current .hbp would become .hbl
current .hbm would become .hbp

Simple.

Brgds,
Viktor
From mbelgrano at deltain.it  Sun May 24 07:18:36 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun May 24 07:19:01 2009
Subject: [Harbour] Extensions - possible cleanup?
In-Reply-To: <18d502870905240352t27391c1bt240358964a75d600@mail.gmail.com>
References: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com> 
	<609353e70905240253i71631a6fn6001615844341a9e@mail.gmail.com> 
	<18d502870905240334u78201700p8ecf7c7a4da5f36c@mail.gmail.com> 
	<609353e70905240347y3bca5772kdd6e34f095f91fd6@mail.gmail.com> 
	<18d502870905240352t27391c1bt240358964a75d600@mail.gmail.com>
Message-ID: <609353e70905240418t1f50daabkecb1525a05c63c4f@mail.gmail.com>

i have only post alternative for having harbour extension different
from hbmk extension
but agree with your idead
hbl,hbp are better that  hkl,hkp or other extension proposed


2009/5/24 Viktor Szak?ts <harbour.01@syenar.hu>:
> On Sun, May 24, 2009 at 12:47 PM, Massimo Belgrano <mbelgrano@deltain.it> wrote:
>> This will be my suggestion
>> hml,hmp Harbour Mk2 (Link,project)
>> hal,hap HArbour (Link,project)
>> hhl,hhp Harbour..Harbour (Link,project)
>> xhl,xhp eXtented harbour (Link,project)
>> hpl,hpp Harbour Project(Link,project)
>
> I don't understand the purpose of these. IMO three extensions
> is more than enough overall, or even *two*, since I'd favour -target
> notation instead of special .hbt extension. I may even replace it
> with -target=<file.hbm> format for clarity.
>
> This way:
> current .hbp would become .hbl
> current .hbm would become .hbp
>
> Simple.
>
> Brgds,
> Viktor
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From vszakats at users.sourceforge.net  Sun May 24 07:33:30 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun May 24 07:33:35 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11116] trunk/harbour
Message-ID: <E1M8BxK-0000lW-OY@d5vjzd1.ch3.sourceforge.com>

Revision: 11116
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11116&view=rev
Author:   vszakats
Date:     2009-05-24 11:33:29 +0000 (Sun, 24 May 2009)

Log Message:
-----------
2009-05-24 13:27 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    * Changed multitarget support. Instead of special .hbt extension
      (which was not removed), not -target=<target>[.hbm|.prg] option
      can be used to force a distinct target from the command line.
      This way it's more flexible, easy to use and clear without needing
      a special extension alias.

      Here's the updated usage:
      There are two ways to do multitarget hbmk2 sessions:
      1.) hbmk2 [<common_params1>] -target=target1[.hbm|.prg] [<common_params2>] -target=target2[.hbm|.prg] [<common_params3>]
          Examples:
             hbmk2 -target=prog1 -target=prog2 -target=prog3
             hbmk2 -target=prog1.prg -target=prog2.prg -target=prog3.prg
             hbmk2 -target=mylib1.hbm -target=mylib2.hbm -target=myapp.hbm
             hbmk2 -trace -pause -target=mylib1.hbm -target=mylib2.hbm -target=myapp.hbm -beep
      2.) hbmk2 [<common_params1>] -target <target1_params> -target <target2_params> [-notarget <common_params2>]
          Examples:
             hbmk2 -target hello1.prg -target hello2.prg
             hbmk2 -trace -target hello1.prg -target hello2.prg
             hbmk2 -trace -target hello1.prg -target hello2.prg -notarget -beep

    * Changed ' = ' operators to macro LEFTEQUAL().
    + Added Set( _SET_EXACT ) setting to make sure above operator
      works regardless of caller/default state.
    ; NOTE: IMO it would be useful to add a pseudo function
            equivalent to non-exact equality operator. This would
            clear up hacks like above.

  * doc/dirstruc.txt
    ! Typo.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/doc/dirstruc.txt
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sun May 24 07:44:22 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun May 24 07:44:27 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11117] trunk/harbour
Message-ID: <E1M8C7q-0000vH-Tc@d5vjzd1.ch3.sourceforge.com>

Revision: 11117
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11117&view=rev
Author:   vszakats
Date:     2009-05-24 11:44:22 +0000 (Sun, 24 May 2009)

Log Message:
-----------
2009-05-24 13:44 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * INSTALL
    * Minor cleanups.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Sun May 24 08:19:00 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May 24 08:19:05 2009
Subject: [Harbour] Extensions - possible cleanup?
In-Reply-To: <609353e70905240418t1f50daabkecb1525a05c63c4f@mail.gmail.com>
References: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>
	<609353e70905240253i71631a6fn6001615844341a9e@mail.gmail.com>
	<18d502870905240334u78201700p8ecf7c7a4da5f36c@mail.gmail.com>
	<609353e70905240347y3bca5772kdd6e34f095f91fd6@mail.gmail.com>
	<18d502870905240352t27391c1bt240358964a75d600@mail.gmail.com>
	<609353e70905240418t1f50daabkecb1525a05c63c4f@mail.gmail.com>
Message-ID: <18d502870905240519o2fb8ec01u6073a457a610fc53@mail.gmail.com>

I'm ready to commit a change where current .hbl extension
changes to .hbi and current .hbp changes to .hbl.

I decided not to change .hbm to .hbp as it would be misleading.
.hbm is a simple extension of the command line, so it's not a
project.

I've readded .hbp as a project file though, it's similar to .hbm,
but it's only recognized as is when used in the command line.

To sum it up:
.hbm - hbmk2 command line script
.hbp - project file, similar format to .hbm, accepted only in command line,
          specifying a distinct target.
.hbl - Library description file.

Opinions?

Brgds
Viktor
From harbour.01 at syenar.hu  Sun May 24 08:32:40 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun May 24 08:32:47 2009
Subject: [Harbour] Updated: www.harbour-project.org & some ideias...
In-Reply-To: <531d7a750905231302x1782084em52abbc49fb7e3e45@mail.gmail.com>
References: <531d7a750905231302x1782084em52abbc49fb7e3e45@mail.gmail.com>
Message-ID: <287014B9-2CC8-4460-A47E-57E045DCA134@syenar.hu>

Hi Vailton,

> Updated the main page of the project with a link into the right side
> and also in the news section. Here in Brazil I made the call in many
> programming forums for all support our project in the voting link on
> our page.

Thank you very much.

> I would like take this opportunity to comment on some ideas for our
> site ... I believe that with the launch of the next release we can put
> more content on our site including things like:
>
> * Uhttp - demonstrates the use of resources such as threads, Mutex,
> support INET () among others.
>
> * INSTALL - I'm thinking of putting as an "article" about how to
> "download, compile and install the HB"

I've updated it with download information and did a few minor
cleanups.

> * HBMK2 - An article with some simple examples on how to use it with
> Linux, Windows and even with FW, hwGUI.

Sound very good. I'm trying to finalize some last, but important bits
of hbmk2 (file extensions and multitarget feature) so that we can start
to document it. I hope it will be okay very shortly.

I'd be very glad if we could finalize the name also, which would
ideally be simply 'hbmk'. I feel the tool is ready for that already.

I'd suggest to not necessarily split the article to different platforms,
since the point of hbmk2 would be to wash these differences, so such
article (IMO) would be best to show cmdlines and practices which work
equally well on all platforms and compilers. We can give working  
examples
of course which may hold some minor differences (./hbmk2 vs. hbmk2  
f.e.),
or interesting platform compiler specific properties.

3rd party examples is nice and should be quite simple. I hope, in the
future these .hbl files will be distributed by 3rd parties. Now that
hbmk2 has also xhb support, maybe the benefits are even more clear.

Brgds,
Viktor

From sudipb001 at gmail.com  Sun May 24 14:45:27 2009
From: sudipb001 at gmail.com (Sudip Bhattacharyya)
Date: Sun May 24 14:45:31 2009
Subject: [Harbour] Printing Problem
Message-ID: <23696757.post@talk.nabble.com>


Hi All,

I am a very new user of Harbour. I found that during printing with Lpt1 DMP,
printing halts sometimes, which I didn't face when working with
xHarbour+gtwvw.

Here is a sample which will show want I want to mean:-

FUNCTION Main()
  LOCAL nChar := ASC( "A" )
  CLEAR SCREEN
  SET DEVICE TO PRINTER
  SETPRC( 0, 0 )
  DO WHILE nChar <= ASC( "Z" )
     @ PROW() + 1, 0 SAY REPLICATE( CHR( nChar ), 75 )
     nChar ++
  ENDDO
  EJECT
  SET DEVICE TO SCREEN
  @ ROW(), 0 SAY "Please check if your printer prints after pressing any
key"
  @ ROW()+2, 0 SAY "Press any key to continue..."
  INKEY( 0 )
  RETURN NIL

My another question is, how can I use Windows Printing (like I did with
win32prn in xHarbour) in Harbour?

Thank in Advance :-)

With best regards.

Sudip

-- 
View this message in context: http://www.nabble.com/Printing-Problem-tp23696757p23696757.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From jarabal at gmail.com  Sun May 24 14:57:36 2009
From: jarabal at gmail.com (Xavi)
Date: Sun May 24 15:00:09 2009
Subject: [Harbour] Printing Problem
In-Reply-To: <23696757.post@talk.nabble.com>
References: <23696757.post@talk.nabble.com>
Message-ID: <4A1998A0.8070300@gmail.com>

Sudip,

Try this with the latest SVN .-

FUNCTION Main()
   LOCAL nChar := ASC( "A" )
   CLEAR SCREEN
   SET DEVICE TO PRINTER
   SETPRC( 0, 0 )
   DO WHILE nChar <= ASC( "Z" )
      @ PROW() + 1, 0 SAY REPLICATE( CHR( nChar ), 75 )
      nChar ++
   ENDDO
   EJECT
   SET PRINTER TO  // Print *now* in Win!
   SET DEVICE TO SCREEN
   @ ROW(), 0 SAY "Please check if your printer prints after pressing any key"
   @ ROW()+2, 0 SAY "Press any key to continue..."
   INKEY( 0 )
   RETURN NIL

--
Xavi

Sudip Bhattacharyya escribi?:
> Hi All,
> 
> I am a very new user of Harbour. I found that during printing with Lpt1 DMP,
> printing halts sometimes, which I didn't face when working with
> xHarbour+gtwvw.
> 
> Here is a sample which will show want I want to mean:-
> 
> FUNCTION Main()
>   LOCAL nChar := ASC( "A" )
>   CLEAR SCREEN
>   SET DEVICE TO PRINTER
>   SETPRC( 0, 0 )
>   DO WHILE nChar <= ASC( "Z" )
>      @ PROW() + 1, 0 SAY REPLICATE( CHR( nChar ), 75 )
>      nChar ++
>   ENDDO
>   EJECT
>   SET DEVICE TO SCREEN
>   @ ROW(), 0 SAY "Please check if your printer prints after pressing any
> key"
>   @ ROW()+2, 0 SAY "Press any key to continue..."
>   INKEY( 0 )
>   RETURN NIL
> 
> My another question is, how can I use Windows Printing (like I did with
> win32prn in xHarbour) in Harbour?
> 
> Thank in Advance :-)
> 
> With best regards.
> 
> Sudip
> 

From harbour.01 at syenar.hu  Sun May 24 15:04:31 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May 24 15:04:36 2009
Subject: [Harbour] Printing Problem
In-Reply-To: <23696757.post@talk.nabble.com>
References: <23696757.post@talk.nabble.com>
Message-ID: <18d502870905241204w26986d4fi408316efd47ddc5f@mail.gmail.com>

Hi Sudip,

Welcome to Harbour.

> My another question is, how can I use Windows Printing (like I did with
> win32prn in xHarbour) in Harbour?

You can continue to use win32prn class in Harbour if you
link in hbwin library (although the native name of this class
in Harbour is win_Prn()). If you use printing functions directly,
you may need to add WIN_ prefix to the function names.

Brgds,
Viktor
From mbelgrano at deltain.it  Sun May 24 15:41:14 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun May 24 15:41:40 2009
Subject: [Harbour] Printing Problem
In-Reply-To: <23696757.post@talk.nabble.com>
References: <23696757.post@talk.nabble.com>
Message-ID: <609353e70905241241p169dbe45wc2c7dbed659476bd@mail.gmail.com>

If you want compile a sample who contain win32prn you can do
hbmk2 test1.prg -lhbwin

hbmk2 is powerfull  harbour Tool that allow compile sample and large project
basic use of this tools is
hbmk2 ac_test
hbmk2 ac_test.prg
After this command you have ac_test.exe created
You can also immediaply execute simple using
hbmk2 ac_test -run

Hbmk2 is indipendent from Platform and Compiler that you use

hbmk2 test1.prg -lhbwin

2009/5/24 Sudip Bhattacharyya <sudipb001@gmail.com>:
>
> Hi All,
>
> I am a very new user of Harbour. I found that during printing with Lpt1 DMP,
> printing halts sometimes, which I didn't face when working with
> xHarbour+gtwvw.
>
> Here is a sample which will show want I want to mean:-
>
> FUNCTION Main()
> ?LOCAL nChar := ASC( "A" )
> ?CLEAR SCREEN
> ?SET DEVICE TO PRINTER
> ?SETPRC( 0, 0 )
> ?DO WHILE nChar <= ASC( "Z" )
> ? ? @ PROW() + 1, 0 SAY REPLICATE( CHR( nChar ), 75 )
> ? ? nChar ++
> ?ENDDO
> ?EJECT
> ?SET DEVICE TO SCREEN
> ?@ ROW(), 0 SAY "Please check if your printer prints after pressing any
> key"
> ?@ ROW()+2, 0 SAY "Press any key to continue..."
> ?INKEY( 0 )
> ?RETURN NIL
>
> My another question is, how can I use Windows Printing (like I did with
> win32prn in xHarbour) in Harbour?
>
> Thank in Advance :-)
>
> With best regards.
>
> Sudip
>
> --
> View this message in context: http://www.nabble.com/Printing-Problem-tp23696757p23696757.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Analisi e sviluppo software per Lan e Web - Consulenza informatica - Formazione
Delta Informatica S.r.l. http://www.deltain.it/   +39 0321 455962
From itamarlins at bol.com.br  Sun May 24 15:57:11 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Sun May 24 15:58:08 2009
Subject: [Harbour] TIP upload ftp problem.
Message-ID: <gvc8rr$v0o$1@ger.gmane.org>

Hi!
I get problem with FTP
Before works of 2009-05-12 09:25 UTC+0200 Viktor Szakats, works fine.
But now show this error. :-(
I am using filezilla serverftp.

(000018) 24/5/2009 16:25:20 - integrator (189.105.11.186)> 230 Logged on
(000018) 24/5/2009 16:25:20 - integrator (189.105.11.186)> TYPE I
(000018) 24/5/2009 16:25:20 - integrator (189.105.11.186)> 200 Type set to I
(000018) 24/5/2009 16:25:21 - integrator (189.105.11.186)> CWD 
05372927000176
(000018) 24/5/2009 16:25:21 - integrator (189.105.11.186)> 250 CWD 
successful. "/05372927000176" is current directory.
(000018) 24/5/2009 16:25:21 - integrator (189.105.11.186)> PASV
(000018) 24/5/2009 16:25:21 - integrator (189.105.11.186)> 227 Entering 
Passive Mode (189,104,69,146,14,108)
(000018) 24/5/2009 16:25:24 - integrator (189.105.11.186)> STOR estoque.dbf
(000019) 24/5/2009 16:25:28 - (not logged in) (189.105.11.186)> Connected, 
sending welcome message...
(000019) 24/5/2009 16:25:28 - (not logged in) (189.105.11.186)> 220 Bem 
Vindo ao Servidor FTP
(000019) 24/5/2009 16:25:28 - (not logged in) (189.105.11.186)> could not 
send reply, disconnected.
(000018) 24/5/2009 16:25:32 - integrator (189.105.11.186)> 425 Can't open 
data connection.
(000018) 24/5/2009 16:25:43 - integrator (189.105.11.186)> m
(000018) 24/5/2009 16:25:43 - integrator (189.105.11.186)> 500 Syntax error, 
command unrecognized.
(000018) 24/5/2009 16:25:43 - integrator (189.105.11.186)> 
(000018) 24/5/2009 16:25:43 - integrator (189.105.11.186)> 500 Syntax error, 
command unrecognized.
(000018) 24/5/2009 16:25:43 - integrator (189.105.11.186)> 
(000018) 24/5/2009 16:25:43 - integrator (189.105.11.186)> 500 Syntax error, 
command unrecognized.

Via command line works fine, for example.
ftp -i xyzmyftp.net
mput *.dbf

My piece of program is:

           oFTP:exGauge := { | done, size| ShowGauge(done, size, 
ArrayFile[n] ) }
           If oFTP:UpLoadFile(cFile)


Regards,
Itamar M. Lins Jr. 



From mbelgrano at deltain.it  Sun May 24 16:10:44 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun May 24 16:11:10 2009
Subject: [Harbour] TIP upload ftp problem.
In-Reply-To: <gvc8rr$v0o$1@ger.gmane.org>
References: <gvc8rr$v0o$1@ger.gmane.org>
Message-ID: <609353e70905241310g28feb7c5t9c88f0665de0506e@mail.gmail.com>

I have found follow sample on xharbour ng corrected by ron


 #include "common.ch"
 #include "Directry.ch"
 Function main()
 Donwload_File("www/atualiza/sagi/
res","curiosidades.doc","curiosidades.doc")
 Return
 ***********************************************
 Function Donwload_File(ftpdir,ftpfile,fdestino)
 ***********************************************
 ftpproto ="ftp://"
 ftpserver = 'ftp.myweb.com.br/'  <-- the last / is required on the on
ftp server address. also, id you ness to pass other ftp folder do
ftp.myweb.com.br/folder/
 ftpuser = 'user'
 ftppass = 'password'
 oUrl:= turl():new(ftpproto+ftpuser+":"+ftppass+"@"+ftpserver)
 oCred:= tIPCredentials()
 oFtp:= tipclientftp():NEW(oUrl,.T.) <-- here is your error, xharbour
1.2 tip ftp class, has only two parameters
 oFTP:nConnTimeout := 20000
 oFTP:bUsePasv     := .T.
 IF oFTP:Open()
    oFTP:Cwd(ftpdir)
    IF !empty(oFTP:List())
       cTamanho:=oFTP:fileSize(ftpfile)
       Inicia_Progress(fdestino,cTamanho,ftpfile)
    ENDIF
    oFTP:CLOSE()
 ENDIF
 Return
 *************************************************
 Function Inicia_Progress(fdestino,wTotal,ftpfile)
 *************************************************
 oFtp:exGauge := { | done, size| ShowGauge(done, size,
wTotal,ftpfile ) }
 oFtp:DownLoadFile(fdestino)
 ****************************************************
 Procedure ShowGauge( nSent, nSize, wTotal, ftpfile )
 ****************************************************
 IF nSent > 0
    @ 10,10 say "Arquivo...: " +ftpfile+" "+ STR(nSent)+" Byts de: " +
str(wTotal)+ " Byts "+str((nSent/wTotal)*100,4) +" %"
 ENDIF
 RETURN



2009/5/24 Itamar Lins <itamarlins@bol.com.br>:
> Hi!
> I get problem with FTP
> Before works of 2009-05-12 09:25 UTC+0200 Viktor Szakats, works fine.
> But now show this error. :-(
> I am using filezilla serverftp.
>
> (000018) 24/5/2009 16:25:20 - integrator (189.105.11.186)> 230 Logged on
> (000018) 24/5/2009 16:25:20 - integrator (189.105.11.186)> TYPE I
> (000018) 24/5/2009 16:25:20 - integrator (189.105.11.186)> 200 Type set to I
> (000018) 24/5/2009 16:25:21 - integrator (189.105.11.186)> CWD
> 05372927000176
> (000018) 24/5/2009 16:25:21 - integrator (189.105.11.186)> 250 CWD
> successful. "/05372927000176" is current directory.
> (000018) 24/5/2009 16:25:21 - integrator (189.105.11.186)> PASV
> (000018) 24/5/2009 16:25:21 - integrator (189.105.11.186)> 227 Entering
> Passive Mode (189,104,69,146,14,108)
> (000018) 24/5/2009 16:25:24 - integrator (189.105.11.186)> STOR estoque.dbf
> (000019) 24/5/2009 16:25:28 - (not logged in) (189.105.11.186)> Connected,
> sending welcome message...
> (000019) 24/5/2009 16:25:28 - (not logged in) (189.105.11.186)> 220 Bem
> Vindo ao Servidor FTP
> (000019) 24/5/2009 16:25:28 - (not logged in) (189.105.11.186)> could not
> send reply, disconnected.
> (000018) 24/5/2009 16:25:32 - integrator (189.105.11.186)> 425 Can't open
> data connection.
> (000018) 24/5/2009 16:25:43 - integrator (189.105.11.186)> ?m ?
> (000018) 24/5/2009 16:25:43 - integrator (189.105.11.186)> 500 Syntax error,
> command unrecognized.
> (000018) 24/5/2009 16:25:43 - integrator (189.105.11.186)>
> (000018) 24/5/2009 16:25:43 - integrator (189.105.11.186)> 500 Syntax error,
> command unrecognized.
> (000018) 24/5/2009 16:25:43 - integrator (189.105.11.186)>
> (000018) 24/5/2009 16:25:43 - integrator (189.105.11.186)> 500 Syntax error,
> command unrecognized.
>
> Via command line works fine, for example.
> ftp -i xyzmyftp.net
> mput *.dbf
>
> My piece of program is:
>
> ? ? ? ? ? oFTP:exGauge := { | done, size| ShowGauge(done, size,
> ArrayFile[n] ) }
> ? ? ? ? ? If oFTP:UpLoadFile(cFile)
>
>
> Regards,
> Itamar M. Lins Jr.
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Analisi e sviluppo software per Lan e Web - Consulenza informatica - Formazione
Delta Informatica S.r.l. http://www.deltain.it/   +39 0321 455962
From mbelgrano at deltain.it  Sun May 24 16:22:33 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun May 24 16:22:58 2009
Subject: [Harbour] Litte proposal for hbmk
Message-ID: <609353e70905241322h55984f32u37fe35aae5f9192e@mail.gmail.com>

Hi viktor can you add a --xmate who create a xmate project file?

This is a way for integrate make system with hbmk2
Integration of editor will be intresting fir win user

FUNCTION CREA_XMATE(filechoice,libadditive)
   local a_xmate:={},A
   LOCAL X_LOG,X_MATE
   AADD(A_XMATE,"[Version]")
   AADD(A_XMATE,"Type=xMate")
   AADD(A_XMATE,"Number=1.15")
   AADD(A_XMATE,"")
   AADD(A_XMATE,"[Info]")
   AADD(A_XMATE,"Type=Executable")
   AADD(A_XMATE,"Architecture=harbour")
   AADD(A_XMATE,"Include=")
   AADD(A_XMATE,"Define=")
   AADD(A_XMATE,"")
   AADD(A_XMATE,"[xMate]")
   AADD(A_XMATE,"Create Map/List File=No")
   AADD(A_XMATE,"")
   AADD(A_XMATE,"[Project]")
   AADD(A_XMATE,"Run=")
   AADD(A_XMATE,"Params=")
   AADD(A_XMATE,"Final Path=%HOME%")
   AADD(A_XMATE,"Maintain LNK=Yes")
   AADD(A_XMATE,"Default Type=1")
   AADD(A_XMATE,"Error log=")
   AADD(A_XMATE,"")
   AADD(A_XMATE,"[Data Path]")
   AADD(A_XMATE,"Dbf=")
   AADD(A_XMATE,"")
   AADD(A_XMATE,"[Editor]")
   FOR A=1 TO LEN(FILECHOICE)
      AADD(A_XMATE,ALLTRIM(FILECHOICE[A])+"="+STR(A)+",N,N")
   NEXT
   AADD(A_XMATE,"")
   AADD(A_XMATE,"")
   AADD(A_XMATE,"[Files]")
   FOR A=1 TO LEN(FILECHOICE)  // add each nomefile
      AADD(A_XMATE,ALLTRIM(FILECHOICE[A])+"="+STR(A)+",.F.,0,0,")
   NEXT

   for a=1 to len(libadditive)
     AADD(A_XMATE,"%HB_LIB_INSTALL%\"+libadditive[a]+"="+str(a)+",.T.,0,0,")
   next a
   xprjmate=aLltrim(filechoice[1])
   xprjmate=substr(XPRJMATE,1,len(xPRJmate)-4) +".xhp"
   if .not. file(XPRJMATE)
      X_LOG=FCREATE(XPRJMATE)
      FOR a=1 to len(A_XMATE)
         FWRITE(X_LOG,A_XMATE[a]+CHR(13)+CHR(10))
      NEXT

      FCLOSE(X_LOG)
   ENDIF
   RUN(XPRJMATE)

-- 
Massimo Belgrano
From itamarlins at bol.com.br  Sun May 24 16:29:45 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Sun May 24 16:30:47 2009
Subject: [Harbour] Re: TIP upload ftp problem.
References: <gvc8rr$v0o$1@ger.gmane.org>
	<609353e70905241310g28feb7c5t9c88f0665de0506e@mail.gmail.com>
Message-ID: <gvcaot$4f5$1@ger.gmane.org>

Hi!
Thanks for response, but, this piece of code is identical to my, and now not 
works.
Maybe a problem with the function fileupload(cFile) send unknown caracteres.
See:
fileupload('estoque.dbf')
reponse of filezilla > (000018) 24/5/2009 16:25:24 - integrator 
(189.105.11.186)> STOR estoque.dbf
??? disconnect strange that
> (000019) 24/5/2009 16:25:28 - (not logged in) (189.105.11.186)> Connected,
??? reconnect strange that
> sending welcome message...
> (000019) 24/5/2009 16:25:28 - (not logged in) (189.105.11.186)> 220 Bem
> Vindo ao Servidor FTP

Regards,
Itamar M. Lins Jr.

"Massimo Belgrano" <mbelgrano@deltain.it> 
escreveu na mensagem 
news:609353e70905241310g28feb7c5t9c88f0665de0506e@mail.gmail.com...
I have found follow sample on xharbour ng corrected by ron


 #include "common.ch"
 #include "Directry.ch"
 Function main()
 Donwload_File("www/atualiza/sagi/
res","curiosidades.doc","curiosidades.doc")
 Return
 ***********************************************
 Function Donwload_File(ftpdir,ftpfile,fdestino)
 ***********************************************
 ftpproto ="ftp://"
 ftpserver = 'ftp.myweb.com.br/'  <-- the last / is required on the on
ftp server address. also, id you ness to pass other ftp folder do
ftp.myweb.com.br/folder/
 ftpuser = 'user'
 ftppass = 'password'
 oUrl:= turl():new(ftpproto+ftpuser+":"+ftppass+"@"+ftpserver)
 oCred:= tIPCredentials()
 oFtp:= tipclientftp():NEW(oUrl,.T.) <-- here is your error, xharbour
1.2 tip ftp class, has only two parameters
 oFTP:nConnTimeout := 20000
 oFTP:bUsePasv     := .T.
 IF oFTP:Open()
    oFTP:Cwd(ftpdir)
    IF !empty(oFTP:List())
       cTamanho:=oFTP:fileSize(ftpfile)
       Inicia_Progress(fdestino,cTamanho,ftpfile)
    ENDIF
    oFTP:CLOSE()
 ENDIF
 Return
 *************************************************
 Function Inicia_Progress(fdestino,wTotal,ftpfile)
 *************************************************
 oFtp:exGauge := { | done, size| ShowGauge(done, size,
wTotal,ftpfile ) }
 oFtp:DownLoadFile(fdestino)
 ****************************************************
 Procedure ShowGauge( nSent, nSize, wTotal, ftpfile )
 ****************************************************
 IF nSent > 0
    @ 10,10 say "Arquivo...: " +ftpfile+" "+ STR(nSent)+" Byts de: " +
str(wTotal)+ " Byts "+str((nSent/wTotal)*100,4) +" %"
 ENDIF
 RETURN



2009/5/24 Itamar Lins <itamarlins@bol.com.br>:
> Hi!
> I get problem with FTP
> Before works of 2009-05-12 09:25 UTC+0200 Viktor Szakats, works fine.
> But now show this error. :-(
> I am using filezilla serverftp.
>
> (000018) 24/5/2009 16:25:20 - integrator (189.105.11.186)> 230 Logged on
> (000018) 24/5/2009 16:25:20 - integrator (189.105.11.186)> TYPE I
> (000018) 24/5/2009 16:25:20 - integrator (189.105.11.186)> 200 Type set to 
> I
> (000018) 24/5/2009 16:25:21 - integrator (189.105.11.186)> CWD
> 05372927000176
> (000018) 24/5/2009 16:25:21 - integrator (189.105.11.186)> 250 CWD
> successful. "/05372927000176" is current directory.
> (000018) 24/5/2009 16:25:21 - integrator (189.105.11.186)> PASV
> (000018) 24/5/2009 16:25:21 - integrator (189.105.11.186)> 227 Entering
> Passive Mode (189,104,69,146,14,108)
> (000018) 24/5/2009 16:25:24 - integrator (189.105.11.186)> STOR 
> estoque.dbf
> (000019) 24/5/2009 16:25:28 - (not logged in) (189.105.11.186)> Connected,
> sending welcome message...
> (000019) 24/5/2009 16:25:28 - (not logged in) (189.105.11.186)> 220 Bem
> Vindo ao Servidor FTP
> (000019) 24/5/2009 16:25:28 - (not logged in) (189.105.11.186)> could not
> send reply, disconnected.
> (000018) 24/5/2009 16:25:32 - integrator (189.105.11.186)> 425 Can't open
> data connection.
> (000018) 24/5/2009 16:25:43 - integrator (189.105.11.186)> m 
> (000018) 24/5/2009 16:25:43 - integrator (189.105.11.186)> 500 Syntax 
> error,
> command unrecognized.
> (000018) 24/5/2009 16:25:43 - integrator (189.105.11.186)>
> (000018) 24/5/2009 16:25:43 - integrator (189.105.11.186)> 500 Syntax 
> error,
> command unrecognized.
> (000018) 24/5/2009 16:25:43 - integrator (189.105.11.186)>
> (000018) 24/5/2009 16:25:43 - integrator (189.105.11.186)> 500 Syntax 
> error,
> command unrecognized.
>
> Via command line works fine, for example.
> ftp -i xyzmyftp.net
> mput *.dbf
>
> My piece of program is:
>
> oFTP:exGauge := { | done, size| ShowGauge(done, size,
> ArrayFile[n] ) }
> If oFTP:UpLoadFile(cFile)
>
>
> Regards,
> Itamar M. Lins Jr.
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Analisi e sviluppo software per Lan e Web - Consulenza informatica - 
Formazione
Delta Informatica S.r.l. http://www.deltain.it/   +39 0321 455962 



From bedipritpal at hotmail.com  Sun May 24 16:30:47 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun May 24 16:30:55 2009
Subject: [Harbour] OLE - Feature Request
Message-ID: <23697736.post@talk.nabble.com>


Hello Mindaugas, All

Here is a MSDN - VB Documentation below. Can we have this type of function
in Harbour?




GetObject Function
Returns a reference to an object provided by a COM component.


Public Function GetObject( _
   Optional ByVal PathName As String = Nothing, _
   Optional ByVal Class As String = Nothing _
) As ObjectParameters
PathName 
Optional; String. The full path and name of the file containing the object
to retrieve. If pathname is omitted, class is required. 
Class 
Optional; String. A string representing the class of the object. 
The Class argument has the following syntax and parts:


appname.objecttypeClass Parameters
appname 
Required; String. The name of the application providing the object. 
objecttype 
Required; String. The type or class of object to create. 
Exceptions/Errors
Exception type Error number Condition 
Exception 429 No object with the specified pathname exists. 
FileNotFoundException 432 No object of the specified type exists.  

Remarks
Use the GetObject function to load an instance of a COM component from a
file. For example:

 Copy Code
Dim CADObject As Object
CADObject = GetObject("C:\CAD\SCHEMA.CAD")When this code is executed, the
application associated with the specified pathname is started and the object
in the specified file is activated.

If PathName is a zero-length string (""), GetObject returns a new object
instance of the specified type. If the PathName argument is omitted,
GetObject returns a currently active object of the specified type. If no
object of the specified type exists, an error occurs.

Some applications allow you to activate a sub-object associated with a file.
Add an exclamation point (!) to the end of the file name and follow it with
a string that identifies the part of the file you want to activate. For
information on how to create this string, see the documentation for the
application that created the object.

For example, in a drawing application you might have multiple layers to a
drawing stored in a file. You could use the following code to activate a
layer within a drawing called SCHEMA.CAD:

 Copy Code
LayerObject = GetObject("C:\CAD\SCHEMA.CAD!Layer3")If you don't specify the
object's Class, Automation determines the application to start and the
object to activate, based on the file name you provide. Some files, however,
may support more than one class of object. For example, a drawing might
support three different types of objects: an Application object, a Drawing
object, and a Toolbar object, all of which are part of the same file. To
specify which object in a file you want to activate, use the optional Class
argument. For example:

 Copy Code
Dim MyObject As Object
MyObject = GetObject("C:\DRAWINGS\SAMPLE.DRW", "FIGMENT.DRAWING")In the
example, FIGMENT is the name of a drawing application and DRAWING is one of
the object types it supports.

Once an object is activated, you reference it in code using the object
variable you defined. In the preceding example, you access properties and
methods of the new object using the object variable MyObject. For example:

 Copy Code
MyObject.Line (9, 90)
MyObject.InsertText (9, 100, "Hello, world.")
MyObject.SaveAs ("C:\DRAWINGS\SAMPLE.DRW")Note   Use the GetObject function
when there is a current instance of the object or if you want to create the
object with a file already loaded. If there is no current instance, and you
do not want the object started with a file loaded, use the CreateObject
function. If an object has registered itself as an Active-X single-instance
object, only one instance of the object is created, no matter how many times
CreateObject is executed. With a single-instance object, GetObject always
returns the same instance when called with the zero-length string ("")
syntax, and it causes an error if the PathName argument is omitted. You
cannot use GetObject to obtain a reference to a class created with Visual
Basic.
Example
This example uses the GetObject function to get a reference to a specific
Microsoft Excel worksheet (MyXL). It uses the worksheet's Application
property to make Microsoft Excel visible, to close it, and so on. Using two
API calls, the DetectExcel sub procedure looks for Microsoft Excel, and if
it is running, enters it in the running object table. The first call to
GetObject causes an error if Microsoft Excel isn't already running. In the
example, the error causes the ExcelWasNotRunning flag to be set to True. The
second call to GetObject specifies a file to open. If Microsoft Excel isn't
already running, the second call starts it and returns a reference to the
worksheet represented by the specified file, test.xls. The file must exist
in the specified location; otherwise, the Visual Basic error Automation
error is generated. Next the example code makes both Microsoft Excel and the
window containing the specified worksheet visible.

Option Strict Off is required because this example uses late binding, where
objects are assigned to generic object variables. You can specify Option
Strict On and declare objects of specific object types if you add a
reference to the Excel type library from the COM tab of the Add Reference
dialog box of the Project menu in Visual Studio .NET.

 Copy Code
' Add Option Strict Off to the top of your program.
Option Strict Off
 ' Declare necessary API routines:
   Declare Function FindWindow Lib "user32" Alias _
      "FindWindowA" (ByVal lpClassName As String, _
      ByVal lpWindowName As Long) As Long

   Declare Function SendMessage Lib "user32" Alias _
   "SendMessageA" (ByVal hWnd As Long, ByVal wMsg As Long, _
      ByVal wParam As Long, ByVal lParam As Long) As Long

Sub GetExcel()
   Dim MyXL As Object   ' Variable to hold reference
   ' to Microsoft Excel.
   Dim ExcelWasNotRunning As Boolean   ' Flag for final release.

   ' Test to see if there is a copy of Microsoft Excel already running.
   On Error Resume Next   ' Defer error trapping.
   ' Getobject function called without the first argument returns a
   ' reference to an instance of the application. 
   ' If the application is not running, an error occurs.
   MyXL = GetObject(, "Excel.Application")
   If Err().Number <> 0 Then ExcelWasNotRunning = True
   Err().Clear() ' Clear Err object in case error occurred.

   ' Check for Microsoft Excel. If Microsoft Excel is running,
   ' enter it into the Running Object table.
   DetectExcel()

   ' Set the object variable to reference the file you want to see.
   MyXL = GetObject("c:\vb\TEST.XLS")

   ' Show Microsoft Excel through its Application property. Then
   ' show the actual window containing the file using the Windows
   ' collection of the MyXL object reference.
   MyXL.Application.Visible = True
   MyXL.Parent.Windows(1).Visible = True
   '  Do manipulations of your  file here.
   '
End Sub

Sub DetectExcel()
   ' Procedure dectects a running Excel and registers it.
   Const WM_USER = 1024
   Dim hWnd As Long
   ' If Excel is running this API call returns its handle.
   hWnd = FindWindow("XLMAIN", 0)
   If hWnd = 0 Then   ' 0 means Excel not running.
      Exit Sub
   Else
      ' Excel is running so use the SendMessage API
      ' function to enter it in the Running Object Table.
      SendMessage(hWnd, WM_USER + 18, 0, 0)
   End If
End SubWhen you call the GetExcel function, a check is made to see if Excel
is already running. If it is not, then an instance of Excel is created.


Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/OLE---Feature-Request-tp23697736p23697736.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From itamarlins at bol.com.br  Sun May 24 16:51:07 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Sun May 24 16:52:05 2009
Subject: [Harbour] Re: TIP upload ftp problem.
References: <gvc8rr$v0o$1@ger.gmane.org>
Message-ID: <gvcc0v$7l1$1@ger.gmane.org>

More info!
with slow connections do not work.!
If ftp is localhost, work fine, but if WAN connection with 4 until 9 Mbits 
not work.

Regards,
Itamar M. Lins Jr. 



From harbour.01 at syenar.hu  Sun May 24 16:59:33 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May 24 16:59:39 2009
Subject: [Harbour] Litte proposal for hbmk
In-Reply-To: <609353e70905241322h55984f32u37fe35aae5f9192e@mail.gmail.com>
References: <609353e70905241322h55984f32u37fe35aae5f9192e@mail.gmail.com>
Message-ID: <18d502870905241359l665db5fdoa8f2833796187d18@mail.gmail.com>

Hi Massimo,

There are two problems with this:

1) Maybe I'm misunderstanding your proposal, but I can't really
see the point of *generating* an xmate project file from hbmk2.
I mean, what is the relevance of any existing hbmk2 logic in this
process? hbmk2 is a make system itself, so using it to convert
its parameters to xmate format falls rather out from its goals.
Furthermore, I wonder who would like to convert hbmk2 input
to xmate, where xmate is present since years, while hbmk2 is
a few months old only. I'd rather favour the integration of hbmk2
into projects like xMate (but rather with a GPL license), I'd
also prefer to invest effort to support open source and portable
products (like hbmk2 itself is). xMate is Windows only and
closed source AFAIK.

Maybe *parsing* xmate project files could be useful for some
current xmate users wanting to migrate to hbmk2, but even in
this case I'd rather propose a converter tool (xmate -> hbm).

2) I don't know xMate and I don't even plan to use it, so it would be
very difficult to develop / test / maintain any code related to it.

Brgds,
Viktor

On Sun, May 24, 2009 at 10:22 PM, Massimo Belgrano <mbelgrano@deltain.it> wrote:
> Hi viktor can you add a --xmate who create a xmate project file?
>
> This is a way for integrate make system with hbmk2
> Integration of editor will be intresting fir win user
>
> FUNCTION CREA_XMATE(filechoice,libadditive)
> ? local a_xmate:={},A
> ? LOCAL X_LOG,X_MATE
> ? AADD(A_XMATE,"[Version]")
> ? AADD(A_XMATE,"Type=xMate")
> ? AADD(A_XMATE,"Number=1.15")
> ? AADD(A_XMATE,"")
> ? AADD(A_XMATE,"[Info]")
> ? AADD(A_XMATE,"Type=Executable")
> ? AADD(A_XMATE,"Architecture=harbour")
> ? AADD(A_XMATE,"Include=")
> ? AADD(A_XMATE,"Define=")
> ? AADD(A_XMATE,"")
> ? AADD(A_XMATE,"[xMate]")
> ? AADD(A_XMATE,"Create Map/List File=No")
> ? AADD(A_XMATE,"")
> ? AADD(A_XMATE,"[Project]")
> ? AADD(A_XMATE,"Run=")
> ? AADD(A_XMATE,"Params=")
> ? AADD(A_XMATE,"Final Path=%HOME%")
> ? AADD(A_XMATE,"Maintain LNK=Yes")
> ? AADD(A_XMATE,"Default Type=1")
> ? AADD(A_XMATE,"Error log=")
> ? AADD(A_XMATE,"")
> ? AADD(A_XMATE,"[Data Path]")
> ? AADD(A_XMATE,"Dbf=")
> ? AADD(A_XMATE,"")
> ? AADD(A_XMATE,"[Editor]")
> ? FOR A=1 TO LEN(FILECHOICE)
> ? ? ?AADD(A_XMATE,ALLTRIM(FILECHOICE[A])+"="+STR(A)+",N,N")
> ? NEXT
> ? AADD(A_XMATE,"")
> ? AADD(A_XMATE,"")
> ? AADD(A_XMATE,"[Files]")
> ? FOR A=1 TO LEN(FILECHOICE) ?// add each nomefile
> ? ? ?AADD(A_XMATE,ALLTRIM(FILECHOICE[A])+"="+STR(A)+",.F.,0,0,")
> ? NEXT
>
> ? for a=1 to len(libadditive)
> ? ? AADD(A_XMATE,"%HB_LIB_INSTALL%\"+libadditive[a]+"="+str(a)+",.T.,0,0,")
> ? next a
> ? xprjmate=aLltrim(filechoice[1])
> ? xprjmate=substr(XPRJMATE,1,len(xPRJmate)-4) +".xhp"
> ? if .not. file(XPRJMATE)
> ? ? ?X_LOG=FCREATE(XPRJMATE)
> ? ? ?FOR a=1 to len(A_XMATE)
> ? ? ? ? FWRITE(X_LOG,A_XMATE[a]+CHR(13)+CHR(10))
> ? ? ?NEXT
>
> ? ? ?FCLOSE(X_LOG)
> ? ENDIF
> ? RUN(XPRJMATE)
>
> --
> Massimo Belgrano
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From harbour.01 at syenar.hu  Sun May 24 17:09:36 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May 24 17:09:40 2009
Subject: [Harbour] Re: TIP upload ftp problem.
In-Reply-To: <gvcc0v$7l1$1@ger.gmane.org>
References: <gvc8rr$v0o$1@ger.gmane.org> <gvcc0v$7l1$1@ger.gmane.org>
Message-ID: <18d502870905241409o8752753w678313fc7b81b84c@mail.gmail.com>

Hi Itamar,

I've reviewed my change you're quoting, but could only find a
few trivial formatting changes which touched FTP related
functionality. Actual code changes were only done to SMTP.

See here:
https://apps.sourceforge.net/trac/harbour-project/changeset/11020

Are you sure it consistently does work before and not after?

I'd guess there some other reason for your issues than this
actual commit. I hope other will also review the change if needed
to spot anything problematic.

Brgds,
Viktor

On Sun, May 24, 2009 at 10:51 PM, Itamar Lins <itamarlins@bol.com.br> wrote:
> More info!
> with slow connections do not work.!
> If ftp is localhost, work fine, but if WAN connection with 4 until 9 Mbits
> not work.
>
> Regards,
> Itamar M. Lins Jr.
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From itamarlins at bol.com.br  Sun May 24 17:21:32 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Sun May 24 17:22:45 2009
Subject: [Harbour] Re: Re: TIP upload ftp problem.
References: <gvc8rr$v0o$1@ger.gmane.org> <gvcc0v$7l1$1@ger.gmane.org>
	<18d502870905241409o8752753w678313fc7b81b84c@mail.gmail.com>
Message-ID: <gvcdq2$d1f$1@ger.gmane.org>

Hello!
I am not sure, because with the slow network is the way that, I had not 
tested.

Regards,
Itamar M. Lins Jr.

"Viktor Szakts" <harbour.01@syenar.hu> 
escreveu na mensagem 
news:18d502870905241409o8752753w678313fc7b81b84c@mail.gmail.com...
> Hi Itamar,
>
> I've reviewed my change you're quoting, but could only find a
> few trivial formatting changes which touched FTP related
> functionality. Actual code changes were only done to SMTP.
>
> See here:
> https://apps.sourceforge.net/trac/harbour-project/changeset/11020
>
> Are you sure it consistently does work before and not after?
>
> I'd guess there some other reason for your issues than this
> actual commit. I hope other will also review the change if needed
> to spot anything problematic.
>
> Brgds,
> Viktor
>
> On Sun, May 24, 2009 at 10:51 PM, Itamar Lins 
> <itamarlins@bol.com.br> wrote:
>> More info!
>> with slow connections do not work.!
>> If ftp is localhost, work fine, but if WAN connection with 4 until 9 
>> Mbits
>> not work.
>>
>> Regards,
>> Itamar M. Lins Jr.
>>
>>
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>> 



From itamarlins at bol.com.br  Sun May 24 17:51:11 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Sun May 24 17:52:04 2009
Subject: [Harbour] Re: Re: TIP upload ftp problem.
References: <gvc8rr$v0o$1@ger.gmane.org> <gvcc0v$7l1$1@ger.gmane.org>
	<18d502870905241409o8752753w678313fc7b81b84c@mail.gmail.com>
Message-ID: <gvcfhk$hva$1@ger.gmane.org>

Hi, Viktor.
The file submitted is being added to the file ftp.log.  this is not 
necessary.
---------------------8<-------------
20090524-18:39:03  :INETSENDALL( <pointer>, 18, STOR estoque.dbf )
>>         18 <<

20090524-18:39:03  :INETERRORCODE( <pointer> )
>>          0 <<

20090524-18:39:03  :INETRECVLINE( <pointer>, , 128 )
>> 150 Connection accepted <<

20090524-18:39:03  :INETERRORCODE( <pointer> )
>>          0 <<

20090524-18:39:03  :INETSENDALL( <pointer>, 32768, m   
   REAJ_STAT  C                   COD_MERCAD C 
MERCADORIA C                   QUANTIDADE N                  RESERVADO  N 
              ESTOQ_MAXI N                  ESTOQ_MINI N     
PS         C     
      OS         --------------------->8--------------

Regards,
Itamar M. Lins Jr.

"Viktor Szakts" <harbour.01@syenar.hu> 
escreveu na mensagem 
news:18d502870905241409o8752753w678313fc7b81b84c@mail.gmail.com...
> Hi Itamar,
>
> I've reviewed my change you're quoting, but could only find a
> few trivial formatting changes which touched FTP related
> functionality. Actual code changes were only done to SMTP.
>
> See here:
> https://apps.sourceforge.net/trac/harbour-project/changeset/11020
>
> Are you sure it consistently does work before and not after?
>
> I'd guess there some other reason for your issues than this
> actual commit. I hope other will also review the change if needed
> to spot anything problematic.
>
> Brgds,
> Viktor
>
> On Sun, May 24, 2009 at 10:51 PM, Itamar Lins 
> <itamarlins@bol.com.br> wrote:
>> More info!
>> with slow connections do not work.!
>> If ftp is localhost, work fine, but if WAN connection with 4 until 9 
>> Mbits
>> not work.
>>
>> Regards,
>> Itamar M. Lins Jr.
>>
>>
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>> 



From mbelgrano at deltain.it  Sun May 24 18:21:07 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun May 24 18:21:36 2009
Subject: [Harbour] Litte proposal for hbmk
In-Reply-To: <18d502870905241359l665db5fdoa8f2833796187d18@mail.gmail.com>
References: <609353e70905241322h55984f32u37fe35aae5f9192e@mail.gmail.com> 
	<18d502870905241359l665db5fdoa8f2833796187d18@mail.gmail.com>
Message-ID: <609353e70905241521j2c11fce9x6a5b125d58d1b76a@mail.gmail.com>

hbmk2 is not a visual editor (for .c and .prg)  who know harbour syntax
xmate will do (also xdev studio but is only Spanish)
Pritpal have distributed in ready to use version xmate becase xmate is
important for having immediate productivity
so think that is important a bidirectional bridge from two world



2009/5/24 Viktor Szak?ts <harbour.01@syenar.hu>:
> Hi Massimo,
>
> There are two problems with this:
>
> 1) Maybe I'm misunderstanding your proposal, but I can't really
> see the point of *generating* an xmate project file from hbmk2.
> I mean, what is the relevance of any existing hbmk2 logic in this
> process? hbmk2 is a make system itself, so using it to convert
> its parameters to xmate format falls rather out from its goals.
> Furthermore, I wonder who would like to convert hbmk2 input
> to xmate, where xmate is present since years, while hbmk2 is
> a few months old only. I'd rather favour the integration of hbmk2
> into projects like xMate (but rather with a GPL license), I'd
> also prefer to invest effort to support open source and portable
> products (like hbmk2 itself is). xMate is Windows only and
> closed source AFAIK.
>
> Maybe *parsing* xmate project files could be useful for some
> current xmate users wanting to migrate to hbmk2, but even in
> this case I'd rather propose a converter tool (xmate -> hbm).
>
> 2) I don't know xMate and I don't even plan to use it, so it would be
> very difficult to develop / test / maintain any code related to it.
>
> Brgds,
> Viktor
>
> On Sun, May 24, 2009 at 10:22 PM, Massimo Belgrano <mbelgrano@deltain.it> wrote:
>> Hi viktor can you add a --xmate who create a xmate project file?
>>
>> This is a way for integrate make system with hbmk2
>> Integration of editor will be intresting fir win user
>>
>> FUNCTION CREA_XMATE(filechoice,libadditive)
>> ? local a_xmate:={},A
>> ? LOCAL X_LOG,X_MATE
>> ? AADD(A_XMATE,"[Version]")
>> ? AADD(A_XMATE,"Type=xMate")
>> ? AADD(A_XMATE,"Number=1.15")
>> ? AADD(A_XMATE,"")
>> ? AADD(A_XMATE,"[Info]")
>> ? AADD(A_XMATE,"Type=Executable")
>> ? AADD(A_XMATE,"Architecture=harbour")
>> ? AADD(A_XMATE,"Include=")
>> ? AADD(A_XMATE,"Define=")
>> ? AADD(A_XMATE,"")
>> ? AADD(A_XMATE,"[xMate]")
>> ? AADD(A_XMATE,"Create Map/List File=No")
>> ? AADD(A_XMATE,"")
>> ? AADD(A_XMATE,"[Project]")
>> ? AADD(A_XMATE,"Run=")
>> ? AADD(A_XMATE,"Params=")
>> ? AADD(A_XMATE,"Final Path=%HOME%")
>> ? AADD(A_XMATE,"Maintain LNK=Yes")
>> ? AADD(A_XMATE,"Default Type=1")
>> ? AADD(A_XMATE,"Error log=")
>> ? AADD(A_XMATE,"")
>> ? AADD(A_XMATE,"[Data Path]")
>> ? AADD(A_XMATE,"Dbf=")
>> ? AADD(A_XMATE,"")
>> ? AADD(A_XMATE,"[Editor]")
>> ? FOR A=1 TO LEN(FILECHOICE)
>> ? ? ?AADD(A_XMATE,ALLTRIM(FILECHOICE[A])+"="+STR(A)+",N,N")
>> ? NEXT
>> ? AADD(A_XMATE,"")
>> ? AADD(A_XMATE,"")
>> ? AADD(A_XMATE,"[Files]")
>> ? FOR A=1 TO LEN(FILECHOICE) ?// add each nomefile
>> ? ? ?AADD(A_XMATE,ALLTRIM(FILECHOICE[A])+"="+STR(A)+",.F.,0,0,")
>> ? NEXT
>>
>> ? for a=1 to len(libadditive)
>> ? ? AADD(A_XMATE,"%HB_LIB_INSTALL%\"+libadditive[a]+"="+str(a)+",.T.,0,0,")
>> ? next a
>> ? xprjmate=aLltrim(filechoice[1])
>> ? xprjmate=substr(XPRJMATE,1,len(xPRJmate)-4) +".xhp"
>> ? if .not. file(XPRJMATE)
>> ? ? ?X_LOG=FCREATE(XPRJMATE)
>> ? ? ?FOR a=1 to len(A_XMATE)
>> ? ? ? ? FWRITE(X_LOG,A_XMATE[a]+CHR(13)+CHR(10))
>> ? ? ?NEXT
>>
>> ? ? ?FCLOSE(X_LOG)
>> ? ENDIF
>> ? RUN(XPRJMATE)
>>
>> --
>> Massimo Belgrano
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From vailtom at gmail.com  Sun May 24 18:49:19 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Sun May 24 18:49:25 2009
Subject: [Harbour] Extensions - possible cleanup?
In-Reply-To: <18d502870905240519o2fb8ec01u6073a457a610fc53@mail.gmail.com>
References: <18d502870905180617x41508273t2bae567fb06b8470@mail.gmail.com>
	<609353e70905240253i71631a6fn6001615844341a9e@mail.gmail.com>
	<18d502870905240334u78201700p8ecf7c7a4da5f36c@mail.gmail.com>
	<609353e70905240347y3bca5772kdd6e34f095f91fd6@mail.gmail.com>
	<18d502870905240352t27391c1bt240358964a75d600@mail.gmail.com>
	<609353e70905240418t1f50daabkecb1525a05c63c4f@mail.gmail.com>
	<18d502870905240519o2fb8ec01u6073a457a610fc53@mail.gmail.com>
Message-ID: <531d7a750905241549r66d312fctaa0bf6d3e7bf9fa4@mail.gmail.com>

Perfect for me...
From bruno.luciani at gmail.com  Sun May 24 18:51:03 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Sun May 24 18:51:09 2009
Subject: [Harbour] Using new Activex Functions
Message-ID: <133778360905241551r6c328481r7dc158bc704fed59@mail.gmail.com>

Could anybody post a little sample
of How to initialize and map events
in new WIN_AXinit and other functions ?

Thanks in advance

Bruno
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090524/78edcfa8/attachment.html
From harbour.01 at syenar.hu  Sun May 24 19:01:19 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun May 24 19:01:27 2009
Subject: [Harbour] Litte proposal for hbmk
In-Reply-To: <609353e70905241521j2c11fce9x6a5b125d58d1b76a@mail.gmail.com>
References: <609353e70905241322h55984f32u37fe35aae5f9192e@mail.gmail.com>
	<18d502870905241359l665db5fdoa8f2833796187d18@mail.gmail.com>
	<609353e70905241521j2c11fce9x6a5b125d58d1b76a@mail.gmail.com>
Message-ID: <18d502870905241601t6e9384emb72fb75cfd92ffc0@mail.gmail.com>

> hbmk2 is not a visual editor (for .c and .prg) ?who know harbour syntax
> xmate will do (also xdev studio but is only Spanish)
> Pritpal have distributed in ready to use version xmate becase xmate is
> important for having immediate productivity
> so think that is important a bidirectional bridge from two world

For me xMate is not important, sorry. It's a closed source
product (also abandoned?) and has nothing to do with our
project. It's a 3rd party component. I'd prefer to spend time
on other things. [ Saying that with all due respect towards
xMate, it's very nicely written application, very professional,
I'm sorry it's not open (and not multiplatform, but I can
accept this knowing the technical struggle with the matter). ]

If anyone is interested enough to write such conversions,
it can be done, hbmk2 source code is open (if required for
this, but I doubt it), there are plenty of spaces to contribute,
but I believe this shouldn't be done as part of hbmk2.prg,
if we need to find a place for it inside our repo, pbly examples
would be a fitting location.

Brgds,
Viktor
From sudipb001 at gmail.com  Sun May 24 23:09:50 2009
From: sudipb001 at gmail.com (Sudip Bhattacharyya)
Date: Sun May 24 23:09:55 2009
Subject: [Harbour] Printing Problem
In-Reply-To: <4A1998A0.8070300@gmail.com>
References: <23696757.post@talk.nabble.com> <4A1998A0.8070300@gmail.com>
Message-ID: <23700562.post@talk.nabble.com>


Hello Xavi,

Thank you for your interest.

>Try this with the latest SVN .-

How can I get latest SVN? (Sorry for my silly question ;) )

Regards.

Sudip

-- 
View this message in context: http://www.nabble.com/Printing-Problem-tp23696757p23700562.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From sudipb001 at gmail.com  Sun May 24 23:12:02 2009
From: sudipb001 at gmail.com (Sudip Bhattacharyya)
Date: Sun May 24 23:12:06 2009
Subject: [Harbour] Printing Problem
In-Reply-To: <609353e70905241241p169dbe45wc2c7dbed659476bd@mail.gmail.com>
References: <23696757.post@talk.nabble.com>
	<609353e70905241241p169dbe45wc2c7dbed659476bd@mail.gmail.com>
Message-ID: <23700597.post@talk.nabble.com>


Hello Massimo Belgrano,

Thanks a lot.

How can I get hbmake2 ?

Regards.

Sudip

-- 
View this message in context: http://www.nabble.com/Printing-Problem-tp23696757p23700597.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From alkresin at users.sourceforge.net  Mon May 25 02:36:09 2009
From: alkresin at users.sourceforge.net (alkresin@users.sourceforge.net)
Date: Mon May 25 02:36:16 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11118] trunk/harbour
Message-ID: <E1M8Tn7-0003ZT-Ct@74yxhf1.ch3.sourceforge.com>

Revision: 11118
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11118&view=rev
Author:   alkresin
Date:     2009-05-25 06:36:08 +0000 (Mon, 25 May 2009)

Log Message:
-----------
2009-05-25 10:30 UTC+0300 Alexander Kresin <alex at belacy.belgorod.su>

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/Makefile

Added Paths:
-----------
    trunk/harbour/utils/hbformat/
    trunk/harbour/utils/hbformat/Makefile
    trunk/harbour/utils/hbformat/hbformat.ini
    trunk/harbour/utils/hbformat/hbformat.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From alex at belacy.belgorod.su  Mon May 25 02:51:57 2009
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Mon May 25 02:52:09 2009
Subject: [Harbour] Re:  Source code formatter
In-Reply-To: <4A16C9A6.3040503@123mail.org>
References: <4A16C9A6.3040503@123mail.org>
Message-ID: <4A1A400D.6020009@belacy.belgorod.su>

Paul,

> Hi Alexander and All,
> 
> I ported Click to Harbour for use on Linux.  The code is untested on 
> Windows but may compile and run.   Added "Calls to" information in 
> function headers and made stand alone executable.  Need to update code 
> in few days but current source and bin is posted on Google Code under 
> harbourclick.
> harbourclick <http://code.google.com/p/harbourclick/>
> 

   As I wrote before, I used Click for a long time, but there are some 
problems ( maybe, bugs ), which forced me to look for other formatter.

   Probably, because Click doesn't know about some Harbour's control 
structures, it moves comments to other lines sometimes.

   The real problems for me bacames when I tried to set 
CASE_OF_FUNCTIONS=LIKEINFILE. I thought that Click simply makes case 
conversion due to click.ini function patterns, but it tried to 
autocomplete some of them - this, of course, caused bugs in my source 
files, which I could find not immedeately (:.

   These all should be cleaned before using it with Harbour.

Regards, Alexander.

From alex at belacy.belgorod.su  Mon May 25 03:21:59 2009
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Mon May 25 03:22:13 2009
Subject: [Harbour] Formatter uploaded
Message-ID: <4A1A4717.6020605@belacy.belgorod.su>

Hi All,

Since the automated procedure has been mailed only the Changelog entry 
header here, I post the whole entry ( possibly it's needed to update the 
doc/howtosvn.txt ):

2009-05-25 10:30 UTC+0300 Alexander Kresin <alex at belacy.belgorod.su>
   + utils/hbformat
   + utils/hbformat/hbformat.prg
   + utils/hbformat/hbformat.ini
   + utils/hbformat/Makefile
     + Harbour source formatter utility has been added. The command line 
to call it:
          hbformat [-r] [options] [@config.ini] file[s]

       -r option ( recursive ) forces formatting files in all nested 
directories.
       Default options ( their values you may find commented in a 
provided hbformat.ini )
       provides the style, accepted in Harbour prgs. The hbformat.ini 
must be in the same
       directory, where the hbformat.exe is. You can use additional ini 
file and point to
       it in a command line with the '@' before it. Options in a command 
line are the same,
       which are in ini file - for example, -lCase=no forces to not make 
case conversion.

   * utils/Makefile
     * Makefile has been changed to build the hbformat


Regards, Alexander.
From M.Horodyski at pzuzycie.com.pl  Mon May 25 03:55:28 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Mon May 25 03:55:35 2009
Subject: [Harbour] exit with switch and for each
In-Reply-To: <531d7a750905231305r10f44100t1a14a1504891f559@mail.gmail.com>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C95023570D4@PINK.zycie.pzu>

Yes, therefore I write "without additive rules".

Regards,
Marek Horodyski 

>-----Original Message-----
>From: Vailton Renato [mailto:vailtom@gmail.com] 
>Sent: Saturday, May 23, 2009 10:06 PM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] exit with switch and for each
>
>Here I use something like this:
>
>lExit := .F.
>
>for each x in stringORarray
>switch x
>case 'a'
> lExit := .T.
> exit // but we need exit from "for each", not only from 
>switch end  if lExit
>   exit;
> end
>next
>
>
From alkresin at users.sourceforge.net  Mon May 25 04:05:59 2009
From: alkresin at users.sourceforge.net (alkresin@users.sourceforge.net)
Date: Mon May 25 04:06:07 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11119]
	trunk/harbour/utils/hbformat/Makefile
Message-ID: <E1M8VC3-0004uw-4b@74yxhf1.ch3.sourceforge.com>

Revision: 11119
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11119&view=rev
Author:   alkresin
Date:     2009-05-25 08:05:58 +0000 (Mon, 25 May 2009)

Log Message:
-----------
Just adding $Id

Modified Paths:
--------------
    trunk/harbour/utils/hbformat/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From alkresin at users.sourceforge.net  Mon May 25 04:07:24 2009
From: alkresin at users.sourceforge.net (alkresin@users.sourceforge.net)
Date: Mon May 25 04:07:31 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11120]
	trunk/harbour/utils/hbformat
Message-ID: <E1M8VDQ-0004vv-Hw@74yxhf1.ch3.sourceforge.com>

Revision: 11120
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11120&view=rev
Author:   alkresin
Date:     2009-05-25 08:07:24 +0000 (Mon, 25 May 2009)

Log Message:
-----------
Trying propset

Modified Paths:
--------------
    trunk/harbour/utils/hbformat/Makefile
    trunk/harbour/utils/hbformat/hbformat.ini
    trunk/harbour/utils/hbformat/hbformat.prg

Property Changed:
----------------
    trunk/harbour/utils/hbformat/Makefile
    trunk/harbour/utils/hbformat/hbformat.ini
    trunk/harbour/utils/hbformat/hbformat.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vatzct at polly.com.ua  Mon May 25 04:16:54 2009
From: vatzct at polly.com.ua (vatzct)
Date: Mon May 25 04:17:18 2009
Subject: [Harbour] Formatter uploaded
In-Reply-To: <4A1A4717.6020605@belacy.belgorod.su>
References: <4A1A4717.6020605@belacy.belgorod.su>
Message-ID: <4A1A53F6.7020307@polly.com.ua>

Alexander S.Kresin ???????(??):
> Hi All,
>
> Since the automated procedure has been mailed only the Changelog entry 
> header here, I post the whole entry ( possibly it's needed to update 
> the doc/howtosvn.txt ):
>
> 2009-05-25 10:30 UTC+0300 Alexander Kresin <alex at belacy.belgorod.su>
>   + utils/hbformat
>   + utils/hbformat/hbformat.prg
>   + utils/hbformat/hbformat.ini
>   + utils/hbformat/Makefile
>     + Harbour source formatter utility has been added. The command 
> line to call it:
>          hbformat [-r] [options] [@config.ini] file[s]
>
>       -r option ( recursive ) forces formatting files in all nested 
> directories.
>       Default options ( their values you may find commented in a 
> provided hbformat.ini )
>       provides the style, accepted in Harbour prgs. The hbformat.ini 
> must be in the same
>       directory, where the hbformat.exe is. You can use additional ini 
> file and point to
>       it in a command line with the '@' before it. Options in a 
> command line are the same,
>       which are in ini file - for example, -lCase=no forces to not 
> make case conversion.
>
>   * utils/Makefile
>     * Makefile has been changed to build the hbformat
>
>
> Regards, Alexander.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
Just try to format hbformat.prg.
C:\dev\harbour_bcc\bin\>hbformat.exe hbformat.prg

Initialization error          3 on line 75 : nLineVar = -1


Regards,
Alexey Myronenko
From vszakats at users.sourceforge.net  Mon May 25 04:19:26 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May 25 04:19:32 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11121] trunk/harbour
Message-ID: <E1M8VP4-000285-OC@3kljzd1.ch3.sourceforge.com>

Revision: 11121
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11121&view=rev
Author:   vszakats
Date:     2009-05-25 08:19:23 +0000 (Mon, 25 May 2009)

Log Message:
-----------
2009-05-25 10:11 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * doc/howtosvn.txt
    * Deleted sections dealing with sending commit e-mails.

  * doc/dirstruc.txt
  * utils/hbmk2/hbmk2.hu_HU.po
  * utils/hbmk2/hbmk2.pt_BR.po
  * utils/hbmk2/hbmk2.prg
  * utils/hbi18n/hbi18n.prg
    * Shuffling extensions:
      .hbl -> .hbi (Harbour i18n)
      .hbp -> .hbl (Harbour Library)
      .hbm -> (unchanged) (Harbour Make)
      .hbt -> .hbp (Harbour Project)

  * utils/hbmk2/hbmk2.hu_HU.po
  * utils/hbmk2/hbmk2.pt_BR.po
  * utils/hbmk2/hbmk2.prg
    + Added reference to -b switch to -debug switch description.
    + Added _HBMK_EMBEDDED_ mode (like in hbformat).
    + Accepting .hbp files (same format as .hbm) on the command
      line (top level). .hbp refers to "Harbour project file".
      Similar function to recent experimental .hbt files, but not
      embeddable.
    * Minor tweak to HB_SHARED envvar reading code.
    * Changed -nohbp switch to -nohbl.
    * Changed -hbl switch to -hbi.

      Updated usage:
      There are three ways to do multitarget hbmk2 sessions:
      1.) hbmk2 [<common_params1>] -target=target1[.hbm|.prg] [<common_params2>] -target=target2[.hbm|.prg] [<common_params3>]
          Examples:
             hbmk2 -target=prog1 -target=prog2 -target=prog3
             hbmk2 -target=prog1.prg -target=prog2.prg -target=prog3.prg
             hbmk2 -target=mylib1.hbm -target=mylib2.hbm -target=myapp.hbm
             hbmk2 -trace -pause -target=mylib1.hbm -target=mylib2.hbm -target=myapp.hbm -beep
      2.) hbmk2 [<common_params1>] -target <target1_params> -target <target2_params> [-notarget <common_params2>]
          Examples:
             hbmk2 -target hello1.prg -target hello2.prg
             hbmk2 -trace -target hello1.prg -target hello2.prg
             hbmk2 -trace -target hello1.prg -target hello2.prg -notarget -beep
      3.) hbmk2 [<common_params1>] target1.hbp [<common_params2>] target2.hbp [<common_params3>]
          where .hbp is an .hbm file just with an .hbp extension.
          Examples:
             hbmk2 mylib1.hbp mylib.hbp myapp.hbp
             hbmk2 -trace -pause mylib1.hbp mylib2.hbp myapp.hbp -beep

   + utils/hbmk2/examples/hmg.hbl
   + utils/hbmk2/examples/whoo.hbl
   + utils/hbmk2/examples/xbgtk.hbl
   - utils/hbmk2/examples/hmg.hbp
   - utils/hbmk2/examples/whoo.hbp
   - utils/hbmk2/examples/xbgtk.hbp
   + utils/hbmk2/examples/hwgui.hbl
   + utils/hbmk2/examples/fwh.hbl
   + utils/hbmk2/examples/xhgtk.hbl
   - utils/hbmk2/examples/hwgui.hbp
   - utils/hbmk2/examples/fwh.hbp
   - utils/hbmk2/examples/xhgtk.hbp
   + utils/hbmk2/examples/c4w.hbl
   + utils/hbmk2/examples/contrib.hbl
   - utils/hbmk2/examples/c4w.hbp
   - utils/hbmk2/examples/contrib.hbp
   + utils/hbmk2/examples/contribf.hbl
   - utils/hbmk2/examples/contribf.hbp
   + contrib/gtalleg/tests/gtallegs.hbl
   + contrib/gtalleg/tests/gtallegd.hbl
   - contrib/gtalleg/tests/gtallegs.hbp
   - contrib/gtalleg/tests/gtallegd.hbp
   + contrib/hbmysql/utils/hbmysql.hbl
   - contrib/hbmysql/utils/hbmysql.hbp
   + contrib/hbmysql/tests/hbmysql.hbl
   - contrib/hbmysql/tests/hbmysql.hbp
   + contrib/hbct/tests/hbct.hbl
   - contrib/hbct/tests/hbct.hbp
   + contrib/xhb/tests/xhb.hbl
   - contrib/xhb/tests/xhb.hbp
   + contrib/hbodbc/tests/hbodbc.hbl
   - contrib/hbodbc/tests/hbodbc.hbp
   + contrib/hbtpathy/tests/hbtpathy.hbl
   - contrib/hbtpathy/tests/hbtpathy.hbp
   + contrib/hbmsql/tests/hbmsql.hbl
   - contrib/hbmsql/tests/hbmsql.hbp
   - contrib/hbmzip/tests/hbmzip.hbp
   + contrib/hbmzip/tests/hbmzip.hbl
   - contrib/hbsqlit3/tests/hbsqlit3.hbp
   + contrib/hbsqlit3/tests/hbsqlit3.hbl
   + contrib/hbblat/tests/hbblat.hbl
   - contrib/hbblat/tests/hbblat.hbp
   + contrib/hbqt/tests/hbqt.hbl
   - contrib/hbqt/tests/hbqt.hbp
   + contrib/hbfbird/tests/hbfbird.hbl
   - contrib/hbfbird/tests/hbfbird.hbp
   + contrib/hbziparc/tests/hbziparc.hbl
   - contrib/hbziparc/tests/hbziparc.hbp
   + contrib/hbnf/tests/hbnf.hbl
   - contrib/hbnf/tests/hbnf.hbp
   + contrib/hbcurl/tests/hbcurl.hbl
   - contrib/hbcurl/tests/hbcurl.hbp
   + contrib/gtqtc/tests/gtqtc.hbl
   - contrib/gtqtc/tests/gtqtc.hbp
   + contrib/rddsql/sddmy/tests/sddmy.hbl
   - contrib/rddsql/sddmy/tests/sddmy.hbp
   - contrib/rddsql/tests/rddsql.hbp
   + contrib/rddsql/tests/rddsql.hbl
   + contrib/rddsql/sddodbc/tests/sddodbc.hbl
   - contrib/rddsql/sddodbc/tests/sddodbc.hbp
   + contrib/hbhpdf/tests/hbhpdf.hbl
   - contrib/hbhpdf/tests/hbhpdf.hbp
   + contrib/rddado/tests/rddado.hbl
   - contrib/rddado/tests/rddado.hbp
   + contrib/gtwvg/tests/gtwvg.hbl
   - contrib/gtwvg/tests/gtwvg.hbp
   + contrib/hbpgsql/tests/hbpgsql.hbl
   - contrib/hbpgsql/tests/hbpgsql.hbp
   + contrib/rddads/tests/rddads.hbl
   - contrib/rddads/tests/rddads.hbp
   + contrib/hbclipsm/tests/hbclipsm.hbl
   - contrib/hbclipsm/tests/hbclipsm.hbp
   + contrib/hbfimage/tests/hbfimage.hbl
   - contrib/hbfimage/tests/hbfimage.hbp
   + contrib/hbgd/tests/hbgd.hbl
   - contrib/hbgd/tests/hbgd.hbp
   + contrib/hbmisc/tests/hbmisc.hbl
   - contrib/hbmisc/tests/hbmisc.hbp
   + contrib/hbtip/tests/hbtip.hbl
   - contrib/hbtip/tests/hbtip.hbp
   - contrib/hbwin/tests/hbwin.hbp
   + contrib/hbwin/tests/hbwin.hbl
   - contrib/hbvpdf/tests/hbvpdf.hbp
   + contrib/hbvpdf/tests/hbvpdf.hbl
   + contrib/hbssl/tests/hbssl.hbl
   - contrib/hbssl/tests/hbssl.hbp
   + contrib/hbbtree/tests/hbbtree.hbl
   - contrib/hbbtree/tests/hbbtree.hbp
   + contrib/hbcrypt/tests/hbcrypt.hbl
   - contrib/hbcrypt/tests/hbcrypt.hbp
   - contrib/examples/hbsqlit2/tests/hbsqlit2.hbp
   + contrib/examples/hbsqlit2/tests/hbsqlit2.hbl
   + contrib/examples/hbapollo/tests/hbapollo.hbl
   - contrib/examples/hbapollo/tests/hbapollo.hbp
   + contrib/examples/hbgf/tests/hbgf.hbl
   - contrib/examples/hbgf/tests/hbgf.hbp
   + contrib/examples/terminal/terminal.hbl
   - contrib/examples/terminal/terminal.hbp
   + contrib/examples/hbwhat/tests/hbwhat.hbl
   - contrib/examples/hbwhat/tests/hbwhat.hbp
    * Renamed *.hbp -> *.hbl in whole source tree.

  * doc/dirstruc.txt
  * bin/postinst.bat
  * utils/hbformat/hbformat.ini
  + utils/hbformat/hbformat.hbm
  * utils/hbformat/hbformat.prg
  * utils/hbformat/Makefile
    ! Added SVN props.
    + Added hbformat.hbm (hbmk2 make file).
    % Deleted forced MT mode from Makefile (not needed for hbformat)
    ! Separated C code from .prg.
    ! Minor fix to RF_FILEREAD() (non-string param GPF)
    % Minor opts to RF_FILEREAD().
    * RF_FULLPATH() changed to .prg level macro (from C).
    * Some formatting tweaks to hbformat.prg.
    + Added generation of shared hbformat executable to build process.
    * Using DEFAULT (common.ch).
    ! Using hb_osFileMask() instead of "*.*".
    * Minor tweaks to header output.
    ! Added to distruct.txt.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/postinst.bat
    trunk/harbour/doc/dirstruc.txt
    trunk/harbour/doc/howtosvn.txt
    trunk/harbour/utils/hbformat/Makefile
    trunk/harbour/utils/hbformat/hbformat.prg
    trunk/harbour/utils/hbi18n/hbi18n.prg
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.po
    trunk/harbour/utils/hbmk2/hbmk2.prg
    trunk/harbour/utils/hbmk2/hbmk2.pt_BR.po

Added Paths:
-----------
    trunk/harbour/contrib/examples/hbapollo/tests/hbapollo.hbl
    trunk/harbour/contrib/examples/hbgf/tests/hbgf.hbl
    trunk/harbour/contrib/examples/hbsqlit2/tests/hbsqlit2.hbl
    trunk/harbour/contrib/examples/hbwhat/tests/hbwhat.hbl
    trunk/harbour/contrib/examples/terminal/terminal.hbl
    trunk/harbour/contrib/gtalleg/tests/gtallegd.hbl
    trunk/harbour/contrib/gtalleg/tests/gtallegs.hbl
    trunk/harbour/contrib/gtqtc/tests/gtqtc.hbl
    trunk/harbour/contrib/gtwvg/tests/gtwvg.hbl
    trunk/harbour/contrib/hbblat/tests/hbblat.hbl
    trunk/harbour/contrib/hbbtree/tests/hbbtree.hbl
    trunk/harbour/contrib/hbclipsm/tests/hbclipsm.hbl
    trunk/harbour/contrib/hbcrypt/tests/hbcrypt.hbl
    trunk/harbour/contrib/hbct/tests/hbct.hbl
    trunk/harbour/contrib/hbcurl/tests/hbcurl.hbl
    trunk/harbour/contrib/hbfbird/tests/hbfbird.hbl
    trunk/harbour/contrib/hbfimage/tests/hbfimage.hbl
    trunk/harbour/contrib/hbgd/tests/hbgd.hbl
    trunk/harbour/contrib/hbhpdf/tests/hbhpdf.hbl
    trunk/harbour/contrib/hbmisc/tests/hbmisc.hbl
    trunk/harbour/contrib/hbmsql/tests/hbmsql.hbl
    trunk/harbour/contrib/hbmysql/tests/hbmysql.hbl
    trunk/harbour/contrib/hbmysql/utils/hbmysql.hbl
    trunk/harbour/contrib/hbmzip/tests/hbmzip.hbl
    trunk/harbour/contrib/hbnf/tests/hbnf.hbl
    trunk/harbour/contrib/hbodbc/tests/hbodbc.hbl
    trunk/harbour/contrib/hbpgsql/tests/hbpgsql.hbl
    trunk/harbour/contrib/hbqt/tests/hbqt.hbl
    trunk/harbour/contrib/hbsqlit3/tests/hbsqlit3.hbl
    trunk/harbour/contrib/hbssl/tests/hbssl.hbl
    trunk/harbour/contrib/hbtip/tests/hbtip.hbl
    trunk/harbour/contrib/hbtpathy/tests/hbtpathy.hbl
    trunk/harbour/contrib/hbvpdf/tests/hbvpdf.hbl
    trunk/harbour/contrib/hbwin/tests/hbwin.hbl
    trunk/harbour/contrib/hbziparc/tests/hbziparc.hbl
    trunk/harbour/contrib/rddado/tests/rddado.hbl
    trunk/harbour/contrib/rddads/tests/rddads.hbl
    trunk/harbour/contrib/rddsql/sddmy/tests/sddmy.hbl
    trunk/harbour/contrib/rddsql/sddodbc/tests/sddodbc.hbl
    trunk/harbour/contrib/rddsql/tests/rddsql.hbl
    trunk/harbour/contrib/xhb/tests/xhb.hbl
    trunk/harbour/utils/hbformat/hbformat.hbm
    trunk/harbour/utils/hbmk2/examples/c4w.hbl
    trunk/harbour/utils/hbmk2/examples/contrib.hbl
    trunk/harbour/utils/hbmk2/examples/contribf.hbl
    trunk/harbour/utils/hbmk2/examples/fwh.hbl
    trunk/harbour/utils/hbmk2/examples/hmg.hbl
    trunk/harbour/utils/hbmk2/examples/hwgui.hbl
    trunk/harbour/utils/hbmk2/examples/whoo.hbl
    trunk/harbour/utils/hbmk2/examples/xbgtk.hbl
    trunk/harbour/utils/hbmk2/examples/xhgtk.hbl

Removed Paths:
-------------
    trunk/harbour/contrib/examples/hbapollo/tests/hbapollo.hbp
    trunk/harbour/contrib/examples/hbgf/tests/hbgf.hbp
    trunk/harbour/contrib/examples/hbsqlit2/tests/hbsqlit2.hbp
    trunk/harbour/contrib/examples/hbwhat/tests/hbwhat.hbp
    trunk/harbour/contrib/examples/terminal/terminal.hbp
    trunk/harbour/contrib/gtalleg/tests/gtallegd.hbp
    trunk/harbour/contrib/gtalleg/tests/gtallegs.hbp
    trunk/harbour/contrib/gtqtc/tests/gtqtc.hbp
    trunk/harbour/contrib/gtwvg/tests/gtwvg.hbp
    trunk/harbour/contrib/hbblat/tests/hbblat.hbp
    trunk/harbour/contrib/hbbtree/tests/hbbtree.hbp
    trunk/harbour/contrib/hbclipsm/tests/hbclipsm.hbp
    trunk/harbour/contrib/hbcrypt/tests/hbcrypt.hbp
    trunk/harbour/contrib/hbct/tests/hbct.hbp
    trunk/harbour/contrib/hbcurl/tests/hbcurl.hbp
    trunk/harbour/contrib/hbfbird/tests/hbfbird.hbp
    trunk/harbour/contrib/hbfimage/tests/hbfimage.hbp
    trunk/harbour/contrib/hbgd/tests/hbgd.hbp
    trunk/harbour/contrib/hbhpdf/tests/hbhpdf.hbp
    trunk/harbour/contrib/hbmisc/tests/hbmisc.hbp
    trunk/harbour/contrib/hbmsql/tests/hbmsql.hbp
    trunk/harbour/contrib/hbmysql/tests/hbmysql.hbp
    trunk/harbour/contrib/hbmysql/utils/hbmysql.hbp
    trunk/harbour/contrib/hbmzip/tests/hbmzip.hbp
    trunk/harbour/contrib/hbnf/tests/hbnf.hbp
    trunk/harbour/contrib/hbodbc/tests/hbodbc.hbp
    trunk/harbour/contrib/hbpgsql/tests/hbpgsql.hbp
    trunk/harbour/contrib/hbqt/tests/hbqt.hbp
    trunk/harbour/contrib/hbsqlit3/tests/hbsqlit3.hbp
    trunk/harbour/contrib/hbssl/tests/hbssl.hbp
    trunk/harbour/contrib/hbtip/tests/hbtip.hbp
    trunk/harbour/contrib/hbtpathy/tests/hbtpathy.hbp
    trunk/harbour/contrib/hbvpdf/tests/hbvpdf.hbp
    trunk/harbour/contrib/hbwin/tests/hbwin.hbp
    trunk/harbour/contrib/hbziparc/tests/hbziparc.hbp
    trunk/harbour/contrib/rddado/tests/rddado.hbp
    trunk/harbour/contrib/rddads/tests/rddads.hbp
    trunk/harbour/contrib/rddsql/sddmy/tests/sddmy.hbp
    trunk/harbour/contrib/rddsql/sddodbc/tests/sddodbc.hbp
    trunk/harbour/contrib/rddsql/tests/rddsql.hbp
    trunk/harbour/contrib/xhb/tests/xhb.hbp
    trunk/harbour/utils/hbmk2/examples/c4w.hbp
    trunk/harbour/utils/hbmk2/examples/contrib.hbp
    trunk/harbour/utils/hbmk2/examples/contribf.hbp
    trunk/harbour/utils/hbmk2/examples/fwh.hbp
    trunk/harbour/utils/hbmk2/examples/hmg.hbp
    trunk/harbour/utils/hbmk2/examples/hwgui.hbp
    trunk/harbour/utils/hbmk2/examples/whoo.hbp
    trunk/harbour/utils/hbmk2/examples/xbgtk.hbp
    trunk/harbour/utils/hbmk2/examples/xhgtk.hbp


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From M.Horodyski at pzuzycie.com.pl  Mon May 25 04:33:19 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Mon May 25 04:33:25 2009
Subject: [Harbour] gpf
In-Reply-To: <4A191D22.8070607@gmail.com>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9502357102@PINK.zycie.pzu>

>-----Original Message-----
>From: Xavi [mailto:jarabal@gmail.com] 
>Sent: Sunday, May 24, 2009 12:11 PM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] gpf
>
>Hi Marek,
>
>marek.horodyski@interia.pl escribi?:
>> 

[...]

>> Maby, for optimization, for escape from switch we need another rules 
>> word ?
>
>May be, __enumExit() ;) but ...
>hmmm... try with -gc3
>
>> but in real big app I have this gpf
>
>How is compiled the real big app?
>
>Xavi

I always use -gc3.
My app is no so big like Viktors ( less than 3Mb as Owatcom exe with circa 300 very small functions, withot compression), because I use techinque like __HRBLOAD, __HRBDO, __HRBRUN (already in Clipper), and my small app "doing everything". 

Regards,
Marek Horodyski
From alkresin at users.sourceforge.net  Mon May 25 04:51:44 2009
From: alkresin at users.sourceforge.net (alkresin@users.sourceforge.net)
Date: Mon May 25 04:51:48 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11122] trunk/harbour
Message-ID: <E1M8VuK-0001Of-0g@d5vjzd1.ch3.sourceforge.com>

Revision: 11122
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11122&view=rev
Author:   alkresin
Date:     2009-05-25 08:51:43 +0000 (Mon, 25 May 2009)

Log Message:
-----------
2009-05-25 10:30 UTC+0300 Alexander Kresin <alex at belacy.belgorod.su>
  * utils/hbformat/hbformat.prg
    ! Fixed SetOption() method.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbformat/hbformat.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From alex at belacy.belgorod.su  Mon May 25 04:53:58 2009
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Mon May 25 04:54:12 2009
Subject: [Harbour] Re:  Formatter uploaded
In-Reply-To: <4A1A53F6.7020307@polly.com.ua>
References: <4A1A4717.6020605@belacy.belgorod.su>
	<4A1A53F6.7020307@polly.com.ua>
Message-ID: <4A1A5CA6.6010804@belacy.belgorod.su>


> Just try to format hbformat.prg.
> C:\dev\harbour_bcc\bin\>hbformat.exe hbformat.prg
> 
> Initialization error          3 on line 75 : nLineVar = -1
> 

  That was an error reading the hbformat.ini, the program didn't 
undestand the -1 value.
  Now it's fixed.

  Regards, Alexander.
From harbour.01 at syenar.hu  Mon May 25 05:36:59 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon May 25 05:37:09 2009
Subject: [Harbour] Printing Problem
In-Reply-To: <23700597.post@talk.nabble.com>
References: <23696757.post@talk.nabble.com>
	<609353e70905241241p169dbe45wc2c7dbed659476bd@mail.gmail.com>
	<23700597.post@talk.nabble.com>
Message-ID: <846E0371-2F0D-4731-8F02-B53B5D34BA26@syenar.hu>

Hi Sudip,

It's part of Harbour, so simply get Harbour and build it.

Brgds,
Viktor

On 2009.05.25., at 5:12, Sudip Bhattacharyya wrote:

>
> Hello Massimo Belgrano,
>
> Thanks a lot.
>
> How can I get hbmake2 ?
>
> Regards.
>
> Sudip
>
> -- 
> View this message in context: http://www.nabble.com/Printing-Problem-tp23696757p23700597.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon May 25 05:39:18 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon May 25 05:39:26 2009
Subject: [Harbour] Printing Problem
In-Reply-To: <23700562.post@talk.nabble.com>
References: <23696757.post@talk.nabble.com> <4A1998A0.8070300@gmail.com>
	<23700562.post@talk.nabble.com>
Message-ID: <6D41912B-CBA8-442F-A012-EF2F39EDFD7E@syenar.hu>

You have a few choices, I suggest to go to our sf.net
page (also linked from harbour-project.org) and look for
Code / SVN menu.

If you downloaded the source, look into INSTALL doc
for more.

Brgds,
Viktor

On 2009.05.25., at 5:09, Sudip Bhattacharyya wrote:

>
> Hello Xavi,
>
> Thank you for your interest.
>
>> Try this with the latest SVN .-
>
> How can I get latest SVN? (Sorry for my silly question ;) )
>
> Regards.
>
> Sudip
>
> -- 
> View this message in context: http://www.nabble.com/Printing-Problem-tp23696757p23700562.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From jarabal at gmail.com  Mon May 25 05:56:18 2009
From: jarabal at gmail.com (Xavi)
Date: Mon May 25 05:58:53 2009
Subject: [Harbour] gpf
In-Reply-To: <20090524053319.127B1CF0C0@f06.poczta.interia.pl>
References: <20090524053319.127B1CF0C0@f06.poczta.interia.pl>
Message-ID: <4A1A6B42.7090107@gmail.com>

Small, reduced, self-contained, sample of how cause gpf only with -gc3 .-

Procedure Main()
   Local x, stringORarray := 'Small'

   for each x in stringORarray
     switch x
       case 'a'
         exit
     end
     ? x
   next  // GPF

   Wait
return

--
Xavi

P.S. Sorry for my bad english. :'(

marek.horodyski@interia.pl escribi?:
> This small example work :
> 
> Function Main()
> Local a, b, c, t := {}
>  rtzp( "x := -1, pd, iu, np := 'Drukarka.', p := Zrodlo() + 'prewencj.a', v := V(), l",, t)
>  for each c in t
>   ? c
>  next
> Return Nil
> 
> Function RTZP( l, s, t)
>  Local z := '', n := 1, c, depth := 0, i := Len( l), o := .t., lc := '"'+"'", lo := ''
>  #include 'common.ch'
>  DEFAULT s TO ',', t TO {}
>  If !Empty( t)
>   Asize( t, 0)
>  End
>  for each c in l
>   If     c == s .AND. depth == 0      ; AADD( t, AllTrim( z)) ; z := ''
>   Else                                ; z += c
>   End
>   switch c
>   case '([{' ; depth++ ; loop
>   case ')]}' ; depth-- ; loop
>   end
>   If      o .AND. c $  lc ; o := !o ; lo := c  ; depth++
>   ElseIf !o .AND. c == lo ; o := !o ; lo := '' ; depth--
>   End
>  next // here is 21 line.
>  if !Empty( z) ; AADD( t, AllTrim( z))
>  end
>  Return t
> 
> but in real big app I have this gpf :
> 
> Nienaprawialny b??d nr 6005: Exception error:
> 
>     Exception Code:C0000005
>     Exception Address:00409BC4
>     EAX:00AE31E4  EBX:00AE31E4  ECX:00AE237C  EDX:00AE2564
>     ESI:00000001  EDI:00000001  EBP:00AE31E4
>     CS:EIP:001B:00409BC4  SS:ESP:0023:0006FC8C
>     DS:0023  ES:0023  FS:003B  GS:0000
>     Flags:00010202
>     CS:EIP: F6 46 01 20 74 0B 56 E8 10 06 09 00 83 C4 04 89
>     SS:ESP: 0006FE00 00AE23A8 00000001 0065AC8C 0040EB45 00580C6C 00000001 00000
> 000 00689670 0040B3B4 00000034 00000000 00AE961C 00000000 00010015 0006FE00
> 
>     C stack:
>     EIP:     EBP:       Frame: OldEBP, RetAddr, Params...
> 
> 
> Modules:
> 0x00400000 0x002C1000 D:\NOWEPROD\EXE\homar.exe
> 0x7C900000 0x000B2000 C:\WINDOWS\system32\ntdll.dll
> 0x7C800000 0x000FC000 C:\WINDOWS\system32\kernel32.dll
> 0x77D30000 0x00090000 C:\WINDOWS\system32\USER32.DLL
> 0x77F10000 0x00047000 C:\WINDOWS\system32\GDI32.dll
> 0x77DC0000 0x000AC000 C:\WINDOWS\system32\ADVAPI32.DLL
> 0x77E70000 0x00091000 C:\WINDOWS\system32\RPCRT4.dll
> 0x72F90000 0x00026000 C:\WINDOWS\system32\WINSPOOL.DRV
> 0x77C00000 0x00058000 C:\WINDOWS\system32\msvcrt.dll
> 0x76360000 0x0001D000 C:\WINDOWS\system32\IMM32.DLL
> 
> Called from RTZP(21) in rtzp.prg
> Called from KOMPILATOR(0) in kompilat.prg
> Called from BOSS(0) in boss.prg
> Called from START(0) in START.PRG
> Called from MAIN(163) in homar.prg
> 
> Regards,
> Marek Horodyski
> 
> 
> 
> ----------------------------------------------------------------------
> Fantastyczne nagrody do zgarniecia!
> Zagraj >> http://link.interia.pl/f2177 
> 
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 


From dbtopas at dbtopas.lt  Mon May 25 06:23:30 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon May 25 06:22:17 2009
Subject: [Harbour] OLE - Feature Request
In-Reply-To: <23697736.post@talk.nabble.com>
References: <23697736.post@talk.nabble.com>
Message-ID: <4A1A71A2.8010706@dbtopas.lt>

Pritpal Bedi wrote:
> Hello Mindaugas, All
> 
> Here is a MSDN - VB Documentation below. Can we have this type of function
> in Harbour?
> 
> GetObject Function
> Returns a reference to an object provided by a COM component.
> 
> Public Function GetObject( _
>    Optional ByVal PathName As String = Nothing, _
>    Optional ByVal Class As String = Nothing _
> ) As ObjectParameters


Hi,


I found the way to implement GetObject() with the first parameter only 
(it is CoGetObject()). It seems, the function is equivalent 
CreateObject() if only the second parameter is used. But I found no 
info, how it can be implemented using both parameters...


Regards,
Mindaugas

From vszakats at users.sourceforge.net  Mon May 25 06:30:50 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May 25 06:30:55 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11123] trunk/harbour
Message-ID: <E1M8XSE-0001lb-Cd@c3vjzd1.ch3.sourceforge.com>

Revision: 11123
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11123&view=rev
Author:   vszakats
Date:     2009-05-25 10:30:46 +0000 (Mon, 25 May 2009)

Log Message:
-----------
2009-05-25 12:30 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_gnu.bat
    % Fixed to exclude external libs from dll phase of build.
      This will make the process a bit faster.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/make_gnu.bat


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Mon May 25 06:42:02 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May 25 06:42:08 2009
Subject: [Harbour] hbwin / axcore.c and C++
Message-ID: <18d502870905250342j6a42aacevc7855f4f2031cc61@mail.gmail.com>

Hi All,

All compilers are broken in C++ mode for hbwin / axcore.c, this means
msvc and owatcom in default builds.

Any chance fixing these?

--- msvc
../../axcore.c(155) : error C2143: syntax error : missing ';' before '*'
../../axcore.c(155) : error C4430: missing type specifier - int
assumed. Note: C++ does not support default-int
../../axcore.c(155) : error C4430: missing type specifier - int
assumed. Note: C++ does not support default-int
../../axcore.c(184) : error C2039: 'lpVtbl' : is not a member of 'ISink'
        ../../axcore.c(154) : see declaration of 'ISink'
../../axcore.c(184) : error C2227: left of '->Release' must point to
class/struct/union/generic type
../../axcore.c(190) : error C2664: 'IsEqualGUID' : cannot convert
parameter 2 from 'const IID *' to 'const GUID &'
        Reason: cannot convert from 'const IID *' to 'const GUID'
        No constructor could take the source type, or constructor
overload resolution was ambiguous
../../axcore.c(190) : error C2664: 'IsEqualGUID' : cannot convert
parameter 2 from 'const IID *' to 'const GUID &'
        Reason: cannot convert from 'const IID *' to 'const GUID'
        No constructor could take the source type, or constructor
overload resolution was ambiguous
../../axcore.c(193) : error C2039: 'lpVtbl' : is not a member of 'ISink'
        ../../axcore.c(154) : see declaration of 'ISink'
../../axcore.c(193) : error C2227: left of '->AddRef' must point to
class/struct/union/generic type
../../axcore.c(202) : error C2365: 'AddRef' : redefinition; previous
definition was 'formerly unknown identifier'
../../axcore.c(208) : error C2365: 'Release' : redefinition; previous
definition was 'formerly unknown identifier'
../../axcore.c(261) : error C2664: 'IsEqualGUID' : cannot convert
parameter 2 from 'const IID *' to 'const GUID &'
        Reason: cannot convert from 'const IID *' to 'const GUID'
        No constructor could take the source type, or constructor
overload resolution was ambiguous
../../axcore.c(281) : warning C4244: 'argument' : conversion from
'int' to 'USHORT', possible loss of data
../../axcore.c(291) : error C4430: missing type specifier - int
assumed. Note: C++ does not support default-int
../../axcore.c(291) : error C2146: syntax error : missing ';' before
identifier 'ISink_Vtbl'
../../axcore.c(291) : error C4430: missing type specifier - int
assumed. Note: C++ does not support default-int
../../axcore.c(292) : error C2440: 'initializing' : cannot convert
from 'HRESULT (__stdcall *)(IDispatch *,const IID &,void **)' to
 'int'
        There is no context in which this conversion is possible
../../axcore.c(293) : error C2078: too many initializers
../../axcore.c(331) : error C2039: 'lpVtbl' : is not a member of 'ISink'
        ../../axcore.c(154) : see declaration of 'ISink'
../../axcore.c(331) : error C2059: syntax error : ')'
---

--- owatcom
../../axcore.c(155): Error! E336: col(17) declaration specifiers are
required to declare 'IDispatchVtbl'
../../axcore.c(155): Error! E006: col(17) syntax error; probable
cause: missing ';'
../../axcore.c(160): Error! E498: col(3) syntax error before 'ISink';
probable cause: incorrectly spelled type name
../../axcore.c(165): Error! E121: col(29) syntax error
../../axcore.c(167): Error! E029: col(8) symbol 'pSink' has not been declared
../../axcore.c(172): Error! E029: col(8) symbol 'pSink' has not been declared
../../axcore.c(184): Error! E029: col(9) symbol 'pSink' has not been declared
../../axcore.c(190): Error! E473: col(40) function argument(s) do not
match those in prototype
../../axcore.c(190): Note! N392: col(40) definition: 'int IsEqualGUID(
_GUID const &, _GUID const & )'
../../axcore.c(190): Note! N643: col(40) cannot convert argument 2
defined in: ../../axcore.c(190) (col 40)
../../axcore.c(190): Note! N630: col(40) source conversion type is
'_GUID const *'
../../axcore.c(190): Note! N631: col(40) target conversion type is
'_GUID const (lvalue)'
../../axcore.c(190): Error! E473: col(78) function argument(s) do not
match those in prototype
../../axcore.c(190): Note! N392: col(78) definition: 'int IsEqualGUID(
_GUID const &, _GUID const & )'
../../axcore.c(190): Note! N643: col(78) cannot convert argument 2
defined in: ../../axcore.c(190) (col 78)
../../axcore.c(190): Note! N630: col(78) source conversion type is
'_GUID const *'
../../axcore.c(190): Note! N631: col(78) target conversion type is
'_GUID const (lvalue)'
../../axcore.c(193): Error! E121: col(18) syntax error
../../axcore.c(203): Error! E121: col(24) syntax error
../../axcore.c(204): Error! E028: col(1) expecting ';' but found '}'
../../axcore.c(207): Error! E337: col(32) static function declared in
block scope
../../axcore.c(207): Note! N751: col(32) function prototype is
'unsigned long stdcall ( IDispatch * )'
../../axcore.c(208): Error! E006: col(1) syntax error; probable cause:
missing ';'
../../axcore.c(302): Error! E115: col(30) linkages may only be
declared in file scope
../../axcore.c(303): Error! E006: col(1) syntax error; probable cause:
missing ';'
../../axcore.c(360): Error! E199: col(0) premature end-of-file
encountered during compilation
../../axcore.c(360): Warning! W014: col(0) no reference to symbol
'hb_sink_destructor'
../../axcore.c(163): Note! N392: col(44) definition: 'void
hb_sink_destructor( void * )'
../../axcore.c(360): Warning! W014: col(0) no reference to symbol
'QueryInterface'
../../axcore.c(188): Note! N392: col(34) definition: 'long stdcall
QueryInterface( IDispatch *, _GUID const &, void * * )'
../../axcore.c(360): Warning! W014: col(0) no reference to symbol 'AddRef'
../../axcore.c(201): Note! N392: col(32) definition: 'unsigned long
stdcall AddRef( IDispatch * )'
---

Brgds,
Viktor
From gfilatov at front.ru  Mon May 25 06:54:20 2009
From: gfilatov at front.ru (Grigory Filatov)
Date: Mon May 25 06:54:26 2009
Subject: [Harbour] Formatter uploaded
In-Reply-To: <4A1A4717.6020605@belacy.belgorod.su>
References: <4A1A4717.6020605@belacy.belgorod.su>
Message-ID: <23705083.post@talk.nabble.com>


Hi Alexander,

Please be so kind to upload a missing file hbformac.c with C-function
RF_FILEREAD().

Thanks in advance!

--
Kind Regards,
Grigory Filatov
-- 
View this message in context: http://www.nabble.com/Formatter-uploaded-tp23702351p23705083.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From alkresin at users.sourceforge.net  Mon May 25 07:01:29 2009
From: alkresin at users.sourceforge.net (alkresin@users.sourceforge.net)
Date: Mon May 25 07:01:34 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11124] trunk/harbour
Message-ID: <E1M8Xvt-0002FT-8x@c3vjzd1.ch3.sourceforge.com>

Revision: 11124
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11124&view=rev
Author:   alkresin
Date:     2009-05-25 11:01:28 +0000 (Mon, 25 May 2009)

Log Message:
-----------
2009-05-25 15:00 UTC+0300 Alexander Kresin <alex at belacy.belgorod.su>
  * utils/hbformat/hbformat.prg
    ! Small fix

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbformat/hbformat.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From alex at belacy.belgorod.su  Mon May 25 07:05:48 2009
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Mon May 25 07:05:58 2009
Subject: [Harbour] Re:  SF.net SVN: harbour-project:[11121] trunk/harbour
In-Reply-To: <E1M8VP4-000285-OC@3kljzd1.ch3.sourceforge.com>
References: <E1M8VP4-000285-OC@3kljzd1.ch3.sourceforge.com>
Message-ID: <4A1A7B8C.6010207@belacy.belgorod.su>

>   * utils/hbformat/hbformat.ini
>   + utils/hbformat/hbformat.hbm
>   * utils/hbformat/hbformat.prg
>   * utils/hbformat/Makefile
>     ! Added SVN props.
>     + Added hbformat.hbm (hbmk2 make file).
>     % Deleted forced MT mode from Makefile (not needed for hbformat)
>     ! Separated C code from .prg.

Viktor, it seems, you forgot to add the hbformac.c.
BTW, what's bad in using #pragma BEGINDUMP ... #pragma ENDDUMP ?

Regards, Alexander.
From druzus at users.sourceforge.net  Mon May 25 07:12:40 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Mon May 25 07:12:45 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11125] trunk/harbour
Message-ID: <E1M8Y6i-0007hv-Qf@74yxhf1.ch3.sourceforge.com>

Revision: 11125
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11125&view=rev
Author:   druzus
Date:     2009-05-25 11:12:39 +0000 (Mon, 25 May 2009)

Log Message:
-----------
2009-05-25 13:21 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gtxwc/gtxwc.c
    ! fixed typo in HB_GTXVG_SQUARE shape initialization

  * harbour/include/hbrddnsx.h
  * harbour/include/hbrddntx.h
  * harbour/source/rdd/dbfntx/dbfntx1.c
  * harbour/source/rdd/dbfnsx/dbfnsx1.c
    * code cleanup - use predefined #define instead of hardcoded constant
      values

  * harbour/source/rtl/valtoexp.prg
    * added REQUEST __objSetClass

  * harbour/source/compiler/gencc.c
    ! fixed -gc3 code generated for switch statement - thanks to Marek and
      Xavi for information and self contain example
      TODO: add missing RT error in -gc3 output when wrong (non integer
            and non string value) is used in SWITCH statement

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/include/hbrddnsx.h
    trunk/harbour/include/hbrddntx.h
    trunk/harbour/source/compiler/gencc.c
    trunk/harbour/source/rdd/dbfnsx/dbfnsx1.c
    trunk/harbour/source/rdd/dbfntx/dbfntx1.c
    trunk/harbour/source/rtl/gtxwc/gtxwc.c
    trunk/harbour/source/rtl/valtoexp.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dbtopas at dbtopas.lt  Mon May 25 07:20:31 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon May 25 07:19:18 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11125] trunk/harbour
In-Reply-To: <E1M8Y6i-0007hv-Qf@74yxhf1.ch3.sourceforge.com>
References: <E1M8Y6i-0007hv-Qf@74yxhf1.ch3.sourceforge.com>
Message-ID: <4A1A7EFF.2080603@dbtopas.lt>

>   * harbour/source/compiler/gencc.c
>     ! fixed -gc3 code generated for switch statement - thanks to Marek and
>       Xavi for information and self contain example
>       TODO: add missing RT error in -gc3 output when wrong (non integer
>             and non string value) is used in SWITCH statement

Hi,


Conflicted C:\harbour\ChangeLog
Conflicted C:\harbour\source\compiler\gencc.c

Warning! One or more files are in a conflicted state.
:(

Exactly (with a precision of byte) the same fix, the only difference, 
I've used fNil name instead of fDefault :)


Regards,
Mindaugas
From harbour.01 at syenar.hu  Mon May 25 07:22:47 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May 25 07:22:52 2009
Subject: [Harbour] Formatter uploaded
In-Reply-To: <23705083.post@talk.nabble.com>
References: <4A1A4717.6020605@belacy.belgorod.su>
	<23705083.post@talk.nabble.com>
Message-ID: <18d502870905250422o2637326ap6f2f1a133d573909@mail.gmail.com>

Sorry, it was my omission, see it in latest commit.

Brgds,
Viktor

On Mon, May 25, 2009 at 12:54 PM, Grigory Filatov <gfilatov@front.ru> wrote:
>
> Hi Alexander,
>
> Please be so kind to upload a missing file hbformac.c with C-function
> RF_FILEREAD().
>
> Thanks in advance!
>
> --
> Kind Regards,
> Grigory Filatov
> --
> View this message in context: http://www.nabble.com/Formatter-uploaded-tp23702351p23705083.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From vszakats at users.sourceforge.net  Mon May 25 07:23:27 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May 25 07:23:32 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11126] trunk/harbour
Message-ID: <E1M8YH9-0003Qg-Hz@bj8yhf1.ch3.sourceforge.com>

Revision: 11126
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11126&view=rev
Author:   vszakats
Date:     2009-05-25 11:23:26 +0000 (Mon, 25 May 2009)

Log Message:
-----------

2009-05-25 13:22 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  + utils/hbformat/hbformac.c
    + Added missing file from prev commit. Sorry.

Modified Paths:
--------------
    trunk/harbour/ChangeLog

Added Paths:
-----------
    trunk/harbour/utils/hbformat/hbformac.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Mon May 25 07:27:22 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May 25 07:27:28 2009
Subject: [Harbour] Re: SF.net SVN: harbour-project:[11121] trunk/harbour
In-Reply-To: <4A1A7B8C.6010207@belacy.belgorod.su>
References: <E1M8VP4-000285-OC@3kljzd1.ch3.sourceforge.com>
	<4A1A7B8C.6010207@belacy.belgorod.su>
Message-ID: <18d502870905250427n139215edx4f65c8b1726bb199@mail.gmail.com>

Hi Alexander,

>> ? ?% Deleted forced MT mode from Makefile (not needed for hbformat)
>> ? ?! Separated C code from .prg.
>
> Viktor, it seems, you forgot to add the hbformac.c.
> BTW, what's bad in using #pragma BEGINDUMP ... #pragma ENDDUMP ?

There are a few, I've written a few e-mails on that in the past,
without repeating it, it's overall IMO not a very good idea to mix
languages in one source file for several reasons, one of them is
actually non-friendly behaviour with code formatters and editors.

In summary we don't use it in Harbour SVN.

Many thanks for your commit!

Brgds,
Viktor
From snaiperis at users.sourceforge.net  Mon May 25 07:43:46 2009
From: snaiperis at users.sourceforge.net (snaiperis@users.sourceforge.net)
Date: Mon May 25 07:43:52 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11127] trunk/harbour
Message-ID: <E1M8Yao-0003mv-35@bj8yhf1.ch3.sourceforge.com>

Revision: 11127
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11127&view=rev
Author:   snaiperis
Date:     2009-05-25 11:43:45 +0000 (Mon, 25 May 2009)

Log Message:
-----------
2009-05-25 14:44 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
  * harbour/contrib/hbwin/axcore.c
    ! fixed a few C++ compile warinings

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/axcore.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dbtopas at dbtopas.lt  Mon May 25 07:48:07 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon May 25 07:46:55 2009
Subject: [Harbour] hbwin / axcore.c and C++
In-Reply-To: <18d502870905250342j6a42aacevc7855f4f2031cc61@mail.gmail.com>
References: <18d502870905250342j6a42aacevc7855f4f2031cc61@mail.gmail.com>
Message-ID: <4A1A8577.3090003@dbtopas.lt>

> All compilers are broken in C++ mode for hbwin / axcore.c, this means
> msvc and owatcom in default builds.
> 
> Any chance fixing these?

Hi,


fixed a few errors. The main problem of interface virtual function table 
definition still exists. Trying to find a solution (and learn C++)...


Regards,
Mindaugas
From druzus at acn.waw.pl  Mon May 25 07:56:15 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon May 25 07:47:12 2009
Subject: [Harbour] Re:  SF.net SVN: harbour-project:[11121] trunk/harbour
In-Reply-To: <4A1A7B8C.6010207@belacy.belgorod.su>
References: <E1M8VP4-000285-OC@3kljzd1.ch3.sourceforge.com>
	<4A1A7B8C.6010207@belacy.belgorod.su>
Message-ID: <20090525115615.GA12901@uran.home.aster.pl>

On Mon, 25 May 2009, Alexander S.Kresin wrote:

Hi,

> Viktor, it seems, you forgot to add the hbformac.c.
> BTW, what's bad in using #pragma BEGINDUMP ... #pragma ENDDUMP ?

There is no reason to hardcode that Harbour output has to be C only
code. We can add direct object file generation in the future and it
will not work with any code which uses #pragma BEGINDUMP/ENDDUMP
just like now it does not work with .hrb files and it will not work
with extended .hrb formats (.hrl/.hre) we plan to add. We can also
add .ASM output or generating code for other VMs.
To avoid possible problems and later code updating we decided to not
use #pragma BEGINDUMP/ENDDUMP and HB_INLINE( <params,...> ) { <Ccode;...> }
in core Harbour code.  Just simply such code can effectively block adding
some extensions to Harbour compiler because it reduce the compiler frontend
to C output.
There are also some other reasons and problems which can be exploited by
mixed C and Clipper code.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon May 25 07:59:21 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May 25 07:59:27 2009
Subject: [Harbour] hbwin / axcore.c and C++
In-Reply-To: <4A1A8577.3090003@dbtopas.lt>
References: <18d502870905250342j6a42aacevc7855f4f2031cc61@mail.gmail.com>
	<4A1A8577.3090003@dbtopas.lt>
Message-ID: <18d502870905250459t519b2238g99568689f3a1614e@mail.gmail.com>

Thanks Mindaugas.

Here is the updated output from msvc, FYI:
---
../../axcore.c(155) : error C2143: syntax error : missing ';' before '*'
../../axcore.c(155) : error C4430: missing type specifier - int
assumed. Note: C++ does not support default-int
../../axcore.c(155) : error C4430: missing type specifier - int
assumed. Note: C++ does not support default-int
../../axcore.c(184) : error C2039: 'lpVtbl' : is not a member of 'ISink'
        ../../axcore.c(154) : see declaration of 'ISink'
../../axcore.c(184) : error C2227: left of '->Release' must point to
class/struct/union/generic type
../../axcore.c(193) : error C2039: 'lpVtbl' : is not a member of 'ISink'
        ../../axcore.c(154) : see declaration of 'ISink'
../../axcore.c(193) : error C2227: left of '->AddRef' must point to
class/struct/union/generic type
../../axcore.c(202) : error C2365: 'AddRef' : redefinition; previous
definition was 'formerly unknown identifier'
../../axcore.c(208) : error C2365: 'Release' : redefinition; previous
definition was 'formerly unknown identifier'
../../axcore.c(281) : warning C4244: 'argument' : conversion from
'int' to 'USHORT', possible loss of data
../../axcore.c(291) : error C4430: missing type specifier - int
assumed. Note: C++ does not support default-int
../../axcore.c(291) : error C2146: syntax error : missing ';' before
identifier 'ISink_Vtbl'
../../axcore.c(291) : error C4430: missing type specifier - int
assumed. Note: C++ does not support default-int
../../axcore.c(292) : error C2440: 'initializing' : cannot convert
from 'HRESULT (__stdcall *)(IDispatch *,const IID &,void **)' to 'int'
        There is no context in which this conversion is possible
../../axcore.c(293) : error C2078: too many initializers
../../axcore.c(331) : error C2039: 'lpVtbl' : is not a member of 'ISink'
        ../../axcore.c(154) : see declaration of 'ISink'
../../axcore.c(331) : error C2059: syntax error : ')'
---

Brgds,
Viktor


On Mon, May 25, 2009 at 1:48 PM, Mindaugas Kavaliauskas
<dbtopas@dbtopas.lt> wrote:
>> All compilers are broken in C++ mode for hbwin / axcore.c, this means
>> msvc and owatcom in default builds.
>>
>> Any chance fixing these?
>
> Hi,
>
>
> fixed a few errors. The main problem of interface virtual function table
> definition still exists. Trying to find a solution (and learn C++)...
>
>
> Regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From sudipb001 at gmail.com  Mon May 25 08:01:58 2009
From: sudipb001 at gmail.com (Sudip Bhattacharyya)
Date: Mon May 25 08:02:04 2009
Subject: [Harbour] Printing Problem
In-Reply-To: <846E0371-2F0D-4731-8F02-B53B5D34BA26@syenar.hu>
References: <23696757.post@talk.nabble.com>
	<609353e70905241241p169dbe45wc2c7dbed659476bd@mail.gmail.com>
	<23700597.post@talk.nabble.com>
	<846E0371-2F0D-4731-8F02-B53B5D34BA26@syenar.hu>
Message-ID: <23705896.post@talk.nabble.com>


Hi Victor,

I downloaded (harbour source), and build. But it's not there. Finally I
copied from Harbour_dev :-)

Regards.

Sudip
-- 
View this message in context: http://www.nabble.com/Printing-Problem-tp23696757p23705896.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From sudipb001 at gmail.com  Mon May 25 08:11:57 2009
From: sudipb001 at gmail.com (Sudip Bhattacharyya)
Date: Mon May 25 08:12:03 2009
Subject: [Harbour] Printing Problem
In-Reply-To: <609353e70905241241p169dbe45wc2c7dbed659476bd@mail.gmail.com>
References: <23696757.post@talk.nabble.com>
	<609353e70905241241p169dbe45wc2c7dbed659476bd@mail.gmail.com>
Message-ID: <23706034.post@talk.nabble.com>


Hi,

I downloaded harbour source and compiled. But didn't find hbwin library. But
I found this library within C:\harbour_dev\harbour\bcc\lib, but here I can't
find hbw32.lib. But I find hbw32lib in harbour. I copied a sample (and the
library) from there and test win32prn with Harbour-dev. It runs ok. But I
want to know about WinPrn.

Regards.

Sudip

-- 
View this message in context: http://www.nabble.com/Printing-Problem-tp23696757p23706034.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From qiinfo at ig.com.br  Mon May 25 08:15:12 2009
From: qiinfo at ig.com.br (Rossine)
Date: Mon May 25 08:15:18 2009
Subject: [Harbour] error with 11127
Message-ID: <23706075.post@talk.nabble.com>


Hello,

The parameter "GT=" was changed? What should I do to change 
correct this error?

[ERROR]
hbmk: Autodetected architecture: win
hbmk: Using Harbour: C:\hrb_bcc\bin C:\hrb_bcc\include C:\hrb_bcc\lib
      C:\hrb_bcc\lib
hbmk: Using C compiler: c:\bcc55\bin\bcc32.exe
hbmk: Processing configuration: C:\hrb_bcc\bin\hbmk.cfg
hbmk: Harbour compiler command (internal):
C:\hrb_bcc\bin\harbour.exe -n2 qistart gt=gtgui -n -iC:\hrb_bcc\include
Cannot open input file: gt=gtgui.prg
[ENDERROR]

Best regards,

Rossine.

-- 
View this message in context: http://www.nabble.com/error-with-11127-tp23706075p23706075.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Mon May 25 08:15:40 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon May 25 08:15:52 2009
Subject: [Harbour] Printing Problem
In-Reply-To: <23706034.post@talk.nabble.com>
References: <23696757.post@talk.nabble.com>
	<609353e70905241241p169dbe45wc2c7dbed659476bd@mail.gmail.com>
	<23706034.post@talk.nabble.com>
Message-ID: <2282E572-63F8-4370-8ADB-CB2EFF8283E1@syenar.hu>

> I downloaded harbour source and compiled. But didn't find hbwin  
> library. But
> I found this library within C:\harbour_dev\harbour\bcc\lib, but here  
> I can't
> find hbw32.lib. But I find hbw32lib in harbour. I copied a sample  
> (and the
> library) from there and test win32prn with Harbour-dev. It runs ok.  
> But I
> want to know about WinPrn.

I'm not sure what you're doing. All my instructions
belonged to the latest SVN version, but you seem to
use some older version, maybe last release. For last
release build and hbwin instructions are a little bit
different.

Overall I'd suggest to use latest SVN.

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon May 25 08:23:47 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon May 25 08:23:57 2009
Subject: [Harbour] error with 11127
In-Reply-To: <23706075.post@talk.nabble.com>
References: <23706075.post@talk.nabble.com>
Message-ID: <E65BA64D-8D68-40C2-9341-CE0C88C3E1A6@syenar.hu>

Hi Rossine,

There is no command line parameter called "gt=".
You should use 'hbmk2 ... -gtgui'

[ gt= is accepted though in .hbl files. ]

Brgds,
Viktor

On 2009.05.25., at 14:15, Rossine wrote:

>
> Hello,
>
> The parameter "GT=" was changed? What should I do to change
> correct this error?
>
> [ERROR]
> hbmk: Autodetected architecture: win
> hbmk: Using Harbour: C:\hrb_bcc\bin C:\hrb_bcc\include C:\hrb_bcc\lib
>      C:\hrb_bcc\lib
> hbmk: Using C compiler: c:\bcc55\bin\bcc32.exe
> hbmk: Processing configuration: C:\hrb_bcc\bin\hbmk.cfg
> hbmk: Harbour compiler command (internal):
> C:\hrb_bcc\bin\harbour.exe -n2 qistart gt=gtgui -n -iC:\hrb_bcc 
> \include
> Cannot open input file: gt=gtgui.prg
> [ENDERROR]
>
> Best regards,
>
> Rossine.
>
> -- 
> View this message in context: http://www.nabble.com/error-with-11127-tp23706075p23706075.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Mon May 25 08:56:36 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon May 25 08:47:32 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11125] trunk/harbour
In-Reply-To: <4A1A7EFF.2080603@dbtopas.lt>
References: <E1M8Y6i-0007hv-Qf@74yxhf1.ch3.sourceforge.com>
	<4A1A7EFF.2080603@dbtopas.lt>
Message-ID: <20090525125635.GA27684@uran.home.aster.pl>

On Mon, 25 May 2009, Mindaugas Kavaliauskas wrote:
> Conflicted C:\harbour\ChangeLog
> Conflicted C:\harbour\source\compiler\gencc.c
> Warning! One or more files are in a conflicted state.
> :(
> Exactly (with a precision of byte) the same fix, the only difference, I've 
> used fNil name instead of fDefault :)

:-)

The RT error in code like 
      local x := {}
      switch( x )
         case 1
            ? "X"
      endswitch
is still missing in -gc3 output. Who of use should add it :-)

best regards,
Przemek
From qiinfo at ig.com.br  Mon May 25 09:46:19 2009
From: qiinfo at ig.com.br (Rossine)
Date: Mon May 25 09:46:24 2009
Subject: [Harbour] error with 11127
In-Reply-To: <E65BA64D-8D68-40C2-9341-CE0C88C3E1A6@syenar.hu>
References: <23706075.post@talk.nabble.com>
	<E65BA64D-8D68-40C2-9341-CE0C88C3E1A6@syenar.hu>
Message-ID: <23707292.post@talk.nabble.com>


Hi Viktor,


Viktor Szak?ts wrote:
> 
> There is no command line parameter called "gt=".
> You should use 'hbmk2 ... -gtgui'
> 
> [ gt= is accepted though in .hbl files. ]
> 

OK, it?s work?s fine :)

Thank you very much,

Rossine.

-- 
View this message in context: http://www.nabble.com/error-with-11127-tp23706075p23707292.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vszakats at users.sourceforge.net  Mon May 25 10:06:46 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May 25 10:06:51 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11128] trunk/harbour
Message-ID: <E1M8apC-0002Zr-Pv@74yxhf1.ch3.sourceforge.com>

Revision: 11128
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11128&view=rev
Author:   vszakats
Date:     2009-05-25 14:06:45 +0000 (Mon, 25 May 2009)

Log Message:
-----------
2009-05-25 16:06 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + Added -target=, -target and -alltarget (was -notarget) 
      to help screen.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vailtom at gmail.com  Mon May 25 10:11:40 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Mon May 25 10:11:47 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11128] trunk/harbour
In-Reply-To: <E1M8apC-0002Zr-Pv@74yxhf1.ch3.sourceforge.com>
References: <E1M8apC-0002Zr-Pv@74yxhf1.ch3.sourceforge.com>
Message-ID: <531d7a750905250711t246e86b4n661a74e718aa673@mail.gmail.com>

Hi Viktor,

These days I felt lack of power draw to the g++ instead of gcc using
hbmk2... reading the sources I found the option '-cpp' ... could
include it on the screen help?

Vailton Renato
From vailtom at gmail.com  Mon May 25 10:12:59 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Mon May 25 10:13:03 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11128] trunk/harbour
In-Reply-To: <531d7a750905250711t246e86b4n661a74e718aa673@mail.gmail.com>
References: <E1M8apC-0002Zr-Pv@74yxhf1.ch3.sourceforge.com>
	<531d7a750905250711t246e86b4n661a74e718aa673@mail.gmail.com>
Message-ID: <531d7a750905250712kdaf4459kd0669b7a05a878d9@mail.gmail.com>

Sorry, but this last translation was horrible, I hope you have
understood the message.
= D
From vszakats at users.sourceforge.net  Mon May 25 10:27:50 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May 25 10:27:55 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11129] trunk/harbour
Message-ID: <E1M8b9a-0005Z5-TQ@c3vjzd1.ch3.sourceforge.com>

Revision: 11129
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11129&view=rev
Author:   vszakats
Date:     2009-05-25 14:27:50 +0000 (Mon, 25 May 2009)

Log Message:
-----------
2009-05-25 16:24 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + Added -cpp/-nocpp options to help screen.
    * Removed C++ mode from TODO. I honestly forgot what was 
      missing from this feature (besides lack of support for 
      pocc compiler, since I couldn't find such option there),
      please report it if you find something.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Mon May 25 10:59:42 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Mon May 25 10:59:47 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11130] trunk/harbour
Message-ID: <E1M8beQ-0000L5-1K@3kljzd1.ch3.sourceforge.com>

Revision: 11130
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11130&view=rev
Author:   druzus
Date:     2009-05-25 14:59:41 +0000 (Mon, 25 May 2009)

Log Message:
-----------
2009-05-25 17:08 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbxvm.h
  * harbour/source/vm/hvm.c
  * harbour/source/compiler/gencc.c
    ! added missing RT error for wrong values used in SWITCH statement
      in code generated for -gc3 output

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/include/hbxvm.h
    trunk/harbour/source/compiler/gencc.c
    trunk/harbour/source/vm/hvm.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From ranier at cultura.com.br  Mon May 25 11:30:31 2009
From: ranier at cultura.com.br (Ranier Vilela)
Date: Mon May 25 11:32:44 2009
Subject: [Harbour] exit with switch and for each
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C95023570D4@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C95023570D4@PINK.zycie.pzu>
Message-ID: <4A1AB997.7070408@cultura.com.br>

Horodyski Marek (PZUZ) escreveu:
> Yes, therefore I write "without additive rules".
>
> Regards,
> Marek Horodyski 
>
>   
>> -----Original Message-----
>> From: Vailton Renato [mailto:vailtom@gmail.com] 
>> Sent: Saturday, May 23, 2009 10:06 PM
>> To: Harbour Project Main Developer List.
>> Subject: Re: [Harbour] exit with switch and for each
>>
>> Here I use something like this:
>>
>> lExit := .F.
>>
>> for each x in stringORarray
>> switch x
>> case 'a'
>> lExit := .T.
>> exit // but we need exit from "for each", not only from 
>> switch end  if lExit
>>   exit;
>> end
>> next
>>     
Hi, the are many ways for this,  but IMO, the worst is adding such 
extension to language!
Please, keep simple, and make all happy.

How much "features" like this, more slow and bugged will be the language.

Please, don?t force your language.

Best regards,

Ranier Vilela
From philb at philb.us  Mon May 25 11:46:19 2009
From: philb at philb.us (Phil Barnett)
Date: Mon May 25 11:45:56 2009
Subject: [Harbour] Re:  Source code formatter
In-Reply-To: <4A1A400D.6020009@belacy.belgorod.su>
References: <4A16C9A6.3040503@123mail.org>
	<4A1A400D.6020009@belacy.belgorod.su>
Message-ID: <4A1ABD4B.7020307@philb.us>

Alexander S.Kresin wrote:
> Paul,
>
>> Hi Alexander and All,
>>
>> I ported Click to Harbour for use on Linux.  The code is untested on 
>> Windows but may compile and run.   Added "Calls to" information in 
>> function headers and made stand alone executable.  Need to update 
>> code in few days but current source and bin is posted on Google Code 
>> under harbourclick.
>> harbourclick <http://code.google.com/p/harbourclick/>
>>
>
>   As I wrote before, I used Click for a long time, but there are some 
> problems ( maybe, bugs ), which forced me to look for other formatter.
>
>   Probably, because Click doesn't know about some Harbour's control 
> structures, it moves comments to other lines sometimes.
>
>   The real problems for me bacames when I tried to set 
> CASE_OF_FUNCTIONS=LIKEINFILE. I thought that Click simply makes case 
> conversion due to click.ini function patterns, but it tried to 
> autocomplete some of them - this, of course, caused bugs in my source 
> files, which I could find not immedeately (:.
>
>   These all should be cleaned before using it with Harbour. 
If you can submit the smallest possible code fragments which display the 
bad behavior, it would help the debugging process. Yeah, autocomplete is 
pretty much only used to bring very old dbase or S87 code that uses 4 
character function and command names. (whoever thought that was a good 
idea had no idea the problems it would eventually cause)

If Click! doesn't work like you expect it to, it's broken and we can 
work on fixing it. It's nice to see that someone has already started the 
work to bring Click! into the future. Thanks, Paul.
From snaiperis at users.sourceforge.net  Mon May 25 11:47:15 2009
From: snaiperis at users.sourceforge.net (snaiperis@users.sourceforge.net)
Date: Mon May 25 11:47:21 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11131] trunk/harbour
Message-ID: <E1M8cOR-0006s3-9u@c3vjzd1.ch3.sourceforge.com>

Revision: 11131
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11131&view=rev
Author:   snaiperis
Date:     2009-05-25 15:47:08 +0000 (Mon, 25 May 2009)

Log Message:
-----------
2009-05-25 18:45 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
  * harbour/contrib/hbwin/hbwinole.h
    * changed HB_OLE_C_API define to be compatible to other similar 
      defines, i.e. defined() vs. !defined() instead of 1 vs. 0

  * harbour/contrib/hbwin/axcore.c
    ! fixed missing IDispatchVtbl definition in C++ mode

  * harbour/contrib/hbwin/hbwinole.h
  * harbour/contrib/hbwin/axcore.c
  * harbour/contrib/hbwin/olecore.c
    * a few C/C++ compatibility macros introduced. Cleaned code: two 
      version of method call code is not required any more

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/axcore.c
    trunk/harbour/contrib/hbwin/hbwinole.h
    trunk/harbour/contrib/hbwin/olecore.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Mon May 25 12:05:36 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May 25 12:05:41 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11132] trunk/harbour
Message-ID: <E1M8cgC-00078V-Oe@c3vjzd1.ch3.sourceforge.com>

Revision: 11132
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11132&view=rev
Author:   vszakats
Date:     2009-05-25 16:05:35 +0000 (Mon, 25 May 2009)

Log Message:
-----------
2009-05-25 18:04 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbwin/axcore.c
    ! Fixed one remaining minor msvc warning.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/axcore.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Mon May 25 12:06:49 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May 25 12:06:56 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11131] trunk/harbour
In-Reply-To: <E1M8cOR-0006s3-9u@c3vjzd1.ch3.sourceforge.com>
References: <E1M8cOR-0006s3-9u@c3vjzd1.ch3.sourceforge.com>
Message-ID: <18d502870905250906o4dedbba6o745fb02dbf26aa86@mail.gmail.com>

Hi Mindaugas,

Now it compiles cleanly with both msvc and owatcom.
Thanks a lot.

Brgds,
Viktor

On Mon, May 25, 2009 at 5:47 PM,  <snaiperis@users.sourceforge.net> wrote:
> Revision: 11131
> ? ? ? ? ?http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11131&view=rev
> Author: ? snaiperis
> Date: ? ? 2009-05-25 15:47:08 +0000 (Mon, 25 May 2009)
>
> Log Message:
> -----------
> 2009-05-25 18:45 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
> ?* harbour/contrib/hbwin/hbwinole.h
> ? ?* changed HB_OLE_C_API define to be compatible to other similar
> ? ? ?defines, i.e. defined() vs. !defined() instead of 1 vs. 0
>
> ?* harbour/contrib/hbwin/axcore.c
> ? ?! fixed missing IDispatchVtbl definition in C++ mode
>
> ?* harbour/contrib/hbwin/hbwinole.h
> ?* harbour/contrib/hbwin/axcore.c
> ?* harbour/contrib/hbwin/olecore.c
> ? ?* a few C/C++ compatibility macros introduced. Cleaned code: two
> ? ? ?version of method call code is not required any more
>
> Modified Paths:
> --------------
> ? ?trunk/harbour/ChangeLog
> ? ?trunk/harbour/contrib/hbwin/axcore.c
> ? ?trunk/harbour/contrib/hbwin/hbwinole.h
> ? ?trunk/harbour/contrib/hbwin/olecore.c
>
>
> This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From e.m.giordano at emagsoftware.it  Mon May 25 12:22:01 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon May 25 12:22:07 2009
Subject: [Harbour] Error
Message-ID: <2AE0FE4F966F4AAC86EA507C86BF4B8A@emag>

Error E2451 ../../../hvm.c 8680: Undefined symbol '_hb_stack_ptr_' in 
function hb_xvmSwitchGet

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From qiinfo at ig.com.br  Mon May 25 12:32:54 2009
From: qiinfo at ig.com.br (Rossine)
Date: Mon May 25 12:32:58 2009
Subject: [Harbour] Errors with msvc
Message-ID: <23709702.post@talk.nabble.com>


Hello,

When I'm generating harbour with MSVC, I see the mistakes below and the
other libs are not generated.

[ERROR]

C:\harbour\contrib\gtwvg-#MSVC#>if not exist ..\..\lib\win\msvc\. md
..\..\lib\win\msvc 
make.exe[3]: Entering directory `C:/harbour/contrib/gtwvg/win/msvc'
cl.exe -nologo -I. -I../../../../include -Gs -TP -W4 -wd4127 -Ot2b1 -EHs-c-
-MT   -DHB_GC_AUTO -DHB_FM_STATISTIC -I../../contrib/hbwin
-I../../../../contrib/hbwin  -c ../../gtwvg.c -Fogtwvg.obj
gtwvg.c
cl.exe -nologo -I. -I../../../../include -Gs -TP -W4 -wd4127 -Ot2b1 -EHs-c-
-MT   -DHB_GC_AUTO -DHB_FM_STATISTIC -I../../contrib/hbwin
-I../../../../contrib/hbwin  -c ../../wvgcore.c -Fowvgcore.obj
wvgcore.c
cl.exe -nologo -I. -I../../../../include -Gs -TP -W4 -wd4127 -Ot2b1 -EHs-c-
-MT   -DHB_GC_AUTO -DHB_FM_STATISTIC -I../../contrib/hbwin
-I../../../../contrib/hbwin  -c ../../wvgutils.c -Fowvgutils.obj
wvgutils.c
cl.exe -nologo -I. -I../../../../include -Gs -TP -W4 -wd4127 -Ot2b1 -EHs-c-
-MT   -DHB_GC_AUTO -DHB_FM_STATISTIC -I../../contrib/hbwin
-I../../../../contrib/hbwin  -c ../../wvgwin.c -Fowvgwin.obj
wvgwin.c
cl.exe -nologo -I. -I../../../../include -Gs -TP -W4 -wd4127 -Ot2b1 -EHs-c-
-MT   -DHB_GC_AUTO -DHB_FM_STATISTIC -I../../contrib/hbwin
-I../../../../contrib/hbwin  -c ../../wvgsink.c -Fowvgsink.obj
wvgsink.c
../../wvgsink.c(313) : error C2664: 'IsEqualGUID' : cannot convert parameter
2 from 'const IID *' to 'const GUID &'
        Reason: cannot convert from 'const IID *' to 'const GUID'
        No constructor could take the source type, or constructor overload
resolution was ambiguous
../../wvgsink.c(324) : error C2664: 'IsEqualGUID' : cannot convert parameter
2 from 'const IID *' to 'const GUID &'
        Reason: cannot convert from 'const IID *' to 'const GUID'
        No constructor could take the source type, or constructor overload
resolution was ambiguous
../../wvgsink.c(334) : error C2664: 'IsEqualGUID' : cannot convert parameter
2 from 'IID *' to 'const GUID &'
        Reason: cannot convert from 'IID *' to 'const GUID'
        No constructor could take the source type, or constructor overload
resolution was ambiguous
../../wvgsink.c(455) : error C2664: 'IsEqualGUID' : cannot convert parameter
2 from 'const IID *' to 'const GUID &'
        Reason: cannot convert from 'const IID *' to 'const GUID'
        No constructor could take the source type, or constructor overload
resolution was ambiguous
../../wvgsink.c(516) : warning C4244: 'argument' : conversion from 'int' to
'USHORT', possible loss of data
../../wvgsink.c(597) : error C2664: 'HRESULT (IEventHandler *,const IID
&,void **)' : cannot convert parameter 2 from 'const IID *' to 'const IID &'
        Reason: cannot convert from 'const IID *' to 'const IID'
        No constructor could take the source type, or constructor overload
resolution was ambiguous
../../wvgsink.c(600) : error C2664: 'HRESULT (IEventHandler *,const IID
&,void **)' : cannot convert parameter 2 from 'const IID *' to 'const IID &'
        Reason: cannot convert from 'const IID *' to 'const IID'
        No constructor could take the source type, or constructor overload
resolution was ambiguous
../../wvgsink.c(872) : error C2664: 'HRESULT (IUnknown *,const IID &,void
**)' : cannot convert parameter 2 from 'const IID *' to 'const IID &'
        Reason: cannot convert from 'const IID *' to 'const IID'
        No constructor could take the source type, or constructor overload
resolution was ambiguous
../../wvgsink.c(981) : error C2664: 'HRESULT (IUnknown *,const IID &,void
**)' : cannot convert parameter 2 from 'const IID *' to 'const IID &'
        Reason: cannot convert from 'const IID *' to 'const IID'
        No constructor could take the source type, or constructor overload
resolution was ambiguous
../../wvgsink.c(1024) : error C2664: 'HRESULT (IUnknown *,const IID &,void
**)' : cannot convert parameter 2 from 'const IID *' to 'const IID &'
        Reason: cannot convert from 'const IID *' to 'const IID'
        No constructor could take the source type, or constructor overload
resolution was ambiguous
make.exe[3]: Leaving directory `C:/harbour/contrib/gtwvg/win/msvc'
make.exe[2]: Leaving directory `C:/harbour/contrib/gtwvg'
make.exe[1]: Leaving directory `C:/harbour/contrib'

[ENDERROR]

How to fix this ?

Best regards,

Rossine.

-- 
View this message in context: http://www.nabble.com/Errors-with-msvc-tp23709702p23709702.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Mon May 25 12:45:17 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May 25 12:45:25 2009
Subject: [Harbour] Errors with msvc
In-Reply-To: <23709702.post@talk.nabble.com>
References: <23709702.post@talk.nabble.com>
Message-ID: <18d502870905250945y54b9ab62o9392577f9d3521b8@mail.gmail.com>

I can confirm. owatcom is broken as well, pbly also all other C++ mode.

Brgds,
Viktor

On Mon, May 25, 2009 at 6:32 PM, Rossine <qiinfo@ig.com.br> wrote:
>
> Hello,
>
> When I'm generating harbour with MSVC, I see the mistakes below and the
> other libs are not generated.
>
> [ERROR]
>
> C:\harbour\contrib\gtwvg-#MSVC#>if not exist ..\..\lib\win\msvc\. md
> ..\..\lib\win\msvc
> make.exe[3]: Entering directory `C:/harbour/contrib/gtwvg/win/msvc'
> cl.exe -nologo -I. -I../../../../include -Gs -TP -W4 -wd4127 -Ot2b1 -EHs-c-
> -MT ? -DHB_GC_AUTO -DHB_FM_STATISTIC -I../../contrib/hbwin
> -I../../../../contrib/hbwin ?-c ../../gtwvg.c -Fogtwvg.obj
> gtwvg.c
> cl.exe -nologo -I. -I../../../../include -Gs -TP -W4 -wd4127 -Ot2b1 -EHs-c-
> -MT ? -DHB_GC_AUTO -DHB_FM_STATISTIC -I../../contrib/hbwin
> -I../../../../contrib/hbwin ?-c ../../wvgcore.c -Fowvgcore.obj
> wvgcore.c
> cl.exe -nologo -I. -I../../../../include -Gs -TP -W4 -wd4127 -Ot2b1 -EHs-c-
> -MT ? -DHB_GC_AUTO -DHB_FM_STATISTIC -I../../contrib/hbwin
> -I../../../../contrib/hbwin ?-c ../../wvgutils.c -Fowvgutils.obj
> wvgutils.c
> cl.exe -nologo -I. -I../../../../include -Gs -TP -W4 -wd4127 -Ot2b1 -EHs-c-
> -MT ? -DHB_GC_AUTO -DHB_FM_STATISTIC -I../../contrib/hbwin
> -I../../../../contrib/hbwin ?-c ../../wvgwin.c -Fowvgwin.obj
> wvgwin.c
> cl.exe -nologo -I. -I../../../../include -Gs -TP -W4 -wd4127 -Ot2b1 -EHs-c-
> -MT ? -DHB_GC_AUTO -DHB_FM_STATISTIC -I../../contrib/hbwin
> -I../../../../contrib/hbwin ?-c ../../wvgsink.c -Fowvgsink.obj
> wvgsink.c
> ../../wvgsink.c(313) : error C2664: 'IsEqualGUID' : cannot convert parameter
> 2 from 'const IID *' to 'const GUID &'
> ? ? ? ?Reason: cannot convert from 'const IID *' to 'const GUID'
> ? ? ? ?No constructor could take the source type, or constructor overload
> resolution was ambiguous
> ../../wvgsink.c(324) : error C2664: 'IsEqualGUID' : cannot convert parameter
> 2 from 'const IID *' to 'const GUID &'
> ? ? ? ?Reason: cannot convert from 'const IID *' to 'const GUID'
> ? ? ? ?No constructor could take the source type, or constructor overload
> resolution was ambiguous
> ../../wvgsink.c(334) : error C2664: 'IsEqualGUID' : cannot convert parameter
> 2 from 'IID *' to 'const GUID &'
> ? ? ? ?Reason: cannot convert from 'IID *' to 'const GUID'
> ? ? ? ?No constructor could take the source type, or constructor overload
> resolution was ambiguous
> ../../wvgsink.c(455) : error C2664: 'IsEqualGUID' : cannot convert parameter
> 2 from 'const IID *' to 'const GUID &'
> ? ? ? ?Reason: cannot convert from 'const IID *' to 'const GUID'
> ? ? ? ?No constructor could take the source type, or constructor overload
> resolution was ambiguous
> ../../wvgsink.c(516) : warning C4244: 'argument' : conversion from 'int' to
> 'USHORT', possible loss of data
> ../../wvgsink.c(597) : error C2664: 'HRESULT (IEventHandler *,const IID
> &,void **)' : cannot convert parameter 2 from 'const IID *' to 'const IID &'
> ? ? ? ?Reason: cannot convert from 'const IID *' to 'const IID'
> ? ? ? ?No constructor could take the source type, or constructor overload
> resolution was ambiguous
> ../../wvgsink.c(600) : error C2664: 'HRESULT (IEventHandler *,const IID
> &,void **)' : cannot convert parameter 2 from 'const IID *' to 'const IID &'
> ? ? ? ?Reason: cannot convert from 'const IID *' to 'const IID'
> ? ? ? ?No constructor could take the source type, or constructor overload
> resolution was ambiguous
> ../../wvgsink.c(872) : error C2664: 'HRESULT (IUnknown *,const IID &,void
> **)' : cannot convert parameter 2 from 'const IID *' to 'const IID &'
> ? ? ? ?Reason: cannot convert from 'const IID *' to 'const IID'
> ? ? ? ?No constructor could take the source type, or constructor overload
> resolution was ambiguous
> ../../wvgsink.c(981) : error C2664: 'HRESULT (IUnknown *,const IID &,void
> **)' : cannot convert parameter 2 from 'const IID *' to 'const IID &'
> ? ? ? ?Reason: cannot convert from 'const IID *' to 'const IID'
> ? ? ? ?No constructor could take the source type, or constructor overload
> resolution was ambiguous
> ../../wvgsink.c(1024) : error C2664: 'HRESULT (IUnknown *,const IID &,void
> **)' : cannot convert parameter 2 from 'const IID *' to 'const IID &'
> ? ? ? ?Reason: cannot convert from 'const IID *' to 'const IID'
> ? ? ? ?No constructor could take the source type, or constructor overload
> resolution was ambiguous
> make.exe[3]: Leaving directory `C:/harbour/contrib/gtwvg/win/msvc'
> make.exe[2]: Leaving directory `C:/harbour/contrib/gtwvg'
> make.exe[1]: Leaving directory `C:/harbour/contrib'
>
> [ENDERROR]
>
> How to fix this ?
>
> Best regards,
>
> Rossine.
>
> --
> View this message in context: http://www.nabble.com/Errors-with-msvc-tp23709702p23709702.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From alex at belacy.belgorod.su  Mon May 25 12:49:32 2009
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Mon May 25 12:49:38 2009
Subject: [Harbour] Re: Source code formatter
Message-ID: <52fd24d5a6e100c90aa8d0e1ce8846fc@83.234.176.3>

> If you can submit the smallest possible code fragments which display the 
> bad behavior, it would help the debugging process.

Ok. Below are two samples.
1) The code:

// --------------
CLASS HDBRecSet

   DATA aRecs                // line1
                             // line2
                             // line3
   DATA cargo

ENDCLASS
// --------------

is converted by Click to:

// --------------
   // line2
   // line3
CLASS HDBRecSet

   DATA aRecs       // line1
   DATA cargo

ENDCLASS
   // --------------

2) ( CASE_OF_FUNCTIONS=LIKEINFILE) The code:

// ---------------
func XXX( handle )
Local cBuff

   Fread( handle, cBuff, 10 )
   dbCreate( "a1", arr )
   dbCommit()
return
// ---------------

is converted by Click to:

// ---------------
FUNC XXX( handle )

LOCAL cBuff

   Freadstr( handle, cBuff, 10 )
   Dbcreateind( "a1", arr )
   Dbcommitall()
RETURN
// ---------------

> If Click! doesn't work like you expect it to, it's broken and we can 
> work on fixing it.

Sure.

Regards, Alexander.

________________________________________________


From info at fsgiudice.com  Mon May 25 13:11:12 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon May 25 13:11:32 2009
Subject: [Harbour] Error
In-Reply-To: <2AE0FE4F966F4AAC86EA507C86BF4B8A@emag>
References: <2AE0FE4F966F4AAC86EA507C86BF4B8A@emag>
Message-ID: <4A1AD130.3060007@fsgiudice.com>

Hi Enrico,
it should be fixed adding at line #8676 macro HB_STACK_TLS_PRELOAD so:

BOOL hb_xvmSwitchGet( PHB_ITEM * pSwitchPtr )
{
    HB_STACK_TLS_PRELOAD

    HB_TRACE(HB_TR_DEBUG, ("hb_xvmSwitchGet(%p)", pSwitchPtr));

    * pSwitchPtr = hb_vmSwitchGet();

    HB_XVM_RETURN
}

To me in this way it is compiling with mingw without error, but it could 
be useful to have Przemek confirmation before upload it to SVN.

Best regards,
Francesco

Il 25/05/2009 18.22, Enrico Maria Giordano ha scritto:
> Error E2451 ../../../hvm.c 8680: Undefined symbol '_hb_stack_ptr_' in 
> function hb_xvmSwitchGet
> 
> EMG
> 
> -- 
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at users.sourceforge.net  Mon May 25 15:19:46 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Mon May 25 15:19:51 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11133] trunk/harbour
Message-ID: <E1M8fi6-0003yC-Dl@bj8yhf1.ch3.sourceforge.com>

Revision: 11133
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11133&view=rev
Author:   druzus
Date:     2009-05-25 19:19:45 +0000 (Mon, 25 May 2009)

Log Message:
-----------
2009-05-25 21:28 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/hvm.c
    ! add missing HB_STACK_TLS_PRELOAD

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/vm/hvm.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dbtopas at dbtopas.lt  Mon May 25 15:29:25 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon May 25 15:28:11 2009
Subject: [Harbour] Errors with msvc
In-Reply-To: <18d502870905250945y54b9ab62o9392577f9d3521b8@mail.gmail.com>
References: <23709702.post@talk.nabble.com>
	<18d502870905250945y54b9ab62o9392577f9d3521b8@mail.gmail.com>
Message-ID: <4A1AF195.40401@dbtopas.lt>

Viktor Szak?ts wrote:
> I can confirm. owatcom is broken as well, pbly also all other C++ mode.
> 
>> C:\harbour\contrib\gtwvg-#MSVC#>if not exist ..\..\lib\win\msvc\. md
>> ..\..\lib\win\msvc
>> make.exe[3]: Entering directory `C:/harbour/contrib/gtwvg/win/msvc'
>> cl.exe -nologo -I. -I../../../../include -Gs -TP -W4 -wd4127 -Ot2b1 -EHs-c-
>> -MT   -DHB_GC_AUTO -DHB_FM_STATISTIC -I../../contrib/hbwin
>> -I../../../../contrib/hbwin  -c ../../gtwvg.c -Fogtwvg.obj
>> gtwvg.c


Just a guess... You have two different versions of hbwinole.h, one in 
\include, another in contrib\hbwin (both are -I directories, but 
\include is first).

make_gnu.bat clean install does not help, because gtwvg.c compiled 
before hbwin is installed. Just delete \include\hbwinole.h

This seams to be a problem for all modified contrib include files.


Regards,
Mindaugas
From druzus at acn.waw.pl  Mon May 25 15:39:43 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon May 25 15:30:39 2009
Subject: [Harbour] exit with switch and for each
In-Reply-To: <531d7a750905231305r10f44100t1a14a1504891f559@mail.gmail.com>
References: <20090523191856.A05E77E8074@f17.poczta.interia.pl>
	<531d7a750905231305r10f44100t1a14a1504891f559@mail.gmail.com>
Message-ID: <20090525193943.GA2356@uran.home.aster.pl>

On Sat, 23 May 2009, Vailton Renato wrote:

Hi,

> Here I use something like this:
> lExit := .F.
> for each x in stringORarray
> switch x
> case 'a'
>  lExit := .T.
>  exit // but we need exit from "for each", not only from switch
> end
>  if lExit
>    exit;
>  end
> next

The same is for many other constructions, f.e.:

   l := 10
   while f1( l )
      l *= 10
      for i := 1 to 100
         if f2(i)
            exit  // but I want to exit from WHILE not only from FOR
         endif
      next
   enddo

You can write the same also about nest statments like:

   for i := 1 to 10
      for j := 1 to 20
         if f( i, j )
            exit  // but I want to exit from external FOR i := ... loop too
         endif
      next
   next

In short words you are requesting about GOTO instruction which introduces
to compiler serious limitations or at least additional code necessary to
make it working correctly with statements which needs to allocate and then
free some resources. It's rather bad idea.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon May 25 15:39:26 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May 25 15:39:32 2009
Subject: [Harbour] Errors with msvc
In-Reply-To: <4A1AF195.40401@dbtopas.lt>
References: <23709702.post@talk.nabble.com>
	<18d502870905250945y54b9ab62o9392577f9d3521b8@mail.gmail.com>
	<4A1AF195.40401@dbtopas.lt>
Message-ID: <18d502870905251239v3c3b7e22u8f9ad9bee45efd71@mail.gmail.com>

Here there is no hbwinole.h in /include. To me it looks like the
"usual" C vs. C++ compilation problem with OLE related stuff.

Brgds,
Viktor

On Mon, May 25, 2009 at 9:29 PM, Mindaugas Kavaliauskas
<dbtopas@dbtopas.lt> wrote:
> Viktor Szak?ts wrote:
>>
>> I can confirm. owatcom is broken as well, pbly also all other C++ mode.
>>
>>> C:\harbour\contrib\gtwvg-#MSVC#>if not exist ..\..\lib\win\msvc\. md
>>> ..\..\lib\win\msvc
>>> make.exe[3]: Entering directory `C:/harbour/contrib/gtwvg/win/msvc'
>>> cl.exe -nologo -I. -I../../../../include -Gs -TP -W4 -wd4127 -Ot2b1
>>> -EHs-c-
>>> -MT ? -DHB_GC_AUTO -DHB_FM_STATISTIC -I../../contrib/hbwin
>>> -I../../../../contrib/hbwin ?-c ../../gtwvg.c -Fogtwvg.obj
>>> gtwvg.c
>
>
> Just a guess... You have two different versions of hbwinole.h, one in
> \include, another in contrib\hbwin (both are -I directories, but \include is
> first).
>
> make_gnu.bat clean install does not help, because gtwvg.c compiled before
> hbwin is installed. Just delete \include\hbwinole.h
>
> This seams to be a problem for all modified contrib include files.
>
>
> Regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From sudipb001 at gmail.com  Mon May 25 15:43:02 2009
From: sudipb001 at gmail.com (Sudip Bhattacharyya)
Date: Mon May 25 15:43:07 2009
Subject: [Harbour] Printing Problem
In-Reply-To: <2282E572-63F8-4370-8ADB-CB2EFF8283E1@syenar.hu>
References: <23696757.post@talk.nabble.com>
	<609353e70905241241p169dbe45wc2c7dbed659476bd@mail.gmail.com>
	<23706034.post@talk.nabble.com>
	<2282E572-63F8-4370-8ADB-CB2EFF8283E1@syenar.hu>
Message-ID: <23712072.post@talk.nabble.com>


Thanks Victor,

I downloaded the previous version of sourcecode. Now I  downloaded Nightly
Version source of Harbour.

Regards.

Sudip


Viktor Szak?ts wrote:
> 
>> I downloaded harbour source and compiled. But didn't find hbwin  
>> library. But
>> I found this library within C:\harbour_dev\harbour\bcc\lib, but here  
>> I can't
>> find hbw32.lib. But I find hbw32lib in harbour. I copied a sample  
>> (and the
>> library) from there and test win32prn with Harbour-dev. It runs ok.  
>> But I
>> want to know about WinPrn.
> 
> I'm not sure what you're doing. All my instructions
> belonged to the latest SVN version, but you seem to
> use some older version, maybe last release. For last
> release build and hbwin instructions are a little bit
> different.
> 
> Overall I'd suggest to use latest SVN.
> 
> Brgds,
> Viktor
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/Printing-Problem-tp23696757p23712072.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Mon May 25 15:56:19 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon May 25 15:47:14 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>
References: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>
Message-ID: <20090525195619.GA18212@uran.home.aster.pl>

On Fri, 22 May 2009, Szak?ts Viktor wrote:

Hi,


> FYI, otherwise the build process went smoothly, I'll make some speed
> tests later:
> ../../binnum.c:115: warning: dereferencing type-punned pointer will
> break strict-aliasing rules
[...]

All of above warnings are hacks introduced in x86 builds where
HB_STRICT_ALIGNMENT macros is not defined in places where some
binary data is read from memory in some strictly defined byte
order, f.e. from PCODE or binary files. x86 CPUs can read data
even if they do not pass valid alignment, f.e. if we have in two
bytes at ptr address little endian unsigned 16bit value then we
can make hack and use:

   usVal = * ( USHORT * ) ptr;

instead of:

   usVal = ( ptr[ 1 ] << 8 ) | ptr[ 0 ];

If processor needs strict alignment then such hacks cannot be used
because they cause CPU exception and application crash. If you compile
Harbour with HB_STRICT_ALIGNMENT macro then it should pacify all such
warnings but it will also reduce a little bit the performance on x86
machines because it disables such explicit casting when PCODE is decoded.

best regards,
Przemek
From druzus at acn.waw.pl  Mon May 25 15:59:35 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon May 25 15:50:31 2009
Subject: [Harbour] Error
In-Reply-To: <4A1AD130.3060007@fsgiudice.com>
References: <2AE0FE4F966F4AAC86EA507C86BF4B8A@emag>
	<4A1AD130.3060007@fsgiudice.com>
Message-ID: <20090525195935.GA28511@uran.home.aster.pl>

On Mon, 25 May 2009, Francesco Saverio Giudice wrote:

Hi,

> it should be fixed adding at line #8676 macro HB_STACK_TLS_PRELOAD so:
> BOOL hb_xvmSwitchGet( PHB_ITEM * pSwitchPtr )
> {
>    HB_STACK_TLS_PRELOAD
>    HB_TRACE(HB_TR_DEBUG, ("hb_xvmSwitchGet(%p)", pSwitchPtr));
>    * pSwitchPtr = hb_vmSwitchGet();
>    HB_XVM_RETURN
> }
> To me in this way it is compiling with mingw without error, but it could be 
> useful to have Przemek confirmation before upload it to SVN.

Yes it is. My fault, sorry. I already committed the fix.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon May 25 16:11:45 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May 25 16:11:51 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <20090525195619.GA18212@uran.home.aster.pl>
References: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>
	<20090525195619.GA18212@uran.home.aster.pl>
Message-ID: <18d502870905251311t2d82a1a4h739e42720397542@mail.gmail.com>

Thanks. What should we do in default builds? Can we safely
pacify the warnings while keeping performance? Should we just
safely suppress these warnings?

Brgds,
Viktor

On Mon, May 25, 2009 at 9:56 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:
> On Fri, 22 May 2009, Szak?ts Viktor wrote:
>
> Hi,
>
>
>> FYI, otherwise the build process went smoothly, I'll make some speed
>> tests later:
>> ../../binnum.c:115: warning: dereferencing type-punned pointer will
>> break strict-aliasing rules
> [...]
>
> All of above warnings are hacks introduced in x86 builds where
> HB_STRICT_ALIGNMENT macros is not defined in places where some
> binary data is read from memory in some strictly defined byte
> order, f.e. from PCODE or binary files. x86 CPUs can read data
> even if they do not pass valid alignment, f.e. if we have in two
> bytes at ptr address little endian unsigned 16bit value then we
> can make hack and use:
>
> ? usVal = * ( USHORT * ) ptr;
>
> instead of:
>
> ? usVal = ( ptr[ 1 ] << 8 ) | ptr[ 0 ];
>
> If processor needs strict alignment then such hacks cannot be used
> because they cause CPU exception and application crash. If you compile
> Harbour with HB_STRICT_ALIGNMENT macro then it should pacify all such
> warnings but it will also reduce a little bit the performance on x86
> machines because it disables such explicit casting when PCODE is decoded.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From harbour.01 at syenar.hu  Mon May 25 16:25:25 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May 25 16:25:31 2009
Subject: [Harbour] Harbour -j option with disabled filenames and/or
	linenumbers
Message-ID: <18d502870905251325k6311321co7f4f593278d75603@mail.gmail.com>

Hi All,

I'm not sure that filenames + linenumbers in .pot comments
are a standard requirement or they are optional, but if the latter
is the case, may I ask for an option to suppress them (or part
of them)?

For two reasons:
1) After most .prg modifications the filename/lineno pairs
  multiply and pile up in my final .po files. So they grow
  and grow unless rebuilding them regularly. What's more
  annoying is that it ignites changes for all .po files after
  essentially each commit.
2) Sometimes I may not want to publish filenames and
  line numbers for confidentiality reasons.
+1) In many cases filename/lineno isn't necessarily / terribly
  useful for translators.

I can also imagine an option to omit the line numer and
leave the filename, which fully solves 1).

Is this possible to implement?

Brgds,
Viktor
From snaiperis at users.sourceforge.net  Mon May 25 16:28:55 2009
From: snaiperis at users.sourceforge.net (snaiperis@users.sourceforge.net)
Date: Mon May 25 16:29:00 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11134] trunk/harbour
Message-ID: <E1M8gn1-0001Ke-RS@74yxhf1.ch3.sourceforge.com>

Revision: 11134
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11134&view=rev
Author:   snaiperis
Date:     2009-05-25 20:28:55 +0000 (Mon, 25 May 2009)

Log Message:
-----------

2009-05-25 23:29 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
  * harbour/contrib/gtwvg/wvgsink.c
    ! fixed, cleaned C++ compilation

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtwvg/wvgsink.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From e.m.giordano at emagsoftware.it  Mon May 25 16:33:15 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon May 25 16:33:21 2009
Subject: [Harbour] Error
References: <2AE0FE4F966F4AAC86EA507C86BF4B8A@emag>
	<4A1AD130.3060007@fsgiudice.com>
Message-ID: <A2EC7ECFCAAC4AF8B7D878B3EE1554CF@emag>


-----Messaggio Originale----- 
Da: "Francesco Saverio Giudice" <info@fsgiudice.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: luned? 25 maggio 2009 19.11
Oggetto: Re: [Harbour] Error


> To me in this way it is compiling with mingw without error, but it could 
> be useful to have Przemek confirmation before upload it to SVN.

Ok, thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From dbtopas at dbtopas.lt  Mon May 25 16:34:49 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon May 25 16:33:35 2009
Subject: [Harbour] Errors with msvc
In-Reply-To: <18d502870905251239v3c3b7e22u8f9ad9bee45efd71@mail.gmail.com>
References: <23709702.post@talk.nabble.com>	<18d502870905250945y54b9ab62o9392577f9d3521b8@mail.gmail.com>	<4A1AF195.40401@dbtopas.lt>
	<18d502870905251239v3c3b7e22u8f9ad9bee45efd71@mail.gmail.com>
Message-ID: <4A1B00E9.108@dbtopas.lt>

Viktor Szak?ts wrote:
> Here there is no hbwinole.h in /include. To me it looks like the
> "usual" C vs. C++ compilation problem with OLE related stuff.


Should be fixed. There was some strange C/C++ mixture in wvgsink.c. 
CINTERFACE was always defined, but HB_ID_REF() was defined in C++ way 
(not in plain C). Finally it was easier to change everything in 
olecore.c way, than find the real bug.


Regards,
Mindaugas

From e.m.giordano at emagsoftware.it  Mon May 25 16:34:34 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon May 25 16:34:40 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11133] trunk/harbour
References: <E1M8fi6-0003yC-Dl@bj8yhf1.ch3.sourceforge.com>
Message-ID: <6B16D71924F34CFCBF1522F450BE9095@emag>


-----Messaggio Originale----- 
Da: <druzus@users.sourceforge.net>
A: <harbour@harbour-project.org>
Data invio: luned? 25 maggio 2009 21.19
Oggetto: [Harbour] SF.net SVN: harbour-project:[11133] trunk/harbour


> 2009-05-25 21:28 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/vm/hvm.c
>    ! add missing HB_STACK_TLS_PRELOAD

Thank you, it's ok now.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From dbtopas at dbtopas.lt  Mon May 25 16:42:50 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon May 25 16:41:36 2009
Subject: [Harbour] Harbour -j option with disabled filenames
	and/or	linenumbers
In-Reply-To: <18d502870905251325k6311321co7f4f593278d75603@mail.gmail.com>
References: <18d502870905251325k6311321co7f4f593278d75603@mail.gmail.com>
Message-ID: <4A1B02CA.1060603@dbtopas.lt>

Hi,


I'm not sure if it is optional or not, but sometimes it could be helpful 
for clever translator to find context of original text, etc.

If we want to remove it, I suggest to add hbi18n switch, instead of 
compiler switch. hbi18n has much more free switch namespace. Translation 
line stripping functionality also fits hbi18n better.


Regards,
Mindaugas

> I'm not sure that filenames + linenumbers in .pot comments
> are a standard requirement or they are optional, but if the latter
> is the case, may I ask for an option to suppress them (or part
> of them)?
> 
> For two reasons:
> 1) After most .prg modifications the filename/lineno pairs
>   multiply and pile up in my final .po files. So they grow
>   and grow unless rebuilding them regularly. What's more
>   annoying is that it ignites changes for all .po files after
>   essentially each commit.
> 2) Sometimes I may not want to publish filenames and
>   line numbers for confidentiality reasons.
> +1) In many cases filename/lineno isn't necessarily / terribly
>   useful for translators.
> 
> I can also imagine an option to omit the line numer and
> leave the filename, which fully solves 1).
> 
> Is this possible to implement?

From harbour.01 at syenar.hu  Mon May 25 16:43:15 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May 25 16:43:21 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11134] trunk/harbour
In-Reply-To: <E1M8gn1-0001Ke-RS@74yxhf1.ch3.sourceforge.com>
References: <E1M8gn1-0001Ke-RS@74yxhf1.ch3.sourceforge.com>
Message-ID: <18d502870905251343p58409144o4e87cf60f6786fca@mail.gmail.com>

Nice, errors are gone now. Thank you.

Brgds,
Viktor

On Mon, May 25, 2009 at 10:28 PM,  <snaiperis@users.sourceforge.net> wrote:
> Revision: 11134
> ? ? ? ? ?http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11134&view=rev
> Author: ? snaiperis
> Date: ? ? 2009-05-25 20:28:55 +0000 (Mon, 25 May 2009)
>
> Log Message:
> -----------
>
> 2009-05-25 23:29 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
> ?* harbour/contrib/gtwvg/wvgsink.c
> ? ?! fixed, cleaned C++ compilation
>
> Modified Paths:
> --------------
> ? ?trunk/harbour/ChangeLog
> ? ?trunk/harbour/contrib/gtwvg/wvgsink.c
>
>
> This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From harbour.01 at syenar.hu  Mon May 25 16:50:55 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May 25 16:51:02 2009
Subject: [Harbour] Harbour -j option with disabled filenames and/or 
	linenumbers
In-Reply-To: <4A1B02CA.1060603@dbtopas.lt>
References: <18d502870905251325k6311321co7f4f593278d75603@mail.gmail.com>
	<4A1B02CA.1060603@dbtopas.lt>
Message-ID: <18d502870905251350j6114c5f9uf78591b17ae39aa1@mail.gmail.com>

> I'm not sure if it is optional or not, but sometimes it could be helpful for
> clever translator to find context of original text, etc.
>
> If we want to remove it, I suggest to add hbi18n switch, instead of compiler
> switch. hbi18n has much more free switch namespace. Translation line
> stripping functionality also fits hbi18n better.

Okay with me, it much flexible to do it there indeed.

[ The only downside is that if once we add some update logic to compiler
(meaning it checks what's on disk already and acts accordingly), it will
still ignite a .po rebuild due to changed source .pot file. But that's not the
nearest future anyway. ]

I'll add this option to __I18N_POTARRAYSAVE().

Brgds,
Viktor
From vszakats at users.sourceforge.net  Mon May 25 17:07:14 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May 25 17:07:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11135] trunk/harbour
Message-ID: <E1M8hO6-0003ZE-6n@d5vjzd1.ch3.sourceforge.com>

Revision: 11135
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11135&view=rev
Author:   vszakats
Date:     2009-05-25 21:07:11 +0000 (Mon, 25 May 2009)

Log Message:
-----------
2009-05-25 23:06 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/gtwvg/wvgsink.c
    ! Fixed warning.
    * Some formatting, minor cleanup.

  * source/rtl/hbi18n2.prg
    + __I18N_POTARRAYSAVE() got logical flag to suppress Harbour version
      number in saved file comment.
    + __I18N_POTARRAYSAVE() got logical flag to suppress source
      reference information in save file. This way it's possible to
      lessen the number of .po file updates and to avoid the growth
      caused by texts moving around while files are being edited.

  * utils/hbmk2/hbmk2.prg
    + Added option to save .po files in a version repository friendly
      way, this means no Harbour version number and no source file
      references in .po files. You can activate this using -minipo 
      option.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtwvg/wvgsink.c
    trunk/harbour/source/rtl/hbi18n2.prg
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dbtopas at dbtopas.lt  Mon May 25 17:42:29 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon May 25 17:41:16 2009
Subject: [Harbour] constant array index optimization idea
In-Reply-To: <18d502870905221307w2c04dae2ic2bfc792283cad22@mail.gmail.com>
References: <18d502870905221058p540568c1m68a57adfb3de1125@mail.gmail.com>	<20090522194405.GA8327@uran.home.aster.pl>
	<18d502870905221307w2c04dae2ic2bfc792283cad22@mail.gmail.com>
Message-ID: <4A1B10C5.1020100@dbtopas.lt>

Hi,


>>> Since these kind of lines may appear in mass, such optimization
>>> may result in code size reduction and speed increase.

 > Some more optimization ideas from the past: SUBSTR(), ASC( SUBSTR() ),
 > RETURN .T., RETURN .F., RETURN NIL

This is easy to do, but I guess it would increase speed very little in 
real life app.

Sometimes I return in my mind to more general solutions, like changing 
compiler to generate expression tree instead of code, typed variables, etc.

The last nice source of ideas I found is Lua virtual machine. In Lua 
5.0, VM was rewritten from stack based machine to register-based 
machine. This increased performance about 20%. Instead of:
   PUSHLOCAL 1
   PUSHLOCAL 2
   ADD
   POPLOCAL 3
they use:
   ADD 3 1 2


Here is some old table with one more Lua column:

No Test code          Harbour  PHP   Python Ruby   Java  Java+JIT   Lua
-----------------------------+------+------+------+------+-------+------+
    10'000'000 times:
11 nJ+=nI*2+17         4.61   3.41   6.54  25.53   1.36    0.08     0.63
12 nJ+=17+1+...+1+nI*2 4.61   6.10   6.62  45.86   1.36    0.08     1.63
13 nJ+=nI*2+17+1+...+1 4.62   5.95  12.96  45.78   1.92    0.17     1.56
    200'000 times:
21 cI:=cI+"a"          0.08   6.70   0.11  25.80 1641.766 1650.437 23.50
22 cI+="a"             0.08   0.07   0.12  25.83 1649.344 1654.735   -
31 AADD(aI,{nI})       0.18   0.29   0.32   0.20   0.76    0.40     0.16
32 AADD(aI,{aI[nI-1... 0.25   0.34   0.38   0.39   0.92    0.40     0.18
-------------------------------------------------------------------------
11 Mem Usage (KB)      2680   4296 162400   3244   6684    6892     1464
    Instruction count    180    150    143    105    202               35

Lua is very fast on numeric operations. A few differences to Harbour 
here are: all numeric are double (no integers); no widths and decimals 
are stored for numeric value. This saves some time for overflow check, 
integer <-> double conversion, result format. Lua has only 35 
instructions! In Lua all arrays are assocciative arrays and they have a 
good performance for it also.

http://www.tecgraf.puc-rio.br/~lhf/ftp/doc/jucs05.pdf
http://www.inf.puc-rio.br/~roberto/talks/lua-ll3.pdf


> Nice, I didn't know it. But, since -gc3 makes code pretty big, and
> it's not very practical to compile whole app level code with it (I'm
> getting a 27MB executable - vs. 10.8MB), and it's the app code
> which holds most of these constructs, at the end, the final app
> cannot benefit much from it, certainly not size-wise.

I'm surprised a little. Our company is small but event our largest 
application (has more than 100 browses and more than 100 dialogs, 
everything in full GUI widgets) is about 2.5MB size (-gc2). That kind of 
application should be to reach 10.8MB exe size?! :)


Regards,
Mindaugas
From vouchcac at users.sourceforge.net  Mon May 25 18:03:26 2009
From: vouchcac at users.sourceforge.net (vouchcac@users.sourceforge.net)
Date: Mon May 25 18:03:31 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11136] trunk/harbour
Message-ID: <E1M8iGU-0003AI-H4@dn4whf1.ch3.sourceforge.com>

Revision: 11136
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11136&view=rev
Author:   vouchcac
Date:     2009-05-25 22:03:22 +0000 (Mon, 25 May 2009)

Log Message:
-----------
2009-05-25 15:01 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * contrib/gtwvg/wvgsink.c
    * Cleanup .
    * Next step to make it as close to hbwin/axcore.c as much possible.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtwvg/wvgsink.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Mon May 25 18:11:25 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon May 25 18:11:32 2009
Subject: [Harbour] constant array index optimization idea
In-Reply-To: <4A1B10C5.1020100@dbtopas.lt>
References: <18d502870905221058p540568c1m68a57adfb3de1125@mail.gmail.com>
	<20090522194405.GA8327@uran.home.aster.pl>
	<18d502870905221307w2c04dae2ic2bfc792283cad22@mail.gmail.com>
	<4A1B10C5.1020100@dbtopas.lt>
Message-ID: <18d502870905251511p6543e7b2s3e1fc22042c62bc@mail.gmail.com>

> The last nice source of ideas I found is Lua virtual machine. In Lua 5.0, VM
> was rewritten from stack based machine to register-based machine. This
> increased performance about 20%. Instead of:
> ?PUSHLOCAL 1
> ?PUSHLOCAL 2
> ?ADD
> ?POPLOCAL 3
> they use:
> ?ADD 3 1 2

Sounds very good, I've been reading into this after reading your doc.
Would be great to see such feat in Harbour VM.

> Here is some old table with one more Lua column:
>
> No Test code ? ? ? ? ?Harbour ?PHP ? Python Ruby ? Java ?Java+JIT ? Lua
> -----------------------------+------+------+------+------+-------+------+
>
> Lua is very fast on numeric operations. A few differences to Harbour here
> are: all numeric are double (no integers); no widths and decimals are stored
> for numeric value. This saves some time for overflow check, integer <->
> double conversion, result format. Lua has only 35 instructions! In Lua all
> arrays are assocciative arrays and they have a good performance for it also.
>
> http://www.tecgraf.puc-rio.br/~lhf/ftp/doc/jucs05.pdf
> http://www.inf.puc-rio.br/~roberto/talks/lua-ll3.pdf

Right on the second page, I see syntactic sugar: a.x for a[ "x" ],
I'm not sure about the speed compared to a[ _NUM_INDEX ], but
it surely gives something I was missing a few days ago.

> I'm surprised a little. Our company is small but event our largest
> application (has more than 100 browses and more than 100 dialogs, everything
> in full GUI widgets) is about 2.5MB size (-gc2). That kind of application
> should be to reach 10.8MB exe size?! :)

Just did a quick count on this one app: more than 400 browses,
about 1000 windows (including non-dialogs), it's a CUI app, about
13MB of .prg code.

Anyway hbmk2 handles the process smoothly :) The other
thing is that full -gc3 compile won't give any noticeable performance
difference but lengthens the build process (C compile phase)
significantly. The framework lib is compiled with -gc3 though.

Brgds,
Viktor
From mbelgrano at deltain.it  Mon May 25 18:15:53 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon May 25 18:16:19 2009
Subject: [Harbour] Welome to harbour italian group
Message-ID: <609353e70905251515x6be6b727s92d4ec24983da6d3@mail.gmail.com>

Dear sir
we search collaboration for upcoming harbour Italian group
http://www.gio22.com/harbour/
http://groups.google.it/group/harbourITA?hl=it

Please share here any kind of material regarding harbour: article,
link, sample,documentation written is all language
we search also volunteer translator and other community for share information
Please visit us
Harbour is powefull and fast and reliable for make the best desktop application

Cerchiamo collaboratori per la nascente comunit? italiana harbour
http://www.gio22.com/harbour/
http://groups.google.it/group/harbourITA?hl=it
Inviaci materiale di qualunque tipo su harbour , scritto in qualunque
lingua.. va bene tutto
esempi,articoli,documentazione , indirizzi interessanti
Cerchiamo volontari per tradurre in da tutte le lingue del mondo e
altri gruppi di utenti harbour per affinare uno scambio di dati su
base mondiale.
Non esitate a visitarci, sapiamo che gli sviluppatori clipper non sono
abituati a farsi sentire on line, ma ? il momento giusto per farsi
sentire
Harbour ? cresciuto molto, e grazie all'implementazione del Multi
Thread (importante per processi di tipo server ) e di wrapper a qt
(skype, google earth) possiamo realizzare la pi? potente , veloce, e
affidabile delle desktop application
Il lavoro ? solo all'inizio entra anche tu nel gruppo.

-- 
Giovanni di Maria
Massimo Belgrano
From bruno.luciani at gmail.com  Mon May 25 19:12:39 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Mon May 25 19:12:44 2009
Subject: [Harbour] HBQT controls samples
Message-ID: <133778360905251612w3aab1446l75dfa8c38c659750@mail.gmail.com>

Hi , I need samples for for the most of the HBQT controls

Anybody have samples of them ?

In the tests directory of HBQT samples the sample have only a few of them

Any help would be apreciated

Bruno
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090525/f4f4bea4/attachment.html
From qiinfo at ig.com.br  Mon May 25 20:08:25 2009
From: qiinfo at ig.com.br (Rossine)
Date: Mon May 25 20:08:30 2009
Subject: [Harbour] Errors with msvc
In-Reply-To: <23709702.post@talk.nabble.com>
References: <23709702.post@talk.nabble.com>
Message-ID: <23714975.post@talk.nabble.com>


Hello All,

Problem solved :)

Thank you very much,

Rossine.

-- 
View this message in context: http://www.nabble.com/Errors-with-msvc-tp23709702p23714975.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vszakats at users.sourceforge.net  Mon May 25 20:16:15 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May 25 20:16:20 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11137] trunk/harbour
Message-ID: <E1M8kL1-0000nY-Rm@bj8yhf1.ch3.sourceforge.com>

Revision: 11137
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11137&view=rev
Author:   vszakats
Date:     2009-05-26 00:16:14 +0000 (Tue, 26 May 2009)

Log Message:
-----------
2009-05-26 02:14 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/xhb/fparse.c
   * contrib/rddsql/sddmy/mysqldd.c
   * contrib/rddsql/sqlbase.c
   * contrib/rddsql/sqlmix.c
   * contrib/rddads/adsx.c
   * contrib/examples/terminal/trm_client.prg
   * source/rdd/dbfnsx/dbfnsx1.c
     % "" -> NULL where applicable (hb_retc*(), hb_retds(), hb_itemPutC*(),
       hb_arraySetC*(), hb_errInternal(), hb_itemPutDS(), hb_arraySetDS())

   * contrib/hbqt/hbqt_qtextdocument.cpp
   * contrib/hbqt/hbqt_qgridlayout.cpp
   * contrib/hbqt/hbqt_qpainter.cpp
   * contrib/hbqt/hbqt_qeventloop.cpp
   * contrib/hbqt/hbqt_qicon.cpp
   * contrib/hbqt/hbqt_qtreeview.cpp
   * contrib/hbqt/hbqt_qtextline.cpp
   * contrib/hbqt/hbqt_qdesktopwidget.cpp
   * contrib/hbqt/hbqt_qhttp.cpp
   * contrib/hbqt/hbqt_qlineedit.cpp
   * contrib/hbqt/hbqt_qcombobox.cpp
   * contrib/hbqt/hbqt_qlistwidget.cpp
   * contrib/hbqt/hbqt_qtextcursor.cpp
   * contrib/hbqt/hbqt_qtextlayout.cpp
   * contrib/hbqt/hbqt_qftp.cpp
   * contrib/hbqt/hbqt_qclipboard.cpp
   * contrib/hbqt/hbqt_qurl.cpp
   * contrib/hbqt/hbqt_qwebpage.cpp
   * contrib/hbqt/hbqt_qtextedit.cpp
   * contrib/hbqt/hbqt_qpixmap.cpp
   * contrib/hbqt/hbqt_qsplashscreen.cpp
   * contrib/hbqt/hbqt_qtablewidget.cpp
   * contrib/hbqt/hbqt_qtreewidget.cpp
   * contrib/hbqt/generator/hbqtgen.prg
   * contrib/hbqt/hbqt_qfont.cpp
   * contrib/hbqt/hbqt_qmainwindow.cpp
   * contrib/hbqt/hbqt_qdir.cpp
   * contrib/hbqt/hbqt_qwidget.cpp
   * contrib/hbqt/hbqt_qstyle.cpp
   * contrib/hbqt/hbqt_qabstractbutton.cpp
   * contrib/hbqt/hbqt_qobject.cpp
   * contrib/hbqt/hbqt_qcolor.cpp
   * contrib/hbqt/hbqt_qtextstream.cpp
   * contrib/hbqt/hbqt_qwebview.cpp
   * contrib/hbqt/hbqt_qboxlayout.cpp
   * contrib/hbqt/hbqt_qstatusbar.cpp
   * contrib/hbqt/hbqt_qtabwidget.cpp
   * contrib/hbqt/hbqt_qscrollarea.cpp
   * contrib/hbqt/hbqt_qtextcharformat.cpp
     ! Fixed to use HB_ISNUM() instead of HB_ISNIL().
     % Don't call HB_ISNUM() where the default value is
       zero anyway. hb_parn*() functions will return zero
       anyway. (well, maybe this exploits the array-type
       bug in our Extend API.)

   * contrib/gtwvg/wvgwin.c
   * contrib/gtwvg/wvgsink.c
     * Avoiding ISNIL(). Corrected just a few occurences.
       This practice is still wrong in most of the cases in
       GTWVG code, so if the goal is GPF-free and consitently
       behaving apps, these would better be fixed. With
       string params ISNIL() is either superfluous or simply
       don't protect agains GPFs, for rest of the cases it
       either causes unexpected defaults (zero), or simply
       superfluous for the rest of the cases. IOW: Avoid it,
       use HB_ISNUM(), HB_ISCHAR() / parcx() instead.

   * contrib/hbgd/gdwrp.c
     * Formatting.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/examples/terminal/trm_client.prg
    trunk/harbour/contrib/gtwvg/wvgsink.c
    trunk/harbour/contrib/gtwvg/wvgwin.c
    trunk/harbour/contrib/hbgd/gdwrp.c
    trunk/harbour/contrib/hbqt/generator/hbqtgen.prg
    trunk/harbour/contrib/hbqt/hbqt_qabstractbutton.cpp
    trunk/harbour/contrib/hbqt/hbqt_qboxlayout.cpp
    trunk/harbour/contrib/hbqt/hbqt_qclipboard.cpp
    trunk/harbour/contrib/hbqt/hbqt_qcolor.cpp
    trunk/harbour/contrib/hbqt/hbqt_qcombobox.cpp
    trunk/harbour/contrib/hbqt/hbqt_qdesktopwidget.cpp
    trunk/harbour/contrib/hbqt/hbqt_qdir.cpp
    trunk/harbour/contrib/hbqt/hbqt_qeventloop.cpp
    trunk/harbour/contrib/hbqt/hbqt_qfont.cpp
    trunk/harbour/contrib/hbqt/hbqt_qftp.cpp
    trunk/harbour/contrib/hbqt/hbqt_qgridlayout.cpp
    trunk/harbour/contrib/hbqt/hbqt_qhttp.cpp
    trunk/harbour/contrib/hbqt/hbqt_qicon.cpp
    trunk/harbour/contrib/hbqt/hbqt_qlineedit.cpp
    trunk/harbour/contrib/hbqt/hbqt_qlistwidget.cpp
    trunk/harbour/contrib/hbqt/hbqt_qmainwindow.cpp
    trunk/harbour/contrib/hbqt/hbqt_qobject.cpp
    trunk/harbour/contrib/hbqt/hbqt_qpainter.cpp
    trunk/harbour/contrib/hbqt/hbqt_qpixmap.cpp
    trunk/harbour/contrib/hbqt/hbqt_qscrollarea.cpp
    trunk/harbour/contrib/hbqt/hbqt_qsplashscreen.cpp
    trunk/harbour/contrib/hbqt/hbqt_qstatusbar.cpp
    trunk/harbour/contrib/hbqt/hbqt_qstyle.cpp
    trunk/harbour/contrib/hbqt/hbqt_qtablewidget.cpp
    trunk/harbour/contrib/hbqt/hbqt_qtabwidget.cpp
    trunk/harbour/contrib/hbqt/hbqt_qtextcharformat.cpp
    trunk/harbour/contrib/hbqt/hbqt_qtextcursor.cpp
    trunk/harbour/contrib/hbqt/hbqt_qtextdocument.cpp
    trunk/harbour/contrib/hbqt/hbqt_qtextedit.cpp
    trunk/harbour/contrib/hbqt/hbqt_qtextlayout.cpp
    trunk/harbour/contrib/hbqt/hbqt_qtextline.cpp
    trunk/harbour/contrib/hbqt/hbqt_qtextstream.cpp
    trunk/harbour/contrib/hbqt/hbqt_qtreeview.cpp
    trunk/harbour/contrib/hbqt/hbqt_qtreewidget.cpp
    trunk/harbour/contrib/hbqt/hbqt_qurl.cpp
    trunk/harbour/contrib/hbqt/hbqt_qwebpage.cpp
    trunk/harbour/contrib/hbqt/hbqt_qwebview.cpp
    trunk/harbour/contrib/hbqt/hbqt_qwidget.cpp
    trunk/harbour/contrib/rddads/adsx.c
    trunk/harbour/contrib/rddsql/sddmy/mysqldd.c
    trunk/harbour/contrib/rddsql/sqlbase.c
    trunk/harbour/contrib/rddsql/sqlmix.c
    trunk/harbour/contrib/xhb/fparse.c
    trunk/harbour/source/rdd/dbfnsx/dbfnsx1.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bruno.luciani at gmail.com  Mon May 25 20:23:19 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Mon May 25 20:23:24 2009
Subject: [Harbour] Managing error in HBQT
Message-ID: <133778360905251723n28464fb5qeda93c42bfba96e2@mail.gmail.com>

hello in a HBQT program, when I codify  a non existent HBQT method , the
program Freeze
without any error message, and I need to close the program from taskbar.

What I need to codify to use error routines and get the error message ?

Thanks in advance for the help

Bruno
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090525/2cfe99a5/attachment.html
From vszakats at users.sourceforge.net  Mon May 25 20:55:58 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon May 25 20:56:03 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11138] trunk/harbour
Message-ID: <E1M8kxS-0001Qh-Nb@3kljzd1.ch3.sourceforge.com>

Revision: 11138
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11138&view=rev
Author:   vszakats
Date:     2009-05-26 00:55:57 +0000 (Tue, 26 May 2009)

Log Message:
-----------
2009-05-26 02:54 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/xhb/Makefile
  + contrib/xhb/datesxhb.c
    + Added these xhb compatibility functions:
      TSSECS(), TIMEOFDAY(), HMS2D(), TTOD().
      Borrowed from xhb, work of Giancarlo Niccolai, Walter Negro,
      with few changes.

  * contrib/xhb/hbcompat.ch
    + Added translation for these functions:
      DATETIME(), HOUR(), MINUTE(), TTOS(), STOT(), TTOC(), CTOT()
      (NOTE: I don't know if the workings of corresponding Harbour
             functions are fully compatible. If not we can add
             xhb_*() flavours locally in xhb lib)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/xhb/Makefile
    trunk/harbour/contrib/xhb/hbcompat.ch

Added Paths:
-----------
    trunk/harbour/contrib/xhb/datesxhb.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vouchcac at users.sourceforge.net  Mon May 25 21:19:18 2009
From: vouchcac at users.sourceforge.net (vouchcac@users.sourceforge.net)
Date: Mon May 25 21:19:23 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11139] trunk/harbour
Message-ID: <E1M8lK2-0006xT-63@d5vjzd1.ch3.sourceforge.com>

Revision: 11139
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11139&view=rev
Author:   vouchcac
Date:     2009-05-26 01:19:17 +0000 (Tue, 26 May 2009)

Log Message:
-----------
2009-05-25 18:16 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * contrib/gtwvg/wvgsink.c
    ! HBNIL() -> HB_ISNUM() | HB_ISCHAR().
    + Few more convinience functions.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtwvg/wvgsink.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From sscc at mweb.co.za  Tue May 26 02:44:31 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue May 26 02:44:33 2009
Subject: [Harbour] constant array index optimization idea
In-Reply-To: <18d502870905251511p6543e7b2s3e1fc22042c62bc@mail.gmail.com>
References: <18d502870905221058p540568c1m68a57adfb3de1125@mail.gmail.com>	<20090522194405.GA8327@uran.home.aster.pl>	<18d502870905221307w2c04dae2ic2bfc792283cad22@mail.gmail.com>	<4A1B10C5.1020100@dbtopas.lt>
	<18d502870905251511p6543e7b2s3e1fc22042c62bc@mail.gmail.com>
Message-ID: <4A1B8FCF.1040605@mweb.co.za>

Viktor Szak?ts wrote:

> Right on the second page, I see syntactic sugar: a.x for a[ "x" ],
> I'm not sure about the speed compared to a[ _NUM_INDEX ], but
> it surely gives something I was missing a few days ago.

Yes, nice.

Regards
Alex
From druzus at acn.waw.pl  Tue May 26 03:35:26 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue May 26 03:26:22 2009
Subject: [Harbour] constant array index optimization idea
In-Reply-To: <18d502870905251511p6543e7b2s3e1fc22042c62bc@mail.gmail.com>
References: <18d502870905221058p540568c1m68a57adfb3de1125@mail.gmail.com>
	<20090522194405.GA8327@uran.home.aster.pl>
	<18d502870905221307w2c04dae2ic2bfc792283cad22@mail.gmail.com>
	<4A1B10C5.1020100@dbtopas.lt>
	<18d502870905251511p6543e7b2s3e1fc22042c62bc@mail.gmail.com>
Message-ID: <20090526073526.GA17073@uran.home.aster.pl>

On Tue, 26 May 2009, Szak?ts Viktor wrote:

Hi,

> Right on the second page, I see syntactic sugar: a.x for a[ "x" ],
> I'm not sure about the speed compared to a[ _NUM_INDEX ], but
> it surely gives something I was missing a few days ago.

You have such functionality from beginning though it's not enabled in
default core builds. You have to compile Harbour with HB_HASH_MSG_ITEMS
macro or use XHB library. The only one difference is that [x]Harbour
uses : not . as send operator so it will look like a:x not a.x
Using . as send operator breaks the syntax:
   a.and.b
it can be interpreted as:
   a .and. b
or:
   a:and:b
what for hashes with OOP interface means:
   a["AND"]["B"] => a["AND","B"]
anyhow if you prefer . like in VFP then you can use:
   #xtranslate .<!msg!> => :<msg>

best regards,
Przemek
From vszakats at users.sourceforge.net  Tue May 26 03:31:34 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue May 26 03:31:39 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11140] trunk/harbour
Message-ID: <E1M8r8I-00043a-Mb@d5vjzd1.ch3.sourceforge.com>

Revision: 11140
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11140&view=rev
Author:   vszakats
Date:     2009-05-26 07:31:33 +0000 (Tue, 26 May 2009)

Log Message:
-----------
2009-05-26 09:24 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/gtwvg/wvgax.prg
  * contrib/gtwvg/wvgwin.c
  * contrib/gtwvg/wvgsink.c
    ! Fixed HB_OLEAUTO() -> WIN_OLEAUTO()
    * Formatting.
    ! Fixed a few ISNIL()s.
    ! Fixed a few hb_parc() to hb_parcx() (many potential GPFs).
    % Removed unnecessary ISBYREF() and hb_ret() calls.
    ! Prefixed some static vars with 's_'.
    ! Fixed potential buffer overrun and memory corruption in
      Invoke() function.

  * contrib/rddads/adsfunc.c
    + Changed to always define all Harbour level functions.
      For unsupported ADS versions, these function will be stubs
      returning dummy values.
    ; TODO: Do the same in other contribs, like hbsqlit3. Anyone?

  * contrib/rddads/ads1.c
    ! Fixed typos and missing casts preventing to compile with 
      pre-6.00 ACE versions.
 
  * contrib/rddads/Makefile
  + contrib/rddads/adsextrn.ch
    + Added EXTERNAL header.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtwvg/wvgax.prg
    trunk/harbour/contrib/gtwvg/wvgsink.c
    trunk/harbour/contrib/gtwvg/wvgwin.c
    trunk/harbour/contrib/rddads/Makefile
    trunk/harbour/contrib/rddads/ads1.c
    trunk/harbour/contrib/rddads/adsfunc.c

Added Paths:
-----------
    trunk/harbour/contrib/rddads/adsextrn.ch


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Tue May 26 03:35:57 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Tue May 26 03:36:05 2009
Subject: [Harbour] constant array index optimization idea
In-Reply-To: <20090526073526.GA17073@uran.home.aster.pl>
References: <18d502870905221058p540568c1m68a57adfb3de1125@mail.gmail.com>
	<20090522194405.GA8327@uran.home.aster.pl>
	<18d502870905221307w2c04dae2ic2bfc792283cad22@mail.gmail.com>
	<4A1B10C5.1020100@dbtopas.lt>
	<18d502870905251511p6543e7b2s3e1fc22042c62bc@mail.gmail.com>
	<20090526073526.GA17073@uran.home.aster.pl>
Message-ID: <18d502870905260035o1c600774ycf799ffb7a0c0a@mail.gmail.com>

Hi Przemek,

> You have such functionality from beginning though it's not enabled in
> default core builds. You have to compile Harbour with HB_HASH_MSG_ITEMS
> macro or use XHB library. The only one difference is that [x]Harbour
> uses : not . as send operator so it will look like a:x not a.x
> Using . as send operator breaks the syntax:
> ? a.and.b
> it can be interpreted as:
> ? a .and. b
> or:
> ? a:and:b

Good reminder, I knew it was colliding, just forgot with what syntax.

> what for hashes with OOP interface means:
> ? a["AND"]["B"] => a["AND","B"]
> anyhow if you prefer . like in VFP then you can use:
> ? #xtranslate .<!msg!> => :<msg>

Thanks for the tip. I'm a little bit worried about speed drop
here compared to direct index access, so probably I will
stay with current index access practice. Nice to have this
anyway.

What was the reason not enabling this in default builds?

Brgds,
Viktor
From mbelgrano at deltain.it  Tue May 26 03:44:43 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue May 26 03:45:44 2009
Subject: [Harbour] Re: Welome to harbour italian group
In-Reply-To: <609353e70905251515x6be6b727s92d4ec24983da6d3@mail.gmail.com>
References: <609353e70905251515x6be6b727s92d4ec24983da6d3@mail.gmail.com>
Message-ID: <609353e70905260044l6db7e70fye9517e9a6210a3c6@mail.gmail.com>

I notice that in after  15 minutes from this announce WHO have 50 unique access
The harbour comunity is more big of what appear here

Il 26 maggio 2009 0.15, Massimo Belgrano <mbelgrano@deltain.it> ha scritto:
> Dear sir
> we search collaboration for upcoming harbour Italian group
> http://www.gio22.com/harbour/
> http://groups.google.it/group/harbourITA?hl=it
>
> Please share here any kind of material regarding harbour: article,
> link, sample,documentation written is all language
> we search also volunteer translator and other community for share information
> Please visit us
> Harbour is powefull and fast and reliable for make the best desktop application
>
> Cerchiamo collaboratori per la nascente comunit? italiana harbour
> http://www.gio22.com/harbour/
> http://groups.google.it/group/harbourITA?hl=it
> Inviaci materiale di qualunque tipo su harbour , scritto in qualunque
> lingua.. va bene tutto
> esempi,articoli,documentazione , indirizzi interessanti
> Cerchiamo volontari per tradurre in da tutte le lingue del mondo e
> altri gruppi di utenti harbour per affinare uno scambio di dati su
> base mondiale.
> Non esitate a visitarci, sapiamo che gli sviluppatori clipper non sono
> abituati a farsi sentire on line, ma ? il momento giusto per farsi
> sentire
> Harbour ? cresciuto molto, e grazie all'implementazione del Multi
> Thread (importante per processi di tipo server ) e di wrapper a qt
> (skype, google earth) possiamo realizzare la pi? potente , veloce, e
> affidabile delle desktop application
> Il lavoro ? solo all'inizio entra anche tu nel gruppo.
>
> --
> Giovanni di Maria
> Massimo Belgrano
>



-- 
Massimo Belgrano
From druzus at acn.waw.pl  Tue May 26 04:37:17 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue May 26 04:28:12 2009
Subject: [Harbour] constant array index optimization idea
In-Reply-To: <4A1B10C5.1020100@dbtopas.lt>
References: <18d502870905221058p540568c1m68a57adfb3de1125@mail.gmail.com>
	<20090522194405.GA8327@uran.home.aster.pl>
	<18d502870905221307w2c04dae2ic2bfc792283cad22@mail.gmail.com>
	<4A1B10C5.1020100@dbtopas.lt>
Message-ID: <20090526083717.GA18913@uran.home.aster.pl>

On Tue, 26 May 2009, Mindaugas Kavaliauskas wrote:

Hi,

> Sometimes I return in my mind to more general solutions, like changing 
> compiler to generate expression tree instead of code, typed variables, etc.
> The last nice source of ideas I found is Lua virtual machine. In Lua 5.0, 
> VM was rewritten from stack based machine to register-based machine. This 
> increased performance about 20%. Instead of:
>   PUSHLOCAL 1
>   PUSHLOCAL 2
>   ADD
>   POPLOCAL 3
> they use:
>   ADD 3 1 2

yes but if you look carefully then you will find that number of registers
in such implementation is reduced to 256 what also reduce maximal number
of local variables which have to be less or equal (depending on code) to
the number of registers. To keep compatibility with clipper we will have
to use different opcode set which will not be such optimal. The tables with
constant values are quite interesting method of RT speed optimization with
some additional cost of startup initialization but here I also see some
serious limitation for the maximal number of items.
I do not want to say that moving from stack to register based language
is bad idea. I only want to say that some improvements reached in LUA
cannot be adopted to Harbour without introducing some limitations to the
language.

> Here is some old table with one more Lua column:
> No Test code          Harbour  PHP   Python Ruby   Java  Java+JIT   Lua
> -----------------------------+------+------+------+------+-------+------+
>    10'000'000 times:
> 11 nJ+=nI*2+17         4.61   3.41   6.54  25.53   1.36    0.08     0.63
> 12 nJ+=17+1+...+1+nI*2 4.61   6.10   6.62  45.86   1.36    0.08     1.63
> 13 nJ+=nI*2+17+1+...+1 4.62   5.95  12.96  45.78   1.92    0.17     1.56
>    200'000 times:
> 21 cI:=cI+"a"          0.08   6.70   0.11  25.80 1641.766 1650.437 23.50
> 22 cI+="a"             0.08   0.07   0.12  25.83 1649.344 1654.735   -
> 31 AADD(aI,{nI})       0.18   0.29   0.32   0.20   0.76    0.40     0.16
> 32 AADD(aI,{aI[nI-1... 0.25   0.34   0.38   0.39   0.92    0.40     0.18
> -------------------------------------------------------------------------
> 11 Mem Usage (KB)      2680   4296 162400   3244   6684    6892     1464
>    Instruction count    180    150    143    105    202               35
>
> Lua is very fast on numeric operations. A few differences to Harbour here 
> are: all numeric are double (no integers); no widths and decimals are 
> stored for numeric value. This saves some time for overflow check, integer 
> <-> double conversion, result format. Lua has only 35 instructions! In Lua 

Using only double for numeric holder is interesting solution, f.e. CLIP
also uses only double values. Anyhow it introduce problems for 64bit
integer support. IEEE758 double value gives effectively only 53 bit
precision so it cannot be used as holder for 64bit values without some
precision lost.
This example forces double usage so it will prefer languages which uses
only double values.
Anyhow here we have also good example of speed improvement which can be
reached with register based VM by reducing number of OPCODEs.
But such partial reduction is also done for -gc3 output (of course is
not comparable to register based VM) and if make some speed comparison
for -gc3 and -gc2 then you should find that in such examples the difference
is also quite huge - noticeable bigger then average speed difference between
-gc2 and -gc3 code.

> all arrays are assocciative arrays and they have a good performance for it 
> also.

Internally they can use two different representations: hash and indexed
arrays. I do not remember your exact test code but I guess LUA detects
it's indexed array and do not use hash array for internal representation.

> http://www.tecgraf.puc-rio.br/~lhf/ftp/doc/jucs05.pdf
> http://www.inf.puc-rio.br/~roberto/talks/lua-ll3.pdf

Nice. Thank you for above links.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue May 26 04:37:39 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Tue May 26 04:37:45 2009
Subject: [Harbour] constant array index optimization idea
In-Reply-To: <20090526083717.GA18913@uran.home.aster.pl>
References: <18d502870905221058p540568c1m68a57adfb3de1125@mail.gmail.com>
	<20090522194405.GA8327@uran.home.aster.pl>
	<18d502870905221307w2c04dae2ic2bfc792283cad22@mail.gmail.com>
	<4A1B10C5.1020100@dbtopas.lt>
	<20090526083717.GA18913@uran.home.aster.pl>
Message-ID: <18d502870905260137p7b688ba5k5bd1db752f78369d@mail.gmail.com>

>> they use:
>> ? ADD 3 1 2
>
> yes but if you look carefully then you will find that number of registers
> in such implementation is reduced to 256 what also reduce maximal number
> of local variables which have to be less or equal (depending on code) to
> the number of registers. To keep compatibility with clipper we will have
> to use different opcode set which will not be such optimal. The tables with
> constant values are quite interesting method of RT speed optimization with
> some additional cost of startup initialization but here I also see some
> serious limitation for the maximal number of items.
> I do not want to say that moving from stack to register based language
> is bad idea. I only want to say that some improvements reached in LUA
> cannot be adopted to Harbour without introducing some limitations to the
> language.

If we add the register based calling convention on the top
of current implementation (I know it's bloat), we can simply
revert to stack based for cases when > 256 local vars are
used, I expect this to happen very rarely, but I agree we
must support it. In other cases (which is the majority) reg
based could be used.

Also the numeric var detection than native C type usage
in -gc3 mode could greatly improve core .prg code loop speed.

Brgds,
Viktor
From kadziola at tlen.pl  Tue May 26 05:54:33 2009
From: kadziola at tlen.pl (Jaroslaw Kadziola)
Date: Tue May 26 05:54:41 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104] trunk/harbour
In-Reply-To: <20090522121122.GA2212@uran.home.aster.pl>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<173100328.20090522134457@tlen.pl>
	<20090522121122.GA2212@uran.home.aster.pl>
Message-ID: <1486517337.20090526115433@tlen.pl>

Hi Przemek,

PC> If you want to create your own binaries for WinCE working with
PC> x86-Windows then you have to use harbour and other tools like
PC> hbmk2 compiled for x86-Windows with libraries created for WinCE
PC> builds and C compiler which can generated WinCE-ARM code.

You are right ! Thanks a lot to You and to Victor for your support!
Now 'wcecon.exe' is running on my palmtop.
One question only : is any chance build library 'SuperLib'
(originally for clipper) for Harbour - Wince when i have all
*.prg, *.asm and *.c files for this library ? In this library are
mouse functions useful in tbrowse objects. Is any library in harbour
with these functions ?


-- 
Regards,
 Jaroslaw Kadziola

From harbour.01 at syenar.hu  Tue May 26 06:12:34 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue May 26 06:12:45 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104] trunk/harbour
In-Reply-To: <1486517337.20090526115433@tlen.pl>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<173100328.20090522134457@tlen.pl>
	<20090522121122.GA2212@uran.home.aster.pl>
	<1486517337.20090526115433@tlen.pl>
Message-ID: <A27F20E0-B110-403B-A193-C430369109E5@syenar.hu>

> You are right ! Thanks a lot to You and to Victor for your support!
> Now 'wcecon.exe' is running on my palmtop.

Good news. You're welcome.

> One question only : is any chance build library 'SuperLib'
> (originally for clipper) for Harbour - Wince when i have all
> *.prg, *.asm and *.c files for this library ? In this library are
> mouse functions useful in tbrowse objects. Is any library in harbour
> with these functions ?

Generally speaking .asm files need a full rewrite in higher level
language (.c or .org) for Windows (and other platform) APIs. .c
sources also need to be adapted for Windows (and other platform)
APIs. .prg is usable, except those parts which rely on the lib's
own .c/.asm functionality.

In case of Superlib the situation isn't so bad, since its few
.asm functionality exists as Harbour C level API (at least for
the most part). It's minimal .c code is easy to adapt to Harbour
for the most part (needs to be made MT ready).

Harder is to make .prg code multiplatform and MT ready, and of
course someone should do the necessary migration steps.

Probably it's easier to check whether the functionality you're
seeking is already implemented in core Harbour or hbct lib.

Anyhow Superlib port is possible, but someone should do it.

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue May 26 06:51:23 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue May 26 06:51:35 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104] trunk/harbour
In-Reply-To: <1486517337.20090526115433@tlen.pl>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<173100328.20090522134457@tlen.pl>
	<20090522121122.GA2212@uran.home.aster.pl>
	<1486517337.20090526115433@tlen.pl>
Message-ID: <4C8C519E-6E96-4B16-9F2B-443687164190@syenar.hu>

Here is an initial port of Superlib to Harbour:

http://www.syenar.hu/harbour/hbsuper.zip
[ unzip to contrib and build it the usual way ]

.asm stuff isn't ported, .c stuff was, few compilation
error fixed due to no 10 chars limit in Harbour, few
extensions and include filenames made lowercase.

There are still several non-portable and even buggy
code in there and I had to lower warning level to make
it compile.

If there is enough interest, I can upload this to
SVN as is, maybe to examples initially.

Brgds,
Viktor

On 2009.05.26., at 11:54, Jaroslaw Kadziola wrote:

> Hi Przemek,
>
> PC> If you want to create your own binaries for WinCE working with
> PC> x86-Windows then you have to use harbour and other tools like
> PC> hbmk2 compiled for x86-Windows with libraries created for WinCE
> PC> builds and C compiler which can generated WinCE-ARM code.
>
> You are right ! Thanks a lot to You and to Victor for your support!
> Now 'wcecon.exe' is running on my palmtop.
> One question only : is any chance build library 'SuperLib'
> (originally for clipper) for Harbour - Wince when i have all
> *.prg, *.asm and *.c files for this library ? In this library are
> mouse functions useful in tbrowse objects. Is any library in harbour
> with these functions ?
>
>
> -- 
> Regards,
> Jaroslaw Kadziola
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From kadziola at tlen.pl  Tue May 26 08:46:29 2009
From: kadziola at tlen.pl (Jaroslaw Kadziola)
Date: Tue May 26 08:46:37 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104] trunk/harbour
In-Reply-To: <4C8C519E-6E96-4B16-9F2B-443687164190@syenar.hu>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<173100328.20090522134457@tlen.pl>
	<20090522121122.GA2212@uran.home.aster.pl>
	<1486517337.20090526115433@tlen.pl>
	<4C8C519E-6E96-4B16-9F2B-443687164190@syenar.hu>
Message-ID: <1005233192.20090526144629@tlen.pl>

Hi Viktor,,


SV> Here is an initial port of Superlib to Harbour:

SV> http://www.syenar.hu/harbour/hbsuper.zip
SV> [ unzip to contrib and build it the usual way ]

Thanks so much. Will try build tomorrow.

SV> If there is enough interest, I can upload this to
SV> SVN as is, maybe to examples initially.

Please do it.

-- 
Regards,
 Jaroslaw Kadziola

From harbour.01 at syenar.hu  Tue May 26 08:51:22 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Tue May 26 08:51:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104] 
	trunk/harbour
In-Reply-To: <1005233192.20090526144629@tlen.pl>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<173100328.20090522134457@tlen.pl>
	<20090522121122.GA2212@uran.home.aster.pl>
	<1486517337.20090526115433@tlen.pl>
	<4C8C519E-6E96-4B16-9F2B-443687164190@syenar.hu>
	<1005233192.20090526144629@tlen.pl>
Message-ID: <18d502870905260551n2fe9919dide100bf68008e019@mail.gmail.com>

> SV> Here is an initial port of Superlib to Harbour:
>
> SV> http://www.syenar.hu/harbour/hbsuper.zip
> SV> [ unzip to contrib and build it the usual way ]
>
> Thanks so much. Will try build tomorrow.

Okay.

> SV> If there is enough interest, I can upload this to
> SV> SVN as is, maybe to examples initially.
>
> Please do it.

I need advice as its license says it cannot be distributed
for money, which may make it incompatible with rest of
Harbour and potentially block it from some distros:

--- from readme.txt:
This product is now free, but still copyrighted by Garry A Prefontaine.
You may not charge for any part of this software.

You may use it without charge as long as you:

1. DOWNLOAD IT ON YOUR OWN DIME

2. DO NOT EXPECT ANY TECHNICAL SUPPORT OF ANY KIND

3. DO NOT EXPECT ANY UPGRADES OF ANY KIND (i.e. to 5.3 or VO)

4. AGREE TO THE FOLLOWING TERMS:
SuperLib is provided on an "AS IS" basis, with no implied warranty
regarding merchantability or fitness for any particular purpose.
Functional Software Inc. and the author Garry A Prefontaine, make no
representations or warranties with respect to the contents hereof,
and specifically disclaim any implied warranties. By using this software
you agree that Functional Software Inc. and the author Garry A Prefontaine,
will not be liable to you or any third party for any use of (or inability to
use) this software, or for any damages (direct or indirect) whatsoever, even
Functional Software Inc or the author Garry A Prefontaine, are apprised of
the possibility of such damages occurring.  In no event shall Functional
Software Inc or the author Garry A Prefontaine be liable for any loss of
profit or any other commercial damage, including but not limited to special,
incidental, consequential or other damages. The entire risk related to the
quality and performance of the program is on you.
---

Opinions?

Brgds,
Viktor
From dbtopas at dbtopas.lt  Tue May 26 08:57:11 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue May 26 08:55:56 2009
Subject: [Harbour] constant array index optimization idea
In-Reply-To: <20090526083717.GA18913@uran.home.aster.pl>
References: <18d502870905221058p540568c1m68a57adfb3de1125@mail.gmail.com>	<20090522194405.GA8327@uran.home.aster.pl>	<18d502870905221307w2c04dae2ic2bfc792283cad22@mail.gmail.com>	<4A1B10C5.1020100@dbtopas.lt>
	<20090526083717.GA18913@uran.home.aster.pl>
Message-ID: <4A1BE727.2070903@dbtopas.lt>

Hi,


>> Sometimes I return in my mind to more general solutions, like changing 
>> compiler to generate expression tree instead of code, typed variables, etc.
>> The last nice source of ideas I found is Lua virtual machine. In Lua 5.0, 
>> VM was rewritten from stack based machine to register-based machine. This 
>> increased performance about 20%. Instead of:
>>   PUSHLOCAL 1
>>   PUSHLOCAL 2
>>   ADD
>>   POPLOCAL 3
>> they use:
>>   ADD 3 1 2
> 
> yes but if you look carefully then you will find that number of registers
> in such implementation is reduced to 256 what also reduce maximal number
> of local variables which have to be less or equal (depending on code) to
> the number of registers. 

Yes, I know. I'm not talking about dropping current stack-based HVM, but 
the usage of additional registry-based instructions can be a way of 
optimisation. If local variable number exceeds 255, we can use 
stack-based push/pop style. Addition "registers" can be allocated using 
the same HB_P_FRAME.

Of cause, such mixture of stack-based and register-based commands is 
redundant and may seem not a nice solution. So, I think it's worth to 
implement it only if we gain a significant speed improvement.


>> all arrays are assocciative arrays and they have a good performance for it 
>> also.
> 
> Internally they can use two different representations: hash and indexed
> arrays. I do not remember your exact test code but I guess LUA detects
> it's indexed array and do not use hash array for internal representation.

It's explained (just see Fugure 2, on page 7, on 
http://www.tecgraf.puc-rio.br/~lhf/ftp/doc/jucs05.pdf). All Lua tables 
have both array and hash parts. I do not thing it is worth to implement 
this approach in Harbour hashes, since programmers chooses array or hash 
  to fit their need. But Lua's idea is nice in case all arrays are hashes.


Regards,
Mindaugas

From harbour.01 at syenar.hu  Tue May 26 09:10:04 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue May 26 09:10:17 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104] trunk/harbour
In-Reply-To: <1005233192.20090526144629@tlen.pl>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<173100328.20090522134457@tlen.pl>
	<20090522121122.GA2212@uran.home.aster.pl>
	<1486517337.20090526115433@tlen.pl>
	<4C8C519E-6E96-4B16-9F2B-443687164190@syenar.hu>
	<1005233192.20090526144629@tlen.pl>
Message-ID: <4A6A5A44-35FD-4E19-A507-2551996BBA49@syenar.hu>

Hi Jaroslaw,

One more thing, I've reuploaded the .zip with an
.hbm included so that it's really simply to build it
outside our source repository for any platforms using
hbmk2.

Here's an even simpler hbsuper.hbm version:
---
-hblib
-ohbsuper
-inc
-q0 -w1 -es2 -gc0 -l
*.c
*.prg
---

It's pretty much a no-brainer to build it locally,
so including it in our repository isn't as pressing
(but could still be nice if possible).

Brds,
Viktor


On 2009.05.26., at 14:46, Jaroslaw Kadziola wrote:

> Hi Viktor,,
>
>
> SV> Here is an initial port of Superlib to Harbour:
>
> SV> http://www.syenar.hu/harbour/hbsuper.zip
> SV> [ unzip to contrib and build it the usual way ]
>
> Thanks so much. Will try build tomorrow.
>
> SV> If there is enough interest, I can upload this to
> SV> SVN as is, maybe to examples initially.
>
> Please do it.
>
> -- 
> Regards,
> Jaroslaw Kadziola
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue May 26 09:12:03 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Tue May 26 09:12:11 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104] 
	trunk/harbour
In-Reply-To: <4A6A5A44-35FD-4E19-A507-2551996BBA49@syenar.hu>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<173100328.20090522134457@tlen.pl>
	<20090522121122.GA2212@uran.home.aster.pl>
	<1486517337.20090526115433@tlen.pl>
	<4C8C519E-6E96-4B16-9F2B-443687164190@syenar.hu>
	<1005233192.20090526144629@tlen.pl>
	<4A6A5A44-35FD-4E19-A507-2551996BBA49@syenar.hu>
Message-ID: <18d502870905260612n51acce33x6a7eb7f56cfdb04a@mail.gmail.com>

Forgot to add that hbmk2 build is also much faster than
using GNU Make, at least on Windows systems.

Brgds,
Viktor

On Tue, May 26, 2009 at 3:10 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:
> Hi Jaroslaw,
>
> One more thing, I've reuploaded the .zip with an
> .hbm included so that it's really simply to build it
> outside our source repository for any platforms using
> hbmk2.
>
> Here's an even simpler hbsuper.hbm version:
> ---
> -hblib
> -ohbsuper
> -inc
> -q0 -w1 -es2 -gc0 -l
> *.c
> *.prg
> ---
>
> It's pretty much a no-brainer to build it locally,
> so including it in our repository isn't as pressing
> (but could still be nice if possible).
>
> Brds,
> Viktor
>
>
> On 2009.05.26., at 14:46, Jaroslaw Kadziola wrote:
>
>> Hi Viktor,,
>>
>>
>> SV> Here is an initial port of Superlib to Harbour:
>>
>> SV> http://www.syenar.hu/harbour/hbsuper.zip
>> SV> [ unzip to contrib and build it the usual way ]
>>
>> Thanks so much. Will try build tomorrow.
>>
>> SV> If there is enough interest, I can upload this to
>> SV> SVN as is, maybe to examples initially.
>>
>> Please do it.
>>
>> --
>> Regards,
>> Jaroslaw Kadziola
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
From bedipritpal at hotmail.com  Tue May 26 09:46:22 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue May 26 09:46:28 2009
Subject: Re[Harbour] [2]: SF.net SVN: harbour-project:[11104] trunk/harbour
In-Reply-To: <4C8C519E-6E96-4B16-9F2B-443687164190@syenar.hu>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<173100328.20090522134457@tlen.pl>
	<20090522121122.GA2212@uran.home.aster.pl>
	<1486517337.20090526115433@tlen.pl>
	<4C8C519E-6E96-4B16-9F2B-443687164190@syenar.hu>
Message-ID: <23723161.post@talk.nabble.com>


Hello


Viktor Szak?ts wrote:
> 
> Here is an initial port of Superlib to Harbour:
> 

Recently I had ported Superlib for one of old projects
and did the same type of changes you are pointing out.
I personally is not a user of this library so cannot 
comment on its in-depth analysis.

Probbaly your port will be more optimized. For reasons
of its license I never offered this lib to be a part of SVN.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-11104--trunk-harbour-tp23668426p23723161.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Tue May 26 09:50:43 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue May 26 09:50:47 2009
Subject: [Harbour] OLE - Feature Request
In-Reply-To: <4A1A71A2.8010706@dbtopas.lt>
References: <23697736.post@talk.nabble.com> <4A1A71A2.8010706@dbtopas.lt>
Message-ID: <23723213.post@talk.nabble.com>


Hello


Mindaugas Kavaliauskas wrote:
> 
> I found the way to implement GetObject() with the first parameter only 
> (it is CoGetObject()). It seems, the function is equivalent 
> CreateObject() if only the second parameter is used. But I found no 
> info, how it can be implemented using both parameters...
> 

Please implement it. Let us see what way it behaves.
Also look into VB's InstanceOf() function. If both can be implemented,
all the good.

How we can retrieve names of the events given the dispid ?
Sometimes we need to implement events by names as in Xbase++.

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/OLE---Feature-Request-tp23697736p23723213.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Tue May 26 09:59:00 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue May 26 09:59:12 2009
Subject: Re[Harbour] [2]: SF.net SVN: harbour-project:[11104] trunk/harbour
In-Reply-To: <23723161.post@talk.nabble.com>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<173100328.20090522134457@tlen.pl>
	<20090522121122.GA2212@uran.home.aster.pl>
	<1486517337.20090526115433@tlen.pl>
	<4C8C519E-6E96-4B16-9F2B-443687164190@syenar.hu>
	<23723161.post@talk.nabble.com>
Message-ID: <77B335E9-6E9D-470B-A362-155BFCE7C1C8@syenar.hu>

Hi Pritpal,

> Viktor Szak?ts wrote:
>>
>> Here is an initial port of Superlib to Harbour:
>>
>
> Recently I had ported Superlib for one of old projects
> and did the same type of changes you are pointing out.
> I personally is not a user of this library so cannot
> comment on its in-depth analysis.
>
> Probbaly your port will be more optimized. For reasons
> of its license I never offered this lib to be a part of SVN.

Yeah, seems we need to upload it somewhere else or
open a separate SVN project for it. My interest isn't
so strong to do this, but maybe someone will do it.

Or, we may also contact the author for permission
or ask for re-licensing it. Also beyond my capacity,
but someone interested could try doing it.

It would be interesting to see your port, maybe we
could merge changes missing from mine.

Brgds,
Viktor

From sscc at mweb.co.za  Tue May 26 10:08:23 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue May 26 10:08:44 2009
Subject: Re[Harbour] [2]: SF.net SVN: harbour-project:[11104] trunk/harbour
In-Reply-To: <77B335E9-6E9D-470B-A362-155BFCE7C1C8@syenar.hu>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>	<173100328.20090522134457@tlen.pl>	<20090522121122.GA2212@uran.home.aster.pl>	<1486517337.20090526115433@tlen.pl>	<4C8C519E-6E96-4B16-9F2B-443687164190@syenar.hu>	<23723161.post@talk.nabble.com>
	<77B335E9-6E9D-470B-A362-155BFCE7C1C8@syenar.hu>
Message-ID: <4A1BF7D7.7070800@mweb.co.za>

Szak?ts Viktor wrote:

> Or, we may also contact the author for permission
> or ask for re-licensing it. Also beyond my capacity,
> but someone interested could try doing it.

I have a distant recollection that someone asked this and pissed him off mightily.

Regards
Alex
From harbour.01 at syenar.hu  Tue May 26 10:18:00 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue May 26 10:18:08 2009
Subject: Re[Harbour] [2]: SF.net SVN: harbour-project:[11104] trunk/harbour
In-Reply-To: <4A1BF7D7.7070800@mweb.co.za>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>	<173100328.20090522134457@tlen.pl>	<20090522121122.GA2212@uran.home.aster.pl>	<1486517337.20090526115433@tlen.pl>	<4C8C519E-6E96-4B16-9F2B-443687164190@syenar.hu>	<23723161.post@talk.nabble.com>
	<77B335E9-6E9D-470B-A362-155BFCE7C1C8@syenar.hu>
	<4A1BF7D7.7070800@mweb.co.za>
Message-ID: <F4C29202-B858-49D6-8B8B-7B909AC61A4A@syenar.hu>

>> Or, we may also contact the author for permission
>> or ask for re-licensing it. Also beyond my capacity,
>> but someone interested could try doing it.
>
> I have a distant recollection that someone asked this and pissed him  
> off mightily.

:) Thanks for this info, well, in this case I'll let
the .zip file on my site for a few days, then delete it
and forget about it, we have more important things to
do anyway. For those interested: take it while it's
there :) (it's a good example for hbmk2 + lib creation)

Brgds,
Viktor

From vouchcac at users.sourceforge.net  Tue May 26 11:03:09 2009
From: vouchcac at users.sourceforge.net (vouchcac@users.sourceforge.net)
Date: Tue May 26 11:04:08 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11141] trunk/harbour
Message-ID: <E1M8yBJ-0001Iy-J7@dn4whf1.ch3.sourceforge.com>

Revision: 11141
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11141&view=rev
Author:   vouchcac
Date:     2009-05-26 15:03:05 +0000 (Tue, 26 May 2009)

Log Message:
-----------
2009-05-26 07:50 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * contrib/hbwin/axcore.c
    + __XAXREGISTERHANDLER()
      An extension of __AXREGISTERHANDLER() where connection points are 
      enumerated instead of finding - many OLE's have more than one interface -
      a practical discovery. Mindaugas please check if it can be the default.

    + WIN_AXATLGETCONTROL() - Normalizing PRG calling convension.
    + WIN_AXCREATEWINDOW()  - Can be dropped later.
    + WIN_AXGETUNKNOWN()    - Useful in many situations.
    + WIN_AXSETVERB()       - ---^---
    + WIN_AXRELEASEOBJECT() - Experimental
      Note that these function are primarily aimed at making experiments
      via gtwvg/winsink.c interface and after testings can be moved or removed.

      /*  Mindaugas, I receive a GPF when terminating the appln.
          Also I cannot see that ISink is ever subject to garbase collection.
          And "count" never returns to 0. I must be missing something, but...
      */

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/axcore.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Tue May 26 11:13:05 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue May 26 11:13:13 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11141] trunk/harbour
In-Reply-To: <E1M8yBJ-0001Iy-J7@dn4whf1.ch3.sourceforge.com>
References: <E1M8yBJ-0001Iy-J7@dn4whf1.ch3.sourceforge.com>
Message-ID: <ECCD3BFB-3230-4B35-A9C3-5019AC15539E@syenar.hu>

Hi Pritpal,

May I ask to use real pointers instead of numeric
ones in hbwin? I've been trying to clean the code
from such usage and IMO for new code we should
definitely use the good practice only.

We have WIN_N2P() for conversion if some programs
need to pass numeric pointers. This way the problem
is also visible and apparent for the user, so he
can deal with fixing it, if we hide the logic and
accept numeric, the situation will never be normalized.

Brgds,
Viktor

On 2009.05.26., at 17:03, vouchcac@users.sourceforge.net wrote:

> Revision: 11141
>          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11141&view=rev
> Author:   vouchcac
> Date:     2009-05-26 15:03:05 +0000 (Tue, 26 May 2009)
>
> Log Message:
> -----------
> 2009-05-26 07:50 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>  * contrib/hbwin/axcore.c
>    + __XAXREGISTERHANDLER()
>      An extension of __AXREGISTERHANDLER() where connection points are
>      enumerated instead of finding - many OLE's have more than one  
> interface -
>      a practical discovery. Mindaugas please check if it can be the  
> default.
>
>    + WIN_AXATLGETCONTROL() - Normalizing PRG calling convension.
>    + WIN_AXCREATEWINDOW()  - Can be dropped later.
>    + WIN_AXGETUNKNOWN()    - Useful in many situations.
>    + WIN_AXSETVERB()       - ---^---
>    + WIN_AXRELEASEOBJECT() - Experimental
>      Note that these function are primarily aimed at making  
> experiments
>      via gtwvg/winsink.c interface and after testings can be moved  
> or removed.
>
>      /*  Mindaugas, I receive a GPF when terminating the appln.
>          Also I cannot see that ISink is ever subject to garbase  
> collection.
>          And "count" never returns to 0. I must be missing  
> something, but...
>      */
>
> Modified Paths:
> --------------
>    trunk/harbour/ChangeLog
>    trunk/harbour/contrib/hbwin/axcore.c
>
>
> This was sent by the SourceForge.net collaborative development  
> platform, the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue May 26 11:17:57 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue May 26 11:18:06 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11141] trunk/harbour
In-Reply-To: <ECCD3BFB-3230-4B35-A9C3-5019AC15539E@syenar.hu>
References: <E1M8yBJ-0001Iy-J7@dn4whf1.ch3.sourceforge.com>
	<ECCD3BFB-3230-4B35-A9C3-5019AC15539E@syenar.hu>
Message-ID: <C3EA2190-AD71-4844-A4FE-8B2BFFFD23D5@syenar.hu>

Well, no biggy it was only one such occurrence. I'll fix it in
next commit.

The other thing is that __XAXREGISTERHANDLER should be
__AXREGISTERHANDLER().

Plus I think we should drop __AXGETCONTROL() if we have
WIN_AXATLGETCONTROL().

Brgds,
Viktor


On 2009.05.26., at 17:13, Szak?ts Viktor wrote:

> Hi Pritpal,
>
> May I ask to use real pointers instead of numeric
> ones in hbwin? I've been trying to clean the code
> from such usage and IMO for new code we should
> definitely use the good practice only.
>
> We have WIN_N2P() for conversion if some programs
> need to pass numeric pointers. This way the problem
> is also visible and apparent for the user, so he
> can deal with fixing it, if we hide the logic and
> accept numeric, the situation will never be normalized.
>
> Brgds,
> Viktor
>
> On 2009.05.26., at 17:03, vouchcac@users.sourceforge.net wrote:
>
>> Revision: 11141
>>         http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11141&view=rev
>> Author:   vouchcac
>> Date:     2009-05-26 15:03:05 +0000 (Tue, 26 May 2009)
>>
>> Log Message:
>> -----------
>> 2009-05-26 07:50 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>> * contrib/hbwin/axcore.c
>>   + __XAXREGISTERHANDLER()
>>     An extension of __AXREGISTERHANDLER() where connection points are
>>     enumerated instead of finding - many OLE's have more than one  
>> interface -
>>     a practical discovery. Mindaugas please check if it can be the  
>> default.
>>
>>   + WIN_AXATLGETCONTROL() - Normalizing PRG calling convension.
>>   + WIN_AXCREATEWINDOW()  - Can be dropped later.
>>   + WIN_AXGETUNKNOWN()    - Useful in many situations.
>>   + WIN_AXSETVERB()       - ---^---
>>   + WIN_AXRELEASEOBJECT() - Experimental
>>     Note that these function are primarily aimed at making  
>> experiments
>>     via gtwvg/winsink.c interface and after testings can be moved  
>> or removed.
>>
>>     /*  Mindaugas, I receive a GPF when terminating the appln.
>>         Also I cannot see that ISink is ever subject to garbase  
>> collection.
>>         And "count" never returns to 0. I must be missing  
>> something, but...
>>     */
>>
>> Modified Paths:
>> --------------
>>   trunk/harbour/ChangeLog
>>   trunk/harbour/contrib/hbwin/axcore.c
>>
>>
>> This was sent by the SourceForge.net collaborative development  
>> platform, the world's largest Open Source development site.
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>

From bedipritpal at hotmail.com  Tue May 26 11:25:58 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue May 26 11:26:03 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11141] trunk/harbour
In-Reply-To: <C3EA2190-AD71-4844-A4FE-8B2BFFFD23D5@syenar.hu>
References: <E1M8yBJ-0001Iy-J7@dn4whf1.ch3.sourceforge.com>
	<ECCD3BFB-3230-4B35-A9C3-5019AC15539E@syenar.hu>
	<C3EA2190-AD71-4844-A4FE-8B2BFFFD23D5@syenar.hu>
Message-ID: <23725488.post@talk.nabble.com>


Hello Viktor


Viktor Szak?ts wrote:
> 
> Well, no biggy it was only one such occurrence. I'll fix it in
> next commit.
> 

Which one? I have used pointers everywhere.



> The other thing is that __XAXREGISTERHANDLER should be
> __AXREGISTERHANDLER().
> 
> Plus I think we should drop __AXGETCONTROL() if we have
> WIN_AXATLGETCONTROL().
> 

Yes these are the normal extensions. I am awaiting Mindaugas views here.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-11141--trunk-harbour-tp23725049p23725488.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dbtopas at dbtopas.lt  Tue May 26 11:35:53 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue May 26 11:34:36 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11141] trunk/harbour
In-Reply-To: <E1M8yBJ-0001Iy-J7@dn4whf1.ch3.sourceforge.com>
References: <E1M8yBJ-0001Iy-J7@dn4whf1.ch3.sourceforge.com>
Message-ID: <4A1C0C59.9030401@dbtopas.lt>

Hi,

>   * contrib/hbwin/axcore.c
>     + __XAXREGISTERHANDLER()
>       An extension of __AXREGISTERHANDLER() where connection points are 
>       enumerated instead of finding - many OLE's have more than one interface -
>       a practical discovery. Mindaugas please check if it can be the default.

Sorry, perhaps my OLE knowledge is too poor, but I totally do not 
understand that you want to do with this. OK, OLE can have more than one 
connection interface. But you do not even look at that kind of interface 
you've obtained. You return the first interface as IDispatch. This 
function can not be used even enumerate interfaces or obtain any 
interface except for the first.

In file system terminology, it sounds for me like... You need 
harbour.exe to compile .prg code. So, you do file enumeration of the 
folder and then try to use the first file (regardless filetype: .exe., 
.txt or .doc) as harbour compiler.


>     + WIN_AXGETUNKNOWN()    - Useful in many situations.

Where you can use IUnknown in Harbour?


>     + WIN_AXSETVERB()       - ---^---

Why SetVerb if method is DoVerb()? How can you pass MSG parameter to 
DoVerb method (it's input parameter, it should not be stuffed with 0 in 
general case)?


>     + WIN_AXRELEASEOBJECT() - Experimental
>       Note that these function are primarily aimed at making experiments
>       via gtwvg/winsink.c interface and after testings can be moved or removed.

I would include it into gtwvg, if this is the reason.


>       /*  Mindaugas, I receive a GPF when terminating the appln.
>           Also I cannot see that ISink is ever subject to garbase collection.
>           And "count" never returns to 0. I must be missing something, but...
>       */

Any self containing GPF sample?


Regards,
Mindaugas
From bruno.luciani at gmail.com  Tue May 26 12:27:28 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Tue May 26 12:27:34 2009
Subject: [Harbour] Set Color Foreground and Background in TQLabel and others
	?
Message-ID: <133778360905260927y4ef72c31ra0e87b27f63c3a0f@mail.gmail.com>

How to set colors in QT widgets using HBQT ?

The setpalette method , seems not exist

Any Help

Bruno
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090526/dd4ae82d/attachment.html
From vszakats at users.sourceforge.net  Tue May 26 14:06:56 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue May 26 14:07:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11142] trunk/harbour
Message-ID: <E1M913A-0001k7-Tb@3kljzd1.ch3.sourceforge.com>

Revision: 11142
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11142&view=rev
Author:   vszakats
Date:     2009-05-26 18:06:55 +0000 (Tue, 26 May 2009)

Log Message:
-----------
2009-05-26 20:05 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * INSTALL
     * Minor cleanups to prev.

   * contrib/hbwin/axcore.c
     * Minor formatting.
     % Variable scopes adjusted.
     % WIN_AXCREATEWINDOW() optimized.
     - Deleted ToOutDebug() stuff. Please use TRACE() subsystem for
       these parts.
     ; NOTE: I'm note sure we should have a WIN_AXCREATEWINDOW() function
             there. Rather, we should have a WAPI_CREATEWINDOWEX() function
             which serves the same purpose, but in a generic manner, also
             usable for AX purposes. Is there anything against this idea?

   * utils/hbformat/hbformat.prg
   * contrib/gtwvg/wvgclass.prg
   * contrib/gtwvg/wvgscrlb.prg
   * contrib/gtwvg/wvgdlg.prg
   * contrib/gtwvg/wvgpaint.prg
   * contrib/gtwvg/wvgdarea.prg
   * contrib/gtwvg/wvgmle.prg
   * contrib/gtwvg/wvglistb.prg
   * contrib/gtwvg/wvgtoolb.prg
   * contrib/gtwvg/wvgpushb.prg
   * contrib/gtwvg/wvgsle.prg
   * contrib/gtwvg/wvgtreev.prg
   * contrib/gtwvg/tests/demoxbp.prg
   * contrib/gtwvg/tests/demowvg.prg
   * contrib/gtwvg/wvgwnd.prg
   * contrib/gtwvg/wvgcrt.prg
   * contrib/gtwvg/wvgdatar.prg
   * contrib/gtwvg/wvgradio.prg
   * contrib/gtwvg/wvgsysw.prg
   * contrib/gtwvg/wvgmenub.prg
   * contrib/gtwvg/wvgphdlr.prg
   * contrib/gtwvg/wvgbitmp.prg
   * contrib/gtwvg/wvgcheck.prg
   * contrib/gtwvg/wvgstatb.prg
   * contrib/gtwvg/wvgstatc.prg
   * contrib/gtwvg/wvghtmlv.prg
   * contrib/gtwvg/wincback.prg
   * contrib/gtwvg/wvgtabpg.prg
   * contrib/gtwvg/wvg3stat.prg
   * contrib/gtwvg/wvgcombo.prg
     * Some formatting. (' -> " and #include lines)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/contrib/gtwvg/tests/demowvg.prg
    trunk/harbour/contrib/gtwvg/tests/demoxbp.prg
    trunk/harbour/contrib/gtwvg/wincback.prg
    trunk/harbour/contrib/gtwvg/wvg3stat.prg
    trunk/harbour/contrib/gtwvg/wvgbitmp.prg
    trunk/harbour/contrib/gtwvg/wvgcheck.prg
    trunk/harbour/contrib/gtwvg/wvgclass.prg
    trunk/harbour/contrib/gtwvg/wvgcombo.prg
    trunk/harbour/contrib/gtwvg/wvgcrt.prg
    trunk/harbour/contrib/gtwvg/wvgdarea.prg
    trunk/harbour/contrib/gtwvg/wvgdatar.prg
    trunk/harbour/contrib/gtwvg/wvgdlg.prg
    trunk/harbour/contrib/gtwvg/wvghtmlv.prg
    trunk/harbour/contrib/gtwvg/wvglistb.prg
    trunk/harbour/contrib/gtwvg/wvgmenub.prg
    trunk/harbour/contrib/gtwvg/wvgmle.prg
    trunk/harbour/contrib/gtwvg/wvgpaint.prg
    trunk/harbour/contrib/gtwvg/wvgphdlr.prg
    trunk/harbour/contrib/gtwvg/wvgpushb.prg
    trunk/harbour/contrib/gtwvg/wvgradio.prg
    trunk/harbour/contrib/gtwvg/wvgscrlb.prg
    trunk/harbour/contrib/gtwvg/wvgsle.prg
    trunk/harbour/contrib/gtwvg/wvgstatb.prg
    trunk/harbour/contrib/gtwvg/wvgstatc.prg
    trunk/harbour/contrib/gtwvg/wvgsysw.prg
    trunk/harbour/contrib/gtwvg/wvgtabpg.prg
    trunk/harbour/contrib/gtwvg/wvgtoolb.prg
    trunk/harbour/contrib/gtwvg/wvgtreev.prg
    trunk/harbour/contrib/gtwvg/wvgwnd.prg
    trunk/harbour/contrib/hbwin/Makefile
    trunk/harbour/contrib/hbwin/axcore.c
    trunk/harbour/utils/hbformat/hbformat.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bedipritpal at hotmail.com  Tue May 26 14:22:50 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue May 26 14:22:56 2009
Subject: [Harbour] Set Color Foreground and Background in TQLabel and
	others ?
In-Reply-To: <133778360905260927y4ef72c31ra0e87b27f63c3a0f@mail.gmail.com>
References: <133778360905260927y4ef72c31ra0e87b27f63c3a0f@mail.gmail.com>
Message-ID: <23728637.post@talk.nabble.com>


Hello Xavi, Marcos


Bruno Luciani wrote:
> 
> How to set colors in QT widgets using HBQT ?
> 
> The setpalette method , seems not exist
> 


Please respond to questions related with QT
as you two seems to have better understanding on the subject.
Reply even if you do not know anything, just to keep the 
sentiments in place.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Set-Color-Foreground-and-Background-in-TQLabel-and-others---tp23726652p23728637.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vszakats at users.sourceforge.net  Tue May 26 15:42:34 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue May 26 15:42:40 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11143] trunk/harbour
Message-ID: <E1M92Xi-0005wV-Gd@dn4whf1.ch3.sourceforge.com>

Revision: 11143
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11143&view=rev
Author:   vszakats
Date:     2009-05-26 19:42:33 +0000 (Tue, 26 May 2009)

Log Message:
-----------
2009-05-26 21:41 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbwin/hbwapi.h
  * contrib/hbwin/wapi_commctrl.c
    ! wapi_par_COLORREF() fixed to use hb_parnl(). COLORREF is a 32bit value.
    ! Rest of wapi_par_*() macros fixed to accept pointers only.
      If someone needs to pass numbers, use WIN_N2P() to convert them
      to pointers first.
    ! Corrected casts in wapi_par_WORD() and wapi_par_DWORD().
    ! Fixed wapi_ret_HRESULT() to use hb_retnl(). It's a 32bit status value.
    ! Fixed wapi_ret_COLORREF() to use hb_retnl().
    ! Fixed WAPI_TABCTRL_CREATE() for 64-bit mode, font type was wrong.
    ! Fixed WAPI_TABCTRL_CREATE() to return pointer instead of number.

  * contrib/hbwin/Makefile
    ! Reverted accidental edit in prev commit.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/Makefile
    trunk/harbour/contrib/hbwin/hbwapi.h
    trunk/harbour/contrib/hbwin/wapi_commctrl.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From alex_degarate at hotmail.com  Tue May 26 16:06:16 2009
From: alex_degarate at hotmail.com (Alejandro de Garate)
Date: Tue May 26 16:06:21 2009
Subject: [Harbour] constant array index optimization idea
Message-ID: <BLU145-W29389850A042EE5DD949ED85520@phx.gbl>


>The last nice source of ideas I found is Lua virtual machine. In Lua 
>5.0, VM was rewritten from stack based machine to register-based 
>machine. This increased performance about 20%. Instead of:
>PUSHLOCAL 1
>PUSHLOCAL 2
>ADD
>POPLOCAL 3
>they use:
>ADD 3 1 2


 

Parrot code (VM for Perl 6) also use register-based virtual machine. http://www.parrot.org/

 

see the next two paragraphs

 

--- quote

Registers and fundamental data types
The Parrot VM is register based. This means that, like a hardware CPU, it has a number of fast-access units of storage called registers. There are 4 types of register in Parrot: integers (I), numbers (N), strings (S) and PMCs (P). There are N of each of these, named I0,I1,..N0.., etc. Integer registers are the same size as a word on the machine Parrot is running on and number registers also map to a native floating point type. The amount of registers needed is determined per subroutine at compile-time.

 
PMCs
PMC stands for Polymorphic Container. PMCs represent any complex data structure or type, including aggregate data types (arrays, hash tables, etc). A PMC can implement its own behavior for arithmetic, logical and string operations performed on it, allowing for language-specific behavior to be introduced. PMCs can be built in to the Parrot executable or dynamically loaded when they are needed.

 

--- end quote

 

Maybe you or Przemek find some ideas to apply to Harbour

 

Alejandro

_________________________________________________________________
Show them the way! Add maps and directions to your party invites. 
http://www.microsoft.com/windows/windowslive/products/events.aspx
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090526/95cbec54/attachment.html
From druzus at acn.waw.pl  Tue May 26 19:13:10 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue May 26 19:04:04 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <18d502870905251311t2d82a1a4h739e42720397542@mail.gmail.com>
References: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>
	<20090525195619.GA18212@uran.home.aster.pl>
	<18d502870905251311t2d82a1a4h739e42720397542@mail.gmail.com>
Message-ID: <20090526231310.GA8455@uran.home.aster.pl>

On Mon, 25 May 2009, Szak?ts Viktor wrote:
> Thanks. What should we do in default builds? Can we safely
> pacify the warnings while keeping performance? Should we just
> safely suppress these warnings?

I'm afraid that at least in few places GCC can strip out some of our
code or at least change the order of some instructions and wrong binaries
will be created. It has to be fixed.
Please note that number of optimizations which use strict aliasing is
systematically growing up so even if I pacify the warnings for GCC4.4
it's possible that it won't help in GCC4.5 or newer.
So the only one clean solution is using code which operates on
bytes to create more complex numbers. It looks more complicated
but does not have to be much slower. It's even possible that it
will be faster then direct access with forced casting in some modern
CPUs. Some new CPUs which seems to work with wrong alignment also
generate exception when some complex numbers are read from memory
address with wrong alignment but default exception handler tries
to complete the operation using byte access. In such case explicit
byte access should be noticeable faster.

BTW have you tried to compare speedtst results for Harbour compiled
with and without HB_STRICT_ALIGNMENT macro?
The comparison should be done for -gc2 output. In -gc3 PCODE is
generated only for codeblocks.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue May 26 20:07:09 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Tue May 26 20:07:15 2009
Subject: [Harbour] GCC 4.4.0 warnings (only in GTWVG)
Message-ID: <18d502870905261707m625634a0w177ae4c9ddb1ba02@mail.gmail.com>

Hi Pritpal,

I'm getting these remaining warnings when compiled with GCC 4.4.0
(with HB_STRICT_ALIGMNENT):

---
../../wvgsink.c: In function 'HB_FUN_HB_AX_SETUPCONNECTIONPOINT':
../../wvgsink.c:516: warning: dereferencing pointer 'hSink.33' does
break strict-aliasing rules
../../wvgsink.c:546: note: initialized from here
../../wvgcuig.c: In function 'hb_gt_wvt_PaintGObjects':
../../wvgcuig.c:1554: warning: 'iTop' may be used uninitialized in this function
../../wvgcuig.c:1554: warning: 'iLeft' may be used uninitialized in
this function
../../wvgcuig.c:1554: warning: 'iBottom' may be used uninitialized in
this function
../../wvgcuig.c:1554: warning: 'iRight' may be used uninitialized in
this function
---

Could you look into these?

Brgds,
Viktor
From vszakats at users.sourceforge.net  Tue May 26 20:07:10 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue May 26 20:07:21 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11144] trunk/harbour
Message-ID: <E1M96fm-0001jJ-Nx@dn4whf1.ch3.sourceforge.com>

Revision: 11144
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11144&view=rev
Author:   vszakats
Date:     2009-05-27 00:07:09 +0000 (Wed, 27 May 2009)

Log Message:
-----------
2009-05-27 02:06 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbct/print.c
    + added PRINTSEND() support for Windows platform.
      (Borrowed from xhb, work of Pavel Tsarenko, with few minor changes)

  * contrib/gtwvg/wvgwin.c
  * contrib/gtwvg/wvgsink.c
    ! Fixed two new warnings after my recent commits.

  * contrib/hbwin/hbwapi.h
    * Tweaked previous commit. COLORREF and HRESULT now using
      hb_retnint() again to fix 32-bit numbers appearing as signed ones
      at .prg level.

  * source/rdd/usrrdd/rdds/arrayrdd.prg
    ; Added some patches recently committed to xhb:
    ! few fixes provided by Quique
    + Added AR_LOCK() function, but commented.
    ; NOTE: Francesco, would you mind reviewing these changes?

  * utils/hbmk2/hbmk2.prg
    * Minor formatting, comment added.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtwvg/wvgsink.c
    trunk/harbour/contrib/gtwvg/wvgwin.c
    trunk/harbour/contrib/hbct/print.c
    trunk/harbour/contrib/hbwin/hbwapi.h
    trunk/harbour/source/rdd/usrrdd/rdds/arrayrdd.prg
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bedipritpal at hotmail.com  Tue May 26 21:03:20 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue May 26 21:03:26 2009
Subject: [Harbour] GCC 4.4.0 warnings (only in GTWVG)
In-Reply-To: <18d502870905261707m625634a0w177ae4c9ddb1ba02@mail.gmail.com>
References: <18d502870905261707m625634a0w177ae4c9ddb1ba02@mail.gmail.com>
Message-ID: <23734214.post@talk.nabble.com>


Hello


Viktor Szak?ts wrote:
> 
> ../../wvgsink.c: In function 'HB_FUN_HB_AX_SETUPCONNECTIONPOINT':
> ../../wvgsink.c:516: warning: dereferencing pointer 'hSink.33' does
> break strict-aliasing rules
> 

Have no idea how to cast it.



> ../../wvgsink.c:546: note: initialized from here
> ../../wvgcuig.c: In function 'hb_gt_wvt_PaintGObjects':
> ../../wvgcuig.c:1554: warning: 'iTop' may be used uninitialized in this
> function
> 

Does iTop = 0, etc help ? 
If not, try ( shift declaration lower down the blocks as

      if( gObj->iState == GOBJ_OBJSTATE_ENABLED )
      {
         int iTop = 0, iLeft = 0, iBottom = 0, iRight = 0;

If still not, I have no idea how to pacify.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/GCC-4.4.0-warnings-%28only-in-GTWVG%29-tp23733709p23734214.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Tue May 26 21:15:32 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue May 26 21:15:42 2009
Subject: [Harbour] GCC 4.4.0 warnings (only in GTWVG)
In-Reply-To: <23734214.post@talk.nabble.com>
References: <18d502870905261707m625634a0w177ae4c9ddb1ba02@mail.gmail.com>
	<23734214.post@talk.nabble.com>
Message-ID: <DBA5FA8C-7614-4158-BFF5-C3E78DCD3E4F@syenar.hu>

>> ../../wvgsink.c: In function 'HB_FUN_HB_AX_SETUPCONNECTIONPOINT':
>> ../../wvgsink.c:516: warning: dereferencing pointer 'hSink.33' does
>> break strict-aliasing rules
>>
>
> Have no idea how to cast it.

I hope we can fix it, because this line isn't safe.
Is it need at all?

>> ../../wvgsink.c:546: note: initialized from here
>> ../../wvgcuig.c: In function 'hb_gt_wvt_PaintGObjects':
>> ../../wvgcuig.c:1554: warning: 'iTop' may be used uninitialized in  
>> this
>> function
>>
>
> Does iTop = 0, etc help ?
> If not, try ( shift declaration lower down the blocks as
>
>      if( gObj->iState == GOBJ_OBJSTATE_ENABLED )
>      {
>         int iTop = 0, iLeft = 0, iBottom = 0, iRight = 0;
>
> If still not, I have no idea how to pacify.

You have to make sure that each preceding branch will
assign some values to these variables. Currently there
are cases were they don't which results in random
behavior.

The easiest fix is to initialize them on declaration
with some default values.

Brgs,
Viktor

From vszakats at users.sourceforge.net  Tue May 26 21:21:07 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue May 26 21:21:13 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11145] trunk/harbour
Message-ID: <E1M97pL-0003aV-Pp@bj8yhf1.ch3.sourceforge.com>

Revision: 11145
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11145&view=rev
Author:   vszakats
Date:     2009-05-27 01:21:06 +0000 (Wed, 27 May 2009)

Log Message:
-----------
2009-05-27 03:16 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbver.ch
  * source/rtl/version.c
    + Added hb_Version( HB_VER_COMPILER_CPP ) which
      returns if the C compiler was used in C++ mode.
      Mainly added for HB_BUILDINFO() emulation, maybe it
      can be useful to set defaults in hbmk2, we will see.

  * contrib/xhb/Makefile
  + contrib/xhb/xhbver.prg
    + Added emulation of HB_BUILDINFO() xhb function.

  + contrib/xhb/xhbver.ch
    + Copied xhb's hbver.ch under this name.
      (borrowed from xhb, work of Andi Jahja)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/xhb/Makefile
    trunk/harbour/include/hbver.ch
    trunk/harbour/source/rtl/version.c

Added Paths:
-----------
    trunk/harbour/contrib/xhb/xhbver.ch
    trunk/harbour/contrib/xhb/xhbver.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bedipritpal at hotmail.com  Tue May 26 21:27:29 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue May 26 21:27:34 2009
Subject: [Harbour] GCC 4.4.0 warnings (only in GTWVG)
In-Reply-To: <DBA5FA8C-7614-4158-BFF5-C3E78DCD3E4F@syenar.hu>
References: <18d502870905261707m625634a0w177ae4c9ddb1ba02@mail.gmail.com>
	<23734214.post@talk.nabble.com>
	<DBA5FA8C-7614-4158-BFF5-C3E78DCD3E4F@syenar.hu>
Message-ID: <23734478.post@talk.nabble.com>


Hi

>I hope we can fix it, because this line isn't safe.
>Is it need at all?

Yes. As this value is used in HB_AX_SHUTDOWNCONNECTIONPOINT().
I will think other means.

>The easiest fix is to initialize them on declaration
>with some default values.

Oh, ok, will do in a while.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/GCC-4.4.0-warnings-%28only-in-GTWVG%29-tp23733709p23734478.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vszakats at users.sourceforge.net  Tue May 26 21:33:48 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue May 26 21:33:52 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11146] trunk/harbour
Message-ID: <E1M981c-0003ot-KA@bj8yhf1.ch3.sourceforge.com>

Revision: 11146
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11146&view=rev
Author:   vszakats
Date:     2009-05-27 01:33:47 +0000 (Wed, 27 May 2009)

Log Message:
-----------
2009-05-27 03:33 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbqt/generator/hbqtgen.prg
  * contrib/gtqtc/tests/demoqtc.prg
  * contrib/gtqtc/tests/wvtext.prg
  * contrib/gtwvg/tests/demowvg.prg
  * contrib/examples/uhttpd/uhttpd.prg
  * contrib/examples/terminal/trm_server.prg
  * contrib/examples/terminal/terminal.prg
  * contrib/examples/terminal/trm_appn.prg
  * contrib/examples/terminal/trm_client.prg
  * contrib/examples/hbwhat/winrbar.prg
    * #include '' -> #include ""

  * contrib/gtqtc/tests/wvtext.prg
    ! Fixed #include with mixed case filename.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/examples/hbwhat/winrbar.prg
    trunk/harbour/contrib/examples/terminal/terminal.prg
    trunk/harbour/contrib/examples/terminal/trm_appn.prg
    trunk/harbour/contrib/examples/terminal/trm_client.prg
    trunk/harbour/contrib/examples/terminal/trm_server.prg
    trunk/harbour/contrib/examples/uhttpd/uhttpd.prg
    trunk/harbour/contrib/gtqtc/tests/demoqtc.prg
    trunk/harbour/contrib/gtqtc/tests/wvtext.prg
    trunk/harbour/contrib/gtwvg/tests/demowvg.prg
    trunk/harbour/contrib/hbqt/generator/hbqtgen.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Tue May 26 21:59:48 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue May 26 21:59:56 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <20090526231310.GA8455@uran.home.aster.pl>
References: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>
	<20090525195619.GA18212@uran.home.aster.pl>
	<18d502870905251311t2d82a1a4h739e42720397542@mail.gmail.com>
	<20090526231310.GA8455@uran.home.aster.pl>
Message-ID: <6BE18A07-88EF-400F-BCBD-3F1B0757EBEE@syenar.hu>

Hi Przemek,

With GCC 4.4.0 the binaries got a bit larger when
using HB_STRICT_ALIGNMENT, but also measurably faster.

Built with 'hbmk2 speedtst.prg' (default -gc0)

HB_STRICT_ALIGNMENT: 38.25/39.11, 38.42/39.08
default            : 43.39/44.03, 43.47/44.03

Brgds,
Viktor

On 2009.05.27., at 1:13, Przemyslaw Czerpak wrote:

> On Mon, 25 May 2009, Szak?ts Viktor wrote:
>> Thanks. What should we do in default builds? Can we safely
>> pacify the warnings while keeping performance? Should we just
>> safely suppress these warnings?
>
> I'm afraid that at least in few places GCC can strip out some of our
> code or at least change the order of some instructions and wrong  
> binaries
> will be created. It has to be fixed.
> Please note that number of optimizations which use strict aliasing is
> systematically growing up so even if I pacify the warnings for GCC4.4
> it's possible that it won't help in GCC4.5 or newer.
> So the only one clean solution is using code which operates on
> bytes to create more complex numbers. It looks more complicated
> but does not have to be much slower. It's even possible that it
> will be faster then direct access with forced casting in some modern
> CPUs. Some new CPUs which seems to work with wrong alignment also
> generate exception when some complex numbers are read from memory
> address with wrong alignment but default exception handler tries
> to complete the operation using byte access. In such case explicit
> byte access should be noticeable faster.
>
> BTW have you tried to compare speedtst results for Harbour compiled
> with and without HB_STRICT_ALIGNMENT macro?
> The comparison should be done for -gc2 output. In -gc3 PCODE is
> generated only for codeblocks.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vszakats at users.sourceforge.net  Tue May 26 22:46:50 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue May 26 22:46:54 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11147] trunk/harbour
Message-ID: <E1M99AI-0004B8-0d@dn4whf1.ch3.sourceforge.com>

Revision: 11147
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11147&view=rev
Author:   vszakats
Date:     2009-05-27 02:46:49 +0000 (Wed, 27 May 2009)

Log Message:
-----------
2009-05-27 04:42 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbsetup.h
  * source/common/hbver.c
    + Moved CPU detection to core header. Introduced
      HB_CPU_* macros. Now they can be used to branch code
      by CPU type.

  * contrib/rddads/adsmgmnt.c
    + Added my copyright.

  * contrib/hbwin/wapi_commctrl.c
  * contrib/hbwin/wapi_winbase.c
  * contrib/hbwin/wapi_winuser.c
    ! Fixed remaining hb_parc() vs hb_parcx() usages.
    % WAPI_TABCTRL_CREATE() further simplified.
      Please review, it may be wrong.

  * utils/hbmk2/hbmk2.prg
    * Minor internal change.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/wapi_commctrl.c
    trunk/harbour/contrib/hbwin/wapi_winbase.c
    trunk/harbour/contrib/hbwin/wapi_winuser.c
    trunk/harbour/contrib/rddads/adsmgmnt.c
    trunk/harbour/include/hbsetup.h
    trunk/harbour/source/common/hbver.c
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Tue May 26 23:25:06 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue May 26 23:25:11 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11148] trunk/harbour
Message-ID: <E1M99lK-0007l4-S0@74yxhf1.ch3.sourceforge.com>

Revision: 11148
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11148&view=rev
Author:   druzus
Date:     2009-05-27 03:25:05 +0000 (Wed, 27 May 2009)

Log Message:
-----------
2009-05-27 05:34 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/harbour.spec
  * harbour/mpkg_tgz.sh
    + added hbformat

  * harbour/include/hbdefs.h
  * harbour/include/hbapi.h
  * harbour/source/common/hbarch.c
    * redefined macros used to store/retrieve integer and double values
      to/from byte arrays in little and big endian order.
      Now GCC uses inline functions which are hardly optimized by compiler
      giving on x86 machines the same code as direct casting (with the
      exception to march=i686 where putting double value forces strict
      alignment to avoid hidden CPU exception) but they respect strict
      aliasing rules. It also means that now GCC builds always respect
      strict alignment even if HB_STRICT_ALIGNMENT macro is not set.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/harbour.spec
    trunk/harbour/include/hbapi.h
    trunk/harbour/include/hbdefs.h
    trunk/harbour/mpkg_tgz.sh
    trunk/harbour/source/common/hbarch.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From kadziola at tlen.pl  Wed May 27 04:24:25 2009
From: kadziola at tlen.pl (Jaroslaw Kadziola)
Date: Wed May 27 04:24:47 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104]  trunk/harbour
In-Reply-To: <18d502870905260551n2fe9919dide100bf68008e019@mail.gmail.com>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<173100328.20090522134457@tlen.pl>
	<20090522121122.GA2212@uran.home.aster.pl>
	<1486517337.20090526115433@tlen.pl>
	<4C8C519E-6E96-4B16-9F2B-443687164190@syenar.hu>
	<1005233192.20090526144629@tlen.pl>
	<18d502870905260551n2fe9919dide100bf68008e019@mail.gmail.com>
Message-ID: <1604120678.20090527102425@tlen.pl>

Hi Viktor,


>> SV> Here is an initial port of Superlib to Harbour:
>>
>> SV> http://www.syenar.hu/harbour/hbsuper.zip
>> SV> [ unzip to contrib and build it the usual way ]
>>
>> Thanks so much. Will try build tomorrow.

VS> Okay.

When i'm trying build hbsuper.lib with msys + mingw i get :

$ hbmk2 hbsuper.hbm
hbmk: Processing configuration: C:\msys\1.0\hb-mingwarm\bin\hbmk.cfg                                                          
hbmk: Compiling Harbour sources...                                                                                            
Warning W0001  Redefinition or duplicate definition of #define __PLATFORM__WINDOWS

No code generated.
hbmk: Error: Running Harbour compiler. 1                                                                                      
-n1 curd.prg r_hcode.prg r_printr.prg r_quikr.prg r_report.prg s_1label.prg s_2dbrz.prg s_aaskip.prg s_abort.prg s_achoi.prg
s_addsp.prg s_aextra.prg s_aftype.prg s_akount.prg s_aleng.prg s_allbut.prg s_amsg.prg s_amsort.prg s_amstat.prg
s_append.prg s_appt.prg s_arrang.prg s_ascii.prg s_astats.prg s_at2c.prg s_att.prg
s_bdelim.prg s_begend.prg s_bigel.prg s_blanks.prg s_bldar.prg s_bldbf.prg s_bldndx.prg s_bom.prg s_boxes.prg
s_boyear.prg s_brsdf.prg s_build.prg s_bungde.prg s_bungee.prg s_bxx.prg s_calck.prg s_calcvw.prg s_centr.prg s_
clab.prg s_clrfun.prg s_cls.prg s_colpik.prg s_copy.prg s_copyf.prg s_crunch.prg s_ctrlw.prg s_cvtdel.prg
s_datcal.prg s_datek.prg s_datvw.prg s_daysin.prg s_dbarr.prg s_dbstat.prg s_delar.prg s_delet.prg s_doyear.prg
s_dpops.prg s_dtdiff.prg s_dtow.prg s_dup.prg s_duph.prg s_edit.prg s_editm.prg s_editmv.prg s_edpict.prg s_endsw.prg
s_enhan.prg s_evalq.prg s_export.prg s_fform.prg s_fields.prg s_filein.prg s_filer.prg s_fillar.prg s_fm2n.prg
s_fm2p.prg s_forml.prg s_formu.prg s_freadl.prg s_freq.prg s_fulld.prg s_gened.prg s_genva.prg s_getcal.prg
s_getdat.prg s_getdfp.prg s_getkey.prg s_getman.prg s_global.prg s_globr.prg s_hardc.prg s_help.prg
s_helpm.prg s_hplas.prg s_init.prg s_inlook.prg s_isload.prg s_ispart.prg s_isvalf.prg s_kbdesc.prg
s_list.prg s_ljust.prg s_lotmen.prg s_mailm.prg s_makeb.prg s_mchoi.prg s_meas.prg s_menuv.prg s_messyn.prg
s_mfld.prg s_mfldt.prg s_mmemo.prgs_modify.prg s_moose.prg s_msg.prg s_mulmyn.prg s_nbr2st.prg s_nkey.prg
s_notdup.prg s_nozdiv.prg s_old.prg s_oldmod.prg s_oner.prg s_openin.prg s_paths.prg s_pcsel.prg s_picknd.prg
s_plsw.prg s_popdir.prg s_popex.prg s_popord.prg s_popr.prg s_popupk.prg s_popvw.prg s_pread.prg s_prnpor.prg
s_prnt.prg s_prntf.prg s_prog.prg s_proper.prg s_pseek.prg s_pulldn.prg s_purgem.prg s_query.prg s_readrs.prg
s_rjust.prg s_rmenu2.prg s_rread.prg s_saddr.prg s_scmod.prg s_screen.prg s_scroll.prg s_search.prg s_setcen.prg
s_setcol.prg s_setdat.prg s_setex.prg s_setkey.prg s_sfilok.prg s_smal.prg s_smalk.prg s_smgets.prg s_snetu.prg
s_sreclo.prgs_stan.prg s_starts.prg s_stod.prg s_stretc.prg s_strpat.prg s_strpul.prg s_subplu.prg s_sumav.prg
s_super.prg s_tabmen.prg s_tag.prg s_taga.prg s_tagam.prg s_tagf.prg s_time.prg s_todo.prg s_trueva.prg s_unbox.prg
s_uniqf.prg s_unsel.prgs_var2.prg s_varlen.prg s_viewp.prg s_vmemo.prg s_vview.prg s_wild.prg s_womon.prg
s_woyear.prg s_writef.prg s_xbxx.prg -q0 -w1 -es2 -gc0 -l -o.hbmk\wce\mingwarm\ -iC:/msys/1.0/hb-mingwarm/include
-undef:__PLATFORM__WINDOWS -D__PLATFORM__WINDOWS -D__PLATFORM__WINCE


-- 
Regards,
 Jaroslaw Kadziola

From harbour.01 at syenar.hu  Wed May 27 04:50:01 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May 27 04:50:07 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104] 
	trunk/harbour
In-Reply-To: <1604120678.20090527102425@tlen.pl>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<173100328.20090522134457@tlen.pl>
	<20090522121122.GA2212@uran.home.aster.pl>
	<1486517337.20090526115433@tlen.pl>
	<4C8C519E-6E96-4B16-9F2B-443687164190@syenar.hu>
	<1005233192.20090526144629@tlen.pl>
	<18d502870905260551n2fe9919dide100bf68008e019@mail.gmail.com>
	<1604120678.20090527102425@tlen.pl>
Message-ID: <18d502870905270150n1a15eca3p17d8f1f791a85349@mail.gmail.com>

> s_woyear.prg s_writef.prg s_xbxx.prg -q0 -w1 -es2 -gc0 -l -o.hbmk\wce\mingwarm\ -iC:/msys/1.0/hb-mingwarm/include
> -undef:__PLATFORM__WINDOWS -D__PLATFORM__WINDOWS -D__PLATFORM__WINCE

I'm not sure what's happening here, I've tried this from the command line
and it didn't give the error, so I guess it has something to do with some
properties of the embedded compiler. Or maybe I'm missing something
obvious.

Przemek, do you have an idea what this could be or how to prevent it?

I'll try to create a workaround until then.

Brgds,
Viktor
From M.Horodyski at pzuzycie.com.pl  Wed May 27 04:57:17 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Wed May 27 04:57:25 2009
Subject: [Harbour] exit with switch and for each
In-Reply-To: <20090525193943.GA2356@uran.home.aster.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C95023D0DC3@PINK.zycie.pzu>

>-----Original Message-----
>From: Przemyslaw Czerpak [mailto:druzus@acn.waw.pl] 
>Sent: Monday, May 25, 2009 9:40 PM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] exit with switch and for each
>
>On Sat, 23 May 2009, Vailton Renato wrote:

[...]

>The same is for many other constructions, f.e.:
>
>   l := 10
>   while f1( l )
>      l *= 10
>      for i := 1 to 100
>         if f2(i)
>            exit  // but I want to exit from WHILE not only from FOR
>         endif
>      next
>   enddo
>
>You can write the same also about nest statments like:
>
>   for i := 1 to 10
>      for j := 1 to 20
>         if f( i, j )
>            exit  // but I want to exit from external FOR i := 
>... loop too
>         endif
>      next
>   next
>
>In short words you are requesting about GOTO instruction which 
>introduces to compiler serious limitations or at least 
>additional code necessary to make it working correctly with 
>statements which needs to allocate and then free some 
>resources. It's rather bad idea.

This is not comparable. Exit was escape from loop without control
expression, loop with control. 
Now, when mixed syntax switch and any while/for we still heve LOOP
inside switch, but EXIT no longer.
EXIT in the sense : escape from a loop.
In this case word Exit important changes.

My example for workaround :

Local lExit := .f., i := 1

While !lExit
 ... // designate i 
 Switch i
 Case 2
   ... // designate lExit
   Loop
 Case 3
    ...
    Exit 
 Case 4
   ....
 End
End

Hm, maby this is ok.. In C is to only break and continue.

Regards,
Marek Horodyski
From harbour.01 at syenar.hu  Wed May 27 05:30:48 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed May 27 05:30:59 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <6BE18A07-88EF-400F-BCBD-3F1B0757EBEE@syenar.hu>
References: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>
	<20090525195619.GA18212@uran.home.aster.pl>
	<18d502870905251311t2d82a1a4h739e42720397542@mail.gmail.com>
	<20090526231310.GA8455@uran.home.aster.pl>
	<6BE18A07-88EF-400F-BCBD-3F1B0757EBEE@syenar.hu>
Message-ID: <43D8504C-A58B-4282-87E6-B7D83BF5A637@syenar.hu>

Hi Przemek,

I've retested after your change, results below
(two runs each), plus attached:

new (r11148):
HB_STRICT_ALIGNMENT: 38.83/39.28, 38.89/39.36
default            : 39.72/40.14, 39.66/40.20

old (r11143/r11144):
HB_STRICT_ALIGNMENT: 38.52/39.01, 38.52/39.11
default            : 43.14/43.63, 42.92/43.66

After your change all warnings disappeared in
default mode, and performance got better with
same (little smaller) binary sizes.

Speed with HB_STRICT_ALIGNMENT is a little bit
better with the new rev (and without size growth),
so shouldn't we make it the default? if yes, on
what conditions?

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: results.zip
Type: application/zip
Size: 5092 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090527/934e36ce/results.zip
-------------- next part --------------


On 2009.05.27., at 3:59, Szak?ts Viktor wrote:

> Hi Przemek,
>
> With GCC 4.4.0 the binaries got a bit larger when
> using HB_STRICT_ALIGNMENT, but also measurably faster.
>
> Built with 'hbmk2 speedtst.prg' (default -gc0)
>
> HB_STRICT_ALIGNMENT: 38.25/39.11, 38.42/39.08
> default            : 43.39/44.03, 43.47/44.03
>
> Brgds,
> Viktor
>
> On 2009.05.27., at 1:13, Przemyslaw Czerpak wrote:
>
>> On Mon, 25 May 2009, Szak?ts Viktor wrote:
>>> Thanks. What should we do in default builds? Can we safely
>>> pacify the warnings while keeping performance? Should we just
>>> safely suppress these warnings?
>>
>> I'm afraid that at least in few places GCC can strip out some of our
>> code or at least change the order of some instructions and wrong  
>> binaries
>> will be created. It has to be fixed.
>> Please note that number of optimizations which use strict aliasing is
>> systematically growing up so even if I pacify the warnings for GCC4.4
>> it's possible that it won't help in GCC4.5 or newer.
>> So the only one clean solution is using code which operates on
>> bytes to create more complex numbers. It looks more complicated
>> but does not have to be much slower. It's even possible that it
>> will be faster then direct access with forced casting in some modern
>> CPUs. Some new CPUs which seems to work with wrong alignment also
>> generate exception when some complex numbers are read from memory
>> address with wrong alignment but default exception handler tries
>> to complete the operation using byte access. In such case explicit
>> byte access should be noticeable faster.
>>
>> BTW have you tried to compare speedtst results for Harbour compiled
>> with and without HB_STRICT_ALIGNMENT macro?
>> The comparison should be done for -gc2 output. In -gc3 PCODE is
>> generated only for codeblocks.
>>
>> best regards,
>> Przemek
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>

From harbour.01 at syenar.hu  Wed May 27 06:45:56 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May 27 06:46:04 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11141] trunk/harbour
In-Reply-To: <4A1C0C59.9030401@dbtopas.lt>
References: <E1M8yBJ-0001Iy-J7@dn4whf1.ch3.sourceforge.com>
	<4A1C0C59.9030401@dbtopas.lt>
Message-ID: <18d502870905270345i24785ac2u35bf8aff4f4e048d@mail.gmail.com>

Hi All,

IMO, these new functions should be moved away from hbwin,
until we clear up these issues. These functions are nowhere
used inside Harbour (no in any contribs) so it's very difficult for
anyone on the list to decide about their usefulness or to even
try / test them.

Adding such complicated function just for the sake of having
them is IMO pointless. Until we find a fitting place for them and
clear them up, we can move them to GTWVG with slightly
different names.

My question is whether to rename__AXGETCONTROL() to
WIN_AXATLGETCONTROL() ? Is this such a function which
users will want to (and can safely) use in their final apps?
If the return value is an obscure one, useful only for AX extensions
dealing with internals, I think we should keep the internal name.

Brgds,
Viktor

On Tue, May 26, 2009 at 5:35 PM, Mindaugas Kavaliauskas
<dbtopas@dbtopas.lt> wrote:
> Hi,
>
>> ?* contrib/hbwin/axcore.c
>> ? ?+ __XAXREGISTERHANDLER()
>> ? ? ?An extension of __AXREGISTERHANDLER() where connection points are
>> ?enumerated instead of finding - many OLE's have more than one interface -
>> ? ? ?a practical discovery. Mindaugas please check if it can be the
>> default.
>
> Sorry, perhaps my OLE knowledge is too poor, but I totally do not understand
> that you want to do with this. OK, OLE can have more than one connection
> interface. But you do not even look at that kind of interface you've
> obtained. You return the first interface as IDispatch. This function can not
> be used even enumerate interfaces or obtain any interface except for the
> first.
>
> In file system terminology, it sounds for me like... You need harbour.exe to
> compile .prg code. So, you do file enumeration of the folder and then try to
> use the first file (regardless filetype: .exe., .txt or .doc) as harbour
> compiler.
>
>
>> ? ?+ WIN_AXGETUNKNOWN() ? ?- Useful in many situations.
>
> Where you can use IUnknown in Harbour?
>
>
>> ? ?+ WIN_AXSETVERB() ? ? ? - ---^---
>
> Why SetVerb if method is DoVerb()? How can you pass MSG parameter to DoVerb
> method (it's input parameter, it should not be stuffed with 0 in general
> case)?
>
>
>> ? ?+ WIN_AXRELEASEOBJECT() - Experimental
>> ? ? ?Note that these function are primarily aimed at making experiments
>> ? ? ?via gtwvg/winsink.c interface and after testings can be moved or
>> removed.
>
> I would include it into gtwvg, if this is the reason.
>
>
>> ? ? ?/* ?Mindaugas, I receive a GPF when terminating the appln.
>> ? ? ? ? ?Also I cannot see that ISink is ever subject to garbase
>> collection.
>> ? ? ? ? ?And "count" never returns to 0. I must be missing something,
>> but...
>> ? ? ?*/
>
> Any self containing GPF sample?
>
>
> Regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From itamarlins at bol.com.br  Wed May 27 06:56:53 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Wed May 27 06:57:56 2009
Subject: [Harbour] PrintFileRaw
Message-ID: <gvj6ar$216$1@ger.gmane.org>

Hi!
This part of my code is working, but returns this error.

 nRet := PrintFileRaw(cPrint,cArq,'Pedido') //return -2 but run ok :-(
 if nRet < 1
    cMsg := 'Erro Imprimindo: '
   SWITCH nRet
      CASE -1
         cMsg += "Invalid parameters passed to function" ; EXIT
      CASE -2
         cMsg += "WinAPI OpenPrinter() call failed"      ; EXIT
      CASE -3
         cMsg += "WinAPI StartDocPrinter() call failed"  ; EXIT
      CASE -4
         cMsg += "WinAPI StartPagePrinter() call failed" ; EXIT
      CASE -5
         cMsg += "WinAPI malloc() of memory failed"      ; EXIT
      CASE -6
         cMsg += "Arquivo " + cArq + " no Localizado"   ; EXIT
      END
  MsgInfo(cMsg) //WinAPI OpenPrinter() call failed
 EndIf

Regards,
Itamar M. Lins Jr. 



From vszakats at users.sourceforge.net  Wed May 27 07:15:07 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May 27 07:15:12 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11149] trunk/harbour
Message-ID: <E1M9H6B-0005zW-Fe@74yxhf1.ch3.sourceforge.com>

Revision: 11149
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11149&view=rev
Author:   vszakats
Date:     2009-05-27 11:15:06 +0000 (Wed, 27 May 2009)

Log Message:
-----------
2009-05-27 12:59 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    % -undef/-D Harbour options will be reduced in cross-compilation
      scenarios. If a __PLATFORM__* value appears as both -undef and
      -D it will be omitted. This results in smaller command line,
      plus works around this warning:
      'Warning W0001  Redefinition or duplicate definition of #define __PLATFORM__WINDOWS'
      when using the embedded compiler (doesn't seem to happen with
      external compiler).
    + Added autodetection for mingw64 and mingwarm compilers. It should
      now be enough to use -arch=wce on the command line to initiate a
      WinCE cross-build if the compiler is setup in the path or using
      the embedded installation. So it's recommended to use -arch=wce
      instead of -arch=mingwarm from now on. For mingw64 builds, no
      extra switch is needed, if in the PATH, it will be autodetected.
    ! Added Harbour command to Harbour command line shown in case of
      error.

  * contrib/gtwvg/wvgcuig.c
    ! Fixed one GCC warning. I'm not sure if this is a correct one,
      my only goal was to make the warning disappear and to define
      a previously undefined case.
    ; TOFIX: This warning still remains, and indicates unsafe code:
             wvgsink.c:516: warning: dereferencing pointer 'hSink.33' does break strict-aliasing rules

  * contrib/gtwvg/tests/demoxbp.prg
  * contrib/gtwvg/tests/demowvg.prg
    ! Fixed hard-wired paths, so that now some more samples
      work regardless of Harbour installation dir.
    ; NOTE: Never use hard-wired absolute paths inside any Harbour
            component. We now have hb_DirBase(), please make use of it.
    ; NOTE: For me most of the samples still don't work, AX toolbar icons
            don't appear, and most of the AX samples fail with an unclosable 
            window.

  * contrib/hbwin/axcore.c
  * contrib/gtwvg/wvgsink.c
    * Moved recently added extra AX functions to GTWVG.
    * Kept optimized, hbwin version of HB_AX_ATLCREATEWINDOW().
    * Others renamed and commented:
      WIN_AXGETUNKNOWN() -> WVG_AXGETUNKNOWN()
      WIN_AXSETVERB      -> WVG_AXDOVERB()
    ! HB_AX_ATLSETVERB() now accepts HWND pointers, too.
    ! HB_AX_ATLAXGETCONTROL() now accepts HWND pointers, too.
    ; TOFIX: GTWVG uses HB_AX_* prefix to denote AX function, while
             these should be named WVG_AX*().
    ; TODO: Probably the full content, or at least the universally
            useful portion of wvgsink.c should eventually go to hbwin,
            but all these functions need further cleanups,
            and they also have to be renamed. I don't know what we
            should stay compatible with so it's difficult to make
            any moves. Some test code showing the usefulness of
            these function would be probably help.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtwvg/tests/demowvg.prg
    trunk/harbour/contrib/gtwvg/tests/demoxbp.prg
    trunk/harbour/contrib/gtwvg/wvgcuig.c
    trunk/harbour/contrib/gtwvg/wvgsink.c
    trunk/harbour/contrib/hbwin/axcore.c
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dbtopas at dbtopas.lt  Wed May 27 07:19:41 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed May 27 07:18:25 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11141] trunk/harbour
In-Reply-To: <18d502870905270345i24785ac2u35bf8aff4f4e048d@mail.gmail.com>
References: <E1M8yBJ-0001Iy-J7@dn4whf1.ch3.sourceforge.com>	<4A1C0C59.9030401@dbtopas.lt>
	<18d502870905270345i24785ac2u35bf8aff4f4e048d@mail.gmail.com>
Message-ID: <4A1D21CD.2090606@dbtopas.lt>

Hi,


> My question is whether to rename__AXGETCONTROL() to
> WIN_AXATLGETCONTROL() ? Is this such a function which
> users will want to (and can safely) use in their final apps?
> If the return value is an obscure one, useful only for AX extensions
> dealing with internals, I think we should keep the internal name.

In current code:
1) __AXGETCONTROL(), __OLECREATEOBJECT() and __OLEGETOBJECT() return 
collectible IDispatch pointer;
2) WIN_AxGetControl(), WIN_OleCreateObject() and 
WIN_OleGetActiveObject() return object.

So, it would be nice to have a compatible naming scheme for OLE and AX. 
If you feel, you gonna use __AXGETOBJECT() in final applications, feel 
free to rename.


Regards,
Mindaugas
From harbour.01 at syenar.hu  Wed May 27 07:21:40 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed May 27 07:21:49 2009
Subject: [Harbour] PrintFileRaw
In-Reply-To: <gvj6ar$216$1@ger.gmane.org>
References: <gvj6ar$216$1@ger.gmane.org>
Message-ID: <EAEA62E3-3A36-4F55-8E59-8B9A90517203@syenar.hu>

Hi Itamar,

It works here. Are you sure the printer name is a valid one?

Brgds,
Viktor

On 2009.05.27., at 12:56, Itamar Lins wrote:

> Hi!
> This part of my code is working, but returns this error.
>
> nRet := PrintFileRaw(cPrint,cArq,'Pedido') //return -2 but run ok :-(
> if nRet < 1
>    cMsg := 'Erro Imprimindo: '
>   SWITCH nRet
>      CASE -1
>         cMsg += "Invalid parameters passed to function" ; EXIT
>      CASE -2
>         cMsg += "WinAPI OpenPrinter() call failed"      ; EXIT
>      CASE -3
>         cMsg += "WinAPI StartDocPrinter() call failed"  ; EXIT
>      CASE -4
>         cMsg += "WinAPI StartPagePrinter() call failed" ; EXIT
>      CASE -5
>         cMsg += "WinAPI malloc() of memory failed"      ; EXIT
>      CASE -6
>         cMsg += "Arquivo " + cArq + " n?o Localizado"   ; EXIT
>      END
>  MsgInfo(cMsg) //WinAPI OpenPrinter() call failed
> EndIf
>
> Regards,
> Itamar M. Lins Jr.
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vszakats at users.sourceforge.net  Wed May 27 07:23:37 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May 27 07:23:43 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11150] trunk/harbour
Message-ID: <E1M9HEP-00068V-Ms@74yxhf1.ch3.sourceforge.com>

Revision: 11150
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11150&view=rev
Author:   vszakats
Date:     2009-05-27 11:23:36 +0000 (Wed, 27 May 2009)

Log Message:
-----------
2009-05-27 13:23 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbwin/win_prn2.c
    * Cleaned hb_parcx() vs. hb_parc() usage in one function.
      (hb_parcx() is only needed if there is no preceding HB_ISCHAR()
      check. If there is hb_parc() will also always return a valid
      pointer).

  + contrib/hbwin/tests/testprn2.prg
    + Added raw printing test.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/win_prn2.c

Added Paths:
-----------
    trunk/harbour/contrib/hbwin/tests/testprn2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From niki at synel.co.il  Wed May 27 07:24:41 2009
From: niki at synel.co.il (Chen Kedem)
Date: Wed May 27 07:24:50 2009
Subject: [Harbour] hbformat a bit too eager to convert files
Message-ID: <1A07FEDC778C3E4AA417F089511F859C163A444163@Mail-yoq.SYNEL-COMPANY.LTD>

Was looking at hbformat.exe (r11148 bcc32)
and trying to see if there is a command line help
I executed the following in the harbour bin directory:

hbformat ?

The eager program started converting ALL files in that
directory, did that very quick (before I had the chance
to stopped it), and stopped only when it choked on its
own EXE and exit with an RTE.

Is there an option to make the program more selective
on its file selection?


  Chen.
From harbour.01 at syenar.hu  Wed May 27 07:25:43 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed May 27 07:25:51 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11141] trunk/harbour
In-Reply-To: <4A1D21CD.2090606@dbtopas.lt>
References: <E1M8yBJ-0001Iy-J7@dn4whf1.ch3.sourceforge.com>	<4A1C0C59.9030401@dbtopas.lt>
	<18d502870905270345i24785ac2u35bf8aff4f4e048d@mail.gmail.com>
	<4A1D21CD.2090606@dbtopas.lt>
Message-ID: <D0437EBF-2B92-470C-ACE3-19FED00E494F@syenar.hu>

>> My question is whether to rename__AXGETCONTROL() to
>> WIN_AXATLGETCONTROL() ? Is this such a function which
>> users will want to (and can safely) use in their final apps?
>> If the return value is an obscure one, useful only for AX extensions
>> dealing with internals, I think we should keep the internal name.
>
> In current code:
> 1) __AXGETCONTROL(), __OLECREATEOBJECT() and __OLEGETOBJECT() return  
> collectible IDispatch pointer;
> 2) WIN_AxGetControl(), WIN_OleCreateObject() and  
> WIN_OleGetActiveObject() return object.
>
> So, it would be nice to have a compatible naming scheme for OLE and  
> AX. If you feel, you gonna use __AXGETOBJECT() in final  
> applications, feel free to rename.

Me definitely not. I stay away from ActiveX, it was rather a
generic question. But I understand perfectly what you mean,
and I agree with your concept.

I've already committed accordingly.

Brgds,
Viktor

From itamarlins at bol.com.br  Wed May 27 07:35:29 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Wed May 27 07:36:32 2009
Subject: [Harbour] Re: PrintFileRaw
References: <gvj6ar$216$1@ger.gmane.org>
	<EAEA62E3-3A36-4F55-8E59-8B9A90517203@syenar.hu>
Message-ID: <gvj8j7$96c$1@ger.gmane.org>

But it works here too, and returns this erro.-2 should not be running.

Regards,
Itamar M. Lins Jr.

"Szakts Viktor" <harbour.01@syenar.hu> 
escreveu na mensagem news:EAEA62E3-3A36-4F55-8E59-8B9A90517203@syenar.hu...
Hi Itamar,

It works here. Are you sure the printer name is a valid one?

Brgds,
Viktor

On 2009.05.27., at 12:56, Itamar Lins wrote:

> Hi!
> This part of my code is working, but returns this error.
>
> nRet := PrintFileRaw(cPrint,cArq,'Pedido') //return -2 but run ok :-(
> if nRet < 1
>    cMsg := 'Erro Imprimindo: '
>   SWITCH nRet
>      CASE -1
>         cMsg += "Invalid parameters passed to function" ; EXIT
>      CASE -2
>         cMsg += "WinAPI OpenPrinter() call failed"      ; EXIT
>      CASE -3
>         cMsg += "WinAPI StartDocPrinter() call failed"  ; EXIT
>      CASE -4
>         cMsg += "WinAPI StartPagePrinter() call failed" ; EXIT
>      CASE -5
>         cMsg += "WinAPI malloc() of memory failed"      ; EXIT
>      CASE -6
>         cMsg += "Arquivo " + cArq + " no Localizado"   ; EXIT
>      END
>  MsgInfo(cMsg) //WinAPI OpenPrinter() call failed
> EndIf
>
> Regards,
> Itamar M. Lins Jr.
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour



From vszakats at users.sourceforge.net  Wed May 27 07:40:15 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed May 27 07:40:20 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11151]
 trunk/harbour/contrib/hbwin/tests/ testprn2.prg
Message-ID: <E1M9HUV-0006MX-Nd@74yxhf1.ch3.sourceforge.com>

Revision: 11151
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11151&view=rev
Author:   vszakats
Date:     2009-05-27 11:40:15 +0000 (Wed, 27 May 2009)

Log Message:
-----------
minor modif to show retval

Modified Paths:
--------------
    trunk/harbour/contrib/hbwin/tests/testprn2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From jarabal at gmail.com  Wed May 27 07:39:47 2009
From: jarabal at gmail.com (Xavi)
Date: Wed May 27 07:42:31 2009
Subject: [Harbour] Set Color Foreground and Background in TQLabel and
	others ?
In-Reply-To: <23728637.post@talk.nabble.com>
References: <133778360905260927y4ef72c31ra0e87b27f63c3a0f@mail.gmail.com>
	<23728637.post@talk.nabble.com>
Message-ID: <4A1D2683.4050306@gmail.com>

Hi Pritpal, Marcos,

I'm not an expert in the use of Qt. I'm learning in spare time.
HBQT is your wrapper 1:1 of Qt, AFAIK. So the help and documentation of Qt should be valid except for the differences between
C++ and Harbour class. No?

http://doc.qtsoftware.com/4.5/index.html

> How to set colors in QT widgets using HBQT ? 
http://doc.qtsoftware.com/4.5/stylesheet.html
http://doc.qtsoftware.com/4.5/stylesheet-examples.html#style-sheet-usage

--
Xavi

Pritpal Bedi escribi?:
> Hello Xavi, Marcos
> 
> 
> Bruno Luciani wrote:
>> How to set colors in QT widgets using HBQT ?
>>
>> The setpalette method , seems not exist
>>
> 
> 
> Please respond to questions related with QT
> as you two seems to have better understanding on the subject.
> Reply even if you do not know anything, just to keep the 
> sentiments in place.
> 
> Regards
> Pritpal Bedi
> 






From druzus at acn.waw.pl  Wed May 27 08:15:36 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed May 27 08:06:29 2009
Subject: [Harbour] exit with switch and for each
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C95023D0DC3@PINK.zycie.pzu>
References: <20090525193943.GA2356@uran.home.aster.pl>
	<FFAFD6EA63A3FC4784FBDA52BE7A7C95023D0DC3@PINK.zycie.pzu>
Message-ID: <20090527121536.GA16844@uran.home.aster.pl>

On Wed, 27 May 2009, Horodyski Marek (PZUZ) wrote:
> This is not comparable. Exit was escape from loop without control
> expression, loop with control. 
> Now, when mixed syntax switch and any while/for we still heve LOOP
> inside switch, but EXIT no longer.
> EXIT in the sense : escape from a loop.
> In this case word Exit important changes.
> My example for workaround :
> Local lExit := .f., i := 1
> 
> While !lExit
>  ... // designate i 
>  Switch i
>  Case 2
>    ... // designate lExit
>    Loop
>  Case 3
>     ...
>     Exit 
>  Case 4
>    ....
>  End
> End
> Hm, maby this is ok.. In C is to only break and continue.

Exactly. It's compatible flow control.
In C 'break' interrupts the loop but also switch statements just like
'EXIT' in [x]Harbour and it's possible to use 'continue' inside switch
which works like 'LOOP' in [x]Harbour.

best regards,
Przemek
From itamarlins at bol.com.br  Wed May 27 08:31:24 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Wed May 27 08:32:25 2009
Subject: [Harbour] Re: PrintFileRaw
References: <gvj6ar$216$1@ger.gmane.org>
	<EAEA62E3-3A36-4F55-8E59-8B9A90517203@syenar.hu>
Message-ID: <gvjbs1$jmu$1@ger.gmane.org>

Hi! Viktor, forgive me my fault again.

Regards,
Itamar M. Lins Jr.
"Szakts Viktor" <harbour.01@syenar.hu> 
escreveu na mensagem news:EAEA62E3-3A36-4F55-8E59-8B9A90517203@syenar.hu...
Hi Itamar,

It works here. Are you sure the printer name is a valid one?

Brgds,
Viktor

On 2009.05.27., at 12:56, Itamar Lins wrote:

> Hi!
> This part of my code is working, but returns this error.
>
> nRet := PrintFileRaw(cPrint,cArq,'Pedido') //return -2 but run ok :-(
> if nRet < 1
>    cMsg := 'Erro Imprimindo: '
>   SWITCH nRet
>      CASE -1
>         cMsg += "Invalid parameters passed to function" ; EXIT
>      CASE -2
>         cMsg += "WinAPI OpenPrinter() call failed"      ; EXIT
>      CASE -3
>         cMsg += "WinAPI StartDocPrinter() call failed"  ; EXIT
>      CASE -4
>         cMsg += "WinAPI StartPagePrinter() call failed" ; EXIT
>      CASE -5
>         cMsg += "WinAPI malloc() of memory failed"      ; EXIT
>      CASE -6
>         cMsg += "Arquivo " + cArq + " no Localizado"   ; EXIT
>      END
>  MsgInfo(cMsg) //WinAPI OpenPrinter() call failed
> EndIf
>
> Regards,
> Itamar M. Lins Jr.
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour



From druzus at acn.waw.pl  Wed May 27 08:42:54 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed May 27 08:33:47 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <43D8504C-A58B-4282-87E6-B7D83BF5A637@syenar.hu>
References: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>
	<20090525195619.GA18212@uran.home.aster.pl>
	<18d502870905251311t2d82a1a4h739e42720397542@mail.gmail.com>
	<20090526231310.GA8455@uran.home.aster.pl>
	<6BE18A07-88EF-400F-BCBD-3F1B0757EBEE@syenar.hu>
	<43D8504C-A58B-4282-87E6-B7D83BF5A637@syenar.hu>
Message-ID: <20090527124254.GB16844@uran.home.aster.pl>

On Wed, 27 May 2009, Szak?ts Viktor wrote:
> I've retested after your change, results below
> (two runs each), plus attached:
> new (r11148):
> HB_STRICT_ALIGNMENT: 38.83/39.28, 38.89/39.36
> default            : 39.72/40.14, 39.66/40.20
> old (r11143/r11144):
> HB_STRICT_ALIGNMENT: 38.52/39.01, 38.52/39.11
> default            : 43.14/43.63, 42.92/43.66
> After your change all warnings disappeared in
> default mode, and performance got better with
> same (little smaller) binary sizes.

Now GCC builds uses the same macros/inline functions to
store/retrieve values in byte arrays when HB_STRICT_ALIGNMENT
is set or not so the speed difference is not caused by them.
When HB_STRICT_ALIGNMENT is set then it makes also yet another
job which is the only one thing which may change performance
in GCC builds: if HB_ALLOC_ALIGNMENT is not set then is defined
with default value 8. It causes that hb_xgrab() always returns
addresses with 8 byte alignment. Such addresses are often a little
bit faster on some x86 CPUs then addresses with 4 byte alignment
and you probably use such CPU and looks that in your case the
performance difference is noticeable. I guess that you will find
similar performance difference if you use -DHB_ALLOC_ALIGNMENT=8
instead of HB_STRICT_ALIGNMENT. Just check.

> Speed with HB_STRICT_ALIGNMENT is a little bit
> better with the new rev (and without size growth),
> so shouldn't we make it the default? if yes, on
> what conditions?

1-st we have to find the exact reason of speed difference in your
case in current builds and later we can try to check on which CPUs
the speed difference is repeatable. HB_ALLOC_ALIGNMENT=8 increase
a little bit total memory usage but it's possible that on some CPUs
the speed improvement will be noticeable. It's also possible that
on some others due to bigger memory usage it will reduce the cache
efficiency reducing also execution performance.

best regards,
Przemek
From alkresin at users.sourceforge.net  Wed May 27 08:36:30 2009
From: alkresin at users.sourceforge.net (alkresin@users.sourceforge.net)
Date: Wed May 27 08:36:35 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11152] trunk/harbour
Message-ID: <E1M9IMw-0001rA-3w@3kljzd1.ch3.sourceforge.com>

Revision: 11152
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11152&view=rev
Author:   alkresin
Date:     2009-05-27 12:36:29 +0000 (Wed, 27 May 2009)

Log Message:
-----------
2009-05-27 16:40 UTC+0300 Alexander Kresin <alex at belacy.belgorod.su>
  * utils/hbformat/hbformat.prg
    ! Handling of file mask has been fixed.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbformat/hbformat.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From alex at belacy.belgorod.su  Wed May 27 08:45:47 2009
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Wed May 27 08:46:04 2009
Subject: [Harbour] Re: hbformat a bit too eager to convert files
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C163A444163@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C163A444163@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <4A1D35FB.8090600@belacy.belgorod.su>

Chen,

> Was looking at hbformat.exe (r11148 bcc32)
> and trying to see if there is a command line help
> I executed the following in the harbour bin directory:
> 
> hbformat ?
> 
> The eager program started converting ALL files in that
> directory, did that very quick (before I had the chance
> to stopped it), and stopped only when it choked on its
> own EXE and exit with an RTE.
> 
> Is there an option to make the program more selective
> on its file selection?
> 

  It's fixed now. The program accepted '?' as a file mask symbol, but 
processed it incorrectly.

  The only help info available now, is the command line syntax, which 
appears, if you run the hbformat.exe without parameters. Information 
about options may be found in hbformat.ini. Command line options are the 
same as in ini file and override them. For example:

  hbformat.exe -cExtSave=new myfile.prg

will force the hbformat to save converted file with ,new extension ( in 
this case the extension of original file remains as it was before ).

Regards, Alexander.
From niki at synel.co.il  Wed May 27 08:48:42 2009
From: niki at synel.co.il (Chen Kedem)
Date: Wed May 27 08:49:56 2009
Subject: [Harbour] RE: hbformat a bit too eager to convert files
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C163A444163@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C163A444163@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <1A07FEDC778C3E4AA417F089511F859C163A444165@Mail-yoq.SYNEL-COMPANY.LTD>

Alexander,

> It's fixed now

Thank you.

  Chen.
From druzus at users.sourceforge.net  Wed May 27 09:12:14 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Wed May 27 09:12:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11153] trunk/harbour
Message-ID: <E1M9IvW-0007cU-CW@bj8yhf1.ch3.sourceforge.com>

Revision: 11153
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11153&view=rev
Author:   druzus
Date:     2009-05-27 13:12:13 +0000 (Wed, 27 May 2009)

Log Message:
-----------
2009-05-27 15:21 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/hbinet.c
  * harbour/source/rdd/dbfntx/dbfntx1.c
  * harbour/source/rdd/dbfnsx/dbfnsx1.c
  * harbour/source/rdd/hsx/hsx.c
  * harbour/source/rdd/usrrdd/usrrdd.c
    * casting to avoid false alarm in extensive strict aliasing analyzes

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/rdd/dbfnsx/dbfnsx1.c
    trunk/harbour/source/rdd/dbfntx/dbfntx1.c
    trunk/harbour/source/rdd/hsx/hsx.c
    trunk/harbour/source/rdd/usrrdd/usrrdd.c
    trunk/harbour/source/rtl/hbinet.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Wed May 27 09:37:45 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed May 27 09:37:54 2009
Subject: [Harbour] hbmk2 new extensions
Message-ID: <305AC6E1-2428-4041-BBD1-E8686358DF77@syenar.hu>

Hi All,

After a few days in SVN and actual usage (throwing out
every stuff related to old make systems), I have to say
I don't like the new extensions, so I'll revert them to
original state in the next few days, unless there is
some convincing input not to do so.

.hbl is too limiting. After all, it can be used to
give common parameters for any targets, not just a libs.
It will be restored to .hbp which means Harbour
Parameters, or you can also think of it as the perhaps
more intuitive Harbour Package.

.hbp will be restored to .hbt which means Target,
in sync with the - since finalized - '-target' options.

I'll leave .hbi for language files in the meantime.

Brgds,
Viktor

From dbtopas at dbtopas.lt  Wed May 27 09:40:32 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed May 27 09:39:14 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <20090527124254.GB16844@uran.home.aster.pl>
References: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>	<20090525195619.GA18212@uran.home.aster.pl>	<18d502870905251311t2d82a1a4h739e42720397542@mail.gmail.com>	<20090526231310.GA8455@uran.home.aster.pl>	<6BE18A07-88EF-400F-BCBD-3F1B0757EBEE@syenar.hu>	<43D8504C-A58B-4282-87E6-B7D83BF5A637@syenar.hu>
	<20090527124254.GB16844@uran.home.aster.pl>
Message-ID: <4A1D42D0.1010002@dbtopas.lt>

Hi,


I see a few new features under GCC: hbvmall, I see a new discussions 
about HB_STRICT_ALIGNMENT, etc. So, I decided to do some new speed tests 
BCC vs GCC. BCC was winning long time ago (before dlmalloc).

Test conditions:
- SVN 11150
- WinXP SP2
- default build + -DHB_FM_STATISTICS_OFF
- speedtest.exe

                        BCC          MinGW 4.4.0
Test execution    69.58 / 73.90    57.77 / 59.98
speedtst.exe size    622592     1090648 (903680 stripped)
Harbour build       4min 47sec      29min 15sec

So, GCC is 17% faster execution, 45% larger executable, 6.11 times 
longer compilation.

The question is: why executable size is significantly larger? Huge 
number of inlined functions or ...?

For Harbour development, it would be nice to have a better compile time 
also. Half an hour to check if typo is fixed is a long time.


Regards,
Mindaugas
From harbour.01 at syenar.hu  Wed May 27 09:53:01 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed May 27 09:53:10 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <4A1D42D0.1010002@dbtopas.lt>
References: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>	<20090525195619.GA18212@uran.home.aster.pl>	<18d502870905251311t2d82a1a4h739e42720397542@mail.gmail.com>	<20090526231310.GA8455@uran.home.aster.pl>	<6BE18A07-88EF-400F-BCBD-3F1B0757EBEE@syenar.hu>	<43D8504C-A58B-4282-87E6-B7D83BF5A637@syenar.hu>
	<20090527124254.GB16844@uran.home.aster.pl>
	<4A1D42D0.1010002@dbtopas.lt>
Message-ID: <5F454362-9182-4E88-B420-3062C255C3D9@syenar.hu>

> Test conditions:
> - SVN 11150
> - WinXP SP2
> - default build + -DHB_FM_STATISTICS_OFF

-DHB_FM_STATISTICS_OFF is the default now.

> - speedtest.exe
>                        BCC          MinGW 4.4.0
> Test execution    69.58 / 73.90    57.77 / 59.98
> speedtst.exe size    622592     1090648 (903680 stripped)
> Harbour build       4min 47sec      29min 15sec
>
> So, GCC is 17% faster execution, 45% larger executable, 6.11 times  
> longer compilation.
>
> The question is: why executable size is significantly larger? Huge  
> number of inlined functions or ...?

I'd also like to know.

However, the size difference may change for larger projects.
I seem to remember msvc was the winner here, yet it's larger
for small projects. I can no longer build my app for BCC, so
cannot give actual data, but that's also a factor we should
consider.

For me BTW, MinGW speed advantage is much bigger.

> For Harbour development, it would be nice to have a better compile  
> time also. Half an hour to check if typo is fixed is a long time.

This is true, but with our GNU Make system, this is rarely
required, since you can rebuild the changed lib only, by
issuing the make command in the corresponding source directory.

The other thing you can do, is to disable optimizations for
development with HB_BUILD_OPTIM=no.

The third thing you can do is to use msys to build for mingw,
as it always felt faster, but I didn't do any measurements.

Notice that with BCC some things aren't built, most notably
hbqt, which is huge and takes ages to compile. You can control
contribs with HB_CONTRIBLIBS envvar.

Finally, I've only kept BCC for testing while doing development,
due to fast compiling speed. I find myself using msvc for that
purpose though...

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed May 27 10:28:20 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed May 27 10:28:28 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <20090527124254.GB16844@uran.home.aster.pl>
References: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>
	<20090525195619.GA18212@uran.home.aster.pl>
	<18d502870905251311t2d82a1a4h739e42720397542@mail.gmail.com>
	<20090526231310.GA8455@uran.home.aster.pl>
	<6BE18A07-88EF-400F-BCBD-3F1B0757EBEE@syenar.hu>
	<43D8504C-A58B-4282-87E6-B7D83BF5A637@syenar.hu>
	<20090527124254.GB16844@uran.home.aster.pl>
Message-ID: <74F30C04-2B30-46E3-A1EF-DBCA05AF6048@syenar.hu>

I did an attempt with HB_USER_CFLAGS=-DHB_ALLOC_ALIGNMENT=8,
but couldn't replicate the slightly better results with
HB_STRICT_ALIGNMENT (I've rerun this one too to be sure).
Results were similar to default build.

No idea what could be the explanation, maybe my CFLAGS
were not properly interpreted (even though they are
visible in /build output).

Brgds,
Viktor

On 2009.05.27., at 14:42, Przemyslaw Czerpak wrote:

> On Wed, 27 May 2009, Szak?ts Viktor wrote:
>> I've retested after your change, results below
>> (two runs each), plus attached:
>> new (r11148):
>> HB_STRICT_ALIGNMENT: 38.83/39.28, 38.89/39.36
>> default            : 39.72/40.14, 39.66/40.20
>> old (r11143/r11144):
>> HB_STRICT_ALIGNMENT: 38.52/39.01, 38.52/39.11
>> default            : 43.14/43.63, 42.92/43.66
>> After your change all warnings disappeared in
>> default mode, and performance got better with
>> same (little smaller) binary sizes.
>
> Now GCC builds uses the same macros/inline functions to
> store/retrieve values in byte arrays when HB_STRICT_ALIGNMENT
> is set or not so the speed difference is not caused by them.
> When HB_STRICT_ALIGNMENT is set then it makes also yet another
> job which is the only one thing which may change performance
> in GCC builds: if HB_ALLOC_ALIGNMENT is not set then is defined
> with default value 8. It causes that hb_xgrab() always returns
> addresses with 8 byte alignment. Such addresses are often a little
> bit faster on some x86 CPUs then addresses with 4 byte alignment
> and you probably use such CPU and looks that in your case the
> performance difference is noticeable. I guess that you will find
> similar performance difference if you use -DHB_ALLOC_ALIGNMENT=8
> instead of HB_STRICT_ALIGNMENT. Just check.
>
>> Speed with HB_STRICT_ALIGNMENT is a little bit
>> better with the new rev (and without size growth),
>> so shouldn't we make it the default? if yes, on
>> what conditions?
>
> 1-st we have to find the exact reason of speed difference in your
> case in current builds and later we can try to check on which CPUs
> the speed difference is repeatable. HB_ALLOC_ALIGNMENT=8 increase
> a little bit total memory usage but it's possible that on some CPUs
> the speed improvement will be noticeable. It's also possible that
> on some others due to bigger memory usage it will reduce the cache
> efficiency reducing also execution performance.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Wed May 27 10:39:59 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed May 27 10:40:28 2009
Subject: [Harbour] hbmk2 new extensions
In-Reply-To: <305AC6E1-2428-4041-BBD1-E8686358DF77@syenar.hu>
References: <305AC6E1-2428-4041-BBD1-E8686358DF77@syenar.hu>
Message-ID: <609353e70905270739k2140118cs6115ebf9d4bb6510@mail.gmail.com>

My?two?cents for convincing you
IMO is right having P for Project instead?Parameter
sound very good ?Hbp for traditional project file
and?hbl,(hbc,hbx) for Library and other Common eXternal parameter
I imvite other harobour use explain point of view
more point on view
more better harbour version
2009/5/27 Szak?ts Viktor <harbour.01@syenar.hu>
>
> Hi All,
>
> After a few days in SVN and actual usage (throwing out
> every stuff related to old make systems), I have to say
> I don't like the new extensions, so I'll revert them to
> original state in the next few days, unless there is
> some convincing input not to do so.
>
> .hbl is too limiting. After all, it can be used to
> give common parameters for any targets, not just a libs.
> It will be restored to .hbp which means Harbour
> Parameters, or you can also think of it as the perhaps
> more intuitive Harbour Package.
>
> .hbp will be restored to .hbt which means Target,
> in sync with the - since finalized - '-target' options.
>
> I'll leave .hbi for language files in the meantime.
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour



--
Massimo Belgrano
From harbour.01 at syenar.hu  Wed May 27 10:48:59 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed May 27 10:49:08 2009
Subject: [Harbour] hbmk2 new extensions
In-Reply-To: <609353e70905270739k2140118cs6115ebf9d4bb6510@mail.gmail.com>
References: <305AC6E1-2428-4041-BBD1-E8686358DF77@syenar.hu>
	<609353e70905270739k2140118cs6115ebf9d4bb6510@mail.gmail.com>
Message-ID: <8D65275A-A97D-4840-81CC-EC6B33C61C79@syenar.hu>

> My two cents for convincing you
> IMO is right having P for Project instead Parameter
> sound very good  Hbp for traditional project file
> and hbl,(hbc,hbx) for Library and other Common eXternal parameter
> I imvite other harobour use explain point of view
> more point on view
> more better harbour version

If we can find a better expression for Harbour Package
/ Library / Parameter, and a better extension than
.hbl/.hbp I can think about it.

I don't like .hbx (which has too many and confusing
connotations with xhb).

.hbc doesn't tell much about the purpose ("common"
what?). It would be optimal to have _one_ such extension
to keep things simple and elegant. For me the previous
state was much closer to that.

Brgds,
Viktor

From dbtopas at dbtopas.lt  Wed May 27 11:09:51 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed May 27 11:08:37 2009
Subject: [Harbour] hbmk2 new extensions
In-Reply-To: <8D65275A-A97D-4840-81CC-EC6B33C61C79@syenar.hu>
References: <305AC6E1-2428-4041-BBD1-E8686358DF77@syenar.hu>	<609353e70905270739k2140118cs6115ebf9d4bb6510@mail.gmail.com>
	<8D65275A-A97D-4840-81CC-EC6B33C61C79@syenar.hu>
Message-ID: <4A1D57BF.8060808@dbtopas.lt>

>> IMO is right having P for Project instead Parameter
>> sound very good  Hbp for traditional project file
>> and hbl,(hbc,hbx) for Library and other Common eXternal parameter

> .hbc doesn't tell much about the purpose ("common"
> what?). 

I do not know what "common" is, but it could be HarBour Config.


Regards,
Mindaugas
From harbour.01 at syenar.hu  Wed May 27 11:17:47 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May 27 11:17:53 2009
Subject: [Harbour] hbmk2 new extensions
In-Reply-To: <4A1D57BF.8060808@dbtopas.lt>
References: <305AC6E1-2428-4041-BBD1-E8686358DF77@syenar.hu>
	<609353e70905270739k2140118cs6115ebf9d4bb6510@mail.gmail.com>
	<8D65275A-A97D-4840-81CC-EC6B33C61C79@syenar.hu>
	<4A1D57BF.8060808@dbtopas.lt>
Message-ID: <18d502870905270817q7f99b71ydd2fd90ce8e8df62@mail.gmail.com>

Good idea, thanks!

Brgds,
Viktor

On Wed, May 27, 2009 at 5:09 PM, Mindaugas Kavaliauskas
<dbtopas@dbtopas.lt> wrote:
>>> IMO is right having P for Project instead Parameter
>>> sound very good ?Hbp for traditional project file
>>> and hbl,(hbc,hbx) for Library and other Common eXternal parameter
>
>> .hbc doesn't tell much about the purpose ("common"
>> what?).
>
> I do not know what "common" is, but it could be HarBour Config.
>
>
> Regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From mbelgrano at deltain.it  Wed May 27 11:39:31 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed May 27 11:39:57 2009
Subject: [Harbour] hbmk2 new extensions
In-Reply-To: <4A1D57BF.8060808@dbtopas.lt>
References: <305AC6E1-2428-4041-BBD1-E8686358DF77@syenar.hu> 
	<609353e70905270739k2140118cs6115ebf9d4bb6510@mail.gmail.com> 
	<8D65275A-A97D-4840-81CC-EC6B33C61C79@syenar.hu>
	<4A1D57BF.8060808@dbtopas.lt>
Message-ID: <609353e70905270839q7c72630aqb0403f594786d2db@mail.gmail.com>

I agree
I was thinking Common configuration to multiple file

2009/5/27 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>:
>>> IMO is right having P for Project instead Parameter
>>> sound very good ?Hbp for traditional project file
>>> and hbl,(hbc,hbx) for Library and other Common eXternal parameter
>
>> .hbc doesn't tell much about the purpose ("common"
>> what?).
>
> I do not know what "common" is, but it could be HarBour Config.
>
>
> Regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From qiinfo at ig.com.br  Wed May 27 11:42:32 2009
From: qiinfo at ig.com.br (Rossine)
Date: Wed May 27 11:42:38 2009
Subject: [Harbour] Why array is passed by reference?
Message-ID: <23745159.post@talk.nabble.com>


Hello,

How to do that which in the example below, the element 1 of "aVar[1]" is not
changed?

[CODE]
FUNCTION MAIN

local aVar1 := { 1, 2, 3 }
local aVar2

aVar2 := avar1

aVar2[1] := 5

? aVar1[1]   && Here return 5 . Why ?
? aVar1[2]
? aVar1[3]

RETURN NIL

[ENDCODE]

Best Regards,

Rossine.


-- 
View this message in context: http://www.nabble.com/Why-array-is-passed-by-reference--tp23745159p23745159.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Wed May 27 11:49:57 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Wed May 27 11:50:06 2009
Subject: [Harbour] hbmk2 new extensions
In-Reply-To: <609353e70905270839q7c72630aqb0403f594786d2db@mail.gmail.com>
References: <305AC6E1-2428-4041-BBD1-E8686358DF77@syenar.hu>
	<609353e70905270739k2140118cs6115ebf9d4bb6510@mail.gmail.com>
	<8D65275A-A97D-4840-81CC-EC6B33C61C79@syenar.hu>
	<4A1D57BF.8060808@dbtopas.lt>
	<609353e70905270839q7c72630aqb0403f594786d2db@mail.gmail.com>
Message-ID: <18d502870905270849r183425fdh7b7fbbd342f67ed1@mail.gmail.com>

Thanks for the idea to both of you.

Brgds,
Viktor

On Wed, May 27, 2009 at 5:39 PM, Massimo Belgrano <mbelgrano@deltain.it> wrote:
> I agree
> I was thinking Common configuration to multiple file
>
> 2009/5/27 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>:
>>>> IMO is right having P for Project instead Parameter
>>>> sound very good ?Hbp for traditional project file
>>>> and hbl,(hbc,hbx) for Library and other Common eXternal parameter
>>
>>> .hbc doesn't tell much about the purpose ("common"
>>> what?).
>>
>> I do not know what "common" is, but it could be HarBour Config.
>>
>>
>> Regards,
>> Mindaugas
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
>
>
> --
> Massimo Belgrano
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From druzus at acn.waw.pl  Wed May 27 12:17:34 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed May 27 12:08:26 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <4A1D42D0.1010002@dbtopas.lt>
References: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>
	<20090525195619.GA18212@uran.home.aster.pl>
	<18d502870905251311t2d82a1a4h739e42720397542@mail.gmail.com>
	<20090526231310.GA8455@uran.home.aster.pl>
	<6BE18A07-88EF-400F-BCBD-3F1B0757EBEE@syenar.hu>
	<43D8504C-A58B-4282-87E6-B7D83BF5A637@syenar.hu>
	<20090527124254.GB16844@uran.home.aster.pl>
	<4A1D42D0.1010002@dbtopas.lt>
Message-ID: <20090527161734.GA32569@uran.home.aster.pl>

On Wed, 27 May 2009, Mindaugas Kavaliauskas wrote:
> I see a few new features under GCC: hbvmall, I see a new discussions about 
> HB_STRICT_ALIGNMENT, etc. So, I decided to do some new speed tests BCC vs 
> GCC. BCC was winning long time ago (before dlmalloc).
> Test conditions:
> - SVN 11150
> - WinXP SP2
> - default build + -DHB_FM_STATISTICS_OFF
> - speedtest.exe
>                        BCC          MinGW 4.4.0
> Test execution    69.58 / 73.90    57.77 / 59.98
> speedtst.exe size    622592     1090648 (903680 stripped)
> Harbour build       4min 47sec      29min 15sec
> So, GCC is 17% faster execution, 45% larger executable, 6.11 times longer 
> compilation.

Interesting. I've just make Harbour BCC5.5 and MinGW-GCC3.4.5 builds in my
Linux box. BCC was executed using WINE, MinGW as native Linux binaries
for cross compilation. I'm using:
   export HB_USER_PRGFLAGS="-gc2"
to reduce the compilation time (-gc3 strongly increase the time).
The build time with -j5 (I have 3 CPU machine) make parameters:
   1) BCC:
         real     2m54.801s
         user     1m51.423s
         sys      1m23.957s
   2) MinGW:
         real     1m13.781s
         user     2m49.843s
         sys      0m15.293s

here it's hard to compare results because BCC is windows application
executed by WINE and MinGW native Linux ones.
But then I created windows binaries of speedtst.exe for both compilers
also compiled with -gc2:
   1) BCC:
         size:    600576
         execution time:      33.38 / 33.60
   2) MinGW:
         size:    882688 (striped)
         execution time:      21.99 / 22.15

So BCC gives ~50 worse results.
Interesting that in your case the difference is smaller.
If it's possible and you agree I would like to send you my binaries
so we can compare results in real windows also with your previous
ones from MinGW-GCC4.4.0 builds.

> The question is: why executable size is significantly larger? Huge number 
> of inlined functions or ...?

Inlined code but also different C RTL and machine code which is not
optimized for size but for speed with the cost of size and does not
use some of CPU flags used by BCC (f.e. carry flag).
I've just rebuild Harbour using MinGW with:
   export HB_USER_CFLAGS="-Os"
and the results are:
         size:    496640 (striped)
         execution time:      35.23 / 35.40
so the size of speedtst.exe is smaller then in BCC builds but also ~5.5%
slower.

> For Harbour development, it would be nice to have a better compile time 
> also. Half an hour to check if typo is fixed is a long time.

See my results. They are quite sufficient for me. But I'm using -gc2
for .prg code. Please also remember that the time strongly depends on
number of compiled contrib and external libraries.
If you want to compile only core code then you can use:
   export HB_EXTERNALLIBS=no
   export HB_CONTRIBLIBS=no

instead of "no" in above settings you can also use the list of libraries
you want to compile if you want to chose only some of them.

best regards,
Przemek
From qiinfo at ig.com.br  Wed May 27 12:12:46 2009
From: qiinfo at ig.com.br (Rossine)
Date: Wed May 27 12:12:51 2009
Subject: [Harbour] Why array is passed by reference?
In-Reply-To: <23745159.post@talk.nabble.com>
References: <23745159.post@talk.nabble.com>
Message-ID: <23745737.post@talk.nabble.com>


Hi,

I Solved the problem with "aclone()"

[CODE]
FUNCTION MAIN

local aVar1 := { 1, 2, 3 }
local aVar2

aVar2 := aclone( avar1 )

aVar2[1] := 5

? aVar1[1]   &&  Now return 1
? aVar1[2]
? aVar1[3]

RETURN NIL

[ENDCODE]

Best Regards,

Rossine.

-- 
View this message in context: http://www.nabble.com/Why-array-is-passed-by-reference--tp23745159p23745737.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Wed May 27 12:25:21 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed May 27 12:16:13 2009
Subject: [Harbour] Why array is passed by reference?
In-Reply-To: <23745159.post@talk.nabble.com>
References: <23745159.post@talk.nabble.com>
Message-ID: <20090527162521.GA5266@uran.home.aster.pl>

On Wed, 27 May 2009, Rossine wrote:

Hi,

> How to do that which in the example below, the element 1 of "aVar[1]" is not
> changed?
> [CODE]
> FUNCTION MAIN
> local aVar1 := { 1, 2, 3 }
> local aVar2
> aVar2 := avar1

After simple assignment by := both variables points to the same array body.

> aVar2[1] := 5
> ? aVar1[1]   && Here return 5 . Why ?

because both vars uses the same array after above assignment.
If you do not like it and you want to make full array clone before
assigning array reference to variable then you should make it in the
same way as in Clipper and instead of:
   aVar2 := aVar1
you should use:
   aVar2 := AClone( aVar1 )

best regards,
Przemek
From bruno.luciani at gmail.com  Wed May 27 12:26:31 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Wed May 27 12:26:37 2009
Subject: [Harbour] Set Color Foreground and Background in TQLabel and 
	others ?
Message-ID: <133778360905270926w647f64a5o4e44457b1351b619@mail.gmail.com>

HI XAVI

Yes I know that, reading QT documentation

I found that I can do this :

   oLabel2 := QLabel():New( QT_PTROF( oWnd ) )
   oLabel2:SetTextFormat(1)  //0 text plain  1 RichText
   oLabel2:SetText( "<font color='Red'>Label Using HBQT</font>" )
   oLabel2:Move( 30 , 30 )
   oLabel2:ReSize( 200,30 )
   oLabel2:Show()

But in QT Exist 2 classes that I don' t find in HBQT

Qcolor and QPalette  that controls colors in the majority of controls

In another problem , how I can implement this pointer list in harbour

list << "Header1" << "Header2" << "header3"

This is used in C  and QT to fill the headers of QtableWidget  ( Grid )

oGrid:setHorizontalHeaderLabels( list )

Thanks in advance for any Help

Bruno


Hi Pritpal, Marcos,

I'm not an expert in the use of Qt. I'm learning in spare time.
HBQT is your wrapper 1:1 of Qt, AFAIK. So the help and documentation
of Qt should be valid except for the differences between
C++ and Harbour class. No?

http://doc.qtsoftware.com/4.5/index.html

>* How to set colors in QT widgets using HBQT ?
*http://doc.qtsoftware.com/4.5/stylesheet.html
http://doc.qtsoftware.com/4.5/stylesheet-examples.html#style-sheet-usage

--
Xavi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090527/1e4fa33b/attachment.html
From dbtopas at dbtopas.lt  Wed May 27 12:28:21 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed May 27 12:27:06 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <20090527161734.GA32569@uran.home.aster.pl>
References: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>	<20090525195619.GA18212@uran.home.aster.pl>	<18d502870905251311t2d82a1a4h739e42720397542@mail.gmail.com>	<20090526231310.GA8455@uran.home.aster.pl>	<6BE18A07-88EF-400F-BCBD-3F1B0757EBEE@syenar.hu>	<43D8504C-A58B-4282-87E6-B7D83BF5A637@syenar.hu>	<20090527124254.GB16844@uran.home.aster.pl>	<4A1D42D0.1010002@dbtopas.lt>
	<20090527161734.GA32569@uran.home.aster.pl>
Message-ID: <4A1D6A25.4050602@dbtopas.lt>

Hi,


> But then I created windows binaries of speedtst.exe for both compilers
> also compiled with -gc2:
>    1) BCC:
>          size:    600576
>          execution time:      33.38 / 33.60
>    2) MinGW:
>          size:    882688 (striped)
>          execution time:      21.99 / 22.15
> 
> So BCC gives ~50 worse results.
> Interesting that in your case the difference is smaller.
> If it's possible and you agree I would like to send you my binaries
> so we can compare results in real windows also with your previous
> ones from MinGW-GCC4.4.0 builds.

Yes, of cause, please send me. It's also strange we get different exe 
size for the same BCC compiler, it seems some compile options ar source 
versions is a little different. What is your BCC version? I use:
   Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland


> I've just rebuild Harbour using MinGW with:
>    export HB_USER_CFLAGS="-Os"
> and the results are:
>          size:    496640 (striped)
>          execution time:      35.23 / 35.40
> so the size of speedtst.exe is smaller then in BCC builds but also ~5.5%
> slower.

Wow! I did not expect to be such a big difference in exe size (496KB vs 
882KB) if different optimisation is used.


Regards,
Mindaugas
From jarabal at gmail.com  Wed May 27 12:31:52 2009
From: jarabal at gmail.com (Xavi)
Date: Wed May 27 12:34:33 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <4A1D42D0.1010002@dbtopas.lt>
References: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>	<20090525195619.GA18212@uran.home.aster.pl>	<18d502870905251311t2d82a1a4h739e42720397542@mail.gmail.com>	<20090526231310.GA8455@uran.home.aster.pl>	<6BE18A07-88EF-400F-BCBD-3F1B0757EBEE@syenar.hu>	<43D8504C-A58B-4282-87E6-B7D83BF5A637@syenar.hu>	<20090527124254.GB16844@uran.home.aster.pl>
	<4A1D42D0.1010002@dbtopas.lt>
Message-ID: <4A1D6AF8.1060200@gmail.com>

Mindaugas,

I don't have test this version. Have you tried to -Os and linker with -s?
It's like I get better results in size with 3.4.5	

http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html

What parameters are you using for compiler speedtest?

Xavi

Mindaugas Kavaliauskas escribi?:
> Hi,
> 
> 
> I see a few new features under GCC: hbvmall, I see a new discussions 
> about HB_STRICT_ALIGNMENT, etc. So, I decided to do some new speed tests 
> BCC vs GCC. BCC was winning long time ago (before dlmalloc).
> 
> Test conditions:
> - SVN 11150
> - WinXP SP2
> - default build + -DHB_FM_STATISTICS_OFF
> - speedtest.exe
> 
>                        BCC          MinGW 4.4.0
> Test execution    69.58 / 73.90    57.77 / 59.98
> speedtst.exe size    622592     1090648 (903680 stripped)
> Harbour build       4min 47sec      29min 15sec
> 
> So, GCC is 17% faster execution, 45% larger executable, 6.11 times 
> longer compilation.
> 
> The question is: why executable size is significantly larger? Huge 
> number of inlined functions or ...?
> 
> For Harbour development, it would be nice to have a better compile time 
> also. Half an hour to check if typo is fixed is a long time.
> 
> 
> Regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 



From qiinfo at ig.com.br  Wed May 27 12:40:10 2009
From: qiinfo at ig.com.br (Rossine)
Date: Wed May 27 12:40:15 2009
Subject: [Harbour] Why array is passed by reference?
In-Reply-To: <20090527162521.GA5266@uran.home.aster.pl>
References: <23745159.post@talk.nabble.com>
	<20090527162521.GA5266@uran.home.aster.pl>
Message-ID: <23746246.post@talk.nabble.com>


Hello Przemek, 


Przemyslaw Czerpak-2 wrote:
> 
> 
> After simple assignment by := both variables points to the same array
> body.
> 
>> aVar2[1] := 5
>> ? aVar1[1]   && Here return 5 . Why ?
> 
> because both vars uses the same array after above assignment.
> If you do not like it and you want to make full array clone before
> assigning array reference to variable then you should make it in the
> same way as in Clipper and instead of:
>    aVar2 := aVar1
> you should use:
>    aVar2 := AClone( aVar1 )
> 
> 

Thanks for explanation,

Rossine.


-- 
View this message in context: http://www.nabble.com/Why-array-is-passed-by-reference--tp23745159p23746246.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Wed May 27 12:49:24 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed May 27 12:40:23 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <4A1D6A25.4050602@dbtopas.lt>
References: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>
	<20090525195619.GA18212@uran.home.aster.pl>
	<18d502870905251311t2d82a1a4h739e42720397542@mail.gmail.com>
	<20090526231310.GA8455@uran.home.aster.pl>
	<6BE18A07-88EF-400F-BCBD-3F1B0757EBEE@syenar.hu>
	<43D8504C-A58B-4282-87E6-B7D83BF5A637@syenar.hu>
	<20090527124254.GB16844@uran.home.aster.pl>
	<4A1D42D0.1010002@dbtopas.lt>
	<20090527161734.GA32569@uran.home.aster.pl>
	<4A1D6A25.4050602@dbtopas.lt>
Message-ID: <20090527164924.GB22460@uran.home.aster.pl>

On Wed, 27 May 2009, Mindaugas Kavaliauskas wrote:

Hi,

>> But then I created windows binaries of speedtst.exe for both compilers
>> also compiled with -gc2:
>>    1) BCC:
>>          size:    600576
>>          execution time:      33.38 / 33.60
>>    2) MinGW:
>>          size:    882688 (striped)
>>          execution time:      21.99 / 22.15
>> So BCC gives ~50 worse results.
>> Interesting that in your case the difference is smaller.
>> If it's possible and you agree I would like to send you my binaries
>> so we can compare results in real windows also with your previous
>> ones from MinGW-GCC4.4.0 builds.
> Yes, of cause, please send me.

Thank you, binaries in attachment sent to your private mail.
Please inform me if you received them.

> It's also strange we get different exe size 
> for the same BCC compiler, it seems some compile options ar source versions 
> is a little different. What is your BCC version? I use:
>   Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland

I use the same but the size difference is probably caused by -gc2 option
I used to compile Harbour core code and also speedtst.prg
To make your result comparable you should also rebuild Harbour with:
   set HB_USER_PRGFLAGS=-gc2
and compile speedtst.prg with -gc[0-2] not -gc3.
I'm interesting also in comparison between GCC-3.4.5 and 4.4.0 in MinGW.

best regards,
Przemek
From kadziola at tlen.pl  Wed May 27 12:43:59 2009
From: kadziola at tlen.pl (=?Windows-1250?B?SmFyb3OzYXcgS7lkemlvs2E=?=)
Date: Wed May 27 12:44:08 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104]  trunk/harbour
In-Reply-To: <18d502870905270150n1a15eca3p17d8f1f791a85349@mail.gmail.com>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<173100328.20090522134457@tlen.pl>
	<20090522121122.GA2212@uran.home.aster.pl>
	<1486517337.20090526115433@tlen.pl>
	<4C8C519E-6E96-4B16-9F2B-443687164190@syenar.hu>
	<1005233192.20090526144629@tlen.pl>
	<18d502870905260551n2fe9919dide100bf68008e019@mail.gmail.com>
	<1604120678.20090527102425@tlen.pl>
	<18d502870905270150n1a15eca3p17d8f1f791a85349@mail.gmail.com>
Message-ID: <1108555890.20090527184359@tlen.pl>

Hi Viktor,

Wednesday, May 27, 2009, 10:50:01 AM, zou wrote:


VS> I'm not sure what's happening here, I've tried this from the command line
VS> and it didn't give the error, so I guess it has something to do with some
VS> properties of the embedded compiler. Or maybe I'm missing something
VS> obvious.

VS> Przemek, do you have an idea what this could be or how to prevent it?

VS> I'll try to create a workaround until then.

After SVN 11149 i can build hbsuper.lib with msys + mingw.
Tomorrow i'll try compile my app with this library.
Thanks so lot.

-- 
Regards,
 Jaroslaw Kadziola


From bedipritpal at hotmail.com  Wed May 27 13:03:35 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed May 27 13:03:40 2009
Subject: [Harbour] Set Color Foreground and Background in TQLabel and
	others ?
In-Reply-To: <133778360905270926w647f64a5o4e44457b1351b619@mail.gmail.com>
References: <133778360905270926w647f64a5o4e44457b1351b619@mail.gmail.com>
Message-ID: <23746677.post@talk.nabble.com>


Hello Bruno


Bruno Luciani wrote:
> 
> But in QT Exist 2 classes that I don' t find in HBQT
> 
> Qcolor and QPalette  that controls colors in the majority of controls
> 
> In another problem , how I can implement this pointer list in harbour
> 
> list << "Header1" << "Header2" << "header3"
> 
> This is used in C  and QT to fill the headers of QtableWidget  ( Grid )
> 
> oGrid:setHorizontalHeaderLabels( list )
> 

This weekend I will implement few more classes.
I have included QColor, QPallette, QList on my to-do.
Tell me if you need any other class which is skipping my mind.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/RE%3ASet-Color-Foreground-and-Background-in-TQLabel-and--others---tp23745988p23746677.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dbtopas at dbtopas.lt  Wed May 27 13:33:07 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed May 27 13:31:50 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <20090527164924.GB22460@uran.home.aster.pl>
References: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>	<20090525195619.GA18212@uran.home.aster.pl>	<18d502870905251311t2d82a1a4h739e42720397542@mail.gmail.com>	<20090526231310.GA8455@uran.home.aster.pl>	<6BE18A07-88EF-400F-BCBD-3F1B0757EBEE@syenar.hu>	<43D8504C-A58B-4282-87E6-B7D83BF5A637@syenar.hu>	<20090527124254.GB16844@uran.home.aster.pl>	<4A1D42D0.1010002@dbtopas.lt>	<20090527161734.GA32569@uran.home.aster.pl>	<4A1D6A25.4050602@dbtopas.lt>
	<20090527164924.GB22460@uran.home.aster.pl>
Message-ID: <4A1D7953.9070402@dbtopas.lt>

Hi,


> Thank you, binaries in attachment sent to your private mail.
> Please inform me if you received them.

Yes, I've received. But I can not test it. It do nothing (0% CPU usage) 
if I do not keep [Enter] key pressed. If I keep [Enter] pressed, tests 
are performed. The same for all 3 your executables. This made me think 
about some gt problems. Here are results of //info switch:

C:\harbour\__tst__>spd-bcc-gc2.exe  //info
Harbour Terminal: Standard stream console
Harbour 1.1.0dev (Rev. 11153)
Windows XP 5.1.2600 Service Pack 2
DS avail=579476KB  OS avail=2080544KB  EMM avail=0KB  MemStat:Off  MT:Of

05/27/09 20:14:21 Windows XP 5.1.2600 Service Pack 2
Harbour 1.1.0dev (Rev. 11153) Borland C++ 5.5 (32-bit) x86
THREADS: 0
N_LOOPS: 1000000
[ T000: empty loop overhead ]...................................0.13
====================================================================
[ T001: x := L_C ]..............................................0.14
...

and

C:\harbour\tests>speedtst_bcc.exe //info
Harbour Terminal: Windows native console
Harbour 1.1.0dev (Rev. 11150)
Windows XP 5.1.2600 Service Pack 2
DS avail=579136KB  OS avail=2080456KB  EMM avail=0KB  MemStat:Off  MT:Off

05/27/09 20:15:04 Windows XP 5.1.2600 Service Pack 2
Harbour 1.1.0dev (Rev. 11150) Borland C++ 5.5.1 (32-bit) x86
THREADS: 0
N_LOOPS: 1000000
[ T000: empty loop overhead ]...................................0.09
====================================================================
[ T001: x := L_C ]..............................................0.17
...


Your exe uses Standard stream console, my Windows native console.

I do not think it's a fair test condition for your executables by 
flooding it with [Enter], but here are the times:

C:\harbour\__tst__>spd-bcc-gc2.exe       64.44 / 67.44
C:\harbour\__tst__>spd-mgw-gc2.exe       53.03 / 55.47
C:\harbour\__tst__>spd-mgw-gc2-Os.exe    65.92 / 69.02

and my:

C:\harbour\tests\speedtst_bcc.exe        70.23 / 72.88
C:\harbour\tests\speedtst_gcc_strip.exe  58.48 / 60.63

Well... Your BCC exe is faster than my :) Perhaps, this [Enter] is 
something like saying "Come on, run faster" :D

I need to test -gc2 harbour and -gc2 speedtst, but I can not found "gc3" 
in /config folder recursively. How can I change Harbour compile to gc2, 
and how in hbmk2?



Regards,
Mindaugas
From jarabal at gmail.com  Wed May 27 13:33:52 2009
From: jarabal at gmail.com (Xavi)
Date: Wed May 27 13:36:35 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <4A1D6A25.4050602@dbtopas.lt>
References: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>	<20090525195619.GA18212@uran.home.aster.pl>	<18d502870905251311t2d82a1a4h739e42720397542@mail.gmail.com>	<20090526231310.GA8455@uran.home.aster.pl>	<6BE18A07-88EF-400F-BCBD-3F1B0757EBEE@syenar.hu>	<43D8504C-A58B-4282-87E6-B7D83BF5A637@syenar.hu>	<20090527124254.GB16844@uran.home.aster.pl>	<4A1D42D0.1010002@dbtopas.lt>	<20090527161734.GA32569@uran.home.aster.pl>
	<4A1D6A25.4050602@dbtopas.lt>
Message-ID: <4A1D7980.4020301@gmail.com>

Sorry to jump into.
I do not know what happens but it seems that the mail is deferred. :)

> Wow! I did not expect to be such a big difference in exe size (496KB vs 882KB) if different optimisation is used. 

--
Xavi

From dbtopas at dbtopas.lt  Wed May 27 13:41:45 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed May 27 13:40:27 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <4A1D6AF8.1060200@gmail.com>
References: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>	<20090525195619.GA18212@uran.home.aster.pl>	<18d502870905251311t2d82a1a4h739e42720397542@mail.gmail.com>	<20090526231310.GA8455@uran.home.aster.pl>	<6BE18A07-88EF-400F-BCBD-3F1B0757EBEE@syenar.hu>	<43D8504C-A58B-4282-87E6-B7D83BF5A637@syenar.hu>	<20090527124254.GB16844@uran.home.aster.pl>	<4A1D42D0.1010002@dbtopas.lt>
	<4A1D6AF8.1060200@gmail.com>
Message-ID: <4A1D7B59.8050707@dbtopas.lt>

Xavi wrote:
> I don't have test this version. Have you tried to -Os and linker with -s?
> It's like I get better results in size with 3.4.5   
> 
> http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html
> 
> What parameters are you using for compiler speedtest?

I have not tried or used any options/parameters. Just:
   hbmk2 -comp=bcc speedtst
   hbmk2 -comp=mingw speedtst


Regards,
Mindaugas
From druzus at acn.waw.pl  Wed May 27 14:13:01 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed May 27 14:03:52 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <4A1D7953.9070402@dbtopas.lt>
References: <18d502870905251311t2d82a1a4h739e42720397542@mail.gmail.com>
	<20090526231310.GA8455@uran.home.aster.pl>
	<6BE18A07-88EF-400F-BCBD-3F1B0757EBEE@syenar.hu>
	<43D8504C-A58B-4282-87E6-B7D83BF5A637@syenar.hu>
	<20090527124254.GB16844@uran.home.aster.pl>
	<4A1D42D0.1010002@dbtopas.lt>
	<20090527161734.GA32569@uran.home.aster.pl>
	<4A1D6A25.4050602@dbtopas.lt>
	<20090527164924.GB22460@uran.home.aster.pl>
	<4A1D7953.9070402@dbtopas.lt>
Message-ID: <20090527181301.GA17076@uran.home.aster.pl>

On Wed, 27 May 2009, Mindaugas Kavaliauskas wrote:
> Yes, I've received. But I can not test it. It do nothing (0% CPU usage) if 
> I do not keep [Enter] key pressed. If I keep [Enter] pressed, tests are 
> performed. The same for all 3 your executables. This made me think about 
> some gt problems. Here are results of //info switch:

Yes, They use GTSTD, sorry I forgot about it. Please execute them
(also your own) using //gtnul parameter and look for results in spd*.txt
files, f.e.:
   spd-bcc-gc2.exe //gtnul

GTNUL should also eliminate any potential overhead caused by GT driver
and inkey polling so probably it's the best GT to make speed comparison.

Then please send the results here.
But to make tests comparable you should recompile Harbour and your own
speedtst binaries with -gc2.

> I need to test -gc2 harbour and -gc2 speedtst, but I can not found "gc3" in 
> /config folder recursively. How can I change Harbour compile to gc2, and 

Use HB_USER_PRGFLAGS envvar to overload default .prg compiler settings, f.e.:
   set HB_USER_PRGFLAGS=-gc2
then:
   make_gnu.bat clean
   make_gnu.bat

> how in hbmk2?

   hbmk2 -n -w -es2 -l -gc2 speedtst.prg

I compiled speedtst with -l option.

best regards,
Przemek
From dbtopas at dbtopas.lt  Wed May 27 14:46:04 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed May 27 14:44:46 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <4A1D7953.9070402@dbtopas.lt>
References: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>	<20090525195619.GA18212@uran.home.aster.pl>	<18d502870905251311t2d82a1a4h739e42720397542@mail.gmail.com>	<20090526231310.GA8455@uran.home.aster.pl>	<6BE18A07-88EF-400F-BCBD-3F1B0757EBEE@syenar.hu>	<43D8504C-A58B-4282-87E6-B7D83BF5A637@syenar.hu>	<20090527124254.GB16844@uran.home.aster.pl>	<4A1D42D0.1010002@dbtopas.lt>	<20090527161734.GA32569@uran.home.aster.pl>	<4A1D6A25.4050602@dbtopas.lt>	<20090527164924.GB22460@uran.home.aster.pl>
	<4A1D7953.9070402@dbtopas.lt>
Message-ID: <4A1D8A6C.2090502@dbtopas.lt>

Hi,

> I do not think it's a fair test condition for your executables by 
> flooding it with [Enter], but here are the times:
> 
> C:\harbour\__tst__>spd-bcc-gc2.exe       64.44 / 67.44
> C:\harbour\__tst__>spd-mgw-gc2.exe       53.03 / 55.47
> C:\harbour\__tst__>spd-mgw-gc2-Os.exe    65.92 / 69.02
> 
> and my:
> 
> C:\harbour\tests\speedtst_bcc.exe        70.23 / 72.88
> C:\harbour\tests\speedtst_gcc_strip.exe  58.48 / 60.63
> 
> I need to test -gc2 harbour and -gc2 speedtst, but I can not found "gc3" 
> in /config folder recursively. How can I change Harbour compile to gc2, 
> and how in hbmk2?

Sorry, I have not noticed the answer in your message:
 >   set HB_USER_PRGFLAGS=-gc2

C:\harbour\tests\speedtst_bcc_gc2.exe       66.31 / 68.67

Hmmm, gc2 is faster than gc3?!...

set HB_EXTERNALLIBS=no
set HB_CONTRIBLIBS=no
GCC Harbour compile time: 13min 12sec


-----------------------------
Ok, I see your new letter. My tests are recompiled:
   hbmk2 -comp={bcc|mingw} -n -w -es2 -l -gc2 speedtst.prg
speedtst_bcc_gc2.exe   611328
speedtst_gcc_gc2_strip.exe 891392

spd-bcc-gc2.exe 600576
spd-mgw-gc2.exe 882688

Your exe is still a little bit smaller. Maybe just because of different 
GT. Why I do need to stuff GTSTD with keyboard events, to make 
application work?


Here are new times of all tests with //gtnul:

speedtst_bcc_gc2.exe           67.47 / 70.45
speedtst_gcc_gc2_strip.exe     55.80 / 56.66
speedtst_bcc_gc3.exe           68.56 / 69.88 (old .exe, no -l option)
spd-bcc-gc2.exe                64.08 / 64.83
spd-mgw-gc2.exe                52.78 / 53.27
spd-mgw-gc2-Os.exe             62.73 / 63.41

One more time:

speedtst_bcc_gc2.exe           64.97 / 68.08
speedtst_gcc_gc2_strip.exe     55.44 / 56.44  (old .exe, no -l option)
speedtst_bcc_gc3.exe           68.13 / 71.20
spd-bcc-gc2.exe                63.72 / 64.20
spd-mgw-gc2.exe                52.31 / 54.61
spd-mgw-gc2-Os.exe             63.47 / 64.13

One of the strangest thing is that BCC .exe cross-compiled under Wine is 
a little faster, than compiled on Windows (both running on Windows).

BCC / GCC speed difference much smaller on Windows, about 16%.


Regards,
Mindaugas





From dbtopas at dbtopas.lt  Wed May 27 14:50:11 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed May 27 14:48:52 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <4A1D8A6C.2090502@dbtopas.lt>
References: <18d502870905220923r4473143ep5f01a2548410d5c1@mail.gmail.com>	<20090525195619.GA18212@uran.home.aster.pl>	<18d502870905251311t2d82a1a4h739e42720397542@mail.gmail.com>	<20090526231310.GA8455@uran.home.aster.pl>	<6BE18A07-88EF-400F-BCBD-3F1B0757EBEE@syenar.hu>	<43D8504C-A58B-4282-87E6-B7D83BF5A637@syenar.hu>	<20090527124254.GB16844@uran.home.aster.pl>	<4A1D42D0.1010002@dbtopas.lt>	<20090527161734.GA32569@uran.home.aster.pl>	<4A1D6A25.4050602@dbtopas.lt>	<20090527164924.GB22460@uran.home.aster.pl>	<4A1D7953.9070402@dbtopas.lt>
	<4A1D8A6C.2090502@dbtopas.lt>
Message-ID: <4A1D8B63.7010103@dbtopas.lt>

> One more time:
> 
> speedtst_bcc_gc2.exe           64.97 / 68.08
> speedtst_gcc_gc2_strip.exe     55.44 / 56.44  (old .exe, no -l option)
> speedtst_bcc_gc3.exe           68.13 / 71.20
> ...

Should be:

speedtst_bcc_gc2.exe           64.97 / 68.08
speedtst_gcc_gc2_strip.exe     55.44 / 56.44
speedtst_bcc_gc3.exe           68.13 / 71.20 (old .exe, no -l option)


Regards,
M
From mbelgrano at deltain.it  Wed May 27 15:56:36 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed May 27 15:57:02 2009
Subject: [Harbour] How Benchmark a rdd for shared access?
Message-ID: <609353e70905271256t6986af90m78b4b221927ca620@mail.gmail.com>

The idea is Benchmark the performance of a generic a rdd (with or
without index support)
Counting how many record for secs have processed for
append,skip,index,seek,set filter
How possible Measure in Kbps read and write?
Is possible measure concurrent access  for skip test using MultiThread
is right approach?
Please share here any opinion
follow is a basic sample for explain idea

nrec = 30000
aDbf := {}
AADD( aDbf, { "FN", "N", 10, 0 } )
AADD( aDbf, { "FNF", "N", 12, 4 } )
AADD( aDbf, { "FC", "C", 40, 0 } )
AADD( aDbf, { "FD", "D", 8, 0 } )
AADD( aDbf, { "FL", "L", 1, 0 } )
AADD( aDbf, { "FM", "M", 0, 0 } )
FOR A=1 TO 20
AADD( aDbf, { "FIELD"+ALLTRIM(STR(A)), "C", 10, 0 } )
NEXT A
dbCreate("dbtest",aDbf)
USE dbtest EXCLUSIVE
index on fc + str(fn,10,0) to DBtest_i1

? "Creating test database - inserting", nrec, " records"
use dbtest  SHARED

? "INSERT (NO MEMO): 1200    "
st = seconds()
for i = 1 to nrec
        if mod(i,1000) = 0
                // @ 0, 0 SAY i
        endif
        append blank
        replace fn with INT(sin(i)*i)
        replace fnf with sin(i)*i
        replace fc with replicate( CHR(65+INT(ABS(sin(i)*25)) ), 40 )
        replace fd with date() + MOD(INT(sin(i)*i),10000)
        replace fl with IIF( SIN(i) >= 0, .T., .F. )
next
 commit
tapp = seconds()-st
* ZAP
USE
 ?? INT(nrec/tapp), "recod in one second"


? "SKIP:                     "
USE dbtest SHARED
st = seconds()
go top
while ! eof()
        skip
enddo
USE
tskip = seconds()-st
?? INT((nrec)/tskip), "record in one seconds"


-- 
Massimo Belgrano
From mbelgrano at deltain.it  Wed May 27 17:12:59 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed May 27 17:13:25 2009
Subject: [Harbour] Possible release next harbour version RC1 release?
Message-ID: <609353e70905271412r4072dddcldf515f7ce2071735@mail.gmail.com>

Possible release next harbour version RC1 release?

-- 
Massimo Belgrano
From druzus at acn.waw.pl  Wed May 27 17:45:19 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed May 27 17:36:12 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <4A1D8A6C.2090502@dbtopas.lt>
References: <20090526231310.GA8455@uran.home.aster.pl>
	<6BE18A07-88EF-400F-BCBD-3F1B0757EBEE@syenar.hu>
	<43D8504C-A58B-4282-87E6-B7D83BF5A637@syenar.hu>
	<20090527124254.GB16844@uran.home.aster.pl>
	<4A1D42D0.1010002@dbtopas.lt>
	<20090527161734.GA32569@uran.home.aster.pl>
	<4A1D6A25.4050602@dbtopas.lt>
	<20090527164924.GB22460@uran.home.aster.pl>
	<4A1D7953.9070402@dbtopas.lt> <4A1D8A6C.2090502@dbtopas.lt>
Message-ID: <20090527214519.GA28177@uran.home.aster.pl>

On Wed, 27 May 2009, Mindaugas Kavaliauskas wrote:

Hi,

> Your exe is still a little bit smaller. Maybe just because of different GT. 

It also effect the size but not only. See below.

> Why I do need to stuff GTSTD with keyboard events, to make application 
> work?

Probably there is sth wrong with this code:

   #elif defined( HB_IO_WIN )
      if( !pGTSTD->fStdinConsole ||
          WaitForSingleObject( ( HANDLE ) hb_fsGetOsHandle( pGTSTD->hStdin ), 0 ) == 0x0000 )
      {
         BYTE bChar;
         if( hb_fsRead( pGTSTD->hStdin, &bChar, 1 ) == 1 )
            ch = pGTSTD->keyTransTbl[ bChar ];
      }
   #elif defined( __WATCOMC__ )

inside hb_gt_std_ReadKey(). I thought it was working but looks that I was
wrong. If you can look at it fix it using real MS-Windows then it will be
nice.

> Here are new times of all tests with //gtnul:
> speedtst_bcc_gc2.exe           67.47 / 70.45
> speedtst_gcc_gc2_strip.exe     55.80 / 56.66
> speedtst_bcc_gc3.exe           68.56 / 69.88 (old .exe, no -l option)
> spd-bcc-gc2.exe                64.08 / 64.83
> spd-mgw-gc2.exe                52.78 / 53.27
> spd-mgw-gc2-Os.exe             62.73 / 63.41
>
> One more time:
>
> speedtst_bcc_gc2.exe           64.97 / 68.08
> speedtst_gcc_gc2_strip.exe     55.44 / 56.44
> speedtst_bcc_gc3.exe           68.13 / 71.20 (old .exe, no -l option)
> spd-bcc-gc2.exe                63.72 / 64.20
> spd-mgw-gc2.exe                52.31 / 54.61
> spd-mgw-gc2-Os.exe             63.47 / 64.13

Thank you for the results.

>
> One of the strangest thing is that BCC .exe cross-compiled under Wine is a 
> little faster, than compiled on Windows (both running on Windows).

I forgot about one switch I have in my local BCC settings. I have in
HB_USER_CFLAGS -a4 and this can be the source of difference. With -a4
BCC binaries consumes less memory (the item size is 16 instead 24) and
are little bit faster.

> BCC / GCC speed difference much smaller on Windows, about 16%.

Yes and please note the -Os MinGW binaries are faster then BCC ones.
They were slower in my tests. It can caused also by different CPU.
I'm using AMD Phenom(tm) 8450 Triple-Core Processor. If your CPU has
less cache memory then mine then smaller binaries will be preferred
and this can explain such results.
Tomorrow I'll try to make some tests with Win-XP machine on some
dual-core AMD CPU.

best regards,
Przemek
From dbtopas at dbtopas.lt  Wed May 27 19:22:17 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed May 27 19:20:59 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <20090527214519.GA28177@uran.home.aster.pl>
References: <20090526231310.GA8455@uran.home.aster.pl>	<6BE18A07-88EF-400F-BCBD-3F1B0757EBEE@syenar.hu>	<43D8504C-A58B-4282-87E6-B7D83BF5A637@syenar.hu>	<20090527124254.GB16844@uran.home.aster.pl>	<4A1D42D0.1010002@dbtopas.lt>	<20090527161734.GA32569@uran.home.aster.pl>	<4A1D6A25.4050602@dbtopas.lt>	<20090527164924.GB22460@uran.home.aster.pl>	<4A1D7953.9070402@dbtopas.lt>
	<4A1D8A6C.2090502@dbtopas.lt>
	<20090527214519.GA28177@uran.home.aster.pl>
Message-ID: <4A1DCB29.2080505@dbtopas.lt>

Hi,


>> Why I do need to stuff GTSTD with keyboard events, to make application 
>> work?
> 
> Probably there is sth wrong with this code:
> 
>    #elif defined( HB_IO_WIN )
>       if( !pGTSTD->fStdinConsole ||
>           WaitForSingleObject( ( HANDLE ) hb_fsGetOsHandle( pGTSTD->hStdin ), 0 ) == 0x0000 )
>       {
>          BYTE bChar;
>          if( hb_fsRead( pGTSTD->hStdin, &bChar, 1 ) == 1 )
>             ch = pGTSTD->keyTransTbl[ bChar ];
>       }
>    #elif defined( __WATCOMC__ )
> 
> inside hb_gt_std_ReadKey(). I thought it was working but looks that I was
> wrong. If you can look at it fix it using real MS-Windows then it will be
> nice.

I really do not know that's going on. Here is some debug code:

#elif defined( HB_IO_WIN )
    SetLastError( 0 );
    HB_TRACE( HB_TR_ALWAYS, ("fStdinConsole=%d, hStdin=%d, OShandle=%d 
GetLastError=%d", pGTSTD->fStdinConsole, pGTSTD->hStdin, 
hb_fsGetOsHandle( pGTSTD->hStdin ), GetLastError()) );

    if( !pGTSTD->fStdinConsole ||
        WaitForSingleObject( ( HANDLE ) hb_fsGetOsHandle( pGTSTD->hStdin 
), 0 ) == 0x0000 )
    {
       BYTE bChar;

       HB_TRACE( HB_TR_ALWAYS, ("waiting for input GetLastError=%d", 
(int) GetLastError() ) );
       if( hb_fsRead( pGTSTD->hStdin, &bChar, 1 ) == 1 )
          ch = pGTSTD->keyTransTbl[ bChar ];
       HB_TRACE( HB_TR_ALWAYS, ("character bChar=%d", (int) bChar ) );
    }

WaitForSingleObject() works OK for a few calls, but later it says we 
have data... I've tried:
     speedtst.exe 2>&1 | tee speedtst.log

I pressed 5 times [Enter] with the interval of a few seconds, and later 
pressed key [a], and did not released it for more than a second. (Then 
Ctrl-C to avoid huge log). Log below.


>> One of the strangest thing is that BCC .exe cross-compiled under Wine is a 
>> little faster, than compiled on Windows (both running on Windows).
> 
> I forgot about one switch I have in my local BCC settings. I have in
> HB_USER_CFLAGS -a4 and this can be the source of difference. With -a4
> BCC binaries consumes less memory (the item size is 16 instead 24) and
> are little bit faster.

Yes.
    ? MEMORY(1004) / MEMORY(1003)    // prints 24.00


>> BCC / GCC speed difference much smaller on Windows, about 16%.
> 
> Yes and please note the -Os MinGW binaries are faster then BCC ones.
> They were slower in my tests. It can caused also by different CPU.
> I'm using AMD Phenom(tm) 8450 Triple-Core Processor. If your CPU has
> less cache memory then mine then smaller binaries will be preferred
> and this can explain such results.

Intel Celeron 2.20 on this side. Celeron's cache is smaller for sure.


Regards,
Mindaugas



gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=203
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=203
gtstd.c:392: HB_TR_ALWAYS character bChar=13

05/28/09 02:08:57 Windows XP 5.1.2600 Service Pack 2
Harbour 1.1.0dev (Rev. 11150) Borland C++ 5.5.1 (32-bit) x86
THREADS: 0
N_LOOPS: 1000000gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, 
OShandle=3 GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=13
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=13
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=13
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=13
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0

[ T000: empty loop overhead ]...................................0.08
====================================================================gtstd.c:382: 
HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0

[ T001: x := L_C 
]..............................................0.08gtstd.c:382: 
HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0

[ T002: x := L_N 
]..............................................0.22gtstd.c:382: 
HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0

[ T003: x := L_D 
]..............................................0.16gtstd.c:382: 
HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:382: HB_TR_ALWAYS fStdinConsole=1, hStdin=0, OShandle=3 
GetLastError=0
gtstd.c:389: HB_TR_ALWAYS waiting for input GetLastError=0
gtstd.c:392: HB_TR_ALWAYS character bChar=97
From bruno.luciani at gmail.com  Wed May 27 19:46:16 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Wed May 27 19:46:24 2009
Subject: [Harbour] Set Color Foreground and Background in TQLabel and others ?
In-Reply-To: <133778360905270926w647f64a5o4e44457b1351b619@mail.gmail.com>
References: <133778360905270926w647f64a5o4e44457b1351b619@mail.gmail.com>
Message-ID: <133778360905271646g6249e2b0y2357cfd540b5cc22@mail.gmail.com>

Ok Pritpal , thanks for that

In this moment I don' t remember anyone more
but in case i need , I tell you.

Another thing That I need are many samples

1: Howto define a label control inside a TAB page  ( this maybe
usefull in other controls too )

2: Howto Define a Pushbutton in mainwindow that open a SDI window

3: A Sample similar to Browse using anyone of the classes ( Qtableview
or Qtablewidget)
   that permit browse a DBF database.



When I have usefull samples working , If you want I send to you
to add to HBQT project .

thanks in advance

Bruno


//////////////////////////////////////////////////////////////////
Hello Bruno


Bruno Luciani wrote:

>*
*>* But in QT Exist 2 classes that I don' t find in HBQT
*>*
*>* Qcolor and QPalette  that controls colors in the majority of controls
*>*
*>* In another problem , how I can implement this pointer list in harbour
*>*
*>* list << "Header1" << "Header2" << "header3"
*>*
*>* This is used in C  and QT to fill the headers of QtableWidget  ( Grid )
*>*
*>* oGrid:setHorizontalHeaderLabels( list )
*>*
*
This weekend I will implement few more classes.
I have included QColor, QPallette, QList on my to-do.
Tell me if you need any other class which is skipping my mind.

Regards
Pritpal Bedi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090527/2fbaeb90/attachment.html
From dbtopas at dbtopas.lt  Wed May 27 19:48:34 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed May 27 19:47:15 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <4A1DCB29.2080505@dbtopas.lt>
References: <20090526231310.GA8455@uran.home.aster.pl>	<6BE18A07-88EF-400F-BCBD-3F1B0757EBEE@syenar.hu>	<43D8504C-A58B-4282-87E6-B7D83BF5A637@syenar.hu>	<20090527124254.GB16844@uran.home.aster.pl>	<4A1D42D0.1010002@dbtopas.lt>	<20090527161734.GA32569@uran.home.aster.pl>	<4A1D6A25.4050602@dbtopas.lt>	<20090527164924.GB22460@uran.home.aster.pl>	<4A1D7953.9070402@dbtopas.lt>	<4A1D8A6C.2090502@dbtopas.lt>	<20090527214519.GA28177@uran.home.aster.pl>
	<4A1DCB29.2080505@dbtopas.lt>
Message-ID: <4A1DD152.5050101@dbtopas.lt>

Hi,


> WaitForSingleObject() works OK for a few calls, but later it says we 
> have data...

We are not alone. These seems to be useful:
http://www.tech-archive.net/Archive/VC/microsoft.public.vc.language/2006-07/msg00320.html
http://tech.groups.yahoo.com/group/zepp/message/819

This fixes the code:

    if( !pGTSTD->fStdinConsole ||
        WaitForSingleObject( ( HANDLE ) hb_fsGetOsHandle( pGTSTD->hStdin 
), 0 ) == 0x0000 )
    {
       INPUT_RECORD    ir;
       DWORD           ulCount;

       if( ReadConsoleInput( ( HANDLE ) hb_fsGetOsHandle( pGTSTD->hStdin 
), &ir, 1, &ulCount ) && ulCount == 1 )
       {
          if( ir.EventType == KEY_EVENT && ir.Event.KeyEvent.bKeyDown )
          {
             ch = pGTSTD->keyTransTbl[ ( BYTE ) 
ir.Event.KeyEvent.uChar.AsciiChar ];
          }
       }

It could not work in WinCE, unicode builds, because of 
readconsoleinputW, KEY_EVENT_RECORD.uChar.UnicodeChar, etc. I'm not able 
to test these things. Also double hb_fsGetOsHandle( pGTSTD->hStdin ) 
could be optimized before commit.


Regards,
Mindaugas

From vailtom at gmail.com  Wed May 27 21:58:50 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Wed May 27 21:58:56 2009
Subject: [Harbour] Revision 11153 - ../../wvgwin.c:2059: error:
	`GCLP_HBRBACKGROUND' undeclared (first use in this function)
Message-ID: <531d7a750905271858s4350e2a3i6e4131351d55c2ac@mail.gmail.com>

I am getting some errors with the latest release of SVN to compile it
with MinGW ( from Qt package), see details :

../../wvgwin.c: In function `HB_FUN_WVG_SETCURRENTBRUSH':
../../wvgwin.c:2059: warning: implicit declaration of function `SetClassLongPtr'
../../wvgwin.c:2059: error: `GCLP_HBRBACKGROUND' undeclared (first use
in this function)
../../wvgwin.c:2059: error: (Each undeclared identifier is reported only once
../../wvgwin.c:2059: error: for each function it appears in.)
mingw32-make.exe[3]: *** [wvgwin.o] Error 1
mingw32-make.exe[3]: Leaving directory `c:/Harbour/contrib/gtwvg/win/mingw'
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[2]: Leaving directory `c:/Harbour/contrib/gtwvg'
mingw32-make.exe[1]: *** [gtwvg.inst] Error 2
mingw32-make.exe[1]: Leaving directory `c:/Harbour/contrib'
mingw32-make.exe: *** [contrib.inst] Error 2
c:\Harbour>
c:\Harbour>g++ --version
g++ (GCC) 3.4.2 (mingw-special)
Copyright (C) 2004 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

c:\Harbour>mingw32-make --version
GNU Make 3.81
Copyright (C) 2006  Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.

This program built for i386-pc-mingw32

c:\Harbour>

I use MinGW from original Qt Packet and after Again edited the file
wvgwin.c and replace the constant value GCLP_HBRBACKGROUND by a
literal value -10 (same as
C:\harbour\contrib\examples\hbwhat\winuser.ch) and everything went
well.

Regards,
Vailton Renato
From vouchcac at users.sourceforge.net  Wed May 27 23:10:06 2009
From: vouchcac at users.sourceforge.net (vouchcac@users.sourceforge.net)
Date: Wed May 27 23:10:11 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11154] trunk/harbour
Message-ID: <E1M9W0M-0007rQ-0f@3kljzd1.ch3.sourceforge.com>

Revision: 11154
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11154&view=rev
Author:   vouchcac
Date:     2009-05-28 03:10:05 +0000 (Thu, 28 May 2009)

Log Message:
-----------
2009-05-27 20:08 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * contrib/gtwvg/wvgwin.c
    + Workaround for GCLP_HBRBACKGROUND reported missing from some MinGW distros.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtwvg/wvgwin.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From teo at windtelsoft.com  Thu May 28 02:00:25 2009
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Thu May 28 02:00:32 2009
Subject: [Harbour] gtxwc on MacOS
Message-ID: <592196E4-F119-4C95-B163-8C4AC3CCF6B0@windtelsoft.com>

Hello,

The GTXWC library can be added permanently in the HB_GT_LIST var on the
config file 'config/darwin/global.cf' ?


best regards,

Teo

From harbour.01 at syenar.hu  Thu May 28 02:09:17 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 28 02:09:22 2009
Subject: [Harbour] gtxwc on MacOS
In-Reply-To: <592196E4-F119-4C95-B163-8C4AC3CCF6B0@windtelsoft.com>
References: <592196E4-F119-4C95-B163-8C4AC3CCF6B0@windtelsoft.com>
Message-ID: <18d502870905272309n635dab48ke676a4f9cca20f4f@mail.gmail.com>

Hi Teo,

AFAIK X11 availability under Darwin depends on OS X version,
Leopard has X11 installed by default, but earlier version doesn't
(or something like that).

I plan to add autodetection for these dependencies.
(but postponed it after the next release)

Brgds,
Viktor

On Thu, May 28, 2009 at 8:00 AM, Teo Fonrouge <teo@windtelsoft.com> wrote:
> Hello,
>
> The GTXWC library can be added permanently in the HB_GT_LIST var on the
> config file 'config/darwin/global.cf' ?
>
>
> best regards,
>
> Teo
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From teo at windtelsoft.com  Thu May 28 02:13:21 2009
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Thu May 28 02:13:27 2009
Subject: [Harbour] gtxwc on MacOS
In-Reply-To: <18d502870905272309n635dab48ke676a4f9cca20f4f@mail.gmail.com>
References: <592196E4-F119-4C95-B163-8C4AC3CCF6B0@windtelsoft.com>
	<18d502870905272309n635dab48ke676a4f9cca20f4f@mail.gmail.com>
Message-ID: <2DE52163-5FF0-4265-A098-555DAFFEC121@windtelsoft.com>


On 28/05/2009, at 01:09 a.m., Viktor Szak?ts wrote:

> Hi Teo,
>
> AFAIK X11 availability under Darwin depends on OS X version,
> Leopard has X11 installed by default, but earlier version doesn't
> (or something like that).
>
> I plan to add autodetection for these dependencies.
> (but postponed it after the next release)
>

Ok, thanks Viktor.


best regards,

Teo

From M.Horodyski at pzuzycie.com.pl  Thu May 28 02:23:25 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu May 28 02:23:31 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <4A1D42D0.1010002@dbtopas.lt>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C95023D0F7E@PINK.zycie.pzu>

 

>-----Original Message-----
>From: Mindaugas Kavaliauskas [mailto:dbtopas@dbtopas.lt] 
>Sent: Wednesday, May 27, 2009 3:41 PM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] gcc 4.4.0 warnings
>
>Hi,
>
>
>I see a few new features under GCC: hbvmall, I see a new 
>discussions about HB_STRICT_ALIGNMENT, etc. So, I decided to 
>do some new speed tests BCC vs GCC. BCC was winning long time 
>ago (before dlmalloc).

[ ... ]

>                        BCC          MinGW 4.4.0
>Test execution    69.58 / 73.90    57.77 / 59.98
>speedtst.exe size    622592     1090648 (903680 stripped)
>Harbour build       4min 47sec      29min 15sec
>
>So, GCC is 17% faster execution, 45% larger executable, 6.11 
>times longer compilation.


Mindaugas,
speed and size that's not all. We must also look at the quality.
Try run this code on different environment :

*----------------------
Function main()
local i, nd := 0.0, nd1 := 1.1
Cls
? nd
for i := 1 to 30
  nd := nd + nd1
next
for i := 1 to 30
  nd := nd - nd1
next

? nd
for i := 1 to 10000
  nd := nd * nd1
next
? nd, ValType( nd), nd > 0.000001
return Nil
*-----------------------

On OpenWatcom it is correctly executet, and on BCC (I do not know how
the MinGW) ?

Regards,
Marek Horodyski
From vszakats at users.sourceforge.net  Thu May 28 02:26:10 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu May 28 02:26:16 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11155] trunk/harbour
Message-ID: <E1M9Z46-0002XO-1F@3kljzd1.ch3.sourceforge.com>

Revision: 11155
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11155&view=rev
Author:   vszakats
Date:     2009-05-28 06:26:06 +0000 (Thu, 28 May 2009)

Log Message:
-----------
2009-05-28 08:20 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    * .hbl extension changed to .hbc (Harbour Make Config).
    * -nohbl -> -nohbc
    ; Sorry for the mess.
    + Added support for instpaths= in .hbc files.
    + Added support for HB_USER_LIBPATHS envvar to specify
      lib search paths (similar to -L).
    ! Fixed so that sripping/compressing isn't attempted if
      the target didn't need an update.

  * source/rtl/Makefile
  * source/rdd/Makefile
    + Enabled -gc3 for hbrtl and hbrdd locally
      (except for wce builds). Same can be done locally
      for any libs where we find performance increase
      due to -gc3.
    ; NOTE: Probably it would be enough to compile just a few
            sensitive .prg sources (or program parts) with -gc3,
            so it would great to have such #pragma option in
            Harbour. Doesn't seem easy to implement though.

  * config/rules.cf
    * HB_GCMODE default set 0 (from 3).
      This means .prgs will be again compiled with -gc0 by default.
      Because of the contribs, this means the complete size
      of Harbour libs is now reduced significantly.

  * config/wce/global.cf
  * config/wce/msvcarm.cf
  * config/wce/mingwarm.cf
  * config/wce/poccarm.cf
    % HB_GCMODE=0 moved to wce/global.cf

  - utils/hbmk2/examples/hmg.hbl
  + utils/hbmk2/examples/fwh.hbc
  - utils/hbmk2/examples/whoo.hbl
  + utils/hbmk2/examples/xhgtk.hbc
  - utils/hbmk2/examples/xbgtk.hbl
  - utils/hbmk2/examples/hwgui.hbl
  - utils/hbmk2/examples/fwh.hbl
  + utils/hbmk2/examples/c4w.hbc
  - utils/hbmk2/examples/xhgtk.hbl
  + utils/hbmk2/examples/contrib.hbc
  - utils/hbmk2/examples/c4w.hbl
  + utils/hbmk2/examples/contribf.hbc
  - utils/hbmk2/examples/contrib.hbl
  + utils/hbmk2/examples/hmg.hbc
  + utils/hbmk2/examples/whoo.hbc
  - utils/hbmk2/examples/contribf.hbl
  + utils/hbmk2/examples/xbgtk.hbc
  + utils/hbmk2/examples/hwgui.hbc
  - contrib/gtalleg/tests/gtallegs.hbl
  - contrib/gtalleg/tests/gtallegd.hbl
  + contrib/gtalleg/tests/gtallegs.hbc
  + contrib/gtalleg/tests/gtallegd.hbc
  - contrib/hbmysql/utils/hbmysql.hbl
  + contrib/hbmysql/utils/hbmysql.hbc
  - contrib/hbmysql/tests/hbmysql.hbl
  + contrib/hbmysql/tests/hbmysql.hbc
  + contrib/hbct/tests/hbct.hbc
  - contrib/hbct/tests/hbct.hbl
  - contrib/xhb/tests/xhb.hbl
  + contrib/xhb/tests/xhb.hbc
  - contrib/hbodbc/tests/hbodbc.hbl
  + contrib/hbodbc/tests/hbodbc.hbc
  - contrib/hbtpathy/tests/hbtpathy.hbl
  + contrib/hbtpathy/tests/hbtpathy.hbc
  + contrib/hbmsql/tests/hbmsql.hbc
  - contrib/hbmsql/tests/hbmsql.hbl
  + contrib/hbmzip/tests/hbmzip.hbc
  - contrib/hbmzip/tests/hbmzip.hbl
  + contrib/hbsqlit3/tests/hbsqlit3.hbc
  - contrib/hbsqlit3/tests/hbsqlit3.hbl
  - contrib/hbblat/tests/hbblat.hbl
  + contrib/hbblat/tests/hbblat.hbc
  - contrib/hbqt/tests/hbqt.hbl
  + contrib/hbqt/tests/hbqt.hbc
  - contrib/hbfbird/tests/hbfbird.hbl
  + contrib/hbfbird/tests/hbfbird.hbc
  - contrib/hbziparc/tests/hbziparc.hbl
  + contrib/hbziparc/tests/hbziparc.hbc
  - contrib/hbnf/tests/hbnf.hbl
  + contrib/hbnf/tests/hbnf.hbc
  - contrib/hbcurl/tests/hbcurl.hbl
  + contrib/hbcurl/tests/hbcurl.hbc
  - contrib/gtqtc/tests/gtqtc.hbl
  + contrib/gtqtc/tests/gtqtc.hbc
  - contrib/rddsql/sddmy/tests/sddmy.hbl
  + contrib/rddsql/sddmy/tests/sddmy.hbc
  + contrib/rddsql/tests/rddsql.hbc
  - contrib/rddsql/tests/rddsql.hbl
  - contrib/rddsql/sddodbc/tests/sddodbc.hbl
  + contrib/rddsql/sddodbc/tests/sddodbc.hbc
  - contrib/hbhpdf/tests/hbhpdf.hbl
  + contrib/hbhpdf/tests/hbhpdf.hbc
  - contrib/rddado/tests/rddado.hbl
  + contrib/rddado/tests/rddado.hbc
  + contrib/gtwvg/tests/gtwvg.hbc
  - contrib/gtwvg/tests/gtwvg.hbl
  - contrib/hbpgsql/tests/hbpgsql.hbl
  + contrib/hbpgsql/tests/hbpgsql.hbc
  - contrib/rddads/tests/rddads.hbl
  + contrib/rddads/tests/rddads.hbc
  - contrib/hbclipsm/tests/hbclipsm.hbl
  + contrib/hbclipsm/tests/hbclipsm.hbc
  - contrib/hbfimage/tests/hbfimage.hbl
  + contrib/hbfimage/tests/hbfimage.hbc
  + contrib/hbgd/tests/hbgd.hbc
  - contrib/hbgd/tests/hbgd.hbl
  + contrib/hbmisc/tests/hbmisc.hbc
  - contrib/hbmisc/tests/hbmisc.hbl
  + contrib/hbtip/tests/hbtip.hbc
  - contrib/hbtip/tests/hbtip.hbl
  + contrib/hbwin/tests/hbwin.hbc
  - contrib/hbwin/tests/hbwin.hbl
  + contrib/hbvpdf/tests/hbvpdf.hbc
  - contrib/hbvpdf/tests/hbvpdf.hbl
  - contrib/hbssl/tests/hbssl.hbl
  + contrib/hbssl/tests/hbssl.hbc
  - contrib/hbbtree/tests/hbbtree.hbl
  + contrib/hbbtree/tests/hbbtree.hbc
  - contrib/hbcrypt/tests/hbcrypt.hbl
  + contrib/hbcrypt/tests/hbcrypt.hbc
  + contrib/examples/hbsqlit2/tests/hbsqlit2.hbc
  - contrib/examples/hbsqlit2/tests/hbsqlit2.hbl
  - contrib/examples/hbapollo/tests/hbapollo.hbl
  + contrib/examples/hbapollo/tests/hbapollo.hbc
  + contrib/examples/hbgf/tests/hbgf.hbc
  - contrib/examples/hbgf/tests/hbgf.hbl
  - contrib/examples/terminal/terminal.hbl
  + contrib/examples/terminal/terminal.hbc
  - contrib/examples/hbwhat/tests/hbwhat.hbl
  + contrib/examples/hbwhat/tests/hbwhat.hbc
    * Renamed *.hbl -> *.hbc (Harbour Make Config) in whole source tree.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/rules.cf
    trunk/harbour/config/wce/global.cf
    trunk/harbour/config/wce/mingwarm.cf
    trunk/harbour/config/wce/msvcarm.cf
    trunk/harbour/config/wce/poccarm.cf
    trunk/harbour/source/rdd/Makefile
    trunk/harbour/source/rtl/Makefile
    trunk/harbour/utils/hbmk2/hbmk2.prg

Added Paths:
-----------
    trunk/harbour/contrib/examples/hbapollo/tests/hbapollo.hbc
    trunk/harbour/contrib/examples/hbgf/tests/hbgf.hbc
    trunk/harbour/contrib/examples/hbsqlit2/tests/hbsqlit2.hbc
    trunk/harbour/contrib/examples/hbwhat/tests/hbwhat.hbc
    trunk/harbour/contrib/examples/terminal/terminal.hbc
    trunk/harbour/contrib/gtalleg/tests/gtallegd.hbc
    trunk/harbour/contrib/gtalleg/tests/gtallegs.hbc
    trunk/harbour/contrib/gtqtc/tests/gtqtc.hbc
    trunk/harbour/contrib/gtwvg/tests/gtwvg.hbc
    trunk/harbour/contrib/hbblat/tests/hbblat.hbc
    trunk/harbour/contrib/hbbtree/tests/hbbtree.hbc
    trunk/harbour/contrib/hbclipsm/tests/hbclipsm.hbc
    trunk/harbour/contrib/hbcrypt/tests/hbcrypt.hbc
    trunk/harbour/contrib/hbct/tests/hbct.hbc
    trunk/harbour/contrib/hbcurl/tests/hbcurl.hbc
    trunk/harbour/contrib/hbfbird/tests/hbfbird.hbc
    trunk/harbour/contrib/hbfimage/tests/hbfimage.hbc
    trunk/harbour/contrib/hbgd/tests/hbgd.hbc
    trunk/harbour/contrib/hbhpdf/tests/hbhpdf.hbc
    trunk/harbour/contrib/hbmisc/tests/hbmisc.hbc
    trunk/harbour/contrib/hbmsql/tests/hbmsql.hbc
    trunk/harbour/contrib/hbmysql/tests/hbmysql.hbc
    trunk/harbour/contrib/hbmysql/utils/hbmysql.hbc
    trunk/harbour/contrib/hbmzip/tests/hbmzip.hbc
    trunk/harbour/contrib/hbnf/tests/hbnf.hbc
    trunk/harbour/contrib/hbodbc/tests/hbodbc.hbc
    trunk/harbour/contrib/hbpgsql/tests/hbpgsql.hbc
    trunk/harbour/contrib/hbqt/tests/hbqt.hbc
    trunk/harbour/contrib/hbsqlit3/tests/hbsqlit3.hbc
    trunk/harbour/contrib/hbssl/tests/hbssl.hbc
    trunk/harbour/contrib/hbtip/tests/hbtip.hbc
    trunk/harbour/contrib/hbtpathy/tests/hbtpathy.hbc
    trunk/harbour/contrib/hbvpdf/tests/hbvpdf.hbc
    trunk/harbour/contrib/hbwin/tests/hbwin.hbc
    trunk/harbour/contrib/hbziparc/tests/hbziparc.hbc
    trunk/harbour/contrib/rddado/tests/rddado.hbc
    trunk/harbour/contrib/rddads/tests/rddads.hbc
    trunk/harbour/contrib/rddsql/sddmy/tests/sddmy.hbc
    trunk/harbour/contrib/rddsql/sddodbc/tests/sddodbc.hbc
    trunk/harbour/contrib/rddsql/tests/rddsql.hbc
    trunk/harbour/contrib/xhb/tests/xhb.hbc
    trunk/harbour/utils/hbmk2/examples/c4w.hbc
    trunk/harbour/utils/hbmk2/examples/contrib.hbc
    trunk/harbour/utils/hbmk2/examples/contribf.hbc
    trunk/harbour/utils/hbmk2/examples/fwh.hbc
    trunk/harbour/utils/hbmk2/examples/hmg.hbc
    trunk/harbour/utils/hbmk2/examples/hwgui.hbc
    trunk/harbour/utils/hbmk2/examples/whoo.hbc
    trunk/harbour/utils/hbmk2/examples/xbgtk.hbc
    trunk/harbour/utils/hbmk2/examples/xhgtk.hbc

Removed Paths:
-------------
    trunk/harbour/contrib/examples/hbapollo/tests/hbapollo.hbl
    trunk/harbour/contrib/examples/hbgf/tests/hbgf.hbl
    trunk/harbour/contrib/examples/hbsqlit2/tests/hbsqlit2.hbl
    trunk/harbour/contrib/examples/hbwhat/tests/hbwhat.hbl
    trunk/harbour/contrib/examples/terminal/terminal.hbl
    trunk/harbour/contrib/gtalleg/tests/gtallegd.hbl
    trunk/harbour/contrib/gtalleg/tests/gtallegs.hbl
    trunk/harbour/contrib/gtqtc/tests/gtqtc.hbl
    trunk/harbour/contrib/gtwvg/tests/gtwvg.hbl
    trunk/harbour/contrib/hbblat/tests/hbblat.hbl
    trunk/harbour/contrib/hbbtree/tests/hbbtree.hbl
    trunk/harbour/contrib/hbclipsm/tests/hbclipsm.hbl
    trunk/harbour/contrib/hbcrypt/tests/hbcrypt.hbl
    trunk/harbour/contrib/hbct/tests/hbct.hbl
    trunk/harbour/contrib/hbcurl/tests/hbcurl.hbl
    trunk/harbour/contrib/hbfbird/tests/hbfbird.hbl
    trunk/harbour/contrib/hbfimage/tests/hbfimage.hbl
    trunk/harbour/contrib/hbgd/tests/hbgd.hbl
    trunk/harbour/contrib/hbhpdf/tests/hbhpdf.hbl
    trunk/harbour/contrib/hbmisc/tests/hbmisc.hbl
    trunk/harbour/contrib/hbmsql/tests/hbmsql.hbl
    trunk/harbour/contrib/hbmysql/tests/hbmysql.hbl
    trunk/harbour/contrib/hbmysql/utils/hbmysql.hbl
    trunk/harbour/contrib/hbmzip/tests/hbmzip.hbl
    trunk/harbour/contrib/hbnf/tests/hbnf.hbl
    trunk/harbour/contrib/hbodbc/tests/hbodbc.hbl
    trunk/harbour/contrib/hbpgsql/tests/hbpgsql.hbl
    trunk/harbour/contrib/hbqt/tests/hbqt.hbl
    trunk/harbour/contrib/hbsqlit3/tests/hbsqlit3.hbl
    trunk/harbour/contrib/hbssl/tests/hbssl.hbl
    trunk/harbour/contrib/hbtip/tests/hbtip.hbl
    trunk/harbour/contrib/hbtpathy/tests/hbtpathy.hbl
    trunk/harbour/contrib/hbvpdf/tests/hbvpdf.hbl
    trunk/harbour/contrib/hbwin/tests/hbwin.hbl
    trunk/harbour/contrib/hbziparc/tests/hbziparc.hbl
    trunk/harbour/contrib/rddado/tests/rddado.hbl
    trunk/harbour/contrib/rddads/tests/rddads.hbl
    trunk/harbour/contrib/rddsql/sddmy/tests/sddmy.hbl
    trunk/harbour/contrib/rddsql/sddodbc/tests/sddodbc.hbl
    trunk/harbour/contrib/rddsql/tests/rddsql.hbl
    trunk/harbour/contrib/xhb/tests/xhb.hbl
    trunk/harbour/utils/hbmk2/examples/c4w.hbl
    trunk/harbour/utils/hbmk2/examples/contrib.hbl
    trunk/harbour/utils/hbmk2/examples/contribf.hbl
    trunk/harbour/utils/hbmk2/examples/fwh.hbl
    trunk/harbour/utils/hbmk2/examples/hmg.hbl
    trunk/harbour/utils/hbmk2/examples/hwgui.hbl
    trunk/harbour/utils/hbmk2/examples/whoo.hbl
    trunk/harbour/utils/hbmk2/examples/xbgtk.hbl
    trunk/harbour/utils/hbmk2/examples/xhgtk.hbl


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From kadziola at tlen.pl  Thu May 28 02:35:10 2009
From: kadziola at tlen.pl (Jaroslaw Kadziola)
Date: Thu May 28 02:35:18 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104]  trunk/harbour
In-Reply-To: <1108555890.20090527184359@tlen.pl>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<173100328.20090522134457@tlen.pl>
	<20090522121122.GA2212@uran.home.aster.pl>
	<1486517337.20090526115433@tlen.pl>
	<4C8C519E-6E96-4B16-9F2B-443687164190@syenar.hu>
	<1005233192.20090526144629@tlen.pl>
	<18d502870905260551n2fe9919dide100bf68008e019@mail.gmail.com>
	<1604120678.20090527102425@tlen.pl>
	<18d502870905270150n1a15eca3p17d8f1f791a85349@mail.gmail.com>
	<1108555890.20090527184359@tlen.pl>
Message-ID: <536023224.20090528083510@tlen.pl>

Hello,


JK> After SVN 11149 i can build hbsuper.lib with msys + mingw.
JK> Tomorrow i'll try compile my app with this library.
JK> Thanks so lot.

When i'm trying compile my .prg file with 'hbsuper.lib' i get :

$ hbmk2 rzm_h -l/hb-mingwarm/lib/libhbsuper.a  -l/hb-mingwarm/lib/libhbct.a -l/hb-mingwarm/lib/libhbwin.a
hbmk: Processing configuration: C:\msys\1.0\hb-mingwarm\bin\hbmk.cfg             
Harbour 1.1.0dev (Rev. 11135)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 'rzm_h.prg'...
Lines 5646, Functions/Procedures 80
Generating C source output to 'rzm_h.c'... Done.
C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0x5c): undefined reference to `HB_FUN_RAT_ON'
C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0x7c): undefined reference to `HB_FUN_RAT_LEFTB'
C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0x8c): undefined reference to `HB_FUN_RAT_ROWL'
C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0x9c): undefined reference to `HB_FUN_RAT_COLL'
C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0xac): undefined reference to `HB_FUN_RAT_RIGHTB'
C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0xbc): undefined reference to `HB_FUN_RAT_ROWR'
C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0xcc): undefined reference to `HB_FUN_RAT_COLR'
C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0x11c): undefined reference to `HB_FUN_RAT_OFF'
C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0x14c): undefined reference to `HB_FUN_RAT_LBHD'
C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0x16c): undefined reference to `HB_FUN_RAT_RBHD'
C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0x1ac): undefined reference to `HB_FUN_RAT_EXIST'
collect2: ld returned 1 exit status
hbmk: Error: Running linker. 1                                                   
C:/msys/1.0/opt/mingw32ce/bin\arm-wince-mingw32ce-gcc.exe rzm_h.o hbmk_gr1roz.o    -Wl,--start-group
C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a C:/msys/1.0/hb-mingwarm/lib/libhbct.a C:/msys/1.0/hb-mingwarm/lib/libhbwin.a
-lhbcpage -lhblang -lhbcommon -lhbcplr -lhbdebug -lhbvm -lhbrdd -lhbusrrdd -lhbuddall -lhbhsx -lhbsix -lrddntx -lrddnsx
-lrddcdx -lrddfpt -lhbrtl -lhbpp -lhbmacro -lhbextern -lgtcgi -lgtpca -lgtstd -lgtwvt -lgtgui -lhbpcre -lhbzlib -lwininet
-lws2 -lcommdlg -lcommctrl -luuid -lole32 -Wl,--end-group -orzm_h.exe -LC:/msys/1.0/hb-mingwarm/lib

I don't use these functions in my app. Any help would be appreciated.

-- 
Regards,
 Jaroslaw Kadziola

From M.Horodyski at pzuzycie.com.pl  Thu May 28 02:42:51 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu May 28 02:42:58 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <20090527161734.GA32569@uran.home.aster.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C95023D0F95@PINK.zycie.pzu>

>-----Original Message-----
>From: Przemyslaw Czerpak [mailto:druzus@acn.waw.pl] 
>Sent: Wednesday, May 27, 2009 6:18 PM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] gcc 4.4.0 warnings

[ ... ]
>to reduce the compilation time (-gc3 strongly increase the time).
>The build time with -j5 (I have 3 CPU machine) make parameters:


-gc3 increase time or speed ?
When time - that is compilation time or execution app ?

Regards,
Marek Horodyski
From harbour.01 at syenar.hu  Thu May 28 02:55:22 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 28 02:55:28 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104] 
	trunk/harbour
In-Reply-To: <536023224.20090528083510@tlen.pl>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<20090522121122.GA2212@uran.home.aster.pl>
	<1486517337.20090526115433@tlen.pl>
	<4C8C519E-6E96-4B16-9F2B-443687164190@syenar.hu>
	<1005233192.20090526144629@tlen.pl>
	<18d502870905260551n2fe9919dide100bf68008e019@mail.gmail.com>
	<1604120678.20090527102425@tlen.pl>
	<18d502870905270150n1a15eca3p17d8f1f791a85349@mail.gmail.com>
	<1108555890.20090527184359@tlen.pl> <536023224.20090528083510@tlen.pl>
Message-ID: <18d502870905272355l345212d4ld5343c2814873233@mail.gmail.com>

These belong to the mouse functionality implemented as .asm code.

Try with these rewritten versions in .prg:

--- s_mouse.prg
/* Copyright 2009 Viktor Szakats <harbour.01 syenar.hu> */

PROCEDURE RAT_ON()
   MShow()
   RETURN

PROCEDURE RAT_OFF()
   MHide()
   RETURN

FUNCTION RAT_ROW()
   RETURN MRow()

FUNCTION RAT_COL()
   RETURN MCol()

PROCEDURE RAT_POSIT( nRow, nCol )
   MSetPos( nRow, nCol )
   RETURN

FUNCTION RAT_EXIST()
   RETURN MPresent()

PROCEDURE RAT_AREA( nTop, nLeft, nBottom, nRight )
   MSetBounds( nTop, nLeft, nBottom, nRight )
   RETURN

FUNCTION RAT_LBHD
   RETURN MLeftDown()

FUNCTION RAT_RBHD
   RETURN MRightDown()

/* Dummy calls in Harbour */

PROCEDURE RAT_RESET()
   RETURN

PROCEDURE RAT_NOMOUS()
   RETURN

PROCEDURE RAT_FORCE()
   RETURN

/* TOFIX: Just an approximation of the original functionality for
functions below */

FUNCTION RAT_ROWL()
   RETURN MRow()

FUNCTION RAT_ROWR()
   RETURN MRow()

FUNCTION RAT_COLL()
   RETURN MCol()

FUNCTION RAT_COLR()
   RETURN MCol()

FUNCTION RAT_LEFTB()
   RETURN MLeftDown()

FUNCTION RAT_RIGHTB()
   RETURN MRightDown()
---

Brgds,
Viktor

On Thu, May 28, 2009 at 8:35 AM, Jaroslaw Kadziola <kadziola@tlen.pl> wrote:
> Hello,
>
>
> JK> After SVN 11149 i can build hbsuper.lib with msys + mingw.
> JK> Tomorrow i'll try compile my app with this library.
> JK> Thanks so lot.
>
> When i'm trying compile my .prg file with 'hbsuper.lib' i get :
>
> $ hbmk2 rzm_h -l/hb-mingwarm/lib/libhbsuper.a ?-l/hb-mingwarm/lib/libhbct.a -l/hb-mingwarm/lib/libhbwin.a
> hbmk: Processing configuration: C:\msys\1.0\hb-mingwarm\bin\hbmk.cfg
> Harbour 1.1.0dev (Rev. 11135)
> Copyright (c) 1999-2009, http://www.harbour-project.org/
> Compiling 'rzm_h.prg'...
> Lines 5646, Functions/Procedures 80
> Generating C source output to 'rzm_h.c'... Done.
> C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0x5c): undefined reference to `HB_FUN_RAT_ON'
> C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0x7c): undefined reference to `HB_FUN_RAT_LEFTB'
> C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0x8c): undefined reference to `HB_FUN_RAT_ROWL'
> C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0x9c): undefined reference to `HB_FUN_RAT_COLL'
> C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0xac): undefined reference to `HB_FUN_RAT_RIGHTB'
> C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0xbc): undefined reference to `HB_FUN_RAT_ROWR'
> C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0xcc): undefined reference to `HB_FUN_RAT_COLR'
> C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0x11c): undefined reference to `HB_FUN_RAT_OFF'
> C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0x14c): undefined reference to `HB_FUN_RAT_LBHD'
> C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0x16c): undefined reference to `HB_FUN_RAT_RBHD'
> C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a(s_moose.o):s_moose.c:(.data+0x1ac): undefined reference to `HB_FUN_RAT_EXIST'
> collect2: ld returned 1 exit status
> hbmk: Error: Running linker. 1
> C:/msys/1.0/opt/mingw32ce/bin\arm-wince-mingw32ce-gcc.exe rzm_h.o hbmk_gr1roz.o ? ?-Wl,--start-group
> C:/msys/1.0/hb-mingwarm/lib/libhbsuper.a C:/msys/1.0/hb-mingwarm/lib/libhbct.a C:/msys/1.0/hb-mingwarm/lib/libhbwin.a
> -lhbcpage -lhblang -lhbcommon -lhbcplr -lhbdebug -lhbvm -lhbrdd -lhbusrrdd -lhbuddall -lhbhsx -lhbsix -lrddntx -lrddnsx
> -lrddcdx -lrddfpt -lhbrtl -lhbpp -lhbmacro -lhbextern -lgtcgi -lgtpca -lgtstd -lgtwvt -lgtgui -lhbpcre -lhbzlib -lwininet
> -lws2 -lcommdlg -lcommctrl -luuid -lole32 -Wl,--end-group -orzm_h.exe -LC:/msys/1.0/hb-mingwarm/lib
>
> I don't use these functions in my app. Any help would be appreciated.
>
> --
> Regards,
> ?Jaroslaw Kadziola
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From harbour.01 at syenar.hu  Thu May 28 02:57:25 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 28 02:57:31 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C95023D0F95@PINK.zycie.pzu>
References: <20090527161734.GA32569@uran.home.aster.pl>
	<FFAFD6EA63A3FC4784FBDA52BE7A7C95023D0F95@PINK.zycie.pzu>
Message-ID: <18d502870905272357r1ab395cele3f401f28e85fc39@mail.gmail.com>

> [ ... ]
>>to reduce the compilation time (-gc3 strongly increase the time).
>>The build time with -j5 (I have 3 CPU machine) make parameters:
>
>
> -gc3 increase time or speed ?
> When time - that is compilation time or execution app ?

It increases compilation time as the amount and complexity
of Harbour generated .c code is much higher. The compiled
object is also significantly larger.

It also increase execution speed in many situations.

Brgds,
Viktor
From M.Horodyski at pzuzycie.com.pl  Thu May 28 03:04:51 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu May 28 03:04:57 2009
Subject: [Harbour] How Benchmark a rdd for shared access?
In-Reply-To: <609353e70905271256t6986af90m78b4b221927ca620@mail.gmail.com>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C95023D0FAD@PINK.zycie.pzu>

>-----Original Message-----
>From: Massimo Belgrano [mailto:mbelgrano@deltain.it] 
>Sent: Wednesday, May 27, 2009 9:57 PM
>To: Harbour Project Main Developer List.
>Subject: [Harbour] How Benchmark a rdd for shared access?
>
>The idea is Benchmark the performance of a generic a rdd (with 
>or without index support) Counting how many record for secs 
>have processed for append,skip,index,seek,set filter How 
>possible Measure in Kbps read and write?
>Is possible measure concurrent access  for skip test using 
>MultiThread is right approach?
>Please share here any opinion
>follow is a basic sample for explain idea

Massimo, DBFRDD is fastest off all. Really. In particular DBFNTX.
But today we mus fast parse text, link text to html page, have acces to
different dbms, fast execution pcode.

Regards,
Marek Horodyski
From vouchcac at users.sourceforge.net  Thu May 28 03:24:56 2009
From: vouchcac at users.sourceforge.net (vouchcac@users.sourceforge.net)
Date: Thu May 28 03:25:00 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11156] trunk/harbour
Message-ID: <E1M9Zyy-0003QV-PG@3kljzd1.ch3.sourceforge.com>

Revision: 11156
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11156&view=rev
Author:   vouchcac
Date:     2009-05-28 07:24:55 +0000 (Thu, 28 May 2009)

Log Message:
-----------
2009-05-28 00:19 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * contrib/gtwvg/wvgwin.c
    ! Small fix to previous commit.

  * contrib/gtwvg/wvgax.c
  * contrib/gtwvg/wvgsink.c
    ! Widely cleaned code.
    ! Make use of remaining number to pointers.
    ! Renamed functions to WVG_* namespace.
    ! WvgActiveXControl() can be tested both with winsink|axcore event handellers.
      NOTE: CPP mode generates a GPF when ole is unloaded due to refcount.
            Mindaugas can you fix it.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtwvg/wvgax.prg
    trunk/harbour/contrib/gtwvg/wvgsink.c
    trunk/harbour/contrib/gtwvg/wvgwin.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From mbelgrano at deltain.it  Thu May 28 03:26:52 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu May 28 03:27:17 2009
Subject: [Harbour] Error compiling harbour from svn with msvc 2008
Message-ID: <609353e70905280026h4d7ff50er4a642994b7cc331a@mail.gmail.com>

compiling harbour from svv 2009-05-28 08:20 UTC+0200 Viktor Szakats
(harbour.01 syenar hu)

mingw32-make.exe[3]: *** [wvgsink.obj] Error 2
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[1]: *** [gtwvg.inst] Error 2
mingw32-make.exe: *** [contrib.inst] Error 2

C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\winuser.h(1706)
: warning C4005: 'GCLP_HBRBACKGROUND': ridefinizione macro
        ../../wvgwin.c(89): vedere la precedente definizione di
'GCLP_HBRBACKGROUND'
cl.exe -nologo -I. -I../../../../include -Gs -TP -W4 -wd4127 -Ot2b1
-EHs-c- -MT   -I../../../../contrib/hbwin  -c ../../wvgsink.c
-Fowvgsink.obj
wvgsink.c
../../wvgsink.c(214) : error C2143: errore di sintassi: ';' mancante
prima di '*'
../../wvgsink.c(214) : error C4430: identificatore di tipo mancante,
verr? utilizzato int. Nota: default-int non ? pi? supportato in C++
../../wvgsink.c(214) : error C4430: identificatore di tipo mancante,
verr? utilizzato int. Nota: default-int non ? pi? supportato in C++
../../wvgsink.c(237) : error C2227: l'elemento a sinistra di
'->AddRef' deve puntare a un tipo classe, struttura, unione o generico
        il tipo ? ''unknown-type''
../../wvgsink.c(237) : error C3861: 'HB_VTBL': identificatore non trovato
../../wvgsink.c(237) : error C3861: 'HB_THIS': identificatore non trovato
../../wvgsink.c(247) : error C2227: l'elemento a sinistra di
'->AddRef' deve puntare a un tipo classe, struttura, unione o generico
        il tipo ? ''unknown-type''
../../wvgsink.c(247) : error C3861: 'HB_VTBL': identificatore non trovato
../../wvgsink.c(247) : error C3861: 'HB_THIS': identificatore non trovato
../../wvgsink.c(259) : error C2227: l'elemento a sinistra di
'->AddRef' deve puntare a un tipo classe, struttura, unione o generico
        il tipo ? ''unknown-type''
../../wvgsink.c(259) : error C3861: 'HB_VTBL': identificatore non trovato
../../wvgsink.c(259) : error C3861: 'HB_THIS': identificatore non trovato
../../wvgsink.c(268) : error C2365: 'AddRef': ridefinizione. La
definizione precedente era 'identificatore precedentemente
sconosciuto'
../../wvgsink.c(428) : error C4430: identificatore di tipo mancante,
verr? utilizzato int. Nota: default-int non ? pi? supportato in C++
../../wvgsink.c(428) : error C2146: errore di sintassi: ';' mancante
prima dell'identificatore 'IEventHandler_Vtbl'
../../wvgsink.c(428) : error C4430: identificatore di tipo mancante,
verr? utilizzato int. Nota: default-int non ? pi? supportato in C++
../../wvgsink.c(430) : error C2440: 'inizializzazione': impossibile
convertire da 'HRESULT (__stdcall *)(IEventHandler *,const IID &,void
**)' a 'int'
        Non vi sono contesti in cui sia possibile eseguire questa conversione
../../wvgsink.c(431) : error C2078: troppi inizializzatori
../../wvgsink.c(460) : error C2039: 'lpVtbl': non ? un membro di
'MyRealIEventHandler'
        ../../wvgsink.c(213): vedere la dichiarazione di 'MyRealIEventHandler'
../../wvgsink.c(460) : error C2059: errore di sintassi: ')'
../../wvgsink.c(465) : error C2227: l'elemento a sinistra di
'->QueryInterface' deve puntare a un tipo classe, struttura, unione o
generico
        il tipo ? ''unknown-type''
../../wvgsink.c(465) : error C3861: 'HB_VTBL': identificatore non trovato
../../wvgsink.c(465) : error C3861: 'HB_THIS_': identificatore non trovato
../../wvgsink.c(468) : error C2227: l'elemento a sinistra di
'->QueryInterface' deve puntare a un tipo classe, struttura, unione o
generico
        il tipo ? ''unknown-type''
../../wvgsink.c(468) : error C3861: 'HB_VTBL': identificatore non trovato
../../wvgsink.c(468) : error C3861: 'HB_THIS_': identificatore non trovato
../../wvgsink.c(471) : error C2227: l'elemento a sinistra di
'->EnumConnectionPoints' deve puntare a un tipo classe, struttura,
unione o generico
        il tipo ? ''unknown-type''
../../wvgsink.c(471) : error C3861: 'HB_VTBL': identificatore non trovato
../../wvgsink.c(471) : error C3861: 'HB_THIS_': identificatore non trovato
../../wvgsink.c(476) : error C2227: l'elemento a sinistra di '->Next'
deve puntare a un tipo classe, struttura, unione o generico
        il tipo ? ''unknown-type''
../../wvgsink.c(476) : error C2143: errore di sintassi: ')' mancante
prima di 'constant'
../../wvgsink.c(476) : error C2059: errore di sintassi: ')'
../../wvgsink.c(476) : error C3861: 'HB_VTBL': identificatore non trovato
../../wvgsink.c(476) : error C3861: 'HB_THIS_': identificatore non trovato
../../wvgsink.c(479) : error C2227: l'elemento a sinistra di
'->GetConnectionInterface' deve puntare a un tipo classe, struttura,
unione o generico
        il tipo ? ''unknown-type''
../../wvgsink.c(479) : error C3861: 'HB_VTBL': identificatore non trovato
../../wvgsink.c(479) : error C3861: 'HB_THIS_': identificatore non trovato
../../wvgsink.c(490) : error C2227: l'elemento a sinistra di
'->Advise' deve puntare a un tipo classe, struttura, unione o generico
        il tipo ? ''unknown-type''
../../wvgsink.c(490) : error C2146: errore di sintassi: ')' mancante
prima dell'identificatore 'pIUnknown'
../../wvgsink.c(490) : error C2059: errore di sintassi: ')'
../../wvgsink.c(490) : error C3861: 'HB_VTBL': identificatore non trovato
../../wvgsink.c(490) : error C3861: 'HB_THIS_': identificatore non trovato
../../wvgsink.c(503) : error C2227: l'elemento a sinistra di
'->Release' deve puntare a un tipo classe, struttura, unione o
generico
        il tipo ? ''unknown-type''
../../wvgsink.c(503) : error C3861: 'HB_VTBL': identificatore non trovato
../../wvgsink.c(503) : error C3861: 'HB_THIS': identificatore non trovato
../../wvgsink.c(506) : error C2227: l'elemento a sinistra di
'->Release' deve puntare a un tipo classe, struttura, unione o
generico
        il tipo ? ''unknown-type''
../../wvgsink.c(506) : error C3861: 'HB_VTBL': identificatore non trovato
../../wvgsink.c(506) : error C3861: 'HB_THIS': identificatore non trovato
../../wvgsink.c(509) : error C2227: l'elemento a sinistra di
'->Release' deve puntare a un tipo classe, struttura, unione o
generico
        il tipo ? ''unknown-type''
../../wvgsink.c(509) : error C3861: 'HB_VTBL': identificatore non trovato
../../wvgsink.c(509) : error C3861: 'HB_THIS': identificatore non trovato
../../wvgsink.c(529) : error C2227: l'elemento a sinistra di
'->Release' deve puntare a un tipo classe, struttura, unione o
generico
        il tipo ? ''unknown-type''
../../wvgsink.c(529) : error C3861: 'HB_VTBL': identificatore non trovato
../../wvgsink.c(529) : error C3861: 'HB_THIS': identificatore non trovato
../../wvgsink.c(686) : error C2227: l'elemento a sinistra di
'->QueryInterface' deve puntare a un tipo classe, struttura, unione o
generico
        il tipo ? ''unknown-type''
../../wvgsink.c(686) : error C3861: 'HB_VTBL': identificatore non trovato
../../wvgsink.c(686) : error C3861: 'HB_THIS_': identificatore non trovato
../../wvgsink.c(687) : error C2227: l'elemento a sinistra di
'->Release' deve puntare a un tipo classe, struttura, unione o
generico
        il tipo ? ''unknown-type''
../../wvgsink.c(687) : error C3861: 'HB_VTBL': identificatore non trovato
../../wvgsink.c(687) : error C3861: 'HB_THIS': identificatore non trovato
../../wvgsink.c(739) : error C2227: l'elemento a sinistra di
'->QueryInterface' deve puntare a un tipo classe, struttura, unione o
generico
        il tipo ? ''unknown-type''
../../wvgsink.c(739) : error C3861: 'HB_VTBL': identificatore non trovato
../../wvgsink.c(739) : error C3861: 'HB_THIS_': identificatore non trovato
../../wvgsink.c(740) : error C2227: l'elemento a sinistra di
'->Release' deve puntare a un tipo classe, struttura, unione o
generico
        il tipo ? ''unknown-type''
../../wvgsink.c(740) : error C3861: 'HB_VTBL': identificatore non trovato
../../wvgsink.c(740) : error C3861: 'HB_THIS': identificatore non trovato
../../wvgsink.c(781) : error C2227: l'elemento a sinistra di
'->QueryInterface' deve puntare a un tipo classe, struttura, unione o
generico
        il tipo ? ''unknown-type''
../../wvgsink.c(781) : error C3861: 'HB_VTBL': identificatore non trovato
../../wvgsink.c(781) : error C3861: 'HB_THIS_': identificatore non trovato
../../wvgsink.c(785) : error C2227: l'elemento a sinistra di
'->Release' deve puntare a un tipo classe, struttura, unione o
generico
        il tipo ? ''unknown-type''
../../wvgsink.c(785) : error C3861: 'HB_VTBL': identificatore non trovato
../../wvgsink.c(785) : error C3861: 'HB_THIS': identificatore non trovato
../../wvgsink.c(787) : error C2227: l'elemento a sinistra di
'->GetClientSite' deve puntare a un tipo classe, struttura, unione o
generico
        il tipo ? ''unknown-type''
../../wvgsink.c(787) : error C3861: 'HB_VTBL': identificatore non trovato
../../wvgsink.c(787) : error C3861: 'HB_THIS_': identificatore non trovato
../../wvgsink.c(795) : error C2227: l'elemento a sinistra di
'->DoVerb' deve puntare a un tipo classe, struttura, unione o generico
        il tipo ? ''unknown-type''
../../wvgsink.c(795) : error C2146: errore di sintassi: ')' mancante
prima dell'identificatore 'hb_parni'
../../wvgsink.c(795) : error C2059: errore di sintassi: ')'
-- 
Massimo Belgrano
From mbelgrano at deltain.it  Thu May 28 03:41:26 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu May 28 03:41:51 2009
Subject: [Harbour] How Benchmark a rdd for shared access?
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C95023D0FAD@PINK.zycie.pzu>
References: <609353e70905271256t6986af90m78b4b221927ca620@mail.gmail.com> 
	<FFAFD6EA63A3FC4784FBDA52BE7A7C95023D0FAD@PINK.zycie.pzu>
Message-ID: <609353e70905280041l291974e3o76f377d43ee10500@mail.gmail.com>

In harbour minigui there is some solution
. MINISCRIPT PROJECT GOALS
The main project goal is to write a Harbour MiniGUI to JavaScript/HTML
translator.The translator must generate pages containing
HTML+JavaScript code with equivalent functionality to the original
(source) HMG program.
Because JavaScript and web browsers limitations, the translator will
support only a SMALL SUBSET of current Harbour+MiniGUI features.
Data will be accessed via XmlHttpRequest object (client side).
Server side code (returning the data to XmlHttpRequest object) will be
implemented via GENERIC routines (reusable for all programs) written
in PHP.
The backend database will be MySql.
 Harbour To Java, then compile Java with the Google Web Toolkit (GWT).

http://www.hmgforum.com/viewtopic.php?f=5&t=38
http://www.hmgforum.com/viewforum.php?f=17


2009/5/28 Horodyski Marek (PZUZ) <M.Horodyski@pzuzycie.com.pl>:
>>-----Original Message-----
>>From: Massimo Belgrano [mailto:mbelgrano@deltain.it]
>>Sent: Wednesday, May 27, 2009 9:57 PM
>>To: Harbour Project Main Developer List.
>>Subject: [Harbour] How Benchmark a rdd for shared access?
>>
>>The idea is Benchmark the performance of a generic a rdd (with
>>or without index support) Counting how many record for secs
>>have processed for append,skip,index,seek,set filter How
>>possible Measure in Kbps read and write?
>>Is possible measure concurrent access ?for skip test using
>>MultiThread is right approach?
>>Please share here any opinion
>>follow is a basic sample for explain idea
>
> Massimo, DBFRDD is fastest off all. Really. In particular DBFNTX.
> But today we mus fast parse text, link text to html page, have acces to
> different dbms, fast execution pcode.
>
> Regards,
> Marek Horodyski
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From vszakats at users.sourceforge.net  Thu May 28 03:44:08 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu May 28 03:44:13 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11157] trunk/harbour
Message-ID: <E1M9aHY-0007iO-9Z@d5vjzd1.ch3.sourceforge.com>

Revision: 11157
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11157&view=rev
Author:   vszakats
Date:     2009-05-28 07:44:07 +0000 (Thu, 28 May 2009)

Log Message:
-----------
2009-05-28 09:43 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/gtwvg/wvgsink.c
    ! Minor fix to returning HRESULT.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtwvg/wvgsink.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From mbelgrano at deltain.it  Thu May 28 03:46:32 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu May 28 03:46:57 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11156] trunk/harbour
In-Reply-To: <E1M9Zyy-0003QV-PG@3kljzd1.ch3.sourceforge.com>
References: <E1M9Zyy-0003QV-PG@3kljzd1.ch3.sourceforge.com>
Message-ID: <609353e70905280046u53fa4e35t7821dcda74c4448d@mail.gmail.com>

But it was not decided about XBP_* namespace instead WVG_*.?

2009/5/28  <vouchcac@users.sourceforge.net>:
> Revision: 11156
> ? ? ? ? ?http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11156&view=rev
> Author: ? vouchcac
> Date: ? ? 2009-05-28 07:24:55 +0000 (Thu, 28 May 2009)
>
> Log Message:
> -----------
> 2009-05-28 00:19 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
> ?* contrib/gtwvg/wvgwin.c
> ? ?! Small fix to previous commit.
>
> ?* contrib/gtwvg/wvgax.c
> ?* contrib/gtwvg/wvgsink.c
> ? ?! Widely cleaned code.
> ? ?! Make use of remaining number to pointers.
> ? ?! Renamed functions to WVG_* namespace.
> ? ?! WvgActiveXControl() can be tested both with winsink|axcore event handellers.
> ? ? ?NOTE: CPP mode generates a GPF when ole is unloaded due to refcount.
> ? ? ? ? ? ?Mindaugas can you fix it.
>
> Modified Paths:
> --------------
> ? ?trunk/harbour/ChangeLog
> ? ?trunk/harbour/contrib/gtwvg/wvgax.prg
> ? ?trunk/harbour/contrib/gtwvg/wvgsink.c
> ? ?trunk/harbour/contrib/gtwvg/wvgwin.c
>
>
> This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From harbour.01 at syenar.hu  Thu May 28 03:52:01 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu May 28 03:52:11 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11156] trunk/harbour
In-Reply-To: <609353e70905280046u53fa4e35t7821dcda74c4448d@mail.gmail.com>
References: <E1M9Zyy-0003QV-PG@3kljzd1.ch3.sourceforge.com>
	<609353e70905280046u53fa4e35t7821dcda74c4448d@mail.gmail.com>
Message-ID: <7A2701D1-8C63-4B7B-AEDD-B1F949916324@syenar.hu>

> But it was not decided about XBP_* namespace instead WVG_*.?

XBP_* namespace was decided for XBase++ visual classes
implemented in a separate lib called hbxbp.

Brgds,
Viktor

>
> 2009/5/28  <vouchcac@users.sourceforge.net>:
>> Revision: 11156
>>          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11156&view=rev
>> Author:   vouchcac
>> Date:     2009-05-28 07:24:55 +0000 (Thu, 28 May 2009)
>>
>> Log Message:
>> -----------
>> 2009-05-28 00:19 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>>  * contrib/gtwvg/wvgwin.c
>>    ! Small fix to previous commit.
>>
>>  * contrib/gtwvg/wvgax.c
>>  * contrib/gtwvg/wvgsink.c
>>    ! Widely cleaned code.
>>    ! Make use of remaining number to pointers.
>>    ! Renamed functions to WVG_* namespace.
>>    ! WvgActiveXControl() can be tested both with winsink|axcore  
>> event handellers.
>>      NOTE: CPP mode generates a GPF when ole is unloaded due to  
>> refcount.
>>            Mindaugas can you fix it.
>>
>> Modified Paths:
>> --------------
>>    trunk/harbour/ChangeLog
>>    trunk/harbour/contrib/gtwvg/wvgax.prg
>>    trunk/harbour/contrib/gtwvg/wvgsink.c
>>    trunk/harbour/contrib/gtwvg/wvgwin.c
>>
>>
>> This was sent by the SourceForge.net collaborative development  
>> platform, the world's largest Open Source development site.
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
>
>
> -- 
> Massimo Belgrano
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From bedipritpal at hotmail.com  Thu May 28 03:55:15 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu May 28 03:55:20 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11156] trunk/harbour
In-Reply-To: <609353e70905280046u53fa4e35t7821dcda74c4448d@mail.gmail.com>
References: <E1M9Zyy-0003QV-PG@3kljzd1.ch3.sourceforge.com>
	<609353e70905280046u53fa4e35t7821dcda74c4448d@mail.gmail.com>
Message-ID: <23756920.post@talk.nabble.com>


Hi


Massimo Belgrano-3 wrote:
> 
> But it was not decided about XBP_* namespace instead WVG_*.?
> 

Perhaps you tend to skip few things.

Xbp_* namespace will be used as in Xbase++ in QT implementation.
For windows it will remains as is.

Viktor, Massimo's request is valid though.
Should I change XBase++ parts from WVG to XBP.
It will also help in developing QT base properly.
Otherwise I will end up writing two versions of the same 
PRG code.

Few Xbase++ users have found it to be tedius.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-11156--trunk-harbour-tp23756543p23756920.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Thu May 28 03:56:34 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu May 28 03:56:59 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11156] trunk/harbour
In-Reply-To: <7A2701D1-8C63-4B7B-AEDD-B1F949916324@syenar.hu>
References: <E1M9Zyy-0003QV-PG@3kljzd1.ch3.sourceforge.com> 
	<609353e70905280046u53fa4e35t7821dcda74c4448d@mail.gmail.com> 
	<7A2701D1-8C63-4B7B-AEDD-B1F949916324@syenar.hu>
Message-ID: <609353e70905280056o5fcb64fdw5338d392f400bb61@mail.gmail.com>

WvgActiveXControl cited on your changelog  is XbpActiveXControl in xbase++

2009/5/28 Szak?ts Viktor <harbour.01@syenar.hu>:
>> But it was not decided about XBP_* namespace instead WVG_*.?
>
> XBP_* namespace was decided for XBase++ visual classes
> implemented in a separate lib called hbxbp.
>
> Brgds,
> Viktor
>
>>
>> 2009/5/28 ?<vouchcac@users.sourceforge.net>:
>>>
>>> Revision: 11156
>>>
>>> http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11156&view=rev
>>> Author: ? vouchcac
>>> Date: ? ? 2009-05-28 07:24:55 +0000 (Thu, 28 May 2009)
>>>
>>> Log Message:
>>> -----------
>>> 2009-05-28 00:19 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>>> ?* contrib/gtwvg/wvgwin.c
>>> ? ! Small fix to previous commit.
>>>
>>> ?* contrib/gtwvg/wvgax.c
>>> ?* contrib/gtwvg/wvgsink.c
>>> ? ! Widely cleaned code.
>>> ? ! Make use of remaining number to pointers.
>>> ? ! Renamed functions to WVG_* namespace.
>>> ? ! WvgActiveXControl() can be tested both with winsink|axcore event
>>> handellers.
>>> ? ? NOTE: CPP mode generates a GPF when ole is unloaded due to refcount.
>>> ? ? ? ? ? Mindaugas can you fix it.
>>>
>>> Modified Paths:
>>> --------------
>>> ? trunk/harbour/ChangeLog
>>> ? trunk/harbour/contrib/gtwvg/wvgax.prg
>>> ? trunk/harbour/contrib/gtwvg/wvgsink.c
>>> ? trunk/harbour/contrib/gtwvg/wvgwin.c
>>>
>>>
>>> This was sent by the SourceForge.net collaborative development platform,
>>> the world's largest Open Source development site.
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>>
>>
>>
>>
>> --
>> Massimo Belgrano
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From mbelgrano at deltain.it  Thu May 28 04:09:15 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu May 28 04:09:41 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11156] trunk/harbour
In-Reply-To: <23756920.post@talk.nabble.com>
References: <E1M9Zyy-0003QV-PG@3kljzd1.ch3.sourceforge.com> 
	<609353e70905280046u53fa4e35t7821dcda74c4448d@mail.gmail.com> 
	<23756920.post@talk.nabble.com>
Message-ID: <609353e70905280109wb1e4a0t86d182671e38a11c@mail.gmail.com>

if you should change XBase++ parts from WVG to XBp, please do
IMO is Better for xbase user, also for find documentation ecc
Do you think that is possible (imo not important)  made coexistence vwg /qt?
same problem is for all compatibility class also if you implement
gtwvg  emulation for either gt lib wvg/qt
Can you write a separate emulation lib?
can you  use same code with preprocessor trip


2009/5/28 Pritpal Bedi <bedipritpal@hotmail.com>:
>
> Hi
>
>
> Massimo Belgrano-3 wrote:
>>
>> But it was not decided about XBP_* namespace instead WVG_*.?
>>
>
> Perhaps you tend to skip few things.
>
> Xbp_* namespace will be used as in Xbase++ in QT implementation.
> For windows it will remains as is.
>
> Viktor, Massimo's request is valid though.
> Should I change XBase++ parts from WVG to XBP.
> It will also help in developing QT base properly.
> Otherwise I will end up writing two versions of the same
> PRG code.
>
> Few Xbase++ users have found it to be tedius.
>
> Regards
> Pritpal Bedi
>
> --
> View this message in context: http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-11156--trunk-harbour-tp23756543p23756920.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From harbour.01 at syenar.hu  Thu May 28 04:11:01 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 28 04:11:08 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11156] trunk/harbour
In-Reply-To: <609353e70905280056o5fcb64fdw5338d392f400bb61@mail.gmail.com>
References: <E1M9Zyy-0003QV-PG@3kljzd1.ch3.sourceforge.com>
	<609353e70905280046u53fa4e35t7821dcda74c4448d@mail.gmail.com>
	<7A2701D1-8C63-4B7B-AEDD-B1F949916324@syenar.hu>
	<609353e70905280056o5fcb64fdw5338d392f400bb61@mail.gmail.com>
Message-ID: <18d502870905280111x4cbb8b6apda286fde01315cc7@mail.gmail.com>

On Thu, May 28, 2009 at 9:56 AM, Massimo Belgrano <mbelgrano@deltain.it> wrote:
> WvgActiveXControl cited on your changelog ?is XbpActiveXControl in xbase++

The current name is right. We've agreed that such Xbase++-like classes
implemented in GTWVG get the names WVG* to not block us from creating
a portable, standalone Xbase++ compatibility lib.

If such compatibility class will be implemented in Harbour, it should be
done in hbxbp, built on AX facilities implemented in hbwin.

Brgds,
Viktor
From harbour.01 at syenar.hu  Thu May 28 04:14:14 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 28 04:14:20 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11156] trunk/harbour
In-Reply-To: <609353e70905280109wb1e4a0t86d182671e38a11c@mail.gmail.com>
References: <E1M9Zyy-0003QV-PG@3kljzd1.ch3.sourceforge.com>
	<609353e70905280046u53fa4e35t7821dcda74c4448d@mail.gmail.com>
	<23756920.post@talk.nabble.com>
	<609353e70905280109wb1e4a0t86d182671e38a11c@mail.gmail.com>
Message-ID: <18d502870905280114j42baa113le93e649fdceb0950@mail.gmail.com>

Massimo, please don't spread confusion regarding this matter,
WVG *is not* an Xbase++ compatibility lib. First because it does
other things (it's a GT in the first place), secondly because it
isn't portable.

Brgds,
Viktor

On Thu, May 28, 2009 at 10:09 AM, Massimo Belgrano <mbelgrano@deltain.it> wrote:
> if you should change XBase++ parts from WVG to XBp, please do
> IMO is Better for xbase user, also for find documentation ecc
> Do you think that is possible (imo not important) ?made coexistence vwg /qt?
> same problem is for all compatibility class also if you implement
> gtwvg ?emulation for either gt lib wvg/qt
> Can you write a separate emulation lib?
> can you ?use same code with preprocessor trip
>
>
> 2009/5/28 Pritpal Bedi <bedipritpal@hotmail.com>:
>>
>> Hi
>>
>>
>> Massimo Belgrano-3 wrote:
>>>
>>> But it was not decided about XBP_* namespace instead WVG_*.?
>>>
>>
>> Perhaps you tend to skip few things.
>>
>> Xbp_* namespace will be used as in Xbase++ in QT implementation.
>> For windows it will remains as is.
>>
>> Viktor, Massimo's request is valid though.
>> Should I change XBase++ parts from WVG to XBP.
>> It will also help in developing QT base properly.
>> Otherwise I will end up writing two versions of the same
>> PRG code.
>>
>> Few Xbase++ users have found it to be tedius.
>>
>> Regards
>> Pritpal Bedi
>>
>> --
>> View this message in context: http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-11156--trunk-harbour-tp23756543p23756920.html
>> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
>
>
> --
> Massimo Belgrano
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From mbelgrano at deltain.it  Thu May 28 04:13:59 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu May 28 04:14:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11156] trunk/harbour
In-Reply-To: <18d502870905280111x4cbb8b6apda286fde01315cc7@mail.gmail.com>
References: <E1M9Zyy-0003QV-PG@3kljzd1.ch3.sourceforge.com> 
	<609353e70905280046u53fa4e35t7821dcda74c4448d@mail.gmail.com> 
	<7A2701D1-8C63-4B7B-AEDD-B1F949916324@syenar.hu>
	<609353e70905280056o5fcb64fdw5338d392f400bb61@mail.gmail.com> 
	<18d502870905280111x4cbb8b6apda286fde01315cc7@mail.gmail.com>
Message-ID: <609353e70905280113k272479dfu806189fe168a30d4@mail.gmail.com>

IMO The most important is that  in wvg sample referring to xbp function


2009/5/28 Viktor Szak?ts <harbour.01@syenar.hu>:
> On Thu, May 28, 2009 at 9:56 AM, Massimo Belgrano <mbelgrano@deltain.it> wrote:
>> WvgActiveXControl cited on your changelog ?is XbpActiveXControl in xbase++
>
> The current name is right. We've agreed that such Xbase++-like classes
> implemented in GTWVG get the names WVG* to not block us from creating
> a portable, standalone Xbase++ compatibility lib.
>
> If such compatibility class will be implemented in Harbour, it should be
> done in hbxbp, built on AX facilities implemented in hbwin.
>
> Brgds,
> Viktor
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From harbour.01 at syenar.hu  Thu May 28 04:21:09 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 28 04:21:15 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11156] trunk/harbour
In-Reply-To: <609353e70905280113k272479dfu806189fe168a30d4@mail.gmail.com>
References: <E1M9Zyy-0003QV-PG@3kljzd1.ch3.sourceforge.com>
	<609353e70905280046u53fa4e35t7821dcda74c4448d@mail.gmail.com>
	<7A2701D1-8C63-4B7B-AEDD-B1F949916324@syenar.hu>
	<609353e70905280056o5fcb64fdw5338d392f400bb61@mail.gmail.com>
	<18d502870905280111x4cbb8b6apda286fde01315cc7@mail.gmail.com>
	<609353e70905280113k272479dfu806189fe168a30d4@mail.gmail.com>
Message-ID: <18d502870905280121v2c88c4c6x870d9e2768e1a6c7@mail.gmail.com>

IMO the most important is not to create mess with the naming,
since it would cut us from doing anything in the future without
creating all sorts of complications.

If this issue is so pressing for you *now*, write some #translates
to fix up the names.

WVG may refer to XBP functions or functionality, but it won't
make it a portable Xbase++ compatibility lib. I suggest to read
corresponding plans posted on the list.

Brgds,
Viktor

On Thu, May 28, 2009 at 10:13 AM, Massimo Belgrano <mbelgrano@deltain.it> wrote:
> IMO The most important is that ?in wvg sample referring to xbp function
>
>
> 2009/5/28 Viktor Szak?ts <harbour.01@syenar.hu>:
>> On Thu, May 28, 2009 at 9:56 AM, Massimo Belgrano <mbelgrano@deltain.it> wrote:
>>> WvgActiveXControl cited on your changelog ?is XbpActiveXControl in xbase++
>>
>> The current name is right. We've agreed that such Xbase++-like classes
>> implemented in GTWVG get the names WVG* to not block us from creating
>> a portable, standalone Xbase++ compatibility lib.
>>
>> If such compatibility class will be implemented in Harbour, it should be
>> done in hbxbp, built on AX facilities implemented in hbwin.
>>
>> Brgds,
>> Viktor
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
>
>
> --
> Massimo Belgrano
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From druzus at acn.waw.pl  Thu May 28 04:45:31 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu May 28 04:36:21 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C95023D0F95@PINK.zycie.pzu>
References: <20090527161734.GA32569@uran.home.aster.pl>
	<FFAFD6EA63A3FC4784FBDA52BE7A7C95023D0F95@PINK.zycie.pzu>
Message-ID: <20090528084531.GA23129@uran.home.aster.pl>

On Thu, 28 May 2009, Horodyski Marek (PZUZ) wrote:

Hi,

> >to reduce the compilation time (-gc3 strongly increase the time).
> >The build time with -j5 (I have 3 CPU machine) make parameters:
> -gc3 increase time or speed ?
> When time - that is compilation time or execution app ?

It increase the compilation time and binary size.
It decrease the execution time.

best regards,
Przemek
From M.Horodyski at pzuzycie.com.pl  Thu May 28 05:19:46 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu May 28 05:19:53 2009
Subject: [Harbour] How Benchmark a rdd for shared access?
In-Reply-To: <609353e70905280041l291974e3o76f377d43ee10500@mail.gmail.com>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C95023D1032@PINK.zycie.pzu>

>-----Original Message-----
>From: Massimo Belgrano [mailto:mbelgrano@deltain.it] 
>Sent: Thursday, May 28, 2009 9:41 AM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] How Benchmark a rdd for shared access?

[...]

>Harbour+MiniGUI features.
>Data will be accessed via XmlHttpRequest object (client side).
>Server side code (returning the data to XmlHttpRequest object) 
>will be implemented via GENERIC routines (reusable for all 
>programs) written in PHP.
>The backend database will be MySql.
> Harbour To Java, then compile Java with the Google Web Toolkit (GWT).
>
>http://www.hmgforum.com/viewtopic.php?f=5&t=38
>http://www.hmgforum.com/viewforum.php?f=17

HMG is dedicated to client side. Harbour to Java too will not be
productive.
IMHO uHTTPd appears to be the best solution.

Regards,
Marek Horodyski
From vszakats at users.sourceforge.net  Thu May 28 05:41:47 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu May 28 05:41:52 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11158] trunk/harbour
Message-ID: <E1M9c7P-0000z4-EA@d5vjzd1.ch3.sourceforge.com>

Revision: 11158
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11158&view=rev
Author:   vszakats
Date:     2009-05-28 09:41:39 +0000 (Thu, 28 May 2009)

Log Message:
-----------
2009-05-28 11:40 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + Added macros ${hb_major}, ${hb_minor}, ${hb_release}.

  * contrib/xhb/xhbver.prg
    ! Minor.

  * contrib/hbwin/legacyc.c
    + Added compatibility wrappers for printing functions.
      (mainly for xhb compatibility)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/legacyc.c
    trunk/harbour/contrib/xhb/xhbver.prg
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dbtopas at dbtopas.lt  Thu May 28 06:20:45 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu May 28 06:19:25 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11156] trunk/harbour
In-Reply-To: <E1M9Zyy-0003QV-PG@3kljzd1.ch3.sourceforge.com>
References: <E1M9Zyy-0003QV-PG@3kljzd1.ch3.sourceforge.com>
Message-ID: <4A1E657D.3000509@dbtopas.lt>

>       NOTE: CPP mode generates a GPF when ole is unloaded due to refcount.
>             Mindaugas can you fix it.

I can just repeat myself: can you give self containing sample?


Regards,
Mindaugas
From harbour.01 at syenar.hu  Thu May 28 06:33:52 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu May 28 06:34:03 2009
Subject: [Harbour] Re: Unrecoverable error 1010: hb_cdxIndexPageRead: Read
	index page failed.
In-Reply-To: <guv9c1$khq$1@ger.gmane.org>
References: <guu51v$hbl$1@ger.gmane.org>
	<609353e70905190722j75effd3cv99d43f2305e7ea13@mail.gmail.com>
	<guv9c1$khq$1@ger.gmane.org>
Message-ID: <BFCA82BB-66E1-4D31-8C96-792AD85D093B@syenar.hu>

I also got these errors recently (could be external
index corruption), anyway it'd be better to have RTEs
here, as users can only see a disappearing app without
any error message and they keep using it causing much
more trouble (even more logical corruption) than it's
necessary.

Brgds,
Viktor

On 2009.05.19., at 23:46, Itamar Lins wrote:

> Hi!
> Thanks for response, but ADS is $$$$... for me.  :-(
>
> I need to know which file is corrupted.
>
> Maybe:
> Unrecoverable error 1010: hb_cdxIndexPageRead: Read index page failed.
> Called from DBUSEAREA(0) - c:\dados\Dir01\clientes.dbf. //So, can  
> correct the correct file.
>
> Regards,
> Itamar M. Lins Jr.
> "Massimo Belgrano" <mbelgrano@deltain.it> escreveu na mensagemnews:609353e70905190722j75effd3cv99d43f2305e7ea13@mail.gmail.com 
> ...
> Client server not reduce data corruption?
> I am Using ads it is never crashed on server side (register error in  
> log but non crash server)
> what appen if you Restart letodb executable on error and not use  
> corrupted file
>
>
> 2009/5/19 Itamar Lins <itamarlins@bol.com.br>
> Hi!
> I get the error.
> Application Internal Error - C:\letodb\bin\letodb.exe
> Terminated at: 2009.05.18 17:22:09
> Unrecoverable error 1010: hb_cdxIndexPageRead: Read index page failed.
> Called from DBUSEAREA(0)
> Called from HS_OPENTABLE(390) in source\server\server.prg
> Called from LETO_SERVER(0)
> Called from STARTSERVER(239) in source\server\server.prg
> Called from MAIN(157) in source\server\server.prg
> ------------------------------------------------------------------------
> My RDD is CDX, and i am using Harbour, SVN.
> My enviroment is:
> c:\dados\Dir01\clientes.dbf
> c:\dados\Dir02\clientes.dbf
> c:\dados\Dir03\clientes.dbf
> c:\dados\Dir04\clientes.dbf
> I need to know what file this with corrupted index and in that  
> place(sub
> directory). The letodb not informed.
>
> This is the reply of Mr Alexander:
> > Unfortunately, there is no possibility to know this. [x]Harbour  
> doesn't
> > allow to catch, to handle the internal error, it simply terminates  
> the
> > application.
>
> > Theoretically, if there wasn't hardware problems, including power  
> off, if
> > the table and index are handled by Harbour only and  the DBFCDX  
> RDD hasn't
> > errors, such kind of problems >shouldn't appear. But if it  
> appears, the
> > only way is to reindex tables and restart the letodb.
>
> >Regards, Alexander.
>
> I need to know which file is corrupted.
>
> Maybe:
> Unrecoverable error 1010: hb_cdxIndexPageRead: Read index page failed.
> Called from DBUSEAREA(0) - c:\dados\Dir01\clientes.dbf. //So I know  
> to fix
> the problem!!!!
>
> Regards,
> Itamar M. Lins Jr.
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
>
> -- 
> Massimo Belgrano
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vszakats at users.sourceforge.net  Thu May 28 07:15:28 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu May 28 07:15:37 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11159] trunk/harbour
Message-ID: <E1M9da4-0007Kz-4Y@bj8yhf1.ch3.sourceforge.com>

Revision: 11159
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11159&view=rev
Author:   vszakats
Date:     2009-05-28 11:15:27 +0000 (Thu, 28 May 2009)

Log Message:
-----------
2009-05-28 13:14 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbodbc/odbc.c
    ! Eliminated last UNICODE branching, this also fixes 
      embedded zero chars not being respected in UNICODE mode 
      in SQLDESCRIBECOL(). Not tested, ODBC users please do, 
      also someone pls review me.

  * ChangeLog
    * TODOs/TOFIXes marked as DONE.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbodbc/odbc.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From kadziola at tlen.pl  Thu May 28 07:53:29 2009
From: kadziola at tlen.pl (Jaroslaw Kadziola)
Date: Thu May 28 07:53:55 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11104]  trunk/harbour
In-Reply-To: <18d502870905272355l345212d4ld5343c2814873233@mail.gmail.com>
References: <E1M7SZF-00055Y-Hv@dn4whf1.ch3.sourceforge.com>
	<20090522121122.GA2212@uran.home.aster.pl>
	<1486517337.20090526115433@tlen.pl>
	<4C8C519E-6E96-4B16-9F2B-443687164190@syenar.hu>
	<1005233192.20090526144629@tlen.pl>
	<18d502870905260551n2fe9919dide100bf68008e019@mail.gmail.com>
	<1604120678.20090527102425@tlen.pl>
	<18d502870905270150n1a15eca3p17d8f1f791a85349@mail.gmail.com>
	<1108555890.20090527184359@tlen.pl> <536023224.20090528083510@tlen.pl>
	<18d502870905272355l345212d4ld5343c2814873233@mail.gmail.com>
Message-ID: <1301717366.20090528135329@tlen.pl>

Hi Viktor,

VS> These belong to the mouse functionality implemented as .asm code.
VS> Try with these rewritten versions in .prg:
VS> --- s_mouse.prg
VS> /* Copyright 2009 Viktor Szakats <harbour.01 syenar.hu> */

As usually you are great ! Library hbSuper is ported to Harbour.
Thanks a lot !

-- 
Regards,
 Jaroslaw Kadziola

From alex at belacy.belgorod.su  Thu May 28 08:47:17 2009
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Thu May 28 08:47:28 2009
Subject: [Harbour] Mingw and hb_errInternal()
Message-ID: <4A1E87D5.2020800@belacy.belgorod.su>

Hi All,

  as I wrote before, I overloaded hb_errInternal() in letodb source 
file. Bcc and Linux gcc accepted this normally, but mingw gives error - 
multiply definition of hb_errInternal. Is there any way to solve this 
problem ?

Regards, ALexander.
From mbelgrano at deltain.it  Thu May 28 10:05:44 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu May 28 10:06:13 2009
Subject: [Harbour] Mingw and hb_errInternal()
In-Reply-To: <4A1E87D5.2020800@belacy.belgorod.su>
References: <4A1E87D5.2020800@belacy.belgorod.su>
Message-ID: <609353e70905280705k50760e8dqce0dd7d680f8da93@mail.gmail.com>

I try a reply with information that i know.
You can't overload a function (hb_errInternal) but a module object
represented by entire file prg.In bcc it was allowed but is not a good
pratice having duplicated public symbol
Can you reproduce a sample for better uderstand ?



2009/5/28 Alexander S.Kresin <alex@belacy.belgorod.su>

> Hi All,
>
>  as I wrote before, I overloaded hb_errInternal() in letodb source file.
> Bcc and Linux gcc accepted this normally, but mingw gives error - multiply
> definition of hb_errInternal. Is there any way to solve this problem ?
>
> Regards, ALexander.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090528/4f394ac1/attachment-0001.html
From myorg63 at mail.ru  Thu May 28 10:33:53 2009
From: myorg63 at mail.ru (Petr Chornyj)
Date: Thu May 28 10:33:58 2009
Subject: [Harbour] Mingw and hb_errInternal()
In-Reply-To: <4A1E87D5.2020800@belacy.belgorod.su>
References: <4A1E87D5.2020800@belacy.belgorod.su>
Message-ID: <23762999.post@talk.nabble.com>




Alexander S.Kresin wrote:
> 
> Hi All,
> 
>   as I wrote before, I overloaded hb_errInternal() in letodb source 
> file. Bcc and Linux gcc accepted this normally, but mingw gives error - 
> multiply definition of hb_errInternal. Is there any way to solve this 
> problem ?
> 
> 

Hi,

I think you can try with

gcc ... -Wl,--allow-multiple-definition

Regards,
Petr

-- 
View this message in context: http://www.nabble.com/Mingw-and-hb_errInternal%28%29-tp23761031p23762999.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Thu May 28 11:20:36 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu May 28 11:20:41 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11156] trunk/harbour
In-Reply-To: <4A1E657D.3000509@dbtopas.lt>
References: <E1M9Zyy-0003QV-PG@3kljzd1.ch3.sourceforge.com>
	<4A1E657D.3000509@dbtopas.lt>
Message-ID: <23763990.post@talk.nabble.com>


Hello Mindaugas


Mindaugas Kavaliauskas wrote:
> 
>>       NOTE: CPP mode generates a GPF when ole is unloaded due to
>> refcount.
>>             Mindaugas can you fix it.
> 
> I can just repeat myself: can you give self containing sample?
> 

GPF is in my code when I call WVG_AxShutdownConnectionPoint().
I have adopted axcore.c | garbase collection function to release the object.
So I am requesting if you review gtwvg/wvgsink.c and following code:

HB_FUNC( WVG_AXSHUTDOWNCONNECTIONPOINT )
{
   MyRealIEventHandler* pSink = ( MyRealIEventHandler * ) hb_parptr( 1 );

   if( pSink && pSink->pIConnectionPoint )
   {
      HB_VTBL( pSink->pIConnectionPoint )->Unadvise( HB_THIS_(
pSink->pIConnectionPoint ) pSink->dwEventCookie );
      HB_VTBL( pSink->pIConnectionPoint )->Release( HB_THIS(
pSink->pIConnectionPoint ) );
      pSink->pIConnectionPoint = NULL;
      pSink->dwEventCookie = 0;
   }
   if( pSink && pSink->pEvents )
      hb_itemRelease( pSink->pEvents );

   /* in CPP mode following line GPFs on any OLE whose count becomes 0 */
   HB_VTBL( ( IEventHandler* ) pSink )->Release( HB_THIS( ( IEventHandler* )
pSink ) );
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
}

In non CPP mode the above code works fine.

You can reproduce it by compiling contrib/gtwvg/tests/demowvg.prg.
Point to <Active-X> menu option and click on first prompt.
After windo is drawn with explorer active-x click the close(X) button.
GPF will appear.

Infact I suspect I am not casting the pointers properly but am unable to 
locate where I am erring.

Regards
Pritpal Bedi

OR better if you implement destructor function in wvgsink.c too.



-- 
View this message in context: http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-11156--trunk-harbour-tp23756543p23763990.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vszakats at users.sourceforge.net  Thu May 28 11:59:42 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu May 28 11:59:47 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11160] trunk/harbour
Message-ID: <E1M9i18-0007gP-BM@74yxhf1.ch3.sourceforge.com>

Revision: 11160
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11160&view=rev
Author:   vszakats
Date:     2009-05-28 15:59:41 +0000 (Thu, 28 May 2009)

Log Message:
-----------
2009-05-28 17:30 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  + contrib/examples/hbsuper
  + contrib/examples/hbsuper/hbsuper.hbm
  + contrib/examples/hbsuper/hbsuper.dif
  + contrib/examples/hbsuper/hbsuper.prg
  + contrib/examples/hbsuper/readme.txt
    + Added SuperLib portability patch and Harbour make script.
      Original sources need to be downloaded from The Oasis,
      just like for DBU and RL.
      This is a slightly minimal patch than my previous version
      to minimize any unnecessary space/command changes, and
      I also reverted to original C code where it was possible.

  * utils/hbmk2/hbmk2.prg
    * Minor formatting.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg

Added Paths:
-----------
    trunk/harbour/contrib/examples/hbsuper/
    trunk/harbour/contrib/examples/hbsuper/hbsuper.dif
    trunk/harbour/contrib/examples/hbsuper/hbsuper.hbm
    trunk/harbour/contrib/examples/hbsuper/hbsuper.prg
    trunk/harbour/contrib/examples/hbsuper/readme.txt


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Thu May 28 12:03:44 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu May 28 12:03:49 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11161]
	trunk/harbour/ChangeLog
Message-ID: <E1M9i52-0007lT-Qx@74yxhf1.ch3.sourceforge.com>

Revision: 11161
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11161&view=rev
Author:   vszakats
Date:     2009-05-28 16:03:43 +0000 (Thu, 28 May 2009)

Log Message:
-----------
minor

Modified Paths:
--------------
    trunk/harbour/ChangeLog


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From jarabal at gmail.com  Thu May 28 12:33:30 2009
From: jarabal at gmail.com (Xavi)
Date: Thu May 28 12:36:14 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C95023D0F7E@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C95023D0F7E@PINK.zycie.pzu>
Message-ID: <4A1EBCDA.6020008@gmail.com>

Please, someone could try this with gcc 4.4.0 in Linux.
Is only for historical reasons and curiosity :)
What is the output, of course if it works?
My output in Win with 3.4.5 is .-

MinGW GNU C 3.4.5 (32-bit) => ndbRes == -0.0000000000000002 ndbRes == 0 is .F.
error: decimal floating point not supported for this target.

--
Xavi



-------------- next part --------------
Procedure Main()

  ? Test_C_Compiler_W()
  ? Test_C_Compiler_X()

  Wait
return

#pragma BEGINDUMP
#include "hbapi.h"

HB_FUNC( TEST_C_COMPILER_W )
{
   char cMsg[ 4096 ];
   double ndbRes;

   ndbRes  = 3.05;
   ndbRes -= 1.55;
   ndbRes -= 1.50;
   /*       -----
             0.00  */

   snprintf( cMsg, sizeof(cMsg), "%s => ndbRes == %.16f ndbRes == 0 is %s \n",
               hb_verCompiler(), ndbRes, (ndbRes == 0 ? ".T." : ".F.") );

   hb_retc( cMsg );
}

HB_FUNC( TEST_C_COMPILER_X )
{
   char cMsg[ 4096 ];
   _Decimal64 decRes;

   decRes  = 3.05dd;
   decRes -= 1.55dd;
   decRes -= 1.50dd;
   /*       -----
             0.00  */

   snprintf( cMsg, sizeof(cMsg), "%s => decRes == %.16DFf decRes == 0 is %s \n",
               hb_verCompiler(), decRes, (decRes == 0 ? ".T." : ".F.") );

   hb_retc( cMsg );
}
#pragma ENDDUMP

From vszakats at users.sourceforge.net  Thu May 28 13:06:41 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu May 28 13:07:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11162] trunk/harbour
Message-ID: <E1M9j3x-0006G8-Go@bj8yhf1.ch3.sourceforge.com>

Revision: 11162
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11162&view=rev
Author:   vszakats
Date:     2009-05-28 17:06:40 +0000 (Thu, 28 May 2009)

Log Message:
-----------
2009-05-28 19:06 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + .hbm embedding is now allowed 10 level deep (was 3).

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Thu May 28 13:27:50 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu May 28 13:27:55 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11163] trunk/harbour
Message-ID: <E1M9jOQ-0006ee-I3@bj8yhf1.ch3.sourceforge.com>

Revision: 11163
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11163&view=rev
Author:   vszakats
Date:     2009-05-28 17:27:49 +0000 (Thu, 28 May 2009)

Log Message:
-----------
2009-05-28 19:25 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed -map option for mingw family. Strangely its help
      says '-Wl,-Map FILE' is the format but this only works
      if FILE exists on disk :/ otherwise it gives an error
      that FILE isn't found. 'Wl,-Map,FILE' seems to work for
      all cases. Pbly OS/2 and DJGPP should also be fixed.
    ! Applied above fix for DJGPP and OS/2 GCC. I didn't test 
      it but probably works the same way as in mingw and *nix 
      gcc.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Thu May 28 13:32:38 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 28 13:32:45 2009
Subject: [Harbour] GTQTC issue with mark&copy
Message-ID: <18d502870905281032i63892a4doe572ca547318bd23@mail.gmail.com>

Hi Pritpal,

In GTQTC the mark&copy feature badly interacts with
left click + drag. Basically makes these mouse event
unusable from app level, since mark&copy steals the
events from it.

Probably we should have a menu for it like in GTWVT.

Brgds,
Viktor
From dbtopas at dbtopas.lt  Thu May 28 13:34:54 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu May 28 13:33:35 2009
Subject: [Harbour] + field
Message-ID: <4A1ECB3E.1060103@dbtopas.lt>

Hi,


I have a question about practical usage of autoincrement fields ("+"). 
My friend wants to start use it, but he found a simple problem on first 
attempt. The question is: how to convert database column from "manual 
autoincrement" to true "+" type field? Another similar problem is "ALTER 
TABLE" of such table.

I think the easiest way to do is create table containing "I",4 field and 
conversion this "I",4 into "+",4 (checking for not duplicated numbers 
and writing maximum to the field header). The problem is we do not have 
such function. How this function can be implemented in RDD? Or maybe we 
can talk about general DBALTERTABLE().


Regards,
Mindaugas

From jarabal at gmail.com  Thu May 28 14:29:21 2009
From: jarabal at gmail.com (Xavi)
Date: Thu May 28 14:32:05 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C95023D0F7E@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C95023D0F7E@PINK.zycie.pzu>
Message-ID: <4A1ED801.9010001@gmail.com>

Horodyski Marek (PZUZ) escribi?:
>  
[ ... ]
> *----------------------
> Function main()
> local i, nd := 0.0, nd1 := 1.1
> Cls
> ? nd
> for i := 1 to 30
>   nd := nd + nd1
> next
> for i := 1 to 30
>   nd := nd - nd1
> next
> 
> ? nd
> for i := 1 to 10000
>   nd := nd * nd1
> next
> ? nd, ValType( nd), nd > 0.000001
> return Nil
> *-----------------------
> 
> On OpenWatcom it is correctly executet, and on BCC (I do not know how
> the MinGW) ?
> 

Sorry I misplace this email :'( This is your output with MinGW .-

          0.0
          0.0
************************************************************** N .F.

--
Xavi

From bedipritpal at hotmail.com  Thu May 28 14:43:30 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu May 28 14:43:35 2009
Subject: [Harbour] GTQTC issue with mark&copy
In-Reply-To: <18d502870905281032i63892a4doe572ca547318bd23@mail.gmail.com>
References: <18d502870905281032i63892a4doe572ca547318bd23@mail.gmail.com>
Message-ID: <23767626.post@talk.nabble.com>


Hello


Viktor Szak?ts wrote:
> 
> In GTQTC the mark&copy feature badly interacts with
> left click + drag. Basically makes these mouse event
> unusable from app level, since mark&copy steals the
> events from it.
> 

I will come to QT this weekend. 
Will review all these features and optimize whatever I could.

> Probably we should have a menu for it like in GTWVT.

Certainly yes, but question is how!
I could not find any alternative to SysMenu() WINAPI equivalent.
Anybody to help ?

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/GTQTC-issue-with-mark-copy-tp23766358p23767626.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Thu May 28 19:53:50 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu May 28 19:53:55 2009
Subject: [Harbour] GTQTC issue with mark(c)
Message-ID: <18d502870905281653p1368e31cu30b0490862f4f723@mail.gmail.com>

> I will come to QT this weekend.
> Will review all these features and optimize whatever I could.

Great.

>> Probably we should have a menu for it like in GTWVT.
>
> Certainly yes, but question is how!
> I could not find any alternative to SysMenu() WINAPI equivalent.
> Anybody to help ?

Perhaps it's possible to add a simple toolbar (or statusbar) looks
kinda strange with this one icon only, but maybe we will have
other options there in the future. Or, maybe it's possible to add
some stuff to the caption, or define a right-click menu for the
caption area.

Brgds,
Viktor
From vailtom at gmail.com  Thu May 28 21:36:51 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Thu May 28 21:36:55 2009
Subject: [Harbour] A single question about hbmk2 X uhttpd
Message-ID: <531d7a750905281836l3be6d8c5ld8b80734cc2b5e0d@mail.gmail.com>

I'm trying to compile uhttp modules with hbmk2 and i got this errors:


c:\Harbour\contrib\examples\uhttpd\modules>type c:\hbmgw\bin\hbmk.cfg
# Harbour Make configuration
# Generated by Harbour build process
arch=win
comp=mingw

c:\Harbour\contrib\examples\uhttpd\modules>hbmk2 allmod.hbm -trace -info
hbmk: Autodetected architecture: win
hbmk: Using Harbour: C:\hbmgw\bin C:\hbmgw\include C:\hbmgw\lib C:\hbmgw\lib
hbmk: Processing configuration: c:\hbmgw\bin\hbmk.cfg
hbmk: Harbour compiler command (internal):
C:\hbmgw\bin\harbour.exe -n2 cookie.prg info.prg showcounter.prg
tableservletdb.prg testajax.prg -gh -w3 -o../home/cgi-bin/
Harbour 1.1.0dev (Rev. 11153)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 'testajax.prg'...
testajax.prg(53) Error F0029  Can't open #include file 'common.ch'
1 error

No code generated
hbmk: Error: Running Harbour compiler. 1
C:\hbmgw\bin\harbour.exe -n2 cookie.prg info.prg showcounter.prg
tableservletdb.prg testajax.prg -gh -w3 -o../home/cgi-bin/

c:\Harbour\contrib\examples\uhttpd\modules>dir c:\hbmgw\common.ch /s
 Volume in drive C is Windows 7
 Volume Serial Number is 2825-DCD3

 Directory of c:\hbmgw\include

26/04/2009  22:30             3.807 common.ch
               1 File(s)          3.807 bytes

     Total Files Listed:
               1 File(s)          3.807 bytes
               0 Dir(s)  73.914.671.104 bytes free

c:\Harbour\contrib\examples\uhttpd\modules>hbmk2 allmod.hbm -trace
-info -ic:\hbmgw\include
hbmk: Autodetected architecture: win
hbmk: Using Harbour: C:\hbmgw\bin C:\hbmgw\include C:\hbmgw\lib C:\hbmgw\lib
hbmk: Processing configuration: c:\hbmgw\bin\hbmk.cfg
hbmk: Harbour compiler command (internal):
C:\hbmgw\bin\harbour.exe -n2 cookie.prg info.prg showcounter.prg
tableservletdb.prg testajax.prg -gh -w3 -o../home/cgi-bin/
Harbour 1.1.0dev (Rev. 11153)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 'testajax.prg'...
testajax.prg(53) Error F0029  Can't open #include file 'common.ch'
1 error

No code generated
hbmk: Error: Running Harbour compiler. 1
C:\hbmgw\bin\harbour.exe -n2 cookie.prg info.prg showcounter.prg
tableservletdb.prg testajax.prg -gh -w3 -o../home/cgi-bin/
c:\Harbour\contrib\examples\uhttpd\modules>


I tried some options but without success, any tip?

Many thanks,
Vailton
From vouchcac at users.sourceforge.net  Thu May 28 21:51:45 2009
From: vouchcac at users.sourceforge.net (vouchcac@users.sourceforge.net)
Date: Thu May 28 21:51:50 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11164] trunk/harbour
Message-ID: <E1M9rG5-0000XK-0J@74yxhf1.ch3.sourceforge.com>

Revision: 11164
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11164&view=rev
Author:   vouchcac
Date:     2009-05-29 01:51:44 +0000 (Fri, 29 May 2009)

Log Message:
-----------
2009-05-28 18:43 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/wvgcrt.prg
  * harbour/contrib/gtwvg/wvgparts.ch
  * harbour/contrib/gtwvg/wvgtoolb.prg
  * harbour/contrib/gtwvg/wvgwin.c
  * harbour/contrib/gtwvg/wvgwnd.prg
  * harbour/contrib/hbwin/wapi_commctrl.c
    ! Changes to honor NUMERICS to POINTERS.
    ! Few artifacts in WvgCRT().

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtwvg/wvgcrt.prg
    trunk/harbour/contrib/gtwvg/wvgparts.ch
    trunk/harbour/contrib/gtwvg/wvgtoolb.prg
    trunk/harbour/contrib/gtwvg/wvgwin.c
    trunk/harbour/contrib/gtwvg/wvgwnd.prg
    trunk/harbour/contrib/hbwin/wapi_commctrl.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Thu May 28 22:03:35 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu May 28 22:03:40 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11165] trunk/harbour
Message-ID: <E1M9rRX-0000iz-Jn@74yxhf1.ch3.sourceforge.com>

Revision: 11165
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11165&view=rev
Author:   vszakats
Date:     2009-05-29 02:03:34 +0000 (Fri, 29 May 2009)

Log Message:
-----------
2009-05-29 03:50 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed typo causing -i Harbour option missed in make
      modes where Harbour compiler is the final step (like -gh).
    + Directory for target is now automatically created.
    + Directory for -instpath paths are now automatically created.
    ! Fixed path normalizer not fully normalizing in some cases
      when path didn't begin with path separator (relative path).
    ! Fixed path builder to not be confused about non-native
      path separators.
    % Path builder will now normalize first to minimize steps.
    + Now all dirs *beginning* with ".hbmk" will be made hidden.
      (previously only dirs named exactly ".hbmk" were made hidden)
      (experimental)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From M.Horodyski at pzuzycie.com.pl  Fri May 29 02:42:16 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri May 29 02:42:22 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <4A1ED801.9010001@gmail.com>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C95023D11C3@PINK.zycie.pzu>

>-----Original Message-----
>From: Xavi [mailto:jarabal@gmail.com] 
>Sent: Thursday, May 28, 2009 8:29 PM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] gcc 4.4.0 warnings
>
>Horodyski Marek (PZUZ) escribi?:
>>  
[ ... ]

>> On OpenWatcom it is correctly executet, and on BCC (I do not 
>know how 
>> the MinGW) ?
>> 
>
>Sorry I misplace this email :'( This is your output with MinGW .-
>
>          0.0
>          0.0
>************************************************************** N .F.


Ok.. On BCC and Clipper is GPF, Excell handled exception, OW and MingGW work correctly.
I think of a start-up too MinGW environment.

Regards,
Marek Horodyski
From alex at belacy.belgorod.su  Fri May 29 03:28:34 2009
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Fri May 29 03:28:50 2009
Subject: [Harbour] Re: Mingw and hb_errInternal()
In-Reply-To: <609353e70905280705k50760e8dqce0dd7d680f8da93@mail.gmail.com>
References: <4A1E87D5.2020800@belacy.belgorod.su>
	<609353e70905280705k50760e8dqce0dd7d680f8da93@mail.gmail.com>
Message-ID: <4A1F8EA2.6000808@belacy.belgorod.su>

Massimo Belgrano writes:
> I try a reply with information that i know.
> You can't overload a function (hb_errInternal) but a module object 
> represented by entire file prg.

  hb_errInternal() is the only function in the module ( errint.c ) - at 
least, at the version of Harbour I use, so I supposed that it's possible 
to overload it. I'll try to separate it, though.

Regards, Alexander.
From alex at belacy.belgorod.su  Fri May 29 03:36:01 2009
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Fri May 29 03:36:12 2009
Subject: [Harbour] Re:  Mingw and hb_errInternal()
In-Reply-To: <23762999.post@talk.nabble.com>
References: <4A1E87D5.2020800@belacy.belgorod.su>
	<23762999.post@talk.nabble.com>
Message-ID: <4A1F9061.70600@belacy.belgorod.su>

Petr Chornyj writes:

> I think you can try with
> 
> gcc ... -Wl,--allow-multiple-definition
> 

  Yes, this helps, thanks.

  Now there is other problem - letodb.exe, compiled with mingw, doesn't 
run, it gives a message "<nomnemonic_name>.dll isn't found" ( 
<nomnemonic_name> is a sequence of casual non character symbols ). Does 
anyone know why this could happen ?

Regards, Alexander.
From harbour.01 at syenar.hu  Fri May 29 04:24:59 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 29 04:25:06 2009
Subject: [Harbour] Re: Mingw and hb_errInternal()
In-Reply-To: <4A1F8EA2.6000808@belacy.belgorod.su>
References: <4A1E87D5.2020800@belacy.belgorod.su>
	<609353e70905280705k50760e8dqce0dd7d680f8da93@mail.gmail.com>
	<4A1F8EA2.6000808@belacy.belgorod.su>
Message-ID: <18d502870905290124n21d2c5b3ofce3e54bbc52b235@mail.gmail.com>

There should also be hb_errInternalRaw() (also public function) in
that source file.

"allow multiple definition" is very dubious to me, as there it's very difficult
to know for sure which of the multiple definitions will actually be effective
at runtime. I think this option just suppresses the error msg and allows to
continue.

Brgds,
Viktor

On Fri, May 29, 2009 at 9:28 AM, Alexander S.Kresin
<alex@belacy.belgorod.su> wrote:
> Massimo Belgrano writes:
>>
>> I try a reply with information that i know.
>> You can't overload a function (hb_errInternal) but a module object
>> represented by entire file prg.
>
> ?hb_errInternal() is the only function in the module ( errint.c ) - at
> least, at the version of Harbour I use, so I supposed that it's possible to
> overload it. I'll try to separate it, though.
>
> Regards, Alexander.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From alex at belacy.belgorod.su  Fri May 29 05:01:28 2009
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Fri May 29 05:01:41 2009
Subject: [Harbour] Re: Mingw and hb_errInternal()
In-Reply-To: <18d502870905290124n21d2c5b3ofce3e54bbc52b235@mail.gmail.com>
References: <4A1E87D5.2020800@belacy.belgorod.su>	<609353e70905280705k50760e8dqce0dd7d680f8da93@mail.gmail.com>	<4A1F8EA2.6000808@belacy.belgorod.su>
	<18d502870905290124n21d2c5b3ofce3e54bbc52b235@mail.gmail.com>
Message-ID: <4A1FA468.3010806@belacy.belgorod.su>

Viktor Szak?ts writes:
> There should also be hb_errInternalRaw() (also public function) in
> that source file.
> 
> "allow multiple definition" is very dubious to me, as there it's very difficult
> to know for sure which of the multiple definitions will actually be effective
> at runtime.

  I supposed that placing hb_errInternal() in a letodb kernel file, I 
guarantee that it will be called at runtime - that's why I didn't add 
the whole errint.c as a separate file.
  But, probably, having a separate errint.c is really a more clean way.
Anyhow, now the outstanding problem for me is that one I wrote in 
previous message - with that strange dll, which is demanded by 
letodb.exe, build with mingw.

  Regards, Alexander.


From vszakats at users.sourceforge.net  Fri May 29 05:05:11 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 29 05:05:16 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11166] trunk/harbour
Message-ID: <E1M9y1X-0004MX-Jz@d5vjzd1.ch3.sourceforge.com>

Revision: 11166
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11166&view=rev
Author:   vszakats
Date:     2009-05-29 09:05:10 +0000 (Fri, 29 May 2009)

Log Message:
-----------
2009-05-29 11:04 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  - contrib/examples
  + examples
  * doc/dirstruc.txt
  * doc/whatsnew.txt
  * examples/hbdoc/Makefile
  * examples/pp/Makefile
  * examples/hboleold/Makefile
  * examples/hbsqlit2/Makefile
  * examples/misc/Makefile
  * examples/hbapollo/Makefile
  * examples/rdddbt/Makefile
  * examples/guestbk/Makefile
  * examples/pe/Makefile
  * examples/hbgf/hbgfwin/Makefile
  * examples/hbgf/hbgfos2/Makefile
  * examples/hbgf/hbgfgtk/Makefile
  * examples/hbgf/Makefile
  * examples/uhttpd/readme.txt
  * examples/dbu/Makefile
  * examples/hscript/Makefile
  * examples/hbwhat/Makefile
  * examples/rl/Makefile
  * examples/Makefile
    * Moved to flatten our dir layout and sync the locations
      in unified distro and source tree.
    ; TODO: As a next step I'll replace Makefiles with .hbm 
            files. This will allow users to build these parts 
            outside the source distribution.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/doc/dirstruc.txt
    trunk/harbour/doc/man/hbmk.1
    trunk/harbour/doc/whatsnew.txt
    trunk/harbour/examples/Makefile
    trunk/harbour/examples/dbu/Makefile
    trunk/harbour/examples/guestbk/Makefile
    trunk/harbour/examples/hbapollo/Makefile
    trunk/harbour/examples/hbdoc/Makefile
    trunk/harbour/examples/hbgf/Makefile
    trunk/harbour/examples/hbgf/hbgfgtk/Makefile
    trunk/harbour/examples/hbgf/hbgfos2/Makefile
    trunk/harbour/examples/hbgf/hbgfwin/Makefile
    trunk/harbour/examples/hboleold/Makefile
    trunk/harbour/examples/hbsqlit2/Makefile
    trunk/harbour/examples/hbwhat/Makefile
    trunk/harbour/examples/hscript/Makefile
    trunk/harbour/examples/misc/Makefile
    trunk/harbour/examples/pe/Makefile
    trunk/harbour/examples/pp/Makefile
    trunk/harbour/examples/rdddbt/Makefile
    trunk/harbour/examples/rl/Makefile
    trunk/harbour/examples/uhttpd/readme.txt
    trunk/harbour/utils/hbmk2/examples/fwh.hbc
    trunk/harbour/utils/hbmk2/examples/hmg.hbc
    trunk/harbour/utils/hbmk2/examples/hwgui.hbc

Added Paths:
-----------
    trunk/harbour/examples/

Removed Paths:
-------------
    trunk/harbour/contrib/examples/


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Fri May 29 05:08:54 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 29 05:08:59 2009
Subject: [Harbour] Re: Mingw and hb_errInternal()
In-Reply-To: <4A1FA468.3010806@belacy.belgorod.su>
References: <4A1E87D5.2020800@belacy.belgorod.su>
	<609353e70905280705k50760e8dqce0dd7d680f8da93@mail.gmail.com>
	<4A1F8EA2.6000808@belacy.belgorod.su>
	<18d502870905290124n21d2c5b3ofce3e54bbc52b235@mail.gmail.com>
	<4A1FA468.3010806@belacy.belgorod.su>
Message-ID: <18d502870905290208j3c9b89eke8e8ef80347ebf0d@mail.gmail.com>

On Fri, May 29, 2009 at 11:01 AM, Alexander S.Kresin
<alex@belacy.belgorod.su> wrote:
> Viktor Szak?ts writes:
>>
>> There should also be hb_errInternalRaw() (also public function) in
>> that source file.
>>
>> "allow multiple definition" is very dubious to me, as there it's very
>> difficult
>> to know for sure which of the multiple definitions will actually be
>> effective
>> at runtime.
>
> ?I supposed that placing hb_errInternal() in a letodb kernel file, I
> guarantee that it will be called at runtime - that's why I didn't add the
> whole errint.c as a separate file.

This is the only working solution, unless we move the other
function to a separate function inside Harbour source tree.
I'll do that.

> ?But, probably, having a separate errint.c is really a more clean way.
> Anyhow, now the outstanding problem for me is that one I wrote in previous
> message - with that strange dll, which is demanded by letodb.exe, build with
> mingw.

Quite strange, I've never seen that. Did you try to create letodb with
hbmk2? I would wonder if you'd get the same error. In case you do,
please post your MinGW version and -trace output.

Brgds,
Viktor
From alex at belacy.belgorod.su  Fri May 29 05:43:13 2009
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Fri May 29 05:43:25 2009
Subject: [Harbour] Re:  Mingw and hb_errInternal()
In-Reply-To: <18d502870905290208j3c9b89eke8e8ef80347ebf0d@mail.gmail.com>
References: <4A1E87D5.2020800@belacy.belgorod.su>	<609353e70905280705k50760e8dqce0dd7d680f8da93@mail.gmail.com>	<4A1F8EA2.6000808@belacy.belgorod.su>	<18d502870905290124n21d2c5b3ofce3e54bbc52b235@mail.gmail.com>	<4A1FA468.3010806@belacy.belgorod.su>
	<18d502870905290208j3c9b89eke8e8ef80347ebf0d@mail.gmail.com>
Message-ID: <4A1FAE31.7040202@belacy.belgorod.su>

> This is the only working solution, unless we move the other
> function to a separate function inside Harbour source tree.
> I'll do that.
> 

   Probably, it isn't needed. I added the modified errint.c to letodb 
sources, it looks now like the following ( without headers ):

static BOOL   bErrHandlerRun = 0;
extern leto_errInternal( ULONG ulIntCode, const char * szText, const 
char * szPar1, const char * szPar2 );

void hb_errInternalRaw( ULONG ulIntCode, const char * szText, const char 
* szPar1, const char * szPar2 )
{

    if( szPar1 == NULL )
       szPar1 = "";

    if( szPar2 == NULL )
       szPar2 = "";

    if( !bErrHandlerRun )
    {
       bErrHandlerRun = 1;
       leto_errInternal( ulIntCode, szText, szPar1, szPar2 );
    }
    else
    {
       FILE * hLog;
       hLog = hb_fopen( "letodb_crash.log", "a+" );

       if( hLog )
       {
          fprintf( hLog, "Unrecoverable error %lu: ", ulIntCode );
          if( szText )
             fprintf( hLog, "%s %s %s\n", szText, szPar1, szPar2 );
          fclose( hLog );
       }
    }

}

void hb_errInternal( ULONG ulIntCode, const char * szText, const char * 
szPar1, const char * szPar2 )
{
    hb_errInternalRaw( ulIntCode, szText, szPar1, szPar2 );

    /* release console settings */
    hb_conRelease();

    if( hb_cmdargCheck( "ERRGPF" ) )
    {
        int *pGPF = NULL;
        *pGPF = 0;
        *(--pGPF) = 0;
    }

    exit( EXIT_FAILURE );
}

bErrHandlerRun is used to prevent cycling if closing databases by 
leto_errInternal() will cause anouther internal error.

> Quite strange, I've never seen that. Did you try to create letodb with
> hbmk2? I would wonder if you'd get the same error. In case you do,
> please post your MinGW version and -trace output.
> 


  It's solved, as I just wrote.

Regards, ALexander.
From alex at belacy.belgorod.su  Fri May 29 05:35:48 2009
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Fri May 29 05:57:08 2009
Subject: [Harbour] Re: Mingw and hb_errInternal()
In-Reply-To: <4A1F9061.70600@belacy.belgorod.su>
References: <4A1E87D5.2020800@belacy.belgorod.su>	<23762999.post@talk.nabble.com>
	<4A1F9061.70600@belacy.belgorod.su>
Message-ID: <4A1FAC74.5070502@belacy.belgorod.su>

>  Now there is other problem - letodb.exe, compiled with mingw, doesn't 
> run, it gives a message "<nomnemonic_name>.dll isn't found" ( 
> <nomnemonic_name> is a sequence of casual non character symbols ). Does 
> anyone know why this could happen ?
> 

   It's solved. I've made an error in a Makefile ( I still don't 
understand clear enough all those $@ $^ ), which cause the following 
command line:

gcc -Wall -mwindows -oletodb.exe bin/letodb.exe obj\w32/server.o ...

and produces an interesting effect: probably, gcc tried to link 
bin/letodb.exe ( it was there, build by bcc ) in a resulting exe and 
link it (!) without warnings, and this resulting exe behaves so strange.

Regards, Alexander.
From harbour.01 at syenar.hu  Fri May 29 06:18:51 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 29 06:18:57 2009
Subject: [Harbour] Re: Mingw and hb_errInternal()
In-Reply-To: <4A1FAC74.5070502@belacy.belgorod.su>
References: <4A1E87D5.2020800@belacy.belgorod.su>
	<23762999.post@talk.nabble.com> <4A1F9061.70600@belacy.belgorod.su>
	<4A1FAC74.5070502@belacy.belgorod.su>
Message-ID: <18d502870905290318j35f32a6ej7f0ff537b8013e5a@mail.gmail.com>

Okay. I'll commit the split anyway, since it's done already, but
it will continue to work with letodb.

BTW, is there anything missing to use hbmk2 to build letodb?

(I've just committed a few more .hbm examples)

Brgds,
Viktor

On Fri, May 29, 2009 at 11:35 AM, Alexander S.Kresin
<alex@belacy.belgorod.su> wrote:
>> ?Now there is other problem - letodb.exe, compiled with mingw, doesn't
>> run, it gives a message "<nomnemonic_name>.dll isn't found" (
>> <nomnemonic_name> is a sequence of casual non character symbols ). Does
>> anyone know why this could happen ?
>>
>
> ?It's solved. I've made an error in a Makefile ( I still don't understand
> clear enough all those $@ $^ ), which cause the following command line:
>
> gcc -Wall -mwindows -oletodb.exe bin/letodb.exe obj\w32/server.o ...
>
> and produces an interesting effect: probably, gcc tried to link
> bin/letodb.exe ( it was there, build by bcc ) in a resulting exe and link it
> (!) without warnings, and this resulting exe behaves so strange.
>
> Regards, Alexander.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From vszakats at users.sourceforge.net  Fri May 29 06:19:16 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 29 06:19:22 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11167] trunk/harbour
Message-ID: <E1M9zBE-0000RD-K2@bj8yhf1.ch3.sourceforge.com>

Revision: 11167
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11167&view=rev
Author:   vszakats
Date:     2009-05-29 10:19:15 +0000 (Fri, 29 May 2009)

Log Message:
-----------
2009-05-29 12:18 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + Added -echo= command line parameter. Similar to echo= in .hbc files.
    ! Fixed filename expansion behaviour on empty strings.
    * Tweaked a little the filter parser to recognize keywords using
      similar rules to Harbour compiler.
    ! Fixed filter parser not to RTE on malformed filters.

  - examples/hbapollo/Makefile
  + examples/hbapollo/hbapollo.hbm
  - examples/hboleold/Makefile
  + examples/hboleold/hboleold.hbm
  - examples/hbsqlit2/Makefile
  + examples/hbsqlit2/hbsqlit2.hbm
  - examples/hbgf/hbgfwin/Makefile
  + examples/hbgf/hbgfwin/hbgfwin.hbm
  - examples/hbgf/hbgfos2/Makefile
  + examples/hbgf/hbgfos2/hbgfos2.hbm
  - examples/hbgf/hbgfgtk/Makefile
  + examples/hbgf/hbgfgtk/hbgfgtk.hbm
  - examples/hbwhat/Makefile
  + examples/hbwhat/hbwhat.hbm
    * Replaced GNU Make files with hbmk2 make files. These should
      now work outside the source tree. Please test them, they are
      also good examples for .hbm files.

  - examples/pe/Makefile
  - examples/pp/Makefile
  - examples/hbdoc/Makefile
  - examples/guestbk/Makefile
  - examples/misc/Makefile
  - examples/dbu/Makefile
  - examples/hscript/Makefile
  - examples/rl/Makefile
  - examples/Makefile
  - examples/hbgf/Makefile
    - Deleted unnecessary make files belonging to GNU Make system.
      (these wouldn't work outside the source tree, f.e in a binary
      distro which includes these examples in source form)

  - examples/rdddbt
    - Deleted this example as it doesn't build anymore.

  * examples/hbsuper/hbsuper.hbm
    ! Added SVN header.

  * source/rtl/Makefile
  * source/rtl/errint.c
  + source/rtl/errintlo.c
    * Split hb_errInternal() and hb_errInternalRaw() for
      easier user override.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/examples/hbsuper/hbsuper.hbm
    trunk/harbour/source/rtl/Makefile
    trunk/harbour/source/rtl/errint.c
    trunk/harbour/utils/hbmk2/hbmk2.prg

Added Paths:
-----------
    trunk/harbour/examples/hbapollo/hbapollo.hbm
    trunk/harbour/examples/hbgf/hbgfgtk/hbgfgtk.hbm
    trunk/harbour/examples/hbgf/hbgfos2/hbgfos2.hbm
    trunk/harbour/examples/hbgf/hbgfwin/hbgfwin.hbm
    trunk/harbour/examples/hboleold/hboleold.hbm
    trunk/harbour/examples/hbsqlit2/hbsqlit2.hbm
    trunk/harbour/examples/hbwhat/hbwhat.hbm
    trunk/harbour/source/rtl/errintlo.c

Removed Paths:
-------------
    trunk/harbour/examples/Makefile
    trunk/harbour/examples/dbu/Makefile
    trunk/harbour/examples/guestbk/Makefile
    trunk/harbour/examples/hbapollo/Makefile
    trunk/harbour/examples/hbdoc/Makefile
    trunk/harbour/examples/hbgf/Makefile
    trunk/harbour/examples/hbgf/hbgfgtk/Makefile
    trunk/harbour/examples/hbgf/hbgfos2/Makefile
    trunk/harbour/examples/hbgf/hbgfwin/Makefile
    trunk/harbour/examples/hboleold/Makefile
    trunk/harbour/examples/hbsqlit2/Makefile
    trunk/harbour/examples/hbwhat/Makefile
    trunk/harbour/examples/hscript/Makefile
    trunk/harbour/examples/misc/Makefile
    trunk/harbour/examples/pe/Makefile
    trunk/harbour/examples/pp/Makefile
    trunk/harbour/examples/rdddbt/
    trunk/harbour/examples/rl/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Fri May 29 06:29:10 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 29 06:29:15 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11168] trunk/harbour
Message-ID: <E1M9zKo-0000cG-E3@bj8yhf1.ch3.sourceforge.com>

Revision: 11168
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11168&view=rev
Author:   vszakats
Date:     2009-05-29 10:29:09 +0000 (Fri, 29 May 2009)

Log Message:
-----------
2009-05-29 12:25 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/Makefile
    - Deleted commented 'examples' reference.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Fri May 29 06:35:08 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 29 06:35:13 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11169] trunk/harbour
Message-ID: <E1M9zQa-0000jC-H5@bj8yhf1.ch3.sourceforge.com>

Revision: 11169
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11169&view=rev
Author:   vszakats
Date:     2009-05-29 10:35:07 +0000 (Fri, 29 May 2009)

Log Message:
-----------
2009-05-29 12:27 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  - examples/hbsuper
  + examples/superlib
    * Using original name.

Modified Paths:
--------------
    trunk/harbour/ChangeLog

Added Paths:
-----------
    trunk/harbour/examples/superlib/

Removed Paths:
-------------
    trunk/harbour/examples/hbsuper/


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Fri May 29 06:37:30 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 29 06:37:36 2009
Subject: [Harbour] A single question about hbmk2 X uhttpd
In-Reply-To: <531d7a750905281836l3be6d8c5ld8b80734cc2b5e0d@mail.gmail.com>
References: <531d7a750905281836l3be6d8c5ld8b80734cc2b5e0d@mail.gmail.com>
Message-ID: <18d502870905290337u5b218485n2aaa0c09ad8e43c3@mail.gmail.com>

Hi,

This should be fixed after:
2009-05-29 03:50 UTC+0200 Viktor Szakats (harbour.01 syenar hu)

Brgds,
Viktor

On Fri, May 29, 2009 at 3:36 AM, Vailton Renato <vailtom@gmail.com> wrote:
> I'm trying to compile uhttp modules with hbmk2 and i got this errors:
>
>
> c:\Harbour\contrib\examples\uhttpd\modules>type c:\hbmgw\bin\hbmk.cfg
> # Harbour Make configuration
> # Generated by Harbour build process
> arch=win
> comp=mingw
>
> c:\Harbour\contrib\examples\uhttpd\modules>hbmk2 allmod.hbm -trace -info
> hbmk: Autodetected architecture: win
> hbmk: Using Harbour: C:\hbmgw\bin C:\hbmgw\include C:\hbmgw\lib C:\hbmgw\lib
> hbmk: Processing configuration: c:\hbmgw\bin\hbmk.cfg
> hbmk: Harbour compiler command (internal):
> C:\hbmgw\bin\harbour.exe -n2 cookie.prg info.prg showcounter.prg
> tableservletdb.prg testajax.prg -gh -w3 -o../home/cgi-bin/
> Harbour 1.1.0dev (Rev. 11153)
> Copyright (c) 1999-2009, http://www.harbour-project.org/
> Compiling 'testajax.prg'...
> testajax.prg(53) Error F0029 ?Can't open #include file 'common.ch'
> 1 error
>
> No code generated
> hbmk: Error: Running Harbour compiler. 1
> C:\hbmgw\bin\harbour.exe -n2 cookie.prg info.prg showcounter.prg
> tableservletdb.prg testajax.prg -gh -w3 -o../home/cgi-bin/
>
> c:\Harbour\contrib\examples\uhttpd\modules>dir c:\hbmgw\common.ch /s
> ?Volume in drive C is Windows 7
> ?Volume Serial Number is 2825-DCD3
>
> ?Directory of c:\hbmgw\include
>
> 26/04/2009 ?22:30 ? ? ? ? ? ? 3.807 common.ch
> ? ? ? ? ? ? ? 1 File(s) ? ? ? ? ?3.807 bytes
>
> ? ? Total Files Listed:
> ? ? ? ? ? ? ? 1 File(s) ? ? ? ? ?3.807 bytes
> ? ? ? ? ? ? ? 0 Dir(s) ?73.914.671.104 bytes free
>
> c:\Harbour\contrib\examples\uhttpd\modules>hbmk2 allmod.hbm -trace
> -info -ic:\hbmgw\include
> hbmk: Autodetected architecture: win
> hbmk: Using Harbour: C:\hbmgw\bin C:\hbmgw\include C:\hbmgw\lib C:\hbmgw\lib
> hbmk: Processing configuration: c:\hbmgw\bin\hbmk.cfg
> hbmk: Harbour compiler command (internal):
> C:\hbmgw\bin\harbour.exe -n2 cookie.prg info.prg showcounter.prg
> tableservletdb.prg testajax.prg -gh -w3 -o../home/cgi-bin/
> Harbour 1.1.0dev (Rev. 11153)
> Copyright (c) 1999-2009, http://www.harbour-project.org/
> Compiling 'testajax.prg'...
> testajax.prg(53) Error F0029 ?Can't open #include file 'common.ch'
> 1 error
>
> No code generated
> hbmk: Error: Running Harbour compiler. 1
> C:\hbmgw\bin\harbour.exe -n2 cookie.prg info.prg showcounter.prg
> tableservletdb.prg testajax.prg -gh -w3 -o../home/cgi-bin/
> c:\Harbour\contrib\examples\uhttpd\modules>
>
>
> I tried some options but without success, any tip?
>
> Many thanks,
> Vailton
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From alex at belacy.belgorod.su  Fri May 29 06:37:30 2009
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Fri May 29 06:37:45 2009
Subject: [Harbour] Re: Mingw and hb_errInternal()
In-Reply-To: <18d502870905290318j35f32a6ej7f0ff537b8013e5a@mail.gmail.com>
References: <4A1E87D5.2020800@belacy.belgorod.su>	<23762999.post@talk.nabble.com>
	<4A1F9061.70600@belacy.belgorod.su>	<4A1FAC74.5070502@belacy.belgorod.su>
	<18d502870905290318j35f32a6ej7f0ff537b8013e5a@mail.gmail.com>
Message-ID: <4A1FBAEA.6070906@belacy.belgorod.su>

  > BTW, is there anything missing to use hbmk2 to build letodb?
> 
   I don't know, I didn't tried it yet.

Regards, Alexander.
From harbour.01 at syenar.hu  Fri May 29 07:33:39 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 29 07:33:49 2009
Subject: [Harbour] Re: Mingw and hb_errInternal()
In-Reply-To: <4A1FBAEA.6070906@belacy.belgorod.su>
References: <4A1E87D5.2020800@belacy.belgorod.su>
	<23762999.post@talk.nabble.com> <4A1F9061.70600@belacy.belgorod.su>
	<4A1FAC74.5070502@belacy.belgorod.su>
	<18d502870905290318j35f32a6ej7f0ff537b8013e5a@mail.gmail.com>
	<4A1FBAEA.6070906@belacy.belgorod.su>
Message-ID: <18d502870905290433u243dfce1g35e7abd143f4ff49@mail.gmail.com>

Hi Alexander,

> ?I don't know, I didn't tried it yet.

I've created for myself .hbm files for letodb, here they are, maybe you
can use it or include it in the Leto CVS. They work for all compilers
(which the source supports of course) and all platforms, I've tried with BCC,
MinGW and MSVC (latter gave some macro redef errors in win headers).
They should even work for xhb if run in 'hbmk2 -xhb <name>.hbm' mode.

Harbour 1.0.x isn't supported by hbmk2 yet, but if there is some demand
I can implement it.

Plus, some compiler specific flag tweaking may be required to match
current make files. I didn't check if there is something special used.
Easy to add to .hbm files.

--- letodb.hbm
#
# $Id$
#

-inc
-oletodb
-iinclude
-n -w -d__WIN_DAEMON__
-cflag={allmsvc}-D_CRT_SECURE_NO_DEPRECATE
-cflag={!xhb}-DHARBOUR_VER_AFTER_101

source/server/server.prg
source/server/errorsys.prg
source/server/errint.c
{linux}source/server/leto_lnx.c
{win}source/server/leto_win.c
source/server/letoacc.c
source/server/letofunc.c

source/common/blowfish.c
source/common/common_c.c
source/common/hbip.c
source/common/net.c
source/common/common.prg
---

--- rddleto.hbm
#
# $Id$
#

-hblib

-inc
-orddleto
-iinclude
-n -w
-cflag={!xhb}-DHARBOUR_VER_AFTER_101

source/client/leto1.c
source/client/letomgmn.c
source/client/rddsys.prg

source/common/blowfish.c
source/common/common_c.c
source/common/hbip.c
source/common/net.c
source/common/common.prg
---

Brgds,
Viktor
From harbour.01 at syenar.hu  Fri May 29 07:46:57 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 29 07:47:02 2009
Subject: [Harbour] Re: Mingw and hb_errInternal()
In-Reply-To: <18d502870905290433u243dfce1g35e7abd143f4ff49@mail.gmail.com>
References: <4A1E87D5.2020800@belacy.belgorod.su>
	<23762999.post@talk.nabble.com> <4A1F9061.70600@belacy.belgorod.su>
	<4A1FAC74.5070502@belacy.belgorod.su>
	<18d502870905290318j35f32a6ej7f0ff537b8013e5a@mail.gmail.com>
	<4A1FBAEA.6070906@belacy.belgorod.su>
	<18d502870905290433u243dfce1g35e7abd143f4ff49@mail.gmail.com>
Message-ID: <18d502870905290446l1e34b0b3x1447229194f8f9fc@mail.gmail.com>

Attached new ones after minor update, this way it's enough to do this
to create both targets:

hbmk2 letodb.hbp rddleto.hbp

(plus added tweaks to avoid any potential problems due
to common compiled objects in the two projects)

Brgds,
Viktor

On Fri, May 29, 2009 at 1:33 PM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:
> Hi Alexander,
>
>> ?I don't know, I didn't tried it yet.
>
> I've created for myself .hbm files for letodb, here they are, maybe you
> can use it or include it in the Leto CVS. They work for all compilers
> (which the source supports of course) and all platforms, I've tried with BCC,
> MinGW and MSVC (latter gave some macro redef errors in win headers).
> They should even work for xhb if run in 'hbmk2 -xhb <name>.hbm' mode.
>
> Harbour 1.0.x isn't supported by hbmk2 yet, but if there is some demand
> I can implement it.
>
> Plus, some compiler specific flag tweaking may be required to match
> current make files. I didn't check if there is something special used.
> Easy to add to .hbm files.
>
> --- letodb.hbm
> #
> # $Id$
> #
>
> -inc
> -oletodb
> -iinclude
> -n -w -d__WIN_DAEMON__
> -cflag={allmsvc}-D_CRT_SECURE_NO_DEPRECATE
> -cflag={!xhb}-DHARBOUR_VER_AFTER_101
>
> source/server/server.prg
> source/server/errorsys.prg
> source/server/errint.c
> {linux}source/server/leto_lnx.c
> {win}source/server/leto_win.c
> source/server/letoacc.c
> source/server/letofunc.c
>
> source/common/blowfish.c
> source/common/common_c.c
> source/common/hbip.c
> source/common/net.c
> source/common/common.prg
> ---
>
> --- rddleto.hbm
> #
> # $Id$
> #
>
> -hblib
>
> -inc
> -orddleto
> -iinclude
> -n -w
> -cflag={!xhb}-DHARBOUR_VER_AFTER_101
>
> source/client/leto1.c
> source/client/letomgmn.c
> source/client/rddsys.prg
>
> source/common/blowfish.c
> source/common/common_c.c
> source/common/hbip.c
> source/common/net.c
> source/common/common.prg
> ---
>
> Brgds,
> Viktor
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: letodb.zip
Type: application/zip
Size: 665 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090529/df7c794c/letodb.zip
From vszakats at users.sourceforge.net  Fri May 29 07:50:10 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 29 07:50:15 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11170] trunk/harbour
Message-ID: <E1MA0bC-0006qC-L9@d5vjzd1.ch3.sourceforge.com>

Revision: 11170
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11170&view=rev
Author:   vszakats
Date:     2009-05-29 11:50:09 +0000 (Fri, 29 May 2009)

Log Message:
-----------
2009-05-29 13:49 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + Added macro ${hb_work} which returns the builtin name 
      for workdir base: '.hbmk' currently.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From rafa at tesipro.com  Fri May 29 08:01:42 2009
From: rafa at tesipro.com (rafa)
Date: Fri May 29 08:01:57 2009
Subject: [Harbour] XML from xHarbour compatibility
Message-ID: <4A1FCEA6.60207@tesipro.com>

This code running into xHarbour, but under Harbour, show this error;

   Error description:Error BASE/1004  No exported method: NTYPE
   Args:
     [   1] = U   nil

Stack Calls
===========
Called from ->NTYPE(0)
Called from ../../txml.prg->TXMLITERATORREGEX:FIND(0)
Called from e_xml.prg->GCONFIGHARBOUR:NEW(62)
Called from e_xml.prg->MAIN(8)

I link lib libxhb.a  in GNU/linux, for compatible xHarbour

--------- This code, go bottom view example xml
----------------------------------------------------------------------------

#include "hbclass.ch"
#include "hbxml.ch"

Function Main()
 Local o

 WITH OBJECT o := gConfigHarbour():Create()
      :New()
 END

return nil

// Clase base para configuraciones
CLASS gConfigXml STATIC
      DATA oDoc, cXml, cResponse, cFile
      DATA cNode, cFind
      DATA lOk INIT .T.
      METHOD New() CONSTRUCTOR
ENDCLASS

METHOD New( ) CLASS gConfigXml

   ::cXml := memoread( ::cFile )
   ::oDoc := TXmlDocument():New( ::cXml )

   if ::oDoc:nStatus != HBXML_STATUS_OK
      ::lOk := .F.
      ::cResponse := "Error While Processing File: " + AllTrim( Str(
::oDoc:nLine ) ) + " # "+;
                     "Error: " + HB_XmlErrorDesc( ::oDoc:nError ) + " # " +;
                     "Tag Error on tag: " + ::oDoc:oErrorNode:cName + "
# " +;
                     "Tag Begin on line: " + AllTrim( Str(
::oDoc:oErrorNode:nBeginLine ) )
      return Self
   endif


RETURN Self

// Configurador para Harbour
CLASS gConfigHarbour FROM gConfigXml
      DATA aLibs
      METHOD Create() CONSTRUCTOR
      METHOD New() CONSTRUCTOR
      METHOD GetLibs() INLINE ::aLibs
ENDCLASS

METHOD Create() CLASS gConfigHarbour
   ::aLibs   := {}
   ::cNode := "harbour"
   ::cFind   := "^lib$"
   ::cFile   := "config.xml"
RETURN Self

METHOD New( ) CLASS gConfigHarbour
   Local oNode, oIter, oNodeLib, cLib, cCheck

   ::Super:New( )

   if ::lOk
      oNode := ::oDoc:FindFirst( ::cNode )
      if oNode != NIL
         oIter := TXmlIteratorRegex( oNode )
         oNodeLib := oIter:Find( ::cFind )   // Exactamente lib
         while oNodeLib != NIL
               cLib   :=  cValtoChar( oNodeLib:GetAttribute( "name" ) )
               cCheck :=  cValtoChar( oNodeLib:GetAttribute( "check" ) )
               ? cLib, cCheck // ALERT: Only Information for test
               AADD( ::aLibs, { iif( cCheck = "yes", .T., .F. ), cLib }  )
               oNodeLib := oIter:Next() // Siguiente libreria
         end while
      endif
    endif

RETURN Self

/* config.xml for testing
<config>
<harbour>
  <lib name="lvm" check="yes" />
  <lib name="lrt" check="yes" />
  <lib name="llan" check="yes"/>
  <lib name="lrdd" check="yes"/>
  <lib name="lmacro" check="yes"/>
  <lib name="lpp" check="yes" />
  <lib name="ldbfntx" check="yes"/>
  <lib name="ldbfcdx" check="yes"/>
  <lib name="ldbfftp" check="yes"/>
  <lib name="lhbsix" check="yes"/>
  <lib name="lpcrepos" check="yes"/>
  <lib name="lcommon" check="yes"/>
  <lib name="lm" check="yes" />
  <lib name="ltip" check="yes"/>
  <lib name="lgtwin" check="no"/>
  <lib name="lgtnul" check="no"/>
</harbour>
</config>
*/


Regards
Rafa Carmona
From vailtom at gmail.com  Fri May 29 08:53:34 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Fri May 29 08:53:40 2009
Subject: [Harbour] A single question about hbmk2 X uhttpd
In-Reply-To: <18d502870905290337u5b218485n2aaa0c09ad8e43c3@mail.gmail.com>
References: <531d7a750905281836l3be6d8c5ld8b80734cc2b5e0d@mail.gmail.com>
	<18d502870905290337u5b218485n2aaa0c09ad8e43c3@mail.gmail.com>
Message-ID: <531d7a750905290553j14e1594ct623f6f64b0f8ed36@mail.gmail.com>

Ok, this works fine! Many thanks...

Brgds,
Vailton Renato
From dbtopas at dbtopas.lt  Fri May 29 08:59:17 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri May 29 08:57:58 2009
Subject: [Harbour] gcc 4.4.0 warnings
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C95023D11C3@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C95023D11C3@PINK.zycie.pzu>
Message-ID: <4A1FDC25.8070407@dbtopas.lt>

>> Sorry I misplace this email :'( This is your output with MinGW .-
>>
>>          0.0
>>          0.0
>> ************************************************************** N .F.
> 
> 
> Ok.. On BCC and Clipper is GPF, Excell handled exception, OW and MingGW work correctly.
> I think of a start-up too MinGW environment.

This means Clipper and Harbour compiled on BCC are the most compatible :D

Regards,
Mindaugas

From vszakats at users.sourceforge.net  Fri May 29 10:05:52 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 29 10:06:16 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11171] trunk/harbour
Message-ID: <E1MA2iW-0005Fk-QU@3kljzd1.ch3.sourceforge.com>

Revision: 11171
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11171&view=rev
Author:   vszakats
Date:     2009-05-29 14:05:51 +0000 (Fri, 29 May 2009)

Log Message:
-----------
2009-05-29 16:02 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Fix to prev fix reported by Vailton. Could RTE when compiling .hrbs.
    + Added -hbraw switch which will make hbmk2 work like harbour compiler.
    + .hbp extension is also recognized when embedded.

  * tests/hbpptest/compare.bat
    ! Fixed long fn.

  * tests/bnch_win.bat
    ! Fix in comment.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/tests/bnch_win.bat
    trunk/harbour/tests/hbpptest/compare.bat
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From alex at belacy.belgorod.su  Fri May 29 11:09:09 2009
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Fri May 29 11:09:17 2009
Subject: [Harbour] Re: Mingw and hb_errInternal()
Message-ID: <091ad5cdff9febc7a5421cadb78865fe@83.234.176.3>

> Attached new ones after minor update, this way it's enough to do this
> to create both targets:
> 
   Thank you, Viktor. I'll try it.

Regards, Alexander.

________________________________________________


From vszakats at users.sourceforge.net  Fri May 29 11:17:46 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 29 11:17:51 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11172] trunk/harbour
Message-ID: <E1MA3q6-0001kn-Ff@d5vjzd1.ch3.sourceforge.com>

Revision: 11172
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11172&view=rev
Author:   vszakats
Date:     2009-05-29 15:17:35 +0000 (Fri, 29 May 2009)

Log Message:
-----------
2009-05-29 17:13 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + Added support for filter keywords 'shared' and 'static'.

  * bin/postinst.bat
  * utils/hbmk2/hbmk2.hbm
  * utils/hbrun/hbrun.hbm
    * Moved extra libs required in shared mode to .hbm files.
    ! Fixed hbl= -> hbi=

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/postinst.bat
    trunk/harbour/utils/hbmk2/hbmk2.hbm
    trunk/harbour/utils/hbmk2/hbmk2.prg
    trunk/harbour/utils/hbrun/hbrun.hbm


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From jarabal at gmail.com  Fri May 29 12:00:06 2009
From: jarabal at gmail.com (Xavi)
Date: Fri May 29 12:02:52 2009
Subject: [Harbour] XML from xHarbour compatibility
In-Reply-To: <4A1FCEA6.60207@tesipro.com>
References: <4A1FCEA6.60207@tesipro.com>
Message-ID: <4A200686.1090401@gmail.com>

rafa,

> METHOD New( ) CLASS gConfigHarbour
>    Local oNode, oIter, oNodeLib, cLib, cCheck
> 
>    ::Super:New( )
> 
>    if ::lOk
>       oNode := ::oDoc:FindFirst( ::cNode )
>       if oNode != NIL
>          oIter := TXmlIteratorRegex( oNode )

oIter := TXmlIteratorRegex():New( oNode )

--
Xavi

rafa escribi?:
> This code running into xHarbour, but under Harbour, show this error;
> 
>    Error description:Error BASE/1004  No exported method: NTYPE
>    Args:
>      [   1] = U   nil
> 
> Stack Calls
> ===========
> Called from ->NTYPE(0)
> Called from ../../txml.prg->TXMLITERATORREGEX:FIND(0)
> Called from e_xml.prg->GCONFIGHARBOUR:NEW(62)
> Called from e_xml.prg->MAIN(8)
> 
> I link lib libxhb.a  in GNU/linux, for compatible xHarbour
> 
> --------- This code, go bottom view example xml
> ----------------------------------------------------------------------------
> 
> #include "hbclass.ch"
> #include "hbxml.ch"
> 
> Function Main()
>  Local o
> 
>  WITH OBJECT o := gConfigHarbour():Create()
>       :New()
>  END
> 
> return nil
> 
> // Clase base para configuraciones
> CLASS gConfigXml STATIC
>       DATA oDoc, cXml, cResponse, cFile
>       DATA cNode, cFind
>       DATA lOk INIT .T.
>       METHOD New() CONSTRUCTOR
> ENDCLASS
> 
> METHOD New( ) CLASS gConfigXml
> 
>    ::cXml := memoread( ::cFile )
>    ::oDoc := TXmlDocument():New( ::cXml )
> 
>    if ::oDoc:nStatus != HBXML_STATUS_OK
>       ::lOk := .F.
>       ::cResponse := "Error While Processing File: " + AllTrim( Str(
> ::oDoc:nLine ) ) + " # "+;
>                      "Error: " + HB_XmlErrorDesc( ::oDoc:nError ) + " # " +;
>                      "Tag Error on tag: " + ::oDoc:oErrorNode:cName + "
> # " +;
>                      "Tag Begin on line: " + AllTrim( Str(
> ::oDoc:oErrorNode:nBeginLine ) )
>       return Self
>    endif
> 
> 
> RETURN Self
> 
> // Configurador para Harbour
> CLASS gConfigHarbour FROM gConfigXml
>       DATA aLibs
>       METHOD Create() CONSTRUCTOR
>       METHOD New() CONSTRUCTOR
>       METHOD GetLibs() INLINE ::aLibs
> ENDCLASS
> 
> METHOD Create() CLASS gConfigHarbour
>    ::aLibs   := {}
>    ::cNode := "harbour"
>    ::cFind   := "^lib$"
>    ::cFile   := "config.xml"
> RETURN Self
> 
> METHOD New( ) CLASS gConfigHarbour
>    Local oNode, oIter, oNodeLib, cLib, cCheck
> 
>    ::Super:New( )
> 
>    if ::lOk
>       oNode := ::oDoc:FindFirst( ::cNode )
>       if oNode != NIL
>          oIter := TXmlIteratorRegex( oNode )
>          oNodeLib := oIter:Find( ::cFind )   // Exactamente lib
>          while oNodeLib != NIL
>                cLib   :=  cValtoChar( oNodeLib:GetAttribute( "name" ) )
>                cCheck :=  cValtoChar( oNodeLib:GetAttribute( "check" ) )
>                ? cLib, cCheck // ALERT: Only Information for test
>                AADD( ::aLibs, { iif( cCheck = "yes", .T., .F. ), cLib }  )
>                oNodeLib := oIter:Next() // Siguiente libreria
>          end while
>       endif
>     endif
> 
> RETURN Self
> 
> /* config.xml for testing
> <config>
> <harbour>
>   <lib name="lvm" check="yes" />
>   <lib name="lrt" check="yes" />
>   <lib name="llan" check="yes"/>
>   <lib name="lrdd" check="yes"/>
>   <lib name="lmacro" check="yes"/>
>   <lib name="lpp" check="yes" />
>   <lib name="ldbfntx" check="yes"/>
>   <lib name="ldbfcdx" check="yes"/>
>   <lib name="ldbfftp" check="yes"/>
>   <lib name="lhbsix" check="yes"/>
>   <lib name="lpcrepos" check="yes"/>
>   <lib name="lcommon" check="yes"/>
>   <lib name="lm" check="yes" />
>   <lib name="ltip" check="yes"/>
>   <lib name="lgtwin" check="no"/>
>   <lib name="lgtnul" check="no"/>
> </harbour>
> </config>
> */
> 
> 
> Regards
> Rafa Carmona
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 


From vszakats at users.sourceforge.net  Fri May 29 12:09:52 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 29 12:09:58 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11173] trunk/harbour
Message-ID: <E1MA4eW-0005UF-Ry@dn4whf1.ch3.sourceforge.com>

Revision: 11173
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11173&view=rev
Author:   vszakats
Date:     2009-05-29 16:09:51 +0000 (Fri, 29 May 2009)

Log Message:
-----------
2009-05-29 18:04 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/gtwvg/gtwvg.h
    + Added extern for hb_wvt_GetStringAttrib(), hb_wvt_PutStringAttrib().
      Required by terminal example.

  * contrib/gtwvg/wvggui.h
    * Comment format. Synced with gtwvg.h.

  - examples/terminal/trm_server.prg
  + examples/terminal/trm_srv.prg
  - examples/terminal/trm_client.prg
  + examples/terminal/trm_cli.prg
  - examples/terminal/trm_appn.prg
  + examples/terminal/trm_app.prg
  - examples/terminal/trm_appn.hbm
  + examples/terminal/trm_app.hbp
  + examples/terminal/trm_misc.c
  + examples/terminal/trm_cli.hbp
  + examples/terminal/trm_srv.hbp
  * examples/terminal/terminal.prg
  * examples/terminal/terminal.hbc
  * examples/terminal/readme.txt
    ! Removed all inline stuff.
    ! Fixed problems with mixing C++/C objects due to
      inline and missing function declarations.
    % Windows only function replaced with RTL one.
    * Renamed *.hbm files to .hbp, so now it's easy to build
      the whole project with: hbmk2 trm_app.hbp trm_cli.hbp trm_srv.hbp
    ! Fixed hard coded local executable names + dirs.
    ! Synced client and server default ports.
    ; Now all of these tools build ok and they also work.

  * contrib/hbwin/legacyc.c
    ! Deleted recently added compat calls.
      (they are static in xhb and they collide with RTL names)

  * examples/hbgf/hbgfgtk/hbgfgtk.hbm
    ! Minor fix.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtwvg/gtwvg.h
    trunk/harbour/contrib/gtwvg/wvggui.h
    trunk/harbour/contrib/hbwin/legacyc.c
    trunk/harbour/examples/hbgf/hbgfgtk/hbgfgtk.hbm
    trunk/harbour/examples/terminal/readme.txt
    trunk/harbour/examples/terminal/terminal.hbc
    trunk/harbour/examples/terminal/terminal.prg

Added Paths:
-----------
    trunk/harbour/examples/terminal/trm_app.hbp
    trunk/harbour/examples/terminal/trm_app.prg
    trunk/harbour/examples/terminal/trm_cli.hbp
    trunk/harbour/examples/terminal/trm_cli.prg
    trunk/harbour/examples/terminal/trm_misc.c
    trunk/harbour/examples/terminal/trm_srv.hbp
    trunk/harbour/examples/terminal/trm_srv.prg

Removed Paths:
-------------
    trunk/harbour/examples/terminal/trm_appn.hbm
    trunk/harbour/examples/terminal/trm_appn.prg
    trunk/harbour/examples/terminal/trm_client.prg
    trunk/harbour/examples/terminal/trm_server.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Fri May 29 12:15:38 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 29 12:15:43 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11174] trunk/harbour
Message-ID: <E1MA4k6-0005ct-Ve@dn4whf1.ch3.sourceforge.com>

Revision: 11174
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11174&view=rev
Author:   vszakats
Date:     2009-05-29 16:15:38 +0000 (Fri, 29 May 2009)

Log Message:
-----------
2009-05-29 18:15 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * examples/terminal/trm_cli.prg
  * examples/terminal/terminal.prg
  * examples/terminal/terminal.hbc
    ! xhb lib not needed anymore.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/examples/terminal/terminal.hbc
    trunk/harbour/examples/terminal/terminal.prg
    trunk/harbour/examples/terminal/trm_cli.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Fri May 29 12:17:11 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 29 12:17:16 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11175] trunk/harbour
Message-ID: <E1MA4lb-0005gx-5q@dn4whf1.ch3.sourceforge.com>

Revision: 11175
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11175&view=rev
Author:   vszakats
Date:     2009-05-29 16:17:10 +0000 (Fri, 29 May 2009)

Log Message:
-----------
2009-05-29 18:16 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * examples/terminal/terminal.hbc
    ! hbwin not needed.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/examples/terminal/terminal.hbc


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Fri May 29 12:32:24 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 29 12:32:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11176] trunk/harbour
Message-ID: <E1MA50K-000650-Qn@dn4whf1.ch3.sourceforge.com>

Revision: 11176
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11176&view=rev
Author:   vszakats
Date:     2009-05-29 16:32:23 +0000 (Fri, 29 May 2009)

Log Message:
-----------
2009-05-29 18:31 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.pt_BR.po
  * utils/hbmk2/hbmk2.hu_HU.po
  * utils/hbmk2/hbmk2.hbm
  * utils/hbmk2/hbmk2.prg
  * utils/hbi18n/hbi18n.prg
    * hbi -> hbl (settling back, again sorry for the mess).

  * examples/terminal/trm_misc.c
    % Removed unused Windows function.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/examples/terminal/trm_misc.c
    trunk/harbour/utils/hbi18n/hbi18n.prg
    trunk/harbour/utils/hbmk2/hbmk2.hbm
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.po
    trunk/harbour/utils/hbmk2/hbmk2.prg
    trunk/harbour/utils/hbmk2/hbmk2.pt_BR.po


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Fri May 29 12:38:27 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 29 12:38:32 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11177] trunk/harbour
Message-ID: <E1MA56B-0006EE-Rw@dn4whf1.ch3.sourceforge.com>

Revision: 11177
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11177&view=rev
Author:   vszakats
Date:     2009-05-29 16:38:23 +0000 (Fri, 29 May 2009)

Log Message:
-----------
2009-05-29 18:35 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   - utils/hbformat/hbformat.hbm
   + utils/hbformat/hbformat.hbp
   - utils/hbmk2/hbmk2.hbm
   + utils/hbmk2/hbmk2.hbp
   - utils/hbtest/hbtest.hbm
   + utils/hbtest/hbtest.hbp
   + utils/hbi18n/hbi18n.hbp
   - utils/hbi18n/hbi18n.hbm
   - utils/hbrun/hbrun.hbm
   + utils/hbrun/hbrun.hbp
   - contrib/hbbtree/tests/test.hbm
   + contrib/hbbtree/tests/test.hbp
   - examples/pp/pp.hbm
   + examples/pp/pp.hbp
   - examples/hbdoc/hbdoc.hbm
   + examples/hbdoc/hbdoc.hbp
   + examples/superlib/hbsuper.hbp
   - examples/superlib/hbsuper.hbm
   + examples/hbsqlit2/hbsqlit2.hbp
   - examples/hbsqlit2/hbsqlit2.hbm
   + examples/hboleold/hboleold.hbp
   - examples/hboleold/hboleold.hbm
   - examples/hbapollo/hbapollo.hbm
   + examples/hbapollo/hbapollo.hbp
   - examples/pe/pe.hbm
   + examples/pe/pe.hbp
   - examples/guestbk/guestbk.hbm
   + examples/guestbk/guestbk.hbp
   - examples/hbgf/hbgfwin/hbgfwin.hbm
   + examples/hbgf/hbgfwin/hbgfwin.hbp
   - examples/hbgf/hbgfos2/hbgfos2.hbm
   + examples/hbgf/hbgfos2/hbgfos2.hbp
   - examples/hbgf/hbgfgtk/hbgfgtk.hbm
   + examples/hbgf/hbgfgtk/hbgfgtk.hbp
   + examples/uhttpd/uhttpd.hbp
   - examples/uhttpd/uhttpdgd.hbm
   + examples/uhttpd/uhttpdgd.hbp
   + examples/uhttpd/modules/allmod.hbp
   - examples/uhttpd/modules/allmod.hbm
   - examples/uhttpd/uhttpd.hbm
   - examples/dbu/dbu.hbm
   + examples/dbu/dbu.hbp
   - examples/hscript/hscript.hbm
   + examples/hscript/hscript.hbp
   - examples/hbwhat/hbwhat.hbm
   + examples/hbwhat/hbwhat.hbp
   - examples/rl/rl.hbm
   + examples/rl/rl.hbp
     * Renamed .hbm files to .hbp. So f.e. now it's possible to build 
       multiple of these from one hbmk2 command and it's also more obvious 
       that an .hbp files is a project (target).

Modified Paths:
--------------
    trunk/harbour/ChangeLog

Added Paths:
-----------
    trunk/harbour/contrib/hbbtree/tests/test.hbp
    trunk/harbour/examples/dbu/dbu.hbp
    trunk/harbour/examples/guestbk/guestbk.hbp
    trunk/harbour/examples/hbapollo/hbapollo.hbp
    trunk/harbour/examples/hbdoc/hbdoc.hbp
    trunk/harbour/examples/hbgf/hbgfgtk/hbgfgtk.hbp
    trunk/harbour/examples/hbgf/hbgfos2/hbgfos2.hbp
    trunk/harbour/examples/hbgf/hbgfwin/hbgfwin.hbp
    trunk/harbour/examples/hboleold/hboleold.hbp
    trunk/harbour/examples/hbsqlit2/hbsqlit2.hbp
    trunk/harbour/examples/hbwhat/hbwhat.hbp
    trunk/harbour/examples/hscript/hscript.hbp
    trunk/harbour/examples/pe/pe.hbp
    trunk/harbour/examples/pp/pp.hbp
    trunk/harbour/examples/rl/rl.hbp
    trunk/harbour/examples/superlib/hbsuper.hbp
    trunk/harbour/examples/uhttpd/modules/allmod.hbp
    trunk/harbour/examples/uhttpd/uhttpd.hbp
    trunk/harbour/examples/uhttpd/uhttpdgd.hbp
    trunk/harbour/utils/hbformat/hbformat.hbp
    trunk/harbour/utils/hbi18n/hbi18n.hbp
    trunk/harbour/utils/hbmk2/hbmk2.hbp
    trunk/harbour/utils/hbrun/hbrun.hbp
    trunk/harbour/utils/hbtest/hbtest.hbp

Removed Paths:
-------------
    trunk/harbour/contrib/hbbtree/tests/test.hbm
    trunk/harbour/examples/dbu/dbu.hbm
    trunk/harbour/examples/guestbk/guestbk.hbm
    trunk/harbour/examples/hbapollo/hbapollo.hbm
    trunk/harbour/examples/hbdoc/hbdoc.hbm
    trunk/harbour/examples/hbgf/hbgfgtk/hbgfgtk.hbm
    trunk/harbour/examples/hbgf/hbgfos2/hbgfos2.hbm
    trunk/harbour/examples/hbgf/hbgfwin/hbgfwin.hbm
    trunk/harbour/examples/hboleold/hboleold.hbm
    trunk/harbour/examples/hbsqlit2/hbsqlit2.hbm
    trunk/harbour/examples/hbwhat/hbwhat.hbm
    trunk/harbour/examples/hscript/hscript.hbm
    trunk/harbour/examples/pe/pe.hbm
    trunk/harbour/examples/pp/pp.hbm
    trunk/harbour/examples/rl/rl.hbm
    trunk/harbour/examples/superlib/hbsuper.hbm
    trunk/harbour/examples/uhttpd/modules/allmod.hbm
    trunk/harbour/examples/uhttpd/uhttpd.hbm
    trunk/harbour/examples/uhttpd/uhttpdgd.hbm
    trunk/harbour/utils/hbformat/hbformat.hbm
    trunk/harbour/utils/hbi18n/hbi18n.hbm
    trunk/harbour/utils/hbmk2/hbmk2.hbm
    trunk/harbour/utils/hbrun/hbrun.hbm
    trunk/harbour/utils/hbtest/hbtest.hbm


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From rafa at tesipro.com  Fri May 29 12:42:23 2009
From: rafa at tesipro.com (rafa)
Date: Fri May 29 12:42:29 2009
Subject: [Harbour] XML from xHarbour compatibility
In-Reply-To: <4A200686.1090401@gmail.com>
References: <4A1FCEA6.60207@tesipro.com> <4A200686.1090401@gmail.com>
Message-ID: <4A20106F.4030208@tesipro.com>

Xavi escribi?:
> rafa,
>
>> METHOD New( ) CLASS gConfigHarbour
>>    Local oNode, oIter, oNodeLib, cLib, cCheck
>>
>>    ::Super:New( )
>>
>>    if ::lOk
>>       oNode := ::oDoc:FindFirst( ::cNode )
>>       if oNode != NIL
>>          oIter := TXmlIteratorRegex( oNode )
>
> oIter := TXmlIteratorRegex():New( oNode )
>
Ups! Thanks, but... not  is must easy create function TXmlIteratorRegex 
like xHarbour ?

I say for compatibility...

Regards
Rafa Carmona
From harbour.01 at syenar.hu  Fri May 29 12:59:13 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 29 12:59:20 2009
Subject: [Harbour] XML from xHarbour compatibility
In-Reply-To: <4A20106F.4030208@tesipro.com>
References: <4A1FCEA6.60207@tesipro.com> <4A200686.1090401@gmail.com>
	<4A20106F.4030208@tesipro.com>
Message-ID: <18d502870905290959m6185d3ddw15ccbb34df8c1fc3@mail.gmail.com>

>>> METHOD New( ) CLASS gConfigHarbour
>>> ? ?Local oNode, oIter, oNodeLib, cLib, cCheck
>>>
>>> ? ?::Super:New( )
>>>
>>> ? ?if ::lOk
>>> ? ? ? oNode := ::oDoc:FindFirst( ::cNode )
>>> ? ? ? if oNode != NIL
>>> ? ? ? ? ?oIter := TXmlIteratorRegex( oNode )
>>
>> oIter := TXmlIteratorRegex():New( oNode )
>>
> Ups! Thanks, but... not ?is must easy create function TXmlIteratorRegex
> like xHarbour ?
>
> I say for compatibility...

Harbour ignores 'CONSTRUCTOR' keyword in class definition.
To me it looks this can cause a few problems along the way,
probably that's the reason we don't support it.

[ I personally also don't like it, since it's yet another hidden synonym
and a way to create less clear source code by hiding method
names, just to save a few keystrokes. It's also interesting what
happens if multiple constructors are delegated. BTW C# also didn't
take this feature from VB AFAIK, it was called "default method" there. ]

The classic (and clear) way to solve this was to create a new
function called TXmlIteratorRegexNew(), like with TBrowseNew(),
GetNew(), etc.

Brgds,
Viktor
From info at fsgiudice.com  Fri May 29 13:00:19 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri May 29 13:00:27 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11144] trunk/harbour
In-Reply-To: <E1M96fm-0001jJ-Nx@dn4whf1.ch3.sourceforge.com>
References: <E1M96fm-0001jJ-Nx@dn4whf1.ch3.sourceforge.com>
Message-ID: <4A2014A3.2030500@fsgiudice.com>

Hi Viktor,

Il 27/05/2009 2.07, vszakats@users.sourceforge.net ha scritto:
> Revision: 11144
>           http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11144&view=rev
> Author:   vszakats
> Date:     2009-05-27 00:07:09 +0000 (Wed, 27 May 2009)
> 
> Log Message:
> -----------
>   * source/rdd/usrrdd/rdds/arrayrdd.prg
>     ; Added some patches recently committed to xhb:
>     ! few fixes provided by Quique
>     + Added AR_LOCK() function, but commented.
>     ; NOTE: Francesco, would you mind reviewing these changes?

sure, ASAP.
Sorry for delay in reply but these days are very busy for me.

Best regards,
Francesco
From bedipritpal at hotmail.com  Fri May 29 13:01:07 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri May 29 13:01:12 2009
Subject: [Harbour] MT - Xbase++ - A Code Snippet
Message-ID: <23783523.post@talk.nabble.com>


Hello Przemek

Is it possible in Harbour that if the code below is executed on a multi cpu
machine, 
we could see the multiple PIDs in the task manager. I mean is is possible to
execute threads on 
multiple CPUs ?



> 
> //////////////////////////////////////////////////////////////////////
> //
> //  COFFEE.PRG
> //
> //  Copyright:
> //      Alaska Software, (c) 1997-2005. All rights reserved.         
> //  
> //  Contents:
> //      Example for advanced multi-threaded programming.
> //   
> //      This example is a real life simulation of a team of programmers
> //      and a single coffee machine. It shows how to solve special
> problems
> //      that may arise in multi-threaded programs.
> //   
> //  Remarks:
> //      Watch the program's output before studying the code
> //   
> //      The program demonstrates two programming techniques for
> //      multi-threading using a classical problem: multiple threads
> //      access and change shared program resources at the same time and
> //      must be coordinated. Thread coordination is accomplished using
> //      one SYNC method (serialize program execution in multiple treads)
> //      and two Signal objects (halt/restart program flow in one thread).
> //   
> //      The simulation uses:
> //        1) One thread for the coffee machine (C)
> //        2) Nine threads for the team of programmers (P)
> //   
> //      These are the real life assumptions of the program:
> //        1) When no coffee is left in the coffee machine, one thread (C)
> //           must wait until another thread (P) fills the coffee machine
> //        2) While the coffee machine is running, up to nine threads (P)
> //           must stop until the coffee is ready
> //        3) A programmer (P) works while he has coffee. When his cup is
> //           empty, the programmer goes for a refill.
> //        4) Only one programmer (P) has access to the coffee machine (C)
> //           at any point in time. If other programmers want to refill
> //           their cups at the same time, the corresponding threads (P)
> //           must stop.
> //   
> //////////////////////////////////////////////////////////////////////
> 
> 
> /*
>  * The Main procedure creates the threads, starts them and waits for a
>  * key stroke to terminate the program. Ten threads are running while
>  * Inkey(0) waits for a key.
>  */
> PROCEDURE Main
>    LOCAL i, oMachine
>    LOCAL aTime := { 130, 100, 140, 90, 100, 110, 150, 120, 100 }
>    LOCAL aNames:= { "Frank++ ", "Gernot  ", "Andreas ", ;
>                     "Joerg   ", "Michael ", "Steffen ", ;
>                     "Till    ", "Volker  ", "Wolfgang"  }
>    CLS
> 
>    // Start first thread (the coffee machine)
>    oMachine := CoffeeMachine():new( 20 )
>    oMachine:start()
> 
>    // Start nine additional threads (the team of programmers)
>    FOR i := 1 TO 9
>       Programmer():new( aNames[i], aTime[i], oMachine ):start()
>    NEXT
> 
>    // Wait for a key stroke
>    DispOutAt( 3, 0, "Press a key to QUIT" )
>    Inkey(0)
> 
> RETURN
> 
> 
> 
> /*
>  * This class simulates a coffee machine. Access to the coffee machine is
>  * synchronized by the SYNC method :enter(). Two Signal objects make
>  * sure that a programmer can get coffee only if coffee is ready, and
>  * that the coffee machine waits to be filled when empty.
>  */
> CLASS CoffeeMachine FROM Thread
>    EXPORTED:
>    VAR capacity, coffee, waterIsFilled, coffeeIsReady
> 
>    METHOD init, execute
>    SYNC METHOD enter
> ENDCLASS
> 
> METHOD CoffeeMachine:init( nCapacity )
>    ::thread:init()
>    ::setInterval( 10 )
>    ::coffee        := 0
>    ::capacity      := nCapacity
>    ::waterIsFilled := Signal():new()
>    ::coffeeIsReady := Signal():new()
> RETURN self
> 
> 
> 
> /*
>  * Only one object of the Programmer class can execute the :enter() method
>  * at any point in time (SYNC method!). The color Red indicates
>  * during runtime which thread is waiting to execute this method.
>  */
> METHOD CoffeeMachine:enter( oProgrammer )
>    oProgrammer:takeCoffee()
> RETURN self
> 
> 
> 
> /*
>  * As long as ::coffee >= 1, the CoffeeMachine thread issues the
>  * ::coffeeIsReady signal which all Programmer threads are waiting for.
>  * If ::coffee is less than 1, the thread waits until a Programmer thread
>  * signals ::waterIsFilled. Then, the "coffee machine" enters the
>  * DO WHILE loop which delays the ::coffeeIsReady signal.
>  */
> METHOD CoffeeMachine:execute
>    LOCAL n
> 
>    IF ::coffee < 1
>       DispoutAt( 1, 0, PadR( "Coffee is empty! ",80 ), "W+/B" )
> 
>       ::waterIsFilled:wait()
> 
>       n := 0
>       DO WHILE ++n <= ::capacity
>          DispoutAt( 1, 0, PadR( "Coffee machine is running!
> "+Replicate(Chr(219),2*n), 80 ), "W+/B" )
>          Sleep(35)
>       ENDDO
>       ::coffee := ::capacity
>    ENDIF
> 
>    DispoutAt( 1, 0, PadR( "Coffee is ready!          
> "+Replicate(Chr(176),::coffee*2), 80 ) )
>    ::coffeeIsReady:signal()
> 
> RETURN self
> 
> 
> 
> 
> /*
>  * This class simulates a single programmer. A programmer works as long
>  * as he has coffee.
>  */
> CLASS Programmer FROM Thread
>    EXPORTED:
>    VAR name, coffee, coffeeMachine
>    METHOD init, execute, takeCoffee
> ENDCLASS
> 
> 
> 
> /*
>  * A Programmer thread is re-started each time <nInterval> * 1/100 seconds
>  * have elapsed. This is equivalent to the time a programmer needs to
>  * drink his cup of coffee.
>  */
> METHOD Programmer:init( cName, nInterval, oMachine )
>    ::thread:init()
>    ::setInterval( nInterval )
>    ::coffee        := 0
>    ::name          := cName
>    ::coffeeMachine := oMachine
> RETURN self
> 
> 
> 
> /*
>  * This method simulates a working programmer. He works only if there is
>  * coffee in his cup. If the cup is empty (::coffee == 0), the programmer
>  * walks to the coffee machine (:enter()). By this, he restricts all other
>  * Programmer threads from accessing the coffee machine.
>  */
> METHOD Programmer:execute
>    LOCAL nRow := ThreadID() * 2
> 
>    IF ::coffee == 0
>       // Coffee cup is empty
>       DispoutAt( nRow, 0, PadR( ::name + " NEEDS coffee", 80), "W+/R" )
> 
>       // When a Programmer thread executes the SYNC method :enter(),
>       // all other Programmer threads are stopped here which want
>       // to execute this method at the same time
>       ::coffeeMachine:enter( self )
>    ENDIF
> 
>    DispoutAt( nRow, 0, PadR( ::name + " is working - " + ;
>                        Replicate( ".", 10*::coffee), 80) )
> 
>    // A programmer sips coffee
>    ::coffee := Max( ::coffee - 0.1, 0 )
> RETURN
> 
> 
> 
> /*
>  * A programer fills his cup in this method. If no coffee is left in the
>  * coffee machine (::coffeeMachine:coffee < 1), the CoffeeMachine thread
>  * is signaled (programmer fills coffee machine).
>  */
> METHOD Programmer:takeCoffee
>    LOCAL nRow := ThreadID() * 2
> 
>    IF ::coffeeMachine:coffee < 1
>       // Coffee machine is empty
>       DispoutAt( nRow, 0, PadR( ::name + " MAKES coffee", 80 ), "W+/B" )
> 
>       // The waiting CoffeeMachine thread resumes after being signaled
>       ::coffeeMachine:waterIsFilled:signal()
>    ENDIF
> 
>    // All Programmer threads wait at this point until the
>    // CoffeeMachine thread signals "coffee is ready".
>    // The signal is delayed while the coffee machine is running.
>    ::coffeeMachine:coffeeIsReady:wait()
> 
>    DispoutAt( nRow, 0, PadR( ::name + " takes coffee ", 80 ), "N/G" )
> 
>    // A programmer fills his cup with coffee from the coffee machine
>    ::coffeeMachine:coffee -= 1
> 
>    // Cup is filled again
>    ::coffee := 1
>    Sleep(100)
> RETURN self
> 
> 
> 

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/MT---Xbase%2B%2B---A-Code-Snippet-tp23783523p23783523.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From alex at belacy.belgorod.su  Fri May 29 13:01:10 2009
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Fri May 29 13:01:20 2009
Subject: [Harbour] Re: Mingw and hb_errInternal()
Message-ID: <f8ddaf0d9646f28d24cdc0e64b63aa03@83.234.176.3>

> 
> hbmk2 letodb.hbp rddleto.hbp
> 

  I've copied  these two files to the letodb directory, executed this
command and got the following:

hbmk: Processing configuration: c:\harbour\bin\hbmk.cfg
hbmk: Processing: letodb.hbp
hbmk: Processing: rddleto.hbp

hbmk: Error: No source files were specified.

What I did wrong ?

Regards, ALexander.


________________________________________________


From info at fsgiudice.com  Fri May 29 13:04:19 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri May 29 13:05:00 2009
Subject: [Harbour] A single question about hbmk2 X uhttpd
In-Reply-To: <531d7a750905281836l3be6d8c5ld8b80734cc2b5e0d@mail.gmail.com>
References: <531d7a750905281836l3be6d8c5ld8b80734cc2b5e0d@mail.gmail.com>
Message-ID: <4A201593.3080307@fsgiudice.com>

Hi Vailton,

Il 29/05/2009 3.36, Vailton Renato ha scritto:
> I'm trying to compile uhttp modules with hbmk2 and i got this errors:
> 
I will check ASAP.
Best regards,
Francesco

PS: remember to update crew list in harbour site with my name, please.

From harbour.01 at syenar.hu  Fri May 29 13:07:58 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 29 13:08:03 2009
Subject: [Harbour] Re: Mingw and hb_errInternal()
In-Reply-To: <f8ddaf0d9646f28d24cdc0e64b63aa03@83.234.176.3>
References: <f8ddaf0d9646f28d24cdc0e64b63aa03@83.234.176.3>
Message-ID: <18d502870905291007r34d08b01obbe5a7411db3d3cb@mail.gmail.com>

> hbmk: Processing configuration: c:\harbour\bin\hbmk.cfg
> hbmk: Processing: letodb.hbp
> hbmk: Processing: rddleto.hbp
>
> hbmk: Error: No source files were specified.
>
> What I did wrong ?

You seem to be using an older version of hbmk2.

[ I've reshuffled the extensions lately, which means current .hbp
had a different meaning in your version. Anyway, try with a current
hbmk2.exe and it will work. ]

Brgds,
Viktor
From harbour.01 at syenar.hu  Fri May 29 13:08:40 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 29 13:08:45 2009
Subject: [Harbour] A single question about hbmk2 X uhttpd
In-Reply-To: <4A201593.3080307@fsgiudice.com>
References: <531d7a750905281836l3be6d8c5ld8b80734cc2b5e0d@mail.gmail.com>
	<4A201593.3080307@fsgiudice.com>
Message-ID: <18d502870905291008p7c70393ek1c4032d6fb73aec9@mail.gmail.com>

Francesco, it was an hbmk2 problem, it's okay now, don't spend time on this.

Brgds,
Viktor

On Fri, May 29, 2009 at 7:04 PM, Francesco Saverio Giudice
<info@fsgiudice.com> wrote:
> Hi Vailton,
>
> Il 29/05/2009 3.36, Vailton Renato ha scritto:
>>
>> I'm trying to compile uhttp modules with hbmk2 and i got this errors:
>>
> I will check ASAP.
> Best regards,
> Francesco
>
> PS: remember to update crew list in harbour site with my name, please.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From vszakats at users.sourceforge.net  Fri May 29 13:16:23 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 29 13:16:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11178] trunk/harbour
Message-ID: <E1MA5gt-0000zW-Vg@3kljzd1.ch3.sourceforge.com>

Revision: 11178
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11178&view=rev
Author:   vszakats
Date:     2009-05-29 17:16:22 +0000 (Fri, 29 May 2009)

Log Message:
-----------
2009-05-29 18:35 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * doc/dirstruc.txt
  * bin/postinst.bat
  * contrib/gtwvg/tests/demoxbp.prg
  * contrib/gtwvg/tests/demowvg.prg
  * examples/superlib/readme.txt
  * examples/uhttpd/uhttpdgd.hbp
  * examples/uhttpd/readme.txt
  * examples/terminal/trm_cli.hbp
  * examples/terminal/trm_srv.hbp
    ! Missing updated to prev changes.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/postinst.bat
    trunk/harbour/contrib/gtwvg/tests/demowvg.prg
    trunk/harbour/contrib/gtwvg/tests/demoxbp.prg
    trunk/harbour/doc/dirstruc.txt
    trunk/harbour/examples/superlib/readme.txt
    trunk/harbour/examples/terminal/trm_cli.hbp
    trunk/harbour/examples/terminal/trm_srv.hbp
    trunk/harbour/examples/uhttpd/readme.txt
    trunk/harbour/examples/uhttpd/uhttpdgd.hbp

Property Changed:
----------------
    trunk/harbour/examples/terminal/trm_cli.hbp
    trunk/harbour/examples/terminal/trm_srv.hbp


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Fri May 29 13:29:15 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 29 13:29:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11179] trunk/harbour
Message-ID: <E1MA5tL-0001Kf-1d@3kljzd1.ch3.sourceforge.com>

Revision: 11179
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11179&view=rev
Author:   vszakats
Date:     2009-05-29 17:29:14 +0000 (Fri, 29 May 2009)

Log Message:
-----------
2009-05-29 18:40 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * bin/postinst.bat
    ! Typo in hbformat command.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/postinst.bat


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Fri May 29 13:31:53 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 29 13:31:59 2009
Subject: [Harbour] dev -> rc1
Message-ID: <18d502870905291031w1982234dw1fafc5475827edf9@mail.gmail.com>

Hi All,

Is there anything against going rc1?

I also like to propose to change our version number,
as we've definitely done more that 0.1 is worth, also
xhb is now at 1.2, while feature-wise we're ahead.

Any opinions on these?

1.) 1.1.0rc1 (next logical)
2.) 1.2.0rc1 (current xhb major rev)
3.) 1.4.0rc1 (my vote)

Brgds,
Viktor
From harbour.01 at syenar.hu  Fri May 29 13:33:39 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 29 13:33:45 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11144] trunk/harbour
In-Reply-To: <4A2014A3.2030500@fsgiudice.com>
References: <E1M96fm-0001jJ-Nx@dn4whf1.ch3.sourceforge.com>
	<4A2014A3.2030500@fsgiudice.com>
Message-ID: <18d502870905291033g8cb228fwd093bef428bbde80@mail.gmail.com>

Thank you Francesco, take your time.

Brgds,
Viktor

On Fri, May 29, 2009 at 7:00 PM, Francesco Saverio Giudice
<info@fsgiudice.com> wrote:
> Hi Viktor,
>
> Il 27/05/2009 2.07, vszakats@users.sourceforge.net ha scritto:
>>
>> Revision: 11144
>>
>> ?http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11144&view=rev
>> Author: ? vszakats
>> Date: ? ? 2009-05-27 00:07:09 +0000 (Wed, 27 May 2009)
>>
>> Log Message:
>> -----------
>> ?* source/rdd/usrrdd/rdds/arrayrdd.prg
>> ? ?; Added some patches recently committed to xhb:
>> ? ?! few fixes provided by Quique
>> ? ?+ Added AR_LOCK() function, but commented.
>> ? ?; NOTE: Francesco, would you mind reviewing these changes?
>
> sure, ASAP.
> Sorry for delay in reply but these days are very busy for me.
>
> Best regards,
> Francesco
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From vailtom at gmail.com  Fri May 29 13:45:25 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Fri May 29 13:45:33 2009
Subject: [Harbour] A single question about hbmk2 X uhttpd
In-Reply-To: <4A201593.3080307@fsgiudice.com>
References: <531d7a750905281836l3be6d8c5ld8b80734cc2b5e0d@mail.gmail.com>
	<4A201593.3080307@fsgiudice.com>
Message-ID: <531d7a750905291045r5de5bc0bw1c2e5bfdf9a29ade@mail.gmail.com>

> PS: remember to update crew list in harbour site with my name, please.

I ask one thousand apologies, I passed unnoticed this detail. It's
done now... please just confirm the text of your comments.
Sorry for the delay .

[ Seizing the current message Francesco, a detail in would be
important about uhttpd.prg: it is necessary to exchange "hb_HDel()" by
"hb_HDelAt()" inside of uhttpd_DelHeader() function because the
current implementation raises RT when called. ]

Best regards,
Vailton Renato
From info at fsgiudice.com  Fri May 29 14:11:03 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri May 29 14:11:40 2009
Subject: [Harbour] A single question about hbmk2 X uhttpd
In-Reply-To: <18d502870905291008p7c70393ek1c4032d6fb73aec9@mail.gmail.com>
References: <531d7a750905281836l3be6d8c5ld8b80734cc2b5e0d@mail.gmail.com>	<4A201593.3080307@fsgiudice.com>
	<18d502870905291008p7c70393ek1c4032d6fb73aec9@mail.gmail.com>
Message-ID: <4A202537.1090906@fsgiudice.com>

Hi Viktor,
just seen your SVN update, thank you.

Best regards,
Francesco

Il 29/05/2009 19.08, Viktor Szak?ts ha scritto:
> Francesco, it was an hbmk2 problem, it's okay now, don't spend time on this.
> 
> Brgds,
> Viktor
> 

From info at fsgiudice.com  Fri May 29 14:18:21 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri May 29 14:18:28 2009
Subject: [Harbour] A single question about hbmk2 X uhttpd
In-Reply-To: <531d7a750905291045r5de5bc0bw1c2e5bfdf9a29ade@mail.gmail.com>
References: <531d7a750905281836l3be6d8c5ld8b80734cc2b5e0d@mail.gmail.com>	<4A201593.3080307@fsgiudice.com>
	<531d7a750905291045r5de5bc0bw1c2e5bfdf9a29ade@mail.gmail.com>
Message-ID: <4A2026ED.1010603@fsgiudice.com>

Hi Vailton,

Il 29/05/2009 19.45, Vailton Renato ha scritto:
>> PS: remember to update crew list in harbour site with my name, please.
> 
> I ask one thousand apologies, I passed unnoticed this detail. It's
> done now... please just confirm the text of your comments.
> Sorry for the delay .
> 

No problem, I think that the comment is right. Thank you.
Remember of my proposal to update crew list as from hbusage.c file (with 
all developers names).

> [ Seizing the current message Francesco, a detail in would be
> important about uhttpd.prg: it is necessary to exchange "hb_HDel()" by
> "hb_HDelAt()" inside of uhttpd_DelHeader() function because the
> current implementation raises RT when called. ]
> 

I will do.
Best regards,
Francesco

From dbtopas at dbtopas.lt  Fri May 29 15:20:40 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri May 29 15:19:18 2009
Subject: [Harbour] dev -> rc1
In-Reply-To: <18d502870905291031w1982234dw1fafc5475827edf9@mail.gmail.com>
References: <18d502870905291031w1982234dw1fafc5475827edf9@mail.gmail.com>
Message-ID: <4A203588.6050700@dbtopas.lt>

Viktor Szak?ts wrote:
> Hi All,
> 
> Is there anything against going rc1?
> 
> I also like to propose to change our version number,
> as we've definitely done more that 0.1 is worth, also
> xhb is now at 1.2, while feature-wise we're ahead.
> 
> Any opinions on these?
> 
> 1.) 1.1.0rc1 (next logical)
> 2.) 1.2.0rc1 (current xhb major rev)
> 3.) 1.4.0rc1 (my vote)

4) 1.2008.0 (2008 is Windows server major rev)
Of cause, it's joke, but I do not understand why do we pay attention to 
xharbour.

Re: 3.)
I do not understand... Why 1.4.0, not 1.3.0, not 1.5.0, and not 1.734549.0?

My understanding of x.y.z is:
z - for fix releases if x.y
y - for general next version
x - for version that have serious backward compatibility issues, and 
many source should be reviewed. Ex., drop support for untyped variables 
- well, the crazy example, but I do not find a good example in my mind.

I see 1.1.0 the only right solution.

We can also adapt scheme: 1.1, 1.3, 1.5 - stable releases, 1.2, 1.4, 1.6 
- unstable (or vice versa), but I do not see a reason for it, because we 
do not do intermediate unstable releases. Usually users use stable 
release, or SVN.


Regards,
Mindaugas

From harbour.01 at syenar.hu  Fri May 29 15:44:02 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 29 15:44:09 2009
Subject: [Harbour] dev -> rc1
In-Reply-To: <4A203588.6050700@dbtopas.lt>
References: <18d502870905291031w1982234dw1fafc5475827edf9@mail.gmail.com>
	<4A203588.6050700@dbtopas.lt>
Message-ID: <18d502870905291244x653d318dw9e170ea5157fe813@mail.gmail.com>

>> I also like to propose to change our version number,
>> as we've definitely done more that 0.1 is worth, also
>> xhb is now at 1.2, while feature-wise we're ahead.
>>
>> Any opinions on these?
>>
>> 1.) 1.1.0rc1 (next logical)
>> 2.) 1.2.0rc1 (current xhb major rev)
>> 3.) 1.4.0rc1 (my vote)
>
> 4) 1.2008.0 (2008 is Windows server major rev)
> Of cause, it's joke, but I do not understand why do we pay attention to
> xharbour.
>
> Re: 3.)
> I do not understand... Why 1.4.0, not 1.3.0, not 1.5.0, and not 1.734549.0?
>
> My understanding of x.y.z is:
> z - for fix releases if x.y
> y - for general next version
> x - for version that have serious backward compatibility issues, and many
> source should be reviewed. Ex., drop support for untyped variables - well,
> the crazy example, but I do not find a good example in my mind.
>
> I see 1.1.0 the only right solution.
>
> We can also adapt scheme: 1.1, 1.3, 1.5 - stable releases, 1.2, 1.4, 1.6 -
> unstable (or vice versa), but I do not see a reason for it, because we do
> not do intermediate unstable releases. Usually users use stable release, or
> SVN.

Well, the main reason is that users cannot really grasp the difference
between Harbour and xhb. Many of them think they are the same thing.
Now, if we don't adapt / react to that, and always keep low profile, the
notion will be that we're not doing anything, as our version number
suggest that we're just an older version of the same thing. Which isn't
further from the truth. Stupid as it is, it still seem to hold true.

By increasing by more than one, we're not breaking the major/minor
rules or the meaning of these numbers.

BTW, just a little statistics: 1.0.1 was r9429, currently we're at r11179,
1750 commits after (18% increase), ChangeLog size was 3.2MB, now
it is 4.5MB, 1.3MB or 40% increase. This is huge, not a minor release.
If you check the whatsnew doc, there are tons of stuff in it, even now,
not even half finished.

Odd-even notation: I've been also thinking about it, maybe we can use
it to replace 'dev' postfix. Since our 'dev' is quite stable and lasts for
quite long, maybe it merits it's own version number for easier reference.

'dev' is forgotten usually, so there is no easy way to find out someone
is speaking of 'dev' or final after we do the release, unless someone
specifies it clearly. Another point IMO for a new version number, 1.1.0
was being used for 8-9 months now.

Brgds,
Viktor
From dbtopas at dbtopas.lt  Fri May 29 16:25:46 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri May 29 16:24:23 2009
Subject: [Harbour] dev -> rc1
In-Reply-To: <18d502870905291244x653d318dw9e170ea5157fe813@mail.gmail.com>
References: <18d502870905291031w1982234dw1fafc5475827edf9@mail.gmail.com>	<4A203588.6050700@dbtopas.lt>
	<18d502870905291244x653d318dw9e170ea5157fe813@mail.gmail.com>
Message-ID: <4A2044CA.2070204@dbtopas.lt>

Hi,


> Well, the main reason is that users cannot really grasp the difference
> between Harbour and xhb. Many of them think they are the same thing.
> Now, if we don't adapt / react to that, and always keep low profile, the
> notion will be that we're not doing anything, as our version number
> suggest that we're just an older version of the same thing. Which isn't
> further from the truth. Stupid as it is, it still seem to hold true.

I think we were talking about version numbering before 1.0.0 RC. My 
opinion is not changed from this time. Larger version number does no 
associates for me to a better product, but conservative version umbering 
do associates.

Talking about xhb/Harbour.... You can do next version 1.6 or 1.20. 
You'll get next xHarbour to be 1.7 or 1.50. It's just a question: who 
knows a larger number?... I do not think it is worth to play these games.


> BTW, just a little statistics: 1.0.1 was r9429, currently we're at r11179,
> 1750 commits after (18% increase), ChangeLog size was 3.2MB, now
> it is 4.5MB, 1.3MB or 40% increase. This is huge, not a minor release.
> If you check the whatsnew doc, there are tons of stuff in it, even now,
> not even half finished.

I understand your idea. But I think it's better to follow some accepted 
numbering scheme. It can be any:
1.0906  // for June 2009
1.11179 // for revision number
1.45    // ChangeLog size in 100kB
1.0 -> 1.1 -> 1.2 -> etc....

I just thought we use the last one.


> Odd-even notation: I've been also thinking about it, maybe we can use
> it to replace 'dev' postfix. Since our 'dev' is quite stable and lasts for
> quite long, maybe it merits it's own version number for easier reference.

I agree with this idea of version numbering selection. I this case our 
next release should be 1.2. By the way, what (odd or even) version 
numbers other products use for stable releases? It would be better to 
follow a general rule if it exists.


Regards,
Mindaugas
From harbour.01 at syenar.hu  Fri May 29 17:19:23 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri May 29 17:19:29 2009
Subject: [Harbour] dev -> rc1
In-Reply-To: <4A2044CA.2070204@dbtopas.lt>
References: <18d502870905291031w1982234dw1fafc5475827edf9@mail.gmail.com>
	<4A203588.6050700@dbtopas.lt>
	<18d502870905291244x653d318dw9e170ea5157fe813@mail.gmail.com>
	<4A2044CA.2070204@dbtopas.lt>
Message-ID: <18d502870905291419g7cd2db18i9a8f7873d6fc7c1e@mail.gmail.com>

>> Well, the main reason is that users cannot really grasp the difference
>> between Harbour and xhb. Many of them think they are the same thing.
>> Now, if we don't adapt / react to that, and always keep low profile, the
>> notion will be that we're not doing anything, as our version number
>> suggest that we're just an older version of the same thing. Which isn't
>> further from the truth. Stupid as it is, it still seem to hold true.
>
> I think we were talking about version numbering before 1.0.0 RC. My opinion
> is not changed from this time. Larger version number does no associates for
> me to a better product, but conservative version umbering do associates.

I agree with you, but generally users (even developers, sometimes even me)
aren't such "wise" in this regard :(

IMO we should avoid being driven by insane version increases, but we
certainly have more freedom in forming it than adding +1.

> Talking about xhb/Harbour.... You can do next version 1.6 or 1.20. You'll
> get next xHarbour to be 1.7 or 1.50. It's just a question: who knows a
> larger number?... I do not think it is worth to play these games.

Valid question. I don't know, and it may well happen, so most probably
we should somehow try to emphasis the differences / advantages by some
other means.

>> BTW, just a little statistics: 1.0.1 was r9429, currently we're at r11179,
>> 1750 commits after (18% increase), ChangeLog size was 3.2MB, now
>> it is 4.5MB, 1.3MB or 40% increase. This is huge, not a minor release.
>> If you check the whatsnew doc, there are tons of stuff in it, even now,
>> not even half finished.
>
> I understand your idea. But I think it's better to follow some accepted
> numbering scheme. It can be any:
> 1.0906 ?// for June 2009
> 1.11179 // for revision number
> 1.45 ? ?// ChangeLog size in 100kB
> 1.0 -> 1.1 -> 1.2 -> etc....
>
> I just thought we use the last one.

Yes, all these are options. I don't personally like these "speaking numbers"
though. They are usually redundant and for me they tell even less than
the classic solution, where you can usually conclude from the version number
*increase* the expected amount of changes in a product. (until the
marketing department took over the development dept. that is)

So, if the developers (who know best) decided this is a +0.5 increase
that tells me they've pushed it much harder, than - say - for a +0.1 increase.
And an +1 increase tells that something even bigger was done. Neither
of these break the rule to signal compatibility levels, as *any* change in
minor (in "major.minor.release") revision means no guarantee for compatibility
anyway.

So maybe we should rather concentrate on that, without being carried away
by xhb version numbering, and IMO if we do this, we can still increase our
version number by > 0.1 (if we agree to do so) to reflect the amount of
changes, which was very high since prev release.

>> Odd-even notation: I've been also thinking about it, maybe we can use
>> it to replace 'dev' postfix. Since our 'dev' is quite stable and lasts for
>> quite long, maybe it merits it's own version number for easier reference.
>
> I agree with this idea of version numbering selection. I this case our next
> release should be 1.2. By the way, what (odd or even) version numbers other
> products use for stable releases? It would be better to follow a general
> rule if it exists.

Even numbers meant stable versions in Linux kernels, odd ones the
development versions. We're in sync with that currently.

Brgds,
Viktor
From vszakats at users.sourceforge.net  Fri May 29 19:12:50 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 29 19:12:54 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11180] trunk/harbour
Message-ID: <E1MABFq-0000f5-9g@d5vjzd1.ch3.sourceforge.com>

Revision: 11180
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11180&view=rev
Author:   vszakats
Date:     2009-05-29 23:12:49 +0000 (Fri, 29 May 2009)

Log Message:
-----------
2009-05-30 01:12 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * INSTALL
    * Minor update.

  * contrib/hbwin/axcore.c
    ! Fixed mingw64 warning.

  * examples/uhttpd/uhttpd.prg
    * Applied fix sent by Vailton to the list.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/contrib/hbwin/axcore.c
    trunk/harbour/examples/uhttpd/uhttpd.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From mbelgrano at deltain.it  Fri May 29 19:18:09 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri May 29 19:18:36 2009
Subject: [Harbour] dev -> rc1
In-Reply-To: <18d502870905291419g7cd2db18i9a8f7873d6fc7c1e@mail.gmail.com>
References: <18d502870905291031w1982234dw1fafc5475827edf9@mail.gmail.com> 
	<4A203588.6050700@dbtopas.lt>
	<18d502870905291244x653d318dw9e170ea5157fe813@mail.gmail.com> 
	<4A2044CA.2070204@dbtopas.lt>
	<18d502870905291419g7cd2db18i9a8f7873d6fc7c1e@mail.gmail.com>
Message-ID: <609353e70905291618p34109ee2rde566966d2fa62d5@mail.gmail.com>

For me sound good Harbour 1.5 because it is a release intermediate from 1.0
to 2.0I have not evaluated the effect of release number in xharbour but we
have a very special content
MultiThrea,Multiwindows,Hbmk2,hbqt,rddsql and the grooving of library like
gtwvg
I think that a lot of user migrating from xharbour when harbour give gtwvw
compatibility from gtwvg ...seem that about 8% of [x]harbour user use gtwvw
(source http://cch4clipper.blogspot.com/)
Content of harbour is more important that "versioning numbering" but

for having 2.0 numeration we need something like netgt or  netrdd or gtweb
ie,firefox


2009/5/29 Viktor Szak?ts <harbour.01@syenar.hu>

> >> Well, the main reason is that users cannot really grasp the difference
> >> between Harbour and xhb. Many of them think they are the same thing.
> >> Now, if we don't adapt / react to that, and always keep low profile, the
> >> notion will be that we're not doing anything, as our version number
> >> suggest that we're just an older version of the same thing. Which isn't
> >> further from the truth. Stupid as it is, it still seem to hold true.
> >
> > I think we were talking about version numbering before 1.0.0 RC. My
> opinion
> > is not changed from this time. Larger version number does no associates
> for
> > me to a better product, but conservative version umbering do associates.
>
> I agree with you, but generally users (even developers, sometimes even me)
> aren't such "wise" in this regard :(
>
> IMO we should avoid being driven by insane version increases, but we
> certainly have more freedom in forming it than adding +1.
>
> > Talking about xhb/Harbour.... You can do next version 1.6 or 1.20. You'll
> > get next xHarbour to be 1.7 or 1.50. It's just a question: who knows a
> > larger number?... I do not think it is worth to play these games.
>
> Valid question. I don't know, and it may well happen, so most probably
> we should somehow try to emphasis the differences / advantages by some
> other means.
>
> >> BTW, just a little statistics: 1.0.1 was r9429, currently we're at
> r11179,
> >> 1750 commits after (18% increase), ChangeLog size was 3.2MB, now
> >> it is 4.5MB, 1.3MB or 40% increase. This is huge, not a minor release.
> >> If you check the whatsnew doc, there are tons of stuff in it, even now,
> >> not even half finished.
> >
> > I understand your idea. But I think it's better to follow some accepted
> > numbering scheme. It can be any:
> > 1.0906  // for June 2009
> > 1.11179 // for revision number
> > 1.45    // ChangeLog size in 100kB
> > 1.0 -> 1.1 -> 1.2 -> etc....
> >
> > I just thought we use the last one.
>
> Yes, all these are options. I don't personally like these "speaking
> numbers"
> though. They are usually redundant and for me they tell even less than
> the classic solution, where you can usually conclude from the version
> number
> *increase* the expected amount of changes in a product. (until the
> marketing department took over the development dept. that is)
>
> So, if the developers (who know best) decided this is a +0.5 increase
> that tells me they've pushed it much harder, than - say - for a +0.1
> increase.
> And an +1 increase tells that something even bigger was done. Neither
> of these break the rule to signal compatibility levels, as *any* change in
> minor (in "major.minor.release") revision means no guarantee for
> compatibility
> anyway.
>
> So maybe we should rather concentrate on that, without being carried away
> by xhb version numbering, and IMO if we do this, we can still increase our
> version number by > 0.1 (if we agree to do so) to reflect the amount of
> changes, which was very high since prev release.
>
> >> Odd-even notation: I've been also thinking about it, maybe we can use
> >> it to replace 'dev' postfix. Since our 'dev' is quite stable and lasts
> for
> >> quite long, maybe it merits it's own version number for easier
> reference.
> >
> > I agree with this idea of version numbering selection. I this case our
> next
> > release should be 1.2. By the way, what (odd or even) version numbers
> other
> > products use for stable releases? It would be better to follow a general
> > rule if it exists.
>
> Even numbers meant stable versions in Linux kernels, odd ones the
> development versions. We're in sync with that currently.
>
> Brgds,
> Viktor
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090530/bc698fb2/attachment-0001.html
From vszakats at users.sourceforge.net  Fri May 29 19:36:25 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 29 19:36:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11181] trunk/harbour
Message-ID: <E1MABcf-0008VR-Bh@c3vjzd1.ch3.sourceforge.com>

Revision: 11181
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11181&view=rev
Author:   vszakats
Date:     2009-05-29 23:36:24 +0000 (Fri, 29 May 2009)

Log Message:
-----------
2009-05-30 01:33 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    + Added support for wildcarded project specs:
      - This command will build each .hbp file found in current dir:
        > hbmk2 *.hbp
      - This command will build all .prg files in current dir,
        each into a separate executable as separate projects:
        > hbmk2 -target=*.prg

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Fri May 29 19:41:53 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri May 29 19:41:58 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11182] trunk/harbour
Message-ID: <E1MABhx-000090-MI@c3vjzd1.ch3.sourceforge.com>

Revision: 11182
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11182&view=rev
Author:   vszakats
Date:     2009-05-29 23:41:52 +0000 (Fri, 29 May 2009)

Log Message:
-----------
2009-05-30 01:36 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.pt_BR.po
  * utils/hbmk2/hbmk2.hu_HU.po
    * Update.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.po
    trunk/harbour/utils/hbmk2/hbmk2.pt_BR.po


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From lorenzo.fiorini at gmail.com  Fri May 29 23:57:48 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri May 29 23:57:54 2009
Subject: [Harbour] dev -> rc1
In-Reply-To: <18d502870905291031w1982234dw1fafc5475827edf9@mail.gmail.com>
References: <18d502870905291031w1982234dw1fafc5475827edf9@mail.gmail.com>
Message-ID: <9257026e0905292057xe368bd9sa503b6c67e364c1f@mail.gmail.com>

On Fri, May 29, 2009 at 7:31 PM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:

> 3.) 1.4.0rc1 (my vote)

I vote for 1.5 or 2.0. Surely not 1.1.

Usually x.5 means "big update of x but not enough to be x+1" while x+1
means api or internals changes.

It's true that for us they are only numbers but for world outside 1
year between 1.0 and 1.1 means "low activity".

best regards,
Lorenzo
From bedipritpal at hotmail.com  Sat May 30 01:47:08 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat May 30 01:47:13 2009
Subject: [Harbour] dev -> rc1
In-Reply-To: <9257026e0905292057xe368bd9sa503b6c67e364c1f@mail.gmail.com>
References: <18d502870905291031w1982234dw1fafc5475827edf9@mail.gmail.com>
	<9257026e0905292057xe368bd9sa503b6c67e364c1f@mail.gmail.com>
Message-ID: <23790595.post@talk.nabble.com>




Lorenzo Fiorini-2 wrote:
> 
> I vote for 1.5 or 2.0. Surely not 1.1.
> 
> Usually x.5 means "big update of x but not enough to be x+1" while x+1
> means api or internals changes.
> 
> It's true that for us they are only numbers but for world outside 1
> year between 1.0 and 1.1 means "low activity".
> 

+10

Harbour deserves to be announced as a big leap forward.
True MT and Multi-Windows itself speaks volumes. In addition
we have all the powerful make system in place.

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/dev--%3E-rc1-tp23784103p23790595.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From lorenzo.fiorini at gmail.com  Sat May 30 01:47:40 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat May 30 01:47:45 2009
Subject: [Harbour] XML/JSON support
Message-ID: <9257026e0905292247y7936ca4p170587be1de72f58@mail.gmail.com>

Has anyone already written a JSON parser/encoder for Harbour?
( if you don't know what JSON is look at json.org )

Is there any C developer interested to add C code for dbf <-> xml
and/or dbf <-> json?

The idea is to have C code that reads one or more records with usual
fields,rest,next,for,while clauses and that returns an XML string that
can be node or attributes based or a JSON structure. Also it should
get an XML or a JSON structure and update a record.

C would be great since this kind of conversions are the base of an
AJAX app and a lot of time if spent in loops like:

cXml += "<table>"
for allrecs selected
cXml += "<row><recno>" + XTOC( recno() ) + "</recno>
for allfields selected
   cXml += "<" +fieldname(nField) + ">" + XTOC( fieldget( nfield ) ) +
"</" + fieldname(nField) + ">"
next
cXml += "</row>"
next
cXml += "</table>"

and then

oXml := TXMLDoc( cXml )

for every node/attrib
fieldput(fieldpos(<node/attrib name>),CTOX(node/attrib value))
next

note that XTOC and CTOX requires many calls to things like:

switch valtype(field)
    case "D"
      cString := DTOS( field )
...
endswitch

it would be great to have sth like:

COPY XML|JSON to VAR|FILE cString [FIELDS <field1, field2>] [FOR/WHILE <cond>]
and
REPLACE|UPDATE FIELDS <nfield1, nfield2> WITH XML|JSON cString

that manages the conversions for numbers, dates and logicals at C level.

Any comment?

best regards,
Lorenzo
From vszakats at users.sourceforge.net  Sat May 30 02:29:21 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat May 30 02:29:27 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11183] trunk/harbour
Message-ID: <E1MAI4H-0000e2-K1@74yxhf1.ch3.sourceforge.com>

Revision: 11183
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11183&view=rev
Author:   vszakats
Date:     2009-05-30 06:29:20 +0000 (Sat, 30 May 2009)

Log Message:
-----------
2009-05-30 08:10 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmk2/hbmk2.prg
    ! Fix to path normalizer. Last fix wasn't without side-effects
      for relative dirs.
    ! Fixed potential RTE in yesterday's *.hbp handling.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Sat May 30 02:37:59 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sat May 30 02:38:07 2009
Subject: [Harbour] Release packages: 1.1.0dev [20090530]
Message-ID: <18d502870905292337x6d41906dn4733cd87afab3992@mail.gmail.com>

Hi All,

I've updated the unified release to the latest Harbour version:

http://www.syenar.hu/harbour/harbour-11-win-20090530.7z (36MB)
http://www.syenar.hu/harbour/harbour-11-win-20090530.exe (38MB)
Installed size: 167MB (37MB - 250MB)

Changes since previous release:
- Harbour updated to r11179 (from r10819)
- Full and now standalone 'examples'
- 'tests' with subdirs included.
- No longer included pocc/pocc64/poccarm libs.
- QT updated to 4.5.1
- MinGW updated to 4.4.0

The default installation will install MinGW compiler + x86 static and
shared libs, MSVC and BCC x86 libs and examples.

Options: x86 shared tools, x64 shared tools, MinGW x64 and WinCE-ARM libs,
MSVC x64 libs, Open Watcom x86 libs, shared x64/WinCE-ARM libs.

Usage:
1) install/unpack to any directory (C:\harbour-11)
2) go to bin dir (optional if you specify path for hbmk2)
3) For x86 executable type: 'hbmk2 ../tests/hello.prg'
4) For x64 executable type: 'hbmk2 ../tests/hello.prg -comp=mingw64'
5) For WinCE/ARM executable type: 'hbmk2 ../tests/hello.prg -comp=mingwarm'
    (or just: 'hbmk2 ../tests/hello.prg -arch=wce')

Tools/libs used to create the package:
MinGW 4.4.0, MinGW64 4.4.0, MinGWCE 4.1.0, BCC 5.5.1, Open Watcom 1.8,
MSVC 2008 SP1, ace 9.10, allegro 4.2.2, blat 2.6.2, libcurl 7.19.3,
firebird 2.1.1,
freeimage 3.11.0, gd 2.0.34, mysql 5.0.67, openssl 0.9.8j, pgsql 8.3.3, qt 4.5.1

This release is very close to RC1.

Brgds,
Viktor
From lorenzo.fiorini at gmail.com  Sat May 30 04:19:33 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat May 30 04:19:38 2009
Subject: [Harbour] HB_FILEMIMETYPE issue
Message-ID: <9257026e0905300119ha1c6d7vc6f74de20b17f549@mail.gmail.com>

HB_FILEMIMETYPE tries first to use "magics" and then look at the extension.
Not binary files like css, javascript are always returned as
"text/plain" due to the lines below in utils.c.

I think they should be removed or the logic of detection should be fixed.

Any comment?

best regards,
Lorenzo



   /* Failure; let's see if it's a text/plain. */
   bFormFeed = FALSE;
   iCount = 0;
   while ( iCount < iLen )
   {
      /* form feed? */
      if ( cData[ iCount ] == '\x0C' )
      {
         bFormFeed = TRUE;
      }
      /* esc sequence? */
      else if ( cData[iCount] == '\x1B' )
      {
         bFormFeed = TRUE;
         iCount ++;
         if ( cData[iCount] <= 27 )
         {
            iCount ++;
         }
         if ( cData[iCount] <= 27 )
         {
            iCount ++;
         }
      }
      else if (
         (cData[iCount] < 27 && cData[iCount] != '\t' && cData[iCount]
!= '\n' && cData[iCount] == '\r') ||
            cData[iCount] == '\xFF')
      {
         /* not an ASCII file, we surrender */
         return NULL;
      }

      iCount++;
   }

   if ( bFormFeed )
   {
      /* we have escape sequences, seems a PRN/terminal file */
      return "application/remote-printing";
   }

   return "text/plain";
From kadziola at tlen.pl  Sat May 30 04:43:26 2009
From: kadziola at tlen.pl (=?Windows-1250?B?SmFyb3OzYXcgS7lkemlvs2E=?=)
Date: Sat May 30 04:43:35 2009
Subject: [Harbour] Release packages: 1.1.0dev [20090530]
In-Reply-To: <18d502870905292337x6d41906dn4733cd87afab3992@mail.gmail.com>
References: <18d502870905292337x6d41906dn4733cd87afab3992@mail.gmail.com>
Message-ID: <1049832250.20090530104326@tlen.pl>

Hi Viktor,

Saturday, May 30, 2009, 8:37:59 AM, you wrote:

VS> Hi All,

VS> I've updated the unified release to the latest Harbour version:

VS> http://www.syenar.hu/harbour/harbour-11-win-20090530.7z (36MB)
VS> http://www.syenar.hu/harbour/harbour-11-win-20090530.exe (38MB)
VS> Installed size: 167MB (37MB - 250MB)

VS> Changes since previous release:
VS> - Harbour updated to r11179 (from r10819)
VS> - Full and now standalone 'examples'
VS> - 'tests' with subdirs included.
VS> - No longer included pocc/pocc64/poccarm libs.
VS> - QT updated to 4.5.1
VS> - MinGW updated to 4.4.0

VS> The default installation will install MinGW compiler + x86 static and
VS> shared libs, MSVC and BCC x86 libs and examples.

VS> Options: x86 shared tools, x64 shared tools, MinGW x64 and WinCE-ARM libs,
VS> MSVC x64 libs, Open Watcom x86 libs, shared x64/WinCE-ARM libs.

Very good job ! All in one place - thanks so much Viktor.

-- 

Regards
Jaroslaw Kadziola


From mbelgrano at deltain.it  Sat May 30 06:55:13 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat May 30 06:55:40 2009
Subject: [Harbour] Release packages: 1.1.0dev [20090530]
In-Reply-To: <18d502870905292337x6d41906dn4733cd87afab3992@mail.gmail.com>
References: <18d502870905292337x6d41906dn4733cd87afab3992@mail.gmail.com>
Message-ID: <609353e70905300355y7037f9c9i423333a08ebc2b10@mail.gmail.com>

Very compilment
i not have found present tests of contrib like demowvg.prg

what is need for recompile mingw version?
after download cvs inside c:\harbour-11\ tree (like priptpal suggestion)

SET HB_INC_QT=/c/devl/Qt/2009.02/qt/include
SET HB_CONTRIB_ADDONS=gtqtc
SET HB_COMPILER=mingw
SET HB_ARCHITECTURE=win
SET PATH=C:\harbour-11\MinGW\bin;
SET HB_INSTALL_PREFIX=/c/harbour-11/
SET HB_BIN_INSTALL="/c/harbour-11/bin/win/%HB_COMPILER%"
SET HB_INC_INSTALL="/c/harbour-11/include"
SET HB_LIB_INSTALL="/c/harbour-11/lib/win/%HB_COMPILER%"
sh make_gnu.sh clean install > log-%HB_COMPILER%.txt 2>&1



2009/5/30 Viktor Szak?ts <harbour.01@syenar.hu>

> Hi All,
>
> I've updated the unified release to the latest Harbour version:
>
> http://www.syenar.hu/harbour/harbour-11-win-20090530.7z (36MB)
> http://www.syenar.hu/harbour/harbour-11-win-20090530.exe (38MB)
> Installed size: 167MB (37MB - 250MB)
>
> Changes since previous release:
> - Harbour updated to r11179 (from r10819)
> - Full and now standalone 'examples'
> - 'tests' with subdirs included.
> - No longer included pocc/pocc64/poccarm libs.
> - QT updated to 4.5.1
> - MinGW updated to 4.4.0
>
> The default installation will install MinGW compiler + x86 static and
> shared libs, MSVC and BCC x86 libs and examples.
>
> Options: x86 shared tools, x64 shared tools, MinGW x64 and WinCE-ARM libs,
> MSVC x64 libs, Open Watcom x86 libs, shared x64/WinCE-ARM libs.
>
> Usage:
> 1) install/unpack to any directory (C:\harbour-11)
> 2) go to bin dir (optional if you specify path for hbmk2)
> 3) For x86 executable type: 'hbmk2 ../tests/hello.prg'
> 4) For x64 executable type: 'hbmk2 ../tests/hello.prg -comp=mingw64'
> 5) For WinCE/ARM executable type: 'hbmk2 ../tests/hello.prg -comp=mingwarm'
>    (or just: 'hbmk2 ../tests/hello.prg -arch=wce')
>
> Tools/libs used to create the package:
> MinGW 4.4.0, MinGW64 4.4.0, MinGWCE 4.1.0, BCC 5.5.1, Open Watcom 1.8,
> MSVC 2008 SP1, ace 9.10, allegro 4.2.2, blat 2.6.2, libcurl 7.19.3,
> firebird 2.1.1,
> freeimage 3.11.0, gd 2.0.34, mysql 5.0.67, openssl 0.9.8j, pgsql 8.3.3, qt
> 4.5.1
>
> This release is very close to RC1.
>
> Brgds,
> Viktor
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090530/c2d2df18/attachment-0001.html
From vailtom at gmail.com  Sat May 30 09:10:36 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Sat May 30 09:10:44 2009
Subject: [Harbour] dev -> rc1
In-Reply-To: <9257026e0905292057xe368bd9sa503b6c67e364c1f@mail.gmail.com>
References: <18d502870905291031w1982234dw1fafc5475827edf9@mail.gmail.com>
	<9257026e0905292057xe368bd9sa503b6c67e364c1f@mail.gmail.com>
Message-ID: <531d7a750905300610s6a04a95by2da51d1c415f872b@mail.gmail.com>

> I vote for 1.5 or 2.0. Surely not 1.1.
+1

Also I guess. Even our project has better documentation of how to
download, compile and install, detailed examples of several new
features and without telling the great support of hbmk2 ... This is a
very good news for version 1.5/2.x

Best regards,
Vailton
From vailtom at gmail.com  Sat May 30 09:25:08 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Sat May 30 09:25:12 2009
Subject: [Harbour] Updated: www.harbour-project.org & some ideias...
In-Reply-To: <287014B9-2CC8-4460-A47E-57E045DCA134@syenar.hu>
References: <531d7a750905231302x1782084em52abbc49fb7e3e45@mail.gmail.com>
	<287014B9-2CC8-4460-A47E-57E045DCA134@syenar.hu>
Message-ID: <531d7a750905300625m481016f8v19fffb77eb62e1df@mail.gmail.com>

Updated index page on website do remove Sourceforge Awards icon
because nominations have now been closed.

Brgds,
Vailton
From bedipritpal at hotmail.com  Sat May 30 16:01:01 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat May 30 16:01:07 2009
Subject: [Harbour] QT - Error Building Demos
Message-ID: <23796844.post@talk.nabble.com>


Hello Viktor

Off late I did not looked into QT and in the meantime 
you introduced a lot of changes in make system.

Today:
1) make_gnu_bat clean
2) Make_gnu.bat install >log-%HB_COMPILER%.log 2>&1
3) Log files reported that build process went smooth.
4) I could see the new libs/bins in respective folder.
5) Stayed at harbour/contrib/gtqtc/tests
6) Issued hbmk2.exe demoqtc ( checked that it is loaded from right folder )
7) And got the following long list of errors



> ERRORS
> =====
> 
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0x2c): undefined reference to
> `QObje
> ct::customEvent(QEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0x30): undefined reference to
> `QObje
> ct::connectNotify(char const*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0x34): undefined reference to
> `QObje
> ct::disconnectNotify(char const*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0x38): undefined reference to
> `QWidg
> et::devType() const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0x3c): undefined reference to
> `QWidg
> et::setVisible(bool)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0x40): undefined reference to
> `QWidg
> et::sizeHint() const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0x44): undefined reference to
> `QWidg
> et::minimumSizeHint() const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0x48): undefined reference to
> `QWidg
> et::heightForWidth(int) const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0x4c): undefined reference to
> `QWidg
> et::getDC() const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0x50): undefined reference to
> `QWidg
> et::releaseDC(HDC__*) const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0x54): undefined reference to
> `QWidg
> et::paintEngine() const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0x7c): undefined reference to
> `QWidg
> et::enterEvent(QEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0x80): undefined reference to
> `QWidg
> et::leaveEvent(QEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0x90): undefined reference to
> `QWidg
> et::closeEvent(QCloseEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0x94): undefined reference to
> `QWidg
> et::contextMenuEvent(QContextMenuEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0x98): undefined reference to
> `QWidg
> et::tabletEvent(QTabletEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0x9c): undefined reference to
> `QWidg
> et::actionEvent(QActionEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0xa0): undefined reference to
> `QWidg
> et::dragEnterEvent(QDragEnterEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0xa4): undefined reference to
> `QWidg
> et::dragMoveEvent(QDragMoveEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0xa8): undefined reference to
> `QWidg
> et::dragLeaveEvent(QDragLeaveEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0xac): undefined reference to
> `QWidg
> et::dropEvent(QDropEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0xb0): undefined reference to
> `QWidg
> et::showEvent(QShowEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0xb4): undefined reference to
> `QWidg
> et::hideEvent(QHideEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0xb8): undefined reference to
> `QWidg
> et::winEvent(tagMSG*, long*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0xbc): undefined reference to
> `QWidg
> et::changeEvent(QEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0xc0): undefined reference to
> `QWidg
> et::metric(QPaintDevice::PaintDeviceMetric) const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0xc4): undefined reference to
> `QWidg
> et::inputMethodEvent(QInputMethodEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0xc8): undefined reference to
> `QWidg
> et::inputMethodQuery(Qt::InputMethodQuery) const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0xcc): undefined reference to
> `QWidg
> et::focusNextPrevChild(bool)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0xd0): undefined reference to
> `QWidg
> et::styleChange(QStyle&)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0xd4): undefined reference to
> `QWidg
> et::enabledChange(bool)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0xd8): undefined reference to
> `QWidg
> et::paletteChange(QPalette const&)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0xdc): undefined reference to
> `QWidg
> et::fontChange(QFont const&)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0xe0): undefined reference to
> `QWidg
> et::windowActivationChange(bool)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0xe4): undefined reference to
> `QWidg
> et::languageChange()'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0xf8): undefined reference to
> `non-v
> irtual thunk to QWidget::devType() const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0xfc): undefined reference to
> `non-v
> irtual thunk to QWidget::paintEngine() const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0x100): undefined reference to
> `non-
> virtual thunk to QWidget::getDC() const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0x104): undefined reference to
> `non-
> virtual thunk to QWidget::releaseDC(HDC__*) const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV11DrawingArea[vtable for DrawingArea]+0x108): undefined reference to
> `non-
> virtual thunk to QWidget::metric(QPaintDevice::PaintDeviceMetric) const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x1c): undefined reference to
> `QMainWi
> ndow::event(QEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x20): undefined reference to
> `QObject
> ::eventFilter(QObject*, QEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x24): undefined reference to
> `QObject
> ::timerEvent(QTimerEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x28): undefined reference to
> `QObject
> ::childEvent(QChildEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x2c): undefined reference to
> `QObject
> ::customEvent(QEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x30): undefined reference to
> `QObject
> ::connectNotify(char const*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x34): undefined reference to
> `QObject
> ::disconnectNotify(char const*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x38): undefined reference to
> `QWidget
> ::devType() const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x3c): undefined reference to
> `QWidget
> ::setVisible(bool)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x40): undefined reference to
> `QWidget
> ::sizeHint() const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x44): undefined reference to
> `QWidget
> ::minimumSizeHint() const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x48): undefined reference to
> `QWidget
> ::heightForWidth(int) const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x4c): undefined reference to
> `QWidget
> ::getDC() const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x50): undefined reference to
> `QWidget
> ::releaseDC(HDC__*) const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x54): undefined reference to
> `QWidget
> ::paintEngine() const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x58): undefined reference to
> `QWidget
> ::mousePressEvent(QMouseEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x5c): undefined reference to
> `QWidget
> ::mouseReleaseEvent(QMouseEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x60): undefined reference to
> `QWidget
> ::mouseDoubleClickEvent(QMouseEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x64): undefined reference to
> `QWidget
> ::mouseMoveEvent(QMouseEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x68): undefined reference to
> `QWidget
> ::wheelEvent(QWheelEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x6c): undefined reference to
> `QWidget
> ::keyPressEvent(QKeyEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x70): undefined reference to
> `QWidget
> ::keyReleaseEvent(QKeyEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x74): undefined reference to
> `QWidget
> ::focusInEvent(QFocusEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x78): undefined reference to
> `QWidget
> ::focusOutEvent(QFocusEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x7c): undefined reference to
> `QWidget
> ::enterEvent(QEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x80): undefined reference to
> `QWidget
> ::leaveEvent(QEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x84): undefined reference to
> `QWidget
> ::paintEvent(QPaintEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x88): undefined reference to
> `QWidget
> ::moveEvent(QMoveEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x8c): undefined reference to
> `QWidget
> ::resizeEvent(QResizeEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x94): undefined reference to
> `QMainWi
> ndow::contextMenuEvent(QContextMenuEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x98): undefined reference to
> `QWidget
> ::tabletEvent(QTabletEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x9c): undefined reference to
> `QWidget
> ::actionEvent(QActionEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0xa0): undefined reference to
> `QWidget
> ::dragEnterEvent(QDragEnterEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0xa4): undefined reference to
> `QWidget
> ::dragMoveEvent(QDragMoveEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0xa8): undefined reference to
> `QWidget
> ::dragLeaveEvent(QDragLeaveEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0xac): undefined reference to
> `QWidget
> ::dropEvent(QDropEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0xb0): undefined reference to
> `QWidget
> ::showEvent(QShowEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0xb4): undefined reference to
> `QWidget
> ::hideEvent(QHideEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0xb8): undefined reference to
> `QWidget
> ::winEvent(tagMSG*, long*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0xbc): undefined reference to
> `QWidget
> ::changeEvent(QEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0xc0): undefined reference to
> `QWidget
> ::metric(QPaintDevice::PaintDeviceMetric) const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0xc4): undefined reference to
> `QWidget
> ::inputMethodEvent(QInputMethodEvent*)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0xc8): undefined reference to
> `QWidget
> ::inputMethodQuery(Qt::InputMethodQuery) const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0xcc): undefined reference to
> `QWidget
> ::focusNextPrevChild(bool)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0xd0): undefined reference to
> `QWidget
> ::styleChange(QStyle&)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0xd4): undefined reference to
> `QWidget
> ::enabledChange(bool)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0xd8): undefined reference to
> `QWidget
> ::paletteChange(QPalette const&)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0xdc): undefined reference to
> `QWidget
> ::fontChange(QFont const&)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0xe0): undefined reference to
> `QWidget
> ::windowActivationChange(bool)'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0xe4): undefined reference to
> `QWidget
> ::languageChange()'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0xe8): undefined reference to
> `QMainWi
> ndow::createPopupMenu()'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0xfc): undefined reference to
> `non-vir
> tual thunk to QWidget::devType() const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x100): undefined reference to
> `non-vi
> rtual thunk to QWidget::paintEngine() const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x104): undefined reference to
> `non-vi
> rtual thunk to QWidget::getDC() const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x108): undefined reference to
> `non-vi
> rtual thunk to QWidget::releaseDC(HDC__*) const'
> C:/harbour_dev/harbour/mingw_qt/lib/libgtqtc.a(moc_gtqtc.o):moc_gtqtc.cpp:(.rdat
> a$_ZTV10MainWindow[vtable for MainWindow]+0x10c): undefined reference to
> `non-vi
> rtual thunk to QWidget::metric(QPaintDevice::PaintDeviceMetric) const'
> collect2: ld returned 1 exit status
> hbmk: Error: Running linker. 1
> 
> gcc.exe demoqtc.o hbmk_38ydz0.o    -mwindows -Wl,--start-group -lsupc++
> -lgtqtc
> -lhbcpage -lhblang -lhbcommon -lhbcplr -lhbdebug -lhbvmmt -lhbrdd
> -lhbusrrdd -lh
> buddall -lhbhsx -lhbsix -lrddntx -lrddnsx -lrddcdx -lrddfpt -lhbrtl -lhbpp
> -lhbm
> acro -lhbextern -lgtcgi -lgtpca -lgtstd -lgtwin -lgtwvt -lgtgui -lgtqtc
> -lhbpcre
>  -lhbzlib -lkernel32 -luser32 -lgdi32 -ladvapi32 -lws2_32 -lwinspool
> -lcomctl32
> -lcomdlg32 -lshell32 -lole32 -loleaut32 -luuid -lmpr -lwinmm -lmapi32
> -limm32 -l
> msimg32 -Wl,--end-group -odemoqtc.exe
> -LC:/harbour_dev/harbour/mingw_qt/lib
> 
> 

Exactly what I am doing wrong? 
I did not change my environment at all.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/QT---Error-Building-Demos-tp23796844p23796844.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From sudipb001 at gmail.com  Sun May 31 00:54:37 2009
From: sudipb001 at gmail.com (Sudip Bhattacharyya)
Date: Sun May 31 00:54:43 2009
Subject: [Harbour] Different Behavior of BCC and Mingw
Message-ID: <23799842.post@talk.nabble.com>


Hi All,

I use following code for Common Dialog boxes. When I call the functon
CSaveFile() or COpenFile() compiled with BCC, it gives error, but runs fine
when compiled with Mingw compiler.

#pragma BEGINDUMP

#include "windows.h"
#include "hbapi.h"

HB_FUNC( CSAVEFILE )
{
    OPENFILENAME ofn;

    char File[ MAX_PATH ] = "";
    char Filter[ MAX_PATH ] = "";

    if ( ISCHAR( 1 ) )
        lstrcpy( File, hb_parc( 1 ) );

    if ( ISCHAR( 2 ) )
       lstrcpy( Filter, hb_parc( 2 ) ) ;


    ofn.lStructSize       = 76;
    ofn.hwndOwner         = GetActiveWindow();
//    ofn.lpstrFilter       =
"Excel(*.xls,*.csv)\0*.xls;*.csv\0All(*.*)\0*.*\0";
   ofn.lpstrFilter       = Filter;
    ofn.lpstrCustomFilter = 0;
    ofn.nFilterIndex      = 1;
    ofn.lpstrFile         = File;
    ofn.nMaxFile          = MAX_PATH;
    ofn.lpstrFileTitle    = 0;
    //ofn.lpstrInitialDir   = 0;
    ofn.lpstrTitle        = "Save As";
    ofn.Flags             = OFN_HIDEREADONLY | OFN_NOCHANGEDIR |
OFN_SHAREAWARE |
OFN_NODEREFERENCELINKS | OFN_NOTESTFILECREATE | OFN_PATHMUSTEXIST |
OFN_OVERWRITEPROMPT ;
    ofn.lpstrDefExt       = 0;

    if ( GetSaveFileName( &ofn ) )
        hb_retclen( File, lstrlen( File ) );
    else
        hb_retc( "" );

}



HB_FUNC( COPENFILE )
{
    OPENFILENAME ofn;

    char File[ MAX_PATH ] = "";
    char Filter[ MAX_PATH ] = "";

    if ( ISCHAR( 1 ) )
        lstrcpy( File, hb_parc( 1 ) );

    if ( ISCHAR( 2 ) )
       lstrcpy( Filter, hb_parc( 2 ) ) ;


    ofn.lStructSize       = 76;
    ofn.hwndOwner         = GetActiveWindow();
//    ofn.lpstrFilter       =
"Excel(*.xls,*.csv)\0*.xls;*.csv\0All(*.*)\0*.*\0";
   ofn.lpstrFilter       = Filter;
    ofn.lpstrCustomFilter = 0;
    ofn.nFilterIndex      = 1;
    ofn.lpstrFile         = File;
    ofn.nMaxFile          = MAX_PATH;
    ofn.lpstrFileTitle    = 0;
    //ofn.lpstrInitialDir   = 0;
    ofn.lpstrTitle        = "Open";
    ofn.Flags             = OFN_HIDEREADONLY | OFN_NOCHANGEDIR |
OFN_SHAREAWARE |
OFN_NODEREFERENCELINKS | OFN_NOTESTFILECREATE | OFN_PATHMUSTEXIST |
OFN_OVERWRITEPROMPT ;
    ofn.lpstrDefExt       = 0;

    if ( GetOpenFileName( &ofn ) )
        hb_retclen( File, lstrlen( File ) );
    else
        hb_retc( "" );

}

#pragma ENDDUMP


I shall be grateful for any explanation of this behavior. :-)

Regards.

Sudip
-- 
View this message in context: http://www.nabble.com/Different-Behavior-of-BCC-and-Mingw-tp23799842p23799842.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From niki at synel.co.il  Sun May 31 04:12:35 2009
From: niki at synel.co.il (Chen Kedem)
Date: Sun May 31 04:12:44 2009
Subject: [Harbour] SF Patches ID#2798733: Updated Croatian codepage
Message-ID: <1A07FEDC778C3E4AA417F089511F859C163ADAF755@Mail-yoq.SYNEL-COMPANY.LTD>

Vladimir Miholi? (Vladimir.Miholic at sk.t-com.hr) submitted updated Croatian codepage files
in the following SF page:
http://sourceforge.net/tracker/?func=detail&atid=300681&aid=2798733&group_id=681

Attached file (cphr.zip 6KB):
http://sourceforge.net/tracker/download.php?group_id=681&atid=300681&file_id=328939&aid=2798733

Can someone please review and update them on SVN.

Thanks,

  Chen.
From niki at synel.co.il  Sun May 31 05:29:22 2009
From: niki at synel.co.il (Chen Kedem)
Date: Sun May 31 05:29:30 2009
Subject: [Harbour] dev -> rc1
Message-ID: <1A07FEDC778C3E4AA417F089511F859C163ADAF758@Mail-yoq.SYNEL-COMPANY.LTD>

We need the version number to distinguish it from its previous release,
we do not need marketing hypes, or race to the higher number with any other product.

Since last release was 1.01 and this one is a huge leap, I would say that 1.1.0 is the right
way to go.

I don't know if users will know about the odd/even numbering (first time I heard it myself).


  Chen.
From jarabal at gmail.com  Sun May 31 07:57:19 2009
From: jarabal at gmail.com (Xavi)
Date: Sun May 31 08:00:10 2009
Subject: [Harbour] Different Behavior of BCC and Mingw
In-Reply-To: <23799842.post@talk.nabble.com>
References: <23799842.post@talk.nabble.com>
Message-ID: <4A22709F.4030702@gmail.com>

Sudip,

What ?@#... is this? :)
> ofn.lStructSize       = 76;

In BCC and in MinGW !!! .-

OPENFILENAME ofn;
ZeroMemory(&ofn, sizeof(OPENFILENAME));
ofn.lStructSize = sizeof(OPENFILENAME);

Sorry, it's a joke, remember that C don't initialize anything eg nil.

--
Xavi

Sudip Bhattacharyya escribi?:
> Hi All,
> 
> I use following code for Common Dialog boxes. When I call the functon
> CSaveFile() or COpenFile() compiled with BCC, it gives error, but runs fine
> when compiled with Mingw compiler.
> 
> #pragma BEGINDUMP
> 
> #include "windows.h"
> #include "hbapi.h"
> 
> HB_FUNC( CSAVEFILE )
> {
>     OPENFILENAME ofn;
> 
>     char File[ MAX_PATH ] = "";
>     char Filter[ MAX_PATH ] = "";
> 
>     if ( ISCHAR( 1 ) )
>         lstrcpy( File, hb_parc( 1 ) );
> 
>     if ( ISCHAR( 2 ) )
>        lstrcpy( Filter, hb_parc( 2 ) ) ;
> 
> 
>     ofn.lStructSize       = 76;
>     ofn.hwndOwner         = GetActiveWindow();
> //    ofn.lpstrFilter       =
> "Excel(*.xls,*.csv)\0*.xls;*.csv\0All(*.*)\0*.*\0";
>    ofn.lpstrFilter       = Filter;
>     ofn.lpstrCustomFilter = 0;
>     ofn.nFilterIndex      = 1;
>     ofn.lpstrFile         = File;
>     ofn.nMaxFile          = MAX_PATH;
>     ofn.lpstrFileTitle    = 0;
>     //ofn.lpstrInitialDir   = 0;
>     ofn.lpstrTitle        = "Save As";
>     ofn.Flags             = OFN_HIDEREADONLY | OFN_NOCHANGEDIR |
> OFN_SHAREAWARE |
> OFN_NODEREFERENCELINKS | OFN_NOTESTFILECREATE | OFN_PATHMUSTEXIST |
> OFN_OVERWRITEPROMPT ;
>     ofn.lpstrDefExt       = 0;
> 
>     if ( GetSaveFileName( &ofn ) )
>         hb_retclen( File, lstrlen( File ) );
>     else
>         hb_retc( "" );
> 
> }
> 
> 
> 
> HB_FUNC( COPENFILE )
> {
>     OPENFILENAME ofn;
> 
>     char File[ MAX_PATH ] = "";
>     char Filter[ MAX_PATH ] = "";
> 
>     if ( ISCHAR( 1 ) )
>         lstrcpy( File, hb_parc( 1 ) );
> 
>     if ( ISCHAR( 2 ) )
>        lstrcpy( Filter, hb_parc( 2 ) ) ;
> 
> 
>     ofn.lStructSize       = 76;
>     ofn.hwndOwner         = GetActiveWindow();
> //    ofn.lpstrFilter       =
> "Excel(*.xls,*.csv)\0*.xls;*.csv\0All(*.*)\0*.*\0";
>    ofn.lpstrFilter       = Filter;
>     ofn.lpstrCustomFilter = 0;
>     ofn.nFilterIndex      = 1;
>     ofn.lpstrFile         = File;
>     ofn.nMaxFile          = MAX_PATH;
>     ofn.lpstrFileTitle    = 0;
>     //ofn.lpstrInitialDir   = 0;
>     ofn.lpstrTitle        = "Open";
>     ofn.Flags             = OFN_HIDEREADONLY | OFN_NOCHANGEDIR |
> OFN_SHAREAWARE |
> OFN_NODEREFERENCELINKS | OFN_NOTESTFILECREATE | OFN_PATHMUSTEXIST |
> OFN_OVERWRITEPROMPT ;
>     ofn.lpstrDefExt       = 0;
> 
>     if ( GetOpenFileName( &ofn ) )
>         hb_retclen( File, lstrlen( File ) );
>     else
>         hb_retc( "" );
> 
> }
> 
> #pragma ENDDUMP
> 
> 
> I shall be grateful for any explanation of this behavior. :-)
> 
> Regards.
> 
> Sudip


From petr_ch at users.sourceforge.net  Sun May 31 10:25:54 2009
From: petr_ch at users.sourceforge.net (petr_ch@users.sourceforge.net)
Date: Sun May 31 10:26:00 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11184] trunk/harbour
Message-ID: <E1MAlz0-0003uP-SB@dn4whf1.ch3.sourceforge.com>

Revision: 11184
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11184&view=rev
Author:   petr_ch
Date:     2009-05-31 14:25:53 +0000 (Sun, 31 May 2009)

Log Message:
-----------
2009-05-31 17:30 UTC+0200 Petr Chornyj (myorg63 at mail.ru)
   * harbour/include/std.ch
    + added clause CODEPAGE for commands COPY, APPEND, SORT, TOTAL
   * harbour/source/rdd/dbdelim.prg
   * harbour/source/rdd/dbsdf.prg
    + added CODEPAGE support for __dbDelim, __dbSdf

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/include/std.ch
    trunk/harbour/source/rdd/dbdelim.prg
    trunk/harbour/source/rdd/dbsdf.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From petr_ch at users.sourceforge.net  Sun May 31 12:42:47 2009
From: petr_ch at users.sourceforge.net (petr_ch@users.sourceforge.net)
Date: Sun May 31 12:42:52 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11185] trunk/harbour
Message-ID: <E1MAo7T-0006k6-Dj@3kljzd1.ch3.sourceforge.com>

Revision: 11185
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11185&view=rev
Author:   petr_ch
Date:     2009-05-31 16:42:46 +0000 (Sun, 31 May 2009)

Log Message:
-----------
2009-05-31 19:40 UTC+0200 Petr Chornyj (myorg63 at mail.ru)
   * harbour/include/std.ch
    ! fixed typo of last commit

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/include/std.ch


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From sudipb001 at gmail.com  Sun May 31 13:41:23 2009
From: sudipb001 at gmail.com (Sudip Bhattacharyya)
Date: Sun May 31 13:41:29 2009
Subject: [Harbour] Different Behavior of BCC and Mingw
In-Reply-To: <4A22709F.4030702@gmail.com>
References: <23799842.post@talk.nabble.com> <4A22709F.4030702@gmail.com>
Message-ID: <23805272.post@talk.nabble.com>


Hello Xavi,

Thanks for the "joke". 

I am not a very experienced user. I don't know how to use the open or save
file common dialog box.

So, I wrote 2 C functions from the code I received from xHarvour forum. My
xHarbour+gtwvw program runs OK. Now, I am in a process to transfer
xHarbour+gtwvw codes into Harbour+gtwvg, as help and development for gtwvw
are becoming limited now.

> Sorry, it's a joke, remember that C don't initialize anything eg nil.

I used my functions with Harbour as follows:-

cZipFile := CSAVEFILE(alltrim(_accyrdir)+".zip", "Zip(*.zip)" )

This runs OK with xHarbour+gtwvw+BCC and Harbour+gtwvg+Mingw but shows
runtime errors with Harbour+gtwvg+BCC.

http://www.nabble.com/file/p23805272/WvgError.jpg 
As a student of Computer Science, I want to know the cause.

With best regards.

Sudip


-- 
View this message in context: http://www.nabble.com/Different-Behavior-of-BCC-and-Mingw-tp23799842p23805272.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090531/403aef90/attachment.html
From jarabal at gmail.com  Sun May 31 14:41:27 2009
From: jarabal at gmail.com (Xavi)
Date: Sun May 31 14:44:18 2009
Subject: [Harbour] Different Behavior of BCC and Mingw
In-Reply-To: <23805272.post@talk.nabble.com>
References: <23799842.post@talk.nabble.com> <4A22709F.4030702@gmail.com>
	<23805272.post@talk.nabble.com>
Message-ID: <4A22CF57.8090402@gmail.com>

Sudip, Change .-

> #pragma BEGINDUMP
>
> #include "windows.h"
> #include "hbapi.h"
>
> HB_FUNC( CSAVEFILE )
> {
>     OPENFILENAME ofn;
>
>     char File[ MAX_PATH ] = "";
>     char Filter[ MAX_PATH ] = "";
>
>     if ( ISCHAR( 1 ) )
>         lstrcpy( File, hb_parc( 1 ) );
>
>     if ( ISCHAR( 2 ) )
>        lstrcpy( Filter, hb_parc( 2 ) ) ;
>
>
>     ofn.lStructSize       = 76;

With .-

#pragma BEGINDUMP

#include "windows.h"
#include "hbapi.h"

HB_FUNC( CSAVEFILE )
{
     char File[ MAX_PATH ] = "";
     char Filter[ MAX_PATH ] = "";

     OPENFILENAME ofn;
     ZeroMemory(&ofn, sizeof(OPENFILENAME));
     ofn.lStructSize = sizeof(OPENFILENAME);

     if ( ISCHAR( 1 ) )
         lstrcpy( File, hb_parc( 1 ) );

     if ( ISCHAR( 2 ) )
        lstrcpy( Filter, hb_parc( 2 ) ) ;


//    ofn.lStructSize       = 76; Remark or delete line

And the same with COPENFILE, Change .-

> HB_FUNC( COPENFILE )
> {
>     OPENFILENAME ofn;
>
>     char File[ MAX_PATH ] = "";
>     char Filter[ MAX_PATH ] = "";
>
>     if ( ISCHAR( 1 ) )
>         lstrcpy( File, hb_parc( 1 ) );
>
>     if ( ISCHAR( 2 ) )
>        lstrcpy( Filter, hb_parc( 2 ) ) ;
>
>
>     ofn.lStructSize       = 76;

With .-

HB_FUNC( COPENFILE )
{
     char File[ MAX_PATH ] = "";
     char Filter[ MAX_PATH ] = "";

     OPENFILENAME ofn;
     ZeroMemory(&ofn, sizeof(OPENFILENAME));
     ofn.lStructSize = sizeof(OPENFILENAME);

     if ( ISCHAR( 1 ) )
         lstrcpy( File, hb_parc( 1 ) );

     if ( ISCHAR( 2 ) )
        lstrcpy( Filter, hb_parc( 2 ) ) ;


//    ofn.lStructSize       = 76; Remark or delete line

> This runs OK with xHarbour+gtwvw+BCC ...
Not comment.

--
Xavi

P.S. Please don't send emails in HTML is better in text plain.

Sudip Bhattacharyya escribi?:
> Hello Xavi, Thanks for the "joke". I am not a very experienced user. I 
> don't know how to use the open or save file common dialog box. So, I 
> wrote 2 C functions from the code I received from xHarvour forum. My 
> xHarbour+gtwvw program runs OK. Now, I am in a process to transfer 
> xHarbour+gtwvw codes into Harbour+gtwvg, as help and development for 
> gtwvw are becoming limited now. > Sorry, it's a joke, remember that C 
> don't initialize anything eg nil. I used my functions with Harbour as 
> follows:- cZipFile := CSAVEFILE(alltrim(_accyrdir)+".zip", "Zip(*.zip)" 
> ) This runs OK with xHarbour+gtwvw+BCC and Harbour+gtwvg+Mingw but shows 
> runtime errors with Harbour+gtwvg+BCC. As a student of Computer Science, 
> I want to know the cause. With best regards. Sudip
> ------------------------------------------------------------------------
> View this message in context: Re: Different Behavior of BCC and Mingw 
> <http://www.nabble.com/Different-Behavior-of-BCC-and-Mingw-tp23799842p23805272.html>
> Sent from the Harbour - Dev mailing list archive 
> <http://www.nabble.com/Harbour---Dev-f688.html> at Nabble.com.
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour



From itamarlins at bol.com.br  Sun May 31 16:16:11 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Sun May 31 16:17:16 2009
Subject: [Harbour] Tutor for hbmk2 and GTWVG
Message-ID: <gvuojk$9vj$1@ger.gmane.org>

Hi!
Many brazilian users are looking for examples and documentation of hbmk2 and 
gtwvg.

Regards,
Itamar M. Lins Jr. 



From bedipritpal at hotmail.com  Sun May 31 16:26:50 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun May 31 16:26:55 2009
Subject: [Harbour] Tutor for hbmk2 and GTWVG
In-Reply-To: <gvuojk$9vj$1@ger.gmane.org>
References: <gvuojk$9vj$1@ger.gmane.org>
Message-ID: <23806607.post@talk.nabble.com>


Hi


Itamar Lins wrote:
> 
> Many brazilian users are looking for examples and documentation of hbmk2
> and 
> gtwvg.
> 

It is simple.
To compile, just stay in harbour/contrib/gtwvg/tests, 
and issue, hbmk2 gtwvg

For examples, demowvg.prg is the only source of reference.
Yes, off course, I can reply the specific questions.

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/Tutor-for-hbmk2-and-GTWVG-tp23806552p23806607.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Sun May 31 16:34:51 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun May 31 16:34:55 2009
Subject: [Harbour] Different Behavior of BCC and Mingw
In-Reply-To: <23799842.post@talk.nabble.com>
References: <23799842.post@talk.nabble.com>
Message-ID: <23806673.post@talk.nabble.com>


Hello Sudip


Sudip Bhattacharyya wrote:
> 
> I use following code for Common Dialog boxes. When I call the functon
> CSaveFile() or COpenFile() compiled with BCC, it gives run-time system
> error, but runs fine when compiled with Mingw compiler.
> 

Why to reinvent the wheel.
If it is GTWVG then these two functions are
already contined in the library.
Wvt_GetSaveFileName(...)
Wvt_GetOpenFileName(...)
with a lot of additional functionality.

/*                       Borrowed from What32

Wvt_GetOpenFileName( hWnd, @cPath, cTitle, aFilter, nFlags, cInitDir,
cDefExt, nIndex )

hWnd:     Handle to parent window
cPath:    (optional) if OFN_ALLOWMULTISELECT the path is stored
cTitle:   Window Title
aFilter:  Array of Files Types i.e. { {"Data
Bases","*.dbf"},{"Clipper","*.prg"} }
nFlags:   OFN_* values default to OFN_EXPLORER
cInitDir: Initial directory
cDefExt:  Default Extension i.e. "DBF"
nIndex:   Index position of types

Returns:  If OFN_ALLOWMULTISELECT
              Array of files selected
          else
              FileName.
          endif
*/
FUNCTION WVT_GetOpenFileName( hWnd, cPath, cTitle, aFilter, nFlags, cIniDir,
cDefExt, nIndex )
   local aFiles, cRet, cFile, n, x, c := ""

   IF aFilter == nil
      aFilter := {}
   END
   IF ValType( aFilter ) == "A"
      FOR n := 1 TO LEN( aFilter )
          c += aFilter[n][1] + chr(0) + aFilter[n][2] + chr(0)
      NEXT
   ENDIF
   if WIN_AND( nFlags,OFN_ALLOWMULTISELECT ) > 0
      cFile := space( 32000 )
     ELSE
      cFile := padr( trim( cPath ), 255, chr( 0 ) )
   END

   cRet := WVT__GetOpenFileName( hWnd, @cFile, cTitle, c, nFlags, cIniDir,
cDefExt, @nIndex )

   if WIN_AND( nFlags,OFN_ALLOWMULTISELECT ) > 0
      n := AT( CHR(0)+ CHR(0), cFile )
      cFile  := LEFT( cFile,n )
      aFiles := {}
      IF n == 0 /* no double chr(0) user must have pressed cancel */
         RETURN( aFiles )
      END
      x := AT( CHR( 0 ),cFile ) /* fist null */
      cPath := LEFT( cFile,x )

      cFile := STRTRAN( cFile,cPath )
      IF !EMPTY( cFile ) /* user selected more than 1 file */
         c := ""
         FOR n := 1 TO LEN( cFile )
             IF SUBSTR( cFile,n,1 ) == CHR( 0 )
                AADD( aFiles,STRTRAN( cPath, CHR( 0 ) ) +"\"+ c )
                c:=""
                LOOP
             END
             c += SUBSTR( cFile,n,1 )
         NEXT
        ELSE
         /*
         cFile:=cPath
         x:=RAT("\",cFile)
         cPath:=LEFT(cFile,x-1)
         */
         aFiles := { STRTRAN( cPath, CHR( 0 ) ) }
      END
      Return( aFiles )
   else
      /* cRet := left( cRet, at( chr( 0 ), cRet ) -1 ) */

   end

   Return ( cRet )

/*----------------------------------------------------------------------*/
/*
Wvt_GetSaveFileName( hWnd, cFile, cTitle, aFilter, nFlags, cInitDir,
cDefExt, nIndex)

hWnd:     Handle to parent window
cFile:    (optional) Default FileName
cTitle:   Window Title
aFilter:  Array of Files Types i.e. { {"Data
Bases","*.dbf"},{"Clipper","*.prg"} }
nFlags:   OFN_* values default to OFN_EXPLORER
cInitDir: Initial directory
cDefExt:  Default Extension i.e. "DBF"
nIndex:   Index position of types

Returns:  FileName.
*/

FUNCTION WVT_GetSaveFileName( hWnd, cFile, cTitle, aFilter, nFlags, cIniDir,
cDefExt, nIndex )
   local n,c:=""

   IF aFilter == nil
      aFilter := {}
   END

   FOR n := 1 TO LEN( aFilter )
       c += aFilter[ n ][ 1 ]+chr( 0 )+aFilter[ n ][ 2 ]+chr( 0 )
   NEXT
   cFile := WVT__GetSaveFileName( hWnd, cFile, cTitle, c, nFlags, cIniDir,
cDefExt, @nIndex )

   Return ( cFile )

/*----------------------------------------------------------------------*/

If want to use with other lib then pull the C sources from wvgutils.c .

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Different-Behavior-of-BCC-and-Mingw-tp23799842p23806673.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From itamarlins at bol.com.br  Sun May 31 16:40:48 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Sun May 31 16:41:51 2009
Subject: [Harbour] Re: Tutor for hbmk2 and GTWVG
References: <gvuojk$9vj$1@ger.gmane.org> <23806607.post@talk.nabble.com>
Message-ID: <gvuq1o$dfk$1@ger.gmane.org>

Hi!
Thanks for response. But, will be easier to have these examples compiled or 
not, without the need to use SVN to download it
Some people do not know how to use SVN.
Via:
http://www.syenar.hu/harbour/harbour-11-win-20090530.7z (36MB)
http://www.syenar.hu/harbour/harbour-11 ... 090530.exe (38MB)

Did not find these examples or documents.

Regards,
Itamar M. Lins Jr.

"Pritpal Bedi" <bedipritpal@hotmail.com> 
escreveu na mensagem news:23806607.post@talk.nabble.com...
>
> Hi
>
>
> Itamar Lins wrote:
>>
>> Many brazilian users are looking for examples and documentation of hbmk2
>> and
>> gtwvg.
>>
>
> It is simple.
> To compile, just stay in harbour/contrib/gtwvg/tests,
> and issue, hbmk2 gtwvg
>
> For examples, demowvg.prg is the only source of reference.
> Yes, off course, I can reply the specific questions.
>
> Regards
> Pritpal Bedi
>
>
> -- 
> View this message in context: 
> http://www.nabble.com/Tutor-for-hbmk2-and-GTWVG-tp23806552p23806607.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
> 



From sudipb001 at gmail.com  Sun May 31 16:42:51 2009
From: sudipb001 at gmail.com (Sudip Bhattacharyya)
Date: Sun May 31 16:42:57 2009
Subject: [Harbour] Different Behavior of BCC and Mingw
In-Reply-To: <23806673.post@talk.nabble.com>
References: <23799842.post@talk.nabble.com> <23806673.post@talk.nabble.com>
Message-ID: <23806726.post@talk.nabble.com>


Hello Pritpal and Xavi,

I didn't want to re-invent the wheel :) Actually, I didn't know those
functions.

Thanks a lot for this help.

Again for curiosity, do you have any idea about the differences between BCC
and Mingw? This is purely for academic interest only :)

Regards.

Sudip

Pritpal Bedi wrote:
> 
> Hello Sudip
> 
> 
> Sudip Bhattacharyya wrote:
>> 
>> I use following code for Common Dialog boxes. When I call the functon
>> CSaveFile() or COpenFile() compiled with BCC, it gives run-time system
>> error, but runs fine when compiled with Mingw compiler.
>> 
> 
> Why to reinvent the wheel.
> If it is GTWVG then these two functions are
> already contined in the library.
> Wvt_GetSaveFileName(...)
> Wvt_GetOpenFileName(...)
> with a lot of additional functionality.
> 
> /*                       Borrowed from What32
> 
> Wvt_GetOpenFileName( hWnd, @cPath, cTitle, aFilter, nFlags, cInitDir,
> cDefExt, nIndex )
> 
> hWnd:     Handle to parent window
> cPath:    (optional) if OFN_ALLOWMULTISELECT the path is stored
> cTitle:   Window Title
> aFilter:  Array of Files Types i.e. { {"Data
> Bases","*.dbf"},{"Clipper","*.prg"} }
> nFlags:   OFN_* values default to OFN_EXPLORER
> cInitDir: Initial directory
> cDefExt:  Default Extension i.e. "DBF"
> nIndex:   Index position of types
> 
> Returns:  If OFN_ALLOWMULTISELECT
>               Array of files selected
>           else
>               FileName.
>           endif
> */
> FUNCTION WVT_GetOpenFileName( hWnd, cPath, cTitle, aFilter, nFlags,
> cIniDir, cDefExt, nIndex )
>    local aFiles, cRet, cFile, n, x, c := ""
> 
>    IF aFilter == nil
>       aFilter := {}
>    END
>    IF ValType( aFilter ) == "A"
>       FOR n := 1 TO LEN( aFilter )
>           c += aFilter[n][1] + chr(0) + aFilter[n][2] + chr(0)
>       NEXT
>    ENDIF
>    if WIN_AND( nFlags,OFN_ALLOWMULTISELECT ) > 0
>       cFile := space( 32000 )
>      ELSE
>       cFile := padr( trim( cPath ), 255, chr( 0 ) )
>    END
> 
>    cRet := WVT__GetOpenFileName( hWnd, @cFile, cTitle, c, nFlags, cIniDir,
> cDefExt, @nIndex )
> 
>    if WIN_AND( nFlags,OFN_ALLOWMULTISELECT ) > 0
>       n := AT( CHR(0)+ CHR(0), cFile )
>       cFile  := LEFT( cFile,n )
>       aFiles := {}
>       IF n == 0 /* no double chr(0) user must have pressed cancel */
>          RETURN( aFiles )
>       END
>       x := AT( CHR( 0 ),cFile ) /* fist null */
>       cPath := LEFT( cFile,x )
> 
>       cFile := STRTRAN( cFile,cPath )
>       IF !EMPTY( cFile ) /* user selected more than 1 file */
>          c := ""
>          FOR n := 1 TO LEN( cFile )
>              IF SUBSTR( cFile,n,1 ) == CHR( 0 )
>                 AADD( aFiles,STRTRAN( cPath, CHR( 0 ) ) +"\"+ c )
>                 c:=""
>                 LOOP
>              END
>              c += SUBSTR( cFile,n,1 )
>          NEXT
>         ELSE
>          /*
>          cFile:=cPath
>          x:=RAT("\",cFile)
>          cPath:=LEFT(cFile,x-1)
>          */
>          aFiles := { STRTRAN( cPath, CHR( 0 ) ) }
>       END
>       Return( aFiles )
>    else
>       /* cRet := left( cRet, at( chr( 0 ), cRet ) -1 ) */
> 
>    end
> 
>    Return ( cRet )
> 
> /*----------------------------------------------------------------------*/
> /*
> Wvt_GetSaveFileName( hWnd, cFile, cTitle, aFilter, nFlags, cInitDir,
> cDefExt, nIndex)
> 
> hWnd:     Handle to parent window
> cFile:    (optional) Default FileName
> cTitle:   Window Title
> aFilter:  Array of Files Types i.e. { {"Data
> Bases","*.dbf"},{"Clipper","*.prg"} }
> nFlags:   OFN_* values default to OFN_EXPLORER
> cInitDir: Initial directory
> cDefExt:  Default Extension i.e. "DBF"
> nIndex:   Index position of types
> 
> Returns:  FileName.
> */
> 
> FUNCTION WVT_GetSaveFileName( hWnd, cFile, cTitle, aFilter, nFlags,
> cIniDir, cDefExt, nIndex )
>    local n,c:=""
> 
>    IF aFilter == nil
>       aFilter := {}
>    END
> 
>    FOR n := 1 TO LEN( aFilter )
>        c += aFilter[ n ][ 1 ]+chr( 0 )+aFilter[ n ][ 2 ]+chr( 0 )
>    NEXT
>    cFile := WVT__GetSaveFileName( hWnd, cFile, cTitle, c, nFlags, cIniDir,
> cDefExt, @nIndex )
> 
>    Return ( cFile )
> 
> /*----------------------------------------------------------------------*/
> 
> If want to use with other lib then pull the C sources from wvgutils.c .
> 
> Regards
> Pritpal Bedi
> 

-- 
View this message in context: http://www.nabble.com/Different-Behavior-of-BCC-and-Mingw-tp23799842p23806726.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From sudipb001 at gmail.com  Sun May 31 16:44:38 2009
From: sudipb001 at gmail.com (Sudip Bhattacharyya)
Date: Sun May 31 16:44:43 2009
Subject: [Harbour] Different Behavior of BCC and Mingw
In-Reply-To: <23806673.post@talk.nabble.com>
References: <23799842.post@talk.nabble.com> <23806673.post@talk.nabble.com>
Message-ID: <23806746.post@talk.nabble.com>


Sorry Pritpal,

I just skipped your message.

Thanks a lot for your mail.

Regards.

Sudip


Pritpal Bedi wrote:
> 
> Hello Sudip
> 
> 
> Sudip Bhattacharyya wrote:
>> 
>> I use following code for Common Dialog boxes. When I call the functon
>> CSaveFile() or COpenFile() compiled with BCC, it gives run-time system
>> error, but runs fine when compiled with Mingw compiler.
>> 
> 
> Why to reinvent the wheel.
> If it is GTWVG then these two functions are
> already contined in the library.
> Wvt_GetSaveFileName(...)
> Wvt_GetOpenFileName(...)
> with a lot of additional functionality.
> 
> /*                       Borrowed from What32
> 
> Wvt_GetOpenFileName( hWnd, @cPath, cTitle, aFilter, nFlags, cInitDir,
> cDefExt, nIndex )
> 
> hWnd:     Handle to parent window
> cPath:    (optional) if OFN_ALLOWMULTISELECT the path is stored
> cTitle:   Window Title
> aFilter:  Array of Files Types i.e. { {"Data
> Bases","*.dbf"},{"Clipper","*.prg"} }
> nFlags:   OFN_* values default to OFN_EXPLORER
> cInitDir: Initial directory
> cDefExt:  Default Extension i.e. "DBF"
> nIndex:   Index position of types
> 
> Returns:  If OFN_ALLOWMULTISELECT
>               Array of files selected
>           else
>               FileName.
>           endif
> */
> FUNCTION WVT_GetOpenFileName( hWnd, cPath, cTitle, aFilter, nFlags,
> cIniDir, cDefExt, nIndex )
>    local aFiles, cRet, cFile, n, x, c := ""
> 
>    IF aFilter == nil
>       aFilter := {}
>    END
>    IF ValType( aFilter ) == "A"
>       FOR n := 1 TO LEN( aFilter )
>           c += aFilter[n][1] + chr(0) + aFilter[n][2] + chr(0)
>       NEXT
>    ENDIF
>    if WIN_AND( nFlags,OFN_ALLOWMULTISELECT ) > 0
>       cFile := space( 32000 )
>      ELSE
>       cFile := padr( trim( cPath ), 255, chr( 0 ) )
>    END
> 
>    cRet := WVT__GetOpenFileName( hWnd, @cFile, cTitle, c, nFlags, cIniDir,
> cDefExt, @nIndex )
> 
>    if WIN_AND( nFlags,OFN_ALLOWMULTISELECT ) > 0
>       n := AT( CHR(0)+ CHR(0), cFile )
>       cFile  := LEFT( cFile,n )
>       aFiles := {}
>       IF n == 0 /* no double chr(0) user must have pressed cancel */
>          RETURN( aFiles )
>       END
>       x := AT( CHR( 0 ),cFile ) /* fist null */
>       cPath := LEFT( cFile,x )
> 
>       cFile := STRTRAN( cFile,cPath )
>       IF !EMPTY( cFile ) /* user selected more than 1 file */
>          c := ""
>          FOR n := 1 TO LEN( cFile )
>              IF SUBSTR( cFile,n,1 ) == CHR( 0 )
>                 AADD( aFiles,STRTRAN( cPath, CHR( 0 ) ) +"\"+ c )
>                 c:=""
>                 LOOP
>              END
>              c += SUBSTR( cFile,n,1 )
>          NEXT
>         ELSE
>          /*
>          cFile:=cPath
>          x:=RAT("\",cFile)
>          cPath:=LEFT(cFile,x-1)
>          */
>          aFiles := { STRTRAN( cPath, CHR( 0 ) ) }
>       END
>       Return( aFiles )
>    else
>       /* cRet := left( cRet, at( chr( 0 ), cRet ) -1 ) */
> 
>    end
> 
>    Return ( cRet )
> 
> /*----------------------------------------------------------------------*/
> /*
> Wvt_GetSaveFileName( hWnd, cFile, cTitle, aFilter, nFlags, cInitDir,
> cDefExt, nIndex)
> 
> hWnd:     Handle to parent window
> cFile:    (optional) Default FileName
> cTitle:   Window Title
> aFilter:  Array of Files Types i.e. { {"Data
> Bases","*.dbf"},{"Clipper","*.prg"} }
> nFlags:   OFN_* values default to OFN_EXPLORER
> cInitDir: Initial directory
> cDefExt:  Default Extension i.e. "DBF"
> nIndex:   Index position of types
> 
> Returns:  FileName.
> */
> 
> FUNCTION WVT_GetSaveFileName( hWnd, cFile, cTitle, aFilter, nFlags,
> cIniDir, cDefExt, nIndex )
>    local n,c:=""
> 
>    IF aFilter == nil
>       aFilter := {}
>    END
> 
>    FOR n := 1 TO LEN( aFilter )
>        c += aFilter[ n ][ 1 ]+chr( 0 )+aFilter[ n ][ 2 ]+chr( 0 )
>    NEXT
>    cFile := WVT__GetSaveFileName( hWnd, cFile, cTitle, c, nFlags, cIniDir,
> cDefExt, @nIndex )
> 
>    Return ( cFile )
> 
> /*----------------------------------------------------------------------*/
> 
> If want to use with other lib then pull the C sources from wvgutils.c .
> 
> Regards
> Pritpal Bedi
> 

-- 
View this message in context: http://www.nabble.com/Different-Behavior-of-BCC-and-Mingw-tp23799842p23806746.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vouchcac at users.sourceforge.net  Sun May 31 16:45:53 2009
From: vouchcac at users.sourceforge.net (vouchcac@users.sourceforge.net)
Date: Sun May 31 16:45:59 2009
Subject: [Harbour] SF.net SVN: harbour-project:[11186] trunk/harbour
Message-ID: <E1MAruj-0004OM-La@74yxhf1.ch3.sourceforge.com>

Revision: 11186
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=11186&view=rev
Author:   vouchcac
Date:     2009-05-31 20:45:52 +0000 (Sun, 31 May 2009)

Log Message:
-----------
2009-05-31 13:41 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/gtwvg.c
    ! Some artifacts related with modal windows.
      Now it correctly calculates the width/height and initial row/col position.
      It now honors correctly parent GT's font size.

  * harbour/contrib/gtwvg/wvgdatar.prg
  * harbour/contrib/gtwvg/wvgscrlb.prg
  * harbour/contrib/gtwvg/wvgtabpg.prg
  * harbour/contrib/gtwvg/wvgwnd.prg
    ! Numerics to Pointer fixes.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtwvg/gtwvg.c
    trunk/harbour/contrib/gtwvg/wvgdatar.prg
    trunk/harbour/contrib/gtwvg/wvgscrlb.prg
    trunk/harbour/contrib/gtwvg/wvgtabpg.prg
    trunk/harbour/contrib/gtwvg/wvgwnd.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bedipritpal at hotmail.com  Sun May 31 16:52:31 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun May 31 16:52:36 2009
Subject: [Harbour] Tutor for hbmk2 and GTWVG
In-Reply-To: <gvuq1o$dfk$1@ger.gmane.org>
References: <gvuojk$9vj$1@ger.gmane.org> <23806607.post@talk.nabble.com>
	<gvuq1o$dfk$1@ger.gmane.org>
Message-ID: <23806804.post@talk.nabble.com>


Hmmm


Itamar Lins wrote:
> 
> Thanks for response. But, will be easier to have these examples compiled
> or 
> not, without the need to use SVN to download it
> Some people do not know how to use SVN.
> 

Please follow this link.
http://www.nabble.com/Harbour%27s-Ready-to-Use-Distro-II---HarbourDev_10824_2009-04-09.exe-to22981932.html#a22981932

This contains ready-to-use Harbour distro.
Note that this distro use xMate as its project manager but includes
demowvg.prg with ready to compile xmate project file. You can jump-start
straight.
Follow other posts in that thread to know more about it.

I am almost ready to upload next release of this distro, probably in a
couple of days.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Tutor-for-hbmk2-and-GTWVG-tp23806552p23806804.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Sun May 31 17:51:09 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun May 31 17:51:35 2009
Subject: [Harbour] Tutor for hbmk2 and GTWVG
In-Reply-To: <23806804.post@talk.nabble.com>
References: <gvuojk$9vj$1@ger.gmane.org> <23806607.post@talk.nabble.com> 
	<gvuq1o$dfk$1@ger.gmane.org> <23806804.post@talk.nabble.com>
Message-ID: <609353e70905311451m3ffb73e2wf28061899dfbbea@mail.gmail.com>

Can you made your distribution additive to  harbour distribution?so we have
common structure  , and common problem for asstance to final user
will be include in your distribution all contrib (like sqlrdd)

2009/5/31 Pritpal Bedi <bedipritpal@hotmail.com>

>
> Hmmm
>
>
> Itamar Lins wrote:
> >
> > Thanks for response. But, will be easier to have these examples compiled
> > or
> > not, without the need to use SVN to download it
> > Some people do not know how to use SVN.
> >
>
> Please follow this link.
>
> http://www.nabble.com/Harbour%27s-Ready-to-Use-Distro-II---HarbourDev_10824_2009-04-09.exe-to22981932.html#a22981932
>
> This contains ready-to-use Harbour distro.
> Note that this distro use xMate as its project manager but includes
> demowvg.prg with ready to compile xmate project file. You can jump-start
> straight.
> Follow other posts in that thread to know more about it.
>
> I am almost ready to upload next release of this distro, probably in a
> couple of days.
>
> Regards
> Pritpal Bedi
>
> --
> View this message in context:
> http://www.nabble.com/Tutor-for-hbmk2-and-GTWVG-tp23806552p23806804.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090531/281a90c8/attachment.html
From bedipritpal at hotmail.com  Sun May 31 18:33:55 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun May 31 18:34:01 2009
Subject: [Harbour] Tutor for hbmk2 and GTWVG
In-Reply-To: <609353e70905311451m3ffb73e2wf28061899dfbbea@mail.gmail.com>
References: <gvuojk$9vj$1@ger.gmane.org> <23806607.post@talk.nabble.com>
	<gvuq1o$dfk$1@ger.gmane.org> <23806804.post@talk.nabble.com>
	<609353e70905311451m3ffb73e2wf28061899dfbbea@mail.gmail.com>
Message-ID: <23807597.post@talk.nabble.com>


Hi


Massimo Belgrano-3 wrote:
> 
> Can you made your distribution additive to  harbour distribution?so we
> have
> common structure  , and common problem for asstance to final user
> will be include in your distribution all contrib (like sqlrdd)
> 

A wise suggestion. I will think over it.
So for now distribution is postponed until I synchronize with 
Viktor's distro structure.

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/Tutor-for-hbmk2-and-GTWVG-tp23806552p23807597.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From april_white at sympatico.ca  Sun May 31 20:02:00 2009
From: april_white at sympatico.ca (April White)
Date: Sun May 31 20:02:10 2009
Subject: [Harbour] WinXP SP2 MinGW32 v5.1.4 under MSYS 1.0.10
Message-ID: <BLU0-SMTP49006C54498D24DEE6A0DBEF4C0@phx.gbl>

I am trying to get back into Harbour after a long absence but I am 
having considerable difficulties.

My system is:

- WinXP SP2
- MinGW32 v5.1.4 (did I install the wrong version, the version info says 
"gcc version 3.4.5 (mingw-vista special r3)")
- MSYS 1.0.10
- The two versions of Harbour (see below) both report "Harbour 1.0.1 
Intl. (Rev. 9429)"

HB_ARCHITECTURE=w32
HB_COMPILER=mingw32
HB_GT_LIB=gtwin

I downloaded the 1.0.1 source from the Harbour page and finally got it 
to fully compile - I believe MSYS is the culprit - it kept causing make 
to throw errors that would not appear when retried.

BTW, I have tried to make Harbour from the command line but mingw-make 
would not work, and I could not discern which, if any, batch file to use.

When I ran make against my custom version of DBU I get errors

 From DOS:
C:\projects\Harbour\MyUtils>mingw32-make
cmd.exe /C FOR %d IN (MyLib dbu) DO mingw32-make -C %d first
"(MyLib dbu)" was unexpected at this time.
mingw32-make: *** [first] Error 1

 From MSYS:
make[1]: Entering directory `/Harbour/MyUtils/MyLib'
make[2]: Entering directory `/Harbour/MyUtils/MyLib/w32/mingw32'
../../../../svn/source/main/w32/mingw32/harbour.exe ../../aborted.prg -n 
-q0 -w3 -es2 -km -I../../../../svn/include -I../..
../../../../svn/include\hbsetup.ch(63) Warning W0001  Redefinition or 
duplicate definition of #define HB_C52_UNDOC
../../../../svn/include\hbsetup.ch(65) Warning W0001  Redefinition or 
duplicate definition of #define HB_COMPAT_C53
../../../../svn/include\hbsetup.ch(66) Warning W0001  Redefinition or 
duplicate definition of #define HB_COMPAT_XPP
../../../../svn/include\hbsetup.ch(68) Warning W0001  Redefinition or 
duplicate definition of #define HB_COMPAT_FLAGSHIP
../../../../svn/include\hbsetup.ch(83) Warning W0001  Redefinition or 
duplicate definition of #define HB_LEGACY_LEVEL
make[2]: Leaving directory `/Harbour/MyUtils/MyLib/w32/mingw32'
make[1]: Leaving directory `/Harbour/MyUtils/MyLib'

I then made a copy of my 1.0.1 folder, installed TortoiseSVN, did a full 
check-out, 'make clean all'

And got the same results.  So I decided to try hbmk2 and I got this 
error (under MSYS):
make[1]: Entering directory `/Harbour/svn/utils/hbmk2/w32/mingw32'
../../../../source/main/w32/mingw32/harbour.exe ../../hbmk2.prg -n -q0 
-w3 -es2 -km -I../../../../include
../../hbmk2.prg(46) Error E0024  Error in #pragma
../../hbmk2.prg(47) Error E0024  Error in #pragma
make[1]: Leaving directory `/Harbour/svn/utils/hbmk2/w32/mingw32'

As an aside, I could only find a command-line version of subversion for 
Windows from a site that I had to register for; is there any other?

So please help me understand what I have done wrong?

April

-- 
If at first you don't succeed, blame someone else and seek counseling!

