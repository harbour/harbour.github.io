From lorenzo.fiorini at gmail.com  Fri Jun  1 02:14:40 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jun  1 02:14:45 2007
Subject: [Harbour] ChangeLog 2007-06-01 00:15 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070531225239.GA9774@localhost.localdomain>
References: <20070531222854.GA9605@localhost.localdomain>
	<9257026e0705311540t2b038127h78cc159f46474588@mail.gmail.com>
	<20070531225239.GA9774@localhost.localdomain>
Message-ID: <9257026e0705312314u4325f336m201af9a37f71a74b@mail.gmail.com>

On 6/1/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> Yes, sure. Please commit but AFAIR TIP can work only when Harbour
> is compiled with HB_COMPAT_XHB so it should be enabled optionally,
> f.e. when RPM is created with:
>     --with xhb

What about  --with tip?

ll check it with "standard" setup and I'll report.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Fri Jun  1 02:27:34 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jun  1 02:27:42 2007
Subject: [Harbour] CHANGELOG: 2007-06-01 02:08 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <20070601003538.GA19171@localhost.localdomain>
References: <01c7a3e1$Blat.v2.6.1$2480a72e$1518a123f61a@127.0.0.1>
	<20070601003538.GA19171@localhost.localdomain>
Message-ID: <61E001C2-A3B9-4DF6-8B3C-01F43E9924A0@syenar.hu>

> Victor have you ever tried to use hb* scripts?
> bld.sh will not work in many cases and is a static file
> which does not respect some build time switches.
> hb* scripts are created dynamically in 'make install'
> and contain all build time settings so later you do not
> have to set any environment variables - just simply use.
> They should work on all systems with working bash. I used
> in Linux, *BSD, MacOSX, SunOS, Windows+MSYS, DOS+DJGPP.
> Many people trying Harbour in *nixes uses bld.sh because
> they do not know about hb* scripts and later reports
> problems. I really suggest to use hbmk instead and maybe
> even add some not about it in bld.sh file.

Thanks Przemek for the tip, hb* scripts did cross my mind while
I was struggling with bld.sh tonight.

bld.sh is not something written in stone, and it's perfectly okey for
me to even completely remove it to avoid those reports. (I've actually
got one today, that's why I started with this in the first place).

Moreover, we could even replace bld.bat and bld.cmd, since they
are also forgotten to be updated or kept in sync with the different
compilers. For the GNU make system at least. For BCC and VC we
could still have one batch file respectively. This would definitely  
simplify
things in a generic way.

Some experiences with hb* scripts and Linux builds (any of them
could well be because of my ignorance).
1) Under Ubuntu 7.x I got none of the hb* scripts built.
      Under OSX they got built fine.
2) I couldn't find any docs on what each hb* files does (and there
      are _eight_ of them: gharbour, harbour-link, hb-build, hb- 
mkslib, hbcc, hbcmp, hblnk, hbmk).
      I believe most ppl would need "hbmk".
3) Why do we need that many scripts? Can't we reduce them?
4) bin/harbour, lib/harbour and include/harbour are not automatically
      created by the make process, so by default "make_gnu.sh install"
      fails to work properly.
5) librtl, libstd are not copied to lib/harbour (on make_gnu.sh install)
      even if the directory exists and they are properly built. This  
is probably
      because several GTs fail to build (gtcrs, gtsln, gtxwc) on my  
systems.
6) Under OSX hbmk doesn't finish because of undefined symbols, this
      might be because make install failed, and this could well
      be because I cannot create those default output dirs, even if I'm
      sudo-ing. (All in all I cannot grasp the conecpt under Unixes that
      I cannot fiddle with a package without touching common areas
      of the directory tree, but that's another story)

Could we make the Linux builds a bit even more straightforward
for the "dummy" user?

> Below I'm attaching description for hb* scripts.

Many thanks, I've been missing these.

Can we include this in the doc dir? Or is it already somewhere, just  
I don't
know about it?

> And one additional note. If you want to create Harbour binaries
> in some *nix system then try to use make_tgz.sh - it will create
> self installing package with compressed Harbour binaries (you can
> extract .tar.gz archive using --extract parameter) Build it and
> check which files and were located it has (f.e.

It looks this would address at least some of my problems
above, nice.

Worked quite good too (hb* got built this time), but I got undefined
rerefences when trying hbmk. (HB_FUN_HB_GT_CRS, dlerror, dlopen,
dlclose)

> /etc/harbour/hb-charmap.def). I know that you were testing packages
> for MacOSX created by Antonio. Please check if they have all files
> included in these archive.

Hm, I'm not sure if I could do it at that stage but I'll try my best.

Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Fri Jun  1 02:47:09 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Jun  1 02:47:47 2007
Subject: [Harbour] ChangeLog 2007-06-01 00:15 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20070531222854.GA9605@localhost.localdomain>
Message-ID: <001801c7a418$ad7ba380$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: venerdi 1 giugno 2007 0.28
Oggetto: [Harbour] ChangeLog 2007-06-01 00:15 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> 2007-06-01 00:15 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/harbour.spec
>  * harbour/bin/pack_src.sh
>    + added hbpcre library
>
> Please make build test on different platforms and report any problems.
> I would like to set BETA3 tag soon.

It seems to build fine with BCC55.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From lorenzo.fiorini at gmail.com  Fri Jun  1 03:29:03 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jun  1 03:29:06 2007
Subject: [Harbour] mouse/gtxwc small issue
Message-ID: <9257026e0706010029q442024eax8942ca2368cd2483@mail.gmail.com>

Testing actual CVS I've noted that I need to click two times on the first ok

In fact tests/mousetst reports the first click as a doubleclick.

Any hint?

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Fri Jun  1 07:05:43 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jun  1 07:05:47 2007
Subject: [Harbour] ChangeLog 2007-06-01 13:00 UTC+0200 Lorenzo Fiorini
Message-ID: <9257026e0706010405i44e2c015pd69f680c48ed1c0b@mail.gmail.com>

2007-06-01 13:00 UTC+0200 Lorenzo Fiorini (lorenzo.fiorini/at/gmail.com)
  * harbour/make_gnu.sh
    * updated msgs
  * harbour/pach_src.sh
    * added contrib/gd
  * harbour/make_rpm.sh
  * harbour/harbour.spec
    * added support for --with gd, --with pgsql, --with pgsql4 and --without tip
  * contrib/tip/cgi.prg
    * added lDumpHtml to create a dump of the html useful for syntax check
	 * added support for "var" and "src" in both scripts and styles
  * contrib/pgsql/tpostgre.prg
  	 * added ::Read() method to use in forward only loop
	 * instead of while !::eof() ... ::skip()
    * several optimizations now in a typical loop it is 30% faster
	 * !!! now char fields are not sized to len !!!

best regards,
Lorenzo
From druzus at priv.onet.pl  Fri Jun  1 08:58:14 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun  1 08:58:50 2007
Subject: [Harbour] CHANGELOG: 2007-06-01 02:08 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <61E001C2-A3B9-4DF6-8B3C-01F43E9924A0@syenar.hu>
References: <01c7a3e1$Blat.v2.6.1$2480a72e$1518a123f61a@127.0.0.1>
	<20070601003538.GA19171@localhost.localdomain>
	<61E001C2-A3B9-4DF6-8B3C-01F43E9924A0@syenar.hu>
Message-ID: <20070601125814.GA24942@localhost.localdomain>

On Fri, 01 Jun 2007, Szak?ts Viktor wrote:

Many thanks for report.

> Some experiences with hb* scripts and Linux builds (any of them
> could well be because of my ignorance).
> 1) Under Ubuntu 7.x I got none of the hb* scripts built.

If you do not have them then it has to be caused by some reasons.
Probably eorrors or missing bash. Please redirect error message
from build process to file and send them here so I'll be able to
help, f.e.:
    ./make_tgz.sh 2> mk_tgz-err.log

>      Under OSX they got built fine.
> 2) I couldn't find any docs on what each hb* files does (and there
>      are _eight_ of them: gharbour, harbour-link, hb-build, hb- 
> mkslib, hbcc, hbcmp, hblnk, hbmk).
>      I believe most ppl would need "hbmk".

The documentation is created online inside harbour.spec - it's for
historical reasons when hb* scripts were created only for RPMs
packages. I'll move it to doc/ directory ASAP.

> 3) Why do we need that many scripts? Can't we reduce them?

Yes we can. In fact these is only one script with few links.
'gharbour' and 'harbour-link' exist only for compatibility with
very old RPM scripts create by Dave Pearson - I think now we
can safely remove them.
1. 'hbcmp' is a wrapper to harbour compiler and people need it,
   instead of setting many environment variables and then call
   'arbour'it's enough to call call hbcmp, f.e.:
         hbcmp -n -w2 -es2 -m myprog.prg
2. 'hblnk' is a wrapper to linker. Instead of calling gcc with many
   different switches you can simply make:
         hblnk -gtcrs -gtsln -gtxwc myprog.o -shared -nofmstat -lsomelib
   IMHO both are even more important then hbmk because they can be used
   in user make files just after installing Harbour without any additional
   configuration
3. 'hbmk' it's 'hbcmp' + 'hblnk'
4. 'hbcc' is a wrapper to C compiler can be used instead of calling gcc
   and accepts all gcc options. It also sets all necessary environment
   variables and paths so user can compile harbour C sources without
   and additional settings.
5. 'hb-build' is a real hb* script and all above are simple links to
   these file
6. 'hb-mkslib' is differ script. It creates dynamic libraries (.dll/.so/
   .dyn) from binary object files (.a) and static libraries (.a). It's
   used to create harbour.so but can also be used by users to create
   their own shared libraries.
7. 'gharbour' can be removed (see above it's 'hbcmp')
8. 'harbour-link' (see above it's 'hblnk')

> 4) bin/harbour, lib/harbour and include/harbour are not automatically
>      created by the make process, so by default "make_gnu.sh install"
>      fails to work properly.

I know but I though it was intentional so I've never changed it. If you
want I can add automatic creation for such directories.

> 5) librtl, libstd are not copied to lib/harbour (on make_gnu.sh install)
>      even if the directory exists and they are properly built. This  
> is probably because several GTs fail to build (gtcrs, gtsln, gtxwc) on my  
> systems.

libbstd? Please send me error messages from build process so I can confirm
it or fix sth if necessary.

> 6) Under OSX hbmk doesn't finish because of undefined symbols, this
>      might be because make install failed, and this could well
>      be because I cannot create those default output dirs, even if I'm
>      sudo-ing. (All in all I cannot grasp the conecpt under Unixes that
>      I cannot fiddle with a package without touching common areas
>      of the directory tree, but that's another story)

You need sufficient rights to create directories and if you are making it
as root then please remember about setting valid attributes (chmod/chown)
to these directories or only root will be able to write into them. It's
also good reason to not add mkdir by default to make_gnu.sh - it will not
help if user will not have sufficient write privileges.
I suggest to build whole install packages using make_rpm.sh or make_tgz.sh
from normal non-root account and then only install then only install final
binaries as root. For user custom build and development process I suggest
to create BIN, LIB and INC directories in you home directory with soft link
from /usr/lib/ to harbour.so

> Could we make the Linux builds a bit even more straightforward
> for the "dummy" user?

It's very simple. Just do not try to make it manually. If you are using
RPM based distribution and you ave inet access then you can simply take
./hbgtmk.sh script and run it. It will check if you have all packages
necessary to build Harbour installed then download from CVS current
(or BETA if you take hbgtmk.sh from BETA branch) code and create RPMs.
So run it on clean system from non root account, wait a while and finally
install created RPMs as root. IMHO it cannot be simpler ;-)
It will be very nice if some Debian/Ubuntu user can create such script
for .deb packages. Anyone can do that?

> >Below I'm attaching description for hb* scripts.
> Many thanks, I've been missing these.
> Can we include this in the doc dir? Or is it already somewhere, just  
> I don't know about it?

I'll do that.

> >And one additional note. If you want to create Harbour binaries
> >in some *nix system then try to use make_tgz.sh - it will create
> >self installing package with compressed Harbour binaries (you can
> >extract .tar.gz archive using --extract parameter) Build it and
> >check which files and were located it has (f.e.
> It looks this would address at least some of my problems
> above, nice.
> Worked quite good too (hb* got built this time), but I got undefined
> rerefences when trying hbmk. (HB_FUN_HB_GT_CRS, dlerror, dlopen,
> dlclose)

Please send me the exact error log with information about used system
(uname -a). If GTCRS is not created then probably you do not have
ncurses-devel installed. dlerror, dlopen, dlclose are in libdl and
should be automatically included, if not then try to add -ldl switch.
If it helps then give me an information about used system and I'll add
it hb* script by default.

> >/etc/harbour/hb-charmap.def). I know that you were testing packages
> >for MacOSX created by Antonio. Please check if they have all files
> >included in these archive.
> Hm, I'm not sure if I could do it at that stage but I'll try my best.

Just send me an error log - it should really help to diagnose problems
and allow me to clean the build scripts. Distributions are changing fast
and very often sth what was working well few years ago stops to work.
Without user feedback it will never be fixed.

best regards,
Przemek
From druzus at priv.onet.pl  Fri Jun  1 09:17:42 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun  1 09:18:17 2007
Subject: [Harbour] ChangeLog 2007-06-01 15:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070601131742.GA25221@localhost.localdomain>

2007-06-01 15:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/harbour.spec
    * set attributes explicitly to clean some wrong attributes committed
      to CVS and minor cleanup

  * harbour/include/hbapierr.h
  * harbour/source/rtl/errorapi.c
    + added hb_errorBlock()

  * harbour/source/macro/macro.yyc
  * harbour/source/compiler/harbour.yyc
    * manual hack to pacify BCC warning messages

  * harbour/include/hbpcode.h
  * harbour/include/hbxvm.h
  * harbour/source/compiler/genc.c
  * harbour/source/compiler/gencc.c
  * harbour/source/compiler/harbour.y
  * harbour/source/compiler/harbour.yyc
  * harbour/source/compiler/hbdead.c
  * harbour/source/compiler/hbfix.c
  * harbour/source/compiler/hblbl.c
  * harbour/source/compiler/hbmain.c
  * harbour/source/compiler/hbopt.c
  * harbour/source/compiler/hbpcode.c
  * harbour/source/compiler/hbstripl.c
  * harbour/source/vm/hvm.c
    + added support for:
         BEGIN SEQUENCE WITH <errorBlockExp>
            [<statements;...>]
         [ RECOVER [ USING oErr ] ]
            ...
         [ ALWAYS ]
            ...
         END 
      It works like normal BEGIN SEQUENCE but sets <errorBlockExp> as
      ErrorBlock() before executing <statements;...> and restore
      previous ErrorBlock() at the end or when exception will appear.
      I hope it will make some xHarbour user happy ;-)

  * harbour/include/hbcompat.ch
    + added preprocessor directive for TRY / CATCH / FINALLY / END
      working like in xHarbour - translated to:
         BEGIN SEQUENCE WITH { |oErr| Break( oErr ) }
            ...
         [ RECOVER [ USING oErr ] ]
            ...
         [ ALWAYS ]
            ...
         END

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Jun  1 09:23:43 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jun  1 09:23:45 2007
Subject: [Harbour] Which is the status of conttib/dot?
Message-ID: <9257026e0706010623j620f1812w4a5a8055692d5a8a@mail.gmail.com>

I've added hbprce to Makefile but I get:

Unrecoverable error 9012: Can't locate the starting procedure: 'MAIN'

before spending time on it, is there anyone that knows if it is usable?

And also what about other contribs like btree, html, samples and misc?

They are included in the rpm are they usable?

best regards,
Lorenzo
From e.m.giordano at emagsoftware.it  Fri Jun  1 09:28:17 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Jun  1 09:28:54 2007
Subject: [Harbour] ChangeLog 2007-06-01 15:10 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20070601131742.GA25221@localhost.localdomain>
Message-ID: <01af01c7a450$b6f3abf0$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: venerdi 1 giugno 2007 15.17
Oggetto: [Harbour] ChangeLog 2007-06-01 15:10 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


>  * harbour/source/macro/macro.yyc
>  * harbour/source/compiler/harbour.yyc
>    * manual hack to pacify BCC warning messages

Great! No more warnings! :-)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at priv.onet.pl  Fri Jun  1 09:35:11 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun  1 09:35:46 2007
Subject: [Harbour] Which is the status of conttib/dot?
In-Reply-To: <9257026e0706010623j620f1812w4a5a8055692d5a8a@mail.gmail.com>
References: <9257026e0706010623j620f1812w4a5a8055692d5a8a@mail.gmail.com>
Message-ID: <20070601133511.GA29428@localhost.localdomain>

On Fri, 01 Jun 2007, Lorenzo Fiorini wrote:
> I've added hbprce to Makefile but I get:
> Unrecoverable error 9012: Can't locate the starting procedure: 'MAIN'

I do not think that these message is caused by adding hbprce to linked
library list.

> before spending time on it, is there anyone that knows if it is usable?

In *nix builds and some other GCC based you have to use MAIN() function/
procedure as starting point for you applications. Only hbmk/hblnk scripts
can extract the first linked function and set it as startup entry point
like in Clipper.

> And also what about other contribs like btree, html, samples and misc?
> They are included in the rpm are they usable?

Personally I do not know - they were created by contrib/Makefile so I added
them to RPM but I've never used them.

best regards,
Przemek
From miguelangel at marchuet.net  Fri Jun  1 11:04:21 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Fri Jun  1 11:04:14 2007
Subject: [Harbour] ChangeLog 2007-06-01 15:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070601131742.GA25221@localhost.localdomain>
References: <20070601131742.GA25221@localhost.localdomain>
Message-ID: <46603575.4040303@marchuet.net>

many thk's again

Best regards,
Miguel Angel Marchuet

Przemyslaw Czerpak escribi?:
> 2007-06-01 15:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/harbour.spec
>     * set attributes explicitly to clean some wrong attributes committed
>       to CVS and minor cleanup
> 
>   * harbour/include/hbapierr.h
>   * harbour/source/rtl/errorapi.c
>     + added hb_errorBlock()
> 
>   * harbour/source/macro/macro.yyc
>   * harbour/source/compiler/harbour.yyc
>     * manual hack to pacify BCC warning messages
> 
>   * harbour/include/hbpcode.h
>   * harbour/include/hbxvm.h
>   * harbour/source/compiler/genc.c
>   * harbour/source/compiler/gencc.c
>   * harbour/source/compiler/harbour.y
>   * harbour/source/compiler/harbour.yyc
>   * harbour/source/compiler/hbdead.c
>   * harbour/source/compiler/hbfix.c
>   * harbour/source/compiler/hblbl.c
>   * harbour/source/compiler/hbmain.c
>   * harbour/source/compiler/hbopt.c
>   * harbour/source/compiler/hbpcode.c
>   * harbour/source/compiler/hbstripl.c
>   * harbour/source/vm/hvm.c
>     + added support for:
>          BEGIN SEQUENCE WITH <errorBlockExp>
>             [<statements;...>]
>          [ RECOVER [ USING oErr ] ]
>             ...
>          [ ALWAYS ]
>             ...
>          END 
>       It works like normal BEGIN SEQUENCE but sets <errorBlockExp> as
>       ErrorBlock() before executing <statements;...> and restore
>       previous ErrorBlock() at the end or when exception will appear.
>       I hope it will make some xHarbour user happy ;-)
> 
>   * harbour/include/hbcompat.ch
>     + added preprocessor directive for TRY / CATCH / FINALLY / END
>       working like in xHarbour - translated to:
>          BEGIN SEQUENCE WITH { |oErr| Break( oErr ) }
>             ...
>          [ RECOVER [ USING oErr ] ]
>             ...
>          [ ALWAYS ]
>             ...
>          END
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

From dbtopas at dbtopas.lt  Fri Jun  1 11:13:37 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Jun  1 11:09:51 2007
Subject: [Harbour] ChangeLog 2007-06-01 15:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070601131742.GA25221@localhost.localdomain>
References: <20070601131742.GA25221@localhost.localdomain>
Message-ID: <466037A1.30606@dbtopas.lt>

Przemyslaw Czerpak wrote:
>     + added support for:
>          BEGIN SEQUENCE WITH <errorBlockExp>
>             [<statements;...>]
>          [ RECOVER [ USING oErr ] ]
>             ...
>          [ ALWAYS ]
>             ...
>          END 
>       It works like normal BEGIN SEQUENCE but sets <errorBlockExp> as
>       ErrorBlock() before executing <statements;...> and restore
>       previous ErrorBlock() at the end or when exception will appear.
>       I hope it will make some xHarbour user happy ;-)

Hello,


thanks. I found it usefull not only for xharbour or TRY/CATCH users. The 
code is often:
    bOldErr := ERRORBLOCK({|o| break(o)})
    BEGIN SEQUENCE
       ...
This extension let us avoid using additional variable and save/restore 
of errorblock.


> Please make build test on different platforms and report any problems.
> I would like to set BETA3 tag soon.

I can build current harbourcvs using bcc55, mingw (gcc 3.4.2) and 
unofficial mingw release (gcc 4.1.2) without any error or warning 
messages in make_b32.log and make_gnu.log files.



Best regards,
Mindaugas
From druzus at priv.onet.pl  Fri Jun  1 12:04:55 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun  1 12:05:30 2007
Subject: [Harbour] ChangeLog 2007-06-01 15:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <466037A1.30606@dbtopas.lt>
References: <20070601131742.GA25221@localhost.localdomain>
	<466037A1.30606@dbtopas.lt>
Message-ID: <20070601160455.GA30600@localhost.localdomain>

On Fri, 01 Jun 2007, Mindaugas Kavaliauskas wrote:
> Przemyslaw Czerpak wrote:
> >    + added support for:
> >         BEGIN SEQUENCE WITH <errorBlockExp>
> >            [<statements;...>]
> >         [ RECOVER [ USING oErr ] ]
> >            ...
> >         [ ALWAYS ]
> >            ...
> >         END 
> >      It works like normal BEGIN SEQUENCE but sets <errorBlockExp> as
> >      ErrorBlock() before executing <statements;...> and restore
> >      previous ErrorBlock() at the end or when exception will appear.
> >      I hope it will make some xHarbour user happy ;-)
> Hello,
> thanks. I found it usefull not only for xharbour or TRY/CATCH users. The 
> code is often:
>    bOldErr := ERRORBLOCK({|o| break(o)})
>    BEGIN SEQUENCE
>       ...
> This extension let us avoid using additional variable and save/restore 
> of errorblock.

I would suggest to use differ then {|o| break(o)} error block because it
may break some other code. IMHO people who want use TRY / CATCH should
make own function TRYBLOCK() with support for some basic substitutions
and actions, f.e.;

    STATIC FUNC DEFTRYBLOCK( oErr )
       // By default, division by zero results in zero
       IF oError:genCode == EG_ZERODIV .AND. ;
          oError:canSubstitute
          RETURN 0
       ENDIF
       // By default, retry on RDD lock error failure */
       IF oError:genCode == EG_LOCK .AND. ;
          oError:canRetry
          // oError:tries++
          RETURN .T.
       ENDIF
       // Set NetErr() of there was a database open error
       IF oError:genCode == EG_OPEN .AND. ;
          oError:osCode == 32 .AND. ;
          oError:canDefault
          NetErr( .T. )
          RETURN .F.
       ENDIF
       // Set NetErr() if there was a lock error on dbAppend()
       IF oError:genCode == EG_APPENDLOCK .AND. ;
          oError:canDefault
          NetErr( .T. )
          RETURN .F.
       ENDIF
    RETURN .F.


    FUNC TRYBLOCK( bNewBlock )
       STATIC s_bTryBlock := { |oErr| DEFTRYBLOCK( oErr ) }
       LOCAL bTryBlock := s_bTryBlock
       IF bNewBlock != NIL .and. HB_ISBLOCK( bNewBlock )
          s_bTryBlock := bNewBlock
       ENDIF
    RETURN bTryBlock


and then define TRY as:

    #xcommand TRY  => BEGIN SEQUENCE WITH TryBlock()


Best regards,
Przemek
From druzus at priv.onet.pl  Fri Jun  1 12:14:43 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun  1 12:15:19 2007
Subject: [Harbour] ChangeLog 2007-06-01 15:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070601160455.GA30600@localhost.localdomain>
References: <20070601131742.GA25221@localhost.localdomain>
	<466037A1.30606@dbtopas.lt>
	<20070601160455.GA30600@localhost.localdomain>
Message-ID: <20070601161443.GA30879@localhost.localdomain>

On Fri, 01 Jun 2007, Przemyslaw Czerpak wrote:
>     STATIC FUNC DEFTRYBLOCK( oErr )
[...]
>        IF oError:genCode == EG_APPENDLOCK .AND. ;
>           oError:canDefault
>           NetErr( .T. )
>           RETURN .F.
>        ENDIF
>     RETURN .F.
[...]
Ups, should be:

    STATIC FUNC DEFTRYBLOCK( oError )
[...]
       IF oError:genCode == EG_APPENDLOCK .AND. ;
          oError:canDefault
          NetErr( .T. )
          RETURN .F.
       ENDIF
       Break( oError )
    RETURN .F.
[...]

best regards,
Przemek
From druzus at priv.onet.pl  Fri Jun  1 13:49:33 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun  1 13:50:09 2007
Subject: [Harbour] ChangeLog 2007-06-01 19:40 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070601174933.GA6178@localhost.localdomain>

2007-06-01 19:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/harbour.spec
  * harbour/make_rpm.sh
  * harbour/contrib/Makefile
    * cleanup and added HB_CONTRIBLIBS to set additional contrib libraries
    + added -with xhb  switch to build Harbour RPMs with HB_COMPAT_XHB
      macro

  * harbour/contrib/mysql/Makefile
    + added -I/usr/include/mysql -I/usr/local/include/mysql to C compiler
      flags
  * harbour/contrib/mysql/tmysql.prg
  * harbour/contrib/mysql/tsqlbrw.prg
    * cleaned -w2 warnings - in few places I added HB_SYMBOL_UNUSED()
      which should be replace sin the future by valid code

Modifications synced in both branches.

Lorenzo during compilation pgsql with postgresql-devel-7.4 I have 
postgres.c:535: warning: implicit declaration of function `PQescapeByteaConn'
I guess these function should be guarded by some:
    #if HB_PGVERSION >= ....
Can you check it?

best regards,
Przemek
From druzus at priv.onet.pl  Fri Jun  1 14:04:13 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun  1 14:04:48 2007
Subject: [Harbour] mouse/gtxwc small issue
In-Reply-To: <9257026e0706010029q442024eax8942ca2368cd2483@mail.gmail.com>
References: <9257026e0706010029q442024eax8942ca2368cd2483@mail.gmail.com>
Message-ID: <20070601180413.GA6383@localhost.localdomain>

On Fri, 01 Jun 2007, Lorenzo Fiorini wrote:
> Testing actual CVS I've noted that I need to click two times on the first ok
> In fact tests/mousetst reports the first click as a doubleclick.
> Any hint?

What's the uptime on your machine?
You should have also the same results in xHarbour's GTXWC.
I think that event time is negative after casting to int
and it causes such effect. Please try to change in gtxwc.c[2036]:
       if( ( int ) ( evtTime - wnd->mouseButtonsTime[ button ] ) <
           hb_mouse_GetDoubleClickSpeed() )
to:
       if( ( evtTime - wnd->mouseButtonsTime[ button ] ) <
           ( Time ) hb_mouse_GetDoubleClickSpeed() )

and check if it helps.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Jun  1 14:08:11 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jun  1 14:08:14 2007
Subject: [Harbour] ChangeLog 2007-06-01 19:40 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070601174933.GA6178@localhost.localdomain>
References: <20070601174933.GA6178@localhost.localdomain>
Message-ID: <9257026e0706011108x70dd0454l7c4566b532b37477@mail.gmail.com>

On 6/1/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> Lorenzo during compilation pgsql with postgresql-devel-7.4 I have
> postgres.c:535: warning: implicit declaration of function `PQescapeByteaConn'
> I guess these function should be guarded by some:
>     #if HB_PGVERSION >= ....
> Can you check it?

I have only 8.x installed but I'll check the doc.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Fri Jun  1 14:17:04 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jun  1 14:17:11 2007
Subject: [Harbour] mouse/gtxwc small issue
In-Reply-To: <20070601180413.GA6383@localhost.localdomain>
References: <9257026e0706010029q442024eax8942ca2368cd2483@mail.gmail.com>
	<20070601180413.GA6383@localhost.localdomain>
Message-ID: <9257026e0706011117s7ba5eff8r321b2210a2e1ea06@mail.gmail.com>

On 6/1/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> What's the uptime on your machine?
> You should have also the same results in xHarbour's GTXWC.
> I think that event time is negative after casting to int
> and it causes such effect. Please try to change in gtxwc.c[2036]:
>        if( ( int ) ( evtTime - wnd->mouseButtonsTime[ button ] ) <
>            hb_mouse_GetDoubleClickSpeed() )
> to:
>        if( ( evtTime - wnd->mouseButtonsTime[ button ] ) <
>            ( Time ) hb_mouse_GetDoubleClickSpeed() )
>
> and check if it helps.

Yes, it works, many thanks.

Just for your information I saw the "problem" early in the morning so
my pc could be on since 2 hours and mousetst built with xHarbour
worked.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Fri Jun  1 14:24:36 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jun  1 14:24:40 2007
Subject: [Harbour] ChangeLog 2007-06-01 19:40 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070601174933.GA6178@localhost.localdomain>
References: <20070601174933.GA6178@localhost.localdomain>
Message-ID: <9257026e0706011124s75f36d02sc0d835240780d4a5@mail.gmail.com>

On 6/1/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> Lorenzo during compilation pgsql with postgresql-devel-7.4 I have
> postgres.c:535: warning: implicit declaration of function `PQescapeByteaConn'
> I guess these function should be guarded by some:
>     #if HB_PGVERSION >= ....
> Can you check it?

It seems you need libpq >= 7.4.13

If you agree I'll move it to >= 8.x section since it seems I'm the
only one that use pgsql.

best regards,
Lorenzo
From druzus at priv.onet.pl  Fri Jun  1 14:44:53 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun  1 14:45:28 2007
Subject: [Harbour] ChangeLog 2007-06-01 19:40 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0706011124s75f36d02sc0d835240780d4a5@mail.gmail.com>
References: <20070601174933.GA6178@localhost.localdomain>
	<9257026e0706011124s75f36d02sc0d835240780d4a5@mail.gmail.com>
Message-ID: <20070601184453.GA12728@localhost.localdomain>

On Fri, 01 Jun 2007, Lorenzo Fiorini wrote:
> It seems you need libpq >= 7.4.13
> If you agree I'll move it to >= 8.x section since it seems I'm the
> only one that use pgsql.

Yes, sure.

best regards,
Przemek
From druzus at priv.onet.pl  Fri Jun  1 15:26:42 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun  1 15:27:19 2007
Subject: [Harbour] ChangeLog 2007-06-01 21:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070601192642.GA15949@localhost.localdomain>

2007-06-01 21:25 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/pgsql/postgres.c
    * cover PQescapeByteaConn() by #if HB_PGVERSION >= 0x0800

  * harbour/source/rtl/gtxwc/gtxwc.c
    ! fixed casting in DBLCLICK checking

best regards,
Przemek
From druzus at priv.onet.pl  Fri Jun  1 15:30:07 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun  1 15:30:42 2007
Subject: [Harbour] mouse/gtxwc small issue
In-Reply-To: <9257026e0706011117s7ba5eff8r321b2210a2e1ea06@mail.gmail.com>
References: <9257026e0706010029q442024eax8942ca2368cd2483@mail.gmail.com>
	<20070601180413.GA6383@localhost.localdomain>
	<9257026e0706011117s7ba5eff8r321b2210a2e1ea06@mail.gmail.com>
Message-ID: <20070601193007.GA16152@localhost.localdomain>

On Fri, 01 Jun 2007, Lorenzo Fiorini wrote:
> Just for your information I saw the "problem" early in the morning so
> my pc could be on since 2 hours and mousetst built with xHarbour
> worked.

Yes, you are right. I forgot that in xHarbour I haven't implemented
user settable double click time so it was compared with constant value.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Fri Jun  1 18:41:01 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Jun  1 18:41:39 2007
Subject: [Harbour] contrib/hbzlib
Message-ID: <00b201c7a49d$ee5754f0$0100a8c0@emag>

Dear friends, the xHarbour contrib/hbzlib has been successfully ported to 
Harbour and it seems to work fine. Any objection to replace the current not 
working Harbour contrib/hbzlib directory?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From philb at philb.us  Fri Jun  1 18:56:17 2007
From: philb at philb.us (Phil Barnett)
Date: Fri Jun  1 18:56:20 2007
Subject: [Harbour] contrib/hbzlib
In-Reply-To: <00b201c7a49d$ee5754f0$0100a8c0@emag>
References: <00b201c7a49d$ee5754f0$0100a8c0@emag>
Message-ID: <200706011856.17441.philb@philb.us>

On Friday 01 June 2007 18:41, Enrico Maria Giordano wrote:
> Dear friends, the xHarbour contrib/hbzlib has been successfully ported to
> Harbour and it seems to work fine. Any objection to replace the current not
> working Harbour contrib/hbzlib directory?

The code was a real mess in the old one. Is the new one better?

-- 
Phil Barnett
AI4OF
SKCC #600
From e.m.giordano at emagsoftware.it  Fri Jun  1 19:52:34 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Jun  1 19:53:09 2007
Subject: [Harbour] contrib/hbzlib
References: <00b201c7a49d$ee5754f0$0100a8c0@emag>
	<200706011856.17441.philb@philb.us>
Message-ID: <00db01c7a4a7$ed09e1d0$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Phil Barnett" <philb@philb.us>
A: <harbour@harbour-project.org>
Data invio: sabato 2 giugno 2007 0.56
Oggetto: Re: [Harbour] contrib/hbzlib


> The code was a real mess in the old one. Is the new one better?

Well, at least it seems to work fine. I used the xHarbour one for years 
without a problem.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From antonioharbour at gmail.com  Sat Jun  2 00:20:49 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sat Jun  2 00:21:30 2007
Subject: [Harbour] contrib/hbzlib
In-Reply-To: <00b201c7a49d$ee5754f0$0100a8c0@emag>
Message-ID: <4660f045.7cce1c29.78cb.0eb3@mx.google.com>

Enrico,

Please replace it, thanks

Regards,

Antonio 

-----Mensaje original-----
De: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] En nombre de Enrico Maria
Giordano
Enviado el: s?bado, 02 de junio de 2007 0:41
Para: Harbour Project Main Developer List.
Asunto: [Harbour] contrib/hbzlib

Dear friends, the xHarbour contrib/hbzlib has been successfully ported to
Harbour and it seems to work fine. Any objection to replace the current not
working Harbour contrib/hbzlib directory?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From e.m.giordano at emagsoftware.it  Sat Jun  2 06:07:22 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jun  2 06:08:01 2007
Subject: [Harbour] contrib/hbzlib
References: <4660f045.7cce1c29.78cb.0eb3@mx.google.com>
Message-ID: <007c01c7a4fd$cffa3170$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Antonio Linares" <antonioharbour@gmail.com>
A: "'Harbour Project Main Developer List.'" <harbour@harbour-project.org>
Data invio: sabato 2 giugno 2007 6.20
Oggetto: RE: [Harbour] contrib/hbzlib


> Enrico,
>
> Please replace it, thanks

Ok, I'm going to do it. Anyway I will keep the old version so I can revert the 
changes at any time.

I have to say that this is not my work. :-)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Sat Jun  2 08:34:02 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jun  2 08:34:40 2007
Subject: [Harbour] Problems in committing new hbzlib
Message-ID: <00bc01c7a512$4d7731c0$0100a8c0@emag>

I'm getting the following error message from TortoiseCVS:

cvs update: move away contrib/hbzlib/License.txt; it is in the way

C contrib/hbzlib/License.txt

cvs update: move away contrib/hbzlib/ZipString.cpp; it is in the way

C contrib/hbzlib/ZipString.cpp

cvs update: move away contrib/hbzlib/lincompile.sh; it is in the way

C contrib/hbzlib/lincompile.sh

cvs update: move away contrib/hbzlib/make_b32.bat; it is in the way

C contrib/hbzlib/make_b32.bat

cvs update: move away contrib/hbzlib/make_vc.bat; it is in the way

C contrib/hbzlib/make_vc.bat

cvs update: move away contrib/hbzlib/stdafx.cpp; it is in the way

C contrib/hbzlib/stdafx.cpp

cvs update: move away contrib/hbzlib/zip.c; it is in the way

C contrib/hbzlib/zip.c

cvs update: move away contrib/hbzlib/ziparchive.cpp; it is in the way

C contrib/hbzlib/ziparchive.cpp

cvs update: move away contrib/hbzlib/zipautobuffer.cpp; it is in the way

C contrib/hbzlib/zipautobuffer.cpp

cvs update: move away contrib/hbzlib/zipcentraldir.cpp; it is in the way

C contrib/hbzlib/zipcentraldir.cpp

cvs update: move away contrib/hbzlib/zipcomp.cpp; it is in the way

C contrib/hbzlib/zipcomp.cpp

cvs update: move away contrib/hbzlib/zipcompatibility.cpp; it is in the way

C contrib/hbzlib/zipcompatibility.cpp

cvs update: move away contrib/hbzlib/zipexception.cpp; it is in the way

C contrib/hbzlib/zipexception.cpp

cvs update: move away contrib/hbzlib/zipfile.cpp; it is in the way

C contrib/hbzlib/zipfile.cpp

cvs update: move away contrib/hbzlib/zipfileheader.cpp; it is in the way

C contrib/hbzlib/zipfileheader.cpp

cvs update: move away contrib/hbzlib/zipmemfile.cpp; it is in the way

C contrib/hbzlib/zipmemfile.cpp

cvs update: move away contrib/hbzlib/zipnew.cpp; it is in the way

C contrib/hbzlib/zipnew.cpp

cvs update: move away contrib/hbzlib/zippathcomponent.cpp; it is in the way

C contrib/hbzlib/zippathcomponent.cpp

cvs update: move away contrib/hbzlib/zipplatform.cpp; it is in the way

C contrib/hbzlib/zipplatform.cpp

cvs update: move away contrib/hbzlib/zipplatformcomm.cpp; it is in the way

C contrib/hbzlib/zipplatformcomm.cpp

cvs update: move away contrib/hbzlib/zipstorage.cpp; it is in the way

C contrib/hbzlib/zipstorage.cpp

cvs update: move away contrib/hbzlib/Linux/Makefile; it is in the way

C contrib/hbzlib/Linux/Makefile

cvs update: move away contrib/hbzlib/Linux/ZipFileMapping.h; it is in the way

C contrib/hbzlib/Linux/ZipFileMapping.h

cvs update: move away contrib/hbzlib/Linux/ZipPathComponent.cpp; it is in the 
way

C contrib/hbzlib/Linux/ZipPathComponent.cpp

cvs update: move away contrib/hbzlib/Linux/ZipPlatform.cpp; it is in the way

C contrib/hbzlib/Linux/ZipPlatform.cpp

U contrib/hbzlib/doc/zip.txt

cvs update: move away contrib/hbzlib/doc/zipnew.txt; it is in the way

C contrib/hbzlib/doc/zipnew.txt

cvs update: move away contrib/hbzlib/include/ZipExport.h; it is in the way

C contrib/hbzlib/include/ZipExport.h

cvs update: move away contrib/hbzlib/include/hbz.h; it is in the way

C contrib/hbzlib/include/hbz.h

cvs update: move away contrib/hbzlib/include/hbzip.h; it is in the way

C contrib/hbzlib/include/hbzip.h

cvs update: move away contrib/hbzlib/include/hbzip2.h; it is in the way

C contrib/hbzlib/include/hbzip2.h

cvs update: move away contrib/hbzlib/include/resource.h; it is in the way

C contrib/hbzlib/include/resource.h

cvs update: move away contrib/hbzlib/include/stdafx.h; it is in the way

C contrib/hbzlib/include/stdafx.h

cvs update: move away contrib/hbzlib/include/unzip.h; it is in the way

C contrib/hbzlib/include/unzip.h

cvs update: move away contrib/hbzlib/include/zconf.h; it is in the way

C contrib/hbzlib/include/zconf.h

cvs update: move away contrib/hbzlib/include/zip.h; it is in the way

C contrib/hbzlib/include/zip.h

cvs update: move away contrib/hbzlib/include/zipabstractfile.h; it is in the 
way

C contrib/hbzlib/include/zipabstractfile.h

cvs update: move away contrib/hbzlib/include/ziparchive.h; it is in the way

C contrib/hbzlib/include/ziparchive.h

cvs update: move away contrib/hbzlib/include/zipautobuffer.h; it is in the way

C contrib/hbzlib/include/zipautobuffer.h

cvs update: move away contrib/hbzlib/include/zipbaseexception.h; it is in the 
way

C contrib/hbzlib/include/zipbaseexception.h

cvs update: move away contrib/hbzlib/include/zipcentraldir.h; it is in the way

C contrib/hbzlib/include/zipcentraldir.h

cvs update: move away contrib/hbzlib/include/zipcollections.h; it is in the 
way

C contrib/hbzlib/include/zipcollections.h

cvs update: move away contrib/hbzlib/include/zipcompatibility.h; it is in the 
way

C contrib/hbzlib/include/zipcompatibility.h

cvs update: move away contrib/hbzlib/include/zipexception.h; it is in the way

C contrib/hbzlib/include/zipexception.h

cvs update: move away contrib/hbzlib/include/zipfile.h; it is in the way

C contrib/hbzlib/include/zipfile.h

cvs update: move away contrib/hbzlib/include/zipfileheader.h; it is in the way

C contrib/hbzlib/include/zipfileheader.h

cvs update: move away contrib/hbzlib/include/zipfilemapping.h; it is in the 
way

C contrib/hbzlib/include/zipfilemapping.h

cvs update: move away contrib/hbzlib/include/zipinternalinfo.h; it is in the 
way

C contrib/hbzlib/include/zipinternalinfo.h

cvs update: move away contrib/hbzlib/include/zipmemfile.h; it is in the way

C contrib/hbzlib/include/zipmemfile.h

cvs update: move away contrib/hbzlib/include/zippathcomponent.h; it is in the 
way

C contrib/hbzlib/include/zippathcomponent.h

cvs update: move away contrib/hbzlib/include/zipplatform.h; it is in the way

C contrib/hbzlib/include/zipplatform.h

cvs update: move away contrib/hbzlib/include/zipstorage.h; it is in the way

C contrib/hbzlib/include/zipstorage.h

cvs update: move away contrib/hbzlib/include/zipstring.h; it is in the way

C contrib/hbzlib/include/zipstring.h

cvs update: move away contrib/hbzlib/include/zutil.h; it is in the way

C contrib/hbzlib/include/zutil.h

Error, CVS operation failed

Tortoise Tip: One or more of your files has a conflict. This means that 
someone else has altered the same part of the file as you. Look above for the 
files marked "C ", and manually edit them to resolve the conflict.

How can I solve them?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Sat Jun  2 09:33:41 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jun  2 09:34:20 2007
Subject: [Harbour] 2007-06-02 12:30 UTC+0200 Enrico Maria Giordano
	(e.m.giordano@emagsoftware.it)
Message-ID: <00cb01c7a51a$a244d060$0100a8c0@emag>

2007-06-02 12:30 UTC+0200 Enrico Maria Giordano (e.m.giordano@emagsoftware.it)
  * harbour/contrib/hbzlib
     * replaced with the one borrowed from xharbour, source modifications by 
Przemek

  * harbour/contrib/hbzlib/makefile
  * harbour/contrib/hbzlib/makefile.bc
  * harbour/contrib/hbzlib/makefile.vc
  * harbour/contrib/hbzlib/zip.c
  * harbour/contrib/hbzlib/include/zipfilemapping.h
  * harbour/contrib/hbzlib/include/zipautobuffer.h
  * harbour/contrib/hbzlib/include/hbzip2.h
    * changed to make contrib/hbzlib working with harbour

  + harbour/contrib/hbzlib/hbcomprs.c
  + harbour/contrib/hbzlib/include/hbcomprs.h
    + added to make contrib/hbzlib working with harbour

  + harbour/contrib/hbzlib/doc
  + harbour/contrib/hbzlib/doc/zipnew.txt
    + added documentation borrowed from xharbour/doc/en

  - harbour/contrib/hbzlib/BccW32.cfg
    - removed unuseful file

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Sat Jun  2 10:17:07 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jun  2 10:17:45 2007
Subject: [Harbour] Harbour vs. xHarbour
Message-ID: <00ef01c7a520$b4080730$0100a8c0@emag>

I'm comparing Harbour and xHarbour regarding compilation speed and found only 
a little difference.

As an example, compiling one of my apps they take

Harbour: 18 sec
xHarbour: 20 sec

And speaking about execution speed, they are equivalent in disk-intensive 
operations (indexing, printing, etc), as expected.

Any ideas on what "real-world-app" operations (ie. not empty loops or similar 
unuseful tests) can be compared to get a significative difference between the 
two compilers?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Sat Jun  2 10:29:44 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jun  2 10:30:19 2007
Subject: [Harbour] Harbour vs. xHarbour
References: <00ef01c7a520$b4080730$0100a8c0@emag>
Message-ID: <00f801c7a522$76c5e3e0$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Enrico Maria Giordano" <e.m.giordano@emagsoftware.it>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 2 giugno 2007 16.17
Oggetto: [Harbour] Harbour vs. xHarbour

I forgot to mention that in my first tests Harbour and xHarbour seems to be 
perfectly interchangeable. :-)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From lorenzo.fiorini at gmail.com  Sat Jun  2 10:50:56 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Jun  2 10:51:02 2007
Subject: [Harbour] Harbour vs. xHarbour
In-Reply-To: <00f801c7a522$76c5e3e0$0100a8c0@emag>
References: <00ef01c7a520$b4080730$0100a8c0@emag>
	<00f801c7a522$76c5e3e0$0100a8c0@emag>
Message-ID: <9257026e0706020750g53b7d840ibc3fa117cc34adc@mail.gmail.com>

On 6/2/07, Enrico Maria Giordano <e.m.giordano@emagsoftware.it> wrote:

> I forgot to mention that in my first tests Harbour and xHarbour seems to be
> perfectly interchangeable. :-)

Which kind of applications?

Which flags do you use in C_USR and PRG_USR?

best regards,
Lorenzo
From e.m.giordano at emagsoftware.it  Sat Jun  2 10:51:52 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jun  2 10:52:28 2007
Subject: [Harbour] Bug in UPPER() function or $ operator?
Message-ID: <010c01c7a525$8e78c180$0100a8c0@emag>

This is the test:

FUNCTION MAIN()

    ? "" $ "TEST"
    ? UPPER( "" ) $ "TEST"

    RETURN NIL

Clipper:

.T.
.T.

[x]Harbour:

.T.
.F.

Is it expected?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From e.m.giordano at emagsoftware.it  Sat Jun  2 10:58:32 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jun  2 10:59:08 2007
Subject: [Harbour] Harbour vs. xHarbour
References: <00ef01c7a520$b4080730$0100a8c0@emag><00f801c7a522$76c5e3e0$0100a8c0@emag>
	<9257026e0706020750g53b7d840ibc3fa117cc34adc@mail.gmail.com>
Message-ID: <011701c7a526$7ce3e980$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 2 giugno 2007 16.50
Oggetto: Re: [Harbour] Harbour vs. xHarbour


> > I forgot to mention that in my first tests Harbour and xHarbour
> > seems to be perfectly interchangeable. :-)
> 
> Which kind of applications?

Business management for Windows.

> Which flags do you use in C_USR and PRG_USR?

In building Harbour:

SET C_USR=-DHB_FM_STATISTICS_OFF
SET PRG_USR=-l

In building my apps:

SET HARBOURCMD=/a /es2 /gc0 /m /n /q /w

and

-DHB_FM_STATISTICS_OFF
-DHB_GUI
-DHB_NO_PROFILER
-DHB_NO_TRACE
-DHB_WIN32_IO

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From toninhofwi at yahoo.com.br  Sat Jun  2 11:03:58 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sat Jun  2 11:02:06 2007
Subject: [Harbour] 2007-06-02 12:30 UTC+0200 Enrico Maria Giordano
	(e.m.giordano@emagsoftware.it)
In-Reply-To: <00cb01c7a51a$a244d060$0100a8c0@emag>
References: <00cb01c7a51a$a244d060$0100a8c0@emag>
Message-ID: <dk13639ffa8ha7o1vf7f8vtg5pd9rcbaki@4ax.com>

>2007-06-02 12:30 UTC+0200 Enrico Maria Giordano (e.m.giordano@emagsoftware.it)
>  * harbour/contrib/hbzlib
>     * replaced with the one borrowed from xharbour, source modifications by 
>Przemek

Enrico, good news for us. Thanks for your and Przemek job.

Regards,

Toninho.



		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From toninhofwi at yahoo.com.br  Sat Jun  2 11:03:58 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sat Jun  2 11:02:11 2007
Subject: [Harbour] 2007-06-02 12:30 UTC+0200 Enrico Maria Giordano
	(e.m.giordano@emagsoftware.it)
In-Reply-To: <00cb01c7a51a$a244d060$0100a8c0@emag>
References: <00cb01c7a51a$a244d060$0100a8c0@emag>
Message-ID: <dk13639ffa8ha7o1vf7f8vtg5pd9rcbaki@4ax.com>

>2007-06-02 12:30 UTC+0200 Enrico Maria Giordano (e.m.giordano@emagsoftware.it)
>  * harbour/contrib/hbzlib
>     * replaced with the one borrowed from xharbour, source modifications by 
>Przemek

Enrico, good news for us. Thanks for your and Przemek job.

Regards,

Toninho.



		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From toninhofwi at yahoo.com.br  Sat Jun  2 11:05:35 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sat Jun  2 11:03:27 2007
Subject: [Harbour] Harbour vs. xHarbour
In-Reply-To: <00ef01c7a520$b4080730$0100a8c0@emag>
References: <00ef01c7a520$b4080730$0100a8c0@emag>
Message-ID: <1n1363hflbveivj08p63bhte5i43sgm243@4ax.com>

>I'm comparing Harbour and xHarbour regarding compilation speed and found only 
>a little difference.

I can?t test my applications with Harbour by missing Backrgound Tasks.

Anybody have intentions to add it in harbour?

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From toninhofwi at yahoo.com.br  Sat Jun  2 11:05:35 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sat Jun  2 11:03:28 2007
Subject: [Harbour] Harbour vs. xHarbour
In-Reply-To: <00ef01c7a520$b4080730$0100a8c0@emag>
References: <00ef01c7a520$b4080730$0100a8c0@emag>
Message-ID: <1n1363hflbveivj08p63bhte5i43sgm243@4ax.com>

>I'm comparing Harbour and xHarbour regarding compilation speed and found only 
>a little difference.

I can?t test my applications with Harbour by missing Backrgound Tasks.

Anybody have intentions to add it in harbour?

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From toninhofwi at yahoo.com.br  Sat Jun  2 11:11:12 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sat Jun  2 11:09:04 2007
Subject: [Harbour] Harbour vs. xHarbour
In-Reply-To: <00ef01c7a520$b4080730$0100a8c0@emag>
References: <00ef01c7a520$b4080730$0100a8c0@emag>
Message-ID: <vv13631o4o0vvdc4dl5dopt78hrh6lgo1s@4ax.com>

>As an example, compiling one of my apps they take
>
>Harbour: 18 sec
>xHarbour: 20 sec
>
>And speaking about execution speed, they are equivalent in disk-intensive 
>operations (indexing, printing, etc), as expected.
This is really a surprise for me. I had in mind that xharbour was
faster.

>Any ideas on what "real-world-app" operations (ie. not empty loops or similar 
>unuseful tests) can be compared to get a significative difference between the 
>two compilers?
Enrico, try speedtst.prg from tests dir. Can you post the results here
please?

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From lorenzo.fiorini at gmail.com  Sat Jun  2 11:28:53 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Jun  2 11:28:56 2007
Subject: [Harbour] 2007-06-02 12:30 UTC+0200 Enrico Maria Giordano
	(e.m.giordano@emagsoftware.it)
In-Reply-To: <00cb01c7a51a$a244d060$0100a8c0@emag>
References: <00cb01c7a51a$a244d060$0100a8c0@emag>
Message-ID: <9257026e0706020828m546bdf51s74ad62c126b33867@mail.gmail.com>

On 6/2/07, Enrico Maria Giordano <e.m.giordano@emagsoftware.it> wrote:
> 2007-06-02 12:30 UTC+0200 Enrico Maria Giordano (e.m.giordano@emagsoftware.it)
>   * harbour/contrib/hbzlib
>      * replaced with the one borrowed from xharbour, source modifications by
> Przemek
>
>   * harbour/contrib/hbzlib/makefile
> ...
>   - harbour/contrib/hbzlib/BccW32.cfg
>     - removed unuseful file

I've tried to build it under Fedora 7 g++ 4.1.2.See the errors below.

I don't need it, I report only as information.

best regards,
Lorenzo


../../include/zipstring.h: In copy constructor
'CZipString::CZipString(const CZipString&)':
../../include/zipstring.h:125: warning: base class 'struct
std::basic_string<char, std::char_traits<char>, std::allocator<char>
>' should be explicitly initialized in the copy constructor
../../include/zipexception.h: At global scope:
../../include/zipexception.h:57: error: extra qualification
'CZipException::' on member 'CZipException'
../../include/zipexception.h: In copy constructor
'CZipException::CZipException(CZipException&)':
../../include/zipexception.h:57: warning: base class 'class
std::exception' should be explicitly initialized in the copy
constructor
../../include/zipstorage.h: At global scope:
../../include/zipstorage.h:45: warning: 'struct CZipCallback' has
virtual functions but non-virtual destructor
../../include/zipstorage.h:85: warning: 'struct CZipSpanCallback' has
virtual functions but non-virtual destructor
../../include/zipstorage.h:102: warning: 'struct CZipActionCallback'
has virtual functions but non-virtual destructor
../../include/ziparchive.h: In constructor
'CZipAddNewFileInfo::CZipAddNewFileInfo(CZipAbstractFile*, const
char*)':
../../include/ziparchive.h:211: warning: 'CZipAddNewFileInfo::m_pFile'
will be initialized after
../../include/ziparchive.h:137: warning:   'CZipString
CZipAddNewFileInfo::m_szFileNameInZip'
../../include/ziparchive.h:122: warning:   when initialized here
../../include/ziparchive.h: In member function 'void
CZipArchive::SetConvertAfterOpen(bool)':
../../include/ziparchive.h:1317: warning: statement has no effect
../../include/ziparchive.h: In member function 'int
CZipArchive::GetFindFastIndex(int) const':
../../include/ziparchive.h:1359: warning: statement has no effect
../../zip.c: At global scope:
../../zip.c:104: warning: unused parameter 'szZipFileName'
../../zip.c: In function 'BOOL ZipTestExclude(char*)':
../../zip.c:179: warning: NULL used in arithmetic
../../zip.c: In function 'void ZipCreateExclude(_HB_ITEM*)':
../../zip.c:220: error: 'hb_fsDirectory' was not declared in this scope
../../zip.c:273: error: 'hb_fsDirectory' was not declared in this scope
../../zip.c: In function 'void ZipCreateArray(_HB_ITEM*, BYTE*)':
../../zip.c:350: error: 'hb_fsDirectory' was not declared in this scope
../../zip.c: In function 'void HB_FUN_HB_UNZIPFILE()':
../../zip.c:707: warning: unused variable 'Temp'
../../zip.c:736: error: invalid conversion from 'const char*' to 'char*'
../../zip.c:736: error:   initializing argument 5 of 'int
hb_UnzipSel(char*, _HB_ITEM*, BOOL, char*, char*, _HB_ITEM*,
_HB_ITEM*)'
../../zip.c: At global scope:
../../zip.c:1011: warning: 'void HB_FUN_exit_HBZIPCLEANUP()' defined
but not used
make[3]: *** [zip.o] Error 1
make[2]: *** [descend] Error 2
From e.m.giordano at emagsoftware.it  Sat Jun  2 11:56:20 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jun  2 11:57:02 2007
Subject: [Harbour] Harbour vs. xHarbour
References: <00ef01c7a520$b4080730$0100a8c0@emag>
	<vv13631o4o0vvdc4dl5dopt78hrh6lgo1s@4ax.com>
Message-ID: <013c01c7a52e$91309f70$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Toninho@fwi" <toninhofwi@yahoo.com.br>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 2 giugno 2007 17.11
Oggetto: Re: [Harbour] Harbour vs. xHarbour


> > And speaking about execution speed, they are equivalent in
> > disk-intensive operations (indexing, printing, etc), as
> > expected.
>
> This is really a surprise for me. I had in mind that xharbour
> was faster.

Why it should be faster if the PC and the disk are the same and the RDD is the 
same? Please note that I'm talking about *disk-intensive operations*.

> Enrico, try speedtst.prg from tests dir. Can you post the
> results here please?

Here they are. Comments?

xHarbour build 0.99.71 Intl. (SimpLex), Windows XP Professional 5.01.2600 
Service Pack 2
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.25
CPU usage -> secondsCPU()

c:=L_C ->                                             0.19
n:=L_N ->                                             0.14
d:=L_D ->                                             0.14
c:=M_C ->                                             0.17
n:=M_N ->                                             0.17
d:=M_D ->                                             0.17
(sh) c:=F_C ->                                        0.67
(sh) n:=F_N ->                                        0.58
(sh) d:=F_D ->                                        0.36
(ex) c:=F_C ->                                        0.66
(ex) n:=F_N ->                                        0.56
(ex) d:=F_D ->                                        0.36
n:=o:GenCode ->                                       0.44
round(i/1000,2) ->                                    0.67
str(i/1000) ->                                        1.73
val(a3[i%ARR_LEN+1]) ->                               1.13
dtos(j+i%10000-5000) ->                               1.23
eval({||i%ARR_LEN}) ->                                0.72
eval({|x|x%ARR_LEN}) ->                               0.81
eval({|x|f1(x)}) ->                                   1.17
&('f1('+str(i)+')') ->                                9.08
eval([&('{|x|f1(x)}')]) ->                            1.27
j := valtype(a)+valtype(i) ->                         1.39
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                2.55
j := val(a2[i%ARR_LEN+1]) ->                          1.36
j := a2[i%ARR_LEN+1] == s ->                          0.91
j := a2[i%ARR_LEN+1] = s ->                           0.91
j := a2[i%ARR_LEN+1] >= s ->                          1.02
j := a2[i%ARR_LEN+1] < s ->                           0.94
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         5.45
f0() ->                                               0.47
f1(i) ->                                              0.63
f2(c[8]) ->                                           0.55
f2(c[40000]) ->                                       0.56
f2(@c[40000]) ->                                      0.50
f2(c[40000]); c2:=c ->                                0.73
f2(@c[40000]); c2:=c ->                               0.70
f3(a,a2,c,i,j,t,bc) ->                                1.23
f2(a2) ->                                             0.56
s:=f4() ->                                           12.66
ascan(a,i%ARR_LEN) ->                                 0.88
ascan(a2,c+chr(i%64+64)) ->                           3.02
ascan(a,{|x|x==i%ARR_LEN}) ->                         8.41
============================================================
total application time:                              78.58
total real time:                                     79.42

Harbour devel build 1.1-0 Intl., Windows XP 5.1.2600 Service Pack 2
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.09
CPU usage -> secondsCPU()

c:=L_C ->                                             0.08
n:=L_N ->                                             0.06
d:=L_D ->                                             0.06
c:=M_C ->                                             0.16
n:=M_N ->                                             0.13
d:=M_D ->                                             0.14
(sh) c:=F_C ->                                        0.28
(sh) n:=F_N ->                                        0.50
(sh) d:=F_D ->                                        0.31
(ex) c:=F_C ->                                        0.27
(ex) n:=F_N ->                                        0.50
(ex) d:=F_D ->                                        0.30
n:=o:GenCode ->                                       0.42
round(i/1000,2) ->                                    0.52
str(i/1000) ->                                        1.02
val(a3[i%ARR_LEN+1]) ->                               1.03
dtos(j+i%10000-5000) ->                               1.19
eval({||i%ARR_LEN}) ->                                0.55
eval({|x|x%ARR_LEN}) ->                               0.64
eval({|x|f1(x)}) ->                                   0.91
&('f1('+str(i)+')') ->                                5.45
eval([&('{|x|f1(x)}')]) ->                            0.89
j := valtype(a)+valtype(i) ->                         0.83
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                1.61
j := val(a2[i%ARR_LEN+1]) ->                          1.20
j := a2[i%ARR_LEN+1] == s ->                          0.63
j := a2[i%ARR_LEN+1] = s ->                           0.70
j := a2[i%ARR_LEN+1] >= s ->                          0.69
j := a2[i%ARR_LEN+1] < s ->                           0.70
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         5.27
f0() ->                                               0.22
f1(i) ->                                              0.36
f2(c[8]) ->                                           0.28
f2(c[40000]) ->                                       0.30
f2(@c[40000]) ->                                      0.25
f2(c[40000]); c2:=c ->                                0.38
f2(@c[40000]); c2:=c ->                               0.34
f3(a,a2,c,i,j,t,bc) ->                                0.81
f2(a2) ->                                             0.38
s:=f4() ->                                           80.03
ascan(a,i%ARR_LEN) ->                                 0.64
ascan(a2,c+chr(i%64+64)) ->                           2.38
ascan(a,{|x|x==i%ARR_LEN}) ->                         6.44
============================================================
total application time:                             123.97
total real time:                                    125.67

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From dbtopas at dbtopas.lt  Sat Jun  2 12:03:27 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sat Jun  2 11:59:39 2007
Subject: [Harbour] Bug in UPPER() function or $ operator?
In-Reply-To: <010c01c7a525$8e78c180$0100a8c0@emag>
References: <010c01c7a525$8e78c180$0100a8c0@emag>
Message-ID: <466194CF.1010202@dbtopas.lt>

Enrico Maria Giordano wrote:
> FUNCTION MAIN()
> 
>    ? "" $ "TEST"
>    ? UPPER( "" ) $ "TEST"
> 
>    RETURN NIL
> 
> Clipper:
> 
> .T.
> .T.
> 
> [x]Harbour:
> 
> .T.
> .F.
> 
> Is it expected?

Hi,


"" $ "TEST" is optimised to .T. in PCODE, but UPPER("") $ "TEST" is not 
optimised. Operator $ value is calculated using hb_strAt() which is not 
Clipper compatible. It returns 0, if first param is empty string. 
Clipper's returns 1 in this situations. This can be tested:
   ? AT("", "TEST")        // optimised PCODE to 1
   ? AT(UPPER(""), "TEST") // Harbour: 0, Clipper: 1

"" $ "TEST" clipper behaviuor is documented as buggy in 
/source/common/expropt2.c line 580:
       /* NOTE: CA-Cl*pper has a bug where the $ operator returns .T.
                when an empty string is searched [vszakats] */

But if we want to be Clipper comatible, we just change 
/source/common/hbstr.c line 91 from:
    if( ulSubLen > 0 && ulLen >= ulSubLen )
to:
    if( ulLen >= ulSubLen )


Best regards,
Mindaugas



From e.m.giordano at emagsoftware.it  Sat Jun  2 12:12:59 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jun  2 12:13:35 2007
Subject: [Harbour] Bug in UPPER() function or $ operator?
References: <010c01c7a525$8e78c180$0100a8c0@emag> <466194CF.1010202@dbtopas.lt>
Message-ID: <017301c7a530$e34ee440$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Mindaugas Kavaliauskas" <dbtopas@dbtopas.lt>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 2 giugno 2007 18.03
Oggetto: Re: [Harbour] Bug in UPPER() function or $ operator?


> "" $ "TEST" clipper behaviuor is documented as buggy in 
> /source/common/expropt2.c line 580:
>       /* NOTE: CA-Cl*pper has a bug where the $ operator returns .T.
>                when an empty string is searched [vszakats] */
> 
> But if we want to be Clipper comatible, we just change 
> /source/common/hbstr.c line 91 from:
>    if( ulSubLen > 0 && ulLen >= ulSubLen )
> to:
>    if( ulLen >= ulSubLen )

Empty set is contained in any set. I vote for keeping Clipper behavior.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From e.m.giordano at emagsoftware.it  Sat Jun  2 12:18:10 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jun  2 12:18:47 2007
Subject: [Harbour] Harbour vs. xHarbour
References: <00ef01c7a520$b4080730$0100a8c0@emag><vv13631o4o0vvdc4dl5dopt78hrh6lgo1s@4ax.com>
	<013c01c7a52e$91309f70$0100a8c0@emag>
Message-ID: <018001c7a531$9d0f88d0$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Enrico Maria Giordano" <e.m.giordano@emagsoftware.it>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 2 giugno 2007 17.56
Oggetto: Re: [Harbour] Harbour vs. xHarbour


> Harbour devel build 1.1-0 Intl., Windows XP 5.1.2600 Service Pack 2

I had to comment out

//memvar M_C, M_N, M_D

from speedtst.prg to successfully compile it. With the above line I get:

SPEEDTST.prg(65) Error E0003  Duplicate variable declaration: 'M_C'

Please note that xHarbour compile fine with that line.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From toninhofwi at yahoo.com.br  Sat Jun  2 12:29:17 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sat Jun  2 12:27:10 2007
Subject: [Harbour] Harbour vs. xHarbour
In-Reply-To: <013c01c7a52e$91309f70$0100a8c0@emag>
References: <00ef01c7a520$b4080730$0100a8c0@emag>
	<vv13631o4o0vvdc4dl5dopt78hrh6lgo1s@4ax.com>
	<013c01c7a52e$91309f70$0100a8c0@emag>
Message-ID: <mg636392g7em8a1e5li02rg29p0ugi8l4j@4ax.com>

>Here they are. Comments?
>
>xHarbour build 0.99.71 Intl. (SimpLex), Windows XP Professional 5.01.2600 
>s:=f4() ->                                           12.66

>Harbour devel build 1.1-0 Intl., Windows XP 5.1.2600 Service Pack 2
>s:=f4() ->                                           80.03


Why this huge difference ?


Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From e.m.giordano at emagsoftware.it  Sat Jun  2 12:29:31 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jun  2 12:30:07 2007
Subject: [Harbour] 2007-06-02 12:30 UTC+0200 Enrico Maria
	Giordano(e.m.giordano@emagsoftware.it)
References: <00cb01c7a51a$a244d060$0100a8c0@emag>
	<9257026e0706020828m546bdf51s74ad62c126b33867@mail.gmail.com>
Message-ID: <018501c7a533$32a22230$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 2 giugno 2007 17.28
Oggetto: Re: [Harbour] 2007-06-02 12:30 UTC+0200 Enrico Maria 
Giordano(e.m.giordano@emagsoftware.it)


> ../../include/zipexception.h: At global scope:
> ../../include/zipexception.h:57: error: extra qualification
> 'CZipException::' on member 'CZipException'

Try replacing (line 57 of include/zipexception.h)

CZipException::CZipException(CZipException& e)

with

CZipException(CZipException& e)

and let me know.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Sat Jun  2 12:30:46 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jun  2 12:31:21 2007
Subject: [Harbour] Harbour vs. xHarbour
References: <00ef01c7a520$b4080730$0100a8c0@emag><vv13631o4o0vvdc4dl5dopt78hrh6lgo1s@4ax.com><013c01c7a52e$91309f70$0100a8c0@emag>
	<mg636392g7em8a1e5li02rg29p0ugi8l4j@4ax.com>
Message-ID: <018e01c7a533$5f694c80$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Toninho@fwi" <toninhofwi@yahoo.com.br>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 2 giugno 2007 18.29
Oggetto: Re: Re: [Harbour] Harbour vs. xHarbour


> > xHarbour build 0.99.71 Intl. (SimpLex), Windows XP Professional 5.01.2600
> > s:=f4() ->                                           12.66
> >
> > Harbour devel build 1.1-0 Intl., Windows XP 5.1.2600 Service Pack 2
> > s:=f4() ->                                           80.03
>
> Why this huge difference ?

I don't know. Przemek?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From lorenzo.fiorini at gmail.com  Sat Jun  2 12:37:17 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Jun  2 12:37:21 2007
Subject: [Harbour] Harbour vs. xHarbour
In-Reply-To: <mg636392g7em8a1e5li02rg29p0ugi8l4j@4ax.com>
References: <00ef01c7a520$b4080730$0100a8c0@emag>
	<vv13631o4o0vvdc4dl5dopt78hrh6lgo1s@4ax.com>
	<013c01c7a52e$91309f70$0100a8c0@emag>
	<mg636392g7em8a1e5li02rg29p0ugi8l4j@4ax.com>
Message-ID: <9257026e0706020937g67915892lb83583b981a2ef89@mail.gmail.com>

On 6/2/07, Toninho@fwi <toninhofwi@yahoo.com.br> wrote:
> >Here they are. Comments?
> >
> >xHarbour build 0.99.71 Intl. (SimpLex), Windows XP Professional 5.01.2600
> >s:=f4() ->                                           12.66
>
> >Harbour devel build 1.1-0 Intl., Windows XP 5.1.2600 Service Pack 2
> >s:=f4() ->                                           80.03
>
>
> Why this huge difference ?

Under Linux I get these results:

xHarbour CVS
...
s:=f4() ->                                           12.74
...
============================================================
total application time:                              59.08
total real time:                                     59.58

Harbour CVS
...
s:=f4() ->                                           12.48
...
============================================================
total application time:                              54.22
total real time:                                     54.97

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Sat Jun  2 12:44:58 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Jun  2 12:45:01 2007
Subject: [Harbour] 2007-06-02 12:30 UTC+0200 Enrico Maria
	Giordano(e.m.giordano@emagsoftware.it)
In-Reply-To: <018501c7a533$32a22230$0100a8c0@emag>
References: <00cb01c7a51a$a244d060$0100a8c0@emag>
	<9257026e0706020828m546bdf51s74ad62c126b33867@mail.gmail.com>
	<018501c7a533$32a22230$0100a8c0@emag>
Message-ID: <9257026e0706020944k3b375fcdg510f514e7c9288b7@mail.gmail.com>

On 6/2/07, Enrico Maria Giordano <e.m.giordano@emagsoftware.it> wrote:

> Try replacing (line 57 of include/zipexception.h)
>
> CZipException::CZipException(CZipException& e)
>
> with
>
> CZipException(CZipException& e)
>
> and let me know.

Yes, now it builds with HB_COMPILER=gcc with HB_COMPILER=gpp I get:

...
../../zip.c: In function 'void ZipCreateExclude(_HB_ITEM*)':
../../zip.c:220: error: 'hb_fsDirectory' was not declared in this scope
../../zip.c:273: error: 'hb_fsDirectory' was not declared in this scope
../../zip.c: In function 'void ZipCreateArray(_HB_ITEM*, BYTE*)':
../../zip.c:350: error: 'hb_fsDirectory' was not declared in this scope
../../zip.c: In function 'void HB_FUN_HB_UNZIPFILE()':
../../zip.c:707: warning: unused variable 'Temp'
../../zip.c:736: error: invalid conversion from 'const char*' to 'char*'
../../zip.c:736: error:   initializing argument 5 of 'int
hb_UnzipSel(char*, _HB_ITEM*, BOOL, char*, char*, _HB_ITEM*,
_HB_ITEM*)'
../../zip.c: At global scope:
../../zip.c:1011: warning: 'void HB_FUN_exit_HBZIPCLEANUP()' defined
but not used
make[1]: *** [zip.o] Error 1
make: *** [descend] Error 2

and many other warnings.

best regards,
Lorenzo
From e.m.giordano at emagsoftware.it  Sat Jun  2 12:53:07 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jun  2 12:53:46 2007
Subject: [Harbour] Harbour vs. xHarbour
References: <00ef01c7a520$b4080730$0100a8c0@emag><vv13631o4o0vvdc4dl5dopt78hrh6lgo1s@4ax.com><013c01c7a52e$91309f70$0100a8c0@emag><mg636392g7em8a1e5li02rg29p0ugi8l4j@4ax.com>
	<9257026e0706020937g67915892lb83583b981a2ef89@mail.gmail.com>
Message-ID: <01b901c7a536$7efac850$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 2 giugno 2007 18.37
Oggetto: Re: Re: [Harbour] Harbour vs. xHarbour


> Under Linux I get these results:
> 
> xHarbour CVS
> ...
> s:=f4() ->                                           12.74
> ...
> ============================================================
> total application time:                              59.08
> total real time:                                     59.58
> 
> Harbour CVS
> ...
> s:=f4() ->                                           12.48
> ...
> ============================================================
> total application time:                              54.22
> total real time:                                     54.97

What can slow down my Harbour build in such a way?

I build it with the following batch:

@ ECHO OFF
SET PATH=c:\bcc55\bin;c:\harbour cvs\harbour\bin\b32
SET C_USR=-DHB_FM_STATISTICS_OFF
SET PRG_USR=-l
CALL make_b32 clean
CALL make_b32
CD contrib\hbzlib
CALL make_b32 clean
CALL make_b32
CD ..\ole2
CALL make_b32 clean
CALL make_b32
CD ..\adordd
CALL make_b32 clean
CALL make_b32

This is the batch I'm using for building xHarbour:

@ ECHO OFF
SET PATH=c:\bcc55\bin;c:\bison\bin
SET HB_LEX=SIMPLEX
SET HARBOURFLAGS=-l
CALL makallbc clean
makallbc

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From e.m.giordano at emagsoftware.it  Sat Jun  2 13:01:38 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jun  2 13:02:14 2007
Subject: [Harbour] 2007-06-02 12:30 UTC+0200 Enrico
	MariaGiordano(e.m.giordano@emagsoftware.it)
References: <00cb01c7a51a$a244d060$0100a8c0@emag><9257026e0706020828m546bdf51s74ad62c126b33867@mail.gmail.com><018501c7a533$32a22230$0100a8c0@emag>
	<9257026e0706020944k3b375fcdg510f514e7c9288b7@mail.gmail.com>
Message-ID: <01be01c7a537$af5ab450$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 2 giugno 2007 18.44
Oggetto: Re: [Harbour] 2007-06-02 12:30 UTC+0200 Enrico 
MariaGiordano(e.m.giordano@emagsoftware.it)


> Yes, now it builds with HB_COMPILER=gcc with HB_COMPILER=gpp I get:
>
> ...
> ../../zip.c: In function 'void ZipCreateExclude(_HB_ITEM*)':
> ../../zip.c:220: error: 'hb_fsDirectory' was not declared in this scope
> ../../zip.c:273: error: 'hb_fsDirectory' was not declared in this scope
> ../../zip.c: In function 'void ZipCreateArray(_HB_ITEM*, BYTE*)':
> ../../zip.c:350: error: 'hb_fsDirectory' was not declared in this scope
> ../../zip.c: In function 'void HB_FUN_HB_UNZIPFILE()':

Try adding

extern void hb_fsDirectory( PHB_ITEM pDir, char* szSkleton, char* 
szAttributes, BOOL bDirOnly, BOOL bFullPath );

just after

extern int Wild2RegEx( char *sWild, char* sRegEx, BOOL bMatchCase );

and let me know.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Sat Jun  2 13:29:20 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Jun  2 13:29:25 2007
Subject: [Harbour] Bug in UPPER() function or $ operator?
In-Reply-To: <017301c7a530$e34ee440$0100a8c0@emag>
References: <010c01c7a525$8e78c180$0100a8c0@emag> <466194CF.1010202@dbtopas.lt>
	<017301c7a530$e34ee440$0100a8c0@emag>
Message-ID: <F14D6AA7-66C9-4073-864F-39CDAB2CB505@syenar.hu>

It's okey with me to make it fully (bug-) compatible,
but notice that Clipper gives inconsistent results.

Try with this example:

a := ""
b := ""
c := "z"

? a $ b // -> .F.
? a $ c // -> .F.
? "" $ "" // -> .T.
? "" $ "z" // -> .T.
? At( a, b ) // -> 0
? At( a, c ) // -> 0
? At( "", "" ) // -> 1
? At( "", "z" ) // -> 1

Brgds,
Viktor

On 2007.06.02., at 18:12, Enrico Maria Giordano wrote:

>
> -----Messaggio Originale----- Da: "Mindaugas Kavaliauskas"  
> <dbtopas@dbtopas.lt>
> A: "Harbour Project Main Developer List." <harbour@harbour- 
> project.org>
> Data invio: sabato 2 giugno 2007 18.03
> Oggetto: Re: [Harbour] Bug in UPPER() function or $ operator?
>
>
>> "" $ "TEST" clipper behaviuor is documented as buggy in /source/ 
>> common/expropt2.c line 580:
>>       /* NOTE: CA-Cl*pper has a bug where the $ operator returns .T.
>>                when an empty string is searched [vszakats] */
>> But if we want to be Clipper comatible, we just change /source/ 
>> common/hbstr.c line 91 from:
>>    if( ulSubLen > 0 && ulLen >= ulSubLen )
>> to:
>>    if( ulLen >= ulSubLen )
>
> Empty set is contained in any set. I vote for keeping Clipper  
> behavior.
>
> EMG
>
> --
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From e.m.giordano at emagsoftware.it  Sat Jun  2 14:05:20 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jun  2 14:05:56 2007
Subject: [Harbour] Bug in UPPER() function or $ operator?
References: <010c01c7a525$8e78c180$0100a8c0@emag>
	<466194CF.1010202@dbtopas.lt><017301c7a530$e34ee440$0100a8c0@emag>
	<F14D6AA7-66C9-4073-864F-39CDAB2CB505@syenar.hu>
Message-ID: <01f401c7a540$95741050$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 2 giugno 2007 19.29
Oggetto: Re: [Harbour] Bug in UPPER() function or $ operator?


> It's okey with me to make it fully (bug-) compatible,
> but notice that Clipper gives inconsistent results.

You are right. I'm no more sure what should be the correct behavior... :-(

But please concentrate on the incongruence I reported: why the following 
expressions should give different results?

? "" $ "TEST"
? UPPER( "" ) $ "TEST"

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Sat Jun  2 14:28:53 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Jun  2 14:29:09 2007
Subject: [Harbour] Bug in UPPER() function or $ operator?
In-Reply-To: <01f401c7a540$95741050$0100a8c0@emag>
References: <010c01c7a525$8e78c180$0100a8c0@emag>
	<466194CF.1010202@dbtopas.lt><017301c7a530$e34ee440$0100a8c0@emag>
	<F14D6AA7-66C9-4073-864F-39CDAB2CB505@syenar.hu>
	<01f401c7a540$95741050$0100a8c0@emag>
Message-ID: <87BD3668-6151-43ED-B9A0-B22851B4F3EA@syenar.hu>

> But please concentrate on the incongruence I reported: why the  
> following expressions should give different results?
>
> ? "" $ "TEST"
> ? UPPER( "" ) $ "TEST"

Because the first expression is optimized (resolved) by the compiler,
while the second is executed normally. You can check the verbose
pcodes to see this.

It's complicated to be fully bug-compatible with CA-Cl*pper, as
Harbour has better compile time optimizations, so you'll always
be able to find code examples which would give different
results even if we'd replicate the exact low-level behaviour of
At()/$ in both the compiler and the RTL.

In your example the problem is actually caused Harbour, because
Harbour doesn't optimize the UPPER( literal ) call at compile time,
while Clipper does it.

So, I think we'd need to add UPPER() compile-time optimization
to solve this specific example.

Suprisingly LOWER() is not optimized, so if you change your
example to LOWER() Harbour would give the same result as
CA-Clipper.

Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Sat Jun  2 14:31:55 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jun  2 14:32:30 2007
Subject: [Harbour] 2007-06-02 12:30 UTC+0200 Enrico Maria
	Giordano(e.m.giordano@emagsoftware.it)
References: <00cb01c7a51a$a244d060$0100a8c0@emag>
	<9257026e0706020828m546bdf51s74ad62c126b33867@mail.gmail.com>
Message-ID: <021101c7a544$4be2ea70$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 2 giugno 2007 17.28
Oggetto: Re: [Harbour] 2007-06-02 12:30 UTC+0200 Enrico Maria 
Giordano(e.m.giordano@emagsoftware.it)


> ../../zip.c:736: error: invalid conversion from 'const char*' to 'char*'

In zipnew.cpp try to replace

int hb_UnzipSel( char *szFile, PHB_ITEM pBlock, BOOL lWithPath, char 
*szPassWord, char *pbyBuffer, PHB_ITEM pSelArray, PHB_ITEM pProgress )

with

int hb_UnzipSel( char *szFile, PHB_ITEM pBlock, BOOL lWithPath, char 
*szPassWord, const char *pbyBuffer, PHB_ITEM pSelArray, PHB_ITEM pProgress )

as pbyBuffer doesn't appear to be modified by the function.

Let me know.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Sat Jun  2 14:36:01 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jun  2 14:36:37 2007
Subject: [Harbour] Bug in UPPER() function or $ operator?
References: <010c01c7a525$8e78c180$0100a8c0@emag><466194CF.1010202@dbtopas.lt><017301c7a530$e34ee440$0100a8c0@emag><F14D6AA7-66C9-4073-864F-39CDAB2CB505@syenar.hu><01f401c7a540$95741050$0100a8c0@emag>
	<87BD3668-6151-43ED-B9A0-B22851B4F3EA@syenar.hu>
Message-ID: <021601c7a544$deb806f0$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 2 giugno 2007 20.28
Oggetto: Re: [Harbour] Bug in UPPER() function or $ operator?


> Suprisingly LOWER() is not optimized, so if you change your
> example to LOWER() Harbour would give the same result as
> CA-Clipper.

Well, I give up and leave the decision to the group. :-)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Sat Jun  2 15:47:19 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Jun  2 15:47:29 2007
Subject: [Harbour] Bug in UPPER() function or $ operator?
In-Reply-To: <021601c7a544$deb806f0$0100a8c0@emag>
References: <010c01c7a525$8e78c180$0100a8c0@emag><466194CF.1010202@dbtopas.lt><017301c7a530$e34ee440$0100a8c0@emag><F14D6AA7-66C9-4073-864F-39CDAB2CB505@syenar.hu><01f401c7a540$95741050$0100a8c0@emag>
	<87BD3668-6151-43ED-B9A0-B22851B4F3EA@syenar.hu>
	<021601c7a544$deb806f0$0100a8c0@emag>
Message-ID: <4E8D699F-DBD1-46A9-8318-32B748542F40@syenar.hu>

There is one problem with UPPER() compile-time optimization
in Harbour - and I believe this might have been the reason for
not implementing it - is that we support custom codepages. Since
these can be set at runtime, we cannot know at compile time, which
codepage to use. (Notice that the codepage sensitivity of UPPER()
- albeit very useful - is also not CA-Cl*pper compatible).

So, I think this will be one of the cases where Harbour and
CA-Cl*pper will be incompatible. This won't be a huge problem
though, as 'UPPER( "" )' is not something anyone would use
in a real-world application.

Brgds,
Viktor

On 2007.06.02., at 20:36, Enrico Maria Giordano wrote:

>
> -----Messaggio Originale----- Da: "Szak?ts Viktor" <harbour. 
> 01@syenar.hu>
> A: "Harbour Project Main Developer List." <harbour@harbour- 
> project.org>
> Data invio: sabato 2 giugno 2007 20.28
> Oggetto: Re: [Harbour] Bug in UPPER() function or $ operator?
>
>
>> Suprisingly LOWER() is not optimized, so if you change your
>> example to LOWER() Harbour would give the same result as
>> CA-Clipper.
>
> Well, I give up and leave the decision to the group. :-)
>
> EMG
>
> --
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From e.m.giordano at emagsoftware.it  Sat Jun  2 16:13:25 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jun  2 16:14:01 2007
Subject: [Harbour] Bug in UPPER() function or $ operator?
References: <010c01c7a525$8e78c180$0100a8c0@emag><466194CF.1010202@dbtopas.lt><017301c7a530$e34ee440$0100a8c0@emag><F14D6AA7-66C9-4073-864F-39CDAB2CB505@syenar.hu><01f401c7a540$95741050$0100a8c0@emag><87BD3668-6151-43ED-B9A0-B22851B4F3EA@syenar.hu><021601c7a544$deb806f0$0100a8c0@emag>
	<4E8D699F-DBD1-46A9-8318-32B748542F40@syenar.hu>
Message-ID: <027501c7a552$79fc7d00$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 2 giugno 2007 21.47
Oggetto: Re: [Harbour] Bug in UPPER() function or $ operator?


> This won't be a huge problem though,

I agree.

> as 'UPPER( "" )' is not something anyone would use
> in a real-world application.

I'm using it. Something like

IF UPPER( ALLTRIM( FIELD -> myfield ) ) $ cMyString
    ...
ENDIF

where FIELD -> myfield can be an empty string. :-)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Sat Jun  2 16:30:22 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Jun  2 16:30:29 2007
Subject: [Harbour] Bug in UPPER() function or $ operator?
In-Reply-To: <027501c7a552$79fc7d00$0100a8c0@emag>
References: <010c01c7a525$8e78c180$0100a8c0@emag><466194CF.1010202@dbtopas.lt><017301c7a530$e34ee440$0100a8c0@emag><F14D6AA7-66C9-4073-864F-39CDAB2CB505@syenar.hu><01f401c7a540$95741050$0100a8c0@emag><87BD3668-6151-43ED-B9A0-B22851B4F3EA@syenar.hu><021601c7a544$deb806f0$0100a8c0@emag>
	<4E8D699F-DBD1-46A9-8318-32B748542F40@syenar.hu>
	<027501c7a552$79fc7d00$0100a8c0@emag>
Message-ID: <44020C50-917A-422A-97F3-79DDAEB4B835@syenar.hu>

> I'm using it. Something like
>
> IF UPPER( ALLTRIM( FIELD -> myfield ) ) $ cMyString
>    ...
> ENDIF
>
> where FIELD -> myfield can be an empty string. :-)

This is a different case. The At()/$ incompatibility only shows
up if you actually use 'UPPER( "" )' with a literal empty string,
because the compile time optimization only happens for
constant (literal) parameters. If you pass a variable UPPER()
is behaving exactly like in CA-Cl*pper (except the codepage
translation, but that's a different matter).

The CA-Cl*pper UPPER() compile time optimization means
that UPPER( "" ) will be replaced with a simple "" in the generated
pcode, UPPER( "hello" ) will be replaced by "HELLO" in the pcode
and so on. But if you use UPPER( myvar ) or UPPER( alias->field )
no optimization can/will be done.

The At/$ problem happens because "literal $ literal" or "At( literal,  
literal )"
codes will be executed at compile time too and only the result will
be included in the pcode, and the problem with CA-Cl*pper is that
the low-level "hb_strAt()" is differently behaving for empty strings
in the compiler and the RTL. (because they did not use a common
codebase for it, and implemented the same function differently
for such border-cases).

To put it shortly: you are safe :)

Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Sat Jun  2 16:40:48 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jun  2 16:41:23 2007
Subject: [Harbour] Bug in UPPER() function or $ operator?
References: <010c01c7a525$8e78c180$0100a8c0@emag><466194CF.1010202@dbtopas.lt><017301c7a530$e34ee440$0100a8c0@emag><F14D6AA7-66C9-4073-864F-39CDAB2CB505@syenar.hu><01f401c7a540$95741050$0100a8c0@emag><87BD3668-6151-43ED-B9A0-B22851B4F3EA@syenar.hu><021601c7a544$deb806f0$0100a8c0@emag><4E8D699F-DBD1-46A9-8318-32B748542F40@syenar.hu><027501c7a552$79fc7d00$0100a8c0@emag>
	<44020C50-917A-422A-97F3-79DDAEB4B835@syenar.hu>
Message-ID: <02bb01c7a556$4d139d10$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 2 giugno 2007 22.30
Oggetto: Re: [Harbour] Bug in UPPER() function or $ operator?


> This is a different case.

Ops, you are right! The following sample gives identical results (.F., .F., 
.F.) in Clipper and in [x]Harbour:

FUNCTION MAIN()

    LOCAL a := ""
    LOCAL b := "TEST"

    ? a $ b
    ? UPPER( a ) $ b
    ? LOWER( a ) $ b

    RETURN NIL

Sorry for the misleading.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From info at fsgiudice.com  Sat Jun  2 19:58:25 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Jun  2 21:06:23 2007
Subject: [Harbour] Background Tasks ready for upload
References: <00ef01c7a520$b4080730$0100a8c0@emag>
	<1n1363hflbveivj08p63bhte5i43sgm243@4ax.com>
Message-ID: <00a901c7a571$f23c6400$6501a8c0@ASUSFSG>

Hi All,

I have ready Background Tasks. May I upload ?

Best regards.

Francesco

----- Original Message ----- 
From: "Toninho@fwi" <toninhofwi@yahoo.com.br>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Cc: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Saturday, June 02, 2007 5:05 PM
Subject: Re: [Harbour] Harbour vs. xHarbour


>I'm comparing Harbour and xHarbour regarding compilation speed and found 
>only
>a little difference.

I can?t test my applications with Harbour by missing Backrgound Tasks.

Anybody have intentions to add it in harbour?

Regards,

Toninho.



_______________________________________________________
Yahoo! Mail - Sempre a melhor op??o para voc?!
Experimente j? e veja as novidades.
http://br.yahoo.com/mailbeta/tudonovo/


_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour 
From harbour.01 at syenar.hu  Sun Jun  3 02:54:10 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Jun  3 02:54:26 2007
Subject: [Harbour] Background Tasks ready for upload
In-Reply-To: <00a901c7a571$f23c6400$6501a8c0@ASUSFSG>
References: <00ef01c7a520$b4080730$0100a8c0@emag>
	<1n1363hflbveivj08p63bhte5i43sgm243@4ax.com>
	<00a901c7a571$f23c6400$6501a8c0@ASUSFSG>
Message-ID: <38B83B0A-8BA5-46B5-AD51-DCB9C795A79F@syenar.hu>

What is bakcground tasks and how does it work?

Can you post a diff file?

Brgds,
Viktor

On 2007.06.03., at 1:58, Francesco Saverio Giudice wrote:

> Hi All,
>
> I have ready Background Tasks. May I upload ?
>
> Best regards.
>
> Francesco
>
> ----- Original Message ----- From: "Toninho@fwi"  
> <toninhofwi@yahoo.com.br>
> To: "Harbour Project Main Developer List." <harbour@harbour- 
> project.org>
> Cc: "Harbour Project Main Developer List." <harbour@harbour- 
> project.org>
> Sent: Saturday, June 02, 2007 5:05 PM
> Subject: Re: [Harbour] Harbour vs. xHarbour
>
>
>> I'm comparing Harbour and xHarbour regarding compilation speed and  
>> found only
>> a little difference.
>
> I can?t test my applications with Harbour by missing Backrgound Tasks.
>
> Anybody have intentions to add it in harbour?
>
> Regards,
>
> Toninho.
>
>
>
> _______________________________________________________
> Yahoo! Mail - Sempre a melhor op??o para voc?!
> Experimente j? e veja as novidades.
> http://br.yahoo.com/mailbeta/tudonovo/
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour  
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From info at fsgiudice.com  Sun Jun  3 05:27:04 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Jun  3 05:28:01 2007
Subject: [Harbour] Background Tasks ready for upload
References: <00ef01c7a520$b4080730$0100a8c0@emag><1n1363hflbveivj08p63bhte5i43sgm243@4ax.com><00a901c7a571$f23c6400$6501a8c0@ASUSFSG>
	<38B83B0A-8BA5-46B5-AD51-DCB9C795A79F@syenar.hu>
Message-ID: <005601c7a5c1$61480710$6501a8c0@ASUSFSG>


Hi Viktor,

I cannot add a diff file, because there are many files involved, but I have 
attached the help file (zap to be renamed to zip).

Background Tasks are tasks running during normal VM activity like idle 
tasks.
But, while idle tasks are performed only during keyboard idle states, 
background tasks are performed during normal activity, every nth PCODE 
instructions.

In VM it only adds one if in vmexecute() function, so it's impact, if anyone 
does not want to use, is very low.

The only main difference vs. xHarbour version is that as paramater 
HB_BACKGROUNDADD() accepts only Block var, not Array.
But this is an easy change that can be done.

Best Regards

Francesco


----- Original Message ----- 
From: "Szak?ts Viktor" <harbour.01@syenar.hu>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Sunday, June 03, 2007 8:54 AM
Subject: Re: [Harbour] Background Tasks ready for upload


What is bakcground tasks and how does it work?

Can you post a diff file?

Brgds,
Viktor

On 2007.06.03., at 1:58, Francesco Saverio Giudice wrote:

-------------- next part --------------
A non-text attachment was scrubbed...
Name: bkgtsks.zap
Type: application/octet-stream
Size: 4022 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070603/505d86dc/bkgtsks.obj
From lorenzo.fiorini at gmail.com  Sun Jun  3 06:02:50 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Jun  3 06:02:53 2007
Subject: [Harbour] Background Tasks ready for upload
In-Reply-To: <005601c7a5c1$61480710$6501a8c0@ASUSFSG>
References: <00ef01c7a520$b4080730$0100a8c0@emag>
	<1n1363hflbveivj08p63bhte5i43sgm243@4ax.com>
	<00a901c7a571$f23c6400$6501a8c0@ASUSFSG>
	<38B83B0A-8BA5-46B5-AD51-DCB9C795A79F@syenar.hu>
	<005601c7a5c1$61480710$6501a8c0@ASUSFSG>
Message-ID: <9257026e0706030302n3c8a5fe2w6abb8854a7e1d0f@mail.gmail.com>

On 6/3/07, Francesco Saverio Giudice <info@fsgiudice.com> wrote:

> I cannot add a diff file, because there are many files involved, but I have
> attached the help file (zap to be renamed to zip).

IMHO like any other change in the core it should wait for the core
developers approval.

best regards,
Lorenzo
From info at fsgiudice.com  Sun Jun  3 08:42:02 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Jun  3 08:42:58 2007
Subject: [Harbour] Background Tasks ready for upload
References: <00ef01c7a520$b4080730$0100a8c0@emag><1n1363hflbveivj08p63bhte5i43sgm243@4ax.com><00a901c7a571$f23c6400$6501a8c0@ASUSFSG><38B83B0A-8BA5-46B5-AD51-DCB9C795A79F@syenar.hu><005601c7a5c1$61480710$6501a8c0@ASUSFSG>
	<9257026e0706030302n3c8a5fe2w6abb8854a7e1d0f@mail.gmail.com>
Message-ID: <000301c7a5dc$9b2ffcb0$6501a8c0@ASUSFSG>

Obviously,

this is why I have asked group decision.

Also I have guarded background tasks with
#ifdef HB_COMPAT_XHB

best regards

Francesco

----- Original Message ----- 
From: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Sunday, June 03, 2007 12:02 PM
Subject: Re: [Harbour] Background Tasks ready for upload


> On 6/3/07, Francesco Saverio Giudice <info@fsgiudice.com> wrote:
>
>> I cannot add a diff file, because there are many files involved, but I 
>> have
>> attached the help file (zap to be renamed to zip).
>
> IMHO like any other change in the core it should wait for the core
> developers approval.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 
From info at fsgiudice.com  Sun Jun  3 09:41:58 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Jun  3 09:42:57 2007
Subject: [Harbour] Background Tasks cvs diff 
References: <00ef01c7a520$b4080730$0100a8c0@emag><1n1363hflbveivj08p63bhte5i43sgm243@4ax.com><00a901c7a571$f23c6400$6501a8c0@ASUSFSG>
	<38B83B0A-8BA5-46B5-AD51-DCB9C795A79F@syenar.hu>
Message-ID: <001e01c7a5e4$f966aa10$6501a8c0@ASUSFSG>

Viktor,

now I have found time to create a diff with CVS.
I'm not a diff expert, so I hope to be correct.

Running speedtst I have same results with and without background tasks.

best regards

Francesco

----- Original Message ----- 
From: "Szak?ts Viktor" <harbour.01@syenar.hu>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Sunday, June 03, 2007 8:54 AM
Subject: Re: [Harbour] Background Tasks ready for upload


What is bakcground tasks and how does it work?

Can you post a diff file?

Brgds,
Viktor

On 2007.06.03., at 1:58, Francesco Saverio Giudice wrote:

> Hi All,
>
> I have ready Background Tasks. May I upload ?
>
> Best regards.
>
> Francesco
>
> ----- Original Message ----- From: "Toninho@fwi" 
> <toninhofwi@yahoo.com.br>
> To: "Harbour Project Main Developer List." <harbour@harbour- project.org>
> Cc: "Harbour Project Main Developer List." <harbour@harbour- project.org>
> Sent: Saturday, June 02, 2007 5:05 PM
> Subject: Re: [Harbour] Harbour vs. xHarbour
>
>
>> I'm comparing Harbour and xHarbour regarding compilation speed and  found 
>> only
>> a little difference.
>
> I can?t test my applications with Harbour by missing Backrgound Tasks.
>
> Anybody have intentions to add it in harbour?
>
> Regards,
>
> Toninho.
>
>
>
> _______________________________________________________
> Yahoo! Mail - Sempre a melhor op??o para voc?!
> Experimente j? e veja as novidades.
> http://br.yahoo.com/mailbeta/tudonovo/
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: bkgtsks_diff.zap
Type: application/octet-stream
Size: 15469 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070603/5759cccd/bkgtsks_diff-0001.obj
From toninhofwi at yahoo.com.br  Sun Jun  3 12:27:25 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sun Jun  3 12:25:15 2007
Subject: [Harbour] Background Tasks cvs diff 
In-Reply-To: <001e01c7a5e4$f966aa10$6501a8c0@ASUSFSG>
References: <00ef01c7a520$b4080730$0100a8c0@emag><1n1363hflbveivj08p63bhte5i43sgm243@4ax.com><00a901c7a571$f23c6400$6501a8c0@ASUSFSG>
	<38B83B0A-8BA5-46B5-AD51-DCB9C795A79F@syenar.hu>
	<001e01c7a5e4$f966aa10$6501a8c0@ASUSFSG>
Message-ID: <ioq563lusohpjkp2gc9hf0edq2dvpoafqe@4ax.com>

>now I have found time to create a diff with CVS.
>I'm not a diff expert, so I hope to be correct.
>
>Running speedtst I have same results with and without background tasks.

Francesco, please wait for Przemek input, because, IIUC he had
intentions to use Ryszard asynchronous events poll and HVM
notification to add background tasks in Harbour.

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From info at fsgiudice.com  Sun Jun  3 13:20:28 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Jun  3 13:21:14 2007
Subject: [Harbour] Background Tasks cvs diff
References: <00ef01c7a520$b4080730$0100a8c0@emag><1n1363hflbveivj08p63bhte5i43sgm243@4ax.com><00a901c7a571$f23c6400$6501a8c0@ASUSFSG><38B83B0A-8BA5-46B5-AD51-DCB9C795A79F@syenar.hu><001e01c7a5e4$f966aa10$6501a8c0@ASUSFSG>
	<ioq563lusohpjkp2gc9hf0edq2dvpoafqe@4ax.com>
Message-ID: <000301c7a603$7ced2ee0$6501a8c0@ASUSFSG>

Hi Toninho,

sure I have read about that.
It was only a reply to your request.
But I want wait for Przemek input, of course.

regards

Francesco

----- Original Message ----- 
From: "Toninho@fwi" <toninhofwi@yahoo.com.br>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Sunday, June 03, 2007 6:27 PM
Subject: Re: [Harbour] Background Tasks cvs diff


>now I have found time to create a diff with CVS.
>I'm not a diff expert, so I hope to be correct.
>
>Running speedtst I have same results with and without background tasks.

Francesco, please wait for Przemek input, because, IIUC he had
intentions to use Ryszard asynchronous events poll and HVM
notification to add background tasks in Harbour.

Regards,

Toninho.



_______________________________________________________
Yahoo! Mail - Sempre a melhor op??o para voc?!
Experimente j? e veja as novidades.
http://br.yahoo.com/mailbeta/tudonovo/


_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour 
From harbour.01 at syenar.hu  Sun Jun  3 15:32:21 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Jun  3 15:32:40 2007
Subject: [Harbour] Background Tasks ready for upload
In-Reply-To: <005601c7a5c1$61480710$6501a8c0@ASUSFSG>
References: <00ef01c7a520$b4080730$0100a8c0@emag><1n1363hflbveivj08p63bhte5i43sgm243@4ax.com><00a901c7a571$f23c6400$6501a8c0@ASUSFSG>
	<38B83B0A-8BA5-46B5-AD51-DCB9C795A79F@syenar.hu>
	<005601c7a5c1$61480710$6501a8c0@ASUSFSG>
Message-ID: <91323265-9DE9-4BCD-BC40-092CACCCAB21@syenar.hu>

Hi Francesco,

If you have it ready for commit, it's easy to get a diff
file using "cvs diff > diff.txt".

It's especially important if the change touches a bigger
number of files.

As for the naming of the Harbour level functions, they
don't seem to comply with the 10 chars rule (meaning that
Harbour won't compile in strict compatible mode), so I suggest
to rename them to use a shorter prefix, if we vote to include it
(I can't decide yet).

Brgds,
Viktor

On 2007.06.03., at 11:27, Francesco Saverio Giudice wrote:

>
> Hi Viktor,
>
> I cannot add a diff file, because there are many files involved,  
> but I have attached the help file (zap to be renamed to zip).
>
> Background Tasks are tasks running during normal VM activity like  
> idle tasks.
> But, while idle tasks are performed only during keyboard idle  
> states, background tasks are performed during normal activity,  
> every nth PCODE instructions.
>
> In VM it only adds one if in vmexecute() function, so it's impact,  
> if anyone does not want to use, is very low.
>
> The only main difference vs. xHarbour version is that as paramater  
> HB_BACKGROUNDADD() accepts only Block var, not Array.
> But this is an easy change that can be done.
>
> Best Regards
>
> Francesco
>
>
> ----- Original Message ----- From: "Szak?ts Viktor" <harbour. 
> 01@syenar.hu>
> To: "Harbour Project Main Developer List." <harbour@harbour- 
> project.org>
> Sent: Sunday, June 03, 2007 8:54 AM
> Subject: Re: [Harbour] Background Tasks ready for upload
>
>
> What is bakcground tasks and how does it work?
>
> Can you post a diff file?
>
> Brgds,
> Viktor
>
> On 2007.06.03., at 1:58, Francesco Saverio Giudice wrote:
>
> <bkgtsks.zap>

From toninhofwi at yahoo.com.br  Sun Jun  3 15:47:02 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sun Jun  3 15:44:53 2007
Subject: [Harbour] Background Tasks cvs diff
In-Reply-To: <000301c7a603$7ced2ee0$6501a8c0@ASUSFSG>
References: <00ef01c7a520$b4080730$0100a8c0@emag><1n1363hflbveivj08p63bhte5i43sgm243@4ax.com><00a901c7a571$f23c6400$6501a8c0@ASUSFSG><38B83B0A-8BA5-46B5-AD51-DCB9C795A79F@syenar.hu><001e01c7a5e4$f966aa10$6501a8c0@ASUSFSG>
	<ioq563lusohpjkp2gc9hf0edq2dvpoafqe@4ax.com>
	<000301c7a603$7ced2ee0$6501a8c0@ASUSFSG>
Message-ID: <qi6663h77lphn71hlf7thsndsl1o954g6c@4ax.com>

>Hi Toninho,
>
>sure I have read about that.
>It was only a reply to your request.

Hey Francesco, thanks for your consideration! :)

Toninho.


	

	
		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From harbour.01 at syenar.hu  Sun Jun  3 15:49:30 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Jun  3 15:49:42 2007
Subject: [Harbour] Background Tasks cvs diff 
In-Reply-To: <001e01c7a5e4$f966aa10$6501a8c0@ASUSFSG>
References: <00ef01c7a520$b4080730$0100a8c0@emag><1n1363hflbveivj08p63bhte5i43sgm243@4ax.com><00a901c7a571$f23c6400$6501a8c0@ASUSFSG>
	<38B83B0A-8BA5-46B5-AD51-DCB9C795A79F@syenar.hu>
	<001e01c7a5e4$f966aa10$6501a8c0@ASUSFSG>
Message-ID: <25F8E1B8-26F0-4B0E-8F6A-96B4B3BC396F@syenar.hu>

Thanks Francesco.

I also suggest to wait for Ryszard because this addition
seems to somewhat collide or is at least influenced by those
changes recently outlined by him.

Some minor things:
1) hb_seconds() should be replaced to call the native function to
      avoid confusion.
2) If we vote for it and the long function name issue is fixed,
      the COMPAT_XHB guard can go IMO.
3) There are some non-ANSI comments in the new code.

Brgds,
Viktor

On 2007.06.03., at 15:41, Francesco Saverio Giudice wrote:

> Viktor,
>
> now I have found time to create a diff with CVS.
> I'm not a diff expert, so I hope to be correct.
>
> Running speedtst I have same results with and without background  
> tasks.
>
> best regards
>
> Francesco
>
> ----- Original Message ----- From: "Szak?ts Viktor" <harbour. 
> 01@syenar.hu>
> To: "Harbour Project Main Developer List." <harbour@harbour- 
> project.org>
> Sent: Sunday, June 03, 2007 8:54 AM
> Subject: Re: [Harbour] Background Tasks ready for upload
>
>
> What is bakcground tasks and how does it work?
>
> Can you post a diff file?
>
> Brgds,
> Viktor
>
> On 2007.06.03., at 1:58, Francesco Saverio Giudice wrote:
>
>> Hi All,
>>
>> I have ready Background Tasks. May I upload ?
>>
>> Best regards.
>>
>> Francesco
>>
>> ----- Original Message ----- From: "Toninho@fwi"  
>> <toninhofwi@yahoo.com.br>
>> To: "Harbour Project Main Developer List." <harbour@harbour-  
>> project.org>
>> Cc: "Harbour Project Main Developer List." <harbour@harbour-  
>> project.org>
>> Sent: Saturday, June 02, 2007 5:05 PM
>> Subject: Re: [Harbour] Harbour vs. xHarbour
>>
>>
>>> I'm comparing Harbour and xHarbour regarding compilation speed  
>>> and  found only
>>> a little difference.
>>
>> I can?t test my applications with Harbour by missing Backrgound  
>> Tasks.
>>
>> Anybody have intentions to add it in harbour?
>>
>> Regards,
>>
>> Toninho.
>>
>>
>>
>> _______________________________________________________
>> Yahoo! Mail - Sempre a melhor op??o para voc?!
>> Experimente j? e veja as novidades.
>> http://br.yahoo.com/mailbeta/tudonovo/
>>
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour  
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> <bkgtsks_diff.zap>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From dbtopas at dbtopas.lt  Sun Jun  3 16:09:00 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sun Jun  3 16:05:11 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
Message-ID: <46631FDC.8010804@dbtopas.lt>

2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * harbour/include/hbexprop.h
   * harbour/include/hbexprb.c
   * harbour/source/common/expropt2.c
      * added UPPER("") optimisation. The side effect of this modification
        is that Harbour becomes Clipper bug compatible in calculation of
        AT(UPPER(""), "test"). Though this optimisation does not introduce
        any buggy behaviour itself.


Hello,


I think it would be good to document clipper bugs in ex., 
docs/buggy.txt. It can help to explain some Harbour/Clipper 
compatibility problems.


Best regards,
Mindaugas
From info at fsgiudice.com  Sun Jun  3 17:01:09 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Jun  3 17:04:38 2007
Subject: [Harbour] Background Tasks cvs diff
References: <00ef01c7a520$b4080730$0100a8c0@emag><1n1363hflbveivj08p63bhte5i43sgm243@4ax.com><00a901c7a571$f23c6400$6501a8c0@ASUSFSG><38B83B0A-8BA5-46B5-AD51-DCB9C795A79F@syenar.hu><001e01c7a5e4$f966aa10$6501a8c0@ASUSFSG><ioq563lusohpjkp2gc9hf0edq2dvpoafqe@4ax.com><000301c7a603$7ced2ee0$6501a8c0@ASUSFSG>
	<qi6663h77lphn71hlf7thsndsl1o954g6c@4ax.com>
Message-ID: <001201c7a622$64fab7c0$6501a8c0@ASUSFSG>

Hi Toninho,

my pleasure.

Francesco

----- Original Message ----- 
From: "Toninho@fwi" <toninhofwi@yahoo.com.br>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Sunday, June 03, 2007 9:47 PM
Subject: Re: Re: [Harbour] Background Tasks cvs diff


>Hi Toninho,
>
>sure I have read about that.
>It was only a reply to your request.

Hey Francesco, thanks for your consideration! :)

Toninho.






_______________________________________________________
Yahoo! Mail - Sempre a melhor op??o para voc?!
Experimente j? e veja as novidades.
http://br.yahoo.com/mailbeta/tudonovo/
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour 
From info at fsgiudice.com  Sun Jun  3 17:06:58 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Jun  3 17:07:43 2007
Subject: [Harbour] Background Tasks cvs diff
References: <00ef01c7a520$b4080730$0100a8c0@emag><1n1363hflbveivj08p63bhte5i43sgm243@4ax.com><00a901c7a571$f23c6400$6501a8c0@ASUSFSG><38B83B0A-8BA5-46B5-AD51-DCB9C795A79F@syenar.hu><001e01c7a5e4$f966aa10$6501a8c0@ASUSFSG>
	<25F8E1B8-26F0-4B0E-8F6A-96B4B3BC396F@syenar.hu>
Message-ID: <001301c7a623$211503c0$6501a8c0@ASUSFSG>

Hi Viktor,

I will wait for Ryszard changes.
If them not collide with actual implementation of background tasks I will do 
changes you have suggested (leaving long name translation version in 
hbcompat.ch guarded by COMPAT_XHB).
About non-ANSI comments do you refer to bkgtst2.prg ?
If yes I have already cleaned those because them were only test functions I 
have used and I have forgotten to delete before sending zip file.
If not please tell me which is the file.

best regards

Francesco


----- Original Message ----- 
From: "Szak?ts Viktor" <harbour.01@syenar.hu>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Sunday, June 03, 2007 9:49 PM
Subject: Re: [Harbour] Background Tasks cvs diff


Thanks Francesco.

I also suggest to wait for Ryszard because this addition
seems to somewhat collide or is at least influenced by those
changes recently outlined by him.

Some minor things:
1) hb_seconds() should be replaced to call the native function to
      avoid confusion.
2) If we vote for it and the long function name issue is fixed,
      the COMPAT_XHB guard can go IMO.
3) There are some non-ANSI comments in the new code.

Brgds,
Viktor

On 2007.06.03., at 15:41, Francesco Saverio Giudice wrote:

> Viktor,
>
> now I have found time to create a diff with CVS.
> I'm not a diff expert, so I hope to be correct.
>
> Running speedtst I have same results with and without background  tasks.
>
> best regards
>
> Francesco
>
> ----- Original Message ----- From: "Szak?ts Viktor" <harbour. 
> 01@syenar.hu>
> To: "Harbour Project Main Developer List." <harbour@harbour- project.org>
> Sent: Sunday, June 03, 2007 8:54 AM
> Subject: Re: [Harbour] Background Tasks ready for upload
>
>
> What is bakcground tasks and how does it work?
>
> Can you post a diff file?
>
> Brgds,
> Viktor
>
> On 2007.06.03., at 1:58, Francesco Saverio Giudice wrote:
>
>> Hi All,
>>
>> I have ready Background Tasks. May I upload ?
>>
>> Best regards.
>>
>> Francesco
>>
>> ----- Original Message ----- From: "Toninho@fwi" 
>> <toninhofwi@yahoo.com.br>
>> To: "Harbour Project Main Developer List." <harbour@harbour- 
>> project.org>
>> Cc: "Harbour Project Main Developer List." <harbour@harbour- 
>> project.org>
>> Sent: Saturday, June 02, 2007 5:05 PM
>> Subject: Re: [Harbour] Harbour vs. xHarbour
>>
>>
>>> I'm comparing Harbour and xHarbour regarding compilation speed  and 
>>> found only
>>> a little difference.
>>
>> I can?t test my applications with Harbour by missing Backrgound  Tasks.
>>
>> Anybody have intentions to add it in harbour?
>>
>> Regards,
>>
>> Toninho.
>>
>>
>>
>> _______________________________________________________
>> Yahoo! Mail - Sempre a melhor op??o para voc?!
>> Experimente j? e veja as novidades.
>> http://br.yahoo.com/mailbeta/tudonovo/
>>
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour 
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> <bkgtsks_diff.zap>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour 
From harbour.01 at syenar.hu  Sun Jun  3 17:13:06 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Jun  3 17:13:13 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <46631FDC.8010804@dbtopas.lt>
References: <46631FDC.8010804@dbtopas.lt>
Message-ID: <3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>

Sorry, but this won't be good.

I think we should not introduce such optimization because the benefits
are next to nothing (none uses UPPER("") in code, especially with the
At() function).

While at the same time such code below will simply not work as expected
anymore:

PROC MAIN()
      SET CODEPAGE TO HU852
      ? Upper( "?" ) // Some 852 codepage lowercase chars
      RETURN

Should print: ?
Now prints: ?

I'd expect the string to be properly uppercased in 852 codepage,
but instead it will be uppercase using some compile time codepage
setting, which won't be 852.

Could you pls rollback this change?

Brgds,
Viktor

On 2007.06.03., at 22:09, Mindaugas Kavaliauskas wrote:

> 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/ 
> dbtopas.lt)
>   * harbour/include/hbexprop.h
>   * harbour/include/hbexprb.c
>   * harbour/source/common/expropt2.c
>      * added UPPER("") optimisation. The side effect of this  
> modification
>        is that Harbour becomes Clipper bug compatible in  
> calculation of
>        AT(UPPER(""), "test"). Though this optimisation does not  
> introduce
>        any buggy behaviour itself.
>
>
> Hello,
>
>
> I think it would be good to document clipper bugs in ex., docs/ 
> buggy.txt. It can help to explain some Harbour/Clipper  
> compatibility problems.
>
>
> Best regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sun Jun  3 17:18:15 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Jun  3 17:18:36 2007
Subject: [Harbour] Background Tasks cvs diff
In-Reply-To: <001301c7a623$211503c0$6501a8c0@ASUSFSG>
References: <00ef01c7a520$b4080730$0100a8c0@emag><1n1363hflbveivj08p63bhte5i43sgm243@4ax.com><00a901c7a571$f23c6400$6501a8c0@ASUSFSG><38B83B0A-8BA5-46B5-AD51-DCB9C795A79F@syenar.hu><001e01c7a5e4$f966aa10$6501a8c0@ASUSFSG>
	<25F8E1B8-26F0-4B0E-8F6A-96B4B3BC396F@syenar.hu>
	<001301c7a623$211503c0$6501a8c0@ASUSFSG>
Message-ID: <47B4E5B7-8C3E-4EAA-B6C7-8E2203649CF3@syenar.hu>

> I will wait for Ryszard changes.
> If them not collide with actual implementation of background tasks  
> I will do changes you have suggested (leaving long name translation  
> version in hbcompat.ch guarded by COMPAT_XHB).

That's good. Thanks.

> About non-ANSI comments do you refer to bkgtst2.prg ?

If we discount "// HB_COMPAT_XP" (which would be deleted anyways),
I've only saw them in the bkgtsks.c file.

> If yes I have already cleaned those because them were only test  
> functions I have used and I have forgotten to delete before sending  
> zip file.
> If not please tell me which is the file.

Thanks, I think it will be fine.

Brgds,
Viktor

From dbtopas at dbtopas.lt  Sun Jun  3 19:33:48 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sun Jun  3 19:29:58 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>
References: <46631FDC.8010804@dbtopas.lt>
	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>
Message-ID: <46634FDC.8030503@dbtopas.lt>

Hello,


> Sorry, but this won't be good.
> 
> I think we should not introduce such optimization because the benefits
> are next to nothing (none uses UPPER("") in code, especially with the
> At() function).

In very seldom cases it can be generated for example by preprocessor, 
after programmers uses a lof of preprocessor and looses the sence of it.

Analysing Clipper PCODE I've seen a lot of PCODE like:
   IF local1 == NIL;  local1 := NIL
   ENDIF
It was caused by: DEFAULT local1 TO NIL

A simple (not very meaningful) UPPER("") could be:
   #define KEY "abc"
   #define KEY_LO SUBSTR(KEY, 1, 2)
   #define KEY_HI SUBSTR(KEY, 3, 2)

   #define KEY_HI_LO SUBSTR(KEY_HI, 1, 1)
   #define KEY_HI_HI SUBSTR(KEY_HI, 2, 1)  // ""
   ? UPPER(KEY_HI_HI) $ "my_sectret_key"


> While at the same time such code below will simply not work as expected
> anymore:
> 
> PROC MAIN()
>      SET CODEPAGE TO HU852
>      ? Upper( "?" ) // Some 852 codepage lowercase chars
>      RETURN
> 
> Should print: ?
> Now prints: ?
> 
> I'd expect the string to be properly uppercased in 852 codepage,
> but instead it will be uppercase using some compile time codepage
> setting, which won't be 852.
> 
> Could you pls rollback this change?

I can not test this sample because I can not compile it. SET CODEPAGE 
command is not defined in any include/*.ch, so I do not know what 
exactly code you mean by it.

If you've tested this example, are you sure it was OK before my 
commit??? UPPER() optimises ONLY EMPTY strings. Since, {\'a} is not an 
empty string, it is not optimised. Please, send me -gc2 generated .c 
file of your test before and after my commit, if you still think it's 
buggy. Thanks.


Best regards,
Mindaugas

From harbour.01 at syenar.hu  Sun Jun  3 20:23:59 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Jun  3 20:24:06 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <46634FDC.8030503@dbtopas.lt>
References: <46631FDC.8010804@dbtopas.lt>
	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>
	<46634FDC.8030503@dbtopas.lt>
Message-ID: <B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>

> In very seldom cases it can be generated for example by  
> preprocessor, after programmers uses a lof of preprocessor and  
> looses the sence of it.
>
> Analysing Clipper PCODE I've seen a lot of PCODE like:
>   IF local1 == NIL;  local1 := NIL
>   ENDIF
> It was caused by: DEFAULT local1 TO NIL

This is not very useful code :) (also, I can't see the relation to
UPPER() optimization)

> A simple (not very meaningful) UPPER("") could be:
>   #define KEY "abc"
>   #define KEY_LO SUBSTR(KEY, 1, 2)
>   #define KEY_HI SUBSTR(KEY, 3, 2)
>
>   #define KEY_HI_LO SUBSTR(KEY_HI, 1, 1)
>   #define KEY_HI_HI SUBSTR(KEY_HI, 2, 1)  // ""
>   ? UPPER(KEY_HI_HI) $ "my_sectret_key"

This example won't trigger the problem we were discussing,
unless we implement SUBSTR() compile-time optimization
(which we don't do at this moment).

The only real world example I can think of, is when someone
is getting a string from some (non-controlled) external source
via a #define (maybe a generated file or -Dx=y command line
option). But this is indeed more than rare, and it's better
to evaluate string from such external sources anyway. (I do
something like this to include SVN revision strings to the
final binary).

>> PROC MAIN()
>>      SET CODEPAGE TO HU852
>>      ? Upper( "?" ) // Some 852 codepage lowercase chars
>>      RETURN
>> Should print: ?
>> Now prints: ?
>> I'd expect the string to be properly uppercased in 852 codepage,
>> but instead it will be uppercase using some compile time codepage
>> setting, which won't be 852.
>> Could you pls rollback this change?
>
> I can not test this sample because I can not compile it. SET  
> CODEPAGE command is not defined in any include/*.ch, so I do not  
> know what exactly code you mean by it.

Sorry it was "pseudo-code", replace it with
hb_SetCodePage( "HU852" ) for the same effect.

> If you've tested this example, are you sure it was OK before my  
> commit??? UPPER() optimises ONLY EMPTY strings. Since, {\'a} is not  
> an empty string, it is not optimised. Please, send me -gc2  
> generated .c file of your test before and after my commit, if you  
> still think it's buggy. Thanks.

The sample does worked like this before, the misunderstanding
was that from your changelog entry I thought you've implemented
full UPPER() optimization to solve the UPPER("") problem. If it's
only touching UPPER() with an empty literal string argument, it
seems ok.

(but I guess there might be other cases which can end up with
incompatible results, I'm not sure how different we're from CA-Clipper
in regards of the expression reducer/optimizer. Also too tired
to analyize this any more deeper now.)

Brgds,
Viktor

From niki at synel.co.il  Mon Jun  4 02:20:50 2007
From: niki at synel.co.il (Chen Kedem)
Date: Mon Jun  4 02:20:31 2007
Subject: [Harbour] SF bugtracker#1729881: Achoice lookup doesn't work
Message-ID: <4663AF42.70E9@synel.co.il>

http://sourceforge.net/tracker/index.php?func=detail&aid=1729881&group_id=681&atid=100681

Tested with BCC32 and devel ChangeLog 2007-06-02 12:30 UTC+0200 Enrico Maria Giordano

--tt34.prg--
#include "achoice.ch"
#include "inkey.ch"
proc main
local j
cls
j := ACHOICE( 0, 0, 10, 10, {"1-I", "2-II", "3-III", "4-IV"},, "UserFun" )
?
? j

func UserFun( mode )
local i, x
i = lastkey()
if mode != AC_EXCEPT
   x := AC_CONT
elseif i == K_ESC
   x := AC_ABORT
elseif i == K_ENTER
   x := AC_SELECT
else
   x := AC_GOTO
endif
return x
------------

bld_b32 tt34 /w/a/n
tt34

With Clipper you can press the first letter (1, 2, ... ) and go to
that item. In Harbour it is not working.

Victor,

Can you see if the correction made by the user in his/her report
is the right one.

Thanks,

  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From lorenzo.fiorini at gmail.com  Mon Jun  4 02:39:18 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jun  4 02:39:21 2007
Subject: [Harbour] SF bugtracker#1729881: Achoice lookup doesn't work
In-Reply-To: <4663AF42.70E9@synel.co.il>
References: <4663AF42.70E9@synel.co.il>
Message-ID: <9257026e0706032339k1eb98a87ia9909b92d6ba146a@mail.gmail.com>

On 6/4/07, Chen Kedem <niki@synel.co.il> wrote:

> With Clipper you can press the first letter (1, 2, ... ) and go to
> that item. In Harbour it is not working.
>
> Victor,
>
> Can you see if the correction made by the user in his/her report
> is the right one.

It seems ok after the correction.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Mon Jun  4 02:49:46 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jun  4 02:49:54 2007
Subject: [Harbour] SF bugtracker#1729881: Achoice lookup doesn't work
In-Reply-To: <9257026e0706032339k1eb98a87ia9909b92d6ba146a@mail.gmail.com>
References: <4663AF42.70E9@synel.co.il>
	<9257026e0706032339k1eb98a87ia9909b92d6ba146a@mail.gmail.com>
Message-ID: <66EAC020-26F5-4AC1-A716-09C73873042D@syenar.hu>

Thanks Lorenzo, it looks okey to me too.

Brgds,
Viktor

On 2007.06.04., at 8:39, Lorenzo Fiorini wrote:

> On 6/4/07, Chen Kedem <niki@synel.co.il> wrote:
>
>> With Clipper you can press the first letter (1, 2, ... ) and go to
>> that item. In Harbour it is not working.
>>
>> Victor,
>>
>> Can you see if the correction made by the user in his/her report
>> is the right one.
>
> It seems ok after the correction.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From e.m.giordano at emagsoftware.it  Mon Jun  4 03:27:46 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jun  4 03:28:22 2007
Subject: [Harbour] 2007-06-02 12:30 UTC+0200 Enrico Maria
	Giordano(e.m.giordano@emagsoftware.it)
References: <00cb01c7a51a$a244d060$0100a8c0@emag>
	<9257026e0706020828m546bdf51s74ad62c126b33867@mail.gmail.com>
Message-ID: <005501c7a679$d8c8cb40$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 2 giugno 2007 17.28
Oggetto: Re: [Harbour] 2007-06-02 12:30 UTC+0200 Enrico Maria 
Giordano(e.m.giordano@emagsoftware.it)


> I've tried to build it under Fedora 7 g++ 4.1.2.See the errors below.

Lorenzo, did you find the time to test my 3 proposed fix? If they work I would 
commit them.

Let me know.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From lorenzo.fiorini at gmail.com  Mon Jun  4 03:32:47 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jun  4 03:32:50 2007
Subject: [Harbour] 2007-06-02 12:30 UTC+0200 Enrico Maria
	Giordano(e.m.giordano@emagsoftware.it)
In-Reply-To: <005501c7a679$d8c8cb40$0100a8c0@emag>
References: <00cb01c7a51a$a244d060$0100a8c0@emag>
	<9257026e0706020828m546bdf51s74ad62c126b33867@mail.gmail.com>
	<005501c7a679$d8c8cb40$0100a8c0@emag>
Message-ID: <9257026e0706040032r1af4bb00yc3ffc1bca98fad8c@mail.gmail.com>

On 6/4/07, Enrico Maria Giordano <e.m.giordano@emagsoftware.it> wrote:

> Lorenzo, did you find the time to test my 3 proposed fix? If they work I would
> commit them.
>
> Let me know.

Sorry I missed them, I'll try asap.

best regards,
Lorenzo
From e.m.giordano at emagsoftware.it  Mon Jun  4 03:38:30 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jun  4 03:39:05 2007
Subject: [Harbour] 2007-06-02 12:30 UTC+0200 Enrico
	MariaGiordano(e.m.giordano@emagsoftware.it)
References: <00cb01c7a51a$a244d060$0100a8c0@emag><9257026e0706020828m546bdf51s74ad62c126b33867@mail.gmail.com><005501c7a679$d8c8cb40$0100a8c0@emag>
	<9257026e0706040032r1af4bb00yc3ffc1bca98fad8c@mail.gmail.com>
Message-ID: <009701c7a67b$590eaa30$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: luned? 4 giugno 2007 9.32
Oggetto: Re: [Harbour] 2007-06-02 12:30 UTC+0200 Enrico 
MariaGiordano(e.m.giordano@emagsoftware.it)


> Sorry I missed them, I'll try asap.

Thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From lorenzo.fiorini at gmail.com  Mon Jun  4 03:46:35 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jun  4 03:46:39 2007
Subject: [Harbour] 2007-06-02 12:30 UTC+0200 Enrico Maria
	Giordano(e.m.giordano@emagsoftware.it)
In-Reply-To: <005501c7a679$d8c8cb40$0100a8c0@emag>
References: <00cb01c7a51a$a244d060$0100a8c0@emag>
	<9257026e0706020828m546bdf51s74ad62c126b33867@mail.gmail.com>
	<005501c7a679$d8c8cb40$0100a8c0@emag>
Message-ID: <9257026e0706040046u7188b700ib791a56d28e92159@mail.gmail.com>

On 6/4/07, Enrico Maria Giordano <e.m.giordano@emagsoftware.it> wrote:

> Lorenzo, did you find the time to test my 3 proposed fix? If they work I would
> commit them.
>
> Let me know.

After applying the changes ( I hope I did it correctly ) this is what
I still get:

...
../../include/zipexception.h: At global scope:
../../include/zipexception.h:57: error: extra qualification
'CZipException::' on member 'CZipException'
...

the full stderr out is:

../../include/zipstring.h: In copy constructor
'CZipString::CZipString(const CZipString&)':
../../include/zipstring.h:125: warning: base class 'struct
std::basic_string<char, std::char_traits<char>, std::allocator<char>
>' should be explicitly initialized in the copy constructor
../../include/zipexception.h: At global scope:
../../include/zipexception.h:57: error: extra qualification
'CZipException::' on member 'CZipException'
../../include/zipexception.h: In copy constructor
'CZipException::CZipException(CZipException&)':
../../include/zipexception.h:57: warning: base class 'class
std::exception' should be explicitly initialized in the copy
constructor
../../include/zipstorage.h: At global scope:
../../include/zipstorage.h:45: warning: 'struct CZipCallback' has
virtual functions but non-virtual destructor
../../include/zipstorage.h:85: warning: 'struct CZipSpanCallback' has
virtual functions but non-virtual destructor
../../include/zipstorage.h:102: warning: 'struct CZipActionCallback'
has virtual functions but non-virtual destructor
../../include/ziparchive.h: In constructor
'CZipAddNewFileInfo::CZipAddNewFileInfo(CZipAbstractFile*, const
char*)':
../../include/ziparchive.h:211: warning: 'CZipAddNewFileInfo::m_pFile'
will be initialized after
../../include/ziparchive.h:137: warning:   'CZipString
CZipAddNewFileInfo::m_szFileNameInZip'
../../include/ziparchive.h:122: warning:   when initialized here
../../include/ziparchive.h: In member function 'void
CZipArchive::SetConvertAfterOpen(bool)':
../../include/ziparchive.h:1317: warning: statement has no effect
../../include/ziparchive.h: In member function 'int
CZipArchive::GetFindFastIndex(int) const':
../../include/ziparchive.h:1359: warning: statement has no effect
../../zip.c: At global scope:
../../zip.c:106: warning: unused parameter 'szZipFileName'
../../zip.c: In function 'BOOL ZipTestExclude(char*)':
../../zip.c:181: warning: NULL used in arithmetic
../../zip.c: In function 'void HB_FUN_HB_UNZIPFILE()':
../../zip.c:709: warning: unused variable 'Temp'
../../zip.c:738: error: invalid conversion from 'const char*' to 'char*'
../../zip.c:738: error:   initializing argument 5 of 'int
hb_UnzipSel(char*, _HB_ITEM*, BOOL, char*, char*, _HB_ITEM*,
_HB_ITEM*)'
../../zip.c: At global scope:
../../zip.c:1013: warning: 'void HB_FUN_exit_HBZIPCLEANUP()' defined
but not used
make[3]: *** [zip.o] Error 1
make[2]: *** [descend] Error 2

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Mon Jun  4 03:49:41 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jun  4 03:49:45 2007
Subject: [Harbour] 2007-06-02 12:30 UTC+0200 Enrico Maria
	Giordano(e.m.giordano@emagsoftware.it)
In-Reply-To: <9257026e0706040046u7188b700ib791a56d28e92159@mail.gmail.com>
References: <00cb01c7a51a$a244d060$0100a8c0@emag>
	<9257026e0706020828m546bdf51s74ad62c126b33867@mail.gmail.com>
	<005501c7a679$d8c8cb40$0100a8c0@emag>
	<9257026e0706040046u7188b700ib791a56d28e92159@mail.gmail.com>
Message-ID: <9257026e0706040049m3f6f9053nae94c082260dedd2@mail.gmail.com>

On 6/4/07, Lorenzo Fiorini <lorenzo.fiorini@gmail.com> wrote:

> ../../zip.c:738: error: invalid conversion from 'const char*' to 'char*'
> ../../zip.c:738: error:   initializing argument 5 of 'int
> hb_UnzipSel(char*, _HB_ITEM*, BOOL, char*, char*, _HB_ITEM*,
> _HB_ITEM*)'

OOPS bad copy and paste. I'll try again :)

best regards,
Lorenzo
From e.m.giordano at emagsoftware.it  Mon Jun  4 04:01:46 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jun  4 04:02:20 2007
Subject: [Harbour] 2007-06-02 12:30 UTC+0200 Enrico
	MariaGiordano(e.m.giordano@emagsoftware.it)
References: <00cb01c7a51a$a244d060$0100a8c0@emag><9257026e0706020828m546bdf51s74ad62c126b33867@mail.gmail.com><005501c7a679$d8c8cb40$0100a8c0@emag><9257026e0706040046u7188b700ib791a56d28e92159@mail.gmail.com>
	<9257026e0706040049m3f6f9053nae94c082260dedd2@mail.gmail.com>
Message-ID: <010801c7a67e$98a9bf60$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: luned? 4 giugno 2007 9.49
Oggetto: Re: [Harbour] 2007-06-02 12:30 UTC+0200 Enrico 
MariaGiordano(e.m.giordano@emagsoftware.it)


> OOPS bad copy and paste. I'll try again :)

Ok. :-)

I'm waiting...

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From lorenzo.fiorini at gmail.com  Mon Jun  4 04:27:56 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jun  4 04:27:58 2007
Subject: [Harbour] 2007-06-02 12:30 UTC+0200 Enrico
	MariaGiordano(e.m.giordano@emagsoftware.it)
In-Reply-To: <010801c7a67e$98a9bf60$0100a8c0@emag>
References: <00cb01c7a51a$a244d060$0100a8c0@emag>
	<9257026e0706020828m546bdf51s74ad62c126b33867@mail.gmail.com>
	<005501c7a679$d8c8cb40$0100a8c0@emag>
	<9257026e0706040046u7188b700ib791a56d28e92159@mail.gmail.com>
	<9257026e0706040049m3f6f9053nae94c082260dedd2@mail.gmail.com>
	<010801c7a67e$98a9bf60$0100a8c0@emag>
Message-ID: <9257026e0706040127v1144532aj24589d57250cf681@mail.gmail.com>

On 6/4/07, Enrico Maria Giordano <e.m.giordano@emagsoftware.it> wrote:

> I'm waiting...

Sorry it was ok, I mean I copy and pasted what was in the msgs.

Why don't you commit what you think is correct so far?

best regards,
Lorenzo
From e.m.giordano at emagsoftware.it  Mon Jun  4 05:06:48 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jun  4 05:07:23 2007
Subject: [Harbour] 2007-06-02 12:30 UTC+0200
	EnricoMariaGiordano(e.m.giordano@emagsoftware.it)
References: <00cb01c7a51a$a244d060$0100a8c0@emag><9257026e0706020828m546bdf51s74ad62c126b33867@mail.gmail.com><005501c7a679$d8c8cb40$0100a8c0@emag><9257026e0706040046u7188b700ib791a56d28e92159@mail.gmail.com><9257026e0706040049m3f6f9053nae94c082260dedd2@mail.gmail.com><010801c7a67e$98a9bf60$0100a8c0@emag>
	<9257026e0706040127v1144532aj24589d57250cf681@mail.gmail.com>
Message-ID: <014d01c7a687$ae853630$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: luned? 4 giugno 2007 10.27
Oggetto: Re: [Harbour] 2007-06-02 12:30 UTC+0200 
EnricoMariaGiordano(e.m.giordano@emagsoftware.it)


> Sorry it was ok, I mean I copy and pasted what was in the msgs.

Are you saying that my 3 fixes have fixed all the error message or not?

> Why don't you commit what you think is correct so far?

I prefer to commit when I will fixed the warnings too. And you are the only 
one that can test them. :-)

Do you want the whole hbzlib directory?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From lorenzo.fiorini at gmail.com  Mon Jun  4 05:38:02 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jun  4 05:38:06 2007
Subject: [Harbour] 2007-06-02 12:30 UTC+0200
	EnricoMariaGiordano(e.m.giordano@emagsoftware.it)
In-Reply-To: <014d01c7a687$ae853630$0100a8c0@emag>
References: <00cb01c7a51a$a244d060$0100a8c0@emag>
	<9257026e0706020828m546bdf51s74ad62c126b33867@mail.gmail.com>
	<005501c7a679$d8c8cb40$0100a8c0@emag>
	<9257026e0706040046u7188b700ib791a56d28e92159@mail.gmail.com>
	<9257026e0706040049m3f6f9053nae94c082260dedd2@mail.gmail.com>
	<010801c7a67e$98a9bf60$0100a8c0@emag>
	<9257026e0706040127v1144532aj24589d57250cf681@mail.gmail.com>
	<014d01c7a687$ae853630$0100a8c0@emag>
Message-ID: <9257026e0706040238m64bc9615q51e4d3163b2df0ec@mail.gmail.com>

On 6/4/07, Enrico Maria Giordano <e.m.giordano@emagsoftware.it> wrote:

> Are you saying that my 3 fixes have fixed all the error message or not?

I'm saying that now I can't build it anymore.

I think it is necessary to sync:

int hb_UnzipSel( char *szFile, PHB_ITEM pBlock, BOOL lWithPath, char
*szPassWord, const char *pbyBuffer, PHB_ITEM pSelArray, PHB_ITEM pProgress )

with its declaration in include/hbzip2.h.

After this it builds ( with some warnings in gcc and many more in gpp ).

I can't test it at runtime.

best regards,
Lorenzo
From e.m.giordano at emagsoftware.it  Mon Jun  4 05:48:25 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jun  4 05:49:35 2007
Subject: [Harbour] 2007-06-02 12:30
	UTC+0200EnricoMariaGiordano(e.m.giordano@emagsoftware.it)
References: <00cb01c7a51a$a244d060$0100a8c0@emag><9257026e0706020828m546bdf51s74ad62c126b33867@mail.gmail.com><005501c7a679$d8c8cb40$0100a8c0@emag><9257026e0706040046u7188b700ib791a56d28e92159@mail.gmail.com><9257026e0706040049m3f6f9053nae94c082260dedd2@mail.gmail.com><010801c7a67e$98a9bf60$0100a8c0@emag><9257026e0706040127v1144532aj24589d57250cf681@mail.gmail.com><014d01c7a687$ae853630$0100a8c0@emag>
	<9257026e0706040238m64bc9615q51e4d3163b2df0ec@mail.gmail.com>
Message-ID: <01a401c7a68d$7f040d40$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: luned? 4 giugno 2007 11.38
Oggetto: Re: [Harbour] 2007-06-02 12:30 
UTC+0200EnricoMariaGiordano(e.m.giordano@emagsoftware.it)


> I'm saying that now I can't build it anymore.
>
> I think it is necessary to sync:
>
> int hb_UnzipSel( char *szFile, PHB_ITEM pBlock, BOOL lWithPath, char
> *szPassWord, const char *pbyBuffer, PHB_ITEM pSelArray, PHB_ITEM pProgress )
>
> with its declaration in include/hbzip2.h.

Sure. I forgot the include file.

> After this it builds ( with some warnings in gcc and many more in gpp ).

I suppose I can't fix all those warnings being unable to test the result... 
:-(

> I can't test it at runtime.

Why not? If you or someone else can confirm it builds and runs correctly then 
I will commit.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From lorenzo.fiorini at gmail.com  Mon Jun  4 06:10:35 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jun  4 06:10:38 2007
Subject: [Harbour] 2007-06-02 12:30
	UTC+0200EnricoMariaGiordano(e.m.giordano@emagsoftware.it)
In-Reply-To: <01a401c7a68d$7f040d40$0100a8c0@emag>
References: <00cb01c7a51a$a244d060$0100a8c0@emag>
	<9257026e0706020828m546bdf51s74ad62c126b33867@mail.gmail.com>
	<005501c7a679$d8c8cb40$0100a8c0@emag>
	<9257026e0706040046u7188b700ib791a56d28e92159@mail.gmail.com>
	<9257026e0706040049m3f6f9053nae94c082260dedd2@mail.gmail.com>
	<010801c7a67e$98a9bf60$0100a8c0@emag>
	<9257026e0706040127v1144532aj24589d57250cf681@mail.gmail.com>
	<014d01c7a687$ae853630$0100a8c0@emag>
	<9257026e0706040238m64bc9615q51e4d3163b2df0ec@mail.gmail.com>
	<01a401c7a68d$7f040d40$0100a8c0@emag>
Message-ID: <9257026e0706040310y28d1bc92qde5354ea283df519@mail.gmail.com>

On 6/4/07, Enrico Maria Giordano <e.m.giordano@emagsoftware.it> wrote:

> Why not? If you or someone else can confirm it builds and runs correctly then
> I will commit.

As I said I don't use it.

Could you kindly point me to "ready to run" test code?

best regards,
Lorenzo
From e.m.giordano at emagsoftware.it  Mon Jun  4 06:23:30 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jun  4 06:26:50 2007
Subject: [Harbour] 2007-06-04 12:17 UTC+0200 Enrico Maria Giordano
	(e.m.giordano@emagsoftware.it)
Message-ID: <01dd01c7a692$660506f0$0100a8c0@emag>

2007-06-04 12:17 UTC+0200 Enrico Maria Giordano (e.m.giordano@emagsoftware.it)
  * harbour/contrib/hbzlib/include/zipexception.h
    * removed wrong CZipException:: qualificator in CZipException copy 
constructor

  * harbour/contrib/hbzlib/zip.c
    + added extern void hb_fsDirectory() declaration

  * harbour/contrib/hbzlib/include/hbzip2.h
  * harbour/contrib/hbzlib/zipnew.cpp
    * changed fifth parameter to const char *pbyBuffer in hb_UnzipSel() 
function

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Mon Jun  4 06:26:14 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jun  4 06:26:53 2007
Subject: [Harbour] 2007-06-02
	12:30UTC+0200EnricoMariaGiordano(e.m.giordano@emagsoftware.it)
References: <00cb01c7a51a$a244d060$0100a8c0@emag><9257026e0706020828m546bdf51s74ad62c126b33867@mail.gmail.com><005501c7a679$d8c8cb40$0100a8c0@emag><9257026e0706040046u7188b700ib791a56d28e92159@mail.gmail.com><9257026e0706040049m3f6f9053nae94c082260dedd2@mail.gmail.com><010801c7a67e$98a9bf60$0100a8c0@emag><9257026e0706040127v1144532aj24589d57250cf681@mail.gmail.com><014d01c7a687$ae853630$0100a8c0@emag><9257026e0706040238m64bc9615q51e4d3163b2df0ec@mail.gmail.com><01a401c7a68d$7f040d40$0100a8c0@emag>
	<9257026e0706040310y28d1bc92qde5354ea283df519@mail.gmail.com>
Message-ID: <01e401c7a692$c75a2c00$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: luned? 4 giugno 2007 12.10
Oggetto: Re: [Harbour] 2007-06-02 
12:30UTC+0200EnricoMariaGiordano(e.m.giordano@emagsoftware.it)


> As I said I don't use it.

Ah, ok.

> Could you kindly point me to "ready to run" test code?

Try these:

? HB_ZIPFILE( cZipFile, aFiles, 9 )

and

? HB_UNZIPFILE( cZipFile, , , , CURDRIVE() + ":\" + CURDIR(), 
HB_GETFILESINZIP( cZipFile ) )

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From lorenzo.fiorini at gmail.com  Mon Jun  4 06:40:42 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jun  4 06:40:45 2007
Subject: [Harbour] TODO TBrowse and status of other UI "components"
Message-ID: <9257026e0706040340h77ba9d9bq391a8957bde0e14d@mail.gmail.com>

I was looking at the TODO list to see if there is sth I can work on
and I've found:

...
Assign to: <nobody>
Detail...: TBrowse() implementation still has bugs.
Status...: Open.
...

I have a working tbrowse borrowed from xHarbour ( not latest CVS )
that I consider 100% compatible with C53b. This doesn't mean it is
perfect but that if I build the same app with C53b I get the same
results for the features I'm using.

Other UI components like get, menu and teditor are in a similar situation.

I've already reported it to Viktor in the past and I'll not repeat it
in the future, but before
beta3 is tagged I'd like to be sure that everyone knows that my
reports are related to my local CVS, since using Harbour CVS as it is
I can't get my C53b valid apps to work.

Below there is the diff list of the files.

best regards,
Lorenzo

debug/tbrwtext.prg
rtl/checkbox.prg
rtl/getsys.prg
rtl/listbox.prg
rtl/memoedit.prg
rtl/mssgline.prg
rtl/pushbtn.prg
rtl/radiobtn.prg
rtl/radiogrp.prg
rtl/tbcolumn.prg
rtl/tbrowse.prg
rtl/teditor.prg
rtl/tgetint.prg
rtl/tgetlist.prg
rtl/tget.prg
rtl/tmenuitm.prg
rtl/tpopup.prg
rtl/ttopbar.prg
From harbour.01 at syenar.hu  Mon Jun  4 06:48:00 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jun  4 06:48:09 2007
Subject: [Harbour] TODO TBrowse and status of other UI "components"
In-Reply-To: <9257026e0706040340h77ba9d9bq391a8957bde0e14d@mail.gmail.com>
References: <9257026e0706040340h77ba9d9bq391a8957bde0e14d@mail.gmail.com>
Message-ID: <E7E2E837-772B-40B5-BE55-7CB3B060E463@syenar.hu>

> I have a working tbrowse borrowed from xHarbour ( not latest CVS )
> that I consider 100% compatible with C53b. This doesn't mean it is
> perfect but that if I build the same app with C53b I get the same
> results for the features I'm using.
>
> Other UI components like get, menu and teditor are in a similar  
> situation.

I'd rather still give it a go myself, as my tests showed terrible  
results
with the xhb tbrowse, plus tget would also probably fail most tests I
assembled not long ago (our tget is still not perfect though).

> Below there is the diff list of the files.

Can you post the actual files somewhere?

Brgds,
Viktor


From dbtopas at dbtopas.lt  Mon Jun  4 06:58:21 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Jun  4 06:55:27 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>
References: <46631FDC.8010804@dbtopas.lt>	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>	<46634FDC.8030503@dbtopas.lt>
	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>
Message-ID: <4663F04D.9010607@dbtopas.lt>

Hello,


>> Analysing Clipper PCODE I've seen a lot of PCODE like:
>>   IF local1 == NIL;  local1 := NIL
>>   ENDIF
>> It was caused by: DEFAULT local1 TO NIL
> 
> This is not very useful code :) (also, I can't see the relation to
> UPPER() optimization)

The relation to UPPER and any other optimisation is that, if you don't 
see the final code (do not look to .ppo), there is change to write 
meaningless expressions, including UPPER("").


>> A simple (not very meaningful) UPPER("") could be:
>>   #define KEY "abc"
>>   #define KEY_LO SUBSTR(KEY, 1, 2)
>>   #define KEY_HI SUBSTR(KEY, 3, 2)
>>
>>   #define KEY_HI_LO SUBSTR(KEY_HI, 1, 1)
>>   #define KEY_HI_HI SUBSTR(KEY_HI, 2, 1)  // ""
>>   ? UPPER(KEY_HI_HI) $ "my_sectret_key"
> 
> 
> This example won't trigger the problem we were discussing,
> unless we implement SUBSTR() compile-time optimization
> (which we don't do at this moment).

But SUBSTR optimisation can be added in the future and it is quite 
logical to do.


> (but I guess there might be other cases which can end up with
> incompatible results, I'm not sure how different we're from CA-Clipper
> in regards of the expression reducer/optimizer. Also too tired
> to analyize this any more deeper now.)

Yes, for example LOWER() is not optimised. So, this change just makes 
Harbour to be bug compatible in this situation, but not all situations. 
If we document the differences between Harbour and Clipper and indicate 
it's buggy Clipper behaviour, we can drop supporting buggy "" $ "test".
But now it is not clear for the end user why Clipper and Harbour gives 
different results.
But even if we drop supporting buggy "" $ "test", optimisation of 
UPPER("") -> "" remains valid.


Best regards,
Mindaugas
From toninhofwi at yahoo.com.br  Mon Jun  4 07:10:27 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Jun  4 07:11:03 2007
Subject: [Harbour] ChangeLog 2007-06-04 08:04 UTC-0300 Antonio Carlos
	Pantaglione
Message-ID: <ems763ll28ab3ue2igtdq2dgpcauh1oeov@4ax.com>

2007-06-04 08:04 UTC-0300 Antonio Carlos Pantaglione
<toninho@fwi.com.br>
  + harbour/contrib/tip/make_b32.bat
  + harbour/contrib/tip/makefile.bc

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From harbour.01 at syenar.hu  Mon Jun  4 07:27:19 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jun  4 07:27:29 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <4663F04D.9010607@dbtopas.lt>
References: <46631FDC.8010804@dbtopas.lt>	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>	<46634FDC.8030503@dbtopas.lt>
	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>
	<4663F04D.9010607@dbtopas.lt>
Message-ID: <967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>

> The relation to UPPER and any other optimisation is that, if you  
> don't see the final code (do not look to .ppo), there is change to  
> write meaningless expressions, including UPPER("").

Okey I see your point, but find the real-world chances to be slim.

>> This example won't trigger the problem we were discussing,
>> unless we implement SUBSTR() compile-time optimization
>> (which we don't do at this moment).
>
> But SUBSTR optimisation can be added in the future and it is quite  
> logical to do.

Of course, but that will just make this incompatibility
to became a bigger problem.

See this code:
? SubStr( "hello", 2, 0 ) $ "hello"

Now it's compatible but if we'd implement SubStr() optimization
in the future it would become incompatible with your latest changes.

>> (but I guess there might be other cases which can end up with
>> incompatible results, I'm not sure how different we're from CA- 
>> Clipper
>> in regards of the expression reducer/optimizer. Also too tired
>> to analyize this any more deeper now.)
>
> Yes, for example LOWER() is not optimised. So, this change just  
> makes Harbour to be bug compatible in this situation, but not all  
> situations. If we document the differences between Harbour and  
> Clipper and indicate it's buggy Clipper behaviour, we can drop  
> supporting buggy "" $ "test".
> But now it is not clear for the end user why Clipper and Harbour  
> gives different results.
> But even if we drop supporting buggy "" $ "test", optimisation of  
> UPPER("") -> "" remains valid.

I didn't mean LOWER() but some other incompatibilities of the expression
optimizer. As soon there is a difference in original code which would
result in an empty string, we'll have an incompatibility again. It's  
insane
to fix all those, so the fix is not complete, that's why I think this  
fix is just
a hack but not a complete solution. (which we probably won't be able
to achieve unless we exactly replicate the CA-Clipper optimization  
scheme,
but there is no promise or intent (or even possibility) to exactly  
replicate it,
see possible SUBSTR() problems as an example).

Brgds,
Viktor

From dbtopas at dbtopas.lt  Mon Jun  4 07:51:43 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Jun  4 07:47:49 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>
References: <46631FDC.8010804@dbtopas.lt>	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>	<46634FDC.8030503@dbtopas.lt>	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>	<4663F04D.9010607@dbtopas.lt>
	<967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>
Message-ID: <4663FCCF.5000808@dbtopas.lt>

Hello,


> I didn't mean LOWER() but some other incompatibilities of the expression
> optimizer. As soon there is a difference in original code which would
> result in an empty string, we'll have an incompatibility again. It's  
> insane
> to fix all those, so the fix is not complete, that's why I think this  
> fix is just
> a hack but not a complete solution. (which we probably won't be able
> to achieve unless we exactly replicate the CA-Clipper optimization  scheme,
> but there is no promise or intent (or even possibility) to exactly  
> replicate it,
> see possible SUBSTR() problems as an example).

The hack is optimisation of "" $ ... to .T. and AT("", ...) to 1. And 
this hack is implemented to be Clipper bug compatible. And I support the 
idea of droping it at all, if we document it.

Optimisation of UPPER("") to "" is not related to this hack, and it is 
not hack at all.



Best regards,
Mindaugas
From ptucker at sympatico.ca  Mon Jun  4 08:09:26 2007
From: ptucker at sympatico.ca (Paul Tucker)
Date: Mon Jun  4 08:09:41 2007
Subject: [Harbour] OT - Where is John Skelton?
Message-ID: <00ab01c7a6a1$326e1890$b000a8c0@PAUL>

If John can be found, could he email me?

Thanks.
From harbour.01 at syenar.hu  Mon Jun  4 08:18:52 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jun  4 08:19:02 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <4663FCCF.5000808@dbtopas.lt>
References: <46631FDC.8010804@dbtopas.lt>	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>	<46634FDC.8030503@dbtopas.lt>	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>	<4663F04D.9010607@dbtopas.lt>
	<967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>
	<4663FCCF.5000808@dbtopas.lt>
Message-ID: <1E91D90D-2FF0-49A5-BC0E-205F6C213D65@syenar.hu>

>> I didn't mean LOWER() but some other incompatibilities of the  
>> expression
>> optimizer. As soon there is a difference in original code which would
>> result in an empty string, we'll have an incompatibility again.  
>> It's  insane
>> to fix all those, so the fix is not complete, that's why I think  
>> this  fix is just
>> a hack but not a complete solution. (which we probably won't be able
>> to achieve unless we exactly replicate the CA-Clipper  
>> optimization  scheme,
>> but there is no promise or intent (or even possibility) to  
>> exactly  replicate it,
>> see possible SUBSTR() problems as an example).
>
> The hack is optimisation of "" $ ... to .T. and AT("", ...) to 1.  
> And this hack is implemented to be Clipper bug compatible. And I  
> support the idea of droping it at

Well, no :) This is replicating exact (bug-compatible) CA-Clipper  
behaviour.

I've told numerous examples and explanations, I can't iterate more on  
it, and
sorry if I couldn't explain it well.

> all, if we document it.
>
> Optimisation of UPPER("") to "" is not related to this hack, and it  
> is not hack at all.

This is replicating CA-Clipper optimization behaviour for one  
specific case. The
solution is not complete and not future proof (hence the name "hack",  
but anyones
milage may vary). It's probably better than nothing though, and  
besides some
questions it creates and the problems it doesn't solve, it's okey.

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Mon Jun  4 08:22:42 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jun  4 08:22:46 2007
Subject: [Harbour] TODO TBrowse and status of other UI "components"
In-Reply-To: <9257026e0706040406h4666736cv14c14ed1fbcde048@mail.gmail.com>
References: <9257026e0706040340h77ba9d9bq391a8957bde0e14d@mail.gmail.com>
	<E7E2E837-772B-40B5-BE55-7CB3B060E463@syenar.hu>
	<9257026e0706040406h4666736cv14c14ed1fbcde048@mail.gmail.com>
Message-ID: <9257026e0706040522g33d8def8w7b4f3fe128989e1d@mail.gmail.com>

On 6/4/07, Lorenzo Fiorini <lorenzo.fiorini@gmail.com> wrote:

> I've attached them here.

Sorry, I forgot a small c source that's used in tget.prg

Probably it could be easily converted to prg code.

best regards,
Lorenzo
-------------- next part --------------
A non-text attachment was scrubbed...
Name: strdel.c
Type: text/x-csrc
Size: 3390 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070604/ae2109bd/strdel.bin
From dbtopas at dbtopas.lt  Mon Jun  4 08:55:21 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Jun  4 08:51:35 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <1E91D90D-2FF0-49A5-BC0E-205F6C213D65@syenar.hu>
References: <46631FDC.8010804@dbtopas.lt>	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>	<46634FDC.8030503@dbtopas.lt>	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>	<4663F04D.9010607@dbtopas.lt>	<967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>	<4663FCCF.5000808@dbtopas.lt>
	<1E91D90D-2FF0-49A5-BC0E-205F6C213D65@syenar.hu>
Message-ID: <46640BB9.7030906@dbtopas.lt>

Szak?ts Viktor wrote:
> See this code:
> ? SubStr( "hello", 2, 0 ) $ "hello"
> 
> Now it's compatible but if we'd implement SubStr() optimization
> in the future it would become incompatible with your latest changes.

Not true. My change is not related to the optimisation of
   ? SubStr( "hello", 2, 0 ) $ "hello"
the behaviour of this will be the same with or without my change.


>> The hack is optimisation of "" $ ... to .T. and AT("", ...) to 1.  And 
>> this hack is implemented to be Clipper bug compatible. And I  support 
>> the idea of droping it at
> 
> Well, no :) This is replicating exact (bug-compatible) CA-Clipper  
> behaviour.

Just as mine optimisation of UPPER(""). But the difference between them 
is that one of then tries to replicate buggy Clipper behaviuor, another 
is replicating valid Clipper behaviuor. Why replicating of valid 
behaviour (UPPER optimisation) is worse than replicating of invalid 
behaviour ("" $ ... optimisation)???


> I've told numerous examples and explanations, I can't iterate more on  
> it, and sorry if I couldn't explain it well.

Optimisation of "" $ ... to .T. could not solve all Clipper comatibility 
problems until we make our expression optimiser the same as Clipper's. 
I'm not sure it is necessery (why not optimise better than Clipper, if 
it is possible), and I'm not sure it's possible, because Clipper PCODE 
is different from Harbour's. I hope you agree with this, because I guess 
you said the same using these words:
> (which we probably won't be able to achieve unless we exactly replicate 
> the CA-Clipper optimization  scheme, but there is no promise or intent 
> (or even possibility) to exactly  replicate it



> This is replicating CA-Clipper optimization behaviour for one  specific 
> case. The solution is not complete and not future proof (hence the name "hack",  
> but anyones milage may vary). It's probably better than nothing though, and  besides 
> some questions it creates and the problems it doesn't solve, it's okey.

My change add optimisation of UPPER("") and I do not see the reason, why 
harbour could not do it. It is not related to "" $ ... . And Clipper 
comatibility of UPPER("") $ ... is only the side effect of this 
optimisation. This is indicated in change log.

So, I do not understand why not related optimisation you call hack. 
Please, look it like to any other optimisation, which does not have a 
purpose of solving Clipper bug "" $ ... .
I think optimisation of SUBSTR() is even more valuable than optimisation 
of UPPER, because it has more chance to exist in real code. Will you 
call optimisation of SUBSTR() buggy if it will break compability with 
Clipper's buggy "" $ ... .


I do not understand, why we don't find the same point of view... Will 
you call optimisation of UPPER() by "hack", if I introduce it because I 
use a lot of UPPER("") in my code and I do not know anything about 
Cliiper's "" $ ... optimisation?


Best regards,
Mindaugas
From lorenzo.fiorini at gmail.com  Mon Jun  4 07:06:12 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jun  4 09:01:26 2007
Subject: [Harbour] TODO TBrowse and status of other UI "components"
In-Reply-To: <E7E2E837-772B-40B5-BE55-7CB3B060E463@syenar.hu>
References: <9257026e0706040340h77ba9d9bq391a8957bde0e14d@mail.gmail.com>
	<E7E2E837-772B-40B5-BE55-7CB3B060E463@syenar.hu>
Message-ID: <9257026e0706040406h4666736cv14c14ed1fbcde048@mail.gmail.com>

On 6/4/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Can you post the actual files somewhere?

I've attached them here.

I've also added include/inkey.ch so you can take a look of it.

best regards,
Lorenzo
-------------- next part --------------
A non-text attachment was scrubbed...
Name: diff.tgz
Type: application/x-gzip
Size: 103945 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070604/e5c2d210/diff-0001.tgz
From harbour.01 at syenar.hu  Mon Jun  4 09:11:59 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jun  4 09:12:10 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <46640BB9.7030906@dbtopas.lt>
References: <46631FDC.8010804@dbtopas.lt>	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>	<46634FDC.8030503@dbtopas.lt>	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>	<4663F04D.9010607@dbtopas.lt>	<967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>	<4663FCCF.5000808@dbtopas.lt>
	<1E91D90D-2FF0-49A5-BC0E-205F6C213D65@syenar.hu>
	<46640BB9.7030906@dbtopas.lt>
Message-ID: <DFE929F4-B9BC-47F5-84C0-2599524F5BFD@syenar.hu>

> Not true. My change is not related to the optimisation of
>   ? SubStr( "hello", 2, 0 ) $ "hello"
> the behaviour of this will be the same with or without my change.

Sorry, the example should read like this:
?Upper( SubStr( "hello", 2, 0 ) ) $ "hello"

It will be because right now the same thing happens in both Harbour/ 
Clipper,
meaning that the $ operator will be evaluated at runtime and giving the
same bug-compatible result. If we implement SubStr() optimization,  
the above
code will be translated to Upper( "" ) _only_ in Harbour, which will  
be in turn
be optimized at compile time, while in Clipper the expression will  
still be
evaluated at runtime, thus the results will be different.

>>> The hack is optimisation of "" $ ... to .T. and AT("", ...) to  
>>> 1.  And this hack is implemented to be Clipper bug compatible.  
>>> And I  support the idea of droping it at
>> Well, no :) This is replicating exact (bug-compatible) CA-Clipper   
>> behaviour.
>
> Just as mine optimisation of UPPER(""). But the difference between  
> them is that one of then tries to replicate buggy Clipper  
> behaviuor, another is replicating valid Clipper behaviuor. Why  
> replicating of valid behaviour (UPPER optimisation) is worse than  
> replicating of invalid behaviour ("" $ ... optimisation)???

Because the latter solution is incomplete, meaning it only addresses one
possible combination where this incompatibilty can show up. It can also
create future problems.

>> I've told numerous examples and explanations, I can't iterate more  
>> on  it, and sorry if I couldn't explain it well.
>
> Optimisation of "" $ ... to .T. could not solve all Clipper  
> comatibility problems until we make our expression optimiser the  
> same as Clipper's. I'm not sure it is necessery (why not optimise  
> better than Clipper, if it is possible), and I'm not sure it's  
> possible, because Clipper PCODE is different from Harbour's. I hope  
> you agree with this, because I guess you said the same using these  
> words:
>> (which we probably won't be able to achieve unless we exactly  
>> replicate the CA-Clipper optimization  scheme, but there is no  
>> promise or intent (or even possibility) to exactly  replicate it

Yes right, I also believe that in Harbour we should not replicate  
exact optimizer behaviour, that is
why there will never be possible to hide all $/At() differences which  
is caused by being
bug-compatible at low level. Your patch hides one such occasions.

> y change add optimisation of UPPER("") and I do not see the reason,  
> why harbour could not do it. It is not related to "" $ ... . And  
> Clipper comatibility of UPPER("") $ ... is only the side effect of  
> this optimisation. This is indicated in change log.

I never said it's not compatible, I said that it's not complete.
A feature or solution which is not complete might be called a hack,
but again this is my interpretation only.

> So, I do not understand why not related optimisation you call hack.  
> Please, look it like to any other optimisation, which does not have  
> a purpose of solving Clipper bug "" $ ... .
> I think optimisation of SUBSTR() is even more valuable than  
> optimisation of UPPER, because it has more chance to exist in real  
> code. Will you call optimisation of SUBSTR() buggy if it will break  
> compability with Clipper's buggy "" $ ... .

SUBSTR() optimization is a fully different matter, and I'd also agree  
that it would
be useful to add it. But again, this would just make the current ""/At 
() issue
wider, with new code being incompatible. See my first (and now  
corrected example).

> I do not understand, why we don't find the same point of view...  
> Will you call optimisation of UPPER() by "hack", if I introduce it  
> because I use a lot of UPPER("") in my code and I do not know  
> anything about Cliiper's "" $ ... optimisation?

I'd be really interested to know why your code has UPPER("") (with a  
literal!),
no pun intented, I'd really like to know. Even more so, because I  
couldn't
find any real examples so far.

(another that comes to mind is the macro compiler, where generated code
might actually have UPPER("") (and similar) in it, to tell the truth  
I've
never tested CA-Clipper in this regard, but I'll try it this evening,  
out of
couriosity).

Brgds,
Viktor

From druzus at priv.onet.pl  Mon Jun  4 09:41:03 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun  4 09:41:40 2007
Subject: [Harbour] Harbour vs. xHarbour
In-Reply-To: <018e01c7a533$5f694c80$0100a8c0@emag>
References: <mg636392g7em8a1e5li02rg29p0ugi8l4j@4ax.com>
	<018e01c7a533$5f694c80$0100a8c0@emag>
Message-ID: <20070604134103.GA21132@localhost.localdomain>

On Sat, 02 Jun 2007, Enrico Maria Giordano wrote:
> >> xHarbour build 0.99.71 Intl. (SimpLex), Windows XP Professional 5.01.2600
> >> s:=f4() ->                                           12.66
> >> Harbour devel build 1.1-0 Intl., Windows XP 5.1.2600 Service Pack 2
> >> s:=f4() ->                                           80.03
> >Why this huge difference ?
> I don't know. Przemek?

Such situation can happen in both Harbour and xHarbour compilers.
C compiler allocates memory from system in bigger chunks and
then free it when decide that it's not longer necessary. Seems
that such allocation/deallocation in Windows sometimes is very expensive.
In these test 40000 bytes is allocated and freed in a loop. Sometimes
it activates some additional logic in low level memory manager code
which consumes a lot of time and in such cases we have such results.
As I said it may happen also in xHarbour and in different C compilers,
f.e. recently Lorenzo reported here similar huge results in MinGW build.
I said that it should be possible to exploit these problem also in BCC
build and you have just done it. Unfortunately it's out of our control
and the slowness is somewhere in low level Windows code. As workaround
we can create our own memory manager which will allocate/free system
memory much seldom then the default BCC one. F.e. such memory manager
is used by OpenWatcom and these is the only one C compiler where I was
not able to reproduce this problem when I was making some tests with
Windows and xHarbour few years ago.

best regards,
Przemek
From druzus at priv.onet.pl  Mon Jun  4 09:50:06 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun  4 09:50:40 2007
Subject: [Harbour] ChangeLog 2007-06-04 15:50 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070604135006.GB21132@localhost.localdomain>

2007-06-04 15:50 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/make_gnu.sh
  * harbour/make_tgz.sh
  * harbour/bin/hb-func.sh
  * harbour/bin/postinst.sh
    * HPUX build cleanup

  * harbour/source/debug/dbgentry.c
    * cast isalpha() and isdigit() parameters to unsigned char

  * harbour/source/rtl/hbinet.c
  * harbour/source/rtl/gtstd/gtstd.c
    * HPUX build cleanup

best regards,
Przemek
From gabor.salai at euroherc.hr  Mon Jun  4 11:21:32 2007
From: gabor.salai at euroherc.hr (gabor salai [intranet242])
Date: Mon Jun  4 11:20:03 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
References: <46631FDC.8010804@dbtopas.lt>	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>	<46634FDC.8030503@dbtopas.lt>	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>	<4663F04D.9010607@dbtopas.lt>	<967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>	<4663FCCF.5000808@dbtopas.lt><1E91D90D-2FF0-49A5-BC0E-205F6C213D65@syenar.hu><46640BB9.7030906@dbtopas.lt>
	<DFE929F4-B9BC-47F5-84C0-2599524F5BFD@syenar.hu>
Message-ID: <01d101c7a6bc$656aa9a0$7e00520a@euroherc.ba>

not being my bussiness, but why to force compiler to take care of "0"
constant in parameter list of one of hundreds of functions?
and how to optimize if "0" is passed as zero valued variable at runtime? and
what with other functions?

if compile time optimization for this function is realy neccessary, isn't it
better to optimise through prepocessor using special translation?


----- Original Message -----
From: "Szak?ts Viktor" <harbour.01@syenar.hu>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Monday, June 04, 2007 3:11 PM
Subject: Re: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas


>
> Sorry, the example should read like this:
> ?Upper( SubStr( "hello", 2, 0 ) ) $ "hello"
>


From dbtopas at dbtopas.lt  Mon Jun  4 11:31:40 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Jun  4 11:27:47 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <01d101c7a6bc$656aa9a0$7e00520a@euroherc.ba>
References: <46631FDC.8010804@dbtopas.lt>	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>	<46634FDC.8030503@dbtopas.lt>	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>	<4663F04D.9010607@dbtopas.lt>	<967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>	<4663FCCF.5000808@dbtopas.lt><1E91D90D-2FF0-49A5-BC0E-205F6C213D65@syenar.hu><46640BB9.7030906@dbtopas.lt>	<DFE929F4-B9BC-47F5-84C0-2599524F5BFD@syenar.hu>
	<01d101c7a6bc$656aa9a0$7e00520a@euroherc.ba>
Message-ID: <4664305C.1070500@dbtopas.lt>

gabor salai [intranet242] wrote:
> ----- Original Message -----
> From: "Szak?ts Viktor" <harbour.01@syenar.hu>
> To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
> Sent: Monday, June 04, 2007 3:11 PM
> Subject: Re: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
> 
>>Sorry, the example should read like this:
>>?Upper( SubStr( "hello", 2, 0 ) ) $ "hello"


Hmmm... It seems I do not receive some message :(  I can not find the 
cited Viktor's message nor in Inbox, nor in Trash, or Junk folders. Can 
anyone resend it to my email address? Thanks.
Or is this mailing list available via WWW?


Best regards,
Mindaugas
From druzus at priv.onet.pl  Mon Jun  4 11:34:49 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun  4 11:35:24 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <4664305C.1070500@dbtopas.lt>
References: <46631FDC.8010804@dbtopas.lt>
	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>
	<46634FDC.8030503@dbtopas.lt>
	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>
	<4663F04D.9010607@dbtopas.lt>
	<967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>
	<DFE929F4-B9BC-47F5-84C0-2599524F5BFD@syenar.hu>
	<01d101c7a6bc$656aa9a0$7e00520a@euroherc.ba>
	<4664305C.1070500@dbtopas.lt>
Message-ID: <20070604153449.GA26992@localhost.localdomain>

On Mon, 04 Jun 2007, Mindaugas Kavaliauskas wrote:
> Or is this mailing list available via WWW?

    http://lists.harbour-project.org/pipermail/harbour

best regards,
Przemek
From dbtopas at dbtopas.lt  Mon Jun  4 12:15:40 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Jun  4 12:11:48 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <4664305C.1070500@dbtopas.lt>
References: <46631FDC.8010804@dbtopas.lt>	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>	<46634FDC.8030503@dbtopas.lt>	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>	<4663F04D.9010607@dbtopas.lt>	<967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>	<4663FCCF.5000808@dbtopas.lt><1E91D90D-2FF0-49A5-BC0E-205F6C213D65@syenar.hu><46640BB9.7030906@dbtopas.lt>	<DFE929F4-B9BC-47F5-84C0-2599524F5BFD@syenar.hu>	<01d101c7a6bc$656aa9a0$7e00520a@euroherc.ba>
	<4664305C.1070500@dbtopas.lt>
Message-ID: <46643AAC.2010809@dbtopas.lt>

Hello,


perhaps I was not born to understood, why some not buggy optimisations 
like SUBSTR() (which breaks SUBSTR("hello", 2, 0) $ "test") is OK, some 
other not buggy like UPPER() (which do not breaks UPPER("") $ "test") is 
bad, and some buggy like "" $ "test" is also OK.

Sometimes I try to make things better, even if I do not need it at all 
(like UPPER("") -> ""). But if it takes me a lot of time (about 40 
minutes for trying to put my thoughts the right way in a foreign 
language per letter) I give up.

It is much more quick to change source for me:
2007-06-04 19:11 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * harbour/include/hbexprop.h
   * harbour/include/hbexprb.c
   * harbour/source/common/expropt2.c
      - removed UPPER("") optimisation because of ... ?


Let's look at the bright side of it: the less we optimise, the faster 
compiler is.


Best regards,
Mindaugas


>> Not true. My change is not related to the optimisation of
>>   ? SubStr( "hello", 2, 0 ) $ "hello"
>> the behaviour of this will be the same with or without my change.
> 
> Sorry, the example should read like this:
> ?Upper( SubStr( "hello", 2, 0 ) ) $ "hello"
> 
> It will be because right now the same thing happens in both Harbour/ 
> Clipper,
> meaning that the $ operator will be evaluated at runtime and giving the
> same bug-compatible result. If we implement SubStr() optimization,  
> the above
> code will be translated to Upper( "" ) _only_ in Harbour, which will  
> be in turn
> be optimized at compile time, while in Clipper the expression will  
> still be
> evaluated at runtime, thus the results will be different.
> 
>>>> The hack is optimisation of "" $ ... to .T. and AT("", ...) to  
>>>> 1.  And this hack is implemented to be Clipper bug compatible.  
>>>> And I  support the idea of droping it at
>>> Well, no :) This is replicating exact (bug-compatible) CA-Clipper   
>>> behaviour.
>>
>> Just as mine optimisation of UPPER(""). But the difference between  
>> them is that one of then tries to replicate buggy Clipper  
>> behaviuor, another is replicating valid Clipper behaviuor. Why  
>> replicating of valid behaviour (UPPER optimisation) is worse than  
>> replicating of invalid behaviour ("" $ ... optimisation)???
> 
> Because the latter solution is incomplete, meaning it only addresses one
> possible combination where this incompatibilty can show up. It can also
> create future problems.
> 
>>> I've told numerous examples and explanations, I can't iterate more  
>>> on  it, and sorry if I couldn't explain it well.
>>
>> Optimisation of "" $ ... to .T. could not solve all Clipper  
>> comatibility problems until we make our expression optimiser the  
>> same as Clipper's. I'm not sure it is necessery (why not optimise  
>> better than Clipper, if it is possible), and I'm not sure it's  
>> possible, because Clipper PCODE is different from Harbour's. I hope  
>> you agree with this, because I guess you said the same using these  
>> words:
>>> (which we probably won't be able to achieve unless we exactly  
>>> replicate the CA-Clipper optimization  scheme, but there is no  
>>> promise or intent (or even possibility) to exactly  replicate it
> 
> Yes right, I also believe that in Harbour we should not replicate  
> exact optimizer behaviour, that is
> why there will never be possible to hide all $/At() differences which  
> is caused by being
> bug-compatible at low level. Your patch hides one such occasions.
> 
>> y change add optimisation of UPPER("") and I do not see the reason,  
>> why harbour could not do it. It is not related to "" $ ... . And  
>> Clipper comatibility of UPPER("") $ ... is only the side effect of  
>> this optimisation. This is indicated in change log.
> 
> I never said it's not compatible, I said that it's not complete.
> A feature or solution which is not complete might be called a hack,
> but again this is my interpretation only.
> 
>> So, I do not understand why not related optimisation you call hack.  
>> Please, look it like to any other optimisation, which does not have  
>> a purpose of solving Clipper bug "" $ ... .
>> I think optimisation of SUBSTR() is even more valuable than  
>> optimisation of UPPER, because it has more chance to exist in real  
>> code. Will you call optimisation of SUBSTR() buggy if it will break  
>> compability with Clipper's buggy "" $ ... .
> 
> SUBSTR() optimization is a fully different matter, and I'd also agree  
> that it would
> be useful to add it. But again, this would just make the current ""/At 
> () issue
> wider, with new code being incompatible. See my first (and now  
> corrected example).
> 
>> I do not understand, why we don't find the same point of view...  
>> Will you call optimisation of UPPER() by "hack", if I introduce it  
>> because I use a lot of UPPER("") in my code and I do not know  
>> anything about Cliiper's "" $ ... optimisation?
> 
> I'd be really interested to know why your code has UPPER("") (with a  
> literal!),
> no pun intented, I'd really like to know. Even more so, because I  
> couldn't
> find any real examples so far.
> 
> (another that comes to mind is the macro compiler, where generated code
> might actually have UPPER("") (and similar) in it, to tell the truth  
> I've
> never tested CA-Clipper in this regard, but I'll try it this evening,  
> out of
> couriosity).
> 
> Brgds,
> Viktor

From harbour.01 at syenar.hu  Mon Jun  4 12:24:39 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jun  4 12:24:53 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <01d101c7a6bc$656aa9a0$7e00520a@euroherc.ba>
References: <46631FDC.8010804@dbtopas.lt>	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>	<46634FDC.8030503@dbtopas.lt>	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>	<4663F04D.9010607@dbtopas.lt>	<967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>	<4663FCCF.5000808@dbtopas.lt><1E91D90D-2FF0-49A5-BC0E-205F6C213D65@syenar.hu><46640BB9.7030906@dbtopas.lt>
	<DFE929F4-B9BC-47F5-84C0-2599524F5BFD@syenar.hu>
	<01d101c7a6bc$656aa9a0$7e00520a@euroherc.ba>
Message-ID: <0B6173ED-09AC-4722-8DB9-C86AA9A80195@syenar.hu>

> not being my bussiness, but why to force compiler to take care of "0"
> constant in parameter list of one of hundreds of functions?
> and how to optimize if "0" is passed as zero valued variable at  
> runtime? and
> what with other functions?

There is a certain cost of such compiler optimization, which is
not much at this point, but would be noticable if we'd start to add
hundreds of functions. It can also have side effects, and from a
language design POV it makes the optimized function fully burned
into the compiler. Meaning that there is no way to overload it
by another implementation, or extending it without syncing it with
the compiler. So original Clipper designer probably took some
obviously often used functions as targets for optimization. ASC(),
CHR() and LEN() are mostly (or very oftenly) called with a constant
parameter, so it indeed made sense.

As for the rest, we need to carefully check "typical" app level
code for new possible candidates. (One of these were STOD()
which is also typically called with a constant). If such optimization
isn't justified by real-life code, the development and maintenance
efforts (and downsides) simply isn't worth it.

BTW, CA-Cl*pper has seperate pcodes for SETPOS(), ROW(), COL(),
to speed them up. It's a different kind of optimization, but we might
also consider implementing these. (naturally, only CUI apps would
benefit)

I for one could cite a proper candidate for compile-time optimization,
maybe SPACE() or REPLICATE(), but they are not very oftenly used.
PAD*(), LEFT() and RIGHT() might be good candidates, but also
not terribly often called.

> if compile time optimization for this function is realy neccessary,  
> isn't it
> better to optimise through prepocessor using special translation?

That seems to be an easier and cleaner workaround which can
be done by anyone on app level if the problem seems to be present
in app code. Good idea.

I still can't really imagine any real-life code involved nor have I seen
any examples to have a broader perspective, so it's hard to tell if this
would solve the problem for those involved (and if not, why not).

Brgds,
Viktor

>
>
> ----- Original Message -----
> From: "Szak?ts Viktor" <harbour.01@syenar.hu>
> To: "Harbour Project Main Developer List." <harbour@harbour- 
> project.org>
> Sent: Monday, June 04, 2007 3:11 PM
> Subject: Re: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas  
> Kavaliauskas
>
>
>>
>> Sorry, the example should read like this:
>> ?Upper( SubStr( "hello", 2, 0 ) ) $ "hello"
>>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Mon Jun  4 12:35:57 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun  4 12:36:32 2007
Subject: [Harbour] Harbour vs. xHarbour
In-Reply-To: <011701c7a526$7ce3e980$0100a8c0@emag>
References: <9257026e0706020750g53b7d840ibc3fa117cc34adc@mail.gmail.com>
	<011701c7a526$7ce3e980$0100a8c0@emag>
Message-ID: <20070604163557.GA586@localhost.localdomain>

On Sat, 02 Jun 2007, Enrico Maria Giordano wrote:
> >Which kind of applications?
> Business management for Windows.
> >Which flags do you use in C_USR and PRG_USR?
> In building Harbour:
> SET C_USR=-DHB_FM_STATISTICS_OFF
> SET PRG_USR=-l
> In building my apps:
> SET HARBOURCMD=/a /es2 /gc0 /m /n /q /w

If you are using BCC then you can use -a4 switch - it will reduce
the memory used by internal Harbour structures and increase a
little bit speed.

In pure PCODE evaluation Harbour is about 20-30% faster then xHarbour.
Strings in Harbour uses only one memory block when in xHarbour two
what also gives some speed improvements. In Harbour for <op>= and ++/--
operations different PCODE is generated and it's guarantied that <op>
will be executed only once, f.e. try this code:

    proc main()
    local a:={1,2,3}, i:=1
    ? a[++i]++
    ? a[1], a[2], a[3], i
    ? a[somefunc()]++
    return
    func somefunc()
    ? "somefunc()"
    return 2

In some cases it may also cause speed difference.
Harbour also needs less memory then xHarbour for HB_ITEM and other
internal structures and these can also cause speed difference.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Jun  4 12:38:06 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jun  4 12:38:19 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <46643AAC.2010809@dbtopas.lt>
References: <46631FDC.8010804@dbtopas.lt>	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>	<46634FDC.8030503@dbtopas.lt>	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>	<4663F04D.9010607@dbtopas.lt>	<967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>	<4663FCCF.5000808@dbtopas.lt><1E91D90D-2FF0-49A5-BC0E-205F6C213D65@syenar.hu><46640BB9.7030906@dbtopas.lt>	<DFE929F4-B9BC-47F5-84C0-2599524F5BFD@syenar.hu>	<01d101c7a6bc$656aa9a0$7e00520a@euroherc.ba>
	<4664305C.1070500@dbtopas.lt> <46643AAC.2010809@dbtopas.lt>
Message-ID: <7FBDE39B-998A-4303-B3A9-43C0372D2F8D@syenar.hu>

> perhaps I was not born to understood, why some not buggy  
> optimisations like SUBSTR() (which breaks SUBSTR("hello", 2, 0) $  
> "test") is OK, some other not buggy like UPPER() (which do not  
> breaks UPPER("") $ "test") is bad, and some buggy like "" $ "test"  
> is also OK.

I don't think we're talking about buggy optimizations. Your  
implementation
is (was) not buggy (as I wrote), SUBSTR() optimization by itself is  
not buggy.
But both create different - and hard to describe - incompatible cases  
between
Harbour and CA-Clipper, that's all.

Since there is no perfect solution for this $/At() + optimizer  
interaction problem,
I'd think it's better to leave it there in its pure form in a  
relatively easy to
document way, than start to workaround it and have it solved  
partially in
a not-so-easily documentable way.

> Sometimes I try to make things better, even if I do not need it at  
> all (like UPPER("") -> ""). But if it takes me a lot of time (about  
> 40 minutes for trying to put my thoughts the right way in a foreign  
> language per letter) I give up.

Okey, I understand what you mean, and I perfectly got your intention
(just as your other useful contributions) positively, don't get me  
wrong.

> It is much more quick to change source for me:
> 2007-06-04 19:11 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/ 
> dbtopas.lt)
>   * harbour/include/hbexprop.h
>   * harbour/include/hbexprb.c
>   * harbour/source/common/expropt2.c
>      - removed UPPER("") optimisation because of ... ?
>
> Let's look at the bright side of it: the less we optimise, the  
> faster compiler is.

Well, that's granted, and: thank you.

(It's unfortunate we didn't hear other opinions, especially from someone
actually hit by this problem in practice).

Brgds,
Viktor



From e.m.giordano at emagsoftware.it  Mon Jun  4 12:40:48 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jun  4 12:41:27 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
References: <46631FDC.8010804@dbtopas.lt>	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>	<46634FDC.8030503@dbtopas.lt>	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>	<4663F04D.9010607@dbtopas.lt>	<967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>	<4663FCCF.5000808@dbtopas.lt><1E91D90D-2FF0-49A5-BC0E-205F6C213D65@syenar.hu><46640BB9.7030906@dbtopas.lt><DFE929F4-B9BC-47F5-84C0-2599524F5BFD@syenar.hu><01d101c7a6bc$656aa9a0$7e00520a@euroherc.ba>
	<0B6173ED-09AC-4722-8DB9-C86AA9A80195@syenar.hu>
Message-ID: <000401c7a6c7$1b02a790$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: lunedi 4 giugno 2007 18.24
Oggetto: Re: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas


> So original Clipper designer probably took some
> obviously often used functions as targets for optimization. ASC(),
> CHR() and LEN() are mostly (or very oftenly) called with a constant
> parameter, so it indeed made sense.

I don't think this is true. Specially LEN() seems to have very little sense if 
called with a literal string.

> As for the rest, we need to carefully check "typical" app level
> code for new possible candidates. (One of these were STOD()
> which is also typically called with a constant).

xBase idiomatic: CTOD( "" ) to initialize an empty date.

> I for one could cite a proper candidate for compile-time optimization,
> maybe SPACE() or REPLICATE(), but they are not very oftenly used.
> PAD*(), LEFT() and RIGHT() might be good candidates, but also
> not terribly often called.

I have *a lot* of SPACE(), REPLICATE(), PAD*(), LEFT() and RIGHT() calls in my 
code and I can't imagine how a programmer can live without them (not only in 
xBase but also in any other programming language).

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Mon Jun  4 12:44:53 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jun  4 12:45:30 2007
Subject: [Harbour] Harbour vs. xHarbour
References: <9257026e0706020750g53b7d840ibc3fa117cc34adc@mail.gmail.com><011701c7a526$7ce3e980$0100a8c0@emag>
	<20070604163557.GA586@localhost.localdomain>
Message-ID: <000901c7a6c7$ad524060$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: lunedi 4 giugno 2007 18.35
Oggetto: Re: [Harbour] Harbour vs. xHarbour


> If you are using BCC then you can use -a4 switch - it will reduce
> the memory used by internal Harbour structures and increase a
> little bit speed.

-a4 is the default for BCC55.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From harbour.01 at syenar.hu  Mon Jun  4 12:50:37 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jun  4 12:50:47 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <000401c7a6c7$1b02a790$0100a8c0@emag>
References: <46631FDC.8010804@dbtopas.lt>	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>	<46634FDC.8030503@dbtopas.lt>	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>	<4663F04D.9010607@dbtopas.lt>	<967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>	<4663FCCF.5000808@dbtopas.lt><1E91D90D-2FF0-49A5-BC0E-205F6C213D65@syenar.hu><46640BB9.7030906@dbtopas.lt><DFE929F4-B9BC-47F5-84C0-2599524F5BFD@syenar.hu><01d101c7a6bc$656aa9a0$7e00520a@euroherc.ba>
	<0B6173ED-09AC-4722-8DB9-C86AA9A80195@syenar.hu>
	<000401c7a6c7$1b02a790$0100a8c0@emag>
Message-ID: <C7A828BD-A342-4D95-888C-06272819CF78@syenar.hu>

>> So original Clipper designer probably took some
>> obviously often used functions as targets for optimization. ASC(),
>> CHR() and LEN() are mostly (or very oftenly) called with a constant
>> parameter, so it indeed made sense.
>
> I don't think this is true. Specially LEN() seems to have very  
> little sense if called with a literal string.

You may be right. It can surely happen sometimes in real-world
code, the frequency can be indeed argued. But I hope you see
my point anyway.

>> As for the rest, we need to carefully check "typical" app level
>> code for new possible candidates. (One of these were STOD()
>> which is also typically called with a constant).
>
> xBase idiomatic: CTOD( "" ) to initialize an empty date.

Right, good example.

>> I for one could cite a proper candidate for compile-time  
>> optimization,
>> maybe SPACE() or REPLICATE(), but they are not very oftenly used.
>> PAD*(), LEFT() and RIGHT() might be good candidates, but also
>> not terribly often called.
>
> I have *a lot* of SPACE(), REPLICATE(), PAD*(), LEFT() and RIGHT()  
> calls in my code and I can't imagine how a programmer can live  
> without them (not only in xBase but also in any other programming  
> language).

Well, for sure my codebase doesn't cover "typical" usage,
so any more input is welcome :)

If you have lots of these and even _call them with literal-only  
arguments_,
and maybe if others jump in to give some more input we could
make a good decision. Optimizing these is just a matter of discussion.

Brgds,
Viktor



From toninhofwi at yahoo.com.br  Mon Jun  4 12:53:20 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Jun  4 12:53:58 2007
Subject: [Harbour] Harbour vs. xHarbour
In-Reply-To: <000901c7a6c7$ad524060$0100a8c0@emag>
References: <9257026e0706020750g53b7d840ibc3fa117cc34adc@mail.gmail.com><011701c7a526$7ce3e980$0100a8c0@emag>
	<20070604163557.GA586@localhost.localdomain>
	<000901c7a6c7$ad524060$0100a8c0@emag>
Message-ID: <3qg8639d59upub1a7ohdgsnv0actnr0hld@4ax.com>

>> If you are using BCC then you can use -a4 switch - it will reduce
>> the memory used by internal Harbour structures and increase a
>> little bit speed.
>
>-a4 is the default for BCC55.

Yes, and -a8 is the default for BCC 5.8.2

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From dbtopas at dbtopas.lt  Mon Jun  4 12:58:59 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Jun  4 12:55:05 2007
Subject: [Harbour] Harbour vs. xHarbour
In-Reply-To: <000901c7a6c7$ad524060$0100a8c0@emag>
References: <9257026e0706020750g53b7d840ibc3fa117cc34adc@mail.gmail.com><011701c7a526$7ce3e980$0100a8c0@emag>	<20070604163557.GA586@localhost.localdomain>
	<000901c7a6c7$ad524060$0100a8c0@emag>
Message-ID: <466444D3.1020000@dbtopas.lt>

> -a4 is the default for BCC55.

According to docs it is default, but BCC55 test give different results.


Best regards,
Mindaugas


-------- Original Message --------
Date: Tue, 19 Sep 2006 15:35:45 +0300,	Tue, 19 Sep 2006 15:36:08 +0300
From: Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>
To: Harbour Project Main Developer List. <harbour@harbour-project.org>
Subject: Re: [Harbour] Re: hb_xgrab() and 96


Przemyslaw Czerpak wrote:
 > FIrst I'd like to note that in Harbour HB_ITEM size is 16
 > unless you are not using compilers like BCC with -a8 switch.
 > If you does it then please remove -a8 because it reduce HVM
 > performance and increase memory usage. If you do not make it
 > then you should look for 6 elements arrays.
 > In xHarbour item size is bigger and it's 20 in mos compilers and
 > with BCC without -a8 and 24 with BCC and -a8.
 > So 4 elements will be only in xHarbour.

Hi,


I'm using BCC and I build harbour CVS using standard make_b32.bat. So,
if -a8 flag exists, it should be somewhere in makefile.bc or config/*.*,
but I can not find it.

But source:
PROC main()
   ? HB_ITEM_SIZE()
RETURN
and:
#define HB_NO_DEFAULT_API_MACROS
#include "hbvmopt.h"
#include "hbapi.h"

HB_FUNC( HB_ITEM_SIZE )
{
   hb_retni( sizeof(HB_ITEM) );
}

prints: 24.

The above .c source is compiled:
c:\bcc55\BIN\bcc32 -c -d -OS -X  -Lc:\harbourcvs\lib
-Ic:\harbourcvs\include;c:\bcc55\include -otest45a test45a.c

and -a8 flags is not specified. Adding -a4 flag changes sizeof(HB_ITEM)
to 16. I've printed shell variables, there is no any CFLAGS variables
with hidden -a8. There is no such flag in bcc32.cfg (which is in the
same forlder as bcc32.exe).


To be sure that alignment is not affected by some includes (possiblly
with #pragma pack()), I've created a self contained code:

#include "stdio.h"

struct ab_struDouble
{
    unsigned short length;
    unsigned short decimal;
    double value;
};

typedef struct
{
    unsigned int type;
    union
    {
       struct ab_struDouble    asDouble;
    } item;
} AB_ITEM;

void main()
{
   printf( "Size of AB_ITEM: %d\n", sizeof(AB_ITEM) );
}


It shows 24, if compiled without specified alignment. If I force
aligment using flag -a4 (it is default according to bcc32
documentation!), size of AB_ITEM is 16.



Best regards,
Mindaugas
From druzus at priv.onet.pl  Mon Jun  4 12:54:56 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun  4 12:55:32 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <000401c7a6c7$1b02a790$0100a8c0@emag>
References: <46631FDC.8010804@dbtopas.lt>
	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>
	<46634FDC.8030503@dbtopas.lt>
	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>
	<4663F04D.9010607@dbtopas.lt>
	<967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>
	<0B6173ED-09AC-4722-8DB9-C86AA9A80195@syenar.hu>
	<000401c7a6c7$1b02a790$0100a8c0@emag>
Message-ID: <20070604165456.GB586@localhost.localdomain>

On Mon, 04 Jun 2007, Enrico Maria Giordano wrote:
> >So original Clipper designer probably took some
> >obviously often used functions as targets for optimization. ASC(),
> >CHR() and LEN() are mostly (or very oftenly) called with a constant
> >parameter, so it indeed made sense.
> I don't think this is true. Specially LEN() seems to have very little sense 
> if called with a literal string.

Preprocessor. Please remeber that LEN( "..." ) can be result of
some preprocessed commands, f.e.:

    #xtranslate SPACES(<x>) => space( len( <x> ) )
    ? "[" + spaces( "1234567890" ) + "]"


> >As for the rest, we need to carefully check "typical" app level
> >code for new possible candidates. (One of these were STOD()
> >which is also typically called with a constant).
> xBase idiomatic: CTOD( "" ) to initialize an empty date.

Yes, these is very often used code. I'll add optimization for it.

> >I for one could cite a proper candidate for compile-time optimization,
> >maybe SPACE() or REPLICATE(), but they are not very oftenly used.
> >PAD*(), LEFT() and RIGHT() might be good candidates, but also
> >not terribly often called.
> I have *a lot* of SPACE(), REPLICATE(), PAD*(), LEFT() and RIGHT() calls in 
> my code and I can't imagine how a programmer can live without them (not 
> only in xBase but also in any other programming language).

But how many of them are used with constant parameters so they can be
calculated at runtime?
Maybe SPACE() and REPL() can be replaced by reasonable short strings
though in some cases it may cause slownes. F.e.:
        s:=space(5)
        fread(h,@s,5)
if we replace dynamic string by static one in the code above then
later inside FREAD() the dynamic one will have to created.

best regards,
Przemek
From druzus at priv.onet.pl  Mon Jun  4 12:56:43 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun  4 12:57:19 2007
Subject: [Harbour] Harbour vs. xHarbour
In-Reply-To: <000901c7a6c7$ad524060$0100a8c0@emag>
References: <20070604163557.GA586@localhost.localdomain>
	<000901c7a6c7$ad524060$0100a8c0@emag>
Message-ID: <20070604165643.GC586@localhost.localdomain>

On Mon, 04 Jun 2007, Enrico Maria Giordano wrote:
> >If you are using BCC then you can use -a4 switch - it will reduce
> >the memory used by internal Harbour structures and increase a
> >little bit speed.
> -a4 is the default for BCC55.

You forgot that tests showed that default is -a8 not -a4.
We were checking it in last year.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Mon Jun  4 12:57:41 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jun  4 12:58:18 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
References: <46631FDC.8010804@dbtopas.lt>	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>	<46634FDC.8030503@dbtopas.lt>	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>	<4663F04D.9010607@dbtopas.lt>	<967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>	<4663FCCF.5000808@dbtopas.lt><1E91D90D-2FF0-49A5-BC0E-205F6C213D65@syenar.hu><46640BB9.7030906@dbtopas.lt><DFE929F4-B9BC-47F5-84C0-2599524F5BFD@syenar.hu><01d101c7a6bc$656aa9a0$7e00520a@euroherc.ba><0B6173ED-09AC-4722-8DB9-C86AA9A80195@syenar.hu><000401c7a6c7$1b02a790$0100a8c0@emag>
	<C7A828BD-A342-4D95-888C-06272819CF78@syenar.hu>
Message-ID: <003501c7a6c9$77003c90$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: luned? 4 giugno 2007 18.50
Oggetto: Re: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas


> You may be right. It can surely happen sometimes in real-world
> code, the frequency can be indeed argued. But I hope you see
> my point anyway.

Yes, sure.

> If you have lots of these and even _call them with literal-only  arguments_,

No, I have a lots of those calls but only REPLICATE() makes sense (and is used 
often) with a literal as the first parameter.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From lorenzo.fiorini at gmail.com  Mon Jun  4 13:09:11 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jun  4 13:09:14 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <20070604165456.GB586@localhost.localdomain>
References: <46631FDC.8010804@dbtopas.lt>
	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>
	<46634FDC.8030503@dbtopas.lt>
	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>
	<4663F04D.9010607@dbtopas.lt>
	<967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>
	<0B6173ED-09AC-4722-8DB9-C86AA9A80195@syenar.hu>
	<000401c7a6c7$1b02a790$0100a8c0@emag>
	<20070604165456.GB586@localhost.localdomain>
Message-ID: <9257026e0706041009p18aed5ex73ecb5bcf9dd6a9b@mail.gmail.com>

On 6/4/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> > xBase idiomatic: CTOD( "" ) to initialize an empty date.
>
> Yes, these is very often used code. I'll add optimization for it.

Just a question: is there any reason why dates don't have a literal "syntax"?

I mean why never existed sth like #2007-06-04# or {^20070604} instead
of ctod( "04/06/2007" )?.

It is not a request but sth I've always wanted to ask to Clipper developers :)

best regards,
Lorenzo
From harbour.01 at syenar.hu  Mon Jun  4 13:15:46 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jun  4 13:15:49 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <003501c7a6c9$77003c90$0100a8c0@emag>
References: <46631FDC.8010804@dbtopas.lt>	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>	<46634FDC.8030503@dbtopas.lt>	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>	<4663F04D.9010607@dbtopas.lt>	<967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>	<4663FCCF.5000808@dbtopas.lt><1E91D90D-2FF0-49A5-BC0E-205F6C213D65@syenar.hu><46640BB9.7030906@dbtopas.lt><DFE929F4-B9BC-47F5-84C0-2599524F5BFD@syenar.hu><01d101c7a6bc$656aa9a0$7e00520a@euroherc.ba><0B6173ED-09AC-4722-8DB9-C86AA9A80195@syenar.hu><000401c7a6c7$1b02a790$0100a8c0@emag>
	<C7A828BD-A342-4D95-888C-06272819CF78@syenar.hu>
	<003501c7a6c9$77003c90$0100a8c0@emag>
Message-ID: <D6282CF1-058B-4708-BEB1-E52B49ADD181@syenar.hu>

>> If you have lots of these and even _call them with literal-only   
>> arguments_,
>
> No, I have a lots of those calls but only REPLICATE() makes sense  
> (and is used often) with a literal as the first parameter.

We need to find calls where all arguments are contants
to be able to optimize at compile-time.

Przemek's SPACE()/FREAD() example shows that's it's even more
complicated to find a proper canditate, as:

a := PadR( "", 100 )
FRead( fhnd, @a, 100 )

is supposed to work too, so PAD*()/TRIM()/REPLICATE()/SPACE()/SUBSTR()
are all out of the question.

Brgds,
Viktor

From druzus at priv.onet.pl  Mon Jun  4 13:15:15 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun  4 13:15:52 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <9257026e0706041009p18aed5ex73ecb5bcf9dd6a9b@mail.gmail.com>
References: <46631FDC.8010804@dbtopas.lt>
	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>
	<46634FDC.8030503@dbtopas.lt>
	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>
	<4663F04D.9010607@dbtopas.lt>
	<967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>
	<0B6173ED-09AC-4722-8DB9-C86AA9A80195@syenar.hu>
	<000401c7a6c7$1b02a790$0100a8c0@emag>
	<20070604165456.GB586@localhost.localdomain>
	<9257026e0706041009p18aed5ex73ecb5bcf9dd6a9b@mail.gmail.com>
Message-ID: <20070604171515.GA3977@localhost.localdomain>

On Mon, 04 Jun 2007, Lorenzo Fiorini wrote:
> >> xBase idiomatic: CTOD( "" ) to initialize an empty date.
> >Yes, these is very often used code. I'll add optimization for it.
> Just a question: is there any reason why dates don't have a literal 
> "syntax"?
> I mean why never existed sth like #2007-06-04# or {^20070604} instead
> of ctod( "04/06/2007" )?.
> It is not a request but sth I've always wanted to ask to Clipper developers 
> :)

0dYYYYMMDD, f.e:

    proc main()
      ? 0d20070603
    return

CTOD() with non empty value cannot be optimized at compile time because
it depends on SET DATEFORMAT so the result can be calculated only at
runtime. STOD() and HB_STOD() does not have such problem so code like:
    proc main()
      ? STOD( "20070603" )
    return

is optimized during compilation and gives the same PCODE as example above.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Jun  4 13:17:29 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jun  4 13:19:06 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <9257026e0706041009p18aed5ex73ecb5bcf9dd6a9b@mail.gmail.com>
References: <46631FDC.8010804@dbtopas.lt>
	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>
	<46634FDC.8030503@dbtopas.lt>
	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>
	<4663F04D.9010607@dbtopas.lt>
	<967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>
	<0B6173ED-09AC-4722-8DB9-C86AA9A80195@syenar.hu>
	<000401c7a6c7$1b02a790$0100a8c0@emag>
	<20070604165456.GB586@localhost.localdomain>
	<9257026e0706041009p18aed5ex73ecb5bcf9dd6a9b@mail.gmail.com>
Message-ID: <99F4B71D-569D-4C15-A3FB-F5E181356696@syenar.hu>

In Harbour there is: 0d20071231

:)

Brgds,
Viktor

On 2007.06.04., at 19:09, Lorenzo Fiorini wrote:

> On 6/4/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:
>
>> > xBase idiomatic: CTOD( "" ) to initialize an empty date.
>>
>> Yes, these is very often used code. I'll add optimization for it.
>
> Just a question: is there any reason why dates don't have a literal  
> "syntax"?
>
> I mean why never existed sth like #2007-06-04# or {^20070604} instead
> of ctod( "04/06/2007" )?.
>
> It is not a request but sth I've always wanted to ask to Clipper  
> developers :)
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Mon Jun  4 14:05:13 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun  4 14:05:49 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <46643AAC.2010809@dbtopas.lt>
References: <46631FDC.8010804@dbtopas.lt>
	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>
	<46634FDC.8030503@dbtopas.lt>
	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>
	<4663F04D.9010607@dbtopas.lt>
	<967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>
	<DFE929F4-B9BC-47F5-84C0-2599524F5BFD@syenar.hu>
	<01d101c7a6bc$656aa9a0$7e00520a@euroherc.ba>
	<4664305C.1070500@dbtopas.lt> <46643AAC.2010809@dbtopas.lt>
Message-ID: <20070604180513.GA4448@localhost.localdomain>

On Mon, 04 Jun 2007, Mindaugas Kavaliauskas wrote:
> perhaps I was not born to understood, why some not buggy optimisations 
> like SUBSTR() (which breaks SUBSTR("hello", 2, 0) $ "test") is OK, some 
> other not buggy like UPPER() (which do not breaks UPPER("") $ "test") is 
> bad, and some buggy like "" $ "test" is also OK.
> Sometimes I try to make things better, even if I do not need it at all 
> (like UPPER("") -> ""). But if it takes me a lot of time (about 40 
> minutes for trying to put my thoughts the right way in a foreign 
> language per letter) I give up.
> 
> It is much more quick to change source for me:
> 2007-06-04 19:11 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
>   * harbour/include/hbexprop.h
>   * harbour/include/hbexprb.c
>   * harbour/source/common/expropt2.c
>      - removed UPPER("") optimisation because of ... ?
> 
> Let's look at the bright side of it: the less we optimise, the faster 
> compiler is.

Leave it please. It's OK for me and we should extend it to make exactly
the same as Clipper does. It checks if string contains only latin letters,
digits and spaces and if it does then make optimization at compile time.
All other strings are not optimized because other characters can be letters
in some languages. It's quite reasonable for me.

When we will have more optimized functions I'll change this code so adding
new functions will not cause performance reduction and it will not be a
problem. In the future we can add codepage support to compiler (just like
in CLIP) so it will be possible to make full compile time optimizations for
UPPER()/LOWER()/ISALPHA(), etc. and add automatic CP translation in .prg
source code.

Victor, I do not see anything wrong in this modification.
Clipper makes exactly the same. In few places the compile time optimization
is buggy in Clipper and the results are differ then for the code evaluated
by VM, f.e.: "" $ "" or chr(256)
Personally I do not like it and we should think about fixing it - IMHO some
compiler switch can be good idea (-k?). There is one important reason for it.
Clipper does not have optimizer in macrocompiler and we have exactly the same
as the one used by compiler so code like these:
    ? "" $ "", &('"" $ ""')
gives different result when compiled by Harbour and Clipper.

best regards,
Przemek
From druzus at priv.onet.pl  Mon Jun  4 14:10:55 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun  4 14:11:31 2007
Subject: [Harbour] ChangeLog 2007-06-04 20:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070604181055.GB4448@localhost.localdomain>

2007-06-04 20:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbexprb.c
  * harbour/include/hbexprop.h
  * harbour/source/common/expropt2.c
    % added compile time optimization for CTOD("")
    % added compile time optimization for - used forconstant string values,
      f.e.:
         ? "Harbour   " - " Compiler"

  * harbour/source/vm/hvm.c
    % added optimization for string resizing in cVal1 - cVal2

  * harbour/source/rtl/dateshb.c
    % minor optimization - removed one not necessary ISCHAR()

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Mon Jun  4 15:47:15 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jun  4 15:47:51 2007
Subject: [Harbour] Harbour vs. xHarbour
References: <9257026e0706020750g53b7d840ibc3fa117cc34adc@mail.gmail.com><011701c7a526$7ce3e980$0100a8c0@emag>	<20070604163557.GA586@localhost.localdomain><000901c7a6c7$ad524060$0100a8c0@emag>
	<466444D3.1020000@dbtopas.lt>
Message-ID: <005101c7a6e1$2749d130$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Mindaugas Kavaliauskas" <dbtopas@dbtopas.lt>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: lunedi 4 giugno 2007 18.58
Oggetto: Re: [Harbour] Harbour vs. xHarbour


> > -a4 is the default for BCC55.
> 
> According to docs it is default, but BCC55 test give different results.

You are right! I will change my config files, thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From e.m.giordano at emagsoftware.it  Mon Jun  4 16:01:12 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jun  4 16:01:47 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
References: <46631FDC.8010804@dbtopas.lt><3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu><46634FDC.8030503@dbtopas.lt><B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu><4663F04D.9010607@dbtopas.lt><967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu><0B6173ED-09AC-4722-8DB9-C86AA9A80195@syenar.hu><000401c7a6c7$1b02a790$0100a8c0@emag>
	<20070604165456.GB586@localhost.localdomain>
Message-ID: <005601c7a6e3$199ec110$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: lunedi 4 giugno 2007 18.54
Oggetto: Re: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas


> > I have *a lot* of SPACE(), REPLICATE(), PAD*(), LEFT() and RIGHT() calls 
> > in
> > my code and I can't imagine how a programmer can live without them (not
>> only in xBase but also in any other programming language).
>
> But how many of them are used with constant parameters so they can be
> calculated at runtime?

Only REPLICATE() usually have a literal string as the first parameter.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Mon Jun  4 16:02:08 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jun  4 16:02:43 2007
Subject: [Harbour] Harbour vs. xHarbour
References: <20070604163557.GA586@localhost.localdomain><000901c7a6c7$ad524060$0100a8c0@emag>
	<20070604165643.GC586@localhost.localdomain>
Message-ID: <005b01c7a6e3$3b68a810$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: lunedi 4 giugno 2007 18.56
Oggetto: Re: [Harbour] Harbour vs. xHarbour


> > -a4 is the default for BCC55.
> 
> You forgot that tests showed that default is -a8 not -a4.
> We were checking it in last year.

I'm still waiting for my memory expansion pack. :-)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From druzus at priv.onet.pl  Mon Jun  4 16:10:56 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun  4 16:11:31 2007
Subject: [Harbour] Harbour vs. xHarbour
In-Reply-To: <005101c7a6e1$2749d130$0100a8c0@emag>
References: <466444D3.1020000@dbtopas.lt> <005101c7a6e1$2749d130$0100a8c0@emag>
Message-ID: <20070604201056.GA8270@localhost.localdomain>

On Mon, 04 Jun 2007, Enrico Maria Giordano wrote:
> >> -a4 is the default for BCC55.
> >According to docs it is default, but BCC55 test give different results.
> You are right! I will change my config files, thank you.

When you rebuild Harbour please check if it still exploits the
slowness in s:=f4() speed test. Using -a4 changes memory allocated
by HVM so it may interact with internal memory manager logic.
But please remember that even if it disappear in this tests it can
appear in some other situations.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Mon Jun  4 16:13:08 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jun  4 16:13:42 2007
Subject: [Harbour] Harbour vs. xHarbour
References: <466444D3.1020000@dbtopas.lt> <005101c7a6e1$2749d130$0100a8c0@emag>
	<20070604201056.GA8270@localhost.localdomain>
Message-ID: <009e01c7a6e4$c4d16500$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: lunedi 4 giugno 2007 22.10
Oggetto: Re: [Harbour] Harbour vs. xHarbour


> When you rebuild Harbour please check if it still exploits the
> slowness in s:=f4() speed test. Using -a4 changes memory allocated
> by HVM so it may interact with internal memory manager logic.
> But please remember that even if it disappear in this tests it can
> appear in some other situations.

Ok. Anyway, do you recommend -a4, right?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From druzus at priv.onet.pl  Mon Jun  4 16:19:12 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun  4 16:19:47 2007
Subject: [Harbour] Harbour vs. xHarbour
In-Reply-To: <009e01c7a6e4$c4d16500$0100a8c0@emag>
References: <466444D3.1020000@dbtopas.lt> <005101c7a6e1$2749d130$0100a8c0@emag>
	<20070604201056.GA8270@localhost.localdomain>
	<009e01c7a6e4$c4d16500$0100a8c0@emag>
Message-ID: <20070604201912.GA24699@localhost.localdomain>

On Mon, 04 Jun 2007, Enrico Maria Giordano wrote:
> >When you rebuild Harbour please check if it still exploits the
> >slowness in s:=f4() speed test. Using -a4 changes memory allocated
> >by HVM so it may interact with internal memory manager logic.
> >But please remember that even if it disappear in this tests it can
> >appear in some other situations.
> Ok. Anyway, do you recommend -a4, right?

For 32bit platform yes. It reduce allocated memory and increase a little
bit but noticeable (1-2%) speed. In both Harbour and xHarbour builds
though please remember that in xHarbour 3-rd party code may access some
internal structures directly so using different alignment may be dangerous
if you cannot recompile all source code. FWH uses the same source code
for Harbour and xHarbour so I guess it should be alignment independent.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Mon Jun  4 16:37:50 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jun  4 16:38:24 2007
Subject: [Harbour] Harbour vs. xHarbour
References: <466444D3.1020000@dbtopas.lt>
	<005101c7a6e1$2749d130$0100a8c0@emag><20070604201056.GA8270@localhost.localdomain><009e01c7a6e4$c4d16500$0100a8c0@emag>
	<20070604201912.GA24699@localhost.localdomain>
Message-ID: <00ce01c7a6e8$37b63520$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: lunedi 4 giugno 2007 22.19
Oggetto: Re: [Harbour] Harbour vs. xHarbour


> > Ok. Anyway, do you recommend -a4, right?
> 
> For 32bit platform yes. It reduce allocated memory and increase a little
> bit but noticeable (1-2%) speed. In both Harbour and xHarbour builds
> though please remember that in xHarbour 3-rd party code may access some
> internal structures directly so using different alignment may be dangerous
> if you cannot recompile all source code. FWH uses the same source code
> for Harbour and xHarbour so I guess it should be alignment independent.

Good point. I just asked to Antonio what alignment he is using for FWH...

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From druzus at acn.waw.pl  Mon Jun  4 16:47:42 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jun  4 16:48:19 2007
Subject: [Harbour] ChangeLog 2007-06-04 22:40 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070604204742.GA2318@localhost.localdomain>

2007-06-04 22:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbzlib/include/stdafx.h
  * harbour/contrib/hbzlib/include/ziparchive.h
    * cleaned some warnings

  * harbour/include/hbexprb.c
  * harbour/include/hbexprop.h
  * harbour/source/common/expropt2.c
    * restored Mindaugas code for UPPER optimization and added logic to
      optimize UPPER for strings with only Latin letters, digit and spaces
      just like in Clipper. Now code like:
         ? Upper( chr(65)+chr(66)+chr(67)+"0123 QWE asd " ) + "ZXC"
      is fully optimized at compile time to single string expression.
    % optimized hb_compExprReduceCHR() by eliminating memory allocation
      for new string
    ! fixed typo in my previous commit

Victor I really think that we should have such optimization if Clipper
also have it. If you do not agree we can remove it but I do not see
anything wrong with it.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Jun  4 21:39:32 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jun  4 21:39:36 2007
Subject: [Harbour] 2007-06-03 23:03 UTC+0300 Mindaugas Kavaliauskas
In-Reply-To: <20070604180513.GA4448@localhost.localdomain>
References: <46631FDC.8010804@dbtopas.lt>
	<3F00199F-6633-42B5-A7BA-EF47F3BF5E08@syenar.hu>
	<46634FDC.8030503@dbtopas.lt>
	<B35A6CFF-8DE8-44A9-838A-5D17F0C1F159@syenar.hu>
	<4663F04D.9010607@dbtopas.lt>
	<967898AA-F7B0-4164-880E-4BD95620204A@syenar.hu>
	<DFE929F4-B9BC-47F5-84C0-2599524F5BFD@syenar.hu>
	<01d101c7a6bc$656aa9a0$7e00520a@euroherc.ba>
	<4664305C.1070500@dbtopas.lt> <46643AAC.2010809@dbtopas.lt>
	<20070604180513.GA4448@localhost.localdomain>
Message-ID: <935B8680-AEA6-43FE-9C65-D8B7C103D382@syenar.hu>

> Leave it please. It's OK for me and we should extend it to make  
> exactly
> the same as Clipper does. It checks if string contains only latin  
> letters,
> digits and spaces and if it does then make optimization at compile  
> time.
> All other strings are not optimized because other characters can be  
> letters
> in some languages. It's quite reasonable for me.

The ASCII string support is a good idea, I agree it makes more sense  
this way.

> When we will have more optimized functions I'll change this code so  
> adding
> new functions will not cause performance reduction and it will not  
> be a
> problem. In the future we can add codepage support to compiler  
> (just like
> in CLIP) so it will be possible to make full compile time  
> optimizations for
> UPPER()/LOWER()/ISALPHA(), etc. and add automatic CP translation  
> in .prg
> source code.

That would be the best. (and/or unicode support)

> Victor, I do not see anything wrong in this modification.
> Clipper makes exactly the same. In few places the compile time  
> optimization
> is buggy in Clipper and the results are differ then for the code  
> evaluated
> by VM, f.e.: "" $ "" or chr(256)

Yes, I know.

> Personally I do not like it and we should think about fixing it -  
> IMHO some
> compiler switch can be good idea (-k?). There is one important  
> reason for it.
> Clipper does not have optimizer in macrocompiler and we have  
> exactly the same
> as the one used by compiler so code like these:
>     ? "" $ "", &('"" $ ""')
> gives different result when compiled by Harbour and Clipper.

Thanks. That's what I wanted to test this evening, but I didn't get  
around
to do it.

So you propose to control the buggy Clipper behaviour with a -k
switch, with the default being non-bug-compatible? This is a "radical"
approach, but I have no problem with it all. This way the UPPER("")
stuff (with or without ASCII support) becomes independent from this
matter by default.

Any ideas how to decide whether the compile-time or the runtime
behaviour is to be considered the proper one? (No hint in the docs)

Brgds,
Viktor

From druzus at priv.onet.pl  Mon Jun  4 21:40:12 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun  4 21:40:48 2007
Subject: [Harbour] ChangeLog 2007-06-05 03:20 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070605014012.GA14667@localhost.localdomain>

2007-06-05 03:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbzlib/zip.c
    * cleaned some warnings

  * harbour/contrib/ole2/w32ole.c
  * harbour/contrib/ole2/win32ole.prg
    * changed deinitialization code to allow using OLE in .prg object
      destructors and user EXIT functions
    * added support for FOR EACH overloading - not tested please check
    % use BEGIN SEQUENCE WITH as TRY / CATCH replacement

best regards,
Przemek
From niki at synel.co.il  Tue Jun  5 02:58:02 2007
From: niki at synel.co.il (Chen Kedem)
Date: Tue Jun  5 02:58:44 2007
Subject: [Harbour] ChangeLog: 2007-06-05 09:56 UTC+0300 Chen Kedem
Message-ID: <4665097A.ADD@synel.co.il>

2007-06-05 09:56 UTC+0300 Chen Kedem <niki@actcom.co.il>
  * source/rtl/achoice.prg
    ! Fix bug#1729881 by <sokaxa@telenet.be>
      ACHOICE() was not handling AC_GOTO when user function was used.


If someone could please commit it also to the BETA branch, thanks.


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From lorenzo.fiorini at gmail.com  Tue Jun  5 03:01:00 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Jun  5 03:01:03 2007
Subject: [Harbour] contrib/hbzlib warnings during make install
Message-ID: <9257026e0706050001t15dd16aaqf7eaaf3afa9f2cc7@mail.gmail.com>

The libziparchive.a is created and I get many warnings during make but
..Linux/* sources are rebuilt during install using make_gnu.sh -s
install.

Is it expected?

best regards,
Lorenzo
From e.m.giordano at emagsoftware.it  Tue Jun  5 03:07:05 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Jun  5 03:07:40 2007
Subject: [Harbour] contrib/hbzlib warnings during make install
References: <9257026e0706050001t15dd16aaqf7eaaf3afa9f2cc7@mail.gmail.com>
Message-ID: <003b01c7a740$200a25f0$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 5 giugno 2007 9.01
Oggetto: [Harbour] contrib/hbzlib warnings during make install


> The libziparchive.a is created and I get many warnings during make but
> ..Linux/* sources are rebuilt during install using make_gnu.sh -s
> install.
>
> Is it expected?

Sorry, I can't help on this subject. Przemek?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Tue Jun  5 03:19:19 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Jun  5 03:19:55 2007
Subject: [Harbour] Harbour vs. xHarbour
References: <466444D3.1020000@dbtopas.lt> <005101c7a6e1$2749d130$0100a8c0@emag>
	<20070604201056.GA8270@localhost.localdomain>
Message-ID: <009001c7a741$d56f6a30$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: lunedi 4 giugno 2007 22.10
Oggetto: Re: [Harbour] Harbour vs. xHarbour


> When you rebuild Harbour please check if it still exploits the
> slowness in s:=f4() speed test. Using -a4 changes memory allocated
> by HVM so it may interact with internal memory manager logic.
> But please remember that even if it disappear in this tests it can
> appear in some other situations.

Antonio has just confirmed that FWH uses default BCC alignment (ie. -a8). I 
have to stick with that alignment, I suppose...

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From antonioharbour at gmail.com  Tue Jun  5 03:21:18 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jun  5 03:21:29 2007
Subject: [Harbour] Harbour vs. xHarbour
In-Reply-To: <00ce01c7a6e8$37b63520$0100a8c0@emag>
Message-ID: <46650ef4.1da18c8f.554e.ffff9633@mx.google.com>

Enrico, 

>> FWH uses the same source code
>> for Harbour and xHarbour so I guess it should be alignment independent.

> Good point. I just asked to Antonio what alignment he is using for FWH...

FWH uses bcc32 default alignment

regards,

Antonio

From e.m.giordano at emagsoftware.it  Tue Jun  5 03:23:56 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Jun  5 03:24:30 2007
Subject: [Harbour] Harbour vs. xHarbour
References: <46650ef4.1da18c8f.554e.ffff9633@mx.google.com>
Message-ID: <009f01c7a742$7a583630$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Antonio Linares" <antonioharbour@gmail.com>
A: "'Harbour Project Main Developer List.'" <harbour@harbour-project.org>
Data invio: marted? 5 giugno 2007 9.21
Oggetto: RE: [Harbour] Harbour vs. xHarbour


> FWH uses bcc32 default alignment

Thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From lorenzo.fiorini at gmail.com  Tue Jun  5 03:49:57 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Jun  5 03:50:01 2007
Subject: [Harbour] contrib/hbzlib warnings during make install
In-Reply-To: <003b01c7a740$200a25f0$0100a8c0@emag>
References: <9257026e0706050001t15dd16aaqf7eaaf3afa9f2cc7@mail.gmail.com>
	<003b01c7a740$200a25f0$0100a8c0@emag>
Message-ID: <9257026e0706050049r2d7ca370uf36405e4106004d5@mail.gmail.com>

On 6/5/07, Enrico Maria Giordano <e.m.giordano@emagsoftware.it> wrote:

> Sorry, I can't help on this subject. Przemek?

Not a big issue. I think it is a make paths "problem".

Only if you're interested I can send you the warnings.

gcc is sometimes too verbose but it is better to check its warnings :)

best regards,
Lorenzo
From druzus at priv.onet.pl  Tue Jun  5 04:39:20 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jun  5 04:39:56 2007
Subject: [Harbour] Harbour vs. xHarbour
In-Reply-To: <009001c7a741$d56f6a30$0100a8c0@emag>
References: <466444D3.1020000@dbtopas.lt> <005101c7a6e1$2749d130$0100a8c0@emag>
	<20070604201056.GA8270@localhost.localdomain>
	<009001c7a741$d56f6a30$0100a8c0@emag>
Message-ID: <20070605083920.GA22396@localhost.localdomain>

On Tue, 05 Jun 2007, Enrico Maria Giordano wrote:
> >When you rebuild Harbour please check if it still exploits the
> >slowness in s:=f4() speed test. Using -a4 changes memory allocated
> >by HVM so it may interact with internal memory manager logic.
> >But please remember that even if it disappear in this tests it can
> >appear in some other situations.
> Antonio has just confirmed that FWH uses default BCC alignment (ie. -a8). I 
> have to stick with that alignment, I suppose...

Probably not. FWH uses only API functions to access HVM internal so it
should work with HVM compiled with any alignment. Just try.

best regards,
Przemek
From druzus at priv.onet.pl  Tue Jun  5 04:56:49 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jun  5 04:57:24 2007
Subject: [Harbour] ChangeLog 2007-06-05 10:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070605085649.GA22937@localhost.localdomain>

2007-06-05 10:53 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  - harbour/contrib/hbzlib/Makefile.mingw
    - removed not necessary file
From druzus at priv.onet.pl  Tue Jun  5 04:57:29 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jun  5 04:58:04 2007
Subject: [Harbour] ChangeLOg BETA 2007-06-05 10:50 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
Message-ID: <20070605085729.GB22937@localhost.localdomain>

2007-06-05 10:50 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * synced with modifications in DEVEL branch:
    * source/rtl/achoice.prg
      ! Fix bug#1729881 by <sokaxa@telenet.be>
        ACHOICE() was not handling AC_GOTO when user function was used.
    * harbour/contrib/ole2/w32ole.c
    * harbour/contrib/ole2/win32ole.prg
      * changed deinitialization code to allow using OLE in .prg object
        destructors and user EXIT functions
      * added support for FOR EACH overloading - not tested please check
      % use BEGIN SEQUENCE WITH as TRY / CATCH replacement
    * harbour/include/hbexprb.c
    * harbour/include/hbexprop.h
    * harbour/source/common/expropt2.c
      * restored Mindaugas code for UPPER optimization and added logic to
        optimize UPPER for strings with only Latin letters, digit and spaces
        just like in Clipper. Now code like:
           ? Upper( chr(65)+chr(66)+chr(67)+"0123 QWE asd " ) + "ZXC"
        is fully optimized at compile time to single string expression.
      % optimized hb_compExprReduceCHR() by eliminating memory allocation
        for new string
      ! fixed typo in my previous commit
    * harbour/include/hbexprb.c
    * harbour/include/hbexprop.h
    * harbour/source/common/expropt2.c
      % added compile time optimization for CTOD("")
      % added compile time optimization for - used forconstant string values,
        f.e.:
           ? "Harbour   " - " Compiler"
    * harbour/source/vm/hvm.c
      % added optimization for string resizing in cVal1 - cVal2
    * harbour/source/rtl/dateshb.c
      % minor optimization - removed one not necessary ISCHAR()
    * harbour/make_gnu.sh
    * harbour/make_tgz.sh
    * harbour/bin/hb-func.sh
    * harbour/bin/postinst.sh
      * HPUX build cleanup
    * harbour/source/debug/dbgentry.c
      * cast isalpha() and isdigit() parameters to unsigned char
    * harbour/source/rtl/hbinet.c
    * harbour/source/rtl/gtstd/gtstd.c
      * HPUX build cleanup
    + harbour/contrib/tip/make_b32.bat
    + harbour/contrib/tip/makefile.bc
    * harbour/contrib/hbzlib
      * replaced with the one borrowed from xharbour, source modifications by Przemek
    * harbour/contrib/hbzlib/makefile
    * harbour/contrib/hbzlib/makefile.bc
    * harbour/contrib/hbzlib/makefile.vc
    * harbour/contrib/hbzlib/zip.c
    * harbour/contrib/hbzlib/include/zipfilemapping.h
    * harbour/contrib/hbzlib/include/zipautobuffer.h
    * harbour/contrib/hbzlib/include/hbzip2.h
      * changed to make contrib/hbzlib working with harbour
    + harbour/contrib/hbzlib/hbcomprs.c
    + harbour/contrib/hbzlib/include/hbcomprs.h
      + added to make contrib/hbzlib working with harbour
    + harbour/contrib/hbzlib/doc
    + harbour/contrib/hbzlib/doc/zipnew.txt
      + added documentation borrowed from xharbour/doc/en


best regards,
Przemek
From antonioharbour at gmail.com  Tue Jun  5 05:37:46 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jun  5 05:37:56 2007
Subject: [Harbour] Harbour vs. xHarbour
In-Reply-To: <20070605083920.GA22396@localhost.localdomain>
Message-ID: <46652eef.42e23838.3738.ffffd3a6@mx.google.com>

>> Antonio has just confirmed that FWH uses default BCC alignment (ie. 
>> -a8). I have to stick with that alignment, I suppose...

>
Probably not. FWH uses only API functions to access HVM internal so it
should work with HVM compiled with any alignment. Just try.
>

Right, FWH does not uses internals :-)

Regards,

Antonio

From e.m.giordano at emagsoftware.it  Tue Jun  5 06:16:36 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Jun  5 06:17:21 2007
Subject: [Harbour] contrib/hbzlib warnings during make install
References: <9257026e0706050001t15dd16aaqf7eaaf3afa9f2cc7@mail.gmail.com><003b01c7a740$200a25f0$0100a8c0@emag>
	<9257026e0706050049r2d7ca370uf36405e4106004d5@mail.gmail.com>
Message-ID: <00fb01c7a75a$994faf60$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 5 giugno 2007 9.49
Oggetto: Re: [Harbour] contrib/hbzlib warnings during make install


> Only if you're interested I can send you the warnings.
>
> gcc is sometimes too verbose but it is better to check its warnings :)

Yes, send. I will see what I can do.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Tue Jun  5 06:16:53 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Jun  5 06:17:31 2007
Subject: [Harbour] Harbour vs. xHarbour
References: <466444D3.1020000@dbtopas.lt>
	<005101c7a6e1$2749d130$0100a8c0@emag><20070604201056.GA8270@localhost.localdomain><009001c7a741$d56f6a30$0100a8c0@emag>
	<20070605083920.GA22396@localhost.localdomain>
Message-ID: <010001c7a75a$a365c700$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: martedi 5 giugno 2007 10.39
Oggetto: Re: [Harbour] Harbour vs. xHarbour


> Probably not. FWH uses only API functions to access HVM internal so it
> should work with HVM compiled with any alignment. Just try.

Ok, I will try.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From lorenzo.fiorini at gmail.com  Tue Jun  5 06:40:01 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Jun  5 06:40:07 2007
Subject: [Harbour] contrib/hbzlib warnings during make install
In-Reply-To: <00fb01c7a75a$994faf60$0100a8c0@emag>
References: <9257026e0706050001t15dd16aaqf7eaaf3afa9f2cc7@mail.gmail.com>
	<003b01c7a740$200a25f0$0100a8c0@emag>
	<9257026e0706050049r2d7ca370uf36405e4106004d5@mail.gmail.com>
	<00fb01c7a75a$994faf60$0100a8c0@emag>
Message-ID: <9257026e0706050340t7dfac36ax153a245d13757fa4@mail.gmail.com>

On 6/5/07, Enrico Maria Giordano <e.m.giordano@emagsoftware.it> wrote:

> Yes, send. I will see what I can do.

See below.

best regards,
Lorenzo

../../zip.c: In function 'UnzipCreateArray':
../../zip.c:103: warning: unused parameter 'szZipFileName'
../../zip.c: In function 'ZipTestExclude':
../../zip.c:178: warning: comparison between pointer and integer
../../zip.c: In function 'HB_FUN_HB_UNZIPFILE':
../../zip.c:706: warning: unused variable 'Temp'
../../zip.c: At top level:
../../zip.c:1011: warning: 'HB_FUN_exit_HBZIPCLEANUP' defined but not used
../../hbcomprs.c: In function 'huft_build':
../../hbcomprs.c:3040: warning: 'r.base' may be used uninitialized in
this function
../../include/zipstring.h: In copy constructor
'CZipString::CZipString(const CZipString&)':
../../include/zipstring.h:125: warning: base class 'struct
std::basic_string<char, std::char_traits<char>, std::allocator<char>
>' should be explicitly initialized in the copy constructor
../../include/zipexception.h: In copy constructor
'CZipException::CZipException(CZipException&)':
../../include/zipexception.h:57: warning: base class 'class
std::exception' should be explicitly initialized in the copy
constructor
../../include/zipstorage.h: At global scope:
../../include/zipstorage.h:45: warning: 'struct CZipCallback' has
virtual functions but non-virtual destructor
../../include/zipstorage.h:85: warning: 'struct CZipSpanCallback' has
virtual functions but non-virtual destructor
../../include/zipstorage.h:102: warning: 'struct CZipActionCallback'
has virtual functions but non-virtual destructor
../../include/ziparchive.h: In constructor
'CZipAddNewFileInfo::CZipAddNewFileInfo(CZipAbstractFile*, const
char*)':
../../include/ziparchive.h:211: warning: 'CZipAddNewFileInfo::m_pFile'
will be initialized after
../../include/ziparchive.h:137: warning:   'CZipString
CZipAddNewFileInfo::m_szFileNameInZip'
../../include/ziparchive.h:122: warning:   when initialized here
../../ziparchive.cpp: In member function 'DWORD
CZipArchive::ReadFile(void*, DWORD)':
../../ziparchive.cpp:340: warning: comparison of unsigned expression
>= 0 is always true
../../ziparchive.cpp: At global scope:
../../ziparchive.cpp:1149: warning: unused parameter 'iSmartLevel'
../../ziparchive.cpp:1163: warning: unused parameter 'iSmartLevel'
../../ziparchive.cpp:1177: warning: unused parameter 'iSmartLevel'
../../ziparchive.cpp:1190: warning: unused parameter 'iSmartLevel'
../../zipcentraldir.cpp:852:2: warning: no newline at end of file
../../include/zipstring.h: In copy constructor
'CZipString::CZipString(const CZipString&)':
../../include/zipstring.h:125: warning: base class 'struct
std::basic_string<char, std::char_traits<char>, std::allocator<char>
>' should be explicitly initialized in the copy constructor
../../include/zipexception.h: In copy constructor
'CZipException::CZipException(CZipException&)':
../../include/zipexception.h:57: warning: base class 'class
std::exception' should be explicitly initialized in the copy
constructor
../../include/zipstorage.h: At global scope:
../../include/zipstorage.h:45: warning: 'struct CZipCallback' has
virtual functions but non-virtual destructor
../../include/zipstorage.h:85: warning: 'struct CZipSpanCallback' has
virtual functions but non-virtual destructor
../../include/zipstorage.h:102: warning: 'struct CZipActionCallback'
has virtual functions but non-virtual destructor
../../include/ziparchive.h: In constructor
'CZipAddNewFileInfo::CZipAddNewFileInfo(CZipAbstractFile*, const
char*)':
../../include/ziparchive.h:211: warning: 'CZipAddNewFileInfo::m_pFile'
will be initialized after
../../include/ziparchive.h:137: warning:   'CZipString
CZipAddNewFileInfo::m_szFileNameInZip'
../../include/ziparchive.h:122: warning:   when initialized here
../../include/zipstring.h: In copy constructor
'CZipString::CZipString(const CZipString&)':
../../include/zipstring.h:125: warning: base class 'struct
std::basic_string<char, std::char_traits<char>, std::allocator<char>
>' should be explicitly initialized in the copy constructor
../../include/zipexception.h: In copy constructor
'CZipException::CZipException(CZipException&)':
../../include/zipexception.h:57: warning: base class 'class
std::exception' should be explicitly initialized in the copy
constructor
../../include/zipstorage.h: At global scope:
../../include/zipstorage.h:45: warning: 'struct CZipCallback' has
virtual functions but non-virtual destructor
../../include/zipstorage.h:85: warning: 'struct CZipSpanCallback' has
virtual functions but non-virtual destructor
../../include/zipstorage.h:102: warning: 'struct CZipActionCallback'
has virtual functions but non-virtual destructor
../../include/ziparchive.h: In constructor
'CZipAddNewFileInfo::CZipAddNewFileInfo(CZipAbstractFile*, const
char*)':
../../include/ziparchive.h:211: warning: 'CZipAddNewFileInfo::m_pFile'
will be initialized after
../../include/ziparchive.h:137: warning:   'CZipString
CZipAddNewFileInfo::m_szFileNameInZip'
../../include/ziparchive.h:122: warning:   when initialized here
../../zipcomp.cpp: At global scope:
../../zipcomp.cpp:69: warning: 'class SpanCallbackc' has virtual
functions but non-virtual destructor
../../zipcomp.cpp:70: warning: unused parameter 'iProgress'
../../zipcomp.cpp:82: warning: 'class SpanActionCallbackc' has virtual
functions but non-virtual destructor
../../zipcomp.cpp:83: warning: unused parameter 'iProgress'
../../include/zipstring.h: In copy constructor
'CZipString::CZipString(const CZipString&)':
../../include/zipstring.h:125: warning: base class 'struct
std::basic_string<char, std::char_traits<char>, std::allocator<char>
>' should be explicitly initialized in the copy constructor
../../include/zipexception.h: In copy constructor
'CZipException::CZipException(CZipException&)':
../../include/zipexception.h:57: warning: base class 'class
std::exception' should be explicitly initialized in the copy
constructor
../../include/zipstorage.h: At global scope:
../../include/zipstorage.h:45: warning: 'struct CZipCallback' has
virtual functions but non-virtual destructor
../../include/zipstorage.h:85: warning: 'struct CZipSpanCallback' has
virtual functions but non-virtual destructor
../../include/zipstorage.h:102: warning: 'struct CZipActionCallback'
has virtual functions but non-virtual destructor
../../include/zipstring.h: In copy constructor
'CZipString::CZipString(const CZipString&)':
../../include/zipstring.h:125: warning: base class 'struct
std::basic_string<char, std::char_traits<char>, std::allocator<char>
>' should be explicitly initialized in the copy constructor
../../include/zipexception.h: In copy constructor
'CZipException::CZipException(CZipException&)':
../../include/zipexception.h:57: warning: base class 'class
std::exception' should be explicitly initialized in the copy
constructor
../../include/zipstring.h: In copy constructor
'CZipString::CZipString(const CZipString&)':
../../include/zipstring.h:125: warning: base class 'struct
std::basic_string<char, std::char_traits<char>, std::allocator<char>
>' should be explicitly initialized in the copy constructor
../../include/zipexception.h: In copy constructor
'CZipException::CZipException(CZipException&)':
../../include/zipexception.h:57: warning: base class 'class
std::exception' should be explicitly initialized in the copy
constructor
../../include/zipstring.h: In copy constructor
'CZipString::CZipString(const CZipString&)':
../../include/zipstring.h:125: warning: base class 'struct
std::basic_string<char, std::char_traits<char>, std::allocator<char>
>' should be explicitly initialized in the copy constructor
../../include/zipstorage.h: At global scope:
../../include/zipstorage.h:45: warning: 'struct CZipCallback' has
virtual functions but non-virtual destructor
../../include/zipstorage.h:85: warning: 'struct CZipSpanCallback' has
virtual functions but non-virtual destructor
../../include/zipstorage.h:102: warning: 'struct CZipActionCallback'
has virtual functions but non-virtual destructor
../../include/zipexception.h: In copy constructor
'CZipException::CZipException(CZipException&)':
../../include/zipexception.h:57: warning: base class 'class
std::exception' should be explicitly initialized in the copy
constructor
../../include/ziparchive.h: In constructor
'CZipAddNewFileInfo::CZipAddNewFileInfo(CZipAbstractFile*, const
char*)':
../../include/ziparchive.h:211: warning: 'CZipAddNewFileInfo::m_pFile'
will be initialized after
../../include/ziparchive.h:137: warning:   'CZipString
CZipAddNewFileInfo::m_szFileNameInZip'
../../include/ziparchive.h:122: warning:   when initialized here
../../include/zipstring.h: In copy constructor
'CZipString::CZipString(const CZipString&)':
../../include/zipstring.h:125: warning: base class 'struct
std::basic_string<char, std::char_traits<char>, std::allocator<char>
>' should be explicitly initialized in the copy constructor
../../include/zipexception.h: In copy constructor
'CZipException::CZipException(CZipException&)':
../../include/zipexception.h:57: warning: base class 'class
std::exception' should be explicitly initialized in the copy
constructor
../../zipmemfile.cpp: In member function 'virtual DWORD
CZipMemFile::Seek(LONG, int)':
../../zipmemfile.cpp:93: warning: comparison of unsigned expression <
0 is always false
../../include/zipstring.h: In copy constructor
'CZipString::CZipString(const CZipString&)':
../../include/zipstring.h:125: warning: base class 'struct
std::basic_string<char, std::char_traits<char>, std::allocator<char>
>' should be explicitly initialized in the copy constructor
../../include/zipexception.h: In copy constructor
'CZipException::CZipException(CZipException&)':
../../include/zipexception.h:57: warning: base class 'class
std::exception' should be explicitly initialized in the copy
constructor
../../include/zipstorage.h: At global scope:
../../include/zipstorage.h:45: warning: 'struct CZipCallback' has
virtual functions but non-virtual destructor
../../include/zipstorage.h:85: warning: 'struct CZipSpanCallback' has
virtual functions but non-virtual destructor
../../include/zipstorage.h:102: warning: 'struct CZipActionCallback'
has virtual functions but non-virtual destructor
../../include/ziparchive.h: In constructor
'CZipAddNewFileInfo::CZipAddNewFileInfo(CZipAbstractFile*, const
char*)':
../../include/ziparchive.h:211: warning: 'CZipAddNewFileInfo::m_pFile'
will be initialized after
../../include/ziparchive.h:137: warning:   'CZipString
CZipAddNewFileInfo::m_szFileNameInZip'
../../include/ziparchive.h:122: warning:   when initialized here
../../zipnew.cpp: At global scope:
../../zipnew.cpp:75: warning: 'class SpanCallback' has virtual
functions but non-virtual destructor
../../zipnew.cpp:76: warning: unused parameter 'iProgress'
../../zipnew.cpp:89: warning: 'class SpanActionCallback' has virtual
functions but non-virtual destructor
../../zipnew.cpp:90: warning: unused parameter 'iProgress'
../../zipnew.cpp: In function '_HB_ITEM* hb___GetFileNamesFromZip(char*, BOOL)':
../../zipnew.cpp:275: warning: unused variable 'uAttr'
../../zipnew.cpp:213: warning: unused variable 'iOMode'
../../zipnew.cpp: At global scope:
../../zipnew.cpp:520: warning: unused parameter 'bCase'
../../zipnew.cpp: In function 'int hb_UnzipSel(char*, _HB_ITEM*, BOOL,
char*, const char*, _HB_ITEM*, _HB_ITEM*)':
../../zipnew.cpp:637: warning: comparison of unsigned expression >= 0
is always true
../../zipnew.cpp:566: warning: unused variable 'iMode'
../../zipnew.cpp: In function 'int hb_UnzipSelIndex(char*, _HB_ITEM*,
BOOL, char*, char*, _HB_ITEM*, _HB_ITEM*)':
../../zipnew.cpp:843: warning: comparison of unsigned expression >= 0
is always true
../../zipnew.cpp:796: warning: unused variable 'iMode'
../../zipnew.cpp: In function 'DWORD GetCurrentFileSize(const char*)':
../../zipnew.cpp:987: warning: unused variable 'ushbMask'
../../zipnew.cpp:988: warning: unused variable 'usFileAttr'
../../zipnew.cpp: At global scope:
../../zipnew.cpp:1002: warning: unused parameter 'pDiskBlock'
../../zipnew.cpp: In function '_HB_ITEM* hb___GetFileNamesFromZip(char*, BOOL)':
../../zipnew.cpp:271: warning: 'szMethod' may be used uninitialized in
this function
../../zipnew.cpp: In function 'int hb___GetNumberofFilestoUnzip(char*)':
../../zipnew.cpp:464: warning: 'iNumberOfFiles' may be used
uninitialized in this function
../../zipnew.cpp: In function 'const char* hb_GetZipComment(char*)':
../../zipnew.cpp:742: warning: 'szReturn' may be used uninitialized in
this function
../../include/zipstring.h: In copy constructor
'CZipString::CZipString(const CZipString&)':
../../include/zipstring.h:125: warning: base class 'struct
std::basic_string<char, std::char_traits<char>, std::allocator<char>
>' should be explicitly initialized in the copy constructor
../../include/zipstring.h: In copy constructor
'CZipString::CZipString(const CZipString&)':
../../include/zipstring.h:125: warning: base class 'struct
std::basic_string<char, std::char_traits<char>, std::allocator<char>
>' should be explicitly initialized in the copy constructor
../../include/zipstorage.h: At global scope:
../../include/zipstorage.h:45: warning: 'struct CZipCallback' has
virtual functions but non-virtual destructor
../../include/zipstorage.h:85: warning: 'struct CZipSpanCallback' has
virtual functions but non-virtual destructor
../../include/zipstorage.h:102: warning: 'struct CZipActionCallback'
has virtual functions but non-virtual destructor
../../include/zipexception.h: In copy constructor
'CZipException::CZipException(CZipException&)':
../../include/zipexception.h:57: warning: base class 'class
std::exception' should be explicitly initialized in the copy
constructor
../../include/ziparchive.h: In constructor
'CZipAddNewFileInfo::CZipAddNewFileInfo(CZipAbstractFile*, const
char*)':
../../include/ziparchive.h:211: warning: 'CZipAddNewFileInfo::m_pFile'
will be initialized after
../../include/ziparchive.h:137: warning:   'CZipString
CZipAddNewFileInfo::m_szFileNameInZip'
../../include/ziparchive.h:122: warning:   when initialized here
../../include/zipstring.h: In copy constructor
'CZipString::CZipString(const CZipString&)':
../../include/zipstring.h:125: warning: base class 'struct
std::basic_string<char, std::char_traits<char>, std::allocator<char>
>' should be explicitly initialized in the copy constructor
../../include/zipstring.h: In copy constructor
'CZipString::CZipString(const CZipString&)':
../../include/zipstring.h:125: warning: base class 'struct
std::basic_string<char, std::char_traits<char>, std::allocator<char>
>' should be explicitly initialized in the copy constructor
../../include/zipstring.h: In copy constructor
'CZipString::CZipString(const CZipString&)':
../../include/zipstring.h:125: warning: base class 'struct
std::basic_string<char, std::char_traits<char>, std::allocator<char>
>' should be explicitly initialized in the copy constructor
../../include/zipstorage.h: At global scope:
../../include/zipstorage.h:45: warning: 'struct CZipCallback' has
virtual functions but non-virtual destructor
../../include/zipstorage.h:85: warning: 'struct CZipSpanCallback' has
virtual functions but non-virtual destructor
../../include/zipstorage.h:102: warning: 'struct CZipActionCallback'
has virtual functions but non-virtual destructor
../../include/zipexception.h: In copy constructor
'CZipException::CZipException(CZipException&)':
../../include/zipexception.h:57: warning: base class 'class
std::exception' should be explicitly initialized in the copy
constructor
../../Linux/ZipPlatform.cpp: In function 'CZipString
ZipPlatform::GetTmpFileName(const char*, DWORD)':
../../Linux/ZipPlatform.cpp:74: warning: unused variable 'buf'
../../Linux/ZipPlatform.cpp: At global scope:
../../Linux/ZipPlatform.cpp:180: warning: unused parameter 'lpszFilePath'
../../Linux/ZipPlatform.cpp:186: warning: unused parameter 'lpszPath'
../../Linux/ZipPlatform.cpp:186: warning: unused parameter 'lpszLabel'
../../Linux/ZipPlatform.cpp:192: warning: unused parameter 'buffer'
../../Linux/ZipPlatform.cpp:192: warning: unused parameter 'bAnsiToOem'
../../Linux/ZipPlatform.cpp:257: warning: unused parameter 'iShareMode'
From e.m.giordano at emagsoftware.it  Tue Jun  5 13:40:07 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Jun  5 13:40:43 2007
Subject: [Harbour] Tried with -a4 switch
Message-ID: <02c601c7a798$8e902f30$0100a8c0@emag>

I just rebuilt Harbour with -a4 switch and then tried speedtst without 
noticing any differences.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From toninhofwi at yahoo.com.br  Tue Jun  5 13:55:02 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Jun  5 13:55:32 2007
Subject: [Harbour] Bit operator
Message-ID: <e78b63l3thaurm1iqf97a00vilt1c95s59@4ax.com>

Hi.

I?m trying to test my application with Harbour but I can?t due to
missing bit operators like:

   ? 8 & 0
   ? 8 | 0


Any ideas please?

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From harbour.01 at syenar.hu  Tue Jun  5 14:23:21 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jun  5 14:25:41 2007
Subject: [Harbour] CHANGELOG: 2007-06-05 20:22 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7a79e$Blat.v2.6.1$98d34a26$1494b936b16a@127.0.0.1>

2007-06-05 20:22 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * harbour/doc/linux1st.txt
     + Added info about required Ubuntu packages.
       (Thanks Przemek)

   * harbour/utils/hbtest/rt_hvma.prg
   * harbour/utils/hbtest/rt_str.prg
     + Added two more tests for "" $ "" / At( "", "" ) 
       combinations.

From druzus at priv.onet.pl  Tue Jun  5 15:07:48 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jun  5 15:08:23 2007
Subject: [Harbour] ChangeLog 2007-06-05 21:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070605190748.GA20260@localhost.localdomain>

2007-06-05 21:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcompdf.h
    * formatting
  * harbour/include/hbexpra.c
    + added comment
  * harbour/source/common/expropt2.c
    + added optimization for <constValue> == NIL, <constValue> = NIL,
      <constValue> != NIL
    ! disabled in macro compiler buggy Clipper compiler optimization
      for expressions like: AT( "", "" ), "" $ "", CHR(256), now the
      folowwing code gives the same results when compiled by Clipper
      and Harbour:
            proc main()
               ? ""$"", &('""$""')
               ? AT(""," "), &('AT(""," ")')
               ? LEN(CHR(0)+CHR(256)), &('LEN(CHR(0)+CHR(256))')
            return

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Tue Jun  5 16:50:03 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Jun  5 16:50:41 2007
Subject: [Harbour] 2007-06-05 22:44 UTC+0200 Enrico Maria Giordano
	(e.m.giordano@emagsoftware.it)
Message-ID: <040e01c7a7b3$17066c70$0100a8c0@emag>

2007-06-05 22:44 UTC+0200 Enrico Maria Giordano (e.m.giordano@emagsoftware.it)
  * harbour/contrib/hbzlib/zip.c
    * cleaned a couple of warnings

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From e.m.giordano at emagsoftware.it  Tue Jun  5 17:04:07 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Jun  5 17:04:42 2007
Subject: [Harbour] contrib/hbzlib warnings during make install
References: <9257026e0706050001t15dd16aaqf7eaaf3afa9f2cc7@mail.gmail.com><003b01c7a740$200a25f0$0100a8c0@emag><9257026e0706050049r2d7ca370uf36405e4106004d5@mail.gmail.com><00fb01c7a75a$994faf60$0100a8c0@emag>
	<9257026e0706050340t7dfac36ax153a245d13757fa4@mail.gmail.com>
Message-ID: <041c01c7a7b5$0e6a11a0$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 5 giugno 2007 12.40
Oggetto: Re: [Harbour] contrib/hbzlib warnings during make install


> See below.

Most of the warnings can't be eliminated without changing the interface of 
some functions or classes. Others are difficult to eliminate (at least for 
me). Some of them seem errors in the template definitions of the standard C++ 
library of your compiler (although I'm not sure 100%). I think that we can 
leave them alone.

Did you try the two lines of code I showed you in a previous message?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Tue Jun  5 17:11:36 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Jun  5 17:12:14 2007
Subject: [Harbour] contrib/hbzlib warnings during make install
References: <9257026e0706050001t15dd16aaqf7eaaf3afa9f2cc7@mail.gmail.com><003b01c7a740$200a25f0$0100a8c0@emag><9257026e0706050049r2d7ca370uf36405e4106004d5@mail.gmail.com><00fb01c7a75a$994faf60$0100a8c0@emag><9257026e0706050340t7dfac36ax153a245d13757fa4@mail.gmail.com>
	<041c01c7a7b5$0e6a11a0$0100a8c0@emag>
Message-ID: <042f01c7a7b6$19e3e280$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Enrico Maria Giordano" <e.m.giordano@emagsoftware.it>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 5 giugno 2007 23.04
Oggetto: Re: [Harbour] contrib/hbzlib warnings during make install


> Most of the warnings can't be eliminated without changing the interface of 
> some functions or classes.

I forgot that we can use HB_SYMBOL_UNUSED() to eliminate that kind of 
warnings. But I don't think it's worth the while.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at priv.onet.pl  Tue Jun  5 17:41:52 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jun  5 17:42:29 2007
Subject: [Harbour] Tried with -a4 switch
In-Reply-To: <02c601c7a798$8e902f30$0100a8c0@emag>
References: <02c601c7a798$8e902f30$0100a8c0@emag>
Message-ID: <20070605214152.GA16417@localhost.localdomain>

On Tue, 05 Jun 2007, Enrico Maria Giordano wrote:
> I just rebuilt Harbour with -a4 switch and then tried speedtst without 
> noticing any differences.

Probably due to pure clock updating in Windows.
Believe me that using -a4 in BCC produce fastest code.
The difference is not huge but should be noticeable.
F.e. in Harbour HB_ITEM size with -a4 is 16 when with
without (-a8 as default) is 24. So code like:
    aadd(aa,{i,j,s,a,a2,t,bc})
in the speedtst.prg has to be noticeable faster, f.e.:
this are mine results with Linux+Wine BCC GNU make build:
-a4)
    aadd(aa,{i,j,s,a,a2,t,bc}) ->                         2.32
-a8)
    aadd(aa,{i,j,s,a,a2,t,bc}) ->                         3.25 

as you can see aadd() is about 40% slower what is even expected
because it has to resize memory block which is ~50% bigger.
In this test array with 1000x7 items needs ~112KB in -a4 build
and ~168KB -a8.
Bigger internal HVM structures causes also that memory cache is used
in less efficient way and this is also reason of some speed difference
though here much smaller.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Wed Jun  6 02:58:24 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Jun  6 02:59:06 2007
Subject: [Harbour] Tried with -a4 switch
References: <02c601c7a798$8e902f30$0100a8c0@emag>
	<20070605214152.GA16417@localhost.localdomain>
Message-ID: <000401c7a808$13b12650$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: martedi 5 giugno 2007 23.41
Oggetto: Re: [Harbour] Tried with -a4 switch


> Probably due to pure clock updating in Windows.
> Believe me that using -a4 in BCC produce fastest code.

Ok, I will use -a4 from now on, thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From e.m.giordano at emagsoftware.it  Wed Jun  6 03:00:48 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Jun  6 03:01:22 2007
Subject: [Harbour] Tried with -a4 switch
References: <02c601c7a798$8e902f30$0100a8c0@emag>
	<20070605214152.GA16417@localhost.localdomain>
Message-ID: <000701c7a808$69267040$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: martedi 5 giugno 2007 23.41
Oggetto: Re: [Harbour] Tried with -a4 switch


> Believe me that using -a4 in BCC produce fastest code.

Only a question: I have to use -a4 when building Harbour only or even when 
building my apps?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at priv.onet.pl  Wed Jun  6 03:09:17 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun  6 03:09:53 2007
Subject: [Harbour] Tried with -a4 switch
In-Reply-To: <000701c7a808$69267040$0100a8c0@emag>
References: <02c601c7a798$8e902f30$0100a8c0@emag>
	<20070605214152.GA16417@localhost.localdomain>
	<000701c7a808$69267040$0100a8c0@emag>
Message-ID: <20070606070917.GA15055@localhost.localdomain>

On Wed, 06 Jun 2007, Enrico Maria Giordano wrote:
> Only a question: I have to use -a4 when building Harbour only or even when 
> building my apps?

To build Harbour. If I haven't make any mistake then HB_SYMB on 32 bit
platforms should have always 16 bytes with all alignment so .prg code
compiled to PCODE in .c files (-gc[012]) should not be effected by
alignment switches so you can use any you like.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Wed Jun  6 03:20:47 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Jun  6 03:21:23 2007
Subject: [Harbour] Tried with -a4 switch
References: <02c601c7a798$8e902f30$0100a8c0@emag><20070605214152.GA16417@localhost.localdomain><000701c7a808$69267040$0100a8c0@emag>
	<20070606070917.GA15055@localhost.localdomain>
Message-ID: <008b01c7a80b$34526470$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoledi 6 giugno 2007 9.09
Oggetto: Re: [Harbour] Tried with -a4 switch


> To build Harbour. If I haven't make any mistake then HB_SYMB on 32 bit
> platforms should have always 16 bytes with all alignment so .prg code
> compiled to PCODE in .c files (-gc[012]) should not be effected by
> alignment switches so you can use any you like.

Ok, thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From druzus at priv.onet.pl  Wed Jun  6 06:05:31 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun  6 06:06:06 2007
Subject: [Harbour] ChangeLog 2007-06-06 12:05 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070606100531.GA27759@localhost.localdomain>

2007-06-06 12:05 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapicls.h
    * changed extern hb_bProfiler to local HVM static variable
  * harbour/source/vm/hvm.c
    + added two macros HB_NO_TRACE and HB_NO_DEBUG for these people
      who needs/wants to test HVM speed without debugger support
      and PRG call tracing - the difference is rather small

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Wed Jun  6 06:52:14 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jun  6 06:52:17 2007
Subject: [Harbour] Strange class error, segfault in contrib/tip ftp class
Message-ID: <9257026e0706060352u1438aa95gefec7a707fa636e6@mail.gmail.com>

::x := HB_REGCOMP( ... ) return nil
x := HB_REGCOMP( ... ) return compiled regex

For this contrib/tip ftpcln.prg ::Pasv() segfault. Tests below.

Am I wrong?

best regards,
Lorenzo

#include "hbclass.ch"

proc main()

  oCls := cls():New()

wait

return

create class cls

   DATA RegPasv

method new

end class

method new class cls

   ::RegPasv := HB_RegexComp( ;
      "([0-9]*) *, *([0-9]*) *, *([0-9]*) *, *([0-9]*) *, *([0-9]*) *,
*([0-9]*)" )

   alert( ::RegPasv )

return Self

and this code:


proc main

   local x

   x := HB_RegexComp( ;
      "([0-9]*) *, *([0-9]*) *, *([0-9]*) *, *([0-9]*) *, *([0-9]*) *,
*([0-9]*)" )

   ? x

return
From druzus at priv.onet.pl  Wed Jun  6 07:06:29 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun  6 07:07:05 2007
Subject: [Harbour] Strange class error, segfault in contrib/tip ftp class
In-Reply-To: <9257026e0706060352u1438aa95gefec7a707fa636e6@mail.gmail.com>
References: <9257026e0706060352u1438aa95gefec7a707fa636e6@mail.gmail.com>
Message-ID: <20070606110629.GA32414@localhost.localdomain>

On Wed, 06 Jun 2007, Lorenzo Fiorini wrote:
> ::x := HB_REGCOMP( ... ) return nil
> x := HB_REGCOMP( ... ) return compiled regex

No, both return pointer item with compiled regular expression.
Just simply ALERT() shows POINTER and HASH items as NIL - see
rtl/alert.prg. This is Harbour extension (Clipper accept only
strings as allert parameter) which should be updated for new
item types.

> For this contrib/tip ftpcln.prg ::Pasv() segfault. Tests below.

Sorry but I do not see any problems with code below. It works perfectly
for me. If you have some problems with TIP library then please create
some example which can illustrate it. The problem will be probably local
to TIP library.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Wed Jun  6 07:08:13 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jun  6 07:08:17 2007
Subject: [Harbour] 
	Re: Strange class error, segfault in contrib/tip ftp class
In-Reply-To: <9257026e0706060352u1438aa95gefec7a707fa636e6@mail.gmail.com>
References: <9257026e0706060352u1438aa95gefec7a707fa636e6@mail.gmail.com>
Message-ID: <9257026e0706060408p27a8c969r2c2d6571355cb410@mail.gmail.com>

On 6/6/07, Lorenzo Fiorini <lorenzo.fiorini@gmail.com> wrote:

Sorry Harbour alert() returns nil where xHarbour shows the "pointer".

But I've surely a segfault at line aRep := HB_Regex( ::RegPasv,
::cReply ) in code that worked with Harbour before May 18.

Still hunting.

best regards,
Lorenzo

METHOD Pasv() CLASS tIPClientFTP
   LOCAL aRep

   ::InetSendall( ::SocketCon, "PASV" + ::cCRLF )
   IF .not. ::GetReply()
      RETURN .F.
   ENDIF
   // aRep := HB_Regex( ::RegPasv, ::cReply )

   IF Empty(aRep)
      RETURN .F.
   ENDIF
From lorenzo.fiorini at gmail.com  Wed Jun  6 07:14:21 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jun  6 07:14:24 2007
Subject: [Harbour] 
	Re: Strange class error, segfault in contrib/tip ftp class
In-Reply-To: <9257026e0706060408p27a8c969r2c2d6571355cb410@mail.gmail.com>
References: <9257026e0706060352u1438aa95gefec7a707fa636e6@mail.gmail.com>
	<9257026e0706060408p27a8c969r2c2d6571355cb410@mail.gmail.com>
Message-ID: <9257026e0706060414r68a8133dmd49cab8cef2902a8@mail.gmail.com>

On 6/6/07, Lorenzo Fiorini <lorenzo.fiorini@gmail.com> wrote:

I confirm that if I comment aRep := HB_Regex( ::RegPasv, ::cReply )
the segfault goes away. Below the bt.

best regards,
Lorenzo

Program received signal SIGSEGV, Segmentation fault.
0x0017fd1c in memcpy () from /lib/libc.so.6
(gdb) bt
#0  0x0017fd1c in memcpy () from /lib/libc.so.6
#1  0x08076228 in hb_itemPutCL ()
#2  0x080977e4 in hb_regex ()
#3  0x08071a55 in hb_vmDo ()
#4  0x0806d154 in hb_vmExecute ()
#5  0x0810763b in HB_FUN_TIPCLIENTFTP_PASV ()
#6  0x080714e3 in hb_vmSend ()
#7  0x0806ffb4 in hb_vmExecute ()
#8  0x081074bb in HB_FUN_TIPCLIENTFTP_STOR ()
#9  0x080714e3 in hb_vmSend ()
#10 0x0806ffb4 in hb_vmExecute ()
#11 0x0810747b in HB_FUN_TIPCLIENTFTP_WRITE ()
#12 0x080714e3 in hb_vmSend ()
#13 0x0806ffb4 in hb_vmExecute ()
#14 0x0810721b in HB_FUN_TIPCLIENT_WRITEFROMFILE ()
#15 0x080714e3 in hb_vmSend ()
#16 0x0806ffb4 in hb_vmExecute ()
#17 0x0804e36b in HB_FUN_DBF2SQL ()
#18 0x08071a55 in hb_vmDo ()
#19 0x0806d730 in hb_vmExecute ()
#20 0x0804da0b in HB_FUN_SQLCOPY ()
#21 0x08071a55 in hb_vmDo ()
#22 0x0806d730 in hb_vmExecute ()
From druzus at priv.onet.pl  Wed Jun  6 07:26:21 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun  6 07:26:57 2007
Subject: [Harbour] Re: Strange class error,
	segfault in contrib/tip ftp class
In-Reply-To: <9257026e0706060408p27a8c969r2c2d6571355cb410@mail.gmail.com>
References: <9257026e0706060352u1438aa95gefec7a707fa636e6@mail.gmail.com>
	<9257026e0706060408p27a8c969r2c2d6571355cb410@mail.gmail.com>
Message-ID: <20070606112621.GA32723@localhost.localdomain>

On Wed, 06 Jun 2007, Lorenzo Fiorini wrote:
> Sorry Harbour alert() returns nil where xHarbour shows the "pointer".

I do not think so. Just try:
    proc main()
       local x := __PP_INIT()
       ? x, valtype(x)
       alert( x )
    return

> But I've surely a segfault at line aRep := HB_Regex( ::RegPasv,
> ::cReply ) in code that worked with Harbour before May 18.

Maybe. I was changing hb_regxec() C function and it's possible
that I introduced some bugs. Anyhow I need some self contain example
to fix it or at least backtrace C stack but line number information.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jun  6 07:29:05 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun  6 07:29:41 2007
Subject: [Harbour] Re: Strange class error,
	segfault in contrib/tip ftp class
In-Reply-To: <9257026e0706060414r68a8133dmd49cab8cef2902a8@mail.gmail.com>
References: <9257026e0706060352u1438aa95gefec7a707fa636e6@mail.gmail.com>
	<9257026e0706060408p27a8c969r2c2d6571355cb410@mail.gmail.com>
	<9257026e0706060414r68a8133dmd49cab8cef2902a8@mail.gmail.com>
Message-ID: <20070606112905.GB32723@localhost.localdomain>

On Wed, 06 Jun 2007, Lorenzo Fiorini wrote:
> On 6/6/07, Lorenzo Fiorini <lorenzo.fiorini@gmail.com> wrote:
> I confirm that if I comment aRep := HB_Regex( ::RegPasv, ::cReply )
> the segfault goes away. Below the bt.
> Program received signal SIGSEGV, Segmentation fault.
> 0x0017fd1c in memcpy () from /lib/libc.so.6
> (gdb) bt
> #0  0x0017fd1c in memcpy () from /lib/libc.so.6
> #1  0x08076228 in hb_itemPutCL ()
> #2  0x080977e4 in hb_regex ()
[...]

Try to run you code in valgrind and send the log, f.e.:
valgrind --tool=memcheck --leak-check=yes --num-callers=16 -v ./myapp 2> log

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jun  6 07:59:36 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun  6 08:00:15 2007
Subject: [Harbour] Re: Strange class error,
	segfault in contrib/tip ftp class
In-Reply-To: <20070606112905.GB32723@localhost.localdomain>
References: <9257026e0706060352u1438aa95gefec7a707fa636e6@mail.gmail.com>
	<9257026e0706060408p27a8c969r2c2d6571355cb410@mail.gmail.com>
	<9257026e0706060414r68a8133dmd49cab8cef2902a8@mail.gmail.com>
	<20070606112905.GB32723@localhost.localdomain>
Message-ID: <20070606115936.GA1267@localhost.localdomain>

On Wed, 06 Jun 2007, Przemyslaw Czerpak wrote:
> Try to run you code in valgrind and send the log, f.e.:
> valgrind --tool=memcheck --leak-check=yes --num-callers=16 -v ./myapp 2> log

OK, I've found how PCRE regex can be exploited by current code
due to some workaround which I copied from xHarbour and which
exists probably due to some historical reasons.
I'll add workaround for it this workaround ;-) in a while.
Please try if it helps. Later we can check if we can safely remove it.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jun  6 08:02:18 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun  6 08:02:53 2007
Subject: [Harbour] ChangeLog 2007-06-06 13:02 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070606120218.GB1267@localhost.localdomain>

2007-06-06 14:02 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/hbregex.c
    ! added workaround for some wrong hack (to check if both can be
      safely removed)

best regards,
Przemek
From i at kevincarmody.com  Wed Jun  6 08:03:00 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Wed Jun  6 08:03:00 2007
Subject: [Harbour] Bit operator
In-Reply-To: <e78b63l3thaurm1iqf97a00vilt1c95s59@4ax.com>
References: <e78b63l3thaurm1iqf97a00vilt1c95s59@4ax.com>
Message-ID: <4666A274.4090103@kevincarmody.com>

Toninho@fwi wrote:
> I?m trying to test my application with Harbour but I can?t due to
> missing bit operators like:
>
>    ? 8 & 0
>    ? 8 | 0
>
> Any ideas please?

They're not missing, but just have different names.  NUMAND/X, NUMOR/X,  
NUMNOT/X,  NUMXOR/X, etc.  There are also CHRAND/X etc. for strings.

Kevin
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070606/46396711/attachment-0001.html
From lorenzo.fiorini at gmail.com  Wed Jun  6 08:26:41 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jun  6 08:26:44 2007
Subject: [Harbour] Re: Strange class error,
	segfault in contrib/tip ftp class
In-Reply-To: <20070606115936.GA1267@localhost.localdomain>
References: <9257026e0706060352u1438aa95gefec7a707fa636e6@mail.gmail.com>
	<9257026e0706060408p27a8c969r2c2d6571355cb410@mail.gmail.com>
	<9257026e0706060414r68a8133dmd49cab8cef2902a8@mail.gmail.com>
	<20070606112905.GB32723@localhost.localdomain>
	<20070606115936.GA1267@localhost.localdomain>
Message-ID: <9257026e0706060526i23ea1203n6a38f9d502159fd7@mail.gmail.com>

On 6/6/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> Please try if it helps. Later we can check if we can safely remove it.

Many thanks, but I still have the segfault.

I've attached the valgrind log if it helps.

best regards,
Lorenzo
-------------- next part --------------
A non-text attachment was scrubbed...
Name: log.tgz
Type: application/x-gzip
Size: 3717 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070606/abe5a592/log.tgz
From lorenzo.fiorini at gmail.com  Wed Jun  6 08:40:21 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jun  6 08:40:24 2007
Subject: [Harbour] Re: Strange class error,
	segfault in contrib/tip ftp class
In-Reply-To: <20070606112621.GA32723@localhost.localdomain>
References: <9257026e0706060352u1438aa95gefec7a707fa636e6@mail.gmail.com>
	<9257026e0706060408p27a8c969r2c2d6571355cb410@mail.gmail.com>
	<20070606112621.GA32723@localhost.localdomain>
Message-ID: <9257026e0706060540y27dcfbd8g3544fa11f8a8c5da@mail.gmail.com>

On 6/6/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> Anyhow I need some self contain example
> to fix it or at least backtrace C stack but line number information.

At last I got it. I was looking at the wrong place, what matters in
this case is the strings not the compiled regex.

Test below.

best regards,
Lorenzo

proc main

   local x

   x := HB_RegexComp( ;
      "([0-9]*) *, *([0-9]*) *, *([0-9]*) *, *([0-9]*) *, *([0-9]*) *,
*([0-9]*)" )

   HB_Regex( x, "(227 Entering Passive Mode 192,168,5,5,103,154)" )

return
From druzus at priv.onet.pl  Wed Jun  6 08:43:03 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun  6 08:43:39 2007
Subject: [Harbour] Re: Strange class error,
	segfault in contrib/tip ftp class
In-Reply-To: <9257026e0706060526i23ea1203n6a38f9d502159fd7@mail.gmail.com>
References: <9257026e0706060352u1438aa95gefec7a707fa636e6@mail.gmail.com>
	<9257026e0706060408p27a8c969r2c2d6571355cb410@mail.gmail.com>
	<9257026e0706060414r68a8133dmd49cab8cef2902a8@mail.gmail.com>
	<20070606112905.GB32723@localhost.localdomain>
	<20070606115936.GA1267@localhost.localdomain>
	<9257026e0706060526i23ea1203n6a38f9d502159fd7@mail.gmail.com>
Message-ID: <20070606124303.GA8028@localhost.localdomain>

On Wed, 06 Jun 2007, Lorenzo Fiorini wrote:
> On 6/6/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:
> >Please try if it helps. Later we can check if we can safely remove it.
> Many thanks, but I still have the segfault.
> I've attached the valgrind log if it helps.

If you are sure it was Harbour version with my modification then I will need
real example. Please try to catch HB_REGEX call inside TIPCLIENTFTP_PASV()
and check what string is passed. It should allow to create self contain
example.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Wed Jun  6 08:59:29 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jun  6 08:59:39 2007
Subject: [Harbour] Re: Strange class error,
	segfault in contrib/tip ftp class
In-Reply-To: <20070606124303.GA8028@localhost.localdomain>
References: <9257026e0706060352u1438aa95gefec7a707fa636e6@mail.gmail.com>
	<9257026e0706060408p27a8c969r2c2d6571355cb410@mail.gmail.com>
	<9257026e0706060414r68a8133dmd49cab8cef2902a8@mail.gmail.com>
	<20070606112905.GB32723@localhost.localdomain>
	<20070606115936.GA1267@localhost.localdomain>
	<9257026e0706060526i23ea1203n6a38f9d502159fd7@mail.gmail.com>
	<20070606124303.GA8028@localhost.localdomain>
Message-ID: <9257026e0706060559p7e2cece8ra65e9e9d90a1bd05@mail.gmail.com>

On 6/6/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> If you are sure it was Harbour version with my modification then I will need
> real example. Please try to catch HB_REGEX call inside TIPCLIENTFTP_PASV()
> and check what string is passed. It should allow to create self contain
> example.

I'm not sure you get my last message so I'll add it here below.

best regards,
Lorenzo

...

At last I got it. I was looking at the wrong place, what matters in
this case is the strings not the compiled regex.

Test below.

best regards,
Lorenzo

proc main

  local x

  x := HB_RegexComp( ;
     "([0-9]*) *, *([0-9]*) *, *([0-9]*) *, *([0-9]*) *, *([0-9]*) *,
*([0-9]*)" )

  HB_Regex( x, "(227 Entering Passive Mode 192,168,5,5,103,154)" )

return

...
From toninhofwi at yahoo.com.br  Wed Jun  6 09:00:36 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Jun  6 09:02:05 2007
Subject: [Harbour] Bit operator
In-Reply-To: <4666A274.4090103@kevincarmody.com>
References: <e78b63l3thaurm1iqf97a00vilt1c95s59@4ax.com>
	<4666A274.4090103@kevincarmody.com>
Message-ID: <osbd63tvsep9m8vmaj620fn62msormfvv6@4ax.com>

>They're not missing, but just have different names.  NUMAND/X, NUMOR/X,  
>NUMNOT/X,  NUMXOR/X, etc.  There are also CHRAND/X etc. for strings.

Kevin, thanks, but I don?t understand. Can you give me a small PRG
sample please?

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From druzus at priv.onet.pl  Wed Jun  6 09:34:58 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun  6 09:35:33 2007
Subject: [Harbour] Re: Strange class error,
	segfault in contrib/tip ftp class
In-Reply-To: <9257026e0706060540y27dcfbd8g3544fa11f8a8c5da@mail.gmail.com>
References: <9257026e0706060352u1438aa95gefec7a707fa636e6@mail.gmail.com>
	<9257026e0706060408p27a8c969r2c2d6571355cb410@mail.gmail.com>
	<20070606112621.GA32723@localhost.localdomain>
	<9257026e0706060540y27dcfbd8g3544fa11f8a8c5da@mail.gmail.com>
Message-ID: <20070606133458.GA16786@localhost.localdomain>

On Wed, 06 Jun 2007, Lorenzo Fiorini wrote:
> On 6/6/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:
> >Anyhow I need some self contain example
> >to fix it or at least backtrace C stack but line number information.
> At last I got it. I was looking at the wrong place, what matters in
> this case is the strings not the compiled regex.

Thank you for the example - fixed.

best regards,
Przemek
From philb at philb.us  Wed Jun  6 09:37:47 2007
From: philb at philb.us (Phil Barnett)
Date: Wed Jun  6 09:37:51 2007
Subject: [Harbour] Beta 3
Message-ID: <200706060937.47549.philb@philb.us>


Przemek, where are we along the road to Beta 3 status?

-- 
Phil Barnett
AI4OF
SKCC #600
From druzus at priv.onet.pl  Wed Jun  6 09:40:50 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun  6 09:41:26 2007
Subject: [Harbour] ChangeLog 2007-06-06 15:40 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070606134050.GA17016@localhost.localdomain>

2007-06-06 15:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbregex.h
  * harbour/source/rtl/hbregex.c
    ! fixed GPF and removed two hacks

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Wed Jun  6 09:45:25 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jun  6 09:45:33 2007
Subject: [Harbour] Re: Strange class error,
	segfault in contrib/tip ftp class
In-Reply-To: <20070606133458.GA16786@localhost.localdomain>
References: <9257026e0706060352u1438aa95gefec7a707fa636e6@mail.gmail.com>
	<9257026e0706060408p27a8c969r2c2d6571355cb410@mail.gmail.com>
	<20070606112621.GA32723@localhost.localdomain>
	<9257026e0706060540y27dcfbd8g3544fa11f8a8c5da@mail.gmail.com>
	<20070606133458.GA16786@localhost.localdomain>
Message-ID: <9257026e0706060645i1ba8d5a7i4ce7ac66308b563e@mail.gmail.com>

On 6/6/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> Thank you for the example - fixed.

Many thanks to you, it is ok now.

best regards,
Lorenzo
From druzus at priv.onet.pl  Wed Jun  6 09:46:46 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun  6 09:47:22 2007
Subject: [Harbour] Beta 3
In-Reply-To: <200706060937.47549.philb@philb.us>
References: <200706060937.47549.philb@philb.us>
Message-ID: <20070606134646.GB17016@localhost.localdomain>

On Wed, 06 Jun 2007, Phil Barnett wrote:
> Przemek, where are we along the road to Beta 3 status?

I'm ready. I've just committed fix for PCRE regex reported by Lorenzo
and I do not know about anything what I should fix yet. I'll sync DEVEL
and BETA branch soon.
But there is still open question about some .prg code like BROWSE or
GET classes. Lorenzo suggested to borrow them from xHarbour. Probably
they are better but they are also not perfect. I do not know what is
the final decision about these code. Victor?
Here I cannot help - sorry but I have to leave some code also for
other developers ;-)
If we do not plan to make some modifications with this code then I can
set Beta3 tag even today.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jun  6 10:09:41 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun  6 10:10:17 2007
Subject: [Harbour] ChangeLog BETA 2007-06-06 16:10 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
Message-ID: <20070606140941.GA17759@localhost.localdomain>

2007-06-06 16:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * synced with modifications in DEVEL branch:
    * harbour/include/hbregex.h
    * harbour/source/rtl/hbregex.c
      ! fixed GPF
    * harbour/include/hbapicls.h
      * changed extern hb_bProfiler to local HVM static variable
    * harbour/source/vm/hvm.c
      + added two macros HB_NO_TRACE and HB_NO_DEBUG for these people
        who needs/wants to test HVM speed without debugger support
        and PRG call tracing - the difference is rather small
    * harbour/contrib/hbzlib/zip.c
      * cleaned a couple of warnings
    * harbour/include/hbcompdf.h
    * harbour/include/hbexpra.c
    * harbour/source/common/expropt2.c
      + added optimization for <constValue> == NIL, <constValue> = NIL,
        <constValue> != NIL
      ! disabled in macro compiler buggy Clipper compiler optimization
        for expressions like: AT( "", "" ), "" $ "", CHR(256)
     * harbour/doc/linux1st.txt
       + Added info about required Ubuntu packages.
     * harbour/utils/hbtest/rt_hvma.prg
     * harbour/utils/hbtest/rt_str.prg
       + Added two more tests for "" $ "" / At( "", "" ) combinations.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Wed Jun  6 10:23:39 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Jun  6 10:24:15 2007
Subject: [Harbour] Beta 3
References: <200706060937.47549.philb@philb.us>
	<20070606134646.GB17016@localhost.localdomain>
Message-ID: <004f01c7a846$46d093c0$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoledi 6 giugno 2007 15.46
Oggetto: Re: [Harbour] Beta 3


> Here I cannot help - sorry but I have to leave some code also for
> other developers ;-)

Yes, or we will have to call Harbour "Przemek.exe". :-)))

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From makis1970 at gmail.com  Wed Jun  6 10:43:08 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Wed Jun  6 10:47:02 2007
Subject: [Harbour] ALT_X combinations and language settings
Message-ID: <004a01c7a849$011809a0$03481ce0$@com>

Przemek,
Does Harbour have the same problem as xharbour with the ALT_X  combinations
and non English writing ?
To be more specific if you don't remember our conversation months ago I
include your answer
>I agree that current version of extended key code support is not acceptable
for many programs.
>?To make it well it will be necessary to change the internal keyboard 
>and other events (like mouse) queue to use extended keycodes in all
>GT drivers and then add final translation to standard keycodes in inkey().
>We can extend INKEY_* flags and add INKEY_EXT or INKEY_RAW to access
>extended key codes without translations.
>I thought it was done in such way - I haven't checked of details in
>current implementation - but your message suggest it wasn't. So now
>we have to choices - add function to translate extended keycodes to
>standard ones accessible from .prg code and call this function in
>INKEY() when INKEY_EXT is not set to translate extended key codes
>to the original Clipper values. I only hope that such translation
>can be done - I haven't analyzed extended key codes values.
>
>best regards,
>Przemek

We have the following problem. In a dos console application we get the same
value for any ALT_E combination but thats not true for xHarbour. Under
windows we are using kbdhe.com from microsoft to be possible to write non
latin characters in a console application. Under xharbour there is no need
for this because xHarbour using the internal windows mechanism. As for the
problem, under Clipper when we are writing in english or non english
characters we are getting the same value for ALT_E but under xHarbour we
are getting different codes that's not included in inkey.ch. Is there any
solution for this or i have to find every combination in non latin
character set and change all my programs to check both combinations? 

Thanks in advance
Mike Evans

#Include "inkey.ch"

Procedure main()
Cls
 Do While LastKey() # K_ESC
     @ 10,10 say Inkey(0)
 Enddo
Return

Best regards
Mike Evans

From lkrausem at shaw.ca  Wed Jun  6 11:51:27 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Wed Jun  6 11:53:59 2007
Subject: [Harbour] CVS error
Message-ID: <4666D7FF.6000501@shaw.ca>

Hi guys

I've tried several times in the past 12 hours to get the current devel 
branch,
but I get this error (I use Tortoise)

cvs [update aborted]: unrecognized operation '\x20' in 
/cvsroot/harbour-project/harbour/ChangeLog,v

Any clues?

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From e.m.giordano at emagsoftware.it  Wed Jun  6 12:56:35 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Jun  6 12:57:11 2007
Subject: [Harbour] CVS error
References: <4666D7FF.6000501@shaw.ca>
Message-ID: <017d01c7a85b$a4209ec0$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Luis Krause Mantilla" <lkrausem@shaw.ca>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoled? 6 giugno 2007 17.51
Oggetto: [Harbour] CVS error


> Hi guys
>
> I've tried several times in the past 12 hours to get the current devel 
> branch,
> but I get this error (I use Tortoise)
>
> cvs [update aborted]: unrecognized operation '\x20' in 
> /cvsroot/harbour-project/harbour/ChangeLog,v
>
> Any clues?

Try manually putting "beta2" as the branch name (without quotes).

I get that error if I try to refresh the branch list.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From lorenzo.fiorini at gmail.com  Wed Jun  6 13:01:23 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jun  6 13:01:31 2007
Subject: [Harbour] Beta 3
In-Reply-To: <20070606134646.GB17016@localhost.localdomain>
References: <200706060937.47549.philb@philb.us>
	<20070606134646.GB17016@localhost.localdomain>
Message-ID: <9257026e0706061001q690b74a2m77005ebe95724b2a@mail.gmail.com>

On 6/6/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> But there is still open question about some .prg code like BROWSE or
> GET classes. Lorenzo suggested to borrow them from xHarbour. Probably
> they are better but they are also not perfect. I do not know what is
> the final decision about these code. Victor?

Just to be clear those prg OPTIONALLY use HB_EXT_INKEY codes and for
me this is a must-have requirement ( to have the possibility to build
Harbour with it not to have it as default ). I know that it is not the
best solution but IMHO life is too short to rewrite things like
tbrowse and memoedit :)

It'll be interesting to know how many developers still use "textUI".
Looking at SF downloads it seems clear that the the main audience of
Harbour are Windows/bcc32 developers and since I guess that other got
Harbour "bundled" with FiveWin or minigui numbers are probably much
higher.
Nevertheless in the past there have been 622 build46 mandriva
downloads and more recently 140 beta 2 for fc5 downloads.

best regards,
Lorenzo
From i at kevincarmody.com  Wed Jun  6 13:08:30 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Wed Jun  6 13:08:25 2007
Subject: [Harbour] Bit operator
In-Reply-To: <osbd63tvsep9m8vmaj620fn62msormfvv6@4ax.com>
References: <e78b63l3thaurm1iqf97a00vilt1c95s59@4ax.com>	<4666A274.4090103@kevincarmody.com>
	<osbd63tvsep9m8vmaj620fn62msormfvv6@4ax.com>
Message-ID: <4666EA0E.2020909@kevincarmody.com>

Toninho@fwi wrote:
>> They're not missing, but just have different names.  NUMAND/X, NUMOR/X,  
>> NUMNOT/X,  NUMXOR/X, etc.  There are also CHRAND/X etc. for strings.
>>     
>
> Kevin, thanks, but I don?t understand. Can you give me a small PRG
> sample please?

I don't have one, but take a look at the comments in 
contrib\libct\bit1.c and contrib\libct\bit3.c in the Harbour source code.

Kevin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070606/47a45bc8/attachment.html
From harbour.01 at syenar.hu  Wed Jun  6 14:10:23 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jun  6 14:10:31 2007
Subject: [Harbour] Beta 3
In-Reply-To: <20070606134646.GB17016@localhost.localdomain>
References: <200706060937.47549.philb@philb.us>
	<20070606134646.GB17016@localhost.localdomain>
Message-ID: <A33C1743-4687-4F49-B306-081821AB5734@syenar.hu>

> I'm ready. I've just committed fix for PCRE regex reported by Lorenzo
> and I do not know about anything what I should fix yet. I'll sync  
> DEVEL
> and BETA branch soon.
> But there is still open question about some .prg code like BROWSE or
> GET classes. Lorenzo suggested to borrow them from xHarbour. Probably
> they are better but they are also not perfect. I do not know what is
> the final decision about these code. Victor?

Let's please leave that to BETA4. I won't have time to do any advances
in BETA3, and xhb code is so hacky and crashes in so many places
(I've tried TBROWSE only) when tried with my large app, that I'd feel it
a bit early to just copy them in as they are. The other problem is that
we'd lose several dozens of fixes I did a few weeks ago by just copying
them in. (There were also other changes, like getting rid of old  
tokenizer
hacks and so on)

Brgds,
Viktor


From harbour.01 at syenar.hu  Wed Jun  6 14:13:11 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jun  6 14:13:19 2007
Subject: [Harbour] Bit operator
In-Reply-To: <4666EA0E.2020909@kevincarmody.com>
References: <e78b63l3thaurm1iqf97a00vilt1c95s59@4ax.com>	<4666A274.4090103@kevincarmody.com>
	<osbd63tvsep9m8vmaj620fn62msormfvv6@4ax.com>
	<4666EA0E.2020909@kevincarmody.com>
Message-ID: <F14ACD73-CAC4-4C62-BBC9-0764C3968FBA@syenar.hu>

They are CA-Tools compatible functions to handle bit-level operations.

? NUMAND( 255, 128 )

Brgds,
Viktor

On 2007.06.06., at 19:08, Kevin Carmody wrote:

> Toninho@fwi wrote:
>>> They're not missing, but just have different names. NUMAND/X,  
>>> NUMOR/X, NUMNOT/X, NUMXOR/X, etc. There are also CHRAND/X etc.  
>>> for strings.
>> Kevin, thanks, but I don?t understand. Can you give me a small PRG  
>> sample please?
>
> I don't have one, but take a look at the comments in contrib\libct 
> \bit1.c and contrib\libct\bit3.c in the Harbour source code.
>
> Kevin
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From e.m.giordano at emagsoftware.it  Wed Jun  6 16:48:00 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Jun  6 16:48:35 2007
Subject: [Harbour] Memory footprint
Message-ID: <00ea01c7a87b$f884b940$0100a8c0@emag>

I'm comparing the same app compiled with Harbour and with xHarbour and 
noticing that the Harbour compiled one has a reduced memory footprint (4892 KB 
vs. 5280 KB).

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From lkrausem at shaw.ca  Wed Jun  6 23:44:23 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Wed Jun  6 23:46:25 2007
Subject: [Harbour] CVS error
In-Reply-To: <017d01c7a85b$a4209ec0$0100a8c0@emag>
References: <4666D7FF.6000501@shaw.ca> <017d01c7a85b$a4209ec0$0100a8c0@emag>
Message-ID: <46677F17.6090809@shaw.ca>

Enrico:

Unfortunately, I get the same error if trying to get the beta2 branch :-(

cvs [update aborted]: unrecognized operation '\x20' in 
/cvsroot/harbour-project/harbour/ChangeLog,v


need some more ideas here :-0

Enrico Maria Giordano wrote:

>
> -----Messaggio Originale----- Da: "Luis Krause Mantilla" 
> <lkrausem@shaw.ca>
> A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
> Data invio: mercoled? 6 giugno 2007 17.51
> Oggetto: [Harbour] CVS error
>
>
>> Hi guys
>>
>> I've tried several times in the past 12 hours to get the current 
>> devel branch,
>> but I get this error (I use Tortoise)
>>
>> cvs [update aborted]: unrecognized operation '\x20' in 
>> /cvsroot/harbour-project/harbour/ChangeLog,v
>>
>> Any clues?
>
>
> Try manually putting "beta2" as the branch name (without quotes).
>
> I get that error if I try to refresh the branch list.
>
> EMG
>
> -- 
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From lkrausem at shaw.ca  Wed Jun  6 23:49:02 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Wed Jun  6 23:51:00 2007
Subject: [Harbour] CVS error
In-Reply-To: <017d01c7a85b$a4209ec0$0100a8c0@emag>
References: <4666D7FF.6000501@shaw.ca> <017d01c7a85b$a4209ec0$0100a8c0@emag>
Message-ID: <4667802E.1030806@shaw.ca>

Some more info

If I check the "Simulate update" checkbox in Tortoise, it does indeed
run the simulation and get no errors, but as soon as I try to get the
real thing, I get the same error again (doesn't seem to matter if I choose
HEAD, beta1 or beta2.

Regards,

Enrico Maria Giordano wrote:

>
> -----Messaggio Originale----- Da: "Luis Krause Mantilla" 
> <lkrausem@shaw.ca>
> A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
> Data invio: mercoled? 6 giugno 2007 17.51
> Oggetto: [Harbour] CVS error
>
>
>> Hi guys
>>
>> I've tried several times in the past 12 hours to get the current 
>> devel branch,
>> but I get this error (I use Tortoise)
>>
>> cvs [update aborted]: unrecognized operation '\x20' in 
>> /cvsroot/harbour-project/harbour/ChangeLog,v
>>
>> Any clues?
>
>
> Try manually putting "beta2" as the branch name (without quotes).
>
> I get that error if I try to refresh the branch list.
>
> EMG
>
> -- 
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From niki at synel.co.il  Thu Jun  7 01:14:46 2007
From: niki at synel.co.il (Chen Kedem)
Date: Thu Jun  7 01:15:47 2007
Subject: [Harbour] CVS error
Message-ID: <46679446.735@synel.co.il>

Luis,

> need some more ideas here :-0

Please look at this thread from last month:
SF Project CVS Service
http://lists.harbour-project.org/pipermail/harbour/2007-May/001698.html

The file is still broken, since no one had suggested any solution
to it (or find a script/program to fix broken v files).

  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From lkrausem at shaw.ca  Thu Jun  7 02:06:52 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Thu Jun  7 02:09:15 2007
Subject: [Harbour] CVS error
In-Reply-To: <46679446.735@synel.co.il>
References: <46679446.735@synel.co.il>
Message-ID: <4667A07C.7070801@shaw.ca>

Chen:

Since I have no idea how to apply the fix SF suggests, I just
deleted my local changlog file and that did the trick.

Go figure.

Thanks!

Chen Kedem wrote:

>Luis,
>
>  
>
>>need some more ideas here :-0
>>    
>>
>
>Please look at this thread from last month:
>SF Project CVS Service
>http://lists.harbour-project.org/pipermail/harbour/2007-May/001698.html
>
>The file is still broken, since no one had suggested any solution
>to it (or find a script/program to fix broken v files).
>
>  Chen.
>**********************************************************************************************
>IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
>named recipient(s) only.
>If you have received this email in error, please notify the system manager or the sender immediately and do 
>not disclose the contents to anyone or make copies thereof.
>*** eSafe scanned this email for viruses, vandals, and malicious content. ***
>**********************************************************************************************
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>  
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070606/b9d0a538/attachment-0001.html
From e.m.giordano at emagsoftware.it  Thu Jun  7 02:37:58 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Thu Jun  7 02:38:33 2007
Subject: [Harbour] CVS error
References: <4666D7FF.6000501@shaw.ca> <017d01c7a85b$a4209ec0$0100a8c0@emag>
	<4667802E.1030806@shaw.ca>
Message-ID: <002801c7a8ce$6326e050$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Luis Krause Mantilla" <lkrausem@shaw.ca>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: gioved? 7 giugno 2007 5.49
Oggetto: Re: [Harbour] CVS error


> Some more info
>
> If I check the "Simulate update" checkbox in Tortoise, it does indeed
> run the simulation and get no errors, but as soon as I try to get the
> real thing, I get the same error again (doesn't seem to matter if I choose
> HEAD, beta1 or beta2.

It seems something went wrong with the CVS... :-(

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Thu Jun  7 02:40:36 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Thu Jun  7 02:41:11 2007
Subject: [Harbour] CVS error
References: <46679446.735@synel.co.il> <4667A07C.7070801@shaw.ca>
Message-ID: <004501c7a8ce$c191b6b0$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Luis Krause Mantilla" <lkrausem@shaw.ca>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: gioved? 7 giugno 2007 8.06
Oggetto: Re: [Harbour] CVS error


> Chen:
>
> Since I have no idea how to apply the fix SF suggests, I just
> deleted my local changlog file and that did the trick.
>
> Go figure.

Great! :-)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Thu Jun  7 02:45:44 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jun  7 02:45:50 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <46679446.735@synel.co.il>
References: <46679446.735@synel.co.il>
Message-ID: <CB74D260-3417-4407-BA6C-B5DB7A9FE0BB@syenar.hu>

Hi all,

I'd again like to propose to switch to SVN from CVS.

It simply beats CVS in every single way, while the
usage is practically similar (if not it's just simpler)
to CVS. OS support is also similar, and the product
is mature and stable. The conversion is automatic.
All popular CVS shell/extension products support
SVN as well, you can get TortoiseSVN, ViewVC,
Trac, etc.

Any opinions?

Brgds,
Viktor

From antonioharbour at gmail.com  Thu Jun  7 02:56:26 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Jun  7 02:56:38 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <CB74D260-3417-4407-BA6C-B5DB7A9FE0BB@syenar.hu>
Message-ID: <4667ac21.1fd9f794.7436.ffffe78d@mx.google.com>

Viktor,

My vote is to continue using CVS

Regards,

Antonio

From lorenzo.fiorini at gmail.com  Thu Jun  7 03:16:17 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Jun  7 03:16:21 2007
Subject: [Harbour] Beta 3
In-Reply-To: <A33C1743-4687-4F49-B306-081821AB5734@syenar.hu>
References: <200706060937.47549.philb@philb.us>
	<20070606134646.GB17016@localhost.localdomain>
	<A33C1743-4687-4F49-B306-081821AB5734@syenar.hu>
Message-ID: <9257026e0706070016j1b494961y298f3ee60b3dcef6@mail.gmail.com>

On 6/6/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Let's please leave that to BETA4. I won't have time to do any advances
> in BETA3, and xhb code is so hacky and crashes in so many places
> (I've tried TBROWSE only) when tried with my large app, that I'd feel it
> a bit early to just copy them in as they are.

tbrowse is a complex object and probably we use it differently, but in
weeks of tests I never got a single "crash" due to that code and I'm
getting the expected results compared with C53b.

Probably I need to review my test procedures :)

Could you keep me informed where you find bugs?
That is my xHarbour production code and I'd like to prevent error reports.

> The other problem is that
> we'd lose several dozens of fixes I did a few weeks ago by just copying
> them in.

I've tried to test your tget.prg fixes but as I told you I still get
an Error/BASE 1082 at the very beginning of my get test ( see below ).

Also menu system gives an Error/BASE 1081 at the beginning using the
"official" C53b sample/menu.prg.

> (There were also other changes, like getting rid of old
> tokenizer
> hacks and so on)

Probably they are in methods/functions I don't call and I've missed with grep.
I'll recheck.

best regards,
Lorenzo

// guitest.prg

#include "inkey.ch"

procedure main

   local cState, cColor, oTB, uDummy, lReadOnly, lCancel, Getlist, aGroup

   SET EVENTMASK TO INKEY_ALL

   clear

   @ 2, 5 GET lCancel PUSHBUTTON ;
                CAPTION "Ca&ncel" ;
                STATE { || ReadKill( .T. ) }

   cState := "NY"

   @ 5, 20, 10, 30 GET cState LISTBOX { { "Alabama", "AL" }, ;
                                     { "Alaska", "AK" }   , ;
                                     { "Arizona", "AZ" }, ;
                                     { "New York", "NY" } } ;
                CAPTION "&State" ;
                MESSAGE "Select the client's state"

   lReadOnly := .F.

   @ 5, 40 GET lReadOnly CHECKBOX ;
                CAPTION "&Read Only" ;
                MESSAGE "Check to open file for reading only" ;
                STYLE "[X ]"

   cColor := "R"          //default to red.
        aGroup := ARRAY( 3 )
        aGroup[ 1 ] := RadioButto( 16, 22, "&Red", "R" )
        aGroup[ 2 ] := RadioButto( 17, 22, "&Green", "G" )
        aGroup[ 3 ] := RadioButto( 18, 22, "&Blue", "B" )
        @ 15, 20, 24, 40 GET cColor RADIOGROUP aGroup

   use test

   oTB := TBrowseDB( 7, 50, 20, 70 )
        oTB:AddColumn(tbColumnNew("Last Name",{||test->first}))
        oTB:AddColumn(tbColumnNew("First Name",{||test->last}))
        oTB:AddColumn(tbColumnNew("Street",{||test->street}))
        uDummy := NIL
        oTB:HeadSep := "-"
        oTB:ColSep := "|"
        @ 7, 50, 20, 70 GET uDummy TBROWSE oTB

   READ

   return

// end of guitest.prg
From philb at philb.us  Thu Jun  7 03:23:03 2007
From: philb at philb.us (Phil Barnett)
Date: Thu Jun  7 03:23:06 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <CB74D260-3417-4407-BA6C-B5DB7A9FE0BB@syenar.hu>
References: <46679446.735@synel.co.il>
	<CB74D260-3417-4407-BA6C-B5DB7A9FE0BB@syenar.hu>
Message-ID: <200706070323.03488.philb@philb.us>

On Thursday 07 June 2007 02:45, Szak?ts Viktor wrote:
> Hi all,
>
> I'd again like to propose to switch to SVN from CVS.
>
> It simply beats CVS in every single way, while the
> usage is practically similar (if not it's just simpler)
> to CVS. OS support is also similar, and the product
> is mature and stable. The conversion is automatic.
> All popular CVS shell/extension products support
> SVN as well, you can get TortoiseSVN, ViewVC,
> Trac, etc.
>
> Any opinions?

It's a good idea. SVN is far more stable and is as easy to work with as CVS.

In fact, it was created in the user interface image of CVS but with better 
underpinnings to cure shortcomings of CVS. This explains why they are so much 
alike in their user interface.

I'd vote yes.

-- 
Phil Barnett
AI4OF
SKCC #600
From niki at synel.co.il  Thu Jun  7 03:32:45 2007
From: niki at synel.co.il (Chen Kedem)
Date: Thu Jun  7 03:33:51 2007
Subject: [Harbour] CVS to SVN?
Message-ID: <4667B49D.6B6C@synel.co.il>

As I understand, the main difference is the internal storage.
While CVS save each file and its versions in one v file which is
a text file, SVN save everything inside a database.
While make easier to maintain, in case of a database crash - you are
in a problem. You need to backup often, something we don't do at all at
the moment (and if we had a backup of our CVS tree, we could had
just replace the broken v file).


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From sscc at mweb.co.za  Thu Jun  7 03:34:26 2007
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Jun  7 03:35:02 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <CB74D260-3417-4407-BA6C-B5DB7A9FE0BB@syenar.hu>
References: <46679446.735@synel.co.il>
	<CB74D260-3417-4407-BA6C-B5DB7A9FE0BB@syenar.hu>
Message-ID: <4667B502.2040405@mweb.co.za>

Szak?ts Viktor wrote:
> I'd again like to propose to switch to SVN from CVS.
> 
> It simply beats CVS in every single way, while the
> usage is practically similar (if not it's just simpler)
> to CVS. OS support is also similar, and the product
> is mature and stable. The conversion is automatic.
> All popular CVS shell/extension products support
> SVN as well, you can get TortoiseSVN, ViewVC,
> Trac, etc.
> 
> Any opinions?

I agree, lets move on.

Regards
Alex
From antonioharbour at gmail.com  Thu Jun  7 03:39:34 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Jun  7 03:39:46 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <200706070323.03488.philb@philb.us>
Message-ID: <4667b63d.40146097.5725.0c37@mx.google.com>

We have been using CVS for almost eight years and see how much Harbour has
evolved and grown

When a tool works and does it fine, it has no sense to replace it

Besides that, all tools have a learning curve, and hidden problems to
suffer, learn the hard way and try to solve

Also, as Chen says, if such database crashes, pffff

The first rule of computing: If something works and does it fine, don't
touch it :-)


Antonio

From harbour.01 at syenar.hu  Thu Jun  7 03:41:12 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jun  7 03:41:30 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <4667B49D.6B6C@synel.co.il>
References: <4667B49D.6B6C@synel.co.il>
Message-ID: <BD19A111-6C61-4CC0-85CB-5722289E6458@syenar.hu>

> As I understand, the main difference is the internal storage.
> While CVS save each file and its versions in one v file which is
> a text file, SVN save everything inside a database.
> While make easier to maintain, in case of a database crash - you are
> in a problem. You need to backup often, something we don't do at  
> all at
> the moment (and if we had a backup of our CVS tree, we could had
> just replace the broken v file).

This is not so now (I think it was true for few years old versions).

Now SVN is using one repo file per real file. The repo files are
not pure text files, but mostly readable (I've just checked).
(notice that SVN supports proper diffing for binary files too)

Practice shows that CVS is vulnerable too, and despite
using pure text repo files, we're still in trouble with our ChangeLog.

No file-format is a replacement for proper backup. (I was under
the impression that sf.net does do backups)

Brgds,
Viktor



From philb at philb.us  Thu Jun  7 03:42:03 2007
From: philb at philb.us (Phil Barnett)
Date: Thu Jun  7 03:42:07 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <4667B49D.6B6C@synel.co.il>
References: <4667B49D.6B6C@synel.co.il>
Message-ID: <200706070342.03998.philb@philb.us>

On Thursday 07 June 2007 03:32, Chen Kedem wrote:
> As I understand, the main difference is the internal storage.
> While CVS save each file and its versions in one v file which is
> a text file, SVN save everything inside a database.
> While make easier to maintain, in case of a database crash - you are
> in a problem. You need to backup often, something we don't do at all at
> the moment (and if we had a backup of our CVS tree, we could had
> just replace the broken v file).

The current problem can be fixed very easily.

We need to have SF delete both the changelog and the changelog,v file and then 
someone needs to re upload it. Yes, we will lose the history of the 
changelog. So what?

I can automate a backup copy of the repository and put it on the web site 
where anyone can grab it.

No problem.

-- 
Phil Barnett
AI4OF
SKCC #600
From harbour.01 at syenar.hu  Thu Jun  7 03:47:33 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jun  7 03:47:44 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <4667b63d.40146097.5725.0c37@mx.google.com>
References: <4667b63d.40146097.5725.0c37@mx.google.com>
Message-ID: <A66199C3-38F7-40EA-B0F2-BEF47F2011C5@syenar.hu>

> We have been using CVS for almost eight years and see how much  
> Harbour has
> evolved and grown
>
> When a tool works and does it fine, it has no sense to replace it

Except that SVN has such advantages we might well exploit.
(like file move, dir remove, much faster updates, offline update,
binary file support, very important that it's sessions based, meaning
you can check all changes made in the repository in one commit)

> Besides that, all tools have a learning curve, and hidden problems to
> suffer, learn the hard way and try to solve

Believe me, it's the same as CVS, without the SSH and protocol
hassles and -kb switches. In most cases you just write SVN
instead of CVS.

I had that fear, but it vanished on day one.

> Also, as Chen says, if such database crashes, pffff

Same thing with CVS...

We need backups if sf.net doesn't do any.

Brgds,
Viktor

From antonioharbour at gmail.com  Thu Jun  7 03:52:58 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Jun  7 03:53:10 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <A66199C3-38F7-40EA-B0F2-BEF47F2011C5@syenar.hu>
Message-ID: <4667b962.17cf549a.1ecc.0251@mx.google.com>

Viktor,

If SVN is so good (I trust you), why sourceforge keeps using CVS ?

Regards,

Antonio

From philb at philb.us  Thu Jun  7 03:54:07 2007
From: philb at philb.us (Phil Barnett)
Date: Thu Jun  7 03:54:10 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <4667b63d.40146097.5725.0c37@mx.google.com>
References: <4667b63d.40146097.5725.0c37@mx.google.com>
Message-ID: <200706070354.07167.philb@philb.us>

On Thursday 07 June 2007 03:39, Antonio Linares wrote:
> We have been using CVS for almost eight years and see how much Harbour has
> evolved and grown
>
> When a tool works and does it fine, it has no sense to replace it
>
> Besides that, all tools have a learning curve, and hidden problems to
> suffer, learn the hard way and try to solve

I'm sure it's not that bad. I use both and there is very little difference.

> Also, as Chen says, if such database crashes, pffff

We can automate a backup, just like every professional does.

As a corrolary, what happens if your FiveWin application databases crash? pffff? Yes, so you should stop using DBF files and go back to ISAM files. They are much easier to recover if they crash.

> The first rule of computing: If something works and does it fine, don't
> touch it :-)

It doesn't do fine. It has crashed many times in the past years. We have had to ask SF to delete broken files and miscreated directories, because CVS doesn't allow you to move or delete a directory. We've been stuck with the original structure even though we could rearrange it for better sense.

Subversion fixes a number of annoyances in CVS, including lack of renames and whole-tree commits, and is more pleasant to use than CVS.

CVS is an excellent, proven model for version control; it just wasn't implemented well.

-- 
Phil Barnett
AI4OF
SKCC #600
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070607/103b1b74/attachment.html
From antonioharbour at gmail.com  Thu Jun  7 03:54:58 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Jun  7 03:55:11 2007
Subject: [Harbour] CVS to SVN?
Message-ID: <4667b9da.47d029d3.2137.04db@mx.google.com>

Viktor,

> If SVN is so good (I trust you), why sourceforge keeps using CVS ?

Also, where will we store the SVN repository ?

Please lets not use someone's private repository


Antonio

From philb at philb.us  Thu Jun  7 03:59:28 2007
From: philb at philb.us (Phil Barnett)
Date: Thu Jun  7 03:59:32 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <4667b9da.47d029d3.2137.04db@mx.google.com>
References: <4667b9da.47d029d3.2137.04db@mx.google.com>
Message-ID: <200706070359.28353.philb@philb.us>

On Thursday 07 June 2007 03:54, Antonio Linares wrote:
> Viktor,
>
> > If SVN is so good (I trust you), why sourceforge keeps using CVS ?
>
> Also, where will we store the SVN repository ?
>
> Please lets not use someone's private repository

SourceForge, just like CVS. They offer and host both of them and will 
automatically convert our CVS project to the SVN access method. All we have 
to do is ask.

-- 
Phil Barnett
AI4OF
SKCC #600
From antonioharbour at gmail.com  Thu Jun  7 04:01:51 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Jun  7 04:02:03 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <200706070354.07167.philb@philb.us>
Message-ID: <4667bb77.4eec543e.4bb4.ffffffa6@mx.google.com>

Phil, 

> As a corrolary, what happens if your FiveWin application databases crash? 

DBF files have been used and tested since back 1982. Besides that, FiveWin
is a GUI library not related with DBFs, neither with the SVN that we are
discussing here.

> We can automate a backup, just like every professional does.

If I properly remember, your server got hacked several times, right ? And
you are a professional webmaster...

Regards,

Antonio

From harbour.01 at syenar.hu  Thu Jun  7 04:01:58 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jun  7 04:02:05 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <4667b962.17cf549a.1ecc.0251@mx.google.com>
References: <4667b962.17cf549a.1ecc.0251@mx.google.com>
Message-ID: <7E27F677-117B-4788-87F9-357C8345BBAB@syenar.hu>

Because they cannot make a decision on behalf
of a million projects (and their admins).

However, they've added support for SVN and it's
an open option for everyone. I have no list of
switched projects, but you could surely find them.

Also if you look at new and evolving (non-sf) projects,
many of them have done the switch quite a while
ago. (cannot tell names, but I used to stumble
into SVN project more often nowadays than CVS
projects, and I'm happy about it)

Brgds,
Viktor

On 2007.06.07., at 9:52, Antonio Linares wrote:

> Viktor,
>
> If SVN is so good (I trust you), why sourceforge keeps using CVS ?
>
> Regards,
>
> Antonio
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Jun  7 04:03:17 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jun  7 04:03:25 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <4667b9da.47d029d3.2137.04db@mx.google.com>
References: <4667b9da.47d029d3.2137.04db@mx.google.com>
Message-ID: <71C87C43-B2FC-4F38-964F-05E1B78A7CDE@syenar.hu>

On sf.net. I believe we just have to request it and
they're converting the repo.

Brgds,
Viktor

On 2007.06.07., at 9:54, Antonio Linares wrote:

> Viktor,
>
>> If SVN is so good (I trust you), why sourceforge keeps using CVS ?
>
> Also, where will we store the SVN repository ?
>
> Please lets not use someone's private repository
>
>
> Antonio
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Jun  7 04:05:32 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jun  7 04:05:41 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <4667bb77.4eec543e.4bb4.ffffffa6@mx.google.com>
References: <4667bb77.4eec543e.4bb4.ffffffa6@mx.google.com>
Message-ID: <9DA6BE74-26D7-4024-B569-7596C533DC9B@syenar.hu>

> DBF files have been used and tested since back 1982. Besides that,  
> FiveWin
> is a GUI library not related with DBFs, neither with the SVN that  
> we are
> discussing here.
>
>> We can automate a backup, just like every professional does.
>
> If I properly remember, your server got hacked several times,  
> right ? And
> you are a professional webmaster...

Does that lead anywhere? It was a leaked ftp password (going
through the wires plaintext).

We should thank Phil for his contribution. I'd also be happy
if an automated repo backup could be done on his (our) server.

Brgds,
Viktor

From tomaz.zupan at orpo.si  Thu Jun  7 05:06:27 2007
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Thu Jun  7 05:06:40 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <CB74D260-3417-4407-BA6C-B5DB7A9FE0BB@syenar.hu>
References: <46679446.735@synel.co.il>
	<CB74D260-3417-4407-BA6C-B5DB7A9FE0BB@syenar.hu>
Message-ID: <200706071106.27838.tomaz.zupan@orpo.si>

Dne ?etrtek 7. junija 2007 08:45 je Szak?ts Viktor napisal(a):
> Hi all,
>
> I'd again like to propose to switch to SVN from CVS.
>
> It simply beats CVS in every single way, while the
> usage is practically similar (if not it's just simpler)
> to CVS. OS support is also similar, and the product
> is mature and stable. The conversion is automatic.
> All popular CVS shell/extension products support
> SVN as well, you can get TortoiseSVN, ViewVC,
> Trac, etc.
>
> Any opinions?

I vote yes, but timing should be considered carefully. It might be reasonable 
to switch after tagging a version in both branches.

-- 
Toma? Zupan
ORPO d.o.o.
http://www.orpo.si
From druzus at priv.onet.pl  Thu Jun  7 05:45:37 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jun  7 05:46:13 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <CB74D260-3417-4407-BA6C-B5DB7A9FE0BB@syenar.hu>
References: <46679446.735@synel.co.il>
	<CB74D260-3417-4407-BA6C-B5DB7A9FE0BB@syenar.hu>
Message-ID: <20070607094537.GA25249@localhost.localdomain>

On Thu, 07 Jun 2007, Szak?ts Viktor wrote:
> I'd again like to propose to switch to SVN from CVS.

I agree. Many people will not find any difference and we
will be able to make some long waiting cleanups.

best regards,
Przemek
From druzus at priv.onet.pl  Thu Jun  7 05:55:30 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jun  7 05:56:05 2007
Subject: [Harbour] Beta 3
In-Reply-To: <A33C1743-4687-4F49-B306-081821AB5734@syenar.hu>
References: <200706060937.47549.philb@philb.us>
	<20070606134646.GB17016@localhost.localdomain>
	<A33C1743-4687-4F49-B306-081821AB5734@syenar.hu>
Message-ID: <20070607095530.GB25249@localhost.localdomain>

On Wed, 06 Jun 2007, Szak?ts Viktor wrote:
> Let's please leave that to BETA4. I won't have time to do any advances
> in BETA3, and xhb code is so hacky and crashes in so many places
> (I've tried TBROWSE only) when tried with my large app, that I'd feel it
> a bit early to just copy them in as they are. The other problem is that
> we'd lose several dozens of fixes I did a few weeks ago by just copying
> them in. (There were also other changes, like getting rid of old  
> tokenizer hacks and so on)

OK. Any other work in progress?
I'll commit in few minutes some cleanups to make_rpm.sh and
harbour.spec and I'd like to set BETA3 tag.

best regards,
Przemek
From druzus at priv.onet.pl  Thu Jun  7 05:56:24 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jun  7 05:56:59 2007
Subject: [Harbour] ChangeLog 2007-06-07 11:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070607095624.GC25249@localhost.localdomain>

2007-06-07 11:55 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/harbour.spec
    * some minor cleanups in Requires section and added %{epoch}
  * harbour/make_rpm.sh
    * build Harbour GD library only when GD 2.0 or newer is installed

modifications synced in both brnaches.
I'm ready to set BETA3 tag.

best regards,
Przemek
From druzus at priv.onet.pl  Thu Jun  7 06:05:15 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jun  7 06:05:52 2007
Subject: [Harbour] Memory footprint
In-Reply-To: <00ea01c7a87b$f884b940$0100a8c0@emag>
References: <00ea01c7a87b$f884b940$0100a8c0@emag>
Message-ID: <20070607100515.GA25654@localhost.localdomain>

On Wed, 06 Jun 2007, Enrico Maria Giordano wrote:
> I'm comparing the same app compiled with Harbour and with xHarbour and 
> noticing that the Harbour compiled one has a reduced memory footprint (4892 
> KB vs. 5280 KB).

Are you talking about binaries size or about memory allocated by
your application?
If you want to check the second one you can compile source/vm/fm.c
without setting HB_FM_STATISTICS_OFF macro (in xHarbour with
HB_FM_STATISTICS macro set because by default is disabled) and
link it with your application. Then simply run it with //info
parameter.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Jun  7 06:39:48 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jun  7 06:39:52 2007
Subject: [Harbour] Beta 3
In-Reply-To: <9257026e0706070016j1b494961y298f3ee60b3dcef6@mail.gmail.com>
References: <200706060937.47549.philb@philb.us>
	<20070606134646.GB17016@localhost.localdomain>
	<A33C1743-4687-4F49-B306-081821AB5734@syenar.hu>
	<9257026e0706070016j1b494961y298f3ee60b3dcef6@mail.gmail.com>
Message-ID: <CEC1AC3D-494D-4D44-844F-D378146F2A01@syenar.hu>

Hi Lorenzo,

>> s please leave that to BETA4. I won't have time to do any advances
>> in BETA3, and xhb code is so hacky and crashes in so many places
>> (I've tried TBROWSE only) when tried with my large app, that I'd  
>> feel it
>> a bit early to just copy them in as they are.
>
> tbrowse is a complex object and probably we use it differently, but in
> weeks of tests I never got a single "crash" due to that code and I'm
> getting the expected results compared with C53b.
>
> Probably I need to review my test procedures :)

It's as you say, TB object is complex and you can use its
methods and data in zillions of combinations and in at
least that many order. So it's really hard to make it
compatible without strict test suits which walk through
one-by-one of every possible aspect of it. (extra complication
is how to test methods which create on screen output)

> Could you keep me informed where you find bugs?

I had BASE/1132 Bound error: array access in HILITE()

Plus others (like one in the buffering code) and other strange
behaviour, sorry but I'd have to repeat the test to tell more.

> That is my xHarbour production code and I'd like to prevent error  
> reports.
>
>> The other problem is that
>> we'd lose several dozens of fixes I did a few weeks ago by just  
>> copying
>> them in.
>
> I've tried to test your tget.prg fixes but as I told you I still get
> an Error/BASE 1082 at the very beginning of my get test ( see below ).

I've never used GET LISTBOX/CHECKBOX since they are C53
and it's likely that this is not in a fact a TGET issues but a C53-only
class issue. (Yes, I've checked, the RTE is in _LISTBOX_(1010))

> Also menu system gives an Error/BASE 1081 at the beginning using the
> "official" C53b sample/menu.prg.

Well, as for the _C53b-only_ classes I'd feel safe to copy them in
from xhb because the current state is already not the highest quality
and I think they were never really tested at all (from some grave bugs
I've found by incident when looking at the code). Moreover the developer
of these moved to xhb long ago.

So my vote is yes for the C53-only classes. (I've done a few fixes
in Harbour, so we might want to keep these, if not already fixed
in xhb for some reason.)

I'd recommend doing this in the DEVEL branch only now though,
to not delay BETA3 anymore.

>> (There were also other changes, like getting rid of old
>> tokenizer
>> hacks and so on)
>
> Probably they are in methods/functions I don't call and I've missed  
> with grep.
> I'll recheck.

Thanks.

Brgds,
Viktor

From druzus at priv.onet.pl  Thu Jun  7 06:47:12 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jun  7 06:47:47 2007
Subject: [Harbour] ALT_X combinations and language settings
In-Reply-To: <004a01c7a849$011809a0$03481ce0$@com>
References: <004a01c7a849$011809a0$03481ce0$@com>
Message-ID: <20070607104712.GB25654@localhost.localdomain>

On Wed, 06 Jun 2007, Mike Evans (Gmail) wrote:
> Przemek,
> Does Harbour have the same problem as xharbour with the ALT_X  combinations
> and non English writing ?

I'm not sure I understood you description of ALT_<letter> problem in
xHarbour. I wrote the quoted text about xHarbour extension with HB_EXT_INKEY.
Harbour does not have such extension (at lease by default though Lorenzo
creates his own customized Harbour builds when it's enabled). I hope we
will have some extended keyboard support in the future but implemented
in the way I described.

Now the problem with ALT_E you described. If I understood then depending
on user environment ALT_E may return different vales so you have problem
with hardcoding them inside your application. xHarbour GTWIN translates
values received from Windows to Clipper inkey codes and with exception
to some bugs in Windows keyboard drivers it makes it well. Harbour makes
exactly the same so the results will be probably similar - in both cases
out of GT control and Windows will decide what key codes application will
receive. Please note that we do not have direct hardware access.
If this is source of your problem then it cannot be solved by us
but we can add a trick which probably can hide it: we can add support for
additional key code translation inside inkey so you will be able to make
sth like:
    HB_INKEYTRANS( <nSource>, <nDest> )
so you can add to your application:
    HB_INKEYTRANS( nAlternateAltE, K_ALT_E )

We already have such translations for national letters. F.e. in Polish
there are four popular systems of encoding Polish characters: Mazovia,
CP852, CP1250, ISO-8859-2. When I have source code in Mazovia and want
to run my programs in DOS/Windows where CP852 font is installed I can
simply make:
    REQUEST HB_CODEPAGE_PLMAZ
    REQUEST HB_CODEPAGE_PL852
    HB_SETTERMCP( "PL852", "PLMAZ" )
and all translations will be done automatically by GT driver.

best regards,
Przemek

> To be more specific if you don't remember our conversation months ago I
> include your answer
> >I agree that current version of extended key code support is not acceptable
> for many programs.
> >?To make it well it will be necessary to change the internal keyboard 
> >and other events (like mouse) queue to use extended keycodes in all
> >GT drivers and then add final translation to standard keycodes in inkey().
> >We can extend INKEY_* flags and add INKEY_EXT or INKEY_RAW to access
> >extended key codes without translations.
> >I thought it was done in such way - I haven't checked of details in
> >current implementation - but your message suggest it wasn't. So now
> >we have to choices - add function to translate extended keycodes to
> >standard ones accessible from .prg code and call this function in
> >INKEY() when INKEY_EXT is not set to translate extended key codes
> >to the original Clipper values. I only hope that such translation
> >can be done - I haven't analyzed extended key codes values.
> >
> We have the following problem. In a dos console application we get the same
> value for any ALT_E combination but thats not true for xHarbour. Under
> windows we are using kbdhe.com from microsoft to be possible to write non
> latin characters in a console application. Under xharbour there is no need
> for this because xHarbour using the internal windows mechanism. As for the
> problem, under Clipper when we are writing in english or non english
> characters we are getting the same value for ALT_E but under xHarbour we
> are getting different codes that's not included in inkey.ch. Is there any
> solution for this or i have to find every combination in non latin
> character set and change all my programs to check both combinations? 
From lorenzo.fiorini at gmail.com  Thu Jun  7 07:11:05 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Jun  7 07:11:09 2007
Subject: [Harbour] Beta 3
In-Reply-To: <CEC1AC3D-494D-4D44-844F-D378146F2A01@syenar.hu>
References: <200706060937.47549.philb@philb.us>
	<20070606134646.GB17016@localhost.localdomain>
	<A33C1743-4687-4F49-B306-081821AB5734@syenar.hu>
	<9257026e0706070016j1b494961y298f3ee60b3dcef6@mail.gmail.com>
	<CEC1AC3D-494D-4D44-844F-D378146F2A01@syenar.hu>
Message-ID: <9257026e0706070411w1f3bfd63j2646cce94c7bcc6d@mail.gmail.com>

On 6/7/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> I had BASE/1132 Bound error: array access in HILITE()
>
> Plus others (like one in the buffering code) and other strange
> behaviour, sorry but I'd have to repeat the test to tell more.

Take your time.

best regards,
Lorenzo
From e.m.giordano at emagsoftware.it  Thu Jun  7 07:48:51 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Thu Jun  7 07:49:40 2007
Subject: [Harbour] Memory footprint
References: <00ea01c7a87b$f884b940$0100a8c0@emag>
	<20070607100515.GA25654@localhost.localdomain>
Message-ID: <018901c7a8f9$d886bb60$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: giovedi 7 giugno 2007 12.05
Oggetto: Re: [Harbour] Memory footprint


> > I'm comparing the same app compiled with Harbour and with xHarbour and
> > noticing that the Harbour compiled one has a reduced memory footprint 
> > (4892
> > KB vs. 5280 KB).
>
> Are you talking about binaries size or about memory allocated by
> your application?

I'm referring to the memory indicated by Windows Task Manager, I don't know 
exactly what it means.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From antonioharbour at gmail.com  Thu Jun  7 07:58:36 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Jun  7 07:58:41 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <20070607094537.GA25249@localhost.localdomain>
References: <46679446.735@synel.co.il>
	<CB74D260-3417-4407-BA6C-B5DB7A9FE0BB@syenar.hu>
	<20070607094537.GA25249@localhost.localdomain>
Message-ID: <9471afc80706070458u5aab9e0dyb4814c89bb5b4975@mail.gmail.com>

Viktor,

On a standard Apple xcode tools intallation on OSX, there is no a svn
tool, but there is a cvs. I have just tested it

regards,

Antonio
From makis1970 at gmail.com  Thu Jun  7 08:23:33 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Thu Jun  7 08:27:26 2007
Subject: [Harbour] ALT_X combinations and language settings
In-Reply-To: <20070607104712.GB25654@localhost.localdomain>
References: <004a01c7a849$011809a0$03481ce0$@com>
	<20070607104712.GB25654@localhost.localdomain>
Message-ID: <001a01c7a8fe$abbda300$0338e900$@com>


Przemek,
Thank you very much for your answer. To be more specific in our program we
are heavily use shortcuts to access different parts of our program. In
clipper (plain dos or dos under windows) the return value for alt-<letter>
combination does not depended from the current writing language. So even if
I'm writing in English, Greek or any language I'm getting the same inkey
value for each ALT-<letter> combination. Under (x)Harbour I'm getting
different value if I'm writing in English (the same as clipper and the value
its included in inkey.ch) and different (not included in inkey.ch) if I'm
writing in Greek and the same for any other language. Due to above "problem"
it's not possible to use shortcuts when the current writing language in
windows is different from English. As you can understand its not possible to
find all the possible values for every non English writing language. What I
want is that ALT-<letter> combination return the same value for inkey
independent from the writing language (maybe key depended). As an example
the same is a problem also for windows applications. Let's say that we have
a menu with ALT-F shortcut to access the file menu. If the current writing
language is English no problem but if its anything else does not work. At
least office 2007 does not have this problem even if the current writing
language is greek polish or anything the same KEY combination fires the
shortcut. Maybe it will be nice if we have something like inkey(0,
ALTX_CL53).

Thanks in advance and sorry for the disturb ion
Mike Evans

PS I don't use any request for codepage and my program works with English
and Greek writing language like a charm (terminal).

We already have such translations for national letters. F.e. in Polish
there are four popular systems of encoding Polish characters: Mazovia,
CP852, CP1250, ISO-8859-2. When I have source code in Mazovia and want
to run my programs in DOS/Windows where CP852 font is installed I can
simply make:
    REQUEST HB_CODEPAGE_PLMAZ
    REQUEST HB_CODEPAGE_PL852
    HB_SETTERMCP( "PL852", "PLMAZ" )
and all translations will be done automatically by GT driver.

best regards,
Przemek


From philb at philb.us  Thu Jun  7 09:13:38 2007
From: philb at philb.us (Phil Barnett)
Date: Thu Jun  7 09:13:43 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <4667bb77.4eec543e.4bb4.ffffffa6@mx.google.com>
References: <4667bb77.4eec543e.4bb4.ffffffa6@mx.google.com>
Message-ID: <200706070913.39110.philb@philb.us>

On Thursday 07 June 2007 04:01, Antonio Linares wrote:
> If I properly remember, your server got hacked several times, right ? And
> you are a professional webmaster...

Once, and even at that, all the backups that I was taking and distributing 
were still being distributed.

What's your point? That every system is prone to failure?

Ok, I'll agree. So what?

-- 
Phil Barnett
AI4OF
SKCC #600
From philb at philb.us  Thu Jun  7 09:20:17 2007
From: philb at philb.us (Phil Barnett)
Date: Thu Jun  7 09:20:21 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <9471afc80706070458u5aab9e0dyb4814c89bb5b4975@mail.gmail.com>
References: <46679446.735@synel.co.il>
	<20070607094537.GA25249@localhost.localdomain>
	<9471afc80706070458u5aab9e0dyb4814c89bb5b4975@mail.gmail.com>
Message-ID: <200706070920.17424.philb@philb.us>

On Thursday 07 June 2007 07:58, Antonio Linares wrote:

> On a standard Apple xcode tools intallation on OSX, there is no a svn
> tool, but there is a cvs. I have just tested it

http://subversion.tigris.org/project_packages.html

-- 
Phil Barnett
AI4OF
SKCC #600
From harbour.01 at syenar.hu  Thu Jun  7 09:45:11 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jun  7 09:45:18 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <9471afc80706070458u5aab9e0dyb4814c89bb5b4975@mail.gmail.com>
References: <46679446.735@synel.co.il>
	<CB74D260-3417-4407-BA6C-B5DB7A9FE0BB@syenar.hu>
	<20070607094537.GA25249@localhost.localdomain>
	<9471afc80706070458u5aab9e0dyb4814c89bb5b4975@mail.gmail.com>
Message-ID: <47DCE5EE-1B95-4C37-A751-84255523641D@syenar.hu>

Hi Antonio,

Yes, it needs to be installed, I can't at the moment give much
detail - I am sitting in meetings for the whole week basically -
but it's quite hassle-free, you just have to install it, that's all:

http://downloads.open.collab.net/binaries.html
(I've used this one too, IIRC)

It can get a bit complicated if you want to enable the server, but
otherwise (like in this case) what you need is basically the svn
binary somewhere in the path.

Brgds,
Viktor

On 2007.06.07., at 13:58, Antonio Linares wrote:

> Viktor,
>
> On a standard Apple xcode tools intallation on OSX, there is no a svn
> tool, but there is a cvs. I have just tested it
>
> regards,
>
> Antonio
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Thu Jun  7 10:34:03 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Jun  7 10:34:06 2007
Subject: [Harbour] ALT_X combinations and language settings
In-Reply-To: <20070607104712.GB25654@localhost.localdomain>
References: <004a01c7a849$011809a0$03481ce0$@com>
	<20070607104712.GB25654@localhost.localdomain>
Message-ID: <9257026e0706070734x7473ac47p97a86ac0662c0ef3@mail.gmail.com>

On 6/7/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> I'm not sure I understood you description of ALT_<letter> problem in
> xHarbour. I wrote the quoted text about xHarbour extension with HB_EXT_INKEY.
> Harbour does not have such extension (at lease by default though Lorenzo
> creates his own customized Harbour builds when it's enabled). I hope we
> will have some extended keyboard support in the future but implemented
> in the way I described.

Just to avoid misunderstandings HB_EXT_INKEY does nothing for the codes
between 32 and 255.

It only defines values of K_CTRL_x keys to K_CTRL_x + 512 to allow
distinguish between Ctrl+C and PgDn or Ctrl+V and Ins.

It also gives different values for keys like K_[LEFT|RIGHT|...] and
K_SH_[LEFT|RIGHT|...]

The aim is allow the use of well defined keys combinations in memoedit
like Ctrl+C for copy, Ctrl+X for cut, Ctrl+V for paste and Ctrl+A for
select all, Shift+Arrows for text selection in memoedit.

best regards,
Lorenzo
From guy.roussin at teledetection.fr  Thu Jun  7 10:40:19 2007
From: guy.roussin at teledetection.fr (Guy Roussin)
Date: Thu Jun  7 10:40:53 2007
Subject: [Harbour] README and INSTALL for harbour
Message-ID: <466818D3.3000008@teledetection.fr>

Hi,

Can we have a README and an INSTALL file in harbour
root tree, even if these files contain juste one line
which point to the good doc (README -> faq,
INSTALL -> ?)

Thank you,

-- 
Guy Roussin

From mbelgrano at deltain.it  Thu Jun  7 12:53:14 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Jun  7 12:55:54 2007
Subject: [Harbour] will be usefull a strategy strategy designed to enable
	effective program optimization
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A5CE@SRV02.deltain.net>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 3559 bytes
Desc: image001.gif
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070607/81945e9f/attachment.gif
From m.renzi at maticasrl.it  Fri Jun  8 04:45:47 2007
From: m.renzi at maticasrl.it (Massimo Renzi (MaticaSrl))
Date: Fri Jun  8 04:52:30 2007
Subject: [Harbour] ODBC Example (or oledb)
In-Reply-To: <000b01c75b4b$59f2fd00$d600080a@maxsoft>
References: <20070228071207.GA29202@localhost.localdomain><000001c75b2a$4168f4e0$d600080a@maxsoft><20070228150055.GA9387@localhost.localdomain>
	<000b01c75b4b$59f2fd00$d600080a@maxsoft>
Message-ID: <003301c7a9a9$69074600$d600080a@maxsoft>

Morning all,
I need read data from a SQLServer2000 or Access2000 and write on dbf.
Can you explain how to access ODBC data source from xHarbour please?
Thank you

Max


From antonioharbour at gmail.com  Fri Jun  8 05:26:53 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Fri Jun  8 05:27:08 2007
Subject: [Harbour] ODBC Example (or oledb)
In-Reply-To: <003301c7a9a9$69074600$d600080a@maxsoft>
Message-ID: <466920e6.2a17acb1.0490.fffff817@mx.google.com>

Max, 

>
I need read data from a SQLServer2000 or Access2000 and write on dbf.
Can you explain how to access ODBC data source from xHarbour please?
>

You can easily do it using Harbour ADORDD. Its very easy to use:

http://harbour-project.cvs.sourceforge.net/harbour-project/harbour/contrib/a
dordd/

It includes samples of use,

Regards,

Antonio

From antonioharbour at gmail.com  Fri Jun  8 05:28:26 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Fri Jun  8 05:28:39 2007
Subject: [Harbour] ODBC Example (or oledb)
In-Reply-To: <003301c7a9a9$69074600$d600080a@maxsoft>
Message-ID: <46692142.07c2b4d0.6424.ffffccbd@mx.google.com>

Max, 

>
I need read data from a SQLServer2000 or Access2000 and write on dbf.
Can you explain how to access ODBC data source from xHarbour please?
>

You can also download ADORDD from:

www.fivetechsoft.com/files/adordd.zip

It includes the libraries for harbour and xharbour and its ready to be used,

Regards,

Antonio

From m.renzi at maticasrl.it  Fri Jun  8 05:52:05 2007
From: m.renzi at maticasrl.it (Massimo Renzi (MaticaSrl))
Date: Fri Jun  8 06:16:16 2007
Subject: R: [Harbour] ODBC Example (or oledb)
In-Reply-To: <46692142.07c2b4d0.6424.ffffccbd@mx.google.com>
References: <003301c7a9a9$69074600$d600080a@maxsoft>
	<46692142.07c2b4d0.6424.ffffccbd@mx.google.com>
Message-ID: <000001c7a9b2$abfac640$d600080a@maxsoft>

Thank you very much!!!


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] Per conto di Antonio Linares
Inviato: venerd? 8 giugno 2007 11.28
A: 'Harbour Project Main Developer List.'
Oggetto: RE: [Harbour] ODBC Example (or oledb)

Max, 

>
I need read data from a SQLServer2000 or Access2000 and write on dbf.
Can you explain how to access ODBC data source from xHarbour please?
>

You can also download ADORDD from:

www.fivetechsoft.com/files/adordd.zip

It includes the libraries for harbour and xharbour and its ready to be used,

Regards,

Antonio

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From m.renzi at maticasrl.it  Fri Jun  8 06:09:51 2007
From: m.renzi at maticasrl.it (Massimo Renzi (MaticaSrl))
Date: Fri Jun  8 06:17:06 2007
Subject: R: [Harbour] ODBC Example (or oledb)
In-Reply-To: <46692142.07c2b4d0.6424.ffffccbd@mx.google.com>
References: <003301c7a9a9$69074600$d600080a@maxsoft>
	<46692142.07c2b4d0.6424.ffffccbd@mx.google.com>
Message-ID: <000101c7a9b5$27139d00$d600080a@maxsoft>

ADORDD,
how to add, update?

Thank you

Max


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] Per conto di Antonio Linares
Inviato: venerd? 8 giugno 2007 11.28
A: 'Harbour Project Main Developer List.'
Oggetto: RE: [Harbour] ODBC Example (or oledb)

Max, 

>
I need read data from a SQLServer2000 or Access2000 and write on dbf.
Can you explain how to access ODBC data source from xHarbour please?
>

You can also download ADORDD from:

www.fivetechsoft.com/files/adordd.zip

It includes the libraries for harbour and xharbour and its ready to be used,

Regards,

Antonio

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From antonioharbour at gmail.com  Fri Jun  8 06:28:59 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Fri Jun  8 06:29:12 2007
Subject: [Harbour] ODBC Example (or oledb)
In-Reply-To: <000101c7a9b5$27139d00$d600080a@maxsoft>
Message-ID: <46692f73.57f84a52.0490.07bd@mx.google.com>

Max, 

>
ADORDD,
how to add, update?
>

The same way as you do with Harbour or Clipper :-)

APPEND BLANK

field->name := value

etc...

Regards,

Antonio

From druzus at priv.onet.pl  Fri Jun  8 08:46:40 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun  8 08:47:15 2007
Subject: [Harbour] ChangeLog 2007-06-08 14:45 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070608124640.GA2636@localhost.localdomain>

2007-06-08 14:45 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/rdd_ads/ads1.c
    ! generate valid RT errors in some methods so NETERR() can be
      properly set

modifications synced in both branches

best regards,
Przemek
From druzus at priv.onet.pl  Fri Jun  8 08:47:14 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun  8 08:47:48 2007
Subject: [Harbour] ChangeLog 2007-06-08 06:50 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070608124714.GB2636@localhost.localdomain>

2007-06-08 06:50 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/harbour.spec
    * restored original national characters which were unintentionally
      damaged on 2006-06-29 08:25 UTC+0200 Tomaz Zupan
      Toma? please do not use editors which will change national characters
      in the whole file when you will change harbour.spec in the future

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Jun  8 10:52:39 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jun  8 10:52:45 2007
Subject: [Harbour] SVN test run
Message-ID: <15565A49-26C7-42A9-9788-C1935E63B9B8@syenar.hu>

Hi folks,

I've done a test rsync and CVS to SVN conversion today.
Now I can see the whole repository through Trac locally.
It's absolutely nice to see the file changes grouped per
commit (unfortunate that sf.net doesn't give this feature though).

The only problems were ChangeLog,v which is corrupted,
plus a few duplicate deleted filenames (30 seconds fix),
so the process looks good. It takes a few hours to process
the 6600 plus commit.

I turns out the SVN migration process is not fully automatic
at sf.net, but it's quite straightforward and basically involves
what I've tested today.

See this doc for extensive SVN info:
http://sourceforge.net/docs/E09

Brgds,
Viktor

From toninhofwi at yahoo.com.br  Fri Jun  8 12:24:17 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Fri Jun  8 12:24:56 2007
Subject: [Harbour] End/Endif difference from XHarbour
Message-ID: <e60j631fnqgku6f3j6lb301qu537davcmm@4ax.com>

Hi,

The next code compile fine in XH but not in Harbour or Clipper, If I
change command "endif" by "end" it compile fine, if not, the "return
lLog" is not generated. 

Regards,

Toninho.

---cut---
#xcommand dll32 function <FuncName>() ;
          =>                          ;
          function <FuncName>()      ;;
             local lLog              ;;
             if lLog                 ;;
                lLog = .f.           ;;
             endif                   ;;
          return lLog

dll32 function Test()
---cut---


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From druzus at priv.onet.pl  Fri Jun  8 15:39:40 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun  8 15:40:18 2007
Subject: [Harbour] End/Endif difference from XHarbour
In-Reply-To: <e60j631fnqgku6f3j6lb301qu537davcmm@4ax.com>
References: <e60j631fnqgku6f3j6lb301qu537davcmm@4ax.com>
Message-ID: <20070608193940.GA9854@localhost.localdomain>

On Fri, 08 Jun 2007, Toninho@fwi wrote:
> Hi,
> The next code compile fine in XH but not in Harbour or Clipper, If I
> change command "endif" by "end" it compile fine, if not, the "return
> lLog" is not generated. 

> ---cut---
> #xcommand dll32 function <FuncName>() ;
>           =>                          ;
>           function <FuncName>()      ;;
>              local lLog              ;;
>              if lLog                 ;;
>                 lLog = .f.           ;;
>              endif                   ;;
>           return lLog
> ---cut---

Exactly, the same is for ENDIF, ENDDO, ENDCASE, ENDFOR.
Look in Clipper's or Harbour's std.ch for lines like:

    #command ENDDO <*x*>       => enddo
    #command ENDIF <*x*>       => endif
    #command ENDCASE <*x*>     => endcase
    #command ENDFOR [<*x*>]    => next

If you do not like it then you can change it to:

    #command ENDDO <x,...> [<y,...>]   => enddo
    #command ENDIF <x,...> [<y,...>]   => endif
    #command ENDCASE <x,...> [<y,...>] => endcase
    #command ENDFOR [<x,...>]          => next

and rebuild Harbour.
The wild match marker <*markerID*> accepts ';' as part of matched
data so it's not a command separator in new PP. In the old PP ';'
cannot match any markers. It was not Clipper compatible but people
begins to create code which needs such behavior so to make new PP
compatible with the old one Ron made modification like above in
xHarbour's std.ch.

best regards,
Przemek
From harbour.01 at syenar.hu  Sat Jun  9 04:58:17 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Jun  9 04:58:22 2007
Subject: [Harbour] Harbour SVN test repository Trac demo
Message-ID: <1DC5F2E6-B4AE-4B36-B7C5-6246F8A1F40A@syenar.hu>

Hi all,

Trac view of the Harbour SVN test repository:
http://syenar.dyndns.org:11410/trac/harbour/timeline

username: harbour
pw: harbour

(Disclaimer: This is my personal desktop computer
on a currently struggling ADSL line, so the site is either
working on not and probably not fast.)

Brgds,
Viktor

From toninhofwi at yahoo.com.br  Sat Jun  9 05:48:35 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sat Jun  9 05:48:59 2007
Subject: [Harbour] End/Endif difference from XHarbour
In-Reply-To: <20070608193940.GA9854@localhost.localdomain>
References: <e60j631fnqgku6f3j6lb301qu537davcmm@4ax.com>
	<20070608193940.GA9854@localhost.localdomain>
Message-ID: <aptk63p9qoqc6chot5c94nngrhujsi3v2a@4ax.com>

>Exactly, the same is for ENDIF, ENDDO, ENDCASE, ENDFOR.
>Look in Clipper's or Harbour's std.ch for lines like:
>
>    #command ENDDO <*x*>       => enddo
>    #command ENDIF <*x*>       => endif
>    #command ENDCASE <*x*>     => endcase
>    #command ENDFOR [<*x*>]    => next
>
>If you do not like it then you can change it to:
>
>    #command ENDDO <x,...> [<y,...>]   => enddo
>    #command ENDIF <x,...> [<y,...>]   => endif
>    #command ENDCASE <x,...> [<y,...>] => endcase
>    #command ENDFOR [<x,...>]          => next
>
>and rebuild Harbour.

Thanks Przemek,

Best regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From toninhofwi at yahoo.com.br  Sat Jun  9 05:48:35 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sat Jun  9 05:49:01 2007
Subject: [Harbour] End/Endif difference from XHarbour
In-Reply-To: <20070608193940.GA9854@localhost.localdomain>
References: <e60j631fnqgku6f3j6lb301qu537davcmm@4ax.com>
	<20070608193940.GA9854@localhost.localdomain>
Message-ID: <aptk63p9qoqc6chot5c94nngrhujsi3v2a@4ax.com>

>Exactly, the same is for ENDIF, ENDDO, ENDCASE, ENDFOR.
>Look in Clipper's or Harbour's std.ch for lines like:
>
>    #command ENDDO <*x*>       => enddo
>    #command ENDIF <*x*>       => endif
>    #command ENDCASE <*x*>     => endcase
>    #command ENDFOR [<*x*>]    => next
>
>If you do not like it then you can change it to:
>
>    #command ENDDO <x,...> [<y,...>]   => enddo
>    #command ENDIF <x,...> [<y,...>]   => endif
>    #command ENDCASE <x,...> [<y,...>] => endcase
>    #command ENDFOR [<x,...>]          => next
>
>and rebuild Harbour.

Thanks Przemek,

Best regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From toninhofwi at yahoo.com.br  Sat Jun  9 17:05:38 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sat Jun  9 17:03:19 2007
Subject: [Harbour] Empty Source File ???
Message-ID: <165m63dkfs2ur0qt68epku2s74pnpfpk7o@4ax.com>

Hi.

When I have a PRG file with ONLY C CODE inside it, I have this output:

/*
 * Harbour devel build 1.1-0 Intl.
 * Borland C++ 5.8.2 (32 bit)
 * Generated C source from ".\dll.prg"
 */
/* Empty source file */

I need help please.

Toninho.


---cut---
#pragma BEGINDUMP

#include "windows.h"
#include "hbapi.h"

HB_FUNC( NRGB )
{
   hb_retnl( RGB( hb_parni( 1 ), hb_parni( 2 ), hb_parni( 3 ) ) );
}

#pragma ENDDUMP
---cut---


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From druzus at priv.onet.pl  Sun Jun 10 16:31:15 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sun Jun 10 16:31:51 2007
Subject: [Harbour] Empty Source File ???
In-Reply-To: <165m63dkfs2ur0qt68epku2s74pnpfpk7o@4ax.com>
References: <165m63dkfs2ur0qt68epku2s74pnpfpk7o@4ax.com>
Message-ID: <20070610203115.GA1569@localhost.localdomain>

On Sat, 09 Jun 2007, Toninho@fwi wrote:
> Hi.
> When I have a PRG file with ONLY C CODE inside it, I have this output:
> /*
>  * Harbour devel build 1.1-0 Intl.
>  * Borland C++ 5.8.2 (32 bit)
>  * Generated C source from ".\dll.prg"
>  */
> /* Empty source file */
> I need help please.

I can change it but it's interesting for me why you do not want to
use real .c files. Any reasons?
Mixing CLIPPER and C code has when bad side effect: you will not be
able to use Harbour with different frontend then C output.
Please remember that neither Harbour nor xHarbour is C compiler
because now we are using .c files as default output then it works
but it may change in the future. F.e. someone of us may implement
binary object (.obj/.o) file generation on some platforms - it's
even quite easy job for someone who knows the format.

BTW is anyone interested in finishing support for .obj file for W32?

best regards,
Przemek
From toninhofwi at yahoo.com.br  Sun Jun 10 19:25:58 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sun Jun 10 19:23:53 2007
Subject: [Harbour] Empty Source File ???
In-Reply-To: <20070610203115.GA1569@localhost.localdomain>
References: <165m63dkfs2ur0qt68epku2s74pnpfpk7o@4ax.com>
	<20070610203115.GA1569@localhost.localdomain>
Message-ID: <fk1p631gphmcfo0ckhvenarkd1g8l3cjbd@4ax.com>

Thanks to answer. 

>I can change it but it's interesting for me why you do not want to
>use real .c files. Any reasons?
Yes, I use MED editor and I have a commom macros that compile only prg
files, so for me is more easy use C code as PRG, but I can change it,
if better.

>Please remember that neither Harbour nor xHarbour is C compiler
>because now we are using .c files as default output then it works
>but it may change in the future. F.e. someone of us may implement
>binary object (.obj/.o) file generation on some platforms - it's
>even quite easy job for someone who knows the format.
IIUC is better I have a C file, instead a PRG with #pragmas? Same if
the prg is a true prg with come C code inside it?


Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From toninhofwi at yahoo.com.br  Sun Jun 10 19:25:58 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sun Jun 10 19:23:56 2007
Subject: [Harbour] Empty Source File ???
In-Reply-To: <20070610203115.GA1569@localhost.localdomain>
References: <165m63dkfs2ur0qt68epku2s74pnpfpk7o@4ax.com>
	<20070610203115.GA1569@localhost.localdomain>
Message-ID: <fk1p631gphmcfo0ckhvenarkd1g8l3cjbd@4ax.com>

Thanks to answer. 

>I can change it but it's interesting for me why you do not want to
>use real .c files. Any reasons?
Yes, I use MED editor and I have a commom macros that compile only prg
files, so for me is more easy use C code as PRG, but I can change it,
if better.

>Please remember that neither Harbour nor xHarbour is C compiler
>because now we are using .c files as default output then it works
>but it may change in the future. F.e. someone of us may implement
>binary object (.obj/.o) file generation on some platforms - it's
>even quite easy job for someone who knows the format.
IIUC is better I have a C file, instead a PRG with #pragmas? Same if
the prg is a true prg with come C code inside it?


Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From lkrausem at shaw.ca  Sun Jun 10 19:35:44 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Sun Jun 10 19:36:06 2007
Subject: [Harbour] Harbour + FWH
Message-ID: <466C8AD0.50308@shaw.ca>

Hi all:

I have some small apps that were built with Harbou +FWH but hadn't 
touched them
for several years.  I wanted to try to build them again so I updated 
Harbour from
CVS (devel branch) and rebuilt every single library it uses (especially 
the prg ones).
After fixing some issues that changed and being able to build all 3rd 
party libs and
the exe, it dies right away.

I can see how the executable shows up in the Task Manager for a few 
seconds but
goes away immediately.  There's no error.log or trace.log or anything 
that would
hint on what's going on.  I made sure that fiveH.lib (from v. 2.5) was 
recompiled to
make sure I didn't have a PCODE mismatch, but still no go.

Any ideas that might explain what's going on are much appreciated.

Regards,

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From lorenzo.fiorini at gmail.com  Mon Jun 11 01:55:38 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jun 11 01:55:41 2007
Subject: [Harbour] will be usefull a strategy strategy designed to enable
	effective program optimization
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809A5CE@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03809A5CE@SRV02.deltain.net>
Message-ID: <9257026e0706102255tf875b29xfbbe46e130c998a7@mail.gmail.com>

On 6/7/07, Massimo Belgrano <mbelgrano@deltain.it> wrote:
>
>  LLVM is also a collection of source code that implements the language and
> compilation strategy designed to enable effective program optimization
>

This is a programmers mailing list, please avoid html and images.

Moreover gmail marks your messages as spam ;)

best regards,
Lorenzo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070611/9210c9e7/attachment.html
From lorenzo.fiorini at gmail.com  Mon Jun 11 05:31:36 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jun 11 05:31:39 2007
Subject: [Harbour] harbour vs hbrun copyright messages
Message-ID: <9257026e0706110231q1d214e3cp3d976bb1934f41d@mail.gmail.com>

Running hbrun I've noted:

"Copyright 1999-2006, http://www.harbour-project.org" + HB_OSNewLine() +;

while harbour uses:

printf( "Copyright 1999-2007, http://www.harbour-project.org/\n" );

may I sync them?

What about a COPYRIGHT macro?

best regards,
Lorenzo
From druzus at priv.onet.pl  Mon Jun 11 05:32:08 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun 11 05:32:43 2007
Subject: [Harbour] ChangeLog 2007-06-11 11:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070611093208.GA10970@localhost.localdomain>

2007-06-11 11:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/compiler/genc.c
    * allow to use #pragma begindump / enddump in .prg files without
      any .prg code

  * harbour/source/vm/hvm.c
    ! fixed assign in overloaded []

modifications synced in both branches

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Mon Jun 11 05:35:17 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jun 11 05:35:51 2007
Subject: [Harbour] harbour vs hbrun copyright messages
References: <9257026e0706110231q1d214e3cp3d976bb1934f41d@mail.gmail.com>
Message-ID: <004d01c7ac0b$d1fc7770$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: luned? 11 giugno 2007 11.31
Oggetto: [Harbour] harbour vs hbrun copyright messages


> Running hbrun I've noted:
>
> "Copyright 1999-2006, http://www.harbour-project.org" + HB_OSNewLine() +;
>
> while harbour uses:
>
> printf( "Copyright 1999-2007, http://www.harbour-project.org/\n" );
>
> may I sync them?

I think C compiler already translates \n to the appropriate newline char(s).

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Mon Jun 11 05:41:50 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jun 11 05:41:50 2007
Subject: [Harbour] harbour vs hbrun copyright messages
In-Reply-To: <9257026e0706110231q1d214e3cp3d976bb1934f41d@mail.gmail.com>
References: <9257026e0706110231q1d214e3cp3d976bb1934f41d@mail.gmail.com>
Message-ID: <86503B91-FFDF-4E6A-BF5C-89AC319D73AD@syenar.hu>

> Running hbrun I've noted:
>
> "Copyright 1999-2006, http://www.harbour-project.org" + HB_OSNewLine 
> () +;
>
> while harbour uses:
>
> printf( "Copyright 1999-2007, http://www.harbour-project.org/\n" );
>
> may I sync them?

Sure. (Only the year doesn't match right? Oh and hbrun would
need a closing "/" too.)

> What about a COPYRIGHT macro?

I think it's not worth the extra effort. (one is Harbour code,
the other is C, and it would need a public header just for
this purpose probably.)

We need a virtual yearly checklist anyway to change
the years and stuff in every place each year.

Brgds,
Viktor

From druzus at priv.onet.pl  Mon Jun 11 06:14:40 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun 11 06:15:15 2007
Subject: [Harbour] harbour vs hbrun copyright messages
In-Reply-To: <9257026e0706110231q1d214e3cp3d976bb1934f41d@mail.gmail.com>
References: <9257026e0706110231q1d214e3cp3d976bb1934f41d@mail.gmail.com>
Message-ID: <20070611101440.GA12164@localhost.localdomain>

On Mon, 11 Jun 2007, Lorenzo Fiorini wrote:
> Running hbrun I've noted:
> "Copyright 1999-2006, http://www.harbour-project.org" + HB_OSNewLine() +;
> while harbour uses:
> printf( "Copyright 1999-2007, http://www.harbour-project.org/\n" );
> may I sync them?

Yes but please make it in both branches.

> What about a COPYRIGHT macro?

Maybe in the future as yet another hb_ver*() function.
But now I'd like to set BETA3 tag ASAP.
It's time to release new binaries. We need some feedback from
Harbour users.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Mon Jun 11 06:24:15 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jun 11 06:24:18 2007
Subject: [Harbour] harbour vs hbrun copyright messages
In-Reply-To: <20070611101440.GA12164@localhost.localdomain>
References: <9257026e0706110231q1d214e3cp3d976bb1934f41d@mail.gmail.com>
	<20070611101440.GA12164@localhost.localdomain>
Message-ID: <9257026e0706110324t65164296n61ecc22634ebd47f@mail.gmail.com>

On 6/11/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> Maybe in the future as yet another hb_ver*() function.
> But now I'd like to set BETA3 tag ASAP.
> It's time to release new binaries. We need some feedback from
> Harbour users.

It's a sub-sub-minor issue :)

I'll do it after beta3.

best regards,
Lorenzo
From druzus at priv.onet.pl  Mon Jun 11 06:26:28 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun 11 06:27:03 2007
Subject: [Harbour] Harbour + FWH
In-Reply-To: <466C8AD0.50308@shaw.ca>
References: <466C8AD0.50308@shaw.ca>
Message-ID: <20070611102628.GB12164@localhost.localdomain>

On Sun, 10 Jun 2007, Luis Krause Mantilla wrote:
> Hi all:
> I have some small apps that were built with Harbou +FWH but hadn't 
> touched them
> for several years.  I wanted to try to build them again so I updated 
> Harbour from
> CVS (devel branch) and rebuilt every single library it uses (especially 
> the prg ones).
> After fixing some issues that changed and being able to build all 3rd 
> party libs and
> the exe, it dies right away.
> 
> I can see how the executable shows up in the Task Manager for a few 
> seconds but
> goes away immediately.  There's no error.log or trace.log or anything 
> that would
> hint on what's going on.

Run it in console window to see stdout/stderr error HVM messages (if any).
You can also redirect them to file, f.e.:
    myapp > stdout 2> stderr
AFARI 2> works only in newer windows versions (XP, maybe W2K)

> I made sure that fiveH.lib (from v. 2.5) was 
> recompiled to make sure I didn't have a PCODE mismatch, but still no go.

I do not know if current code can work with FWH 2.5 - even if it can be
linked. In general all 3-rd part libraries created when [x]Harbour header
files have HB_API_MACROS and HB_STACK_MACROS enabled by default can be
used _ONLY_ with the same version of [x]Harbour then the one used to
compile them. The problem is inside C code not in .prg.

best regards,
Przemek
From toninhofwi at yahoo.com.br  Mon Jun 11 06:38:28 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Jun 11 06:39:03 2007
Subject: [Harbour] ChangeLog 2007-06-11 11:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070611093208.GA10970@localhost.localdomain>
References: <20070611093208.GA10970@localhost.localdomain>
Message-ID: <ag9q63dhnnmed239rke0u37son3icdnq2v@4ax.com>

>2007-06-11 11:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/compiler/genc.c
>    * allow to use #pragma begindump / enddump in .prg files without
>      any .prg code

Thanks.

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From toninhofwi at yahoo.com.br  Mon Jun 11 06:38:28 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Jun 11 06:39:05 2007
Subject: [Harbour] ChangeLog 2007-06-11 11:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070611093208.GA10970@localhost.localdomain>
References: <20070611093208.GA10970@localhost.localdomain>
Message-ID: <ag9q63dhnnmed239rke0u37son3icdnq2v@4ax.com>

>2007-06-11 11:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/compiler/genc.c
>    * allow to use #pragma begindump / enddump in .prg files without
>      any .prg code

Thanks.

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From antonioharbour at gmail.com  Mon Jun 11 06:46:16 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Jun 11 06:46:32 2007
Subject: [Harbour] Harbour + FWH
In-Reply-To: <20070611102628.GB12164@localhost.localdomain>
Message-ID: <466d2801.5e0a24fd.0ee3.ffffd9a7@mx.google.com>

Przemek,

I told Luis to use __TRACEPRGCALLS( .T. ) so he may find where the problem
is coming from.

Regards,

Antonio 

-----Mensaje original-----
De: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] En nombre de Przemyslaw Czerpak
Enviado el: lunes, 11 de junio de 2007 12:26
Para: Harbour Project Main Developer List.
Asunto: Re: [Harbour] Harbour + FWH

On Sun, 10 Jun 2007, Luis Krause Mantilla wrote:
> Hi all:
> I have some small apps that were built with Harbou +FWH but hadn't 
> touched them for several years.  I wanted to try to build them again 
> so I updated Harbour from CVS (devel branch) and rebuilt every single 
> library it uses (especially the prg ones).
> After fixing some issues that changed and being able to build all 3rd 
> party libs and the exe, it dies right away.
> 
> I can see how the executable shows up in the Task Manager for a few 
> seconds but goes away immediately.  There's no error.log or trace.log 
> or anything that would hint on what's going on.

Run it in console window to see stdout/stderr error HVM messages (if any).
You can also redirect them to file, f.e.:
    myapp > stdout 2> stderr
AFARI 2> works only in newer windows versions (XP, maybe W2K)

> I made sure that fiveH.lib (from v. 2.5) was recompiled to make sure I 
> didn't have a PCODE mismatch, but still no go.

I do not know if current code can work with FWH 2.5 - even if it can be
linked. In general all 3-rd part libraries created when [x]Harbour header
files have HB_API_MACROS and HB_STACK_MACROS enabled by default can be used
_ONLY_ with the same version of [x]Harbour then the one used to compile
them. The problem is inside C code not in .prg.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Mon Jun 11 07:06:39 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun 11 07:07:14 2007
Subject: [Harbour] Harbour + FWH
In-Reply-To: <466d2801.5e0a24fd.0ee3.ffffd9a7@mx.google.com>
References: <20070611102628.GB12164@localhost.localdomain>
	<466d2801.5e0a24fd.0ee3.ffffd9a7@mx.google.com>
Message-ID: <20070611110639.GA12793@localhost.localdomain>

On Mon, 11 Jun 2007, Antonio Linares wrote:
> I told Luis to use __TRACEPRGCALLS( .T. ) so he may find where the problem
> is coming from.

If HVM starts.
What was the released date of FWH2.5?

best regards,
Przemek
From i at kevincarmody.com  Mon Jun 11 07:26:53 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Mon Jun 11 07:26:43 2007
Subject: [Harbour] harbour vs hbrun copyright messages
In-Reply-To: <20070611101440.GA12164@localhost.localdomain>
References: <9257026e0706110231q1d214e3cp3d976bb1934f41d@mail.gmail.com>
	<20070611101440.GA12164@localhost.localdomain>
Message-ID: <466D317D.3090806@kevincarmody.com>

Przemyslaw Czerpak wrote:
> On Mon, 11 Jun 2007, Lorenzo Fiorini wrote:
>   
>> Running hbrun I've noted:
>> "Copyright 1999-2006, http://www.harbour-project.org" + HB_OSNewLine() +;
>> while harbour uses:
>> printf( "Copyright 1999-2007, http://www.harbour-project.org/\n" );
>>     
> We need some feedback from Harbour users.

I think that this copyright notice is of dubious legality.  A copyright 
notice is a legal notice, and to have any effect, it should conform to 
legal requirements. The year or years should be followed by the 
copyright holder.  Although a web site owner can hold a copyright, a web 
address itself cannot hold a copyright, any more than a street address 
can hold a copyright.

The Harbour Project is qualified to be the copyright holder, but it 
actually isn't, because the project has decided to allow individual 
contributors to hold the copyrights.  So I think that the most you can 
legally say is something like "Copyright of Harbour source code is held 
by individual contributors to The Harbour Project.  See 
http://www.harbour-project.org/legal.htm."

This web page (http://www.harbour-project.org/legal.htm) could also use 
a little clarification.  Firstly, the paragraph headed "Copyright" says: 
"For more info on the Harbour exception see _this page_", but this link 
is broken.  Secondly, this paragraph really describes the license status 
of Harbour, not the copyright.  I suggest that there be two paragraphs, 
as follows:

"Copyright

"The copyright of Harbour source code is held by individual contributors 
to The Harbour Project. See the individual source files in the _Harbour 
source code_ (link to 
http://sourceforge.net/project/showfiles.php?group_id=681).

"License

"All Harbour source code is released under one of Harbour's licenses:  
(1) the _GPL_ (link to 
http://www.harbour-project.org/faq/harbour15.html), or (2) the GPL with 
the _Harbour exception_ (link to 
http://www.harbour-project.org/faq/harbour17.html)."

Kevin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070611/42f48ab3/attachment.html
From druzus at priv.onet.pl  Mon Jun 11 07:29:14 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun 11 07:29:50 2007
Subject: [Harbour] Harbour + FWH
In-Reply-To: <20070611110639.GA12793@localhost.localdomain>
References: <20070611102628.GB12164@localhost.localdomain>
	<466d2801.5e0a24fd.0ee3.ffffd9a7@mx.google.com>
	<20070611110639.GA12793@localhost.localdomain>
Message-ID: <20070611112914.GA12939@localhost.localdomain>

On Mon, 11 Jun 2007, Przemyslaw Czerpak wrote:
> On Mon, 11 Jun 2007, Antonio Linares wrote:
> > I told Luis to use __TRACEPRGCALLS( .T. ) so he may find where the problem
> > is coming from.
> If HVM starts.
> What was the released date of FWH2.5?

I've found it in the inet. It's June 2004 so it cannot be used with
current Harbour version. I removed default API and STACK macros on:
2005-10-24 02:50 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
so only older 3-rd party libraries which used functions like hb_ret*()
can be used only with exactly the same Harbour version as the one
used for their compilation. On
2006-02-04 17:05 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
I hided most of internal definitions so code compiled later should
not access core Harbour structures directly.
It means that at least FWH 2.7 is needed or better 2.8 or newer.
In Harbour API and STACK macros were enabled by default at:
2003-01-24 14:00 UTC+0300 Alexander Kresin <alex@belacy.belgorod.su>
so maybe some older FWH version can work but I strongly suggest to
use the recent FWH version.

best regards,
Przemek
From druzus at priv.onet.pl  Mon Jun 11 07:37:47 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun 11 07:38:23 2007
Subject: [Harbour] harbour vs hbrun copyright messages
In-Reply-To: <466D317D.3090806@kevincarmody.com>
References: <9257026e0706110231q1d214e3cp3d976bb1934f41d@mail.gmail.com>
	<20070611101440.GA12164@localhost.localdomain>
	<466D317D.3090806@kevincarmody.com>
Message-ID: <20070611113747.GA13106@localhost.localdomain>

On Mon, 11 Jun 2007, Kevin Carmody wrote:
> >We need some feedback from Harbour users.
> I think that this copyright notice is of dubious legality.  A copyright 
> notice is a legal notice, and to have any effect, it should conform to 
> legal requirements. The year or years should be followed by the 
> copyright holder.  Although a web site owner can hold a copyright, a web 
> address itself cannot hold a copyright, any more than a street address 
> can hold a copyright.
[...]

Thanks for the information. We do not want to change the license but
we are updating the year in Copyright note what is perfectly legal and
respects modifications done in current year by Harbour developers
which are also Copyright holders of given files because they added
their own code to them.

BTW when I was asking about Harbour user feedback I thought about
    information about new incoming BETA3 release :-)

best regards,
Przemek
From antonioharbour at gmail.com  Mon Jun 11 08:01:20 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Jun 11 08:01:34 2007
Subject: [Harbour] Harbour + FWH
In-Reply-To: <20070611110639.GA12793@localhost.localdomain>
Message-ID: <466d3998.4c62f188.0d5b.ffffd97d@mx.google.com>

Przemek, 

>> I told Luis to use __TRACEPRGCALLS( .T. ) so he may find where the 
>> problem is coming from.

> If HVM starts.

It starts

> What was the released date of FWH2.5?

More than two years ago

Regards,

Antonio

From philb at philb.us  Mon Jun 11 09:14:11 2007
From: philb at philb.us (Phil Barnett)
Date: Mon Jun 11 09:14:14 2007
Subject: [Harbour] harbour vs hbrun copyright messages
In-Reply-To: <20070611113747.GA13106@localhost.localdomain>
References: <9257026e0706110231q1d214e3cp3d976bb1934f41d@mail.gmail.com>
	<466D317D.3090806@kevincarmody.com>
	<20070611113747.GA13106@localhost.localdomain>
Message-ID: <200706110914.11119.philb@philb.us>

On Monday 11 June 2007 07:37, Przemyslaw Czerpak wrote:

> We do not want to change the license but
> we are updating the year in Copyright note what is perfectly legal

Well, actually Kevin is correct. Copyrights must be held by a legal entity and 
Harbour-Project is not one. We've been over this before a long time ago. It 
should probably say something like:

Copyright (C) 1999-2007 by Individual Authors, All Rights Reserved Worldwide.

That's as close to a legal Copyright notice as we can get. Our earlier topic 
on this discussed that one legal entity that could really take care of the 
code would be to assign all copyrights to the FSF. But that would take the 
signed consent of each copyright holder. It could, however, be done by 
individual authors at any time, which would bring them into the fray if the 
SHTF.

-- 
Phil Barnett
AI4OF
SKCC #600
From druzus at priv.onet.pl  Mon Jun 11 09:24:46 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun 11 09:25:22 2007
Subject: [Harbour] harbour vs hbrun copyright messages
In-Reply-To: <200706110914.11119.philb@philb.us>
References: <9257026e0706110231q1d214e3cp3d976bb1934f41d@mail.gmail.com>
	<466D317D.3090806@kevincarmody.com>
	<20070611113747.GA13106@localhost.localdomain>
	<200706110914.11119.philb@philb.us>
Message-ID: <20070611132446.GA14366@localhost.localdomain>

On Mon, 11 Jun 2007, Phil Barnett wrote:
> On Monday 11 June 2007 07:37, Przemyslaw Czerpak wrote:
> > We do not want to change the license but
> > we are updating the year in Copyright note what is perfectly legal
> Well, actually Kevin is correct. Copyrights must be held by a legal entity and 
> Harbour-Project is not one. We've been over this before a long time ago. It 
> should probably say something like:
> 
> Copyright (C) 1999-2007 by Individual Authors, All Rights Reserved Worldwide.
> That's as close to a legal Copyright notice as we can get. Our earlier topic 
> on this discussed that one legal entity that could really take care of the 
> code would be to assign all copyrights to the FSF. But that would take the 
> signed consent of each copyright holder. It could, however, be done by 
> individual authors at any time, which would bring them into the fray if the 
> SHTF.

I agree with it - I was taking _ONLY_ about updating year. Sorry I should
be more careful in reading the messages to not lose other threads.

best regards,
Przemek
From dbtopas at dbtopas.lt  Mon Jun 11 10:07:14 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Jun 11 10:03:10 2007
Subject: [Harbour] Empty Source File ???
In-Reply-To: <20070610203115.GA1569@localhost.localdomain>
References: <165m63dkfs2ur0qt68epku2s74pnpfpk7o@4ax.com>
	<20070610203115.GA1569@localhost.localdomain>
Message-ID: <466D5712.8000009@dbtopas.lt>

> F.e. someone of us may implement
> binary object (.obj/.o) file generation on some platforms - it's
> even quite easy job for someone who knows the format.
> 
> BTW is anyone interested in finishing support for .obj file for W32?

Hello,


the problem is large number of .obj formats on W32: BCC, MSVC, MinGW, 
etc. COFF/OMF is not enough. MGW and MSVC both are COFF, but still uses 
different startup .CRT$XIY/.ctors. MSVC probably decorates function 
names with _Function@0 or something. 64-bit platforms is yet another story.

Current genobj32 seems to be for BCC. I can do support for direct obj 
compile if people find it useful. But I want the solution to be more 
complete than BCC55 only.

Does anybody know about differences among different compilers obj files? 
Are MinGW/W32 and GCC/Linux using the same obj format?

One more question is about droping C code "header" for .prg functions. 
This subject was mentioned in mailling list some time ago, but I do not 
recall the context. What about speed of .prg functions with vs without C 
  "header"? What are the other features and drawback? (I ask this, 
because droping C header reduces .text segment, fixup count, etc, so it 
easier to do direct obj support :) )


Best regards,
Mindaugas
From harbour.01 at syenar.hu  Mon Jun 11 10:26:23 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jun 11 10:26:28 2007
Subject: [Harbour] ChangeLog,v fix and SVN
Message-ID: <505CB0D5-8730-4671-B1D1-49D15A9C4348@syenar.hu>

Hi all,

Could anyone arrange a fix for this file?

If this is done, I will start converting the repository to SVN.

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Jun 11 10:28:16 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jun 11 10:30:20 2007
Subject: [Harbour] CHANGELOG: 2007-06-11 16:28 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7ac34$Blat.v2.6.1$c037bd46$414478b1776@127.0.0.1>

2007-06-11 16:28 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * harbour/ChangeLog
   + harbour/ChangeLog.016
     * ChangeLog archived.

From druzus at priv.onet.pl  Mon Jun 11 10:43:21 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun 11 10:43:57 2007
Subject: [Harbour] ChangeLog,v fix and SVN
In-Reply-To: <505CB0D5-8730-4671-B1D1-49D15A9C4348@syenar.hu>
References: <505CB0D5-8730-4671-B1D1-49D15A9C4348@syenar.hu>
Message-ID: <20070611144321.GA14747@localhost.localdomain>

On Mon, 11 Jun 2007, Szak?ts Viktor wrote:
> Hi all,
> Could anyone arrange a fix for this file?
> If this is done, I will start converting the repository to SVN.

I was looking at this file and as far as I remember information about
one modification was corrupted and the test was OK. I can try to update
it manually but I need some tools for verification.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Jun 11 10:50:01 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jun 11 10:50:02 2007
Subject: [Harbour] ChangeLog,v fix and SVN
In-Reply-To: <20070611144321.GA14747@localhost.localdomain>
References: <505CB0D5-8730-4671-B1D1-49D15A9C4348@syenar.hu>
	<20070611144321.GA14747@localhost.localdomain>
Message-ID: <537F0D2D-657C-4873-B298-6E3E2A2DA26C@syenar.hu>


On 2007.06.11., at 16:43, Przemyslaw Czerpak wrote:

> On Mon, 11 Jun 2007, Szak?ts Viktor wrote:
>> Hi all,
>> Could anyone arrange a fix for this file?
>> If this is done, I will start converting the repository to SVN.
>
> I was looking at this file and as far as I remember information about
> one modification was corrupted and the test was OK. I can try to  
> update
> it manually but I need some tools for verification.

If it goes through cvs2svn, we can consider it okey.
I can check it for you.

Brgds,
Viktor

From lkrausem at shaw.ca  Mon Jun 11 11:03:53 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Mon Jun 11 11:04:09 2007
Subject: [Harbour] Harbour + FWH
In-Reply-To: <466d2801.5e0a24fd.0ee3.ffffd9a7@mx.google.com>
References: <466d2801.5e0a24fd.0ee3.ffffd9a7@mx.google.com>
Message-ID: <466D6459.8030507@shaw.ca>

Antonio, all

I sort of narrowed the problem.  It happens inside TMDIClient:New call to
CreateWindow()
I don't know yet if the problem are the contents of

   cClientCreateStruct := ;
      I2Bin( GetSubMenu( oWnd:oMenu:hMenu, nSubMenu - 1 ) ) + ;
      I2Bin( nIdChildFirst )

Thnt are passed down to CreateWindow() or something inside
CreateWindow() itself, so still checking....

Regards,

Antonio Linares wrote:

>Przemek,
>
>I told Luis to use __TRACEPRGCALLS( .T. ) so he may find where the problem
>is coming from.
>
>Regards,
>
>Antonio 
>
>-----Mensaje original-----
>De: harbour-bounces@harbour-project.org
>[mailto:harbour-bounces@harbour-project.org] En nombre de Przemyslaw Czerpak
>Enviado el: lunes, 11 de junio de 2007 12:26
>Para: Harbour Project Main Developer List.
>Asunto: Re: [Harbour] Harbour + FWH
>
>On Sun, 10 Jun 2007, Luis Krause Mantilla wrote:
>  
>
>>Hi all:
>>I have some small apps that were built with Harbou +FWH but hadn't 
>>touched them for several years.  I wanted to try to build them again 
>>so I updated Harbour from CVS (devel branch) and rebuilt every single 
>>library it uses (especially the prg ones).
>>After fixing some issues that changed and being able to build all 3rd 
>>party libs and the exe, it dies right away.
>>
>>I can see how the executable shows up in the Task Manager for a few 
>>seconds but goes away immediately.  There's no error.log or trace.log 
>>or anything that would hint on what's going on.
>>    
>>
>
>Run it in console window to see stdout/stderr error HVM messages (if any).
>You can also redirect them to file, f.e.:
>    myapp > stdout 2> stderr
>AFARI 2> works only in newer windows versions (XP, maybe W2K)
>
>  
>
>>I made sure that fiveH.lib (from v. 2.5) was recompiled to make sure I 
>>didn't have a PCODE mismatch, but still no go.
>>    
>>
>
>I do not know if current code can work with FWH 2.5 - even if it can be
>linked. In general all 3-rd part libraries created when [x]Harbour header
>files have HB_API_MACROS and HB_STACK_MACROS enabled by default can be used
>_ONLY_ with the same version of [x]Harbour then the one used to compile
>them. The problem is inside C code not in .prg.
>
>best regards,
>Przemek
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>  
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070611/7bc9b277/attachment-0001.html
From lkrausem at shaw.ca  Mon Jun 11 11:08:22 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Mon Jun 11 11:08:53 2007
Subject: [Harbour] Harbour + FWH
In-Reply-To: <20070611102628.GB12164@localhost.localdomain>
References: <466C8AD0.50308@shaw.ca>
	<20070611102628.GB12164@localhost.localdomain>
Message-ID: <466D6566.4070503@shaw.ca>

Przemek:

As I just mentioned to Antonio, it's something in CreateWindow()... yet 
it works OK
with xHarbour.

>Run it in console window to see stdout/stderr error HVM messages (if any).
>You can also redirect them to file, f.e.:
>    myapp > stdout 2> stderr
>  
>
stderr file comes out empty.

>AFARI 2> works only in newer windows versions (XP, maybe W2K)
>
>  
>
It's not that old.  I can build the same app with xHarbour+FWH 2.5

>>I made sure that fiveH.lib (from v. 2.5) was 
>>recompiled to make sure I didn't have a PCODE mismatch, but still no go.
>>    
>>
>
>I do not know if current code can work with FWH 2.5 - even if it can be
>linked. In general all 3-rd part libraries created when [x]Harbour header
>files have HB_API_MACROS and HB_STACK_MACROS enabled by default can be
>used _ONLY_ with the same version of [x]Harbour then the one used to
>compile them. The problem is inside C code not in .prg.
>  
>
I'll try building it with HB_API_MACROS and HB_STACK_MACROS too see if 
it makes
any difference.

Thanks.

>best regards,
>Przemek
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>  
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070611/37cbab24/attachment.html
From lkrausem at shaw.ca  Mon Jun 11 11:09:20 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Mon Jun 11 11:09:38 2007
Subject: [Harbour] Harbour + FWH
In-Reply-To: <20070611110639.GA12793@localhost.localdomain>
References: <20070611102628.GB12164@localhost.localdomain>
	<466d2801.5e0a24fd.0ee3.ffffd9a7@mx.google.com>
	<20070611110639.GA12793@localhost.localdomain>
Message-ID: <466D65A0.1080407@shaw.ca>

Przemek:

I think Oct 2005.  The build I have if from Jan 2006.
The same app builds and runs fine with xHarbour.

Przemyslaw Czerpak wrote:

>On Mon, 11 Jun 2007, Antonio Linares wrote:
>  
>
>>I told Luis to use __TRACEPRGCALLS( .T. ) so he may find where the problem
>>is coming from.
>>    
>>
>
>If HVM starts.
>What was the released date of FWH2.5?
>
>best regards,
>Przemek
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>  
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070611/d02eb755/attachment.html
From lkrausem at shaw.ca  Mon Jun 11 11:16:54 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Mon Jun 11 11:17:02 2007
Subject: [Harbour] Harbour + FWH
In-Reply-To: <466D65A0.1080407@shaw.ca>
References: <20070611102628.GB12164@localhost.localdomain>
	<466d2801.5e0a24fd.0ee3.ffffd9a7@mx.google.com>
	<20070611110639.GA12793@localhost.localdomain>
	<466D65A0.1080407@shaw.ca>
Message-ID: <466D6766.50704@shaw.ca>

Oops...

I meant Oct 2004 and the build I have if from Jan 2005.

Luis Krause Mantilla wrote:

> Przemek:
>
> I think Oct 2005.  The build I have if from Jan 2006.
> The same app builds and runs fine with xHarbour.
>
> Przemyslaw Czerpak wrote:
>
>>On Mon, 11 Jun 2007, Antonio Linares wrote:
>>  
>>
>>>I told Luis to use __TRACEPRGCALLS( .T. ) so he may find where the problem
>>>is coming from.
>>>    
>>>
>>
>>If HVM starts.
>>What was the released date of FWH2.5?
>>
>>best regards,
>>Przemek
>>_______________________________________________
>>Harbour mailing list
>>Harbour@harbour-project.org
>>http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>  
>>
>
>-- 
>Luis Krause Mantilla
>lkrausem at shaw dot ca
>luis_krause at hotmail dot com
>"May the Source be with GNU"
>
>  
>
>------------------------------------------------------------------------
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>  
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070611/d46311b3/attachment.html
From antonioharbour at gmail.com  Mon Jun 11 11:45:18 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Jun 11 11:45:29 2007
Subject: [Harbour] Harbour + FWH
In-Reply-To: <466D6566.4070503@shaw.ca>
Message-ID: <466d6e11.679c9bb5.2678.1f56@mx.google.com>

Luis,

>
I'll try building it with HB_API_MACROS and HB_STACK_MACROS too see if it
makes
any difference.
>

The problem is in FiveHC.lib, that has to be rebuilt too

Regards,

Antonio

From druzus at priv.onet.pl  Mon Jun 11 12:01:13 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun 11 12:01:48 2007
Subject: [Harbour] Harbour + FWH
In-Reply-To: <466D6566.4070503@shaw.ca>
References: <466C8AD0.50308@shaw.ca>
	<20070611102628.GB12164@localhost.localdomain>
	<466D6566.4070503@shaw.ca>
Message-ID: <20070611160113.GA14968@localhost.localdomain>

On Mon, 11 Jun 2007, Luis Krause Mantilla wrote:
> Przemek:
> As I just mentioned to Antonio, it's something in CreateWindow()... yet 
> it works OK
> with xHarbour.

Forget about using versions older then 2.7 with current Harbour CVS. F.e.
hb_stack.return was uses directly in all hb_ret*() functions so 3-rd party
code compiled with older Harbour header files has hardcoded offset to these
member inside hb_stack structure. There was many modifications in these
structure in last years so I cannot say where these code points now.
You can safely used such binaries _ONLY_ with the old Harbour source code
where all internal structures have unchanged members.
Setting HB_API_MACROS and HB_STACK_MACROS by default in [x]Harbour
header files was a mistake which causes problems few years later.
Now HB_API_MACROS and HB_STACK_MACROS are disabled by default for 3-rd
party code and I hope that 3-rd party developers will not try to enable
them.

In fact we should also block access to hb_set structure because it can
source of similar problems in the future.

> >I do not know if current code can work with FWH 2.5 - even if it can be
> >linked. In general all 3-rd part libraries created when [x]Harbour header
> >files have HB_API_MACROS and HB_STACK_MACROS enabled by default can be
> >used _ONLY_ with the same version of [x]Harbour then the one used to
> >compile them. The problem is inside C code not in .prg.
> I'll try building it with HB_API_MACROS and HB_STACK_MACROS too see if 
> it makes
> any difference.

It cannot help because it's not inside Harbour. The 3-rd party code
like FWH was compiled with HB_API_MACROS and HB_STACK_MACROS so it
contains hardcoded addresses for some structure members, f.e. to
hb_stack.return. To fix it you will have to decompile C code in FWH
and rebuild it without HB_API_MACROS and HB_STACK_MACROS. I guess
it's impossible.

best regards,
Przemek
From toninhofwi at yahoo.com.br  Mon Jun 11 12:09:58 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Jun 11 12:10:34 2007
Subject: [Harbour] Harbour + FWH
In-Reply-To: <466d6e11.679c9bb5.2678.1f56@mx.google.com>
References: <466D6566.4070503@shaw.ca>
	<466d6e11.679c9bb5.2678.1f56@mx.google.com>
Message-ID: <cosq635tbodrscae5b31oq0ihtj9rd4bfo@4ax.com>

>The problem is in FiveHC.lib, that has to be rebuilt too
Not only this, in OLD FWH code we have direct access to internals like
in MAPI.C:

OLD:
hb_arrayGet( _param( 10, ARRAY ), w + 1, &hb_stack.Return );

NEW:
hb_arrayGet( _param( 9, S_ARRAY ), w + 1, hb_stackReturnItem() );


Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From lkrausem at shaw.ca  Mon Jun 11 12:25:12 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Mon Jun 11 12:25:47 2007
Subject: [Harbour] Harbour + FWH
In-Reply-To: <466d6e11.679c9bb5.2678.1f56@mx.google.com>
References: <466d6e11.679c9bb5.2678.1f56@mx.google.com>
Message-ID: <466D7768.9010007@shaw.ca>

OK.

I'll guess this app needs some more upgrading.

Thx.

Antonio Linares wrote:

>Luis,
>
>  
>
>I'll try building it with HB_API_MACROS and HB_STACK_MACROS too see if it
>makes
>any difference.
>  
>
>
>The problem is in FiveHC.lib, that has to be rebuilt too
>
>Regards,
>
>Antonio
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>  
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070611/7e88cac6/attachment.html
From lkrausem at shaw.ca  Mon Jun 11 12:32:08 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Mon Jun 11 12:33:04 2007
Subject: [Harbour] Harbour + FWH
In-Reply-To: <20070611160113.GA14968@localhost.localdomain>
References: <466C8AD0.50308@shaw.ca>
	<20070611102628.GB12164@localhost.localdomain>
	<466D6566.4070503@shaw.ca>
	<20070611160113.GA14968@localhost.localdomain>
Message-ID: <466D7908.4080000@shaw.ca>

Przemek:

I see.  This is some old code I wanted to bring up to date with Harbour, so
I guess it will need updating in other areas.

I'll have to do some more fixing to bring it up to date.

Thanks!

Przemyslaw Czerpak wrote:

>On Mon, 11 Jun 2007, Luis Krause Mantilla wrote:
>  
>
>>Przemek:
>>As I just mentioned to Antonio, it's something in CreateWindow()... yet 
>>it works OK
>>with xHarbour.
>>    
>>
>
>Forget about using versions older then 2.7 with current Harbour CVS. F.e.
>hb_stack.return was uses directly in all hb_ret*() functions so 3-rd party
>code compiled with older Harbour header files has hardcoded offset to these
>member inside hb_stack structure. There was many modifications in these
>structure in last years so I cannot say where these code points now.
>You can safely used such binaries _ONLY_ with the old Harbour source code
>where all internal structures have unchanged members.
>Setting HB_API_MACROS and HB_STACK_MACROS by default in [x]Harbour
>header files was a mistake which causes problems few years later.
>Now HB_API_MACROS and HB_STACK_MACROS are disabled by default for 3-rd
>party code and I hope that 3-rd party developers will not try to enable
>them.
>
>In fact we should also block access to hb_set structure because it can
>source of similar problems in the future.
>
>  
>
>>>I do not know if current code can work with FWH 2.5 - even if it can be
>>>linked. In general all 3-rd part libraries created when [x]Harbour header
>>>files have HB_API_MACROS and HB_STACK_MACROS enabled by default can be
>>>used _ONLY_ with the same version of [x]Harbour then the one used to
>>>compile them. The problem is inside C code not in .prg.
>>>      
>>>
>>I'll try building it with HB_API_MACROS and HB_STACK_MACROS too see if 
>>it makes
>>any difference.
>>    
>>
>
>It cannot help because it's not inside Harbour. The 3-rd party code
>like FWH was compiled with HB_API_MACROS and HB_STACK_MACROS so it
>contains hardcoded addresses for some structure members, f.e. to
>hb_stack.return. To fix it you will have to decompile C code in FWH
>and rebuild it without HB_API_MACROS and HB_STACK_MACROS. I guess
>it's impossible.
>
>best regards,
>Przemek
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>  
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070611/8de779a7/attachment.html
From i at kevincarmody.com  Mon Jun 11 15:25:57 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Mon Jun 11 15:25:48 2007
Subject: [Harbour] harbour vs hbrun copyright messages
In-Reply-To: <200706110914.11119.philb@philb.us>
References: <9257026e0706110231q1d214e3cp3d976bb1934f41d@mail.gmail.com>	<466D317D.3090806@kevincarmody.com>	<20070611113747.GA13106@localhost.localdomain>
	<200706110914.11119.philb@philb.us>
Message-ID: <466DA1C5.4070705@kevincarmody.com>

Phil Barnett wrote:
> On Monday 11 June 2007 07:37, Przemyslaw Czerpak wrote:
>   
>> We do not want to change the license but
>> we are updating the year in Copyright note what is perfectly legal
>>     
>
> Well, actually Kevin is correct. Copyrights must be held by a legal entity and 
> Harbour-Project is not one. We've been over this before a long time ago. It 
> should probably say something like:
>
> Copyright (C) 1999-2007 by Individual Authors, All Rights Reserved Worldwide.

This is the right direction, but unfortunately this form makes it sound 
like there is a legal entity named "Individual Authors" that holds the 
copyright. Remember that some source code is in the public domain and is 
thus not copyrightable in any way.  I think you have to go with a form 
that does not include dates or the copyright symbol, like "Copyright is 
held by individual authors.  See individual source files for copyright 
notices.  Some source code is in the public domain."

Kevin


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070611/d2b2ab0a/attachment.html
From toninhofwi at yahoo.com.br  Mon Jun 11 15:46:35 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Jun 11 15:47:09 2007
Subject: [Harbour] Help to use Hash please.
Message-ID: <oh9r63deakmf3sv3am0jmij2uo1qhrav30@4ax.com>

Hi.

I?m sorry, but I can?t understand why the next code works in XH but
not in Harbour:

---cut---
procedure main( )
   local hHash := Hash()
   HB_HAutoAdd( hHash, .t. )
   hHash[ "mytime" ] = nil
   hHash:mytime = Time()
   ? hHash:mytime
return
---cut---



Thanks and best regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From druzus at priv.onet.pl  Mon Jun 11 15:59:05 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun 11 15:59:40 2007
Subject: [Harbour] Help to use Hash please.
In-Reply-To: <oh9r63deakmf3sv3am0jmij2uo1qhrav30@4ax.com>
References: <oh9r63deakmf3sv3am0jmij2uo1qhrav30@4ax.com>
Message-ID: <20070611195905.GA25626@localhost.localdomain>

On Mon, 11 Jun 2007, Toninho@fwi wrote:
> Hi.
> I?m sorry, but I can?t understand why the next code works in XH but
> not in Harbour:
> 
> ---cut---
> procedure main( )
>    local hHash := Hash()
>    HB_HAutoAdd( hHash, .t. )
>    hHash[ "mytime" ] = nil
>    hHash:mytime = Time()
>    ? hHash:mytime
> return
> ---cut---

We decided to not enable message interface for hash items.
It's present but if you want to use it then you have to build
Harbour with HB_HASH_MSG_ITEMS macro set.

best regards,
Przemek
From toninhofwi at yahoo.com.br  Mon Jun 11 17:22:55 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Jun 11 17:20:33 2007
Subject: [Harbour] Help to use Hash please.
In-Reply-To: <20070611195905.GA25626@localhost.localdomain>
References: <oh9r63deakmf3sv3am0jmij2uo1qhrav30@4ax.com>
	<20070611195905.GA25626@localhost.localdomain>
Message-ID: <c8fr63ls810ef6t7aep4j67bs98n70sora@4ax.com>

>We decided to not enable message interface for hash items.
>It's present but if you want to use it then you have to build
>Harbour with HB_HASH_MSG_ITEMS macro set.

Thanks again Przemek.

Regards,

Toninho.



		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From druzus at priv.onet.pl  Mon Jun 11 17:24:38 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun 11 17:25:14 2007
Subject: [Harbour] ChangeLog,v fix and SVN
In-Reply-To: <537F0D2D-657C-4873-B298-6E3E2A2DA26C@syenar.hu>
References: <505CB0D5-8730-4671-B1D1-49D15A9C4348@syenar.hu>
	<20070611144321.GA14747@localhost.localdomain>
	<537F0D2D-657C-4873-B298-6E3E2A2DA26C@syenar.hu>
Message-ID: <20070611212438.GA28762@localhost.localdomain>

On Mon, 11 Jun 2007, Szak?ts Viktor wrote:
> >>Could anyone arrange a fix for this file?
> >>If this is done, I will start converting the repository to SVN.
> >I was looking at this file and as far as I remember information about
> >one modification was corrupted and the test was OK. I can try to  
> >update
> >it manually but I need some tools for verification.
> If it goes through cvs2svn, we can consider it okey.
> I can check it for you.

Victor try to change in ChangeLog,v line with:

    a16 138

to:

    a16 2134

It's a hack which does not fix the corruption but may hide the problem.
Not tested.

Best regards,
Przemek
From e.m.giordano at emagsoftware.it  Mon Jun 11 17:26:05 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jun 11 17:26:40 2007
Subject: [Harbour] Bug in /gc3?
Message-ID: <007a01c7ac6f$1eb0d080$0100a8c0@emag>

The following sample

FUNCTION MAIN()

    LOCAL xYear := DATE()

    LOCAL nYear := IF( VALTYPE( xYear ) = "D", YEAR( xYear ), xYear )

    RETURN NIL

gives the following error

Error E2448 PEPPE.c 68: Undefined label 'lab00002' in function HB_FUN_MAIN

if compiled with /gc3 switch.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From druzus at priv.onet.pl  Mon Jun 11 17:57:21 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun 11 17:57:56 2007
Subject: [Harbour] Bug in /gc3?
In-Reply-To: <007a01c7ac6f$1eb0d080$0100a8c0@emag>
References: <007a01c7ac6f$1eb0d080$0100a8c0@emag>
Message-ID: <20070611215721.GA28950@localhost.localdomain>

On Mon, 11 Jun 2007, Enrico Maria Giordano wrote:
> The following sample
> FUNCTION MAIN()
>    LOCAL xYear := DATE()
>    LOCAL nYear := IF( VALTYPE( xYear ) = "D", YEAR( xYear ), xYear )
>    RETURN NIL
> gives the following error
> Error E2448 PEPPE.c 68: Undefined label 'lab00002' in function HB_FUN_MAIN
> if compiled with /gc3 switch.

Thanks for the info. It's my fault - I forgot to check for possible jump
inside. I'll fix it and also check rest of optimization code. Sorry I
should not make such stupid bugs.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Jun 11 17:58:17 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jun 11 17:58:21 2007
Subject: [Harbour] ChangeLog,v fix and SVN
In-Reply-To: <20070611212438.GA28762@localhost.localdomain>
References: <505CB0D5-8730-4671-B1D1-49D15A9C4348@syenar.hu>
	<20070611144321.GA14747@localhost.localdomain>
	<537F0D2D-657C-4873-B298-6E3E2A2DA26C@syenar.hu>
	<20070611212438.GA28762@localhost.localdomain>
Message-ID: <1792E509-6B96-43BA-97E2-DF55968059F7@syenar.hu>


On 2007.06.11., at 23:24, Przemyslaw Czerpak wrote:

> On Mon, 11 Jun 2007, Szak?ts Viktor wrote:
>>>> Could anyone arrange a fix for this file?
>>>> If this is done, I will start converting the repository to SVN.
>>> I was looking at this file and as far as I remember information  
>>> about
>>> one modification was corrupted and the test was OK. I can try to
>>> update
>>> it manually but I need some tools for verification.
>> If it goes through cvs2svn, we can consider it okey.
>> I can check it for you.
>
> Victor try to change in ChangeLog,v line with:
>
>     a16 138
>
> to:
>
>     a16 2134
>
> It's a hack which does not fix the corruption but may hide the  
> problem.
> Not tested.

I've tried it, but cvs2svn (everything latest) still says the file is  
not valid:

C:\devl\cvs2svn-1.5.1>C:\Python23\python cvs2svn --use-cvs -s C: 
\svn_new\harbour C:\cvs\hb-cvsbackup
----- pass 1 (CollectRevsPass) -----
Examining all CVS ',v' files...
C:\cvs\hb-cvsbackup\harbour\ChangeLog,v
('2002-05-15 12:00 UTC+0300 Alexander Kresin <alex@belacy.belgorod.su> 
\n', 'log', '1.4033', 'd2 1\na2 1\n * $Id: ChangeLog,v 1.4033  
2002/05/15 07:57:32 alkresin Exp $\nd10 3\n')
ERROR: 'C:\cvs\hb-cvsbackup\harbour\ChangeLog,v' is not a valid ,v file
Pass 1 complete.
======================================================================== 
===
Error summary:
ERROR: 'C:\cvs\hb-cvsbackup\harbour\ChangeLog,v' is not a valid ,v file
Exited due to fatal error(s).

Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Mon Jun 11 18:10:27 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jun 11 18:11:01 2007
Subject: [Harbour] Bug in /gc3?
References: <007a01c7ac6f$1eb0d080$0100a8c0@emag>
	<20070611215721.GA28950@localhost.localdomain>
Message-ID: <00aa01c7ac75$5100da70$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: lunedi 11 giugno 2007 23.57
Oggetto: Re: [Harbour] Bug in /gc3?


> Thanks for the info. It's my fault - I forgot to check for possible jump
> inside. I'll fix it and also check rest of optimization code. Sorry I
> should not make such stupid bugs.

Hey, you are human, Przemek! :-)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From druzus at priv.onet.pl  Mon Jun 11 18:26:16 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun 11 18:26:53 2007
Subject: [Harbour] ChangeLog,v fix and SVN
In-Reply-To: <1792E509-6B96-43BA-97E2-DF55968059F7@syenar.hu>
References: <505CB0D5-8730-4671-B1D1-49D15A9C4348@syenar.hu>
	<20070611144321.GA14747@localhost.localdomain>
	<537F0D2D-657C-4873-B298-6E3E2A2DA26C@syenar.hu>
	<20070611212438.GA28762@localhost.localdomain>
	<1792E509-6B96-43BA-97E2-DF55968059F7@syenar.hu>
Message-ID: <20070611222616.GA1650@localhost.localdomain>

On Mon, 11 Jun 2007, Szak?ts Viktor wrote:
> I've tried it, but cvs2svn (everything latest) still says the file is  
> not valid:
> C:\devl\cvs2svn-1.5.1>C:\Python23\python cvs2svn --use-cvs -s C: 
> \svn_new\harbour C:\cvs\hb-cvsbackup
> ----- pass 1 (CollectRevsPass) -----
> Examining all CVS ',v' files...
> C:\cvs\hb-cvsbackup\harbour\ChangeLog,v
> ('2002-05-15 12:00 UTC+0300 Alexander Kresin <alex@belacy.belgorod.su> 
> \n', 'log', '1.4033', 'd2 1\na2 1\n * $Id: ChangeLog,v 1.4033  
> 2002/05/15 07:57:32 alkresin Exp $\nd10 3\n')
> ERROR: 'C:\cvs\hb-cvsbackup\harbour\ChangeLog,v' is not a valid ,v file
> Pass 1 complete.
> ======================================================================== 
> ===
> Error summary:
> ERROR: 'C:\cvs\hb-cvsbackup\harbour\ChangeLog,v' is not a valid ,v file
> Exited due to fatal error(s).

take original ChangeLog,v and patch it using attached .diff file.

best regards,
Przemek
-------------- next part --------------
--- ChangeLog,v-orig	2007-06-11 19:40:32.000000000 +0200
+++ ChangeLog,v	2007-06-12 00:25:19.000000000 +0200
@@ -84946,7 +84946,7 @@
        pasted from CTMISC.PRG and removed there 
                                            
 d155 2
-a156 2
+a156 18
      SCREENMIX() by Viktor Szakats <viktor.szakats@@searchpath()
     *makefile.bc
     hb_slex.vc
@@ -84966,13 +84966,6 @@
    * source/rtl/tbrowse.prg
      + TOFIX added, about missing AutoLite support (neede9:26 UTC+0300 Alexander Kresin <alex@@belacy.belgorod.su>
 @
-text
-@d2 1
-a2 1
- * $Id: ChangeLog,v 1.4033 2002/05/15 07:57:32 alkresin Exp $
-d10 3
-@
-
 
 1.4033
 log
From harbour.01 at syenar.hu  Mon Jun 11 19:06:13 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jun 11 19:06:23 2007
Subject: [Harbour] ChangeLog,v fix and SVN
In-Reply-To: <20070611222616.GA1650@localhost.localdomain>
References: <505CB0D5-8730-4671-B1D1-49D15A9C4348@syenar.hu>
	<20070611144321.GA14747@localhost.localdomain>
	<537F0D2D-657C-4873-B298-6E3E2A2DA26C@syenar.hu>
	<20070611212438.GA28762@localhost.localdomain>
	<1792E509-6B96-43BA-97E2-DF55968059F7@syenar.hu>
	<20070611222616.GA1650@localhost.localdomain>
Message-ID: <3D1C9CBF-BF11-43AF-A467-D6E72582BAE3@syenar.hu>

A bit better, now Pass 1 goes on without error, but then I get this:

Done
----- pass 2 (CollateSymbolsPass) -----
Checking for blocked exclusions...
Checking for forced tags with commits...
Done
----- pass 3 (ResyncRevsPass) -----
Re-synchronizing CVS revision timestamps...
ERROR: Key 481L not found within items currently accessible.

(Something different - but also fatal - happens when I try with  
version 1.3)

Brgds,
Viktor

On 2007.06.12., at 0:26, Przemyslaw Czerpak wrote:

> On Mon, 11 Jun 2007, Szak?ts Viktor wrote:
>> I've tried it, but cvs2svn (everything latest) still says the file is
>> not valid:
>> C:\devl\cvs2svn-1.5.1>C:\Python23\python cvs2svn --use-cvs -s C:
>> \svn_new\harbour C:\cvs\hb-cvsbackup
>> ----- pass 1 (CollectRevsPass) -----
>> Examining all CVS ',v' files...
>> C:\cvs\hb-cvsbackup\harbour\ChangeLog,v
>> ('2002-05-15 12:00 UTC+0300 Alexander Kresin  
>> <alex@belacy.belgorod.su>
>> \n', 'log', '1.4033', 'd2 1\na2 1\n * $Id: ChangeLog,v 1.4033
>> 2002/05/15 07:57:32 alkresin Exp $\nd10 3\n')
>> ERROR: 'C:\cvs\hb-cvsbackup\harbour\ChangeLog,v' is not a valid ,v  
>> file
>> Pass 1 complete.
>> ===================================================================== 
>> ===
>> ===
>> Error summary:
>> ERROR: 'C:\cvs\hb-cvsbackup\harbour\ChangeLog,v' is not a valid ,v  
>> file
>> Exited due to fatal error(s).
>
> take original ChangeLog,v and patch it using attached .diff file.
>
> best regards,
> Przemek
> <ChangeLog,v.diff>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Mon Jun 11 19:57:18 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun 11 19:57:56 2007
Subject: [Harbour] ChangeLog,v fix and SVN
In-Reply-To: <3D1C9CBF-BF11-43AF-A467-D6E72582BAE3@syenar.hu>
References: <505CB0D5-8730-4671-B1D1-49D15A9C4348@syenar.hu>
	<20070611144321.GA14747@localhost.localdomain>
	<537F0D2D-657C-4873-B298-6E3E2A2DA26C@syenar.hu>
	<20070611212438.GA28762@localhost.localdomain>
	<1792E509-6B96-43BA-97E2-DF55968059F7@syenar.hu>
	<20070611222616.GA1650@localhost.localdomain>
	<3D1C9CBF-BF11-43AF-A467-D6E72582BAE3@syenar.hu>
Message-ID: <20070611235718.GA19669@localhost.localdomain>

On Tue, 12 Jun 2007, Szak?ts Viktor wrote:
> A bit better, now Pass 1 goes on without error, but then I get this:
> Done
> ----- pass 2 (CollateSymbolsPass) -----
> Checking for blocked exclusions...
> Checking for forced tags with commits...
> Done
> ----- pass 3 (ResyncRevsPass) -----
> Re-synchronizing CVS revision timestamps...
> ERROR: Key 481L not found within items currently accessible.

Try this patch - also for original ChangeLog,v version

best regards,
Przemek
-------------- next part --------------
--- ChangeLog,v-orig	2007-06-11 19:40:32.000000000 +0200
+++ ChangeLog,v	2007-06-12 01:52:38.000000000 +0200
@@ -41479,7 +41479,7 @@
       which returns NIL for buggy .prg destructors.
 
 d13 4
-a16 138
+a16 2134
     ! fixed date of my last commit
 
 2006-11-28 02:10 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
@@ -52883,6 +52883,23 @@
 @
 
 
+1.4989
+log
+@2006-07-24 13:50 UTC+0100 Ryszard Glab <rglab//imid.med.pl>
+   * source/pp/ppcore.c
+   * source/pp/pptable.c
+   * utils/hbpptest/pp_test.prg
+      * fixed to be more Clipper compatible
+      * fixed access to unallocated memory
+      * added more test cases
+@
+text
+@d2 1
+a2 1
+ * $Id: ChangeLog,v 1.4988 2006/07/21 00:50:50 druzus Exp $
+@
+
+
 1.4988
 log
 @2006-07-24 13:50 UTC+0100 Ryszard Glab <rglab//imid.med.pl>
@@ -54828,6 +54845,30 @@
 @
 
 
+1.4922
+log
+@2006-06-21 00:50 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
+  * harbour/config/w32/dir.cf
+    + added EOL at EOF
+
+  * harbour/config/w32/global.cf
+    * changed clean and dirbase commands to work cleanly with CMD.EXE
+
+  * harbour/source/rtl/gtwin/gtwin.c
+    * always try to allocate console
+    + added workaround for MSYS console which does not support
+      WriteConsoleOutput()/ReadConsoleInput()
+
+  * harbour/source/rtl/gtwvt/gtwvt.c
+    * changed default codepage to OEM
+@
+text
+@d2 1
+a2 1
+ * $Id: ChangeLog,v 1.4921 2006/06/20 15:41:52 druzus Exp $
+@
+
+
 1.4921
 log
 @2006-06-21 00:50 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
@@ -84946,7 +84987,7 @@
        pasted from CTMISC.PRG and removed there 
                                            
 d155 2
-a156 2
+a156 18
      SCREENMIX() by Viktor Szakats <viktor.szakats@@searchpath()
     *makefile.bc
     hb_slex.vc
@@ -84966,11 +85007,15 @@
    * source/rtl/tbrowse.prg
      + TOFIX added, about missing AutoLite support (neede9:26 UTC+0300 Alexander Kresin <alex@@belacy.belgorod.su>
 @
+
+1.4034
+log
+@2002-05-15 12:00 UTC+0300 Alexander Kresin <alex@@belacy.belgorod.su>
+@
 text
 @d2 1
 a2 1
- * $Id: ChangeLog,v 1.4033 2002/05/15 07:57:32 alkresin Exp $
-d10 3
+ * $Id: ChangeLog,v 1.4033 2002/05/14 20:23:51 dholm Exp $
 @
 
 
From toninhofwi at yahoo.com.br  Mon Jun 11 20:47:51 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Jun 11 20:45:30 2007
Subject: [Harbour] Is this a BUG or intentional ?
Message-ID: <d6rr6315pfvtcd3fqnkg77nr9prm6hkta4@4ax.com>

---cut---
procedure main()
   local c1, c2, c3
   test(@c1,@c2,@c3)
   ? c1
   ? c2
   ? c3
return
procedure test(...)
   local aPar := HB_AParams()
   aPar[1]:="1"
   aPar[2]:="2"
   aPar[3]:="3"
return
---cut---


Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From druzus at priv.onet.pl  Mon Jun 11 21:40:18 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun 11 21:40:54 2007
Subject: [Harbour] Is this a BUG or intentional ?
In-Reply-To: <d6rr6315pfvtcd3fqnkg77nr9prm6hkta4@4ax.com>
References: <d6rr6315pfvtcd3fqnkg77nr9prm6hkta4@4ax.com>
Message-ID: <20070612014018.GA19852@localhost.localdomain>

On Mon, 11 Jun 2007, Toninho@fwi wrote:
> ---cut---
> procedure main()
>    local c1, c2, c3
>    test(@c1,@c2,@c3)
>    ? c1
>    ? c2
>    ? c3
> return
> procedure test(...)
>    local aPar := HB_AParams()
>    aPar[1]:="1"
>    aPar[2]:="2"
>    aPar[3]:="3"
> return
> ---cut---

It's intentional.
To make the above code working as you want in xHarbour the behavior
of references stored in arrays had been reverted. But such modification
introduce incompatibility, f.e. this code:

    proc main()
        local x
        p({@x})
        ? x
    return
    proc p(a)
        local y:=a[1]
        y:="123"
    return

works in Clipper and Harbour but does not work in xHarbour.
In Harbour the code you want to have may look like:

    procedure main()
       local c1, c2, c3
       test(@c1,@c2,@c3)
       ? c1
       ? c2
       ? c3
    return
    procedure test(...)
       local aPar := {...} // a little bit faster then HB_AParams()
       local c1, c2, c3
       c1:=aPar[1]
       c2:=aPar[2]
       c3:=aPar[3]
       c1:="1"
       c2:="2"
       c3:="3"
    return

We cannot change it without introducing incompatibility to Clipper.
Some people used such arrays as workaround for Clipper limit in
number of parameters and reported the above modification in xHarbour
as a bug so I do not think we can replicate it.
In the past I was thinking about adding support for 2-nd parameter
in HB_PVALUE() function to implement ASSIGN operation so test()
procedure may look like:
    procedure test(...)
       HB_PVALUE(1,"1")
       HB_PVALUE(2,"2")
       HB_PVALUE(3,"3")
    return
If you will find it useful then I can add it in next commit.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Jun 12 04:04:09 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jun 12 04:04:09 2007
Subject: [Harbour] ChangeLog,v fix and SVN
In-Reply-To: <20070611235718.GA19669@localhost.localdomain>
References: <505CB0D5-8730-4671-B1D1-49D15A9C4348@syenar.hu>
	<20070611144321.GA14747@localhost.localdomain>
	<537F0D2D-657C-4873-B298-6E3E2A2DA26C@syenar.hu>
	<20070611212438.GA28762@localhost.localdomain>
	<1792E509-6B96-43BA-97E2-DF55968059F7@syenar.hu>
	<20070611222616.GA1650@localhost.localdomain>
	<3D1C9CBF-BF11-43AF-A467-D6E72582BAE3@syenar.hu>
	<20070611235718.GA19669@localhost.localdomain>
Message-ID: <2C6C6AF5-DD4D-492C-ADEF-DEFB1A7642D6@syenar.hu>

Hi Przemek,

Now the conversion runs fine, I'm now waiting for the full
conversion to finish. One thing I've noticed is that the total
number of revisions jumped from 6600 to 7500. (compared
to the repository without ChangeLog).

This can be normal, if ChangeLog had many sole
modifications, but I'll take a look at the final result to be sure.
(I'll also make the new repository public for you and everyone
to see).

Thanks.

Brgds,
Viktor

On 2007.06.12., at 1:57, Przemyslaw Czerpak wrote:

> On Tue, 12 Jun 2007, Szak?ts Viktor wrote:
>> A bit better, now Pass 1 goes on without error, but then I get this:
>> Done
>> ----- pass 2 (CollateSymbolsPass) -----
>> Checking for blocked exclusions...
>> Checking for forced tags with commits...
>> Done
>> ----- pass 3 (ResyncRevsPass) -----
>> Re-synchronizing CVS revision timestamps...
>> ERROR: Key 481L not found within items currently accessible.
>
> Try this patch - also for original ChangeLog,v version
>
> best regards,
> Przemek
> <ChangeLog,v.diff>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From toninhofwi at yahoo.com.br  Tue Jun 12 06:32:39 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Jun 12 06:33:11 2007
Subject: [Harbour] Is this a BUG or intentional ?
In-Reply-To: <20070612014018.GA19852@localhost.localdomain>
References: <d6rr6315pfvtcd3fqnkg77nr9prm6hkta4@4ax.com>
	<20070612014018.GA19852@localhost.localdomain>
Message-ID: <t2ts63dslcshe97lsjg6ik503lihrpcpnt@4ax.com>

>Some people used such arrays as workaround for Clipper limit in
>number of parameters and reported the above modification in xHarbour
>as a bug so I do not think we can replicate it.
>In the past I was thinking about adding support for 2-nd parameter
>in HB_PVALUE() function to implement ASSIGN operation so test()
>procedure may look like:
>    procedure test(...)
>       HB_PVALUE(1,"1")
>       HB_PVALUE(2,"2")
>       HB_PVALUE(3,"3")
>    return
>If you will find it useful then I can add it in next commit.

Yes, Przemek it is so usefull. Imagine that the user have a code like
this:

procedure test(...)
   local aPar := HB_AParams(), n
   for n := 1 to Len( aPar )
        aPar[ n ] := MyFunc( n )
   next
return

in this case, is very dificult to use {...} and local variables,
because is out of user control know how local var need be defined.

Another idea is use a parameter in HB_AParams() that permit this
feature, like HB_AParams( .T. ) for example. Using this way we keep
compatibility with XH. Is possible?


Thanks and best regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From druzus at priv.onet.pl  Tue Jun 12 06:46:10 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jun 12 06:46:47 2007
Subject: [Harbour] Empty Source File ???
In-Reply-To: <466D5712.8000009@dbtopas.lt>
References: <165m63dkfs2ur0qt68epku2s74pnpfpk7o@4ax.com>
	<20070610203115.GA1569@localhost.localdomain>
	<466D5712.8000009@dbtopas.lt>
Message-ID: <20070612104610.GA21229@localhost.localdomain>

On Mon, 11 Jun 2007, Mindaugas Kavaliauskas wrote:
> >F.e. someone of us may implement
> >binary object (.obj/.o) file generation on some platforms - it's
> >even quite easy job for someone who knows the format.
> >BTW is anyone interested in finishing support for .obj file for W32?
> Hello,
> the problem is large number of .obj formats on W32: BCC, MSVC, MinGW, 
> etc. COFF/OMF is not enough. MGW and MSVC both are COFF, but still uses 
> different startup .CRT$XIY/.ctors. MSVC probably decorates function 
> names with _Function@0 or something. 64-bit platforms is yet another story.

Yes, I know. In fact we do not need any special order in executing
startup code so we can change the initialization code or even mix it.
Probably it will force adding special startup procedure like in GCC
builds but I do not think it's a big problem.
But the name and maybe calling convention can be a problem.

> Current genobj32 seems to be for BCC. I can do support for direct obj 
> compile if people find it useful. But I want the solution to be more 
> complete than BCC55 only.

Yes, though there is a chance that if we create one clean object generator
for some W32 compiler then people add support for other compilers. We can
start with BCC.
This feature is mostly for Windows users. People who used to work with
*nixes even expects that compilers are divided into separated executables.

> Does anybody know about differences among different compilers obj files? 
> Are MinGW/W32 and GCC/Linux using the same obj format?

No. In Linux ELF format is used. I can implement it.

> One more question is about droping C code "header" for .prg functions. 
> This subject was mentioned in mailling list some time ago, but I do not 
> recall the context.

Workaround for early binding in DLLs. The other method is using:
    DYNAMIC funcname
in .prg code which will be part of DLL and when 'funcname' is not
included.
The early binding in DLLs is a problem when people want to create
PCODE DLLs linked with static HVM.

> What about speed of .prg functions with vs without C 
>  "header"? What are the other features and drawback?

No speed difference but one problem - we cannot eliminate all machine
functions (C code) so it's a problem with dependences. Without our own
linker which can look in code and data symbols when HB_FUN_* is requested
we will have to generate dummy void functions to make foreign linkers
happy and force library modules binding.

> (I ask this, 
> because droping C header reduces .text segment, fixup count, etc, so it 
> easier to do direct obj support :) )

I know but without own linker seems that we cannot fully drop code
segment (see above) but maybe you will know some possible tricks for
this problem.

best regards,
Przemek
From druzus at priv.onet.pl  Tue Jun 12 07:04:36 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jun 12 07:05:11 2007
Subject: [Harbour] Is this a BUG or intentional ?
In-Reply-To: <t2ts63dslcshe97lsjg6ik503lihrpcpnt@4ax.com>
References: <d6rr6315pfvtcd3fqnkg77nr9prm6hkta4@4ax.com>
	<20070612014018.GA19852@localhost.localdomain>
	<t2ts63dslcshe97lsjg6ik503lihrpcpnt@4ax.com>
Message-ID: <20070612110436.GB21229@localhost.localdomain>

On Tue, 12 Jun 2007, Toninho@fwi wrote:
> Yes, Przemek it is so usefull.

OK,

> Imagine that the user have a code like
> this:
> procedure test(...)
>    local aPar := HB_AParams(), n
>    for n := 1 to Len( aPar )
>         aPar[ n ] := MyFunc( n )
>    next
> return
> in this case, is very dificult to use {...} and local variables,
> because is out of user control know how local var need be defined.

{...} works like HB_AParams() but it's faster. There is no difference
in result between HB_AParams() and {...}
Note that Harbour supports also named parameters in functions with
variable number of parameters and ... can be used as array value,
array index or function parameter. F.e.:

    func f( p1, p2, p3, ... )
        ? p1
        ? p2
        ? p3
	? "[", ..., "]"
    return { 1, 2, ..., 8, 9 }

In summary it gives much more flexible behavior then in xHarbour though
the assigning may be a problem.

> Another idea is use a parameter in HB_AParams() that permit this
> feature, like HB_AParams( .T. ) for example. Using this way we keep
> compatibility with XH. Is possible?

No, it cannot be implemented inside HB_AParams(). It's not HB_AParams()
problem at all. Harbour and Clipper does not resolve references stored
in array items in access and assign operation. In xHarbour it was changed
so when you are writing data to array item instead of overwriting the
previous value xHarbour checks if it's not reference and it it was then
it resolve the reference first and write data to destination item.
When you read from array item then xHarbour checks if is a reference and
if it is then it resolve it first and read from destination item.
It's not bad idea (though it should be implemented globally now xHarbour
in many places does not respect the above scheme) but it's not Clipper
compatible and this is the problem.
As you can see without core HVM code modification it cannot be done.

best regards,
Przemek
From toninhofwi at yahoo.com.br  Tue Jun 12 08:42:20 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Jun 12 08:42:51 2007
Subject: [Harbour] Is this a BUG or intentional ?
In-Reply-To: <20070612110436.GB21229@localhost.localdomain>
References: <d6rr6315pfvtcd3fqnkg77nr9prm6hkta4@4ax.com>
	<20070612014018.GA19852@localhost.localdomain>
	<t2ts63dslcshe97lsjg6ik503lihrpcpnt@4ax.com>
	<20070612110436.GB21229@localhost.localdomain>
Message-ID: <9j4t63d9eotmcq8r02o4bno2j99s5d0ijm@4ax.com>

>> Yes, Przemek it is so usefull.
>
>OK,
Thanks.

>{...} works like HB_AParams() but it's faster. There is no difference
>in result between HB_AParams() and {...}
Ok, but to get it by reference, I need a code like this:
procedure test(...)
 local aPar := {...}
 local c1 
 c1:=aPar[1] 
 c1:="1"
return

and is impossible in a code like:

procedure DialogParameterLoad( ... )
   local cStr := "", uTok
   local nPos := 1
   local nAt  := 1
   local aPar := HB_AParams()
   cStr = RTrim( mydbf->myfield )
   while !( cStr == "" )
      nAt  = At( "|", cStr )
      uTok = Left( cStr, nAt - 1 )
      cStr = SubStr( cStr, nAt + 1 )
      aPar[ nPos ] = uTok
      nPos++
   enddo
return

Because I don?t know the number of parameters to declare respective
local variables, or am I missing something?

If you have an idea to help me I thank you.

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From filip_stoklosa at op.pl  Tue Jun 12 09:44:04 2007
From: filip_stoklosa at op.pl (fs)
Date: Tue Jun 12 09:48:36 2007
Subject: [Harbour] HBZLIB is not working ?
In-Reply-To: <20070406095629.GA24184@localhost.localdomain>
References: <tka713d0ecmdui3io8g84hfirj4n3i2hvk@4ax.com>
	<20070406095629.GA24184@localhost.localdomain>
Message-ID: <200706121544.04550.filip_stoklosa@op.pl>

Dnia pi?tek, 6 kwietnia 2007 11:56, Przemyslaw Czerpak napisa?:
> On Wed, 04 Apr 2007, Toninho@fwi wrote:
> > Hi ppl.
> > I try to build HBZLIB from contrib but it is not working. This is
> > right ?
>
> This library needs very serious modifications and cleanups to make it
> well working - in both Harbour and xHarbour. I do not use it and I
> do not plan to make them so it will have to work for some other developer
> or maybe someone else will create alternative ZIP implementation.
>
> best regards,
> Przemek

Hi,
	Is it safe to remove HBZLIB:
		harbour/contrib/hbzlib and
		xharbour/source/rtl/hbcmprs.c 
	from my compilation?

	I think xharbour/source/hbcmprs.c should be removed from
xHarbour because zlib is already compiled in linux kernel by default

regards,
Filip
From druzus at priv.onet.pl  Tue Jun 12 13:09:34 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jun 12 13:10:11 2007
Subject: [Harbour] Is this a BUG or intentional ?
In-Reply-To: <9j4t63d9eotmcq8r02o4bno2j99s5d0ijm@4ax.com>
References: <d6rr6315pfvtcd3fqnkg77nr9prm6hkta4@4ax.com>
	<20070612014018.GA19852@localhost.localdomain>
	<t2ts63dslcshe97lsjg6ik503lihrpcpnt@4ax.com>
	<20070612110436.GB21229@localhost.localdomain>
	<9j4t63d9eotmcq8r02o4bno2j99s5d0ijm@4ax.com>
Message-ID: <20070612170934.GA12402@localhost.localdomain>

On Tue, 12 Jun 2007, Toninho@fwi wrote:
> >{...} works like HB_AParams() but it's faster. There is no difference
> >in result between HB_AParams() and {...}
> Ok, but to get it by reference, I need a code like this:
> procedure test(...)
>  local aPar := {...}
>  local c1 
>  c1:=aPar[1] 
>  c1:="1"
> return

The same will work if you use HB_AParams() instead of {...}

> and is impossible in a code like:
> procedure DialogParameterLoad( ... )
>    local cStr := "", uTok
>    local nPos := 1
>    local nAt  := 1
>    local aPar := HB_AParams()
>    cStr = RTrim( mydbf->myfield )
>    while !( cStr == "" )
>       nAt  = At( "|", cStr )
>       uTok = Left( cStr, nAt - 1 )
>       cStr = SubStr( cStr, nAt + 1 )
>       aPar[ nPos ] = uTok
>       nPos++
>    enddo
> return

But it's not caused by hb_aParams() or {...} - just to your knowledge
array returned by hb_aParams() is exactly the same in Harbour and xHarbour.
So let's forget about these function and {...} - both does not interact
with the problem we are talking about.
The difference between Harbour and xHarbour is in this line:
       aPar[ nPos ] = uTok
Harbour is Clipper compatible and will store uTok inside the nPos
element of aPar array. xHarbour does not work in such way and it
will check if aPar[ nPos ] is a references and if it is then it
will store uTok inside the item pinted by the reference inside
aPar[ nPos ]. We cannot change it without dropping compatibility
with Clipper in some important area - I was surprised but people
have programs which need exact Clipper behavior and after the
modification in xHarbour they reported it as a bug. Personally
I do not like the way how Clipper works and such modification
done globally with some others may resolve some bad situations
with references which we inherited from Clipper but I have to
accept that Clipper compatibility in this place is important so
I cannot change it.

> Because I don?t know the number of parameters to declare respective
> local variables, or am I missing something?

1. FOR EACH

    if ! cStr == ""
       FOR EACH uTok in {...}
          nAt  = At( "|", cStr )

          /* I guess this was missing in code above */
          if nAt == 0; nAt := len( cStr ) + 1; endif

          uTok := Left( cStr, nAt - 1 )
          if ( cStr = SubStr( cStr, nAt + 1 ) ) == ""
            exit
          endif
       NEXT
   endif

2. Use assign function:
       function setArrRef( ref, var )
       return ref:=var

   and replace in your code:
       aPar[ nPos ] = uTok
   with:
       setArrRef( aPar[ nPos ], uTok )

   Please note that this is Clipper compatible behavior and this trick
   with setArrRef() works in Clipper and Harbour but does not work in
   xHarbour. As workaround for limitted number of parameters in Clipper
   and missing functions witch variable parameters people create code
   with arrays which now does not work in xHarbour. F.e. this is your
   code modified to work in pure Clipper:

      procedure DialogParameterLoad( aPar )
         local cStr := "", uTok
         local nPos := 1
         local nAt  := 1
         cStr = RTrim( mydbf->myfield )
         while !( cStr == "" )
            nAt  = At( "|", cStr )
            uTok = Left( cStr, nAt - 1 )
            cStr = SubStr( cStr, nAt + 1 )
            setArrRef( aPar[ nPos ], uTok )
            nPos++
         enddo
      return

   It has exactly the same functionality but you have to pass to
   DialogParameterLoad() array parameters so instead of calling:
      DialogParameterLoad( @p1, @p2, @p3, @p4 )
   you simply make:
      DialogParameterLoad( { @p1, @p2, @p3, @p4 } )

   Here is self contain example which nicely works in Clipper and Harbour
   but does not work in xHarbour:

      proc main()
         local a, b, c
         p({@a,@b,@c})
         ? a, b, c
         return
      proc p(a)
         setArrRef( a[ 1 ], "A" )
         setArrRef( a[ 2 ], "B" )
         setArrRef( a[ 3 ], "C" )
         return
      function setArrRef( ref, var )
         return ref:=var

   It also illustrates why it's important to keep Clipper compatibility.
   Just simply it's a peace of real code which can be used in Clipper as
   workaround for Clipper limitations not something strange and unexisting
   in real life. With the above I have variable number of parameters in
   Clipper :-) but if I have such code then I cannot use xHarbour to
   compile it :-(

3. Wait for my next commit (in few hours) when I'll add support for
   second parameter in hb_pValue() nad replace in your code:
       aPar[ nPos ] = uTok
   with:
       hb_pValue( nPos, uTok )


> If you have an idea to help me I thank you.

I hope that you will find one of the above 3 propositions as enough
for you and now you understand why I do not want to replicate xHarbour
behavior. In practice it does not give any new functionality and
causes that existing Clipper code cannot be ported to xHarbour without
modifications.

best regards,
Przemek
From druzus at priv.onet.pl  Tue Jun 12 13:16:52 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jun 12 13:17:27 2007
Subject: [Harbour] HBZLIB is not working ?
In-Reply-To: <200706121544.04550.filip_stoklosa@op.pl>
References: <tka713d0ecmdui3io8g84hfirj4n3i2hvk@4ax.com>
	<20070406095629.GA24184@localhost.localdomain>
	<200706121544.04550.filip_stoklosa@op.pl>
Message-ID: <20070612171652.GB12402@localhost.localdomain>

On Tue, 12 Jun 2007, fs wrote:
> Hi,
> 	Is it safe to remove HBZLIB:
> 		harbour/contrib/hbzlib and
> 		xharbour/source/rtl/hbcmprs.c 
> 	from my compilation?
> 	I think xharbour/source/hbcmprs.c should be removed from
> xHarbour because zlib is already compiled in linux kernel by default

You can replace these old version of ZLIB by the one existing in system
and both will work (probably because I haven't check if ZLIB API is still
clean in this code) but it's not the biggest problem with this library.
The rest needs some serious cleanup. Personally I'd suggest to create
wrapper to minizip from ZLIB/contrib and create new library from scratch.
But sorry, I do not have time for it know - maybe someone else.

best regards,
Przemek
From dbtopas at dbtopas.lt  Tue Jun 12 14:12:19 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Jun 12 14:08:40 2007
Subject: [Harbour] Is this a BUG or intentional ?
In-Reply-To: <9j4t63d9eotmcq8r02o4bno2j99s5d0ijm@4ax.com>
References: <d6rr6315pfvtcd3fqnkg77nr9prm6hkta4@4ax.com>	<20070612014018.GA19852@localhost.localdomain>	<t2ts63dslcshe97lsjg6ik503lihrpcpnt@4ax.com>	<20070612110436.GB21229@localhost.localdomain>
	<9j4t63d9eotmcq8r02o4bno2j99s5d0ijm@4ax.com>
Message-ID: <466EE203.4020400@dbtopas.lt>

> Ok, but to get it by reference, I need a code like this:
> procedure test(...)
>  local aPar := {...}
>  local c1 
>  c1:=aPar[1] 
>  c1:="1"
> return
> 
> and is impossible in a code like:
> 
> procedure DialogParameterLoad( ... )
>    local cStr := "", uTok
>    local nPos := 1
>    local nAt  := 1
>    local aPar := HB_AParams()
>    cStr = RTrim( mydbf->myfield )
>    while !( cStr == "" )
>       nAt  = At( "|", cStr )
>       uTok = Left( cStr, nAt - 1 )
>       cStr = SubStr( cStr, nAt + 1 )
>       aPar[ nPos ] = uTok
>       nPos++
>    enddo
> return
> 
> Because I don?t know the number of parameters to declare respective
> local variables, or am I missing something?
> 
> If you have an idea to help me I thank you.


Hello,

not sure I understand your problem very well, but.... New lines are 
marked with endline comment.

procedure DialogParameterLoad( ... )
    local cStr := "", uTok
    local nPos := 1
    local nAt  := 1
    local aPar := HB_AParams()
    LOCAL xReference                        //
    cStr = RTrim( mydbf->myfield )
    while !( cStr == "" )
       nAt  = At( "|", cStr )
       uTok = Left( cStr, nAt - 1 )
       cStr = SubStr( cStr, nAt + 1 )
       xReference := aPar[ nPos ]           //
       xReference := uTok                   //
       nPos++
    enddo
return


Best regards,
Mindaugas
From druzus at priv.onet.pl  Tue Jun 12 15:44:55 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jun 12 15:45:30 2007
Subject: [Harbour] Is this a BUG or intentional ?
In-Reply-To: <466EE203.4020400@dbtopas.lt>
References: <d6rr6315pfvtcd3fqnkg77nr9prm6hkta4@4ax.com>
	<20070612014018.GA19852@localhost.localdomain>
	<t2ts63dslcshe97lsjg6ik503lihrpcpnt@4ax.com>
	<20070612110436.GB21229@localhost.localdomain>
	<9j4t63d9eotmcq8r02o4bno2j99s5d0ijm@4ax.com>
	<466EE203.4020400@dbtopas.lt>
Message-ID: <20070612194455.GA13447@localhost.localdomain>

On Tue, 12 Jun 2007, Mindaugas Kavaliauskas wrote:
> Hello,
> not sure I understand your problem very well, but.... New lines are 
> marked with endline comment.
> procedure DialogParameterLoad( ... )
>    local cStr := "", uTok
>    local nPos := 1
>    local nAt  := 1
>    local aPar := HB_AParams()
>    LOCAL xReference                        //
>    cStr = RTrim( mydbf->myfield )
>    while !( cStr == "" )
>       nAt  = At( "|", cStr )
>       uTok = Left( cStr, nAt - 1 )
>       cStr = SubStr( cStr, nAt + 1 )
>       xReference := aPar[ nPos ]           //
>       xReference := uTok                   //
>       nPos++
>    enddo
> return

It will not work. Please try code below to see what will happen:
        proc main()
           local a, b, c
           p(@a,@b,@c)
           ? a, b, c
           return
        proc p(...)
           local a:={...}, x
           x:=a[1];x:="A"
           x:=a[2];x:="B"
           x:=a[3];x:="C"
           return

In your example:
   xReference := aPar[ nPos ]
will create references chain. If you compile my example by Clipper
and Harbour then you will find yet another thing: Clipper does not
have function like hb_itemUnRef() but only sth what works like
hb_itemUnRefOnce(). It's the reason why Clipper cannot respect
references to detached local variables when they are out of scope,
f.e. in code like this:

        proc main()
           local cb, v:=0
           cb:=f(@v)
           ? v
           eval(cb)
           ? v
           return
        func f(v)
           return {||++v}

Respecting references cannot be implemented if VM cannot use multilevel
hb_itemUnRef() and has to operate only with hb_itemUnRefOnce() so it
was not an intentional design decision but only result of limitation in
Clipper VM implementation. Here Harbour is not Clipper compatible but
it's intentional and it's documented - Harbour always respect references
and there is no situations like in Clipper when references stop to
work in "hidden" way. xHarbour tries to emulate Clipper behavior
using Harbour interface and I really do not know why. Why emulate
limitations having a lot of "extensions" which are breaking Clipper
compatibility in real code.

best regards,
Przemek
From info at fsgiudice.com  Tue Jun 12 16:20:35 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Jun 12 16:21:17 2007
Subject: [Harbour] how handling C structure in harbour ?
References: <d6rr6315pfvtcd3fqnkg77nr9prm6hkta4@4ax.com><20070612014018.GA19852@localhost.localdomain><t2ts63dslcshe97lsjg6ik503lihrpcpnt@4ax.com><20070612110436.GB21229@localhost.localdomain><9j4t63d9eotmcq8r02o4bno2j99s5d0ijm@4ax.com><466EE203.4020400@dbtopas.lt>
	<20070612194455.GA13447@localhost.localdomain>
Message-ID: <024001c7ad2f$24003510$b400a8c0@ASUSFSG>

Hi All,

there is a way to handle C structure in harbour ?
I need to add some Windows APIs and I need to exchange C structures data 
between C and PRG level as xHarbour does.

Best Regards

Francesco
From druzus at priv.onet.pl  Tue Jun 12 17:41:44 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jun 12 17:42:20 2007
Subject: [Harbour] ChangeLog 2007-06-12 23:40 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070612214144.GA19230@localhost.localdomain>

2007-06-12 23:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/rdd_ads/ads1.c
    * cleaned BCC warning 

  * harbour/include/hbapi.h
  * harbour/source/vm/arrays.c
    + added set of hb_arraySet*() functions - I hope they will help 3-rd
      party developers to eliminate using C stack level HB_ITEM and
      reduce usage of potentially danger function like hb_arrayGetItemPtr()

  * harbour/include/hbapiitm.h
  * harbour/source/vm/itemapi.c
    + added hb_itemReturnRelease()

  * harbour/include/hbcompat.ch
    + added hb_pvalue() <-> pvalue() translations

  * harbour/source/vm/pvalue.c
    + added support for 2-nd parameter for assugb operation, f.e. now
         hb_pvalue( 3, "abc" )
      sets "abc" to 3-rd function parameter

  * harbour/source/compiler/gencc.c
  * harbour/source/compiler/hbopt.c
    ! fixed two buggy optimizations

modification synced in both branches.

best regards,
Przemek
From dbtopas at dbtopas.lt  Tue Jun 12 17:56:17 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Jun 12 17:52:11 2007
Subject: [Harbour] Is this a BUG or intentional ?
In-Reply-To: <20070612194455.GA13447@localhost.localdomain>
References: <d6rr6315pfvtcd3fqnkg77nr9prm6hkta4@4ax.com>	<20070612014018.GA19852@localhost.localdomain>	<t2ts63dslcshe97lsjg6ik503lihrpcpnt@4ax.com>	<20070612110436.GB21229@localhost.localdomain>	<9j4t63d9eotmcq8r02o4bno2j99s5d0ijm@4ax.com>	<466EE203.4020400@dbtopas.lt>
	<20070612194455.GA13447@localhost.localdomain>
Message-ID: <466F1681.1090605@dbtopas.lt>

>>not sure I understand your problem very well, but.... New lines are 
>>marked with endline comment.
>>procedure DialogParameterLoad( ... )
>>   local cStr := "", uTok
>>   local nPos := 1
>>   local nAt  := 1
>>   local aPar := HB_AParams()
>>   LOCAL xReference                        //
>>   cStr = RTrim( mydbf->myfield )
>>   while !( cStr == "" )
>>      nAt  = At( "|", cStr )
>>      uTok = Left( cStr, nAt - 1 )
>>      cStr = SubStr( cStr, nAt + 1 )
>>      xReference := aPar[ nPos ]           //
>>      xReference := uTok                   //
>>      nPos++
>>   enddo
>>return
> 
> It will not work. Please try code below to see what will happen:



Hi,

of cause, I've not tested my sample, but I've wrote it looking at your 
code (1):
>     procedure main()
>        local c1, c2, c3
>        test(@c1,@c2,@c3)
>        ? c1
>        ? c2
>        ? c3
>     return
>     procedure test(...)
>        local aPar := {...} // a little bit faster then HB_AParams()
>        local c1, c2, c3
>        c1:=aPar[1]
>        c2:=aPar[2]
>        c3:=aPar[3]
>        c1:="1"
>        c2:="2"
>        c3:="3"
>     return

And I'm suprised that the code above (1) works in different way than the 
code below (2).

>         proc main()
>            local a, b, c
>            p(@a,@b,@c)
>            ? a, b, c
>            return
>         proc p(...)
>            local a:={...}, x
>            x:=a[1];x:="A"
>            x:=a[2];x:="B"
>            x:=a[3];x:="C"
>            return

The only difference between (1) and (2) is that (1) uses different local 
variables. The first idea I get looking at code (1) is that this code 
could be rewritten:
   c1 := aPar[1];  c1 := "1"
   c2 := aPar[2];  c2 := "2"
   c3 := aPar[3];  c3 := "3"
and then optimised to:
   c1 := aPar[1];  c1 := "1"
   c1 := aPar[2];  c1 := "2"
   c1 := aPar[3];  c1 := "3"
but that is wrong and I am surprised.

Now I have a feeling like variable is "infected" with a reference. After 
a reference is assigned to the local variable, I can not get rid of it.
Assigment to NIL or any other value does not help.
Many .prg functions do not expect parameters to be references and 
perhaps nobody writes security systems in Clipper/Harbour, but I guess 
some function can be "hijacked" using array of references :)

Thanks for the knowledge.


Best regards,
Mindaugas
From druzus at priv.onet.pl  Tue Jun 12 18:22:09 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jun 12 18:22:46 2007
Subject: [Harbour] Is this a BUG or intentional ?
In-Reply-To: <466F1681.1090605@dbtopas.lt>
References: <d6rr6315pfvtcd3fqnkg77nr9prm6hkta4@4ax.com>
	<20070612014018.GA19852@localhost.localdomain>
	<t2ts63dslcshe97lsjg6ik503lihrpcpnt@4ax.com>
	<20070612110436.GB21229@localhost.localdomain>
	<9j4t63d9eotmcq8r02o4bno2j99s5d0ijm@4ax.com>
	<466EE203.4020400@dbtopas.lt>
	<20070612194455.GA13447@localhost.localdomain>
	<466F1681.1090605@dbtopas.lt>
Message-ID: <20070612222209.GA7270@localhost.localdomain>

On Wed, 13 Jun 2007, Mindaugas Kavaliauskas wrote:
> Now I have a feeling like variable is "infected" with a reference. After 
> a reference is assigned to the local variable, I can not get rid of it.
> Assigment to NIL or any other value does not help.

Exactly. It's one of Clipper behavior we inherited and I do not like.
When STATIC, LOCAL or MEMVAR variable begins to hold references then
in practice there is no way to clear it. I very like the term "infected"
- it nicely shows what happens. These is sth what I will want to discuss
in the future. Probably after version 1.0 it will be time to clean the
references code and define new behavior which will be safe even if
programmer will intentionally want to exploit it, f.e. try this code in
xHarbour.
    proc main()
       local a
       a:=(@a)
       ? a
    return

> Many .prg functions do not expect parameters to be references and 
> perhaps nobody writes security systems in Clipper/Harbour, but I guess 
> some function can be "hijacked" using array of references :)

To be more precise in Clipper, Harbour and xHarbour it's possible to
exploit the VM stack and create references to unused stack items, f.e.:

    func f()
        local a, b, c
    return { @a, @b, @c }

you can imagine what will happen if you will make x := f()
To fix it we will have to add detaching local variables just like
for codeblocks. I haven't made it so far because I'll add automatic
detaching on function exit so we will not need and additional code
to make it safe.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Jun 12 18:35:44 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jun 12 18:35:51 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <BD19A111-6C61-4CC0-85CB-5722289E6458@syenar.hu>
References: <4667B49D.6B6C@synel.co.il>
	<BD19A111-6C61-4CC0-85CB-5722289E6458@syenar.hu>
Message-ID: <2682DF18-EB3B-4572-AD5E-B0B2D9C7417D@syenar.hu>

This info of mine was not accurate, sorry.

Actually, in SVN, each _commit_ is stored as a separate
file in the database.

Brgds,
Viktor

On 2007.06.07., at 9:41, Szak?ts Viktor wrote:

>> As I understand, the main difference is the internal storage.
>> While CVS save each file and its versions in one v file which is
>> a text file, SVN save everything inside a database.
>> While make easier to maintain, in case of a database crash - you are
>> in a problem. You need to backup often, something we don't do at  
>> all at
>> the moment (and if we had a backup of our CVS tree, we could had
>> just replace the broken v file).
>
> This is not so now (I think it was true for few years old versions).
>
> Now SVN is using one repo file per real file. The repo files are
> not pure text files, but mostly readable (I've just checked).
> (notice that SVN supports proper diffing for binary files too)
>
> Practice shows that CVS is vulnerable too, and despite
> using pure text repo files, we're still in trouble with our ChangeLog.
>
> No file-format is a replacement for proper backup. (I was under
> the impression that sf.net does do backups)
>
> Brgds,
> Viktor
>
>
>

From druzus at priv.onet.pl  Tue Jun 12 19:08:49 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jun 12 19:09:24 2007
Subject: [Harbour] BETA3
Message-ID: <20070612230849.GA7691@localhost.localdomain>

Hi All,

If no one will find something what should be changed yet then
I'll set BETA3 tag in about 8 hours.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Jun 12 19:55:09 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jun 12 20:02:09 2007
Subject: [Harbour] Re: Harbour SVN test repository Trac demo
In-Reply-To: <1DC5F2E6-B4AE-4B36-B7C5-6246F8A1F40A@syenar.hu>
References: <1DC5F2E6-B4AE-4B36-B7C5-6246F8A1F40A@syenar.hu>
Message-ID: <79DBB39C-120A-4346-9908-51B38DD6ED57@syenar.hu>

Hi folks,

Find the newly converted SVN test repository, now with
ChangeLog, and using the latest converter (1.5.1).

http://syenar.dyndns.org:11410/trac/harbour/timeline
username: harbour
pw: harbour

Pls test it, if you see any problems, inconsistencies,
bad codepages, mixed up commits, missing tags, etc.

I'd propose a CVS freeze after the BETA release to be
able to move to SVN.

Brgds,
Viktor

On 2007.06.09., at 10:58, Szak?ts Viktor wrote:

> Hi all,
>
> Trac view of the Harbour SVN test repository:
> http://syenar.dyndns.org:11410/trac/harbour/timeline
>
> username: harbour
> pw: harbour
>
> (Disclaimer: This is my personal desktop computer
> on a currently struggling ADSL line, so the site is either
> working on not and probably not fast.)
>
> Brgds,
> Viktor
>

From druzus at priv.onet.pl  Tue Jun 12 20:18:53 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jun 12 22:22:23 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <2682DF18-EB3B-4572-AD5E-B0B2D9C7417D@syenar.hu>
References: <4667B49D.6B6C@synel.co.il>
	<BD19A111-6C61-4CC0-85CB-5722289E6458@syenar.hu>
	<2682DF18-EB3B-4572-AD5E-B0B2D9C7417D@syenar.hu>
Message-ID: <20070613001853.GA8454@localhost.localdomain>

On Wed, 13 Jun 2007, Szak?ts Viktor wrote:
> This info of mine was not accurate, sorry.
> Actually, in SVN, each _commit_ is stored as a separate
> file in the database.

Does it make any real difference for us?

best regards,
Przemek
From dmacias at mail.udg.mx  Wed Jun 13 00:48:42 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Jun 13 00:48:46 2007
Subject: [Harbour] Re: BETA 3
In-Reply-To: <142368.22221.qm@web30704.mail.mud.yahoo.com>
References: <142368.22221.qm@web30704.mail.mud.yahoo.com>
Message-ID: <466F772A.3000402@mail.udg.mx>

 >Hi All,
 >If no one will find something what should be changed yet then
 >I'll set BETA3 tag in about 8 hours.


"Mysql wrapper problems" reported by Mitja in May 6, 2007

Mitja, it is resolved ?

David Macias


From druzus at priv.onet.pl  Wed Jun 13 01:07:38 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 13 01:08:14 2007
Subject: [Harbour] Re: BETA 3
In-Reply-To: <466F772A.3000402@mail.udg.mx>
References: <142368.22221.qm@web30704.mail.mud.yahoo.com>
	<466F772A.3000402@mail.udg.mx>
Message-ID: <20070613050738.GA23703@localhost.localdomain>

On Tue, 12 Jun 2007, David Arturo Macias Corona wrote:
> >Hi All,
> >If no one will find something what should be changed yet then
> >I'll set BETA3 tag in about 8 hours.
> 
> "Mysql wrapper problems" reported by Mitja in May 6, 2007
> Mitja, it is resolved ?

Probably yes after:

,--------------------------------------------------------------------------
| 2007-05-06 16:15 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
|   * harbour/source/vm/classes.c
|     * changed __cls_IncData() to return index to newly allocated instance
|       item and __cls_DecData() to return number of local (not inherited)
|       instance items
`--------------------------------------------------------------------------

though so far no one has tried to clean mysql wrapper code to eliminate
online class updating. Accessing fields with message interface should be
done by class error handler not by adding new messages to the class.
But people were living with this code for years so I think we can keep
it for some time yet as is. Maybe before BETA4 someone will update it.
It will be also good occasion to add some classy compatible error messages.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Jun 13 02:30:40 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jun 13 02:30:40 2007
Subject: [Harbour] CVS to SVN?
In-Reply-To: <20070613001853.GA8454@localhost.localdomain>
References: <4667B49D.6B6C@synel.co.il>
	<BD19A111-6C61-4CC0-85CB-5722289E6458@syenar.hu>
	<2682DF18-EB3B-4572-AD5E-B0B2D9C7417D@syenar.hu>
	<20070613001853.GA8454@localhost.localdomain>
Message-ID: <FCF6584B-2EB0-438E-AE0B-F7BF34346854@syenar.hu>

Not at all.

Brgds,
Viktor

On 2007.06.13., at 2:18, Przemyslaw Czerpak wrote:

> On Wed, 13 Jun 2007, Szak?ts Viktor wrote:
>> This info of mine was not accurate, sorry.
>> Actually, in SVN, each _commit_ is stored as a separate
>> file in the database.
>
> Does it make any real difference for us?
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From filip_stoklosa at op.pl  Wed Jun 13 03:12:44 2007
From: filip_stoklosa at op.pl (fs)
Date: Wed Jun 13 03:17:17 2007
Subject: [Harbour] HBZLIB is not working ?
In-Reply-To: <20070612171652.GB12402@localhost.localdomain>
References: <tka713d0ecmdui3io8g84hfirj4n3i2hvk@4ax.com>
	<200706121544.04550.filip_stoklosa@op.pl>
	<20070612171652.GB12402@localhost.localdomain>
Message-ID: <200706130912.44699.filip_stoklosa@op.pl>

Dnia wtorek, 12 czerwca 2007 19:16, Przemyslaw Czerpak napisa?:
> On Tue, 12 Jun 2007, fs wrote:
> > Hi,
> > 	Is it safe to remove HBZLIB:
> > 		harbour/contrib/hbzlib and
> > 		xharbour/source/rtl/hbcmprs.c
> > 	from my compilation?
> > 	I think xharbour/source/hbcmprs.c should be removed from
> > xHarbour because zlib is already compiled in linux kernel by default
>
> You can replace these old version of ZLIB by the one existing in system
> and both will work (probably because I haven't check if ZLIB API is still
> clean in this code) but it's not the biggest problem with this library.
> The rest needs some serious cleanup. Personally I'd suggest to create
> wrapper to minizip from ZLIB/contrib and create new library from scratch.
> But sorry, I do not have time for it know - maybe someone else.
>
Thanks,
I found the problem when trying to link some gtk 2.10 libs,
it use newer wersion of ZLIB
regards
Filip
From harbour.01 at syenar.hu  Wed Jun 13 04:15:01 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jun 13 04:15:04 2007
Subject: [Harbour] SVN migration continued
Message-ID: <CA3C911B-211E-4AF0-A29F-D16C511649D5@syenar.hu>

Hi,

As per the linked docs (https://sourceforge.net/docs/E09),
the new SVN repository will have to be uploaded to sf,
then an admin should do the rest of the steps:
-Import from Subversion dump file (svnadmin dump or cvs2svn):-

1) Backup your repository.
2) Create a SVN dump file (using svnadmin dump) if you haven't  
already done so. Filter anything out of the dump file that isn't to  
be imported.
3) Compress the dump file, if possible, to save space. We support  
zip, bzip2 and gzip compression.
4) Name the file using only alphanumeric characters and a period  
(Example: svndump.gz -- good; projectname-svndump.gz -- bad).
5) Upload the dump file into the root of your project group directory  
on the shell server (i.e. scp filename.gz  
USERNAME@shell.sourceforge.net:/home/groups/P/PR/PROJECTNAME/ 
filename.gz).
-- below as admin --
6) Login to the SourceForge.net website.
7) Go to the project summary page (https://www.sf.net/projects/ 
PROJECTNAME).
8) Click on the 'Admin' link.
9) Click on the 'Subversion' admin page link.
10) Click on the 'migrate' link on the 'Migration Instructions'  
section of the page.
11) Key in the filename of the archive into the 'Source path' field,  
noting that it must comply with the filename restrictions previously  
described.
12) Check the 'Replace' check box in the same column, if you wish to  
replace the existing content with the new content to be added.
13) Enter the value you want passed to the --parent-dir argument of  
the "svnadmin load" command into the 'Destination' field. For most  
users, this would be left blank. Note that the destionation directory  
must be created but empty for this to work.
14) Click on the 'Submit' button.
15) The migration will be finished within 24 hours. It could be  
finished in as soon as an hour or two, depending on the size of your  
CVS repository and the number of projects queued for migration in  
front of yours. Returning to the page will display whether it  
completed, failed or is still in queue.

I'll make a backup of the old repository, make it available as a .zip  
file (25MB),
then convert to SVN and make available the dump as a .bz2 file (124MB).

The SVN client tools for all platforms along with the docs can be  
found here:
http://subversion.tigris.org/

Brgds,
Viktor

From wangshuming01 at gmail.com  Wed Jun 13 04:38:09 2007
From: wangshuming01 at gmail.com (wang shuming)
Date: Wed Jun 13 04:38:15 2007
Subject: [Harbour] Re: BETA 3
Message-ID: <c26b21640706130138m607bfaf3ib22480b52253f91d@mail.gmail.com>

Our modified tmysql wrap based on xharbour stable commercial use for years
http://www.xtech.com.cn/down/tmysql.prg
http://www.xtech.com.cn/down/mysql.c

Shuming Wang
MSN: wang_shuming@hotmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070613/c8b7710d/attachment.html
From M.Horodyski at pzuzycie.com.pl  Wed Jun 13 04:43:26 2007
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Wed Jun 13 04:44:01 2007
Subject: [Harbour] RE: Harbour Digest, Vol 8, Issue 41
Message-ID: <503AD832DBBF60469E9F807668A2F6A2022B446D@PINK.zycie.pzu>



>-----Original Message-----
>From: harbour-bounces@harbour-project.org 
>[mailto:harbour-bounces@harbour-project.org] On Behalf Of 
>harbour-request@harbour-project.org
>Sent: Wednesday, June 13, 2007 12:26 AM
>To: harbour@harbour-project.org
>Subject: Harbour Digest, Vol 8, Issue 41
>
>
>Send Harbour mailing list submissions to
>	harbour@harbour-project.org
>
>To subscribe or unsubscribe via the World Wide Web, visit
>	http://lists.harbour-project.org/mailman/listinfo/harbour
>or, via email, send a message with subject or body 'help' to
>	harbour-request@harbour-project.org
>
>You can reach the person managing the list at
>	harbour-owner@harbour-project.org
>
>When replying, please edit your Subject line so it is more 
>specific than "Re: Contents of Harbour digest..."
>
>
>Today's Topics:
>
>   1. Re: Is this a BUG or intentional ? (Przemyslaw Czerpak)
>   2. Re: HBZLIB is not working ? (Przemyslaw Czerpak)
>   3. Re: Is this a BUG or intentional ? (Mindaugas Kavaliauskas)
>   4. Re: Is this a BUG or intentional ? (Przemyslaw Czerpak)
>   5. how handling C structure in harbour ? (Francesco Saverio Giudice)
>   6. ChangeLog 2007-06-12 23:40 UTC+0200 Przemyslaw Czerpak
>      (druzus/at/priv.onet.pl) (Przemyslaw Czerpak)
>   7. Re: Is this a BUG or intentional ? (Mindaugas Kavaliauskas)
>   8. Re: Is this a BUG or intentional ? (Przemyslaw Czerpak)
>
>
>----------------------------------------------------------------------
>
>Message: 1
>Date: Tue, 12 Jun 2007 19:09:34 +0200
>From: Przemyslaw Czerpak <druzus@priv.onet.pl>
>Subject: Re: [Harbour] Is this a BUG or intentional ?
>To: "Harbour Project Main Developer List."
>	<harbour@harbour-project.org>
>Message-ID: <20070612170934.GA12402@localhost.localdomain>
>Content-Type: text/plain; charset=iso-8859-2
>
[...]
>       aPar[ nPos ] = uTok
>Harbour is Clipper compatible and will store uTok inside the 
>nPos element of aPar array. xHarbour does not work in such way 
>and it will check if aPar[ nPos ] is a references and if it is 
>then it will store uTok inside the item pinted by the 
>reference inside aPar[ nPos ]. We cannot change it without 
>dropping compatibility with Clipper in some important area - I 
>was surprised but people have programs which need exact 
>Clipper behavior and after the modification in xHarbour they 
>reported it as a bug. Personally I do not like the way how 
>Clipper works and such modification done globally with some 
>others may resolve some bad situations with references which 
>we inherited from Clipper but I have to accept that Clipper 
>compatibility in this place is important so I cannot change it.

I use this solution (syntax), and it is very kind and wanted.
Solution in xHarbour is bad, and I can't advise (in modificatin sources
from xHarbour) with this bug even with Przemeks counsel (advice).

Regards,
Marek Horodyski
From wangshuming01 at gmail.com  Wed Jun 13 04:45:42 2007
From: wangshuming01 at gmail.com (wang shuming)
Date: Wed Jun 13 04:45:46 2007
Subject: [Harbour] re:Beta 3
Message-ID: <c26b21640706130145k2a923aa5i701dcadb761a3857@mail.gmail.com>

http://www.xtech.com.cn/down/mysq.h

Shuming Wang
MSN: wang_shuming@hotmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070613/ac6abf3c/attachment.html
From dmacias at mail.udg.mx  Wed Jun 13 05:14:27 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Jun 13 05:14:31 2007
Subject: [Harbour] Re: BETA 3
In-Reply-To: <142368.22221.qm@web30704.mail.mud.yahoo.com>
References: <142368.22221.qm@web30704.mail.mud.yahoo.com>
Message-ID: <466FB573.60709@mail.udg.mx>

>Hi All,
>If no one will find something what should be changed yet then
>I'll set BETA3 tag in about 8 hours.


Current Harbour devel branch build under OS/2 (gcc 3.3.5) fails:

-----------------------------------
[E:\hbpreb3\harbour]make -r           1>make_gnu.log
make[3]: /ppgen.exe: Command not found
make[2]: *** [descend] Error 1
E:/usr/i386-pc-os2-emx/bin/ld.exe: No such file or directory for pp
make[3]: *** [harbour.exe] Error 1
make[2]: *** [descend] Error 2
... and rest
-----------------------------------


make_gnu.log show an strange /ppgen.exe ...
-----------------------------------
make[3]: Entering directory `/hbpreb3/harbour/source/pp/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_LONG_LONG_OFF -c ../../ppgen.c -oppgen.o
gcc -W -Wall -DHB_OS_OS2 -O2 -o ppgen.exe ppgen.o 
-L../../../../source/common/os2/gcc    -lcommon -lsocket
/ppgen.exe ../../../../include/hbstdgen.ch -opptable.c -q
make[3]: Leaving directory `/hbpreb3/harbour/source/pp/os2/gcc'
make[2]: Leaving directory `/hbpreb3/harbour/source/pp'
-----------------------------------


which seem to be caused by changes in harbour\source\pp\Makefile in May 
28, including:
    HB_PPGEN_PATH ?= .

-----------------------------------

#
# $Id: Makefile,v 1.9 2007/05/28 07:52:10 druzus Exp $
#

ROOT = ../../

C_SOURCES=\
	pptable.c \
	ppcore.c  \
	pplib.c   \
	pplib2.c  \
	pplib3.c  \

LIBNAME=pp

LIBS=\
	common \

HB_PPGEN_PATH ?= .

include $(TOP)$(ROOT)config/lib.cf

pptable.c : ppgen$(EXE_EXT)
	$(HB_PPGEN_PATH)/ppgen$(EXE_EXT) $(TOP)$(ROOT)include/hbstdgen.ch 
-opptable.c -q
-----------------------------------


David Macias



From e.m.giordano at emagsoftware.it  Wed Jun 13 06:06:53 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Jun 13 06:07:27 2007
Subject: [Harbour] /gc3 again
Message-ID: <00a501c7ada2$91451780$0100a8c0@emag>

I'm getting

Warning W8066 test.c 3790: Unreachable code in function HB_FUN_DBLOCK

in the following code generated by Harbour:

lab00002: ;
 hb_xvmPushFuncSymbol( symbols + 211 );
 if( hb_xvmFunction( 0 ) ) break;
 if( hb_xvmPopLogical( &fValue ) ) break;
 if( !fValue )
  goto lab00001;
 hb_xvmPushNil();
 hb_xvmRetValue();
 /* *** END PROC *** */
 break;
 goto lab00001; // line 3790

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From druzus at priv.onet.pl  Wed Jun 13 06:27:00 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 13 06:27:36 2007
Subject: [Harbour] /gc3 again
In-Reply-To: <00a501c7ada2$91451780$0100a8c0@emag>
References: <00a501c7ada2$91451780$0100a8c0@emag>
Message-ID: <20070613102700.GA24562@localhost.localdomain>

On Wed, 13 Jun 2007, Enrico Maria Giordano wrote:
> I'm getting
> Warning W8066 test.c 3790: Unreachable code in function HB_FUN_DBLOCK

I know about some warnings like that I haven't cleaned so far because
they have no effect on final binaries - in 99% it's such situation.
If you can show me the body of DBLOCK() function then I can be sure.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jun 13 06:30:17 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 13 06:30:55 2007
Subject: [Harbour] Re: BETA 3
In-Reply-To: <466FB573.60709@mail.udg.mx>
References: <142368.22221.qm@web30704.mail.mud.yahoo.com>
	<466FB573.60709@mail.udg.mx>
Message-ID: <20070613103017.GB24562@localhost.localdomain>

On Wed, 13 Jun 2007, David Arturo Macias Corona wrote:
> Current Harbour devel branch build under OS/2 (gcc 3.3.5) fails:
> -----------------------------------
> [E:\hbpreb3\harbour]make -r           1>make_gnu.log
> make[3]: /ppgen.exe: Command not found
> make[2]: *** [descend] Error 1
> E:/usr/i386-pc-os2-emx/bin/ld.exe: No such file or directory for pp
> make[3]: *** [harbour.exe] Error 1
> make[2]: *** [descend] Error 2
> ... and rest
> -----------------------------------
> make_gnu.log show an strange /ppgen.exe ...
> -----------------------------------
> make[3]: Entering directory `/hbpreb3/harbour/source/pp/os2/gcc'
> gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
> -DHB_LONG_LONG_OFF -c ../../ppgen.c -oppgen.o
> gcc -W -Wall -DHB_OS_OS2 -O2 -o ppgen.exe ppgen.o 
> -L../../../../source/common/os2/gcc    -lcommon -lsocket
> /ppgen.exe ../../../../include/hbstdgen.ch -opptable.c -q
> make[3]: Leaving directory `/hbpreb3/harbour/source/pp/os2/gcc'
> make[2]: Leaving directory `/hbpreb3/harbour/source/pp'
> -----------------------------------
> which seem to be caused by changes in harbour\source\pp\Makefile in May 
> 28, including:
>    HB_PPGEN_PATH ?= .

Yes it is. The question is why
     HB_PPGEN_PATH ?= .
does not work in your GNU make - it should so it seems to be a bug in
the gmake you are using. Please change this line to:

    ifeq ($(HB_PPGEN_PATH),)
       HB_PPGEN_PATH=.
    endif

and tell me if it helps.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jun 13 06:33:59 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 13 06:34:36 2007
Subject: [Harbour] Re: BETA 3
In-Reply-To: <20070613103017.GB24562@localhost.localdomain>
References: <142368.22221.qm@web30704.mail.mud.yahoo.com>
	<466FB573.60709@mail.udg.mx>
	<20070613103017.GB24562@localhost.localdomain>
Message-ID: <20070613103359.GC24562@localhost.localdomain>

On Wed, 13 Jun 2007, Przemyslaw Czerpak wrote:
> > which seem to be caused by changes in harbour\source\pp\Makefile in May 
> > 28, including:
> >    HB_PPGEN_PATH ?= .
> Yes it is. The question is why
>      HB_PPGEN_PATH ?= .
> does not work in your GNU make - it should so it seems to be a bug in
> the gmake you are using. Please change this line to:
> 
>     ifeq ($(HB_PPGEN_PATH),)
>        HB_PPGEN_PATH=.
>     endif
> and tell me if it helps.

But first if you can please cheack also:
    HB_PPGEN_PATH?=.
without spaces

best regards,
Przemek
From java.net.ardo at gmail.com  Wed Jun 13 07:16:49 2007
From: java.net.ardo at gmail.com (ardo septama)
Date: Wed Jun 13 07:16:52 2007
Subject: [Harbour] Font type
Message-ID: <f306932a0706130416mf79df52xa1756f9a4be4d94d@mail.gmail.com>

Is there a way to display different kind of font at the console?
At least could it be bigger than the standard font.

Thank you,
Ardo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070613/1fe720b1/attachment.html
From dmacias at mail.udg.mx  Wed Jun 13 07:37:46 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Jun 13 07:37:49 2007
Subject: [Harbour] Re: BETA 3
In-Reply-To: <142368.22221.qm@web30704.mail.mud.yahoo.com>
References: <142368.22221.qm@web30704.mail.mud.yahoo.com>
Message-ID: <466FD70A.1000905@mail.udg.mx>

On Wed, 13 Jun 2007, Przemyslaw Czerpak wrote:
 >> > which seem to be caused by changes in harbour\source\pp\Makefile 
in May
 >> > 28, including:
 >> >    HB_PPGEN_PATH ?= .
 >> Yes it is. The question is why
 >>      HB_PPGEN_PATH ?= .
 >> does not work in your GNU make - it should so it seems to be a bug in
 >> the gmake you are using. Please change this line to:
 >>
 >>     ifeq ($(HB_PPGEN_PATH),)
 >>        HB_PPGEN_PATH=.
 >>     endif
 >> and tell me if it helps.

 >But first if you can please cheack also:
 >    HB_PPGEN_PATH?=.
 >without spaces

No, it does not work, same failure

It work if I change:
       HB_PPGEN_PATH ?= .
or
       HB_PPGEN_PATH?=.

with
       HB_PPGEN_PATH=.

and Harbour is created without errors/warnings

Should I apply ?
      ifeq ($(HB_PPGEN_PATH),)
         HB_PPGEN_PATH=.
      endif

Perhaps problem rely in make.exe version, I am using:
----------------------------------
GNU Make version 3.76.1, by Richard Stallman and Roland McGrath.
Copyright (C) 1988, 89, 90, 91, 92, 93, 94, 95, 96, 97
----------------------------------

David Macias


From druzus at priv.onet.pl  Wed Jun 13 07:45:47 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 13 07:46:23 2007
Subject: [Harbour] Re: BETA 3
In-Reply-To: <466FD70A.1000905@mail.udg.mx>
References: <142368.22221.qm@web30704.mail.mud.yahoo.com>
	<466FD70A.1000905@mail.udg.mx>
Message-ID: <20070613114547.GA13278@localhost.localdomain>

On Wed, 13 Jun 2007, David Arturo Macias Corona wrote:
> >But first if you can please cheack also:
> >    HB_PPGEN_PATH?=.
> No, it does not work, same failure
> with
>       HB_PPGEN_PATH=.
> and Harbour is created without errors/warnings

fine.

> Should I apply ?
>      ifeq ($(HB_PPGEN_PATH),)
>         HB_PPGEN_PATH=.
>      endif

Yes, please. I think it will work and I'll commit such modification
if you confirm it works.

best regards,
Przemek
From toninhofwi at yahoo.com.br  Wed Jun 13 08:02:02 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Jun 13 08:02:46 2007
Subject: [Harbour] ChangeLog 2007-06-12 23:40 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070612214144.GA19230@localhost.localdomain>
References: <20070612214144.GA19230@localhost.localdomain>
Message-ID: <frmv631rf49rqqqg41fevu0j07mi5k2q70@4ax.com>

>  * harbour/source/vm/pvalue.c
>    + added support for 2-nd parameter for assugb operation, f.e. now
>         hb_pvalue( 3, "abc" )
>      sets "abc" to 3-rd function parameter

Thanks Przemek.

Now, my applications can run in Harbour and XHarbour with little
changes guarded by #ifdef __XHARBOUR__


Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From e.m.giordano at emagsoftware.it  Wed Jun 13 08:04:35 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Jun 13 08:16:24 2007
Subject: [Harbour] /gc3 again
References: <00a501c7ada2$91451780$0100a8c0@emag>
	<20070613102700.GA24562@localhost.localdomain>
Message-ID: <016701c7adb4$940fcb10$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoledi 13 giugno 2007 12.27
Oggetto: Re: [Harbour] /gc3 again


> I know about some warnings like that I haven't cleaned so far because
> they have no effect on final binaries - in 99% it's such situation.
> If you can show me the body of DBLOCK() function then I can be sure.

This is a self contained sample. Please note that I get the warning only if it 
is compiled using /l switch:

FUNCTION MAIN()

    WHILE .T.
        IF .T.
            IF TEST()
                RETURN NIL
            ENDIF
        ENDIF
    ENDDO

    RETURN NIL

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Wed Jun 13 08:28:02 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Jun 13 08:28:36 2007
Subject: [Harbour] /gc3 and OBJ page size
Message-ID: <016b01c7adb6$491cdd30$0100a8c0@emag>

Using /gc3 switch I get a couple of OBJ that exceede the default Borland TLib 
page size of 16 bytes.

Is it of any importance?

For BCC55 docs:

TLIB /P Option

See also

Setting the Page Size to Create a Large Library

The library page size determines the maximum combined size of all object 
modules in the library, which cannot exceed 65,536 pages. The default (and 
minimum) page size of 16 bytes allows a library of about 1 MB in size. To 
create a larger library, use the /P option to increase the page size. The page 
size must be a power of 2, and it cannot be smaller than 16 or larger than 
32,768.

All modules in the library must start on a page boundary. For example, in a 
library with a page size of 32 (the lowest possible page size higher than the 
default 16), an average of 16 bytes will be lost per object module in padding. 
If you attempt to create a library that is too large for the given page size, 
TLIB will issue an error message and suggest that you use /P with the next 
available higher page size.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From lkrausem at shaw.ca  Wed Jun 13 08:28:59 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Wed Jun 13 08:30:40 2007
Subject: [Harbour] Error BASE/44
Message-ID: <466FE30B.90704@shaw.ca>

Hi:

What flags should be use to build Harbour to avoid this kind of
errors (happens all over the place when I try to set datas in any
class; same code works just fine with Clipper and xHarbour):

Error BASE/44
Assigned value is wrong class: TDATABASE:BEOF

the only ones I use (harbour and xharbour) are

SET CFLAGS=-DHB_INCLUDE_WINEXCHANDLER -D__EXPORT__

Thanks!

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From dmacias at mail.udg.mx  Wed Jun 13 08:33:45 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Jun 13 08:33:48 2007
Subject: [Harbour] Re: BETA 3
In-Reply-To: <142368.22221.qm@web30704.mail.mud.yahoo.com>
References: <142368.22221.qm@web30704.mail.mud.yahoo.com>
Message-ID: <466FE429.2090903@mail.udg.mx>

On Wed, 13 Jun 2007, Przemyslaw Czerpak wrote:
 >> Should I apply ?
 >>      ifeq ($(HB_PPGEN_PATH),)
 >>         HB_PPGEN_PATH=.
 >>      endif

 >Yes, please. I think it will work and I'll commit such modification
 >if you confirm it works.

Done
Harbour pre-beta3 is created without errors/warnings under OS/2


Just to know, what mean "?="  ?
   HB_PPGEN_PATH ?= .



About:

 >> "Mysql wrapper problems" reported by Mitja in May 6, 2007
 >> Mitja, it is resolved ?

 >Probably yes after:

 >,--------------------------------------------------------------------------
 >| 2007-05-06 16:15 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
 >|   * harbour/source/vm/classes.c
 >|     * changed __cls_IncData() to return index to newly allocated 
 >instance
 >|       item and __cls_DecData() to return number of local (not 
 >inherited)
 >|       instance items
 >`--------------------------------------------------------------------------

 >though so far no one has tried to clean mysql wrapper code to eliminate
 >online class updating. Accessing fields with message interface should be
 >done by class error handler not by adding new messages to the class.
 >But people were living with this code for years so I think we can keep
 >it for some time yet as is. Maybe before BETA4 someone will update it.
 >It will be also good occasion to add some classy compatible error 
 >messages.

I hope Mitja can test it after your change, as him know how/when/where 
error happen

David Macias

From niki at synel.co.il  Wed Jun 13 08:33:32 2007
From: niki at synel.co.il (Chen Kedem)
Date: Wed Jun 13 08:33:54 2007
Subject: [Harbour] Font type
Message-ID: <466FE41C.12AC@synel.co.il>

Ardo,

> Is there a way to display different kind of font at the console?
> At least could it be bigger than the standard font.

It is all dependent in the shell and the terminal driver used.


--yy1.prg--
proc main()
wait
setmode( 25, 40 )
wait
cls
? "This should be in LARGE fonts"
wait
setmode( 25, 80 )
return
-----------

bld_b32 yy1 /w/a/n
yy1

The above program works on a Windows 95 full screen dos box when
comipled with Clipper and Harbour. In the Windows NT full screnn dos
box, the Harbour version does not work, but the Clipper one does
(Microsoft does not want you to use dos box or full screen anymore).


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From niki at synel.co.il  Wed Jun 13 08:41:11 2007
From: niki at synel.co.il (Chen Kedem)
Date: Wed Jun 13 08:41:36 2007
Subject: [Harbour] /gc3 and OBJ page size
Message-ID: <466FE5E7.228F@synel.co.il>

Enrico,

> Using /gc3 switch I get a couple of OBJ that exceede the default
> Borland TLib page size of 16 bytes.
> Is it of any importance?

This happen especially when you work in debug mode. This is normal.
Just change the value of ARFLAGS = /P32 in makefile.bc to /P64


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From antonioharbour at gmail.com  Wed Jun 13 08:48:11 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Jun 13 08:48:34 2007
Subject: [Harbour] Error BASE/44
In-Reply-To: <466FE30B.90704@shaw.ca>
Message-ID: <466fe79c.2876420a.1854.1786@mx.google.com>

Luis, 

> Assigned value is wrong class: TDATABASE:BEOF

Remove "AS ..." from the Class DATAs definition.

Regards,

Antonio

From druzus at priv.onet.pl  Wed Jun 13 09:18:42 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 13 09:19:18 2007
Subject: [Harbour] Re: BETA 3
In-Reply-To: <466FE429.2090903@mail.udg.mx>
References: <142368.22221.qm@web30704.mail.mud.yahoo.com>
	<466FE429.2090903@mail.udg.mx>
Message-ID: <20070613131841.GB13278@localhost.localdomain>

On Wed, 13 Jun 2007, David Arturo Macias Corona wrote:
> Done
> Harbour pre-beta3 is created without errors/warnings under OS/2

Fine.

> Just to know, what mean "?="  ?
>   HB_PPGEN_PATH ?= .

Set HB_PPGEN_PATH to . when is empty. It should work in exactly the same
way as:
    ifeq ($(HB_PPGEN_PATH),)
       HB_PPGEN_PATH=.
    endif

best regards,
Przemek
From toninhofwi at yahoo.com.br  Wed Jun 13 09:29:53 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Jun 13 09:30:22 2007
Subject: [Harbour] Error BASE/44
In-Reply-To: <466FE30B.90704@shaw.ca>
References: <466FE30B.90704@shaw.ca>
Message-ID: <95sv63ti68ivcm8964smqptcbfgf6gpnso@4ax.com>

>What flags should be use to build Harbour to avoid this kind of
>errors (happens all over the place when I try to set datas in any
>class; same code works just fine with Clipper and xHarbour):
>
>Error BASE/44
>Assigned value is wrong class: TDATABASE:BEOF

Luis, XHarbour accept code like this:
---cut---
#include "hbclass.ch"
procedure main()
   local o := test():New()
   ? o:nWidth
   o:nWidth = Date()
   ? o:nWidth
   ?? " numeric with date() is wrong..."
return
CLASS Test
   DATA nWidth AS NUMERIC INIT 1
ENDCLASS
---cut---

But harbour not. I rewrite some part of my classes to use correct data
type, and if some data need to have any data type, don?t use AS xxx.

I?d reported this issue to XH dev list today.

Regards,

Toninho.


	

	
		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From druzus at priv.onet.pl  Wed Jun 13 09:31:04 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 13 09:31:39 2007
Subject: [Harbour] /gc3 again
In-Reply-To: <016701c7adb4$940fcb10$0100a8c0@emag>
References: <00a501c7ada2$91451780$0100a8c0@emag>
	<20070613102700.GA24562@localhost.localdomain>
	<016701c7adb4$940fcb10$0100a8c0@emag>
Message-ID: <20070613133104.GC13278@localhost.localdomain>

On Wed, 13 Jun 2007, Enrico Maria Giordano wrote:
> This is a self contained sample. Please note that I get the warning only if 
> it is compiled using /l switch:
> FUNCTION MAIN()
>    WHILE .T.
>        IF .T.
>            IF TEST()
>                RETURN NIL
>            ENDIF
>        ENDIF
>    ENDDO
>    RETURN NIL

You can safely ignore it. It's an example when adding second call
to dead code eliminator may remove some unused after jump joining
PCODEs. But it such seldom situation that I do not know if it's
worth of some speed overhead. Maybe we should add some new -k? switch
(f.e. -kO) to set maximum optimization level?

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Wed Jun 13 09:34:16 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Jun 13 09:34:54 2007
Subject: [Harbour] /gc3 and OBJ page size
References: <466FE5E7.228F@synel.co.il>
Message-ID: <01cb01c7adbf$89a94880$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Chen Kedem" <niki@synel.co.il>
A: <harbour@harbour-project.org>
Data invio: mercoled? 13 giugno 2007 14.41
Oggetto: [Harbour] /gc3 and OBJ page size


> This happen especially when you work in debug mode. This is normal.
> Just change the value of ARFLAGS = /P32 in makefile.bc to /P64

Thank you. /P32 seems enough. I already put it in my configuration file.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Wed Jun 13 09:35:13 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Jun 13 09:35:48 2007
Subject: [Harbour] /gc3 again
References: <00a501c7ada2$91451780$0100a8c0@emag><20070613102700.GA24562@localhost.localdomain><016701c7adb4$940fcb10$0100a8c0@emag>
	<20070613133104.GC13278@localhost.localdomain>
Message-ID: <01d001c7adbf$abc435b0$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoledi 13 giugno 2007 15.31
Oggetto: Re: [Harbour] /gc3 again


> You can safely ignore it.

Ok, thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From lkrausem at shaw.ca  Wed Jun 13 09:37:27 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Wed Jun 13 09:37:38 2007
Subject: [Harbour] Error BASE/44
In-Reply-To: <466fe79c.2876420a.1854.1786@mx.google.com>
References: <466fe79c.2876420a.1854.1786@mx.google.com>
Message-ID: <466FF317.70207@shaw.ca>

Antonio:

This is horrible... I've been using AS all over the place for years...
it works with Clipper+FW and xHarbour+FWH and
worked with Harbour+FWH in the past.... :-(

There has to be a switch or something....

Regards,

Antonio Linares wrote:

>Luis, 
>
>  
>
>>Assigned value is wrong class: TDATABASE:BEOF
>>    
>>
>
>Remove "AS ..." from the Class DATAs definition.
>
>Regards,
>
>Antonio
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>  
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070613/600c8b26/attachment.html
From lkrausem at shaw.ca  Wed Jun 13 09:38:51 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Wed Jun 13 09:39:01 2007
Subject: [Harbour] Error BASE/44
In-Reply-To: <95sv63ti68ivcm8964smqptcbfgf6gpnso@4ax.com>
References: <466FE30B.90704@shaw.ca>
	<95sv63ti68ivcm8964smqptcbfgf6gpnso@4ax.com>
Message-ID: <466FF36B.4070102@shaw.ca>

Toninho:

I'm still using xHarbour from the end of January 2007... I don't know if 
it's different
from the current CVS but I've been using AS for DATAs for ages.... having to
go through a myriad of classes just to remove AS just doesn't sound 
right :-(

Regards,

Toninho@fwi wrote:

>>What flags should be use to build Harbour to avoid this kind of
>>errors (happens all over the place when I try to set datas in any
>>class; same code works just fine with Clipper and xHarbour):
>>
>>Error BASE/44
>>Assigned value is wrong class: TDATABASE:BEOF
>>    
>>
>
>Luis, XHarbour accept code like this:
>---cut---
>#include "hbclass.ch"
>procedure main()
>   local o := test():New()
>   ? o:nWidth
>   o:nWidth = Date()
>   ? o:nWidth
>   ?? " numeric with date() is wrong..."
>return
>CLASS Test
>   DATA nWidth AS NUMERIC INIT 1
>ENDCLASS
>---cut---
>
>But harbour not. I rewrite some part of my classes to use correct data
>type, and if some data need to have any data type, don?t use AS xxx.
>
>I?d reported this issue to XH dev list today.
>
>Regards,
>
>Toninho.
>
>
>
>
>
>
>_______________________________________________________
>Yahoo! Mail - Sempre a melhor op??o para voc?!
>Experimente j? e veja as novidades.
>http://br.yahoo.com/mailbeta/tudonovo/
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>  
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070613/dfeb7b8c/attachment.html
From druzus at priv.onet.pl  Wed Jun 13 09:40:02 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 13 09:40:36 2007
Subject: [Harbour] Error BASE/44
In-Reply-To: <466FE30B.90704@shaw.ca>
References: <466FE30B.90704@shaw.ca>
Message-ID: <20070613134002.GD13278@localhost.localdomain>

On Wed, 13 Jun 2007, Luis Krause Mantilla wrote:
> Hi:
> What flags should be use to build Harbour to avoid this kind of
> errors (happens all over the place when I try to set datas in any
> class; same code works just fine with Clipper and xHarbour):
> Error BASE/44
> Assigned value is wrong class: TDATABASE:BEOF

Harbour respects type definition just like Class(y). xHarbour doesn't
and using "as ..." in instance variable declaration is ignored by xHarbour
so later you can assign wrong types without any errors.

> the only ones I use (harbour and xharbour) are
> SET CFLAGS=-DHB_INCLUDE_WINEXCHANDLER -D__EXPORT__

There is no compilation flag to disable type checking in Harbour core
code but you can disable it inside hbclass.ch if you make
    #define HB_CLS_NO_DECLARATIONS
before
    #include "hbclass.ch"

though I rather suggest to fix your code or remove wrong "as ..."
declarations.

best regards,
Przemek
From java.net.ardo at gmail.com  Wed Jun 13 10:02:09 2007
From: java.net.ardo at gmail.com (ardo septama)
Date: Wed Jun 13 10:02:12 2007
Subject: [Harbour] Font type
In-Reply-To: <466FE41C.12AC@synel.co.il>
References: <466FE41C.12AC@synel.co.il>
Message-ID: <f306932a0706130702n287d9d49x782420e21e8d5b69@mail.gmail.com>

Dear Chen,

So it will set the whole display bigger?
What if I just want to set only a particular words bigger and looks
different from the other. (such as title of the program).
Btw what if we try it at pure dos mode?
I already try at windowed DOS at winXP and it doesn't work.

Thanks in Advance,
Ardo

It is all dependent in the shell and the terminal driver used.
>
>
> --yy1.prg--
> proc main()
> wait
> setmode( 25, 40 )
> wait
> cls
> ? "This should be in LARGE fonts"
> wait
> setmode( 25, 80 )
> return
> -----------
>
> bld_b32 yy1 /w/a/n
> yy1
>
> The above program works on a Windows 95 full screen dos box when
> comipled with Clipper and Harbour. In the Windows NT full screnn dos
> box, the Harbour version does not work, but the Clipper one does
> (Microsoft does not want you to use dos box or full screen anymore).
>
>
> Chen.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070613/bc1cb33b/attachment.html
From druzus at priv.onet.pl  Wed Jun 13 10:42:48 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 13 10:43:23 2007
Subject: [Harbour] Error BASE/44
In-Reply-To: <466FF317.70207@shaw.ca>
References: <466fe79c.2876420a.1854.1786@mx.google.com>
	<466FF317.70207@shaw.ca>
Message-ID: <20070613144248.GA28447@localhost.localdomain>

On Wed, 13 Jun 2007, Luis Krause Mantilla wrote:
> Antonio:
> This is horrible... I've been using AS all over the place for years...
> it works with Clipper+FW and xHarbour+FWH and

You are wrong. It has never worked with Clipper+FWObjects and
in xHarbour. Just simply "as ..." was ignored by both compilers
and you were able to create wrong code and assign wrong types,
f.e. character values to numeric variables. Maybe "This is horrible..."
I also do not like when nonworking/unfinished features are added allows
to create buggy code and later when they are finished/fixed we have
backward compatibility problem with wrong code.

Now you have compiler when type checking works as expected and well
reporting RT errors so you have a chance to clean your code.

> worked with Harbour+FWH in the past.... :-(

Yes, in the past Harbour also did not have type checking and "as ..."
in class definition was ignored. Helpfully it has been implemented.

> There has to be a switch or something....

You can use HB_CLS_NO_DECLARATIONS but the problem is inside _YOUR_ code
not in Harbour so I suggest to fix it.

best regards,
Przemek
From lkrausem at shaw.ca  Wed Jun 13 10:44:00 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Wed Jun 13 10:44:16 2007
Subject: [Harbour] Error BASE/44
In-Reply-To: <20070613134002.GD13278@localhost.localdomain>
References: <466FE30B.90704@shaw.ca>
	<20070613134002.GD13278@localhost.localdomain>
Message-ID: <467002B0.3070100@shaw.ca>

Przemek:

Are you saying AS is not supported unless Class(y) compatiblity is used or
that AS is enforcing the correct data type to be assigned to a DATA?

In my case I'm pretty sure I'm assigning the correct data type (and I don't
use or used Class(y) syntax).

F.e. this is the delcaration of the data I'm getting the RTE:

   DATA   bBoF, bEoF, bNetError  AS CODEBLOCK

if I need to assing a NIL in case I don't want a codeblock there,
is this supported by Harbour's class engine:

   DATA   bBoF, bEoF, bNetError  AS CODEBLOCK, NIL

Thanks,

Przemyslaw Czerpak wrote:

>On Wed, 13 Jun 2007, Luis Krause Mantilla wrote:
>  
>
>>Hi:
>>What flags should be use to build Harbour to avoid this kind of
>>errors (happens all over the place when I try to set datas in any
>>class; same code works just fine with Clipper and xHarbour):
>>Error BASE/44
>>Assigned value is wrong class: TDATABASE:BEOF
>>    
>>
>
>Harbour respects type definition just like Class(y). xHarbour doesn't
>and using "as ..." in instance variable declaration is ignored by xHarbour
>so later you can assign wrong types without any errors.
>
>  
>
>>the only ones I use (harbour and xharbour) are
>>SET CFLAGS=-DHB_INCLUDE_WINEXCHANDLER -D__EXPORT__
>>    
>>
>
>There is no compilation flag to disable type checking in Harbour core
>code but you can disable it inside hbclass.ch if you make
>    #define HB_CLS_NO_DECLARATIONS
>before
>    #include "hbclass.ch"
>
>though I rather suggest to fix your code or remove wrong "as ..."
>declarations.
>
>best regards,
>Przemek
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>  
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070613/96afcc09/attachment.html
From sscc at mweb.co.za  Wed Jun 13 11:22:32 2007
From: sscc at mweb.co.za (Alex Strickland)
Date: Wed Jun 13 11:23:09 2007
Subject: [Harbour] BETA3
In-Reply-To: <20070612230849.GA7691@localhost.localdomain>
References: <20070612230849.GA7691@localhost.localdomain>
Message-ID: <46700BB8.90105@mweb.co.za>

Przemyslaw Czerpak wrote:

> If no one will find something what should be changed yet then
> I'll set BETA3 tag in about 8 hours.

I wanted to see if you had set the tag. Tortoise CVS reports

cvs [rlog aborted]: unrecognized operation '\x20' in 
/cvsroot/harbour-project/harbour/ChangeLog,v


FYI CVS from HEAD compiles fine with MSVC6.

Regards
Alex

From druzus at priv.onet.pl  Wed Jun 13 11:50:46 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 13 11:51:23 2007
Subject: [Harbour] Error BASE/44
In-Reply-To: <467002B0.3070100@shaw.ca>
References: <466FE30B.90704@shaw.ca>
	<20070613134002.GD13278@localhost.localdomain>
	<467002B0.3070100@shaw.ca>
Message-ID: <20070613155046.GA576@localhost.localdomain>

On Wed, 13 Jun 2007, Luis Krause Mantilla wrote:
> Przemek:
> Are you saying AS is not supported unless Class(y) compatiblity is used or
> that AS is enforcing the correct data type to be assigned to a DATA?

AS ... in CLASS member declaration is not supported in xHarbour at all.
It's always ignored. At least was, I haven't checked what has been changed
in xHarbour classy code in last weeks.

> In my case I'm pretty sure I'm assigning the correct data type (and I don't
> use or used Class(y) syntax).
> F.e. this is the delcaration of the data I'm getting the RTE:
>   DATA   bBoF, bEoF, bNetError  AS CODEBLOCK
> if I need to assing a NIL in case I don't want a codeblock there,

NIL is not a CODEBLOCK type. Such operation is forbidden.
It's intentional. In the past we agreed that if we want to have in
the future compile time optimization based on typed variables then
we have to strictly respect declarations.

> is this supported by Harbour's class engine:
> DATA   bBoF, bEoF, bNetError  AS CODEBLOCK, NIL

There is no support for such mixed types. It seems to be interesting
proposition but as long as I will not check how to exactly implement
it I cannot say if it will not cause some bad side effects somewhere
(PP, grammar rules, VM)

best regards,
Przemek
From toninhofwi at yahoo.com.br  Wed Jun 13 12:04:01 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Jun 13 12:04:31 2007
Subject: [Harbour] Error BASE/44
In-Reply-To: <466FF36B.4070102@shaw.ca>
References: <466FE30B.90704@shaw.ca>
	<95sv63ti68ivcm8964smqptcbfgf6gpnso@4ax.com>
	<466FF36B.4070102@shaw.ca>
Message-ID: <d15073dht6bdcturoda115oi48r39puesg@4ax.com>

>Toninho:
>
>I'm still using xHarbour from the end of January 2007... I don't know if 
>it's different
>from the current CVS but I've been using AS for DATAs for ages.... having to
>go through a myriad of classes just to remove AS just doesn't sound 
>right :-(

Luis, you need remove ONLY if you use a different data types by the
same data, for example:

DATA dDate AS DATE

If you, in some part of your program need do oObj:dDate := nil, you
need define it without AS DATE. I?m a XHabour user too, and I?m
changed some part of my application to work in both compiler due to
this. But I find some hidden bugs in my code when I change it. IMO if
we have a feature that don?t work, why have it?

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From druzus at priv.onet.pl  Wed Jun 13 12:19:31 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 13 12:20:06 2007
Subject: [Harbour] BETA3
In-Reply-To: <46700BB8.90105@mweb.co.za>
References: <20070612230849.GA7691@localhost.localdomain>
	<46700BB8.90105@mweb.co.za>
Message-ID: <20070613161931.GB576@localhost.localdomain>

On Wed, 13 Jun 2007, Alex Strickland wrote:
> >If no one will find something what should be changed yet then
> >I'll set BETA3 tag in about 8 hours.
> I wanted to see if you had set the tag.

No, I haven't tagged yet. I have to add some minor cleanup for problems
reported by users today morning. I'll commit them and I'll set BETA3 tag.

> Tortoise CVS reports
> cvs [rlog aborted]: unrecognized operation '\x20' in 
> /cvsroot/harbour-project/harbour/ChangeLog,v

It's a known problem. This file is corrupted after last SF crash.
I hope it will not block setting new tag.

> FYI CVS from HEAD compiles fine with MSVC6.

Thanks for information.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jun 13 12:22:38 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 13 12:23:13 2007
Subject: [Harbour] Error BASE/44
In-Reply-To: <20070613155046.GA576@localhost.localdomain>
References: <466FE30B.90704@shaw.ca>
	<20070613134002.GD13278@localhost.localdomain>
	<467002B0.3070100@shaw.ca>
	<20070613155046.GA576@localhost.localdomain>
Message-ID: <20070613162238.GC576@localhost.localdomain>

On Wed, 13 Jun 2007, Przemyslaw Czerpak wrote:
> AS ... in CLASS member declaration is not supported in xHarbour at all.
> It's always ignored. At least was, I haven't checked what has been changed
> in xHarbour classy code in last weeks.

Below is a test code. It gives the same RT error in Harbour and
Class(y) 2.4 and does not report any errors with current xHarbour
CVS version so I think xHarbour still does not support type checking.

best regards,
Przemek


    #ifdef __HARBOUR__
       #include "hbclass.ch"
    #else
       #include "class(y).ch"
    #endif

    proc main()
    local o
    o:=myClass():new()
    o:bEOF:={||.f.}
    ? "CodeBlock assigned"
    o:bEOF:=NIL
    ? "NIL assigned"
    o:bEOF:=date()
    ? "DATE assigned"
    return

    create class myclass
    exported:
       VAR bEOF    TYPE block
    end class
From lkrausem at shaw.ca  Wed Jun 13 12:44:30 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Wed Jun 13 12:45:46 2007
Subject: [Harbour] BETA3
In-Reply-To: <46700BB8.90105@mweb.co.za>
References: <20070612230849.GA7691@localhost.localdomain>
	<46700BB8.90105@mweb.co.za>
Message-ID: <46701EEE.4090900@shaw.ca>

Alex:

Same problem I had a week ago updating from the main branch.

Only solution was to delete changelog and do the check out again
(Tortoise will tell you changelog was lost, but that about it).

Alex Strickland wrote:

> Przemyslaw Czerpak wrote:
>
>> If no one will find something what should be changed yet then
>> I'll set BETA3 tag in about 8 hours.
>
>
> I wanted to see if you had set the tag. Tortoise CVS reports
>
> cvs [rlog aborted]: unrecognized operation '\x20' in 
> /cvsroot/harbour-project/harbour/ChangeLog,v
>
>
> FYI CVS from HEAD compiles fine with MSVC6.
>
> Regards
> Alex
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From lkrausem at shaw.ca  Wed Jun 13 12:48:51 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Wed Jun 13 12:49:30 2007
Subject: [Harbour] Error BASE/44
In-Reply-To: <20070613155046.GA576@localhost.localdomain>
References: <466FE30B.90704@shaw.ca>
	<20070613134002.GD13278@localhost.localdomain>
	<467002B0.3070100@shaw.ca>
	<20070613155046.GA576@localhost.localdomain>
Message-ID: <46701FF3.4020301@shaw.ca>

Przemek:

It seems I'll just have to remove the AS... for those datas I need to have
either as a codeblock (or other data type) and nil if unused.

I do recall that Clipper + FW (i.e. 16 bits) did allow

DATA .... AS <sometype>, nil

That way you could either assign NIL or the expected datatype; otherwise
your would get a RTE (as expected) if the wrong datatype was used.

I certaintly didn't now xHarbour didn't enforce AS... and I agree with
you its good that Harbour now does... it just came to bite me in the
you know where!

Thanks.

Przemyslaw Czerpak wrote:

>On Wed, 13 Jun 2007, Luis Krause Mantilla wrote:
>  
>
>>Przemek:
>>Are you saying AS is not supported unless Class(y) compatiblity is used or
>>that AS is enforcing the correct data type to be assigned to a DATA?
>>    
>>
>
>AS ... in CLASS member declaration is not supported in xHarbour at all.
>It's always ignored. At least was, I haven't checked what has been changed
>in xHarbour classy code in last weeks.
>
>  
>
>>In my case I'm pretty sure I'm assigning the correct data type (and I don't
>>use or used Class(y) syntax).
>>F.e. this is the delcaration of the data I'm getting the RTE:
>>  DATA   bBoF, bEoF, bNetError  AS CODEBLOCK
>>if I need to assing a NIL in case I don't want a codeblock there,
>>    
>>
>
>NIL is not a CODEBLOCK type. Such operation is forbidden.
>It's intentional. In the past we agreed that if we want to have in
>the future compile time optimization based on typed variables then
>we have to strictly respect declarations.
>
>  
>
>>is this supported by Harbour's class engine:
>>DATA   bBoF, bEoF, bNetError  AS CODEBLOCK, NIL
>>    
>>
>
>There is no support for such mixed types. It seems to be interesting
>proposition but as long as I will not check how to exactly implement
>it I cannot say if it will not cause some bad side effects somewhere
>(PP, grammar rules, VM)
>
>best regards,
>Przemek
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>  
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070613/1ac96732/attachment.html
From lkrausem at shaw.ca  Wed Jun 13 12:50:40 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Wed Jun 13 12:51:15 2007
Subject: [Harbour] Error BASE/44
In-Reply-To: <d15073dht6bdcturoda115oi48r39puesg@4ax.com>
References: <466FE30B.90704@shaw.ca>
	<95sv63ti68ivcm8964smqptcbfgf6gpnso@4ax.com> <466FF36B.4070102@shaw.ca>
	<d15073dht6bdcturoda115oi48r39puesg@4ax.com>
Message-ID: <46702060.5040503@shaw.ca>

Toninho:

Indeed good to know it only afects those DATAs that use AS in which
you attempt to assign a different data type from the expected... that is
definetly the intention so I'm glad Harbour now enforced it.

That said, it's good to know I don't need to remove all the AS... keywords
all over the place, just the ones that might have to be nil instead of the
expected data type.

Regards,

Toninho@fwi wrote:

>>Toninho:
>>
>>I'm still using xHarbour from the end of January 2007... I don't know if 
>>it's different
>>    
>>
>>from the current CVS but I've been using AS for DATAs for ages.... having to
>  
>
>>go through a myriad of classes just to remove AS just doesn't sound 
>>right :-(
>>    
>>
>
>Luis, you need remove ONLY if you use a different data types by the
>same data, for example:
>
>DATA dDate AS DATE
>
>If you, in some part of your program need do oObj:dDate := nil, you
>need define it without AS DATE. I?m a XHabour user too, and I?m
>changed some part of my application to work in both compiler due to
>this. But I find some hidden bugs in my code when I change it. IMO if
>we have a feature that don?t work, why have it?
>
>Regards,
>
>Toninho.
>
>
>
>_______________________________________________________
>Yahoo! Mail - Sempre a melhor op??o para voc?!
>Experimente j? e veja as novidades.
>http://br.yahoo.com/mailbeta/tudonovo/
>
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>  
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070613/d8df83aa/attachment.html
From harbour.01 at syenar.hu  Wed Jun 13 13:37:04 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jun 13 13:37:05 2007
Subject: [Harbour] Error BASE/44
In-Reply-To: <20070613162238.GC576@localhost.localdomain>
References: <466FE30B.90704@shaw.ca>
	<20070613134002.GD13278@localhost.localdomain>
	<467002B0.3070100@shaw.ca>
	<20070613155046.GA576@localhost.localdomain>
	<20070613162238.GC576@localhost.localdomain>
Message-ID: <951B38E6-9E65-4C82-B4F1-8B853889F299@syenar.hu>

>     #ifdef __HARBOUR__
>        #include "hbclass.ch"
>     #else
>        #include "class(y).ch"
>     #endif

if we're at it, shouldn't we add a dummy "class(y).ch" file
(just containing #include "hbclass.ch") to the repository
(after BETA release), to not need this trick?

Brgds,
Viktor



From lkrausem at shaw.ca  Wed Jun 13 13:44:50 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Wed Jun 13 13:45:22 2007
Subject: [Harbour] Error BASE/44
In-Reply-To: <20070613162238.GC576@localhost.localdomain>
References: <466FE30B.90704@shaw.ca>
	<20070613134002.GD13278@localhost.localdomain>
	<467002B0.3070100@shaw.ca>
	<20070613155046.GA576@localhost.localdomain>
	<20070613162238.GC576@localhost.localdomain>
Message-ID: <46702D12.8070302@shaw.ca>

Przemek:

Indeed your sample makes things clear.

This small app was last rebuilt with both harbours more than a year ago.
Now that I want to build it again with both compilers, it was just 
surprising
to me to see that xHarbour never enforced it (before and now), but that
Harbour didn't before, but does now - I was just under the wrong impression
both flavors were actually enforcing data types for several years now.

Now that I know better, I know where to start commenting out AS...

Regards,

Przemyslaw Czerpak wrote:

>On Wed, 13 Jun 2007, Przemyslaw Czerpak wrote:
>  
>
>>AS ... in CLASS member declaration is not supported in xHarbour at all.
>>It's always ignored. At least was, I haven't checked what has been changed
>>in xHarbour classy code in last weeks.
>>    
>>
>
>Below is a test code. It gives the same RT error in Harbour and
>Class(y) 2.4 and does not report any errors with current xHarbour
>CVS version so I think xHarbour still does not support type checking.
>
>best regards,
>Przemek
>
>
>    #ifdef __HARBOUR__
>       #include "hbclass.ch"
>    #else
>       #include "class(y).ch"
>    #endif
>
>    proc main()
>    local o
>    o:=myClass():new()
>    o:bEOF:={||.f.}
>    ? "CodeBlock assigned"
>    o:bEOF:=NIL
>    ? "NIL assigned"
>    o:bEOF:=date()
>    ? "DATE assigned"
>    return
>
>    create class myclass
>    exported:
>       VAR bEOF    TYPE block
>    end class
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>  
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070613/c43e11eb/attachment.html
From lkrausem at shaw.ca  Wed Jun 13 13:50:43 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Wed Jun 13 13:51:05 2007
Subject: [Harbour] Error BASE/44
In-Reply-To: <20070613134002.GD13278@localhost.localdomain>
References: <466FE30B.90704@shaw.ca>
	<20070613134002.GD13278@localhost.localdomain>
Message-ID: <46702E73.7020906@shaw.ca>

Przemek, all:

I think the tex for error msg 44 should use the word "data type" instead 
of class:

I.e. from:

Assigned value is wrong class: ....

to:

Assigned value is wrong data type: ....

Would seem to make more sense.

Regards,

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From m.renzi at maticasrl.it  Wed Jun 13 10:49:55 2007
From: m.renzi at maticasrl.it (Massimo Renzi (MaticaSrl))
Date: Wed Jun 13 14:14:32 2007
Subject: [Harbour] [xHarbour] create ActiveX
In-Reply-To: <46692f73.57f84a52.0490.07bd@mx.google.com>
References: <000101c7a9b5$27139d00$d600080a@maxsoft>
	<46692f73.57f84a52.0490.07bd@mx.google.com>
Message-ID: <001501c7adca$1bb16c80$2600080a@maxsoft>

Hi all.
It's possibile create an ActiveX ?
Thank you

Max


From druzus at priv.onet.pl  Wed Jun 13 15:20:48 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 13 15:21:24 2007
Subject: [Harbour] Error BASE/44
In-Reply-To: <46702E73.7020906@shaw.ca>
References: <466FE30B.90704@shaw.ca>
	<20070613134002.GD13278@localhost.localdomain>
	<46702E73.7020906@shaw.ca>
Message-ID: <20070613192048.GA9062@localhost.localdomain>

On Wed, 13 Jun 2007, Luis Krause Mantilla wrote:
> Przemek, all:
> I think the tex for error msg 44 should use the word "data type" instead 
> of class:
> I.e. from:
> Assigned value is wrong class: ....
> to:
> Assigned value is wrong data type: ....
> Would seem to make more sense.

I took these message from Class(y) 2.4 and it's exactly the same.
But if you think that 'wrong data type' is better then I can change
it. Anyhow please note that it's also possible to limit type to objects
of given class (it's not implemented in Harbour yet) and IMHO it was
the source of original Class(y) error message.
I'll add class types when I will finish Class(y) compatible code.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jun 13 15:42:21 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 13 15:42:55 2007
Subject: [Harbour] Error BASE/44
In-Reply-To: <951B38E6-9E65-4C82-B4F1-8B853889F299@syenar.hu>
References: <466FE30B.90704@shaw.ca>
	<20070613134002.GD13278@localhost.localdomain>
	<467002B0.3070100@shaw.ca>
	<20070613155046.GA576@localhost.localdomain>
	<20070613162238.GC576@localhost.localdomain>
	<951B38E6-9E65-4C82-B4F1-8B853889F299@syenar.hu>
Message-ID: <20070613194221.GB9062@localhost.localdomain>

On Wed, 13 Jun 2007, Szak?ts Viktor wrote:
> >    #ifdef __HARBOUR__
> >       #include "hbclass.ch"
> >    #else
> >       #include "class(y).ch"
> >    #endif
> if we're at it, shouldn't we add a dummy "class(y).ch" file
> (just containing #include "hbclass.ch") to the repository
> (after BETA release), to not need this trick?

I thought about it but I wanted to implement Class(y) compatible
functions so it will be possible to use original Class(y) header
files. I started to create csy*() functions but I've never finished
them because I had some serious problem with old preprocessor which
was not able to preporcess correctly original class(y) .ch files so
I left this code and begin to work on PP. Now I can return to it.
But I was never Class(y) user and I can miss some important features.
Only few of them are documented. If we have some Class(y) users which
can define what exactly should be done, what messages should be
implemented for CLASSY and OBJECT class and what they exactly should
do then it will greatly help. Only few things are documented in Class(y)
documentation or source code examples and it's necessary to make many
different tests to check/guess what sth exactly does in Class(y).
It's a time consuming process which stops me to return to this code.
With well defined jobs I think that I can finish it in a weekend
otherwise it will take weeks or months.
Returning to our own class(y).ch - we can add it but please note
that in few important places we are not classy compatible, f.e.:
in Class(y) class function returns class object and it's necessary
to send NEW() message to this object to receive object of given class.
In [x]Harbour not and class function returns class instance not class
object. I would like to make it Class(y) compatible but it may be a
problem for FWH users so I planed to use our own class(y).ch for strict
classy compatible code with real class objects, methods and variables.
Probably now many of Class(y) users may not find the difference using
hbclass.ch but also many others have to update their code. If we add
to CVS our own class(y).ch with simple #include "hbclass.ch" inside
then I'd like to loudly say that this file will be updated to be fully
Class(y) 2.4 compatible in the future and I will not respect any asks
about backward compatibility with code which uses this file and is not
Class(y) compatible.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Jun 13 15:52:56 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jun 13 15:52:59 2007
Subject: [Harbour] Error BASE/44
In-Reply-To: <20070613194221.GB9062@localhost.localdomain>
References: <466FE30B.90704@shaw.ca>
	<20070613134002.GD13278@localhost.localdomain>
	<467002B0.3070100@shaw.ca>
	<20070613155046.GA576@localhost.localdomain>
	<20070613162238.GC576@localhost.localdomain>
	<951B38E6-9E65-4C82-B4F1-8B853889F299@syenar.hu>
	<20070613194221.GB9062@localhost.localdomain>
Message-ID: <38AD8094-9180-44C9-B61E-C750BF7F08EB@syenar.hu>


On 2007.06.13., at 21:42, Przemyslaw Czerpak wrote:

> On Wed, 13 Jun 2007, Szak?ts Viktor wrote:
>>>    #ifdef __HARBOUR__
>>>       #include "hbclass.ch"
>>>    #else
>>>       #include "class(y).ch"
>>>    #endif
>> if we're at it, shouldn't we add a dummy "class(y).ch" file
>> (just containing #include "hbclass.ch") to the repository
>> (after BETA release), to not need this trick?
>
> I thought about it but I wanted to implement Class(y) compatible
> functions so it will be possible to use original Class(y) header
> files. I started to create csy*() functions but I've never finished
> them because I had some serious problem with old preprocessor which
> was not able to preporcess correctly original class(y) .ch files so
> I left this code and begin to work on PP. Now I can return to it.
> But I was never Class(y) user and I can miss some important features.
> Only few of them are documented. If we have some Class(y) users which
> can define what exactly should be done, what messages should be
> implemented for CLASSY and OBJECT class and what they exactly should
> do then it will greatly help. Only few things are documented in  
> Class(y)
> documentation or source code examples and it's necessary to make many
> different tests to check/guess what sth exactly does in Class(y).
> It's a time consuming process which stops me to return to this code.
> With well defined jobs I think that I can finish it in a weekend
> otherwise it will take weeks or months.
> Returning to our own class(y).ch - we can add it but please note
> that in few important places we are not classy compatible, f.e.:
> in Class(y) class function returns class object and it's necessary
> to send NEW() message to this object to receive object of given class.
> In [x]Harbour not and class function returns class instance not class
> object. I would like to make it Class(y) compatible but it may be a
> problem for FWH users so I planed to use our own class(y).ch for  
> strict
> classy compatible code with real class objects, methods and variables.
> Probably now many of Class(y) users may not find the difference using
> hbclass.ch but also many others have to update their code. If we add
> to CVS our own class(y).ch with simple #include "hbclass.ch" inside
> then I'd like to loudly say that this file will be updated to be fully
> Class(y) 2.4 compatible in the future and I will not respect any asks
> about backward compatibility with code which uses this file and is not
> Class(y) compatible.

Okey, I think that this is reasonable. I'd say Harbour does provide
this file for convenience, but the goal of Harbour was never to
achieve 100% Class(y) compatibility, so differences are acceptable.
The more info we can provide on the differences the better, and
for now such a disclaimer is perfect.

The upside is that a Harbour users won't need to get/install the
Class(y) package to use the existing features.

Brgds,
Viktor

From lkrausem at shaw.ca  Wed Jun 13 15:54:10 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Wed Jun 13 15:55:06 2007
Subject: [Harbour] Error BASE/44
In-Reply-To: <20070613192048.GA9062@localhost.localdomain>
References: <466FE30B.90704@shaw.ca>
	<20070613134002.GD13278@localhost.localdomain>
	<46702E73.7020906@shaw.ca>
	<20070613192048.GA9062@localhost.localdomain>
Message-ID: <46704B62.90008@shaw.ca>

Przemek:

As I said, I've never used Class(y)... I just think the current message
is a bit misleading since the error actually means the wrong data type
was being assigned to a DATA.

I'm all in for error descriptions that are accurate vs. just using the 
original
message, but it's fine with me if you leave it as is.

Regards,

Przemyslaw Czerpak wrote:

>On Wed, 13 Jun 2007, Luis Krause Mantilla wrote:
>  
>
>>Przemek, all:
>>I think the tex for error msg 44 should use the word "data type" instead 
>>of class:
>>I.e. from:
>>Assigned value is wrong class: ....
>>to:
>>Assigned value is wrong data type: ....
>>Would seem to make more sense.
>>    
>>
>
>I took these message from Class(y) 2.4 and it's exactly the same.
>But if you think that 'wrong data type' is better then I can change
>it. Anyhow please note that it's also possible to limit type to objects
>of given class (it's not implemented in Harbour yet) and IMHO it was
>the source of original Class(y) error message.
>I'll add class types when I will finish Class(y) compatible code.
>
>best regards,
>Przemek
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>  
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070613/4da0e5ab/attachment-0001.html
From druzus at priv.onet.pl  Wed Jun 13 18:10:37 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 13 18:11:13 2007
Subject: [Harbour] ChangeLog 2007-06-14 00:05 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070613221037.GA2446@localhost.localdomain>

2007-06-14 00:05 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcompat.ch
    + added translation rules for extended code blocks

  * harbour/source/compiler/gencc.c
    * cleaned C compiler warnings in -gc3 output and SWITCH <exp>
      statement

  * harbour/source/compiler/complex.c
  * harbour/source/compiler/harbour.y
  * harbour/source/compiler/harbour.yyc
    * allow to use 0d0 and 0d00000000 as empty date value

  * harbour/source/pp/Makefile
    * workaround for problems with some GNU make  versions,
      f.e. 3.76.1 on OS2

modifications synced in both branches.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jun 13 18:10:53 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 13 18:11:28 2007
Subject: [Harbour] ChangeLog 2007-06-14 00:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070613221053.GB2446@localhost.localdomain>

2007-06-14 00:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/tclass.prg
    * initialize date members to ctod("")

modifications synced in both branches.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jun 13 18:46:04 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 13 18:46:40 2007
Subject: [Harbour] ChangeLog 2007-06-14 00:20 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070613224604.GA3637@localhost.localdomain>

2007-06-14 00:20 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/doc/whatsnew.txt
  * harbour/harbour.spec
  * harbour/include/hbver.h
    * small information about new release
    * updated version number to 1.1.1
    * tagged as build48

This was done in devel branch only and this tag can help to
compare future differences between devel and beta branch.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jun 13 18:50:33 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 13 18:51:08 2007
Subject: [Harbour] ChangeLog BETA3 2007-06-14 00:30 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
Message-ID: <20070613225032.GB3637@localhost.localdomain>

2007-06-14 00:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/doc/whatsnew.txt
  * harbour/harbour.spec
  * harbour/include/hbver.h
    * small information about new release
    * updated version number to 0.99.3
    * tagged as beta3

Now BETA3 is ready for binary release - please start this process.
The BETA3 source code can be taken from CVS by

    cvs -z3 co -r beta3 harbour

Please remember that 'beta3' is sticky tag only so modification in
source taken with above checkout command cannot be committed.

best regards,
Przemek
From philb at philb.us  Wed Jun 13 20:03:00 2007
From: philb at philb.us (Phil Barnett)
Date: Wed Jun 13 20:03:03 2007
Subject: [Harbour] ChangeLog BETA3 2007-06-14 00:30 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <20070613225032.GB3637@localhost.localdomain>
References: <20070613225032.GB3637@localhost.localdomain>
Message-ID: <200706132003.00460.philb@philb.us>

On Wednesday 13 June 2007 18:50, Przemyslaw Czerpak wrote:
> 2007-06-14 00:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/doc/whatsnew.txt
>   * harbour/harbour.spec
>   * harbour/include/hbver.h
>     * small information about new release
>     * updated version number to 0.99.3
>     * tagged as beta3
>
> Now BETA3 is ready for binary release - please start this process.
> The BETA3 source code can be taken from CVS by
>
>     cvs -z3 co -r beta3 harbour
>
> Please remember that 'beta3' is sticky tag only so modification in
> source taken with above checkout command cannot be committed.

A big Thank You to Prezemek and everyone else who is helping and participating 
in the beta process.

Harbour Project has made some fantastic improvements in the last three months 
and I can't wait to see the finished product when Harbour Project 1.0 is 
released to the world.

There is a good day coming, my friends!

-- 
Phil Barnett
AI4OF
SKCC #600
From harbour.01 at syenar.hu  Wed Jun 13 20:33:39 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jun 13 20:33:45 2007
Subject: [Harbour] ChangeLog BETA3 2007-06-14 00:30 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <20070613225032.GB3637@localhost.localdomain>
References: <20070613225032.GB3637@localhost.localdomain>
Message-ID: <01134C03-5A83-4908-8161-227E08512938@syenar.hu>

Great, thanks Przemek.

I've started the SVN conversion process, I'd like to ask everybody
to not commit anything until the migration is over.

Brgds,
Viktor

On 2007.06.14., at 0:50, Przemyslaw Czerpak wrote:

> 2007-06-14 00:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/doc/whatsnew.txt
>   * harbour/harbour.spec
>   * harbour/include/hbver.h
>     * small information about new release
>     * updated version number to 0.99.3
>     * tagged as beta3
>
> Now BETA3 is ready for binary release - please start this process.
> The BETA3 source code can be taken from CVS by
>
>     cvs -z3 co -r beta3 harbour
>
> Please remember that 'beta3' is sticky tag only so modification in
> source taken with above checkout command cannot be committed.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From niki at synel.co.il  Thu Jun 14 02:34:11 2007
From: niki at synel.co.il (Chen Kedem)
Date: Thu Jun 14 02:34:32 2007
Subject: [Harbour] Font type
References: <466FE41C.12AC@synel.co.il>
Message-ID: <4670E163.39AC@synel.co.il>

Ardo,

> I already try at windowed DOS at winXP and it doesn't work

It can only work in a full screen mode. When you work in a windowed
mode, the only thing that is change in the number of rows and columns
for that window but the font stay the same.

> So it will set the whole display bigger?

Yes. The SETMODE() function try to change the video mode of the
screen. Some of this modes uses a larger fonts (to support old
IBM PC 40x25 mode) or smaller fonts (80x50). As far as I know,
there is no way in a console application to use different font
(or font size) for different parts of the screen. You must use
a GUI application to do that.

If the text is simple (like digits), you can try to display your
text using the box characters CHR(192)..CHR(223) (this is in the
437 codepage, but it chould be something else in your local codepage).

---BIGHELLO.PRG---
#define BXF     CHR(219)   // full box
#define spc     " "        // space
proc main()
cls
? BXF+spc+spc+BXF +spc+ BXF+BXF+BXF+BXF +spc+ BXF+spc+spc+spc +spc+ BXF+spc+spc+spc +spc+ BXF+BXF+BXF+BXF
? BXF+spc+spc+BXF +spc+ BXF+spc+spc+spc +spc+ BXF+spc+spc+spc +spc+ BXF+spc+spc+spc +spc+ BXF+spc+spc+BXF
? BXF+BXF+BXF+BXF +spc+ BXF+BXF+BXF+BXF +spc+ BXF+spc+spc+spc +spc+ BXF+spc+spc+spc +spc+ BXF+spc+spc+BXF
? BXF+spc+spc+BXF +spc+ BXF+spc+spc+spc +spc+ BXF+spc+spc+spc +spc+ BXF+spc+spc+spc +spc+ BXF+spc+spc+BXF
? BXF+spc+spc+BXF +spc+ BXF+BXF+BXF+BXF +spc+ BXF+BXF+BXF+BXF +spc+ BXF+BXF+BXF+BXF +spc+ BXF+BXF+BXF+BXF
?
? "The above should say a big HELLO"
?
return
------------------

bld_b32 BIGHELLO /w/a/n
BIGHELLO

This is just an example of course


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From elart at elart.it  Thu Jun 14 02:57:38 2007
From: elart at elart.it (elart)
Date: Thu Jun 14 02:51:46 2007
Subject: [Harbour] ChangeLog BETA3 2007-06-14 00:30 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <200706132003.00460.philb@philb.us>
References: <20070613225032.GB3637@localhost.localdomain>
	<200706132003.00460.philb@philb.us>
Message-ID: <4670E6E2.50907@elart.it>

Phil Barnett wrote:
> On Wednesday 13 June 2007 18:50, Przemyslaw Czerpak wrote:
>   
>> 2007-06-14 00:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>>   * harbour/doc/whatsnew.txt
>>   * harbour/harbour.spec
>>   * harbour/include/hbver.h
>>     * small information about new release
>>     * updated version number to 0.99.3
>>     * tagged as beta3
>>
>> Now BETA3 is ready for binary release - please start this process.
>> The BETA3 source code can be taken from CVS by
>>
>>     cvs -z3 co -r beta3 harbour
>>
>>     
Harbour beta 3 for Fedora core6 rpm are ready into
upload.sourceforge.net/incoming directory

Fedora core 5 is about to stop maintenance cycle.
HTH
From lorenzo.fiorini at gmail.com  Thu Jun 14 03:01:54 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Jun 14 03:01:59 2007
Subject: [Harbour] rpms for Fedora 7 and --hash-style issue
Message-ID: <9257026e0706140001u5f20d1f4yaa80e3f90239455a@mail.gmail.com>

Under Fedora 7 I build my apps using CC_L_USR=-Wl,--hash-style=both to
allow programs to run on "old" glibc systems.

Should I use it preparing the rpms?

best regards,
Lorenzo
From philb at philb.us  Thu Jun 14 03:15:36 2007
From: philb at philb.us (Phil Barnett)
Date: Thu Jun 14 03:15:40 2007
Subject: [Harbour] ChangeLog BETA3 2007-06-14 00:30 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <4670E6E2.50907@elart.it>
References: <20070613225032.GB3637@localhost.localdomain>
	<200706132003.00460.philb@philb.us> <4670E6E2.50907@elart.it>
Message-ID: <200706140315.36891.philb@philb.us>

On Thursday 14 June 2007 02:57, elart wrote:

> Harbour beta 3 for Fedora core6 rpm are ready into
> upload.sourceforge.net/incoming directory
>
> Fedora core 5 is about to stop maintenance cycle.

And I spent the evening upgrading laptops around the house to Fedora 7.

It's nice.

-- 
Phil Barnett
AI4OF
SKCC #600
From labitas at gmail.com  Thu Jun 14 03:29:07 2007
From: labitas at gmail.com (Saulius Zrelskis)
Date: Thu Jun 14 03:29:12 2007
Subject: [Harbour] Font type
In-Reply-To: <f306932a0706130416mf79df52xa1756f9a4be4d94d@mail.gmail.com>
References: <f306932a0706130416mf79df52xa1756f9a4be4d94d@mail.gmail.com>
Message-ID: <2386af1b0706140029u1ddc4dddv9a82c489d0a9e443@mail.gmail.com>

You can change console font and size in windowed mode through
properties. It applies to all screen, because it is console.
In winXP you can do this from your program.

Regards
Saulius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070614/cd3748bc/attachment.html
From e.m.giordano at emagsoftware.it  Thu Jun 14 04:48:02 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Thu Jun 14 04:48:37 2007
Subject: [Harbour] ChangeLog 2007-06-14 00:05 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20070613221037.GA2446@localhost.localdomain>
Message-ID: <001201c7ae60$b7df0bd0$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: giovedi 14 giugno 2007 0.10
Oggetto: [Harbour] ChangeLog 2007-06-14 00:05 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


>  * harbour/source/compiler/gencc.c
>    * cleaned C compiler warnings in -gc3 output and SWITCH <exp>
>      statement

Thank you! But the warning now is

Warning W8066 test.c 48: Unreachable code in function HB_FUN_MAIN

FUNCTION MAIN()

    WHILE .T.
        IF .T.
            IF TEST()
                RETURN NIL
            ENDIF
        ENDIF
    ENDDO

    RETURN NIL

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Thu Jun 14 05:01:55 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Thu Jun 14 05:02:29 2007
Subject: [Harbour] ChangeLog 2007-06-14 00:05 UTC+0200
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
References: <20070613221037.GA2446@localhost.localdomain>
	<001201c7ae60$b7df0bd0$0100a8c0@emag>
Message-ID: <004c01c7ae62$a86f1a30$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Enrico Maria Giordano" <e.m.giordano@emagsoftware.it>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: giovedi 14 giugno 2007 10.48
Oggetto: Re: [Harbour] ChangeLog 2007-06-14 00:05 UTC+0200 
PrzemyslawCzerpak(druzus/at/priv.onet.pl)


> Thank you! But the warning now is
>
> Warning W8066 test.c 48: Unreachable code in function HB_FUN_MAIN

Ops, this is the same old warning. Did you remove other warnings than these in 
your recent changes?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at priv.onet.pl  Thu Jun 14 05:11:50 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jun 14 05:12:26 2007
Subject: [Harbour] ChangeLog 2007-06-14 00:05 UTC+0200
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <004c01c7ae62$a86f1a30$0100a8c0@emag>
References: <20070613221037.GA2446@localhost.localdomain>
	<001201c7ae60$b7df0bd0$0100a8c0@emag>
	<004c01c7ae62$a86f1a30$0100a8c0@emag>
Message-ID: <20070614091150.GA27950@localhost.localdomain>

On Thu, 14 Jun 2007, Enrico Maria Giordano wrote:
> >Thank you! But the warning now is
> >Warning W8066 test.c 48: Unreachable code in function HB_FUN_MAIN
> Ops, this is the same old warning. Did you remove other warnings than these 
> in your recent changes?

Yes. The one you reported I left untouched. As I said you can safely
ignore it - probably in the future I'll clean it with some other
modifications.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Thu Jun 14 05:14:44 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Thu Jun 14 05:15:19 2007
Subject: [Harbour] ChangeLog 2007-06-14 00:05
	UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
References: <20070613221037.GA2446@localhost.localdomain><001201c7ae60$b7df0bd0$0100a8c0@emag><004c01c7ae62$a86f1a30$0100a8c0@emag>
	<20070614091150.GA27950@localhost.localdomain>
Message-ID: <009501c7ae64$7291f840$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: giovedi 14 giugno 2007 11.11
Oggetto: Re: [Harbour] ChangeLog 2007-06-14 00:05 
UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)


> Yes. The one you reported I left untouched. As I said you can safely
> ignore it - probably in the future I'll clean it with some other
> modifications.

Ah, ok. No problem at all.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at priv.onet.pl  Thu Jun 14 05:17:31 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jun 14 05:18:06 2007
Subject: [Harbour] rpms for Fedora 7 and --hash-style issue
In-Reply-To: <9257026e0706140001u5f20d1f4yaa80e3f90239455a@mail.gmail.com>
References: <9257026e0706140001u5f20d1f4yaa80e3f90239455a@mail.gmail.com>
Message-ID: <20070614091731.GB27950@localhost.localdomain>

On Thu, 14 Jun 2007, Lorenzo Fiorini wrote:
> Under Fedora 7 I build my apps using CC_L_USR=-Wl,--hash-style=both to
> allow programs to run on "old" glibc systems.
> Should I use it preparing the rpms?

You can though binaries are a little bit bigger (both SysV and GNU hash
tables for symbols are included) and sometimes I'd prefer to not allow
merging old and new binaries - if you know what you are doing then it's
OK but some people use to report strange problems as Harbour bugs when
in fact they created them themselves by forcing linking together
incompatible binaries - so it's your decision.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Jun 14 05:18:26 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jun 14 05:18:28 2007
Subject: [Harbour] SVN repo conversion ready (PLS READ)
Message-ID: <F42EED29-71CA-4863-9814-958E5070C478@syenar.hu>

Hi all,

I've uploaded the new SVN dump here:
http://www.syenar.hu/harbour/svndump.bz2 (122MB)

(sorry for not uploading it directly to sf, but I tried
it two times, both failed in the middle of the process - after
about an hour - and finally I got a permanent connection error.)

Find the final CVS backups here (for archival purposes only):
http://www.syenar.hu/harbour/cvsbackup.zip (24MB)
http://www.syenar.hu/harbour/cvsbackup-fixed.zip (24MB)
(latter having Przemek's ChangeLog fix, plus 5 deleted
file removed which clashed with live versions)

Could an admin jump in and finish the migration process pls?

https://sourceforge.net/docs/E09#import

5) Upload the dump file into the root of your project group directory  
on the shell server
(i.e. scp svndump.gz USERNAME@shell.sourceforge.net:/home/groups/h/ha/ 
harbour-project/svndump.gz).
6) Login to the SourceForge.net website.
7) Go to the project summary page (https://www.sf.net/projects/ 
harbour-project).
8) Click on the 'Admin' link.
9) Click on the 'Subversion' admin page link.
10) Click on the 'migrate' link on the 'Migration Instructions'  
section of the page.
11) Key in the filename of the archive into the 'Source path' field,  
noting that it must comply with the filename restrictions previously  
described.
12) Check the 'Replace' check box in the same column, if you wish to  
replace the existing content with the new content to be added.
13) Enter the value you want passed to the --parent-dir argument of  
the "svnadmin load" command into the 'Destination' field. For most  
users, this would be left blank. Note that the destionation directory  
must be created but empty for this to work.
14) Click on the 'Submit' button.
15) The migration will be finished within 24 hours. It could be  
finished in as soon as an hour or two, depending on the size of your  
CVS repository and the number of projects queued for migration in  
front of yours. Returning to the page will display whether it  
completed, failed or is still in queue.

Brgds,
Viktor

PS: The repository is live on my local address, if anyone wants
to have a peek.

From lorenzo.fiorini at gmail.com  Thu Jun 14 05:36:11 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Jun 14 05:36:13 2007
Subject: [Harbour] rpms for Fedora 7 and --hash-style issue
In-Reply-To: <20070614091731.GB27950@localhost.localdomain>
References: <9257026e0706140001u5f20d1f4yaa80e3f90239455a@mail.gmail.com>
	<20070614091731.GB27950@localhost.localdomain>
Message-ID: <9257026e0706140236i4cd3520cv55f63af25ff631ec@mail.gmail.com>

On 6/14/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> You can though binaries are a little bit bigger (both SysV and GNU hash
> tables for symbols are included) and sometimes I'd prefer to not allow
> merging old and new binaries - if you know what you are doing then it's
> OK but some people use to report strange problems as Harbour bugs when
> in fact they created them themselves by forcing linking together
> incompatible binaries - so it's your decision.

Ok, I'll build f7 rpms without it.

best regards,
Lorenzo
From dmacias at mail.udg.mx  Thu Jun 14 05:53:58 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Jun 14 05:54:04 2007
Subject: [Harbour] Beta 3 binaries for OS/2-eCS
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <46711036.4020901@mail.udg.mx>

Harbour Beta 3 binaries file for OS/2-eComStation uploaded to:

ftp://upload.sourceforge.net/incoming/

as harbour-0.99.3.bin-os2.gcc.zip


David Macias


From sscc at mweb.co.za  Thu Jun 14 06:15:36 2007
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Jun 14 06:16:18 2007
Subject: [Harbour] BETA3
In-Reply-To: <20070613161931.GB576@localhost.localdomain>
References: <20070612230849.GA7691@localhost.localdomain>	<46700BB8.90105@mweb.co.za>
	<20070613161931.GB576@localhost.localdomain>
Message-ID: <46711548.3020205@mweb.co.za>

Przemyslaw Czerpak wrote:

>> Tortoise CVS reports
>> cvs [rlog aborted]: unrecognized operation '\x20' in 
>> /cvsroot/harbour-project/harbour/ChangeLog,v
> 
> It's a known problem. This file is corrupted after last SF crash.
> I hope it will not block setting new tag.

I can get the HEAD without problems, but I cannot get the BETA3 tag, 
this is using Tortoise, Update Special, Get tag/branch/revision.

So I can only create binaries for the release from the HEAD.

I did delete my local Changelog, but I guess the Changelog for the 
branch has a problem.

Regards
Alex
From dmacias at mail.udg.mx  Thu Jun 14 06:16:24 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Jun 14 06:16:28 2007
Subject: [Harbour] Re: SVN repo conversion ready (PLS READ)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <46711578.6080805@mail.udg.mx>

 > Could an admin jump in and finish the migration process pls?

Perhaps you can get admin status if you request it, at least for this 
case, so you can complete rest of process for sure

 >PS: The repository is live on my local address, if anyone wants
 >to have a peek.

SVN URL ... and other values ?

David Macias
From sscc at mweb.co.za  Thu Jun 14 06:16:38 2007
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Jun 14 06:17:13 2007
Subject: [Harbour] BETA3
In-Reply-To: <46701EEE.4090900@shaw.ca>
References: <20070612230849.GA7691@localhost.localdomain>	<46700BB8.90105@mweb.co.za>
	<46701EEE.4090900@shaw.ca>
Message-ID: <46711586.6020006@mweb.co.za>

Luis Krause Mantilla wrote:

> Same problem I had a week ago updating from the main branch.
> 
> Only solution was to delete changelog and do the check out again
> (Tortoise will tell you changelog was lost, but that about it).

I tried it, its ok on main branch, not beta3, see my other response.

Thanks
Alex

From harbour.01 at syenar.hu  Thu Jun 14 06:24:14 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jun 14 06:24:16 2007
Subject: [Harbour] Re: SVN repo conversion ready (PLS READ)
In-Reply-To: <46711578.6080805@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<46711578.6080805@mail.udg.mx>
Message-ID: <DF43975C-22D7-4A20-B96F-059CCEBEF84E@syenar.hu>

> > Could an admin jump in and finish the migration process pls?
>
> Perhaps you can get admin status if you request it, at least for  
> this case, so you can complete rest of process for sure

That's fine for me too. If the admins are willing to give me admin
rights (which I once had :), I'd finish myself, no prob.

> >PS: The repository is live on my local address, if anyone wants
> >to have a peek.
>
> SVN URL ... and other values ?

Sure, here are the data (the same as it was):

http://syenar.dyndns.org:11410/trac/harbour/timeline
username: harbour
pw: harbour

It's a Trac view.

Brgds,
Viktor

From niki at synel.co.il  Thu Jun 14 06:29:07 2007
From: niki at synel.co.il (Chen Kedem)
Date: Thu Jun 14 06:29:32 2007
Subject: [Harbour] SVN repo conversion ready (PLS READ)
Message-ID: <46711873.AAD@synel.co.il>

Viktor,

> Could an admin jump in and finish the migration process pls?

I'll leave it for someone that knows what he is doing. Phill?

Question:
After this change, would there be an active CVS tree in SF?
or would it be just read only? invisible? removed?

I need command line client that should work on my Win95 machine.
I downloaded the files from this link:
http://subversion.tigris.org/servlets/ProjectDocumentList?folderID=91
http://subversion.tigris.org/files/documents/15/38203/svn-win32-1.4.4.zip

What should I set in my environment in order to fatch the latest
Harbour SVN repository (of course after it is all set and done on SF)?


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From dmacias at mail.udg.mx  Thu Jun 14 06:42:43 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Jun 14 06:42:47 2007
Subject: [Harbour] Re: SVN repo conversion ready (PLS READ)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <46711BA3.2010108@mail.udg.mx>

 > I need command line client that should work on my Win95 machine.

I do not know if work under Win95, but you can test TortoiseSVN, as good 
and easy as TortoiseCVS
... but seem you want just "command line client"

David Macias


From dmacias at mail.udg.mx  Thu Jun 14 06:44:48 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Jun 14 06:44:51 2007
Subject: [Harbour] Re: SVN repo conversion ready (PLS READ)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <46711C20.1080800@mail.udg.mx>

 >> SVN URL ... and other values ?

 >Sure, here are the data (the same as it was):

 >http://syenar.dyndns.org:11410/trac/harbour/timeline
 >username: harbour
 >pw: harbour

 >It's a Trac view.

It look fine
But for a SVN client ?

David Macias


From lorenzo.fiorini at gmail.com  Thu Jun 14 06:45:52 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Jun 14 06:45:54 2007
Subject: [Harbour] Fastest way to convert strings into values using Harbour
	api
Message-ID: <9257026e0706140345w49bc6003hfbeba284fb19eb0d@mail.gmail.com>

I need and advice from C gurus.

I'm looking for the fastest path to move a postgresql results set into an array.

The function below is actually 4 times faster than the same prg loop,
but now I need to convert the string content of the fields into
Harbour's numbers, dates and logicals.

f.e. from PQgetvalue I get a date like '2007-06-14' while
hb_arraySetDS expects '20070614'. Which is the quickest way to remove
the hyphens?

Any suggestion is welcome.

best regards,
Lorenzo

HB_FUNC( PQRESULT2ARRAY )
{
   PGresult *res;
   if( hb_parinfo( 1 ) )
   {
      res = ( PGresult * ) hb_parptr( 1 );
      if( PQresultStatus( res ) == PGRES_TUPLES_OK )
      {
         int nRows = PQntuples(res), nRow;
         int nCols = PQnfields( res ), nCol;
         PHB_ITEM pResult = hb_itemArrayNew( nRows ), pRow;

         for( nRow = 0; nRow < nRows ; nRow++ )
         {
            pRow = hb_arrayGetItemPtr( pResult, nRow + 1 );
            hb_arrayNew ( pRow, nCols );
            for( nCol = 0; nCol < nCols ; nCol++ )
            {
               hb_arraysetC( pRow, nCol + 1, PQgetvalue(res, nRow, nCol) );
            }
         }
         hb_itemRelease( hb_itemReturnForward( pResult ) );
      }
   }
}
From lorenzo.fiorini at gmail.com  Thu Jun 14 06:51:26 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Jun 14 06:51:29 2007
Subject: [Harbour] Beta3 binaries for fc7 uploaded
Message-ID: <9257026e0706140351q201d1249y3789dad429f33bff@mail.gmail.com>

as subj

best regards,
Lorenzo
From harbour.01 at syenar.hu  Thu Jun 14 06:58:04 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jun 14 06:58:05 2007
Subject: [Harbour] SVN repo conversion ready (PLS READ)
In-Reply-To: <46711873.AAD@synel.co.il>
References: <46711873.AAD@synel.co.il>
Message-ID: <7F90BA30-ABDE-4006-AA9C-1B397BDAFB26@syenar.hu>

Hi Chen,

> Question:
> After this change, would there be an active CVS tree in SF?
> or would it be just read only? invisible? removed?

It will be removed. You can only use one repository type
at a time, as real-time syncing is not possible.

> I need command line client that should work on my Win95 machine.
> I downloaded the files from this link:
> http://subversion.tigris.org/servlets/ProjectDocumentList?folderID=91
> http://subversion.tigris.org/files/documents/15/38203/svn- 
> win32-1.4.4.zip
>
> What should I set in my environment in order to fatch the latest
> Harbour SVN repository (of course after it is all set and done on SF)?

As far as the SVN FAQ goes, you can use SVN on W95/98/ME,
as a client (but not as a server). They mention a component named
APR (Apache Portable Runtime), I'm not sure if this needs to be
installed separately though.

Brgds,
Viktor

>
>
>   Chen.
> ********************************************************************** 
> ************************
> IMPORTANT: The contents of this email and any attachments are  
> confidential. They are intended for the
> named recipient(s) only.
> If you have received this email in error, please notify the system  
> manager or the sender immediately and do
> not disclose the contents to anyone or make copies thereof.
> *** eSafe scanned this email for viruses, vandals, and malicious  
> content. ***
> ********************************************************************** 
> ************************
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From e.m.giordano at emagsoftware.it  Thu Jun 14 07:08:55 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Thu Jun 14 07:09:30 2007
Subject: [Harbour] Fastest way to convert strings into values using
	Harbourapi
References: <9257026e0706140345w49bc6003hfbeba284fb19eb0d@mail.gmail.com>
Message-ID: <018b01c7ae74$664c6330$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: gioved? 14 giugno 2007 12.45
Oggetto: [Harbour] Fastest way to convert strings into values using Harbourapi


> f.e. from PQgetvalue I get a date like '2007-06-14' while
> hb_arraySetDS expects '20070614'. Which is the quickest way to remove
> the hyphens?

Try something like this:

#include <stdio.h>
#include <string.h>


void RemoveChar( char *String, char c )
{
    int i = 0;
    int j = 0;

    for ( ; String[ i ]; ++j )
    {
        if ( String[ j ] != c )
        {
            String[ i ] = String[ j ];
            ++i;
        }
    }
}


int main()
{
    char *Date = "2007-06-14";

    strcpy( Date, "2007-06-14" );

    RemoveChar( Date, '-' );

    printf( "%s\n", Date );
    printf( "%d\n", strlen( Date ) );

    return 0;
}

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Thu Jun 14 07:15:31 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jun 14 07:15:30 2007
Subject: [Harbour] Fastest way to convert strings into values using
	Harbour api
In-Reply-To: <9257026e0706140345w49bc6003hfbeba284fb19eb0d@mail.gmail.com>
References: <9257026e0706140345w49bc6003hfbeba284fb19eb0d@mail.gmail.com>
Message-ID: <41479AD2-4B90-463B-BC8B-F7C08ED196EA@syenar.hu>

> f.e. from PQgetvalue I get a date like '2007-06-14' while
> hb_arraySetDS expects '20070614'. Which is the quickest way to remove
> the hyphens?

How about this simple one:
hbdate[ 0 ] = pqdate[ 0 ];
hbdate[ 1 ] = pqdate[ 1 ];
hbdate[ 2 ] = pqdate[ 2 ];
hbdate[ 3 ] = pqdate[ 3 ];
hbdate[ 4 ] = pqdate[ 5 ];
hbdate[ 5 ] = pqdate[ 6 ];
hbdate[ 6 ] = pqdate[ 8 ];
hbdate[ 7 ] = pqdate[ 9 ];
hbdate[ 8 ] = '\0';

or this if you have a writeable buffer:
date[ 4 ] = date[ 5 ];
date[ 5 ] = date[ 6 ];
date[ 6 ] = date[ 8 ];
date[ 7 ] = date[ 9 ];
date[ 8 ] = '\0';

Maybe some 16/32bit trickery can make it even faster.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Jun 14 08:02:26 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jun 14 08:02:27 2007
Subject: [Harbour] Re: SVN repo conversion ready (PLS READ)
In-Reply-To: <46711578.6080805@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<46711578.6080805@mail.udg.mx>
Message-ID: <86C857C0-69AA-4EB1-B504-8D809CD60A8E@syenar.hu>


On 2007.06.14., at 12:16, David Arturo Macias Corona wrote:

> > Could an admin jump in and finish the migration process pls?
>
> Perhaps you can get admin status if you request it, at least for  
> this case, so you can complete rest of process for sure

I'll definitely need help in uploading the big dump file to sf,
as it failed the 3rd time at 51% after more than an hour uploading.
(Fatal: Network error: Software caused connection abort)

These two commands should be run on a stable or less congested
internet connection:

wget http://www.syenar.hu/harbour/svndump.bz2
scp svndump.bz2 USERNAME@shell.sourceforge.net:/home/groups/h/ha/ 
harbour-project/svndump.bz2

Anyone?

Brgds,
Viktor

From m.renzi at maticasrl.it  Thu Jun 14 07:40:26 2007
From: m.renzi at maticasrl.it (Massimo Renzi (MaticaSrl))
Date: Thu Jun 14 08:36:03 2007
Subject: [Harbour] adordd  (my subversion with ORDER BY statement)
In-Reply-To: <46692f73.57f84a52.0490.07bd@mx.google.com>
References: <000101c7a9b5$27139d00$d600080a@maxsoft>
	<46692f73.57f84a52.0490.07bd@mx.google.com>
Message-ID: <000301c7ae78$cd4f3fe0$2600080a@maxsoft>

Hi all,
thank you very much for ADORDD contribution.
I've added few code to support the ORDER BY statement cause I didn't know
how to order the result set.

I attach the new 2 file (prg and ch)
Thank you again all.

Bye

Max

(locate for c_sSort WA_SORT)

-------------- next part --------------
A non-text attachment was scrubbed...
Name: source.zip
Type: application/octet-stream
Size: 8932 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070614/b94dbbe4/source-0001.obj
From dbtopas at dbtopas.lt  Thu Jun 14 08:45:52 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Jun 14 08:41:43 2007
Subject: [Harbour] Re: SVN repo conversion ready (PLS READ)
In-Reply-To: <86C857C0-69AA-4EB1-B504-8D809CD60A8E@syenar.hu>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<46711578.6080805@mail.udg.mx>
	<86C857C0-69AA-4EB1-B504-8D809CD60A8E@syenar.hu>
Message-ID: <46713880.7010309@dbtopas.lt>

> wget http://www.syenar.hu/harbour/svndump.bz2
> scp svndump.bz2 USERNAME@shell.sourceforge.net:/home/groups/h/ha/ 
> harbour-project/svndump.bz2
> 
> Anyone?

Permission denied

More detail:

D:\mind\tmp2>"C:\Program Files\PuTTY\pscp.exe" -scp -v svndump.bz2 
snaiperis@shell.sourceforge.net:/home/groups/h/ha/harbour-project/svndump.bz2
Looking up host "shell.sourceforge.net"
Connecting to 66.35.250.208 port 22
Server version: SSH-1.99-OpenSSH_3.9p1
We claim version: SSH-2.0-PuTTY_Snapshot_2007_06_14:r7610
Using SSH protocol version 2
Doing Diffie-Hellman group exchange
Doing Diffie-Hellman key exchange with hash SHA-1
The server's host key is not cached in the registry. You
have no guarantee that the server is the computer you
think it is.
The server's rsa2 key fingerprint is:
ssh-rsa 1024 31:8d:12:47:3b:28:8a:05:8c:26:4f:c6:48:05:89:d9
If you trust this host, enter "y" to add the key to
PuTTY's cache and carry on connecting.
If you want to carry on connecting just once, without
adding the key to the cache, enter "n".
If you do not trust this host, press Return to abandon the
connection.
Store key in cache? (y/n) y
Host key fingerprint is:
ssh-rsa 1024 31:8d:12:47:3b:28:8a:05:8c:26:4f:c6:48:05:89:d9
Initialised AES-256 SDCTR client->server encryption
Initialised HMAC-SHA1 client->server MAC algorithm
Initialised AES-256 SDCTR server->client encryption
Initialised HMAC-SHA1 server->client MAC algorithm
Using username "snaiperis".
snaiperis@shell.sourceforge.net's password:
Sent password
Access granted
Opened channel for session
Started a shell/command
Using SCP1
Connected to shell.sourceforge.net

Sending file svndump.bz2, size=127776268
Sink: C0644 127776268 svndump.bz2
scp: /home/groups/h/ha/harbour-project/svndump.bz2: Permission denied

Sent EOF message
Server sent command exit status 1
Disconnected: All channels closed
From harbour.01 at syenar.hu  Thu Jun 14 08:48:56 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jun 14 08:48:58 2007
Subject: [Harbour] Re: SVN repo conversion ready (PLS READ)
In-Reply-To: <46713880.7010309@dbtopas.lt>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<46711578.6080805@mail.udg.mx>
	<86C857C0-69AA-4EB1-B504-8D809CD60A8E@syenar.hu>
	<46713880.7010309@dbtopas.lt>
Message-ID: <42422C03-A345-4A2D-8EE0-253A201E0F5F@syenar.hu>

Maybe someone else is already uploading it.

Can you try with different target filename? (svndump1.bz2)

Brgds,
Viktor

On 2007.06.14., at 14:45, Mindaugas Kavaliauskas wrote:

>> wget http://www.syenar.hu/harbour/svndump.bz2
>> scp svndump.bz2 USERNAME@shell.sourceforge.net:/home/groups/h/ha/  
>> harbour-project/svndump.bz2
>> Anyone?
>
> Permission denied
>
> More detail:
>
> D:\mind\tmp2>"C:\Program Files\PuTTY\pscp.exe" -scp -v svndump.bz2  
> snaiperis@shell.sourceforge.net:/home/groups/h/ha/harbour-project/ 
> svndump.bz2
> Looking up host "shell.sourceforge.net"
> Connecting to 66.35.250.208 port 22
> Server version: SSH-1.99-OpenSSH_3.9p1
> We claim version: SSH-2.0-PuTTY_Snapshot_2007_06_14:r7610
> Using SSH protocol version 2
> Doing Diffie-Hellman group exchange
> Doing Diffie-Hellman key exchange with hash SHA-1
> The server's host key is not cached in the registry. You
> have no guarantee that the server is the computer you
> think it is.
> The server's rsa2 key fingerprint is:
> ssh-rsa 1024 31:8d:12:47:3b:28:8a:05:8c:26:4f:c6:48:05:89:d9
> If you trust this host, enter "y" to add the key to
> PuTTY's cache and carry on connecting.
> If you want to carry on connecting just once, without
> adding the key to the cache, enter "n".
> If you do not trust this host, press Return to abandon the
> connection.
> Store key in cache? (y/n) y
> Host key fingerprint is:
> ssh-rsa 1024 31:8d:12:47:3b:28:8a:05:8c:26:4f:c6:48:05:89:d9
> Initialised AES-256 SDCTR client->server encryption
> Initialised HMAC-SHA1 client->server MAC algorithm
> Initialised AES-256 SDCTR server->client encryption
> Initialised HMAC-SHA1 server->client MAC algorithm
> Using username "snaiperis".
> snaiperis@shell.sourceforge.net's password:
> Sent password
> Access granted
> Opened channel for session
> Started a shell/command
> Using SCP1
> Connected to shell.sourceforge.net
>
> Sending file svndump.bz2, size=127776268
> Sink: C0644 127776268 svndump.bz2
> scp: /home/groups/h/ha/harbour-project/svndump.bz2: Permission denied
>
> Sent EOF message
> Server sent command exit status 1
> Disconnected: All channels closed
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From philb at philb.us  Thu Jun 14 09:38:15 2007
From: philb at philb.us (Phil Barnett)
Date: Thu Jun 14 09:38:19 2007
Subject: [Harbour] SVN repo conversion ready (PLS READ)
In-Reply-To: <46711873.AAD@synel.co.il>
References: <46711873.AAD@synel.co.il>
Message-ID: <200706140938.15712.philb@philb.us>

On Thursday 14 June 2007 06:29, Chen Kedem wrote:
> Viktor,
>
> > Could an admin jump in and finish the migration process pls?
>
> I'll leave it for someone that knows what he is doing. Phill?

Unfortunately, I read this as I'm about to head out for work today, so I can't 
mess with it until tonight. I'll read the list when I get home and see where 
we stand...

-- 
Phil Barnett
AI4OF
SKCC #600
From druzus at priv.onet.pl  Thu Jun 14 09:42:17 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jun 14 09:42:53 2007
Subject: [Harbour] BETA3
In-Reply-To: <46711548.3020205@mweb.co.za>
References: <20070612230849.GA7691@localhost.localdomain>
	<46700BB8.90105@mweb.co.za>
	<20070613161931.GB576@localhost.localdomain>
	<46711548.3020205@mweb.co.za>
Message-ID: <20070614134217.GB28505@localhost.localdomain>

On Thu, 14 Jun 2007, Alex Strickland wrote:
> I can get the HEAD without problems, but I cannot get the BETA3 tag, 
> this is using Tortoise, Update Special, Get tag/branch/revision.

use 'beta3' - lower cases

best regards,
Przemek
From lkrausem at shaw.ca  Thu Jun 14 10:15:51 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Thu Jun 14 10:16:34 2007
Subject: [Harbour] BETA3
In-Reply-To: <46711586.6020006@mweb.co.za>
References: <20070612230849.GA7691@localhost.localdomain>
	<46700BB8.90105@mweb.co.za> <46701EEE.4090900@shaw.ca>
	<46711586.6020006@mweb.co.za>
Message-ID: <46714D97.9040709@shaw.ca>

Alex:

I'm afraid I don't have any other idea.  Since that worked
for the main branch, I just though it would work for the
other branches.

Alex Strickland wrote:

> Luis Krause Mantilla wrote:
>
>> Same problem I had a week ago updating from the main branch.
>>
>> Only solution was to delete changelog and do the check out again
>> (Tortoise will tell you changelog was lost, but that about it).
>
>
> I tried it, its ok on main branch, not beta3, see my other response.
>
> Thanks
> Alex
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From dbtopas at dbtopas.lt  Thu Jun 14 10:25:38 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Jun 14 10:22:13 2007
Subject: [Harbour] Re: SVN repo conversion ready (PLS READ)
In-Reply-To: <42422C03-A345-4A2D-8EE0-253A201E0F5F@syenar.hu>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<46711578.6080805@mail.udg.mx>	<86C857C0-69AA-4EB1-B504-8D809CD60A8E@syenar.hu>	<46713880.7010309@dbtopas.lt>
	<42422C03-A345-4A2D-8EE0-253A201E0F5F@syenar.hu>
Message-ID: <46714FE2.4080301@dbtopas.lt>

Szak?ts Viktor wrote:
> Maybe someone else is already uploading it.

No. File svndump.bz2 has user:group vszakats:harbour-project and access 
rights -rw-r--r--, so I can not overwrite it.

> Can you try with different target filename? (svndump1.bz2)

The same Network error after about 1 hour of upload. 104172KB/83% 
uploaded. The same error I received after I left inactive shell 
connection. It seams to be "inactivity" timeout. I'll try upload tonight 
again.


Regards,
Mindaugas
From harbour.01 at syenar.hu  Thu Jun 14 10:38:24 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jun 14 10:43:33 2007
Subject: [Harbour] Re: SVN repo conversion ready (PLS READ)
In-Reply-To: <46714FE2.4080301@dbtopas.lt>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<46711578.6080805@mail.udg.mx>	<86C857C0-69AA-4EB1-B504-8D809CD60A8E@syenar.hu>	<46713880.7010309@dbtopas.lt>
	<42422C03-A345-4A2D-8EE0-253A201E0F5F@syenar.hu>
	<46714FE2.4080301@dbtopas.lt>
Message-ID: <608286E4-72FE-47DC-B999-AAD657C09881@syenar.hu>

On 2007.06.14., at 16:25, Mindaugas Kavaliauskas wrote:

> Szak?ts Viktor wrote:
>> Maybe someone else is already uploading it.
>
> No. File svndump.bz2 has user:group vszakats:harbour-project and  
> access rights -rw-r--r--, so I can not overwrite it.

Fair enough, sorry. I've now deleted it.

>> Can you try with different target filename? (svndump1.bz2)
>
> The same Network error after about 1 hour of upload. 104172KB/83%  
> uploaded. The same error I received after I left inactive shell

Strange. I wish I could have made the dump smaller, but
the uncompressed size is 1GB and bz2 is the best option.

> connection. It seams to be "inactivity" timeout. I'll try upload  
> tonight again.

Thanks.

Brgds,
Viktor


From mbelgrano at deltain.it  Thu Jun 14 11:42:16 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Jun 14 11:44:59 2007
Subject: [Harbour] harbour can write obj?
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A606@SRV02.deltain.net>

Can harbour write obj?

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070614/d7fecd1e/attachment.html
From randy at palmasdev.com  Thu Jun 14 11:54:43 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Thu Jun 14 11:54:03 2007
Subject: [Harbour] Beta 3 - TGET.PRG
In-Reply-To: <20070613225032.GB3637@localhost.localdomain>
References: <20070613225032.GB3637@localhost.localdomain>
Message-ID: <20070614155359.41A4018E3@smtp.tor.pathcom.com>

Hi all,

My app generates the following r/t error using the new Beta 3 TGET.PRG:

Main system: #13 - Scope violation (hidden)
Sub-system: #41 - BASE
Operation: GET:ISEDITABLE

I will use the TGET.PRG from Beta 2 which seems to work fine with 
Beta 3 so this is not a problem for me.

However, if there is any information you want or any tests you want 
me to run, just ask.

Regards,
Randy.

From sscc at mweb.co.za  Thu Jun 14 12:00:49 2007
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Jun 14 12:01:27 2007
Subject: [Harbour] BETA3
In-Reply-To: <20070614134217.GB28505@localhost.localdomain>
References: <20070612230849.GA7691@localhost.localdomain>	<46700BB8.90105@mweb.co.za>	<20070613161931.GB576@localhost.localdomain>	<46711548.3020205@mweb.co.za>
	<20070614134217.GB28505@localhost.localdomain>
Message-ID: <46716631.4020104@mweb.co.za>

Przemyslaw Czerpak wrote:

> On Thu, 14 Jun 2007, Alex Strickland wrote:
>> I can get the HEAD without problems, but I cannot get the BETA3 tag, 
>> this is using Tortoise, Update Special, Get tag/branch/revision.
> 
> use 'beta3' - lower cases

Yes. I am using TortoiseCVS which has an option to fetch the tags and 
then you can choose what you want for the update (when I would choose 
the tag as presented - in lower case). This is what fails.

Regards
Alex

From harbour.01 at syenar.hu  Thu Jun 14 13:02:47 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jun 14 13:02:50 2007
Subject: [Harbour] Beta 3 - TGET.PRG
In-Reply-To: <20070614155359.41A4018E3@smtp.tor.pathcom.com>
References: <20070613225032.GB3637@localhost.localdomain>
	<20070614155359.41A4018E3@smtp.tor.pathcom.com>
Message-ID: <2CCC65B4-E923-493B-9B88-361F591A4448@syenar.hu>

Hi Randy,

:IsEditable is a Harbour internal (undocumented) method of TGET()
which was left visible. In BETA3 the scopes of these were set, some
internals has changed.

Brgds,
Viktor

On 2007.06.14., at 17:54, Randy Portnoff wrote:

> Hi all,
>
> My app generates the following r/t error using the new Beta 3  
> TGET.PRG:
>
> Main system: #13 - Scope violation (hidden)
> Sub-system: #41 - BASE
> Operation: GET:ISEDITABLE
>
> I will use the TGET.PRG from Beta 2 which seems to work fine with  
> Beta 3 so this is not a problem for me.
>
> However, if there is any information you want or any tests you want  
> me to run, just ask.
>
> Regards,
> Randy.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Thu Jun 14 13:15:30 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jun 14 13:16:08 2007
Subject: [Harbour] BETA3
In-Reply-To: <46716631.4020104@mweb.co.za>
References: <20070612230849.GA7691@localhost.localdomain>
	<46700BB8.90105@mweb.co.za>
	<20070613161931.GB576@localhost.localdomain>
	<46711548.3020205@mweb.co.za>
	<20070614134217.GB28505@localhost.localdomain>
	<46716631.4020104@mweb.co.za>
Message-ID: <20070614171530.GA29868@localhost.localdomain>

On Thu, 14 Jun 2007, Alex Strickland wrote:
> >On Thu, 14 Jun 2007, Alex Strickland wrote:
> >>I can get the HEAD without problems, but I cannot get the BETA3 tag, 
> >>this is using Tortoise, Update Special, Get tag/branch/revision.
> >use 'beta3' - lower cases
> Yes. I am using TortoiseCVS which has an option to fetch the tags and 
> then you can choose what you want for the update (when I would choose 
> the tag as presented - in lower case). This is what fails.

So create new empty repository and take beta3.
You have a problem because after SF crash your local repository
is not synced with the SF one and TortoiseCVS cannot fix it.
So dropping your current repository and downloading new one from
scratch should help.

best regards,
Przemek
From dbtopas at dbtopas.lt  Thu Jun 14 15:34:48 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Jun 14 15:30:39 2007
Subject: [Harbour] Re: SVN repo conversion ready (PLS READ)
In-Reply-To: <46714FE2.4080301@dbtopas.lt>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<46711578.6080805@mail.udg.mx>	<86C857C0-69AA-4EB1-B504-8D809CD60A8E@syenar.hu>	<46713880.7010309@dbtopas.lt>	<42422C03-A345-4A2D-8EE0-253A201E0F5F@syenar.hu>
	<46714FE2.4080301@dbtopas.lt>
Message-ID: <46719858.90203@dbtopas.lt>

> The same Network error after about 1 hour of upload. 104172KB/83% 
> uploaded. The same error I received after I left inactive shell 
> connection. It seams to be "inactivity" timeout. I'll try upload tonight 
> again.

I was unable to upload complete file. So, I've uploaded it by parts.
Filename: svndumpfull.bz2


Best regards,
Mindaugas
From elart at elart.it  Thu Jun 14 15:37:20 2007
From: elart at elart.it (elart)
Date: Thu Jun 14 15:31:17 2007
Subject: [Harbour] BETA3
In-Reply-To: <20070614171530.GA29868@localhost.localdomain>
References: <20070612230849.GA7691@localhost.localdomain>	<46700BB8.90105@mweb.co.za>	<20070613161931.GB576@localhost.localdomain>	<46711548.3020205@mweb.co.za>	<20070614134217.GB28505@localhost.localdomain>	<46716631.4020104@mweb.co.za>
	<20070614171530.GA29868@localhost.localdomain>
Message-ID: <467198F0.8010401@elart.it>

Przemyslaw Czerpak wrote:
> So create new empty repository and take beta3.
> You have a problem because after SF crash your local repository
> is not synced with the SF one and TortoiseCVS cannot fix it.
> So dropping your current repository and downloading new one from
> scratch should help.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>   
I have got the  wget http://www.syenar.hu/harbour/svndump.bz2
and i can help with an scp of the svndump.bz2 from my Linux box to
Sourceforge:
scp svndump.bz2
marcobra@shell.sourceforge.net:/home/groups/h/ha/harbour-project/svndump.bz2 



I only need write access to the requested dir my sourceforge user is
marcobra can someone give me these rights.

HTH

From elart at elart.it  Thu Jun 14 15:45:53 2007
From: elart at elart.it (elart)
Date: Thu Jun 14 15:39:51 2007
Subject: [Harbour] Beta 3 FC 6 rpm and Ubuntu 7.04 
In-Reply-To: <46711036.4020901@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<46711036.4020901@mail.udg.mx>
Message-ID: <46719AF1.7080600@elart.it>

Harbour Beta 3 rpm for Fedora core 6
and deb packages for Ubuntu 7.04 made with alien utility
are uploaded to:

ftp://upload.sourceforge.net/incoming/

HTH

From harbour.01 at syenar.hu  Thu Jun 14 17:09:54 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jun 14 17:09:57 2007
Subject: [Harbour] Re: SVN repo conversion ready (PLS READ)
In-Reply-To: <46719858.90203@dbtopas.lt>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<46711578.6080805@mail.udg.mx>	<86C857C0-69AA-4EB1-B504-8D809CD60A8E@syenar.hu>	<46713880.7010309@dbtopas.lt>	<42422C03-A345-4A2D-8EE0-253A201E0F5F@syenar.hu>
	<46714FE2.4080301@dbtopas.lt> <46719858.90203@dbtopas.lt>
Message-ID: <AC6ED9BF-4BBD-4BD3-8281-74516B4077C2@syenar.hu>

Great, thanks a lot!

Brgds,
Viktor

On 2007.06.14., at 21:34, Mindaugas Kavaliauskas wrote:

>> The same Network error after about 1 hour of upload. 104172KB/83%  
>> uploaded. The same error I received after I left inactive shell  
>> connection. It seams to be "inactivity" timeout. I'll try upload  
>> tonight again.
>
> I was unable to upload complete file. So, I've uploaded it by parts.
> Filename: svndumpfull.bz2
>
>
> Best regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lkrausem at shaw.ca  Thu Jun 14 22:25:08 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Thu Jun 14 22:25:30 2007
Subject: [Harbour] Meaningless use of expression: ':'
Message-ID: <4671F884.9070609@shaw.ca>

Hi

The following code compiles without compaints in Clipper and xHarbour,
but not with Harbour:

   aoPDGets[10]:bChange := ;
      {|| wfSrchCat( oDonDlg, aPDVars[10], aDBases[19,4],, bPmtTyp, 
oSayPmt,, .F., bPmtCond ), ;
         If( aoBtn[4]:lWhen(), ;
             aoBtn[4]:enable(), ;
             aoBtn[4]:disable ), ;
         Nil }                               // make sure we always 
return nil

It gives this warning:

Warning W0027  Meaningless use of expression: ':'

This is the .ppo

   aoPDGets[10]:bChange :=  {|| wfSrchCat( oDonDlg, aPDVars[10], 
aDBases[19,4],, bPmtTyp, oSayPmt,, .F., bPmtCond ),  If( 
aoBtn[4]:lWhen(),  aoBtn[4]:enable(),  aoBtn[4]:disable ),  Nil }

Even if I do something like this (I can just assume it doesn't like the 
Nil at the end):

   aoPDGets[10]:bChange := ;
      {|nKey,nFlags,oGet,uRetVal| uRetVal := nothing(), ;
         wfSrchCat( oDonDlg, aPDVars[10], aDBases[19,4],, bPmtTyp, 
oSayPmt,, .F., bPmtCond ), ;
         If( aoBtn[4]:lWhen(), ;
             aoBtn[4]:enable(), ;
             aoBtn[4]:disable ), ;
         uRetVal }                               // make sure we always 
return nil

[where nothing() i just
Static Function nothing()
Return nil
]

Still get the same compile warning. 

My compile switches are

/n /w /es2 /gc0

What am I missing here?

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From lkrausem at shaw.ca  Thu Jun 14 22:46:31 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Thu Jun 14 22:46:52 2007
Subject: [Harbour] Meaningless use of expression: 'Numeric'
Message-ID: <4671FD87.7070501@shaw.ca>

Hi all:

Another crazy one.  Compiles just fine with Clipper and xHarbour, but 
not Harbour:

bBlock := {|| ;
  AEval( aCodes, {|aSub| ;
     If( aSub[1], ( nLen += aSub[3], nPicked ++ ), 0 ),;
     nLen += If( nPicked > 0, 2, 0 ) } ) ;
   }

The .ppo:

bBlock := {||  AEval( aCodes, {|aSub|  If( aSub[1], ( nLen += aSub[3], 
nPicked ++ ), 0 ), nLen += If( nPicked > 0, 2, 0 ) } )  }


Same compile switches:  /n /w /es2 /gc0

[The actual code is much more complex than the above, but I was able
to reduce it to that]

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From lkrausem at shaw.ca  Thu Jun 14 22:56:02 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Thu Jun 14 22:56:56 2007
Subject: [Harbour] Warning W0027  Meaningless use of expression: 'Logical'
Message-ID: <4671FFC2.20200@shaw.ca>

Hi.... again :-)

More compile warnings that didn't happen before and compile just w/o
any warning with Clipper and xHarbour:

If( ! aVarFld[2,1], ( aoGets[10]:hide(), aVarFld[2,2]:hide(), .F. ), .F. )

Gives warnings times two:

Warning W0027  Meaningless use of expression: 'Logical'
Warning W0027  Meaningless use of expression: 'Logical'

The .ppo is identical

If( ! aVarFld[2,1], ( aoGets[10]:hide(), aVarFld[2,2]:hide(), .F. ), .F. )

Thanks!

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From druzus at priv.onet.pl  Fri Jun 15 00:09:44 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun 15 00:10:21 2007
Subject: [Harbour] Meaningless use of expression: ':'
In-Reply-To: <4671F884.9070609@shaw.ca>
References: <4671F884.9070609@shaw.ca>
Message-ID: <20070615040944.GA10374@localhost.localdomain>

On Thu, 14 Jun 2007, Luis Krause Mantilla wrote:
> Hi
> The following code compiles without compaints in Clipper and xHarbour,
> but not with Harbour:
>   aoPDGets[10]:bChange := ;
>      {|| wfSrchCat( oDonDlg, aPDVars[10], aDBases[19,4],, bPmtTyp, 
> oSayPmt,, .F., bPmtCond ), ;
>         If( aoBtn[4]:lWhen(), ;
>             aoBtn[4]:enable(), ;
>             aoBtn[4]:disable ), ;
>         Nil }                               // make sure we always 
> return nil
> It gives this warning:
> Warning W0027  Meaningless use of expression: ':'
> What am I missing here?

When you do not use () then you suggest the compiler that you are asking
for object variable not an object method, f.e.
    o:x++
is accpetable by Clipper and Harbour but
    o:x()++
not. xHarbour does not respect it at all.
after reduction your example looks like:

    x := {|| iif( o:lWhen(), o:enable(), o:disable ), NIL }

and compiler gives perfect warning message because you are callinbg
o:disable and you are ignoring the results. If o:disable is not simple
data message then please inform compiler about it and use: o:disable(),
f.e.:
    x := {|| iif( o:lWhen(), o:enable(), o:disable() ), NIL }

best regards,
Przemek
From druzus at priv.onet.pl  Fri Jun 15 00:18:14 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun 15 00:18:51 2007
Subject: [Harbour] Meaningless use of expression: 'Numeric'
In-Reply-To: <4671FD87.7070501@shaw.ca>
References: <4671FD87.7070501@shaw.ca>
Message-ID: <20070615041814.GB10374@localhost.localdomain>

On Thu, 14 Jun 2007, Luis Krause Mantilla wrote:
> Hi all:
> Another crazy one.  Compiles just fine with Clipper and xHarbour, but 
> not Harbour:
> bBlock := {|| ;
>  AEval( aCodes, {|aSub| ;
>     If( aSub[1], ( nLen += aSub[3], nPicked ++ ), 0 ),;
>     nLen += If( nPicked > 0, 2, 0 ) } ) ;
>   }

The only one crazy think above is your code and compiler nicely inform
you about it. After reduction you example looks like:

    x := {|v| if( v[1], v[2]++, 0 ), v[3]++ }

and compiler inform you that first 0 in example above is absolutely
redundant code and can be safely replaced by:

    x := {|v| if( v[1], v[2]++, ), v[3]++ }

It's not necessary to generate code to PUSH 0 on HVM stack and then POP it.
So please clean it - you will have smaller and faster final code.

best regards,
Przemek
From druzus at priv.onet.pl  Fri Jun 15 00:36:59 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun 15 00:37:34 2007
Subject: [Harbour] Warning W0027 Meaningless use of expression: 'Logical'
In-Reply-To: <4671FFC2.20200@shaw.ca>
References: <4671FFC2.20200@shaw.ca>
Message-ID: <20070615043659.GC10374@localhost.localdomain>

On Thu, 14 Jun 2007, Luis Krause Mantilla wrote:
> Hi.... again :-)
> More compile warnings that didn't happen before and compile just w/o
> any warning with Clipper and xHarbour:
> If( ! aVarFld[2,1], ( aoGets[10]:hide(), aVarFld[2,2]:hide(), .F. ), .F. )
> Gives warnings times two:
> Warning W0027  Meaningless use of expression: 'Logical'
> Warning W0027  Meaningless use of expression: 'Logical'

reduced to:
    iif( x, ( o:hide(), o:hide(), .F. ), .F. )
and you have perfect warning message because neither first .F. nor second
is assigned. Both are ignored so it' not necessary to push them on HVM stack
and then POP (compare -gc2 output for Harbour and xHarbour in the above
code). Please note that when you make:
    y := iif( x, ( o:hide(), o:hide(), .F. ), .F. )
then you have no warning message. Your code can be reduced to:
    iif( x, ( o:hide(), o:hide() ), )

and in such case you do not have warning message too. You can also find
that Harbour for both versions generates the same PCODE (it optimizes
PUSH/POP during compilation) so the warning message inform you that
sth had been stripped from you code.

All these warning messages can help to locate typos in user code and
inform you that you have some code which has no effect (Meaningless use
of ...) They can be disabled but I'm finding them as very useful and they
allowed me to clean my old code. You can also use Harbour to locate
places which can be cleaned to make xHarbour/Clipper binaries faster
because such constructions are not detect and then optimized by these
compilers ;-)

best regards,
Przemek
From alex at belacy.belgorod.su  Fri Jun 15 01:59:30 2007
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Fri Jun 15 02:02:41 2007
Subject: [Harbour] Beta3 release
Message-ID: <104537610.20070615095930@belacy.belgorod.su>

Hello,

 I'm here now and will start the release process.

 The binaries-ubuntu package has been created and *.deb files,
 uploaded by elart, are accessible now via the SF download page.

 There aren't any other Harbour files on ftp, though.
 Lorenzo, David Macias, could you re-upload the fc7 and os2 binaries ?

-- 
Regards,
 Alexander
http://kresin.belgorod.su


From alex at belacy.belgorod.su  Fri Jun 15 03:04:17 2007
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Fri Jun 15 03:05:51 2007
Subject: [Harbour] Re:  Beta3 release
In-Reply-To: <104537610.20070615095930@belacy.belgorod.su>
References: <104537610.20070615095930@belacy.belgorod.su>
Message-ID: <908324363.20070615110417@belacy.belgorod.su>

 The following files are accessible now via the SF download page:
 
 beta3 source packages:
    harbour-0.99.3.src.zip
    harbour-0.99.3.src.tar.gz

 beta3 win32 borland C binary package:
    harbour-0.99.3.bin.w32.bcc32.zip

-- 
Regards,
 Alexander
http://kresin.belgorod.su


From soporte at dsgsoftware.com  Fri Jun 15 03:16:00 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Fri Jun 15 03:16:45 2007
Subject: [Harbour] Meaningless use of expression: ':'
References: <4671F884.9070609@shaw.ca>
Message-ID: <002601c7af1d$0e567d10$6c00000a@PcJuanxp>

Luis,

Perhaps aoBtn[4]:disable has to be aoBtn[4]:disable() (parentheses).

Best Regards
Juan

----- Original Message ----- 
From: "Luis Krause Mantilla" <lkrausem@shaw.ca>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Friday, June 15, 2007 4:25 AM
Subject: [Harbour] Meaningless use of expression: ':'


> Hi
> 
> The following code compiles without compaints in Clipper and xHarbour,
> but not with Harbour:
> 
>   aoPDGets[10]:bChange := ;
>      {|| wfSrchCat( oDonDlg, aPDVars[10], aDBases[19,4],, bPmtTyp, 
> oSayPmt,, .F., bPmtCond ), ;
>         If( aoBtn[4]:lWhen(), ;
>             aoBtn[4]:enable(), ;
>             aoBtn[4]:disable ), ;
>         Nil }                               // make sure we always 
> return nil
> 
> It gives this warning:
> 
> Warning W0027  Meaningless use of expression: ':'
> 
> This is the .ppo
> 
>   aoPDGets[10]:bChange :=  {|| wfSrchCat( oDonDlg, aPDVars[10], 
> aDBases[19,4],, bPmtTyp, oSayPmt,, .F., bPmtCond ),  If( 
> aoBtn[4]:lWhen(),  aoBtn[4]:enable(),  aoBtn[4]:disable ),  Nil }
> 
> Even if I do something like this (I can just assume it doesn't like the 
> Nil at the end):
> 
>   aoPDGets[10]:bChange := ;
>      {|nKey,nFlags,oGet,uRetVal| uRetVal := nothing(), ;
>         wfSrchCat( oDonDlg, aPDVars[10], aDBases[19,4],, bPmtTyp, 
> oSayPmt,, .F., bPmtCond ), ;
>         If( aoBtn[4]:lWhen(), ;
>             aoBtn[4]:enable(), ;
>             aoBtn[4]:disable ), ;
>         uRetVal }                               // make sure we always 
> return nil
> 
> [where nothing() i just
> Static Function nothing()
> Return nil
> ]
> 
> Still get the same compile warning. 
> 
> My compile switches are
> 
> /n /w /es2 /gc0
> 
> What am I missing here?
> 
> -- 
> Luis Krause Mantilla
> lkrausem at shaw dot ca
> luis_krause at hotmail dot com
> "May the Source be with GNU"
> 
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
From dmacias at mail.udg.mx  Fri Jun 15 05:05:19 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Jun 15 05:05:23 2007
Subject: [Harbour] Re: Beta3 release
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <4672564F.9060802@mail.udg.mx>

 > There aren't any other Harbour files on ftp, though.
 > Lorenzo, David Macias, could you re-upload the fc7 and os2 binaries ?

Done, loaded again


Harbour Beta 3 binaries file for OS/2-eComStation uploaded to:

ftp://upload.sourceforge.net/incoming/

as harbour-0.99.3.bin-os2.gcc.zip


David Macias



From sscc at mweb.co.za  Fri Jun 15 05:34:59 2007
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Jun 15 05:35:38 2007
Subject: [Harbour] BETA3
In-Reply-To: <20070614171530.GA29868@localhost.localdomain>
References: <20070612230849.GA7691@localhost.localdomain>	<46700BB8.90105@mweb.co.za>	<20070613161931.GB576@localhost.localdomain>	<46711548.3020205@mweb.co.za>	<20070614134217.GB28505@localhost.localdomain>	<46716631.4020104@mweb.co.za>
	<20070614171530.GA29868@localhost.localdomain>
Message-ID: <46725D43.4090608@mweb.co.za>

Przemyslaw Czerpak wrote:

> So create new empty repository and take beta3.
> You have a problem because after SF crash your local repository
> is not synced with the SF one and TortoiseCVS cannot fix it.
> So dropping your current repository and downloading new one from
> scratch should help.

I have downloaded a new repository, but the problem persists.

Really, for me, this is not a big issue, unless someone is desperate for 
  an MSVC binary beta3.

Regards
Alex

From lorenzo.fiorini at gmail.com  Fri Jun 15 05:40:00 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jun 15 05:40:03 2007
Subject: [Harbour] Beta3 release
In-Reply-To: <104537610.20070615095930@belacy.belgorod.su>
References: <104537610.20070615095930@belacy.belgorod.su>
Message-ID: <9257026e0706150240h40eb8accw18253764c27aa7f0@mail.gmail.com>

On 6/15/07, Alexander S.Kresin <alex@belacy.belgorod.su> wrote:

>  There aren't any other Harbour files on ftp, though.
>  Lorenzo, David Macias, could you re-upload the fc7 and os2 binaries ?

fc7 binaries uploaded

best regards,
Lorenzo
From sscc at mweb.co.za  Fri Jun 15 05:41:24 2007
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Jun 15 05:41:59 2007
Subject: [Harbour] Error BASE/44
In-Reply-To: <20070613155046.GA576@localhost.localdomain>
References: <466FE30B.90704@shaw.ca>	<20070613134002.GD13278@localhost.localdomain>	<467002B0.3070100@shaw.ca>
	<20070613155046.GA576@localhost.localdomain>
Message-ID: <46725EC4.90202@mweb.co.za>

Przemyslaw Czerpak wrote:

> NIL is not a CODEBLOCK type. Such operation is forbidden.
> It's intentional. In the past we agreed that if we want to have in
> the future compile time optimization based on typed variables then
> we have to strictly respect declarations.

It is somtimes very useful to have NIL values. Can you tell me why 
having strong typing excludes the possibility?

Regards
Alex

From alex at belacy.belgorod.su  Fri Jun 15 05:54:26 2007
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Fri Jun 15 05:58:26 2007
Subject: [Harbour] Re: Beta3 release
In-Reply-To: <4672564F.9060802@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<4672564F.9060802@mail.udg.mx>
Message-ID: <193751774.20070615135426@belacy.belgorod.su>

Friday, June 15, 2007, 1:05:19 PM, David Arturo Macias Corona <dmacias@mail.udg.mx> wrote:

DAMC>  > There aren't any other Harbour files on ftp, though.
DAMC>  > Lorenzo, David Macias, could you re-upload the fc7 and os2 binaries ?

DAMC> Done, loaded again


DAMC> Harbour Beta 3 binaries file for OS/2-eComStation uploaded to:

DAMC> ftp://upload.sourceforge.net/incoming/

DAMC> as harbour-0.99.3.bin-os2.gcc.zip

 Thanks, now added to the SF download page.

-- 
Regards,
 Alexander
http://kresin.belgorod.su


From alex at belacy.belgorod.su  Fri Jun 15 05:55:51 2007
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Fri Jun 15 05:58:29 2007
Subject: [Harbour] Re: Beta3 release
In-Reply-To: <9257026e0706150240h40eb8accw18253764c27aa7f0@mail.gmail.com>
References: <104537610.20070615095930@belacy.belgorod.su>
	<9257026e0706150240h40eb8accw18253764c27aa7f0@mail.gmail.com>
Message-ID: <33836994.20070615135551@belacy.belgorod.su>

Friday, June 15, 2007, 1:40:00 PM, Lorenzo Fiorini <lorenzo.fiorini@gmail.com> wrote:

LF> On 6/15/07, Alexander S.Kresin <alex@belacy.belgorod.su> wrote:

>>  There aren't any other Harbour files on ftp, though.
>>  Lorenzo, David Macias, could you re-upload the fc7 and os2 binaries ?

LF> fc7 binaries uploaded

Thanks, now added to the SF download page.

-- 
Regards,
 Alexander
http://kresin.belgorod.su


From alex at belacy.belgorod.su  Fri Jun 15 06:10:41 2007
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Fri Jun 15 06:13:17 2007
Subject: [Harbour] Re: Beta3 release
In-Reply-To: <104537610.20070615095930@belacy.belgorod.su>
References: <104537610.20070615095930@belacy.belgorod.su>
Message-ID: <871727309.20070615141041@belacy.belgorod.su>

 The Harbour web page has been updated with the info about a beta3
 release.
 News item has been added to the Harbour SF page.
 

-- 
Regards,
 Alexander
http://kresin.belgorod.su


From druzus at priv.onet.pl  Fri Jun 15 06:20:12 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun 15 06:20:48 2007
Subject: [Harbour] Error BASE/44
In-Reply-To: <46725EC4.90202@mweb.co.za>
References: <466FE30B.90704@shaw.ca>
	<20070613134002.GD13278@localhost.localdomain>
	<467002B0.3070100@shaw.ca>
	<20070613155046.GA576@localhost.localdomain>
	<46725EC4.90202@mweb.co.za>
Message-ID: <20070615102012.GA12092@localhost.localdomain>

On Fri, 15 Jun 2007, Alex Strickland wrote:
> >NIL is not a CODEBLOCK type. Such operation is forbidden.
> >It's intentional. In the past we agreed that if we want to have in
> >the future compile time optimization based on typed variables then
> >we have to strictly respect declarations.
> It is somtimes very useful to have NIL values.

So you should not use AS CODEBLOCK for such values but AS USUAL
or maybe in the future suggested by Luis: AS CODEBLOCK, NIL
but I do not know yet if we can support it.

> Can you tell me why having strong typing excludes the possibility?

Strong typing should force types declared by programmer.
We can break it but in such case why we should have strong typing?
To make .prg code longer ;-)
The second thing is compile time optimization if you want to have
sth more then compile time warning generator.
Compiler having information about strict variable type can generate
different code, optimized for such type but it's necessary to be
sure that variable has such exact type not sth different like NIL,
f.e. in -gc3 output for:

    LOCAL x, y AS INTEGER
    FOR x := 1 to 1000
       y += aVal[ x ]
    NEXT

we can use C level INT values instead of HB_ITEMs allocated on
HVM stack what should give very nice speed improvement.


best regards,
Przemek
From i at kevincarmody.com  Fri Jun 15 07:28:46 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Fri Jun 15 07:28:34 2007
Subject: [Harbour] Meaningless use of expression: ':'
In-Reply-To: <20070615040944.GA10374@localhost.localdomain>
References: <4671F884.9070609@shaw.ca>
	<20070615040944.GA10374@localhost.localdomain>
Message-ID: <467277EE.4020602@kevincarmody.com>

Przemyslaw Czerpak wrote:
> On Thu, 14 Jun 2007, Luis Krause Mantilla wrote:
>   
>> Hi
>> The following code compiles without compaints in Clipper and xHarbour,
>> but not with Harbour:
>>   aoPDGets[10]:bChange := ;
>>      {|| wfSrchCat( oDonDlg, aPDVars[10], aDBases[19,4],, bPmtTyp, 
>> oSayPmt,, .F., bPmtCond ), ;
>>         If( aoBtn[4]:lWhen(), ;
>>             aoBtn[4]:enable(), ;
>>             aoBtn[4]:disable ), ;
>>         Nil }                               // make sure we always 
>> return nil
>> It gives this warning:
>> Warning W0027  Meaningless use of expression: ':'
>> What am I missing here?
>>     
>
> When you do not use () then you suggest the compiler that you are asking
> for object variable not an object method, f.e.
>     o:x++
> is accpetable by Clipper and Harbour but
>     o:x()++
> not. xHarbour does not respect it at all.
> after reduction your example looks like:
>
>     x := {|| iif( o:lWhen(), o:enable(), o:disable ), NIL }
>
> and compiler gives perfect warning message because you are callinbg
> o:disable and you are ignoring the results. If o:disable is not simple
> data message then please inform compiler about it and use: o:disable(),
> f.e.:
>     x := {|| iif( o:lWhen(), o:enable(), o:disable() ), NIL }
>
>
>   

Przemyslaw Czerpak wrote:
> On Thu, 14 Jun 2007, Luis Krause Mantilla wrote:
>   
>> Hi all:
>> Another crazy one.  Compiles just fine with Clipper and xHarbour, but 
>> not Harbour:
>> bBlock := {|| ;
>>  AEval( aCodes, {|aSub| ;
>>     If( aSub[1], ( nLen += aSub[3], nPicked ++ ), 0 ),;
>>     nLen += If( nPicked > 0, 2, 0 ) } ) ;
>>   }
>>     
>
> The only one crazy think above is your code and compiler nicely inform
> you about it. After reduction you example looks like:
>
>     x := {|v| if( v[1], v[2]++, 0 ), v[3]++ }
>
> and compiler inform you that first 0 in example above is absolutely
> redundant code and can be safely replaced by:
>
>     x := {|v| if( v[1], v[2]++, ), v[3]++ }
>
> It's not necessary to generate code to PUSH 0 on HVM stack and then POP it.
> So please clean it - you will have smaller and faster final code.
>   



Przemyslaw Czerpak wrote:
> On Thu, 14 Jun 2007, Luis Krause Mantilla wrote:
>   
>> Hi.... again :-)
>> More compile warnings that didn't happen before and compile just w/o
>> any warning with Clipper and xHarbour:
>> If( ! aVarFld[2,1], ( aoGets[10]:hide(), aVarFld[2,2]:hide(), .F. ), .F. )
>> Gives warnings times two:
>> Warning W0027  Meaningless use of expression: 'Logical'
>> Warning W0027  Meaningless use of expression: 'Logical'
>>     
>
> reduced to:
>     iif( x, ( o:hide(), o:hide(), .F. ), .F. )
> and you have perfect warning message because neither first .F. nor second
> is assigned. Both are ignored so it' not necessary to push them on HVM stack
> and then POP (compare -gc2 output for Harbour and xHarbour in the above
> code). Please note that when you make:
>     y := iif( x, ( o:hide(), o:hide(), .F. ), .F. )
> then you have no warning message. Your code can be reduced to:
>     iif( x, ( o:hide(), o:hide() ), )
>
> and in such case you do not have warning message too. You can also find
> that Harbour for both versions generates the same PCODE (it optimizes
> PUSH/POP during compilation) so the warning message inform you that
> sth had been stripped from you code.
>
> All these warning messages can help to locate typos in user code and
> inform you that you have some code which has no effect (Meaningless use
> of ...) They can be disabled but I'm finding them as very useful and they
> allowed me to clean my old code. You can also use Harbour to locate
> places which can be cleaned to make xHarbour/Clipper binaries faster
> because such constructions are not detect and then optimized by these
> compilers ;-)

Przemek,

I have seen these error messages too, and at first I was very annoyed by 
them, because I am a very experienced Clipper developer and could not 
figure out what was wrong.  Now that I see your explanations, I see that 
there is some logic to them.  But I think the warning messages need to 
be changed to improve understanding. 

The above lines the user wrote are non-optimized by criteria you have 
decided.  Unfortunately, these criteria are not obvious, and 
non-optimized lines are different from meaningless lines.  Meaningless 
is something like "a b * $" - the syntax is wrong.  So I would suggest 
that the error message say "non-optimized" instead of "meaningless".

Since these are optimization issues and not syntax issues, I think that 
a separate warning level or type should be established for optimization, 
distinct from syntax errors.  Compiling with warnings is important for 
detecting things like undefined variables, but optimization really does 
not belong in this category.

The optimizations you are describing are far from obvious.  Writing

x := {|v| if( v[1], v[2]++, 0 ), v[3]++ }

instead of 

x := {|v| if( v[1], v[2]++, ), v[3]++ }

is IMO not crazy but just good programming style.  Besides, this type of 
optimization can be performed automatically by the compiler, so why 
bother the programmer about it?  I suggest that warnings be eliminated 
when optimization can be automated.  In the case of ":", the compiler 
cannot optimize automatically, but the warning should be clearer.

I think what you have done with these optimization warnings is useful, 
but you need better communication with the user.  I suggest that you 
document these optimization warnings somewhere - those that cannot be 
automatically optimized - and have the error message say something like 
"Optimization issue, see Optimize.chm."

Kevin




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070615/b9e7091a/attachment.html
From sscc at mweb.co.za  Fri Jun 15 07:34:07 2007
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Jun 15 07:34:20 2007
Subject: [Harbour] Meaningless use of expression: ':'
In-Reply-To: <467277EE.4020602@kevincarmody.com>
References: <4671F884.9070609@shaw.ca>	<20070615040944.GA10374@localhost.localdomain>
	<467277EE.4020602@kevincarmody.com>
Message-ID: <4672792F.20306@mweb.co.za>

Kevin Carmody wrote:
> Since these are optimization issues and not syntax issues, I think that 
> a separate warning level or type should be established for optimization, 
> distinct from syntax errors.  Compiling with warnings is important for 
> detecting things like undefined variables, but optimization really does 
> not belong in this category.
> 
> The optimizations you are describing are far from obvious.  Writing
> 
> x := {|v| if( v[1], v[2]++, 0 ), v[3]++ }
> 
> instead of 
> 
> x := {|v| if( v[1], v[2]++, ), v[3]++ }
> 
> is IMO not crazy but just good programming style.  Besides, this type of 

While I agree with most of what you say, why do you think it is good 
programming style?

Regards
Alex

From druzus at priv.onet.pl  Fri Jun 15 08:04:49 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun 15 08:05:25 2007
Subject: [Harbour] Meaningless use of expression: ':'
In-Reply-To: <467277EE.4020602@kevincarmody.com>
References: <4671F884.9070609@shaw.ca>
	<20070615040944.GA10374@localhost.localdomain>
	<467277EE.4020602@kevincarmody.com>
Message-ID: <20070615120449.GA19960@localhost.localdomain>

On Fri, 15 Jun 2007, Kevin Carmody wrote:
> I have seen these error messages too, and at first I was very annoyed by 
> them, because I am a very experienced Clipper developer and could not 
> figure out what was wrong.  Now that I see your explanations, I see that 
> there is some logic to them.  But I think the warning messages need to 
> be changed to improve understanding. 
> 
> The above lines the user wrote are non-optimized by criteria you have 
> decided.  Unfortunately, these criteria are not obvious, and 
> non-optimized lines are different from meaningless lines.  Meaningless 
> is something like "a b * $" - the syntax is wrong.  So I would suggest 
> that the error message say "non-optimized" instead of "meaningless".

I do not agree. It has nothing to optimization at all.
Meaningles means exactly ewhat it means and and also other compiler has
such warning message. F.e.:
    x := (1,.t.,NIL)
means that you have "meaningless" 1 and .t. in your code.

> Since these are optimization issues and not syntax issues, I think that 
> a separate warning level or type should be established for optimization, 
> distinct from syntax errors.  Compiling with warnings is important for 
> detecting things like undefined variables, but optimization really does 
> not belong in this category.

Again it's not optimization problem. Such code can be optimized or not
it doesn't matter.

> The optimizations you are describing are far from obvious.  Writing
> x := {|v| if( v[1], v[2]++, 0 ), v[3]++ }
> instead of 
> x := {|v| if( v[1], v[2]++, ), v[3]++ }
> 
> is IMO not crazy but just good programming style.

I do not see anything good in programming style in the above code but
things like "programming style" are not precisely defined terms.
The warning messages should help to locate typos and bugs in the code
and IMHO the above warnings greatly helps. If not and I'm wrong then
we can disable them or move them to differ warning level (f.e. -w2)

> Besides, this type of 
> optimization can be performed automatically by the compiler, so why 
> bother the programmer about it?  I suggest that warnings be eliminated 
> when optimization can be automated.  In the case of ":", the compiler 
> cannot optimize automatically, but the warning should be clearer.

Sorry but I do not understand why you are talking about optimization.
The warning message informs that programmer created some strange code
which has no effect - is meaningless. Why? It's a big chance it's was
a typo, f.e. instead of
    x := (1,.t.,NIL)
should be:
    x := f(1,.t.,NIL)
or:
    iif( somefunc(), 1, 2 )
was dropped unintentionally during cut and past and was left in the
code or sth like that. Warnings help programmer to clean the code.

> I think what you have done with these optimization warnings is useful, 
> but you need better communication with the user.  I suggest that you 
> document these optimization warnings somewhere - those that cannot be 
> automatically optimized - and have the error message say something like 
> "Optimization issue, see Optimize.chm."

I think that you missed one important issue. The above warning message
has been existing in [x]Harbour for years. It existed before the xHarbour
fork so also xHarbour inherited it. Please compile this code by Harbour
and xHarbour:
    proc main()
    local x
    x:=(1,.t.,NIL,0)
    return

Both compiler will show:
    Compiling 't7.prg'...
    t7.prg(3) Warning W0027  Meaningless use of expression: 'Numeric'
    t7.prg(3) Warning W0027  Meaningless use of expression: 'Logical'
    t7.prg(3) Warning W0027  Meaningless use of expression: 'NIL'

The only one difference is that Harbour makes a little bit deeper
analyzes and can detect such situation also in some other cases, f.e.
for IIF() used as statement and xHarbour cannot do that yet but in
both compilers the analyzed area is systematically growing up and
address new code. For me it's very good, f.e. I found typos in my
very old Clipper code seeing this warnings.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Jun 15 09:18:20 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jun 15 09:18:20 2007
Subject: [Harbour] Meaningless use of expression: ':'
In-Reply-To: <467277EE.4020602@kevincarmody.com>
References: <4671F884.9070609@shaw.ca>
	<20070615040944.GA10374@localhost.localdomain>
	<467277EE.4020602@kevincarmody.com>
Message-ID: <89339BDA-2A9C-476E-B666-9B45CBC9F4B7@syenar.hu>

> I have seen these error messages too, and at first I was very  
> annoyed by them, because I am a very experienced Clipper developer  
> and could not figure out what was wrong.  Now that I see your  
> explanations, I see that there is some logic to them.  But I think  
> the warning messages need to be changed to improve understanding.
>
> The above lines the user wrote are non-optimized by criteria you  
> have decided.  Unfortunately, these criteria are not obvious, and  
> non-optimized lines are different from meaningless lines.   
> Meaningless is something like "a b * $" - the syntax is wrong.  So  
> I would suggest that the error message say "non-optimized" instead  
> of "meaningless".

IMO those were results of minor programming typos, otherwise very hard
to spot and very easy to make by anyone. Any help detecting them does
only good for the source code quality. Good source code quality enforced
by the compiler is always a good thing.

If someone doesn't want to see these, the warnings can be left off.

> Since these are optimization issues and not syntax issues, I think  
> that a separate warning level or type should be established for  
> optimization, distinct from syntax errors.  Compiling with warnings  
> is important for detecting things like undefined variables, but  
> optimization really does not belong in this category.
>
> The optimizations you are describing are far from obvious.  Writing
> x := {|v| if( v[1], v[2]++, 0 ), v[3]++ } instead of x := {|v| if( v 
> [1], v[2]++, ), v[3]++ }is IMO not crazy but just good programming  
> style.  Besides, this type of optimization can be performed  
> automatically by the compiler, so why bother the programmer about  
> it?  I suggest that warnings be eliminated when optimization can be  
> automated.  In the case of ":", the compiler cannot optimize  
> automatically, but the warning should be clearer.
>
> I think what you have done with these optimization warnings is  
> useful, but you need better communication with the user.  I suggest  
> that you document these optimization warnings somewhere - those  
> that cannot be automatically optimized - and have the error message  
> say something like "Optimization issue, see Optimize.chm."

I agree that we could add good examples, common code constructs,
common typos, explanations and hints for fixes, but the warning itself
is very useful to create better and more efficient code.

I think this is a documentation issue.

Brgds,
Viktor

From randy at palmasdev.com  Fri Jun 15 09:21:35 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Fri Jun 15 09:20:54 2007
Subject: [Harbour] How to multi-thread in Harbour
In-Reply-To: <20070615120449.GA19960@localhost.localdomain>
References: <4671F884.9070609@shaw.ca>
	<20070615040944.GA10374@localhost.localdomain>
	<467277EE.4020602@kevincarmody.com>
	<20070615120449.GA19960@localhost.localdomain>
Message-ID: <20070615132051.F3F68192E@smtp.tor.pathcom.com>

Hi all,

Are there any examples and/or docs showing how to use multiple thread 
in Harbour?

TIA.

Regards,
Randy.

From druzus at priv.onet.pl  Fri Jun 15 09:41:08 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun 15 09:41:44 2007
Subject: [Harbour] How to multi-thread in Harbour
In-Reply-To: <20070615132051.F3F68192E@smtp.tor.pathcom.com>
References: <4671F884.9070609@shaw.ca>
	<20070615040944.GA10374@localhost.localdomain>
	<467277EE.4020602@kevincarmody.com>
	<20070615120449.GA19960@localhost.localdomain>
	<20070615132051.F3F68192E@smtp.tor.pathcom.com>
Message-ID: <20070615134108.GA20904@localhost.localdomain>

On Fri, 15 Jun 2007, Randy Portnoff wrote:
> Hi all,
> Are there any examples and/or docs showing how to use multiple thread 
> in Harbour?

Harbour does not support MT mode yet. Now about 65% of code is cleaned
and MT safe (f.e. compiler and macro compiler are fully MT safe and can
be used as a part of other long working applications). The rest of code
which have to be changed I already marked in my TODO list I'm systematically
updating it in spare time. I plan to finish MT support to the end of this
year though due to some other modifications it's possible that I'll change
the priority so it's not a deadline for me. Of course the MT mode like in
xHarbour can be added in a day or two but IMHO it's only waste of time as
long as all internal structure will not be MT safe.

best regards,
Przemek
From randy at palmasdev.com  Fri Jun 15 09:52:51 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Fri Jun 15 09:52:10 2007
Subject: [Harbour] How to multi-thread in Harbour
In-Reply-To: <20070615134108.GA20904@localhost.localdomain>
References: <4671F884.9070609@shaw.ca>
	<20070615040944.GA10374@localhost.localdomain>
	<467277EE.4020602@kevincarmody.com>
	<20070615120449.GA19960@localhost.localdomain>
	<20070615132051.F3F68192E@smtp.tor.pathcom.com>
	<20070615134108.GA20904@localhost.localdomain>
Message-ID: <20070615135207.4DFA91B31@smtp.tor.pathcom.com>

Hi Przemek,

Ok... However, I use Mediator (for SQL RDD) and it uses multi-threads 
within Harbour (in fact it did this as far back as build 43) - When I 
run my app and check the task manager, it shows that it is using 3 
threads. Do you know how this is possible?

TIA.

Regards,
Randy.

At 09:41 AM 6/15/2007, you wrote:
>On Fri, 15 Jun 2007, Randy Portnoff wrote:
> > Hi all,
> > Are there any examples and/or docs showing how to use multiple thread
> > in Harbour?
>
>Harbour does not support MT mode yet. Now about 65% of code is cleaned
>and MT safe (f.e. compiler and macro compiler are fully MT safe and can
>be used as a part of other long working applications). The rest of code
>which have to be changed I already marked in my TODO list I'm systematically
>updating it in spare time. I plan to finish MT support to the end of this
>year though due to some other modifications it's possible that I'll change
>the priority so it's not a deadline for me. Of course the MT mode like in
>xHarbour can be added in a day or two but IMHO it's only waste of time as
>long as all internal structure will not be MT safe.
>
>best regards,
>Przemek
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Fri Jun 15 10:03:22 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun 15 10:04:01 2007
Subject: [Harbour] How to multi-thread in Harbour
In-Reply-To: <20070615135207.4DFA91B31@smtp.tor.pathcom.com>
References: <4671F884.9070609@shaw.ca>
	<20070615040944.GA10374@localhost.localdomain>
	<467277EE.4020602@kevincarmody.com>
	<20070615120449.GA19960@localhost.localdomain>
	<20070615132051.F3F68192E@smtp.tor.pathcom.com>
	<20070615134108.GA20904@localhost.localdomain>
	<20070615135207.4DFA91B31@smtp.tor.pathcom.com>
Message-ID: <20070615140322.GA21234@localhost.localdomain>

On Fri, 15 Jun 2007, Randy Portnoff wrote:
> Hi Przemek,
> Ok... However, I use Mediator (for SQL RDD) and it uses multi-threads 
> within Harbour (in fact it did this as far back as build 43) - When I 
> run my app and check the task manager, it shows that it is using 3 
> threads. Do you know how this is possible?

You mixed two different things:
1. Support for MT mode in Harbour compiler so programmer can create own
   threads using .prg code only
2. Using threads in Harbour programs at C level.

The second one does not need any special support from Harbour and it's
not Harbour problem at all. If C programmer make it well then it will work
and if he made some mistake then it won't - in both cases it's out of our
control. If This code needs some additional libraries or C compiler/linker
switches then such information should be included in its documentation.

best regards,
Przemek
From randy at palmasdev.com  Fri Jun 15 10:08:24 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Fri Jun 15 10:07:42 2007
Subject: [Harbour] How to multi-thread in Harbour
In-Reply-To: <20070615140322.GA21234@localhost.localdomain>
References: <4671F884.9070609@shaw.ca>
	<20070615040944.GA10374@localhost.localdomain>
	<467277EE.4020602@kevincarmody.com>
	<20070615120449.GA19960@localhost.localdomain>
	<20070615132051.F3F68192E@smtp.tor.pathcom.com>
	<20070615134108.GA20904@localhost.localdomain>
	<20070615135207.4DFA91B31@smtp.tor.pathcom.com>
	<20070615140322.GA21234@localhost.localdomain>
Message-ID: <20070615140739.B29831BB6@smtp.tor.pathcom.com>

I understand - Thanks!

At 10:03 AM 6/15/2007, you wrote:
>On Fri, 15 Jun 2007, Randy Portnoff wrote:
> > Hi Przemek,
> > Ok... However, I use Mediator (for SQL RDD) and it uses multi-threads
> > within Harbour (in fact it did this as far back as build 43) - When I
> > run my app and check the task manager, it shows that it is using 3
> > threads. Do you know how this is possible?
>
>You mixed two different things:
>1. Support for MT mode in Harbour compiler so programmer can create own
>    threads using .prg code only
>2. Using threads in Harbour programs at C level.
>
>The second one does not need any special support from Harbour and it's
>not Harbour problem at all. If C programmer make it well then it will work
>and if he made some mistake then it won't - in both cases it's out of our
>control. If This code needs some additional libraries or C compiler/linker
>switches then such information should be included in its documentation.
>
>best regards,
>Przemek
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour

From lkrausem at shaw.ca  Fri Jun 15 11:13:14 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Fri Jun 15 11:14:22 2007
Subject: [Harbour] Meaningless use of expression: ':'
In-Reply-To: <467277EE.4020602@kevincarmody.com>
References: <4671F884.9070609@shaw.ca>
	<20070615040944.GA10374@localhost.localdomain>
	<467277EE.4020602@kevincarmody.com>
Message-ID: <4672AC8A.5050305@shaw.ca>

Kevin:

> Przemek,
>
> I have seen these error messages too, and at first I was very annoyed 
> by them, because I am a very experienced Clipper developer and could 
> not figure out what was wrong.  Now that I see your explanations, I 
> see that there is some logic to them.  But I think the warning 
> messages need to be changed to improve understanding. 

Just like you, I'm not new to this game.  At first this warnings annoyed 
me because I just
couldn't make sense of them - that's why I posted my questions here.

Once Przemek explained, everything became quite clear.  And just like 
Przemek it will
help in cleaning up very old code you might have not touched in years.

Now I really come to appreciate Przemek's efforts in making the compiler 
more
efficient and helping out weed out meaningless code.

[snip]

>
> The optimizations you are describing are far from obvious.  Writing
>
>x := {|v| if( v[1], v[2]++, 0 ), v[3]++ }
>
>instead of 
>  
>
>x := {|v| if( v[1], v[2]++, ), v[3]++ }
>
> is IMO not crazy but just good programming style.  Besides, this type 
> of optimization can be performed automatically by the compiler, so why 
> bother the programmer about it?  I suggest that warnings be eliminated 
> when optimization can be automated.  In the case of ":", the compiler 
> cannot optimize automatically, but the warning should be clearer.

I also liked the first style better, but it really makes no sense doing 
a x+=0 or just having a
0 sitting there doing nothing.

>
> I think what you have done with these optimization warnings is useful, 
> but you need better communication with the user.  I suggest that you 
> document these optimization warnings somewhere - those that cannot be 
> automatically optimized - and have the error message say something 
> like "Optimization issue, see Optimize.chm."

Docs are always the hardest part of programming....

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From i at kevincarmody.com  Fri Jun 15 13:30:36 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Fri Jun 15 13:30:22 2007
Subject: [Harbour] Meaningless use of expression: ':'
In-Reply-To: <89339BDA-2A9C-476E-B666-9B45CBC9F4B7@syenar.hu>
References: <4671F884.9070609@shaw.ca>	<20070615040944.GA10374@localhost.localdomain>	<467277EE.4020602@kevincarmody.com>
	<89339BDA-2A9C-476E-B666-9B45CBC9F4B7@syenar.hu>
Message-ID: <4672CCBC.5060501@kevincarmody.com>

Szak?ts Viktor wrote:
>> I have seen these error messages too, and at first I was very annoyed 
>> by them, because I am a very experienced Clipper developer and could 
>> not figure out what was wrong.  Now that I see your explanations, I 
>> see that there is some logic to them.  But I think the warning 
>> messages need to be changed to improve understanding.
>>
>> The above lines the user wrote are non-optimized by criteria you have 
>> decided.  Unfortunately, these criteria are not obvious, and 
>> non-optimized lines are different from meaningless lines.  
>> Meaningless is something like "a b * $" - the syntax is wrong.  So I 
>> would suggest that the error message say "non-optimized" instead of 
>> "meaningless".
>
> IMO those were results of minor programming typos, otherwise very hard
> to spot and very easy to make by anyone. Any help detecting them does
> only good for the source code quality. Good source code quality enforced
> by the compiler is always a good thing.

But the compiler should tell you accurately what it thinks is wrong.  I 
don't agree that they are typos.  If I type

x := {|v| if( v[1], v[2]++, % ), v[3]++ }

then that's a typo.  Harbour correctly reports a syntax error.  But if I 
type

x := {|v| if( v[1], v[2]++, 0 ), v[3]++ }

I don't consider that a typo, because the syntax is correct.  The 
problem is the meaning of the word "meaning", which I take to be 
equivalent to syntax.  When Harbour tells me an expression is 
meaningless, it sounds like a syntax error.   What's wrong with this 
expression is not that it's meaningless, but that the zero has no effect 
and is therefore wasted.  The wording of the message needs to be 
changed, to something like 'Unoptimized code' or 'Wasted assignment'. 

>
> If someone doesn't want to see these, the warnings can be left off.

I normally compile with warnings, because I want to know if I've failed 
to declare a variable or misspelled something.  That could lead to an 
error -- a logical error, not a Harbour error.

But failing to optimize will not make a program fail.  (The only 
exceptions might be some realtime systems, which Harbour is probably not 
a good choice for.)  Failure to optimize will only result in the program 
running more slowly.  In my experience, this is RARELY an issue with 
Clipper/Harbour programs.  Avoiding this is NOT NEARLY as important as 
avoiding errors - not even close.

When I'm developing, I want to know about undeclared variables and such 
- but I don't want to know about unoptimized code.  That's why I think 
this type of warning should be in a different class.

Kevin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070615/eefd12e9/attachment.html
From i at kevincarmody.com  Fri Jun 15 13:52:24 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Fri Jun 15 13:52:11 2007
Subject: [Harbour] Meaningless use of expression: ':'
In-Reply-To: <20070615120449.GA19960@localhost.localdomain>
References: <4671F884.9070609@shaw.ca>	<20070615040944.GA10374@localhost.localdomain>	<467277EE.4020602@kevincarmody.com>
	<20070615120449.GA19960@localhost.localdomain>
Message-ID: <4672D1D8.5080700@kevincarmody.com>

Przemyslaw Czerpak wrote:
>> The optimizations you are describing are far from obvious.  Writing
>> x := {|v| if( v[1], v[2]++, 0 ), v[3]++ }
>> instead of 
>> x := {|v| if( v[1], v[2]++, ), v[3]++ }
>>
>> is IMO not crazy but just good programming style.
>>     
>
> I do not see anything good in programming style in the above code but
> things like "programming style" are not precisely defined terms.
>   

It was not meant to be precise, just my opinion.  In my code, I do not 
like a lack of expression between "," and ")".  Just my preference.

> The warning messages should help to locate typos and bugs in the code
> and IMHO the above warnings greatly helps. If not and I'm wrong then
> we can disable them or move them to differ warning level (f.e. -w2)
>   

Thank you, I think moving them to -w2 is a good solution.

> Sorry but I do not understand why you are talking about optimization.

See your message below.

> On Thu, 14 Jun 2007, Luis Krause Mantilla wrote:
>   
>> ...   
>
> ...
> So please clean it - you will have smaller and faster final code.
>   

Don't you agree that smaller and faster code is optimization?

> The warning message informs that programmer created some strange code
> which has no effect - is meaningless. 

As I told Victor, it has to do with the meaning of "meaning".  If the 
program is able to carry out an instruction, then the instruction could 
not have been meaningless.  It may have been wasteful, or negligent, or 
in error, but not meaningless.  If it was really meaningless, the 
compiler would not have been able to determine what to do.

> I think that you missed one important issue. The above warning message
> has been existing in [x]Harbour for years. It existed before the xHarbour
> fork so also xHarbour inherited it. Please compile this code by Harbour
> and xHarbour:
>     proc main()
>     local x
>     x:=(1,.t.,NIL,0)
>     return
>
> Both compiler will show:
>     Compiling 't7.prg'...
>     t7.prg(3) Warning W0027  Meaningless use of expression: 'Numeric'
>     t7.prg(3) Warning W0027  Meaningless use of expression: 'Logical'
>     t7.prg(3) Warning W0027  Meaningless use of expression: 'NIL'
>
> The only one difference is that Harbour makes a little bit deeper
> analyzes and can detect such situation also in some other cases, f.e.
> for IIF() used as statement and xHarbour cannot do that yet but in
> both compilers the analyzed area is systematically growing up and
> address new code. For me it's very good, f.e. I found typos in my
> very old Clipper code seeing this warnings.

That's good it can find them, if you *want* to look for them.

I'm fairly new to Harbour, so I'm just encountering these things for the 
first time.  I'm sorry if you feel you are covering old ground.

Kevin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070615/e1beb362/attachment.html
From harbour.01 at syenar.hu  Fri Jun 15 21:43:30 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jun 15 21:43:30 2007
Subject: [Harbour] Meaningless use of expression: ':'
In-Reply-To: <4672CCBC.5060501@kevincarmody.com>
References: <4671F884.9070609@shaw.ca>	<20070615040944.GA10374@localhost.localdomain>	<467277EE.4020602@kevincarmody.com>
	<89339BDA-2A9C-476E-B666-9B45CBC9F4B7@syenar.hu>
	<4672CCBC.5060501@kevincarmody.com>
Message-ID: <649F71CC-A5E4-491C-AC49-43FC570B9CB9@syenar.hu>

>> IMO those were results of minor programming typos, otherwise very  
>> hard
>> to spot and very easy to make by anyone. Any help detecting them does
>> only good for the source code quality. Good source code quality  
>> enforced
>> by the compiler is always a good thing.
>
> But the compiler shohtuld tell you accurately what it thinks is  
> wrong.  I don't agree that they are typos.  If I type
>
> x := {|v| if( v[1], v[2]++, % ), v[3]++ }
>
> then that's a typo.  Harbour correctly reports a syntax error.  But  
> if I type
>
> x := {|v| if( v[1], v[2]++, 0 ), v[3]++ }
>
> I don't consider that a typo, because the syntax is correct.  The  
> problem is the meaning of the word "meaning", which I take to be  
> equivalent to syntax.  When Harbour tells me an expression is  
> meaningless, it sounds like a syntax error.   What's wrong with  
> this expression is not that it's meaningless, but that the zero has  
> no effect and is therefore wasted.  The wording of the message  
> needs to be changed, to something like 'Unoptimized code' or  
> 'Wasted assignment'.

I was thinking of the right word. "typo" was not the best choice
probably, we could call it "mistake". I hope you get the point anyway.

"obj:method" is definitely a typo or not precise coding though.
just like "x := ( 10, 6, 5 )".

As for the wording, I think the compiler uses a generic wording
for a set of possible root problems. It might be even that the compiler
cannot see the root cause of a meaningless expression, so it cannot
give a more specific warning either. Przemek could probably tell
more about this, but I'd find it more optimal to enhance the docs in
this case.

>> If someone doesn't want to see these, the warnings can be left off.
>
> I normally compile with warnings, because I want to know if I've  
> failed to declare a variable or misspelled something.  That could  
> lead to an error -- a logical error, not a Harbour error.
>
> But failing to optimize will not make a program fail.  (The only  
> exceptions might be some realtime systems, which Harbour is  
> probably not a good choice for.)  Failure to optimize will only  
> result in the program running more slowly.  In my experience, this  
> is RARELY an issue with Clipper/Harbour programs.  Avoiding this is  
> NOT NEARLY as important as avoiding errors - not even close.

Neither will an unused variable cause any harm or issue.

> When I'm developing, I want to know about undeclared variables and  
> such - but I don't want to know about unoptimized code.  That's why  
> I think this type of warning should be in a different class.

Well, that goes down to a personal preference as to who
prefers which subset of warnings as valuable and which
not. (I personally find every kind of warning valuable, and
consider everyone of them as errors, but that's just me.)
We might go with fine-tuning the possible warnings,
but I feel it would be overkill, since we're not talking about
huge numbers of undesirable or overly uncomfortable
warnings. Yet it's technically possible of course.

Still I'd think that fixing these warnings would result in
better code, and this is the best interest of programmers.
I'm also having a hard time finding a situation when someone
would _have to_ keep the code in a form which would
keep generating warnings.

Brgds,
Viktor


From e.m.giordano at emagsoftware.it  Sat Jun 16 04:04:11 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jun 16 04:04:54 2007
Subject: [Harbour] Meaningless use of expression: ':'
References: <4671F884.9070609@shaw.ca>	<20070615040944.GA10374@localhost.localdomain>	<467277EE.4020602@kevincarmody.com><89339BDA-2A9C-476E-B666-9B45CBC9F4B7@syenar.hu><4672CCBC.5060501@kevincarmody.com>
	<649F71CC-A5E4-491C-AC49-43FC570B9CB9@syenar.hu>
Message-ID: <001001c7afec$ec514440$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 16 giugno 2007 3.43
Oggetto: Re: [Harbour] Meaningless use of expression: ':'


> (I personally find every kind of warning valuable, and
> consider everyone of them as errors, but that's just me.)

Me too.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From i at kevincarmody.com  Sat Jun 16 07:13:05 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Sat Jun 16 07:12:52 2007
Subject: [Harbour] Meaningless use of expression: ':'
In-Reply-To: <649F71CC-A5E4-491C-AC49-43FC570B9CB9@syenar.hu>
References: <4671F884.9070609@shaw.ca>	<20070615040944.GA10374@localhost.localdomain>	<467277EE.4020602@kevincarmody.com>	<89339BDA-2A9C-476E-B666-9B45CBC9F4B7@syenar.hu>	<4672CCBC.5060501@kevincarmody.com>
	<649F71CC-A5E4-491C-AC49-43FC570B9CB9@syenar.hu>
Message-ID: <4673C5C1.1070009@kevincarmody.com>

Szak?ts Viktor wrote:
>>> IMO those were results of minor programming typos, otherwise very hard
>>> to spot and very easy to make by anyone. Any help detecting them does
>>> only good for the source code quality. Good source code quality 
>>> enforced
>>> by the compiler is always a good thing.
>>
>> But the compiler shohtuld tell you accurately what it thinks is 
>> wrong.  I don't agree that they are typos.  If I type
>>
>> x := {|v| if( v[1], v[2]++, % ), v[3]++ }
>>
>> then that's a typo.  Harbour correctly reports a syntax error.  But 
>> if I type
>>
>> x := {|v| if( v[1], v[2]++, 0 ), v[3]++ }
>>
>> I don't consider that a typo, because the syntax is correct.  The 
>> problem is the meaning of the word "meaning", which I take to be 
>> equivalent to syntax.  When Harbour tells me an expression is 
>> meaningless, it sounds like a syntax error.   What's wrong with this 
>> expression is not that it's meaningless, but that the zero has no 
>> effect and is therefore wasted.  The wording of the message needs to 
>> be changed, to something like 'Unoptimized code' or 'Wasted assignment'.
>
> As for the wording, I think the compiler uses a generic wording
> for a set of possible root problems. It might be even that the compiler
> cannot see the root cause of a meaningless expression, so it cannot
> give a more specific warning either. Przemek could probably tell
> more about this, but I'd find it more optimal to enhance the docs in
> this case.

Yes, thank you, it would be helpful to have better documentation.  It 
would also be helpful to use better wording in the error messages.  
Przemek's messages in this forum make it clear to me that he knows what 
the cause of the problem is but unfortunately has chosen misleading 
words to describe it.  Instead of "meaningless", the warnings should say 
"non-optimized", or "wasteful", or something similar.  This has confused 
me, and it has confused others.

>
>>> If someone doesn't want to see these, the warnings can be left off.
>>
>> I normally compile with warnings, because I want to know if I've 
>> failed to declare a variable or misspelled something.  That could 
>> lead to an error -- a logical error, not a Harbour error.
>>
>> But failing to optimize will not make a program fail.  (The only 
>> exceptions might be some realtime systems, which Harbour is probably 
>> not a good choice for.)  Failure to optimize will only result in the 
>> program running more slowly.  In my experience, this is RARELY an 
>> issue with Clipper/Harbour programs.  Avoiding this is NOT NEARLY as 
>> important as avoiding errors - not even close.
>
> Neither will an unused variable cause any harm or issue.

I agree, but I was not talking about unused variables.  I was talking 
about *undeclared* variables.  For example:

LOCAL nCount := 0
...
nCound ++

where nCound is not declared as a LOCAL or in any other way.  This is a 
typo, and it will probably make my program fail.  This is the type of 
warning that I consider of primary importance.  Optimization is strictly 
second class compared to undeclared variables.

>
>> When I'm developing, I want to know about undeclared variables and 
>> such - but I don't want to know about unoptimized code.  That's why I 
>> think this type of warning should be in a different class.
>
> Well, that goes down to a personal preference as to who
> prefers which subset of warnings as valuable and which
> not. (I personally find every kind of warning valuable, and
> consider everyone of them as errors, but that's just me.)
> We might go with fine-tuning the possible warnings,
> but I feel it would be overkill, since we're not talking about
> huge numbers of undesirable or overly uncomfortable
> warnings. Yet it's technically possible of course.

Przemek has offered to move this type of warning to -w2, which I think 
is a very good suggestion.

>
> Still I'd think that fixing these warnings would result in
> better code, and this is the best interest of programmers.

IMO these warnings are of marginal importance, because the effect of 
fixing them is only a minor improvement of performance.  They have no 
effect on the logic of the program.  So, usually, I would not want to 
bother with them.  Sometimes, I might want to, and it's nice to know 
they are available.  That's why I agree with Przemek that a good 
solution would be to move them to -w2.

> I'm also having a hard time finding a situation when someone
> would _have to_ keep the code in a form which would
> keep generating warnings.

That has never been the issue.  The issues are: (1) knowing what the 
compiler is warning you about;  and (2) finding the right context in 
which to generate the warnings.

Kevin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070616/f55f7dce/attachment-0001.html
From harbour.01 at syenar.hu  Sat Jun 16 12:55:34 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Jun 16 12:55:35 2007
Subject: [Harbour] Meaningless use of expression: ':'
In-Reply-To: <4673C5C1.1070009@kevincarmody.com>
References: <4671F884.9070609@shaw.ca>	<20070615040944.GA10374@localhost.localdomain>	<467277EE.4020602@kevincarmody.com>	<89339BDA-2A9C-476E-B666-9B45CBC9F4B7@syenar.hu>	<4672CCBC.5060501@kevincarmody.com>
	<649F71CC-A5E4-491C-AC49-43FC570B9CB9@syenar.hu>
	<4673C5C1.1070009@kevincarmody.com>
Message-ID: <B5080F15-7254-44FA-BC08-8416C5ADA9A1@syenar.hu>

> Yes, thank you, it would be helpful to have better documentation.   
> It would also be helpful to use better wording in the error  
> messages.  Przemek's messages in this forum make it clear to me  
> that he knows what the cause of the problem is but unfortunately  
> has chosen misleading words to describe it.  Instead of  
> "meaningless", the warnings should say "non-optimized", or  
> "wasteful", or something similar.  This has confused me, and it has  
> confused others.

I personally don't find "wastful" (seems pretty unusual for a
non-English speaker I think) and "non-optimized" (too specific
for this kind of error) better wordings, but we can settle on
anything we agree on. It would be good to hear other opinions
(or peek into a C compiler for a clue), too.

If we want to change I'd probably like "code has no effect in line #"
or something like this, but the principal is the same here.

> I agree, but I was not talking about unused variables.  I was  
> talking about *undeclared* variables.  For example:
>
> LOCAL nCount := 0
> ...
> nCound ++
>
> where nCound is not declared as a LOCAL or in any other way.  This  
> is a typo, and it will probably make my program fail.  This is the  
> type of warning that I consider of primary importance.   
> Optimization is strictly second class compared to undeclared  
> variables.

I don't find these optimizations (but the line is thin indeed). If we  
take
a look at C, we'll find some similar warnings you can find in Harbour,
and in C terminology that's not called "optimization warning", but
"unused variable" (and similar) warnings. And again: "obj:method"
vs. "obj:method()" is not an optimization matter.

>>> When I'm developing, I want to know about undeclared variables  
>>> and such - but I don't want to know about unoptimized code.   
>>> That's why I think this type of warning should be in a different  
>>> class.
>>
>> Well, that goes down to a personal preference as to who
>> prefers which subset of warnings as valuable and which
>> not. (I personally find every kind of warning valuable, and
>> consider everyone of them as errors, but that's just me.)
>> We might go with fine-tuning the possible warnings,
>> but I feel it would be overkill, since we're not talking about
>> huge numbers of undesirable or overly uncomfortable
>> warnings. Yet it's technically possible of course.
>
> Przemek has offered to move this type of warning to -w2, which I  
> think is a very good suggestion.

Yes, this is indeed good. We're sortof more compatible this way
and that's why we have different warning levels after all.

>> Still I'd think that fixing these warnings would result in
>> better code, and this is the best interest of programmers.
>
> IMO these warnings are of marginal importance, because the effect  
> of fixing them is only a minor improvement of performance.  They  
> have no effect on the logic of the program.  So, usually, I would  
> not want to bother with them.  Sometimes, I might want to, and it's  
> nice to know they are available.  That's why I agree with Przemek  
> that a good solution would be to move them to -w2.

I agree with the -w2 move. I won't debate on allowing unnecessary
constructs in code though :) They are so easy to fix.

(of course Harbour might even optimize these things automatically,
but this would be a bit of a waste of resources at this point to  
implement
IMO.)

>> I'm also having a hard time finding a situation when someone
>> would _have to_ keep the code in a form which would
>> keep generating warnings.
>
> That has never been the issue.  The issues are: (1) knowing what  
> the compiler is warning you about;  and (2) finding the right  
> context in which to generate the warnings.

(2) is interesting when talking about codeblocks, where usually
the code is pretty ugly and many times suboptimal because of the
hard to oversee inlined "if"s and other stuff.

Here Harbour could maybe point to a specific char in the line
(but these might those situations where this kind of help usually
doesn't help, because the exact root of the problem is difficult
if possible to track back by the compiler), or now in Harbour,  
statements
can be used to make the code more clear to read (this is indeed
an advantage of "multiline" codeblocks.) Unfortunately back-portability
is lost when using the feature. Some behemoth codeblock might be
worth to be converted to functions. But again we were talking about
existing code, where there is no better solution to spot these problems
than a simple warning.

I think I'm repeating myself, so I'll now have a beer and enjoy the
weekend, I wish the same to you too and other Harbour'ers as well :)

Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Sat Jun 16 14:00:30 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jun 16 14:01:08 2007
Subject: [Harbour] Linux DD-WRT
Message-ID: <005c01c7b040$3a017cc0$0100a8c0@emag>

Dear friends, is there any chances to get Harbour to work under Linux DD-WRT 
(an embedded version for routers)?

http://www.dd-wrt.com

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From lkrausem at shaw.ca  Sun Jun 17 02:47:37 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Sun Jun 17 02:48:51 2007
Subject: [Harbour] 2007-06-16 23:42 UTC-0800 Luis Krause Mantilla
Message-ID: <4674D909.60607@shaw.ca>

2007-06-16 23:42 UTC-0800 Luis Krause Mantilla <lkrausem /*at*/ shaw 
/*dot*/ ca>
  * harbour/source/rtl/scrollbr.prg
    * subs -> substr; replic -> replicate in order to be able to build
      harbour with HB_RESERVED_OFF

Regards,

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From lkrausem at shaw.ca  Sun Jun 17 02:59:47 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Sun Jun 17 03:01:57 2007
Subject: [Harbour] Pcode and hb_LibDo()... what has changed?
Message-ID: <4674DBE3.90703@shaw.ca>

Help!

What else changed with pcode dlls?
Once I build this app that uses pcode dll's this is what happens:

LoadLibrary( "mypcode.dll" ) -> OK returns a handle
HB_LibDo( "DLLINIT" ) -> OK so far here (this func intializes static 
support in dll) [1]
but...
HB_LilbDo( "OtherFuncInPCodeDll", nParam ) -> app dies

Did something changed in the way file wide statics works in pcode dlls?
Did somethign chaange on how HB_LibDo() works?

This used to work like a charm for years with Harbour from mid 2006

(All prg and libs were rebuild to avoid the usual pcode issues).

[1] This is the code for DLLINIT:

#ifdef __HARBOUR__
#pragma BEGINDUMP

static HB_FUNC( DLL_INITSTATICS )
{
   hb_INITSTATICS();
}

#pragma ENDDUMP

Function DLLInit()
   DLL_INITSTATICS()
Return Nil
#endif

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From niki at synel.co.il  Sun Jun 17 04:51:09 2007
From: niki at synel.co.il (Chen Kedem)
Date: Sun Jun 17 04:51:26 2007
Subject: [Harbour] 2007-06-16 23:42 UTC-0800 Luis Krause Mantilla
Message-ID: <4674F5FD.5A33@synel.co.il>

Luis,

It was asked not to commit anything to CVS until the SVN tree is
set inplace.

  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From lkrausem at shaw.ca  Sun Jun 17 12:07:25 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Sun Jun 17 12:08:48 2007
Subject: [Harbour] 2007-06-16 23:42 UTC-0800 Luis Krause Mantilla
In-Reply-To: <4674F5FD.5A33@synel.co.il>
References: <4674F5FD.5A33@synel.co.il>
Message-ID: <46755C3D.8020208@shaw.ca>

Chen:

My apologies.  I was so eager to figure out why I still can't be able to
get an app that relies on pcode dll's that I forgot about that directive
(I still can't so any clues/help is welcome).

I can reupload this fix once SVN is in place (and I figure out how to
use SVN!).

Regards,

Chen Kedem wrote:

>Luis,
>
>It was asked not to commit anything to CVS until the SVN tree is
>set inplace.
>
>  Chen.
>**********************************************************************************************
>IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
>named recipient(s) only.
>If you have received this email in error, please notify the system manager or the sender immediately and do 
>not disclose the contents to anyone or make copies thereof.
>*** eSafe scanned this email for viruses, vandals, and malicious content. ***
>**********************************************************************************************
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>  
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From druzus at priv.onet.pl  Mon Jun 18 11:41:35 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun 18 11:42:12 2007
Subject: [Harbour] Pcode and hb_LibDo()... what has changed?
In-Reply-To: <4674DBE3.90703@shaw.ca>
References: <4674DBE3.90703@shaw.ca>
Message-ID: <20070618154135.GA1311@localhost.localdomain>

On Sat, 16 Jun 2007, Luis Krause Mantilla wrote:
> Help!
> What else changed with pcode dlls?

Nothing. Please stop hacking generated code. No more HB_RESERVED_OFF
or similar tricks which are working due to some side effects in current
implementation and are not designed options.

> Once I build this app that uses pcode dll's this is what happens:
> LoadLibrary( "mypcode.dll" ) -> OK returns a handle

What is LoadLibrary? In CVS there is HB_LIBLOAD() but I cannot find
LoadLibrary()

> HB_LibDo( "DLLINIT" ) -> OK so far here (this func intializes static 
> support in dll) [1]

The static variables and INIT / EXIT functions are nicely executed
when you are using HB_LIBLOAD() / HB_LIBFREE() - you do not need any
additional hacks.

> but...
> HB_LilbDo( "OtherFuncInPCodeDll", nParam ) -> app dies

Probably sth wrong with binaries you created or with LoadLibrary()
function you are using.
BTW using:
    DYNAMIC OtherFuncInPCodeDll

and then:
    OtherFuncInPCodeDll( nParam )

is much faster then HB_LilbDo() which search for function symbol on each
call. In Harbour you can also make:
    sym := &("@OtherFuncInPCodeDll()")
and then:
    sym:exec( nParam )

> Did something changed in the way file wide statics works in pcode dlls?

Yes. They are automatically initialized by HB_LibLoad()

> Did somethign chaange on how HB_LibDo() works?

No.

> This used to work like a charm for years with Harbour from mid 2006

The binaries you created using HB_RESERVED_OFF were always buggy though
could work due to some side effect in HVM implementation and when you
were lucky in order of repeated function overloading - C compiler/linker
dependent issue so I can expect any problems with them - nothing amazing.
I've just tested dynamic DLLs with MinGW and code below and they are working
as they should linked with harbour.dll and also with static binaries
(it's necessary to use -Wl,--export-all-symbols linker parameter for
static binaries). The dllcode.prg contains code to dynamically bind
functions hb_vmProcessSymbolsEx() and hb_vmExecute() - it's a faster
version of similar functions source/vm/maindllp.c which works also
with linkers which does not add "_" as function name prefix - this
code is necessary only for Windows - in Linux .so libraries can resolve
such dependences automatically.

best regards,
Przemek



/*** tst.prg ***/
#ifdef __XHARBOUR__
   #xtranslate HB_LIBLOAD( => LIBLOAD(
   #xtranslate HB_LIBFREE( => LIBFREE(
#endif
proc main()
local h, cExt, xRetVal,n
#ifdef __PLATFORM__Linux
   cExt:=".so"
#else
   cExt:=".dll"
#endif
for n := 1 to 2
   ? "Begin:", n
   h := HB_LIBLOAD("./dllcode"+cExt)
   if EMPTY(h)
      ? "Cannot load DLL library: dllcode"+cExt
      ? HB_LIBERROR()
      quit
   endif
   xRetVal:=HB_LIBDO("DLLFUNC")
   ? iif(valtype(xRetVal)=="B", eval(xRetVal), xRetVal)
   xRetVal:=HB_LIBDO("DLLFUNC")
   ? iif(valtype(xRetVal)=="B", eval(xRetVal), xRetVal)
   HB_LIBFREE(h)
   ? "DLL library unloaded"
   ? iif(valtype(xRetVal)=="B", eval(xRetVal), xRetVal)
   ? iif(valtype(xRetVal)=="B", eval(xRetVal,"result: "), xRetVal)
next
return




/*** dllcode.prg ***/
DYNAMIC QOUT, UPPER

static s_var := "I'm static variable"

func DLLFUNC
local xRet:="DLLFUNC RETURN VALUE"
? "I'm DLL function"
? s_var
s_var := UPPER( s_var )
? s_var
return {|x|iif(x==nil,xRet,x+xRet)}

init proc DLLINIT
? "I'm DLL INIT procedure"
return

exit proc DLLEXIT
? "I'm DLL EXIT procedure"
return

#ifdef __PLATFORM__Windows
#pragma begindump
#include "windows.h"

typedef PHB_SYMB ( * VM_PROCESS_SYMBOLS_EX ) ( PHB_SYMB pSymbols, USHORT uiSymbols, char * szModuleName, ULONG ulID, USHORT uiPcodeVer );
typedef void ( * VM_EXECUTE ) ( const BYTE * pCode, PHB_SYMB pSymbols );

#define HB_DLL_NAME "harbour.dll"

static FARPROC hb_getProcAddress( LPSTR szProcName )
{
   static HMODULE s_hModule = NULL;
   FARPROC pProcAddr = NULL;

   if( s_hModule == NULL )
   {
      s_hModule = GetModuleHandle( HB_DLL_NAME );
      if( s_hModule == NULL )
         s_hModule = GetModuleHandle( NULL );
   }
   if( s_hModule )
   {
      pProcAddr = GetProcAddress( s_hModule, szProcName );
      if( pProcAddr == NULL && szProcName[ 0 ] == '_' )
         pProcAddr = GetProcAddress( s_hModule, szProcName + 1 );
   }
   if( pProcAddr == NULL )
   {
      fprintf( stderr, "\r\nCannot find '%s'\r\n", szProcName );
      fflush( stderr );
   }
   return pProcAddr;
}

/* module symbols initialization with extended information */
HB_EXPORT PHB_SYMB hb_vmProcessSymbolsEx( PHB_SYMB pSymbols, USHORT uiSymbols, char * szModuleName, ULONG ulID, USHORT uiPcodeVer )
{
   static FARPROC s_pProcessSymbols = NULL;
   PHB_SYMB pModuleSymbols = NULL;

   if( !s_pProcessSymbols )
      s_pProcessSymbols = hb_getProcAddress( "_hb_vmProcessSymbolsEx" );

   if( s_pProcessSymbols )
      pModuleSymbols = ( ( VM_PROCESS_SYMBOLS_EX ) s_pProcessSymbols )
                     ( pSymbols, uiSymbols, szModuleName, ulID, uiPcodeVer );

   return pModuleSymbols;
}

HB_EXPORT void hb_vmExecute( const BYTE * pCode, PHB_SYMB pSymbols )
{
   static FARPROC s_pExecute = NULL;

   if( !s_pExecute )
      s_pExecute = hb_getProcAddress( "_hb_vmExecute" );

   if( s_pExecute )
      ( ( VM_EXECUTE ) s_pExecute )( pCode, pSymbols );
}
#pragma enddump
#endif
From lkrausem at shaw.ca  Mon Jun 18 12:46:26 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Mon Jun 18 12:48:12 2007
Subject: [Harbour] Pcode and hb_LibDo()... what has changed?
In-Reply-To: <20070618154135.GA1311@localhost.localdomain>
References: <4674DBE3.90703@shaw.ca>
	<20070618154135.GA1311@localhost.localdomain>
Message-ID: <4676B6E2.9070206@shaw.ca>

Przemek:

Just to clarify, I'm not hacking generated code.
I have a batch file I hadn't used in a couple of years I use to
build harbour with HB_RESERVED_OFF to build a series
of stub libraries (for my own libs, fwh, etc) which I later
use for the mentioned pcode dlls.  Then I just rebuild harbour
without that flag for daily use.

There's a wealth of info in your reply I'll have to digest to understand
why if nothing has changed in the way hb_libdo() works why is it
I can't run these apps anymore.

I'll read it carefully and see how it goes (especially being that this
is not part of my current work so I have to do it of regular
work hours).

Regards,

>>Help!
>>What else changed with pcode dlls?
>>    
>>
>
>Nothing. Please stop hacking generated code. No more HB_RESERVED_OFF
>or similar tricks which are working due to some side effects in current
>implementation and are not designed options.
>
>  
>
-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070618/feeaaf1c/attachment.html
From druzus at priv.onet.pl  Mon Jun 18 13:35:53 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jun 18 13:36:29 2007
Subject: [Harbour] Pcode and hb_LibDo()... what has changed?
In-Reply-To: <4676B6E2.9070206@shaw.ca>
References: <4674DBE3.90703@shaw.ca>
	<20070618154135.GA1311@localhost.localdomain>
	<4676B6E2.9070206@shaw.ca>
Message-ID: <20070618173553.GA3948@localhost.localdomain>

On Mon, 18 Jun 2007, Luis Krause Mantilla wrote:
> Just to clarify, I'm not hacking generated code.
> I have a batch file I hadn't used in a couple of years I use to
> build harbour with HB_RESERVED_OFF to build a series
> of stub libraries (for my own libs, fwh, etc) which I later
> use for the mentioned pcode dlls.  Then I just rebuild harbour
> without that flag for daily use.

This is a hack. In the past I asked many times to stop making sth
like that because it needs some C compiler/linker functionality,
allows to create hard coded bindings which cannot be well overloaded
later so is not safe in some cases and needs some side effects
in the method of registering symbols inside HVM so in the future
it may stop to work if we eliminate them or if we change the
registration code. Also if you do not use HB_LIBLOAD() then you
cannot use any LIBFREE() because static strings and symbol tables
will be freed to what will corrupt internal HVM structures. And
to clarify: it was never safe in _ANY_ [x]HARBOUR versions. _ONLY_
new HB_LIBLOAD()/HB_LIBFREE() are safe.

> There's a wealth of info in your reply I'll have to digest to understand
> why if nothing has changed in the way hb_libdo() works why is it
> I can't run these apps anymore.

It can be caused by many things. Just simply you were created wrong
binaries with repeated symbols. Maybe the final result can be executed
maybe not - it doesn't matter for me. Sorry but in the past I lost too
much time looking for different errors reported by users when in fact
the problems were created by linking application with more then one HVM
(one inside Harbour .dll and second in static part of application) or
repeated symbols which were wrongly overloaded. Now when I'm reading
about such things I usually to ignore the message - it's not my problem
at all. But if you will find any problems with HB_LIBLOAD()/ HB_LIBFREE()
and binaries were you declared extern functions as DYNAMIC (no stub
functions at all) then please inform me and I'll try to fix it.

If you want to create automatically list of functions declared as DYNAMIC
you can use in your PCODE DLLs then please add to your main code:

    proc genFuncList()
    local aFunc, hFile
    aFunc := getFuncList()
    asort( aFunc )
    hFile := fcreate("dynamic.ch")
    aeval( aFunc, {|x| fwrite( hFile, "DYNAMIC " + x + hb_osNewLine() ) } )
    fclose( hFile )
    return
    func getFuncList()
    local aFunc, nCount := __dynsCount(), nDst:=0, n
    aFunc := array( nCount )
    for n := 1 to nCount
       if __dynsIsFun( n )
          aFunc[ ++nDst ] := __dynsGetName( n )
       endif
    next
    asize( aFunc, nDst )
    return aFunc

and then simply call
    genFuncList()
it will create dynamic.ch file with all available functions. Then
simply add:
    #include "dynamic.ch"
to your .prg code which should be linked into dynamic DLL. And do not
create any stub functions.

best regards,
Przemek
From lkrausem at shaw.ca  Mon Jun 18 13:44:26 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Mon Jun 18 13:44:57 2007
Subject: [Harbour] Pcode and hb_LibDo()... what has changed?
In-Reply-To: <20070618173553.GA3948@localhost.localdomain>
References: <4674DBE3.90703@shaw.ca>
	<20070618154135.GA1311@localhost.localdomain>
	<4676B6E2.9070206@shaw.ca>
	<20070618173553.GA3948@localhost.localdomain>
Message-ID: <4676C47A.6020003@shaw.ca>

Przemek:

I'll try  HB_LIBLOAD()/HB_LIBFREE()... wasn't aware of those.
This is an app for the company I used to work.  They asked me for
help when they tried to update the the current cvs and the app
stopped working.

The stub approach was used because it work in the past (for at least
7 years). I'll certainly try to move to whatever is current... it will just
take time from my "free" time to figure it out.

One more thing, I'm not using harbour.dll... these are (or were) trully
pcode dlls... they didn't need/wanted those dll to be able to be used
by other Windows apps, only this app.

I'll see what I can pull over the evenings and weekends to figure this
out.

I'll have to go over your replies since there's lot's of stuff that's new
to me and I have to fully understand how to deal with it.


Regards,

Przemyslaw Czerpak wrote:

>On Mon, 18 Jun 2007, Luis Krause Mantilla wrote:
>  
>
>>Just to clarify, I'm not hacking generated code.
>>I have a batch file I hadn't used in a couple of years I use to
>>build harbour with HB_RESERVED_OFF to build a series
>>of stub libraries (for my own libs, fwh, etc) which I later
>>use for the mentioned pcode dlls.  Then I just rebuild harbour
>>without that flag for daily use.
>>    
>>
>
>This is a hack. In the past I asked many times to stop making sth
>like that because it needs some C compiler/linker functionality,
>allows to create hard coded bindings which cannot be well overloaded
>later so is not safe in some cases and needs some side effects
>in the method of registering symbols inside HVM so in the future
>it may stop to work if we eliminate them or if we change the
>registration code. Also if you do not use HB_LIBLOAD() then you
>cannot use any LIBFREE() because static strings and symbol tables
>will be freed to what will corrupt internal HVM structures. And
>to clarify: it was never safe in _ANY_ [x]HARBOUR versions. _ONLY_
>new HB_LIBLOAD()/HB_LIBFREE() are safe.
>
>  
>
>>There's a wealth of info in your reply I'll have to digest to understand
>>why if nothing has changed in the way hb_libdo() works why is it
>>I can't run these apps anymore.
>>    
>>
>
>It can be caused by many things. Just simply you were created wrong
>binaries with repeated symbols. Maybe the final result can be executed
>maybe not - it doesn't matter for me. Sorry but in the past I lost too
>much time looking for different errors reported by users when in fact
>the problems were created by linking application with more then one HVM
>(one inside Harbour .dll and second in static part of application) or
>repeated symbols which were wrongly overloaded. Now when I'm reading
>about such things I usually to ignore the message - it's not my problem
>at all. But if you will find any problems with HB_LIBLOAD()/ HB_LIBFREE()
>and binaries were you declared extern functions as DYNAMIC (no stub
>functions at all) then please inform me and I'll try to fix it.
>
>If you want to create automatically list of functions declared as DYNAMIC
>you can use in your PCODE DLLs then please add to your main code:
>
>    proc genFuncList()
>    local aFunc, hFile
>    aFunc := getFuncList()
>    asort( aFunc )
>    hFile := fcreate("dynamic.ch")
>    aeval( aFunc, {|x| fwrite( hFile, "DYNAMIC " + x + hb_osNewLine() ) } )
>    fclose( hFile )
>    return
>    func getFuncList()
>    local aFunc, nCount := __dynsCount(), nDst:=0, n
>    aFunc := array( nCount )
>    for n := 1 to nCount
>       if __dynsIsFun( n )
>          aFunc[ ++nDst ] := __dynsGetName( n )
>       endif
>    next
>    asize( aFunc, nDst )
>    return aFunc
>
>and then simply call
>    genFuncList()
>it will create dynamic.ch file with all available functions. Then
>simply add:
>    #include "dynamic.ch"
>to your .prg code which should be linked into dynamic DLL. And do not
>create any stub functions.
>
>best regards,
>Przemek
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>  
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070618/e8a19972/attachment.html
From harbour.01 at syenar.hu  Tue Jun 19 04:21:44 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jun 19 04:21:44 2007
Subject: [Harbour] SVN ? (for admins)
Message-ID: <1870769C-C421-41D4-BAC2-EEF33C5E573B@syenar.hu>

Hi admins,

Can someone of you give me admin rights or help finishing the
SVN migration please?

It seemed that we agree on the migration, but if it's just me, we can
drop it of course.

If we still agree it would be good to open the new repository to avoid
lost/repated changes or repeating the long conversion process. There
was one commit already.

Brgds,
Viktor

From alex at belacy.belgorod.su  Tue Jun 19 09:09:38 2007
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Tue Jun 19 09:10:44 2007
Subject: [Harbour] Re:  SVN ? (for admins)
In-Reply-To: <1870769C-C421-41D4-BAC2-EEF33C5E573B@syenar.hu>
References: <1870769C-C421-41D4-BAC2-EEF33C5E573B@syenar.hu>
Message-ID: <9429254782.20070619170938@belacy.belgorod.su>

Tuesday, June 19, 2007, 12:21:44 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

SV> Hi admins,

SV> Can someone of you give me admin rights or help finishing the
SV> SVN migration please?

 You've got it.


-- 
Regards,
 Alexander
http://kresin.belgorod.su


From harbour.01 at syenar.hu  Tue Jun 19 12:09:39 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jun 19 12:09:46 2007
Subject: [Harbour] Re:  SVN ? (for admins)
In-Reply-To: <9429254782.20070619170938@belacy.belgorod.su>
References: <1870769C-C421-41D4-BAC2-EEF33C5E573B@syenar.hu>
	<9429254782.20070619170938@belacy.belgorod.su>
Message-ID: <8914DE82-348E-4656-9905-5B3E319934DB@syenar.hu>

Many thanks Alexander.

Brgds,
Viktor

On 2007.06.19., at 15:09, Alexander S.Kresin wrote:

> Tuesday, June 19, 2007, 12:21:44 PM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
> SV> Hi admins,
>
> SV> Can someone of you give me admin rights or help finishing the
> SV> SVN migration please?
>
>  You've got it.
>
>
> -- 
> Regards,
>  Alexander
> http://kresin.belgorod.su
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue Jun 19 12:14:11 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jun 19 12:14:08 2007
Subject: [Harbour] SVN repository now live
Message-ID: <DE51219F-BF72-434A-97F4-8B7811B13E9B@syenar.hu>

Hi all,

The conversion got finished. Pls review it. Notice that I didn't
touch the dump or didn't do any manual tweaking on the repository
along the way (except fixing a few minor but fatal problems).
So if you think we need to do something more, pls shout, the
repository can be converted reuploaded in this case.

IMPORTANT: The old CVS should still be accessible, so pls make
sure not to checkout or commit into it. I've yet to find out how to
shut it down completely to avoid any such mistakes in the future.
If you have a clue, pls speak up.

A few quick links for the new repository access:

SVN checkout (devel branch):
svn co https://harbour-project.svn.sourceforge.net/svnroot/harbour- 
project/trunk/harbour [harbour]

Browse with ViewVC:
https://harbour-project.svn.sourceforge.net/viewvc/harbour-project/

Subversion Server:
https://harbour-project.svn.sourceforge.net

Path to Repository:
/svnroot/harbour-project

Sourceforge Subversion access onstructions:
https://sourceforge.net/docs/E09

Subversion main page:
http://subversion.tigris.org/

Subversion download page:
http://subversion.tigris.org/project_packages.html

Subversion online docs:
http://svnbook.red-bean.com/

Brgds,
Viktor

From toninhofwi at yahoo.com.br  Tue Jun 19 13:33:40 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Jun 19 13:34:28 2007
Subject: [Harbour] SVN repository now live
In-Reply-To: <DE51219F-BF72-434A-97F4-8B7811B13E9B@syenar.hu>
References: <DE51219F-BF72-434A-97F4-8B7811B13E9B@syenar.hu>
Message-ID: <as2g739k5k35anp62jv4lflpt8or6o1873@4ax.com>

Thanks Viktor.

It is working fine, using TortoiseSVN, but I don?t need login to use
it, is this right?

Best regards,

Toninho.


	

	
		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From teo at windtelsoft.com  Tue Jun 19 13:38:11 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Tue Jun 19 13:38:17 2007
Subject: [Harbour] SVN repository now live
In-Reply-To: <DE51219F-BF72-434A-97F4-8B7811B13E9B@syenar.hu>
References: <DE51219F-BF72-434A-97F4-8B7811B13E9B@syenar.hu>
Message-ID: <200706191238.11555.teo@windtelsoft.com>

On Tuesday 19 June 2007 11:14:11 Szak?ts Viktor wrote:
> Hi all,
>
> The conversion got finished. Pls review it. Notice that I didn't
> touch the dump or didn't do any manual tweaking on the repository
> along the way (except fixing a few minor but fatal problems).
> So if you think we need to do something more, pls shout, the
> repository can be converted reuploaded in this case.
>
> IMPORTANT: The old CVS should still be accessible, so pls make
> sure not to checkout or commit into it. I've yet to find out how to
> shut it down completely to avoid any such mistakes in the future.
> If you have a clue, pls speak up.
>
> A few quick links for the new repository access:
>
> SVN checkout (devel branch):
> svn co https://harbour-project.svn.sourceforge.net/svnroot/harbour-
> project/trunk/harbour [harbour]
>
> Browse with ViewVC:
> https://harbour-project.svn.sourceforge.net/viewvc/harbour-project/
>
> Subversion Server:
> https://harbour-project.svn.sourceforge.net
>
> Path to Repository:
> /svnroot/harbour-project
>
> Sourceforge Subversion access onstructions:
> https://sourceforge.net/docs/E09
>
> Subversion main page:
> http://subversion.tigris.org/
>
> Subversion download page:
> http://subversion.tigris.org/project_packages.html
>
> Subversion online docs:
> http://svnbook.red-bean.com/

Viktor,

I have succesfully downloaded the SVN devel (trunk) directory into my 
computer, and I've only see a little issue:

The Linux script files doesn't have the -x (execution) file permission needed.
f.e. the following files doesn't have the -x (execution) file permission:

  ./make_rpm.sh
  ./bin/postint.sh

Once corrected the above issue, the Linux rpm's are generated correctly.

>
> Brgds,
> Viktor
>

best regards

Teo Fonrouge
From lorenzo.fiorini at gmail.com  Tue Jun 19 13:52:53 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Jun 19 13:52:56 2007
Subject: [Harbour] SVN repository now live
In-Reply-To: <DE51219F-BF72-434A-97F4-8B7811B13E9B@syenar.hu>
References: <DE51219F-BF72-434A-97F4-8B7811B13E9B@syenar.hu>
Message-ID: <9257026e0706191052m46157f06ib6c587cc0f5c5e18@mail.gmail.com>

On 6/19/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> The conversion got finished. Pls review it. Notice that I didn't
> touch the dump or didn't do any manual tweaking on the repository
> along the way (except fixing a few minor but fatal problems).
> So if you think we need to do something more, pls shout, the
> repository can be converted reuploaded in this case.

It seems ok here, many thanks for your great job.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Tue Jun 19 15:14:33 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jun 19 15:14:31 2007
Subject: [Harbour] SVN repository now live
In-Reply-To: <as2g739k5k35anp62jv4lflpt8or6o1873@4ax.com>
References: <DE51219F-BF72-434A-97F4-8B7811B13E9B@syenar.hu>
	<as2g739k5k35anp62jv4lflpt8or6o1873@4ax.com>
Message-ID: <B046B561-2746-4CA6-AE4F-BC95ED215298@syenar.hu>

Hi Toninho

> Thanks Viktor.

You're welcome and thx for the confirmation.

> It is working fine, using TortoiseSVN, but I don?t need login to use
> it, is this right?

Yes, it's still possible to access it in anonymous mode, just like  
with CVS.

You need your personal login for commits only.

Brgds,
Viktor



From harbour.01 at syenar.hu  Tue Jun 19 15:22:12 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jun 19 15:22:10 2007
Subject: [Harbour] SVN repository now live
In-Reply-To: <200706191238.11555.teo@windtelsoft.com>
References: <DE51219F-BF72-434A-97F4-8B7811B13E9B@syenar.hu>
	<200706191238.11555.teo@windtelsoft.com>
Message-ID: <83E98063-90BD-4ACA-AC7F-CA20DC9A13F1@syenar.hu>

Thanks Teo.

I'm not sure how to fix it, but I'll check if I can found anything.

(I did the rsync under OSX, but conversion on Windows, so it
will can be that we've lost those flags along the process.)

Brgds,
Viktor

On 2007.06.19., at 19:38, Teo Fonrouge wrote:

> On Tuesday 19 June 2007 11:14:11 Szak?ts Viktor wrote:
>> Hi all,
>>
>> The conversion got finished. Pls review it. Notice that I didn't
>> touch the dump or didn't do any manual tweaking on the repository
>> along the way (except fixing a few minor but fatal problems).
>> So if you think we need to do something more, pls shout, the
>> repository can be converted reuploaded in this case.
>>
>> IMPORTANT: The old CVS should still be accessible, so pls make
>> sure not to checkout or commit into it. I've yet to find out how to
>> shut it down completely to avoid any such mistakes in the future.
>> If you have a clue, pls speak up.
>>
>> A few quick links for the new repository access:
>>
>> SVN checkout (devel branch):
>> svn co https://harbour-project.svn.sourceforge.net/svnroot/harbour-
>> project/trunk/harbour [harbour]
>>
>> Browse with ViewVC:
>> https://harbour-project.svn.sourceforge.net/viewvc/harbour-project/
>>
>> Subversion Server:
>> https://harbour-project.svn.sourceforge.net
>>
>> Path to Repository:
>> /svnroot/harbour-project
>>
>> Sourceforge Subversion access onstructions:
>> https://sourceforge.net/docs/E09
>>
>> Subversion main page:
>> http://subversion.tigris.org/
>>
>> Subversion download page:
>> http://subversion.tigris.org/project_packages.html
>>
>> Subversion online docs:
>> http://svnbook.red-bean.com/
>
> Viktor,
>
> I have succesfully downloaded the SVN devel (trunk) directory into my
> computer, and I've only see a little issue:
>
> The Linux script files doesn't have the -x (execution) file  
> permission needed.
> f.e. the following files doesn't have the -x (execution) file  
> permission:
>
>   ./make_rpm.sh
>   ./bin/postint.sh
>
> Once corrected the above issue, the Linux rpm's are generated  
> correctly.
>
>>
>> Brgds,
>> Viktor
>>
>
> best regards
>
> Teo Fonrouge
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue Jun 19 15:23:26 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jun 19 15:23:26 2007
Subject: [Harbour] SVN repository now live
In-Reply-To: <9257026e0706191052m46157f06ib6c587cc0f5c5e18@mail.gmail.com>
References: <DE51219F-BF72-434A-97F4-8B7811B13E9B@syenar.hu>
	<9257026e0706191052m46157f06ib6c587cc0f5c5e18@mail.gmail.com>
Message-ID: <906991A1-B1CA-47C6-9DEA-F94A78A3B822@syenar.hu>

Sounds good. Thanks Lorenzo.

Brgds,
Viktor

On 2007.06.19., at 19:52, Lorenzo Fiorini wrote:

> On 6/19/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:
>
>> The conversion got finished. Pls review it. Notice that I didn't
>> touch the dump or didn't do any manual tweaking on the repository
>> along the way (except fixing a few minor but fatal problems).
>> So if you think we need to do something more, pls shout, the
>> repository can be converted reuploaded in this case.
>
> It seems ok here, many thanks for your great job.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From teo at windtelsoft.com  Tue Jun 19 15:41:53 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Tue Jun 19 15:42:03 2007
Subject: [Harbour] SVN repository now live
In-Reply-To: <83E98063-90BD-4ACA-AC7F-CA20DC9A13F1@syenar.hu>
References: <DE51219F-BF72-434A-97F4-8B7811B13E9B@syenar.hu>
	<200706191238.11555.teo@windtelsoft.com>
	<83E98063-90BD-4ACA-AC7F-CA20DC9A13F1@syenar.hu>
Message-ID: <200706191441.54449.teo@windtelsoft.com>

On Tuesday 19 June 2007 14:22:12 Szak?ts Viktor wrote:
> Thanks Teo.
>
> I'm not sure how to fix it, but I'll check if I can found anything.
>
> (I did the rsync under OSX, but conversion on Windows, so it
> will can be that we've lost those flags along the process.)
>

Hello Viktor,

I think that any Linux developer with write access to the SVN can easily fix 
this.

Good work Viktor.


> Brgds,
> Viktor

best regards

Teo

From e.m.giordano at emagsoftware.it  Tue Jun 19 15:47:54 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Jun 19 15:48:49 2007
Subject: [Harbour] SVN repository now live
References: <DE51219F-BF72-434A-97F4-8B7811B13E9B@syenar.hu>
Message-ID: <023801c7b2aa$c4f678a0$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 19 giugno 2007 18.14
Oggetto: [Harbour] SVN repository now live


> Hi all,
>
> The conversion got finished. Pls review it.

It seems to work fine for me too using TortoiseSVN.

Thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From jfl at mafact.com  Tue Jun 19 17:01:00 2007
From: jfl at mafact.com (J. Lefebvre)
Date: Tue Jun 19 17:02:17 2007
Subject: [Harbour] SVN repository now live
Message-ID: <ff0d0810.1c7b2b4.29917a.29@mafact.com>

Ok, working for me, at least for read access ... I suppose it will ask me for my user name and password on commit !

Good Job,

Regards, 

JF,

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Tuesday, June 19, 2007 6:14 PM
To: Harbour Project Main Developer List.
Subject: [Harbour] SVN repository now live

Hi all,

The conversion got finished. Pls review it. Notice that I didn't touch the dump or didn't do any manual tweaking on the repository along the way (except fixing a few minor but fatal problems).
So if you think we need to do something more, pls shout, the repository can be converted reuploaded in this case.

IMPORTANT: The old CVS should still be accessible, so pls make sure not to checkout or commit into it. I've yet to find out how to shut it down completely to avoid any such mistakes in the future.
If you have a clue, pls speak up.

A few quick links for the new repository access:

SVN checkout (devel branch):
svn co https://harbour-project.svn.sourceforge.net/svnroot/harbour-
project/trunk/harbour [harbour]

Browse with ViewVC:
https://harbour-project.svn.sourceforge.net/viewvc/harbour-project/

Subversion Server:
https://harbour-project.svn.sourceforge.net

Path to Repository:
/svnroot/harbour-project

Sourceforge Subversion access onstructions:
https://sourceforge.net/docs/E09

Subversion main page:
http://subversion.tigris.org/

Subversion download page:
http://subversion.tigris.org/project_packages.html

Subversion online docs:
http://svnbook.red-bean.com/

Brgds,
Viktor

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour


From dmacias at mail.udg.mx  Tue Jun 19 17:30:18 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Jun 19 17:30:22 2007
Subject: [Harbour] Re: SVN repository now live
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <46784AEA.4020004@mail.udg.mx>

 > The conversion got finished. Pls review it.
 > SVN checkout (devel branch):
 > svn co https://harbour-project.svn.sourceforge.net/svnroot/harbour-
 > project/trunk/harbour [harbour]

I tested it under OS/2 - eCS with SmartSVN, Harbour download and compile 
fine

As SmartSVN ( http://www.syntevo.com ) is a Subversion (SVN) Java 
client, it can be used in Win32, OS/2, Linux, ... in same ways

... but in Win32 I recommend TortoiseSVN

Viktor, thanks for your good work

David Macias


From dmacias at mail.udg.mx  Tue Jun 19 17:36:50 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Jun 19 17:36:53 2007
Subject: [Harbour] Re: SVN repository now live
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <46784C72.6040504@mail.udg.mx>

 >The Linux script files doesn't have the -x (execution) file permission 
 >needed.
 >f.e. the following files doesn't have the -x (execution) file >permission:

 >  ./make_rpm.sh

Few days ago I downloaded Harbour CVS using cvs client in Mandriva 
2007.1, as anonymous user and a fresh checkout
    ./make_rpm.sh does not run because does not have permission, so I 
changed it and work fine

I do not know if this lack of permission exist since CVS and now in SVN

David Macias



From harbour.01 at syenar.hu  Tue Jun 19 17:50:05 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jun 19 17:50:01 2007
Subject: [Harbour] SVN write info (brief)
Message-ID: <A578B656-0C0C-4AEB-A818-9E346B2D590C@syenar.hu>

Hi all committers,

You can use the following command to commit to SVN:
svn commit --editor-cmd notepad.exe --username vszakats --encoding  
latin2

You can use SVN_EDITOR envvar to set the --editor-cmd parameter
permanently on your system, but I use a simple one liner batch file
to do the job. Replace "latin2" with the codepage you write the commit
info in, and notepade.exe with your editor of choice. And don't forget
to replace your sf username.

For addition/deletion/etc, you can simply use "svn" command directly
inside the sandbox. Same goes for "svn diff" and the rest.

Brgds,
Viktor

From philb at philb.us  Tue Jun 19 19:49:25 2007
From: philb at philb.us (Phil Barnett)
Date: Tue Jun 19 19:49:31 2007
Subject: [Harbour] SVN repository now live
In-Reply-To: <DE51219F-BF72-434A-97F4-8B7811B13E9B@syenar.hu>
References: <DE51219F-BF72-434A-97F4-8B7811B13E9B@syenar.hu>
Message-ID: <200706191949.25477.philb@philb.us>

On Tuesday 19 June 2007 12:14, Szak?ts Viktor wrote:

> SVN checkout (devel branch):
> svn co https://harbour-project.svn.sourceforge.net/svnroot/harbour-
> project/trunk/harbour [harbour]

Yes, this works perfectly here.

Thanks for the work you did on this.

-- 
Phil Barnett
AI4OF
SKCC #600
From niki at synel.co.il  Wed Jun 20 02:59:12 2007
From: niki at synel.co.il (Chen Kedem)
Date: Wed Jun 20 02:59:22 2007
Subject: [Harbour] my new email address
Message-ID: <4678D040.55BA@synel.co.il>

Hi,

After 12 years, my small ISP was swallowed by a giant,
which does not support or sell shell accounts :(
(my ISP was the only one that sold such UNIX accounts)
I was given 10 days notice that my niki@actcom.co.il
account will cease to exists in June 30th 2007.

>From now on, this is my active email account: niki@synel.co.il
(which is already the account I regularly post from)


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From niki at synel.co.il  Wed Jun 20 03:42:05 2007
From: niki at synel.co.il (Chen Kedem)
Date: Wed Jun 20 03:42:19 2007
Subject: [Harbour] Re: SVN repository now live
Message-ID: <4678DA4D.5061@synel.co.il>

I had downloaded SVN files from:
http://subversion.tigris.org/servlets/ProjectDocumentList?folderID=91
http://subversion.tigris.org/files/documents/15/38203/svn-win32-1.4.4.zip

But when I try to execute svn.exe on my Win95 machine, it complains
about a missing functions in ADVAPI32.DLL (this is a system DLL) and
refuse to work. So, now I don't have access to the repository.
I hate it when tools that long worked are replaced with tools
that simply don't work in my environment.


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From antonioharbour at gmail.com  Wed Jun 20 05:48:44 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Jun 20 03:48:50 2007
Subject: [Harbour] Re: SVN repository now live
In-Reply-To: <4678DA4D.5061@synel.co.il>
References: <4678DA4D.5061@synel.co.il>
Message-ID: <411DBB34-B662-4C14-BC3E-C83A91F53E97@gmail.com>

Chen,

> on my Win95 machine

Maybe its time to upgrade your system... :-)

I wonder why you don't use Windows 3.1 ;-)

regards,

Antonio
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070620/46316154/attachment.html
From druzus at priv.onet.pl  Wed Jun 20 06:49:52 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 20 06:50:28 2007
Subject: [Harbour] ChangeLog 2007-06-20 12:45 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070620104951.GA25799@localhost.localdomain>

2007-06-20 12:45 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/hbgtmk.sh
  * harbour/make_drw.sh
  * harbour/make_rpm.sh
  * harbour/bin/hb-mkslib.sh
  * harbour/bin/bld.sh
  * harbour/bin/hb-func.sh
  * harbour/bin/postinst.sh
  * harbour/bin/pack_src.sh
  * harbour/make_bsd.sh
  * harbour/make_xmingw.sh
  * harbour/make_gnu.sh
  * harbour/make_tgz.sh
    * set executable attribute
      small thing but makes happy ;-) - Many thanks Victor!

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jun 20 15:07:47 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 20 15:08:24 2007
Subject: [Harbour] ChangeLog 2007-06-20 21:05 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070620190747.GA17129@localhost.localdomain>

2007-06-20 21:05 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbgtinfo.ch
    + added GTI_ADDKEYMAP and GTI_DELKEYMAP

  * harbour/include/hbapicdp.h
  * harbour/source/rtl/cdpapi.c
    + added const to declarations of some function parameters

  * harbour/include/hbgtcore.h
  * harbour/source/rtl/Makefile
  + harbour/source/rtl/gtchrmap.c
  * harbour/source/rtl/gtcrs/Makefile
  - harbour/source/rtl/gtcrs/chrmap.c
  * harbour/source/rtl/gtcrs/gtcrs.c
  * harbour/source/rtl/gtcrs/gtcrs.h
    * hb_gt_chrmapinit() common function now for different GT drivers
    * minor cleanup in GTCRS code

  * harbour/include/hbcompat.ch
    + added some new translation rules

  * harbour/include/hbapi.h
    * cleanup comment

  * harbour/source/pp/ppcore.c
    ! fixed line numbering when errors are reported in different order
      due to preprocessing extended code block

  + harbour/source/rtl/gttrm
  + harbour/source/rtl/gttrm/Makefile
  + harbour/source/rtl/gttrm/gttrm.c
    + added new GT driver - it's terminal driver like GTCRS and GTSLN
      but it does not use any external library like [N]CURSES or SLANG
      so it can be compiled in nearly all POSIX systems. It's not such
      flexible like curses or slang base drivers because instead of
      using termcap/terminfo databases to extract terminal capabilities
      it uses some hard coded sequences for few terminals (now Linux, ANSI,
      XTERM) but it should cover users requests in 95% of cases. Terminals
      I tested are quite well supported (GTTRM works even better then GTCRS
      or GTSLN and is much faster in full screen mode - 2-4 times).
      I noticed that most terminal emulators works much better with GTTRM
      then with GTCRS or GTSLN due to limited list of used escape sequences
      so some minor differences in each terminal implementation are not
      noticeable. GTTRM automatically detects ISO/UTF8 terminal mode and
      chose valid output what should also help *nix users.
      Now I would like to ask BSD and MacOSX users to test GTTRM in these
      systems with pure text console and XWindow terminal emulators. I'm
      interesting in any problems you may found.

  * harbour/source/vm/hvm.c
    + added protection for possible GPF caused by wrong .prg code

  * harbour/source/vm/maindllp.c
    % store function addreses in static variables to improved execution
      speed
    + added support for compilers which does not use "_" as function prefix
    + added support for using with harbour*.dll

  * harbour/source/vm/memvars.c
    + added new method of detaching enumerators and array item references
      covered by HB_COMPAT_XHB macro. xHarbour does not work in such way
      but the final results are similar.

  * harbour/source/vm/dynlibhb.c
    + added protection against passing wrong pointer items to HB_LIB*()
      functions

  * harbour/source/common/reserved.c
    * cleaned warning

  * harbour/bin/hb-func.sh
  * harbour/config/hpux/global.cf
  * harbour/config/darwin/global.cf
  * harbour/config/linux/global.cf
  * harbour/config/sunos/global.cf
  * harbour/config/bsd/global.cf
    + added GTTRM to library list

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jun 20 17:19:57 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 20 17:20:33 2007
Subject: [Harbour] ChangeLog 2007-06-20 23:20 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070620211957.GA21315@localhost.localdomain>

2007-06-20 23:20 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gtchrmap.c
    * removed 'static const' from s_szDefaultCharMapFile declaration
      I forgot that it was used by some build scripts I made public
      few years ago - I'll change these declaration when I'll add
      alternative method of changing default charmap file.

  * harbour/source/rtl/gttrm/gttrm.c
    + added support for SetBlink(.f.) working like in GTCRS and GTSLN.
      We cannot change from the server side the interpretation of BLINK
      attribute in 99% of terminals (it has to be done on client side)
      so SetBlink(.f.) simply disables sending BLINK attribute to terminal.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jun 20 20:27:03 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 20 20:27:39 2007
Subject: [Harbour] ChangeLog 2007-06-21 02:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070621002703.GA25477@localhost.localdomain>

2007-06-21 02:25 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gtcrs/hb-charmap.def
  * harbour/source/rtl/gttrm/gttrm.c
    + added 'screen' terminal

best regards,
Przemek
From eghorbino at yahoo.com  Wed Jun 20 22:26:28 2007
From: eghorbino at yahoo.com (Edmer)
Date: Wed Jun 20 22:26:30 2007
Subject: [Harbour] Storing Array in Memo field
Message-ID: <11223588.post@talk.nabble.com>


Hi Guys,

How do I store and retrieve Arrays to a Memo field in ADS.

Thanks,
Ed

-- 
View this message in context: http://www.nabble.com/Storing-Array-in-Memo-field-tf3955477.html#a11223588
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From eghorbino at yahoo.com  Wed Jun 20 22:27:13 2007
From: eghorbino at yahoo.com (Edmer)
Date: Wed Jun 20 22:27:15 2007
Subject: [Harbour] About libct and nanfor
Message-ID: <11187648.post@talk.nabble.com>


Hi Guys,

Is it safe to use the latest or updated .c source files of libct and nanfor
in xHarbour to Harbour.

Thanks,
Ed

-- 
View this message in context: http://www.nabble.com/About-libct-and-nanfor-tf3943954.html#a11187648
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at priv.onet.pl  Fri Jun 22 10:25:38 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun 22 10:26:14 2007
Subject: [Harbour] ChangeLog 2007-06-22 16:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070622142538.GA9106@localhost.localdomain>

2007-06-22 16:25 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/pack_src.sh
    + added GTTRM to compressed file list

  * harbour/include/hbgtcore.h
    + added HB_GT_ATTR_UNDEF

  * harbour/source/rtl/hbgtcore.c
    * minor cleanup in COLD() method

  * harbour/source/rtl/gtchrmap.c
    * disable control characters when hb_charmap.def file cannot be found
      or there is no valid section for current terminal inside

  * harbour/source/rtl/gttrm/gttrm.c
    - removed OUTERR() and OUTSTD() method - the default one are enough
    + set CLIPKEY flag in GTI_ADDKEYMAP

best regards,
Przemek
From druzus at priv.onet.pl  Sat Jun 23 05:13:11 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Jun 23 05:13:50 2007
Subject: [Harbour] ChangeLog 2007-06-23 11:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070623091311.GA3583@localhost.localdomain>

2007-06-23 11:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gtchrmap.c
  * harbour/source/rtl/gttrm/Makefile
  * harbour/source/rtl/gttrm/gttrm.c
    + set Id keyword property

  * harbour/source/common/expropt1.c
    ! fixed typo in HB_TRACE() parameters

  * harbour/include/hbapicdp.h
  * harbour/include/hbapirdd.h
  * harbour/source/rtl/strcase.c
  * harbour/source/rtl/is.c
  * harbour/source/rtl/gtxwc/gtxwc.h
  * harbour/source/rtl/gtxwc/gtxwc.c
  * harbour/source/rtl/gtstd/gtstd.c
  * harbour/source/rtl/gtsln/gtsln.c
  * harbour/source/rtl/gtsln/gtsln.h
  * harbour/source/rtl/gtpca/gtpca.c
  * harbour/source/rtl/gtcgi/gtcgi.c
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
  * harbour/source/vm/hvm.c
    ! fixed compilation with HB_CDP_SUPPORT_OFF - I do not plan to
      create such builds but now these macro allow to easy locate
      CDP dependent code

  * harbour/include/hbextern.ch
  * harbour/source/rtl/cdpapi.c
    + added two prg functions for translations from/to UTF-8:
         HB_STRTOUTF8( <cStr> [, <cCPID> ] ) -> <cUTF8Str>
         HB_UTF8TOSTR( <cUTF8Str> [, <cCPID> ] ) -> <cStr>
      <cCPID> is Harbour codepage id, f.e.: "EN", "ES", "ESWIN",
      "PLISO", "PLMAZ", "PL852", "PLWIN", ...
      When not given then default HVM codepage (set by HB_SETCODEPAGE())
      is used.

best regards,
Przemek
From harbour.01 at syenar.hu  Sat Jun 23 05:16:12 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Jun 23 05:16:20 2007
Subject: [Harbour] OS X Harbour install problem
Message-ID: <25768B82-27C0-4406-863B-4099C17E9835@syenar.hu>

Hi Przemek,

I'm now trying to build/install Harbour on OS X using
make_tgz.sh. The build went fine, but when I try to
run the resulting file using my admin account, I'm faced
with the message:
"This package has to be installed from root account."

The problem is that I have never had to use my "root"
account to any purposes under OS X yet, so I wonder
if this is a valid requirement under this OS. (Not to
mention that for that reason I have no idea what my
root account password is, and I'd be a bit scared to
use it for such - app level installation - purpose anyway).

(Would it be a solution to add my normal account to the
sudo'ers file?)

Brgds,
Viktor

From antonioharbour at gmail.com  Sat Jun 23 07:19:32 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sat Jun 23 05:19:39 2007
Subject: [Harbour] OS X Harbour install problem
In-Reply-To: <25768B82-27C0-4406-863B-4099C17E9835@syenar.hu>
References: <25768B82-27C0-4406-863B-4099C17E9835@syenar.hu>
Message-ID: <6FFC17CB-13B4-4CD8-8648-AFBAD361FBA7@gmail.com>

Viktor,

You can activate the root in OSX doing sudo -s and typing your password

root account is deactivated by default in OSX

regards,

Antonio

From harbour.01 at syenar.hu  Sat Jun 23 05:29:33 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Jun 23 05:29:39 2007
Subject: [Harbour] OS X Harbour install problem
In-Reply-To: <6FFC17CB-13B4-4CD8-8648-AFBAD361FBA7@gmail.com>
References: <25768B82-27C0-4406-863B-4099C17E9835@syenar.hu>
	<6FFC17CB-13B4-4CD8-8648-AFBAD361FBA7@gmail.com>
Message-ID: <6654AE60-5E80-4BA9-A476-17FE7EEA801A@syenar.hu>

Hi Antonio,

Thanks for the tip. But is this really unavoidable? I mean,
I've never had to do this for any installers, command-line
stuff and even kernel extension installations (and OS upgrades)
included, but I'd have to for Harbour.

Majority of OSX+Harbour users would feel this strange and
unsecure I guess.

Brgds,
Viktor

On 2007.06.23., at 13:19, Antonio Linares wrote:

> Viktor,
>
> You can activate the root in OSX doing sudo -s and typing your  
> password
>
> root account is deactivated by default in OSX
>
> regards,
>
> Antonio
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Sat Jun 23 06:15:44 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Jun 23 06:16:18 2007
Subject: [Harbour] OS X Harbour install problem
In-Reply-To: <25768B82-27C0-4406-863B-4099C17E9835@syenar.hu>
References: <25768B82-27C0-4406-863B-4099C17E9835@syenar.hu>
Message-ID: <20070623101544.GB3583@localhost.localdomain>

On Sat, 23 Jun 2007, Szak?ts Viktor wrote:
> Hi Przemek,
> I'm now trying to build/install Harbour on OS X using
> make_tgz.sh. The build went fine, but when I try to
> run the resulting file using my admin account, I'm faced
> with the message:
> "This package has to be installed from root account."
> The problem is that I have never had to use my "root"
> account to any purposes under OS X yet, so I wonder
> if this is a valid requirement under this OS. (Not to
> mention that for that reason I have no idea what my
> root account password is, and I'd be a bit scared to
> use it for such - app level installation - purpose anyway).

I do not know OSX. To install binaries you need sufficient
rights to install files in /usr tree setting file owner, group
and permissions.
At the end of make_tgz.sh file you will find:

    if [ \`id -u\` != 0 ]; then
        echo "This package has to be installed from root account."
        exit 1
    fi

The installation is simple extracting tar.gz archive:

    sed -e '1,/^HB_INST_EOF\$/ d' "\$0" | gzip -cd | tar xvpf - -C /

and maybe can be executed from your Admin account. Try to remove
the above condition and check it. You do not have to rebuild
Harbour. If you look at final harbour-*.inst.sh file then you will
find the above lines at the beginning. Just simply edit this file
using editor which will not change binary data under line with:
HB_INST_EOF
f.e. Midnight Commander (mc) internal editor pass can be used.

Anyhow I'm surprised. If I someone can change files inside /usr tree
then can take root privileges nearly immediately so it's not secure
to work with Admin rights or giving such rights to some programs but
I do not know MacOSX and it's possible that I'm missing some important
conditions and I haven't understood you.
If you think that the installation process should be changed then
please do it and send me the final result so I'll update make_tgz.sh
If you will have any questions not directly related to MacOSX but
for some general *nix/shell/POSIX problems then I'll also try to
help/explain. My knowledge about MacOSX is very limited - in the
past I was working remotely only as normal user, testing [x]Harbour
builds.
BTW I have some questions too 
Has MacOSX build in real text console or you have to use some
terminal emulator?

best regards,
Przemek
From antonioharbour at gmail.com  Sat Jun 23 08:37:08 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sat Jun 23 06:37:13 2007
Subject: [Harbour] OS X Harbour install problem
In-Reply-To: <20070623101544.GB3583@localhost.localdomain>
References: <25768B82-27C0-4406-863B-4099C17E9835@syenar.hu>
	<20070623101544.GB3583@localhost.localdomain>
Message-ID: <A11F6C85-A2CE-4C12-9527-574F5C5C6780@gmail.com>

Przemek,

> BTW I have some questions too
> Has MacOSX build in real text console or you have to use some
> terminal emulator?

AFAIK, It has real text console

regards,

Antonio


From druzus at priv.onet.pl  Sat Jun 23 06:53:47 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Jun 23 06:54:24 2007
Subject: [Harbour] OS X Harbour install problem
In-Reply-To: <A11F6C85-A2CE-4C12-9527-574F5C5C6780@gmail.com>
References: <25768B82-27C0-4406-863B-4099C17E9835@syenar.hu>
	<20070623101544.GB3583@localhost.localdomain>
	<A11F6C85-A2CE-4C12-9527-574F5C5C6780@gmail.com>
Message-ID: <20070623105347.GA4572@localhost.localdomain>

On Sat, 23 Jun 2007, Antonio Linares wrote:
> >BTW I have some questions too
> >Has MacOSX build in real text console or you have to use some
> >terminal emulator?
> AFAIK, It has real text console

Thank you.
Next questions ;-)
What is the terminal type on this console? (echo $TERM)
Can you send me file created by:
   infocmp > macosx.tic
executed inside this console?

best regards,
Przemek
From antonioharbour at gmail.com  Sat Jun 23 09:06:43 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sat Jun 23 07:06:50 2007
Subject: [Harbour] OS X Harbour install problem
In-Reply-To: <20070623105347.GA4572@localhost.localdomain>
References: <25768B82-27C0-4406-863B-4099C17E9835@syenar.hu>
	<20070623101544.GB3583@localhost.localdomain>
	<A11F6C85-A2CE-4C12-9527-574F5C5C6780@gmail.com>
	<20070623105347.GA4572@localhost.localdomain>
Message-ID: <CB1A7BFA-71AE-414D-AAD5-655CF8110471@gmail.com>

Przemek,

> What is the terminal type on this console? (echo $TERM)

xterm-color

> Can you send me file created by:
>    infocmp > macosx.tic
> executed inside this console?

I copy its contents here to avoid the attachment:

#       Reconstructed via infocmp from file: /usr/share/terminfo/78/ 
xterm-color
xterm-color|nxterm|generic color xterm,
         am, km, mir, msgr, xenl,
         colors#8, cols#80, it#8, lines#24, ncv@, pairs#64,
         acsc=``aaffggiijjkkllmmnnooppqqrrssttuuvvwwxxyyzz{{||}}~~,
         bel=^G, bold=\E[1m, clear=\E[H\E[2J, cr=^M,
         csr=\E[%i%p1%d;%p2%dr, cub=\E[%p1%dD, cub1=^H,
         cud=\E[%p1%dB, cud1=^J, cuf=\E[%p1%dC, cuf1=\E[C,
         cup=\E[%i%p1%d;%p2%dH, cuu=\E[%p1%dA, cuu1=\E[A,
         dch=\E[%p1%dP, dch1=\E[P, dl=\E[%p1%dM, dl1=\E[M, ed=\E[J,
         el=\E[K, enacs=\E)0, home=\E[H, ht=^I, hts=\EH, il=\E[%p1%dL,
         il1=\E[L, ind=^J,
         is2=\E7\E[r\E[m\E[?7h\E[?1;3;4;6l\E[4l\E8\E>, kbs=^H,
         kcub1=\EOD, kcud1=\EOB, kcuf1=\EOC, kcuu1=\EOA,
         kdch1=\E[3~, kf1=\E[11~, kf10=\E[21~, kf11=\E[23~,
         kf12=\E[24~, kf13=\E[25~, kf14=\E[26~, kf15=\E[28~,
         kf16=\E[29~, kf17=\E[31~, kf18=\E[32~, kf19=\E[33~,
         kf2=\E[12~, kf20=\E[34~, kf3=\E[13~, kf4=\E[14~,
         kf5=\E[15~, kf6=\E[17~, kf7=\E[18~, kf8=\E[19~, kf9=\E[20~,
         kfnd=\E[1~, kich1=\E[2~, kmous=\E[M, knp=\E[6~, kpp=\E[5~,
         kslt=\E[4~, op=\E[m, rc=\E8, rev=\E[7m, ri=\EM, rmacs=^O,
         rmcup=\E[2J\E[?47l\E8, rmir=\E[4l, rmkx=\E[?1l\E>,
         rmso=\E[m, rmul=\E[m,
         rs2=\E7\E[r\E8\E[m\E[?7h\E[?1;3;4;6l\E[4l\E>, sc=\E7,
         setab=\E[4%p1%dm, setaf=\E[3%p1%dm, sgr0=\E[m, smacs=^N,
         smcup=\E7\E[?47h, smir=\E[4h, smkx=\E[?1h\E=, smso=\E[7m,
         smul=\E[4m, tbc=\E[3g, u6=\E[%i%d;%dR, u7=\E[6n,
         u8=\E[?1;2c, u9=\E[c,

regards,

Antonio
From druzus at priv.onet.pl  Sat Jun 23 07:35:33 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Jun 23 07:36:08 2007
Subject: [Harbour] OS X Harbour install problem
In-Reply-To: <CB1A7BFA-71AE-414D-AAD5-655CF8110471@gmail.com>
References: <25768B82-27C0-4406-863B-4099C17E9835@syenar.hu>
	<20070623101544.GB3583@localhost.localdomain>
	<A11F6C85-A2CE-4C12-9527-574F5C5C6780@gmail.com>
	<20070623105347.GA4572@localhost.localdomain>
	<CB1A7BFA-71AE-414D-AAD5-655CF8110471@gmail.com>
Message-ID: <20070623113533.GA4776@localhost.localdomain>

On Sat, 23 Jun 2007, Antonio Linares wrote:
> >What is the terminal type on this console? (echo $TERM)
> xterm-color
> >Can you send me file created by:
> >   infocmp > macosx.tic
> >executed inside this console?
> I copy its contents here to avoid the attachment:
> #       Reconstructed via infocmp from file: /usr/share/terminfo/78/ 
[...]


Thank you very much.
But xterm cannot be well emulated in pure text console so I guess it's
not real text console but graphic mode (probably desktop window with XTERM
emulator, isn't it?). Anyhow it was also very usable information - checked
if GTTRM will work with it and looks that it should not have any problems.
If someone can test some CUI full screen application linked with GTTRM then
we will have confirmation.
But my question about pure text mode in MacOSX is still open.
MacOSX is based on BSD system where such console exists (if
hardware supports it - not all machines have text mode) and
I'm interesting in GTTRM tests on such console. It should be
ANSI based terminal.

best regards,
Przemek
From druzus at priv.onet.pl  Sat Jun 23 08:12:17 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Jun 23 08:12:52 2007
Subject: [Harbour] SVN repository now live
In-Reply-To: <DE51219F-BF72-434A-97F4-8B7811B13E9B@syenar.hu>
References: <DE51219F-BF72-434A-97F4-8B7811B13E9B@syenar.hu>
Message-ID: <20070623121217.GA9547@localhost.localdomain>

On Tue, 19 Jun 2007, Szak?ts Viktor wrote:
> The conversion got finished. Pls review it. Notice that I didn't
> touch the dump or didn't do any manual tweaking on the repository
> along the way (except fixing a few minor but fatal problems).
> So if you think we need to do something more, pls shout, the
> repository can be converted reuploaded in this case.

I was working on Harbour using SVN for few days and I haven't noticed
any problems. Everything works very nice, much faster then with CVS and
without CVS limitations. It was very good move. Thank you very much.

best regards,
Przemek
From druzus at priv.onet.pl  Sat Jun 23 09:45:51 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Jun 23 09:46:28 2007
Subject: [Harbour] ChangeLog 2007-06-23 15:45 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070623134551.GA10740@localhost.localdomain>

2007-06-23 15:45 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbgtcore.h
  * harbour/source/rtl/gtchrmap.c
  * harbour/source/rtl/gtcrs/gtcrs.c
  * harbour/source/rtl/gttrm/gttrm.c
    + added 3-rd parameter BOOL fSetACSC to hb_gt_chrmapinit() function
    * initialize ACSC translation for XTERM like terminals when
      hb_charmap.def file cannot be found or there is no valid
      section for used terminal

  + harbour/tests/gtchars.prg
  + harbour/tests/gtcolors.prg
  + harbour/tests/gtkeys.prg
   + added test ptograms for GT drivers to test all character output and
     automatic CP translation, colors settings and keyboard/mouse input

best regards,
Przemek
From druzus at priv.onet.pl  Sat Jun 23 10:59:07 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Jun 23 10:59:43 2007
Subject: [Harbour] Debian packages
Message-ID: <20070623145907.GA11701@localhost.localdomain>

Hi All.

Luis Mayoral added support for Debian packages.
Can anyone contact with him?
It will be good to update quite old versions 0.44/0.45 which
are still installed by dpkg.
I'd like also to add to SF repository the basic version of package
description so Harbour Debian/Ubuntu users may build test version
from current repository. It should also help in realising final
distribution versions because we can make necessary updates/fixing
ourself. I've already made some minor cleanup but I hope it will
be updated by real Debian/Ubuntu users.

best regards,
Przemek
From niki at synel.co.il  Sun Jun 24 07:09:19 2007
From: niki at synel.co.il (Chen Kedem)
Date: Sun Jun 24 07:09:56 2007
Subject: [Harbour] Debian packages
Message-ID: <467E50DF.A21@synel.co.il>

Przemek wrote:
> It will be good to update quite old versions 0.44/0.45 which
> are still installed by dpkg.

While doing this, one can also note the following post I made
on Tue, 27 Jun 2006 16:47:16 +0300:
,-
| Subject: Can some one try to update Harbour public relations?
|
| Hi,
|
| With some Googleing around (Ok, so I don't feel like working right now)
| I found these links, which point to some old builds:
|
| ---
|
| FSF (Build 0.44)
| http://directory.fsf.org/devel/compilers/harbour.html
|
| Debian (Build 0.41, 0.45)
| http://packages.qa.debian.org/h/harbour.html
| http://packages.debian.org/stable/devel/harbour
|
| freshmeat (Build 0.38)
| http://freshmeat.net/projects/theharbourproject/
|
| FreeBSD (Build 0.44)
| http://www.freebsd.org/cgi/ports.cgi?query=harbour
|
| rpmseek (Build 0.35, 0.44)
| http://rpmseek.com/rpm-pl/harbour.html?hl=en
|
| SAL (Build 0.33)
| http://ceu.fi.udc.es/SAL/F/1/HARBOUR.html
|
| FreshPorts (Build 0.44)
| http://www.freshports.org/lang/harbour
|
| ---
|
| I wonder if some on is interested in update these contacts?
|
`-

(there was no response to me email at the time)


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From antonioharbour at gmail.com  Sun Jun 24 16:29:00 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Jun 24 14:28:58 2007
Subject: [Harbour] OS X Harbour install problem
In-Reply-To: <20070623113533.GA4776@localhost.localdomain>
References: <25768B82-27C0-4406-863B-4099C17E9835@syenar.hu>
	<20070623101544.GB3583@localhost.localdomain>
	<A11F6C85-A2CE-4C12-9527-574F5C5C6780@gmail.com>
	<20070623105347.GA4572@localhost.localdomain>
	<CB1A7BFA-71AE-414D-AAD5-655CF8110471@gmail.com>
	<20070623113533.GA4776@localhost.localdomain>
Message-ID: <76CFF3BE-2711-4C09-8A3C-30EB0787CD60@gmail.com>

Przemek,

> But my question about pure text mode in MacOSX is still open.
> MacOSX is based on BSD system where such console exists (if
> hardware supports it - not all machines have text mode) and
> I'm interesting in GTTRM tests on such console. It should be
> ANSI based terminal.

AFAIK, you can boot in text mode and not go into the GUI (F8, -s -v)  
and test an app from there

but once you are in gui you can't go back to text mode console

Anyhow, I will check it

regards,

Antonio
From antonioharbour at gmail.com  Sun Jun 24 16:31:06 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Jun 24 14:31:05 2007
Subject: [Harbour] Debian packages
In-Reply-To: <20070623145907.GA11701@localhost.localdomain>
References: <20070623145907.GA11701@localhost.localdomain>
Message-ID: <484CB82F-8DB7-4DED-9942-3C8DC5522BA6@gmail.com>

Przemek,

> Luis Mayoral added support for Debian packages.
> Can anyone contact with him?

I will contact him

regards,

Antonio
From dmacias at mail.udg.mx  Mon Jun 25 04:54:03 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Mon Jun 25 04:54:07 2007
Subject: [Harbour] MySQL on OS/2
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <467F82AB.6030803@mail.udg.mx>

Przemek, Maurilio, ...

Years ago I was working with MySQL 3.23.50 + Harbour under OS/2, and it 
worked fine

Now I am testing MySQL 5.0.37+Harbour beta3 under OS/2-eCS

mysqld startup fine and mysql client work as expected, so MySQL 5.0.37 
are working under eCS without troubles

Building Harbour hbmysql.a lib show these results:
-----------------------------------------------
../../mysql.c:366: error: conflicting types for `filelength'
E:/usr/include/io.h:60: error: previous declaration of `filelength'
make[1]: *** [mysql.o] Error 1
make: *** [descend] Error 2
-----------------------------------------------

harbour\contrib\mysql\mysql.c contain:
------------------------------
#ifdef __GNUC__
long filelength( int handle )
{
     int nEnd = hb_fsSeek( handle, 0 , 2 );
     int nStart = hb_fsSeek( handle , 0 , 0 );
     return nEnd - nStart;
}
#endif
------------------------------

and /usr/include/io.h:60 ( gcc 3.3.5 ) are:
------------------------------
off_t filelength (int);
------------------------------


How can it be solved ?


David Macias


From druzus at priv.onet.pl  Tue Jun 26 13:18:11 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jun 26 13:18:50 2007
Subject: [Harbour] ChangeLog 2007-06-26 19:15 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070626171811.GA18752@localhost.localdomain>

2007-06-26 19:15 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gttrm/gttrm.c
    * use ECMA-48 compatible sequence to disable bold intensity also
      on Linux terminals (one byte longer but will work also in some
      non Linux terminals which do not emulate it well)
    * use STDIN handle for full screen output when STDOUT redirected
      to non terminal device, f.e. file.

best regards,
Przemek
From druzus at priv.onet.pl  Tue Jun 26 17:46:25 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jun 26 17:47:03 2007
Subject: [Harbour] ChangeLog 2007-06-26 22:00 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070626214625.GA19674@localhost.localdomain>

2007-06-26 22:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gttrm/gttrm.c
    * use separate trnaslation tables for dispout() and dispbox() like
      in GTCRS

best regards,
Przemek
From druzus at priv.onet.pl  Tue Jun 26 17:56:18 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jun 26 17:56:54 2007
Subject: [Harbour] ChangeLog 2007-06-26 23:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070626215618.GB19674@localhost.localdomain>

2007-06-26 23:55 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/hb-func.sh
  * harbour/harbour.spec
    * added description for -L<path> in hb* scripts

  * harbour/include/hbapicls.h
  * harbour/source/vm/classes.c
    * changed hb_objSendMsg() and hb_objSendMessage() to return
      hb_stackReturnItem() - xHarbour users asked about it. It does
      not change binary compatibility with existing code.

  * harbour/common.mak
    * replaced some hard coded values like file extensions with variables
      for future use on other platforms

  * harbour/contrib/mysql/mysql.c
    * changed code to not use non standard function filelength()
      and optimized

  * harbour/source/compiler/cmdcheck.c
    * recognize --version on platforms where '-' is option separator

  * harbour/source/compiler/hbusage.c
    * changed syntax description from:
         Syntax:  harbour <file[s][.prg]> [options]
      to:
         Syntax:  harbour <file[s][.prg]|@file> [options]

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jun 27 04:07:01 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 27 04:07:40 2007
Subject: [Harbour] ChangeLog 2007-06-27 10:05 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070627080701.GA28382@localhost.localdomain>

2007-06-27 10:05 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/hbgtcore.c
  * harbour/source/rtl/gtdos/gtdos.c
  * harbour/source/rtl/gtwin/gtwin.c
  * harbour/source/rtl/gtxwc/gtxwc.c
  * harbour/source/rtl/gtcrs/gtcrs.c
  * harbour/source/rtl/gtstd/gtstd.c
  * harbour/source/rtl/gtsln/gtsln.c
  * harbour/source/rtl/gttrm/gttrm.c
  * harbour/source/rtl/gtpca/gtpca.c
  * harbour/source/rtl/gtcgi/gtcgi.c
    * added support for CP translation in OUTSTD()/OUTERR() when
      they are not redirected to console

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Jun 27 09:27:10 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jun 27 09:27:22 2007
Subject: [Harbour] OS X Harbour install problem
In-Reply-To: <20070623101544.GB3583@localhost.localdomain>
References: <25768B82-27C0-4406-863B-4099C17E9835@syenar.hu>
	<20070623101544.GB3583@localhost.localdomain>
Message-ID: <89046EBD-2884-4E27-B0D9-3B2BD820385C@syenar.hu>

Hi Przemek,

> I do not know OSX. To install binaries you need sufficient
> rights to install files in /usr tree setting file owner, group
> and permissions.
> At the end of make_tgz.sh file you will find:
>
>     if [ \`id -u\` != 0 ]; then
>         echo "This package has to be installed from root account."
>         exit 1
>     fi

Okey, I've retried now to sudo from my admin account and it did work.

There seem to be some other problem though, as when running
harbour-1.1*.sh, it extracts everything and it finishes with this  
message:

----
(snip)
./usr/local/lib/harbour/libvm.a

gzip: stdin: unexpected end of file
----

I'm also getting missing symbols when trying to compile a test app  
(ac_test.prg):

----
silver:~/Desktop/harbour/bin vszakats$ hbmk ac_test.prg
Harbour devel build 1.1-1 Intl.
Copyright 1999-2007, http://www.harbour-project.org/
Compiling 'ac_test.prg'...
Lines 652, Functions/Procedures 4
Generating C source output to 'ac_test.c'... Done.
/usr/bin/ld: Undefined symbols:
_main
_HB_FUN_ACHOICE
_HB_FUN_ASIZE
_HB_FUN_DEVOUT
_HB_FUN_DEVPOS
_HB_FUN_HB_GTVERSION
_HB_FUN_HB_GT_CRS
_HB_FUN_INKEY
_HB_FUN_LASTKEY
_HB_FUN_LEN
_HB_FUN_LTRIM
_HB_FUN_MAXROW
_HB_FUN_PADR
_HB_FUN_QOUT
_HB_FUN_SCROLL
_HB_FUN_SETCOLOR
_HB_FUN_SETPOS
_HB_FUN_STR
_hb_vmExecute
_hb_vmProcessSymbolsEx
_s_defaultGT
collect2: ld returned 1 exit status
----

I've attached the std/err outputs of the build process.

(Can be that I'm doing something wrong)

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: make_tgz_darwin.zip
Type: application/zip
Size: 20936 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070627/6fa3d458/make_tgz_darwin-0001.zip
-------------- next part --------------

From harbour.01 at syenar.hu  Wed Jun 27 09:29:52 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jun 27 09:30:05 2007
Subject: [Harbour] SVN repository now live
In-Reply-To: <20070623121217.GA9547@localhost.localdomain>
References: <DE51219F-BF72-434A-97F4-8B7811B13E9B@syenar.hu>
	<20070623121217.GA9547@localhost.localdomain>
Message-ID: <791AC8EC-A4C1-4474-8181-0212E2A45258@syenar.hu>

Thanks for the confirmation Przemek.

I've also noticed it being faster for updates, commits and
even the repository web-view. Besides the better technology
of SVN, sf.net probably use some separate SVN servers, and
they are not that much overloaded as CVS.

Brgds,
Viktor

On 2007.06.23., at 14:12, Przemyslaw Czerpak wrote:

> On Tue, 19 Jun 2007, Szak?ts Viktor wrote:
>> The conversion got finished. Pls review it. Notice that I didn't
>> touch the dump or didn't do any manual tweaking on the repository
>> along the way (except fixing a few minor but fatal problems).
>> So if you think we need to do something more, pls shout, the
>> repository can be converted reuploaded in this case.
>
> I was working on Harbour using SVN for few days and I haven't noticed
> any problems. Everything works very nice, much faster then with CVS  
> and
> without CVS limitations. It was very good move. Thank you very much.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From jfl at mafact.com  Wed Jun 27 10:06:00 2007
From: jfl at mafact.com (J. Lefebvre)
Date: Wed Jun 27 10:07:59 2007
Subject: [Harbour] 2007-06-27 16:00 UTC+0200 J. Lefebvre Mafact
	(jfl/at/mafact.com)
Message-ID: <645b545a.1c7b8c4.5fae4a1.6784@mafact.com>

2007-06-27 16:00 UTC+0200 J. Lefebvre Mafact (jfl/at/mafact.com)

  * harbour/makefile.vc
    * Setting file extensions variables without double quotes for nmake
      Will overide those in common.mak

From e.m.giordano at emagsoftware.it  Wed Jun 27 10:07:27 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Jun 27 10:11:01 2007
Subject: [Harbour] Error in latest SVN
Message-ID: <011e01c7b8c4$7e10a7b0$0100a8c0@emag>

Fatal: 'obj\b32\pptable".obj"' does not exist - don't know how to make it

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From druzus at priv.onet.pl  Wed Jun 27 11:21:39 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 27 11:22:17 2007
Subject: [Harbour] OS X Harbour install problem
In-Reply-To: <89046EBD-2884-4E27-B0D9-3B2BD820385C@syenar.hu>
References: <25768B82-27C0-4406-863B-4099C17E9835@syenar.hu>
	<20070623101544.GB3583@localhost.localdomain>
	<89046EBD-2884-4E27-B0D9-3B2BD820385C@syenar.hu>
Message-ID: <20070627152139.GA18849@localhost.localdomain>

On Wed, 27 Jun 2007, Szak?ts Viktor wrote:
> There seem to be some other problem though, as when running
> harbour-1.1*.sh, it extracts everything and it finishes with this  
> message:
> ----
> (snip)
> ./usr/local/lib/harbour/libvm.a
> gzip: stdin: unexpected end of file
> ----

Do you have the same message when you extract archive file only?
F.e. after:
    ./harbour-1.1*.sh --extract

> I'm also getting missing symbols when trying to compile a test app  
> (ac_test.prg):
> ----
> silver:~/Desktop/harbour/bin vszakats$ hbmk ac_test.prg
> Harbour devel build 1.1-1 Intl.
> Copyright 1999-2007, http://www.harbour-project.org/
> Compiling 'ac_test.prg'...
> Lines 652, Functions/Procedures 4
> Generating C source output to 'ac_test.c'... Done.
> /usr/bin/ld: Undefined symbols:
> _main
> _HB_FUN_ACHOICE
> _HB_FUN_ASIZE
> _HB_FUN_DEVOUT
[...]

The shared library harbour*.dylib was not created probably due to
errors caused by missing slang and slang-devel packages. If you will
static libraries (-static switch in hb* scripts) they should work.
Please check.
If missing SLANG is the only one problem then you can make
    export HB_WITHOUT_GTSLN=yes
before ./make_tgz.sh and GTSLN will not be compiled. Sooner or later
we will have to look for sth like autoconf to automatically detect
installed tools/libraries with their versions and paths in different
*nixes. I can extend make_*.sh to look for some header files in well
known locations but if I will be extending them farther to cover all
possible cases then I will end with autoconf replacement. I do not
think it's good idea. I'll add some simple tests yet but we should
think about creating some configuration file(s) with standard build
settings using autoconf.
If someone has a while and can do that then it will be nice if not
then I'll make it somewhere in the future.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jun 27 11:28:46 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 27 11:29:21 2007
Subject: [Harbour] SVN repository now live
In-Reply-To: <791AC8EC-A4C1-4474-8181-0212E2A45258@syenar.hu>
References: <DE51219F-BF72-434A-97F4-8B7811B13E9B@syenar.hu>
	<20070623121217.GA9547@localhost.localdomain>
	<791AC8EC-A4C1-4474-8181-0212E2A45258@syenar.hu>
Message-ID: <20070627152846.GB18849@localhost.localdomain>

On Wed, 27 Jun 2007, Szak?ts Viktor wrote:
> I've also noticed it being faster for updates, commits and
> even the repository web-view. Besides the better technology
> of SVN, sf.net probably use some separate SVN servers, and
> they are not that much overloaded as CVS.

It's very important that most of operations are done locally.
In fast LAN maybe it's not such critical and noticeable as in
Internet. Now my script to create some base version of ChangeLog
(status,diff,...) with SVN needs 1 sec. and with CVS when from
20 to few minutes when SF server is heavy loaded. It greatly
helps when I can use SVN commands "online" with waiting for
results like in CVS.
BTW What should we do with BETA branch?

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Jun 27 12:55:07 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jun 27 12:55:20 2007
Subject: [Harbour] OS X Harbour install problem
In-Reply-To: <20070627152139.GA18849@localhost.localdomain>
References: <25768B82-27C0-4406-863B-4099C17E9835@syenar.hu>
	<20070623101544.GB3583@localhost.localdomain>
	<89046EBD-2884-4E27-B0D9-3B2BD820385C@syenar.hu>
	<20070627152139.GA18849@localhost.localdomain>
Message-ID: <6D0EA2D4-B446-4A39-ABC4-FD156A9BC5D7@syenar.hu>

>> (snip)
>> ./usr/local/lib/harbour/libvm.a
>> gzip: stdin: unexpected end of file
>> ----
>
> Do you have the same message when you extract archive file only?
> F.e. after:
>     ./harbour-1.1*.sh --extract

Yes.

----
silver:/Users/Shared vszakats$ gzip -d harbour-1.1.1- 
darwin_8.10.0.bin.tar.gz

gzip: harbour-1.1.1-darwin_8.10.0.bin.tar.gz: unexpected end of file
----

>> I'm also getting missing symbols when trying to compile a test app
>> (ac_test.prg):
>> ----
>> silver:~/Desktop/harbour/bin vszakats$ hbmk ac_test.prg
>> Harbour devel build 1.1-1 Intl.
>> Copyright 1999-2007, http://www.harbour-project.org/
>> Compiling 'ac_test.prg'...
>> Lines 652, Functions/Procedures 4
>> Generating C source output to 'ac_test.c'... Done.
>> /usr/bin/ld: Undefined symbols:
>> _main
>> _HB_FUN_ACHOICE
>> _HB_FUN_ASIZE
>> _HB_FUN_DEVOUT
> [...]
>
> The shared library harbour*.dylib was not created probably due to
> errors caused by missing slang and slang-devel packages. If you will
> static libraries (-static switch in hb* scripts) they should work.
> Please check.
> If missing SLANG is the only one problem then you can make
>     export HB_WITHOUT_GTSLN=yes
> before ./make_tgz.sh and GTSLN will not be compiled. Sooner or later
> we will have to look for sth like autoconf to automatically detect
> installed tools/libraries with their versions and paths in different
> *nixes. I can extend make_*.sh to look for some header files in well
> known locations but if I will be extending them farther to cover all
> possible cases then I will end with autoconf replacement. I do not
> think it's good idea. I'll add some simple tests yet but we should
> think about creating some configuration file(s) with standard build
> settings using autoconf.
> If someone has a while and can do that then it will be nice if not
> then I'll make it somewhere in the future.

Okey I fear we won't get away without autoconf. But until then
your solution is okey I think.

With -static it worked fine.

GTTRM worked just perfect under OSX. The only really minor
problem I've noticed is that it didn't reset the console color to  
it's original
state.

This was just a simple test (with ac_test.prg), I didn't go into deeper
matters like char encoding yet.

Thanks for this GT Przemek.

Brgds,
Viktor



From druzus at priv.onet.pl  Wed Jun 27 13:02:42 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 27 13:03:18 2007
Subject: [Harbour] ChangeLog 2007-06-27 19:00 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070627170241.GA19448@localhost.localdomain>

2007-06-27 19:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/common.mak
    ! removed double quotas from files extension definitions
      Neither Borland make nor NMake can accept them, sorry my
      fault but I used to work with GNU make
  * harbour/makefile.vc
    - removed recently added by J. Lefebvre Mafact alternative verion
      of file extnesions. Thank you for your help but it was my mistake
      and the default definitions in common.mak should not use quotas

  * harbour/source/rtl/datesx.c
  * harbour/source/common/hbdate.c
    * accept date strings longer then 8 characters in STOD() just like
      in CT3
    * changed casting in date decoding code to be strict Clipper compatible
      and cover date string validation by HB_C52_STRICT macro.
      Now STOD() can give _EXACTLY_ the same results as Clipper for wrong
      date strings if you disable code covered by #ifndef HB_C52_STRICT
      in hb_dateStrGet(). It fixes errors reported by hbtest in:
         stod("19 90905") -> "17490905"
         stod("199 0905") -> "19740905"
      but I do not know if you want to have it as default.

  * harbour/source/rtl/gtsln/gtsln.c
    ! fixed variable declaration to be ANSI C compatible

best regards,
Przemek
From jfl at mafact.com  Wed Jun 27 14:44:00 2007
From: jfl at mafact.com (J. Lefebvre)
Date: Wed Jun 27 14:45:54 2007
Subject: [Harbour] ChangeLog 2007-06-27 19:00 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <42328642.1c7b8eb.b32217.29@mafact.com>

Hi Przemek,

Thanks for your job ;-)

As I was not sure quoted extension where working in Borland, I only changed makefile.vc.

Don't hesitate to ask me to test any msvc compile, even by sending me directly some modification before to commit.

Best regards,

JF,

PS : I sended a mail with my changelog update but it seem to be lost in the net ... :-/  

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Wednesday, June 27, 2007 7:03 PM
To: Harbour Project Main Developer List.
Subject: [Harbour] ChangeLog 2007-06-27 19:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)

2007-06-27 19:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/common.mak
    ! removed double quotas from files extension definitions
      Neither Borland make nor NMake can accept them, sorry my
      fault but I used to work with GNU make
  * harbour/makefile.vc
    - removed recently added by J. Lefebvre Mafact alternative verion
      of file extnesions. Thank you for your help but it was my mistake
      and the default definitions in common.mak should not use quotas

  * harbour/source/rtl/datesx.c
  * harbour/source/common/hbdate.c
    * accept date strings longer then 8 characters in STOD() just like
      in CT3
    * changed casting in date decoding code to be strict Clipper compatible
      and cover date string validation by HB_C52_STRICT macro.
      Now STOD() can give _EXACTLY_ the same results as Clipper for wrong
      date strings if you disable code covered by #ifndef HB_C52_STRICT
      in hb_dateStrGet(). It fixes errors reported by hbtest in:
         stod("19 90905") -> "17490905"
         stod("199 0905") -> "19740905"
      but I do not know if you want to have it as default.

  * harbour/source/rtl/gtsln/gtsln.c
    ! fixed variable declaration to be ANSI C compatible

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour


From druzus at priv.onet.pl  Wed Jun 27 15:02:43 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jun 27 15:03:18 2007
Subject: [Harbour] ChangeLog 2007-06-27 21:02 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070627190241.GA16681@localhost.localdomain>

2007-06-27 21:02 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gttrm/gttrm.c
    * restore default color on exit

  * harbour/source/rdd/dbf1.c
    * cleaned few warnings

  * harbour/make_tgz.sh
  * harbour/make_gnu.sh
    * if HB_WITHOUT_GTSLN not set then check if slang.h exists
      in one of known locations and set HB_WITHOUT_GTSLN automatically

best rgards,
Przemek
From e.m.giordano at emagsoftware.it  Wed Jun 27 15:51:55 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Jun 27 15:52:32 2007
Subject: [Harbour] ChangeLog 2007-06-27 19:00 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20070627170241.GA19448@localhost.localdomain>
Message-ID: <007101c7b8f4$9da9cb30$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoledi 27 giugno 2007 19.02
Oggetto: [Harbour] ChangeLog 2007-06-27 19:00 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> 2007-06-27 19:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/common.mak
>    ! removed double quotas from files extension definitions
>      Neither Borland make nor NMake can accept them, sorry my
>      fault but I used to work with GNU make

Thank you!

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Wed Jun 27 16:58:05 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jun 27 16:58:16 2007
Subject: [Harbour] ChangeLog 2007-06-27 19:00 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070627170241.GA19448@localhost.localdomain>
References: <20070627170241.GA19448@localhost.localdomain>
Message-ID: <FAE6A719-C3B0-48BC-89D0-062CBB86FDFB@syenar.hu>

Hi Przemek,

>   * harbour/source/rtl/datesx.c
>   * harbour/source/common/hbdate.c
>     * accept date strings longer then 8 characters in STOD() just like
>       in CT3
>     * changed casting in date decoding code to be strict Clipper  
> compatible
>       and cover date string validation by HB_C52_STRICT macro.
>       Now STOD() can give _EXACTLY_ the same results as Clipper for  
> wrong
>       date strings if you disable code covered by #ifndef  
> HB_C52_STRICT
>       in hb_dateStrGet(). It fixes errors reported by hbtest in:
>          stod("19 90905") -> "17490905"
>          stod("199 0905") -> "19740905"
>       but I do not know if you want to have it as default.

Just by looking at the change, now hb_dateStrGet() will crash
if the passed szDate is NULL. This can happen in Harbour when
HB_FAST_STOD is enabled and STOD() is called with a non-string
on app level. It's a public API call, so it can happen for 3rd party  
code
too.

I tend to like to strictly compatible version better, because
however wierd it is, it is compatible and is _faster_ than the
non-strict version with the char-by-char input validation, and
SToD() is often used in tight loops, filters, etc. Dunno what
difference it makes altogether, but this low-level function looks
slower now.

Brgds,
Viktor

>
>   * harbour/source/rtl/gtsln/gtsln.c
>     ! fixed variable declaration to be ANSI C compatible
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Wed Jun 27 16:58:26 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jun 27 16:58:32 2007
Subject: [Harbour] ChangeLog 2007-06-27 21:02 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070627190241.GA16681@localhost.localdomain>
References: <20070627190241.GA16681@localhost.localdomain>
Message-ID: <BA783A4C-28F5-49C0-B296-7A46FE93A959@syenar.hu>

Thanks a lot.

Brgds,
Viktor

On 2007.06.27., at 21:02, Przemyslaw Czerpak wrote:

> 2007-06-27 21:02 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/rtl/gttrm/gttrm.c
>     * restore default color on exit
>
>   * harbour/source/rdd/dbf1.c
>     * cleaned few warnings
>
>   * harbour/make_tgz.sh
>   * harbour/make_gnu.sh
>     * if HB_WITHOUT_GTSLN not set then check if slang.h exists
>       in one of known locations and set HB_WITHOUT_GTSLN automatically
>
> best rgards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From alex_degarate at hotmail.com  Wed Jun 27 17:23:13 2007
From: alex_degarate at hotmail.com (Alejandro de Garate)
Date: Wed Jun 27 17:23:48 2007
Subject: [Harbour] Re: SVN repository now live
Message-ID: <BAY137-F22DB1503D647827A44E7EC850A0@phx.gbl>


Antonio Linares wrote:

>>on my Win95 machine
>
>Maybe its time to upgrade your system... :-)
>
>I wonder why you don't use Windows 3.1 ;-)

Why you always have to said negative and sarcastic comments ?

I have a Win95 machine too, and in contrary I see as an advantage that 
Harbour can compile, run
and execute very well in an old Pentium (1) machine.

It's a pity I can't test now Harbour due changes from CVS to SVN, I can 
understand the change will bring benefits for the project, but not your 
sarcastic comments about the machine people are using.

Alejandro

_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today it's FREE! 
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/

From harbour.01 at syenar.hu  Wed Jun 27 18:39:23 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jun 27 18:39:38 2007
Subject: [Harbour] SVN nightly source + backup. Was: SVN repository now live
In-Reply-To: <BAY137-F22DB1503D647827A44E7EC850A0@phx.gbl>
References: <BAY137-F22DB1503D647827A44E7EC850A0@phx.gbl>
Message-ID: <51536EE0-7D5F-44D7-8C7F-EAB7C7533763@syenar.hu>

Alehandro, Phil,

> It's a pity I can't test now Harbour due changes from CVS to SVN, I  
> can understand the change will bring benefits for the project, but  
> not your sarcastic comments about the machine people are using.

I'm not sure if this is your only machine, but if you have another one
running any non-DOS based OS, you can checkout the source there,
and continue doing Win95 tests. It is important that we still test
Harbour on these older OSes.

I'm also not sure if still have a daily source snapshot available
somewhere, if not, I think it would be a nice addition for everyone
not having a machine able to checkout directly from the repository
(there can be several reasons for that, just one of them is Win95).

Phil, can we setup a nightly source snapshot on www.harbour-project.org?

It would be also nice to rsync the whole repository every day to our
own server to have a repository backup. Can we do this too?

This is the command we need for the latter:
rsync -av harbour-project.svn.sourceforge.net::svn/harbour-project/* .

Brgds,
Viktor

From antonioharbour at gmail.com  Wed Jun 27 20:59:06 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Jun 27 18:59:16 2007
Subject: [Harbour] Re: SVN repository now live
In-Reply-To: <BAY137-F22DB1503D647827A44E7EC850A0@phx.gbl>
References: <BAY137-F22DB1503D647827A44E7EC850A0@phx.gbl>
Message-ID: <9114F573-0CAA-4775-AB81-7CABAF972EC5@gmail.com>

Alejandro,

Windows 95 is 12 years old

Don't you think that its enough time for an upgrade ? :-)

I don't see anything negative on such comment,

regards,

Antonio
From philb at philb.us  Wed Jun 27 21:17:38 2007
From: philb at philb.us (Phil Barnett)
Date: Wed Jun 27 21:17:42 2007
Subject: [Harbour] SVN nightly source + backup. Was: SVN repository now
	live
In-Reply-To: <51536EE0-7D5F-44D7-8C7F-EAB7C7533763@syenar.hu>
References: <BAY137-F22DB1503D647827A44E7EC850A0@phx.gbl>
	<51536EE0-7D5F-44D7-8C7F-EAB7C7533763@syenar.hu>
Message-ID: <200706272117.38856.philb@philb.us>

On Wednesday 27 June 2007 18:39, Szak?ts Viktor wrote:
> Phil, can we setup a nightly source snapshot on www.harbour-project.org?
>
> It would be also nice to rsync the whole repository every day to our
> own server to have a repository backup. Can we do this too?

Yes, I'll have something like this going as soon as I can spend some time on 
it. No problem.

-- 
Phil Barnett
AI4OF
SKCC #600
From druzus at priv.onet.pl  Thu Jun 28 06:54:52 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jun 28 06:55:28 2007
Subject: [Harbour] ChangeLog 2007-06-27 19:00 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <FAE6A719-C3B0-48BC-89D0-062CBB86FDFB@syenar.hu>
References: <20070627170241.GA19448@localhost.localdomain>
	<FAE6A719-C3B0-48BC-89D0-062CBB86FDFB@syenar.hu>
Message-ID: <20070628105452.GA24123@localhost.localdomain>

On Wed, 27 Jun 2007, Szak?ts Viktor wrote:
> Just by looking at the change, now hb_dateStrGet() will crash
> if the passed szDate is NULL. This can happen in Harbour when
> HB_FAST_STOD is enabled and STOD() is called with a non-string
> on app level. It's a public API call, so it can happen for 3rd party  
> code too.

Yes, my fault. I forgot about szDate != NULL test. I'll add it ASAP.

> I tend to like to strictly compatible version better, because
> however wierd it is, it is compatible and is _faster_ than the
> non-strict version with the char-by-char input validation, and
> SToD() is often used in tight loops, filters, etc. Dunno what
> difference it makes altogether, but this low-level function looks
> slower now.

Looks slower but please remember it's C code. If you make real tests
then you will find that the overhead is minimal when used inside STOD()
And if you realy wnat to make this code as fast as possible then if
we should change:
   *piYear  = ( ( int ) ( szDate[ 0 ] - '0' ) * 1000 ) +
              ( ( int ) ( szDate[ 1 ] - '0' ) * 100 ) +
              ( ( int ) ( szDate[ 2 ] - '0' ) * 10 ) +
                ( int ) ( szDate[ 3 ] - '0' );
to:
   *piYear  = ( ( ( int ) ( szDate[ 0 ] - '0' )   * 10 +
                  ( int ) ( szDate[ 1 ] - '0' ) ) * 10 +
                  ( int ) ( szDate[ 2 ] - '0' ) ) * 10 +
                  ( int ) ( szDate[ 3 ] - '0' );

On many CPUs like x86 C compilers can save few instructions, f.e. GCC
can eliminate 3 leal and 1 sall.
The most important reason for me to keep szDate validation is accessing
uninitialized memory when someone pass shorter string to hb_dateEncStr()
and this is later reported by systems like ValGrind or CodeGuard but
we can keep string size validation inside [HB_]STOD() function so I'll
remove the condition.
BTW Clipper does not check string size, f.e. it will decode these dates:
    ? stod("199"+chr(0)+"0905")
    ? stod( "1999096" )

best regards,
Przemek
From druzus at priv.onet.pl  Thu Jun 28 10:14:21 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jun 28 10:14:58 2007
Subject: [Harbour] ChangeLog 2007-06-28 16:15 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070628141421.GA29857@localhost.localdomain>

2007-06-28 16:15 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/cdpapi.c
    ! fixed possible GPF and some other problems in HB_TRANSLATE()

  * harbour/source/rtl/dateshb.c
  * harbour/source/rtl/datesx.c
  * harbour/source/common/hbdate.c
    * make STOD() exact Clipper compatible

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Jun 28 12:06:56 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jun 28 12:07:03 2007
Subject: [Harbour] ChangeLog 2007-06-28 16:15 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070628141421.GA29857@localhost.localdomain>
References: <20070628141421.GA29857@localhost.localdomain>
Message-ID: <07ADF9FB-47EF-4584-A0A7-16F48F8E968A@syenar.hu>

Thanks!

Brgds,
Viktor

On 2007.06.28., at 16:14, Przemyslaw Czerpak wrote:

> 2007-06-28 16:15 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/rtl/cdpapi.c
>     ! fixed possible GPF and some other problems in HB_TRANSLATE()
>
>   * harbour/source/rtl/dateshb.c
>   * harbour/source/rtl/datesx.c
>   * harbour/source/common/hbdate.c
>     * make STOD() exact Clipper compatible
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Jun 28 12:13:24 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jun 28 12:13:36 2007
Subject: [Harbour] ChangeLog 2007-06-27 19:00 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070628105452.GA24123@localhost.localdomain>
References: <20070627170241.GA19448@localhost.localdomain>
	<FAE6A719-C3B0-48BC-89D0-062CBB86FDFB@syenar.hu>
	<20070628105452.GA24123@localhost.localdomain>
Message-ID: <162DBB05-A05E-491D-91F4-A2DF38B3C036@syenar.hu>

> Looks slower but please remember it's C code. If you make real tests
> then you will find that the overhead is minimal when used inside  
> STOD()
> And if you realy wnat to make this code as fast as possible then if
> we should change:
>    *piYear  = ( ( int ) ( szDate[ 0 ] - '0' ) * 1000 ) +
>               ( ( int ) ( szDate[ 1 ] - '0' ) * 100 ) +
>               ( ( int ) ( szDate[ 2 ] - '0' ) * 10 ) +
>                 ( int ) ( szDate[ 3 ] - '0' );
> to:
>    *piYear  = ( ( ( int ) ( szDate[ 0 ] - '0' )   * 10 +
>                   ( int ) ( szDate[ 1 ] - '0' ) ) * 10 +
>                   ( int ) ( szDate[ 2 ] - '0' ) ) * 10 +
>                   ( int ) ( szDate[ 3 ] - '0' );
>
> On many CPUs like x86 C compilers can save few instructions, f.e. GCC
> can eliminate 3 leal and 1 sall.
> The most important reason for me to keep szDate validation is  
> accessing
> uninitialized memory when someone pass shorter string to  
> hb_dateEncStr()
> and this is later reported by systems like ValGrind or CodeGuard but
> we can keep string size validation inside [HB_]STOD() function so I'll
> remove the condition.
> BTW Clipper does not check string size, f.e. it will decode these  
> dates:
>     ? stod("199"+chr(0)+"0905")
>     ? stod( "1999096" )

I remember hunting down Clipper PM GPFs about 10 years ago
(for weeks), which were caused just because of that. The STOD()
included in one of the 3rd party RDDs (S*ccessware I believe)
didn't have any length checking (well, the hb_retds() CA-Clipper
doc didn't warn for this requirement either). DBFAXS's STOD() suffers
from the same problem, and it's important to make sure my own
STOD() implementation gets linked first otherwise all innocent
STOD("") calls become potentially dangerous.

Brgds,
Viktor

From druzus at priv.onet.pl  Thu Jun 28 15:54:49 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jun 28 15:55:26 2007
Subject: [Harbour] ChangeLog 2007-06-28 21:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070628195449.GA4218@localhost.localdomain>

2007-06-28 21:53 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gttrm/gttrm.c
    * disable ternminal signals at startup
    * redraw screen after __RUN()

best regards,
Przemek
From dmacias at mail.udg.mx  Thu Jun 28 19:40:45 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Jun 28 19:40:57 2007
Subject: [Harbour] Re: MySQL on OS/2
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <468446FD.7000902@mail.udg.mx>

Przemek:

I saw your changes:

2007-06-26 23:55 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
...
   * harbour/contrib/mysql/mysql.c
     * changed code to not use non standard function filelength()
       and optimized

and I tested under OS/2 with MySQL 4.1 ( MySQL 5.0.37 and 5.0.41 are
missing include files and/or lib files and/or dll files and can not be 
completed for Harbour ), and it work without problems

I tested sample (included below) for error provided by Mitja and does 
not fail, so seem that this problem is fixed, as you supposed recently:

 >   Error BASE/3000 Argument error: __CLSADDMSG
 >   Called from __CLSADDMSG(0)
 >   Called from __OBJADDDATA(214)
 >   Called from TMYSQLQUERY:NEW(401)
 >   Called from TMYSQLTABLE:NEW(854)
 >   Called from TMYSQLSERVER:QUERY(1670)
 >   Called from MAIN ...
 >
 >   On line 401 in ../contrib/tmysql.prg is:
 >       __ObjAddData(Self,::aFieldStruct[nI][MYSQL_FS_NAME])

harbour.test table have 0 records

Mitja, can you check if it is fixed ?


In additional tests, using Clipxnet(with MySQL support)+dbfmysql.prg 
under OS/2 I added libpdt table and records to harbour database in 
www.freesql.org, so this table can be used for tests too
Except for slow Internet, records transference from DBF to MySQL worked fine

David Macias



 >
 > Mitja Podgornik

 > /*-----------------------------------------------*/
 >
 > static oServer, oQuery
 >
 > proc main()
 >
 > oServer:=TMySQLServer():New("www.freesql.org", "harbour", "harbour" )
 >
 > if oServer:NetErr()
 >   ? oServer:Error()
 >   return nil
 > endif
 >
 > // here it happens...
 > oQuery:=oServer:Query("SELECT field1, field2 FROM harbour.test")
 > if oServer:NetErr()
 >   ? oServer:Error()
 >   return nil
 > endif
 >
 > oQuery:destroy()
 >
 > return nil
 >


David Arturo Macias Corona wrote:
> Przemek, Maurilio, ...
> 
> Years ago I was working with MySQL 3.23.50 + Harbour under OS/2, and it 
> worked fine
> 
> Now I am testing MySQL 5.0.37+Harbour beta3 under OS/2-eCS
> 
> mysqld startup fine and mysql client work as expected, so MySQL 5.0.37 
> are working under eCS without troubles
> 
> Building Harbour hbmysql.a lib show these results:
> -----------------------------------------------
> ../../mysql.c:366: error: conflicting types for `filelength'
> E:/usr/include/io.h:60: error: previous declaration of `filelength'
> make[1]: *** [mysql.o] Error 1
> make: *** [descend] Error 2
> -----------------------------------------------
> 
> harbour\contrib\mysql\mysql.c contain:
> ------------------------------
> #ifdef __GNUC__
> long filelength( int handle )
> {
>     int nEnd = hb_fsSeek( handle, 0 , 2 );
>     int nStart = hb_fsSeek( handle , 0 , 0 );
>     return nEnd - nStart;
> }
> #endif
> ------------------------------
> 
> and /usr/include/io.h:60 ( gcc 3.3.5 ) are:
> ------------------------------
> off_t filelength (int);
> ------------------------------
> 
> 
> How can it be solved ?
> 
> 
> David Macias
> 
> 
> 




From druzus at priv.onet.pl  Thu Jun 28 19:44:59 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jun 28 19:45:34 2007
Subject: [Harbour] OS X Harbour install problem
In-Reply-To: <6D0EA2D4-B446-4A39-ABC4-FD156A9BC5D7@syenar.hu>
References: <25768B82-27C0-4406-863B-4099C17E9835@syenar.hu>
	<20070623101544.GB3583@localhost.localdomain>
	<89046EBD-2884-4E27-B0D9-3B2BD820385C@syenar.hu>
	<20070627152139.GA18849@localhost.localdomain>
	<6D0EA2D4-B446-4A39-ABC4-FD156A9BC5D7@syenar.hu>
Message-ID: <20070628234458.GA13934@localhost.localdomain>

On Wed, 27 Jun 2007, Szak?ts Viktor wrote:
> >Do you have the same message when you extract archive file only?
> >F.e. after:
> >    ./harbour-1.1*.sh --extract
> Yes.
> silver:/Users/Shared vszakats$ gzip -d harbour-1.1.1- 
> darwin_8.10.0.bin.tar.gz
> gzip: harbour-1.1.1-darwin_8.10.0.bin.tar.gz: unexpected end of file

Seems that in your system -z option in TAR uses different GZIP
version then gzip accessible by command line. Strange, probably
    tar -xzvf darwin_8.10.0.bin.tar.gz
will not show any errors. BTW do you have only one tar or 'tar'
and 'gtar' are different programs in your system?

> GTTRM worked just perfect under OSX. The only really minor
> problem I've noticed is that it didn't reset the console color to  
> it's original
> state.
> This was just a simple test (with ac_test.prg), I didn't go into deeper
> matters like char encoding yet.

In test directory you will find: gtchars.prg, gtcolors.prg, gtkeys.prg
Just try them. You can also make some test with terminal in UTF8/ISO
mode. Most of terminals can switch to UTF-8 mode by:
    echo -ne '\033%G'
and to ISO mode with user character set by:
    echo -ne '\033%@\033(K'

In UTF-8 mode GTTRM should show all possible characters if your terminal
uses unicode font.
Please also note that all terminal GT drivers I was working on can show
different characters when dispbox() is used then in dispout() so it's
possible to use codepages which do not have box characters, f.e. in my
country iso-8859-2 and still display nice boxes (for characters put with
dispbox() I switch to ACSC or CP437), gtchars.prg should illustrate it.

best regards,
Przemek
From dmacias at mail.udg.mx  Thu Jun 28 19:49:46 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Jun 28 19:49:52 2007
Subject: [Harbour] Re: Printing on Linux
In-Reply-To: <20070622122243.GA6197@localhost.localdomain>
References: <3.0.6.16.20030422050200.1d777414@mail.udg.mx>
	<19513403721.20030423122031@belacy.belgorod.su>
	<467BB582.5070707@mail.udg.mx>
	<20070622122243.GA6197@localhost.localdomain>
Message-ID: <4684491A.7030102@mail.udg.mx>

This solution worked for me very well

I post messages here so it can serve to anyone with same problem, now or 
in future

David Macias



Przemyslaw Czerpak wrote:
> It's not good idea to send data directly to printer device.
> You will need sufficient privileges to access device, you
> are creating conflicts with other applications (users)
> which will try to print in the same time, you will not be
> able to print to remote printers, etc.
>   
Yes, I suspected it when I was testing

This was a kind of partial solution that you find when are researching
how, even if it is dangerous because can collide with more than 1 users
printing

>> Or there are other alternatives ?
>>     
>
> Yes. Long time ago I implemented hb_fsPOpen function and added
> support for:
>     SET PRINTER TO PIPE <*cmd*>
> which was translate to:
>     SET PRINTER TO "|" + #<cmd>
> I sent this code to Harbour devel list (I haven't write access)
> and it was committed by few developers, f.e.:
>
> 2002-03-03 16:20 GMT-3 Luiz Rafael Culik <culik@sl.conex.net>
>   * include/hbapifs.h
>    + prototype for hb_fsPOpen() api
>   * source/rtl/set.c
>     source/rtl/filesys.c
>     * Added Code to Support SET PRINTER TO PIPE <cmd>
>     Code provided by Przemyslaw CzerPak druzus@polbox.com
>
> and later:
>
>   
>> 2002-03-19 12:45 UTC-0500 David G. Holm <dholm@jsd-llc.com>
>>  * source/rtl/set.c
>>    + Implemented Dave Pearson's idea for having SET PRINTER
>>      default to "|lpr" when HB_OS_UNIX is defined.
>>     
>
> Now just simply define printer in your Linux system using tools
> existing in your Linux distribution or check the name of already
> defined printer(s) and then make:
>
>     SET PRINTER TO "|lpr -P<printername>"
>
> using only "|lpr" (default setting) usually chose 'lp' printer
> (like "|lpr -Plp") which should be default one but recently some
> Linux distributions stop to set 'lp' alias to default printer
> so it may not work.
> Using this method you can send raw data to printer (just like in DOS)
> but also some other formats which will be recognized by your printing
> system, f.e. most of them will recognize popular image formats but
> all should recognize postscript and send it directly to postscript
> printers or translate to printer codes. So if you will create postscript
> output then you will be able to use _ANY_ printers supported by Linux
> directly or remotely.
>   

My "raw" printer name is "P1", so applying
   SET( _SET_PRINTFILE, "|lpr -PP1" )
goes to printer directly
My problem of printing as "DOS style" in Linux has been solved

It is a very interesting and useful solution, because as you said, you
can use "_ANY_ printers supported by Linux" in either raw or other format

Thanks for your _GREAT_ help

David Macias



Solved, partially    :-)

"lpt1" is /dev/lp0
Using:
   SET( _SET_PRINTFILE, "/dev/lp0" )
create /dev/lp0.prn and does not go to printer

If I copy:
  cp /dev/lp0.prn /dev/lp0
it goes to printer requesting overwrite

It exist /dev/printers/0 too, with symlink ../lp0

Using:
   SET( _SET_PRINTFILE, "/dev/printers/0" )
create /dev/printers/0.prn and does not go to printer

renaming /dev/printers/0 to /dev/printers/0.prn (adding .prn ext) then 
output of:
    SET( _SET_PRINTFILE, "/dev/printers/0" )
or SET( _SET_PRINTFILE, "/dev/printers/0.prn" )
goes directly to printer

How to avoid/change automatic adding of ".prn" extension in SET( 
_SET_PRINTFILE ) ?

so I can use:
     SET( _SET_PRINTFILE, "/dev/lp0" )
or  SET( _SET_PRINTFILE, "/dev/printers/0" )
to send to printer directly

Or there are other alternatives ?

David Macias




Hi Przemek:

I am migrating Windows/Harbour programs to Linux/Harbour programs, and I
am halted by a novice issue: printing

How can I do this on Linux/Harbour ?

------------------------------
SET PRIN TO "PRN" ; SET PRIN ON
.., print
SET PRIN OFF ; SET PRIN TO
------------------------------

I need to print as in DOS, but in Linux, directly to ports "prn", "lpt1:",
"lpt2:", ...

Some thing need to set/configure under Linux (Mandriva 2007.1 Free
Spring)  ?

I searched for info in Harbour sources, but nearest I found was default
value "|lpr", but nothing appear in printer


Changelog.013
===========
2002-03-19 12:45 UTC-0500 David G. Holm <dholm@jsd-llc.com>
  * source/rtl/set.c
    + Implemented Dave Pearson's idea for having SET PRINTER
      default to "|lpr" when HB_OS_UNIX is defined.

set.c
===
#ifdef HB_OS_UNIX
   hb_set.HB_SET_PRINTFILE = ( char * ) hb_xgrab( 5 );
   memcpy( hb_set.HB_SET_PRINTFILE, "|lpr", 5 ); /* Default printer
device */
#else
   hb_set.HB_SET_PRINTFILE = ( char * ) hb_xgrab( 4 );
   memcpy( hb_set.HB_SET_PRINTFILE, "PRN", 4 ); /* Default printer device */
#endif


David Macias





From druzus at priv.onet.pl  Fri Jun 29 04:45:28 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun 29 04:46:04 2007
Subject: [Harbour] Re: SVN repository now live
In-Reply-To: <4678DA4D.5061@synel.co.il>
References: <4678DA4D.5061@synel.co.il>
Message-ID: <20070629084528.GA3136@localhost.localdomain>

On Wed, 20 Jun 2007, Chen Kedem wrote:
> I had downloaded SVN files from:
> http://subversion.tigris.org/servlets/ProjectDocumentList?folderID=91
> http://subversion.tigris.org/files/documents/15/38203/svn-win32-1.4.4.zip
> But when I try to execute svn.exe on my Win95 machine, it complains
> about a missing functions in ADVAPI32.DLL (this is a system DLL) and
> refuse to work. So, now I don't have access to the repository.
> I hate it when tools that long worked are replaced with tools
> that simply don't work in my environment.


You can also look for alternative SVN binaries or client implementation.
Using google I've just found:
  http://tortoisesvn.net/node/180
  http://www.syntevo.com/smartsvn/?origin=gaw&gclid=CPTfxZn2gI0CFQ8lXgod3H2MSg
  http://www.filetransit.com/view.php?id=33931 (shareware)

best regards,
Przemek
From dmacias at mail.udg.mx  Fri Jun 29 07:43:51 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Jun 29 07:43:53 2007
Subject: [Harbour] Tip lib
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <4684F077.4080607@mail.udg.mx>

I tried to build Tip lib under beta3/Win32/BCC/make_b32.bat and these 
are the errors:

MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
	..\..\bin\b32\harbour.exe url.prg -q0 -w -es2 -gc0 -n -i..\..\include 
-o..\..\obj\b32\url.c
url.prg(171) Error E0041  Bound error: 'Numeric'
url.prg(191) Error E0041  Bound error: 'Numeric'
url.prg(218) Error E0041  Bound error: 'Numeric'
3 errors

No code generated

** error 1 ** deleting ..\..\obj\b32\url.c


which are:
171:
    IF Len( ::cPath ) == 0 .or. ::cPath[-1] != "/"
191:
    IF Len( ::cPath ) == 0 .or. ::cPath[-1] != "/"
218:
       cData[-1] = ""


David Macias



From druzus at priv.onet.pl  Fri Jun 29 07:59:00 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun 29 07:59:36 2007
Subject: [Harbour] Tip lib
In-Reply-To: <4684F077.4080607@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<4684F077.4080607@mail.udg.mx>
Message-ID: <20070629115900.GA13522@localhost.localdomain>

On Fri, 29 Jun 2007, David Arturo Macias Corona wrote:
> I tried to build Tip lib under beta3/Win32/BCC/make_b32.bat and these 
> are the errors:
> MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
> 	..\..\bin\b32\harbour.exe url.prg -q0 -w -es2 -gc0 -n 
> 	-i..\..\include -o..\..\obj\b32\url.c
> url.prg(171) Error E0041  Bound error: 'Numeric'
> url.prg(191) Error E0041  Bound error: 'Numeric'
> url.prg(218) Error E0041  Bound error: 'Numeric'
> 3 errors
> No code generated
> ** error 1 ** deleting ..\..\obj\b32\url.c
> 
> which are:
> 171:
>    IF Len( ::cPath ) == 0 .or. ::cPath[-1] != "/"
> 191:
>    IF Len( ::cPath ) == 0 .or. ::cPath[-1] != "/"
> 218:
>       cData[-1] = ""

It's correct. These code is taken from xHarbour and can be compiled
by Harbour only if you compile Harbour core code with HB_COMPAT_XHB
macro (you can enable it in include/hbsetup.ch or add -DHB_COMPAT_XHB
to C_USR and PRG_USR environment variables and then rebuild Harbour)
Without HB_COMPAT_XHB things like negative indexes are not supported.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Jun 29 08:31:32 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jun 29 08:31:41 2007
Subject: [Harbour] Tip lib
In-Reply-To: <20070629115900.GA13522@localhost.localdomain>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<4684F077.4080607@mail.udg.mx>
	<20070629115900.GA13522@localhost.localdomain>
Message-ID: <3FBFDEBF-0384-47DE-A944-0C50CD7A2248@syenar.hu>

>> which are:
>> 171:
>>    IF Len( ::cPath ) == 0 .or. ::cPath[-1] != "/"
>> 191:
>>    IF Len( ::cPath ) == 0 .or. ::cPath[-1] != "/"
>> 218:
>>       cData[-1] = ""
>
> It's correct. These code is taken from xHarbour and can be compiled
> by Harbour only if you compile Harbour core code with HB_COMPAT_XHB
> macro (you can enable it in include/hbsetup.ch or add -DHB_COMPAT_XHB
> to C_USR and PRG_USR environment variables and then rebuild Harbour)
> Without HB_COMPAT_XHB things like negative indexes are not supported.

It's even better to replace this syntax with plain portable code like  
this:

171:
    IF Len( ::cPath ) == 0 .or. Right( ::cPath, 1 ) != "/"
191:
    IF Len( ::cPath ) == 0 .or. Right( ::cPath, 1 ) != "/"
218:
	cData := Left( cData, Len( cData ) - 1 )

I hope I got the meaning of [-1] right, but it has to be something
like this anyway (maybe a SubStr() and a Len() call worst case).

Brgds,
Viktor

From druzus at priv.onet.pl  Fri Jun 29 10:03:53 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun 29 10:04:31 2007
Subject: [Harbour] Tip lib
In-Reply-To: <3FBFDEBF-0384-47DE-A944-0C50CD7A2248@syenar.hu>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<4684F077.4080607@mail.udg.mx>
	<20070629115900.GA13522@localhost.localdomain>
	<3FBFDEBF-0384-47DE-A944-0C50CD7A2248@syenar.hu>
Message-ID: <20070629140353.GA13787@localhost.localdomain>

On Fri, 29 Jun 2007, Szak?ts Viktor wrote:
> It's even better to replace this syntax with plain portable code like  
> this:
> 171:
>    IF Len( ::cPath ) == 0 .or. Right( ::cPath, 1 ) != "/"
> 191:
>    IF Len( ::cPath ) == 0 .or. Right( ::cPath, 1 ) != "/"
> 218:
> 	cData := Left( cData, Len( cData ) - 1 )
> I hope I got the meaning of [-1] right, but it has to be something
> like this anyway (maybe a SubStr() and a Len() call worst case).

In xHarbour <x>\[<n>] when <x> is string item gives exactly the same
results as substr(<x>,<n>,1). Internally xHarbour compiler makes sth
like: #xtranslate substr(<x>,<n>,1) => <x>\[<n>]
So you can safely replace:
    ::cPath[ -1 ]
with:
    substr( ::cPath, -1, 1 )
but it does not mean these are all necessary modifications. If we want
to make TIP working with standard Harbour build then we should carefully
check whole TIP code and update it. Compiler can detect only few possible
problems like direct negative indexes but for code like:
    n := -1
    x := ::cPath[ n ]
we will not have any compile time errors.

best regards,
Przemek
From soporte at dsgsoftware.com  Fri Jun 29 10:49:04 2007
From: soporte at dsgsoftware.com (=?iso-8859-2?Q?Juan_G=E1lvez?=)
Date: Fri Jun 29 10:49:52 2007
Subject: [Harbour] Tip lib
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx><4684F077.4080607@mail.udg.mx><20070629115900.GA13522@localhost.localdomain><3FBFDEBF-0384-47DE-A944-0C50CD7A2248@syenar.hu>
	<20070629140353.GA13787@localhost.localdomain>
Message-ID: <002301c7ba5c$aa975330$1700000a@PcJuanxp>

Hi all,

After Lorenzo (I think he made it) borrowed TIP from xHarbour, Hannes
Ziegler made some important changes on xHarbour.

If you're thinking about a deep integration with Harbour. Don't you think it 
would be interesting to resynchronize with xHarbour before ?

Maybe now it's a good moment due to Harbour TIP should not be being still 
very used ...

Lorenzo ?

Best regards
Juan

----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Friday, June 29, 2007 4:03 PM
Subject: Re: [Harbour] Tip lib


> On Fri, 29 Jun 2007, Szak?ts Viktor wrote:
>> It's even better to replace this syntax with plain portable code like
>> this:
>> 171:
>>    IF Len( ::cPath ) == 0 .or. Right( ::cPath, 1 ) != "/"
>> 191:
>>    IF Len( ::cPath ) == 0 .or. Right( ::cPath, 1 ) != "/"
>> 218:
>> cData := Left( cData, Len( cData ) - 1 )
>> I hope I got the meaning of [-1] right, but it has to be something
>> like this anyway (maybe a SubStr() and a Len() call worst case).
>
> In xHarbour <x>\[<n>] when <x> is string item gives exactly the same
> results as substr(<x>,<n>,1). Internally xHarbour compiler makes sth
> like: #xtranslate substr(<x>,<n>,1) => <x>\[<n>]
> So you can safely replace:
>    ::cPath[ -1 ]
> with:
>    substr( ::cPath, -1, 1 )
> but it does not mean these are all necessary modifications. If we want
> to make TIP working with standard Harbour build then we should carefully
> check whole TIP code and update it. Compiler can detect only few possible
> problems like direct negative indexes but for code like:
>    n := -1
>    x := ::cPath[ n ]
> we will not have any compile time errors.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Fri Jun 29 11:45:34 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jun 29 11:45:38 2007
Subject: [Harbour] Tip lib
In-Reply-To: <002301c7ba5c$aa975330$1700000a@PcJuanxp>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<4684F077.4080607@mail.udg.mx>
	<20070629115900.GA13522@localhost.localdomain>
	<3FBFDEBF-0384-47DE-A944-0C50CD7A2248@syenar.hu>
	<20070629140353.GA13787@localhost.localdomain>
	<002301c7ba5c$aa975330$1700000a@PcJuanxp>
Message-ID: <9257026e0706290845x4650683dg2d04c4fae70cf481@mail.gmail.com>

On 6/29/07, Juan G?lvez <soporte@dsgsoftware.com> wrote:

> Maybe now it's a good moment due to Harbour TIP should not be being still
> very used ...

Tip has been ported by Przemyslaw.

For me tip is working fine as it is and I don't plan any sync.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Fri Jun 29 12:26:15 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jun 29 12:26:19 2007
Subject: [Harbour] Tip lib
In-Reply-To: <9257026e0706290845x4650683dg2d04c4fae70cf481@mail.gmail.com>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<4684F077.4080607@mail.udg.mx>
	<20070629115900.GA13522@localhost.localdomain>
	<3FBFDEBF-0384-47DE-A944-0C50CD7A2248@syenar.hu>
	<20070629140353.GA13787@localhost.localdomain>
	<002301c7ba5c$aa975330$1700000a@PcJuanxp>
	<9257026e0706290845x4650683dg2d04c4fae70cf481@mail.gmail.com>
Message-ID: <9257026e0706290926i7a03487ax4c3828250cccbb8d@mail.gmail.com>

On 6/29/07, Lorenzo Fiorini <lorenzo.fiorini@gmail.com> wrote:

> Tip has been ported by Przemyslaw.
>
> For me tip is working fine as it is and I don't plan any sync.

Sorry, for my "rude" replay but I was busy before and I couldn't "elaborate".

I've followed Hannes work but he changed/moved a lot of C code and I
don't know if it can be ported to Harbour as it is.

Do you actually use such code? Do you find these changes useful?

I mainly use and maintain tip/cgi. I also use tip/ftp to copy data to
remote hosts and tip/smtp to send "automatic" emails and for these
"simple" tasks it works well.

Please let me know.

best regards,
Lorenzo
From druzus at priv.onet.pl  Fri Jun 29 12:26:40 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jun 29 12:27:16 2007
Subject: [Harbour] PCODE optimization
Message-ID: <20070629162640.GA14432@localhost.localdomain>

Hi All,

I'd like to intorduce some minor optimizations in PCODE generated
for functions:
1-st: replace:
        HB_P_FUNCTION ...
        HB_P_RETURN
    with simple:
        HB_P_DO ...
it will eliminate dummy push and pop return value on HVM stack

2-nd: begin to use HB_P_ENDBLOCK also for functions. I can even cahnge
name of these PCODE to HB_P_ENDFUNC. It can be safely done in current
HVM and instead of:
        HB_P_RETURN
        HB_P_ENDPROC
we will have:
        HB_P_ENDFUNC

These can be safely done in few lines for current code but I would like
to ask if it will not interact with some other modifications you may
plan to introduce. I hope not.

3-rd is optional and is rather result of some cyclic returning "optimization".
>From time to time developers tries to optimize .prg code and change functions
returning NIL to procedures. Such operation changes the code behavior and
sometimes it intorduces bugs. In Clipper PROCEDURE is not a function which
returns NIL value. I'd like to add new PCODE for FUNCTIONs which return NIL:
        HB_P_ENDFUNCNIL
which will replace current:
        HB_P_PUSHNIL
        HB_P_RETURN
        HB_P_ENDPROC
and it will cause that we will not have noticeable speed difference between
PROCEDURE and functions which return NIL.
All these modifications are not very important and if you know some reasons
to not add them then I'd like to hear about.

best regards,
Przemek
From soporte at dsgsoftware.com  Fri Jun 29 12:31:24 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Fri Jun 29 12:32:04 2007
Subject: [Harbour] Tip lib
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx><4684F077.4080607@mail.udg.mx><20070629115900.GA13522@localhost.localdomain><3FBFDEBF-0384-47DE-A944-0C50CD7A2248@syenar.hu><20070629140353.GA13787@localhost.localdomain><002301c7ba5c$aa975330$1700000a@PcJuanxp>
	<9257026e0706290845x4650683dg2d04c4fae70cf481@mail.gmail.com>
Message-ID: <000601c7ba6a$f1ca3890$1700000a@PcJuanxp>

Lorenzo,

I'm sorry I thought you made it.

Przemek, all : What do you think about Hannes's changes ?

Best regards
Juan

----- Original Message ----- 
From: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Friday, June 29, 2007 5:45 PM
Subject: Re: [Harbour] Tip lib


On 6/29/07, Juan G?lvez <soporte@dsgsoftware.com> wrote:

> Maybe now it's a good moment due to Harbour TIP should not be being still
> very used ...

Tip has been ported by Przemyslaw.

For me tip is working fine as it is and I don't plan any sync.

best regards,
Lorenzo
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour 

From harbour.01 at syenar.hu  Fri Jun 29 13:15:03 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jun 29 13:15:14 2007
Subject: [Harbour] PCODE optimization
In-Reply-To: <20070629162640.GA14432@localhost.localdomain>
References: <20070629162640.GA14432@localhost.localdomain>
Message-ID: <843CB668-E3F0-4052-A73C-ABF68AFC663D@syenar.hu>

Hi Przemek,

These all look good moves to me, so you have my vote.

Brgds,
Viktor

On 2007.06.29., at 18:26, Przemyslaw Czerpak wrote:

> Hi All,
>
> I'd like to intorduce some minor optimizations in PCODE generated
> for functions:
> 1-st: replace:
>         HB_P_FUNCTION ...
>         HB_P_RETURN
>     with simple:
>         HB_P_DO ...
> it will eliminate dummy push and pop return value on HVM stack
>
> 2-nd: begin to use HB_P_ENDBLOCK also for functions. I can even cahnge
> name of these PCODE to HB_P_ENDFUNC. It can be safely done in current
> HVM and instead of:
>         HB_P_RETURN
>         HB_P_ENDPROC
> we will have:
>         HB_P_ENDFUNC
>
> These can be safely done in few lines for current code but I would  
> like
> to ask if it will not interact with some other modifications you may
> plan to introduce. I hope not.
>
> 3-rd is optional and is rather result of some cyclic returning  
> "optimization".
>> From time to time developers tries to optimize .prg code and  
>> change functions
> returning NIL to procedures. Such operation changes the code  
> behavior and
> sometimes it intorduces bugs. In Clipper PROCEDURE is not a  
> function which
> returns NIL value. I'd like to add new PCODE for FUNCTIONs which  
> return NIL:
>         HB_P_ENDFUNCNIL
> which will replace current:
>         HB_P_PUSHNIL
>         HB_P_RETURN
>         HB_P_ENDPROC
> and it will cause that we will not have noticeable speed difference  
> between
> PROCEDURE and functions which return NIL.
> All these modifications are not very important and if you know some  
> reasons
> to not add them then I'd like to hear about.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Jun 29 13:29:25 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jun 29 13:30:02 2007
Subject: [Harbour] PCODE optimization
In-Reply-To: <20070629162640.GA14432@localhost.localdomain>
References: <20070629162640.GA14432@localhost.localdomain>
Message-ID: <707600C3-0C2B-4EDC-84D4-F3D44114BB35@syenar.hu>

> 3-rd is optional and is rather result of some cyclic returning  
> "optimization".
>> From time to time developers tries to optimize .prg code and  
>> change functions
> returning NIL to procedures. Such operation changes the code  
> behavior and
> sometimes it intorduces bugs. In Clipper PROCEDURE is not a  
> function which
> returns NIL value. I'd like to add new PCODE for FUNCTIONs which  
> return NIL:
>         HB_P_ENDFUNCNIL
> which will replace current:
>         HB_P_PUSHNIL
>         HB_P_RETURN
>         HB_P_ENDPROC
> and it will cause that we will not have noticeable speed difference  
> between
> PROCEDURE and functions which return NIL.
> All these modifications are not very important and if you know some  
> reasons
> to not add them then I'd like to hear about.

BTW, HB_P_ENDFUNCFALSE and HB_ENDFUNCTRUE
would also be nice. In my code there is about the same
number (quite many) of RETURN .T./.F. than there is of
RETURN NIL.

What do you think?

Brgds,
Viktor

From druzus at priv.onet.pl  Sat Jun 30 08:02:33 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Jun 30 08:03:10 2007
Subject: [Harbour] Tip lib
In-Reply-To: <9257026e0706290926i7a03487ax4c3828250cccbb8d@mail.gmail.com>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<4684F077.4080607@mail.udg.mx>
	<20070629115900.GA13522@localhost.localdomain>
	<3FBFDEBF-0384-47DE-A944-0C50CD7A2248@syenar.hu>
	<20070629140353.GA13787@localhost.localdomain>
	<002301c7ba5c$aa975330$1700000a@PcJuanxp>
	<9257026e0706290845x4650683dg2d04c4fae70cf481@mail.gmail.com>
	<9257026e0706290926i7a03487ax4c3828250cccbb8d@mail.gmail.com>
Message-ID: <20070630120233.GA18472@localhost.localdomain>

On Fri, 29 Jun 2007, Lorenzo Fiorini wrote:
> I've followed Hannes work but he changed/moved a lot of C code and I
> don't know if it can be ported to Harbour as it is.

I've just made:
    cvs diff -u -D"90 days ago" > TIP.diff
in xharbour/source/tip directory and only .prg code has been changed.

best regards,
Przemek
From druzus at priv.onet.pl  Sat Jun 30 08:12:52 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Jun 30 08:13:28 2007
Subject: [Harbour] Tip lib
In-Reply-To: <000601c7ba6a$f1ca3890$1700000a@PcJuanxp>
References: <9257026e0706290845x4650683dg2d04c4fae70cf481@mail.gmail.com>
	<000601c7ba6a$f1ca3890$1700000a@PcJuanxp>
Message-ID: <20070630121252.GB18472@localhost.localdomain>

On Fri, 29 Jun 2007, Juan G?lvez wrote:
> Lorenzo,
> I'm sorry I thought you made it.
> Przemek, all : What do you think about Hannes's changes ?

I'm sorry but I do not use TIP library so I cannot say too much
about them. If you think that Hannes modifications are important
then we can add them to Harbour but we will need someone who will
use/test this modified library. Please remember that Hannes
modifications are not backward compatible and users code which
uses TIP library has to be updated too.

best regards,
Przemek
From druzus at priv.onet.pl  Sat Jun 30 08:24:59 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Jun 30 08:25:35 2007
Subject: [Harbour] Tip lib
In-Reply-To: <20070630120233.GA18472@localhost.localdomain>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<4684F077.4080607@mail.udg.mx>
	<20070629115900.GA13522@localhost.localdomain>
	<3FBFDEBF-0384-47DE-A944-0C50CD7A2248@syenar.hu>
	<20070629140353.GA13787@localhost.localdomain>
	<002301c7ba5c$aa975330$1700000a@PcJuanxp>
	<9257026e0706290845x4650683dg2d04c4fae70cf481@mail.gmail.com>
	<9257026e0706290926i7a03487ax4c3828250cccbb8d@mail.gmail.com>
	<20070630120233.GA18472@localhost.localdomain>
Message-ID: <20070630122459.GC18472@localhost.localdomain>

On Sat, 30 Jun 2007, Przemyslaw Czerpak wrote:
> On Fri, 29 Jun 2007, Lorenzo Fiorini wrote:
> > I've followed Hannes work but he changed/moved a lot of C code and I
> > don't know if it can be ported to Harbour as it is.
> I've just made:
>     cvs diff -u -D"90 days ago" > TIP.diff
> in xharbour/source/tip directory and only .prg code has been changed.

My fault - I'haven't check for new files. In thtml.prg there is
#pragma BEGINDUMP/ENDDUMP with two function PSTRCOMPI and ATI
which can be quite easy ported to Harbour or even rewirtten in
.prg code.

best regards,
Przemek
From harbour.01 at syenar.hu  Sat Jun 30 11:02:03 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Jun 30 11:02:12 2007
Subject: [Harbour] OS X Harbour install problem
In-Reply-To: <20070628234458.GA13934@localhost.localdomain>
References: <25768B82-27C0-4406-863B-4099C17E9835@syenar.hu>
	<20070623101544.GB3583@localhost.localdomain>
	<89046EBD-2884-4E27-B0D9-3B2BD820385C@syenar.hu>
	<20070627152139.GA18849@localhost.localdomain>
	<6D0EA2D4-B446-4A39-ABC4-FD156A9BC5D7@syenar.hu>
	<20070628234458.GA13934@localhost.localdomain>
Message-ID: <B9B6B7D4-51D3-44D4-A2EA-88A0CA412889@syenar.hu>


On 2007.06.29., at 1:44, Przemyslaw Czerpak wrote:

> On Wed, 27 Jun 2007, Szak?ts Viktor wrote:
>>> Do you have the same message when you extract archive file only?
>>> F.e. after:
>>>    ./harbour-1.1*.sh --extract
>> Yes.
>> silver:/Users/Shared vszakats$ gzip -d harbour-1.1.1-
>> darwin_8.10.0.bin.tar.gz
>> gzip: harbour-1.1.1-darwin_8.10.0.bin.tar.gz: unexpected end of file
>
> Seems that in your system -z option in TAR uses different GZIP
> version then gzip accessible by command line. Strange, probably
>     tar -xzvf darwin_8.10.0.bin.tar.gz
> will not show any errors. BTW do you have only one tar or 'tar'
> and 'gtar' are different programs in your system?

I have both, and they are exactly the same program.

----
silver:~ vszakats$ gtar --version
tar (GNU tar) 1.13.25
Copyright (C) 2001 Free Software Foundation, Inc.
This program comes with NO WARRANTY, to the extent permitted by law.
You may redistribute it under the terms of the GNU General Public  
License;
see the file named COPYING for details.
Written by John Gilmore and Jay Fenlason.

silver:~ vszakats$ tar --version
tar (GNU tar) 1.13.25
Copyright (C) 2001 Free Software Foundation, Inc.
This program comes with NO WARRANTY, to the extent permitted by law.
You may redistribute it under the terms of the GNU General Public  
License;
see the file named COPYING for details.
Written by John Gilmore and Jay Fenlason.
----

>> GTTRM worked just perfect under OSX. The only really minor
>> problem I've noticed is that it didn't reset the console color to
>> it's original
>> state.
>> This was just a simple test (with ac_test.prg), I didn't go into  
>> deeper
>> matters like char encoding yet.
>
> In test directory you will find: gtchars.prg, gtcolors.prg, gtkeys.prg
> Just try them. You can also make some test with terminal in UTF8/ISO
> mode. Most of terminals can switch to UTF-8 mode by:
>     echo -ne '\033%G'
> and to ISO mode with user character set by:
>     echo -ne '\033%@\033(K'
>
> In UTF-8 mode GTTRM should show all possible characters if your  
> terminal
> uses unicode font.
> Please also note that all terminal GT drivers I was working on can  
> show
> different characters when dispbox() is used then in dispout() so it's
> possible to use codepages which do not have box characters, f.e. in my
> country iso-8859-2 and still display nice boxes (for characters put  
> with
> dispbox() I switch to ACSC or CP437), gtchars.prg should illustrate  
> it.

Great, I'll check it.

Brgds,
Viktor
From antonioharbour at gmail.com  Sat Jun 30 18:06:40 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sat Jun 30 16:06:03 2007
Subject: [Harbour] OS X Harbour install problem
In-Reply-To: <B9B6B7D4-51D3-44D4-A2EA-88A0CA412889@syenar.hu>
References: <25768B82-27C0-4406-863B-4099C17E9835@syenar.hu>
	<20070623101544.GB3583@localhost.localdomain>
	<89046EBD-2884-4E27-B0D9-3B2BD820385C@syenar.hu>
	<20070627152139.GA18849@localhost.localdomain>
	<6D0EA2D4-B446-4A39-ABC4-FD156A9BC5D7@syenar.hu>
	<20070628234458.GA13934@localhost.localdomain>
	<B9B6B7D4-51D3-44D4-A2EA-88A0CA412889@syenar.hu>
Message-ID: <51F554E6-EF0C-4519-A964-8E5C438F2440@gmail.com>

Viktor,

You may use make_gnu.sh to build Harbour on OSX

regards,

Antonio

From lorenzo.fiorini at gmail.com  Sat Jun 30 17:59:55 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Jun 30 17:59:58 2007
Subject: [Harbour] Tip lib
In-Reply-To: <20070630122459.GC18472@localhost.localdomain>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<4684F077.4080607@mail.udg.mx>
	<20070629115900.GA13522@localhost.localdomain>
	<3FBFDEBF-0384-47DE-A944-0C50CD7A2248@syenar.hu>
	<20070629140353.GA13787@localhost.localdomain>
	<002301c7ba5c$aa975330$1700000a@PcJuanxp>
	<9257026e0706290845x4650683dg2d04c4fae70cf481@mail.gmail.com>
	<9257026e0706290926i7a03487ax4c3828250cccbb8d@mail.gmail.com>
	<20070630120233.GA18472@localhost.localdomain>
	<20070630122459.GC18472@localhost.localdomain>
Message-ID: <9257026e0706301459i4c597d5dj69dee875ea43ff2d@mail.gmail.com>

On 6/30/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> My fault - I'haven't check for new files. In thtml.prg there is
> #pragma BEGINDUMP/ENDDUMP with two function PSTRCOMPI and ATI
> which can be quite easy ported to Harbour or even rewirtten in
> .prg code.

If I "diff" harbour/contrib/tip xharbour/source/tip I see:

- encmthd.c and hbhex2n.c have been removed in xHarbour
- C code is different in base64x.c
- there is C code added to encb64.prg, encqp.prg, encurl.prg in xHarbour

best regards,
Lorenzo
