From dmacias at mail.udg.mx  Fri Feb  1 01:42:29 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Feb  1 01:42:38 2008
Subject: [Harbour] Fix it quickly
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47A2BF55.2090900@mail.udg.mx>

Under eComStation (OS/2), I made:

- checkout of current Harbour SVN in e:\harbour801
- change to e:\harbour801 and recreate make_gnu.cmd based in make_gnu.bat
- make_gnu.cmd clean
   result a lot of messages
   First of them showed below

then, no one file in e: root dir was found

Current Harbour build process DELETED all my files in OS/2 root dir
It include CONFIG.sys

I will need to recover my eComStation installation and lost many files

Reinstalling eComStation and using temporary configurations, it is 
confirmed. All files in root dir were deleted again

make_gnu.log are included below.
It show bad sentences and sections as this:
----------------------
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST \\*.* del /n \\*.*
E:\IBMLVL.INI
CMD.EXE /c IF EXIST       rmdir
CMD.EXE /c IF EXIST      rmdir
----------------------

E:\IBMLVL.INI can not be deleted because is read only, but rest of files 
in e: root dir are deleted

So, I very fast fix is need

David Macias




First messages ----------------------

[E:\harbour802]make -r clean          1>make_gnu.log
SYS0005: Access is denied.
Error occurred while processing: \*.*.
make: [clean] Error 1 (ignored)
SYS1003: The syntax of the command is incorrect.
make: [clean] Error 1 (ignored)
SYS1003: The syntax of the command is incorrect.
make: [clean] Error 1 (ignored)
SYS0005: Access is denied.
Error occurred while processing: \*.*.
make[1]: [clean] Error 1 (ignored)
SYS1003: The syntax of the command is incorrect.
make[1]: [clean] Error 1 (ignored)
...
----------------------


make_gnu.log ---------------------

CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST \\*.* del /n \\*.*
E:\IBMLVL.INI
CMD.EXE /c IF EXIST       rmdir
CMD.EXE /c IF EXIST      rmdir
CMD.EXE /c FOR %d IN (doc include source utils contrib ) DO make -C %d clean

[E:\harbour802]make -C doc clean
make[1]: Entering directory `/harbour802/doc'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST \\*.* del /n \\*.*
E:\IBMLVL.INI
CMD.EXE /c IF EXIST       rmdir
CMD.EXE /c IF EXIST      rmdir
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST \\*.* del /n \\*.*
E:\IBMLVL.INI
CMD.EXE /c IF EXIST       rmdir
CMD.EXE /c IF EXIST      rmdir
CMD.EXE /c FOR %d IN (en es ) DO make -C %d clean

[E:\harbour802\doc]make -C en clean
make[2]: Entering directory `/harbour802/doc/en'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST \\*.* del /n \\*.*
E:\IBMLVL.INI
CMD.EXE /c IF EXIST       rmdir
CMD.EXE /c IF EXIST      rmdir
make[2]: Leaving directory `/harbour802/doc/en'

[E:\harbour802\doc]make -C es clean
make[2]: Entering directory `/harbour802/doc/es'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST \\*.* del /n \\*.*
E:\IBMLVL.INI
CMD.EXE /c IF EXIST       rmdir
CMD.EXE /c IF EXIST      rmdir
make[2]: Leaving directory `/harbour802/doc/es'
make[1]: Leaving directory `/harbour802/doc'

[E:\harbour802]make -C include clean
make[1]: Entering directory `/harbour802/include'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST \\*.* del /n \\*.*
E:\IBMLVL.INI
CMD.EXE /c IF EXIST       rmdir
CMD.EXE /c IF EXIST      rmdir
make[1]: Leaving directory `/harbour802/include'

[E:\harbour802]make -C source clean
make[1]: Entering directory `/harbour802/source'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST \\*.* del /n \\*.*
E:\IBMLVL.INI
CMD.EXE /c IF EXIST       rmdir
CMD.EXE /c IF EXIST      rmdir
CMD.EXE /c FOR %d IN (common pp compiler main rtl vm macro codepage lang 
rdd hbpcre debug ) DO make -C %d clean

[E:\harbour802\source]make -C common clean
make[2]: Entering directory `/harbour802/source/common'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
make[2]: Leaving directory `/harbour802/source/common'

[E:\harbour802\source]make -C pp clean
make[2]: Entering directory `/harbour802/source/pp'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
make[2]: Leaving directory `/harbour802/source/pp'

[E:\harbour802\source]make -C compiler clean
make[2]: Entering directory `/harbour802/source/compiler'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
make[2]: Leaving directory `/harbour802/source/compiler'

[E:\harbour802\source]make -C main clean
make[2]: Entering directory `/harbour802/source/main'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\\*.* del /n ..\..\lib\os2\gcc\\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\      rmdir ..\..\lib\os2\gcc\
CMD.EXE /c IF EXIST      rmdir
make[2]: Leaving directory `/harbour802/source/main'

[E:\harbour802\source]make -C rtl clean
make[2]: Entering directory `/harbour802/source/rtl'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
CMD.EXE /c FOR %d IN (gtcgi gtos2 gtpca gtstd ) DO make -C %d clean

[E:\harbour802\source\rtl]make -C gtcgi clean
make[3]: Entering directory `/harbour802/source/rtl/gtcgi'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc\\*.* del /n 
..\..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc      rmdir ..\..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\..\lib\os2     rmdir ..\..\..\lib\os2
make[3]: Leaving directory `/harbour802/source/rtl/gtcgi'

[E:\harbour802\source\rtl]make -C gtos2 clean
make[3]: Entering directory `/harbour802/source/rtl/gtos2'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc\\*.* del /n 
..\..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc      rmdir ..\..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\..\lib\os2     rmdir ..\..\..\lib\os2
make[3]: Leaving directory `/harbour802/source/rtl/gtos2'

[E:\harbour802\source\rtl]make -C gtpca clean
make[3]: Entering directory `/harbour802/source/rtl/gtpca'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc\\*.* del /n 
..\..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc      rmdir ..\..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\..\lib\os2     rmdir ..\..\..\lib\os2
make[3]: Leaving directory `/harbour802/source/rtl/gtpca'

[E:\harbour802\source\rtl]make -C gtstd clean
make[3]: Entering directory `/harbour802/source/rtl/gtstd'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc\\*.* del /n 
..\..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc      rmdir ..\..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\..\lib\os2     rmdir ..\..\..\lib\os2
make[3]: Leaving directory `/harbour802/source/rtl/gtstd'
make[2]: Leaving directory `/harbour802/source/rtl'

[E:\harbour802\source]make -C vm clean
make[2]: Entering directory `/harbour802/source/vm'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
make[2]: Leaving directory `/harbour802/source/vm'

[E:\harbour802\source]make -C macro clean
make[2]: Entering directory `/harbour802/source/macro'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
make[2]: Leaving directory `/harbour802/source/macro'

[E:\harbour802\source]make -C codepage clean
make[2]: Entering directory `/harbour802/source/codepage'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
make[2]: Leaving directory `/harbour802/source/codepage'

[E:\harbour802\source]make -C lang clean
make[2]: Entering directory `/harbour802/source/lang'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
make[2]: Leaving directory `/harbour802/source/lang'

[E:\harbour802\source]make -C rdd clean
make[2]: Entering directory `/harbour802/source/rdd'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
CMD.EXE /c FOR %d IN (nulsys dbfntx dbfcdx dbffpt hbsix hsx usrrdd ) DO 
make -C %d clean

[E:\harbour802\source\rdd]make -C nulsys clean
make[3]: Entering directory `/harbour802/source/rdd/nulsys'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc\\*.* del /n 
..\..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc      rmdir ..\..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\..\lib\os2     rmdir ..\..\..\lib\os2
make[3]: Leaving directory `/harbour802/source/rdd/nulsys'

[E:\harbour802\source\rdd]make -C dbfntx clean
make[3]: Entering directory `/harbour802/source/rdd/dbfntx'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc\\*.* del /n 
..\..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc      rmdir ..\..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\..\lib\os2     rmdir ..\..\..\lib\os2
make[3]: Leaving directory `/harbour802/source/rdd/dbfntx'

[E:\harbour802\source\rdd]make -C dbfcdx clean
make[3]: Entering directory `/harbour802/source/rdd/dbfcdx'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc\\*.* del /n 
..\..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc      rmdir ..\..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\..\lib\os2     rmdir ..\..\..\lib\os2
make[3]: Leaving directory `/harbour802/source/rdd/dbfcdx'

[E:\harbour802\source\rdd]make -C dbffpt clean
make[3]: Entering directory `/harbour802/source/rdd/dbffpt'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc\\*.* del /n 
..\..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc      rmdir ..\..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\..\lib\os2     rmdir ..\..\..\lib\os2
make[3]: Leaving directory `/harbour802/source/rdd/dbffpt'

[E:\harbour802\source\rdd]make -C hbsix clean
make[3]: Entering directory `/harbour802/source/rdd/hbsix'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc\\*.* del /n 
..\..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc      rmdir ..\..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\..\lib\os2     rmdir ..\..\..\lib\os2
make[3]: Leaving directory `/harbour802/source/rdd/hbsix'

[E:\harbour802\source\rdd]make -C hsx clean
make[3]: Entering directory `/harbour802/source/rdd/hsx'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc\\*.* del /n 
..\..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc      rmdir ..\..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\..\lib\os2     rmdir ..\..\..\lib\os2
make[3]: Leaving directory `/harbour802/source/rdd/hsx'

[E:\harbour802\source\rdd]make -C usrrdd clean
make[3]: Entering directory `/harbour802/source/rdd/usrrdd'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc\\*.* del /n 
..\..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc      rmdir ..\..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\..\lib\os2     rmdir ..\..\..\lib\os2
make[3]: Leaving directory `/harbour802/source/rdd/usrrdd'
make[2]: Leaving directory `/harbour802/source/rdd'

[E:\harbour802\source]make -C hbpcre clean
make[2]: Entering directory `/harbour802/source/hbpcre'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
make[2]: Leaving directory `/harbour802/source/hbpcre'

[E:\harbour802\source]make -C debug clean
make[2]: Entering directory `/harbour802/source/debug'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
make[2]: Leaving directory `/harbour802/source/debug'
make[1]: Leaving directory `/harbour802/source'

[E:\harbour802]make -C utils clean
make[1]: Entering directory `/harbour802/utils'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST \\*.* del /n \\*.*
E:\IBMLVL.INI
CMD.EXE /c IF EXIST       rmdir
CMD.EXE /c IF EXIST      rmdir
CMD.EXE /c FOR %d IN (hbpp hbpptest hbver hbrun hbdot hbdoc hbtest 
hbmake  ) DO make -C %d clean

[E:\harbour802\utils]make -C hbpp clean
make[2]: Entering directory `/harbour802/utils/hbpp'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\\*.* del /n ..\..\lib\os2\gcc\\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\      rmdir ..\..\lib\os2\gcc\
CMD.EXE /c IF EXIST      rmdir
make[2]: Leaving directory `/harbour802/utils/hbpp'

[E:\harbour802\utils]make -C hbpptest clean
make[2]: Entering directory `/harbour802/utils/hbpptest'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\\*.* del /n ..\..\lib\os2\gcc\\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\      rmdir ..\..\lib\os2\gcc\
CMD.EXE /c IF EXIST      rmdir
make[2]: Leaving directory `/harbour802/utils/hbpptest'

[E:\harbour802\utils]make -C hbver clean
make[2]: Entering directory `/harbour802/utils/hbver'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\\*.* del /n ..\..\lib\os2\gcc\\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\      rmdir ..\..\lib\os2\gcc\
CMD.EXE /c IF EXIST      rmdir
make[2]: Leaving directory `/harbour802/utils/hbver'

[E:\harbour802\utils]make -C hbrun clean
make[2]: Entering directory `/harbour802/utils/hbrun'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\\*.* del /n ..\..\lib\os2\gcc\\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\      rmdir ..\..\lib\os2\gcc\
CMD.EXE /c IF EXIST      rmdir
make[2]: Leaving directory `/harbour802/utils/hbrun'

[E:\harbour802\utils]make -C hbdot clean
make[2]: Entering directory `/harbour802/utils/hbdot'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\\*.* del /n ..\..\lib\os2\gcc\\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\      rmdir ..\..\lib\os2\gcc\
CMD.EXE /c IF EXIST      rmdir
make[2]: Leaving directory `/harbour802/utils/hbdot'

[E:\harbour802\utils]make -C hbdoc clean
make[2]: Entering directory `/harbour802/utils/hbdoc'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\\*.* del /n ..\..\lib\os2\gcc\\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\      rmdir ..\..\lib\os2\gcc\
CMD.EXE /c IF EXIST      rmdir
make[2]: Leaving directory `/harbour802/utils/hbdoc'

[E:\harbour802\utils]make -C hbtest clean
make[2]: Entering directory `/harbour802/utils/hbtest'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\\*.* del /n ..\..\lib\os2\gcc\\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\      rmdir ..\..\lib\os2\gcc\
CMD.EXE /c IF EXIST      rmdir
make[2]: Leaving directory `/harbour802/utils/hbtest'

[E:\harbour802\utils]make -C hbmake clean
make[2]: Entering directory `/harbour802/utils/hbmake'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\\*.* del /n ..\..\lib\os2\gcc\\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\      rmdir ..\..\lib\os2\gcc\
CMD.EXE /c IF EXIST      rmdir
make[2]: Leaving directory `/harbour802/utils/hbmake'
make[1]: Leaving directory `/harbour802/utils'

[E:\harbour802]make -C contrib clean
make[1]: Entering directory `/harbour802/contrib'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST \\*.* del /n \\*.*
E:\IBMLVL.INI
CMD.EXE /c IF EXIST       rmdir
CMD.EXE /c IF EXIST      rmdir
CMD.EXE /c FOR %d IN (hbbtree hbct hbgt hbmisc hbnf hbclipsm hbzlib xhb 
  hbbmcdx  hbgf\os2pm  hbtip) DO make -C %d clean

[E:\harbour802\contrib]make -C hbbtree clean
make[2]: Entering directory `/harbour802/contrib/hbbtree'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
make[2]: Leaving directory `/harbour802/contrib/hbbtree'

[E:\harbour802\contrib]make -C hbct clean
make[2]: Entering directory `/harbour802/contrib/hbct'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
make[2]: Leaving directory `/harbour802/contrib/hbct'

[E:\harbour802\contrib]make -C hbgt clean
make[2]: Entering directory `/harbour802/contrib/hbgt'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
make[2]: Leaving directory `/harbour802/contrib/hbgt'

[E:\harbour802\contrib]make -C hbmisc clean
make[2]: Entering directory `/harbour802/contrib/hbmisc'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
make[2]: Leaving directory `/harbour802/contrib/hbmisc'

[E:\harbour802\contrib]make -C hbnf clean
make[2]: Entering directory `/harbour802/contrib/hbnf'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
make[2]: Leaving directory `/harbour802/contrib/hbnf'

[E:\harbour802\contrib]make -C hbclipsm clean
make[2]: Entering directory `/harbour802/contrib/hbclipsm'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
make[2]: Leaving directory `/harbour802/contrib/hbclipsm'

[E:\harbour802\contrib]make -C hbzlib clean
make[2]: Entering directory `/harbour802/contrib/hbzlib'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
make[2]: Leaving directory `/harbour802/contrib/hbzlib'

[E:\harbour802\contrib]make -C xhb clean
make[2]: Entering directory `/harbour802/contrib/xhb'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
make[2]: Leaving directory `/harbour802/contrib/xhb'

[E:\harbour802\contrib]make -C hbbmcdx clean
make[2]: Entering directory `/harbour802/contrib/hbbmcdx'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
make[2]: Leaving directory `/harbour802/contrib/hbbmcdx'

[E:\harbour802\contrib]make -C hbgf\os2pm clean
make[2]: Entering directory `/harbour802/contrib/hbgf/os2pm'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc\\*.* del /n 
..\..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\..\lib\os2\gcc      rmdir ..\..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\..\lib\os2     rmdir ..\..\..\lib\os2
make[2]: Leaving directory `/harbour802/contrib/hbgf/os2pm'

[E:\harbour802\contrib]make -C hbtip clean
make[2]: Entering directory `/harbour802/contrib/hbtip'
CMD.EXE /c IF EXIST os2\gcc\\*.* del /n os2\gcc\\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\\*.* del /n ..\..\lib\os2\gcc\\*.*
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc      rmdir ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2     rmdir ..\..\lib\os2
make[2]: Leaving directory `/harbour802/contrib/hbtip'
make[1]: Leaving directory `/harbour802/contrib'

---------------------



From harbour.01 at syenar.hu  Fri Feb  1 02:17:59 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Feb  1 02:19:03 2008
Subject: [Harbour] CHANGELOG: 2008-02-01 08:17 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c864a2$Blat.v2.6.2$9320c6dc$161827f882e2@127.0.0.1>

2008-02-01 08:17 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * contrib/hbw32ddr/w32_ddrw.cpp
     ! Fixed compile error under MSVC.
     ! Fixed MSVC warning (strdup() -> hb_strdup())
       Now compiles without warnings under MSVC.
     ! Reindented, some formatting.
--
Brgds,
Viktor

From alex at belacy.belgorod.su  Fri Feb  1 02:28:14 2008
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Fri Feb  1 02:28:45 2008
Subject: [Harbour] Re:  Leto DB Server
In-Reply-To: <15216083.post@talk.nabble.com>
References: <47A1B8D8.4050000@belacy.belgorod.su>
	<15216083.post@talk.nabble.com>
Message-ID: <47A2CA0E.3000805@belacy.belgorod.su>

Pritpal Bedi writes:

> Hello Alexander
> 
> 
> Alexander S.Kresin wrote:
>>   finally I've created this project and uploaded initial files to CVS -
>> http://sourceforge.net/projects/letodb/. Release packages are available,
>> too - letodb-0.1.src.zip and letodb-0.1.src.tar.gz.
>>
> 
> I need write permissions, if you agree. My SourceForge ID = vouchcac.
> 
> Regards
> Pritpal Bedi, INDIA-USA
> 

  You has been added to the developers list.

Regards,
   Alexander.
From tomaz.zupan at orpo.si  Fri Feb  1 03:22:33 2008
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Fri Feb  1 03:22:47 2008
Subject: [Harbour] Cant build rpms
In-Reply-To: <01c864a2$Blat.v2.6.2$9320c6dc$161827f882e2@127.0.0.1>
References: <01c864a2$Blat.v2.6.2$9320c6dc$161827f882e2@127.0.0.1>
Message-ID: <200802010922.33913.tomaz.zupan@orpo.si>

Hi!

I can't make rpms with make_rpm.sh. This is last error:

gcc -DHB_OS_LINUX -Wall -W -ohbmake hbmlang.o readline.o hbmake.o tmake.o 
hbmutils.o fclass1.o ffile1.o ft_funcs.o radios.o checks.o pickarry.o 
pickfile.o 
prb_stak.o -L../../../../lib/linux/gcc/ -L/usr/X11R6/lib  -L/var/tmp/harbour-1.1.1-0mdv20080-buildroot//usr/lib/harbour -lharbour -lncurses -lslang  -L/usr/X11R6/lib -lX11  -lpq  -Wl,--start-group   -lhbdebug  -lhbvm  -lhbrtl  -lhbrdd  -lhbrtl  -lhbvm  -lhbmacro  -lhbpp  -lhblang  -lhbcommon  -lrddntx  -lrddcdx  -lrddfpt  -lhbsix  -lhbhsx  -lhbusrrdd  -lgtcgi  -lgtpca  -lgtstd  -lgttrm  -lgtcrs  -lgtsln  -lgtxwc -lncurses -lslang -lX11 -lm -ldl -Wl,--end-group
/usr/bin/ld: cannot find -lharbour

Anyone else with this problem?

LP, Toma?



From sscc at mweb.co.za  Fri Feb  1 03:23:07 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Feb  1 03:23:20 2008
Subject: [Harbour] CHANGELOG: 2008-02-01 08:17 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <01c864a2$Blat.v2.6.2$9320c6dc$161827f882e2@127.0.0.1>
References: <01c864a2$Blat.v2.6.2$9320c6dc$161827f882e2@127.0.0.1>
Message-ID: <47A2D6EB.1000601@mweb.co.za>

Szak?ts Viktor wrote:
> 2008-02-01 08:17 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
>    * contrib/hbw32ddr/w32_ddrw.cpp
>      ! Fixed compile error under MSVC.
>      ! Fixed MSVC warning (strdup() -> hb_strdup())
>        Now compiles without warnings under MSVC.
>      ! Reindented, some formatting.

I have similar problems compiling with MSVC 6 as reported previously, 
which I have not tried to fix yet. You suggested a later SDK version.

What version of the SDK do you have installed? I guess that is why my 
compile of contrib fails on the direct draw lib.

I have a memory that if I install a new SDK some maths header files 
must be edited, but I cannot find my notes. Do you have any such 
issues that you remember?

Thanks
Alex

From harbour.01 at syenar.hu  Fri Feb  1 04:14:48 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Feb  1 04:15:42 2008
Subject: [Harbour] CHANGELOG: 2008-02-01 08:17 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <47A2D6EB.1000601@mweb.co.za>
References: <01c864a2$Blat.v2.6.2$9320c6dc$161827f882e2@127.0.0.1>
	<47A2D6EB.1000601@mweb.co.za>
Message-ID: <86321E5C-ACFD-425B-889F-C16596031469@syenar.hu>

Hi Alex,

I currently use the SDK 6.0.6000 for Windows Vista (RTM).
(the latest is 6.1.6000 a free download from MS)

I'm not aware of any issues regarding math headers, but
admittedly I only use the package for these few Harbour
contribs.

Brgds,
Viktor

On 2008.02.01., at 9:23, Alex Strickland wrote:

> Szak?ts Viktor wrote:
>> 2008-02-01 08:17 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
>>   * contrib/hbw32ddr/w32_ddrw.cpp
>>     ! Fixed compile error under MSVC.
>>     ! Fixed MSVC warning (strdup() -> hb_strdup())
>>       Now compiles without warnings under MSVC.
>>     ! Reindented, some formatting.
>
> I have similar problems compiling with MSVC 6 as reported  
> previously, which I have not tried to fix yet. You suggested a later  
> SDK version.
>
> What version of the SDK do you have installed? I guess that is why  
> my compile of contrib fails on the direct draw lib.
>
> I have a memory that if I install a new SDK some maths header files  
> must be edited, but I cannot find my notes. Do you have any such  
> issues that you remember?
>
> Thanks
> Alex
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour at rglab.pl  Fri Feb  1 06:25:31 2008
From: harbour at rglab.pl (=?iso-8859-2?Q?Ryszard_G=B3=B1b?=)
Date: Fri Feb  1 06:25:39 2008
Subject: [Harbour] Changelog 2008-02-01 12:25 UTC+0100 Ryszard Glab
Message-ID: <a6ace63c90a1465ff0c06c2a349e5477.qmail@home.pl>

2008-02-01 12:25 UTC+0100 Ryszard Glab <harbour//rglab.pl>
   * config/os2/global.cf
      * fixed to delete single library during 'clean' when
      command shell is used

Regards, Ryszard

From rglab at przesiew.imid.med.pl  Fri Feb  1 06:45:57 2008
From: rglab at przesiew.imid.med.pl (Ryszard Glab)
Date: Fri Feb  1 06:33:44 2008
Subject: [Harbour] Fix it quickly
In-Reply-To: <47A2BF55.2090900@mail.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>,
	<47A2BF55.2090900@mail.udg.mx>
Message-ID: <47A31485.3012.7979D6@rglab.przesiew.imid.med.pl>

On 1 Feb 2008 at 0:42, David Arturo Macias Corona wrote:

> then, no one file in e: root dir was found
> 
> Current Harbour build process DELETED all my files in OS/2 root dir
> It include CONFIG.sys

  Sorry for all problems. This issue should be fixed after my last 
commits at 2008-02-01 02:35 and 2008-02-01 12:25

Regards, Ryszard
From harbour.01 at syenar.hu  Fri Feb  1 08:52:27 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Feb  1 08:52:17 2008
Subject: [Harbour] Fix it quickly
In-Reply-To: <47A31485.3012.7979D6@rglab.przesiew.imid.med.pl>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>,
	<47A2BF55.2090900@mail.udg.mx>
	<47A31485.3012.7979D6@rglab.przesiew.imid.med.pl>
Message-ID: <BEF20754-364A-4AB8-8E16-7E166C3E9205@syenar.hu>

Hi Ryszard,

Could you find anything regarding 'make install'
not copying libs to their final location?

I'm experiencing this using w32/mingw32.

Brgds,
Viktor

On 2008.02.01., at 12:45, Ryszard Glab wrote:

> On 1 Feb 2008 at 0:42, David Arturo Macias Corona wrote:
>
>> then, no one file in e: root dir was found
>>
>> Current Harbour build process DELETED all my files in OS/2 root dir
>> It include CONFIG.sys
>
>  Sorry for all problems. This issue should be fixed after my last
> commits at 2008-02-01 02:35 and 2008-02-01 12:25
>
> Regards, Ryszard
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From rglab at przesiew.imid.med.pl  Fri Feb  1 10:52:34 2008
From: rglab at przesiew.imid.med.pl (Ryszard Glab)
Date: Fri Feb  1 10:39:58 2008
Subject: [Harbour] Fix it quickly
In-Reply-To: <BEF20754-364A-4AB8-8E16-7E166C3E9205@syenar.hu>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>,
	<47A31485.3012.7979D6@rglab.przesiew.imid.med.pl>,
	<BEF20754-364A-4AB8-8E16-7E166C3E9205@syenar.hu>
Message-ID: <47A34E52.20349.15B42CD@rglab.przesiew.imid.med.pl>

On 1 Feb 2008 at 14:52, Szak?ts Viktor wrote:

> Could you find anything regarding 'make install'
> not copying libs to their final location?
> 
> I'm experiencing this using w32/mingw32.

  Well, the problem is: there is no code to create the final location 
in current GNU *.cf files. This means that the directories specified 
by HB_LIB_INSTALL, HB_INC_INSTALL, HB_BIN_INSTALL have to be created 
manually before 'make install'. I don't know if it is 'by design' or 
it is an ommision of original author of makefiles.
  Should I add creation of directories into install.cf makefile?

Regards, Ryszard
From lorenzo.fiorini at gmail.com  Fri Feb  1 11:09:59 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Feb  1 11:10:08 2008
Subject: [Harbour] Fix it quickly
In-Reply-To: <47A34E52.20349.15B42CD@rglab.przesiew.imid.med.pl>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
	<47A31485.3012.7979D6@rglab.przesiew.imid.med.pl>
	<BEF20754-364A-4AB8-8E16-7E166C3E9205@syenar.hu>
	<47A34E52.20349.15B42CD@rglab.przesiew.imid.med.pl>
Message-ID: <9257026e0802010809l51c2f2ecmebcaabb0356a6c91@mail.gmail.com>

2008/2/1 Ryszard Glab <rglab@przesiew.imid.med.pl>:

>   Well, the problem is: there is no code to create the final location
> in current GNU *.cf files. This means that the directories specified
> by HB_LIB_INSTALL, HB_INC_INSTALL, HB_BIN_INSTALL have to be created
> manually before 'make install'. I don't know if it is 'by design' or
> it is an ommision of original author of makefiles.
>   Should I add creation of directories into install.cf makefile?

I have these dirs but it still can't copy.

It seems it can't find where are the "source" lib to copy.

best regards,
Lorenzo
From harbour at rglab.pl  Fri Feb  1 11:40:35 2008
From: harbour at rglab.pl (=?iso-8859-2?Q?Ryszard_G=B3=B1b?=)
Date: Fri Feb  1 11:40:35 2008
Subject: [Harbour] Changelog 2008-02-01 17:35 UTC+0100 Ryszard Glab
Message-ID: <fb8411045e16bf9b8f7e4537b2b2a939.qmail@home.pl>

2008-02-01 17:35 UTC+0100 Ryszard Glab (harbour//rglab.pl)
  * config/lib.cf
      * fixed to correctly list the source of installed library

Regards, Ryszard

From harbour.01 at syenar.hu  Fri Feb  1 12:22:01 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Feb  1 12:22:18 2008
Subject: [Harbour] Fix it quickly
In-Reply-To: <47A34E52.20349.15B42CD@rglab.przesiew.imid.med.pl>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>,
	<47A31485.3012.7979D6@rglab.przesiew.imid.med.pl>,
	<BEF20754-364A-4AB8-8E16-7E166C3E9205@syenar.hu>
	<47A34E52.20349.15B42CD@rglab.przesiew.imid.med.pl>
Message-ID: <E8D4215E-7DDC-4EDC-A2D5-B679C6573300@syenar.hu>

Hi Ryszard,

On 2008.02.01., at 16:52, Ryszard Glab wrote:

> On 1 Feb 2008 at 14:52, Szak?ts Viktor wrote:
>
>> Could you find anything regarding 'make install'
>> not copying libs to their final location?
>>
>> I'm experiencing this using w32/mingw32.
>
>  Well, the problem is: there is no code to create the final location
> in current GNU *.cf files. This means that the directories specified
> by HB_LIB_INSTALL, HB_INC_INSTALL, HB_BIN_INSTALL have to be created
> manually before 'make install'. I don't know if it is 'by design' or
> it is an ommision of original author of makefiles.
>  Should I add creation of directories into install.cf makefile?

No, I think that goes beyong the job of our make system and
these dirs should be existing. Mines do exist (they held the
result of a previous mingw32 build run), so I wonder what
else could be the problem.

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Feb  1 12:24:48 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Feb  1 12:24:33 2008
Subject: [Harbour] Changelog 2008-02-01 17:35 UTC+0100 Ryszard Glab
In-Reply-To: <fb8411045e16bf9b8f7e4537b2b2a939.qmail@home.pl>
References: <fb8411045e16bf9b8f7e4537b2b2a939.qmail@home.pl>
Message-ID: <0540D452-A4B0-44C2-AE06-A3881CCED40F@syenar.hu>

Thanks Ryszard, that did the job, now it's
copying everything well for me.

Brgds,
Viktor

On 2008.02.01., at 17:40, Ryszard G??b wrote:

> 2008-02-01 17:35 UTC+0100 Ryszard Glab (harbour//rglab.pl)
>  * config/lib.cf
>      * fixed to correctly list the source of installed library
>
> Regards, Ryszard
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Fri Feb  1 12:38:47 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Feb  1 12:39:08 2008
Subject: [Harbour] Changelog 2008-02-01 17:35 UTC+0100 Ryszard Glab
In-Reply-To: <fb8411045e16bf9b8f7e4537b2b2a939.qmail@home.pl>
References: <fb8411045e16bf9b8f7e4537b2b2a939.qmail@home.pl>
Message-ID: <9257026e0802010938n4a1c436ds35e7351690c08b6c@mail.gmail.com>

On Feb 1, 2008 5:40 PM, Ryszard G??b <harbour@rglab.pl> wrote:
> 2008-02-01 17:35 UTC+0100 Ryszard Glab (harbour//rglab.pl)
>   * config/lib.cf
>       * fixed to correctly list the source of installed library

Now make_gnu.sh install works here.

best regards,
Lorenzo
From tomaz.zupan at orpo.si  Fri Feb  1 13:44:01 2008
From: tomaz.zupan at orpo.si (Tomaz Zupan)
Date: Fri Feb  1 13:47:11 2008
Subject: [Harbour] Changelog 2008-02-01 17:35 UTC+0100 Ryszard Glab
In-Reply-To: <fb8411045e16bf9b8f7e4537b2b2a939.qmail@home.pl>
References: <fb8411045e16bf9b8f7e4537b2b2a939.qmail@home.pl>
Message-ID: <200802011944.01686.tomaz.zupan@orpo.si>

Dne petek 1. februarja 2008 je Ryszard G??b napisal(a):
> 2008-02-01 17:35 UTC+0100 Ryszard Glab (harbour//rglab.pl)
>   * config/lib.cf
>       * fixed to correctly list the source of installed library

make_rpm.sh works now. 
Thanks!

LP, Toma?
From cvc at oohg.org  Fri Feb  1 14:45:19 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Fri Feb  1 14:45:34 2008
Subject: [Harbour] problem testing samples gtwvg
In-Reply-To: <0E36F3DB-1EC7-457C-87E3-5BD8BD3AD8CE@syenar.hu>
References: <47A21E27.7020503@oohg.org>
	<0E36F3DB-1EC7-457C-87E3-5BD8BD3AD8CE@syenar.hu>
Message-ID: <47A376CF.8000802@oohg.org>

Szak?ts Viktor escribi?:
> Hi Ciro,
> 
> You'll need to update your local make script
> according to the recent lib name changes.
> 
Hi Victor:

I already updated to new structure, I use actual SVN.

the error is the same.

> ==> Linking to make C:\harbour\harbour\contrib\gtwvg\tests\demowvg.EXE ...
> 	C:\borland\BCC55\BIN\ILINK32.EXE -Gn -Tpe -aa -LC:\borland\BCC55\LIB @_2008020152925$Script.ld
> Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
> Error: Unresolved external '_hb_vmPushNumInt' referenced from C:\HARBOUR\HARBOUR\LIB\B32\GTWVG.LIB|gtwvg
> Error: Unresolved external '_hb_gt_w32_tone' referenced from C:\HARBOUR\HARBOUR\LIB\B32\GTWVG.LIB|gtwvg
> Error: Unresolved external '_hb_gt_w32_setClipboard' referenced from C:\HARBOUR\HARBOUR\LIB\B32\GTWVG.LIB|gtwvg
> Error: Unresolved external '_hb_gt_w32_getClipboard' referenced from C:\HARBOUR\HARBOUR\LIB\B32\GTWVG.LIB|gtwvg
> Error: Unresolved external '_hb_gtGetScrChar' referenced from C:\HARBOUR\HARBOUR\LIB\B32\GTWVG.LIB|wvtcore
> Error: Unresolved external '_hb_gtPutScrChar' referenced from C:\HARBOUR\HARBOUR\LIB\B32\GTWVG.LIB|wvtcore
> Error: Unresolved external '_hb_gtGetCurrColor' referenced from C:\HARBOUR\HARBOUR\LIB\B32\GTWVG.LIB|wvtcore
> 

regards
Ciro



-- 
http://sistemascvc.tripod.com  (la casa del no2imp / the no2imp home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From dbtopas at dbtopas.lt  Fri Feb  1 17:49:09 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Feb  1 17:51:12 2008
Subject: [Harbour] Collectible pointers
Message-ID: <47A3A1E5.7010009@dbtopas.lt>

Hi,


I expect pointer not to be collected, because it "lives" in variable h. 
What's wrong with my code?


Best regards,
Mindaugas


PROC main()
LOCAL h
   h := myfunc( h )
   debug( "1" )
   h := myfunc( h )
   debug( "2" )
   h := myfunc( h )
   debug( "3" )
RETURN

#pragma begindump
#include "hbapi.h"

static HB_GARBAGE_FUNC( hb_fctx_destructor )
{
    (void) Cargo;
    fprintf( stdout, "destructor\n" );
}

HB_FUNC( DEBUG )
{
    fprintf( stdout, hb_parc( 1 ) );
    fprintf( stdout, "\n" );
}

HB_FUNC( MYFUNC )
{
    void*  ptr = hb_parptrGC( hb_fctx_destructor, 1 );

    if( ! ptr )
    {
       ptr = hb_gcAlloc( 4, hb_fctx_destructor );
    }
    hb_retptrGC( ptr );
}
#pragma enddump
From harbour.01 at syenar.hu  Fri Feb  1 19:10:59 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Feb  1 19:10:44 2008
Subject: [Harbour] problem testing samples gtwvg
In-Reply-To: <47A376CF.8000802@oohg.org>
References: <47A21E27.7020503@oohg.org>
	<0E36F3DB-1EC7-457C-87E3-5BD8BD3AD8CE@syenar.hu>
	<47A376CF.8000802@oohg.org>
Message-ID: <0A4669B6-9D86-4494-A3ED-9D7A8810B8E9@syenar.hu>

Hi Ciro,

Seems that hbrtl.lib is not amongst the linked libraries.

Question: What is exactly in the file '_2008020152925$Script.ld' ?

Or, what is the script you use to build this executable?

Brgds,
Viktor

On 2008.02.01., at 20:45, Ciro Vargas Clemow wrote:

> Szak?ts Viktor escribi?:
>> Hi Ciro,
>> You'll need to update your local make script
>> according to the recent lib name changes.
> Hi Victor:
>
> I already updated to new structure, I use actual SVN.
>
> the error is the same.
>
>> ==> Linking to make C:\harbour\harbour\contrib\gtwvg\tests 
>> \demowvg.EXE ...
>> 	C:\borland\BCC55\BIN\ILINK32.EXE -Gn -Tpe -aa -LC:\borland 
>> \BCC55\LIB @_2008020152925$Script.ld
>> Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
>> Error: Unresolved external '_hb_vmPushNumInt' referenced from C: 
>> \HARBOUR\HARBOUR\LIB\B32\GTWVG.LIB|gtwvg
>> Error: Unresolved external '_hb_gt_w32_tone' referenced from C: 
>> \HARBOUR\HARBOUR\LIB\B32\GTWVG.LIB|gtwvg
>> Error: Unresolved external '_hb_gt_w32_setClipboard' referenced  
>> from C:\HARBOUR\HARBOUR\LIB\B32\GTWVG.LIB|gtwvg
>> Error: Unresolved external '_hb_gt_w32_getClipboard' referenced  
>> from C:\HARBOUR\HARBOUR\LIB\B32\GTWVG.LIB|gtwvg
>> Error: Unresolved external '_hb_gtGetScrChar' referenced from C: 
>> \HARBOUR\HARBOUR\LIB\B32\GTWVG.LIB|wvtcore
>> Error: Unresolved external '_hb_gtPutScrChar' referenced from C: 
>> \HARBOUR\HARBOUR\LIB\B32\GTWVG.LIB|wvtcore
>> Error: Unresolved external '_hb_gtGetCurrColor' referenced from C: 
>> \HARBOUR\HARBOUR\LIB\B32\GTWVG.LIB|wvtcore
>
> regards
> Ciro
>
>
>
> -- 
> http://sistemascvc.tripod.com  (la casa del no2imp / the no2imp home )
>
> http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more  
> powerfull )
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Feb  1 20:13:24 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Feb  1 20:14:25 2008
Subject: [Harbour] CHANGELOG: 2008-02-02 02:13 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c86538$Blat.v2.6.2$cf0ff4c4$115cec653666@127.0.0.1>

2008-02-02 02:13 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * include/hbapicdp.h
   * common.mak
   * source/codepage/Makefile
   + source/codepage/uc1252.c
   + source/codepage/cpdewin.c
   + source/codepage/cpruiso.c
     + Added RUISO (Russian ISO-8859-5) and DEWIN (German CP1252, actually
       identical to DEISO) codepages and a CP1252<->Unicode table.
       Borrowed from Phil Krylov (xhb).
--
Brgds,
Viktor

From cvc at oohg.org  Fri Feb  1 21:37:29 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Fri Feb  1 21:44:13 2008
Subject: [Harbour] problem testing samples gtwvg
In-Reply-To: <0A4669B6-9D86-4494-A3ED-9D7A8810B8E9@syenar.hu>
References: <47A21E27.7020503@oohg.org>	<0E36F3DB-1EC7-457C-87E3-5BD8BD3AD8CE@syenar.hu>	<47A376CF.8000802@oohg.org>
	<0A4669B6-9D86-4494-A3ED-9D7A8810B8E9@syenar.hu>
Message-ID: <47A3D769.5030003@oohg.org>

Szak?ts Viktor escribi?:
> Hi Ciro,
> 
> Seems that hbrtl.lib is not amongst the linked libraries.
> 
> Question: What is exactly in the file '_2008020152925$Script.ld' ?
> 
> Or, what is the script you use to build this executable?

Hi Victor:

I am using QAC.

I added hbrtl.lib and now only obtain one error.

C:\borland\BCC55\BIN\ILINK32.EXE -Gn -Tpe -aa -LC:\borland\BCC55\LIB 
@_2008020152925$Script.ld
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Error: Unresolved external '_hb_vmPushNumInt' referenced from 
C:\HARBOUR\HARBOUR\LIB\B32\GTWVG.LIB|gtwvg

deleting C:\harbour\harbour\contrib\gtwvg\tests\demowvg.EXE

what library I'm missing?

regards
Ciro



-- 
http://sistemascvc.tripod.com  (la casa del no2imp / the no2imp home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From jarabal at ya.com  Fri Feb  1 22:18:03 2008
From: jarabal at ya.com (Javier)
Date: Fri Feb  1 22:18:07 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <47A3A1E5.7010009@dbtopas.lt>
References: <47A3A1E5.7010009@dbtopas.lt>
Message-ID: <47A3E0EB.2030309@ya.com>

Mindaugas Kavaliauskas escribi?:
> What's wrong with my code?
>
mmmmh ... YA TA!  "hb_fctx_destructor" is forbidden by the boss. You 
should rename it with "My_destructor". :)
Sorry it is sophisticated of course, please, could you explain it more. 
What is you output?

Best regards
Xavi
From jorgeagiraldo at hotmail.com  Fri Feb  1 22:36:40 2008
From: jorgeagiraldo at hotmail.com (Jorge A. Giraldo)
Date: Fri Feb  1 22:36:47 2008
Subject: [Harbour] problem testing samples gtwvg
In-Reply-To: <47A3D769.5030003@oohg.org>
References: <47A21E27.7020503@oohg.org>
	<0E36F3DB-1EC7-457C-87E3-5BD8BD3AD8CE@syenar.hu>	<47A376CF.8000802@oohg.org>
	<0A4669B6-9D86-4494-A3ED-9D7A8810B8E9@syenar.hu>
	<47A3D769.5030003@oohg.org>
Message-ID: <BAY136-W21B934E399BF03A88686F7A1310@phx.gbl>


Ciro,

hbvm.lib




Jorge A.





> Date: Fri, 1 Feb 2008 21:37:29 -0500
> From: cvc@oohg.org
> To: harbour@harbour-project.org
> Subject: Re: [Harbour] problem testing samples gtwvg
> 
> Szak?ts Viktor escribi?:
> > Hi Ciro,
> > 
> > Seems that hbrtl.lib is not amongst the linked libraries.
> > 
> > Question: What is exactly in the file '_2008020152925$Script.ld' ?
> > 
> > Or, what is the script you use to build this executable?
> 
> Hi Victor:
> 
> I am using QAC.
> 
> I added hbrtl.lib and now only obtain one error.
> 
> C:\borland\BCC55\BIN\ILINK32.EXE -Gn -Tpe -aa -LC:\borland\BCC55\LIB 
> @_2008020152925$Script.ld
> Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
> Error: Unresolved external '_hb_vmPushNumInt' referenced from 
> C:\HARBOUR\HARBOUR\LIB\B32\GTWVG.LIB|gtwvg
> 
> deleting C:\harbour\harbour\contrib\gtwvg\tests\demowvg.EXE
> 
> what library I'm missing?
> 
> regards
> Ciro
> 
> 
> 
> -- 
> http://sistemascvc.tripod.com  (la casa del no2imp / the no2imp home )
> 
> http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )
> 
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_________________________________________________________________
Explore the seven wonders of the world
http://search.msn.com/results.aspx?q=7+wonders+world&mkt=en-US&form=QBRE
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080202/baf12770/attachment-0001.html
From dmacias at mail.udg.mx  Sat Feb  2 02:26:33 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sat Feb  2 02:26:43 2008
Subject: [Harbour] Re: Fix it quickly
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47A41B29.2060006@mail.udg.mx>

>> then, no one file in e: root dir was found
>>
>> Current Harbour build process DELETED all my files in OS/2 root dir
>> It include CONFIG.sys

>  Sorry for all problems. This issue should be fixed after my last
>commits at 2008-02-01 02:35 and 2008-02-01 12:25

Ryszard:

In development stages many results are expected, but not of this type  :-)

Current build process is not working fine for OS/2 yet

I made many tests "catching" errors with an entirely new checkout

"First messages" (remember later) are repeated in many points:
---------------------------------------
[E:\harbour802]make -r           1>make_gnu.log
SYS0082: The directory or file cannot be created.
make[2]: [dirbase] Error 1 (ignored)
SYS0082: The directory or file cannot be created.
make[2]: [dirbase] Error 1 (ignored)
---------------------------------------


and belong to "md ..\..\lib\os2", "md ..\..\lib\os2\gcc" in:

---------------------------------------
[E:\harbour802\source]make -C common first
make[2]: Entering directory `/harbour802/source/common'
CMD.EXE /c IF NOT EXIST os2 md os2
CMD.EXE /c IF NOT EXIST os2\gcc    md os2\gcc
CMD.EXE /c IF NOT EXIST ..\..\lib\os2   md ..\..\lib\os2
CMD.EXE /c IF NOT EXIST ..\..\lib\os2\gcc    md ..\..\lib\os2\gcc
make[3]: Entering directory `/harbour802/source/common/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbfhnd.c -ohbfhnd.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbfsapi.c -ohbfsapi.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbfopen.c -ohbfopen.o
---------------------------------------


Using
    make_gnu.cmd clean
result in messages like these:
---------------------------------------
SYS0002: The system cannot find the file specified.
Error occurred while processing: os2\gcc*.*.
make[2]: [clean] Error 1 (ignored)
SYS0016: The directory cannot be removed.
make[2]: [clean] Error 1 (ignored)
SYS0016: The directory cannot be removed.
make[2]: [clean] Error 1 (ignored)
---------------------------------------

This expression is strange:
    os2\gcc*.*
It does not appear in make_gnu.log, just in screen in many points

Messages belong to this part of make_gnu.log:
---------------------------------------
[E:\harbour802\source]make -C common clean
make[2]: Entering directory `/harbour802/source/common'
CMD.EXE /c IF EXIST os2\gcc     del /n os2\gcc\*.*
CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
CMD.EXE /c IF EXIST os2  rmdir os2
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\hbcommon.a del /n
..\..\lib\os2\gcc\hbcommon.a
make[2]: Leaving directory `/harbour802/source/common'
---------------------------------------


Some errors seem to be related to expression  "..\..\lib\" as in these 
lines:
---------------------------------------
CMD.EXE /c IF NOT EXIST ..\..\lib\os2   md ..\..\lib\os2
CMD.EXE /c IF NOT EXIST ..\..\lib\os2\gcc    md ..\..\lib\os2\gcc
CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\hbcommon.a del /n
..\..\lib\os2\gcc\hbcommon.a
---------------------------------------

"md ..\..\lib\os2" and rest work fine from command line, located in
proper directory, but seem it does not work under make process


Reviewing this line:
   CMD.EXE /c IF NOT EXIST ..\..\lib\os2   md ..\..\lib\os2
perhaps current directory for CMD.EXE instance is not that reported by 
make process (make[2]: Entering directory `/harbour802/source/common'), 
instead it seem to be directory where make process started ( e:\harbour802 )

This manual sequence show error
    SYS0082: The directory or file cannot be created.
only if current directory is that of start of make, and not that 
reported by make ( \harbour802\source\common )
( remember "first messages" )

----------------------------------------
[E:\]cd \harbour802\source\common

[E:\harbour802\source\common]md  ..\..\lib\os2

[E:\harbour802\source\common]cd \harbour802

[E:\harbour802]md  ..\..\lib\os2
SYS0082: The directory or file cannot be created.

[E:\harbour802]
----------------------------------------

Any hints ?
Maurilio, do you have any hint ?

David Macias



First part of make_gnu.log ---------------------------

CMD.EXE /c FOR %d IN (doc include source utils contrib ) DO make -C %d first

[E:\harbour802]make -C doc first
make[1]: Entering directory `/harbour802/doc'
CMD.EXE /c FOR %d IN (en es ) DO make -C %d first

[E:\harbour802\doc]make -C en first
make[2]: Entering directory `/harbour802/doc/en'
make[2]: Nothing to be done for `first'.
make[2]: Leaving directory `/harbour802/doc/en'

[E:\harbour802\doc]make -C es first
make[2]: Entering directory `/harbour802/doc/es'
make[2]: Nothing to be done for `first'.
make[2]: Leaving directory `/harbour802/doc/es'
make[1]: Leaving directory `/harbour802/doc'

[E:\harbour802]make -C include first
make[1]: Entering directory `/harbour802/include'
make[1]: Nothing to be done for `first'.
make[1]: Leaving directory `/harbour802/include'

[E:\harbour802]make -C source first
make[1]: Entering directory `/harbour802/source'
CMD.EXE /c FOR %d IN (common pp compiler main rtl vm macro codepage lang
rdd hbpcre debug ) DO make -C %d first

[E:\harbour802\source]make -C common first
make[2]: Entering directory `/harbour802/source/common'
CMD.EXE /c IF NOT EXIST os2 md os2
CMD.EXE /c IF NOT EXIST os2\gcc    md os2\gcc
CMD.EXE /c IF NOT EXIST ..\..\lib\os2   md ..\..\lib\os2
CMD.EXE /c IF NOT EXIST ..\..\lib\os2\gcc    md ..\..\lib\os2\gcc
make[3]: Entering directory `/harbour802/source/common/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbfhnd.c -ohbfhnd.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbfsapi.c -ohbfsapi.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbfopen.c -ohbfopen.o

....

---------------------------


From myorg63 at mail.ru  Sat Feb  2 03:03:21 2008
From: myorg63 at mail.ru (Petr Chornyj)
Date: Sat Feb  2 03:03:25 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <47A3A1E5.7010009@dbtopas.lt>
References: <47A3A1E5.7010009@dbtopas.lt>
Message-ID: <15240527.post@talk.nabble.com>




Mindaugas Kavaliauskas wrote:
> 
> Hi,
> 
> 
> I expect pointer not to be collected, because it "lives" in variable h. 
> What's wrong with my code?
> 
> 
> Best regards,
> Mindaugas
> 
> 
> PROC main()
> LOCAL h
>    h := myfunc( h )
>    debug( "1" )
>    h := myfunc( h )
>    debug( "2" )
>    h := myfunc( h )
>    debug( "3" )
> RETURN
> 
> 
I don't know, but it's work as expected

PROC main()
LOCAL h
   h := myfunc( h )
   debug( "1" )
   h := NIL

   h := myfunc( h )
   debug( "2" )
   h := 4

   h := myfunc( h )
   debug( "3" )
   h := array( 5 )
RETURN

Maybe is it  GC specific?

Regards,
Petr







-- 
View this message in context: http://www.nabble.com/Collectible-pointers-tp15237161p15240527.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mpaliwoda at interia.pl  Sat Feb  2 03:03:36 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sat Feb  2 03:05:27 2008
Subject: [Harbour] Re: Collectible pointers
In-Reply-To: <47A3A1E5.7010009@dbtopas.lt>
References: <47A3A1E5.7010009@dbtopas.lt>
Message-ID: <fo184o$sr5$1@ger.gmane.org>

Hi Mindaugas,

> I expect pointer not to be collected, because it "lives" in variable h. 

No. Not always. See below ...

> What's wrong with my code?

Read below ...

> PROC main()
> LOCAL h
>   h := myfunc( h )

You call h := myfunc( h ). h is empty so hb_gcAlloc()
is called in myfunc() and the result is stored in h.
Note that the result has got "an assinged garbage"
func hb_fctx_destructor() to it.

>   debug( "1" )
>   h := myfunc( h )

You call h := myfunc( h ). h is not empty so hb_gcAlloc()
is not called. But a new item is returned and stored in h.
And now the old item stored in h previously, does not belong
to any item and it is freed by GC. However a new item is not
a "garbage" item, because no hb_gcAlloc() was called for it,
so it will not be touched by GC in a future (no "garbage"
func will be called for this item).

>   debug( "2" )
>   h := myfunc( h )
>   debug( "3" )
> RETURN
> 
> #pragma begindump
> #include "hbapi.h"
> 
> static HB_GARBAGE_FUNC( hb_fctx_destructor )
> {
>    (void) Cargo;
>    fprintf( stdout, "destructor\n" );
> }
> 
> HB_FUNC( DEBUG )
> {
>    fprintf( stdout, hb_parc( 1 ) );
>    fprintf( stdout, "\n" );
> }
> 
> HB_FUNC( MYFUNC )
> {
>    void*  ptr = hb_parptrGC( hb_fctx_destructor, 1 );
> 
>    if( ! ptr )
>    {
>       ptr = hb_gcAlloc( 4, hb_fctx_destructor );
>    }
>    hb_retptrGC( ptr );
> }
> #pragma enddump


-- 

Marek

From mpaliwoda at interia.pl  Sat Feb  2 03:24:54 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sat Feb  2 03:25:11 2008
Subject: [Harbour] Re: Collectible pointers
In-Reply-To: <fo184o$sr5$1@ger.gmane.org>
References: <47A3A1E5.7010009@dbtopas.lt> <fo184o$sr5$1@ger.gmane.org>
Message-ID: <47A428D6.3070003@interia.pl>

Marek Paliwoda pisze:

> And now the old item stored in h previously, does not belong
> to any item and it is freed by GC. 
          ^^^^
Should be read as "to any place known to GC" or "to any host
variable like : local,static,private,public,or hb_itemNew()".

-- 

Marek


----------------------------------------------------------------------
Zmus swojego faceta, zeby to przeczytal
Kliknij >>> http://link.interia.pl/f1ceb

From harbour.01 at syenar.hu  Sat Feb  2 03:29:19 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Feb  2 03:29:03 2008
Subject: [Harbour] problem testing samples gtwvg
In-Reply-To: <47A3D769.5030003@oohg.org>
References: <47A21E27.7020503@oohg.org>	<0E36F3DB-1EC7-457C-87E3-5BD8BD3AD8CE@syenar.hu>	<47A376CF.8000802@oohg.org>
	<0A4669B6-9D86-4494-A3ED-9D7A8810B8E9@syenar.hu>
	<47A3D769.5030003@oohg.org>
Message-ID: <4FF09A42-D273-4F8A-B925-282009A1C381@syenar.hu>

You seem to be missing hbvm.lib.

Here's the full list of changes, from the
ChangeLog entry, you may need any of these
depending on your app code:

        Old name    New name
        --------    --------
        codepage -> hbcpage
        common   -> hbcommon
        compiler -> hbcplr
        debug    -> hbdebug
        hbsix    -> hbsix
        hsx      -> hbhsx
        lang     -> hblang
        macro    -> hbmacro
        pp       -> hbpp
        rtl      -> hbrtl
        vm       -> hbvm
        rdd      -> hbrdd
        dbfcdx   -> rddcdx
        dbffpt   -> rddfpt
        dbfntx   -> rddntx
        dbfdbt   -> rdddbt
        nulsys   -> hbnulrdd
        usrrdd   -> hbusrrdd
        mainwin  -> hbmainwin
        mainstd  -> hbmainstd

Brgds,
Viktor

On 2008.02.02., at 3:37, Ciro Vargas Clemow wrote:

> Szak?ts Viktor escribi?:
>> Hi Ciro,
>> Seems that hbrtl.lib is not amongst the linked libraries.
>> Question: What is exactly in the file '_2008020152925$Script.ld' ?
>> Or, what is the script you use to build this executable?
>
> Hi Victor:
>
> I am using QAC.
>
> I added hbrtl.lib and now only obtain one error.
>
> C:\borland\BCC55\BIN\ILINK32.EXE -Gn -Tpe -aa -LC:\borland\BCC55\LIB  
> @_2008020152925$Script.ld
> Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
> Error: Unresolved external '_hb_vmPushNumInt' referenced from C: 
> \HARBOUR\HARBOUR\LIB\B32\GTWVG.LIB|gtwvg
>
> deleting C:\harbour\harbour\contrib\gtwvg\tests\demowvg.EXE
>
> what library I'm missing?
>
> regards
> Ciro
>
>
>
> -- 
> http://sistemascvc.tripod.com  (la casa del no2imp / the no2imp home )
>
> http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more  
> powerfull )
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sat Feb  2 03:54:02 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Feb  2 03:53:48 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <47A3E0EB.2030309@ya.com>
References: <47A3A1E5.7010009@dbtopas.lt> <47A3E0EB.2030309@ya.com>
Message-ID: <23C4D025-CE54-459E-B4BD-EECC1E4C957A@syenar.hu>

Hi Mindaugas,

On 2008.02.02., at 4:18, Javier wrote:

> Mindaugas Kavaliauskas escribi?:
>> What's wrong with my code?
>>
> mmmmh ... YA TA!  "hb_fctx_destructor" is forbidden by the boss. You  
> should rename it with "My_destructor". :)

[ yes Javier, but also notice that indenting is just two
chars deep, not to mention the usage of 'begindump'.. :-P ]

I think the problem is that you're reassigning
'h' after debug( "1" ), which makes it lose it's
value, thus initiating the destructor, and at the
same time it won't get a new value, because myfunc()
will get the non-NULL parameter, which will be
reassigned to 'h' as is.

...
1. debug( "1" )
2. execute myfunc( h )
3. do nothing (value of ptr will just fall through), since h is not  
NULL at this point
4. assign value to h
4a. free up old value of h
4b. call destructor ("destructor" displayed)
4c. assign new value to h (which equals to the old one)
5. debug( "2" )
...

Brgds,
Viktor

From cvc at oohg.org  Sat Feb  2 04:25:23 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Sat Feb  2 04:25:30 2008
Subject: [Harbour] problem testing samples gtwvg
In-Reply-To: <BAY136-W21B934E399BF03A88686F7A1310@phx.gbl>
References: <47A21E27.7020503@oohg.org>	<0E36F3DB-1EC7-457C-87E3-5BD8BD3AD8CE@syenar.hu>	<47A376CF.8000802@oohg.org>	<0A4669B6-9D86-4494-A3ED-9D7A8810B8E9@syenar.hu>	<47A3D769.5030003@oohg.org>
	<BAY136-W21B934E399BF03A88686F7A1310@phx.gbl>
Message-ID: <47A43703.5020001@oohg.org>

Jorge A. Giraldo escribi?:
> Ciro,
> 
> hbvm.lib
> 

thanks Jorge

best regards
Ciro

> 
-- 
http://sistemascvc.tripod.com  (la casa del no2imp / the no2imp home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From cvc at oohg.org  Sat Feb  2 04:26:29 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Sat Feb  2 04:26:34 2008
Subject: [Harbour] problem testing samples gtwvg
In-Reply-To: <4FF09A42-D273-4F8A-B925-282009A1C381@syenar.hu>
References: <47A21E27.7020503@oohg.org>	<0E36F3DB-1EC7-457C-87E3-5BD8BD3AD8CE@syenar.hu>	<47A376CF.8000802@oohg.org>	<0A4669B6-9D86-4494-A3ED-9D7A8810B8E9@syenar.hu>	<47A3D769.5030003@oohg.org>
	<4FF09A42-D273-4F8A-B925-282009A1C381@syenar.hu>
Message-ID: <47A43745.3060703@oohg.org>

Szak?ts Viktor escribi?:
> You seem to be missing hbvm.lib.

thanks Victor
bestt regards
Ciro
> -- 
http://sistemascvc.tripod.com  (la casa del no2imp / the no2imp home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From mpaliwoda at interia.pl  Sat Feb  2 05:47:16 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sat Feb  2 05:47:22 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <47A3A1E5.7010009@dbtopas.lt>
References: <47A3A1E5.7010009@dbtopas.lt>
Message-ID: <47A44A34.2030207@interia.pl>

Hi All,

>    void*  ptr = hb_parptrGC( hb_fctx_destructor, 1 );

Could someone explain me what is the purpose of hb_parptrGC() ?

-- 

Marek


----------------------------------------------------------------------
Zmus swojego faceta, zeby to przeczytal
Kliknij >>> http://link.interia.pl/f1ceb

From jarabal at ya.com  Sat Feb  2 06:21:32 2008
From: jarabal at ya.com (Javier)
Date: Sat Feb  2 06:21:43 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <23C4D025-CE54-459E-B4BD-EECC1E4C957A@syenar.hu>
References: <47A3A1E5.7010009@dbtopas.lt> <47A3E0EB.2030309@ya.com>
	<23C4D025-CE54-459E-B4BD-EECC1E4C957A@syenar.hu>
Message-ID: <47A4523C.4060604@ya.com>

Szak?ts Viktor escribi?:
> [ yes Javier, but also notice that indenting is just two
> chars deep, not to mention the usage of 'begindump'.. :-P ]
>
I take note  :'(
> I think the problem is that you're reassigning
> 'h' after debug( "1" ), which makes it lose it's
> value, thus initiating the destructor, and at the
> same time it won't get a new value, because myfunc()
> will get the non-NULL parameter, which will be
> reassigned to 'h' as is.
>
> ...
> 1. debug( "1" )
> 2. execute myfunc( h )
> 3. do nothing (value of ptr will just fall through), since h is not 
> NULL at this point
> 4. assign value to h
> 4a. free up old value of h
Thanks Viktor, now I will take care with the use of hb_itemPutPtrGC() 
because which I am working doesn't do the same. :(

PHB_ITEM HB_EXPORT hb_itemPutPtrGC( PHB_ITEM pItem, void * pValue )
{
   HB_TRACE_STEALTH(HB_TR_DEBUG, ("hb_itemPutPtr(%p, %p)", pItem, pValue));

   hb_gcIncRef( pValue );

   pItem = hb_itemPutPtr( pItem, pValue );
   pItem->item.asPointer.collect = TRUE;

   return pItem;
}

Best regards
Xavi
From druzus at acn.waw.pl  Sat Feb  2 07:28:54 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Feb  2 07:29:00 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <47A44A34.2030207@interia.pl>
References: <47A3A1E5.7010009@dbtopas.lt> <47A44A34.2030207@interia.pl>
Message-ID: <20080202122854.GA5637@localhost.localdomain>

On Sat, 02 Feb 2008, Marek Paliwoda wrote:
> Hi All,
> >   void*  ptr = hb_parptrGC( hb_fctx_destructor, 1 );
> Could someone explain me what is the purpose of hb_parptrGC() ?

It's used for verification if given parameter holds pointer item
with pointer which points to structure allocated by
hb_gcAlloc( size, hb_fctx_destructor ). It means that your code
will not accept other pointer types and GPF unexpectly.

best regards,
Przemek
From harbour.01 at syenar.hu  Sat Feb  2 07:34:39 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Feb  2 07:34:24 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <47A44A34.2030207@interia.pl>
References: <47A3A1E5.7010009@dbtopas.lt> <47A44A34.2030207@interia.pl>
Message-ID: <C5568775-6532-47F8-A030-F79502B7A591@syenar.hu>

Hi Marek,

Similarly to hb_parptr() it stores pointer, but
unlike hb_parptr() you can attach a callback function
to the variable, which will get control when the
Harbour level variable will be released, and last
but not least the memory associated with the pointer
(allocated using hb_gcAlloc()) will be freed automatically.

This means you can have references to C level
objects and you can be sure they will all be freed
when necessary, all handled by Harbour. In contrary,
when using plain hb_parptr() you would have to manually
deal with freeing the resources, or you'd get them leaked.

with parptrGC:
LOCAL myhandle := GetWinHandle()
...
UseWinHandle( myhandle )
...
RETURN NIL // myhandle and associated resources automatically freed

with parptr:
LOCAL myhandle := GetWinHandle()
...
UseWinHandle( myhandle )
...
FreeWinHandle( myhandle )
RETURN NIL

In the latter case, if there is an error between
UseWinHandle() and FreeWinHandle(), you may leak some
resources.

Brgds,
Viktor

On 2008.02.02., at 11:47, Marek Paliwoda wrote:

> Hi All,
>
>>   void*  ptr = hb_parptrGC( hb_fctx_destructor, 1 );
>
> Could someone explain me what is the purpose of hb_parptrGC() ?
>
> -- 
>
> Marek
>
>
> ----------------------------------------------------------------------
> Zmus swojego faceta, zeby to przeczytal
> Kliknij >>> http://link.interia.pl/f1ceb
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mpaliwoda at interia.pl  Sat Feb  2 07:51:28 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sat Feb  2 07:51:34 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <20080202122854.GA5637@localhost.localdomain>
References: <47A3A1E5.7010009@dbtopas.lt> <47A44A34.2030207@interia.pl>
	<20080202122854.GA5637@localhost.localdomain>
Message-ID: <47A46750.901@interia.pl>

Przemyslaw Czerpak pisze:

> On Sat, 02 Feb 2008, Marek Paliwoda wrote:
>> Hi All,
>>>   void*  ptr = hb_parptrGC( hb_fctx_destructor, 1 );
>> Could someone explain me what is the purpose of hb_parptrGC() ?
> 
> It's used for verification if given parameter holds pointer item
> with pointer which points to structure allocated by
> hb_gcAlloc( size, hb_fctx_destructor ). It means that your code
> will not accept other pointer types and GPF unexpectly.

So it will return NULL if the item does not hold
a value allocated by hb_gcAlloc() with a requirerd
"finalizer" ? Ok, I understand. Thanks.

-- 

Marek


----------------------------------------------------------------------
Zmus swojego faceta, zeby to przeczytal
Kliknij >>> http://link.interia.pl/f1ceb

From druzus at acn.waw.pl  Sat Feb  2 07:57:25 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Feb  2 07:57:31 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <47A3A1E5.7010009@dbtopas.lt>
References: <47A3A1E5.7010009@dbtopas.lt>
Message-ID: <20080202125724.GB5637@localhost.localdomain>

On Sat, 02 Feb 2008, Mindaugas Kavaliauskas wrote:
> Hi,
> I expect pointer not to be collected, because it "lives" in variable h. 
> What's wrong with my code?

The reference counter. Multiple putting the same pointer in
GC pointer item is not safe. If you think that it should be
safe then I can add such functionality but in such case IMHO
I should also update hb_itemPutCPtr() to be safe for multiple
putting the same string pointer. Now your code make sth like:

    HB_FUNC( MYFUNC )
    {
        char * str = hb_parc( 1 );
        if( ! str )
           str = ( char * ) hb_xgrab( 4 );
        hb_retc_buffer( str );
    }

It's not safe for the same reason as your example which operates on
pointer items. If it's important then I can make both safe.
But you can also change your code:


    HB_FUNC( MYFUNC )
    {
        PHB_ITEM pItem = NULL;
        void*  ptr = hb_parptrGC( hb_fctx_destructor, 1 );

        if( ! ptr )
        {
           ptr = hb_gcAlloc( 4, hb_fctx_destructor );
           pItem = hb_itemPutPtrGC( NULL, ptr );
           /* now ptr is safe and you do not have to worry that
            * it can be removed by some code inside <other code>
            * which may activate GC
            */
        }

        /* <other code> */

        if( pItem )
           hb_itemReturnRelease( pItem );
        else
           hb_itemReturn( hb_param( 1, HB_IT_ANY ) );
    }

and it will work as you want. If you need the exact technical
answer what was wrong in your code then this is hacked version
of your code to work properly. Please never try to make sth like
that because it may not work in future HVM versions.

    HB_FUNC( MYFUNC )
    {
        void*  ptr = hb_parptrGC( hb_fctx_destructor, 1 );

        if( ! ptr )
           ptr = hb_gcAlloc( 4, hb_fctx_destructor );
        else
           hb_gcRefInc( ptr );

        hb_retptrGC( ptr );
    }

best regards,
Przemek
From mpaliwoda at interia.pl  Sat Feb  2 08:01:02 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sat Feb  2 08:01:09 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <C5568775-6532-47F8-A030-F79502B7A591@syenar.hu>
References: <47A3A1E5.7010009@dbtopas.lt> <47A44A34.2030207@interia.pl>
	<C5568775-6532-47F8-A030-F79502B7A591@syenar.hu>
Message-ID: <47A4698E.5000902@interia.pl>

Hi Viktor,

> Similarly to hb_parptr() it stores pointer, 

No, it retrieves pointer, not stores it.

 > but unlike hb_parptr() you can attach a callback function

No, you do not attach a callback function in hb_parptrGC.
Attachement is done inside hb_gcAlloc(). See the sources.

> to the variable, which will get control when the
> Harbour level variable will be released, and last
> but not least the memory associated with the pointer
> (allocated using hb_gcAlloc()) will be freed automatically.
[...]

Victor, you do not need to explain me how "finalizers"
work, because I am an author of an original idea, and
I have introduced them in xhrabour firstly.
In fact I have developed them for harbour just after
Ryszard introduced his excelent "mark-sweep" GC, but
at those times I had no chance to put it into harbour,
because I was not a harbour developer. Then Przemek has
ported them from xharbour to harbour, enhancing them
greatly :).

-- 

Marek

----------------------------------------------------------------------

Lezac w wannie skorzystala z ...
Kliknij >>> http://link.interia.pl/f1ce9 

From druzus at acn.waw.pl  Sat Feb  2 08:11:17 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Feb  2 08:11:39 2008
Subject: [Harbour] rdddbt lib question
In-Reply-To: <CEA2B5EA-65AB-4F46-A3C4-EDF1A7BC7491@syenar.hu>
References: <CEA2B5EA-65AB-4F46-A3C4-EDF1A7BC7491@syenar.hu>
Message-ID: <20080202131117.GC5637@localhost.localdomain>

On Thu, 31 Jan 2008, Szak?ts Viktor wrote:
> Hi Przemek and all,
> I've noticed this RDD doesn't get built
> either using the GNU and non-GNU make system.

It's not used old DBT only code. I created new memo code
(DBFFPT) and it supports different memo types:
DBT, SMT, FPT VFP, FPT FLEX (without compression), FPT SIX3,
FPT CLIP so maybe it should be reanmed to sth more general:
MEMO in the named instead of FPT.


> Yet the source directory is there in SVN.
> Should we add it to the make systems, or should

You cannot - duplicated function name DBFDBT which also
exist in  DBFFPT RDD.

> we rather remove the source? or else?

if you want. I left it only as code example but it's
fully functional.

best regards,
Przemek
From mpaliwoda at interia.pl  Sat Feb  2 09:03:57 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sat Feb  2 09:04:03 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <47A4698E.5000902@interia.pl>
References: <47A3A1E5.7010009@dbtopas.lt>
	<47A44A34.2030207@interia.pl>	<C5568775-6532-47F8-A030-F79502B7A591@syenar.hu>
	<47A4698E.5000902@interia.pl>
Message-ID: <47A4784D.2060302@interia.pl>

Marek Paliwoda pisze:
> because I am an author of an original idea, and

In fact, the original author of this idea was *Ryszard*
(sorry Ryszard, I forgot this), but he only used it internally,
inside GC. What I did was exposing this idea to public, by
introducing "finalizers" for HB_IT_POINTER also :).

-- 

Marek


Pogoda na najblizsze dni.
Sprawdz >>> http://link.interia.pl/f1ce1

From harbour.01 at syenar.hu  Sat Feb  2 09:17:18 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Feb  2 09:17:03 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <47A4698E.5000902@interia.pl>
References: <47A3A1E5.7010009@dbtopas.lt> <47A44A34.2030207@interia.pl>
	<C5568775-6532-47F8-A030-F79502B7A591@syenar.hu>
	<47A4698E.5000902@interia.pl>
Message-ID: <4C229892-4FC8-4248-B905-93BCEC781598@syenar.hu>


On 2008.02.02., at 14:01, Marek Paliwoda wrote:

> Hi Viktor,
>
>> Similarly to hb_parptr() it stores pointer,
>
> No, it retrieves pointer, not stores it.
>
> > but unlike hb_parptr() you can attach a callback function
>
> No, you do not attach a callback function in hb_parptrGC.
> Attachement is done inside hb_gcAlloc(). See the sources.
>
>> to the variable, which will get control when the
>> Harbour level variable will be released, and last
>> but not least the memory associated with the pointer
>> (allocated using hb_gcAlloc()) will be freed automatically.
> [...]
>
> Victor, you do not need to explain me how "finalizers"
> work, because I am an author of an original idea, and
> I have introduced them in xhrabour firstly.
> In fact I have developed them for harbour just after
> Ryszard introduced his excelent "mark-sweep" GC, but
> at those times I had no chance to put it into harbour,
> because I was not a harbour developer. Then Przemek has
> ported them from xharbour to harbour, enhancing them
> greatly :).

Sorry I misunderstood your question that's all :)

And yeah I know that hb_parptr() is to retrieve
values (I was describing the GC concept), since I took
part implementing some of these in the beginning,
and I can differenciate void from int quite professionally ;)

Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Feb  2 09:21:51 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Feb  2 09:21:36 2008
Subject: [Harbour] rdddbt lib question
In-Reply-To: <20080202131117.GC5637@localhost.localdomain>
References: <CEA2B5EA-65AB-4F46-A3C4-EDF1A7BC7491@syenar.hu>
	<20080202131117.GC5637@localhost.localdomain>
Message-ID: <767B51BB-624F-418B-B24D-4633BC74F6CF@syenar.hu>

Hi Przemek,

On 2008.02.02., at 14:11, Przemyslaw Czerpak wrote:

> On Thu, 31 Jan 2008, Szak?ts Viktor wrote:
>> Hi Przemek and all,
>> I've noticed this RDD doesn't get built
>> either using the GNU and non-GNU make system.
>
> It's not used old DBT only code. I created new memo code
> (DBFFPT) and it supports different memo types:
> DBT, SMT, FPT VFP, FPT FLEX (without compression), FPT SIX3,
> FPT CLIP so maybe it should be reanmed to sth more general:
> MEMO in the named instead of FPT.

Thanks.

>> Yet the source directory is there in SVN.
>> Should we add it to the make systems, or should
>
> You cannot - duplicated function name DBFDBT which also
> exist in  DBFFPT RDD.

I see.

>> we rather remove the source? or else?
>
> if you want. I left it only as code example but it's
> fully functional.

I think it would be better to move it away
to /contrib/examples/rdddbt if now unused in core.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Feb  2 09:23:03 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Feb  2 09:22:59 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <47A4784D.2060302@interia.pl>
References: <47A3A1E5.7010009@dbtopas.lt>
	<47A44A34.2030207@interia.pl>	<C5568775-6532-47F8-A030-F79502B7A591@syenar.hu>
	<47A4698E.5000902@interia.pl> <47A4784D.2060302@interia.pl>
Message-ID: <9037F2DF-3320-422C-9FAA-ADABA3810340@syenar.hu>


On 2008.02.02., at 15:03, Marek Paliwoda wrote:

> Marek Paliwoda pisze:
>> because I am an author of an original idea, and
>
> In fact, the original author of this idea was *Ryszard*
> (sorry Ryszard, I forgot this), but he only used it internally,
> inside GC. What I did was exposing this idea to public, by
> introducing "finalizers" for HB_IT_POINTER also :).

Nice work from the Polish Harbour division! :)

Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Feb  2 09:26:32 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Feb  2 09:27:33 2008
Subject: [Harbour] CHANGELOG: 2008-02-02 15:27 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c865a7$Blat.v2.6.2$9be36918$ff01c678a3a@127.0.0.1>

2008-02-02 15:27 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   + contrib/examples/dbfdbt
   + contrib/examples/dbfdbt/dbfdbt1.c
   + contrib/examples/dbfdbt/Makefile
   - source/rdd/dbfdbt
     * Moved no longer used (superceded) core RDD code to 
       /contrib/examples/
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Feb  2 09:28:14 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Feb  2 09:29:15 2008
Subject: [Harbour] CHANGELOG: 2008-02-02 15:29 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c865a7$Blat.v2.6.2$d841b3ec$17904551f1fc@127.0.0.1>

2008-02-02 15:29 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   + contrib/examples/rdddbt
   - contrib/examples/dbfdbt
     * Renamed after move.
--
Brgds,
Viktor

From dbtopas at dbtopas.lt  Sat Feb  2 09:46:13 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sat Feb  2 09:48:13 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <20080202125724.GB5637@localhost.localdomain>
References: <47A3A1E5.7010009@dbtopas.lt>
	<20080202125724.GB5637@localhost.localdomain>
Message-ID: <47A48235.7020505@dbtopas.lt>

Hi,


thanks for replay.

>> I expect pointer not to be collected, because it "lives" in variable h. 
>> What's wrong with my code?
> 
> The reference counter. 
>...
> If you need the exact technical
> answer what was wrong in your code then this is hacked version
> of your code to work properly. Please never try to make sth like
> that because it may not work in future HVM versions.
> 
>     HB_FUNC( MYFUNC )
>     {
>         void*  ptr = hb_parptrGC( hb_fctx_destructor, 1 );
> 
>         if( ! ptr )
>            ptr = hb_gcAlloc( 4, hb_fctx_destructor );
>         else
>            hb_gcRefInc( ptr );
> 
>         hb_retptrGC( ptr );
>     }

That's ***EXACTLY*** the same code I found in 15min after I'd written a 
reduced sample of my problem. But it's hacky, that's why I've wrote a 
letter to mailing list.

The goal was to write function like:
   FUNC MyFunc( param )
      IF param == NIL;  param := {some array}
      ENDIF
   RETURN param
so the code using hb_parptrGC()/hb_retptrGC() was "natural".


> Now your code make sth like:
>     HB_FUNC( MYFUNC )
>     {
>         char * str = hb_parc( 1 );
>         if( ! str )
>            str = ( char * ) hb_xgrab( 4 );
>         hb_retc_buffer( str );
>     }

Thanks for comparison. It will help me to remember the idea.


> Multiple putting the same pointer in
> GC pointer item is not safe. If you think that it should be
> safe then I can add such functionality but in such case IMHO
> I should also update hb_itemPutCPtr() to be safe for multiple
> putting the same string pointer.

Perhaps it's a big change, and it seems we manage OK with string 
pointers (well, in most times...). So, we just need to get used to 
pointers also.
But maybe it's related to your pending changes of string pointers and 
you have a feeling it should be changed to be safe. Then, please, do the 
change.


> But you can also change your code:
> ...
>     HB_FUNC( MYFUNC )
>     {
>         PHB_ITEM pItem = NULL;
>         void*  ptr = hb_parptrGC( hb_fctx_destructor, 1 );
> 
>         if( ! ptr )
>         {
>            ptr = hb_gcAlloc( 4, hb_fctx_destructor );
>            pItem = hb_itemPutPtrGC( NULL, ptr );
>            /* now ptr is safe and you do not have to worry that
>             * it can be removed by some code inside <other code>
>             * which may activate GC
>             */
>         }
> 
>         /* <other code> */
> 
>         if( pItem )
>            hb_itemReturnRelease( pItem );
>         else
>            hb_itemReturn( hb_param( 1, HB_IT_ANY ) );
>     }

This code is OK for me, thanks. I'm also surprised, that You've answer 
one more question, I haven't asked for!!! The question was: after 
hb_gcAlloc() no item is pointing to pointer, could it be freed by GC?


Best regards,
Mindaugas

From cvc at oohg.org  Sat Feb  2 10:02:37 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Sat Feb  2 10:02:45 2008
Subject: [Harbour] problem testing samples gtwvg
In-Reply-To: <47A43745.3060703@oohg.org>
References: <47A21E27.7020503@oohg.org>	<0E36F3DB-1EC7-457C-87E3-5BD8BD3AD8CE@syenar.hu>	<47A376CF.8000802@oohg.org>	<0A4669B6-9D86-4494-A3ED-9D7A8810B8E9@syenar.hu>	<47A3D769.5030003@oohg.org>	<4FF09A42-D273-4F8A-B925-282009A1C381@syenar.hu>
	<47A43745.3060703@oohg.org>
Message-ID: <47A4860D.4060601@oohg.org>

Ciro Vargas Clemow escribi?:


Finally the sample works ok.

Is a very good work Pritpal, excellent.

I need a little help again.

when I click the option menu "dialog one"

I obtain this error.

Error BASE/1132 Bound error:array access

called from CFGMYBROWSE(989)
called from MYDIALOGONE(1544)
......

may you help me?

regards
Ciro


-- 
http://sistemascvc.tripod.com  (la casa del no2imp / the no2imp home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From alex at belacy.belgorod.su  Sat Feb  2 10:24:36 2008
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Sat Feb  2 10:24:27 2008
Subject: [Harbour] Version numbers suggestion
Message-ID: <4529311077.20080202182436@belacy.belgorod.su>

 Hi All,

 it become more and more difficult for 3-rd party products developers
 to fight with differences between Harbour and xHarbour and between
 versions of the same compiler.

 Just a couple of examples.
 
 1) At() - hb_At() issue in Harbour. As a result now we have At() in
 xHarbour and in official Harbour distribution, which accept 4
 parameters, At() in new Harbour code, which accepts only 2 and
 hb_At() in new Harbour, accepting 4 parameters, which is absent in
 xHarbour and in older Harbour.
 The only decision I've found to get a code, working with ALL
 versions, is to duplicate hb_At() with a new name in my code ( HwGUI,
 Leto db server ).

 2) Recently the base workarea structure was changed in xHarbour. You
 know that every RDD have it's own workarea structure with first
 fields from a basic and some other, specific for this RDD, after the
 basic, and this structure is kept in a new header file.
 Now, if I want to keep the Leto RDD working for both Harbour and
 xHarbour, it's latest and previous versions, I need to provide two
 header files and leave a note for users of latest xharbour to rename
 xrddleto.h to rddleto.h before compiling the RDD.

 I understand and agree that such kind of changes is unavoidable and
 suggest the following:

 1) Introduce a [x]Harbour internal version number, at least, at C
 level for to be possible to use constructions like
 
 #if HARBOUR_VERSION >= 188

 and increment this number after every change, which may require
 changes in 3-rd party code ( not 3-rd party only, end applications,
 too ).

 2) Try to do such changes together with other changes of this type
 for to have too much version numbers.

 3) Create a special log in [x]Harbour repository for such changes -
 for people could know what they need to correct and don't spend hours
 looking the root of a problem.

 4) It would be nice to introduce such version number and appropriate
 pp possibilities on Harbour level, too.

 I ask xHarbour developers, who read this list, to discuss the
 possibility to introduce such a C level version number - for now, at
 least, in hbapirdd.h, something like #define WORKAREA_VERSION NNN, to
 be possible for 3-rd party RDD creators to write in new RDD structure
 definition:

 #ifdef __XHARBOUR__
 #if WORKAREA_VERSION >= NNN
    USHORT uiFieldHidden;         /* Total number of fields hidden */
 #endif
 #endif

 It's not my only problem, the same is for other RDD's - Mediator, for
 example.
 

Regards,
 Alexander

From harbour.01 at syenar.hu  Sat Feb  2 14:53:56 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Feb  2 14:53:51 2008
Subject: [Harbour] Version numbers suggestion
In-Reply-To: <4529311077.20080202182436@belacy.belgorod.su>
References: <4529311077.20080202182436@belacy.belgorod.su>
Message-ID: <C385495B-D9F3-4293-8E65-4DE1CABCDB8D@syenar.hu>

Hi Alexander,

> 1) At() - hb_At() issue in Harbour. As a result now we have At() in
> xHarbour and in official Harbour distribution, which accept 4
> parameters, At() in new Harbour code, which accepts only 2 and
> hb_At() in new Harbour, accepting 4 parameters, which is absent in
> xHarbour and in older Harbour.
> The only decision I've found to get a code, working with ALL
> versions, is to duplicate hb_At() with a new name in my code ( HwGUI,
> Leto db server ).

That's exactly the idea. The other option is to use
classic (extension-less) code which works the same in both
Harbour and xhb (and even CA-Cl*pper, and most probably other
dialects too). The goal here is to be quite strictly C5.x
compatible, so that is always an option, and probably the
least common denominator for all dialects.

> 2) Recently the base workarea structure was changed in xHarbour. You
> know that every RDD have it's own workarea structure with first
> fields from a basic and some other, specific for this RDD, after the
> basic, and this structure is kept in a new header file.
> Now, if I want to keep the Leto RDD working for both Harbour and
> xHarbour, it's latest and previous versions, I need to provide two
> header files and leave a note for users of latest xharbour to rename
> xrddleto.h to rddleto.h before compiling the RDD.

Wouldn't this work ?:
#ifdef __XHARBOUR__
    #include "xrddleto.h"
#else
    #include "rddleto.h"
#endif

> I understand and agree that such kind of changes is unavoidable and
> suggest the following:
>
> 1) Introduce a [x]Harbour internal version number, at least, at C
> level for to be possible to use constructions like
>
> #if HARBOUR_VERSION >= 188
>
> and increment this number after every change, which may require
> changes in 3-rd party code ( not 3-rd party only, end applications,
> too ).

I think we already have that on Harbour level, where
__HARBOUR__ will return you a number. We could consider
using the SVN repository revision number instead of the
current value, so that it's automatically incremented after
each commit. This would require no coordination or attention
from our part, and could be usable for such a purpose.

On the C level we need to implement this though.

> 2) Try to do such changes together with other changes of this type
> for to have too much version numbers.

Yes. (also see SVN rev no as a number)

> 3) Create a special log in [x]Harbour repository for such changes -
> for people could know what they need to correct and don't spend hours
> looking the root of a problem.

I used to mark these in my projects with an "@@" before the
log entry signaling an "incompatible" change, requiring some
3rd party action, like:

    * source/rtl/file.c
    @@* Change the way blah() works. INCOMPATIBLE, reasons,
        description, action to be done.

Anything like this, or simply adding "INCOMPATIBILITY" to
the changelog entry can be a solution (but this one is
easier to mistype and not found by simple search/grep).

> 4) It would be nice to introduce such version number and appropriate
> pp possibilities on Harbour level, too.

We have it:
? __HARBOUR__

> I ask xHarbour developers, who read this list, to discuss the
> possibility to introduce such a C level version number - for now, at
> least, in hbapirdd.h, something like #define WORKAREA_VERSION NNN, to
> be possible for 3-rd party RDD creators to write in new RDD structure
> definition:
>
> #ifdef __XHARBOUR__
> #if WORKAREA_VERSION >= NNN
>    USHORT uiFieldHidden;         /* Total number of fields hidden */
> #endif
> #endif
>
> It's not my only problem, the same is for other RDD's - Mediator, for
> example.

Yes it's definitely something to be constantly dealt with in every
Clipper implementations.

Brgds,
Viktor

From bedipritpal at hotmail.com  Sat Feb  2 15:34:51 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Feb  2 15:35:53 2008
Subject: [Harbour] problem testing samples gtwvg
In-Reply-To: <47A4860D.4060601@oohg.org>
References: <47A21E27.7020503@oohg.org>
	<0E36F3DB-1EC7-457C-87E3-5BD8BD3AD8CE@syenar.hu>
	<47A376CF.8000802@oohg.org>
	<0A4669B6-9D86-4494-A3ED-9D7A8810B8E9@syenar.hu>
	<47A3D769.5030003@oohg.org>
	<4FF09A42-D273-4F8A-B925-282009A1C381@syenar.hu>
	<47A43745.3060703@oohg.org> <47A4860D.4060601@oohg.org>
Message-ID: <15246919.post@talk.nabble.com>


Hello


Ciro Vargas Clemow wrote:
> 
> Finally the sample works ok.
> 
> Is a very good work Pritpal, excellent.
> 
> I need a little help again.
> 
> when I click the option menu "dialog one"
> 
> I obtain this error.
> 
> Error BASE/1132 Bound error:array access
> 
> called from CFGMYBROWSE(989)
> called from MYDIALOGONE(1544)
> ......
> 

Sure. Under GTWVG, Tbrowse is expecting an instaance variable
oTbrowse:aColSeperator which is not defined in Harbour TBrowse. At presen to
get it worked properly, you need to include xHarbour TBrowse.prg and
TBcolumn.prg. It is only needed for TBrowse GUI functionality. OR modify the
demo source where you create another class inheriting from Tbrowse and add a
var aColSep INIT {}.

I have sent a message with modified Tbrowse and TBcolumn.prg sometime back
on this list. You need to search the archives.


Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/problem-testing-samples-gtwvg-tp15213872p15246919.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Sat Feb  2 15:39:56 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Feb  2 15:40:51 2008
Subject: [Harbour] Re:  Licence question
In-Reply-To: <4799829A.2010302@belacy.belgorod.su>
References: <4796E51F.7080702@belacy.belgorod.su>
	<200801230202.56328.philb@philb.us>
	<4796ECB6.4080205@belacy.belgorod.su>
	<20080123100206.GD5164@localhost.localdomain>
	<47972C45.10703@belacy.belgorod.su>
	<20080123135853.GA7497@localhost.localdomain>
	<4798697F.2050800@belacy.belgorod.su>
	<20080124141442.GA7794@localhost.localdomain>
	<4799829A.2010302@belacy.belgorod.su>
Message-ID: <20080202203956.GA4893@localhost.localdomain>

On Fri, 25 Jan 2008, Alexander S.Kresin wrote:
> >>  The C level socket API is used in client part, because the RDD is
> >>written on C. I don't see serious problem here, too, because I'm sure 
> >>that in the case of necessity appropriate separated parts can be easily 
> >>adopted.
> PC> So how it will work with compressed socket when we add native
> PC> support for stream compression?
>  Just borrowing appropriate piece of code. I hope that such important
>  additions won't come every month :).

Do you plan to make such updates each time when sth inside hbinet.c
will be changed and test it for all supported by Harbour platforms?

> PC> And what if Harbour socket will not have usable OS handle at all
> PC> on some platforms? What if it will be necessary to hide some
> PC> OS dependent differences? F.e. select() works a little bit different
> PC> in MS-Windows then in *nixes. Even between *nixes there are some
> PC> important differences in this function. Do you know these differences?
>  No. But I tested my code under both XP and Linux and didn't find any
>  difference. Maybe, I didn't dig deeply enough, though.

f.e. detecting broken connection or time updating in timeval parameter.
I do not know if your code needs it but for sure current hbinet.c code
should be updated.

> PC> If it will be portable then we will add it to hbinet.c.
> PC> There is absolutely no reason to make hb_inetSocketFinalize
> PC> public until we want to keep sockets internals 3-rd party
> PC> code independent and easy expandable.
>  So, you confirm that hbinet.c can't be extended by 3-rd party 
> libraries and if someone need any changes or additions, he have to 
> modify the hbinet.c. And what if this changes aren't fully portable or 
> suitable for general use, but satisfy his specific needs ? Isn't this a 
> limitation, too ?

Absolutely not. It's very important feature not limitation.
3-rd party code cannot change HB_SOCKET internals because it's not
accessible for it so we do not have to worry that wrongly written
code will break sth in our internals.
But of course if you plan to make sth with low level OS socket
what is not supported by us then you can. You only need one
function:
   FHANDLE hb_inetGetOsHandle( PHB_ITEM pSocket )
and do what you want with the returned handle with hacking internal
Harbour structures so you are not limited at all.

> PC> The answer is very simple. .prg code should protect against low level
> PC> errors like GPF. hb_parptrGC() validate if given pointer is a pointer
> PC> to valid socket structure. hb_parptr() will also work but it will accept
> PC> all possible pointer items not only these one which point to socket
> PC> structure. Look at HWGUI. There is no validation at all so user can pass
> PC> wrong pointers or handles to functions which will accept them and later
> PC> GPF. Such code is unsafe. We should always try to write code as safe
> PC> as possible.
>  You are right. Harbour's rtl is written for general use and this code 
> may be used in any kinds of applications, including those, where this 
> kind of safety is important - I mean, first of all, pieces of code, 
> which are intended for executing by some server.
>  In case of common desktop applications it is, IMO, isn't important. 
> Imagine, that programmer made a mistake and pass some bad word :) 
> instead of a handle to a function. Only his desktop application will 
> crash and after some time of hunting he will find that mistake. And, 
> probably, in case of GPF it will be more easy to identify the mistake 
> than if the GPF doesn't occur and he get some 'strange' application 
> behavior. That's why, for example, I don't worry about such things in 
> HwGUI - as any other GUI library, it is intended for desktop applications.
>  In the case of rdd for the db server it isn't an issue at all, because 
> the socket handle is hidden in workarea structure.

The GPF is optimistic situation. In the worst case you can even lost
important data. I remember an example when double call to fclose()
caused that printer output was redirected to open DBF file. The code
was working for years with Clipper and the bug was never exploited
in such way but the problem begins to seldom happen after recompiling
with xHarbour.

> PC> As I said it's not necessary at all and so far you haven't answer
> PC> why you need it. Again, please tell me which additional functionality
> PC> is necessary for you and I'll add them to hbinet.c.
> Ok. Below are the functions I've added:
[...]
>  I know that this code isn't proper for general use, because it uses 
> one static rd_fds and, so this set of functions can't be used for 
> selecting concurrently from two sets of sockets. But it fully satisfies 
> my needs - at least now.

I'll add general wrapper to select() function - it should be enough.

> Other small change is that I've added 3'rd value of iMode to read and 
> send functions - to avoid the call of hb_selectReadSocket(), because I 
> check the socket before calling send() and receive() every time and 
> don't need an additional checking.

The new API will respect it in the same or other way - I'll decide
when I'll collect all functions.

best regards,
Przemek
From harbour at rglab.pl  Sat Feb  2 17:42:18 2008
From: harbour at rglab.pl (=?iso-8859-2?Q?Ryszard_G=B3=B1b?=)
Date: Sat Feb  2 17:42:17 2008
Subject: [Harbour] Changelog 2008-02-02 23:40 UTC+0100 Ryszard Glab
Message-ID: <9b1287ead804641600c44d79fcf6f6bf.qmail@home.pl>

2008-02-02 23:40 UTC+0100 Ryszard Glab (harbour//rglab.pl)
  * config/os2/global.cf
      * restored double backslash in deletion command

Regards, Ryszard

From harbour at rglab.pl  Sat Feb  2 18:08:05 2008
From: harbour at rglab.pl (=?iso-8859-2?Q?Ryszard_G=B3=B1b?=)
Date: Sat Feb  2 18:08:03 2008
Subject: [Harbour] Re: Fix it quickly
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
	<47A41B29.2060006@mail.udg.mx>
Message-ID: <2e9ff5255d55c778868dbc6a5606f32b.qmail@home.pl>

David Arturo Macias Corona <dmacias@mail.udg.mx> napisa?(a):

> Using
>     make_gnu.cmd clean
> result in messages like these:
> ---------------------------------------
> SYS0002: The system cannot find the file specified.
> Error occurred while processing: os2\gcc*.*.

  I have restored double backslash in 'clean' target of makefile
in my last commit so the command will be back
"del /n os2\gcc\\*.*"
  I have no OS/2 installed to test it then I don't understand why it is
nedded to have two backslashes and why the single backslash is eaten
in gcc\*.* but it is left in os2\gcc part of the command - it seems
that the backslash is some sort of 'escape' character for CMD.

> Messages belong to this part of make_gnu.log:
> ---------------------------------------
> [E:\harbour802\source]make -C common clean
> make[2]: Entering directory `/harbour802/source/common'
> CMD.EXE /c IF EXIST os2\gcc     del /n os2\gcc\*.*
> CMD.EXE /c IF EXIST os2\gcc     rmdir os2\gcc
> CMD.EXE /c IF EXIST os2  rmdir os2
> CMD.EXE /c IF EXIST ..\..\lib\os2\gcc\hbcommon.a del /n
> ..\..\lib\os2\gcc\hbcommon.a
> make[2]: Leaving directory `/harbour802/source/common'
> ---------------------------------------

  IMHO, the above verifies that the CMD.EXE is using \* in a special
way and it removes \ during execution - probably CMD is using some
other expansion and for example "\." is also processed into "." that
will explain why "md ..\..\lib\os2" is failing - but it is only
my hypothesis.

> "md ..\..\lib\os2" and rest work fine from command line, located in
> proper directory, but seem it does not work under make process
>
> Reviewing this line:
>    CMD.EXE /c IF NOT EXIST ..\..\lib\os2   md ..\..\lib\os2
> perhaps current directory for CMD.EXE instance is not that reported by
> make process (make[2]: Entering directory `/harbour802/source/common'),
> instead it seem to be directory where make process started (
> e:\harbour802 )

  IMHO, it is not true because you definitely have "source/common/os2/gcc"
directory (see bellow your log) which means that

    CMD.EXE /c IF NOT EXIST os2   md os2
is run in the same directory as
    CMD.EXE /c IF NOT EXIST ..\..\lib\os2   md ..\..\lib\os2

> [E:\harbour802\source]make -C common first
> make[2]: Entering directory `/harbour802/source/common'
> CMD.EXE /c IF NOT EXIST os2 md os2
> CMD.EXE /c IF NOT EXIST os2\gcc    md os2\gcc
> CMD.EXE /c IF NOT EXIST ..\..\lib\os2   md ..\..\lib\os2
> CMD.EXE /c IF NOT EXIST ..\..\lib\os2\gcc    md ..\..\lib\os2\gcc
> make[3]: Entering directory `/harbour802/source/common/os2/gcc'
> gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
> -c ../../hbfhnd.c -ohbfhnd.o

Regards, Ryszard

From cvc at oohg.org  Sat Feb  2 19:02:41 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Sat Feb  2 19:02:43 2008
Subject: [Harbour] problem testing samples gtwvg
In-Reply-To: <15246919.post@talk.nabble.com>
References: <47A21E27.7020503@oohg.org>	<0E36F3DB-1EC7-457C-87E3-5BD8BD3AD8CE@syenar.hu>	<47A376CF.8000802@oohg.org>	<0A4669B6-9D86-4494-A3ED-9D7A8810B8E9@syenar.hu>	<47A3D769.5030003@oohg.org>	<4FF09A42-D273-4F8A-B925-282009A1C381@syenar.hu>	<47A43745.3060703@oohg.org>
	<47A4860D.4060601@oohg.org> <15246919.post@talk.nabble.com>
Message-ID: <47A504A1.4050005@oohg.org>

Pritpal Bedi escribi?:
> Hello
> 
> 
> Ciro Vargas Clemow wrote:
>> Finally the sample works ok.
>>
>> Is a very good work Pritpal, excellent.


Hi Pritpal:

I don't found this files, may you sendme tbrowse and tbcolumn fix to my private 
email.?

I'm very interesting in your contribution.

best regards
Ciro


-- 
http://sistemascvc.tripod.com  (la casa del no2imp / the no2imp home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From dbtopas at dbtopas.lt  Sat Feb  2 20:04:11 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sat Feb  2 20:06:12 2008
Subject: [Harbour] Asynchronous procedures
Message-ID: <47A5130B.8040704@dbtopas.lt>

Hi,


I want to consult on some fundamental thing of programming. This is a 
topic of asynchronous vs. synchronous programing. Let's say I have a 
code like this:

PROC server_proc(oConn)
LOCAL lOK := .F.
   oConn:Send( server_version )
   aData := oConn:Receive()
   IF CheckPasword( aData )
     oConn:Send( password_ok )
     lOK := .T.
   ELSE
     /* we allow password retry once */
     oConn:Send( password_error )
     aData := oConn:Receive()
     IF CheckPasword( aData )
       oConn:Send( password_ok )
       lOK := .T.
     ELSE
       oConn:Send( password_error )
     ENDIF
   ENDIF
   IF lOK
     aData := oConn:Receive()
     DO WHILE ! EMPTY( aData )
       aResult := process_data( aData )
       oConn:Send( aResult )
     ENDDO
   ENDIF
   oConn:Send( good_bye )
RETURN

It looks readable and I can easy extend or fix the code. But the problem 
is, that my oConn:Receive() does not return until new packet arrives, 
and I want to service many connections in SINGLE THREAD server. I 
rewrite my code in "asynchronous" way. Point of execution is saved in 
state variable (passed by reference to procedure). My server function 
exits before receiving a packet, and server_proc() is called from some 
global packet processing loop after packet arrives.

PROC server_proc( oConn, nState )
LOCAL lExit := .F.

   DO WHILE ! lExit

    IF nState == 0
       oConn:Send( server_version )
       nState := 1
       lExit := .T.

     ELSEIF nState == 1
       aData := oConn:Receive()
       IF CheckPassword( aData )
          oConn:Send( password_ok )
          nState := 3
       ELSE
          oConn:Send( password_error )
          nState := 2
       ENDIF
       lExit := .T.

     ELSEIF nState == 2
       aData := oConn:Receive()
       IF CheckPassword( aData )
          oConn:Send( password_ok )
          nState := 3
          lExit := .T.
       ELSE
          oConn:Send( password_error )
          nState := 4
       ENDIF

     ELSEIF nState == 3
       aData := oConn:Receive()
       IF ! EMPTY( aData )
         aResult := process_request( aData )
         oConn:Send( aResult )
         lExit := .T.
       ELSE
         nState := 4
       ENDIF

     ELSEIF nState == 4
       oConn:Send( good_bye )
       lExit := .T.
       nState := 999 /* end of communication */

     ENDIF
   ENDDO
RETURN

It's OK if my communication protocol has lets say 10 or something 
states, but after my protocol becomes complicated and I have 50 states, 
my server_proc() code is completely unreadable function. It's getting 
almost impossible to fix or extend.

Is there any way a single thread code to be a readable (not write-only 
code)?


Best regards,
Mindaugas




From bedipritpal at hotmail.com  Sat Feb  2 20:47:51 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Feb  2 20:47:54 2008
Subject: [Harbour] problem testing samples gtwvg
In-Reply-To: <47A504A1.4050005@oohg.org>
References: <47A21E27.7020503@oohg.org>
	<0E36F3DB-1EC7-457C-87E3-5BD8BD3AD8CE@syenar.hu>
	<47A376CF.8000802@oohg.org>
	<0A4669B6-9D86-4494-A3ED-9D7A8810B8E9@syenar.hu>
	<47A3D769.5030003@oohg.org>
	<4FF09A42-D273-4F8A-B925-282009A1C381@syenar.hu>
	<47A43745.3060703@oohg.org> <47A4860D.4060601@oohg.org>
	<15246919.post@talk.nabble.com> <47A504A1.4050005@oohg.org>
Message-ID: <15249692.post@talk.nabble.com>


Hi

> I don't found this files, may you sendme tbrowse and tbcolumn fix to my
> private email.?

Download from here:

http://www.nabble.com/file/p13965086/tbrowse.zip

Regards
Pritpal Bedi, INDIA-USA

-- 
View this message in context: http://www.nabble.com/problem-testing-samples-gtwvg-tp15213872p15249692.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Sat Feb  2 22:03:08 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Feb  2 22:03:10 2008
Subject: [Harbour] Asynchronous procedures
In-Reply-To: <47A5130B.8040704@dbtopas.lt>
References: <47A5130B.8040704@dbtopas.lt>
Message-ID: <15250095.post@talk.nabble.com>


Mindaugus


Mindaugas Kavaliauskas wrote:
> 
> I want to consult on some fundamental thing of programming. This is a 
> topic of asynchronous vs. synchronous programing. Let's say I have a 
> code like this:
> 
> PROC server_proc(oConn)
>    aData := oConn:Receive()
> RETURN
> 
> It looks readable and I can easy extend or fix the code. But the problem 
> is, that my oConn:Receive() does not return until new packet arrives, 
> and I want to service many connections in SINGLE THREAD server. I 
> rewrite my code in "asynchronous" way. Point of execution is saved in 
> state variable (passed by reference to procedure). My server function 
> exits before receiving a packet, and server_proc() is called from some 
> global packet processing loop after packet arrives.
> 
> PROC server_proc( oConn, nState )
> LOCAL lExit := .F.
> 
>    DO WHILE ! lExit
> 
>     IF nState == 0
>        oConn:Send( server_version )
>        nState := 1
>        lExit := .T.
> 
>      ELSEIF nState == 1
>        aData := oConn:Receive()
> 
>      ENDIF
>    ENDDO
> RETURN
> 
> It's OK if my communication protocol has lets say 10 or something 
> states, but after my protocol becomes complicated and I have 50 states, 
> my server_proc() code is completely unreadable function. It's getting 
> almost impossible to fix or extend.
> 
> Is there any way a single thread code to be a readable (not write-only
> code)?
> 

I struggled with the same phenomena when I was developing TERMINAL. Honestly
I can say it is not very satisfactory in a single-thread application. In
your shown code, even in 2nd version, oConn:Receive() is executed, only when
state == 1 or so, but is executed. And you said it does not return until
data is received. Eventually the same situation is created when state
becomes 1. It only reduces the probability of reaching to this code.

As I assume your development platform is Windows, have you tried WM_TIMER
and TIMEOUT with INET* functions. Fire another timer with every new
connection and process a static array containing elments per record, timer
id, oConn, nState, at least.

Just my thought, a vague one.

Regards
Pritpal Bedi, INDIA-USA
-- 
View this message in context: http://www.nabble.com/Asynchronous-procedures-tp15249451p15250095.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From lorenzo.fiorini at gmail.com  Sun Feb  3 04:22:49 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Feb  3 04:22:55 2008
Subject: [Harbour] Asynchronous procedures
In-Reply-To: <47A5130B.8040704@dbtopas.lt>
References: <47A5130B.8040704@dbtopas.lt>
Message-ID: <9257026e0802030122k4eb542e8xb92ab0ca77d7eba3@mail.gmail.com>

On Feb 3, 2008 2:04 AM, Mindaugas Kavaliauskas <dbtopas@dbtopas.lt> wrote:

> I want to consult on some fundamental thing of programming. This is a
> topic of asynchronous vs. synchronous programing. Let's say I have a
> code like this:
[...]
> Is there any way a single thread code to be a readable (not write-only
> code)?

Sorry I don't have a suggestion but I have faced a similar problem
when I've started to move my apps from text interface to the xml/html
one and the only viable solution I've found so far is to have multiple
instances of the apps. That is every user starts an "exe" which use a
port within a given range. This approach solves the "sequential"
processing issue but has the drawback of having many "undefined"
ports.

For now it works but my hope is that Harbour will soon have "real"
multitasking.
It's not the "magic solution" since moving from "single" to "multi"
takes many steps but it can really help in some cases.

best regards,
Lorenzo

best regards,
Lorenzo
From alex at belacy.belgorod.su  Sun Feb  3 04:39:54 2008
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Sun Feb  3 04:39:36 2008
Subject: [Harbour] Re: Version numbers suggestion
In-Reply-To: <C385495B-D9F3-4293-8E65-4DE1CABCDB8D@syenar.hu>
References: <4529311077.20080202182436@belacy.belgorod.su>
	<C385495B-D9F3-4293-8E65-4DE1CABCDB8D@syenar.hu>
Message-ID: <1756544350.20080203123954@belacy.belgorod.su>

On  Saturday, February 02, 2008, 22:53 Szak?ts Viktor <harbour.01@syenar.hu> wrote:

>> 2) Recently the base workarea structure was changed in xHarbour. You
>> know that every RDD have it's own workarea structure with first
>> fields from a basic and some other, specific for this RDD, after the
>> basic, and this structure is kept in a new header file.
>> Now, if I want to keep the Leto RDD working for both Harbour and
>> xHarbour, it's latest and previous versions, I need to provide two
>> header files and leave a note for users of latest xharbour to rename
>> xrddleto.h to rddleto.h before compiling the RDD.

SV> Wouldn't this work ?:
SV> #ifdef __XHARBOUR__
SV>     #include "xrddleto.h"
SV> #else
SV>     #include "rddleto.h"
SV> #endif

 Yes - for respecting the difference between Harbour and xHarbour
 workareas, but not - for the difference between xHarbour's official
 release and it CVS code.

SV> I think we already have that on Harbour level, where
SV> __HARBOUR__ will return you a number.

 I didn't know that. Thanks for a tip.
 

Regards,
 Alexander
http://kresin.belgorod.su

From druzus at acn.waw.pl  Sun Feb  3 06:53:55 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Feb  3 07:06:49 2008
Subject: [Harbour] Version numbers suggestion
In-Reply-To: <4529311077.20080202182436@belacy.belgorod.su>
References: <4529311077.20080202182436@belacy.belgorod.su>
Message-ID: <20080203115355.GA5351@localhost.localdomain>

On Sat, 02 Feb 2008, Alexander S.Kresin wrote:

Hi Alexander,

>  Hi All,
>  it become more and more difficult for 3-rd party products developers
>  to fight with differences between Harbour and xHarbour and between
>  versions of the same compiler.
>  Just a couple of examples.
,-----------------------------------------------------------------------
| >  1) At() - hb_At() issue in Harbour. As a result now we have At() in
| >  xHarbour and in official Harbour distribution, which accept 4
| >  parameters, At() in new Harbour code, which accepts only 2 and
| >  hb_At() in new Harbour, accepting 4 parameters, which is absent in
| >  xHarbour and in older Harbour.
| >  The only decision I've found to get a code, working with ALL
| >  versions, is to duplicate hb_At() with a new name in my code ( HwGUI,
| >  Leto db server ).
`-----------------------------------------------------------------------

I dedicate above to anyone who will want to extend standard function
parameters. In longer terms it has to be source of serious troubles.
And this is only half of problem because the code is only for Harbour
and xHarbour. Think what will happen if the code will have to work
with more compilers.
Now I suggest to use HB_AT() and add to your project HB_AT() function
for xHarbour build until xHarbour will not support it.

   #ifdef __XHARBOUR__
      HB_FUNC( HB_AT ) { HB_FUNC_EXEC( AT ); }
   #endif

When it will then you simply remove it.

,-----------------------------------------------------------------------
| >  2) Recently the base workarea structure was changed in xHarbour. You
| >  know that every RDD have it's own workarea structure with first
| >  fields from a basic and some other, specific for this RDD, after the
| >  basic, and this structure is kept in a new header file.
| >  Now, if I want to keep the Leto RDD working for both Harbour and
| >  xHarbour, it's latest and previous versions, I need to provide two
| >  header files and leave a note for users of latest xharbour to rename
| >  xrddleto.h to rddleto.h before compiling the RDD.
`-----------------------------------------------------------------------

And this I'd like to dedicate to you ;-)
Such problems happens when API depends too strictly on some memory
structures which are public.
Our RDD API is inherited from Clipper so we cannot change it too
much without introducing additional problems for 3-rd party RDD
developers who are porting their existing Clipper code to Harbour.
Now it's very easy job. But I do not want to repeat such problems
in other places and this is the answer why HB_SOCKET structure is
not public.

[...]

>  I ask xHarbour developers, who read this list, to discuss the
>  possibility to introduce such a C level version number - for now, at
>  least, in hbapirdd.h, something like #define WORKAREA_VERSION NNN, to
>  be possible for 3-rd party RDD creators to write in new RDD structure
>  definition:
>  #ifdef __XHARBOUR__
>  #if WORKAREA_VERSION >= NNN
>     USHORT uiFieldHidden;         /* Total number of fields hidden */
>  #endif
>  #endif
>  It's not my only problem, the same is for other RDD's - Mediator, for
>  example.

uiFieldHidden, bFlagCount, uNullFlagField in xHarbour main work area
structure are absolutely not necessary.
It's a side effect of some modification for VFP DBF extensions (NULL and
VARLENGTH fields) still not finished which should be only inside DBFRDD
not in main work area structure what causes that 3-rd party binary RDDs
stopped to be compatible.
We cannot allow to change main RDD structure from which each RDD inherits
for some local RDD extensions which are not usable at all for others.
And in this case they are also not functional yet - it's work in progress.
In summary it seems to be xHarbour only problem and you should ask xHarbour
developers about it.

best regards,
Przemek
From dbtopas at dbtopas.lt  Sun Feb  3 10:59:01 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sun Feb  3 11:00:59 2008
Subject: [Harbour] Asynchronous procedures
In-Reply-To: <15250095.post@talk.nabble.com>
References: <47A5130B.8040704@dbtopas.lt> <15250095.post@talk.nabble.com>
Message-ID: <47A5E4C5.7090509@dbtopas.lt>


Hi,


> In
> your shown code, even in 2nd version, oConn:Receive() is executed, only when
> state == 1 or so, but is executed. And you said it does not return until
> data is received. Eventually the same situation is created when state
> becomes 1.

I've also said, that "server_proc() is called from some global packet 
processing loop after packet arrives", so oConn:Receive() returns 
immediately in this case. Or you can pass a parameter containing 
received data to server_proc() if you want...


> As I assume your development platform is Windows, have you tried WM_TIMER
> and TIMEOUT with INET* functions.

WM_TIMER is not a solution, and this is not only Windows problem. You'll 
have the same situation in linux using select(). And we theoretically 
can not avoid protocol state storage. I just want to write my code in 
style I can easy understand and fix it later.
All this
   DO WHILE ! exit
      IF state == 1
         ...
      ELSEIF state == 2
         ...
      ...
      ENDIF
   ENDDO
is kind of writing code in assembler. I must cut my function code into 
peaces and do branching using jump instructions. No more for/next, no 
more dowhile/enddo, no more if/endif, just test condition and jump.

It's compilers job to process language structures such as loops and ifs 
to machine code. And the code could be written to be a single thread 
code. So, the question (a little bit philosophical) is, why compiler can 
not help to write this single thread code?


Best regards,
Mindaugas
From druzus at acn.waw.pl  Mon Feb  4 03:32:20 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Feb  4 03:32:26 2008
Subject: [Harbour] 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200802040832.m148WKBe006413@31-mo5-4.acn.waw.pl>

2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/harbour.spec
  * harbour/harbour-ce-spec
  * harbour/harbour-w32-spec
    * updated for new library names

  * harbour/ChangeLog
  * harbour/include/hbexprb.c
    * formatting

  * harbour/source/rtl/net.c
    ! fixed casting

  * harbour/harbour.spec
  * harbour/harbour-ce-spec
  * harbour/harbour-w32-spec
  * harbour/contrib/Makefile
    * removed hbzlib - it cannot be longer part of default build
      because Viktor removed zlib header files. Viktor sorry but
      IMHO you should revert it and also restore ace.h - it creates
      serious problems without any valuable addition. Now we will
      have to rebuild Harbour on many different platforms and often
      it will not be possible to install some libraries. We cannot
      force installing additional libs by people who will create
      binaries for incoming releases so it's important to revert
      it. Please do it.

  * harbour/config/bsd/install.cf
  * harbour/config/darwin/install.cf
  * harbour/config/hpux/install.cf
  * harbour/config/linux/install.cf
  * harbour/config/sunos/install.cf
  * harbour/config/dos/install.cf
  * harbour/config/os2/install.cf
  * harbour/config/w32/install.cf
    * redirected echo error messages to stderr when *sh shell is used

  * harbour/config/lib.cf
  * harbour/config/bin.cf
  * harbour/config/global.cf
  * harbour/config/hpux/gcc.cf
  * harbour/config/hpux/global.cf
  * harbour/config/darwin/gcc.cf
  * harbour/config/darwin/global.cf
  * harbour/config/dos/owatcom.cf
  * harbour/config/dos/global.cf
  * harbour/config/dos/rsx32.cf
  * harbour/config/global.cf
  * harbour/config/linux/owatcom.cf
  * harbour/config/linux/global.cf
  * harbour/config/os2/gcc.cf
  * harbour/config/os2/global.cf
  * harbour/config/sunos/gcc.cf
  * harbour/config/sunos/global.cf
  * harbour/config/bsd/global.cf
  * harbour/config/w32/owatcom.cf
  * harbour/config/w32/bcc32.cf
  * harbour/config/w32/gcc.cf
  * harbour/config/w32/rsxnt.cf
  * harbour/config/w32/global.cf
    ! fixed build process. DOS and WINDOWS users should make tests for
      different compilers. I tested only DOS-OpenWatcom, DOS-DJGPP,
      W32-BCC32, W32-OpenWatcom, W32-POCC, W32-XCC and corss builds
      W32-MinGW, W32-MinGW-CE. OS2 version not testes at all - I hope
      it will work. LINUX-GCC, LINUX-G++, LINUX-OpenWatcom, BSD-GCC,
      HPUX-GCC tested and they are working. I hope that SunOS version
      also works though I do not have any solaris installation where
      I can make real tests.

best regards
Przemek
From dmacias at mail.udg.mx  Tue Feb  5 04:18:04 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Mon Feb  4 04:18:07 2008
Subject: [Harbour] Re: Fix it quickly
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47A829CC.1070803@mail.udg.mx>

Ryszard:

 >  I have restored double backslash in 'clean' target of makefile
 >in my last commit so the command will be back
 >"del /n os2\gcc\\*.*"
 >  I have no OS/2 installed to test it then I don't understand why it is
 >nedded to have two backslashes and why the single backslash is eaten
 >in gcc\*.* but it is left in os2\gcc part of the command - it seems
 >that the backslash is some sort of 'escape' character for CMD.

...

 >  IMHO, the above verifies that the CMD.EXE is using \* in a special
 >way and it removes \ during execution - probably CMD is using some
 >other expansion and for example "\." is also processed into "." that
 >will explain why "md ..\..\lib\os2" is failing - but it is only
 >my hypothesis.

With restoration to double backslash ( "del /n os2\gcc\\*.*" ) it is 
working fine in deleting files

 >> Reviewing this line:
 >>    CMD.EXE /c IF NOT EXIST ..\..\lib\os2   md ..\..\lib\os2
 >> perhaps current directory for CMD.EXE instance is not that reported by
 >> make process (make[2]: Entering directory 
 >>`/harbour802/source/common'),
 >> instead it seem to be directory where make process started (
 >> e:\harbour802 )

 >  IMHO, it is not true because you definitely have 
 >"source/common/os2/gcc"
 >directory (see bellow your log) which means that

 >    CMD.EXE /c IF NOT EXIST os2   md os2
 >is run in the same directory as
 >    CMD.EXE /c IF NOT EXIST ..\..\lib\os2   md ..\..\lib\os2

Yes, I saw that
"md ..\..\lib\os2", "rd ..\..\lib\os2" does not work yet

Perhaps you are right about expansion of "\."

David Macias


From harbour.01 at syenar.hu  Mon Feb  4 04:41:57 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Feb  4 04:41:40 2008
Subject: [Harbour] 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <200802040832.m148WKBe006413@31-mo5-4.acn.waw.pl>
References: <200802040832.m148WKBe006413@31-mo5-4.acn.waw.pl>
Message-ID: <35DBAB68-0616-4195-AC54-F86A8D6FEE73@syenar.hu>

>
Hi Przemek,

> 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/harbour.spec
>  * harbour/harbour-ce-spec
>  * harbour/harbour-w32-spec
>  * harbour/contrib/Makefile
>    * removed hbzlib - it cannot be longer part of default build
>      because Viktor removed zlib header files. Viktor sorry but
>      IMHO you should revert it and also restore ace.h - it creates
>      serious problems without any valuable addition. Now we will
>      have to rebuild Harbour on many different platforms and often
>      it will not be possible to install some libraries. We cannot
>      force installing additional libs by people who will create
>      binaries for incoming releases so it's important to revert
>      it. Please do it.

Sorry but I don't find it normal that we're distributing
header files from other packages. This can be quite unsafe,
needs constant maintenance, gives the notion these are local
file, and they get locally modified eventually (they in fact
got modified in case of ADS), and last but not least it can
be _illegal_ (for ADS it definitely is).

We _may_ count on that 3rd party project will maintain
upwards/backwards compatibility when it comes to their
headers and associated dynamic libs, but we certainly
cannot be sure. Also notice that foreign dynamic libs,
_have to be_ installed on any systems which intend to use
these contribs, and with these packages the headers will
always come, so they _are_ installed somewhere, question
how can we find them, possibly automatically.

You're mentioning two such contribs, but in fact we
have several such ones, where we _never_ included foreign
headers files in our repository. Should we do it then
for all such project? (I think not).

So, I think the problem set should be solved properly
and globally and I believe it's doable, and Harbour won't
be the first project to actually have this problem and to
solve this problem.

In non-GNU, all it takes it setting a few envvars, in GNU
(for me) all it takes is setting C_USR in a meaningful
way. Under Windows these settings cannot be done automatically,
as packages can be installed anywhere, but under Linux maybe
it could even be automatized. If not, we should ask the
path for these packages from the user, that's how other packages
are doing it, as far as I could see.

Could you tell more about the serious problems this can
cause in Harbour? Maybe we can find a good solution.

Brgds,
Viktor

From dmacias at mail.udg.mx  Tue Feb  5 04:45:01 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Mon Feb  4 04:45:02 2008
Subject: [Harbour] Re: 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47A8301D.6000908@mail.udg.mx>

Przemek:

 >2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
 >  * harbour/config/os2/gcc.cf
 >  * harbour/config/os2/global.cf
 >      OS2 version not testes at all - I hope it will work

There are a problem to build Harbour under OS/2 due to existance of 
"..\..\" expression

See messages:
------------------
[Harbour] Re: Fix it quickly
David Arturo Macias Corona dmacias at mail.udg.mx
Sat Feb 2 02:26:33 EST 2008
http://lists.harbour-project.org/pipermail/harbour/2008-February/006113.html

[Harbour] Re: Fix it quickly
Ryszard G?ab harbour at rglab.pl
Sat Feb 2 18:08:05 EST 2008
http://lists.harbour-project.org/pipermail/harbour/2008-February/006142.html
------------------


Your changes add differences with respect to Ryszard process:
- Does not try to create lib\os2, lib\os2\gcc directories
   Old process is failing due to expression "..\..\lib\"
- Try to use these directories

With your changes, first error at building is:
-------------------------------
[E:\harbour802]make -r           1>make_gnu.log
ar: Can't open output archive ../../../../lib/os2/gcc/tmp-hbcommon.a
-------------------------------

which belong to:
-------------------------------
[E:\harbour802\source]make -C common first
make[2]: Entering directory `/harbour802/source/common'
CMD.EXE /c IF NOT EXIST os2 md os2
CMD.EXE /c IF NOT EXIST os2\gcc    md os2\gcc
   ---- Old process try to create lib\os2, lib\os2\gcc  ----
make[3]: Entering directory `/harbour802/source/common/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbfhnd.c -ohbfhnd.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbfsapi.c -ohbfsapi.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbfopen.c -ohbfopen.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbgete.c -ohbgete.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbwince.c -ohbwince.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbhash.c -ohbhash.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbstr.c -ohbstr.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbdate.c -ohbdate.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbtrace.c -ohbtrace.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbver.c -ohbver.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbverdsp.c -ohbverdsp.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbarch.c -ohbarch.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../reserved.c -oreserved.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../expropt1.c -oexpropt1.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../expropt2.c -oexpropt2.o
   ---- Try to use lib\os2\gcc directory ----
IF EXIST ../../../../lib/os2/gcc/hbcommon.a del /n 
../../../../lib/os2/gcc/hbcommon.a
echo CREATE ../../../../lib/os2/gcc/hbcommon.a > __lib__.tmp
echo ADDMOD hbfhnd.o >> __lib__.tmp
echo ADDMOD hbfsapi.o >> __lib__.tmp
echo ADDMOD hbfopen.o >> __lib__.tmp
echo ADDMOD hbgete.o >> __lib__.tmp
echo ADDMOD hbwince.o >> __lib__.tmp
echo ADDMOD hbhash.o >> __lib__.tmp
echo ADDMOD hbstr.o >> __lib__.tmp
echo ADDMOD hbdate.o >> __lib__.tmp
echo ADDMOD hbtrace.o >> __lib__.tmp
echo ADDMOD hbver.o >> __lib__.tmp
echo ADDMOD hbverdsp.o >> __lib__.tmp
echo ADDMOD hbarch.o >> __lib__.tmp
echo ADDMOD reserved.o >> __lib__.tmp
echo ADDMOD expropt1.o >> __lib__.tmp
echo ADDMOD expropt2.o >> __lib__.tmp
echo SAVE >> __lib__.tmp
echo END >> __lib__.tmp
ar -M < __lib__.tmp & del /n __lib__.tmp
make[3]: Leaving directory `/harbour802/source/common/os2/gcc'
make[2]: Leaving directory `/harbour802/source/common'
-------------------------------


David Macias



From mhsabado at gmail.com  Mon Feb  4 07:01:59 2008
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Mon Feb  4 07:02:12 2008
Subject: [Harbour] [LetoDB] Error Building Utils\Manager
Message-ID: <47A6FEB7.5000109@gmail.com>


Hi, 

I got the following error building LetoDB Manager.  Thanks for any help.

Regards,
Mario

D:\letodb\utils\manager>bld
Harbour devel build 1.1-1 Intl.
Copyright (c) 1999-2008, http://www.harbour-project.org/
Compiling 'manage.prg'...
Lines 4164, Functions/Procedures 19
Generating C source output to 'manage.c'... Done.
Borland C++ 5.82 for Win32 Copyright (c) 1993, 2005 Borland
manage.c:
Borland Resource Compiler  Version 5.40
Copyright (c) 1990, 1999 Inprise Corporation.  All rights reserved.
Turbo Incremental Link 5.69 Copyright (c) 1997-2005 Borland
Error: Unresolved external '_HB_FUN_TRACELOG' referenced from 
D:\HWGUI\LIB\HWGUI .LIB|hedit


From alex at belacy.belgorod.su  Mon Feb  4 07:42:46 2008
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Mon Feb  4 07:42:58 2008
Subject: [Harbour] Re: Version numbers suggestion
In-Reply-To: <1756544350.20080203123954@belacy.belgorod.su>
References: <4529311077.20080202182436@belacy.belgorod.su>	<C385495B-D9F3-4293-8E65-4DE1CABCDB8D@syenar.hu>
	<1756544350.20080203123954@belacy.belgorod.su>
Message-ID: <47A70846.6070400@belacy.belgorod.su>

I've found accidentally this message on a 
http://lists.harbour-project.org/, but it's absent in my mailbox.

Przemyslaw Czerpak writes:

 > Now I suggest to use HB_AT() and add to your project HB_AT() function
 > for xHarbour build until xHarbour will not support it.

 >   #ifdef __XHARBOUR__
 >      HB_FUNC( HB_AT ) { HB_FUNC_EXEC( AT ); }
 >   #endif

  This could be a decision if we had Harbour/xHarbour issue only. But 
what to do with Harbour distributions, including a latest offical 
release ? That's why we need an internal version number.

,-----------------------------------------------------------------------
| >  2) Recently the base workarea structure was changed in xHarbour. You
| >  know that every RDD have it's own workarea structure with first
| >  fields from a basic and some other, specific for this RDD, after the
| >  basic, and this structure is kept in a new header file.
| >  Now, if I want to keep the Leto RDD working for both Harbour and
| >  xHarbour, it's latest and previous versions, I need to provide two
| >  header files and leave a note for users of latest xharbour to rename
| >  xrddleto.h to rddleto.h before compiling the RDD.
`-----------------------------------------------------------------------

 > And this I'd like to dedicate to you ;-)

  :).

[ ... ]
 > In summary it seems to be xHarbour only problem and you should ask
 > xHarbour developers about it.

  Patrick, Ron, Brian, are you hear us :) ?

Regards,
   Alexander.
From alex at belacy.belgorod.su  Mon Feb  4 08:08:46 2008
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Mon Feb  4 08:08:59 2008
Subject: [Harbour] Re:  [LetoDB] Error Building Utils\Manager
In-Reply-To: <47A6FEB7.5000109@gmail.com>
References: <47A6FEB7.5000109@gmail.com>
Message-ID: <47A70E5E.5060607@belacy.belgorod.su>

Mario H. Sabado writes:

> Hi,
> I got the following error building LetoDB Manager.  Thanks for any help.
> [ ... ]
  > Error: Unresolved external '_HB_FUN_TRACELOG' referenced from
> D:\HWGUI\LIB\HWGUI .LIB|hedit

  Someone forgot to remove his ( xHarbour specific ) debugging stuff 
from HwGUI code.
  Just comment or remove the line with a tracelog() call from the 
hwgui/source/hedit.prg


Regards,
   Alexander.
From cvc at oohg.org  Mon Feb  4 08:17:31 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Mon Feb  4 08:17:37 2008
Subject: [Harbour] problem testing samples gtwvg
In-Reply-To: <15249692.post@talk.nabble.com>
References: <47A21E27.7020503@oohg.org>	<0E36F3DB-1EC7-457C-87E3-5BD8BD3AD8CE@syenar.hu>	<47A376CF.8000802@oohg.org>	<0A4669B6-9D86-4494-A3ED-9D7A8810B8E9@syenar.hu>	<47A3D769.5030003@oohg.org>	<4FF09A42-D273-4F8A-B925-282009A1C381@syenar.hu>	<47A43745.3060703@oohg.org>
	<47A4860D.4060601@oohg.org>	<15246919.post@talk.nabble.com>
	<47A504A1.4050005@oohg.org> <15249692.post@talk.nabble.com>
Message-ID: <47A7106B.6000401@oohg.org>

Pritpal Bedi escribi?:
> Hi
> 
>> I don't found this files, may you sendme tbrowse and tbcolumn fix to my
>> private email.?
> 
> Download from here:
> 
> http://www.nabble.com/file/p13965086/tbrowse.zip

Thanks Pritpal, I already added this sources to my proyect,
now I obtain...

Error: Unresolved external '_HB_FUN_HB_ENUMINDEX' referenced from 
C:\HARBOUR\HARBOUR\CONTRIB\GTWVG\TESTS\OBJE1BH\TBROWSE.OBJ

where can I found hb_enumindex function ?

TIA

Ciro
-- 
http://sistemascvc.tripod.com  (la casa del no2imp / the no2imp home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From rglab at przesiew.imid.med.pl  Mon Feb  4 09:15:01 2008
From: rglab at przesiew.imid.med.pl (Ryszard Glab)
Date: Mon Feb  4 09:02:30 2008
Subject: [Harbour] Re: Fix it quickly
In-Reply-To: <47A829CC.1070803@mail.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>,
	<47A829CC.1070803@mail.udg.mx>
Message-ID: <47A72BF5.8807.DD496A@rglab.przesiew.imid.med.pl>

On 5 Feb 2008 at 3:18, David Arturo Macias Corona wrote:

Can you manually check if the following command:

CMD.EXE /c IF NOT EXIST ..\..\lib\os2   md ..\..\lib\os2

started from harbour/source/common directory is creating 
harbour/lib/os2 dir?

Please also test the alternate command:

CMD.EXE /c IF NOT EXIST ..\\..\\lib\os2   md ..\\..\\lib\os2

Regards, Ryszard
From druzus at acn.waw.pl  Mon Feb  4 09:33:08 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Feb  4 09:33:12 2008
Subject: [Harbour] Re: 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <47A8301D.6000908@mail.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
	<47A8301D.6000908@mail.udg.mx>
Message-ID: <20080204143308.GA11331@localhost.localdomain>

On Tue, 05 Feb 2008, David Arturo Macias Corona wrote:
> With your changes, first error at building is:
> -------------------------------
> [E:\harbour802]make -r           1>make_gnu.log
> ar: Can't open output archive ../../../../lib/os2/gcc/tmp-hbcommon.a
> -------------------------------
> which belong to:
> -------------------------------
> [E:\harbour802\source]make -C common first
> make[2]: Entering directory `/harbour802/source/common'
> CMD.EXE /c IF NOT EXIST os2 md os2
> CMD.EXE /c IF NOT EXIST os2\gcc    md os2\gcc
>   ---- Old process try to create lib\os2, lib\os2\gcc  ----

The GNU make you are using in OS2 does not support many of
standard GNU make features and we still have problem with
some constructions which work on all other platforms but
not with OS2. This time seems that it does not understand
'if' function. I'll change it but if it's possible try to
find other GNU port for OS2.
The problem with backslash stripping can be caused by some
*sh.exe program in your PATH. DOS and WINDOWS GNU make port
(so probably also OS2 one) scans PATH for such programs and
if it finds any then uses it as SHELL. I do not know how to
disable this feature or even how to detect that it will make
it so I cannot add any workaround for executing non platform
native shells. In most of *nix like shells \ is escaped
character and it's stripped before native shell (CMD.EXE) is
called.

best regards,
Przemek
From rglab at przesiew.imid.med.pl  Mon Feb  4 09:46:45 2008
From: rglab at przesiew.imid.med.pl (Ryszard Glab)
Date: Mon Feb  4 09:34:07 2008
Subject: [Harbour] Re: Fix it quickly
In-Reply-To: <47A72BF5.8807.DD496A@rglab.przesiew.imid.med.pl>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>,
	<47A829CC.1070803@mail.udg.mx>,
	<47A72BF5.8807.DD496A@rglab.przesiew.imid.med.pl>
Message-ID: <47A73365.18226.FA56F9@rglab.przesiew.imid.med.pl>

On 4 Feb 2008 at 15:15, Ryszard Glab wrote:

> Please also test the alternate command:
> 
> CMD.EXE /c IF NOT EXIST ..\\..\\lib\os2   md ..\\..\\lib\os2

	Sorry should be:
CMD.EXE /c IF NOT EXIST ..\\..\lib\os2   md ..\\..\lib\os2

Regards, Ryszard
From cvc at oohg.org  Mon Feb  4 09:41:20 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Mon Feb  4 09:41:26 2008
Subject: [Harbour] problem testing samples gtwvg
In-Reply-To: <47A7106B.6000401@oohg.org>
References: <47A21E27.7020503@oohg.org>	<0E36F3DB-1EC7-457C-87E3-5BD8BD3AD8CE@syenar.hu>	<47A376CF.8000802@oohg.org>	<0A4669B6-9D86-4494-A3ED-9D7A8810B8E9@syenar.hu>	<47A3D769.5030003@oohg.org>	<4FF09A42-D273-4F8A-B925-282009A1C381@syenar.hu>	<47A43745.3060703@oohg.org>	<47A4860D.4060601@oohg.org>	<15246919.post@talk.nabble.com>	<47A504A1.4050005@oohg.org>
	<15249692.post@talk.nabble.com> <47A7106B.6000401@oohg.org>
Message-ID: <47A72410.9020000@oohg.org>

Ciro Vargas Clemow escribi?:
> Pritpal Bedi escribi?:
>> Hi
>>
>>> I don't found this files, may you sendme tbrowse and tbcolumn fix to my
>>> private email.?
>>
>> Download from here:
>>
>> http://www.nabble.com/file/p13965086/tbrowse.zip
> 
> Thanks Pritpal, I already added this sources to my proyect,
> now I obtain...

forget it

I already added xhb.lib

best regards
Ciro



-- 
http://sistemascvc.tripod.com  (la casa del no2imp / the no2imp home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From druzus at acn.waw.pl  Mon Feb  4 09:55:34 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Feb  4 09:55:39 2008
Subject: [Harbour] 2008-02-04 15:55 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200802041455.m14EtY6t011967@31-mo5-4.acn.waw.pl>

2008-02-04 15:55 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/os2/global.cf
    * added workaround for non working 'if' function in OS2 GNU make port

best regards
Przemek
From bedipritpal at hotmail.com  Mon Feb  4 10:04:05 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Feb  4 10:04:10 2008
Subject: [Harbour] problem testing samples gtwvg
In-Reply-To: <47A7106B.6000401@oohg.org>
References: <47A21E27.7020503@oohg.org>
	<0E36F3DB-1EC7-457C-87E3-5BD8BD3AD8CE@syenar.hu>
	<47A376CF.8000802@oohg.org>
	<0A4669B6-9D86-4494-A3ED-9D7A8810B8E9@syenar.hu>
	<47A3D769.5030003@oohg.org>
	<4FF09A42-D273-4F8A-B925-282009A1C381@syenar.hu>
	<47A43745.3060703@oohg.org> <47A4860D.4060601@oohg.org>
	<15246919.post@talk.nabble.com> <47A504A1.4050005@oohg.org>
	<15249692.post@talk.nabble.com> <47A7106B.6000401@oohg.org>
Message-ID: <15268881.post@talk.nabble.com>



Ciro Vargas Clemow wrote:
> 
> 
> Error: Unresolved external '_HB_FUN_HB_ENUMINDEX' referenced from 
> C:\HARBOUR\HARBOUR\CONTRIB\GTWVG\TESTS\OBJE1BH\TBROWSE.OBJ
> 
> where can I found hb_enumindex function ?
> 

Probably I was compiling with -dHB_COMPAT_XHB.

#include 'xhb.ch' on top of both files.

Pritpal Bedi, INDIA-USA
-- 
View this message in context: http://www.nabble.com/problem-testing-samples-gtwvg-tp15213872p15268881.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dbtopas at dbtopas.lt  Mon Feb  4 10:09:24 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Feb  4 10:11:20 2008
Subject: [Harbour] ChangeLog 2008-02-04 16:40 UTC+0200 Mindaugas Kavaliauskas
Message-ID: <47A72AA4.2040305@dbtopas.lt>

2008-02-04 16:40 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * harbour/source/vm/fm.c
     ! fixed hex dump of fm.log. The previous "hex" dump contained
       characters: ( ) . , + - / *
From mhsabado at gmail.com  Mon Feb  4 10:29:07 2008
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Mon Feb  4 10:30:20 2008
Subject: [Harbour] Re:  [LetoDB] Error Building Utils\Manager
Message-ID: <47A72F43.70800@gmail.com>

>
> -----------------------------
>
> Message: 7
> Date: Mon, 04 Feb 2008 16:08:46 +0300
> From: "Alexander S.Kresin" <alex@belacy.belgorod.su>
> Subject: [Harbour] Re:  [LetoDB] Error Building Utils\Manager
> To: "Harbour Project Main Developer List."
> 	<harbour@harbour-project.org>
> Message-ID: <47A70E5E.5060607@belacy.belgorod.su>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> Mario H. Sabado writes:
>
>   
>> > Hi,
>> > I got the following error building LetoDB Manager.  Thanks for any help.
>> > [ ... ]
>>     
>   > Error: Unresolved external '_HB_FUN_TRACELOG' referenced from
>   
>> > D:\HWGUI\LIB\HWGUI .LIB|hedit
>>     
>
>   Someone forgot to remove his ( xHarbour specific ) debugging stuff 
> from HwGUI code.
>   Just comment or remove the line with a tracelog() call from the 
> hwgui/source/hedit.prg
>
>
> Regards,
>    Alexander.
That did it... Thanks Alex!

Mario
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080204/f64a8092/attachment.html
From cvc at oohg.org  Mon Feb  4 10:45:45 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Mon Feb  4 10:46:53 2008
Subject: [Harbour] problem testing samples gtwvg
In-Reply-To: <47A72410.9020000@oohg.org>
References: <47A21E27.7020503@oohg.org>	<0E36F3DB-1EC7-457C-87E3-5BD8BD3AD8CE@syenar.hu>	<47A376CF.8000802@oohg.org>	<0A4669B6-9D86-4494-A3ED-9D7A8810B8E9@syenar.hu>	<47A3D769.5030003@oohg.org>	<4FF09A42-D273-4F8A-B925-282009A1C381@syenar.hu>	<47A43745.3060703@oohg.org>	<47A4860D.4060601@oohg.org>	<15246919.post@talk.nabble.com>	<47A504A1.4050005@oohg.org>	<15249692.post@talk.nabble.com>
	<47A7106B.6000401@oohg.org> <47A72410.9020000@oohg.org>
Message-ID: <47A73329.2080004@oohg.org>


Hi again Pritpal:

I added the tbrowse.prg and tbcolumn.prg from

http://www.nabble.com/file/p13965086/tbrowse.zip  to my project

but the error reported persist

the problem is here....

in demowvg.prg

for i := 1 to len( aFields )
   bBlock := VouBlockField( aFields[ i ] )
   oBrowse:AddColumn( TBColumnNew( info_[ aFields[ i ],1 ], bBlock ) ) //// here
next

BASE 11/32 Bound error: array access

I'm lost !!!

regards
Ciro



> forget it
> 
> I already added xhb.lib
> 
> best regards
> Ciro
> 
> 
> 


-- 
http://sistemascvc.tripod.com  (la casa del no2imp / the no2imp home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From mpaliwoda at interia.pl  Mon Feb  4 17:10:43 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Mon Feb  4 17:11:03 2008
Subject: [Harbour] 2008-02-04 22:57 UTC+0100 Marek Paliwoda (mpaliwoda at
	interia pl)
Message-ID: <fo82h3$6j7$1@ger.gmane.org>

2008-02-04 22:57 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)
   * harbour/common.mak
   * harbour/make_gcc.mak
     ! Fixed compilation under DJGPP

   * contrib/mtpl_gcc.mak
     ! Fixed compilation under GNU make

I am not sure everything is ok with this commit,
because there was a confict error reported by
Tortiose. Since this was my first commit error
I totaly did not know how to react to it and how
to handle it properly. So it's quite possible
I did "something stupid". I am not even sure if
files are in SVN. Please, advice if the status
of SVN is ok. If not, please advice how to "fix"
it :(.

-- 

     Marek Paliwoda
mpaliwoda at interia pl

From dmacias at mail.udg.mx  Tue Feb  5 03:36:22 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Feb  5 03:36:20 2008
Subject: [Harbour] Re: Fix it quickly
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47A82006.4070100@mail.udg.mx>

Ryszard:


 >Can you manually check if the following command:

 >CMD.EXE /c IF NOT EXIST ..\..\lib\os2   md ..\..\lib\os2

 >started from harbour/source/common directory is creating
 >harbour/lib/os2 dir?

 >Please also test the alternate command:

 >CMD.EXE /c IF NOT EXIST ..\\..\\lib\os2   md ..\\..\\lib\os2


I tested it before, and work with both forms:

---------------------------------------
Directory of E:\harbour802\lib

  1/02/08 10:01p         <DIR>      0 ----  .
  1/02/08 10:01p         <DIR>      0 ----  ..
  1/02/08 10:01p         <DIR>      0 ----  b32
  1/02/08 10:01p         <DIR>      0 ----  vc
         4 file(s)           0 bytes used
                     2,938,777 K bytes free

[E:\harbour802\source\common]test.cmd

[E:\harbour802\source\common]CMD.EXE /c IF NOT EXIST ..\..\lib\os2   md 
..\..\lib\os2

[E:\harbour802\source\common]CMD.EXE /c IF NOT EXIST ..\..\lib\os2\gcc 
   md ..\..\lib\os2\gcc
[E:\harbour802\source\common]

[E:\harbour802\source\common]CMD.EXE /c IF NOT EXIST ..\\..\lib\os2b 
md ..\\..\lib\os2b

[E:\harbour802\source\common]CMD.EXE /c IF NOT EXIST 
..\\..\lib\os2b\gccb   md ..\\..\lib\os2b\gccb
[E:\harbour802\source\common]

[E:\harbour802\source\common]dir e:\harbour802\lib

The volume label in drive E is ECS.
The Volume Serial Number is A913:E015.
Directory of E:\harbour802\lib

  1/02/08 10:01p         <DIR>      0 ----  .
  1/02/08 10:01p         <DIR>      0 ----  ..
  1/02/08 10:01p         <DIR>      0 ----  b32
  5/02/08  2:27a         <DIR>      0 ----  os2
  5/02/08  2:27a         <DIR>      0 ----  os2b
  1/02/08 10:01p         <DIR>      0 ----  vc
---------------------------------------

This problem seem to be related to make.exe version too, as exposed by 
Przemek. See messages

David Macias


From dmacias at mail.udg.mx  Tue Feb  5 03:56:21 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Feb  5 03:56:20 2008
Subject: [Harbour] Re: 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47A824B5.1050901@mail.udg.mx>

Przemek:

 >The GNU make you are using in OS2 does not support many of
 >standard GNU make features and we still have problem with
 >some constructions which work on all other platforms but
 >not with OS2. This time seems that it does not understand
 >'if' function. I'll change it but if it's possible try to
 >find other GNU port for OS2.

I am using GNU Make version 3.76.1, and now I tried with GNU Make 3.81beta1
Explained below

 >The problem with backslash stripping can be caused by some
 >*sh.exe program in your PATH. DOS and WINDOWS GNU make port
 >(so probably also OS2 one) scans PATH for such programs and
 >if it finds any then uses it as SHELL. I do not know how to
 >disable this feature or even how to detect that it will make
 >it so I cannot add any workaround for executing non platform
 >native shells. In most of *nix like shells \ is escaped
 >character and it's stripped before native shell (CMD.EXE) is
 >called.

Checked and do not exist any *sh.exe available
Problem seem to be related to make version too


Tests with GNU Make version 3.76.1
==================================
  4/09/00 10:56a       178,688      0 a---  make.exe
GNU Make version 3.76.1, by Richard Stallman and Roland McGrath.
Copyright (C) 1988, 89, 90, 91, 92, 93, 94, 95, 96, 97

As described before, seem does not support 'if'
        $(if $(OS2_LIB_ARCH),-CMD.EXE /c IF EXIST $(OS2_LIB_ARCH) $(RM) 
$(OS2_LIB_ARCH),)

part of make_gnu.log for comparison with next make.exe ----------
[E:\harbour802\source]make -C common first
make[2]: Entering directory `/harbour802/source/common'
CMD.EXE /c IF NOT EXIST os2 md os2
CMD.EXE /c IF NOT EXIST os2\gcc    md os2\gcc
make[3]: Entering directory `/harbour802/source/common/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbfhnd.c -ohbfhnd.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbfsapi.c -ohbfsapi.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbfopen.c -ohbfopen.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbgete.c -ohbgete.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbwince.c -ohbwince.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbhash.c -ohbhash.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbstr.c -ohbstr.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbdate.c -ohbdate.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbtrace.c -ohbtrace.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbver.c -ohbver.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbverdsp.c -ohbverdsp.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbarch.c -ohbarch.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../reserved.c -oreserved.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../expropt1.c -oexpropt1.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../expropt2.c -oexpropt2.o
IF EXIST ../../../../lib/os2/gcc/hbcommon.a del /n 
../../../../lib/os2/gcc/hbcommon.a
echo CREATE ../../../../lib/os2/gcc/hbcommon.a > __lib__.tmp
echo ADDMOD hbfhnd.o >> __lib__.tmp
echo ADDMOD hbfsapi.o >> __lib__.tmp
echo ADDMOD hbfopen.o >> __lib__.tmp
echo ADDMOD hbgete.o >> __lib__.tmp
echo ADDMOD hbwince.o >> __lib__.tmp
echo ADDMOD hbhash.o >> __lib__.tmp
echo ADDMOD hbstr.o >> __lib__.tmp
echo ADDMOD hbdate.o >> __lib__.tmp
echo ADDMOD hbtrace.o >> __lib__.tmp
echo ADDMOD hbver.o >> __lib__.tmp
echo ADDMOD hbverdsp.o >> __lib__.tmp
echo ADDMOD hbarch.o >> __lib__.tmp
echo ADDMOD reserved.o >> __lib__.tmp
echo ADDMOD expropt1.o >> __lib__.tmp
echo ADDMOD expropt2.o >> __lib__.tmp
echo SAVE >> __lib__.tmp
echo END >> __lib__.tmp
ar -M < __lib__.tmp & del /n __lib__.tmp
make[3]: Leaving directory `/harbour802/source/common/os2/gcc'
make[2]: Leaving directory `/harbour802/source/common'
  -----------------------



Tests with GNU Make version 3.76.1
==================================
10/04/04  3:15a       107,520      0 a---  make.exe
-----
GNU Make 3.81beta1
Copyright (C) 2003  Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.

This program built for i386-pc-os2-emx
-----

It seem to support 'if'
        $(if $(OS2_LIB_ARCH),-CMD.EXE /c IF EXIST $(OS2_LIB_ARCH) $(RM) 
$(OS2_LIB_ARCH),)
and add drive E: to expression,
It create "..\..\lib\os2", "..\..\lib\os2\gcc" without problem with "..\..\"

BUT, does not build anything

Messages on screen: --------------------
[E:\harbour802]make -r           1>make_gnu.log
../../Makefile:28: ../../config/lib.cf: No such file or directory
make[3]: *** No rule to make target `../../config/lib.cf'.  Stop.
make[2]: *** [descend] Error 2
--------------------


Part of make_gnu.log ------------------
[E:\harbour802\source]make -C common first
make[2]: Entering directory `E:/harbour802/source/common'
CMD.EXE /c IF NOT EXIST os2 md os2
CMD.EXE /c IF NOT EXIST os2\gcc    md os2\gcc
CMD.EXE /c IF NOT EXIST ..\..\lib\os2    md ..\..\lib\os2
CMD.EXE /c IF NOT EXIST ..\..\lib\os2\gcc     md ..\..\lib\os2\gcc
make[3]: Entering directory `E:/harbour802/source/common/os2/gcc'
make[3]: Leaving directory `E:/harbour802/source/common/os2/gcc'
make[2]: Leaving directory `E:/harbour802/source/common'
------------------------------------

As you said, is better to choice newest make.exe if it build something

David Macias


From dmacias at mail.udg.mx  Tue Feb  5 04:03:51 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Feb  5 04:03:53 2008
Subject: [Harbour] Re: 2008-02-04 15:55 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47A82677.20201@mail.udg.mx>

Przemek:

 >2008-02-04 15:55 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
 >  * harbour/config/os2/global.cf
 >    * added workaround for non working 'if' function in OS2 GNU make >port

Problems seem bigger with these changes
As these are for "non working 'if'", I used "old" make.exe

Messages on screen -------------
[E:\harbour802]make -r           1>make_gnu.log
SYS1079: IF was unexpected at this time.
make[2]: [dirbase] Error 1 (ignored)
make: *** os2/gcc: No such file or directory.  Stop.
make[2]: *** [descend] Error 2
--------------------------


Part of make_gnu.log ------------
[E:\harbour802\source]make -C common first
make[2]: Entering directory `/harbour802/source/common'
FOR %d IN (os2 os2\gcc) IF NOT EXIST %d md %d
make: Entering an unknown directory
make: Leaving an unknown directory
make[2]: Leaving directory `/harbour802/source/common'
---------------------------------

Perhaps is better to revert this changes, and try with "new" make.exe 
fixing lack of build (described in previous message)

David Macias


From druzus at acn.waw.pl  Tue Feb  5 04:58:38 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Feb  5 04:58:44 2008
Subject: [Harbour] 2008-02-05 10:58 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200802050958.m159wcqw014629@31-mo5-4.acn.waw.pl>

2008-02-05 10:58 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/os2/global.cf
    ! fixed typo in FOR command

best regards
Przemek
From druzus at acn.waw.pl  Tue Feb  5 05:00:32 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Feb  5 05:00:38 2008
Subject: [Harbour] Re: 2008-02-04 15:55 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <47A82677.20201@mail.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
	<47A82677.20201@mail.udg.mx>
Message-ID: <20080205100032.GA14575@localhost.localdomain>

On Tue, 05 Feb 2008, David Arturo Macias Corona wrote:
> >2008-02-04 15:55 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> >  * harbour/config/os2/global.cf
> >    * added workaround for non working 'if' function in OS2 GNU make >port
> Problems seem bigger with these changes
> As these are for "non working 'if'", I used "old" make.exe

It was typo. Should be fixed with:
   2008-02-05 10:58 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
please test.

best regards,
Przemek
From dmacias at mail.udg.mx  Wed Feb  6 05:17:44 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Feb  5 05:17:43 2008
Subject: [Harbour] Re: 2008-02-04 15:55 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47A98948.70205@mail.udg.mx>

Przemek:

 >It was typo. Should be fixed with:
 >   2008-02-05 10:58 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
 >please test.

Tested with "old" make.exe
Remain problem for lib\os2, lib\os2\gcc, never created

Messages on screen -------------
[E:\harbour802]make -r           1>make_gnu.log
ar: Can't open output archive ../../../../lib/os2/gcc/tmp-hbcommon.a
--------------------------


Part of make_gnu.log ------------
[E:\harbour802\source]make -C common first
make[2]: Entering directory `/harbour802/source/common'
FOR %d IN (os2 os2\gcc) DO IF NOT EXIST %d md %d

[E:\harbour802\source\common]IF NOT EXIST os2 md os2

[E:\harbour802\source\common]IF NOT EXIST os2\gcc md os2\gcc
make[3]: Entering directory `/harbour802/source/common/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbfhnd.c -ohbfhnd.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbfsapi.c -ohbfsapi.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbfopen.c -ohbfopen.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbgete.c -ohbgete.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbwince.c -ohbwince.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbhash.c -ohbhash.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbstr.c -ohbstr.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbdate.c -ohbdate.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbtrace.c -ohbtrace.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbver.c -ohbver.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbverdsp.c -ohbverdsp.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbarch.c -ohbarch.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../reserved.c -oreserved.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../expropt1.c -oexpropt1.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../expropt2.c -oexpropt2.o
IF EXIST ../../../../lib/os2/gcc/hbcommon.a del /n 
../../../../lib/os2/gcc/hbcommon.a
echo CREATE ../../../../lib/os2/gcc/hbcommon.a > __lib__.tmp
echo ADDMOD hbfhnd.o >> __lib__.tmp
echo ADDMOD hbfsapi.o >> __lib__.tmp
echo ADDMOD hbfopen.o >> __lib__.tmp
echo ADDMOD hbgete.o >> __lib__.tmp
echo ADDMOD hbwince.o >> __lib__.tmp
echo ADDMOD hbhash.o >> __lib__.tmp
echo ADDMOD hbstr.o >> __lib__.tmp
echo ADDMOD hbdate.o >> __lib__.tmp
echo ADDMOD hbtrace.o >> __lib__.tmp
echo ADDMOD hbver.o >> __lib__.tmp
echo ADDMOD hbverdsp.o >> __lib__.tmp
echo ADDMOD hbarch.o >> __lib__.tmp
echo ADDMOD reserved.o >> __lib__.tmp
echo ADDMOD expropt1.o >> __lib__.tmp
echo ADDMOD expropt2.o >> __lib__.tmp
echo SAVE >> __lib__.tmp
echo END >> __lib__.tmp
ar -M < __lib__.tmp & del /n __lib__.tmp
make[3]: Leaving directory `/harbour802/source/common/os2/gcc'
make[2]: Leaving directory `/harbour802/source/common'
---------------------------------


With "new" make.exe remain problem described in previous message. Does 
not build anything


David Macias


From mbelgrano at deltain.it  Tue Feb  5 05:21:30 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Feb  5 05:21:41 2008
Subject: [Harbour] 2008-02-05 10:58 UTC+0100 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <200802050958.m159wcqw014629@31-mo5-4.acn.waw.pl>
References: <200802050958.m159wcqw014629@31-mo5-4.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815E928@SRV02.deltain.net>

Interesting resource editor open source
http://www.resedit.net/


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw
Czerpak
Sent: Tuesday, February 05, 2008 10:59 AM
To: harbour@harbour-project.org
Subject: [Harbour] 2008-02-05 10:58 UTC+0100 Przemyslaw
Czerpak(druzus/at/priv.onet.pl)

2008-02-05 10:58 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/os2/global.cf
    ! fixed typo in FOR command

best regards
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From e.m.giordano at emagsoftware.it  Tue Feb  5 05:56:54 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Feb  5 05:57:02 2008
Subject: [Harbour] 2008-02-05 10:58 UTC+0100
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
References: <200802050958.m159wcqw014629@31-mo5-4.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815E928@SRV02.deltain.net>
Message-ID: <016701c867e5$d28ae9b0$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Massimo Belgrano" <mbelgrano@deltain.it>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 5 febbraio 2008 11.21
Oggetto: RE: [Harbour] 2008-02-05 10:58 UTC+0100 
PrzemyslawCzerpak(druzus/at/priv.onet.pl)


> Interesting resource editor open source
> http://www.resedit.net/

It seems wonderful!

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Tue Feb  5 06:01:32 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Feb  5 06:01:36 2008
Subject: [Harbour] 2008-02-05 10:58 UTC+0100
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
References: <200802050958.m159wcqw014629@31-mo5-4.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815E928@SRV02.deltain.net>
Message-ID: <017801c867e6$77527210$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Massimo Belgrano" <mbelgrano@deltain.it>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 5 febbraio 2008 11.21
Oggetto: RE: [Harbour] 2008-02-05 10:58 UTC+0100 
PrzemyslawCzerpak(druzus/at/priv.onet.pl)


> Interesting resource editor open source
> http://www.resedit.net/

I get "LANGUAGE is not supported" if I try to open my Borland Resource 
Workshop generated RCs.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at acn.waw.pl  Tue Feb  5 06:12:04 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Feb  5 06:12:18 2008
Subject: [Harbour] Re: [xHarbour-developers] Hello
In-Reply-To: <47A838FF.7050505@belacy.belgorod.su>
References: <47A838FF.7050505@belacy.belgorod.su>
Message-ID: <20080205111204.GB18895@localhost.localdomain>

On Tue, 05 Feb 2008, Alexander S.Kresin wrote:
> I'm here to resolve the problem, which you know from a Patrick's message 
> and, probably, some other compatibility problems, which may happen.

If this is the only one problem then the solution is trivial.
Instead of copping all AREA structure members to your RDD AREA structure
just simply declare it as:

typedef struct _MYAREA
{
   AREA     area;

   <your fields, ...>

} MYAREA, * LPMYAREA;

and then use in your code:
   pArea->area.fBof
instead of:
   pArea->fBof
or with casting:
   ( ( AREAP ) pArea )->fBof


Probably:
   pArea->area.fBof
is the most readable and we should even use such version
in our core code. It will have no speed overhead because
area is 1-st member of MYAREA so exactly the same machine
code will be generated.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Tue Feb  5 06:48:47 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Feb  5 06:48:52 2008
Subject: [Harbour] gtxwc/gtwvt color palette
Message-ID: <9257026e0802050348m46c5633en94a5aaf690ff2e9c@mail.gmail.com>

Choosing the right colors can make the difference between a "DOS app"
and "modern app".

I've done some test manually changing color definitions in gtxwc and
the difference is huge
( like the difference between getting a new customer and don't :)

Look at Gmail. They use few colors but blue and green are not "real"
blue and green and so on.

The idea is to add a GT function to define a palette of 16 colors
using RGB values and then use it in gtxwc and gtwvt since they have
similar color definition:

gtxwc.c:
/* these are standard PC console colors in RGB */
static const char *rgb_colors[] = {
   "rgb:00/00/00",   /* black         */
[...]
   "rgb:FF/FF/FF"    /* white         */
};

gtwvt.h:
#define BLACK          RGB( 0x0 ,0x0 ,0x0  )
[...]
#define BRIGHT_WHITE   RGB( 0xFF,0xFF,0xFF )

I imagine sth like:

HB_GT_COLOR_PALETTE( "#000000", [...], "#FFFFFF" )

Anybody interested?

best regards,
Lorenzo
From harbour.01 at syenar.hu  Tue Feb  5 07:28:20 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Feb  5 07:35:18 2008
Subject: [Harbour] gtxwc/gtwvt color palette
In-Reply-To: <9257026e0802050348m46c5633en94a5aaf690ff2e9c@mail.gmail.com>
References: <9257026e0802050348m46c5633en94a5aaf690ff2e9c@mail.gmail.com>
Message-ID: <C23A9938-7E98-4353-8E26-C82A9EA7DF3F@syenar.hu>

Hi Lorenzo,

Sounds nice, I'd recommend the existing hb_gtInfo()
function (with a new HB_GTI_ #define) to change these
settings.

Brgds,
Viktor

On 2008.02.05., at 12:48, Lorenzo Fiorini wrote:

> Choosing the right colors can make the difference between a "DOS app"
> and "modern app".
>
> I've done some test manually changing color definitions in gtxwc and
> the difference is huge
> ( like the difference between getting a new customer and don't :)
>
> Look at Gmail. They use few colors but blue and green are not "real"
> blue and green and so on.
>
> The idea is to add a GT function to define a palette of 16 colors
> using RGB values and then use it in gtxwc and gtwvt since they have
> similar color definition:
>
> gtxwc.c:
> /* these are standard PC console colors in RGB */
> static const char *rgb_colors[] = {
>   "rgb:00/00/00",   /* black         */
> [...]
>   "rgb:FF/FF/FF"    /* white         */
> };
>
> gtwvt.h:
> #define BLACK          RGB( 0x0 ,0x0 ,0x0  )
> [...]
> #define BRIGHT_WHITE   RGB( 0xFF,0xFF,0xFF )
>
> I imagine sth like:
>
> HB_GT_COLOR_PALETTE( "#000000", [...], "#FFFFFF" )
>
> Anybody interested?
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Tue Feb  5 07:39:53 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Feb  5 07:39:57 2008
Subject: [Harbour] gtxwc/gtwvt color palette
In-Reply-To: <9257026e0802050348m46c5633en94a5aaf690ff2e9c@mail.gmail.com>
References: <9257026e0802050348m46c5633en94a5aaf690ff2e9c@mail.gmail.com>
Message-ID: <20080205123952.GA25100@localhost.localdomain>

On Tue, 05 Feb 2008, Lorenzo Fiorini wrote:
> HB_GT_COLOR_PALETTE( "#000000", [...], "#FFFFFF" )
> Anybody interested?

I'll add new GTI_ action to set palette to some GT drivers
after release freeze.

best regards,
Lorenzo
From bedipritpal at hotmail.com  Tue Feb  5 09:42:37 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Feb  5 09:42:45 2008
Subject: [Harbour] gtxwc/gtwvt color palette
In-Reply-To: <20080205123952.GA25100@localhost.localdomain>
References: <9257026e0802050348m46c5633en94a5aaf690ff2e9c@mail.gmail.com>
	<20080205123952.GA25100@localhost.localdomain>
Message-ID: <15291025.post@talk.nabble.com>


Hello

GTWVG already has this functionality but via function calls. Its extension
via GTI_* constants is more natural.


Przemyslaw Czerpak-2 wrote:
> 
>> HB_GT_COLOR_PALETTE( "#000000", [...], "#FFFFFF" )
>> Anybody interested?
> 
> I'll add new GTI_ action to set palette to some GT drivers after release
> freeze.
> 

Pritpal Bedi, INDIA-USA

-- 
View this message in context: http://www.nabble.com/gtxwc-gtwvt-color-palette-tp15288859p15291025.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From lorenzo.fiorini at gmail.com  Tue Feb  5 09:54:21 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Feb  5 09:54:32 2008
Subject: [Harbour] gtxwc/gtwvt color palette
In-Reply-To: <20080205123952.GA25100@localhost.localdomain>
References: <9257026e0802050348m46c5633en94a5aaf690ff2e9c@mail.gmail.com>
	<20080205123952.GA25100@localhost.localdomain>
Message-ID: <9257026e0802050654i484cee45qfecbdc61a188f9c9@mail.gmail.com>

On Feb 5, 2008 1:39 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> I'll add new GTI_ action to set palette to some GT drivers
> after release freeze.

Many thanks, I couldn't be more lucky :)

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Tue Feb  5 09:59:14 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Feb  5 09:59:19 2008
Subject: [Harbour] gtxwc/gtwvt color palette
In-Reply-To: <15291025.post@talk.nabble.com>
References: <9257026e0802050348m46c5633en94a5aaf690ff2e9c@mail.gmail.com>
	<20080205123952.GA25100@localhost.localdomain>
	<15291025.post@talk.nabble.com>
Message-ID: <9257026e0802050659s48c14a6dub7259da7932e1440@mail.gmail.com>

On Feb 5, 2008 3:42 PM, Pritpal Bedi <bedipritpal@hotmail.com> wrote:

> GTWVG already has this functionality but via function calls. Its extension
> via GTI_* constants is more natural.

Good news.

best regards,
Lorenzo
From dbtopas at dbtopas.lt  Tue Feb  5 10:19:39 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Feb  5 10:21:37 2008
Subject: [Harbour] Asynchronous procedures
In-Reply-To: <47A5E4C5.7090509@dbtopas.lt>
References: <47A5130B.8040704@dbtopas.lt> <15250095.post@talk.nabble.com>
	<47A5E4C5.7090509@dbtopas.lt>
Message-ID: <47A87E8B.2020205@dbtopas.lt>

Mindaugas Kavaliauskas wrote:
> It's compilers job to process language structures such as loops and ifs 
> to machine code. And the code could be written to be a single thread 
> code. So, the question (a little bit philosophical) is, why compiler can 
> not help to write this single thread code?


Hi,


I've made a try to implement my ideas. Instead of long descriptions I 
present it by sample code:
-------------------------------------
PROC main()
LOCAL hContext

    DO WHILE fctxIsContext( hContext := semithread( hContext, 100 ) )
       IF INKEY(0) == 27;  EXIT
       ENDIF
    ENDDO

    /* Let's print some more and pass a different param */
    IF fctxIsContext( hContext );  semithread( hContext, "hello" )
    ENDIF

    ? "main() exit"
RETURN

FUNC semithread( hContext, xParam )
LOCAL nInc, nIndex, nCount

    ? "semithread()"

    /* We assume xParam indicates count. Let's save it in local
       variable, since locals are saved in function context */
    nCount := xParam

    nInc := 0
    FOR nIndex := 1 TO nCount
       ? nIndex
       nInc++
       IF nInc >= 10
          nInc := 0
          RETURN_CONTEXT
          ? "saved nCount:", nCount, "passed param:", xParam
       ENDIF
    NEXT

    ? "semithread() exit"
RETURN NIL
-------------------------------------


The idea is implemented in this way:
- write RETURN_CONTEXT instead of RETURN, if you want function to return 
it's execution context. Pass this context as a first parameter to 
function to continue execution;
- compile .prg code to .hrb file;
- compile .hrb file to .c code. I've mentioned, it's compiler's job to 
generate code. Of cause, I was not going to write a new compiler, I just 
take compiled Harbour code (.hrb file), change it and generate .c 
output. .hrb output is also implemented;
- link fctx.c module to your application.

The implementation is not complete, there are issues related to the 
usage of BEGIN/END SEQUENCE, etc., but you can use it if you like :) 
Read comments and source of fctx.c, if you are interested in 
implementation details.


Best regards,
Mindaugas


P.S. almost forgot to say the main thing - you'll find it at 
http://www.dbtopas.lt/hrb/fctx.zip
From rglab at przesiew.imid.med.pl  Tue Feb  5 12:29:25 2008
From: rglab at przesiew.imid.med.pl (Ryszard Glab)
Date: Tue Feb  5 12:16:53 2008
Subject: [Harbour] Asynchronous procedures
In-Reply-To: <47A87E8B.2020205@dbtopas.lt>
References: <47A5130B.8040704@dbtopas.lt>, <47A5E4C5.7090509@dbtopas.lt>,
	<47A87E8B.2020205@dbtopas.lt>
Message-ID: <47A8AB05.17472.19BA950@rglab.przesiew.imid.med.pl>

On 5 Feb 2008 at 17:21, Mindaugas Kavaliauskas wrote:

> I've made a try to implement my ideas. Instead of long descriptions I 
> present it by sample code:

  I still fail what you want to achieve however wouldn't it be 
simpler to create an array of objects and call some method for every 
object created? The object can store complete context required.
Something like:

oObj := SomeClass():New()
oObj:SetContex( /* place all nedded data here */ )
AADD( aObjs, oObj )

and leter

FOR EACH o IN aObjs
	o:DoJobUsingStoredContex()
NEXT

Regards, Ryszard
From dbtopas at dbtopas.lt  Tue Feb  5 14:07:48 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Feb  5 14:07:45 2008
Subject: [Harbour] Asynchronous procedures
In-Reply-To: <47A8AB05.17472.19BA950@rglab.przesiew.imid.med.pl>
References: <47A5130B.8040704@dbtopas.lt>, <47A5E4C5.7090509@dbtopas.lt>,
	<47A87E8B.2020205@dbtopas.lt>
	<47A8AB05.17472.19BA950@rglab.przesiew.imid.med.pl>
Message-ID: <47A8B404.1030703@dbtopas.lt>

Ryszard Glab wrote:
> On 5 Feb 2008 at 17:21, Mindaugas Kavaliauskas wrote:
> 
>> I've made a try to implement my ideas. Instead of long descriptions I 
>> present it by sample code:
> 
>   I still fail what you want to achieve however wouldn't it be 
> simpler to create an array of objects and call some method for every 
> object created? The object can store complete context required.
> Something like:
> 
> oObj := SomeClass():New()
> oObj:SetContex( /* place all nedded data here */ )
> AADD( aObjs, oObj )
> 
> and leter
> 
> FOR EACH o IN aObjs
> 	o:DoJobUsingStoredContex()
> NEXT

Hi,


the problem is not that I have a lot of objects, but the problem is I 
want to continue execution from the middle of the function. Imagine I 
have a code:

PROC myproc()
   ...
   IF ...
      DBSELECTAREA("record")
      DBGOTOP()
      DO WHILE ! EOF()
         ...
         IF IveGotTired()
            /* Here I want to return, and (maybe) continue execution
               later */
         ENDIF
         ...
         DBSKIP()
      ENDDO
   ELSE
      DBSELECTAREA("group")
      DBGOTOP()
      DO WHILE !EOF()
         ...
         DBSELECTAREA("record")
         DBSEEK( group->ID )
         DBGOTOP()
         DO WHILE ID == group->ID
            ...
            IF IveGotTired()
               /* Here I also want to return, and (maybe) continue
                  execution later */
            ENDIF
            ...
            DBSKIP()
         ENDDO
         DBSKIP()
          ...
      ENDDO
   ENDIF
   ...
RETURN


I can try to implement this using a message to some object, but in this 
case my whole procedure logic, loops, branching will be hidden. I can 
not use DO WHILE !EOF()/DBSKIP()/ENDDO, etc., anymore.


Best regards,
Mindaugas
From bedipritpal at hotmail.com  Tue Feb  5 15:10:17 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Feb  5 15:10:58 2008
Subject: [Harbour] Asynchronous procedures
In-Reply-To: <47A8B404.1030703@dbtopas.lt>
References: <47A5130B.8040704@dbtopas.lt> <15250095.post@talk.nabble.com>
	<47A5E4C5.7090509@dbtopas.lt> <47A87E8B.2020205@dbtopas.lt>
	<47A8AB05.17472.19BA950@rglab.przesiew.imid.med.pl>
	<47A8B404.1030703@dbtopas.lt>
Message-ID: <15298476.post@talk.nabble.com>


Mindaugas


Mindaugas Kavaliauskas wrote:
> 
> the problem is not that I have a lot of objects, but the problem is I 
> want to continue execution from the middle of the function. Imagine I 
> have a code:
> 
> PROC myproc()
>    ...
>    IF ...
>       DBSELECTAREA("record")
>       DBGOTOP()
>       DO WHILE ! EOF()
>          ...
>          IF IveGotTired()
>             /* Here I want to return, and (maybe) continue execution
>                later */
>          ENDIF
>          ...
>          DBSKIP()
>       ENDDO
>    ENDIF
>    ...
> RETURN
> 
> I can try to implement this using a message to some object, but in this 
> case my whole procedure logic, loops, branching will be hidden. I can 
> not use DO WHILE !EOF()/DBSKIP()/ENDDO, etc., anymore.
> 

A great idea indeed. Will solve a lot of situations if implemented in core
code. I vote for.

Pritpal Bedi, INDIA-USA
-- 
View this message in context: http://www.nabble.com/Asynchronous-procedures-tp15249451p15298476.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From alex at belacy.belgorod.su  Wed Feb  6 04:04:30 2008
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Wed Feb  6 04:05:04 2008
Subject: [Harbour] Leto db server - build2
Message-ID: <47A9781E.6030001@belacy.belgorod.su>

  Hi All,

next build of a Leto db Server is uploaded to Sourceforge.
Al incompatibilities with different Harbour/xHarbour versions are 
eliminated. Fixed few bugs, added few basic methods.

Those, who use latest Harbour sources, need to change library names in 
makefile.bc.

It would be very interesting if anyone, who are able to build Harbour 
for mobile devices, tested how a client program on a smatrphone or 
pocket pc works with a Leto db, installed on some server.

Regards,
   Alexander.
From rglab at przesiew.imid.med.pl  Wed Feb  6 05:15:19 2008
From: rglab at przesiew.imid.med.pl (Ryszard Glab)
Date: Wed Feb  6 05:02:55 2008
Subject: [Harbour] Asynchronous procedures
In-Reply-To: <47A8B404.1030703@dbtopas.lt>
References: <47A5130B.8040704@dbtopas.lt>,
	<47A8AB05.17472.19BA950@rglab.przesiew.imid.med.pl>,
	<47A8B404.1030703@dbtopas.lt>
Message-ID: <47A996C7.2358.8C731@rglab.przesiew.imid.med.pl>

On 5 Feb 2008 at 21:07, Mindaugas Kavaliauskas wrote:

> the problem is not that I have a lot of objects, but the problem is I 
> want to continue execution from the middle of the function. Imagine I 
> have a code:
[...]
> I can try to implement this using a message to some object, but in >this 
> case my whole procedure logic, loops, branching will be hidden. I can 
> not use DO WHILE !EOF()/DBSKIP()/ENDDO, etc., anymore.

  In this case you have two choices:
1) wait for multithread using OS kernel thread
2) you have to extend harbour virtual machine so it can run more then 
one thread of pcodes (cooperative multitasking?)

  IMHO, it is difficult and unefficient to save and restore the whole 
context in the middle of the function body. You will have to store 
not only the state of locals, statics, privates, publics but also 
state of databases and state of all files opened with low level 
functions, console state, etc.


  Using objects you need to implement only three messages:
StartJob - called once for initial positioning
ContinueJob - called in loop
StopJob - called once to release resources

ContinueJob() needs a prolog (save all current settings, restore all 
local settings (mostly database state: current record, current order) 
the main processing code and the epilog (which egain save all needed 
local settings and restores settings saved in a prolog).
  I was using such code in clipper using idle states and it was 
working quite well.

Regards, Ryszard
From mpaliwoda at interia.pl  Wed Feb  6 05:10:07 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Feb  6 05:10:50 2008
Subject: [Harbour] 2008-02-06 11:08 UTC+0100 Marek Paliwoda (mpaliwoda at
	interia pl)
Message-ID: <foc124$m90$1@ger.gmane.org>

2008-02-06 11:08 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)
   * harbour/common.mak
   * harbour/make_gcc.mak
   * harbour/make_gcc.sh
     ! Some fixes for OS/2+eComStation. Still not all is working ok (dlls)

-- 

     Marek Paliwoda
mpaliwoda at interia pl

From dbtopas at dbtopas.lt  Wed Feb  6 07:14:00 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Feb  6 07:12:52 2008
Subject: [Harbour] Asynchronous procedures
In-Reply-To: <47A996C7.2358.8C731@rglab.przesiew.imid.med.pl>
References: <47A5130B.8040704@dbtopas.lt>,
	<47A8AB05.17472.19BA950@rglab.przesiew.imid.med.pl>,
	<47A8B404.1030703@dbtopas.lt>
	<47A996C7.2358.8C731@rglab.przesiew.imid.med.pl>
Message-ID: <47A9A488.7000804@dbtopas.lt>

Hi,


Ryszard Glab wrote:
>> I can try to implement this using a message to some object, but in >this 
>> case my whole procedure logic, loops, branching will be hidden. I can 
>> not use DO WHILE !EOF()/DBSKIP()/ENDDO, etc., anymore.
> 
>   In this case you have two choices:
> 1) wait for multithread using OS kernel thread
> 2) you have to extend harbour virtual machine so it can run more then 
> one thread of pcodes (cooperative multitasking?)

3) use code I've post to the mailing list. It's available right now and 
implementation is much more simple than 1) or 2).

>   IMHO, it is difficult and unefficient to save and restore the whole 
> context in the middle of the function body. You will have to store 
> not only the state of locals, statics, privates, publics but also 
> state of databases and state of all files opened with low level 
> functions, console state, etc.

Not so difficult (see source), and no so unefficient. If I have let's 
say 3 locals. Saving context is faster than
    RETURN {local1, loca2, local3}
so not so huge time overhead.

I do not understand why you are going to save statics, publics, 
databases, files, console, etc. My goal is to continue function 
execution from some return point? Do you save statics, publics, 
databases, files, console before any function call and restore it later?
Here I have the same situation like normal function call. I can just 
continue execution from return point.

>   Using objects you need to implement only three messages:
> StartJob - called once for initial positioning
> ContinueJob - called in loop
> StopJob - called once to release resources
> 
> ContinueJob() needs a prolog (save all current settings, restore all 
> local settings (mostly database state: current record, current order) 
> the main processing code and the epilog (which egain save all needed 
> local settings and restores settings saved in a prolog).
>   I was using such code in clipper using idle states and it was 
> working quite well.

It's possible you have a great idea, but I still do not understand it. 
Can you, please, propose source code of ContinueJob message for the code 
below? (areas "group" and "record" are not accessed from any other code, 
and you do not need to save/restore it's state)

PROC myproc()
   ...
   DBSELECTAREA("group")
   DBGOTOP()
   DO WHILE !EOF()
      ...
      DBSELECTAREA("record")
      DBSEEK( group->ID )
      DBGOTOP()
      DO WHILE ID == group->ID
         ...
         IF IveGotTired()
            /* Here I also want to return, and (maybe) continue
               execution later */
         ENDIF
         ...
         DBSKIP()
      ENDDO
      DBSKIP()
      ...
   ENDDO
   ...
RETURN


Best regards,
Mindaugas

From info at fsgiudice.com  Wed Feb  6 15:53:45 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Feb  6 15:54:01 2008
Subject: [Harbour] Asynchronous procedures
References: <47A5130B.8040704@dbtopas.lt>,
	<47A8AB05.17472.19BA950@rglab.przesiew.imid.med.pl>,
	<47A8B404.1030703@dbtopas.lt><47A996C7.2358.8C731@rglab.przesiew.imid.med.pl>
	<47A9A488.7000804@dbtopas.lt>
Message-ID: <000e01c86902$5e077fe0$b400a8c0@ASUSFSG>

Hi Mindagaus and Ryszard,

----- Original Message ----- 
From: "Mindaugas Kavaliauskas" <dbtopas@dbtopas.lt>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Wednesday, February 06, 2008 1:14 PM
Subject: Re: [Harbour] Asynchronous procedures


> Hi,
>
>
> Ryszard Glab wrote:
>>> I can try to implement this using a message to some object, but in >this 
>>> case my whole procedure logic, loops, branching will be hidden. I can 
>>> not use DO WHILE !EOF()/DBSKIP()/ENDDO, etc., anymore.
>>
>>   In this case you have two choices:
>> 1) wait for multithread using OS kernel thread
>> 2) you have to extend harbour virtual machine so it can run more then one 
>> thread of pcodes (cooperative multitasking?)
>
> 3) use code I've post to the mailing list. It's available right now and 
> implementation is much more simple than 1) or 2).
>
>>   IMHO, it is difficult and unefficient to save and restore the whole 
>> context in the middle of the function body. You will have to store not 
>> only the state of locals, statics, privates, publics but also state of 
>> databases and state of all files opened with low level functions, console 
>> state, etc.
>
> Not so difficult (see source), and no so unefficient. If I have let's say 
> 3 locals. Saving context is faster than
>    RETURN {local1, loca2, local3}
> so not so huge time overhead.
>
> I do not understand why you are going to save statics, publics, databases, 
> files, console, etc. My goal is to continue function execution from some 
> return point? Do you save statics, publics, databases, files, console 
> before any function call and restore it later?
> Here I have the same situation like normal function call. I can just 
> continue execution from return point.
>
>>   Using objects you need to implement only three messages:
>> StartJob - called once for initial positioning
>> ContinueJob - called in loop
>> StopJob - called once to release resources
>>
>> ContinueJob() needs a prolog (save all current settings, restore all 
>> local settings (mostly database state: current record, current order) the 
>> main processing code and the epilog (which egain save all needed local 
>> settings and restores settings saved in a prolog).
>>   I was using such code in clipper using idle states and it was working 
>> quite well.
>
> It's possible you have a great idea, but I still do not understand it. Can 
> you, please, propose source code of ContinueJob message for the code 
> below? (areas "group" and "record" are not accessed from any other code, 
> and you do not need to save/restore it's state)
>
> PROC myproc()
>   ...
>   DBSELECTAREA("group")
>   DBGOTOP()
>   DO WHILE !EOF()
>      ...
>      DBSELECTAREA("record")
>      DBSEEK( group->ID )
>      DBGOTOP()
>      DO WHILE ID == group->ID
>         ...
>         IF IveGotTired()
>            /* Here I also want to return, and (maybe) continue
>               execution later */
>         ENDIF
>         ...
>         DBSKIP()
>      ENDDO
>      DBSKIP()
>      ...
>   ENDDO
>   ...
> RETURN
>
>

sorry to jump in and if I have misunderstood the context, but it's seems to 
me that you need something like background tasks that I have already 
implemented (and also ported in harbour but not uploaded).
Or i'm in wrong ?

Best Regards

Francesco

From dmacias at mail.udg.mx  Wed Feb  6 16:14:21 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Feb  6 16:14:23 2008
Subject: [Harbour] Re: 2008-02-06 11:08 UTC+0100 Marek Paliwoda (mpaliwoda
 at interia pl)
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47AA232D.5070508@mail.udg.mx>

Marek:

 >2008-02-06 11:08 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)
 >   * harbour/common.mak
 >   * harbour/make_gcc.mak
 >   * harbour/make_gcc.sh
 >     ! Some fixes for OS/2+eComStation. Still not all is working ok 
 >(dlls)

Can you explain what is not working ?
What versions are you using ( OS/2, gcc, make, ... )

David Macias

From dbtopas at dbtopas.lt  Wed Feb  6 19:21:28 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Feb  6 19:20:17 2008
Subject: [Harbour] Asynchronous procedures
In-Reply-To: <000e01c86902$5e077fe0$b400a8c0@ASUSFSG>
References: <47A5130B.8040704@dbtopas.lt>,
	<47A8AB05.17472.19BA950@rglab.przesiew.imid.med.pl>,
	<47A8B404.1030703@dbtopas.lt><47A996C7.2358.8C731@rglab.przesiew.imid.med.pl>	<47A9A488.7000804@dbtopas.lt>
	<000e01c86902$5e077fe0$b400a8c0@ASUSFSG>
Message-ID: <47AA4F08.4090600@dbtopas.lt>

Hi,


Francesco Saverio Giudice wrote:
> sorry to jump in and if I have misunderstood the context, but it's seems 
> to me that you need something like background tasks that I have already 
> implemented (and also ported in harbour but not uploaded).
> Or i'm in wrong ?

Background tasks does not solve the problem at all, even the opposite is 
true - I will need to save and restore function context if I want to use 
background task for doing some prolonged job.

Multitasking solves this problem, but it's not required. Actually if 
multitasking is used to solve this problem, only one task will be active 
at any time: main task should wait until my "server_or_whatever" task is 
running, and my "server_or_whatever" task is suspended until main task 
does not call it using saved context. I will need to use an additional 
process synchronization, if I want to implement it in multitasking way.


Best regards,
Mindaugas
From mpaliwoda at interia.pl  Thu Feb  7 02:33:34 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Thu Feb  7 02:33:49 2008
Subject: [Harbour] Re: 2008-02-06 11:08 UTC+0100 Marek Paliwoda (mpaliwoda
 at interia pl)
In-Reply-To: <47AA232D.5070508@mail.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
	<47AA232D.5070508@mail.udg.mx>
Message-ID: <foec8f$7pj$1@ger.gmane.org>

Hi David,

>  >2008-02-06 11:08 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)
>  >   * harbour/common.mak
>  >   * harbour/make_gcc.mak
>  >   * harbour/make_gcc.sh
>  >     ! Some fixes for OS/2+eComStation. Still not all is working ok 
>  >(dlls)
> 
> Can you explain what is not working ?
> What versions are you using ( OS/2, gcc, make, ... )

Well, truely speaking I do not use OS/2 :). I simply had
a chance to access an OS/2 system on my friend's computer.
He bought OS/2 long ago (he says he payed too much for it
;-)) and still has an old machine running OS/2 - because
of a sentiment - I guess for the money he payed ;-).
I don't know the OS/2 version - I didn't check it (in fact
I wouldn't even know how to check this).

I installed eComStation build environment dated 2007/10/22
which has gcc 3.3.5, make 3.81, bash 2.0.0.

It didn't work unfortunately - so I had to install something
which is called EMX - I found one on a net - version 0.9c ??.

The main disapointment was bash. It does not support ==,&&,||
operators. The second disapointment was ld. It requires that
-o option has to have a space before the following file name.
And the third disapointment was ld again. It does not support
-Wl,--start-group,-Wl,--end-group options. I didn't want to
fight with a proper libraries order, so I used a dirty hack
to solve this problem, to succesfully compile static version
of harbour. For some strange reason gtcrs did not compile ok
because of undefined TIOCGWINSZ. I had a similar problem with
DJGPP and gtpca, but here it was a problem with some disabled
features in DJGPP header files. I didn't have time to carefully
check the real problem, so I simply disabled gtcrs compilation.

Still harbour.dll does not link ok. The linker says something
like "exebind failed ...". I completly do not know what is it
talking about ;-).

I know you will not agree with me :), but I don't think it is
worth the efforts to keep harbour compatible with OS/2. It is
a dead system - IBM confirmed this lately - and those using it
have now many new possibilities to migrate to newer systems.

But that's my opinion only and I don't want to argue about it :).

-- 

Marek

From maurilio.longo at libero.it  Thu Feb  7 04:08:00 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Feb  7 04:08:08 2008
Subject: [Harbour] Re: 2008-02-06 11:08 UTC+0100 Marek Paliwoda
	(mpaliwodaat interia pl)
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
	<47AA232D.5070508@mail.udg.mx> <foec8f$7pj$1@ger.gmane.org>
Message-ID: <47AACA70.88D1C8A2@libero.it>

Marek,

not to start a dispute on this issue, but while it is true that IBM is no more
selling OS/2 to end-users, the OS, for end-users, is now on the hands of the
eComStation guys which are doing a really good work in enhancing/supporting
it.

You can go to www.ecomstation.com to see.

That said, I think that your problems come from the use of a build system
which is not uptodate.

Try, if you're willing to spend some time, www.smedley.info, there you'll find
paul's gcc build environment which should get you going (select 'my port of
unix tools to os/2' and then tools on the left frame-bar).

I'm not using it, but with that tool chaing, Paul has ported a lot of software
to OS/2, even complex software like mysql, for example.

Sadly I don't have time right now to download and test harbour on OS/2.

You can, but I fear you have different problems, look at xharbour OS/2 .cf
files which work ok.

Best regards.

Maurilio.


Marek Paliwoda ha scritto:
> 
> Hi David,
> 
> >  >2008-02-06 11:08 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)
> >  >   * harbour/common.mak
> >  >   * harbour/make_gcc.mak
> >  >   * harbour/make_gcc.sh
> >  >     ! Some fixes for OS/2+eComStation. Still not all is working ok
> >  >(dlls)
> >
> > Can you explain what is not working ?
> > What versions are you using ( OS/2, gcc, make, ... )
> 
> Well, truely speaking I do not use OS/2 :). I simply had
> a chance to access an OS/2 system on my friend's computer.
> He bought OS/2 long ago (he says he payed too much for it
> ;-)) and still has an old machine running OS/2 - because
> of a sentiment - I guess for the money he payed ;-).
> I don't know the OS/2 version - I didn't check it (in fact
> I wouldn't even know how to check this).
> 
> I installed eComStation build environment dated 2007/10/22
> which has gcc 3.3.5, make 3.81, bash 2.0.0.
> 
> It didn't work unfortunately - so I had to install something
> which is called EMX - I found one on a net - version 0.9c ??.
> 
> The main disapointment was bash. It does not support ==,&&,||
> operators. The second disapointment was ld. It requires that
> -o option has to have a space before the following file name.
> And the third disapointment was ld again. It does not support
> -Wl,--start-group,-Wl,--end-group options. I didn't want to
> fight with a proper libraries order, so I used a dirty hack
> to solve this problem, to succesfully compile static version
> of harbour. For some strange reason gtcrs did not compile ok
> because of undefined TIOCGWINSZ. I had a similar problem with
> DJGPP and gtpca, but here it was a problem with some disabled
> features in DJGPP header files. I didn't have time to carefully
> check the real problem, so I simply disabled gtcrs compilation.
> 
> Still harbour.dll does not link ok. The linker says something
> like "exebind failed ...". I completly do not know what is it
> talking about ;-).
> 
> I know you will not agree with me :), but I don't think it is
> worth the efforts to keep harbour compatible with OS/2. It is
> a dead system - IBM confirmed this lately - and those using it
> have now many new possibilities to migrate to newer systems.
> 
> But that's my opinion only and I don't want to argue about it :).
> 
> --
> 
> Marek
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

-- 
 __________                   
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.
From dmacias at mail.udg.mx  Thu Feb  7 04:43:47 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Feb  7 04:43:43 2008
Subject: [Harbour] Re: 2008-02-06 11:08 UTC+0100 Marek Paliwoda (mpaliwoda
 at interia pl)
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47AAD2D3.8060803@mail.udg.mx>

Marek:

 >Well, truely speaking I do not use OS/2 :). I simply had
 >a chance to access an OS/2 system on my friend's computer.
 >He bought OS/2 long ago (he says he payed too much for it
 >;-)) and still has an old machine running OS/2 - because
 >of a sentiment - I guess for the money he payed ;-).

Perhaps around 200 USD

 >I don't know the OS/2 version - I didn't check it (in fact
 >I wouldn't even know how to check this).

Ver
or
Syslevel
or
OS() under (x)Harbour

 >I installed eComStation build environment dated 2007/10/22
 >which has gcc 3.3.5, make 3.81, bash 2.0.0.

This is Paul Smedley environment. He use to make Unix ports to OS/2-eCS
http://www.smedley.info/os2ports/

Other option is moztools package, used to build Mozilla, Firefox, ... 
under OS/2

 >Itp didn't work unfortunately - so I had to install something
 >which is called EMX - I found one on a net - version 0.9c ??.

emx/gcc, old gcc

 >The main disapointment was bash. It does not support ==,&&,||
 >operators. The second disapointment was ld. It requires that
 >-o option has to have a space before the following file name.
 >And the third disapointment was ld again. It does not support
 >-Wl,--start-group,-Wl,--end-group options. I didn't want to
 >fight with a proper libraries order, so I used a dirty hack
 >to solve this problem, to succesfully compile static version
 >of harbour. For some strange reason gtcrs did not compile ok
 >because of undefined TIOCGWINSZ. I had a similar problem with
 >DJGPP and gtpca, but here it was a problem with some disabled
 >features in DJGPP header files. I didn't have time to carefully
 >check the real problem, so I simply disabled gtcrs compilation.

 >Still harbour.dll does not link ok. The linker says something
 >like "exebind failed ...". I completly do not know what is it
 >talking about ;-).

As I saw, you were happy playing some hours with this environment  :-)

I am suspecting some things:
- You found it easy to understand and use in short time
- Paul Smedley environment may have something different to my environment
My "news" make.exe 3.81beta1 and 3.81r2 does not build anything in each 
directory, as described in previous messages
- After deletion of all files in root dir, re-installation of eCS left 
some directories like E:\PREVIOUS\ecs\dll, and maybe some dlls are 
missing in new installation causing make and related to fail


 >I know you will not agree with me :), but I don't think it is
 >worth the efforts to keep harbour compatible with OS/2. It is
 >a dead system - IBM confirmed this lately - and those using it
 >have now many new possibilities to migrate to newer systems.

December 2006 IBM discontinued OS/2 support/selling

 >But that's my opinion only and I don't want to argue about it :).

:-)
I started to use OS/2 2.0, 2.1 around begin of 1994, when it required 8 
(!) Mb RAM to run properly (remember that times, and high cost of memory 
?). It was definitely superior to Win 3.x, DR-DOS (7.x from Novell), in 
performance, multitasking and mainly stability
Since then I used to build DOS (Clipper) and run Win3.x systems and as 
main development machine

Around 2001 I started to test Linux (Corel Linux, RedHat 7.3, Mandrake 
8, ..) and since then I have many flavors of them

MS reached good level of OS until Win2000, which was nearest of OS/2 
quality, then WinXP and recently Win Vista revisited some risks

In the last years ...
- My main development environment is Win32 (around 80% of time), using 
WinXPP SP2 and recently Windows Vista HP, using Core2Duo 2 Ghz, with 2 
Gb RAM (250 times 8 Mb)
My graphs library Citlalli made with Clipper/(x)Harbour/FW(H) is a 
must-tool of my daily work, together with (x)Harbour and Clipxnet

- Use / test some Linux like Mandriva 2008 (32-64bits), FC, PCLOS, 
Ubuntu, Knoppix, ...
Until now no one reach an end-user level for desktop machine, compared 
to OS/2, Win32 (well, Vista is a surprises box)
I am surprised about some silly errors found in any kind of releases of 
Linux ( or many cookers in same kitchen or low quality of development )

- My main computer is under eCS 1.2MR, acting as "server" for many 
purposes, including connection to Internet (TCP/IP services, VNC, SVN, ...)
Highly reliable is perhaps main reason to mantain it as server
"Near zero" problems, compared to other environments, no virus, no 
hangs, ...
Here I use Clipxnet, my system for Clipper code scripts/Web based systems
Working with Xitami Web Server, Apache, MySQL, (x)Harbour, it is I 
highly stable environment for Web based systems
End user fronts/screens are not necessary in these server modes

Around 13 years I took decision of not left Clipper and jump to other 
languages (VBasic, PowerBuilder, Clarion, ...) and now I am happy with 
that choice. (x)Harbour raised as an excellent development tool, and 
many creative developers keep them as an up-to-date tool
Clipper code / (x)Harbour / Clipxnet / DBFCDX is the SAME tool in any of 
my environments ( Win32, OS/2, Linux ), and work equal in any of them

Is time to stop using OS/2 as an good and reliable server with 
Clipxnet/Clipper language support ? No, not yet  :-)
.. but as always, I keep looking for some comparable solution

David Macias


From druzus at acn.waw.pl  Thu Feb  7 05:24:24 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Feb  7 05:24:31 2008
Subject: [Harbour] 2008-02-07 11:24 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200802071024.m17AOOVU008971@31-mo5-4.acn.waw.pl>

2008-02-07 11:24 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/os2/gcc.cf
    * use OS2_LIB_ARCH as library name to avoid problems with DEL
  * harbour/config/os2/global.cf
    * use double backslash characters - hack to test if it's sufficient
      workaround for problems mkdir on OS2

best regards
Przemek
From mpaliwoda at interia.pl  Thu Feb  7 05:36:03 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Thu Feb  7 05:36:39 2008
Subject: [Harbour] Re: 2008-02-06 11:08 UTC+0100 Marek Paliwoda (mpaliwodaat
 interia pl)
In-Reply-To: <47AACA70.88D1C8A2@libero.it>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>	<47AA232D.5070508@mail.udg.mx>
	<foec8f$7pj$1@ger.gmane.org> <47AACA70.88D1C8A2@libero.it>
Message-ID: <foemul$add$1@ger.gmane.org>

Maurilio,

> not to start a dispute on this issue, but while it is true that IBM is no more
> selling OS/2 to end-users, the OS, for end-users, is now on the hands of the
> eComStation guys which are doing a really good work in enhancing/supporting
> it.
> 
> You can go to www.ecomstation.com to see.

No doubts, but ... I've read recently that IBM has refused to release OS/2
sources under *any licence* to a comunity, and this *absolutly* means that
OS/2 is dead. I guess you will not be able to install it on new machines
because a hardware has enhanced so much that it is incomatible with OS/2.
So the only choice is to install it on old machines, which slowly become
unaccessable (of course I did not try it - it's a pure speculation :)).

> That said, I think that your problems come from the use of a build system
> which is not uptodate.

Well, that's what I've found on a net. Do you mean that there is more
recent gcc than 3.3.5 and more recent ld ? I used a build downloaded
from eComStation.org, and together with EMX it works.

> Try, if you're willing to spend some time, www.smedley.info, there you'll find
> paul's gcc build environment which should get you going (select 'my port of
> unix tools to os/2' and then tools on the left frame-bar).
> 
> I'm not using it, but with that tool chaing, Paul has ported a lot of software
> to OS/2, even complex software like mysql, for example.

Well, I am not sure when I'll be able to get access to OS/2 again :(.

> Sadly I don't have time right now to download and test harbour on OS/2.
> 
> You can, but I fear you have different problems, look at xharbour OS/2 .cf
> files which work ok.

If they are able to build harbour.dll, maybe it's worth to look at them :).
But Harbour's make_gcc.sh + make_gcc.mak + common.mak works ok currently
for OS/2 static builds.

Thanks for your input :).

-- 

Marek

From mpaliwoda at interia.pl  Thu Feb  7 05:46:56 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Thu Feb  7 05:47:10 2008
Subject: [Harbour] Re: 2008-02-06 11:08 UTC+0100 Marek Paliwoda (mpaliwoda
 at interia pl)
In-Reply-To: <47AAD2D3.8060803@mail.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
	<47AAD2D3.8060803@mail.udg.mx>
Message-ID: <foenj2$ciq$1@ger.gmane.org>

David,

>  >Well, truely speaking I do not use OS/2 :). I simply had
>  >a chance to access an OS/2 system on my friend's computer.
>  >He bought OS/2 long ago (he says he payed too much for it
>  >;-)) and still has an old machine running OS/2 - because
>  >of a sentiment - I guess for the money he payed ;-).
> 
> Perhaps around 200 USD

I guess, it was a little bit higher than this. And in those
days it *was a huge* amount of money :). Now 200-300 USD is
an acceptable price in Poland, but long ago it was really,
really high :(.

>  >I don't know the OS/2 version - I didn't check it (in fact
>  >I wouldn't even know how to check this).
> 
> Ver
> or
> Syslevel
> or
> OS() under (x)Harbour

Simple indeed :).

>  >I installed eComStation build environment dated 2007/10/22
>  >which has gcc 3.3.5, make 3.81, bash 2.0.0.
> 
> This is Paul Smedley environment. He use to make Unix ports to OS/2-eCS
> http://www.smedley.info/os2ports/
> 
> Other option is moztools package, used to build Mozilla, Firefox, ... 
> under OS/2

Funny, but after installing this build I had "moztools" directory
installed and "used" (I mean it was in PATH environment).

>  >Itp didn't work unfortunately - so I had to install something
>  >which is called EMX - I found one on a net - version 0.9c ??.
> 
> emx/gcc, old gcc

I think you did not undrstand me. I used gcc 3.3.5 but it required
to have EMX installed to work properly. That's all.

>  >The main disapointment was bash. It does not support ==,&&,||
>  >operators. The second disapointment was ld. It requires that
>  >-o option has to have a space before the following file name.
>  >And the third disapointment was ld again. It does not support
>  >-Wl,--start-group,-Wl,--end-group options. I didn't want to
>  >fight with a proper libraries order, so I used a dirty hack
>  >to solve this problem, to succesfully compile static version
>  >of harbour. For some strange reason gtcrs did not compile ok
>  >because of undefined TIOCGWINSZ. I had a similar problem with
>  >DJGPP and gtpca, but here it was a problem with some disabled
>  >features in DJGPP header files. I didn't have time to carefully
>  >check the real problem, so I simply disabled gtcrs compilation.
> 
>  >Still harbour.dll does not link ok. The linker says something
>  >like "exebind failed ...". I completly do not know what is it
>  >talking about ;-).
> 
> As I saw, you were happy playing some hours with this environment  :-)

:)

> I am suspecting some things:
> - You found it easy to understand and use in short time
> - Paul Smedley environment may have something different to my environment
> My "news" make.exe 3.81beta1 and 3.81r2 does not build anything in each 
> directory, as described in previous messages
> - After deletion of all files in root dir, re-installation of eCS left 
> some directories like E:\PREVIOUS\ecs\dll, and maybe some dlls are 
> missing in new installation causing make and related to fail

Well, it seems you were using "standard" harbour's build system
centered around GNU Makefiles. I used an "alternative" build
system centered around common.mak (it also uses GNU make on some
platforms), which works in different way than "standard" build.
You called "make_gnu.sh", I called "make_gcc.sh".

>  >I know you will not agree with me :), but I don't think it is
>  >worth the efforts to keep harbour compatible with OS/2. It is
>  >a dead system - IBM confirmed this lately - and those using it
>  >have now many new possibilities to migrate to newer systems.
> 
> December 2006 IBM discontinued OS/2 support/selling

But recently IBM announced that it will never release OS/2 sources
to a community. This definitly mean that OS/2 is dead (to mee). See
my replay to Maurilio.

>  >But that's my opinion only and I don't want to argue about it :).
> 
> :-)
> I started to use OS/2 2.0, 2.1 around begin of 1994, when it required 8 
> (!) Mb RAM to run properly (remember that times, and high cost of memory 
> ?). It was definitely superior to Win 3.x, DR-DOS (7.x from Novell), in 
> performance, multitasking and mainly stability
> Since then I used to build DOS (Clipper) and run Win3.x systems and as 
> main development machine
> 
> Around 2001 I started to test Linux (Corel Linux, RedHat 7.3, Mandrake 
> 8, ..) and since then I have many flavors of them
> 
> MS reached good level of OS until Win2000, which was nearest of OS/2 
> quality, then WinXP and recently Win Vista revisited some risks
> 
> In the last years ...
> - My main development environment is Win32 (around 80% of time), using 
> WinXPP SP2 and recently Windows Vista HP, using Core2Duo 2 Ghz, with 2 
> Gb RAM (250 times 8 Mb)
> My graphs library Citlalli made with Clipper/(x)Harbour/FW(H) is a 
> must-tool of my daily work, together with (x)Harbour and Clipxnet
> 
> - Use / test some Linux like Mandriva 2008 (32-64bits), FC, PCLOS, 
> Ubuntu, Knoppix, ...
> Until now no one reach an end-user level for desktop machine, compared 
> to OS/2, Win32 (well, Vista is a surprises box)
> I am surprised about some silly errors found in any kind of releases of 
> Linux ( or many cookers in same kitchen or low quality of development )
> 
> - My main computer is under eCS 1.2MR, acting as "server" for many 
> purposes, including connection to Internet (TCP/IP services, VNC, SVN, ...)
> Highly reliable is perhaps main reason to mantain it as server
> "Near zero" problems, compared to other environments, no virus, no 
> hangs, ...
> Here I use Clipxnet, my system for Clipper code scripts/Web based systems
> Working with Xitami Web Server, Apache, MySQL, (x)Harbour, it is I 
> highly stable environment for Web based systems
> End user fronts/screens are not necessary in these server modes
> 
> Around 13 years I took decision of not left Clipper and jump to other 
> languages (VBasic, PowerBuilder, Clarion, ...) and now I am happy with 
> that choice. (x)Harbour raised as an excellent development tool, and 
> many creative developers keep them as an up-to-date tool
> Clipper code / (x)Harbour / Clipxnet / DBFCDX is the SAME tool in any of 
> my environments ( Win32, OS/2, Linux ), and work equal in any of them
> 
> Is time to stop using OS/2 as an good and reliable server with 
> Clipxnet/Clipper language support ? No, not yet  :-)
> .. but as always, I keep looking for some comparable solution

:)

-- 

Marek

From dmacias at mail.udg.mx  Thu Feb  7 05:52:42 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Feb  7 05:52:40 2008
Subject: [Harbour] Re: 2008-02-06 11:08 UTC+0100 Marek Paliwoda (mpaliwoda
 at interia pl)
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47AAE2FA.3090203@mail.udg.mx>

Przemek:

Seem previous message was refused due length of make_gnu.log (until now 
it not appear on Harbour list)
This copy contain a short make_gnu.log

Please see CORRECTION section, perhaps you need to review your previous 
changes (workaround for 'if')
lib\os2, lib\os2\gcc are created in a later point

David Macias



Maurilio:

>That said, I think that your problems come from the use of a build >system
>which is not uptodate.

>You can, but I fear you have different problems, look at xharbour OS/2 
>.cf
>files which work ok.

Harbour under OS/2 was building fine until some days ago, but now it is
failing. Here is an relation:

- Harbour was changed to create libraries under
harbour\lib\"platform"\"compiler"
- It uses expression like "..\..\lib\os2", "..\..\lib\os2\gcc"
- GNU Make version 3.76.1 does not recognize/support "..\..\" and does
not create required directories. Perhaps is expanding "\."
Similar problem was seen with "\*"
- Przemek changed to use:
         $(if $(OS2_LIB_ARCH),-CMD.EXE /c IF EXIST $(OS2_LIB_ARCH) $(RM)
$(OS2_LIB_ARCH),)
but Make 3.76.1 does not support 'if', and does not create required
directories
- Przemek changed to include an workaround for 'if': but again does not
create required directories

CORRECTION (Przemek, do not miss this):
Directories are created, but just when build process reach (source\rtl),
so hbcommon, hbcplr can not be created due there are not directories yet
hbppgen.exe, harbour.exe can not be created as consequence
After this point, just a few libraries are created in lib\os2\gcc
Part of Make_gnu.log included below

- As seen, Marek changes does not touch this case

Harbour build OK using make 3.76.1 if lib\os2, lib\os2\gcc directories
are created manually previously

Trying with make.exe 3.81beta1, 3.81r2:
- They support "\..\.." and 'if" and both create required directories
properly
- They DO NOT build anything in any directory
Here are part of messages with both:

Messages on screen: --------------------
[E:\harbour802]make -r           1>make_gnu.log
../../Makefile:28: ../../config/lib.cf: No such file or directory
make[3]: *** No rule to make target `../../config/lib.cf'.  Stop.
make[2]: *** [descend] Error 2
--------------------

Part of make_gnu.log ------------------
[E:\harbour802\source]make -C common first
make[2]: Entering directory `E:/harbour802/source/common'
CMD.EXE /c IF NOT EXIST os2 md os2
CMD.EXE /c IF NOT EXIST os2\gcc    md os2\gcc
CMD.EXE /c IF NOT EXIST ..\..\lib\os2    md ..\..\lib\os2
CMD.EXE /c IF NOT EXIST ..\..\lib\os2\gcc     md ..\..\lib\os2\gcc
make[3]: Entering directory `E:/harbour802/source/common/os2/gcc'
make[3]: Leaving directory `E:/harbour802/source/common/os2/gcc'
make[2]: Leaving directory `E:/harbour802/source/common'
------------------------------------

But seem Marek was building Harbour OK using make 3.81, so seem he have
an different environment

As you can see, Harbour build face a problem with "make" versions and
their capabilities

David Macias



CMD.EXE /c FOR %d IN (doc include source utils contrib ) DO make -C %d first

[E:\harbour802]make -C doc first
make[1]: Entering directory `/harbour802/doc'
CMD.EXE /c FOR %d IN (en es ) DO make -C %d first

[E:\harbour802\doc]make -C en first
make[2]: Entering directory `/harbour802/doc/en'
make[2]: Nothing to be done for `first'.
make[2]: Leaving directory `/harbour802/doc/en'

[E:\harbour802\doc]make -C es first
make[2]: Entering directory `/harbour802/doc/es'
make[2]: Nothing to be done for `first'.
make[2]: Leaving directory `/harbour802/doc/es'
make[1]: Leaving directory `/harbour802/doc'

[E:\harbour802]make -C include first
make[1]: Entering directory `/harbour802/include'
make[1]: Nothing to be done for `first'.
make[1]: Leaving directory `/harbour802/include'

[E:\harbour802]make -C source first
make[1]: Entering directory `/harbour802/source'
CMD.EXE /c FOR %d IN (common pp compiler main rtl vm macro codepage lang
rdd hbpcre debug ) DO make -C %d first

[E:\harbour802\source]make -C common first
make[2]: Entering directory `/harbour802/source/common'
FOR %d IN (os2 os2\gcc) DO IF NOT EXIST %d md %d

[E:\harbour802\source\common]IF NOT EXIST os2 md os2

[E:\harbour802\source\common]IF NOT EXIST os2\gcc md os2\gcc
make[3]: Entering directory `/harbour802/source/common/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbfhnd.c -ohbfhnd.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbfsapi.c -ohbfsapi.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbfopen.c -ohbfopen.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbgete.c -ohbgete.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbwince.c -ohbwince.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbhash.c -ohbhash.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbstr.c -ohbstr.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbdate.c -ohbdate.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbtrace.c -ohbtrace.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbver.c -ohbver.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbverdsp.c -ohbverdsp.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbarch.c -ohbarch.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../reserved.c -oreserved.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../expropt1.c -oexpropt1.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../expropt2.c -oexpropt2.o
IF EXIST ../../../../lib/os2/gcc/hbcommon.a del /n
../../../../lib/os2/gcc/hbcommon.a
echo CREATE ../../../../lib/os2/gcc/hbcommon.a > __lib__.tmp
echo ADDMOD hbfhnd.o >> __lib__.tmp
echo ADDMOD hbfsapi.o >> __lib__.tmp
echo ADDMOD hbfopen.o >> __lib__.tmp
echo ADDMOD hbgete.o >> __lib__.tmp
echo ADDMOD hbwince.o >> __lib__.tmp
echo ADDMOD hbhash.o >> __lib__.tmp
echo ADDMOD hbstr.o >> __lib__.tmp
echo ADDMOD hbdate.o >> __lib__.tmp
echo ADDMOD hbtrace.o >> __lib__.tmp
echo ADDMOD hbver.o >> __lib__.tmp
echo ADDMOD hbverdsp.o >> __lib__.tmp
echo ADDMOD hbarch.o >> __lib__.tmp
echo ADDMOD reserved.o >> __lib__.tmp
echo ADDMOD expropt1.o >> __lib__.tmp
echo ADDMOD expropt2.o >> __lib__.tmp
echo SAVE >> __lib__.tmp
echo END >> __lib__.tmp
ar -M < __lib__.tmp & del /n __lib__.tmp
make[3]: Leaving directory `/harbour802/source/common/os2/gcc'
make[2]: Leaving directory `/harbour802/source/common'

[E:\harbour802\source]make -C pp first
make[2]: Entering directory `/harbour802/source/pp'
FOR %d IN (os2 os2\gcc) DO IF NOT EXIST %d md %d

[E:\harbour802\source\pp]IF NOT EXIST os2 md os2

[E:\harbour802\source\pp]IF NOT EXIST os2\gcc md os2\gcc
make[3]: Entering directory `/harbour802/source/pp/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbppgen.c -ohbppgen.o
gcc -W -Wall -DHB_OS_OS2 -O2 -o hbppgen.exe hbppgen.o
-L../../../../lib/os2/gcc    -lhbcommon -lsocket
make[3]: Leaving directory `/harbour802/source/pp/os2/gcc'
make[2]: Leaving directory `/harbour802/source/pp'

[E:\harbour802\source]make -C compiler first
make[2]: Entering directory `/harbour802/source/compiler'
FOR %d IN (os2 os2\gcc) DO IF NOT EXIST %d md %d

[E:\harbour802\source\compiler]IF NOT EXIST os2 md os2

[E:\harbour802\source\compiler]IF NOT EXIST os2\gcc md os2\gcc
make[3]: Entering directory `/harbour802/source/compiler/os2/gcc'
copy ..\..\harbour.yyc harboury.c
         1 file(s) copied.
copy ..\..\harbour.yyh harboury.h
         1 file(s) copied.
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c harboury.c -oharboury.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../cmdcheck.c -ocmdcheck.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../genc.c -ogenc.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../gencc.c -ogencc.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../gencobj.c -ogencobj.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../genhrb.c -ogenhrb.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../genobj32.c -ogenobj32.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbcmplib.c -ohbcmplib.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbcomp.c -ohbcomp.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbdbginf.c -ohbdbginf.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbfunchk.c -ohbfunchk.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbgenerr.c -ohbgenerr.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbpcode.c -ohbpcode.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbfix.c -ohbfix.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbdead.c -ohbdead.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hblbl.c -ohblbl.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbopt.c -ohbopt.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbstripl.c -ohbstripl.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbusage.c -ohbusage.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbident.c -ohbident.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../ppcomp.c -oppcomp.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../expropta.c -oexpropta.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../exproptb.c -oexproptb.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../complex.c -ocomplex.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../hbmain.c -ohbmain.o
IF EXIST ../../../../lib/os2/gcc/hbcplr.a del /n
../../../../lib/os2/gcc/hbcplr.a
echo CREATE ../../../../lib/os2/gcc/hbcplr.a > __lib__.tmp
echo ADDMOD harboury.o >> __lib__.tmp
echo ADDMOD cmdcheck.o >> __lib__.tmp
echo ADDMOD genc.o >> __lib__.tmp
echo ADDMOD gencc.o >> __lib__.tmp
echo ADDMOD gencobj.o >> __lib__.tmp
echo ADDMOD genhrb.o >> __lib__.tmp
echo ADDMOD genobj32.o >> __lib__.tmp
echo ADDMOD hbcmplib.o >> __lib__.tmp
echo ADDMOD hbcomp.o >> __lib__.tmp
echo ADDMOD hbdbginf.o >> __lib__.tmp
echo ADDMOD hbfunchk.o >> __lib__.tmp
echo ADDMOD hbgenerr.o >> __lib__.tmp
echo ADDMOD hbpcode.o >> __lib__.tmp
echo ADDMOD hbfix.o >> __lib__.tmp
echo ADDMOD hbdead.o >> __lib__.tmp
echo ADDMOD hblbl.o >> __lib__.tmp
echo ADDMOD hbopt.o >> __lib__.tmp
echo ADDMOD hbstripl.o >> __lib__.tmp
echo ADDMOD hbusage.o >> __lib__.tmp
echo ADDMOD hbident.o >> __lib__.tmp
echo ADDMOD ppcomp.o >> __lib__.tmp
echo ADDMOD expropta.o >> __lib__.tmp
echo ADDMOD exproptb.o >> __lib__.tmp
echo ADDMOD complex.o >> __lib__.tmp
echo ADDMOD hbmain.o >> __lib__.tmp
echo SAVE >> __lib__.tmp
echo END >> __lib__.tmp
ar -M < __lib__.tmp & del /n __lib__.tmp
make[3]: Leaving directory `/harbour802/source/compiler/os2/gcc'
make[2]: Leaving directory `/harbour802/source/compiler'

[E:\harbour802\source]make -C main first
make[2]: Entering directory `/harbour802/source/main'
FOR %d IN (os2 os2\gcc) DO IF NOT EXIST %d md %d

[E:\harbour802\source\main]IF NOT EXIST os2 md os2

[E:\harbour802\source\main]IF NOT EXIST os2\gcc md os2\gcc
make[3]: Entering directory `/harbour802/source/main/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-c ../../harbour.c -oharbour.o
gcc -W -Wall -DHB_OS_OS2 -O2 -o harbour.exe harbour.o
-L../../../../lib/os2/gcc    -lhbcplr  -lhbpp  -lhbcommon -lsocket
make[3]: Leaving directory `/harbour802/source/main/os2/gcc'
make[2]: Leaving directory `/harbour802/source/main'

[E:\harbour802\source]make -C rtl first
make[2]: Entering directory `/harbour802/source/rtl'
FOR %d IN (os2 os2\gcc) DO IF NOT EXIST %d md %d

[E:\harbour802\source\rtl]IF NOT EXIST os2 md os2

[E:\harbour802\source\rtl]IF NOT EXIST os2\gcc md os2\gcc
FOR %d IN (os2 os2\gcc ..\..\lib\os2 ..\..\lib\os2\gcc) DO IF NOT EXIST
%d md %d

[E:\harbour802\source\rtl]IF NOT EXIST os2 md os2

[E:\harbour802\source\rtl]IF NOT EXIST os2\gcc md os2\gcc

[E:\harbour802\source\rtl]IF NOT EXIST ..\..\lib\os2 md ..\..\lib\os2

[E:\harbour802\source\rtl]IF NOT EXIST ..\..\lib\os2\gcc md
..\..\lib\os2\gcc
make[3]: Entering directory `/harbour802/source/rtl/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-DHB_GT_LIB=os2  -c ../../abs.c -oabs.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-DHB_GT_LIB=os2  -c ../../accept.c -oaccept.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-DHB_GT_LIB=os2  -c ../../ampm.c -oampm.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-DHB_GT_LIB=os2  -c ../../at.c -oat.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-DHB_GT_LIB=os2  -c ../../binnum.c -obinnum.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-DHB_GT_LIB=os2  -c ../../binnumx.c -obinnumx.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-DHB_GT_LIB=os2  -c ../../box.c -obox.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-DHB_GT_LIB=os2  -c ../../cdpapi.c -ocdpapi.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-DHB_GT_LIB=os2  -c ../../chrasc.c -ochrasc.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2
-DHB_GT_LIB=os2  -c ../../colorind.c -ocolorind.o

From druzus at acn.waw.pl  Thu Feb  7 06:01:08 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Feb  7 06:01:16 2008
Subject: [Harbour] 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <35DBAB68-0616-4195-AC54-F86A8D6FEE73@syenar.hu>
References: <200802040832.m148WKBe006413@31-mo5-4.acn.waw.pl>
	<35DBAB68-0616-4195-AC54-F86A8D6FEE73@syenar.hu>
Message-ID: <20080207110108.GA8878@localhost.localdomain>

On Mon, 04 Feb 2008, Szak?ts Viktor wrote:
> Sorry but I don't find it normal that we're distributing
> header files from other packages. This can be quite unsafe,
> needs constant maintenance, gives the notion these are local
> file, and they get locally modified eventually (they in fact
> got modified in case of ADS), and last but not least it can
> be _illegal_ (for ADS it definitely is).

The only one unsafe thing was your recent modification in make system
which breaks whole GNU make builds in a day before expected release.
I saked you to make modification only if you can make it well and they
will work. After two weeks we still haven't resolved all problems
introduced by this modification. Meanwhile I lost half of my home
directory due to typo in modified make files. Only half because when
I'd seen error messages that make cannot remove:
   /boot, ... /etc, ... home/dominika, ...
I immediately break it. I lost whole xHarbour tree with a lot
of code which was never public and many other things. Fortunately
some libraries like extended DBRMAP or DBFNSX I had also on my
production machine but HBFLEX3 seems to be definitely lost :-(
I haven't answer immediately because I really want to kill you ;-)
People waiting for months with serious modification waiting for
end of release process and you are making such deep absolutely
untested modification which force to many other modifications
to resolve very minor problem which could be resolved by anyone
by simple file rename. In summary it was not big problem for me
but but the last minute fixes created incredible serious one.
I also asked you few times to not touch GTI_* defines and leave
it as is without HB_* prefix. I updated Harbour to compile with
strict ANSI mode, f.e. also changing ace.h - you remove it.
I added hbzlib and adsrdd to default builds because this are
vary important libraries for many users so they were included
in all official releases on all platforms even if packager did
not have some libraries installed, f.e. on some *nix systems
I do not have sufficient privileges to install any new devel
libraries but with header files in Harbour SVN directory I was
able to create full functional binaries. Similar situation is
is in cross build environments.
I know what will happen if sth will be changed in 3-rd party
code but:
1. authors of these two libraries intentionally keep binary
   compatibility for years to avoid such problems so in this
   case you haven't help any one but only created new problem
   by removing them.
2. when we finished release process then you can remove them.
   I will not be longer interested what will happen in the main
   branch because I plan to create new one only for development
   If you will find anything useful then you can borrow it to
   official branch.

And please also look for someone who will continue release process.
I'm afraid that I do not have more time for it. Now I have to restore
many things I lost which are important for me.

best regards,
Przemek
From dmacias at mail.udg.mx  Fri Feb  8 06:21:51 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Feb  7 06:22:16 2008
Subject: [Harbour] Re: 2008-02-06 11:08 UTC+0100 Marek Paliwoda (mpaliwoda
 at interia pl)
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47AC3B4F.8010604@mail.udg.mx>

Marek:

 >Funny, but after installing this build I had "moztools" directory
 >installed and "used" (I mean it was in PATH environment).

If I remember well, moztools are created in installation of eCS, but 
there are some updates. Surely Paul Smedley environment have it

 >Well, it seems you were using "standard" harbour's build system
 >centered around GNU Makefiles. I used an "alternative" build
 >system centered around common.mak (it also uses GNU make on some
 >platforms), which works in different way than "standard" build.
 >You called "make_gnu.sh", I called "make_gcc.sh".

So you took your own road  :-)
Yes I am using "standard" build based in GNU Makefiles

David Macias


From mpaliwoda at interia.pl  Thu Feb  7 06:30:31 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Thu Feb  7 06:30:47 2008
Subject: [Harbour] Re: 2008-02-06 11:08 UTC+0100 Marek Paliwoda (mpaliwoda
 at interia pl)
In-Reply-To: <47AAE2FA.3090203@mail.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
	<47AAE2FA.3090203@mail.udg.mx>
Message-ID: <foeq4p$l2o$1@ger.gmane.org>

David,

[...]

> - As seen, Marek changes does not touch this case

My changes are not related to "standard build system" at all.
They have not corrected anything related to your testings,
because they were dine in "an alternative build system".

[...]

> But seem Marek was building Harbour OK using make 3.81, so seem he have
> an different environment

Yes, but I use "make_gcc.sh", "not make_gnu.sh". That's the difference.

-- 

Marek

From dmacias at mail.udg.mx  Thu Feb  7 06:57:56 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Feb  7 06:57:54 2008
Subject: [Harbour] Re: 2008-02-07 11:24 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47AAF244.6050109@mail.udg.mx>

Przemek:

 >2008-02-07 11:24 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
 >  * harbour/config/os2/gcc.cf
 >    * use OS2_LIB_ARCH as library name to avoid problems with DEL
 >  * harbour/config/os2/global.cf
 >    * use double backslash characters - hack to test if it's sufficient
 >      workaround for problems mkdir on OS2

Tested

Directories are created, but with same problem as reported in previous 
message:
-------------------------------------
Please see CORRECTION section, perhaps you need to review your previous
changes (workaround for 'if')
lib\os2, lib\os2\gcc are created in a later point
...
CORRECTION (Przemek, do not miss this):
Directories are created, but just when build process reach (source\rtl),
so hbcommon, hbcplr can not be created due there are not directories yet
hbppgen.exe, harbour.exe can not be created as consequence
After this point, just a few libraries are created in lib\os2\gcc
Part of Make_gnu.log included below
-------------------------------------

David Macias


CMD.EXE /c FOR %d IN (doc include source utils contrib ) DO make -C %d first

[E:\harbour802]make -C doc first
make[1]: Entering directory `/harbour802/doc'
CMD.EXE /c FOR %d IN (en es ) DO make -C %d first

[E:\harbour802\doc]make -C en first
make[2]: Entering directory `/harbour802/doc/en'
make[2]: Nothing to be done for `first'.
make[2]: Leaving directory `/harbour802/doc/en'

[E:\harbour802\doc]make -C es first
make[2]: Entering directory `/harbour802/doc/es'
make[2]: Nothing to be done for `first'.
make[2]: Leaving directory `/harbour802/doc/es'
make[1]: Leaving directory `/harbour802/doc'

[E:\harbour802]make -C include first
make[1]: Entering directory `/harbour802/include'
make[1]: Nothing to be done for `first'.
make[1]: Leaving directory `/harbour802/include'

[E:\harbour802]make -C source first
make[1]: Entering directory `/harbour802/source'
CMD.EXE /c FOR %d IN (common pp compiler main rtl vm macro codepage lang 
rdd hbpcre debug ) DO make -C %d first

[E:\harbour802\source]make -C common first
make[2]: Entering directory `/harbour802/source/common'
FOR %d IN (os2 os2\\gcc) DO IF NOT EXIST %d md %d

[E:\harbour802\source\common]IF NOT EXIST os2 md os2

[E:\harbour802\source\common]IF NOT EXIST os2\\gcc md os2\\gcc
make[3]: Entering directory `/harbour802/source/common/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbfhnd.c -ohbfhnd.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbfsapi.c -ohbfsapi.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbfopen.c -ohbfopen.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbgete.c -ohbgete.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbwince.c -ohbwince.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbhash.c -ohbhash.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbstr.c -ohbstr.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbdate.c -ohbdate.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbtrace.c -ohbtrace.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbver.c -ohbver.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbverdsp.c -ohbverdsp.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbarch.c -ohbarch.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../reserved.c -oreserved.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../expropt1.c -oexpropt1.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../expropt2.c -oexpropt2.o
IF EXIST ..\\..\\..\\..\\lib\\os2\\gcc\\hbcommon.a del /n 
..\\..\\..\\..\\lib\\os2\\gcc\\hbcommon.a
echo CREATE ../../../../lib/os2/gcc/hbcommon.a > __lib__.tmp
echo ADDMOD hbfhnd.o >> __lib__.tmp
echo ADDMOD hbfsapi.o >> __lib__.tmp
echo ADDMOD hbfopen.o >> __lib__.tmp
echo ADDMOD hbgete.o >> __lib__.tmp
echo ADDMOD hbwince.o >> __lib__.tmp
echo ADDMOD hbhash.o >> __lib__.tmp
echo ADDMOD hbstr.o >> __lib__.tmp
echo ADDMOD hbdate.o >> __lib__.tmp
echo ADDMOD hbtrace.o >> __lib__.tmp
echo ADDMOD hbver.o >> __lib__.tmp
echo ADDMOD hbverdsp.o >> __lib__.tmp
echo ADDMOD hbarch.o >> __lib__.tmp
echo ADDMOD reserved.o >> __lib__.tmp
echo ADDMOD expropt1.o >> __lib__.tmp
echo ADDMOD expropt2.o >> __lib__.tmp
echo SAVE >> __lib__.tmp
echo END >> __lib__.tmp
ar -M < __lib__.tmp & del /n __lib__.tmp
make[3]: Leaving directory `/harbour802/source/common/os2/gcc'
make[2]: Leaving directory `/harbour802/source/common'

[E:\harbour802\source]make -C pp first
make[2]: Entering directory `/harbour802/source/pp'
FOR %d IN (os2 os2\\gcc) DO IF NOT EXIST %d md %d

[E:\harbour802\source\pp]IF NOT EXIST os2 md os2

[E:\harbour802\source\pp]IF NOT EXIST os2\\gcc md os2\\gcc
make[3]: Entering directory `/harbour802/source/pp/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbppgen.c -ohbppgen.o
gcc -W -Wall -DHB_OS_OS2 -O2 -o hbppgen.exe hbppgen.o 
-L../../../../lib/os2/gcc    -lhbcommon -lsocket
make[3]: Leaving directory `/harbour802/source/pp/os2/gcc'
make[2]: Leaving directory `/harbour802/source/pp'

[E:\harbour802\source]make -C compiler first
make[2]: Entering directory `/harbour802/source/compiler'
FOR %d IN (os2 os2\\gcc) DO IF NOT EXIST %d md %d

[E:\harbour802\source\compiler]IF NOT EXIST os2 md os2

[E:\harbour802\source\compiler]IF NOT EXIST os2\\gcc md os2\\gcc
make[3]: Entering directory `/harbour802/source/compiler/os2/gcc'
copy ..\..\harbour.yyc harboury.c
         1 file(s) copied.
copy ..\..\harbour.yyh harboury.h
         1 file(s) copied.
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c harboury.c -oharboury.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cmdcheck.c -ocmdcheck.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../genc.c -ogenc.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../gencc.c -ogencc.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../gencobj.c -ogencobj.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../genhrb.c -ogenhrb.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../genobj32.c -ogenobj32.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbcmplib.c -ohbcmplib.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbcomp.c -ohbcomp.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbdbginf.c -ohbdbginf.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbfunchk.c -ohbfunchk.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbgenerr.c -ohbgenerr.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbpcode.c -ohbpcode.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbfix.c -ohbfix.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbdead.c -ohbdead.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hblbl.c -ohblbl.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbopt.c -ohbopt.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbstripl.c -ohbstripl.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbusage.c -ohbusage.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbident.c -ohbident.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../ppcomp.c -oppcomp.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../expropta.c -oexpropta.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../exproptb.c -oexproptb.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../complex.c -ocomplex.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbmain.c -ohbmain.o
IF EXIST ..\\..\\..\\..\\lib\\os2\\gcc\\hbcplr.a del /n 
..\\..\\..\\..\\lib\\os2\\gcc\\hbcplr.a
echo CREATE ../../../../lib/os2/gcc/hbcplr.a > __lib__.tmp
echo ADDMOD harboury.o >> __lib__.tmp
echo ADDMOD cmdcheck.o >> __lib__.tmp
echo ADDMOD genc.o >> __lib__.tmp
echo ADDMOD gencc.o >> __lib__.tmp
echo ADDMOD gencobj.o >> __lib__.tmp
echo ADDMOD genhrb.o >> __lib__.tmp
echo ADDMOD genobj32.o >> __lib__.tmp
echo ADDMOD hbcmplib.o >> __lib__.tmp
echo ADDMOD hbcomp.o >> __lib__.tmp
echo ADDMOD hbdbginf.o >> __lib__.tmp
echo ADDMOD hbfunchk.o >> __lib__.tmp
echo ADDMOD hbgenerr.o >> __lib__.tmp
echo ADDMOD hbpcode.o >> __lib__.tmp
echo ADDMOD hbfix.o >> __lib__.tmp
echo ADDMOD hbdead.o >> __lib__.tmp
echo ADDMOD hblbl.o >> __lib__.tmp
echo ADDMOD hbopt.o >> __lib__.tmp
echo ADDMOD hbstripl.o >> __lib__.tmp
echo ADDMOD hbusage.o >> __lib__.tmp
echo ADDMOD hbident.o >> __lib__.tmp
echo ADDMOD ppcomp.o >> __lib__.tmp
echo ADDMOD expropta.o >> __lib__.tmp
echo ADDMOD exproptb.o >> __lib__.tmp
echo ADDMOD complex.o >> __lib__.tmp
echo ADDMOD hbmain.o >> __lib__.tmp
echo SAVE >> __lib__.tmp
echo END >> __lib__.tmp
ar -M < __lib__.tmp & del /n __lib__.tmp
make[3]: Leaving directory `/harbour802/source/compiler/os2/gcc'
make[2]: Leaving directory `/harbour802/source/compiler'

[E:\harbour802\source]make -C main first
make[2]: Entering directory `/harbour802/source/main'
FOR %d IN (os2 os2\\gcc) DO IF NOT EXIST %d md %d

[E:\harbour802\source\main]IF NOT EXIST os2 md os2

[E:\harbour802\source\main]IF NOT EXIST os2\\gcc md os2\\gcc
make[3]: Entering directory `/harbour802/source/main/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../harbour.c -oharbour.o
gcc -W -Wall -DHB_OS_OS2 -O2 -o harbour.exe harbour.o 
-L../../../../lib/os2/gcc    -lhbcplr  -lhbpp  -lhbcommon -lsocket
make[3]: Leaving directory `/harbour802/source/main/os2/gcc'
make[2]: Leaving directory `/harbour802/source/main'

[E:\harbour802\source]make -C rtl first
make[2]: Entering directory `/harbour802/source/rtl'
FOR %d IN (os2 os2\\gcc) DO IF NOT EXIST %d md %d

[E:\harbour802\source\rtl]IF NOT EXIST os2 md os2

[E:\harbour802\source\rtl]IF NOT EXIST os2\\gcc md os2\\gcc
FOR %d IN (os2 os2\\gcc ..\\..\\lib\\os2 ..\\..\\lib\\os2\\gcc) DO IF 
NOT EXIST %d md %d

[E:\harbour802\source\rtl]IF NOT EXIST os2 md os2

[E:\harbour802\source\rtl]IF NOT EXIST os2\\gcc md os2\\gcc

[E:\harbour802\source\rtl]IF NOT EXIST ..\\..\\lib\\os2 md ..\\..\\lib\\os2

[E:\harbour802\source\rtl]IF NOT EXIST ..\\..\\lib\\os2\\gcc md 
..\\..\\lib\\os2\\gcc
make[3]: Entering directory `/harbour802/source/rtl/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../abs.c -oabs.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../accept.c -oaccept.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../ampm.c -oampm.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../at.c -oat.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../binnum.c -obinnum.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../binnumx.c -obinnumx.o
From harbour.01 at syenar.hu  Thu Feb  7 07:04:57 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Feb  7 07:04:39 2008
Subject: [Harbour] 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080207110108.GA8878@localhost.localdomain>
References: <200802040832.m148WKBe006413@31-mo5-4.acn.waw.pl>
	<35DBAB68-0616-4195-AC54-F86A8D6FEE73@syenar.hu>
	<20080207110108.GA8878@localhost.localdomain>
Message-ID: <4DD5C09A-9D28-4312-9772-CD1AA4001A13@syenar.hu>

>>

Hi Przemek,

Before I read through your mail, let me note this is group
work, and while I'm familiar with some parts of it, I'm
not with some others, and no such implications (namely
the tie in between lib name and dir name in core) were
visible (or noticed by anyone), before the fact. I don't
think killing anyone would solve anything, but before you
jump to my throat notice that I haven't touched any central
GNU make (.cf) files, _only_ 'Makefile's LIBNAME line.
I doubt the file loss was the result of that.

I'm sorry if the whole process resulted in file losses
for you :( Unfortunately bumps are expected, even if I
find it odd that our make system can be such a dangerous
beast.

I had actually expected (but definitely hoped) you to take
part in this rename process because of your different
environment and skills, especially after you've agreed
and even gave input to it.

About a "simple file rename" I don't know what you
meant, but if you had exposed this idea _before_
or _when_ we've been discussing the rename stuff,
maybe could have a better solution.

About GTI_ and HB_GTI. GTI_ violates one important
rule and nothing was removed, so either on C and
Harbour level everyone can still use GTI_, despite it
being an xhb compatibility set of #defines imported
to Harbour. So the path is there for the Harbour compliant
way, yet no one suffers from any drawbacks. Where do you
see a problem?

>> Sorry but I don't find it normal that we're distributing
>> header files from other packages. This can be quite unsafe,
>> needs constant maintenance, gives the notion these are local
>> file, and they get locally modified eventually (they in fact
>> got modified in case of ADS), and last but not least it can
>> be _illegal_ (for ADS it definitely is).
>
> The only one unsafe thing was your recent modification in make system
> which breaks whole GNU make builds in a day before expected release.
> I saked you to make modification only if you can make it well and they
> will work. After two weeks we still haven't resolved all problems
> introduced by this modification. Meanwhile I lost half of my home
> directory due to typo in modified make files. Only half because when
> I'd seen error messages that make cannot remove:
>   /boot, ... /etc, ... home/dominika, ...
> I immediately break it. I lost whole xHarbour tree with a lot
> of code which was never public and many other things. Fortunately
> some libraries like extended DBRMAP or DBFNSX I had also on my
> production machine but HBFLEX3 seems to be definitely lost :-(
> I haven't answer immediately because I really want to kill you ;-)
> People waiting for months with serious modification waiting for
> end of release process and you are making such deep absolutely
> untested modification which force to many other modifications
> to resolve very minor problem which could be resolved by anyone
> by simple file rename. In summary it was not big problem for me
> but but the last minute fixes created incredible serious one.
> I also asked you few times to not touch GTI_* defines and leave
> it as is without HB_* prefix. I updated Harbour to compile with
> strict ANSI mode, f.e. also changing ace.h - you remove it.
> I added hbzlib and adsrdd to default builds because this are
> vary important libraries for many users so they were included
> in all official releases on all platforms even if packager did
> not have some libraries installed, f.e. on some *nix systems
> I do not have sufficient privileges to install any new devel
> libraries but with header files in Harbour SVN directory I was
> able to create full functional binaries. Similar situation is
> is in cross build environments.
> I know what will happen if sth will be changed in 3-rd party
> code but:
> 1. authors of these two libraries intentionally keep binary
>   compatibility for years to avoid such problems so in this
>   case you haven't help any one but only created new problem
>   by removing them.

It's still not legal, and it still raises some other concerns,
and binary compatibility is by far not guaranteed, what happens
with the new functions added to ADS8 .h file, when someone is
using an ACE6 .dll with it? What happens when someone is passing
a non valid (later introduced) #define with an existing function?

If someone wants to create a release (which supposes some
familiarity with both Harbour and it's contribs and make
systems), is it a very high expectation to set a few envvars
and to have these two packages installed?

You still haven't answered what are the "serious problems"
these "missing" headers can cause. I'd really like to see them :(

> 2. when we finished release process then you can remove them.
>   I will not be longer interested what will happen in the main
>   branch because I plan to create new one only for development
>   If you will find anything useful then you can borrow it to
>   official branch.

I'm not exactly sure what do you mean by that? An internal fork?

> And please also look for someone who will continue release process.
> I'm afraid that I do not have more time for it. Now I have to restore
> many things I lost which are important for me.

:(

I feel our GNU make system is flawed or overcomplicated if it can
cause such things.

Brgds,
Viktor

From dmacias at mail.udg.mx  Thu Feb  7 05:41:29 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Feb  7 08:53:33 2008
Subject: [Harbour] Re: 2008-02-06 11:08 UTC+0100 Marek Paliwoda (mpaliwoda
 at interia pl)
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47AAE059.3060606@mail.udg.mx>

Maurilio:

 >That said, I think that your problems come from the use of a build >system
 >which is not uptodate.

 >You can, but I fear you have different problems, look at xharbour OS/2 
 >.cf
 >files which work ok.

Harbour under OS/2 was building fine until some days ago, but now it is 
failing. Here is an relation:

- Harbour was changed to create libraries under 
harbour\lib\"platform"\"compiler"
- It uses expression like "..\..\lib\os2", "..\..\lib\os2\gcc"
- GNU Make version 3.76.1 does not recognize/support "..\..\" and does 
not create required directories. Perhaps is expanding "\."
Similar problem was seen with "\*"
- Przemek changed to use:
         $(if $(OS2_LIB_ARCH),-CMD.EXE /c IF EXIST $(OS2_LIB_ARCH) $(RM)
$(OS2_LIB_ARCH),)
but Make 3.76.1 does not support 'if', and does not create required 
directories
- Przemek changed to include an workaround for 'if': but again does not 
create required directories

CORRECTION (Przemek, do not miss this):
Directories are created, but just when build process reach (source\rtl), 
so hbcommon, hbcplr can not be created due there are not directories yet
hbppgen.exe, harbour.exe can not be created as consequence
After this point, just a few libraries are created in lib\os2\gcc
Part of Make_gnu.log included below

- As seen, Marek changes does not touch this case

Harbour build OK using make 3.76.1 if lib\os2, lib\os2\gcc directories 
are created manually previously

Trying with make.exe 3.81beta1, 3.81r2:
- They support "\..\.." and 'if" and both create required directories 
properly
- They DO NOT build anything in any directory
Here are part of messages with both:

Messages on screen: --------------------
[E:\harbour802]make -r           1>make_gnu.log
../../Makefile:28: ../../config/lib.cf: No such file or directory
make[3]: *** No rule to make target `../../config/lib.cf'.  Stop.
make[2]: *** [descend] Error 2
--------------------

Part of make_gnu.log ------------------
[E:\harbour802\source]make -C common first
make[2]: Entering directory `E:/harbour802/source/common'
CMD.EXE /c IF NOT EXIST os2 md os2
CMD.EXE /c IF NOT EXIST os2\gcc    md os2\gcc
CMD.EXE /c IF NOT EXIST ..\..\lib\os2    md ..\..\lib\os2
CMD.EXE /c IF NOT EXIST ..\..\lib\os2\gcc     md ..\..\lib\os2\gcc
make[3]: Entering directory `E:/harbour802/source/common/os2/gcc'
make[3]: Leaving directory `E:/harbour802/source/common/os2/gcc'
make[2]: Leaving directory `E:/harbour802/source/common'
------------------------------------

But seem Marek was building Harbour OK using make 3.81, so seem he have 
an different environment

As you can see, Harbour build face a problem with "make" versions and 
their capabilities

David Macias



CMD.EXE /c FOR %d IN (doc include source utils contrib ) DO make -C %d first

[E:\harbour802]make -C doc first
make[1]: Entering directory `/harbour802/doc'
CMD.EXE /c FOR %d IN (en es ) DO make -C %d first

[E:\harbour802\doc]make -C en first
make[2]: Entering directory `/harbour802/doc/en'
make[2]: Nothing to be done for `first'.
make[2]: Leaving directory `/harbour802/doc/en'

[E:\harbour802\doc]make -C es first
make[2]: Entering directory `/harbour802/doc/es'
make[2]: Nothing to be done for `first'.
make[2]: Leaving directory `/harbour802/doc/es'
make[1]: Leaving directory `/harbour802/doc'

[E:\harbour802]make -C include first
make[1]: Entering directory `/harbour802/include'
make[1]: Nothing to be done for `first'.
make[1]: Leaving directory `/harbour802/include'

[E:\harbour802]make -C source first
make[1]: Entering directory `/harbour802/source'
CMD.EXE /c FOR %d IN (common pp compiler main rtl vm macro codepage lang 
rdd hbpcre debug ) DO make -C %d first

[E:\harbour802\source]make -C common first
make[2]: Entering directory `/harbour802/source/common'
FOR %d IN (os2 os2\gcc) DO IF NOT EXIST %d md %d

[E:\harbour802\source\common]IF NOT EXIST os2 md os2

[E:\harbour802\source\common]IF NOT EXIST os2\gcc md os2\gcc
make[3]: Entering directory `/harbour802/source/common/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbfhnd.c -ohbfhnd.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbfsapi.c -ohbfsapi.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbfopen.c -ohbfopen.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbgete.c -ohbgete.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbwince.c -ohbwince.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbhash.c -ohbhash.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbstr.c -ohbstr.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbdate.c -ohbdate.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbtrace.c -ohbtrace.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbver.c -ohbver.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbverdsp.c -ohbverdsp.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbarch.c -ohbarch.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../reserved.c -oreserved.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../expropt1.c -oexpropt1.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../expropt2.c -oexpropt2.o
IF EXIST ../../../../lib/os2/gcc/hbcommon.a del /n 
../../../../lib/os2/gcc/hbcommon.a
echo CREATE ../../../../lib/os2/gcc/hbcommon.a > __lib__.tmp
echo ADDMOD hbfhnd.o >> __lib__.tmp
echo ADDMOD hbfsapi.o >> __lib__.tmp
echo ADDMOD hbfopen.o >> __lib__.tmp
echo ADDMOD hbgete.o >> __lib__.tmp
echo ADDMOD hbwince.o >> __lib__.tmp
echo ADDMOD hbhash.o >> __lib__.tmp
echo ADDMOD hbstr.o >> __lib__.tmp
echo ADDMOD hbdate.o >> __lib__.tmp
echo ADDMOD hbtrace.o >> __lib__.tmp
echo ADDMOD hbver.o >> __lib__.tmp
echo ADDMOD hbverdsp.o >> __lib__.tmp
echo ADDMOD hbarch.o >> __lib__.tmp
echo ADDMOD reserved.o >> __lib__.tmp
echo ADDMOD expropt1.o >> __lib__.tmp
echo ADDMOD expropt2.o >> __lib__.tmp
echo SAVE >> __lib__.tmp
echo END >> __lib__.tmp
ar -M < __lib__.tmp & del /n __lib__.tmp
make[3]: Leaving directory `/harbour802/source/common/os2/gcc'
make[2]: Leaving directory `/harbour802/source/common'

[E:\harbour802\source]make -C pp first
make[2]: Entering directory `/harbour802/source/pp'
FOR %d IN (os2 os2\gcc) DO IF NOT EXIST %d md %d

[E:\harbour802\source\pp]IF NOT EXIST os2 md os2

[E:\harbour802\source\pp]IF NOT EXIST os2\gcc md os2\gcc
make[3]: Entering directory `/harbour802/source/pp/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbppgen.c -ohbppgen.o
gcc -W -Wall -DHB_OS_OS2 -O2 -o hbppgen.exe hbppgen.o 
-L../../../../lib/os2/gcc    -lhbcommon -lsocket
make[3]: Leaving directory `/harbour802/source/pp/os2/gcc'
make[2]: Leaving directory `/harbour802/source/pp'

[E:\harbour802\source]make -C compiler first
make[2]: Entering directory `/harbour802/source/compiler'
FOR %d IN (os2 os2\gcc) DO IF NOT EXIST %d md %d

[E:\harbour802\source\compiler]IF NOT EXIST os2 md os2

[E:\harbour802\source\compiler]IF NOT EXIST os2\gcc md os2\gcc
make[3]: Entering directory `/harbour802/source/compiler/os2/gcc'
copy ..\..\harbour.yyc harboury.c
         1 file(s) copied.
copy ..\..\harbour.yyh harboury.h
         1 file(s) copied.
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c harboury.c -oharboury.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cmdcheck.c -ocmdcheck.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../genc.c -ogenc.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../gencc.c -ogencc.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../gencobj.c -ogencobj.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../genhrb.c -ogenhrb.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../genobj32.c -ogenobj32.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbcmplib.c -ohbcmplib.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbcomp.c -ohbcomp.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbdbginf.c -ohbdbginf.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbfunchk.c -ohbfunchk.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbgenerr.c -ohbgenerr.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbpcode.c -ohbpcode.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbfix.c -ohbfix.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbdead.c -ohbdead.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hblbl.c -ohblbl.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbopt.c -ohbopt.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbstripl.c -ohbstripl.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbusage.c -ohbusage.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbident.c -ohbident.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../ppcomp.c -oppcomp.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../expropta.c -oexpropta.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../exproptb.c -oexproptb.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../complex.c -ocomplex.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbmain.c -ohbmain.o
IF EXIST ../../../../lib/os2/gcc/hbcplr.a del /n 
../../../../lib/os2/gcc/hbcplr.a
echo CREATE ../../../../lib/os2/gcc/hbcplr.a > __lib__.tmp
echo ADDMOD harboury.o >> __lib__.tmp
echo ADDMOD cmdcheck.o >> __lib__.tmp
echo ADDMOD genc.o >> __lib__.tmp
echo ADDMOD gencc.o >> __lib__.tmp
echo ADDMOD gencobj.o >> __lib__.tmp
echo ADDMOD genhrb.o >> __lib__.tmp
echo ADDMOD genobj32.o >> __lib__.tmp
echo ADDMOD hbcmplib.o >> __lib__.tmp
echo ADDMOD hbcomp.o >> __lib__.tmp
echo ADDMOD hbdbginf.o >> __lib__.tmp
echo ADDMOD hbfunchk.o >> __lib__.tmp
echo ADDMOD hbgenerr.o >> __lib__.tmp
echo ADDMOD hbpcode.o >> __lib__.tmp
echo ADDMOD hbfix.o >> __lib__.tmp
echo ADDMOD hbdead.o >> __lib__.tmp
echo ADDMOD hblbl.o >> __lib__.tmp
echo ADDMOD hbopt.o >> __lib__.tmp
echo ADDMOD hbstripl.o >> __lib__.tmp
echo ADDMOD hbusage.o >> __lib__.tmp
echo ADDMOD hbident.o >> __lib__.tmp
echo ADDMOD ppcomp.o >> __lib__.tmp
echo ADDMOD expropta.o >> __lib__.tmp
echo ADDMOD exproptb.o >> __lib__.tmp
echo ADDMOD complex.o >> __lib__.tmp
echo ADDMOD hbmain.o >> __lib__.tmp
echo SAVE >> __lib__.tmp
echo END >> __lib__.tmp
ar -M < __lib__.tmp & del /n __lib__.tmp
make[3]: Leaving directory `/harbour802/source/compiler/os2/gcc'
make[2]: Leaving directory `/harbour802/source/compiler'

[E:\harbour802\source]make -C main first
make[2]: Entering directory `/harbour802/source/main'
FOR %d IN (os2 os2\gcc) DO IF NOT EXIST %d md %d

[E:\harbour802\source\main]IF NOT EXIST os2 md os2

[E:\harbour802\source\main]IF NOT EXIST os2\gcc md os2\gcc
make[3]: Entering directory `/harbour802/source/main/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../harbour.c -oharbour.o
gcc -W -Wall -DHB_OS_OS2 -O2 -o harbour.exe harbour.o 
-L../../../../lib/os2/gcc    -lhbcplr  -lhbpp  -lhbcommon -lsocket
make[3]: Leaving directory `/harbour802/source/main/os2/gcc'
make[2]: Leaving directory `/harbour802/source/main'

[E:\harbour802\source]make -C rtl first
make[2]: Entering directory `/harbour802/source/rtl'
FOR %d IN (os2 os2\gcc) DO IF NOT EXIST %d md %d

[E:\harbour802\source\rtl]IF NOT EXIST os2 md os2

[E:\harbour802\source\rtl]IF NOT EXIST os2\gcc md os2\gcc
FOR %d IN (os2 os2\gcc ..\..\lib\os2 ..\..\lib\os2\gcc) DO IF NOT EXIST 
%d md %d

[E:\harbour802\source\rtl]IF NOT EXIST os2 md os2

[E:\harbour802\source\rtl]IF NOT EXIST os2\gcc md os2\gcc

[E:\harbour802\source\rtl]IF NOT EXIST ..\..\lib\os2 md ..\..\lib\os2

[E:\harbour802\source\rtl]IF NOT EXIST ..\..\lib\os2\gcc md 
..\..\lib\os2\gcc
make[3]: Entering directory `/harbour802/source/rtl/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../abs.c -oabs.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../accept.c -oaccept.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../ampm.c -oampm.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../at.c -oat.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../binnum.c -obinnum.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../binnumx.c -obinnumx.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../box.c -obox.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../cdpapi.c -ocdpapi.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../chrasc.c -ochrasc.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../colorind.c -ocolorind.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../console.c -oconsole.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../copyfile.c -ocopyfile.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../datec.c -odatec.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../dates.c -odates.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../dateshb.c -odateshb.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../datesx.c -odatesx.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../defpath.c -odefpath.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../descend.c -odescend.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../dirdrive.c -odirdrive.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../direct.c -odirect.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../diskspac.c -odiskspac.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../disksphb.c -odisksphb.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../do.c -odo.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../empty.c -oempty.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../errorapi.c -oerrorapi.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../errorint.c -oerrorint.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../file.c -ofile.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../filehb.c -ofilehb.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../filesys.c -ofilesys.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../fkmax.c -ofkmax.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../fnsplit.c -ofnsplit.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../fserror.c -ofserror.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../fssize.c -ofssize.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../fstemp.c -ofstemp.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../gete.c -ogete.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../gt.c -ogt.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../gtapi.c -ogtapi.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../gtchrmap.c -ogtchrmap.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../gtclip.c -ogtclip.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../gtfunc.c -ogtfunc.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../gtkbstat.c -ogtkbstat.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../gtkeycod.c -ogtkeycod.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../gtsys.c -ogtsys.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../gttone.c -ogttone.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../gx.c -ogx.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../hardcr.c -ohardcr.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../hbadler.c -ohbadler.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../hbbit.c -ohbbit.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../hbcrc.c -ohbcrc.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../hbhex.c -ohbhex.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../hbmd5.c -ohbmd5.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../hbffind.c -ohbffind.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../hbfile.c -ohbfile.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../hbgtcore.c -ohbgtcore.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../hbinet.c -ohbinet.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../hbstrsh.c -ohbstrsh.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../hbrandom.c -ohbrandom.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../hbregex.c -ohbregex.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../hbregexc.c -ohbregexc.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../hbtoken.c -ohbtoken.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../idle.c -oidle.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../inkey.c -oinkey.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../inkeyapi.c -oinkeyapi.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../is.c -ois.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../isprint.c -oisprint.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../itemseri.c -oitemseri.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../langapi.c -olangapi.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../left.c -oleft.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../len.c -olen.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../lennum.c -olennum.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../math.c -omath.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../maxrow.c -omaxrow.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../memofile.c -omemofile.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../minmax.c -ominmax.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../mlcfunc.c -omlcfunc.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../mod.c -omod.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../mouse53.c -omouse53.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../mouseapi.c -omouseapi.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../mousex.c -omousex.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../mtran.c -omtran.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../natmsg.c -onatmsg.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../natmsgu.c -onatmsgu.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../net.c -onet.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../oemansi.c -ooemansi.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../oemansix.c -ooemansix.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../oldbox.c -ooldbox.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../oldclear.c -ooldclear.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../pad.c -opad.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../padc.c -opadc.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../padl.c -opadl.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../padr.c -opadr.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../philes.c -ophiles.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../philes53.c -ophiles53.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../philesx.c -ophilesx.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../rat.c -orat.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../replic.c -oreplic.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../right.c -oright.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../round.c -oround.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../run.c -orun.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../samples.c -osamples.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../saverest.c -osaverest.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../scroll.c -oscroll.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../secondfs.c -osecondfs.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../seconds.c -oseconds.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../set.c -oset.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../setcolor.c -osetcolor.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../setcurs.c -osetcurs.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../setkey.c -osetkey.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../setpos.c -osetpos.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../setposbs.c -osetposbs.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../shadow.c -oshadow.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../soundex.c -osoundex.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../space.c -ospace.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../spfiles.c -ospfiles.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../str.c -ostr.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../strcase.c -ostrcase.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../strings.c -ostrings.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../strmatch.c -ostrmatch.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../strpeek.c -ostrpeek.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../strtran.c -ostrtran.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../strzero.c -ostrzero.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../stuff.c -ostuff.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../substr.c -osubstr.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../tone.c -otone.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../trace.c -otrace.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../transfrm.c -otransfrm.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../trim.c -otrim.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../tscalara.c -otscalara.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../tscalarb.c -otscalarb.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../tscalarc.c -otscalarc.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../tscalard.c -otscalard.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../tscalarh.c -otscalarh.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../tscalarl.c -otscalarl.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../tscalarn.c -otscalarn.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../tscalarp.c -otscalarp.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../tscalars.c -otscalars.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../tscalaru.c -otscalaru.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../type.c -otype.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../val.c -oval.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../valtostr.c -ovaltostr.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../valtype.c -ovaltype.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../version.c -oversion.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../word.c -oword.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../xhelp.c -oxhelp.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-DHB_GT_LIB=os2  -c ../../xsavescr.c -oxsavescr.o
../../../../source/main/os2/gcc/harbour.exe ../../achoice.prg  -n -q0 
-w2 -es2 -gc0 -kM -I../../ -I../../../../include
make[3]: Leaving directory `/harbour802/source/rtl/os2/gcc'
make[2]: Leaving directory `/harbour802/source/rtl'

[E:\harbour802\source]make -C vm first
make[2]: Entering directory `/harbour802/source/vm'
FOR %d IN (os2 os2\gcc) DO IF NOT EXIST %d md %d

[E:\harbour802\source\vm]IF NOT EXIST os2 md os2

[E:\harbour802\source\vm]IF NOT EXIST os2\gcc md os2\gcc
make[3]: Entering directory `/harbour802/source/vm/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../arrays.c -oarrays.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../arrayshb.c -oarrayshb.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../asort.c -oasort.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../break.c -obreak.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../classes.c -oclasses.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cmdarg.c -ocmdarg.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../debug.c -odebug.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../dynlibhb.c -odynlibhb.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../dynsym.c -odynsym.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../codebloc.c -ocodebloc.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../estack.c -oestack.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../eval.c -oeval.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../evalhb.c -oevalhb.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../extend.c -oextend.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../fm.c -ofm.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../garbage.c -ogarbage.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hashes.c -ohashes.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hashfunc.c -ohashfunc.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hvm.c -ohvm.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../initexit.c -oinitexit.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../initsymb.c -oinitsymb.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../itemapi.c -oitemapi.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../macro.c -omacro.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../mainstd.c -omainstd.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../mainpm.c -omainpm.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../memvars.c -omemvars.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../memvclip.c -omemvclip.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../pcount.c -opcount.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../proc.c -oproc.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../pvalue.c -opvalue.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../runner.c -orunner.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../vm.c -ovm.o
../../../../source/main/os2/gcc/harbour.exe ../../harbinit.prg  -n -q0 
-w2 -es2 -gc0 -kM -I../../ -I../../../../include
make[3]: Leaving directory `/harbour802/source/vm/os2/gcc'
make[2]: Leaving directory `/harbour802/source/vm'

[E:\harbour802\source]make -C macro first
make[2]: Entering directory `/harbour802/source/macro'
FOR %d IN (os2 os2\gcc) DO IF NOT EXIST %d md %d

[E:\harbour802\source\macro]IF NOT EXIST os2 md os2

[E:\harbour802\source\macro]IF NOT EXIST os2\gcc md os2\gcc
make[3]: Entering directory `/harbour802/source/macro/os2/gcc'
copy ..\..\macro.yyc macroy.c
         1 file(s) copied.
copy ..\..\macro.yyh macroy.h
         1 file(s) copied.
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c macroy.c -omacroy.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../macroa.c -omacroa.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../macrob.c -omacrob.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../macrolex.c -omacrolex.o
IF EXIST ../../../../lib/os2/gcc/hbmacro.a del /n 
../../../../lib/os2/gcc/hbmacro.a
echo CREATE ../../../../lib/os2/gcc/hbmacro.a > __lib__.tmp
echo ADDMOD macroy.o >> __lib__.tmp
echo ADDMOD macroa.o >> __lib__.tmp
echo ADDMOD macrob.o >> __lib__.tmp
echo ADDMOD macrolex.o >> __lib__.tmp
echo SAVE >> __lib__.tmp
echo END >> __lib__.tmp
ar -M < __lib__.tmp & del /n __lib__.tmp
make[3]: Leaving directory `/harbour802/source/macro/os2/gcc'
make[2]: Leaving directory `/harbour802/source/macro'

[E:\harbour802\source]make -C codepage first
make[2]: Entering directory `/harbour802/source/codepage'
FOR %d IN (os2 os2\gcc) DO IF NOT EXIST %d md %d

[E:\harbour802\source\codepage]IF NOT EXIST os2 md os2

[E:\harbour802\source\codepage]IF NOT EXIST os2\gcc md os2\gcc
make[3]: Entering directory `/harbour802/source/codepage/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpbg866.c -ocpbg866.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpbgiso.c -ocpbgiso.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpbgmik.c -ocpbgmik.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpbgwin.c -ocpbgwin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpcs852.c -ocpcs852.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpcsiso.c -ocpcsiso.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpcskam.c -ocpcskam.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpcswin.c -ocpcswin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpde850.c -ocpde850.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpdeiso.c -ocpdeiso.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpdewin.c -ocpdewin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpel737.c -ocpel737.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpelwin.c -ocpelwin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpes850.c -ocpes850.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpeswin.c -ocpeswin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpesmwin.c -ocpesmwin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpfr850.c -ocpfr850.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cphr1250.c -ocphr1250.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cphr437.c -ocphr437.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cphr852.c -ocphr852.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cphu852.c -ocphu852.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cphu852s.c -ocphu852s.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cphuiso.c -ocphuiso.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cphuisos.c -ocphuisos.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cphuwin.c -ocphuwin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cphuwins.c -ocphuwins.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpit437.c -ocpit437.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpit850.c -ocpit850.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpitisb.c -ocpitisb.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpitiso.c -ocpitiso.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpltwin.c -ocpltwin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cppl852.c -ocppl852.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cppliso.c -ocppliso.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpplmaz.c -ocpplmaz.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpplwin.c -ocpplwin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cppt850.c -ocppt850.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpptiso.c -ocpptiso.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpru866.c -ocpru866.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpruiso.c -ocpruiso.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cprukoi.c -ocprukoi.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpruwin.c -ocpruwin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpsk852.c -ocpsk852.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpskiso.c -ocpskiso.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpskkam.c -ocpskkam.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpskwin.c -ocpskwin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpsl437.c -ocpsl437.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpsl852.c -ocpsl852.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpsliso.c -ocpsliso.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpslwin.c -ocpslwin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpsrwin.c -ocpsrwin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpsv850.c -ocpsv850.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpsvclip.c -ocpsvclip.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpsvwin.c -ocpsvwin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cptr857.c -ocptr857.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cptrwin.c -ocptrwin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpua866.c -ocpua866.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpuakoi.c -ocpuakoi.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../cpuawin.c -ocpuawin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../uc1250.c -ouc1250.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../uc1251.c -ouc1251.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../uc1252.c -ouc1252.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../uc1253.c -ouc1253.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../uc1254.c -ouc1254.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../uc1257.c -ouc1257.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../uc737.c -ouc737.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../uc850.c -ouc850.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../uc852.c -ouc852.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../uc857.c -ouc857.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../uc866.c -ouc866.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../uc8859_1.c -ouc8859_1.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../uc88591b.c -ouc88591b.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../uc8859_2.c -ouc8859_2.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../uc8859_5.c -ouc8859_5.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../uckam.c -ouckam.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../uckoi8.c -ouckoi8.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../uckoi8u.c -ouckoi8u.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../ucmaz.c -oucmaz.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../ucmik.c -oucmik.o
IF EXIST ../../../../lib/os2/gcc/hbcpage.a del /n 
../../../../lib/os2/gcc/hbcpage.a
echo CREATE ../../../../lib/os2/gcc/hbcpage.a > __lib__.tmp
echo ADDMOD cpbg866.o >> __lib__.tmp
echo ADDMOD cpbgiso.o >> __lib__.tmp
echo ADDMOD cpbgmik.o >> __lib__.tmp
echo ADDMOD cpbgwin.o >> __lib__.tmp
echo ADDMOD cpcs852.o >> __lib__.tmp
echo ADDMOD cpcsiso.o >> __lib__.tmp
echo ADDMOD cpcskam.o >> __lib__.tmp
echo ADDMOD cpcswin.o >> __lib__.tmp
echo ADDMOD cpde850.o >> __lib__.tmp
echo ADDMOD cpdeiso.o >> __lib__.tmp
echo ADDMOD cpdewin.o >> __lib__.tmp
echo ADDMOD cpel737.o >> __lib__.tmp
echo ADDMOD cpelwin.o >> __lib__.tmp
echo ADDMOD cpes850.o >> __lib__.tmp
echo ADDMOD cpeswin.o >> __lib__.tmp
echo ADDMOD cpesmwin.o >> __lib__.tmp
echo ADDMOD cpfr850.o >> __lib__.tmp
echo ADDMOD cphr1250.o >> __lib__.tmp
echo ADDMOD cphr437.o >> __lib__.tmp
echo ADDMOD cphr852.o >> __lib__.tmp
echo ADDMOD cphu852.o >> __lib__.tmp
echo ADDMOD cphu852s.o >> __lib__.tmp
echo ADDMOD cphuiso.o >> __lib__.tmp
echo ADDMOD cphuisos.o >> __lib__.tmp
echo ADDMOD cphuwin.o >> __lib__.tmp
echo ADDMOD cphuwins.o >> __lib__.tmp
echo ADDMOD cpit437.o >> __lib__.tmp
echo ADDMOD cpit850.o >> __lib__.tmp
echo ADDMOD cpitisb.o >> __lib__.tmp
echo ADDMOD cpitiso.o >> __lib__.tmp
echo ADDMOD cpltwin.o >> __lib__.tmp
echo ADDMOD cppl852.o >> __lib__.tmp
echo ADDMOD cppliso.o >> __lib__.tmp
echo ADDMOD cpplmaz.o >> __lib__.tmp
echo ADDMOD cpplwin.o >> __lib__.tmp
echo ADDMOD cppt850.o >> __lib__.tmp
echo ADDMOD cpptiso.o >> __lib__.tmp
echo ADDMOD cpru866.o >> __lib__.tmp
echo ADDMOD cpruiso.o >> __lib__.tmp
echo ADDMOD cprukoi.o >> __lib__.tmp
echo ADDMOD cpruwin.o >> __lib__.tmp
echo ADDMOD cpsk852.o >> __lib__.tmp
echo ADDMOD cpskiso.o >> __lib__.tmp
echo ADDMOD cpskkam.o >> __lib__.tmp
echo ADDMOD cpskwin.o >> __lib__.tmp
echo ADDMOD cpsl437.o >> __lib__.tmp
echo ADDMOD cpsl852.o >> __lib__.tmp
echo ADDMOD cpsliso.o >> __lib__.tmp
echo ADDMOD cpslwin.o >> __lib__.tmp
echo ADDMOD cpsrwin.o >> __lib__.tmp
echo ADDMOD cpsv850.o >> __lib__.tmp
echo ADDMOD cpsvclip.o >> __lib__.tmp
echo ADDMOD cpsvwin.o >> __lib__.tmp
echo ADDMOD cptr857.o >> __lib__.tmp
echo ADDMOD cptrwin.o >> __lib__.tmp
echo ADDMOD cpua866.o >> __lib__.tmp
echo ADDMOD cpuakoi.o >> __lib__.tmp
echo ADDMOD cpuawin.o >> __lib__.tmp
echo ADDMOD uc1250.o >> __lib__.tmp
echo ADDMOD uc1251.o >> __lib__.tmp
echo ADDMOD uc1252.o >> __lib__.tmp
echo ADDMOD uc1253.o >> __lib__.tmp
echo ADDMOD uc1254.o >> __lib__.tmp
echo ADDMOD uc1257.o >> __lib__.tmp
echo ADDMOD uc737.o >> __lib__.tmp
echo ADDMOD uc850.o >> __lib__.tmp
echo ADDMOD uc852.o >> __lib__.tmp
echo ADDMOD uc857.o >> __lib__.tmp
echo ADDMOD uc866.o >> __lib__.tmp
echo ADDMOD uc8859_1.o >> __lib__.tmp
echo ADDMOD uc88591b.o >> __lib__.tmp
echo ADDMOD uc8859_2.o >> __lib__.tmp
echo ADDMOD uc8859_5.o >> __lib__.tmp
echo ADDMOD uckam.o >> __lib__.tmp
echo ADDMOD uckoi8.o >> __lib__.tmp
echo ADDMOD uckoi8u.o >> __lib__.tmp
echo ADDMOD ucmaz.o >> __lib__.tmp
echo ADDMOD ucmik.o >> __lib__.tmp
echo SAVE >> __lib__.tmp
echo END >> __lib__.tmp
ar -M < __lib__.tmp & del /n __lib__.tmp
make[3]: Leaving directory `/harbour802/source/codepage/os2/gcc'
make[2]: Leaving directory `/harbour802/source/codepage'

[E:\harbour802\source]make -C lang first
make[2]: Entering directory `/harbour802/source/lang'
FOR %d IN (os2 os2\gcc) DO IF NOT EXIST %d md %d

[E:\harbour802\source\lang]IF NOT EXIST os2 md os2

[E:\harbour802\source\lang]IF NOT EXIST os2\gcc md os2\gcc
make[3]: Entering directory `/harbour802/source/lang/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgbg866.c -omsgbg866.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgbgiso.c -omsgbgiso.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgbgwin.c -omsgbgwin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgca.c -omsgca.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgcs852.c -omsgcs852.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgcsiso.c -omsgcsiso.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgcskam.c -omsgcskam.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgcswin.c -omsgcswin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgde.c -omsgde.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgdewin.c -omsgdewin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgel.c -omsgel.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgelwin.c -omsgelwin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgeo.c -omsgeo.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msges.c -omsges.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgeswin.c -omsgeswin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgeu.c -omsgeu.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgfr.c -omsgfr.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msggl.c -omsggl.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msghe862.c -omsghe862.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msghewin.c -omsghewin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msghr852.c -omsghr852.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msghriso.c -omsghriso.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msghu852.c -omsghu852.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msghucwi.c -omsghucwi.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msghuiso.c -omsghuiso.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msghuwin.c -omsghuwin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgid.c -omsgid.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgis850.c -omsgis850.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgit.c -omsgit.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgko.c -omsgko.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgltwin.c -omsgltwin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgnl.c -omsgnl.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgpl852.c -omsgpl852.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgpliso.c -omsgpliso.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgplmaz.c -omsgplmaz.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgplwin.c -omsgplwin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgpt.c -omsgpt.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgro.c -omsgro.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgru866.c -omsgru866.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgrukoi.c -omsgrukoi.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgruwin.c -omsgruwin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgsl437.c -omsgsl437.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgsl852.c -omsgsl852.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgsliso.c -omsgsliso.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgslwin.c -omsgslwin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgsr852.c -omsgsr852.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgsriso.c -omsgsriso.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgtr857.c -omsgtr857.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgtrwin.c -omsgtrwin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgsrwin.c -omsgsrwin.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgzhb5.c -omsgzhb5.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../msgzhgb.c -omsgzhgb.o
IF EXIST ../../../../lib/os2/gcc/hblang.a del /n 
../../../../lib/os2/gcc/hblang.a
echo CREATE ../../../../lib/os2/gcc/hblang.a > __lib__.tmp
echo ADDMOD msgbg866.o >> __lib__.tmp
echo ADDMOD msgbgiso.o >> __lib__.tmp
echo ADDMOD msgbgwin.o >> __lib__.tmp
echo ADDMOD msgca.o >> __lib__.tmp
echo ADDMOD msgcs852.o >> __lib__.tmp
echo ADDMOD msgcsiso.o >> __lib__.tmp
echo ADDMOD msgcskam.o >> __lib__.tmp
echo ADDMOD msgcswin.o >> __lib__.tmp
echo ADDMOD msgde.o >> __lib__.tmp
echo ADDMOD msgdewin.o >> __lib__.tmp
echo ADDMOD msgel.o >> __lib__.tmp
echo ADDMOD msgelwin.o >> __lib__.tmp
echo ADDMOD msgeo.o >> __lib__.tmp
echo ADDMOD msges.o >> __lib__.tmp
echo ADDMOD msgeswin.o >> __lib__.tmp
echo ADDMOD msgeu.o >> __lib__.tmp
echo ADDMOD msgfr.o >> __lib__.tmp
echo ADDMOD msggl.o >> __lib__.tmp
echo ADDMOD msghe862.o >> __lib__.tmp
echo ADDMOD msghewin.o >> __lib__.tmp
echo ADDMOD msghr852.o >> __lib__.tmp
echo ADDMOD msghriso.o >> __lib__.tmp
echo ADDMOD msghu852.o >> __lib__.tmp
echo ADDMOD msghucwi.o >> __lib__.tmp
echo ADDMOD msghuiso.o >> __lib__.tmp
echo ADDMOD msghuwin.o >> __lib__.tmp
echo ADDMOD msgid.o >> __lib__.tmp
echo ADDMOD msgis850.o >> __lib__.tmp
echo ADDMOD msgit.o >> __lib__.tmp
echo ADDMOD msgko.o >> __lib__.tmp
echo ADDMOD msgltwin.o >> __lib__.tmp
echo ADDMOD msgnl.o >> __lib__.tmp
echo ADDMOD msgpl852.o >> __lib__.tmp
echo ADDMOD msgpliso.o >> __lib__.tmp
echo ADDMOD msgplmaz.o >> __lib__.tmp
echo ADDMOD msgplwin.o >> __lib__.tmp
echo ADDMOD msgpt.o >> __lib__.tmp
echo ADDMOD msgro.o >> __lib__.tmp
echo ADDMOD msgru866.o >> __lib__.tmp
echo ADDMOD msgrukoi.o >> __lib__.tmp
echo ADDMOD msgruwin.o >> __lib__.tmp
echo ADDMOD msgsl437.o >> __lib__.tmp
echo ADDMOD msgsl852.o >> __lib__.tmp
echo ADDMOD msgsliso.o >> __lib__.tmp
echo ADDMOD msgslwin.o >> __lib__.tmp
echo ADDMOD msgsr852.o >> __lib__.tmp
echo ADDMOD msgsriso.o >> __lib__.tmp
echo ADDMOD msgtr857.o >> __lib__.tmp
echo ADDMOD msgtrwin.o >> __lib__.tmp
echo ADDMOD msgsrwin.o >> __lib__.tmp
echo ADDMOD msgzhb5.o >> __lib__.tmp
echo ADDMOD msgzhgb.o >> __lib__.tmp
echo SAVE >> __lib__.tmp
echo END >> __lib__.tmp
ar -M < __lib__.tmp & del /n __lib__.tmp
make[3]: Leaving directory `/harbour802/source/lang/os2/gcc'
make[2]: Leaving directory `/harbour802/source/lang'

[E:\harbour802\source]make -C rdd first
make[2]: Entering directory `/harbour802/source/rdd'
FOR %d IN (os2 os2\gcc) DO IF NOT EXIST %d md %d

[E:\harbour802\source\rdd]IF NOT EXIST os2 md os2

[E:\harbour802\source\rdd]IF NOT EXIST os2\gcc md os2\gcc
FOR %d IN (os2 os2\gcc ..\..\lib\os2 ..\..\lib\os2\gcc) DO IF NOT EXIST 
%d md %d

[E:\harbour802\source\rdd]IF NOT EXIST os2 md os2

[E:\harbour802\source\rdd]IF NOT EXIST os2\gcc md os2\gcc

[E:\harbour802\source\rdd]IF NOT EXIST ..\..\lib\os2 md ..\..\lib\os2

[E:\harbour802\source\rdd]IF NOT EXIST ..\..\lib\os2\gcc md 
..\..\lib\os2\gcc
make[3]: Entering directory `/harbour802/source/rdd/os2/gcc'
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../dbcmd.c -odbcmd.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../dbcmd53.c -odbcmd53.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../dbcmdx.c -odbcmdx.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../dbdrop.c -odbdrop.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../dbexists.c -odbexists.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../fieldhb.c -ofieldhb.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../workarea.c -oworkarea.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../wacore.c -owacore.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../wafunc.c -owafunc.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../dbf1.c -odbf1.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../dbnubs.c -odbnubs.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../dbsql.c -odbsql.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../delim1.c -odelim1.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../sdf1.c -osdf1.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../rddinfo.c -orddinfo.o
gcc -I. -I../../include -I../../../../include -W -Wall -DHB_OS_OS2 -O2 
-c ../../hbdbsort.c -ohbdbsort.o
../../../../source/main/os2/gcc/harbour.exe ../../dbdelim.prg  -n -q0 
-w2 -es2 -gc0 -kM -I../../ -I../../../../include
make[3]: Leaving directory `/harbour802/source/rdd/os2/gcc'
make[2]: Leaving directory `/harbour802/source/rdd'
From lorenzo.fiorini at gmail.com  Thu Feb  7 10:47:38 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Feb  7 10:47:45 2008
Subject: [Harbour] 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080207110108.GA8878@localhost.localdomain>
References: <200802040832.m148WKBe006413@31-mo5-4.acn.waw.pl>
	<35DBAB68-0616-4195-AC54-F86A8D6FEE73@syenar.hu>
	<20080207110108.GA8878@localhost.localdomain>
Message-ID: <9257026e0802070747r4f42a2efjdf9f456bbc6c43a8@mail.gmail.com>

2008/2/7 Przemyslaw Czerpak <druzus@acn.waw.pl>:

> And please also look for someone who will continue release process.
> I'm afraid that I do not have more time for it.

What about a new project without any calendar or binaries release,
where the only output is the svn checkout or "optionally" tarballs to
mark snapshots?

Where developers don't waste time in packaging, and binary preparation.

Where the "focus" is on the GNU toolchain.

Other projects/individuals can get the sources from there, modify them
following their rules/needs and do releases, add support for other
platforms or other build tools and so on.

best regards,
Lorenzo
From druzus at acn.waw.pl  Thu Feb  7 14:17:57 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Feb  7 14:18:04 2008
Subject: [Harbour] 2008-02-07 20:17 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200802071917.m17JHv4q016270@31-mo5-4.acn.waw.pl>

2008-02-07 20:17 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/lib.cf
    * moved some definitions for easier detecting library build mode
  * harbour/config/os2/dir.cf
  * harbour/config/os2/global.cf
    * some modifications which should help for old GNU make OS2 ports
      and maybe also current ones

best regards
Przemek
From labitas at gmail.com  Thu Feb  7 15:53:28 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Thu Feb  7 15:53:37 2008
Subject: [Harbour] Asynchronous procedures
In-Reply-To: <47A87E8B.2020205@dbtopas.lt>
References: <47A5130B.8040704@dbtopas.lt> <15250095.post@talk.nabble.com>
	<47A5E4C5.7090509@dbtopas.lt> <47A87E8B.2020205@dbtopas.lt>
Message-ID: <2386af1b0802071253te62a16fh5a77f657140241cd@mail.gmail.com>

Hi, Mindaugas

> /*
>   TODO: BCC compiler error???!!!
>   I had a situation when without this donothing() call the whole loop is
not
>   executed?! Really, strange! Do we have BCC error here? I hadn't time to
do
>   CPU level debugging, but an extra function call influences generated CPU

>   code a lot:
>   - with donothing() ulEntryCount is optimized and stored in edi register;
>   - without donothing() ulEntryCount is stored in stack frame [ebp -
something].
>   Removing -OS compiler switch does not change results.
> */
>          donothing();

Can you share your experience about BCC compiler bug observation?

best regards,
Saulius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080207/7c64f517/attachment.html
From druzus at acn.waw.pl  Thu Feb  7 21:12:41 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Feb  7 21:12:47 2008
Subject: [Harbour] 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <4DD5C09A-9D28-4312-9772-CD1AA4001A13@syenar.hu>
References: <200802040832.m148WKBe006413@31-mo5-4.acn.waw.pl>
	<35DBAB68-0616-4195-AC54-F86A8D6FEE73@syenar.hu>
	<20080207110108.GA8878@localhost.localdomain>
	<4DD5C09A-9D28-4312-9772-CD1AA4001A13@syenar.hu>
Message-ID: <20080208021241.GA5245@localhost.localdomain>

On Thu, 07 Feb 2008, Szak?ts Viktor wrote:
> Before I read through your mail, let me note this is group
> work, and while I'm familiar with some parts of it, I'm
> not with some others, and no such implications (namely
> the tie in between lib name and dir name in core) were
> visible (or noticed by anyone), before the fact. I don't
> think killing anyone would solve anything, but before you
> jump to my throat notice that I haven't touched any central
> GNU make (.cf) files, _only_ 'Makefile's LIBNAME line.
> I doubt the file loss was the result of that.

Viktor, I know that it was not intentional and I only express
my bad feeling. Sorry if you take this part personally.
In fact the dangerous modification was done by Ryszard
but such things may happen when you are forcing deepd
modification in "last minute". I though that e agree that
only things which are well tested and will not break release
process should be commited. If sth cannot be done in safe
way it should not be commited. AFAIR when few weeks (months)
ago we want to release binaries you also have some "fixes"
on the last minutes. Just for you information - I know some
real bugs which have to be fixed but I do not commit anything
because I'm waiting for the end of release process. This bugs
are not citical, only few peope knows aboout them and in few
cases it's a risk that I'll start some long process of fixes.
Please release the new version ASAP. It will make many people
happy and open the doors for developers for farther modifications.
I have no doubts that next Harbour version will beat the older
one even if it will have to introduced some fundamental modifications
in core API. I'm usually quite pedantic in code I make public but it's
not my life goal but the result of some practice. I hate bugs which
are results of nested bad design decisions. In longer terms programmers
have to spend more time on bug fixes then on productive work.
But I've never wrote a code (probably with only one exception
written directly in machine code even without any assembler) and
I was happy with it and I couldn't say that nothing can be improved.
If we agree that it's time to make release then it's compromise -
common group decisions. It was possible to release version 1.0
half year ago. It's a time without any new extensions when all
developers are waiting for a time when they can introduced new
(often long waiting) features. And we do not even finished base
modifications like MT mode which may stronlgy interact with
existing API so even todays modifications may be temporary.
It's normal and good because it means that Harbour is living
project.

> I'm sorry if the whole process resulted in file losses
> for you :( Unfortunately bumps are expected, even if I
> find it odd that our make system can be such a dangerous
> beast.

It was nothing more then a typo which can appear in any
make file in any project. It's a risk of using development
code. And this is the reason why such modifications should
never be done in few hours before final release when we ask
many people to make build tests. I thought that you are one
of the last person who will do sth like that.

> I had actually expected (but definitely hoped) you to take
> part in this rename process because of your different
> environment and skills, especially after you've agreed
> and even gave input to it.

I agreed only with a condition that you can make it well
without breaking release process. I simply though that
you will change library names synced with directory names. 

> About a "simple file rename" I don't know what you
> meant, but if you had exposed this idea _before_
> or _when_ we've been discussing the rename stuff,
> maybe could have a better solution.

I'm not the original author of Harbour GNU make system.
I know how it works because I invested some time to look
at it and I though it was clear for every one. Especially
for you because few weeks ago I send you a message about
this problem when you were updating contrib libraries.

> About GTI_ and HB_GTI. GTI_ violates one important
> rule and nothing was removed, so either on C and
> Harbour level everyone can still use GTI_, despite it
> being an xhb compatibility set of #defines imported
> to Harbour. So the path is there for the Harbour compliant
> way, yet no one suffers from any drawbacks. Where do you
> see a problem?

Mix of functions and symbols which comes from Clipper and
Harbour. The Harbour ones have HB_ prefix and the Clipper
ones don't. Only people who perfectly knows all Clipper
functions can understand why some things needs HB_ prefix
and why some others don't. Why we have DBI_* and why
HB_GTI_*. Not all Harbour users started with Clipper and
even not all Clipper user knows Clipper enough to understand
some things. If we will be too restrictive in some case
then finally it will be necessary to rewrite all core functions
with alternative name having HB_* prefix. Then finally someone
will implement name space support (f.e. some initial version
was created for xHarbour by Ron recently - it's not exactly
what I want but perfectly shows the possibilities) and will
ask us why we introduce such redundancy with HB_ prefix in
all possible places which now cannot be removed due to backward
compatibility. I do not want to allow to add anything to core
code. xHarbour has many public functions which should never appear
in core code with such general names like NetDbUse(), NetLock()
because probably most of us has sth similar so they do not
add anything valuable but are possible source of conflicts.
But if I'm adding yet another ord*() functions then I do not
want to call it hb_ord*(), f.e. ordCount(), ordWildSeek(),
ordKeyRelPos() because it will not help anyone and only increase
the problem with cleaning the code in the future.

> >1. authors of these two libraries intentionally keep binary
> >  compatibility for years to avoid such problems so in this
> >  case you haven't help any one but only created new problem
> >  by removing them.
> It's still not legal, and it still raises some other concerns,

Brian, can you ask extended system if we can have ace.h in
our SVN/CVS repositories?

> and binary compatibility is by far not guaranteed, what happens
> with the new functions added to ADS8 .h file, when someone is
> using an ACE6 .dll with it? What happens when someone is passing
> a non valid (later introduced) #define with an existing function?

I do not know about any problems which may be cause by this
header file in current code. Do you know any?

> If someone wants to create a release (which supposes some
> familiarity with both Harbour and it's contribs and make
> systems), is it a very high expectation to set a few envvars
> and to have these two packages installed?

I believe you will find people for it. Good luck.

> You still haven't answered what are the "serious problems"
> these "missing" headers can cause. I'd really like to see them :(

I was testing about 15 different builds of Harbour and braking
this process is a serious problem. If I will have to hack each
cross build test to pass new condtions then it will stop be real
tests. But it's not longer a problem because I do not plan to make
such test in the future. I've just created a repository for my
own use so I do not plan to repeat such tests current official
releases.

> >2. when we finished release process then you can remove them.
> >  I will not be longer interested what will happen in the main
> >  branch because I plan to create new one only for development
> >  If you will find anything useful then you can borrow it to
> >  official branch.
> I'm not exactly sure what do you mean by that? An internal fork?

Call it as you want. Of course it was only a proposition. I do not
have to public my work. I haven't ever had any incomes from Harbour
or xHarbour other then using some part of my code in my business
work. Now I plan to concentrate only on this last aspect and I plan
to leave most of core code modifications for others. Only few things
I started and I do not wast the invested time I want to commit.

> >And please also look for someone who will continue release process.
> >I'm afraid that I do not have more time for it. Now I have to restore
> >many things I lost which are important for me.
> :(
> I feel our GNU make system is flawed or overcomplicated if it can
> cause such things.

It's not GNU make problem but result "last minute" modification.
I can reach such results by small typo (one /) in non GNU make
files too or by wrong setting some variables. It happened in GNU
make system because it's for much more platforms and compilers
then others so the risk of stupid mistake is much bigger.

Finally: it's nothing personal to you or anyone - you made
increadible and valuable job for this project. Just simply
I think now it's a time to look for other people work (maybe
I'll find sth interesting for me) and move focus to some other
things. For sure I definitely do not want to be a person who
will have to prepare new release anymore if I cannot control
this process at all. Wake me up when 1.0 will be ready. Meanwhile
maybe I'll help in some minor problems but I cannot promise.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Feb  8 03:30:10 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Feb  8 03:29:52 2008
Subject: [Harbour] 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080208021241.GA5245@localhost.localdomain>
References: <200802040832.m148WKBe006413@31-mo5-4.acn.waw.pl>
	<35DBAB68-0616-4195-AC54-F86A8D6FEE73@syenar.hu>
	<20080207110108.GA8878@localhost.localdomain>
	<4DD5C09A-9D28-4312-9772-CD1AA4001A13@syenar.hu>
	<20080208021241.GA5245@localhost.localdomain>
Message-ID: <ABBD12B8-A5B8-4030-94E6-D9A9EFD539AB@syenar.hu>

>
Hi Przemek,

> Viktor, I know that it was not intentional and I only express
> my bad feeling. Sorry if you take this part personally.

There will be some personally taken parts in this mail
too, sorry in advance. Overall I'd suggest to move forward,
do the release, and so on. See my suggestion for the
header file problem.

> In fact the dangerous modification was done by Ryszard
> but such things may happen when you are forcing deepd
> modification in "last minute". I though that e agree that

Forcing?

I've asked the group whether I should do it, and I got
your positive answer (now again), while I got no negative
ones. If that's forcing I completely agree, but usually
forcing (in my eye) means doing something in a pushy way
or without any consensus.

And the only reason I've asked about this, is because
we've already agreed on this previously, and I simply
forgot about it in the meanwhile.

Granted, the original idea must have come from me, but
this doesn't seem like forcing to me.

> only things which are well tested and will not break release
> process should be commited. If sth cannot be done in safe
> way it should not be commited. AFAIR when few weeks (months)
> ago we want to release binaries you also have some "fixes"
> on the last minutes. Just for you information - I know some
> real bugs which have to be fixed but I do not commit anything
> because I'm waiting for the end of release process. This bugs
> are not citical, only few peope knows aboout them and in few
> cases it's a risk that I'll start some long process of fixes.

I understand your POV, but in my understanding fixes can be
committed. In fact only fixes can be committed, no new
features. (we now actually miss some make_gcc.sh's from most
contribs due to a recent addition, which I think would need
to be finished. But I try not to care.)

> Please release the new version ASAP. It will make many people

Let's do it. I have nothing pending here. (I had this only
one pending with conditions, as I wrote two weeks ago).

> happy and open the doors for developers for farther modifications.
> I have no doubts that next Harbour version will beat the older
> one even if it will have to introduced some fundamental modifications
> in core API. I'm usually quite pedantic in code I make public but it's
> not my life goal but the result of some practice. I hate bugs which
> are results of nested bad design decisions. In longer terms  
> programmers
> have to spend more time on bug fixes then on productive work.
> But I've never wrote a code (probably with only one exception
> written directly in machine code even without any assembler) and
> I was happy with it and I couldn't say that nothing can be improved.
> If we agree that it's time to make release then it's compromise -
> common group decisions. It was possible to release version 1.0
> half year ago. It's a time without any new extensions when all
> developers are waiting for a time when they can introduced new
> (often long waiting) features. And we do not even finished base
> modifications like MT mode which may stronlgy interact with
> existing API so even todays modifications may be temporary.
> It's normal and good because it means that Harbour is living
> project.

I agree.

>> I'm sorry if the whole process resulted in file losses
>> for you :( Unfortunately bumps are expected, even if I
>> find it odd that our make system can be such a dangerous
>> beast.
>
> It was nothing more then a typo which can appear in any
> make file in any project. It's a risk of using development
> code. And this is the reason why such modifications should
> never be done in few hours before final release when we ask
> many people to make build tests. I thought that you are one
> of the last person who will do sth like that.

Hm, again blaming this on me. Well, this didn't seem like
something complicated, did it? Have anyone had any complaints
before the fact? No. Did I ask on the list if I should do it?
Yes. Did the group (and you) agreed to do it? Yes. Did anyone
vetoed or expressed any concern beforehand? No.

I'm _really_ sorry if this turned out to be that bad, but
reading the messages on the list, I was under the strong
impression that this is what we want, and that I'm actually
doing something good.

I wouldn't do anything if the slightest concern had been
expressed. I have the strange feeling that my intentions
are being questioned, and if this is the case I can refrain
from committing anything, because you can imagine how good
is it to read through such mails, after being spent some
considerable time on Harbour, all the way under the
false (?) impression that I have group support, while
in reality it's percieved as some rogue, self inducted,
"pushy" action.

>> I had actually expected (but definitely hoped) you to take
>> part in this rename process because of your different
>> environment and skills, especially after you've agreed
>> and even gave input to it.
>
> I agreed only with a condition that you can make it well
> without breaking release process. I simply though that
> you will change library names synced with directory names.

It must have been a communication issue then.

I got aware of this restriction (just recently) for contribs,
but didn't for the core. Maybe I should have thought
about it, but I didn't, probably my fault.

>> About a "simple file rename" I don't know what you
>> meant, but if you had exposed this idea _before_
>> or _when_ we've been discussing the rename stuff,
>> maybe could have a better solution.
>
> I'm not the original author of Harbour GNU make system.
> I know how it works because I invested some time to look
> at it and I though it was clear for every one. Especially
> for you because few weeks ago I send you a message about
> this problem when you were updating contrib libraries.

I'm aware of that. It's probably have to do with
my brain capacity or available time, that I failed
to invest the root cause of this limitation in contrib,
and in turn failed to project this limitation to
Harbour core. In my prev plans for action I cleary
wrote LIB NAME, DIR NAME, old and new, now just LIB
NAME old and new, which might have given a clue what
I exactly had in mind.

Nevertheless we cannot change that, and as easy to
misspell a '/', it's also easy to miscommunicate
something like this :( (last minute or not)

>> About GTI_ and HB_GTI. GTI_ violates one important
>> rule and nothing was removed, so either on C and
>> Harbour level everyone can still use GTI_, despite it
>> being an xhb compatibility set of #defines imported
>> to Harbour. So the path is there for the Harbour compliant
>> way, yet no one suffers from any drawbacks. Where do you
>> see a problem?
>
> Mix of functions and symbols which comes from Clipper and
> Harbour. The Harbour ones have HB_ prefix and the Clipper
> ones don't. Only people who perfectly knows all Clipper
> functions can understand why some things needs HB_ prefix
> and why some others don't. Why we have DBI_* and why
> HB_GTI_*. Not all Harbour users started with Clipper and

DBI_* existed in Clipper, while GTI_* didn't. That's the
clear answer. You as a leading contributor for both RDD
and GT may see a strong connection between these two, and
probably some developers here do, but a "simple" user won't
see a strong relation between DBI_ and GTI_ IMO. But even
if we disregard this, GTI_'s possibility for collision
cannot be overlooked IMO, and from this point it is
a documentation issue which one to use with which functions
calls.

> even not all Clipper user knows Clipper enough to understand
> some things. If we will be too restrictive in some case
> then finally it will be necessary to rewrite all core functions
> with alternative name having HB_* prefix. Then finally someone
> will implement name space support (f.e. some initial version
> was created for xHarbour by Ron recently - it's not exactly
> what I want but perfectly shows the possibilities) and will
> ask us why we introduce such redundancy with HB_ prefix in
> all possible places which now cannot be removed due to backward
> compatibility. I do not want to allow to add anything to core
> code. xHarbour has many public functions which should never appear
> in core code with such general names like NetDbUse(), NetLock()
> because probably most of us has sth similar so they do not
> add anything valuable but are possible source of conflicts.
> But if I'm adding yet another ord*() functions then I do not
> want to call it hb_ord*(), f.e. ordCount(), ordWildSeek(),
> ordKeyRelPos() because it will not help anyone and only increase
> the problem with cleaning the code in the future.

We've already discussed this one. In this case I think the
new ord*() functions should be added to separate files to
avoid any unresolvable link time collision with user code,
but otherwise I agree (albeit in a light way), and only
to extend these legacy CA-Cl*pper "namespaces". Which ones
these are? I think it's better to judge case by case, but
"ord*()", "db*()" are okey and natural, and these are maybe
the only exceptions in my view.

>>>
>> and binary compatibility is by far not guaranteed, what happens
>> with the new functions added to ADS8 .h file, when someone is
>> using an ACE6 .dll with it? What happens when someone is passing
>> a non valid (later introduced) #define with an existing function?
>
> I do not know about any problems which may be cause by this
> header file in current code. Do you know any?

Not at the moment. I think the concept is wrong here.

>> If someone wants to create a release (which supposes some
>> familiarity with both Harbour and it's contribs and make
>> systems), is it a very high expectation to set a few envvars
>> and to have these two packages installed?
>
> I believe you will find people for it. Good luck.

To unzip one package, and to install another one? To
create a Harbour build someone will already need to
have some tools installed and properly configures.

With all due respect if someone creating an official
binary release is not able to do this, we may have some
other problems too.

As an alternate solution we might as well distribute
all those headers as a separate download, so that all
headers can be copied to one dir, or to each contrib
dir, and do the build as usual. This way it's not in
the SVN, but still easy to access for everyone with
just one easy extra step (to be done once) to extract
to /include/.

I can even prepare such a file.

What do you think about it?

>>> 2. when we finished release process then you can remove them.
>>> I will not be longer interested what will happen in the main
>>> branch because I plan to create new one only for development
>>> If you will find anything useful then you can borrow it to
>>> official branch.
>> I'm not exactly sure what do you mean by that? An internal fork?
>
> Call it as you want. Of course it was only a proposition. I do not
> have to public my work. I haven't ever had any incomes from Harbour
> or xHarbour other then using some part of my code in my business
> work. Now I plan to concentrate only on this last aspect and I plan
> to leave most of core code modifications for others. Only few things
> I started and I do not wast the invested time I want to commit.

I'm very sad to hear that, but it is your decision.

>>> :(
>> I feel our GNU make system is flawed or overcomplicated if it can
>> cause such things.
>
> It's not GNU make problem but result "last minute" modification.
> I can reach such results by small typo (one /) in non GNU make
> files too or by wrong setting some variables. It happened in GNU
> make system because it's for much more platforms and compilers
> then others so the risk of stupid mistake is much bigger.
>
> Finally: it's nothing personal to you or anyone - you made
> increadible and valuable job for this project. Just simply
> I think now it's a time to look for other people work (maybe
> I'll find sth interesting for me) and move focus to some other
> things. For sure I definitely do not want to be a person who
> will have to prepare new release anymore if I cannot control
> this process at all. Wake me up when 1.0 will be ready. Meanwhile
> maybe I'll help in some minor problems but I cannot promise.

I can understand your POV and I'd definitely miss your
contributions. I also plan to move away, especially since
I still have no direct business interest in contributing
to Harbour, but other things are constantly growing on me.
Maybe making a few clients switch to the Win32 version of
my app could change that.

Brgds,
Viktor

From dmacias at mail.udg.mx  Fri Feb  8 05:01:18 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Feb  8 05:01:14 2008
Subject: [Harbour] Re: 2008-02-07 20:17 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47AC286E.4020807@mail.udg.mx>

Przemek:

 >2008-02-07 20:17 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
 >  * harbour/config/lib.cf
 >    * moved some definitions for easier detecting library build mode
 >  * harbour/config/os2/dir.cf
 >  * harbour/config/os2/global.cf
 >    * some modifications which should help for old GNU make OS2 ports
 >      and maybe also current ones

With these changes, with "old" make.exe (3.76.1):
- make_gnu.cmd: work entirely
- make_gnu.cmd install: work entirely
- make_gnu.cmd clean: fail
   Do not delete group of files, so can not remove directories and do 
not delete individual files

I used near all day to test some changes and "new" make.exe
I made changes to global.cf locally and now it can delete group of 
files, remove directories, but fail to delete individual files, as example:
CMD.EXE /C IF EXIST ..\..\lib\os2\gcc\hbcommon.a del /n 
..\..\lib\os2\gcc\hbcommon.a


With "new" make.exe ( 3.81beta1, 3.81r2 ):
As described before, it does not build anything in any directory

Tracing this message on screen:
--------------------
[E:\harbour802]make -r           1>make_gnu.log
../../Makefile:29: ../../config/lib.cf: No such file or directory
make[3]: *** No rule to make target `../../config/lib.cf'.  Stop.
make[2]: *** [descend] Error 2
--------------------

it happen in:
a) source\common\Makefile:
   include $(TOP)$(ROOT)config/lib.cf
  b) ../../config/lib.cf
    @$(MK) -C $(ARCH_DIR) -f $(GRANDP)Makefile 'TOP=$(GRANDP)' $(LIB_NAME)
where:
$(GRANDP)Makefile = ../../Makefile
and file ../../Makefile can not be located


I am focused in to be ready to build Harbour under OS/2 without problems 
for nearest release. As now it build/install entirely with "old" 
make.exe, then we are ready to release
Problems with "clean" and "new" make.exe can be fixed later

David Macias


From bedipritpal at hotmail.com  Fri Feb  8 09:49:09 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Feb  8 09:49:14 2008
Subject: [Harbour] 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <ABBD12B8-A5B8-4030-94E6-D9A9EFD539AB@syenar.hu>
References: <200802040832.m148WKBe006413@31-mo5-4.acn.waw.pl>
	<35DBAB68-0616-4195-AC54-F86A8D6FEE73@syenar.hu>
	<20080207110108.GA8878@localhost.localdomain>
	<4DD5C09A-9D28-4312-9772-CD1AA4001A13@syenar.hu>
	<20080208021241.GA5245@localhost.localdomain>
	<ABBD12B8-A5B8-4030-94E6-D9A9EFD539AB@syenar.hu>
Message-ID: <15356493.post@talk.nabble.com>


Hello Viktor
Hello Przemek

Here is a humble request on both of you, please continue with Harbour as you
ever did.

Nobody did wrong to anybody, it just went accidentally.

You must know that a huge Harbour community is desperately dependant on your
contributions. And I hope you will not disappoint them. Please reply to this
message in affirmation.

Consider this is a REQUEST of whole community.

Regards
Pritpal Bedi, INDIA-USA

-- 
View this message in context: http://www.nabble.com/2008-02-04-09%3A31-UTC%2B0100-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp15263829p15356493.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From gvarona at ec-red.com  Fri Feb  8 09:52:26 2008
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Fri Feb  8 09:51:39 2008
Subject: [Harbour] "make_gnu clean" not work
Message-ID: <47AC6CAA.1070702@ec-red.com>

Hi, "make_gnu clean" not work fine.
I am use WinXP SP2+MinGW

D:\harbour>make_gnu clean
"'" no se reconoce como un comando interno o externo,
programa o archivo por lotes ejecutable.
make: *** [clean] Error 1
D:\harbour>

Best Regards
GVS
From druzus at acn.waw.pl  Fri Feb  8 09:58:34 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Feb  8 09:58:40 2008
Subject: [Harbour] 2008-02-08 15:58 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200802081458.m18EwYHG005083@31-mo5-4.acn.waw.pl>

2008-02-08 15:58 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcomp.h
  * harbour/include/hbmacro.h
  * harbour/include/hbexprb.c
  * harbour/source/vm/macro.c
  * harbour/source/compiler/hbmain.c
    ! fixed name conflict in privates/publics declaration.
      Harbour allows to declare memvars with the same name as file
      wide statics or fields but this extensions was not working well
      in some cases and can cause unexpected results in variable
      declaration, f.e. try this code:
               static v:="static"
               proc main()
                  public v:="public"
                  ? v, M->v
               return
      compiled with -n -w switches and also with -n -w -a before
      this fix.
    ! fixed some compile time warnings in memvars declaration to be
      more Clipper compatible
    ! fixed compiling external modules (DO <procname> [WITH <params,...>])
      when function <procname> is already declared but with different
      letter case. Harbour does not convert <procname> in DO statement
      to upper case to play well with case sensitive file systems and
      it could cause confusing warning message:
         Cannot open <procname>.prg, assumed external

  * harbour/source/compiler/harbour.y
  * harbour/source/compiler/harbour.yyc
    ! added protection against bug in bison destructors which might cause
      multiple free the same memory block on syntax error due to 

  * harbour/source/rdd/dbf1.c
    ! added missing binary flag for daytime fields

  * harbour/source/rdd/dbfntx/dbfntx1.c
    ! fixed possible memory leak during accessing corrupted NTX files
    ! fixed possible GPF during accessing corrupted NTX files

  * harbour/source/compiler/genc.c
    * minor cleanup

  * harbour/config/os2/global.cf
    ! use FOR command to delete group of files

best regards
Przemek
From mbelgrano at deltain.it  Fri Feb  8 10:18:19 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Feb  8 10:18:27 2008
Subject: R: [Harbour] 2008-02-04 09:31 UTC+0100 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <15356493.post@talk.nabble.com>
References: <200802040832.m148WKBe006413@31-mo5-4.acn.waw.pl><35DBAB68-0616-4195-AC54-F86A8D6FEE73@syenar.hu><20080207110108.GA8878@localhost.localdomain><4DD5C09A-9D28-4312-9772-CD1AA4001A13@syenar.hu><20080208021241.GA5245@localhost.localdomain><ABBD12B8-A5B8-4030-94E6-D9A9EFD539AB@syenar.hu>
	<15356493.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815E956@SRV02.deltain.net>

I subscribe any word of Pritpal Bedi 

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Pritpal Bedi
Inviato: venerd? 8 febbraio 2008 15.49
A: harbour@harbour-project.org
Oggetto: Re: [Harbour] 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak(druzus/at/priv.onet.pl)


Hello Viktor
Hello Przemek

Here is a humble request on both of you, please continue with Harbour as you
ever did.

Nobody did wrong to anybody, it just went accidentally.

You must know that a huge Harbour community is desperately dependant on your
contributions. And I hope you will not disappoint them. Please reply to this
message in affirmation.

Consider this is a REQUEST of whole community.

Regards
Pritpal Bedi, INDIA-USA

-- 
View this message in context: http://www.nabble.com/2008-02-04-09%3A31-UTC%2B0100-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp15263829p15356493.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From soporte at dsgsoftware.com  Fri Feb  8 10:31:49 2008
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Fri Feb  8 10:32:08 2008
Subject: [Harbour] 2008-02-04 09:31 UTC+0100 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <200802040832.m148WKBe006413@31-mo5-4.acn.waw.pl><35DBAB68-0616-4195-AC54-F86A8D6FEE73@syenar.hu><20080207110108.GA8878@localhost.localdomain><4DD5C09A-9D28-4312-9772-CD1AA4001A13@syenar.hu><20080208021241.GA5245@localhost.localdomain><ABBD12B8-A5B8-4030-94E6-D9A9EFD539AB@syenar.hu>
	<15356493.post@talk.nabble.com>
Message-ID: <001401c86a67$c21faa50$bb00000a@PcJuanxp>

Pritpal, Viktor, Przemek, all,

I'm not a Harbour developper but I absolutely agree and I want to 
participate in this request ...

I respect them but I'm very sad after hearing the Przemek's decision.

Best regards
Juan

----- Original Message ----- 
From: "Pritpal Bedi" <bedipritpal@hotmail.com>
To: <harbour@harbour-project.org>
Sent: Friday, February 08, 2008 3:49 PM
Subject: Re: [Harbour] 2008-02-04 09:31 UTC+0100 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


>
> Hello Viktor
> Hello Przemek
>
> Here is a humble request on both of you, please continue with Harbour as 
> you
> ever did.
>
> Nobody did wrong to anybody, it just went accidentally.
>
> You must know that a huge Harbour community is desperately dependant on 
> your
> contributions. And I hope you will not disappoint them. Please reply to 
> this
> message in affirmation.
>
> Consider this is a REQUEST of whole community.
>
> Regards
> Pritpal Bedi, INDIA-USA
>
> -- 
> View this message in context: 
> http://www.nabble.com/2008-02-04-09%3A31-UTC%2B0100-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp15263829p15356493.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 

From dbtopas at dbtopas.lt  Fri Feb  8 10:37:40 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Feb  8 10:36:28 2008
Subject: [Harbour] Asynchronous procedures
In-Reply-To: <2386af1b0802071253te62a16fh5a77f657140241cd@mail.gmail.com>
References: <47A5130B.8040704@dbtopas.lt>
	<15250095.post@talk.nabble.com>	<47A5E4C5.7090509@dbtopas.lt>
	<47A87E8B.2020205@dbtopas.lt>
	<2386af1b0802071253te62a16fh5a77f657140241cd@mail.gmail.com>
Message-ID: <47AC7744.8070704@dbtopas.lt>

Saulius Zrelskis wrote:
>  > /*
>  >   TODO: BCC compiler error???!!!
>  >   I had a situation when without this donothing() call the whole loop 
> is not
>  >   executed?! Really, strange! Do we have BCC error here? I hadn't 
> time to do
>  >   CPU level debugging, but an extra function call influences 
> generated CPU
>  >   code a lot:
>  >   - with donothing() ulEntryCount is optimized and stored in edi 
> register;
>  >   - without donothing() ulEntryCount is stored in stack frame [ebp - 
> something].
>  >   Removing -OS compiler switch does not change results.
>  > */
>  >          donothing();
> 
> Can you share your experience about BCC compiler bug observation?


Hi,


my code was not working as expected - pcode was not fixed up. I've put 
fprintf( stdout, ...) to debug some variables of my function. fprintf() 
indicated that all variables has expected values and code is ok. I've 
looked to result and pcode was fixed up. After I've commented out 
fprintf(), my code was not working as expected again... I had no enough 
time to find the reason (BCC bug, or my bug) for this. I've just noticed 
that even calling donothing()
   static void donothing( void )
   {
   }
makes code to work OK. So, I've left this dummy call and put comment
into source. I'm going to analyze this in some spear time (not sure when 
exactly...).


Best regards,
Mindaugas
From lorenzo.fiorini at gmail.com  Fri Feb  8 10:48:58 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Feb  8 10:49:02 2008
Subject: [Harbour] What about stopping the release process?
Message-ID: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>

It seems not the right moment to take decisions about 1.0 RC1.

I suggest to reopen the tree for development, wait and see...

best regards,
Lorenzo
From randy at palmasdev.com  Fri Feb  8 10:59:55 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Fri Feb  8 10:58:54 2008
Subject: [Harbour] 2008-02-04 09:31 UTC+0100 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <001401c86a67$c21faa50$bb00000a@PcJuanxp>
References: <200802040832.m148WKBe006413@31-mo5-4.acn.waw.pl>
	<35DBAB68-0616-4195-AC54-F86A8D6FEE73@syenar.hu>
	<20080207110108.GA8878@localhost.localdomain>
	<4DD5C09A-9D28-4312-9772-CD1AA4001A13@syenar.hu>
	<20080208021241.GA5245@localhost.localdomain>
	<ABBD12B8-A5B8-4030-94E6-D9A9EFD539AB@syenar.hu>
	<15356493.post@talk.nabble.com>
	<001401c86a67$c21faa50$bb00000a@PcJuanxp>
Message-ID: <20080208155851.794D8EA27@smtp.tor.pathcom.com>

Hi all,

Not to minimize the contributions of the other developers, but I 
think we would all agree that  Harbour would not be the success it is 
today without Przemek's contributions and, losing him (especially 
being so close to Release 1), will no doubt have a serious negative 
impact on the project. :-(

Randy.

At 10:31 AM 2/8/2008, you wrote:
>Pritpal, Viktor, Przemek, all,
>
>I'm not a Harbour developper but I absolutely agree and I want to 
>participate in this request ...
>
>I respect them but I'm very sad after hearing the Przemek's decision.
>
>Best regards
>Juan
>
>----- Original Message ----- From: "Pritpal Bedi" <bedipritpal@hotmail.com>
>To: <harbour@harbour-project.org>
>Sent: Friday, February 08, 2008 3:49 PM
>Subject: Re: [Harbour] 2008-02-04 09:31 UTC+0100 Przemyslaw 
>Czerpak(druzus/at/priv.onet.pl)
>
>
>>
>>Hello Viktor
>>Hello Przemek
>>
>>Here is a humble request on both of you, please continue with Harbour as you
>>ever did.
>>
>>Nobody did wrong to anybody, it just went accidentally.
>>
>>You must know that a huge Harbour community is desperately dependant on your
>>contributions. And I hope you will not disappoint them. Please reply to this
>>message in affirmation.
>>
>>Consider this is a REQUEST of whole community.
>>
>>Regards
>>Pritpal Bedi, INDIA-USA
>>
>>--
>>View this message in context: 
>>http://www.nabble.com/2008-02-04-09%3A31-UTC%2B0100-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp15263829p15356493.html
>>Sent from the Harbour - Dev mailing list archive at Nabble.com.
>>
>>_______________________________________________
>>Harbour mailing list
>>Harbour@harbour-project.org
>>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>


From mpaliwoda at interia.pl  Fri Feb  8 11:05:18 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Feb  8 11:05:24 2008
Subject: [Harbour] 2008-02-08 16:51 UTC+0100 Marek Paliwoda (mpaliwoda at
	interia pl)
Message-ID: <47AC7DBE.9060102@interia.pl>

2008-02-08 16:51 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)
   + harbour/contrib/gtwvg/make_gcc.sh
   + harbour/contrib/hbapollo/make_gcc.sh
   + harbour/contrib/hbclipsm/make_gcc.sh
   + harbour/contrib/hbct/make_gcc.sh
   + harbour/contrib/hbfbird/make_gcc.sh
   + harbour/contrib/hbfimage/make_gcc.sh
   + harbour/contrib/hbgd/make_gcc.sh
   + harbour/contrib/hbgt/make_gcc.sh
   + harbour/contrib/hbmisc/make_gcc.sh
   + harbour/contrib/hbmsql/make_gcc.sh
   + harbour/contrib/hbmysql/make_gcc.sh
   + harbour/contrib/hbnf/make_gcc.sh
   + harbour/contrib/hbodbc/make_gcc.sh
   + harbour/contrib/hbole/make_gcc.sh
   + harbour/contrib/hbpgsql/make_gcc.sh
   + harbour/contrib/hbtip/make_gcc.sh
   + harbour/contrib/hbtpathy/make_gcc.sh
   + harbour/contrib/hbw32/make_gcc.sh
   + harbour/contrib/hbw32ddr/make_gcc.sh
   + harbour/contrib/hbwhat32/make_gcc.sh
   + harbour/contrib/hbziparch/make_gcc.sh
   + harbour/contrib/hbzlib/make_gcc.sh
   + harbour/contrib/rddads/make_gcc.sh
   + harbour/contrib/xhb/make_gcc.sh
     + Added missing files to allow compilation using non standard
       build system. Please note that some contribs require external
       packages, so to succesfuully compile them you will have to
       set a proper environment variable, pointing to a list of
       directories, containig required package header files. Those
       envvars are listed below :
          APOLLO_INC
          FIREBIRD_INC
          FREEIMAGE_INC
          GD_INC
          MYSQL_INC
          PGSQL_INC
          ZLIB_INC
          ADS_INC
       Note that those envvars may contain list of directories,
       for example :
          export ADS_INC="/usr/include include ."
       Also note that on Windows systems, using MingW or Cygwin, you will
       have to generate a proper import files from dlls, available in those
       packages - using MingW or Cygwin dlltool - to build end user programs,
       utilizing those packages.

   * harbour/contrib/mtpl_gcc.mak
   * harbour/contrib/mtpl_gcc.sh
   * harbour/contrib/make_gcc_all.sh
     + Added the rest of contrib libs to compile

   * harbour/contrib/hbtpathy/tplinux.c
   * harbour/contrib/hbtpathy/tpos2.c
   * harbour/contrib/hbtpathy/tpwin32.c
     + Added an operating system guard around the content of
       thses files to allow including all three files in a
       library.

A remark :

Newly updated files for unix like systems do not try to build
import libraries from respective packages. I was against this
move from the begining, because it is a user's responsibility
to have/create required import libraries, not a harbour one.
Not to mention that some packages may include those libraries
in their distributions, in which case these libraries should
be used instead. And last but not least, adding automatic import
feature horribly complicates the whole alternative make system,
requires additional tools, not included in harbour, and is not
compatible with systems which do not require it at all. So I am
going to remove it after the release process finishes from the
rest of non GNU makefiles/batfiles.

-- 

    Marek Paliwoda
mpaliwoda at interia pl


---------------------------------------------------------------------- 	
Sprawdz gdzie lezy snieg, czy dzialaja armatki
i jak przygotowane sa stoki >>> http://link.interia.pl/f1cfc


From alex at belacy.belgorod.su  Fri Feb  8 11:18:51 2008
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Fri Feb  8 11:19:38 2008
Subject: [Harbour] Re: 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080208021241.GA5245@localhost.localdomain>
References: <200802040832.m148WKBe006413@31-mo5-4.acn.waw.pl>
	<35DBAB68-0616-4195-AC54-F86A8D6FEE73@syenar.hu>
	<20080207110108.GA8878@localhost.localdomain>
	<4DD5C09A-9D28-4312-9772-CD1AA4001A13@syenar.hu>
	<20080208021241.GA5245@localhost.localdomain>
Message-ID: <111782943.20080208191851@belacy.belgorod.su>

On  Friday, February 08, 2008, 5:12 Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

PC> Brian, can you ask extended system if we can have ace.h in
PC> our SVN/CVS repositories?

 I had requested for such permission in December, 1999. And I got an
 answer from them, which I immedeately posted to this mail list.

 Here is this answer:

=======================
"The full source thing answers the question.  We should not care if
ACE.H
gets distributed as part of the Harbour source.  The copyright notice
needs
to be maintained, though.  Alexander may want to add some information
somewhere about where to get updates if necessary (i.e. the Advantage
web
site)."

This is the reply I got from Mike Lydon our R&D manager.  You should
have
all the software.  Just add a copyright notice to your licensing and
that
should work.  



Bill Schuler
Database Products
Southeast Sales Manager
Phone (800)235-7576 ext. 6051
      (208)322-7575 ext. 6051
Fax   (208)327-5006
bills@extendsys.com
5777 N. Meeker Ave. 
Boise, ID 83711
http://www.advantagedatabase.com
http://solutions.advantagedatabase.com
============================


Regards,
 Alexander
http://kresin.belgorod.su

From harbour.01 at syenar.hu  Fri Feb  8 13:45:05 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Feb  8 13:47:12 2008
Subject: [Harbour] CHANGELOG: 2008-02-08 19:41 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c86a82$Blat.v2.6.2$b8ba952c$1258ee8c88a2@127.0.0.1>

2008-02-08 19:41 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * contrib/rddads/make_gcc.sh
   * contrib/hbfimage/make_gcc.sh
     ! Two minor corrections to *_INC path setting examples for Windows.
--
Brgds,
Viktor

From gvarona at ec-red.com  Fri Feb  8 21:23:42 2008
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Fri Feb  8 21:23:50 2008
Subject: [Harbour] Error en comando USE / Error in USE command
Message-ID: <47AD0EAE.5000909@ec-red.com>

Hello
This sample:

procedure main
use D:\harbour\tests\test.dbf
? first
quit

In Clipper:
E:\SyS_GVS\CuC>test1
Homer
E:\SyS_GVS\CuC>

In Harbour:
E:\SyS_GVS\CuC>testhb
Error BASE/1003  Variable does not exist: FIRST
Called from MAIN(3)
E:\SyS_GVS\CuC>

TEST.DBF in folder \harbour\tests

Best Regards
GVS
From philb at philb.us  Fri Feb  8 23:33:59 2008
From: philb at philb.us (Phil Barnett)
Date: Fri Feb  8 23:34:03 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>
Message-ID: <200802082333.59785.philb@philb.us>

On Friday 08 February 2008 10:48:58 am Lorenzo Fiorini wrote:
> It seems not the right moment to take decisions about 1.0 RC1.
>
> I suggest to reopen the tree for development, wait and see...

No, we need to release a build. If we don't this thing will never get done.

Why should we not finish Harbour at this time?

-- 
"Sometimes I wonder whether the world is being run by smart people who are 
putting us on or by imbeciles who really mean it." - Mark Twain
From lorenzo.fiorini at gmail.com  Sat Feb  9 00:08:39 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Feb  9 00:08:46 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <200802082333.59785.philb@philb.us>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>
	<200802082333.59785.philb@philb.us>
Message-ID: <9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>

On Feb 9, 2008 5:33 AM, Phil Barnett <philb@philb.us> wrote:

> Why should we not finish Harbour at this time?

Because the two main developers don't agree about latest changes.

Because both have announced they'll leave the project.

So since it's unlike we'll have a 1.1 I think we should at least leave
the lib names as they have been in the last 8 years and do a favor to
poor users.

best regards,
Lorenzo
From philb at philb.us  Sat Feb  9 01:33:08 2008
From: philb at philb.us (Phil Barnett)
Date: Sat Feb  9 01:33:20 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>
	<200802082333.59785.philb@philb.us>
	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>
Message-ID: <200802090133.09715.philb@philb.us>

On Saturday 09 February 2008 12:08:39 am Lorenzo Fiorini wrote:

> So since it's unlike we'll have a 1.1 I think we should at least leave
> the lib names as they have been in the last 8 years and do a favor to
> poor users.

Is the repository in an unusable state?

-- 
"Sometimes I wonder whether the world is being run by smart people who are 
putting us on or by imbeciles who really mean it." - Mark Twain
From mpaliwoda at interia.pl  Sat Feb  9 01:37:25 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sat Feb  9 01:37:31 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>	<200802082333.59785.philb@philb.us>
	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>
Message-ID: <47AD4A25.8080004@interia.pl>

Lorenzo,

>> Why should we not finish Harbour at this time?
> 
> Because the two main developers don't agree about latest changes.

It happens not the first time, and I hope not the last time ;-).
Many times the difference in opinions is a stimulating process.
Of course, sometimes it's a "destructive" process, but not so
many times (I hope :)).

> Because both have announced they'll leave the project.

And I am not sure if they did not do it based on current emptions.
I can clearly understand the decision of leaving the project, based
on limited time, loose of interes, other involvement, etc., but I
can't say I understand both current decisions very well. I hope they
both don't mind and stay here. It's clear without them the project
is dead (again).

> So since it's unlike we'll have a 1.1 I think we should at least leave
> the lib names as they have been in the last 8 years and do a favor to
> poor users.

Truely speaking the whole libnames problem is a little bit unclear to me.
I don't want to jump in, or "take a one side" in this disputation, but
certainly if the decision was to rename the libnames, it would be better
to do it now than later. "1.0" means something (at least to me).

BTW, I don't know technical reasons behind having so much libraries
instead of just one harbour-static.lib, but surely I never liked the
current set of so much libraries at all. If it has any benefits,
I doubt they'll overcome its weaknesses (a simple example is a cross
libraries dependency, which makes troubles for some linkers).

-- 

Marek


----------------------------------------------------------------------
Sprawdz, czy pasujesz do swojego partnera!
http://link.interia.pl/f1ce7

From mpaliwoda at interia.pl  Sat Feb  9 04:07:46 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sat Feb  9 04:07:55 2008
Subject: [Harbour] 2008-02-09 10:06 UTC+0100 Marek Paliwoda (mpaliwoda at
	interia pl)
Message-ID: <47AD6D62.3060005@interia.pl>

2008-02-09 10:06 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)
   * harbour/contrib/hbtpathy/tplinux.c
   * harbour/contrib/hbtpathy/tpos2.c
   * harbour/contrib/hbtpathy/tpwin32.c
     * Fixed guarding file content with proper OS constant
       (HB_OS_UNIX, HB_OS_WIN_32, HB_OS_OS2)

-- 

     Marek Paliwoda
mpaliwoda at interia pl

----------------------------------------------------------------------
Potega i sila na wyciagniecie reki - sprawdz!
Zagraj >>> http://link.interia.pl/f1cf3

From harbour.01 at syenar.hu  Sat Feb  9 04:53:53 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Feb  9 04:53:35 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <47AD4A25.8080004@interia.pl>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>	<200802082333.59785.philb@philb.us>
	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>
	<47AD4A25.8080004@interia.pl>
Message-ID: <29EBEB77-B467-441F-B744-02533F0838BE@syenar.hu>

>
Hi Marek,

> Truely speaking the whole libnames problem is a little bit unclear  
> to me.
> I don't want to jump in, or "take a one side" in this disputation, but
> certainly if the decision was to rename the libnames, it would be  
> better
> to do it now than later. "1.0" means something (at least to me).
>
> BTW, I don't know technical reasons behind having so much libraries
> instead of just one harbour-static.lib, but surely I never liked the
> current set of so much libraries at all. If it has any benefits,
> I doubt they'll overcome its weaknesses (a simple example is a cross
> libraries dependency, which makes troubles for some linkers).

I completely agree that it would be way better to have less
libs. This would remove the burden from all users to deal
with this whole bunch of names, and break the link process
by leaving or misspelling one or two of them. It would also
make all link commands much shorter. Circular dependency
would also go as a problem. Overriding parts of the libs
(like getsys) wouldn't suffer (AFAICS). Having one lib would
have the benefit to be (more) in sync with the .dll version
of the lib.

One drawback which was mentioned on the list, is that we
have a different license for the compiler lib, the RTL
libs and pbly also PCRE. We also have some mutually exclusive libs.
Also, since GTs and RDDs are "plugin" type of libs, I wouldn't mix
them either in the global one. So, we might end up with a few
separate libs at the end.

Actually - if I see this correctly - the latest changes in
the GNU make system have the benefit that it seems now much
easier to generate one global lib (Thanks a lot to
Ryszard for this work), than it would have been before.

Having so many libs has nothing to do with any decisions
in the past, it was just how the project evolved, and some
new modules where simply put into new dirs (which is
perfectly okey) and all these automatically got separate libs.

This is a possible simplified lib layout:
- harbour (hbcpage + hbcommon + hbdebug + hblang + hbmacro + hbpp +  
hbrdd + hbrtl + hbvm + hbrddusr + hbsix + hbhsx)
- hbcomp
- hbpcre
- gt*
- rdd*
- hbmain*
- hbnulrdd

This was already mentioned on the list not long ago, and
there was not too many reactions to it.

Brgds,
Viktor

From dmacias at mail.udg.mx  Sat Feb  9 04:59:06 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sat Feb  9 04:59:04 2008
Subject: [Harbour] Re: 2008-02-08 15:58 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47AD796A.8030106@mail.udg.mx>

Przemek:

 >2008-02-08 15:58 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
 >  * harbour/config/os2/global.cf
 >    ! use FOR command to delete group of files

With these changes, with "old" make.exe (3.76.1):
- make_gnu.cmd: work entirely
- make_gnu.cmd install: work entirely
- make_gnu.cmd clean: fail
--------------------------------
[E:\harbour802]make -r clean          1>make_gnu.log
make: [clean] Error 31880 (ignored)
make[1]: [clean] Error 31880 (ignored)
make[1]: [clean] Error 31880 (ignored)
make[2]: [clean] Error 31880 (ignored)
make[2]: [clean] Error 31880 (ignored)
make[1]: [clean] Error 31880 (ignored)
make[1]: [clean] Error 31880 (ignored)
make[2]: [clean] Error 31880 (ignored)
make[2]: [clean] Error 31880 (ignored)
make[1]: [clean] Error 31880 (ignored)
make[1]: [clean] Error 31880 (ignored)
make[2]: [clean] Error 31880 (ignored)
--------------------------------


Previously I made changes to global.cf locally and now it can delete 
group of files, remove directories, AND delete individual files, so all 
processes are complete

My config\os2\global.cf are included below

Can you delete lines marked with label "DAVID:" and commit to SVN ? Thanks

( as I see, e-mail client wrap some lines )

In summary changes are (based in PREVIOUS global.cf):

OS2_ARCH_DIR = $(subst /,\,$(HB_ARCH))
OS2_LIB_DIR  = $(subst /,\,$(LIB_DIR))
OS2_LIB_PATH = $(subst /,\,$(LIB_PATH))
OS2_LIB_ARCH = $(subst /,\\,$(LIB_ARCH))   <--- It let to delete 
individual files

in place of
OS2_ARCH_DIR = $(subst /,\\,$(HB_ARCH))
OS2_LIB_DIR  = $(subst /,\\,$(LIB_DIR))
OS2_LIB_PATH = $(subst /,\\,$(LIB_PATH))
OS2_LIB_ARCH = $(subst /,\\,$(LIB_ARCH))

and
"\\*.*"   <--- It let do delete group of files
in place of
"\*.*"

David Macias



#
# $Id: global.cf 8286 2008-02-07 19:17:55Z druzus $
#

all : first

HB_GT_LIST=\
	gtcgi \
	gtos2 \
	gtpca \
	gtstd \

# verify if GT drivers exist
#HB_GT_LIBS := $(foreach gt, $(HB_GT_LIST), $(if $(wildcard 
$(TOP)$(ROOT)source/rtl/$(gt)),$(gt),))
# temporary workaround for some possible problems with some GNU make 
versions
HB_GT_LIBS := $(HB_GT_LIST)

ifeq ($(HB_GT_LIB),)
	HB_GT_LIB = gtos2
endif

ifeq ($(SHLVL),) # An OS/2 command shell

ARCH_DIR = $(HB_ARCH)
#DAVID: OS2_ARCH_DIR = $(subst /,\\,$(HB_ARCH))
#DAVID: OS2_LIB_DIR  = $(subst /,\\,$(LIB_DIR))
#DAVID: OS2_LIB_PATH = $(subst /,\\,$(LIB_PATH))
#DAVID: OS2_LIB_ARCH = $(subst /,\\,$(LIB_ARCH))
OS2_ARCH_DIR = $(subst /,\,$(HB_ARCH))
OS2_LIB_DIR  = $(subst /,\,$(LIB_DIR))
OS2_LIB_PATH = $(subst /,\,$(LIB_PATH))
OS2_LIB_ARCH = $(subst /,\\,$(LIB_ARCH))
DIRSEP = $(subst /,\,\)

MK = $(subst /,\,$(subst \~,~,$(MAKE)))

ifeq ($(OS2_SHELL),)
	# Not running on OS/2 (which comes in handy for 'make -r clean')
	RM = del /q
else
	# Running on OS/2
	RM = del /n
endif
RD = rmdir
CP = copy
MV = move
MD = md

ifeq ($(LIB_PATH),)

dirbase::
	-CMD.EXE /C FOR %d IN ($(HB_ARCHITECTURE) $(OS2_ARCH_DIR)) DO IF NOT 
EXIST %d $(MD) %d

clean::
#DAVID:	-CMD.EXE /C IF EXIST $(OS2_ARCH_DIR)\*.* $(RM) $(OS2_ARCH_DIR)\*.*
	-CMD.EXE /C IF EXIST $(OS2_ARCH_DIR)\*.* $(RM) $(OS2_ARCH_DIR)\\*.*
	-CMD.EXE /C FOR %d IN ($(OS2_ARCH_DIR) $(HB_ARCHITECTURE)) DO IF EXIST 
%d $(RD) %d

else

dirbase::
	-CMD.EXE /C FOR %d IN ($(HB_ARCHITECTURE) $(OS2_ARCH_DIR) 
$(OS2_LIB_PATH) $(OS2_LIB_DIR)) DO IF NOT EXIST %d $(MD) %d

clean::
#DAVID:	-CMD.EXE /C IF EXIST $(OS2_ARCH_DIR)\*.* $(RM) $(OS2_ARCH_DIR)\*.*
	-CMD.EXE /C IF EXIST $(OS2_ARCH_DIR)\*.* $(RM) $(OS2_ARCH_DIR)\\*.*
	-CMD.EXE /C FOR %d IN ($(OS2_ARCH_DIR) $(HB_ARCHITECTURE)) DO IF EXIST 
%d $(RD) %d
	-CMD.EXE /C IF EXIST $(OS2_LIB_ARCH) $(RM) $(OS2_LIB_ARCH)

endif

else  # bash

ARCH_DIR = $(HB_ARCH)
MK = $(MAKE)

RM = rm -f
RD = rm -f -r
CP = cp -f
MV = mv -f
MD = mkdir
MDP = mkdir -p

OS2_LIB_ARCH = $(LIB_ARCH)

dirbase::
	@[ -d $(ARCH_DIR) ] || $(MDP) $(ARCH_DIR)
	@[ -z $(LIB_DIR) ] || [ -d $(LIB_DIR) ] || $(MDP) $(LIB_DIR)

clean::
	-$(RD) $(ARCH_DIR) $(LIB_ARCH)

endif


From lorenzo.fiorini at gmail.com  Sat Feb  9 05:17:12 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Feb  9 05:17:19 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <200802090133.09715.philb@philb.us>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>
	<200802082333.59785.philb@philb.us>
	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>
	<200802090133.09715.philb@philb.us>
Message-ID: <9257026e0802090217h401ae0a6jc30d62cd75221894@mail.gmail.com>

On Feb 9, 2008 7:33 AM, Phil Barnett <philb@philb.us> wrote:

> Is the repository in an unusable state?

Is this the only parameter to consider?

Do you really find a change like this between beta3 and RC necessary and needed?

All the "users" will need to update their makefiles, projects and/or
batches/scripts to the new lib names and replace all the GTI_ to
HB_GTI_ for what if the developers are "looking elsewhere"?

For me "old" names where consistent with Clipper lib names:

1. dir source/rdd/dbfcdx creates lib dbfcdx
2. in the source there is
   REQUEST DBFCDX
   rddSetDefault( "DBFCDX" )
3. in the Clipper 5.x drivers guide the drivers is called DBFCDX in all examples

Now after 8 years and 3 betas the lib become suddenly rddcdx.

I think we should rename the libs as they were and revert HB_GTI to GTI_.
1.0 RC should be usable by a beta3 user without any modification.

best regards,
Lorenzo
From mpaliwoda at interia.pl  Sat Feb  9 05:42:24 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sat Feb  9 05:42:37 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <29EBEB77-B467-441F-B744-02533F0838BE@syenar.hu>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>	<200802082333.59785.philb@philb.us>	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>	<47AD4A25.8080004@interia.pl>
	<29EBEB77-B467-441F-B744-02533F0838BE@syenar.hu>
Message-ID: <47AD8390.70507@interia.pl>

Hi Viktor,

[...]
> One drawback which was mentioned on the list, is that we
> have a different license for the compiler lib, the RTL
> libs and pbly also PCRE. 

O s... ;-), I completly forgot about. But it means that
we have problem with .dll (.so) builds also, haven't we ?

 > We also have some mutually exclusive libs.
> Also, since GTs and RDDs are "plugin" type of libs, I wouldn't mix
> them either in the global one. So, we might end up with a few
> separate libs at the end.
> 
> Actually - if I see this correctly - the latest changes in
> the GNU make system have the benefit that it seems now much
> easier to generate one global lib (Thanks a lot to
> Ryszard for this work), than it would have been before.

Yes, I appreciate Ryszard's contribution very much. And yours,
and Przemek's, and all others :).

> Having so many libs has nothing to do with any decisions
> in the past, it was just how the project evolved, and some
> new modules where simply put into new dirs (which is
> perfectly okey) and all these automatically got separate libs.
> 
> This is a possible simplified lib layout:
> - harbour (hbcpage + hbcommon + hbdebug + hblang + hbmacro + hbpp + 
> hbrdd + hbrtl + hbvm + hbrddusr + hbsix + hbhsx)
> - hbcomp
> - hbpcre
> - gt*
> - rdd*
> - hbmain*
> - hbnulrdd
> 
> This was already mentioned on the list not long ago, and
> there was not too many reactions to it.

That's a proposition which seems resonable, but let's discuss
it after the release :).

-- 

Marek


----------------------------------------------------------------------
Zmus swojego faceta, zeby to przeczytal
Kliknij >>> http://link.interia.pl/f1ceb

From druzus at acn.waw.pl  Sat Feb  9 06:01:53 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Feb  9 06:02:15 2008
Subject: [Harbour] Re: 2008-02-08 15:58 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <47AD796A.8030106@mail.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
	<47AD796A.8030106@mail.udg.mx>
Message-ID: <20080209110153.GA5458@localhost.localdomain>

On Sat, 09 Feb 2008, David Arturo Macias Corona wrote:
> With these changes, with "old" make.exe (3.76.1):
> - make_gnu.cmd: work entirely
> - make_gnu.cmd install: work entirely
> - make_gnu.cmd clean: fail
> --------------------------------
> [E:\harbour802]make -r clean          1>make_gnu.log
> make: [clean] Error 31880 (ignored)
[...]
> Previously I made changes to global.cf locally and now it can delete 
> group of files, remove directories, AND delete individual files, so all 
> processes are complete
> My config\os2\global.cf are included below
> Can you delete lines marked with label "DAVID:" and commit to SVN ? Thanks
> ( as I see, e-mail client wrap some lines )

I think you should do it your self. If you do not have write access
then please create your SF account and send your SF ID here.
It will be much easier if OS2 users will make modifications for
this OS directly. Now we have to guess how OS2 shell works looking
for error messages.

best regards,
Przemek
From druzus at acn.waw.pl  Sat Feb  9 06:31:11 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Feb  9 06:31:19 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>
	<200802082333.59785.philb@philb.us>
	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>
Message-ID: <20080209113111.GB5458@localhost.localdomain>

On Sat, 09 Feb 2008, Lorenzo Fiorini wrote:
> > Why should we not finish Harbour at this time?
> Because the two main developers don't agree about latest changes.

Not exactly. I agree that library names can be source of some
name conflict and I like the idea to resolve the problem.
I only do not like that it was done few minutes before release
and break the release process. From small modification we have
much bigger one then any of us expected and build/clean process
on some platforms is still broken. Instead of release new binaries
now we have to check all builds. Meanwhile few of us lost important
data.

> Because both have announced they'll leave the project.

Not exactly again. I only plan to reduce my activity in this
project and concentrate on some other things - believe me
that Harbour is not my whole life :-). But as I said there
are still some things I started and I would like to finish
them like MT mode or multi window core GT API. Anyhow I do
not want to be master of release process. I can create binaries
for some platforms when we will be ready but I do not want to
decide about terms, create SVN tags, etc. I believe that we will
find someone who can make it much better then me.

> So since it's unlike we'll have a 1.1 I think we should at least leave
> the lib names as they have been in the last 8 years and do a favor to
> poor users.

It's also important argument though in fact there is a problem that
we do not have compiler and linker wrapper which can work in non bash
environment. Sth like hb* scripts which fully hides library names for
end users so they will not notice any difference. Creating sth like that
in C seems to be important.

best regards,
Lorenzo
From druzus at acn.waw.pl  Sat Feb  9 06:50:27 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Feb  9 06:50:33 2008
Subject: [Harbour] 2008-02-09 12:50 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200802091150.m19BoRl2006661@31-mo5-4.acn.waw.pl>

2008-02-09 12:50 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/w32/global.cf
    * removed ' quoting from commands - *sh shells removed them but without
      such shell they are passed to windows command interpreter and not
      all version removed them

best regards
Przemek
From druzus at acn.waw.pl  Sat Feb  9 07:53:43 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Feb  9 07:53:48 2008
Subject: [Harbour] 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <ABBD12B8-A5B8-4030-94E6-D9A9EFD539AB@syenar.hu>
References: <200802040832.m148WKBe006413@31-mo5-4.acn.waw.pl>
	<35DBAB68-0616-4195-AC54-F86A8D6FEE73@syenar.hu>
	<20080207110108.GA8878@localhost.localdomain>
	<4DD5C09A-9D28-4312-9772-CD1AA4001A13@syenar.hu>
	<20080208021241.GA5245@localhost.localdomain>
	<ABBD12B8-A5B8-4030-94E6-D9A9EFD539AB@syenar.hu>
Message-ID: <20080209125342.GA6652@localhost.localdomain>

On Fri, 08 Feb 2008, Szak?ts Viktor wrote:
[...]
> With all due respect if someone creating an official
> binary release is not able to do this, we may have some
> other problems too.

Viktor, the most important is that it will be necessary to make
some modifications before compilation. I intentionally always
tried to reduce them to avoid problems and typos during manual
updating.
I do not expect that packager will have any deep knowledge
about OS or programming. I only want to ask him to run one
of the build script and send us the results. It will greatly
reduce differences between binary builds of the same release
we had in the past. I also think that it will be good to add
sth like make_tgz.sh for Windows users who do not use *nix
like shell for BCC, MSVC, POCC binaries. We also still do not
have make_os2.cmd which is necessary for OS2 users - now they
are using make_gnu.cmd from older Harbour versions or from
xHarbour.

> As an alternate solution we might as well distribute
> all those headers as a separate download, so that all
> headers can be copied to one dir, or to each contrib
> dir, and do the build as usual. This way it's not in
> the SVN, but still easy to access for everyone with
> just one easy extra step (to be done once) to extract
> to /include/.
> I can even prepare such a file.
> What do you think about it?

It will help and maybe it's quite good final solution though
it will not resolve the problem of RPMs for cross builds when
user do not have write access to cross compiler environment.
But I do not understand why it's important to make the packagers'
life harder during RC tests. We already spend more time discussing
it then it's worth. Anyhow I'll update spec files and add optional
support for zlib so if someone will want create Harbour RPMs native
or for cross build (Win32 and WinCE) with ZLIB support then it will
be necessary to use --with zlib switch. Of course after adding the
header files to one of include paths. At least it will reduce the
problem.

> I can understand your POV and I'd definitely miss your
> contributions. I also plan to move away, especially since
> I still have no direct business interest in contributing
> to Harbour, but other things are constantly growing on me.
> Maybe making a few clients switch to the Win32 version of
> my app could change that.

Each of us has own life which is the most important of us.
I will also miss your contributions.

best regards,
Przemek
From philb at philb.us  Sat Feb  9 08:50:31 2008
From: philb at philb.us (Phil Barnett)
Date: Sat Feb  9 08:50:34 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <9257026e0802090217h401ae0a6jc30d62cd75221894@mail.gmail.com>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>
	<200802090133.09715.philb@philb.us>
	<9257026e0802090217h401ae0a6jc30d62cd75221894@mail.gmail.com>
Message-ID: <200802090850.31651.philb@philb.us>

On Saturday 09 February 2008 05:17:12 am Lorenzo Fiorini wrote:
> On Feb 9, 2008 7:33 AM, Phil Barnett <philb@philb.us> wrote:
> > Is the repository in an unusable state?
>
> Is this the only parameter to consider?
>
> Do you really find a change like this between beta3 and RC necessary and
> needed?

It was announced and discussed here before it was made and there were no 
objections. This is just monday morning quarterbacking.

Yes, it's acceptable and even normal for things to change until the 1.0 
version is released. That is exactly why I have been pushing for it. Once the 
1.0 milestone is set, that will be the way it lives for that version FOREVER. 
That is when people can count on it being stable.

> All the "users" will need to update their makefiles, projects and/or
> batches/scripts to the new lib names and replace all the GTI_ to
> HB_GTI_ for what if the developers are "looking elsewhere"?
>
> For me "old" names where consistent with Clipper lib names:
>
> 1. dir source/rdd/dbfcdx creates lib dbfcdx
> 2. in the source there is
>    REQUEST DBFCDX
>    rddSetDefault( "DBFCDX" )
> 3. in the Clipper 5.x drivers guide the drivers is called DBFCDX in all
> examples
>
> Now after 8 years and 3 betas the lib become suddenly rddcdx.
>
> I think we should rename the libs as they were and revert HB_GTI to GTI_.
> 1.0 RC should be usable by a beta3 user without any modification.

To me, this is just resistance to change for the matter of past convenience. 
It's not a very compelling argument.

Like all changes, soon this one will seem normal.

For now, it will disturb a smaller number of people. If not changed, it will 
disturb a larger number of people for a longer time.

-- 
"Sometimes I wonder whether the world is being run by smart people who are 
putting us on or by imbeciles who really mean it." - Mark Twain
From philb at philb.us  Sat Feb  9 08:52:19 2008
From: philb at philb.us (Phil Barnett)
Date: Sat Feb  9 08:52:22 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <20080209113111.GB5458@localhost.localdomain>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>
	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>
	<20080209113111.GB5458@localhost.localdomain>
Message-ID: <200802090852.19515.philb@philb.us>

On Saturday 09 February 2008 06:31:11 am Przemyslaw Czerpak wrote:
> Anyhow I do
> not want to be master of release process. I can create binaries
> for some platforms when we will be ready but I do not want to
> decide about terms, create SVN tags, etc. I believe that we will
> find someone who can make it much better then me.

I can do this, but I need a list of what issues are in the open.

-- 
"Sometimes I wonder whether the world is being run by smart people who are 
putting us on or by imbeciles who really mean it." - Mark Twain
From lorenzo.fiorini at gmail.com  Sat Feb  9 12:05:51 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Feb  9 12:05:56 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <20080209113111.GB5458@localhost.localdomain>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>
	<200802082333.59785.philb@philb.us>
	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>
	<20080209113111.GB5458@localhost.localdomain>
Message-ID: <9257026e0802090905h4b15ddacqa547a6c031d99964@mail.gmail.com>

On Feb 9, 2008 12:31 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> Not exactly again. I only plan to reduce my activity in this
> project and concentrate on some other things - believe me
> that Harbour is not my whole life :-).

I'm very happy to read this.
Since time is never enough "by definition" I still think that a "two
tiers" development will help all.

Core developers could work in a "forge" without having to worry about
releases, makefiles, packages and so on, while others would take the
sources from the forge and do all the release tasks.

IMHO this will greatly speed up the development.

> But as I said there are still some things I started and I would like to finish
> them like MT mode or multi window core GT API.

Sorry if I ask but how much it'll take to have MT mode?
I have some projects that really need multitasking and I've to decide
what to do so having even a vague idea about the time frame could
help.

Please understand me, I'm not asking the release day :) but simply if
it can take 1 month or 1 year.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sat Feb  9 15:43:21 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Feb  9 15:43:03 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <9257026e0802090217h401ae0a6jc30d62cd75221894@mail.gmail.com>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>
	<200802082333.59785.philb@philb.us>
	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>
	<200802090133.09715.philb@philb.us>
	<9257026e0802090217h401ae0a6jc30d62cd75221894@mail.gmail.com>
Message-ID: <5E72AA91-2947-4417-8D60-B2C1716BE70D@syenar.hu>

Hi Lorenzo,

> Do you really find a change like this between beta3 and RC necessary  
> and needed?

It could certainly help in the future that such concerns
would be expressed before deciding about these changes,
yet, all I got was silence (from you) and a few approvals.

Silence used to be considered "okey", "no concern" or
"I don't care".

> All the "users" will need to update their makefiles, projects and/or
> batches/scripts to the new lib names and replace all the GTI_ to

Since we have a problem which we would need to solve eventually
anyway, what is the better time for it: Before 1.0? or after 1.0?

I think "before" suggests a more mature approach for any projects.

And the overall work to be done for all developers is at least
the same for both cases, but probably less with the "before"
approach.

> HB_GTI_ for what if the developers are "looking elsewhere"?

Not true. See below.

> For me "old" names where consistent with Clipper lib names:
>
> 1. dir source/rdd/dbfcdx creates lib dbfcdx
> 2. in the source there is
>   REQUEST DBFCDX
>   rddSetDefault( "DBFCDX" )

First of all this haven't changed. Second, we have
RDD names which don't have anything to do with
the lib name ("DBFDBT" for one example), if that's
what you are saying. Since one RDD lib file may
contain multiple RDD names, syncing these names
cannot be a goal.

> 3. in the Clipper 5.x drivers guide the drivers is called DBFCDX in  
> all examples

Well, all of our filenames differ from CA-Cl*pper
for that matter. Except the header files of course.

This is for a purpose.

I find it very odd to name our libs the same way as
Clipper, as this was for example making it impossible
to use a common LIBRARY envvar pointing to both the
CA-Cl*pper libs and the Harbour ones (for BCC32, MSVC,
and probably more).

> Now after 8 years and 3 betas the lib become suddenly rddcdx.
>
> I think we should rename the libs as they were and revert HB_GTI to  
> GTI_.
> 1.0 RC should be usable by a beta3 user without any modification.

GTI_* is _still_ available the same way as it was. The only
thing changed is that it's now in "compatibility" status
rather than "primary" status, and those who have collisions
can _explicitly_ and optionally switch them off. I'm writing
this the 3rd time, first time being the ChangeLog entry itself.
Maybe I wasn't clear enough.

Again: GTI_* _still_ _do_ _work_. App code _doesn't need any
modification_ to compile (both C and Harbour).

The only implication is that in Harbour core/contrib code,
HB_GTI_* usage is encouraged (but GTI_* would still work).

Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Feb  9 15:52:42 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Feb  9 15:52:22 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <200802090850.31651.philb@philb.us>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>
	<200802090133.09715.philb@philb.us>
	<9257026e0802090217h401ae0a6jc30d62cd75221894@mail.gmail.com>
	<200802090850.31651.philb@philb.us>
Message-ID: <4F00110A-EDB0-4570-B7B9-9FAD2F199F4E@syenar.hu>

>> I think we should rename the libs as they were and revert HB_GTI to  
>> GTI_.
>> 1.0 RC should be usable by a beta3 user without any modification.
>
> To me, this is just resistance to change for the matter of past  
> convenience.
> It's not a very compelling argument.
>
> Like all changes, soon this one will seem normal.
>
> For now, it will disturb a smaller number of people. If not changed,  
> it will
> disturb a larger number of people for a longer time.

Actually if I'd felt a stronger support for this matter,
I'd have most probably moved these GTI_* #defines away to
hbcompat.ch (or nowhere). Since I believe these don't belong
to Harbour.

Still, if we want to do this, I agree with Phil to do it rather
now, than later, to have as small impact as possible for end
users.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Feb  9 16:01:33 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Feb  9 16:01:13 2008
Subject: [Harbour] 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080209125342.GA6652@localhost.localdomain>
References: <200802040832.m148WKBe006413@31-mo5-4.acn.waw.pl>
	<35DBAB68-0616-4195-AC54-F86A8D6FEE73@syenar.hu>
	<20080207110108.GA8878@localhost.localdomain>
	<4DD5C09A-9D28-4312-9772-CD1AA4001A13@syenar.hu>
	<20080208021241.GA5245@localhost.localdomain>
	<ABBD12B8-A5B8-4030-94E6-D9A9EFD539AB@syenar.hu>
	<20080209125342.GA6652@localhost.localdomain>
Message-ID: <82D4AC57-22DB-42B3-9BAD-C926DA1B2F7B@syenar.hu>

Thanks Przemek.

I'll look into this header package problem tomorrow.

One thing that would help a lot here, is to have a
separate include dir inside the Harbour source tree,
which is empty in the repository, and where these
headers could be spilled from the 3rd party header
zip file.

Such a folder could be /include/3rdparty/ or
/include/usr/

Then, all make our systems could be extended to look
for headers in that folder too.

Otherwise, we'd need to end up spilling lots of foreign
header files into /include/, which is not very good,
maybe even a show stopper, or I need to rethink the
way BC/VC non-GNU makes files are looking for the
headers to be compatible with this new method (currently
these are getting the root path of the package, and
each contrib will "know" where to look for headers
inside that package root dir)

I'm not sure I was clear :-/

Brgds,
Viktor

On 2008.02.09., at 13:53, Przemyslaw Czerpak wrote:

> On Fri, 08 Feb 2008, Szak?ts Viktor wrote:
> [...]
>> With all due respect if someone creating an official
>> binary release is not able to do this, we may have some
>> other problems too.
>
> Viktor, the most important is that it will be necessary to make
> some modifications before compilation. I intentionally always
> tried to reduce them to avoid problems and typos during manual
> updating.
> I do not expect that packager will have any deep knowledge
> about OS or programming. I only want to ask him to run one
> of the build script and send us the results. It will greatly
> reduce differences between binary builds of the same release
> we had in the past. I also think that it will be good to add
> sth like make_tgz.sh for Windows users who do not use *nix
> like shell for BCC, MSVC, POCC binaries. We also still do not
> have make_os2.cmd which is necessary for OS2 users - now they
> are using make_gnu.cmd from older Harbour versions or from
> xHarbour.
>
>> As an alternate solution we might as well distribute
>> all those headers as a separate download, so that all
>> headers can be copied to one dir, or to each contrib
>> dir, and do the build as usual. This way it's not in
>> the SVN, but still easy to access for everyone with
>> just one easy extra step (to be done once) to extract
>> to /include/.
>> I can even prepare such a file.
>> What do you think about it?
>
> It will help and maybe it's quite good final solution though
> it will not resolve the problem of RPMs for cross builds when
> user do not have write access to cross compiler environment.
> But I do not understand why it's important to make the packagers'
> life harder during RC tests. We already spend more time discussing
> it then it's worth. Anyhow I'll update spec files and add optional
> support for zlib so if someone will want create Harbour RPMs native
> or for cross build (Win32 and WinCE) with ZLIB support then it will
> be necessary to use --with zlib switch. Of course after adding the
> header files to one of include paths. At least it will reduce the
> problem.
>
>> I can understand your POV and I'd definitely miss your
>> contributions. I also plan to move away, especially since
>> I still have no direct business interest in contributing
>> to Harbour, but other things are constantly growing on me.
>> Maybe making a few clients switch to the Win32 version of
>> my app could change that.
>
> Each of us has own life which is the most important of us.
> I will also miss your contributions.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sat Feb  9 16:02:50 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Feb  9 16:02:29 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <20080209113111.GB5458@localhost.localdomain>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>
	<200802082333.59785.philb@philb.us>
	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>
	<20080209113111.GB5458@localhost.localdomain>
Message-ID: <C6E93632-9C67-45EE-888D-8539595D6FF5@syenar.hu>

>>
Hi Przemek,

>> So since it's unlike we'll have a 1.1 I think we should at least  
>> leave
>> the lib names as they have been in the last 8 years and do a favor to
>> poor users.
>
> It's also important argument though in fact there is a problem that
> we do not have compiler and linker wrapper which can work in non bash
> environment. Sth like hb* scripts which fully hides library names for
> end users so they will not notice any difference. Creating sth like  
> that
> in C seems to be important.

It would definitely be useful. HBMAKE has similar purpose,
but it's a fully broken app.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Feb  9 16:08:51 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Feb  9 16:08:28 2008
Subject: [Harbour] 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080209125342.GA6652@localhost.localdomain>
References: <200802040832.m148WKBe006413@31-mo5-4.acn.waw.pl>
	<35DBAB68-0616-4195-AC54-F86A8D6FEE73@syenar.hu>
	<20080207110108.GA8878@localhost.localdomain>
	<4DD5C09A-9D28-4312-9772-CD1AA4001A13@syenar.hu>
	<20080208021241.GA5245@localhost.localdomain>
	<ABBD12B8-A5B8-4030-94E6-D9A9EFD539AB@syenar.hu>
	<20080209125342.GA6652@localhost.localdomain>
Message-ID: <197941A8-D0CA-4527-8000-E46D3B2766F1@syenar.hu>

> have make_os2.cmd which is necessary for OS2 users - now they
> are using make_gnu.cmd from older Harbour versions or from
> xHarbour.

Yes, unfortunately it means to update every such file
in one more copy, which work will fall back to us, or
they won't really be updated ever.

This is true for make_*os2.cmd, bld.cmd, etc. If these
were updated by the OS/2 users here (David?), I think
they're okey, once we've agreed on the filenames.

I'd suggest /make_gnu_os2.cmd which is uglier, but
clearer IMO, since it also suggest we're talking about
the GNU make system, not something fully separate OS/2
stuff. Long filenames, we already have.

For the other batch file: /bin/bld_os2.cmd

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Sat Feb  9 16:28:18 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Feb  9 16:28:22 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <5E72AA91-2947-4417-8D60-B2C1716BE70D@syenar.hu>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>
	<200802082333.59785.philb@philb.us>
	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>
	<200802090133.09715.philb@philb.us>
	<9257026e0802090217h401ae0a6jc30d62cd75221894@mail.gmail.com>
	<5E72AA91-2947-4417-8D60-B2C1716BE70D@syenar.hu>
Message-ID: <9257026e0802091328i6dc58161v56ac71378ed44ed7@mail.gmail.com>

On Feb 9, 2008 9:43 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> It could certainly help in the future that such concerns
> would be expressed before deciding about these changes,
> yet, all I got was silence (from you) and a few approvals.

At that time I thought that all the core developers agreed on it. In
this case my opinion doesn't matter but when the "change" showed to be
more complex than expected I simply suggested a quick solution: revert
and plan it more carefully.

Now it's clear that even other core developers had not a clear idea of
the results of this change and so I expressed my opinion with the aim
to find a solution.

Why gtwvw moved to hbgtwvw and back to gtwvw?
Because gt libs are "drivers" exactly like dbfcdx.

What I mean is that rtl lib is never referenced in the code while
dbfcdx need a REQUEST and a RddSetDefault so DBFCDX name will never
die and adding rddcdx will not make things more clear.

best regards,
Lorenzo
From druzus at acn.waw.pl  Sat Feb  9 16:43:07 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Feb  9 16:43:14 2008
Subject: [Harbour] 2008-02-09 22:42 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200802092143.m19Lh7gd013185@31-mo5-4.acn.waw.pl>

2008-02-09 22:42 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/harbour.spec
  * harbour/harbour-ce-spec
  * harbour/harbour-w32-spec
  * harbour/make_rpm.sh
  * harbour/make_rpmce.sh
  * harbour/make_rpmw32.sh
    * updated for recent changes in library names
    * added '--with zlib' build switch
    * changed '--without odbc' to '--with odbc'
    * changed '--with adsrdd' to '--with ads'

  * harbour/debian/control
    * updated note about supported platforms

best regards
Przemek
From druzus at acn.waw.pl  Sat Feb  9 16:58:31 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Feb  9 16:58:38 2008
Subject: [Harbour] 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <82D4AC57-22DB-42B3-9BAD-C926DA1B2F7B@syenar.hu>
References: <200802040832.m148WKBe006413@31-mo5-4.acn.waw.pl>
	<35DBAB68-0616-4195-AC54-F86A8D6FEE73@syenar.hu>
	<20080207110108.GA8878@localhost.localdomain>
	<4DD5C09A-9D28-4312-9772-CD1AA4001A13@syenar.hu>
	<20080208021241.GA5245@localhost.localdomain>
	<ABBD12B8-A5B8-4030-94E6-D9A9EFD539AB@syenar.hu>
	<20080209125342.GA6652@localhost.localdomain>
	<82D4AC57-22DB-42B3-9BAD-C926DA1B2F7B@syenar.hu>
Message-ID: <20080209215831.GA25615@localhost.localdomain>

On Sat, 09 Feb 2008, Szak?ts Viktor wrote:
> I'll look into this header package problem tomorrow.
> One thing that would help a lot here, is to have a
> separate include dir inside the Harbour source tree,
> which is empty in the repository, and where these
> headers could be spilled from the 3rd party header
> zip file.
> Such a folder could be /include/3rdparty/ or
> /include/usr/

I like the idea of separated subdirectory with some 3-rd party
header files. It will resolve the problem. And to be clear.
I do not want to put all 3-rd party header files in this directory
and in most cases I will vote against adding new ones. We can keep
3-rd header files only if our library is very important for many
users so it should be included in default builds and we do not have
to worry much about binary compatibility with different releases
of 3-rd party library. In this case (ACE and ZLIB) all these
conditions are passed. In the future we will have to add zlib
support to core code probably like hbpcre so it can be easy
replaced by native libraries. zlib support will be necessary
to implement some important features like online inet socket
compression or compressed memo files.

best regards,
Przemek
From bedipritpal at hotmail.com  Sat Feb  9 21:07:32 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Feb  9 21:07:36 2008
Subject: [Harbour] OLE Implementation - xHarbour Compatibility
Message-ID: <15392521.post@talk.nabble.com>


Hello Everybody

Has anybody been able to use xHarbour's win32ole.prg in Harbour ?

I am in a process of porting an huge application which is heavily based on
Active-X's. The application takes advantage of FreeWin (SourceForge) library
and hosts many objects. I am struck at hb_oleItemToVariant() and
hb_oleVariantToItem() functions which is used in FreeWin's AxEv.c and are
not available in Harbour.

Can someone convert these function to honor Harbour API ?

Thanks and regards
Pritpal Bedi, INDIA-USA
-- 
View this message in context: http://www.nabble.com/OLE-Implementation---xHarbour-Compatibility-tp15392521p15392521.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sat Feb  9 21:33:24 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Feb  9 21:33:04 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <9257026e0802091328i6dc58161v56ac71378ed44ed7@mail.gmail.com>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>
	<200802082333.59785.philb@philb.us>
	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>
	<200802090133.09715.philb@philb.us>
	<9257026e0802090217h401ae0a6jc30d62cd75221894@mail.gmail.com>
	<5E72AA91-2947-4417-8D60-B2C1716BE70D@syenar.hu>
	<9257026e0802091328i6dc58161v56ac71378ed44ed7@mail.gmail.com>
Message-ID: <BA252EBB-F52A-4EB3-BE4A-B70AA7D3C24F@syenar.hu>

>
Hi Lorenzo,

> Why gtwvw moved to hbgtwvw and back to gtwvw?

Because Przemek raised the problem with lib
names under DJGPP, where 8.3 names has to be used
because it's DOS, and 'lib' is prepended by DJGPP,
hence only 5 chars remain to identify a given lib.
If we were using 'hb' prefix too for RDDs and GTs,
we would simple create identical filenames under
these situations. This new rule came up after
the contribs were already renamed, that's why I
had to adjust these to comply.

I don't love this restriction, but if we say we
support DJGPP, we need to take care of that.

hbcpage and hbcplr where also compromises taken
because of this rule (plus some consideration
for easier text searching, that's why I dropped
'hbc').

> Because gt libs are "drivers" exactly like dbfcdx.
>
> What I mean is that rtl lib is never referenced in the code while
> dbfcdx need a REQUEST and a RddSetDefault so DBFCDX name will never
> die and adding rddcdx will not make things more clear.

I'm still not sure what you mean. REQUEST DBFCDX _does_
remain, as DBFCDX here refers to a symbol inside the
lib, not the name of lib.

While using DBFCDX for the lib name might save 1
minute of initial setup for every new developer coming
to Harbour, it has the drawback that it's colliding
with CA-Cl*pper's similarly named lib. Aside from that,
I feel that giving 'rdd' prefix to all RDDs is much cleaner
than naming them almost randomly (ADSRDD, BMCDX, DBF*,
etc), because it's apparent at first glimpse which Harbour
RDDs are available in list of libs (when sorted by
name of course).

Lastly, - and I can just repeat myself - an "RDD lib"
may contain several RDD names inside, which, many times
are not equal to the lib name anyway:

rddads: ADS
rddcdx: DBFCDX, SIXCDX
rddfpt: DBFFPT, DBFBLOB

So we're not creating a new set of problem with these
new names.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Feb  9 21:43:29 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Feb  9 21:43:08 2008
Subject: [Harbour] 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080209215831.GA25615@localhost.localdomain>
References: <200802040832.m148WKBe006413@31-mo5-4.acn.waw.pl>
	<35DBAB68-0616-4195-AC54-F86A8D6FEE73@syenar.hu>
	<20080207110108.GA8878@localhost.localdomain>
	<4DD5C09A-9D28-4312-9772-CD1AA4001A13@syenar.hu>
	<20080208021241.GA5245@localhost.localdomain>
	<ABBD12B8-A5B8-4030-94E6-D9A9EFD539AB@syenar.hu>
	<20080209125342.GA6652@localhost.localdomain>
	<82D4AC57-22DB-42B3-9BAD-C926DA1B2F7B@syenar.hu>
	<20080209215831.GA25615@localhost.localdomain>
Message-ID: <5D412017-82CB-4CA0-B4F3-60762F7A5292@syenar.hu>

>
Hi Przemek,

> On Sat, 09 Feb 2008, Szak?ts Viktor wrote:
>> I'll look into this header package problem tomorrow.
>> One thing that would help a lot here, is to have a
>> separate include dir inside the Harbour source tree,
>> which is empty in the repository, and where these
>> headers could be spilled from the 3rd party header
>> zip file.
>> Such a folder could be /include/3rdparty/ or
>> /include/usr/
>
> I like the idea of separated subdirectory with some 3-rd party
> header files. It will resolve the problem. And to be clear.
> I do not want to put all 3-rd party header files in this directory
> and in most cases I will vote against adding new ones. We can keep

I've actually proposed to leave this dir _empty_ in the
repository, so such decisions don't have to be made by us.
I my view, we should provide a list of headers separately,
as an easy download, with all the headers and license files
(which MUST be distributed with GNU stuff for example) and
other distribution stuff (if needed) packaged together, in
an easy to unzip way.

"Builders" would have to unzip this file to this Harbour
3rd party include dir locally, and start the process
without worries about missing headers.

Actually the only file I'd put in this dir in Harbour
SVN, is a .txt file pointing to the right place to go
for this header package.

> 3-rd header files only if our library is very important for many
> users so it should be included in default builds and we do not have
> to worry much about binary compatibility with different releases
> of 3-rd party library. In this case (ACE and ZLIB) all these
> conditions are passed. In the future we will have to add zlib
> support to core code probably like hbpcre so it can be easy
> replaced by native libraries. zlib support will be necessary
> to implement some important features like online inet socket
> compression or compressed memo files.

For zlib I think we could include it as well in core,
but I'd only vote to include the header if we would
include the whole source tree, like we do with PCRE.
"native" ZLIB support, without the need of any dynamic
libs, would be great.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Feb  9 22:03:23 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Feb  9 22:05:26 2008
Subject: [Harbour] CHANGELOG: 2008-02-10 04:03 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c86b91$Blat.v2.6.2$7f51cc5a$c4019deb7ea@127.0.0.1>

2008-02-10 04:03 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * common.mak
   * source/lang/Makefile
   + source/lang/msgbgmik.c
   + source/lang/msgbe866.c
   + source/lang/msgbewin.c
   + source/lang/msghr437.c
   + source/lang/msghrwin.c
   + source/lang/msgua866.c
   + source/lang/msguakoi.c
   + source/lang/msguawin.c
     + Added some msg files from xhb. Some problems corrected.
       (Belarussian ISO code, long filename and internal ID 
       for HR1250)
--
Brgds,
Viktor

From mbelgrano at deltain.it  Sun Feb 10 06:27:47 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Feb 10 07:06:57 2008
Subject: [Harbour] last version of borland bcc for harbour
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815E95C@SRV02.deltain.net>

Wich is last version of borland bcc?
Is compatible with lib made for BCC 5.5?
Is possible in harbour a standard of lib independent from c compiler?
If I use a library like sqlrdd/mediator for bcc I must use bcc or is
possible use another compiler

Have anyone tried using visual studio extensibility for create a
Language Service and a Language Editor for [X]harbour<'
ms-help://MS.VSCC.v80/MS.VSIPCC.v80/MS.VSSDK.v80/dv_vsintegration/html/2
700cd4d-5f68-43fc-b62f-dc80c3f3aa85.htm

ms-help://MS.VSCC.v80/MS.VSIPCC.v80/MS.VSSDK.v80/dv_vsintegration/html/f
2df73ef-e943-4827-be21-a7f1920e1d8c.htm
I want to use Visual Studio so as to edit my Sources, maintain the
format for the Source code for these languages, plus control processing
through a single IDE.
Has anyone tried something like this, (possibly using Code Snippets &
Intellisense) to support additional languages?

From druzus at acn.waw.pl  Sun Feb 10 08:16:40 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Feb 10 08:21:09 2008
Subject: [Harbour] OLE Implementation - xHarbour Compatibility
In-Reply-To: <15392521.post@talk.nabble.com>
References: <15392521.post@talk.nabble.com>
Message-ID: <20080210131640.GA1101@localhost.localdomain>

On Sat, 09 Feb 2008, Pritpal Bedi wrote:
> Hello Everybody
> Has anybody been able to use xHarbour's win32ole.prg in Harbour ?

The ported version is in hbw32 library in w32_ole.c and w32_tole.prg
files. It's xHarbour's win32ole.prg code with some minor fixes AFAIR
even synced with recent xHarbour's modifications.
But please remember that this code inherited very serious problem
from xHarbour. If you are using BCC then it will need -a8 alignment
for OLE structures but it also access directly HB_ITEM internals
(it needs to include hbvmopt.h) so you have to compile also whole
Harbour core code with such alignment. It causes general slowness
because [x]Harbour HVM is slower when compiled with -a8 by BCC then
with -a4. It's sth what have to be definitely fixed because it can
also can be source of other problems which cannot be resolved at all.
F.e. commercial libraries can be also alignment dependent and compiled
with different alignment, f.e. -a4 and in such case you will not be
able to produce single binaries.

> I am in a process of porting an huge application which is heavily based on
> Active-X's. The application takes advantage of FreeWin (SourceForge) library
> and hosts many objects. I am struck at hb_oleItemToVariant() and
> hb_oleVariantToItem() functions which is used in FreeWin's AxEv.c and are
> not available in Harbour.
> Can someone convert these function to honor Harbour API ?

Fixing above alignment problem in xHarbour will also resolve the
problem of compilation in Harbour. Just simply by default Harbour
forbids danger operation and it's the reason why this code cannot
be compiled. So far no one tries to make it. In fact exactly these
to functions hb_oleItemToVariant() and hb_oleVariantToItem() should
be rewritten to not access item internals and this should resolve
the problem. If the alignment problem is unimportant for you then
you can use hacked version from hbw32 as is with Harbour compiled
with -a8. If you want to fix the problem then look at places marked
with TOFIX in contrib/hbw32/w32_ole.c - probably such fix can be also
valuable for xHarbour users.

best regards,
Przemek
From mbelgrano at deltain.it  Sun Feb 10 09:45:10 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Feb 10 09:47:17 2008
Subject: R: [Harbour] OLE Implementation - xHarbour Compatibility
In-Reply-To: <20080210131640.GA1101@localhost.localdomain>
References: <15392521.post@talk.nabble.com>
	<20080210131640.GA1101@localhost.localdomain>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815E95F@SRV02.deltain.net>


-----Messaggio originale-----
>Da: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] Per >conto di Przemyslaw
Czerpak
>Inviato: domenica 10 febbraio 2008 14.17
>But please remember that this code inherited very serious problem
>from xHarbour. If you are using BCC then it will need -a8 alignment
>for OLE structures but it also access directly HB_ITEM internals
>(it needs to include hbvmopt.h) so you have to compile also whole
>Harbour core code with such alignment. 

Which other deep problem do you know in Harbour or xharbour?


From mpaliwoda at interia.pl  Sun Feb 10 10:39:37 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sun Feb 10 10:40:31 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <47AD8390.70507@interia.pl>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>	<200802082333.59785.philb@philb.us>	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>	<47AD4A25.8080004@interia.pl>	<29EBEB77-B467-441F-B744-02533F0838BE@syenar.hu>
	<47AD8390.70507@interia.pl>
Message-ID: <47AF1AB9.8090100@interia.pl>

Marek Paliwoda wrote :

> [...]
>> One drawback which was mentioned on the list, is that we
>> have a different license for the compiler lib, the RTL
>> libs and pbly also PCRE. 
> 
> O s... ;-), I completly forgot about. But it means that
> we have problem with .dll (.so) builds also, haven't we ?

I investigated a problem a little bit more, and it seems that
the problem is *only* with compiler lib - it's pure GPL. Pcre
is licenced under BSD, so it is *not a problem*. This clearly
means that compiler lib *should not* be included in dll/so
builds, and end users should be explicitly warned about this
issue. I guess it has been done already, but I think it should
be clearly documented somehow. I have no idea how however :(.

>  > We also have some mutually exclusive libs.
>> Also, since GTs and RDDs are "plugin" type of libs, I wouldn't mix
>> them either in the global one. So, we might end up with a few
>> separate libs at the end.
>>
>> Actually - if I see this correctly - the latest changes in
>> the GNU make system have the benefit that it seems now much
>> easier to generate one global lib (Thanks a lot to
>> Ryszard for this work), than it would have been before.
> 
> Yes, I appreciate Ryszard's contribution very much. And yours,
> and Przemek's, and all others :).
> 
>> Having so many libs has nothing to do with any decisions
>> in the past, it was just how the project evolved, and some
>> new modules where simply put into new dirs (which is
>> perfectly okey) and all these automatically got separate libs.
>>
>> This is a possible simplified lib layout:
>> - harbour (hbcpage + hbcommon + hbdebug + hblang + hbmacro + hbpp + 
>> hbrdd + hbrtl + hbvm + hbrddusr + hbsix + hbhsx)
>> - hbcomp
>> - hbpcre
>> - gt*
>> - rdd*
>> - hbmain*
>> - hbnulrdd
>>
>> This was already mentioned on the list not long ago, and
>> there was not too many reactions to it.
> 
> That's a proposition which seems resonable, but let's discuss
> it after the release :).

Although the release has not been done yet ;-), I'd like to say
that after some investigation my opinion is that it's enough to
have only two libs : harbour static lib and compiler static lib.
Also harbour dll(so) should not contain compiler lib.
Other combinations are completly *not* rational to me.

-- 

Marek


----------------------------------------------------------------------
Przeboj mijajacego karnawalu, Jozin z Bazin w Twojej komorce 
Pobierz >>> http://link.interia.pl/f1cf9

From mpaliwoda at interia.pl  Sun Feb 10 10:45:16 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sun Feb 10 10:45:31 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <47AF1AB9.8090100@interia.pl>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>	<200802082333.59785.philb@philb.us>	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>	<47AD4A25.8080004@interia.pl>	<29EBEB77-B467-441F-B744-02533F0838BE@syenar.hu>
	<47AD8390.70507@interia.pl> <47AF1AB9.8090100@interia.pl>
Message-ID: <47AF1C0C.5070204@interia.pl>

Marek Paliwoda wrote :

> This clearly means that compiler lib *should not* be 
 > included in dll/so builds

And fortunately this *is* true for an alternative build system :).

-- 

Marek


----------------------------------------------------------------------
Myslisz, ze nie ma sniegu? Sprawd? gdzie mozesz poszusowac na nartach
 >>> http://link.interia.pl/f1cfb

From druzus at acn.waw.pl  Sun Feb 10 10:58:25 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Feb 10 10:58:40 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <9257026e0802090905h4b15ddacqa547a6c031d99964@mail.gmail.com>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>
	<200802082333.59785.philb@philb.us>
	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>
	<20080209113111.GB5458@localhost.localdomain>
	<9257026e0802090905h4b15ddacqa547a6c031d99964@mail.gmail.com>
Message-ID: <20080210155824.GA2193@localhost.localdomain>

On Sat, 09 Feb 2008, Lorenzo Fiorini wrote:
> Sorry if I ask but how much it'll take to have MT mode?
> I have some projects that really need multitasking and I've to decide
> what to do so having even a vague idea about the time frame could
> help.
> Please understand me, I'm not asking the release day :) but simply if
> it can take 1 month or 1 year.

I cannot answer clearly because I do not know how much spare time
I will have for it. Many things have been already implemented and
are MT ready. It will be necessary yet to update some parts of RTL
code, add few small modifications to RDD core code and update HVM.
In practice all modifications I have in my head and seems to not
be very complicated process but please remember that I want to start
with full functional MT implementation not like in xHarbour where
many things are not MT ready and some existing MT extensions breaks
normal code. F.e. today I've seen that Walter fixed calling supermethod
of the same object by different threads - it was never safe in xHarbour
though xHarbour has MT mode for years. In Harbour this code is MT ready
and this fix exists from:
   2006-08-23 23:12 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
Just simply even without MT support I changed a lot of internal structures
to be MT ready or to be easy adopt to future MT mode when I was working
on other core modifications. Now adding MT support to Harbour seems to
be much easier then fixing other very serious problems with MT mode in
xHarbour. But how much it will take and when I will find time for it?
I cannot say. If I'll start final updating for MT mode then probably
about month. This process can be divided if we add TLS code I sent
here few weeks ago because it will be possible to easy update most
of code which is still not safe in RTL and HVM to be MT ready and
then in some week I would change some HVM structures for MT mode
and the base version will be ready with full memvars and workarea
separation and optional GT separation with multi window mode.
Later we can add optional memvars and workarea sharing.
We have to clearly define which elements should be synced by users
and which ones are synced automatically by core code to avoid other
bad situations which exists in xHarbour. Probably no one knows all
possible unsafe places and some of them can cause relay unpredictable
results when xHarbour application will be executed on multi CPU machine.
F.e. it's still not safe to use OOP code in xHarbour MT mode and it
can be source of some unexpected GPF because information about class
and methods are stored in s_pClasses static variable. This variable
is systematically accessed by OOP code without any protection but
it also can be changed at any moment when some thread will create
new object from new class. In this moment new class is registered
and s_pClasses is reallocated. As workaround user code before starting
any threads should register all classes at startup (if they are all known
what may not be such easy when 3-rd party code is use) so later during
thread execution no new classes will be registered. But how many xHarbour
users or even developers know about it? And what about other hacks which
are not MT safe like overloading during execution module symbol table
address in codeblocks for scope checking? What will happen if the same
block will be executed by two different threads? Here also Harbour
is already MT safe without MT mode and xHarbour should be fixed.
If your code uses memvars and create many threads then it's also
not MT safe because for each memvar used in new thread new symbols
in dynamic symbol table are allocated and such memory cannot be ever
freed. Because each thread has cyclic ID counter up to 32000 (yet
another bug because this is cyclic counter without any protection
against repeated value in still running threads so hb_threadUniqueId()
does not have return unique thread symbol) then you can quite fast
allocate huge amount of memory which will be lost. etc. Memvar
separation have to be designed in absolutely different way. This
code was not committed to Harbour core code because it will be
necessary only for MT HVM.
OK. Enough. This message begins to be much longer then I've wanted.
In summary it's not hard job to add MT mode to current Harbour code
but it's important to make it well because MT bugs cannot be well
tested by simple application executing. It may work 1000 times but then
begins to fail randomly because some OS conditions has changed (f.e. other
CPU consuming application is executed) so time of task switching begins
to be much different. Or application seems to work correctly on single
CPU system but GPF randomly on dual core or multi processors machines.
In MT mode saying that sth was working correctly does not give any
usable information. Because it's possible but application is broken.
So it's very important to well design some conditions at startup because
later it will be very hard to detect source of bugs and fix them. In
practice the only one method is analyzing whole core code line by line.
At first stage it should be made reentrant safe (xHarbour still isn't
in some places) and then MT safe. Meanwhile all places which will need
additional user synchronization documented and it should be the most
important part of MT programmers guide for given language because
as I said writing code and checking if it runs even 1000 times is not
enough test of MT application.

best regards,
Przemek
From mpaliwoda at interia.pl  Sun Feb 10 10:59:14 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sun Feb 10 10:59:40 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <47AF1AB9.8090100@interia.pl>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>	<200802082333.59785.philb@philb.us>	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>	<47AD4A25.8080004@interia.pl>	<29EBEB77-B467-441F-B744-02533F0838BE@syenar.hu>
	<47AD8390.70507@interia.pl> <47AF1AB9.8090100@interia.pl>
Message-ID: <47AF1F52.6070601@interia.pl>

Marek Paliwoda wrote :

> I investigated a problem a little bit more

It appears to me that introducing one common
static library will not collide with "1.0"
release because we can keep current separated
libs together with one common static lib for
say, next two releases, and encourage people
to switch to a common lib in that time. So the
transition would be quite smooth.
I guess it would be even resonable to introduce
one common static lib in an upcoming "1.0" release
to start that process immidiately.

-- 

Marek


----------------------------------------------------------------------
Jozin z bazin! Ustaw jako dzwonek w Twoim telefonie 
Pobierz >>> http://link.interia.pl/f1cfa

From harbour.01 at syenar.hu  Sun Feb 10 11:53:53 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Feb 10 11:53:32 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <47AF1AB9.8090100@interia.pl>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>	<200802082333.59785.philb@philb.us>	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>	<47AD4A25.8080004@interia.pl>	<29EBEB77-B467-441F-B744-02533F0838BE@syenar.hu>
	<47AD8390.70507@interia.pl> <47AF1AB9.8090100@interia.pl>
Message-ID: <7D3470CC-6296-4A6D-8384-D949697319ED@syenar.hu>

>>
Hi Marek,

>> [...]
>>> One drawback which was mentioned on the list, is that we
>>> have a different license for the compiler lib, the RTL
>>> libs and pbly also PCRE.
>> O s... ;-), I completly forgot about. But it means that
>> we have problem with .dll (.so) builds also, haven't we ?
>
> I investigated a problem a little bit more, and it seems that
> the problem is *only* with compiler lib - it's pure GPL. Pcre
> is licenced under BSD, so it is *not a problem*. This clearly
> means that compiler lib *should not* be included in dll/so
> builds, and end users should be explicitly warned about this
> issue. I guess it has been done already, but I think it should
> be clearly documented somehow. I have no idea how however :(.

For one, we should definitely have separate lib/dlls, other
than that we have COPYING / LICENSE docs which must be included
in all distribution files we generate.

Actually I think we're currently missing these docs from
binary builds, maybe even source files, which should be
corrected in 1.0[RC]

I'm glad PCRE can be included w/o problems. What do you
think about including zlib source code / binaries in our
future distributions?

>> > We also have some mutually exclusive libs.
>>> Also, since GTs and RDDs are "plugin" type of libs, I wouldn't mix
>>> them either in the global one. So, we might end up with a few
>>> separate libs at the end.
>>>
>>> Actually - if I see this correctly - the latest changes in
>>> the GNU make system have the benefit that it seems now much
>>> easier to generate one global lib (Thanks a lot to
>>> Ryszard for this work), than it would have been before.
>> Yes, I appreciate Ryszard's contribution very much. And yours,
>> and Przemek's, and all others :).
>>> Having so many libs has nothing to do with any decisions
>>> in the past, it was just how the project evolved, and some
>>> new modules where simply put into new dirs (which is
>>> perfectly okey) and all these automatically got separate libs.
>>>
>>> This is a possible simplified lib layout:
>>> - harbour (hbcpage + hbcommon + hbdebug + hblang + hbmacro + hbpp  
>>> + hbrdd + hbrtl + hbvm + hbrddusr + hbsix + hbhsx)
>>> - hbcomp
>>> - hbpcre
>>> - gt*
>>> - rdd*
>>> - hbmain*
>>> - hbnulrdd
>>>
>>> This was already mentioned on the list not long ago, and
>>> there was not too many reactions to it.
>> That's a proposition which seems resonable, but let's discuss
>> it after the release :).
>
> Although the release has not been done yet ;-), I'd like to say
> that after some investigation my opinion is that it's enough to
> have only two libs : harbour static lib and compiler static lib.
> Also harbour dll(so) should not contain compiler lib.
> Other combinations are completly *not* rational to me.

To me it seems this can a possible static lib layout after
reading your mail:

- harbour (now including hbpcre too)
- hbcomp
- gt*
- rdd*
- hbmain*
- hbnulrdd

_Technically_ all gt* and rdd* could be included in 'harbour' lib.
But I'm not sure I'd like it that way, since it hides the fact
that these are plugins. More opinions would be welcome, here.

As for hbmain*, I'm not 100% sure of its purpose, or what is the
reason these have to be separate libs. (even if I hold the copyright
for vm/main.c... it has been a long time)

I'm also unsure about the exact purpose of hbnulrdd.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Feb 10 12:08:57 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Feb 10 12:08:35 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <47AF1F52.6070601@interia.pl>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>	<200802082333.59785.philb@philb.us>	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>	<47AD4A25.8080004@interia.pl>	<29EBEB77-B467-441F-B744-02533F0838BE@syenar.hu>
	<47AD8390.70507@interia.pl> <47AF1AB9.8090100@interia.pl>
	<47AF1F52.6070601@interia.pl>
Message-ID: <B23951C3-63BB-40B5-8339-431B5D4A4513@syenar.hu>

Hi Marek,

IMO we'll have to cleanup those few questions in my other
mail (from a few minutes ago), but other than that I fully
agree.

Remaining questions:

- Future hbzlib placement?
- gt*, rdd* separate or not? (IMO separate)
- What to do with hbmain* libs? Are they really necessary?
- Purpose of hbnulsys?

Finally, VERY important, but not strictly related to that:
Solving the obligatory inclusion of every LICENSE files
in every distribution (binary/source) we release.

We should investigate whether we must include any 3rd party
license texts. If the answer is yes, we must include these
as well (like LICENSE_PCRE.txt, LICENSE_ZLIB.txt) in both
binary and source distributions.

Brgds,
Viktor

On 2008.02.10., at 16:59, Marek Paliwoda wrote:

> Marek Paliwoda wrote :
>
>> I investigated a problem a little bit more
>
> It appears to me that introducing one common
> static library will not collide with "1.0"
> release because we can keep current separated
> libs together with one common static lib for
> say, next two releases, and encourage people
> to switch to a common lib in that time. So the
> transition would be quite smooth.
> I guess it would be even resonable to introduce
> one common static lib in an upcoming "1.0" release
> to start that process immidiately.
>
> -- 
>
> Marek
>
>
> ----------------------------------------------------------------------
> Jozin z bazin! Ustaw jako dzwonek w Twoim telefonie Pobierz >>> http://link.interia.pl/f1cfa
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mpaliwoda at interia.pl  Sun Feb 10 14:02:34 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sun Feb 10 14:02:41 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <B23951C3-63BB-40B5-8339-431B5D4A4513@syenar.hu>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>	<200802082333.59785.philb@philb.us>	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>	<47AD4A25.8080004@interia.pl>	<29EBEB77-B467-441F-B744-02533F0838BE@syenar.hu>	<47AD8390.70507@interia.pl>
	<47AF1AB9.8090100@interia.pl>	<47AF1F52.6070601@interia.pl>
	<B23951C3-63BB-40B5-8339-431B5D4A4513@syenar.hu>
Message-ID: <47AF4A4A.1000608@interia.pl>

Hi Viktor,

> IMO we'll have to cleanup those few questions in my other
> mail (from a few minutes ago), but other than that I fully
> agree.
> 
> Remaining questions:
> 
> - Future hbzlib placement?

I did not investigate zlib/hbzlib problem. After all,
currently it's in contrib. But my experience with some
OpenSource projects (fltk, wxWidgets) shows that they
contain zlib library in source form and they build it
into a separate library (static) if the final platform
does not have it nativly.

On the other hand, PCRE explicitly allows to use it in
binary and *in source* form, provided that the original
Copyright notice is *retained*.

A fragment from a PRCE licence :
---------------------------------------------
Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

     * Redistributions of source code must retain the above copyright notice,
       this list of conditions and the following disclaimer.

     * Redistributions in binary form must reproduce the above copyright
       notice, this list of conditions and the following disclaimer in the
       documentation and/or other materials provided with the distribution.
---------------------------------------------

> - gt*, rdd* separate or not? (IMO separate)

I disagree. Having them as separate libraries has no advantages.
I just made some tests with GTs under BCC and including them in
link command changes *nothing*, until you *explicitly* REQUEST
a particular GT. So having them as separate libraries give us
nothing except complications in further link command, as oposed
to putting a *simple* REQUEST in prg source with one common lib.

> - What to do with hbmain* libs? Are they really necessary?

AFAIK it allows to build console programs vs GUI programs under
MingW and Cygwin. Linking against mainstd lib builds console
programs. However I may be wrong here, because I've never used
this feature.

> - Purpose of hbnulsys?

AFAIK it allows to build programs which do not require *any*
DBF access. It's serves as a plumbing. It has to be a separate
library. Thanks for pointing this.

> Finally, VERY important, but not strictly related to that:
> Solving the obligatory inclusion of every LICENSE files
> in every distribution (binary/source) we release.

I think we have to include ALL such licences either in source
or binary distributions.

> We should investigate whether we must include any 3rd party
> license texts. If the answer is yes, we must include these
> as well (like LICENSE_PCRE.txt, LICENSE_ZLIB.txt) in both
> binary and source distributions.

IMO we have to.

-- 

Marek


----------------------------------------------------------------------
Jozin z bazin! Ustaw jako dzwonek w Twoim telefonie 
Pobierz >>> http://link.interia.pl/f1cfa

From druzus at acn.waw.pl  Sun Feb 10 15:36:59 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Feb 10 15:37:17 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <7D3470CC-6296-4A6D-8384-D949697319ED@syenar.hu>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>
	<200802082333.59785.philb@philb.us>
	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>
	<47AD4A25.8080004@interia.pl>
	<29EBEB77-B467-441F-B744-02533F0838BE@syenar.hu>
	<47AD8390.70507@interia.pl> <47AF1AB9.8090100@interia.pl>
	<7D3470CC-6296-4A6D-8384-D949697319ED@syenar.hu>
Message-ID: <20080210203659.GA3490@localhost.localdomain>

On Sun, 10 Feb 2008, Szak?ts Viktor wrote:
> I'm glad PCRE can be included w/o problems. What do you
> think about including zlib source code / binaries in our
> future distributions?

This is from zlib header:

/* zlib.h -- interface of the 'zlib' general purpose compression library
  version 1.2.3, July 18th, 2005

  Copyright (C) 1995-2005 Jean-loup Gailly and Mark Adler

  This software is provided 'as-is', without any express or implied
  warranty.  In no event will the authors be held liable for any damages
  arising from the use of this software.

  Permission is granted to anyone to use this software for any purpose,
  including commercial applications, and to alter it and redistribute it
  freely, subject to the following restrictions:

  1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
  2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
  3. This notice may not be removed or altered from any source distribution.

  Jean-loup Gailly        Mark Adler
  jloup@gzip.org          madler@alumni.caltech.edu


  The data format used by the zlib library is described by RFCs (Request for
  Comments) 1950 to 1952 in the files http://www.ietf.org/rfc/rfc1950.txt
  (zlib format), rfc1951.txt (deflate format) and rfc1952.txt (gzip format).
*/

so as you can see it can be added to Harbour core code without any
problems. I think that separate directory like source/hbpcre will
be good place for it and just like for PCRE we should add easy to
use option for people who will want use platform native zlib
implementation. For PCRE we have set of macros you can set in C_USR
envvar before building Harbour to reach such effect, f.e. -DHB_POSIX_REGEX
We can use:

   HB_POSIX_REGEX - use POSIX regex instead of PCRE, it should work
                    on all POSIX systems (f.e. in *nixes)

   HB_PCRE_REGEX  - use platform native PCRE library

   HB_PCRE_REGEX_BCC - use old PCRE library build into BCC CRTL

when non of the above is set then our own copy of PCRE is used.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Feb 10 15:39:42 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Feb 10 15:40:15 2008
Subject: [Harbour] Re: 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <111782943.20080208191851@belacy.belgorod.su>
References: <200802040832.m148WKBe006413@31-mo5-4.acn.waw.pl>
	<35DBAB68-0616-4195-AC54-F86A8D6FEE73@syenar.hu>
	<20080207110108.GA8878@localhost.localdomain>
	<4DD5C09A-9D28-4312-9772-CD1AA4001A13@syenar.hu>
	<20080208021241.GA5245@localhost.localdomain>
	<111782943.20080208191851@belacy.belgorod.su>
Message-ID: <20080210203942.GB3490@localhost.localdomain>

On Fri, 08 Feb 2008, Alexander S.Kresin wrote:
> PC> Brian, can you ask extended system if we can have ace.h in
> PC> our SVN/CVS repositories?
>  I had requested for such permission in December, 1999. And I got an
>  answer from them, which I immedeately posted to this mail list.
>  Here is this answer:
> =======================
> "The full source thing answers the question.  We should not care if
> ACE.H
> gets distributed as part of the Harbour source.  The copyright notice
> needs
> to be maintained, though.  Alexander may want to add some information
> somewhere about where to get updates if necessary (i.e. the Advantage
> web
> site)."
> 
> This is the reply I got from Mike Lydon our R&D manager.  You should
> have
> all the software.  Just add a copyright notice to your licensing and
> that
> should work.  
> 
> Bill Schuler
> Database Products
> Southeast Sales Manager
> Phone (800)235-7576 ext. 6051
>       (208)322-7575 ext. 6051
> Fax   (208)327-5006
> bills@extendsys.com
> 5777 N. Meeker Ave. 
> Boise, ID 83711
> http://www.advantagedatabase.com
> http://solutions.advantagedatabase.com
> ============================

Thank you.
IMHO we should add the above note at the beginning of ace.h
if we will decide to keep our own copy in core code.

best regards,
Przemek
From harbour.01 at syenar.hu  Sun Feb 10 16:15:17 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Feb 10 16:14:57 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <47AF4A4A.1000608@interia.pl>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>	<200802082333.59785.philb@philb.us>	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>	<47AD4A25.8080004@interia.pl>	<29EBEB77-B467-441F-B744-02533F0838BE@syenar.hu>	<47AD8390.70507@interia.pl>
	<47AF1AB9.8090100@interia.pl>	<47AF1F52.6070601@interia.pl>
	<B23951C3-63BB-40B5-8339-431B5D4A4513@syenar.hu>
	<47AF4A4A.1000608@interia.pl>
Message-ID: <ABCC9C8E-8753-43B6-A63C-017DB4B14329@syenar.hu>

>
Hi Marek,

> I did not investigate zlib/hbzlib problem. After all,
> currently it's in contrib. But my experience with some

I know, but we plan to add it in full source into /src/

>> - gt*, rdd* separate or not? (IMO separate)
>
> I disagree. Having them as separate libraries has no advantages.
> I just made some tests with GTs under BCC and including them in
> link command changes *nothing*, until you *explicitly* REQUEST
> a particular GT. So having them as separate libraries give us
> nothing except complications in further link command, as oposed
> to putting a *simple* REQUEST in prg source with one common lib.

I know it makes no _technical_ difference.

I like it better still, because these are "plugins" in a sense.

>> - Purpose of hbnulsys?
>
> AFAIK it allows to build programs which do not require *any*
> DBF access. It's serves as a plumbing. It has to be a separate
> library. Thanks for pointing this.

Question is, what benefit does it have over including a random
RDDs? (executable file size?) Especially if we end up including
all RDDs to one unified harbour lib.

>> Finally, VERY important, but not strictly related to that:
>> Solving the obligatory inclusion of every LICENSE files
>> in every distribution (binary/source) we release.
>
> I think we have to include ALL such licences either in source
> or binary distributions.

I've checked the win32 beta3 binary distro, and it indeed have
COPYING in the root (dunno about others). We seem to miss the
license of PCRE/ZLib-MiniZip though.

>> We should investigate whether we must include any 3rd party
>> license texts. If the answer is yes, we must include these
>> as well (like LICENSE_PCRE.txt, LICENSE_ZLIB.txt) in both
>> binary and source distributions.
>
> IMO we have to.

I agree.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Feb 10 16:16:52 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Feb 10 16:16:30 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <20080210203659.GA3490@localhost.localdomain>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>
	<200802082333.59785.philb@philb.us>
	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>
	<47AD4A25.8080004@interia.pl>
	<29EBEB77-B467-441F-B744-02533F0838BE@syenar.hu>
	<47AD8390.70507@interia.pl> <47AF1AB9.8090100@interia.pl>
	<7D3470CC-6296-4A6D-8384-D949697319ED@syenar.hu>
	<20080210203659.GA3490@localhost.localdomain>
Message-ID: <455271D1-BD94-417B-90EB-19D5B39FAA99@syenar.hu>

Hi Przemek,

Sounds good.

/source/hbzlib/ would the right dir for it IMO.

Brgds,
Viktor

On 2008.02.10., at 21:36, Przemyslaw Czerpak wrote:

> On Sun, 10 Feb 2008, Szak?ts Viktor wrote:
>> I'm glad PCRE can be included w/o problems. What do you
>> think about including zlib source code / binaries in our
>> future distributions?
>
> This is from zlib header:
>
> /* zlib.h -- interface of the 'zlib' general purpose compression  
> library
>  version 1.2.3, July 18th, 2005
>
>  Copyright (C) 1995-2005 Jean-loup Gailly and Mark Adler
>
>  This software is provided 'as-is', without any express or implied
>  warranty.  In no event will the authors be held liable for any  
> damages
>  arising from the use of this software.
>
>  Permission is granted to anyone to use this software for any purpose,
>  including commercial applications, and to alter it and redistribute  
> it
>  freely, subject to the following restrictions:
>
>  1. The origin of this software must not be misrepresented; you must  
> not
>     claim that you wrote the original software. If you use this  
> software
>     in a product, an acknowledgment in the product documentation  
> would be
>     appreciated but is not required.
>  2. Altered source versions must be plainly marked as such, and must  
> not be
>     misrepresented as being the original software.
>  3. This notice may not be removed or altered from any source  
> distribution.
>
>  Jean-loup Gailly        Mark Adler
>  jloup@gzip.org          madler@alumni.caltech.edu
>
>
>  The data format used by the zlib library is described by RFCs  
> (Request for
>  Comments) 1950 to 1952 in the files http://www.ietf.org/rfc/rfc1950.txt
>  (zlib format), rfc1951.txt (deflate format) and rfc1952.txt (gzip  
> format).
> */
>
> so as you can see it can be added to Harbour core code without any
> problems. I think that separate directory like source/hbpcre will
> be good place for it and just like for PCRE we should add easy to
> use option for people who will want use platform native zlib
> implementation. For PCRE we have set of macros you can set in C_USR
> envvar before building Harbour to reach such effect, f.e. - 
> DHB_POSIX_REGEX
> We can use:
>
>   HB_POSIX_REGEX - use POSIX regex instead of PCRE, it should work
>                    on all POSIX systems (f.e. in *nixes)
>
>   HB_PCRE_REGEX  - use platform native PCRE library
>
>   HB_PCRE_REGEX_BCC - use old PCRE library build into BCC CRTL
>
> when non of the above is set then our own copy of PCRE is used.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From bedipritpal at hotmail.com  Sun Feb 10 18:24:27 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun Feb 10 18:24:31 2008
Subject: [Harbour] GC - Reference to Freed Memory Block - GPF
Message-ID: <15403015.post@talk.nabble.com>


Hello Everybody

I receive this error when executing modules with parent/child relations.
Child records are shown in a TBrowse.

//====================================================//
ErrorSaver: This runtime error loged on 10/02/08 at 12:34:33 hrs
User : SUPERVISOR          
Application: Demo Organization
Operating system = Windows XP 5.1.2600 Service Pack 2, network = VOUCH32
Available diskspace = 80,274,841,600 in C:\creative.V15\CAC00001
PATH    = ??
COMSPEC = C:\WINDOWS\system32\cmd.exe
CLIPPER = f099
-----------------------  ---------------------------------------------
Traceback : Proc (Line)  Error Information
-----------------------  ---------------------------------------------
(b)BOOTUP (396)          arg count         0
INKEY (0)                args              <none>
B_INKEY (128)            canDefault        No 
LITE_MENU (248)          canRetry          No 
DO_BAR (445)             canSubstitute     No 
DO_MENU (149)            description       Object Destructor Failure
BOOTUP (569)             filename          
MAIN (150)               genCode           45
                         operation         Reference to freed block
                         osCode            0: n/a
                         severity          2
                         subcode           1301
                         subSystem         BASE
                         tries             0
                         -------------
                         Free memory   (0) 1119380
                         Largest Block (1) 1119380
                         Run Area      (2) 1119380
-----------------------  ---------------------------------------------
//====================================================//

I have tried to investigate where is the problem, but am not been able to
figureout the exact sequence exactly in what circumstances does it happen.
Even a simple Next/Prev movement produces this error. Anybody have a clue as
to what circumstances may be leading to this error. xHarbour and Clipper
compilations just do fine. 

Error handler control this error and then applicatiion GPF's. I will be
trying more to isolate the problem. For sure somewhere deep inside GC
something is happening weired. The offending line is:

nKey := Inkey( 0.1, INKEY_ALL )

Regards
Pritpal Bedi, INDIA-USA
-- 
View this message in context: http://www.nabble.com/GC---Reference-to-Freed-Memory-Block---GPF-tp15403015p15403015.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Sun Feb 10 18:37:18 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun Feb 10 18:37:23 2008
Subject: [Harbour] OLE Implementation - xHarbour Compatibility
In-Reply-To: <20080210131640.GA1101@localhost.localdomain>
References: <15392521.post@talk.nabble.com>
	<20080210131640.GA1101@localhost.localdomain>
Message-ID: <15403138.post@talk.nabble.com>


Hello Przemek


Przemyslaw Czerpak-2 wrote:
> 
> The ported version is in hbw32 library in w32_ole.c and w32_tole.prg
> files. It's xHarbour's win32ole.prg code with some minor fixes AFAIR
> even synced with recent xHarbour's modifications.
> But please remember that this code inherited very serious problem
> from xHarbour. If you are using BCC then it will need -a8 alignment
> for OLE structures but it also access directly HB_ITEM internals
> (it needs to include hbvmopt.h) so you have to compile also whole
> Harbour core code with such alignment. It causes general slowness
> because [x]Harbour HVM is slower when compiled with -a8 by BCC then
> with -a4. It's sth what have to be definitely fixed because it can
> also can be source of other problems which cannot be resolved at all.
> F.e. commercial libraries can be also alignment dependent and compiled
> with different alignment, f.e. -a4 and in such case you will not be
> able to produce single binaries.
> 
> Fixing above alignment problem in xHarbour will also resolve the
> problem of compilation in Harbour. Just simply by default Harbour
> forbids danger operation and it's the reason why this code cannot
> be compiled. So far no one tries to make it. In fact exactly these
> to functions hb_oleItemToVariant() and hb_oleVariantToItem() should
> be rewritten to not access item internals and this should resolve
> the problem. If the alignment problem is unimportant for you then
> you can use hacked version from hbw32 as is with Harbour compiled
> with -a8. If you want to fix the problem then look at places marked
> with TOFIX in contrib/hbw32/w32_ole.c - probably such fix can be also
> valuable for xHarbour users.
> 

I should have looked into contribs before posting the message, pity on me
--((.

Even compiling Harbour, hbw32, and my sources, with default flags I am able
to host Active-X's and receive events properly (will be updating FreeWin
shortly). No problems, may be for the time-being. 

But as you have pointed out above, it will be heartening to see it fixed
sooner than later to avoid possible future GPF's or while manipulating
comples COM objects. Can you guide me in this direction what exactly have to
be done. I read in-between lines to understand (TO FIX) but what I could not
figure out. I am just a beginner on C levels.

Pritpal Bedi, INDIA-USA
-- 
View this message in context: http://www.nabble.com/OLE-Implementation---xHarbour-Compatibility-tp15392521p15403138.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dmacias at mail.udg.mx  Sun Feb 10 20:07:41 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sun Feb 10 20:07:33 2008
Subject: [Harbour] Re: 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47AF9FDD.10407@mail.udg.mx>

 >This is true for make_*os2.cmd, bld.cmd, etc. If these
 >were updated by the OS/2 users here (David?), I think
 >they're okey, once we've agreed on the filenames.

If they need changes, I can do it

 >I'd suggest /make_gnu_os2.cmd which is uglier, but
 >clearer IMO, since it also suggest we're talking about
 >the GNU make system, not something fully separate OS/2
 >stuff. Long filenames, we already have.

 >For the other batch file: /bin/bld_os2.cmd

Older make_gnu.cmd, bld.cmd filenames are enough

make_gnu.bat:  Win32
make_gnu.cmd:  OS/2
make_gnu.sh:   Linux

Brgds,
Viktor


From labitas at gmail.com  Mon Feb 11 01:23:10 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Mon Feb 11 01:23:15 2008
Subject: [Harbour] Asynchronous procedures
In-Reply-To: <47AC7744.8070704@dbtopas.lt>
References: <47A5130B.8040704@dbtopas.lt> <15250095.post@talk.nabble.com>
	<47A5E4C5.7090509@dbtopas.lt> <47A87E8B.2020205@dbtopas.lt>
	<2386af1b0802071253te62a16fh5a77f657140241cd@mail.gmail.com>
	<47AC7744.8070704@dbtopas.lt>
Message-ID: <2386af1b0802102223j55358c62u25ccfdb6f73efe71@mail.gmail.com>

Hi, Mindaugas

Thanks for sharing info. I am intensively using BCC and all related info
is very important.

It seems, that your static function pcode_process temporary stack is
corrupting.

One small notice, looking at line:
  pEntry = (ULONG*) hb_xrealloc( pEntry, ulEntryAlloc * sizeof( ULONG ) );

Compiler must launch warning, that variable pEntry is not initialized;
may be assigning to that variable drown this fact...

Best regards,
Saulius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080211/56779d48/attachment.html
From mpaliwoda at interia.pl  Mon Feb 11 01:35:39 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Mon Feb 11 01:35:43 2008
Subject: [Harbour] What about stopping the release process?
Message-ID: <20080211063539.EF22B461456@f29.poczta.interia.pl>

Hi Viktor,
 
> I like it better still, because these are "plugins" in a sense.

But this fact, "in a sense", has *zero* impact on a technical problems
we're trying to solve - cross library dependencies and simplification
of a link command.

Sorry, I totaly do not share your POV in this area.

-- 

Marek


----------------------------------------------------------------------
Myslisz, ze nie ma sniegu? Sprawd? gdzie mozesz poszusowac na nartach
 >>> http://link.interia.pl/f1cfb

From sscc at mweb.co.za  Mon Feb 11 02:14:29 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Mon Feb 11 02:15:01 2008
Subject: [Harbour] OLE Implementation - xHarbour Compatibility
In-Reply-To: <15403138.post@talk.nabble.com>
References: <15392521.post@talk.nabble.com>	<20080210131640.GA1101@localhost.localdomain>
	<15403138.post@talk.nabble.com>
Message-ID: <47AFF5D5.4090409@mweb.co.za>

Pritpal Bedi wrote:

> Even compiling Harbour, hbw32, and my sources, with default flags I am able
> to host Active-X's and receive events properly (will be updating FreeWin
> shortly). No problems, may be for the time-being. 

Out of interest, do you know if anyone has this compiling for MSVC?

I tried, but got lost, partly because of some hacks in xHarbour, I 
haven't tried with Harbour.

Regards
Alex
From harbour.01 at syenar.hu  Mon Feb 11 03:27:04 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Feb 11 03:27:00 2008
Subject: [Harbour] Re: 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <47AF9FDD.10407@mail.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
	<47AF9FDD.10407@mail.udg.mx>
Message-ID: <15591D1C-08F5-4365-89F0-3A78B45716DA@syenar.hu>

Hi David,

On 2008.02.11., at 2:07, David Arturo Macias Corona wrote:

> >This is true for make_*os2.cmd, bld.cmd, etc. If these
> >were updated by the OS/2 users here (David?), I think
> >they're okey, once we've agreed on the filenames.
>
> If they need changes, I can do it
>
> >I'd suggest /make_gnu_os2.cmd which is uglier, but
> >clearer IMO, since it also suggest we're talking about
> >the GNU make system, not something fully separate OS/2
> >stuff. Long filenames, we already have.
>
> >For the other batch file: /bin/bld_os2.cmd
>
> Older make_gnu.cmd, bld.cmd filenames are enough

One of the reasons I removed these is to avoid
any confusion for Windows users, to decide which
batch file to run. I think it's very important to
have clear filenames and the least redundancy.

'.cmd' for a Windows user means a native batch
file, so this extension by itself, is _ambiguous_.
That's why we should include "os2" to clear that up.

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Feb 11 03:29:02 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Feb 11 03:28:41 2008
Subject: [Harbour] OLE Implementation - xHarbour Compatibility
In-Reply-To: <47AFF5D5.4090409@mweb.co.za>
References: <15392521.post@talk.nabble.com>	<20080210131640.GA1101@localhost.localdomain>
	<15403138.post@talk.nabble.com> <47AFF5D5.4090409@mweb.co.za>
Message-ID: <B9504DF7-6693-490D-9682-8235EC24A3CB@syenar.hu>

Hi Alex,

It's a clean compile now (no errors or warnings) with MSVC.
See my ChangeLog entry from around last week.

Tested with MSVC 2005 Express (the free one) + SDK Vista (also free).

Brgds,
Viktor

On 2008.02.11., at 8:14, Alex Strickland wrote:

> Pritpal Bedi wrote:
>
>> Even compiling Harbour, hbw32, and my sources, with default flags I  
>> am able
>> to host Active-X's and receive events properly (will be updating  
>> FreeWin
>> shortly). No problems, may be for the time-being.
>
> Out of interest, do you know if anyone has this compiling for MSVC?
>
> I tried, but got lost, partly because of some hacks in xHarbour, I  
> haven't tried with Harbour.
>
> Regards
> Alex
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From sscc at mweb.co.za  Mon Feb 11 03:44:45 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Mon Feb 11 03:45:02 2008
Subject: [Harbour] OLE Implementation - xHarbour Compatibility
In-Reply-To: <B9504DF7-6693-490D-9682-8235EC24A3CB@syenar.hu>
References: <15392521.post@talk.nabble.com>	<20080210131640.GA1101@localhost.localdomain>	<15403138.post@talk.nabble.com>
	<47AFF5D5.4090409@mweb.co.za>
	<B9504DF7-6693-490D-9682-8235EC24A3CB@syenar.hu>
Message-ID: <47B00AFD.6020800@mweb.co.za>

Szak?ts Viktor wrote:

> It's a clean compile now (no errors or warnings) with MSVC.
> See my ChangeLog entry from around last week.
> 
> Tested with MSVC 2005 Express (the free one) + SDK Vista (also free).

Sorry, I should be more specific. I meant the ActiveX support in 
FreeWin which I think is only compiling with BCC.

Thanks for the info though.

Regards
Alex

From harbour.01 at syenar.hu  Mon Feb 11 03:46:19 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Feb 11 03:46:00 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <20080211063539.EF22B461456@f29.poczta.interia.pl>
References: <20080211063539.EF22B461456@f29.poczta.interia.pl>
Message-ID: <5162266F-859E-4C50-88CC-18AE8BCBBC98@syenar.hu>

Hi Marek,

> Hi Viktor,
>
>> I like it better still, because these are "plugins" in a sense.
>
> But this fact, "in a sense", has *zero* impact on a technical problems

In my first mail regarding this, I clearly wrote that
while I see no TECHNICAL problems here, yet I (IMHO)
find it better to have them separate. When deciding about
something there is not just always technical possibilities
to consider (aka: 'if I _can_ do it, doesn't make it always
the best, or right'). GT/RDDs are _very_ similar to plugins
(but not equal to them, but at least we don't used to use
this word for it, hence the word "in a sense"). This open,
extendable, "plugin"-like implementation is their biggest
strength and one the very nice and unique features of
Clipper/Harbour. That's why I wouldn't hide it.

If we hide it, we're basically _masking_ this feature IMO,
so that a new developer could not even find out that Harbour
has this possibility and consider the whole "rddSetDefault()"
a mere annoyance without seeing the benefit.

I hope we'll hear more opinions from others.

Brgds,
Viktor

From mbelgrano at deltain.it  Mon Feb 11 04:11:41 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Feb 11 04:11:51 2008
Subject: [Harbour] OLE Implementation - xHarbour Compatibility
In-Reply-To: <B9504DF7-6693-490D-9682-8235EC24A3CB@syenar.hu>
References: <15392521.post@talk.nabble.com>	<20080210131640.GA1101@localhost.localdomain><15403138.post@talk.nabble.com>
	<47AFF5D5.4090409@mweb.co.za>
	<B9504DF7-6693-490D-9682-8235EC24A3CB@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815E961@SRV02.deltain.net>

Can you tried also MSCV 2008 Express ?

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Monday, February 11, 2008 9:29 AM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] OLE Implementation - xHarbour Compatibility

Hi Alex,

It's a clean compile now (no errors or warnings) with MSVC.
See my ChangeLog entry from around last week.

Tested with MSVC 2005 Express (the free one) + SDK Vista (also free).

Brgds,
Viktor

On 2008.02.11., at 8:14, Alex Strickland wrote:

> Pritpal Bedi wrote:
>
>> Even compiling Harbour, hbw32, and my sources, with default flags I  
>> am able
>> to host Active-X's and receive events properly (will be updating  
>> FreeWin
>> shortly). No problems, may be for the time-being.
>
> Out of interest, do you know if anyone has this compiling for MSVC?
>
> I tried, but got lost, partly because of some hacks in xHarbour, I  
> haven't tried with Harbour.
>
> Regards
> Alex
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Mon Feb 11 04:32:11 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Feb 11 04:32:03 2008
Subject: [Harbour] OLE Implementation - xHarbour Compatibility
In-Reply-To: <47B00AFD.6020800@mweb.co.za>
References: <15392521.post@talk.nabble.com>	<20080210131640.GA1101@localhost.localdomain>	<15403138.post@talk.nabble.com>
	<47AFF5D5.4090409@mweb.co.za>
	<B9504DF7-6693-490D-9682-8235EC24A3CB@syenar.hu>
	<47B00AFD.6020800@mweb.co.za>
Message-ID: <D7C809E7-82F8-4180-A87A-E2059B9445CE@syenar.hu>

Oh okey, sorry.

Brgds,
Viktor

On 2008.02.11., at 9:44, Alex Strickland wrote:

> Szak?ts Viktor wrote:
>
>> It's a clean compile now (no errors or warnings) with MSVC.
>> See my ChangeLog entry from around last week.
>> Tested with MSVC 2005 Express (the free one) + SDK Vista (also free).
>
> Sorry, I should be more specific. I meant the ActiveX support in  
> FreeWin which I think is only compiling with BCC.
>
> Thanks for the info though.
>
> Regards
> Alex
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mpaliwoda at interia.pl  Mon Feb 11 04:43:20 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Mon Feb 11 04:43:24 2008
Subject: [Harbour] What about stopping the release process?
Message-ID: <20080211094320.A3E7D3E8852@f38.poczta.interia.pl>

Hi Viktor,

> >> I like it better still, because these are "plugins" in a sense.
> >
> > But this fact, "in a sense", has *zero* impact on a technical
> > problems
>
> In my first mail regarding this, I clearly wrote that
> while I see no TECHNICAL problems here, yet I (IMHO)
> find it better to have them separate. When deciding about
> something there is not just always technical possibilities
> to consider (aka: 'if I _can_ do it, doesn't make it always
> the best, or right'). 

It's *clear* to me, but *I don't see* this argument usable
to GT/RDD subsystems. See below.

> GT/RDDs are _very_ similar to plugins
> (but not equal to them, but at least we don't used to use
> this word for it, hence the word "in a sense"). This open,
> extendable, "plugin"-like implementation is their biggest
> strength and one the very nice and unique features of
> Clipper/Harbour. That's why I wouldn't hide it.

So we must have a different point of view of what plugin *is*.
To me it is a feature which *can* be loaded/unloaded during runtime. 
Usualy this means loading/unloading dlls. So to me *if* we could 
load/unload GT/RDD subsystems during runtime then it could be 
described as plugins. Otherwise they are simply *drivers*. 
AFAIK we're not able to load/unload GT/RDD at runtime, are we ?
BTW, I am not sure you can even switch GT driver dynamicly during 
runtime - if you can't then GT is even not comparable to RDD, 
which can be switched during runtime.

> If we hide it, we're basically _masking_ this feature IMO,
> so that a new developer could not even find out that Harbour
> has this possibility and consider the whole "rddSetDefault()"
> a mere annoyance without seeing the benefit.

Sorry, I don't take this "argument" seriously. We're not hiding
anything IMO. We're simply "simplifing" the whole thing. That's
all.
 
> I hope we'll hear more opinions from others.

Me too.

-- 

Marek


Wyjatkowe pioro Andrzeja Mleczki! 
Licytuj! >>> http://link.interia.pl/f1cf8

From druzus at acn.waw.pl  Mon Feb 11 05:43:31 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Feb 11 05:43:37 2008
Subject: [Harbour] GC - Reference to Freed Memory Block - GPF
In-Reply-To: <15403015.post@talk.nabble.com>
References: <15403015.post@talk.nabble.com>
Message-ID: <20080211104331.GA6769@localhost.localdomain>

On Sun, 10 Feb 2008, Pritpal Bedi wrote:
> Hello Everybody
> I receive this error when executing modules with parent/child relations.
> Child records are shown in a TBrowse.
> DO_MENU (149)            description       Object Destructor Failure
> MAIN (150)               genCode           45
>                          operation         Reference to freed block
> I have tried to investigate where is the problem, but am not been able to
> figureout the exact sequence exactly in what circumstances does it happen.
> Even a simple Next/Prev movement produces this error. Anybody have a clue as
> to what circumstances may be leading to this error. xHarbour and Clipper
> compilations just do fine. 

Clipper does not have destructors and xHarbour cannot detect most
of destructors errors at all what causes memory corruption and later
GPFs. See tests/destruct.prg as an example of such errors. It also
illustrates why destructors are not safe in xHarbour which cannot
cleanly serve .prg code errors.

> Error handler control this error and then applicatiion GPF's. I will be
> trying more to isolate the problem. For sure somewhere deep inside GC
> something is happening weired. The offending line is:

It's reported from GC but the problem is in your code and
it's caused by some destructor you are using (like in destruct.prg)
or by C code which keeps references to collectible block in unknown
for GC place. 1-st I would look for all destructors in your whole
code and try to isolate the problem. It does not have to be related
to BROWSE object at all.
Of course it's also possible that it's a bug in core code so if you
can isolate it to small example then please inform me.
In isolating process hb_gcAll(.t.) can greatly help - it will force
error message because your object has cross references and it's freed
only by GC.

best regards,
Przemek
From mbelgrano at deltain.it  Mon Feb 11 05:44:41 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Feb 11 05:44:56 2008
Subject: [Harbour] is a possible objective the "Replaceable User
	Interface:CUI, GUI, WWW" defined by Przemyslaw Czerpak ?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809A8DE@SRV02.deltain.net>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com><AFB948164110ED43B5EB849E8DEEF03809A836@SRV02.deltain.net><9257026e0708030849g64b57ab4if7b88d5a85d74846@mail.gmail.com><AFB948164110ED43B5EB849E8DEEF03809A838@SRV02.deltain.net><9257026e0708031000y437dc889rb088548635c631b9@mail.gmail.com><001301c7d5f7$e068a020$a139e060$@com><20070803192434.GB20898@localhost.localdomain>
	<AFB948164110ED43B5EB849E8DEEF03809A8DE@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815E962@SRV02.deltain.net>

I like then Przemyslaw Czerpak's word about CUI-GUI-WWW without source
code modification .
This implementation will grow [x]harbour and give new live to a lot of
clipper application but is interesting also for non clipper developer
I Thanks to all (particularry Przemyslaw ) for the work done in last
year  Harbour now gets new life but with something like CUI,GUI,WWW
Harbour can be in the future a very important language.

Is a possible objective the "Replaceable User Interface" defined by
Przemyslaw Czerpak?

8-3-2007
>A library which I can use with CUI, GUI and WWW Browsers without source
>code modification.
>Porting application to GUI only mode is a waste of time.
>We will need interface which will allow to run application remotely in
>CUI mode and when user turn off his terminal in scale register ;-)
>without closing application on the server and reconnect from office
>using desktop computer he should continue his job in GUI mode in the
>same instance of application and finally if he will want then we will
>have to allow him to finish the job using PDA and WWW browser when 
>he will return to home.
>I plan to work on such library in the future.

>We have to stop thinking in desktop and in web development as different
>entities. We need a common interface for all our developments.
>That would be the most important target for Harbour 2.0 :-)


From druzus at acn.waw.pl  Mon Feb 11 05:53:06 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Feb 11 05:53:11 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <ABCC9C8E-8753-43B6-A63C-017DB4B14329@syenar.hu>
References: <200802082333.59785.philb@philb.us>
	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>
	<47AD4A25.8080004@interia.pl>
	<29EBEB77-B467-441F-B744-02533F0838BE@syenar.hu>
	<47AD8390.70507@interia.pl> <47AF1AB9.8090100@interia.pl>
	<47AF1F52.6070601@interia.pl>
	<B23951C3-63BB-40B5-8339-431B5D4A4513@syenar.hu>
	<47AF4A4A.1000608@interia.pl>
	<ABCC9C8E-8753-43B6-A63C-017DB4B14329@syenar.hu>
Message-ID: <20080211105306.GB6769@localhost.localdomain>

On Sun, 10 Feb 2008, Szak?ts Viktor wrote:
> >I disagree. Having them as separate libraries has no advantages.
> >I just made some tests with GTs under BCC and including them in
> >link command changes *nothing*, until you *explicitly* REQUEST
> >a particular GT. So having them as separate libraries give us
> >nothing except complications in further link command, as oposed
> >to putting a *simple* REQUEST in prg source with one common lib.
> I know it makes no _technical_ difference.

There are some techincal differences.
1. On some system it will be hard (or impossible) to overload some
   subsystem using only libraries. F.e. nulrdd which should replaces
   whole RDD tree for applications which do not want to use any
   RDD releated code will not work if you will try to link sth like:
      gcc myapp.o -lnulrdd -lhrb
   because myapp.o has no reference to any symbols in nulrdd so
   nulrdd will be ignored and then all RDD code will be taken
   from hrb where such references will appear.
   Of course such situatios exist only in few linkers.
2. Even if linker does not work like above then it will be hard
   to detect if libraries like nulrdd supports all necessary symbols.
   Even if sth will be missing then it be taken from hrb library
   so nulrdd will not functional as it should.

best regards,
Przemek
From labitas at gmail.com  Mon Feb 11 06:14:40 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Mon Feb 11 06:14:44 2008
Subject: R: [Harbour] OLE Implementation - xHarbour Compatibility
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815E95F@SRV02.deltain.net>
References: <15392521.post@talk.nabble.com>
	<20080210131640.GA1101@localhost.localdomain>
	<AFB948164110ED43B5EB849E8DEEF03815E95F@SRV02.deltain.net>
Message-ID: <2386af1b0802110314n29f5f6edh6140a9eaaca50541@mail.gmail.com>

Hello, Przemek

I always compiling xHarbour with BCC -a4 alignment; sizeof(HB_ITEM) = 24
and memory(HB_MEM_STACK) / memory(HB_MEM_STACKITEMS) = 24.
But never noticed any anomaly in OLE work. Can you help me how to make
sure with this?? Till now I think, that it is enough for OLE structures
to be compiling with -a8 and they are nohow related with [x]Harbour
structures/internals.
OLE include files have their suitable #pragma option directives with
restoring _all_ initial settings, so different alignment seems as if
provided by compiler...

Thank you and best regards
Saulius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080211/e4f43964/attachment.html
From harbour.01 at syenar.hu  Mon Feb 11 06:23:16 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Feb 11 06:22:55 2008
Subject: [Harbour] OLE Implementation - xHarbour Compatibility
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815E961@SRV02.deltain.net>
References: <15392521.post@talk.nabble.com>	<20080210131640.GA1101@localhost.localdomain><15403138.post@talk.nabble.com>
	<47AFF5D5.4090409@mweb.co.za>
	<B9504DF7-6693-490D-9682-8235EC24A3CB@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815E961@SRV02.deltain.net>
Message-ID: <4CE397A9-52EF-4771-93A5-28DD663BFC88@syenar.hu>

Hi Massimo,

Yes, it's a clean compile with MSVC 2008 Express, too.

Brgds,
Viktor

On 2008.02.11., at 10:11, Massimo Belgrano wrote:

> Can you tried also MSCV 2008 Express ?
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org 
> ] On Behalf Of Szak?ts Viktor
> Sent: Monday, February 11, 2008 9:29 AM
> To: Harbour Project Main Developer List.
> Subject: Re: [Harbour] OLE Implementation - xHarbour Compatibility
>
> Hi Alex,
>
> It's a clean compile now (no errors or warnings) with MSVC.
> See my ChangeLog entry from around last week.
>
> Tested with MSVC 2005 Express (the free one) + SDK Vista (also free).
>
> Brgds,
> Viktor
>
> On 2008.02.11., at 8:14, Alex Strickland wrote:
>
>> Pritpal Bedi wrote:
>>
>>> Even compiling Harbour, hbw32, and my sources, with default flags I
>>> am able
>>> to host Active-X's and receive events properly (will be updating
>>> FreeWin
>>> shortly). No problems, may be for the time-being.
>>
>> Out of interest, do you know if anyone has this compiling for MSVC?
>>
>> I tried, but got lost, partly because of some hacks in xHarbour, I
>> haven't tried with Harbour.
>>
>> Regards
>> Alex
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Mon Feb 11 06:43:50 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Feb 11 06:43:59 2008
Subject: [Harbour] OLE Implementation - xHarbour Compatibility
In-Reply-To: <4CE397A9-52EF-4771-93A5-28DD663BFC88@syenar.hu>
References: <15392521.post@talk.nabble.com>	<20080210131640.GA1101@localhost.localdomain><15403138.post@talk.nabble.com><47AFF5D5.4090409@mweb.co.za><B9504DF7-6693-490D-9682-8235EC24A3CB@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815E961@SRV02.deltain.net>
	<4CE397A9-52EF-4771-93A5-28DD663BFC88@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815E963@SRV02.deltain.net>

From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Monday, February 11, 2008 12:23 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] OLE Implementation - xHarbour Compatibility

>Hi Massimo,
>Yes, it's a clean compile with MSVC 2008 Express, too.


Can you send me/post the batch for compiling xharbour?
Have you also a project file for editing harbour source in visual mode with visual c++ 2008?

Thanks
From druzus at acn.waw.pl  Mon Feb 11 07:28:56 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Feb 11 07:29:03 2008
Subject: R: [Harbour] OLE Implementation - xHarbour Compatibility
In-Reply-To: <2386af1b0802110314n29f5f6edh6140a9eaaca50541@mail.gmail.com>
References: <15392521.post@talk.nabble.com>
	<20080210131640.GA1101@localhost.localdomain>
	<AFB948164110ED43B5EB849E8DEEF03815E95F@SRV02.deltain.net>
	<2386af1b0802110314n29f5f6edh6140a9eaaca50541@mail.gmail.com>
Message-ID: <20080211122856.GA7485@localhost.localdomain>

On Mon, 11 Feb 2008, Saulius Zrelskis wrote:
> I always compiling xHarbour with BCC -a4 alignment; sizeof(HB_ITEM) = 24
> and memory(HB_MEM_STACK) / memory(HB_MEM_STACKITEMS) = 24.
> But never noticed any anomaly in OLE work. Can you help me how to make
> sure with this?? Till now I think, that it is enough for OLE structures
> to be compiling with -a8 and they are nohow related with [x]Harbour
> structures/internals.
> OLE include files have their suitable #pragma option directives with
> restoring _all_ initial settings, so different alignment seems as if
> provided by compiler...

I also thought that it should work but people reported problems
that it GPFs when compiled with -a4 and with -a8 it works.
Maybe it's result of some other problems and -a4 can only exploit
them in some cases. I'm not MS-Windows user I cannot make such test
myself. I can run most of windows application in my Linux box using
WINE but to make some tests with OLE I need to install some windows
applications which are OLE servers and even if I'll make test then
I will never be sure if some possible problems comes from HBOLE
implementation or from WINE or from 3-rd party application which
is executed in foreign environment. It's highly possible that you
are right. Below I'm attaching the message I sent to Ron yesterday.
Today I've looked more carefully for the HBOLE code and I've found
that the memory leak is false alarm because there is a call to
VariantClear() which should release BSTR blocks. Anyhow some other
things for sure needs serious cleanup. We need much cleaner functions
to convert between HB_ITMEs and VARIANTs. If I'll find some spare time
then I'll read something about OLE implementation and maybe I'll create
such code. But first I will have to know more about OLE. I do not
like to write code when I do not know what exactly it should does
and what is expected behavior in some unusual conditions. It could
be source of stupid mistakes like VariantClear() call I missed when
I was writing message to Ron.

best regards,
Przemek


----- Forwarded message from Przemyslaw Czerpak <druzus@acn.waw.pl> -----
> I received a note about your comments for win32ole.prg. As you might  
> know I'm not conscious of such low level details, except when  
> intensely focusing on specific issue. Can you please help me save  
> time by explaining the alignment requirement? I always used BCC,  
> MSVC, and xCC with default make files/alignment, and I'm not aware of  
> GPF traps. Will greatly appreciate your help.

Because you were able to recompile whole code from source and any
3-rd party binaries you were using were compiled with the same
alignment. But it does not mean that the default alignment is
optimal. F.e. BCC uses 8 byte alignment by default. It causes
the some internal structures are much bigger then they should be.
Very good example is HB_ITEM structure. In xHarbour the size of
HB_ITEM compiled by BCC with default switches is 32 now. In Harbour
it's 24 because some internal things were implemented in different
way. But Harbour in Harbour access to HB_ITEM members is blocked.
PHB_ITEM is mapped to void* for non core code. Just like to most
of other internal structures so users code has to execute documented
API functions and can be compiled with any alignment different then
the HVM ones. So many people uses -a4 BCC switch. It causes that
HB_ITEM allocates 16 bytes in Harbour. If you coampre it to xHarbour
default size (32) then you will find that programs which needs
a lot of arrays or objects allocates about half of memory necesary
for xHarbour. The operations on item like copy or move have to update
half less bytes. In some cases like AINS, ADEL, ASIZE it can give
huge speed difference. Farther current CPUs uses cash more efficient
because smaller data increase the chance that it can be access from
L1, L2, L3 cache. It gives additional improvement. If you make some
test then code which does not use expensive array operation is 2-3
percent faster if HVM is compiled with -a4 (and this improvemnt
will be noticeable in all applications) but code with a lot of AINS,
ADEL can be 30% or more faster. I can easy create some tests where
is will be hardly noticeable. And now the problem. HBOLE code access
HB_ITEM internals. It means that it has to be compiled with the same
alignment switches as HVM. But it also uses OLE variant structures
which in BCC have to be compiled with -a8 or application will GPF.
Try to recompile xHarbour using BCC with -a4 and use some OLE code.
You will see what happens. It means that this code blocks compiling
HVM with optimal alignment switches. Maybe in this case it will be
possible to create workaround and add some #pragma pack before
   #include <ole2.h>
   #include <oleauto.h>
but at lest in my version of BCC55 header files such pragmas exists
in them but it does not help. At lease Enrico and other users reported
that HBOLE code GPFs when [x]Harbour is compiled with -a4. I cannot test
it myself because OLE code cannot be executed in my Linux box but it
seems to be such simple tests that I believe them. Maybe the problem
is inside other header files included by above two files. If you
can make some test move #include for these files before windows.h or
any other windows/bcc headers then maybe it will work. As I said
I cannot test it myself. Anyhow this is workaround for the problem
caused by direct accessing of HB_ITEM. Instead of passing pointers
to HB_ITEM members directly when variable is passed by reference or
when string item is passed we should allocate array with unions of
all possible values and pass pointers to member of this union in
hb_oleItemToVariant(). Then simply copy results and free allocated
resources in FreeParams(). The modification is small and it will be
necessary to change type of aPrgParams but because I cannot test
it I do not want to make it myself. Code will be cleaner and will
not depend on alignment switches used to compile HVM so it will work
with any version. Farther you will probably find some memory leaks
and possible GPFs which are hard to see now IMHO due to not clean
access of HB_ITEM members. F.e. in FreeParams():
        case VT_BYREF | VT_BSTR:
          SysFreeString( *pVariant->n1.n2.n3.pbstrVal );
          sString = hb_oleWideToAnsi( *( pVariant->n1.n2.n3.pbstrVal ) );
          hb_itemPutCPtr( pItem, sString, strlen( sString ) );
          break;
first memory is freed then freed pointer is passed to hb_oleWideToAnsi()
It may cause any unpredictable results. Like corrupted results (free
operation may damage some part of freed data) or GPF if it was bigger
memory area which were allocating few system pages and inside SysFreeString()
these pages were returned to OS. If you will try to access them in
hb_oleWideToAnsi() then you will have GPF because you will access memory
which do not longer belong to the process. Few lines below is:
         case VT_BSTR:
           sString = hb_oleWideToAnsi( pVariant->n1.n2.n3.bstrVal );
           hb_itemPutCPtr( pItem, sString, strlen( sString ) );
           break;
what seems to be unreported memory leak because we do not know what
happend with memory allocated by hb_oleItemToVariant() in:
        case HB_IT_STRING:
        case HB_IT_MEMO:
          [...]
          }
          else
          {
             pVariant->n1.n2.vt   = VT_BSTR;
             pVariant->n1.n2.n3.bstrVal = hb_oleAnsiToSysString( sString );
          }
          break;
I'm not OLE specialist but IMHO it should be freed by caller process.
If receiver may changed the variant value then we do not have original
pointer and we cannot free pVariant->n1.n2.n3.bstrVal. BTW if receiver
can change pVariant->n1.n2.n3.pbstrVal then then even SysFreeString()
above seems to be not safe. Separate array with unions for all possible
types where we can keep addresses of allocated resouces will resolve
all such problems and it's yet another reason why we should have it.
And yet another thing. In the future we will have to add unicode support
to HVM. The API should be VM independent and 3-rd party code developers
should not have to worry about type od passed string and make all
conversions manually respecting HVM CP (now whole OLE code ignores
HVM CP setting and uses MultiByteToWideChar() only which operates
on default Windows CP not HVM what is yet another problem). It can
be very easy reached by adding set of functions to access converted
strings, f.e. hb_parc_utf8(), hb_parc_u16(), etc (I'm attaching message
I send to XHGTK devel list about it). It means that all code which hacks
string HB_ITEM internals is potently dangerous for future extensions.
With separate array of allocated resources I'm talking about it will
not be necessary to use hb_itemPutCRawStatic() or similar tricks.
In fact you are using hb_itemPutCRawStatic() to make HB_ITEM as
temporary pointer holder only. Also returning value will be easier
because it will be possible to use hb_storc_u16()/hb_arraySetUC16()
and similar new functions.

HTH.

Best regards,
Przemek



----- Forwarded message from Przemyslaw Czerpak <druzus@acn.waw.pl> -----
From: Przemyslaw Czerpak <druzus@acn.waw.pl>
Subject: Re: [xhgtk-developers] Code page conversion
To: Rodrigo Miguel <rodrmigu@gmail.com>
Cc: xhgtk-developers@lists.sourceforge.net
Date: Thu, 6 Dec 2007 09:26:31 +0100
Lines: 142

On Wed, 05 Dec 2007, Rodrigo Miguel wrote:
> All,
> There are something that I'm already worried about.
> I'm using postgres database using LATIN1 (ISO-8859-1) and my Application
> code (like accents) are in windows/ISO-8859-1. But GTK uses UTF8, so,
> how It will be handled by hb_parcutf8()?
> I'm just wondering when I have some code in linux/windows and vice-versa,
> about that complete confusion that can become.

Hi Rodrigo,

1-st I would like to clarify one thing. In other message you wrote:

> when I write a code using  f.e. Ubuntu Linux, there's no code changes
> or conversion made by xhgtk_locale*, but it's required when my code
> has windows encoding

These means that you use in your Linux box editors which stores files
using UTF8 encoding. And of curse it's not necessary to make additional
translation inside xhgtk layer because strings are already in UTF8.
But HVM does not know anything about it. Functions like LEN(), SUBSTR(),
STUFF(), STRPEEK(), STRPOKE(), UPPER(), LOWER(), ISALPHA(), etc. do
not operate on letters but on allocated bytes. Comparison operators
( <, <=, >, >= ) do not respect national characters, indexes are not
well sorted and all other libraries should expect UTF8 strings instead
of some CP encoding. In summary XHGTK can show text with national
characters you put in your editor without any problems but other code
is not ready to accept such strings. We do not have native support for
Unicode strings in HVM yet so at least now we should not use UTF8
in source code encoding. In the future I'll add to compiler support
for encoding conversion during compilation but now you should use
some CP valid for your country. So if you have source code encoded
in UTF-8 then I suggest to convert it to some CP, f.e. ISO-8859-1
using iconv.
Then you should inform HVM about encoding used by your source code
using HB_SETCODEPAGE() command. This command will also set national
characters and collation rules. F.e. if you are leaving in Spain
you can use:
    REQUEST HB_CODEPAGE_ESWIN   // force linking ESWIN CP.
    HB_SETCODEPAGE( "ESWIN" )   // set ESWIN CP in HVM 

HB_SETCODEPAGE() makes yet another important thing - it informs
compiler about Unicode values of characters in strings - with each
CP is bound Unicode table.
It means that now HVM can make automatic translation from normal
CP strings to Unicode ones in different representation, f.e. to UTF8
and because internally strings are in CP encoding then all other
character oriented functions and subsystems are working well.
At .prg level you can translate strings to/from UTF8 using
HB_STRTOUTF8()/HB_UTF8TOSTR() functions, f.e.:

    proc main()
       local s1, s2
       s1 := "?????????"
       REQUEST HB_CODEPAGE_PLISO
       HB_SETCODEPAGE( "PLISO" )
       ? LEN( s1 )
       s2 := HB_STRTOUTF8( s1 )
       ? LEN( s2 ), HB_UTF8LEN( s2 )
    return

I added set of functions for conversions and operations on UTF8 strings
to Harbour:

   2007-06-23 11:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
       + added two prg functions for translations from/to UTF-8:
            HB_STRTOUTF8( <cStr> [, <cCPID> ] ) -> <cUTF8Str>
            HB_UTF8TOSTR( <cUTF8Str> [, <cCPID> ] ) -> <cStr>
         <cCPID> is Harbour codepage id, f.e.: "EN", "ES", "ESWIN",
         "PLISO", "PLMAZ", "PL852", "PLWIN", ...
         When not given then default HVM codepage (set by HB_SETCODEPAGE())
         is used.
   2007-07-18 21:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
       + added .prg functions: HB_UTF8SUBSTR(), HB_UTF8LEFT(), HB_UTF8RIGHT(),
                               HB_UTF8LEN(), HB_UTF8PEEK()
         They are working like corresponding functions: SUBSTR(), LEFT(),
         RIGHT(), LEN(), STRPEEK() but operates on UTF-8 strings.
   2007-08-14 15:22 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
       + added HB_UTF8TRAN(), HB_UTF8STUFF(), HB_UTF8POKE()

and Phil added this code to xHarbour so they are working on both compilers.

But they are for .prg code. I also plan to add to extend C API functions
which will operate on Unicode strings. And here will appear hb_parcutf8()
and similar functions.
Now XHGTK uses xhgtk_locale_to_utf8() function to convert HVM strings to
UTF8. This function uses internaly g_locale_to_utf8() for string encoding.
It causes two bad side effects:
1. it needs exactly the same source code encoding as used in LOCALE setting.
   It's impossible to take source code with different encoding and set valid
   HB_SETCODEPAGE() because it does not know anything about HVM and it's
   internal setting and how strings should be translated.
2. when we will have native support for Unicode strings in HVM then you
   will have to update XHGTK code to use Unicode strings. I would like
   to eliminate this problem so code which you will create now will work
   with current HVM and the future one without any modifications and all
   necessary translations will be done internally by Harbour core functions.

How will it work?
In very simple way. I'll add set of functions which will operate on Unicode
strings (using different encoding). F.e. for UTF-8 I'll add:
    char * hb_parc_utf8( int iParam );
it will return string in UTF-8 encoding. If passed item contains string in
CP encoding then it will be translated to UTF8 using Unicode table set by
HB_SETCODEPAGE() function and then return. In the future when we will have
native support for Unicode and string item will be in UTF8 then it will be
returned without any translations. For you as 3-rd party code programmer
it's absolutely unimportant what operations will be done inside hb_parc_utf8()
You only asks about string in UTF8 encoding and you will receive it.
I'll also add:
    ULONG hb_parclen_utf8( int iParam );
    void hb_retc_utf8( const char *szUtf8Value );
    void hb_storc_utf8( const char *szUtf8Value, int iParam, ... );

and item oriented functions, f.e.:
    char * hb_itemGetCUTF8( PHB_ITEM pItem );
    PHB_ITEM hb_itemPutCUTF8( PHB_ITEM pItem, const char * szUtf8Value );
    PHB_ITEM hb_itemPutCLUTF8( PHB_ITEM pItem, const char * szUtf8Value,
                               ULONG ulBytesLen );

As long as we will not have native Unicode support these functions
will always make internally translations from/to character strings using
Unicode table bound with CP set by HB_SETCODEPAGE() function.
In the future the translation will be done only if necessary and also
normal character functions like hb_parc() will make translation. F.e.
when you pass string item encoded in UTF8 and call hb_parc() then
it will be automatically translated from UTF8 to character string.
But all such translations will be done inside Harbour core code and
you will not have to worry about them and/or change your C source code.

best regards
Przemek
----- End forwarded message -----
----- End forwarded message -----
From mpaliwoda at interia.pl  Mon Feb 11 07:29:25 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Mon Feb 11 07:29:28 2008
Subject: [Harbour] Re: What about stopping the release process?
In-Reply-To: <20080211105306.GB6769@localhost.localdomain>
References: <200802082333.59785.philb@philb.us>	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>	<47AD4A25.8080004@interia.pl>	<29EBEB77-B467-441F-B744-02533F0838BE@syenar.hu>	<47AD8390.70507@interia.pl>
	<47AF1AB9.8090100@interia.pl>	<47AF1F52.6070601@interia.pl>	<B23951C3-63BB-40B5-8339-431B5D4A4513@syenar.hu>	<47AF4A4A.1000608@interia.pl>	<ABCC9C8E-8753-43B6-A63C-017DB4B14329@syenar.hu>
	<20080211105306.GB6769@localhost.localdomain>
Message-ID: <fopf2m$udt$1@ger.gmane.org>

Przemyslaw Czerpak wrote :

> On Sun, 10 Feb 2008, Szak?ts Viktor wrote:
>>> I disagree. Having them as separate libraries has no advantages.
>>> I just made some tests with GTs under BCC and including them in
>>> link command changes *nothing*, until you *explicitly* REQUEST
>>> a particular GT. So having them as separate libraries give us
>>> nothing except complications in further link command, as oposed
>>> to putting a *simple* REQUEST in prg source with one common lib.
>> I know it makes no _technical_ difference.
> 
> There are some techincal differences.
> 1. On some system it will be hard (or impossible) to overload some
>    subsystem using only libraries. F.e. nulrdd which should replaces
>    whole RDD tree for applications which do not want to use any
>    RDD releated code will not work if you will try to link sth like:
>       gcc myapp.o -lnulrdd -lhrb
>    because myapp.o has no reference to any symbols in nulrdd so
>    nulrdd will be ignored and then all RDD code will be taken
>    from hrb where such references will appear.
>    Of course such situatios exist only in few linkers.

Are you absolutly sure ? AFAIK there is *always* a reference to RDD
code from VM. Otehrwise it would be possible to link an executable
without *any* rdd library, which is IMO impossible. So yes,
        gcc myapp.o -lnulrdd -lhrb
will work.

> 2. Even if linker does not work like above then it will be hard
>    to detect if libraries like nulrdd supports all necessary symbols.
>    Even if sth will be missing then it be taken from hrb library
>    so nulrdd will not functional as it should.

This will be a problem *only* for nulrdd. And I doubt it is used
by many users - if *any*. And it can easily testable, if we leave
old sepatare libraries buildable by for example setting an envvar
before a make process. So to me it's an example of "nonexistence"
problem.

-- 

Marek

From harbour.01 at syenar.hu  Mon Feb 11 07:40:18 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Feb 11 07:39:57 2008
Subject: [Harbour] OLE Implementation - xHarbour Compatibility
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815E963@SRV02.deltain.net>
References: <15392521.post@talk.nabble.com>	<20080210131640.GA1101@localhost.localdomain><15403138.post@talk.nabble.com><47AFF5D5.4090409@mweb.co.za><B9504DF7-6693-490D-9682-8235EC24A3CB@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815E961@SRV02.deltain.net>
	<4CE397A9-52EF-4771-93A5-28DD663BFC88@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815E963@SRV02.deltain.net>
Message-ID: <09AD33B6-1642-4098-A5CE-F31AE3A4C127@syenar.hu>

Hi Massimo,

This is it. The first part basically came from MSVC, my
part comes after ':end', nothing special really. This can
be used for both core and contribs.

(I've never compiled xhb, so I have no idea if this works it)

--------------------------------------------------
@echo off

@SET VSINSTALLDIR=C:\Program Files\Microsoft Visual Studio 9.0
@SET VCINSTALLDIR=C:\Program Files\Microsoft Visual Studio 9.0\VC
@SET FrameworkDir=C:\WINDOWS\Microsoft.NET\Framework
@SET FrameworkVersion=v2.0.50727
@SET FrameworkSDKDir=C:\Program Files\Microsoft Visual Studio 9.0\SDK 
\v2.0
@if "%VSINSTALLDIR%"=="" goto error_no_VSINSTALLDIR
@if "%VCINSTALLDIR%"=="" goto error_no_VCINSTALLDIR

@echo Setting environment for using Microsoft Visual Studio 2008 x86  
tools.

@rem
@rem Root of Visual Studio IDE installed files.
@rem
@set DevEnvDir=C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE

@set PATH=C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE;C: 
\Program Files\Microsoft Visual Studio 9.0\VC\BIN;C:\Program Files 
\Microsoft Visual Studio 9.0\Common7\Tools;C:\Program Files\Microsoft  
Visual Studio 9.0\SDK\v2.0\bin;C:\WINDOWS\Microsoft.NET\Framework 
\v2.0.50727;C:\Program Files\Microsoft Visual Studio 9.0\VC\VCPackages; 
%PATH%
@set INCLUDE=C:\Program Files\Microsoft Visual Studio 9.0\VC\INCLUDE;C: 
\Program Files\Microsoft SDKs\Windows\v6.0\Include;%INCLUDE%
@set LIB=C:\Program Files\Microsoft Visual Studio 9.0\VC\LIB;C: 
\Program Files\Microsoft SDKs\Windows\v6.0\Lib;%LIB%
@set LIBPATH=C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727

@goto end

:error_no_VSINSTALLDIR
@echo ERROR: VSINSTALLDIR variable is not set.
@goto end

:error_no_VCINSTALLDIR
@echo ERROR: VCINSTALLDIR variable is not set.
@goto end

:end

set HB_VISUALC_VER=90
set HB_BUILD_MODE=cpp
set CFLAGS=-O2

set APOLLO_DIR=C:\devl\Apollo
set FIREBIRD_DIR=C:\devl\Firebird
set FREEIMAGE_DIR=C:\devl\FreeImage
set GD_DIR=C:\devl\gd
set MYSQL_DIR=C:\devl\mysql
set PDFLIB_DIR=C:\devl\pdflib
set PGSQL_DIR=C:\devl\pgsql
set ADS_VER=810
set ADS_DIR=C:\devl\ADS%ADS_VER%\ACESDK
set ZLIB_DIR=C:\devl\zlib-dll

call make_vc.bat %1 %2 %3
call make_vc.bat install %1 %2 %3
--------------------------------------------------

Brgds,
Viktor

On 2008.02.11., at 12:43, Massimo Belgrano wrote:

> From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org 
> ] On Behalf Of Szak?ts Viktor
> Sent: Monday, February 11, 2008 12:23 PM
> To: Harbour Project Main Developer List.
> Subject: Re: [Harbour] OLE Implementation - xHarbour Compatibility
>
>> Hi Massimo,
>> Yes, it's a clean compile with MSVC 2008 Express, too.
>
>
> Can you send me/post the batch for compiling xharbour?
> Have you also a project file for editing harbour source in visual  
> mode with visual c++ 2008?
>
> Thanks
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mpaliwoda at interia.pl  Mon Feb 11 07:40:57 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Mon Feb 11 07:40:57 2008
Subject: [Harbour] Re: What about stopping the release process?
In-Reply-To: <fopf2m$udt$1@ger.gmane.org>
References: <200802082333.59785.philb@philb.us>	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>	<47AD4A25.8080004@interia.pl>	<29EBEB77-B467-441F-B744-02533F0838BE@syenar.hu>	<47AD8390.70507@interia.pl>	<47AF1AB9.8090100@interia.pl>	<47AF1F52.6070601@interia.pl>	<B23951C3-63BB-40B5-8339-431B5D4A4513@syenar.hu>	<47AF4A4A.1000608@interia.pl>	<ABCC9C8E-8753-43B6-A63C-017DB4B14329@syenar.hu>	<20080211105306.GB6769@localhost.localdomain>
	<fopf2m$udt$1@ger.gmane.org>
Message-ID: <fopfoa$oi$1@ger.gmane.org>

Marek Paliwoda wrote:

>> There are some techincal differences.
>> 1. On some system it will be hard (or impossible) to overload some
>>    subsystem using only libraries. F.e. nulrdd which should replaces
>>    whole RDD tree for applications which do not want to use any
>>    RDD releated code will not work if you will try to link sth like:
>>       gcc myapp.o -lnulrdd -lhrb
>>    because myapp.o has no reference to any symbols in nulrdd so
>>    nulrdd will be ignored and then all RDD code will be taken
>>    from hrb where such references will appear.
>>    Of course such situatios exist only in few linkers.
> 
> Are you absolutly sure ? AFAIK there is *always* a reference to RDD
> code from VM. Otehrwise it would be possible to link an executable
> without *any* rdd library, which is IMO impossible. So yes,
>        gcc myapp.o -lnulrdd -lhrb
> will work.

Or in case linker does not support rescan, a simple REQUEST NULRDD
would certainly help and would be consistent with "Clipper rules".

-- 

Marek

From druzus at acn.waw.pl  Mon Feb 11 07:55:26 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Feb 11 07:55:35 2008
Subject: [Harbour] Re: What about stopping the release process?
In-Reply-To: <fopf2m$udt$1@ger.gmane.org>
References: <47AD4A25.8080004@interia.pl>
	<29EBEB77-B467-441F-B744-02533F0838BE@syenar.hu>
	<47AD8390.70507@interia.pl> <47AF1AB9.8090100@interia.pl>
	<47AF1F52.6070601@interia.pl>
	<B23951C3-63BB-40B5-8339-431B5D4A4513@syenar.hu>
	<47AF4A4A.1000608@interia.pl>
	<ABCC9C8E-8753-43B6-A63C-017DB4B14329@syenar.hu>
	<20080211105306.GB6769@localhost.localdomain>
	<fopf2m$udt$1@ger.gmane.org>
Message-ID: <20080211125525.GB7485@localhost.localdomain>

On Mon, 11 Feb 2008, Marek Paliwoda wrote:
> >There are some techincal differences.
> >1. On some system it will be hard (or impossible) to overload some
> >   subsystem using only libraries. F.e. nulrdd which should replaces
> >   whole RDD tree for applications which do not want to use any
> >   RDD releated code will not work if you will try to link sth like:
> >      gcc myapp.o -lnulrdd -lhrb
> >   because myapp.o has no reference to any symbols in nulrdd so
> >   nulrdd will be ignored and then all RDD code will be taken
> >   from hrb where such references will appear.
> >   Of course such situatios exist only in few linkers.
> Are you absolutly sure ? AFAIK there is *always* a reference to RDD
> code from VM. Otehrwise it would be possible to link an executable
> without *any* rdd library, which is IMO impossible. So yes,
>        gcc myapp.o -lnulrdd -lhrb
> will work.

Yes, such reference exists. But VM code will be inside hrb and
LD on some platforms when it will find it will take necessary
code also from hrb because it does not check libraries parsed
before. It's the reason why we are using -Wl,--start-group /
-Wl,--end-group to resolve cross references problems in our code.
But myapp.o will not have any references to RDD code so nulrdd
will be ignored.

> >2. Even if linker does not work like above then it will be hard
> >   to detect if libraries like nulrdd supports all necessary symbols.
> >   Even if sth will be missing then it be taken from hrb library
> >   so nulrdd will not functional as it should.
> This will be a problem *only* for nulrdd. And I doubt it is used
> by many users - if *any*. And it can easily testable, if we leave
> old sepatare libraries buildable by for example setting an envvar
> before a make process. So to me it's an example of "nonexistence"
> problem.

This problem will exist with any library if you will want to overload
them. The solution is converting nulrdd and other libraries to object
files (*.o). In such case LD will always link them though sometimes it
also may not be expected behavior. Anyhow I agree that we can live
with such limitation. But I really suggest to create multi platform
compiler and linker wrappers to hide such differences.
Viktor said that HBMAKE should be sth like that but the biggest
problem with HBMAKE is that it's a make application without many
functionalities offered by real make systems so many users will not
want to use it. ARAIR it also does not offer easy to use command
line interface so application can be compiled and linked without
make file at all and its make files are compiler and platform
dependent.

best regards,
Przemek
From maurilio.longo at libero.it  Mon Feb 11 07:56:40 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Mon Feb 11 07:56:47 2008
Subject: [Harbour] Re: 2008-02-06 11:08 UTC+0100 Marek Paliwoda
	(mpaliwodaat interia pl)
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
	<47AA232D.5070508@mail.udg.mx> <foec8f$7pj$1@ger.gmane.org>
Message-ID: <47B04608.CE986735@libero.it>

Marek,

I think I've found what is causing that 'emxbind failed...' error, you're
probably using eCS and you have a emx\bin directory in your boot disk where
there is an old emxbind.exe which gets called before the one inside
gcc\usr\bin because you have an environment variable named 'PATH' which has
the emx\bin directory before the gcc\usr\bin one.

I've stubled on the same problem trying a new version of eCS and trying to
build xharbour on it.

Hope this help.

Best regards.

Maurilio.



Marek Paliwoda ha scritto:
> 
> Hi David,
> 
> >  >2008-02-06 11:08 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)
> >  >   * harbour/common.mak
> >  >   * harbour/make_gcc.mak
> >  >   * harbour/make_gcc.sh
> >  >     ! Some fixes for OS/2+eComStation. Still not all is working ok
> >  >(dlls)
> >
> > Can you explain what is not working ?
> > What versions are you using ( OS/2, gcc, make, ... )
> 
> Well, truely speaking I do not use OS/2 :). I simply had
> a chance to access an OS/2 system on my friend's computer.
> He bought OS/2 long ago (he says he payed too much for it
> ;-)) and still has an old machine running OS/2 - because
> of a sentiment - I guess for the money he payed ;-).
> I don't know the OS/2 version - I didn't check it (in fact
> I wouldn't even know how to check this).
> 
> I installed eComStation build environment dated 2007/10/22
> which has gcc 3.3.5, make 3.81, bash 2.0.0.
> 
> It didn't work unfortunately - so I had to install something
> which is called EMX - I found one on a net - version 0.9c ??.
> 
> The main disapointment was bash. It does not support ==,&&,||
> operators. The second disapointment was ld. It requires that
> -o option has to have a space before the following file name.
> And the third disapointment was ld again. It does not support
> -Wl,--start-group,-Wl,--end-group options. I didn't want to
> fight with a proper libraries order, so I used a dirty hack
> to solve this problem, to succesfully compile static version
> of harbour. For some strange reason gtcrs did not compile ok
> because of undefined TIOCGWINSZ. I had a similar problem with
> DJGPP and gtpca, but here it was a problem with some disabled
> features in DJGPP header files. I didn't have time to carefully
> check the real problem, so I simply disabled gtcrs compilation.
> 
> Still harbour.dll does not link ok. The linker says something
> like "exebind failed ...". I completly do not know what is it
> talking about ;-).
> 
> I know you will not agree with me :), but I don't think it is
> worth the efforts to keep harbour compatible with OS/2. It is
> a dead system - IBM confirmed this lately - and those using it
> have now many new possibilities to migrate to newer systems.
> 
> But that's my opinion only and I don't want to argue about it :).
> 
> --
> 
> Marek
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

-- 
 __________                   
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.
From druzus at acn.waw.pl  Mon Feb 11 08:00:00 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Feb 11 08:00:07 2008
Subject: [Harbour] Re: What about stopping the release process?
In-Reply-To: <fopfoa$oi$1@ger.gmane.org>
References: <29EBEB77-B467-441F-B744-02533F0838BE@syenar.hu>
	<47AD8390.70507@interia.pl> <47AF1AB9.8090100@interia.pl>
	<47AF1F52.6070601@interia.pl>
	<B23951C3-63BB-40B5-8339-431B5D4A4513@syenar.hu>
	<47AF4A4A.1000608@interia.pl>
	<ABCC9C8E-8753-43B6-A63C-017DB4B14329@syenar.hu>
	<20080211105306.GB6769@localhost.localdomain>
	<fopf2m$udt$1@ger.gmane.org> <fopfoa$oi$1@ger.gmane.org>
Message-ID: <20080211130000.GA7776@localhost.localdomain>

On Mon, 11 Feb 2008, Marek Paliwoda wrote:
> >Are you absolutly sure ? AFAIK there is *always* a reference to RDD
> >code from VM. Otehrwise it would be possible to link an executable
> >without *any* rdd library, which is IMO impossible. So yes,
> >       gcc myapp.o -lnulrdd -lhrb
> >will work.
> Or in case linker does not support rescan, a simple REQUEST NULRDD
> would certainly help and would be consistent with "Clipper rules".

Yes. This will be nice solution. The only one problem is with
temporary test if in our RTL code will not appear calls to new
RDD functions which may force linking both modules. But of course
it's a minor problem.

best regards,
Przemek
From gvarona at ec-red.com  Mon Feb 11 08:22:10 2008
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Mon Feb 11 08:21:21 2008
Subject: [Harbour] Error en comando USE / Error in USE command
In-Reply-To: <47AD0EAE.5000909@ec-red.com>
References: <47AD0EAE.5000909@ec-red.com>
Message-ID: <47B04C02.10404@ec-red.com>

Please,  
Does Anyone checked this?

Best Regards
GVS

Guillermo Varona Silup? escribi?:
> Hello
> This sample:
>
> procedure main
> use D:\harbour\tests\test.dbf
> ? first
> quit
>
> In Clipper:
> E:\SyS_GVS\CuC>test1
> Homer
> E:\SyS_GVS\CuC>
>
> In Harbour:
> E:\SyS_GVS\CuC>testhb
> Error BASE/1003  Variable does not exist: FIRST
> Called from MAIN(3)
> E:\SyS_GVS\CuC>
>
> TEST.DBF in folder \harbour\tests
>
> Best Regards
> GVS
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
> __________ Information from ESET Smart Security, version of virus 
> signature database 2863 (20080211) __________
>
> The message was checked by ESET Smart Security.
>
> http://www.eset.com
>
>
>

From rglab at przesiew.imid.med.pl  Mon Feb 11 08:51:45 2008
From: rglab at przesiew.imid.med.pl (Ryszard Glab)
Date: Mon Feb 11 08:39:06 2008
Subject: [Harbour] Re: What about stopping the release process?
In-Reply-To: <20080211130000.GA7776@localhost.localdomain>
References: <29EBEB77-B467-441F-B744-02533F0838BE@syenar.hu>,
	<fopfoa$oi$1@ger.gmane.org>,
	<20080211130000.GA7776@localhost.localdomain>
Message-ID: <47B06101.1880.9A9F6F@rglab.przesiew.imid.med.pl>

On 11 Feb 2008 at 14:00, Przemyslaw Czerpak wrote:

> Yes. This will be nice solution. The only one problem is with
> temporary test if in our RTL code will not appear calls to new
> RDD functions which may force linking both modules. But of course
> it's a minor problem.

  Can we create then two libraries:
harbour - with vm+rtl+rdd
harbourn - with wm+rtl+nulsys and without rdd code

Regards, Ryszard
From dbtopas at dbtopas.lt  Mon Feb 11 08:48:21 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Feb 11 08:47:06 2008
Subject: [Harbour] Asynchronous procedures
In-Reply-To: <2386af1b0802102223j55358c62u25ccfdb6f73efe71@mail.gmail.com>
References: <47A5130B.8040704@dbtopas.lt>
	<15250095.post@talk.nabble.com>	<47A5E4C5.7090509@dbtopas.lt>
	<47A87E8B.2020205@dbtopas.lt>	<2386af1b0802071253te62a16fh5a77f657140241cd@mail.gmail.com>	<47AC7744.8070704@dbtopas.lt>
	<2386af1b0802102223j55358c62u25ccfdb6f73efe71@mail.gmail.com>
Message-ID: <47B05225.1010302@dbtopas.lt>

Hi,

Saulius Zrelskis wrote:
> Thanks for sharing info. I am intensively using BCC and all related info
> is very important.

I'm also using BCC, but haven't find anything wrong until now. That's 
why I've made assumption it could be my bug.


> One small notice, looking at line:
>   pEntry = (ULONG*) hb_xrealloc( pEntry, ulEntryAlloc * sizeof( ULONG ) );
> 
> Compiler must launch warning, that variable pEntry is not initialized;
> may be assigning to that variable drown this fact...

I do not agree here. hb_xrealloc() is called in the loop, and allocation 
of pEntry is done on the previous cycles of the same loop. There is 
reduced code:

    ulEntryAlloc = 0;
    while( ... )
    {

       ...
          if( ulEntryAlloc )
          {
             ulEntryAlloc += 8;
             pEntry = (ULONG*) hb_xrealloc( pEntry, ... );
          }
          else
          {
             ulEntryAlloc = 8;
             pEntry = (ULONG*) hb_xgrab( ... );
          }
       ...
    }

Best regards,
Mindaugas
From sscc at mweb.co.za  Mon Feb 11 08:47:14 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Mon Feb 11 08:47:34 2008
Subject: [Harbour] #ytranslate
Message-ID: <47B051E2.3080905@mweb.co.za>

Hi all

I tried to use the xharbour dll functions with Harbour. hbdll.ch from 
Harbour includes wintypes.ch which *is* in Harbour.

wintypes.ch has the line:

#ytranslate CTYPE_INT(<x>)   Int(<x>) /* Fixes conflict with INT() 
function */

in it. This results in:

\harbour8\include\wintypes.ch(111) Error E0007  Missing => in 
#translate/#command

I guess #ytranslate is not supported, so perhaps this line should be 
removed?

Regards
Alex

PS :
Harbour Build Info
---------------------------
Version: Harbour devel build 1.1-1 Intl.
PCode version: 0.2
Compiler: Microsoft Visual C 14.0.24999
Platform: Windows XP 5.1.2600 Service Pack 2

Built on: Feb 11 2008 14:39:39
Last ChangeLog entry: 2007-06-14 00:20 UTC+0200 Przemyslaw Czerpak
ChangeLog CVS version: ChangeLog,v 1.5396 2007/06/13 22:20:13
From druzus at acn.waw.pl  Mon Feb 11 08:51:22 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Feb 11 08:51:27 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <47A48235.7020505@dbtopas.lt>
References: <47A3A1E5.7010009@dbtopas.lt>
	<20080202125724.GB5637@localhost.localdomain>
	<47A48235.7020505@dbtopas.lt>
Message-ID: <20080211135122.GA8006@localhost.localdomain>

On Sat, 02 Feb 2008, Mindaugas Kavaliauskas wrote:
> >Multiple putting the same pointer in
> >GC pointer item is not safe. If you think that it should be
> >safe then I can add such functionality but in such case IMHO
> >I should also update hb_itemPutCPtr() to be safe for multiple
> >putting the same string pointer.
> Perhaps it's a big change, and it seems we manage OK with string 
> pointers (well, in most times...). So, we just need to get used to 
> pointers also.

No. In fact it's minor modification. It will be enough to initialize
referece counter with 0 and add hb_xRefInc() in hb_itemPut*() functions.
But this modifications should be bound with yet another one (see below).

> >But you can also change your code:
> >...
> >    HB_FUNC( MYFUNC )
> >    {
> >        PHB_ITEM pItem = NULL;
> >        void*  ptr = hb_parptrGC( hb_fctx_destructor, 1 );
> >        if( ! ptr )
> >        {
> >           ptr = hb_gcAlloc( 4, hb_fctx_destructor );
> >           pItem = hb_itemPutPtrGC( NULL, ptr );
> >           /* now ptr is safe and you do not have to worry that
> >            * it can be removed by some code inside <other code>
> >            * which may activate GC
> >            */
> >        }
> >        /* <other code> */
> >        if( pItem )
> >           hb_itemReturnRelease( pItem );
> >        else
> >           hb_itemReturn( hb_param( 1, HB_IT_ANY ) );
> >    }
> This code is OK for me, thanks. I'm also surprised, that You've answer 
> one more question, I haven't asked for!!! The question was: after 
> hb_gcAlloc() no item is pointing to pointer, could it be freed by GC?

And hb_gcAlloc() is sth what should be modified yet. This function
returns pointer which is not locked (hb_gcLock()/hb_gcUnlock()) and
can be freed by GC if we do not lock it or attach to GC known item.
When we add automatic GC call then it may be a problem for some 3-rd
party code. If you look at core code then you will find that I
intentionally changed the order of allocating data for arrays, hashes,
codeblocks and some collectible pointer items to eliminate potentially
danger situations. I know how it should be done and it was easy for me.
But it may be serious problem for 3-rd party code developers who do
not know details of our HVM and GC and when/where it can be automatically
activated in the future. Now if they want to be sure that nothing wrong
will happen in <initialization code> they should make sth like:

      ptr = hb_gcLock( hb_gcAlloc( ptr ) );
      <initialization code>
      hb_itemPutPtrGC( ptr, destructorFunc );
      hb_gcUnock( ptr );

IMHO hb_gcLock() should return LOCKED pointer and hb_itemPutPtrGC() should
unlock it automatically and increase reference counter (modification above).

In such case the same code will look like:

      ptr = hb_gcAlloc( ptr );
      <initialization code>
      hb_itemPutPtrGC( ptr, destructorFunc );

I think that it will greatly reduce possible mistakes and also your
first example will work as you wanted. hb_gcLock()/hb_gcUnlock() are
a little bit too low level for me if possible then they should be
eliminated from 3-rd party API.

Opinions? Ryszard you are original author of hb_gc*() functions.
What do you think about it.

BTW I would like to also ask about real usage of marksweep function.
I know what it does but is it still necessary for 3-rd party code
with current GC? Can someone who uses it say what is its exact job
in his code?

best regards,
Przemek
From labitas at gmail.com  Mon Feb 11 08:55:08 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Mon Feb 11 08:55:11 2008
Subject: R: [Harbour] OLE Implementation - xHarbour Compatibility
In-Reply-To: <20080211122856.GA7485@localhost.localdomain>
References: <15392521.post@talk.nabble.com>
	<20080210131640.GA1101@localhost.localdomain>
	<AFB948164110ED43B5EB849E8DEEF03815E95F@SRV02.deltain.net>
	<2386af1b0802110314n29f5f6edh6140a9eaaca50541@mail.gmail.com>
	<20080211122856.GA7485@localhost.localdomain>
Message-ID: <2386af1b0802110555v360ecd8gf6ea903476fb8170@mail.gmail.com>

Very useful reading, thank you, Przemek.
It needs deeper tests done, I am extremely interested to assist.

Enrico, have you code, which GPFs with -a4 ?

Have to mention, that before building xHarbour binaries I always search
for "-a8" and replacing with "-a4" (there are about ten places in sources)
I don't go deep into demand of all these changes, but it is quiet for me
to secure against danger.
And never attempted restore -a8 setting for solving GPFs occurs.

Best regards
Saulius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080211/c3358654/attachment-0001.html
From druzus at acn.waw.pl  Mon Feb 11 09:01:07 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Feb 11 09:01:20 2008
Subject: [Harbour] Error en comando USE / Error in USE command
In-Reply-To: <47B04C02.10404@ec-red.com>
References: <47AD0EAE.5000909@ec-red.com> <47B04C02.10404@ec-red.com>
Message-ID: <20080211140107.GB8006@localhost.localdomain>

On Mon, 11 Feb 2008, Guillermo Varona Silup? wrote:
> Please,  
> Does Anyone checked this?
> >procedure main
> >use D:\harbour\tests\test.dbf

Add here:

   ? used(), neterr(), alias()
   if used()
      ? "DBF structure:"
      dbEval(dbStruct(),{|x,i|qout(i, "{",x[1],x[2],x[3],x[4],"}")})
   else
      ? "not used"
   endif

> >? first
> >quit

And probably you will find the answer yourself.
We are not a wizards to guess what's the source of problem ;-)

best regards,
Przemek
From labitas at gmail.com  Mon Feb 11 09:35:52 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Mon Feb 11 09:36:05 2008
Subject: [Harbour] Asynchronous procedures
In-Reply-To: <47B05225.1010302@dbtopas.lt>
References: <47A5130B.8040704@dbtopas.lt> <15250095.post@talk.nabble.com>
	<47A5E4C5.7090509@dbtopas.lt> <47A87E8B.2020205@dbtopas.lt>
	<2386af1b0802071253te62a16fh5a77f657140241cd@mail.gmail.com>
	<47AC7744.8070704@dbtopas.lt>
	<2386af1b0802102223j55358c62u25ccfdb6f73efe71@mail.gmail.com>
	<47B05225.1010302@dbtopas.lt>
Message-ID: <2386af1b0802110635h64fb7c1q93f771d0612eb295@mail.gmail.com>

Hi, Mindaugas


> One small notice, looking at line:
> >   pEntry = (ULONG*) hb_xrealloc( pEntry, ulEntryAlloc * sizeof( ULONG )
> );
> >
> > Compiler must launch warning, that variable pEntry is not initialized;
> > may be assigning to that variable drown this fact...
>
>
> I do not agree here. hb_xrealloc() is called in the loop, and allocation
> of pEntry is done on the previous cycles of the same loop. There is
> reduced code:
>
>     ulEntryAlloc = 0;
>     while( ... )
>     {
>
>        ...
>           if( ulEntryAlloc )
>           {
>              ulEntryAlloc += 8;
>              pEntry = (ULONG*) hb_xrealloc( pEntry, ... );
>           }
>           else
>           {
>              ulEntryAlloc = 8;
>              pEntry = (ULONG*) hb_xgrab( ... );
>           }
>        ...
>
>     }



Sorry, my fault :(

Best regards,
Saulius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080211/4e96de56/attachment.html
From druzus at acn.waw.pl  Mon Feb 11 09:44:41 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Feb 11 09:44:46 2008
Subject: [Harbour] Re: What about stopping the release process?
In-Reply-To: <47B06101.1880.9A9F6F@rglab.przesiew.imid.med.pl>
References: <20080211130000.GA7776@localhost.localdomain>
	<47B06101.1880.9A9F6F@rglab.przesiew.imid.med.pl>
Message-ID: <20080211144441.GA8306@localhost.localdomain>

On Mon, 11 Feb 2008, Ryszard Glab wrote:
> > Yes. This will be nice solution. The only one problem is with
> > temporary test if in our RTL code will not appear calls to new
> > RDD functions which may force linking both modules. But of course
> > it's a minor problem.
>   Can we create then two libraries:
> harbour - with vm+rtl+rdd
> harbourn - with wm+rtl+nulsys and without rdd code

Interesting. But please remember that we will have HVM version
for MT mode. In current terminology I wanted to call it hbvmmt.
with such common library we will need harbourmt. In such case
I rather will not want to make more harbour libraries because
we will have to create each of them in ST and MT version.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Feb 11 09:48:30 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Feb 11 09:48:35 2008
Subject: [Harbour] #ytranslate
In-Reply-To: <47B051E2.3080905@mweb.co.za>
References: <47B051E2.3080905@mweb.co.za>
Message-ID: <20080211144830.GB8306@localhost.localdomain>

On Mon, 11 Feb 2008, Alex Strickland wrote:
> Hi all
> I tried to use the xharbour dll functions with Harbour. hbdll.ch from 
> Harbour includes wintypes.ch which *is* in Harbour.
> wintypes.ch has the line:
> #ytranslate CTYPE_INT(<x>)   Int(<x>) /* Fixes conflict with INT() 
> function */
> in it. This results in:
> \harbour8\include\wintypes.ch(111) Error E0007  Missing => in 
> #translate/#command
> I guess #ytranslate is not supported, so perhaps this line should be 
> removed?

No. It's a typo and I think the above error message perfectly explain
what is wrong. Just simply add missing => in directive.

   #ytranslate CTYPE_INT(<x>) => Int(<x>)

best regards,
Przemek
From druzus at acn.waw.pl  Mon Feb 11 10:23:58 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Feb 11 10:24:02 2008
Subject: [Harbour] 2008-02-11 16:23 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200802111523.m1BFNwuQ008672@31-mo5-4.acn.waw.pl>

2008-02-11 16:23 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/xhb/wintypes.ch
    ! added missing => in #ytranslate command - thanks to Alex
  * harbour/contrib/hbw32/w32_tole.prg
    * fixed typo in one comment
  * harbour/contrib/hbw32/w32_ole.c
    ! added cleanup code for s_pOleAuto - memory leak fix

best regards
Przemek
From dbtopas at dbtopas.lt  Mon Feb 11 10:40:18 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Feb 11 10:38:59 2008
Subject: R: [Harbour] OLE Implementation - xHarbour Compatibility
In-Reply-To: <2386af1b0802110314n29f5f6edh6140a9eaaca50541@mail.gmail.com>
References: <15392521.post@talk.nabble.com>	<20080210131640.GA1101@localhost.localdomain>	<AFB948164110ED43B5EB849E8DEEF03815E95F@SRV02.deltain.net>
	<2386af1b0802110314n29f5f6edh6140a9eaaca50541@mail.gmail.com>
Message-ID: <47B06C62.5090805@dbtopas.lt>

Saulius Zrelskis wrote:
> OLE include files have their suitable #pragma option directives with
> restoring _all_ initial settings, so different alignment seems as if
> provided by compiler...

Hi,


I also have a question similar to Saulius. Do you know what structures 
needs some specific alignment? I guess all required alignment of OLE 
structures should be set/restored with #pragmas in ole*.h from BCC.

But in general I want to have release. We are in release stage for 4 
months or more(!), and we are limited to bugfix only. I have my own 
clean OLE implementation. It does not support as many features and bugs 
as xHarbour's OLE, but code quality is better. I also has ADS RDD which 
supports indexing on codeblock keys, and some other things I want to 
share. But I'm waiting for release and opened SVN for future developments.


Best regards,
Mindaugas
From mpaliwoda at interia.pl  Mon Feb 11 11:13:27 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Mon Feb 11 11:13:36 2008
Subject: [Harbour] Re: 2008-02-06 11:08 UTC+0100 Marek
	Paliwoda	(mpaliwodaat interia pl)
In-Reply-To: <47B04608.CE986735@libero.it>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>	<47AA232D.5070508@mail.udg.mx>
	<foec8f$7pj$1@ger.gmane.org> <47B04608.CE986735@libero.it>
Message-ID: <47B07427.2060900@interia.pl>

Hi Maurilio,

> I think I've found what is causing that 'emxbind failed...' error, you're
> probably using eCS and you have a emx\bin directory in your boot disk where
> there is an old emxbind.exe which gets called before the one inside
> gcc\usr\bin because you have an environment variable named 'PATH' which has
> the emx\bin directory before the gcc\usr\bin one.
> 
> I've stubled on the same problem trying a new version of eCS and trying to
> build xharbour on it.
> 
> Hope this help.

I am sure it will :). Because if I remember correctly, the
situation was exactly as you described above.
However I am not sure when I'll have access to OS2 again.
I'll try to organize my next OS2 session soon :).

-- 

Marek


----------------------------------------------------------------------
Sprawdz, czy pasujesz do swojego partnera!
http://link.interia.pl/f1ce7

From mpaliwoda at interia.pl  Mon Feb 11 11:31:24 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Mon Feb 11 11:31:29 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <20080210203659.GA3490@localhost.localdomain>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>	<200802082333.59785.philb@philb.us>	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>	<47AD4A25.8080004@interia.pl>	<29EBEB77-B467-441F-B744-02533F0838BE@syenar.hu>	<47AD8390.70507@interia.pl>
	<47AF1AB9.8090100@interia.pl>	<7D3470CC-6296-4A6D-8384-D949697319ED@syenar.hu>
	<20080210203659.GA3490@localhost.localdomain>
Message-ID: <47B0785C.3060602@interia.pl>

Przemek, Viktor,

 > For PCRE we have set of macros you can set in C_USR
> envvar before building Harbour to reach such effect, f.e. -DHB_POSIX_REGEX
> We can use:
> 
>    HB_POSIX_REGEX - use POSIX regex instead of PCRE, it should work
>                     on all POSIX systems (f.e. in *nixes)
> 
>    HB_PCRE_REGEX  - use platform native PCRE library
> 
>    HB_PCRE_REGEX_BCC - use old PCRE library build into BCC CRTL
> 
> when non of the above is set then our own copy of PCRE is used.

In such a case, I think it would be better to create a separate
library for PCRE. This way it would be easier to switch library
during linking time.

Any opinions ?

-- 

Marek

----------------------------------------------------------------------
Mamy nagrody dla Ciebie!
Kliknij >>>  http://link.interia.pl/f1cf5 

From e.m.giordano at emagsoftware.it  Mon Feb 11 11:38:46 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Feb 11 11:38:53 2008
Subject: R: [Harbour] OLE Implementation - xHarbour Compatibility
References: <15392521.post@talk.nabble.com><20080210131640.GA1101@localhost.localdomain><AFB948164110ED43B5EB849E8DEEF03815E95F@SRV02.deltain.net><2386af1b0802110314n29f5f6edh6140a9eaaca50541@mail.gmail.com><20080211122856.GA7485@localhost.localdomain>
	<2386af1b0802110555v360ecd8gf6ea903476fb8170@mail.gmail.com>
Message-ID: <007701c86ccc$929fbf10$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Saulius Zrelskis" <labitas@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: luned? 11 febbraio 2008 14.55
Oggetto: Re: R: [Harbour] OLE Implementation - xHarbour Compatibility


> Enrico, have you code, which GPFs with -a4 ?

Here it is:

FUNCTION MAIN()

    LOCAL oExcel := CREATEOBJECT( "Excel.Application" )

    LOCAL oWorkBook := oExcel:WorkBooks:Add()

    LOCAL oWorkSheet

    FOR EACH oWorkSheet IN oWorkBook:WorkSheets
        ? oWorkSheet:Name
    NEXT

    oExcel:Quit()

    INKEY( 0 )

    RETURN NIL

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From gvarona at ec-red.com  Mon Feb 11 12:25:41 2008
From: gvarona at ec-red.com (=?ISO-8859-2?Q?Guillermo_Varona_Silup=FA?=)
Date: Mon Feb 11 12:24:55 2008
Subject: [Harbour] Error en comando USE / Error in USE command
In-Reply-To: <20080211140107.GB8006@localhost.localdomain>
References: <47AD0EAE.5000909@ec-red.com> <47B04C02.10404@ec-red.com>
	<20080211140107.GB8006@localhost.localdomain>
Message-ID: <47B08515.9020807@ec-red.com>

Ok. Thanks Przmek, now work fine.

Best Regards
GVS

Przemyslaw Czerpak escribi?:
> On Mon, 11 Feb 2008, Guillermo Varona Silup? wrote:
>   
>> Please,  
>> Does Anyone checked this?
>>     
>>> procedure main
>>> use D:\harbour\tests\test.dbf
>>>       
>
> Add here:
>
>    ? used(), neterr(), alias()
>    if used()
>       ? "DBF structure:"
>       dbEval(dbStruct(),{|x,i|qout(i, "{",x[1],x[2],x[3],x[4],"}")})
>    else
>       ? "not used"
>    endif
>
>   
>>> ? first
>>> quit
>>>       
>
> And probably you will find the answer yourself.
> We are not a wizards to guess what's the source of problem ;-)
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
> __________ Information from ESET Smart Security, version of virus signature database 2864 (20080211) __________
>
> The message was checked by ESET Smart Security.
>
> http://www.eset.com
>
>
>
>   

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080211/41f221bf/attachment.html
From druzus at acn.waw.pl  Mon Feb 11 12:43:03 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Feb 11 12:43:12 2008
Subject: [Harbour] Re: [xHarbour-developers] log(0) fails on some pc?!?!
In-Reply-To: <47B07D55.8193FFCB@libero.it>
References: <47B07D55.8193FFCB@libero.it>
Message-ID: <20080211174303.GA9143@localhost.localdomain>

On Mon, 11 Feb 2008, Maurilio Longo wrote:
> I've got a weird problem, this simple code
> function main()
> 	? log(0)
> return nil
> compiled with GCC on OS/2 runs ok on some PCs and fails with a SIGFPE on
> others?!?!

On some systems calling math functions with wrong parameters generates
SIGFPE errors. It depends on used OS, CRTL libraries and CPU.
In such case it's necessary to add code to catch such
signal and replace the result with the value return by Clipper in such
situation.
As workaround we can also add some additional code which will check
if parameters passed to math functions are in valid range. See rtl/math.c
how it works now.

best regards,
Przemek
From labitas at gmail.com  Mon Feb 11 13:47:19 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Mon Feb 11 13:47:22 2008
Subject: R: [Harbour] OLE Implementation - xHarbour Compatibility
In-Reply-To: <007701c86ccc$929fbf10$ca64fea9@emag>
References: <15392521.post@talk.nabble.com>
	<20080210131640.GA1101@localhost.localdomain>
	<AFB948164110ED43B5EB849E8DEEF03815E95F@SRV02.deltain.net>
	<2386af1b0802110314n29f5f6edh6140a9eaaca50541@mail.gmail.com>
	<20080211122856.GA7485@localhost.localdomain>
	<2386af1b0802110555v360ecd8gf6ea903476fb8170@mail.gmail.com>
	<007701c86ccc$929fbf10$ca64fea9@emag>
Message-ID: <2386af1b0802111047w4c1fadd6ybc98c5c589f73b95@mail.gmail.com>

Enrico,

Thank you for sample.
As expected, your code works well here.
Now trying to squeeze a GPF without success.
The only one change made in xharbour\makefile.bc from -a8 to -a4

Best regards,
Saulius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080211/c5bdad1e/attachment.html
From bedipritpal at hotmail.com  Mon Feb 11 15:01:02 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Feb 11 15:01:18 2008
Subject: [Harbour] GC - Reference to Freed Memory Block - GPF
In-Reply-To: <20080211104331.GA6769@localhost.localdomain>
References: <15403015.post@talk.nabble.com>
	<20080211104331.GA6769@localhost.localdomain>
Message-ID: <15419405.post@talk.nabble.com>


Hello Przemek


Przemyslaw Czerpak-2 wrote:
> 
> Clipper does not have destructors and xHarbour cannot detect most
> of destructors errors at all what causes memory corruption and later
> GPFs. See tests/destruct.prg as an example of such errors. It also
> illustrates why destructors are not safe in xHarbour which cannot
> cleanly serve .prg code errors.
> 

I have understood in what circumstances destructors operate. But I have
never used destructors anywhere. I mean I am not assigning self to any class
variables, public variables, or even I do not use DESTRUCTOR command in any
of my classes. Because my application distribution still support Clipper
compiled exe, I have ever tried to keep code as near to Clipper as possible.
The code has been and is working ok since 15 years.


Przemyslaw Czerpak-2 wrote:
> 
> It's reported from GC but the problem is in your code and
> it's caused by some destructor you are using (like in destruct.prg)
> or by C code which keeps references to collectible block in unknown
> for GC place. 1-st I would look for all destructors in your whole
> code and try to isolate the problem. It does not have to be related
> to BROWSE object at all.
> Of course it's also possible that it's a bug in core code so if you
> can isolate it to small example then please inform me.
> In isolating process hb_gcAll(.t.) can greatly help - it will force
> error message because your object has cross references and it's freed
> only by GC.
> 

The problem is more I try to isolate the bug, more I get confused. I comment
out one branch, say this browser execution, the error shifts and surfaces
somewhere else. Because it is there in inkey() function which is used
heavily in all corners, I am not been able to isolate. I issue hb_gcall( .t.
) at few places and all those occurances are somewhere before inkey() calls.

Can you point out, or provide, some mechanism to handle this situation, or
to trace it more deeply ?

Regards
Pritpal Bedi, INDIA-USA
-- 
View this message in context: http://www.nabble.com/GC---Reference-to-Freed-Memory-Block---GPF-tp15403015p15419405.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Mon Feb 11 16:30:45 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Feb 11 16:30:59 2008
Subject: [Harbour] GC - Reference to Freed Memory Block - GPF
In-Reply-To: <15419405.post@talk.nabble.com>
References: <15403015.post@talk.nabble.com>
	<20080211104331.GA6769@localhost.localdomain>
	<15419405.post@talk.nabble.com>
Message-ID: <20080211213045.GA15743@localhost.localdomain>

On Mon, 11 Feb 2008, Pritpal Bedi wrote:
> I have understood in what circumstances destructors operate. But I have
> never used destructors anywhere. I mean I am not assigning self to any class
> variables, public variables, or even I do not use DESTRUCTOR command in any
> of my classes. Because my application distribution still support Clipper
> compiled exe, I have ever tried to keep code as near to Clipper as possible.

Then the bug can be anywhere in some C code you are executing or in
foreign code destructors. IMHO it's rather C code which corrupts memory
or some code borrowed from xHarbour which operates on HB_ITEM directly
at C level. F.e. good example of such code is old hbziparch, f.e.:

   proc main()
      HB_UNZIPALLFILE(,,,,,"",{||nil})
   return

The same bug exists in Harbour and xHarbour but only Harbour reports it.
But it can be result of any memory corruption, f.e.:

   proc main()
      BADCFUNC({})
   return
   #pragma begindump
   #include "hbapiitm.h"
   HB_FUNC( BADCFUNC )
   {
      /* damage 1-st param item type */
      memset( hb_param( 1, HB_IT_ANY ), 0, 4 );
   }
   #pragma enddump

Here also only Harbour GC can detect such situation and xHarbour
(and probably also Clipper but I haven't tested) will not report
any errors.
As you can see _ANY_ buggy C code can cause such error.
The problem is to find it. And it's rather very important
thing if you noticed sth like that to locate the exact reason
not only find workaround because memory corruption errors can
cause any other unpredictable bugs later in different places.

> The code has been and is working ok since 15 years.

Clipper is used by people for really long time with success but
we know that it has some memory corruption bugs. It does not mean
anything.

> The problem is more I try to isolate the bug, more I get confused. I comment
> out one branch, say this browser execution, the error shifts and surfaces
> somewhere else. Because it is there in inkey() function which is used
> heavily in all corners, I am not been able to isolate. I issue hb_gcall( .t.
> ) at few places and all those occurances are somewhere before inkey() calls.
> Can you point out, or provide, some mechanism to handle this situation, or
> to trace it more deeply ?

I suggested to use hb_gcAll(.t.) as replacement for hb_inkey(n) only
not to fix anything. Both execute GC cleanup code but hb_gcAll(.t.)
without delay.
To isolate the problem you will have to strip down your application
removing all executed code and modules to exclude also startup/init
code until you will not find the place which is source of the problem.
You should finish with small example. It's possible that using CodeGuard
or valgrind can help in locating bug. Both can detect many memory
corruption errors but not all.

best regards,
Przemek
From mbelgrano at deltain.it  Mon Feb 11 17:30:15 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Feb 11 17:30:25 2008
Subject: [Harbour] OLE Implementation - xHarbour Compatibility
In-Reply-To: <09AD33B6-1642-4098-A5CE-F31AE3A4C127@syenar.hu>
References: <15392521.post@talk.nabble.com>	<20080210131640.GA1101@localhost.localdomain><15403138.post@talk.nabble.com><47AFF5D5.4090409@mweb.co.za><B9504DF7-6693-490D-9682-8235EC24A3CB@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815E961@SRV02.deltain.net><4CE397A9-52EF-4771-93A5-28DD663BFC88@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815E963@SRV02.deltain.net>
	<09AD33B6-1642-4098-A5CE-F31AE3A4C127@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815E96D@SRV02.deltain.net>

Thanks.

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Monday, February 11, 2008 1:40 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] OLE Implementation - xHarbour Compatibility

Hi Massimo,

This is it. The first part basically came from MSVC, my
part comes after ':end', nothing special really. This can
be used for both core and contribs.

(I've never compiled xhb, so I have no idea if this works it)

--------------------------------------------------
@echo off

@SET VSINSTALLDIR=C:\Program Files\Microsoft Visual Studio 9.0
@SET VCINSTALLDIR=C:\Program Files\Microsoft Visual Studio 9.0\VC
@SET FrameworkDir=C:\WINDOWS\Microsoft.NET\Framework
@SET FrameworkVersion=v2.0.50727
@SET FrameworkSDKDir=C:\Program Files\Microsoft Visual Studio 9.0\SDK 
\v2.0
@if "%VSINSTALLDIR%"=="" goto error_no_VSINSTALLDIR
@if "%VCINSTALLDIR%"=="" goto error_no_VCINSTALLDIR

@echo Setting environment for using Microsoft Visual Studio 2008 x86  
tools.

@rem
@rem Root of Visual Studio IDE installed files.
@rem
@set DevEnvDir=C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE

@set PATH=C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE;C: 
\Program Files\Microsoft Visual Studio 9.0\VC\BIN;C:\Program Files 
\Microsoft Visual Studio 9.0\Common7\Tools;C:\Program Files\Microsoft  
Visual Studio 9.0\SDK\v2.0\bin;C:\WINDOWS\Microsoft.NET\Framework 
\v2.0.50727;C:\Program Files\Microsoft Visual Studio 9.0\VC\VCPackages; 
%PATH%
@set INCLUDE=C:\Program Files\Microsoft Visual Studio 9.0\VC\INCLUDE;C: 
\Program Files\Microsoft SDKs\Windows\v6.0\Include;%INCLUDE%
@set LIB=C:\Program Files\Microsoft Visual Studio 9.0\VC\LIB;C: 
\Program Files\Microsoft SDKs\Windows\v6.0\Lib;%LIB%
@set LIBPATH=C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727

@goto end

:error_no_VSINSTALLDIR
@echo ERROR: VSINSTALLDIR variable is not set.
@goto end

:error_no_VCINSTALLDIR
@echo ERROR: VCINSTALLDIR variable is not set.
@goto end

:end

set HB_VISUALC_VER=90
set HB_BUILD_MODE=cpp
set CFLAGS=-O2

set APOLLO_DIR=C:\devl\Apollo
set FIREBIRD_DIR=C:\devl\Firebird
set FREEIMAGE_DIR=C:\devl\FreeImage
set GD_DIR=C:\devl\gd
set MYSQL_DIR=C:\devl\mysql
set PDFLIB_DIR=C:\devl\pdflib
set PGSQL_DIR=C:\devl\pgsql
set ADS_VER=810
set ADS_DIR=C:\devl\ADS%ADS_VER%\ACESDK
set ZLIB_DIR=C:\devl\zlib-dll

call make_vc.bat %1 %2 %3
call make_vc.bat install %1 %2 %3
--------------------------------------------------

Brgds,
Viktor

On 2008.02.11., at 12:43, Massimo Belgrano wrote:

> From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org 
> ] On Behalf Of Szak?ts Viktor
> Sent: Monday, February 11, 2008 12:23 PM
> To: Harbour Project Main Developer List.
> Subject: Re: [Harbour] OLE Implementation - xHarbour Compatibility
>
>> Hi Massimo,
>> Yes, it's a clean compile with MSVC 2008 Express, too.
>
>
> Can you send me/post the batch for compiling xharbour?
> Have you also a project file for editing harbour source in visual  
> mode with visual c++ 2008?
>
> Thanks
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From randy at palmasdev.com  Mon Feb 11 17:34:09 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Mon Feb 11 17:33:11 2008
Subject: [Harbour] GC - Reference to Freed Memory Block - GPF
In-Reply-To: <20080211213045.GA15743@localhost.localdomain>
References: <15403015.post@talk.nabble.com>
	<20080211104331.GA6769@localhost.localdomain>
	<15419405.post@talk.nabble.com>
	<20080211213045.GA15743@localhost.localdomain>
Message-ID: <20080211223305.9B2DFE7C2@smtp.tor.pathcom.com>

Hi Przemek,

I just took a look at (what I think is) the latest build on 
SourceForge and I do not see that HB_GCALL takes any parameters - Are 
you sure there is a difference between hb_gcAll(.t.) and hb_gcAll()?

TIA.

Regards,
Randy.

At 04:30 PM 2/11/2008, you wrote:
>On Mon, 11 Feb 2008, Pritpal Bedi wrote:
> > I have understood in what circumstances destructors operate. But I have
> > never used destructors anywhere. I mean I am not assigning self 
> to any class
> > variables, public variables, or even I do not use DESTRUCTOR command in any
> > of my classes. Because my application distribution still support Clipper
> > compiled exe, I have ever tried to keep code as near to Clipper 
> as possible.
>
>Then the bug can be anywhere in some C code you are executing or in
>foreign code destructors. IMHO it's rather C code which corrupts memory
>or some code borrowed from xHarbour which operates on HB_ITEM directly
>at C level. F.e. good example of such code is old hbziparch, f.e.:
>
>    proc main()
>       HB_UNZIPALLFILE(,,,,,"",{||nil})
>    return
>
>The same bug exists in Harbour and xHarbour but only Harbour reports it.
>But it can be result of any memory corruption, f.e.:
>
>    proc main()
>       BADCFUNC({})
>    return
>    #pragma begindump
>    #include "hbapiitm.h"
>    HB_FUNC( BADCFUNC )
>    {
>       /* damage 1-st param item type */
>       memset( hb_param( 1, HB_IT_ANY ), 0, 4 );
>    }
>    #pragma enddump
>
>Here also only Harbour GC can detect such situation and xHarbour
>(and probably also Clipper but I haven't tested) will not report
>any errors.
>As you can see _ANY_ buggy C code can cause such error.
>The problem is to find it. And it's rather very important
>thing if you noticed sth like that to locate the exact reason
>not only find workaround because memory corruption errors can
>cause any other unpredictable bugs later in different places.
>
> > The code has been and is working ok since 15 years.
>
>Clipper is used by people for really long time with success but
>we know that it has some memory corruption bugs. It does not mean
>anything.
>
> > The problem is more I try to isolate the bug, more I get 
> confused. I comment
> > out one branch, say this browser execution, the error shifts and surfaces
> > somewhere else. Because it is there in inkey() function which is used
> > heavily in all corners, I am not been able to isolate. I issue 
> hb_gcall( .t.
> > ) at few places and all those occurances are somewhere before 
> inkey() calls.
> > Can you point out, or provide, some mechanism to handle this situation, or
> > to trace it more deeply ?
>
>I suggested to use hb_gcAll(.t.) as replacement for hb_inkey(n) only
>not to fix anything. Both execute GC cleanup code but hb_gcAll(.t.)
>without delay.
>To isolate the problem you will have to strip down your application
>removing all executed code and modules to exclude also startup/init
>code until you will not find the place which is source of the problem.
>You should finish with small example. It's possible that using CodeGuard
>or valgrind can help in locating bug. Both can detect many memory
>corruption errors but not all.
>
>best regards,
>Przemek
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour


From dbtopas at dbtopas.lt  Mon Feb 11 18:05:25 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Feb 11 18:04:06 2008
Subject: [Harbour] GC - Reference to Freed Memory Block - GPF
In-Reply-To: <20080211213045.GA15743@localhost.localdomain>
References: <15403015.post@talk.nabble.com>	<20080211104331.GA6769@localhost.localdomain>	<15419405.post@talk.nabble.com>
	<20080211213045.GA15743@localhost.localdomain>
Message-ID: <47B0D4B5.3050006@dbtopas.lt>

Hi,


> The same bug exists in Harbour and xHarbour but only Harbour reports it.
> But it can be result of any memory corruption, f.e.:
> 
>    proc main()
>       BADCFUNC({})
>    return
>    #pragma begindump
>    #include "hbapiitm.h"
>    HB_FUNC( BADCFUNC )
>    {
>       /* damage 1-st param item type */
>       memset( hb_param( 1, HB_IT_ANY ), 0, 4 );
>    }
>    #pragma enddump
> 
> Here also only Harbour GC can detect such situation and xHarbour
> (and probably also Clipper but I haven't tested) will not report
> any errors.

I'm not sure we are talking about the same thing, but if memory are 
dumped to fm.log files, I have a little proposition how to extend output 
to help find memory leaks.

After I've moved to Harbour I found several memory leaks in my code, 
because Harbour compiles with HB_FM_STATISTICS by default. fm.log 
contains Harbour level function name, but sometimes it's not enough to 
find memory leak easy. For example, I had memory leak in ORDCREATE(), 
but ORDCREATE RDD method is a complex function and I was unable to find 
a bug. I've added one more member
    void*  pAddr;
to HB_MEMINFO structure, it's pointer to the caller address of 
hb_xgrab(). Looking to the .map file, I found that memory leak comes 
from hb_macroCompile(). It help to find a bug, the problem was that item 
allocated by:
   if( SELF_COMPILE( (AREAP) pArea, lpdbOrdCondInfo->abFor ) == SUCCESS )
      pForItem = pArea->valResult;
was released by:
   hb_itemRelease( pForItem );

My code for pMem->pAddr assignment in hb_xgrab() is:
    pMem->pAddr = * ((void**)&ulSize - 1);
here ulSize is parameter of hb_xgrab(). The problem is, that this 
solution is not universal and depends on parameter passing convention, 
etc. and should be guarded with #ifdefs, but this will work on all 16 
and 32 bit systems with standard C stack frames (98% in our cases). So, 
I think this extension could be useful.


Best regards,
Mindaugas

From harbour.01 at syenar.hu  Mon Feb 11 19:25:20 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Feb 11 19:25:02 2008
Subject: [Harbour] What about stopping the release process?
In-Reply-To: <47B0785C.3060602@interia.pl>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>	<200802082333.59785.philb@philb.us>	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>	<47AD4A25.8080004@interia.pl>	<29EBEB77-B467-441F-B744-02533F0838BE@syenar.hu>	<47AD8390.70507@interia.pl>
	<47AF1AB9.8090100@interia.pl>	<7D3470CC-6296-4A6D-8384-D949697319ED@syenar.hu>
	<20080210203659.GA3490@localhost.localdomain>
	<47B0785C.3060602@interia.pl>
Message-ID: <713E6981-1934-439C-A91A-7A694E00787D@syenar.hu>

Definitely.

I'd also vote to separate for full hbrdd/rdd*, otherwise
we will end up having lots of different combinations with
and without RDD, with and without MT, etc, and at the end
we will have the same amount of libs as we have now, just
the size will be be bigger.

To put it shortly: I'd only include "static" parts in
harbour lib, and I'd create at max an MT and non-MT
version of harbour.lib, the rest left in separate libs.

After all the concept of libs is to have things always
used together packaged together and having every other
things packaged together in separate files. I see no
point in having 4 "unified" lib flavours (same confusion,
slow to generate, consuming more space, bigger binary
packages to distribute, etc)

It would help if MT/non-MT could be controlled at build
time (as we've once started to discuss).

My 2 cents.

Brgds,
Viktor

On 2008.02.11., at 17:31, Marek Paliwoda wrote:

> Przemek, Viktor,
>
> > For PCRE we have set of macros you can set in C_USR
>> envvar before building Harbour to reach such effect, f.e. - 
>> DHB_POSIX_REGEX
>> We can use:
>>   HB_POSIX_REGEX - use POSIX regex instead of PCRE, it should work
>>                    on all POSIX systems (f.e. in *nixes)
>>   HB_PCRE_REGEX  - use platform native PCRE library
>>   HB_PCRE_REGEX_BCC - use old PCRE library build into BCC CRTL
>> when non of the above is set then our own copy of PCRE is used.
>
> In such a case, I think it would be better to create a separate
> library for PCRE. This way it would be easier to switch library
> during linking time.
>
> Any opinions ?
>
> -- 
>
> Marek
>
> ----------------------------------------------------------------------
> Mamy nagrody dla Ciebie!
> Kliknij >>>  http://link.interia.pl/f1cf5
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour at rglab.pl  Mon Feb 11 19:50:20 2008
From: harbour at rglab.pl (=?iso-8859-2?Q?Ryszard_G=B3=B1b?=)
Date: Mon Feb 11 19:50:18 2008
Subject: [Harbour] Collectible pointers
References: <47A3A1E5.7010009@dbtopas.lt>
	<20080202125724.GB5637@localhost.localdomain>
	<47A48235.7020505@dbtopas.lt>
	<20080211135122.GA8006@localhost.localdomain>
Message-ID: <b4c2e573424c66ab3cf00c4ea4ea3a0c.qmail@home.pl>

Przemyslaw Czerpak <druzus@acn.waw.pl> napisa?(a):

> I think that it will greatly reduce possible mistakes and also your
> first example will work as you wanted. hb_gcLock()/hb_gcUnlock() are
> a little bit too low level for me if possible then they should be
> eliminated from 3-rd party API.
> 
> Opinions? Ryszard you are original author of hb_gc*() functions.
> What do you think about it.

  OK, hb_gcAlloc() can automatically lock the pointer however we
still have to have hb_gcUnlock() function to unlock it distinctly
after the assignment to the item stored inside the iternal VM 
storages (local stack, statics, etc). If the item will remain 
locked then it will be never released by the GC. Poiters 
cannot be indirectly unlocked during hb_itemPutPtrGC because
using the following code:

HB_ITEM item;
item.type = HB_IT_NIL;
hb_itemPutPtrGC( &item, hb_gcAlloc( size, someFunc ) );

will end with an item storing an unlocked pointer that will be
released prematurely by the GC.

  In summary, current code is safe if there is no call to 
hb_gcCollect() in initialization code (in other words: between 
hb_gcAlloc() and the assignment to an item known to the
GC). If you plan to run the GC in separate thread then for sure
hb_gcAlloc() should return locked pointer however the pointer
will have to be unlocked distinctly by the call to hb_gcUnlock()
after the asignment.

  I don't understand what you mean writing 'automatic GC call' 
then it is possible that we are talking aout different things but
currently I will leave gcLock/gcUnlock as they are.

> BTW I would like to also ask about real usage of marksweep function.
> I know what it does but is it still necessary for 3-rd party code
> with current GC? Can someone who uses it say what is its exact job
> in his code?

  I have added this functionality to use it in future sql rdd. I am still
at design phase but I plan to use a linked list of rows (or pages)
returned by the sql client. Every row will store the HB_ITEM structure. 
I don't want to use array because of reallocation problems. This linked
list will be stored probably in workarea structure. Thus I need some method
to prevent deallocation of values stored in this internal workarea space.

  Regards, Ryszard
From druzus at acn.waw.pl  Mon Feb 11 20:20:17 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Feb 11 20:20:32 2008
Subject: [Harbour] GC - Reference to Freed Memory Block - GPF
In-Reply-To: <20080211223305.9B2DFE7C2@smtp.tor.pathcom.com>
References: <15403015.post@talk.nabble.com>
	<20080211104331.GA6769@localhost.localdomain>
	<15419405.post@talk.nabble.com>
	<20080211213045.GA15743@localhost.localdomain>
	<20080211223305.9B2DFE7C2@smtp.tor.pathcom.com>
Message-ID: <20080212012017.GA16865@localhost.localdomain>

On Mon, 11 Feb 2008, Randy Portnoff wrote:
> Hi Przemek,
> I just took a look at (what I think is) the latest build on 
> SourceForge and I do not see that HB_GCALL takes any parameters - Are 
> you sure there is a difference between hb_gcAll(.t.) and hb_gcAll()?

In Harbour there is no difference at all. But xHarbour has a "feature"
which ignores hb_gcAll() without .t. as first parameter if difference
between active GC blocks between passes is less then 64. Because we
are looking for a bug and code can be also compiled by xHarbour then
such condition will only make the problem GC trap weaker and sometimes
not working at all so I intentionally used hb_gcAll(.t.) to force GC
pass in both compilers.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Feb 11 20:28:27 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Feb 11 20:28:33 2008
Subject: [Harbour] GC - Reference to Freed Memory Block - GPF
In-Reply-To: <47B0D4B5.3050006@dbtopas.lt>
References: <15403015.post@talk.nabble.com>
	<20080211104331.GA6769@localhost.localdomain>
	<15419405.post@talk.nabble.com>
	<20080211213045.GA15743@localhost.localdomain>
	<47B0D4B5.3050006@dbtopas.lt>
Message-ID: <20080212012826.GB16865@localhost.localdomain>

On Tue, 12 Feb 2008, Mindaugas Kavaliauskas wrote:
> I'm not sure we are talking about the same thing, but if memory are 
> dumped to fm.log files, I have a little proposition how to extend output 
> to help find memory leaks.

It was not the same thing though maybe address information will help
Pritpal to find which memory block has caused the error but not where
is the bug and which one were corrupted.

> After I've moved to Harbour I found several memory leaks in my code, 
> because Harbour compiles with HB_FM_STATISTICS by default. fm.log 
> contains Harbour level function name, but sometimes it's not enough to 
> find memory leak easy. For example, I had memory leak in ORDCREATE(), 
> but ORDCREATE RDD method is a complex function and I was unable to find 
> a bug. I've added one more member
>    void*  pAddr;
> to HB_MEMINFO structure, it's pointer to the caller address of 
> hb_xgrab(). Looking to the .map file, I found that memory leak comes 
> from hb_macroCompile(). It help to find a bug, the problem was that item 
> allocated by:
>   if( SELF_COMPILE( (AREAP) pArea, lpdbOrdCondInfo->abFor ) == SUCCESS )
>      pForItem = pArea->valResult;
> was released by:
>   hb_itemRelease( pForItem );
> My code for pMem->pAddr assignment in hb_xgrab() is:
>    pMem->pAddr = * ((void**)&ulSize - 1);
> here ulSize is parameter of hb_xgrab(). The problem is, that this 
> solution is not universal and depends on parameter passing convention, 
> etc. and should be guarded with #ifdefs, but this will work on all 16 
> and 32 bit systems with standard C stack frames (98% in our cases). So, 
> I think this extension could be useful.

Unfortunately this 98% is not true. Even in Windows some compilers
may use different calling convention, f.e. OpenWatcom which can support
different once. In *nixes the number of calling conventions is much
bigger. I have nothing against such feature but IMHO it should be
covered by __BLORLANDC__ macro and maybe later extended to other compilers
if the calling convention for given compiler and platform is well known.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Feb 11 21:12:54 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Feb 11 21:13:01 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <b4c2e573424c66ab3cf00c4ea4ea3a0c.qmail@home.pl>
References: <47A3A1E5.7010009@dbtopas.lt>
	<20080202125724.GB5637@localhost.localdomain>
	<47A48235.7020505@dbtopas.lt>
	<20080211135122.GA8006@localhost.localdomain>
	<b4c2e573424c66ab3cf00c4ea4ea3a0c.qmail@home.pl>
Message-ID: <20080212021254.GC16865@localhost.localdomain>

On Tue, 12 Feb 2008, Ryszard G??b wrote:
>   OK, hb_gcAlloc() can automatically lock the pointer however we
> still have to have hb_gcUnlock() function to unlock it distinctly
> after the assignment to the item stored inside the iternal VM 
> storages (local stack, statics, etc). If the item will remain 
> locked then it will be never released by the GC.

Yes of course. But hb_gcUnlock() will not have to be public API.
It can be covered by _HB_API_INTERNAL_ macro like hb_gcRefInc()
and similar functions.
And to be more precise I plan to add new function hb_gcAttach()
which will increase reference counter and unlock the GC block.

> Poiters cannot be indirectly unlocked during hb_itemPutPtrGC because
> using the following code:
> HB_ITEM item;
> item.type = HB_IT_NIL;
> hb_itemPutPtrGC( &item, hb_gcAlloc( size, someFunc ) );
> will end with an item storing an unlocked pointer that will be
> released prematurely by the GC.

1-st it's a code example I'm fighting to eliminate: code which creates
unknown for GC C level items. In last years I spent to much time helping
different people in locating bugs caused by such code.
2-nd in current GC it will not be release prematurely because
I added code which will detect such situation and will rise RT
error - exactly the same as Pritpal noticed recently and reported
here. This code was necessary to detect bugs in .prg destructors
and protect against internal memory corruption caused by such
wrong .prg destructors.

>   In summary, current code is safe if there is no call to 
> hb_gcCollect() in initialization code (in other words: between 
> hb_gcAlloc() and the assignment to an item known to the
> GC). If you plan to run the GC in separate thread then for sure
> hb_gcAlloc() should return locked pointer however the pointer
> will have to be unlocked distinctly by the call to hb_gcUnlock()
> after the asignment.
>   I don't understand what you mean writing 'automatic GC call' 
> then it is possible that we are talking aout different things but
> currently I will leave gcLock/gcUnlock as they are.

Automatic GC call means that it can be activated by any VM/RTL
function when some conditions will be passed, f.e. number of
GC blocks or total amount of allocated memory between GC passes
will reach some limit. It means that for sure hb_xgrab()/hb_gcAlloc()
can activate GC but maybe also some other places. I intentionally do
not want to document which exactly ones because I want to reserve such
decision for us for future updates.
The GC executed by separated thread it's also not a problem and it
can be implemented even without automatically locked hb_gcAlloc's
blocks. But ONLINE GC which can be executed without stopping other
threads and without mutex in time critical places in HVM code is
much more complicated thing. For sure I do not plan to introduce it
now. Maybe if it will be necessary in the future then I will think
about it but it will be necessary to change most of current GC code.

I want to reduce API functions which may cause internal errors
in different places when are used in wrong way. And hb_gcLock()/
hb_gcUnlock() are potentially such functions. Now I do not see any
code which may need it as long as it does not use some thicks like
unknown for GC HB_ITEMs.

> > BTW I would like to also ask about real usage of marksweep function.
> > I know what it does but is it still necessary for 3-rd party code
> > with current GC? Can someone who uses it say what is its exact job
> > in his code?
>   I have added this functionality to use it in future sql rdd. I am still
> at design phase but I plan to use a linked list of rows (or pages)
> returned by the sql client. Every row will store the HB_ITEM structure. 
> I don't want to use array because of reallocation problems. This linked
> list will be stored probably in workarea structure. Thus I need some method
> to prevent deallocation of values stored in this internal workarea space.

Array reallocation should not be a problem. Now we do not have any
preallocation code for arrays but it can be and for sure will be added
in the future. xHarbour already has such feature. it's few lines only.
You can even implement such feature yourself for SQL RDD by keeping
index to free raw in array in additional variable and multiple the
array size by 2 when the pointer reach limit. The cost of reallocation
will be n*log2(n)/2 where n is maximum array size - unimportant if
you compere it to cost of row creation. You can also keep raws in
items allocated by hb_itmeNew() and create list of such items though
here the cost will be bigger but you ill not need continuous memory
block. IMHO everything is better then touching item internals.

best regards,
Przemek
From mpaliwoda at interia.pl  Tue Feb 12 02:03:53 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Tue Feb 12 02:04:00 2008
Subject: [Harbour] 2008-02-12 08:04 UTC+0100 Marek Paliwoda (mpaliwoda at
	interia pl)
Message-ID: <forgck$im5$1@ger.gmane.org>

2008-02-12 08:04 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)
   * harbour/contrib/hbwhat32/make_gcc.sh
     ! Fixed compilation under MingW and Cygwin

   * harbour/contrib/make_b32_all.bat
   * harbour/contrib/make_vc_all.bat
     + Added hbwhat32 to a list of compiled contribs

   * harbour/contrib/make_gcc_all.sh
     - Removed hbzlib from a list of mandatory compiled contribs.
       It still can be compiled conditionaly.

-- 

   Marek Paliwoda
mpaliwoda@interia.pl

From dmacias at mail.udg.mx  Tue Feb 12 03:06:20 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Feb 12 03:06:10 2008
Subject: [Harbour] Re: 2008-02-04 09:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47B1537C.7070305@mail.udg.mx>

Viktor:

 >One of the reasons I removed these is to avoid
 >any confusion for Windows users, to decide which
 >batch file to run. I think it's very important to
 >have clear filenames and the least redundancy.

 >'.cmd' for a Windows user means a native batch
 >file, so this extension by itself, is _ambiguous_.
 >That's why we should include "os2" to clear that up.

You are right
Windows derived from OS/2 ( NT and upper ) retained .cmd as native batch 
file

Upload your suggested files:
- /make_gnu_os2.cmd (it will remain uglier, but useful)
- /bin/bld_os2.cmd

Brgds,
Viktor


From mpaliwoda at interia.pl  Tue Feb 12 03:43:31 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Tue Feb 12 03:43:45 2008
Subject: [Harbour] Re: What about stopping the release process?
In-Reply-To: <713E6981-1934-439C-A91A-7A694E00787D@syenar.hu>
References: <9257026e0802080748k201dc6bai5c0829e7ceca2fae@mail.gmail.com>	<200802082333.59785.philb@philb.us>	<9257026e0802082108y75d101e2qfabee87d34f34aaf@mail.gmail.com>	<47AD4A25.8080004@interia.pl>	<29EBEB77-B467-441F-B744-02533F0838BE@syenar.hu>	<47AD8390.70507@interia.pl>	<47AF1AB9.8090100@interia.pl>	<7D3470CC-6296-4A6D-8384-D949697319ED@syenar.hu>	<20080210203659.GA3490@localhost.localdomain>	<47B0785C.3060602@interia.pl>
	<713E6981-1934-439C-A91A-7A694E00787D@syenar.hu>
Message-ID: <form7i$37d$1@ger.gmane.org>

Sorry Viktor,

> Definitely.
> 
> I'd also vote to separate for full hbrdd/rdd*, otherwise
> we will end up having lots of different combinations with
> and without RDD, with and without MT, etc, and at the end
> we will have the same amount of libs as we have now, just
> the size will be be bigger.
> 
> To put it shortly: I'd only include "static" parts in
> harbour lib, and I'd create at max an MT and non-MT
> version of harbour.lib, the rest left in separate libs.
> 
> After all the concept of libs is to have things always
> used together packaged together and having every other
> things packaged together in separate files. I see no
> point in having 4 "unified" lib flavours (same confusion,
> slow to generate, consuming more space, bigger binary
> packages to distribute, etc)
> 
> It would help if MT/non-MT could be controlled at build
> time (as we've once started to discuss).
> 
> My 2 cents.

Because it seems the consensus is impossible to reach, I vote
for leaving the current status and to forget about one common
lib.

The only thing I'll try do, will be introducing "a hack"
to an alternating make system to allow me (and all others
interested in) creating a one library localy. But I'll try
to do that after a release.

-- 

Marek

From sscc at mweb.co.za  Tue Feb 12 04:11:42 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Feb 12 04:12:04 2008
Subject: [Harbour] dllcall.c
Message-ID: <47B162CE.5040000@mweb.co.za>

Hello all

Has anyone ported this file from Harbour?

The changes to the definition of PHB_DYNS in hbvmpub.h are beyond me 
to apply to the code.

Thanks
Alex
From devlist.harbour at gmail.com  Tue Feb 12 04:49:38 2008
From: devlist.harbour at gmail.com (Patrick Mast)
Date: Tue Feb 12 04:49:43 2008
Subject: [Harbour] Eof == .T. on Phantom record
Message-ID: <15c075f70802120149x3e9e75fbrdd34934a0a7c463@mail.gmail.com>

Hello Przemek,

Did you receive my private mail regarding "Eof == .T. on Phantom record"?
Thanks!

Patrick
From druzus at acn.waw.pl  Tue Feb 12 05:08:37 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Feb 12 05:08:42 2008
Subject: [Harbour] dllcall.c
In-Reply-To: <47B162CE.5040000@mweb.co.za>
References: <47B162CE.5040000@mweb.co.za>
Message-ID: <20080212100837.GA5341@localhost.localdomain>

On Tue, 12 Feb 2008, Alex Strickland wrote:
> Hello all
> Has anyone ported this file from Harbour?
> The changes to the definition of PHB_DYNS in hbvmpub.h are beyond me 
> to apply to the code.

Just simply use:
      hb_vmPushSymbol( pVALUE->pSymbol );
instead of:
      hb_vmPushDynSym( pVALUE );

Patch below. But after short look I can see serious bug in
this code in usage of hb_parcstruct() function. It returns
pointer to character item stored in hb_stackReturnItem().
But this function is called in a loop so if more then one
C structure will be passed then each next call will clear
previous hb_stackReturnItem() value.

best regards,
Przemek


--- /home/druzus/CVS/xharbour/xharbour/source/rtl/dllcall.c	2007-09-25 04:55:30.000000000 +0200
+++ dllcall.c	2008-02-12 11:00:04.000000000 +0100
@@ -66,6 +66,7 @@
 #define  WIN32_LEAN_AND_MEAN
 
 #include "hbapiitm.h"
+#include "hbapicls.h"
 
 #if defined( HB_OS_WIN_32 )
 
@@ -99,8 +100,6 @@
 
 HB_EXPORT char * hb_parcstruct( int iParam, ... )
 {
-   HB_THREAD_STUB_ANY
-
    HB_TRACE(HB_TR_DEBUG, ("hb_parcstruct(%d, ...)", iParam));
 
    if( pHB_CSTRUCTURE == NULL )
@@ -141,7 +140,7 @@
 
       if( strncmp( hb_objGetClsName( pItem ), "C Structure", 11 ) == 0 )
       {
-         hb_vmPushSymbol( pVALUE->pSymbol );
+         hb_vmPushDynSym( pVALUE );
          hb_vmPush( pItem );
          hb_vmSend(0);
 
@@ -150,7 +149,7 @@
             hb_itemRelease( pItem );
          }
 
-         return hb_stackReturnItem()->item.asString.value;
+         return hb_parc( -1 );
       }
    }
 
@@ -569,7 +568,7 @@
                case HB_IT_ARRAY             :
                   if( strncmp( hb_objGetClsName( hb_param(i, HB_IT_ANY ) ), "C Structure", 11 ) == 0 )
                   {
-                     hb_vmPushSymbol( pDEVALUE->pSymbol );
+                     hb_vmPushDynSym( pDEVALUE );
                      hb_vmPush( hb_param( i, HB_IT_ANY ) );
                      hb_vmSend(0);
 
From maurilio.longo at libero.it  Tue Feb 12 05:46:51 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Feb 12 05:47:02 2008
Subject: [Harbour] Re: [xHarbour-developers] log(0) fails on some pc?!?!
References: <47B07D55.8193FFCB@libero.it>
	<20080211174303.GA9143@localhost.localdomain>
Message-ID: <47B1791B.EF31D151@libero.it>

Przemyslaw,

thanks for the explanation, looking into math.c I was thinking it was already
handled, I'll look at it more carefully.

Best regards.

Maurilio.

Przemyslaw Czerpak ha scritto:
> 
> On Mon, 11 Feb 2008, Maurilio Longo wrote:
> > I've got a weird problem, this simple code
> > function main()
> >       ? log(0)
> > return nil
> > compiled with GCC on OS/2 runs ok on some PCs and fails with a SIGFPE on
> > others?!?!
> 
> On some systems calling math functions with wrong parameters generates
> SIGFPE errors. It depends on used OS, CRTL libraries and CPU.
> In such case it's necessary to add code to catch such
> signal and replace the result with the value return by Clipper in such
> situation.
> As workaround we can also add some additional code which will check
> if parameters passed to math functions are in valid range. See rtl/math.c
> how it works now.
> 
> best regards,
> Przemek

-- 
 __________                   
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.
From druzus at acn.waw.pl  Tue Feb 12 06:10:28 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Feb 12 06:10:33 2008
Subject: [Harbour] Eof == .T. on Phantom record
In-Reply-To: <15c075f70802120149x3e9e75fbrdd34934a0a7c463@mail.gmail.com>
References: <15c075f70802120149x3e9e75fbrdd34934a0a7c463@mail.gmail.com>
Message-ID: <20080212111028.GB5341@localhost.localdomain>

On Tue, 12 Feb 2008, Patrick Mast wrote:
> Hello Przemek,
> Did you receive my private mail regarding "Eof == .T. on Phantom record"?
> Thanks!

It's normal Clipper behavior replicated in [x]Harbour:
   proc main(rdd)
      rddSetDefault(iif(empty(rdd),"DBFCDX",rdd))
      ? rddSetDefault()
      dbCreate("_tst",{{"F1","C",1,0}})
      use _tst
      ? bof(), eof(), lastrec(), recno()
      dbSkip(-1)
      ? bof(), eof(), lastrec(), recno()
   return

In the above code we are at phantom record but after dbSkip(-1)
the EOF flag is cleared. In such way work all CL52, SIX3 and CL53
RDDs. Also [x]Harbuor's DBF, DBFCDX, DBFNTX. Only our ADS RDD
do not always respect it (f.e. in this example) and this is side
effect of code which hides top phantom record.
I said many times in the past that EOF() checking to detect
phantom record is not enough even in standard Clipper RDDs.
Additionally some RDDs may not support phantom records at
all or can have both: top and bottom ones, f.e. ADS has both
(see above) though we are hiding this in our code. I suggested
to introduce new function like isPahntomRec() to detect such
situation. Of course we can also change current code to not
be Clipper compatible. It will be enough to change the
condition which exists at the end of SKIP methods:

   /* Update Bof and Eof flags */
   if( fForward )
      pArea->fBof = FALSE;
   else
      pArea->fEof = FALSE;

and update only fBof flag but it may introduce some other problems
for code which strictly need Clipper compatibility though I do not
think if many people knows how exactly this flag are updated by Clipper.

best regards,
Przemek
From sscc at mweb.co.za  Tue Feb 12 06:41:45 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Feb 12 06:42:04 2008
Subject: [Harbour] dllcall.c
In-Reply-To: <20080212100837.GA5341@localhost.localdomain>
References: <47B162CE.5040000@mweb.co.za>
	<20080212100837.GA5341@localhost.localdomain>
Message-ID: <47B185F9.6000905@mweb.co.za>

Przemyslaw Czerpak wrote:
> On Tue, 12 Feb 2008, Alex Strickland wrote:
>> Hello all
>> Has anyone ported this file from Harbour?
>> The changes to the definition of PHB_DYNS in hbvmpub.h are beyond me 
>> to apply to the code.
> 
> Just simply use:
>       hb_vmPushSymbol( pVALUE->pSymbol );
> instead of:
>       hb_vmPushDynSym( pVALUE );
> 
> Patch below. But after short look I can see serious bug in
> this code in usage of hb_parcstruct() function. It returns
> pointer to character item stored in hb_stackReturnItem().
> But this function is called in a loop so if more then one
> C structure will be passed then each next call will clear
> previous hb_stackReturnItem() value.
> 
Thank you. I have in the mean time actually commented it all out in a 
local copy, it does not seem in the spirit of open source, but I am 
simply not capable of better.

There are actually quite a few problems with this code, iirc only 
integer returns from DLL functions work and there is a problem with 
allocating memory for strings. These I will try and fix or comment in 
the xharbour repository now that I am reminded, and I will include 
your comment.

Thanks again
Alex


From makis1970 at gmail.com  Tue Feb 12 07:02:57 2008
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Tue Feb 12 07:03:54 2008
Subject: [Harbour] Eof == .T. on Phantom record
In-Reply-To: <20080212111028.GB5341@localhost.localdomain>
References: <15c075f70802120149x3e9e75fbrdd34934a0a7c463@mail.gmail.com>
	<20080212111028.GB5341@localhost.localdomain>
Message-ID: <005201c86d6f$3612ac50$a23804f0$@com>

Przemek,
Of course you are right with this example but try to add a DBsetfilter( NIL,
".T." ) before dbskip(-1) (or any filter that produce a file without any
visible records and under (x)Harbour you get .T. .F. 0  1 and under clipper
5.3 you get .T. .T. 0 1

Thanks in advance
Mike Evans

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Tuesday, February 12, 2008 1:10 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Eof == .T. on Phantom record

On Tue, 12 Feb 2008, Patrick Mast wrote:
> Hello Przemek,
> Did you receive my private mail regarding "Eof == .T. on Phantom record"?
> Thanks!

It's normal Clipper behavior replicated in [x]Harbour:
   proc main(rdd)
      rddSetDefault(iif(empty(rdd),"DBFCDX",rdd))
      ? rddSetDefault()
      dbCreate("_tst",{{"F1","C",1,0}})
      use _tst
      ? bof(), eof(), lastrec(), recno()
      dbSkip(-1)
      ? bof(), eof(), lastrec(), recno()
   return

In the above code we are at phantom record but after dbSkip(-1)
the EOF flag is cleared. In such way work all CL52, SIX3 and CL53
RDDs. Also [x]Harbuor's DBF, DBFCDX, DBFNTX. Only our ADS RDD
do not always respect it (f.e. in this example) and this is side
effect of code which hides top phantom record.
I said many times in the past that EOF() checking to detect
phantom record is not enough even in standard Clipper RDDs.
Additionally some RDDs may not support phantom records at
all or can have both: top and bottom ones, f.e. ADS has both
(see above) though we are hiding this in our code. I suggested
to introduce new function like isPahntomRec() to detect such
situation. Of course we can also change current code to not
be Clipper compatible. It will be enough to change the
condition which exists at the end of SKIP methods:

   /* Update Bof and Eof flags */
   if( fForward )
      pArea->fBof = FALSE;
   else
      pArea->fEof = FALSE;

and update only fBof flag but it may introduce some other problems
for code which strictly need Clipper compatibility though I do not
think if many people knows how exactly this flag are updated by Clipper.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Tue Feb 12 07:07:19 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Feb 12 07:07:29 2008
Subject: [Harbour] Re: [xHarbour-developers] log(0) fails on some pc?!?!
In-Reply-To: <47B1791B.EF31D151@libero.it>
References: <47B07D55.8193FFCB@libero.it>
	<20080211174303.GA9143@localhost.localdomain>
	<47B1791B.EF31D151@libero.it>
Message-ID: <20080212120718.GA6247@localhost.localdomain>

On Tue, 12 Feb 2008, Maurilio Longo wrote:
> thanks for the explanation, looking into math.c I was thinking it was already
> handled, I'll look at it more carefully.

Try to add as workaround to LOG function before:
      hb_mathResetError( &hb_exc );
this code:
      if( dArg <= 0 )
      {
         hb_retndlen( -HUGE_VAL, -1, -1 );  /* return -infinity */
         return;
      }
But if you hardware generate SIGFPE on moth overflow which is
not caught by CRTL then probably similar problems may appear
in different places, f.e.:
      proc main()
         ? 1
         ? log(0)
         ? 2
         ? log(0)*2
         ? 3
      return

or in code like:

      proc main()
         local i, v
         for i:=v:=1 to 100000
            v*=2
         next
         ? v
      return

If they will not work for you then you will have to add code to
catch math exceptions. I do not know OS2. In *nixes you should
install your own signal handler for SIGFPE. Maybe GCC for OS2
gives the same API. You will have to check.

BTW. The second code should be tested by Windows users. AFAIR
BCC builds also does not catch exception. Can someone familiar
with Borland compilers check it and fix if possible.

best regards,
Przemek
From ptucker at sympatico.ca  Tue Feb 12 07:13:22 2008
From: ptucker at sympatico.ca (Paul Tucker)
Date: Tue Feb 12 07:13:22 2008
Subject: [Harbour] dllcall.c
References: <47B162CE.5040000@mweb.co.za>
	<20080212100837.GA5341@localhost.localdomain>
Message-ID: <BAYC1-PASMTP1033DFFF735E570DC10570DF2B0@CEZ.ICE>

Przemek,

Can you give a 3 line example of what you meen by loop in this case?

Maybe the cofee hasn't kicked in yet, but I don't know what you mean.

Paul
----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Tuesday, February 12, 2008 5:08 AM
Subject: Re: [Harbour] dllcall.c


> On Tue, 12 Feb 2008, Alex Strickland wrote:
>> Hello all
>> Has anyone ported this file from Harbour?
>> The changes to the definition of PHB_DYNS in hbvmpub.h are beyond me
>> to apply to the code.
>
> Just simply use:
>      hb_vmPushSymbol( pVALUE->pSymbol );
> instead of:
>      hb_vmPushDynSym( pVALUE );
>
> Patch below. But after short look I can see serious bug in
> this code in usage of hb_parcstruct() function. It returns
> pointer to character item stored in hb_stackReturnItem().
> But this function is called in a loop so if more then one
> C structure will be passed then each next call will clear
> previous hb_stackReturnItem() value.
>
> best regards,
> Przemek
>
>
> --- /home/druzus/CVS/xharbour/xharbour/source/rtl/dllcall.c 2007-09-25 
> 04:55:30.000000000 +0200
> +++ dllcall.c 2008-02-12 11:00:04.000000000 +0100
> @@ -66,6 +66,7 @@
> #define  WIN32_LEAN_AND_MEAN
>
> #include "hbapiitm.h"
> +#include "hbapicls.h"
>
> #if defined( HB_OS_WIN_32 )
>
> @@ -99,8 +100,6 @@
>
> HB_EXPORT char * hb_parcstruct( int iParam, ... )
> {
> -   HB_THREAD_STUB_ANY
> -
>    HB_TRACE(HB_TR_DEBUG, ("hb_parcstruct(%d, ...)", iParam));
>
>    if( pHB_CSTRUCTURE == NULL )
> @@ -141,7 +140,7 @@
>
>       if( strncmp( hb_objGetClsName( pItem ), "C Structure", 11 ) == 0 )
>       {
> -         hb_vmPushSymbol( pVALUE->pSymbol );
> +         hb_vmPushDynSym( pVALUE );
>          hb_vmPush( pItem );
>          hb_vmSend(0);
>
> @@ -150,7 +149,7 @@
>             hb_itemRelease( pItem );
>          }
>
> -         return hb_stackReturnItem()->item.asString.value;
> +         return hb_parc( -1 );
>       }
>    }
>
> @@ -569,7 +568,7 @@
>                case HB_IT_ARRAY             :
>                   if( strncmp( hb_objGetClsName( hb_param(i, 
> HB_IT_ANY ) ), "C Structure", 11 ) == 0 )
>                   {
> -                     hb_vmPushSymbol( pDEVALUE->pSymbol );
> +                     hb_vmPushDynSym( pDEVALUE );
>                      hb_vmPush( hb_param( i, HB_IT_ANY ) );
>                      hb_vmSend(0);

From devlist.harbour at gmail.com  Tue Feb 12 07:16:30 2008
From: devlist.harbour at gmail.com (Patrick Mast)
Date: Tue Feb 12 07:16:34 2008
Subject: [Harbour] Eof == .T. on Phantom record
In-Reply-To: <20080212111028.GB5341@localhost.localdomain>
References: <15c075f70802120149x3e9e75fbrdd34934a0a7c463@mail.gmail.com>
	<20080212111028.GB5341@localhost.localdomain>
Message-ID: <15c075f70802120416p695b7e73q45d716dd0218a11a@mail.gmail.com>

Przemek,

Thank you very much for your reply.

What is the others developer's idea on this?
Keep it strict Clipper compatible or change current EOF behaviour?

Patrick

On Feb 12, 2008 12:10 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:
>
> On Tue, 12 Feb 2008, Patrick Mast wrote:
> > Hello Przemek,
> > Did you receive my private mail regarding "Eof == .T. on Phantom record"?
> > Thanks!
>
> It's normal Clipper behavior replicated in [x]Harbour:
>    proc main(rdd)
>       rddSetDefault(iif(empty(rdd),"DBFCDX",rdd))
>       ? rddSetDefault()
>       dbCreate("_tst",{{"F1","C",1,0}})
>       use _tst
>       ? bof(), eof(), lastrec(), recno()
>       dbSkip(-1)
>       ? bof(), eof(), lastrec(), recno()
>    return
>
> In the above code we are at phantom record but after dbSkip(-1)
> the EOF flag is cleared. In such way work all CL52, SIX3 and CL53
> RDDs. Also [x]Harbuor's DBF, DBFCDX, DBFNTX. Only our ADS RDD
> do not always respect it (f.e. in this example) and this is side
> effect of code which hides top phantom record.
> I said many times in the past that EOF() checking to detect
> phantom record is not enough even in standard Clipper RDDs.
> Additionally some RDDs may not support phantom records at
> all or can have both: top and bottom ones, f.e. ADS has both
> (see above) though we are hiding this in our code. I suggested
> to introduce new function like isPahntomRec() to detect such
> situation. Of course we can also change current code to not
> be Clipper compatible. It will be enough to change the
> condition which exists at the end of SKIP methods:
>
>    /* Update Bof and Eof flags */
>    if( fForward )
>       pArea->fBof = FALSE;
>    else
>       pArea->fEof = FALSE;
>
> and update only fBof flag but it may introduce some other problems
> for code which strictly need Clipper compatibility though I do not
> think if many people knows how exactly this flag are updated by Clipper.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From e.m.giordano at emagsoftware.it  Tue Feb 12 07:50:01 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Feb 12 07:50:06 2008
Subject: [Harbour] Re: [xHarbour-developers] log(0) fails on some pc?!?!
References: <47B07D55.8193FFCB@libero.it><20080211174303.GA9143@localhost.localdomain><47B1791B.EF31D151@libero.it>
	<20080212120718.GA6247@localhost.localdomain>
Message-ID: <02c001c86d75$c7d8e220$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Maurilio Longo" <maurilio.longo@libero.it>
Cc: "Harbour Project Main Developer List." <harbour@harbour-project.org>; 
"Xharbour-Developers List" <xharbour-developers@lists.sourceforge.net>
Data invio: marted? 12 febbraio 2008 13.07
Oggetto: Re: [xHarbour-developers] log(0) fails on some pc?!?!

With BCC:

>      proc main()
>         ? 1
>         ? log(0)
>         ? 2
>         ? log(0)*2
>         ? 3
>      return

         1
***********************
         2
***********************
         3

>      proc main()
>         local i, v
>         for i:=v:=1 to 100000
>            v*=2
>         next
>         ? v
>      return

GPF

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at acn.waw.pl  Tue Feb 12 08:25:00 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Feb 12 08:25:06 2008
Subject: [Harbour] Eof == .T. on Phantom record
In-Reply-To: <005201c86d6f$3612ac50$a23804f0$@com>
References: <15c075f70802120149x3e9e75fbrdd34934a0a7c463@mail.gmail.com>
	<20080212111028.GB5341@localhost.localdomain>
	<005201c86d6f$3612ac50$a23804f0$@com>
Message-ID: <20080212132500.GA12258@localhost.localdomain>

On Tue, 12 Feb 2008, Mike Evans (Gmail) wrote:
> Of course you are right with this example but try to add a DBsetfilter( NIL,
> ".T." ) before dbskip(-1) (or any filter that produce a file without any
> visible records and under (x)Harbour you get .T. .F. 0  1 and under clipper
> 5.3 you get .T. .T. 0 1

No. It's not Clipper 5.3 RDD behavior. It's only side effect of
CLIPMORE filters which are in CL53 and enabled by default for
DBFCDX. Add SET OPTIMIZE OFF before SET FILTER and see what will
happen. Or use other filter like SET DELETE ON which is not redirected
to CLIPMORE code, f.e. add to the test I sent:
   DBAPPEND()
   DBDELETE()
   SET DELETE ON
   DBGOTO(0)
just after:
   USE _tst

The CLIPMORE behavior is an exception to standard Clipper one.
When I was working on RMDBFCDX/RMDBFNTX I decided to not replicate it.
IMHO it should be changed globally or not touched to not introduce
such differences.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Feb 12 08:33:53 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Feb 12 08:33:58 2008
Subject: [Harbour] dllcall.c
In-Reply-To: <BAYC1-PASMTP1033DFFF735E570DC10570DF2B0@CEZ.ICE>
References: <47B162CE.5040000@mweb.co.za>
	<20080212100837.GA5341@localhost.localdomain>
	<BAYC1-PASMTP1033DFFF735E570DC10570DF2B0@CEZ.ICE>
Message-ID: <20080212133353.GA12401@localhost.localdomain>

On Tue, 12 Feb 2008, Paul Tucker wrote:
> Przemek,
> Can you give a 3 line example of what you meen by loop in this case?
> Maybe the cofee hasn't kicked in yet, but I don't know what you mean.

hb_parcstruct() is called inside
      for( i = iFirst; i <= iParams; i++)
      {
         ...
         iCnt++;
      }
and it returns pointer to string item located in hb_stackReturnItem()
This pointer is stored in:
         Parm[iCnt].dwArg = (DWORD) hb_parcstruct( i );
When more then one C structure is passed then the next calls clears
previous value of hb_stackReturnItem() so the strings pointer assigned
before may point to just freed or reused memory.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Feb 12 08:38:37 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Feb 12 08:38:27 2008
Subject: [Harbour] Eof == .T. on Phantom record
In-Reply-To: <15c075f70802120416p695b7e73q45d716dd0218a11a@mail.gmail.com>
References: <15c075f70802120149x3e9e75fbrdd34934a0a7c463@mail.gmail.com>
	<20080212111028.GB5341@localhost.localdomain>
	<15c075f70802120416p695b7e73q45d716dd0218a11a@mail.gmail.com>
Message-ID: <A2B83C1C-9EF5-42A4-B8C4-7A2B2DD316CE@syenar.hu>

Hi all,

Strict compatibiliy. If we need an enhanced
Eof() function (or one that behaves differently), we
should introduce a separate function for it (hb_eof() f.e.).

Brgds,
Viktor

On 2008.02.12., at 13:16, Patrick Mast wrote:

> Przemek,
>
> Thank you very much for your reply.
>
> What is the others developer's idea on this?
> Keep it strict Clipper compatible or change current EOF behaviour?
>
> Patrick
>
> On Feb 12, 2008 12:10 PM, Przemyslaw Czerpak <druzus@acn.waw.pl>  
> wrote:
>>
>> On Tue, 12 Feb 2008, Patrick Mast wrote:
>>> Hello Przemek,
>>> Did you receive my private mail regarding "Eof == .T. on Phantom  
>>> record"?
>>> Thanks!
>>
>> It's normal Clipper behavior replicated in [x]Harbour:
>>   proc main(rdd)
>>      rddSetDefault(iif(empty(rdd),"DBFCDX",rdd))
>>      ? rddSetDefault()
>>      dbCreate("_tst",{{"F1","C",1,0}})
>>      use _tst
>>      ? bof(), eof(), lastrec(), recno()
>>      dbSkip(-1)
>>      ? bof(), eof(), lastrec(), recno()
>>   return
>>
>> In the above code we are at phantom record but after dbSkip(-1)
>> the EOF flag is cleared. In such way work all CL52, SIX3 and CL53
>> RDDs. Also [x]Harbuor's DBF, DBFCDX, DBFNTX. Only our ADS RDD
>> do not always respect it (f.e. in this example) and this is side
>> effect of code which hides top phantom record.
>> I said many times in the past that EOF() checking to detect
>> phantom record is not enough even in standard Clipper RDDs.
>> Additionally some RDDs may not support phantom records at
>> all or can have both: top and bottom ones, f.e. ADS has both
>> (see above) though we are hiding this in our code. I suggested
>> to introduce new function like isPahntomRec() to detect such
>> situation. Of course we can also change current code to not
>> be Clipper compatible. It will be enough to change the
>> condition which exists at the end of SKIP methods:
>>
>>   /* Update Bof and Eof flags */
>>   if( fForward )
>>      pArea->fBof = FALSE;
>>   else
>>      pArea->fEof = FALSE;
>>
>> and update only fBof flag but it may introduce some other problems
>> for code which strictly need Clipper compatibility though I do not
>> think if many people knows how exactly this flag are updated by  
>> Clipper.
>>
>> best regards,
>> Przemek
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Tue Feb 12 08:46:44 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Feb 12 08:46:51 2008
Subject: [Harbour] Eof == .T. on Phantom record
In-Reply-To: <15c075f70802120416p695b7e73q45d716dd0218a11a@mail.gmail.com>
References: <15c075f70802120149x3e9e75fbrdd34934a0a7c463@mail.gmail.com><20080212111028.GB5341@localhost.localdomain>
	<15c075f70802120416p695b7e73q45d716dd0218a11a@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815E971@SRV02.deltain.net>

My choice is Clipper Compatible with a way of detect incompatibility if
is not possible remove incompatibility (adsrdd can't be changed?)
Or detect via set How works
    If isPahntomRec() 
      Set PhantomRec on 
  ..



-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Patrick Mast
Sent: Tuesday, February 12, 2008 1:17 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Eof == .T. on Phantom record

Przemek,

Thank you very much for your reply.

What is the others developer's idea on this?
Keep it strict Clipper compatible or change current EOF behaviour?

Patrick

On Feb 12, 2008 12:10 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:
>
> On Tue, 12 Feb 2008, Patrick Mast wrote:
> > Hello Przemek,
> > Did you receive my private mail regarding "Eof == .T. on Phantom
record"?
> > Thanks!
>
> It's normal Clipper behavior replicated in [x]Harbour:
>    proc main(rdd)
>       rddSetDefault(iif(empty(rdd),"DBFCDX",rdd))
>       ? rddSetDefault()
>       dbCreate("_tst",{{"F1","C",1,0}})
>       use _tst
>       ? bof(), eof(), lastrec(), recno()
>       dbSkip(-1)
>       ? bof(), eof(), lastrec(), recno()
>    return
>
> In the above code we are at phantom record but after dbSkip(-1)
> the EOF flag is cleared. In such way work all CL52, SIX3 and CL53
> RDDs. Also [x]Harbuor's DBF, DBFCDX, DBFNTX. Only our ADS RDD
> do not always respect it (f.e. in this example) and this is side
> effect of code which hides top phantom record.
> I said many times in the past that EOF() checking to detect
> phantom record is not enough even in standard Clipper RDDs.
> Additionally some RDDs may not support phantom records at
> all or can have both: top and bottom ones, f.e. ADS has both
> (see above) though we are hiding this in our code. I suggested
> to introduce new function like isPahntomRec() to detect such
> situation. Of course we can also change current code to not
> be Clipper compatible. It will be enough to change the
> condition which exists at the end of SKIP methods:
>
>    /* Update Bof and Eof flags */
>    if( fForward )
>       pArea->fBof = FALSE;
>    else
>       pArea->fEof = FALSE;
>
> and update only fBof flag but it may introduce some other problems
> for code which strictly need Clipper compatibility though I do not
> think if many people knows how exactly this flag are updated by
Clipper.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From rglab at przesiew.imid.med.pl  Tue Feb 12 09:28:39 2008
From: rglab at przesiew.imid.med.pl (Ryszard Glab)
Date: Tue Feb 12 09:16:00 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <20080212021254.GC16865@localhost.localdomain>
References: <47A3A1E5.7010009@dbtopas.lt>,
	<b4c2e573424c66ab3cf00c4ea4ea3a0c.qmail@home.pl>,
	<20080212021254.GC16865@localhost.localdomain>
Message-ID: <47B1BB27.6315.9A72B2@rglab.przesiew.imid.med.pl>

On 12 Feb 2008 at 3:12, Przemyslaw Czerpak wrote:

> I want to reduce API functions which may cause internal errors
> in different places when are used in wrong way. And hb_gcLock()/
> hb_gcUnlock() are potentially such functions. Now I do not see any
> code which may need it as long as it does not use some thicks like
> unknown for GC HB_ITEMs.

  OK, I can agree on such restictions however we will have to 
document
that the pointer allocated with hb_gcAlloc() have to be attached 
using
hb_gcAttach() function to some item - the item have to be allocated 
using hb_itemNew(). 
  Or alternatively we can use gcAlloc/gcAttach internally in VM/RTL 
but 
3-rd party code will have to use a wrapper called for example
hb_itemNewGCPtr( size, destructor )
that will replace hb_itemPutPtrGC()

> Array reallocation should not be a problem. Now we do not have any
> preallocation code for arrays but it can be and for sure will be added
> in the future. xHarbour already has such feature. it's few lines only.
> You can even implement such feature yourself for SQL RDD by keeping
> index to free raw in array in additional variable and multiple the
> array size by 2 when the pointer reach limit. The cost of reallocation
> will be n*log2(n)/2 where n is maximum array size - unimportant if
> you compere it to cost of row creation. You can also keep raws in
> items allocated by hb_itmeNew() and create list of such items though
> here the cost will be bigger but you ill not need continuous memory
> block. IMHO everything is better then touching item internals.

  OK, you can remove it, I can just use an array of arrays of rows 
which probably will be a good compromise between the GC and the 
performance.

Regards, Ryszard
From druzus at acn.waw.pl  Tue Feb 12 10:04:40 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Feb 12 10:04:46 2008
Subject: [Harbour] Eof == .T. on Phantom record
In-Reply-To: <A2B83C1C-9EF5-42A4-B8C4-7A2B2DD316CE@syenar.hu>
References: <15c075f70802120149x3e9e75fbrdd34934a0a7c463@mail.gmail.com>
	<20080212111028.GB5341@localhost.localdomain>
	<15c075f70802120416p695b7e73q45d716dd0218a11a@mail.gmail.com>
	<A2B83C1C-9EF5-42A4-B8C4-7A2B2DD316CE@syenar.hu>
Message-ID: <20080212150440.GA12645@localhost.localdomain>

On Tue, 12 Feb 2008, Szak?ts Viktor wrote:
> Hi all,
> Strict compatibiliy. If we need an enhanced
> Eof() function (or one that behaves differently), we
> should introduce a separate function for it (hb_eof() f.e.).

It should not have EOF in the name. As I said some future RDDs
may support two (both and bottom) phantom records and such function
name will confuse users.

best regards,
Przemek
From mbelgrano at deltain.it  Tue Feb 12 10:13:16 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Feb 12 10:13:23 2008
Subject: [Harbour] Searching a Image system sdk for harbour
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815E973@SRV02.deltain.net>

Wich way for views ,modify , print image (jpg o pdf) from a web page?


Massimo Belgrano


From dbtopas at dbtopas.lt  Tue Feb 12 10:40:52 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Feb 12 10:39:35 2008
Subject: [Harbour] Re: [xHarbour-developers] log(0) fails on some pc?!?!
In-Reply-To: <20080212120718.GA6247@localhost.localdomain>
References: <47B07D55.8193FFCB@libero.it>	<20080211174303.GA9143@localhost.localdomain>	<47B1791B.EF31D151@libero.it>
	<20080212120718.GA6247@localhost.localdomain>
Message-ID: <47B1BE04.70308@dbtopas.lt>

Przemyslaw Czerpak wrote:
> But if you hardware generate SIGFPE on moth overflow which is
> not caught by CRTL then probably similar problems may appear
> in different places, f.e.:

>       proc main()
>          local i, v
>          for i:=v:=1 to 100000
>             v*=2
>          next
>          ? v
>       return
> 
> ...
> 
> BTW. The second code should be tested by Windows users. AFAIR
> BCC builds also does not catch exception. Can someone familiar
> with Borland compilers check it and fix if possible.

Hi,


the code above GPF. I haven't yet looked to harbour/rtl/math.c code, but 
I see listing of BCC runtime library has several modules with names 
*mather[r]* and exports function _set_matherr_handler(). I can not find 
a good BCC math error handling example on the net, but I've found pretty 
good(!!!) docs on: http://poli.cs.vsb.cz/c/help/allbcpp.htm
Math error handling related info could be found on: 
http://poli.cs.vsb.cz/c/help/math0.htm#LBL54


Best regards,
Mindaugas
From dbtopas at dbtopas.lt  Tue Feb 12 12:02:54 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Feb 12 12:01:39 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <20080211135122.GA8006@localhost.localdomain>
References: <47A3A1E5.7010009@dbtopas.lt>	<20080202125724.GB5637@localhost.localdomain>	<47A48235.7020505@dbtopas.lt>
	<20080211135122.GA8006@localhost.localdomain>
Message-ID: <47B1D13E.4010305@dbtopas.lt>

Hi,


> No. In fact it's minor modification. It will be enough to initialize
> referece counter with 0 and add hb_xRefInc() in hb_itemPut*() functions.
> But this modifications should be bound with yet another one (see below).

I was thinking about it, but I didn't know that GC pointers can be 
locked, to avoid freeing it between hb_gcAlloc() and hb_itemPut*().

BTW, you've wrote "hb_itemPut*()". Do you mean the same modification for 
  hb_itemPutCPtr()? It seems, the same approach will also work. We just 
do not need locking, because FM memory is not collected by GC.


> And hb_gcAlloc() is sth what should be modified yet. This function
> returns pointer which is not locked (hb_gcLock()/hb_gcUnlock()) and
> can be freed by GC if we do not lock it or attach to GC known item.
> When we add automatic GC call then it may be a problem for some 3-rd
> party code. 

I think returning of locked GC pointer is very important in real 
multitasking enviroment. Otherwise pointer could be released even if 
code is:
     ptr = hb_gcLock( hb_gcAlloc( ptr ) );


> If you look at core code then you will find that I
> intentionally changed the order of allocating data for arrays, hashes,
> codeblocks and some collectible pointer items to eliminate potentially
> danger situations. I know how it should be done and it was easy for me.
> But it may be serious problem for 3-rd party code developers who do
> not know details of our HVM and GC and when/where it can be automatically
> activated in the future. ...
> IMHO hb_gcLock() should return LOCKED pointer and hb_itemPutPtrGC() should
> unlock it automatically and increase reference counter (modification above).
> 
> In such case the same code will look like:
> 
>       ptr = hb_gcAlloc( ptr );
>       <initialization code>
>       hb_itemPutPtrGC( ptr, destructorFunc );
> 
> I think that it will greatly reduce possible mistakes and also your
> first example will work as you wanted. hb_gcLock()/hb_gcUnlock() are
> a little bit too low level for me if possible then they should be
> eliminated from 3-rd party API.
> 
> Opinions? Ryszard you are original author of hb_gc*() functions.
> What do you think about it.

Yes, I think it's a good idea. We do not have many problem with GC in 
3rd party software, because nobody are using collectible pointers yet, 
but it can be a problem later. So, it's good chance to avoid it from the 
beginning.



Best regards,
Mindaugas


From mpaliwoda at interia.pl  Tue Feb 12 13:29:33 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Tue Feb 12 13:29:55 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <47B1D13E.4010305@dbtopas.lt>
References: <47A3A1E5.7010009@dbtopas.lt>	<20080202125724.GB5637@localhost.localdomain>	<47A48235.7020505@dbtopas.lt>	<20080211135122.GA8006@localhost.localdomain>
	<47B1D13E.4010305@dbtopas.lt>
Message-ID: <47B1E58D.7060201@interia.pl>

Mindaugas,

> Yes, I think it's a good idea. We do not have many problem with GC in 
> 3rd party software, because nobody are using collectible pointers yet, 

Do you mean 3rd party software available publicly, or 3rd party software
used privately ? In the latter case it's not true, because I have been
using this feature for a long long time.

-- 

Marek


Pogoda na najblizsze dni.
Sprawdz >>> http://link.interia.pl/f1ce1

From dbtopas at dbtopas.lt  Tue Feb 12 14:43:43 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Feb 12 14:43:47 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <47B1E58D.7060201@interia.pl>
References: <47A3A1E5.7010009@dbtopas.lt>	<20080202125724.GB5637@localhost.localdomain>	<47A48235.7020505@dbtopas.lt>	<20080211135122.GA8006@localhost.localdomain>	<47B1D13E.4010305@dbtopas.lt>
	<47B1E58D.7060201@interia.pl>
Message-ID: <47B1F6EF.4060804@dbtopas.lt>

Marek Paliwoda wrote:
>> Yes, I think it's a good idea. We do not have many problem with GC in 
>> 3rd party software, because nobody are using collectible pointers yet, 
> 
> Do you mean 3rd party software available publicly, or 3rd party software
> used privately ? In the latter case it's not true, because I have been
> using this feature for a long long time.

Hi,


according to your email, I mean 3rd party software available publicly :)


Best regards,
Mindaugas

From bedipritpal at hotmail.com  Tue Feb 12 15:19:14 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Feb 12 15:19:21 2008
Subject: [Harbour] GC - Reference to Freed Memory Block - GPF
In-Reply-To: <20080212012826.GB16865@localhost.localdomain>
References: <15403015.post@talk.nabble.com>
	<20080211104331.GA6769@localhost.localdomain>
	<15419405.post@talk.nabble.com>
	<20080211213045.GA15743@localhost.localdomain>
	<47B0D4B5.3050006@dbtopas.lt>
	<20080212012826.GB16865@localhost.localdomain>
Message-ID: <15441969.post@talk.nabble.com>


Hello

This observation pertains to non-freeing of mem blocks.

While investigating deep I found yet another surprise ( or I am
underinformed ) or it is supposed to behave the same way as is happening.

You need to link the sample below with FreeWin.lib as it was quick to use
that engine to create a modeless window having its own event management but
invoked off a GTWVT application.

Function Main()
   Local nSel
   Local aSel := { 'Execute Modeless Window', 'Exit' }

   SetColor( 'N/W' )
   CLS

   do while .t.
       nSel := AChoice( 10,30,15,60, aSel )
       if nSel == 0
          Exit
       endif
       ExecModelessWindow()
   enddo

   Return nil

Function ExecModelessWindow()
   Local oWnd

   oWnd := CWindow():New()
   oWnd:ShowWindow()

   Return NIL

Try to execute few window one after the other as control returns back to do
while loop. Everything will go normal. Close all windows and exit the
application. Check FM.LOG. It will have an array of unfreed memory blocks.
Also inspect the task manager with opening of each window. Memory goes on
increasing and never decreases.  Instead of FreeWin.lib you can test it with
your own library, the only condition is that application be a GTWVT ot GTWVG
linked one and window be invoked from within this executable.

Yet more ineteresting: Just open one window and move the mouse over it and
over application window for some time and check the fm.log. You will find a
long list of entry like:

Block 469 001EDB50 (size 40) INKEY(0),
"B0C21D00C0DA1E00184143000100000002000000000000000A000000820000000000000000000000"

My point is, is there any way to release memory occupied like this? Note
that <Local oWnd> get out of reference once <Return NIL> is encountered but
the code assigned to oWnd via CWindow() class keeps on working without any
errors.

Regards
Pritpal Bedi, INDIA-USA

-- 
View this message in context: http://www.nabble.com/GC---Reference-to-Freed-Memory-Block---GPF-tp15403015p15441969.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From rodrmigu at gmail.com  Tue Feb 12 16:13:20 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Tue Feb 12 16:13:25 2008
Subject: [Harbour] GC - Reference to Freed Memory Block - GPF
In-Reply-To: <15441969.post@talk.nabble.com>
References: <15403015.post@talk.nabble.com>
	<20080211104331.GA6769@localhost.localdomain>
	<15419405.post@talk.nabble.com>
	<20080211213045.GA15743@localhost.localdomain>
	<47B0D4B5.3050006@dbtopas.lt>
	<20080212012826.GB16865@localhost.localdomain>
	<15441969.post@talk.nabble.com>
Message-ID: <80b05d460802121313q72817d77j860343cfd6ac939c@mail.gmail.com>

Hi Pritpal,

I'm facing the same issue with xhgtk library, it's basically the same thing
except that I'm using with the Browse Class.

Here's the error message:

Error BASE/1301  Object Destructor Failure: Reference to freed block
BASE/1301  Object Destructor Failure: Reference to freed block

Total memory allocated: 557807 bytes (4590 block(s))
WARNING! Memory allocated but not released: 36 bytes (1 block(s))
fm.c:623: HB_TR_ERROR Block 1 (size 32) XHGTK_TREE_ITER_NEW(0), "08,8.900/8-
E.9000000000000000E00*91723)9-0.A.F000200000002000000"

Even removing the destructor clause and put the call to xhgtk_tree_iter to
the "destroy" event through the callbacks, I got this error above

Regards
Rodrigo Moreno

On Feb 12, 2008 6:19 PM, Pritpal Bedi <bedipritpal@hotmail.com> wrote:

>
> Hello
>
> This observation pertains to non-freeing of mem blocks.
>
> While investigating deep I found yet another surprise ( or I am
> underinformed ) or it is supposed to behave the same way as is happening.
>
> You need to link the sample below with FreeWin.lib as it was quick to use
> that engine to create a modeless window having its own event management
> but
> invoked off a GTWVT application.
>
> Function Main()
>   Local nSel
>   Local aSel := { 'Execute Modeless Window', 'Exit' }
>
>   SetColor( 'N/W' )
>   CLS
>
>   do while .t.
>       nSel := AChoice( 10,30,15,60, aSel )
>       if nSel == 0
>          Exit
>       endif
>       ExecModelessWindow()
>   enddo
>
>   Return nil
>
> Function ExecModelessWindow()
>   Local oWnd
>
>   oWnd := CWindow():New()
>   oWnd:ShowWindow()
>
>   Return NIL
>
> Try to execute few window one after the other as control returns back to
> do
> while loop. Everything will go normal. Close all windows and exit the
> application. Check FM.LOG. It will have an array of unfreed memory blocks.
> Also inspect the task manager with opening of each window. Memory goes on
> increasing and never decreases.  Instead of FreeWin.lib you can test it
> with
> your own library, the only condition is that application be a GTWVT ot
> GTWVG
> linked one and window be invoked from within this executable.
>
> Yet more ineteresting: Just open one window and move the mouse over it and
> over application window for some time and check the fm.log. You will find
> a
> long list of entry like:
>
> Block 469 001EDB50 (size 40) INKEY(0),
>
> "B0C21D00C0DA1E00184143000100000002000000000000000A000000820000000000000000000000"
>
> My point is, is there any way to release memory occupied like this? Note
> that <Local oWnd> get out of reference once <Return NIL> is encountered
> but
> the code assigned to oWnd via CWindow() class keeps on working without any
> errors.
>
> Regards
> Pritpal Bedi, INDIA-USA
>
> --
> View this message in context:
> http://www.nabble.com/GC---Reference-to-Freed-Memory-Block---GPF-tp15403015p15441969.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080212/c364dd18/attachment.html
From druzus at acn.waw.pl  Tue Feb 12 16:48:26 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Feb 12 16:48:38 2008
Subject: [Harbour] DIRECTORY() compatibility
In-Reply-To: <479A1D58.1090204@dbtopas.lt>
References: <4799FC2B.4000100@dbtopas.lt>
	<7C74355E-7949-4C4C-B08E-19F8DD7FCB7D@syenar.hu>
	<479A1D58.1090204@dbtopas.lt>
Message-ID: <20080212214826.GA12062@localhost.localdomain>

On Fri, 25 Jan 2008, Mindaugas Kavaliauskas wrote:
> >Seems to me this rather goes to down to platform behavior,
> >than being a bug in Harbour code itself. Harbour actually
> >passes down the file spec to the OS filefind call, unmodified.
> >Exact behavior for this case is also not described in detail
> >in the CA-Cl*pper NG.

It's not described but the workaround code is part of Clipper not
OS dependent behavior. We already have compatibility Clipper/DOS
code in DIRECTORY() function and hb_fsFind*() ones so IMHO adding
also support for this behavior should be done.

> I know that parameter of of Directory() is passed to system function 
> unmodified. And the question is a little delicate (not sure is the right 
> english word to express what I mean), that's why I wanted to say it on 
> mailing list before changing behavior on SVN.

No it isn't. Clipper modifies the parameters and ads wildcards if
last character of given path is '\' or ':'. It does not make it for
'/' and in such case the results are pure OS output - the same as
in our DIRECTORY() version.

You can test it pure OS output using this simple DIRECTORY() replacement
written with CT functions:

   FUNCTION MYDIR(cDir,xAttr)
      local aDir:={}, nAttr, cFile
      if valtype(xAttr)=="C"
         nAttr:=0
         if "D"$xAttr
            nAttr+=16
         endif
      endif
      cFile:=fileseek(cDir,nAttr)
      while !empty(cFile)
         aadd(aDir,aDir)
         cFile:=fileseek()
      enddo
   RETURN aDir

The results will be the same as from Harbour's DIRECTORY().
It means two things:
1. code which causes such effect is part of Clipper RTL not OS.
2. the xHarbour fix was done in wrong place because it effect
   all functions which uses hb_fsFind*() not only DIRECTORY()
   F.e. do not check what will happen if you will execute:
      FILEDELETE("C:\")

> I guess this behavior of clipper is from DOS int 21h system API, but one 
> of Harbour's purpose is to mask platform dependent behavior. Perhaps 
> this case is not an exception also. Norton guide and other documentation 
> never shows all possible behavior of the functions and we use tests to 
> be Clipper compatible.

It's not DOS behavior. See above.

> Since directory("c:\path","d") returns an array of 1 element, my friend 
> used directory("c:\path\","d") to get list of directory for years. He 
> did it in Clipper, and after that he successfully did it in xHarbour.
> I've looked to xHarbour's code, they have code to mask platform 
> dependent behavior:
>      if ( pFileName[iNameLen-1] == OS_PATH_DELIMITER )  //  '\\'
>      {
>         strcat(pFileName,"*.*") ; // 26/01/2004: Clipper compatibility
>      }

Yes, but it should be in DIRECTORY() function not here.

> >We may try to mask these platform differences in Harbour
> >code (controlled with some more SETs), but I'd rather suggest
> >to modify the call to be more platform independent. 
> I don't thing we need some set, we just need to a few lines like above 
> of code to mask platform dependent behavior.
> >(f.e.:
> >*.* won't return some stuff under Linux, which would be
> >returned under DOS/Windows)
> I've just finished my test on linux. I do not have Harbour under linux, 
> but I've tried to analyze opendir() system call. opendir("/path/") gives 
> listing of folder, so, I guess directory("/path/") will also (but it can 
> depend on our implementation). This made me a stronger feeling we must 
> hide platform dependent behavior under windows.
> So, if DOS and Linux version for directory(".../") gives file list and 
> the Clipper also, I found it to be enough reason to hide platform 
> behavior under windows by adding a few lines of code.
> BTW, "*" will work on both windows and Linux, but it's not the case, 
> because in linux we need to pass path only to opendir() function. File 
> mask filtering is done later by our code.

Yes and also different wildacrds are supported, f.e.:
   proc main()
      ? aeval(directory("harbour/source/rdd/[sd]*1.c"),{|x|qout(x[1])})
   return

results:
   dbf1.c
   sdf1.c
   delim1.c

and in this case we have real platform difference. Of course it can
be also hidden and this we can discuss but IMHO the previous problem
with DIECTORY() for sure should be fixed. I can commit fix in few
minutes.

best regards,
Przemek
From bedipritpal at hotmail.com  Tue Feb 12 17:24:55 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Feb 12 17:24:59 2008
Subject: [Harbour] GC - Reference to Freed Memory Block - GPF
In-Reply-To: <15403015.post@talk.nabble.com>
References: <15403015.post@talk.nabble.com>
Message-ID: <15444602.post@talk.nabble.com>


Hello All

In quest of finding the root of this bug, I tried to eliminate the addons
one-by-one. First step was to disable GTWVG specific GUI stuff. And the
error comes right after some actions just before I ask for first GET. Here
it is:


======================================================================
ErrorSaver: This runtime error loged on 12/02/08 at 14:04:05 hrs
User : SUPERVISOR
Application: Demo Manufacturing Organization
Operating system = Windows XP 5.1.2600 Service Pack 2, network = VOUCH32
Available diskspace = 80,731,156,480 in C:\creative.V05\CAC00001
PATH    = x???.m
COMSPEC = C:\WINDOWS\system32\cmd.exe
CLIPPER = f099
======================================================================
Traceback : Proc (Line)  Error Information
-----------------------  ---------------------------------------------
(b)BOOTUP (395)          arg count         0
INKEY (0)                args              <none>
BREADER (50)             canDefault        No 
(b)GETSOME (112)         canRetry          No 
HBGETLIST:READMODAL (21  canSubstitute     No 
READMODAL (98)           description       Object Destructor Failure
GETSOME (113)            filename          
LOGINUSER (87)           genCode           45
BOOTUP (401)             operation         Reference to freed block
MAIN (150)               osCode            0: n/a
                         severity          2
                         subcode           1301
                         subSystem         BASE
                         tries             0
                         -------------
                         Free memory   (0) 1136608
                         Largest Block (1) 1136608
                         Run Area      (2) 1136608
-----------------------  ---------------------------------------------

It is just a plain cVariable GET with standard @ nn,nn GET cVariable.

What I suspect is, somewhere in our CLASSES code ( though I am not sure )
something weired is happening. 

Before the above tests I ensured myself of any stupid errors by: 
1) Downloaded fresh Harbour tree after renaming old folder.
2) Building clean, Harbour, My Sources
3) Compiling without GUI calls

May it help you pinpointing the bug in my code.

Regards
Pritpal Bedi, INDIA-USA
-- 
View this message in context: http://www.nabble.com/GC---Reference-to-Freed-Memory-Block---GPF-tp15403015p15444602.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Tue Feb 12 18:16:42 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Feb 12 18:16:25 2008
Subject: [Harbour] Eof == .T. on Phantom record
In-Reply-To: <20080212150440.GA12645@localhost.localdomain>
References: <15c075f70802120149x3e9e75fbrdd34934a0a7c463@mail.gmail.com>
	<20080212111028.GB5341@localhost.localdomain>
	<15c075f70802120416p695b7e73q45d716dd0218a11a@mail.gmail.com>
	<A2B83C1C-9EF5-42A4-B8C4-7A2B2DD316CE@syenar.hu>
	<20080212150440.GA12645@localhost.localdomain>
Message-ID: <BFA84295-A97E-4A50-B114-9BD24B8C89E9@syenar.hu>

Yes, yes, hb_isphantom() or hb_phantom() would be better,
or else :)

Brgds.
Viktor

On 2008.02.12., at 16:04, Przemyslaw Czerpak wrote:

> On Tue, 12 Feb 2008, Szak?ts Viktor wrote:
>> Hi all,
>> Strict compatibiliy. If we need an enhanced
>> Eof() function (or one that behaves differently), we
>> should introduce a separate function for it (hb_eof() f.e.).
>
> It should not have EOF in the name. As I said some future RDDs
> may support two (both and bottom) phantom records and such function
> name will confuse users.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From bedipritpal at hotmail.com  Tue Feb 12 18:47:22 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Feb 12 18:47:25 2008
Subject: [Harbour] [xHarbour] REPLACE ... WITH ... : Weired Bug
Message-ID: <15446102.post@talk.nabble.com>


Hello Przemek

This message is asked in this group because I never received any
clarification from xHarbour DL even after posting it for 3 times. Sorry, but
it is urgent to be resolved as the large application of the organization I
am employed with getting worst day-by-day.  Again it is a "shifting" type of
bug.

The error info is like this:

|-------------|GFR|X0607210E83E|Ar_32_18.exe|02/01/08|09:42:23|Site:08|Loc:40|
Description   #14: Variable does not exist
Operation     PRPREMIUM
Alias()       ESTIMATE, 140636,  0, 
.
Called from:  CN                              3205
Called from:  PRE_REPLACE                     1580
Called from:  REPLACE_REC                     3762
Called from:  SAVE_RECORD                     4315
Called from:  ADD                             1316
Called from:  ARMENU:FNMENU_4                 1278
Called from:  ARMENU:DO_MENU                  1208
Called from:  ARMENU:CREATE                    423
Called from:  ARMAINMENU                       148
Called from:  MAIN_MENU                         98
Called from:  APPLICATION                      694
|-------------------------------------------------|

In the sources offending line is this:

         dbSelectArea( "estimate" )

         IF system('LOCK RECORD')         //  Just issues RLock()
            REPLACE prpremium  WITH 0   //  PPO:  _FIELD->prpremium := 0
            REPLACE prrate     WITH 0
            REPLACE prinsure   WITH ' '
            REPLACE crprinsura WITH 0
            REPLACE subdep     WITH '   '
            UNLOCK
         ENDIF

The workaround is :
         SELECT estimate
         IF system('LOCK RECORD') 
            Fieldput( nFieldNo, xValue )

            REPLACE prrate     WITH 0
            REPLACE prinsure   WITH ' '
            REPLACE crprinsura WITH 0
            REPLACE subdep     WITH '   '
            UNLOCK
         ENDIF

Fieldput() in place of REPLACE solves the issue. But then error shits to
next REPLACE. After replacing for function call in this IF/ENDIF block,
error shits its base. 

Because this application is so monester, it is hard to modify along these
lines, a very tedious job plus lack of readability is preventing the
management to go for this change. The error is so scattered and surfaces at
so many places.

I have almost finished of porting to Harbour but still due to some minor
issues, I am not been able to post the application on production servers.

Can you please guide me to locate what inside the compiler is causing this
error ?

Regards
Pritpal Bedi, INDIA-USA
-- 
View this message in context: http://www.nabble.com/-xHarbour--REPLACE-...-WITH-...-%3A-Weired-Bug-tp15446102p15446102.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From cvc at oohg.org  Tue Feb 12 18:52:32 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Tue Feb 12 18:52:35 2008
Subject: [Harbour] about gtwvg
Message-ID: <47B23140.30405@oohg.org>



Hi Pritpal:

I'm interesting in add submenus to mainmenu

it's posible?

if yes , may you give me an example?

my mainmenu is:

FUNCTION CreateMainMenu()
    LOCAL oMenu, g_oMenuBar := wvtMenu():new():create()

    oMenu := WvtMenu():new():create()
    oMenu:Caption:= "Primer menu"
    oMenu:AddItem( "subopcion uno-uno", {|| alert("uno uno") } )
    oMenu:AddItem( "subopcion uno-dos", {|| alert("uno dos") } )
    oMenu:AddItem( "-" )
    oMenu:AddItem( "Salir"      , {|| salir() } )
    g_oMenuBar:addItem( "",oMenu )

    oMenu := wvtMenu():new():create()
    oMenu:Caption := "Segundo menu"
    oMenu:AddItem( "subopcion dos-uno"     , {|| alert("dos uno")      } )
    oMenu:AddItem( "subopcion dos-dos"       , {|| alert("dos dos")      } )
    oMenu:AddItem( "-")
    oMenu:AddItem( "subopcion dos-tres"     , {|| alert("dos tres") } )
    g_oMenuBar:addItem( "",oMenu )

RETURN g_oMenuBar


best regards
Ciro

-- 
http://sistemascvc.tripod.com  (la casa del no2imp / the no2imp home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From bedipritpal at hotmail.com  Tue Feb 12 19:19:46 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Feb 12 19:19:50 2008
Subject: [Harbour] about gtwvg
In-Reply-To: <47B23140.30405@oohg.org>
References: <47B23140.30405@oohg.org>
Message-ID: <15446504.post@talk.nabble.com>


Hello

FUNCTION CreateMainMenu()
    LOCAL oMenu, g_oMenuBar := wvtMenu():new():create()
    LOCAL oSubMenu

    oMenu := WvtMenu():new():create()
    oMenu:Caption:= "Primer menu"
    oMenu:AddItem( "subopcion uno-uno", {|| alert("uno uno") } )
    oMenu:AddItem( "subopcion uno-dos", {|| alert("uno dos") } )
    oMenu:AddItem( "-" )
    oMenu:AddItem( "Salir"      , {|| salir() } )
    g_oMenuBar:addItem( "",oMenu )

    oSubMenu := WvtMenu():new():create()
    oMenu:Caption := "S Segundo menu"
    oMenu:AddItem( "S subopcion dos-uno"     , {|| alert("dos uno")      } )
    oMenu:AddItem( "S subopcion dos-dos"       , {|| alert("dos dos")      }
)
    oMenu:AddItem( "-")
    oMenu:AddItem( "S subopcion dos-tres"     , {|| alert("dos tres") } )

    oMenu := wvtMenu():new():create()
    oMenu:Caption := "Segundo menu"
    oMenu:AddItem( "subopcion dos-uno"     , {|| alert("dos uno")      } )
    oMenu:AddItem( "subopcion dos-dos"       , {|| alert("dos dos")      } )
    oMenu:AddItem( "-")
    oMenu:AddItem( "subopcion dos-tres"     , {|| alert("dos tres") } )
    oMenu:AddItem( "", oSubMenu )

    g_oMenuBar:addItem( "",oMenu )

RETURN g_oMenuBar

Regards
Pritpal Bedi, INDIA-USA
-- 
View this message in context: http://www.nabble.com/about-gtwvg-tp15446361p15446504.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Tue Feb 12 19:21:08 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Feb 12 19:21:11 2008
Subject: [Harbour] about gtwvg
In-Reply-To: <15446504.post@talk.nabble.com>
References: <47B23140.30405@oohg.org> <15446504.post@talk.nabble.com>
Message-ID: <15446518.post@talk.nabble.com>


Sorry

FUNCTION CreateMainMenu()
    LOCAL oMenu, g_oMenuBar := wvtMenu():new():create()
    LOCAL oSubMenu

    oMenu := WvtMenu():new():create()
    oMenu:Caption:= "Primer menu"
    oMenu:AddItem( "subopcion uno-uno", {|| alert("uno uno") } )
    oMenu:AddItem( "subopcion uno-dos", {|| alert("uno dos") } )
    oMenu:AddItem( "-" )
    oMenu:AddItem( "Salir"      , {|| salir() } )
    g_oMenuBar:addItem( "",oMenu )

    oSubMenu := WvtMenu():new():create()
    oSubMenu:Caption := "S Segundo menu"
    oSubMenu:AddItem( "S subopcion dos-uno"     , {|| alert("dos uno")     
} )
    oSubMenu:AddItem( "S subopcion dos-dos"       , {|| alert("dos dos")     
} )
    oSubMenu:AddItem( "-")
    oSubMenu:AddItem( "S subopcion dos-tres"     , {|| alert("dos tres") } )

    oMenu := wvtMenu():new():create()
    oMenu:Caption := "Segundo menu"
    oMenu:AddItem( "subopcion dos-uno"     , {|| alert("dos uno")      } )
    oMenu:AddItem( "subopcion dos-dos"       , {|| alert("dos dos")      } )
    oMenu:AddItem( "-")
    oMenu:AddItem( "subopcion dos-tres"     , {|| alert("dos tres") } )
    oMenu:AddItem( "", oSubMenu )

    g_oMenuBar:addItem( "",oMenu )

RETURN g_oMenuBar

Regards
Pritpal Bedi, INDIA-USA

-- 
View this message in context: http://www.nabble.com/about-gtwvg-tp15446361p15446518.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dbtopas at dbtopas.lt  Tue Feb 12 19:23:25 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Feb 12 19:23:30 2008
Subject: [Harbour] DIRECTORY() compatibility
In-Reply-To: <20080212214826.GA12062@localhost.localdomain>
References: <4799FC2B.4000100@dbtopas.lt>	<7C74355E-7949-4C4C-B08E-19F8DD7FCB7D@syenar.hu>	<479A1D58.1090204@dbtopas.lt>
	<20080212214826.GA12062@localhost.localdomain>
Message-ID: <47B2387D.8000402@dbtopas.lt>

Hi,


Przemyslaw Czerpak wrote:
>> I know that parameter of of Directory() is passed to system function 
>> unmodified. And the question is a little delicate (not sure is the right 
>> english word to express what I mean), that's why I wanted to say it on 
>> mailing list before changing behavior on SVN.
> 
> No it isn't. Clipper modifies the parameters and ads wildcards if
> last character of given path is '\' or ':'. It does not make it for
> '/' and in such case the results are pure OS output - the same as
> in our DIRECTORY() version.

Yes, I know. After long discussion with Victor, I've made a try to trace 
int 21h calls, and find out, if *.* is appended by Clipper, or is it DOS 
behavior. Because it would answer the main question: is it Clipper's 
behavior (need to be fixed in Harbour) or OS dependent (should not be 
fixed)?

So, later on 2008-01-28 16:23 I've wrote:

 > It's easy to tell: Clipper behaves the same, because this case is
 > managed by Clipper DIRECTORY() function. See, below.
 > ...
 > I've tested what strings are passed to DOS. The same results
 > in directory(".../") and directory(".../*.*") function calls
 > are obtained because Clipper adds *.* if last character is
 > path sepatator. So, it's not a question of platform behavior,
 > it's Clipper.

This was also approved by Saulius:

 > Exactly, if there is no <cDirSpec> parameter in call to DIRECTORY(),
 > or string is empty, or string ends with symbol ":" or "\",
 > Clipper adds "*.*"


> The results will be the same as from Harbour's DIRECTORY().
> It means two things:
> 1. code which causes such effect is part of Clipper RTL not OS.
> 2. the xHarbour fix was done in wrong place because it effect
>    all functions which uses hb_fsFind*() not only DIRECTORY()
>    F.e. do not check what will happen if you will execute:
>       FILEDELETE("C:\")
> 
> ... IMHO the previous problem
> with DIECTORY() for sure should be fixed. I can commit fix in few
> minutes.

I share your point of view. Please, fix it.


Thanks,
Mindaugas

From cvc at oohg.org  Tue Feb 12 20:05:09 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Tue Feb 12 20:05:20 2008
Subject: [Harbour] about gtwvg
In-Reply-To: <15446518.post@talk.nabble.com>
References: <47B23140.30405@oohg.org> <15446504.post@talk.nabble.com>
	<15446518.post@talk.nabble.com>
Message-ID: <47B24245.2070101@oohg.org>

Pritpal Bedi escribi?:
> Sorry

very thanks Pritpal !!!
works ok.

it's posible add a toolbar in the main screen without create another dialog.?

A little example if possible. two buttons is ok form me.

I apreciatte very much your help.

TIA
Ciro

http://sistemascvc.tripod.com  (la casa del no2imp / the no2imp home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From bedipritpal at hotmail.com  Tue Feb 12 20:50:03 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Feb 12 20:50:08 2008
Subject: [Harbour] about gtwvg
In-Reply-To: <47B23140.30405@oohg.org>
References: <47B23140.30405@oohg.org>
Message-ID: <15447581.post@talk.nabble.com>


Ciro

Just to let you know, this group is not to teach programming concepts, is a
compiler specific board. If you need programming help, which I am sure will
not be extended, you can always drop a personal mail.

Regards
Pritpal Bedi, INDIA-USA

-- 
View this message in context: http://www.nabble.com/about-gtwvg-tp15446361p15447581.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Tue Feb 12 21:30:56 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Feb 12 21:31:02 2008
Subject: [Harbour] GC - Reference to Freed Memory Block - GPF
In-Reply-To: <80b05d460802121313q72817d77j860343cfd6ac939c@mail.gmail.com>
References: <15403015.post@talk.nabble.com>
	<20080211104331.GA6769@localhost.localdomain>
	<15419405.post@talk.nabble.com>
	<20080211213045.GA15743@localhost.localdomain>
	<47B0D4B5.3050006@dbtopas.lt>
	<20080212012826.GB16865@localhost.localdomain>
	<15441969.post@talk.nabble.com>
	<80b05d460802121313q72817d77j860343cfd6ac939c@mail.gmail.com>
Message-ID: <20080213023056.GA5693@localhost.localdomain>

On Tue, 12 Feb 2008, Rodrigo Miguel wrote:
> Hi Pritpal,
> I'm facing the same issue with xhgtk library, it's basically the same thing
> except that I'm using with the Browse Class.
> Here's the error message:
> Error BASE/1301  Object Destructor Failure: Reference to freed block
> BASE/1301  Object Destructor Failure: Reference to freed block
> Total memory allocated: 557807 bytes (4590 block(s))
> WARNING! Memory allocated but not released: 36 bytes (1 block(s))
> fm.c:623: HB_TR_ERROR Block 1 (size 32) XHGTK_TREE_ITER_NEW(0), "08,8.900/8-
> E.9000000000000000E00*91723)9-0.A.F000200000002000000"
> Even removing the destructor clause and put the call to xhgtk_tree_iter to
> the "destroy" event through the callbacks, I got this error above

Yes it is. And it's a bug in XHGTK code. Here is self contain reduced
example:

      proc main()
         XHGTK_TREE_ITER_NEW()
      return
      #pragma begindump
      HB_FUNC( XHGTK_TREE_ITER_NEW )
      {
         void * treeiter = (void *) hb_gcAlloc(sizeof(void *), NULL);
         hb_retptr(treeiter);
      }
      #pragma enddump

It's a little bit modified to compile without GTK header files.
I do not know what this function should do but it's a bug in
Harbour and xHarbour though only Harbour can detected it and
report error. In xHarbour it will cause internal memory corruption
because this GC block is freed by garbage collector in first GC
pass after allocations and then this memory can be reused for
other things so if you will try to write sth to this block you
will corrupt some other data. All GC memory blocks have to be
attached to GC items or freed by hb_gcUnlock(). And before
attaching and freeing you cannot activate GC because it will
free the block immediately. It's a serious bug and have to
be fixed.

best regards,
Przemek
From cvc at oohg.org  Tue Feb 12 21:34:10 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Tue Feb 12 21:34:16 2008
Subject: [Harbour] about gtwvg
In-Reply-To: <15447581.post@talk.nabble.com>
References: <47B23140.30405@oohg.org> <15447581.post@talk.nabble.com>
Message-ID: <47B25722.90203@oohg.org>

Pritpal Bedi escribi?:
> Ciro
> 
> Just to let you know, this group is not to teach programming concepts, is a
> compiler specific board. If you need programming help, which I am sure will
> not be extended, you can always drop a personal mail.

Sorry but I think that the contributions are part of the project.

in a other hand vtwgui don't work with current version of harbour.
only with a older (x)harbour version.

And I'm not need programing concepts because I'm software developer (oohg 
developer) only I want learn about your contribution, but is this is a problem 
for you, I dont ask  again

thanks for your time.

Ciro



> 
> Regards
> Pritpal Bedi, INDIA-USA
> 


-- 
http://sistemascvc.tripod.com  (la casa del no2imp / the no2imp home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From harbour.01 at syenar.hu  Tue Feb 12 21:44:35 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Feb 12 21:44:12 2008
Subject: [Harbour] DIRECTORY() compatibility
In-Reply-To: <47B2387D.8000402@dbtopas.lt>
References: <4799FC2B.4000100@dbtopas.lt>	<7C74355E-7949-4C4C-B08E-19F8DD7FCB7D@syenar.hu>	<479A1D58.1090204@dbtopas.lt>
	<20080212214826.GA12062@localhost.localdomain>
	<47B2387D.8000402@dbtopas.lt>
Message-ID: <51B68466-1B62-4AD3-B18E-4DBEC1B989BE@syenar.hu>

Let's be compatible, but I maintain that CA-Cl*pper is
fundamentally wrong here.

It's a loss in functionality, plus it results in ambiguous
file/dir interpretation, so maybe some Harbour level file
find API would come handy for those who want to get file
listing/data in an unobstructed way. Or a SET(), if we
identify some other places where there is a similar problem.

(ADIR() is based on DIRECTORY() so it won't need extra care)

Brgds,
Viktor

On 2008.02.13., at 1:23, Mindaugas Kavaliauskas wrote:

> Hi,
>
>
> Przemyslaw Czerpak wrote:
>>> I know that parameter of of Directory() is passed to system  
>>> function unmodified. And the question is a little delicate (not  
>>> sure is the right english word to express what I mean), that's why  
>>> I wanted to say it on mailing list before changing behavior on SVN.
>> No it isn't. Clipper modifies the parameters and ads wildcards if
>> last character of given path is '\' or ':'. It does not make it for
>> '/' and in such case the results are pure OS output - the same as
>> in our DIRECTORY() version.
>
> Yes, I know. After long discussion with Victor, I've made a try to  
> trace int 21h calls, and find out, if *.* is appended by Clipper, or  
> is it DOS behavior. Because it would answer the main question: is it  
> Clipper's behavior (need to be fixed in Harbour) or OS dependent  
> (should not be fixed)?
>
> So, later on 2008-01-28 16:23 I've wrote:
>
> > It's easy to tell: Clipper behaves the same, because this case is
> > managed by Clipper DIRECTORY() function. See, below.
> > ...
> > I've tested what strings are passed to DOS. The same results
> > in directory(".../") and directory(".../*.*") function calls
> > are obtained because Clipper adds *.* if last character is
> > path sepatator. So, it's not a question of platform behavior,
> > it's Clipper.
>
> This was also approved by Saulius:
>
> > Exactly, if there is no <cDirSpec> parameter in call to DIRECTORY(),
> > or string is empty, or string ends with symbol ":" or "\",
> > Clipper adds "*.*"
>
>
>> The results will be the same as from Harbour's DIRECTORY().
>> It means two things:
>> 1. code which causes such effect is part of Clipper RTL not OS.
>> 2. the xHarbour fix was done in wrong place because it effect
>>   all functions which uses hb_fsFind*() not only DIRECTORY()
>>   F.e. do not check what will happen if you will execute:
>>      FILEDELETE("C:\")
>> ... IMHO the previous problem
>> with DIECTORY() for sure should be fixed. I can commit fix in few
>> minutes.
>
> I share your point of view. Please, fix it.
>
>
> Thanks,
> Mindaugas
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Tue Feb 12 21:48:44 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Feb 12 21:48:49 2008
Subject: [Harbour] [xHarbour] REPLACE ... WITH ... : Weired Bug
In-Reply-To: <15446102.post@talk.nabble.com>
References: <15446102.post@talk.nabble.com>
Message-ID: <20080213024844.GB5693@localhost.localdomain>

On Tue, 12 Feb 2008, Pritpal Bedi wrote:
> This message is asked in this group because I never received any
> clarification from xHarbour DL even after posting it for 3 times. Sorry, but
> it is urgent to be resolved as the large application of the organization I
> am employed with getting worst day-by-day.  Again it is a "shifting" type of
> bug.
> The error info is like this:
> |-------------|GFR|X0607210E83E|Ar_32_18.exe|02/01/08|09:42:23|Site:08|Loc:40|
> Description   #14: Variable does not exist
> Operation     PRPREMIUM
> Alias()       ESTIMATE, 140636,  0, 
> .
> Called from:  CN                              3205
> Called from:  PRE_REPLACE                     1580
> Called from:  REPLACE_REC                     3762
> Called from:  SAVE_RECORD                     4315
> Called from:  ADD                             1316
> Called from:  ARMENU:FNMENU_4                 1278
> Called from:  ARMENU:DO_MENU                  1208
> Called from:  ARMENU:CREATE                    423
> Called from:  ARMAINMENU                       148
> Called from:  MAIN_MENU                         98
> Called from:  APPLICATION                      694
> |-------------------------------------------------|
> In the sources offending line is this:
>          dbSelectArea( "estimate" )
>          IF system('LOCK RECORD')         //  Just issues RLock()
>             REPLACE prpremium  WITH 0   //  PPO:  _FIELD->prpremium := 0
>             REPLACE prrate     WITH 0
>             REPLACE prinsure   WITH ' '
>             REPLACE crprinsura WITH 0
>             REPLACE subdep     WITH '   '
>             UNLOCK
>          ENDIF
> The workaround is :
>          SELECT estimate
>          IF system('LOCK RECORD') 
>             Fieldput( nFieldNo, xValue )
>             REPLACE prrate     WITH 0
>             REPLACE prinsure   WITH ' '
>             REPLACE crprinsura WITH 0
>             REPLACE subdep     WITH '   '
>             UNLOCK
>          ENDIF
> Fieldput() in place of REPLACE solves the issue. But then error shits to
> next REPLACE. After replacing for function call in this IF/ENDIF block,
> error shits its base. 

Looks like dynamic symbol table corruption or sth wrong in
RDD you are using. I'm also not familiar with recent xHarbour
modifications so I cannot say if sth in core code was not
changed. Check what shows:

   ? fieldpos("prpremium"), "["+fieldname(nFieldNo)+"]"

before 1-st replace. Maybe it will help to locate more precisely
where is the problem.

Such problem can be result of some memory corruption. It's
possible that the same wrong code in Harbour causes the RT
error with destructor your reported. BTW do you use any
hb_gcAlloc() in your code?

> Because this application is so monester, it is hard to modify along these
> lines, a very tedious job plus lack of readability is preventing the
> management to go for this change. The error is so scattered and surfaces at
> so many places.
> I have almost finished of porting to Harbour but still due to some minor
> issues, I am not been able to post the application on production servers.
> Can you please guide me to locate what inside the compiler is causing this
> error ?

I'm afraid that I cannot give you any valuable information.
When Rodrigo reported that it has the problem in XHGTK code
I simply made:
   grep -r hb_gcAlloc *
in XHGTK CVS tree and I've found an answer 10 seconds later.
But it was explicit call to hb_gcAlloc() wrongly used. If your
problem is caused by some memory corruption in other places
then it could be any C code you have in your project.

best regards,
Przemek
From bedipritpal at hotmail.com  Tue Feb 12 23:08:43 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Feb 12 23:08:50 2008
Subject: [Harbour] about gtwvg
In-Reply-To: <47B25722.90203@oohg.org>
References: <47B23140.30405@oohg.org> <15447581.post@talk.nabble.com>
	<47B25722.90203@oohg.org>
Message-ID: <15448984.post@talk.nabble.com>


Ciro


Ciro Vargas Clemow wrote:
> 
> Sorry but I think that the contributions are part of the project.
> 
> in a other hand vtwgui don't work with current version of harbour.
> only with a older (x)harbour version.
> 
> And I'm not need programing concepts because I'm software developer (oohg 
> developer) only I want learn about your contribution, but is this is a
> problem 
> for you, I dont ask  again
> 
> thanks for your time.
> 

Nothing of such type, believe me. I was just thinking may be these type of
posts distracts their attention. Everybody here is a developer, and more
versatile than me. Anyhow, we can continue...

Regards
Pritpal Bedi, INDIA-USA
-- 
View this message in context: http://www.nabble.com/about-gtwvg-tp15446361p15448984.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Tue Feb 12 23:34:00 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Feb 12 23:34:02 2008
Subject: [Harbour] [xHarbour] REPLACE ... WITH ... : Weired Bug
In-Reply-To: <20080213024844.GB5693@localhost.localdomain>
References: <15446102.post@talk.nabble.com>
	<20080213024844.GB5693@localhost.localdomain>
Message-ID: <15449190.post@talk.nabble.com>


Thanks Przemek


Przemyslaw Czerpak-2 wrote:
> 
> Looks like dynamic symbol table corruption or sth wrong in
> RDD you are using. I'm also not familiar with recent xHarbour
> modifications so I cannot say if sth in core code was not
> changed. Check what shows:
> 
>    ? fieldpos("prpremium"), "["+fieldname(nFieldNo)+"]"
> 
> before 1-st replace. Maybe it will help to locate more precisely
> where is the problem.
> 

Ok, I will post this to production tomorrow. 
Probably it will return the correct answers because fieldput( nField,xValue
) works perfectly



> Such problem can be result of some memory corruption. It's
> possible that the same wrong code in Harbour causes the RT
> error with destructor your reported. BTW do you use any
> hb_gcAlloc() in your code?
> 

No occurance of hb_gcAlloc() call anywhere in this 300,000+ lines of code.



> I'm afraid that I cannot give you any valuable information.
> When Rodrigo reported that it has the problem in XHGTK code
> I simply made:
>    grep -r hb_gcAlloc *
> in XHGTK CVS tree and I've found an answer 10 seconds later.
> But it was explicit call to hb_gcAlloc() wrongly used. If your
> problem is caused by some memory corruption in other places
> then it could be any C code you have in your project.
> 

Yes, this application contains C code. As I am not the author of it,
developed over last 20 years or so, I feel handicap as to ascertain what
should I look deep into. Can you guide me which pairs I do match, like
hb_xgrab()/hb_xfree() or sth like.

Regards and thanks again.
Pritpal Bedi, INDIA-USA
-- 
View this message in context: http://www.nabble.com/-xHarbour--REPLACE-...-WITH-...-%3A-Weired-Bug-tp15446102p15449190.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Wed Feb 13 00:18:54 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Feb 13 00:18:57 2008
Subject: [Harbour] about gtwvg
In-Reply-To: <47B24245.2070101@oohg.org>
References: <47B23140.30405@oohg.org> <15446504.post@talk.nabble.com>
	<15446518.post@talk.nabble.com> <47B24245.2070101@oohg.org>
Message-ID: <15449810.post@talk.nabble.com>


Hello


Ciro Vargas Clemow wrote:
> 
> it's posible add a toolbar in the main screen without create another
> dialog.?
> 
> A little example if possible. two buttons is ok form me.
> 
> I apreciatte very much your help.
> 

Toolbar within another dialog is a part of the whole encapsulated in a
single inkey() loop. Probably demo shows a group of buttons at the bottom of
application screen. Just try it at the top and you will have it. To better
grasp its usability you can view 
http://www.vouchcac.com/ScreenShots/Wnd_Data.htm
The concept is the same as illustrated in sample code but implemented in a
bit different way.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/about-gtwvg-tp15446361p15449810.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From sscc at mweb.co.za  Wed Feb 13 02:40:50 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Wed Feb 13 02:40:57 2008
Subject: [Harbour] MSVC8 warning LNK4254
Message-ID: <47B29F02.60501@mweb.co.za>

Hi

When trying to compile with Harbour from CVS and MSVC 8 (2005) I get:

rddcdx.lib(dbfcdx1.obj) : warning LNK4254: section '.CRT' (40000040) 
merged into
  '.data' (C0000040) with different attributes

I know this is because of the :

    #define HB_MSC_STARTUP

which I have commented out, and I added

set HB_BUILD_MODE=cpp

However when compiling most of the contrib libraries I get (for example):

	..\..\bin\vc\\harbour.exe -i..\..\include -n -q0 -w2 -es2 -gc0 
-o..\..\obj\vc\\\ .\adordd.prg
	cl.exe -c -I..\..\include -Ot2b1 -EHs-c- -FD -Gs 
-D_CRT_SECURE_NO_DEPRECATE -W3 -nologo -D__WINDOWS__ -DWIN32 
-D__WIN32__    -Fo..\..\obj\vc\\\ ..\..\obj\vc\\\adordd.c
adordd.c
..\..\include\hbinit.h(218) : fatal error C1189: #error :  Unknown 
initialization method.

	..\..\bin\vc\\harbour.exe -i..\..\include -n -q0 -w2 -es2 -gc0 
-o..\..\obj\vc\\\ .\w32_tole.prg
	cl.exe -c -I..\..\include -Ot2b1 -EHs-c- -FD -Gs 
-D_CRT_SECURE_NO_DEPRECATE -W3 -nologo -D__WINDOWS__ -DWIN32 
-D__WIN32__    -Fo..\..\obj\vc\\\ ..\..\obj\vc\\\w32_tole.c
w32_tole.c
..\..\include\hbinit.h(218) : fatal error C1189: #error :  Unknown 
initialization method.

which is, I guess, the same issue. So most importantly for me I don't 
get hbtip.lib created.

If I ignore the link errors, my app works fine.

Can we make this MSVC version dependent (>= 7?) and does anyone know 
what should be done for the contribs?

Or, shouldn't we compile MSVC in C mode by default?

Thanks
Alex
From labitas at gmail.com  Wed Feb 13 03:30:59 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Wed Feb 13 03:31:04 2008
Subject: R: [Harbour] OLE Implementation - xHarbour Compatibility
In-Reply-To: <007701c86ccc$929fbf10$ca64fea9@emag>
References: <15392521.post@talk.nabble.com>
	<20080210131640.GA1101@localhost.localdomain>
	<AFB948164110ED43B5EB849E8DEEF03815E95F@SRV02.deltain.net>
	<2386af1b0802110314n29f5f6edh6140a9eaaca50541@mail.gmail.com>
	<20080211122856.GA7485@localhost.localdomain>
	<2386af1b0802110555v360ecd8gf6ea903476fb8170@mail.gmail.com>
	<007701c86ccc$929fbf10$ca64fea9@emag>
Message-ID: <2386af1b0802130030t5909f567xab55c4c3d7578a0f@mail.gmail.com>

Hello Enrico,

My tests with BCC 5.5 & 5.8 shows, that alignment switches
-a4 and -a8 have not any influence in xHarbour work.

IMHO Przemek is pointed to wrong direction and he cannot test
M$ branch, so can you do one more test with your example, maybe
with slightly supplement

  ? OS(), Version(), hb_builddate(), hb_compiler()
  ? ItemSize(), Memory(HB_MEM_STACK) / Memory(HB_MEM_STACKITEMS)
  ...

#pragma BEGINDUMP

HB_FUNC( ITEMSIZE )
{
   hb_retni( sizeof(HB_ITEM) );
}

#pragma ENDDUMP

Build task with minimal libs set required. I thought it must work
on your site.

Best regards,
Saulius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080213/58ac8ef7/attachment-0001.html
From ptucker at sympatico.ca  Wed Feb 13 04:39:41 2008
From: ptucker at sympatico.ca (Paul Tucker)
Date: Wed Feb 13 04:39:55 2008
Subject: [Harbour] MSVC8 warning LNK4254
References: <47B29F02.60501@mweb.co.za>
Message-ID: <BAYC1-PASMTP099B89DA6FCC92D4C52674DF240@CEZ.ICE>

Alex

> When trying to compile with Harbour from CVS and MSVC 8 (2005) I get:
>
> rddcdx.lib(dbfcdx1.obj) : warning LNK4254: section '.CRT' (40000040) 
> merged into
>  '.data' (C0000040) with different attributes
>

My plan for this was to put the strings into defines which could then be 
selected by version.  I don't know why MS insist on screwing with how this 
works.

It's possible the linker merge part is not strictly necessary, but if you 
want to experiment (for now) change

#pragma comment( linker, \"/Merge:.CRT=.data\" )\n
to
#pragma comment( linker, \"/Merge:.CRT=.rdata\" )\n

at 3 places in source/compiler/genc.c

This is not a permanent fix, and may cause msvc6 to complain (untested)

or comment out that line entirely anywhere you find it.

This will reduce the number of such warnings and I'll do a build with all of 
them changed and various msvc versions and make sure it still works.

Paul 

From e.m.giordano at emagsoftware.it  Wed Feb 13 05:17:09 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Feb 13 05:17:14 2008
Subject: R: [Harbour] OLE Implementation - xHarbour Compatibility
References: <15392521.post@talk.nabble.com><20080210131640.GA1101@localhost.localdomain><AFB948164110ED43B5EB849E8DEEF03815E95F@SRV02.deltain.net><2386af1b0802110314n29f5f6edh6140a9eaaca50541@mail.gmail.com><20080211122856.GA7485@localhost.localdomain><2386af1b0802110555v360ecd8gf6ea903476fb8170@mail.gmail.com><007701c86ccc$929fbf10$ca64fea9@emag>
	<2386af1b0802130030t5909f567xab55c4c3d7578a0f@mail.gmail.com>
Message-ID: <009e01c86e29$97b3b2f0$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Saulius Zrelskis" <labitas@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoled? 13 febbraio 2008 9.30
Oggetto: Re: R: [Harbour] OLE Implementation - xHarbour Compatibility


> Hello Enrico,
>
> My tests with BCC 5.5 & 5.8 shows, that alignment switches
> -a4 and -a8 have not any influence in xHarbour work.

Please read the old messages about this problem in this list.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From ptucker at sympatico.ca  Wed Feb 13 05:52:55 2008
From: ptucker at sympatico.ca (Paul Tucker)
Date: Wed Feb 13 05:53:03 2008
Subject: [Harbour] MSVC8 warning LNK4254
References: <47B29F02.60501@mweb.co.za>
Message-ID: <BAYC1-PASMTP119908560D4095C471E0E5DF240@CEZ.ICE>

All,

I've simplified the msc startup hook, but don't have time to impliment it 
right now.

#if defined(HB_PRAGMA_STARTUP)
   #pragma startup hb_codepage_Init_BGMIK
#elif defined(HB_MSC_STARTUP)
   #pragma data_seg( HB_MSC_START_SEGMENT )
   static HB_$INITSYM hb_vm_auto_hb_codepage_Init_BGMIK = 
hb_codepage_Init_BGMIK;
   #pragma data_seg()
#endif

this needs to be updated wherever you find it (corrected for each file)

modify include\hbinit.h

#elif defined(HB_MSC_STARTUP)

   typedef int (* HB_$INITSYM)( void );

   #if _MSC_VER >= 1010
      #define HB_MSC_START_SEGMENT ".CRT$XIY"
   #else
      #define HB_MSC_START_SEGMENT "XIY"
   #endif
...

And the 3 locations in genc.c


This should be done in xHarbour and harbour.

From M.Horodyski at pzuzycie.com.pl  Wed Feb 13 03:23:22 2008
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Wed Feb 13 05:57:34 2008
Subject: [Harbour] RE: Harbour Digest, Vol 16, Issue 38
In-Reply-To: <NLB02FEKHT0cWL0Wu330000399a@gatein.pzuzycie.com.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9577C488@PINK.zycie.pzu>

 
>Date: Tue, 12 Feb 2008 17:50:03 -0800 (PST)
>From: Pritpal Bedi <bedipritpal@hotmail.com>
>Subject: Re: [Harbour] about gtwvg
>To: harbour@harbour-project.org
>Message-ID: <15447581.post@talk.nabble.com>
>Content-Type: text/plain; charset=us-ascii
>
>
>Ciro
>
>Just to let you know, this group is not to teach programming 
>concepts, is a
>compiler specific board. If you need programming help, which I 
>am sure will
>not be extended, you can always drop a personal mail.
>
>Regards
>Pritpal Bedi, INDIA-USA

Pritpal,
Small prg example in tests catalog is much more useful/helpful.

Regards,
Marek Horodyski
From dbtopas at dbtopas.lt  Wed Feb 13 06:07:44 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Feb 13 06:07:48 2008
Subject: [Harbour] [xHarbour] REPLACE ... WITH ... : Weired Bug
In-Reply-To: <15446102.post@talk.nabble.com>
References: <15446102.post@talk.nabble.com>
Message-ID: <47B2CF80.4020609@dbtopas.lt>

Pritpal Bedi wrote:
> |-------------|GFR|X0607210E83E|Ar_32_18.exe|02/01/08|09:42:23|Site:08|Loc:40|
> Description   #14: Variable does not exist
> Operation     PRPREMIUM
> Alias()       ESTIMATE, 140636,  0, 
> ....
> 
>          IF system('LOCK RECORD')         //  Just issues RLock()
>             REPLACE prpremium  WITH 0   //  PPO:  _FIELD->prpremium := 0
>             REPLACE prrate     WITH 0
>             REPLACE prinsure   WITH ' '
>             REPLACE crprinsura WITH 0
>             REPLACE subdep     WITH '   '
>             UNLOCK
>          ENDIF
> 
> The workaround is :
>          SELECT estimate
>          IF system('LOCK RECORD') 
>             Fieldput( nFieldNo, xValue )
>          ENDIF
> 
> Fieldput() in place of REPLACE solves the issue. But then error shits to
> next REPLACE. After replacing for function call in this IF/ENDIF block,
> error shits its base. 

We had a little similar situation a week ago. Accessing field gives 
runtime error "Variable does not exist", but my error log files 
indicated (I print values of all fields of current workarea into log), 
what field exists in workarea.
The problem was corrupted .fpt file, but error message was misleading 
"Variable does not exist" instead of "corruption detected" or something 
like that.
Clip53 gives EG_READ for this invalid record. I've attached .zip 
containing sample .dbf and test code.


Best regards,
Mindaugas

P.S. one more strange situation from last week. It's possible to create 
database with duplicated fieldname. One of the fields can be accessed 
using alias->field, but another using FIELDGET/FIELDPUT only. I've 
tested creation of such .dbf file with Clipper. It also allows 
duplicated fields.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.zip
Type: application/x-zip-compressed
Size: 1408 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080213/3972a136/test.bin
From mpaliwoda at interia.pl  Wed Feb 13 06:28:27 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Feb 13 06:29:04 2008
Subject: [Harbour] Re: MSVC8 warning LNK4254
In-Reply-To: <47B29F02.60501@mweb.co.za>
References: <47B29F02.60501@mweb.co.za>
Message-ID: <fouk9j$obh$1@ger.gmane.org>

Hi Alex,

> When trying to compile with Harbour from CVS and MSVC 8 (2005) I get:
> 
> rddcdx.lib(dbfcdx1.obj) : warning LNK4254: section '.CRT' (40000040) 
> merged into
>  '.data' (C0000040) with different attributes

Microsoft discourages merging sections with different attributes
due to a serious security problems it may generate. For example
sections which are ReadOnly might become ReadWrite. This is generaly
considered a very bad practice and sooner or later MS will remove
this possibility (IMO).

> I know this is because of the :
> 
>    #define HB_MSC_STARTUP
> 
> which I have commented out, and I added
> 
> set HB_BUILD_MODE=cpp
> 
> However when compiling most of the contrib libraries I get (for example):
> 
>     ..\..\bin\vc\\harbour.exe -i..\..\include -n -q0 -w2 -es2 -gc0 
> -o..\..\obj\vc\\\ .\adordd.prg
>     cl.exe -c -I..\..\include -Ot2b1 -EHs-c- -FD -Gs 
> -D_CRT_SECURE_NO_DEPRECATE -W3 -nologo -D__WINDOWS__ -DWIN32 
> -D__WIN32__    -Fo..\..\obj\vc\\\ ..\..\obj\vc\\\adordd.c
> adordd.c
> ..\..\include\hbinit.h(218) : fatal error C1189: #error :  Unknown 
> initialization method.
> 
>     ..\..\bin\vc\\harbour.exe -i..\..\include -n -q0 -w2 -es2 -gc0 
> -o..\..\obj\vc\\\ .\w32_tole.prg
>     cl.exe -c -I..\..\include -Ot2b1 -EHs-c- -FD -Gs 
> -D_CRT_SECURE_NO_DEPRECATE -W3 -nologo -D__WINDOWS__ -DWIN32 
> -D__WIN32__    -Fo..\..\obj\vc\\\ ..\..\obj\vc\\\w32_tole.c
> w32_tole.c
> ..\..\include\hbinit.h(218) : fatal error C1189: #error :  Unknown 
> initialization method.
> 
> which is, I guess, the same issue. So most importantly for me I don't 
> get hbtip.lib created.
> 
> If I ignore the link errors, my app works fine.
> 
> Can we make this MSVC version dependent (>= 7?) and does anyone know 
> what should be done for the contribs?

Actualy contribs do not respect HB_BUILD_MODE which plain *bug*.
I'll try to fix it shortly.

> Or, shouldn't we compile MSVC in C mode by default?

*IMO* absolutly no. Please note "IMO". I am in an oposition to
other developers who force "C" mode due to ANSI compatibility,
but I think this is a wrong argument against lack of definition
of initialisation method "before main()" in "C" mode.

-- 

Marek

From harbour.01 at syenar.hu  Wed Feb 13 08:00:38 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Feb 13 08:00:16 2008
Subject: [Harbour] MS VS 2008 warnings
Message-ID: <57A6BAE3-C6FB-40D0-9717-833D9E698822@syenar.hu>

Hi all,

Some of them are known, but here they are:

source\compiler\genobj32.c(544) : warning C4244: '=' : conversion from  
'HB_SYMBOLSCOPE' to 'BYTE', possible loss of data
source\compiler\genhrb.c(102) : warning C4244: '=' : conversion from  
'HB_SYMBOLSCOPE' to 'BYTE', possible loss of data
macroy.c(1767) : warning C4065: switch statement contains 'default'  
but no 'case' labels
source\rdd\dbfcdx\dbfcdx1.c(7402) : warning C4244: '=' : conversion  
from 'ULONG' to 'USHORT', possible loss of data

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Feb 13 08:02:03 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Feb 13 08:02:10 2008
Subject: [Harbour] [xHarbour] REPLACE ... WITH ... : Weired Bug
In-Reply-To: <47B2CF80.4020609@dbtopas.lt>
References: <15446102.post@talk.nabble.com> <47B2CF80.4020609@dbtopas.lt>
Message-ID: <20080213130203.GA6714@localhost.localdomain>

On Wed, 13 Feb 2008, Mindaugas Kavaliauskas wrote:
> We had a little similar situation a week ago. Accessing field gives 
> runtime error "Variable does not exist", but my error log files 
> indicated (I print values of all fields of current workarea into log), 
> what field exists in workarea.
> The problem was corrupted .fpt file, but error message was misleading 
> "Variable does not exist" instead of "corruption detected" or something 
> like that.

Yes it's a problem with can happen when DBF file is corrupted
not MEMO one and application tries to access memo field.

> Clip53 gives EG_READ for this invalid record. I've attached .zip 
> containing sample .dbf and test code.

And this message is also confusing because it reports error
in FPT file when the problem is in memo block address stored
in DBF file . It contains repl(" ",9)+chr(10) - Clipper decode
it as number without any validation and this as result it
receives some unexpected block number

I'll add valid RT error message ASAP.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Feb 13 08:03:39 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Feb 13 08:03:44 2008
Subject: [Harbour] 2008-02-13 14:03 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200802131303.m1DD3dR1014974@31-mo5-4.acn.waw.pl>

2008-02-13 14:03 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/direct.c
    * fixed Clipper compatibility when last character of given path
      is directory delimiter or drive delimiter

  * harbour/source/rdd/dbf1.c
    * added RT error when corrupted memo block address is detected
      in DBF file.

best regards
Przemek
From dbtopas at dbtopas.lt  Wed Feb 13 08:17:45 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Feb 13 08:17:50 2008
Subject: [Harbour] [xHarbour] REPLACE ... WITH ... : Weired Bug
In-Reply-To: <20080213130203.GA6714@localhost.localdomain>
References: <15446102.post@talk.nabble.com> <47B2CF80.4020609@dbtopas.lt>
	<20080213130203.GA6714@localhost.localdomain>
Message-ID: <47B2EDF9.9030108@dbtopas.lt>

Przemyslaw Czerpak wrote:
> And this message is also confusing because it reports error
> in FPT file when the problem is in memo block address stored
> in DBF file . It contains repl(" ",9)+chr(10) - Clipper decode
> it as number without any validation and this as result it
> receives some unexpected block number
> 
> I'll add valid RT error message ASAP.


Thank You,
Mindaugas
From harbour.01 at syenar.hu  Wed Feb 13 08:18:28 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Feb 13 08:20:36 2008
Subject: [Harbour] CHANGELOG: 2008-02-13 14:20 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c86e42$Blat.v2.6.2$ec0bd256$ee4aea7e198@127.0.0.1>

2008-02-13 14:20 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * contrib/hbwhat32/whatutil.prg
   * contrib/hbwhat32/winrbar.prg
   * contrib/hbwhat32/winerror.prg
   * contrib/hbwhat32/wintabs.prg
   * contrib/hbwhat32/windebug.prg
   * contrib/hbwhat32/wintbar.prg
   * contrib/hbwhat32/wincore.prg
     ! Fixed warnings.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Wed Feb 13 08:23:32 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Feb 13 08:23:37 2008
Subject: [Harbour] [xHarbour] REPLACE ... WITH ... : Weired Bug
In-Reply-To: <20080213024844.GB5693@localhost.localdomain>
References: <15446102.post@talk.nabble.com>
	<20080213024844.GB5693@localhost.localdomain>
Message-ID: <20080213132332.GB6714@localhost.localdomain>

On Wed, 13 Feb 2008, Przemyslaw Czerpak wrote:
> > Fieldput() in place of REPLACE solves the issue. But then error shits to
> > next REPLACE. After replacing for function call in this IF/ENDIF block,
> > error shits its base. 
> 
> Looks like dynamic symbol table corruption or sth wrong in
> RDD you are using. I'm also not familiar with recent xHarbour
> modifications so I cannot say if sth in core code was not
> changed. Check what shows:
> 
>    ? fieldpos("prpremium"), "["+fieldname(nFieldNo)+"]"
> 
> before 1-st replace. Maybe it will help to locate more precisely
> where is the problem.

And yet another ting. Please check what your RDD makes
in PUTVALUE() method because such error will be reported
if it returns FAILURE. F.e. look at ARRAY RDD in xHarbour,
AR_PUTVALUE() function:

   IF nField > 0 .AND. nField <= Len( aStruct ) .AND. ;
      ValType( xValue ) == aStruct[ nField ][ DBS_TYPE ]
      xVal := PutValue( xValue, aStruct[ nField ][ DBS_TYPE ],;
               aStruct[ nField ][ DBS_LEN ], aStruct[ nField ][ DBS_DEC ] )
      IF !aWAData[ WADATA_EOF ]
         aRecords[ nRecNo ][ nField ] := xVal
      ENDIF
      RETURN SUCCESS
   ENDIF
   RETURN FAILURE

When field type is wrong then it also returns FAILURE but it
does not generate own RT error message so later general message
(field does not exists) is generated by core RDD code. For some
local usage it may be enough but if you need more precise error
message then this code should be changed to:

   IF nField > 0 .AND. nField <= Len( aStruct )
      IF ValType( xValue ) == aStruct[ nField ][ DBS_TYPE ]
         xVal := PutValue( xValue, aStruct[ nField ][ DBS_TYPE ],;
               aStruct[ nField ][ DBS_LEN ], aStruct[ nField ][ DBS_DEC ] )
         IF !aWAData[ WADATA_EOF ]
            aRecords[ nRecNo ][ nField ] := xVal
         ENDIF
         RETURN SUCCESS
      ENDIF
      oError := ErrorNew()
      oError:GenCode     := EG_DATATYPE
      oError:SubCode     := 1020 //EDBF_DATATYPE
      oError:Description := HB_LANGERRMSG( EG_DATATYPE )
      UR_SUPER_ERROR( nWA, oError )
   ENDIF
   RETURN FAILURE

Look at your code and maybe you will find similar situation
and if you update it then more precise error message will
help to locate the source of problem.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Feb 13 08:34:58 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Feb 13 08:35:03 2008
Subject: [Harbour] MS VS 2008 warnings
In-Reply-To: <57A6BAE3-C6FB-40D0-9717-833D9E698822@syenar.hu>
References: <57A6BAE3-C6FB-40D0-9717-833D9E698822@syenar.hu>
Message-ID: <20080213133458.GC6714@localhost.localdomain>

On Wed, 13 Feb 2008, Szak?ts Viktor wrote:
> Hi all,
> Some of them are known, but here they are:
> source\compiler\genobj32.c(544) : warning C4244: '=' : conversion from  
> 'HB_SYMBOLSCOPE' to 'BYTE', possible loss of data

This is old code to generate .obj files directly from Harbour
not working now and probably it was never fully functional in
the past. Maybe some windows developers will want to update it.

> source\compiler\genhrb.c(102) : warning C4244: '=' : conversion from  
> 'HB_SYMBOLSCOPE' to 'BYTE', possible loss of data

Yes it is. Now it's not danger because lost information is passed
in different way but it will have to be resolved cleanly in new
.hrb format so I want to keep this warning.

> macroy.c(1767) : warning C4065: switch statement contains 'default'  
> but no 'case' labels

we do not use bison destructor in our code and it causes such effect
with newer bison's versions. It's unimportant and can be ignored.
To eliminate it it's necessary to update bison core files or remove
the switch(){...} statement manually from our macro.yyc

> source\rdd\dbfcdx\dbfcdx1.c(7402) : warning C4244: '=' : conversion  
> from 'ULONG' to 'USHORT', possible loss of data

This can be hidden by casting.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Feb 13 08:36:39 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Feb 13 08:36:58 2008
Subject: [Harbour] 2008-02-13 14:36 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200802131336.m1DDadPN015317@31-mo5-4.acn.waw.pl>

2008-02-13 14:36 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
    * pacify compiler warning

best regards
Przemek
From labitas at gmail.com  Wed Feb 13 08:53:50 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Wed Feb 13 08:53:56 2008
Subject: R: [Harbour] OLE Implementation - xHarbour Compatibility
In-Reply-To: <009e01c86e29$97b3b2f0$ca64fea9@emag>
References: <15392521.post@talk.nabble.com>
	<20080210131640.GA1101@localhost.localdomain>
	<AFB948164110ED43B5EB849E8DEEF03815E95F@SRV02.deltain.net>
	<2386af1b0802110314n29f5f6edh6140a9eaaca50541@mail.gmail.com>
	<20080211122856.GA7485@localhost.localdomain>
	<2386af1b0802110555v360ecd8gf6ea903476fb8170@mail.gmail.com>
	<007701c86ccc$929fbf10$ca64fea9@emag>
	<2386af1b0802130030t5909f567xab55c4c3d7578a0f@mail.gmail.com>
	<009e01c86e29$97b3b2f0$ca64fea9@emag>
Message-ID: <2386af1b0802130553tc58bcdfg65dbcf25cec4963a@mail.gmail.com>

 Hello Enrico,

> My tests with BCC 5.5 & 5.8 shows, that alignment switches
> > -a4 and -a8 have not any influence in xHarbour work.
>
>
> Please read the old messages about this problem in this list.
>
>
> EMG
>
> what you meant?

Saulius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080213/2fa67da4/attachment.html
From harbour.01 at syenar.hu  Wed Feb 13 09:46:59 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Feb 13 09:46:37 2008
Subject: [Harbour] 2008-02-13 14:36 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <200802131336.m1DDadPN015317@31-mo5-4.acn.waw.pl>
References: <200802131336.m1DDadPN015317@31-mo5-4.acn.waw.pl>
Message-ID: <4AD423CF-960B-43D9-9E86-DDD3850ABA7D@syenar.hu>

Thanks Przemek.

Brgds,
Viktor

On 2008.02.13., at 14:36, Przemyslaw Czerpak wrote:

> 2008-02-13 14:36 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/rdd/dbfcdx/dbfcdx1.c
>    * pacify compiler warning
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From ptucker at sympatico.ca  Wed Feb 13 10:52:19 2008
From: ptucker at sympatico.ca (Paul Tucker)
Date: Wed Feb 13 10:52:25 2008
Subject: [Harbour] Re: MSVC8 warning LNK4254
In-Reply-To: <fouk9j$obh$1@ger.gmane.org>
Message-ID: <BAY114-F34B483CD9CDDEBBC59844FDF240@phx.gbl>

>Microsoft discourages merging sections with different attributes
>due to a serious security problems it may generate. For example
>sections which are ReadOnly might become ReadWrite. This is generaly
>considered a very bad practice and sooner or later MS will remove
>this possibility (IMO).

This only became an issue when _they_ changed the type from .data to .rdata. 
  IAC, we don't need the linker directive as I posted recently.

Paul


From sscc at mweb.co.za  Wed Feb 13 11:56:55 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Wed Feb 13 11:57:30 2008
Subject: [Harbour] Re: MSVC8 warning LNK4254
In-Reply-To: <fouk9j$obh$1@ger.gmane.org>
References: <47B29F02.60501@mweb.co.za> <fouk9j$obh$1@ger.gmane.org>
Message-ID: <47B32157.3030107@mweb.co.za>

Marek Paliwoda wrote:

>> Can we make this MSVC version dependent (>= 7?) and does anyone know 
>> what should be done for the contribs?
> 
> Actualy contribs do not respect HB_BUILD_MODE which plain *bug*.
> I'll try to fix it shortly.

Thank you.

Regards
Alex

From sscc at mweb.co.za  Wed Feb 13 12:01:17 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Wed Feb 13 12:02:16 2008
Subject: [Harbour] MSVC8 warning LNK4254
In-Reply-To: <BAYC1-PASMTP099B89DA6FCC92D4C52674DF240@CEZ.ICE>
References: <47B29F02.60501@mweb.co.za>
	<BAYC1-PASMTP099B89DA6FCC92D4C52674DF240@CEZ.ICE>
Message-ID: <47B3225D.9030206@mweb.co.za>

Paul Tucker wrote:
> My plan for this was to put the strings into defines which could then be 
> selected by version.  I don't know why MS insist on screwing with how 
> this works.
> 
> It's possible the linker merge part is not strictly necessary, but if 
> you want to experiment (for now) change
> 
> #pragma comment( linker, \"/Merge:.CRT=.data\" )\n
> to
> #pragma comment( linker, \"/Merge:.CRT=.rdata\" )\n
> 
> at 3 places in source/compiler/genc.c
> 
> This is not a permanent fix, and may cause msvc6 to complain (untested)

Yes it would be nice to have clean compiles with both versions (well, 
VS2003 and VS2008 as well I guess).

> 
> or comment out that line entirely anywhere you find it.
> 
> This will reduce the number of such warnings and I'll do a build with 
> all of them changed and various msvc versions and make sure it still works.

Forgive my laziness, but I have just spent way too long trying to get 
up to date. I must do a few paying things and then I'll try and find 
time to experiment again.

Thanks
Alex

From rodrmigu at gmail.com  Wed Feb 13 12:53:52 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Wed Feb 13 12:54:08 2008
Subject: [Harbour] GC - Reference to Freed Memory Block - GPF
In-Reply-To: <20080213023056.GA5693@localhost.localdomain>
References: <15403015.post@talk.nabble.com>
	<20080211104331.GA6769@localhost.localdomain>
	<15419405.post@talk.nabble.com>
	<20080211213045.GA15743@localhost.localdomain>
	<47B0D4B5.3050006@dbtopas.lt>
	<20080212012826.GB16865@localhost.localdomain>
	<15441969.post@talk.nabble.com>
	<80b05d460802121313q72817d77j860343cfd6ac939c@mail.gmail.com>
	<20080213023056.GA5693@localhost.localdomain>
Message-ID: <80b05d460802130953k5c07f58ckbde0ed5c40c16b31@mail.gmail.com>

Thanks for you explanation. I'll fix that soon.

Regards
Rodrigo

On Feb 13, 2008 12:30 AM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> On Tue, 12 Feb 2008, Rodrigo Miguel wrote:
> > Hi Pritpal,
> > I'm facing the same issue with xhgtk library, it's basically the same
> thing
> > except that I'm using with the Browse Class.
> > Here's the error message:
> > Error BASE/1301  Object Destructor Failure: Reference to freed block
> > BASE/1301  Object Destructor Failure: Reference to freed block
> > Total memory allocated: 557807 bytes (4590 block(s))
> > WARNING! Memory allocated but not released: 36 bytes (1 block(s))
> > fm.c:623: HB_TR_ERROR Block 1 (size 32) XHGTK_TREE_ITER_NEW(0), "08,
> 8.900/8-
> > E.9000000000000000E00*91723)9-0.A.F000200000002000000"
> > Even removing the destructor clause and put the call to xhgtk_tree_iter
> to
> > the "destroy" event through the callbacks, I got this error above
>
> Yes it is. And it's a bug in XHGTK code. Here is self contain reduced
> example:
>
>      proc main()
>         XHGTK_TREE_ITER_NEW()
>      return
>      #pragma begindump
>      HB_FUNC( XHGTK_TREE_ITER_NEW )
>      {
>         void * treeiter = (void *) hb_gcAlloc(sizeof(void *), NULL);
>         hb_retptr(treeiter);
>      }
>      #pragma enddump
>
> It's a little bit modified to compile without GTK header files.
> I do not know what this function should do but it's a bug in
> Harbour and xHarbour though only Harbour can detected it and
> report error. In xHarbour it will cause internal memory corruption
> because this GC block is freed by garbage collector in first GC
> pass after allocations and then this memory can be reused for
> other things so if you will try to write sth to this block you
> will corrupt some other data. All GC memory blocks have to be
> attached to GC items or freed by hb_gcUnlock(). And before
> attaching and freeing you cannot activate GC because it will
> free the block immediately. It's a serious bug and have to
> be fixed.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080213/0174cbdc/attachment.html
From e.m.giordano at emagsoftware.it  Wed Feb 13 13:32:43 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Feb 13 13:32:49 2008
Subject: R: [Harbour] OLE Implementation - xHarbour Compatibility
References: <15392521.post@talk.nabble.com><20080210131640.GA1101@localhost.localdomain><AFB948164110ED43B5EB849E8DEEF03815E95F@SRV02.deltain.net><2386af1b0802110314n29f5f6edh6140a9eaaca50541@mail.gmail.com><20080211122856.GA7485@localhost.localdomain><2386af1b0802110555v360ecd8gf6ea903476fb8170@mail.gmail.com><007701c86ccc$929fbf10$ca64fea9@emag><2386af1b0802130030t5909f567xab55c4c3d7578a0f@mail.gmail.com><009e01c86e29$97b3b2f0$ca64fea9@emag>
	<2386af1b0802130553tc58bcdfg65dbcf25cec4963a@mail.gmail.com>
Message-ID: <026201c86e6e$d28971e0$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Saulius Zrelskis" <labitas@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoled? 13 febbraio 2008 14.53
Oggetto: Re: R: [Harbour] OLE Implementation - xHarbour Compatibility


> > Please read the old messages about this problem in this list.
>
> what you meant?

http://lists.harbour-project.org/pipermail/harbour/2007-November/004840.html

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From mpaliwoda at interia.pl  Wed Feb 13 14:15:52 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Feb 13 14:16:02 2008
Subject: [Harbour] 2008-02-13 20:13 UTC+0100 Marek Paliwoda (mpaliwoda at
	interia pl)
Message-ID: <47B341E8.601@interia.pl>

2008-02-13 20:13 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)
   * harbour/contrib/mtpl_vc.mak
     ! Enable compilation in C++ mode using HB_BUILD_MODE envvar

-- 

     Marek Paliwoda
mpaliwoda at interia pl

----------------------------------------------------------------------
Mamy nagrody dla Ciebie!
Kliknij >>>  http://link.interia.pl/f1cf5 

From dbtopas at dbtopas.lt  Wed Feb 13 18:18:34 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Feb 13 18:18:39 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <20080212021254.GC16865@localhost.localdomain>
References: <47A3A1E5.7010009@dbtopas.lt>	<20080202125724.GB5637@localhost.localdomain>	<47A48235.7020505@dbtopas.lt>	<20080211135122.GA8006@localhost.localdomain>	<b4c2e573424c66ab3cf00c4ea4ea3a0c.qmail@home.pl>
	<20080212021254.GC16865@localhost.localdomain>
Message-ID: <47B37ACA.9040105@dbtopas.lt>

Przemyslaw Czerpak wrote:
>> Poiters cannot be indirectly unlocked during hb_itemPutPtrGC because
>> using the following code:
>> HB_ITEM item;
>> item.type = HB_IT_NIL;
>> hb_itemPutPtrGC( &item, hb_gcAlloc( size, someFunc ) );
>> will end with an item storing an unlocked pointer that will be
>> released prematurely by the GC.
> 
> 1-st it's a code example I'm fighting to eliminate: code which creates
> unknown for GC C level items. In last years I spent to much time helping
> different people in locating bugs caused by such code.


Hi,


I have an idea - temporarily add a call to function

void hb_gcGripTest( PHB_ITEM pItem )
{
    HB_GARBAGE_PTR pAlloc = HB_GC_PTR( pItem );
    if( pAlloc->pFunc != hb_gcGripRelease )
       hb_errInternal( HB_EI_XREALLOCNULL, NULL, NULL, NULL );
}

from for example hb_itemClear() and hb_itemCopy().


Best regards,
Mindaugas

From dbtopas at dbtopas.lt  Wed Feb 13 18:56:46 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Feb 13 18:56:49 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <47B37ACA.9040105@dbtopas.lt>
References: <47A3A1E5.7010009@dbtopas.lt>	<20080202125724.GB5637@localhost.localdomain>	<47A48235.7020505@dbtopas.lt>	<20080211135122.GA8006@localhost.localdomain>	<b4c2e573424c66ab3cf00c4ea4ea3a0c.qmail@home.pl>
	<20080212021254.GC16865@localhost.localdomain>
	<47B37ACA.9040105@dbtopas.lt>
Message-ID: <47B383BE.4090803@dbtopas.lt>

 > I have an idea - temporarily add a call to function
 > void hb_gcGripTest( PHB_ITEM pItem )
 > from for example hb_itemClear() and hb_itemCopy().

Sorry, not so good idea...

Best regards,
Mindaugas

From bedipritpal at hotmail.com  Wed Feb 13 21:30:12 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Feb 13 21:30:15 2008
Subject: [Harbour] [xHarbour] REPLACE ... WITH ... : Weired Bug
In-Reply-To: <20080213024844.GB5693@localhost.localdomain>
References: <15446102.post@talk.nabble.com>
	<20080213024844.GB5693@localhost.localdomain>
Message-ID: <15472738.post@talk.nabble.com>


Hello Przemek

This application use rdd_ads.

>   ? fieldpos("prpremium"), "["+fieldname(nFieldNo)+"]"

Both functions return correct info.

> BTW do you use any hb_gcAlloc() in your code?

No, nowhere.

I have not tested the return values of fieldput() yet. 

While examining PutValue method in ads1.c, I found this note:

   /* -----------------10/30/2003 3:54PM----------------

      ADS has Implicit Record locking that can mask programming errors.
      Implicit locking can occur the first time a value is written to a
      field with no lock in effect. The lock can potentially remain in
      effect indefinitely if the record pointer is not moved.

      The bTestRecLocks flag can be set using
          AdsTestRecLocks( lOnOff ) in adsfunc.c.
      If ON, we see if the file is open exclusively or locked, and whether
      the record has been explicitly locked already. If not, we throw
      an error so the developer can catch the missing lock condition.
      For performance reasons, Release code should leave this OFF.
         Although the call to AdsIsRecordLocked is documented as a client
         call, not a server request, and should be fast, it will be
         called for EACH FIELD as it is assigned a value.

    --------------------------------------------------*/
 
Does it have to do anything with this bug ? 

>>> ADS has Implicit Record locking that can mask programming errors.
This line is interesting. What programming errors these could be?

Thanks for sparing time.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/-xHarbour--REPLACE-...-WITH-...-%3A-Weired-Bug-tp15446102p15472738.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From maurilio.longo at libero.it  Thu Feb 14 03:30:32 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Feb 14 03:30:37 2008
Subject: [Harbour] Re: [xHarbour-developers] log(0) fails on some pc?!?!
In-Reply-To: <20080212120718.GA6247@localhost.localdomain>
References: <47B07D55.8193FFCB@libero.it>	<20080211174303.GA9143@localhost.localdomain>	<47B1791B.EF31D151@libero.it>
	<20080212120718.GA6247@localhost.localdomain>
Message-ID: <47B3FC28.20309@libero.it>

Przemyslaw,

thanks for the code snippet, I'm gonna add it since this problem breaks hbtest.

Thanks a lot.

Maurilio.

Przemyslaw Czerpak wrote:
> On Tue, 12 Feb 2008, Maurilio Longo wrote:
>> thanks for the explanation, looking into math.c I was thinking it was already
>> handled, I'll look at it more carefully.
> 
> Try to add as workaround to LOG function before:
>       hb_mathResetError( &hb_exc );
> this code:
>       if( dArg <= 0 )
>       {
>          hb_retndlen( -HUGE_VAL, -1, -1 );  /* return -infinity */
>          return;
>       }
> But if you hardware generate SIGFPE on moth overflow which is
> not caught by CRTL then probably similar problems may appear
> in different places, f.e.:
>       proc main()
>          ? 1
>          ? log(0)
>          ? 2
>          ? log(0)*2
>          ? 3
>       return
> 
> or in code like:
> 
>       proc main()
>          local i, v
>          for i:=v:=1 to 100000
>             v*=2
>          next
>          ? v
>       return
> 
> If they will not work for you then you will have to add code to
> catch math exceptions. I do not know OS2. In *nixes you should
> install your own signal handler for SIGFPE. Maybe GCC for OS2
> gives the same API. You will have to check.
> 
> BTW. The second code should be tested by Windows users. AFAIR
> BCC builds also does not catch exception. Can someone familiar
> with Borland compilers check it and fix if possible.
> 
> best regards,
> Przemek
> 
> -------------------------------------------------------------------------
> This SF.net email is sponsored by: Microsoft
> Defy all challenges. Microsoft(R) Visual Studio 2008.
> http://clk.atdmt.com/MRT/go/vse0120000070mrt/direct/01/
> _______________________________________________
> xHarbour-developers mailing list
> xHarbour-developers@lists.sourceforge.net
> https://lists.sourceforge.net/lists/listinfo/xharbour-developers

-- 
  __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From sscc at mweb.co.za  Thu Feb 14 03:40:20 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Feb 14 03:40:43 2008
Subject: [Harbour] HB_FUNC( WRITEFILE ) in hbwhat32\_winsys.c
Message-ID: <47B3FE74.7000806@mweb.co.za>

Hi

Could someone please change in hbwhat32\_winsys.c:

//-------------------------------------------------------------------//
/*
BOOL WriteFile(
   HANDLE hFile,                    // handle to file to write to
   LPCVOID lpBuffer,                // pointer to data to write to file
   DWORD nNumberOfBytesToWrite,     // number of bytes to write
   LPDWORD lpNumberOfBytesWritten,  // pointer to number of bytes written
   LPOVERLAPPED lpOverlapped        // pointer to structure for 
overlapped I/O
);
*/
HB_FUNC( WRITEFILE )
{

    DWORD nWritten = 0     ;
    OVERLAPPED *Overlapped ;

    if( ISCHAR( 4 ))
      Overlapped = ( OVERLAPPED *) hb_parc( 4 ); //hb_param( 4, 
HB_IT_STRING )->item.asString.value ;

    hb_retl ( WriteFile( (HANDLE)  hb_parnl( 1 )   ,
                      hb_parcx( 2 )       ,
                      hb_parclen( 2 )    ,
                      &nWritten          ,
                      ISCHAR( 4 ) ? Overlapped : NULL ) ) ;

    hb_stornl( nWritten, 3 ) ;
}


to:


//-------------------------------------------------------------------//
/*
BOOL WriteFile(
   HANDLE hFile,                    // handle to file to write to
   LPCVOID lpBuffer,                // pointer to data to write to file
   DWORD nNumberOfBytesToWrite,     // number of bytes to write
   LPDWORD lpNumberOfBytesWritten,  // pointer to number of bytes written
   LPOVERLAPPED lpOverlapped        // pointer to structure for 
overlapped I/O
);
*/
HB_FUNC( WRITEFILE )
{

    DWORD nWritten = 0     ;
    OVERLAPPED *Overlapped ;

    if( ISCHAR( 5 ))
      Overlapped = ( OVERLAPPED *) hb_parc( 5 ); //hb_param( 4, 
HB_IT_STRING )->item.asString.value ;

    hb_retl ( WriteFile( (HANDLE)  hb_parnl( 1 )   ,
                      hb_parcx( 2 )       ,
                      hb_parclen( 3 )    ,
                      &nWritten          ,
                      ISCHAR( 5 ) ? Overlapped : NULL ) ) ;

    hb_stornl( nWritten, 4 ) ;
}

The params seem off by one for params 4 and 5.

Thanks
Alex
From budyanto at centrin.net.id  Thu Feb 14 03:48:57 2008
From: budyanto at centrin.net.id (Budyanto Dj.)
Date: Thu Feb 14 03:49:43 2008
Subject: [Harbour] HB_FUNC( WRITEFILE ) in hbwhat32\_winsys.c
In-Reply-To: <47B3FE74.7000806@mweb.co.za>
Message-ID: <47B462E9.17503.5268687B@localhost>

Alex,

I am not a user of WriteFile(), but from a quick glance I think the current code is OK.
The author seems to expect this:

WriteFile(hFile, cBuffer, @nNumWritten, @lOverlapped)

(only 4 parameters required, not 5).

As for the comments describing 5 parameters to pass, it is about WinAPI's WriteFile(), not about 
HB_FUN_WRITEFILE :-)

regards,
budyanto

On 14 Feb 2008 at 10:40, Alex Strickland wrote:
> Hi
> 
> Could someone please change in hbwhat32\_winsys.c:
> 
> //-------------------------------------------------------------------//
> /*
> BOOL WriteFile(
>    HANDLE hFile,                    // handle to file to write to
>    LPCVOID lpBuffer,                // pointer to data to write to file
>    DWORD nNumberOfBytesToWrite,     // number of bytes to write
>    LPDWORD lpNumberOfBytesWritten,  // pointer to number of bytes written
>    LPOVERLAPPED lpOverlapped        // pointer to structure for 
> overlapped I/O
> );
> */
> HB_FUNC( WRITEFILE )
> {
> 
>     DWORD nWritten = 0     ;
>     OVERLAPPED *Overlapped ;
> 
>     if( ISCHAR( 4 ))
>       Overlapped = ( OVERLAPPED *) hb_parc( 4 ); //hb_param( 4, 
> HB_IT_STRING )->item.asString.value ;
> 
>     hb_retl ( WriteFile( (HANDLE)  hb_parnl( 1 )   ,
>                       hb_parcx( 2 )       ,
>                       hb_parclen( 2 )    ,
>                       &nWritten          ,
>                       ISCHAR( 4 ) ? Overlapped : NULL ) ) ;
> 
>     hb_stornl( nWritten, 3 ) ;
> }
> 
> 
> to:
> 
> 
> //-------------------------------------------------------------------//
> /*
> BOOL WriteFile(
>    HANDLE hFile,                    // handle to file to write to
>    LPCVOID lpBuffer,                // pointer to data to write to file
>    DWORD nNumberOfBytesToWrite,     // number of bytes to write
>    LPDWORD lpNumberOfBytesWritten,  // pointer to number of bytes written
>    LPOVERLAPPED lpOverlapped        // pointer to structure for 
> overlapped I/O
> );
> */
> HB_FUNC( WRITEFILE )
> {
> 
>     DWORD nWritten = 0     ;
>     OVERLAPPED *Overlapped ;
> 
>     if( ISCHAR( 5 ))
>       Overlapped = ( OVERLAPPED *) hb_parc( 5 ); //hb_param( 4, 
> HB_IT_STRING )->item.asString.value ;
> 
>     hb_retl ( WriteFile( (HANDLE)  hb_parnl( 1 )   ,
>                       hb_parcx( 2 )       ,
>                       hb_parclen( 3 )    ,
>                       &nWritten          ,
>                       ISCHAR( 5 ) ? Overlapped : NULL ) ) ;
> 
>     hb_stornl( nWritten, 4 ) ;
> }
> 
> The params seem off by one for params 4 and 5.
> 
> Thanks
> Alex
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour



From sscc at mweb.co.za  Thu Feb 14 04:15:30 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Feb 14 04:15:57 2008
Subject: [Harbour] HB_FUNC( WRITEFILE ) in hbwhat32\_winsys.c
In-Reply-To: <47B462E9.17503.5268687B@localhost>
References: <47B462E9.17503.5268687B@localhost>
Message-ID: <47B406B2.4070704@mweb.co.za>

Budyanto Dj. wrote:

> As for the comments describing 5 parameters to pass, it is about WinAPI's WriteFile(), not about 
> HB_FUN_WRITEFILE :-)

Yes, I see your point.

A little strange as it seems to me that in general What32 tries to be 
as true to the API as possible. I even recall there was a tool to 
automate the outputof the [x]Harbour functions from the API headers.

Still, I'm sure you are right, perhaps, then, a usage note would be good.

Regards
Alex

From dbtopas at dbtopas.lt  Thu Feb 14 13:43:29 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Feb 14 13:43:34 2008
Subject: [Harbour] Init method
Message-ID: <47B48BD1.9080305@dbtopas.lt>

Hello,


is "#define HB_CLS_NOTOBJECT" before "#include "hbclass.ch"" the right 
way to avoid definition of "Init" method for the class?


Best regards,
Mindaugas


From philb at philb.us  Thu Feb 14 17:19:46 2008
From: philb at philb.us (Phil Barnett)
Date: Thu Feb 14 17:19:49 2008
Subject: [Harbour] Project Code Freeze
Message-ID: <200802141719.46206.philb@philb.us>

Just a note to remind everyone that we are in a code freeze and only code for 
bug fixes can be checked in at this time.

All feature changes must wait until after the beta release.

Thanks.

-- 
"Sometimes I wonder whether the world is being run by smart people who are 
putting us on or by imbeciles who really mean it." - Mark Twain
From mpaliwoda at interia.pl  Fri Feb 15 02:19:56 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Feb 15 02:20:03 2008
Subject: [Harbour] Source file name conflicts between source/rtl and
	contrib/hbnf
Message-ID: <fp3eeg$588$1@ger.gmane.org>

Hi,

Actualy there are two file name conflicts between
   source/rtl/descend.c  and contrib/hbnf/descend.c
   source/rtl/menuto.prg and contrib/hbnf/menuto.prg

I am not sure how it should be resolved, so I'd
like to ask someone to have a look at it.

-- 

Marek

From lorenzo.fiorini at gmail.com  Fri Feb 15 02:26:53 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Feb 15 02:26:57 2008
Subject: [Harbour] How to "hrb" all the prg in a dir using gnu make
Message-ID: <9257026e0802142326y7989be44ucf04f8f50ae7cdf8@mail.gmail.com>

Sorry,  the gnu make doc is huge but I can't the answer for this easy thing:

I have a dir with several prg and I what to issue "hdo hbcmp -kM -gh
-static -W2 -q0 -n " only for the prg newer than hrb but I don't want
to list the prg inside the Makefile.

Any idea?

best regards,
Lorenzo
From alex at belacy.belgorod.su  Fri Feb 15 03:27:54 2008
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Fri Feb 15 03:28:05 2008
Subject: [Harbour] C level error api
Message-ID: <47B54D0A.9090707@belacy.belgorod.su>

Hi All,

  have we a C level error api ? In other words, are there C level 
functions to catch up errors, which on prg level we handle with BEGIN 
SEQUENCE ... END SEQUENCE ?

Regards,
   Alexander.
From mpaliwoda at interia.pl  Fri Feb 15 03:48:30 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Feb 15 03:48:47 2008
Subject: [Harbour] 2008-02-15 09:47 UTC+0100 Marek Paliwoda (mpaliwoda at
	interia pl)
Message-ID: <fp3jki$jkk$1@ger.gmane.org>

2008-02-15 09:47 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)
   * harbour/contrib/hbfimage/make_gcc.sh
     ! Fixed CFLAGS settings from a proper FREEIMAGE_INC envvar

   * harbour/contrib/hbziparch/make_vc.bat
     ! Disabled warnings about functions considered "depreciated" by MS

   * harbour/contrib/mtpl_gcc.mak
   * harbour/contrib/mtpl_gcc.sh
     ! Fixed HB_ARCHITECTIRE, CC and LD envvar settings

   * harbour/contrib/mtpl_vc.mak
     ! Forced CPP mode compilation for a ".cpp.obj" rule

-

   Marek Paliwoda
mpaliwoda@interia.pl

From harbour.01 at syenar.hu  Fri Feb 15 04:51:07 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Feb 15 04:53:12 2008
Subject: [Harbour] CHANGELOG: 2008-02-15 10:52 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c86fb8$Blat.v2.6.2$4975e3ac$137868c5626a@127.0.0.1>

2008-02-15 10:52 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * contrib/hbnf/Makefile
   * contrib/hbnf/common.mak
   - contrib/hbnf/descend.c
   + contrib/hbnf/descendn.c
   - contrib/hbnf/menuto.prg
   + contrib/hbnf/menutonf.prg
     ! Renamed some files in libnf to not collide 
       with core source names.
       (Thanks Marek)
--
Brgds,
Viktor

From mpaliwoda at interia.pl  Fri Feb 15 06:19:54 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Feb 15 06:20:11 2008
Subject: [Harbour] Re: CHANGELOG: 2008-02-15 10:52 UTC+0100 Viktor Szakats
 (harbour.01 syenar.hu)
In-Reply-To: <01c86fb8$Blat.v2.6.2$4975e3ac$137868c5626a@127.0.0.1>
References: <01c86fb8$Blat.v2.6.2$4975e3ac$137868c5626a@127.0.0.1>
Message-ID: <fp3sgt$i0s$1@ger.gmane.org>

> 2008-02-15 10:52 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
>    * contrib/hbnf/Makefile
>    * contrib/hbnf/common.mak
>    - contrib/hbnf/descend.c
>    + contrib/hbnf/descendn.c
>    - contrib/hbnf/menuto.prg
>    + contrib/hbnf/menutonf.prg
>      ! Renamed some files in libnf to not collide 
>        with core source names.

Thanks Viktor. Nice to see you're still around here to help :).

-- 

Marek

From druzus at acn.waw.pl  Fri Feb 15 06:48:19 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Feb 15 06:49:02 2008
Subject: [Harbour] C level error api
In-Reply-To: <47B54D0A.9090707@belacy.belgorod.su>
References: <47B54D0A.9090707@belacy.belgorod.su>
Message-ID: <20080215114819.GA8088@localhost.localdomain>

On Fri, 15 Feb 2008, Alexander S.Kresin wrote:
> Hi All,
>  have we a C level error api ? In other words, are there C level 
> functions to catch up errors, which on prg level we handle with BEGIN 
> SEQUENCE ... END SEQUENCE ?

1. Please remember that Harbour always returns from RT error handler.
   Even when QUIT is executed to allow final cleanup so at C level
   you will always be able to execute your code after RT error.
   Such functionality do not exist in xHarbour and QUIT interrupts
   application immediately. Anyhow you always have to write code
   which is ready for returning from error handler because it can
   be executed inside user BEGIN SEQUENCE / END which set {|e|break(e)}
   as error block for both compilers. After executing user code
   you can test if pending exception exist in HVM stack by
      hb_vmRequestQuery() != 0
   If you do not need recover value (error object) then it will be
   enough for you to reset the query flag when it has HB_BREAK_REQUESTED
   but we do not have hb_vmRequestReset() like in xHarbour - I haven't
   added it intentionally so far.

2. If you want to create real BEGIN SEQUENCE / END envelope on
   HVM stack then we do not have any direct API functions for it
   but you can use hb_xmv*() functions desigend for -gc3 compilation
   (-gc3 generates real C code instead of PCODE encapsulated in .c files)
      hb_xvmSeqBegin()  - push BEGIN SEQUENCE / END envelope on HVM stack
      hb_xvmSeqEnd()    - pop BEGIN SEQUENCE / END envelope from HVM stack
                          discarding recover value. Return TRUE if other
                          exception (QUIT) are still active
      hb_xvmSeqRecover()- pop BEGIN SEQUENCE / END envelope from HVM stack
                          leave recover value on top of HVM stack (it will
                          have to be poped by your code. Return TRUE if
                          other exception (QUIT) are still active

Examples.
1. Pure BEGIN SEQUENCE / END:

      hb_xvmSeqBegin();
      hb_itemDo( pItem );
      if( hb_xvmSeqEnd() )
         return; /* QUIT executed */

2. BEGIN SEQUENCE / END with RECOVER code - the error object stored in
   pError should be released later by hb_itemRelease()

      hb_xvmSeqBegin();
      hb_itemDo( pItem );
      if( hb_vmRequestQuery() != 0 )
      {
         if( hb_xvmSeqRecover() )
            return; /* QUIT executed */
         pError = hb_itemNew( hb_stackItemFromTop( -1 ) );
         hb_stackPop();
      }
      else
      {
         if( hb_xvmSeqEnd() )
            return; /* QUIT executed */
         pError = NULL;
      }

or the same in a little bit simpler version using hb_xvmSeqEndTest()
function:

      hb_xvmSeqBegin();
      hb_itemDo( pItem );
      if( hb_xvmSeqEndTest() )
      {
         if( hb_xvmSeqRecover() )
            return; /* QUIT executed */
         pError = hb_itemNew( hb_stackItemFromTop( -1 ) );
         hb_stackPop();
      }
      else
         pError = NULL;

Best regards,
Przemek
From druzus at acn.waw.pl  Fri Feb 15 06:53:00 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Feb 15 06:53:07 2008
Subject: [Harbour] How to "hrb" all the prg in a dir using gnu make
In-Reply-To: <9257026e0802142326y7989be44ucf04f8f50ae7cdf8@mail.gmail.com>
References: <9257026e0802142326y7989be44ucf04f8f50ae7cdf8@mail.gmail.com>
Message-ID: <20080215115300.GB8088@localhost.localdomain>

On Fri, 15 Feb 2008, Lorenzo Fiorini wrote:
> Sorry,  the gnu make doc is huge but I can't the answer for this easy thing:
> I have a dir with several prg and I what to issue "hdo hbcmp -kM -gh
> -static -W2 -q0 -n " only for the prg newer than hrb but I don't want
> to list the prg inside the Makefile.
> Any idea?

PRGFILES=$(wildcard *.prg)
HRBFILES=$(patsubst %.prg,%.hrb,$(PRGFILES))

%.hrb: %.prg
	hdo hbcmp -kM -gh -w2 -q0 -n -o$@ $<

all : $(HRBFILES)


best regards,
Przemek
From rglab at przesiew.imid.med.pl  Fri Feb 15 08:09:30 2008
From: rglab at przesiew.imid.med.pl (Ryszard Glab)
Date: Fri Feb 15 07:56:59 2008
Subject: [Harbour] C level error api
In-Reply-To: <47B54D0A.9090707@belacy.belgorod.su>
References: <47B54D0A.9090707@belacy.belgorod.su>
Message-ID: <47B59D1A.22062.2CBE1A0@rglab.przesiew.imid.med.pl>

On 15 Feb 2008 at 11:27, Alexander S.Kresin wrote:

>   have we a C level error api ? In other words, are there C level 
> functions to catch up errors, which on prg level we handle with BEGIN 
> SEQUENCE ... END SEQUENCE ?

  See vm/macro.c for example of low level error handling using 
HB_ERROR_INFO structure and hb_errorHandler() function.

Regards, Ryszard
From druzus at acn.waw.pl  Fri Feb 15 08:24:56 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Feb 15 08:25:05 2008
Subject: [Harbour] C level error api
In-Reply-To: <20080215114819.GA8088@localhost.localdomain>
References: <47B54D0A.9090707@belacy.belgorod.su>
	<20080215114819.GA8088@localhost.localdomain>
Message-ID: <20080215132456.GA9212@localhost.localdomain>

On Fri, 15 Feb 2008, Przemyslaw Czerpak wrote:
>       hb_itemDo( pItem );

Ups. Of course it should be:

      hb_itemDo( pItem, 0 );

in all paces.

And if you want to push parameters yourself and then
call hb_vmSend(), hb_vmDo() then please remember about calling
hb_vmRequestReenter() before and hb_vmRequestRestore() after, f.e.:

      if( hb_vmRequestReenter() )
      {
         hb_vmPushDynSym( hb_dynsymGetCase( "MYFUNC" ) );
         hb_vmPushNil()
         hb_vmPushInteger( 1 );
         hb_vmDo();
         /* take return value here because hb_vmRequestRestore()
            will restore previous return value */
         lResult = hb_parnl( -1 );
         hb_vmRequestRestore();
      }

These functions check if you can reenter HVM, safe and restore
return item and HVM exception resetting it. It means that you will
be able to executed .prg code even with active exception like BREAK
or QUIT and then the exception will be restored. If your .prg code
will also generate exception then during restoring the one with
highest priority will be chosen.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Feb 15 08:40:48 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Feb 15 08:40:56 2008
Subject: [Harbour] How to "hrb" all the prg in a dir using gnu make
In-Reply-To: <20080215115300.GB8088@localhost.localdomain>
References: <9257026e0802142326y7989be44ucf04f8f50ae7cdf8@mail.gmail.com>
	<20080215115300.GB8088@localhost.localdomain>
Message-ID: <9257026e0802150540y3bbf695lcd33414a66fd3c02@mail.gmail.com>

On Fri, Feb 15, 2008 at 12:53 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

>  PRGFILES=$(wildcard *.prg)
>  ...
>  all : $(HRBFILES)

Perfect as usual :)

best regards,
Lorenzo
From druzus at acn.waw.pl  Fri Feb 15 08:44:37 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Feb 15 08:44:48 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <47B1BB27.6315.9A72B2@rglab.przesiew.imid.med.pl>
References: <20080212021254.GC16865@localhost.localdomain>
	<47B1BB27.6315.9A72B2@rglab.przesiew.imid.med.pl>
Message-ID: <20080215134437.GA9263@localhost.localdomain>

On Tue, 12 Feb 2008, Ryszard Glab wrote:
>   OK, I can agree on such restictions however we will have to 
> document
> that the pointer allocated with hb_gcAlloc() have to be attached 
> using
> hb_gcAttach() function to some item - the item have to be allocated 
> using hb_itemNew(). 
>   Or alternatively we can use gcAlloc/gcAttach internally in VM/RTL 
> but 
> 3-rd party code will have to use a wrapper called for example
> hb_itemNewGCPtr( size, destructor )
> that will replace hb_itemPutPtrGC()

Sometimes user may want to initialize allocated block body before
attaching it so separated functions seems to be better. It's also
possible that he decide to free allocating block with hb_gcFree()
instead of attaching it due to some new conditions f.e. errors
which may appear during initialization.
In current core code hb_gcFree() is not used at all. If we add
above modifications then we can also check if hb_gcFree() is
executed with locked block to catch possible programmer mistakes.
Also allocating and freeing new item can cause some additional
overhead and make some code more complicated then necessary.

> > Array reallocation should not be a problem. Now we do not have any
> > preallocation code for arrays but it can be and for sure will be added
> > in the future. xHarbour already has such feature. it's few lines only.
> > You can even implement such feature yourself for SQL RDD by keeping
> > index to free raw in array in additional variable and multiple the
> > array size by 2 when the pointer reach limit. The cost of reallocation
> > will be n*log2(n)/2 where n is maximum array size - unimportant if
> > you compere it to cost of row creation. You can also keep raws in
> > items allocated by hb_itmeNew() and create list of such items though
> > here the cost will be bigger but you ill not need continuous memory
> > block. IMHO everything is better then touching item internals.
>   OK, you can remove it, I can just use an array of arrays of rows 
> which probably will be a good compromise between the GC and the 
> performance.

I do not want to remove it yet because I can imagine some interesting
functionality for it without touching HB_ITEM internals though it will
be necessary to add one additional function for it: hb_gcMark( pGCBlock ).
And this is the reason why I asked about it. Does anyone created some
code which uses extensively pure GC blocks with cross references attached
to our GC system by hb_gcRegisterSweep() and his own hb_gcMark() function?

Marek you said that you are using mark/sweep functions extensively.
Is it only for marking external HB_ITEMs or for sth else.

best regards,
Przemek
From randy at palmasdev.com  Fri Feb 15 10:53:02 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Fri Feb 15 10:52:07 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <200802141719.46206.philb@philb.us>
References: <200802141719.46206.philb@philb.us>
Message-ID: <20080215155203.86A8CABF9@smtp.tor.pathcom.com>

Hi all,

I am having the problems with the current build (note that none of 
these issues occur with the Beta3 build) - I am using MSVC 6):

-----------------------

1. Needed to include "#IFNDEF" statements at the bottom of HBSETUP.CH 
since these vars seem to already be defined somewhere else. Note that 
Beta3 included these "#IFNDEF" statements but the current build does not.

-----------------------

2. I am still using ADS/ALS v6.22 and therefore the new RDDADS will 
not work for me - I must use the RDD_ADS from Beta3 instead - Perhaps 
it should be included in the new build for developers not yet using ADS v8.

-----------------------

3. I have my own version of OLE2.C - I had to remove the following 
line from HBDATE.H...

extern HB_EXPORT HB_ULONG hb_dateMilliSeconds( void );

...otherwise I get these errors when compiling OLE2.C:

cl -TP -W3 -nologo -I..\..\include -DWIN32 -c -Fo..\..\obj\vc\ole2.obj ole2.c
ole2.c
..\..\include\HBdate.h(61) : error C2146: syntax error : missing ';' 
before identifier 'hb_dateMilliSeconds'
..\..\include\HBdate.h(61) : fatal error C1004: unexpected end of file found

-----------------------

4. I need to include "/NODEFAULTLIB:libcmt.lib" to get around link 
errors - I'm not sure what the implications of this are.

-----------------------

5. I can get my app to build, but get this warning:

LINK : warning LNK4089: all references to "ADVAPI32.dll" discarded by /OPT:REF

-----------------------

6. When I run my Windows app, the app seems to launch ok but a DOS 
box appears in the background.

-----------------------

Regards,
Randy.


From mpaliwoda at interia.pl  Fri Feb 15 11:20:22 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Feb 15 11:20:35 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <20080215134437.GA9263@localhost.localdomain>
References: <20080212021254.GC16865@localhost.localdomain>	<47B1BB27.6315.9A72B2@rglab.przesiew.imid.med.pl>
	<20080215134437.GA9263@localhost.localdomain>
Message-ID: <47B5BBC6.7040200@interia.pl>

Hi Przemek,

> I do not want to remove it yet because I can imagine some interesting
> functionality for it without touching HB_ITEM internals though it will
> be necessary to add one additional function for it: hb_gcMark( pGCBlock ).
> And this is the reason why I asked about it. Does anyone created some
> code which uses extensively pure GC blocks with cross references attached
> to our GC system by hb_gcRegisterSweep() and his own hb_gcMark() function?
> 
> Marek you said that you are using mark/sweep functions extensively.
> Is it only for marking external HB_ITEMs or for sth else.

You probably misunderstood me, or I was not clear enouch responding
to Mindaugas. In a post to Mindaugas I was refering to your proposition
of changing the following code :

       ptr = hb_gcLock( hb_gcAlloc( ptr ) );
       <initialization code>
       hb_itemPutPtrGC( ptr, destructorFunc );
       hb_gcUnock( ptr );
to
       ptr = hb_gcAlloc( ptr );
       <initialization code>
       hb_itemPutPtrGC( ptr, destructorFunc );

Mindaugas responded that he supports such a decision because
the small amount of publicly available code uses this feature,
and I posted an info that I am using it for quite a long time.

Honestly speaking I did not use gcLock()/gcUnlock() pair, but
fortunately to me I was using gcAlloc()/itemPutPtrGC()/itemRelease()
thru MACROS, so it was an immediate fix to do it well :). Using
MACROS in my case, also causes that your proposition will not hurt
me at all too, so I am all for it and I support it :).

I was not reffering to using hb_gc(Un)RegisterSweep(), especially
to protect pure GC blocks, because unlike you, I cannot imagine
any funcionality where such a feature could be utilized, as oposed
to returning such a block to PRG level and to store it there. I'd
greatly appreciate if you could post any example of such a funcionality.

-- 

Marek


---------------------------------------------------------------------- 	
Sprawdz gdzie lezy snieg, czy dzialaja armatki
i jak przygotowane sa stoki >>> http://link.interia.pl/f1cfc


From harbour.01 at syenar.hu  Fri Feb 15 12:04:05 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Feb 15 12:03:45 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <20080215155203.86A8CABF9@smtp.tor.pathcom.com>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
Message-ID: <187C09D8-3D94-44F9-93EB-50A601FDE264@syenar.hu>

>
Hi Randy,

> 1. Needed to include "#IFNDEF" statements at the bottom of  
> HBSETUP.CH since these vars seem to already be defined somewhere  
> else. Note that Beta3 included these "#IFNDEF" statements but the  
> current build does not.

Simply don't include hbsetup.ch at all. It's no longer necessary,
the content is automatically #defined by PP.

> -----------------------
>
> 2. I am still using ADS/ALS v6.22 and therefore the new RDDADS will  
> not work for me - I must use the RDD_ADS from Beta3 instead -  
> Perhaps it should be included in the new build for developers not  
> yet using ADS v8.

I seem to remember I could successfully compile rddads using 6.11,
but now it doesn't work indeed.

> -----------------------
>
> 3. I have my own version of OLE2.C - I had to remove the following  
> line from HBDATE.H...
>
> extern HB_EXPORT HB_ULONG hb_dateMilliSeconds( void );
>
> ...otherwise I get these errors when compiling OLE2.C:
>
> cl -TP -W3 -nologo -I..\..\include -DWIN32 -c -Fo..\..\obj\vc 
> \ole2.obj ole2.c
> ole2.c
> ..\..\include\HBdate.h(61) : error C2146: syntax error : missing ';'  
> before identifier 'hb_dateMilliSeconds'
> ..\..\include\HBdate.h(61) : fatal error C1004: unexpected end of  
> file found

An #include "hbdefs.h" seem to be missing from hbdate.h

Brgds,
Viktor

From randy at palmasdev.com  Fri Feb 15 12:51:03 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Fri Feb 15 12:50:05 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <187C09D8-3D94-44F9-93EB-50A601FDE264@syenar.hu>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<187C09D8-3D94-44F9-93EB-50A601FDE264@syenar.hu>
Message-ID: <20080215174959.DF7A4AE14@smtp.tor.pathcom.com>

Hi Viktor,


>>1. Needed to include "#IFNDEF" statements at the bottom of
>>HBSETUP.CH since these vars seem to already be defined somewhere
>>else. Note that Beta3 included these "#IFNDEF" statements but the
>>current build does not.
>
>Simply don't include hbsetup.ch at all. It's no longer necessary,
>the content is automatically #defined by PP.

Then where is it defined? I see it in HBSTDGEN.CH and in HBSETUP.H - 
Should it be there?

Regards,
Randy. 


From mpaliwoda at interia.pl  Fri Feb 15 13:16:00 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Feb 15 13:17:55 2008
Subject: [Harbour] Re: Various problems with current build
In-Reply-To: <20080215155203.86A8CABF9@smtp.tor.pathcom.com>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
Message-ID: <fp4kto$i57$1@ger.gmane.org>

Hi Randy,

> I am having the problems with the current build (note that none of these 
> issues occur with the Beta3 build) - I am using MSVC 6):

Exaclty which version ? With SP6 included ? My version of cl.exe reports :
--------
Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 12.00.8804 for 80x86
Copyright (C) Microsoft Corp 1984-1998. All rights reserved.
--------

> 1. Needed to include "#IFNDEF" statements at the bottom of HBSETUP.CH 
> since these vars seem to already be defined somewhere else. Note that 
> Beta3 included these "#IFNDEF" statements but the current build does not.

Answered by Viktor.

> 2. I am still using ADS/ALS v6.22 and therefore the new RDDADS will not 
> work for me - I must use the RDD_ADS from Beta3 instead - Perhaps it 
> should be included in the new build for developers not yet using ADS v8.

Not a good idea. Either current version should be enhanced to compile
with older ADS (if possible), or you need to compile your rdd_ads localy.
The later seems resonable to me.

> 3. I have my own version of OLE2.C - I had to remove the following line 
> from HBDATE.H...
> 
> extern HB_EXPORT HB_ULONG hb_dateMilliSeconds( void );
> 
> ...otherwise I get these errors when compiling OLE2.C:
> 
> cl -TP -W3 -nologo -I..\..\include -DWIN32 -c -Fo..\..\obj\vc\ole2.obj 
> ole2.c
> ole2.c
> ..\..\include\HBdate.h(61) : error C2146: syntax error : missing ';' 
> before identifier 'hb_dateMilliSeconds'
> ..\..\include\HBdate.h(61) : fatal error C1004: unexpected end of file 
> found

Quite strange. Your log fragment shows that you compile your ole2.c
in CPP mode. AFAIK ole2.c from Harbour does not compile in CPP mode
and it has no chances to compile in its current form. But I may be
wrong here.

You might make an experiment and change line 60 of hbdate.h from
    extern HB_EXPORT double hb_dateSeconds( void );
to
    extern double HB_EXPORT hb_dateSeconds( void );
or
    HB_EXPORT extern double hb_dateSeconds( void );

I seem to recall problems with a placement of HB_EXPORT in MSVC
but I don't remember details.

> 4. I need to include "/NODEFAULTLIB:libcmt.lib" to get around link 
> errors - I'm not sure what the implications of this are.

Are you talking about compiling Harbour itself, or about compiling
your application ? In the later case I guess you did not specify
-MT option for compiling your application. Despite the fact that
currently Harbour is not yet fully MT safe, it is compiled with
MT C runtime libraries using MSVC.

> 5. I can get my app to build, but get this warning:
> 
> LINK : warning LNK4089: all references to "ADVAPI32.dll" discarded by 
> /OPT:REF

Seems you do not use functions from ADVAPI32 library but you
specified /OPT:REF linker option and ADVAPI32 library in your
link command. Try removing ADVAPI32 from your link command.

> 6. When I run my Windows app, the app seems to launch ok but a DOS box 
> appears in the background.

Looks like you did not specify GTGUI as your HB_GT_LIB (or HB_GT_DEFAULT,
if I remember correctly). Przemek, Viktor or Enrico knows the details I
guess :).

-- 

Marek

From mpaliwoda at interia.pl  Fri Feb 15 13:32:28 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Feb 15 13:34:33 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <47B5BBC6.7040200@interia.pl>
References: <20080212021254.GC16865@localhost.localdomain>	<47B1BB27.6315.9A72B2@rglab.przesiew.imid.med.pl>	<20080215134437.GA9263@localhost.localdomain>
	<47B5BBC6.7040200@interia.pl>
Message-ID: <47B5DABC.7090605@interia.pl>

Marek Paliwoda wrote :

> I was not reffering to using hb_gc(Un)RegisterSweep(), especially
> to protect pure GC blocks, because unlike you, I cannot imagine
> any funcionality where such a feature could be utilized, as oposed
> to returning such a block to PRG level and to store it there. I'd
> greatly appreciate if you could post any example of such a funcionality.

When hb_gc(Un)RegisterSweep() was introduced I was very excited
because I hoped it would simplify binding between C++ objects and
PRG objects in my HbWxW, but soon I realized that I had to have C++
objects returned to PRG level anyway. So I droped this way and
stayed with my old gcAlloc() solution.

-- 

Marek

----------------------------------------------------------------------
Masz ostatnia szanse !
Sprawdz >>> http://link.interia.pl/f1d02  

From harbour.01 at syenar.hu  Fri Feb 15 13:39:25 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Feb 15 13:39:05 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <20080215174959.DF7A4AE14@smtp.tor.pathcom.com>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<187C09D8-3D94-44F9-93EB-50A601FDE264@syenar.hu>
	<20080215174959.DF7A4AE14@smtp.tor.pathcom.com>
Message-ID: <ED36AFF8-CB05-4B6B-A2C5-FB160AC388C4@syenar.hu>


On 2008.02.15., at 18:51, Randy Portnoff wrote:

> Hi Viktor,
>
>
>>> 1. Needed to include "#IFNDEF" statements at the bottom of
>>> HBSETUP.CH since these vars seem to already be defined somewhere
>>> else. Note that Beta3 included these "#IFNDEF" statements but the
>>> current build does not.
>>
>> Simply don't include hbsetup.ch at all. It's no longer necessary,
>> the content is automatically #defined by PP.
>
> Then where is it defined? I see it in HBSTDGEN.CH and in HBSETUP.H -  
> Should it be there?

Yes, it's solved through hbstdgen.ch.

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Feb 15 13:44:37 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Feb 15 13:44:29 2008
Subject: [Harbour] Re: Various problems with current build
In-Reply-To: <fp4kto$i57$1@ger.gmane.org>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<fp4kto$i57$1@ger.gmane.org>
Message-ID: <7FF83720-9BC6-467D-B73A-6CBB1A3E73C4@syenar.hu>

>>
Hi folks,

>> 2. I am still using ADS/ALS v6.22 and therefore the new RDDADS will  
>> not work for me - I must use the RDD_ADS from Beta3 instead -  
>> Perhaps it should be included in the new build for developers not  
>> yet using ADS v8.
>
> Not a good idea. Either current version should be enhanced to compile
> with older ADS (if possible), or you need to compile your rdd_ads  
> localy.
> The later seems resonable to me.

It's possible, it would just need some more coordinated
way to pass down the actual ADS package version to the
contrib sources, so that contrib lib features could be
turned on/off based on that info. Or some other fixes
around this idea (maybe just the version guards are
not precisely setup in the source).

>> 3. I have my own version of OLE2.C - I had to remove the following  
>> line from HBDATE.H...
>> extern HB_EXPORT HB_ULONG hb_dateMilliSeconds( void );
>> ...otherwise I get these errors when compiling OLE2.C:
>> cl -TP -W3 -nologo -I..\..\include -DWIN32 -c -Fo..\..\obj\vc 
>> \ole2.obj ole2.c
>> ole2.c
>> ..\..\include\HBdate.h(61) : error C2146: syntax error : missing  
>> ';' before identifier 'hb_dateMilliSeconds'
>> ..\..\include\HBdate.h(61) : fatal error C1004: unexpected end of  
>> file found
>
> Quite strange. Your log fragment shows that you compile your ole2.c
> in CPP mode. AFAIK ole2.c from Harbour does not compile in CPP mode
> and it has no chances to compile in its current form. But I may be
> wrong here.
>
> You might make an experiment and change line 60 of hbdate.h from
>   extern HB_EXPORT double hb_dateSeconds( void );
> to
>   extern double HB_EXPORT hb_dateSeconds( void );
> or
>   HB_EXPORT extern double hb_dateSeconds( void );
>
> I seem to recall problems with a placement of HB_EXPORT in MSVC
> but I don't remember details.

hbdate.h uses HB_ULONG, and the only included header is "hbsetup.h"
which won't declare any Harbour types, so that might be the problem.
I didn't do any tests though.

Randy, could you try adding #include "hbdef.h" to hbdate.h to see
if it fixes anything?

Brgds,
Viktor

From randy at palmasdev.com  Fri Feb 15 13:48:07 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Fri Feb 15 13:47:14 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <ED36AFF8-CB05-4B6B-A2C5-FB160AC388C4@syenar.hu>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<187C09D8-3D94-44F9-93EB-50A601FDE264@syenar.hu>
	<20080215174959.DF7A4AE14@smtp.tor.pathcom.com>
	<ED36AFF8-CB05-4B6B-A2C5-FB160AC388C4@syenar.hu>
Message-ID: <20080215184712.751DEAC42@smtp.tor.pathcom.com>

Hi Viktor,

>>>>1. Needed to include "#IFNDEF" statements at the bottom of
>>>>HBSETUP.CH since these vars seem to already be defined somewhere
>>>>else. Note that Beta3 included these "#IFNDEF" statements but the
>>>>current build does not.
>>>
>>>Simply don't include hbsetup.ch at all. It's no longer necessary,
>>>the content is automatically #defined by PP.
>>
>>Then where is it defined? I see it in HBSTDGEN.CH and in HBSETUP.H -
>>Should it be there?
>
>Yes, it's solved through hbstdgen.ch.

I still do not understand - What I am supposed to do to fix this?

TIA,
Randy.


From randy at palmasdev.com  Fri Feb 15 13:56:20 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Fri Feb 15 13:55:19 2008
Subject: [Harbour] Re: Various problems with current build
In-Reply-To: <7FF83720-9BC6-467D-B73A-6CBB1A3E73C4@syenar.hu>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<fp4kto$i57$1@ger.gmane.org>
	<7FF83720-9BC6-467D-B73A-6CBB1A3E73C4@syenar.hu>
Message-ID: <20080215185516.45303AE53@smtp.tor.pathcom.com>

Hi Viktor,

>hbdate.h uses HB_ULONG, and the only included header is "hbsetup.h"
>which won't declare any Harbour types, so that might be the problem.
>I didn't do any tests though.
>
>Randy, could you try adding #include "hbdef.h" to hbdate.h to see
>if it fixes anything?

I included HBDEFS.H and it fixed the problem - Thanks!

I cannot update the Harbour source so someone will need to do this.

Randy.


From druzus at acn.waw.pl  Fri Feb 15 14:12:57 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Feb 15 14:13:03 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <20080215155203.86A8CABF9@smtp.tor.pathcom.com>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
Message-ID: <20080215191257.GA10185@localhost.localdomain>

On Fri, 15 Feb 2008, Randy Portnoff wrote:
> Hi all,
> I am having the problems with the current build (note that none of 
> these issues occur with the Beta3 build) - I am using MSVC 6):
> -----------------------
> 1. Needed to include "#IFNDEF" statements at the bottom of HBSETUP.CH 
> since these vars seem to already be defined somewhere else. Note that 
> Beta3 included these "#IFNDEF" statements but the current build does not.

hbsetup.ch should not be longer included. All definitions inside
this file are include in build in PP rules.

> -----------------------
> 2. I am still using ADS/ALS v6.22 and therefore the new RDDADS will 
> not work for me - I must use the RDD_ADS from Beta3 instead - Perhaps 
> it should be included in the new build for developers not yet using ADS v8.
> -----------------------

ace.h has been removed from SVN - you have to use your own ace.h file
if you want to recompile Harbour for source.

> 3. I have my own version of OLE2.C - I had to remove the following 
> line from HBDATE.H...
> extern HB_EXPORT HB_ULONG hb_dateMilliSeconds( void );
> ...otherwise I get these errors when compiling OLE2.C:
> cl -TP -W3 -nologo -I..\..\include -DWIN32 -c -Fo..\..\obj\vc\ole2.obj 
> ole2.c
> ole2.c
> ..\..\include\HBdate.h(61) : error C2146: syntax error : missing ';' 
> before identifier 'hb_dateMilliSeconds'
> ..\..\include\HBdate.h(61) : fatal error C1004: unexpected end of file found

hbdate.h should be include after hbapi.h - I'll remove this limitation ASAP.

> -----------------------
> 4. I need to include "/NODEFAULTLIB:libcmt.lib" to get around link 
> errors - I'm not sure what the implications of this are.
> -----------------------
> 5. I can get my app to build, but get this warning:
> LINK : warning LNK4089: all references to "ADVAPI32.dll" discarded by 
> /OPT:REF

This are MSVC linker related problems. Probably you mixed C and C++
libraries/code.

> -----------------------
> 6. When I run my Windows app, the app seems to launch ok but a DOS 
> box appears in the background.

The default build time GT (GTWIN) is activated. If you do not
want to use it add to your code:
   ANNOUNCE HB_GTSYS
   REQUEST HB_GT_GUI_DEFAULT  // for TONE() and ClipBoard functions

best regards,
Przemek
From randy at palmasdev.com  Fri Feb 15 14:16:59 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Fri Feb 15 14:16:00 2008
Subject: [Harbour] Re: Various problems with current build
In-Reply-To: <fp4kto$i57$1@ger.gmane.org>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<fp4kto$i57$1@ger.gmane.org>
Message-ID: <20080215191555.9C63CACC2@smtp.tor.pathcom.com>

Hi Marek,

>>I am having the problems with the current build (note that none of 
>>these issues occur with the Beta3 build) - I am using MSVC 6):
>
>Exaclty which version ? With SP6 included ? My version of cl.exe reports :
>--------
>Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 12.00.8804 for 80x86
>Copyright (C) Microsoft Corp 1984-1998. All rights reserved.
>--------

Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 12.00.8804 for 80x86
Copyright (C) Microsoft Corp 1984-1998. All rights reserved.


>>1. Needed to include "#IFNDEF" statements at the bottom of 
>>HBSETUP.CH since these vars seem to already be defined somewhere 
>>else. Note that Beta3 included these "#IFNDEF" statements but the 
>>current build does not.
>
>Answered by Viktor.

As I said to Viktor, I am still not clear on what I need to do.

>You might make an experiment and change line 60 of hbdate.h from
>    extern HB_EXPORT double hb_dateSeconds( void );
>to
>    extern double HB_EXPORT hb_dateSeconds( void );
>or
>    HB_EXPORT extern double hb_dateSeconds( void );
>
>I seem to recall problems with a placement of HB_EXPORT in MSVC
>but I don't remember details.

Fixed by including HBDEFS.H in HBDATE.H


>>4. I need to include "/NODEFAULTLIB:libcmt.lib" to get around link 
>>errors - I'm not sure what the implications of this are.
>
>Are you talking about compiling Harbour itself, or about compiling
>your application ? In the later case I guess you did not specify
>-MT option for compiling your application. Despite the fact that
>currently Harbour is not yet fully MT safe, it is compiled with
>MT C runtime libraries using MSVC.

I am talking about compiling my PRG source.

I tried including -MT and the errors increased.


>>5. I can get my app to build, but get this warning:
>>LINK : warning LNK4089: all references to "ADVAPI32.dll" discarded 
>>by /OPT:REF
>
>Seems you do not use functions from ADVAPI32 library but you
>specified /OPT:REF linker option and ADVAPI32 library in your
>link command. Try removing ADVAPI32 from your link command.

It must be included as I am referencing functions in it. I have no 
idea what the "/OPT:REF" is or where it is defined.


>>6. When I run my Windows app, the app seems to launch ok but a DOS 
>>box appears in the background.
>
>Looks like you did not specify GTGUI as your HB_GT_LIB (or HB_GT_DEFAULT,
>if I remember correctly). Przemek, Viktor or Enrico knows the details I
>guess :).

I have no idea what you are referring to - I do include "#define 
HARBOUR_MAIN_WIN" in HBSETUP.H since I use WINDOCK to build a Windows EXE.

Regards,
Randy

P.S. As I mentioned before, none of these issues occurred with the Beta3 build. 


From mpaliwoda at interia.pl  Fri Feb 15 14:52:12 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Feb 15 14:52:57 2008
Subject: [Harbour] Re: Various problems with current build
In-Reply-To: <20080215191555.9C63CACC2@smtp.tor.pathcom.com>
References: <200802141719.46206.philb@philb.us>	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>	<fp4kto$i57$1@ger.gmane.org>
	<20080215191555.9C63CACC2@smtp.tor.pathcom.com>
Message-ID: <fp4qi6$67f$1@ger.gmane.org>

Randy,

>>> 4. I need to include "/NODEFAULTLIB:libcmt.lib" to get around link 
>>> errors - I'm not sure what the implications of this are.
>>
>> Are you talking about compiling Harbour itself, or about compiling
>> your application ? In the later case I guess you did not specify
>> -MT option for compiling your application. Despite the fact that
>> currently Harbour is not yet fully MT safe, it is compiled with
>> MT C runtime libraries using MSVC.
> 
> I am talking about compiling my PRG source.
> 
> I tried including -MT and the errors increased.

Then try to disable a line 141 in harbour/make_vc.mak
and line 121 in harbour/contrib/mtpl_vc.mak ( it looks
like CFLAGS = -MT$(DBGMARKER) $(CFLAGS) ), rebuild Harbour
and try to compile your application. I am curious if it
helps.

>>> 5. I can get my app to build, but get this warning:
>>> LINK : warning LNK4089: all references to "ADVAPI32.dll" discarded by 
>>> /OPT:REF
>>
>> Seems you do not use functions from ADVAPI32 library but you
>> specified /OPT:REF linker option and ADVAPI32 library in your
>> link command. Try removing ADVAPI32 from your link command.
> 
> It must be included as I am referencing functions in it. I have no idea 
> what the "/OPT:REF" is or where it is defined.

Are you *absolutly* sure ? Documentation for /OPT:REF says that :
-------
REF | NOREF
/OPT:REF eliminates functions and/or data that are never referenced while
/OPT:NOREF keeps functions and/or data that are never referenced.
--------
and for sure a linker does what doc says :). Optionaly you can
set C_USR envvar to : set C_USR=/IGNORE:4089, but it only shuts
the linker up.

-- 

Marek

From randy at palmasdev.com  Fri Feb 15 14:59:31 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Fri Feb 15 14:58:41 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <20080215191257.GA10185@localhost.localdomain>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<20080215191257.GA10185@localhost.localdomain>
Message-ID: <20080215195834.D851BEA27@smtp.tor.pathcom.com>

Hi Przemek,

> > 1. Needed to include "#IFNDEF" statements at the bottom of HBSETUP.CH
> > since these vars seem to already be defined somewhere else. Note that
> > Beta3 included these "#IFNDEF" statements but the current build does not.
>
>hbsetup.ch should not be longer included. All definitions inside
>this file are include in build in PP rules.

But I do not know where it is defined - I am not defining it anywhere!?

> > -----------------------
> > 2. I am still using ADS/ALS v6.22 and therefore the new RDDADS will
> > not work for me - I must use the RDD_ADS from Beta3 instead - Perhaps
> > it should be included in the new build for developers not yet using ADS v8.
> > -----------------------
>
>ace.h has been removed from SVN - you have to use your own ace.h file
>if you want to recompile Harbour for source.

I included the ACE.H from v6.22 and get the following build error:

..\mtpl_vc.mak(110) : fatal error U1023: syntax error in expression
Stop.
'sed' is not recognized as an internal or external command,
operable program or batch file.
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

_temp.def : warning LNK4093: Drive/Directory component ignored in 
"LIBRARY" staement
    Creating library ..\..\lib\vc\ace32.lib and object ..\..\lib\vc\ace32.exp

> > 3. I have my own version of OLE2.C - I had to remove the following
> > line from HBDATE.H...
> > extern HB_EXPORT HB_ULONG hb_dateMilliSeconds( void );
> > ...otherwise I get these errors when compiling OLE2.C:
> > cl -TP -W3 -nologo -I..\..\include -DWIN32 -c -Fo..\..\obj\vc\ole2.obj
> > ole2.c
> > ole2.c
> > ..\..\include\HBdate.h(61) : error C2146: syntax error : missing ';'
> > before identifier 'hb_dateMilliSeconds'
> > ..\..\include\HBdate.h(61) : fatal error C1004: unexpected end of 
> file found
>
>hbdate.h should be include after hbapi.h - I'll remove this limitation ASAP.

Thanks!

> > -----------------------
> > 4. I need to include "/NODEFAULTLIB:libcmt.lib" to get around link
> > errors - I'm not sure what the implications of this are.
> > -----------------------
> > 5. I can get my app to build, but get this warning:
> > LINK : warning LNK4089: all references to "ADVAPI32.dll" discarded by
> > /OPT:REF
>
>This are MSVC linker related problems. Probably you mixed C and C++
>libraries/code.

I cannot see anywhere I am including any .CPP source - Also note that 
I do not get these errors in Beta3 and I am using the same tools so I 
think something has changed in Harbour.

> > -----------------------
> > 6. When I run my Windows app, the app seems to launch ok but a DOS
> > box appears in the background.
>
>The default build time GT (GTWIN) is activated. If you do not
>want to use it add to your code:
>    ANNOUNCE HB_GTSYS
>    REQUEST HB_GT_GUI_DEFAULT  // for TONE() and ClipBoard functions

I am building a Windows EXE - I must include HARBOUR_MAIN_WIN in IN 
HBSETUP.H for use with WINDOCK.

How to I enable Windows GUI without the DOS box appearing?

TIA.

Regards,
Randy.


From harbour.01 at syenar.hu  Fri Feb 15 15:19:32 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Feb 15 15:19:11 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <20080215184712.751DEAC42@smtp.tor.pathcom.com>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<187C09D8-3D94-44F9-93EB-50A601FDE264@syenar.hu>
	<20080215174959.DF7A4AE14@smtp.tor.pathcom.com>
	<ED36AFF8-CB05-4B6B-A2C5-FB160AC388C4@syenar.hu>
	<20080215184712.751DEAC42@smtp.tor.pathcom.com>
Message-ID: <50FEB3FF-DB47-4573-9428-4087EA716D59@syenar.hu>

Just remove "#include "hbsetup.ch" from your app's program
and header files.

Brgds,
Viktor

On 2008.02.15., at 19:48, Randy Portnoff wrote:

> Hi Viktor,
>
>>>>> 1. Needed to include "#IFNDEF" statements at the bottom of
>>>>> HBSETUP.CH since these vars seem to already be defined somewhere
>>>>> else. Note that Beta3 included these "#IFNDEF" statements but the
>>>>> current build does not.
>>>>
>>>> Simply don't include hbsetup.ch at all. It's no longer necessary,
>>>> the content is automatically #defined by PP.
>>>
>>> Then where is it defined? I see it in HBSTDGEN.CH and in HBSETUP.H -
>>> Should it be there?
>>
>> Yes, it's solved through hbstdgen.ch.
>
> I still do not understand - What I am supposed to do to fix this?
>
> TIA,
> Randy.
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mpaliwoda at interia.pl  Fri Feb 15 15:25:32 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Feb 15 15:26:41 2008
Subject: [Harbour] Re: Various problems with current build
In-Reply-To: <fp4qi6$67f$1@ger.gmane.org>
References: <200802141719.46206.philb@philb.us>	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>	<fp4kto$i57$1@ger.gmane.org>	<20080215191555.9C63CACC2@smtp.tor.pathcom.com>
	<fp4qi6$67f$1@ger.gmane.org>
Message-ID: <fp4sgm$dmi$1@ger.gmane.org>

Marek Paliwoda wrote :

 >> I tried including -MT and the errors increased.
 >
 > Then try to disable a line 141 in harbour/make_vc.mak
 > and line 121 in harbour/contrib/mtpl_vc.mak ( it looks
 > like CFLAGS = -MT$(DBGMARKER) $(CFLAGS) ), rebuild Harbour
 > and try to compile your application. I am curious if it
 > helps.

This *DEFINITLY* is a problem related to a fact that you are
mixing objs compiled in CPP mode with objs compiled in C mode.

Please set your envvar HB_BUILD_MODE to cpp if you want to
compile in "C++" mode or unset it if you want to compile in
"C" mode.

-- 

Marek

From randy at palmasdev.com  Fri Feb 15 15:28:30 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Fri Feb 15 15:27:43 2008
Subject: [Harbour] Re: Various problems with current build
In-Reply-To: <fp4qi6$67f$1@ger.gmane.org>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<fp4kto$i57$1@ger.gmane.org>
	<20080215191555.9C63CACC2@smtp.tor.pathcom.com>
	<fp4qi6$67f$1@ger.gmane.org>
Message-ID: <20080215202727.D5475A6A6@smtp.tor.pathcom.com>

Hi Marek,

>>>>4. I need to include "/NODEFAULTLIB:libcmt.lib" to get around 
>>>>link errors - I'm not sure what the implications of this are.
>>>
>>>Are you talking about compiling Harbour itself, or about compiling
>>>your application ? In the later case I guess you did not specify
>>>-MT option for compiling your application. Despite the fact that
>>>currently Harbour is not yet fully MT safe, it is compiled with
>>>MT C runtime libraries using MSVC.
>>I am talking about compiling my PRG source.
>>I tried including -MT and the errors increased.
>
>Then try to disable a line 141 in harbour/make_vc.mak
>and line 121 in harbour/contrib/mtpl_vc.mak ( it looks
>like CFLAGS = -MT$(DBGMARKER) $(CFLAGS) ), rebuild Harbour
>and try to compile your application. I am curious if it
>helps.

Yes, that fixed the problem.

>>>>5. I can get my app to build, but get this warning:
>>>>LINK : warning LNK4089: all references to "ADVAPI32.dll" 
>>>>discarded by /OPT:REF
>>>
>>>Seems you do not use functions from ADVAPI32 library but you
>>>specified /OPT:REF linker option and ADVAPI32 library in your
>>>link command. Try removing ADVAPI32 from your link command.
>>It must be included as I am referencing functions in it. I have no 
>>idea what the "/OPT:REF" is or where it is defined.
>
>Are you *absolutly* sure ? Documentation for /OPT:REF says that :
>-------
>REF | NOREF
>/OPT:REF eliminates functions and/or data that are never referenced while
>/OPT:NOREF keeps functions and/or data that are never referenced.
>--------
>and for sure a linker does what doc says :). Optionaly you can
>set C_USR envvar to : set C_USR=/IGNORE:4089, but it only shuts
>the linker up.

The only reference I see like that is in MAKE_VCCE.MAK.

Again, I can build Harbour and my app with the Beta3 build using the 
_same_ tools and _same_ environment so I think that something has 
changed in Harbour after the Beta3 build.

Regards,
Randy.


From harbour.01 at syenar.hu  Fri Feb 15 15:28:40 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Feb 15 15:28:21 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <20080215191257.GA10185@localhost.localdomain>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<20080215191257.GA10185@localhost.localdomain>
Message-ID: <CE5D65B6-028A-4847-9D15-7FD7A2929B57@syenar.hu>

>> -----------------------
>> 2. I am still using ADS/ALS v6.22 and therefore the new RDDADS will
>> not work for me - I must use the RDD_ADS from Beta3 instead - Perhaps
>> it should be included in the new build for developers not yet using  
>> ADS v8.
>> -----------------------
>
> ace.h has been removed from SVN - you have to use your own ace.h file
> if you want to recompile Harbour for source.

[

ace.h in SVN wouldn't solve the problem. Let's see one example:
AdsGetNumActiveLinks() ADS C API (called from ADSGETNUMACTIVELINKS()),
is not present in 6.11 (pbly 6.22 too) ace.h, so even if someone is
using a hacked, or freshest ace.h, this ADS API will only be available
when using the latest ace32.dll, but not when using the 6.22 ace32.dll.
So we would just be swapping a compile error to a link error.

IMO the proper solution is to detect (or get from envvar) installed
ADS package version and compile only those parts of the contrib,
which can actually be used with that version of ADS.

]

Brgds,
Viktor

From druzus at acn.waw.pl  Fri Feb 15 15:31:57 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Feb 15 15:32:03 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <20080215195834.D851BEA27@smtp.tor.pathcom.com>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<20080215191257.GA10185@localhost.localdomain>
	<20080215195834.D851BEA27@smtp.tor.pathcom.com>
Message-ID: <20080215203157.GA10536@localhost.localdomain>

On Fri, 15 Feb 2008, Randy Portnoff wrote:
> >hbsetup.ch should not be longer included. All definitions inside
> >this file are include in build in PP rules.
> But I do not know where it is defined - I am not defining it anywhere!?

But your source code (or one of the header files you are using) have:

   #include "hbsetup.ch"

remove this line.

> 
> >> -----------------------
> >> 2. I am still using ADS/ALS v6.22 and therefore the new RDDADS will
> >> not work for me - I must use the RDD_ADS from Beta3 instead - Perhaps
> >> it should be included in the new build for developers not yet using ADS 
> >v8.
> >> -----------------------
> >ace.h has been removed from SVN - you have to use your own ace.h file
> >if you want to recompile Harbour for source.
> 
> I included the ACE.H from v6.22 and get the following build error:
> 
> ..\mtpl_vc.mak(110) : fatal error U1023: syntax error in expression
> Stop.
> 'sed' is not recognized as an internal or external command,
> operable program or batch file.
> Microsoft (R) Library Manager Version 6.00.8447
> Copyright (C) Microsoft Corp 1992-1998. All rights reserved.
> 
> _temp.def : warning LNK4093: Drive/Directory component ignored in 
> "LIBRARY" staement
>    Creating library ..\..\lib\vc\ace32.lib and object ..\..\lib\vc\ace32.exp

This is part of batch file to create import library from .dll
I do not know why we have it. Valid import libraries may be
distributed by Extended System and we do not have to make
them ourself - the original import libraries may be differ
then the one we are creating. Additionally some linkers do not
need import libraries at all and can use .dll directly.
IMHO such functionality can be added only as option. F.e.
.bat file in bin/ subdirectory which will creates import libraries
from .dll just like hb-mkslib creates shared libraries (.so, .dll, .dyn)
from static ones (.a) and object files (.o)

> >> -----------------------
> >> 4. I need to include "/NODEFAULTLIB:libcmt.lib" to get around link
> >> errors - I'm not sure what the implications of this are.
> >> -----------------------
> >> 5. I can get my app to build, but get this warning:
> >> LINK : warning LNK4089: all references to "ADVAPI32.dll" discarded by
> >> /OPT:REF
> >
> >This are MSVC linker related problems. Probably you mixed C and C++
> >libraries/code.
> 
> I cannot see anywhere I am including any .CPP source - Also note that 

I haven't said that you have any. cpp files. I only said that you are
probably mixing code compiled in C and C++ mode. But I only guess.
I do not use MSVC. Maybe Marek or Viktor can help you.

> I do not get these errors in Beta3 and I am using the same tools so I 
> think something has changed in Harbour.

Yes of course it was changed. now you can create Harbour binaries
using C and C++ mode. And this maybe the result of your problems.
Not all binaries you are linking together where compiled in the
same mode. Bad as I said I only guess.

> >> -----------------------
> >> 6. When I run my Windows app, the app seems to launch ok but a DOS
> >> box appears in the background.
> >The default build time GT (GTWIN) is activated. If you do not
> >want to use it add to your code:
> >   ANNOUNCE HB_GTSYS
> >   REQUEST HB_GT_GUI_DEFAULT  // for TONE() and ClipBoard functions
> 
> I am building a Windows EXE - I must include HARBOUR_MAIN_WIN in IN 
> HBSETUP.H for use with WINDOCK.
> How to I enable Windows GUI without the DOS box appearing?

I'll repeat. Add tou your source code:

   ANNOUNCE HB_GTSYS
   REQUEST HB_GT_GUI_DEFAULT  // for TONE() and ClipBoard functions

read doc/gtapi.txt from line 104 for details.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Feb 15 15:33:19 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Feb 15 15:32:55 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <20080215195834.D851BEA27@smtp.tor.pathcom.com>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<20080215191257.GA10185@localhost.localdomain>
	<20080215195834.D851BEA27@smtp.tor.pathcom.com>
Message-ID: <9E71E624-6DEE-49D8-A03C-99ABC2A6964E@syenar.hu>

>> > -----------------------
>> > 2. I am still using ADS/ALS v6.22 and therefore the new RDDADS will
>> > not work for me - I must use the RDD_ADS from Beta3 instead -  
>> Perhaps
>> > it should be included in the new build for developers not yet  
>> using ADS v8.
>> > -----------------------
>>
>> ace.h has been removed from SVN - you have to use your own ace.h file
>> if you want to recompile Harbour for source.
>
> I included the ACE.H from v6.22 and get the following build error:
>
> ..\mtpl_vc.mak(110) : fatal error U1023: syntax error in expression
> Stop.
> 'sed' is not recognized as an internal or external command,
> operable program or batch file.
> Microsoft (R) Library Manager Version 6.00.8447
> Copyright (C) Microsoft Corp 1992-1998. All rights reserved.
>
> _temp.def : warning LNK4093: Drive/Directory component ignored in  
> "LIBRARY" staement
>   Creating library ..\..\lib\vc\ace32.lib and object ..\..\lib\vc 
> \ace32.exp

You can ignore that, it's a service to generate a ace32.lib
file from your ace32.dll file.

You currently need the OSS/free 'sed' tool for that to work
in Harbour. Or you can use your own tools to generate it instead,
or use the one distributed with the package (if there's any
fitting one in it, in ADS, there actually is one for MSVC).

Brgds,
Viktor

From mpaliwoda at interia.pl  Fri Feb 15 15:38:47 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Feb 15 15:39:27 2008
Subject: [Harbour] Re: Various problems with current build
In-Reply-To: <20080215202727.D5475A6A6@smtp.tor.pathcom.com>
References: <200802141719.46206.philb@philb.us>	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>	<fp4kto$i57$1@ger.gmane.org>	<20080215191555.9C63CACC2@smtp.tor.pathcom.com>	<fp4qi6$67f$1@ger.gmane.org>
	<20080215202727.D5475A6A6@smtp.tor.pathcom.com>
Message-ID: <47B5F857.5070709@interia.pl>

Randy,

>>>>> 5. I can get my app to build, but get this warning:
>>>>> LINK : warning LNK4089: all references to "ADVAPI32.dll" discarded 
>>>>> by /OPT:REF
>>>>
>>>> Seems you do not use functions from ADVAPI32 library but you
>>>> specified /OPT:REF linker option and ADVAPI32 library in your
>>>> link command. Try removing ADVAPI32 from your link command.
>>> It must be included as I am referencing functions in it. I have no 
>>> idea what the "/OPT:REF" is or where it is defined.
>>
>> Are you *absolutly* sure ? Documentation for /OPT:REF says that :
>> -------
>> REF | NOREF
>> /OPT:REF eliminates functions and/or data that are never referenced while
>> /OPT:NOREF keeps functions and/or data that are never referenced.
>> --------
>> and for sure a linker does what doc says :). Optionaly you can
>> set C_USR envvar to : set C_USR=/IGNORE:4089, but it only shuts
>> the linker up.
> 
> The only reference I see like that is in MAKE_VCCE.MAK.
> 
> Again, I can build Harbour and my app with the Beta3 build using the 
> _same_ tools and _same_ environment so I think that something has 
> changed in Harbour after the Beta3 build.

The problem *may* be related to a fact that you are mixing
objs built in "C++" mode and "C" mode (read my other post).
Are you using hbziparch in your application ? Today I *forced*
"C++" mode for it to compile its C++ piece properly.

-- 

Marek


----------------------------------------------------------------------
Myslisz, ze nie ma sniegu? Sprawd? gdzie mozesz poszusowac na nartach
 >>> http://link.interia.pl/f1cfb

From druzus at acn.waw.pl  Fri Feb 15 15:42:57 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Feb 15 15:43:01 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <CE5D65B6-028A-4847-9D15-7FD7A2929B57@syenar.hu>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<20080215191257.GA10185@localhost.localdomain>
	<CE5D65B6-028A-4847-9D15-7FD7A2929B57@syenar.hu>
Message-ID: <20080215204257.GB10536@localhost.localdomain>

On Fri, 15 Feb 2008, Szak?ts Viktor wrote:
> ace.h in SVN wouldn't solve the problem. Let's see one example:
> AdsGetNumActiveLinks() ADS C API (called from ADSGETNUMACTIVELINKS()),
> is not present in 6.11 (pbly 6.22 too) ace.h,

So this code should be updated:

#if ADS_REQUIRE_VERSION >= 6

HB_FUNC( ADSGETNUMACTIVELINKS )         // requires 6.2 ! Only valid for a DataDict
{
   ...

And we have to intorduce minor number checking.

> so even if someone is
> using a hacked, or freshest ace.h, this ADS API will only be available
> when using the latest ace32.dll, but not when using the 6.22 ace32.dll.
> So we would just be swapping a compile error to a link error.

By default our code is compiled with:
   #define ADS_REQUIRE_VERSION 5

AFAIR to our old ace.h were added some undocumented functions and
maybe it's the reason why it does not work now.

> IMO the proper solution is to detect (or get from envvar) installed
> ADS package version and compile only those parts of the contrib,
> which can actually be used with that version of ADS.

I'm not ADS user and the solution I'm leaving to people interested
in this library who knows all original ace.h versions with undocumented
but accessible tricks and can make proper updates.
BTW AFAIR it should be possible to use newer client for older server
versions.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Feb 15 15:46:19 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Feb 15 15:45:53 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <20080215203157.GA10536@localhost.localdomain>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<20080215191257.GA10185@localhost.localdomain>
	<20080215195834.D851BEA27@smtp.tor.pathcom.com>
	<20080215203157.GA10536@localhost.localdomain>
Message-ID: <AC10FCB4-F5BD-44D5-8DEA-8B5775B71785@syenar.hu>

>>
Hi Przemek,

>> _temp.def : warning LNK4093: Drive/Directory component ignored in
>> "LIBRARY" staement
>>   Creating library ..\..\lib\vc\ace32.lib and object ..\..\lib\vc 
>> \ace32.exp
>
> This is part of batch file to create import library from .dll
> I do not know why we have it. Valid import libraries may be
> distributed by Extended System and we do not have to make
> them ourself - the original import libraries may be differ
> then the one we are creating. Additionally some linkers do not
> need import libraries at all and can use .dll directly.
> IMHO such functionality can be added only as option. F.e.
> .bat file in bin/ subdirectory which will creates import libraries
> from .dll just like hb-mkslib creates shared libraries  
> (.so, .dll, .dyn)
> from static ones (.a) and object files (.o)

We have it because some packages won't supply a .lib file
for the compiler _type and version_ users might happen to use.

F.e. ADS will supply MSVC compatible .lib files, but none for
BCC55, which I personally (and pbly other ppl too) happen to
use. So instead of me having to do this step manually all
the time (been there), the make system will do it for me
automatically.

This is implemented for all contribs which need a .dll,
and there are such ones (like Apollo) which won't provide
you any .libs for any compilers.

This service won't hurt anyone, yet it can help many ppl, so
I cannot see where the problem is here.

[ yes, external tool requirement would be better to be dropped,
but unfortunately no better solution came up in the lengthy
discussion back then, and 'sed' is free and std GNU tool, so
we're true to the spirit. ]

Brgds,
Viktor

From randy at palmasdev.com  Fri Feb 15 15:46:06 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Fri Feb 15 15:46:34 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <50FEB3FF-DB47-4573-9428-4087EA716D59@syenar.hu>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<187C09D8-3D94-44F9-93EB-50A601FDE264@syenar.hu>
	<20080215174959.DF7A4AE14@smtp.tor.pathcom.com>
	<ED36AFF8-CB05-4B6B-A2C5-FB160AC388C4@syenar.hu>
	<20080215184712.751DEAC42@smtp.tor.pathcom.com>
	<50FEB3FF-DB47-4573-9428-4087EA716D59@syenar.hu>
Message-ID: <20080215204631.B37B0E67E@smtp.tor.pathcom.com>

Hi Viktor,

>Just remove "#include "hbsetup.ch" from your app's program
>and header files.

But I am _not_ including it anywhere!?

Regards,
Randy.


From mpaliwoda at interia.pl  Fri Feb 15 15:51:53 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Feb 15 15:52:26 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <20080215203157.GA10536@localhost.localdomain>
References: <200802141719.46206.philb@philb.us>	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>	<20080215191257.GA10185@localhost.localdomain>	<20080215195834.D851BEA27@smtp.tor.pathcom.com>
	<20080215203157.GA10536@localhost.localdomain>
Message-ID: <47B5FB69.5000900@interia.pl>

Przemek,

[...]
> This is part of batch file to create import library from .dll
> I do not know why we have it. Valid import libraries may be
> distributed by Extended System and we do not have to make
> them ourself - the original import libraries may be differ
> then the one we are creating. Additionally some linkers do not
> need import libraries at all and can use .dll directly.
> IMHO such functionality can be added only as option. F.e.
> .bat file in bin/ subdirectory which will creates import libraries
> from .dll just like hb-mkslib creates shared libraries (.so, .dll, .dyn)
> from static ones (.a) and object files (.o)

As I announced lately it will be removed after a 1.0 release.
I've changed it localy already.

[...]
>> I do not get these errors in Beta3 and I am using the same tools so I 
>> think something has changed in Harbour.
> 
> Yes of course it was changed. now you can create Harbour binaries
> using C and C++ mode. And this maybe the result of your problems.
> Not all binaries you are linking together where compiled in the
> same mode. Bad as I said I only guess.

As usual you were absolutly right :). I just verified that I am
able to generate this problem mixing objs compiled in different
modes.

-- 

Marek

----------------------------------------------------------------------
Masz ostatnia szanse !
Sprawdz >>> http://link.interia.pl/f1d02  

From harbour.01 at syenar.hu  Fri Feb 15 16:14:22 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Feb 15 16:14:03 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <20080215204257.GB10536@localhost.localdomain>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<20080215191257.GA10185@localhost.localdomain>
	<CE5D65B6-028A-4847-9D15-7FD7A2929B57@syenar.hu>
	<20080215204257.GB10536@localhost.localdomain>
Message-ID: <AB31FC09-BB3C-4C3E-B125-114525A9C273@syenar.hu>

Hi Przemek,

On 2008.02.15., at 21:42, Przemyslaw Czerpak wrote:

> On Fri, 15 Feb 2008, Szak?ts Viktor wrote:
>> ace.h in SVN wouldn't solve the problem. Let's see one example:
>> AdsGetNumActiveLinks() ADS C API (called from  
>> ADSGETNUMACTIVELINKS()),
>> is not present in 6.11 (pbly 6.22 too) ace.h,
>
> So this code should be updated:
>
> #if ADS_REQUIRE_VERSION >= 6
>
> HB_FUNC( ADSGETNUMACTIVELINKS )         // requires 6.2 ! Only valid  
> for a DataDict
> {
>   ...
>
> And we have to intorduce minor number checking.

Agreed.

>> so even if someone is
>> using a hacked, or freshest ace.h, this ADS API will only be  
>> available
>> when using the latest ace32.dll, but not when using the 6.22  
>> ace32.dll.
>> So we would just be swapping a compile error to a link error.
>
> By default our code is compiled with:
>   #define ADS_REQUIRE_VERSION 5
>
> AFAIR to our old ace.h were added some undocumented functions and
> maybe it's the reason why it does not work now.

Can be, but if we declare undocumented ones, we need to
take care of including them only for relevant versions, and
all those declarations should be made in local headers
(maybe even in something like adsundoc.h).

>> IMO the proper solution is to detect (or get from envvar) installed
>> ADS package version and compile only those parts of the contrib,
>> which can actually be used with that version of ADS.
>
> I'm not ADS user and the solution I'm leaving to people interested
> in this library who knows all original ace.h versions with  
> undocumented
> but accessible tricks and can make proper updates.

I have all the files available from ADS homepage, but
due to lack of time (and intimate ADS knowledge), I cannot
do such an investigation.

I can send the files to anyone interested though.
(version 6.11, 7.00, 7.10, 8.00, 8.10)

> BTW AFAIR it should be possible to use newer client for older server
> versions.

That's how I know too, but there could be many reasons
for sticking with a known version of a client, at least
generally speaking (even if cross compatibility is solved).
So it's better to not "force" everyone to use the latest,
if possible.

Brgds,
Viktor

From randy at palmasdev.com  Fri Feb 15 16:13:35 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Fri Feb 15 16:15:03 2008
Subject: [Harbour] Re: Various problems with current build
In-Reply-To: <fp4sgm$dmi$1@ger.gmane.org>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<fp4kto$i57$1@ger.gmane.org>
	<20080215191555.9C63CACC2@smtp.tor.pathcom.com>
	<fp4qi6$67f$1@ger.gmane.org> <fp4sgm$dmi$1@ger.gmane.org>
Message-ID: <20080215211500.1C9B9EA0C@smtp.tor.pathcom.com>

Hi Marek,

> >> I tried including -MT and the errors increased.
> >
> > Then try to disable a line 141 in harbour/make_vc.mak
> > and line 121 in harbour/contrib/mtpl_vc.mak ( it looks
> > like CFLAGS = -MT$(DBGMARKER) $(CFLAGS) ), rebuild Harbour
> > and try to compile your application. I am curious if it
> > helps.
>
>This *DEFINITLY* is a problem related to a fact that you are
>mixing objs compiled in CPP mode with objs compiled in C mode.
>
>Please set your envvar HB_BUILD_MODE to cpp if you want to
>compile in "C++" mode or unset it if you want to compile in
>"C" mode.

It did not fix the problem - Here is what I did:

- Created an environment var as: HB_BUILD_MODE=cpp
- Rebuilt Harbour
- Recompiled my app
- Re-linked my app

Was I supposed to set it somewhere else (eg. in a .MAK file)?

Regards,
Randy.  


From harbour.01 at syenar.hu  Fri Feb 15 16:29:18 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Feb 15 16:29:03 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <20080215204631.B37B0E67E@smtp.tor.pathcom.com>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<187C09D8-3D94-44F9-93EB-50A601FDE264@syenar.hu>
	<20080215174959.DF7A4AE14@smtp.tor.pathcom.com>
	<ED36AFF8-CB05-4B6B-A2C5-FB160AC388C4@syenar.hu>
	<20080215184712.751DEAC42@smtp.tor.pathcom.com>
	<50FEB3FF-DB47-4573-9428-4087EA716D59@syenar.hu>
	<20080215204631.B37B0E67E@smtp.tor.pathcom.com>
Message-ID: <1F3F634E-752C-42A4-AB13-13AD415EEEA5@syenar.hu>

Hi Randy,

Pls post the error message you get, when you compile
your app using latest (unmodified) Harbour build, maybe
this will lead closer to the solution.

[ I'm now out for a beer. ]

Brgds,
Viktor

On 2008.02.15., at 21:46, Randy Portnoff wrote:

> Hi Viktor,
>
>> Just remove "#include "hbsetup.ch" from your app's program
>> and header files.
>
> But I am _not_ including it anywhere!?
>
> Regards,
> Randy.
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Feb 15 16:31:15 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Feb 15 16:30:56 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <47B5FB69.5000900@interia.pl>
References: <200802141719.46206.philb@philb.us>	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>	<20080215191257.GA10185@localhost.localdomain>	<20080215195834.D851BEA27@smtp.tor.pathcom.com>
	<20080215203157.GA10536@localhost.localdomain>
	<47B5FB69.5000900@interia.pl>
Message-ID: <DB52F394-DFE0-40BE-926F-63AA8B803CFD@syenar.hu>

>>
Hi Marek,

>> This is part of batch file to create import library from .dll
>> I do not know why we have it. Valid import libraries may be
>> distributed by Extended System and we do not have to make
>> them ourself - the original import libraries may be differ
>> then the one we are creating. Additionally some linkers do not
>> need import libraries at all and can use .dll directly.
>> IMHO such functionality can be added only as option. F.e.
>> .bat file in bin/ subdirectory which will creates import libraries
>> from .dll just like hb-mkslib creates shared libraries  
>> (.so, .dll, .dyn)
>> from static ones (.a) and object files (.o)
>
> As I announced lately it will be removed after a 1.0 release.
> I've changed it localy already.

I seemed to have missed that. What will exactly be removed?

Brgds,
Viktor

From mpaliwoda at interia.pl  Fri Feb 15 16:34:24 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Feb 15 16:34:56 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <AC10FCB4-F5BD-44D5-8DEA-8B5775B71785@syenar.hu>
References: <200802141719.46206.philb@philb.us>	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>	<20080215191257.GA10185@localhost.localdomain>	<20080215195834.D851BEA27@smtp.tor.pathcom.com>	<20080215203157.GA10536@localhost.localdomain>
	<AC10FCB4-F5BD-44D5-8DEA-8B5775B71785@syenar.hu>
Message-ID: <47B60560.50704@interia.pl>

Viktor,

> We have it because some packages won't supply a .lib file
> for the compiler _type and version_ users might happen to use.
> 
> F.e. ADS will supply MSVC compatible .lib files, but none for
> BCC55, which I personally (and pbly other ppl too) happen to
> use. 

It changes literaly nothing. It's a user's job, not harbour's.
It can only lead to *confusion* - for example with odbc lib,
which is included in Bcc and Msvc.

> So instead of me having to do this step manually all
> the time (been there), the make system will do it for me
> automatically.

This automatic step *has no value*. Sorry, I repeated "why"
many many times, but you seem to not get it or to ignore it.

> This is implemented for all contribs which need a .dll,
> and there are such ones (like Apollo) which won't provide
> you any .libs for any compilers.
> 
> This service won't hurt anyone, yet it can help many ppl, so
> I cannot see where the problem is here.
> 
> [ yes, external tool requirement would be better to be dropped,
> but unfortunately no better solution came up in the lengthy
> discussion back then, and 'sed' is free and std GNU tool, so
> we're true to the spirit. ]

This is *ABSOLUTLY* not true. Please read the whole initial
thread from few months back again - I clearly showd you that
no external tool is needed. But even in this situation, doing
import in Harbour *is plain wrong*. The only one thing I
could accept regarding this issue is Przemek's suggestion
about independant bat/sh files runnable by users "by hand".

-- 

Marek

----------------------------------------------------------------------
Timbaland w Twojej komorce !
Sprawdz >>>  http://link.interia.pl/f1d0c  

From randy at palmasdev.com  Fri Feb 15 16:35:57 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Fri Feb 15 16:35:03 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <20080215203157.GA10536@localhost.localdomain>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<20080215191257.GA10185@localhost.localdomain>
	<20080215195834.D851BEA27@smtp.tor.pathcom.com>
	<20080215203157.GA10536@localhost.localdomain>
Message-ID: <20080215213456.527ABAB93@smtp.tor.pathcom.com>

Hi Przemek,

>But your source code (or one of the header files you are using) have:
>
>    #include "hbsetup.ch"
>
>remove this line.

It is not in my application source or headers nor in Windock - The 
only references I can find to this file are in Harbour.

> > >> -----------------------
> > >> 6. When I run my Windows app, the app seems to launch ok but a DOS
> > >> box appears in the background.
> > >The default build time GT (GTWIN) is activated. If you do not
> > >want to use it add to your code:
> > >   ANNOUNCE HB_GTSYS
> > >   REQUEST HB_GT_GUI_DEFAULT  // for TONE() and ClipBoard functions
> >
> > I am building a Windows EXE - I must include HARBOUR_MAIN_WIN in IN
> > HBSETUP.H for use with WINDOCK.
> > How to I enable Windows GUI without the DOS box appearing?
>
>I'll repeat. Add tou your source code:
>
>    ANNOUNCE HB_GTSYS
>    REQUEST HB_GT_GUI_DEFAULT  // for TONE() and ClipBoard functions
>
>read doc/gtapi.txt from line 104 for details.

Ok, this worked - I had to:

- Include what you mentioned above
- Remove gtwin.lib
- Add gtgui.lib

Is that correct?

TIA.

Regards,
Randy.


From mpaliwoda at interia.pl  Fri Feb 15 16:37:29 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Feb 15 16:38:14 2008
Subject: [Harbour] Re: Various problems with current build
In-Reply-To: <20080215211500.1C9B9EA0C@smtp.tor.pathcom.com>
References: <200802141719.46206.philb@philb.us>	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>	<fp4kto$i57$1@ger.gmane.org>	<20080215191555.9C63CACC2@smtp.tor.pathcom.com>	<fp4qi6$67f$1@ger.gmane.org>
	<fp4sgm$dmi$1@ger.gmane.org>
	<20080215211500.1C9B9EA0C@smtp.tor.pathcom.com>
Message-ID: <fp50nk$rg8$1@ger.gmane.org>

Randy,

> It did not fix the problem - Here is what I did:
> 
> - Created an environment var as: HB_BUILD_MODE=cpp
> - Rebuilt Harbour
> - Recompiled my app
> - Re-linked my app

It means you are linking against libraries which were compiled
in "C" mode and were not recomplied (FieveWin ?). In this case
set HB_BUILD_MODE to ccc or unset it and rebuild Harbour.

> Was I supposed to set it somewhere else (eg. in a .MAK file)?

No.

-- 

Marek

From randy at palmasdev.com  Fri Feb 15 16:45:48 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Fri Feb 15 16:44:49 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <1F3F634E-752C-42A4-AB13-13AD415EEEA5@syenar.hu>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<187C09D8-3D94-44F9-93EB-50A601FDE264@syenar.hu>
	<20080215174959.DF7A4AE14@smtp.tor.pathcom.com>
	<ED36AFF8-CB05-4B6B-A2C5-FB160AC388C4@syenar.hu>
	<20080215184712.751DEAC42@smtp.tor.pathcom.com>
	<50FEB3FF-DB47-4573-9428-4087EA716D59@syenar.hu>
	<20080215204631.B37B0E67E@smtp.tor.pathcom.com>
	<1F3F634E-752C-42A4-AB13-13AD415EEEA5@syenar.hu>
Message-ID: <20080215214445.12DE5EA00@smtp.tor.pathcom.com>

Hi Viktor,

>Pls post the error message you get, when you compile
>your app using latest (unmodified) Harbour build, maybe
>this will lead closer to the solution.

include\hbsetup.ch(63) Warning W0001  Redefinition or duplicate 
definition of #define HB_C52_UNDOC

include\hbsetup.ch(65) Warning W0001  Redefinition or duplicate 
definition of #define HB_COMPAT_C53

include\hbsetup.ch(66) Warning W0001  Redefinition or duplicate 
definition of #define HB_COMPAT_XPP

include\hbsetup.ch(68) Warning W0001  Redefinition or duplicate 
definition of #define HB_COMPAT_FLAGSHIP


>[ I'm now out for a beer. ]

Have one for me too - I could use it! :-/

Regards,
Randy. 


From mpaliwoda at interia.pl  Fri Feb 15 16:44:48 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Feb 15 16:45:19 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <DB52F394-DFE0-40BE-926F-63AA8B803CFD@syenar.hu>
References: <200802141719.46206.philb@philb.us>	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>	<20080215191257.GA10185@localhost.localdomain>	<20080215195834.D851BEA27@smtp.tor.pathcom.com>	<20080215203157.GA10536@localhost.localdomain>	<47B5FB69.5000900@interia.pl>
	<DB52F394-DFE0-40BE-926F-63AA8B803CFD@syenar.hu>
Message-ID: <47B607D0.5000700@interia.pl>

Hi Viktor,

> I seemed to have missed that. What will exactly be removed?

There is a note in a ChageLog :
   2008-02-08 16:51 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)

----------
A remark :

Newly updated files for unix like systems do not try to build
import libraries from respective packages. I was against this
move from the begining, because it is a user's responsibility
to have/create required import libraries, not a harbour one.
Not to mention that some packages may include those libraries
in their distributions, in which case these libraries should
be used instead. And last but not least, adding automatic import
feature horribly complicates the whole alternative make system,
requires additional tools, not included in harbour, and is not
compatible with systems which do not require it at all. So I am
going to remove it after the release process finishes from the
rest of non GNU makefiles/batfiles.
----------

-- 

Marek


----------------------------------------------------------------------
Myslisz, ze nie ma sniegu? Sprawd? gdzie mozesz poszusowac na nartach
 >>> http://link.interia.pl/f1cfb

From mpaliwoda at interia.pl  Fri Feb 15 17:05:19 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Feb 15 17:05:50 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <47B607D0.5000700@interia.pl>
References: <200802141719.46206.philb@philb.us>	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>	<20080215191257.GA10185@localhost.localdomain>	<20080215195834.D851BEA27@smtp.tor.pathcom.com>	<20080215203157.GA10536@localhost.localdomain>	<47B5FB69.5000900@interia.pl>
	<DB52F394-DFE0-40BE-926F-63AA8B803CFD@syenar.hu>
	<47B607D0.5000700@interia.pl>
Message-ID: <47B60C9F.7040306@interia.pl>

Marek Paliwoda wrote :

> There is a note in a ChageLog :

Oops ! Not in a ChageLog but in a post
announcing this ChangeLog entry. Sorry
for a confision.

-- 

Marek

----------------------------------------------------------------------
Potega i sila na wyciagniecie reki - sprawdz!
Zagraj >>> http://link.interia.pl/f1cf3

From harbour.01 at syenar.hu  Sat Feb 16 00:17:06 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Feb 16 00:16:43 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <47B607D0.5000700@interia.pl>
References: <200802141719.46206.philb@philb.us>	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>	<20080215191257.GA10185@localhost.localdomain>	<20080215195834.D851BEA27@smtp.tor.pathcom.com>	<20080215203157.GA10536@localhost.localdomain>	<47B5FB69.5000900@interia.pl>
	<DB52F394-DFE0-40BE-926F-63AA8B803CFD@syenar.hu>
	<47B607D0.5000700@interia.pl>
Message-ID: <474B0E1D-7A62-401A-BD30-0E9E51752BE2@syenar.hu>

Hi Marek,

On 2008.02.15., at 22:44, Marek Paliwoda wrote:

> Hi Viktor,
>
>> I seemed to have missed that. What will exactly be removed?
>
> There is a note in a ChageLog :
>  2008-02-08 16:51 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)

I cannot find any signs for anything being removed in the future
in your ChangeLog. All I can see is that your newly introduced
.sh non-GNU make system are not supporting this feature.

> ----------
> A remark :
>
> Newly updated files for unix like systems do not try to build
> import libraries from respective packages. I was against this
> move from the begining, because it is a user's responsibility
> to have/create required import libraries, not a harbour one.
> Not to mention that some packages may include those libraries
> in their distributions, in which case these libraries should
> be used instead. And last but not least, adding automatic import

Yes, mostly unusable, unless you use MSVC.

> feature horribly complicates the whole alternative make system,

Horribly complicated: One command for BCC, some more batch lines
and a GNU tool for MSVC. Are you serious?

How horribly complicated the whole GNU and non-GNU make systems
are, compared to that...?

> requires additional tools, not included in harbour, and is not
> compatible with systems which do not require it at all. So I am
> going to remove it after the release process finishes from the
> rest of non GNU makefiles/batfiles.
> ----------

I can see this remark, and while being _your_ opinion, pls
don't remove existing functionality from Harbour, without
group consent or discussion.

I personally miss this feature for GCC, as everyone will have
to deal with it manually. GCC has a tool for this which
could make the process fully automatic, in one line (dlltool).

It's a great addition that you plan to _remove_ existing
functionality for personal reasons, and paint it as an
improvement. I fail to see how this will move Harbour forward.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Feb 16 00:19:29 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Feb 16 00:19:06 2008
Subject: [Harbour] 2008-02-08 16:51 UTC+0100 Marek Paliwoda (mpaliwoda at
	interia pl)
In-Reply-To: <47AC7DBE.9060102@interia.pl>
References: <47AC7DBE.9060102@interia.pl>
Message-ID: <D036C7DE-0C49-4BA5-9CA9-7D6519BB6A43@syenar.hu>

> A remark :
>
> Newly updated files for unix like systems do not try to build
> import libraries from respective packages. I was against this
> move from the begining, because it is a user's responsibility
> to have/create required import libraries, not a harbour one.
> Not to mention that some packages may include those libraries
> in their distributions, in which case these libraries should
> be used instead. And last but not least, adding automatic import
> feature horribly complicates the whole alternative make system,
> requires additional tools, not included in harbour, and is not
> compatible with systems which do not require it at all. So I am
> going to remove it after the release process finishes from the
> rest of non GNU makefiles/batfiles.

And I'll going to readd it after you've removed it
for your unknown reasons.

Make it an option which you can disable if it hurts you.

Brgds,
Viktor

From mpaliwoda at interia.pl  Sat Feb 16 02:33:20 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sat Feb 16 02:33:29 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <474B0E1D-7A62-401A-BD30-0E9E51752BE2@syenar.hu>
References: <200802141719.46206.philb@philb.us>	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>	<20080215191257.GA10185@localhost.localdomain>	<20080215195834.D851BEA27@smtp.tor.pathcom.com>	<20080215203157.GA10536@localhost.localdomain>	<47B5FB69.5000900@interia.pl>	<DB52F394-DFE0-40BE-926F-63AA8B803CFD@syenar.hu>	<47B607D0.5000700@interia.pl>
	<474B0E1D-7A62-401A-BD30-0E9E51752BE2@syenar.hu>
Message-ID: <47B691C0.3050402@interia.pl>

Hi Viktor

 >> ----------
 >> A remark :
 >>
 >> Newly updated files for unix like systems do not try to build
 >> import libraries from respective packages. I was against this
 >> move from the begining, because it is a user's responsibility
 >> to have/create required import libraries, not a harbour one.
 >> Not to mention that some packages may include those libraries
 >> in their distributions, in which case these libraries should
 >> be used instead. And last but not least, adding automatic import
 >
 > Yes, mostly unusable, unless you use MSVC.
 >
 >> feature horribly complicates the whole alternative make system,
 >
 > Horribly complicated: One command for BCC, some more batch lines
 > and a GNU tool for MSVC. Are you serious?

Of course I am. To me it looks like you seem to be kidding.
Or worst - manipulating.

Here is how, for example, make_vc.bat from hbfbird looks
with this option included :

      *************************************************************
      rem
      rem $Id: make_vc.bat 8248 2008-01-27 16:25:45Z vszakats $
      rem

      if not "%ADS_DIR%" == "" goto DIR_OK

      echo ---------------------------------------------------------------
      echo IMPORTANT: You'll need Advantage Client Engine installed and
      echo            these envvars set to successfully build this library:
      echo            set ADS_VER=8
      echo            set ADS_DIR=C:\ads\acesdk
      echo ---------------------------------------------------------------
      goto POST_EXIT

      :DIR_OK

      set CFLAGS=-I%ADS_DIR%
      if "%ADS_VER%" == "" goto DEFAULT_VER
      set CFLAGS=%CFLAGS% -DADS_REQUIRE_VERSION=%ADS_VER%
      :DEFAULT_VER

      set HB_DLL_NAME=ace32
      if exist "%ADS_DIR%\32bit\%HB_DLL_NAME%.dll"        set 
HB_DLL_DIR=%ADS_DIR%\32bit
      if exist "%ADS_DIR%\Redistribute\%HB_DLL_NAME%.dll" set 
HB_DLL_DIR=%ADS_DIR%\Redistribute
      if exist "%ADS_DIR%\%HB_DLL_NAME%.dll"              set 
HB_DLL_DIR=%ADS_DIR%
      if exist "%SystemRoot%\system32\%HB_DLL_NAME%.dll"  set 
HB_DLL_DIR=%SystemRoot%\system32

      echo Using this .dll: %HB_DLL_DIR%\%HB_DLL_NAME%.dll

      rem ---------------------------------------------------------------

      call ..\mtpl_vc.bat %1 %2 %3 %4 %5 %6 %7 %8 %9

      rem ---------------------------------------------------------------

      set _HB_INSTALL_PREFIX=%HB_INSTALL_PREFIX%
      if "%_HB_INSTALL_PREFIX%" == "" set _HB_INSTALL_PREFIX=..\..
      set _HB_LIB_INSTALL=%HB_LIB_INSTALL%
      if "%_HB_LIB_INSTALL%" == "" set _HB_LIB_INSTALL=%_HB_INSTALL_PREFIX%\lib

      if "%1" == "clean" goto POST_CLEAN
      if "%1" == "Clean" goto POST_CLEAN
      if "%1" == "CLEAN" goto POST_CLEAN
      if "%1" == "install" goto POST_INSTALL
      if "%1" == "Install" goto POST_INSTALL
      if "%1" == "INSTALL" goto POST_INSTALL

      :POST_BUILD

         rem ---------------------------------------------------------------
         rem This .dll to .lib conversion needs GNU sed.exe in the path
         rem ---------------------------------------------------------------
         echo./[ \t]*ordinal hint/,/^^[ \t]*Summary/{> _temp.sed
         echo. /^^[ \t]\+[0-9]\+/{>> _temp.sed
         echo.   s/^^[ \t]\+[0-9]\+[ \t]\+[0-9A-Fa-f]\+[ \t]\+[0-9A-Fa-f]\+[ 
\t]\+\(.*\)/\1/p>> _temp.sed
         echo. }>> _temp.sed
         echo.}>> _temp.sed
         DUMPBIN /EXPORTS %HB_DLL_DIR%\%HB_DLL_NAME%.dll > _dump.tmp
         echo.LIBRARY %HB_DLL_DIR%\%HB_DLL_NAME%.dll > _temp.def
         echo.EXPORTS >> _temp.def
         sed -nf _temp.sed < _dump.tmp >> _temp.def
         LIB /MACHINE:X86 /DEF:_temp.def 
/OUT:..\..\lib\%_HB_CC_NAME%\%HB_DLL_NAME%.lib
         del _dump.tmp
         del _temp.def
         del _temp.sed
         rem ---------------------------------------------------------------
         goto POST_EXIT

      :POST_CLEAN

         if exist ..\..\lib\%_HB_CC_NAME%\%HB_DLL_NAME%.lib del 
..\..\lib\%_HB_CC_NAME%\%HB_DLL_NAME%.lib > nul
         if exist ..\..\lib\%_HB_CC_NAME%\%HB_DLL_NAME%.exp del 
..\..\lib\%_HB_CC_NAME%\%HB_DLL_NAME%.exp > nul
         if exist %_HB_LIB_INSTALL%\%HB_DLL_NAME%.lib       del 
%_HB_LIB_INSTALL%\%HB_DLL_NAME%.lib       > nul
         goto POST_EXIT

      :POST_INSTALL

         if exist %_HB_LIB_INSTALL%\%HB_DLL_NAME%.lib del 
%_HB_LIB_INSTALL%\%HB_DLL_NAME%.lib
         if exist ..\..\lib\%_HB_CC_NAME%\%HB_DLL_NAME%.lib copy 
..\..\lib\%_HB_CC_NAME%\%HB_DLL_NAME%.lib %_HB_LIB_INSTALL%
         goto POST_EXIT

      :POST_EXIT

      set CFLAGS=
      set HB_DLL_NAME=
      set HB_DLL_DIR=

      *************************************************************




and here is how it looks without this option :




      *************************************************************
      rem
      rem $Id: make_vc.bat 8248 2008-01-27 16:25:45Z vszakats $
      rem

      if not "%FIREBIRD_INC%" == "" goto DIR_OK

      echo ---------------------------------------------------------------
      echo IMPORTANT: You'll need Firebird package and this envvar
      echo            to be set to successfully build this library:
      echo            set FIREBIRD_INC=C:\Firebird
      echo ---------------------------------------------------------------
      exit 1

      :DIR_OK

      set CFLAGS=-I%FIREBIRD_INC%\include
      call ..\mtpl_vc.bat %1 %2 %3 %4 %5 %6 %7 %8 %9
      *************************************************************



Everybody can conclude himself what is complicated and what is not.

 > How horribly complicated the whole GNU and non-GNU make systems
 > are, compared to that...?

What are you talking about here ? I don't understand.

 >> requires additional tools, not included in harbour, and is not
 >> compatible with systems which do not require it at all. So I am
 >> going to remove it after the release process finishes from the
 >> rest of non GNU makefiles/batfiles.
 >> ----------
 >
 > I can see this remark, and while being _your_ opinion, pls
 > don't remove existing functionality from Harbour, without
 > group consent or discussion.

This funcionality *was* added to Harbour *without* group
consensus. It was only your *arbitrary* decision, which
*ignored* others opinions (like mine). Problems with ace.h
show that it was not the first time unfortunately. Unlike
in your case, in my case, the group seems to support my
decision (Przemek's last post).

 > I personally miss this feature for GCC, as everyone will have
 > to deal with it manually. GCC has a tool for this which
 > could make the process fully automatic, in one line (dlltool).
 >
 > It's a great addition that you plan to _remove_ existing
 > functionality for personal reasons, and paint it as an
 > improvement. I fail to see how this will move Harbour forward.

"Great addition" ? "for personal reasons" ? "paint a an improvement" ?
It stops to be funny. It seems this problem reaches your "ego". I don't
know why. From my POV, you have *no arguments*, so you are even ready to
say not true things, like :

"[ yes, external tool requirement would be better to be dropped,
but unfortunately no better solution came up in the lengthy
discussion back then, and 'sed' is free and std GNU tool, so
we're true to the spirit. ]"

--

Marek

----------------------------------------------------------------------
Timbaland w Twojej komorce !
Sprawdz >>>  http://link.interia.pl/f1d0c  

From mpaliwoda at interia.pl  Sat Feb 16 02:49:09 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sat Feb 16 02:49:32 2008
Subject: [Harbour] Re: 2008-02-08 16:51 UTC+0100 Marek Paliwoda (mpaliwoda
 at interia pl)
In-Reply-To: <D036C7DE-0C49-4BA5-9CA9-7D6519BB6A43@syenar.hu>
References: <47AC7DBE.9060102@interia.pl>
	<D036C7DE-0C49-4BA5-9CA9-7D6519BB6A43@syenar.hu>
Message-ID: <fp64hq$dec$1@ger.gmane.org>

> And I'll going to readd it after you've removed it
> for your unknown reasons.
> 
> Make it an option which you can disable if it hurts you.

It seems you are alone. The group seems to not support you
in this case. Are you going to decide yourself, against the
group, what should or what should not be in Harbour ?

I have *no problems* with leaving this feature *if the group
decides* to leave it. You seem to ignore the group. Think
about it and after rethinking - please clearly present your
position vs group position - here.

-- 

Marek

From druzus at acn.waw.pl  Sat Feb 16 05:25:56 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Feb 16 05:26:01 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <20080215213456.527ABAB93@smtp.tor.pathcom.com>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<20080215191257.GA10185@localhost.localdomain>
	<20080215195834.D851BEA27@smtp.tor.pathcom.com>
	<20080215203157.GA10536@localhost.localdomain>
	<20080215213456.527ABAB93@smtp.tor.pathcom.com>
Message-ID: <20080216102556.GA5233@localhost.localdomain>

On Fri, 15 Feb 2008, Randy Portnoff wrote:
> Hi Przemek,
> >But your source code (or one of the header files you are using) have:
> >   #include "hbsetup.ch"
> >remove this line.
> It is not in my application source or headers nor in Windock - The 
> only references I can find to this file are in Harbour.

I'm sorry but it has to be in your source code. Directly or indirectly.
In whole Harbour code hbsetup.ch is included only by hbstdgen.ch and
hbstdgen.ch is used only by hbppgen file to generate PP rules.
I cannot give you more help. Use:
   grep -i "hbsetup.ch" *.*
and maybe you will find where. For sure it's not Harbour problem.
I've seen your exact error messages and as you can see they comes
from compiling hbsetup.ch by Harbour compiler. So this file is
for sure compiled in your environment. Because Harbour does not
include it then your code has to do that. If you cannot find it
yourself then sorry but I'm not a magic to help you and guess where
it's included in the source code you try to compile.

> >> >> -----------------------
> >> >> 6. When I run my Windows app, the app seems to launch ok but a DOS
> >> >> box appears in the background.
> >> >The default build time GT (GTWIN) is activated. If you do not
> >> >want to use it add to your code:
> >> >   ANNOUNCE HB_GTSYS
> >> >   REQUEST HB_GT_GUI_DEFAULT  // for TONE() and ClipBoard functions
> >>
> >> I am building a Windows EXE - I must include HARBOUR_MAIN_WIN in IN
> >> HBSETUP.H for use with WINDOCK.
> >> How to I enable Windows GUI without the DOS box appearing?
> >I'll repeat. Add tou your source code:
> >   ANNOUNCE HB_GTSYS
> >   REQUEST HB_GT_GUI_DEFAULT  // for TONE() and ClipBoard functions
> >read doc/gtapi.txt from line 104 for details.
> 
> Ok, this worked - I had to:
> - Include what you mentioned above
> - Remove gtwin.lib
> - Add gtgui.lib
> Is that correct?

You do not have to remove gtgui. You can add all GT libraries
to your link scripts and only the ones requested by you explicitly
will be linked. Please remember that now you can link your application
with more then one GT and chose them at application startup, f.e. you
can still use GTWIN or GTSTD and add to your application some small
console mode f.e. for some background task when it's run from command
line or GTCGI when the same binaries are also used to generate CGI.

best regards,
Przemek
From druzus at acn.waw.pl  Sat Feb 16 05:28:26 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Feb 16 05:28:32 2008
Subject: [Harbour] 2008-02-16 11:28 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200802161028.m1GASQUj007932@31-mo5-4.acn.waw.pl>

2008-02-16 11:28 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbdate.h
    ! fixed limitation which forced to use hbdate.h after hbapi.h
      or hbdefs.h

best regards
Przemek
From jorgeagiraldo at hotmail.com  Sat Feb 16 09:33:21 2008
From: jorgeagiraldo at hotmail.com (Jorge A. Giraldo)
Date: Sat Feb 16 09:33:26 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <47B691C0.3050402@interia.pl>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<20080215191257.GA10185@localhost.localdomain>
	<20080215195834.D851BEA27@smtp.tor.pathcom.com>
	<20080215203157.GA10536@localhost.localdomain>	<47B5FB69.5000900@interia.pl>
	<DB52F394-DFE0-40BE-926F-63AA8B803CFD@syenar.hu>
	<47B607D0.5000700@interia.pl>
	<474B0E1D-7A62-401A-BD30-0E9E51752BE2@syenar.hu> 
	<47B691C0.3050402@interia.pl>
Message-ID: <BAY136-W3922A1C54F73E37FE2A9CFA1270@phx.gbl>


Hi All,

I'm using bcc32 and personally I like to have the import libraries created by the make_b32.bat in contrib\rddads

because:

- For beginners who don't know how to make the ace32.lib the message
issued by the batch file is enough to provide what it's necessary, no need to look into docs or the internet.


- It creates rddads.lib, ace32.lib in the lib\b32 dir, that enforces a good order.

- In the case of other libs where there are exceptions like the temporary -a switch for the zlib dll then I'm covered.

- If I see the messages requesting for the vars set, then I would look for the ace32.dll and the ads.ch and put them in the contrib\rddads dir, and after setting the vars the libs are created.

- I think that a message like put the files here would be better :-)

- In the case of ace.h I would like to have it there, no need to haunt for this one, if possible, I know it has been discussed...

- I don't mind if the batch file is complex while it does what it should.   If there is some improvement then further experiences will help.

- I also had the problem with undefined functions with the ADS 6.11 versi?n, but at least I know where to look and to fix, it seems the batch accepts only integers 6,7,8???  Even it seems a little complex, at least they are related, and made for a purposse, it is possible to delete lines until we get the right result in case of need.  It's preferably than to have nothing and begin to tie ideas from other places.

- Hope I'm reading right and my opinions are not out of focus...

Thanks,

Jorge A.




_________________________________________________________________
Invite your mail contacts to join your friends list with Windows Live Spaces. It's easy!
http://spaces.live.com/spacesapi.aspx?wx_action=create&wx_url=/friends.aspx&mkt=en-us
From mpaliwoda at interia.pl  Sat Feb 16 10:00:20 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sat Feb 16 10:00:41 2008
Subject: [Harbour] Re: Various problems with current build
In-Reply-To: <BAY136-W3922A1C54F73E37FE2A9CFA1270@phx.gbl>
References: <200802141719.46206.philb@philb.us>	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>	<20080215191257.GA10185@localhost.localdomain>	<20080215195834.D851BEA27@smtp.tor.pathcom.com>	<20080215203157.GA10536@localhost.localdomain>	<47B5FB69.5000900@interia.pl>	<DB52F394-DFE0-40BE-926F-63AA8B803CFD@syenar.hu>	<47B607D0.5000700@interia.pl>	<474B0E1D-7A62-401A-BD30-0E9E51752BE2@syenar.hu>
	<47B691C0.3050402@interia.pl>
	<BAY136-W3922A1C54F73E37FE2A9CFA1270@phx.gbl>
Message-ID: <fp6tq8$dfh$1@ger.gmane.org>

Jorge,

> - Hope I'm reading right and my opinions are not out of focus...

Sure your input is welcome :). In such a case I will not remove
this feature :), until those who don't like it will get an overweight.

-- 

Marek

From mpaliwoda at interia.pl  Sat Feb 16 13:25:01 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sat Feb 16 13:25:26 2008
Subject: [Harbour] Re: MSVC8 warning LNK4254
In-Reply-To: <BAYC1-PASMTP119908560D4095C471E0E5DF240@CEZ.ICE>
References: <47B29F02.60501@mweb.co.za>
	<BAYC1-PASMTP119908560D4095C471E0E5DF240@CEZ.ICE>
Message-ID: <fp79q1$hg3$1@ger.gmane.org>

Hi Paul,

> I've simplified the msc startup hook, but don't have time to impliment 
> it right now.
> 
> #if defined(HB_PRAGMA_STARTUP)
>   #pragma startup hb_codepage_Init_BGMIK
> #elif defined(HB_MSC_STARTUP)
>   #pragma data_seg( HB_MSC_START_SEGMENT )
>   static HB_$INITSYM hb_vm_auto_hb_codepage_Init_BGMIK = 
> hb_codepage_Init_BGMIK;
>   #pragma data_seg()
> #endif
> 
> this needs to be updated wherever you find it (corrected for each file)
> 
> modify include\hbinit.h
> 
> #elif defined(HB_MSC_STARTUP)
> 
>   typedef int (* HB_$INITSYM)( void );
> 
>   #if _MSC_VER >= 1010
>      #define HB_MSC_START_SEGMENT ".CRT$XIY"
>   #else
>      #define HB_MSC_START_SEGMENT "XIY"
>   #endif
> ...
> 
> And the 3 locations in genc.c
> 
> 
> This should be done in xHarbour and harbour.
> 

Nice solution :). Many thanks for sharing it.
I will update Harbour after a release phase.

-- 

Marek

From randy at palmasdev.com  Sat Feb 16 17:53:35 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Sat Feb 16 17:52:36 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <20080216102556.GA5233@localhost.localdomain>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<20080215191257.GA10185@localhost.localdomain>
	<20080215195834.D851BEA27@smtp.tor.pathcom.com>
	<20080215203157.GA10536@localhost.localdomain>
	<20080215213456.527ABAB93@smtp.tor.pathcom.com>
	<20080216102556.GA5233@localhost.localdomain>
Message-ID: <20080216225232.69AA8AB99@smtp.tor.pathcom.com>

Hi Przemek,
>I'm sorry but it has to be in your source code. Directly or indirectly.
>In whole Harbour code hbsetup.ch is included only by hbstdgen.ch and
>hbstdgen.ch is used only by hbppgen file to generate PP rules.
>I cannot give you more help. Use:
>    grep -i "hbsetup.ch" *.*
>and maybe you will find where. For sure it's not Harbour problem.
>I've seen your exact error messages and as you can see they comes
>from compiling hbsetup.ch by Harbour compiler. So this file is
>for sure compiled in your environment. Because Harbour does not
>include it then your code has to do that. If you cannot find it
>yourself then sorry but I'm not a magic to help you and guess where
>it's included in the source code you try to compile.

The problem happens when I build _Harbour_, not when I build my app - 
Therefore, I cannot see how I am causing this!?

Regards,
Randy. 


From druzus at acn.waw.pl  Sun Feb 17 06:50:56 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Feb 17 06:51:02 2008
Subject: [Harbour] Various problems with current build
In-Reply-To: <20080216225232.69AA8AB99@smtp.tor.pathcom.com>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<20080215191257.GA10185@localhost.localdomain>
	<20080215195834.D851BEA27@smtp.tor.pathcom.com>
	<20080215203157.GA10536@localhost.localdomain>
	<20080215213456.527ABAB93@smtp.tor.pathcom.com>
	<20080216102556.GA5233@localhost.localdomain>
	<20080216225232.69AA8AB99@smtp.tor.pathcom.com>
Message-ID: <20080217115056.GA5499@localhost.localdomain>

On Sat, 16 Feb 2008, Randy Portnoff wrote:
> The problem happens when I build _Harbour_, not when I build my app - 
> Therefore, I cannot see how I am causing this!?

So please tell us which file in you are compiling and it causes
such effect.
For me it can be caused by two reasons:
1. some file which does not come from Harbour.
2. some wrongly set include path in your environment and header
   files are taken from older Harbour versions.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Feb 17 11:45:02 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Feb 17 11:45:07 2008
Subject: [Harbour] Collectible pointers
In-Reply-To: <47B5BBC6.7040200@interia.pl>
References: <20080212021254.GC16865@localhost.localdomain>
	<47B1BB27.6315.9A72B2@rglab.przesiew.imid.med.pl>
	<20080215134437.GA9263@localhost.localdomain>
	<47B5BBC6.7040200@interia.pl>
Message-ID: <20080217164502.GA1655@localhost.localdomain>

On Fri, 15 Feb 2008, Marek Paliwoda wrote:
> >Marek you said that you are using mark/sweep functions extensively.
> >Is it only for marking external HB_ITEMs or for sth else.
> You probably misunderstood me, or I was not clear enouch responding
> to Mindaugas. In a post to Mindaugas I was refering to your proposition
> of changing the following code :
>       ptr = hb_gcLock( hb_gcAlloc( ptr ) );
>       <initialization code>
>       hb_itemPutPtrGC( ptr, destructorFunc );
>       hb_gcUnock( ptr );
> to
>       ptr = hb_gcAlloc( ptr );
>       <initialization code>
>       hb_itemPutPtrGC( ptr, destructorFunc );
> Mindaugas responded that he supports such a decision because
> the small amount of publicly available code uses this feature,
> and I posted an info that I am using it for quite a long time.
> Honestly speaking I did not use gcLock()/gcUnlock() pair, but
> fortunately to me I was using gcAlloc()/itemPutPtrGC()/itemRelease()
> thru MACROS, so it was an immediate fix to do it well :). Using
> MACROS in my case, also causes that your proposition will not hurt
> me at all too, so I am all for it and I support it :).

Fine so probably I'll change it. The counter in GC and FM blocks will
be initialized to 0 and increased in hb_itemPut*() (it will affect also
strings), GC blocks will be locked by default and unlocked in
hb_itemPutPtrGC()

> I was not reffering to using hb_gc(Un)RegisterSweep(), especially
> to protect pure GC blocks, because unlike you, I cannot imagine
> any funcionality where such a feature could be utilized, as oposed
> to returning such a block to PRG level and to store it there. I'd
> greatly appreciate if you could post any example of such a funcionality.

If we are talking about protecting single GC block then now registering
and unregistering mark/sweep function costs exactly the same as calling
hb_itemNew()/hb_itemRelease() for GC block holder - internally it makes
very similar operations.
This function can be usable if you will have many GC blocks not attached
to any item but to other GC blocks with cross references. The allocated
GC blocks are shared so can be attached to more then one GC block.
Such code should use hb_gcIncRef()/hb_gcDecRef() for attaching/detaching
GC blocks to its internal structures and also hb_gcMark() inside registered
mark/sweep function to mark its active GC blocks as used.
It can be very complicated structure with many GC blocks and only few
of them will be attached to HVM items. But if no one so far created such
code then maybe I should not document it ;-) because similar effect
can be reached without mark/sweep function though with some small overhead:
hb_itemNew() used as block holder.

best regards,
Przemek
From jorgeagiraldo at hotmail.com  Sun Feb 17 20:48:36 2008
From: jorgeagiraldo at hotmail.com (Jorge A. Giraldo)
Date: Sun Feb 17 20:48:40 2008
Subject: [Harbour] Index problem
Message-ID: <BAY136-W3020C2C8E211CCE2139ED1A1210@phx.gbl>


Hi,

Something seems disconected, it's very basic, so it can be related to something here, I have refreshed all the svn-tree and still fails.  Could someone test it and tell me if this works fine?


PROC Main()
RDDSETDEFAULT("DBFNTX")

DbCreate('TEMP.DBF', {{'COMPANY', 'C', 4, 0}})
USE TEMP.DBF EXCLU NEW ALIAS TEMP
Append Blank
TEMP->COMPANY := 'ARTU'

? COMPANY
Index on COMPANY to TEMP
Go Top

? Eof()  // should be false.

? DbSeek('ARTU')  // should be true.

Close TEMP

RETURN

It also fails with the ADS RDD.

Regards,

Jorge A.

_________________________________________________________________
Explore the seven wonders of the world
http://search.msn.com/results.aspx?q=7+wonders+world&mkt=en-US&form=QBRE
From e.m.giordano at emagsoftware.it  Mon Feb 18 03:24:46 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Feb 18 03:25:02 2008
Subject: [Harbour] Index problem
References: <BAY136-W3020C2C8E211CCE2139ED1A1210@phx.gbl>
Message-ID: <005301c87207$b82d8e70$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Jorge A. Giraldo" <jorgeagiraldo@hotmail.com>
A: <harbour@harbour-project.org>
Data invio: luned? 18 febbraio 2008 2.48
Oggetto: [Harbour] Index problem


> ? Eof()  // should be false.
>
> ? DbSeek('ARTU')  // should be true.

I confirm the problem.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From sscc at mweb.co.za  Mon Feb 18 03:27:57 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Mon Feb 18 03:49:46 2008
Subject: [Harbour] 2008-02-08 16:51 UTC+0100 Marek Paliwoda (mpaliwoda
	at	interia pl)
In-Reply-To: <D036C7DE-0C49-4BA5-9CA9-7D6519BB6A43@syenar.hu>
References: <47AC7DBE.9060102@interia.pl>
	<D036C7DE-0C49-4BA5-9CA9-7D6519BB6A43@syenar.hu>
Message-ID: <47B9418D.2000201@mweb.co.za>

Szak?ts Viktor wrote:
> And I'll going to readd it after you've removed it
> for your unknown reasons.
> 
> Make it an option which you can disable if it hurts you.

I could not get sed.exe off the net, I tried for about half an hour.

I can't quite see why it is *not* ok to have header files but it *is*
ok to rely on the fact that dll's are present to generate import libs.

2c

Regards
Alex


From druzus at acn.waw.pl  Mon Feb 18 06:12:49 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Feb 18 06:13:04 2008
Subject: [Harbour] 2008-02-18 12:12 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200802181112.m1IBCnk0011814@31-mo5-4.acn.waw.pl>

2008-02-18 12:12 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/dbfntx/dbfntx1.c
    ! fixed very bad typo in my last commit - thanks to Jorge and Enrico
      for confirmation

best regards
Przemek
From e.m.giordano at emagsoftware.it  Mon Feb 18 06:49:45 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Feb 18 06:50:01 2008
Subject: [Harbour] 2008-02-18 12:12 UTC+0100 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <200802181112.m1IBCnk0011814@31-mo5-4.acn.waw.pl>
Message-ID: <01eb01c87224$5b215780$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: <harbour@harbour-project.org>
Data invio: luned? 18 febbraio 2008 12.12
Oggetto: [Harbour] 2008-02-18 12:12 UTC+0100 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> 2008-02-18 12:12 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/rdd/dbfntx/dbfntx1.c
>    ! fixed very bad typo in my last commit - thanks to Jorge and Enrico
>      for confirmation

Thank you! It seems ok now.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From jerryfinuliar at yahoo.com  Mon Feb 18 22:23:09 2008
From: jerryfinuliar at yahoo.com (Jerry Finuliar)
Date: Mon Feb 18 22:23:19 2008
Subject: [Harbour] Tbrowse alignment fix
Message-ID: <990670.73208.qm@web31104.mail.mud.yahoo.com>

Hi,
   
  Anyone interested to test my fix in Tbrowse?  Just drop me an e-mail and I send you the file.
   
  Thanks.

       
---------------------------------
Never miss a thing.   Make Yahoo your homepage.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080218/4a34e0b2/attachment.html
From peter.sulyok at creditexpress.hu  Tue Feb 19 06:38:10 2008
From: peter.sulyok at creditexpress.hu (=?iso-8859-2?Q?Sulyok_P=E9ter?=)
Date: Tue Feb 19 07:03:31 2008
Subject: [Harbour] odbc-update
Message-ID: <03fb01c872eb$e81217c0$eb01000a@pc16>

Hy All!

My name is Peter Sulyok. I have any problem width todbc class:
I don't know the sintaksh the update methods. Please help me!
If somebody have an example program width update methods please send me to
peter.sulyok@creditexpress.hu
Thanks!

            Peti
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080219/bceee1f0/attachment.html
From randy at palmasdev.com  Tue Feb 19 08:38:47 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Tue Feb 19 10:30:50 2008
Subject: [Harbour] Re: Various problems with current build
In-Reply-To: <fp50nk$rg8$1@ger.gmane.org>
References: <200802141719.46206.philb@philb.us>
	<20080215155203.86A8CABF9@smtp.tor.pathcom.com>
	<fp4kto$i57$1@ger.gmane.org>
	<20080215191555.9C63CACC2@smtp.tor.pathcom.com>
	<fp4qi6$67f$1@ger.gmane.org> <fp4sgm$dmi$1@ger.gmane.org>
	<20080215211500.1C9B9EA0C@smtp.tor.pathcom.com>
	<fp50nk$rg8$1@ger.gmane.org>
Message-ID: <20080219133742.1F8B6AAB5@smtp.tor.pathcom.com>

Hi Marek,

>>It did not fix the problem - Here is what I did:
>>- Created an environment var as: HB_BUILD_MODE=cpp
>>- Rebuilt Harbour
>>- Recompiled my app
>>- Re-linked my app
>
>It means you are linking against libraries which were compiled
>in "C" mode and were not recomplied (FieveWin ?). In this case
>set HB_BUILD_MODE to ccc or unset it and rebuild Harbour.

I set HB_BUILD_MODE=ccc, rebuilt Harbour, rebuilt WinDock and rebuilt 
my app but it did not fix the problem.

Regards,
Randy.


From randy at palmasdev.com  Tue Feb 19 09:03:19 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Tue Feb 19 10:36:20 2008
Subject: [Harbour] /NODEFAULTLIB:LIBCMT
Message-ID: <20080219140213.717B6ADC9@smtp.tor.pathcom.com>

Hi all,

I have tried the various suggestions to eliminate these link errors:

LIBCMT.lib(dosmap.obj) : error LNK2005: __dosmaperr already defined 
in LIBC.lib(dosmap.obj)
.
.
.
LIBCMT.lib(tolower.obj) : error LNK2005: _tolower already defined in 
LIBC.lib(tolower.obj)
LINK : warning LNK4098: defaultlib "LIBCMT" conflicts with use of 
other libs; use /NODEFAULTLIB:library

The only thing that seems to fix this problem is 
"/NODEFAULTLIB:LIBCMT" - My app seems to build and run ok.

Can someone please let me know what the implications of including this are?

TIA.

Regards,
Randy.


From ptucker at sympatico.ca  Tue Feb 19 12:48:53 2008
From: ptucker at sympatico.ca (Paul Tucker)
Date: Tue Feb 19 14:09:47 2008
Subject: [Harbour] /NODEFAULTLIB:LIBCMT
In-Reply-To: <20080219140213.717B6ADC9@smtp.tor.pathcom.com>
Message-ID: <BAY114-F37DB32F3B8CC3D287298F8DF220@phx.gbl>

Randy,
>
>LIBCMT.lib(dosmap.obj) : error LNK2005: __dosmaperr already defined in 
>LIBC.lib(dosmap.obj)
>.
>.
>.
>LIBCMT.lib(tolower.obj) : error LNK2005: _tolower already defined in 
>LIBC.lib(tolower.obj)
>LINK : warning LNK4098: defaultlib "LIBCMT" conflicts with use of other 
>libs; use /NODEFAULTLIB:library
>
>The only thing that seems to fix this problem is "/NODEFAULTLIB:LIBCMT" - 
>My app seems to build and run ok.
>
>Can someone please let me know what the implications of including this are?
>

I had originally set these up - I don't know if the state of the various 
(no)default lib's has changed.  The original intent was that if HB_MT was 
not set, then nodefaultlib:libcmt would be used, otherwise 
nodefaultlib:libct is used.  (I thinjk a couple of others are thrown in 
there too)  In later version of VC, MS have removed LIBC, so I think the 
flags have changed to always use libcmt.

I cant say untill I re-acquant myself with hot it works, but if you know 
you're not compileing for MT, then I think you can leave 
nodefaultlib:libcmt.

Paul


From mpaliwoda at interia.pl  Tue Feb 19 14:00:00 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Tue Feb 19 15:06:14 2008
Subject: [Harbour] /NODEFAULTLIB:LIBCMT
In-Reply-To: <20080219140213.717B6ADC9@smtp.tor.pathcom.com>
References: <20080219140213.717B6ADC9@smtp.tor.pathcom.com>
Message-ID: <47BB2730.3070606@interia.pl>

Hi Randy,

> I have tried the various suggestions to eliminate these link errors:
> 
> LIBCMT.lib(dosmap.obj) : error LNK2005: __dosmaperr already defined in 
> LIBC.lib(dosmap.obj)
> ..
> ..
> ..
> LIBCMT.lib(tolower.obj) : error LNK2005: _tolower already defined in 
> LIBC.lib(tolower.obj)
> LINK : warning LNK4098: defaultlib "LIBCMT" conflicts with use of other 
> libs; use /NODEFAULTLIB:library
> 
> The only thing that seems to fix this problem is "/NODEFAULTLIB:LIBCMT" 
> - My app seems to build and run ok.
> 
> Can someone please let me know what the implications of including this are?

This info might be of some help. Check it out.
http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vccore98/HTML/lnk4098.asp

BTW, posting more info about how you compile and link
Harbour and your app (bat files, makefiles, libraries
you link agains, etc.) would help more I guess.

-- 

Marek

----------------------------------------------------------------------
Potega i sila na wyciagniecie reki - sprawdz!
Zagraj >>> http://link.interia.pl/f1cf3

From randy at palmasdev.com  Tue Feb 19 17:28:58 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Tue Feb 19 17:41:24 2008
Subject: [Harbour] /NODEFAULTLIB:LIBCMT
Message-ID: <20080219172858.v7texxabcwgcs048@easymail.pathcom.com>

Hi Paul,

> I had originally set these up - I don't know if the state of the various (no)
> default lib's has changed.  The original intent was that if HB_MT was 
> not set, then nodefaultlib:libcmt would be used, otherwise 
> nodefaultlib:libct is used.  (I thinjk a couple of others are thrown 
> in there too)  In later version of VC, MS have removed LIBC, so I 
> think the flags have changed to always use libcmt.
>
> I cant say untill I re-acquant myself with hot it works, but if you 
> know you're not compileing for MT, then I think you can leave 
> nodefaultlib:libcmt.

The interesting thing is that I can include either 
"nodefaultlib:libcmt" or "nodefaultlib:libc" and the app builds and 
runs ok - So, I'm not sure how to interpret that.

Regards,
Randy.

From druzus at acn.waw.pl  Tue Feb 19 17:37:54 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Feb 19 17:44:02 2008
Subject: [Harbour] 2008-02-19 23:37 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200802192237.m1JMbscj011359@31-mo5-4.acn.waw.pl>

2008-02-19 23:37 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/main/harbour.c
  * harbour/source/common/hbfsapi.c
    ! fixed hb_fsFNameSplit()/hb_fsFNameMerge() to respect path delimiter
     set by user

  * harbour/contrib/hbct/ctwfunc.c
    ! fixed WFORMAT() called without parameters - it should reset
      all existing margins
    ! fixed WSETSHADOW() to accept color also as character parameter

best regards
Przemek
From druzus at acn.waw.pl  Tue Feb 19 18:11:13 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Feb 19 18:11:26 2008
Subject: [Harbour] 2008-02-20 00:11 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200802192311.m1JNBD0o027610@31-mo5-4.acn.waw.pl>

2008-02-20 00:11 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/pp/hbppgen.c
    ! added hb_setGetDirSeparator()

  * harbour/source/common/hbfsapi.c
    ! fixed wrong index in path updating

best regards
Przemek
From druzus at acn.waw.pl  Tue Feb 19 18:14:39 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Feb 19 18:14:50 2008
Subject: [Harbour] 2008-02-20 00:14 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200802192314.m1JNEdAp001292@31-mo5-4.acn.waw.pl>

2008-02-20 00:14 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/utils/hbpp/hbpp.c
    ! added hb_setGetDirSeparator()

best regards
Przemek
From peter.sulyok at creditexpress.hu  Wed Feb 20 05:26:40 2008
From: peter.sulyok at creditexpress.hu (=?iso-8859-2?Q?Sulyok_P=E9ter?=)
Date: Wed Feb 20 05:26:37 2008
Subject: [Harbour] player
Message-ID: <00fe01c873ab$14ea4b40$eb01000a@pc16>

Hy!

I've got an problem:
I used an player object, but i don't change a position in the played file. The player.position property can become two options: 0 or 1, this options change a position for the begin and end of the file, but i can't go for example to the 30. minute.
can somebody help me?
And i don't set a playing volume. Can do the player object it?
Thanks!

            Peti
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080220/5121c661/attachment.html
From mbelgrano at deltain.it  Thu Feb 21 05:41:57 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Feb 21 05:42:09 2008
Subject: [Harbour] Multi-Window GT - III - MemoEdit()
In-Reply-To: <14554190.post@talk.nabble.com>
References: <14554190.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815E9AE@SRV02.deltain.net>

Is possible define a basic syntax for MULTI WINDOWS gt?

like
    DEFINE WINDOW Win_1 ;
        AT 0,0 ;
        WIDTH 40 ;
        HEIGHT 20 ;
        TITLE 'Hello World!'
    END WINDOW
    ACTIVATE MULTIPLE WINDOW Win_1


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi
Sent: Monday, December 31, 2007 5:24 AM
To: harbour@harbour-project.org
Subject: [Harbour] Multi-Window GT - III - MemoEdit()


Hello Everybody

Please review MemoEdit() implementation for Multi-Window GT.

Executable :   http://www.nabble.com/file/p14554190/MultiWVT.zip
MultiWVT.zip  
Exe Source:   http://www.nabble.com/file/p14554190/MultiWVT.prg
MultiWVT.prg 
Memoedit.prg:   http://www.nabble.com/file/p14554190/memoedit.prg
memoedit.prg 
Teditor.prg:   http://www.nabble.com/file/p14554190/teditor.prg
teditor.prg 

MemoEdit() needs to be fixed a little to be exactly compatible with
Clipper.
Please note that for Multi-Window protocol I have to do away with Do
While
loop to process user input, instead I am returning fully configured
MemoEdit
object which is processed by window events. This is the only difference.
For
the time being I have kept out "user function" functionality and
hopefully
it will be ready by next weekend. 

Just play with the editor, click anywhere on memo text, resize,
maximize,
etc.

Regards
Pritpal Bedi, INDIA-USA
-- 
View this message in context:
http://www.nabble.com/Multi-Window-GT---III---MemoEdit%28%29-tp14554190p
14554190.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From rafa at tesipro.com  Thu Feb 21 06:43:43 2008
From: rafa at tesipro.com (Rafa)
Date: Thu Feb 21 06:44:32 2008
Subject: [Harbour] Multi-Window GT - III - MemoEdit()
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815E9AE@SRV02.deltain.net>
References: <14554190.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815E9AE@SRV02.deltain.net>
Message-ID: <47BD63EF.7020409@tesipro.com>

Massimo Belgrano escribi?:
> Is possible define a basic syntax for MULTI WINDOWS gt?
>
> like
>     DEFINE WINDOW Win_1 ;
>         AT 0,0 ;
>         WIDTH 40 ;
>         HEIGHT 20 ;
>         TITLE 'Hello World!'
>     END WINDOW
>     ACTIVATE MULTIPLE WINDOW Win_1
>
>   
MULTIPLE ? Under GTK+, official, not exist windows MDI.

Please, Can you see source code XWT from xHarbour ?
Giancarlo Niccolai begin this for GTK+ and API Win32.

The idea is similar the AWT Java, or not ?

Regards
Rafa Carmona

From randy at palmasdev.com  Thu Feb 21 08:31:41 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Thu Feb 21 08:30:40 2008
Subject: [Harbour] /NODEFAULTLIB:LIBCMT
In-Reply-To: <47BB2730.3070606@interia.pl>
References: <20080219140213.717B6ADC9@smtp.tor.pathcom.com>
	<47BB2730.3070606@interia.pl>
Message-ID: <20080221133037.CF5F1E813@smtp.tor.pathcom.com>

Hi Marek,

>BTW, posting more info about how you compile and link
>Harbour and your app (bat files, makefiles, libraries
>you link agains, etc.) would help more I guess.

The problem was that WinDock is single-threaded and built for LIBC.

I rebuilt Harbour without the -MT switch and this fixed the problem.

My question is: Is it ok to build the current Harbour version without 
the -MT switch so that it is single-threaded or is single-threaded 
support being dropped from Harbour?

TIA.

Regards,
Randy. 

From druzus at acn.waw.pl  Thu Feb 21 09:00:31 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Feb 21 09:00:41 2008
Subject: [Harbour] /NODEFAULTLIB:LIBCMT
In-Reply-To: <20080221133037.CF5F1E813@smtp.tor.pathcom.com>
References: <20080219140213.717B6ADC9@smtp.tor.pathcom.com>
	<47BB2730.3070606@interia.pl>
	<20080221133037.CF5F1E813@smtp.tor.pathcom.com>
Message-ID: <20080221140031.GA9906@localhost.localdomain>

On Thu, 21 Feb 2008, Randy Portnoff wrote:
> The problem was that WinDock is single-threaded and built for LIBC.
> I rebuilt Harbour without the -MT switch and this fixed the problem.
> My question is: Is it ok to build the current Harbour version without 
> the -MT switch so that it is single-threaded or is single-threaded 
> support being dropped from Harbour?

This should be optional. I hope Marek will add support for
compiling Harbour with ST only libraries. Anyhow I suggest
to keep the default for MT mode because some 3-rd party code
may use own threads (not at Harbour level) and ST LIBC may
break it. AFAIR MEDIATOR RDD uses threads. It will also help
to create common for MT and ST mode libraries what will reduce
possible problems in the future when we will have support for
.prg threads.

BTW Have you found the file which includes hbsetup.ch?

best regards,
Przemek
From randy at palmasdev.com  Thu Feb 21 09:21:55 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Thu Feb 21 09:20:54 2008
Subject: [Harbour] /NODEFAULTLIB:LIBCMT
In-Reply-To: <20080221140031.GA9906@localhost.localdomain>
References: <20080219140213.717B6ADC9@smtp.tor.pathcom.com>
	<47BB2730.3070606@interia.pl>
	<20080221133037.CF5F1E813@smtp.tor.pathcom.com>
	<20080221140031.GA9906@localhost.localdomain>
Message-ID: <20080221142049.DD581E9C2@smtp.tor.pathcom.com>

HI Przemek,

>This should be optional. I hope Marek will add support for
>compiling Harbour with ST only libraries. Anyhow I suggest
>to keep the default for MT mode because some 3-rd party code
>may use own threads (not at Harbour level) and ST LIBC may
>break it. AFAIR MEDIATOR RDD uses threads. It will also help
>to create common for MT and ST mode libraries what will reduce
>possible problems in the future when we will have support for
>.prg threads.

Actually, Mediator is able to create multiple threads within a 
single-threaded app - I'm not sure how they accomplish this but I 
know it works - My previous single-threaded builds of 
Mediator/Harbour (build 43, build 992 and build 993) actually are 
using 2 threads and the app works fine. In fact, I rebuilt the 
current Harbour build as ST with Mediator and it continues to create 
a second thread. I'm sure they would tell you how they did this if 
you ask them.

>BTW Have you found the file which includes hbsetup.ch?

Not yet, but I think it is something that I did when I tweaked my 
Harbour version - I will let you know when I find it...

Regards,
Randy.

From mpaliwoda at interia.pl  Thu Feb 21 09:41:59 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Thu Feb 21 09:42:09 2008
Subject: [Harbour] /NODEFAULTLIB:LIBCMT
In-Reply-To: <20080221140031.GA9906@localhost.localdomain>
References: <20080219140213.717B6ADC9@smtp.tor.pathcom.com>	<47BB2730.3070606@interia.pl>	<20080221133037.CF5F1E813@smtp.tor.pathcom.com>
	<20080221140031.GA9906@localhost.localdomain>
Message-ID: <47BD8DB7.3090200@interia.pl>

Hi Przemek,

>> The problem was that WinDock is single-threaded and built for LIBC.
>> I rebuilt Harbour without the -MT switch and this fixed the problem.
>> My question is: Is it ok to build the current Harbour version without 
>> the -MT switch so that it is single-threaded or is single-threaded 
>> support being dropped from Harbour?
> 
> This should be optional. I hope Marek will add support for
> compiling Harbour with ST only libraries. 

Yes, I will. In fact it *should* be optional from the begining,
but I simply missed it, because I do not create apps in ST mode.
I'll do that in a next couple of days (or maybe Viktor could do
it ealier (Viktor ?)).

> Anyhow I suggest
> to keep the default for MT mode because some 3-rd party code
> may use own threads (not at Harbour level) and ST LIBC may
> break it. AFAIR MEDIATOR RDD uses threads. It will also help
> to create common for MT and ST mode libraries what will reduce
> possible problems in the future when we will have support for
> .prg threads.
> 
> BTW Have you found the file which includes hbsetup.ch?


-- 

Marek


----------------------------------------------------------------------
Myslisz, ze nie ma sniegu? Sprawd? gdzie mozesz poszusowac na nartach
 >>> http://link.interia.pl/f1cfb

From druzus at acn.waw.pl  Thu Feb 21 10:01:45 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Feb 21 10:01:49 2008
Subject: [Harbour] /NODEFAULTLIB:LIBCMT
In-Reply-To: <20080221142049.DD581E9C2@smtp.tor.pathcom.com>
References: <20080219140213.717B6ADC9@smtp.tor.pathcom.com>
	<47BB2730.3070606@interia.pl>
	<20080221133037.CF5F1E813@smtp.tor.pathcom.com>
	<20080221140031.GA9906@localhost.localdomain>
	<20080221142049.DD581E9C2@smtp.tor.pathcom.com>
Message-ID: <20080221150145.GA11672@localhost.localdomain>

On Thu, 21 Feb 2008, Randy Portnoff wrote:
> Actually, Mediator is able to create multiple threads within a 
> single-threaded app - I'm not sure how they accomplish this but I 
> know it works - My previous single-threaded builds of 
> Mediator/Harbour (build 43, build 992 and build 993) actually are 
> using 2 threads and the app works fine. In fact, I rebuilt the 
> current Harbour build as ST with Mediator and it continues to create 
> a second thread. I'm sure they would tell you how they did this if 
> you ask them.

For sure your application may execute. But you do not know if such
application is safe. If you want to be sure you have to check
which functions in MSVC ST LIBC are not MT safe and then send this
list to OTC and ask which ones are used internally by mediator code.
If none then it's not a problem and mediator can be linked with both
ST and MT LIBC, if any then you can expect some random crashes.
Maybe very seldom but they can appear. Or in worser cases no crash
at all but internal data corruption or even data send to RDBMS.

Jacek, if you read this thread can you say if MEDIATOR needs MT safe
LIBC or not?

Anyhow some other 3-rd party libraries may need MS safe LIBC.

best regards,
Przemek
From randy at palmasdev.com  Thu Feb 21 10:45:31 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Thu Feb 21 10:44:28 2008
Subject: [Harbour] HBSETUP.CH
Message-ID: <20080221154424.C1E47AEFE@smtp.tor.pathcom.com>

Hi Przemek,

>BTW Have you found the file which includes hbsetup.ch?

Ok, I found it - For some reason, the Windows search tool was missing 
files!? Anyway, I used Windows-GREP and I found the reference to 
HBSETUP.CH as you suggested.

I am using the TGET.PRG from Beta 3 since I get the following r/t 
errors when I use the current TGET.PRG:

Main: #13 - Scope violation (protected)
Sub: #42 - BASE
Operation: GET:ISEDITABLE

So, I removed the reference to HBSETUP.CH in my TGET.PRG and it still 
built ok and the build errors no longer occur.

BTW, is there a way to get around these scope errors in the current TGET.PRG?

Regards,
Randy.

From randy at palmasdev.com  Thu Feb 21 11:21:03 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Thu Feb 21 11:20:13 2008
Subject: [Harbour] HBSETUP.CH (disregard)
In-Reply-To: <20080221154424.C1E47AEFE@smtp.tor.pathcom.com>
References: <20080221154424.C1E47AEFE@smtp.tor.pathcom.com>
Message-ID: <20080221162010.94CFCAF34@smtp.tor.pathcom.com>

Hi Przemek

I found my answer to this r/t error - Please disregard my last post.

Regards,
Randy

At 10:45 AM 2/21/2008, you wrote:
>Hi Przemek,
>
>>BTW Have you found the file which includes hbsetup.ch?
>
>Ok, I found it - For some reason, the Windows search tool was 
>missing files!? Anyway, I used Windows-GREP and I found the 
>reference to HBSETUP.CH as you suggested.
>
>I am using the TGET.PRG from Beta 3 since I get the following r/t 
>errors when I use the current TGET.PRG:
>
>Main: #13 - Scope violation (protected)
>Sub: #42 - BASE
>Operation: GET:ISEDITABLE
>
>So, I removed the reference to HBSETUP.CH in my TGET.PRG and it 
>still built ok and the build errors no longer occur.
>
>BTW, is there a way to get around these scope errors in the current TGET.PRG?
>
>Regards,
>Randy.
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour

From mpaliwoda at interia.pl  Thu Feb 21 16:17:35 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Thu Feb 21 16:18:00 2008
Subject: [Harbour] 2008-02-21 22:17 UTC+0100 Marek Paliwoda (mpaliwoda at
	interia pl)
Message-ID: <fpkppi$f7o$1@ger.gmane.org>

2008-02-21 22:17 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)
   * harbour/make_vc.mak
     + Added a possiblity to compile harbour in ST or MT mode by using
       an environment variable called HB_BUILD_ST. Setting HB_BUILD_ST
       to yes, causes Harbour+RTL+VM to be built in ST mode. Otherwise
       MT mode is used.

-- 

     Marek Paliwoda
mpaliwoda at interia pl

From mpaliwoda at interia.pl  Thu Feb 21 16:21:58 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Thu Feb 21 16:25:10 2008
Subject: [Harbour] [OT] Did anyone play with anyLinux ?
Message-ID: <fpkq1o$ga4$1@ger.gmane.org>

Hi all,

Did anyone has a chance to play with "Linux in Windows"
called "anyLinux" - http://www.andlinux.org ?

AFAIK it's something like Wine for Linux, but the other
way around - it allows to run Linux programs in Windows,
by running Linux kernel as a native Windows program.

Anybody has any experience with it ?

-- 

Marek

From druzus at acn.waw.pl  Thu Feb 21 18:20:37 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Feb 21 18:20:43 2008
Subject: [Harbour] 2008-02-22 00:20 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200802212320.m1LNKbKT014451@31-mo5-4.acn.waw.pl>

2008-02-22 00:20 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/cdpapi.c
    ! fixed unicode values for control codes in default CP437 unicode table
  * harbour/source/rtl/gtchrmap.c
    ! added missing default translation of chr(155) - it's control code
      on most of terminals and should not be shown in non UFT-8 mode
  * harbour/source/rtl/gttrm/gttrm.c
    ! do not use alternate character set for box drawing in UTF-8 mode
      New Linux consoles disable UTF-8 mode when alternate character set
      is enabled
  * harbour/contrib/hbct/ctwin.c
  * harbour/contrib/hbct/ctwin.h
  * harbour/contrib/hbct/ctwfunc.c
    * overload ReadKey() method for future window moving when scroll lock
      is  set and for KEYREAD() implementation. 
    * store real last key value in CTWIN GT.

best regards
Przemek
From druzus at acn.waw.pl  Thu Feb 21 21:43:16 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Feb 21 21:43:23 2008
Subject: [Harbour] 2008-02-22 03:42 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200802220243.m1M2hGIa007407@31-mo5-4.acn.waw.pl>

2008-02-22 03:42 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/hb-func.sh
    * added -xhgtk switch for linking with xHGtk library

  * harbour/source/pp/hbppgen.c
  * harbour/utils/hbpp/hbpp.c
    ! added missing #include "hbset.h"

best regards
Przemek
From bedipritpal at hotmail.com  Fri Feb 22 01:04:59 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Feb 22 01:05:03 2008
Subject: [Harbour] Multi-Window GT - III - MemoEdit()
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815E9AE@SRV02.deltain.net>
References: <14554190.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815E9AE@SRV02.deltain.net>
Message-ID: <15628372.post@talk.nabble.com>


Hi


Massimo Belgrano wrote:
> 
> Is possible define a basic syntax for MULTI WINDOWS gt?
> 
> like
>     DEFINE WINDOW Win_1 ;
>         AT 0,0 ;
>         WIDTH 40 ;
>         HEIGHT 20 ;
>         TITLE 'Hello World!'
>     END WINDOW
>     ACTIVATE MULTIPLE WINDOW Win_1
> 

It should not be a difficult task. But first we need to introduce this
concept in Harbour in a proper manner. I am waiting for the release 1.0.
After will propose the new set of api calls which will not interfere with
existing code. Just including a .CH will do the trick. You will be able to
switch existing with new protocol without changing your code.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Multi-Window-GT---III---MemoEdit%28%29-tp14554190p15628372.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From ptucker at sympatico.ca  Fri Feb 22 07:44:18 2008
From: ptucker at sympatico.ca (Paul Tucker)
Date: Fri Feb 22 07:44:26 2008
Subject: [Harbour] 2008-02-21 22:17 UTC+0100 Marek Paliwoda (mpaliwoda
	atinteria pl)
References: <fpkppi$f7o$1@ger.gmane.org>
Message-ID: <BAYC1-PASMTP09012A0D45964DA7F6D3ADDF1D0@CEZ.ICE>



> 2008-02-21 22:17 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)
>   * harbour/make_vc.mak
>     + Added a possiblity to compile harbour in ST or MT mode by using
>       an environment variable called HB_BUILD_ST. Setting HB_BUILD_ST
>       to yes, causes Harbour+RTL+VM to be built in ST mode. Otherwise
>       MT mode is used.
Thanks!

It should be noted that current MSVC versions do not ship with LIBC, so ST 
is only for earlier MSVC version.

Paul 

From mpaliwoda at interia.pl  Fri Feb 22 16:28:08 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Feb 22 16:29:10 2008
Subject: [Harbour] 2008-02-22 22:28 UTC+0100 Marek Paliwoda (mpaliwoda at
	interia pl)
Message-ID: <fpnep8$u6e$1@ger.gmane.org>

2008-02-22 22:28 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)
   * harbour/make_b32.mak
     * Synchronized with make_vc.mak regarding HB_BUILD_ST and HB_BUILD_MODE
       environment usage. There is still a difference between make_b32.mak
       and make_vc.mak, because under BCC - ST mode is default, while under
       MSVC - MT mode is default. To use MT mode under BCC one needs to
       set HB_BUILD_ST to something different than a word "yes". For example:
       set HB_BUILD_ST=no. The difference comes from the fact that so far
       BCC build has always been done in ST mode. It will be changed after
       a 1.0 release. Please note that harbour.dll is *always* built in MT
       mode under BCC and MSVC.

   * harbour/make_vc.mak
     ! Forced MT mode for harbour.dll
     * Minor formating

   * harbour/contrib/mtpl_vc.mak
     ! Fixed compilation using ST mode

   * harbour/contrib/mtpl_b32.mak
     ! Fixed compilation of CPP files
     + Added ST/MT handling logic

   * harbour/contrib/hbziparch/make_b32.bat
     ! Fixed compilation on some BCC instalations

-- 

     Marek Paliwoda
mpaliwoda at interia pl

From mhsabado at gmail.com  Sat Feb 23 00:34:34 2008
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Sat Feb 23 00:35:20 2008
Subject: [Harbour] FOpen() Problem After 2008-02-22 22:28 UTC+0100
Message-ID: <47BFB06A.6060501@gmail.com>

Hi,

I have encountered below error message when running my program after 
2008-02-22 22:28 UTC+0100.  I'm using BCC58.
Any hint what I might have missed?
///////////////////////////////////////////////////////////////////
Error BASE/2021  Argument error: FOPEN
Called from FOPEN(0)
Called from FILECOPY(95)
//////////////////////////////////////////////////////////////////

Thanks,
Mario


From mbelgrano at deltain.it  Sat Feb 23 07:21:37 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Feb 23 07:22:10 2008
Subject: [Harbour] will [x]harbour be cool
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815E9BF@SRV02.deltain.net>

VFP Studio's Code Editor (http://www.vfpstudio.com/) , is made 
possible via a Language Service in Visual Studio 2008, 
VFP Studio provides some significant enhancements when compared to the 
editor included in VFP 9.0 including outlining, Quick Info, 
Intellisense for user-defined classes, line numbers, word wrap, VS- 
style navigation bar, improved Code Snippets and various other 
features . 

http://www.sweetpotatosoftware.com/SPSBlog/ 


i suggest [x]harbour people made a joint venture with Craig Boyd & 
Bo Durban the makers of  VFP Studio 


Bo Durban is the CEO for Moxie Data, Inc. specializing in the 
development of enhanced database and reporting tools for VFP 
developers. He is also the project manager for the GDIPlusX open 
source project on VFPX. 


Craig Boyd is the CEO of SweetPotato Software, Inc. (SPS). Having 
worked in every version of FoxPro since 2.5, he is an avid and 
experienced Visual FoxPro developer. He is also the creator and host 
of the popular SPS Weblog, which contains some great Visual FoxPro 
related content at www.sweetpotatosoftware.com/spsblog. Craig has 
developed a number of applications for US and International clients, 
and he specializes in helping other software companies meet 
challenging deadlines, solve complex problems, and upgrade their 
project interfaces. When he's not working on client projects, writing 
blog entries, or helping members of the Visual FoxPro Community out on 
the forums, he writes articles geared toward Visual FoxPro developers 
for IT magazines 



Massimo Belgrano
Albo Nazionale Informatici Professionisti n? 2620
Socio n? 2843 Associazione Informatici Professionisti

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.? http://www.deltain.it 
Via Torelli , 31 - 28100 Novara - Tel: 0321/30281
?

From druzus at acn.waw.pl  Sat Feb 23 07:23:18 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Feb 23 07:24:12 2008
Subject: [Harbour] FOpen() Problem After 2008-02-22 22:28 UTC+0100
In-Reply-To: <47BFB06A.6060501@gmail.com>
References: <47BFB06A.6060501@gmail.com>
Message-ID: <20080223122318.GA5165@localhost.localdomain>

On Sat, 23 Feb 2008, Mario H. Sabado wrote:
> I have encountered below error message when running my program after 
> 2008-02-22 22:28 UTC+0100.  I'm using BCC58.
> Any hint what I might have missed?

The first parameter you passed to FILECOPY() wasn't string item.

best regards,
Przemek
From jorgeagiraldo at hotmail.com  Sat Feb 23 07:39:54 2008
From: jorgeagiraldo at hotmail.com (Jorge A. Giraldo)
Date: Sat Feb 23 07:40:16 2008
Subject: [Harbour] Dbu problems
Message-ID: <BAY136-W29430BC90FB21BE06DF23DA11E0@phx.gbl>


Hi All,

Compiling DBU you could see:

- The browse uses one line more overwriting the box around it.
- When using an index and inserting a new record the browse is not correctly refreshed.  The top position begins in the wrong row.

Thank you in advance.

Jorge A.


_________________________________________________________________
Explore the seven wonders of the world
http://search.msn.com/results.aspx?q=7+wonders+world&mkt=en-US&form=QBRE
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080223/52f60298/attachment.html
From cigcor at hotmail.com  Sat Feb 23 10:56:56 2008
From: cigcor at hotmail.com (dotNET future developer)
Date: Sat Feb 23 11:06:06 2008
Subject: [Harbour] will [x]harbour be cool
References: <AFB948164110ED43B5EB849E8DEEF03815E9BF@SRV02.deltain.net>
Message-ID: <BLU118-DAV13D39022A5EB5E4C51373EDC1E0@phx.gbl>

Massimo,
Will Visual dBSee www.visualdbsee.it generate code source in xHarbour 
language?
This best tool is made in your country. You can contact they?
S?rgio

----- Original Message ----- 
From: "Massimo Belgrano" <mbelgrano@deltain.it>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Saturday, February 23, 2008 9:21 AM
Subject: [Harbour] will [x]harbour be cool


VFP Studio's Code Editor (http://www.vfpstudio.com/) , is made
possible via a Language Service in Visual Studio 2008,
VFP Studio provides some significant enhancements when compared to the
editor included in VFP 9.0 including outlining, Quick Info,
Intellisense for user-defined classes, line numbers, word wrap, VS-
style navigation bar, improved Code Snippets and various other
features .

http://www.sweetpotatosoftware.com/SPSBlog/


i suggest [x]harbour people made a joint venture with Craig Boyd &
Bo Durban the makers of  VFP Studio


Bo Durban is the CEO for Moxie Data, Inc. specializing in the
development of enhanced database and reporting tools for VFP
developers. He is also the project manager for the GDIPlusX open
source project on VFPX.


Craig Boyd is the CEO of SweetPotato Software, Inc. (SPS). Having
worked in every version of FoxPro since 2.5, he is an avid and
experienced Visual FoxPro developer. He is also the creator and host
of the popular SPS Weblog, which contains some great Visual FoxPro
related content at www.sweetpotatosoftware.com/spsblog. Craig has
developed a number of applications for US and International clients,
and he specializes in helping other software companies meet
challenging deadlines, solve complex problems, and upgrade their
project interfaces. When he's not working on client projects, writing
blog entries, or helping members of the Visual FoxPro Community out on
the forums, he writes articles geared toward Visual FoxPro developers
for IT magazines



Massimo Belgrano
Albo Nazionale Informatici Professionisti n? 2620
Socio n? 2843 Associazione Informatici Professionisti

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l. http://www.deltain.it
Via Torelli , 31 - 28100 Novara - Tel: 0321/30281


_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Sat Feb 23 12:18:28 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Feb 23 12:32:21 2008
Subject: [Harbour] will [x]harbour be cool
In-Reply-To: <BLU118-DAV13D39022A5EB5E4C51373EDC1E0@phx.gbl>
References: <AFB948164110ED43B5EB849E8DEEF03815E9BF@SRV02.deltain.net>
	<BLU118-DAV13D39022A5EB5E4C51373EDC1E0@phx.gbl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815E9C0@SRV02.deltain.net>

I know visual dbsee it is a good product but nothing like vfp studio 
Dbsee is case customized for xbase++
It doesn't have same Intellisense productivity of visual studio 2008

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of dotNET future developer
Sent: Saturday, February 23, 2008 4:57 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] will [x]harbour be cool

Massimo,
Will Visual dBSee www.visualdbsee.it generate code source in xHarbour 
language?
This best tool is made in your country. You can contact they?
S?rgio

----- Original Message ----- 
From: "Massimo Belgrano" <mbelgrano@deltain.it>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Saturday, February 23, 2008 9:21 AM
Subject: [Harbour] will [x]harbour be cool


VFP Studio's Code Editor (http://www.vfpstudio.com/) , is made
possible via a Language Service in Visual Studio 2008,
VFP Studio provides some significant enhancements when compared to the
editor included in VFP 9.0 including outlining, Quick Info,
Intellisense for user-defined classes, line numbers, word wrap, VS-
style navigation bar, improved Code Snippets and various other
features .

http://www.sweetpotatosoftware.com/SPSBlog/


i suggest [x]harbour people made a joint venture with Craig Boyd &
Bo Durban the makers of  VFP Studio


Bo Durban is the CEO for Moxie Data, Inc. specializing in the
development of enhanced database and reporting tools for VFP
developers. He is also the project manager for the GDIPlusX open
source project on VFPX.


Craig Boyd is the CEO of SweetPotato Software, Inc. (SPS). Having
worked in every version of FoxPro since 2.5, he is an avid and
experienced Visual FoxPro developer. He is also the creator and host
of the popular SPS Weblog, which contains some great Visual FoxPro
related content at www.sweetpotatosoftware.com/spsblog. Craig has
developed a number of applications for US and International clients,
and he specializes in helping other software companies meet
challenging deadlines, solve complex problems, and upgrade their
project interfaces. When he's not working on client projects, writing
blog entries, or helping members of the Visual FoxPro Community out on
the forums, he writes articles geared toward Visual FoxPro developers
for IT magazines



Massimo Belgrano
Albo Nazionale Informatici Professionisti n? 2620
Socio n? 2843 Associazione Informatici Professionisti

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l. http://www.deltain.it
Via Torelli , 31 - 28100 Novara - Tel: 0321/30281


_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mhsabado at gmail.com  Sat Feb 23 16:52:26 2008
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Sat Feb 23 16:52:46 2008
Subject: [Harbour] Dbu problems
In-Reply-To: <47c05dbb.1a01360a.6034.0f90SMTPIN_ADDED@mx.google.com>
References: <47c05dbb.1a01360a.6034.0f90SMTPIN_ADDED@mx.google.com>
Message-ID: <47C0959A.1030904@gmail.com>

>
> ------------------------------
>
> Message: 5
> Date: Sat, 23 Feb 2008 12:39:54 +0000
> From: "Jorge A. Giraldo" <jorgeagiraldo@hotmail.com>
> Subject: [Harbour] Dbu problems
> To: <harbour@harbour-project.org>
> Message-ID: <BAY136-W29430BC90FB21BE06DF23DA11E0@phx.gbl>
> Content-Type: text/plain; charset="iso-8859-1"
>
>
> Hi All,
>
> Compiling DBU you could see:
>
> - The browse uses one line more overwriting the box around it.
> - When using an index and inserting a new record the browse is not correctly refreshed.  The top position begins in the wrong row.
>
>   
Hi Jorge,

Few days ago, Jerry Finuliar (jerryfinuliar@yahoo.com) had posted here 
his tbrowse fixes re alignment problem. I have tested it with DBU and my 
console application and works fine so far.  Maybe you can request him to 
send you a copy while no official fix is committed to SVN repository.

Regards,
Mario



From jorgeagiraldo at hotmail.com  Sat Feb 23 19:23:37 2008
From: jorgeagiraldo at hotmail.com (Jorge A. Giraldo)
Date: Sat Feb 23 19:23:41 2008
Subject: [Harbour] Dbu problems
In-Reply-To: <47C0959A.1030904@gmail.com>
References: <47c05dbb.1a01360a.6034.0f90SMTPIN_ADDED@mx.google.com>
	<47C0959A.1030904@gmail.com>
Message-ID: <BAY136-W232EB486CDF7A1C6B91AA7A11F0@phx.gbl>


Mario,

I have requested it to Jerry but it seems he is not online right now, could you send it to me please?

Thanks,

Jorge A.


> Date: Sun, 24 Feb 2008 05:52:26 +0800
> From: mhsabado@gmail.com
> To: harbour@harbour-project.org
> Subject: Re: [Harbour] Dbu problems
> 
> >
> > ------------------------------
> >
> > Message: 5
> > Date: Sat, 23 Feb 2008 12:39:54 +0000
> > From: "Jorge A. Giraldo" <jorgeagiraldo@hotmail.com>
> > Subject: [Harbour] Dbu problems
> > To: <harbour@harbour-project.org>
> > Message-ID: <BAY136-W29430BC90FB21BE06DF23DA11E0@phx.gbl>
> > Content-Type: text/plain; charset="iso-8859-1"
> >
> >
> > Hi All,
> >
> > Compiling DBU you could see:
> >
> > - The browse uses one line more overwriting the box around it.
> > - When using an index and inserting a new record the browse is not correctly refreshed.  The top position begins in the wrong row.
> >
> >   
> Hi Jorge,
> 
> Few days ago, Jerry Finuliar (jerryfinuliar@yahoo.com) had posted here 
> his tbrowse fixes re alignment problem. I have tested it with DBU and my 
> console application and works fine so far.  Maybe you can request him to 
> send you a copy while no official fix is committed to SVN repository.
> 
> Regards,
> Mario
> 
> 
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_________________________________________________________________
Explore the seven wonders of the world
http://search.msn.com/results.aspx?q=7+wonders+world&mkt=en-US&form=QBRE
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080224/9372e554/attachment.html
From cigcor at hotmail.com  Sat Feb 23 21:31:18 2008
From: cigcor at hotmail.com (dotNET future developer)
Date: Sat Feb 23 21:31:28 2008
Subject: [Harbour] will [x]harbour be cool
References: <AFB948164110ED43B5EB849E8DEEF03815E9BF@SRV02.deltain.net><BLU118-DAV13D39022A5EB5E4C51373EDC1E0@phx.gbl>
	<AFB948164110ED43B5EB849E8DEEF03815E9C0@SRV02.deltain.net>
Message-ID: <BLU118-DAV41668C137850FF8CD6B8ADC1F0@phx.gbl>

In past, I use dBSee for CA-Clipper, for CA-VO and for MSC.
Maybe a few adaptation for xHarbour...
S?rgio

----- Original Message ----- 
From: "Massimo Belgrano" <mbelgrano@deltain.it>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Saturday, February 23, 2008 2:18 PM
Subject: RE: [Harbour] will [x]harbour be cool


I know visual dbsee it is a good product but nothing like vfp studio
Dbsee is case customized for xbase++
It doesn't have same Intellisense productivity of visual studio 2008

-----Original Message-----
From: harbour-bounces@harbour-project.org 
[mailto:harbour-bounces@harbour-project.org] On Behalf Of dotNET future 
developer
Sent: Saturday, February 23, 2008 4:57 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] will [x]harbour be cool

Massimo,
Will Visual dBSee www.visualdbsee.it generate code source in xHarbour
language?
This best tool is made in your country. You can contact they?
S?rgio

----- Original Message ----- 
From: "Massimo Belgrano" <mbelgrano@deltain.it>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Saturday, February 23, 2008 9:21 AM
Subject: [Harbour] will [x]harbour be cool


VFP Studio's Code Editor (http://www.vfpstudio.com/) , is made
possible via a Language Service in Visual Studio 2008,
VFP Studio provides some significant enhancements when compared to the
editor included in VFP 9.0 including outlining, Quick Info,
Intellisense for user-defined classes, line numbers, word wrap, VS-
style navigation bar, improved Code Snippets and various other
features .

http://www.sweetpotatosoftware.com/SPSBlog/


i suggest [x]harbour people made a joint venture with Craig Boyd &
Bo Durban the makers of  VFP Studio


Bo Durban is the CEO for Moxie Data, Inc. specializing in the
development of enhanced database and reporting tools for VFP
developers. He is also the project manager for the GDIPlusX open
source project on VFPX.


Craig Boyd is the CEO of SweetPotato Software, Inc. (SPS). Having
worked in every version of FoxPro since 2.5, he is an avid and
experienced Visual FoxPro developer. He is also the creator and host
of the popular SPS Weblog, which contains some great Visual FoxPro
related content at www.sweetpotatosoftware.com/spsblog. Craig has
developed a number of applications for US and International clients,
and he specializes in helping other software companies meet
challenging deadlines, solve complex problems, and upgrade their
project interfaces. When he's not working on client projects, writing
blog entries, or helping members of the Visual FoxPro Community out on
the forums, he writes articles geared toward Visual FoxPro developers
for IT magazines



Massimo Belgrano
Albo Nazionale Informatici Professionisti n? 2620
Socio n? 2843 Associazione Informatici Professionisti

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l. http://www.deltain.it
Via Torelli , 31 - 28100 Novara - Tel: 0321/30281


_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From jorgeagiraldo at hotmail.com  Sun Feb 24 21:45:36 2008
From: jorgeagiraldo at hotmail.com (Jorge A. Giraldo)
Date: Sun Feb 24 21:45:40 2008
Subject: [Harbour] Dbu problems
In-Reply-To: <BAY136-W232EB486CDF7A1C6B91AA7A11F0@phx.gbl>
References: <47c05dbb.1a01360a.6034.0f90SMTPIN_ADDED@mx.google.com>
	<47C0959A.1030904@gmail.com>
	<BAY136-W232EB486CDF7A1C6B91AA7A11F0@phx.gbl>
Message-ID: <BAY136-W3C5D4543123F866A0CBC8A1180@phx.gbl>


Ok, I have the tbrowse fix.  It solves the line overwritten at the bottom, but not the appending record problem... Any way it would be nice if you attach the new tbrowse.prg with the changes so others can see  the fix and apply them. 

I also can see that using F3 to edit the index, the index expression is missing the first two characters.

Especially the record appending problem gives trouble in two apps where I use TBrowse as a Database mainteinance rutine.

Regards,

Jorge A.

From: jorgeagiraldo@hotmail.com
To: harbour@harbour-project.org
Subject: RE: [Harbour] Dbu problems
Date: Sun, 24 Feb 2008 00:23:37 +0000








Mario,

I have requested it to Jerry but it seems he is not online right now, could you send it to me please?

Thanks,

Jorge A.


> Date: Sun, 24 Feb 2008 05:52:26 +0800
> From: mhsabado@gmail.com
> To: harbour@harbour-project.org
> Subject: Re: [Harbour] Dbu problems
> 
> >
> > ------------------------------
> >
> > Message: 5
> > Date: Sat, 23 Feb 2008 12:39:54 +0000
> > From: "Jorge A. Giraldo" <jorgeagiraldo@hotmail.com>
> > Subject: [Harbour] Dbu problems
> > To: <harbour@harbour-project.org>
> > Message-ID: <BAY136-W29430BC90FB21BE06DF23DA11E0@phx.gbl>
> > Content-Type: text/plain; charset="iso-8859-1"
> >
> >
> > Hi All,
> >
> > Compiling DBU you could see:
> >
> > - The browse uses one line more overwriting the box around it.
> > - When using an index and inserting a new record the browse is not correctly refreshed.  The top position begins in the wrong row.
> >
> >   
> Hi Jorge,
> 
> Few days ago, Jerry Finuliar (jerryfinuliar@yahoo.com) had posted here 
> his tbrowse fixes re alignment problem. I have tested it with DBU and my 
> console application and works fine so far.  Maybe you can request him to 
> send you a copy while no official fix is committed to SVN repository.
> 
> Regards,
> Mario
> 
> 
Explore the seven wonders of the world Learn more!

_________________________________________________________________
Invite your mail contacts to join your friends list with Windows Live Spaces. It's easy!
http://spaces.live.com/spacesapi.aspx?wx_action=create&wx_url=/friends.aspx&mkt=en-us
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080225/6c37eba5/attachment.html
From Jacek.Potempa at otc.com.pl  Mon Feb 25 12:23:19 2008
From: Jacek.Potempa at otc.com.pl (Jacek Potempa)
Date: Mon Feb 25 12:18:49 2008
Subject: [Harbour] /NODEFAULTLIB:LIBCMT
Message-ID: <47C2F987.9040602@otc.com.pl>

Przemek,

 >For sure your application may execute. But you do not know if such 
application is safe. If you want to be
 >sure you have to check which functions in MSVC ST LIBC are not MT safe 
and then send this list to OTC
 >and ask which ones are used internally by mediator code. If none then 
it's not a problem and mediator can be
 >linked with both ST and MT LIBC, if any then you can expect some 
random crashes. Maybe very seldom
 >but they can appear. Or in worser cases no crash at all but internal 
data corruption or even data send to RDBMS.

 >Jacek, if you read this thread can you say if MEDIATOR needs MT safe 
LIBC or not?

Sorry for delay.

For Mediator client we do not need libcmt.lib. While we create second 
thread, it is created via WIN32 API (not libcmt.lib function). We also 
do all the required synchronization, so there is no risk of  
concurrently calling a single-threaded variant of function from libc.lib.

Regards,
Jacek
From druzus at acn.waw.pl  Mon Feb 25 13:14:07 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Feb 25 13:14:31 2008
Subject: [Harbour] /NODEFAULTLIB:LIBCMT
In-Reply-To: <47C2F987.9040602@otc.com.pl>
References: <47C2F987.9040602@otc.com.pl>
Message-ID: <20080225181407.GA7536@localhost.localdomain>

On Mon, 25 Feb 2008, Jacek Potempa wrote:
> Sorry for delay.

NP.

> For Mediator client we do not need libcmt.lib. While we create second 
> thread, it is created via WIN32 API (not libcmt.lib function). We also 
> do all the required synchronization, so there is no risk of  
> concurrently calling a single-threaded variant of function from libc.lib.

Thank you for information. I also guess that you do not use any memory
allocation by hb_xgrab()/hb_xfree() in your threads. Please remember that
some Harbour functions call internally libc functions what also can be
source of problems so your code should use clean WIN32 API only without
any libc functions or Harbour ones which may executes libc code.

best regards,
Przemek
From randy at palmasdev.com  Wed Feb 27 14:44:34 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Wed Feb 27 14:43:35 2008
Subject: [Harbour] Compatible versions of MSVC
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815E9BF@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815E9BF@SRV02.deltain.net>
Message-ID: <20080227194328.14B40ECAC@smtp.tor.pathcom.com>

Hi all,

Is Harbour compatible with MSVC in Visual Studio 2005 and 2008?

TIA.

Regards,
Randy.

From mpaliwoda at interia.pl  Wed Feb 27 16:12:16 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Feb 27 16:12:29 2008
Subject: [Harbour] Compatible versions of MSVC
In-Reply-To: <20080227194328.14B40ECAC@smtp.tor.pathcom.com>
References: <AFB948164110ED43B5EB849E8DEEF03815E9BF@SRV02.deltain.net>
	<20080227194328.14B40ECAC@smtp.tor.pathcom.com>
Message-ID: <47C5D230.7090905@interia.pl>

Randy,

> Is Harbour compatible with MSVC in Visual Studio 2005 and 2008?

It compiles and works ok when compiled with VC++ from Vs2005. It
*should* compile and run ok with VC++ from Vs2008, although I did
not perform any tests with VC++ from Vs2008. If I find some time
I'll try to verify Vs2008 status (please note I do not know how
Express versions behave however).

-- 

Marek

---------------------------------------------------------------------- 	
Prosty kredyt na wszystkie potrzeby. 
Od 1000 zl do 120 000 zl. 
Bez poreczycieli i zabezpieczen >>> http://link.interia.pl/f1d12

From randy at palmasdev.com  Wed Feb 27 17:09:27 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Wed Feb 27 17:08:33 2008
Subject: [Harbour] Compatible versions of MSVC
In-Reply-To: <47C5D230.7090905@interia.pl>
References: <AFB948164110ED43B5EB849E8DEEF03815E9BF@SRV02.deltain.net>
	<20080227194328.14B40ECAC@smtp.tor.pathcom.com>
	<47C5D230.7090905@interia.pl>
Message-ID: <20080227220830.DEC63E926@smtp.tor.pathcom.com>

Thanks - I guess it's safer to use 2005 since it's probably more stable.

At 04:12 PM 2/27/2008, you wrote:
>Randy,
>
>>Is Harbour compatible with MSVC in Visual Studio 2005 and 2008?
>
>It compiles and works ok when compiled with VC++ from Vs2005. It
>*should* compile and run ok with VC++ from Vs2008, although I did
>not perform any tests with VC++ from Vs2008. If I find some time
>I'll try to verify Vs2008 status (please note I do not know how
>Express versions behave however).
>
>--
>
>Marek
>
>----------------------------------------------------------------------
>Prosty kredyt na wszystkie potrzeby. Od 1000 zl do 120 000 zl. Bez 
>poreczycieli i zabezpieczen >>> http://link.interia.pl/f1d12
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>

From miguelangel at marchuet.net  Fri Feb 29 10:28:22 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Fri Feb 29 10:28:19 2008
Subject: [Harbour] New version of ourxdbu uploaded
Message-ID: <47C82496.7070403@marchuet.net>

I uploaded new version of ourxdbu FREE to

www.xharbour.com/xHC

+ it now supports Letto db Server
+ Edit indexes.
+ support for xlsx files

Best regards,
Miguel Angel Marchuet
From toninhofwi at yahoo.com.br  Fri Feb 29 12:21:25 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Fri Feb 29 12:43:15 2008
Subject: [Harbour] Bug with ADS and DOUBLE fields
Message-ID: <vuegs3tbvn9149p8lre1a33t575p5i092j@4ax.com>

Hi ppl,

With ADS, if the double field have large values like 1234567890123,
harbour displays ******** instead a value.

If I use str(field,20) the value is displayed correct.

A sample is in: http://www.fwi.com.br/toninho/adsdouble.zip


Thanks and best regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 


From druzus at acn.waw.pl  Fri Feb 29 15:13:05 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Feb 29 15:13:42 2008
Subject: [Harbour] Bug with ADS and DOUBLE fields
In-Reply-To: <vuegs3tbvn9149p8lre1a33t575p5i092j@4ax.com>
References: <vuegs3tbvn9149p8lre1a33t575p5i092j@4ax.com>
Message-ID: <20080229201305.GA6269@localhost.localdomain>

On Fri, 29 Feb 2008, Toninho@fwi wrote:
> Hi ppl,
> With ADS, if the double field have large values like 1234567890123,
> harbour displays ******** instead a value.
> If I use str(field,20) the value is displayed correct.

Not only double. In ADS* RDDs non of numeric binary field sizes is
translated to valid size for decimal representation, f.e. the same
is for short ("I"/"short",2,0) and integer ("I"/"integer",4,0) when
the decimal representation will be bigger then 2 or 4 digits.
In each numeric item we keep default size for str() formating and
ADS RDDs sets this size to binary field size instead of maximum size
for binary representation. AFAIR this problems exists from the beginning.
It's only formatting problem when you do not explicitly set the size
but if you want to fix it then you should set valid size in adsGetValue()
function. It will be few lines only. You can take maximum sizes for all
types from dbf1.c or other RDDs I was working on (f.e. s_uiNumLength
translation table in delim1.c can be used for all integer sizes in
range 1,8)

Best regards,
Przemek
