From harbour.01 at syenar.hu  Mon Sep  1 03:37:45 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep  1 03:38:00 2008
Subject: [Harbour] Error compiling hbziparch with CodeGear 5.9
In-Reply-To: <o1fmb491ashidk7tnvil3ieijm1it4qp8g@4ax.com>
References: <o1fmb491ashidk7tnvil3ieijm1it4qp8g@4ax.com>
Message-ID: <0D504178-EF87-4BC2-879A-BD819847D9B3@syenar.hu>

Hi Toninho,

BTW, is there a free version of this compiler?

Please try with the supplied make_b32.bat file to
build this contrib, it contains some switches that
may help.

[ Otherwise I'd suggest to upgrade to hbmzip, which does
the same job but in C and in a non-obstructive way,
it's also significantly smaller. ]

Brgds,
Viktor

On 2008.09.01., at 2:55, Toninho@fwi wrote:

> MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
> 	bcc32.exe -c -q -d -w -w-sig- -O2 -I..\..\include -DHB_GUI
> -DHB_NO_TRACE -DHB_FM_STATISTICS_OFF -DADS_LIB_VERSION=700
> -DHB_HASH_MSG_ITEMS -Iinclude -D_RWSTD_NO_NEW_HEADER   -P
> -o..\..\obj\b32\ziparchive.obj .\ziparchive.cpp
> .\ziparchive.cpp:
> Warning W8027 include\zipstring.h 165: Functions containing do are not
> expanded inline
> Warning W8027 include\zipstring.h 277: Functions containing for are
> not expanded inline
> Warning W8026 include\zipstring.h 289: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipstring.h 289: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipstring.h 289: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipstring.h 289: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipstring.h 289: Functions with exception
> specifications are not expanded inline
> Warning W8027 include\zipstring.h 216: Functions containing some
> return statements are not expanded inline in function
> CZipString::Left(int) const
> Warning W8027 include\zipstring.h 220: Functions containing some
> return statements are not expanded inline in function
> CZipString::Right(int) const
> Warning W8027 include\zipstring.h 222: Functions containing some
> return statements are not expanded inline in function
> CZipString::Mid(int) const
> Warning W8027 include\zipstring.h 223: Functions containing some
> return statements are not expanded inline in function
> CZipString::Mid(int,int) const
> Error E2113 include\zipexception.h 189: Virtual function
> '~CZipException::CZipException()' conflicts with base class
> 'std::exception'
> Warning W8026 include\zipexception.h 223: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipabstractfile.h 50: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipabstractfile.h 50: Functions with exception
> specifications are not expanded inline
> Warning W8017 E:\harbour\bcc55\include\stdint.h 77: Redefinition of
> 'INT16_MIN' is not identical
> Warning W8017 E:\harbour\bcc55\include\stdint.h 78: Redefinition of
> 'INT32_MIN' is not identical
> Warning W8017 E:\harbour\bcc55\include\stdint.h 79: Redefinition of
> 'INT64_MIN' is not identical
> Warning W8017 E:\harbour\bcc55\include\stdint.h 82: Redefinition of
> 'INT16_MAX' is not identical
> Warning W8017 E:\harbour\bcc55\include\stdint.h 83: Redefinition of
> 'INT32_MAX' is not identical
> Warning W8017 E:\harbour\bcc55\include\stdint.h 84: Redefinition of
> 'INT64_MAX' is not identical
> Warning W8017 E:\harbour\bcc55\include\stdint.h 87: Redefinition of
> 'UINT16_MAX' is not identical
> Warning W8017 E:\harbour\bcc55\include\stdint.h 88: Redefinition of
> 'UINT32_MAX' is not identical
> Warning W8017 E:\harbour\bcc55\include\stdint.h 89: Redefinition of
> 'UINT64_MAX' is not identical
> Warning W8026 include\zipfile.h 114: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipfile.h 114: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipmemfile.h 106: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipmemfile.h 106: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipmemfile.h 106: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipstorage.h 196: Functions with exception
> specifications are not expanded inline
> Error E2238 E:\harbour\bcc55\include\dinkumware\functional 811:
> Multiple declaration for 'operator hash<string>::()(const string &)
> const'
> Error E2344 E:\harbour\bcc55\include\dinkumware\functional 792:
> Earlier declaration of 'operator hash<string>::()(const string &)
> const'
> Error E2238 E:\harbour\bcc55\include\dinkumware\functional 836:
> Multiple declaration for 'operator hash<wstring>::()(const wstring &)
> const'
> Error E2344 E:\harbour\bcc55\include\dinkumware\functional 792:
> Earlier declaration of 'operator hash<wstring>::()(const wstring &)
> const'
> Warning W8027 include\zipcollections.h 119: Functions containing while
> are not expanded inline
> Warning W8027 include\zipcollections.h 125: Functions containing while
> are not expanded inline
> Warning W8027 include\zipcentraldir.h 184: Functions containing some
> if statements are not expanded inline in function
> CZipCentralDir::RemoveLastFile(CZipFileHeader *,int)
> Warning W8027 include\zipcentraldir.h 232: Functions containing some
> return statements are not expanded inline in function
> CZipCentralDir::GetProperHeaderFileName(const CZipFileHeader *) const
> Warning W8026 include\zipcentraldir.h 551: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipcentraldir.h 551: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zippathcomponent.h 204: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zippathcomponent.h 204: Functions with exception
> specifications are not expanded inline
> Warning W8027 include\zippathcomponent.h 162: Functions containing
> some return statements are not expanded inline in function
> CZipPathComponent::GetFileName() const
> Warning W8027 include\zippathcomponent.h 176: Functions containing
> some return statements are not expanded inline in function
> CZipPathComponent::GetFullPath() const
> Warning W8027 include\zippathcomponent.h 189: Functions containing
> some return statements are not expanded inline in function
> CZipPathComponent::GetFilePath() const
> Warning W8026 include\ziparchive.h 217: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\ziparchive.h 217: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\ziparchive.h 217: Functions with exception
> specifications are not expanded inline
> Warning W8027 include\ziparchive.h 735: Functions containing try are
> not expanded inline
> Warning W8027 include\ziparchive.h 1121: Functions containing for are
> not expanded inline
> Warning W8026 include\ziparchive.h 2048: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\ziparchive.h 2048: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\ziparchive.h 2048: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\ziparchive.h 2048: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\ziparchive.h 2048: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\ziparchive.h 2048: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\ziparchive.h 2048: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\ziparchive.h 2048: Functions with exception
> specifications are not expanded inline
> Error E2522 .\ziparchive.cpp 273: Non-const function operator
> CZipAutoBuffer::char *() called for const object in function
> CZipArchive::GetLocalExtraField(char *,int) const
> Warning W8057 .\ziparchive.cpp 1157: Parameter 'iSmartLevel' is never
> used in function CZipArchive::AddNewFile(const char
> *,int,bool,int,unsigned long)
> Warning W8057 .\ziparchive.cpp 1171: Parameter 'iSmartLevel' is never
> used in function CZipArchive::AddNewFileDrv(const char
> *,int,bool,int,unsigned long)
> Warning W8057 .\ziparchive.cpp 1184: Parameter 'iSmartLevel' is never
> used in function CZipArchive::AddNewFile(const char *,const char
> *,int,int,unsigned long)
> Warning W8057 .\ziparchive.cpp 1197: Parameter 'iSmartLevel' is never
> used in function CZipArchive::AddNewFile(CZipMemFile &,const char
> *,int,int,unsigned long)
> Error E2451 .\ziparchive.cpp 1357: Undefined symbol 'bRet' in function
> CZipArchive::AddNewFileDrv(CZipAddNewFileInfo &)
> Error E2451 .\ziparchive.cpp 1653: Undefined symbol 'bRet' in function
> CZipArchive::AddNewFile(CZipAddNewFileInfo &)
> Warning W8004 .\ziparchive.cpp 3113: 'pBuf' is assigned a value that
> is never used in function CZipArchive::RenameFile(unsigned short,const
> char *)
> *** 8 errors in Compile ***
>
> ** error 2 ** deleting ..\..\obj\b32\ziparchive.obj
>
> __________________________________________________
> Fa?a liga??es para outros computadores com o novo Yahoo! Messenger
> http://br.beta.messenger.yahoo.com/
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Sep  1 04:18:57 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep  1 04:18:59 2008
Subject: [Harbour] 2008-09-01 09:42 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90c0b$Blat.v2.6.2$61196e80$19c45bddb56@127.0.0.1>

2008-09-01 09:42 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/hbziparc.h
   * contrib/hbziparch/hbziparc.c
   * contrib/hbziparch/hbzipnew.cpp
   * contrib/hbziparch/hbxdirec.c
     % Cleanups: Unused headers, types, one #define, 
       one BCC582 warning, one Linux/GCC/MinGW #ifdef oddness.
     ; NOTE: Need to test this on Linux.

   * utils/hbmake/hbmake.prg
     ; Applied cleanup and fix patch from Bill Robertson:
     ! LIBFILES -> HBLIBS
       EXTERNLIB -> CONTRIBLIB
       EXTLIBFILES -> CONTRIBLIBS
     * ALLLIB = $(USERLIBS) $(LIBFILES) ... ->
       ALLLIB = $(USERLIBS) $(CONTRIBLIBS) $(HBLIBS) ...
     % Removed CONTRIBLIB = YES from makefile output as it did nothing.
     % Combined two ShowHelp() secs into one and put together 
       with ShowCredits() at top of program.
     % Simplied Flag checks somewhat but it's still awkward. I fixed 
       a mingw bug where a flag was set to .t. in one place and .f. 
       later because of inconsistent use of letters, capitals/lower, etc. 
       Still lots of checking for lower(...), upper(...), etc. of the 
       command-line params.
     * Changed Help screen to reflect current program options better.
     * Made some alert message a little clearer and minor formatting.
     ! Initalized s_nMakeFileHandle to F_ERROR and reset it to F_ERROR 
       whenever the file was closed. Didn't seem to be a current problem, 
       just good practice.

   * utils/hbmake/hbmake.prg
     * Removed separate /credits switch and added content to 
       main help screen.
     % Removed a few CLS commands from command-line orientated 
       places.
     % Removed -elx and -ex from help screen (as these are the 
       same as -el and -e). They are still accepted though.

   * source/compiler/hbusage.c
     + Added Bill Robertson to credits list.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep  1 06:36:59 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep  1 06:36:58 2008
Subject: [Harbour] 2008-09-01 12:33 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90c1e$Blat.v2.6.2$a9cc54a4$137842b4b2b4@127.0.0.1>

2008-09-01 12:33 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/hbziparc.h
   * contrib/hbziparch/hbziparc.c
   * contrib/hbziparch/hbzipnew.cpp
     ! Fixed several potential leaks.
     % Optimized out several unnecessary allocations.
     % Optimized out several unnecessary string copying.
     % Cleaned all global variables.
     % Cleaned all static variables in C code.
     % Using HB_ERR_FUNCNAME.
     ! Returning empty values instead of NULL.
     ! Fixed potential GPFs.
     ! Using manifest constants instead of literals.
     * Cleaned header file and constant usage.
     * Other minor fixes and optimizations.
     * Formatting.
     ; The code is still a mess.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep  1 06:39:52 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep  1 06:40:02 2008
Subject: [Harbour] 2008-09-01 12:39 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90c1f$Blat.v2.6.2$113c4649$24489566c76@127.0.0.1>

2008-09-01 12:39 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/hbziparc.c
   * contrib/hbziparch/hbzipnew.cpp
     * One variable rename missed from previous commit.
--
Brgds,
Viktor

From mbelgrano at deltain.it  Mon Sep  1 06:42:05 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep  1 06:42:13 2008
Subject: [Harbour] Support hbmake
In-Reply-To: <01c90c0b$Blat.v2.6.2$61196e80$19c45bddb56@127.0.0.1>
References: <01c90c0b$Blat.v2.6.2$61196e80$19c45bddb56@127.0.0.1>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF0E@SRV02.deltain.net>

Hi Victor
Can add support in hbmake for any compiler?
 @ 01,47,08,52 GET cCompiler;
                LISTBOX { "BCC", "MSVC", "GCC", "POCC","MINGW" ,'ANY'};
                MESSAGE s_aLangMessages[ 50 ];
                STATE OsSpec(getlist,2,@cCompiler);
                DROPDOWN

It can be good if project file created will be executed in any platform/compiler
So I think need conditional #if block in project file

Best Regard 
Massimo Belgrano
From harbour.01 at syenar.hu  Mon Sep  1 06:49:11 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep  1 06:49:20 2008
Subject: [Harbour] Re: Support hbmake
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF0E@SRV02.deltain.net>
References: <01c90c0b$Blat.v2.6.2$61196e80$19c45bddb56@127.0.0.1>
	<AFB948164110ED43B5EB849E8DEEF03815EF0E@SRV02.deltain.net>
Message-ID: <EB74989C-6335-45BA-973B-940003A2DB7C@syenar.hu>

Hi Massimo,

Sure we can. Can you send a patch for this?

Brgds,
Viktor

On 2008.09.01., at 12:42, Massimo Belgrano wrote:

> Hi Victor
> Can add support in hbmake for any compiler?
> @ 01,47,08,52 GET cCompiler;
>                LISTBOX { "BCC", "MSVC", "GCC", "POCC","MINGW" ,'ANY'};
>                MESSAGE s_aLangMessages[ 50 ];
>                STATE OsSpec(getlist,2,@cCompiler);
>                DROPDOWN
>
> It can be good if project file created will be executed in any  
> platform/compiler
> So I think need conditional #if block in project file
>
> Best Regard
> Massimo Belgrano

From harbour.01 at syenar.hu  Mon Sep  1 06:55:24 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep  1 06:55:33 2008
Subject: [Harbour] Error compiling hbziparch with CodeGear 5.9
In-Reply-To: <o1fmb491ashidk7tnvil3ieijm1it4qp8g@4ax.com>
References: <o1fmb491ashidk7tnvil3ieijm1it4qp8g@4ax.com>
Message-ID: <9949FD82-AB34-4BE9-A502-F19D7E994C78@syenar.hu>

Hi Tonino,

BTW, I'm not sure if this is a problem, but it's strange
the your include dir is "BCC55" and you're using BCC 5.9.
Make sure you're not mixing different versions of compiler
headers and binaries.

Brgds,
Viktor

On 2008.09.01., at 2:55, Toninho@fwi wrote:

> MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
> 	bcc32.exe -c -q -d -w -w-sig- -O2 -I..\..\include -DHB_GUI
> -DHB_NO_TRACE -DHB_FM_STATISTICS_OFF -DADS_LIB_VERSION=700
> -DHB_HASH_MSG_ITEMS -Iinclude -D_RWSTD_NO_NEW_HEADER   -P
> -o..\..\obj\b32\ziparchive.obj .\ziparchive.cpp
> .\ziparchive.cpp:
> Warning W8027 include\zipstring.h 165: Functions containing do are not
> expanded inline
> Warning W8027 include\zipstring.h 277: Functions containing for are
> not expanded inline
> Warning W8026 include\zipstring.h 289: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipstring.h 289: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipstring.h 289: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipstring.h 289: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipstring.h 289: Functions with exception
> specifications are not expanded inline
> Warning W8027 include\zipstring.h 216: Functions containing some
> return statements are not expanded inline in function
> CZipString::Left(int) const
> Warning W8027 include\zipstring.h 220: Functions containing some
> return statements are not expanded inline in function
> CZipString::Right(int) const
> Warning W8027 include\zipstring.h 222: Functions containing some
> return statements are not expanded inline in function
> CZipString::Mid(int) const
> Warning W8027 include\zipstring.h 223: Functions containing some
> return statements are not expanded inline in function
> CZipString::Mid(int,int) const
> Error E2113 include\zipexception.h 189: Virtual function
> '~CZipException::CZipException()' conflicts with base class
> 'std::exception'
> Warning W8026 include\zipexception.h 223: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipabstractfile.h 50: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipabstractfile.h 50: Functions with exception
> specifications are not expanded inline
> Warning W8017 E:\harbour\bcc55\include\stdint.h 77: Redefinition of
> 'INT16_MIN' is not identical
> Warning W8017 E:\harbour\bcc55\include\stdint.h 78: Redefinition of
> 'INT32_MIN' is not identical
> Warning W8017 E:\harbour\bcc55\include\stdint.h 79: Redefinition of
> 'INT64_MIN' is not identical
> Warning W8017 E:\harbour\bcc55\include\stdint.h 82: Redefinition of
> 'INT16_MAX' is not identical
> Warning W8017 E:\harbour\bcc55\include\stdint.h 83: Redefinition of
> 'INT32_MAX' is not identical
> Warning W8017 E:\harbour\bcc55\include\stdint.h 84: Redefinition of
> 'INT64_MAX' is not identical
> Warning W8017 E:\harbour\bcc55\include\stdint.h 87: Redefinition of
> 'UINT16_MAX' is not identical
> Warning W8017 E:\harbour\bcc55\include\stdint.h 88: Redefinition of
> 'UINT32_MAX' is not identical
> Warning W8017 E:\harbour\bcc55\include\stdint.h 89: Redefinition of
> 'UINT64_MAX' is not identical
> Warning W8026 include\zipfile.h 114: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipfile.h 114: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipmemfile.h 106: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipmemfile.h 106: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipmemfile.h 106: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipstorage.h 196: Functions with exception
> specifications are not expanded inline
> Error E2238 E:\harbour\bcc55\include\dinkumware\functional 811:
> Multiple declaration for 'operator hash<string>::()(const string &)
> const'
> Error E2344 E:\harbour\bcc55\include\dinkumware\functional 792:
> Earlier declaration of 'operator hash<string>::()(const string &)
> const'
> Error E2238 E:\harbour\bcc55\include\dinkumware\functional 836:
> Multiple declaration for 'operator hash<wstring>::()(const wstring &)
> const'
> Error E2344 E:\harbour\bcc55\include\dinkumware\functional 792:
> Earlier declaration of 'operator hash<wstring>::()(const wstring &)
> const'
> Warning W8027 include\zipcollections.h 119: Functions containing while
> are not expanded inline
> Warning W8027 include\zipcollections.h 125: Functions containing while
> are not expanded inline
> Warning W8027 include\zipcentraldir.h 184: Functions containing some
> if statements are not expanded inline in function
> CZipCentralDir::RemoveLastFile(CZipFileHeader *,int)
> Warning W8027 include\zipcentraldir.h 232: Functions containing some
> return statements are not expanded inline in function
> CZipCentralDir::GetProperHeaderFileName(const CZipFileHeader *) const
> Warning W8026 include\zipcentraldir.h 551: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zipcentraldir.h 551: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zippathcomponent.h 204: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\zippathcomponent.h 204: Functions with exception
> specifications are not expanded inline
> Warning W8027 include\zippathcomponent.h 162: Functions containing
> some return statements are not expanded inline in function
> CZipPathComponent::GetFileName() const
> Warning W8027 include\zippathcomponent.h 176: Functions containing
> some return statements are not expanded inline in function
> CZipPathComponent::GetFullPath() const
> Warning W8027 include\zippathcomponent.h 189: Functions containing
> some return statements are not expanded inline in function
> CZipPathComponent::GetFilePath() const
> Warning W8026 include\ziparchive.h 217: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\ziparchive.h 217: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\ziparchive.h 217: Functions with exception
> specifications are not expanded inline
> Warning W8027 include\ziparchive.h 735: Functions containing try are
> not expanded inline
> Warning W8027 include\ziparchive.h 1121: Functions containing for are
> not expanded inline
> Warning W8026 include\ziparchive.h 2048: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\ziparchive.h 2048: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\ziparchive.h 2048: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\ziparchive.h 2048: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\ziparchive.h 2048: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\ziparchive.h 2048: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\ziparchive.h 2048: Functions with exception
> specifications are not expanded inline
> Warning W8026 include\ziparchive.h 2048: Functions with exception
> specifications are not expanded inline
> Error E2522 .\ziparchive.cpp 273: Non-const function operator
> CZipAutoBuffer::char *() called for const object in function
> CZipArchive::GetLocalExtraField(char *,int) const
> Warning W8057 .\ziparchive.cpp 1157: Parameter 'iSmartLevel' is never
> used in function CZipArchive::AddNewFile(const char
> *,int,bool,int,unsigned long)
> Warning W8057 .\ziparchive.cpp 1171: Parameter 'iSmartLevel' is never
> used in function CZipArchive::AddNewFileDrv(const char
> *,int,bool,int,unsigned long)
> Warning W8057 .\ziparchive.cpp 1184: Parameter 'iSmartLevel' is never
> used in function CZipArchive::AddNewFile(const char *,const char
> *,int,int,unsigned long)
> Warning W8057 .\ziparchive.cpp 1197: Parameter 'iSmartLevel' is never
> used in function CZipArchive::AddNewFile(CZipMemFile &,const char
> *,int,int,unsigned long)
> Error E2451 .\ziparchive.cpp 1357: Undefined symbol 'bRet' in function
> CZipArchive::AddNewFileDrv(CZipAddNewFileInfo &)
> Error E2451 .\ziparchive.cpp 1653: Undefined symbol 'bRet' in function
> CZipArchive::AddNewFile(CZipAddNewFileInfo &)
> Warning W8004 .\ziparchive.cpp 3113: 'pBuf' is assigned a value that
> is never used in function CZipArchive::RenameFile(unsigned short,const
> char *)
> *** 8 errors in Compile ***
>
> ** error 2 ** deleting ..\..\obj\b32\ziparchive.obj
>
> __________________________________________________
> Fa?a liga??es para outros computadores com o novo Yahoo! Messenger
> http://br.beta.messenger.yahoo.com/
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From toninhofwi at yahoo.com.br  Mon Sep  1 07:11:54 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Sep  1 07:09:15 2008
Subject: [Harbour] Error compiling hbziparch with CodeGear 5.9
In-Reply-To: <0D504178-EF87-4BC2-879A-BD819847D9B3@syenar.hu>
References: <o1fmb491ashidk7tnvil3ieijm1it4qp8g@4ax.com>
	<0D504178-EF87-4BC2-879A-BD819847D9B3@syenar.hu>
Message-ID: <14jnb4dgls9jc70e61incun1oajrhknkgc@4ax.com>

>Hi Toninho,
>
>BTW, is there a free version of this compiler?
Yes, http://cc.codegear.com/Free.aspx?id=24724

If you need it to test pourposes, I can upload bcc5.9 standalone to
rapidshare.

>[ Otherwise I'd suggest to upgrade to hbmzip, which does
>the same job but in C and in a non-obstructive way,
>it's also significantly smaller. ]
I?ll try this way. hbmzip compile fine under bcc5.9

Thanks and regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From toninhofwi at yahoo.com.br  Mon Sep  1 07:13:59 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Sep  1 07:11:19 2008
Subject: [Harbour] Error compiling hbziparch with CodeGear 5.9
In-Reply-To: <9949FD82-AB34-4BE9-A502-F19D7E994C78@syenar.hu>
References: <o1fmb491ashidk7tnvil3ieijm1it4qp8g@4ax.com>
	<9949FD82-AB34-4BE9-A502-F19D7E994C78@syenar.hu>
Message-ID: <ufjnb417qalg5rn62qit3ia97bbef07a8b@4ax.com>

>BTW, I'm not sure if this is a problem, but it's strange
>the your include dir is "BCC55" and you're using BCC 5.9.
>Make sure you're not mixing different versions of compiler
>headers and binaries.

Viktor, this is intentional. I use MED Text Editor to manage my
projects and all is configured to use BCC55 folder, so, I rename my
bcc59 to bcc55. 

Regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From toninhofwi at yahoo.com.br  Mon Sep  1 09:15:29 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Sep  1 09:12:48 2008
Subject: [Harbour] hbMZip doubt
Message-ID: <ffqnb4p52bv8jcevvt84n7bg6rdegagqnp@4ax.com>

Hi ppl,

I?m testing hbmzip and all is working fine and fast. But I need know
how to change default compression. I have large files and I need
change it to zip it fast.

I?d tryed HB_ZipFileCreate() but I don?t understand how it work. 

BTW tests folder have nice two samples, but none about
HB_ZipFileCreate() function.


Thanks and best regards,

Toninho.

__________________________________________________
Fa?a liga??es para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From harbour.01 at syenar.hu  Mon Sep  1 09:58:22 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep  1 09:58:39 2008
Subject: [Harbour] 2008-09-01 15:57 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90c3a$Blat.v2.6.2$cbef3733$1164adb9a582@127.0.0.1>

2008-09-01 15:57 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   - contrib/hbziparch/hbziparc.h
   * contrib/hbziparch/hbziparc.c
   * contrib/hbziparch/hbzipnew.cpp
   * contrib/hbziparch/tests/unzipa.prg
     % Further cleanups, optimizations.
     % Removed adding current directory to .zip filename 
       if it didn't contain a path. If a file doesn't contain 
       path, the OS will create it by default in the current dir.
       If someone knows why this hack was there, please tell.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep  1 10:32:26 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep  1 10:32:36 2008
Subject: [Harbour] Error compiling hbziparch with CodeGear 5.9
In-Reply-To: <14jnb4dgls9jc70e61incun1oajrhknkgc@4ax.com>
References: <o1fmb491ashidk7tnvil3ieijm1it4qp8g@4ax.com>
	<0D504178-EF87-4BC2-879A-BD819847D9B3@syenar.hu>
	<14jnb4dgls9jc70e61incun1oajrhknkgc@4ax.com>
Message-ID: <33272FB8-8B07-441E-838F-47D098C78525@syenar.hu>

Hi,

>>
>> BTW, is there a free version of this compiler?
> Yes, http://cc.codegear.com/Free.aspx?id=24724

This is version 5.82 (at least it was a few days ago when I tried).

> If you need it to test pourposes, I can upload bcc5.9 standalone to
> rapidshare.

Thanks, but if it's not freely available I'm not interested
as I wouldn't spend money on a compiler when there are such
many good and free alternatives, I don't expect many developer
to do so either. [ also Borland C++ looks to be going off the
track every year :( ]

To compile hbziparch, you may try using -D_USE_OLDER_RW_STL
(in C_USR) as a workaround. Pls tell us your results.
(in BCC 5.82 it fails due to missing Borland includes.)

I see you try to switch to hbmzip, which is the best solution,
despite all the cleaning effort I may just simply delete
hbziparch pretty soon to not cause any more headaches for
everyone.

Brgds,
Viktor

From cvc at oohg.org  Mon Sep  1 12:02:11 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Mon Sep  1 12:02:57 2008
Subject: [Harbour] problem in a function
Message-ID: <48BC1203.7080801@oohg.org>


hi all:

this program don't work ok if the file is hide


cFile:=FILESEEK("C:\autoexec.bat")
? cfile

DO  WHILE .NOT. EMPTY(cFile)
   ? cFile,FILEATTR()
     cFile:=FILESEEK()
  ENDDO
quit

best regards
Ciro


-- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From arcadia2 at sbcglobal.net  Mon Sep  1 12:44:11 2008
From: arcadia2 at sbcglobal.net (bill robertson)
Date: Mon Sep  1 12:44:16 2008
Subject: [Harbour] problem in a function
References: <48BC1203.7080801@oohg.org>
Message-ID: <5DA57967CEB6470F84FC52C482188945@billws>

Hi Ciro,

You need to add the attribute flag to fileseek( file, flag )

      0 Normal
      1 Read only
      2 Hidden
      4 System
      8 Volume
      16 Directory
      32 Archived


cFile:=FILESEEK("C:\autoexec.bat", 2) for just hidden. OR value to get just 
what you want.

>
> hi all:
>
> this program don't work ok if the file is hide
>
>
> cFile:=FILESEEK("C:\autoexec.bat")
> ? cfile
>
> DO  WHILE .NOT. EMPTY(cFile)
>   ? cFile,FILEATTR()
>     cFile:=FILESEEK()
>  ENDDO
> quit
>
> best regards
> Ciro
>
>
> -- 
> http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the 
> no2imp and clip2win home )
>
> http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more 
> powerfull )
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 

From cvc at oohg.org  Mon Sep  1 12:50:24 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Mon Sep  1 12:50:41 2008
Subject: [Harbour] problem in a function
In-Reply-To: <5DA57967CEB6470F84FC52C482188945@billws>
References: <48BC1203.7080801@oohg.org>
	<5DA57967CEB6470F84FC52C482188945@billws>
Message-ID: <48BC1D50.9080100@oohg.org>

bill robertson escribi?:
> Hi Ciro,
> 
> You need to add the attribute flag to fileseek( file, flag )
> 
>      0 Normal
>      1 Read only
>      2 Hidden
>      4 System
>      8 Volume
>      16 Directory
>      32 Archived
> 
>

Thanks Bill, now work ok.

best regards
Ciro

-- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From toninhofwi at yahoo.com.br  Mon Sep  1 15:27:26 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Sep  1 15:24:46 2008
Subject: [Harbour] Error compiling hbziparch with CodeGear 5.9
In-Reply-To: <33272FB8-8B07-441E-838F-47D098C78525@syenar.hu>
References: <o1fmb491ashidk7tnvil3ieijm1it4qp8g@4ax.com>
	<0D504178-EF87-4BC2-879A-BD819847D9B3@syenar.hu>
	<14jnb4dgls9jc70e61incun1oajrhknkgc@4ax.com>
	<33272FB8-8B07-441E-838F-47D098C78525@syenar.hu>
Message-ID: <f7gob4p9e05lrvg8eb1s5qj6ltlq9a123d@4ax.com>

>Thanks, but if it's not freely available I'm not interested
>as I wouldn't spend money on a compiler when there are such
>many good and free alternatives, I don't expect many developer
>to do so either. [ also Borland C++ looks to be going off the
>track every year :( ]
I agree, no problem.

>To compile hbziparch, you may try using -D_USE_OLDER_RW_STL
>(in C_USR) as a workaround. Pls tell us your results.
>(in BCC 5.82 it fails due to missing Borland includes.)
In BCC 5.9 fails too. None is changed.

>I see you try to switch to hbmzip, which is the best solution,
>despite all the cleaning effort I may just simply delete
>hbziparch pretty soon to not cause any more headaches for
>everyone.
Viktor, my first impressions about hbmzip is so good, my tests here
indicates high speed compared to hbziparch and the conversion is so
easy.

I?m writing two function to help hbziparch users to move to hbmzip
easily, but it is not finished yet:

---cut---
procedure HB_ZipFile( cFile, uFileToCompress, nLevel, bUpdate,
lOverwrite, cPassword, lWithPath, lWithDrive, bFileUpdate, cComment )

   local hZip

   if !( ".zip" $ cFile )
      cFile += ".zip"
   endif

   hZip = HB_ZipOpen( cFile )

   if !Empty( hZip )

      HB_ZipStoreFile( hZip, uFileToCompress, nil, cPassword )

      HB_ZipClose( hZip, cComment )

   endif

return

//------------------------------------------------------------------------------------------------------------------//

procedure HB_UnZipFile( cFile, bUpdate, lWithPath, cPassword,
cFileToUnzip, bFileUpdate )

   local hUnZip, nErr, cCurDir := CurDir()

   if !( ".zip" $ cFile )
      cFile += ".zip"
   endif

   hUnZip = HB_UnZipOpen( cFile )

   if !Empty( hUnZip )

      DirChange( "c:\" )

      nErr = HB_UnZipFileFirst( hUnZip )

      while nErr == 0

         HB_UnzipExtractCurrentFile( hUnZip, nil, cPassword )

         nErr = HB_UnZipFileNext( hUnZip )

      enddo

      HB_UnZipClose( hUnZip )

      DirChange( cCurDir )

   endif

return
---cut---



Regards,

Toninho.

__________________________________________________
Fa?a liga??es para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From harbour.01 at syenar.hu  Mon Sep  1 15:49:18 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep  1 15:49:35 2008
Subject: [Harbour] 2008-09-01 21:33 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90c6b$Blat.v2.6.2$d250fe41$11987e594448@127.0.0.1>

2008-09-01 21:33 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/hbziparc.c
   * contrib/hbziparch/hbzipnew.cpp
     % Cleanups, optimizations, fixes. Now it's possible to 
       oversee what the code actually tries to do.
     * Statics reduced to one, not changing current dir anymore.
     ; It may happen that something is not working as it was, please test.
       Path handling is/was very shady. Unix support is (and was) 
       not working at places.
     ; NOTE: 'Kiss of death' change.
             Please be prepared that I plan to remove hbziparch 
             from the repository sometimes this week. If you have 
             a strong reason not to do so (or some alternative 
             proposal), pls write to the list.
             If someone wants to continue using it, it can be accessed 
             from past revisions of the SVN, or the 1.0.0 binary and 
             source releases.
             Someone could as well upload the lastest (or latest stable) 
             revision to our website.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep  1 15:49:29 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep  1 15:49:39 2008
Subject: [Harbour] Error compiling hbziparch with CodeGear 5.9
In-Reply-To: <f7gob4p9e05lrvg8eb1s5qj6ltlq9a123d@4ax.com>
References: <o1fmb491ashidk7tnvil3ieijm1it4qp8g@4ax.com>
	<0D504178-EF87-4BC2-879A-BD819847D9B3@syenar.hu>
	<14jnb4dgls9jc70e61incun1oajrhknkgc@4ax.com>
	<33272FB8-8B07-441E-838F-47D098C78525@syenar.hu>
	<f7gob4p9e05lrvg8eb1s5qj6ltlq9a123d@4ax.com>
Message-ID: <5D8979C4-C7DC-47F0-9BDA-AD2D338718F3@syenar.hu>

>>
Hi Toninho,

>> To compile hbziparch, you may try using -D_USE_OLDER_RW_STL
>> (in C_USR) as a workaround. Pls tell us your results.
>> (in BCC 5.82 it fails due to missing Borland includes.)
> In BCC 5.9 fails too. None is changed.
>
>> I see you try to switch to hbmzip, which is the best solution,
>> despite all the cleaning effort I may just simply delete
>> hbziparch pretty soon to not cause any more headaches for
>> everyone.
> Viktor, my first impressions about hbmzip is so good, my tests here
> indicates high speed compared to hbziparch and the conversion is so
> easy.

Good news. I'm also a happy user of hbmzip.

> I?m writing two function to help hbziparch users to move to hbmzip
> easily, but it is not finished yet:

That's very nice for those wanting to transition.
(just a small note: the dir change to C:\ looks a bit
dangerous to me)

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep  1 15:54:27 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep  1 15:54:41 2008
Subject: [Harbour] 2008-09-01 21:52 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90c6c$Blat.v2.6.2$8a8a9283$197c1e0779ac@127.0.0.1>

2008-09-01 21:52 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   - contrib/hbw32ddr
   * contrib/Makefile
   * contrib/make_b32_all.bat
   * contrib/make_gcc_all.sh
   * contrib/make_vc_all.bat
     - Removed contrib hbw32ddr.
       For those wanting to peek into this code, or 
       pick up development, the exact source can be 
       found in Harbour 1.0.0 release.
--
Brgds,
Viktor

From toninhofwi at yahoo.com.br  Mon Sep  1 19:53:14 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Sep  1 19:47:03 2008
Subject: [Harbour] Error compiling hbziparch with CodeGear 5.9
In-Reply-To: <5D8979C4-C7DC-47F0-9BDA-AD2D338718F3@syenar.hu>
References: <o1fmb491ashidk7tnvil3ieijm1it4qp8g@4ax.com>
	<0D504178-EF87-4BC2-879A-BD819847D9B3@syenar.hu>
	<14jnb4dgls9jc70e61incun1oajrhknkgc@4ax.com>
	<33272FB8-8B07-441E-838F-47D098C78525@syenar.hu>
	<f7gob4p9e05lrvg8eb1s5qj6ltlq9a123d@4ax.com>
	<5D8979C4-C7DC-47F0-9BDA-AD2D338718F3@syenar.hu>
Message-ID: <qsvob4pt7s7l0kaee0vdgs52218he9ftg6@4ax.com>

>That's very nice for those wanting to transition.
>(just a small note: the dir change to C:\ looks a bit
>dangerous to me)

Fixed, thanks.

---cut---
procedure HB_UnZipFile( cFile, bUpdate, lWithPath, cPassword,
cFileToUnzip, bFileUpdate )

   local hUnZip, nErr, cCurDir, cPath

   if !( ".zip" $ cFile )
      cFile += ".zip"
   endif

   hUnZip = HB_UnZipOpen( cFile )

   if !Empty( hUnZip )

      HB_FNameSplit( cFile, @cPath )

      cCurDir = CurDir()

      DirChange( cPath )

      nErr = HB_UnZipFileFirst( hUnZip )

      while nErr == 0

         HB_UnzipExtractCurrentFile( hUnZip, nil, cPassword )

         nErr = HB_UnZipFileNext( hUnZip )

      enddo

      HB_UnZipClose( hUnZip )

      DirChange( cCurDir )

   endif

return
---cut---


	

	
		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opção para você! 
Experimente já e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From harbour.01 at syenar.hu  Tue Sep  2 04:25:19 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep  2 04:31:53 2008
Subject: [Harbour] 2008-09-02 10:23 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90cd5$Blat.v2.6.2$6fb21e22$13388324320c@127.0.0.1>

2008-09-02 10:23 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * utils/hbmake/hbmake.prg
     ; Applied patch by Bill Robertson:
     ! Fixed previously introduced (by me actually) bug. Thanks.
     % Removed "non-extended" codepath, since it was never used.
     ! UI elements fixed to properly accomodate to any 
       screen dimensions.

   * utils/hbmake/hbmake.prg
     ! Fixed to not change casing of files, plus a few other minor fixes.
     ! Made one filename comparison multiplatform by using hb_FileMatch()
     ; Added TOFIXes where filename comparison is not multiplatform.
     % Removed some dead or commented code.
--
Brgds,
Viktor

From mbelgrano at deltain.it  Tue Sep  2 06:30:08 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep  2 06:30:28 2008
Subject: [Harbour] Where find reference for unresolved external
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF1D@SRV02.deltain.net>

What can be done for messages unresolved external "XYZ"?

Add the missing library!

How find wich is the library?
From arcadia2 at sbcglobal.net  Tue Sep  2 08:04:34 2008
From: arcadia2 at sbcglobal.net (bill robertson)
Date: Tue Sep  2 08:04:39 2008
Subject: [Harbour] Where find reference for unresolved external
References: <AFB948164110ED43B5EB849E8DEEF03815EF1D@SRV02.deltain.net>
Message-ID: <68B0502835564576820774BD30491D62@billws>

Hi Massimo,

> ----- Original Message ----- 
> From: "Massimo Belgrano" <mbelgrano@deltain.it>
> To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
> Sent: Tuesday, September 02, 2008 6:30 AM
> Subject: [Harbour] Where find reference for unresolved external
>

> What can be done for messages unresolved external "XYZ"?
>
> Add the missing library!
>
> How find wich is the library?
>

Assumptions:
1. windows
2. libs are off c:\harbour\lib
3 unresolved external is _hb_fun_token (probably uppercased)

You can use findstr to find the missing external.

Example:
  findstr /i /s/m /c:_hb_fun_token c:\harbour\lib\*.*
  c:\harbour\lib\b32\hbct.lib
  c:\harbour\lib\b32\hbvpdf.lib

The example finds two libraries that either have or required the external. 
If it's not obvious which you need to use, you can find out what's in a 
library before you include it.

Another assumption:
4. You are using Borland's compiler which has tlib as the library manager.

  tlib hbvpdf.lib , hbvpdf

The command above with generate all the functions that are in the 
hbvpdf.lib. I see the following files in hbvpdf.lst so you should be able to 
use the library hbvpdf as well as hbct to resolve a missing token() 
reference.

Publics by module

hbvpdf          size = 32610
        _HB_FUN_ALLTOKEN                  _HB_FUN_ARRAY2FILE
        _HB_FUN_ATTOKEN                   _HB_FUN_CHR_RGB
        _HB_FUN_FILE2ARRAY                _HB_FUN_FILEPOS
        _HB_FUN_FILESIZE                  _HB_FUN_NUMAT
        _HB_FUN_NUMTOKEN                  _HB_FUN_PDFADDBUFFER
        _HB_FUN_PDFATSAY                  _HB_FUN_PDFBOLD
        _HB_FUN_PDFBOLDITALIC             _HB_FUN_PDFBOOKADD
        _HB_FUN_PDFBOOKCLOSE              _HB_FUN_PDFBOOKOPEN
        _HB_FUN_PDFBOX                    _HB_FUN_PDFBOX1
        _HB_FUN_PDFCENTER                 _HB_FUN_PDFCLOSE
        _HB_FUN_PDFCLOSEHEADER            _HB_FUN_PDFCREATEHEADER
        _HB_FUN_PDFDELETEHEADER           _HB_FUN_PDFDISABLEHEADER
        _HB_FUN_PDFDRAWHEADER             _HB_FUN_PDFEDITOFFHEADER
        _HB_FUN_PDFEDITONHEADER           _HB_FUN_PDFENABLEHEADER
        _HB_FUN_PDFFILEPRINT              _HB_FUN_PDFHEADER
        _HB_FUN_PDFIMAGE                  _HB_FUN_PDFIMAGEINFO
        _HB_FUN_PDFITALIC                 _HB_FUN_PDFJPEGINFO
        _HB_FUN_PDFLEN                    _HB_FUN_PDFMARGINS
        _HB_FUN_PDFNEWLINE                _HB_FUN_PDFNEWPAGE
        _HB_FUN_PDFNORMAL                 _HB_FUN_PDFOPEN
        _HB_FUN_PDFOPENHEADER             _HB_FUN_PDFPAGENUMBER
        _HB_FUN_PDFPAGEORIENT             _HB_FUN_PDFPAGESIZE
        _HB_FUN_PDFREVERSE                _HB_FUN_PDFRJUST
        _HB_FUN_PDFSAVEHEADER             _HB_FUN_PDFSETFONT
        _HB_FUN_PDFSETLPI                 _HB_FUN_PDFSTRINGB
        _HB_FUN_PDFTEXT                   _HB_FUN_PDFTEXTCOUNT
        _HB_FUN_PDFTIFFINFO               _HB_FUN_PDFUNDERLINE
        _HB_FUN_SWPRUNCMD                 _HB_FUN_TOKEN

hbvpdft         size = 38378
        _HB_FUN_TPDF

hbvpsup         size = 7850
        _HB_FUN_VPDF_FONTSDAT

From mbelgrano at deltain.it  Tue Sep  2 08:59:37 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep  2 08:59:48 2008
Subject: [Harbour] Where find reference for unresolved external
In-Reply-To: <68B0502835564576820774BD30491D62@billws>
References: <AFB948164110ED43B5EB849E8DEEF03815EF1D@SRV02.deltain.net>
	<68B0502835564576820774BD30491D62@billws>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF20@SRV02.deltain.net>

Very thanks

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of bill robertson
Sent: Tuesday, September 02, 2008 2:05 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Where find reference for unresolved external

Hi Massimo,

> ----- Original Message ----- 
> From: "Massimo Belgrano" <mbelgrano@deltain.it>
> To: "Harbour Project Main Developer List."
<harbour@harbour-project.org>
> Sent: Tuesday, September 02, 2008 6:30 AM
> Subject: [Harbour] Where find reference for unresolved external
>

> What can be done for messages unresolved external "XYZ"?
>
> Add the missing library!
>
> How find wich is the library?
>

Assumptions:
1. windows
2. libs are off c:\harbour\lib
3 unresolved external is _hb_fun_token (probably uppercased)

You can use findstr to find the missing external.

Example:
  findstr /i /s/m /c:_hb_fun_token c:\harbour\lib\*.*
  c:\harbour\lib\b32\hbct.lib
  c:\harbour\lib\b32\hbvpdf.lib

The example finds two libraries that either have or required the
external. 
If it's not obvious which you need to use, you can find out what's in a 
library before you include it.

Another assumption:
4. You are using Borland's compiler which has tlib as the library
manager.

  tlib hbvpdf.lib , hbvpdf

The command above with generate all the functions that are in the 
hbvpdf.lib. I see the following files in hbvpdf.lst so you should be
able to 
use the library hbvpdf as well as hbct to resolve a missing token() 
reference.

Publics by module

hbvpdf          size = 32610
        _HB_FUN_ALLTOKEN                  _HB_FUN_ARRAY2FILE
        _HB_FUN_ATTOKEN                   _HB_FUN_CHR_RGB
        _HB_FUN_FILE2ARRAY                _HB_FUN_FILEPOS
        _HB_FUN_FILESIZE                  _HB_FUN_NUMAT
        _HB_FUN_NUMTOKEN                  _HB_FUN_PDFADDBUFFER
        _HB_FUN_PDFATSAY                  _HB_FUN_PDFBOLD
        _HB_FUN_PDFBOLDITALIC             _HB_FUN_PDFBOOKADD
        _HB_FUN_PDFBOOKCLOSE              _HB_FUN_PDFBOOKOPEN
        _HB_FUN_PDFBOX                    _HB_FUN_PDFBOX1
        _HB_FUN_PDFCENTER                 _HB_FUN_PDFCLOSE
        _HB_FUN_PDFCLOSEHEADER            _HB_FUN_PDFCREATEHEADER
        _HB_FUN_PDFDELETEHEADER           _HB_FUN_PDFDISABLEHEADER
        _HB_FUN_PDFDRAWHEADER             _HB_FUN_PDFEDITOFFHEADER
        _HB_FUN_PDFEDITONHEADER           _HB_FUN_PDFENABLEHEADER
        _HB_FUN_PDFFILEPRINT              _HB_FUN_PDFHEADER
        _HB_FUN_PDFIMAGE                  _HB_FUN_PDFIMAGEINFO
        _HB_FUN_PDFITALIC                 _HB_FUN_PDFJPEGINFO
        _HB_FUN_PDFLEN                    _HB_FUN_PDFMARGINS
        _HB_FUN_PDFNEWLINE                _HB_FUN_PDFNEWPAGE
        _HB_FUN_PDFNORMAL                 _HB_FUN_PDFOPEN
        _HB_FUN_PDFOPENHEADER             _HB_FUN_PDFPAGENUMBER
        _HB_FUN_PDFPAGEORIENT             _HB_FUN_PDFPAGESIZE
        _HB_FUN_PDFREVERSE                _HB_FUN_PDFRJUST
        _HB_FUN_PDFSAVEHEADER             _HB_FUN_PDFSETFONT
        _HB_FUN_PDFSETLPI                 _HB_FUN_PDFSTRINGB
        _HB_FUN_PDFTEXT                   _HB_FUN_PDFTEXTCOUNT
        _HB_FUN_PDFTIFFINFO               _HB_FUN_PDFUNDERLINE
        _HB_FUN_SWPRUNCMD                 _HB_FUN_TOKEN

hbvpdft         size = 38378
        _HB_FUN_TPDF

hbvpsup         size = 7850
        _HB_FUN_VPDF_FONTSDAT

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Tue Sep  2 09:45:56 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep  2 09:46:08 2008
Subject: [Harbour] Where find reference for unresolved external
In-Reply-To: <68B0502835564576820774BD30491D62@billws>
References: <AFB948164110ED43B5EB849E8DEEF03815EF1D@SRV02.deltain.net>
	<68B0502835564576820774BD30491D62@billws>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF21@SRV02.deltain.net>

A little automatizated but not working because not add to temp2

findstr /i /s/m /c:_hb_fun_token c:\harbour\lib\*.* >c:\temp1.txt
for /F %%I in (c:\temp1.txt) do tlib  "%%I","c:\temp2.txt"


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of bill robertson
Sent: Tuesday, September 02, 2008 2:05 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Where find reference for unresolved external

Hi Massimo,

> ----- Original Message ----- 
> From: "Massimo Belgrano" <mbelgrano@deltain.it>
> To: "Harbour Project Main Developer List."
<harbour@harbour-project.org>
> Sent: Tuesday, September 02, 2008 6:30 AM
> Subject: [Harbour] Where find reference for unresolved external
>

> What can be done for messages unresolved external "XYZ"?
>
> Add the missing library!
>
> How find wich is the library?
>

Assumptions:
1. windows
2. libs are off c:\harbour\lib
3 unresolved external is _hb_fun_token (probably uppercased)

You can use findstr to find the missing external.

Example:
  findstr /i /s/m /c:_hb_fun_token c:\harbour\lib\*.*
  c:\harbour\lib\b32\hbct.lib
  c:\harbour\lib\b32\hbvpdf.lib

The example finds two libraries that either have or required the
external. 
If it's not obvious which you need to use, you can find out what's in a 
library before you include it.

Another assumption:
4. You are using Borland's compiler which has tlib as the library
manager.

  tlib hbvpdf.lib , hbvpdf

The command above with generate all the functions that are in the 
hbvpdf.lib. I see the following files in hbvpdf.lst so you should be
able to 
use the library hbvpdf as well as hbct to resolve a missing token() 
reference.

Publics by module

hbvpdf          size = 32610
        _HB_FUN_ALLTOKEN                  _HB_FUN_ARRAY2FILE
        _HB_FUN_ATTOKEN                   _HB_FUN_CHR_RGB
        _HB_FUN_FILE2ARRAY                _HB_FUN_FILEPOS
        _HB_FUN_FILESIZE                  _HB_FUN_NUMAT
        _HB_FUN_NUMTOKEN                  _HB_FUN_PDFADDBUFFER
        _HB_FUN_PDFATSAY                  _HB_FUN_PDFBOLD
        _HB_FUN_PDFBOLDITALIC             _HB_FUN_PDFBOOKADD
        _HB_FUN_PDFBOOKCLOSE              _HB_FUN_PDFBOOKOPEN
        _HB_FUN_PDFBOX                    _HB_FUN_PDFBOX1
        _HB_FUN_PDFCENTER                 _HB_FUN_PDFCLOSE
        _HB_FUN_PDFCLOSEHEADER            _HB_FUN_PDFCREATEHEADER
        _HB_FUN_PDFDELETEHEADER           _HB_FUN_PDFDISABLEHEADER
        _HB_FUN_PDFDRAWHEADER             _HB_FUN_PDFEDITOFFHEADER
        _HB_FUN_PDFEDITONHEADER           _HB_FUN_PDFENABLEHEADER
        _HB_FUN_PDFFILEPRINT              _HB_FUN_PDFHEADER
        _HB_FUN_PDFIMAGE                  _HB_FUN_PDFIMAGEINFO
        _HB_FUN_PDFITALIC                 _HB_FUN_PDFJPEGINFO
        _HB_FUN_PDFLEN                    _HB_FUN_PDFMARGINS
        _HB_FUN_PDFNEWLINE                _HB_FUN_PDFNEWPAGE
        _HB_FUN_PDFNORMAL                 _HB_FUN_PDFOPEN
        _HB_FUN_PDFOPENHEADER             _HB_FUN_PDFPAGENUMBER
        _HB_FUN_PDFPAGEORIENT             _HB_FUN_PDFPAGESIZE
        _HB_FUN_PDFREVERSE                _HB_FUN_PDFRJUST
        _HB_FUN_PDFSAVEHEADER             _HB_FUN_PDFSETFONT
        _HB_FUN_PDFSETLPI                 _HB_FUN_PDFSTRINGB
        _HB_FUN_PDFTEXT                   _HB_FUN_PDFTEXTCOUNT
        _HB_FUN_PDFTIFFINFO               _HB_FUN_PDFUNDERLINE
        _HB_FUN_SWPRUNCMD                 _HB_FUN_TOKEN

hbvpdft         size = 38378
        _HB_FUN_TPDF

hbvpsup         size = 7850
        _HB_FUN_VPDF_FONTSDAT

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Tue Sep  2 10:04:04 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep  2 10:04:18 2008
Subject: [Harbour] Where find reference for unresolved external
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF21@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EF1D@SRV02.deltain.net><68B0502835564576820774BD30491D62@billws>
	<AFB948164110ED43B5EB849E8DEEF03815EF21@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF22@SRV02.deltain.net>

I am search a way because i have a big number of reference
Search a way  for  search where is a missing function


Error: Unresolved external '_malloc' referenced from
C:\HARBOUR\LIB\HBVM.LIB|fm
Error: Unresolved external '_pow' referenced from
C:\HARBOUR\LIB\HBCOMMON.LIB|hbstr
Error: Unresolved external '_modf' referenced from
C:\HARBOUR\LIB\HBCOMMON.LIB|hbstr
Error: Unresolved external '__llmul' referenced from
C:\HARBOUR\LIB\HBCOMMON.LIB|hbstr
Error: Unresolved external '_strlen' referenced from
C:\HARBOUR\LIB\HBCOMMON.LIB|hbstr
Error: Unresolved external '__ltolower' referenced from
C:\HARBOUR\LIB\HBCOMMON.LIB|hbstr
Error: Unresolved external '__ltoupper' referenced from
C:\HARBOUR\LIB\HBCOMMON.LIB|hbstr
Error: Unresolved external '_memcpy' referenced from
C:\HARBOUR\LIB\HBCOMMON.LIB|hbstr
Error: Unresolved external '_realloc' referenced from
C:\HARBOUR\LIB\HBVM.LIB|fm
Error: Unresolved external '_free' referenced from
C:\HARBOUR\LIB\HBVM.LIB|fm
Error: Unresolved external '_snprintf' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|langapi
Error: Unresolved external '_memset' referenced from
C:\HARBOUR\LIB\HBCOMMON.LIB|hbdate
Error: Unresolved external 'GetLocalTime' referenced from
C:\HARBOUR\LIB\HBCOMMON.LIB|hbdate
Error: Unresolved external '_memmove' referenced from
C:\HARBOUR\LIB\HBVM.LIB|hashes
Error: Unresolved external '_printf' referenced from
C:\HARBOUR\LIB\HBVM.LIB|dynsym
Error: Unresolved external 'GetStdHandle' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'CreateFileA' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'CloseHandle' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external '_setmode' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'GetFileTime' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'FileTimeToLocalFileTime' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'FileTimeToSystemTime' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'GetFileAttributesA' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'GetVolumeInformationA' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|hbffind
Error: Unresolved external 'FindFirstFileA' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|hbffind
Error: Unresolved external 'FindNextFileA' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|hbffind
Error: Unresolved external 'GetLastError' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|fserror
Error: Unresolved external 'FindClose' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|hbffind
Error: Unresolved external 'SystemTimeToFileTime' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'LocalFileTimeToFileTime' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'SetFileTime' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'SetFileAttributesA' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'ReadFile' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'WriteFile' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'SetEndOfFile' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'FlushFileBuffers' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'LockFileEx' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'LockFile' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external '_isspace' referenced from
C:\HARBOUR\LIB\HBCOMMON.LIB|hbver
Error: Unresolved external 'GetVersionExA' referenced from
C:\HARBOUR\LIB\HBCOMMON.LIB|hbver
Error: Unresolved external 'GetEnvironmentVariableA' referenced from
C:\HARBOUR\LIB\HBCOMMON.LIB|hbgete
Error: Unresolved external '_strchr' referenced from
C:\HARBOUR\LIB\HBVM.LIB|cmdarg
Error: Unresolved external '_strpbrk' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|cdpapi
Error: Unresolved external '_memcmp' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|strtran
Error: Unresolved external 'Sleep' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|idle
Error: Unresolved external '__ftoul' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|idle
Error: Unresolved external 'GetCurrentProcess' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|seconds
Error: Unresolved external 'GetProcessTimes' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|seconds
Error: Unresolved external 'EmptyClipboard' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|gtclip
Error: Unresolved external 'GlobalAlloc' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|gtclip
Error: Unresolved external 'MultiByteToWideChar' referenced from
C:\HARBOUR\LIB\HBCOMMON.LIB|hbwince
Error: Unresolved external 'WideCharToMultiByte' referenced from
C:\HARBOUR\LIB\HBCOMMON.LIB|hbwince
Error: Unresolved external 'SetClipboardData' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|gtclip
Error: Unresolved external 'IsClipboardFormatAvailable' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|gtclip
Error: Unresolved external 'OpenClipboard' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|gtclip
Error: Unresolved external 'GetClipboardData' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|gtclip
Error: Unresolved external 'GlobalLock' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|gtclip
Error: Unresolved external '_wcslen' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|gtclip
Error: Unresolved external 'GlobalSize' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|gtclip
Error: Unresolved external 'GlobalUnlock' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|gtclip
Error: Unresolved external 'CloseClipboard' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|gtclip
Error: Unresolved external 'SetConsoleCursorPosition' referenced from
C:\HARBOUR\LIB\GTWIN.LIB|gtwin
Error: Unresolved external 'SetConsoleCursorInfo' referenced from
C:\HARBOUR\LIB\GTWIN.LIB|gtwin
Error: Unresolved external 'WriteConsoleOutputA' referenced from
C:\HARBOUR\LIB\GTWIN.LIB|gtwin
Error: Unresolved external 'ReadConsoleOutputA' referenced from
C:\HARBOUR\LIB\GTWIN.LIB|gtwin
Error: Unresolved external 'FreeConsole' referenced from
C:\HARBOUR\LIB\GTWIN.LIB|gtwin
Error: Unresolved external 'AllocConsole' referenced from
C:\HARBOUR\LIB\GTWIN.LIB|gtwin
Error: Unresolved external 'GetConsoleScreenBufferInfo' referenced from
C:\HARBOUR\LIB\GTWIN.LIB|gtwin
Error: Unresolved external 'GetConsoleMode' referenced from
C:\HARBOUR\LIB\GTWIN.LIB|gtwin
Error: Unresolved external 'SetConsoleScreenBufferSize' referenced from
C:\HARBOUR\LIB\GTWIN.LIB|gtwin
Error: Unresolved external 'SetConsoleWindowInfo' referenced from
C:\HARBOUR\LIB\GTWIN.LIB|gtwin
Error: Unresolved external 'SetConsoleCtrlHandler' referenced from
C:\HARBOUR\LIB\GTWIN.LIB|gtwin
Error: Unresolved external 'SetConsoleMode' referenced from
C:\HARBOUR\LIB\GTWIN.LIB|gtwin
Error: Unresolved external 'GetNumberOfConsoleInputEvents' referenced
from C:\HARBOUR\LIB\GTWIN.LIB|gtwin
Error: Unresolved external 'ReadConsoleInputA' referenced from
C:\HARBOUR\LIB\GTWIN.LIB|gtwin
Error: Unresolved external '__ftol' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|gttone
Error: Unresolved external 'Beep' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|gttone
Error: Unresolved external 'GetConsoleTitleA' referenced from
C:\HARBOUR\LIB\GTWIN.LIB|gtwin
Error: Unresolved external 'SetConsoleTitleA' referenced from
C:\HARBOUR\LIB\GTWIN.LIB|gtwin
Error: Unresolved external 'GetLargestConsoleWindowSize' referenced from
C:\HARBOUR\LIB\GTWIN.LIB|gtwin
Error: Unresolved external 'GetKeyboardState' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|gtkbstat
Error: Unresolved external 'SetKeyboardState' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|gtkbstat
Error: Unresolved external 'GetKeyState' referenced from
C:\HARBOUR\LIB\GTWIN.LIB|gtwin
Error: Unresolved external 'GetNumberOfConsoleMouseButtons' referenced
from C:\HARBOUR\LIB\GTWIN.LIB|gtwin
Error: Unresolved external '_atol' referenced from
C:\HARBOUR\LIB\HBVM.LIB|cmdarg
Error: Unresolved external 'UnlockFileEx' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'UnlockFile' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'SetFilePointer' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'DeleteFileA' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'MoveFileA' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'CreateDirectoryA' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'SetCurrentDirectoryA' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'RemoveDirectoryA' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'GetCurrentDirectoryA' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external '__chdrive' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'GetDriveTypeA' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external 'GetFileType' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external '__getdrive' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|filesys
Error: Unresolved external '__isnan' referenced from
C:\HARBOUR\LIB\HBVM.LIB|itemapi
Error: Unresolved external '__finite' referenced from
C:\HARBOUR\LIB\HBVM.LIB|itemapi
Error: Unresolved external '__llmod' referenced from
C:\HARBOUR\LIB\HBVM.LIB|itemapi
Error: Unresolved external '__lldiv' referenced from
C:\HARBOUR\LIB\HBVM.LIB|itemapi
Error: Unresolved external '_isdigit' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|dates
Error: Unresolved external '_fopen' referenced from
C:\HARBOUR\LIB\HBCOMMON.LIB|hbfopen
Error: Unresolved external '_fwrite' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|errorint
Error: Unresolved external '_fprintf' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|errorint
Error: Unresolved external '_fclose' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|errorint
Error: Unresolved external '_exit' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|errorint
Error: Unresolved external '__streams' referenced from
C:\HARBOUR\LIB\HBCOMMON.LIB|hbtrace
Error: Unresolved external '_vfprintf' referenced from
C:\HARBOUR\LIB\HBCOMMON.LIB|hbtrace
Error: Unresolved external '_fflush' referenced from
C:\HARBOUR\LIB\HBCOMMON.LIB|hbtrace
Error: Unresolved external 'GlobalMemoryStatus' referenced from
C:\HARBOUR\LIB\HBVM.LIB|fm
Error: Unresolved external '_fmod' referenced from
C:\HARBOUR\LIB\HBCOMMON.LIB|expropt2
Error: Unresolved external '_strncmp' referenced from
C:\HARBOUR\LIB\HBMACRO.LIB|macrob
Error: Unresolved external '__llshr' referenced from
C:\HARBOUR\LIB\HBMACRO.LIB|macrob
Error: Unresolved external '__llshl' referenced from
C:\HARBOUR\LIB\HBMACRO.LIB|macrob
Error: Unresolved external '_memchr' referenced from
C:\HARBOUR\LIB\HBVM.LIB|macro
Error: Unresolved external '_srand' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|hbrandom
Error: Unresolved external '_rand' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|hbrandom
Error: Unresolved external 'GetTempPathA' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|fstemp
Error: Unresolved external 'GetTempFileNameA' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|fstemp
Error: Unresolved external '_sqrt' referenced from
C:\HARBOUR\LIB\RDDNTX.LIB|dbfntx1
Error: Unresolved external '_ceil' referenced from
C:\HARBOUR\LIB\RDDNTX.LIB|dbfntx1
Error: Unresolved external '_exp' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|math
Error: Unresolved external '_log' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|math
Error: Unresolved external '__huge_dble' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|math
Error: Unresolved external 'IsBadReadPtr' referenced from
C:\HARBOUR\LIB\HBVM.LIB|extrap
Error: Unresolved external 'IsBadWritePtr' referenced from
C:\HARBOUR\LIB\HBVM.LIB|extrap
Error: Unresolved external 'MessageBoxA' referenced from
C:\HARBOUR\LIB\HBVM.LIB|extrap
Error: Unresolved external 'SetUnhandledExceptionFilter' referenced from
C:\HARBOUR\LIB\HBVM.LIB|extrap
Error: Unresolved external '_strrchr' referenced from
C:\HARBOUR\LIB\HBDEBUG.LIB|dbgentry
Error: Unresolved external '_isalpha' referenced from
C:\HARBOUR\LIB\HBDEBUG.LIB|dbgentry
Error: Unresolved external '_isupper' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|is
Error: Unresolved external '_islower' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|is
Error: Unresolved external '_system' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|run
Error: Unresolved external 'OemToCharBuffA' referenced from
C:\HARBOUR\LIB\RDDADS.LIB|adsfunc
Error: Unresolved external 'CharToOemBuffA' referenced from
C:\HARBOUR\LIB\RDDADS.LIB|adsfunc
Error: Unresolved external 'ChooseFontA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'GetDeviceCaps' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'SetCursorPos' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'LoadCursorA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'SetClassLongA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'SystemParametersInfoA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'SetWindowPos' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'CreateMenu' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'CreatePopupMenu' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'AppendMenuA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'DeleteMenu' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'DestroyMenu' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'EnableMenuItem' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'DrawMenuBar' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'FindResourceA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'LoadResource' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'LockResource' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'GetModuleHandleA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'SizeofResource' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'FreeResource' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'DestroyWindow' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'SendMessageA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'EndDialog' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'GetFileSize' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'CreateStreamOnHGlobal' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external '_IID_IPicture' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'OleLoadPicture' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'GetViewportOrgEx' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'CreateRectRgn' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'SelectClipRgn' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'GlobalFree' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'Ellipse' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'RoundRect' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'DrawFocusRect' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'CreateSolidBrush' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'GetStockObject' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'MoveToEx' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'LineTo' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'GetTextExtentPoint32A' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'ExtTextOutA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'Polygon' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'Rectangle' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'SetTextAlign' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'SetTextColor' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'SetBkColor' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'SetBkMode' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'lstrlenA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'DrawTextA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'CreateBrushIndirect' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'FillRect' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'CreateFontIndirectA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'CreatePen' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'CreateCompatibleBitmap' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'HideCaret' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'CreateCaret' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'SetCaretPos' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'ShowCaret' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'DestroyCaret' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'SetWindowTextA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'GetWindowTextA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'RedrawWindow' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'CombineRgn' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'InvertRgn' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'SetRect' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'ValidateRect' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'BeginPaint' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'EndPaint' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'GetUpdateRect' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'DefWindowProcA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'IsDialogMessageA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'TranslateMessage' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'DispatchMessageA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'PeekMessageA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'GetTextMetricsA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'InitCommonControls' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'RegisterClassA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'UnregisterClassA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'GetSystemMetrics' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'GetDesktopWindow' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'GetCaretBlinkTime' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'SetCaretBlinkTime' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'SetWindowLongA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'ModifyMenuA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'GetSystemMenu' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'SetTimer' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'KillTimer' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'UpdateWindow' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'LoadImageA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'LoadIconA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'Shell_NotifyIconA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'DestroyIcon' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'GetWindowRect' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'ShowWindow' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'FrameRect' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'Arc' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'GetDC' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'FloodFill' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'InvalidateRect' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'CreateHatchBrush' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'LoadLibraryExA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'GetProcAddress' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'ReleaseDC' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'FreeLibrary' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'DeleteDC' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'CreateCompatibleDC' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'BitBlt' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'GetClientRect' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'DeleteObject' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'SetTextCharacterExtra' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'SelectObject' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'InitCommonControlsEx' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'CreateWindowExA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|gtwvg
Error: Unresolved external 'StretchBlt' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgcore
Error: Unresolved external 'GetMenu' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'CreateDialogParamA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'CreateDialogIndirectParamA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'DialogBoxParamA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'DialogBoxIndirectParamA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'LocalAlloc' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'LocalHandle' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'LocalFree' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'SendDlgItemMessageA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'SetFocus' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'MulDiv' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'GetDialogBaseUnits' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'SetMenu' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'SetDlgItemTextA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'GetDlgItemTextA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'CheckDlgButton' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'IsDlgButtonChecked' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'CheckRadioButton' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'GetDlgItem' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'LoadBitmapA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'MoveWindow' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'SetParent' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'IsWindow' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'ClientToScreen' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'ScreenToClient' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'GetOpenFileNameA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'GetSaveFileNameA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'GetActiveWindow' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'GetCursorPos' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'TrackPopupMenu' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'GetSysColor' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'ChooseColorA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'FindWindowA' referenced from
C:\HARBOUR\LIB\GTWVG.LIB|wvgutils
Error: Unresolved external 'ShellExecuteA' referenced from
G:\CLIP52\LAVORI\MASSIMO\ARCA\OBJ\ARCALOG.OBJ
Error: Unresolved external '_HB_FUN_BMDBFCDX' referenced from
G:\CLIP52\LAVORI\MASSIMO\ARCA\OBJ\ARCA.OBJ
Error: Unresolved external 'WaitForSingleObject' referenced from
C:\HARBOUR\LIB\GTSTD.LIB|gtstd
Error: Unresolved external '_HB_FUN_PRINTERPORTTONAME' referenced from
C:\HARBOUR\LIB\DELTA4HC.LIB|DELTA
Error: Unresolved external '_HB_FUN_GETPRINTERS' referenced from
C:\HARBOUR\LIB\DELTA4HC.LIB|DELTA
Error: Unresolved external '_HB_FUN_GETDEFAULTPRINTER' referenced from
C:\HARBOUR\LIB\DELTA4HC.LIB|DELTA
Error: Unresolved external 'GetComputerNameA' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|net
Error: Unresolved external 'GetUserNameA' referenced from
C:\HARBOUR\LIB\HBRTL.LIB|net

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Massimo
Belgrano
Sent: Tuesday, September 02, 2008 3:46 PM
To: Harbour Project Main Developer List.
Subject: RE: [Harbour] Where find reference for unresolved external

A little automatizated but not working because not add to temp2

findstr /i /s/m /c:_hb_fun_token c:\harbour\lib\*.* >c:\temp1.txt
for /F %%I in (c:\temp1.txt) do tlib  "%%I","c:\temp2.txt"


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of bill robertson
Sent: Tuesday, September 02, 2008 2:05 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Where find reference for unresolved external

Hi Massimo,

> ----- Original Message ----- 
> From: "Massimo Belgrano" <mbelgrano@deltain.it>
> To: "Harbour Project Main Developer List."
<harbour@harbour-project.org>
> Sent: Tuesday, September 02, 2008 6:30 AM
> Subject: [Harbour] Where find reference for unresolved external
>

> What can be done for messages unresolved external "XYZ"?
>
> Add the missing library!
>
> How find wich is the library?
>

Assumptions:
1. windows
2. libs are off c:\harbour\lib
3 unresolved external is _hb_fun_token (probably uppercased)

You can use findstr to find the missing external.

Example:
  findstr /i /s/m /c:_hb_fun_token c:\harbour\lib\*.*
  c:\harbour\lib\b32\hbct.lib
  c:\harbour\lib\b32\hbvpdf.lib

The example finds two libraries that either have or required the
external. 
If it's not obvious which you need to use, you can find out what's in a 
library before you include it.

Another assumption:
4. You are using Borland's compiler which has tlib as the library
manager.

  tlib hbvpdf.lib , hbvpdf

The command above with generate all the functions that are in the 
hbvpdf.lib. I see the following files in hbvpdf.lst so you should be
able to 
use the library hbvpdf as well as hbct to resolve a missing token() 
reference.

Publics by module

hbvpdf          size = 32610
        _HB_FUN_ALLTOKEN                  _HB_FUN_ARRAY2FILE
        _HB_FUN_ATTOKEN                   _HB_FUN_CHR_RGB
        _HB_FUN_FILE2ARRAY                _HB_FUN_FILEPOS
        _HB_FUN_FILESIZE                  _HB_FUN_NUMAT
        _HB_FUN_NUMTOKEN                  _HB_FUN_PDFADDBUFFER
        _HB_FUN_PDFATSAY                  _HB_FUN_PDFBOLD
        _HB_FUN_PDFBOLDITALIC             _HB_FUN_PDFBOOKADD
        _HB_FUN_PDFBOOKCLOSE              _HB_FUN_PDFBOOKOPEN
        _HB_FUN_PDFBOX                    _HB_FUN_PDFBOX1
        _HB_FUN_PDFCENTER                 _HB_FUN_PDFCLOSE
        _HB_FUN_PDFCLOSEHEADER            _HB_FUN_PDFCREATEHEADER
        _HB_FUN_PDFDELETEHEADER           _HB_FUN_PDFDISABLEHEADER
        _HB_FUN_PDFDRAWHEADER             _HB_FUN_PDFEDITOFFHEADER
        _HB_FUN_PDFEDITONHEADER           _HB_FUN_PDFENABLEHEADER
        _HB_FUN_PDFFILEPRINT              _HB_FUN_PDFHEADER
        _HB_FUN_PDFIMAGE                  _HB_FUN_PDFIMAGEINFO
        _HB_FUN_PDFITALIC                 _HB_FUN_PDFJPEGINFO
        _HB_FUN_PDFLEN                    _HB_FUN_PDFMARGINS
        _HB_FUN_PDFNEWLINE                _HB_FUN_PDFNEWPAGE
        _HB_FUN_PDFNORMAL                 _HB_FUN_PDFOPEN
        _HB_FUN_PDFOPENHEADER             _HB_FUN_PDFPAGENUMBER
        _HB_FUN_PDFPAGEORIENT             _HB_FUN_PDFPAGESIZE
        _HB_FUN_PDFREVERSE                _HB_FUN_PDFRJUST
        _HB_FUN_PDFSAVEHEADER             _HB_FUN_PDFSETFONT
        _HB_FUN_PDFSETLPI                 _HB_FUN_PDFSTRINGB
        _HB_FUN_PDFTEXT                   _HB_FUN_PDFTEXTCOUNT
        _HB_FUN_PDFTIFFINFO               _HB_FUN_PDFUNDERLINE
        _HB_FUN_SWPRUNCMD                 _HB_FUN_TOKEN

hbvpdft         size = 38378
        _HB_FUN_TPDF

hbvpsup         size = 7850
        _HB_FUN_VPDF_FONTSDAT

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Tue Sep  2 10:21:25 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  2 10:21:33 2008
Subject: [Harbour] Error compiling hbziparch with CodeGear 5.9
In-Reply-To: <qsvob4pt7s7l0kaee0vdgs52218he9ftg6@4ax.com>
References: <o1fmb491ashidk7tnvil3ieijm1it4qp8g@4ax.com>
	<0D504178-EF87-4BC2-879A-BD819847D9B3@syenar.hu>
	<14jnb4dgls9jc70e61incun1oajrhknkgc@4ax.com>
	<33272FB8-8B07-441E-838F-47D098C78525@syenar.hu>
	<f7gob4p9e05lrvg8eb1s5qj6ltlq9a123d@4ax.com>
	<5D8979C4-C7DC-47F0-9BDA-AD2D338718F3@syenar.hu>
	<qsvob4pt7s7l0kaee0vdgs52218he9ftg6@4ax.com>
Message-ID: <20080902142125.GA5574@34-mo7-2.acn.waw.pl>

On Mon, 01 Sep 2008, Toninho@fwi wrote:

Hi Toninho,

> >That's very nice for those wanting to transition.
> >(just a small note: the dir change to C:\ looks a bit
> >dangerous to me)
> Fixed, thanks.
> ---cut---
> procedure HB_UnZipFile( cFile, bUpdate, lWithPath, cPassword, ;
> cFileToUnzip, bFileUpdate )
>    local hUnZip, nErr, cCurDir, cPath
>    if !( ".zip" $ cFile )
>       cFile += ".zip"
>    endif
>    hUnZip = HB_UnZipOpen( cFile )
>    if !Empty( hUnZip )
>       HB_FNameSplit( cFile, @cPath )

This is OK

>       cCurDir = CurDir()
>       DirChange( cPath )

This code change current directory. It introduced two problems:
1. it's not MT safe because current directory is global process
   attribute not thread one so if two threads will execute this
   code simultaneously then only one will have valid directory.
2. some platforms like WinCE does not support "current directory"
   idea at all and all paths have to be absolute.

The above is also true for any code which tires to use "current
drive". It's extremely important that non of core code will
change current directory" or "current drive" for MT mode and
portability.

So these two lines should be removed and path should be given
explicitly as 2-nd parameter of HB_UnzipExtractCurrentFile().

>       nErr = HB_UnZipFileFirst( hUnZip )
>       while nErr == 0
>          HB_UnzipExtractCurrentFile( hUnZip, nil, cPassword )

Here it should be changed to:
   if HB_UnzipFileInfo( hUnzip, @cZipName ) == 0
      cZipName := cPath + cZipName
      HB_UnzipExtractCurrentFile( hUnZip, cZipName, cPassword )
   endif

If your archive can have absolte paths with drive laters then:
      cZipName := cPath + cZipName
Should be changed and you should remove the drive prefix, f.e.:
      HB_FNameSplit( cZipName, , , @cDrv )
      if !empty( cDrv )
         cZipName := SubStr( cZipName, len( cDrv ) + 1 )
      endif
      cZipName := cPath + cZipName

>          nErr = HB_UnZipFileNext( hUnZip )
>       enddo
>       HB_UnZipClose( hUnZip )
>       DirChange( cCurDir )
>    endif
> return
> ---cut---

The above code is not tested but I hope you know the idea.
If you will create some set of functions for easier migration
from ZIPARCH to HBMZIP library then we can add them to HBMZIP
library. But we should try to implement all functionality, f.e.
<bUpdate>, <lWithPath>, <cFileToUnzip> and <bFileUpdate> in
this function.

best regards,
Przemek
From cvc at oohg.org  Tue Sep  2 12:34:43 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Tue Sep  2 12:35:01 2008
Subject: [Harbour] MIXED GT DRIVERS
Message-ID: <48BD6B23.90001@oohg.org>


Hi all:

if I use a mixed mode application that use GT_GUI and GT_WVG drivers at the same 
time.



how can I activate both at the same time in my init program?

I'm try in this way...

In windows GUI setting


PROCEDURE HB_GTSYS() // ; Override default Harbour HB_GTSYS
     REQUEST HB_GT_GUI // ; Force linkage of GUI GT module
RETURN


in wvg module setting

PROCEDURE HB_GTSYS() // ; Override default Harbour HB_GTSYS
     REQUEST HB_GT_WVG // ; Force linkage of GUI GT module
RETURN

in my main program I add

REQUEST HB_GT_WVG_DEFAULT

but I obtain in WVT_SETGUI(.T.)  ( application exception error )

any Idea?

regards
Ciro



-- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From toninhofwi at yahoo.com.br  Tue Sep  2 12:49:08 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Sep  2 12:46:23 2008
Subject: [Harbour] Error compiling hbziparch with CodeGear 5.9
In-Reply-To: <20080902142125.GA5574@34-mo7-2.acn.waw.pl>
References: <o1fmb491ashidk7tnvil3ieijm1it4qp8g@4ax.com>
	<0D504178-EF87-4BC2-879A-BD819847D9B3@syenar.hu>
	<14jnb4dgls9jc70e61incun1oajrhknkgc@4ax.com>
	<33272FB8-8B07-441E-838F-47D098C78525@syenar.hu>
	<f7gob4p9e05lrvg8eb1s5qj6ltlq9a123d@4ax.com>
	<5D8979C4-C7DC-47F0-9BDA-AD2D338718F3@syenar.hu>
	<qsvob4pt7s7l0kaee0vdgs52218he9ftg6@4ax.com>
	<20080902142125.GA5574@34-mo7-2.acn.waw.pl>
Message-ID: <8crqb45a1cl7jiitmjbd0mfk88qu8ppgi2@4ax.com>

>The above code is not tested but I hope you know the idea.
>If you will create some set of functions for easier migration
>from ZIPARCH to HBMZIP library then we can add them to HBMZIP
>library. But we should try to implement all functionality, f.e.
><bUpdate>, <lWithPath>, <cFileToUnzip> and <bFileUpdate> in
>this function.

Przemek, thanks to teach me. I?ll try to understand how others hbmzip
functions like HB_ZipFileCreate() works and after this I?ll write new
functions with all parameters working.

Regards,

Toninho.

__________________________________________________
Fa?a liga??es para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From toninhofwi at yahoo.com.br  Tue Sep  2 14:58:30 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Sep  2 14:55:45 2008
Subject: [Harbour] hbmzip friendly functions
Message-ID: <tv2rb4tllgir44ivmcofhl6hsm87msmhbl@4ax.com>

Hi friends,

I make 3 functions that may help peoples to migrate from zipzrch to
hbmzip lib.

I?d tested here and all works fine, but I need help to enhance it and
find possible bugs.

Another question is about read buffer: what is the best value ?


Best regards,

Toninho.


---cut---
#define MZIP_BUFFER_READ 1024

/*
   HB_ZIPFILE( <cFile>,
               <cFileToCompress> | <aFilesToCompress>,
               [<nLevel>],
               [<bUpdate>],
               [<lOverWrite>],
               [<cPassword>],
               [<lWithPath>],
               [<lWithDrive>],
               [<bFileUpdate>] ) --> lCompress

   This function creates a zip file named <cFile>. If the extension
   is omitted, .ZIP will be assumed. If the second parameter is a
   character string, this file will be added to the zip file. If the
   second parameter is an array, all file names contained in <aFiles>
   will be compressed.

   If <nLevel> is used, it determines the compression type where 0
means
   no compression and 9 means best compression.

   If <bUpdate> is used, every time the file is opened to compress it
   will evaluate bBlock. Parameters of bBlock are cFile and nPos.

   If <lOverWrite> is used, it toggles to overwrite or not the
existing
   file. Default is to overwrite the file,otherwise if <lOverWrite> is
false
   the new files are added to the <cFile>.

   If <cPassword> is used, all files that are added to the archive are
encrypted
   with the password.

   If <lWithPath> is used, it tells  the path should also be stored
with
   the file name. Default is false.

   If <lWithDrive> is used, it tells thats the Drive and path should
also be stored
   with the file name. Default is false.

   If <bFileUpdate> is used, an Code block is evaluated, showing the
total
   of that file has being processed.
   The codeblock must be defined as follow {|nPos,nTotal|
GaugeUpdate(aGauge1,(nPos/nTotal))}

   lWithPath and lWithDrive are not supported yet
*/

procedure HB_ZipFile( cFile, uFileToCompress, nLevel, bUpdate,
lOverwrite, cPassword, lWithPath, lWithDrive, bFileUpdate, cComment )

   local hZip, hHandle, nLen, cBuffer := Space( MZIP_BUFFER_READ ),
cFileToZip, nPos := 1, nRead, cExt

   if !( ".zip" $ cFile )
      cFile += ".zip"
   endif

   hZip = HB_ZipOpen( cFile )

   if !Empty( hZip )

      if HB_IsString( uFileToCompress )
         uFileToCompress = { uFileToCompress }
      endif

      for each cFileToZip in uFileToCompress

         if HB_IsBlock( bUpdate )
            Eval( bUpdate, cFileToZip, nPos++ )
         endif

         hHandle = FOpen( cFileToZip )

         nRead = 0

         HB_FNameSplit( cFileToZip, nil, @cFileToZip, @cExt )

         HB_ZipFileCreate( hZip, cFileToZip + cExt, nil, nil, nil,
nil, nil, nLevel, cPassword, nil, nil )

         while ( nLen := FRead( hHandle, @cBuffer, MZIP_BUFFER_READ )
) > 0

            if HB_IsBlock( bFileUpdate )

               nRead += nLen

               Eval( bFileUpdate, nRead, FSize( cFileToZip ) )

            endif

            HB_ZipFileWrite( hZip, SubStr( cBuffer, 1, nLen ), nLen )

         enddo

         FClose( hHandle )

         HB_ZipFileClose( hZip )

      next

      HB_ZipClose( hZip, cComment )

   endif

return

/*
   HB_UNZIPFILE( <cFile>,
                 [<bUpdate>],
                 [<lWithPath>],
                 [<cPassword>],
                 [<cPath>],
                 [<cFile> | <aFile>],
                 [<bFileUpdate>]  ) --> lCompress

   <cFile>     Name of the zip file to extract

   <bUpdate>   Code block to execute while extracting

   <lWithPath> Toggle to create directory if needed

   <cPassword> Password to use to extract files

   <cPath>     Path to extract the files to - mandatory

   <cFile> | <aFiles> A File or Array of files to extract - mandatory

   <bFileUpdate> Code block for File Progress

   lWithPath are not supported yet
*/

procedure HB_UnZipFile( cFile, bUpdate, lWithPath, cPassword, cPath,
uFileToUnzip, bFileUpdate )

   local hUnZip, nErr, cZipName

   if !( ".zip" $ cFile )
      cFile += ".zip"
   endif

   hUnZip = HB_UnZipOpen( cFile )

   if !Empty( hUnZip )

      if HB_IsString( uFileToUnzip )
         uFileToUnzip = { uFileToUnzip }
      endif

      if Empty( cPath )
         HB_FNameSplit( cFile, @cPath )
      endif

      nErr = HB_UnZipFileFirst( hUnZip )

      while nErr == 0

         if HB_UnzipFileInfo( hUnzip, @cZipName ) == 0

            if AScan( uFileToUnzip, cZipName ) > 0

               cZipName = cPath + cZipName

               HB_UnzipExtractCurrentFile( hUnZip, cZipName, cPassword
)

            endif

         endif

         nErr = HB_UnZipFileNext( hUnZip )

      enddo

      HB_UnZipClose( hUnZip )

   endif

return

/*
   HB_GETFILESINZIP( <cFile>, [<lExtended>] )

   <cFile>        Is the zip file to get information

   <lExtended>    Is the type of information. The default is .f. and
is compatible with old ZipArch method,
                  returning an array with file name only. If lExtended
is TRUE, the returned array have additional
                  informations like: { cFile, dDate, cTime, nSize,
nCompSize, lCrypted, cComment }
*/

function HB_GetFilesInZip( cFile, lExtended )

   local hUnZip, nErr, dDate, cTime, nSize, nCompSize, lCrypted,
cComment, aFiles := {}

   if !( ".zip" $ cFile )
      cFile += ".zip"
   endif

   if !HB_IsLogical( lExtended )
      lExtended = .f.
   endif

   hUnZip = HB_UnZipOpen( cFile )

   if !Empty( hUnZip )

      nErr = HB_UnZipFileFirst( hUnZip )

      while nErr == 0

         HB_UnzipFileInfo( hUnzip, @cFile, @dDate, @cTime, nil, nil,
nil, @nSize, @nCompSize, @lCrypted, @cComment )

         if lExtended
            AAdd( aFiles, { cFile, dDate, cTime, nSize, nCompSize,
lCrypted, cComment } )
         else
            AAdd( aFiles, cFile )
         endif

         nErr = HB_UnZipFileNext( hUnZip )

      enddo

      HB_UnZipClose( hUnZip )

   endif

return aFiles
---cut

__________________________________________________
Fa?a liga??es para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From arcadia2 at sbcglobal.net  Tue Sep  2 15:36:21 2008
From: arcadia2 at sbcglobal.net (bill robertson)
Date: Tue Sep  2 15:36:27 2008
Subject: [Harbour] Where find reference for unresolved external
References: <AFB948164110ED43B5EB849E8DEEF03815EF1D@SRV02.deltain.net><68B0502835564576820774BD30491D62@billws><AFB948164110ED43B5EB849E8DEEF03815EF21@SRV02.deltain.net>
	<AFB948164110ED43B5EB849E8DEEF03815EF22@SRV02.deltain.net>
Message-ID: <96C78BA0E4A345789B61F4CF1D283010@billws>

Hi Massimo

>----- Original Message ----- 
>From: "Massimo Belgrano" <mbelgrano@deltain.it>
>To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
>Sent: Tuesday, September 02, 2008 10:04 AM
>Subject: RE: [Harbour] Where find reference for unresolved external
>

>I am search a way because i have a big number of reference
>Search a way  for  search where is a missing function

Some of the missing references seems to be from the Clipper v5.2 library. 
You can't mix any library that hasn't be compiled in harbor. Some of the 
references are from the regular harbour libs, some from hbgvt, etc. How are 
you trying to build the application? 

From harbour.01 at syenar.hu  Tue Sep  2 17:49:57 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep  2 17:50:09 2008
Subject: [Harbour] 2008-09-02 23:37 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90d45$Blat.v2.6.2$d788759e$24d4131bee40@127.0.0.1>

2008-09-02 23:37 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/hbziparc.c
   * contrib/hbziparch/hbzipnew.cpp
     * Complete cleanup/refactor/fixes.
       (original functions and internal logic was kept, 
       except some shady path/curdir manipulations, which 
       were removed, along with any directory changes)
       The code got significantly easier to oversee, so if 
       someone wants to find out how this interface works, 
       now the code is much easier to read. If we want to 
       keep this in Harbour, maybe we could just swap the 
       low-level interface to utilize hbmzip calls instead 
       of ZipArchive ones. We would lose the segmented 
       archive feature though, but I'm not sure how 
       important this is these days, when there is no 
       floppy disk anymore.
       Code size is now 40% smaller than in 1.0.0.
       It's still far from being perfect, but now it's at 
       least possible to fix.
--
Brgds,
Viktor

From philb at philb.us  Tue Sep  2 19:19:53 2008
From: philb at philb.us (Phil Barnett)
Date: Tue Sep  2 19:19:49 2008
Subject: [Harbour] Fwd: SourceForge.net Subversion service downtime
	scheduled 2008-09-04
Message-ID: <200809021919.54034.philb@philb.us>


----------  Forwarded Message  ----------

Subject: SourceForge.net Subversion service downtime scheduled 2008-09-04
Date: Tuesday 02 September 2008
"SourceForge.net Team"


On 2008-09-04 at 04:00 UTC, Subversion service write operations will be
offline for no more than 24 hours.  During this time, Subversion write
operations (such as commit) will fail with an error.  Read operations
(checkout, ViewVC, etc.) will succeed as normal.  This downtime is being
used to migrate data on to new storage hardware and conduct performance
testing.  We are taking this downtime approach (leaving service online,
with write operations failing) to minimize the functional impact to users.

Questions or concerns regarding this downtime may be directed to
SourceForge.net staff by submitting a Support Request at
https://sourceforge.net/projects/alexandria/support/

Thank you,

Jacob Moorman
Director of Operations, SourceForge.net


-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From dmacias at mail.udg.mx  Wed Sep  3 04:13:54 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Sep  3 04:13:50 2008
Subject: [Harbour] Include
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48BE4742.1080002@mail.udg.mx>

I do not know if this is a bug, but as I remember, #include files are 
search in "current dir" allways

Using this code:

func main
#include "myfile.ch"
return nil

with 3 directories:
1) "Current dir", where myfile.ch is located
2) Dir for pba.prg
3) Dir for Harbour

result in:
- Windows, BCC551
F:\clipnet>\harbour808\harbour\bin\harbour.exe \basedat\sisgen\pba.prg
Harbour 1.0.0 Intl. (Rev. 9175)
Copyright (c) 1999-2008, http://www.harbour-project.org/
Compiling '\basedat\sisgen\pba.prg'...
Lines 239, Functions/Procedures 2
Generating C source output to 'pba.c'... Done.

- OS/2, gcc
[M:\clipnet]e:\harbour808\harbour\bin\harbour.exe \basedat\sisgen\pba.prg
Harbour 1.0.0 Intl. (Rev. 9175)
Copyright (c) 1999-2008, http://www.harbour-project.org/
Compiling '\basedat\sisgen\pba.prg'...
\basedat\sisgen\pba.prg(2) Error F0029  Can't open #include file: 
'myfile.ch'
1 error

No code generated


- Linux Mandriva 2008.1, gcc
[root@DAVID2 clipnet]# /harbour808/harbour/bin/harbour 
/mnt/win_c/basedat/sisgen/pba.prg
Harbour 1.0.0 Intl. (Rev. 9175)
Copyright (c) 1999-2008, http://www.harbour-project.org/
Compiling '/mnt/win_c/basedat/sisgen/pba.prg'...
/mnt/win_c/basedat/sisgen/pba.prg(2) Error F0029  Can't open #include 
file: 'myfile.ch'
1 error

No code generated

David Macias


From harbour.01 at syenar.hu  Wed Sep  3 05:31:51 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep  3 05:32:07 2008
Subject: [Harbour] 2008-09-03 10:28 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90da7$Blat.v2.6.2$e592a5e4$f0cfc3d31f2@127.0.0.1>

2008-09-03 10:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/hbziparc.c
   * contrib/hbziparch/hbzipnew.cpp
     % Merged slightly different internal functions, thus 
       removing significant redundancy.
       Higher level hb_unzipFile(), hb_unzipFileIndex(), hb_unzipAllFile()
       are now functionally the same, since the only difference was 
       how the file list parameter was handled.
     ! Removed any remaining Win32 dependency.
--
Brgds,
Viktor

From mbelgrano at deltain.it  Wed Sep  3 06:17:19 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Sep  3 06:17:39 2008
Subject: [Harbour] Google crome is fast
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF27@SRV02.deltain.net>

Google crome (the new browser of google) have load time <2 second on my
2 Ghz core 2 duo
Safari require 10 sec firefox need 13 sec explorer 7 have 10 sec
How a large harbour application Have similar performance in startup?
Massimo Belgrano

From harbour.01 at syenar.hu  Wed Sep  3 06:35:08 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep  3 06:35:12 2008
Subject: [Harbour] 2008-09-03 12:34 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90db0$Blat.v2.6.2$bc3fbd0e$276021e0b476@127.0.0.1>

2008-09-03 12:34 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/hbziparc.c
   * contrib/hbziparch/hbzipnew.cpp
     ! Some fixes and further reduction.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep  3 09:06:33 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep  3 09:06:41 2008
Subject: [Harbour] 2008-09-03 15:05 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90dc5$Blat.v2.6.2$e3af52ea$1c7416306702@127.0.0.1>

2008-09-03 15:05 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/hbziparc.c
   * contrib/hbziparch/hbzipnew.cpp
     ! Some fixes to prev.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep  3 09:16:58 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep  3 09:17:04 2008
Subject: [Harbour] 2008-09-03 15:15 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90dc7$Blat.v2.6.2$584c3694$1e508e451724@127.0.0.1>

2008-09-03 15:15 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/Makefile
   * contrib/hbziparch/common.mak
   - contrib/hbziparch/hbziparc.c
   - contrib/hbziparch/hbxdirec.c
   * contrib/hbziparch/hbzipnew.cpp
     * Merged Harbour C parts to .cpp file.
     * Made full low-level interface static.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep  3 09:55:32 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep  3 09:55:38 2008
Subject: [Harbour] 2008-09-03 15:47 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90dcc$Blat.v2.6.2$bb8c9794$12a0c2c9bf68@127.0.0.1>

2008-09-03 15:47 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/Makefile
   * contrib/hbziparch/common.mak
   + contrib/hbziparch/hbziparc.prg
   - contrib/hbziparch/hbzipnew.cpp
   + contrib/hbziparch/hbzipold.cpp
   * contrib/hbziparch/tests/bld_b32.bat
   * contrib/hbziparch/tests/bld_vc.bat
   - contrib/hbziparch/Wildcard.h
   - contrib/hbziparch/ZipString.h
   - contrib/hbziparch/FileInfo.h
   - contrib/hbziparch/ZipFileMapping_lnx.h
   - contrib/hbziparch/ZipMutex_win.h
   - contrib/hbziparch/ZipPathComponent.h
   - contrib/hbziparch/Aes.h
   - contrib/hbziparch/BaseLibCompressor.cpp
   - contrib/hbziparch/zlib
   - contrib/hbziparch/ZipCentralDir.h
   - contrib/hbziparch/RandomPool.h
   - contrib/hbziparch/ZipPathComponent_win.cpp
   - contrib/hbziparch/ZipString_stl.h
   - contrib/hbziparch/ZipPlatform_win.cpp
   - contrib/hbziparch/std_mfc.h
   - contrib/hbziparch/DeflateCompressor.h
   - contrib/hbziparch/ZipCrc32Cryptograph.h
   - contrib/hbziparch/Wildcard.cpp
   - contrib/hbziparch/ZipString.cpp
   - contrib/hbziparch/FileFilter.h
   - contrib/hbziparch/ZipMutex.h
   - contrib/hbziparch/ZipCompatibility.cpp
   - contrib/hbziparch/ZipFileMapping_win.h
   - contrib/hbziparch/ZipExtraData.cpp
   - contrib/hbziparch/Sha1.h
   - contrib/hbziparch/ZipArchive.cpp
   - contrib/hbziparch/ZipFileHeader.h
   - contrib/hbziparch/DirEnumerator.cpp
   - contrib/hbziparch/DeflateCompressor.cpp
   - contrib/hbziparch/ZipBaseException.h
   - contrib/hbziparch/std_stl.h
   - contrib/hbziparch/_features.h
   - contrib/hbziparch/ZipFileMapping.h
   - contrib/hbziparch/BaseLibCompressor.h
   - contrib/hbziparch/FileFilter.cpp
   - contrib/hbziparch/ZipException.h
   - contrib/hbziparch/ZipCryptograph.h
   - contrib/hbziparch/ZipAbstractFile.h
   - contrib/hbziparch/ZipStorage.h
   - contrib/hbziparch/ZipStringStoreSettings.h
   - contrib/hbziparch/stdafx.h
   - contrib/hbziparch/ZipCompatibility.h
   - contrib/hbziparch/ZipExtraData.h
   - contrib/hbziparch/ZipMemFile.h
   - contrib/hbziparch/Hmac.cpp
   - contrib/hbziparch/Bzip2Compressor.h
   - contrib/hbziparch/ZipExport.h
   - contrib/hbziparch/ZipArchive.h
   - contrib/hbziparch/ZipExtraField.cpp
   - contrib/hbziparch/ZipFileHeader.cpp
   - contrib/hbziparch/ZipPlatform.h
   - contrib/hbziparch/ZipAesCryptograph.cpp
   - contrib/hbziparch/ZipException.cpp
   - contrib/hbziparch/ZipCompressor.h
   - contrib/hbziparch/ZipFile_stl.cpp
   - contrib/hbziparch/DirEnumerator.h
   - contrib/hbziparch/ZipCryptograph.cpp
   - contrib/hbziparch/ZipStorage.cpp
   - contrib/hbziparch/ZipAutoBuffer.h
   - contrib/hbziparch/ZipCollections_mfc.h
   - contrib/hbziparch/ZipFile_mfc.h
   - contrib/hbziparch/resource.h
   - contrib/hbziparch/ZipCallbackProvider.h
   - contrib/hbziparch/ZipMemFile.cpp
   - contrib/hbziparch/Bzip2Compressor.cpp
   - contrib/hbziparch/ZipCollections.h
   - contrib/hbziparch/ZipFile.h
   - contrib/hbziparch/Aes.cpp
   - contrib/hbziparch/ZipCentralDir.cpp
   - contrib/hbziparch/RandomPool.cpp
   - contrib/hbziparch/ZipMutex_lnx.h
   - contrib/hbziparch/Hmac.h
   - contrib/hbziparch/ZipExtraField.h
   - contrib/hbziparch/ZipCompressor.cpp
   - contrib/hbziparch/License.txt
   - contrib/hbziparch/ZipCrc32Cryptograph.cpp
   - contrib/hbziparch/ZipAesCryptograph.h
   - contrib/hbziparch/ZipPathComponent_lnx.cpp
   - contrib/hbziparch/ZipPlatformComm.cpp
   - contrib/hbziparch/ZipString_mfc.h
   - contrib/hbziparch/ZipCallback.h
   - contrib/hbziparch/ZipAutoBuffer.cpp
   - contrib/hbziparch/ZipFile_mfc.cpp
   - contrib/hbziparch/ZipCollections_stl.h
   - contrib/hbziparch/BytesWriter.h
   - contrib/hbziparch/ZipPlatform_lnx.cpp
   - contrib/hbziparch/_platform.h
   - contrib/hbziparch/ZipFile_stl.h
   - contrib/hbziparch/readme.txt
   - contrib/hbziparch/Sha1.cpp
     + Added .prg level implementation of old hbziparch interface.
       It's based on Toninhos functions sent to the list, but 
       synced with old interface and extended with new features, 
       fixes and all the remaining interface functions, and old 
       doc.
       There are some non-implemented stuff, and a couple of 
       NOTEs and TOFIXes, if someone wants, these can be addressed.
       (some not, as hbmzip doesn't support multi-volume archives.)
     * Library renamed from hbziparch -> hbziparc to be short 
       filename. The dir itself will also be renamed so.
     * Make files modified to compile on all platforms and to 
       pull hbmzip to build tests.
     - Removed ZipArchive sources.
     ; Temporarily kept hbzipold.cpp to serve as reference.
     ; TOFIX: There is a problem with the loop adding new 
              files to the .zip.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep  3 10:12:11 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep  3 10:12:16 2008
Subject: [Harbour] 2008-09-03 16:02 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90dcf$Blat.v2.6.2$0ed75d1a$11a4cedc4e34@127.0.0.1>

2008-09-03 16:02 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * harbour-ce-spec
   * make_deb.sh
   * harbour-w32-spec
   * harbour.spec
   * contrib/Makefile
   * contrib/make_b32_all.bat
   * contrib/make_gcc_all.sh
   * contrib/make_vc_all.bat
   + contrib/hbziparc
   - contrib/hbziparch
     + hbziparc readded to default contrib list, as it 
       creates no more harm now.
     ; NOTE: And now that this is about ready, we might 
             step forward to develop a .7z interface ;)

--
Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Wed Sep  3 10:24:53 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Sep  3 10:25:00 2008
Subject: [Harbour] 2008-09-03 15:47 UTC+0200 Viktor Szakats
	(harbour.01syenar hu)
References: <01c90dcc$Blat.v2.6.2$bb8c9794$12a0c2c9bf68@127.0.0.1>
Message-ID: <9A5A12FA21384B50B74CD0E577C23F0D@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: <harbour@harbour-project.org>
Data invio: mercoled? 3 settembre 2008 15.55
Oggetto: [Harbour] 2008-09-03 15:47 UTC+0200 Viktor Szakats 
(harbour.01syenar hu)


> 2008-09-03 15:47 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>     + Added .prg level implementation of old hbziparch interface.

I get

Error: Unresolved external '_HB_FUN_HB_ZIPFILE'
Error: Unresolved external '_HB_FUN_HB_UNZIPFILE'
Error: Unresolved external '_HB_FUN_HB_GETFILESINZIP'

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Wed Sep  3 10:28:54 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep  3 10:29:05 2008
Subject: [Harbour] 2008-09-03 15:47 UTC+0200 Viktor Szakats
	(harbour.01syenar hu)
In-Reply-To: <9A5A12FA21384B50B74CD0E577C23F0D@emag>
References: <01c90dcc$Blat.v2.6.2$bb8c9794$12a0c2c9bf68@127.0.0.1>
	<9A5A12FA21384B50B74CD0E577C23F0D@emag>
Message-ID: <0FE93BCF-5FD9-4E6C-BD4D-DB464FE23DAA@syenar.hu>

Hi Enrico,

These functions are properly implemented, so you'll
probably need to change hbziparch.lib to hbziparc.lib.
Or, there is some sort of other basic linking/build
problem on your side.

Brgds,
Viktor

On 2008.09.03., at 16:24, Enrico Maria Giordano wrote:

>
> -----Messaggio Originale----- Da: "Szak?ts Viktor" <harbour.01@syenar.hu 
> >
> A: <harbour@harbour-project.org>
> Data invio: mercoled? 3 settembre 2008 15.55
> Oggetto: [Harbour] 2008-09-03 15:47 UTC+0200 Viktor Szakats (harbour. 
> 01syenar hu)
>
>
>> 2008-09-03 15:47 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>>    + Added .prg level implementation of old hbziparch interface.
>
> I get
>
> Error: Unresolved external '_HB_FUN_HB_ZIPFILE'
> Error: Unresolved external '_HB_FUN_HB_UNZIPFILE'
> Error: Unresolved external '_HB_FUN_HB_GETFILESINZIP'
>
> EMG
>
> --
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic

From harbour.01 at syenar.hu  Wed Sep  3 10:38:02 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep  3 10:38:07 2008
Subject: [Harbour] 2008-09-03 16:36 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90dd2$Blat.v2.6.2$ab53f34e$3d055e2544c@127.0.0.1>

2008-09-03 16:36 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparc/make_b32.bat
   * contrib/hbziparc/make_vc.bat
     % Special C flags not needed anymore.

   - contrib/hbziparc/hbzipold.cpp
   + contrib/hbziparc/hbzipcpp.old
     * Renamed to not look like something live.
--
Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Wed Sep  3 10:38:47 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Sep  3 10:39:01 2008
Subject: [Harbour] 2008-09-03 15:47 UTC+0200 Viktor Szakats
	(harbour.01syenar hu)
References: <01c90dcc$Blat.v2.6.2$bb8c9794$12a0c2c9bf68@127.0.0.1>
	<9A5A12FA21384B50B74CD0E577C23F0D@emag>
	<0FE93BCF-5FD9-4E6C-BD4D-DB464FE23DAA@syenar.hu>
Message-ID: <61B163E0EA254B45B5E2ED754A035026@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Enrico Maria Giordano" <e.m.giordano@emagsoftware.it>
Cc: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoled? 3 settembre 2008 16.28
Oggetto: Re: [Harbour] 2008-09-03 15:47 UTC+0200 Viktor Szakats 
(harbour.01syenar hu)


> Hi Enrico,
>
> These functions are properly implemented, so you'll
> probably need to change hbziparch.lib to hbziparc.lib.
> Or, there is some sort of other basic linking/build
> problem on your side.

Thank you. Now I get

Error: Unresolved external '_HB_FUN_HB_UNZIPOPEN'
Error: Unresolved external '_HB_FUN_HB_UNZIPGLOBALINFO'
Error: Unresolved external '_HB_FUN_HB_UNZIPCLOSE'
Error: Unresolved external '_HB_FUN_HB_UNZIPFILEFIRST'
Error: Unresolved external '_HB_FUN_HB_UNZIPFILEINFO'
Error: Unresolved external '_HB_FUN_HB_UNZIPFILENEXT'
Error: Unresolved external '_HB_FUN_HB_ZIPOPEN'
Error: Unresolved external '_HB_FUN_HB_ZIPFILECREATE'
Error: Unresolved external '_HB_FUN_HB_ZIPFILEWRITE'
Error: Unresolved external '_HB_FUN_HB_ZIPFILECLOSE'
Error: Unresolved external '_HB_FUN_HB_ZIPCLOSE'
Error: Unresolved external '_HB_FUN_HB_UNZIPEXTRACTCURRENTFILE'
Error: Unresolved external '_HB_FUN_HB_ZIPDELETEFILE'

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Wed Sep  3 10:42:50 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep  3 10:43:00 2008
Subject: [Harbour] 2008-09-03 15:47 UTC+0200 Viktor Szakats
	(harbour.01syenar hu)
In-Reply-To: <61B163E0EA254B45B5E2ED754A035026@emag>
References: <01c90dcc$Blat.v2.6.2$bb8c9794$12a0c2c9bf68@127.0.0.1>
	<9A5A12FA21384B50B74CD0E577C23F0D@emag>
	<0FE93BCF-5FD9-4E6C-BD4D-DB464FE23DAA@syenar.hu>
	<61B163E0EA254B45B5E2ED754A035026@emag>
Message-ID: <D7B583FE-0032-4BB4-B82A-1BBC1436AA2C@syenar.hu>

You'll need hbmzip.lib, too.

Brgds,
Viktor

On 2008.09.03., at 16:38, Enrico Maria Giordano wrote:

>
> -----Messaggio Originale----- Da: "Szak?ts Viktor" <harbour.01@syenar.hu 
> >
> A: "Enrico Maria Giordano" <e.m.giordano@emagsoftware.it>
> Cc: "Harbour Project Main Developer List." <harbour@harbour-project.org 
> >
> Data invio: mercoled? 3 settembre 2008 16.28
> Oggetto: Re: [Harbour] 2008-09-03 15:47 UTC+0200 Viktor Szakats  
> (harbour.01syenar hu)
>
>
>> Hi Enrico,
>>
>> These functions are properly implemented, so you'll
>> probably need to change hbziparch.lib to hbziparc.lib.
>> Or, there is some sort of other basic linking/build
>> problem on your side.
>
> Thank you. Now I get
>
> Error: Unresolved external '_HB_FUN_HB_UNZIPOPEN'
> Error: Unresolved external '_HB_FUN_HB_UNZIPGLOBALINFO'
> Error: Unresolved external '_HB_FUN_HB_UNZIPCLOSE'
> Error: Unresolved external '_HB_FUN_HB_UNZIPFILEFIRST'
> Error: Unresolved external '_HB_FUN_HB_UNZIPFILEINFO'
> Error: Unresolved external '_HB_FUN_HB_UNZIPFILENEXT'
> Error: Unresolved external '_HB_FUN_HB_ZIPOPEN'
> Error: Unresolved external '_HB_FUN_HB_ZIPFILECREATE'
> Error: Unresolved external '_HB_FUN_HB_ZIPFILEWRITE'
> Error: Unresolved external '_HB_FUN_HB_ZIPFILECLOSE'
> Error: Unresolved external '_HB_FUN_HB_ZIPCLOSE'
> Error: Unresolved external '_HB_FUN_HB_UNZIPEXTRACTCURRENTFILE'
> Error: Unresolved external '_HB_FUN_HB_ZIPDELETEFILE'
>
> EMG
>
> --
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic

From harbour.01 at syenar.hu  Wed Sep  3 11:50:07 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep  3 11:50:16 2008
Subject: [Harbour] Google crome is fast
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF27@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EF27@SRV02.deltain.net>
Message-ID: <8B25A28E-F3ED-4E63-99A1-AA273AEC2138@syenar.hu>

This comparison has not much point IMO.

The interesting aspect of Chrome, is that it has
a supposedly fast source to machine code interpreter,
but such existed even before and the best of them
is implemented in Java. Such thing could really
boost Harbour execution speed as a JIT compiler working
on macros, .hrb files and most importantly for critical
sections of regular pcode in executables.

BTW, I like Google Chrome, it's a really nice piece of work.
(but I seem to find Firefox 3.1 quicker in Javascript)

Brgds,
Viktor

On 2008.09.03., at 12:17, Massimo Belgrano wrote:

> Google crome (the new browser of google) have load time <2 second on  
> my
> 2 Ghz core 2 duo
> Safari require 10 sec firefox need 13 sec explorer 7 have 10 sec
> How a large harbour application Have similar performance in startup?
> Massimo Belgrano
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From gabor.salai at euroherc.hr  Wed Sep  3 12:54:41 2008
From: gabor.salai at euroherc.hr (gabor salai [intranet242])
Date: Wed Sep  3 12:48:09 2008
Subject: [Harbour] Google crome is fast
References: <AFB948164110ED43B5EB849E8DEEF03815EF27@SRV02.deltain.net>
	<8B25A28E-F3ED-4E63-99A1-AA273AEC2138@syenar.hu>
Message-ID: <010001c90de5$c80df6c0$7e00520a@euroherc.ba>

but it is also possible that chrome has smart startup-order,
first-first-first-of-all start user interface, to look like app is ready
immediately, then in the background initiate the rest of the app. so the
question is, are you able to start fully using chrome in the same moment as
it appears "ready" on your screen?

----- Original Message -----
From: "Szak?ts Viktor" <harbour.01@syenar.hu>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Wednesday, September 03, 2008 5:50 PM
Subject: Re: [Harbour] Google crome is fast


> This comparison has not much point IMO.
>
> The interesting aspect of Chrome, is that it has
> a supposedly fast source to machine code interpreter,
>
> > Google crome (the new browser of google) have load time <2 second on
> > my
> > 2 Ghz core 2 duo
> > Safari require 10 sec firefox need 13 sec explorer 7 have 10 sec
> > How a large harbour application Have similar performance in startup?
> > Massimo Belgrano


From toninhofwi at yahoo.com.br  Wed Sep  3 13:22:03 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Sep  3 13:19:15 2008
Subject: [Harbour] 2008-09-03 15:47 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c90dcc$Blat.v2.6.2$bb8c9794$12a0c2c9bf68@127.0.0.1>
References: <01c90dcc$Blat.v2.6.2$bb8c9794$12a0c2c9bf68@127.0.0.1>
Message-ID: <qqhtb4l5fd8b2d99as5kimcjf5id4lqrm0@4ax.com>

>     + Added .prg level implementation of old hbziparch interface.
>       It's based on Toninhos functions sent to the list, but 
>       synced with old interface and extended with new features, 
>       fixes and all the remaining interface functions, and old 
>       doc.

Viktor, nice, thanks.

BTW IMO this can be changed:

      aExclFile := { hb_FNameMerge( NIL, cName, cExt ) }
      FOR EACH cFN IN acFiles
to
      aExclFile := { hb_FNameMerge( NIL, cName, cExt ) }
      FOR EACH cFN IN aExclFile


Best regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opção para você! 
Experimente já e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From e.m.giordano at emagsoftware.it  Wed Sep  3 13:20:49 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Sep  3 13:20:56 2008
Subject: [Harbour] 2008-09-03 15:47 UTC+0200 Viktor Szakats
	(harbour.01syenar hu)
References: <01c90dcc$Blat.v2.6.2$bb8c9794$12a0c2c9bf68@127.0.0.1>
	<9A5A12FA21384B50B74CD0E577C23F0D@emag>
	<0FE93BCF-5FD9-4E6C-BD4D-DB464FE23DAA@syenar.hu>
	<61B163E0EA254B45B5E2ED754A035026@emag>
	<D7B583FE-0032-4BB4-B82A-1BBC1436AA2C@syenar.hu>
Message-ID: <6B5B19F577B944019C6F8AE913575BC6@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Enrico Maria Giordano" <e.m.giordano@emagsoftware.it>
Cc: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoled? 3 settembre 2008 16.42
Oggetto: Re: [Harbour] 2008-09-03 15:47 UTC+0200 Viktor Szakats 
(harbour.01syenar hu)


> You'll need hbmzip.lib, too.

Thank you. Now it compiles fine. Two problem I noticed, though:

1. The file name of the ZIP file is forced to uppercase.

2. The resulting ZIP file is empty.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Wed Sep  3 13:23:42 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep  3 13:23:53 2008
Subject: [Harbour] 2008-09-03 15:47 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <qqhtb4l5fd8b2d99as5kimcjf5id4lqrm0@4ax.com>
References: <01c90dcc$Blat.v2.6.2$bb8c9794$12a0c2c9bf68@127.0.0.1>
	<qqhtb4l5fd8b2d99as5kimcjf5id4lqrm0@4ax.com>
Message-ID: <0BBAE36D-06FC-418A-B29A-0EFDBBE23C91@syenar.hu>

Thanks Toninho, I'll fix this.

Can you take a look at the zip storing problem?

Basically the files don't get added to the .zip.
(as the TOFIX says, and Enrico just reported)

I personally use hb_ZipStoreFile(), so I can't
really comment on the manual method currently
used.

Brgds,
Viktor

On 2008.09.03., at 19:22, Toninho@fwi wrote:

>>    + Added .prg level implementation of old hbziparch interface.
>>      It's based on Toninhos functions sent to the list, but
>>      synced with old interface and extended with new features,
>>      fixes and all the remaining interface functions, and old
>>      doc.
>
> Viktor, nice, thanks.
>
> BTW IMO this can be changed:
>
>      aExclFile := { hb_FNameMerge( NIL, cName, cExt ) }
>      FOR EACH cFN IN acFiles
> to
>      aExclFile := { hb_FNameMerge( NIL, cName, cExt ) }
>      FOR EACH cFN IN aExclFile
>
>
> Best regards,
>
> Toninho.
>
>
> 		
> _______________________________________________________
> Yahoo! Mail - Sempre a melhor op??o para voc?!
> Experimente j? e veja as novidades.
> http://br.yahoo.com/mailbeta/tudonovo/
>
>

From harbour.01 at syenar.hu  Wed Sep  3 13:33:37 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep  3 13:33:48 2008
Subject: [Harbour] 2008-09-03 15:47 UTC+0200 Viktor Szakats
	(harbour.01syenar hu)
In-Reply-To: <6B5B19F577B944019C6F8AE913575BC6@emag>
References: <01c90dcc$Blat.v2.6.2$bb8c9794$12a0c2c9bf68@127.0.0.1>
	<9A5A12FA21384B50B74CD0E577C23F0D@emag>
	<0FE93BCF-5FD9-4E6C-BD4D-DB464FE23DAA@syenar.hu>
	<61B163E0EA254B45B5E2ED754A035026@emag>
	<D7B583FE-0032-4BB4-B82A-1BBC1436AA2C@syenar.hu>
	<6B5B19F577B944019C6F8AE913575BC6@emag>
Message-ID: <8DB80217-85EE-4A23-9F8D-A381476C91B4@syenar.hu>

>
Hi Enrico,

> Thank you. Now it compiles fine. Two problem I noticed, though:
>
> 1. The file name of the ZIP file is forced to uppercase.

Are you sure the passed name is not accidentally
uppercased on the caller side?

Neither hbziparc, nor hbmzip contains any messing
with filename casing. This is easy to confirm with
tests/zipa.prg, too.

> 2. The resulting ZIP file is empty.

Yes, this is a known TOFIX item (see in ChangeLog),
it will be sorted out shortly I hope.

Brgds,
Viktor

From toninhofwi at yahoo.com.br  Wed Sep  3 13:39:34 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Sep  3 13:36:46 2008
Subject: [Harbour] 2008-09-03 15:47 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
In-Reply-To: <0BBAE36D-06FC-418A-B29A-0EFDBBE23C91@syenar.hu>
References: <01c90dcc$Blat.v2.6.2$bb8c9794$12a0c2c9bf68@127.0.0.1>
	<qqhtb4l5fd8b2d99as5kimcjf5id4lqrm0@4ax.com>
	<0BBAE36D-06FC-418A-B29A-0EFDBBE23C91@syenar.hu>
Message-ID: <guitb41enk3cer3qeld9i3r4brfddn6vgn@4ax.com>

>Thanks Toninho, I'll fix this.
>
>Can you take a look at the zip storing problem?
Viktor, the problem is the same. If you comment:

//      /* NOTE: Try not to add the .zip file to itself. */
//      hb_FNameSplit( cFileName, NIL, @cName, @cExt )
//      aExclFile := { hb_FNameMerge( NIL, cName, cExt ) }
//      FOR EACH cFN IN aExclFile
//         IF "?" $ cFN .OR. "*" $ cFN
//            tmp := Directory( cFN )
//            FOR EACH aFile IN tmp
//               AAdd( aExclFile, aFile[ F_NAME ] )
//            NEXT
//         ELSE
//            AAdd( aExclFile, cFN )
//         ENDIF
//      NEXT

ALL going fine.


Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opção para você! 
Experimente já e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From harbour.01 at syenar.hu  Wed Sep  3 13:42:55 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep  3 13:43:00 2008
Subject: [Harbour] 2008-09-03 19:41 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90dec$Blat.v2.6.2$7f0c335e$1fc353a6266@127.0.0.1>

2008-09-03 19:41 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparc/hbziparc.prg
     ! RTE fixed when not specifying some optional params.
     ! Fixed to parse the right array, and thus not exluding 
       all filenames to be zipped.
     ; Disclaimer: I'm not a user of these functions, and 
       I've admittedly not tested them besides tests/unzipa.prg 
       and tests/zipa.prg (which are pretty basic cases), so 
       bumps are expected. If you find some bugs, please try 
       to provide patches to fix them. Thanks.
--
Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Wed Sep  3 13:47:06 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Sep  3 13:47:12 2008
Subject: [Harbour] 2008-09-03 15:47 UTC+0200 Viktor Szakats
	(harbour.01syenar hu)
References: <01c90dcc$Blat.v2.6.2$bb8c9794$12a0c2c9bf68@127.0.0.1>
	<9A5A12FA21384B50B74CD0E577C23F0D@emag>
	<0FE93BCF-5FD9-4E6C-BD4D-DB464FE23DAA@syenar.hu>
	<61B163E0EA254B45B5E2ED754A035026@emag>
	<D7B583FE-0032-4BB4-B82A-1BBC1436AA2C@syenar.hu>
	<6B5B19F577B944019C6F8AE913575BC6@emag>
	<8DB80217-85EE-4A23-9F8D-A381476C91B4@syenar.hu>
Message-ID: <62E9BFB4D27846EBB7CAD15967D28253@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Enrico Maria Giordano" <e.m.giordano@emagsoftware.it>
Cc: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoled? 3 settembre 2008 19.33
Oggetto: Re: [Harbour] 2008-09-03 15:47 UTC+0200 Viktor Szakats 
(harbour.01syenar hu)


> > 1. The file name of the ZIP file is forced to uppercase.
>
> Are you sure the passed name is not accidentally
> uppercased on the caller side?

Yes, I just checked. But I already find where the problem lies: I'm using 
SET FILECASE UPPER and ZIP functions did not follow FILECASE setting before.

> > 2. The resulting ZIP file is empty.
>
> Yes, this is a known TOFIX item (see in ChangeLog),
> it will be sorted out shortly I hope.

Thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Wed Sep  3 13:56:39 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Sep  3 13:56:45 2008
Subject: [Harbour] 2008-09-03 19:41 UTC+0200 Viktor Szakats
	(harbour.01syenar hu)
References: <01c90dec$Blat.v2.6.2$7f0c335e$1fc353a6266@127.0.0.1>
Message-ID: <28DB87C12754481C90C7BDC52CD07D46@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: <harbour@harbour-project.org>
Data invio: mercoled? 3 settembre 2008 19.42
Oggetto: [Harbour] 2008-09-03 19:41 UTC+0200 Viktor Szakats 
(harbour.01syenar hu)


> 2008-09-03 19:41 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * contrib/hbziparc/hbziparc.prg
>     ! RTE fixed when not specifying some optional params.
>     ! Fixed to parse the right array, and thus not exluding
>       all filenames to be zipped.
>     ; Disclaimer: I'm not a user of these functions, and
>       I've admittedly not tested them besides tests/unzipa.prg
>       and tests/zipa.prg (which are pretty basic cases), so
>       bumps are expected. If you find some bugs, please try
>       to provide patches to fix them. Thanks.

It seems to work fine now, many thanks.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From toninhofwi at yahoo.com.br  Wed Sep  3 14:00:39 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Sep  3 13:57:53 2008
Subject: [Harbour] 2008-09-03 19:41 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c90dec$Blat.v2.6.2$7f0c335e$1fc353a6266@127.0.0.1>
References: <01c90dec$Blat.v2.6.2$7f0c335e$1fc353a6266@127.0.0.1>
Message-ID: <f4ktb41b3mum4t3btbqqh1le5faugtgeoe@4ax.com>

>2008-09-03 19:41 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * contrib/hbziparc/hbziparc.prg
>     ! RTE fixed when not specifying some optional params.
>     ! Fixed to parse the right array, and thus not exluding 
>       all filenames to be zipped.

Viktor, now is working fine.

Thanks and best regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From harbour.01 at syenar.hu  Wed Sep  3 14:01:52 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep  3 14:02:02 2008
Subject: [Harbour] 2008-09-03 15:47 UTC+0200 Viktor Szakats
	(harbour.01syenar hu)
In-Reply-To: <62E9BFB4D27846EBB7CAD15967D28253@emag>
References: <01c90dcc$Blat.v2.6.2$bb8c9794$12a0c2c9bf68@127.0.0.1>
	<9A5A12FA21384B50B74CD0E577C23F0D@emag>
	<0FE93BCF-5FD9-4E6C-BD4D-DB464FE23DAA@syenar.hu>
	<61B163E0EA254B45B5E2ED754A035026@emag>
	<D7B583FE-0032-4BB4-B82A-1BBC1436AA2C@syenar.hu>
	<6B5B19F577B944019C6F8AE913575BC6@emag>
	<8DB80217-85EE-4A23-9F8D-A381476C91B4@syenar.hu>
	<62E9BFB4D27846EBB7CAD15967D28253@emag>
Message-ID: <7D6E27D7-F789-4EAF-9D59-15AD87121063@syenar.hu>

>>
Hi Enrico,

>> > 1. The file name of the ZIP file is forced to uppercase.
>>
>> Are you sure the passed name is not accidentally
>> uppercased on the caller side?
>
> Yes, I just checked. But I already find where the problem lies: I'm  
> using SET FILECASE UPPER and ZIP functions did not follow FILECASE  
> setting before.

That might be. This should be fixed in hbmzip code.

>> > 2. The resulting ZIP file is empty.
>>
>> Yes, this is a known TOFIX item (see in ChangeLog),
>> it will be sorted out shortly I hope.
>
> Thank you.

Okay, I've committed the fix, and I'll commit
another one to obey to _SET_DEFEXTENSIONS.

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep  3 14:04:13 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep  3 14:04:18 2008
Subject: [Harbour] 2008-09-03 20:03 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90def$Blat.v2.6.2$78f8d30c$169cd5998da@127.0.0.1>

2008-09-03 20:03 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparc/hbziparc.prg
     ! Some formatting to docs.
     + Now .zip extension will only be added if _SET_DEFEXTENSIONS 
       is TRUE (the default).
--
Brgds,
Viktor

From druzus at acn.waw.pl  Wed Sep  3 14:50:18 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep  3 14:50:25 2008
Subject: [Harbour] 2008-09-03 15:47 UTC+0200 Viktor Szakats
	(harbour.01syenar hu)
In-Reply-To: <7D6E27D7-F789-4EAF-9D59-15AD87121063@syenar.hu>
References: <01c90dcc$Blat.v2.6.2$bb8c9794$12a0c2c9bf68@127.0.0.1>
	<9A5A12FA21384B50B74CD0E577C23F0D@emag>
	<0FE93BCF-5FD9-4E6C-BD4D-DB464FE23DAA@syenar.hu>
	<61B163E0EA254B45B5E2ED754A035026@emag>
	<D7B583FE-0032-4BB4-B82A-1BBC1436AA2C@syenar.hu>
	<6B5B19F577B944019C6F8AE913575BC6@emag>
	<8DB80217-85EE-4A23-9F8D-A381476C91B4@syenar.hu>
	<62E9BFB4D27846EBB7CAD15967D28253@emag>
	<7D6E27D7-F789-4EAF-9D59-15AD87121063@syenar.hu>
Message-ID: <20080903185018.GA17569@34-mo7-2.acn.waw.pl>

On Wed, 03 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> >Yes, I just checked. But I already find where the problem lies: I'm  
> >using SET FILECASE UPPER and ZIP functions did not follow FILECASE  
> >setting before.
> That might be. This should be fixed in hbmzip code.

The current behavior is correct and should not be changed.
If user uses SET FILECASE/DIRCASE UPPER/LOWER then whole
Harbour code should respect it or we do not need these
options at all. They are critical for some DOS/Windows code
which does not respect file casing and then is executed on
case sensitive FS.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Sep  3 15:06:40 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep  3 15:06:51 2008
Subject: [Harbour] 2008-09-03 15:47 UTC+0200 Viktor Szakats
	(harbour.01syenar hu)
In-Reply-To: <20080903185018.GA17569@34-mo7-2.acn.waw.pl>
References: <01c90dcc$Blat.v2.6.2$bb8c9794$12a0c2c9bf68@127.0.0.1>
	<9A5A12FA21384B50B74CD0E577C23F0D@emag>
	<0FE93BCF-5FD9-4E6C-BD4D-DB464FE23DAA@syenar.hu>
	<61B163E0EA254B45B5E2ED754A035026@emag>
	<D7B583FE-0032-4BB4-B82A-1BBC1436AA2C@syenar.hu>
	<6B5B19F577B944019C6F8AE913575BC6@emag>
	<8DB80217-85EE-4A23-9F8D-A381476C91B4@syenar.hu>
	<62E9BFB4D27846EBB7CAD15967D28253@emag>
	<7D6E27D7-F789-4EAF-9D59-15AD87121063@syenar.hu>
	<20080903185018.GA17569@34-mo7-2.acn.waw.pl>
Message-ID: <D69003E6-E1B3-4A0C-B737-CFA59C997BB1@syenar.hu>

>
Hi Przemek,

> Hi Viktor,
>
>>> Yes, I just checked. But I already find where the problem lies: I'm
>>> using SET FILECASE UPPER and ZIP functions did not follow FILECASE
>>> setting before.
>> That might be. This should be fixed in hbmzip code.
>
> The current behavior is correct and should not be changed.
> If user uses SET FILECASE/DIRCASE UPPER/LOWER then whole
> Harbour code should respect it or we do not need these
> options at all. They are critical for some DOS/Windows code
> which does not respect file casing and then is executed on
> case sensitive FS.

I fully agree, I must have misread the report thinking
that hbmzip just doesn't respect these settings, but if
it does, perfect.

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep  3 17:32:38 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep  3 17:32:46 2008
Subject: [Harbour] 2008-09-03 23:06 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90e0c$Blat.v2.6.2$96813e7e$10eca672d1ae@127.0.0.1>

2008-09-03 23:06 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparc/hbziparc.prg
     ! Fix to one of the rarely used function names.

   * contrib/gtalleg/gtalleg.c
   * contrib/hbw32/dllcall.c
   * contrib/hbcurl/hbcurl.c
   * contrib/hbfimage/fi_winfu.c
   * contrib/hbfimage/fi_wrp.c
   * source/vm/memvars.c
   * source/rtl/gtwin/gtwin.c
   * source/rtl/math.c
   * source/rtl/gtclip.c
   * source/rtl/fstemp.c
   * source/rtl/is.c
   * source/rtl/xsavescr.c
   * source/rtl/fkmax.c
   * source/rtl/langapi.c
   * source/rtl/hbrandom.c
   * source/rtl/hbinet.c
   * source/rtl/hbffind.c
     * Minor formatting, code style/format cleanup (!=/== NULL mostly).

   * source/compiler/genc.c
     * Minor; empty line added to .c output.
--
Brgds,
Viktor

From miguelangel at marchuet.net  Thu Sep  4 05:52:00 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Thu Sep  4 05:52:02 2008
Subject: [Harbour] To Przemek
Message-ID: <48BFAFC0.50803@marchuet.net>

#command SET TURBOREAD ON                       => Sx_SetTurbo( .t. )

generates internal error 9106, "hb_cdxIndexUnLockRead: bad count of locks."

Can we change the code ?

static BOOL hb_cdxIndexUnLockRead( LPCDXINDEX pIndex )
{
    pIndex->lockRead--;
    if ( HB_DIRTYREAD( pIndex->pArea ) )
    {
       if ( pIndex->lockRead < 0 )
         pIndex->lockRead = 0;
       return TRUE;
    }

...

I don't know why lockRead are break with SET TURBOREAD ON




Best regards,
Miguel Angel Marchuet
From niki at synel.co.il  Thu Sep  4 05:01:51 2008
From: niki at synel.co.il (Chen Kedem)
Date: Thu Sep  4 08:27:37 2008
Subject: [Harbour] Proposed home page layout
Message-ID: <1A07FEDC778C3E4AA417F089511F859C03268A69ED@Mail-yoq.SYNEL-COMPANY.LTD>

I am not a web master nor a graphic designer, but here is (attached) my suggestion for a new
Harbour home page. I do like the current logo and ship colors, so I used them in the design.
I think it is simple and make it easy to find the information you need.

For start it would contain the content of the current site texts just layout in this new design,
later it could be updated with any new data and maybe translated to other lagnuages
(their small flags and links could be put on the white section on the top right).

What do you think?


  Chen.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: harb.jpg
Type: image/pjpeg
Size: 141780 bytes
Desc: harb.jpg
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080904/42bcd7ef/harb-0001.bin
From harbour.01 at syenar.hu  Thu Sep  4 08:50:19 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep  4 08:50:39 2008
Subject: [Harbour] Proposed home page layout
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C03268A69ED@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C03268A69ED@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <15AEB0D9-8464-4EAE-A2D1-2227212EB74A@syenar.hu>

Hi Chen,

I like it, simple and straightforward.

Brgds,
Viktor

On 2008.09.04., at 11:01, Chen Kedem wrote:

> I am not a web master nor a graphic designer, but here is (attached)  
> my suggestion for a new
> Harbour home page. I do like the current logo and ship colors, so I  
> used them in the design.
> I think it is simple and make it easy to find the information you  
> need.
>
> For start it would contain the content of the current site texts  
> just layout in this new design,
> later it could be updated with any new data and maybe translated to  
> other lagnuages
> (their small flags and links could be put on the white section on  
> the top right).
>
> What do you think?
>
>
>  Chen.
> <harb.jpg>_______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Sep  4 09:28:57 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep  4 09:29:06 2008
Subject: [Harbour] 2008-09-04 09:43 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90e92$Blat.v2.6.2$2f4245ba$131cc939b086@127.0.0.1>

2008-09-04 09:43 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * make_vc.mak
   * contrib/mtpl_vc.mak
     + -w34701 VC flag added to enabled warning 4701 (uninitialized vars) on -W3 level.
     % -FD VC flag removed. This is only needed for IDEs.
     % -Gs VC flag moved to the common section.
     % VC flags synced in contrib with core.
     + TOFIX added for WinCE command line. It's full of stuff which is _probably_ not needed.
     + NOTE added about MSDN page explaining VC switches.
     ; NOTE: -W4 and -Wp64 are recommended for MSVC.
     ; TOFIX: There are still a few uninit vars warnings:
              harboury.c(7226) : warning C4701: potentially uninitialized local variable 'hb_complval' used
              macroy.c(3095) : warning C4701: potentially uninitialized local variable 'hb_macrolval' used
              dbffpt1.c(2671) : warning C4701: potentially uninitialized local variable 'ulType' used
              dbffpt1.c(2614) : warning C4701: potentially uninitialized local variable 'ulSize' used
              dbffpt1.c(3073) : warning C4701: potentially uninitialized local variable 'ulOldSize' used
              dbffpt1.c(3083) : warning C4701: potentially uninitialized local variable 'ulBlock' used
              dbffpt1.c(3652) : warning C4701: potentially uninitialized local variable 'pBlock' used

   * source/rdd/workarea.c
     ! Fixed DBI_POSITIONED value returned.

   * include/hbsetup.h
   * source/vm/pvalue.c
   * source/rtl/fserror.c
   * source/rtl/accept.c
   * source/rtl/descend.c
   * source/rtl/inkey.c
   * source/rtl/dates.c
   * source/rtl/fkmax.c
   * source/rtl/natmsg.c
   * source/rtl/hbinet.c
   * source/rtl/dates.c
     ! Fixed some MSVS2008 -W4 warnings (we use -W3 as the default).
     ; NOTE: There is a lot more of these.

   * source/rtl/dates.c
     * Formatting.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep  4 09:59:12 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep  4 09:59:24 2008
Subject: [Harbour] 2008-09-04 15:58 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90e96$Blat.v2.6.2$68bf7692$6f85c301918@127.0.0.1>

2008-09-04 15:58 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * config/w32/msvc.cf
   * config/w32/msvcce.cf
     * Synced with latest non-GNU changes.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Thu Sep  4 12:16:57 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep  4 12:17:05 2008
Subject: [Harbour] To Przemek
In-Reply-To: <48BFAFC0.50803@marchuet.net>
References: <48BFAFC0.50803@marchuet.net>
Message-ID: <20080904161657.GA5403@34-mo7-2.acn.waw.pl>

On Thu, 04 Sep 2008, Miguel Angel Marchuet wrote:

Hi Miguel,

> #command SET TURBOREAD ON                       => Sx_SetTurbo( .t. )
> generates internal error 9106, "hb_cdxIndexUnLockRead: bad count of locks."
> Can we change the code ?
> static BOOL hb_cdxIndexUnLockRead( LPCDXINDEX pIndex )
> {
>    pIndex->lockRead--;
>    if ( HB_DIRTYREAD( pIndex->pArea ) )
>    {
>       if ( pIndex->lockRead < 0 )
>         pIndex->lockRead = 0;
>       return TRUE;
>    }
> ...
> I don't know why lockRead are break with SET TURBOREAD ON

The above only diables debug code but does not fix the problem
which is in different place few line below:

   if ( pIndex->pArea->fShared && pIndex->fShared )

Should be changed to:

   if ( pIndex->pArea->fShared && pIndex->fShared &&
        !HB_DIRTYREAD( pIndex->pArea ) )

I'll commit the fix ASAP.

BTW Please remember that using Sx_SetTurbo() (It should be rather called
"dirty read") may cause wrong results when other station update index
concurrently. Do you use some other manual lock mechanism too?

best regards,
Przemek
From arcadia2 at sbcglobal.net  Thu Sep  4 12:39:54 2008
From: arcadia2 at sbcglobal.net (bill robertson)
Date: Thu Sep  4 12:40:07 2008
Subject: [Harbour] debug bug
Message-ID: <3644757B55A1458AA7F8115FF329A491@billws>

Hi All,

In the example below:

-------------------------------------
FUNCTION MAIN()
LOCAL cVar

ALTD()

cVar:= 5  // Just to stop on something

RETURN 0
--------------------------------------

If I go to the command window of the debugger and ask a few questions:

? s             // nil as expected
? (s:= 3)   // 3 as expected
? s            // nil - not expected

xHarbour and Clipper show s = 3 instead of nil.

It's very useful to do a few calculations and save results for tests you 
didn't anticipate. 

From miguelangel at marchuet.net  Thu Sep  4 12:52:29 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Thu Sep  4 12:52:17 2008
Subject: [Harbour] To Przemek
In-Reply-To: <20080904161657.GA5403@34-mo7-2.acn.waw.pl>
References: <48BFAFC0.50803@marchuet.net>
	<20080904161657.GA5403@34-mo7-2.acn.waw.pl>
Message-ID: <48C0124D.3020900@marchuet.net>

> 
> BTW Please remember that using Sx_SetTurbo() (It should be rather called
> "dirty read") may cause wrong results when other station update index
> concurrently. Do you use some other manual lock mechanism too?
> 

What do you think about to make dirty read only when nobody has blocked
any register (automatically) ?

some times operations for read and visualize data don't need any type of block if
other users don't lock its register.

Best regards,
Miguel Angel Marchuet
From soporte at dsgsoftware.com  Thu Sep  4 13:01:11 2008
From: soporte at dsgsoftware.com (=?iso-8859-2?Q?Juan_G=E1lvez?=)
Date: Thu Sep  4 13:01:30 2008
Subject: [Harbour] To Przemek
References: <48BFAFC0.50803@marchuet.net>
	<20080904161657.GA5403@34-mo7-2.acn.waw.pl>
Message-ID: <000e01c90eaf$dcf37c20$6c01a8c0@PcJuanxp>

Hi Przemek,

BTW ... Can some way exist of improving the delays of the user concurrence 
of DBFCDX under Windows ?
What is your opinion ?

Many thanks
Juan

----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Thursday, September 04, 2008 6:16 PM
Subject: Re: [Harbour] To Przemek


> On Thu, 04 Sep 2008, Miguel Angel Marchuet wrote:
>
> Hi Miguel,
>
>> #command SET TURBOREAD ON                       => Sx_SetTurbo( .t. )
>> generates internal error 9106, "hb_cdxIndexUnLockRead: bad count of 
>> locks."
>> Can we change the code ?
>> static BOOL hb_cdxIndexUnLockRead( LPCDXINDEX pIndex )
>> {
>>    pIndex->lockRead--;
>>    if ( HB_DIRTYREAD( pIndex->pArea ) )
>>    {
>>       if ( pIndex->lockRead < 0 )
>>         pIndex->lockRead = 0;
>>       return TRUE;
>>    }
>> ...
>> I don't know why lockRead are break with SET TURBOREAD ON
>
> The above only diables debug code but does not fix the problem
> which is in different place few line below:
>
>   if ( pIndex->pArea->fShared && pIndex->fShared )
>
> Should be changed to:
>
>   if ( pIndex->pArea->fShared && pIndex->fShared &&
>        !HB_DIRTYREAD( pIndex->pArea ) )
>
> I'll commit the fix ASAP.
>
> BTW Please remember that using Sx_SetTurbo() (It should be rather called
> "dirty read") may cause wrong results when other station update index
> concurrently. Do you use some other manual lock mechanism too?
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
> __________ Informaci?n de NOD32, revisi?n 3414 (20080904) __________
>
> Este mensaje ha sido analizado con NOD32 antivirus system
> http://www.nod32.com
>
> 

From druzus at acn.waw.pl  Thu Sep  4 13:09:16 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep  4 13:09:24 2008
Subject: [Harbour] 2008-09-04 19:08 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200809041709.m84H9GWl013465@31-mo5-4.acn.waw.pl>

2008-09-04 19:08 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/dbfntx/dbfntx1.c
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
    ! fixed dirty index reading, thx Miguel for bug report

  * harbour/source/compiler/hbmain.c
    * removed old comment and hack

best regards
Przemek
From druzus at acn.waw.pl  Thu Sep  4 13:25:32 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep  4 13:25:39 2008
Subject: [Harbour] debug bug
In-Reply-To: <3644757B55A1458AA7F8115FF329A491@billws>
References: <3644757B55A1458AA7F8115FF329A491@billws>
Message-ID: <20080904172532.GA13353@34-mo7-2.acn.waw.pl>

On Thu, 04 Sep 2008, bill robertson wrote:

Hi Bill,

> In the example below:
> -------------------------------------
> FUNCTION MAIN()
> LOCAL cVar
> ALTD()
> cVar:= 5  // Just to stop on something
> RETURN 0
> --------------------------------------
> If I go to the command window of the debugger and ask a few questions:
> ? s             // nil as expected

This is a bug, should be: "Undefined" instead of "NIL"

> ? (s:= 3)   // 3 as expected

It's OK.

> ? s            // nil - not expected

We can implement it but it in Clipper it creates new
private variable 's' inside main() function in the above
example what may effect executing program.

> xHarbour and Clipper show s = 3 instead of nil.

Which xHarbour version?
I've tested current one and it gives exactly the same results
as Harbour. Some older xHarbour versions may behaves differently
because all memvar variables created inside macro evaluated by
TYPE() function were created as PUBLIC ones instead of PRIVATE
which should be destroyed after leaving current function. A side
effect of this behavior can give the results you are looking for.

> It's very useful to do a few calculations and save results for tests you 
> didn't anticipate. 

What do you need exact Clipper behavior or temporary variables inside
debugger only?

best regards,
Przemek
From druzus at acn.waw.pl  Thu Sep  4 13:30:28 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep  4 13:30:37 2008
Subject: [Harbour] 2008-09-04 19:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200809041730.m84HUSPd013680@31-mo5-4.acn.waw.pl>

2008-09-04 19:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/dbfntx/dbfntx1.c
    ! fixed typo in previous commit

best regards
Przemek
From lorenzo.fiorini at gmail.com  Thu Sep  4 13:58:50 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep  4 13:58:57 2008
Subject: [Harbour] What about a six month release cycle?
Message-ID: <9257026e0809041058p795ae608o4f6ea2f71404dcac@mail.gmail.com>

I find the 6 month release cycle and year.month release numbering very
clean since there are no discussions about "when to release", "what
include in the new release" and "how to name the next version".

Every developer knows that after a release there are 4-5 months for
committing new code and 2-1 months for cleaning and testing.
This also means that the new release can have few or no changes ( if
there are no changes it can be skipped of course ).

If we had 1.0 released 08.08 ( August 2008 ) then the next version
will be 09.02 and so on.
The user simply knows that 09.02 is more recent than 08.08. If there
are some bugfix releases they can be 09.02.1-2-3-4.
If we find August a critical month for vacations, we can adopt the
"standard" 04 ( April ) 10 ( October ) timeframe.

Comments?

best regards,
Lorenzo
From druzus at acn.waw.pl  Thu Sep  4 14:34:09 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep  4 14:34:16 2008
Subject: [Harbour] What about a six month release cycle?
In-Reply-To: <9257026e0809041058p795ae608o4f6ea2f71404dcac@mail.gmail.com>
References: <9257026e0809041058p795ae608o4f6ea2f71404dcac@mail.gmail.com>
Message-ID: <20080904183409.GA27868@34-mo7-2.acn.waw.pl>

On Thu, 04 Sep 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> I find the 6 month release cycle and year.month release numbering very
> clean since there are no discussions about "when to release", "what
> include in the new release" and "how to name the next version".
> Every developer knows that after a release there are 4-5 months for
> committing new code and 2-1 months for cleaning and testing.
> This also means that the new release can have few or no changes ( if
> there are no changes it can be skipped of course ).
> If we had 1.0 released 08.08 ( August 2008 ) then the next version
> will be 09.02 and so on.
> The user simply knows that 09.02 is more recent than 08.08. If there
> are some bugfix releases they can be 09.02.1-2-3-4.
> If we find August a critical month for vacations, we can adopt the
> "standard" 04 ( April ) 10 ( October ) timeframe.
> Comments?

Some changes may not be such trivial to add and finish in 6 months.
F.e. I'm just playing with Harbour threads and they work really nice.
The MT Harbour VM speed on platforms which have native TLS support is
better then ST xHarbour VM and in practice I resolved all critical
core code synchronization issues which were never even touched in
xHarbour.
If I'll find few spare days then I can try to finish some pending
issues, write few words for some basic documentation and commit it.
But if I'll commit to current 1.0.1 branch then in practice I'll block
all updates for 1.0. I changed a lot of code also for ST mode.
If we want to release 1.0.n with fixes only then I have to create
new branch for it (1.1.0) where we can make tests, modifications,
extensions without any dead line.

best regards,
Przemek
From bedipritpal at hotmail.com  Thu Sep  4 15:53:41 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Sep  4 15:53:47 2008
Subject: [Harbour] What about a six month release cycle?
In-Reply-To: <20080904183409.GA27868@34-mo7-2.acn.waw.pl>
References: <9257026e0809041058p795ae608o4f6ea2f71404dcac@mail.gmail.com>
	<20080904183409.GA27868@34-mo7-2.acn.waw.pl>
Message-ID: <19318700.post@talk.nabble.com>


Hello Przemek


Przemyslaw Czerpak-2 wrote:
> 
> Some changes may not be such trivial to add and finish in 6 months.
> F.e. I'm just playing with Harbour threads and they work really nice.
> The MT Harbour VM speed on platforms which have native TLS support is
> better then ST xHarbour VM and in practice I resolved all critical
> core code synchronization issues which were never even touched in
> xHarbour.
> If I'll find few spare days then I can try to finish some pending
> issues, write few words for some basic documentation and commit it.
> 

WOW, I am waiting MT functionality eagerly since long!!!

Regards
Pritpal Bedi, INDIA-USA

-- 
View this message in context: http://www.nabble.com/What-about-a-six-month-release-cycle--tp19316462p19318700.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From gvarona at ec-red.com  Thu Sep  4 16:25:52 2008
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Thu Sep  4 16:26:01 2008
Subject: [Harbour] test . . . not read
Message-ID: <48C04450.7060407@ec-red.com>

GVS

From harbour.01 at syenar.hu  Thu Sep  4 16:54:22 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep  4 16:54:35 2008
Subject: [Harbour] What about a six month release cycle?
In-Reply-To: <9257026e0809041058p795ae608o4f6ea2f71404dcac@mail.gmail.com>
References: <9257026e0809041058p795ae608o4f6ea2f71404dcac@mail.gmail.com>
Message-ID: <D42F93D1-A1C7-4BFB-AB40-A68ABA9647FB@syenar.hu>

Hi Lorenzo,

I don't think it could work like that for Harbour.

This could be good in theory, but since nobody can
guarantee anything, and the developer force
is - least to say - limited, and nobody of them is
working around a tight schedule, or doing this for
actual money, so we're most probably better to release,
when there is something to release (1.0.1 could soon
be released f.e.).

Moreover, we've just seemed to have settled on a
1.0.x, 1.1.x versioning scheme (finally), with no
objections, so I'm not sure it would be wise to
change that system right on the next release.

For easy reference of the release date, we might
use 1.0.0 r9275 (2008.08.13) kind of version string,
though, where this could help. But, on the sf.net
download page, dates are very easy to see in multiple
places, and 1.1 always newer than 1.0.1, which is
always newer than 1.0.0 so I don't see a big problem
with this. Using the date as a version number may be
useful if we'd like to suggest that a given version
is getting pretty old, or we'd stick some kind of
support timeframe for each version (like for Ubuntu),
but neither of these apply for Harbour. [ as a personal
comment, for me it was not obvious for years that the
Ubuntu version number actually means the year and the
month, and maybe I'm not alone, this is pretty unusual
versioning. ]

So overall, I don't agree with this proposition.

Brgds,
Viktor

On 2008.09.04., at 19:58, Lorenzo Fiorini wrote:

> I find the 6 month release cycle and year.month release numbering very
> clean since there are no discussions about "when to release", "what
> include in the new release" and "how to name the next version".
>
> Every developer knows that after a release there are 4-5 months for
> committing new code and 2-1 months for cleaning and testing.
> This also means that the new release can have few or no changes ( if
> there are no changes it can be skipped of course ).
>
> If we had 1.0 released 08.08 ( August 2008 ) then the next version
> will be 09.02 and so on.
> The user simply knows that 09.02 is more recent than 08.08. If there
> are some bugfix releases they can be 09.02.1-2-3-4.
> If we find August a critical month for vacations, we can adopt the
> "standard" 04 ( April ) 10 ( October ) timeframe.
>
> Comments?
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Sep  4 16:57:27 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep  4 16:57:36 2008
Subject: [Harbour] What about a six month release cycle?
In-Reply-To: <20080904183409.GA27868@34-mo7-2.acn.waw.pl>
References: <9257026e0809041058p795ae608o4f6ea2f71404dcac@mail.gmail.com>
	<20080904183409.GA27868@34-mo7-2.acn.waw.pl>
Message-ID: <E2709053-F3FE-48B0-8CEC-D91C9782FA52@syenar.hu>

>
Hi Przemek,

>> "standard" 04 ( April ) 10 ( October ) timeframe.
>> Comments?
>
> Some changes may not be such trivial to add and finish in 6 months.
> F.e. I'm just playing with Harbour threads and they work really nice.
> The MT Harbour VM speed on platforms which have native TLS support is
> better then ST xHarbour VM and in practice I resolved all critical
> core code synchronization issues which were never even touched in
> xHarbour.
> If I'll find few spare days then I can try to finish some pending
> issues, write few words for some basic documentation and commit it.
> But if I'll commit to current 1.0.1 branch then in practice I'll block
> all updates for 1.0. I changed a lot of code also for ST mode.
> If we want to release 1.0.n with fixes only then I have to create
> new branch for it (1.1.0) where we can make tests, modifications,
> extensions without any dead line.

This can be done also, but to follow the plans, I think it'd
be slightly better if I'd just merge all current trunk changes
to 1.0 branch, and then you could instantly continue with 1.1
in the trunk as planned.

I was about to do this merge anyway, just been waiting for
some feedback.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep  4 17:00:18 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep  4 17:00:27 2008
Subject: [Harbour] 2008-08-31 10:53 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <48C032F5.2020703@yahoo.es>
References: <01c90b49$Blat.v2.6.2$17638acc$2708f6e7b94@127.0.0.1>
	<48BA9EE7.8090707@ec-red.com>
	<44607B6B-F86D-4A8D-8A17-BBCDDD2DCD92@syenar.hu>
	<48C032F5.2020703@yahoo.es>
Message-ID: <171A7079-CA13-4824-A496-420227BC5DEB@syenar.hu>

Hi Guillermo,

>>
>> It could help if you remove BEGIN SEQUENCE
>> and see what RTE is exactly happening here.
> This is the RTE:
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ???????????????????????
> ? Error BASE/1004 No exported method: NAME ?
> ? ?
> ? Quit ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ?
> ???????????????????????
> Error BASE/1004 No exported method: NAME
> Called from NAME(0)
> Called from EXM_MSEXCEL(139)
> Called from MAIN(42)
> D:\SyS_GVS\Utils\CUN2XLS>
>>
>> I don't have Excel, so this example doesn't
>> really help me. If you could fire up a C debugger
>> and see what's happening and where, it could help
>> a lot. As another option, you may also try the
>> same test using RC2, RC1 or even earlier Harbour
>> release version of hbole.lib to see if anyone of
>> those work.
>
> Now I can not prove, but before I worked well, I do not remember which
> version is.
> Try to get the version which worked well

This would be very useful, as I won't be able to test
this at all on my systems. Or maybe someone can help
who is using hbole (I'm not).

[ you can build any revisions by checking out a given
one (svn co -r I believe) and build this lib using that
source code, but there are a few binary releases too,
easy to access from the Harbour dl page.]

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep  4 19:26:23 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep  4 19:26:26 2008
Subject: [Harbour] [1.0] 2008-09-05 01:14 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c90ee5$Blat.v2.6.2$a4cdf812$b8c8eb7c0ce@127.0.0.1>

; Merging changes to 1.0 branch from trunk r9176 to r9310.

2008-09-05 01:14 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   - make_vcce.bat
   - make_vcce.mak
   + tests/rddtest
   + tests/rddtest/rddmktst.prg
   + tests/rddtest/adscl52.prg
   + tests/rddtest/adscl53.prg
   + tests/rddtest/ntxcl52.prg
   + tests/rddtest/ntxcl53.prg
   + tests/rddtest/cdxcl52.prg
   + tests/rddtest/make_c52.bat
   + tests/rddtest/rddtst.prg
   + tests/rddtest/cdxcl53.prg
   + tests/rddtest/make_c53.bat
   + tests/altdtest.prg
   - tests/altd.prg
   - contrib/hbw32ddr
   + contrib/gtalleg
   + contrib/gtalleg/common.mak
   + contrib/gtalleg/make_gcc.sh
   + contrib/gtalleg/make_b32.bat
   + contrib/gtalleg/make_vc.bat
   + contrib/xhb/arrayblk.prg
   + contrib/hbwhat32/whtdll.c
   - contrib/hbwhat32/_winkbrd.c
   + contrib/hbwhat32/whtdate.c
   - contrib/hbwhat32/_wintext.c
   + contrib/hbwhat32/whtini.c
   - contrib/hbwhat32/_windc.c
   - contrib/hbwhat32/_winrgn.c
   - contrib/hbwhat32/_windraw.c
   + contrib/hbwhat32/whticon.c
   - contrib/hbwhat32/_wintree.c
   + contrib/hbwhat32/whtcret.c
   - contrib/hbwhat32/_wingdi.c
   - contrib/hbwhat32/_winmenu.c
   - contrib/hbwhat32/_winscrlb.c
   + contrib/hbwhat32/whtsock.c
   - contrib/hbwhat32/_windlg.c
   + contrib/hbwhat32/whthead.c
   + contrib/hbwhat32/whtseria.c
   - contrib/hbwhat32/wintypes.ch
   - contrib/hbwhat32/_windate.c
   - contrib/hbwhat32/_winsys.c
   + contrib/hbwhat32/whtcall.c
   + contrib/hbwhat32/whtilst.c
   + contrib/hbwhat32/whtreg.c
   + contrib/hbwhat32/whtmem.c
   + contrib/hbwhat32/whtclpb.c
   - contrib/hbwhat32/_winicon.c
   - contrib/hbwhat32/_winwnd.c
   + contrib/hbwhat32/whtmous.c
   + contrib/hbwhat32/whtmeta.c
   + contrib/hbwhat32/whtmapi.c
   + contrib/hbwhat32/whtrgn.c
   - contrib/hbwhat32/_winmmcap.c
   - contrib/hbwhat32/_wincret.c
   + contrib/hbwhat32/whttbar.c
   - contrib/hbwhat32/_winsock.c
   - contrib/hbwhat32/_winprn.c
   - contrib/hbwhat32/_winhead.c
   + contrib/hbwhat32/whtrect.c
   + contrib/hbwhat32/whtbrsh.c
   - contrib/hbwhat32/_wintab.c
   - contrib/hbwhat32/_winshell.c
   + contrib/hbwhat32/whtgdi.c
   + contrib/hbwhat32/whtscrlb.c
   - contrib/hbwhat32/_winilst.c
   - contrib/hbwhat32/_wincall.c
   + contrib/hbwhat32/whtdlg.c
   - contrib/hbwhat32/_winbmp.c
   - contrib/hbwhat32/_windir.c
   - contrib/hbwhat32/_winclpb.c
   + contrib/hbwhat32/whtview.c
   - contrib/hbwhat32/_winpen.c
   - contrib/hbwhat32/_winmous.c
   + contrib/hbwhat32/whtsys.c
   - contrib/hbwhat32/_winmeta.c
   - contrib/hbwhat32/_winmapi.c
   - contrib/hbwhat32/_winmsg.c
   + contrib/hbwhat32/whtlv.c
   - contrib/hbwhat32/_wintbar.c
   + contrib/hbwhat32/whtmain.c
   - contrib/hbwhat32/_winrect.c
   - contrib/hbwhat32/_winbrsh.c
   + contrib/hbwhat32/whtwnd.c
   + contrib/hbwhat32/whtcomm.c
   + contrib/hbwhat32/whtmisc.c
   + contrib/hbwhat32/whtmmcap.c
   + contrib/hbwhat32/whtinet.c
   + contrib/hbwhat32/whtprn.c
   - contrib/hbwhat32/_winview.c
   - contrib/hbwhat32/_windll.c
   + contrib/hbwhat32/whtfont.c
   + contrib/hbwhat32/whttab.c
   + contrib/hbwhat32/whtshell.c
   - contrib/hbwhat32/_winini.c
   + contrib/hbwhat32/whtcdlg.c
   - contrib/hbwhat32/_winlv.c
   - contrib/hbwhat32/_winmain.c
   + contrib/hbwhat32/whtbmp.c
   + contrib/hbwhat32/whtdir.c
   + contrib/hbwhat32/whtkbrd.c
   + contrib/hbwhat32/whtpen.c
   + contrib/hbwhat32/whttext.c
   - contrib/hbwhat32/_winmisc.c
   - contrib/hbwhat32/_wincomm.c
   + contrib/hbwhat32/whtdc.c
   + contrib/hbwhat32/whtmsg.c
   - contrib/hbwhat32/_wininet.c
   + contrib/hbwhat32/whtdraw.c
   + contrib/hbwhat32/whttree.c
   - contrib/hbwhat32/_winfont.c
   - contrib/hbwhat32/_wincdlg.c
   + contrib/hbwhat32/whtmenu.c
   - contrib/hbwhat32/_winreg.c
   - contrib/hbwhat32/_winmem.c
   - contrib/hbwhat32/_winserial.c
   - contrib/hbgt/strdiff.c
   + contrib/hbgt/charmixg.c
   + contrib/hbgt/asciisgt.c
   + contrib/hbgt/strdiffg.c
   - contrib/hbgt/asciisum.c
   + contrib/hbgt/ascposgt.c
   - contrib/hbgt/ascpos.c
   - contrib/hbgt/charmix.c
   + contrib/hbziparc
   - contrib/hbziparc/Wildcard.h
   - contrib/hbziparc/ZipString.h
   - contrib/hbziparc/FileInfo.h
   - contrib/hbziparc/ZipFileMapping_lnx.h
   - contrib/hbziparc/ZipMutex_win.h
   - contrib/hbziparc/ZipPathComponent.h
   + contrib/hbziparc/hbziparc.prg
   - contrib/hbziparc/Aes.h
   - contrib/hbziparc/BaseLibCompressor.cpp
   - contrib/hbziparc/ZipCentralDir.h
   - contrib/hbziparc/RandomPool.h
   - contrib/hbziparc/ZipPathComponent_win.cpp
   - contrib/hbziparc/zlib
   - contrib/hbziparc/ZipString_stl.h
   - contrib/hbziparc/ZipPlatform_win.cpp
   - contrib/hbziparc/std_mfc.h
   - contrib/hbziparc/DeflateCompressor.h
   - contrib/hbziparc/ZipCrc32Cryptograph.h
   - contrib/hbziparc/Wildcard.cpp
   - contrib/hbziparc/ZipString.cpp
   - contrib/hbziparc/FileFilter.h
   - contrib/hbziparc/ZipMutex.h
   - contrib/hbziparc/ZipCompatibility.cpp
   - contrib/hbziparc/ZipFileMapping_win.h
   - contrib/hbziparc/ZipExtraData.cpp
   - contrib/hbziparc/Sha1.h
   - contrib/hbziparc/hbziparc.c
   - contrib/hbziparc/ZipArchive.cpp
   - contrib/hbziparc/hbziparc.h
   - contrib/hbziparc/ZipFileHeader.h
   - contrib/hbziparc/DirEnumerator.cpp
   - contrib/hbziparc/DeflateCompressor.cpp
   - contrib/hbziparc/ZipBaseException.h
   - contrib/hbziparc/std_stl.h
   - contrib/hbziparc/_features.h
   - contrib/hbziparc/ZipFileMapping.h
   - contrib/hbziparc/BaseLibCompressor.h
   - contrib/hbziparc/FileFilter.cpp
   - contrib/hbziparc/ZipException.h
   - contrib/hbziparc/hbzipnew.cpp
   - contrib/hbziparc/ZipCryptograph.h
   - contrib/hbziparc/ZipAbstractFile.h
   - contrib/hbziparc/ZipStorage.h
   - contrib/hbziparc/ZipStringStoreSettings.h
   - contrib/hbziparc/stdafx.h
   - contrib/hbziparc/ZipCompatibility.h
   - contrib/hbziparc/ZipExtraData.h
   - contrib/hbziparc/ZipMemFile.h
   - contrib/hbziparc/Hmac.cpp
   - contrib/hbziparc/Bzip2Compressor.h
   - contrib/hbziparc/ZipExport.h
   - contrib/hbziparc/ZipArchive.h
   - contrib/hbziparc/ZipExtraField.cpp
   - contrib/hbziparc/ZipFileHeader.cpp
   + contrib/hbziparc/hbzipcpp.old
   - contrib/hbziparc/ZipPlatform.h
   - contrib/hbziparc/ZipAesCryptograph.cpp
   - contrib/hbziparc/ZipException.cpp
   - contrib/hbziparc/ZipCompressor.h
   - contrib/hbziparc/ZipFile_stl.cpp
   - contrib/hbziparc/DirEnumerator.h
   - contrib/hbziparc/ZipCryptograph.cpp
   - contrib/hbziparc/ZipStorage.cpp
   - contrib/hbziparc/hbxdirec.c
   - contrib/hbziparc/ZipAutoBuffer.h
   - contrib/hbziparc/ZipCollections_mfc.h
   - contrib/hbziparc/ZipFile_mfc.h
   - contrib/hbziparc/resource.h
   - contrib/hbziparc/ZipCallbackProvider.h
   - contrib/hbziparc/ZipMemFile.cpp
   - contrib/hbziparc/Bzip2Compressor.cpp
   - contrib/hbziparc/ZipCollections.h
   - contrib/hbziparc/ZipFile.h
   - contrib/hbziparc/Aes.cpp
   - contrib/hbziparc/ZipCentralDir.cpp
   - contrib/hbziparc/RandomPool.cpp
   - contrib/hbziparc/ZipMutex_lnx.h
   - contrib/hbziparc/Hmac.h
   - contrib/hbziparc/ZipExtraField.h
   - contrib/hbziparc/ZipCompressor.cpp
   - contrib/hbziparc/License.txt
   - contrib/hbziparc/ZipCrc32Cryptograph.cpp
   - contrib/hbziparc/ZipAesCryptograph.h
   - contrib/hbziparc/ZipPathComponent_lnx.cpp
   - contrib/hbziparc/ZipPlatformComm.cpp
   - contrib/hbziparc/ZipString_mfc.h
   - contrib/hbziparc/ZipCallback.h
   - contrib/hbziparc/ZipAutoBuffer.cpp
   - contrib/hbziparc/ZipFile_mfc.cpp
   - contrib/hbziparc/ZipCollections_stl.h
   - contrib/hbziparc/BytesWriter.h
   - contrib/hbziparc/ZipPlatform_lnx.cpp
   - contrib/hbziparc/_platform.h
   - contrib/hbziparc/ZipFile_stl.h
   - contrib/hbziparc/readme.txt
   - contrib/hbziparc/Sha1.cpp
   - contrib/hbziparch
   + contrib/hbnf/tests/ftgete.prg
   - contrib/hbgf/hbgfos2/tmenuitm.prg
   + contrib/hbgf/hbgfos2/tmenuit.prg
   + contrib/hbbtree/tests/bld_djgp.bat
   - contrib/hbbtree/tests/mktest.bat
   + contrib/hbbtree/tests/bld_b32.bat
   + contrib/hbbtree/tests/bld_vc.bat
   + source/vm/debugold.c
   - source/rtl/gtalleg
   - source/hbpcre/ucpinter.h
   + source/hbpcre/pcreucd.c
   - source/hbpcre/pcrefind.c
   - source/hbpcre/ucptable.h
   - utils/hbdoc/rtf.prg
   - utils/hbdoc/fclass1.prg
   - utils/hbdoc/os2.prg
   - utils/hbdoc/teeasc.prg
   - utils/hbdoc/ng.prg
   - utils/hbdoc/html.prg
   - utils/hbdoc/ffile1.prg
   + utils/hbdoc/hbdfrdln.c
   - utils/hbdoc/troff.prg
   - utils/hbmake/fclass1.prg
   - utils/hbmake/checkdef.ch
   - utils/hbmake/checks.prg
   - utils/hbmake/hbdocdef.ch
   - utils/hbmake/tmake.prg
   - utils/hbmake/checks.ch
   - utils/hbmake/prb_stak.prg
   - utils/hbmake/ffile1.prg
   - utils/hbmake/ft_funcs.prg
   + utils/hbmake/hbmgauge.c
   - utils/hbmake/readline.c
   - utils/hbmake/radiodef.ch
   - utils/hbmake/radios.prg
   - utils/hbmake/radios.ch
   - utils/hbmake/pickarry.prg
   - utils/hbmake/pickfile.prg
   + utils/hbmake/hbmfrdln.c
   - utils/hbmake/hbmutils.prg
   + config/w32/mingwce.cf
   + config/w32/poccce.cf
   - config/w32/cemgw.cf
   + config/w32/msvcce.cf
     * Pass 1: File/dir deletions, additions, renames 
       between r9176 and r9310 in trunk.
--
Brgds,
Viktor

From arcadia2 at sbcglobal.net  Thu Sep  4 19:48:29 2008
From: arcadia2 at sbcglobal.net (bill robertson)
Date: Thu Sep  4 19:48:33 2008
Subject: [Harbour] debug bug
References: <3644757B55A1458AA7F8115FF329A491@billws>
	<20080904172532.GA13353@34-mo7-2.acn.waw.pl>
Message-ID: <690F39A5F64A4A1ABA4796565364DBE4@billws>

----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Thursday, September 04, 2008 1:25 PM
Subject: Re: [Harbour] debug bug


> On Thu, 04 Sep 2008, bill robertson wrote:
>
> Hi Bill,
>
>> In the example below:
>> -------------------------------------
>> FUNCTION MAIN()
>> LOCAL cVar
>> ALTD()
>> cVar:= 5  // Just to stop on something
>> RETURN 0
>> --------------------------------------
>> If I go to the command window of the debugger and ask a few questions:
>> ? s             // nil as expected
>
> This is a bug, should be: "Undefined" instead of "NIL"
>
>> ? (s:= 3)   // 3 as expected
>
> It's OK.
>
>> ? s            // nil - not expected
>
> We can implement it but it in Clipper it creates new
> private variable 's' inside main() function in the above
> example what may effect executing program.
>
>> xHarbour and Clipper show s = 3 instead of nil.
>
> Which xHarbour version?
> I've tested current one and it gives exactly the same results
> as Harbour. Some older xHarbour versions may behaves differently
> because all memvar variables created inside macro evaluated by
> TYPE() function were created as PUBLIC ones instead of PRIVATE
> which should be destroyed after leaving current function. A side
> effect of this behavior can give the results you are looking for.
>
>> It's very useful to do a few calculations and save results for tests you
>> didn't anticipate.
>
> What do you need exact Clipper behavior or temporary variables inside
> debugger only?
>
> best regards,
> Przemek


Hi Przemek,

I used whatever the latest xHarbour build was
xHarbour Compiler build 1.1.0 (SimpLex) (Rev. 6207)

I was trying to debug an Extrasensory Software program for another 
developer. He is moving an old clipper application to xHarbour that uses 
their implementation of DES (ECB mode) and needed it duplicated so he could 
run the clipper app while moving from 16-bit to 32-bit system. I was just 
trying to duplicate some of their behavior and was using the debugger to 
calc some values that I hadn't anticipated when I noticed the difference 
between Harbour and Clipper. Clipper compatibility for this is not anything 
that needs to be done; I can always throw in a few temp values if I need to 
do this sort of play. I'm doing most of tests in clipper anyway since thats 
where the library functions are.

I noticed that you fixed the md5 problem (xHarbour hasn't) so you will 
understand this. Extrasensory DES ignored the high-order bit of each of the 
8-byte key instead of the low-order bit producing wrong answers to any copy 
of DES that is available. They don't support the product anymore and didn't 
seem to have the source when asked. I tried to get advice on sci.crypt but 
got only one reply and it was something that I had already tried. Have you 
any experience with DES? What might I try? I don't have their DES library 
but I could give other developer instructions on stripping object out of 
library and try obj2c or something. I hate to do that it's such a mess. I 
have a small program incorporating their library in Clipper where I can get 
anything I need. Little needs to be done in harbour or clipper; most of the 
work must be done in c since I need to fix the real DES to work their way. 

From harbour.01 at syenar.hu  Thu Sep  4 20:11:29 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep  4 20:11:35 2008
Subject: [Harbour] [1.0] 2008-09-05 01:40 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c90eeb$Blat.v2.6.2$f2037aac$5c4c680a756@127.0.0.1>

; Merging changes to 1.0 branch from trunk r9176 to r9310. (pass 2)

2008-09-05 01:40 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * Pass 2: All file/dir deletions, additions, renames were added 
     in the previous commit, now comes all file changes in trunk
     between r9176 and r9310, in one, second pass.
     See below the original entries.

--

2008-09-04 19:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/dbfntx/dbfntx1.c
    ! fixed typo in previous commit

2008-09-04 19:08 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/dbfntx/dbfntx1.c
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
    ! fixed dirty index reading, thx Miguel for bug report

  * harbour/source/compiler/hbmain.c
    * removed old comment and hack

2008-09-04 15:58 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * config/w32/msvc.cf
   * config/w32/msvcce.cf
     * Synced with latest non-GNU changes.

<...snip to fit into the mailing list's size limit...>

2008-08-14 18:15 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * ChangeLog
     + Added entry for yesterday's syncing/tagging.

   * make_deb.sh
     ! Removed hbsqlit2 from contrib list.
     + Added libharu detection.
     + Added FreeImage detection (commented).
     * Contrib list more or less ordered by alphabet.
     ; [ QUESTION: Do we need to keep this logic duplicated here, 
       if we now have the detection logic and contrib list 
       embedded into the make system anyway? ]

   * doc/linux1st.txt
     * Synced with make_deb.sh.

2008-08-14 00:08 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/hb-func.sh
    ! updated SunOS and HPUX library list
    ! allow to set startup .prg function in DJGPP builds

  * harbour/include/hbdefs.h
    ! defined HARBOUR_START_PROCEDURE procedure for DMC
      it fixes problem with executing final applications

  * harbour/config/w32/dm.cf
    ! disabled -o+time - with this switch wrong code is generated
      what can be seen in HBRUN
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep  4 22:02:27 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep  4 22:02:31 2008
Subject: [Harbour] 2008-09-05 04:01 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90efb$Blat.v2.6.2$725ea91a$1044cd353ce6@127.0.0.1>

2008-09-05 04:01 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * doc/whatsnew.txt
     + Added 1.0.1 changes. Please review.
       [1.0.1]
--
Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Fri Sep  5 04:15:17 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Sep  5 04:15:23 2008
Subject: [Harbour] What about a six month release cycle?
In-Reply-To: <20080904183409.GA27868@34-mo7-2.acn.waw.pl>
References: <9257026e0809041058p795ae608o4f6ea2f71404dcac@mail.gmail.com>
	<20080904183409.GA27868@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809050115x5e2367bcyc45e4d0b878c44cc@mail.gmail.com>

On Thu, Sep 4, 2008 at 8:34 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> Some changes may not be such trivial to add and finish in 6 months.
> ...
> If we want to release 1.0.n with fixes only then I have to create
> new branch for it (1.1.0) where we can make tests, modifications,
> extensions without any dead line.

Sorry, my intention was not to define deadlines, this is a voluntary
based project.
The 6 six release define the dates of the releases not what should be included.
It's only a way to keep the project alive and to "sync the clock" of
the members.
Core developers will decide which branch/tag will be the released
based on the status.

However it was only a suggestion, it's more important what's inside
than how it is called or when it will be released.

best regards,
Lorenzo
From mbelgrano at deltain.it  Fri Sep  5 05:12:51 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Sep  5 05:13:00 2008
Subject: [Harbour] What about a six month release cycle?
In-Reply-To: <19318700.post@talk.nabble.com>
References: <9257026e0809041058p795ae608o4f6ea2f71404dcac@mail.gmail.com><20080904183409.GA27868@34-mo7-2.acn.waw.pl>
	<19318700.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF33@SRV02.deltain.net>

Hi Pritpal
MT is very good news
I hope in your support of multiple active windows gt
Is still possible?
I am also interested to your project regarding gt & hb documentation 
Best regard
Massimo



From harbour.01 at syenar.hu  Fri Sep  5 05:15:25 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep  5 05:15:38 2008
Subject: [Harbour] 2008-09-05 11:12 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90f37$Blat.v2.6.2$ee2f5b8e$62c40e2a2b8@127.0.0.1>

2008-09-05 11:12 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/mtpl_vc.mak
     - Removed recently (and mistakenly) added unnecessary option.
       [TOMERGE 1.0.1]

   * source/macro/macro.y
     - Removed old comment, other part synced with harbour.y.
       [TOMERGE 1.0.1]

   * source/rdd/dbffpt/dbffpt1.c
     ! Fixed MSVC -W4 potentially unused var warnings.
       [TOMERGE 1.0.1]

   * contrib/Makefile
   * contrib/make_b32_all.bat
   * contrib/make_gcc_all.sh
   * contrib/make_vc_all.bat
     - Removed (commented) references to hbsqlit2.
       hbsqlit2 is broken due to foreign code problems.
       It will be converted to use separately compiled 
       sqlite2 library. Pls use hbsqlit3 as a replacement.
       [TOMERGE 1.0.1]

   - contrib/hbsqlit2/vdbeaux.c
   - contrib/hbsqlit2/build.c
   - contrib/hbsqlit2/vdbeInt.h
   - contrib/hbsqlit2/opcodes.h
   - contrib/hbsqlit2/btree.c
   - contrib/hbsqlit2/delete.c
   - contrib/hbsqlit2/printf.c
   - contrib/hbsqlit2/trigger.c
   - contrib/hbsqlit2/attach.c
   - contrib/hbsqlit2/btree.h
   - contrib/hbsqlit2/sqlite.h
   - contrib/hbsqlit2/pragma.c
   - contrib/hbsqlit2/config.h
   - contrib/hbsqlit2/util.c
   - contrib/hbsqlit2/select.c
   - contrib/hbsqlit2/os.c
   - contrib/hbsqlit2/hash.c
   - contrib/hbsqlit2/os.h
   - contrib/hbsqlit2/hash.h
   - contrib/hbsqlit2/tokenize.c
   - contrib/hbsqlit2/pager.c
   - contrib/hbsqlit2/vacuum.c
   - contrib/hbsqlit2/auth.c
   - contrib/hbsqlit2/pager.h
   - contrib/hbsqlit2/insert.c
   - contrib/hbsqlit2/copy.c
   - contrib/hbsqlit2/parse.c
   - contrib/hbsqlit2/where.c
   - contrib/hbsqlit2/date.c
   - contrib/hbsqlit2/expr.c
   - contrib/hbsqlit2/parse.h
   - contrib/hbsqlit2/LICENSE.txt
   - contrib/hbsqlit2/random.c
   - contrib/hbsqlit2/vdbe.c
   - contrib/hbsqlit2/sqliteInt.h
   - contrib/hbsqlit2/update.c
   - contrib/hbsqlit2/main.c
   - contrib/hbsqlit2/btree_rb.c
   - contrib/hbsqlit2/vdbe.h
   - contrib/hbsqlit2/table.c
   - contrib/hbsqlit2/func.c
   - contrib/hbsqlit2/opcodes.c
   - contrib/hbsqlit2/encode.c
     - Removed foreign code.
       [TOMERGE 1.0.1]
--
Brgds,
Viktor

From mbelgrano at deltain.it  Fri Sep  5 05:19:45 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Sep  5 05:19:51 2008
Subject: [Harbour] Proposed home page layout
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C03268A69ED@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C03268A69ED@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF34@SRV02.deltain.net>

I dont like this colour
Imo is better usi web2.0 colour 

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Chen Kedem
Sent: Thursday, September 04, 2008 11:02 AM
To: harbour@harbour-project.org
Subject: [Harbour] Proposed home page layout

I am not a web master nor a graphic designer, but here is (attached) my
suggestion for a new Harbour home page. I do like the current logo and
ship colors, so I used them in the design.
I think it is simple and make it easy to find the information you need.

For start it would contain the content of the current site texts just
layout in this new design, later it could be updated with any new data
and maybe translated to other lagnuages (their small flags and links
could be put on the white section on the top right).

What do you think?


  Chen.
From lorenzo.fiorini at gmail.com  Fri Sep  5 06:05:01 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Sep  5 06:05:06 2008
Subject: [Harbour] hbinet.c, hbtip bugs in 1.0
Message-ID: <9257026e0809050305s5e79cdb8pae55a47c2a92c875@mail.gmail.com>

I've just found a bug in source/rtl/hbinet.c 1.0:

HB_FUNC( HB_INETGETSNDBUFSIZE )
{
...
      getsockopt( Socket->com, SOL_SOCKET, SO_SNDBUF, ( void * ) &value, &len );
#endif
      hb_retni( value );  <---- this seems missed
   }
}

In contrib/hbtip/tests/tiptest.prg "Retrieve" is missplelled as
"Retreive" in few comments, but
in contrib/hbtip/popcln.prg is missplelled the call of a method:

METHOD Read( nLen ) CLASS tIPClientPOP
...
RETURN ::Retreive( Val (::oUrl:cFile ), nLen )

should be

RETURN ::Retrieve( Val (::oUrl:cFile ), nLen )

I'm not sure where commit, so please commit them if confirmed.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Fri Sep  5 06:05:10 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep  5 06:05:16 2008
Subject: [Harbour] 2008-09-05 12:01 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90f3e$Blat.v2.6.2$e19b6e7e$a40d9fb3e14@127.0.0.1>

2008-09-05 12:01 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/common/hbver.c
     ! Version detection fixed for __DMC__
       [TOMERGE 1.0.1]

   * contrib/mtpl_gcc.mak
     % One unnecessary C -I option deleted.
       [TOMERGE 1.0.1]

   - contrib/hbsqlit2
   + contrib/examples/hbsqlit2
   * doc/whatsnew.txt
     * Moved hbsqlit2 to examples.
       [TOMERGE 1.0.1]

   * contrib/examples/hbsqlit2/Makefile
   * contrib/examples/hbsqlit2/make_b32.bat
   * contrib/examples/hbsqlit2/make_gcc.sh
   * contrib/examples/hbsqlit2/make_vc.bat
   * contrib/examples/hbsqlit2/common.mak
   * contrib/examples/hbsqlit2/tests/bld_b32.bat
   * contrib/examples/hbsqlit2/tests/bld_vc.bat
     * Modified make files to work from the new location.
     * Location of sqlite2 headers can be specified by HB_INC_SQLITE2.
     ; Notice that sqlite2 lib itself should now be build separately.
       [TOMERGE 1.0.1]
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Sep  5 06:13:06 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep  5 06:13:20 2008
Subject: [Harbour] hbinet.c, hbtip bugs in 1.0
In-Reply-To: <9257026e0809050305s5e79cdb8pae55a47c2a92c875@mail.gmail.com>
References: <9257026e0809050305s5e79cdb8pae55a47c2a92c875@mail.gmail.com>
Message-ID: <B70B9B45-0D98-4B59-9DD8-7A67F554D525@syenar.hu>

Hi Lorenzo,

Just commit these to the main branch and "tag"
them in the ChangeLog entry with '[TOMERGE 1.0.1]',
I'll merge these later to 1.0 branch with the rest
of latest changes.

Brgds,
Viktor

On 2008.09.05., at 12:05, Lorenzo Fiorini wrote:

> I've just found a bug in source/rtl/hbinet.c 1.0:
>
> HB_FUNC( HB_INETGETSNDBUFSIZE )
> {
> ...
>      getsockopt( Socket->com, SOL_SOCKET, SO_SNDBUF, ( void * )  
> &value, &len );
> #endif
>      hb_retni( value );  <---- this seems missed
>   }
> }
>
> In contrib/hbtip/tests/tiptest.prg "Retrieve" is missplelled as
> "Retreive" in few comments, but
> in contrib/hbtip/popcln.prg is missplelled the call of a method:
>
> METHOD Read( nLen ) CLASS tIPClientPOP
> ...
> RETURN ::Retreive( Val (::oUrl:cFile ), nLen )
>
> should be
>
> RETURN ::Retrieve( Val (::oUrl:cFile ), nLen )
>
> I'm not sure where commit, so please commit them if confirmed.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From soporte at dsgsoftware.com  Fri Sep  5 06:23:12 2008
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Fri Sep  5 06:24:25 2008
Subject: [Harbour] About DbOrderInfo( DBOI_CUSTOM ) / OrdCustom()
References: <9257026e0809041058p795ae608o4f6ea2f71404dcac@mail.gmail.com><20080904183409.GA27868@34-mo7-2.acn.waw.pl>
	<9257026e0809050115x5e2367bcyc45e4d0b878c44cc@mail.gmail.com>
Message-ID: <000801c90f41$71fe6c80$6c01a8c0@PcJuanxp>

Hi Przemek,

I noticed a custom tag cannot be convert to NO custom. It isn't posible due 
to the synchronization between pTag->Template and pTag->Custom.

Is there some way to do it ?

Many thanks
Juan 

From harbour.01 at syenar.hu  Fri Sep  5 06:34:15 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep  5 06:34:19 2008
Subject: [Harbour] 2008-09-05 12:32 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90f42$Blat.v2.6.2$f19fd7d4$9d06b4a5058@127.0.0.1>

2008-09-05 12:32 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * doc/whatsnew.txt
     * Reviewed, some clarifications.
       [TOMERGE 1.0.1]
--
Brgds,
Viktor

From miguelangel at marchuet.net  Fri Sep  5 07:58:48 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Fri Sep  5 07:58:36 2008
Subject: [Harbour] hbinet.c, hbtip bugs in 1.0
In-Reply-To: <9257026e0809050305s5e79cdb8pae55a47c2a92c875@mail.gmail.com>
References: <9257026e0809050305s5e79cdb8pae55a47c2a92c875@mail.gmail.com>
Message-ID: <48C11EF8.3050409@marchuet.net>

Yes, you are right
I correct it

Best regards,
Miguel Angel marchuet

Lorenzo Fiorini escribi?:
> I've just found a bug in source/rtl/hbinet.c 1.0:
> 
> HB_FUNC( HB_INETGETSNDBUFSIZE )
> {
> ...
>       getsockopt( Socket->com, SOL_SOCKET, SO_SNDBUF, ( void * ) &value, &len );
> #endif
>       hb_retni( value );  <---- this seems missed
>    }
> }
> 
> In contrib/hbtip/tests/tiptest.prg "Retrieve" is missplelled as
> "Retreive" in few comments, but
> in contrib/hbtip/popcln.prg is missplelled the call of a method:
> 
> METHOD Read( nLen ) CLASS tIPClientPOP
> ...
> RETURN ::Retreive( Val (::oUrl:cFile ), nLen )
> 
> should be
> 
> RETURN ::Retrieve( Val (::oUrl:cFile ), nLen )
> 
> I'm not sure where commit, so please commit them if confirmed.
> 
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> __________ Informaci?n de NOD32, revisi?n 3415 (20080904) __________
> 
> Este mensaje ha sido analizado con NOD32 antivirus system
> http://www.nod32.com
> 
> 
> 

From soporte at dsgsoftware.com  Fri Sep  5 08:01:58 2008
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Fri Sep  5 08:02:33 2008
Subject: [Harbour] About DBFCDX custom tags
Message-ID: <000b01c90f4f$450c3230$6c01a8c0@PcJuanxp>

Hi Przemek,

I have a situation with a CUSTOM tag that contains KEY and FOR clause.

I think it's a normal situation that OrdKeyAdd() / OrdKeyDel() don't work if 
the record doesn't respect the FOR clause.

When a valid record is modified and it stops to be valid for the FOR clause 
... Should not it be automatically eliminated of the CUSTOM tag ?

Many thanks
Juan 

From mbelgrano at deltain.it  Fri Sep  5 09:51:04 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Sep  5 09:51:20 2008
Subject: [Harbour] Consideration about CT function and true windows
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF37@SRV02.deltain.net>

Ct function will not seem create true windows (new form)
We can even redirect CT3 window functions so with GTs which support many
console windows 
Will WOPEN()create a new window instead of creating virtual window in
current screen area 
Is possible an automatic mechanism of moving/resising windows with
ct.lib?
Will wopen define as different physical windows and virtual windows?
A virtual screen can be more big that physical and scrolling? (can be
usefull for port to windows mobile)
Is possible using coordinate relative to topmost windows instead of
current windows?
Have anyone example of use of powerfull ct.lib?

Massimo Belgrano

From druzus at acn.waw.pl  Fri Sep  5 09:59:22 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep  5 09:59:29 2008
Subject: [Harbour] 2008-09-05 15:58 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200809051359.m85DxM6h025872@31-mo5-4.acn.waw.pl>

2008-09-05 15:58 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/dbffpt/dbffpt1.c
    ! fixed GPF introduced by today MSVC warning cleanup

best regards
Przemek
From harbour.01 at syenar.hu  Fri Sep  5 10:46:26 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep  5 10:46:48 2008
Subject: [Harbour] 2008-09-05 15:58 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <200809051359.m85DxM6h025872@31-mo5-4.acn.waw.pl>
References: <200809051359.m85DxM6h025872@31-mo5-4.acn.waw.pl>
Message-ID: <FB507D77-F361-4406-95F3-82E82E113D2D@syenar.hu>

Hi Przemek,

Thanks for reviewing my changes. I actually
wanted to make a NOTE to specifically ask for
that, but apparently forgot to do so.

Brgds,
Viktor

On 2008.09.05., at 15:59, Przemyslaw Czerpak wrote:

> 2008-09-05 15:58 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/rdd/dbffpt/dbffpt1.c
>    ! fixed GPF introduced by today MSVC warning cleanup
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From bedipritpal at hotmail.com  Fri Sep  5 10:46:47 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Sep  5 10:46:53 2008
Subject: [Harbour] Proposed home page layout
In-Reply-To: <15AEB0D9-8464-4EAE-A2D1-2227212EB74A@syenar.hu>
References: <1A07FEDC778C3E4AA417F089511F859C03268A69ED@Mail-yoq.SYNEL-COMPANY.LTD>
	<15AEB0D9-8464-4EAE-A2D1-2227212EB74A@syenar.hu>
Message-ID: <19332832.post@talk.nabble.com>


+1

Pritpal Bedi


Szak?ts Viktor wrote:
> 
> Hi Chen,
> 
> I like it, simple and straightforward.
> 
> Brgds,
> Viktor
> 
> On 2008.09.04., at 11:01, Chen Kedem wrote:
> 
>> I am not a web master nor a graphic designer, but here is (attached)  
>> my suggestion for a new
>> Harbour home page. I do like the current logo and ship colors, so I  
>> used them in the design.
>> I think it is simple and make it easy to find the information you  
>> need.
>>
>> For start it would contain the content of the current site texts  
>> just layout in this new design,
>> later it could be updated with any new data and maybe translated to  
>> other lagnuages
>> (their small flags and links could be put on the white section on  
>> the top right).
>>
>> What do you think?
>>
>>
>>  Chen.
>> <harb.jpg>_______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/Proposed-home-page-layout-tp19309399p19332832.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Fri Sep  5 10:53:00 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Sep  5 10:53:05 2008
Subject: [Harbour] What about a six month release cycle?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF33@SRV02.deltain.net>
References: <9257026e0809041058p795ae608o4f6ea2f71404dcac@mail.gmail.com>
	<20080904183409.GA27868@34-mo7-2.acn.waw.pl>
	<19318700.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815EF33@SRV02.deltain.net>
Message-ID: <19333017.post@talk.nabble.com>


Hi

>I hope in your support of multiple active windows gt
>Is still possible?

For sure, yes.

>I am also interested to your project regarding gt & hb documentation 

:-))

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/What-about-a-six-month-release-cycle--tp19316462p19333017.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From miguelangel at marchuet.net  Fri Sep  5 10:58:32 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Fri Sep  5 10:58:18 2008
Subject: [Harbour] 2008-09-05 16:54 UTC+0100 Miguel Angel Marchuet
	<miguelangel@marchuet.net>
Message-ID: <48C14918.4040404@marchuet.net>

2008-09-05 16:54 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
   * contrib/hbbmcdx/bmdbfcdx.c
     ! fixed to not respect bitmap filters when structural order
       is scanned, f.e. in OrdListAdd() with active bitmap filter.
     synced with dbfcdx Prezmek changes

   * source/rtl/hbinet.c
     ! fixed return value of HB_INETGETSNDBUFSIZE

Best regards,
Miguel Angel marchuet
From harbour.01 at syenar.hu  Fri Sep  5 11:00:54 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep  5 11:01:03 2008
Subject: [Harbour] Proposed home page layout
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF34@SRV02.deltain.net>
References: <1A07FEDC778C3E4AA417F089511F859C03268A69ED@Mail-yoq.SYNEL-COMPANY.LTD>
	<AFB948164110ED43B5EB849E8DEEF03815EF34@SRV02.deltain.net>
Message-ID: <6B0894ED-8129-4A5D-822F-5A574DB84A37@syenar.hu>

Once ready, we can tweak the colors in a few minutes
I guess. I don't know what web2.0 colors are, but I'd
be perfectly happy with a white background for example.

Brgds,
Viktor

On 2008.09.05., at 11:19, Massimo Belgrano wrote:

> I dont like this colour
> Imo is better usi web2.0 colour
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org
> [mailto:harbour-bounces@harbour-project.org] On Behalf Of Chen Kedem
> Sent: Thursday, September 04, 2008 11:02 AM
> To: harbour@harbour-project.org
> Subject: [Harbour] Proposed home page layout
>
> I am not a web master nor a graphic designer, but here is (attached)  
> my
> suggestion for a new Harbour home page. I do like the current logo and
> ship colors, so I used them in the design.
> I think it is simple and make it easy to find the information you  
> need.
>
> For start it would contain the content of the current site texts just
> layout in this new design, later it could be updated with any new data
> and maybe translated to other lagnuages (their small flags and links
> could be put on the white section on the top right).
>
> What do you think?
>
>
>  Chen.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Fri Sep  5 11:23:02 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Sep  5 11:23:09 2008
Subject: [Harbour] ChangeLog 2008-09-05 17:11 UTC+0200 Lorenzo Fiorini
Message-ID: <9257026e0809050823y2644f585x87b06d0a61136c3d@mail.gmail.com>

2008-09-05 17:11 UTC+0200 Lorenzo Fiorini (lorenzo.fiorini/at/gmail.com)
  * contrib/hbtip/test/tiptest.prg
  * contrib/hbtip/popcln.prg
    * fixed typos: "retreived vs retrieved"

best regards,
Lorenzo
From miguelangel at marchuet.net  Fri Sep  5 11:48:26 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Fri Sep  5 11:48:10 2008
Subject: [Harbour] 2008-09-05 17:41 UTC+0100 Miguel Angel Marchuet
	<miguelangel@marchuet.net>
Message-ID: <48C154CA.3000306@marchuet.net>

2008-09-05 17:41 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
   * contrib/hbbmcdx/bmdbfcdx.c
     ! fixed dirty index reading.

Best regards,
Miguel Angel Marchuet
From druzus at acn.waw.pl  Fri Sep  5 12:00:31 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep  5 12:00:42 2008
Subject: [Harbour] About DBFCDX custom tags
In-Reply-To: <000b01c90f4f$450c3230$6c01a8c0@PcJuanxp>
References: <000b01c90f4f$450c3230$6c01a8c0@PcJuanxp>
Message-ID: <20080905160031.GA11053@34-mo7-2.acn.waw.pl>

On Fri, 05 Sep 2008, Juan G?lvez wrote:

Hi Juan,

> I have a situation with a CUSTOM tag that contains KEY and FOR clause.
> I think it's a normal situation that OrdKeyAdd() / OrdKeyDel() don't work 
> if the record doesn't respect the FOR clause.
> When a valid record is modified and it stops to be valid for the FOR clause 
> ... Should not it be automatically eliminated of the CUSTOM tag ?

No, it shouldn't. Custom indexes have to be updated manually
by user respecting because only user can fully control their
synchronization with database. RDD only makes synchronization
with other index writes to avoid index corruption. In OrdKeyDel()
the FOR clause is also respected and if it does not pass the condition
then DBFCDX refuse key deletion. The custom flag is not revertible.
Once set it cannot be changed. It's CL53CDX and COMIX compatible
behavior which is different then SIX3 and EMPTY indexes. There are
also some other differences, f.e. see DBOI_MULTIKEY flag. In SIX3 the
same key value with the same associated record can be added more then
once to the index. SIX3 has also concept of template indexes.
Unfortunately CDX header flags does not allow to introduce all
states so in SIX3 a hack with index key function name was used
to indicate this state. All flags are supported by NSX and I
implemented them in Harbour DBFNSX driver (probably I'll commit
it soon).
I also extended NTX driver in Harbour and it supports all these
features and many others. With the exception to dynamic unique
indexes it has everything what exists in DBFCDX also structural
and multi tag indexes or hidden respecting RECNO as part of index
key what resolves the problem with bad NTX performance with many
repeated key values. It also supports features which are not present
in DBFCDX, f.e. large file support up to 4GB (not 4MB), all index
temperature states and different custom index versions. All
is controlled by DBOI_* interface. DBFNSX also supports them.
I have to much other pending jobs now but if I'll find some spare
time then I'll rewrite DBFCDX again to clean the code and add some
missing functionality.

best regards,
Przemek

ps. I'll be absent for weekend.
From harbour.01 at syenar.hu  Fri Sep  5 12:16:26 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep  5 12:16:29 2008
Subject: [Harbour] 2008-09-05 18:12 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90f72$Blat.v2.6.2$bf4e32d2$45c78f0f73a@127.0.0.1>

2008-09-05 18:12 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbapollo/apollo.c
   * contrib/hbclipsm/gauge.c
   * contrib/hbct/atadjust.c
   * contrib/hbct/atnum.c
   * contrib/hbct/atrepl.c
   * contrib/hbct/ctstr.c
   * contrib/hbct/ctwfunc.c
   * contrib/hbct/dattime2.c
   * contrib/hbct/dattime3.c
   * contrib/hbct/files.c
   * contrib/hbct/pack.c
   * contrib/hbct/print.c
   * contrib/hbct/setrc.c
   * contrib/hbfbird/firebird.c
   * contrib/hbhpdf/harupdf.c
   * contrib/hbmisc/hb_f.c
   * contrib/hbmzip/hbmzip.c
   * contrib/hbnf/descendn.c
   * contrib/hbnf/dispc.c
   * contrib/hbnf/ftattr.c
   * contrib/hbnf/ftshadow.c
   * contrib/hbnf/fttext.c
   * contrib/hbodbc/odbc.c
   * contrib/hbole/ole2.c
   * contrib/hbw32/dllcall.c
   * contrib/hbw32/tprinter.c
   * contrib/rddads/ads1.c
   * contrib/xhb/cstructc.c
   * contrib/xhb/hbxml.c
   * contrib/xhb/xhbmsgs.c
   * utils/hbmake/hbmgauge.c
     ! Fixed some MSVS 2008 -W4 warnings.
     ; There are quite some more.

   * contrib/hbhpdf/harupdf.c
     ! HPDF_ADDPAGELABEL() accepting first parameter wrongly.

   * contrib/hbfbird/firebird.c
     ! FBQUERY() potential GPF when using value from freed memory.

   * doc/whatsnew.txt
     * Updated for latest fixes.
--
Brgds,
Viktor

From soporte at dsgsoftware.com  Fri Sep  5 13:05:26 2008
From: soporte at dsgsoftware.com (=?iso-8859-2?Q?Juan_G=E1lvez?=)
Date: Fri Sep  5 13:06:08 2008
Subject: [Harbour] About DBFCDX custom tags
References: <000b01c90f4f$450c3230$6c01a8c0@PcJuanxp>
	<20080905160031.GA11053@34-mo7-2.acn.waw.pl>
Message-ID: <003d01c90f79$acffe240$6c01a8c0@PcJuanxp>

Hi Przemek,

>> I have a situation with a CUSTOM tag that contains KEY and FOR clause.
>> I think it's a normal situation that OrdKeyAdd() / OrdKeyDel() don't work
>> if the record doesn't respect the FOR clause.
>> When a valid record is modified and it stops to be valid for the FOR 
>> clause
>> ... Should not it be automatically eliminated of the CUSTOM tag ?
>
> No, it shouldn't. Custom indexes have to be updated manually
> by user respecting because only user can fully control their
> synchronization with database. RDD only makes synchronization
> with other index writes to avoid index corruption. In OrdKeyDel()
> the FOR clause is also respected and if it does not pass the condition
> then DBFCDX refuse key deletion.

I undertand that perhaps it's a Clipper compatible behavior but I think it's 
also a paradoxical behavior.

 I can add records on my own CUSTOM tag, other users can change them and 
after these changes I cannot delete them because records now don't respect 
the FOR clause.

I think if I've fully control on CUSTOM tags, I'd always can to delete their 
records independently of their FOR clause.

> The custom flag is not revertible.
> Once set it cannot be changed. It's CL53CDX and COMIX compatible
> behavior which is different then SIX3 and EMPTY indexes. There are
> also some other differences, f.e. see DBOI_MULTIKEY flag. In SIX3 the
> same key value with the same associated record can be added more then
> once to the index. SIX3 has also concept of template indexes.
> Unfortunately CDX header flags does not allow to introduce all
> states so in SIX3 a hack with index key function name was used
> to indicate this state. All flags are supported by NSX and I
> implemented them in Harbour DBFNSX driver (probably I'll commit
> it soon).
> I also extended NTX driver in Harbour and it supports all these
> features and many others. With the exception to dynamic unique
> indexes it has everything what exists in DBFCDX also structural
> and multi tag indexes or hidden respecting RECNO as part of index
> key what resolves the problem with bad NTX performance with many
> repeated key values. It also supports features which are not present
> in DBFCDX, f.e. large file support up to 4GB (not 4MB), all index
> temperature states and different custom index versions. All
> is controlled by DBOI_* interface. DBFNSX also supports them.
> I have to much other pending jobs now but if I'll find some spare
> time then I'll rewrite DBFCDX again to clean the code and add some
> missing functionality.

Good news :)

> best regards,
> Przemek
>
> ps. I'll be absent for weekend.

Many thanks
Juan 

From harbour.01 at syenar.hu  Fri Sep  5 14:39:18 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep  5 14:39:26 2008
Subject: [Harbour] 2008-09-05 20:34 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90f86$Blat.v2.6.2$b48a8602$16e83df98f1e@127.0.0.1>

2008-09-05 20:34 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/debug/dbgentry.c
   * source/rtl/do.c
   * source/rtl/xhelp.c
   * contrib/xhb/freadlin.c
   * contrib/hbw32/w32_prn.c
   * contrib/rddads/ads1.c
   * contrib/hbgd/gdwrp.c
   * contrib/hbtip/encmthd.c
   * utils/hbdoc/hbdfrdln.c
   * utils/hbmake/hbmfrdln.c
     ! Fixed some more MSVS 2008 -W4 warnings.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Sep  5 14:46:33 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep  5 14:46:46 2008
Subject: [Harbour] 2008-09-05 20:45 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c90f87$Blat.v2.6.2$b7f3a26e$174480b9fee@127.0.0.1>

2008-09-05 20:45 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/rddads/adsfunc.c
     ! Fixed some more MSVS 2008 -W4 warnings.
--
Brgds,
Viktor

From arcadia2 at sbcglobal.net  Fri Sep  5 15:07:31 2008
From: arcadia2 at sbcglobal.net (bill robertson)
Date: Fri Sep  5 15:07:43 2008
Subject: [Harbour] DES request
Message-ID: <62881D8919FE41EBB8F7E4D6C0ACB1C0@billws>

Hi Przemek,

Forget about the DES request suggestions. I managed to crack the code by 
adding 1 to the pc1 tables and rotating byte left 1-bit. 

From harbour.01 at syenar.hu  Fri Sep  5 15:13:38 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep  5 15:13:56 2008
Subject: [Harbour] MSVS 2008 -W4 warnings
Message-ID: <0C379C18-9C7E-4A98-A1D3-84D4B7B36A6E@syenar.hu>

Hi all,

I'm linking a list of all remaining warnings
when compiling Harbour with MSVS 2008 with
C_USR=-W4 -wd4127
(-wd4127 is to disable warning 4127 'conditional expression is  
constant')

Most if these won't create real life problems, but
some of them may (as practice has already shown),
so it'd be worth to clean them, or at least the
potentially more dangerous ones. A definite benefit
would be to be able to turn on -W4 by default to
further raise code quality.

If we disregard gtwvg, hbwhat32 and 3rd party code
(164 warnings in total), there is 553 warnings left,
of which 142 in contrib, the rest in core.

[ 'conditional expression is constant' is due to some
while(0) macros BTW. ]

Link:
http://www.syenar.hu/harbour/w.zip

Brgds,
Viktor

From toninhofwi at yahoo.com.br  Fri Sep  5 15:39:16 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Fri Sep  5 15:36:30 2008
Subject: [Harbour] Compile error
Message-ID: <dg23c49nhj5flld2bdjplmrg2idqo15216@4ax.com>

Hi, this ugly code fails to compile. Is this expected?

---cut---
PROCEDURE CheckState() CLASS TCounter
   local lBold := ::lBold
   if HB_IsObject( ::oBtnBold ) ; if !( lBold == ::lBold ) ;
::oBtnBold:Refresh( .f. ) ; endif ; endif
return
---cut---

.\counter.prg(115) Error E0004  LOCAL declaration follows executable
statement


Thanks and best regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From harbour.01 at syenar.hu  Fri Sep  5 16:10:59 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep  5 16:11:17 2008
Subject: [Harbour] Compile error
In-Reply-To: <dg23c49nhj5flld2bdjplmrg2idqo15216@4ax.com>
References: <dg23c49nhj5flld2bdjplmrg2idqo15216@4ax.com>
Message-ID: <94FEF117-94E3-47F6-B2D2-99310DF10C62@syenar.hu>

Hi Toninho,

Can you send a self contained example?

Brgds,
Viktor

On 2008.09.05., at 21:39, Toninho@fwi wrote:

> Hi, this ugly code fails to compile. Is this expected?
>
> ---cut---
> PROCEDURE CheckState() CLASS TCounter
>   local lBold := ::lBold
>   if HB_IsObject( ::oBtnBold ) ; if !( lBold == ::lBold ) ;
> ::oBtnBold:Refresh( .f. ) ; endif ; endif
> return
> ---cut---
>
> .\counter.prg(115) Error E0004  LOCAL declaration follows executable
> statement
>
>
> Thanks and best regards,
>
> Toninho.
>
> __________________________________________________
> Fa?a liga??es para outros computadores com o novo Yahoo! Messenger
> http://br.beta.messenger.yahoo.com/
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From teo at windtelsoft.com  Fri Sep  5 16:45:47 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Fri Sep  5 16:34:35 2008
Subject: [Harbour] Compile error
In-Reply-To: <dg23c49nhj5flld2bdjplmrg2idqo15216@4ax.com>
References: <dg23c49nhj5flld2bdjplmrg2idqo15216@4ax.com>
Message-ID: <200809051545.47947.teo@windtelsoft.com>

On Friday 05 September 2008 02:39:16 pm Toninho@fwi wrote:
> Hi, this ugly code fails to compile. Is this expected?
>
> ---cut---
> PROCEDURE CheckState() CLASS TCounter
>    local lBold := ::lBold
>    if HB_IsObject( ::oBtnBold ) ; if !( lBold == ::lBold ) ;
>
> ::oBtnBold:Refresh( .f. ) ; endif ; endif
>
> return
> ---cut---
>
> .\counter.prg(115) Error E0004  LOCAL declaration follows executable
> statement

1. In Harbour/xHarbour you don't have to get the E0004 error, that indicates 
that the "PROCEDURE CheckState() CLASS TCounter" has a executable statement.

2. The code following the LOCAL var declaration ( if ; ... ) can be reduced 
to:

IF .T. ; IF .T. ; ? "True" ; ENDIF ; ENDIF

In Harbour the above code fails to compile.
In xHarbour compiles ok.


Try to get a .ppo for this source ( -p compiler option ) and lets see the 
corresponding code that follows the "PROCEDURE .. CLASS... " section.



best regards

Teo
From toninhofwi at yahoo.com.br  Fri Sep  5 22:36:37 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Fri Sep  5 22:30:23 2008
Subject: [Harbour] Compile error
In-Reply-To: <94FEF117-94E3-47F6-B2D2-99310DF10C62@syenar.hu>
References: <dg23c49nhj5flld2bdjplmrg2idqo15216@4ax.com>
	<94FEF117-94E3-47F6-B2D2-99310DF10C62@syenar.hu>
Message-ID: <f0r3c4pn7lmt9iatav3rjkf35p31bq7tl2@4ax.com>

>Hi Toninho,
>Can you send a self contained example?

Viktor, this shows the problems, but for me is so easy correct it in
my .prg. I'm only reporting it to see if it is a real problem:

---cut---
#include "hbclass.ch"

CLASS TCounter

   METHOD New() CONSTRUCTOR

   METHOD Redefine() CONSTRUCTOR

   METHOD CheckState()

ENDCLASS

PROCEDURE CheckState() CLASS TCounter
   local lBold := ::lBold
   if HB_IsObject( ::oBtnBold ) ; if !( lBold == ::lBold ) ;
::oBtnBold:Refresh( .f. ) ; endif ; endif
return

METHOD New() CLASS TCounter
return Self

METHOD Redefine() CLASS TCounter
return Self

METHOD Default() CLASS TCounter
return nil
---cut---




Thanks and best regards,

Toninho.



__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From bedipritpal at hotmail.com  Fri Sep  5 22:31:06 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Sep  5 22:31:10 2008
Subject: [Harbour] Harbour + GTWVT
In-Reply-To: <19340403.post@talk.nabble.com>
References: <19340403.post@talk.nabble.com>
Message-ID: <19342438.post@talk.nabble.com>


Hi

hb_gtInfo( HB_GTI_CODEPAGE, 255 )

Regards
Pritpal Bedi


Daniel Pereira wrote:
> 
> Hi,
> 
> I?m using Harbour with GTWVT.
> 
> When I set a codepage:
> 
> hb_gtInfo( HB_GTI_CODEPAGE, 1 )
> 
> the Alert function is display:
> 
>  ????????????? 
>  ?   teste   ? 
>  ?           ? 
>  ?    Ok     ? 
>  ????????????? 
> 
> I need set the codepage to use the characters "?" "?" ...
> 
> How to solve this problem
> 
> Many thanks and sorry for my poor english :(
> 

-- 
View this message in context: http://www.nabble.com/Harbour-%2B-GTWVT-tp19340403p19342438.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sat Sep  6 05:11:55 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Sep  6 05:11:59 2008
Subject: [Harbour] 2008-09-06 11:07 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91000$Blat.v2.6.2$9bc118dc$7f8d41fec2e@127.0.0.1>

2008-09-06 11:07 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * make_vc.bat
   * contrib/mtpl_vc.bat
     + Added -nologo to nmake.exe command line.

   * source/vm/memvars.c
   * source/rtl/scroll.c
   * source/rtl/diskspac.c
   * source/rtl/console.c
   * source/rtl/philes.c
   * source/rtl/oldclear.c
   * source/rtl/oldbox.c
   * source/rtl/cdpapi.c
   * source/rtl/setpos.c
   * source/rtl/errorapi.c
   * source/rtl/setcolor.c
   * source/rtl/philes53.c
   * source/rtl/setkey.c
   * source/rtl/disksphb.c
   * source/rtl/shadow.c
   * source/rtl/hbhex.c
   * source/rtl/setcurs.c
   * source/rtl/dates.c
   * source/rtl/gtwvt/gtwvt.c
   * source/rtl/hbinet.c
   * source/rtl/hbffind.c
   * source/rtl/filesys.c
   * contrib/hbct/screen2.c
   * contrib/hbct/screen1.c
   * contrib/hbnf/fttext.c
     ! Fixed more MSVS 2008 -W4 warnings (about 100 of them).

   * contrib/hbnf/fttext.c
     ! Fixed C++ compile error after recently 
       switching to Harbour API from Clipper one.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Sep  6 06:39:58 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Sep  6 06:40:01 2008
Subject: [Harbour] 2008-09-06 12:38 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9100c$Blat.v2.6.2$e8bb9cd2$12ecce18c852@127.0.0.1>

2008-09-06 12:38 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/hbpcre/pcre.h
   * source/hbpcre/config.h
     + Upgraded PCRE lib to 7.8 release version.

   * contrib/hbct/token2.c
   * contrib/examples/pp/hbppcore.c
     * Minor formatting.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Sep  6 19:45:26 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Sep  6 19:45:32 2008
Subject: [Harbour] 2008-09-07 01:44 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9107a$Blat.v2.6.2$a32c2f6a$130c6bcd264@127.0.0.1>

2008-09-07 01:44 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbcurl/make_vc.bat
     ! Fixed external .lib handling for MSVC.

   * contrib/rddads/make_vc.bat
     ! Fixed external .lib handling for MSVC 
       (for older ACE versions).

   * contrib/hbhpdf/make_b32.bat
   * contrib/hbhpdf/make_vc.bat
     + Added .lib/.dll support for libharu 2.1.0 
       binary distribution version.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep  4 20:09:23 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep  7 00:10:27 2008
Subject: [Harbour] [1.0] 2008-09-05 01:40 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c90eeb$Blat.v2.6.2$a6e967ac$d7cb23e6236@127.0.0.1>

; Merging changes to 1.0 branch from trunk r9176 to r9310. (pass 2)

2008-09-05 01:40 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * Pass 2: All file/dir deletions, additions, renames were added 
     in the previous commit, now comes all file changes in trunk
     between r9176 and r9310, in one, second pass.
     See below the original entries.

--

2008-09-04 19:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/dbfntx/dbfntx1.c
    ! fixed typo in previous commit

2008-09-04 19:08 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/dbfntx/dbfntx1.c
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
    ! fixed dirty index reading, thx Miguel for bug report

  * harbour/source/compiler/hbmain.c
    * removed old comment and hack

2008-09-04 15:58 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * config/w32/msvc.cf
   * config/w32/msvcce.cf
     * Synced with latest non-GNU changes.

2008-09-04 09:43 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * make_vc.mak
   * contrib/mtpl_vc.mak
     + -w34701 VC flag added to enabled warning 4701 (uninitialized vars) on -W3 level.
     % -FD VC flag removed. This is only needed for IDEs.
     % -Gs VC flag moved to the common section.
     % VC flags synced in contrib with core.
     + TOFIX added for WinCE command line. It's full of stuff which is _probably_ not needed.
     + NOTE added about MSDN page explaining VC switches.
     ; NOTE: -W4 and -Wp64 are recommended for MSVC.
     ; TOFIX: There are still a few uninit vars warnings:
              harboury.c(7226) : warning C4701: potentially uninitialized local variable 'hb_complval' used
              macroy.c(3095) : warning C4701: potentially uninitialized local variable 'hb_macrolval' used
              dbffpt1.c(2671) : warning C4701: potentially uninitialized local variable 'ulType' used
              dbffpt1.c(2614) : warning C4701: potentially uninitialized local variable 'ulSize' used
              dbffpt1.c(3073) : warning C4701: potentially uninitialized local variable 'ulOldSize' used
              dbffpt1.c(3083) : warning C4701: potentially uninitialized local variable 'ulBlock' used
              dbffpt1.c(3652) : warning C4701: potentially uninitialized local variable 'pBlock' used

   * source/rdd/workarea.c
     ! Fixed DBI_POSITIONED value returned.

   * include/hbsetup.h
   * source/vm/pvalue.c
   * source/rtl/fserror.c
   * source/rtl/accept.c
   * source/rtl/descend.c
   * source/rtl/inkey.c
   * source/rtl/dates.c
   * source/rtl/fkmax.c
   * source/rtl/natmsg.c
   * source/rtl/hbinet.c
   * source/rtl/dates.c
     ! Fixed some MSVS2008 -W4 warnings (we use -W3 as the default).
     ; NOTE: There is a lot more of these.

   * source/rtl/dates.c
     * Formatting.

2008-09-03 23:06 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparc/hbziparc.prg
     ! Fix to one of the rarely used function names.

   * contrib/gtalleg/gtalleg.c
   * contrib/hbw32/dllcall.c
   * contrib/hbcurl/hbcurl.c
   * contrib/hbfimage/fi_winfu.c
   * contrib/hbfimage/fi_wrp.c
   * source/vm/memvars.c
   * source/rtl/gtwin/gtwin.c
   * source/rtl/math.c
   * source/rtl/gtclip.c
   * source/rtl/fstemp.c
   * source/rtl/is.c
   * source/rtl/xsavescr.c
   * source/rtl/fkmax.c
   * source/rtl/langapi.c
   * source/rtl/hbrandom.c
   * source/rtl/hbinet.c
   * source/rtl/hbffind.c
     * Minor formatting, code style/format cleanup (!=/== NULL mostly).

   * source/compiler/genc.c
     * Minor; empty line added to .c output.

2008-09-03 20:03 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparc/hbziparc.prg
     ! Some formatting to docs.
     + Now .zip extension will only be added if _SET_DEFEXTENSIONS 
       is TRUE (the default).

2008-09-03 19:41 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparc/hbziparc.prg
     ! RTE fixed when not specifying some optional params.
     ! Fixed to parse the right array, and thus not exluding 
       all filenames to be zipped.
     ; Disclaimer: I'm not a user of these functions, and 
       I've admittedly not tested them besides tests/unzipa.prg 
       and tests/zipa.prg (which are pretty basic cases), so 
       bumps are expected. If you find some bugs, please try 
       to provide patches to fix them. Thanks.

2008-09-03 16:36 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparc/make_b32.bat
   * contrib/hbziparc/make_vc.bat
     % Special C flags not needed anymore.

   - contrib/hbziparc/hbzipold.cpp
   + contrib/hbziparc/hbzipcpp.old
     * Renamed to not look like something live.

2008-09-03 16:02 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * harbour-ce-spec
   * make_deb.sh
   * harbour-w32-spec
   * harbour.spec
   * contrib/Makefile
   * contrib/make_b32_all.bat
   * contrib/make_gcc_all.sh
   * contrib/make_vc_all.bat
   + contrib/hbziparc
   - contrib/hbziparch
     + hbziparc readded to default contrib list, as it 
       creates no more harm now.
     ; NOTE: And now that this is about ready, we might 
             step forward to develop a .7z interface ;)

2008-09-03 15:47 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/Makefile
   * contrib/hbziparch/common.mak
   + contrib/hbziparch/hbziparc.prg
   - contrib/hbziparch/hbzipnew.cpp
   + contrib/hbziparch/hbzipold.cpp
   * contrib/hbziparch/tests/bld_b32.bat
   * contrib/hbziparch/tests/bld_vc.bat
   - contrib/hbziparch/Wildcard.h
   - contrib/hbziparch/ZipString.h
   - contrib/hbziparch/FileInfo.h
   - contrib/hbziparch/ZipFileMapping_lnx.h
   - contrib/hbziparch/ZipMutex_win.h
   - contrib/hbziparch/ZipPathComponent.h
   - contrib/hbziparch/Aes.h
   - contrib/hbziparch/BaseLibCompressor.cpp
   - contrib/hbziparch/zlib
   - contrib/hbziparch/ZipCentralDir.h
   - contrib/hbziparch/RandomPool.h
   - contrib/hbziparch/ZipPathComponent_win.cpp
   - contrib/hbziparch/ZipString_stl.h
   - contrib/hbziparch/ZipPlatform_win.cpp
   - contrib/hbziparch/std_mfc.h
   - contrib/hbziparch/DeflateCompressor.h
   - contrib/hbziparch/ZipCrc32Cryptograph.h
   - contrib/hbziparch/Wildcard.cpp
   - contrib/hbziparch/ZipString.cpp
   - contrib/hbziparch/FileFilter.h
   - contrib/hbziparch/ZipMutex.h
   - contrib/hbziparch/ZipCompatibility.cpp
   - contrib/hbziparch/ZipFileMapping_win.h
   - contrib/hbziparch/ZipExtraData.cpp
   - contrib/hbziparch/Sha1.h
   - contrib/hbziparch/ZipArchive.cpp
   - contrib/hbziparch/ZipFileHeader.h
   - contrib/hbziparch/DirEnumerator.cpp
   - contrib/hbziparch/DeflateCompressor.cpp
   - contrib/hbziparch/ZipBaseException.h
   - contrib/hbziparch/std_stl.h
   - contrib/hbziparch/_features.h
   - contrib/hbziparch/ZipFileMapping.h
   - contrib/hbziparch/BaseLibCompressor.h
   - contrib/hbziparch/FileFilter.cpp
   - contrib/hbziparch/ZipException.h
   - contrib/hbziparch/ZipCryptograph.h
   - contrib/hbziparch/ZipAbstractFile.h
   - contrib/hbziparch/ZipStorage.h
   - contrib/hbziparch/ZipStringStoreSettings.h
   - contrib/hbziparch/stdafx.h
   - contrib/hbziparch/ZipCompatibility.h
   - contrib/hbziparch/ZipExtraData.h
   - contrib/hbziparch/ZipMemFile.h
   - contrib/hbziparch/Hmac.cpp
   - contrib/hbziparch/Bzip2Compressor.h
   - contrib/hbziparch/ZipExport.h
   - contrib/hbziparch/ZipArchive.h
   - contrib/hbziparch/ZipExtraField.cpp
   - contrib/hbziparch/ZipFileHeader.cpp
   - contrib/hbziparch/ZipPlatform.h
   - contrib/hbziparch/ZipAesCryptograph.cpp
   - contrib/hbziparch/ZipException.cpp
   - contrib/hbziparch/ZipCompressor.h
   - contrib/hbziparch/ZipFile_stl.cpp
   - contrib/hbziparch/DirEnumerator.h
   - contrib/hbziparch/ZipCryptograph.cpp
   - contrib/hbziparch/ZipStorage.cpp
   - contrib/hbziparch/ZipAutoBuffer.h
   - contrib/hbziparch/ZipCollections_mfc.h
   - contrib/hbziparch/ZipFile_mfc.h
   - contrib/hbziparch/resource.h
   - contrib/hbziparch/ZipCallbackProvider.h
   - contrib/hbziparch/ZipMemFile.cpp
   - contrib/hbziparch/Bzip2Compressor.cpp
   - contrib/hbziparch/ZipCollections.h
   - contrib/hbziparch/ZipFile.h
   - contrib/hbziparch/Aes.cpp
   - contrib/hbziparch/ZipCentralDir.cpp
   - contrib/hbziparch/RandomPool.cpp
   - contrib/hbziparch/ZipMutex_lnx.h
   - contrib/hbziparch/Hmac.h
   - contrib/hbziparch/ZipExtraField.h
   - contrib/hbziparch/ZipCompressor.cpp
   - contrib/hbziparch/License.txt
   - contrib/hbziparch/ZipCrc32Cryptograph.cpp
   - contrib/hbziparch/ZipAesCryptograph.h
   - contrib/hbziparch/ZipPathComponent_lnx.cpp
   - contrib/hbziparch/ZipPlatformComm.cpp
   - contrib/hbziparch/ZipString_mfc.h
   - contrib/hbziparch/ZipCallback.h
   - contrib/hbziparch/ZipAutoBuffer.cpp
   - contrib/hbziparch/ZipFile_mfc.cpp
   - contrib/hbziparch/ZipCollections_stl.h
   - contrib/hbziparch/BytesWriter.h
   - contrib/hbziparch/ZipPlatform_lnx.cpp
   - contrib/hbziparch/_platform.h
   - contrib/hbziparch/ZipFile_stl.h
   - contrib/hbziparch/readme.txt
   - contrib/hbziparch/Sha1.cpp
     + Added .prg level implementation of old hbziparch interface.
       It's based on Toninhos functions sent to the list, but 
       synced with old interface and extended with new features, 
       fixes and all the remaining interface functions, and old 
       doc.
       There are some non-implemented stuff, and a couple of 
       NOTEs and TOFIXes, if someone wants, these can be addressed.
       (some not, as hbmzip doesn't support multi-volume archives.)
     ; NOTE: This implementation is based on hbmzip.lib, so you 
             MUST link it, to make it work. INCOMPATIBLE.
     * Library renamed from hbziparch -> hbziparc to be short 
       filename. The dir itself will also be renamed so.
       INCOMPATIBLE.
     * Make files modified to compile on all platforms and to 
       pull hbmzip to build tests.
     - Removed ZipArchive sources.
     ; Temporarily kept hbzipold.cpp to serve as reference.
     ; TOFIX: There is a problem with the loop adding new 
              files to the .zip.

2008-09-03 15:15 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/Makefile
   * contrib/hbziparch/common.mak
   - contrib/hbziparch/hbziparc.c
   - contrib/hbziparch/hbxdirec.c
   * contrib/hbziparch/hbzipnew.cpp
     * Merged Harbour C parts to .cpp file.
     * Made full low-level interface static.

2008-09-03 15:05 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/hbziparc.c
   * contrib/hbziparch/hbzipnew.cpp
     ! Some fixes to prev.

2008-09-03 12:34 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/hbziparc.c
   * contrib/hbziparch/hbzipnew.cpp
     ! Some fixes and further reduction.

2008-09-03 10:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/hbziparc.c
   * contrib/hbziparch/hbzipnew.cpp
     % Merged slightly different internal functions, thus 
       removing significant redundancy.
       Higher level hb_unzipFile(), hb_unzipFileIndex(), hb_unzipAllFile()
       are now functionally the same, since the only difference was 
       how the file list parameter was handled.
     ! Removed any remaining Win32 dependency.

2008-09-02 23:37 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/hbziparc.c
   * contrib/hbziparch/hbzipnew.cpp
     * Complete cleanup/refactor/fixes.
       (original functions and internal logic was kept, 
       except some shady path/curdir manipulations, which 
       were removed, along with any directory changes)
       The code got significantly easier to oversee, so if 
       someone wants to find out how this interface works, 
       now the code is much easier to read. If we want to 
       keep this in Harbour, maybe we could just swap the 
       low-level interface to utilize hbmzip calls instead 
       of ZipArchive ones. We would lose the segmented 
       archive feature though, but I'm not sure how 
       important this is these days, when there is no 
       floppy disk anymore.
       Code size is now 40% smaller than in 1.0.0.
       It's still far from being perfect, but now it's at 
       least possible to fix.

2008-09-02 10:23 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * utils/hbmake/hbmake.prg
     ; Applied patch by Bill Robertson:
     ! Fixed previously introduced (by me actually) bug. Thanks.
     % Removed "non-extended" codepath, since it was never used.
     ! UI elements fixed to properly accomodate to any 
       screen dimensions.

   * utils/hbmake/hbmake.prg
     ! Fixed to not change casing of files, plus a few other minor fixes.
     ! Made one filename comparison multiplatform by using hb_FileMatch()
     ; Added TOFIXes where filename comparison is not multiplatform.
     % Removed some dead or commented code.

2008-09-01 21:52 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   - contrib/hbw32ddr
   * contrib/Makefile
   * contrib/make_b32_all.bat
   * contrib/make_gcc_all.sh
   * contrib/make_vc_all.bat
     - Removed contrib hbw32ddr.
       For those wanting to peek into this code, or 
       pick up development, the exact source can be 
       found in Harbour 1.0.0 release.

2008-09-01 21:33 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/hbziparc.c
   * contrib/hbziparch/hbzipnew.cpp
     % Cleanups, optimizations, fixes. Now it's possible to 
       oversee what the code actually tries to do.
     * Statics reduced to one, not changing current dir anymore.
     ; It may happen that something is not working as it was, please test.
       Path handling is/was very shady. Unix support is (and was) 
       not working at places.
     ; NOTE: 'Kiss of death' change.
             Please be prepared that I plan to remove hbziparch 
             from the repository sometimes this week. If you have 
             a strong reason not to do so (or some alternative 
             proposal), pls write to the list.
             If someone wants to continue using it, it can be accessed 
             from past revisions of the SVN, or the 1.0.0 binary and 
             source releases.
             Someone could as well upload the lastest (or latest stable) 
             revision to our website.

2008-09-01 15:57 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   - contrib/hbziparch/hbziparc.h
   * contrib/hbziparch/hbziparc.c
   * contrib/hbziparch/hbzipnew.cpp
   * contrib/hbziparch/tests/unzipa.prg
     % Further cleanups, optimizations.
     % Removed adding current directory to .zip filename 
       if it didn't contain a path. If a file doesn't contain 
       path, the OS will create it by default in the current dir.
       If someone knows why this hack was there, please tell.

2008-09-01 12:39 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/hbziparc.c
   * contrib/hbziparch/hbzipnew.cpp
     * One variable rename missed from previous commit.

2008-09-01 12:33 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/hbziparc.h
   * contrib/hbziparch/hbziparc.c
   * contrib/hbziparch/hbzipnew.cpp
     ! Fixed several potential leaks.
     % Optimized out several unnecessary allocations.
     % Optimized out several unnecessary string copying.
     % Cleaned all global variables.
     % Cleaned all static variables in C code.
     % Using HB_ERR_FUNCNAME.
     ! Returning empty values instead of NULL.
     ! Fixed potential GPFs.
     ! Using manifest constants instead of literals.
     * Cleaned header file and constant usage.
     * Other minor fixes and optimizations.
     * Formatting.
     ; The code is still a mess.

2008-09-01 09:42 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/hbziparc.h
   * contrib/hbziparch/hbziparc.c
   * contrib/hbziparch/hbzipnew.cpp
   * contrib/hbziparch/hbxdirec.c
     % Cleanups: Unused headers, types, one #define, 
       one BCC582 warning, one Linux/GCC/MinGW #ifdef oddness.
     ; NOTE: Need to test this on Linux.

   * utils/hbmake/hbmake.prg
     ; Applied cleanup and fix patch from Bill Robertson:
     ! LIBFILES -> HBLIBS
       EXTERNLIB -> CONTRIBLIB
       EXTLIBFILES -> CONTRIBLIBS
     * ALLLIB = $(USERLIBS) $(LIBFILES) ... ->
       ALLLIB = $(USERLIBS) $(CONTRIBLIBS) $(HBLIBS) ...
     % Removed CONTRIBLIB = YES from makefile output as it did nothing.
     % Combined two ShowHelp() secs into one and put together 
       with ShowCredits() at top of program.
     % Simplied Flag checks somewhat but it's still awkward. I fixed 
       a mingw bug where a flag was set to .t. in one place and .f. 
       later because of inconsistent use of letters, capitals/lower, etc. 
       Still lots of checking for lower(...), upper(...), etc. of the 
       command-line params.
     * Changed Help screen to reflect current program options better.
     * Made some alert message a little clearer and minor formatting.
     ! Initalized s_nMakeFileHandle to F_ERROR and reset it to F_ERROR 
       whenever the file was closed. Didn't seem to be a current problem, 
       just good practice.

   * utils/hbmake/hbmake.prg
     * Removed separate /credits switch and added content to 
       main help screen.
     % Removed a few CLS commands from command-line orientated 
       places.
     % Removed -elx and -ex from help screen (as these are the 
       same as -el and -e). They are still accepted though.

   * source/compiler/hbusage.c
     + Added Bill Robertson to credits list.

2008-08-31 16:59 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * hbwhat32/whtdate.c
   * hbwhat32/whthead.c
   * hbwhat32/whtbrsh.c
   * hbwhat32/whtgdi.c
   * hbwhat32/whtmisc.c
   * hbwhat32/whttab.c
   * hbwhat32/whtbmp.c
   * hbwhat32/whtkbrd.c
     % Using hb_arraySet*() instead of hb_arraySet()

2008-08-31 16:26 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * utils/hbdoc/bld_vc.bat
   * utils/hbmake/bld_vc.bat
     % Minor cleanup.

   * contrib/hbwhat32/whticon.c
   * contrib/hbwhat32/whtcret.c
   * contrib/hbwhat32/whthead.c
   * contrib/hbwhat32/whtmous.c
   * contrib/hbwhat32/whtmeta.c
   * contrib/hbwhat32/whtrgn.c
   * contrib/hbwhat32/whttbar.c
   * contrib/hbwhat32/whtrect.c
   * contrib/hbwhat32/whtbrsh.c
   * contrib/hbwhat32/whtgdi.c
   * contrib/hbwhat32/whtview.c
   * contrib/hbwhat32/whtlv.c
   * contrib/hbwhat32/whtwnd.c
   * contrib/hbwhat32/whtcomm.c
   * contrib/hbwhat32/whtprn.c
   * contrib/hbwhat32/whttab.c
   * contrib/hbwhat32/whtfont.c
   * contrib/hbwhat32/whtbmp.c
   * contrib/hbwhat32/whtpen.c
   * contrib/hbwhat32/whtkbrd.c
   * contrib/hbwhat32/whttext.c
   * contrib/hbwhat32/whtdc.c
   * contrib/hbwhat32/whtdraw.c
   * contrib/hbnf/fttext.c
   * contrib/hbnf/peek.c
   * contrib/hbnf/ontick.c
   * contrib/hbnf/origin.c
   * contrib/hbnf/mouse.c
   * contrib/hbnf/poke.c
     ! Fixed to use Harbour API instead of legacy Clipper API.

   + contrib/hbbtree/tests/bld_b32.bat
   + contrib/hbbtree/tests/bld_vc.bat
   + contrib/hbbtree/tests/bld_djgp.bat
   - contrib/hbbtree/tests/mktest.bat
   * contrib/hbbtree/tests/ctest.c
     + Added make files.
     * Minor cleanups.
     ; One of the tests fail.

   * contrib/hbbtree/tbtree.prg
     ! Fixed crash due to scope problem in class declaration.

   * contrib/examples/pe/editorlo.c
     ! #include <x> -> #include "x" for Harbour headers.

2008-08-31 10:53 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbole/oleauto.prg
   * contrib/hbw32/w32_tole.prg
     * MessageBox() calls converted to Alert()s.
       A #translate added for the to be reconverted to MessageBox(), 
       since I'm not sure why should we use MessageBox()es here?
       IMO it'd be better to throw RTEs, or handle these cases more 
       "natively". Opinions?

   * contrib/hbole/oleauto.prg
     + Modified to generate RTE when the object could not 
       be created, so that it works more like OLE in hbw32.lib, 
       and the test doesn't crash in this case. I don't have 
       Excel, and this is what I could fix without it.

   * contrib/hbw32/w32_tole.prg
   * contrib/hbw32/w32_ole.c
     ! Typos, minor formatting.

   * common.mak
   * source/hbpcre/Makefile
   * source/hbpcre/cnv_hb2o.bat
   * source/hbpcre/cnv_o2hb.bat
   - source/hbpcre/ucpinter.h
   - source/hbpcre/ucptable.h
   - source/hbpcre/pcrefind.c
   + source/hbpcre/pcreucd.c
   * source/hbpcre/pcrevutf.c
   * source/hbpcre/pcre.h
   * source/hbpcre/pcreconf.c
   * source/hbpcre/pcreinfo.c
   * source/hbpcre/pcremktb.c
   * source/hbpcre/config.h
   * source/hbpcre/pcrenewl.c
   * source/hbpcre/pcreoutf.c
   * source/hbpcre/chartabs.c
   * source/hbpcre/pcrerefc.c
   * source/hbpcre/pcreget.c
   * source/hbpcre/pcrefinf.c
   * source/hbpcre/pcretryf.c
   * source/hbpcre/pcreexec.c
   * source/hbpcre/pcreinal.h
   * source/hbpcre/pcretabs.c
   * source/hbpcre/pcredfa.c
   * source/hbpcre/pcrever.c
   * source/hbpcre/pcrecomp.c
   * source/hbpcre/pcrexcls.c
   * source/hbpcre/pcrestud.c
   * source/hbpcre/ucp.h
     + Updated to PCRE 7.8 RC1
       (will be updated to final pretty soon)
       This version contains the small patches we 
       so far had locally in Harbour. Thanks to 
       Philip Hazel for applying them.

2008-08-30 11:58 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * include/hbsetup.ch
     + Added HB_LEGACY_OFF macro to turn off HB_LEGACY_LEVEL.

   * utils/hbmake/hbmake.prg
     * Two minor cleanups.

   * doc/en/hb_apiit.txt
   * source/vm/eval.c
     * PEVALINFO -> PHB_EVALINFO
     * EVALINFO -> HB_EVALINFO

   * contrib/hbct/ctwin.c
   * contrib/hbct/keyset.c
   * contrib/hbct/misc3.c
   * contrib/hbnf/numlock.c
   * contrib/hbnf/shift.c
   * contrib/hbnf/alt.c
   * contrib/hbnf/ctrl.c
   * contrib/hbnf/caplock.c
     * GTI_* -> HB_GTI_*

   * source/rtl/spfiles.c
     * FHANDLE -> HB_FHANDLE

2008-08-29 14:45 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * utils/hbmake/hbmake.prg
     ; Applied patch created by Bill Robertson:
     * The following functions aren't used in hbmake and were removed:
       FindCfile(), TestforPrg(), AsDll(), ExtenPrg(), GetMakeDir()

2008-08-29 11:29 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcompdf.h
  * harbour/source/compiler/hbmain.c
  * harbour/source/compiler/harbour.yyc
  * harbour/source/compiler/harbour.y
    ! removed all classes and functions static declarations
    ! fixed cleanup code for classes and functions declarations

2008-08-29 10:40 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   + config/w32/mingwce.cf
   - config/w32/cemgw.cf
   * harbour-ce-spec
   * make_xmingwce.sh
   * bin/hb-mkslib.sh
   * bin/hb-func.sh
   * bin/postinst.sh
   * source/vm/Makefile
     * Renamed 'cemgw' HB_COMPILER name to 'mingwce' 
       for consistency.

2008-08-29 10:35 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * ChangeLog
     ! Minor typo.

   * utils/hbmake/hbmake.prg
     % Minor cleanup.

   * source/common/hbver.c
     * Further cleanup of constant usage.
     + Changed Borland to CodeGear to BCC5.9 and above.
       (borrowed from xhb / Andi Jahja)

   * config/w32/gcc.cf
   * config/w32/dm.cf
     * contrib syslibs moved to separate lines.

2008-08-28 20:17 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * make_vc.bat
   - make_vcce.bat
     + Added some additional information how to create WinCE 
       builds using make_vc.bat.
     - Deleted make_vcce.bat

2008-08-28 20:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/rtl/gtchrmap.c
   * source/rtl/hbgtcore.c
   * source/vm/hvm.c
     + Added three TOFIXes regarding namespace violations.
       s_pszLinkedMain        -> hb_vm_pszLinkedMain
       s_defaultGT            -> hb_gt_szNameDefault
       s_szDefaultCharMapFile -> hb_gt_szCharMapFileDefault
       TOFIX: These should be fixed in 1.1 (or maybe even in 
              1.0.1 if this isn't such a big problem for 3rd 
              parties).

2008-08-28 18:31 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/gtwvg/wvgutils.c
     ! Fixed to use documented Harbour API hb_winmainArgGet() 
       instead of the (since cleaned away) undocumented Harbour 
       global variable hb_hInstance.

2008-08-28 12:22 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbfimage/fi_winfu.c
     ! Added CBM_INIT definition for Pellec C in WinCE mode.
       [UNDONE. CreateDIBitmap() also doesn't exist in WinCE. ]

2008-08-28 12:20 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * make_vc.bat
     * Updated usage text.

   * include/hbwince.h
     ! Fix for Pelles C 5.0 in WinCE/ARM mode.

   * include/hbsetup.h
     + Detecting Pelles C 5.0 in ARM mode as HB_WINCE.

   * ChangeLog
     - Removed some advices not valid anymore from previous entry.

   * contrib/mtpl_b32.bat
   * contrib/mtpl_vc.bat
     * Synced with /make_*.bat so that the name of the .mak 
       file is now hard-wired instead of being HB_CC_NAME dependent.
       This way contribs may be built for WinCE in the future 
       (this still needs adding WinCE support to mtpl_vc.mak).

   * contrib/mtpl_gcc.sh
     + Darwin autodetection was missing.

   * contrib/hbfimage/fi_winfu.c
     ! Added CBM_INIT definition for Pellec C in WinCE mode.

   * source/rtl/gtclip.c
     + Added GMEM_MOVEABLE definition for Pelles C in WinCE mode.

   + config/w32/poccce.cf
     + Added Pellec C WinCE make file.

   + config/w32/msvcce.cf
     + Added WinCE GNU make file for MSVC. Untested, probably not working, 
       this is just a small step to make the GNU-make equal in feature 
       with the non-GNU make one.

   * config/w32/bcc32.cf
     * Minor sync of C options with non-GNU make file.

   * config/w32/msvc.cf
     * Attempt to sync C options with non-GNU make file.

   * contrib/hbfbird/firebird.c
     * Minor formatting.

   ; NOTE1: For better consistency I'd like to rename GNU make compiler names
            'mingw32' to 'mingw' (they've dropped '32' long ago), and 
            'cemgw' to 'mingwce'.
   ; NOTE2: Pelles C WinCE build still generates following errors:
       POLINK: error: Unresolved external symbol 'GetModuleFileNameA'.
       POLINK: error: Unresolved external symbol 'RegOpenKeyExA'.
       ../../math.c(605): error #3120: [asm] Symbol 'inf' is undefined.
       contrib\gtwvg\gtwvg.h(78): fatal error #1035: Can't find include file <olectl.h>.
       ../../ctmath2.c(324): error #3120: [asm] Symbol 'inf' is undefined.
       ../../win32.c(70): error #2048: Undeclared identifier 'CS_OWNDC'.
       ../../win32.c(75): error #2048: Undeclared identifier 'IDI_APPLICATION'.
       ../../win32.c(75): error #2140: Type error in argument 2 to 'LoadIconA'; found 'int', expected 'const char *'.
       ../../win32.c(181): error #2048: Undeclared identifier 'MFS_DISABLED'.
       ../../win32.c(194): warning #2027: Missing prototype for 'InsertMenuItem'.
       ../../win32.c(219): warning #2027: Missing prototype for 'SetMenu'.
       ../../odbc.c(94): fatal error #1035: Can't find include file <sql.h>.
       contrib\hbsqlit3\sqlite3\sqlite3.c(9936): warning #2027: Missing prototype for 'localtime'. [ ... ]
       ../../w32_ole.c(403): error #2152: Unknown field 'pllVal' of 'union (no name)'.
       ../../w32_ole.c(403): error #2168: Operands of = have incompatible types 'int' and 'long long int *'.
       ../../w32_ole.c(408): error #2152: Unknown field 'llVal' of 'union (no name)'.
       ../../w32_ole.c(786): error #2152: Unknown field 'pllVal' of 'union (no name)'.
       ../../w32_ole.c(786): error #2144: Type error: pointer expected.
       ../../w32_ole.c(792): error #2152: Unknown field 'llVal' of 'union (no name)'.
       ../../hbsyslog.c(31): error #2140: Type error in argument 2 to 'RegisterEventSourceW'; found 'const char *', expected 'const wchar_t *'.
       ../../hbsyslog.c(97): error #2140: Type error in argument 8 to 'ReportEventW'; found 'const char * *', expected 'const wchar_t * *'.
       ../../firebird.c(448): error #2149: Undefined size for 'times' with type '(incomplete) struct tm'.
       ../../firebird.c(479): error #2152: Unknown field 'tm_year' of '(incomplete) struct tm'.
       ../../firebird.c(480): error #2152: Unknown field 'tm_mon' of '(incomplete) struct tm'.
       ../../firebird.c(481): error #2152: Unknown field 'tm_mday' of '(incomplete) struct tm'.
       ../../firebird.c(482): error #2152: Unknown field 'tm_hour' of '(incomplete) struct tm'.
       ../../firebird.c(483): error #2152: Unknown field 'tm_min' of '(incomplete) struct tm'.
       ../../firebird.c(484): error #2152: Unknown field 'tm_sec' of '(incomplete) struct tm'.
       ../../firebird.c(493): error #2152: Unknown field 'tm_year' of '(incomplete) struct tm'.
       ../../firebird.c(493): error #2152: Unknown field 'tm_mon' of '(incomplete) struct tm'.
       ../../firebird.c(493): error #2152: Unknown field 'tm_mday' of '(incomplete) struct tm'.
       ../../firebird.c(502): error #2152: Unknown field 'tm_hour' of '(incomplete) struct tm'.
       ../../firebird.c(503): error #2152: Unknown field 'tm_min' of '(incomplete) struct tm'.
       ../../firebird.c(504): error #2152: Unknown field 'tm_sec' of '(incomplete) struct tm'.
       ../../fi_winfu.c(97): warning #2027: Missing prototype for 'CreateDIBitmap'.
       ../../fi_winfu.c(98): error #2048: Undeclared identifier 'CBM_INIT'.
       ../../fi_winfu.c(99): error #2168: Operands of = have incompatible types 'HBITMAP' and 'int'.
       ../../fi_winfu.c(150): warning #2027: Missing prototype for 'GetDIBits'.
       [ lots of them with hbmysql ]

2008-08-28 01:20 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * make_b32.bat
   * make_vc.bat
     * exit_err.bat -> hbmkpost.bat
       Please update your environment if you used this feature.
       INCOMPATIBLE.

   * make_vcce.bat
     ! Adjusted to latest change.

   * make_gnu.bat
     * Minor formatting.

2008-08-28 01:14 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * make_b32.bat
   * make_vc.bat
     ! Made makefile name independent of the HB_CC_NAME envvar.
       NOTE: If this poses a limitation for someone, please shout, 
             we may add an additional variable to control/override 
             makefile name (but it cannot directly depend on 
             HB_CC_NAME now that make_vc.mak and make_vcce.mak 
             got merged.)

2008-08-27 21:56 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   + config/w32/poccce.cf
     + Added POCC GNU make file for WinCE.
       It has quite some errors yet.

2008-08-27 21:30 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * make_vcce.bat
     ! Fixed.

   * contrib/rddads/make_vc.bat
     ! Undone previous modification. Quotes are needed to support 
       dirs containing spaces (this is actually the case for the 
       default install dir of ACE SDK).

2008-08-27 17:05 UTC+0100 JF Lefebvre (Mafact) (jfl at mafact dot com)
   * contrib/rddads/make_vc.bat
     * small typo in set _HB_LIB_INSTALL="%HB_LIB_INSTALL%
       _HB_LIB_INSTALL=%HB_LIB_INSTALL% 

2008-08-27 12:05 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/compiler/hbcomp.c
     * Changed the default -gc generation mode for real.

2008-08-27 11:22 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/examples/rdddbt/dbfdbt1.c
   * contrib/gtalleg/gtalleg.c
   * contrib/gtwvg/gtwvg.c
   * contrib/hbbmcdx/bmdbfcdx.c
   * contrib/hbbtree/hb_btree.c
   * contrib/hbct/ctwin.c
   * contrib/rddads/ads1.c
   * source/codepage/cp_tpl.c
   * source/codepage/cpbg866.c
   * source/codepage/cpbgiso.c
   * source/codepage/cpbgmik.c
   * source/codepage/cpbgwin.c
   * source/codepage/cpcs852.c
   * source/codepage/cpcsiso.c
   * source/codepage/cpcskam.c
   * source/codepage/cpcswin.c
   * source/codepage/cpde850.c
   * source/codepage/cpdeiso.c
   * source/codepage/cpdewin.c
   * source/codepage/cpel737.c
   * source/codepage/cpelwin.c
   * source/codepage/cpes850.c
   * source/codepage/cpesmwin.c
   * source/codepage/cpeswin.c
   * source/codepage/cpfr850.c
   * source/codepage/cphr1250.c
   * source/codepage/cphr437.c
   * source/codepage/cphr852.c
   * source/codepage/cphu852.c
   * source/codepage/cphu852s.c
   * source/codepage/cphuiso.c
   * source/codepage/cphuisos.c
   * source/codepage/cphuwin.c
   * source/codepage/cphuwins.c
   * source/codepage/cpit437.c
   * source/codepage/cpit850.c
   * source/codepage/cpitisb.c
   * source/codepage/cpitiso.c
   * source/codepage/cpltwin.c
   * source/codepage/cppl852.c
   * source/codepage/cppliso.c
   * source/codepage/cpplmaz.c
   * source/codepage/cpplwin.c
   * source/codepage/cppt850.c
   * source/codepage/cpptiso.c
   * source/codepage/cpru866.c
   * source/codepage/cpruiso.c
   * source/codepage/cprukoi.c
   * source/codepage/cpruwin.c
   * source/codepage/cpsk852.c
   * source/codepage/cpskiso.c
   * source/codepage/cpskkam.c
   * source/codepage/cpskwin.c
   * source/codepage/cpsl437.c
   * source/codepage/cpsl852.c
   * source/codepage/cpsliso.c
   * source/codepage/cpslwin.c
   * source/codepage/cpsrwin.c
   * source/codepage/cpsv850.c
   * source/codepage/cpsvclip.c
   * source/codepage/cpsvwin.c
   * source/codepage/cptr857.c
   * source/codepage/cptrwin.c
   * source/codepage/cpua866.c
   * source/codepage/cpuakoi.c
   * source/codepage/cpuawin.c
   * source/lang/msg_tpl.c
   * source/lang/msgbe866.c
   * source/lang/msgbewin.c
   * source/lang/msgbg866.c
   * source/lang/msgbgiso.c
   * source/lang/msgbgmik.c
   * source/lang/msgbgwin.c
   * source/lang/msgca.c
   * source/lang/msgcs852.c
   * source/lang/msgcsiso.c
   * source/lang/msgcskam.c
   * source/lang/msgcswin.c
   * source/lang/msgde.c
   * source/lang/msgdewin.c
   * source/lang/msgel.c
   * source/lang/msgelwin.c
   * source/lang/msgeo.c
   * source/lang/msges.c
   * source/lang/msgeswin.c
   * source/lang/msgeu.c
   * source/lang/msgfr.c
   * source/lang/msggl.c
   * source/lang/msghe862.c
   * source/lang/msghewin.c
   * source/lang/msghr437.c
   * source/lang/msghr852.c
   * source/lang/msghriso.c
   * source/lang/msghrwin.c
   * source/lang/msghu852.c
   * source/lang/msghucwi.c
   * source/lang/msghuiso.c
   * source/lang/msghuwin.c
   * source/lang/msgid.c
   * source/lang/msgis850.c
   * source/lang/msgit.c
   * source/lang/msgko.c
   * source/lang/msgltwin.c
   * source/lang/msgnl.c
   * source/lang/msgpl852.c
   * source/lang/msgpliso.c
   * source/lang/msgplmaz.c
   * source/lang/msgplwin.c
   * source/lang/msgpt.c
   * source/lang/msgro.c
   * source/lang/msgru866.c
   * source/lang/msgrukoi.c
   * source/lang/msgruwin.c
   * source/lang/msgsk852.c
   * source/lang/msgskiso.c
   * source/lang/msgskkam.c
   * source/lang/msgskwin.c
   * source/lang/msgsl437.c
   * source/lang/msgsl852.c
   * source/lang/msgsliso.c
   * source/lang/msgslwin.c
   * source/lang/msgsr852.c
   * source/lang/msgsriso.c
   * source/lang/msgsrwin.c
   * source/lang/msgtr857.c
   * source/lang/msgtrwin.c
   * source/lang/msgua866.c
   * source/lang/msguakoi.c
   * source/lang/msguawin.c
   * source/lang/msgzhb5.c
   * source/lang/msgzhgb.c
   * source/pp/pplib3.c
   * source/rdd/dbf1.c
   * source/rdd/dbfcdx/dbfcdx1.c
   * source/rdd/dbffpt/dbffpt1.c
   * source/rdd/dbfntx/dbfntx1.c
   * source/rdd/delim1.c
   * source/rdd/sdf1.c
   * source/rtl/gt_tpl/gt_tpl.c
   * source/rtl/gtcgi/gtcgi.c
   * source/rtl/gtcrs/gtcrs.c
   * source/rtl/gtdos/gtdos.c
   * source/rtl/gtgui/gtdef.c
   * source/rtl/gtgui/gtgui.c
   * source/rtl/gtos2/gtos2.c
   * source/rtl/gtpca/gtpca.c
   * source/rtl/gtsln/gtsln.c
   * source/rtl/gtstd/gtstd.c
   * source/rtl/gttrm/gttrm.c
   * source/rtl/gtxwc/gtxwc.c
   * source/rtl/hbregex.c (added as separate, next commit)
     ! Fix for MSVC 64-bit C mode startup procedure.

2008-08-27 03:57 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * utils/hbmake/hbmake.prg
     ; Applied patches made by Bill Robertson. (Thanks!)
     % Removed Function C( STRING ) as it was only used in the function, 
       Attention(), to center a line on the screen.
     % Removed Static Function IsWin() since it wasn't being used.
     ! Replace all remaining calls to hb_OSNewLine() with s_cEOL.
     ! Changed some calls from OutStd() to OutErr() since they were 
       essentially errors mesages.
     % Replaced some long series of FWrite()s with a single FWrite() 
       where convientent so I could see what was being written to 
       the makefile easier.
     ! Replaced some comparisons from '=' to '=='.

2008-08-27 02:47 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/rtl/filesys.c
     ! Disabled hb_fsPOpen() body for __CYGWIN__.
       This way __CYGWIN__ compiles cleanly.
       (although I'm not sure how important Cygwin support is)

2008-08-27 01:46 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/rtl/hbinet.c
     ! Bad workaround for the '__WSAFDIsSet unresolved' problem 
       in Pelles C 5.00.13 AMD64 mode, to make final executables 
       link at all. Some hbinet.c features (or the whole module) 
       won't properly work though.
       This possible bug has been reported on the Pellec C forums:
       http://forum.pellesc.de/index.php?topic=2590.0

2008-08-27 00:54 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * include/hbinit.h
   * source/rtl/gtwin/gtwin.c
   * source/rtl/gtwvt/gtwvt.c
   * source/compiler/genc.c
     + Enabled init functions for MSVC 64-bit in C mode.
     ; NOTE: You get the idea, please comment. If there is 
             no simpler/easier/shorter way to achieve this, 
             I'll update the rest 150 files, too.

2008-08-26 22:41 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/gtalleg/Makefile
     * Excluded for POCC and XCC.

   * contrib/gtalleg/ssf.h
     ! Setting platform before include Allegro headers.
       (I'm not sure this is necessary for all platforms, 
       but it surely is for BCC and MinGW).

   * contrib/gtwvg/gtwvg.h
     ! __MINGW__ -> __MINGW32__. __MINGW__ is not #defined by MinGW.

2008-08-26 22:23 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbct/atnum.c
     ! Workaround for PelleC 5.00.1 bug in AMD64 mode.
       'fatal error: Internal error: reduce_tree()'
       I didn't test if it actually works, but at least now 
       is compiles.
       Bug reported on Pelles C forum.

2008-08-26 22:13 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/common/hbver.c
     * hb_verCompiler() buffer size cleanup.

   * source/rtl/hbinet.c
     * Minor formatting.

   * utils/hbmake/hbmake.prg
     * PRG -> .prg on some screen messages.

   * config/w32/xcc.cf
   * config/w32/pocc.cf
     + Added ws2_32.lib. Didn't solve the problem, but 
       as per MS docs of some functions we use, we should 
       use this instead of wsock2 (everywhere actually) 
       [and ws2 instead of winsock for WinCE]. Someone pls 
       correct me if I'm wrong, or if there is any reason 
       we're using both and/or the older one?

   * config/w32/pocc.cf
     - Removed C switch -Zx (Enable Pelles C extensions).
       We don't need this.

2008-08-26 15:14 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/common/hbver.c
     + Show bitness for all (non-DJGPP) compilers.
     ! Fixed to show "Windows Server 2003 / XP x64" when 
       Windows 5.2 is detected.

2008-08-26 13:24 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/compiler/hbmain.c
     ! Text casing fixed in some warning messages.
     ! Attempted to update hardcoded declarations for TGET methods.
       Some of them were removed, for some of them the parameter list 
       was updated to be in sync with current tget.prg.

   * contrib/gtalleg/gtalleg.c
   * contrib/gtwvg/gtwvg.c
   * contrib/hbbmcdx/bmdbfcdx.c
   * contrib/hbbmcdx/hbbmcdx.h
   * contrib/hbbtree/hb_btree.c
   * contrib/hbct/ctnet.c
   * contrib/hbct/ctstrfil.c
   * contrib/hbct/ctwin.c
   * contrib/hbcurl/hbcurl.c
   * contrib/hbgd/gdwrp.c
   * contrib/hbmzip/hbmzip.c
   * contrib/hbnf/fttext.c
   * contrib/hbtip/utils.c
   * contrib/xhb/freadlin.c
   * contrib/xhb/hbxml.c
   * contrib/xhb/hbxml.h
   * doc/codestyl.txt
   * doc/en/garbage.txt
   * doc/en/hb_apifs.txt
   * include/hbapigt.h
   * include/hbchksum.h
   * include/hbdbsort.h
   * include/hbgtcore.h
   * include/hbrddcdx.h
   * include/hbrdddbf.h
   * include/hbrdddel.h
   * include/hbrddntx.h
   * include/hbrddsdf.h
   * include/hbset.h
   * include/hbsxfunc.h
   * source/rdd/dbf1.c
   * source/rdd/dbfcdx/dbfcdx1.c
   * source/rdd/dbffpt/dbffpt1.c
   * source/rdd/dbfntx/dbfntx1.c
   * source/rdd/dbsql.c
   * source/rdd/hbsix/sxcompr.c
   * source/rdd/hbsix/sxsem.c
   * source/rdd/hsx/hsx.c
   * source/rtl/console.c
   * source/rtl/copyfile.c
   * source/rtl/fssize.c
   * source/rtl/fstemp.c
   * source/rtl/gt_tpl/gt_tpl.c
   * source/rtl/gtapi.c
   * source/rtl/gtcgi/gtcgi.c
   * source/rtl/gtcrs/gtcrs.c
   * source/rtl/gtdos/gtdos.c
   * source/rtl/gtos2/gtos2.c
   * source/rtl/gtpca/gtpca.c
   * source/rtl/gtsln/gtsln.c
   * source/rtl/gtstd/gtstd.c
   * source/rtl/gttrm/gttrm.c
   * source/rtl/gtwin/gtwin.c
   * source/rtl/gtwvt/gtwvt.c
   * source/rtl/gtxwc/gtxwc.c
   * source/rtl/hbgtcore.c
   * source/rtl/hbmd5.c
   * source/rtl/isprint.c
   * source/rtl/memofile.c
   * source/rtl/philes.c
   * source/rtl/set.c
   * source/vm/memvars.c
   * source/vm/runner.c
   * utils/hbdoc/hbdfrdln.c
   * utils/hbmake/hbmfrdln.c
     * FHANDLE -> HB_FHANDLE
     * hbct: HB_ITEM_PTR -> PHB_ITEM

2008-08-26 12:50 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/compiler/hbmain.c
    ! reset class and functions static declarations to avoid GPF
      when more then one file is compiled with -w3 switch
      NOTE: Whole this code will have to be removed and written
            from scratch

2008-08-26 11:57 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/compiler/hbmain.c
    ! fixed GPF when more then one file was compiled with -w3 switch

2008-08-26 10:35 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   - source/rtl/gtalleg
   + contrib/gtalleg
   * TODO
   * doc/dirstruc.txt
   * include/hbgtcore.h
   * contrib/gtalleg/Makefile
   * contrib/gtalleg/make_b32.bat
   * contrib/gtalleg/make_vc.bat
   * contrib/gtalleg/make_gcc.sh
   * contrib/make_b32_all.bat
   * contrib/make_vc_all.bat
   * contrib/make_gcc_all.sh
   * contrib/Makefile
   * config/hpux/gcc.cf
   * config/hpux/global.cf
   * config/darwin/gcc.cf
   * config/darwin/global.cf
   * config/dos/global.cf
   * config/linux/gcc.cf
   * config/linux/global.cf
   * config/sunos/gcc.cf
   * config/sunos/global.cf
   * config/bsd/gcc.cf
   * config/bsd/global.cf
   * config/w32/global.cf
   * harbour-ce-spec
   * harbour-w32-spec
   * harbour.spec
     * GTALLEG moved to contrib to make it possible to build 
       using the non-GNU make system, also to align the build 
       process with other 3rd party package dependent parts 
       of Harbour.
       HB_INC_ALLEGRO or HB_DIR_ALLEGRO may be used to point 
       to Allegro package directory. This is generally necessary 
       on non-*nix systems.
     ; NOTE: Review and test build processes and modified files, 
             and unmodified, but potentially related files:
             bin/hb-func.sh
             make_gnu.sh
             make_rpm.sh
             make_rpmce.sh
             make_rpmw32.sh

2008-08-26 09:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * include/hbsetup.h
     + Added small table (partly from MS KB) about _MSC_VER 
       values and MS product names, as we know them.

   * common.mak
   * utils/hbdoc/Makefile
   * utils/hbdoc/bld_b32.bat
   * utils/hbdoc/bld_vc.bat
   * utils/hbdoc/hbdoc.prg
   * utils/hbdoc/genasc.prg
   * utils/hbdoc/genchm.prg
   * utils/hbdoc/genhpc.prg
   * utils/hbdoc/genhtm.prg
   * utils/hbdoc/genng.prg
   * utils/hbdoc/genos2.prg
   * utils/hbdoc/genpdf1.prg
   * utils/hbdoc/genrtf.prg
   * utils/hbdoc/gentrf.prg
   - utils/hbdoc/rtf.prg
   - utils/hbdoc/os2.prg
   - utils/hbdoc/teeasc.prg
   - utils/hbdoc/ng.prg
   - utils/hbdoc/html.prg
   - utils/hbdoc/troff.prg
     ! Removed non-ASCII drawing chars from comments.
     % Removed STATIC var from THTML class.
     % Merged separate support classes to their gen*.prg.

2008-08-26 08:10 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * utils/hbmake/hbmake.prg
     ! Some liblists synced with xhb / hbmake.

2008-08-26 02:43 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/xhb/hbcrypt.c
   * contrib/hbw32/tprinter.c
   * contrib/hbw32/w32_ole.c
   * contrib/hbw32/w32_prn.c
   * contrib/hbfbird/tests/testapi.c
   * contrib/hbziparch/hbziparc.c
   * contrib/hbziparch/hbzipnew.cpp
   * contrib/hbhpdf/harupdf.c
   * contrib/hbfimage/fi_winfu.c
   * contrib/hbfimage/fi_wrp.c
   * contrib/hbgf/hbgfw32/win32.c
   * contrib/hbgf/hbgfos2/os2pm.c
   * source/rtl/filesys.c
   * utils/hbtest/rt_miscc.c
     * // -> ANSI comments.
     ; NOTE: hbwhat32 and gtwvg remain with //.

2008-08-26 00:43 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * make_vc.bat
   * make_vcce.bat
   * make_vc.mak
   - make_vcce.mak
     % make_vcce functionality merged into make_vc.
     * make_vcce.bat changed to a stub calling make_vc.bat.
     ; WinCE builds can be triggered using envvars:
       set HB_BUILD_WINCE=yes
       set HB_CC_NAME=vcce
       Please update your environment and test WinCE builds 
       after this change.

   * make_vc.mak
   * contrib/mtpl_vc.mak
     * Changed HB_VISUALC_VER default to 80.
       It was 60 for non-WinCE builds and contribs, 
       80 for WinCE builds. Now it is 80 for all 
       these cases.

   * make_b32.mak
     * Minor comment visual sync with make_vc.mak.

2008-08-25 23:30 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * doc/cmdline.txt
   * doc/hrb_faq.txt
   * doc/en/cmdline.txt
   * doc/en/dir.txt
   * doc/en/file.txt
   * doc/en/set.txt
   * doc/es/cmdline.txt
   * doc/es/dir.txt
   * doc/es/file.txt
   * doc/whatsnew.txt
   * contrib/hbct/disk.c
   * contrib/hbodbc/odbc.txt
   * contrib/hbwhat32/whtmapi.c
   * contrib/hbwhat32/whtsys.c
   * contrib/hbwhat32/whtinet.c
   * contrib/hbziparch/hbziparc.c
   * contrib/hbnf/chdir.c
   * contrib/hbnf/tempfile.prg
   * contrib/hbnf/ftisprn.c
   * contrib/hbnf/getenvrn.c
   * contrib/hbnf/mkdir.c
   * contrib/hbnf/rmdir.c
   * contrib/hbpgsql/readme.txt
   * contrib/hbclipsm/environ.c
   * contrib/hbclipsm/tests/testenv.prg
   * contrib/hbgd/tests/gdtest.prg
   * contrib/hbgd/tests/test_out.prg
   * contrib/hbgd/tests/gdtestcl.prg
   * contrib/hbgd/tests/testdpi.prg
   * contrib/hbgd/tests/counter.prg
   * contrib/hbtip/thtml.prg
   * contrib/hbvpdf/hbvpdf.prg
   * contrib/hbvpdf/tests/pdf_demo.prg
   * contrib/hbvpdf/hbvpdft.prg
   * contrib/examples/guestbk/guestbk.prg
   * contrib/examples/pe/editorlo.c
   * utils/hbdoc/genos2.prg
   * utils/hbdoc/hbdoc.prg
   * utils/hbmake/hbmake.prg
     ! Filename casing fixes. (nothing critical)

2008-08-25 22:49 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * include/hbsetup.h
     ! Fixed OS_UNIX_COMPATIBLE
     + Small comments added.
     ; NOTE: I'd like to do the following global renames:
             HB_WINCE     -> HB_OS_WIN_CE
             HB_OS_WIN_32 -> HB_OS_WIN
             Opinions? Especially on the latter.

   * include/hbdefs.h
   * include/hbinit.h
   * contrib/hbodbc/odbc.c
     * _WIN64 -> HB_OS_WIN_64

2008-08-25 22:49 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * make_vcce.mak
     ! Do not explicitly #define HB_WINCE. This should be 
       autodetected in hbsetup.h.

   * include/hbsetup.h
     % Minor cleanup.

2008-08-25 22:35 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * include/hbsetup.h
   * source/common/hbver.c
     - Removed HB_OS_MAC support. It was nothing more than a simple
       detection and a static version string, so we didn't lose much.

2008-08-25 22:25 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * make_vcce.mak
     ! Attempt to fix /MANIFEST:NO warnings for MSVC 6.0.
     ! Attempt to fix WinCE .dll linking error.
     ; Jose, another test would be great.

   * make_vc.bat
   * make_vc.mak
   * make_vcce.bat
   * make_vcce.mak
     * Some syncing and minor fixes in comments.

2008-08-25 21:56 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * make_vcce.mak
     ! Fixed system library list to not contain gdi32.lib.
       This lib was previously used for harbour.dll generation, 
       so I wonder if it was correct, but probably not.
       It would be great if someone could try an MSVC WinCE .dll
       build using the option:
       set HB_BUILD_DLL=yes

2008-08-25 20:44 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * config/w32/mingw32.cf
     % -mno-cygwin options removed. No longer needed. If someone 
       wants to compile a mingw build using cygwin, this option 
       should be explicitly specified as C_USR/L_USR and 'gcc' 
       should be used as a compiler. But this setup is barely 
       supported in Harbour, so don't expect it to work.
       This option may also be needed to compile Harbour using 
       Cygnus MinGW32 2.95.
       (Rather, install MinGW 3.x or newer)

2008-08-25 20:36 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * utils/hbmake/hbmake.prg
     ! Harbour executable detection cleanups and fix to look 
       into current dir and detect Darwin as a Unix platform.
       (usable state is still very far)

2008-08-25 20:14 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbw32/w32_ole.c
    * removed hack with malloc()/free() directly used to avoid
      memory leak reports - it's not necessary in Harbour.

  * harbour/contrib/hbfbird/firebird.c
  * harbour/contrib/examples/pp/hbppcore.c
    ! fixed buffer size calculation in hbstrnc*() functions

  * harbour/contrib/hbziparch/hbzipnew.cpp
    % use hb_strdup() instead of hb_xgrab()/hb_strncpy()

  * harbour/contrib/hbnf/getenvrn.c
    ! use hb_xgrab() instead of hb_xalloc() - the returned value
      was not checked and internal error is for sure better then
      GPF on NULL pointer

  * harbour/source/rdd/dbfntx/dbfntx1.c
    ! use memcpy() instead of hb_strncpy() to avoid problems when
      there is no place for tailing 0

2008-08-25 19:49 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * include/hbsetup.h
     ! Fixed problem where Darwin autodetection went wrong 
       between 1.0.0rc2 -> 1.0.0.
     * HB_OS_DARWIN added to the HB_OS_UNIX detection list.
       (no functional difference, just makes it more clear.)
     % HB_OS_OS2_EMX removed. It was unused.

   * source/compiler/gencobj.c
   * include/hbsetup.h
     % Removed OS_DOS_COMPATIBLE.
       It's equivalent to !defined(HB_OS_UNIX_COMPATIBLE).

2008-08-25 18:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/common/hbver.c
     ! Fix to commit '2008-07-11 18:20 UTC+0200' which 
       effectively disabled Vista/2008 detection for 
       everything but MSVC (>1400) compilers.

2008-08-25 17:13 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * common.mak
   * utils/hbmake/Makefile
   * utils/hbmake/bld_b32.bat
   * utils/hbmake/bld_vc.bat
   * utils/hbmake/hbmake.prg
   - utils/hbmake/hbmutils.prg
     * hbmutils.prg merged into hbmake.prg.

2008-08-25 17:05 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * utils/hbdoc/bld_vc.bat
   * utils/hbdoc/bld_b32.bat
   * utils/hbmake/bld_b32.bat
   * utils/hbmake/bld_vc.bat
     + Harbour option: /w3
     - Harbour option: /gc0 (now default)

   * common.mak
   * utils/hbmake/Makefile
   * utils/hbmake/bld_b32.bat
   * utils/hbmake/bld_vc.bat
   * utils/hbmake/hbmake.prg
   - utils/hbmake/pickarry.prg
     % Eliminated all STATIC vars in pickarry.prg.
     * pickarry.prg merged into hbmake.prg.

2008-08-25 16:37 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * common.mak
   * utils/hbmake/Makefile
   * utils/hbmake/bld_b32.bat
   * utils/hbmake/bld_vc.bat
   * utils/hbmake/hbmake.prg
   * utils/hbmake/hbmutils.prg
   * utils/hbmake/tmake.prg
   - utils/hbmake/ft_funcs.prg
   - utils/hbmake/tmake.prg
     ! Applied patches sent by Bill Robertson.
       ft_funcs.prg got replaced by standard file handling 
       functions and HB_FREADLINE(), EOL handling fixes, 
       typos and other fixes.
       Many thanks Bill.
     * Eliminated STATIC var in tmake.prg
     * Merged tmake.prg into hbmake.prg. (this was the 
       easiest way to make the new s_aEOL variable available 
       to this module.)
     ; Please test.

   * common.mak
   * utils/hbdoc/Makefile
   * utils/hbdoc/bld_b32.bat
   * utils/hbdoc/bld_vc.bat
   + utils/hbdoc/hbdfrdln.c
     + Added HB_FREADLINE() to hbdoc, too. It's not 
       used, just a small help to allow using it here, 
       too, instead of ft_funcs.prg.

2008-08-25 16:01 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/macro.c
  * harbour/source/vm/hvm.c
    ! fixed _FIELD indirectly used as alias, f.e.:
         ? ("_FIELD")->NAME
      or:
         M->var := "_FIELD"
         ? ("&var")->NAME

  * harbour/include/hbclass.ch
  * harbour/include/common.ch
    * use a little bit simpler form for HB_SYMBOL_UNUSED()

  * harbour/contrib/hbw32/w32_ole.c
  * harbour/contrib/hbole/ole2.c
    ! fixed numeric to pointer casting
    * accept both pointer and numeric values as window handle
      for easier code migration

2008-08-25 14:46 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/vm/cmdarg.c
     ! hb_hInstance, hb_hPrevInstance, s_iCmdShow, s_WinMainParam
       vars marked as 'static', hb_ prefix changed to s_.
       NOTE: This may pose a problem if some 3rd party code 
             was relying on the names or the fact that these 
             vars were exported by incident (since they were 
             not declared in any Harbour headers.)
             [INCOMPATIBLE]

   * contrib/hbwhat32/whtmain.c
     ! Removed WinMain() function and some global vars colliding 
       with some Harbour core ones.
     * HINSTANCE(), HPREVINSTANCE(), NCMDSHOW() functions now 
       use Harbour API calls to retrieve values.

2008-08-25 14:12 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * make_vc.mak
   * make_vcce.mak
     % Cleaned list of system libraries for VC. winspool.lib 
       removed, the rest documented.
     * Syncing between VC and VCCE.
     ; NOTE: WinCE system lib list didn't get anything removed 
             (just added), but nevertheless pls test it.

   * ChangeLog
     * Some cleanups (regarding my entries).

   * source/pp/hbpp.c
     ! Comment typo.

   * source/rtl/gtclip.c
     ! Fixed for __CYGWIN__.

   * contrib/hbw32/dllcall.c
     ! Disabled asm parts for __CYGWIN__ to make it compile.

   * config/w32/gcc.cf
     ! Added missing system lib wsock32 for Cygwin.

   * config/w32/gcc.cf
   * config/w32/cemgw.cf
   * config/w32/mingw32.cf
   * config/w32/owatcom.cf
   * config/w32/pocc.cf
   * config/w32/watcom.cf
   * config/w32/xcc.cf
     * Attempt to sort out system libs needed for core from 
       those needed for contribs. No system libraries have 
       been removed or added so far. [ I wonder why we need to 
       include contrib sys lib dependencies here, when Harbour 
       GNU make system doesn't build any contrib dependent 
       executables. Also, some ws2_32.lib seems definitely 
       superfluous. ]

   ; TOFIX: (for __CYGWIN__)
     ../../filesys.c: In function `hb_fsPOpen':
     ../../filesys.c:577: warning: passing arg 1 of `pipe' from incompatible pointer type

2008-08-25 14:09 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/tests/rddtest/rddmktst.prg
  * harbour/tests/rddtest/adscl52.prg
  * harbour/tests/rddtest/adscl53.prg
  * harbour/tests/rddtest/ntxcl52.prg
  * harbour/tests/rddtest/ntxcl53.prg
  * harbour/tests/rddtest/cdxcl52.prg
  * harbour/tests/rddtest/rddtst.prg
  * harbour/tests/rddtest/cdxcl53.prg
    * added copyright note. It's my code.

  * harbour/source/debug/dbgentry.c
    ! strip function name from module name used to initialize
      global and file wide variables. It fixes presenting file
      wide static variables in debugger.

  * harbour/source/debug/debugger.prg
    % minor optimization

2008-08-24 21:10 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbw32/w32_ole.c
   * contrib/hbole/ole2.c
     ! 64-bit fix for MessageBox() Harbour level functions.
     * Formatting.

2008-08-24 20:40 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbole/ole2.c
     ! Fixed GPF reported by Guillermo.
       (introduced in 1.0.0rc2 when switching from parnl to 
       parptr as 64-bit cleanup, two calls were missed from 
       the update).
     ! Fixed another potential problem.

2008-08-24 18:18 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/compiler/cmdcheck.c
   * source/compiler/hbusage.c
     * Changed default .c code generation option to -gc0 (from -gc2).
       So now the default is 'compact' (faster/smaller) instead of 
       'verbose' (good to inspect/debug how Harbour pcode works).

   * make_b32.mak
   * make_gcc.mak
   * make_vc.mak
   * make_vcce.mak
   * contrib/mtpl_b32.mak
   * contrib/mtpl_gcc.mak
   * contrib/mtpl_vc.mak
     % Removed explicit -gc0 switches from Harbour command lines.

   * make_vcce.mak
     % Removed unnecessary -DHB_WINCE from Harbour command line.

2008-08-24 13:15 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/vm/runner.c
   * source/vm/fm.c
   * source/common/hbver.c
   * source/rtl/hbgtcore.c
   * source/rtl/gtwvt/gtwvt.c
   * source/rdd/dbfntx/dbfntx1.c
   * source/rdd/workarea.c
   * source/rdd/wacore.c
   * source/rdd/sdf1.c
   * source/rdd/dbfcdx/dbfcdx1.c
   * source/rdd/delim1.c
   * source/rdd/dbf1.c
   * source/rdd/wafunc.c
   * source/rdd/dbffpt/dbffpt1.c
   * source/compiler/hbmain.c
   * source/compiler/fixflex.c
   * source/compiler/gencobj.c
   * source/compiler/genc.c
   * source/compiler/harbour.yyc
   * source/compiler/harbour.y
   * contrib/hbct/disk.c
   * contrib/hbwhat32/whtcdlg.c
   * contrib/gtwvg/gtwvg.c
   * contrib/rddads/adsfunc.c
   * contrib/rddads/ads1.c
   * contrib/hbbmcdx/bmdbfcdx.c
   * contrib/examples/pp/hbppcomp.c
     * hb_strncpy()/hb_strncat() size parameter changed from 
       CONSTANT to 'sizeof( dest ) - 1', where applicable.
     ! hbct/VOLUME() buffer overrun fixed.
     ; NOTE: dbfntx1.c has a couple of places where I wasn't 
             sure of the intention, so I left them unchanged.

2008-08-24 11:47 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbmisc/spd.c
     ! strcpy() -> hb_strncpy()
       Patch by Xavi. Many thanks.

2008-08-23 12:52 UTC-0500 Teo Fonrouge (teo/at/windtelsoft/dot/com)
  * harbour.spec
    * added missing contrib libs needed to build rpm packages:
      libhbmsql.a, libhbsqlit3.a, libhbtpathy.a

2008-08-23 19:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/common/hbwince.c
     ! strcpy() -> hb_strncpy()
     ; TOFIX: Only spd.c and dbgentry.c have some remaining strcpy() 
              calls.

2008-08-23 16:52 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * tests/multifnc/t0.prg
   * tests/multifnc/t1.prg
   * tests/multifnc/t2.prg
   * source/rdd/usrrdd/example/exmemo.prg
   * source/rdd/usrrdd/example/exhsx.prg
   * source/rdd/usrrdd/example/exfcm.prg
   * source/rdd/usrrdd/example/exrlx.prg
   * contrib/xhb/hbsyslog.c
   * contrib/rddado/tests/mysql3.prg
   * contrib/rddado/tests/access1.prg
   * contrib/rddado/tests/access2.prg
   * contrib/rddado/tests/mysql1.prg
   * contrib/hbpgsql/tests/tstpgrdd.prg
     ! SVN headers.

   * contrib/hbwhat32/Makefile
   * contrib/hbwhat32/common.mak
   - contrib/hbwhat32/wintypes.ch
     - Removed wintypes.ch, as it collides with a header with 
       the same name (and similar content) in xhb. It will 
       now use the xhb one, since it already relied on other 
       xhb headers anyway.
       If anyone wants to sort this out properly, pls do.

2008-08-23 16:40 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbgt/Makefile
   * contrib/hbgt/common.mak
   - contrib/hbgt/strdiff.c
   + contrib/hbgt/strdiffg.c
   - contrib/hbgt/charmix.c
   + contrib/hbgt/charmixg.c
   - contrib/hbgt/asciisum.c
   + contrib/hbgt/asciisgt.c
   - contrib/hbgt/ascpos.c
   + contrib/hbgt/ascposgt.c
   * contrib/hbgf/hbgfos2/Makefile
   - contrib/hbgf/hbgfos2/tmenuitm.prg
   + contrib/hbgf/hbgfos2/tmenuit.prg
     ! Some files renamed to not collide with each other 
       on non-GNU make systems.

   * contrib/examples/hscript/cgi.ch
   * contrib/examples/hscript/dir.hs
   * contrib/examples/hscript/multiply.hs
   * contrib/examples/hscript/ugly.hs
   * contrib/examples/hscript/hello.hs
   * contrib/examples/guestbk/guestbk.ini
     + Added SVN headers.

   + source/rtl/gtalleg/common.mak
   + source/rtl/gtalleg/make_gcc.sh
   + source/rtl/gtalleg/make_b32.bat
   + source/rtl/gtalleg/make_vc.bat
     + Added non-GNU make file as an ugly hack to 
       build them on Windows systems.

   - tests/altd.prg
   + tests/altdtest.prg
     * Rename.

   * include/hbver.h
   * harbour-ce-spec
   * harbour-w32-spec
   * harbour.spec
     * Version changed to '1.0.1dev'.
       Trunk will need to be synced to tag/1.0.

   * common.mak
     + Added version to harbour.dll: harbour-101-b32/vc.dll
     ; Work in progress. Pls comment.

2008-08-23 13:05 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   + contrib/hbnf/tests/ftgete.prg
     + Added test.

   * contrib/hbwhat32/Makefile
   * contrib/hbwhat32/common.mak
   + contrib/hbwhat32/whtbmp.c
   + contrib/hbwhat32/whtbrsh.c
   + contrib/hbwhat32/whtcall.c
   + contrib/hbwhat32/whtcdlg.c
   + contrib/hbwhat32/whtclpb.c
   + contrib/hbwhat32/whtcomm.c
   + contrib/hbwhat32/whtcret.c
   + contrib/hbwhat32/whtdate.c
   + contrib/hbwhat32/whtdc.c
   + contrib/hbwhat32/whtdir.c
   + contrib/hbwhat32/whtdlg.c
   + contrib/hbwhat32/whtdll.c
   + contrib/hbwhat32/whtdraw.c
   + contrib/hbwhat32/whtfont.c
   + contrib/hbwhat32/whtgdi.c
   + contrib/hbwhat32/whthead.c
   + contrib/hbwhat32/whticon.c
   + contrib/hbwhat32/whtilst.c
   + contrib/hbwhat32/whtinet.c
   + contrib/hbwhat32/whtini.c
   + contrib/hbwhat32/whtkbrd.c
   + contrib/hbwhat32/whtlv.c
   + contrib/hbwhat32/whtmain.c
   + contrib/hbwhat32/whtmapi.c
   + contrib/hbwhat32/whtmem.c
   + contrib/hbwhat32/whtmenu.c
   + contrib/hbwhat32/whtmeta.c
   + contrib/hbwhat32/whtmisc.c
   + contrib/hbwhat32/whtmmcap.c
   + contrib/hbwhat32/whtmous.c
   + contrib/hbwhat32/whtmsg.c
   + contrib/hbwhat32/whtpen.c
   + contrib/hbwhat32/whtprn.c
   + contrib/hbwhat32/whtrect.c
   + contrib/hbwhat32/whtreg.c
   + contrib/hbwhat32/whtrgn.c
   + contrib/hbwhat32/whtscrlb.c
   + contrib/hbwhat32/whtseria.c
   + contrib/hbwhat32/whtshell.c
   + contrib/hbwhat32/whtsock.c
   + contrib/hbwhat32/whtsys.c
   + contrib/hbwhat32/whttab.c
   + contrib/hbwhat32/whttbar.c
   + contrib/hbwhat32/whttext.c
   + contrib/hbwhat32/whttree.c
   + contrib/hbwhat32/whtview.c
   + contrib/hbwhat32/whtwnd.c
   - contrib/hbwhat32/_winbmp.c
   - contrib/hbwhat32/_winbrsh.c
   - contrib/hbwhat32/_wincall.c
   - contrib/hbwhat32/_wincdlg.c
   - contrib/hbwhat32/_winclpb.c
   - contrib/hbwhat32/_wincomm.c
   - contrib/hbwhat32/_wincret.c
   - contrib/hbwhat32/_windate.c
   - contrib/hbwhat32/_windc.c
   - contrib/hbwhat32/_windir.c
   - contrib/hbwhat32/_windlg.c
   - contrib/hbwhat32/_windll.c
   - contrib/hbwhat32/_windraw.c
   - contrib/hbwhat32/_winfont.c
   - contrib/hbwhat32/_wingdi.c
   - contrib/hbwhat32/_winhead.c
   - contrib/hbwhat32/_winicon.c
   - contrib/hbwhat32/_winilst.c
   - contrib/hbwhat32/_wininet.c
   - contrib/hbwhat32/_winini.c
   - contrib/hbwhat32/_winkbrd.c
   - contrib/hbwhat32/_winlv.c
   - contrib/hbwhat32/_winmain.c
   - contrib/hbwhat32/_winmapi.c
   - contrib/hbwhat32/_winmem.c
   - contrib/hbwhat32/_winmenu.c
   - contrib/hbwhat32/_winmeta.c
   - contrib/hbwhat32/_winmisc.c
   - contrib/hbwhat32/_winmmcap.c
   - contrib/hbwhat32/_winmous.c
   - contrib/hbwhat32/_winmsg.c
   - contrib/hbwhat32/_winpen.c
   - contrib/hbwhat32/_winprn.c
   - contrib/hbwhat32/_winrect.c
   - contrib/hbwhat32/_winreg.c
   - contrib/hbwhat32/_winrgn.c
   - contrib/hbwhat32/_winscrlb.c
   - contrib/hbwhat32/_winserial.c
   - contrib/hbwhat32/_winshell.c
   - contrib/hbwhat32/_winsock.c
   - contrib/hbwhat32/_winsys.c
   - contrib/hbwhat32/_wintab.c
   - contrib/hbwhat32/_wintbar.c
   - contrib/hbwhat32/_wintext.c
   - contrib/hbwhat32/_wintree.c
   - contrib/hbwhat32/_winview.c
   - contrib/hbwhat32/_winwnd.c
     * Renamed hbwhat32 files to not have a leading underscore 
       and long filenames.

2008-08-23 11:38 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/pp/hbpp.c
   * source/vm/cmdarg.c
   * source/vm/memvars.c
   * source/rtl/dates.c
   * source/rtl/fstemp.c
   * source/rtl/gtchrmap.c
   * source/rtl/gtcrs/gtcrs.c
   * source/rtl/gtpca/gtpca.c
   * source/rtl/gtstd/gtstd.c
   * source/rdd/dbf1.c
   * source/rdd/dbfntx/dbfntx1.c
   * contrib/hbct/disk.c
   * contrib/hbfbird/firebird.c
   * contrib/hbw32/w32_ole.c
   * contrib/xhb/hboutdbg.c
   * contrib/examples/pp/hbppcore.c
     * strncpy() -> hb_strncpy()
     * strncat() -> hb_strncat()
     ! In most of these places the terminating zero 
       was not explicitly set by the caller before.

   * contrib/hbnf/getenvrn.c
   * contrib/hbw32/dllcall.c
   * contrib/hbw32/w32_ole.c
   * contrib/hbwhat32/_wincdlg.c
   * contrib/hbwhat32/_windll.c
   * contrib/hbwhat32/_winmain.c
   * contrib/hbziparch/hbzipnew.cpp
     ! strcpy() -> hb_strncpy()
     ! strcat() -> hb_strncat()
     ; TOFIX1: There are still two strcpy()s left in SQL_SPRINTF().
               Xavi, could you pls take a look at it?
     ; TOFIX2: There are still a few strcpy()s in hbwince.c and 
               dbgentry.c.

   * source/pp/hbpp.c
   * source/rtl/gtcrs/gtcrs.c
   * source/rtl/gtpca/gtpca.c
   * source/rtl/gtstd/gtstd.c
   * contrib/hbfbird/firebird.c
   * contrib/hbwhat32/_wincdlg.c
   * contrib/hbwhat32/_windll.c
     ! Fixed wrong buffer sizes (or no buffer limits) in some 
       string copy operations (potential buffer overruns).

   * contrib/hbnf/getenvrn.c
     ! Fixed bad leak in FT_GETE() on Win32 systems.

   * source/rtl/fstemp.c
     ! hb_fsTempName(): Fixed potential buffer overrun by one byte.
     * Minor formatting.

   * source/rtl/fstemp.c
   * source/rtl/hbffind.c
   * contrib/xhb/hboutdbg.c
     * Using sizeof() instead of explicit size in string copy operations.
     ; TODO: There is a lot more to fix like this.

2008-08-22 22:51 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * utils/hbtest/rt_array.prg
     + Added failing test case of doing AEval() 
       and resizing the evaluated array in the 
       eval codeblock.
     ; TOFIX

   * utils/hbdoc/ft_funcs.prg
   * utils/hbdoc/hbdoc.prg
   * utils/hbmake/ft_funcs.prg
   * utils/hbmake/hbmutils.prg
     ! Two EOL handling fixes applied.
       Thanks to Bill Robertson.
     ; Please test.

   * contrib/xhb/Makefile
   * contrib/xhb/common.mak
   + contrib/xhb/arrayblk.prg
     + Added HB_ARRAYBLOCK() from xhb.

2008-08-22 17:03 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/make_gcc_all.sh
     + Added darwin autodetection.

   * contrib/Makefile
     + Added HB_CONTRIB_ADDONS envvar which enables building 
       local custom contribs stored in the contrib dir.
       A separate dir may be better, but we will see.

   * utils/hbtest/hbtest.prg
     * Changed test .dbf filename casing to lowercase.

   + tests/rddtest
   + tests/rddtest/rddmktst.prg
   + tests/rddtest/adscl52.prg
   + tests/rddtest/adscl53.prg
   + tests/rddtest/ntxcl52.prg
   + tests/rddtest/ntxcl53.prg
   + tests/rddtest/cdxcl52.prg
   + tests/rddtest/rddtst.prg
   + tests/rddtest/make_c52.bat
   + tests/rddtest/cdxcl53.prg
   + tests/rddtest/make_c53.bat
     + Added RDD tests from xhb.

2008-08-22 14:56 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/rtl/gtalleg/ssf.h
     ! Fixed to compile with BCC.

   * source/rtl/gtalleg/Makefile
     ! Missing SVN header.
     % Removed obsolete HB_MULTI_GT #define.

   * source/rtl/gtalleg/gtalleg.c
   * utils/hbmake/hbmake.prg
     ! Typos.

2008-08-22 11:30 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/rtl/gtalleg/gtalleg.c
     * GFX_* -> HB_GFX_*
     ; (untested)

2008-08-22 11:20 UTC+0100 JF Lefebvre (MAFACT) (jfl at mafact dot com)
   * utils/hbdoc/hbdoc.prg 
   * utils/hbmake/Makefile
   * utils/hbmake/hbmake.prg
     % removing 'ANNOUNCE RDDSYS', not anymore needed
       causing some problem with msvc linking.
   * debug/debugger.prg 
     % changing all GTI_ by HB_GTI_

2008-08-22 09:32 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * common.mak
   * source/vm/debug.c
   * source/vm/hvm.c
   * source/vm/Makefile
   + source/vm/debugold.c
     + Added some HB_DBG_*() functions for compatibility 
       with certain 3rd party libs. They are marked with 
       HB_LEGACY_LEVEL, and will be removed (pbly at 1.1.0), 
       so everyone is encouraged to use __DBG*() version 
       for Harbour versions above 0x010000 (or not use 
       them at all, if this is possible). If these functions 
       are indeed needed for some functionality, it'd be 
       good to hear about it, maybe there is a solution 
       which doesn't require internals.

   * utils/hbdoc/ft_funcs.prg
   * utils/hbmake/ft_funcs.prg
     * Using FS_* manifest constants.

2008-08-22 08:20 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * common.mak
   * make_b32.mak
   * make_gcc.mak
   * make_vc.mak
   * make_vcce.mak
   * utils/hbdoc/Makefile
   * utils/hbdoc/bld_b32.bat
   * utils/hbdoc/bld_vc.bat
   * utils/hbdoc/hbdoc.prg
   * utils/hbmake/Makefile
   * utils/hbmake/bld_b32.bat
   * utils/hbmake/bld_vc.bat
   * utils/hbmake/hbmake.prg
     % Reduced executable size of hbmake and hbdoc
       (by 20%) by excluding unused libs and RDD stuff.
     % Optimized local non-GNU make files to work 
       faster and generate faster executables.

   * utils/hbdoc/hbdocdef.ch
     % Removed unused macro.
     * minor formatting.

2008-08-21 18:52 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * common.mak
   * utils/hbdoc/Makefile
   * utils/hbdoc/bld_b32.bat
   * utils/hbdoc/bld_vc.bat
   - utils/hbdoc/fclass1.prg
   - utils/hbdoc/ffile1.prg
   * utils/hbdoc/ft_funcs.prg
   * utils/hbmake/Makefile
   * utils/hbmake/bld_vc.bat
   * utils/hbmake/bld_b32.bat
   - utils/hbmake/fclass1.prg
   - utils/hbmake/ffile1.prg
   * utils/hbmake/ft_funcs.prg
   * utils/hbmake/pickarry.prg
   - utils/hbmake/prb_stak.prg
   - utils/hbmake/pickfile.prg
     % Removed unused modules.
     % Replaced module with simple constructs.
     * Merged file handling classes and functions into 
       one file, for easier syncing.

2008-08-21 18:06 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * utils/hbdoc/fclass1.prg
   * utils/hbdoc/ffile1.prg
   * utils/hbdoc/ft_funcs.prg
   * utils/hbmake/fclass1.prg
   * utils/hbmake/tmake.prg
   * utils/hbmake/ffile1.prg
   * utils/hbmake/ft_funcs.prg
   * utils/hbmake/pickarry.prg
   * utils/hbmake/pickfile.prg
   * utils/hbmake/hbmutils.prg
   * utils/hbmake/hbmake.prg
     * Cleanups.
     ! Fixed open bug from previous commit (hopefully).

   * common.mak
   * utils/hbmake/Makefile
   * utils/hbmake/bld_b32.bat
   * utils/hbmake/bld_vc.bat
   - utils/hbmake/readline.c
   + utils/hbmake/hbmfrdln.c
   * utils/hbmake/hbmlang.c
   + utils/hbmake/hbmgauge.c
     * readline.c -> hbmfrdln.c
       (made fully identical to /contrib/xhb/freadlin.c)
     * GAUGE*() stuff moved into separate file.
       (separate file is fully identical to /contrib/hbclipsm/gauge.c)
     ! GAUGE*() function copyright restored to original.

2008-08-21 14:11 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * include/hbcomp.h
     * Minor formatting (alignment).

   * ChangeLog
     ! Added missing file from previous entry.

   * contrib/hbclipsm/gauge.c
     ! Fixed very old bug (too small buffer for snprintf()).
     * Minor adjustment to Harbour percentage var retrieval.

   * common.mak
   * utils/hbmake/Makefile
   * utils/hbmake/bld_b32.bat
   * utils/hbmake/bld_vc.bat
   - utils/hbmake/checkdef.ch
   - utils/hbmake/checks.ch
   - utils/hbmake/checks.prg
   * utils/hbmake/fclass1.prg
   * utils/hbmake/ffile1.prg
   * utils/hbmake/ft_funcs.prg
   - utils/hbmake/hbdocdef.ch
   * utils/hbmake/hbmake.prg
   * utils/hbmake/hbmlang.c
   * utils/hbmake/hbmutils.prg
   * utils/hbmake/Makefile
   * utils/hbmake/pickfile.prg
   * utils/hbmake/prb_stak.prg
   - utils/hbmake/radiodef.ch
   - utils/hbmake/radios.ch
   - utils/hbmake/radios.prg
   * utils/hbmake/readline.c
   * utils/hbmake/tmake.prg
   * utils/hbdoc/fclass1.prg
   * utils/hbdoc/ffile1.prg
   * utils/hbdoc/ft_funcs.prg
   * utils/hbdoc/genasc.prg
   * utils/hbdoc/genchm.prg
   * utils/hbdoc/genhpc.prg
   * utils/hbdoc/genhtm.prg
   * utils/hbdoc/genng.prg
   * utils/hbdoc/genos2.prg
   * utils/hbdoc/genpdf1.prg
   * utils/hbdoc/genrtf.prg
   * utils/hbdoc/gentrf.prg
   * utils/hbdoc/hbdoc.prg
   * utils/hbdoc/hbdocdef.ch
     * Cleanups.
     % Removed unused parts.
     ! GAUGE*() functions synced with hbclipsm.lib.
     * Removed hbclip.ch requirement when compiled 
       with CA-Cl*pper. (not tested)

2008-08-21 10:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * include/dbinfo.ch
   * include/dbstruct.ch
   * include/hbgtinfo.ch
   * include/hblang.ch
   * include/setcurs.ch
     ! Added "also used from C code" comments.

   * utils/hbmake/ffile1.prg
   * utils/hbdoc/ffile1.prg
     ! Minor cleanup.

   * include/hbgfxdef.ch
   * include/hbgtinfo.ch
     * Marked old GTI_*, GFX_* macros with HB_LEGACY_LEVEL.
       (Old macro HB_GT_NO_XHB no longer works)

   * include/hbsetup.ch
     + Added HB_LEGACY_LEVEL macro. Currently turned on.
       Will be turned off later, and completely removed 
       as a final step. Times are not defined for these 
       yet. Please prepare to modify your code to not 
       use old legacy stuff.
       NOTE: C code using legacy Clipper (.api) headers are
             unaffected.

   * include/hbapirdd.h
     * Marked HARBOUR_* macros with HB_LEGACY_LEVEL

   * include/hbsetup.h
     * Marked OS_UNIX_COMPATIBLE, OS_PATH_DELIMITER 
       macros with HB_LEGACY_LEVEL.

   * include/hbapifs.h
   * source/rtl/filesys.c
     * Marked hb_fileNameConv() as HB_LEGACY_LEVEL.
     ; 3rd party and app developers should switch to 
       hb_fsNameConv().

   * source/rtl/box.c
   * source/rtl/console.c
   * source/rtl/filesys.c
   * source/rtl/gtapi.c
   * source/rtl/hbgtcore.c
   * contrib/hbclipsm/gauge.c
   * contrib/hbclipsm/status.c
   * contrib/hbct/ctwin.c
   * source/rtl/set.c
   * utils/hbmake/hbmlang.c
     * Updated core/contrib sources to use non-legacy names:
       HB_CLRSTR_LEN, HB_EVALINFO, PHB_EVALINFO, HB_FHANDLE
     ; TODO: FHANDLE -> HB_FHANDLE is incomplete yet.

   * include/hbdefs.h
     * Minor formatting.

   * include/hbmath.h
     ! #include <hbmath.ch> -> #include "hbmath.ch"

   * contrib/hbmysql/mysql.c
     + function SQLFETCHR() updated to allow fetching binary (BLOB) 
       fields. [Thanks to Mitja Podgornik]

   * include/hbapifs.h
   * include/hbapigt.h
   * include/hbapiitm.h
   * include/hbdefs.h
   * include/item.api
   * include/filesys.api
   * include/gt.api
     * FHANDLE      -> HB_FHANDLE
     * EVALINFO     -> HB_EVALINFO
     * PEVALINFO    -> PHB_EVALINFO
     * EVALINFO_PTR -> marked as legacy
     * CLR_STRLEN   -> HB_CLRSTR_LEN
     ; Old names are still working if HB_LEGACY_LEVEL 
       is #defined, and by default now it is.
     ; It's highly recommended to change all 3rd party and 
       app C code to use the new #defines/types/functions.
     ; NOTE1: There are some more names which are still 
              in the legacy "namespace", and gradually 
              I'd like to clean some of these as well. The most 
              important would be the type names, as these 
              are currently colliding with multiple external 
              packages, like windows.h, and it also makes it 
              impossible to compile hbfimage on certain systems.
     ; NOTE2: I'd also like to move the *_PTR (like HB_ITEM_PTR) 
              names to legacy status as we don't really use 
              them except in a few VM files, and we have PHB_* 
              as a wide-spread (and shorter) replacement.
     ; NOTE3: We may also use HB_LEGACY_LEVEL to obolete other 
              legacy or unsafe functions, with better new 
              alternatives.
     ; NOTE4: Here's a more or less complete list of names 
              that _may_ cause such problems:
              ; Type related stuff
                - TRUE, FALSE
                - BOOL, BYTE, SCHAR, UINT, USHORT
                - INT_MAX, INT_MIN
                - INT16, INT16_MAX, INT16_MIN
                - INT24_MAX, INT24_MIN
                - INT32, INT32_MAX, INT32_MIN
                - INT64, INT64_MAX, INT64_MIN
                - LONG, LONG_MAX, LONG_MIN
                - LONGLONG, LONGLONG_MAX, LONGLONG_MIN
                - SHORT, SHRT_MAX, SHRT_MIN
                - UCHAR, UCHAR_MAX
                - UINT16, UINT16_MAX
                - UINT24_MAX
                - UINT32, UINT32_MAX
                - UINT64, UINT64_MAX
                - ULONG, ULONG_MAX
                - ULONGLONG, ULONGLONG_MAX
              ; Some hacks currently used:
                - HB_DONT_DEFINE_BASIC_TYPES
                - HB_DONT_DEFINE_BOOL
                - HB_OS_WIN_32_USED ->
                  (include <windows.h> locally where needed)
              ; Compiler related stuff:
                - VS_*, VU_*, VT_*, FUN_*
                - *COMDECLARED, *COMCLASS, *COMSYMBOL
                - VAR, PVAR
                - _FUNC, PFUNCTION
                - _INLINE, PINLINE
                - _FUNCALL, PFUNCALL
                - _EXTERN, PEXTERN
                - AUTOOPEN, PAUTOOPEN
                - FUNCTIONS
                - INLINES
                - FUNCALLS
                - SYMBOLS
              ; Clipper compatibility #defines,
                better be moved behind a compatibility layer:
                - F_ERROR, FS_ERROR
                - IS*()
                - E_*, EF_*
                - FL_*, FLX_*, FO_*, FXO_*
                - _B_*
                - FC_*, FS_*, FD_*
                - INKEY_*, K_*
                - ES_*, EG_*
                - SC_*
                - DBS_*
              ; + All RDD related stuff, including "dbinfo.ch" constants.

2008-08-20 23:06 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/mtpl_b32.mak
   * contrib/mtpl_gcc.mak
   * contrib/mtpl_vc.mak
     ! Added -km switch to contribs by default.
       This way it's synced with the GNU-make system, too.

   * utils/hbdoc/hbdocdef.ch
   * utils/hbdoc/fclass1.prg
   * utils/hbdoc/ffile1.prg
   * utils/hbdoc/ft_funcs.prg
   * utils/hbmake/hbdocdef.ch
   * utils/hbmake/fclass1.prg
   * utils/hbmake/ffile1.prg
   * utils/hbmake/ft_funcs.prg
     * Cleanups, optimizations (in ft_funcs.prg)
     ! Synced these for common files to be completely 
       identical. In fact this is a fix, as their name 
       is common so they were "randomly" interchanged 
       along the non-GNU build process even before.
       There was only one very small functional difference, 
       though.
     ; Please test.

2008-08-20 19:07 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/debug/dbgentry.c
     ! HB_DBG_*() -> __DBG*().
     ; I somehow completely missed this file from recent 
       update, thanks Bill.

2008-08-20 12:50 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * tests/longdev.prg
   * tests/hbpptest/hbpptest.prg
   * tests/testcgi.prg
   * tests/foreach.prg
   * tests/onidle.prg
   * tests/tstchbx.prg
   * tests/codebl.prg
   * tests/tstdbi.prg
   * tests/vmasort.prg
   * tests/tstasort.prg
   * tests/testbrw.prg
   * tests/inkeytst.prg
   * tests/testrdd2.prg
   * tests/keywords.prg
   * tests/testhtml.prg
   * tests/readhrb.prg
   * tests/stripem.prg
   * tests/wvtext.prg
   * tests/testpre.prg
   * tests/seconds.prg
   * tests/fsplit.prg
   * tests/mousetst.prg
   * contrib/hbmysql/tmysql.prg
   * contrib/hbct/numconv.prg
   * contrib/hbct/ctmisc.prg
   * contrib/hbodbc/todbc.prg
   * contrib/hbapollo/tests/apollo.prg
   * contrib/hbnf/acctyear.prg
   * contrib/hbnf/acctadj.prg
   * contrib/hbnf/nwsem.prg
   * contrib/hbnf/week.prg
   * contrib/hbnf/acctmnth.prg
   * contrib/hbnf/savearr.prg
   * contrib/hbnf/madd.prg
   * contrib/hbnf/mouse1.prg
   * contrib/hbnf/month.prg
   * contrib/hbnf/findith.prg
   * contrib/hbnf/acctweek.prg
   * contrib/hbnf/pegs.prg
   * contrib/hbnf/acctqtr.prg
   * contrib/hbnf/nooccur.prg
   * contrib/hbnf/dayofyr.prg
   * contrib/hbnf/menu1.prg
   * contrib/hbnf/sqzn.prg
   * contrib/hbnf/asum.prg
   * contrib/hbnf/aavg.prg
   * contrib/hbnf/any2any.prg
   * contrib/hbnf/adessort.prg
   * contrib/hbnf/amedian.prg
   * contrib/hbnf/blink.prg
   * contrib/hbnf/qtr.prg
   * contrib/hbnf/aredit.prg
   * contrib/hbnf/xbox.prg
   * contrib/hbnf/ftround.prg
   * contrib/hbnf/invclr.prg
   * contrib/hbnf/tempfile.prg
   * contrib/hbnf/diskfunc.prg
   * contrib/hbnf/mouse2.prg
   * contrib/hbnf/daytobow.prg
   * contrib/hbnf/anomatch.prg
   * contrib/hbnf/datecnfg.prg
   * contrib/hbnf/tbwhile.prg
   * contrib/hbnf/year.prg
   * contrib/hbnf/elapsed.prg
   * contrib/hbnf/dfile.prg
   * contrib/hbnf/clrsel.prg
   * contrib/hbmisc/twirler.prg
   * contrib/hbmisc/fileread.prg
   * contrib/hbmisc/stringp.prg
   * contrib/hbgf/hbgfw32/winctrl.prg
   * contrib/hbgf/hbgfw32/form.prg
   * contrib/hbgf/hbgfos2/winctrl.prg
   * contrib/hbgf/hbgfos2/tform.prg
   * contrib/hbtip/httpcln.prg
   * contrib/hbvpdf/hbvpdf.prg
   * contrib/hbvpdf/hbvpdft.prg
   * contrib/examples/guestbk/guestbk.prg
   * contrib/examples/pe/editorhi.prg
     * Some more general code cleanups ( if() -> iif() ).

2008-08-20 11:50 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * tests/onidle.prg
   * tests/codebloc.prg
   * tests/keywords.prg
   * tests/wvtext.prg
   * tests/test_all.prg
   * tests/ainstest.prg
   * doc/es/compiler.txt
   * doc/es/file.txt
   * contrib/hbct/numconv.prg
   * contrib/hbct/tests/expomant.prg
   * contrib/hbwhat32/whatutil.prg
   * contrib/hbwhat32/winrbar.prg
   * contrib/hbwhat32/wintabs.prg
   * contrib/hbwhat32/wincomm.prg
   * contrib/hbwhat32/wincdlg.prg
   * contrib/hbwhat32/wintbar.prg
   * contrib/hbwhat32/_wininet.c
   * contrib/hbwhat32/wincore.prg
   * contrib/hbw32/w32_ole.c
   * contrib/hbapollo/tests/apollo.prg
   * contrib/hbnf/dispmsg.prg
   * contrib/hbnf/fttext.c
   * contrib/hbnf/mouse1.prg
   * contrib/hbnf/menu1.prg
   * contrib/hbnf/sleep.prg
   * contrib/hbnf/xbox.prg
   * contrib/hbnf/popadder.prg
   * contrib/hbnf/mouse2.prg
   * contrib/hbnf/pchr.prg
   * contrib/hbhpdf/tests/harupdf.prg
   * contrib/gtwvg/wvgclass.prg
   * contrib/gtwvg/tests/demowvg.prg
   * contrib/gtwvg/wvgpaint.prg
   * contrib/rddads/tests/testmg.prg
   * contrib/hbclipsm/tests/testgaug.prg
   * contrib/hbfimage/tests/fitest.prg
   * contrib/hbmisc/twirler.prg
   * contrib/hbtip/httpcln.prg
   * contrib/hbtip/ftpcln.prg
   * contrib/hbvpdf/hbvpdft.prg
   * utils/hbmake/hbmake.prg
     * Some more general code cleanups.
     * iif(), quote char, #include, filename-casing, = usage cleanups, 
       hardcoded absolute paths, non-ASCII drawing chars in source.
       Using mixed-case filenames to #include .ch files breaks on 
       non-WinDOS platforms.

2008-08-20 10:22 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * utils/hbdoc/hbdoc.prg
   * utils/hbdoc/gentrf.prg
   * utils/hbmake/hbmake.prg
     * Some more general code cleanups.

2008-08-20 10:09 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbmzip/hbmzip.c
   * contrib/hbmzip/readme.txt
     ! Typos.

   * utils/hbdoc/rtf.prg
   * utils/hbdoc/fclass1.prg
   * utils/hbdoc/genos2.prg
   * utils/hbdoc/genng.prg
   * utils/hbdoc/genasc.prg
   * utils/hbdoc/genchm.prg
   * utils/hbdoc/os2.prg
   * utils/hbdoc/html.prg
   * utils/hbdoc/genhpc.prg
   * utils/hbdoc/ng.prg
   * utils/hbdoc/ffile1.prg
   * utils/hbdoc/ft_funcs.prg
   * utils/hbdoc/hbdoc.prg
   * utils/hbdoc/troff.prg
   * utils/hbdoc/genhtm.prg
   * utils/hbdoc/genpdf1.prg
   * utils/hbdoc/gentrf.prg
   * utils/hbdoc/genrtf.prg
   * utils/hbmake/fclass1.prg
   * utils/hbmake/tmake.prg
   * utils/hbmake/ffile1.prg
   * utils/hbmake/ft_funcs.prg
   * utils/hbmake/pickarry.prg
   * utils/hbmake/pickfile.prg
   * utils/hbmake/hbmutils.prg
   * utils/hbmake/hbmake.prg
     ! Fixed problems reported by Bill Robertson. (Thanks)
     * Some general code cleanups.

2008-08-19 17:17 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * doc/en/string.txt
   * doc/en/rddord.txt
   * doc/hbmake.txt
     * More cleanups, formatting (filename casing, CA-Cl*pper, etc).

2008-08-19 17:06 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * doc/en/string.txt
   * doc/en/rddord.txt
   * doc/en/treport.txt
   * doc/en/memvar2.txt
   * doc/en/terminal.txt
   * doc/en/rddmisc.txt
   * doc/en/setmode.txt
   * doc/en/rdddb.txt
   * doc/en/tbrowse.txt
   * doc/en/set.txt
   * doc/en/sayget.txt
   * doc/es/treport.txt
   * ChangeLog
   * utils/hbtest/rt_misc.prg
     * More cleanups, formatting (filename casing, CA-Cl*pper, etc).

2008-08-19 16:16 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * doc/en/diskspac.txt
   * doc/en/string.txt
   * doc/en/rddord.txt
   * doc/en/terminal.txt
   * doc/en/rddmisc.txt
   * doc/en/datetime.txt
   * doc/en/array.txt
   * doc/en/rdddb.txt
   * doc/en/menu.txt
   * doc/en/file.txt
   * doc/en/eval.txt
   * ChangeLog
   * contrib/hbodbc/todbc.prg
   * contrib/hbodbc/tests/odbcdemo.prg
   * contrib/hbtpathy/readme.txt
   * utils/hbmake/pickfile.prg
     * More cleanups, formatting (filename casing, CA-Cl*pper, etc).

2008-08-19 14:58 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * make_deb.sh
     * Removed wrong comment recently added.
       (we will need to fix hbfimage compilation anyway)

   * harbour-ce-spec
   * harbour-w32-spec
   * harbour.spec
   * debian/control
   * include/vm.api
   * include/extend.api
   * include/button.ch
   * include/hbstack.h
   * include/item.api
   * include/rdd.api
   * include/gt.api
   * include/dbinfo.ch
   * include/error.api
   * include/filesys.api
   * include/hbapigt.h
   * include/clipdefs.h
   * include/assert.ch
   * include/fm.api
   * include/extend.h
   * source/compiler/genhrb.c
   * config/os2/install.cf
   * tests/db_brows.prg
   * tests/debugtst.prg
   * tests/ac_test.prg
   * tests/testhtml.prg
   * tests/tstcolor.prg
   * doc/hdr_tpl.txt
   * doc/man/harbour.1
   * doc/dirstruc.txt
   * doc/howtobld.txt
   * doc/en/diskspac.txt
   * doc/en/string.txt
   * doc/en/rddord.txt
   * doc/en/math.txt
   * doc/en/error.txt
   * doc/en/treport.txt
   * doc/en/memvar2.txt
   * doc/en/terminal.txt
   * doc/en/dir.txt
   * doc/en/rddmisc.txt
   * doc/en/var.txt
   * doc/en/nation.txt
   * doc/en/dbstrux.txt
   * doc/en/datetime.txt
   * doc/en/memo.txt
   * doc/en/tgetlist.txt
   * doc/en/tlabel.txt
   * doc/en/hb_compa.txt
   * doc/en/array.txt
   * doc/en/rdddb.txt
   * doc/en/dbsdf.txt
   * doc/en/tbrowse.txt
   * doc/en/hvm.txt
   * doc/en/input.txt
   * doc/en/dbdelim.txt
   * doc/en/browse.txt
   * doc/en/menu.txt
   * doc/en/file.txt
   * doc/en/binnum.txt
   * doc/en/tclass.txt
   * doc/en/set.txt
   * doc/en/misc.txt
   * doc/en/sayget.txt
   * doc/en/readme.txt
   * doc/es/diskspac.txt
   * doc/es/tlabel.txt
   * doc/es/array.txt
   * doc/es/dbsdf.txt
   * doc/es/tbrowse.txt
   * doc/es/math.txt
   * doc/es/hvm.txt
   * doc/es/treport.txt
   * doc/es/input.txt
   * doc/es/dbdelim.txt
   * doc/es/browse.txt
   * doc/es/memvar2.txt
   * doc/es/command.txt
   * doc/es/dir.txt
   * doc/es/file.txt
   * doc/es/eval.txt
   * doc/es/binnum.txt
   * doc/es/nation.txt
   * doc/es/var.txt
   * doc/es/tclass.txt
   * doc/es/dbstrux.txt
   * doc/es/misc.txt
   * doc/es/datetime.txt
   * doc/es/sayget.txt
   * doc/es/memo.txt
   * doc/es/readme.txt
   * doc/es/tgetlist.txt
   * doc/readme.txt
   * contrib/hbct/ctnet.c
   * contrib/hbct/video.c
   * contrib/hbct/dattime3.c
   * contrib/hbct/color.c
   * contrib/hbnf/acctyear.prg
   * contrib/hbnf/byteneg.prg
   * contrib/hbnf/isshare.prg
   * contrib/hbnf/sinkey.prg
   * contrib/hbnf/dhkey.h
   * contrib/hbnf/kspeed.c
   * contrib/hbnf/prtscr.c
   * contrib/hbnf/descendn.c
   * contrib/hbnf/peek.c
   * contrib/hbnf/scancode.prg
   * contrib/hbnf/vidmode.prg
   * contrib/hbnf/nwsem.prg
   * contrib/hbnf/acctadj.prg
   * contrib/hbnf/week.prg
   * contrib/hbnf/vidcur.prg
   * contrib/hbnf/iamidle.c
   * contrib/hbnf/prtesc.prg
   * contrib/hbnf/miltime.prg
   * contrib/hbnf/proper.c
   * contrib/hbnf/acctmnth.prg
   * contrib/hbnf/savearr.prg
   * contrib/hbnf/rand1.prg
   * contrib/hbnf/madd.prg
   * contrib/hbnf/dispmsg.prg
   * contrib/hbnf/settime.prg
   * contrib/hbnf/restsets.prg
   * contrib/hbnf/page.prg
   * contrib/hbnf/byt2bit.prg
   * contrib/hbnf/setkeys.c
   * contrib/hbnf/month.prg
   * contrib/hbnf/byt2hex.prg
   * contrib/hbnf/findith.prg
   * contrib/hbnf/at2.prg
   * contrib/hbnf/acctweek.prg
   * contrib/hbnf/dispc.c
   * contrib/hbnf/gcd.prg
   * contrib/hbnf/pegs.prg
   * contrib/hbnf/min2dhm.prg
   * contrib/hbnf/acctqtr.prg
   * contrib/hbnf/numlock.c
   * contrib/hbnf/dosver.prg
   * contrib/hbnf/nooccur.prg
   * contrib/hbnf/dayofyr.prg
   * contrib/hbnf/metaph.prg
   * contrib/hbnf/ontick.c
   * contrib/hbnf/menu1.prg
   * contrib/hbnf/byteand.prg
   * contrib/hbnf/sqzn.prg
   * contrib/hbnf/bytexor.prg
   * contrib/hbnf/ftidle.c
   * contrib/hbnf/workdays.prg
   * contrib/hbnf/byteor.prg
   * contrib/hbnf/asum.prg
   * contrib/hbnf/shift.c
   * contrib/hbnf/sleep.prg
   * contrib/hbnf/wda.prg
   * contrib/hbnf/aavg.prg
   * contrib/hbnf/woy.prg
   * contrib/hbnf/origin.c
   * contrib/hbnf/any2any.prg
   * contrib/hbnf/chdir.c
   * contrib/hbnf/adessort.prg
   * contrib/hbnf/setdate.prg
   * contrib/hbnf/netpv.prg
   * contrib/hbnf/amedian.prg
   * contrib/hbnf/blink.prg
   * contrib/hbnf/stod.c
   * contrib/hbnf/vertmenu.prg
   * contrib/hbnf/qtr.prg
   * contrib/hbnf/linked.prg
   * contrib/hbnf/n2color.c
   * contrib/hbnf/aredit.prg
   * contrib/hbnf/alt.c
   * contrib/hbnf/xbox.prg
   * contrib/hbnf/ftround.prg
   * contrib/hbnf/hex2dec.prg
   * contrib/hbnf/nwuid.prg
   * contrib/hbnf/dectobin.prg
   * contrib/hbnf/bitset.prg
   * contrib/hbnf/aemaxlen.prg
   * contrib/hbnf/nwlstat.prg
   * contrib/hbnf/invclr.prg
   * contrib/hbnf/ctrl.c
   * contrib/hbnf/lastday.prg
   * contrib/hbnf/tempfile.prg
   * contrib/hbnf/diskfunc.prg
   * contrib/hbnf/scregion.prg
   * contrib/hbnf/mouse2.prg
   * contrib/hbnf/d2e.prg
   * contrib/hbnf/ftisprn.c
   * contrib/hbnf/pickday.prg
   * contrib/hbnf/firstday.prg
   * contrib/hbnf/daytobow.prg
   * contrib/hbnf/anomatch.prg
   * contrib/hbnf/pvid.prg
   * contrib/hbnf/isbiton.prg
   * contrib/hbnf/color2n.c
   * contrib/hbnf/isbit.prg
   * contrib/hbnf/putkey.c
   * contrib/hbnf/cntryset.prg
   * contrib/hbnf/datecnfg.prg
   * contrib/hbnf/getenvrn.c
   * contrib/hbnf/easter.prg
   * contrib/hbnf/bytenot.prg
   * contrib/hbnf/ntow.prg
   * contrib/hbnf/poke.c
   * contrib/hbnf/aeminlen.prg
   * contrib/hbnf/floptst.prg
   * contrib/hbnf/pchr.prg
   * contrib/hbnf/savesets.prg
   * contrib/hbnf/mkdir.c
   * contrib/hbnf/year.prg
   * contrib/hbnf/caplock.c
   * contrib/hbnf/rmdir.c
   * contrib/hbnf/calendar.prg
   * contrib/hbnf/e2d.prg
   * contrib/hbnf/elapsed.prg
   * contrib/hbnf/sysmem.prg
   * contrib/hbnf/bitclr.prg
   * contrib/hbnf/eltime.prg
   * contrib/hbnf/aading.prg
   * contrib/hbnf/dfile.prg
   * contrib/hbnf/elapmil.prg
   * contrib/hbnf/setlastk.c
   * contrib/hbnf/pending.prg
   * contrib/hbnf/clrsel.prg
   * contrib/rddads/doc/en/adsfuncs.txt
   * contrib/rddads/doc/en/readme.txt
   * contrib/hbclip/hbclip.ch
   * contrib/hbclip/readme.txt
   * contrib/hbmisc/doc/en/ht_dbf.txt
   * utils/hbdoc/rtf.prg
   * utils/hbdoc/fclass1.prg
   * utils/hbdoc/genos2.prg
   * utils/hbdoc/genng.prg
   * utils/hbdoc/genasc.prg
   * utils/hbdoc/genchm.prg
   * utils/hbdoc/os2.prg
   * utils/hbdoc/ng.prg
   * utils/hbdoc/genhpc.prg
   * utils/hbdoc/html.prg
   * utils/hbdoc/ffile1.prg
   * utils/hbdoc/ft_funcs.prg
   * utils/hbdoc/hbdoc.prg
   * utils/hbdoc/troff.prg
   * utils/hbdoc/genhtm.prg
   * utils/hbdoc/genpdf1.prg
   * utils/hbdoc/gentrf.prg
   * utils/hbdoc/genrtf.prg
   * utils/hbmake/fclass1.prg
   * utils/hbmake/prb_stak.prg
   * utils/hbmake/ffile1.prg
   * utils/hbmake/ft_funcs.prg
   * utils/hbmake/pickfile.prg
   * utils/hbmake/hbmutils.prg
     * More cleanups, formatting (filename casing, CA-Cl*pper, etc).

2008-08-19 11:53 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * config/w32/install.cf
   * doc/hbmake.txt
   * doc/whatsnew.txt
   * doc/man/hbdoc.1
   * doc/en/tlabel.txt
   * doc/en/set.txt
   * doc/en/readme.txt
   * doc/es/tlabel.txt
   * doc/es/rdd.txt
   * doc/es/hbpplib.txt
   * doc/es/treport.txt
   * doc/es/dirstruc.txt
   * doc/es/dir.txt
   * doc/es/file.txt
   * doc/es/readme.txt
   * source/rtl/setkey.c
   * source/rtl/tclass.prg
   * source/compiler/cmdcheck.c
   * contrib/hbmysql/utils/dbf2mysq.prg
   * contrib/hbw32ddr/readme.txt
   * contrib/hbodbc/odbc.txt
   * contrib/hbodbc/readme.txt
   * contrib/hbwhat32/_wincdlg.c
   * contrib/hbtpathy/ChangeLog
   * contrib/hbsqlit2/tests/hbsqlite.prg
   * contrib/hbapollo/ChangeLog
   * contrib/hbnf/byteneg.prg
   * contrib/hbnf/savearr.prg
   * contrib/hbnf/fttext.c
   * contrib/hbnf/restsets.prg
   * contrib/hbnf/byt2bit.prg
   * contrib/hbnf/byt2hex.prg
   * contrib/hbnf/ftint86.ch
   * contrib/hbnf/byteand.prg
   * contrib/hbnf/bytexor.prg
   * contrib/hbnf/byteor.prg
   * contrib/hbnf/origin.c
   * contrib/hbnf/bitset.prg
   * contrib/hbnf/popadder.prg
   * contrib/hbnf/menutonf.prg
   * contrib/hbnf/ftattr.c
   * contrib/hbnf/isbit.prg
   * contrib/hbnf/putkey.c
   * contrib/hbnf/getenvrn.c
   * contrib/hbnf/bytenot.prg
   * contrib/hbnf/savesets.prg
   * contrib/hbnf/tbwhile.prg
   * contrib/hbnf/ftmenuto.ch
   * contrib/hbnf/bitclr.prg
   * contrib/hbnf/readme.txt
   * contrib/rddads/doc/en/adsfuncs.txt
   * contrib/rddads/doc/en/readme.txt
   * contrib/rddads/readme.txt
   * contrib/hbgd/ChangeLog
   * contrib/hbgd/readme.txt
   * contrib/hbmisc/hb_f.c
   * contrib/hbtip/utils.c
   * contrib/hbbtree/doc/hb_btree.txt
   * contrib/examples/guestbk/guestbk.txt
   * contrib/examples/hscript/readme.txt
   * utils/hbdoc/genos2.prg
   * utils/hbdoc/genng.prg
   * utils/hbdoc/genasc.prg
   * utils/hbdoc/genchm.prg
   * utils/hbdoc/genhpc.prg
   * utils/hbdoc/html.prg
   * utils/hbdoc/ft_funcs.prg
   * utils/hbdoc/hbdoc.prg
   * utils/hbdoc/genpdf1.prg
   * utils/hbdoc/gentrf.prg
   * utils/hbdoc/genrtf.prg
   * utils/hbmake/checks.prg
   * utils/hbmake/ft_funcs.prg
   * utils/hbmake/radios.prg
   * utils/hbmake/hbmake.prg
     ! Some more filename casing related cleanups.

2008-08-17 17:30 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * include/hbstack.h
   * include/hbsetup.h
   * include/hbapi.h
   * source/rtl/filesys.c
   * contrib/gtwvg/tests/demowvg.prg
   * contrib/hbct/tests/ctwtest.prg
   * contrib/hbgd/ChangeLog
   * contrib/hbodbc/sql.ch
   * contrib/rddads/ads.ch
   * contrib/rddads/ads1.c
     ! Some more filename casing related cleanups.

2008-08-17 17:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/examples/guestbk/guestbk.ini
   * contrib/examples/guestbk/testcgi.prg
   * contrib/examples/hscript/hscript.prg
   * contrib/examples/pp/hbppdef.h
   * contrib/examples/pp/hbpptbl.c
   * contrib/gtwvg/tests/demowvg.prg
   * contrib/gtwvg/wvgclass.prg
   * contrib/hbapollo/tests/apollo.prg
   * contrib/hbgd/ChangeLog
   * contrib/hbgt/doc/gendoc.bat
   * contrib/hbmisc/doc/gendoc.bat
   * contrib/hbvpdf/hbvpdf.prg
   * contrib/hbvpdf/hbvpdft.prg
   * contrib/hbwhat32/_winclpb.c
   * contrib/hbwhat32/_windate.c
   * contrib/hbwhat32/_windc.c
   * contrib/hbwhat32/_windir.c
   * contrib/hbwhat32/_windraw.c
   * contrib/hbwhat32/_wingdi.c
   * contrib/hbwhat32/_winmisc.c
   * contrib/hbwhat32/_winpen.c
   * contrib/hbwhat32/_winprn.c
   * contrib/hbwhat32/_winrect.c
   * contrib/hbwhat32/_winrgn.c
   * contrib/hbwhat32/_winsock.c
   * contrib/hbwhat32/_wintbar.c
   * contrib/hbwhat32/import.ch
   * contrib/hbwhat32/sqltypes.ch
   * contrib/hbwhat32/windebug.prg
   * contrib/hbwhat32/winerror.prg
   * contrib/hbwhat32/winini.prg
   * contrib/hbwhat32/winrbar.prg
   * contrib/hbwhat32/winstruc.ch
   * contrib/hbwhat32/wintbar.prg
   * contrib/hbziparch/hbziparc.c
   * contrib/rddads/doc/gendoc.bat
   * doc/cmdline.txt
   * doc/dirstruc.txt
   * doc/en/cmdline.txt
   * doc/en/dbstrux.txt
   * doc/en/dir.txt
   * doc/en/file.txt
   * doc/en/rddord.txt
   * doc/es/dbstrux.txt
   * doc/es/file.txt
   * doc/es/hbpplib.txt
   * doc/howtomak.txt
   * doc/hrb_faq.txt
   * doc/windll.txt
   * include/dbinfo.ch
   * source/debug/dbghelp.prg
   * source/vm/classes.c
   * source/vm/hvm.c
   * tests/keywords.ch
   * tests/output.prg
   * tests/statics1.prg
   * tests/statics2.prg
   * tests/test_all.prg
   * tests/testcgi.prg
   * tests/testpre.prg
   * tests/testrdd2.prg
   * utils/hbmake/hbmake.prg
   * utils/hbmake/hbmutils.prg
     ! Some filename casing related fixes, cleanups.
     * Some non-ASCII drawing chars in comments changed to ASCII ones.

2008-08-17 09:48 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * include/hbapirdd.h
   * include/hbsetup.h
     + Added the most commonly used old #defines for compatibility:
       - HARBOUR_MAX_RDD_DRIVERNAME_LENGTH
       - HARBOUR_MAX_RDD_ALIAS_LENGTH
       - OS_UNIX_COMPATIBLE
       - OS_PATH_DELIMITER
       Please try not to use these anymore, as they will be removed 
       in version 1.1.

2008-08-17 08:59 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * doc/dirstruc.txt
     * Updated to reflect current state. [Chen Kedem]

   * contrib/examples/pp/hbppcore.c
   * contrib/examples/pp/pp.c
   * contrib/hbct/disk.c
   * contrib/hbct/files.c
   * contrib/hbnf/getenvrn.c
   * contrib/hbw32/tprinter.c
   * contrib/hbziparch/hbxdirec.c
   * contrib/hbziparch/hbziparc.c
   * contrib/rddads/ads1.c
   * contrib/rddads/adsfunc.c
   * doc/en/terminal.txt
   * include/hb_io.h
   * include/hbapifs.h
   * include/hbapirdd.h
   * include/hbdefs.h
   * include/hbsetup.h
   * include/hbwince.h
   * source/common/hbfsapi.c
   * source/compiler/gencobj.c
   * source/compiler/hbcomp.c
   * source/compiler/hbusage.c
   * source/debug/dbgentry.c
   * source/main/harbour.c
   * source/pp/hbpp.c
   * source/pp/ppcore.c
   * source/rdd/dbcmd.c
   * source/rdd/dbf1.c
   * source/rdd/delim1.c
   * source/rdd/sdf1.c
   * source/rdd/usrrdd/usrrdd.c
   * source/rdd/wacore.c
   * source/rdd/wafunc.c
   * source/rdd/workarea.c
   * source/rtl/console.c
   * source/rtl/copyfile.c
   * source/rtl/defpath.c
   * source/rtl/direct.c
   * source/rtl/disksphb.c
   * source/rtl/file.c
   * source/rtl/filesys.c
   * source/rtl/fssize.c
   * source/rtl/fstemp.c
   * source/rtl/gtos2/gtos2.c
   * source/rtl/gtpca/gtpca.c
   * source/rtl/gtstd/gtstd.c
   * source/rtl/gttrm/gttrm.c
   * source/rtl/hbffind.c
   * source/rtl/hbinet.c
   * source/rtl/memofile.c
   * source/rtl/philes.c
   * source/rtl/seconds.c
   * source/rtl/set.c
   * source/vm/hvm.c
   * source/vm/main.c
     * Changed some macros to be in the HB_ namespace, to be 
       possibly shorter, more unified and clearer.
       OS_UNIX_COMPATIBLE                -> HB_OS_UNIX_COMPATIBLE
       OS_PATH_LIST_SEPARATOR            -> HB_OS_PATH_LIST_SEP_CHR
       OS_PATH_DELIMITER                 -> HB_OS_PATH_DELIM_CHR
       OS_PATH_DELIMITER_STRING          -> HB_OS_PATH_DELIM_STR
       OS_PATH_DELIMITER_LIST            -> HB_OS_PATH_DELIM_LIST
       OS_FILE_MASK                      -> HB_OS_ALLFILE_MASK
       OS_DRIVE_DELIMITER                -> HB_OS_DRIVE_DELIM_CHR
       OS_HAS_DRIVE_LETTER               -> HB_OS_HAS_DRIVE_LETTER
       OS_OPT_DELIMITER_LIST             -> HB_OS_OPT_DELIM_LIST
       OS_EOL_LEN                        -> HB_OS_EOL_LEN
       HARBOUR_GCC_OS2                   -> HB_OS_OS2_GCC
       HARBOUR_START_PROCEDURE           -> HB_START_PROCEDURE
       HARBOUR_MAIN_STD                  -> HB_MAIN_STD
       HARBOUR_MAIN_WIN                  -> HB_MAIN_WIN
       HARBOUR_MAX_RDD_DRIVERNAME_LENGTH -> HB_RDD_MAX_DRIVERNAME_LEN
       HARBOUR_MAX_RDD_ALIAS_LENGTH      -> HB_RDD_MAX_ALIAS_LEN
       HARBOUR_MAX_RDD_AREA_NUM          -> HB_RDD_MAX_AREA_NUM
     ; INCOMPATIBLE change, please update your sources, a simple 
       case-sensitive search and replace on .c/.cpp/.h/.hpp files 
       will be enough for most sources.

2008-08-16 16:16 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * make_b32.mak
   * make_gcc.mak
   * make_vc.mak
   * make_vcce.mak
   * include/hbdefs.h
   * source/vm/mainwin.c
   * source/vm/hvm.c
   * source/hbpcre/_hbconf.h
   * source/hbzlib/ChangeLog
   * source/hbzlib/zconf.h
   * utils/hbmake/hbmake.prg
     * __EXPORT__ -> HB_DYNLIB

2008-08-16 16:16 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * config/os2/gcc.cf
     % Cleaned include path for OS/2/GCC.
       David, please test it if it still builds successfully.

   * make_b32.mak
   * make_gcc.mak
   * make_vc.mak
   * make_vcce.mak
   * utils/hbmake/hbmake.prg
     % Removed using -D__EXPORT__ from any Harbour command lines, 
       as this switch has no effect on the .prg level.

2008-08-16 13:19 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * doc/linux1st.txt
     + Added some quick openSUSE package requirement information.

   * config/rules.cf
     ! Fixed .prg rule to add PRG_USR after the built-in rules, 
       to allow overriding them. This way it's also in sync with 
       non-GNU make files.

2008-08-16 03:10 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * make_rpm.sh
   * harbour.spec
     ! Added hbsqlit3, hbmsql to the contrib list.
     ! Added hbhpdf (libharu) detection and build.
     ; Untested

2008-08-16 02:19 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbmzip/hbmzip.c
     ! Fixed potential GPF in executable type detection.
       Fixes GCC 4.3.1 warnings in openSUSE 11.

   * dos/whatsnew.txt
     ! Minor typos.

   * tests/debugtst.prg
   * tests/funcarr.prg
   * tests/inherit.prg
   * tests/objarr.prg
   * tests/objasign.prg
   * doc/en/hvm.txt
   * doc/es/hvm.txt
   * include/hbextern.ch
   * source/vm/debug.c
   * source/vm/hvm.c
   * source/debug/dbgtobj.prg
   * source/debug/debugger.prg
   * source/rtl/altd.prg
     * Harbour level HB_DBG_*() functions renamed to __DBG*() to 
       reflect their internal nature.
     - Removed old __VM*() synonyms to Harbour level __DBG*() functions.
       INCOMPATIBLE.
     ! Fixed a few minor doc bugs along the way.

2008-08-14 18:15 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * ChangeLog
     + Added entry for yesterday's syncing/tagging.

   * make_deb.sh
     ! Removed hbsqlit2 from contrib list.
     + Added libharu detection.
     + Added FreeImage detection (commented).
     * Contrib list more or less ordered by alphabet.
     ; [ QUESTION: Do we need to keep this logic duplicated here, 
       if we now have the detection logic and contrib list 
       embedded into the make system anyway? ]

   * doc/linux1st.txt
     * Synced with make_deb.sh.

2008-08-14 00:08 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/hb-func.sh
    ! updated SunOS and HPUX library list
    ! allow to set startup .prg function in DJGPP builds

  * harbour/include/hbdefs.h
    ! defined HARBOUR_START_PROCEDURE procedure for DMC
      it fixes problem with executing final applications

  * harbour/config/w32/dm.cf
    ! disabled -o+time - with this switch wrong code is generated
      what can be seen in HBRUN
--
Brgds,
Viktor

From niki at synel.co.il  Sun Sep  7 02:45:15 2008
From: niki at synel.co.il (Chen Kedem)
Date: Sun Sep  7 02:45:43 2008
Subject: [Harbour] HBTest - fail in TAEVSM
Message-ID: <1A07FEDC778C3E4AA417F089511F859C03268A69F1@Mail-yoq.SYNEL-COMPANY.LTD>

With BCB5.0, WinNT and ChangeLog 2008-09-07 01:44 UTC+0200 Viktor Szakats (r9329)

---tt44.prg---
PROC Test
   ? "N10N 9N 8N 7N 6N 5N 4N 3N 2N 1         0"  // Clipper
   ? "N10N 9N 8N 7N 6         5"                 // Harbour
   ? TAEVSM()
RETURN

STATIC FUNCTION TAEVSM()
   LOCAL cString := ""
   LOCAL aArray := Array( 10 )
   AFill( aArray, 0 )
   AEval( aArray, {| x | cString += ValType( x ) + Str( Len( aArray ), 2 ), ASize( aArray, Len( aArray ) - 1 ) } )
   RETURN cString + Str( Len( aArray ) )
--------------

bld_b32 tt44 /w/a/n
tt44


  Chen.
From niki at synel.co.il  Sun Sep  7 03:16:41 2008
From: niki at synel.co.il (Chen Kedem)
Date: Sun Sep  7 03:17:07 2008
Subject: [Harbour] SF bugtracker#2096950: SORT descend is wrong
Message-ID: <1A07FEDC778C3E4AA417F089511F859C03268A69F2@Mail-yoq.SYNEL-COMPANY.LTD>

http://sourceforge.net/tracker/index.php?func=detail&aid=2096950&group_id=681&atid=100681

Descending sort is wrong for negative numerics.

---tt45.prg---
proc Test()
dbcreate( "test2", { { "ITEM", "N", 10, 2 } } )
use test2
dbappend()
test2->ITEM := 5.00
dbappend()
test2->ITEM := -5.12
dbappend()
test2->ITEM := 6.00
dbappend()
test2->ITEM := 7.00
dbappend()
test2->ITEM := -5.00
? "test2:"
dbeval( {|| qout( test2->ITEM ) } )
sort to test3 on item /D
use test3
? "test3:"
dbeval( {|| qout( test3->ITEM ) } )
use
return
--------------

bld_b32 tt45 /w/a/n
tt45

With clipper:
test2:      5.00     -5.12      6.00      7.00     -5.00
test3:      7.00      6.00      5.00     -5.00     -5.12

With Harbour (ChangeLog 2008-09-07 01:44 UTC+0200 Viktor Szakats r9329):
test2:      5.00     -5.12      6.00      7.00     -5.00
test3:     -5.12     -5.00      7.00      6.00      5.00


  Chen.
From lorenzo.fiorini at gmail.com  Sun Sep  7 05:02:35 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Sep  7 05:02:41 2008
Subject: [Harbour] Proposal to extract contrib/hbxml,
	contrib/hblog from contrib/xhb
Message-ID: <9257026e0809070202u61e75b81u56c59a84f552eb61@mail.gmail.com>

hbxml is a lib to manage xml files and hglog is a lib to manage
multi-channel logging.

IMHO they have nothing to do with xhb compatibility.
They are normal libraries that offer really useful services.
I found a non-sense to have to link contrib/xhb simply to read an xml.
They are also well documented.

Comments?

best regards,
Lorenzo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080907/1b70dfc4/attachment.html
From harbour.01 at syenar.hu  Sun Sep  7 07:12:25 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep  7 07:12:39 2008
Subject: [Harbour] Proposal to extract contrib/hbxml,
	contrib/hblog from contrib/xhb
In-Reply-To: <9257026e0809070202u61e75b81u56c59a84f552eb61@mail.gmail.com>
References: <9257026e0809070202u61e75b81u56c59a84f552eb61@mail.gmail.com>
Message-ID: <A1B67287-6E1B-40CA-952C-2CB7492ED062@syenar.hu>

>
Hi Lorenzo,

> hbxml is a lib to manage xml files and hglog is a lib to manage  
> multi-channel logging.
>
> IMHO they have nothing to do with xhb compatibility.
> They are normal libraries that offer really useful services.
> I found a non-sense to have to link contrib/xhb simply to read an xml.
> They are also well documented.

Are there any technical disadvantages to have these
inside xhb.lib? If yes, I think we should fix those (*),
rather than the split (for multiple reasons **).

*: A not very beautiful, bu maybe useful fix could be
to have some build switches to leave out specific parts
of xhb lib.

**: 'hblog' is doing too much for a generic lib IMO,
I'd rather reserve 'hbxml' for a more industry-level
XML implementation, like libxml2. It also creates
more maintenance work to maintain 3 libs instead of 1,
and may create problems for those looking for simple
xhb code compatibility.

See:
http://en.wikipedia.org/wiki/Libxml2

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Sun Sep  7 12:14:22 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Sep  7 12:14:28 2008
Subject: [Harbour] Proposal to extract contrib/hbxml,
	contrib/hblog from contrib/xhb
In-Reply-To: <A1B67287-6E1B-40CA-952C-2CB7492ED062@syenar.hu>
References: <9257026e0809070202u61e75b81u56c59a84f552eb61@mail.gmail.com>
	<A1B67287-6E1B-40CA-952C-2CB7492ED062@syenar.hu>
Message-ID: <9257026e0809070914l1a2db19bw693212cc75fab353@mail.gmail.com>

On Sun, Sep 7, 2008 at 1:12 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Are there any technical disadvantages to have these
> inside xhb.lib? If yes, I think we should fix those (*),
> rather than the split (for multiple reasons **).
> *: A not very beautiful, bu maybe useful fix could be
> to have some build switches to leave out specific parts
> of xhb lib.

Because xhb adds many other things that have nothing to do with XML and LOG.

> **: 'hblog' is doing too much for a generic lib IMO,
> I'd rather reserve 'hbxml' for a more industry-level
> XML implementation, like libxml2. It also creates
> more maintenance work to maintain 3 libs instead of 1,
> and may create problems for those looking for simple
> xhb code compatibility.

XML and LOG are considered "obvious" in php, Java, python and VB and
many other languages. Do they have it for "xhb code compatibility"?

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sun Sep  7 15:46:29 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep  7 15:47:23 2008
Subject: [Harbour] Proposal to extract contrib/hbxml,
	contrib/hblog from contrib/xhb
In-Reply-To: <9257026e0809070914l1a2db19bw693212cc75fab353@mail.gmail.com>
References: <9257026e0809070202u61e75b81u56c59a84f552eb61@mail.gmail.com>
	<A1B67287-6E1B-40CA-952C-2CB7492ED062@syenar.hu>
	<9257026e0809070914l1a2db19bw693212cc75fab353@mail.gmail.com>
Message-ID: <8E7F79AB-B047-4C1E-9FFE-59945BE2AE3D@syenar.hu>

>>
Hi Lorenzo,

>> Are there any technical disadvantages to have these
>> inside xhb.lib? If yes, I think we should fix those (*),
>> rather than the split (for multiple reasons **).
>> *: A not very beautiful, bu maybe useful fix could be
>> to have some build switches to leave out specific parts
>> of xhb lib.
>
> Because xhb adds many other things that have nothing to do with XML  
> and LOG.

Why would this be a technical problem? Other features
are there, but you're not using them, that's all.

>> **: 'hblog' is doing too much for a generic lib IMO,
>> I'd rather reserve 'hbxml' for a more industry-level
>> XML implementation, like libxml2. It also creates
>> more maintenance work to maintain 3 libs instead of 1,
>> and may create problems for those looking for simple
>> xhb code compatibility.
>
> XML and LOG are considered "obvious" in php, Java, python and VB and
> many other languages. Do they have it for "xhb code compatibility"?

I don't know why they are having it, and what implementations
do they exactly have, but we're having _these_ implementation
for xhb compatibility, yes.

These things can be developed several (superior) ways, and these
actual ones are developed the xhb way, being one possible
implementation. For me for example they are not obvious at all,
since for example I find using classes and the heaviest subsystems
and even commands for something as "basic", speed critical and
possibly low level as logging doesn't seem like a best solution
to me. As for XML there are several other implementations, some
of these are accepted and trusted industry quasi-standards
(like libxml2), the xhb one is a specially crafted subset of
XML handling. IOW, these xhb implementations fall behind the Java,
Python, VB, Cocoa ones IMO. They may be useful, and they may even
be good for certain purposes, but I still feel they don't deserve
they own libs, not to mention that they _are_ in fact xhb compatibility
functions.

In any case, since these parts of xhb lib are pretty much
in stable/mature state, as they are not updated anymore in
Harbour (and probably not in xhb either), so you can just
as easily include them in your own local libs / app as
a simple copy. If it's a problem to link in xhb for
whatever reason, that is. One such reason can be to avoid that
your developers accidentally start to use some other xhb
lib functions, but that's not really something we should solve
in Harbour SVN I think.

As a good step though I think it would be really nice to see
a libxml2 interface lib in contrib, or maybe even in core.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep  7 19:34:17 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep  7 19:34:20 2008
Subject: [Harbour] 2008-09-08 01:33 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91142$Blat.v2.6.2$3edbc9f8$1290e784709e@127.0.0.1>

2008-09-08 01:33 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbcurl/hbcurl.c
   * contrib/hbcurl/hbcurl.ch
     + Added support for 7.19.0 features.

   * doc/whatsnew.txt
     + Added recent changes.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep  7 20:18:36 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep  7 20:18:48 2008
Subject: [Harbour] 2008-09-08 02:08 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91148$Blat.v2.6.2$6f704fde$14f81cd031b2@127.0.0.1>

2008-09-08 02:08 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/rtl/transfrm.c
   * source/rtl/set.c
   * contrib/hbct/ctwin.c
   * contrib/hbct/token1.c
   * contrib/hbct/numat.c
     ! Fixed more MSVS 2008 -W4 warnings.

   * source/rtl/set.c
     * Formatting.
--
Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Mon Sep  8 02:12:40 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep  8 02:12:46 2008
Subject: [Harbour] Proposal to extract contrib/hbxml,
	contrib/hblog from contrib/xhb
In-Reply-To: <8E7F79AB-B047-4C1E-9FFE-59945BE2AE3D@syenar.hu>
References: <9257026e0809070202u61e75b81u56c59a84f552eb61@mail.gmail.com>
	<A1B67287-6E1B-40CA-952C-2CB7492ED062@syenar.hu>
	<9257026e0809070914l1a2db19bw693212cc75fab353@mail.gmail.com>
	<8E7F79AB-B047-4C1E-9FFE-59945BE2AE3D@syenar.hu>
Message-ID: <9257026e0809072312w7b1e563bt8ef2e14475fa8e2b@mail.gmail.com>

On Sun, Sep 7, 2008 at 9:46 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> I don't know why they are having it, and what implementations
> do they exactly have, but we're having _these_ implementation
> for xhb compatibility, yes.

I'm sorry but you didn't convince me.

I'll keep it local.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Mon Sep  8 03:44:17 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep  8 03:44:26 2008
Subject: [Harbour] [1.0] 2008-09-08 02:08 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c91186$Blat.v2.6.2$b28cb328$b3cc14485b6@127.0.0.1>

; Merging changes to 1.0 branch from trunk r9331.

2008-09-08 02:08 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/rtl/transfrm.c
   * source/rtl/set.c
   * contrib/hbct/ctwin.c
   * contrib/hbct/token1.c
   * contrib/hbct/numat.c
     ! Fixed more MSVS 2008 -W4 warnings.

   * source/rtl/set.c
     * Formatting.

2008-09-08 01:33 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbcurl/hbcurl.c
   * contrib/hbcurl/hbcurl.ch
     + Added support for 7.19.0 features.

   * doc/whatsnew.txt
     + Added recent changes.

2008-09-07 01:44 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbcurl/make_vc.bat
     ! Fixed external .lib handling for MSVC.

   * contrib/rddads/make_vc.bat
     ! Fixed external .lib handling for MSVC 
       (for older ACE versions).

   * contrib/hbhpdf/make_b32.bat
   * contrib/hbhpdf/make_vc.bat
     + Added .lib/.dll support for libharu 2.1.0
       binary distribution version.

2008-09-06 12:38 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/hbpcre/pcre.h
   * source/hbpcre/config.h
     + Upgraded PCRE lib to 7.8 release version.

   * contrib/hbct/token2.c
   * contrib/examples/pp/hbppcore.c
     * Minor formatting.

2008-09-06 11:07 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * make_vc.bat
   * contrib/mtpl_vc.bat
     + Added -nologo to nmake.exe command line.

   * source/vm/memvars.c
   * source/rtl/scroll.c
   * source/rtl/diskspac.c
   * source/rtl/console.c
   * source/rtl/philes.c
   * source/rtl/oldclear.c
   * source/rtl/oldbox.c
   * source/rtl/cdpapi.c
   * source/rtl/setpos.c
   * source/rtl/errorapi.c
   * source/rtl/setcolor.c
   * source/rtl/philes53.c
   * source/rtl/setkey.c
   * source/rtl/disksphb.c
   * source/rtl/shadow.c
   * source/rtl/hbhex.c
   * source/rtl/setcurs.c
   * source/rtl/dates.c
   * source/rtl/gtwvt/gtwvt.c
   * source/rtl/hbinet.c
   * source/rtl/hbffind.c
   * source/rtl/filesys.c
   * contrib/hbct/screen2.c
   * contrib/hbct/screen1.c
   * contrib/hbnf/fttext.c
     ! Fixed more MSVS 2008 -W4 warnings (about 100 of them).

   * contrib/hbnf/fttext.c
     ! Fixed C++ compile error after recently 
       switching to Harbour API from Clipper one.

2008-09-05 20:45 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/rddads/adsfunc.c
     ! Fixed some more MSVS 2008 -W4 warnings.

2008-09-05 20:34 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/debug/dbgentry.c
   * source/rtl/do.c
   * source/rtl/xhelp.c
   * contrib/xhb/freadlin.c
   * contrib/hbw32/w32_prn.c
   * contrib/rddads/ads1.c
   * contrib/hbgd/gdwrp.c
   * contrib/hbtip/encmthd.c
   * utils/hbdoc/hbdfrdln.c
   * utils/hbmake/hbmfrdln.c
     ! Fixed some more MSVS 2008 -W4 warnings.

2008-09-05 18:12 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbapollo/apollo.c
   * contrib/hbclipsm/gauge.c
   * contrib/hbct/atadjust.c
   * contrib/hbct/atnum.c
   * contrib/hbct/atrepl.c
   * contrib/hbct/ctstr.c
   * contrib/hbct/ctwfunc.c
   * contrib/hbct/dattime2.c
   * contrib/hbct/dattime3.c
   * contrib/hbct/files.c
   * contrib/hbct/pack.c
   * contrib/hbct/print.c
   * contrib/hbct/setrc.c
   * contrib/hbfbird/firebird.c
   * contrib/hbhpdf/harupdf.c
   * contrib/hbmisc/hb_f.c
   * contrib/hbmzip/hbmzip.c
   * contrib/hbnf/descendn.c
   * contrib/hbnf/dispc.c
   * contrib/hbnf/ftattr.c
   * contrib/hbnf/ftshadow.c
   * contrib/hbnf/fttext.c
   * contrib/hbodbc/odbc.c
   * contrib/hbole/ole2.c
   * contrib/hbw32/dllcall.c
   * contrib/hbw32/tprinter.c
   * contrib/rddads/ads1.c
   * contrib/xhb/cstructc.c
   * contrib/xhb/hbxml.c
   * contrib/xhb/xhbmsgs.c
   * utils/hbmake/hbmgauge.c
     ! Fixed some MSVS 2008 -W4 warnings.
     ; There are quite some more.

   * contrib/hbhpdf/harupdf.c
     ! HPDF_ADDPAGELABEL() accepting first parameter wrongly.

   * contrib/hbfbird/firebird.c
     ! FBQUERY() potential GPF when using value from freed memory.

   * doc/whatsnew.txt
     * Updated for latest fixes.

2008-09-05 17:41 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
  * contrib/hbbmcdx/bmdbfcdx.c
    ! fixed dirty index reading.

2008-09-05 17:11 UTC+0200 Lorenzo Fiorini (lorenzo.fiorini/at/gmail.com)
  * contrib/hbtip/test/tiptest.prg
  * contrib/hbtip/popcln.prg
    * fixed typos: "retreived vs retrieved"

2008-09-05 16:54 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
  * contrib/hbbmcdx/bmdbfcdx.c
    ! fixed to not respect bitmap filters when structural order
      is scanned, f.e. in OrdListAdd() with active bitmap filter.

  * source/rtl/hbinet.c
    ! fixed return value of HB_INETGETSNDBUFSIZE

2008-09-05 15:58 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/dbffpt/dbffpt1.c
    ! fixed GPF introduced by today MSVC warning cleanup

2008-09-05 12:32 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * doc/whatsnew.txt
     * Reviewed, some clarifications.

2008-09-05 12:01 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/common/hbver.c
     ! Version detection fixed for __DMC__

   * contrib/mtpl_gcc.mak
     % One unnecessary C -I option deleted.

   - contrib/hbsqlit2
   + contrib/examples/hbsqlit2
   * doc/whatsnew.txt
     * Moved hbsqlit2 to examples.

   * contrib/examples/hbsqlit2/Makefile
   * contrib/examples/hbsqlit2/make_b32.bat
   * contrib/examples/hbsqlit2/make_gcc.sh
   * contrib/examples/hbsqlit2/make_vc.bat
   * contrib/examples/hbsqlit2/common.mak
   * contrib/examples/hbsqlit2/tests/bld_b32.bat
   * contrib/examples/hbsqlit2/tests/bld_vc.bat
     * Modified make files to work from the new location.
     * Location of sqlite2 headers can be specified by HB_INC_SQLITE2.
     ; Notice that sqlite2 lib itself should now be build separately.

2008-09-05 11:23 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/common/hbver.c
     ! Version detection fixed for __DMC__.

2008-09-05 11:12 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/mtpl_vc.mak
     - Removed recently (and mistakenly) added unnecessary option.

   * source/macro/macro.y
     - Removed old comment, other part synced with harbour.y.

   * source/rdd/dbffpt/dbffpt1.c
     ! Fixed MSVC -W4 potentially unused var warnings.

   * contrib/Makefile
   * contrib/make_b32_all.bat
   * contrib/make_gcc_all.sh
   * contrib/make_vc_all.bat
     - Removed (commented) references to hbsqlit2.
       hbsqlit2 is broken due to foreign code problems.
       It will be converted to use separately compiled 
       sqlite2 library. Pls use hbsqlit3 as a replacement.

   - contrib/hbsqlit2/vdbeaux.c
   - contrib/hbsqlit2/build.c
   - contrib/hbsqlit2/vdbeInt.h
   - contrib/hbsqlit2/opcodes.h
   - contrib/hbsqlit2/btree.c
   - contrib/hbsqlit2/delete.c
   - contrib/hbsqlit2/printf.c
   - contrib/hbsqlit2/trigger.c
   - contrib/hbsqlit2/attach.c
   - contrib/hbsqlit2/btree.h
   - contrib/hbsqlit2/sqlite.h
   - contrib/hbsqlit2/pragma.c
   - contrib/hbsqlit2/config.h
   - contrib/hbsqlit2/util.c
   - contrib/hbsqlit2/select.c
   - contrib/hbsqlit2/os.c
   - contrib/hbsqlit2/hash.c
   - contrib/hbsqlit2/os.h
   - contrib/hbsqlit2/hash.h
   - contrib/hbsqlit2/tokenize.c
   - contrib/hbsqlit2/pager.c
   - contrib/hbsqlit2/vacuum.c
   - contrib/hbsqlit2/auth.c
   - contrib/hbsqlit2/pager.h
   - contrib/hbsqlit2/insert.c
   - contrib/hbsqlit2/copy.c
   - contrib/hbsqlit2/parse.c
   - contrib/hbsqlit2/where.c
   - contrib/hbsqlit2/date.c
   - contrib/hbsqlit2/expr.c
   - contrib/hbsqlit2/parse.h
   - contrib/hbsqlit2/LICENSE.txt
   - contrib/hbsqlit2/random.c
   - contrib/hbsqlit2/vdbe.c
   - contrib/hbsqlit2/sqliteInt.h
   - contrib/hbsqlit2/update.c
   - contrib/hbsqlit2/main.c
   - contrib/hbsqlit2/btree_rb.c
   - contrib/hbsqlit2/vdbe.h
   - contrib/hbsqlit2/table.c
   - contrib/hbsqlit2/func.c
   - contrib/hbsqlit2/opcodes.c
   - contrib/hbsqlit2/encode.c
     - Removed foreign code.

2008-09-05 04:01 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * doc/whatsnew.txt
     + Added 1.0.1 changes. Please review.
--
Brgds,
Viktor

From mbelgrano at deltain.it  Mon Sep  8 05:16:45 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep  8 05:18:39 2008
Subject: [Harbour] sequence of library who crash
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF40@SRV02.deltain.net>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 3559 bytes
Desc: image001.gif
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080908/0e6777c4/attachment-0001.gif
From mbelgrano at deltain.it  Mon Sep  8 05:22:24 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep  8 05:22:31 2008
Subject: [Harbour] sequence of library who crash
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF40@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EF40@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF41@SRV02.deltain.net>

Sorry for html post
I add to prev post that I see only menu of debug and application crash
(File Locate View Run Point Monitor Options Windows Help)

From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Massimo Belgrano
Sent: Monday, September 08, 2008 11:17 AM
To: Harbour Project Main Developer List.
Subject: [Harbour] sequence of library who crash

Anybody have experiences about sequence of library that cause a crash

LIBFILES =? hblang.lib hbvm.lib hbrtl.lib hbrdd.lib hbmacro.lib hbpp.lib rddntx.lib rddcdx.lib rddfpt.lib hbcommon.lib gtwvt.lib GTWIN.LIB GTWVG.LIB GTSTD.LIB GTGUI.LIB hbcpage.lib hbpcre.lib hbhsx.lib hbsix.lib rddads.lib hbbmcdx.LIB xhb.lib HBW32.LIB ace32.lib? delta4hC.lib C2W.LIB OOHG.lib hbprinter.lib miniprint.lib licen.lib hbnf.lib hb DEBUG.LIB

If I remove "C2W.LIB OOHG.lib hbprinter.lib miniprint.lib licen.lib hbnf.lib" my sample works
The sample have only 
ALTD()

When a library ?must be put first?
Wuch special order of library are suggested?
Hbmake/bcc55/win32


From harbour.01 at syenar.hu  Mon Sep  8 05:48:09 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep  8 05:48:08 2008
Subject: [Harbour] 2008-09-08 11:44 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91198$Blat.v2.6.2$00545dc0$124837cdf3fa@127.0.0.1>

2008-09-08 11:44 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * doc/whatsnew.txt
   * doc/dirstruc.txt
     * Updated.

   * contrib/hbhpdf/tests/harupdf.prg
   - contrib/hbhpdf/tests/files/maskimage.png
   + contrib/hbhpdf/tests/files/maskimag.png
   - contrib/hbhpdf/tests/files/32_32_2color.dat
   - contrib/hbhpdf/tests/files/32_32_gray.dat
   - contrib/hbhpdf/tests/files/penguinattack.ttf
   - contrib/hbhpdf/tests/files/32_32_rgb.dat
     * One file renamed to short name.
     - Some unused files removed.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep  8 05:49:51 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep  8 05:49:50 2008
Subject: [Harbour] [1.0] 2008-09-08 11:44 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c91198$Blat.v2.6.2$3d1468fe$1760c34ead3e@127.0.0.1>

2008-09-08 11:44 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * doc/whatsnew.txt
   * doc/dirstruc.txt
     * Updated.

   * contrib/hbhpdf/tests/harupdf.prg
   - contrib/hbhpdf/tests/files/maskimage.png
   + contrib/hbhpdf/tests/files/maskimag.png
   - contrib/hbhpdf/tests/files/32_32_2color.dat
   - contrib/hbhpdf/tests/files/32_32_gray.dat
   - contrib/hbhpdf/tests/files/penguinattack.ttf
   - contrib/hbhpdf/tests/files/32_32_rgb.dat
     * One file renamed to short name.
     - Some unused files removed.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep  8 07:12:47 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep  8 07:12:57 2008
Subject: [Harbour] 2008-09-08 13:01 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c911a3$Blat.v2.6.2$d33a2a25$62ccb79507e@127.0.0.1>

2008-09-08 13:01 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/mtpl_b32.mak
   * contrib/mtpl_vc.mak
   * contrib/mtpl_gcc.mak
     * Changed the location of intermediate obj and c files from 
       /obj/<arch>/ to local [/contrib/<contribname>/]obj/<arch>/
       dir so that similar filenames across different contribs 
       would never interfere with each other anymore when using 
       non-GNU make. This was a difficult to detect problem, 
       especially when someone is trying to use custom contribs, 
       and even more so if these custom contribs happen to have 
       3rd party code with non Harbour controlled filenames. This 
       change is also an important last step to make contribs 
       fully self-containing.
     ; TODO: mtpl_gcc.mak support has to be finished by someone 
             familiar with bash.
     ; NOTE: This change shouldn't go to 1.0.1 until well tested 
             and reviewed.
     ; NOTE: As a consequence of the above, from now on a 
             'make_*.bat clean' won't anymore clean the objects/.c
             file of all contribs. If you hadn't so so far, now you'll 
             need to explicitly call 'contrib/make_*.all.bat clean' 
             to do that.

   * contrib/mtpl_gcc.mak
   * make_gcc.mak
     % HB_ARCHITECTURE hack from cyg to w32 removed, 
       as cyg is not a valid public architecture name 
       in Harbour. cyg is used in make_gcc.sh internally, and 
       it's automatically converted to w32 before using 
       make_gcc.mak, so it would seem that this is solved 
       at the right place already, and the hack is not needed.
--
Brgds,
Viktor

From dbtopas at dbtopas.lt  Mon Sep  8 08:09:53 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Sep  8 08:08:32 2008
Subject: [Harbour] Bug
Message-ID: <48C51611.70604@dbtopas.lt>

Hi,


I'm back online (after 40 days of no email, no mobile phone, few 
civilization). Thanks for great job and 1.0! :)

My co-worker passed me a bug sample:

FUNC Main()
LOCAL aI
   aI := {}
   AADD(aI, HB_Hash("S", 10))
   AADD(aI, HB_HClone(aI[1]))
   aI[1,"S"] := 1
   aI[2,"S"] -= 1
   AADD(aI, HB_HClone(aI[2]))
   aI[2, "S"] := 2
   ? "Expected result: 1 2 9"
   ? "Result:", aI[1,"S"], aI[2,"S"], aI[3,"S"]

   // Changing -= to - fixes bug
   aI := {}
   AADD(aI, HB_Hash("S", 10))
   AADD(aI, HB_HClone(aI[1]))
   aI[1,"S"] := 1
   aI[2,"S"] := aI[2,"S"] - 1   // instead of -=
   AADD(aI, HB_HClone(aI[2]))
   aI[2, "S"] := 2
   ? "Result without -=:", aI[1,"S"], aI[2,"S"], aI[3,"S"]

   // Changing HB_HClone() to manual clone fixes bug
   aI := {}
   AADD(aI, HB_Hash("S", 10))
   AADD(aI, HB_Hash())
   HB_HEval(aI[1], {|K,V| aI[2,K]:=V}) // HB_HClone()
   aI[1,"S"] := 1
   aI[2,"S"] -= 1
   AADD(aI, HB_Hash())
   HB_HEval(aI[2], {|K,V| aI[3,K]:=V}) // HB_HClone()
   aI[2, "S"] := 2
   ? "Result without HB_HClone:", aI[1,"S"], aI[2,"S"], aI[3,"S"]
RETURN NIL


Best regards,
Mindaugas
From mbelgrano at deltain.it  Mon Sep  8 09:36:10 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep  8 09:37:04 2008
Subject: [Harbour] hbmake look problem
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF47@SRV02.deltain.net>

During compiling with hbmake (bcc) a little problem regarding look with
modules of at lease 3 prg
Ilink phase display his messages inside messages of compilation phase
I notice that In xharbour also a percentage bar is show during compile


Follow Screenshoot that show turbolink inside Building object..
 
Building object module for 'objhC\ARCAPRE3.c'
using C compiler 'BCC32' as defined in 'harbour.cfg'...
Exec: BCC32  -c -DHB_DYNLIB -IC:\HARBOUR\include  -tWM -a8 -OS -O2 -5 -6
-d -LC
:\HARBOUR\lib -oobjhC\ARCAPRE3.obj objhC\ARCAPRE3.c
Deleting: "objhC\ARCAPRE3.c"
Done.
C:\XHARBOUR\BCC55\BIN\ilink32  @makefile.lnk
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Compiling 'ARCAPRE3.PRG'...
C:\clip52\LAVORI\MASSIMO\ARCA> Clemow - Copyright (c) 2008
Lines 8145, Functions/Procedures 96
Generating C source output to 'objhC\ARCAPRE3.c'... Done.

Building object module for 'objhC\ARCAPRE3.c'


Massimo Belgrano

From niki at synel.co.il  Mon Sep  8 09:51:44 2008
From: niki at synel.co.il (Chen Kedem)
Date: Mon Sep  8 09:52:12 2008
Subject: [Harbour] RE: HBTest - fail in TAEVSM
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C03268A69F1@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C03268A69F1@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <1A07FEDC778C3E4AA417F089511F859C03268A69FB@Mail-yoq.SYNEL-COMPANY.LTD>

It seems that Clipper use a cloned copy of the original array to do the loop,
and supply these orininal values to the codeblock. Bug or a feature?

---tt44.prg---
Proc Test
   ? "a10.b 9.c 8.d 7.e 6.f 5.g 4.h 3.i 2.j 1.         0 - Clipper"
   ? "a10.b 9.c 8.d 7.e 6.         5                     - Harbour"
   ? TAEVSM()
RETURN

STATIC FUNCTION TAEVSM()
   LOCAL cString := ""
   LOCAL aArray := { 'a','b','c','d','e','f','g','h','i','j' }

   AEval( aArray, {| x | cString += x + Str( Len( aArray ), 2 ) + ".", ASize( aArray, Len( aArray ) - 1 ) } )

   RETURN cString + Str( Len( aArray ) )
--------------


  Chen.
From harbour.01 at syenar.hu  Mon Sep  8 10:35:18 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep  8 10:35:35 2008
Subject: [Harbour] RE: HBTest - fail in TAEVSM
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C03268A69FB@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C03268A69F1@Mail-yoq.SYNEL-COMPANY.LTD>
	<1A07FEDC778C3E4AA417F089511F859C03268A69FB@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <4295B895-31A5-4ECD-8FEF-E59D78B5BBBE@syenar.hu>

Hi Chen,

I would guess it's intentional as this solution seems to
need some kind of additional logic to work like it does
in Clipper.

Brgds,
Viktor

On 2008.09.08., at 15:51, Chen Kedem wrote:

> It seems that Clipper use a cloned copy of the original array to do  
> the loop,
> and supply these orininal values to the codeblock. Bug or a feature?
>
> ---tt44.prg---
> Proc Test
>   ? "a10.b 9.c 8.d 7.e 6.f 5.g 4.h 3.i 2.j 1.         0 - Clipper"
>   ? "a10.b 9.c 8.d 7.e 6.         5                     - Harbour"
>   ? TAEVSM()
> RETURN
>
> STATIC FUNCTION TAEVSM()
>   LOCAL cString := ""
>   LOCAL aArray := { 'a','b','c','d','e','f','g','h','i','j' }
>
>   AEval( aArray, {| x | cString += x + Str( Len( aArray ), 2 ) +  
> ".", ASize( aArray, Len( aArray ) - 1 ) } )
>
>   RETURN cString + Str( Len( aArray ) )
> --------------
>
>
>  Chen.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From labitas at gmail.com  Mon Sep  8 10:46:16 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Mon Sep  8 10:46:22 2008
Subject: [Harbour] RE: HBTest - fail in TAEVSM
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C03268A69FB@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C03268A69F1@Mail-yoq.SYNEL-COMPANY.LTD>
	<1A07FEDC778C3E4AA417F089511F859C03268A69FB@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <2386af1b0809080746j76a58765t8c5246a7b8c1c11f@mail.gmail.com>

> It seems that Clipper use a cloned copy of the original array to do the
> loop,
> and supply these orininal values to the codeblock. Bug or a feature?
>
<cut>

Clipper uses original array, but <nCount> value calculates before loop
through array
and never recalculated. After resizing array run garbage collection (Memory(
-1 )) and see what's happening...

Saulius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080908/d1e171a3/attachment.html
From arcadia2 at sbcglobal.net  Mon Sep  8 12:07:14 2008
From: arcadia2 at sbcglobal.net (bill robertson)
Date: Mon Sep  8 12:07:21 2008
Subject: [Harbour] hbmake look problem
References: <AFB948164110ED43B5EB849E8DEEF03815EF47@SRV02.deltain.net>
Message-ID: <2FB7CFEE5A0345D09766D6119B5087A0@billws>

> ----- Original Message ----- 
> From: Massimo Belgrano
>To: Harbour Project Main Developer List.
> Sent: Monday, September 08, 2008 9:36 AM
> Subject: [Harbour] hbmake look problem
>
> During compiling with hbmake (bcc) a little problem regarding look with
> modules of at lease 3 prg Ilink phase display his messages inside messages
> of compilation phase I notice that In xharbour also a percentage bar is 
> show
>  during compile

Hi Massimo,

Yes, the visual output of hbmake is a mess. There are these

             OutStd( cComm )
             setpos(9,0)

and other stuff that messes up or overwrites the message display everywhere. 
The percentage bar is shown but may show too fast to bee seen and is 
immediately overwritten. With a fast system, this is probably a waste 
anyway.

             GaugeUpdate( aGauge, nFile / Len( s_aCFiles ) )

It also doesn't show all the contrib libs, can put dup libs in the makefile, 
etc. Some of hbmake problems are being fixed. xHarbour has these problems as 
well although their display output isn't as confusing. Currently the best 
source of info about the build is in the log files:

  hbmake.log &
  error.log

From teo at windtelsoft.com  Mon Sep  8 15:02:43 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Mon Sep  8 14:32:31 2008
Subject: [Harbour] 2008-09-08 13:59 UTC-0500 Teo Fonrouge
	(teo/at/windtelsoft/dot/com)
Message-ID: <200809081402.43476.teo@windtelsoft.com>

2008-09-08 13:59 UTC-0500 Teo Fonrouge (teo/at/windtelsoft/dot/com)
? * include/hbclass.ch
? ? ! added missing MESSAGE <MessageName> TO <oObject>
? ? ? ; this also fixes DELEGATE command


best regards

Teo
From druzus at acn.waw.pl  Mon Sep  8 15:21:23 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep  8 15:21:30 2008
Subject: [Harbour] Bug
In-Reply-To: <48C51611.70604@dbtopas.lt>
References: <48C51611.70604@dbtopas.lt>
Message-ID: <20080908192123.GA25596@34-mo7-2.acn.waw.pl>

On Mon, 08 Sep 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> I'm back online (after 40 days of no email, no mobile phone, few 
> civilization).

You are lucky man ;-)

> My co-worker passed me a bug sample:
[...]

Many thanks for an example. It's caused by stupid typo.
Look at hashes.c[653]:
      if( HB_IS_BYREF( pValue ) )
         hb_itemUnRef( pValue );
It should be:
      if( HB_IS_BYREF( pValue ) )
         pValue = hb_itemUnRef( pValue );

I'll commit fix ASAP.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Sep  8 15:33:32 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep  8 15:33:40 2008
Subject: [Harbour] RE: HBTest - fail in TAEVSM
In-Reply-To: <2386af1b0809080746j76a58765t8c5246a7b8c1c11f@mail.gmail.com>
References: <1A07FEDC778C3E4AA417F089511F859C03268A69F1@Mail-yoq.SYNEL-COMPANY.LTD>
	<1A07FEDC778C3E4AA417F089511F859C03268A69FB@Mail-yoq.SYNEL-COMPANY.LTD>
	<2386af1b0809080746j76a58765t8c5246a7b8c1c11f@mail.gmail.com>
Message-ID: <20080908193332.GB25596@34-mo7-2.acn.waw.pl>

On Mon, 08 Sep 2008, Saulius Zrelskis wrote:

Hi Saulius,

> > It seems that Clipper use a cloned copy of the original array to do the
> > loop,
> > and supply these orininal values to the codeblock. Bug or a feature?
> Clipper uses original array, but <nCount> value calculates before loop
> through array
> and never recalculated. After resizing array run garbage collection (Memory(
> -1 )) and see what's happening...

Exactly. It's a bug in Clipper. In the moment when garbage collector is
activated directly by memory(-1) or indirectly by heavy memory usage or
or VM (evaluated pcode counter or asynchronous event like interrupt)
Clipper GPFs with this code so it's not safe in Clipper to create and
execute such constructions.
In Harbour it's safe but resize operation immediately effects AEVAL()/
ASCAN() range. IMHO it's OK. We should only fix ASORT() which is not
safe and GPFs when sort block resize the array.
In xHarbour Clipper's behavior is partially emulated but not exactly
and it's even possible to create exploit for this emulation which
will cause GPF.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Sep  8 15:37:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep  8 15:37:58 2008
Subject: [Harbour] 2008-09-08 21:37 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200809081937.m88JbpI4025787@31-mo5-4.acn.waw.pl>

2008-09-08 21:37 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/hashes.c
    ! fixed typo in hash cloning code which caused that references
      was copied to cloned array. Thanks to Mindaugas for example.

best regards
Przemek
From harbour.01 at syenar.hu  Mon Sep  8 16:01:32 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep  8 16:01:52 2008
Subject: [Harbour] Bug
In-Reply-To: <48C51611.70604@dbtopas.lt>
References: <48C51611.70604@dbtopas.lt>
Message-ID: <53F6608D-9734-4CA2-A19E-E5B8D5A5BC78@syenar.hu>

>
Hi Mindaugas,

> I'm back online (after 40 days of no email, no mobile phone, few  
> civilization). Thanks for great job and 1.0! :)

This trip must have been a pretty amazing one :)

Brgds,
Viktor

>
>
> My co-worker passed me a bug sample:
>
> FUNC Main()
> LOCAL aI
>  aI := {}
>  AADD(aI, HB_Hash("S", 10))
>  AADD(aI, HB_HClone(aI[1]))
>  aI[1,"S"] := 1
>  aI[2,"S"] -= 1
>  AADD(aI, HB_HClone(aI[2]))
>  aI[2, "S"] := 2
>  ? "Expected result: 1 2 9"
>  ? "Result:", aI[1,"S"], aI[2,"S"], aI[3,"S"]
>
>  // Changing -= to - fixes bug
>  aI := {}
>  AADD(aI, HB_Hash("S", 10))
>  AADD(aI, HB_HClone(aI[1]))
>  aI[1,"S"] := 1
>  aI[2,"S"] := aI[2,"S"] - 1   // instead of -=
>  AADD(aI, HB_HClone(aI[2]))
>  aI[2, "S"] := 2
>  ? "Result without -=:", aI[1,"S"], aI[2,"S"], aI[3,"S"]
>
>  // Changing HB_HClone() to manual clone fixes bug
>  aI := {}
>  AADD(aI, HB_Hash("S", 10))
>  AADD(aI, HB_Hash())
>  HB_HEval(aI[1], {|K,V| aI[2,K]:=V}) // HB_HClone()
>  aI[1,"S"] := 1
>  aI[2,"S"] -= 1
>  AADD(aI, HB_Hash())
>  HB_HEval(aI[2], {|K,V| aI[3,K]:=V}) // HB_HClone()
>  aI[2, "S"] := 2
>  ? "Result without HB_HClone:", aI[1,"S"], aI[2,"S"], aI[3,"S"]
> RETURN NIL
>
>
> Best regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Sep  8 16:00:03 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep  8 16:28:46 2008
Subject: [Harbour] RE: HBTest - fail in TAEVSM
In-Reply-To: <20080908193332.GB25596@34-mo7-2.acn.waw.pl>
References: <1A07FEDC778C3E4AA417F089511F859C03268A69F1@Mail-yoq.SYNEL-COMPANY.LTD>
	<1A07FEDC778C3E4AA417F089511F859C03268A69FB@Mail-yoq.SYNEL-COMPANY.LTD>
	<2386af1b0809080746j76a58765t8c5246a7b8c1c11f@mail.gmail.com>
	<20080908193332.GB25596@34-mo7-2.acn.waw.pl>
Message-ID: <5530A565-B229-4F9A-B5D7-85477C588412@syenar.hu>

Hi gents,

I'll add a test case for ASORT() plus a comment to the
AEVAL() test as below, and exclude it to not pollute our
hbtest results.

Brgds,
Viktor

On 2008.09.08., at 21:33, Przemyslaw Czerpak wrote:

> On Mon, 08 Sep 2008, Saulius Zrelskis wrote:
>
> Hi Saulius,
>
>>> It seems that Clipper use a cloned copy of the original array to  
>>> do the
>>> loop,
>>> and supply these orininal values to the codeblock. Bug or a feature?
>> Clipper uses original array, but <nCount> value calculates before  
>> loop
>> through array
>> and never recalculated. After resizing array run garbage collection  
>> (Memory(
>> -1 )) and see what's happening...
>
> Exactly. It's a bug in Clipper. In the moment when garbage collector  
> is
> activated directly by memory(-1) or indirectly by heavy memory usage  
> or
> or VM (evaluated pcode counter or asynchronous event like interrupt)
> Clipper GPFs with this code so it's not safe in Clipper to create and
> execute such constructions.
> In Harbour it's safe but resize operation immediately effects AEVAL()/
> ASCAN() range. IMHO it's OK. We should only fix ASORT() which is not
> safe and GPFs when sort block resize the array.
> In xHarbour Clipper's behavior is partially emulated but not exactly
> and it's even possible to create exploit for this emulation which
> will cause GPF.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Sep  8 16:53:20 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep  8 17:03:30 2008
Subject: [Harbour] 2008-09-08 22:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c911f4$Blat.v2.6.2$ed4dc64b$fac3ece22ee@127.0.0.1>

2008-09-08 22:49 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * bin/bld.bat
    * Some changes to make it more up-to-date.

  * utils/hbtest/hbtest.prg
  * utils/hbtest/rt_array.prg
    + Added comment to 'TAEVSM' test case saying this is 
      a CA-Cl*pper bug.
    + Added two additional tests doing resizes in ASORT() 
      blocks. They fail very badly in Harbour. (TOFIX)

  ; Made my indenting of ChangeLog entries compatible with 
    everyone else's.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep  8 18:11:17 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep  8 18:11:32 2008
Subject: [Harbour] sequence of library who crash
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF41@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EF40@SRV02.deltain.net>
	<AFB948164110ED43B5EB849E8DEEF03815EF41@SRV02.deltain.net>
Message-ID: <0CEF75FE-EAB7-4FCB-AF80-2169F88091A7@syenar.hu>

> If I remove "C2W.LIB OOHG.lib hbprinter.lib miniprint.lib licen.lib  
> hbnf.lib" my sample works
> The sample have only
> ALTD()

Some of these (except hbnf.lib which is a Harbour contrib),
are probably redefining (colliding with) some Harbour
functions or symbols.

> When a library  must be put first?

The Harbour ones, but this may break some functionality
of those libraries.

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep  9 03:41:03 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep  9 03:41:12 2008
Subject: [Harbour] 2008-09-09 09:33 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9124f$Blat.v2.6.2$696778f8$1718759f1574@127.0.0.1>

2008-09-09 09:33 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/mtpl_b32.mak
  * contrib/mtpl_vc.mak
    * Minor adjustment to previous change (to not display the 
      obj dir creation for each command.)

  * contrib/hbwhat32/whtdll.c
  * contrib/hbwhat32/wincorec.c
  * contrib/hbwhat32/whtsock.c
  * contrib/hbwhat32/whtcall.c
  * contrib/hbwhat32/whtclpb.c
  * contrib/hbwhat32/whtmapi.c
  * contrib/hbwhat32/whtdlg.c
  * contrib/hbwhat32/whtwnd.c
  * contrib/hbwhat32/whtmisc.c
  * contrib/hbwhat32/whtinet.c
    ! Fixed MSVS 2008 -W4 warnings.

  * bin/bld.bat
    * Some further updates.
--
Brgds,
Viktor

From gfilatov at front.ru  Tue Sep  9 05:02:41 2008
From: gfilatov at front.ru (Grigory Filatov)
Date: Tue Sep  9 05:02:51 2008
Subject: [Harbour] Typo in numconv.prg of HbCT library
Message-ID: <19388523.post@talk.nabble.com>


Hi Viktor,

There is a typo in numconv.prg of HbCT library after this changes:

2008-08-20 12:50 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
...
   * contrib/hbct/numconv.prg
...
     * Some more general code cleanups ( if() -> iif() ).

Current code:

STATIC FUNCTION B10TOBN( nNum, nBase )
LOCAL nInt
IF nNum > 0
   
   nInt := INT( nNum / nBase)
   RETURN Iiif(nInt==0, "", B10TOBN( nInt, @nBase )) +;
          SUBSTR( WORLD, ( nNum % nBase ) + 1, 1 )

ELSEIF nNum == 0
   RETURN "0"
ENDIF
RETURN ""

but should be

STATIC FUNCTION B10TOBN( nNum, nBase )
LOCAL nInt
IF nNum > 0
   
   nInt := INT( nNum / nBase)
   RETURN iif(nInt==0, "", B10TOBN( nInt, @nBase )) +;
          SUBSTR( WORLD, ( nNum % nBase ) + 1, 1 )

ELSEIF nNum == 0
   RETURN "0"
ENDIF
RETURN ""

--
Kind Regards,
Grigory Filatov
-- 
View this message in context: http://www.nabble.com/Typo-in-numconv.prg-of-HbCT-library-tp19388523p19388523.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Tue Sep  9 05:33:39 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep  9 05:33:46 2008
Subject: [Harbour] 2008-09-09 11:32 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9125f$Blat.v2.6.2$24441bea$b3cc270037e@127.0.0.1>

2008-09-09 11:32 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  + contrib/hbwhat32/hbwhat.h
  * contrib/hbwhat32/whtbmp.c
  * contrib/hbwhat32/whtbrsh.c
  * contrib/hbwhat32/whtcall.c
  * contrib/hbwhat32/whtcdlg.c
  * contrib/hbwhat32/whtclpb.c
  * contrib/hbwhat32/whtcomm.c
  * contrib/hbwhat32/whtcret.c
  * contrib/hbwhat32/whtdate.c
  * contrib/hbwhat32/whtdc.c
  * contrib/hbwhat32/whtdir.c
  * contrib/hbwhat32/whtdlg.c
  * contrib/hbwhat32/whtdll.c
  * contrib/hbwhat32/whtdraw.c
  * contrib/hbwhat32/whtfont.c
  * contrib/hbwhat32/whtgdi.c
  * contrib/hbwhat32/whthead.c
  * contrib/hbwhat32/whticon.c
  * contrib/hbwhat32/whtilst.c
  * contrib/hbwhat32/whtinet.c
  * contrib/hbwhat32/whtini.c
  * contrib/hbwhat32/whtkbrd.c
  * contrib/hbwhat32/whtlv.c
  * contrib/hbwhat32/whtmain.c
  * contrib/hbwhat32/whtmapi.c
  * contrib/hbwhat32/whtmem.c
  * contrib/hbwhat32/whtmenu.c
  * contrib/hbwhat32/whtmeta.c
  * contrib/hbwhat32/whtmisc.c
  * contrib/hbwhat32/whtmmcap.c
  * contrib/hbwhat32/whtmous.c
  * contrib/hbwhat32/whtmsg.c
  * contrib/hbwhat32/whtpen.c
  * contrib/hbwhat32/whtprn.c
  * contrib/hbwhat32/whtrect.c
  * contrib/hbwhat32/whtreg.c
  * contrib/hbwhat32/whtrgn.c
  * contrib/hbwhat32/whtscrlb.c
  * contrib/hbwhat32/whtseria.c
  * contrib/hbwhat32/whtshell.c
  * contrib/hbwhat32/whtsock.c
  * contrib/hbwhat32/whtsys.c
  * contrib/hbwhat32/whttab.c
  * contrib/hbwhat32/whttbar.c
  * contrib/hbwhat32/whttext.c
  * contrib/hbwhat32/whttree.c
  * contrib/hbwhat32/whtview.c
  * contrib/hbwhat32/whtwnd.c
  * contrib/hbwhat32/wincorec.c
    ! Changed pointer related hb_ret, hb_par and hb_stor calls 
      to ptr versions. This might create incompatibilities and 
      since there is no test package for this lib, it's difficult 
      to test if it works. I relied on MSVC warnings.
    ; There are still some calls to change. One other problem is 
      there is no public equivalent of hb_vmPushLong() for pointers, 
      so these VM specific parts should be changed to use some more 
      official Harbour APIs.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep  9 05:35:18 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep  9 05:35:25 2008
Subject: [Harbour] 2008-09-09 11:34 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9125f$Blat.v2.6.2$5f2750d8$22c69843bee@127.0.0.1>

2008-09-09 11:34 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbct/numconv.prg
    ! Fixed typo. Thanks to Grigory Filatov for reporting it.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep  9 05:41:08 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep  9 05:41:17 2008
Subject: [Harbour] Typo in numconv.prg of HbCT library
In-Reply-To: <19388523.post@talk.nabble.com>
References: <19388523.post@talk.nabble.com>
Message-ID: <EFD92361-BDEF-4C94-BAFC-8A12BE169520@syenar.hu>

Thanks Grigory, I've committed a fix for this.

Brgds,
Viktor

On 2008.09.09., at 11:02, Grigory Filatov wrote:

>
> Hi Viktor,
>
> There is a typo in numconv.prg of HbCT library after this changes:
>
> 2008-08-20 12:50 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
> ...
>   * contrib/hbct/numconv.prg
> ...
>     * Some more general code cleanups ( if() -> iif() ).
>
> Current code:
>
> STATIC FUNCTION B10TOBN( nNum, nBase )
> LOCAL nInt
> IF nNum > 0
>
>   nInt := INT( nNum / nBase)
>   RETURN Iiif(nInt==0, "", B10TOBN( nInt, @nBase )) +;
>          SUBSTR( WORLD, ( nNum % nBase ) + 1, 1 )
>
> ELSEIF nNum == 0
>   RETURN "0"
> ENDIF
> RETURN ""
>
> but should be
>
> STATIC FUNCTION B10TOBN( nNum, nBase )
> LOCAL nInt
> IF nNum > 0
>
>   nInt := INT( nNum / nBase)
>   RETURN iif(nInt==0, "", B10TOBN( nInt, @nBase )) +;
>          SUBSTR( WORLD, ( nNum % nBase ) + 1, 1 )
>
> ELSEIF nNum == 0
>   RETURN "0"
> ENDIF
> RETURN ""
>
> --
> Kind Regards,
> Grigory Filatov
> -- 
> View this message in context: http://www.nabble.com/Typo-in-numconv.prg-of-HbCT-library-tp19388523p19388523.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Tue Sep  9 05:47:37 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  9 05:47:43 2008
Subject: [Harbour] 2008-09-09 11:47 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200809090947.m899lbig018000@31-mo5-4.acn.waw.pl>

2008-09-09 11:47 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/asort.c
    ! fixed GPF when user sort code block reduces the size of sorted array

best regards
Przemek
From harbour.01 at syenar.hu  Tue Sep  9 05:52:27 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep  9 05:52:38 2008
Subject: [Harbour] 2008-09-09 11:50 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91261$Blat.v2.6.2$c44a2ff6$120c8818aa8a@127.0.0.1>

2008-09-09 11:50 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/mtpl_b32.mak
  * contrib/mtpl_gcc.mak
  * contrib/mtpl_vc.mak
    ! Some more fine tuning.
--
Brgds,
Viktor

From niki at synel.co.il  Tue Sep  9 05:54:44 2008
From: niki at synel.co.il (Chen Kedem)
Date: Tue Sep  9 05:56:57 2008
Subject: [Harbour] RE: SF bugtracker#2096950: SORT descend is wrong
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C03268A69F2@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C03268A69F2@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <1A07FEDC778C3E4AA417F089511F859C03268A69FD@Mail-yoq.SYNEL-COMPANY.LTD>

Is this a known issue?

  Chen.

________________________________________
From: Chen Kedem
Sent: 07 September 2008 10:16
To: harbour@harbour-project.org
Subject: SF bugtracker#2096950: SORT descend is wrong

http://sourceforge.net/tracker/index.php?func=detail&aid=2096950&group_id=681&atid=100681

Descending sort is wrong for negative numerics.

---tt45.prg---
proc Test()
dbcreate( "test2", { { "ITEM", "N", 10, 2 } } )
use test2
dbappend()
test2->ITEM := 5.00
dbappend()
test2->ITEM := -5.12
dbappend()
test2->ITEM := 6.00
dbappend()
test2->ITEM := 7.00
dbappend()
test2->ITEM := -5.00
? "test2:"
dbeval( {|| qout( test2->ITEM ) } )
sort to test3 on item /D
use test3
? "test3:"
dbeval( {|| qout( test3->ITEM ) } )
use
return
--------------

bld_b32 tt45 /w/a/n
tt45

With clipper:
test2:      5.00     -5.12      6.00      7.00     -5.00
test3:      7.00      6.00      5.00     -5.00     -5.12

With Harbour (ChangeLog 2008-09-07 01:44 UTC+0200 Viktor Szakats r9329):
test2:      5.00     -5.12      6.00      7.00     -5.00
test3:     -5.12     -5.00      7.00      6.00      5.00


  Chen.
From harbour.01 at syenar.hu  Tue Sep  9 06:03:31 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep  9 06:03:41 2008
Subject: [Harbour] RE: SF bugtracker#2096950: SORT descend is wrong
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C03268A69FD@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C03268A69F2@Mail-yoq.SYNEL-COMPANY.LTD>
	<1A07FEDC778C3E4AA417F089511F859C03268A69FD@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <D6C7DC18-6455-42BA-BE62-BA138C96D22D@syenar.hu>

Hi Chen,

No. It looked to me that in SORT command, Harbour isn't
using the same logic as in DESCEND() for example, but
instead is handling all types as strings (except logical).
IOW, that extra logic to handle numerics as numbers is
missing.

Brgds,
Viktor

On 2008.09.09., at 11:54, Chen Kedem wrote:

> Is this a known issue?
>
>  Chen.
>
> ________________________________________
> From: Chen Kedem
> Sent: 07 September 2008 10:16
> To: harbour@harbour-project.org
> Subject: SF bugtracker#2096950: SORT descend is wrong
>
> http://sourceforge.net/tracker/index.php?func=detail&aid=2096950&group_id=681&atid=100681
>
> Descending sort is wrong for negative numerics.
>
> ---tt45.prg---
> proc Test()
> dbcreate( "test2", { { "ITEM", "N", 10, 2 } } )
> use test2
> dbappend()
> test2->ITEM := 5.00
> dbappend()
> test2->ITEM := -5.12
> dbappend()
> test2->ITEM := 6.00
> dbappend()
> test2->ITEM := 7.00
> dbappend()
> test2->ITEM := -5.00
> ? "test2:"
> dbeval( {|| qout( test2->ITEM ) } )
> sort to test3 on item /D
> use test3
> ? "test3:"
> dbeval( {|| qout( test3->ITEM ) } )
> use
> return
> --------------
>
> bld_b32 tt45 /w/a/n
> tt45
>
> With clipper:
> test2:      5.00     -5.12      6.00      7.00     -5.00
> test3:      7.00      6.00      5.00     -5.00     -5.12
>
> With Harbour (ChangeLog 2008-09-07 01:44 UTC+0200 Viktor Szakats  
> r9329):
> test2:      5.00     -5.12      6.00      7.00     -5.00
> test3:     -5.12     -5.00      7.00      6.00      5.00
>
>
>  Chen.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Tue Sep  9 06:22:37 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep  9 06:22:46 2008
Subject: [Harbour] sequence of library who crash
In-Reply-To: <0CEF75FE-EAB7-4FCB-AF80-2169F88091A7@syenar.hu>
References: <AFB948164110ED43B5EB849E8DEEF03815EF40@SRV02.deltain.net><AFB948164110ED43B5EB849E8DEEF03815EF41@SRV02.deltain.net>
	<0CEF75FE-EAB7-4FCB-AF80-2169F88091A7@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF55@SRV02.deltain.net>

Thanks for support
clip2win require c2w_init() first of altd()

Now I have another anomalies linking this library I receive two bad result after wvt_setcodepage(255)
? file("STAMPANT.app") // return false in my sample
 ? hb_direxists(curdrive()+":\"+curdir(curdrive()))   // also here return false
How can occur in harbour simply linking a lib?
How can be informed if a library overwrite one function or object used by file and hb_direxist?
How cam I detect wich function/object is overwritted?
In this case is possible a special messages by hbmake?


////// my sample
#include "c2w.ch"

REQUEST HB_LANG_IT
 REQUEST HB_CODEPAGE_IT437
 REQUEST HB_GT_GUI
 REQUEST HB_GT_GUI_DEFAULT

function main

 c2w_init()
 wvt_setcodepage(255)
 HB_SETCODEPAGE( "IT437" )
 c2w_setwintitle("Prevetic")
 c2w_setstatusbar({"Versione c2w","Demo (panel 2)","Clip2Win"}) 
 dbcreate("STAMPANT.APP",{{"TEST","C",20,0}})
 ? file("STAMPANT.app") // return false in my sample
 ? hb_direxists(curdrive()+":\"+curdir(curdrive()))   // also here return false
 c2w_about()
 wait "ciro"
 quit
 return

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Tuesday, September 09, 2008 12:11 AM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] sequence of library who crash

> If I remove "C2W.LIB OOHG.lib hbprinter.lib miniprint.lib licen.lib  
> hbnf.lib" my sample works
> The sample have only
> ALTD()

Some of these (except hbnf.lib which is a Harbour contrib),
are probably redefining (colliding with) some Harbour
functions or symbols.

> When a library  must be put first?

The Harbour ones, but this may break some functionality
of those libraries.

Brgds,
Viktor

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Tue Sep  9 06:24:48 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  9 06:24:55 2008
Subject: [Harbour] RE: SF bugtracker#2096950: SORT descend is wrong
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C03268A69FD@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C03268A69F2@Mail-yoq.SYNEL-COMPANY.LTD>
	<1A07FEDC778C3E4AA417F089511F859C03268A69FD@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <20080909102448.GA18104@34-mo7-2.acn.waw.pl>

On Tue, 09 Sep 2008, Chen Kedem wrote:

Hi Chen.

> Is this a known issue?

Yes it is.
The SORT command / __dbArrange() function for DBF* RDDs
(hbdbsort.c) does not support correctly national sorting
for character fields, numeric, date and other extended
field types.
In fact it's very old code with fatal performance and
probably some other bugs which have to be rewritten from
scratch. In the current state I do not want to put my
fingers inside and update it. It's waste of time.
For those of you who need it now and use indexing RDDs
I suggest as temporary solution to redefine SORT command
to combination of:

   INDEX ON ... TO _tempidx TEMPORARY;
   COPY TO ...;
   OrdBagClear( "_tempidx" )

It will be much faster and will work.
If I'll find some time then I'll rewrite it though maybe
someone else will be faster. I know about problems with this
code from the beginning but it has very low priority on my
TODO list.

best regards,
Przemek
From f.eichelhardt at web.de  Tue Sep  9 06:28:02 2008
From: f.eichelhardt at web.de (Fritz Eichelhardt)
Date: Tue Sep  9 06:27:22 2008
Subject: [Harbour] Bug
In-Reply-To: <20080908192123.GA25596@34-mo7-2.acn.waw.pl>
References: <48C51611.70604@dbtopas.lt>
	<20080908192123.GA25596@34-mo7-2.acn.waw.pl>
Message-ID: <200809091228.02183.f.eichelhardt@web.de>

Am Montag, 8. September 2008 21:21:23 schrieb Przemyslaw Czerpak:
> On Mon, 08 Sep 2008, Mindaugas Kavaliauskas wrote:
>
> Hi Mindaugas,
>
> > I'm back online (after 40 days of no email, no mobile phone, few
> > civilization).
>
> You are lucky man ;-)

a lucky man he WAS.

-- 
Mit freundlichen Gr??en

Fritz Eichelhardt
Br?ckenstr. 1
53545 Linz
Tel.: 02644 - 3784
Fax/UMS: 01212 - 517045068
From lorenzo.fiorini at gmail.com  Tue Sep  9 06:34:35 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Sep  9 06:34:41 2008
Subject: [Harbour] Typo in source/debug/dbgentry.c?
Message-ID: <9257026e0809090334n191be460gf03b23b9cd13ab90@mail.gmail.com>

In line 68 there is:

#if defined( HB_HB_OS_UNIX_COMPATIBLE )

is it correct?

best regards,
Lorenzo
From harbour.01 at syenar.hu  Tue Sep  9 06:36:19 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep  9 06:36:32 2008
Subject: [Harbour] Typo in source/debug/dbgentry.c?
In-Reply-To: <9257026e0809090334n191be460gf03b23b9cd13ab90@mail.gmail.com>
References: <9257026e0809090334n191be460gf03b23b9cd13ab90@mail.gmail.com>
Message-ID: <5D27A3D1-A84E-4BF7-A101-91E6B4108243@syenar.hu>

Hi Lorenzo,

On 2008.09.09., at 12:34, Lorenzo Fiorini wrote:

> In line 68 there is:
>
> #if defined( HB_HB_OS_UNIX_COMPATIBLE )
>
> is it correct?

No, I'll fix this ASAP.

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep  9 06:37:45 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep  9 06:37:51 2008
Subject: [Harbour] 2008-09-09 12:37 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91268$Blat.v2.6.2$188a2458$a94e22d00d6@127.0.0.1>

2008-09-09 12:37 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/debug/dbgentry.c
    ! Fixed recent typo. Thanks Lorenzo.
--
Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Tue Sep  9 06:39:59 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Sep  9 06:40:05 2008
Subject: [Harbour] 2008-09-09 12:37 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c91268$Blat.v2.6.2$188a2458$a94e22d00d6@127.0.0.1>
References: <01c91268$Blat.v2.6.2$188a2458$a94e22d00d6@127.0.0.1>
Message-ID: <9257026e0809090339o269190dfsfb9a3d38424e2fb9@mail.gmail.com>

On Tue, Sep 9, 2008 at 12:37 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:
> 2008-09-09 12:37 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>  * source/debug/dbgentry.c
>    ! Fixed recent typo. Thanks Lorenzo.

Thanks to you.

best regards,
Lorenzo
From niki at synel.co.il  Tue Sep  9 06:47:13 2008
From: niki at synel.co.il (Chen Kedem)
Date: Tue Sep  9 06:47:42 2008
Subject: [Harbour] RE: SF bugtracker#2096950: SORT descend is wrong
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C03268A69FD@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C03268A69F2@Mail-yoq.SYNEL-COMPANY.LTD>,
	<1A07FEDC778C3E4AA417F089511F859C03268A69FD@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <1A07FEDC778C3E4AA417F089511F859C03268A6A00@Mail-yoq.SYNEL-COMPANY.LTD>

Przemek,

>> Is this a known issue?

> In fact it's very old code with fatal performance and
> probably some other bugs which have to be rewritten from scratch

Thanks for clarifying this issue, I'll add your comment to the SF bugtrack.

  Chen.
From harbour.01 at syenar.hu  Tue Sep  9 07:18:02 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep  9 07:18:10 2008
Subject: [Harbour] 2008-09-09 13:14 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9126d$Blat.v2.6.2$b93fc34e$1690592a06d0@127.0.0.1>

2008-09-09 13:14 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbwhat32/whthead.c
  * contrib/hbwhat32/whtmmcap.c
  * contrib/hbwhat32/whtshell.c
  * contrib/hbwhat32/whtdir.c
    ! Fixed a few problems when compiling with MinGW.

  * contrib/Makefile
  * contrib/make_b32_all.bat
  * contrib/make_gcc_all.sh
  * contrib/make_vc_all.bat
    + Readded hbwhat32 to default build lists.
    ; This doesn't mean this lib works, but the amount of 
      warnings are now on a manageable level on both 32 and 
      64 bit on BCC/MSVC/MINGW, we can gradually fix the 
      remaining ones, and maybe if we have this lib 
      built, someone will try to use it and maybe fix it.
      [ We may temply as well disable it again, if it turns 
      out to be a showstopper for 1.0.1 release. ]
    ; If there is anything against the above, I'd suggest 
      to remove the whole contrib altogether.
--
Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Tue Sep  9 07:31:39 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Sep  9 07:31:46 2008
Subject: [Harbour] RE: SF bugtracker#2096950: SORT descend is wrong
References: <1A07FEDC778C3E4AA417F089511F859C03268A69F2@Mail-yoq.SYNEL-COMPANY.LTD><1A07FEDC778C3E4AA417F089511F859C03268A69FD@Mail-yoq.SYNEL-COMPANY.LTD>
	<20080909102448.GA18104@34-mo7-2.acn.waw.pl>
Message-ID: <CDB4074B36C14562B3506808B1FFEB2F@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: martedi 9 settembre 2008 12.24
Oggetto: Re: [Harbour] RE: SF bugtracker#2096950: SORT descend is wrong


>   INDEX ON ... TO _tempidx TEMPORARY;
>   COPY TO ...;
>   OrdBagClear( "_tempidx" )

Is it needed to delete the index file when we use the TEMPORARY clause?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic

From e.m.giordano at emagsoftware.it  Tue Sep  9 07:32:20 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Sep  9 07:32:26 2008
Subject: [Harbour] Bug
References: <48C51611.70604@dbtopas.lt><20080908192123.GA25596@34-mo7-2.acn.waw.pl>
	<200809091228.02183.f.eichelhardt@web.de>
Message-ID: <E81DCEF3DB0B4CC3B41135ACD8127E52@emag>


-----Messaggio Originale----- 
Da: "Fritz Eichelhardt" <f.eichelhardt@web.de>
A: <harbour@harbour-project.org>
Data invio: martedi 9 settembre 2008 12.28
Oggetto: Re: [Harbour] Bug


> a lucky man he WAS.

ELP? :-)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic

From druzus at acn.waw.pl  Tue Sep  9 07:42:40 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  9 07:42:47 2008
Subject: [Harbour] RE: SF bugtracker#2096950: SORT descend is wrong
In-Reply-To: <CDB4074B36C14562B3506808B1FFEB2F@emag>
References: <20080909102448.GA18104@34-mo7-2.acn.waw.pl>
	<CDB4074B36C14562B3506808B1FFEB2F@emag>
Message-ID: <20080909114240.GA21006@34-mo7-2.acn.waw.pl>

On Tue, 09 Sep 2008, Enrico Maria Giordano wrote:

Hi Enrico,

> >  INDEX ON ... TO _tempidx TEMPORARY;
> >  COPY TO ...;
> >  OrdBagClear( "_tempidx" )
> 
> Is it needed to delete the index file when we use the TEMPORARY clause?

No, it will be removed automatically when order bag is closed.
Of course if it exists.
RDD does not have to create physical file and may decide to
create index in memory when TEMPORARY clause is used. It's
low level RDD decision how and where to store temporary indexes
which may depend on different conditions like used OS, available
memory or size of index file.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Tue Sep  9 08:25:52 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Sep  9 08:26:00 2008
Subject: [Harbour] RE: SF bugtracker#2096950: SORT descend is wrong
References: <20080909102448.GA18104@34-mo7-2.acn.waw.pl><CDB4074B36C14562B3506808B1FFEB2F@emag>
	<20080909114240.GA21006@34-mo7-2.acn.waw.pl>
Message-ID: <2D5665A857A2496E85144088562171C5@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: martedi 9 settembre 2008 13.42
Oggetto: Re: [Harbour] RE: SF bugtracker#2096950: SORT descend is wrong


> > >  INDEX ON ... TO _tempidx TEMPORARY;
> > >  COPY TO ...;
> > >  OrdBagClear( "_tempidx" )
> > 
> > Is it needed to delete the index file when we use the TEMPORARY clause?
> 
> No, it will be removed automatically when order bag is closed.

Thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic

From lkrausem at shaw.ca  Tue Sep  9 11:16:52 2008
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Tue Sep  9 11:17:14 2008
Subject: [Harbour] Bug
In-Reply-To: <E81DCEF3DB0B4CC3B41135ACD8127E52@emag>
References: <48C51611.70604@dbtopas.lt>
	<20080908192123.GA25596@34-mo7-2.acn.waw.pl>
	<200809091228.02183.f.eichelhardt@web.de>
	<E81DCEF3DB0B4CC3B41135ACD8127E52@emag>
Message-ID: <48C69364.5060307@shaw.ca>



Enrico Maria Giordano wrote:
>
> -----Messaggio Originale----- Da: "Fritz Eichelhardt" 
> <f.eichelhardt@web.de>
> A: <harbour@harbour-project.org>
> Data invio: martedi 9 settembre 2008 12.28
> Oggetto: Re: [Harbour] Bug
>
>
>> a lucky man he WAS.
>
> ELP? :-)

Same thing I was thinking :-) http://www.progarchives.com/album.asp?id=1862
>
> EMG
>
> -- 
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From harbour.01 at syenar.hu  Tue Sep  9 15:58:16 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep  9 15:58:29 2008
Subject: [Harbour] 2008-09-09 21:54 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c912b6$Blat.v2.6.2$665aca86$1f8785fe30c@127.0.0.1>

2008-09-09 21:54 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbwhat32/hbwhat.h
  * contrib/hbwhat32/whtcall.c
  * contrib/hbwhat32/whtclpb.c
  * contrib/hbwhat32/whtcomm.c
  * contrib/hbwhat32/whtdll.c
  * contrib/hbwhat32/whtgdi.c
  * contrib/hbwhat32/whtilst.c
  * contrib/hbwhat32/whtinet.c
  * contrib/hbwhat32/whtini.c
  * contrib/hbwhat32/whtmisc.c
  * contrib/hbwhat32/whtmmcap.c
  * contrib/hbwhat32/whtmsg.c
  * contrib/hbwhat32/whtsock.c
  * contrib/hbwhat32/whtsys.c
  * contrib/hbwhat32/whttab.c
  * contrib/hbwhat32/whttree.c
  * contrib/hbwhat32/whtwnd.c
  * contrib/hbwhat32/wincorec.c
    ! Fixed remaining 64-bit problems.
    ! Fixed to work as before, using numbers for pointers.
    ! Fixed bugs in these internet related functions:
      INTERNETREADFILE(), INTERNETWRITEFILE()
    ; NOTE: Number of warnings went down from somewhere well 
            above a thousand to just a few ones, mostly common 
            in other parts of Harbour. If someone could help to 
            clear these remains, it'd be great.
            Tested with MSVS2008 -W4 64/32-bit modes, BCC 5.8, 
            MinGW 4.31.
    ; NOTE: I didn't do any real-life tests. Pls do if you're 
            interested or you're using this contrib.
    ; NOTE: Remaining warnings:
            - MSVS 2008 -W4 64-bit:
              wincorec.c(689) : warning C4244: 'argument' : conversion from 'HB_PTRDIFF' to 'ULONG', possible loss of data
              whtclpb.c(208) : warning C4244: 'argument' : conversion from 'SIZE_T' to 'ULONG', possible loss of data
              whtdll.c(298) : warning C4311: 'type cast' : pointer truncation from 'LPSTR' to 'DWORD'
              whtdll.c(299) : warning C4311: 'type cast' : pointer truncation from 'char *' to 'DWORD'
              whtdll.c(306) : warning C4311: 'type cast' : pointer truncation from 'char *' to 'DWORD'
              whtlv.c(84) : warning C4267: 'argument' : conversion from 'size_t' to 'ULONG', possible loss of data
              whtlv.c(109) : warning C4267: 'argument' : conversion from 'size_t' to 'ULONG', possible loss of data
              whtmem.c(243) : warning C4244: 'argument' : conversion from 'SIZE_T' to 'int', possible loss of data
              whtmem.c(270) : warning C4244: 'argument' : conversion from 'SIZE_T' to 'int', possible loss of data
              whtmem.c(279) : warning C4244: 'argument' : conversion from 'SIZE_T' to 'int', possible loss of data
              whtreg.c(171) : warning C4267: 'argument' : conversion from 'size_t' to 'DWORD', possible loss of data
              whtshell.c(34) : warning C4267: 'argument' : conversion from 'size_t' to 'ULONG', possible loss of data
              whtsys.c(1093) : warning C4244: 'argument' : conversion from 'SIZE_T' to 'int', possible loss of data
              whttext.c(127) : warning C4267: 'argument' : conversion from 'size_t' to 'int', possible loss of data
              whttext.c(154) : warning C4267: 'argument' : conversion from 'size_t' to 'int', possible loss of data
              whttext.c(190) : warning C4267: 'argument' : conversion from 'size_t' to 'int', possible loss of data
              whttext.c(246) : warning C4267: 'argument' : conversion from 'size_t' to 'int', possible loss of data
              whttext.c(299) : warning C4267: 'argument' : conversion from 'size_t' to 'int', possible loss of data

            - MSVS 2008 -W4 32-bit:
              wincorec.c(434) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(438) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(442) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(446) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(450) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(454) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(458) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(462) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(466) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(470) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(486) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(529) : warning C4055: 'type cast' : from data pointer 'void *' to function pointer 'DLGPROC'
              wincorec.c(543) : warning C4055: 'type cast' : from data pointer 'void *' to function pointer 'DLGPROC'
              wincorec.c(556) : warning C4055: 'type cast' : from data pointer 'void *' to function pointer 'DLGPROC'
              wincorec.c(569) : warning C4055: 'type cast' : from data pointer 'void *' to function pointer 'DLGPROC'
              whtsys.c(316) : warning C4055: 'type cast' : from data pointer 'void *' to function pointer 'TIMERPROC'
              whtwnd.c(197) : warning C4055: 'type cast' : from data pointer 'void *' to function pointer 'WNDPROC'

            - MinGW 4.31 32-bit:
              wincorec.c:94: warning: signed and unsigned type in conditional expression
              wincorec.c:95: warning: signed and unsigned type in conditional expression
              wincorec.c:96: warning: signed and unsigned type in conditional expression
              wincorec.c:97: warning: signed and unsigned type in conditional expression
              wincorec.c:119: warning: signed and unsigned type in conditional expression
              wincorec.c:120: warning: signed and unsigned type in conditional expression
              wincorec.c:121: warning: signed and unsigned type in conditional expression
              wincorec.c:122: warning: signed and unsigned type in conditional expression
              whtcdlg.c:180: warning: signed and unsigned type in conditional expression
              whtdate.c:61: warning: passing argument 1 of 'hb_retptr' makes pointer from integer without a cast
              whtdlg.c:169: warning: signed and unsigned type in conditional expression
              whtmisc.c:95: warning: signed and unsigned type in conditional expression
              whtmisc.c:349: warning: signed and unsigned type in conditional expression
              whtseria.c:343: warning: signed and unsigned type in conditional expression
              whtsock.c:43: warning: signed and unsigned type in conditional expression
              whtsock.c:108: warning: signed and unsigned type in conditional expression
              whtsock.c:124: warning: signed and unsigned type in conditional expression
              whtsock.c:226: warning: signed and unsigned type in conditional expression
              whtsock.c:246: warning: signed and unsigned type in conditional expression
              whtsock.c:249: warning: signed and unsigned type in conditional expression
              whtsock.c:318: warning: signed and unsigned type in conditional expression
              whtsock.c:331: warning: signed and unsigned type in conditional expression
              whtsock.c:338: warning: signed and unsigned type in conditional expression
              whtsys.c:1091: warning: comparison between signed and unsigned
--
Brgds,
Viktor

From f.eichelhardt at web.de  Tue Sep  9 16:05:37 2008
From: f.eichelhardt at web.de (Fritz Eichelhardt)
Date: Tue Sep  9 16:05:09 2008
Subject: [Harbour] Bug
In-Reply-To: <E81DCEF3DB0B4CC3B41135ACD8127E52@emag>
References: <48C51611.70604@dbtopas.lt>
	<200809091228.02183.f.eichelhardt@web.de>
	<E81DCEF3DB0B4CC3B41135ACD8127E52@emag>
Message-ID: <200809092205.37382.f.eichelhardt@web.de>

Am Dienstag, 9. September 2008 13:32:20 schrieb Enrico Maria Giordano:

> > a lucky man he WAS.
>
> ELP? :-)

right, sir.

-- 
Mit freundlichen Gr??en

Fritz Eichelhardt
Br?ckenstr. 1
53545 Linz
Tel.: 02644 - 3784
Fax/UMS: 01212 - 517045068
From vailtom at gmail.com  Tue Sep  9 23:07:14 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Tue Sep  9 23:07:20 2008
Subject: [Harbour] Suggestion for harbour web site?
Message-ID: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com>

Hello to all!

I would like to help the project suggesting a simple model for the new site.
I work with harbour to 4 years and would be happy if I could give my
suggestion.

Please see: http://kssoftware.com.br/harbour/
Renato Silva
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080910/d339ec39/attachment.html
From tomaz.zupan at orpo.si  Wed Sep 10 01:39:26 2008
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Wed Sep 10 01:39:56 2008
Subject: [Harbour] Suggestion for harbour web site?
In-Reply-To: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com>
Message-ID: <200809100739.26988.tomaz.zupan@orpo.si>

On Wednesday 10 September 2008 05:07:14 Vailton Renato wrote:
> Hello to all!
>
> I would like to help the project suggesting a simple model for the new
> site. I work with harbour to 4 years and would be happy if I could give my
> suggestion.
>
> Please see: http://kssoftware.com.br/harbour/
> Renato Silva

Nice!

LP, Toma?
From harbour.01 at syenar.hu  Wed Sep 10 02:34:13 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 10 02:34:21 2008
Subject: [Harbour] Suggestion for harbour web site?
In-Reply-To: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com>
Message-ID: <FFEC68F7-D506-4EBA-86CD-FA558FC695ED@syenar.hu>

Hi Renato,

Very nice layout.

[ just a minor correction, Harbour is now also 64-bit,
so '32/64-bit' may be better on the headline. ]

Brgds,
Viktor

On 2008.09.10., at 5:07, Vailton Renato wrote:

> Hello to all!
>
> I would like to help the project suggesting a simple model for the  
> new site. I work with harbour to 4 years and would be happy if I  
> could give my suggestion.
>
> Please see: http://kssoftware.com.br/harbour/
> Renato Silva
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From a.jurkiewicz at abix.info.pl  Wed Sep 10 03:58:50 2008
From: a.jurkiewicz at abix.info.pl (ABIX - Adam Jurkiewicz)
Date: Wed Sep 10 03:58:58 2008
Subject: [Harbour] Suggestion for harbour web site?
In-Reply-To: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com>
Message-ID: <200809100958.50184.a.jurkiewicz@abix.info.pl>

Dnia ?roda, 10 wrze?nia 2008, Vailton Renato napisa?:
> Hello to all!
>
> Please see: http://kssoftware.com.br/harbour/

Very nice!
Is this maybe done with some CMS system ?
I'm usig very simple CMS (www.abix.info.pl) to create my home page, and I'm 
very proud of it. Doesn't need any database (just flat file), easy to install 
(php 4 only needed) and maitain. Maybe we can use it to create new Harbour 
Home Page?

Adam

-- 
ABIX - Linuksowe Systemy Wspomagania Biznesu www.abix.info.pl
Gadu-Gadu: 302315
Skype: abix_adamj 
Wsparcie aplikacji: http://groups-beta.google.com/group/abix-rcsoft?hl=pl
From harbour.01 at syenar.hu  Wed Sep 10 04:05:53 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 10 04:05:59 2008
Subject: [Harbour] 2008-09-10 09:46 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9131c$Blat.v2.6.2$0bed2df8$d20458f3790@127.0.0.1>

2008-09-10 09:46 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * doc/whatsnew.txt
    + Updated.

  * contrib/Makefile
  * contrib/make_b32_all.bat
  * contrib/make_gcc_all.sh
  * contrib/make_vc_all.bat
  - contrib/hbwhat32
  + contrib/hbwhat
    * Renamed to not contain '32'.
    ; NOTE: I plan to do this with a couple of other 
            names too in the future.

  * contrib/hbwhat/Makefile
  * contrib/hbwhat/common.mak
  - contrib/hbwhat/what32.ch
  + contrib/hbwhat/hbwhat.ch
    * Renamed what32.ch to not contain '32' (and added 
      hb for consistency if it got renamed anyway).

  * utils/hbmake/hbmake.prg
    * Updated by Bill Robertson to fix too many things to 
      mention here. (cleaned up lots of stuff, using hb_run()s 
      return values, cleaned to not call main() function 
      recursively (!), display output cleanups, etcetc)
    * hbwhat32, hbziparch lib name changes.

  * contrib/examples/pp/hbppcore.c
  * contrib/examples/pp/hbppcomp.c
  * contrib/rddads/ads1.c
  * source/pp/ppcore.c
  * source/vm/asort.c
  * source/vm/hvm.c
  * source/rtl/disksphb.c
  * source/rdd/dbfntx/dbfntx1.c
  * source/rdd/workarea.c
  * contrib/hbct/screen2.c
  * contrib/hbct/token2.c
    * while( TRUE ) -> for( ;; )
    * do {} while( TRUE ) -> for( ;; ) {}
    ; To avoid warnings about conditions being constant.
--
Brgds,
Viktor

From miguelangel at marchuet.net  Wed Sep 10 04:56:37 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Sep 10 04:56:12 2008
Subject: [Harbour] svn error
Message-ID: <48C78BC5.7060001@marchuet.net>

svn error:

PROPFIND of
'/svnroot/harbour-project/trunk/harbour/contrib/hbwhat32/wincorec.c': could not
connect to server (https://harbour-project.svn.sourceforge.net)

Best regards,
Miguel Angel marchuet
From lorenzo.fiorini at gmail.com  Wed Sep 10 05:09:20 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Sep 10 05:09:28 2008
Subject: [Harbour] hb* scripts always add .exe in win
Message-ID: <9257026e0809100209w16c85780wbfea91a44b22e0a7@mail.gmail.com>

In dir tests:

- using msys/mingw

hbmk test4.prg -otest4.cgi gives test4.cgi.exe

The "problem" seems this line:

FOUTE="\${FOUTE%${hb_exesuf}}${hb_exesuf}"

but I can't find the right solution.

IMHO the logic should be: if the extension is provided use it ELSE add
${hb_exesuf}

Any idea?

best regards,
Lorenzo
From mbelgrano at deltain.it  Wed Sep 10 05:22:10 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Sep 10 05:22:17 2008
Subject: [Harbour] svn error
In-Reply-To: <48C78BC5.7060001@marchuet.net>
References: <48C78BC5.7060001@marchuet.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF60@SRV02.deltain.net>

Try repeat operation it will works (for me for example)

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Miguel Angel
Marchuet
Sent: Wednesday, September 10, 2008 10:57 AM
To: Harbour Project Main Developer List.
Subject: [Harbour] svn error

svn error:

PROPFIND of
'/svnroot/harbour-project/trunk/harbour/contrib/hbwhat32/wincorec.c':
could not
connect to server (https://harbour-project.svn.sourceforge.net)

Best regards,
Miguel Angel marchuet
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Wed Sep 10 05:40:24 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 10 05:40:36 2008
Subject: [Harbour] hb* scripts always add .exe in win
In-Reply-To: <9257026e0809100209w16c85780wbfea91a44b22e0a7@mail.gmail.com>
References: <9257026e0809100209w16c85780wbfea91a44b22e0a7@mail.gmail.com>
Message-ID: <0DEBEC84-0A5B-4DC2-B292-EB7168A742FD@syenar.hu>

>
Hi Lorenzo,

> hbmk test4.prg -otest4.cgi gives test4.cgi.exe
>
> The "problem" seems this line:
>
> FOUTE="\${FOUTE%${hb_exesuf}}${hb_exesuf}"
>
> but I can't find the right solution.
>
> IMHO the logic should be: if the extension is provided use it ELSE add
> ${hb_exesuf}

This seems perfectly reasonable. .exe should be just a default
extension, not an obligatory one.

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep 10 07:33:36 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 10 07:33:42 2008
Subject: [Harbour] 2008-09-10 13:22 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91339$Blat.v2.6.2$103d3962$11a04ee064b6@127.0.0.1>

2008-09-10 13:22 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * doc/whatsnew.txt
    + Updated.

  * contrib/hbw32/Makefile
  * contrib/hbw32/common.mak
  - contrib/hbw32/w32_prn.c
  + contrib/hbw32/win_prn1.c
  - contrib/hbw32/tprinter.c
  + contrib/hbw32/win_prn2.c
  - contrib/hbw32/dllcall.c
  + contrib/hbw32/win_dll.c
  - contrib/hbw32/w32_osc.c
  + contrib/hbw32/win_osc.c
  - contrib/hbw32/w32_ole.c
  + contrib/hbw32/win_ole.c
  - contrib/hbw32/w32_regc.c
  + contrib/hbw32/win_regc.c
  - contrib/hbw32/w32_os.prg
  + contrib/hbw32/win_os.prg
  - contrib/hbw32/w32_tole.prg
  + contrib/hbw32/win_tole.prg
  - contrib/hbw32/w32_reg.prg
  + contrib/hbw32/win_reg.prg
  - contrib/hbw32/w32_tprn.prg
  + contrib/hbw32/win_tprn.prg
    * Cleaned some 'w32'.

  * contrib/hbwhat/hbwhat.h
    ! Hack to disable UNICODE if enabled.
      hbwhat cannot currently be compiled in UNICODE mode.

  * contrib/hbwhat/wincorec.c
  * contrib/hbwhat/whtmisc.c
    % Made some internal functions static by moving them around.
    ! Removed TEXT( <function_call> ) type of syntax.

  * contrib/hbodbc/odbc.c
    ! MSVC warning fixed in the UNICODE path.

  * contrib/hbnf/getenvrn.c
    ! Fixed to compile in Windows/UNICODE mode.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep 10 08:47:55 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 10 08:48:04 2008
Subject: [Harbour] 1.0 branch and MT
Message-ID: <BBA916AA-B163-4839-9A3D-B06CE8C17F9F@syenar.hu>

Hi Przemek,

If you want, pls go along with your MT changes in trunk.

Just send me a notice before you commit it, so that I
can sync 1.0 branch with the trunk before it. [ Well, if
I think about it, it's not a problem anyway, since I can
get any revisions with some minor additional work. ]

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Sep 10 11:02:32 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 10 11:02:40 2008
Subject: [Harbour] 1.0 branch and MT
In-Reply-To: <BBA916AA-B163-4839-9A3D-B06CE8C17F9F@syenar.hu>
References: <BBA916AA-B163-4839-9A3D-B06CE8C17F9F@syenar.hu>
Message-ID: <20080910150232.GA13526@34-mo7-2.acn.waw.pl>

On Wed, 10 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> If you want, pls go along with your MT changes in trunk.

Thanks.

> Just send me a notice before you commit it, so that I
> can sync 1.0 branch with the trunk before it. [ Well, if
> I think about it, it's not a problem anyway, since I can
> get any revisions with some minor additional work. ]

Fine. I'll create ChangeLog entry what have to take some
time (the patch has over 1MB and I want to describe some
platform/compiler dependent build rules) and I can commit.
Please do not make any modifications in core code for a day
or two. I will have to sync my local copy with current SVN
version and resolves all collisions.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Sep 10 11:15:14 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 10 11:15:22 2008
Subject: [Harbour] 1.0 branch and MT
In-Reply-To: <20080910150232.GA13526@34-mo7-2.acn.waw.pl>
References: <BBA916AA-B163-4839-9A3D-B06CE8C17F9F@syenar.hu>
	<20080910150232.GA13526@34-mo7-2.acn.waw.pl>
Message-ID: <F19DE83C-DC53-4DCE-A76F-574F099DB601@syenar.hu>

Hi Przemek,

On 2008.09.10., at 17:02, Przemyslaw Czerpak wrote:

> On Wed, 10 Sep 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> If you want, pls go along with your MT changes in trunk.
>
> Thanks.
>
>> Just send me a notice before you commit it, so that I
>> can sync 1.0 branch with the trunk before it. [ Well, if
>> I think about it, it's not a problem anyway, since I can
>> get any revisions with some minor additional work. ]
>
> Fine. I'll create ChangeLog entry what have to take some
> time (the patch has over 1MB and I want to describe some
> platform/compiler dependent build rules) and I can commit.
> Please do not make any modifications in core code for a day
> or two. I will have to sync my local copy with current SVN
> version and resolves all collisions.

Okay, I don't have anything pending now neither in core
or contrib, and I will stop any commit to trunk starting
now. I'll sync 1.0 with trunk in the meantime.

If you find any problems with the recent changes while
syncing your local repo, pls commit them separately, to
make it easier to sync those to 1.0.

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep 10 12:33:32 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 10 12:33:42 2008
Subject: [Harbour] [1.0] 2008-09-10 13:22 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c91362$Blat.v2.6.2$f6cb2140$16f48aff1fa6@127.0.0.1>

; Merging changes to 1.0 branch from trunk r9351.

2008-09-10 13:22 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * doc/whatsnew.txt
    + Updated.

  * contrib/hbw32/Makefile
  * contrib/hbw32/common.mak
  - contrib/hbw32/w32_prn.c
  + contrib/hbw32/win_prn1.c
  - contrib/hbw32/tprinter.c
  + contrib/hbw32/win_prn2.c
  - contrib/hbw32/dllcall.c
  + contrib/hbw32/win_dll.c
  - contrib/hbw32/w32_osc.c
  + contrib/hbw32/win_osc.c
  - contrib/hbw32/w32_ole.c
  + contrib/hbw32/win_ole.c
  - contrib/hbw32/w32_regc.c
  + contrib/hbw32/win_regc.c
  - contrib/hbw32/w32_os.prg
  + contrib/hbw32/win_os.prg
  - contrib/hbw32/w32_tole.prg
  + contrib/hbw32/win_tole.prg
  - contrib/hbw32/w32_reg.prg
  + contrib/hbw32/win_reg.prg
  - contrib/hbw32/w32_tprn.prg
  + contrib/hbw32/win_tprn.prg
    * Cleaned some 'w32'.

  * contrib/hbwhat/hbwhat.h
    ! Hack to disable UNICODE if enabled.
      hbwhat cannot currently be compiled in UNICODE mode.

  * contrib/hbwhat/wincorec.c
  * contrib/hbwhat/whtmisc.c
    % Made some internal functions static by moving them around.
    ! Removed TEXT( <function_call> ) type of syntax.

  * contrib/hbodbc/odbc.c
    ! MSVC warning fixed in the UNICODE path.

  * contrib/hbnf/getenvrn.c
    ! Fixed to compile in Windows/UNICODE mode.

2008-09-10 09:46 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * doc/whatsnew.txt
    + Updated.

  * contrib/Makefile
  * contrib/make_b32_all.bat
  * contrib/make_gcc_all.sh
  * contrib/make_vc_all.bat
  - contrib/hbwhat32
  + contrib/hbwhat
    * Renamed to not contain '32'.
      INCOMPATIBLE.
    ; NOTE: I plan to do this with a couple of other 
            names too in the future.

  * contrib/hbwhat/Makefile
  * contrib/hbwhat/common.mak
  - contrib/hbwhat/what32.ch
  + contrib/hbwhat/hbwhat.ch
    * Renamed what32.ch to not contain '32' (and added 
      hb for consistency if it got renamed anyway).
      INCOMPATIBLE.

  * utils/hbmake/hbmake.prg
    * Updated by Bill Robertson to fix too many things to 
      mention here. (cleaned up lots of stuff, using hb_run()s 
      return values, cleaned to not call main() function 
      recursively (!), display output cleanups, etcetc)
    * hbwhat32, hbziparch lib name changes.

  * contrib/examples/pp/hbppcore.c
  * contrib/examples/pp/hbppcomp.c
  * contrib/rddads/ads1.c
  * source/pp/ppcore.c
  * source/vm/asort.c
  * source/vm/hvm.c
  * source/rtl/disksphb.c
  * source/rdd/dbfntx/dbfntx1.c
  * source/rdd/workarea.c
  * contrib/hbct/screen2.c
  * contrib/hbct/token2.c
    * while( TRUE ) -> for( ;; )
    * do {} while( TRUE ) -> for( ;; ) {}
    ; To avoid warnings about conditions being constant.

2008-09-09 21:54 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbwhat32/hbwhat.h
  * contrib/hbwhat32/whtcall.c
  * contrib/hbwhat32/whtclpb.c
  * contrib/hbwhat32/whtcomm.c
  * contrib/hbwhat32/whtdll.c
  * contrib/hbwhat32/whtgdi.c
  * contrib/hbwhat32/whtilst.c
  * contrib/hbwhat32/whtinet.c
  * contrib/hbwhat32/whtini.c
  * contrib/hbwhat32/whtmisc.c
  * contrib/hbwhat32/whtmmcap.c
  * contrib/hbwhat32/whtmsg.c
  * contrib/hbwhat32/whtsock.c
  * contrib/hbwhat32/whtsys.c
  * contrib/hbwhat32/whttab.c
  * contrib/hbwhat32/whttree.c
  * contrib/hbwhat32/whtwnd.c
  * contrib/hbwhat32/wincorec.c
    ! Fixed remaining 64-bit problems.
    ! Fixed to work as before, using numbers for pointers.
    ! Fixed bugs in these internet related functions:
      INTERNETREADFILE(), INTERNETWRITEFILE()
    ; NOTE: Number of warnings went down from somewhere well 
            above a thousand to just a few ones, mostly common 
            in other parts of Harbour. If someone could help to 
            clear these remains, it'd be great.
            Tested with MSVS2008 -W4 64/32-bit modes, BCC 5.8, 
            MinGW 4.31.
    ; NOTE: I didn't do any real-life tests. Pls do if you're 
            interested or you're using this contrib.
    ; NOTE: Remaining warnings:
            - MSVS 2008 -W4 64-bit:
              wincorec.c(689) : warning C4244: 'argument' : conversion from 'HB_PTRDIFF' to 'ULONG', possible loss of data
              whtclpb.c(208) : warning C4244: 'argument' : conversion from 'SIZE_T' to 'ULONG', possible loss of data
              whtdll.c(298) : warning C4311: 'type cast' : pointer truncation from 'LPSTR' to 'DWORD'
              whtdll.c(299) : warning C4311: 'type cast' : pointer truncation from 'char *' to 'DWORD'
              whtdll.c(306) : warning C4311: 'type cast' : pointer truncation from 'char *' to 'DWORD'
              whtlv.c(84) : warning C4267: 'argument' : conversion from 'size_t' to 'ULONG', possible loss of data
              whtlv.c(109) : warning C4267: 'argument' : conversion from 'size_t' to 'ULONG', possible loss of data
              whtmem.c(243) : warning C4244: 'argument' : conversion from 'SIZE_T' to 'int', possible loss of data
              whtmem.c(270) : warning C4244: 'argument' : conversion from 'SIZE_T' to 'int', possible loss of data
              whtmem.c(279) : warning C4244: 'argument' : conversion from 'SIZE_T' to 'int', possible loss of data
              whtreg.c(171) : warning C4267: 'argument' : conversion from 'size_t' to 'DWORD', possible loss of data
              whtshell.c(34) : warning C4267: 'argument' : conversion from 'size_t' to 'ULONG', possible loss of data
              whtsys.c(1093) : warning C4244: 'argument' : conversion from 'SIZE_T' to 'int', possible loss of data
              whttext.c(127) : warning C4267: 'argument' : conversion from 'size_t' to 'int', possible loss of data
              whttext.c(154) : warning C4267: 'argument' : conversion from 'size_t' to 'int', possible loss of data
              whttext.c(190) : warning C4267: 'argument' : conversion from 'size_t' to 'int', possible loss of data
              whttext.c(246) : warning C4267: 'argument' : conversion from 'size_t' to 'int', possible loss of data
              whttext.c(299) : warning C4267: 'argument' : conversion from 'size_t' to 'int', possible loss of data

            - MSVS 2008 -W4 32-bit:
              wincorec.c(434) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(438) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(442) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(446) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(450) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(454) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(458) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(462) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(466) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(470) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(486) : warning C4152: nonstandard extension, function/data pointer conversion in expression
              wincorec.c(529) : warning C4055: 'type cast' : from data pointer 'void *' to function pointer 'DLGPROC'
              wincorec.c(543) : warning C4055: 'type cast' : from data pointer 'void *' to function pointer 'DLGPROC'
              wincorec.c(556) : warning C4055: 'type cast' : from data pointer 'void *' to function pointer 'DLGPROC'
              wincorec.c(569) : warning C4055: 'type cast' : from data pointer 'void *' to function pointer 'DLGPROC'
              whtsys.c(316) : warning C4055: 'type cast' : from data pointer 'void *' to function pointer 'TIMERPROC'
              whtwnd.c(197) : warning C4055: 'type cast' : from data pointer 'void *' to function pointer 'WNDPROC'

            - MinGW 4.31 32-bit:
              wincorec.c:94: warning: signed and unsigned type in conditional expression
              wincorec.c:95: warning: signed and unsigned type in conditional expression
              wincorec.c:96: warning: signed and unsigned type in conditional expression
              wincorec.c:97: warning: signed and unsigned type in conditional expression
              wincorec.c:119: warning: signed and unsigned type in conditional expression
              wincorec.c:120: warning: signed and unsigned type in conditional expression
              wincorec.c:121: warning: signed and unsigned type in conditional expression
              wincorec.c:122: warning: signed and unsigned type in conditional expression
              whtcdlg.c:180: warning: signed and unsigned type in conditional expression
              whtdate.c:61: warning: passing argument 1 of 'hb_retptr' makes pointer from integer without a cast
              whtdlg.c:169: warning: signed and unsigned type in conditional expression
              whtmisc.c:95: warning: signed and unsigned type in conditional expression
              whtmisc.c:349: warning: signed and unsigned type in conditional expression
              whtseria.c:343: warning: signed and unsigned type in conditional expression
              whtsock.c:43: warning: signed and unsigned type in conditional expression
              whtsock.c:108: warning: signed and unsigned type in conditional expression
              whtsock.c:124: warning: signed and unsigned type in conditional expression
              whtsock.c:226: warning: signed and unsigned type in conditional expression
              whtsock.c:246: warning: signed and unsigned type in conditional expression
              whtsock.c:249: warning: signed and unsigned type in conditional expression
              whtsock.c:318: warning: signed and unsigned type in conditional expression
              whtsock.c:331: warning: signed and unsigned type in conditional expression
              whtsock.c:338: warning: signed and unsigned type in conditional expression
              whtsys.c:1091: warning: comparison between signed and unsigned

2008-09-09 13:14 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbwhat32/whthead.c
  * contrib/hbwhat32/whtmmcap.c
  * contrib/hbwhat32/whtshell.c
  * contrib/hbwhat32/whtdir.c
    ! Fixed a few problems when compiling with MinGW.

  * contrib/Makefile
  * contrib/make_b32_all.bat
  * contrib/make_gcc_all.sh
  * contrib/make_vc_all.bat
    + Readded hbwhat32 to default build lists.
    ; This doesn't mean this lib works, but the amount of 
      warnings are now on a manageable level on both 32 and 
      64 bit on BCC/MSVC/MINGW, we can gradually fix the 
      remaining ones, and maybe if we have this lib 
      built, someone will try to use it and maybe fix it.
      [ We may temply as well disable it again, if it turns 
      out to be a showstopper for 1.0.1 release. ]
    ; If there is anything against the above, I'd suggest 
      to remove the whole contrib altogether.

2008-09-09 12:37 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/debug/dbgentry.c
    ! Fixed recent typo. Thanks Lorenzo.

2008-09-09 11:50 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/mtpl_b32.mak
  * contrib/mtpl_gcc.mak
  * contrib/mtpl_vc.mak
    ! Some more fine tuning.

2008-09-09 11:47 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/asort.c
    ! fixed GPF when user sort code block reduces the size of sorted array

2008-09-09 11:34 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbct/numconv.prg
    ! Fixed typo. Thanks to Grigory Filatov for reporting it.

2008-09-09 11:32 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  + contrib/hbwhat32/hbwhat.h
  * contrib/hbwhat32/whtbmp.c
  * contrib/hbwhat32/whtbrsh.c
  * contrib/hbwhat32/whtcall.c
  * contrib/hbwhat32/whtcdlg.c
  * contrib/hbwhat32/whtclpb.c
  * contrib/hbwhat32/whtcomm.c
  * contrib/hbwhat32/whtcret.c
  * contrib/hbwhat32/whtdate.c
  * contrib/hbwhat32/whtdc.c
  * contrib/hbwhat32/whtdir.c
  * contrib/hbwhat32/whtdlg.c
  * contrib/hbwhat32/whtdll.c
  * contrib/hbwhat32/whtdraw.c
  * contrib/hbwhat32/whtfont.c
  * contrib/hbwhat32/whtgdi.c
  * contrib/hbwhat32/whthead.c
  * contrib/hbwhat32/whticon.c
  * contrib/hbwhat32/whtilst.c
  * contrib/hbwhat32/whtinet.c
  * contrib/hbwhat32/whtini.c
  * contrib/hbwhat32/whtkbrd.c
  * contrib/hbwhat32/whtlv.c
  * contrib/hbwhat32/whtmain.c
  * contrib/hbwhat32/whtmapi.c
  * contrib/hbwhat32/whtmem.c
  * contrib/hbwhat32/whtmenu.c
  * contrib/hbwhat32/whtmeta.c
  * contrib/hbwhat32/whtmisc.c
  * contrib/hbwhat32/whtmmcap.c
  * contrib/hbwhat32/whtmous.c
  * contrib/hbwhat32/whtmsg.c
  * contrib/hbwhat32/whtpen.c
  * contrib/hbwhat32/whtprn.c
  * contrib/hbwhat32/whtrect.c
  * contrib/hbwhat32/whtreg.c
  * contrib/hbwhat32/whtrgn.c
  * contrib/hbwhat32/whtscrlb.c
  * contrib/hbwhat32/whtseria.c
  * contrib/hbwhat32/whtshell.c
  * contrib/hbwhat32/whtsock.c
  * contrib/hbwhat32/whtsys.c
  * contrib/hbwhat32/whttab.c
  * contrib/hbwhat32/whttbar.c
  * contrib/hbwhat32/whttext.c
  * contrib/hbwhat32/whttree.c
  * contrib/hbwhat32/whtview.c
  * contrib/hbwhat32/whtwnd.c
  * contrib/hbwhat32/wincorec.c
    ! Changed pointer related hb_ret, hb_par and hb_stor calls 
      to ptr versions. This might create incompatibilities and 
      since there is no test package for this lib, it's difficult 
      to test if it works. I relied on MSVC warnings.
    ; There are still some calls to change. One other problem is 
      there is no public equivalent of hb_vmPushLong() for pointers, 
      so these VM specific parts should be changed to use some more 
      official Harbour APIs.

2008-09-09 09:33 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/mtpl_b32.mak
  * contrib/mtpl_vc.mak
    * Minor adjustment to previous change (to not display the 
      obj dir creation for each command.)

  * contrib/hbwhat32/whtdll.c
  * contrib/hbwhat32/wincorec.c
  * contrib/hbwhat32/whtsock.c
  * contrib/hbwhat32/whtcall.c
  * contrib/hbwhat32/whtclpb.c
  * contrib/hbwhat32/whtmapi.c
  * contrib/hbwhat32/whtdlg.c
  * contrib/hbwhat32/whtwnd.c
  * contrib/hbwhat32/whtmisc.c
  * contrib/hbwhat32/whtinet.c
    ! Fixed MSVS 2008 -W4 warnings.

  * bin/bld.bat
    * Some further updates.

2008-09-08 22:49 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * bin/bld.bat
    * Some changes to make it more up-to-date. 

  * utils/hbtest/hbtest.prg
  * utils/hbtest/rt_array.prg
    + Added comment to 'TAEVSM' test case saying this is 
      a CA-Cl*pper bug.
    + Added two additional tests doing resizes in ASORT() 
      blocks. They fail very badly in Harbour. (TOFIX)

  ; Made my indenting of ChangeLog entries compatible with 
    everyone else's.

2008-09-08 21:37 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/hashes.c
    ! fixed typo in hash cloning code which caused that references
      was copied to cloned array. Thanks to Mindaugas for example.

2008-09-08 13:59 UTC-0500 Teo Fonrouge (teo/at/windtelsoft/dot/com)
  * include/hbclass.ch
    ! added missing MESSAGE <MessageName> TO <oObject>
      ; this also fixes DELEGATE command

2008-09-08 13:01 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/mtpl_b32.mak
   * contrib/mtpl_vc.mak
   * contrib/mtpl_gcc.mak
     * Changed the location of intermediate obj and c files from 
       /obj/<arch>/ to local [/contrib/<contribname>/]obj/<arch>/
       dir so that similar filenames across different contribs 
       would never interfere with each other anymore when using 
       non-GNU make. This was a difficult to detect problem, 
       especially when someone is trying to use custom contribs, 
       and even more so if these custom contribs happen to have 
       3rd party code with non Harbour controlled filenames. This 
       change is also an important last step to make contribs 
       fully self-containing.
     ; TODO: mtpl_gcc.mak support has to be finished by someone 
             familiar with bash.
     ; NOTE: This change shouldn't go to 1.0.1 until well tested 
             and reviewed.
     ; NOTE: As a consequence of the above, from now on a 
             'make_*.bat clean' won't anymore clean the objects/.c
             files of all contribs. If you hadn't do so so far, now 
             you'll need to explicitly call 'contrib/make_*.all.bat clean' 
             to do that.

   * contrib/mtpl_gcc.mak
   * make_gcc.mak
     % HB_ARCHITECTURE hack from cyg to w32 removed, 
       as cyg is not a valid public architecture name 
       in Harbour. cyg is used in make_gcc.sh internally, and 
       it's automatically converted to w32 before using 
       make_gcc.mak, so it would seem that this is solved 
       at the right place already, and the hack is not needed.
--
Brgds,
Viktor

From m.renzi at maticasrl.it  Wed Sep 10 13:23:16 2008
From: m.renzi at maticasrl.it (Massimo Renzi (Matica Srl))
Date: Wed Sep 10 13:23:13 2008
Subject: [Harbour] Suggestion for harbour web site?
In-Reply-To: <200809100739.26988.tomaz.zupan@orpo.si>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com>
	<200809100739.26988.tomaz.zupan@orpo.si>
Message-ID: <48C80284.5090308@maticasrl.it>

wonderfull
;)
maxsoft

Toma? Zupan ha scritto:
> On Wednesday 10 September 2008 05:07:14 Vailton Renato wrote:
>   
>> Hello to all!
>>
>> I would like to help the project suggesting a simple model for the new
>> site. I work with harbour to 4 years and would be happy if I could give my
>> suggestion.
>>
>> Please see: http://kssoftware.com.br/harbour/
>> Renato Silva
>>     
>
> Nice!
>
> LP, Toma?
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>   

From mbelgrano at deltain.it  Wed Sep 10 13:27:13 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Sep 10 13:27:24 2008
Subject: [Harbour] Suggestion for harbour web site?
In-Reply-To: <48C80284.5090308@maticasrl.it>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com><200809100739.26988.tomaz.zupan@orpo.si>
	<48C80284.5090308@maticasrl.it>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF6A@SRV02.deltain.net>

I agree 
good


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Massimo Renzi (Matica Srl)
Sent: Wednesday, September 10, 2008 7:23 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Suggestion for harbour web site?

wonderfull
;)
maxsoft

Toma? Zupan ha scritto:
> On Wednesday 10 September 2008 05:07:14 Vailton Renato wrote:
>   
>> Hello to all!
>>
>> I would like to help the project suggesting a simple model for the new
>> site. I work with harbour to 4 years and would be happy if I could give my
>> suggestion.
>>
>> Please see: http://kssoftware.com.br/harbour/
>> Renato Silva
>>     
>
> Nice!
>
> LP, Toma?
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>   

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Wed Sep 10 13:34:26 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Sep 10 13:34:34 2008
Subject: [Harbour] Suggestion for harbour web site?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF6A@SRV02.deltain.net>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com><200809100739.26988.tomaz.zupan@orpo.si><48C80284.5090308@maticasrl.it>
	<AFB948164110ED43B5EB849E8DEEF03815EF6A@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF6B@SRV02.deltain.net>

But imo we need a look like http://turbogears.org


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Massimo Belgrano
Sent: Wednesday, September 10, 2008 7:27 PM
To: Harbour Project Main Developer List.
Subject: RE: [Harbour] Suggestion for harbour web site?

I agree 
good


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Massimo Renzi (Matica Srl)
Sent: Wednesday, September 10, 2008 7:23 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Suggestion for harbour web site?

wonderfull
;)
maxsoft

Toma? Zupan ha scritto:
> On Wednesday 10 September 2008 05:07:14 Vailton Renato wrote:
>   
>> Hello to all!
>>
>> I would like to help the project suggesting a simple model for the new
>> site. I work with harbour to 4 years and would be happy if I could give my
>> suggestion.
>>
>> Please see: http://kssoftware.com.br/harbour/
>> Renato Silva
>>     
>
> Nice!
>
> LP, Toma?
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>   

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From vailtom at gmail.com  Wed Sep 10 23:12:32 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Wed Sep 10 23:12:38 2008
Subject: [Harbour] Suggestion for harbour web site?
Message-ID: <531d7a750809102012u4e5dfb2ep2c449b3eb44a6004@mail.gmail.com>

Hi all!

I wrote another 5 different layouts based on the proposed site. To use
a blue background, the logo of the project does not help much.
Please see: http://kssoftware.com.br/harbour/

Let's look at the suggestions.
Renato Silva

Sorry, my english is bad.
From lkrausem at shaw.ca  Thu Sep 11 00:46:09 2008
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Thu Sep 11 00:46:19 2008
Subject: [Harbour] Suggestion for harbour web site?
In-Reply-To: <531d7a750809102012u4e5dfb2ep2c449b3eb44a6004@mail.gmail.com>
References: <531d7a750809102012u4e5dfb2ep2c449b3eb44a6004@mail.gmail.com>
Message-ID: <48C8A291.8010906@shaw.ca>

Vailton:

Nice work.  I like Layout 2.  The blue background sits really well.
Hey, it would be cool to have the person browsing choose which
skin he/she likes best!

Regards,

Vailton Renato wrote:
> Hi all!
>
> I wrote another 5 different layouts based on the proposed site. To use
> a blue background, the logo of the project does not help much.
> Please see: http://kssoftware.com.br/harbour/
>
> Let's look at the suggestions.
> Renato Silva
>
> Sorry, my english is bad.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>   

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From philb at philb.us  Thu Sep 11 02:54:32 2008
From: philb at philb.us (Phil Barnett)
Date: Thu Sep 11 02:54:33 2008
Subject: [Harbour] Suggestion for harbour web site?
In-Reply-To: <200809100958.50184.a.jurkiewicz@abix.info.pl>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com>
	<200809100958.50184.a.jurkiewicz@abix.info.pl>
Message-ID: <200809110254.32864.philb@philb.us>

On Wednesday 10 September 2008 03:58:50 am ABIX - Adam Jurkiewicz wrote:
> Maybe we can use it to create new Harbour
> Home Page?

No CMS. Static Pages.

People using CMS's on web sites are making it easy for the bad guys to hijack 
and proliferate spam and illegal software. I'm not going to participate.

How would you all like it if some government somewhere came down on our 
project for distributing kiddie porn? It has happened before.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From mbelgrano at deltain.it  Wed Sep 10 05:10:10 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Sep 11 02:55:39 2008
Subject: [Harbour] Suggestion for harbour web site?
In-Reply-To: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF5F@SRV02.deltain.net>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 6200 bytes
Desc: image001.gif
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080910/88877b57/attachment-0001.gif
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/png
Size: 144423 bytes
Desc: image002.png
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080910/88877b57/attachment-0001.png
From philb at philb.us  Thu Sep 11 03:13:12 2008
From: philb at philb.us (Phil Barnett)
Date: Thu Sep 11 03:13:14 2008
Subject: [Harbour] Suggestion for harbour web site?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF5F@SRV02.deltain.net>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03815EF5F@SRV02.deltain.net>
Message-ID: <200809110313.12957.philb@philb.us>

On Wednesday 10 September 2008 05:10:10 am Massimo Belgrano wrote:
> We need also a cms lite multiplatform and who not require database
>
> Please post any Suggestion

As the project manager, I must insist... Static pages only. NO CMS. No dynamic 
pages. You cannot guarantee that the CMS or CGI or dynamic content you want 
to use is absolutely invulnerable. And therefore, it will not live on my 
server.

We have been over this several times.

We will be using static web pages. Use a web page editor or write them by 
hand. We suggested one that many agreed with and not a single person 
dissented. So, start using it and see what you can create. I hate to put a 
damper on your passions, but you appear to not be listening.

Please, go download NVU and start using it.

Here is the previous message that I wrote to the mailing list.

**************************************************

On Wednesday 27 August 2008 10:05:01 am Massimo Belgrano wrote:
> I propose rewritring from scratch web site, Removing from new structure
> Sample app,Documentation,sample apps Redefined simple menu
> Download/Community/News/Harbour word
>
> Is can use as model:
> http://www.web20generator.com/generated.aspx?l=66FF00&b=0099FF&g=FFFF66&n=H
>arbour

I really don't care much for html generators when it's so easy to write from 
scratch and have virtually no vulnerabilities. And frameworks that make it 
easy for you to create a web site make it easy for other people to compromise 
my server.

Every single compromise on my server in the last 10 years has come from some 
stupid web framework or idiotic web cgi script.

Come on. html is simple to write. Do you use a code generator for Harbour? The 
Harbour language is a hundred times more complex than html.

If we are going to settle on a html code generator, I want it to be open 
source and GPL so anyone can install it. There are an abundance of those, so 
pick one. And no frameworks, like Mambo or PHPBB or Joomla. Those are the 
worst for being compromised.

> I also suggest Using Perspective As wiki who not require database so is
> good for hosting with good editing capability http://www.high-beyond.com/
> or web can choice other from http://www.wikimatrix.org/

Perspective requires the .net runtime. This assumes a windows server. My 
server is running Linux

Also, MediaWiki requires PHP 5.x and currently this server is stuck at PHP 4.3 
due to a customer requirement.

If anyone wants to host the wiki, I can easily point a dns entry to it. i 
agree with Viktor that MediaWiki is an excellent choice.

In the mean time, when I gave you the keys to our web site, I created a 
complete backup of it, so feel free to wipe it out and start over. We can 
always get back to where we came from as a last resort.

But first, unless you agree to code html from scratch, we need to agree on a 
html generator. I like this one a lot. It's free, open source and it's 
wysiwyg. No framework. Works on Linux, Windows and Macintosh. Well supported.

http://www.nvudev.com/index.php

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From a.jurkiewicz at abix.info.pl  Thu Sep 11 03:47:30 2008
From: a.jurkiewicz at abix.info.pl (ABIX - Adam Jurkiewicz)
Date: Thu Sep 11 03:47:39 2008
Subject: [Harbour] Suggestion for harbour web site?
In-Reply-To: <531d7a750809102012u4e5dfb2ep2c449b3eb44a6004@mail.gmail.com>
References: <531d7a750809102012u4e5dfb2ep2c449b3eb44a6004@mail.gmail.com>
Message-ID: <200809110947.31311.a.jurkiewicz@abix.info.pl>

Dnia czwartek, 11 wrze?nia 2008, Vailton Renato napisa?:
>
> Let's look at the suggestions.
I vote for layout 2 - it's very cool and new ship stands as new technology ;-)

Best regards,
Adam
-- 
ABIX - Linuksowe Systemy Wspomagania Biznesu www.abix.info.pl
Gadu-Gadu: 302315
Skype: abix_adamj 
Wsparcie aplikacji: http://groups-beta.google.com/group/abix-rcsoft?hl=pl
From mbelgrano at deltain.it  Thu Sep 11 03:47:23 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Sep 11 03:47:42 2008
Subject: R: [Harbour] Suggestion for harbour web site?
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com><AFB948164110ED43B5EB849E8DEEF03815EF5F@SRV02.deltain.net>
	<200809110313.12957.philb@philb.us>
Message-ID: <AFB948164110ED43B5EB849E8DEEF038037600@SRV02.deltain.net>

Your aproach seem very old
We can host out of your website  the cms
Imo harbour today need a cms to start a collaborative works that can't be done downloading nvu

 
________________________________

Da: harbour-bounces@harbour-project.org per conto di Phil Barnett
Inviato: gio 11/09/2008 9.13
A: harbour@harbour-project.org
Oggetto: Re: [Harbour] Suggestion for harbour web site?



On Wednesday 10 September 2008 05:10:10 am Massimo Belgrano wrote:
> We need also a cms lite multiplatform and who not require database
>
> Please post any Suggestion

As the project manager, I must insist... Static pages only. NO CMS. No dynamic
pages. You cannot guarantee that the CMS or CGI or dynamic content you want
to use is absolutely invulnerable. And therefore, it will not live on my
server.

We have been over this several times.

We will be using static web pages. Use a web page editor or write them by
hand. We suggested one that many agreed with and not a single person
dissented. So, start using it and see what you can create. I hate to put a
damper on your passions, but you appear to not be listening.

Please, go download NVU and start using it.

Here is the previous message that I wrote to the mailing list.

**************************************************

On Wednesday 27 August 2008 10:05:01 am Massimo Belgrano wrote:
> I propose rewritring from scratch web site, Removing from new structure
> Sample app,Documentation,sample apps Redefined simple menu
> Download/Community/News/Harbour word
>
> Is can use as model:
> http://www.web20generator.com/generated.aspx?l=66FF00&b=0099FF&g=FFFF66&n=H
>arbour

I really don't care much for html generators when it's so easy to write from
scratch and have virtually no vulnerabilities. And frameworks that make it
easy for you to create a web site make it easy for other people to compromise
my server.

Every single compromise on my server in the last 10 years has come from some
stupid web framework or idiotic web cgi script.

Come on. html is simple to write. Do you use a code generator for Harbour? The
Harbour language is a hundred times more complex than html.

If we are going to settle on a html code generator, I want it to be open
source and GPL so anyone can install it. There are an abundance of those, so
pick one. And no frameworks, like Mambo or PHPBB or Joomla. Those are the
worst for being compromised.

> I also suggest Using Perspective As wiki who not require database so is
> good for hosting with good editing capability http://www.high-beyond.com/
> or web can choice other from http://www.wikimatrix.org/

Perspective requires the .net runtime. This assumes a windows server. My
server is running Linux

Also, MediaWiki requires PHP 5.x and currently this server is stuck at PHP 4.3
due to a customer requirement.

If anyone wants to host the wiki, I can easily point a dns entry to it. i
agree with Viktor that MediaWiki is an excellent choice.

In the mean time, when I gave you the keys to our web site, I created a
complete backup of it, so feel free to wipe it out and start over. We can
always get back to where we came from as a last resort.

But first, unless you agree to code html from scratch, we need to agree on a
html generator. I like this one a lot. It's free, open source and it's
wysiwyg. No framework. Works on Linux, Windows and Macintosh. Well supported.

http://www.nvudev.com/index.php

--
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry
Kissinger
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour


-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 6314 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080911/a643dead/attachment.bin
From mbelgrano at deltain.it  Thu Sep 11 03:50:50 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Sep 11 03:52:42 2008
Subject: R: [Harbour] Suggestion for harbour web site?
References: <531d7a750809102012u4e5dfb2ep2c449b3eb44a6004@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF038037601@SRV02.deltain.net>

i vote for layour 4
if possible i suggest add orange color
Thanks
 
 

________________________________

Da: harbour-bounces@harbour-project.org per conto di Vailton Renato
Inviato: gio 11/09/2008 5.12
A: harbour@harbour-project.org
Oggetto: [Harbour] Suggestion for harbour web site?



Hi all!

I wrote another 5 different layouts based on the proposed site. To use
a blue background, the logo of the project does not help much.
Please see: http://kssoftware.com.br/harbour/

Let's look at the suggestions.
Renato Silva

Sorry, my english is bad.
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour


-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 4034 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080911/497907fb/attachment-0001.bin
From mbelgrano at deltain.it  Thu Sep 11 03:59:33 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Sep 11 04:00:21 2008
Subject: R: [Harbour] Suggestion for harbour web site?
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com><AFB948164110ED43B5EB849E8DEEF03815EF5F@SRV02.deltain.net>
	<200809110313.12957.philb@philb.us>
Message-ID: <AFB948164110ED43B5EB849E8DEEF038037602@SRV02.deltain.net>

Wich web2.0 tecnologies you love?

________________________________

Da: harbour-bounces@harbour-project.org per conto di Phil Barnett
Inviato: gio 11/09/2008 9.13
A: harbour@harbour-project.org
Oggetto: Re: [Harbour] Suggestion for harbour web site?



On Wednesday 10 September 2008 05:10:10 am Massimo Belgrano wrote:
> We need also a cms lite multiplatform and who not require database
>
> Please post any Suggestion

As the project manager, I must insist... Static pages only. NO CMS. No dynamic
pages. You cannot guarantee that the CMS or CGI or dynamic content you want
to use is absolutely invulnerable. And therefore, it will not live on my
server.

We have been over this several times.

We will be using static web pages. Use a web page editor or write them by
hand. We suggested one that many agreed with and not a single person
dissented. So, start using it and see what you can create. I hate to put a
damper on your passions, but you appear to not be listening.

Please, go download NVU and start using it.

Here is the previous message that I wrote to the mailing list.

**************************************************

On Wednesday 27 August 2008 10:05:01 am Massimo Belgrano wrote:
> I propose rewritring from scratch web site, Removing from new structure
> Sample app,Documentation,sample apps Redefined simple menu
> Download/Community/News/Harbour word
>
> Is can use as model:
> http://www.web20generator.com/generated.aspx?l=66FF00&b=0099FF&g=FFFF66&n=H
>arbour

I really don't care much for html generators when it's so easy to write from
scratch and have virtually no vulnerabilities. And frameworks that make it
easy for you to create a web site make it easy for other people to compromise
my server.

Every single compromise on my server in the last 10 years has come from some
stupid web framework or idiotic web cgi script.

Come on. html is simple to write. Do you use a code generator for Harbour? The
Harbour language is a hundred times more complex than html.

If we are going to settle on a html code generator, I want it to be open
source and GPL so anyone can install it. There are an abundance of those, so
pick one. And no frameworks, like Mambo or PHPBB or Joomla. Those are the
worst for being compromised.

> I also suggest Using Perspective As wiki who not require database so is
> good for hosting with good editing capability http://www.high-beyond.com/
> or web can choice other from http://www.wikimatrix.org/

Perspective requires the .net runtime. This assumes a windows server. My
server is running Linux

Also, MediaWiki requires PHP 5.x and currently this server is stuck at PHP 4.3
due to a customer requirement.

If anyone wants to host the wiki, I can easily point a dns entry to it. i
agree with Viktor that MediaWiki is an excellent choice.

In the mean time, when I gave you the keys to our web site, I created a
complete backup of it, so feel free to wipe it out and start over. We can
always get back to where we came from as a last resort.

But first, unless you agree to code html from scratch, we need to agree on a
html generator. I like this one a lot. It's free, open source and it's
wysiwyg. No framework. Works on Linux, Windows and Macintosh. Well supported.

http://www.nvudev.com/index.php

--
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry
Kissinger
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour


-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 6134 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080911/4c2faaf7/attachment.bin
From guy.roussin at teledetection.fr  Thu Sep 11 04:13:37 2008
From: guy.roussin at teledetection.fr (guy.roussin@teledetection.fr)
Date: Thu Sep 11 04:13:49 2008
Subject: [Harbour] Incorrect behavior with hbrun and gtxxx
Message-ID: <48C8D331.3030804@teledetection.fr>

Hello,

$ cat t.prg
#!/usr/bin/hbrun //gtcgi
proc main
? OS(), VERSION(), DATE(), TIME()
? HB_GTVERSION(), HB_GTVERSION(1)
quit

$ ./t.prg
Linux 2.6.18-6-amd64 x86_64 Harbour 1.0.1dev Intl. (Rev. 9344) 09/11/08 
10:07:35
TRM Harbour terminal driver

I think the correct behavior is to use the CGI terminal driver
because of the first line of the code ?

See in Changelog :
2007-04-11 22:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  ...
  * harbour/utils/hbrun/hbrun.prg
    + added support for compilation and direct execution of .prg files
      Now hbrun can accept as first parameter .hrb or .prg file and if
      it's .prg file it's compiled and then executed just like .hrb one.
      In *nixes if you copy compiled hbrun to /usr/bin directory then
      you can add to your .prg files as first line:
         #!/usr/bin/hbrun
      and then after setting executable attribute you can directly
      execute them, f.e.:
         ./test.prg
      If you are using Linux then you can also chose default gt driver
      by dding to above line: //gt<name>
      F.e.
         #!/usr/bin/hbrun //gtstd

Thank you.

Guy
From harbour.01 at syenar.hu  Thu Sep 11 05:00:08 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 11 05:00:24 2008
Subject: R: [Harbour] Suggestion for harbour web site?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF038037600@SRV02.deltain.net>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com><AFB948164110ED43B5EB849E8DEEF03815EF5F@SRV02.deltain.net>
	<200809110313.12957.philb@philb.us>
	<AFB948164110ED43B5EB849E8DEEF038037600@SRV02.deltain.net>
Message-ID: <36592B5E-98D5-47F1-A568-28214AE41A9F@syenar.hu>

> Your aproach seem very old
> We can host out of your website  the cms
> Imo harbour today need a cms to start a collaborative works that  
> can't be done downloading nvu

I vote for no CMS, "web 2.0", or other unnecessary heavy
tools for our webpages. What we need is a very simple
structure, _done_ and done right and light.

The ultimate collaborative type of solution would be a wiki,
but that's out of our choices at this moment.

Brgds,
Viktor


>
>
>
> ________________________________
>
> Da: harbour-bounces@harbour-project.org per conto di Phil Barnett
> Inviato: gio 11/09/2008 9.13
> A: harbour@harbour-project.org
> Oggetto: Re: [Harbour] Suggestion for harbour web site?
>
>
>
> On Wednesday 10 September 2008 05:10:10 am Massimo Belgrano wrote:
>> We need also a cms lite multiplatform and who not require database
>>
>> Please post any Suggestion
>
> As the project manager, I must insist... Static pages only. NO CMS.  
> No dynamic
> pages. You cannot guarantee that the CMS or CGI or dynamic content  
> you want
> to use is absolutely invulnerable. And therefore, it will not live  
> on my
> server.
>
> We have been over this several times.
>
> We will be using static web pages. Use a web page editor or write  
> them by
> hand. We suggested one that many agreed with and not a single person
> dissented. So, start using it and see what you can create. I hate to  
> put a
> damper on your passions, but you appear to not be listening.
>
> Please, go download NVU and start using it.
>
> Here is the previous message that I wrote to the mailing list.
>
> **************************************************
>
> On Wednesday 27 August 2008 10:05:01 am Massimo Belgrano wrote:
>> I propose rewritring from scratch web site, Removing from new  
>> structure
>> Sample app,Documentation,sample apps Redefined simple menu
>> Download/Community/News/Harbour word
>>
>> Is can use as model:
>> http://www.web20generator.com/generated.aspx?l=66FF00&b=0099FF&g=FFFF66&n=H
>> arbour
>
> I really don't care much for html generators when it's so easy to  
> write from
> scratch and have virtually no vulnerabilities. And frameworks that  
> make it
> easy for you to create a web site make it easy for other people to  
> compromise
> my server.
>
> Every single compromise on my server in the last 10 years has come  
> from some
> stupid web framework or idiotic web cgi script.
>
> Come on. html is simple to write. Do you use a code generator for  
> Harbour? The
> Harbour language is a hundred times more complex than html.
>
> If we are going to settle on a html code generator, I want it to be  
> open
> source and GPL so anyone can install it. There are an abundance of  
> those, so
> pick one. And no frameworks, like Mambo or PHPBB or Joomla. Those  
> are the
> worst for being compromised.
>
>> I also suggest Using Perspective As wiki who not require database  
>> so is
>> good for hosting with good editing capability http://www.high-beyond.com/
>> or web can choice other from http://www.wikimatrix.org/
>
> Perspective requires the .net runtime. This assumes a windows  
> server. My
> server is running Linux
>
> Also, MediaWiki requires PHP 5.x and currently this server is stuck  
> at PHP 4.3
> due to a customer requirement.
>
> If anyone wants to host the wiki, I can easily point a dns entry to  
> it. i
> agree with Viktor that MediaWiki is an excellent choice.
>
> In the mean time, when I gave you the keys to our web site, I  
> created a
> complete backup of it, so feel free to wipe it out and start over.  
> We can
> always get back to where we came from as a last resort.
>
> But first, unless you agree to code html from scratch, we need to  
> agree on a
> html generator. I like this one a lot. It's free, open source and it's
> wysiwyg. No framework. Works on Linux, Windows and Macintosh. Well  
> supported.
>
> http://www.nvudev.com/index.php
>
> --
> "Ninety percent of politicians give the other 10 percent a bad  
> name." -- Henry
> Kissinger
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
> <winmail.dat>_______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Sep 11 05:03:05 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 11 05:03:15 2008
Subject: [Harbour] Suggestion for harbour web site?
In-Reply-To: <531d7a750809102012u4e5dfb2ep2c449b3eb44a6004@mail.gmail.com>
References: <531d7a750809102012u4e5dfb2ep2c449b3eb44a6004@mail.gmail.com>
Message-ID: <46B37815-950D-49B5-BCD5-4E99B47F9F6E@syenar.hu>

Hi Renato,

Many thanks. My vote goes to 4b.

Sorry for nit-picking again, but "32/64 bits",
should be "32/64-bit" I believe. Someone native
English please correct / confirm this.

Brgds,
Viktor

On 2008.09.11., at 5:12, Vailton Renato wrote:

> Hi all!
>
> I wrote another 5 different layouts based on the proposed site. To use
> a blue background, the logo of the project does not help much.
> Please see: http://kssoftware.com.br/harbour/
>
> Let's look at the suggestions.
> Renato Silva
>
> Sorry, my english is bad.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Thu Sep 11 05:31:17 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Sep 11 05:31:32 2008
Subject: R: R: [Harbour] Suggestion for harbour web site?
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com><AFB948164110ED43B5EB849E8DEEF03815EF5F@SRV02.deltain.net><200809110313.12957.philb@philb.us><AFB948164110ED43B5EB849E8DEEF038037600@SRV02.deltain.net>
	<36592B5E-98D5-47F1-A568-28214AE41A9F@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF038037606@SRV02.deltain.net>

Ok Victor
I high apreciate Your opinion because you give a big contribution to harbour 

I want only suggest a reflection about the importance of  WIKI (who is a kind of cms)
if a wiki can't be hosted on actual structure we can host on other way
for example i have a old domain aivable at www.clipper32.com that can be used
Here i can use perspective (i know it) or other cms/wiki as suggested here

I can register  www.harbourdoc.com with documentation  and donate to xharbour 5 year of hosting
I hope that also Pritbal of switch on this harbour documentation site
We can use also google document for easy sharing of documentation

Massimo Belgrano


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org per conto di Szak?ts Viktor
Inviato: gio 11/09/2008 11.00
A: Harbour Project Main Developer List.
Oggetto: Re: R: [Harbour] Suggestion for harbour web site?
 
> Your aproach seem very old
> We can host out of your website  the cms
> Imo harbour today need a cms to start a collaborative works that  
> can't be done downloading nvu

I vote for no CMS, "web 2.0", or other unnecessary heavy
tools for our webpages. What we need is a very simple
structure, _done_ and done right and light.

The ultimate collaborative type of solution would be a wiki,
but that's out of our choices at this moment.

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 3613 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080911/700bde7c/attachment-0001.bin
From harbour.01 at syenar.hu  Thu Sep 11 06:55:13 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 11 06:55:21 2008
Subject: [Harbour] [1.0] 2008-09-11 12:00 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c913fc$Blat.v2.6.2$ddede8d4$12e0a13916aa@127.0.0.1>

I'll retrofit these changes to trunk later.

2008-09-11 12:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbnf/fttext.c
  * contrib/hbwhat/whtdate.c
  * contrib/hbwhat/wincorec.c
  * contrib/hbwhat/whtsock.c
  * contrib/hbwhat/whtseria.c
  * contrib/hbwhat/whtdlg.c
  * contrib/hbwhat/whtsys.c
  * contrib/hbwhat/whtmisc.c
  * contrib/hbwhat/whtcdlg.c
    ! Fixed all MinGW 4.3x warnings.
    ! Added workaround for slightly wrong MinGW definition for 
      Windows DateTime_GetMonthCal() macro.

  * contrib/gtwvg/gtwvg.c
  * contrib/gtwvg/wvgutils.c
  * contrib/gtwvg/wvgcore.c
    ! Fixed all MSVC -W4 warnings.

  * contrib/gtwvg/gtwvg.h
    ! Fixed old bug, which surfaced after recently 
      fixing __MINGW__ to __MINGW32__.
      Apparently, comctl32.h is never needed here.

  * config/rules.cf
  * contrib/hbbtree/tests/bld_djgp.bat
    % Removed -gc0. Now default.

  * contrib/make_b32_all.bat
  * contrib/make_vc_all.bat
    * Minor formatting.

  * contrib/hbgt/asciisgt.c
  * utils/hbdoc/hbdoc.prg
    - Removed unnecessary version strings. This was good 
      in CVS times, but for SVN there is not much point.

  * utils/hbmake/hbmake.prg
    + Another patch session from Bill Robertson.
      Besides some further cleanups, this should fix 
      some problems with the previous version.

  * source/lang/msghuiso.c
  * source/lang/msgskiso.c
  * source/lang/msgrukoi.c
  * source/lang/msghuwin.c
  * source/lang/msgzhgb.c
  * source/lang/msgskwin.c
  * source/lang/msg_tpl.c
  * source/lang/msgruwin.c
  * source/lang/msgelwin.c
  * source/lang/msgro.c
  * source/lang/msgpt.c
  * source/lang/msghriso.c
  * source/lang/msghrwin.c
  * source/lang/msgsliso.c
  * source/lang/msgbe866.c
  * source/lang/msgslwin.c
  * source/lang/msghe862.c
  * source/lang/msgcskam.c
  * source/lang/msggl.c
  * source/lang/msgtrwin.c
  * source/lang/msgeo.c
  * source/lang/msgbgiso.c
  * source/lang/msgbgwin.c
  * source/lang/msgskkam.c
  * source/lang/msges.c
  * source/lang/msguakoi.c
  * source/lang/msgzhb5.c
  * source/lang/msgeu.c
  * source/lang/msgpl852.c
  * source/lang/msgsr852.c
  * source/lang/msguawin.c
  * source/lang/msgde.c
  * source/lang/msgtr857.c
  * source/lang/msgru866.c
  * source/lang/msgcs852.c
  * source/lang/msgfr.c
  * source/lang/msgis850.c
  * source/lang/msgnl.c
  * source/lang/msghu852.c
  * source/lang/msgsk852.c
  * source/lang/msgca.c
  * source/lang/msgplmaz.c
  * source/lang/msgpliso.c
  * source/lang/msgplwin.c
  * source/lang/msgbgmik.c
  * source/lang/msgid.c
  * source/lang/msgbg866.c
  * source/lang/msgltwin.c
  * source/lang/msgsriso.c
  * source/lang/msgel.c
  * source/lang/msgsrwin.c
  * source/lang/msgbewin.c
  * source/lang/msgdewin.c
  * source/lang/msghr437.c
  * source/lang/msghr852.c
  * source/lang/msgko.c
  * source/lang/msgua866.c
  * source/lang/msghewin.c
  * source/lang/msgit.c
  * source/lang/msgsl437.c
  * source/lang/msgsl852.c
  * source/lang/msghucwi.c
  * source/lang/msgcsiso.c
  * source/lang/msgcswin.c
  * source/lang/msgeswin.c
  * source/rtl/langapi.c
    - Cleared unnecessary version strings. This was good 
      in CVS times, but for SVN there is not much point.
--
Brgds,
Viktor

From mbelgrano at deltain.it  Thu Sep 11 06:55:05 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Sep 11 06:56:43 2008
Subject: R: R: [Harbour] Suggestion for harbour web site?
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com><AFB948164110ED43B5EB849E8DEEF03815EF5F@SRV02.deltain.net><200809110313.12957.philb@philb.us><AFB948164110ED43B5EB849E8DEEF038037600@SRV02.deltain.net>
	<36592B5E-98D5-47F1-A568-28214AE41A9F@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF038037606@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF038037608@SRV02.deltain.net>

This can be for example the google document way
i haVE SHARED A TEST DOCUMENT  "Prova di Guida a GOOGLE DOC": 
http://docs.google.com/Doc?id=dhmtv9fs_0f64brndz&invite=fdpxb9p



Massimo Belgrano
Albo Nazionale Informatici Professionisti n? 2620
Socio n? 2843 Associazione Informatici Professionisti

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it 
Via Torelli , 31 - 28100 Novara - Tel: 0321/30281



-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org per conto di Massimo Belgrano
Inviato: gio 11/09/2008 11.31
A: Harbour Project Main Developer List.
Oggetto: R: R: [Harbour] Suggestion for harbour web site?
 
Ok Victor
I high apreciate Your opinion because you give a big contribution to harbour 

I want only suggest a reflection about the importance of  WIKI (who is a kind of cms)
if a wiki can't be hosted on actual structure we can host on other way
for example i have a old domain aivable at www.clipper32.com that can be used
Here i can use perspective (i know it) or other cms/wiki as suggested here

I can register  www.harbourdoc.com with documentation  and donate to xharbour 5 year of hosting
I hope that also Pritbal of switch on this harbour documentation site
We can use also google document for easy sharing of documentation

Massimo Belgrano


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org per conto di Szak?ts Viktor
Inviato: gio 11/09/2008 11.00
A: Harbour Project Main Developer List.
Oggetto: Re: R: [Harbour] Suggestion for harbour web site?
 
> Your aproach seem very old
> We can host out of your website  the cms
> Imo harbour today need a cms to start a collaborative works that  
> can't be done downloading nvu

I vote for no CMS, "web 2.0", or other unnecessary heavy
tools for our webpages. What we need is a very simple
structure, _done_ and done right and light.

The ultimate collaborative type of solution would be a wiki,
but that's out of our choices at this moment.

Brgds,
Viktor


-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 4085 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080911/5e42ccc3/attachment.bin
From harbour.01 at syenar.hu  Thu Sep 11 07:14:15 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 11 07:14:19 2008
Subject: [Harbour] [1.0] 2008-09-11 13:13 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c913ff$Blat.v2.6.2$86ca9482$5c85dc61e68@127.0.0.1>

I'll retrofit these changes to trunk later.

2008-09-11 13:13 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/gtwvg/wvgutils.c
    ! Fixed last MSVC -W4 warnings.
    ; NOTE: Only these contribs have remaining -W4 warnings:
            hbbmcdx, hbbtree, hbct (in screen*.c).
            Plus core.
--
Brgds,
Viktor

From sscc at mweb.co.za  Thu Sep 11 07:32:13 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Sep 11 07:32:33 2008
Subject: [Harbour] [1.0] 2008-09-11 13:13 UTC+0200 Viktor
	Szakats	(harbour.01 syenar hu)
In-Reply-To: <01c913ff$Blat.v2.6.2$86ca9482$5c85dc61e68@127.0.0.1>
References: <01c913ff$Blat.v2.6.2$86ca9482$5c85dc61e68@127.0.0.1>
Message-ID: <48C901BD.6010702@mweb.co.za>

Szak?ts Viktor wrote:

> I'll retrofit these changes to trunk later.
> 
> 2008-09-11 13:13 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * contrib/gtwvg/wvgutils.c
>     ! Fixed last MSVC -W4 warnings.
>     ; NOTE: Only these contribs have remaining -W4 warnings:
>             hbbmcdx, hbbtree, hbct (in screen*.c).
>             Plus core.

I am grateful for the amount of hard work you are doing, but I wonder 
if you are not making a stick for your back. Doesn't it make sense to 
only apply bug fixes to the 1.0 branch? You may even be introducing 
some problems to that stable branch with such wide ranging changes? 
What is your goal with the 1.0 branch?

On a separate subject, the compiled contrib libs are dropped in the 
harbour libs dir, I would like them to go in a separate dir, because I 
keep them separately when I install them. What is your opinion?

Regards
Alex
From harbour.01 at syenar.hu  Thu Sep 11 08:08:54 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 11 08:09:04 2008
Subject: [Harbour] [1.0] 2008-09-11 13:13 UTC+0200 Viktor
	Szakats	(harbour.01 syenar hu)
In-Reply-To: <48C901BD.6010702@mweb.co.za>
References: <01c913ff$Blat.v2.6.2$86ca9482$5c85dc61e68@127.0.0.1>
	<48C901BD.6010702@mweb.co.za>
Message-ID: <05A6A62A-2CB9-4B10-9149-2D22237F196A@syenar.hu>

>>
Hi Alex,

>> I'll retrofit these changes to trunk later.
>> 2008-09-11 13:13 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>>  * contrib/gtwvg/wvgutils.c
>>    ! Fixed last MSVC -W4 warnings.
>>    ; NOTE: Only these contribs have remaining -W4 warnings:
>>            hbbmcdx, hbbtree, hbct (in screen*.c).
>>            Plus core.
>
> I am grateful for the amount of hard work you are doing, but I  
> wonder if you are not making a stick for your back. Doesn't it make  
> sense to only apply bug fixes to the 1.0 branch? You may even be  
> introducing some problems to that stable branch with such wide  
> ranging changes? What is your goal with the 1.0 branch?

I see your concern, but most of these "fixes" are actually
pretty benign changes, if there is (rarely) an option for
a more deep fix and a light one, I choose the latter.

Most of these warnings are actually pinpointing existing
implicit casts, which I'm usually just making explicit.
It's very rare that there is a real problem behind (but
some got uncovered while scanning the code).

But maybe you're right, nothing beats testing and testing
this amount of code is really difficult, especially on
such - probably unused - contribs as hbwhat, where most of
the heavy lifting was done. It would also help if someone
could review these changes, they are not complicated ones,
but a mistake can slip in anytime.

1.0.1 goals are pretty much met now. Some known problems,
and some others which were found and fixed after the release.
Some changes also slipped in, which would be better go to 1.1,
but it's simply too time consuming to keep testing two separate
branches, so they'll also go to 1.0.1, most of them is guarded
with HB_LEGACY_LEVEL.

I think we can just start platform build testing 1.0 right
now, so that we can make a release ASAP.

> On a separate subject, the compiled contrib libs are dropped in the  
> harbour libs dir, I would like them to go in a separate dir, because  
> I keep them separately when I install them. What is your opinion?

Great that we have two different make systems ;), because
they are different cases.

In GNU make, you may do a build session with HB_CONTRIBLIBS
set to some false targets, HB_LIB_INSTALL to your core lib
dir, then do another build session where you reset HB_CONTRIBLIBS
to be empty, and set HB_LIB_INSTALL to your contrib destination.

In non-GNU make, core and contrib are different sessions anyway,
so all you need to do is change HB_LIB_INSTALL after calling
/make_*.bat and before calling contrib/make_*_all.bat.

I didn't test these, but this is the theory.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep 11 08:09:18 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 11 08:09:23 2008
Subject: [Harbour] [1.0] 2008-09-11 14:08 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c91407$Blat.v2.6.2$3796b01e$1180cb674cfc@127.0.0.1>

I'll retrofit these changes to trunk later.

2008-09-11 14:08 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/gtpca/gtpca.c
  * source/rtl/gtwin/gtwin.c
  * source/rtl/gtwvt/gtwvt.c
  * source/rtl/gttone.c
    ! Fixed some core MSVC -W4 warnings.

  * contrib/hbnf/getenvrn.c
    ! Fixed compile problem in MSVC C++ mode surfaced after 
      recent UNICODE fix.
--
Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Thu Sep 11 10:00:51 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Thu Sep 11 10:00:59 2008
Subject: [Harbour] Suggestion for harbour web site?
References: <531d7a750809102012u4e5dfb2ep2c449b3eb44a6004@mail.gmail.com>
Message-ID: <6AD80D599B394CD4B9C762C8067308C1@emag>


-----Messaggio Originale----- 
Da: "Vailton Renato" <vailtom@gmail.com>
A: <harbour@harbour-project.org>
Data invio: gioved? 11 settembre 2008 5.12
Oggetto: [Harbour] Suggestion for harbour web site?


> Hi all!
>
> I wrote another 5 different layouts based on the proposed site. To use
> a blue background, the logo of the project does not help much.
> Please see: http://kssoftware.com.br/harbour/

I can only see Layout1.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From irochinha at itelefonica.com.br  Thu Sep 11 11:02:05 2008
From: irochinha at itelefonica.com.br (5Volution Legacy Development)
Date: Thu Sep 11 11:02:20 2008
Subject: [Harbour] Suggestion for harbour web site?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF5F@SRV02.deltain.net>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03815EF5F@SRV02.deltain.net>
Message-ID: <20080911150212.B687F80A7@aldavila.hst.terra.com.br>

Hi,

Layout4b is my vote.

 From S?o Paulo, Brasil.

From mbelgrano at deltain.it  Thu Sep 11 11:29:38 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Sep 11 11:29:48 2008
Subject: R: RE: [Harbour] Suggestion for harbour web site?
Message-ID: <000301c91423$3497984c$0400a8c0@deltain.net>

Me also

----- Messaggio originale -----
Da: 5Volution Legacy Development <irochinha@itelefonica.com.br>
Inviato: gioved? 11 settembre 2008 17.02
A: Harbour Project Main Developer List. <harbour@harbour-project.org>
Oggetto: RE: [Harbour] Suggestion for harbour web site?

Hi,

Layout4b is my vote.

 From S?o Paulo, Brasil.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From arcadia2 at sbcglobal.net  Thu Sep 11 11:54:01 2008
From: arcadia2 at sbcglobal.net (bill robertson)
Date: Thu Sep 11 11:54:06 2008
Subject: [Harbour] Suggestion for harbour web site?
References: <531d7a750809102012u4e5dfb2ep2c449b3eb44a6004@mail.gmail.com>
	<46B37815-950D-49B5-BCD5-4E99B47F9F6E@syenar.hu>
Message-ID: <5893959CD9F84AA693E57C71B74ABC20@billws>

>> Sorry for nit-picking again, but "32/64 bits",
>> should be "32/64-bit" I believe. Someone native
>> English please correct / confirm this.

>>Brgds,
>>Viktor

As a native English speaker, I'm probably least qualified to answer but here goes. If it were '32 XXX' it should be '32 XXXs' since there is more than one XXX. '32-XXX' is singular so  'XXXs' isn't used.

Example:

32/64 bits but 32/64-bit.

The OS isn't a 32/64 bits system or a 32/64 bit system, but a 32/64-bit system. The 32/64 bits is grammatically correct; 32/64 bit is incorrect, but '32/64 bits' isn't used in this context. Now who is nit-picking?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080911/13cb9502/attachment.html
From mbelgrano at deltain.it  Thu Sep 11 12:06:58 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Sep 11 12:11:32 2008
Subject: [Harbour] where is hbcom.lib?
Message-ID: <AFB948164110ED43B5EB849E8DEEF03803760C@SRV02.deltain.net>

where is hbcomm library or his successor?
hbcomm =telepaty?
are aivable source
can be recompiled with harbour?
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080911/798df577/attachment.html
From toninhofwi at yahoo.com.br  Thu Sep 11 12:34:48 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Thu Sep 11 12:31:21 2008
Subject: [Harbour] Suggestion for harbour web site?
In-Reply-To: <531d7a750809102012u4e5dfb2ep2c449b3eb44a6004@mail.gmail.com>
References: <531d7a750809102012u4e5dfb2ep2c449b3eb44a6004@mail.gmail.com>
Message-ID: <5shic4lndtsps9toriurfhkfvmnk8f9asi@4ax.com>

>I wrote another 5 different layouts based on the proposed site. To use
>a blue background, the logo of the project does not help much.
>Please see: http://kssoftware.com.br/harbour/
>
>Let's look at the suggestions.

Renato congrats, here I can?t see layout 2, but my vote is for layout
4b too.

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From mbelgrano at deltain.it  Thu Sep 11 12:50:10 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Sep 11 12:52:15 2008
Subject: R: [Harbour] where is hbcom.lib?
References: <AFB948164110ED43B5EB849E8DEEF03803760C@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03803760F@SRV02.deltain.net>

Here i have found source
http://www.carozodequilmes.com.ar/Projects/QAC/hbcomm.lib.htm
 
This library is composed from 3 source , one in  C named hbcomm.c and two written in C++ named comm.cpp y hblcomm.cpp
Can be a harbour contrib?

 
________________________________

Da: harbour-bounces@harbour-project.org per conto di Massimo Belgrano
Inviato: gio 11/09/2008 18.06
A: harbour@harbour-project.org
Oggetto: [Harbour] where is hbcom.lib?


where is hbcomm library or his successor?
hbcomm =telepaty?
are aivable source
can be recompiled with harbour?
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 4013 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080911/38340702/attachment.bin
From info at fsgiudice.com  Thu Sep 11 13:31:40 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Thu Sep 11 13:31:53 2008
Subject: [Harbour] Suggestion for harbour web site?
In-Reply-To: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com>
Message-ID: <48C955FC.6070808@fsgiudice.com>

Renato, very nice!

My vote is for layout 4b.

Best Regards

Francesco Saverio Giudice

Vailton Renato ha scritto:
> Hello to all! 
> 
> I would like to help the project suggesting a simple model for the new 
> site. I work with harbour to 4 years and would be happy if I could give 
> my suggestion. 
> 
> Please see: http://kssoftware.com.br/harbour/ 
> Renato Silva
> 
From e.m.giordano at emagsoftware.it  Thu Sep 11 14:43:32 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Thu Sep 11 14:43:38 2008
Subject: [Harbour] SVN problems?
Message-ID: <46F433C9ACFB41E98FAC8076DBE0BB82@emag>

I'm not able to update my local SVN copy since yesterday.

Any ideas?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic

From lkrausem at shaw.ca  Thu Sep 11 15:06:35 2008
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Thu Sep 11 15:06:45 2008
Subject: [Harbour] SVN problems?
In-Reply-To: <46F433C9ACFB41E98FAC8076DBE0BB82@emag>
References: <46F433C9ACFB41E98FAC8076DBE0BB82@emag>
Message-ID: <48C96C3B.7080507@shaw.ca>

Enrico

Phil posted a msg from sourceforge about maintenance on Sep 4...
maybe there were problems with the transition to the new servers....

Enrico Maria Giordano wrote:
> I'm not able to update my local SVN copy since yesterday.
>
> Any ideas?
>
> EMG
>
> -- 
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From harbour.01 at syenar.hu  Thu Sep 11 15:07:49 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 11 15:08:10 2008
Subject: [Harbour] Suggestion for harbour web site?
In-Reply-To: <5893959CD9F84AA693E57C71B74ABC20@billws>
References: <531d7a750809102012u4e5dfb2ep2c449b3eb44a6004@mail.gmail.com>
	<46B37815-950D-49B5-BCD5-4E99B47F9F6E@syenar.hu>
	<5893959CD9F84AA693E57C71B74ABC20@billws>
Message-ID: <A26CE8B1-4061-4FB8-A480-C7E9B69B5577@syenar.hu>

>
Hi Bill,

> 32/64 bits but 32/64-bit.
>
> The OS isn't a 32/64 bits system or a 32/64 bit system, but a 32/64- 
> bit system. The 32/64 bits is grammatically correct; 32/64 bit is  
> incorrect, but '32/64 bits' isn't used in this context. Now who is  
> nit-picking?

That's how I know it exactly.

Brgds,
Viktor

From bedipritpal at hotmail.com  Thu Sep 11 15:09:07 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Sep 11 15:09:12 2008
Subject: [Harbour] GTWVG - Modal/modeless dialogs not working
Message-ID: <19442163.post@talk.nabble.com>


Hello Viktor

If you compile contrib/gtwvg/tests/demowvg.prg 
and click on <Modeless Dialogs><Dialog First>, the dialogs
no more show up. 

I am trying to figure out exactly at what point the window
is not created but am at a loss why so. I suspect that 
use of pointer instead of numerics is failing somewhere.
Can you look into it as it has stalled all my applications.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/GTWVG---Modal-modeless-dialogs-not-working-tp19442163p19442163.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Thu Sep 11 15:28:27 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 11 15:28:39 2008
Subject: [Harbour] GTWVG - Modal/modeless dialogs not working
In-Reply-To: <19442163.post@talk.nabble.com>
References: <19442163.post@talk.nabble.com>
Message-ID: <333C8B50-FFB7-48E2-B897-60A879282363@syenar.hu>

Hi Pritpal,

Okay, thanks for the report. I believe you are testing
the trunk, so I've checked recent commits. I haven't
found any grave-looking change, but I'll also try to
localize it.

For one thing, it GPFs right on startup, even in 1.0.0
release version. [ After adding some required system libs
to the bld_vc.bat file, otherwise it doesn't even link. ]

So now I'll rebuild everything with BCC and start over.

Brgds,
Viktor

On 2008.09.11., at 21:09, Pritpal Bedi wrote:

>
> Hello Viktor
>
> If you compile contrib/gtwvg/tests/demowvg.prg
> and click on <Modeless Dialogs><Dialog First>, the dialogs
> no more show up.
>
> I am trying to figure out exactly at what point the window
> is not created but am at a loss why so. I suspect that
> use of pointer instead of numerics is failing somewhere.
> Can you look into it as it has stalled all my applications.
>
> Regards
> Pritpal Bedi
> -- 
> View this message in context: http://www.nabble.com/GTWVG---Modal-modeless-dialogs-not-working-tp19442163p19442163.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Sep 11 15:34:22 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 11 15:34:27 2008
Subject: [Harbour] [1.0] 2008-09-11 21:29 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c91445$Blat.v2.6.2$648fddbe$c706dde550@127.0.0.1>

I'll retrofit these changes to trunk later.

2008-09-11 21:29 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/gtwvg/tests/bld_vc.bat
    ! Added required list of system libs.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep 11 15:09:16 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 11 15:41:22 2008
Subject: [Harbour] SVN problems?
In-Reply-To: <46F433C9ACFB41E98FAC8076DBE0BB82@emag>
References: <46F433C9ACFB41E98FAC8076DBE0BB82@emag>
Message-ID: <53F49B45-43E6-4B23-9A31-7E1F4CDA9409@syenar.hu>

Hi EMG,

Keep trying, SVN server is not very reliable these days.
I had to start my commits 5-10 times to get one correct
run in the last few days, reads were okay here though.

Brgds,
Viktor

On 2008.09.11., at 20:43, Enrico Maria Giordano wrote:

> I'm not able to update my local SVN copy since yesterday.
>
> Any ideas?
>
> EMG
>
> --
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From e.m.giordano at emagsoftware.it  Thu Sep 11 15:52:03 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Thu Sep 11 15:52:10 2008
Subject: [Harbour] SVN problems?
References: <46F433C9ACFB41E98FAC8076DBE0BB82@emag> <48C96C3B.7080507@shaw.ca>
Message-ID: <857B9F69A1654F2397DB73082797721F@emag>


-----Messaggio Originale----- 
Da: "Luis Krause Mantilla" <lkrausem@shaw.ca>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: gioved? 11 settembre 2008 21.06
Oggetto: Re: [Harbour] SVN problems?


> Enrico
>
> Phil posted a msg from sourceforge about maintenance on Sep 4...
> maybe there were problems with the transition to the new servers....

Probably. Thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Thu Sep 11 16:30:40 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Thu Sep 11 16:30:46 2008
Subject: [Harbour] SVN problems?
References: <46F433C9ACFB41E98FAC8076DBE0BB82@emag>
	<53F49B45-43E6-4B23-9A31-7E1F4CDA9409@syenar.hu>
Message-ID: <BB0697950D8440A9907201235CAE72B8@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: gioved? 11 settembre 2008 21.09
Oggetto: Re: [Harbour] SVN problems?


> Hi EMG,
>
> Keep trying, SVN server is not very reliable these days.
> I had to start my commits 5-10 times to get one correct
> run in the last few days, reads were okay here though.

Yes, I succeeded at last. Thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Thu Sep 11 16:58:07 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 11 16:58:12 2008
Subject: [Harbour] [1.0] 2008-09-11 22:55 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c91451$Blat.v2.6.2$1778cbce$18cef5f73f6@127.0.0.1>

I'll retrofit these changes to trunk later.

2008-09-11 22:55 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * doc/whatsnew.txt
  * source/vm/cmdarg.c
    * Legacy undocumented symbols hb_hInstance and 
      hb_hPrevInstance reenabled for 1.0.1, when HB_LEGACY_LEVEL 
      is #defined. This is the default in 1.0.x. It will be 
      turned off in 1.1.0.
      I did this to not break binary compatibility of 1.0.1 
      with 1.0.0 for those apps that rely on these symbols
      (like gtwvg).
--
Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Thu Sep 11 16:59:44 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Thu Sep 11 16:59:52 2008
Subject: [Harbour] Revision 9351
Message-ID: <9412F8C32B80473380EC1327B4083FBE@emag>

The last revision I see in the SVN is 9351. Is it correct?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic

From harbour.01 at syenar.hu  Thu Sep 11 17:01:19 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 11 17:01:32 2008
Subject: [Harbour] GTWVG - Modal/modeless dialogs not working
In-Reply-To: <19442163.post@talk.nabble.com>
References: <19442163.post@talk.nabble.com>
Message-ID: <4FA86EB6-5560-4CD3-9E79-DD7837C99CEE@syenar.hu>

Hi Pritpal,

I wouldn't say I got too much closer to the problem.

What I could find out, is that what you say also
doesn't work in 1.0.0 release. 'Dialog second' also
doesn't work, and the 'Slide show' window has a half
garbled title.

Compiling gtwvg in C++ mode with BCC resulted in a
flashing window at startup and an instant exit. This
also seems something older.

The only moderately suspicious change since 1.0.0
is 2008-08-25 14:46 UTC+0200. It looks correct to
me though, but I'd appreciate if you could follow
back all the changes related to your code and give
it a quick review. Most probably something went
wrong before 1.0.0, as there were some deeper
changes back then.

Plus GTWVG is broken under MSVC C and C++ mode (GPF),
BCC C++ mode (flashing window and exit), too.

Brgds,
Viktor

On 2008.09.11., at 21:09, Pritpal Bedi wrote:

>
> Hello Viktor
>
> If you compile contrib/gtwvg/tests/demowvg.prg
> and click on <Modeless Dialogs><Dialog First>, the dialogs
> no more show up.
>
> I am trying to figure out exactly at what point the window
> is not created but am at a loss why so. I suspect that
> use of pointer instead of numerics is failing somewhere.
> Can you look into it as it has stalled all my applications.
>
> Regards
> Pritpal Bedi
> -- 
> View this message in context: http://www.nabble.com/GTWVG---Modal-modeless-dialogs-not-working-tp19442163p19442163.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Sep 11 17:04:29 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 11 17:04:40 2008
Subject: [Harbour] Revision 9351
In-Reply-To: <9412F8C32B80473380EC1327B4083FBE@emag>
References: <9412F8C32B80473380EC1327B4083FBE@emag>
Message-ID: <ADAA3C66-9D47-4923-A65B-7177C306D9CD@syenar.hu>

For the trunk yes. But revisions numbers are global to the
whole repository in SVN, and I'm now committing to
branches/harbour-1.0 which is currently at revision 9358.

All commits going to 1.0 branch are prefixed with [1.0]
in the changelog mail subjects sent to the list.

Brgds,
Viktor

On 2008.09.11., at 22:59, Enrico Maria Giordano wrote:

> The last revision I see in the SVN is 9351. Is it correct?
>
> EMG
>
> --
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From abe.buch at att.net  Thu Sep 11 18:28:47 2008
From: abe.buch at att.net (Abeb)
Date: Thu Sep 11 18:28:52 2008
Subject: [Harbour] wvtcore.c , aPxlOff
Message-ID: <19446074.post@talk.nabble.com>



Please add aPxlOff parameter to more function in aPxlOff 
like in WVT_DRAWLABELOBJ etc.
Thanks
Abe
-- 
View this message in context: http://www.nabble.com/wvtcore.c-%2C-aPxlOff-tp19446074p19446074.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Thu Sep 11 18:54:49 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 11 18:54:53 2008
Subject: [Harbour] [1.0] 2008-09-12 00:53 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c91461$Blat.v2.6.2$64eee6b2$1564b9426628@127.0.0.1>

I'll retrofit these changes to trunk later.

2008-09-12 00:53 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/rddado/adordd.prg
  * contrib/rddado/adordd.ch
    * Merged changes from xhb.
      Some hbusrrdd.ch values seem to be missing from Harbour, 
      related features will be automatically enabled if we 
      implement them in our usrrdd.
      Please test.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep 11 19:16:52 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 11 19:16:57 2008
Subject: [Harbour] [1.0] 2008-09-12 01:14 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c91464$Blat.v2.6.2$79798724$6a48978e01a@127.0.0.1>

I'll retrofit these changes to trunk later.

2008-09-12 01:14 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rdd/usrrdd/rdds/Makefile
  + source/rdd/usrrdd/rdds/arrayrdd.prg
  + source/rdd/usrrdd/rdds/vfpcdx.prg
    + Added two usrrdd based RDDs. Borrowed from xhb.
      Works of: Francesco Saverio Giudice and 
                Miguel Angel Marchuet Frutos
    ; These were adapted to compile and link in Harbour, but 
      I did no tests, so some more - hopefully minor - changes 
      may happen to be needed.
--
Brgds,
Viktor

From bedipritpal at hotmail.com  Thu Sep 11 19:35:47 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Sep 11 19:35:52 2008
Subject: [Harbour] wvtcore.c , aPxlOff
In-Reply-To: <19446074.post@talk.nabble.com>
References: <19446074.post@talk.nabble.com>
Message-ID: <19446836.post@talk.nabble.com>


Sure, I will do it in a day or two.

Pritpal Bedi


Abeb wrote:
> 
> 
> Please add aPxlOff parameter to more function in aPxlOff 
> like in WVT_DRAWLABELOBJ etc.
> Thanks
> Abe
> 

-- 
View this message in context: http://www.nabble.com/wvtcore.c-%2C-aPxlOff-tp19446074p19446836.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Thu Sep 11 19:39:59 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Sep 11 19:40:04 2008
Subject: [Harbour] GTWVG - Modal/modeless dialogs not working
In-Reply-To: <333C8B50-FFB7-48E2-B897-60A879282363@syenar.hu>
References: <19442163.post@talk.nabble.com>
	<333C8B50-FFB7-48E2-B897-60A879282363@syenar.hu>
Message-ID: <19446871.post@talk.nabble.com>


Hello Viktor

I have narrowed down where it is failing.

Revision 9082 == OK
Revision 9083 == Error Begins

Please check exactly what you did in between.

Regards
Pritpal Bedi



-- 
View this message in context: http://www.nabble.com/GTWVG---Modal-modeless-dialogs-not-working-tp19442163p19446871.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Thu Sep 11 20:04:39 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 11 20:04:49 2008
Subject: [Harbour] GTWVG - Modal/modeless dialogs not working
In-Reply-To: <19446871.post@talk.nabble.com>
References: <19442163.post@talk.nabble.com>
	<333C8B50-FFB7-48E2-B897-60A879282363@syenar.hu>
	<19446871.post@talk.nabble.com>
Message-ID: <02CC79D1-C835-40B1-8E3E-C098DDE0629B@syenar.hu>

Thanks Pritpal, that will help.

This was a session where I was fixing 64-bit compatibility,
by changing Harbour interface function to hb_*nl() to hb_*nint()
for the most part, plus some casts.

Some of these were later fine tuned (by Przemek) to not throw
some new warnings. I've reviewed the changes now but couldn't
find anything ugly, I hope you or someone one the list will do.

Visual diffs:
---
https://harbour-project.svn.sourceforge.net/viewvc/harbour-project/trunk/harbour/contrib/gtwvg/gtwvg.c?r1=8965&r2=9083
https://harbour-project.svn.sourceforge.net/viewvc/harbour-project/trunk/harbour/contrib/gtwvg/wvgutils.c?r1=8885&r2=9083
https://harbour-project.svn.sourceforge.net/viewvc/harbour-project/trunk/harbour/contrib/gtwvg/wvgcore.c?r1=8835&r2=9083
---

ChangeLog entry:
---
2008-08-07 03:35 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
    * contrib/gtwvg/gtwvg.c
    * contrib/gtwvg/wvgutils.c
    * contrib/gtwvg/wvgcore.c
      ! Fixed 64 bit (MSVS 2008 64 bit and Pelles C 5 64 bit) related
        problems shown as warnings.
      ; Please review and test, especially WinCE and older MSVC builds.
      ; NOTE: There are many other 64 bit related problems not
              shown as compiler warnings.
---

Brgds,
Viktor

On 2008.09.12., at 1:39, Pritpal Bedi wrote:

>
> Hello Viktor
>
> I have narrowed down where it is failing.
>
> Revision 9082 == OK
> Revision 9083 == Error Begins
>
> Please check exactly what you did in between.
>
> Regards
> Pritpal Bedi
>
>
>
> -- 
> View this message in context: http://www.nabble.com/GTWVG---Modal-modeless-dialogs-not-working-tp19442163p19446871.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From bedipritpal at hotmail.com  Thu Sep 11 20:59:35 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Sep 11 20:59:41 2008
Subject: [Harbour] 2008-09-11 18:00 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <19447586.post@talk.nabble.com>


2008-09-11 18:00 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * contrib/gtwvg/wvgutils.c
    ! HB_FUNC( WVT__MAKEDLGTEMPLATE )
         hb_retclen( ( LPSTR ) pdlgtemplate, ( ULONG ) ( p - pdlgtemplate )
);    =>         
         hb_retclen( ( LPSTR ) pdlgtemplate, ( ( ULONG ) p - ( ULONG )
pdlgtemplate ) ) ;
      Fix to open modeless/modal dialogs.
      ; NOTE: Need to be fixed in v1.0.0 also.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-09-11-18%3A00-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp19447586p19447586.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From philb at philb.us  Thu Sep 11 21:04:32 2008
From: philb at philb.us (Phil Barnett)
Date: Thu Sep 11 21:04:34 2008
Subject: R: [Harbour] Suggestion for harbour web site?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF038037600@SRV02.deltain.net>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com>
	<200809110313.12957.philb@philb.us>
	<AFB948164110ED43B5EB849E8DEEF038037600@SRV02.deltain.net>
Message-ID: <200809112104.32625.philb@philb.us>

On Thursday 11 September 2008 03:47:23 am Massimo Belgrano wrote:

> Your aproach seem very old

It's very secure. There are huge numbers of static web sites on the internet 
for this very reason. Slashdot.net. Woot.com. NewYorkTimes.com All static. 

Thousands of big sites are static.

> We can host out of your website ?the cms

Aparrently you have a problem understanding that a CMS is NOT going to be 
hosted out of my server and that we have already made the decision to use 
static html. If you don't want to follow the decisions we are making here 
then we will find someone else to do the work.

Since this project was started, I have spent approximately $12,000 dollars to 
keep that server running. (about $1,500 a year plus hardware) Of course, not 
only for Harbour, but it's no small investment and I'm not going to risk it 
because you want something easy. I have many other sites on the server. Most 
of them are donated and the owners of the site pay me nothing for them, like 
Harbour.

I have seen this server become compromised in the past, the last time for 
Italian Porn. It was a Mambo CMS site, a CopperMine photo gallery and a 
geekweb site that led to the last three compromises. A site with static pages 
has never had a single problem.

Every time this happens I lose a week or two rebuilding the server and 
restoring over 100 sites and over 2000 mailboxes to operational status. I 
will do that again when I have to, but I'm not looking forward to it and I 
work hard at keeping it running smooth so I don't have to do that kind of 
work and wasted time.

But it's not just about my server. It's about our reputation. Every day, every 
server on the internet is attacked for vulnerability to the extent of 
thousands of attempts at breaking in each day. If you put vulnerable software 
on the internet eventually someone will take advantage of it. And CMS systems 
have been the very worst offenders offering dozens of easy vulnerabilities 
every year.

Static web pages have none of these problems and the server spends about 
1/100th of the processing and disk space resources to serve web pages.  
Static web pages come up very fast and are very secure against attack and 
cracking attempts.

Please let me know now if you are going to work with us in this way so I can 
advertise for a replacment if necessary.

Phil
Harbour Project Manager

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From harbour.01 at syenar.hu  Thu Sep 11 21:16:42 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 11 21:16:52 2008
Subject: [Harbour] 2008-09-11 18:00 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <19447586.post@talk.nabble.com>
References: <19447586.post@talk.nabble.com>
Message-ID: <F7AD60D6-245B-4F2E-B151-0FFFA45369F9@syenar.hu>

>
Hi Pritpal,

> 2008-09-11 18:00 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>  * contrib/gtwvg/wvgutils.c
>    ! HB_FUNC( WVT__MAKEDLGTEMPLATE )
>         hb_retclen( ( LPSTR ) pdlgtemplate, ( ULONG ) ( p -  
> pdlgtemplate )
> );    =>
>         hb_retclen( ( LPSTR ) pdlgtemplate, ( ( ULONG ) p - ( ULONG )
> pdlgtemplate ) ) ;
>      Fix to open modeless/modal dialogs.
>      ; NOTE: Need to be fixed in v1.0.0 also.

Thanks for this find.

There is one problem though with this refix, now this
code can easily crash on 64-bit builds.

Can you please try if it works if you change ULONG to
HB_PTRDIFF in the above line?

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep 11 21:48:21 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 11 21:48:30 2008
Subject: R: [Harbour] where is hbcom.lib?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03803760F@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03803760C@SRV02.deltain.net>
	<AFB948164110ED43B5EB849E8DEEF03803760F@SRV02.deltain.net>
Message-ID: <2925B4F2-7760-441D-9607-545823FE299A@syenar.hu>

Too bad it's C++ (unnecessarily BTW), non-MT friendly,
Windows specific and it has an unknown license with
a 3rd party copyright holder from a former commercial
site.

I'd suggest to try hbtpathy.

Brgds,
Viktor

On 2008.09.11., at 18:50, Massimo Belgrano wrote:

> Here i have found source
> http://www.carozodequilmes.com.ar/Projects/QAC/hbcomm.lib.htm
>
> This library is composed from 3 source , one in  C named hbcomm.c  
> and two written in C++ named comm.cpp y hblcomm.cpp
> Can be a harbour contrib?
>
>
> ________________________________
>
> Da: harbour-bounces@harbour-project.org per conto di Massimo Belgrano
> Inviato: gio 11/09/2008 18.06
> A: harbour@harbour-project.org
> Oggetto: [Harbour] where is hbcom.lib?
>
>
> where is hbcomm library or his successor?
> hbcomm =telepaty?
> are aivable source
> can be recompiled with harbour?
>
> <winmail.dat>_______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Sep 11 22:05:57 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 11 22:06:01 2008
Subject: [Harbour] [1.0] 2008-09-12 04:03 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c9147c$Blat.v2.6.2$18627258$b8c2a803f66@127.0.0.1>

I'll retrofit these changes to trunk later.

2008-09-12 04:03 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/gtwvg/wvgutils.c
    ! Fix to previous fix, so it works again in 64-bit builds.
         hb_retclen( ( LPSTR ) pdlgtemplate, ( ( ULONG ) p - ( ULONG ) pdlgtemplate ) ) ; =>
         hb_retclen( ( LPSTR ) pdlgtemplate, ( ( HB_PTRDIFF ) p - ( HB_PTRDIFF ) pdlgtemplate ) ) ;
    ; This way it's now in sync with similar function in hbwhat.

2008-09-11 18:00 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * contrib/gtwvg/wvgutils.c
    ! HB_FUNC( WVT__MAKEDLGTEMPLATE )
         hb_retclen( ( LPSTR ) pdlgtemplate, ( ULONG ) ( p - pdlgtemplate ) );    =>         
         hb_retclen( ( LPSTR ) pdlgtemplate, ( ( ULONG ) p - ( ULONG ) pdlgtemplate ) ) ;
      Fix to open modeless/modal dialogs.
      ; NOTE: Need to be fixed in v1.0.0 also.

--
Brgds,
Viktor

From tomaz.zupan at orpo.si  Fri Sep 12 01:53:12 2008
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Fri Sep 12 01:53:20 2008
Subject: [Harbour] Suggestion for harbour web site?
In-Reply-To: <48C955FC.6070808@fsgiudice.com>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com>
	<48C955FC.6070808@fsgiudice.com>
Message-ID: <200809120753.12094.tomaz.zupan@orpo.si>

4b looks the best for me too.

LP, Toma?

On Thursday 11 September 2008 19:31:40 Francesco Saverio Giudice wrote:
> Renato, very nice!
>
> My vote is for layout 4b.
>
> Best Regards
>
> Francesco Saverio Giudice
>
> Vailton Renato ha scritto:
> > Hello to all!
> >
> > I would like to help the project suggesting a simple model for the new
> > site. I work with harbour to 4 years and would be happy if I could give
> > my suggestion.
> >
> > Please see: http://kssoftware.com.br/harbour/
> > Renato Silva
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour


From e.m.giordano at emagsoftware.it  Fri Sep 12 02:47:47 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Sep 12 02:47:57 2008
Subject: [Harbour] Revision 9351
References: <9412F8C32B80473380EC1327B4083FBE@emag>
	<ADAA3C66-9D47-4923-A65B-7177C306D9CD@syenar.hu>
Message-ID: <D0E6806E35DD47C1BE3EF37931AEC980@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: gioved? 11 settembre 2008 23.04
Oggetto: Re: [Harbour] Revision 9351


> For the trunk yes. But revisions numbers are global to the
> whole repository in SVN, and I'm now committing to
> branches/harbour-1.0 which is currently at revision 9358.
>
> All commits going to 1.0 branch are prefixed with [1.0]
> in the changelog mail subjects sent to the list.

Do you know how to update branches/harbour-1.0 using TortoiseSVN?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From sscc at mweb.co.za  Fri Sep 12 03:27:38 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Sep 12 03:27:56 2008
Subject: R: [Harbour] where is hbcom.lib?
In-Reply-To: <2925B4F2-7760-441D-9607-545823FE299A@syenar.hu>
References: <AFB948164110ED43B5EB849E8DEEF03803760C@SRV02.deltain.net>	<AFB948164110ED43B5EB849E8DEEF03803760F@SRV02.deltain.net>
	<2925B4F2-7760-441D-9607-545823FE299A@syenar.hu>
Message-ID: <48CA19EA.4060700@mweb.co.za>

Szak?ts Viktor wrote:
> Too bad it's C++ (unnecessarily BTW), non-MT friendly,
> Windows specific and it has an unknown license with
> a 3rd party copyright holder from a former commercial
> site.
> 
> I'd suggest to try hbtpathy.

I have sent something I wrote - but it is 64k, so probably mailman 
will bounce it. We'll see.

Regards
Alex
From mbelgrano at deltain.it  Fri Sep 12 04:09:06 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Sep 12 04:09:17 2008
Subject: R: [Harbour] Suggestion for harbour web site?
In-Reply-To: <200809112104.32625.philb@philb.us>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com><200809110313.12957.philb@philb.us><AFB948164110ED43B5EB849E8DEEF038037600@SRV02.deltain.net>
	<200809112104.32625.philb@philb.us>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF71@SRV02.deltain.net>

I don't made any comment because our vision are very distant

I propose host a cms/WIKI/documentation project on  my server becase I have undestrand your position



-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Phil Barnett
Sent: Friday, September 12, 2008 3:05 AM
To: harbour@harbour-project.org
Subject: Re: R: [Harbour] Suggestion for harbour web site?

On Thursday 11 September 2008 03:47:23 am Massimo Belgrano wrote:

> Your aproach seem very old

It's very secure. There are huge numbers of static web sites on the internet 
for this very reason. Slashdot.net. Woot.com. NewYorkTimes.com All static. 

Thousands of big sites are static.

> We can host out of your website ?the cms

Aparrently you have a problem understanding that a CMS is NOT going to be 
hosted out of my server and that we have already made the decision to use 
static html. If you don't want to follow the decisions we are making here 
then we will find someone else to do the work.

Since this project was started, I have spent approximately $12,000 dollars to 
keep that server running. (about $1,500 a year plus hardware) Of course, not 
only for Harbour, but it's no small investment and I'm not going to risk it 
because you want something easy. I have many other sites on the server. Most 
of them are donated and the owners of the site pay me nothing for them, like 
Harbour.

I have seen this server become compromised in the past, the last time for 
Italian Porn. It was a Mambo CMS site, a CopperMine photo gallery and a 
geekweb site that led to the last three compromises. A site with static pages 
has never had a single problem.

Every time this happens I lose a week or two rebuilding the server and 
restoring over 100 sites and over 2000 mailboxes to operational status. I 
will do that again when I have to, but I'm not looking forward to it and I 
work hard at keeping it running smooth so I don't have to do that kind of 
work and wasted time.

But it's not just about my server. It's about our reputation. Every day, every 
server on the internet is attacked for vulnerability to the extent of 
thousands of attempts at breaking in each day. If you put vulnerable software 
on the internet eventually someone will take advantage of it. And CMS systems 
have been the very worst offenders offering dozens of easy vulnerabilities 
every year.

Static web pages have none of these problems and the server spends about 
1/100th of the processing and disk space resources to serve web pages.  
Static web pages come up very fast and are very secure against attack and 
cracking attempts.

Please let me know now if you are going to work with us in this way so I can 
advertise for a replacment if necessary.

Phil
Harbour Project Manager

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From tomaz.zupan at orpo.si  Fri Sep 12 04:29:17 2008
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Fri Sep 12 04:29:24 2008
Subject: R: [Harbour] Suggestion for harbour web site?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF71@SRV02.deltain.net>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com>
	<200809112104.32625.philb@philb.us>
	<AFB948164110ED43B5EB849E8DEEF03815EF71@SRV02.deltain.net>
Message-ID: <200809121029.17420.tomaz.zupan@orpo.si>

On Friday 12 September 2008 10:09:06 Massimo Belgrano wrote:
> I don't made any comment because our vision are very distant
>
> I propose host a cms/WIKI/documentation project on  my server becase I have
> undestrand your position
>

Harbour web site is hosted on Phil's server for years and as far as I remember 
there were almost no problem with it. When there were, Phil took adequate 
steps toward fixing them. I think it should stay where it is. If for some 
reason it cannot stay there, the only other apropriate place seems to be 
Sourceforge.

LP,  Toma?
From harbour.01 at syenar.hu  Fri Sep 12 04:30:01 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 12 04:30:14 2008
Subject: [Harbour] Revision 9351
In-Reply-To: <D0E6806E35DD47C1BE3EF37931AEC980@emag>
References: <9412F8C32B80473380EC1327B4083FBE@emag>
	<ADAA3C66-9D47-4923-A65B-7177C306D9CD@syenar.hu>
	<D0E6806E35DD47C1BE3EF37931AEC980@emag>
Message-ID: <E4BE3624-C7D1-41EF-B225-B56A439C20EA@syenar.hu>

Hi Enrico,

>> All commits going to 1.0 branch are prefixed with [1.0]
>> in the changelog mail subjects sent to the list.
>
> Do you know how to update branches/harbour-1.0 using TortoiseSVN?

Not specifically, but the two only differs by the
address, so I guess it's something like adding this
new repository URL. (replace trunk/harbour with
branches/harbour-1.0)

Brgds,
Viktor

From sscc at mweb.co.za  Fri Sep 12 04:35:48 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Sep 12 04:36:04 2008
Subject: [Harbour] Revision 9351
In-Reply-To: <D0E6806E35DD47C1BE3EF37931AEC980@emag>
References: <9412F8C32B80473380EC1327B4083FBE@emag>	<ADAA3C66-9D47-4923-A65B-7177C306D9CD@syenar.hu>
	<D0E6806E35DD47C1BE3EF37931AEC980@emag>
Message-ID: <48CA29E4.50004@mweb.co.za>

Enrico Maria Giordano wrote:

> Do you know how to update branches/harbour-1.0 using TortoiseSVN?

I used the "Switch" menu and then use the ... button to browse the 
repository to get the branch, or you can directly put in the URL as 
Viktor said.

Regards
Alex
From harbour.01 at syenar.hu  Fri Sep 12 04:36:46 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 12 04:36:57 2008
Subject: R: [Harbour] where is hbcom.lib?
In-Reply-To: <48CA19EA.4060700@mweb.co.za>
References: <AFB948164110ED43B5EB849E8DEEF03803760C@SRV02.deltain.net>	<AFB948164110ED43B5EB849E8DEEF03803760F@SRV02.deltain.net>
	<2925B4F2-7760-441D-9607-545823FE299A@syenar.hu>
	<48CA19EA.4060700@mweb.co.za>
Message-ID: <8438D367-EB32-46BF-99B6-79F08261D116@syenar.hu>

Hi Alex,

You can send it to me directly if you want,
or if you .zip it it will probably be able to go
to the list, too. (I think the limit is 100K
for the raw message size)

Brgds,
Viktor

On 2008.09.12., at 9:27, Alex Strickland wrote:

> Szak?ts Viktor wrote:
>> Too bad it's C++ (unnecessarily BTW), non-MT friendly,
>> Windows specific and it has an unknown license with
>> a 3rd party copyright holder from a former commercial
>> site.
>> I'd suggest to try hbtpathy.
>
> I have sent something I wrote - but it is 64k, so probably mailman  
> will bounce it. We'll see.
>
> Regards
> Alex
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Sep 12 04:37:26 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 12 04:37:36 2008
Subject: R: [Harbour] Suggestion for harbour web site?
In-Reply-To: <200809112104.32625.philb@philb.us>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com>
	<200809110313.12957.philb@philb.us>
	<AFB948164110ED43B5EB849E8DEEF038037600@SRV02.deltain.net>
	<200809112104.32625.philb@philb.us>
Message-ID: <DB014C15-86FE-48D3-A64E-F0D5DED438C6@syenar.hu>

Hi Phil,

Thanks for your great work on the server. I fully agree
with all your concerns. Not to say that a dynamic site
is an absolute no go in general, but only if properly
justified, which - for Harbour - it is simply not.

I'd suggest to "delegate" the website task to someone
who is willing and able to actually start shuffling some
bits around on the site (Renato's proposals are very nice
candidates), because all I see is a lot of words, but
there is little to none change, while the site layout
is in its worst shape ever, lagging behind the 'product'
itself.

Brgds,
Viktor

On 2008.09.12., at 3:04, Phil Barnett wrote:

> On Thursday 11 September 2008 03:47:23 am Massimo Belgrano wrote:
>
>> Your aproach seem very old
>
> It's very secure. There are huge numbers of static web sites on the  
> internet
> for this very reason. Slashdot.net. Woot.com. NewYorkTimes.com All  
> static.
>
> Thousands of big sites are static.
>
>> We can host out of your website  the cms
>
> Aparrently you have a problem understanding that a CMS is NOT going  
> to be
> hosted out of my server and that we have already made the decision  
> to use
> static html. If you don't want to follow the decisions we are making  
> here
> then we will find someone else to do the work.
>
> Since this project was started, I have spent approximately $12,000  
> dollars to
> keep that server running. (about $1,500 a year plus hardware) Of  
> course, not
> only for Harbour, but it's no small investment and I'm not going to  
> risk it
> because you want something easy. I have many other sites on the  
> server. Most
> of them are donated and the owners of the site pay me nothing for  
> them, like
> Harbour.
>
> I have seen this server become compromised in the past, the last  
> time for
> Italian Porn. It was a Mambo CMS site, a CopperMine photo gallery  
> and a
> geekweb site that led to the last three compromises. A site with  
> static pages
> has never had a single problem.
>
> Every time this happens I lose a week or two rebuilding the server and
> restoring over 100 sites and over 2000 mailboxes to operational  
> status. I
> will do that again when I have to, but I'm not looking forward to it  
> and I
> work hard at keeping it running smooth so I don't have to do that  
> kind of
> work and wasted time.
>
> But it's not just about my server. It's about our reputation. Every  
> day, every
> server on the internet is attacked for vulnerability to the extent of
> thousands of attempts at breaking in each day. If you put vulnerable  
> software
> on the internet eventually someone will take advantage of it. And  
> CMS systems
> have been the very worst offenders offering dozens of easy  
> vulnerabilities
> every year.
>
> Static web pages have none of these problems and the server spends  
> about
> 1/100th of the processing and disk space resources to serve web pages.
> Static web pages come up very fast and are very secure against  
> attack and
> cracking attempts.
>
> Please let me know now if you are going to work with us in this way  
> so I can
> advertise for a replacment if necessary.
>
> Phil
> Harbour Project Manager
>
> -- 
> "Ninety percent of politicians give the other 10 percent a bad  
> name." -- Henry
> Kissinger
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Sep 12 04:43:27 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 12 04:45:23 2008
Subject: R: [Harbour] Suggestion for harbour web site?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF71@SRV02.deltain.net>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com><200809110313.12957.philb@philb.us><AFB948164110ED43B5EB849E8DEEF038037600@SRV02.deltain.net>
	<200809112104.32625.philb@philb.us>
	<AFB948164110ED43B5EB849E8DEEF03815EF71@SRV02.deltain.net>
Message-ID: <ED727801-3574-498D-A8FB-AE0F3258A870@syenar.hu>

>
Hi Massimo,

> I don't made any comment because our vision are very distant
> I propose host a cms/WIKI/documentation project on  my server becase  
> I have undestrand your position

I vote not to do this. IIRC, you volunteered to help
to fix and enhance our website (while everyone else got
his access removed, so you got 'exclusive' write rights),
and to this day there was not much done. To me this
looks like a dead end.

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Sep 12 05:02:27 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 12 05:02:33 2008
Subject: [Harbour] [1.0] 2008-09-12 11:01 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c914b6$Blat.v2.6.2$479372fe$12c84a1eab8a@127.0.0.1>

I'll retrofit these changes to trunk later.

2008-09-12 11:01 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbole/tests/bld_vc.bat
  * contrib/hbw32/tests/bld_vc.bat
    ! Added missing system libs.
--
Brgds,
Viktor

From mbelgrano at deltain.it  Fri Sep 12 05:23:06 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Sep 12 05:23:14 2008
Subject: R: [Harbour] Suggestion for harbour web site?
In-Reply-To: <200809121029.17420.tomaz.zupan@orpo.si>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com><200809112104.32625.philb@philb.us><AFB948164110ED43B5EB849E8DEEF03815EF71@SRV02.deltain.net>
	<200809121029.17420.tomaz.zupan@orpo.si>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF76@SRV02.deltain.net>

I proposed a documentation only web site


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Toma? Zupan
Sent: Friday, September 12, 2008 10:29 AM
To: Harbour Project Main Developer List.
Subject: Re: R: [Harbour] Suggestion for harbour web site?

On Friday 12 September 2008 10:09:06 Massimo Belgrano wrote:
> I don't made any comment because our vision are very distant
>
> I propose host a cms/WIKI/documentation project on  my server becase I have
> undestrand your position
>

Harbour web site is hosted on Phil's server for years and as far as I remember 
there were almost no problem with it. When there were, Phil took adequate 
steps toward fixing them. I think it should stay where it is. If for some 
reason it cannot stay there, the only other apropriate place seems to be 
Sourceforge.

LP,  Toma?
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Fri Sep 12 05:35:55 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Sep 12 05:36:02 2008
Subject: R: [Harbour] Suggestion for harbour web site?
In-Reply-To: <ED727801-3574-498D-A8FB-AE0F3258A870@syenar.hu>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com><200809110313.12957.philb@philb.us><AFB948164110ED43B5EB849E8DEEF038037600@SRV02.deltain.net><200809112104.32625.philb@philb.us><AFB948164110ED43B5EB849E8DEEF03815EF71@SRV02.deltain.net>
	<ED727801-3574-498D-A8FB-AE0F3258A870@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF77@SRV02.deltain.net>

Ok 
please phil give to renato permission
Sorry I don't undestrand that I have exclusive right.
Layout 4b seem good.


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Friday, September 12, 2008 10:43 AM
To: Harbour Project Main Developer List.
Subject: Re: R: [Harbour] Suggestion for harbour web site?

>
Hi Massimo,

> I don't made any comment because our vision are very distant
> I propose host a cms/WIKI/documentation project on  my server becase  
> I have undestrand your position

I vote not to do this. IIRC, you volunteered to help
to fix and enhance our website (while everyone else got
his access removed, so you got 'exclusive' write rights),
and to this day there was not much done. To me this
looks like a dead end.

Brgds,
Viktor

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Fri Sep 12 06:15:51 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 12 06:16:00 2008
Subject: R: [Harbour] Suggestion for harbour web site?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF76@SRV02.deltain.net>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com><200809112104.32625.philb@philb.us><AFB948164110ED43B5EB849E8DEEF03815EF71@SRV02.deltain.net>
	<200809121029.17420.tomaz.zupan@orpo.si>
	<AFB948164110ED43B5EB849E8DEEF03815EF76@SRV02.deltain.net>
Message-ID: <03BD0005-2886-469E-9FDE-49E65420F12D@syenar.hu>

Massimo,

Nothing can or should stop you, or anybody to launch
any private Harbour related website, including
documentation, unofficial builds, 3rd party stuff, links,
examples, _whatever_ else (which complies with normal
copyright and privacy rules of course). In contrary,
this is actually very good thing and very nice service
to the community and users.

So, if you have something in mind, go ahead and do it.
I'm sure we can add a link from the official site, if
there is useful content there.

Brgds,
Viktor

On 2008.09.12., at 11:23, Massimo Belgrano wrote:

> I proposed a documentation only web site
>
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org 
> ] On Behalf Of Toma? Zupan
> Sent: Friday, September 12, 2008 10:29 AM
> To: Harbour Project Main Developer List.
> Subject: Re: R: [Harbour] Suggestion for harbour web site?
>
> On Friday 12 September 2008 10:09:06 Massimo Belgrano wrote:
>> I don't made any comment because our vision are very distant
>>
>> I propose host a cms/WIKI/documentation project on  my server  
>> becase I have
>> undestrand your position
>>
>
> Harbour web site is hosted on Phil's server for years and as far as  
> I remember
> there were almost no problem with it. When there were, Phil took  
> adequate
> steps toward fixing them. I think it should stay where it is. If for  
> some
> reason it cannot stay there, the only other apropriate place seems  
> to be
> Sourceforge.
>
> LP,  Toma?
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From e.m.giordano at emagsoftware.it  Fri Sep 12 06:24:24 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Sep 12 06:24:32 2008
Subject: [Harbour] Revision 9351
References: <9412F8C32B80473380EC1327B4083FBE@emag>	<ADAA3C66-9D47-4923-A65B-7177C306D9CD@syenar.hu><D0E6806E35DD47C1BE3EF37931AEC980@emag>
	<48CA29E4.50004@mweb.co.za>
Message-ID: <017A88279A094EDF917F36F8D1816B70@emag>


-----Messaggio Originale----- 
Da: "Alex Strickland" <sscc@mweb.co.za>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: venerd? 12 settembre 2008 10.35
Oggetto: Re: [Harbour] Revision 9351


> Do you know how to update branches/harbour-1.0 using TortoiseSVN?

Viktor and Alex,

thank you, done!

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From mbelgrano at deltain.it  Fri Sep 12 06:37:40 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Sep 12 06:37:48 2008
Subject: R: [Harbour] Suggestion for harbour web site?
In-Reply-To: <03BD0005-2886-469E-9FDE-49E65420F12D@syenar.hu>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com><200809112104.32625.philb@philb.us><AFB948164110ED43B5EB849E8DEEF03815EF71@SRV02.deltain.net><200809121029.17420.tomaz.zupan@orpo.si><AFB948164110ED43B5EB849E8DEEF03815EF76@SRV02.deltain.net>
	<03BD0005-2886-469E-9FDE-49E65420F12D@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF79@SRV02.deltain.net>

Thanks for your word
IMO Harbour need user and on line tool for easy make a good documentation
I hope finding collaboration for made this
Now I think to A web site where everybody if enabled can add his suggestion
I se at perspective like tools but every suggestion can be usefull
Please send me any manual or guide that everyone have written and I try coordinate it in a project

---Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Friday, September 12, 2008 12:16 PM
To: Harbour Project Main Developer List.
Subject: Re: R: [Harbour] Suggestion for harbour web site?

Massimo,

Nothing can or should stop you, or anybody to launch
any private Harbour related website, including
documentation, unofficial builds, 3rd party stuff, links,
examples, _whatever_ else (which complies with normal
copyright and privacy rules of course). In contrary,
this is actually very good thing and very nice service
to the community and users.

So, if you have something in mind, go ahead and do it.
I'm sure we can add a link from the official site, if
there is useful content there.

Brgds,
Viktor

On 2008.09.12., at 11:23, Massimo Belgrano wrote:

> I proposed a documentation only web site
>
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org 
> ] On Behalf Of Toma? Zupan
> Sent: Friday, September 12, 2008 10:29 AM
> To: Harbour Project Main Developer List.
> Subject: Re: R: [Harbour] Suggestion for harbour web site?
>
> On Friday 12 September 2008 10:09:06 Massimo Belgrano wrote:
>> I don't made any comment because our vision are very distant
>>
>> I propose host a cms/WIKI/documentation project on  my server  
>> becase I have
>> undestrand your position
>>
>
> Harbour web site is hosted on Phil's server for years and as far as  
> I remember
> there were almost no problem with it. When there were, Phil took  
> adequate
> steps toward fixing them. I think it should stay where it is. If for  
> some
> reason it cannot stay there, the only other apropriate place seems  
> to be
> Sourceforge.
>
> LP,  Toma?
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From lorenzo.fiorini at gmail.com  Fri Sep 12 06:55:27 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Sep 12 06:55:34 2008
Subject: [Harbour] What about releasing 1.0.1 this weekend?
Message-ID: <9257026e0809120355o280a0a68s95f86a9781f525cd@mail.gmail.com>

After a milestone like 1.0 it's normal that many users stop to use the svn.
I guess also that many don't know how to update from a branch so this
means that very few are testing 1.0.1. I think we can use a faster
release path for 1.0.1 that is release as it is and start a bug fix
only version 1.0.2.
In case of unexpected problems it's easy for the user to revert to the
1.0 release.

Any comment?

best regards,
Lorenzo
From harbour.01 at syenar.hu  Fri Sep 12 07:06:59 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 12 07:07:07 2008
Subject: [Harbour] What about releasing 1.0.1 this weekend?
In-Reply-To: <9257026e0809120355o280a0a68s95f86a9781f525cd@mail.gmail.com>
References: <9257026e0809120355o280a0a68s95f86a9781f525cd@mail.gmail.com>
Message-ID: <E57F31D9-C9E6-4998-BD61-C2785A6FEBD4@syenar.hu>

Hi Lorenzo,

Weekend looks a bit too early given that we
used to need quite some weeks to get all the
green lights for all platforms. Sometimes
next week looks more reasonable, but I'd
say let's start to do it and the quicker we
are the earlier we can release.

To help that, I'd like to ask everyone to
start doing build tests (and functional tests)
on branches/harbour-1.0.

Especially WinCE, Linux, OS/2, maybe HPUX are
interesting, Windows on and above MSVS 2005 is
pretty well covered on my system.

Brgds,
Viktor

On 2008.09.12., at 12:55, Lorenzo Fiorini wrote:

> After a milestone like 1.0 it's normal that many users stop to use  
> the svn.
> I guess also that many don't know how to update from a branch so this
> means that very few are testing 1.0.1. I think we can use a faster
> release path for 1.0.1 that is release as it is and start a bug fix
> only version 1.0.2.
> In case of unexpected problems it's easy for the user to revert to the
> 1.0 release.
>
> Any comment?
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Fri Sep 12 07:11:38 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Sep 12 07:11:43 2008
Subject: [Harbour] What about releasing 1.0.1 this weekend?
In-Reply-To: <E57F31D9-C9E6-4998-BD61-C2785A6FEBD4@syenar.hu>
References: <9257026e0809120355o280a0a68s95f86a9781f525cd@mail.gmail.com>
	<E57F31D9-C9E6-4998-BD61-C2785A6FEBD4@syenar.hu>
Message-ID: <9257026e0809120411u6a3dda40j18681ef5c20f321e@mail.gmail.com>

On Fri, Sep 12, 2008 at 1:06 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Weekend looks a bit too early given that we
> used to need quite some weeks to get all the
> green lights for all platforms. Sometimes
> next week looks more reasonable, but I'd
> say let's start to do it and the quicker we
> are the earlier we can release.

Sorry, I was not clear enough, I meant "starting" the release process
this weekend.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Fri Sep 12 07:14:54 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 12 07:15:05 2008
Subject: [Harbour] What about releasing 1.0.1 this weekend?
In-Reply-To: <9257026e0809120411u6a3dda40j18681ef5c20f321e@mail.gmail.com>
References: <9257026e0809120355o280a0a68s95f86a9781f525cd@mail.gmail.com>
	<E57F31D9-C9E6-4998-BD61-C2785A6FEBD4@syenar.hu>
	<9257026e0809120411u6a3dda40j18681ef5c20f321e@mail.gmail.com>
Message-ID: <BCDC0613-00E6-4B11-A670-208FD14E7469@syenar.hu>

Okay, absolutely.

Brdgs,
Viktor

On 2008.09.12., at 13:11, Lorenzo Fiorini wrote:

> On Fri, Sep 12, 2008 at 1:06 PM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
>> Weekend looks a bit too early given that we
>> used to need quite some weeks to get all the
>> green lights for all platforms. Sometimes
>> next week looks more reasonable, but I'd
>> say let's start to do it and the quicker we
>> are the earlier we can release.
>
> Sorry, I was not clear enough, I meant "starting" the release process
> this weekend.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From abe.buch at att.net  Fri Sep 12 10:51:02 2008
From: abe.buch at att.net (Abeb)
Date: Fri Sep 12 10:51:09 2008
Subject: [Harbour] gtWvg
Message-ID: <19457531.post@talk.nabble.com>


WVT_SETFOCUS is not being fired the first time.


exemple
the Harbour program starts 
i switch to another program ( killfoucs will fire)
i switch back to Harbour  ( setfocus is not fired )
i switch to another frogram ( killfoucs will fire)
i switch back to  Harbour ( setfocus is fired from now on)

Please Check it out, Thanks
Abe

-- 
View this message in context: http://www.nabble.com/gtWvg-tp19457531p19457531.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Fri Sep 12 11:09:45 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 12 11:09:56 2008
Subject: R: [Harbour] Suggestion for harbour web site?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF79@SRV02.deltain.net>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com><200809112104.32625.philb@philb.us><AFB948164110ED43B5EB849E8DEEF03815EF71@SRV02.deltain.net><200809121029.17420.tomaz.zupan@orpo.si><AFB948164110ED43B5EB849E8DEEF03815EF76@SRV02.deltain.net>
	<03BD0005-2886-469E-9FDE-49E65420F12D@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815EF79@SRV02.deltain.net>
Message-ID: <C7DCE6B4-CE64-46A8-8A11-525546069153@syenar.hu>

>
Massimo,

> Thanks for your word
> IMO Harbour need user and on line tool for easy make a good  
> documentation
> I hope finding collaboration for made this
> Now I think to A web site where everybody if enabled can add his  
> suggestion
> I se at perspective like tools but every suggestion can be usefull
> Please send me any manual or guide that everyone have written and I  
> try coordinate it in a project

I don't think it will work like this.

You asked for materials numerous times, but the thing
is that there is _no hidden material_ which ppl could
just send in and a "coordinator" could glue these
existing pieces like an editor.

What we have though, is available since at least 8 years
in our _/doc folder_ and on our existing _website_.
Choice is yours to reprocess these in a better fashion,
if you really feel dedication to it.

Words, good intent and coordination isn't enough, we
need to press some keys on the keyboard to move anywhere
from here.

Brgds,
Viktor

From bedipritpal at hotmail.com  Fri Sep 12 11:33:52 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Sep 12 11:33:58 2008
Subject: [Harbour] gtWvg
In-Reply-To: <19457531.post@talk.nabble.com>
References: <19457531.post@talk.nabble.com>
Message-ID: <19458048.post@talk.nabble.com>


Abe

I am aware of this fact and have tried a lot to fix it
but with no results. Exactly under what circumstances
this event is fired is not known to us.

Pritpal Bedi


Abeb wrote:
> 
> WVT_SETFOCUS is not being fired the first time.
> 
> 
> exemple
> the Harbour program starts 
> i switch to another program ( killfoucs will fire)
> i switch back to Harbour  ( setfocus is not fired )
> i switch to another frogram ( killfoucs will fire)
> i switch back to  Harbour ( setfocus is fired from now on)
> 
> Please Check it out, Thanks
> Abe
> 
> 

-- 
View this message in context: http://www.nabble.com/gtWvg-tp19457531p19458048.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vailtom at gmail.com  Fri Sep 12 12:20:46 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Fri Sep 12 12:20:53 2008
Subject: R: [Harbour] Suggestion for harbour web site?
References: 200809112104.32625.philb@philb.us
Message-ID: <48CA96DE.8090601@gmail.com>

Hi!

I am available to help the Harbour project. My English is very bad, but 
i would like to help in any way.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080912/322979b9/attachment.html
From harbour.01 at syenar.hu  Fri Sep 12 12:38:46 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 12 12:38:57 2008
Subject: R: [Harbour] Suggestion for harbour web site?
In-Reply-To: <48CA96DE.8090601@gmail.com>
References: 200809112104.32625.philb@philb.us <48CA96DE.8090601@gmail.com>
Message-ID: <1395ACCD-A51E-45DC-9516-FD958C77CBD0@syenar.hu>

Hi Renato,

I think most of us agree that your website proposals
are looking pretty neat, so I guess we would gladly
and instantly accept your help.

Most ppl seem to like your proposal 4b, so unless we
have any more input, suggestions or objections, you
may just as well start to implement it in real-life.

In the English area - although I don't see any problem
with your English - I'm sure some of us can help, if
needed.

Guys, opinions, suggestions?

Brgds,
Viktor

On 2008.09.12., at 18:20, Vailton Renato wrote:

> Hi!
>
> I am available to help the Harbour project. My English is very bad,  
> but i would like to help in any way.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Sep 12 13:12:14 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 12 13:12:17 2008
Subject: [Harbour] [1.0] 2008-09-12 19:08 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c914fa$Blat.v2.6.2$b397ca7e$130c60d33240@127.0.0.1>

I'll retrofit these changes to trunk later.

2008-09-12 19:08 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * doc/whatsnew.txt
    * Added some build notes.

  * contrib/gtalleg/Makefile
    ! Fixed POCC, XCC compiler exlusions.
    * Excluded DMC compiler.

  * contrib/hbwhat/Makefile
    * Excluded DMC compiler.

  * contrib/hbwhat/wincorec.c
    ! Workaround for a wrong Windows API declaration in 
      __DMC__ headers.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Sep 12 13:33:09 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 12 13:33:15 2008
Subject: [Harbour] [1.0] 2008-09-12 19:30 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c914fd$Blat.v2.6.2$9fa197fe$103028067b72@127.0.0.1>

I'll retrofit these changes to trunk later.

2008-09-12 19:30 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/gtalleg/Makefile
    * Excluded Cygwin.

  * contrib/hbwhat/Makefile
  * contrib/hbwhat/common.mak
  - contrib/hbwhat/whtdll.c
  - contrib/hbwhat/whtcall.c
    - Removed DLL related stuff from hbwhat, since we're 
      maintaining (a better working) one already in hbw32, 
      and hbwhat by itself doesn't seem to need this 
      functionality internally. Users should migrate to 
      the hbw32 functions, which work mostly similarly.
--
Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Fri Sep 12 13:35:39 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Sep 12 13:35:45 2008
Subject: R: [Harbour] Suggestion for harbour web site?
In-Reply-To: <1395ACCD-A51E-45DC-9516-FD958C77CBD0@syenar.hu>
References: <48CA96DE.8090601@gmail.com>
	<1395ACCD-A51E-45DC-9516-FD958C77CBD0@syenar.hu>
Message-ID: <9257026e0809121035w18c8c4cew79bde07ba3836803@mail.gmail.com>

On Fri, Sep 12, 2008 at 6:38 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> In the English area - although I don't see any problem
> with your English - I'm sure some of us can help, if
> needed.
>
> Guys, opinions, suggestions?

Who will decide what will be written in the home page?

I've done a small research about what's in Wikipedia about xBase,
Clipper and Harbour and I have "elaborated" something.

Let me know if you're interested.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Fri Sep 12 13:39:21 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 12 13:39:32 2008
Subject: R: [Harbour] Suggestion for harbour web site?
In-Reply-To: <9257026e0809121035w18c8c4cew79bde07ba3836803@mail.gmail.com>
References: <48CA96DE.8090601@gmail.com>
	<1395ACCD-A51E-45DC-9516-FD958C77CBD0@syenar.hu>
	<9257026e0809121035w18c8c4cew79bde07ba3836803@mail.gmail.com>
Message-ID: <C3833CDE-2942-4555-9BC1-E3954D3E71FB@syenar.hu>

Hi Lorenzo,

Great, I surely am. Probably not alone, even.

Brgds,
Viktor

On 2008.09.12., at 19:35, Lorenzo Fiorini wrote:

> On Fri, Sep 12, 2008 at 6:38 PM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
>> In the English area - although I don't see any problem
>> with your English - I'm sure some of us can help, if
>> needed.
>>
>> Guys, opinions, suggestions?
>
> Who will decide what will be written in the home page?
>
> I've done a small research about what's in Wikipedia about xBase,
> Clipper and Harbour and I have "elaborated" something.
>
> Let me know if you're interested.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From info at fsgiudice.com  Fri Sep 12 14:06:24 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri Sep 12 14:06:38 2008
Subject: R: [Harbour] Suggestion for harbour web site?
In-Reply-To: <C3833CDE-2942-4555-9BC1-E3954D3E71FB@syenar.hu>
References: <48CA96DE.8090601@gmail.com>	<1395ACCD-A51E-45DC-9516-FD958C77CBD0@syenar.hu>	<9257026e0809121035w18c8c4cew79bde07ba3836803@mail.gmail.com>
	<C3833CDE-2942-4555-9BC1-E3954D3E71FB@syenar.hu>
Message-ID: <48CAAFA0.7020807@fsgiudice.com>

Me too.

Francesco

Szak?ts Viktor ha scritto:
> Hi Lorenzo,
> 
> Great, I surely am. Probably not alone, even.
> 
> Brgds,
> Viktor
> 
> On 2008.09.12., at 19:35, Lorenzo Fiorini wrote:
> 
>> On Fri, Sep 12, 2008 at 6:38 PM, Szak?ts Viktor <harbour.01@syenar.hu> 
>> wrote:
>>
>>> In the English area - although I don't see any problem
>>> with your English - I'm sure some of us can help, if
>>> needed.
>>>
>>> Guys, opinions, suggestions?
>>
>> Who will decide what will be written in the home page?
>>
>> I've done a small research about what's in Wikipedia about xBase,
>> Clipper and Harbour and I have "elaborated" something.
>>
>> Let me know if you're interested.
>>
>> best regards,
>> Lorenzo
From lorenzo.fiorini at gmail.com  Fri Sep 12 14:12:46 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Sep 12 14:12:55 2008
Subject: R: [Harbour] Suggestion for harbour web site?
In-Reply-To: <C3833CDE-2942-4555-9BC1-E3954D3E71FB@syenar.hu>
References: <48CA96DE.8090601@gmail.com>
	<1395ACCD-A51E-45DC-9516-FD958C77CBD0@syenar.hu>
	<9257026e0809121035w18c8c4cew79bde07ba3836803@mail.gmail.com>
	<C3833CDE-2942-4555-9BC1-E3954D3E71FB@syenar.hu>
Message-ID: <9257026e0809121112m7ff1feb0gd4ca9e8a5e0e0a38@mail.gmail.com>

On Fri, Sep 12, 2008 at 7:39 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Great, I surely am. Probably not alone, even.

I'm not an English native speaker so I'll be very "schematic".
I hope this will not sounds rude or offensive.
My intention is only to find the best words to describe what I think
is a masterpiece of the computer science :)

I fear that "A 32/64 bits Cl*pper compiler" probably doesn't mean
anything to the 99% of the programmers. I would suggest to change it
to sth more generic like a "A smart language, powerful yet easy to
learn and use" ( just to give the idea ).

Also "Harbour is a compiler for the xBase superset language called
Cl*pper..." is confusing and seems that Cl*pper is a superset of
xBase.
But Wikipedia says that xBase is: "xBase is the generic term for all
programming languages that derive from the original dBASE
(Ashton-Tate) programming language and database formats. These ..."
and about Harbour it says: "Harbour is a modern, fast computer
programming language. it is a Clipper-compatible compiler which is
cross-platform, running on many operating systems (DOS, Microsoft
Windows, Linux (32, 64), Unix (32, 64), Mac OS X, Windows CE, Pocket
PC)."

Here the "Clipper-compatible compiler which is cross-platform" seems
to be the a feature of Cl*pper but about Clipper it says: "Cl*pper is
a computer programming language that is used to create software
programs that originally operated primarily under DOS. Although it is
a powerful general-purpose programming language, it was primarily used
to create database/business programs."

Of course Harbour IS an "xBase language, 100% compatible with Cl*pper"
but this is only the start. I think we should clearly state that
Harbour is a full, powerful, modern language not simply "a compiler"
of a legacy product.

Also about "Why using it":

"Harbour is proven to be stable, robust and efficient...", these kind
of assertions are difficult to prove ( particularly for a 1.0 release
) and generic. Every computer language is claimed stable and robust.

Instead I would mention thinks like:

- it's easy to learn and to use
- it has a powerful preprocessor
- it has many "dynamic" programming features ( code blocks, macros, hrb )
- it has an embedded database
- it has many ready to use "extensions"
- ...

best regards,
Lorenzo
From tomaz.zupan at orpo.si  Fri Sep 12 16:19:50 2008
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Fri Sep 12 16:20:45 2008
Subject: [Harbour] Problem with make_rpm.sh
In-Reply-To: <9257026e0809121112m7ff1feb0gd4ca9e8a5e0e0a38@mail.gmail.com>
References: <48CA96DE.8090601@gmail.com>
	<C3833CDE-2942-4555-9BC1-E3954D3E71FB@syenar.hu>
	<9257026e0809121112m7ff1feb0gd4ca9e8a5e0e0a38@mail.gmail.com>
Message-ID: <200809122219.51242.tomaz.zupan@orpo.si>

Hi !

If you do svn export instead of checkout and then try to build rpms, it fails:
[tomaz@tomaz-d harbour-1.0]$ ./make_rpm.sh
svn: warning: '.' is not a working copy
napaka: Name field must be present in package: (main package)
napaka: Version field must be present in package: (main package)
napaka: Release field must be present in package: (main package)
napaka: Summary field must be present in package: (main package)
napaka: Group field must be present in package: (main package)
napaka: License field must be present in package: (main package)

The problem seems to be in bin/pack_src.sh on line 50, which tries to run svn 
status on directory which is actualy not a svn working copy (it was exported 
not checkout-ed).

LP, Toma? 
From tomaz.zupan at orpo.si  Fri Sep 12 17:16:51 2008
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Fri Sep 12 17:17:49 2008
Subject: [Harbour] Problem with make_rpm.sh
In-Reply-To: <200809122219.51242.tomaz.zupan@orpo.si>
References: <48CA96DE.8090601@gmail.com>
	<9257026e0809121112m7ff1feb0gd4ca9e8a5e0e0a38@mail.gmail.com>
	<200809122219.51242.tomaz.zupan@orpo.si>
Message-ID: <200809122316.52326.tomaz.zupan@orpo.si>

On Friday 12 September 2008 22:19:50 Toma? Zupan wrote:
> The problem seems to be in bin/pack_src.sh on line 50, which tries to run
> svn status on directory which is actualy not a svn working copy (it was
> exported not checkout-ed).
>
Attached pach_src.sh works ok for me.

LP, Toma?
-------------- next part --------------
A non-text attachment was scrubbed...
Name: pack_src.sh
Type: application/x-shellscript
Size: 1369 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080912/179af59a/pack_src-0001.bin
From bedipritpal at hotmail.com  Fri Sep 12 19:13:15 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Sep 12 19:13:20 2008
Subject: [Harbour] 2008-09-12 16:05 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <19465697.post@talk.nabble.com>


2008-09-12 16:05 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * contrib/gtwvg/wvgutils.c
    ! HB_FUNC( WVT__MAKEDLGTEMPLATE )
         hb_retclen( ( LPSTR ) pdlgtemplate, ( ( ULONG ) p - ( ULONG )
pdlgtemplate ) ) ;
             =>
         hb_retclen( ( LPSTR ) pdlgtemplate, ( ( HB_PTRDIFF ) p - (
HB_PTRDIFF ) pdlgtemplate ) ) ;
      ; NG suggests that Viktor has fixed it but I cannot see to it. So
again...

  * contrib/gtwvg/wvgcore.c
    + Added <aPxlOff> parameter to the functions it was missing earlier.
      ; NOTE: Parameter sequence of all GUI components is a mess now, I mean
are not uniform.
      ; I will be introducing a new set of API calls on top of the existing
calls
        with standradized and normalized parameter passing. Developers can
take 
        advantage of new functions. Old API will still remain intact.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-09-12-16%3A05-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp19465697p19465697.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Fri Sep 12 19:15:40 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Sep 12 19:15:46 2008
Subject: [Harbour] wvtcore.c , aPxlOff
In-Reply-To: <19446074.post@talk.nabble.com>
References: <19446074.post@talk.nabble.com>
Message-ID: <19465714.post@talk.nabble.com>


Abe


Abeb wrote:
> 
> Please add aPxlOff parameter to more function in aPxlOff 
> like in WVT_DRAWLABELOBJ etc.
> 

It is done. Please report if there is any problems.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/wvtcore.c-%2C-aPxlOff-tp19446074p19465714.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From philb at philb.us  Fri Sep 12 19:42:28 2008
From: philb at philb.us (Phil Barnett)
Date: Fri Sep 12 19:42:30 2008
Subject: R: [Harbour] Suggestion for harbour web site?
In-Reply-To: <DB014C15-86FE-48D3-A64E-F0D5DED438C6@syenar.hu>
References: <531d7a750809092007x4c2d5647vcaffe10d766d001b@mail.gmail.com>
	<200809112104.32625.philb@philb.us>
	<DB014C15-86FE-48D3-A64E-F0D5DED438C6@syenar.hu>
Message-ID: <200809121942.28426.philb@philb.us>

On Friday 12 September 2008 04:37:26 am Szak?ts Viktor wrote:
> Hi Phil,
>
> Thanks for your great work on the server. I fully agree
> with all your concerns. Not to say that a dynamic site
> is an absolute no go in general, but only if properly
> justified, which - for Harbour - it is simply not.
>
> I'd suggest to "delegate" the website task to someone
> who is willing and able to actually start shuffling some
> bits around on the site (Renato's proposals are very nice
> candidates), because all I see is a lot of words, but
> there is little to none change, while the site layout
> is in its worst shape ever, lagging behind the 'product'
> itself.

You are exactly right.

Renato, do you want to update the site?

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From philb at philb.us  Fri Sep 12 19:43:55 2008
From: philb at philb.us (Phil Barnett)
Date: Fri Sep 12 19:43:57 2008
Subject: R: [Harbour] where is hbcom.lib?
In-Reply-To: <8438D367-EB32-46BF-99B6-79F08261D116@syenar.hu>
References: <AFB948164110ED43B5EB849E8DEEF03803760C@SRV02.deltain.net>
	<48CA19EA.4060700@mweb.co.za>
	<8438D367-EB32-46BF-99B6-79F08261D116@syenar.hu>
Message-ID: <200809121943.55591.philb@philb.us>

On Friday 12 September 2008 04:36:46 am Szak?ts Viktor wrote:
> Hi Alex,
>
> You can send it to me directly if you want,
> or if you .zip it it will probably be able to go
> to the list, too. (I think the limit is 100K
> for the raw message size)

I never bumped it up after the last rebuild.

The default limit in Mailman is 40k. I can bump it up again if you think it's 
a good idea. We haven't been getting much spam. (that makes it through, 
anyway)

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From sscc at mweb.co.za  Fri Sep 12 03:17:56 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Sep 12 19:45:49 2008
Subject: R: [Harbour] where is hbcom.lib?
In-Reply-To: <2925B4F2-7760-441D-9607-545823FE299A@syenar.hu>
References: <AFB948164110ED43B5EB849E8DEEF03803760C@SRV02.deltain.net>	<AFB948164110ED43B5EB849E8DEEF03803760F@SRV02.deltain.net>
	<2925B4F2-7760-441D-9607-545823FE299A@syenar.hu>
Message-ID: <48CA17A4.6000205@mweb.co.za>

Szak?ts Viktor wrote:
> Too bad it's C++ (unnecessarily BTW), non-MT friendly,
> Windows specific and it has an unknown license with
> a 3rd party copyright holder from a former commercial
> site.
> 
> I'd suggest to try hbtpathy.

I attach my efforts from a while ago - WinPort, it works for me, 
although I know that the setting of timeouts code sucks badly (well 
the rest might suck as well - but here it is). Any improvements 
gratefully accepted.

Regards
Alex
-------------- next part --------------
/*
 * xHarbour Project source code:
 * Windows communications library
 *
 * Copyright 2005 Alex Strickland <sscc@mweb.co.za>
 * www - http://www.xharbour.org
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2, or (at your option)
 * any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this software; see the file COPYING.  If not, write to
 * the Free Software Foundation, Inc., 59 Temple Place, Suite 330,
 * Boston, MA 02111-1307 USA (or visit the web site http://www.gnu.org/).
 *
 * As a special exception, the Harbour Project gives permission for
 * additional uses of the text contained in its release of Harbour.
 *
 * The exception is that, if you link the Harbour libraries with other
 * files to produce an executable, this does not by itself cause the
 * resulting executable to be covered by the GNU General Public License.
 * Your use of that executable is in no way restricted on account of
 * linking the Harbour library code into it.
 *
 * This exception does not however invalidate any other reasons why
 * the executable file might be covered by the GNU General Public License.
 *
 * This exception applies only to the code released by the Harbour
 * Project under the name Harbour.  If you copy code from other
 * Harbour Project or Free Software Foundation releases into a copy of
 * Harbour, as the General Public License permits, the exception does
 * not apply to the code that you add in this way.  To avoid misleading
 * anyone as to the status of such modified files, you must delete
 * this exception notice from them.
 *
 * If you write modifications of your own for Harbour, it is your choice
 * whether to permit this exception to apply to your modifications.
 * If you do not wish that, delete this exception notice.
 *
 */


#define MAXSERIAL                   16
//#define MAXPARALLEL                   3


#include "winportfcn.h"


// The following are from winbase.h

#define CBR_110             110
#define CBR_300             300
#define CBR_600             600
#define CBR_1200            1200
#define CBR_2400            2400
#define CBR_4800            4800
#define CBR_9600            9600
#define CBR_14400           14400
#define CBR_19200           19200
#define CBR_38400           38400
#define CBR_56000           56000
#define CBR_57600           57600
#define CBR_115200          115200
#define CBR_128000          128000
#define CBR_256000          256000

#define NOPARITY            0
#define ODDPARITY           1
#define EVENPARITY          2
#define MARKPARITY          3
#define SPACEPARITY         4

#define ONESTOPBIT          0
#define ONE5STOPBITS        1
#define TWOSTOPBITS         2

//
// DTR Control Flow Values.
//
#define DTR_CONTROL_DISABLE    0x00
#define DTR_CONTROL_ENABLE     0x01
#define DTR_CONTROL_HANDSHAKE  0x02

//
// RTS Control Flow Values
//
#define RTS_CONTROL_DISABLE    0x00
#define RTS_CONTROL_ENABLE     0x01
#define RTS_CONTROL_HANDSHAKE  0x02
//#define RTS_CONTROL_TOGGLE     0x03


#ifndef INVALID_HANDLE_VALUE
#define INVALID_HANDLE_VALUE    -1
#endif
-------------- next part --------------
A non-text attachment was scrubbed...
Name: winport.prg
Type: application/x-prg
Size: 41501 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080912/6a0dc515/winport-0001.bin
-------------- next part --------------
/*
 * xHarbour Project source code:
 * Windows communications library
 *
 * Copyright 2005 Alex Strickland <sscc@mweb.co.za>
 * www - http://www.xharbour.org
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2, or (at your option)
 * any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this software; see the file COPYING.  If not, write to
 * the Free Software Foundation, Inc., 59 Temple Place, Suite 330,
 * Boston, MA 02111-1307 USA (or visit the web site http://www.gnu.org/).
 *
 * As a special exception, the Harbour Project gives permission for
 * additional uses of the text contained in its release of Harbour.
 *
 * The exception is that, if you link the Harbour libraries with other
 * files to produce an executable, this does not by itself cause the
 * resulting executable to be covered by the GNU General Public License.
 * Your use of that executable is in no way restricted on account of
 * linking the Harbour library code into it.
 *
 * This exception does not however invalidate any other reasons why
 * the executable file might be covered by the GNU General Public License.
 *
 * This exception applies only to the code released by the Harbour
 * Project under the name Harbour.  If you copy code from other
 * Harbour Project or Free Software Foundation releases into a copy of
 * Harbour, as the General Public License permits, the exception does
 * not apply to the code that you add in this way.  To avoid misleading
 * anyone as to the status of such modified files, you must delete
 * this exception notice from them.
 *
 * If you write modifications of your own for Harbour, it is your choice
 * whether to permit this exception to apply to your modifications.
 * If you do not wish that, delete this exception notice.
 *
 */

//
// These defines are shared by the PRG and C source.
//

#define FCNCREATEFILE				1
#define FCNGETCOMMSTATE				2
#define FCNSETCOMMSTATE				3
#define FCNSETUPCOMM				4
#define FCNGETCOMMTIMEOUTS  		5
#define FCNSETCOMMTIMEOUTS  		6
#define FCNCLOSEHANDLE      		7
#define FCNWRITEFILE				8
#define FCNREADFILE					9
#define FCNGETCOMMMODEMSTATUS		10      // WinPort:Status()
#define FCNPURGECOMM				11
#define FCNCLEARCOMMERROR			12		// WinPort:QueueStatus()
#define ESCAPECOMMFUNCTION          13
#define FCNGETCOMMPROPERTIES        14


#define FCNMAX              		14


#define	WPDBGBASIC					0x01
#define WPDBGFLOW					0x02
#define WPDBGXTRAFLOW				0x04
#define WPDBGOTHER					0x08
#define WPDBGTIMEOUTS 				0x10
#define WPDBGQUEUE    				0x20

#define WPDBGALL      				0x3F
From harbour.01 at syenar.hu  Fri Sep 12 21:19:52 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 12 21:20:03 2008
Subject: R: [Harbour] where is hbcom.lib?
In-Reply-To: <48CA17A4.6000205@mweb.co.za>
References: <AFB948164110ED43B5EB849E8DEEF03803760C@SRV02.deltain.net>	<AFB948164110ED43B5EB849E8DEEF03803760F@SRV02.deltain.net>
	<2925B4F2-7760-441D-9607-545823FE299A@syenar.hu>
	<48CA17A4.6000205@mweb.co.za>
Message-ID: <A395CFBF-ED1A-42E8-AC44-60944A72D096@syenar.hu>

Hi Alex,

I'm in the process adding this to hbw32.

The only remaining problem is itoa() and ltoa()
which both generate a warning in MSVS 64-bit mode.
If you could find some alternative solution for
these (like snprintf()), I could finalize the code
and add it to the repository (1.1 that is).

Brgds,
Viktor

On 2008.09.12., at 9:17, Alex Strickland wrote:

> Szak?ts Viktor wrote:
>> Too bad it's C++ (unnecessarily BTW), non-MT friendly,
>> Windows specific and it has an unknown license with
>> a 3rd party copyright holder from a former commercial
>> site.
>> I'd suggest to try hbtpathy.
>
> I attach my efforts from a while ago - WinPort, it works for me,  
> although I know that the setting of timeouts code sucks badly (well  
> the rest might suck as well - but here it is). Any improvements  
> gratefully accepted.
>
> Regards
> Alex
> /*
> * xHarbour Project source code:
> * Windows communications library
> *
> * Copyright 2005 Alex Strickland <sscc@mweb.co.za>
> * www - http://www.xharbour.org
> *
> * This program is free software; you can redistribute it and/or modify
> * it under the terms of the GNU General Public License as published by
> * the Free Software Foundation; either version 2, or (at your option)
> * any later version.
> *
> * This program is distributed in the hope that it will be useful,
> * but WITHOUT ANY WARRANTY; without even the implied warranty of
> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
> * GNU General Public License for more details.
> *
> * You should have received a copy of the GNU General Public License
> * along with this software; see the file COPYING.  If not, write to
> * the Free Software Foundation, Inc., 59 Temple Place, Suite 330,
> * Boston, MA 02111-1307 USA (or visit the web site http://www.gnu.org/) 
> .
> *
> * As a special exception, the Harbour Project gives permission for
> * additional uses of the text contained in its release of Harbour.
> *
> * The exception is that, if you link the Harbour libraries with other
> * files to produce an executable, this does not by itself cause the
> * resulting executable to be covered by the GNU General Public  
> License.
> * Your use of that executable is in no way restricted on account of
> * linking the Harbour library code into it.
> *
> * This exception does not however invalidate any other reasons why
> * the executable file might be covered by the GNU General Public  
> License.
> *
> * This exception applies only to the code released by the Harbour
> * Project under the name Harbour.  If you copy code from other
> * Harbour Project or Free Software Foundation releases into a copy of
> * Harbour, as the General Public License permits, the exception does
> * not apply to the code that you add in this way.  To avoid misleading
> * anyone as to the status of such modified files, you must delete
> * this exception notice from them.
> *
> * If you write modifications of your own for Harbour, it is your  
> choice
> * whether to permit this exception to apply to your modifications.
> * If you do not wish that, delete this exception notice.
> *
> */
>
>
> #define MAXSERIAL                   16
> //#define MAXPARALLEL                   3
>
>
> #include "winportfcn.h"
>
>
> // The following are from winbase.h
>
> #define CBR_110             110
> #define CBR_300             300
> #define CBR_600             600
> #define CBR_1200            1200
> #define CBR_2400            2400
> #define CBR_4800            4800
> #define CBR_9600            9600
> #define CBR_14400           14400
> #define CBR_19200           19200
> #define CBR_38400           38400
> #define CBR_56000           56000
> #define CBR_57600           57600
> #define CBR_115200          115200
> #define CBR_128000          128000
> #define CBR_256000          256000
>
> #define NOPARITY            0
> #define ODDPARITY           1
> #define EVENPARITY          2
> #define MARKPARITY          3
> #define SPACEPARITY         4
>
> #define ONESTOPBIT          0
> #define ONE5STOPBITS        1
> #define TWOSTOPBITS         2
>
> //
> // DTR Control Flow Values.
> //
> #define DTR_CONTROL_DISABLE    0x00
> #define DTR_CONTROL_ENABLE     0x01
> #define DTR_CONTROL_HANDSHAKE  0x02
>
> //
> // RTS Control Flow Values
> //
> #define RTS_CONTROL_DISABLE    0x00
> #define RTS_CONTROL_ENABLE     0x01
> #define RTS_CONTROL_HANDSHAKE  0x02
> //#define RTS_CONTROL_TOGGLE     0x03
>
>
> #ifndef INVALID_HANDLE_VALUE
> #define INVALID_HANDLE_VALUE    -1
> #endif
> <winport.prg>/*
> * xHarbour Project source code:
> * Windows communications library
> *
> * Copyright 2005 Alex Strickland <sscc@mweb.co.za>
> * www - http://www.xharbour.org
> *
> * This program is free software; you can redistribute it and/or modify
> * it under the terms of the GNU General Public License as published by
> * the Free Software Foundation; either version 2, or (at your option)
> * any later version.
> *
> * This program is distributed in the hope that it will be useful,
> * but WITHOUT ANY WARRANTY; without even the implied warranty of
> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
> * GNU General Public License for more details.
> *
> * You should have received a copy of the GNU General Public License
> * along with this software; see the file COPYING.  If not, write to
> * the Free Software Foundation, Inc., 59 Temple Place, Suite 330,
> * Boston, MA 02111-1307 USA (or visit the web site http://www.gnu.org/) 
> .
> *
> * As a special exception, the Harbour Project gives permission for
> * additional uses of the text contained in its release of Harbour.
> *
> * The exception is that, if you link the Harbour libraries with other
> * files to produce an executable, this does not by itself cause the
> * resulting executable to be covered by the GNU General Public  
> License.
> * Your use of that executable is in no way restricted on account of
> * linking the Harbour library code into it.
> *
> * This exception does not however invalidate any other reasons why
> * the executable file might be covered by the GNU General Public  
> License.
> *
> * This exception applies only to the code released by the Harbour
> * Project under the name Harbour.  If you copy code from other
> * Harbour Project or Free Software Foundation releases into a copy of
> * Harbour, as the General Public License permits, the exception does
> * not apply to the code that you add in this way.  To avoid misleading
> * anyone as to the status of such modified files, you must delete
> * this exception notice from them.
> *
> * If you write modifications of your own for Harbour, it is your  
> choice
> * whether to permit this exception to apply to your modifications.
> * If you do not wish that, delete this exception notice.
> *
> */
>
> //
> // These defines are shared by the PRG and C source.
> //
>
> #define FCNCREATEFILE				1
> #define FCNGETCOMMSTATE				2
> #define FCNSETCOMMSTATE				3
> #define FCNSETUPCOMM				4
> #define FCNGETCOMMTIMEOUTS  		5
> #define FCNSETCOMMTIMEOUTS  		6
> #define FCNCLOSEHANDLE      		7
> #define FCNWRITEFILE				8
> #define FCNREADFILE					9
> #define FCNGETCOMMMODEMSTATUS		10      // WinPort:Status()
> #define FCNPURGECOMM				11
> #define FCNCLEARCOMMERROR			12		// WinPort:QueueStatus()
> #define ESCAPECOMMFUNCTION          13
> #define FCNGETCOMMPROPERTIES        14
>
>
> #define FCNMAX              		14
>
>
> #define	WPDBGBASIC					0x01
> #define WPDBGFLOW					0x02
> #define WPDBGXTRAFLOW				0x04
> #define WPDBGOTHER					0x08
> #define WPDBGTIMEOUTS 				0x10
> #define WPDBGQUEUE    				0x20
>
> #define WPDBGALL      				0x3F
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vailtom at gmail.com  Fri Sep 12 22:01:20 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Fri Sep 12 22:03:24 2008
Subject: Fw: [Harbour] Suggestion for harbour web site?
Message-ID: <1E3A7E8548744E708BDBF71586AEB7AF@Home>

Absolutely! I need to be sent to me the correct texts to update the site. 
What is the best way to do this?
From vailtom at gmail.com  Fri Sep 12 22:06:40 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Fri Sep 12 22:06:57 2008
Subject: Fw: [Harbour] Suggestion for harbour web site?
Message-ID: <4728B542CCE642FEAC32573D07F47DB8@Home>

Absolutely! I need to be sent to me the correct texts to update the site. 
What is the best way to do this?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080912/fd9b3b12/attachment.html
From lorenzo.fiorini at gmail.com  Sat Sep 13 03:22:22 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Sep 13 03:22:28 2008
Subject: [Harbour] hbvpdf functions collisions
Message-ID: <9257026e0809130022s1507af8fy106abfa82d7cf102@mail.gmail.com>

I'm trying to replace my custom pdf lib to hbvpdf but I find that it
defines "well known" function names.

Simply a report to anyone interested.

best regards,
Lorenzo

Making libharbour-1.0.1.so...
./libhbct.a/numat.o: In function `HB_FUN_NUMAT':
numat.c:(.text+0x0): multiple definition of `HB_FUN_NUMAT'
./libhbvpdf.a/hbvpdf.o:hbvpdf.c:(.text+0x2e0): first defined here
./libhbct.a/token1.o: In function `HB_FUN_NUMTOKEN':
token1.c:(.text+0x910): multiple definition of `HB_FUN_NUMTOKEN'
./libhbvpdf.a/hbvpdf.o:hbvpdf.c:(.text+0x360): first defined here
./libhbct.a/token1.o: In function `HB_FUN_TOKEN':
token1.c:(.text+0x920): multiple definition of `HB_FUN_TOKEN'
./libhbvpdf.a/hbvpdf.o:hbvpdf.c:(.text+0x340): first defined here
./libhbct.a/token1.o: In function `HB_FUN_ATTOKEN':
token1.c:(.text+0x930): multiple definition of `HB_FUN_ATTOKEN'
./libhbvpdf.a/hbvpdf.o:hbvpdf.c:(.text+0x320): first defined here
./libhbct.a/files.o: In function `HB_FUN_FILESIZE':
files.c:(.text+0x700): multiple definition of `HB_FUN_FILESIZE'
./libhbvpdf.a/hbvpdf.o:hbvpdf.c:(.text+0x2c0): first defined here
collect2: ld returned 1 exit status
From harbour.01 at syenar.hu  Sat Sep 13 03:39:50 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Sep 13 03:39:53 2008
Subject: [Harbour] [1.0] 2008-09-13 09:37 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c91573$Blat.v2.6.2$e76c8fe6$17bc35a38c6e@127.0.0.1>

I'll retrofit these changes to trunk later.

2008-09-13 09:37 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbvpdf/hbvpdf.prg
    ! Generic support functions made STATIC to avoid collision 
      with similarly named functions in other libs (like hbct).

  * contrib/hbvpdf/hbvpdf.prg
  * contrib/hbvpdf/hbvpdft.prg
    * Using hb_run() instead of RUN and __run().
--
Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Sat Sep 13 03:42:45 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Sep 13 03:42:50 2008
Subject: [Harbour] [1.0] 2008-09-13 09:37 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
In-Reply-To: <01c91573$Blat.v2.6.2$e76c8fe6$17bc35a38c6e@127.0.0.1>
References: <01c91573$Blat.v2.6.2$e76c8fe6$17bc35a38c6e@127.0.0.1>
Message-ID: <9257026e0809130042qd0b7cbbm173c92d5d91c5718@mail.gmail.com>

On Sat, Sep 13, 2008 at 9:39 AM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:
> I'll retrofit these changes to trunk later.
>
> 2008-09-13 09:37 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>  * contrib/hbvpdf/hbvpdf.prg
>    ! Generic support functions made STATIC to avoid collision
>      with similarly named functions in other libs (like hbct).
>
>  * contrib/hbvpdf/hbvpdf.prg
>  * contrib/hbvpdf/hbvpdft.prg
>    * Using hb_run() instead of RUN and __run().

Thanks.

swpruncmd simply does a copy and I've replaced it with "copy file x to y"

There also many functions that should be static ( f.e. filepos ).

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sat Sep 13 03:44:52 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Sep 13 03:44:53 2008
Subject: [Harbour] [1.0] 2008-09-13 09:43 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c91574$Blat.v2.6.2$9b8854c4$1338a9cd6cda@127.0.0.1>

2008-09-13 09:43 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbver.h
  * harbour-ce-spec
  * harbour-w32-spec
  * harbour.spec
    * Removed 'dev' from the version number.
    ; NOTE: NOT to merge this with trunk.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Sep 13 03:50:29 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Sep 13 03:50:40 2008
Subject: [Harbour] 2008-09-12 16:05 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <19465697.post@talk.nabble.com>
References: <19465697.post@talk.nabble.com>
Message-ID: <373141BB-448D-450C-9748-E83F515A0303@syenar.hu>

>
Hi Pritpal,

> 2008-09-12 16:05 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>  * contrib/gtwvg/wvgutils.c
>    ! HB_FUNC( WVT__MAKEDLGTEMPLATE )
>         hb_retclen( ( LPSTR ) pdlgtemplate, ( ( ULONG ) p - ( ULONG )
> pdlgtemplate ) ) ;
>             =>
>         hb_retclen( ( LPSTR ) pdlgtemplate, ( ( HB_PTRDIFF ) p - (
> HB_PTRDIFF ) pdlgtemplate ) ) ;
>      ; NG suggests that Viktor has fixed it but I cannot see to it. So
> again...

This is because I'm working in branches/harbour-1.0 [to not disturb
Przemek in adding the MT feature], and you're working in trunk.

I'll later sync the 1.0 changes - like the above - with the trunk in
one pass.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Sep 13 03:55:42 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Sep 13 03:55:43 2008
Subject: [Harbour] [1.0]
Message-ID: <01c91576$Blat.v2.6.2$1ed514d8$10a02e51e00@127.0.0.1>

; Merging changes to 1.0 branch from trunk r9366.

2008-09-12 16:05 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * contrib/gtwvg/wvgcore.c
    + Added <aPxlOff> parameter to the functions it was missing earlier.
      ; NOTE: Parameter sequence of all GUI components is a mess now, I mean are not uniform.
      ; I will be introducing a new set of API calls on top of the existing calls
        with standradized and normalized parameter passing. Developers can take 
        advantage of new functions. Old API will still remain intact.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Sep 13 03:59:40 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Sep 13 03:59:49 2008
Subject: [Harbour] [1.0] 2008-09-13 09:37 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
In-Reply-To: <9257026e0809130042qd0b7cbbm173c92d5d91c5718@mail.gmail.com>
References: <01c91573$Blat.v2.6.2$e76c8fe6$17bc35a38c6e@127.0.0.1>
	<9257026e0809130042qd0b7cbbm173c92d5d91c5718@mail.gmail.com>
Message-ID: <F1C8DBF2-6BEC-42B2-BA58-472766BC09DD@syenar.hu>

Hi Lorenzo,

>> * contrib/hbvpdf/hbvpdf.prg
>> * contrib/hbvpdf/hbvpdft.prg
>>   * Using hb_run() instead of RUN and __run().
>
> Thanks.
>
> swpruncmd simply does a copy and I've replaced it with "copy file x  
> to y"
>
> There also many functions that should be static ( f.e. filepos ).

I've made it STATIC in this commit. I tried to do this
for all internal support functions, if there is anything
left, please tell.

[ In branches/harbour-1.0 that is. trunk is not yet updated. ]

Could you commit the copy patch? There are also two
such hacks in hbvpdft.prg.

[ Pls commit to harbour-1.0 if possible. ]

Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Sep 13 04:04:37 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Sep 13 04:04:46 2008
Subject: [Harbour] do {} while( 0 ) vs. {}
Message-ID: <6AAE2D0F-4714-41DB-9BD6-64FE82A67EDE@syenar.hu>

Hi all,

What is the reason we're using 'do { <code> } while( 0 )'
to enclose large macro blocks, instead of using plain '{ <code> }' ?

F.e. HB_ORD2DBL() in hbdefs.h.

Brgds,
Viktor

From mhsabado at gmail.com  Sat Sep 13 04:10:30 2008
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Sat Sep 13 04:10:48 2008
Subject: [Harbour] HGetValueAt() Bound Error
In-Reply-To: <48cb7117.37322c0a.094f.478aSMTPIN_ADDED@mx.google.com>
References: <48cb7117.37322c0a.094f.478aSMTPIN_ADDED@mx.google.com>
Message-ID: <48CB7576.8030502@gmail.com>


Hi,

I encountered problem with function HGetValueAt() from latest SVN with 
the following error:

Error BASE/1187 Bound Error: HB_HVALUEAT

Thanks for any help.

Regards,
Mario
From harbour.01 at syenar.hu  Sat Sep 13 04:29:49 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Sep 13 04:29:51 2008
Subject: [Harbour] [1.0] 2008-09-13 10:28 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c9157a$Blat.v2.6.2$e3190652$173428a6d98c@127.0.0.1>

; I'll retrofit these changes to trunk later.

2008-09-13 10:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/gtwvg/wvgcore.c
  * contrib/gtwvg/wvgutils.c
    ! Fixed 64-bit problems.
    ; Pritpal, could you please review and test these changes?
--
Brgds,
Viktor

From mbelgrano at deltain.it  Sat Sep 13 05:50:34 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Sep 13 05:50:47 2008
Subject: [Harbour] Suggestion for harbour web site?
In-Reply-To: <1E3A7E8548744E708BDBF71586AEB7AF@Home>
References: <1E3A7E8548744E708BDBF71586AEB7AF@Home>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF7A@SRV02.deltain.net>

Best way
For update the site winscp
For create and elaborate information you can use a sharing document on
google doc
Here you can share editing with other user
You open your gmail account (www.gmail.com) then open document link 
then create new document as "harbour general information" then save and
sharing 
(not need a gmail account only a generic google account for other
editor)
I have sent you an invitation from my google document so you can try


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Vailton Renato
Sent: Saturday, September 13, 2008 4:01 AM
To: harbour@harbour-project.org
Subject: Fw: [Harbour] Suggestion for harbour web site?

Absolutely! I need to be sent to me the correct texts to update the
site. 
What is the best way to do this?
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Sat Sep 13 06:31:16 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Sep 13 06:31:17 2008
Subject: [Harbour] [1.0] 2008-09-13 12:28 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c9158b$Blat.v2.6.2$da62c1f4$14a8fd4c7c00@127.0.0.1>

; I'll retrofit these changes to trunk later.

2008-09-13 12:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbw32/Makefile
   * contrib/hbw32/common.mak
   * contrib/hbw32/hbw32.ch
   + contrib/hbw32/hbwin.h
   + contrib/hbw32/win_prt.c
   + contrib/hbw32/win_tprt.prg
   + contrib/hbw32/tests/testprt1.prg
   + contrib/hbw32/tests/testprt2.prg
     + Added Windows COM port handling functions.
       Contributed by Alex Strickland.
     ; I did some changes to clean warnings, few 64-bit issues, 
       changed to use safe string functions, integrated 
       the header into hbw32.ch, added a new general C level 
       header, split BEGINDUMP into separate .c function, 
       changed to ANSI C comments, marked statics with s_, 
       fixed a few trashed string buffers and leaks in some 
       error cases. Separated tests into distinct .prgs.
       Fixed for UNICODE mode. Minor optimizations, formatting.
     ; TODO: Test WinCE build.
     ; Please test, I don't have any COM ports on my system.
--
Brgds,
Viktor

From mbelgrano at deltain.it  Sat Sep 13 07:06:43 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Sep 13 07:07:06 2008
Subject: [Harbour] Harbour work with bcc32 ver 6.1?
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF7C@SRV02.deltain.net>

C++Builder(r) 2009 include CodeGear C++ Compiler 6.10 (bcc32)
http://www.codegear.com/products/cppbuilder/feature-matrix/
have anyone experience with harbour
I have a trial version from http://cc.codegear.com/free/cppbuilder
What I do for compiling harbour? (cflag,ecc)
Wich is the better way for do a speed test for this c++ compiler?

Massimo Belgrano

From harbour.01 at syenar.hu  Sat Sep 13 07:26:32 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Sep 13 07:26:35 2008
Subject: [Harbour] [1.0] 2008-09-13 12:28 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c91593$Blat.v2.6.2$92db6f40$17483449282c@127.0.0.1>

; I'll retrofit these changes to trunk later.

2008-09-13 12:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * doc/whatsnew.txt
    * Updated.

  * common.mak
    * Restored 1.0.0 compatible .dll name format.
    ; NOTE: NOT to merge this with trunk.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Sep 13 07:36:07 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Sep 13 07:36:08 2008
Subject: [Harbour] [1.0] 2008-09-13 13:34 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c91594$Blat.v2.6.2$e9931666$153462789020@127.0.0.1>

; I'll retrofit these changes to trunk later.

2008-09-13 13:34 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * doc/dirstruc.txt
     * Updated.

   - contrib/hbgf/hbgfw32
   + contrib/hbgf/hbgfwin
   * contrib/hbgf/tests/bld_b32.bat
   * contrib/hbgf/tests/bld_vc.bat
   * contrib/hbgf/Makefile
   * contrib/hbgf/hbgfwin/common.mak
   * contrib/hbgf/hbgfwin/button.prg
   * contrib/hbgf/hbgfwin/winctrl.prg
   * contrib/hbgf/hbgfwin/form.prg
   * contrib/hbgf/hbgfwin/menuitem.prg
   * contrib/hbgf/hbgfwin/menu.prg
   * contrib/hbgf/hbgfwin/edit.prg
   * contrib/hbgf/hbgfwin/Makefile
   - contrib/hbgf/hbgfwin/win32.c
   + contrib/hbgf/hbgfwin/winapi.c
   - contrib/hbgf/hbgfwin/hbgfw32.ch
   + contrib/hbgf/hbgfwin/hbgfwin.ch
     * Removed some '32's.
--
Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Sat Sep 13 12:06:12 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Sep 13 12:06:21 2008
Subject: [Harbour] [1.0] 2008-09-13 13:34 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
In-Reply-To: <01c91594$Blat.v2.6.2$e9931666$153462789020@127.0.0.1>
References: <01c91594$Blat.v2.6.2$e9931666$153462789020@127.0.0.1>
Message-ID: <9257026e0809130906k5e461d47p95c6b472e65549e7@mail.gmail.com>

On Sat, Sep 13, 2008 at 1:36 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> 2008-09-13 13:34 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * doc/dirstruc.txt
>     * Updated.
> ...
>     * Removed some '32's.

What about changing mingw32 to mingw? ( sooner or later there'll be
the 64 bit version ).

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sat Sep 13 12:17:45 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Sep 13 12:18:09 2008
Subject: [Harbour] [1.0] 2008-09-13 13:34 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
In-Reply-To: <9257026e0809130906k5e461d47p95c6b472e65549e7@mail.gmail.com>
References: <01c91594$Blat.v2.6.2$e9931666$153462789020@127.0.0.1>
	<9257026e0809130906k5e461d47p95c6b472e65549e7@mail.gmail.com>
Message-ID: <6E8F5A3F-1A69-4A01-A31C-00CAAB71BFAC@syenar.hu>

Hi Lorenzo,

Yes, it's on my list of TODOs, I'll do it in 1.1, along
with some other related change, like
*_b32.* -> *_bc plus dir names (64-bit BCC is also coming),
HB_ARCHITECTURE w32 -> win,
hbw32 -> hbwin,
hbw32.ch -> hbwin.ch,
HB_OS_WIN_32 -> HB_OS_WIN

All references to Win32 and W32 in texts, comments should be
changed to simply Windows.

Brgds,
Viktor

On 2008.09.13., at 18:06, Lorenzo Fiorini wrote:

> On Sat, Sep 13, 2008 at 1:36 PM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
>> 2008-09-13 13:34 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>>  * doc/dirstruc.txt
>>    * Updated.
>> ...
>>    * Removed some '32's.
>
> What about changing mingw32 to mingw? ( sooner or later there'll be
> the 64 bit version ).
>
> best regards,
> Lorenzo

From toninhofwi at yahoo.com.br  Sat Sep 13 13:07:52 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sat Sep 13 13:01:07 2008
Subject: [Harbour] About contrib hbole
Message-ID: <bjsnc4pn73shm8rl42irh44ipkes427t77@4ax.com>

Hi,

I?m spend a lot of time trying to use contrib\hbole without success
with FWH  (gpf).  So I contacted Antonio and he tell me to use
contrib\hbw32 and it works fine.  My question is: What diff about the
OLE of these two libs please?  

Thanks and best regards,


Toninho.
__________________________________________________
Fa?a liga??es para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From harbour.01 at syenar.hu  Sat Sep 13 13:12:06 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Sep 13 13:12:15 2008
Subject: [Harbour] About contrib hbole
In-Reply-To: <bjsnc4pn73shm8rl42irh44ipkes427t77@4ax.com>
References: <bjsnc4pn73shm8rl42irh44ipkes427t77@4ax.com>
Message-ID: <4BBC6C02-3925-40C0-88B2-DC8332136A3E@syenar.hu>

Hi,

hbw32 uses ugly internal VM hacks to do its job, plus
it has some extra features (I don't know any specifics).

hbole could probably be fixed, but that would need
volunteers to make it happen. If no one is willing to
do so, we may just as well remove it and try to clean
OLE in hbw32.

Brgds,
Viktor

On 2008.09.13., at 19:07, Toninho@fwi wrote:

> Hi,
>
> I?m spend a lot of time trying to use contrib\hbole without success
> with FWH  (gpf).  So I contacted Antonio and he tell me to use
> contrib\hbw32 and it works fine.  My question is: What diff about the
> OLE of these two libs please?
>
> Thanks and best regards,
>
>
> Toninho.
> __________________________________________________
> Fa?a liga??es para outros computadores com o novo Yahoo! Messenger
> http://br.beta.messenger.yahoo.com/
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Sat Sep 13 13:18:25 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Sep 13 13:18:34 2008
Subject: [Harbour] About contrib hbole
In-Reply-To: <4BBC6C02-3925-40C0-88B2-DC8332136A3E@syenar.hu>
References: <bjsnc4pn73shm8rl42irh44ipkes427t77@4ax.com>
	<4BBC6C02-3925-40C0-88B2-DC8332136A3E@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF7E@SRV02.deltain.net>

Either work only on w32 platform?


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Saturday, September 13, 2008 7:12 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] About contrib hbole

Hi,

hbw32 uses ugly internal VM hacks to do its job, plus
it has some extra features (I don't know any specifics).

hbole could probably be fixed, but that would need
volunteers to make it happen. If no one is willing to
do so, we may just as well remove it and try to clean
OLE in hbw32.

Brgds,
Viktor

On 2008.09.13., at 19:07, Toninho@fwi wrote:

> Hi,
>
> I?m spend a lot of time trying to use contrib\hbole without success
> with FWH  (gpf).  So I contacted Antonio and he tell me to use
> contrib\hbw32 and it works fine.  My question is: What diff about the
> OLE of these two libs please?
>
> Thanks and best regards,
>
>
> Toninho.
> __________________________________________________
> Fa?a liga??es para outros computadores com o novo Yahoo! Messenger
> http://br.beta.messenger.yahoo.com/
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Sat Sep 13 13:18:44 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sat Sep 13 13:19:28 2008
Subject: [Harbour] ChangeLog 2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>

2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbpp.h
  * harbour/include/hbvm.h
  * harbour/include/hbcomp.h
  * harbour/include/hbcompdf.h
  * harbour/include/hbtrace.h
  * harbour/include/hbapilng.h
  * harbour/include/hbinit.h
  * harbour/source/rtl/langapi.c
  * harbour/source/pp/ppcore.c
  * harbour/source/pp/hbpp.c
  * harbour/source/vm/itemapi.c
  * harbour/source/vm/hvm.c
  * harbour/source/common/hbver.c
  * harbour/source/common/hbtrace.c
  * harbour/source/common/expropt2.c
  * harbour/source/compiler/complex.c
  * harbour/source/compiler/hbident.c
  * harbour/source/compiler/hbfunchk.c
    * changed some declarations from 'char *' to 'const char *' and
      fixed casting for some more pedantic compilers

  * harbour/source/pp/ppcore.c
    ! fixed one typo which could cause memory leak and even GPF

  * harbour/common.mak
  * harbour/source/vm/Makefile
  * harbour/source/rtl/Makefile
  - harbour/source/rtl/set.c
  + harbour/source/vm/set.c
  * harbour/include/hbstack.h
  * harbour/source/vm/estack.c
    * moved from RTL to HVM
    * eliminated hb_set global structure
    * moved set structure to HVM stack
    + added internal function hb_setClone() which is used to create
      copy of SET structure for child threads
    * hidden HB_SET_STRUCT declaration - 3-rd part code must not access it
      directly. Dedicated hb_set*() functions should be used instead.
    + added new function:
         BOOL hb_setSetItem( HB_set_enum set_specifier, PHB_ITEM pItem )
      which allow to change some set by 3-rd party code.
      TODO: not all SETs can be changed yet - if someone have a while
            then please add code for missing ones.

  * harbour/include/set.ch
  * harbour/include/hbset.h
    + added _SET_CODEPAGE which works like _SET_LANGUAGE giving common
      interface

  * harbour/include/hbsetup.h
    + added HB_CODEPAGE_DEFAULT which works like HB_LANG_DEFAULT

  * harbour/source/vm/hvm.c
    ! fixed builds which uses non EN lang or code page modules
      by forcing linking the chosen ones

  * harbour/include/hbstack.h
  * harbour/source/vm/estack.c
  * harbour/include/hbapicdp.h
  * harbour/source/rtl/cdpapi.c
    - removed global code page variable: hb_cdp_page and moved
      code page settings to HVM stack
    + added new function hb_cdpID() which returns current code page
      character ID
    + added new functions hb_vmCDP() and hb_vmSetCDP() to get/set
      active for given thread code page structure

  * harbour/include/hbstack.h
  * harbour/source/vm/estack.c
  * harbour/include/hbapilng.h
  * harbour/source/rtl/langapi.c
    + moved lang setting to HVM stack
    + added new functions hb_vmLang() and hb_vmSetLang() to get/set
      active for given thread language module

  * harbour/include/hbvmpub.h
  * harbour/include/hbstack.h
  * harbour/include/hbapi.h
  * harbour/source/vm/estack.c
  * harbour/source/vm/dynsym.c
  * harbour/source/vm/itemapi.c
  * harbour/source/vm/memvars.c
    * changed memvar handles for HB_HANDLE to void * which is directly
      casted to PHB_ITEM - new memvar references
    * changed HB_DYNS declarations for MT mode. In MT mode HB_DYNS does
      not contain area and memvar handles which are moved to thread
      local HVM stack
    + added array for thread local memvar and area handles to HVM stack
    % eliminated global continues array with all memvars and detached locals
    % changed HB_IT_MEMVAR to use pointers to HB_ITEM directly - it resolve
      synchronization problems in MT mode and should also improve the speed
      and reduce memory usage. It should be well visible in applications which
      uses lot of detached locals.
    - removed hb_memvarsInit() and hb_memvarsFree() - they are not necessary
      now because we do not longer use array with all allocated memvars
      and detached local and private stack initialization is made
      automatically
    + added internal functions hb_dynsymGetMemvar()/hb_dynsymSetMemvar()
    + added hb_memvarGetValueBySym() for debugger
    * moved PRIVATE variable stack to HVM stack
    * eliminated all static variables in memvars module

  * harbour/include/hbstack.h
  * harbour/source/vm/estack.c
  * harbour/source/rtl/fserror.c
    * moved IO errors to HVM stack
    + added special IO error handling which works without HVM stack
      It allows to use hb_fs*() functions without allocated stack
      by 3-rd party threads.

  * harbour/source/rtl/filesys.c
    * moved hb_fsCurDir() to HVM stack with special handling to work
      with HVM stack like IO errors

  * harbour/source/rdd/workarea.c
    * allocated RDD node array in bigger peaces to reduce later RT
      reallocations in MT mode. If user want to add dynamically more
      then 64 RDDs then it should synchronize this operation himself.

  * harbour/source/rdd/wacore.c
    * moved WA list, current WA, default RDD and neteer() flag to HVM stack

  * harbour/include/hbdefs.h
    - removed HB_HANDLE declaration

  * harbour/include/hbapi.h
    - removed HB_VALUE structure - it's not longer used due to different
      memvar handling
    * updated hb_struMemvar to new memvar handling
    * replaced hb_vmIsLocalRef() and hb_memvarsIsMemvarRef() with
      hb_vmIsStackRef() which respect multiple stack and new memvar
      and static structures and location in GC mark pass.

  * harbour/include/hbstack.h
  * harbour/source/vm/estack.c
  * harbour/source/vm/hvm.c
    + added support for thread specific data located on HVM stack
      Now it's possible to allocate static variables which are
      local to thread. Such variables are allocated on HVM stack
      and automatically destroyed. To declare new TSD variable use:
         HB_TSD_NEW( <name>, <size>, <init>, <destruct> )
      <name> - name of variable which holds TSD handler
      <size> - size of TSD are which has to be allocated
      <init> - init function, executed when new TSD is allocated by thread
               (thread access given TSD 1-st time). This function receives
               void * pointer to allocated area.
      <destruct> - destructor function executed when HVM stack is destroyed
      f.e.:
         static HB_TSD_NEW( s_scrData, sizeof( HB_SCRDATA ),
                            NULL, hb_xSaveRestRelease );
      To initialize dynamically allocated TSD variable use:
         HB_TSD_INIT( <name>, <size>, <init>, <destruct> )
      Pointer to TSD can be accessed using hb_stackGetTSD( &<name> )
      where <name> is name of variable which holds TSD handler, f.e.:
         PHB_SCRDATA pScrData = ( PHB_SCRDATA ) hb_stackGetTSD( &s_scrData );
      See source/rtl/xsavescr.c as an example
      It's also possible to test if data has been already allocated for
      current thread by:
         hb_stackTestTSD( &<name> ) => pData
      it works like hb_stackGetTSD() but return NULL if current thread data
      has not been allocated yet.

  * harbour/include/hbstack.h
  * harbour/source/vm/estack.c
    * changed hb_stack location to thread local storage in MT mode
    + added functions and macros to access/assign new HVM stack members
    + changed garbage collection mark functions to work with multiple
      stacks, thread local static and memvar variables

  * harbour/source/rtl/xsavescr.c
    * use TSD data for screen buffer to make __XSAVESCREEN()/__XRESTSCREEN()
      thread independent

  * harbour/source/rtl/idle.c
    * use TSD data for idle task settings and codeblocks
    - removed hb_idleShutDown() - it's not longer necessary

  * harbour/source/rtl/setkey.c
    * use TSD data for allocated keys to make SETKEY() thread independent

  * harbour/source/rtl/math.c
    * moved math error handler, math error block, math error mode and
      math error structure to TSD

  * harbour/source/rtl/errorapi.c
    * moved error handler, error block, error launch counter and DOS error
      value to TSD

  * harbour/source/rtl/inkey.c
    * moved inkey "before" and "after" blocks to TSD

  * harbour/source/rdd/hsx/hsx.c
    * moved HSX handles array to TSD

  * harbour/include/hbapigt.h
  * harbour/source/rtl/console.c
    - removed hb_setkeyInit() and hb_setkeyExit() - they are not longer
      necessary, allocated resources will be freed by TSD destructor
      function

  * harbour/include/hbapi.h
  * harbour/source/rtl/console.c
    * removed hb_conXSaveRestRelease() - it's not longer necessary,
      allocated resources will be freed by TSD destructor function

  * harbour/source/vm/macro.c
    * moved s_macroFlags to TSD

  * harbour/source/rtl/accept.c
    * moved accept buffer to TSD

  * harbour/include/hbcomp.h
  * harbour/include/hbcompdf.h
  * harbour/include/hbxvm.h
  * harbour/source/compiler/hbmain.c
  * harbour/source/compiler/hbfix.c
  * harbour/source/compiler/hbpcode.c
  * harbour/source/compiler/hbdead.c
  * harbour/source/compiler/complex.c
  * harbour/source/compiler/genc.c
  * harbour/source/compiler/gencc.c
  * harbour/source/compiler/hbopt.c
  * harbour/source/compiler/hblbl.c
  * harbour/source/compiler/hbstripl.c
  * harbour/source/compiler/harbour.y
  * harbour/source/compiler/harbour.yyc
  * harbour/source/compiler/harbour.yyh
  * harbour/source/vm/hvm.c
    + added new PCODE HB_P_THREADSTATICS
    + added support for static variables which are local to thread:
         THREAD STATIC <varname [:= <exp>], ...>
      They work like normal static variables but each thread operates
      on its own copy.
    * added protection against possible double call to hb_xfree()
      It can happen due to wrong marking expressions as used by bison
      and executing destructors after our free code when syntax error
      appear.

  * harbour/source/rtl/perfuncs.prg
  * harbour/source/rtl/menuto.prg
  * harbour/source/rtl/getlist.prg
  * harbour/source/rtl/readvar.prg
  * harbour/source/rtl/text.prg
    * use THREAD STATIC variables to make above code MT safe

  * harbour/include/hbgtcore.h
  * harbour/source/rtl/hbgtcore.c
    + added hb_gt_BaseFree() which will release current GT pointer
      locked by hb_gt_Base() function. This function will be used
      to optional automatic GT access synchronization when threads
      share the same GT.

  * harbour/source/rtl/gtapi.c
  * harbour/source/rtl/inkeyapi.c
  * harbour/source/rtl/mouseapi.c
  * harbour/contrib/hbct/ctwin.c
    * free GT pointer by hb_gt_BaseFree()
      TODO: CTWIN is not MT safe yet - it will be updated together
            with core GT when we add multi window interface for
            thread with own console window.

  * harbour/bin/hb-func.sh
  * harbour/config/linux/gcc.cf
    + added rt lib to Linux builds

  * harbour/bin/postinst.sh
    * create MT safe version of FM stat library: fmmt

  * harbour/bin/pack_src.sh
    + added support for ZIP packing

  * harbour/include/hbapi.h
  * harbour/include/hbvm.h
  * harbour/source/vm/hvm.c
    + added hb_vmThreadInit()/hb_vmThreadQuit() functions - they initialize
      HVM for calling thread so it can execute .prg code and call HVM
      functions. They can be used by 3-rd party code threads.
    + added hb_vmUnlock()/hb_vmLock() functions which informs that
      thread will not operate on HVM structures for some time allowing
      to execute single thread only processes like GC.
    + added hb_vmThreadQuitRequest() which sends stop request to given
       thread
    + added hb_vmWaitForThreads() which stops main thread execution waiting
      for other threads
    + added hb_vmSuspendThreads() and hb_vmResumeThreads() used be GC
      to stop all HVM threads before mark/swap scan
    + added linked list of HVM stacks
    + added hb_vmTerminateThreads() used by main HVM thread in QUIT state
    * moved EXIT procedures execution from QUIT request to HVM QUIT state
      in MT mode. It may effects some non structural code which tries to
      access private variables in EXIT functions but it's much cleaner
      and understandable for user. Please remember that we guaranties
      that ALWAYS code in BEGIN SEQUENCE is _always_ executed even after
      HVM QUIT request just like destructs. Personally I think that we
      should move EXIT procedures execution also in ST mode.
    * changed startup and cleanup code for new internal structures
    * changes startup and cleanup code for MT mode
    % removed some redundant HB_ITEM type settings
    ! eliminated non MT safe code which was using reference counters
      without protection

  * harbour/common.mak
  * harbour/source/vm/Makefile
  + harbour/include/hbthread.h
  + harbour/source/vm/thread.c
    + added C level functions to manage threads and synchronization objects
      See hbthread.h for detail description. They are based on PTHREAD API
      and PTHREAD documentation can be used as reference. I intentionally
      keep this list small for easier multiplatform porting.
      Now they have been implemented for PTHREADS (POSIX threads supported by
      many different OSes), MS-Win32/64 and OS2. The OS2 version is not tested
      at all. I do not even know if it can be compiled so please make tests.
      I used Internet resources and some part of xHarbour code as documentation
      for OS2 MT API. It should be quite easy to add other platforms if necessary.
      Harbour core code needs non recursive mutexes, conditional variables and
      TLS for one pointer. If platforms does not support conditional variables
      (f.e. MS-Win or OS2) then they can be emulated using multistate semaphores.
    + added .prg functions to manage threads and synchronization objects:
         hb_threadStart( <@sStart()> | <bStart> [, <params,...> ] ) -> <pThID>
         hb_threadJoin( <pThID> [, @<xRetCode> ] ) -> <lOK>
         hb_threadDetach( <pThID> ) -> <lOK>
         hb_threadQuitRequest( <pThID> ) -> <lOK>
         hb_threadWaitForAll() -> NIL
         hb_mutexCreate() -> <pMtx>
         hb_mutexLock( <pMtx> [, <nTimeOut> ] ) -> <lLocked>
         hb_mutexUnlock( <pMtx> ) -> <lOK>
         hb_mutexNotify( <pMtx> [, <xVal>] ) -> NIL
         hb_mutexNotifyAll( <pMtx> [, <xVal>] ) -> NIL
         hb_mutexSubscribe( <pMtx>, [ <nTimeOut> ] [, @<xSubscribed> ] ) -> <lSubscribed>
         hb_mutexSubscribeNow( <pMtx>, [ <nTimeOut> ] [, @<xSubscribed> ] ) -> <lSubscribed>
      The function list should give similar to xHarbour API but they are not exactly
      the same and except of hb_mutex*() functions which should replicate xHarbour behavior.

  + harbour/source/vm/vmmt
  + harbour/source/vm/vmmt/Makefile
    + added hbvmmt library to GNU make builds.
      Non GNU make builds should be updated.

  * harbour/contrib/hbct/pos1.c
  * harbour/contrib/gtwvg/gtwvg.c
  * harbour/contrib/rddads/ads1.c
  * harbour/contrib/hbmisc/spd.c
  * harbour/contrib/hbbmcdx/bmdbfcdx.c
  * harbour/contrib/examples/rdddbt/dbfdbt1.c
  * harbour/source/vm/runner.c
  * harbour/source/vm/itemapi.c
  * harbour/source/vm/hvm.c
  * harbour/source/rtl/console.c
  * harbour/source/rtl/strcase.c
  * harbour/source/rtl/spfiles.c
  * harbour/source/rtl/defpath.c
  * harbour/source/rtl/hbgtcore.c
  * harbour/source/rtl/dateshb.c
  * harbour/source/rtl/mlcfunc.c
  * harbour/source/rtl/fstemp.c
  * harbour/source/rtl/is.c
  * harbour/source/rtl/setcolor.c
  * harbour/source/rtl/errorint.c
  * harbour/source/rtl/transfrm.c
  * harbour/source/rtl/dates.c
  * harbour/source/rtl/filesys.c
  * harbour/source/rtl/gtdos/gtdos.c
  * harbour/source/rtl/gtwin/gtwin.c
  * harbour/source/rtl/gtwvt/gtwvt.c
  * harbour/source/rtl/gtxwc/gtxwc.c
  * harbour/source/rtl/gttrm/gttrm.c
  * harbour/source/rtl/gtpca/gtpca.c
  * harbour/source/rtl/gtcgi/gtcgi.c
  * harbour/source/rtl/gtcrs/gtcrs.c
  * harbour/source/rtl/gtstd/gtstd.c
  * harbour/source/rtl/gtsln/gtsln.c
  * harbour/source/rtl/gtsln/gtsln.h
  * harbour/source/rdd/dbf1.c
  * harbour/source/rdd/sdf1.c
  * harbour/source/rdd/delim1.c
  * harbour/source/rdd/dbcmd.c
  * harbour/source/rdd/hbdbsort.c
  * harbour/source/rdd/workarea.c
  * harbour/source/rdd/dbffpt/dbffpt1.c
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
  * harbour/source/rdd/dbfntx/dbfntx1.c
  * harbour/source/rdd/hsx/hsx.c
  * harbour/source/rdd/hbsix/sxfname.c
    * use API functions instead of direct accessing to hb_cdp_page or hb_set

  * harbour/source/rtl/fstemp.c
  * harbour/source/rtl/fssize.c
  * harbour/source/rtl/hbffind.c
  * harbour/source/rtl/filesys.c
    * encapsulate potentially slow IO operation inside
      hb_vmUnlock()/hb_vmLock() calls to allow other thread GC
      activation

  * harbour/contrib/hbnf/fttext.c
    ! fixed casting

  * harbour/contrib/gtwvg/gtwvg.h
    - removed #include <comctl32.h> - my MinGW and MinGW/CE instalations do
      not have them. If it exists in some newer ones then it has to be
      covered by #if version checking.

  * harbour/source/vm/dynsym.c
    - removed hb_dynsymLog() and hb_dynsymMemvarHandle()
    * modified code to be MT safe and improved speed of some operations
    * added MUEXT protection for global dynamic table access

  * harbour/include/hbapi.h
  * harbour/source/vm/garbage.c
    * changed to work with MT HVM
    * changed to work with new memvar structures and thread local static and
      memvar variables
    * added MUEXT protection for linked block lists
    + added parameter to hb_gcCollectAll() which will force GC activation
      in MT mode by temporary suspending all executed threads.
    + added logical parameter to HB_GCALL() functions which is passed to
      hb_gcCollectAll()

  * harbour/source/vm/fm.c
    * added MUEXT protection for FM statistic module
    * added MT protection for reference counters. For platforms
      which supports atomic incrmenetation/decrementation (f.e.
      Interlocked*() functions in MS-Win) such operations are
      used. For other it's MUTEX protection. It gives MT safe
      readonly access for HVM complex variables without user
      synchronization. The MUTEX protection can cause some speed
      overhead so it's good to define MT safe version of
      HB_ATOM_INC()/HB_ATOM_DEC() in hbthread.h if given platform
      has them. Now they are defined only for Windows. For other
      platforms We can define can define them in assembler for some
      most popular CPUs in the future.

  * harbour/source/vm/classes.c
    * changed class definition array. Now it keeps pointers to class
      structures.
    * In MT mode allocated at HVM startup big enough array for class
      definitions to avoid later RT reallocations. It effectively eliminates
      MUTEX synchronization for class structure access.
    * protect by MUTEX code for new class creation

  * harbour/source/debug/dbgentry.c
    * eliminated hbvmopt.h and direct accessing to HVM structures

  * harbour/source/rtl/gtclip.c
    * protect with MUTEX access to internal clipboard data

  * harbour/source/rdd/nulsys/nulsys.c
    + added hb_rddCloseAll()

  + harbour/tests/mt
  + harbour/tests/mt/mttest01.prg
  + harbour/tests/mt/mttest02.prg
  + harbour/tests/mt/mttest03.prg
  + harbour/tests/mt/mttest04.prg
  + harbour/tests/mt/mttest05.prg
  + harbour/tests/mt/mttest06.prg
  + harbour/tests/mt/mttest07.prg
    + added some demonstration/test small MT programs written
      using Harbour language. Some of them can be also compiled
      by xHarbour but xHarbour does not pass any of my tests in
      real multi-CPU machine so do not expect they will work
      correctly.

   Harbour threads needs OS threads support. Each Harbour thread is directly
   mapped to OS thread. It's not very efficient on some older system where
   cost of thread creation and/or task switching is very expensive but it
   should not be bigger problem for modern OS-es which can support threads
   in practice nearly in user space only.
   I haven't touched Harbour function calling convention which comes from
   Clipper. It means that we do not pass pointer to VM to each functions
   like CLIP or xBase++. To resolve the problem I have to use thread local
   storage (TLS) where such pointer is kept. If platform does not support
   TLS then it can be emulated by us. Anyhow the speed of accessing TLS
   data and extracting HB_STACK poitner is critical for performance.
   Some compilers depending on used hardware and OS give native support
   for TLS (f.e. __thread keyword in GCC/BCC or __declspec( thread ) in MSVC).
   This should give optimal performance. On other Harbour uses TLS functions
   like TlsGetValue() (MS-WIN) or pthread_getspecific() (PTHREAD) are used.
   OS2 gives quite interesting TLS functionality which seems to be quite fast
   though it will be interesting to know how it is iplemented internally for
   real multi CPU machines (if it depends on CPU exception then the
   performance will be bad). We need TLS only for one pointer to HB_STACK
   structure.
   I haven't added any tricks like HB_THREAD_STUB in xHarbour to reduce
   the cost of TLS access. If it will be necessary for some platform the we
   can add it.
   Except TLS Harbour threads needs OS support for non recursive mutexes or
   critical sections and conditional variables. If platforms does not support
   conditional variables (f.e. MS-Win or OS2) then they can be emulated using
   multistate semaphores. I intentionally didn't create code which may need
   recursive mutexes. The non recursive ones are often faster and some
   platforms may not support recursive mutexes so they will have to be
   emulated by us.
   Harbour uses reference counters for complex variables. It means that even
   readonly access to complex item causes internal write operations necessary
   to increment/decrement its reference counter. To make such readonly access
   MT safe we have to make incrementation and decrementation with result
   checking atomic. By default it's done by mutex inside vm/fm.c but some
   platforms have native support for atomic inc/dec operations, f.e. 
   Interlocked*() functions in MS-Win. If they are available then such
   functions should be used to not reduce the performance by mutex call
   very often used functions. For many CPUs it should be quite easy to
   implement such atomic inc/dec functionality in assembler. F.e. for
   GCC and x86@32 it may looks like:

      static __inline__ void hb_atomic_inc32( volatile int * p )
      {
         __asm__ __volatile__(
            "lock incl %0"
            :"=m" (*p) :"m" (*p)
         );
      }

      static __inline__ int hb_atomic_dec32( volatile int * p )
      {
         unsigned char c;
         __asm__ __volatile__(
            "lock decl %0"
            "sete %1"
            :"=m" (*p), "=qm" (c) :"m" (*p) : "memory"
         );
         return c == 0;
      }

   and then it's enough to define in hbthreads.h:
      #define HB_ATOM_INC( p )    hb_atomic_inc32( ( volatile int * ) p )
      #define HB_ATOM_DEC( p )    hb_atomic_dec32( ( volatile int * ) p )

   Probably I'll make it for some most popular CPUs in the future.
   In Harbour each thread which wants to call HVM functions have to allocate
   it's own HVM stack. It's done hb_vmThreadInit(). The HVM stack is freed
   by calling hb_vmThreadQuit(). This functions can be called also by 3-rd
   party threads if they want to call HVM functions or execute .prg code.
   Calling HVM functions without allocated stack will cause GPF.
   I moved most of static variables to HVM stack to make them thread
   local. But some of them like FS errors have their own alternative
   copy which is used when thread does not allocate HVM stack. It allows
   to use hb_fs*() functions without HVM stack but programmer have to
   know that error codes return by hb_fs*Error() functions can be
   overwritten by other threads which also didn't allocated HVM stack.
   To execute garbage collector scan and mark pass it's necessary to
   stop other HVM threads. Otherwise the scan may give false results.
   It's also possible to not stop threads but protect with mutex all
   operations on GC items but it will probably cause performance reduction
   and will force some other modifications. Maybe I'll implement it
   in the future.
   I didn't use any OS level thread KILL or CANCEL calls. All HVM threads
   have to be cleanly removed without any resource leaks.
   QUIT command terminate only calling thread. If main (startup) HVM
   thread call QUIT then it sends QUIT request to all existing threads.
   In QUIT state ALWAYS statements and destructors are executed.
   New thread is created by:
      hb_threadStart( <@sStart()> | <bStart> [, <params,...> ] ) -> <pThID>
   The returned value is a pointer to internal thread structure which
   can be used in JOIN or DETACH operations. Each thread should be Joined
   or DETACHED to avoid resource leaks. If programmer does not store
   <pThID> or all instances of <pThID> are destroyed then thread is
   automatically detached. I do not know clear method of thread detaching
   in OS2. If some OS2 users knows it then plase update vm/hbthread.c.
   When thread terminates then all locked by this thread mutexes are
   released.
   Each thread uses its own memvars (PRIVATEs and PUBLICs) and work areas.
   When new thread is created then it inherits from parent thread:
      - code page
      - language
      - SETs
      - default RDD
   error block is initialized to default value by calling ERRORSYS()
   and PUBLIC variable GetList := {} is created.
   The following objects are initialized to default value:
         - error block
         - math error handler and math error block
         - macro compiler features setting (hb_setMacro())
           or move them to SETs.
   We can think about inheriting them. It's also possible to add
   inheriting of all visible memvars but I do not know it's good
   idea.

   Compilation and linking:
   For MT mode HVM library should be compiled with HB_MT_VM macro.
   GNU make automatically creates hbvmmt library which should be
   linked with Harbour MT programs instead of hbvm.
   Non GNU make files should be updated.
   If given compiler support TLS then you can try to set HB_USE_TLS
   to force using native compiler TLS support. Now it's enabled by
   default only for BCC. For Linux and GCC builds it may depend also
   on used GLIBC version. In older system there is no TLS support
   at all or TLS works only for shared binaries so I haven't enabled
   it. If you will test some other compiler then please add default
   native TLS support for them in hbthread.h
   Users using hb* scripts can simply use -mt switch when they want
   to create MT program, f.e.:
      hbmk -n -w3 -es2 -mt mttest01.prg

   There are still some minor things which should be done but I'll
   do them later. Current state seems to be fully functional.
   The most important and still missing is our own file lock server
   for RDD synchronization in POSIX systems. Kernel internally
   recognize POSIX locks by PID and file i-node - not PID and file
   handle. It means that the same file open more then once by one
   process shares locks. Because POSIX locks can be overwritten
   then we do not have any synchronization between aliased workareas
   or threads using the same table in *nixes. We have to make
   synchronization ourselves. I'll create such lock server ASAP.

   Please test and enjoy using Harbour threads.

best regards,
Przemek
From harbour.01 at syenar.hu  Sat Sep 13 13:31:46 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Sep 13 13:31:47 2008
Subject: [Harbour] [1.0] 2008-09-13 19:30 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c915c6$Blat.v2.6.2$98acc65c$133816a0ee86@127.0.0.1>

; I'll retrofit these changes to trunk later.

2008-09-13 19:30 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/gtalleg/ssf.h
    ! Turned off ASM for MSVC AMD64 mode.

  * contrib/gtalleg/Makefile
    ! Disabled for OpenWatcom. (maybe compilation could be 
      fixed somehow, if someone is interested pls look into it.)

  * doc/whatsnew.txt
  * contrib/hbfimage/fi_winfu.c
  * contrib/hbfimage/fi_wrp.c
    ! Fixed for OpenWatcom.

  * contrib/gtwvg/wvgutils.c
  * contrib/gtwvg/wvgcore.c
    ! Silenced some MinGW/PelleC cast warnings.

  * contrib/hbw32/win_prt.c
    ! Fixed GCC (MinGW/Cygwin) warnings. The solution I choose is 
      pretty ugly, if someone knows the right one, please help.
      Warning was:
      ../../win_prt.c:70: warning: missing initializer
      ../../win_prt.c:70: warning: (near initialization for `s_PortData[0].OldDCB')
    ! Fixed few remaining warnings / minor bugs.

  * contrib/hbwhat/whtlv.c
  * contrib/hbwhat/whtcomm.c
  * contrib/hbwhat/whttab.c
  * contrib/hbwhat/whttree.c
    ! Silenced MinGW 4.12 warnings.

  * contrib/hbwhat/whtdate.c
    ! Removed #include "tchar.h", which seems unnecessary and 
      fixed Cygwin compilation.

  * contrib/hbwhat/whtsock.c
    ! Changed #include order of Windows headers to satisfy PellesC 5.

  ; TOFIX1: hbct / SETFDATI() has a possible bug here (shown in PelleC 64 bit):
    ../../files.c(264): warning #2006: [ISO] Conversion from 'void *' to 'int' is compiler dependent.
    ../../files.c(264): warning #2052: Conversion from 'void *' to 'int' is undefined.
    Problem is with HFILE / HANDLE conversion.

  ; TOFIX2: Here are some remaining 64-bit problems:
    ../../hb_btree.c(643): warning #2006: [ISO] Conversion from 'void *' to 'unsigned long int' is compiler dependent.
    ../../hb_btree.c(643): warning #2052: Conversion from 'void *' to 'unsigned long int' is undefined.
    ../../hb_btree.c(739): warning #2006: [ISO] Conversion from 'ioBuffer_T *' to 'unsigned long int' is compiler dependent.
    ../../hb_btree.c(739): warning #2052: Conversion from 'ioBuffer_T *' to 'unsigned long int' is undefined.
    ../../win_dll.c(511): warning #2006: [ISO] Conversion from 'void *' to 'unsigned long int' is compiler dependent.
    ../../win_dll.c(511): warning #2052: Conversion from 'void *' to 'unsigned long int' is undefined.
    ../../win_ole.c(761): warning #2006: [ISO] Conversion from 'LPDISPATCH' to 'long int' is compiler dependent.
    ../../win_ole.c(761): warning #2052: Conversion from 'LPDISPATCH' to 'long int' is undefined.
    ../../win_ole.c(1091): warning #2006: [ISO] Conversion from 'LPDISPATCH' to 'long int' is compiler dependent.
    ../../win_ole.c(1091): warning #2052: Conversion from 'LPDISPATCH' to 'long int' is undefined.
    ../../win_ole.c(1425): warning #2006: [ISO] Conversion from 'void *' to 'long int' is compiler dependent.
    ../../win_ole.c(1425): warning #2052: Conversion from 'void *' to 'long int' is undefined.
    ../../win_ole.c(1478): warning #2006: [ISO] Conversion from 'void *' to 'long int' is compiler dependent.
    ../../win_ole.c(1478): warning #2052: Conversion from 'void *' to 'long int' is undefined.
    ../../win_regc.c(94): warning #2006: [ISO] Conversion from 'HKEY' to 'unsigned long int' is compiler dependent.
    ../../win_regc.c(94): warning #2052: Conversion from 'HKEY' to 'unsigned long int' is undefined.
    ../../win_regc.c(116): warning #2006: [ISO] Conversion from 'HKEY' to 'unsigned long int' is compiler dependent.
    ../../win_regc.c(116): warning #2052: Conversion from 'HKEY' to 'unsigned long int' is undefined.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Sat Sep 13 13:58:06 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sat Sep 13 13:58:50 2008
Subject: [Harbour] HGetValueAt() Bound Error
In-Reply-To: <48CB7576.8030502@gmail.com>
References: <48cb7117.37322c0a.094f.478aSMTPIN_ADDED@mx.google.com>
	<48CB7576.8030502@gmail.com>
Message-ID: <20080913175806.GB7892@34-mo7-2.acn.waw.pl>

On Sat, 13 Sep 2008, Mario H. Sabado wrote:

Hi Mario,

> I encountered problem with function HGetValueAt() from latest SVN with the 
> following error:
> Error BASE/1187 Bound Error: HB_HVALUEAT
> Thanks for any help.

You have to fix your code. You are using index which is aout of scope,
f.e.:

      #include "hbcompat.ch"
      proc main
         local h, i
         h:={"A"=>100,"B"=>200,"C"=>300}
         ? HGetValueAt(h,1)
         ? HGetValueAt(h,2)
         ? HGetValueAt(h,3)
         ? HGetValueAt(h,4)  // error here, hash array has only 3 items
      return

best regards,
Przemek
From capelsoft at terra.es  Sat Sep 13 14:00:27 2008
From: capelsoft at terra.es (=?iso-8859-1?Q?Jos=E9_Luis_Capel_-?=)
Date: Sat Sep 13 14:00:38 2008
Subject: [Harbour] Missing GTDOS ?
References: <01c915c6$Blat.v2.6.2$98acc65c$133816a0ee86@127.0.0.1>
Message-ID: <C0ADBD16630F43F9B9BF66F9FC5E1043@pepeluis>

Hi,

I am not quite sure if I am missing something or I am wrong...

With latests svn, for borland bcc55 I try to build binaries and libs using 
this sets:


SET LIB=\programacion\bcc55\lib
SET INCLUDE=\programacion\bcc55\include
SET PATH=\programacion\bcc55\bin;%PATH%

SET HB_GT_LIB=gtdos
SET HB_GT_DEFAULT=dos
SET CLIBFLAGS=-DHB_OS_WIN_32
SET HB_MAKE_PROGRAM=\programacion\bcc55\bin\make.exe


and after doing

make_b32 clean
make_b32

I get this error:

TLIB 4.5 Copyright (c) 1987, 1999 Inprise Corporation
+obj\b32\gtgui.obj &
+obj\b32\gtdef.obj &
+
obj\b32\hbrun.c:
Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Error: Unresolved external '_HB_FUN_HB_GT_DOS' referenced from 
P:\PROGRAMACION\HARBOUR\LIB\B32\HBRTL.LIB|gtsys

** error 1 ** deleting bin\b32\hbrun.exe

(attached make_b32.log)

Thanks and regards,
Jos? Luis Capel 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: make_b32.rar
Type: application/octet-stream
Size: 4580 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080913/483f23df/make_b32.obj
From harbour.01 at syenar.hu  Sat Sep 13 14:06:01 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Sep 13 14:06:11 2008
Subject: [Harbour] Re: Missing GTDOS ?
In-Reply-To: <C0ADBD16630F43F9B9BF66F9FC5E1043@pepeluis>
References: <01c915c6$Blat.v2.6.2$98acc65c$133816a0ee86@127.0.0.1>
	<C0ADBD16630F43F9B9BF66F9FC5E1043@pepeluis>
Message-ID: <12B6E153-5FC4-44CE-BC55-F3A569806658@syenar.hu>

Hi Jose,

I'm not sure you're trying to do here, because gtdos
will never work with BCC55.

You need to remove these lines:
> SET HB_GT_LIB=gtdos
> SET HB_GT_DEFAULT=dos

And possibly also this, as it's not needed and just can create problems:
> SET CLIBFLAGS=-DHB_OS_WIN_32

Brgds,
Viktor

On 2008.09.13., at 20:00, Jos? Luis Capel - wrote:

> Hi,
>
> I am not quite sure if I am missing something or I am wrong...
>
> With latests svn, for borland bcc55 I try to build binaries and libs  
> using this sets:
>
>
> SET LIB=\programacion\bcc55\lib
> SET INCLUDE=\programacion\bcc55\include
> SET PATH=\programacion\bcc55\bin;%PATH%
>
> SET HB_GT_LIB=gtdos
> SET HB_GT_DEFAULT=dos
> SET CLIBFLAGS=-DHB_OS_WIN_32
> SET HB_MAKE_PROGRAM=\programacion\bcc55\bin\make.exe
>
>
> and after doing
>
> make_b32 clean
> make_b32
>
> I get this error:
>
> TLIB 4.5 Copyright (c) 1987, 1999 Inprise Corporation
> +obj\b32\gtgui.obj &
> +obj\b32\gtdef.obj &
> +
> obj\b32\hbrun.c:
> Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
> Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
> Error: Unresolved external '_HB_FUN_HB_GT_DOS' referenced from P: 
> \PROGRAMACION\HARBOUR\LIB\B32\HBRTL.LIB|gtsys
>
> ** error 1 ** deleting bin\b32\hbrun.exe
>
> (attached make_b32.log)
>
> Thanks and regards,
> Jos? Luis Capel
> <make_b32.rar>

From druzus at acn.waw.pl  Sat Sep 13 14:09:14 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sat Sep 13 14:09:56 2008
Subject: [Harbour] do {} while( 0 ) vs. {}
In-Reply-To: <6AAE2D0F-4714-41DB-9BD6-64FE82A67EDE@syenar.hu>
References: <6AAE2D0F-4714-41DB-9BD6-64FE82A67EDE@syenar.hu>
Message-ID: <20080913180914.GC7892@34-mo7-2.acn.waw.pl>

On Sat, 13 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> What is the reason we're using 'do { <code> } while( 0 )'
> to enclose large macro blocks, instead of using plain '{ <code> }' ?
> F.e. HB_ORD2DBL() in hbdefs.h.

macros encapsulated inside do {...} while(0) can be safely used in any
context. F.e.try to compile this code:

   #define macro1 do { printf( "macro1\n" ); } while(0)
   #define macro2 { printf( "macro1\n" ); }

   if( 1 )
      macro1;
   else
      printf( "else\n" );

   if( 1 )
      macro2;
   else
      printf( "else\n" );

best regards,
Przemek
From harbour.01 at syenar.hu  Sat Sep 13 14:10:17 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Sep 13 14:10:30 2008
Subject: [Harbour] ChangeLog 2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
Message-ID: <F3468BFA-20B6-4875-BACA-6595290651BA@syenar.hu>

Hi Przemek,

Very nice, many thanks and congrats for this job.

[ I'll now copy back changes from 1.0, after all
(18 of them) Windows builds got built fine. ]

Brgds,
Viktor

On 2008.09.13., at 19:18, Przemys??aw Czerpak wrote:

> 2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbpp.h
>  * harbour/include/hbvm.h
>  * harbour/include/hbcomp.h
>  * harbour/include/hbcompdf.h
>  * harbour/include/hbtrace.h
>  * harbour/include/hbapilng.h
>  * harbour/include/hbinit.h
>  * harbour/source/rtl/langapi.c
>  * harbour/source/pp/ppcore.c
>  * harbour/source/pp/hbpp.c
>  * harbour/source/vm/itemapi.c
>  * harbour/source/vm/hvm.c
>  * harbour/source/common/hbver.c
>  * harbour/source/common/hbtrace.c
>  * harbour/source/common/expropt2.c
>  * harbour/source/compiler/complex.c
>  * harbour/source/compiler/hbident.c
>  * harbour/source/compiler/hbfunchk.c
>    * changed some declarations from 'char *' to 'const char *' and
>      fixed casting for some more pedantic compilers
>
>  * harbour/source/pp/ppcore.c
>    ! fixed one typo which could cause memory leak and even GPF
>
>  * harbour/common.mak
>  * harbour/source/vm/Makefile
>  * harbour/source/rtl/Makefile
>  - harbour/source/rtl/set.c
>  + harbour/source/vm/set.c
>  * harbour/include/hbstack.h
>  * harbour/source/vm/estack.c
>    * moved from RTL to HVM
>    * eliminated hb_set global structure
>    * moved set structure to HVM stack
>    + added internal function hb_setClone() which is used to create
>      copy of SET structure for child threads
>    * hidden HB_SET_STRUCT declaration - 3-rd part code must not  
> access it
>      directly. Dedicated hb_set*() functions should be used instead.
>    + added new function:
>         BOOL hb_setSetItem( HB_set_enum set_specifier, PHB_ITEM  
> pItem )
>      which allow to change some set by 3-rd party code.
>      TODO: not all SETs can be changed yet - if someone have a while
>            then please add code for missing ones.
>
>  * harbour/include/set.ch
>  * harbour/include/hbset.h
>    + added _SET_CODEPAGE which works like _SET_LANGUAGE giving common
>      interface
>
>  * harbour/include/hbsetup.h
>    + added HB_CODEPAGE_DEFAULT which works like HB_LANG_DEFAULT
>
>  * harbour/source/vm/hvm.c
>    ! fixed builds which uses non EN lang or code page modules
>      by forcing linking the chosen ones
>
>  * harbour/include/hbstack.h
>  * harbour/source/vm/estack.c
>  * harbour/include/hbapicdp.h
>  * harbour/source/rtl/cdpapi.c
>    - removed global code page variable: hb_cdp_page and moved
>      code page settings to HVM stack
>    + added new function hb_cdpID() which returns current code page
>      character ID
>    + added new functions hb_vmCDP() and hb_vmSetCDP() to get/set
>      active for given thread code page structure
>
>  * harbour/include/hbstack.h
>  * harbour/source/vm/estack.c
>  * harbour/include/hbapilng.h
>  * harbour/source/rtl/langapi.c
>    + moved lang setting to HVM stack
>    + added new functions hb_vmLang() and hb_vmSetLang() to get/set
>      active for given thread language module
>
>  * harbour/include/hbvmpub.h
>  * harbour/include/hbstack.h
>  * harbour/include/hbapi.h
>  * harbour/source/vm/estack.c
>  * harbour/source/vm/dynsym.c
>  * harbour/source/vm/itemapi.c
>  * harbour/source/vm/memvars.c
>    * changed memvar handles for HB_HANDLE to void * which is directly
>      casted to PHB_ITEM - new memvar references
>    * changed HB_DYNS declarations for MT mode. In MT mode HB_DYNS does
>      not contain area and memvar handles which are moved to thread
>      local HVM stack
>    + added array for thread local memvar and area handles to HVM stack
>    % eliminated global continues array with all memvars and detached  
> locals
>    % changed HB_IT_MEMVAR to use pointers to HB_ITEM directly - it  
> resolve
>      synchronization problems in MT mode and should also improve the  
> speed
>      and reduce memory usage. It should be well visible in  
> applications which
>      uses lot of detached locals.
>    - removed hb_memvarsInit() and hb_memvarsFree() - they are not  
> necessary
>      now because we do not longer use array with all allocated memvars
>      and detached local and private stack initialization is made
>      automatically
>    + added internal functions hb_dynsymGetMemvar()/ 
> hb_dynsymSetMemvar()
>    + added hb_memvarGetValueBySym() for debugger
>    * moved PRIVATE variable stack to HVM stack
>    * eliminated all static variables in memvars module
>
>  * harbour/include/hbstack.h
>  * harbour/source/vm/estack.c
>  * harbour/source/rtl/fserror.c
>    * moved IO errors to HVM stack
>    + added special IO error handling which works without HVM stack
>      It allows to use hb_fs*() functions without allocated stack
>      by 3-rd party threads.
>
>  * harbour/source/rtl/filesys.c
>    * moved hb_fsCurDir() to HVM stack with special handling to work
>      with HVM stack like IO errors
>
>  * harbour/source/rdd/workarea.c
>    * allocated RDD node array in bigger peaces to reduce later RT
>      reallocations in MT mode. If user want to add dynamically more
>      then 64 RDDs then it should synchronize this operation himself.
>
>  * harbour/source/rdd/wacore.c
>    * moved WA list, current WA, default RDD and neteer() flag to HVM  
> stack
>
>  * harbour/include/hbdefs.h
>    - removed HB_HANDLE declaration
>
>  * harbour/include/hbapi.h
>    - removed HB_VALUE structure - it's not longer used due to  
> different
>      memvar handling
>    * updated hb_struMemvar to new memvar handling
>    * replaced hb_vmIsLocalRef() and hb_memvarsIsMemvarRef() with
>      hb_vmIsStackRef() which respect multiple stack and new memvar
>      and static structures and location in GC mark pass.
>
>  * harbour/include/hbstack.h
>  * harbour/source/vm/estack.c
>  * harbour/source/vm/hvm.c
>    + added support for thread specific data located on HVM stack
>      Now it's possible to allocate static variables which are
>      local to thread. Such variables are allocated on HVM stack
>      and automatically destroyed. To declare new TSD variable use:
>         HB_TSD_NEW( <name>, <size>, <init>, <destruct> )
>      <name> - name of variable which holds TSD handler
>      <size> - size of TSD are which has to be allocated
>      <init> - init function, executed when new TSD is allocated by  
> thread
>               (thread access given TSD 1-st time). This function  
> receives
>               void * pointer to allocated area.
>      <destruct> - destructor function executed when HVM stack is  
> destroyed
>      f.e.:
>         static HB_TSD_NEW( s_scrData, sizeof( HB_SCRDATA ),
>                            NULL, hb_xSaveRestRelease );
>      To initialize dynamically allocated TSD variable use:
>         HB_TSD_INIT( <name>, <size>, <init>, <destruct> )
>      Pointer to TSD can be accessed using hb_stackGetTSD( &<name> )
>      where <name> is name of variable which holds TSD handler, f.e.:
>         PHB_SCRDATA pScrData = ( PHB_SCRDATA )  
> hb_stackGetTSD( &s_scrData );
>      See source/rtl/xsavescr.c as an example
>      It's also possible to test if data has been already allocated for
>      current thread by:
>         hb_stackTestTSD( &<name> ) => pData
>      it works like hb_stackGetTSD() but return NULL if current  
> thread data
>      has not been allocated yet.
>
>  * harbour/include/hbstack.h
>  * harbour/source/vm/estack.c
>    * changed hb_stack location to thread local storage in MT mode
>    + added functions and macros to access/assign new HVM stack members
>    + changed garbage collection mark functions to work with multiple
>      stacks, thread local static and memvar variables
>
>  * harbour/source/rtl/xsavescr.c
>    * use TSD data for screen buffer to make __XSAVESCREEN()/ 
> __XRESTSCREEN()
>      thread independent
>
>  * harbour/source/rtl/idle.c
>    * use TSD data for idle task settings and codeblocks
>    - removed hb_idleShutDown() - it's not longer necessary
>
>  * harbour/source/rtl/setkey.c
>    * use TSD data for allocated keys to make SETKEY() thread  
> independent
>
>  * harbour/source/rtl/math.c
>    * moved math error handler, math error block, math error mode and
>      math error structure to TSD
>
>  * harbour/source/rtl/errorapi.c
>    * moved error handler, error block, error launch counter and DOS  
> error
>      value to TSD
>
>  * harbour/source/rtl/inkey.c
>    * moved inkey "before" and "after" blocks to TSD
>
>  * harbour/source/rdd/hsx/hsx.c
>    * moved HSX handles array to TSD
>
>  * harbour/include/hbapigt.h
>  * harbour/source/rtl/console.c
>    - removed hb_setkeyInit() and hb_setkeyExit() - they are not longer
>      necessary, allocated resources will be freed by TSD destructor
>      function
>
>  * harbour/include/hbapi.h
>  * harbour/source/rtl/console.c
>    * removed hb_conXSaveRestRelease() - it's not longer necessary,
>      allocated resources will be freed by TSD destructor function
>
>  * harbour/source/vm/macro.c
>    * moved s_macroFlags to TSD
>
>  * harbour/source/rtl/accept.c
>    * moved accept buffer to TSD
>
>  * harbour/include/hbcomp.h
>  * harbour/include/hbcompdf.h
>  * harbour/include/hbxvm.h
>  * harbour/source/compiler/hbmain.c
>  * harbour/source/compiler/hbfix.c
>  * harbour/source/compiler/hbpcode.c
>  * harbour/source/compiler/hbdead.c
>  * harbour/source/compiler/complex.c
>  * harbour/source/compiler/genc.c
>  * harbour/source/compiler/gencc.c
>  * harbour/source/compiler/hbopt.c
>  * harbour/source/compiler/hblbl.c
>  * harbour/source/compiler/hbstripl.c
>  * harbour/source/compiler/harbour.y
>  * harbour/source/compiler/harbour.yyc
>  * harbour/source/compiler/harbour.yyh
>  * harbour/source/vm/hvm.c
>    + added new PCODE HB_P_THREADSTATICS
>    + added support for static variables which are local to thread:
>         THREAD STATIC <varname [:= <exp>], ...>
>      They work like normal static variables but each thread operates
>      on its own copy.
>    * added protection against possible double call to hb_xfree()
>      It can happen due to wrong marking expressions as used by bison
>      and executing destructors after our free code when syntax error
>      appear.
>
>  * harbour/source/rtl/perfuncs.prg
>  * harbour/source/rtl/menuto.prg
>  * harbour/source/rtl/getlist.prg
>  * harbour/source/rtl/readvar.prg
>  * harbour/source/rtl/text.prg
>    * use THREAD STATIC variables to make above code MT safe
>
>  * harbour/include/hbgtcore.h
>  * harbour/source/rtl/hbgtcore.c
>    + added hb_gt_BaseFree() which will release current GT pointer
>      locked by hb_gt_Base() function. This function will be used
>      to optional automatic GT access synchronization when threads
>      share the same GT.
>
>  * harbour/source/rtl/gtapi.c
>  * harbour/source/rtl/inkeyapi.c
>  * harbour/source/rtl/mouseapi.c
>  * harbour/contrib/hbct/ctwin.c
>    * free GT pointer by hb_gt_BaseFree()
>      TODO: CTWIN is not MT safe yet - it will be updated together
>            with core GT when we add multi window interface for
>            thread with own console window.
>
>  * harbour/bin/hb-func.sh
>  * harbour/config/linux/gcc.cf
>    + added rt lib to Linux builds
>
>  * harbour/bin/postinst.sh
>    * create MT safe version of FM stat library: fmmt
>
>  * harbour/bin/pack_src.sh
>    + added support for ZIP packing
>
>  * harbour/include/hbapi.h
>  * harbour/include/hbvm.h
>  * harbour/source/vm/hvm.c
>    + added hb_vmThreadInit()/hb_vmThreadQuit() functions - they  
> initialize
>      HVM for calling thread so it can execute .prg code and call HVM
>      functions. They can be used by 3-rd party code threads.
>    + added hb_vmUnlock()/hb_vmLock() functions which informs that
>      thread will not operate on HVM structures for some time allowing
>      to execute single thread only processes like GC.
>    + added hb_vmThreadQuitRequest() which sends stop request to given
>       thread
>    + added hb_vmWaitForThreads() which stops main thread execution  
> waiting
>      for other threads
>    + added hb_vmSuspendThreads() and hb_vmResumeThreads() used be GC
>      to stop all HVM threads before mark/swap scan
>    + added linked list of HVM stacks
>    + added hb_vmTerminateThreads() used by main HVM thread in QUIT  
> state
>    * moved EXIT procedures execution from QUIT request to HVM QUIT  
> state
>      in MT mode. It may effects some non structural code which tries  
> to
>      access private variables in EXIT functions but it's much cleaner
>      and understandable for user. Please remember that we guaranties
>      that ALWAYS code in BEGIN SEQUENCE is _always_ executed even  
> after
>      HVM QUIT request just like destructs. Personally I think that we
>      should move EXIT procedures execution also in ST mode.
>    * changed startup and cleanup code for new internal structures
>    * changes startup and cleanup code for MT mode
>    % removed some redundant HB_ITEM type settings
>    ! eliminated non MT safe code which was using reference counters
>      without protection
>
>  * harbour/common.mak
>  * harbour/source/vm/Makefile
>  + harbour/include/hbthread.h
>  + harbour/source/vm/thread.c
>    + added C level functions to manage threads and synchronization  
> objects
>      See hbthread.h for detail description. They are based on  
> PTHREAD API
>      and PTHREAD documentation can be used as reference. I  
> intentionally
>      keep this list small for easier multiplatform porting.
>      Now they have been implemented for PTHREADS (POSIX threads  
> supported by
>      many different OSes), MS-Win32/64 and OS2. The OS2 version is  
> not tested
>      at all. I do not even know if it can be compiled so please make  
> tests.
>      I used Internet resources and some part of xHarbour code as  
> documentation
>      for OS2 MT API. It should be quite easy to add other platforms  
> if necessary.
>      Harbour core code needs non recursive mutexes, conditional  
> variables and
>      TLS for one pointer. If platforms does not support conditional  
> variables
>      (f.e. MS-Win or OS2) then they can be emulated using multistate  
> semaphores.
>    + added .prg functions to manage threads and synchronization  
> objects:
>         hb_threadStart( <@sStart()> | <bStart> [, <params,...> ] ) - 
> > <pThID>
>         hb_threadJoin( <pThID> [, @<xRetCode> ] ) -> <lOK>
>         hb_threadDetach( <pThID> ) -> <lOK>
>         hb_threadQuitRequest( <pThID> ) -> <lOK>
>         hb_threadWaitForAll() -> NIL
>         hb_mutexCreate() -> <pMtx>
>         hb_mutexLock( <pMtx> [, <nTimeOut> ] ) -> <lLocked>
>         hb_mutexUnlock( <pMtx> ) -> <lOK>
>         hb_mutexNotify( <pMtx> [, <xVal>] ) -> NIL
>         hb_mutexNotifyAll( <pMtx> [, <xVal>] ) -> NIL
>         hb_mutexSubscribe( <pMtx>, [ <nTimeOut> ] [,  
> @<xSubscribed> ] ) -> <lSubscribed>
>         hb_mutexSubscribeNow( <pMtx>, [ <nTimeOut> ] [,  
> @<xSubscribed> ] ) -> <lSubscribed>
>      The function list should give similar to xHarbour API but they  
> are not exactly
>      the same and except of hb_mutex*() functions which should  
> replicate xHarbour behavior.
>
>  + harbour/source/vm/vmmt
>  + harbour/source/vm/vmmt/Makefile
>    + added hbvmmt library to GNU make builds.
>      Non GNU make builds should be updated.
>
>  * harbour/contrib/hbct/pos1.c
>  * harbour/contrib/gtwvg/gtwvg.c
>  * harbour/contrib/rddads/ads1.c
>  * harbour/contrib/hbmisc/spd.c
>  * harbour/contrib/hbbmcdx/bmdbfcdx.c
>  * harbour/contrib/examples/rdddbt/dbfdbt1.c
>  * harbour/source/vm/runner.c
>  * harbour/source/vm/itemapi.c
>  * harbour/source/vm/hvm.c
>  * harbour/source/rtl/console.c
>  * harbour/source/rtl/strcase.c
>  * harbour/source/rtl/spfiles.c
>  * harbour/source/rtl/defpath.c
>  * harbour/source/rtl/hbgtcore.c
>  * harbour/source/rtl/dateshb.c
>  * harbour/source/rtl/mlcfunc.c
>  * harbour/source/rtl/fstemp.c
>  * harbour/source/rtl/is.c
>  * harbour/source/rtl/setcolor.c
>  * harbour/source/rtl/errorint.c
>  * harbour/source/rtl/transfrm.c
>  * harbour/source/rtl/dates.c
>  * harbour/source/rtl/filesys.c
>  * harbour/source/rtl/gtdos/gtdos.c
>  * harbour/source/rtl/gtwin/gtwin.c
>  * harbour/source/rtl/gtwvt/gtwvt.c
>  * harbour/source/rtl/gtxwc/gtxwc.c
>  * harbour/source/rtl/gttrm/gttrm.c
>  * harbour/source/rtl/gtpca/gtpca.c
>  * harbour/source/rtl/gtcgi/gtcgi.c
>  * harbour/source/rtl/gtcrs/gtcrs.c
>  * harbour/source/rtl/gtstd/gtstd.c
>  * harbour/source/rtl/gtsln/gtsln.c
>  * harbour/source/rtl/gtsln/gtsln.h
>  * harbour/source/rdd/dbf1.c
>  * harbour/source/rdd/sdf1.c
>  * harbour/source/rdd/delim1.c
>  * harbour/source/rdd/dbcmd.c
>  * harbour/source/rdd/hbdbsort.c
>  * harbour/source/rdd/workarea.c
>  * harbour/source/rdd/dbffpt/dbffpt1.c
>  * harbour/source/rdd/dbfcdx/dbfcdx1.c
>  * harbour/source/rdd/dbfntx/dbfntx1.c
>  * harbour/source/rdd/hsx/hsx.c
>  * harbour/source/rdd/hbsix/sxfname.c
>    * use API functions instead of direct accessing to hb_cdp_page or  
> hb_set
>
>  * harbour/source/rtl/fstemp.c
>  * harbour/source/rtl/fssize.c
>  * harbour/source/rtl/hbffind.c
>  * harbour/source/rtl/filesys.c
>    * encapsulate potentially slow IO operation inside
>      hb_vmUnlock()/hb_vmLock() calls to allow other thread GC
>      activation
>
>  * harbour/contrib/hbnf/fttext.c
>    ! fixed casting
>
>  * harbour/contrib/gtwvg/gtwvg.h
>    - removed #include <comctl32.h> - my MinGW and MinGW/CE  
> instalations do
>      not have them. If it exists in some newer ones then it has to be
>      covered by #if version checking.
>
>  * harbour/source/vm/dynsym.c
>    - removed hb_dynsymLog() and hb_dynsymMemvarHandle()
>    * modified code to be MT safe and improved speed of some operations
>    * added MUEXT protection for global dynamic table access
>
>  * harbour/include/hbapi.h
>  * harbour/source/vm/garbage.c
>    * changed to work with MT HVM
>    * changed to work with new memvar structures and thread local  
> static and
>      memvar variables
>    * added MUEXT protection for linked block lists
>    + added parameter to hb_gcCollectAll() which will force GC  
> activation
>      in MT mode by temporary suspending all executed threads.
>    + added logical parameter to HB_GCALL() functions which is passed  
> to
>      hb_gcCollectAll()
>
>  * harbour/source/vm/fm.c
>    * added MUEXT protection for FM statistic module
>    * added MT protection for reference counters. For platforms
>      which supports atomic incrmenetation/decrementation (f.e.
>      Interlocked*() functions in MS-Win) such operations are
>      used. For other it's MUTEX protection. It gives MT safe
>      readonly access for HVM complex variables without user
>      synchronization. The MUTEX protection can cause some speed
>      overhead so it's good to define MT safe version of
>      HB_ATOM_INC()/HB_ATOM_DEC() in hbthread.h if given platform
>      has them. Now they are defined only for Windows. For other
>      platforms We can define can define them in assembler for some
>      most popular CPUs in the future.
>
>  * harbour/source/vm/classes.c
>    * changed class definition array. Now it keeps pointers to class
>      structures.
>    * In MT mode allocated at HVM startup big enough array for class
>      definitions to avoid later RT reallocations. It effectively  
> eliminates
>      MUTEX synchronization for class structure access.
>    * protect by MUTEX code for new class creation
>
>  * harbour/source/debug/dbgentry.c
>    * eliminated hbvmopt.h and direct accessing to HVM structures
>
>  * harbour/source/rtl/gtclip.c
>    * protect with MUTEX access to internal clipboard data
>
>  * harbour/source/rdd/nulsys/nulsys.c
>    + added hb_rddCloseAll()
>
>  + harbour/tests/mt
>  + harbour/tests/mt/mttest01.prg
>  + harbour/tests/mt/mttest02.prg
>  + harbour/tests/mt/mttest03.prg
>  + harbour/tests/mt/mttest04.prg
>  + harbour/tests/mt/mttest05.prg
>  + harbour/tests/mt/mttest06.prg
>  + harbour/tests/mt/mttest07.prg
>    + added some demonstration/test small MT programs written
>      using Harbour language. Some of them can be also compiled
>      by xHarbour but xHarbour does not pass any of my tests in
>      real multi-CPU machine so do not expect they will work
>      correctly.
>
>   Harbour threads needs OS threads support. Each Harbour thread is  
> directly
>   mapped to OS thread. It's not very efficient on some older system  
> where
>   cost of thread creation and/or task switching is very expensive  
> but it
>   should not be bigger problem for modern OS-es which can support  
> threads
>   in practice nearly in user space only.
>   I haven't touched Harbour function calling convention which comes  
> from
>   Clipper. It means that we do not pass pointer to VM to each  
> functions
>   like CLIP or xBase++. To resolve the problem I have to use thread  
> local
>   storage (TLS) where such pointer is kept. If platform does not  
> support
>   TLS then it can be emulated by us. Anyhow the speed of accessing TLS
>   data and extracting HB_STACK poitner is critical for performance.
>   Some compilers depending on used hardware and OS give native support
>   for TLS (f.e. __thread keyword in GCC/BCC or __declspec( thread )  
> in MSVC).
>   This should give optimal performance. On other Harbour uses TLS  
> functions
>   like TlsGetValue() (MS-WIN) or pthread_getspecific() (PTHREAD) are  
> used.
>   OS2 gives quite interesting TLS functionality which seems to be  
> quite fast
>   though it will be interesting to know how it is iplemented  
> internally for
>   real multi CPU machines (if it depends on CPU exception then the
>   performance will be bad). We need TLS only for one pointer to  
> HB_STACK
>   structure.
>   I haven't added any tricks like HB_THREAD_STUB in xHarbour to reduce
>   the cost of TLS access. If it will be necessary for some platform  
> the we
>   can add it.
>   Except TLS Harbour threads needs OS support for non recursive  
> mutexes or
>   critical sections and conditional variables. If platforms does not  
> support
>   conditional variables (f.e. MS-Win or OS2) then they can be  
> emulated using
>   multistate semaphores. I intentionally didn't create code which  
> may need
>   recursive mutexes. The non recursive ones are often faster and some
>   platforms may not support recursive mutexes so they will have to be
>   emulated by us.
>   Harbour uses reference counters for complex variables. It means  
> that even
>   readonly access to complex item causes internal write operations  
> necessary
>   to increment/decrement its reference counter. To make such  
> readonly access
>   MT safe we have to make incrementation and decrementation with  
> result
>   checking atomic. By default it's done by mutex inside vm/fm.c but  
> some
>   platforms have native support for atomic inc/dec operations, f.e.
>   Interlocked*() functions in MS-Win. If they are available then such
>   functions should be used to not reduce the performance by mutex call
>   very often used functions. For many CPUs it should be quite easy to
>   implement such atomic inc/dec functionality in assembler. F.e. for
>   GCC and x86@32 it may looks like:
>
>      static __inline__ void hb_atomic_inc32( volatile int * p )
>      {
>         __asm__ __volatile__(
>            "lock incl %0"
>            :"=m" (*p) :"m" (*p)
>         );
>      }
>
>      static __inline__ int hb_atomic_dec32( volatile int * p )
>      {
>         unsigned char c;
>         __asm__ __volatile__(
>            "lock decl %0"
>            "sete %1"
>            :"=m" (*p), "=qm" (c) :"m" (*p) : "memory"
>         );
>         return c == 0;
>      }
>
>   and then it's enough to define in hbthreads.h:
>      #define HB_ATOM_INC( p )    hb_atomic_inc32( ( volatile int * )  
> p )
>      #define HB_ATOM_DEC( p )    hb_atomic_dec32( ( volatile int * )  
> p )
>
>   Probably I'll make it for some most popular CPUs in the future.
>   In Harbour each thread which wants to call HVM functions have to  
> allocate
>   it's own HVM stack. It's done hb_vmThreadInit(). The HVM stack is  
> freed
>   by calling hb_vmThreadQuit(). This functions can be called also by  
> 3-rd
>   party threads if they want to call HVM functions or execute .prg  
> code.
>   Calling HVM functions without allocated stack will cause GPF.
>   I moved most of static variables to HVM stack to make them thread
>   local. But some of them like FS errors have their own alternative
>   copy which is used when thread does not allocate HVM stack. It  
> allows
>   to use hb_fs*() functions without HVM stack but programmer have to
>   know that error codes return by hb_fs*Error() functions can be
>   overwritten by other threads which also didn't allocated HVM stack.
>   To execute garbage collector scan and mark pass it's necessary to
>   stop other HVM threads. Otherwise the scan may give false results.
>   It's also possible to not stop threads but protect with mutex all
>   operations on GC items but it will probably cause performance  
> reduction
>   and will force some other modifications. Maybe I'll implement it
>   in the future.
>   I didn't use any OS level thread KILL or CANCEL calls. All HVM  
> threads
>   have to be cleanly removed without any resource leaks.
>   QUIT command terminate only calling thread. If main (startup) HVM
>   thread call QUIT then it sends QUIT request to all existing threads.
>   In QUIT state ALWAYS statements and destructors are executed.
>   New thread is created by:
>      hb_threadStart( <@sStart()> | <bStart> [, <params,...> ] ) ->  
> <pThID>
>   The returned value is a pointer to internal thread structure which
>   can be used in JOIN or DETACH operations. Each thread should be  
> Joined
>   or DETACHED to avoid resource leaks. If programmer does not store
>   <pThID> or all instances of <pThID> are destroyed then thread is
>   automatically detached. I do not know clear method of thread  
> detaching
>   in OS2. If some OS2 users knows it then plase update vm/hbthread.c.
>   When thread terminates then all locked by this thread mutexes are
>   released.
>   Each thread uses its own memvars (PRIVATEs and PUBLICs) and work  
> areas.
>   When new thread is created then it inherits from parent thread:
>      - code page
>      - language
>      - SETs
>      - default RDD
>   error block is initialized to default value by calling ERRORSYS()
>   and PUBLIC variable GetList := {} is created.
>   The following objects are initialized to default value:
>         - error block
>         - math error handler and math error block
>         - macro compiler features setting (hb_setMacro())
>           or move them to SETs.
>   We can think about inheriting them. It's also possible to add
>   inheriting of all visible memvars but I do not know it's good
>   idea.
>
>   Compilation and linking:
>   For MT mode HVM library should be compiled with HB_MT_VM macro.
>   GNU make automatically creates hbvmmt library which should be
>   linked with Harbour MT programs instead of hbvm.
>   Non GNU make files should be updated.
>   If given compiler support TLS then you can try to set HB_USE_TLS
>   to force using native compiler TLS support. Now it's enabled by
>   default only for BCC. For Linux and GCC builds it may depend also
>   on used GLIBC version. In older system there is no TLS support
>   at all or TLS works only for shared binaries so I haven't enabled
>   it. If you will test some other compiler then please add default
>   native TLS support for them in hbthread.h
>   Users using hb* scripts can simply use -mt switch when they want
>   to create MT program, f.e.:
>      hbmk -n -w3 -es2 -mt mttest01.prg
>
>   There are still some minor things which should be done but I'll
>   do them later. Current state seems to be fully functional.
>   The most important and still missing is our own file lock server
>   for RDD synchronization in POSIX systems. Kernel internally
>   recognize POSIX locks by PID and file i-node - not PID and file
>   handle. It means that the same file open more then once by one
>   process shares locks. Because POSIX locks can be overwritten
>   then we do not have any synchronization between aliased workareas
>   or threads using the same table in *nixes. We have to make
>   synchronization ourselves. I'll create such lock server ASAP.
>
>   Please test and enjoy using Harbour threads.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From bedipritpal at hotmail.com  Sat Sep 13 14:18:54 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Sep 13 14:18:59 2008
Subject: [Harbour] ChangeLog 2008-09-13 18:49 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <F3468BFA-20B6-4875-BACA-6595290651BA@syenar.hu>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
	<F3468BFA-20B6-4875-BACA-6595290651BA@syenar.hu>
Message-ID: <19473279.post@talk.nabble.com>



Szak?ts Viktor wrote:
> 
> Very nice, many thanks and congrats for this job.
> 

+10000000000000000

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/ChangeLog-2008-09-13-18%3A49-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp19472757p19473279.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sat Sep 13 14:20:36 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Sep 13 14:20:46 2008
Subject: [Harbour] do {} while( 0 ) vs. {}
In-Reply-To: <20080913180914.GC7892@34-mo7-2.acn.waw.pl>
References: <6AAE2D0F-4714-41DB-9BD6-64FE82A67EDE@syenar.hu>
	<20080913180914.GC7892@34-mo7-2.acn.waw.pl>
Message-ID: <12981B74-C915-451F-B5F1-82F6FD869553@syenar.hu>

Thanks, I see now. The culprit is the ';'.

Brgds,
Viktor

On 2008.09.13., at 20:09, Przemys??aw Czerpak wrote:

> On Sat, 13 Sep 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> What is the reason we're using 'do { <code> } while( 0 )'
>> to enclose large macro blocks, instead of using plain '{ <code> }' ?
>> F.e. HB_ORD2DBL() in hbdefs.h.
>
> macros encapsulated inside do {...} while(0) can be safely used in any
> context. F.e.try to compile this code:
>
>   #define macro1 do { printf( "macro1\n" ); } while(0)
>   #define macro2 { printf( "macro1\n" ); }
>
>   if( 1 )
>      macro1;
>   else
>      printf( "else\n" );
>
>   if( 1 )
>      macro2;
>   else
>      printf( "else\n" );
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From bedipritpal at hotmail.com  Sat Sep 13 14:42:45 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Sep 13 14:42:50 2008
Subject: [Harbour] ChangeLog 2008-09-13 18:49 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
Message-ID: <19473468.post@talk.nabble.com>


Przemek

I get this error:

...
.....
.......
+
obj\b32\hbrun.c:
Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Error: Unresolved external '__beginthreadex' referenced from
C:\HARBOUR\LIB\B32\HBVM.LIB|thread
Error: Unresolved external '__endthreadex' referenced from
C:\HARBOUR\LIB\B32\HBVM.LIB|thread
Error: Unresolved external '_hb_stack_ptr' referenced from
C:\HARBOUR\LIB\B32\HBVM.LIB|thread

** error 1 ** deleting bin\b32\hbrun.exe

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/ChangeLog-2008-09-13-18%3A49-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp19472757p19473468.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From toninhofwi at yahoo.com.br  Sat Sep 13 14:54:19 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sat Sep 13 14:47:35 2008
Subject: [Harbour] ChangeLog 2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
Message-ID: <lt2oc4p31spi5hb56ntvk1tb7kngrm7p7p@4ax.com>

Przemek, 

First of all: Thanks !   there are no words to describe this superb
job....

My speed test now 1.8 seconds faster ;)

I do a complete clean build for Harbour, my libs, fwh and my
application. All seems to works fine, except that I have a GPF when my
application finish. The GPF occurs when it end, same if I comment quit
command.

There are anything that I can do to help find it please?

Best regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From lorenzo.fiorini at gmail.com  Sat Sep 13 14:53:11 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Sep 13 14:53:17 2008
Subject: [Harbour] ChangeLog 2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809131153o37ce3e22k95a85fe7ba13aafc@mail.gmail.com>

On Sat, Sep 13, 2008 at 7:18 PM, Przemys? aw Czerpak <druzus@acn.waw.pl> wrote:

> 2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbpp.h
> ...
>   then we do not have any synchronization between aliased workareas
>   or threads using the same table in *nixes. We have to make
>   synchronization ourselves. I'll create such lock server ASAP.
>
>   Please test and enjoy using Harbour threads.

Maaaaaaaaaaannnnnnnnnnnnnnnnnnyyyyyyyyyyyyyyyyyyy thanks.

best regards,
Lorenzo
From druzus at acn.waw.pl  Sat Sep 13 15:15:04 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sat Sep 13 15:15:47 2008
Subject: [SPAM]  Re: [Harbour] ChangeLog 2008-09-13 18:49 UTC+0200
	Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <19473468.post@talk.nabble.com>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
	<19473468.post@talk.nabble.com>
Message-ID: <20080913191504.GA25899@34-mo7-2.acn.waw.pl>

On Sat, 13 Sep 2008, Pritpal Bedi wrote:
> Przemek
> I get this error:
> obj\b32\hbrun.c:
> Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
> Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
> Error: Unresolved external '__beginthreadex' referenced from
> C:\HARBOUR\LIB\B32\HBVM.LIB|thread
> Error: Unresolved external '__endthreadex' referenced from
> C:\HARBOUR\LIB\B32\HBVM.LIB|thread
> Error: Unresolved external '_hb_stack_ptr' referenced from
> C:\HARBOUR\LIB\B32\HBVM.LIB|thread
> ** error 1 ** deleting bin\b32\hbrun.exe

You have to link your application with cw32mt.lib instead of cw32.lib.
For GNU make you can use L_USR envvar:
   set L_USR=cw32mt.lib
for nongnu make you can use LDFLAGS:
   set LDFLAGS=cw32mt.lib

best regards,
Przemek
From druzus at acn.waw.pl  Sat Sep 13 15:17:13 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sat Sep 13 15:17:54 2008
Subject: [Harbour] ChangeLog 2008-09-13 18:49 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <lt2oc4p31spi5hb56ntvk1tb7kngrm7p7p@4ax.com>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
	<lt2oc4p31spi5hb56ntvk1tb7kngrm7p7p@4ax.com>
Message-ID: <20080913191712.GB25899@34-mo7-2.acn.waw.pl>

On Sat, 13 Sep 2008, Toninho@fwi wrote:

> First of all: Thanks !   there are no words to describe this superb
> job....
> My speed test now 1.8 seconds faster ;)
> I do a complete clean build for Harbour, my libs, fwh and my
> application. All seems to works fine, except that I have a GPF when my
> application finish. The GPF occurs when it end, same if I comment quit
> command.
> There are anything that I can do to help find it please?

Try to catch in BCC debugger where it GPFs. It may help to locate
the problem.

best regards,
Przemek
From bedipritpal at hotmail.com  Sat Sep 13 16:00:43 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Sep 13 16:00:49 2008
Subject: [Harbour] [SPAM]  Re: ChangeLog 2008-09-13 18:49 UTC+0200
	Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <20080913191504.GA25899@34-mo7-2.acn.waw.pl>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
	<19473468.post@talk.nabble.com>
	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>
Message-ID: <19474140.post@talk.nabble.com>


Przemek 

Here is the sequence I adopted:

1) Download afresh from SVN
2) Opened console in c:\harbour
3) Issued: SET CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM
4) Issued: SET L_USR=cw32mt.lib 
5) Issued: Make_B32 CLEAN
6) Issued: Make_B32 
7) Received following errors:

...
source\vm\thread.c:
Warning W8065 source\vm\thread.c 349: Call to function '_beginthreadex' with
no prototype in function hb_threadCreate
Warning W8065 source\vm\thread.c 491: Call to function '_endthreadex' with
no prototype in function hb_threadStartVM
source\vm\vm.c:
...
...
+
obj\b32\hbrun.c:
Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Error: Unresolved external '__beginthreadex' referenced from
C:\HARBOUR\LIB\B32\HBVM.LIB|thread
Error: Unresolved external '__endthreadex' referenced from
C:\HARBOUR\LIB\B32\HBVM.LIB|thread
Error: Unresolved external '_hb_stack_ptr' referenced from
C:\HARBOUR\LIB\B32\HBVM.LIB|thread

** error 1 ** deleting bin\b32\hbrun.exe


What I am erring.

Regards
Pritpal Bedi




Przemyslaw Czerpak-2 wrote:
> 
> On Sat, 13 Sep 2008, Pritpal Bedi wrote:
>> Przemek
>> I get this error:
>> obj\b32\hbrun.c:
>> Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
>> Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
>> Error: Unresolved external '__beginthreadex' referenced from
>> C:\HARBOUR\LIB\B32\HBVM.LIB|thread
>> Error: Unresolved external '__endthreadex' referenced from
>> C:\HARBOUR\LIB\B32\HBVM.LIB|thread
>> Error: Unresolved external '_hb_stack_ptr' referenced from
>> C:\HARBOUR\LIB\B32\HBVM.LIB|thread
>> ** error 1 ** deleting bin\b32\hbrun.exe
> 
> You have to link your application with cw32mt.lib instead of cw32.lib.
> For GNU make you can use L_USR envvar:
>    set L_USR=cw32mt.lib
> for nongnu make you can use LDFLAGS:
>    set LDFLAGS=cw32mt.lib
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/ChangeLog-2008-09-13-18%3A49-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp19472757p19474140.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From philb at philb.us  Sat Sep 13 16:49:06 2008
From: philb at philb.us (Phil Barnett)
Date: Sat Sep 13 16:49:12 2008
Subject: [Harbour] Fwd: SourceForge.net Service Operations bulletin
	2008-09-12
Message-ID: <200809131649.06942.philb@philb.us>


----------  Forwarded Message  ----------

Subject: SourceForge.net Service Operations bulletin 2008-09-12
Date: Friday 12 September 2008
From: "SourceForge.net Team"

This message is being sent by SourceForge.net to all administrators of
SourceForge.net-hosted projects.

Questions or concerns regarding the contents of this
mailing may be directed to SourceForge.net staff at:
https://sourceforge.net/projects/alexandria/support/


Table of contents:

1. Site Status
2. Migration schedule and downtime announcements
3. New service: Hosted Apps
4. New service: Tracker 2 Beta
5. Conclusion


Section 1. SITE STATUS

We've received feedback in the past few months that project admins like
you want to be kept informed of any service downtimes which exceed 4
hours and the launch of any major new services.  We are sending out
today's mailing to all project admins to highlight the details of
upcoming datacenter migration events (some with downtime) and to provide
direct notice of some new service offerings.

We're averaging about one of these mails per month; and we're only
sending mail on the most significant activities.  If you would like to
see the play-by-play of our activities to improve the SourceForge.net
site and services offering, we encourage you to keep an eye on the Site
Status forum at:
http://sourceforge.net/sitestatus/

In addition to the Site Status forum, you can also receive this
information...

...via RSS feed, per:
http://sourceforge.net/community/forum/topic.php?id=2928&page&replies=1

...or via Mailing List, per:
http://sourceforge.net/community/forum/topic.php?id=2933&page&replies=1



Section 2. MIGRATION SCHEDULE

The SourceForge.net Service Operations team is now actively working to
complete our migration from our old California datacenter to our new
Chicago datacenter.  The following migration events have been scheduled:

* On Monday, 2008-09-15, SourceForge.net user account mail aliases
(@users.sourceforge.net accounts) will be migrated as per:
http://sourceforge.net/community/forum/topic.php?id=3388&page

* On Monday, 2008-09-15, Project Web service for those projects already
running in Chicago (the "bigprojects" pool) will have a brief downtime
as we move data on to new storage hardware as per:
http://sourceforge.net/community/forum/topic.php?id=3411&page&replies=1

* On Tuesday, 2008-09-16, the remainder of Project Web will be migrated
(with some downtime) as per:
http://sourceforge.net/community/forum/topic.php?id=3410&page&replies=1

* Tentatively, on Wednesday, 2008-09-17, CVS service will be migrated
(with some downtime) as per:
http://sourceforge.net/community/forum/topic.php?id=3413&page

* On Thursday, 2008-09-18, Mailing List service will be migrated (no
downtime anticipated), including Mailing List archives and Mailing List
search, as per:
http://sourceforge.net/community/forum/topic.php?id=3412&page



Section 3. HOSTED APPS

Earlier this week, we launched a major new service offering for
SourceForge.net-hosted projects, "Hosted Apps".  The Hosted Apps service
was launched with support for three applications: phpBB, MediaWiki and
LimeSurvey.  Whereas in the past projects would have needed to expend
your team's time to set these applications up in project web space, you
may now opt-in your project to use any of these applications and we
handle the software setup, performance tuning and upgrades.

You may opt-in for any of our supported applications using the new
"Hosted Apps" page under the Project Admin menu for your project.

Additional information regarding the launch of our Hosted Apps offering
may be seen at:
http://sourceforge.net/community/forum/topic.php?id=3358&page



Section 4. TRACKER 2 BETA

Our friends on the SourceForge.net Engineering team have been working
to improve the UI of the Tracker ticketing system that is part of the
feature set built in to the SourceForge.net site.  Earlier this week,
they launched a beta of the new functionality, including a substantial
number of UI improvements and user-requested enhancements to Tracker.
This new functionality is visible when you opt-in for the Tracker 2 beta. 
The Engineering team is eager to receive your feedback.

Information regarding this new offering (including how to opt-in) may be
seen at: http://sourceforge.net/community/forum/topic.php?id=3368&page



Section 5. CONCLUSION

We hope that this has been a useful update from our team to your team.

If you have any follow-up questions or concerns, please reach out to us
by submitting a Support Request (which you can flag as private if you
don't want other folks to see), at:
https://sourceforge.net/projects/alexandria/support/

Thank you,

The SourceForge.net Service Operations team



----------------------------------------------------------------------
This message was sent on behalf of SourceForge.net based on
the existence of your user account on our site.

To unsubscribe from future mailings, login to the SourceForge.net site
and request account removal at:
http://sourceforge.net/account/remove_account.php

Or contact us by postal mail at:
Attn:  SourceForge.net Legal Services - Account Removal
SourceForge, Inc.
650 Castro Street, Suite 450
Mountain View, CA  94041

Unsubscribe requests will be processed within 10 days of receipt.

-- 
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.


-------------------------------------------------------

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From philb at philb.us  Sat Sep 13 17:15:34 2008
From: philb at philb.us (Phil Barnett)
Date: Sat Sep 13 17:15:36 2008
Subject: Fw: [Harbour] Suggestion for harbour web site?
In-Reply-To: <1E3A7E8548744E708BDBF71586AEB7AF@Home>
References: <1E3A7E8548744E708BDBF71586AEB7AF@Home>
Message-ID: <200809131715.34780.philb@philb.us>

On Friday 12 September 2008 10:01:20 pm Vailton Renato wrote:

> Absolutely! I need to be sent to me the correct texts to update the site.
> What is the best way to do this?

I will change the password and send you the access directions.

Then you can use the NVU editor to fetch the current site, modify it and 
reload it. You should not need any other tools to maintain the site.

http://www.nvudev.com/index.php

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From philb at philb.us  Sat Sep 13 17:19:03 2008
From: philb at philb.us (Phil Barnett)
Date: Sat Sep 13 17:19:07 2008
Subject: R: [Harbour] Suggestion for harbour web site?
In-Reply-To: <9257026e0809121112m7ff1feb0gd4ca9e8a5e0e0a38@mail.gmail.com>
References: <48CA96DE.8090601@gmail.com>
	<C3833CDE-2942-4555-9BC1-E3954D3E71FB@syenar.hu>
	<9257026e0809121112m7ff1feb0gd4ca9e8a5e0e0a38@mail.gmail.com>
Message-ID: <200809131719.03857.philb@philb.us>

On Friday 12 September 2008 02:12:46 pm Lorenzo Fiorini wrote:
> On Fri, Sep 12, 2008 at 7:39 PM, Szak?ts Viktor <harbour.01@syenar.hu> 
wrote:
> > Great, I surely am. Probably not alone, even.
>
> I'm not an English native speaker so I'll be very "schematic".
> I hope this will not sounds rude or offensive.
> My intention is only to find the best words to describe what I think
> is a masterpiece of the computer science :)
>
> I fear that "A 32/64 bits Cl*pper compiler" probably doesn't mean
> anything to the 99% of the programmers. I would suggest to change it
> to sth more generic like a "A smart language, powerful yet easy to
> learn and use" ( just to give the idea ).
>
> Also "Harbour is a compiler for the xBase superset language called
> Cl*pper..." is confusing and seems that Cl*pper is a superset of
> xBase.
> But Wikipedia says that xBase is: "xBase is the generic term for all
> programming languages that derive from the original dBASE
> (Ashton-Tate) programming language and database formats. These ..."
> and about Harbour it says: "Harbour is a modern, fast computer
> programming language. it is a Clipper-compatible compiler which is
> cross-platform, running on many operating systems (DOS, Microsoft
> Windows, Linux (32, 64), Unix (32, 64), Mac OS X, Windows CE, Pocket
> PC)."
>
> Here the "Clipper-compatible compiler which is cross-platform" seems
> to be the a feature of Cl*pper but about Clipper it says: "Cl*pper is
> a computer programming language that is used to create software
> programs that originally operated primarily under DOS. Although it is
> a powerful general-purpose programming language, it was primarily used
> to create database/business programs."
>
> Of course Harbour IS an "xBase language, 100% compatible with Cl*pper"
> but this is only the start. I think we should clearly state that
> Harbour is a full, powerful, modern language not simply "a compiler"
> of a legacy product.
>
> Also about "Why using it":
>
> "Harbour is proven to be stable, robust and efficient...", these kind
> of assertions are difficult to prove ( particularly for a 1.0 release
> ) and generic. Every computer language is claimed stable and robust.
>
> Instead I would mention thinks like:
>
> - it's easy to learn and to use
> - it has a powerful preprocessor
> - it has many "dynamic" programming features ( code blocks, macros, hrb )
> - it has an embedded database
> - it has many ready to use "extensions"

Fine with me. Lets start with some nice wording and it's not cast in stone. We 
can continue to groom it.

> best regards,
> Lorenzo

If we want to use the word Clipper on our web site, we need a footnote on the 
page that says Clipper is a registered trademark of Computer Associates.

That's all it takes to make it legal.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From info at fsgiudice.com  Sat Sep 13 17:53:20 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Sep 13 17:53:29 2008
Subject: [Harbour] ChangeLog 2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
Message-ID: <48CC3650.7090607@fsgiudice.com>



Przemys?aw Czerpak ha scritto:
> 2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>
[snip]

>    Please test and enjoy using Harbour threads.
> 
> best regards,
> Przemek

A BIG THANK YOU!!!!

Best Regards

Francesco

From lorenzo.fiorini at gmail.com  Sat Sep 13 18:24:17 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Sep 13 18:24:24 2008
Subject: [Harbour] ChangeLog 2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809131524i7c9aed54i2be69fd8c75770fa@mail.gmail.com>

On Sat, Sep 13, 2008 at 7:18 PM, Przemys? aw Czerpak <druzus@acn.waw.pl> wrote:

>   Please test and enjoy using Harbour threads.

Under Linux everything works as expected so far.

Many thanks again.

best regards,
Lorenzo
From druzus at acn.waw.pl  Sat Sep 13 18:38:40 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sat Sep 13 18:39:22 2008
Subject: [SPAM]  Re: [Harbour] [SPAM]  Re: ChangeLog 2008-09-13 18:49
	UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <19474140.post@talk.nabble.com>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
	<19473468.post@talk.nabble.com>
	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>
	<19474140.post@talk.nabble.com>
Message-ID: <20080913223840.GA26853@34-mo7-2.acn.waw.pl>

On Sat, 13 Sep 2008, Pritpal Bedi wrote:

Hi Pritpal,

> Here is the sequence I adopted:
> 1) Download afresh from SVN
> 2) Opened console in c:\harbour
> 3) Issued: SET CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM
> 4) Issued: SET L_USR=cw32mt.lib 

If you are using make_b32.bat then you should set LDFLAGS instead of L_USR.
BTW Viktor can you add support for L_USR and A_USR to nan GNU make files?

> 5) Issued: Make_B32 CLEAN
> 6) Issued: Make_B32 
> 7) Received following errors:
> ...
> source\vm\thread.c:
> Warning W8065 source\vm\thread.c 349: Call to function '_beginthreadex' with
> no prototype in function hb_threadCreate
> Warning W8065 source\vm\thread.c 491: Call to function '_endthreadex' with
> no prototype in function hb_threadStartVM
> source\vm\vm.c:

It's declared inside process.h. Looks that __MT__ is not defined.
I'm not BCC user so I do not know if some compiler switch does not
enable it. For sure it's enabled by default in my BCC version I'm
using with WINE in my Linux box. You can always try to set it
manually by:
   set C_USR=-D__MT__

> obj\b32\hbrun.c:
> Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
> Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
> Error: Unresolved external '__beginthreadex' referenced from
> C:\HARBOUR\LIB\B32\HBVM.LIB|thread
> Error: Unresolved external '__endthreadex' referenced from
> C:\HARBOUR\LIB\B32\HBVM.LIB|thread
> Error: Unresolved external '_hb_stack_ptr' referenced from
> C:\HARBOUR\LIB\B32\HBVM.LIB|thread

this is caused by missing cw32mt.lib in LDFLAGS.

best regards,
Przemek
From mbelgrano at deltain.it  Sat Sep 13 18:47:50 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Sep 13 18:48:23 2008
Subject: [Harbour] ChangeLog 2008-09-13 18:49 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF80@SRV02.deltain.net>

Very great!
Compliment
Is Possible add this posting to harbour\doc?
I can do if samebody suggest at wich file add?
I think that we need a new doc multi_thread.doc

A little question for Przemyslaw 
Will each thread have independent console?


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of PrzemysL?aw
Czerpak
Sent: Saturday, September 13, 2008 7:19 PM
To: Harbour Project Main Developer List.
Subject: [Harbour] ChangeLog 2008-09-13 18:49 UTC+0200 Przemyslaw
Czerpak(druzus/at/priv.onet.pl)

2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbpp.h
  * harbour/include/hbvm.h
  * harbour/include/hbcomp.h
  * harbour/include/hbcompdf.h
  * harbour/include/hbtrace.h
  * harbour/include/hbapilng.h
  * harbour/include/hbinit.h
  * harbour/source/rtl/langapi.c
  * harbour/source/pp/ppcore.c
  * harbour/source/pp/hbpp.c
  * harbour/source/vm/itemapi.c
  * harbour/source/vm/hvm.c
  * harbour/source/common/hbver.c
  * harbour/source/common/hbtrace.c
  * harbour/source/common/expropt2.c
  * harbour/source/compiler/complex.c
  * harbour/source/compiler/hbident.c
  * harbour/source/compiler/hbfunchk.c
    * changed some declarations from 'char *' to 'const char *' and
      fixed casting for some more pedantic compilers

  * harbour/source/pp/ppcore.c
    ! fixed one typo which could cause memory leak and even GPF

  * harbour/common.mak
  * harbour/source/vm/Makefile
  * harbour/source/rtl/Makefile
  - harbour/source/rtl/set.c
  + harbour/source/vm/set.c
  * harbour/include/hbstack.h
  * harbour/source/vm/estack.c
    * moved from RTL to HVM
    * eliminated hb_set global structure
    * moved set structure to HVM stack
    + added internal function hb_setClone() which is used to create
      copy of SET structure for child threads
    * hidden HB_SET_STRUCT declaration - 3-rd part code must not access
it
      directly. Dedicated hb_set*() functions should be used instead.
    + added new function:
         BOOL hb_setSetItem( HB_set_enum set_specifier, PHB_ITEM pItem )
      which allow to change some set by 3-rd party code.
      TODO: not all SETs can be changed yet - if someone have a while
            then please add code for missing ones.

  * harbour/include/set.ch
  * harbour/include/hbset.h
    + added _SET_CODEPAGE which works like _SET_LANGUAGE giving common
      interface

  * harbour/include/hbsetup.h
    + added HB_CODEPAGE_DEFAULT which works like HB_LANG_DEFAULT

  * harbour/source/vm/hvm.c
    ! fixed builds which uses non EN lang or code page modules
      by forcing linking the chosen ones

  * harbour/include/hbstack.h
  * harbour/source/vm/estack.c
  * harbour/include/hbapicdp.h
  * harbour/source/rtl/cdpapi.c
    - removed global code page variable: hb_cdp_page and moved
      code page settings to HVM stack
    + added new function hb_cdpID() which returns current code page
      character ID
    + added new functions hb_vmCDP() and hb_vmSetCDP() to get/set
      active for given thread code page structure

  * harbour/include/hbstack.h
  * harbour/source/vm/estack.c
  * harbour/include/hbapilng.h
  * harbour/source/rtl/langapi.c
    + moved lang setting to HVM stack
    + added new functions hb_vmLang() and hb_vmSetLang() to get/set
      active for given thread language module

  * harbour/include/hbvmpub.h
  * harbour/include/hbstack.h
  * harbour/include/hbapi.h
  * harbour/source/vm/estack.c
  * harbour/source/vm/dynsym.c
  * harbour/source/vm/itemapi.c
  * harbour/source/vm/memvars.c
    * changed memvar handles for HB_HANDLE to void * which is directly
      casted to PHB_ITEM - new memvar references
    * changed HB_DYNS declarations for MT mode. In MT mode HB_DYNS does
      not contain area and memvar handles which are moved to thread
      local HVM stack
    + added array for thread local memvar and area handles to HVM stack
    % eliminated global continues array with all memvars and detached
locals
    % changed HB_IT_MEMVAR to use pointers to HB_ITEM directly - it
resolve
      synchronization problems in MT mode and should also improve the
speed
      and reduce memory usage. It should be well visible in applications
which
      uses lot of detached locals.
    - removed hb_memvarsInit() and hb_memvarsFree() - they are not
necessary
      now because we do not longer use array with all allocated memvars
      and detached local and private stack initialization is made
      automatically
    + added internal functions hb_dynsymGetMemvar()/hb_dynsymSetMemvar()
    + added hb_memvarGetValueBySym() for debugger
    * moved PRIVATE variable stack to HVM stack
    * eliminated all static variables in memvars module

  * harbour/include/hbstack.h
  * harbour/source/vm/estack.c
  * harbour/source/rtl/fserror.c
    * moved IO errors to HVM stack
    + added special IO error handling which works without HVM stack
      It allows to use hb_fs*() functions without allocated stack
      by 3-rd party threads.

  * harbour/source/rtl/filesys.c
    * moved hb_fsCurDir() to HVM stack with special handling to work
      with HVM stack like IO errors

  * harbour/source/rdd/workarea.c
    * allocated RDD node array in bigger peaces to reduce later RT
      reallocations in MT mode. If user want to add dynamically more
      then 64 RDDs then it should synchronize this operation himself.

  * harbour/source/rdd/wacore.c
    * moved WA list, current WA, default RDD and neteer() flag to HVM
stack

  * harbour/include/hbdefs.h
    - removed HB_HANDLE declaration

  * harbour/include/hbapi.h
    - removed HB_VALUE structure - it's not longer used due to different
      memvar handling
    * updated hb_struMemvar to new memvar handling
    * replaced hb_vmIsLocalRef() and hb_memvarsIsMemvarRef() with
      hb_vmIsStackRef() which respect multiple stack and new memvar
      and static structures and location in GC mark pass.

  * harbour/include/hbstack.h
  * harbour/source/vm/estack.c
  * harbour/source/vm/hvm.c
    + added support for thread specific data located on HVM stack
      Now it's possible to allocate static variables which are
      local to thread. Such variables are allocated on HVM stack
      and automatically destroyed. To declare new TSD variable use:
         HB_TSD_NEW( <name>, <size>, <init>, <destruct> )
      <name> - name of variable which holds TSD handler
      <size> - size of TSD are which has to be allocated
      <init> - init function, executed when new TSD is allocated by
thread
               (thread access given TSD 1-st time). This function
receives
               void * pointer to allocated area.
      <destruct> - destructor function executed when HVM stack is
destroyed
      f.e.:
         static HB_TSD_NEW( s_scrData, sizeof( HB_SCRDATA ),
                            NULL, hb_xSaveRestRelease );
      To initialize dynamically allocated TSD variable use:
         HB_TSD_INIT( <name>, <size>, <init>, <destruct> )
      Pointer to TSD can be accessed using hb_stackGetTSD( &<name> )
      where <name> is name of variable which holds TSD handler, f.e.:
         PHB_SCRDATA pScrData = ( PHB_SCRDATA ) hb_stackGetTSD(
&s_scrData );
      See source/rtl/xsavescr.c as an example
      It's also possible to test if data has been already allocated for
      current thread by:
         hb_stackTestTSD( &<name> ) => pData
      it works like hb_stackGetTSD() but return NULL if current thread
data
      has not been allocated yet.

  * harbour/include/hbstack.h
  * harbour/source/vm/estack.c
    * changed hb_stack location to thread local storage in MT mode
    + added functions and macros to access/assign new HVM stack members
    + changed garbage collection mark functions to work with multiple
      stacks, thread local static and memvar variables

  * harbour/source/rtl/xsavescr.c
    * use TSD data for screen buffer to make
__XSAVESCREEN()/__XRESTSCREEN()
      thread independent

  * harbour/source/rtl/idle.c
    * use TSD data for idle task settings and codeblocks
    - removed hb_idleShutDown() - it's not longer necessary

  * harbour/source/rtl/setkey.c
    * use TSD data for allocated keys to make SETKEY() thread
independent

  * harbour/source/rtl/math.c
    * moved math error handler, math error block, math error mode and
      math error structure to TSD

  * harbour/source/rtl/errorapi.c
    * moved error handler, error block, error launch counter and DOS
error
      value to TSD

  * harbour/source/rtl/inkey.c
    * moved inkey "before" and "after" blocks to TSD

  * harbour/source/rdd/hsx/hsx.c
    * moved HSX handles array to TSD

  * harbour/include/hbapigt.h
  * harbour/source/rtl/console.c
    - removed hb_setkeyInit() and hb_setkeyExit() - they are not longer
      necessary, allocated resources will be freed by TSD destructor
      function

  * harbour/include/hbapi.h
  * harbour/source/rtl/console.c
    * removed hb_conXSaveRestRelease() - it's not longer necessary,
      allocated resources will be freed by TSD destructor function

  * harbour/source/vm/macro.c
    * moved s_macroFlags to TSD

  * harbour/source/rtl/accept.c
    * moved accept buffer to TSD

  * harbour/include/hbcomp.h
  * harbour/include/hbcompdf.h
  * harbour/include/hbxvm.h
  * harbour/source/compiler/hbmain.c
  * harbour/source/compiler/hbfix.c
  * harbour/source/compiler/hbpcode.c
  * harbour/source/compiler/hbdead.c
  * harbour/source/compiler/complex.c
  * harbour/source/compiler/genc.c
  * harbour/source/compiler/gencc.c
  * harbour/source/compiler/hbopt.c
  * harbour/source/compiler/hblbl.c
  * harbour/source/compiler/hbstripl.c
  * harbour/source/compiler/harbour.y
  * harbour/source/compiler/harbour.yyc
  * harbour/source/compiler/harbour.yyh
  * harbour/source/vm/hvm.c
    + added new PCODE HB_P_THREADSTATICS
    + added support for static variables which are local to thread:
         THREAD STATIC <varname [:= <exp>], ...>
      They work like normal static variables but each thread operates
      on its own copy.
    * added protection against possible double call to hb_xfree()
      It can happen due to wrong marking expressions as used by bison
      and executing destructors after our free code when syntax error
      appear.

  * harbour/source/rtl/perfuncs.prg
  * harbour/source/rtl/menuto.prg
  * harbour/source/rtl/getlist.prg
  * harbour/source/rtl/readvar.prg
  * harbour/source/rtl/text.prg
    * use THREAD STATIC variables to make above code MT safe

  * harbour/include/hbgtcore.h
  * harbour/source/rtl/hbgtcore.c
    + added hb_gt_BaseFree() which will release current GT pointer
      locked by hb_gt_Base() function. This function will be used
      to optional automatic GT access synchronization when threads
      share the same GT.

  * harbour/source/rtl/gtapi.c
  * harbour/source/rtl/inkeyapi.c
  * harbour/source/rtl/mouseapi.c
  * harbour/contrib/hbct/ctwin.c
    * free GT pointer by hb_gt_BaseFree()
      TODO: CTWIN is not MT safe yet - it will be updated together
            with core GT when we add multi window interface for
            thread with own console window.

  * harbour/bin/hb-func.sh
  * harbour/config/linux/gcc.cf
    + added rt lib to Linux builds

  * harbour/bin/postinst.sh
    * create MT safe version of FM stat library: fmmt

  * harbour/bin/pack_src.sh
    + added support for ZIP packing

  * harbour/include/hbapi.h
  * harbour/include/hbvm.h
  * harbour/source/vm/hvm.c
    + added hb_vmThreadInit()/hb_vmThreadQuit() functions - they
initialize
      HVM for calling thread so it can execute .prg code and call HVM
      functions. They can be used by 3-rd party code threads.
    + added hb_vmUnlock()/hb_vmLock() functions which informs that
      thread will not operate on HVM structures for some time allowing
      to execute single thread only processes like GC.
    + added hb_vmThreadQuitRequest() which sends stop request to given
       thread
    + added hb_vmWaitForThreads() which stops main thread execution
waiting
      for other threads
    + added hb_vmSuspendThreads() and hb_vmResumeThreads() used be GC
      to stop all HVM threads before mark/swap scan
    + added linked list of HVM stacks
    + added hb_vmTerminateThreads() used by main HVM thread in QUIT
state
    * moved EXIT procedures execution from QUIT request to HVM QUIT
state
      in MT mode. It may effects some non structural code which tries to
      access private variables in EXIT functions but it's much cleaner
      and understandable for user. Please remember that we guaranties
      that ALWAYS code in BEGIN SEQUENCE is _always_ executed even after
      HVM QUIT request just like destructs. Personally I think that we
      should move EXIT procedures execution also in ST mode.
    * changed startup and cleanup code for new internal structures
    * changes startup and cleanup code for MT mode
    % removed some redundant HB_ITEM type settings
    ! eliminated non MT safe code which was using reference counters
      without protection

  * harbour/common.mak
  * harbour/source/vm/Makefile
  + harbour/include/hbthread.h
  + harbour/source/vm/thread.c
    + added C level functions to manage threads and synchronization
objects
      See hbthread.h for detail description. They are based on PTHREAD
API
      and PTHREAD documentation can be used as reference. I
intentionally
      keep this list small for easier multiplatform porting.
      Now they have been implemented for PTHREADS (POSIX threads
supported by
      many different OSes), MS-Win32/64 and OS2. The OS2 version is not
tested
      at all. I do not even know if it can be compiled so please make
tests.
      I used Internet resources and some part of xHarbour code as
documentation
      for OS2 MT API. It should be quite easy to add other platforms if
necessary.
      Harbour core code needs non recursive mutexes, conditional
variables and
      TLS for one pointer. If platforms does not support conditional
variables
      (f.e. MS-Win or OS2) then they can be emulated using multistate
semaphores.
    + added .prg functions to manage threads and synchronization
objects:
         hb_threadStart( <@sStart()> | <bStart> [, <params,...> ] ) ->
<pThID>
         hb_threadJoin( <pThID> [, @<xRetCode> ] ) -> <lOK>
         hb_threadDetach( <pThID> ) -> <lOK>
         hb_threadQuitRequest( <pThID> ) -> <lOK>
         hb_threadWaitForAll() -> NIL
         hb_mutexCreate() -> <pMtx>
         hb_mutexLock( <pMtx> [, <nTimeOut> ] ) -> <lLocked>
         hb_mutexUnlock( <pMtx> ) -> <lOK>
         hb_mutexNotify( <pMtx> [, <xVal>] ) -> NIL
         hb_mutexNotifyAll( <pMtx> [, <xVal>] ) -> NIL
         hb_mutexSubscribe( <pMtx>, [ <nTimeOut> ] [, @<xSubscribed> ] )
-> <lSubscribed>
         hb_mutexSubscribeNow( <pMtx>, [ <nTimeOut> ] [, @<xSubscribed>
] ) -> <lSubscribed>
      The function list should give similar to xHarbour API but they are
not exactly
      the same and except of hb_mutex*() functions which should
replicate xHarbour behavior.

  + harbour/source/vm/vmmt
  + harbour/source/vm/vmmt/Makefile
    + added hbvmmt library to GNU make builds.
      Non GNU make builds should be updated.

  * harbour/contrib/hbct/pos1.c
  * harbour/contrib/gtwvg/gtwvg.c
  * harbour/contrib/rddads/ads1.c
  * harbour/contrib/hbmisc/spd.c
  * harbour/contrib/hbbmcdx/bmdbfcdx.c
  * harbour/contrib/examples/rdddbt/dbfdbt1.c
  * harbour/source/vm/runner.c
  * harbour/source/vm/itemapi.c
  * harbour/source/vm/hvm.c
  * harbour/source/rtl/console.c
  * harbour/source/rtl/strcase.c
  * harbour/source/rtl/spfiles.c
  * harbour/source/rtl/defpath.c
  * harbour/source/rtl/hbgtcore.c
  * harbour/source/rtl/dateshb.c
  * harbour/source/rtl/mlcfunc.c
  * harbour/source/rtl/fstemp.c
  * harbour/source/rtl/is.c
  * harbour/source/rtl/setcolor.c
  * harbour/source/rtl/errorint.c
  * harbour/source/rtl/transfrm.c
  * harbour/source/rtl/dates.c
  * harbour/source/rtl/filesys.c
  * harbour/source/rtl/gtdos/gtdos.c
  * harbour/source/rtl/gtwin/gtwin.c
  * harbour/source/rtl/gtwvt/gtwvt.c
  * harbour/source/rtl/gtxwc/gtxwc.c
  * harbour/source/rtl/gttrm/gttrm.c
  * harbour/source/rtl/gtpca/gtpca.c
  * harbour/source/rtl/gtcgi/gtcgi.c
  * harbour/source/rtl/gtcrs/gtcrs.c
  * harbour/source/rtl/gtstd/gtstd.c
  * harbour/source/rtl/gtsln/gtsln.c
  * harbour/source/rtl/gtsln/gtsln.h
  * harbour/source/rdd/dbf1.c
  * harbour/source/rdd/sdf1.c
  * harbour/source/rdd/delim1.c
  * harbour/source/rdd/dbcmd.c
  * harbour/source/rdd/hbdbsort.c
  * harbour/source/rdd/workarea.c
  * harbour/source/rdd/dbffpt/dbffpt1.c
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
  * harbour/source/rdd/dbfntx/dbfntx1.c
  * harbour/source/rdd/hsx/hsx.c
  * harbour/source/rdd/hbsix/sxfname.c
    * use API functions instead of direct accessing to hb_cdp_page or
hb_set

  * harbour/source/rtl/fstemp.c
  * harbour/source/rtl/fssize.c
  * harbour/source/rtl/hbffind.c
  * harbour/source/rtl/filesys.c
    * encapsulate potentially slow IO operation inside
      hb_vmUnlock()/hb_vmLock() calls to allow other thread GC
      activation

  * harbour/contrib/hbnf/fttext.c
    ! fixed casting

  * harbour/contrib/gtwvg/gtwvg.h
    - removed #include <comctl32.h> - my MinGW and MinGW/CE instalations
do
      not have them. If it exists in some newer ones then it has to be
      covered by #if version checking.

  * harbour/source/vm/dynsym.c
    - removed hb_dynsymLog() and hb_dynsymMemvarHandle()
    * modified code to be MT safe and improved speed of some operations
    * added MUEXT protection for global dynamic table access

  * harbour/include/hbapi.h
  * harbour/source/vm/garbage.c
    * changed to work with MT HVM
    * changed to work with new memvar structures and thread local static
and
      memvar variables
    * added MUEXT protection for linked block lists
    + added parameter to hb_gcCollectAll() which will force GC
activation
      in MT mode by temporary suspending all executed threads.
    + added logical parameter to HB_GCALL() functions which is passed to
      hb_gcCollectAll()

  * harbour/source/vm/fm.c
    * added MUEXT protection for FM statistic module
    * added MT protection for reference counters. For platforms
      which supports atomic incrmenetation/decrementation (f.e.
      Interlocked*() functions in MS-Win) such operations are
      used. For other it's MUTEX protection. It gives MT safe
      readonly access for HVM complex variables without user
      synchronization. The MUTEX protection can cause some speed
      overhead so it's good to define MT safe version of
      HB_ATOM_INC()/HB_ATOM_DEC() in hbthread.h if given platform
      has them. Now they are defined only for Windows. For other
      platforms We can define can define them in assembler for some
      most popular CPUs in the future.

  * harbour/source/vm/classes.c
    * changed class definition array. Now it keeps pointers to class
      structures.
    * In MT mode allocated at HVM startup big enough array for class
      definitions to avoid later RT reallocations. It effectively
eliminates
      MUTEX synchronization for class structure access.
    * protect by MUTEX code for new class creation

  * harbour/source/debug/dbgentry.c
    * eliminated hbvmopt.h and direct accessing to HVM structures

  * harbour/source/rtl/gtclip.c
    * protect with MUTEX access to internal clipboard data

  * harbour/source/rdd/nulsys/nulsys.c
    + added hb_rddCloseAll()

  + harbour/tests/mt
  + harbour/tests/mt/mttest01.prg
  + harbour/tests/mt/mttest02.prg
  + harbour/tests/mt/mttest03.prg
  + harbour/tests/mt/mttest04.prg
  + harbour/tests/mt/mttest05.prg
  + harbour/tests/mt/mttest06.prg
  + harbour/tests/mt/mttest07.prg
    + added some demonstration/test small MT programs written
      using Harbour language. Some of them can be also compiled
      by xHarbour but xHarbour does not pass any of my tests in
      real multi-CPU machine so do not expect they will work
      correctly.

   Harbour threads needs OS threads support. Each Harbour thread is
directly
   mapped to OS thread. It's not very efficient on some older system
where
   cost of thread creation and/or task switching is very expensive but
it
   should not be bigger problem for modern OS-es which can support
threads
   in practice nearly in user space only.
   I haven't touched Harbour function calling convention which comes
from
   Clipper. It means that we do not pass pointer to VM to each functions
   like CLIP or xBase++. To resolve the problem I have to use thread
local
   storage (TLS) where such pointer is kept. If platform does not
support
   TLS then it can be emulated by us. Anyhow the speed of accessing TLS
   data and extracting HB_STACK poitner is critical for performance.
   Some compilers depending on used hardware and OS give native support
   for TLS (f.e. __thread keyword in GCC/BCC or __declspec( thread ) in
MSVC).
   This should give optimal performance. On other Harbour uses TLS
functions
   like TlsGetValue() (MS-WIN) or pthread_getspecific() (PTHREAD) are
used.
   OS2 gives quite interesting TLS functionality which seems to be quite
fast
   though it will be interesting to know how it is iplemented internally
for
   real multi CPU machines (if it depends on CPU exception then the
   performance will be bad). We need TLS only for one pointer to
HB_STACK
   structure.
   I haven't added any tricks like HB_THREAD_STUB in xHarbour to reduce
   the cost of TLS access. If it will be necessary for some platform the
we
   can add it.
   Except TLS Harbour threads needs OS support for non recursive mutexes
or
   critical sections and conditional variables. If platforms does not
support
   conditional variables (f.e. MS-Win or OS2) then they can be emulated
using
   multistate semaphores. I intentionally didn't create code which may
need
   recursive mutexes. The non recursive ones are often faster and some
   platforms may not support recursive mutexes so they will have to be
   emulated by us.
   Harbour uses reference counters for complex variables. It means that
even
   readonly access to complex item causes internal write operations
necessary
   to increment/decrement its reference counter. To make such readonly
access
   MT safe we have to make incrementation and decrementation with result
   checking atomic. By default it's done by mutex inside vm/fm.c but
some
   platforms have native support for atomic inc/dec operations, f.e. 
   Interlocked*() functions in MS-Win. If they are available then such
   functions should be used to not reduce the performance by mutex call
   very often used functions. For many CPUs it should be quite easy to
   implement such atomic inc/dec functionality in assembler. F.e. for
   GCC and x86@32 it may looks like:

      static __inline__ void hb_atomic_inc32( volatile int * p )
      {
         __asm__ __volatile__(
            "lock incl %0"
            :"=m" (*p) :"m" (*p)
         );
      }

      static __inline__ int hb_atomic_dec32( volatile int * p )
      {
         unsigned char c;
         __asm__ __volatile__(
            "lock decl %0"
            "sete %1"
            :"=m" (*p), "=qm" (c) :"m" (*p) : "memory"
         );
         return c == 0;
      }

   and then it's enough to define in hbthreads.h:
      #define HB_ATOM_INC( p )    hb_atomic_inc32( ( volatile int * ) p
)
      #define HB_ATOM_DEC( p )    hb_atomic_dec32( ( volatile int * ) p
)

   Probably I'll make it for some most popular CPUs in the future.
   In Harbour each thread which wants to call HVM functions have to
allocate
   it's own HVM stack. It's done hb_vmThreadInit(). The HVM stack is
freed
   by calling hb_vmThreadQuit(). This functions can be called also by
3-rd
   party threads if they want to call HVM functions or execute .prg
code.
   Calling HVM functions without allocated stack will cause GPF.
   I moved most of static variables to HVM stack to make them thread
   local. But some of them like FS errors have their own alternative
   copy which is used when thread does not allocate HVM stack. It allows
   to use hb_fs*() functions without HVM stack but programmer have to
   know that error codes return by hb_fs*Error() functions can be
   overwritten by other threads which also didn't allocated HVM stack.
   To execute garbage collector scan and mark pass it's necessary to
   stop other HVM threads. Otherwise the scan may give false results.
   It's also possible to not stop threads but protect with mutex all
   operations on GC items but it will probably cause performance
reduction
   and will force some other modifications. Maybe I'll implement it
   in the future.
   I didn't use any OS level thread KILL or CANCEL calls. All HVM
threads
   have to be cleanly removed without any resource leaks.
   QUIT command terminate only calling thread. If main (startup) HVM
   thread call QUIT then it sends QUIT request to all existing threads.
   In QUIT state ALWAYS statements and destructors are executed.
   New thread is created by:
      hb_threadStart( <@sStart()> | <bStart> [, <params,...> ] ) ->
<pThID>
   The returned value is a pointer to internal thread structure which
   can be used in JOIN or DETACH operations. Each thread should be
Joined
   or DETACHED to avoid resource leaks. If programmer does not store
   <pThID> or all instances of <pThID> are destroyed then thread is
   automatically detached. I do not know clear method of thread
detaching
   in OS2. If some OS2 users knows it then plase update vm/hbthread.c.
   When thread terminates then all locked by this thread mutexes are
   released.
   Each thread uses its own memvars (PRIVATEs and PUBLICs) and work
areas.
   When new thread is created then it inherits from parent thread:
      - code page
      - language
      - SETs
      - default RDD
   error block is initialized to default value by calling ERRORSYS()
   and PUBLIC variable GetList := {} is created.
   The following objects are initialized to default value:
         - error block
         - math error handler and math error block
         - macro compiler features setting (hb_setMacro())
           or move them to SETs.
   We can think about inheriting them. It's also possible to add
   inheriting of all visible memvars but I do not know it's good
   idea.

   Compilation and linking:
   For MT mode HVM library should be compiled with HB_MT_VM macro.
   GNU make automatically creates hbvmmt library which should be
   linked with Harbour MT programs instead of hbvm.
   Non GNU make files should be updated.
   If given compiler support TLS then you can try to set HB_USE_TLS
   to force using native compiler TLS support. Now it's enabled by
   default only for BCC. For Linux and GCC builds it may depend also
   on used GLIBC version. In older system there is no TLS support
   at all or TLS works only for shared binaries so I haven't enabled
   it. If you will test some other compiler then please add default
   native TLS support for them in hbthread.h
   Users using hb* scripts can simply use -mt switch when they want
   to create MT program, f.e.:
      hbmk -n -w3 -es2 -mt mttest01.prg

   There are still some minor things which should be done but I'll
   do them later. Current state seems to be fully functional.
   The most important and still missing is our own file lock server
   for RDD synchronization in POSIX systems. Kernel internally
   recognize POSIX locks by PID and file i-node - not PID and file
   handle. It means that the same file open more then once by one
   process shares locks. Because POSIX locks can be overwritten
   then we do not have any synchronization between aliased workareas
   or threads using the same table in *nixes. We have to make
   synchronization ourselves. I'll create such lock server ASAP.

   Please test and enjoy using Harbour threads.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Sat Sep 13 19:06:07 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Sep 13 19:06:16 2008
Subject: [Harbour] [SPAM] Re: ChangeLog 2008-09-13 18:49
	UTC+0200Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <19474140.post@talk.nabble.com>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl><19473468.post@talk.nabble.com><20080913191504.GA25899@34-mo7-2.acn.waw.pl>
	<19474140.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF81@SRV02.deltain.net>

Can samebody revise info about macro?

DHB_MT_VM?
For MT mode HVM library should be compiled with HB_MT_VM macro.
   GNU make automatically creates hbvmmt library which should be
   linked with Harbour MT programs instead of hbvm.

 -DHB_WIN32_IO
It's default for MS-Windows builds. Using Win32 IO API can be disabled
by HB_WIN32_IO_OFF.
-DHB_FM_WIN32_ALLOC
MinGW does not use own memory manager but redirects malloc/realloc/free
to WIN32 API functions LocalAlloc()/LocalReAlloc()/LocalFree() so you
should have similar results also in BCC when you build [x]Harbour with
HB_FM_WIN32_ALLOC macro. Similar but probably not well repeatable and
differ even on the same machine. I do not know why by the same sequence
of calls to Windows memory function as above gives strongly differ
results.
When CRTL uses its own memory manager then it can hide this problem
depending
on algorithm use to allocate/free memory from system. F.e. OpwnWatcom in
practice has always repeatable results because it very seldom returns
memory
to system. In this test probably BCC also keeps the memory allocated and
it causes that results are better and the same on next calls. Probably
if
you make some experiments with size of allocated block then you will
find
the limit when BCC will free the memory immediately - if it uses one
some
simple algorithm.


 -DHB_FM_STATISTICS_OFF
It's still functional. Default is HB_FM_STATISTICS
 -DHB_GUI
It disables inkey polling in main HVM loop.
In normal programs it means that K_ALT_C and K_ALT_D will
not work. It gives some small speed improvement.
> -DHB_NO_PROFILER
It's default. If you want to use profiler then you have to recompile
HVM with -DHB_USE_PROFILER
 -DHB_NO_TRACE
It disables the possibility of function call tracing which can be
enabled
in default builds by:
   __TRACEPRGCALLS( [ <lOnOff> ] ) -> <lPrevSetting>
It gives some small speed improvement.
There is also HB_NO_DEBUG macro which disables debugger also giving
some small speed improvement.


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi
Sent: Saturday, September 13, 2008 10:01 PM
To: harbour@harbour-project.org
Subject: Re: [Harbour] [SPAM] Re: ChangeLog 2008-09-13 18:49
UTC+0200Przemyslaw Czerpak (druzus/at/priv.onet.pl)


Przemek 

Here is the sequence I adopted:

1) Download afresh from SVN
2) Opened console in c:\harbour
3) Issued: SET CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM
4) Issued: SET L_USR=cw32mt.lib 
5) Issued: Make_B32 CLEAN
6) Issued: Make_B32 
7) Received following errors:

...
source\vm\thread.c:
Warning W8065 source\vm\thread.c 349: Call to function '_beginthreadex'
with
no prototype in function hb_threadCreate
Warning W8065 source\vm\thread.c 491: Call to function '_endthreadex'
with
no prototype in function hb_threadStartVM
source\vm\vm.c:
...
...
+
obj\b32\hbrun.c:
Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Error: Unresolved external '__beginthreadex' referenced from
C:\HARBOUR\LIB\B32\HBVM.LIB|thread
Error: Unresolved external '__endthreadex' referenced from
C:\HARBOUR\LIB\B32\HBVM.LIB|thread
Error: Unresolved external '_hb_stack_ptr' referenced from
C:\HARBOUR\LIB\B32\HBVM.LIB|thread

** error 1 ** deleting bin\b32\hbrun.exe


What I am erring.

Regards
Pritpal Bedi


From vailtom at gmail.com  Sat Sep 13 19:31:44 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Sat Sep 13 19:32:14 2008
Subject: [Harbour] Suggestion menu for the site and some content.
Message-ID: <FE4C47C9010D480AB86D8CA3D138E635@Home>

Hi all!

I think the next step would be to define the topics to the menu of the site.

Which items will be needed? To give an idea, may I suggest the following 
items:

* About
  Start page with welcome msg & short about text

* Documentation
   > Harbour documentation Index
   A HTML version of /doc folder or any other material for support

   > Tutorials & Articles

      * Quick Start
      * Installing HB on Windows
      * Installing HB on Linux
     * Compiling from SVN

   > Sample applications
     Small examples taken from the folder SAMPLES highlighting some of the 
many
   resources of the project:

     * Hello World
     * DBF operations
     * OOP
     * GUI samples
     * Linux
       etc...

   > Other Harbour documentation sites
     Various external links that have material support for the HB project.
   (Wikipedia, FAQ, Lists & News, etc.)

* Download
  > Binaries & Source
    A single option with link to SF.net with no text.

  > Auxiliar tools
    Bison, GCC, FLEX, Tortoise, download link

  > Snapshot builds
    A Small descriptive text with link for download.

  > Third-party Tools and Libraries
    Same as http://www.harbour-project.org/3rdparty.htm

  > FAQ
    Same as http://www.harbour-project.org/faq/harbour.html

  > History (if applicable)


* Resources (or DEVELOPMENT)
  > Bug/Issue Database
    Short text with link to 
https://sourceforge.net/tracker/?func=browse&group_id=681&atid=100681

  > Report Bugs
    Short text with link to 
https://sourceforge.net/tracker/?group_id=681&atid=100681&func=add)

  > Mailing Lists
    Link with Mailing Lists

  > Lists & news around the World
  Ordened by language and/or Location

  > Harbour Art (Harbour logos to download)
    Note: the current URL is broken

  > Licensing
    Text about GPL & HB commercial products.

* Screenshots
  On windows, linux, mac, ppc, etc...

* News
  > News

  > Lastest Changelog

  > Roadmap for HB (if applicable)


At the bottom of each page i suggest putting a text as:

"The product names used in this web site are for identification purposes 
only. All trademarks and registered trademarks are the property of their 
respective owners." 

From vailtom at gmail.com  Sat Sep 13 19:35:36 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Sat Sep 13 19:35:42 2008
Subject: Fw: [Harbour] Suggestion for harbour web site?
In-Reply-To: <200809131715.34780.philb@philb.us>
References: <1E3A7E8548744E708BDBF71586AEB7AF@Home>
	<200809131715.34780.philb@philb.us>
Message-ID: <531d7a750809131635u5efdd4c7u42aa3b8aa0e161af@mail.gmail.com>

Hi all!

I think the next step would be to define the topics to the menu of the
site. Which items will be needed? To give an idea, may I suggest the
following
items:

* About
  Start page with welcome msg & short about text

* Documentation
   > Harbour documentation Index
   A HTML version of /doc folder or any other material for support

   > Tutorials & Articles

      * Quick Start
      * Installing HB on Windows
      * Installing HB on Linux
     * Compiling from SVN

   > Sample applications
     Small examples taken from the folder SAMPLES highlighting some of the
many
   resources of the project:

     * Hello World
     * DBF operations
     * OOP
     * GUI samples
     * Linux
       etc...

   > Other Harbour documentation sites
     Various external links that have material support for the HB project.
   (Wikipedia, FAQ, Lists & News, etc.)

* Download
  > Binaries & Source
    A single option with link to SF.net with no text.

  > Auxiliar tools
    Bison, GCC, FLEX, Tortoise, download link

  > Snapshot builds
    A Small descriptive text with link for download.

  > Third-party Tools and Libraries
    Same as http://www.harbour-project.org/3rdparty.htm

  > FAQ
    Same as http://www.harbour-project.org/faq/harbour.html

  > History (if applicable)


* Resources (or DEVELOPMENT)
  > Bug/Issue Database
    Short text with link to
https://sourceforge.net/tracker/?func=browse&group_id=681&atid=100681

  > Report Bugs
    Short text with link to
https://sourceforge.net/tracker/?group_id=681&atid=100681&func=add)

  > Mailing Lists
    Link with Mailing Lists

  > Lists & news around the World
  Ordened by language and/or Location

  > Harbour Art (Harbour logos to download)
    Note: the current URL is broken

  > Licensing
    Text about GPL & HB commercial products.

* Screenshots
  On windows, linux, mac, ppc, etc...

* News
  > News

  > Lastest Changelog

  > Roadmap for HB (if applicable)


At the bottom of each page i suggest putting a text as:

"The product names used in this web site are for identification purposes
only. All trademarks and registered trademarks are the property of their
respective owners."
From druzus at acn.waw.pl  Sat Sep 13 19:51:12 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sat Sep 13 19:51:53 2008
Subject: [Harbour] ChangeLog 2008-09-13 18:49 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF80@SRV02.deltain.net>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815EF80@SRV02.deltain.net>
Message-ID: <20080913235112.GA24595@34-mo7-2.acn.waw.pl>

On Sun, 14 Sep 2008, Massimo Belgrano wrote:

Hi Massimo,

> A little question for Przemyslaw 
> Will each thread have independent console?

Yes it will. I'll add such functionality in few weeks.
I only have to think a while on extending GT API adding
multiwindow interface and RT GT switching so each thread
can use its own GT driver tuned for given job.

best regards,
Przemek
From druzus at acn.waw.pl  Sat Sep 13 19:54:51 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sat Sep 13 19:55:32 2008
Subject: [Harbour] [SPAM] Re: ChangeLog 2008-09-13 18:49
	UTC+0200Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF81@SRV02.deltain.net>
References: <19474140.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815EF81@SRV02.deltain.net>
Message-ID: <20080913235451.GB24595@34-mo7-2.acn.waw.pl>

On Sun, 14 Sep 2008, Massimo Belgrano wrote:

Hi Massimo,

> Can samebody revise info about macro?
> DHB_MT_VM?
> For MT mode HVM library should be compiled with HB_MT_VM macro.
>    GNU make automatically creates hbvmmt library which should be
>    linked with Harbour MT programs instead of hbvm.

I hope that non GNU make files will be updated soon and it will not
be necessary to document this macro for users.

>  -DHB_WIN32_IO
> It's default for MS-Windows builds. Using Win32 IO API can be disabled
> by HB_WIN32_IO_OFF.
> -DHB_FM_WIN32_ALLOC

Small description:
   use windows API to allocate memory instead of C RTL.

best regards,
Przemek
From mhsabado at gmail.com  Sat Sep 13 20:10:36 2008
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Sat Sep 13 20:10:57 2008
Subject: [Harbour] Re: HGetValueAt() Bound Error (Przemys??aw Czerpak)
Message-ID: <48CC567C.2080801@gmail.com>

Hi Przemek,
>> I encountered problem with function HGetValueAt() from latest SVN with the 
>> following error:
>> Error BASE/1187 Bound Error: HB_HVALUEAT
>> Thanks for any help.
>>     
>
> You have to fix your code. You are using index which is aout of scope,
> f.e.:
>
>       #include "hbcompat.ch"
>       proc main
>          local h, i
>          h:={"A"=>100,"B"=>200,"C"=>300}
>          ? HGetValueAt(h,1)
>          ? HGetValueAt(h,2)
>          ? HGetValueAt(h,3)
>          ? HGetValueAt(h,4)  // error here, hash array has only 3 items
>       return
>
> best regards,
> Przemek
>   
I'm reading the pair from .ini file and it used to work few days ago.  
I'll investigate further on my code.
Thanks for the hint.

Regards,
Mario

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080914/47feca1f/attachment.html
From bedipritpal at hotmail.com  Sat Sep 13 20:40:06 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Sep 13 20:40:12 2008
Subject: [Harbour] [SPAM]  Re: [SPAM]  Re: ChangeLog 2008-09-13 18:49
	UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <20080913223840.GA26853@34-mo7-2.acn.waw.pl>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
	<19473468.post@talk.nabble.com>
	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>
	<19474140.post@talk.nabble.com>
	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>
Message-ID: <19476236.post@talk.nabble.com>


Hello Przemek


Przemyslaw Czerpak-2 wrote:
> 
> It's declared inside process.h. Looks that __MT__ is not defined.
> I'm not BCC user so I do not know if some compiler switch does not
> enable it. For sure it's enabled by default in my BCC version I'm
> using with WINE in my Linux box. You can always try to set it
> manually by:
>    set C_USR=-D__MT__
> 

Now this is the case:

SET CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -D__MT__ -DHB_MT_VM
SET LDFLAGS=cw32mt.lib 

All application libraries compiled with -D__MT__ -DHB_MT_VM

Finally now I get only this link error:

[1]:iLink32.Exe -Gn -aa -Tpe -s -v -LC:\BCC55\Lib @vouch.bcl
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Error: Unresolved external '_hb_stack_ptr' referenced from
C:\HARBOUR\LIB\HBVM.LIB|thread

What is missing?

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/ChangeLog-2008-09-13-18%3A49-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp19472757p19476236.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Sat Sep 13 21:25:39 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sat Sep 13 21:26:21 2008
Subject: [SPAM]  Re: [Harbour] [SPAM]  Re: [SPAM]  Re: ChangeLog
	2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <19476236.post@talk.nabble.com>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
	<19473468.post@talk.nabble.com>
	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>
	<19474140.post@talk.nabble.com>
	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>
	<19476236.post@talk.nabble.com>
Message-ID: <20080914012539.GC24595@34-mo7-2.acn.waw.pl>

On Sat, 13 Sep 2008, Pritpal Bedi wrote:

Hi Pritpal,

> Now this is the case:
> SET CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -D__MT__ -DHB_MT_VM
> SET LDFLAGS=cw32mt.lib 
> All application libraries compiled with -D__MT__ -DHB_MT_VM
> Finally now I get only this link error:
> [1]:iLink32.Exe -Gn -aa -Tpe -s -v -LC:\BCC55\Lib @vouch.bcl
> Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
> Error: Unresolved external '_hb_stack_ptr' referenced from
> C:\HARBOUR\LIB\HBVM.LIB|thread
> What is missing?

My fault. Please also add -DHB_USE_TLS to C_USR or wait a while.
I'll fix it in SVN.
BTW setting __MT__ manually does not enable real MT compilation in BCC.
I've just check my BCC switches. Try to use -twM switch instead,
f.e.:
   SET CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM -twM

best regards,
Przemek
From druzus at acn.waw.pl  Sat Sep 13 21:26:01 2008
From: druzus at acn.waw.pl (PrzemysÅaw Czerpak)
Date: Sat Sep 13 21:26:41 2008
Subject: [Harbour] 2008-09-14 03:25 UTC+0200 Przemyslaw Czerpak
 (druzus/at/priv.onet.pl)
Message-ID: <20080914012601.3EC4FBF6AD@34-mo7-2.acn.waw.pl>

2008-09-14 03:25 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/harbour-ce-spec
  * harbour/harbour-w32-spec
  * harbour/harbour.spec
    + added harbour MT libraries: libfmmt and libhbvmmt

  * harbour/include/hbstack.h
    ! respect HB_USE_TLS defined in hbthread.h

  * harbour/bin/hb-func.sh
    * always create harbourmt shared library in non DOS builds

  * harbour/bin/postinst.sh
    * always create libfmmt in non DOS builds

  * harbour/source/vm/Makefile
    * always create libhbvmmt in non DOS builds

best regards
Przemek
From toninhofwi at yahoo.com.br  Sat Sep 13 21:54:07 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sat Sep 13 21:47:23 2008
Subject: [Harbour] About GPF iwhen app exit
Message-ID: <fcroc41ji0noc2rvff5865opqrjfvlvsfe@4ax.com>

Przemek, I'd compile all files with this flags for codegear 5.9:

SET CFLAGS=-M -Od -R -RT -fp -g0 -r- -vi- -v -vG -w -y -D_DEBUG
SET ARFLAGS=/P128
SET LFLAGS=-v -Le:\harbour\bcc55\Lib"
SET HB_CG32=Yes

I have a codeguard warning each time that I call harbour.exe. I attach
harbour.cgl and ca.cgl files. CA.CGL is about gpf of my application.

Thanks and best regards,

Toninho.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: harbour.cgl
Type: application/octet-stream
Size: 4948 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080913/41e5eaa4/harbour.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ca.cgl
Type: application/octet-stream
Size: 6087 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080913/41e5eaa4/ca.obj
From bedipritpal at hotmail.com  Sat Sep 13 22:46:35 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Sep 13 22:46:39 2008
Subject: [Harbour] [SPAM]  Re: [SPAM]  Re: [SPAM]  Re: ChangeLog
	2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <20080914012539.GC24595@34-mo7-2.acn.waw.pl>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
	<19473468.post@talk.nabble.com>
	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>
	<19474140.post@talk.nabble.com>
	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>
	<19476236.post@talk.nabble.com>
	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>
Message-ID: <19476839.post@talk.nabble.com>


Przemek


Przemyslaw Czerpak-2 wrote:
> 
> My fault. Please also add -DHB_USE_TLS to C_USR or wait a while.
> I'll fix it in SVN.
> BTW setting __MT__ manually does not enable real MT compilation in BCC.
> I've just check my BCC switches. Try to use -twM switch instead,
> f.e.:
>    SET CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM -twM
> 

Excellent. 

Now my flagship application is running as is in MT mode.
So far I have not been able to compute speed tests but visually
I could not see any difference.

SET CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM -tWM 
-tWM comtains capital 'W'

I will make some experiments next few days and will report the findings.

Hats off to you!!!


Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/ChangeLog-2008-09-13-18%3A49-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp19472757p19476839.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From lorenzo.fiorini at gmail.com  Sun Sep 14 05:26:51 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Sep 14 05:26:58 2008
Subject: [Harbour] hbcompat.ch update for threads
Message-ID: <9257026e0809140226j3dcadf84s5ebe8b89d8938152@mail.gmail.com>

I'm trying to update hbcompat.ch with the new thread support to test
some xHarbour code I wrote time ago.

I'm using xHarbour's doc/thread.txt as reference ( btw it would be
good to have sth similar in Harbour's doc ).

In the ChangeLog I read:

 + added .prg functions to manage threads and synchronization objects:
         hb_threadStart( <@sStart()> | <bStart> [, <params,...> ] ) -> <pThID>
         hb_threadJoin( <pThID> [, @<xRetCode> ] ) -> <lOK>
         hb_threadDetach( <pThID> ) -> <lOK>
...
      The function list should give similar to xHarbour API but they
are not exactly
      the same and except of hb_mutex*() functions which should
replicate xHarbour behavior.

but I can't find equivalences for ThreadSleep() and DestroyMutex().

( I understand this is a work in progress so if there is simply to
wait let me know )

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sun Sep 14 05:42:59 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 05:43:05 2008
Subject: [Harbour] [1.0] 2008-09-14 11:14 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c9164e$Blat.v2.6.2$46338914$12d42d351878@127.0.0.1>

; I'll retrofit these changes to trunk later.

2008-09-14 11:14 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/gtalleg/ssf.h
    ! Fixed to compile with Cygwin.

  * contrib/hbwhat/whtsock.c
    ! Fixed for PellesC 4.5 where the inclusion order of 
      Windows headers needs to be the opposite of what 5.0 needs.

  * contrib/hbwhat/whtilst.c
    ! Fixed to compile with Cygwin.

  * contrib/hbwhat/whtinet.c
    ! Added missing Windows macro for Cygwin.
    ! Fixed three warnings with Cygwin.

  * contrib/hbwhat/whtseria.c
  * contrib/hbwhat/whtreg.c
  * contrib/hbwhat/whtini.c
    ! Removed #include "tchar.h", because it's unnecessary, 
      and breaks Cygwin.

  * contrib/hbwhat/whtsys.c
    ! Removed #include "htmlhelp.h", because it's unnecessary, 
      and breaks Cygwin.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 14 05:56:15 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 05:56:26 2008
Subject: [Harbour] Release 1.0.1 #1
Message-ID: <46443CA4-E372-4043-89C9-BD340DC24067@syenar.hu>

Hi all,

Are we still interested in 1.0.1?

18 Windows/DOS compilers are now okay, the rest is a TODO.

Used external packages (on my system of course):
- Allegro 4.2.2
- Apollo 6.1.0.4
- libcurl 7.19.0 (7.18.2 for DMC builds)
- Firebird 2.0.4
- FreeImage 3.11.0
- libgd 2.0.34
- libharu 2.1.0
- mysql 5.0.47
- pgsql 8.3.3
- ADS 9.00

Tested platforms:
- Windows
	BCC 5.51
	BCC 5.82
	GCC Cygwin 3.4.4
	GCC MinGW 3.4.5 (on msys 1.0.10)
	GCC MinGW 4.1.2 (on msys 1.0.10)
TODO	GCC MinGW 3.4.5 (cross compile on OpenSuse 10.3, FC3)
TODO	GCC MinGW 4.2.1 (cross compile on Ubuntu 8.04.1)
	GCC MinGW 4.3.2a (on msys 1.0.10)
TODO	MSVC 6.0 (HBODBC: needs fresh ODBC headers from MSSDK)
TODO	MSVC 7.1 (MSVS 2003)
	MSVC 8.0 (MSVS 2005)
	MSVC 8.0 (MSVS 2005) C++
	MSVC 9.0 (MSVS 2008 SP1)
	MSVC 9.0 (MSVS 2008 SP1) C++
	MSVC 9.0 (MSVS 2008 SP1) 64 bit
	MSVC 9.0 (MSVS 2008 SP1) C++ 64 bit (cross-compile on Win32)
	PellesC 4.5 (HBSQLIT3: interface only)
	PellesC 5.0
	PellesC 5.0 64 bit (cross-compile on Win32)
	Open Watcom 1.7 (HBSQLIT3: interface only)
	Digital Mars C 4.50
- WinCE
TODO	MSVC 6.0 (eVC4)
TODO	GCC 4.0.1 (mingw32ce 0.51.0) (cross-compile on Ubuntu 8.04.1)
TODO	GCC 4.1.0 (mingw32ce 0.50.0) (cross-compile on OpenSuse 10.3, FC3)
- Linux
TODO	GCC 4.2.3 (Ubuntu 8.04.1)
TODO	GCC 4.3.0 (Fedora) (non-default build)
TODO	GCC 4.2.1 (SuSE 10.3)
TODO	Open Watcom (with patches only. FAILED)
TODO	GCC (RedHat 7.3)
TODO	GCC (OpenSuse 10.3)
TODO	GCC (FC3)
- OS X
TODO	GCC 4.0.1 i386, x86_64, PPC, PPC64 (Leopard 10.5.4 PPC + XCode 3.1)
TODO	GCC 4.0.1 i386, x86_64, PPC, PPC64 (Leopard 10.5.4 Intel + XCode  
3.1)
TODO	GCC 4.0.1 PPC (Leopard 10.5.4 PPC + XCode 3.0) (non-default build)
- Solaris
TODO	GCC 3.4.3 i86pc (SunOS 5.11 - OpenSolaris 2008.05)
- BSD
TODO	Reported OK (No details)
- HPUX
TODO	Reported OK (a week ago in /trunk)
- OS/2
TODO	GCC 3.3.5 (EMX/Innotek)
- DOS
TODO	GCC 3.3.2 32 bit (DJGPP) (DJGPP bash port)
	GCC 4.2.3 32 bit (DJGPP) ('make install' won't properly work)
TODO	Open Watcom 1.7 (command.com)

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 14 06:20:28 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 06:20:29 2008
Subject: [Harbour] 2008-09-14 11:14 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91653$Blat.v2.6.2$829b79b6$3287be6d94@127.0.0.1>

; Merging changes to trunk from branches/harbour-1.0 r9377.

2008-09-14 11:14 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/gtalleg/ssf.h
    ! Fixed to compile with Cygwin.

  * contrib/hbwhat/whtsock.c
    ! Fixed for PellesC 4.5 where the inclusion order of 
      Windows headers needs to be the opposite of what 5.0 needs.

  * contrib/hbwhat/whtilst.c
    ! Fixed to compile with Cygwin.

  * contrib/hbwhat/whtinet.c
    ! Added missing Windows macro for Cygwin.
    ! Fixed three warnings with Cygwin.

  * contrib/hbwhat/whtseria.c
  * contrib/hbwhat/whtreg.c
  * contrib/hbwhat/whtini.c
    ! Removed #include "tchar.h", because it's unnecessary, 
      and breaks Cygwin.

  * contrib/hbwhat/whtsys.c
    ! Removed #include "htmlhelp.h", because it's unnecessary, 
      and breaks Cygwin.

2008-09-13 19:30 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/gtalleg/ssf.h
    ! Turned off ASM for MSVC AMD64 mode.

  * contrib/gtalleg/Makefile
    ! Disabled for OpenWatcom. (maybe compilation could be 
      fixed somehow, if someone is interested pls look into it.)

  * doc/whatsnew.txt
  * contrib/hbfimage/fi_winfu.c
  * contrib/hbfimage/fi_wrp.c
    ! Fixed for OpenWatcom.

  * contrib/gtwvg/wvgutils.c
  * contrib/gtwvg/wvgcore.c
    ! Silenced some MinGW/PelleC cast warnings.

  * contrib/hbw32/win_prt.c
    ! Fixed GCC (MinGW/Cygwin) warnings. The solution I choose is 
      pretty ugly, if someone knows the right one, please help.
      Warning was:
      ../../win_prt.c:70: warning: missing initializer
      ../../win_prt.c:70: warning: (near initialization for `s_PortData[0].OldDCB')
    ! Fixed few remaining warnings / minor bugs.

  * contrib/hbwhat/whtlv.c
  * contrib/hbwhat/whtcomm.c
  * contrib/hbwhat/whttab.c
  * contrib/hbwhat/whttree.c
    ! Silenced MinGW 4.12 warnings.

  * contrib/hbwhat/whtdate.c
    ! Removed #include "tchar.h", which seems unnecessary and 
      fixed Cygwin compilation.

  * contrib/hbwhat/whtsock.c
    ! Changed #include order of Windows headers to satisfy PellesC 5.

  ; TOFIX1: hbct / SETFDATI() has a possible bug here (shown in PelleC 64 bit):
    ../../files.c(264): warning #2006: [ISO] Conversion from 'void *' to 'int' is compiler dependent.
    ../../files.c(264): warning #2052: Conversion from 'void *' to 'int' is undefined.
    Problem is with HFILE / HANDLE conversion.

  ; TOFIX2: Here are some remaining 64-bit problems:
    ../../hb_btree.c(643): warning #2006: [ISO] Conversion from 'void *' to 'unsigned long int' is compiler dependent.
    ../../hb_btree.c(643): warning #2052: Conversion from 'void *' to 'unsigned long int' is undefined.
    ../../hb_btree.c(739): warning #2006: [ISO] Conversion from 'ioBuffer_T *' to 'unsigned long int' is compiler dependent.
    ../../hb_btree.c(739): warning #2052: Conversion from 'ioBuffer_T *' to 'unsigned long int' is undefined.
    ../../win_dll.c(511): warning #2006: [ISO] Conversion from 'void *' to 'unsigned long int' is compiler dependent.
    ../../win_dll.c(511): warning #2052: Conversion from 'void *' to 'unsigned long int' is undefined.
    ../../win_ole.c(761): warning #2006: [ISO] Conversion from 'LPDISPATCH' to 'long int' is compiler dependent.
    ../../win_ole.c(761): warning #2052: Conversion from 'LPDISPATCH' to 'long int' is undefined.
    ../../win_ole.c(1091): warning #2006: [ISO] Conversion from 'LPDISPATCH' to 'long int' is compiler dependent.
    ../../win_ole.c(1091): warning #2052: Conversion from 'LPDISPATCH' to 'long int' is undefined.
    ../../win_ole.c(1425): warning #2006: [ISO] Conversion from 'void *' to 'long int' is compiler dependent.
    ../../win_ole.c(1425): warning #2052: Conversion from 'void *' to 'long int' is undefined.
    ../../win_ole.c(1478): warning #2006: [ISO] Conversion from 'void *' to 'long int' is compiler dependent.
    ../../win_ole.c(1478): warning #2052: Conversion from 'void *' to 'long int' is undefined.
    ../../win_regc.c(94): warning #2006: [ISO] Conversion from 'HKEY' to 'unsigned long int' is compiler dependent.
    ../../win_regc.c(94): warning #2052: Conversion from 'HKEY' to 'unsigned long int' is undefined.
    ../../win_regc.c(116): warning #2006: [ISO] Conversion from 'HKEY' to 'unsigned long int' is compiler dependent.
    ../../win_regc.c(116): warning #2052: Conversion from 'HKEY' to 'unsigned long int' is undefined.

2008-09-13 13:34 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * doc/dirstruc.txt
    * Updated.

  - contrib/hbgf/hbgfw32
  + contrib/hbgf/hbgfwin
  * contrib/hbgf/tests/bld_b32.bat
  * contrib/hbgf/tests/bld_vc.bat
  * contrib/hbgf/Makefile
  * contrib/hbgf/hbgfwin/common.mak
  * contrib/hbgf/hbgfwin/button.prg
  * contrib/hbgf/hbgfwin/winctrl.prg
  * contrib/hbgf/hbgfwin/form.prg
  * contrib/hbgf/hbgfwin/menuitem.prg
  * contrib/hbgf/hbgfwin/menu.prg
  * contrib/hbgf/hbgfwin/edit.prg
  * contrib/hbgf/hbgfwin/Makefile
  - contrib/hbgf/hbgfwin/win32.c
  + contrib/hbgf/hbgfwin/winapi.c
  - contrib/hbgf/hbgfwin/hbgfw32.ch
  + contrib/hbgf/hbgfwin/hbgfwin.ch
    * Removed some '32's.

2008-09-13 12:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * doc/whatsnew.txt
    * Updated.

2008-09-13 12:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbw32/Makefile
  * contrib/hbw32/common.mak
  * contrib/hbw32/hbw32.ch
  + contrib/hbw32/hbwin.h
  + contrib/hbw32/win_prt.c
  + contrib/hbw32/win_tprt.prg
  + contrib/hbw32/tests/testprt1.prg
  + contrib/hbw32/tests/testprt2.prg
    + Added Windows COM port handling functions.
      Contributed by Alex Strickland.
    ; I did some changes to clean warnings, few 64-bit issues, 
      changed to use safe string functions, integrated 
      the header into hbw32.ch, added a new general C level 
      header, split BEGINDUMP into separate .c function, 
      changed to ANSI C comments, marked statics with s_, 
      fixed a few trashed string buffers and leaks in some 
      error cases. Separated tests into distinct .prgs.
      Fixed for UNICODE mode. Minor optimizations, formatting.
    ; TODO: Test WinCE build.
    ; Please test, I don't have any COM ports on my system.

2008-09-13 10:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/gtwvg/wvgcore.c
  * contrib/gtwvg/wvgutils.c
    ! Fixed 64-bit problems.
    ; Pritpal, could you please review and test these changes?

2008-09-13 09:37 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbvpdf/hbvpdf.prg
    ! Generic support functions made STATIC to avoid collision 
      with similarly named functions in other libs (like hbct).

  * contrib/hbvpdf/hbvpdf.prg
  * contrib/hbvpdf/hbvpdft.prg
    * Using hb_run() instead of RUN and __run().

2008-09-12 19:30 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/gtalleg/Makefile
    * Excluded Cygwin.

  * contrib/hbwhat/Makefile
  * contrib/hbwhat/common.mak
  - contrib/hbwhat/whtdll.c
  - contrib/hbwhat/whtcall.c
    - Removed DLL related stuff from hbwhat, since we're 
      maintaining (a better working) one already in hbw32, 
      and hbwhat by itself doesn't seem to need this 
      functionality internally. Users should migrate to 
      the hbw32 functions, which work mostly similarly.

2008-09-12 19:08 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * doc/whatsnew.txt
    * Added some build notes.

  * contrib/gtalleg/Makefile
    ! Fixed POCC, XCC compiler exlusions.
    * Excluded DMC compiler.

  * contrib/hbwhat/Makefile
    * Excluded DMC compiler.

  * contrib/hbwhat/wincorec.c
    ! Workaround for a wrong Windows API declaration in 
      __DMC__ headers.

2008-09-12 11:01 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbole/tests/bld_vc.bat
  * contrib/hbw32/tests/bld_vc.bat
    ! Added missing system libs.

2008-09-12 04:03 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/gtwvg/wvgutils.c
    ! Fix to previous fix, so it works again in 64-bit builds.
         hb_retclen( ( LPSTR ) pdlgtemplate, ( ( ULONG ) p - ( ULONG ) pdlgtemplate ) ) ; =>
         hb_retclen( ( LPSTR ) pdlgtemplate, ( ( HB_PTRDIFF ) p - ( HB_PTRDIFF ) pdlgtemplate ) ) ;
    ; This way it's now in sync with similar function in hbwhat.

2008-09-12 01:14 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rdd/usrrdd/rdds/Makefile
  + source/rdd/usrrdd/rdds/arrayrdd.prg
  + source/rdd/usrrdd/rdds/vfpcdx.prg
    + Added two usrrdd based RDDs. Borrowed from xhb.
      Works of: Francesco Saverio Giudice and 
                Miguel Angel Marchuet Frutos
    ; These were adapted to compile and link in Harbour, but 
      I did no tests, so some more - hopefully minor - changes 
      may happen to be needed.

2008-09-12 00:53 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/rddado/adordd.prg
  * contrib/rddado/adordd.ch
    * Merged changes from xhb.
      Some hbusrrdd.ch values seem to be missing from Harbour, 
      related features will be automatically enabled if we 
      implement them in our usrrdd.
      Please test.

2008-09-11 22:55 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * doc/whatsnew.txt
  * source/vm/cmdarg.c
    * Legacy undocumented symbols hb_hInstance and 
      hb_hPrevInstance reenabled for 1.0.1, when HB_LEGACY_LEVEL 
      is #defined. This is the default in 1.0.x. It will be 
      turned off in 1.1.0.
      I did this to not break binary compatibility of 1.0.1 
      with 1.0.0 for those apps that rely on these symbols
      (like gtwvg).

2008-09-11 21:29 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/gtwvg/tests/bld_vc.bat
    ! Added required list of system libs.

2008-09-11 14:08 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/gtpca/gtpca.c
  * source/rtl/gtwin/gtwin.c
  * source/rtl/gtwvt/gtwvt.c
  * source/rtl/gttone.c
    ! Fixed some core MSVC -W4 warnings.

  * contrib/hbnf/getenvrn.c
    ! Fixed compile problem in MSVC C++ mode surfaced after 
      recent UNICODE fix.

2008-09-11 13:13 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/gtwvg/wvgutils.c
    ! Fixed last MSVC -W4 warnings.
    ; NOTE: Only these contribs have remaining -W4 warnings:
            hbbmcdx, hbbtree, hbct (in screen*.c).
            Plus core.

2008-09-11 12:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbnf/fttext.c
  * contrib/hbwhat/whtdate.c
  * contrib/hbwhat/wincorec.c
  * contrib/hbwhat/whtsock.c
  * contrib/hbwhat/whtseria.c
  * contrib/hbwhat/whtdlg.c
  * contrib/hbwhat/whtsys.c
  * contrib/hbwhat/whtmisc.c
  * contrib/hbwhat/whtcdlg.c
    ! Fixed all MinGW 4.3x warnings.
    ! Added workaround for slightly wrong MinGW definition for 
      Windows DateTime_GetMonthCal() macro.

  * contrib/gtwvg/gtwvg.c
  * contrib/gtwvg/wvgutils.c
  * contrib/gtwvg/wvgcore.c
    ! Fixed all MSVC -W4 warnings.

  * contrib/gtwvg/gtwvg.h
    ! Fixed old bug, which surfaced after recently 
      fixing __MINGW__ to __MINGW32__.
      Apparently, comctl32.h is never needed here.

  * config/rules.cf
  * contrib/hbbtree/tests/bld_djgp.bat
    % Removed -gc0. Now default.

  * contrib/make_b32_all.bat
  * contrib/make_vc_all.bat
    * Minor formatting.

  * contrib/hbgt/asciisgt.c
  * utils/hbdoc/hbdoc.prg
    - Removed unnecessary version strings. This was good 
      in CVS times, but for SVN there is not much point.

  * utils/hbmake/hbmake.prg
    + Another patch session from Bill Robertson.
      Besides some further cleanups, this should fix 
      some problems with the previous version.

  * source/lang/msghuiso.c
  * source/lang/msgskiso.c
  * source/lang/msgrukoi.c
  * source/lang/msghuwin.c
  * source/lang/msgzhgb.c
  * source/lang/msgskwin.c
  * source/lang/msg_tpl.c
  * source/lang/msgruwin.c
  * source/lang/msgelwin.c
  * source/lang/msgro.c
  * source/lang/msgpt.c
  * source/lang/msghriso.c
  * source/lang/msghrwin.c
  * source/lang/msgsliso.c
  * source/lang/msgbe866.c
  * source/lang/msgslwin.c
  * source/lang/msghe862.c
  * source/lang/msgcskam.c
  * source/lang/msggl.c
  * source/lang/msgtrwin.c
  * source/lang/msgeo.c
  * source/lang/msgbgiso.c
  * source/lang/msgbgwin.c
  * source/lang/msgskkam.c
  * source/lang/msges.c
  * source/lang/msguakoi.c
  * source/lang/msgzhb5.c
  * source/lang/msgeu.c
  * source/lang/msgpl852.c
  * source/lang/msgsr852.c
  * source/lang/msguawin.c
  * source/lang/msgde.c
  * source/lang/msgtr857.c
  * source/lang/msgru866.c
  * source/lang/msgcs852.c
  * source/lang/msgfr.c
  * source/lang/msgis850.c
  * source/lang/msgnl.c
  * source/lang/msghu852.c
  * source/lang/msgsk852.c
  * source/lang/msgca.c
  * source/lang/msgplmaz.c
  * source/lang/msgpliso.c
  * source/lang/msgplwin.c
  * source/lang/msgbgmik.c
  * source/lang/msgid.c
  * source/lang/msgbg866.c
  * source/lang/msgltwin.c
  * source/lang/msgsriso.c
  * source/lang/msgel.c
  * source/lang/msgsrwin.c
  * source/lang/msgbewin.c
  * source/lang/msgdewin.c
  * source/lang/msghr437.c
  * source/lang/msghr852.c
  * source/lang/msgko.c
  * source/lang/msgua866.c
  * source/lang/msghewin.c
  * source/lang/msgit.c
  * source/lang/msgsl437.c
  * source/lang/msgsl852.c
  * source/lang/msghucwi.c
  * source/lang/msgcsiso.c
  * source/lang/msgcswin.c
  * source/lang/msgeswin.c
  * source/rtl/langapi.c
    - Cleared unnecessary version strings. This was good 
      in CVS times, but for SVN there is not much point.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Sun Sep 14 06:33:49 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 06:34:30 2008
Subject: [SPAM]  Re: [Harbour] [SPAM]  Re: [SPAM]  Re: [SPAM]  Re:
	ChangeLog 2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <19476839.post@talk.nabble.com>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
	<19473468.post@talk.nabble.com>
	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>
	<19474140.post@talk.nabble.com>
	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>
	<19476236.post@talk.nabble.com>
	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>
	<19476839.post@talk.nabble.com>
Message-ID: <20080914103349.GA6151@34-mo7-2.acn.waw.pl>

On Sat, 13 Sep 2008, Pritpal Bedi wrote:

Hi Pritpal,

> Now my flagship application is running as is in MT mode.
> So far I have not been able to compute speed tests but visually
> I could not see any difference.

The MT HBVM is slower then ST one but still faster then
xHarbour ST VM and much faster then xHarbour's MT VM.
The difference depends on available features. In BCC builds
we have native TLS support and interlocked operations what
gives quite nice performance.

best regards,
Przemek
From harbour.01 at syenar.hu  Sun Sep 14 06:37:05 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 06:37:06 2008
Subject: [Harbour] 2008-09-14 12:28 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91655$Blat.v2.6.2$d4c8250c$17e0f004fa18@127.0.0.1>

2008-09-14 12:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * harbour-ce-spec
  * harbour-w32-spec
  * harbour.spec
  * common.mak
  * include/hbver.h
    * Changed version number to 1.1.0

  * include/hbextern.ch
    + Added new thread functions.

  * harbour-ce-spec
  * harbour-w32-spec
  * contrib/Makefile
  * contrib/make_b32_all.bat
  * contrib/make_gcc_all.sh
  * contrib/make_vc_all.bat
  - contrib/hbw32
  + contrib/hbwin
  * contrib/hbwin/win_reg.prg
  * contrib/hbwin/win_os.prg
  * contrib/hbwin/win_tprt.prg
  * contrib/hbwin/common.mak
  - contrib/hbwin/hbw32.ch
  + contrib/hbwin/hbwin.ch
  - contrib/hbwin/tests/testw32p.prg
  + contrib/hbwin/tests/testprn.prg
  * contrib/hbwin/tests/testreg.prg
  * contrib/hbwin/tests/bld_b32.bat
  * contrib/hbwin/tests/testprt1.prg
  * contrib/hbwin/tests/bld_vc.bat
  * contrib/hbwin/tests/testprt2.prg
  * contrib/hbwin/Makefile
    * Renamed hbw32 to hbwin.
    * Renamed hbw32.ch to hbwin.ch.
    ; INCOMPATIBLE.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Sun Sep 14 06:39:32 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 06:40:12 2008
Subject: [Harbour] About GPF iwhen app exit
In-Reply-To: <fcroc41ji0noc2rvff5865opqrjfvlvsfe@4ax.com>
References: <fcroc41ji0noc2rvff5865opqrjfvlvsfe@4ax.com>
Message-ID: <20080914103932.GB6151@34-mo7-2.acn.waw.pl>

On Sat, 13 Sep 2008, Toninho@fwi wrote:
> Przemek, I'd compile all files with this flags for codegear 5.9:
> SET CFLAGS=-M -Od -R -RT -fp -g0 -r- -vi- -v -vG -w -y -D_DEBUG
> SET ARFLAGS=/P128
> SET LFLAGS=-v -Le:\harbour\bcc55\Lib"
> SET HB_CG32=Yes
> I have a codeguard warning each time that I call harbour.exe. I attach

This is false alarm. It reports that fopen() returned NULL what is correct
result when file cannot be open (f.e. it does not exists). You can ignore
it.

> harbour.cgl and ca.cgl files. CA.CGL is about gpf of my application.

The second one is more interesting but it looks that you binaries were
stripped and you do not have any information about function names and
lines and it's hard to guess where it fails. Can you create log with
such information?

best regards,
Przemek
From harbour.01 at syenar.hu  Sun Sep 14 06:42:46 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 06:42:47 2008
Subject: [Harbour] 2008-09-14 12:38 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91656$Blat.v2.6.2$a0089d8c$16c0d78b4800@127.0.0.1>

2008-09-14 12:38 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  - config/w32/bcc32.cf
  + config/w32/bcc.cf
  - config/w32/mingw32.cf
  + config/w32/mingw.cf
    * Cleaning some '32's from HB_COMPILER names.
      BCC and MinGW 64-bit are coming.
    ; Please update your build files. INCOMPATIBLE.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 14 06:55:45 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 06:55:45 2008
Subject: [Harbour] 2008-09-14 12:54 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91658$Blat.v2.6.2$705f59c0$314394ab19c@127.0.0.1>

2008-09-14 12:54 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * harbour-ce-spec
  * make_xmingwce.sh
  * harbour-w32-spec
  * bin/bld.bat
  * make_xmingw.sh
  * make_gnu.bat
  * make_gnu.sh
  * make_tgz.sh
    * mingw32 -> mingw changes.
    ! hbw32 -> hbwin fixes.

  + config/w32/bcc32.cf
  - config/w32/bcc.cf
    * Renamed back, because it's difficult to know in advance 
      how they will solve this, and there would be too many places 
      to update.
--
Brgds,
Viktor

From dmacias at mail.udg.mx  Sun Sep 14 06:58:05 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sun Sep 14 06:58:14 2008
Subject: [Harbour] Re:  Release 1.0.1 #1
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48CCEE3D.7000102@mail.udg.mx>

 > Are we still interested in 1.0.1?

I suggest to wait for a better moment

Some well-known brains are working hard and deeply in long time expected 
enhancements/extensions to Harbour and work for releases are distractive 
tasks

Obviously people can continue testing/reporting issues in their own 
environments

David Macias



From druzus at acn.waw.pl  Sun Sep 14 07:04:26 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 07:05:06 2008
Subject: [Harbour] hbcompat.ch update for threads
In-Reply-To: <9257026e0809140226j3dcadf84s5ebe8b89d8938152@mail.gmail.com>
References: <9257026e0809140226j3dcadf84s5ebe8b89d8938152@mail.gmail.com>
Message-ID: <20080914110426.GC6151@34-mo7-2.acn.waw.pl>

On Sun, 14 Sep 2008, Lorenzo Fiorini wrote:
> I'm trying to update hbcompat.ch with the new thread support to test
> some xHarbour code I wrote time ago.
> I'm using xHarbour's doc/thread.txt as reference ( btw it would be
> good to have sth similar in Harbour's doc ).

Yes, the documentation create by Giancarlo is relay nice though
for Harbour it should be updated. There are some important
internal differences.

> In the ChangeLog I read:
>  + added .prg functions to manage threads and synchronization objects:
>          hb_threadStart( <@sStart()> | <bStart> [, <params,...> ] ) -> <pThID>
>          hb_threadJoin( <pThID> [, @<xRetCode> ] ) -> <lOK>
>          hb_threadDetach( <pThID> ) -> <lOK>
> ...
>       The function list should give similar to xHarbour API but they
> are not exactly
>       the same and except of hb_mutex*() functions which should
> replicate xHarbour behavior.
> but I can't find equivalences for ThreadSleep() and DestroyMutex().

Because they are not necessary. In xHarbour ThreadSleep() is simple sleep
function just like any other ones and DestroyMutex() is empty function which
does nothing (see vm/thread.h in xHarbour)

   #xtranslate ThreadSleep( <nMilliSec> ) => hb_idleSleep( <nMilliSec> / 1000 )
   #xtranslate DestroyMutex() => (NIL)

or you can change the last one to:
   #xtranslate DestroyMutex( <mtx> ) => ( <mtx> := NIL )

> ( I understand this is a work in progress so if there is simply to
> wait let me know )

This part is finished. Only KillAllThreads() is not supported and never will
be in the way Harbour support it but I can add it as:
   hb_threadQuitRequestAll()
if you find it useful.

Please remember that in xHarbour all timeouts are in seconds when in xHarbour
in milliseconds. Remember about it makeing translations.
Other useful translates are:

   #xtranslate WaitForThreads() -> hb_threadWaitForAll()
   hb_mutexTimeoutLock( <pMtx>, <nTimeOut> ) => ;
                                    hb_mutexLock( <pMtx>, <nTimeOut> * 1000 )
   hb_mutexTimeoutLock( <pMtx> )    => hb_mutexLock( <pMtx>, 0 )
   hb_mutexTryLock( <pMtx> )        => hb_mutexLock( <pMtx>, 0 )

For hb_mutexSubscribe[Now] it will be easier to write function.

best regards,
Przemek
From harbour.01 at syenar.hu  Sun Sep 14 07:13:50 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 07:13:59 2008
Subject: [SPAM] Re: [Harbour] [SPAM] Re: ChangeLog 2008-09-13 18:49
	UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <20080913223840.GA26853@34-mo7-2.acn.waw.pl>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
	<19473468.post@talk.nabble.com>
	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>
	<19474140.post@talk.nabble.com>
	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>
Message-ID: <A6E1E7C4-8E42-45A0-A234-650CA11F5FA2@syenar.hu>

>>
Hi Przemek,

>> Here is the sequence I adopted:
>> 1) Download afresh from SVN
>> 2) Opened console in c:\harbour
>> 3) Issued: SET CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM
>> 4) Issued: SET L_USR=cw32mt.lib
>
> If you are using make_b32.bat then you should set LDFLAGS instead of  
> L_USR.
> BTW Viktor can you add support for L_USR and A_USR to nan GNU make  
> files?

I'll try but these flags are not very cleanly implemented
in non-GNU make, so I might not get it right for the first
time.

I may also clean all the non-GNU version to make a cleaner
situation and a easier migration between GNU-make.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 14 07:18:56 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 07:18:56 2008
Subject: [Harbour] 2008-09-14 13:18 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9165b$Blat.v2.6.2$ad74568c$17e41798e6e8@127.0.0.1>

2008-09-14 13:18 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
  * make_vc.mak
  * contrib/mtpl_b32.mak
  * contrib/mtpl_vc.mak
    + Attempt to add support for L_USR and A_USR 
      in non-GNU make. A_USR is probably wrong, L_USR 
      might also be. Please test.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Sun Sep 14 07:22:51 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 07:23:31 2008
Subject: [Harbour] 2008-09-14 13:18 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c9165b$Blat.v2.6.2$ad74568c$17e41798e6e8@127.0.0.1>
References: <01c9165b$Blat.v2.6.2$ad74568c$17e41798e6e8@127.0.0.1>
Message-ID: <20080914112251.GA16752@34-mo7-2.acn.waw.pl>

On Sun, 14 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

>   * make_b32.mak
>   * make_vc.mak
>   * contrib/mtpl_b32.mak
>   * contrib/mtpl_vc.mak
>     + Attempt to add support for L_USR and A_USR 
>       in non-GNU make. A_USR is probably wrong, L_USR 
>       might also be. Please test.

Thank you very much.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Sep 14 07:27:36 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 07:28:15 2008
Subject: [Harbour] Re:  Release 1.0.1 #1
In-Reply-To: <48CCEE3D.7000102@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CCEE3D.7000102@mail.udg.mx>
Message-ID: <20080914112736.GB16752@34-mo7-2.acn.waw.pl>

On Sun, 14 Sep 2008, David Arturo Macias Corona wrote:

Hi David,

> Obviously people can continue testing/reporting issues in their own 
> environments

Can you make OS2 build test with current devel branch (1.1. in trunk)?
It's highly possible that OS2 build is broken by last modifications
because I was not even able to verify the modifications by simple
compilation.

best regards,
Przemek
From harbour.01 at syenar.hu  Sun Sep 14 07:31:49 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 07:31:59 2008
Subject: [Harbour] Re:  Release 1.0.1 #1
In-Reply-To: <48CCEE3D.7000102@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CCEE3D.7000102@mail.udg.mx>
Message-ID: <8FEED992-BB48-4289-B18E-F7CE24B7D879@syenar.hu>

> > Are we still interested in 1.0.1?
>
> I suggest to wait for a better moment
>
> Some well-known brains are working hard and deeply in long time  
> expected enhancements/extensions to Harbour and work for releases  
> are distractive tasks

Ops.

Okay, if this is a group opinion, I won't ever touch 1.0.1 again
except my strict personal needs maybe. The code is there for anyone
interested in our stable release though.

That's actually pretty much something I've expected, and that also
means there is not much point in messing with branches, tags,
parallel version development, let alone releases and all that.
Disappointing. Rant off.

Brgds,
Viktor

From druzus at acn.waw.pl  Sun Sep 14 07:44:57 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 07:45:37 2008
Subject: [Harbour] Re:  Release 1.0.1 #1
In-Reply-To: <8FEED992-BB48-4289-B18E-F7CE24B7D879@syenar.hu>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CCEE3D.7000102@mail.udg.mx>
	<8FEED992-BB48-4289-B18E-F7CE24B7D879@syenar.hu>
Message-ID: <20080914114457.GC16752@34-mo7-2.acn.waw.pl>

On Sun, 14 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor and David,

>> > Are we still interested in 1.0.1?
>> I suggest to wait for a better moment
>> Some well-known brains are working hard and deeply in long time expected 
>> enhancements/extensions to Harbour and work for releases are distractive 
>> tasks
> Okay, if this is a group opinion, I won't ever touch 1.0.1 again
> except my strict personal needs maybe. The code is there for anyone
> interested in our stable release though.

I think that we can release it.
We have two branches now. 1.1 for developers and 1.0.
There where some fixes in 1.0.1 and it will be good to create new
release though maybe we should wait few days yet.
It will not stop us with making farther modification in 1.1 branch.

best regards,
Przemek
From toninhofwi at yahoo.com.br  Sun Sep 14 08:30:51 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sun Sep 14 08:25:11 2008
Subject: [Harbour] About GPF iwhen app exit
In-Reply-To: <20080914103932.GB6151@34-mo7-2.acn.waw.pl>
References: <fcroc41ji0noc2rvff5865opqrjfvlvsfe@4ax.com>
	<20080914103932.GB6151@34-mo7-2.acn.waw.pl>
Message-ID: <gv0qc4h7a0sao6n03aj0ij615d1ru4u1u5@4ax.com>

>> harbour.cgl and ca.cgl files. CA.CGL is about gpf of my application.
>
>The second one is more interesting but it looks that you binaries were
>stripped and you do not have any information about function names and
>lines and it's hard to guess where it fails. Can you create log with
>such information?
Sorry for my ignorance, but what I do it please?  Codegear tell me
that is creating a log and create the cgl file.

Thanks and best regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From druzus at acn.waw.pl  Sun Sep 14 08:25:21 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 08:26:04 2008
Subject: [Harbour] Re:  Release 1.0.1 #1
In-Reply-To: <20080914114457.GC16752@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CCEE3D.7000102@mail.udg.mx>
	<8FEED992-BB48-4289-B18E-F7CE24B7D879@syenar.hu>
	<20080914114457.GC16752@34-mo7-2.acn.waw.pl>
Message-ID: <20080914122521.GA6255@34-mo7-2.acn.waw.pl>

On Sun, 14 Sep 2008, Przemys??aw Czerpak wrote:
> There where some fixes in 1.0.1 and it will be good to create new
> release though maybe we should wait few days yet.

And one think else. I think that we should compile it without memory
statistic module. FM stat has serious speed overhead and I rather
do not expect that people will find some problems here. FM stat can
be delivered as separate library for those people who need it to
test some non core code.

best regards,
Przemek
From tomaz.zupan at orpo.si  Sun Sep 14 08:29:42 2008
From: tomaz.zupan at orpo.si (=?iso-8859-2?q?Toma=BE_Zupan?=)
Date: Sun Sep 14 08:31:17 2008
Subject: [Harbour] Re:  Release 1.0.1 #1
In-Reply-To: <20080914114457.GC16752@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<8FEED992-BB48-4289-B18E-F7CE24B7D879@syenar.hu>
	<20080914114457.GC16752@34-mo7-2.acn.waw.pl>
Message-ID: <200809141429.42707.tomaz.zupan@orpo.si>

On Sunday 14 September 2008 13:44:57 Przemys??aw Czerpak wrote:
> I think that we can release it.

Please check issue with bin/pack_src.sh and make_rpm.sh I reported on friday 
before release. It is not posible to build rpms from source tarball until it 
is solved.

LP, Toma?
From druzus at acn.waw.pl  Sun Sep 14 08:36:45 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 08:37:27 2008
Subject: [Harbour] About GPF iwhen app exit
In-Reply-To: <gv0qc4h7a0sao6n03aj0ij615d1ru4u1u5@4ax.com>
References: <fcroc41ji0noc2rvff5865opqrjfvlvsfe@4ax.com>
	<20080914103932.GB6151@34-mo7-2.acn.waw.pl>
	<gv0qc4h7a0sao6n03aj0ij615d1ru4u1u5@4ax.com>
Message-ID: <20080914123645.GB6255@34-mo7-2.acn.waw.pl>

On Sun, 14 Sep 2008, Toninho@fwi wrote:

Hi Toninho,

> >The second one is more interesting but it looks that you binaries were
> >stripped and you do not have any information about function names and
> >lines and it's hard to guess where it fails. Can you create log with
> >such information?
> Sorry for my ignorance, but what I do it please?  Codegear tell me
> that is creating a log and create the cgl file.

I'm not BCC user so I cannot give you exact answer what is wrong.
Maybe Chen can help you more precisly. I can only describe the final
results. In 1-st log you have:

   Error 00001. 0x820000 (Thread 0x0DF8):
   Function failure:
   fopen(0x0012E6CC [".\xtl.ch"], 0x004CA2C3 ["r"])=0x00000000
   Call Tree:
      0x0045F75F(=Harbour.exe:0x01:05E75F) source\common\hbfopen.c#59
      0x0046E384(=Harbour.exe:0x01:06D384) source\pp\ppcore.c#1833
      0x004795CE(=Harbour.exe:0x01:0785CE) source\pp\ppcore.c#4690
      0x00479DC4(=Harbour.exe:0x01:078DC4) source\pp\ppcore.c#4845
      0x0047AA3F(=Harbour.exe:0x01:079A3F) source\pp\ppcore.c#5053
      0x0041B4F4(=Harbour.exe:0x01:01A4F4) source\compiler\complex.c#446

As you can see there are source file names and lines.
In the second log there is:
   Error 00001. 0x100600 (Thread 0x0F28):
   Access in invalid memory: Attempt to access 4 byte(s) at 0x00000001+8.
   Call Tree:
      0x004B88EE(=ca.exe:0x01:0B78EE)
      0x00489D0F(=ca.exe:0x01:088D0F)
      0x004BE13A(=ca.exe:0x01:0BD13A)
      0x0053CFB3(=ca.exe:0x01:13BFB3)

No file names and line information. It means that your application was
linked with different parameters and such info was not attached to final
binaries or you run some program like strip which removes debug information
from binary files.
If possible try to create log for ca.exe with debug information (file names
and lines). You can try to use the same link switches as for harbour.exe
and eliminate all calls to strip (if any) or similar tools.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Sun Sep 14 09:55:28 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Sep 14 09:55:34 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <48CCEE3D.7000102@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CCEE3D.7000102@mail.udg.mx>
Message-ID: <9257026e0809140655q7e3969efhd2cbca0268197e8e@mail.gmail.com>

On Sun, Sep 14, 2008 at 12:58 PM, David Arturo Macias Corona
<dmacias@mail.udg.mx> wrote:

> I suggest to wait for a better moment
>
> Some well-known brains are working hard and deeply in long time expected
> enhancements/extensions to Harbour and work for releases are distractive
> tasks
>
> Obviously people can continue testing/reporting issues in their own
> environments

Sorry but I don't agree.

Testing 1.0.1 will help to test code that is also in 1.1.0 without
major changes.

We're not anymore "in the wild". We have to offer a safer path than the trunk.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sun Sep 14 10:00:42 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 10:00:46 2008
Subject: [Harbour] [1.0] 2008-09-14 15:50 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c91672$Blat.v2.6.2$46ae678c$b24a2f04574@127.0.0.1>

2008-09-14 15:50 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbsetup.h
  * doc/whatsnew.txt
    % FM statistics module turned off by default.

; Sync with trunk:

2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbpp.h
  * harbour/source/pp/ppcore.c
  * harbour/source/pp/hbpp.c
    * changed some declarations from 'char *' to 'const char *' and
      fixed casting for some more pedantic compilers

  * harbour/source/pp/ppcore.c
    ! fixed one typo which could cause memory leak and even GPF
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 14 10:00:43 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 10:00:53 2008
Subject: [Harbour] Re:  Release 1.0.1 #1
In-Reply-To: <20080914122521.GA6255@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CCEE3D.7000102@mail.udg.mx>
	<8FEED992-BB48-4289-B18E-F7CE24B7D879@syenar.hu>
	<20080914114457.GC16752@34-mo7-2.acn.waw.pl>
	<20080914122521.GA6255@34-mo7-2.acn.waw.pl>
Message-ID: <F80A5D98-9B07-4F8A-81C2-4A969CB1205A@syenar.hu>

That's a good idea, I'll turn it off.

We may also use -l for .prg files. For now I'm specifying
it as PRG_USR.

Brgds,
Viktor

On 2008.09.14., at 14:25, Przemys??aw Czerpak wrote:

> On Sun, 14 Sep 2008, Przemys??aw Czerpak wrote:
>> There where some fixes in 1.0.1 and it will be good to create new
>> release though maybe we should wait few days yet.
>
> And one think else. I think that we should compile it without memory
> statistic module. FM stat has serious speed overhead and I rather
> do not expect that people will find some problems here. FM stat can
> be delivered as separate library for those people who need it to
> test some non core code.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sun Sep 14 10:02:01 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 10:02:06 2008
Subject: [Harbour] 2008-09-14 15:56 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91672$Blat.v2.6.2$75bb4fa4$175c4c46e53c@127.0.0.1>

2008-09-14 15:56 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbsetup.ch
    * Turned off HB_LEGACY_LEVEL by default.

  * doc/whatsnew.txt
    * Synced with 1.0.1.

  * make_vc.mak
  * contrib/mtpl_vc.mak
    * MSVS warning level changed to -W4 (with one warning 
      type manually excluded).
    ; NOTE/TOFIX: This will still generate quite some warnings, 
                  hopefully we can fix these until the next major 
                  release.
--
Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Sun Sep 14 10:05:38 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Sep 14 10:05:45 2008
Subject: [Harbour] hbcompat.ch update for threads
In-Reply-To: <20080914110426.GC6151@34-mo7-2.acn.waw.pl>
References: <9257026e0809140226j3dcadf84s5ebe8b89d8938152@mail.gmail.com>
	<20080914110426.GC6151@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809140705g7fb51efdj6531463709a9d628@mail.gmail.com>

On Sun, Sep 14, 2008 at 1:04 PM, Przemys? aw Czerpak <druzus@acn.waw.pl> wrote:

> Because they are not necessary. In xHarbour ThreadSleep() is simple sleep
> function just like any other ones and DestroyMutex() is empty function which
> does nothing (see vm/thread.h in xHarbour)
>
>   #xtranslate ThreadSleep( <nMilliSec> ) => hb_idleSleep( <nMilliSec> / 1000 )
>   #xtranslate DestroyMutex() => (NIL)
>
> or you can change the last one to:
>   #xtranslate DestroyMutex( <mtx> ) => ( <mtx> := NIL )
>
> Other useful translates are:
>
>   #xtranslate WaitForThreads() -> hb_threadWaitForAll()
>   hb_mutexTimeoutLock( <pMtx>, <nTimeOut> ) => ;
>                                    hb_mutexLock( <pMtx>, <nTimeOut> * 1000 )
>   hb_mutexTimeoutLock( <pMtx> )    => hb_mutexLock( <pMtx>, 0 )
>   hb_mutexTryLock( <pMtx> )        => hb_mutexLock( <pMtx>, 0 )
>
> For hb_mutexSubscribe[Now] it will be easier to write function.

Many thanks, I'll do some tests.

best regards,
Lorenzo
From druzus at acn.waw.pl  Sun Sep 14 10:07:40 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 10:08:21 2008
Subject: [Harbour] Re:  Release 1.0.1 #1
In-Reply-To: <200809141429.42707.tomaz.zupan@orpo.si>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<8FEED992-BB48-4289-B18E-F7CE24B7D879@syenar.hu>
	<20080914114457.GC16752@34-mo7-2.acn.waw.pl>
	<200809141429.42707.tomaz.zupan@orpo.si>
Message-ID: <20080914140740.GA7776@34-mo7-2.acn.waw.pl>

On Sun, 14 Sep 2008, Toma? Zupan wrote:

Hi Tomas,

> On Sunday 14 September 2008 13:44:57 Przemys??aw Czerpak wrote:
> > I think that we can release it.
> Please check issue with bin/pack_src.sh and make_rpm.sh I reported on friday 
> before release. It is not posible to build rpms from source tarball until it 
> is solved.

It is possible:

   rpmbuild -ta hbarbour-*.src.tar.gz

though it may not work with some buggy RPM macros like in connectiva
and other distros which inherited these bugs AFAIR mandriva. In such
case you have to extract harbour.spec manually and use
   rpmbuild -ba harbour.spec
Anyhow in both version package autodetecting is missing.

SVN command in pack-src.sh is used intentionally to not pack any local
files. I've seen the version you've sent but it simply packs whole
harbour directory tree with all files inside. It's also not good idea
but if I'll do not find sth better then I'll commit it or similar
solution.
Thanks for information.

best regards,
Przemek
From harbour.01 at syenar.hu  Sun Sep 14 10:11:38 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 10:11:38 2008
Subject: [Harbour] 2008-09-14 16:10 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91673$Blat.v2.6.2$cdadad32$1054b9b6f4c4@127.0.0.1>

2008-09-14 16:10 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * bin/hb-func.sh
  * source/vm/hvm.c
  * source/rtl/hbgtcore.c
  * source/rtl/gtchrmap.c
    ! Global vars given std names:
      s_pszLinkedMain        -> hb_vm_pszLinkedMain
      s_defaultGT            -> hb_gt_szNameDefault
      s_szDefaultCharMapFile -> hb_gt_szCharMapFileDefault
--
Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Sun Sep 14 10:30:38 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Sep 14 10:30:46 2008
Subject: [Harbour] Harbour [1.0] 2008-09-14 16:30 UTC+0200 Lorenzo Fiorini
Message-ID: <9257026e0809140730w485fe45av2098832208ef15ae@mail.gmail.com>

2008-09-14 16:30 UTC+0200 Lorenzo Fiorini (lorenzo.fiorini/at/gmail.com)
  * contrib/hbvpdf/hbvpdf.prg
  * contrib/hbvpdf/hbvpdf.ch
  * contrib/hbvpdf/test/pdf_demo.prg
    ! Mostly a cleanup of the code, added some functions to avoid the use
      of publics vars.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sun Sep 14 10:44:19 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 10:44:29 2008
Subject: [Harbour] Harbour [1.0] 2008-09-14 16:30 UTC+0200 Lorenzo Fiorini
In-Reply-To: <9257026e0809140730w485fe45av2098832208ef15ae@mail.gmail.com>
References: <9257026e0809140730w485fe45av2098832208ef15ae@mail.gmail.com>
Message-ID: <89E36685-021F-420F-A880-09D90F316E7C@syenar.hu>

Many thanks Lorenzo.

What do you think of changing all Pdf*() functions to
accept the pdf object - returned by PdfInit() - as their
first parameter?

This would create an incompatibility, but would at the
same time solve the reentrancy problem the original
implementation had. Even better it would also completely
make the class implementation unnecessary (or maybe even
easy to rework to be a layer rather than a copy).

All this in 1.1.

Brgds,
Viktor

On 2008.09.14., at 16:30, Lorenzo Fiorini wrote:

> 2008-09-14 16:30 UTC+0200 Lorenzo Fiorini (lorenzo.fiorini/at/ 
> gmail.com)
>  * contrib/hbvpdf/hbvpdf.prg
>  * contrib/hbvpdf/hbvpdf.ch
>  * contrib/hbvpdf/test/pdf_demo.prg
>    ! Mostly a cleanup of the code, added some functions to avoid the  
> use
>      of publics vars.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Sun Sep 14 10:48:33 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Sep 14 10:48:39 2008
Subject: [Harbour] Few suggestions for 1.0.1
Message-ID: <9257026e0809140748x54a57b9cncbcd1302b6591c41@mail.gmail.com>

1) remove colons from error messages:
say "error: 'xy'" is not more clear than "error 'xyz'" and colon is
the standard separator for gcc compilers and hence for the IDEs that
support it.
Since it's part of the error msg it will not change anything for the
actual tools that support stabdard Cl*pper error messages.

2) setting hb_exesuf="" also for dos and w32 in hb-func.sh
hb* scripts are supposed to give the same results in all the supported envs.
( the rationale behind this is that cgi apps normally use a given
extension because the file name has to be referred in html and
javascript )

3) in common.ch replace all checking macros like:
#translate ISARRAY( <xValue> )     => ( ValType( <xValue> ) == "A" )
with
#xtranslate ISARRAY( <xValue> )     => HB_ISARRAY( <xValue> )

it seems faster and more elegant and add

#xtranslate ISPOINTER( <xValue> )   => HB_ISPOINTER( <xValue> )
#xtranslate ISHASH( <xValue> )      => HB_ISHASH( <xValue> )

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Sun Sep 14 10:55:33 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Sep 14 10:55:39 2008
Subject: [Harbour] Harbour [1.0] 2008-09-14 16:30 UTC+0200 Lorenzo Fiorini
In-Reply-To: <89E36685-021F-420F-A880-09D90F316E7C@syenar.hu>
References: <9257026e0809140730w485fe45av2098832208ef15ae@mail.gmail.com>
	<89E36685-021F-420F-A880-09D90F316E7C@syenar.hu>
Message-ID: <9257026e0809140755i46adb4feyc1b3ee4315cbbfab@mail.gmail.com>

On Sun, Sep 14, 2008 at 4:44 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> What do you think of changing all Pdf*() functions to
> accept the pdf object - returned by PdfInit() - as their
> first parameter?
>
> This would create an incompatibility, but would at the
> same time solve the reentrancy problem the original
> implementation had. Even better it would also completely
> make the class implementation unnecessary (or maybe even
> easy to rework to be a layer rather than a copy).
>
> All this in 1.1.

pdfInit returns aReport only for pdf_demo.prg.

In my code I never use aReport.

A typical prg for me is:

pdfInit()
pdfOpen( cPdfFile )
...
pdfNewPage()
pdfXyz()
...
pdfClose()

<open|send|print> cPdfFile

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sun Sep 14 11:03:17 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 11:03:28 2008
Subject: [Harbour] ChangeLog 2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
Message-ID: <2BD86327-79AD-4196-AACD-E26EA3635262@syenar.hu>

Hi Przemek,

Shouldn't we increase the HB_PCODE_VER* values?

Brgds,
Viktor

On 2008.09.13., at 19:18, Przemys??aw Czerpak wrote:

> 2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbcomp.h
>  * harbour/include/hbcompdf.h
>  * harbour/include/hbxvm.h
>  * harbour/source/compiler/hbmain.c
>  * harbour/source/compiler/hbfix.c
>  * harbour/source/compiler/hbpcode.c
>  * harbour/source/compiler/hbdead.c
>  * harbour/source/compiler/complex.c
>  * harbour/source/compiler/genc.c
>  * harbour/source/compiler/gencc.c
>  * harbour/source/compiler/hbopt.c
>  * harbour/source/compiler/hblbl.c
>  * harbour/source/compiler/hbstripl.c
>  * harbour/source/compiler/harbour.y
>  * harbour/source/compiler/harbour.yyc
>  * harbour/source/compiler/harbour.yyh
>  * harbour/source/vm/hvm.c
>    + added new PCODE HB_P_THREADSTATICS


From harbour.01 at syenar.hu  Sun Sep 14 11:19:50 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 11:20:00 2008
Subject: [Harbour] Few suggestions for 1.0.1
In-Reply-To: <9257026e0809140748x54a57b9cncbcd1302b6591c41@mail.gmail.com>
References: <9257026e0809140748x54a57b9cncbcd1302b6591c41@mail.gmail.com>
Message-ID: <34CC8C38-A9CC-4911-81E4-BCF4BBA611AB@syenar.hu>

Hi Lorenzo,

On 2008.09.14., at 16:48, Lorenzo Fiorini wrote:

> 1) remove colons from error messages:
> say "error: 'xy'" is not more clear than "error 'xyz'" and colon is
> the standard separator for gcc compilers and hence for the IDEs that
> support it.
> Since it's part of the error msg it will not change anything for the
> actual tools that support stabdard Cl*pper error messages.

I wouldn't stir 1.0.1 with this, at the stage we're.
I'd vote to do this in 1.1. This should be done on
per message basis, as there are some messages where the
colon is significant(ish), like in "Syntax error".

> 2) setting hb_exesuf="" also for dos and w32 in hb-func.sh
> hb* scripts are supposed to give the same results in all the  
> supported envs.
> ( the rationale behind this is that cgi apps normally use a given
> extension because the file name has to be referred in html and
> javascript )

I'm not really sure I got this one (I'm not using hb scripts yet),
but it seems okay to me.

> 3) in common.ch replace all checking macros like:
> #translate ISARRAY( <xValue> )     => ( ValType( <xValue> ) == "A" )
> with
> #xtranslate ISARRAY( <xValue> )     => HB_ISARRAY( <xValue> )

Okay to me.

> it seems faster and more elegant and add
>
> #xtranslate ISPOINTER( <xValue> )   => HB_ISPOINTER( <xValue> )
> #xtranslate ISHASH( <xValue> )      => HB_ISHASH( <xValue> )

I vote no to this one, because of namespace violation.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 14 11:21:35 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 11:21:45 2008
Subject: [Harbour] Harbour [1.0] 2008-09-14 16:30 UTC+0200 Lorenzo Fiorini
In-Reply-To: <9257026e0809140755i46adb4feyc1b3ee4315cbbfab@mail.gmail.com>
References: <9257026e0809140730w485fe45av2098832208ef15ae@mail.gmail.com>
	<89E36685-021F-420F-A880-09D90F316E7C@syenar.hu>
	<9257026e0809140755i46adb4feyc1b3ee4315cbbfab@mail.gmail.com>
Message-ID: <AED7BFB4-DC05-4999-8FEA-E53D9131651B@syenar.hu>

>>
>> This would create an incompatibility, but would at the
>> same time solve the reentrancy problem the original
>> implementation had. Even better it would also completely
>> make the class implementation unnecessary (or maybe even
>> easy to rework to be a layer rather than a copy).
>>
>> All this in 1.1.
>
> pdfInit returns aReport only for pdf_demo.prg.
>
> In my code I never use aReport.
>
> A typical prg for me is:
>
> pdfInit()
> pdfOpen( cPdfFile )
> ...
> pdfNewPage()
> pdfXyz()
> ...
> pdfClose()
>
> <open|send|print> cPdfFile

I see this, but what if there is an MT program
trying to generate multiple pdfs at the same
time, or a non-MT one, which happens to use this
lib in a reentrant way?

This will currently fail badly.

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Sun Sep 14 11:22:54 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Sep 14 11:23:00 2008
Subject: [Harbour] 1.0.1 warnings
Message-ID: <9257026e0809140822v1a83aa5dx235f1a6b299e50c8@mail.gmail.com>

../../complex.c: In function 'hb_comp_keywordType':
../../complex.c:250: warning: passing argument 1 of 'hb_xfree'
discards qualifiers from pointer target type
../../complex.c: In function 'hb_comp_tokenIdentifer':
../../complex.c:266: warning: passing argument 2 of
'hb_compIdentifierNew' discards qualifiers from pointer target type
../../complex.c:270: warning: return discards qualifiers from pointer
target type
../../complex.c: In function 'hb_comp_tokenString':
../../complex.c:276: warning: assignment discards qualifiers from
pointer target type
../../complex.c:282: warning: passing argument 2 of
'hb_compIdentifierNew' discards qualifiers from pointer target type
../../complex.c:284: warning: assignment discards qualifiers from
pointer target type
../../complex.c:287: warning: return discards qualifiers from pointer
target type
../../complex.c: In function 'hb_complex':
../../complex.c:459: warning: assignment discards qualifiers from
pointer target type

they are pretty new I've rebuilt it many times in the last days

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sun Sep 14 11:26:59 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 11:27:09 2008
Subject: [Harbour] Memory buffer overflow
Message-ID: <264F1AE2-D878-485F-9917-5218A5837C77@syenar.hu>

Hi Przemek,

Can easily be that I'm doing something wrong, but I'm getting this:
---
C:\harbour\bin>mttest07.exe

Harbour 1.1.0dev Intl. (Rev. 9387)
Main start
Starting threads: <1><2><3><4><5>
Sending jobs...
Unrecoverable error 9022: Memory buffer overflow
Called from HB_MUTEXNOTIFY(0)
Called from MAIN(45) in mttest07.prg
---

BCC 5.82 + XP SP3 + 1xP4HT CPU

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 14 11:28:07 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 11:28:15 2008
Subject: [Harbour] 1.0.1 warnings
In-Reply-To: <9257026e0809140822v1a83aa5dx235f1a6b299e50c8@mail.gmail.com>
References: <9257026e0809140822v1a83aa5dx235f1a6b299e50c8@mail.gmail.com>
Message-ID: <CDDC32D2-1E09-4C6D-9C15-E2891CDD575A@syenar.hu>

Thanks, I'll revert some syncing with 1.1, and I'll
try to resync the PP fix alone, manually.

Brgds,
Viktor

On 2008.09.14., at 17:22, Lorenzo Fiorini wrote:

> ../../complex.c: In function 'hb_comp_keywordType':
> ../../complex.c:250: warning: passing argument 1 of 'hb_xfree'
> discards qualifiers from pointer target type
> ../../complex.c: In function 'hb_comp_tokenIdentifer':
> ../../complex.c:266: warning: passing argument 2 of
> 'hb_compIdentifierNew' discards qualifiers from pointer target type
> ../../complex.c:270: warning: return discards qualifiers from pointer
> target type
> ../../complex.c: In function 'hb_comp_tokenString':
> ../../complex.c:276: warning: assignment discards qualifiers from
> pointer target type
> ../../complex.c:282: warning: passing argument 2 of
> 'hb_compIdentifierNew' discards qualifiers from pointer target type
> ../../complex.c:284: warning: assignment discards qualifiers from
> pointer target type
> ../../complex.c:287: warning: return discards qualifiers from pointer
> target type
> ../../complex.c: In function 'hb_complex':
> ../../complex.c:459: warning: assignment discards qualifiers from
> pointer target type
>
> they are pretty new I've rebuilt it many times in the last days
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sun Sep 14 11:34:40 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 11:34:40 2008
Subject: [Harbour] [1.0] 2008-09-14 17:33 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <01c9167f$Blat.v2.6.2$67276524$17cd5b1cc66@127.0.0.1>

2008-09-14 17:33 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbpp.h
  * harbour/source/pp/ppcore.c
  * harbour/source/pp/hbpp.c
    * changed some declarations from 'char *' to 'const char *' and
      fixed casting for some more pedantic compilers
      [REVERTED]

  * harbour/source/pp/ppcore.c
    ! fixed one typo which could cause memory leak and even GPF [REVERTED]
  
  ; NOTE: Both of these reverted as I cannot find the fix itself 
          in the code, and copying in the whole files created 
          an update avalanche to compile cleanly.
          Przemek, if you could implement the GPF/leak fix in 1.0, it 
          would be great.
--
Brgds,
Viktor

From info at fsgiudice.com  Sun Sep 14 11:42:40 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Sep 14 11:42:50 2008
Subject: [Harbour] [SPAM] Re: [SPAM] Re: [SPAM] Re: ChangeLog	2008-09-13
	18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <19476839.post@talk.nabble.com>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>	<19473468.post@talk.nabble.com>	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>	<19474140.post@talk.nabble.com>	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>	<19476236.post@talk.nabble.com>	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>
	<19476839.post@talk.nabble.com>
Message-ID: <48CD30F0.8030007@fsgiudice.com>

Hi Pritpal,

I'm trying to rebuild SVN under BCC 5.5.1 but I'm getting some errors.
Could you kindly post here your complete envars sets to build SVN in MT 
mode ?

TIA

Best Regards

Francesco

Pritpal Bedi ha scritto:
> Przemek
> 
> 
> Przemyslaw Czerpak-2 wrote:
>> My fault. Please also add -DHB_USE_TLS to C_USR or wait a while.
>> I'll fix it in SVN.
>> BTW setting __MT__ manually does not enable real MT compilation in BCC.
>> I've just check my BCC switches. Try to use -twM switch instead,
>> f.e.:
>>    SET CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM -twM
>>
> 
> Excellent. 
> 
> Now my flagship application is running as is in MT mode.
> So far I have not been able to compute speed tests but visually
> I could not see any difference.
> 
> SET CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM -tWM 
> -tWM comtains capital 'W'
> 
> I will make some experiments next few days and will report the findings.
> 
> Hats off to you!!!
> 
> 
> Regards
> Pritpal Bedi
> 
> 
From harbour.01 at syenar.hu  Sun Sep 14 12:00:38 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 12:00:42 2008
Subject: [Harbour] 2008-09-14 17:59 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91683$Blat.v2.6.2$07e58e02$14f0aab02cce@127.0.0.1>

2008-09-14 17:59 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  + contrib/hbnf/tests/nftest.prg
    + Adapted hbnf test program from xhb.

  * contrib/hbnf/common.mak
    ! File list synced with the GNU-make one.
      [TOMERGE 1.0]

  * source/common/hbver.c
    * "Intl." removed from the version number. Besides mimicing 
      CA-Cl*pper there is not point in including this, since 
      all Harbour compilers are by default international version.
--
Brgds,
Viktor

From bedipritpal at hotmail.com  Sun Sep 14 12:28:24 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun Sep 14 12:28:30 2008
Subject: [Harbour] [SPAM] Re: [SPAM] Re: [SPAM] Re: ChangeLog	2008-09-13
	18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <48CD30F0.8030007@fsgiudice.com>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
	<19473468.post@talk.nabble.com>
	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>
	<19474140.post@talk.nabble.com>
	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>
	<19476236.post@talk.nabble.com>
	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>
	<19476839.post@talk.nabble.com> <48CD30F0.8030007@fsgiudice.com>
Message-ID: <19481725.post@talk.nabble.com>


Hello Francesco


Francesco Saverio Giudice wrote:
> 
> I'm trying to rebuild SVN under BCC 5.5.1 but I'm getting some errors.
> Could you kindly post here your complete envars sets to build SVN in MT 
> mode ?
> 

Actually I am also not being able to build Harbour completely.
It shows up eror when building hbrun.exe because of the missing cw32mt.lib
which is not respected in the build process even after defining
SET LDFLAGS=cw32mt.lib
But at this stage Harbour core is build already and I just issue 
make_b32 install
Contribs are build properly.

Here is my SetB55H.bat file which is used to open the console on win xp:

@echo off

PROMPT=$P$G

SET PATH=\BATCHES;\HARBOUR\BIN;\BCC55\BIN;\DJGPP\BIN;%PATH%
SET DIRCMD=/oen

SET Bison_Simple=C:\DJGPP\share\bison\bison.sim
SET HB_LEX=SIMPLEX
SET HB_ARCHITECTURE=w32
SET HB_COMPILER=bcc32

SET HB_INC_INSTALL=C:\HARBOUR\INCLUDE
SET HB_LIB_INSTALL=C:\HARBOUR\LIB
SET HB_BIN_INSTALL=C:\HARBOUR\BIN

SET BC_INC_INSTALL=C:\BCC55\INCLUDE
SET BC_LIB_INSTALL=C:\BCC55\LIB
SET BC_BIN_INSTALL=C:\BCC55\BIN

SET VOUCHINI=C:\CREATIVE.ACP\DEVELOP
SET HRB_DIR=C:\HARBOUR
SET DEV_DIR_BCC=C:\BCC55
SET DEV_DIR_HRB=C:\HARBOUR

SET CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM -tWM 
SET LDFLAGS=cw32mt.lib 

And for compiling my application I specify -tWM switch and include
cw32mt.lib
in the project.

It solves my purpose as I do not use any Harbour utilities.

Viktor, please check why LDFLAGS is not respected in make_b32.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/ChangeLog-2008-09-13-18%3A49-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp19472757p19481725.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sun Sep 14 12:54:15 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 12:54:34 2008
Subject: [Harbour] [SPAM] Re: [SPAM] Re: [SPAM] Re: ChangeLog	2008-09-13
	18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <19481725.post@talk.nabble.com>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
	<19473468.post@talk.nabble.com>
	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>
	<19474140.post@talk.nabble.com>
	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>
	<19476236.post@talk.nabble.com>
	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>
	<19476839.post@talk.nabble.com> <48CD30F0.8030007@fsgiudice.com>
	<19481725.post@talk.nabble.com>
Message-ID: <535B6850-16C9-4E51-B7CB-F32CBA1C9547@syenar.hu>

> Viktor, please check why LDFLAGS is not respected in make_b32.

I know because BCC works (in Harbour) in a totally
different way than GNU, linking is done by the compiler.

Until I gather some willingness to spend time on this,
pls use C_USR to spec the lib. I didn't try it, but
it may work.

There is also an HB_BUILD_ST flag which would seem
logical to use for MT, but I have no idea of its
current purpose and I didn't dare to change it yet.

You may also try the GNU-make system for BCC, as it
would probably work, and I'm personally more and more
fed up with our multiple build systems, it's a huge
waste of time to maintain both and try to keep in sync.

MSVC/MSVS should also be tested/fixed BTW.

bld.bat will also need to tweaked for MT, and I don't
yet see how to make this cleanly. [ turning on MT
by default could help. ]

As another loud note, I'd like to propose to _lessen_
the number of different build types and build options we
have, as this really starts to become a maintenance
nightmare this way. There is simply not enough testers
to adequately do build tests with this many different
kind of build options (lots of option synonyms, C/C++,
UNICODE, MT, WIN_ALLOC). We'll need to modify bld.bat
for MT too, and I'm not sure this is easily done, or
we need yet another build-system wide envvar setting.

[ Overall I'm dreaming of a Harbour which is always
UNICODE and always MT. Speed fanatics may tweak it
themselves IMO. ]

I'm also not sure, just feel that we may no relatively
easily add a screen refresher thread to GTWVT for
example.

Przemek, how much do you guesstimate the speed loss
with MT enabled, compared to non-MT?

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Sun Sep 14 13:07:08 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Sep 14 13:07:15 2008
Subject: [Harbour] Release 1.0.1 #1
In-Reply-To: <46443CA4-E372-4043-89C9-BD340DC24067@syenar.hu>
References: <46443CA4-E372-4043-89C9-BD340DC24067@syenar.hu>
Message-ID: <9257026e0809141007x4d127c43i78b2b77a72e8fd48@mail.gmail.com>

On Sun, Sep 14, 2008 at 11:56 AM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> 18 Windows/DOS compilers are now okay, the rest is a TODO.

> TODO    GCC MinGW 3.4.5 (cross compile on OpenSuse 10.3, FC3)
> TODO    GCC MinGW 4.2.1 (cross compile on Ubuntu 8.04.1)

> TODO    GCC 4.0.1 (mingw32ce 0.51.0) (cross-compile on Ubuntu 8.04.1)
> TODO    GCC 4.1.0 (mingw32ce 0.50.0) (cross-compile on OpenSuse 10.3, FC3)
> - Linux
> TODO    GCC 4.2.3 (Ubuntu 8.04.1)
> TODO    GCC 4.3.0 (Fedora) (non-default build)
> TODO    GCC (OpenSuse 10.3)

TODO    GCC 4.0.1 PPC (Leopard 10.5.4 PPC + XCode 3.0) (non-default build)

I've successfully built 1.0.1 under:
- Fedora 9 using gcc 4.3.0
- Fedora 9 using cross compile mingw-gcc-*-4.3.2-1
- Fedora 9 using cegcc-mingw32ce-0.50-1
>        GCC MinGW 4.3.2a (on msys 1.0.10)
- W2k sp4 using msys 1.0.10/gcc 3.4.5 ( current )
Ubuntu 8.04.1 using gcc 4.2.3
Ubuntu 8.04.1 using mingw-cross compile installed from synaptic

I'm trying to configure OpenSuse 10.3 and OpenSolaris 2008.05 to test
the builds.

Tomorrow I'll do it under OSX PPC.

best regards,
Lorenzo
From info at fsgiudice.com  Sun Sep 14 13:13:07 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Sep 14 13:13:16 2008
Subject: [Harbour] [SPAM] Re: [SPAM] Re: [SPAM] Re: ChangeLog	2008-09-13
	18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <19481725.post@talk.nabble.com>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>	<19473468.post@talk.nabble.com>	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>	<19474140.post@talk.nabble.com>	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>	<19476236.post@talk.nabble.com>	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>	<19476839.post@talk.nabble.com>
	<48CD30F0.8030007@fsgiudice.com> <19481725.post@talk.nabble.com>
Message-ID: <48CD4623.9080300@fsgiudice.com>

Hi Pritpal,

thank you, I got same error here on hbrun.
Another error is in tests\mt\* samples.
They built correctly, but running them hb_threadStart() returns NIL

Best Regards

Francesco

Pritpal Bedi ha scritto:
> Hello Francesco
> 
> 
> Francesco Saverio Giudice wrote:
>> I'm trying to rebuild SVN under BCC 5.5.1 but I'm getting some errors.
>> Could you kindly post here your complete envars sets to build SVN in MT 
>> mode ?
>>
> 
> Actually I am also not being able to build Harbour completely.
> It shows up eror when building hbrun.exe because of the missing cw32mt.lib
> which is not respected in the build process even after defining
> SET LDFLAGS=cw32mt.lib
> But at this stage Harbour core is build already and I just issue 
> make_b32 install
> Contribs are build properly.
> 
> Here is my SetB55H.bat file which is used to open the console on win xp:
> 
> @echo off
> 
> PROMPT=$P$G
> 
> SET PATH=\BATCHES;\HARBOUR\BIN;\BCC55\BIN;\DJGPP\BIN;%PATH%
> SET DIRCMD=/oen
> 
> SET Bison_Simple=C:\DJGPP\share\bison\bison.sim
> SET HB_LEX=SIMPLEX
> SET HB_ARCHITECTURE=w32
> SET HB_COMPILER=bcc32
> 
> SET HB_INC_INSTALL=C:\HARBOUR\INCLUDE
> SET HB_LIB_INSTALL=C:\HARBOUR\LIB
> SET HB_BIN_INSTALL=C:\HARBOUR\BIN
> 
> SET BC_INC_INSTALL=C:\BCC55\INCLUDE
> SET BC_LIB_INSTALL=C:\BCC55\LIB
> SET BC_BIN_INSTALL=C:\BCC55\BIN
> 
> SET VOUCHINI=C:\CREATIVE.ACP\DEVELOP
> SET HRB_DIR=C:\HARBOUR
> SET DEV_DIR_BCC=C:\BCC55
> SET DEV_DIR_HRB=C:\HARBOUR
> 
> SET CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM -tWM 
> SET LDFLAGS=cw32mt.lib 
> 
> And for compiling my application I specify -tWM switch and include
> cw32mt.lib
> in the project.
> 
> It solves my purpose as I do not use any Harbour utilities.
> 
> Viktor, please check why LDFLAGS is not respected in make_b32.
> 
> Regards
> Pritpal Bedi
From harbour.01 at syenar.hu  Sun Sep 14 13:22:23 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 13:22:29 2008
Subject: [Harbour] 2008-09-14 19:15 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9168e$Blat.v2.6.2$73943b52$14206855e29a@127.0.0.1>

2008-09-14 19:15 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
  * make_vc.mak
  * make_gcc.mak
    * A change with the goal to further clean duplicate build 
      controlling options and make the configuration of GNU 
      and non-GNU build systems closer. INCOMPATIBLE.
      Builders should make the following changes in their 
      configurations and build scripts:
      - CFLAGS -> C_USR
      - CLIBFLAGS -> C_USR
      - LDFLAGS -> L_USR
      - HARBOURFLAGS -> PRG_USR
    * BCCDLL_WITH_DYNRT -> HB_BCCDLL_DYNRT
      Shouldn't this be the default, if it's marked as 'recommended'?
    ; Basic rules for builders is now pretty simple:
      C_USR for .c options, L_USR for link options, 
      PRG_USR for .prg options.
    ; L_USR doesn't work the same way as in GNU-make, yet.
    ; Also expect, that in the future - even before 1.1 release - 
      these switches might be also standardized to be 
      HB_USR_C, HB_USR_PRG, HB_USR_L, HB_USR_A.

--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 14 13:24:20 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 13:24:23 2008
Subject: [Harbour] [1.0] 2008-09-14 17:59 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c9168e$Blat.v2.6.2$b8ea7eb4$1494a7025d70@127.0.0.1>

2008-09-14 17:59 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  + contrib/hbnf/tests/nftest.prg
    + Adapted hbnf test program from xhb.

  * contrib/hbnf/common.mak
    ! File list synced with the GNU-make one.
--
Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Sun Sep 14 13:25:43 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Sep 14 13:25:51 2008
Subject: [Harbour] [SPAM] Re: [SPAM] Re: [SPAM] Re: ChangeLog 2008-09-13
	18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <535B6850-16C9-4E51-B7CB-F32CBA1C9547@syenar.hu>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>
	<19474140.post@talk.nabble.com>
	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>
	<19476236.post@talk.nabble.com>
	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>
	<19476839.post@talk.nabble.com> <48CD30F0.8030007@fsgiudice.com>
	<19481725.post@talk.nabble.com>
	<535B6850-16C9-4E51-B7CB-F32CBA1C9547@syenar.hu>
Message-ID: <9257026e0809141025k6cd0f422k90c4365bf0d34283@mail.gmail.com>

On Sun, Sep 14, 2008 at 6:54 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> As another loud note, I'd like to propose to _lessen_
> the number of different build types and build options we
> have, as this really starts to become a maintenance
> nightmare this way. There is simply not enough testers
> to adequately do build tests with this many different
> kind of build options (lots of option synonyms, C/C++,
> UNICODE, MT, WIN_ALLOC). We'll need to modify bld.bat
> for MT too, and I'm not sure this is easily done, or
> we need yet another build-system wide envvar setting.
>
> [ Overall I'm dreaming of a Harbour which is always
> UNICODE and always MT. Speed fanatics may tweak it
> themselves IMO. ]
>
> I'm also not sure, just feel that we may no relatively
> easily add a screen refresher thread to GTWVT for
> example.
>
> Przemek, how much do you guesstimate the speed loss
> with MT enabled, compared to non-MT?

I agree.

The matrix between OSes, distributions, C compilers, 32/64, cross
compiling, defines, MT/ST is getting huge.
If you remember I've proposed time ago that the release should be a
zip file and a what' s new announce on the site.
The binaries will be be provided by volunteers "after" the release
when and if they'll find the time to do it.
A language is not a word processor where you can expect that uncle Joe
comes, install and start to use it.
If a developers doesn't know how to build Harbour he doesn't know how
to create apps with it.

best regards,
Lorenzo
From bedipritpal at hotmail.com  Sun Sep 14 13:30:00 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun Sep 14 13:30:07 2008
Subject: [Harbour] ChangeLog	2008-09-13 18:49 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <48CD4623.9080300@fsgiudice.com>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
	<19473468.post@talk.nabble.com>
	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>
	<19474140.post@talk.nabble.com>
	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>
	<19476236.post@talk.nabble.com>
	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>
	<19476839.post@talk.nabble.com> <48CD30F0.8030007@fsgiudice.com>
	<19481725.post@talk.nabble.com> <48CD4623.9080300@fsgiudice.com>
Message-ID: <19482399.post@talk.nabble.com>


Hi Francesco


Francesco Saverio Giudice wrote:
> 
> thank you, I got same error here on hbrun.
> 
> Another error is in tests\mt\* samples.
> They built correctly, but running them hb_threadStart() returns NIL
> 

I included mttest*.prg(s) into my application with changing main() to
mnttest*()
and could run all of these successfully. Are you specifying -tWM flag when 
compiling/linking?

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/ChangeLog-2008-09-13-18%3A49-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp19472757p19482399.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sun Sep 14 13:52:20 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 13:52:42 2008
Subject: [Harbour] [SPAM] Re: [SPAM] Re: [SPAM] Re: ChangeLog 2008-09-13
	18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0809141025k6cd0f422k90c4365bf0d34283@mail.gmail.com>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>
	<19474140.post@talk.nabble.com>
	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>
	<19476236.post@talk.nabble.com>
	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>
	<19476839.post@talk.nabble.com> <48CD30F0.8030007@fsgiudice.com>
	<19481725.post@talk.nabble.com>
	<535B6850-16C9-4E51-B7CB-F32CBA1C9547@syenar.hu>
	<9257026e0809141025k6cd0f422k90c4365bf0d34283@mail.gmail.com>
Message-ID: <3E1E25B9-4B2A-44D4-A605-713717AC7629@syenar.hu>

>> As another loud note, I'd like to propose to _lessen_
>> the number of different build types and build options we
>> have, as this really starts to become a maintenance
>> nightmare this way. There is simply not enough testers
>> to adequately do build tests with this many different
>> kind of build options (lots of option synonyms, C/C++,
>> UNICODE, MT, WIN_ALLOC). We'll need to modify bld.bat
>> for MT too, and I'm not sure this is easily done, or
>> we need yet another build-system wide envvar setting.
>>
>> [ Overall I'm dreaming of a Harbour which is always
>> UNICODE and always MT. Speed fanatics may tweak it
>> themselves IMO. ]
>>
>> I'm also not sure, just feel that we may no relatively
>> easily add a screen refresher thread to GTWVT for
>> example.
>>
>> Przemek, how much do you guesstimate the speed loss
>> with MT enabled, compared to non-MT?
>
> I agree.
>
> The matrix between OSes, distributions, C compilers, 32/64, cross
> compiling, defines, MT/ST is getting huge.
> If you remember I've proposed time ago that the release should be a
> zip file and a what' s new announce on the site.
> The binaries will be be provided by volunteers "after" the release
> when and if they'll find the time to do it.
> A language is not a word processor where you can expect that uncle Joe
> comes, install and start to use it.
> If a developers doesn't know how to build Harbour he doesn't know how
> to create apps with it.

Yes, and I assume we - here on the developer list - could make
a pretty good judgement on many of the default (and maybe
_exclusive_) options a normal developer may need. The factors
are so numerous and difficult to oversee for someone not deeply
into Harbour, that giving options instead of a well though out
default core system might actually be a disservice rather than
a plus.

I bet there were hundreds / thousands of such decisions made
for example while developing C#, Java or PHP, but someone as
an end-user can only see a very streamlined and uniform product.
There is only one reason for this: the developers _did the
judgement_, made the tradeoffs and came up with the best
mixture of these. We may need to measure or do tradeoffs, but
that should be part of the development process IMO.

To achieve that I'm still proposing to dig out, document and
slash every internal options we don't strongly need, and while
slashing, we may want to make these judgments (like making MT
the default, selecting a PCRE subsystem, choosing WIN_ALLOC as
a default, making options rather link-time than build-time (for
XPP and other extensions, FM module, PROFILER module), solve
UNICODE in a way that it runs on Win9x platforms too, so that
it can be enabled by default.

It's actually very interesting and exciting to deal with lots
of niche compilers and platforms, but if it were just me, I'd
instantly drop C++ builds, Cygwin, < 4.x MinGW, DMC, POCC,
Watcom, DOS from the mix as the amount of work going into these,
instead of something really useful is very frightening (yes,
I know I picked some of them, but anyways). This is not to say
these compilers/platforms cannot be useful, but realistically
seeing it, I don't think too many ppl are actually using them,
and/or there couldn't be too many reasons to choose these for
anything serious.

Same goes for those contribs which get worked on a lot,
but nobody is actually using them, or giving any feedback
on them whatsoever. HBWHAT is the olympic winner in this game.

"And on that bombshell" I can gladly send my 1.0.1 release
make scripts for Windows, if anyone is interested. They are not
a masterpiece of .bat file mastering, in fact they are very
simple, but they represent the least amount of settings needed
for a proper build, for both GNU and non-GNU makes.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 14 14:00:20 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 14:00:26 2008
Subject: [Harbour] 2008-09-14 19:59 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91693$Blat.v2.6.2$c0b166a8$1574319106a8@127.0.0.1>

2008-09-14 19:59 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
    + Now setting 'HB_BUILD_ST = no' will generate an MT build.
      TODO: Change the default to 'yes' should be the way to go 
            IMO.

  * bin/bld.bat
    + Added cw32mt.lib for BCC32 to make it work for MT Harbour.
    ; I hope this won't break ST Harbour builds, a quick tests 
      proved not.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 14 14:19:20 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 14:19:20 2008
Subject: [Harbour] 2008-09-14 20:18 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91696$Blat.v2.6.2$68260f40$db87f3794b8@127.0.0.1>

2008-09-14 20:18 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/common.ch
    % IS*() macros now using hb_Is*() functions instead of 
      ValType() calls.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 14 14:19:49 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 14:19:49 2008
Subject: [Harbour] [1.0] 2008-09-14 20:18 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c91696$Blat.v2.6.2$7960cda4$17a4f1cace90@127.0.0.1>

2008-09-14 20:18 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/common.ch
    % IS*() macros now using hb_Is*() functions instead of 
      ValType() calls.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 14 14:26:17 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 14:26:17 2008
Subject: [Harbour] 2008-09-14 16:30 UTC+0200 Lorenzo Fiorini
	(lorenzo.fiorini/at/gmail.com)
Message-ID: <01c91697$Blat.v2.6.2$60a9ac58$21c3eab358c@127.0.0.1>

; Synced from 1.0

2008-09-14 16:30 UTC+0200 Lorenzo Fiorini (lorenzo.fiorini/at/gmail.com)
  * contrib/hbvpdf/hbvpdf.prg
  * contrib/hbvpdf/hbvpdf.ch
  * contrib/hbvpdf/test/pdf_demo.prg
    ! Mostly a cleanup of the code, added some functions to avoid the use  
      of publics vars. 
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 14 14:31:19 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 14:31:27 2008
Subject: [Harbour] hbvpdf
Message-ID: <96F07428-58D5-410E-A266-EFCC6877B606@syenar.hu>

Hi Lorenzo,

After latest fixes, we seem to have lost bookmark support
in hbvpdf.

What could be the problem?

[ I can send you a test.pdf I created yesterday, and one
that I've made now. ]

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 14 14:34:32 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 14:34:40 2008
Subject: [Harbour] Release 1.0.1 #2
Message-ID: <E5B08CD0-AEC8-49ED-9F57-E62BBCDC0527@syenar.hu>

Hi all,

Thanks Lorenzo, I've updated the list.

Used external packages (on my system of course):
- Allegro 4.2.2
- Apollo 6.1.0.4
- libcurl 7.19.0 (7.18.2 for DMC builds)
- Firebird 2.0.4
- FreeImage 3.11.0
- libgd 2.0.34
- libharu 2.1.0
- mysql 5.0.47
- pgsql 8.3.3
- ADS 9.00

Tested platforms:
- Windows
	BCC 5.51
	BCC 5.82
	GCC Cygwin 3.4.4
	GCC MinGW 3.4.5 (on msys 1.0.10)
	GCC MinGW 4.1.2 (on msys 1.0.10)
TODO	GCC MinGW 3.4.5 (cross compile on OpenSuse 10.3, FC3)
	GCC MinGW 4.2.1 (cross compile on Ubuntu 8.04.1)
	GCC MinGW 4.3.2 (cross compile on Fedora 9)
	GCC MinGW 4.3.2a (on msys 1.0.10)
TODO	MSVC 6.0 (HBODBC: needs fresh ODBC headers from MSSDK)
TODO	MSVC 7.1 (MSVS 2003)
	MSVC 8.0 (MSVS 2005)
	MSVC 8.0 (MSVS 2005) C++
	MSVC 9.0 (MSVS 2008 SP1)
	MSVC 9.0 (MSVS 2008 SP1) C++
	MSVC 9.0 (MSVS 2008 SP1) 64 bit
	MSVC 9.0 (MSVS 2008 SP1) C++ 64 bit (cross-compile on Win32)
	PellesC 4.5 (HBSQLIT3: interface only)
	PellesC 5.0
	PellesC 5.0 64 bit (cross-compile on Win32)
	Open Watcom 1.7 (HBSQLIT3: interface only)
	Digital Mars C 4.50
- WinCE
TODO	MSVC 6.0 (eVC4)
TODO	GCC 4.0.1 (mingw32ce 0.51.0) (cross-compile on Ubuntu 8.04.1)
TODO	GCC 4.1.0 (mingw32ce 0.50.0) (cross-compile on OpenSuse 10.3, FC3)
	GCC ?.?.? (mingw32ce 0.50-1) (cross-compile on Fedora 9)
- Linux
	GCC 4.2.3 (Ubuntu 8.04.1)
	GCC 4.3.0 (Fedora 9)
TODO	GCC 4.2.1 (SuSE 10.3)
TODO	Open Watcom (with patches only. FAILED)
TODO	GCC (RedHat 7.3)
TODO	GCC (OpenSuse 10.3)
TODO	GCC (FC3)
- OS X
TODO	GCC 4.0.1 i386, x86_64, PPC, PPC64 (Leopard 10.5.4 PPC + XCode 3.1)
TODO	GCC 4.0.1 i386, x86_64, PPC, PPC64 (Leopard 10.5.4 Intel + XCode  
3.1)
TODO	GCC 4.0.1 PPC (Leopard 10.5.4 PPC + XCode 3.0) (non-default build)
- Solaris
TODO	GCC 3.4.3 i86pc (SunOS 5.11 - OpenSolaris 2008.05)
- BSD
TODO	Reported OK (No details)
- HPUX
TODO	Reported OK (a week ago in /trunk)
- OS/2
TODO	GCC 3.3.5 (EMX/Innotek)
- DOS
TODO	GCC 3.3.2 32 bit (DJGPP) (DJGPP bash port)
	GCC 4.2.3 32 bit (DJGPP) ('make install' won't properly work)
TODO	Open Watcom 1.7 (command.com)

Brgds,
Viktor

From bedipritpal at hotmail.com  Sun Sep 14 14:45:18 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun Sep 14 14:45:23 2008
Subject: [Harbour] [SPAM] Re: [SPAM] Re: [SPAM] Re: ChangeLog 2008-09-13
	18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <3E1E25B9-4B2A-44D4-A605-713717AC7629@syenar.hu>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
	<19473468.post@talk.nabble.com>
	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>
	<19474140.post@talk.nabble.com>
	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>
	<19476236.post@talk.nabble.com>
	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>
	<19476839.post@talk.nabble.com> <48CD30F0.8030007@fsgiudice.com>
	<19481725.post@talk.nabble.com>
	<535B6850-16C9-4E51-B7CB-F32CBA1C9547@syenar.hu>
	<9257026e0809141025k6cd0f422k90c4365bf0d34283@mail.gmail.com>
	<3E1E25B9-4B2A-44D4-A605-713717AC7629@syenar.hu>
Message-ID: <19483086.post@talk.nabble.com>


Hello Viktor


Szak?ts Viktor wrote:
> 
> Same goes for those contribs which get worked on a lot,
> but nobody is actually using them, or giving any feedback
> on them whatsoever. HBWHAT is the olympic winner in this game.
> 

I use local copy of HBWHAT in a different manner on a day-to-day basis.
"The diffenerent manner" is that I have prefixed every function with
VWN_*() for core windows api functions and WHT_*() for PRG functions
to avoid the namespace conflicks with other 3rd party similar libraries.
The same I had proposed way earlier on xHarbour NG but nobody cared.
If group agrees I can restructure HBWHAT with new namespace, and then,
I will be maitining it for rest of the lifetime.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/ChangeLog-2008-09-13-18%3A49-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp19472757p19483086.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From abe.buch at att.net  Sun Sep 14 14:47:10 2008
From: abe.buch at att.net (Abeb)
Date: Sun Sep 14 14:47:15 2008
Subject: [Harbour] wvtcore.c , aPxlOff
In-Reply-To: <19465714.post@talk.nabble.com>
References: <19446074.post@talk.nabble.com> <19465714.post@talk.nabble.com>
Message-ID: <19483087.post@talk.nabble.com>


Thanks A Lot,

I'll test it.

Thanks Again.


Pritpal Bedi wrote:
> 
> Abe
> 
> 
> Abeb wrote:
>> 
>> Please add aPxlOff parameter to more function in aPxlOff 
>> like in WVT_DRAWLABELOBJ etc.
>> 
> 
> It is done. Please report if there is any problems.
> 
> Regards
> Pritpal Bedi
> 
> 

-- 
View this message in context: http://www.nabble.com/wvtcore.c-%2C-aPxlOff-tp19446074p19483087.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sun Sep 14 15:09:25 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 15:09:35 2008
Subject: [Harbour] [SPAM] Re: [SPAM] Re: [SPAM] Re: ChangeLog 2008-09-13
	18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <19483086.post@talk.nabble.com>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
	<19473468.post@talk.nabble.com>
	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>
	<19474140.post@talk.nabble.com>
	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>
	<19476236.post@talk.nabble.com>
	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>
	<19476839.post@talk.nabble.com> <48CD30F0.8030007@fsgiudice.com>
	<19481725.post@talk.nabble.com>
	<535B6850-16C9-4E51-B7CB-F32CBA1C9547@syenar.hu>
	<9257026e0809141025k6cd0f422k90c4365bf0d34283@mail.gmail.com>
	<3E1E25B9-4B2A-44D4-A605-713717AC7629@syenar.hu>
	<19483086.post@talk.nabble.com>
Message-ID: <8D81A40E-4D0F-4C58-8363-594770B86B2B@syenar.hu>

>
Hi Pritpal,

> Szak?ts Viktor wrote:
>>
>> Same goes for those contribs which get worked on a lot,
>> but nobody is actually using them, or giving any feedback
>> on them whatsoever. HBWHAT is the olympic winner in this game.
>>
>
> I use local copy of HBWHAT in a different manner on a day-to-day  
> basis.
> "The diffenerent manner" is that I have prefixed every function with
> VWN_*() for core windows api functions and WHT_*() for PRG functions
> to avoid the namespace conflicks with other 3rd party similar  
> libraries.
> The same I had proposed way earlier on xHarbour NG but nobody cared.
> If group agrees I can restructure HBWHAT with new namespace, and then,
> I will be maitining it for rest of the lifetime.

That's a very nice offer of you. I think the prefixing is
an absolutely good idea.

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Sun Sep 14 15:33:05 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Sep 14 15:33:11 2008
Subject: [Harbour] hbvpdf
In-Reply-To: <96F07428-58D5-410E-A266-EFCC6877B606@syenar.hu>
References: <96F07428-58D5-410E-A266-EFCC6877B606@syenar.hu>
Message-ID: <9257026e0809141233p6df94545k3e57ba71af3f489d@mail.gmail.com>

On Sun, Sep 14, 2008 at 8:31 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:
> Hi Lorenzo,
>
> After latest fixes, we seem to have lost bookmark support
> in hbvpdf.
>
> What could be the problem?
>
> [ I can send you a test.pdf I created yesterday, and one
> that I've made now. ]

I'm not a PDF expert, so sending PDFs will not help.

BTW which viewer are you using?

The only difference that I can see about bookmarks is in line 468.
Please try to add -1 like below:
cTemp := CRLF + ltrim(str( aReport[ REPORTOBJ ] + nI - 1)) + " 0 obj" + CRLF + ;

and tell me if your file works again.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sun Sep 14 15:41:09 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 15:41:17 2008
Subject: [Harbour] hbvpdf
In-Reply-To: <9257026e0809141233p6df94545k3e57ba71af3f489d@mail.gmail.com>
References: <96F07428-58D5-410E-A266-EFCC6877B606@syenar.hu>
	<9257026e0809141233p6df94545k3e57ba71af3f489d@mail.gmail.com>
Message-ID: <95824769-7613-472E-A467-7E0609A74BF7@syenar.hu>

Hi Lorenzo,

> I'm not a PDF expert, so sending PDFs will not help.
>
> BTW which viewer are you using?

I did this with Acrobat Reader 9.

> The only difference that I can see about bookmarks is in line 468.
> Please try to add -1 like below:
> cTemp := CRLF + ltrim(str( aReport[ REPORTOBJ ] + nI - 1)) + " 0  
> obj" + CRLF + ;
>
> and tell me if your file works again.

Thanks, good find, that fixes it.

Brgds,
Viktor

From capelsoft at terra.es  Sun Sep 14 15:44:27 2008
From: capelsoft at terra.es (=?iso-8859-1?Q?Jos=E9_Luis_Capel_-?=)
Date: Sun Sep 14 15:44:37 2008
Subject: [Harbour] Wince - Evc4 and GPF
References: <96F07428-58D5-410E-A266-EFCC6877B606@syenar.hu>
	<9257026e0809141233p6df94545k3e57ba71af3f489d@mail.gmail.com>
Message-ID: <E15DEC9961BC47F3B5189FD357545580@pepeluis>

Hi,

This piece of code:

REQUEST HB_GT_WVT
REQUEST HB_GT_WVT_DEFAULT



FUNCTION MAIN()

   LOCAL a,b,c
   LOCAL GetList := {}

   a := "AAAAAAA"
   b := "BBBBBBB"

   CLS

   @ 0,0 SAY "First get with a valid causing GPF " GET a VALID (
LaunchGpf(), .T.)
   @ 1,0 SAY "Second get with a valid causing GPF " GET b VALID (
LaunchGpf(), .T.)
   READ



RETURN NIL


#pragma BEGINDUMP

#include "hbapi.h"

HB_FUNC( LAUNCHGPF )
{

   char * s = NULL;

   (* s)   = 10;
   (* --s) = 20;

   return;

}

#pragma ENDDUMP



in bcc55 shows an error an stops excution whilst in Wince with evc4 not.

It seems than under evc4 execution is not stopped but continues...

Maybe is needed some extra code to handle gpf's ?

Many thanks for your help and work.
Regards,
Jos? Luis Capel

From druzus at acn.waw.pl  Sun Sep 14 15:44:02 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 15:44:42 2008
Subject: [Harbour] Memory buffer overflow
In-Reply-To: <264F1AE2-D878-485F-9917-5218A5837C77@syenar.hu>
References: <264F1AE2-D878-485F-9917-5218A5837C77@syenar.hu>
Message-ID: <20080914194402.GA26269@34-mo7-2.acn.waw.pl>

On Sun, 14 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Can easily be that I'm doing something wrong, but I'm getting this:
> ---
> C:\harbour\bin>mttest07.exe
> Harbour 1.1.0dev Intl. (Rev. 9387)
> Main start
> Starting threads: <1><2><3><4><5>
> Sending jobs...
> Unrecoverable error 9022: Memory buffer overflow
> Called from HB_MUTEXNOTIFY(0)
> Called from MAIN(45) in mttest07.prg

It's my fault. Stupid typo in fm.c with memory statistic enabled - mutex was
set after realloc() not before so when realloc() returned new block and other
thread was linking or unlinking neighbor block then it was possible to corrupt
linked list of memory block. I'll commit fix in a while.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Sun Sep 14 15:44:39 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Sep 14 15:44:48 2008
Subject: [Harbour] Release 1.0.1 #2
In-Reply-To: <E5B08CD0-AEC8-49ED-9F57-E62BBCDC0527@syenar.hu>
References: <E5B08CD0-AEC8-49ED-9F57-E62BBCDC0527@syenar.hu>
Message-ID: <9257026e0809141244m158b7cedx9a9a69749f85fea4@mail.gmail.com>

On Sun, Sep 14, 2008 at 8:34 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Thanks Lorenzo, I've updated the list.

I've also successfully built it under OpenSuse 10.3.

The only "problem" I found was the installation path of postgresql's
includes which is /usr/include/pgsql.

In contrib/hbpgsql/Makefile we already have /usr/include for RH and
/usr/include/postgresql for Debian so I think we should add
/usr/include/pgsql for OpenSuse ( or remove all ).

BTW my tests are:

- set the env
- install dev packages for X11, gd, pgsql
- ./make_gnu.sh 1>out1 2>out2
- checking out1 and out2 to see if there are errors or warnings
- ./make:gnu.sh install to create dynamic libs
- run hbtest /all
- run hbrun and type ? version()

best regards,
Lorenzo
From druzus at acn.waw.pl  Sun Sep 14 15:49:36 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 15:50:16 2008
Subject: [Harbour] ChangeLog 2008-09-13 18:49 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <2BD86327-79AD-4196-AACD-E26EA3635262@syenar.hu>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
	<2BD86327-79AD-4196-AACD-E26EA3635262@syenar.hu>
Message-ID: <20080914194936.GB26269@34-mo7-2.acn.waw.pl>

On Sun, 14 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Shouldn't we increase the HB_PCODE_VER* values?

We have to numbers: HB_PCODE_VER and HB_PCODE_VER_MIN.
In this case we should change HB_PCODE_VER only because our HVM still
support older PCODE modules and we want to block executing current
PCODE with older HVMs. Anyhow please do not make it yet. As long
as user will not use THREAD STATIC variables nothing will change
and it's possible that I'll add few new PCODEs ASAP. We just begin
to change devel branch :-)

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Sun Sep 14 15:51:48 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Sep 14 15:51:55 2008
Subject: [Harbour] hbvpdf
In-Reply-To: <95824769-7613-472E-A467-7E0609A74BF7@syenar.hu>
References: <96F07428-58D5-410E-A266-EFCC6877B606@syenar.hu>
	<9257026e0809141233p6df94545k3e57ba71af3f489d@mail.gmail.com>
	<95824769-7613-472E-A467-7E0609A74BF7@syenar.hu>
Message-ID: <9257026e0809141251x7c23ab67u441c0592869e9c49@mail.gmail.com>

On Sun, Sep 14, 2008 at 9:41 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Thanks, good find, that fixes it.

Sorry, but there was a commented line above the 468 and the diff was messed.

best regards,
Lorenzo
From druzus at acn.waw.pl  Sun Sep 14 15:58:01 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 15:58:41 2008
Subject: [Harbour] [SPAM] Re: [SPAM] Re: [SPAM] Re: ChangeLog 2008-09-13
	18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <535B6850-16C9-4E51-B7CB-F32CBA1C9547@syenar.hu>
References: <19473468.post@talk.nabble.com>
	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>
	<19474140.post@talk.nabble.com>
	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>
	<19476236.post@talk.nabble.com>
	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>
	<19476839.post@talk.nabble.com> <48CD30F0.8030007@fsgiudice.com>
	<19481725.post@talk.nabble.com>
	<535B6850-16C9-4E51-B7CB-F32CBA1C9547@syenar.hu>
Message-ID: <20080914195801.GC26269@34-mo7-2.acn.waw.pl>

On Sun, 14 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Przemek, how much do you guesstimate the speed loss
> with MT enabled, compared to non-MT?

It strictly depends on used compiler and available MT features.
F.e. with BCC the difference should be quite small because it
has native TLS support and MS-Win has atomic INC/DEC operations.
Please make some test. I'll commit speedtst.prg in a ASAP.
But on some platforms/C compilers the difference can be huge.
Probably in the worst case when it will be necessary to fully
emulate TLS by us you should expect that the performance will
be two/free times worse. Of course we can try to add some hacks
and give higher priority for the main thread stack detecting so
single thread programs will not be effected as much.
Anyhow do not forget that using threads on some platforms
introduce additional dependences so it's necessary to link
some additional libraries and/or different C-RTL. It may
reduce the portability of final binaries (f.e. some MT features
may need newest kernel) and IMHO it's enough reason to keep
single thread version working.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Sep 14 16:03:09 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 16:03:48 2008
Subject: [Harbour] Wince - Evc4 and GPF
In-Reply-To: <E15DEC9961BC47F3B5189FD357545580@pepeluis>
References: <96F07428-58D5-410E-A266-EFCC6877B606@syenar.hu>
	<9257026e0809141233p6df94545k3e57ba71af3f489d@mail.gmail.com>
	<E15DEC9961BC47F3B5189FD357545580@pepeluis>
Message-ID: <20080914200309.GD26269@34-mo7-2.acn.waw.pl>

On Sun, 14 Sep 2008, Jos? Luis Capel - wrote:

Hi Jose,

> This piece of code:
> REQUEST HB_GT_WVT
> REQUEST HB_GT_WVT_DEFAULT
>
> FUNCTION MAIN()
>   LOCAL a,b,c
>   LOCAL GetList := {}
>   a := "AAAAAAA"
>   b := "BBBBBBB"
>   CLS
>   @ 0,0 SAY "First get with a valid causing GPF " GET a VALID (
> LaunchGpf(), .T.)
>   @ 1,0 SAY "Second get with a valid causing GPF " GET b VALID (
> LaunchGpf(), .T.)
>   READ
> RETURN NIL
> #pragma BEGINDUMP
> #include "hbapi.h"
> HB_FUNC( LAUNCHGPF )
> {
>   char * s = NULL;
>   (* s)   = 10;
>   (* --s) = 20;
>   return;
> }
> #pragma ENDDUMP
> in bcc55 shows an error an stops excution whilst in Wince with evc4 not.
> It seems than under evc4 execution is not stopped but continues...

Look that there is no memory protection in WinCE or at least above
two addresses are not protected. It's hardware/OS dependant behavior.

> Maybe is needed some extra code to handle gpf's ?

probably yes. You can try to generate FPE using division by 0.
Of course if CPU generates exception for such situation and there
is no default OS handle for it.

best regards,
Przemek
From harbour.01 at syenar.hu  Sun Sep 14 16:12:28 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 16:12:37 2008
Subject: [Harbour] Release 1.0.1 #2
In-Reply-To: <9257026e0809141244m158b7cedx9a9a69749f85fea4@mail.gmail.com>
References: <E5B08CD0-AEC8-49ED-9F57-E62BBCDC0527@syenar.hu>
	<9257026e0809141244m158b7cedx9a9a69749f85fea4@mail.gmail.com>
Message-ID: <7EBFBCC6-9B20-40F7-B709-62CCEE4FABFA@syenar.hu>

> On Sun, Sep 14, 2008 at 8:34 PM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
>> Thanks Lorenzo, I've updated the list.
>
> I've also successfully built it under OpenSuse 10.3.
>
> The only "problem" I found was the installation path of postgresql's
> includes which is /usr/include/pgsql.
>
> In contrib/hbpgsql/Makefile we already have /usr/include for RH and
> /usr/include/postgresql for Debian so I think we should add
> /usr/include/pgsql for OpenSuse ( or remove all ).

I'm looking into Makefile in question, and I can see /usr/include/pgsql
on the list (it's the 4th one on the list). Can you check if there is
an libpq-fe.h file in that dir?

Brgds,
Viktor

>
>
> BTW my tests are:
>
> - set the env
> - install dev packages for X11, gd, pgsql
> - ./make_gnu.sh 1>out1 2>out2
> - checking out1 and out2 to see if there are errors or warnings
> - ./make:gnu.sh install to create dynamic libs
> - run hbtest /all
> - run hbrun and type ? version()
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lkrausem at shaw.ca  Sun Sep 14 16:15:41 2008
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Sun Sep 14 16:16:08 2008
Subject: [Harbour] GPF upon app exiting
Message-ID: <48CD70ED.4030609@shaw.ca>

Hi:

Just rebuild a small app I have with SVN 9396 and upon
closing the app I get a gpf that's logged in hb_outl.log
(it happens 3 times, just pasting here the 1st msg):

[BCC 5.5.1, ST]

Application Exception - F:\AplicW\IVA\ivawH.exe
Terminated at: 2008.09.14 13:11:44

    Exception Code:C0000005
    Exception Address:00448DE8
    EAX:00000001  EBX:0059D5E0  ECX:00E1A4E0  EDX:00060CF9
    ESI:00000001  EDI:00152372 EBP:0013FF64
    CS:EIP:001B:00448DE8  SS:ESP:0023:0013FF5C
    DS:0023  ES:0023  FS:003B  GS:0000
    Flags:00010202
    CS:EIP: 8B 70 08 50 E8 37 96 FE FF 59 8B C6 85 C0 75 F0
    SS:ESP: 00000000 00152372 0013FF88 00434787 0059D5E0 0044A8A2 
00000000 004894EC 00152372 00000000 00154048 0013FFB8 004774B7 00400000 
00000000 00152372

    C stack:
    EIP:     EBP:       Frame: OldEBP, RetAddr, Params...
    00448DE8 0013FF64   0013FF88 00434787 0059D5E0 0044A8A2 00000000 
004894EC 00152372 00000000 00154048
    00434787 0013FF88   0013FFB8 004774B7 00400000 00000000 00152372 
00000001 0013BE58 7C90D950 7FFDF000 7FFDF000
    004774B7 0013FFB8   0013FFF0 00000000 004894EC 7C817067 0013BE58 
7C90D950 7FFDF000 00000000 0013FFC8 87539848

Hope the above tells you gurus something useful because it's all Greek 
to me :-)

Regards,

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From druzus at acn.waw.pl  Sun Sep 14 16:15:32 2008
From: druzus at acn.waw.pl (PrzemysÅaw Czerpak)
Date: Sun Sep 14 16:16:12 2008
Subject: [Harbour] 2008-09-14 22:15 UTC+0200 Przemyslaw Czerpak
 (druzus/at/priv.onet.pl)
Message-ID: <20080914201532.434AFBF6AD@34-mo7-2.acn.waw.pl>

2008-09-14 22:15 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbsetup.h
    * accept both settings: HB_FM_STATISTICS and HB_FM_STATISTICS_OFF
      without errors

  * harbour/bin/postinst.sh
    * added small trick to make HBFM lib compilation not  dependent on
      default HB_FM_STATISTIC settings

  * harbour/include/hbvm.h
  * harbour/source/vm/hvm.c
    + added C function hb_vmIsMt()

  * harbour/source/vm/cmdarg.c
    * report MT HVM status when program is executed with //INFO
      parameter

  * harbour/source/vm/fm.c
    ! fixed memory statistic MT protection in hb_xrealloc() operation

  * harbour/config/w32/owatcom.cf
    * use echo instead of echo. for non empty output.

  * harbour/include/hbextern.ch
  * harbour/source/vm/thread.c
    + added .prg function hb_threadTerminateAll() - it sends QUIT request
      to each HVM thread and waits for their termination. Can be executed
      only by main HVM thread.

best regards
Przemek
From lorenzo.fiorini at gmail.com  Sun Sep 14 16:27:20 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Sep 14 16:27:26 2008
Subject: [Harbour] Release 1.0.1 #2
In-Reply-To: <7EBFBCC6-9B20-40F7-B709-62CCEE4FABFA@syenar.hu>
References: <E5B08CD0-AEC8-49ED-9F57-E62BBCDC0527@syenar.hu>
	<9257026e0809141244m158b7cedx9a9a69749f85fea4@mail.gmail.com>
	<7EBFBCC6-9B20-40F7-B709-62CCEE4FABFA@syenar.hu>
Message-ID: <9257026e0809141327n59f636e2o7908603bf9e151f2@mail.gmail.com>

On Sun, Sep 14, 2008 at 10:12 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> I'm looking into Makefile in question, and I can see /usr/include/pgsql
> on the list (it's the 4th one on the list). Can you check if there is
> an libpq-fe.h file in that dir?

Oops, you're right.

I was looking at my custom Makefiles.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sun Sep 14 16:44:53 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 16:44:55 2008
Subject: [Harbour] 2008-09-14 22:36 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c916aa$Blat.v2.6.2$bd7342ce$144891151d38@127.0.0.1>

2008-09-14 22:36 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/common/hbverdsp.c
    + Showing MT status on //BUILD screen.

  * contrib/hbvpdf/hbvpdf.prg
    ! Fix to previous modification (fixing bookmarks).
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 14 16:46:37 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 16:46:41 2008
Subject: [Harbour] 2008-09-14 22:46 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c916aa$Blat.v2.6.2$fb72c928$d885d931a0c@127.0.0.1>

2008-09-14 22:46 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmake/hbmake.prg
    ! Fixed two typos in last commit. Thanks to Bill Robertson.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 14 16:50:08 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 16:50:13 2008
Subject: [Harbour] [1.0] 2008-09-14 22:46 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c916ab$Blat.v2.6.2$791efd24$108cac655e26@127.0.0.1>

; Merging changes to 1.0 branch from trunk r9399.

2008-09-14 22:46 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbmake/hbmake.prg
    ! Fixed two typos in last commit. Thanks to Bill Robertson.

2008-09-14 22:36 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbvpdf/hbvpdf.prg
    ! Fix to previous modification (fixing bookmarks).
--
Brgds,
Viktor

From toninhofwi at yahoo.com.br  Sun Sep 14 17:08:00 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sun Sep 14 17:01:39 2008
Subject: [Harbour] GPF upon app exiting
In-Reply-To: <48CD70ED.4030609@shaw.ca>
References: <48CD70ED.4030609@shaw.ca>
Message-ID: <o4vqc4d3qjih69tovl65van5bj0pcfcrk9@4ax.com>

>Just rebuild a small app I have with SVN 9396 and upon
>closing the app I get a gpf that's logged in hb_outl.log
>(it happens 3 times, just pasting here the 1st msg):

Hi Luis.

I'm sending the same problem yesterday to this list and I'm trying to
debug it. Do you are a codeguard expert to help me please?  I'm
reading a lot of tutorials on the net and none was help me...

TIA, 

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From info at fsgiudice.com  Sun Sep 14 17:30:54 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Sep 14 17:31:06 2008
Subject: [Harbour] ChangeLog	2008-09-13 18:49 UTC+0200 Przemyslaw	Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <19482399.post@talk.nabble.com>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>	<19473468.post@talk.nabble.com>	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>	<19474140.post@talk.nabble.com>	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>	<19476236.post@talk.nabble.com>	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>	<19476839.post@talk.nabble.com>
	<48CD30F0.8030007@fsgiudice.com>	<19481725.post@talk.nabble.com>
	<48CD4623.9080300@fsgiudice.com> <19482399.post@talk.nabble.com>
Message-ID: <48CD828E.6020301@fsgiudice.com>

Hi Pritpal,

Pritpal Bedi ha scritto:
> 
> I included mttest*.prg(s) into my application with changing main() to
> mnttest*()
> and could run all of these successfully. Are you specifying -tWM flag when 
> compiling/linking?
> 

Yes, but results are same. I'm trying now again. I suspect there are 
some errors in my batch files.
Now I will try after last Viktor changes.

Best regards
Francesco
From druzus at acn.waw.pl  Sun Sep 14 17:37:25 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 17:38:04 2008
Subject: [Harbour] 2008-09-14 22:36 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c916aa$Blat.v2.6.2$bd7342ce$144891151d38@127.0.0.1>
References: <01c916aa$Blat.v2.6.2$bd7342ce$144891151d38@127.0.0.1>
Message-ID: <20080914213725.GA2355@34-mo7-2.acn.waw.pl>

On Sun, 14 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> 2008-09-14 22:36 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * source/common/hbverdsp.c
>     + Showing MT status on //BUILD screen.

I'm not sure it's good idea.
It will not show any valid information.
Only HVM have to be compiled with HB_MT_VM flag and it's user
decision which hbvm library should be used. F.e. for GNU make
it will never show (MT) signature because HB_MT_VM macro is
enabled only for hbvmmt library and rest is compiled without it.
BTW it will be good to add such library to non GNU make. It
will resolve the build problems BCC users have now.

best regards,
Przemek
From harbour.01 at syenar.hu  Sun Sep 14 17:43:46 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 17:43:55 2008
Subject: [Harbour] 2008-09-14 22:36 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20080914213725.GA2355@34-mo7-2.acn.waw.pl>
References: <01c916aa$Blat.v2.6.2$bd7342ce$144891151d38@127.0.0.1>
	<20080914213725.GA2355@34-mo7-2.acn.waw.pl>
Message-ID: <D2779921-F0B0-4EC8-B9FF-2A05E2C2CA7F@syenar.hu>

Hi Przemek,

You're right. Is there a way to detect HVM MT-ness
on the C level with function call f.e.?

If not, or it's not right either, I may just remove this.

Anyway it would be pretty good to be able to find out
of a given executable if it's MT or not.

Brdgs,
Viktor

On 2008.09.14., at 23:37, Przemys??aw Czerpak wrote:

> On Sun, 14 Sep 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> 2008-09-14 22:36 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>>  * source/common/hbverdsp.c
>>    + Showing MT status on //BUILD screen.
>
> I'm not sure it's good idea.
> It will not show any valid information.
> Only HVM have to be compiled with HB_MT_VM flag and it's user
> decision which hbvm library should be used. F.e. for GNU make
> it will never show (MT) signature because HB_MT_VM macro is
> enabled only for hbvmmt library and rest is compiled without it.
> BTW it will be good to add such library to non GNU make. It
> will resolve the build problems BCC users have now.
>
> best regards,
> Przemek

From druzus at acn.waw.pl  Sun Sep 14 17:46:03 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 17:46:42 2008
Subject: [Harbour] [SPAM] Re: [SPAM] Re: [SPAM] Re: ChangeLog 2008-09-13
	18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <48CD4623.9080300@fsgiudice.com>
References: <19473468.post@talk.nabble.com>
	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>
	<19474140.post@talk.nabble.com>
	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>
	<19476236.post@talk.nabble.com>
	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>
	<19476839.post@talk.nabble.com> <48CD30F0.8030007@fsgiudice.com>
	<19481725.post@talk.nabble.com> <48CD4623.9080300@fsgiudice.com>
Message-ID: <20080914214603.GA7427@34-mo7-2.acn.waw.pl>

On Sun, 14 Sep 2008, Francesco Saverio Giudice wrote:

Hi Francesco,

> thank you, I got same error here on hbrun.
> Another error is in tests\mt\* samples.
> They built correctly, but running them hb_threadStart() returns NIL

It's default behavior for single thread HVM. hb_threadStart() always
returns NIL in such case. Please try current SVN code and run test
program with //info parameter. It should show in status line:
   .... MT:Off
or
   .... MT:On

so you can recognize if HBVM library was compiled with or without
HB_MT_VM macro.
I hope that we will add to non GNU make system HBVMMT library and
you can chose at link time the one you want to use with your program
and it will not be necessary to set and additional harbour build
switches.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Sep 14 17:49:07 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 17:49:46 2008
Subject: [Harbour] 2008-09-14 22:36 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <D2779921-F0B0-4EC8-B9FF-2A05E2C2CA7F@syenar.hu>
References: <01c916aa$Blat.v2.6.2$bd7342ce$144891151d38@127.0.0.1>
	<20080914213725.GA2355@34-mo7-2.acn.waw.pl>
	<D2779921-F0B0-4EC8-B9FF-2A05E2C2CA7F@syenar.hu>
Message-ID: <20080914214907.GB7427@34-mo7-2.acn.waw.pl>

On Sun, 14 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> You're right. Is there a way to detect HVM MT-ness
> on the C level with function call f.e.?

hb_vmIsMt() but it exists only in HVM so you cannot
use it in compiler only code.

> If not, or it's not right either, I may just remove this.
> Anyway it would be pretty good to be able to find out
> of a given executable if it's MT or not.

We already have such functionality in //info parameter.

best regards,
Przemek
From harbour.01 at syenar.hu  Sun Sep 14 17:53:38 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 17:53:48 2008
Subject: R: [Harbour] where is hbcom.lib?
In-Reply-To: <200809121943.55591.philb@philb.us>
References: <AFB948164110ED43B5EB849E8DEEF03803760C@SRV02.deltain.net>
	<48CA19EA.4060700@mweb.co.za>
	<8438D367-EB32-46BF-99B6-79F08261D116@syenar.hu>
	<200809121943.55591.philb@philb.us>
Message-ID: <295DDEDA-DAF5-4019-9DF6-7C5D1666371D@syenar.hu>

Hi Phil,

[forgot to press Send]

I think it's okay, if something is more than 40K
.zipped, I think we can either exchange it directly
or upload it somewhere.

Brdgs,
Viktor

On 2008.09.13., at 1:43, Phil Barnett wrote:

> On Friday 12 September 2008 04:36:46 am Szak?ts Viktor wrote:
>> Hi Alex,
>>
>> You can send it to me directly if you want,
>> or if you .zip it it will probably be able to go
>> to the list, too. (I think the limit is 100K
>> for the raw message size)
>
> I never bumped it up after the last rebuild.
>
> The default limit in Mailman is 40k. I can bump it up again if you  
> think it's
> a good idea. We haven't been getting much spam. (that makes it  
> through,
> anyway)
>
> -- 
> "Ninety percent of politicians give the other 10 percent a bad  
> name." -- Henry
> Kissinger
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sun Sep 14 17:53:57 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 17:54:06 2008
Subject: [Harbour] ChangeLog 2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080914194936.GB26269@34-mo7-2.acn.waw.pl>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
	<2BD86327-79AD-4196-AACD-E26EA3635262@syenar.hu>
	<20080914194936.GB26269@34-mo7-2.acn.waw.pl>
Message-ID: <0704AC75-833C-4763-B4F6-B8E4A30B169D@syenar.hu>

>
Hi Przemek,

> Hi Viktor,
>
>> Shouldn't we increase the HB_PCODE_VER* values?
>
> We have to numbers: HB_PCODE_VER and HB_PCODE_VER_MIN.
> In this case we should change HB_PCODE_VER only because our HVM still
> support older PCODE modules and we want to block executing current
> PCODE with older HVMs. Anyhow please do not make it yet. As long
> as user will not use THREAD STATIC variables nothing will change
> and it's possible that I'll add few new PCODEs ASAP. We just begin
> to change devel branch :-)

That was my second thought, that we may need it for
other PCODEs as well :) Anyway, do this when you feel
it proper.

Brgds,
Viktor

From info at fsgiudice.com  Sun Sep 14 17:54:10 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Sep 14 17:54:21 2008
Subject: [Harbour] 2008-09-14 19:59 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c91693$Blat.v2.6.2$c0b166a8$1574319106a8@127.0.0.1>
References: <01c91693$Blat.v2.6.2$c0b166a8$1574319106a8@127.0.0.1>
Message-ID: <48CD8802.8050108@fsgiudice.com>

Hi Viktor,

Szak?ts Viktor ha scritto:
> 2008-09-14 19:59 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * make_b32.mak
>     + Now setting 'HB_BUILD_ST = no' will generate an MT build.
>       TODO: Change the default to 'yes' should be the way to go 
>             IMO.
> 
HB_BUILD_ST=no
was the key.
Now tests\mt\* samples works fine!
Thank you.

Best Regards

Francesco

From toninhofwi at yahoo.com.br  Sun Sep 14 18:10:24 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sun Sep 14 18:04:02 2008
Subject: [Harbour] About GPF iwhen app exit
In-Reply-To: <20080914123645.GB6255@34-mo7-2.acn.waw.pl>
References: <fcroc41ji0noc2rvff5865opqrjfvlvsfe@4ax.com>
	<20080914103932.GB6151@34-mo7-2.acn.waw.pl>
	<gv0qc4h7a0sao6n03aj0ij615d1ru4u1u5@4ax.com>
	<20080914123645.GB6255@34-mo7-2.acn.waw.pl>
Message-ID: <rt2rc4d7qpn9d81m2voojku3r8n3hhc01c@4ax.com>

>If possible try to create log for ca.exe with debug information (file names
>and lines). You can try to use the same link switches as for harbour.exe
>and eliminate all calls to strip (if any) or similar tools.

Przemek, maybe the problem is in FWH that have C code without DEBUG
information.

My application have full debug information. All C and PRG codes, but
the log are the same. I have posted a message in fivewin forum to see
if Antonio have any answer.

Thanks and best regards,

Toninho

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From harbour.01 at syenar.hu  Sun Sep 14 18:07:38 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 18:07:48 2008
Subject: [Harbour] 2008-09-14 22:36 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20080914213725.GA2355@34-mo7-2.acn.waw.pl>
References: <01c916aa$Blat.v2.6.2$bd7342ce$144891151d38@127.0.0.1>
	<20080914213725.GA2355@34-mo7-2.acn.waw.pl>
Message-ID: <433BCBB0-9D89-47DE-ADD3-552D441DBDDB@syenar.hu>

Hi Przemek,

Hm, one more thought... why is it good that in
GNU make we have two different VMs in parallel?

I can see that it's better to decide at link time
than build time, but it introduces a brand new concept
(multiple core libs), and all places have to be
extended to be prepared for this situation. I hope
somebody will want to make this for non-GNU make,
but it won't be me. I will also make the already
slow build process even slower, plus at the end
of the day, we may end up with 4 passes of compilation
for VM, DLL/non-DLL * MT/non-MT, two VM libs and two
harbour.dlls. That's IMO a mess. That's exactly why
I was trying to suggest to have this as a global
switch set to ON for all platform where this is
reasonable. This way I see too many options, too
complicate to build, use and maintain.

Brgds,
Viktor

On 2008.09.14., at 23:37, Przemys??aw Czerpak wrote:

> On Sun, 14 Sep 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> 2008-09-14 22:36 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>>  * source/common/hbverdsp.c
>>    + Showing MT status on //BUILD screen.
>
> I'm not sure it's good idea.
> It will not show any valid information.
> Only HVM have to be compiled with HB_MT_VM flag and it's user
> decision which hbvm library should be used. F.e. for GNU make
> it will never show (MT) signature because HB_MT_VM macro is
> enabled only for hbvmmt library and rest is compiled without it.
> BTW it will be good to add such library to non GNU make. It
> will resolve the build problems BCC users have now.
>
> best regards,
> Przemek

From harbour.01 at syenar.hu  Sun Sep 14 18:21:00 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 18:21:09 2008
Subject: [Harbour] [SPAM] Re: [SPAM] Re: [SPAM] Re: ChangeLog 2008-09-13
	18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <20080914214603.GA7427@34-mo7-2.acn.waw.pl>
References: <19473468.post@talk.nabble.com>
	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>
	<19474140.post@talk.nabble.com>
	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>
	<19476236.post@talk.nabble.com>
	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>
	<19476839.post@talk.nabble.com> <48CD30F0.8030007@fsgiudice.com>
	<19481725.post@talk.nabble.com> <48CD4623.9080300@fsgiudice.com>
	<20080914214603.GA7427@34-mo7-2.acn.waw.pl>
Message-ID: <FF81E920-630A-4BB4-9363-F83F9DFFFADE@syenar.hu>

> so you can recognize if HBVM library was compiled with or without
> HB_MT_VM macro.
> I hope that we will add to non GNU make system HBVMMT library and
> you can chose at link time the one you want to use with your program
> and it will not be necessary to set and additional harbour build
> switches.

I reckon this simply won't work for non-GNU ever.

All bld*.bat will have to be modified to look for either
vm or vmmt, which will make them overcomplicated, new
logic and build settings will have to be fed for all of
them (MT or non-MT), and the benefits are, well, not much
above zero, as BCC is expected to have very good MT performance,
I guess MSVS can be made a good performer too, I don't
know about MinGW, but being an important compiler on the
same platform, I just can guess it should eventually work
well either.

If someone needs top notch maximum ST performance,
Harbour can be rebuilt anytime with the proper options
anyway. I'm not sure how many ppl will want to do this
is real life though, especially on the mid-term.

Is it just me not getting something here?

Brgds,
Viktor

From druzus at acn.waw.pl  Sun Sep 14 18:36:29 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 18:37:08 2008
Subject: [Harbour] 2008-09-14 22:36 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <433BCBB0-9D89-47DE-ADD3-552D441DBDDB@syenar.hu>
References: <01c916aa$Blat.v2.6.2$bd7342ce$144891151d38@127.0.0.1>
	<20080914213725.GA2355@34-mo7-2.acn.waw.pl>
	<433BCBB0-9D89-47DE-ADD3-552D441DBDDB@syenar.hu>
Message-ID: <20080914223628.GC7427@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Hm, one more thought... why is it good that in
> GNU make we have two different VMs in parallel?

Because users have single binaries and can create
any application he like. MT or ST without Harbour
core code recompilation.

> I can see that it's better to decide at link time
> than build time, but it introduces a brand new concept
> (multiple core libs), and all places have to be
> extended to be prepared for this situation. I hope

It's not new because you already have such situation
with C-RTL. Most of compiler we are using have different
C-RTLs for MT and ST mode and you have to chose the one
which is valid for your code and 3-rd party libraries
you are using.
I do not see any thing difficult for users in having
different libraries with similar functionality and
choosing the optimal one for given job.

> somebody will want to make this for non-GNU make,
> but it won't be me. I will also make the already
> slow build process even slower, plus at the end
> of the day, we may end up with 4 passes of compilation
> for VM, DLL/non-DLL * MT/non-MT, two VM libs and two
> harbour.dlls. That's IMO a mess. That's exactly why

Final Harbour users do not used to recompile Harbour
core code often. They want to only use it in the
optimal for them way.
The build time will be problem for us but not
such big. HVM recompilation takes only few seconds
on my new machine.

> I was trying to suggest to have this as a global
> switch set to ON for all platform where this is
> reasonable.

I do not know any platform where it may not
cause troubles for someone. Mostly due to interaction
with different C-RTLs and 3-rd party code.

> This way I see too many options, too
> complicate to build, use and maintain.

Not building is out main goal here but using
Harbour binaries by final users. If we do not
give them flexible link time solution then yes
we will force building customized Harbour version
by each user and we will have much more problems/
questions, etc... That's my opinion.

best regards,
Przemek
From harbour.01 at syenar.hu  Sun Sep 14 19:01:57 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 19:02:08 2008
Subject: [Harbour] 2008-09-14 22:36 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20080914223628.GC7427@34-mo7-2.acn.waw.pl>
References: <01c916aa$Blat.v2.6.2$bd7342ce$144891151d38@127.0.0.1>
	<20080914213725.GA2355@34-mo7-2.acn.waw.pl>
	<433BCBB0-9D89-47DE-ADD3-552D441DBDDB@syenar.hu>
	<20080914223628.GC7427@34-mo7-2.acn.waw.pl>
Message-ID: <86C12BDC-88E1-4DE7-B8A9-A6ACE66E1AA7@syenar.hu>

>> I was trying to suggest to have this as a global
>> switch set to ON for all platform where this is
>> reasonable.
>
> I do not know any platform where it may not
> cause troubles for someone. Mostly due to interaction
> with different C-RTLs and 3-rd party code.

(*)

>> This way I see too many options, too
>> complicate to build, use and maintain.
>
> Not building is out main goal here but using
> Harbour binaries by final users. If we do not
> give them flexible link time solution then yes
> we will force building customized Harbour version
> by each user and we will have much more problems/
> questions, etc... That's my opinion.

Having a 2^n number of .dll and .lib combinations
pre-built may be a very nice option, but then someone
will have to start dealing with building a Harbour
which takes a proportionally larger time to build,
proportionally larger space to consume, upload and
download and constantly test, and a confused user on
the other side, not having a single clue about which
of those numerous pre-built libs and dlls to use at
any given situation. [ I don't even want to think
about what would happen if we would have unicode and
non-unicode versions, too, which would instantly
create 4 .dlls and two sets of .lib + 4 hbvm.libs,
named hbvm, hbvmu, hbvmmt, hbvmmtu. Far from ideal,
I'd think. ]

For an excellent bad example we can check MSVS libs.
For a good example we can check C# libs, where such
confusion is completely sorted out on the user level.

I'd think Harbour is closer to C# as a language or
concept, and we should try to replicate the cleanness
and simplicity of it rather than going deep into the
mess like in C. IMO that is.

(*) It would IMO be much better (regardless of the
above in fact) if could define those areas where MT
is not an option, and present some possible solutions
to deal with these problems.Because right now for me
for example, the only disadvantage I can see is _some_
speed drop (which I honestly couldn't care less given
that MT is right there when I may need it), but still
cannot oversee which are those situations when an MT
Harbour VM can hurt my program, given that I'm only
using the main thread only.

As for 3-rd party code, they will need to revise,
recompile their code for 1.1 for some other aspect, too,
so given the information, they may even revise it
MT-wise at the same time.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 14 19:04:11 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 19:04:11 2008
Subject: [Harbour] 2008-09-15 01:00 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c916be$Blat.v2.6.2$331d024a$1290139c6ede@127.0.0.1>

2008-09-15 01:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/common/hbverdsp.c
    * Undone prev change.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Sun Sep 14 19:06:16 2008
From: druzus at acn.waw.pl (=?iso-8859-2?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 19:06:56 2008
Subject: [Harbour] [SPAM] Re: [SPAM] Re: [SPAM] Re: ChangeLog
	2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <FF81E920-630A-4BB4-9363-F83F9DFFFADE@syenar.hu>
References: <19474140.post@talk.nabble.com>
	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>
	<19476236.post@talk.nabble.com>
	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>
	<19476839.post@talk.nabble.com> <48CD30F0.8030007@fsgiudice.com>
	<19481725.post@talk.nabble.com> <48CD4623.9080300@fsgiudice.com>
	<20080914214603.GA7427@34-mo7-2.acn.waw.pl>
	<FF81E920-630A-4BB4-9363-F83F9DFFFADE@syenar.hu>
Message-ID: <20080914230616.GD7427@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I reckon this simply won't work for non-GNU ever.
> All bld*.bat will have to be modified to look for either
> vm or vmmt, which will make them overcomplicated, new
> logic and build settings will have to be fed for all of
> them (MT or non-MT), and the benefits are, well, not much
> above zero, as BCC is expected to have very good MT performance,

What problem can you see with bld*.bat. If we cannot easy
add -mt switch for them then we can simply create bldmt*.bat
For me it's not more complicated for users then using any
other 3-rd party or own library.

> I guess MSVS can be made a good performer too, I don't
> know about MinGW, but being an important compiler on the
> same platform, I just can guess it should eventually work
> well either.

Do not forget about dependences. I cannot say to much
about real problems in Windows world yet. We will know
sth more in few months.

> If someone needs top notch maximum ST performance,
> Harbour can be rebuilt anytime with the proper options
> anyway. I'm not sure how many ppl will want to do this
> is real life though, especially on the mid-term.

I think that it's very important now to have two versions
so users can simply find where the problem is.
And I would like to see real speed test results of BCC
application in MT and ST mode. I'll commit test program
ASAP.

best regards,
Przemek
From dmacias at mail.udg.mx  Sun Sep 14 19:43:43 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sun Sep 14 19:43:49 2008
Subject: [Harbour] =?windows-1252?q?PrzemysL=27=82aw?=
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48CDA1AF.50208@mail.udg.mx>

Przemek:

Some (all?) of your recent messages appear as "PrzemysL'?aw Czerpak"

It dificult to search messages for "Przemyslaw" and force to use "Przemys"

Can you fix it if it is wrong ?

David Macias


From harbour.01 at syenar.hu  Sun Sep 14 19:44:32 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 19:44:43 2008
Subject: [Harbour] [SPAM] Re: [SPAM] Re: [SPAM] Re: ChangeLog 2008-09-13
	18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <20080914230616.GD7427@34-mo7-2.acn.waw.pl>
References: <19474140.post@talk.nabble.com>
	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>
	<19476236.post@talk.nabble.com>
	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>
	<19476839.post@talk.nabble.com> <48CD30F0.8030007@fsgiudice.com>
	<19481725.post@talk.nabble.com> <48CD4623.9080300@fsgiudice.com>
	<20080914214603.GA7427@34-mo7-2.acn.waw.pl>
	<FF81E920-630A-4BB4-9363-F83F9DFFFADE@syenar.hu>
	<20080914230616.GD7427@34-mo7-2.acn.waw.pl>
Message-ID: <048342C7-C482-4414-9609-E4A53902BA3D@syenar.hu>

>>
Hi Przemek,

>> I reckon this simply won't work for non-GNU ever.
>> All bld*.bat will have to be modified to look for either
>> vm or vmmt, which will make them overcomplicated, new
>> logic and build settings will have to be fed for all of
>> them (MT or non-MT), and the benefits are, well, not much
>> above zero, as BCC is expected to have very good MT performance,
>
> What problem can you see with bld*.bat. If we cannot easy
> add -mt switch for them then we can simply create bldmt*.bat
> For me it's not more complicated for users then using any
> other 3-rd party or own library.

Then we should add a bld_b32mt.bat and bld_vcmt.bat,
for _ALL_ existing bld_*.bats laying around in the tree,
and maintain those.

It's already a burden to maintain them, but after the
above duplication it would just be totally horrible.

Overall I think MT is a very important Harbour feature
not a bolt-on extra. As soon as _any_ of our contribs
or even the core itself starts to rely on threads
(perfectly possible IMO), there is an additional level
of complication where some misc core features will or will
not work depending on MT-ness. Some thread dependent
contribs will work with MT-only, some other may (?)
explicitly need ST (I hope not), some may not care. And
there is the user sitting in the middle of this mess and
trying to build a final application... Good luck.

I see this will "always" be a problem to some extent,
because we still support DOS, but DOS is the past and
I already wonder why are we maintaing it. But, it is the
exception, and will eventually die out anyway, that's pretty
much easy to predict. New platforms all support MT, new
CPUs more and more support MT. Modern languages all
support MT (Java, C#, even XBase++). World is going towards
MT. [ Maybe some rare embedded CPUs and systems-on-a-chip
might not support it - I don't know -, but these are the
rare exceptions and Harbour is not targeting those really. ]

>> I guess MSVS can be made a good performer too, I don't
>> know about MinGW, but being an important compiler on the
>> same platform, I just can guess it should eventually work
>> well either.
>
> Do not forget about dependences. I cannot say to much
> about real problems in Windows world yet. We will know
> sth more in few months.

Okay. I'm just trying to build something using MSVC.

Update: It went fine just by using -DHB_MT_VM. hbtest
has some extra failures (in BCC 5.82 these are fine):
---
! 3078 MAIN_FILE(135)  TESTFIER( FClose( fhnd ) )
        Result: "E: 0      R: .T."
      Expected: "E: 6      R: .F."
! 3079 MAIN_FILE(136)  TESTFIER( FErase( "NOT_HERE.$$$" ) )
        Result: "E: 0      R: -1"
      Expected: "E: 2      R: -1"
! 3081 MAIN_FILE(138)  TESTFIER( FErase( "NOT_HERE.$$$" ) )
        Result: "E: 0      R: -1"
      Expected: "E: 2      R: -1"
! 3082 MAIN_FILE(139)  TESTFIER( FRename( "NOT_HERE.$$$", "A" )
        Result: "E: 0      R: -1"
      Expected: "E: 2      R: -1"
! 3134 MAIN_FILE(206)  TESTFIER( FClose( fhnd ) )
        Result: "E: 0      R: .T."
      Expected: "E: 6      R: .F."
! 3135 MAIN_FILE(207)  TESTFIER( FErase( "NOT_HERE.$$$" ) )
        Result: "E: 0      R: -1"
      Expected: "E: 2      R: -1"
! 3137 MAIN_FILE(209)  TESTFIER( FErase( "NOT_HERE.$$$" ) )
        Result: "E: 0      R: -1"
      Expected: "E: 2      R: -1"
! 3138 MAIN_FILE(210)  TESTFIER( FRename( "NOT_HERE.$$$", "A" )
        Result: "E: 0      R: -1"
      Expected: "E: 2      R: -1"
! 3139 MAIN_FILE(212)  TESTFIER( File( cFileName ) )
        Result: "E: 0      R: .T."
      Expected: "E: 2      R: .T."
! 3140 MAIN_FILE(213)  TESTFIER( File( "NOT_HERE.$$$" ) )
        Result: "E: 0      R: .F."
      Expected: "E: 2      R: .F."
---

>> If someone needs top notch maximum ST performance,
>> Harbour can be rebuilt anytime with the proper options
>> anyway. I'm not sure how many ppl will want to do this
>> is real life though, especially on the mid-term.
>
> I think that it's very important now to have two versions
> so users can simply find where the problem is.
> And I would like to see real speed test results of BCC
> application in MT and ST mode. I'll commit test program
> ASAP.

Okay.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 14 19:47:03 2008
From: harbour.01 at syenar.hu (=?WINDOWS-1252?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 19:47:15 2008
Subject: =?WINDOWS-1252?Q?Re:_[Harbour]_PrzemysL'=82aw?=
In-Reply-To: <48CDA1AF.50208@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CDA1AF.50208@mail.udg.mx>
Message-ID: <9DC3D384-6CEC-4B08-B00E-4621F1182AA6@syenar.hu>

I can confirm. Looks like if it were a Unicode encoding slipped in.

On 2008.09.15., at 1:43, David Arturo Macias Corona wrote:

> Przemek:
>
> Some (all?) of your recent messages appear as "PrzemysL'?aw Czerpak"
>
> It dificult to search messages for "Przemyslaw" and force to use  
> "Przemys"
>
> Can you fix it if it is wrong ?
>
> David Macias
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sun Sep 14 19:51:33 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 19:51:42 2008
Subject: [Harbour] [SPAM] Re: [SPAM] Re: [SPAM] Re: ChangeLog 2008-09-13
	18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <048342C7-C482-4414-9609-E4A53902BA3D@syenar.hu>
References: <19474140.post@talk.nabble.com>
	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>
	<19476236.post@talk.nabble.com>
	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>
	<19476839.post@talk.nabble.com> <48CD30F0.8030007@fsgiudice.com>
	<19481725.post@talk.nabble.com> <48CD4623.9080300@fsgiudice.com>
	<20080914214603.GA7427@34-mo7-2.acn.waw.pl>
	<FF81E920-630A-4BB4-9363-F83F9DFFFADE@syenar.hu>
	<20080914230616.GD7427@34-mo7-2.acn.waw.pl>
	<048342C7-C482-4414-9609-E4A53902BA3D@syenar.hu>
Message-ID: <E7B01BF2-E4D8-427B-9EA4-7CD133C11E7A@syenar.hu>

BTW.

There is a feature in MSVC and maybe in other C compilers too,
where it's possible to force/request linkage of certain libraries
from the .c source itself. With some sort #pragmas.

If this could be exploited in some proper ways, it could help
solving lots of lib linkage problems, where we currently need
to sync these things manually, and there is almast always
something wrong or missing, outdated, forgotten.

Brgds,
Viktor

On 2008.09.15., at 1:44, Szak?ts Viktor wrote:

>>>
> Hi Przemek,
>
>>> I reckon this simply won't work for non-GNU ever.
>>> All bld*.bat will have to be modified to look for either
>>> vm or vmmt, which will make them overcomplicated, new
>>> logic and build settings will have to be fed for all of
>>> them (MT or non-MT), and the benefits are, well, not much
>>> above zero, as BCC is expected to have very good MT performance,
>>
>> What problem can you see with bld*.bat. If we cannot easy
>> add -mt switch for them then we can simply create bldmt*.bat
>> For me it's not more complicated for users then using any
>> other 3-rd party or own library.
>
> Then we should add a bld_b32mt.bat and bld_vcmt.bat,
> for _ALL_ existing bld_*.bats laying around in the tree,
> and maintain those.
>
> It's already a burden to maintain them, but after the
> above duplication it would just be totally horrible.
>
> Overall I think MT is a very important Harbour feature
> not a bolt-on extra. As soon as _any_ of our contribs
> or even the core itself starts to rely on threads
> (perfectly possible IMO), there is an additional level
> of complication where some misc core features will or will
> not work depending on MT-ness. Some thread dependent
> contribs will work with MT-only, some other may (?)
> explicitly need ST (I hope not), some may not care. And
> there is the user sitting in the middle of this mess and
> trying to build a final application... Good luck.
>
> I see this will "always" be a problem to some extent,
> because we still support DOS, but DOS is the past and
> I already wonder why are we maintaing it. But, it is the
> exception, and will eventually die out anyway, that's pretty
> much easy to predict. New platforms all support MT, new
> CPUs more and more support MT. Modern languages all
> support MT (Java, C#, even XBase++). World is going towards
> MT. [ Maybe some rare embedded CPUs and systems-on-a-chip
> might not support it - I don't know -, but these are the
> rare exceptions and Harbour is not targeting those really. ]
>
>>> I guess MSVS can be made a good performer too, I don't
>>> know about MinGW, but being an important compiler on the
>>> same platform, I just can guess it should eventually work
>>> well either.
>>
>> Do not forget about dependences. I cannot say to much
>> about real problems in Windows world yet. We will know
>> sth more in few months.
>
> Okay. I'm just trying to build something using MSVC.
>
> Update: It went fine just by using -DHB_MT_VM. hbtest
> has some extra failures (in BCC 5.82 these are fine):
> ---
> ! 3078 MAIN_FILE(135)  TESTFIER( FClose( fhnd ) )
>       Result: "E: 0      R: .T."
>     Expected: "E: 6      R: .F."
> ! 3079 MAIN_FILE(136)  TESTFIER( FErase( "NOT_HERE.$$$" ) )
>       Result: "E: 0      R: -1"
>     Expected: "E: 2      R: -1"
> ! 3081 MAIN_FILE(138)  TESTFIER( FErase( "NOT_HERE.$$$" ) )
>       Result: "E: 0      R: -1"
>     Expected: "E: 2      R: -1"
> ! 3082 MAIN_FILE(139)  TESTFIER( FRename( "NOT_HERE.$$$", "A" )
>       Result: "E: 0      R: -1"
>     Expected: "E: 2      R: -1"
> ! 3134 MAIN_FILE(206)  TESTFIER( FClose( fhnd ) )
>       Result: "E: 0      R: .T."
>     Expected: "E: 6      R: .F."
> ! 3135 MAIN_FILE(207)  TESTFIER( FErase( "NOT_HERE.$$$" ) )
>       Result: "E: 0      R: -1"
>     Expected: "E: 2      R: -1"
> ! 3137 MAIN_FILE(209)  TESTFIER( FErase( "NOT_HERE.$$$" ) )
>       Result: "E: 0      R: -1"
>     Expected: "E: 2      R: -1"
> ! 3138 MAIN_FILE(210)  TESTFIER( FRename( "NOT_HERE.$$$", "A" )
>       Result: "E: 0      R: -1"
>     Expected: "E: 2      R: -1"
> ! 3139 MAIN_FILE(212)  TESTFIER( File( cFileName ) )
>       Result: "E: 0      R: .T."
>     Expected: "E: 2      R: .T."
> ! 3140 MAIN_FILE(213)  TESTFIER( File( "NOT_HERE.$$$" ) )
>       Result: "E: 0      R: .F."
>     Expected: "E: 2      R: .F."
> ---
>
>>> If someone needs top notch maximum ST performance,
>>> Harbour can be rebuilt anytime with the proper options
>>> anyway. I'm not sure how many ppl will want to do this
>>> is real life though, especially on the mid-term.
>>
>> I think that it's very important now to have two versions
>> so users can simply find where the problem is.
>> And I would like to see real speed test results of BCC
>> application in MT and ST mode. I'll commit test program
>> ASAP.
>
> Okay.
>
> Brgds,
> Viktor
>

From dmacias at mail.udg.mx  Sun Sep 14 19:59:14 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sun Sep 14 19:59:20 2008
Subject: [Harbour] =?windows-1252?q?PrzemysL=27=82aw?=
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48CDA552.1020009@mail.udg.mx>

Przemek:

 >The build time will be problem for us but not
 >such big. HVM recompilation takes only few seconds
 >on my new machine.

Congrats for your new machine. What is it ?

The next are times for recent Harbour 1.0.0 builds
They can serve as reference for other people

WinXPP SP2, BCC551
------------------
Notebook Acer (Nov 2007) Intel Core2Duo T7300 2.0 Ghz, 2 Gb Ram
Harbour: 53+35 seconds (core+contribs)
xHarbour: 149 seconds (include MT)

eCS 1.2MR, gcc 3.3.5
------------------
Desktop (Aug 2003) AMD Athlon 2200+ 2.0 Ghz, 1 Gb Ram
Harbour: 38 minutes
xHarbour: 40 minutes (without MT)

Linux Mandriva 2008.1, gcc 4.x
------------------------------
Notebook Acer (Nov 2007) Intel Core2Duo T7300 2.0 Ghz, 2 Gb Ram
Harbour: 56 seconds
xHarbour: 80 seconds (include MT)

My next target is desktop Intel Core2Duo E8200 2.66Ghz 1333Mhz 6MB L2 :-)

David Macias


From harbour.01 at syenar.hu  Sun Sep 14 19:59:37 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 14 19:59:50 2008
Subject: [Harbour] MT and codepage
Message-ID: <C2F43D7C-09FB-4308-A62B-C8450C77553E@syenar.hu>

Hi Przemek and all,

In MT built Harbour, the box drawing chars are different from those
in ST builds. Easy to spot with BCC 5.82 and MSVS 2008 (C mode).

[ The font is ugly on both screen because I'm using Consolas on XP,
the point here is the difference not the actual wrongly shown chars. ]

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: nonmt.png
Type: image/png
Size: 12186 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080915/81d46da1/nonmt-0001.png
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mt.png
Type: image/png
Size: 10859 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080915/81d46da1/mt-0001.png
From dmacias at mail.udg.mx  Sun Sep 14 20:12:09 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sun Sep 14 20:12:15 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48CDA859.5050006@mail.udg.mx>

Przemek:

 >Can you make OS2 build test with current devel branch (1.1. in trunk)?
 >It's highly possible that OS2 build is broken by last modifications
 >because I was not even able to verify the modifications by simple
 >compilation.

First of all thanks for your great work

While reading your big message which reflect the wide of your work I was 
thinking about to look for my next "break to rest" time to test it under 
OS/2

At first comment I am not sure it will work but I hope
xHarbour does not build MT in OS/2 perhaps for specific reasons

David Macias

From bedipritpal at hotmail.com  Sun Sep 14 20:48:29 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun Sep 14 20:48:35 2008
Subject: [Harbour] HBWHAT - Proposed Restructuring
Message-ID: <19485900.post@talk.nabble.com>


Hello Everybody

Here is a proposal, as dicussed in the separate thread,
to prefix functions as follows:

WINAPI functions with VWN_ 
   HB_FUNC( TEXTOUT )=> HB_FUNC( VWN_TEXTOUT )

WHAT specific functions with WHT_
   CreateWindow() => WHT_CreateWindow()

These changes will allow us to use any other 3rd party
WINAPI library alongwith HBWHAT and will be maintained
and enhanced by me and all others who are using it
on day-to-day basis.

The side effect will be : you will have to change your sources
accordingly OR you may need to include a .CH at the top of
PRGs exploiting these functions.

Before I jump to restructure HBWHAT, I need group consent.
I propose these changes in the trunk. 

Please let me know when I should start working on that.
I would like if no changes are introduced by anybody until I finish.

Regards
Pritpal Bedi




-- 
View this message in context: http://www.nabble.com/HBWHAT---Proposed-Restructuring-tp19485900p19485900.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Sun Sep 14 21:11:04 2008
From: druzus at acn.waw.pl (=?utf-8?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 21:11:44 2008
Subject: [Harbour] =?utf-8?Q?Przemys=C5=82aw?=
In-Reply-To: <48CDA1AF.50208@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CDA1AF.50208@mail.udg.mx>
Message-ID: <20080915011104.GA22169@34-mo7-2.acn.waw.pl>

On Sun, 14 Sep 2008, David Arturo Macias Corona wrote:

Hi David,

> Przemek:
> Some (all?) of your recent messages appear as "PrzemysL'?aw Czerpak"
> It dificult to search messages for "Przemyslaw" and force to use "Przemys"
> Can you fix it if it is wrong ?

Yes, it was wrong. I migrated to new system with my old mutt settings
and haven't updated charser encoding.

Now I'm setting message with default charset.
If it will not work correctly then I'll force
valid one.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Sep 14 21:16:08 2008
From: druzus at acn.waw.pl (=?utf-8?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 21:16:46 2008
Subject: [Harbour] =?utf-8?Q?Przemys=C5=82aw?=
In-Reply-To: <20080915011104.GA22169@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CDA1AF.50208@mail.udg.mx>
	<20080915011104.GA22169@34-mo7-2.acn.waw.pl>
Message-ID: <20080915011608.GA26782@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Przemys?aw Czerpak wrote:
> > Some (all?) of your recent messages appear as "PrzemysL'?aw Czerpak"
> > It dificult to search messages for "Przemyslaw" and force to use "Przemys"
> > Can you fix it if it is wrong ?
> Yes, it was wrong. I migrated to new system with my old mutt settings
> and haven't updated charser encoding.
> Now I'm setting message with default charset.
> If it will not work correctly then I'll force
> valid one.

It wasn't. Now should be correct.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Sep 14 21:21:13 2008
From: druzus at acn.waw.pl (=?utf-8?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 21:21:52 2008
Subject: [Harbour] MT and codepage
In-Reply-To: <C2F43D7C-09FB-4308-A62B-C8450C77553E@syenar.hu>
References: <C2F43D7C-09FB-4308-A62B-C8450C77553E@syenar.hu>
Message-ID: <20080915012113.GB26782@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> In MT built Harbour, the box drawing chars are different from those
> in ST builds. Easy to spot with BCC 5.82 and MSVS 2008 (C mode).
> [ The font is ugly on both screen because I'm using Consolas on XP,
> the point here is the difference not the actual wrongly shown chars. ]

I have no idea why. Maybe BCC change some default console settings?
There is no difference in GT code for MT and ST mode.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Sep 14 21:28:30 2008
From: druzus at acn.waw.pl (=?utf-8?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 21:29:09 2008
Subject: [Harbour] [SPAM] Re: [SPAM] Re: [SPAM] Re: ChangeLog
	2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <E7B01BF2-E4D8-427B-9EA4-7CD133C11E7A@syenar.hu>
References: <20080914012539.GC24595@34-mo7-2.acn.waw.pl>
	<19476839.post@talk.nabble.com> <48CD30F0.8030007@fsgiudice.com>
	<19481725.post@talk.nabble.com> <48CD4623.9080300@fsgiudice.com>
	<20080914214603.GA7427@34-mo7-2.acn.waw.pl>
	<FF81E920-630A-4BB4-9363-F83F9DFFFADE@syenar.hu>
	<20080914230616.GD7427@34-mo7-2.acn.waw.pl>
	<048342C7-C482-4414-9609-E4A53902BA3D@syenar.hu>
	<E7B01BF2-E4D8-427B-9EA4-7CD133C11E7A@syenar.hu>
Message-ID: <20080915012830.GC26782@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> There is a feature in MSVC and maybe in other C compilers too,
> where it's possible to force/request linkage of certain libraries
> from the .c source itself. With some sort #pragmas.
> If this could be exploited in some proper ways, it could help
> solving lots of lib linkage problems, where we currently need
> to sync these things manually, and there is almast always
> something wrong or missing, outdated, forgotten.

It's very good idea. If possible try to force for BCC builds
cw32mt inside HVM when HB_MT_VM macro is set. If it will work
then we can add similar switches also for MSVC.

best regards,
Przemek
From toninhofwi at yahoo.com.br  Sun Sep 14 21:55:37 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sun Sep 14 21:49:15 2008
Subject: [Harbour] Przemys?aw
In-Reply-To: <20080915011608.GA26782@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CDA1AF.50208@mail.udg.mx>
	<20080915011104.GA22169@34-mo7-2.acn.waw.pl>
	<20080915011608.GA26782@34-mo7-2.acn.waw.pl>
Message-ID: <d3grc45hd40jnh4r3cmeogh1lcimrcf9jj@4ax.com>

>It wasn't. Now should be correct.

Hi Przemek, now it is Przemys?aw

Regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From druzus at acn.waw.pl  Sun Sep 14 21:54:26 2008
From: druzus at acn.waw.pl (=?utf-8?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 21:55:05 2008
Subject: [Harbour] [SPAM] Re: [SPAM] Re: [SPAM] Re: ChangeLog
	2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <048342C7-C482-4414-9609-E4A53902BA3D@syenar.hu>
References: <19476236.post@talk.nabble.com>
	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>
	<19476839.post@talk.nabble.com> <48CD30F0.8030007@fsgiudice.com>
	<19481725.post@talk.nabble.com> <48CD4623.9080300@fsgiudice.com>
	<20080914214603.GA7427@34-mo7-2.acn.waw.pl>
	<FF81E920-630A-4BB4-9363-F83F9DFFFADE@syenar.hu>
	<20080914230616.GD7427@34-mo7-2.acn.waw.pl>
	<048342C7-C482-4414-9609-E4A53902BA3D@syenar.hu>
Message-ID: <20080915015426.GD26782@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

[...]

I know about this problems but at this moment I think
we should have two HVM libraries. If this problems
will really effect us then we can decide to drop
ST version. For sure we will know much more then
now about real problems if we allow to easy use
both versions.
I'll update make_bcc.mak and make_gcc.mak to create
hbvmmt when HB_BUILD_ST=yes. For sure it will help
me if I will be able to ask users to relink application
with different HBVM library to check if problem still
exists.

> I see this will "always" be a problem to some extent,
> because we still support DOS, but DOS is the past and
> I already wonder why are we maintaing it. But, it is the
> exception, and will eventually die out anyway, that's pretty
> much easy to predict. New platforms all support MT, new
> CPUs more and more support MT. Modern languages all

Not all, f.e. WINCE does not.

> support MT (Java, C#, even XBase++). World is going towards
> MT. [ Maybe some rare embedded CPUs and systems-on-a-chip
> might not support it - I don't know -, but these are the
> rare exceptions and Harbour is not targeting those really. ]

The whole .NET is classic example of environment where too
much internal dependences creates nightmare for developers
and administrators. I do not use this platform but I too
often see what happens when some windows machine have to
be updated or for some "unknown" reasons .NET programs
crashes on some other machines. I think that even on this
list you will find people for which this was enough reason
to use Harbour instead of some .NET language: simple self
contain binaries with many external dependences.

> Okay. I'm just trying to build something using MSVC.
> Update: It went fine just by using -DHB_MT_VM. hbtest
> has some extra failures (in BCC 5.82 these are fine):
> ---
> ! 3078 MAIN_FILE(135)  TESTFIER( FClose( fhnd ) )
>        Result: "E: 0      R: .T."
>      Expected: "E: 6      R: .F."
> ! 3079 MAIN_FILE(136)  TESTFIER( FErase( "NOT_HERE.$$$" ) )
>        Result: "E: 0      R: -1"
>      Expected: "E: 2      R: -1"
> ! 3081 MAIN_FILE(138)  TESTFIER( FErase( "NOT_HERE.$$$" ) )
>        Result: "E: 0      R: -1"
>      Expected: "E: 2      R: -1"
> ! 3082 MAIN_FILE(139)  TESTFIER( FRename( "NOT_HERE.$$$", "A" )
>        Result: "E: 0      R: -1"
>      Expected: "E: 2      R: -1"
> ! 3134 MAIN_FILE(206)  TESTFIER( FClose( fhnd ) )
>        Result: "E: 0      R: .T."
>      Expected: "E: 6      R: .F."
> ! 3135 MAIN_FILE(207)  TESTFIER( FErase( "NOT_HERE.$$$" ) )
>        Result: "E: 0      R: -1"
>      Expected: "E: 2      R: -1"
> ! 3137 MAIN_FILE(209)  TESTFIER( FErase( "NOT_HERE.$$$" ) )
>        Result: "E: 0      R: -1"
>      Expected: "E: 2      R: -1"
> ! 3138 MAIN_FILE(210)  TESTFIER( FRename( "NOT_HERE.$$$", "A" )
>        Result: "E: 0      R: -1"
>      Expected: "E: 2      R: -1"
> ! 3139 MAIN_FILE(212)  TESTFIER( File( cFileName ) )
>        Result: "E: 0      R: .T."
>      Expected: "E: 2      R: .T."
> ! 3140 MAIN_FILE(213)  TESTFIER( File( "NOT_HERE.$$$" ) )
>        Result: "E: 0      R: .F."
>      Expected: "E: 2      R: .F."
> ---

Looks that MSVC does not set error code correctly.
I think that I know why. LastError() can be overwritten
by some pending operations. I'll try to fix it in a while.
BTW for better speed you can try to use: -DHB_USE_TLS macro.
It's not enabled yet for MSVC builds by default. This
is probably also the reason why last error code is dropped:
TlsGetValue() clears it.

best regards,
Przemek
From toninhofwi at yahoo.com.br  Sun Sep 14 22:07:02 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sun Sep 14 22:00:39 2008
Subject: [Harbour] 2008-09-14 19:59 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c91693$Blat.v2.6.2$c0b166a8$1574319106a8@127.0.0.1>
References: <01c91693$Blat.v2.6.2$c0b166a8$1574319106a8@127.0.0.1>
Message-ID: <18grc495nbbr87kq8ivujg0hlbn0b4mcjn@4ax.com>

>    + Now setting 'HB_BUILD_ST = no' will generate an MT build.
>      TODO: Change the default to 'yes' should be the way to go 
>            IMO.

IMO too, I was confused when my app and speedtest was slow than my
previous build. End users can be confused if miss this setting.

Regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From dmacias at mail.udg.mx  Sun Sep 14 22:08:16 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sun Sep 14 22:08:21 2008
Subject: [Harbour] Przemyslaw
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48CDC390.6090007@mail.udg.mx>

Przemek:

 >>It wasn't. Now should be correct.

 >Hi Przemek, now it is Przemys?aw

Toninho, yes
Perhaps in land of Przemek the letter "l" have some kind of health 
problem  :-)

I remember how two years ago a migration to Win2003/NET was stopped due 
to problems with some characters, which allmost collapsed an 24/7 service

Solution was: discard NET until you know how to manage it. It never returned

David Macias


From druzus at acn.waw.pl  Sun Sep 14 22:31:54 2008
From: druzus at acn.waw.pl (=?utf-8?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 22:32:33 2008
Subject: [Harbour] Przemys?aw
In-Reply-To: <d3grc45hd40jnh4r3cmeogh1lcimrcf9jj@4ax.com>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CDA1AF.50208@mail.udg.mx>
	<20080915011104.GA22169@34-mo7-2.acn.waw.pl>
	<20080915011608.GA26782@34-mo7-2.acn.waw.pl>
	<d3grc45hd40jnh4r3cmeogh1lcimrcf9jj@4ax.com>
Message-ID: <20080915023154.GE26782@34-mo7-2.acn.waw.pl>

On Sun, 14 Sep 2008, Toninho@fwi wrote:

Hi Toninho,

> >It wasn't. Now should be correct.
> Hi Przemek, now it is Przemys?aw

But the encoding in header is correct now: utf-8 and message was also in utf-8.
If you cannot see it then it simply means that you do not have such character
in your font or your reader wrongly decoded it.
>From my old system I was sending messages in ISO-8859-2. BTW have you seen
the slashed L in these messages?

best regards,
Przemek
From druzus at acn.waw.pl  Sun Sep 14 22:34:17 2008
From: druzus at acn.waw.pl (PrzemysÅaw Czerpak)
Date: Sun Sep 14 22:34:54 2008
Subject: [Harbour] 2008-09-15 04:33 UTC+0200 Przemyslaw Czerpak
 (druzus/at/priv.onet.pl)
Message-ID: <20080915023417.4EF7BBF6AD@34-mo7-2.acn.waw.pl>

2008-09-15 04:33 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/pack_src.sh
    * added file list to archive so it's possible to recreate it later without SVN data

  * harbour/common.mak
  * harbour/make_b32.mak
  * harbour/make_gcc.mak
    + added HBVMMT library for default builds
      BCC version not tested - please test.

  * harbour/source/vm/hvm.c
    * moved language and code page setting before class and error initialization

  * harbour/source/rtl/fserror.c
  * harbour/source/rtl/fstemp.c
  * harbour/source/rtl/fssize.c
  * harbour/source/rtl/hbffind.c
  * harbour/source/rtl/filesys.c
    ! fixed overloading FS error codes by other operations, f.e. accessing
      TLS data by OS API function call

best regards
Przemek
From toninhofwi at yahoo.com.br  Sun Sep 14 22:53:44 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sun Sep 14 22:47:22 2008
Subject: [Harbour] Przemys?aw
In-Reply-To: <20080915023154.GE26782@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CDA1AF.50208@mail.udg.mx>
	<20080915011104.GA22169@34-mo7-2.acn.waw.pl>
	<20080915011608.GA26782@34-mo7-2.acn.waw.pl>
	<d3grc45hd40jnh4r3cmeogh1lcimrcf9jj@4ax.com>
	<20080915023154.GE26782@34-mo7-2.acn.waw.pl>
Message-ID: <g4jrc4topsehmohqsd2s9kp67qhbeglho1@4ax.com>

>> >It wasn't. Now should be correct.
>> Hi Przemek, now it is Przemys?aw
>
>But the encoding in header is correct now: utf-8 and message was also in utf-8.
>If you cannot see it then it simply means that you do not have such character
>in your font or your reader wrongly decoded it.
>>From my old system I was sending messages in ISO-8859-2. BTW have you seen
>the slashed L in these messages?

Hi Przemek, your old messages, I see 'Przemyslaw Czerpak' and now I
see Przemys?aw

I'm using ISO-8859-1 to send my messages,

Regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From toninhofwi at yahoo.com.br  Sun Sep 14 22:57:57 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sun Sep 14 22:51:35 2008
Subject: [Harbour] Przemys?aw
In-Reply-To: <20080915023154.GE26782@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CDA1AF.50208@mail.udg.mx>
	<20080915011104.GA22169@34-mo7-2.acn.waw.pl>
	<20080915011608.GA26782@34-mo7-2.acn.waw.pl>
	<d3grc45hd40jnh4r3cmeogh1lcimrcf9jj@4ax.com>
	<20080915023154.GE26782@34-mo7-2.acn.waw.pl>
Message-ID: <gljrc4553hejin2b96fr92hpn3a7nibb80@4ax.com>

Przemek,

look at this header message:

To: harbour@harbour-project.org
Subject: [Harbour] 2008-09-15 04:33 UTC+0200 Przemyslaw Czerpak
 (druzus/at/priv.onet.pl)
From: druzus@acn.waw.pl (Przemys??aw Czerpak)
Date: Mon, 15 Sep 2008 04:34:17 +0200

2008-09-15 04:33 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/pack_src.sh
    * added file list to archive so it's possible to recreate it later
without SVN data


Header and from is 'wrong' for me but 2008-09 line and subject is
correct...


Toninho.

__________________________________________________
Fa?a liga??es para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From druzus at acn.waw.pl  Sun Sep 14 23:13:42 2008
From: druzus at acn.waw.pl (=?utf-8?Q?Przemys=C5=82aw?= Czerpak)
Date: Sun Sep 14 23:14:20 2008
Subject: [Harbour] Przemys?aw
In-Reply-To: <g4jrc4topsehmohqsd2s9kp67qhbeglho1@4ax.com>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CDA1AF.50208@mail.udg.mx>
	<20080915011104.GA22169@34-mo7-2.acn.waw.pl>
	<20080915011608.GA26782@34-mo7-2.acn.waw.pl>
	<d3grc45hd40jnh4r3cmeogh1lcimrcf9jj@4ax.com>
	<20080915023154.GE26782@34-mo7-2.acn.waw.pl>
	<g4jrc4topsehmohqsd2s9kp67qhbeglho1@4ax.com>
Message-ID: <20080915031342.GA23360@34-mo7-2.acn.waw.pl>

On Sun, 14 Sep 2008, Toninho@fwi wrote:
> >But the encoding in header is correct now: utf-8 and message was also in utf-8.
> >If you cannot see it then it simply means that you do not have such character
> >in your font or your reader wrongly decoded it.
> >>From my old system I was sending messages in ISO-8859-2. BTW have you seen
> >the slashed L in these messages?
> Hi Przemek, your old messages, I see 'Przemyslaw Czerpak' and now I
> see Przemys?aw

I see, just simply in my old account I used 'l' letter instead of '?'.
If this will be big problem for you then I can use 'l' letter though
it's not correct one ;-)
The encoding is not correct but I have to also change encoding in ChangeLog
messages which are sent automatically when I commit sth.

best regards,
Przemek
From niki at synel.co.il  Mon Sep 15 02:24:29 2008
From: niki at synel.co.il (Chen Kedem)
Date: Mon Sep 15 02:25:06 2008
Subject: [Harbour] About GPF iwhen app exit
Message-ID: <1A07FEDC778C3E4AA417F089511F859C03268A6A0C@Mail-yoq.SYNEL-COMPANY.LTD>

Toninho,

> Przemek, maybe the problem is in FWH that have C code without DEBUG information.
> My application have full debug information. All C and PRG codes, but the log are the same.

To get the source names and line numbers in a CodeGuard log, make sure that the *.TDS
files are in the same directory as the EXE. I usually copy the Harbour ones from the
bin\b32 into bin at the end of the INSTALL part of the build. And while running your application
make sure that YourApplication.TDS is in the same directory as YourApplication.EXE

You need both CodeGuard support and debug information in your build (for both Harbour
and your application). I set it like this (not yet tested with 1.1 latest MT changes):

set CFLAGS=-v -y -vG -Od

For 3rd party librarries, they need to be complied with CodeGuard support and debug information.


  Chen.
From harbour.01 at syenar.hu  Mon Sep 15 03:39:25 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 03:39:35 2008
Subject: [Harbour] HBWHAT - Proposed Restructuring
In-Reply-To: <19485900.post@talk.nabble.com>
References: <19485900.post@talk.nabble.com>
Message-ID: <EC0EFC0E-CEF2-4A65-9447-85EDD6AB2BA7@syenar.hu>

Hi Pritpal,

One vote from me.

Brgds,
Viktor

On 2008.09.15., at 2:48, Pritpal Bedi wrote:

>
> Hello Everybody
>
> Here is a proposal, as dicussed in the separate thread,
> to prefix functions as follows:
>
> WINAPI functions with VWN_
>   HB_FUNC( TEXTOUT )=> HB_FUNC( VWN_TEXTOUT )
>
> WHAT specific functions with WHT_
>   CreateWindow() => WHT_CreateWindow()
>
> These changes will allow us to use any other 3rd party
> WINAPI library alongwith HBWHAT and will be maintained
> and enhanced by me and all others who are using it
> on day-to-day basis.
>
> The side effect will be : you will have to change your sources
> accordingly OR you may need to include a .CH at the top of
> PRGs exploiting these functions.
>
> Before I jump to restructure HBWHAT, I need group consent.
> I propose these changes in the trunk.
>
> Please let me know when I should start working on that.
> I would like if no changes are introduced by anybody until I finish.
>
> Regards
> Pritpal Bedi
>
>
>
>
> -- 
> View this message in context: http://www.nabble.com/HBWHAT---Proposed-Restructuring-tp19485900p19485900.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From sscc at mweb.co.za  Mon Sep 15 03:50:49 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Mon Sep 15 03:51:19 2008
Subject: [Harbour] Przemys?aw
In-Reply-To: <gljrc4553hejin2b96fr92hpn3a7nibb80@4ax.com>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<48CDA1AF.50208@mail.udg.mx>	<20080915011104.GA22169@34-mo7-2.acn.waw.pl>	<20080915011608.GA26782@34-mo7-2.acn.waw.pl>	<d3grc45hd40jnh4r3cmeogh1lcimrcf9jj@4ax.com>	<20080915023154.GE26782@34-mo7-2.acn.waw.pl>
	<gljrc4553hejin2b96fr92hpn3a7nibb80@4ax.com>
Message-ID: <48CE13D9.8020101@mweb.co.za>

Toninho@fwi wrote:

> Header and from is 'wrong' for me but 2008-09 line and subject is
> correct...

l is not correct, it is an l with a small oblique through it. I don't 
know what it is called in English.

Regards
Alex
From sscc at mweb.co.za  Mon Sep 15 03:59:17 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Mon Sep 15 03:59:32 2008
Subject: [Harbour] Re:  Release 1.0.1 #1
In-Reply-To: <8FEED992-BB48-4289-B18E-F7CE24B7D879@syenar.hu>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<48CCEE3D.7000102@mail.udg.mx>
	<8FEED992-BB48-4289-B18E-F7CE24B7D879@syenar.hu>
Message-ID: <48CE15D5.1010608@mweb.co.za>

Szak?ts Viktor wrote:
> Ops.
> 
> Okay, if this is a group opinion, I won't ever touch 1.0.1 again
> except my strict personal needs maybe. The code is there for anyone
> interested in our stable release though.
> 
> That's actually pretty much something I've expected, and that also
> means there is not much point in messing with branches, tags,
> parallel version development, let alone releases and all that.
> Disappointing. Rant off.

FWIW, I am very interested and have spent quite a couple of days 
making sure that I can easily build my applications with the stable 
version and the "bleeding edge" version without too much pain.

I am not the group by any means, but I am completely appreciative of 
your 1.0.1 efforts and I think it would be a major step backwards if 
we drop it. I think it is a mark of maturity for the project to have a 
stable version with bug fixes added. Also, perhaps Davis means just 
hang on a day or two.

Regards
Alex

From harbour.01 at syenar.hu  Mon Sep 15 04:04:42 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 04:04:50 2008
Subject: [Harbour] 2008-09-15 04:33 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080915023417.4EF7BBF6AD@34-mo7-2.acn.waw.pl>
References: <20080915023417.4EF7BBF6AD@34-mo7-2.acn.waw.pl>
Message-ID: <9CDB4FB1-9C16-4925-8810-892FF145383B@syenar.hu>

Thanks, this fixed the FERROR() problem, and
enabling HB_USE_TLS made it significantly
faster for MSVS, just a bit slower than ST.

The codepage problem is not between BCC and MSVS,
but between (MSVS) 1.0.1 ST and (MSVS) MT.
Both screenshots are MSVS 2008 builds.
Same difference is there between BCC 1.0.1 ST and
BCC MT, so this does look like something related
to MT, but of course I may be wrong.

[ I cannot anymore use non-GNU make files for
BCC to do any tests though. ]

Brgds,
Viktor

On 2008.09.15., at 4:34, Przemys?aw Czerpak wrote:

> 2008-09-15 04:33 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/bin/pack_src.sh
>    * added file list to archive so it's possible to recreate it  
> later without SVN data
>
>  * harbour/common.mak
>  * harbour/make_b32.mak
>  * harbour/make_gcc.mak
>    + added HBVMMT library for default builds
>      BCC version not tested - please test.
>
>  * harbour/source/vm/hvm.c
>    * moved language and code page setting before class and error  
> initialization
>
>  * harbour/source/rtl/fserror.c
>  * harbour/source/rtl/fstemp.c
>  * harbour/source/rtl/fssize.c
>  * harbour/source/rtl/hbffind.c
>  * harbour/source/rtl/filesys.c
>    ! fixed overloading FS error codes by other operations, f.e.  
> accessing
>      TLS data by OS API function call
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Sep 15 04:07:07 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 04:07:15 2008
Subject: [Harbour] 2008-09-15 04:33 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9CDB4FB1-9C16-4925-8810-892FF145383B@syenar.hu>
References: <20080915023417.4EF7BBF6AD@34-mo7-2.acn.waw.pl>
	<9CDB4FB1-9C16-4925-8810-892FF145383B@syenar.hu>
Message-ID: <BD49E3FB-47D1-4D2B-BC08-372B5388C246@syenar.hu>

> The codepage problem is not between BCC and MSVS,
> but between (MSVS) 1.0.1 ST and (MSVS) MT.
> Both screenshots are MSVS 2008 builds.
> Same difference is there between BCC 1.0.1 ST and
> BCC MT, so this does look like something related
> to MT, but of course I may be wrong.

Nope, sorry. 1.0.1 was non-UNICODE (default build),
while 1.1 is UNICODE (which I have on for testing).
That explains it, sorry for the false alarm.

Brgds,
Viktor


From dbtopas at dbtopas.lt  Mon Sep 15 04:14:36 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Sep 15 04:14:34 2008
Subject: [Harbour] 2008-09-15 04:33 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080915023417.4EF7BBF6AD@34-mo7-2.acn.waw.pl>
References: <20080915023417.4EF7BBF6AD@34-mo7-2.acn.waw.pl>
Message-ID: <48CE196C.3050905@dbtopas.lt>

Przemys?aw Czerpak wrote:
> 2008-09-15 04:33 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>     + added HBVMMT library for default builds


Hi,


thank You.


Best regards,
Mindaugas

From dbtopas at dbtopas.lt  Mon Sep 15 04:20:41 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Sep 15 04:20:38 2008
Subject: [Harbour] Przemys?aw
In-Reply-To: <48CE13D9.8020101@mweb.co.za>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<48CDA1AF.50208@mail.udg.mx>	<20080915011104.GA22169@34-mo7-2.acn.waw.pl>	<20080915011608.GA26782@34-mo7-2.acn.waw.pl>	<d3grc45hd40jnh4r3cmeogh1lcimrcf9jj@4ax.com>	<20080915023154.GE26782@34-mo7-2.acn.waw.pl>	<gljrc4553hejin2b96fr92hpn3a7nibb80@4ax.com>
	<48CE13D9.8020101@mweb.co.za>
Message-ID: <48CE1AD9.2090400@dbtopas.lt>

> l is not correct, it is an l with a small oblique through it. 

Hello,


Great! If L is not correct (with stroke) then it correct! :)


Best regards,
Mindaugas
From harbour.01 at syenar.hu  Mon Sep 15 04:25:09 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 04:25:18 2008
Subject: [Harbour] [SPAM] Re: [SPAM] Re: [SPAM] Re: ChangeLog 2008-09-13
	18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <20080915012830.GC26782@34-mo7-2.acn.waw.pl>
References: <20080914012539.GC24595@34-mo7-2.acn.waw.pl>
	<19476839.post@talk.nabble.com> <48CD30F0.8030007@fsgiudice.com>
	<19481725.post@talk.nabble.com> <48CD4623.9080300@fsgiudice.com>
	<20080914214603.GA7427@34-mo7-2.acn.waw.pl>
	<FF81E920-630A-4BB4-9363-F83F9DFFFADE@syenar.hu>
	<20080914230616.GD7427@34-mo7-2.acn.waw.pl>
	<048342C7-C482-4414-9609-E4A53902BA3D@syenar.hu>
	<E7B01BF2-E4D8-427B-9EA4-7CD133C11E7A@syenar.hu>
	<20080915012830.GC26782@34-mo7-2.acn.waw.pl>
Message-ID: <18958C2C-BADB-45C4-9CC7-C9C374DED15D@syenar.hu>

Hi Przemek,

The #pragma is called:
#pragma comment( lib, "cw32mt.lib" )
and seems to be supported by both BCC and MSVC,
and also DMC, POCC. Unfortunately no info on
GCC, yet.

We could actually start using this in some
more generic version to aid pulling the right
dirs for several other places where we have
such dependencies (hbwin, hbwhat, hbinet, etc).

We may even use this to pull std Harbour libs
inside Harbour generated .c code, I guess.

Brgds,
Viktor

On 2008.09.15., at 3:28, Przemys?aw Czerpak wrote:

> On Mon, 15 Sep 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> There is a feature in MSVC and maybe in other C compilers too,
>> where it's possible to force/request linkage of certain libraries
>> from the .c source itself. With some sort #pragmas.
>> If this could be exploited in some proper ways, it could help
>> solving lots of lib linkage problems, where we currently need
>> to sync these things manually, and there is almast always
>> something wrong or missing, outdated, forgotten.
>
> It's very good idea. If possible try to force for BCC builds
> cw32mt inside HVM when HB_MT_VM macro is set. If it will work
> then we can add similar switches also for MSVC.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From soporte at dsgsoftware.com  Mon Sep 15 04:54:39 2008
From: soporte at dsgsoftware.com (=?iso-8859-2?Q?Juan_G=E1lvez?=)
Date: Mon Sep 15 04:54:57 2008
Subject: [Harbour] ChangeLog 2008-09-13 18:49 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>
Message-ID: <028801c91710$b816b020$6c01a8c0@PcJuanxp>


----- Original Message ----- 
From: "Przemys??aw Czerpak" <druzus@acn.waw.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Saturday, September 13, 2008 7:18 PM
Subject: [Harbour] ChangeLog 2008-09-13 18:49 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> 2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   ...
>   Please test and enjoy using Harbour threads.

wow ... Many thanks for this superb job.

Best regards
Juan

From harbour.01 at syenar.hu  Mon Sep 15 05:17:58 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 05:17:56 2008
Subject: [Harbour] 2008-09-15 11:16 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91713$Blat.v2.6.2$f1be68d8$154873b16002@127.0.0.1>

2008-09-15 11:16 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * tests/bld_b32.bat
  * tests/bld_vc.bat
    + Added bld files for tests.

  * tests/bld_b32_dll.bat
    ! .dll name updated.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep 15 05:18:28 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 05:18:23 2008
Subject: [Harbour] [1.0] 2008-09-15 11:16 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c91714$Blat.v2.6.2$03a99540$12c899dffe18@127.0.0.1>

2008-09-15 11:16 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * tests/bld_b32.bat
  * tests/bld_vc.bat
    + Added bld files for tests.
--
Brgds,
Viktor

From sscc at mweb.co.za  Mon Sep 15 05:39:10 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Mon Sep 15 05:39:31 2008
Subject: [Harbour] [SPAM] Re: [SPAM] Re: [SPAM] Re: ChangeLog 2008-09-13
	18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <3E1E25B9-4B2A-44D4-A605-713717AC7629@syenar.hu>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>	<19474140.post@talk.nabble.com>	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>	<19476236.post@talk.nabble.com>	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>	<19476839.post@talk.nabble.com>
	<48CD30F0.8030007@fsgiudice.com>	<19481725.post@talk.nabble.com>	<535B6850-16C9-4E51-B7CB-F32CBA1C9547@syenar.hu>	<9257026e0809141025k6cd0f422k90c4365bf0d34283@mail.gmail.com>
	<3E1E25B9-4B2A-44D4-A605-713717AC7629@syenar.hu>
Message-ID: <48CE2D3E.7080303@mweb.co.za>

Szak?ts Viktor wrote:

> "And on that bombshell" I can gladly send my 1.0.1 release
> make scripts for Windows, if anyone is interested. They are not
> a masterpiece of .bat file mastering, in fact they are very
> simple, but they represent the least amount of settings needed
> for a proper build, for both GNU and non-GNU makes.

I would like to see them.

Thanks
Alex
From mbelgrano at deltain.it  Mon Sep 15 05:57:36 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 15 05:57:47 2008
Subject: [Harbour] HBWHAT - Proposed Restructuring
In-Reply-To: <19485900.post@talk.nabble.com>
References: <19485900.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF85@SRV02.deltain.net>

agree

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi
Sent: Monday, September 15, 2008 2:48 AM
To: harbour@harbour-project.org
Subject: [Harbour] HBWHAT - Proposed Restructuring


Hello Everybody

Here is a proposal, as dicussed in the separate thread,
to prefix functions as follows:

WINAPI functions with VWN_ 
   HB_FUNC( TEXTOUT )=> HB_FUNC( VWN_TEXTOUT )

WHAT specific functions with WHT_
   CreateWindow() => WHT_CreateWindow()

These changes will allow us to use any other 3rd party
WINAPI library alongwith HBWHAT and will be maintained
and enhanced by me and all others who are using it
on day-to-day basis.

The side effect will be : you will have to change your sources
accordingly OR you may need to include a .CH at the top of
PRGs exploiting these functions.

Before I jump to restructure HBWHAT, I need group consent.
I propose these changes in the trunk. 

Please let me know when I should start working on that.
I would like if no changes are introduced by anybody until I finish.

Regards
Pritpal Bedi




-- 
View this message in context:
http://www.nabble.com/HBWHAT---Proposed-Restructuring-tp19485900p1948590
0.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From miguelangel at marchuet.net  Mon Sep 15 06:05:44 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Mon Sep 15 06:05:12 2008
Subject: [Harbour] questions about MT, to przemek
Message-ID: <48CE3378.6070508@marchuet.net>

Are there some necessities of critical LOCK operations at MT rdd ?

How will work wa at MT ?

Are there public wa for all MT and private wa for one MT?

Will it be possible to close all private wa of a single MT?


Best regards,
Miguel Angel Marchuet
From harbour.01 at syenar.hu  Mon Sep 15 06:06:15 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 06:06:27 2008
Subject: [Harbour] [SPAM] Re: [SPAM] Re: [SPAM] Re: ChangeLog 2008-09-13
	18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <48CE2D3E.7080303@mweb.co.za>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>	<19474140.post@talk.nabble.com>	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>	<19476236.post@talk.nabble.com>	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>	<19476839.post@talk.nabble.com>
	<48CD30F0.8030007@fsgiudice.com>	<19481725.post@talk.nabble.com>	<535B6850-16C9-4E51-B7CB-F32CBA1C9547@syenar.hu>	<9257026e0809141025k6cd0f422k90c4365bf0d34283@mail.gmail.com>
	<3E1E25B9-4B2A-44D4-A605-713717AC7629@syenar.hu>
	<48CE2D3E.7080303@mweb.co.za>
Message-ID: <747116D2-CCEB-4719-84AE-27038CB06D12@syenar.hu>

Hi Alex,

I've uploaded them here:
http://www.syenar.hu/harbour/bld101.zip

I hope they will be useful.

Brgds,
Viktor

On 2008.09.15., at 11:39, Alex Strickland wrote:

> Szak?ts Viktor wrote:
>
>> "And on that bombshell" I can gladly send my 1.0.1 release
>> make scripts for Windows, if anyone is interested. They are not
>> a masterpiece of .bat file mastering, in fact they are very
>> simple, but they represent the least amount of settings needed
>> for a proper build, for both GNU and non-GNU makes.
>
> I would like to see them.
>
> Thanks
> Alex
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From info at fsgiudice.com  Mon Sep 15 06:09:45 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Sep 15 06:09:55 2008
Subject: [Harbour] [SPAM] Re: [SPAM] Re: [SPAM] Re: ChangeLog 2008-09-13
	18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <48CE2D3E.7080303@mweb.co.za>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl>	<20080913191504.GA25899@34-mo7-2.acn.waw.pl>	<19474140.post@talk.nabble.com>	<20080913223840.GA26853@34-mo7-2.acn.waw.pl>	<19476236.post@talk.nabble.com>	<20080914012539.GC24595@34-mo7-2.acn.waw.pl>	<19476839.post@talk.nabble.com>	<48CD30F0.8030007@fsgiudice.com>	<19481725.post@talk.nabble.com>	<535B6850-16C9-4E51-B7CB-F32CBA1C9547@syenar.hu>	<9257026e0809141025k6cd0f422k90c4365bf0d34283@mail.gmail.com>	<3E1E25B9-4B2A-44D4-A605-713717AC7629@syenar.hu>
	<48CE2D3E.7080303@mweb.co.za>
Message-ID: <48CE3469.90706@fsgiudice.com>

Me too.

Best regards

Francesco

Alex Strickland ha scritto:
> Szak?ts Viktor wrote:
> 
>> "And on that bombshell" I can gladly send my 1.0.1 release
>> make scripts for Windows, if anyone is interested. They are not
>> a masterpiece of .bat file mastering, in fact they are very
>> simple, but they represent the least amount of settings needed
>> for a proper build, for both GNU and non-GNU makes.
> 
> I would like to see them.
> 
> Thanks
> Alex
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Mon Sep 15 06:15:32 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 15 06:15:43 2008
Subject: [Harbour] 2008-09-14 19:15 UTC+0200 Viktor Szakats
	(harbour.01syenar hu)
In-Reply-To: <01c9168e$Blat.v2.6.2$73943b52$14206855e29a@127.0.0.1>
References: <01c9168e$Blat.v2.6.2$73943b52$14206855e29a@127.0.0.1>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF86@SRV02.deltain.net>

Now instead using 
CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM -tWM
CFLAG=-a8 -OS -O2 -5 -6 
We must use 
C_USR=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM -Twm -a8 -OS -O2 -5 -6

How can be described -DHB_USE_TLS?
Is still need for bcc55 -DHB_USE_TLS?

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Sunday, September 14, 2008 7:22 PM
To: harbour@harbour-project.org
Subject: [Harbour] 2008-09-14 19:15 UTC+0200 Viktor Szakats (harbour.01syenar hu)

2008-09-14 19:15 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
  * make_vc.mak
  * make_gcc.mak
    * A change with the goal to further clean duplicate build 
      controlling options and make the configuration of GNU 
      and non-GNU build systems closer. INCOMPATIBLE.
      Builders should make the following changes in their 
      configurations and build scripts:
      - CFLAGS -> C_USR
      - CLIBFLAGS -> C_USR
      - LDFLAGS -> L_USR
      - HARBOURFLAGS -> PRG_USR
    * BCCDLL_WITH_DYNRT -> HB_BCCDLL_DYNRT
      Shouldn't this be the default, if it's marked as 'recommended'?
    ; Basic rules for builders is now pretty simple:
      C_USR for .c options, L_USR for link options, 
      PRG_USR for .prg options.
    ; L_USR doesn't work the same way as in GNU-make, yet.
    ; Also expect, that in the future - even before 1.1 release - 
      these switches might be also standardized to be 
      HB_USR_C, HB_USR_PRG, HB_USR_L, HB_USR_A.

--
Brgds,
Viktor

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From info at fsgiudice.com  Mon Sep 15 06:17:06 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Sep 15 06:17:15 2008
Subject: [Harbour] HBWHAT - Proposed Restructuring
In-Reply-To: <19485900.post@talk.nabble.com>
References: <19485900.post@talk.nabble.com>
Message-ID: <48CE3622.3090806@fsgiudice.com>

Hi Pritpal,

Pritpal Bedi ha scritto:
> Hello Everybody
> 
> Here is a proposal, as discussed in the separate thread,
> to prefix functions as follows:
> 
> WINAPI functions with VWN_ 
>    HB_FUNC( TEXTOUT )=> HB_FUNC( VWN_TEXTOUT )

sorry, but what does it means VWN ?
I know that the adopted standard is to use 3 chars, but what about WAPI 
that I found to be more readable ?
Or in case you think that it is probably that it is already used, WHA 
(Windows Harbour API or WHAT) or HWA (Harbour Windows API)

[snip]

and, as I can, I can help to mantain / emprove them.

Best Regards

Francesco

From dmacias at mail.udg.mx  Mon Sep 15 06:35:57 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Mon Sep 15 06:36:05 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48CE3A8D.5010102@mail.udg.mx>

 >> I suggest to wait for a better moment
 >>
 >> Some well-known brains are working hard and deeply in long time 
 >expected
 >> enhancements/extensions to Harbour and work for releases are 
 >>distractive
 >> tasks
 >>
 >> Obviously people can continue testing/reporting issues in their own
 >> environments

[Viktor]
 >That's actually pretty much something I've expected, and that also
 >means there is not much point in messing with branches, tags,
 >parallel version development, let alone releases and all that.
 >Disappointing. Rant off.

[Przemek]
 >There where some fixes in 1.0.1 and it will be good to create new
 >release though maybe we should wait few days yet.
 >It will not stop us with making farther modification in 1.1 branch.

[Lorenzo]
 >Sorry but I don't agree.
 >Testing 1.0.1 will help to test code that is also in 1.1.0 without
 >major changes.
 >We're not anymore "in the wild". We have to offer a safer path than 
the >trunk.

[Alex]
 >I am not the group by any means, but I am completely appreciative of
 >your 1.0.1 efforts and I think it would be a major step backwards if
 >we drop it. I think it is a mark of maturity for the project to have a
 >stable version with bug fixes added. Also, perhaps Davis means just
 >hang on a day or two.

I wrote about "to wait for a better moment", not to stop or drop 1.0.1

Lorenzo, about to "offer a safer path": At last the builds for release 
are made by developers or helpers in this group, not end users, and the 
group have few human resources available, as you ever see
Viktor and Przemek carry on with big part of work for releases
Viktor is working very hard on a branch, and Przemek is working hard in 
a goal stated allmost a year ago: threads, mt
Mt is one of your main goals too, and is good to focuse in get a good 
work without being distracted building release

For me is very convenient to focuse in the best of two choices. As you 
know, trunk HAVE fixes of 1.0.1 AND threads ready to test
Nothing of 1.0.1 work is lost in trunk, and nothing is lost if we wait 
to skip peak of threads/mt tests/fixes work and then release 1.0.1

Viktor, due seen in these years, I am against branches in Harbour and I 
was surprised how you was working. As you see, to maintain branches AND 
trunk are very hard, messing, confusing for most of us (where is certain 
  code?)
Przemek tried years ago and at last was left off
As you saw, you was maybe only one working in branch AND merging to trunk

For me, IN harbour, a release must left as is, and next release be made 
from trunk
I repeat, due to much work for parallel development, few specialized 
human resources, ...

About branch 1.0.1, it build/run fine under OS/2 and I am ready to 
upload it to Harbour downloads at first signal

David Macias


From mbelgrano at deltain.it  Mon Sep 15 06:38:57 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 15 06:39:06 2008
Subject: [Harbour] 2008-09-14 19:15 UTC+0200 Viktor
	Szakats(harbour.01syenar hu)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF86@SRV02.deltain.net>
References: <01c9168e$Blat.v2.6.2$73943b52$14206855e29a@127.0.0.1>
	<AFB948164110ED43B5EB849E8DEEF03815EF86@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF87@SRV02.deltain.net>

I receive error compiling
obj\b32\hbrun.c:
Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Error: Unresolved external '__beginthreadex' referenced from C:\HARBOUR\LIB\B32\HBVM.LIB|thread
Error: Unresolved external '__endthreadex' referenced from C:\HARBOUR\LIB\B32\HBVM.LIB|thread

** error 1 ** deleting bin\b32\hbrun.exe


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Massimo Belgrano
Sent: Monday, September 15, 2008 12:16 PM
To: harbour.01@syenar.hu; Harbour Project Main Developer List.
Subject: RE: [Harbour] 2008-09-14 19:15 UTC+0200 Viktor Szakats(harbour.01syenar hu)

Now instead using 
CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM -tWM
CFLAG=-a8 -OS -O2 -5 -6 
We must use 
C_USR=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM -Twm -a8 -OS -O2 -5 -6

How can be described -DHB_USE_TLS?
Is still need for bcc55 -DHB_USE_TLS?

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Sunday, September 14, 2008 7:22 PM
To: harbour@harbour-project.org
Subject: [Harbour] 2008-09-14 19:15 UTC+0200 Viktor Szakats (harbour.01syenar hu)

2008-09-14 19:15 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
  * make_vc.mak
  * make_gcc.mak
    * A change with the goal to further clean duplicate build 
      controlling options and make the configuration of GNU 
      and non-GNU build systems closer. INCOMPATIBLE.
      Builders should make the following changes in their 
      configurations and build scripts:
      - CFLAGS -> C_USR
      - CLIBFLAGS -> C_USR
      - LDFLAGS -> L_USR
      - HARBOURFLAGS -> PRG_USR
    * BCCDLL_WITH_DYNRT -> HB_BCCDLL_DYNRT
      Shouldn't this be the default, if it's marked as 'recommended'?
    ; Basic rules for builders is now pretty simple:
      C_USR for .c options, L_USR for link options, 
      PRG_USR for .prg options.
    ; L_USR doesn't work the same way as in GNU-make, yet.
    ; Also expect, that in the future - even before 1.1 release - 
      these switches might be also standardized to be 
      HB_USR_C, HB_USR_PRG, HB_USR_L, HB_USR_A.

--
Brgds,
Viktor

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From info at fsgiudice.com  Mon Sep 15 06:51:37 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Sep 15 06:51:47 2008
Subject: [Harbour] 2008-09-14 19:15 UTC+0200
	Viktor	Szakats(harbour.01syenar hu)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF87@SRV02.deltain.net>
References: <01c9168e$Blat.v2.6.2$73943b52$14206855e29a@127.0.0.1>	<AFB948164110ED43B5EB849E8DEEF03815EF86@SRV02.deltain.net>
	<AFB948164110ED43B5EB849E8DEEF03815EF87@SRV02.deltain.net>
Message-ID: <48CE3E39.4090506@fsgiudice.com>

Hi Massimo,

please set

set HB_BUILD_ST=no
set CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM -tWM

then rebuild all harbour.
Here it is working.

best regards

Francesco

Massimo Belgrano ha scritto:
> I receive error compiling
> obj\b32\hbrun.c:
> Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
> Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
> Error: Unresolved external '__beginthreadex' referenced from C:\HARBOUR\LIB\B32\HBVM.LIB|thread
> Error: Unresolved external '__endthreadex' referenced from C:\HARBOUR\LIB\B32\HBVM.LIB|thread
> 
> ** error 1 ** deleting bin\b32\hbrun.exe
> 
> 
> -----Original Message-----
> From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Massimo Belgrano
> Sent: Monday, September 15, 2008 12:16 PM
> To: harbour.01@syenar.hu; Harbour Project Main Developer List.
> Subject: RE: [Harbour] 2008-09-14 19:15 UTC+0200 Viktor Szakats(harbour.01syenar hu)
> 
> Now instead using 
> CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM -tWM
> CFLAG=-a8 -OS -O2 -5 -6 
> We must use 
> C_USR=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM -Twm -a8 -OS -O2 -5 -6
> 
> How can be described -DHB_USE_TLS?
> Is still need for bcc55 -DHB_USE_TLS?
> 
> -----Original Message-----
> From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
> Sent: Sunday, September 14, 2008 7:22 PM
> To: harbour@harbour-project.org
> Subject: [Harbour] 2008-09-14 19:15 UTC+0200 Viktor Szakats (harbour.01syenar hu)
> 
> 2008-09-14 19:15 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * make_b32.mak
>   * make_vc.mak
>   * make_gcc.mak
>     * A change with the goal to further clean duplicate build 
>       controlling options and make the configuration of GNU 
>       and non-GNU build systems closer. INCOMPATIBLE.
>       Builders should make the following changes in their 
>       configurations and build scripts:
>       - CFLAGS -> C_USR
>       - CLIBFLAGS -> C_USR
>       - LDFLAGS -> L_USR
>       - HARBOURFLAGS -> PRG_USR
>     * BCCDLL_WITH_DYNRT -> HB_BCCDLL_DYNRT
>       Shouldn't this be the default, if it's marked as 'recommended'?
>     ; Basic rules for builders is now pretty simple:
>       C_USR for .c options, L_USR for link options, 
>       PRG_USR for .prg options.
>     ; L_USR doesn't work the same way as in GNU-make, yet.
>     ; Also expect, that in the future - even before 1.1 release - 
>       these switches might be also standardized to be 
>       HB_USR_C, HB_USR_PRG, HB_USR_L, HB_USR_A.
> 
> --
> Brgds,
> Viktor
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Mon Sep 15 06:51:31 2008
From: druzus at acn.waw.pl (=?utf-8?Q?Przemys=C5=82aw?= Czerpak)
Date: Mon Sep 15 06:52:08 2008
Subject: [Harbour] questions about MT, to przemek
In-Reply-To: <48CE3378.6070508@marchuet.net>
References: <48CE3378.6070508@marchuet.net>
Message-ID: <20080915105131.GA18501@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Miguel Angel Marchuet wrote:

Hi Miguel,

> Are there some necessities of critical LOCK operations at MT rdd ?
> How will work wa at MT ?

Workareas are fully thread separated. Each threads uses it's own
workareas so there is not need to synchronize access to WA.
The same if for SETs (so _SET_DELETED, and similar switches are
local to thread and does not effect other threads) and
some RDD attributes like default RDD driver, current WA, neterr
flag, etc. Each thread has it's own table for ALIASes and aliases
are not shared between threads. Just like memvars.
Only RDD nodes and RDD settings (rddInfo()) are global to application.

> Are there public wa for all MT and private wa for one MT?

private for MT.

> Will it be possible to close all private wa of a single MT?

dbCloseAll() - it closes all workareas open by thread which
executes it. When you terminate thread then all open by this
thread WA are closed automatically.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Sep 15 07:05:00 2008
From: harbour.01 at syenar.hu (=?WINDOWS-1252?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 07:05:10 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <48CE3A8D.5010102@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CE3A8D.5010102@mail.udg.mx>
Message-ID: <C8B13C3E-96B3-4AA8-8933-A7B2E9F5CD4C@syenar.hu>

>
Hi David,

> I wrote about "to wait for a better moment", not to stop or drop 1.0.1

[ It sounded a lot worse than that. ]

> Lorenzo, about to "offer a safer path": At last the builds for  
> release are made by developers or helpers in this group, not end  
> users, and the group have few human resources available, as you ever  
> see
> Viktor and Przemek carry on with big part of work for releases
> Viktor is working very hard on a branch, and Przemek is working hard  
> in a goal stated allmost a year ago: threads, mt
> Mt is one of your main goals too, and is good to focuse in get a  
> good work without being distracted building release

Yes, but I fail to see how getting 1.0.1 was slowing down MT
development, or vice versa, how getting MT slowed down 1.0.1.
Two different ppl were working on these things _in parallel_,
which is exactly one of the points of branchings.

> For me is very convenient to focuse in the best of two choices. As  
> you know, trunk HAVE fixes of 1.0.1 AND threads ready to test
> Nothing of 1.0.1 work is lost in trunk, and nothing is lost if we  
> wait to skip peak of threads/mt tests/fixes work and then release  
> 1.0.1

For one thing, I couldn't _personally_ care less of providing
a binary of 25 compilers/platforms for the public, since I do
build my own anyway. I still personally value a _stable_ Harbour
because it's much better to rely on such a known and documented,
_referable_ release than an actual nightly.

1.0.x stable release is (was a few month ago) an important
thing for 3rd parties, end-user developers and the community
in general. I don't think we need to reargue that here and now.

> Viktor, due seen in these years, I am against branches in Harbour  
> and I was surprised how you was working. As you see, to maintain  
> branches AND trunk are very hard, messing, confusing for most of us  
> (where is certain  code?)
> Przemek tried years ago and at last was left off
> As you saw, you was maybe only one working in branch AND merging to  
> trunk

Well, branches have a certain point, and - until some miracle
technology comes to replace it - it is the current best and only
way to have two different versions of the same project in parallel.

And yes, it does take some work. Nobody said it doesn't.

Why is it messy for most ppl I have no idea. It's just two URLs,
quoted several times on this list. Confusing it may be when someone
wants to merge/sync, but there is not many users having to do that.
I'd encourage everyone to try to grasp the idea, it's not bad at all.

And BTW, it's _extremely_ disappointing to read such words actually.

> For me, IN harbour, a release must left as is, and next release be  
> made from trunk
> I repeat, due to much work for parallel development, few specialized  
> human resources, ...

Well if introducing incompatibilities and brand new, untested
(however cool) features while using the compiler for real-life
development and app builds running at actual final users is an
okay thing, I cannot add too much to these thoughts.

> About branch 1.0.1, it build/run fine under OS/2 and I am ready to  
> upload it to Harbour downloads at first signal

Thanks a lot. I'll update the list ASAP.

Brgds,
Viktor

From niki at synel.co.il  Mon Sep 15 07:14:25 2008
From: niki at synel.co.il (Chen Kedem)
Date: Mon Sep 15 07:15:01 2008
Subject: [Harbour] CodeGuard errors in MT mode
Message-ID: <1A07FEDC778C3E4AA417F089511F859C03268A6A13@Mail-yoq.SYNEL-COMPANY.LTD>

bcc32, WinNT and ChangeLog 2008-09-15 04:33 UTC+0200 Przemyslaw Czerpak (r9402)
I have no problem when compiling with and without CodeGuard as long as I don't define
HB_BUILD_ST.

---zz4.prg---
proc test
? "Hello"
return
-------------

set HB_BUILD_ST=no
set C_USR=-v -y -vG -Od
bld_b32 zz4 /w/a/n

zz4

I get 3053 CodeGuard errors (and then "Hello" is printed on screen), which looks like:

Error 00001. 0x100600 (Thread 0x0092):
Access in invalid memory: Attempt to access 4 byte(s) at 0x000000A4+1256528.
Call Tree:
   0x004251CB(=zz4.exe:0x01:0241CB) source\vm\ESTACK.C#833
   0x0042C264(=zz4.exe:0x01:02B264) source\vm\FM.C#373
   0x0044FDF1(=zz4.exe:0x01:04EDF1) source\vm\HVM.C#6965
   0x0045030C(=zz4.exe:0x01:04F30C) source\vm\HVM.C#7101
   0x00401175(=zz4.exe:0x01:000175) zz4.c#18
   0x0040A531(=zz4.exe:0x01:009531)
------------------------------------------
Error 00002. 0x100600 (r) (Thread 0x0092):
Access in invalid memory: Attempt to access 4 byte(s) at 0x000000A4+1256528.
Call Tree:
   0x004251CB(=zz4.exe:0x01:0241CB) source\vm\ESTACK.C#833
   0x0042C264(=zz4.exe:0x01:02B264) source\vm\FM.C#373
   0x00505FBF(=zz4.exe:0x01:104FBF) source\common\HBSTR.C#166
   0x0044FE24(=zz4.exe:0x01:04EE24) source\vm\HVM.C#6968
   0x0045030C(=zz4.exe:0x01:04F30C) source\vm\HVM.C#7101
   0x00401175(=zz4.exe:0x01:000175) zz4.c#18
------------------------------------------

Line 18 in zz4.c is:

HB_INIT_SYMBOLS_EX_END( hb_vm_SymbolInit_ZZ4, "zz4.prg", 0x0, 0x0002 )


(great work by the way!!!)


  Chen.
From toninhofwi at yahoo.com.br  Mon Sep 15 07:29:17 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Sep 15 07:25:38 2008
Subject: [Harbour] About GPF iwhen app exit
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C03268A6A0C@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C03268A6A0C@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <4jhsc49airbk9nf0qbp8s9ti7q57t6vj3u@4ax.com>

On Mon, 15 Sep 2008 09:24:29 +0300, you wrote:

>For 3rd party librarries, they need to be complied with CodeGuard support and debug information.

Hi  Chen, thanks for the information.

This confirm that the problem can be in FWH because I had compiled all
my sources with debug information and the log is generated with no
lines and no functions name:

---cut---
Call Tree:
   0x0049CF72(=ca.exe:0x01:09BF72)
   0x00450239(=ca.exe:0x01:04F239)
   0x7C862CD3(=kernel32.dll:0x01:061CD3)
   0x004B548B(=ca.exe:0x01:0B448B)
   0x7C9037BF(=ntdll.dll:0x01:0027BF)
   0x7C90378B(=ntdll.dll:0x01:00278B)
---cut---


Thanks and best regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From harbour.01 at syenar.hu  Mon Sep 15 07:25:48 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 07:25:59 2008
Subject: [Harbour] Release 1.0.1 #3
Message-ID: <5BF79AE6-35CF-4E97-9719-7E5D880A7B8D@syenar.hu>

Hi all,

Used external packages (on my system that is):
- Allegro 4.2.2
- Apollo 6.1.0.4
- libcurl 7.19.0 (7.18.2 for DMC builds)
- Firebird 2.0.4
- FreeImage 3.11.0
- libgd 2.0.34
- libharu 2.1.0
- mysql 5.0.47
- pgsql 8.3.3
- ADS 9.00

Tested platforms:
- Windows
	BCC 5.51
	BCC 5.82
	GCC Cygwin 3.4.4
	GCC MinGW 3.4.5 (on msys 1.0.10)
	GCC MinGW 4.1.2 (on msys 1.0.10)
TODO	GCC MinGW 3.4.5 (cross compile on OpenSuse 10.3, FC3)
	GCC MinGW 4.2.1 (cross compile on Ubuntu 8.04.1)
	GCC MinGW 4.3.2 (cross compile on Fedora 9)
	GCC MinGW 4.3.2a (on msys 1.0.10)
TODO	MSVC 6.0 (HBODBC: needs fresh ODBC headers from MSSDK)
TODO	MSVC 7.1 (MSVS 2003)
	MSVC 8.0 (MSVS 2005)
	MSVC 8.0 (MSVS 2005) C++
	MSVC 9.0 (MSVS 2008 SP1)
	MSVC 9.0 (MSVS 2008 SP1) C++
	MSVC 9.0 (MSVS 2008 SP1) 64 bit
	MSVC 9.0 (MSVS 2008 SP1) C++ 64 bit (cross-compile on Win32)
	PellesC 4.5 (HBSQLIT3: interface only)
	PellesC 5.0
	PellesC 5.0 64 bit (cross-compile on Win32)
	Open Watcom 1.7 (HBSQLIT3: interface only)
	Digital Mars C 4.50
- WinCE
TODO	MSVC 6.0 (eVC4)
TODO	GCC 4.0.1 (mingw32ce 0.51.0) (cross-compile on Ubuntu 8.04.1)
TODO	GCC 4.1.0 (mingw32ce 0.50.0) (cross-compile on OpenSuse 10.3, FC3)
	GCC ?.?.? (mingw32ce 0.50-1) (cross-compile on Fedora 9)
- Linux
	GCC 4.2.3 (Ubuntu 8.04.1)
	GCC 4.3.0 (Fedora 9)
TODO	GCC 4.2.1 (SuSE 10.3)
TODO	Open Watcom (with patches only. FAILED)
TODO	GCC (RedHat 7.3)
	GCC (OpenSuse 10.3)
TODO	GCC (FC3)
- OS X
TODO	GCC 4.0.1 i386, x86_64, PPC, PPC64 (Leopard 10.5.4 PPC + XCode 3.1)
TODO	GCC 4.0.1 i386, x86_64, PPC, PPC64 (Leopard 10.5.4 Intel + XCode  
3.1)
TODO	GCC 4.0.1 PPC (Leopard 10.5.4 PPC + XCode 3.0) (non-default build)
- Solaris
TODO	GCC 3.4.3 i86pc (SunOS 5.11 - OpenSolaris 2008.05)
- BSD
TODO	Reported OK (No details)
- HPUX
TODO	Reported OK (a week ago in /trunk)
- OS/2
	GCC 3.3.5 (EMX/Innotek)
- DOS
TODO	GCC 3.3.2 32 bit (DJGPP) (DJGPP bash port)
	GCC 4.2.3 32 bit (DJGPP) ('make install' won't properly work)
TODO	Open Watcom 1.7 (command.com)

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Mon Sep 15 07:26:39 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 15 07:26:45 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <48CE3A8D.5010102@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CE3A8D.5010102@mail.udg.mx>
Message-ID: <9257026e0809150426k744b2179nf05398af9a901401@mail.gmail.com>

On Mon, Sep 15, 2008 at 12:35 PM, David Arturo Macias Corona
<dmacias@mail.udg.mx> wrote:

> Lorenzo, about to "offer a safer path": At last the builds for release are
> made by developers or helpers in this group, not end users, and the group
> ...
> For me is very convenient to focuse in the best of two choices. As you know,
> trunk HAVE fixes of 1.0.1 AND threads ready to test
> Nothing of 1.0.1 work is lost in trunk, and nothing is lost if we wait to
> skip peak of threads/mt tests/fixes work and then release 1.0.1

Clearly working with only one branch will be easier but it will not
solve the bug-fixing problem:

if today we find a bug in 1.0.0 and we don't touch the 1.0.0 release
we have to say "wait the next release". But probably the next release
will be ready in months and probably will carry incompatibilities. So
simply to fix a bug we need to wait months plus change and retest
working code.

I think that a "rebase" to 1.0.1 is necessary because the diff between
1.0.0 and 1.0.1 is "big" due to dirs/files renames and some small but
"wide" changes in constants names and 64 bit support. This makes
difficult to check what are the "real" differences.
( I hope that that 1.0.2 will be much smaller )

The same will happen for 1.1.0 and so we'll need 1.1.1.

What we really need to do is to make the release process easier.
( we've already started a discussion about it )

best regards,
Lorenzo
From harbour.01 at syenar.hu  Mon Sep 15 07:28:52 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 07:29:06 2008
Subject: [Harbour] 2008-09-14 19:15 UTC+0200
	Viktor	Szakats(harbour.01syenar hu)
In-Reply-To: <48CE3E39.4090506@fsgiudice.com>
References: <01c9168e$Blat.v2.6.2$73943b52$14206855e29a@127.0.0.1>	<AFB948164110ED43B5EB849E8DEEF03815EF86@SRV02.deltain.net>
	<AFB948164110ED43B5EB849E8DEEF03815EF87@SRV02.deltain.net>
	<48CE3E39.4090506@fsgiudice.com>
Message-ID: <E59C4C1B-429E-411F-B0D7-3795666AF47C@syenar.hu>

>
Hi Francesco,

> please set
>
> set HB_BUILD_ST=no
> set CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM -tWM

You should be using C_USR instead of CLIBFLAGS.

CLIBFLAGS is just ignored in recent versions.

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep 15 07:38:10 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 07:38:19 2008
Subject: [Harbour] 2008-09-14 19:15 UTC+0200
	Viktor	Szakats(harbour.01syenar hu)
In-Reply-To: <E59C4C1B-429E-411F-B0D7-3795666AF47C@syenar.hu>
References: <01c9168e$Blat.v2.6.2$73943b52$14206855e29a@127.0.0.1>	<AFB948164110ED43B5EB849E8DEEF03815EF86@SRV02.deltain.net>
	<AFB948164110ED43B5EB849E8DEEF03815EF87@SRV02.deltain.net>
	<48CE3E39.4090506@fsgiudice.com>
	<E59C4C1B-429E-411F-B0D7-3795666AF47C@syenar.hu>
Message-ID: <A788B877-9DF1-4896-A776-1112847016CC@syenar.hu>

>> please set
>>
>> set HB_BUILD_ST=no
>> set CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM -tWM
>
> You should be using C_USR instead of CLIBFLAGS.
>
> CLIBFLAGS is just ignored in recent versions.

Which is BTW not a problem in this case as you'll only
lose HB_FM_WIN32_ALLOC, the rest is default, or
automatically set by HB_BUILD_ST.

Brgds,
Viktor

From druzus at acn.waw.pl  Mon Sep 15 07:39:13 2008
From: druzus at acn.waw.pl (PrzemysÅaw Czerpak)
Date: Mon Sep 15 07:39:52 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>

2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/tests/speedtst.prg
    * small update in speedtst.prg. It should be enough to make test and
      compare MT and ST mode speed.
      Please make test with different C compiler and send results to
      devel list.

best regards
Przemek
From harbour.01 at syenar.hu  Mon Sep 15 07:42:56 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 07:43:05 2008
Subject: [Harbour] Q: Enable HB_FM_WIN32_ALLOC by default?
Message-ID: <0BD79432-ADBE-4818-BB9B-221F3E3A0A70@syenar.hu>

Hi all,

Shouldn't we enable above setting by default?

Our most popular C compiler BCC55 has a terrible
memory manager, BCC58 is better, but still far
from perfect. MinGW uses Windows memory manager
anyway. MSVS (2008) uses HeapAlloc() internally.

This way Windows behaviour could also be more
consistent across the different supported Windows
compilers.

Opinions?

Brgds,
Viktor

From druzus at acn.waw.pl  Mon Sep 15 07:53:26 2008
From: druzus at acn.waw.pl (=?utf-8?Q?Przemys=C5=82aw?= Czerpak)
Date: Mon Sep 15 07:54:05 2008
Subject: [Harbour] CodeGuard errors in MT mode
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C03268A6A13@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C03268A6A13@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <20080915115326.GB18501@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Chen Kedem wrote:

Hi Chen,

> bcc32, WinNT and ChangeLog 2008-09-15 04:33 UTC+0200 Przemyslaw Czerpak (r9402)
> I have no problem when compiling with and without CodeGuard as long as I don't define
> HB_BUILD_ST.
> ---zz4.prg---
> proc test
> ? "Hello"
> return
> -------------
> set HB_BUILD_ST=no
> set C_USR=-v -y -vG -Od
> bld_b32 zz4 /w/a/n
> zz4
> I get 3053 CodeGuard errors (and then "Hello" is printed on screen), which looks like:
> Error 00001. 0x100600 (Thread 0x0092):
> Access in invalid memory: Attempt to access 4 byte(s) at 0x000000A4+1256528.
> Call Tree:
>    0x004251CB(=zz4.exe:0x01:0241CB) source\vm\ESTACK.C#833
>    0x0042C264(=zz4.exe:0x01:02B264) source\vm\FM.C#373
>    0x0044FDF1(=zz4.exe:0x01:04EDF1) source\vm\HVM.C#6965
>    0x0045030C(=zz4.exe:0x01:04F30C) source\vm\HVM.C#7101
>    0x00401175(=zz4.exe:0x01:000175) zz4.c#18
>    0x0040A531(=zz4.exe:0x01:009531)
> ------------------------------------------
> Error 00002. 0x100600 (r) (Thread 0x0092):
> Access in invalid memory: Attempt to access 4 byte(s) at 0x000000A4+1256528.
> Call Tree:
>    0x004251CB(=zz4.exe:0x01:0241CB) source\vm\ESTACK.C#833
>    0x0042C264(=zz4.exe:0x01:02B264) source\vm\FM.C#373
>    0x00505FBF(=zz4.exe:0x01:104FBF) source\common\HBSTR.C#166
>    0x0044FE24(=zz4.exe:0x01:04EE24) source\vm\HVM.C#6968
>    0x0045030C(=zz4.exe:0x01:04F30C) source\vm\HVM.C#7101
>    0x00401175(=zz4.exe:0x01:000175) zz4.c#18
> ------------------------------------------

It's false allarm from hb_stack_ready():
      #define hb_stack_ready()    (hb_stack_ptr != NULL)
hb_stack_ptr is TLS memory pointer to HVM stack:
      PHB_STACK HB_TLS_ATTR hb_stack_ptr = NULL;
Probably CG does not recognize TLS data correctly.
Maybe it has some switches to make it working?
I'm afraid that I cannot help here. It does not look like
Harbour problems. As workaround you can disable using 
TLS directly in hbthread.h. The final binaries will be
slower but maybe GC will not report that above address
is wrong. TLS is very specific and addresses of TLS
variables are often out of normal process memory.
The exact implementation depends on used Hardware and
calling convention.

best regards,
Przemek
From dmacias at mail.udg.mx  Mon Sep 15 07:58:09 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Mon Sep 15 07:58:17 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48CE4DD1.9050000@mail.udg.mx>

[Viktor]
 >1.0.x stable release is (was a few month ago) an important
 >thing for 3rd parties, end-user developers and the community
 >in general. I don't think we need to reargue that here and now.

[Lorenzo]
 >Clearly working with only one branch will be easier but it will not
 >solve the bug-fixing problem:

 >if today we find a bug in 1.0.0 and we don't touch the 1.0.0 release
 >we have to say "wait the next release". But probably the next release
 >will be ready in months and probably will carry incompatibilities. So
 >simply to fix a bug we need to wait months plus change and retest
 >working code.

 >I think that a "rebase" to 1.0.1 is necessary because the diff between
 >1.0.0 and 1.0.1 is "big" due to dirs/files renames and some small but
 >"wide" changes in constants names and 64 bit support. This makes
 >difficult to check what are the "real" differences.
 >( I hope that that 1.0.2 will be much smaller )

 >The same will happen for 1.1.0 and so we'll need 1.1.1.

 >What we really need to do is to make the release process easier.
 >( we've already started a discussion about it )

"I wrote about "to wait for a better moment", not to stop or drop 1.0.1"

I will to expose my point in other words: I am/was trying to protect 
work of Viktor and Przemek of unnecessary pressure

Przemek work on threads/mt is a big project
Viktor work on 1.0.1 is a big project. It was not just bug-fixing  :-)
  It should be named something as 1.0.5 or more

If both big projects are presented at same time, as result they will to 
compete for attention causing loss of care in revision/tests
It distract developers and users minimizing importance of common efforts

Is like as a small town were two amazing movies will be presented in two 
places at same time, and ALL town want to see both and enjoy peacefully
Is not bad idea to distribute movies in two days

David Macias



From niki at synel.co.il  Mon Sep 15 07:57:48 2008
From: niki at synel.co.il (Chen Kedem)
Date: Mon Sep 15 07:58:25 2008
Subject: [Harbour] Re: 2008-09-14 19:15 UTC+0200 Viktor
	Szakats(harbour.01syenar hu)
Message-ID: <1A07FEDC778C3E4AA417F089511F859C03268A6A15@Mail-yoq.SYNEL-COMPANY.LTD>

Viktor,

>> please set
>>
>> set HB_BUILD_ST=no
>> set CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM -tWM
>
> You should be using C_USR instead of CLIBFLAGS.
>
> CLIBFLAGS is just ignored in recent versions.

In make_b32.bat / make_b32.mak C_USR is used,
but in bin\bld.bat (r9393) CFLAGS is used. I think its confusing.


  Chen.
From harbour.01 at syenar.hu  Mon Sep 15 07:58:33 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 07:58:43 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <9257026e0809150426k744b2179nf05398af9a901401@mail.gmail.com>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CE3A8D.5010102@mail.udg.mx>
	<9257026e0809150426k744b2179nf05398af9a901401@mail.gmail.com>
Message-ID: <C14C0A71-6A3F-4F7A-85D5-886829943246@syenar.hu>

>
Hi Lorenzo,

> What we really need to do is to make the release process easier.
> ( we've already started a discussion about it )

Any specific ideas?

[ BTW, I also hope 1.0.2 will be smaller. I can also
assure I won't do any major change there anymore. ]

Brgds,
Viktor

From druzus at acn.waw.pl  Mon Sep 15 08:16:32 2008
From: druzus at acn.waw.pl (=?utf-8?Q?Przemys=C5=82aw?= Czerpak)
Date: Mon Sep 15 08:17:09 2008
Subject: [Harbour] Q: Enable HB_FM_WIN32_ALLOC by default?
In-Reply-To: <0BD79432-ADBE-4818-BB9B-221F3E3A0A70@syenar.hu>
References: <0BD79432-ADBE-4818-BB9B-221F3E3A0A70@syenar.hu>
Message-ID: <20080915121631.GC18501@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Shouldn't we enable above setting by default?
> Our most popular C compiler BCC55 has a terrible
> memory manager, BCC58 is better, but still far
> from perfect. MinGW uses Windows memory manager
> anyway. MSVS (2008) uses HeapAlloc() internally.
> This way Windows behaviour could also be more
> consistent across the different supported Windows
> compilers.

It should be enabled by default for these compilers
which have some problems with own memory managers.
It may cause some small speed overhead (f.e. in
OpenWatcom builds) but it should not be critical
and for sure it's better then application crash
like in BCC with heavy memory usage.

best regards,
Przemek
From mbelgrano at deltain.it  Mon Sep 15 08:23:01 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 15 08:23:13 2008
Subject: [Harbour] 2008-09-14 19:15
	UTC+0200Viktor	Szakats(harbour.01syenar hu)
In-Reply-To: <A788B877-9DF1-4896-A776-1112847016CC@syenar.hu>
References: <01c9168e$Blat.v2.6.2$73943b52$14206855e29a@127.0.0.1>	<AFB948164110ED43B5EB849E8DEEF03815EF86@SRV02.deltain.net><AFB948164110ED43B5EB849E8DEEF03815EF87@SRV02.deltain.net><48CE3E39.4090506@fsgiudice.com><E59C4C1B-429E-411F-B0D7-3795666AF47C@syenar.hu>
	<A788B877-9DF1-4896-A776-1112847016CC@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF88@SRV02.deltain.net>

Wich C_USR,L_USR is suggested FOR BCC55 WITH ?
Better include C_USR=-OS -Ov -Oi -Oc -Q -tWM; PRG_USR=-l]?

IS NEED set HB_BUILD_ST=no?


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Monday, September 15, 2008 1:38 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] 2008-09-14 19:15 UTC+0200Viktor Szakats(harbour.01syenar hu)

>> please set
>>
>> set HB_BUILD_ST=no
>> set CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM -tWM
>
> You should be using C_USR instead of CLIBFLAGS.
>
> CLIBFLAGS is just ignored in recent versions.

Which is BTW not a problem in this case as you'll only
lose HB_FM_WIN32_ALLOC, the rest is default, or
automatically set by HB_BUILD_ST.

Brgds,
Viktor

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From bedipritpal at hotmail.com  Mon Sep 15 08:38:41 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Sep 15 08:38:46 2008
Subject: [Harbour] HBWHAT - Proposed Restructuring
In-Reply-To: <48CE3622.3090806@fsgiudice.com>
References: <19485900.post@talk.nabble.com> <48CE3622.3090806@fsgiudice.com>
Message-ID: <19492129.post@talk.nabble.com>


Francesco

>sorry, but what does it means VWN ?

Because I am using this prefix for the last 5 years
and proposed it because my applications are based on this 
namespace so it will be easier to maintain it.

>I know that the adopted standard is to use 3 chars, but what about WAPI 
>that I found to be more readable ?

WAPI_ is more readable, I agree. No problems if we use it as 
I can include HWAPI.CH translating VWN_ to WAPI_.

For HBWHAT proprietary functions I would like WHT_ anyway.

>and, as I can, I can help to mantain / emprove them.

:-) Certainly a welcome news.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/HBWHAT---Proposed-Restructuring-tp19485900p19492129.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dbtopas at dbtopas.lt  Mon Sep 15 08:40:38 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Sep 15 08:40:35 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
Message-ID: <48CE57C6.2030006@dbtopas.lt>

>       Please make test with different C compiler and send results to
>       devel list.


Hi,


Intel Celeron 2.2GHz, 256MB RAM, BCC 5.5

09/15/08 15:24:35 Harbour 1.1.0dev (Rev. 9405), Windows XP 5.1.2600 
Service Pack 2

ARR_LEN =         16                        ST      MT
N_LOOPS =    1000000
empty loops overhead =                      0.25    0.34
CPU usage -> secondsCPU()

c:=L_C ->                                   0.30    0.86
n:=L_N ->                                   0.36    0.38
d:=L_D ->                                   0.31    0.31
c:=M_C ->                                   0.30    0.86
n:=M_N ->                                   0.33    0.44
d:=M_D ->                                   0.33    0.38
(sh) c:=F_C ->                              0.80    2.03
(sh) n:=F_N ->                              0.66    0.75
(sh) d:=F_D ->                              0.39    0.47
(ex) c:=F_C ->                              0.72    2.03
(ex) n:=F_N ->                              0.67    0.80
(ex) d:=F_D ->                              0.42    0.30
n:=o:GenCode ->                             0.72    1.25
n:=o[8] ->                                  0.61    1.09
round(i/1000,2) ->                          0.92    1.38
str(i/1000) ->                              2.23    3.75
val(a3[i%ARR_LEN+1]) ->                     1.77    2.81
dtos(j+i%10000-5000) ->                     2.11    3.69
eval({||i%ARR_LEN}) ->                      0.94    1.63
eval({|x|x%ARR_LEN},i) ->                   1.16    1.95
eval({|x|f1(x)},i) ->                       1.53    2.64
&('f1('+str(i)+')') ->                     13.14   25.30
eval([&('{|x|f1(x)}')]) ->                  1.64    2.38
j := valtype(a)+valtype(i) ->               1.66    3.23
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->      3.33    6.05
j := val(a2[i%ARR_LEN+1]) ->                2.14    3.25
j := a2[i%ARR_LEN+1] == s ->                1.53    2.88
j := a2[i%ARR_LEN+1] = s ->                 1.50    2.98
j := a2[i%ARR_LEN+1] >= s ->                1.47    2.89
j := a2[i%ARR_LEN+1] < s ->                 1.48    2.94
aadd(aa,{i,j,s,a,a2,t,bc}) ->               7.28   13.38
f0() ->                                     0.48    0.73
f1(i) ->                                    0.83    1.25
f2(c[8]) ->                                 0.58    1.17
f2(c[40000]) ->                             0.64    1.45
f2(@c[40000]) ->                            0.47    0.84
f2(c[40000]); c2:=c ->                      0.94    2.08
f2(@c[40000]); c2:=c ->                     0.81    1.67
f3(a,a2,c,i,j,t,bc) ->                      1.47    3.64
f2(a2) ->                                   0.64    1.44
s:=f4() ->                                 81.73   83.73
s:=f5() ->                                  1.13    2.78
ascan(a,i%ARR_LEN) ->                       1.11    1.80
ascan(a2,c+chr(i%64+64)) ->                 3.59    6.50
ascan(a,{|x|x==i%ARR_LEN}) ->              10.63   21.86
==========================================================
total application time:                   169.30  241.81
total real time:                          184.56  265.75


Best regards,
Mindaugas
From niki at synel.co.il  Mon Sep 15 09:47:15 2008
From: niki at synel.co.il (Chen Kedem)
Date: Mon Sep 15 08:43:56 2008
Subject: [Harbour] Re: Harbour c output with LF only
References: <41809CD6.4B86@synel.co.il>
Message-ID: <48CE6763.2E38@synel.co.il>

This is an old one:

On Thu, 28 Oct 2004 09:16:38 +0200 I wrote:
> 
> I just noticed that in the Harbour c output, the EOL is LF (0x0A)
> when the standard in Win32 (my environment) is CR+LF.
> 
> This is true for all those combinations:
> harbour myPrg -n
> harbour myPrg -n -gc
> harbour myPrg -n -gc0
> harbour myPrg -n -gc1
> harbour myPrg -n -gc2
> 
> The C compiler (BCB 5.0) does not complain, but my editor does.
> This is true for current code and a sample I made 5 months ago
> (but noticed it only today).
> 
> Was it intentional, or something that need to be fixed ?

I had just stumbled on this agian when I needed to use the
Windows Notepad to load the c file (the version that arrive
with Win2000 see the source as one long line).

Is there a chance to use OS EOL
or at least have a flag to control it?

Thanks,

  Chen.
From toninhofwi at yahoo.com.br  Mon Sep 15 08:50:06 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Sep 15 08:46:39 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
Message-ID: <l7msc450c22o3s1k1pm415hcunbr4cv7q0@4ax.com>

>      Please make test with different C compiler and send results to
>      devel list.

Przemek, using Codegear 6.10 and SET C_USR=-DHB_GUI -DHB_NO_TRACE
-DHB_FM_STATISTICS_OFF -DHB_FM_WIN32_ALLOC -DADS_LIB_VERSION=700
-DHB_HASH_MSG_ITEMS

MT real time: 86.73
ST real time: 59.39

---cut---
09/15/08 09:41:59 Harbour 1.1.0dev (Rev. 9405) (MT), Windows Vista
6.0.6000
ARR_LEN =         16
N_LOOPS =    1000000                                  -MT-    -ST-
empty loops overhead =                                0.19    0.09
CPU usage -> secondsCPU()

c:=L_C ->                                             0.36    0.13
n:=L_N ->                                             0.16    0.11
d:=L_D ->                                             0.16    0.20
c:=M_C ->                                             0.50    0.25
n:=M_N ->                                             0.17    0.13
d:=M_D ->                                             0.16    0.13
(sh) c:=F_C ->                                        0.84    0.75
(sh) n:=F_N ->                                        0.58    0.36
(sh) d:=F_D ->                                        0.25    0.20
(ex) c:=F_C ->                                        0.55    0.42
(ex) n:=F_N ->                                        0.50    0.41
(ex) d:=F_D ->                                        0.25    0.20
n:=o:GenCode ->                                       0.64    0.31
n:=o[8] ->                                            0.50    0.27
round(i/1000,2) ->                                    0.66    0.52
str(i/1000) ->                                        3.77    3.86
val(a3[i%ARR_LEN+1]) ->                               2.02    1.39
dtos(j+i%10000-5000) ->                               1.52    1.23
eval({||i%ARR_LEN}) ->                                0.83    0.42
eval({|x|x%ARR_LEN},i) ->                             0.91    0.47
eval({|x|f1(x)},i) ->                                 1.36    0.67
&('f1('+str(i)+')') ->                               10.83   10.84
eval([&('{|x|f1(x)}')]) ->                            1.38    0.69
j := valtype(a)+valtype(i) ->                         1.53    0.89
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                4.23    3.61
j := val(a2[i%ARR_LEN+1]) ->                          1.81    1.20
j := a2[i%ARR_LEN+1] == s ->                          1.52    0.77
j := a2[i%ARR_LEN+1] = s ->                           1.56    0.83
j := a2[i%ARR_LEN+1] >= s ->                          1.56    0.81
j := a2[i%ARR_LEN+1] < s ->                           1.56    0.83
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         4.59    2.72
f0() ->                                               0.41    0.22
f1(i) ->                                              0.58    0.36
f2(c[8]) ->                                           0.63    0.25
f2(c[40000]) ->                                       0.63    0.27
f2(@c[40000]) ->                                      0.44    0.22
f2(c[40000]); c2:=c ->                                1.02    0.39
f2(@c[40000]); c2:=c ->                               0.80    0.33
f3(a,a2,c,i,j,t,bc) ->                                1.88    0.83
f2(a2) ->                                             0.64    0.27
s:=f4() ->                                            8.08    7.53
s:=f5() ->                                            0.98    0.61
ascan(a,i%ARR_LEN) ->                                 0.97    0.56
ascan(a2,c+chr(i%64+64)) ->                           3.27    2.02
ascan(a,{|x|x==i%ARR_LEN}) ->                        10.67    5.63
=====================================================================
total application time:                              86.67   59.33
total real time:                                     86.73   59.39
---cut---


Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opção para você! 
Experimente já e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From dbtopas at dbtopas.lt  Mon Sep 15 08:47:53 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Sep 15 08:47:49 2008
Subject: [Harbour] Q: Enable HB_FM_WIN32_ALLOC by default?
In-Reply-To: <0BD79432-ADBE-4818-BB9B-221F3E3A0A70@syenar.hu>
References: <0BD79432-ADBE-4818-BB9B-221F3E3A0A70@syenar.hu>
Message-ID: <48CE5979.2030203@dbtopas.lt>

> Shouldn't we enable above setting by default?
> 
> Our most popular C compiler BCC55 has a terrible
> memory manager, BCC58 is better, but still far
> from perfect. MinGW uses Windows memory manager
> anyway. MSVS (2008) uses HeapAlloc() internally.
> 
> This way Windows behaviour could also be more
> consistent across the different supported Windows
> compilers.
> 
> Opinions?

Hi,


I've used to test BCC and MinGW speed some time ago. BCC worked faster 
on speedtst.prg. Do we have some specific test for memory manager? It 
can answer the question what is faster and how much?


Best regards,
Mindaugas
From mbelgrano at deltain.it  Mon Sep 15 08:55:30 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 15 08:55:42 2008
Subject: [Harbour] CFLAGS,CLIBFLAGS,LDFLAGS,HARBOURFLAGS ARE DEAD!
In-Reply-To: <01c9168e$Blat.v2.6.2$73943b52$14206855e29a@127.0.0.1>
References: <01c9168e$Blat.v2.6.2$73943b52$14206855e29a@127.0.0.1>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF8A@SRV02.deltain.net>

Now We must use c_usr,l_usr,prg_usr?
Tomorrow can HB_USR_C, HB_USR_PRG, HB_USR_L? 
So we can prepare somethink like Set HB_USR=C_USR?



-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Sunday, September 14, 2008 7:22 PM
To: harbour@harbour-project.org
Subject: [Harbour] 2008-09-14 19:15 UTC+0200 Viktor Szakats (harbour.01syenar hu)

2008-09-14 19:15 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
  * make_vc.mak
  * make_gcc.mak
    * A change with the goal to further clean duplicate build 
      controlling options and make the configuration of GNU 
      and non-GNU build systems closer. INCOMPATIBLE.
      Builders should make the following changes in their 
      configurations and build scripts:
      - CFLAGS -> C_USR
      - CLIBFLAGS -> C_USR
      - LDFLAGS -> L_USR
      - HARBOURFLAGS -> PRG_USR
    * BCCDLL_WITH_DYNRT -> HB_BCCDLL_DYNRT
      Shouldn't this be the default, if it's marked as 'recommended'?
    ; Basic rules for builders is now pretty simple:
      C_USR for .c options, L_USR for link options, 
      PRG_USR for .prg options.
    ; L_USR doesn't work the same way as in GNU-make, yet.
    ; Also expect, that in the future - even before 1.1 release - 
      these switches might be also standardized to be 
      HB_USR_C, HB_USR_PRG, HB_USR_L, HB_USR_A.

--
Brgds,
Viktor

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Mon Sep 15 08:55:56 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 08:56:07 2008
Subject: [Harbour] Re: 2008-09-14 19:15 UTC+0200 Viktor
	Szakats(harbour.01syenar hu)
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C03268A6A15@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C03268A6A15@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <1B5227BC-A7F0-40E1-ADC8-558EE7667A46@syenar.hu>

>
Hi Chen,

> Viktor,
>
>>> please set
>>>
>>> set HB_BUILD_ST=no
>>> set CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM -tWM
>>
>> You should be using C_USR instead of CLIBFLAGS.
>>
>> CLIBFLAGS is just ignored in recent versions.
>
> In make_b32.bat / make_b32.mak C_USR is used,
> but in bin\bld.bat (r9393) CFLAGS is used. I think its confusing.

You're perfectly right, I'll fix the latter.

Still, you will find some CFLAGS in contrib local
make files, but that's normal and they are meant
for internal usage only. (should be better called
HB_INT_C or something maybe.)

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep 15 08:58:46 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 08:59:01 2008
Subject: [Harbour] HBWHAT - Proposed Restructuring
In-Reply-To: <19492129.post@talk.nabble.com>
References: <19485900.post@talk.nabble.com> <48CE3622.3090806@fsgiudice.com>
	<19492129.post@talk.nabble.com>
Message-ID: <CC503D60-4657-4AAB-B369-F3BE8787E4C6@syenar.hu>

>
Hi folks,

> Because I am using this prefix for the last 5 years
> and proposed it because my applications are based on this
> namespace so it will be easier to maintain it.
>
>> I know that the adopted standard is to use 3 chars, but what about  
>> WAPI
>> that I found to be more readable ?
>
> WAPI_ is more readable, I agree. No problems if we use it as
> I can include HWAPI.CH translating VWN_ to WAPI_.

I'd vote no for "WAPI_" as this is too generic,
or in other words not HBWHAT specific at all. The point
would be to make these names unique to HBWHAT.

> For HBWHAT proprietary functions I would like WHT_ anyway.

If anything, I'd vote to use WHT_ for C functions, too.
But VWN_ is also good IMO.

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep 15 09:02:37 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 09:03:15 2008
Subject: [Harbour] 2008-09-15 14:54 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91733$Blat.v2.6.2$53d87594$3a8c8079696@127.0.0.1>

2008-09-15 14:54 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * bin/bld.bat
  * bin/bld_os2.cmd
  * contrib/gtwvg/tests/bld_b32.bat
  * contrib/hbgd/tests/bld_b32.bat
    ! Changed CFLAGS to C_USR.
--
Brgds,
Viktor

From mbelgrano at deltain.it  Mon Sep 15 09:28:12 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 15 09:28:22 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <48CE4DD1.9050000@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CE4DD1.9050000@mail.udg.mx>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF8B@SRV02.deltain.net>

I agree with victor an important thing for 3rd parties, end-user
developers and the community a love also 1.1 version. 
IMO 1.0.1 will be ready first of final version 1.1.0 ant the 1.0.2 be
more simple.
So before official presentation in your small town were not present two
amazing movies
Developer audiences who is interested can easy follow one or either
project

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of David Arturo
Macias Corona
Sent: Monday, September 15, 2008 1:58 PM
To: harbour@harbour-project.org
Subject: [Harbour] Re: Release 1.0.1 #1

[Viktor]
 >1.0.x stable release is (was a few month ago) an important
 >thing for 3rd parties, end-user developers and the community
 >in general. I don't think we need to reargue that here and now.

[Lorenzo]
 >Clearly working with only one branch will be easier but it will not
 >solve the bug-fixing problem:

 >if today we find a bug in 1.0.0 and we don't touch the 1.0.0 release
 >we have to say "wait the next release". But probably the next release
 >will be ready in months and probably will carry incompatibilities. So
 >simply to fix a bug we need to wait months plus change and retest
 >working code.

 >I think that a "rebase" to 1.0.1 is necessary because the diff between
 >1.0.0 and 1.0.1 is "big" due to dirs/files renames and some small but
 >"wide" changes in constants names and 64 bit support. This makes
 >difficult to check what are the "real" differences.
 >( I hope that that 1.0.2 will be much smaller )

 >The same will happen for 1.1.0 and so we'll need 1.1.1.

 >What we really need to do is to make the release process easier.
 >( we've already started a discussion about it )

"I wrote about "to wait for a better moment", not to stop or drop 1.0.1"

I will to expose my point in other words: I am/was trying to protect 
work of Viktor and Przemek of unnecessary pressure

Przemek work on threads/mt is a big project
Viktor work on 1.0.1 is a big project. It was not just bug-fixing  :-)
  It should be named something as 1.0.5 or more

If both big projects are presented at same time, as result they will to 
compete for attention causing loss of care in revision/tests
It distract developers and users minimizing importance of common efforts

Is like as a small town were two amazing movies will be presented in two

places at same time, and ALL town want to see both and enjoy peacefully
Is not bad idea to distribute movies in two days

David Macias



_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Mon Sep 15 09:33:06 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 09:33:16 2008
Subject: [Harbour] Re: Harbour c output with LF only
In-Reply-To: <48CE6763.2E38@synel.co.il>
References: <41809CD6.4B86@synel.co.il> <48CE6763.2E38@synel.co.il>
Message-ID: <7F688FD3-E868-49CD-95F0-6C139F603E19@syenar.hu>

This looks like a bug.

Related to that I've noticed a few days ago that the
error output contains \r chars even on Windows, I guess
the reason is screen formatting, but when directed into
a file, it's a bit distracting.

Brgds,
Viktor

On 2008.09.15., at 15:47, Chen Kedem wrote:

> This is an old one:
>
> On Thu, 28 Oct 2004 09:16:38 +0200 I wrote:
>>
>> I just noticed that in the Harbour c output, the EOL is LF (0x0A)
>> when the standard in Win32 (my environment) is CR+LF.
>>
>> This is true for all those combinations:
>> harbour myPrg -n
>> harbour myPrg -n -gc
>> harbour myPrg -n -gc0
>> harbour myPrg -n -gc1
>> harbour myPrg -n -gc2
>>
>> The C compiler (BCB 5.0) does not complain, but my editor does.
>> This is true for current code and a sample I made 5 months ago
>> (but noticed it only today).
>>
>> Was it intentional, or something that need to be fixed ?
>
> I had just stumbled on this agian when I needed to use the
> Windows Notepad to load the c file (the version that arrive
> with Win2000 see the source as one long line).
>
> Is there a chance to use OS EOL
> or at least have a flag to control it?
>
> Thanks,
>
>  Chen.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From niki at synel.co.il  Mon Sep 15 09:37:13 2008
From: niki at synel.co.il (Chen Kedem)
Date: Mon Sep 15 09:37:51 2008
Subject: [Harbour] RE: CodeGuard errors in MT mode
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C03268A6A13@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C03268A6A13@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <1A07FEDC778C3E4AA417F089511F859C03268A6A16@Mail-yoq.SYNEL-COMPANY.LTD>

Przemek,

> Probably CG does not recognize TLS data correctly.

I saw a USENET post from 2001 with complain about the same problem, there was no reply.

> Maybe it has some switches to make it working?
> As workaround you can disable using TLS directly in hbthread.h

I found no switches (apart for disableing must CG functionality),
with #undef HB_USE_TLS all seems to work with no warnings.

We can add #if !defined(__CODEGUARD__) ... like Borland allow itself to do,
not sure its a good idea to start having such hacks.


  Chen.
From harbour.01 at syenar.hu  Mon Sep 15 09:38:06 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 09:38:17 2008
Subject: [Harbour] Q: Enable HB_FM_WIN32_ALLOC by default?
In-Reply-To: <48CE5979.2030203@dbtopas.lt>
References: <0BD79432-ADBE-4818-BB9B-221F3E3A0A70@syenar.hu>
	<48CE5979.2030203@dbtopas.lt>
Message-ID: <D2D3B90C-0FC8-462A-81E3-5C7AA3933604@syenar.hu>

>>
>> Opinions?
>
> Hi,
>
>
> I've used to test BCC and MinGW speed some time ago. BCC worked  
> faster on speedtst.prg. Do we have some specific test for memory  
> manager? It can answer the question what is faster and how much?

I agree to check speed, too, but it's not only
speed, BCC55 MM is so simple, that a simple
loop creating arrays can make it choke. So I'd
count on efficiency and consistency too.

Brgds,
Viktor

From mbelgrano at deltain.it  Mon Sep 15 09:57:02 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 15 09:57:13 2008
Subject: [Harbour] ChangeLog 2008-09-13 18:49 UTC+0200
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20080913235112.GA24595@34-mo7-2.acn.waw.pl>
References: <20080913171844.GA7892@34-mo7-2.acn.waw.pl><AFB948164110ED43B5EB849E8DEEF03815EF80@SRV02.deltain.net>
	<20080913235112.GA24595@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF8E@SRV02.deltain.net>

How This is different from multi windows gt by pritpal bedi?
"extending GT API adding multiwindow interface" /"Multiwindows gt"

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of PrzemysL?aw
Czerpak
Sent: Sunday, September 14, 2008 1:51 AM
To: Harbour Project Main Developer List.
Subject: Re: RE: [Harbour] ChangeLog 2008-09-13 18:49 UTC+0200
PrzemyslawCzerpak(druzus/at/priv.onet.pl)

On Sun, 14 Sep 2008, Massimo Belgrano wrote:

Hi Massimo,

> A little question for Przemyslaw 
> Will each thread have independent console?

Yes it will. I'll add such functionality in few weeks.
I only have to think a while on extending GT API adding
multiwindow interface and RT GT switching so each thread
can use its own GT driver tuned for given job.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From lorenzo.fiorini at gmail.com  Mon Sep 15 09:59:52 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 15 09:59:59 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809150659q666ff798u1abd9a5877e7104@mail.gmail.com>

On Mon, Sep 15, 2008 at 1:39 PM, Przemys?aw Czerpak <druzus@acn.waw.pl> wrote:

>      Please make test with different C compiler and send results to
>      devel list.

Fedora 9 box:

gcc (GCC) 4.3.0 20080428 (Red Hat 4.3.0-8)
Copyright (C) 2008 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

ST:

Harbour 1.1.0dev (Rev. 9406), Linux 2.6.26.3-29.fc9.i686 i686
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.05
CPU usage -> secondsCPU()

c:=L_C ->                                             0.04
n:=L_N ->                                             0.03
d:=L_D ->                                             0.03
c:=M_C ->                                             0.04
n:=M_N ->                                             0.03
d:=M_D ->                                             0.03
(sh) c:=F_C ->                                        0.22
(sh) n:=F_N ->                                        0.18
(sh) d:=F_D ->                                        0.07
(ex) c:=F_C ->                                        0.21
(ex) n:=F_N ->                                        0.17
(ex) d:=F_D ->                                        0.07
n:=o:GenCode ->                                       0.14
round(i/1000,2) ->                                    0.22
str(i/1000) ->                                        0.54
val(a3[i%ARR_LEN+1]) ->                               0.39
dtos(j+i%10000-5000) ->                               0.45
eval({||i%ARR_LEN}) ->                                0.20
eval({|x|x%ARR_LEN}) ->                               0.21
eval({|x|f1(x)}) ->                                   0.28
&('f1('+str(i)+')') ->                                3.33
eval([&('{|x|f1(x)}')]) ->                            0.30
j := valtype(a)+valtype(i) ->                         0.53
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                0.75
j := val(a2[i%ARR_LEN+1]) ->                          0.46
j := a2[i%ARR_LEN+1] == s ->                          0.27
j := a2[i%ARR_LEN+1] = s ->                           0.30
j := a2[i%ARR_LEN+1] >= s ->                          0.29
j := a2[i%ARR_LEN+1] < s ->                           0.30
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         1.17
f0() ->                                               0.10
f1(i) ->                                              0.14
f2(c[8]) ->                                           0.12
f2(c[40000]) ->                                       0.11
f2(@c[40000]) ->                                      0.11
f2(c[40000]); c2:=c ->                                0.15
f2(@c[40000]); c2:=c ->                               0.15
f3(a,a2,c,i,j,t,bc) ->                                0.34
f2(a2) ->                                             0.12
s:=f4() ->                                            4.00
ascan(a,i%ARR_LEN) ->                                 0.28
ascan(a2,c+chr(i%64+64)) ->                           0.97
ascan(a,{|x|x==i%ARR_LEN}) ->                         2.66
============================================================
total application time:                              22.65
total real time:                                     22.65

MT:

Harbour 1.1.0dev (Rev. 9406), Linux 2.6.26.3-29.fc9.i686 i686
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.20
CPU usage -> secondsCPU()

c:=L_C ->                                             0.22
n:=L_N ->                                             0.11
d:=L_D ->                                             0.13
c:=M_C ->                                             0.23
n:=M_N ->                                             0.14
d:=M_D ->                                             0.14
(sh) c:=F_C ->                                        0.52
(sh) n:=F_N ->                                        0.25
(sh) d:=F_D ->                                        0.15
(ex) c:=F_C ->                                        0.53
(ex) n:=F_N ->                                        0.27
(ex) d:=F_D ->                                        0.17
n:=o:GenCode ->                                       0.58
round(i/1000,2) ->                                    0.67
str(i/1000) ->                                        1.09
val(a3[i%ARR_LEN+1]) ->                               1.13
dtos(j+i%10000-5000) ->                               1.22
eval({||i%ARR_LEN}) ->                                0.82
eval({|x|x%ARR_LEN}) ->                               0.89
eval({|x|f1(x)}) ->                                   1.41
&('f1('+str(i)+')') ->                                6.03
eval([&('{|x|f1(x)}')]) ->                            1.38
j := valtype(a)+valtype(i) ->                         1.55
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                2.08
j := val(a2[i%ARR_LEN+1]) ->                          1.27
j := a2[i%ARR_LEN+1] == s ->                          1.03
j := a2[i%ARR_LEN+1] = s ->                           1.08
j := a2[i%ARR_LEN+1] >= s ->                          1.06
j := a2[i%ARR_LEN+1] < s ->                           1.08
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         3.32
f0() ->                                               0.50
f1(i) ->                                              0.67
f2(c[8]) ->                                           0.67
f2(c[40000]) ->                                       0.66
f2(@c[40000]) ->                                      0.58
f2(c[40000]); c2:=c ->                                0.91
f2(@c[40000]); c2:=c ->                               0.80
f3(a,a2,c,i,j,t,bc) ->                                1.58
f2(a2) ->                                             0.68
s:=f4() ->                                            4.83
ascan(a,i%ARR_LEN) ->                                 0.88
ascan(a2,c+chr(i%64+64)) ->                           2.66
ascan(a,{|x|x==i%ARR_LEN}) ->                        10.22
============================================================
total application time:                              64.80
total real time:                                     64.88

best regards,
Lorenzo
From mbelgrano at deltain.it  Mon Sep 15 10:06:21 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 15 10:07:06 2008
Subject: [Harbour] RE: CodeGuard errors in MT mode
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C03268A6A16@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C03268A6A13@Mail-yoq.SYNEL-COMPANY.LTD>
	<1A07FEDC778C3E4AA417F089511F859C03268A6A16@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF90@SRV02.deltain.net>

Have you harbour post from 2001?
Can you sen me?

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Chen Kedem
Sent: Monday, September 15, 2008 3:37 PM
To: harbour@harbour-project.org
Subject: [Harbour] RE: CodeGuard errors in MT mode

Przemek,

> Probably CG does not recognize TLS data correctly.

I saw a USENET post from 2001 with complain about the same problem,
there was no reply.

> Maybe it has some switches to make it working?
> As workaround you can disable using TLS directly in hbthread.h

I found no switches (apart for disableing must CG functionality),
with #undef HB_USE_TLS all seems to work with no warnings.

We can add #if !defined(__CODEGUARD__) ... like Borland allow itself to
do,
not sure its a good idea to start having such hacks.


  Chen.
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From gvarona at ec-red.com  Mon Sep 15 10:08:39 2008
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Mon Sep 15 10:09:06 2008
Subject: [Harbour] Error Building Harbour from SVN
Message-ID: <48CE6C67.1070208@ec-red.com>

Hi:

Trying buil Harbour from last SVN, I got this:

D:\harbour>make_gnu clean
config/global.cf:44: config/w32/mingw32.cf: No such file or directory
make: *** No rule to make target `config/w32/mingw32.cf'.  Stop.

D:\harbour>make_gnu clean
config/global.cf:44: config/w32/mingw32.cf: No such file or directory
make: *** No rule to make target `config/w32/mingw32.cf'.  Stop.

D:\harbour>make_gnu
config/global.cf:44: config/w32/mingw32.cf: No such file or directory
make: *** No rule to make target `config/w32/mingw32.cf'.  Stop.

D:\harbour>

what es missing?

TIA

Salu2,
GVS


From miguelangel at marchuet.net  Mon Sep 15 10:12:07 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Mon Sep 15 10:11:31 2008
Subject: [Harbour] questions about MT, to przemek
In-Reply-To: <20080915105131.GA18501@34-mo7-2.acn.waw.pl>
References: <48CE3378.6070508@marchuet.net>
	<20080915105131.GA18501@34-mo7-2.acn.waw.pl>
Message-ID: <48CE6D37.7040201@marchuet.net>

I was thinking about LetoDB, working with a thread for each connection,
but using the same wa all connections.

I think it would be interesting to be able to also provide public wa for all threads.
(configuration application, semaphores inter applications, data servers ,...) could be
valid examples.

or it may be possible communication between threads, so that one thread to another request
information that is the one that is open wa.

Many thank's for your great work

Best regards,
Miguel Angel Marchuet


Przemys?aw Czerpak escribi?:
> On Mon, 15 Sep 2008, Miguel Angel Marchuet wrote:
> 
> Hi Miguel,
> 
>> Are there some necessities of critical LOCK operations at MT rdd ?
>> How will work wa at MT ?
> 
> Workareas are fully thread separated. Each threads uses it's own
> workareas so there is not need to synchronize access to WA.
> The same if for SETs (so _SET_DELETED, and similar switches are
> local to thread and does not effect other threads) and
> some RDD attributes like default RDD driver, current WA, neterr
> flag, etc. Each thread has it's own table for ALIASes and aliases
> are not shared between threads. Just like memvars.
> Only RDD nodes and RDD settings (rddInfo()) are global to application.
> 
>> Are there public wa for all MT and private wa for one MT?
> 
> private for MT.
> 
>> Will it be possible to close all private wa of a single MT?
> 
> dbCloseAll() - it closes all workareas open by thread which
> executes it. When you terminate thread then all open by this
> thread WA are closed automatically.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> __________ Informaci?n de NOD32, revisi?n 3442 (20080915) __________
> 
> Este mensaje ha sido analizado con NOD32 antivirus system
> http://www.nod32.com
> 
> 
> 

From lorenzo.fiorini at gmail.com  Mon Sep 15 10:27:10 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 15 10:27:16 2008
Subject: [Harbour] Re: Harbour c output with LF only
In-Reply-To: <7F688FD3-E868-49CD-95F0-6C139F603E19@syenar.hu>
References: <41809CD6.4B86@synel.co.il> <48CE6763.2E38@synel.co.il>
	<7F688FD3-E868-49CD-95F0-6C139F603E19@syenar.hu>
Message-ID: <9257026e0809150727g57def72x3415fbf94a466f1d@mail.gmail.com>

On Mon, Sep 15, 2008 at 3:33 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Related to that I've noticed a few days ago that the
> error output contains \r chars even on Windows, I guess
> the reason is screen formatting, but when directed into
> a file, it's a bit distracting.

I've "fixed" it months ago: in line 155 of hbgenerr.c.

snprintf( buffer, sizeof( buffer ), "\r%s(%i) ",

I've replaced '\r' with '\n' like:

snprintf( buffer, sizeof( buffer ), "\n%s(%i) ",

best regards,
Lorenzo
From info at fsgiudice.com  Mon Sep 15 10:28:05 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Sep 15 10:28:15 2008
Subject: [Harbour] 2008-09-14 19:15
	UTC+0200	Viktor	Szakats(harbour.01syenar hu)
In-Reply-To: <E59C4C1B-429E-411F-B0D7-3795666AF47C@syenar.hu>
References: <01c9168e$Blat.v2.6.2$73943b52$14206855e29a@127.0.0.1>	<AFB948164110ED43B5EB849E8DEEF03815EF86@SRV02.deltain.net>	<AFB948164110ED43B5EB849E8DEEF03815EF87@SRV02.deltain.net>	<48CE3E39.4090506@fsgiudice.com>
	<E59C4C1B-429E-411F-B0D7-3795666AF47C@syenar.hu>
Message-ID: <48CE70F5.8010601@fsgiudice.com>

Hi Viktor,

done, thank you.

Best Regards

Francesco

Szak?ts Viktor ha scritto:
>>
> Hi Francesco,
> 
>> please set
>>
>> set HB_BUILD_ST=no
>> set CLIBFLAGS=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM -tWM
> 
> You should be using C_USR instead of CLIBFLAGS.
> 
> CLIBFLAGS is just ignored in recent versions.
> 
> Brgds,
> Viktor

From mbelgrano at deltain.it  Mon Sep 15 10:32:46 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 15 10:32:56 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <l7msc450c22o3s1k1pm415hcunbr4cv7q0@4ax.com>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
	<l7msc450c22o3s1k1pm415hcunbr4cv7q0@4ax.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF91@SRV02.deltain.net>

set HB_BUILD_ST=no
set C_USR=-DHB_WIN32_IO -DHB_FM_WIN32_ALLOC -DHB_MT_VM -tWM -OS -Ov -Oi -Oc -Q
Intel core 2 2.0 ghz,2 gb ram,bcc 50

09/15/08 16:22:13 Harbour 1.1.0dev (Rev. 9406) (MT), Windows Vista 6.0.6001 Service Pack 1 
ARR_LEN =         16 
N_LOOPS =    1000000 
empty loops overhead =          0.39 
CPU usage -> secondsCPU() 
 
c:=L_C ->                                             0.73 
n:=L_N ->                                             0.36 
d:=L_D ->                                             0.42 
c:=M_C ->                                             0.75 
n:=M_N ->                                             0.41 
d:=M_D ->                                             0.45 
(sh) c:=F_C ->                                        1.81 
(sh) n:=F_N ->                                        0.81 
(sh) d:=F_D ->                                        0.53 
(ex) c:=F_C ->                                        1.73 
(ex) n:=F_N ->                                        0.58 
(ex) d:=F_D ->                                        0.50 
n:=o:GenCode ->                                       1.36 
n:=o[8] ->                                            1.02 
round(i/1000,2) ->                                    1.41 
str(i/1000) ->                                        3.14 
val(a3[i%ARR_LEN+1]) ->                               2.75 
dtos(j+i%10000-5000) ->                               2.98 
eval({||i%ARR_LEN}) ->                                1.77 
eval({|x|x%ARR_LEN},i) ->                             2.05 
eval({|x|f1(x)},i) ->                                 3.80 
&('f1('+str(i)+')') ->                               20.67 
eval([&('{|x|f1(x)}')]) ->                            3.50 
j := valtype(a)+valtype(i) ->                         4.11 
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                5.86 
j := val(a2[i%ARR_LEN+1]) ->                          3.27 
j := a2[i%ARR_LEN+1] == s ->                          2.67 
j := a2[i%ARR_LEN+1] = s ->                           3.08 
j := a2[i%ARR_LEN+1] >= s ->                          3.08 
j := a2[i%ARR_LEN+1] < s ->                           2.78 
aadd(aa,{i,j,s,a,a2,t,bc}) ->                        10.55 
f0() ->                                               1.08 
f1(i) ->                                              1.42 
f2(c[8]) ->                                           1.52 
f2(c[40000]) ->                                       1.41 
f2(@c[40000]) ->                                      1.48 
f2(c[40000]); c2:=c ->                                2.63 
f2(@c[40000]); c2:=c ->                               2.19 
f3(a,a2,c,i,j,t,bc) ->                                4.69 
f2(a2) ->                                             1.48 
s:=f4() ->                                           18.28 
s:=f5() ->                                            2.95 
ascan(a,i%ARR_LEN) ->                                 2.05 
ascan(a2,c+chr(i%64+64)) ->                           6.67 
ascan(a,{|x|x==i%ARR_LEN}) ->                        23.92 
============================================================ 
total application time:                             178.30 
total real time:                                    175.76 



-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Toninho@fwi
Sent: Monday, September 15, 2008 2:50 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak(druzus/at/priv.onet.pl)

>      Please make test with different C compiler and send results to
>      devel list.

Przemek, using Codegear 6.10 and SET C_USR=-DHB_GUI -DHB_NO_TRACE
-DHB_FM_STATISTICS_OFF -DHB_FM_WIN32_ALLOC -DADS_LIB_VERSION=700
-DHB_HASH_MSG_ITEMS

MT real time: 86.73
ST real time: 59.39

---cut---
09/15/08 09:41:59 Harbour 1.1.0dev (Rev. 9405) (MT), Windows Vista
6.0.6000
ARR_LEN =         16
N_LOOPS =    1000000                                  -MT-    -ST-
empty loops overhead =                                0.19    0.09
CPU usage -> secondsCPU()

c:=L_C ->                                             0.36    0.13
n:=L_N ->                                             0.16    0.11
d:=L_D ->                                             0.16    0.20
c:=M_C ->                                             0.50    0.25
n:=M_N ->                                             0.17    0.13
d:=M_D ->                                             0.16    0.13
(sh) c:=F_C ->                                        0.84    0.75
(sh) n:=F_N ->                                        0.58    0.36
(sh) d:=F_D ->                                        0.25    0.20
(ex) c:=F_C ->                                        0.55    0.42
(ex) n:=F_N ->                                        0.50    0.41
(ex) d:=F_D ->                                        0.25    0.20
n:=o:GenCode ->                                       0.64    0.31
n:=o[8] ->                                            0.50    0.27
round(i/1000,2) ->                                    0.66    0.52
str(i/1000) ->                                        3.77    3.86
val(a3[i%ARR_LEN+1]) ->                               2.02    1.39
dtos(j+i%10000-5000) ->                               1.52    1.23
eval({||i%ARR_LEN}) ->                                0.83    0.42
eval({|x|x%ARR_LEN},i) ->                             0.91    0.47
eval({|x|f1(x)},i) ->                                 1.36    0.67
&('f1('+str(i)+')') ->                               10.83   10.84
eval([&('{|x|f1(x)}')]) ->                            1.38    0.69
j := valtype(a)+valtype(i) ->                         1.53    0.89
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                4.23    3.61
j := val(a2[i%ARR_LEN+1]) ->                          1.81    1.20
j := a2[i%ARR_LEN+1] == s ->                          1.52    0.77
j := a2[i%ARR_LEN+1] = s ->                           1.56    0.83
j := a2[i%ARR_LEN+1] >= s ->                          1.56    0.81
j := a2[i%ARR_LEN+1] < s ->                           1.56    0.83
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         4.59    2.72
f0() ->                                               0.41    0.22
f1(i) ->                                              0.58    0.36
f2(c[8]) ->                                           0.63    0.25
f2(c[40000]) ->                                       0.63    0.27
f2(@c[40000]) ->                                      0.44    0.22
f2(c[40000]); c2:=c ->                                1.02    0.39
f2(@c[40000]); c2:=c ->                               0.80    0.33
f3(a,a2,c,i,j,t,bc) ->                                1.88    0.83
f2(a2) ->                                             0.64    0.27
s:=f4() ->                                            8.08    7.53
s:=f5() ->                                            0.98    0.61
ascan(a,i%ARR_LEN) ->                                 0.97    0.56
ascan(a2,c+chr(i%64+64)) ->                           3.27    2.02
ascan(a,{|x|x==i%ARR_LEN}) ->                        10.67    5.63
=====================================================================
total application time:                              86.67   59.33
total real time:                                     86.73   59.39
---cut---


Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From sscc at mweb.co.za  Mon Sep 15 10:40:58 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Mon Sep 15 10:41:14 2008
Subject: R: [Harbour] where is hbcom.lib?
In-Reply-To: <A395CFBF-ED1A-42E8-AC44-60944A72D096@syenar.hu>
References: <AFB948164110ED43B5EB849E8DEEF03803760C@SRV02.deltain.net>	<AFB948164110ED43B5EB849E8DEEF03803760F@SRV02.deltain.net>	<2925B4F2-7760-441D-9607-545823FE299A@syenar.hu>	<48CA17A4.6000205@mweb.co.za>
	<A395CFBF-ED1A-42E8-AC44-60944A72D096@syenar.hu>
Message-ID: <48CE73FA.1050307@mweb.co.za>

Szak?ts Viktor wrote:

> I'm in the process adding this to hbw32.
> 
> The only remaining problem is itoa() and ltoa()
> which both generate a warning in MSVS 64-bit mode.
> If you could find some alternative solution for
> these (like snprintf()), I could finalize the code
> and add it to the repository (1.1 that is).

I see you have done it, sorry to be so slow. I will try and test soon.

Thanks
Alex
From harbour.01 at syenar.hu  Mon Sep 15 10:44:56 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 10:45:15 2008
Subject: [Harbour] Release 1.0.1 #4
Message-ID: <000421D6-D91D-4DDF-9D92-7DA4468322EB@syenar.hu>

Hi all,

OS/2 32/64/PPC/x86 Unibin added.

Used external packages (on my system that is):
- Allegro 4.2.2
- Apollo 6.1.0.4
- libcurl 7.19.0 (7.18.2 for DMC builds)
- Firebird 2.0.4
- FreeImage 3.11.0
- libgd 2.0.34
- libharu 2.1.0
- mysql 5.0.47
- pgsql 8.3.3
- ADS 9.00

Tested platforms:
- Windows
	BCC 5.51
	BCC 5.82
	GCC Cygwin 3.4.4
	GCC MinGW 3.4.5 (on msys 1.0.10)
	GCC MinGW 4.1.2 (on msys 1.0.10)
TODO	GCC MinGW 3.4.5 (cross compile on OpenSuse 10.3, FC3)
	GCC MinGW 4.2.1 (cross compile on Ubuntu 8.04.1)
	GCC MinGW 4.3.2 (cross compile on Fedora 9)
	GCC MinGW 4.3.2a (on msys 1.0.10)
TODO	MSVC 6.0 (HBODBC: needs fresh ODBC headers from MSSDK)
TODO	MSVC 7.1 (MSVS 2003)
	MSVC 8.0 (MSVS 2005)
	MSVC 8.0 (MSVS 2005) C++
	MSVC 9.0 (MSVS 2008 SP1)
	MSVC 9.0 (MSVS 2008 SP1) C++
	MSVC 9.0 (MSVS 2008 SP1) 64 bit
	MSVC 9.0 (MSVS 2008 SP1) C++ 64 bit (cross-compile on Win32)
	PellesC 4.5 (HBSQLIT3: interface only)
	PellesC 5.0
	PellesC 5.0 64 bit (cross-compile on Win32)
	Open Watcom 1.7 (HBSQLIT3: interface only)
	Digital Mars C 4.50
- WinCE
TODO	MSVC 6.0 (eVC4)
TODO	GCC 4.0.1 (mingw32ce 0.51.0) (cross-compile on Ubuntu 8.04.1)
TODO	GCC 4.1.0 (mingw32ce 0.50.0) (cross-compile on OpenSuse 10.3, FC3)
	GCC ?.?.? (mingw32ce 0.50-1) (cross-compile on Fedora 9)
- Linux
	GCC 4.2.3 (Ubuntu 8.04.1)
	GCC 4.3.0 (Fedora 9)
TODO	GCC 4.2.1 (SuSE 10.3)
TODO	Open Watcom (with patches only. FAILED)
TODO	GCC (RedHat 7.3)
	GCC (OpenSuse 10.3)
TODO	GCC (FC3)
- OS X
TODO	GCC 4.0.1 i386, x86_64, PPC, PPC64 (Leopard 10.5.4 PPC + XCode 3.1)
	GCC 4.0.1 i386, x86_64, PPC, PPC64 (Leopard 10.5.4 Intel + XCode 3.1)
TODO	GCC 4.0.1 PPC (Leopard 10.5.4 PPC + XCode 3.0) (non-default build)
- Solaris
TODO	GCC 3.4.3 i86pc (SunOS 5.11 - OpenSolaris 2008.05)
- BSD
TODO	Reported OK (No details)
- HPUX
TODO	Reported OK (a week ago in /trunk)
- OS/2
	GCC 3.3.5 (EMX/Innotek)
- DOS
TODO	GCC 3.3.2 32 bit (DJGPP) (DJGPP bash port)
	GCC 4.2.3 32 bit (DJGPP) ('make install' won't properly work)
TODO	Open Watcom 1.7 (command.com)

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Mon Sep 15 10:50:26 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 15 10:50:33 2008
Subject: [Harbour] Error Building Harbour from SVN
In-Reply-To: <48CE6C67.1070208@ec-red.com>
References: <48CE6C67.1070208@ec-red.com>
Message-ID: <9257026e0809150750j5e9612efg173d1f6085a9a9ac@mail.gmail.com>

On Mon, Sep 15, 2008 at 4:08 PM, Guillermo Varona Silup?
<gvarona@ec-red.com> wrote:

> Trying buil Harbour from last SVN, I got this:
>
> D:\harbour>make_gnu clean
> config/global.cf:44: config/w32/mingw32.cf: No such file or directory
> make: *** No rule to make target `config/w32/mingw32.cf'.  Stop.
>
> D:\harbour>make_gnu clean
> config/global.cf:44: config/w32/mingw32.cf: No such file or directory
> make: *** No rule to make target `config/w32/mingw32.cf'.  Stop.
>
> D:\harbour>make_gnu
> config/global.cf:44: config/w32/mingw32.cf: No such file or directory
> make: *** No rule to make target `config/w32/mingw32.cf'.  Stop.
>
> D:\harbour>
>
> what es missing?

from ChangeLog:

2008-09-14 12:38 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  - config/w32/bcc32.cf
  + config/w32/bcc.cf
  - config/w32/mingw32.cf
  + config/w32/mingw.cf
    * Cleaning some '32's from HB_COMPILER names.
      BCC and MinGW 64-bit are coming.
    ; Please update your build files. INCOMPATIBLE.

best regards,
Lorenzo
From mbelgrano at deltain.it  Mon Sep 15 10:52:51 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 15 10:53:03 2008
Subject: [Harbour] 2008-09-14 22:36 UTC+0200 Viktor Szakats
	(harbour.01syenar hu)
In-Reply-To: <20080914223628.GC7427@34-mo7-2.acn.waw.pl>
References: <01c916aa$Blat.v2.6.2$bd7342ce$144891151d38@127.0.0.1><20080914213725.GA2355@34-mo7-2.acn.waw.pl><433BCBB0-9D89-47DE-ADD3-552D441DBDDB@syenar.hu>
	<20080914223628.GC7427@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF92@SRV02.deltain.net>



-----Original Message-----
>From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf >Of PrzemysL?aw
Czerpak
>
> Hm, one more thought... why is it good that in
>> GNU make we have two different VMs in parallel?>
>
>Because users have single binaries and can create
>any application he like. MT or ST without Harbour
>core code recompilation.

How can be possible?
For example for speedtest.prg how can create mt & st whithout core code
recompilation?
From druzus at acn.waw.pl  Mon Sep 15 10:56:12 2008
From: druzus at acn.waw.pl (=?utf-8?Q?Przemys=C5=82aw?= Czerpak)
Date: Mon Sep 15 10:56:50 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0809150659q666ff798u1abd9a5877e7104@mail.gmail.com>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
	<9257026e0809150659q666ff798u1abd9a5877e7104@mail.gmail.com>
Message-ID: <20080915145612.GA3845@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> Fedora 9 box:
> Harbour 1.1.0dev (Rev. 9406), Linux 2.6.26.3-29.fc9.i686 i686
[...]
> ============================================================
> total application time:                              22.65
[...]
> MT:
> Harbour 1.1.0dev (Rev. 9406), Linux 2.6.26.3-29.fc9.i686 i686
> ============================================================
[...]
> total application time:                              64.80

Thanks for test. Id possible please recompile Harbour with
HB_USE_TLS and send MT mode results. It should give significant
improvement.
HB_USE_TLS is default only for BCC builds now.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Sep 15 11:12:29 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 11:12:44 2008
Subject: [Harbour] Error Building Harbour from SVN
In-Reply-To: <48CE6C67.1070208@ec-red.com>
References: <48CE6C67.1070208@ec-red.com>
Message-ID: <6EB81A71-7392-497D-B499-10CEC300F622@syenar.hu>

Hi,

Pls read this entry (and the next one):
2008-09-14 12:38 UTC+0200

Brgds,
Viktor

On 2008.09.15., at 16:08, Guillermo Varona Silup? wrote:

> Hi:
>
> Trying buil Harbour from last SVN, I got this:
>
> D:\harbour>make_gnu clean
> config/global.cf:44: config/w32/mingw32.cf: No such file or directory
> make: *** No rule to make target `config/w32/mingw32.cf'.  Stop.
>
> D:\harbour>make_gnu clean
> config/global.cf:44: config/w32/mingw32.cf: No such file or directory
> make: *** No rule to make target `config/w32/mingw32.cf'.  Stop.
>
> D:\harbour>make_gnu
> config/global.cf:44: config/w32/mingw32.cf: No such file or directory
> make: *** No rule to make target `config/w32/mingw32.cf'.  Stop.
>
> D:\harbour>
>
> what es missing?
>
> TIA
>
> Salu2,
> GVS
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Mon Sep 15 11:18:27 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 15 11:18:37 2008
Subject: R: [Harbour] where is hbcom.lib?
In-Reply-To: <48CA17A4.6000205@mweb.co.za>
References: <AFB948164110ED43B5EB849E8DEEF03803760C@SRV02.deltain.net>	<AFB948164110ED43B5EB849E8DEEF03803760F@SRV02.deltain.net><2925B4F2-7760-441D-9607-545823FE299A@syenar.hu>
	<48CA17A4.6000205@mweb.co.za>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF93@SRV02.deltain.net>

Is hbcomm.lib replacement?


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Alex Strickland
Sent: Friday, September 12, 2008 9:18 AM
To: Harbour Project Main Developer List.
Subject: Re: R: [Harbour] where is hbcom.lib?

Szak?ts Viktor wrote:
> Too bad it's C++ (unnecessarily BTW), non-MT friendly, Windows 
> specific and it has an unknown license with a 3rd party copyright 
> holder from a former commercial site.
> 
> I'd suggest to try hbtpathy.

I attach my efforts from a while ago - WinPort, it works for me, although I know that the setting of timeouts code sucks badly (well the rest might suck as well - but here it is). Any improvements gratefully accepted.

Regards
Alex
From harbour.01 at syenar.hu  Mon Sep 15 11:34:30 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 11:34:46 2008
Subject: [Harbour] Re: Harbour c output with LF only
In-Reply-To: <9257026e0809150727g57def72x3415fbf94a466f1d@mail.gmail.com>
References: <41809CD6.4B86@synel.co.il> <48CE6763.2E38@synel.co.il>
	<7F688FD3-E868-49CD-95F0-6C139F603E19@syenar.hu>
	<9257026e0809150727g57def72x3415fbf94a466f1d@mail.gmail.com>
Message-ID: <B29C58E7-CFC0-421E-9BC8-AC0D5799B35C@syenar.hu>

Yes, this is it, but doesn't it have some bad side
effects? I didn't dare to change this thinking it
\r was used for a reason.

If it wasn't, we should change it.

As for the LF in generated .c files, I guess it's
caused by fprintf() calls not doing any translations
on \n, so it's not converted to \r\n on any systems,
just copied to the file as-is.

Brgds,
Viktor

On 2008.09.15., at 16:27, Lorenzo Fiorini wrote:

> On Mon, Sep 15, 2008 at 3:33 PM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
>> Related to that I've noticed a few days ago that the
>> error output contains \r chars even on Windows, I guess
>> the reason is screen formatting, but when directed into
>> a file, it's a bit distracting.
>
> I've "fixed" it months ago: in line 155 of hbgenerr.c.
>
> snprintf( buffer, sizeof( buffer ), "\r%s(%i) ",
>
> I've replaced '\r' with '\n' like:
>
> snprintf( buffer, sizeof( buffer ), "\n%s(%i) ",
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From dbtopas at dbtopas.lt  Mon Sep 15 11:37:58 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Sep 15 11:37:56 2008
Subject: [Harbour] Q: Enable HB_FM_WIN32_ALLOC by default?
In-Reply-To: <D2D3B90C-0FC8-462A-81E3-5C7AA3933604@syenar.hu>
References: <0BD79432-ADBE-4818-BB9B-221F3E3A0A70@syenar.hu>	<48CE5979.2030203@dbtopas.lt>
	<D2D3B90C-0FC8-462A-81E3-5C7AA3933604@syenar.hu>
Message-ID: <48CE8156.40806@dbtopas.lt>

>> I've used to test BCC and MinGW speed some time ago. BCC worked faster 
>> on speedtst.prg. Do we have some specific test for memory manager? It 
>> can answer the question what is faster and how much?
> 
> I agree to check speed, too, but it's not only
> speed, BCC55 MM is so simple, that a simple
> loop creating arrays can make it choke. So I'd
> count on efficiency and consistency too.


Hi,


of cause MM should be bug-free. Can You (or anyone) send me sample code 
indicating BCC MM bugs? I've not found any problem with it yet.

I've just compared BCC MM vs. Windows native MM (LocalAlloc/LocalFree). 
The result are interesting. On my IntelCeleron 2.2GHz/256MB RAM machine 
with no other application running speedtst.prg gives:
   BCC: 135 seconds
   WIN: 108 seconds
But if I run any application that uses 30-150 MB of RAM (ex. 
Thunderbird, Firefox, etc), result are:
   BCC: 137 seconds
   WIN: 238 seconds

On another machine Pentium4 3GHz, 512MB RAM I do not find this effect 
and BCC is always faster regardless memory usage of other processes:
   BCC: 53 seconds
   WIN: 89 seconds


Best regards,
Mindaugas

P.S. all numbers are average of 4 tests to minimize variance of 
execution time estimate.

From druzus at acn.waw.pl  Mon Sep 15 11:44:45 2008
From: druzus at acn.waw.pl (=?utf-8?Q?Przemys=C5=82aw?= Czerpak)
Date: Mon Sep 15 11:45:23 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48CE57C6.2030006@dbtopas.lt>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
	<48CE57C6.2030006@dbtopas.lt>
Message-ID: <20080915154445.GA803@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> c:=L_C ->                                   0.30    0.86
> c:=M_C ->                                   0.30    0.86
> (sh) c:=F_C ->                              0.80    2.03
> (ex) c:=F_C ->                              0.72    2.03
> aadd(aa,{i,j,s,a,a2,t,bc}) ->               7.28   13.38
> f3(a,a2,c,i,j,t,bc) ->                      1.47    3.64
> f2(a2) ->                                   0.64    1.44
> s:=f5() ->                                  1.13    2.78
> ascan(a,i%ARR_LEN) ->                       1.11    1.80
> ascan(a2,c+chr(i%64+64)) ->                 3.59    6.50
> ascan(a,{|x|x==i%ARR_LEN}) ->              10.63   21.86

I left by mistake in at the beginning of fm.c:

   #undef HB_ATOM_INC
   #undef HB_ATOM_DEC

What effectively disabled using Interlocked*() functions
in Windows builds. I'll commit fix ASAP.
Please remove it and recompile Harbour. Then if possible
please repeat MT test on the same machine so we can compare
the cost of interlocked operations.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Sep 15 11:51:20 2008
From: druzus at acn.waw.pl (=?utf-8?Q?Przemys=C5=82aw?= Czerpak)
Date: Mon Sep 15 11:51:57 2008
Subject: [Harbour] 2008-09-14 22:36 UTC+0200 Viktor Szakats
	(harbour.01syenar hu)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF92@SRV02.deltain.net>
References: <20080914223628.GC7427@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815EF92@SRV02.deltain.net>
Message-ID: <20080915155120.GB803@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Massimo Belgrano wrote:
> >Because users have single binaries and can create
> >any application he like. MT or ST without Harbour
> >core code recompilation.
> How can be possible?
> For example for speedtest.prg how can create mt & st whithout core code
> recompilation?

Build Harbour without HB_BUILD_ST macro.
You will find two version of Harbour VM library: hbvm.lib and hbvmmt.lib.
Use first version to link single thread application and second one with
cw32mt to create MT program.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Sep 15 11:54:21 2008
From: druzus at acn.waw.pl (PrzemysÅaw Czerpak)
Date: Mon Sep 15 11:54:58 2008
Subject: [Harbour] 2008-09-15 17:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080915155421.GA12386@34-mo7-2.acn.waw.pl>

2008-09-15 17:53 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbthread.h
    + added assembler MT version of HB_ATOM_INC/HB_ATOM_DEC operation
      for x86@32

  * harbour/source/vm/fm.c
    ! removed #undef HB_ATOM_INC/HB_ATOM_DEC I left by mistake

best regards
Przemek
From lorenzo.fiorini at gmail.com  Mon Sep 15 11:56:25 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 15 11:56:31 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080915145612.GA3845@34-mo7-2.acn.waw.pl>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
	<9257026e0809150659q666ff798u1abd9a5877e7104@mail.gmail.com>
	<20080915145612.GA3845@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809150856o70e42fd4y25be13047d162bd5@mail.gmail.com>

On Mon, Sep 15, 2008 at 4:56 PM, Przemys?aw Czerpak <druzus@acn.waw.pl> wrote:

> Thanks for test. Id possible please recompile Harbour with
> HB_USE_TLS and send MT mode results. It should give significant
> improvement.
> HB_USE_TLS is default only for BCC builds now.

total real time:                                     34.68
vs
total real time:                                     64.88

Many thanks,
Lorenzo

ST:

Harbour 1.1.0dev (Rev. 9406), Linux 2.6.26.3-29.fc9.i686 i686
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.04
CPU usage -> secondsCPU()

c:=L_C ->                                             0.04
n:=L_N ->                                             0.04
d:=L_D ->                                             0.04
c:=M_C ->                                             0.06
n:=M_N ->                                             0.04
d:=M_D ->                                             0.05
(sh) c:=F_C ->                                        0.20
(sh) n:=F_N ->                                        0.19
(sh) d:=F_D ->                                        0.09
(ex) c:=F_C ->                                        0.19
(ex) n:=F_N ->                                        0.19
(ex) d:=F_D ->                                        0.09
n:=o:GenCode ->                                       0.17
round(i/1000,2) ->                                    0.21
str(i/1000) ->                                        0.54
val(a3[i%ARR_LEN+1]) ->                               0.41
dtos(j+i%10000-5000) ->                               0.44
eval({||i%ARR_LEN}) ->                                0.19
eval({|x|x%ARR_LEN}) ->                               0.22
eval({|x|f1(x)}) ->                                   0.35
&('f1('+str(i)+')') ->                                3.41
eval([&('{|x|f1(x)}')]) ->                            0.33
j := valtype(a)+valtype(i) ->                         0.56
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                0.79
j := val(a2[i%ARR_LEN+1]) ->                          0.45
j := a2[i%ARR_LEN+1] == s ->                          0.31
j := a2[i%ARR_LEN+1] = s ->                           0.31
j := a2[i%ARR_LEN+1] >= s ->                          0.31
j := a2[i%ARR_LEN+1] < s ->                           0.31
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         1.16
f0() ->                                               0.14
f1(i) ->                                              0.20
f2(c[8]) ->                                           0.16
f2(c[40000]) ->                                       0.16
f2(@c[40000]) ->                                      0.15
f2(c[40000]); c2:=c ->                                0.21
f2(@c[40000]); c2:=c ->                               0.19
f3(a,a2,c,i,j,t,bc) ->                                0.38
f2(a2) ->                                             0.20
s:=f4() ->                                            3.99
ascan(a,i%ARR_LEN) ->                                 0.30
ascan(a2,c+chr(i%64+64)) ->                           1.04
ascan(a,{|x|x==i%ARR_LEN}) ->                         2.62
============================================================
total application time:                              23.15
total real time:                                     23.18

MT:

Harbour 1.1.0dev (Rev. 9406), Linux 2.6.26.3-29.fc9.i686 i686
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.05
CPU usage -> secondsCPU()

c:=L_C ->                                             0.20
n:=L_N ->                                             0.06
d:=L_D ->                                             0.07
c:=M_C ->                                             0.21
n:=M_N ->                                             0.07
d:=M_D ->                                             0.07
(sh) c:=F_C ->                                        0.44
(sh) n:=F_N ->                                        0.19
(sh) d:=F_D ->                                        0.09
(ex) c:=F_C ->                                        0.44
(ex) n:=F_N ->                                        0.20
(ex) d:=F_D ->                                        0.09
n:=o:GenCode ->                                       0.27
round(i/1000,2) ->                                    0.22
str(i/1000) ->                                        0.70
val(a3[i%ARR_LEN+1]) ->                               0.61
dtos(j+i%10000-5000) ->                               0.67
eval({||i%ARR_LEN}) ->                                0.30
eval({|x|x%ARR_LEN}) ->                               0.32
eval({|x|f1(x)}) ->                                   0.46
&('f1('+str(i)+')') ->                                4.65
eval([&('{|x|f1(x)}')]) ->                            0.46
j := valtype(a)+valtype(i) ->                         0.87
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                1.15
j := val(a2[i%ARR_LEN+1]) ->                          0.70
j := a2[i%ARR_LEN+1] == s ->                          0.63
j := a2[i%ARR_LEN+1] = s ->                           0.67
j := a2[i%ARR_LEN+1] >= s ->                          0.66
j := a2[i%ARR_LEN+1] < s ->                           0.65
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         2.36
f0() ->                                               0.22
f1(i) ->                                              0.20
f2(c[8]) ->                                           0.27
f2(c[40000]) ->                                       0.28
f2(@c[40000]) ->                                      0.17
f2(c[40000]); c2:=c ->                                0.55
f2(@c[40000]); c2:=c ->                               0.39
f3(a,a2,c,i,j,t,bc) ->                                0.77
f2(a2) ->                                             0.29
s:=f4() ->                                            4.25
ascan(a,i%ARR_LEN) ->                                 0.39
ascan(a2,c+chr(i%64+64)) ->                           1.45
ascan(a,{|x|x==i%ARR_LEN}) ->                         4.77
============================================================
total application time:                              34.63
total real time:                                     34.68
From lkrausem at shaw.ca  Mon Sep 15 11:59:31 2008
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Mon Sep 15 11:59:47 2008
Subject: [Harbour] GPF upon app exiting
In-Reply-To: <o4vqc4d3qjih69tovl65van5bj0pcfcrk9@4ax.com>
References: <48CD70ED.4030609@shaw.ca>
	<o4vqc4d3qjih69tovl65van5bj0pcfcrk9@4ax.com>
Message-ID: <48CE8663.7080507@shaw.ca>

Toninho:

I'm hardly a CodeGuard expert... I couldn't get it to work correctly
when I was having a GPF with xHarbour a few months ago.  I tried
with BCC 5.8.2 but ran into other problems with C code I didn't
write that wouldn't compile under that version.  I don't even know
if BCC 5.5.1 comes with CG.

So hopefully someone better versed with CG can nudge us in the
right direction.

Regards,

Toninho@fwi wrote:
>> Just rebuild a small app I have with SVN 9396 and upon
>> closing the app I get a gpf that's logged in hb_outl.log
>> (it happens 3 times, just pasting here the 1st msg):
>>     
>
> Hi Luis.
>
> I'm sending the same problem yesterday to this list and I'm trying to
> debug it. Do you are a codeguard expert to help me please?  I'm
> reading a lot of tutorials on the net and none was help me...
>
> TIA, 
>
> Toninho.
>
> __________________________________________________
> Fa?a liga??es para outros computadores com o novo Yahoo! Messenger
> http://br.beta.messenger.yahoo.com/
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>   

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From sscc at mweb.co.za  Mon Sep 15 12:09:36 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Mon Sep 15 12:09:53 2008
Subject: R: [Harbour] where is hbcom.lib?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF93@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03803760C@SRV02.deltain.net>	<AFB948164110ED43B5EB849E8DEEF03803760F@SRV02.deltain.net><2925B4F2-7760-441D-9607-545823FE299A@syenar.hu>	<48CA17A4.6000205@mweb.co.za>
	<AFB948164110ED43B5EB849E8DEEF03815EF93@SRV02.deltain.net>
Message-ID: <48CE88C0.5060505@mweb.co.za>

Massimo Belgrano wrote:
> Is hbcomm.lib replacement?

I've never used hbcomm, this is what I wrote for myself and it should 
do the job. Only be careful of timeout management and queue management 
if the Windows defaults are not what you want.

Regards
Alex

From gvarona at ec-red.com  Mon Sep 15 12:27:04 2008
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Mon Sep 15 12:27:04 2008
Subject: [Harbour] Error Building Harbour from SVN
In-Reply-To: <6EB81A71-7392-497D-B499-10CEC300F622@syenar.hu>
References: <48CE6C67.1070208@ec-red.com>
	<6EB81A71-7392-497D-B499-10CEC300F622@syenar.hu>
Message-ID: <48CE8CD8.2020709@ec-red.com>

Szak?ts Viktor escribi?:
> Hi,
>
> Pls read this entry (and the next one):
> 2008-09-14 12:38 UTC+0200
Ok. Thanks you very much.

now i got this:

D:\harbour>make_gnu clean
make: *** mainstd: No such file or directory.  Stop.
make[3]: *** [clean] Error 2
make[2]: *** [clean] Error 2

D:\harbour>make_gnu
make: *** mainstd: No such file or directory.  Stop.
make[3]: *** [first] Error 2
make[2]: *** [first] Error 2
make[3]: *** [ctmisc.o] Error 1
make[2]: *** [descend] Error 2
make[3]: *** [whtfont.o] Error -1073741819
make[2]: *** [descend] Error 2

D:\harbour>

Best Regards
GVS



From lorenzo.fiorini at gmail.com  Mon Sep 15 12:56:03 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 15 12:56:09 2008
Subject: [Harbour] 2008-09-15 17:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080915155421.GA12386@34-mo7-2.acn.waw.pl>
References: <20080915155421.GA12386@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809150956u4a5bf1cbo5a2f5ccc52803480@mail.gmail.com>

On Mon, Sep 15, 2008 at 5:54 PM, Przemys?aw Czerpak <druzus@acn.waw.pl> wrote:

> 2008-09-15 17:53 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbthread.h
>    + added assembler MT version of HB_ATOM_INC/HB_ATOM_DEC operation
>      for x86@32
>
>  * harbour/source/vm/fm.c
>    ! removed #undef HB_ATOM_INC/HB_ATOM_DEC I left by mistake

Gulp!

after this MT overhead is almost disappered.

best regards,
Lorenzo

Harbour 1.1.0dev (Rev. 9406), Linux 2.6.26.3-29.fc9.i686 i686
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.05
CPU usage -> secondsCPU()

c:=L_C ->                                             0.10
n:=L_N ->                                             0.07
d:=L_D ->                                             0.06
c:=M_C ->                                             0.10
n:=M_N ->                                             0.08
d:=M_D ->                                             0.07
(sh) c:=F_C ->                                        0.40
(sh) n:=F_N ->                                        0.19
(sh) d:=F_D ->                                        0.10
(ex) c:=F_C ->                                        0.40
(ex) n:=F_N ->                                        0.19
(ex) d:=F_D ->                                        0.10
n:=o:GenCode ->                                       0.22
round(i/1000,2) ->                                    0.22
str(i/1000) ->                                        0.65
val(a3[i%ARR_LEN+1]) ->                               0.46
dtos(j+i%10000-5000) ->                               0.57
eval({||i%ARR_LEN}) ->                                0.24
eval({|x|x%ARR_LEN}) ->                               0.26
eval({|x|f1(x)}) ->                                   0.35
&('f1('+str(i)+')') ->                                4.45
eval([&('{|x|f1(x)}')]) ->                            0.38
j := valtype(a)+valtype(i) ->                         0.77
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                0.98
j := val(a2[i%ARR_LEN+1]) ->                          0.54
j := a2[i%ARR_LEN+1] == s ->                          0.37
j := a2[i%ARR_LEN+1] = s ->                           0.37
j := a2[i%ARR_LEN+1] >= s ->                          0.38
j := a2[i%ARR_LEN+1] < s ->                           0.37
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         1.74
f0() ->                                               0.15
f1(i) ->                                              0.18
f2(c[8]) ->                                           0.16
f2(c[40000]) ->                                       0.17
f2(@c[40000]) ->                                      0.15
f2(c[40000]); c2:=c ->                                0.30
f2(@c[40000]); c2:=c ->                               0.27
f3(a,a2,c,i,j,t,bc) ->                                0.44
f2(a2) ->                                             0.17
s:=f4() ->                                            4.25
ascan(a,i%ARR_LEN) ->                                 0.31
ascan(a2,c+chr(i%64+64)) ->                           1.31
ascan(a,{|x|x==i%ARR_LEN}) ->                         3.47
============================================================
total application time:                              28.66
total real time:                                     28.66
From toninhofwi at yahoo.com.br  Mon Sep 15 13:08:08 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Sep 15 13:04:25 2008
Subject: [Harbour] Q: Enable HB_FM_WIN32_ALLOC by default?
In-Reply-To: <48CE8156.40806@dbtopas.lt>
References: <0BD79432-ADBE-4818-BB9B-221F3E3A0A70@syenar.hu>	<48CE5979.2030203@dbtopas.lt>
	<D2D3B90C-0FC8-462A-81E3-5C7AA3933604@syenar.hu>
	<48CE8156.40806@dbtopas.lt>
Message-ID: <gf5tc4t4aej90o3c3qjclfukeoobn81hdk@4ax.com>

>On another machine Pentium4 3GHz, 512MB RAM I do not find this effect 
>and BCC is always faster regardless memory usage of other processes:
>   BCC: 53 seconds
>   WIN: 89 seconds

speedtst with SVN 2008-09-15 17:53 UTC+0200 Przemyslaw Czerpak, using
Codegear 6.1 in MT mode:

BCC 76 seconds
WIN 81 seconds

Regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From druzus at acn.waw.pl  Mon Sep 15 13:08:35 2008
From: druzus at acn.waw.pl (=?utf-8?Q?Przemys=C5=82aw?= Czerpak)
Date: Mon Sep 15 13:09:12 2008
Subject: [Harbour] =?utf-8?B?UHJ6ZW15c0wn4j8/?=
	=?utf-8?Q?aw?=
In-Reply-To: <48CDA552.1020009@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CDA552.1020009@mail.udg.mx>
Message-ID: <20080915170835.GA17449@34-mo7-2.acn.waw.pl>

On Sun, 14 Sep 2008, David Arturo Macias Corona wrote:

Hi David,

> >The build time will be problem for us but not
> >such big. HVM recompilation takes only few seconds
> >on my new machine.
> Congrats for your new machine. What is it ?

AMD Phenom(tm) 8450 Triple-Core Processor, 2.1Ghz, 2Gb Ram,
460Gb SATA HDD

> The next are times for recent Harbour 1.0.0 builds
> They can serve as reference for other people

I'm not sure is the best choice in current days. For me
it's fast, even very fast and I'm happy with results.

> WinXPP SP2, BCC551
> ------------------
> Notebook Acer (Nov 2007) Intel Core2Duo T7300 2.0 Ghz, 2 Gb Ram
> Harbour: 53+35 seconds (core+contribs)
> xHarbour: 149 seconds (include MT)
>
> eCS 1.2MR, gcc 3.3.5
> ------------------
> Desktop (Aug 2003) AMD Athlon 2200+ 2.0 Ghz, 1 Gb Ram
> Harbour: 38 minutes
> xHarbour: 40 minutes (without MT)
>
> Linux Mandriva 2008.1, gcc 4.x
> ------------------------------
> Notebook Acer (Nov 2007) Intel Core2Duo T7300 2.0 Ghz, 2 Gb Ram
> Harbour: 56 seconds
> xHarbour: 80 seconds (include MT)

I was talking only about HVM lib compilation. Not whole harbour
core code recompilation what I want to eliminate.
My results with -j 3 GNU make switch to divide jobs into 3 processors
and HVM lib only are:
time make
   real    0m7.489s
   user    0m14.669s
   sys     0m0.984s

As you can see it takes less then 7.5 seconds of real time and is
acceptable for me.

> My next target is desktop Intel Core2Duo E8200 2.66Ghz 1333Mhz 6MB L2 :-)

Nice :-)

best regards,
Przemek
From toninhofwi at yahoo.com.br  Mon Sep 15 13:17:45 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Sep 15 13:14:04 2008
Subject: [Harbour] GPF upon app exiting
In-Reply-To: <48CE8663.7080507@shaw.ca>
References: <48CD70ED.4030609@shaw.ca>
	<o4vqc4d3qjih69tovl65van5bj0pcfcrk9@4ax.com>
	<48CE8663.7080507@shaw.ca>
Message-ID: <to5tc49dfjg16td44oild8f7hrr5eli833@4ax.com>

>So hopefully someone better versed with CG can nudge us in the
>right direction.

Luis, Chen help me and I can use codeguard with bcc5.9 and 6.10, maybe
bcc5.5.1 works in the same way:

You only need set:

set C_USR=-v -y -vG -Od

and recompile your Harbour with a clean build

You need recompile your application with this flags too. You can
change bcc32.cfg if you use it.

To configure how codeguard will work, goto bcc\bin dir and run
cgconfig.exe

Remember to put cg32.dll in your app exe folder and don?t delete your
app .TDS file.

When codeguard catch an error or when your application finish a
app.cgl file are created.

Regards,

Toninho.

__________________________________________________
Fa?a liga??es para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From mbelgrano at deltain.it  Mon Sep 15 13:20:59 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 15 13:21:13 2008
Subject: [Harbour] 2008-09-14 22:36 UTC+0200 Viktor
	Szakats(harbour.01syenar hu)
In-Reply-To: <20080915155120.GB803@34-mo7-2.acn.waw.pl>
References: <20080914223628.GC7427@34-mo7-2.acn.waw.pl><AFB948164110ED43B5EB849E8DEEF03815EF92@SRV02.deltain.net>
	<20080915155120.GB803@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF96@SRV02.deltain.net>

All your assert are Correct
With set HB_BUILD_ST=no after rebuild harbour I have only hbvm.lib (probably mt version)
Without set HB_BUILD_ST=   after rebuild harbour I have either hbvvm.lib and hbvmmt.lib

I am a little confusing
Why compile with HB_BUILD_ST=no if without is able to work in either mode?
What do hb_build_st ?

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Monday, September 15, 2008 5:51 PM
To: Harbour Project Main Developer List.
Subject: Re: RE: [Harbour] 2008-09-14 22:36 UTC+0200 Viktor Szakats(harbour.01syenar hu)

On Mon, 15 Sep 2008, Massimo Belgrano wrote:
> >Because users have single binaries and can create
> >any application he like. MT or ST without Harbour
> >core code recompilation.
> How can be possible?
> For example for speedtest.prg how can create mt & st whithout core code
> recompilation?

Build Harbour without HB_BUILD_ST macro.
You will find two version of Harbour VM library: hbvm.lib and hbvmmt.lib.
Use first version to link single thread application and second one with
cw32mt to create MT program.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From dbtopas at dbtopas.lt  Mon Sep 15 13:23:58 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Sep 15 13:23:56 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080915154445.GA803@34-mo7-2.acn.waw.pl>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>	<48CE57C6.2030006@dbtopas.lt>
	<20080915154445.GA803@34-mo7-2.acn.waw.pl>
Message-ID: <48CE9A2E.9020201@dbtopas.lt>

> I left by mistake in at the beginning of fm.c:
> 
>    #undef HB_ATOM_INC
>    #undef HB_ATOM_DEC
> 
> What effectively disabled using Interlocked*() functions
> in Windows builds. I'll commit fix ASAP.
> Please remove it and recompile Harbour. Then if possible
> please repeat MT test on the same machine so we can compare
> the cost of interlocked operations.

Hi,


09/15/08 20:12:36 Harbour 1.1.0dev (Rev. 9407), Windows XP 5.1.2600 
Service Pack 2

ARR_LEN =         16                        ST      MT
N_LOOPS =    1000000
empty loops overhead =                      0.23    0.34
CPU usage -> secondsCPU()

c:=L_C ->                                   0.34    0.47
n:=L_N ->                                   0.31    0.33
d:=L_D ->                                   0.31    0.34
c:=M_C ->                                   0.30    0.50
n:=M_N ->                                   0.27    0.36
d:=M_D ->                                   0.25    0.33
(sh) c:=F_C ->                              0.69    1.73
(sh) n:=F_N ->                              0.72    0.78
(sh) d:=F_D ->                              0.34    0.42
(ex) c:=F_C ->                              0.72    1.72
(ex) n:=F_N ->                              0.72    0.80
(ex) d:=F_D ->                              0.38    0.44
n:=o:GenCode ->                             0.69    0.95
n:=o[8] ->                                  0.59    0.78
round(i/1000,2) ->                          0.86    1.22
str(i/1000) ->                              2.13    3.78
val(a3[i%ARR_LEN+1]) ->                     1.64    2.02
dtos(j+i%10000-5000) ->                     1.98    2.63
eval({||i%ARR_LEN}) ->                      0.92    1.19
eval({|x|x%ARR_LEN},i) ->                   1.03    1.47
eval({|x|f1(x)},i) ->                       1.53    2.22
&('f1('+str(i)+')') ->                     12.64   24.11
eval([&('{|x|f1(x)}')]) ->                  1.56    2.28
j := valtype(a)+valtype(i) ->               1.69    3.28
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->      3.19    5.23
j := val(a2[i%ARR_LEN+1]) ->                1.95    2.58
j := a2[i%ARR_LEN+1] == s ->                1.38    1.98
j := a2[i%ARR_LEN+1] = s ->                 1.52    2.08
j := a2[i%ARR_LEN+1] >= s ->                1.53    2.05
j := a2[i%ARR_LEN+1] < s ->                 1.45    2.02
aadd(aa,{i,j,s,a,a2,t,bc}) ->               6.66   10.30
f0() ->                                     0.44    0.69
f1(i) ->                                    0.72    1.13
f2(c[8]) ->                                 0.55    0.98
f2(c[40000]) ->                             0.53    0.98
f2(@c[40000]) ->                            0.44    0.77
f2(c[40000]); c2:=c ->                      0.83    1.47
f2(@c[40000]); c2:=c ->                     0.70    1.23
f3(a,a2,c,i,j,t,bc) ->                      1.45    2.53
f2(a2) ->                                   0.53    0.97
s:=f4() ->                                 80.69   80.42
s:=f5() ->                                  1.16    2.36
ascan(a,i%ARR_LEN) ->                       0.98    1.47
ascan(a2,c+chr(i%64+64)) ->                 3.33    5.61
ascan(a,{|x|x==i%ARR_LEN}) ->               9.95   18.45
==========================================================
total application time:                   163.42  215.14
total real time:                          167.83  221.69


Best regards,
Mindaugas
From bedipritpal at hotmail.com  Mon Sep 15 13:31:05 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Sep 15 13:31:12 2008
Subject: [Harbour] HBWHAT - Proposed Restructuring
In-Reply-To: <19485900.post@talk.nabble.com>
References: <19485900.post@talk.nabble.com>
Message-ID: <19497485.post@talk.nabble.com>


Hello Guys

Please defer any updates to HBWHAT.

I am prefixing VWN_ for all API functions and WHT_ to all 
WHAT32 core functions.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/HBWHAT---Proposed-Restructuring-tp19485900p19497485.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From labitas at gmail.com  Mon Sep 15 14:37:00 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Mon Sep 15 14:37:07 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0809150856o70e42fd4y25be13047d162bd5@mail.gmail.com>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
	<9257026e0809150659q666ff798u1abd9a5877e7104@mail.gmail.com>
	<20080915145612.GA3845@34-mo7-2.acn.waw.pl>
	<9257026e0809150856o70e42fd4y25be13047d162bd5@mail.gmail.com>
Message-ID: <2386af1b0809151137v4a86e9bagc4ef9266948544f9@mail.gmail.com>

Hi,
Borland C++ 5.82

                                                    Harbour             |
xHarbour
                                           Rev.9405    |    Rev.9407    |
Rev. 6213
                                          _ST_    _MT_ |   _ST_    _MT_ |
_ST_    _MT_
c:=L_C ->                                 0.17    0.31 |   0.17    0.27 |
0.16    0.25
n:=L_N ->                                 0.11    0.22 |   0.11    0.19 |
0.16    0.19
d:=L_D ->                                 0.14    0.16 |   0.14    0.22 |
0.16    0.11
c:=M_C ->                                 0.17    0.31 |   0.17    0.28 |
0.19    0.47
n:=M_N ->                                 0.14    0.22 |   0.16    0.23 |
0.17    0.41
d:=M_D ->                                 0.14    0.23 |   0.13    0.23 |
0.17    0.39
(sh) c:=F_C ->                            0.55    0.80 |   0.47    0.78 |
0.39    0.72
(sh) n:=F_N ->                            0.48    0.50 |   0.45    0.48 |
0.48    0.58
(sh) d:=F_D ->                            0.27    0.36 |   0.28    0.36 |
0.31    0.44
(ex) c:=F_C ->                            0.55    0.83 |   0.52    0.77 |
0.44    0.73
(ex) n:=F_N ->                            0.45    0.47 |   0.48    0.50 |
0.45    0.63
(ex) d:=F_D ->                            0.28    0.31 |   0.31    0.36 |
0.31    0.47
n:=o:GenCode ->                           0.38    0.78 |   0.39    0.72 |
0.56    0.69
n:=o[8] ->                                0.27    0.52 |   0.31    0.48 |
0.31    0.39
round(i/1000,2) ->                        0.56    1.03 |   0.52    1.06 |
1.02    0.97
str(i/1000) ->                            1.52    2.16 |   1.55    2.20 |
1.73    2.00
val(a3[i%ARR_LEN+1]) ->                   1.19    1.69 |   1.20    1.66 |
1.47    1.50
dtos(j+i%10000-5000) ->                   1.44    2.28 |   1.47    2.13 |
1.52    1.55
eval({||i%ARR_LEN}) ->                    0.55    1.06 |   0.52    0.89 |
0.78    1.03
eval({|x|x%ARR_LEN},i) ->                 0.61    1.16 |   0.59    1.02 |
0.84    1.13
eval({|x|f1(x)},i) ->                     0.97    1.78 |   0.94    1.59 |
1.50    1.83
&('f1('+str(i)+')') ->                    7.44   10.11 |   7.25   10.13 |
8.19   10.70
eval([&('{|x|f1(x)}')]) ->                0.94    1.81 |   0.95    1.63 |
1.47    1.91
j := valtype(a)+valtype(i) ->             1.23    2.03 |   1.17    1.94 |
1.45    1.88
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->    2.47    3.47 |   2.39    3.11 |
2.41    2.70
j := val(a2[i%ARR_LEN+1]) ->              1.44    2.02 |   1.34    1.89 |
1.64    1.77
j := a2[i%ARR_LEN+1] == s ->              0.86    1.34 |   0.83    1.19 |
0.88    1.06
j := a2[i%ARR_LEN+1] = s ->               0.86    1.47 |   0.86    1.31 |
0.88    1.06
j := a2[i%ARR_LEN+1] >= s ->              0.91    1.58 |   0.89    1.33 |
0.89    1.02
j := a2[i%ARR_LEN+1] < s ->               0.88    1.45 |   0.86    1.30 |
0.88    1.05
aadd(aa,{i,j,s,a,a2,t,bc}) ->             4.00    6.31 |   4.08    5.66 |
2.89    3.50
f0() ->                                   0.28    0.58 |   0.28    0.61 |
0.86    0.95
f1(i) ->                                  0.52    0.88 |   0.52    0.84 |
0.86    0.98
f2(c[8]) ->                               0.34    0.83 |   0.36    0.75 |
0.94    1.13
f2(c[40000]) ->                           0.36    0.78 |   0.38    0.75 |
0.92    1.08
f2(@c[40000]) ->                          0.33    0.66 |   0.36    0.70 |
0.91    1.05
f2(c[40000]); c2:=c ->                    0.56    1.17 |   0.48    0.98 |
1.09    1.27
f2(@c[40000]); c2:=c ->                   0.50    1.03 |   0.48    0.97 |
1.11    1.19
f3(a,a2,c,i,j,t,bc) ->                    0.89    1.97 |   0.89    1.80 |
2.45    2.78
f2(a2) ->                                 0.38    0.89 |   0.39    0.78 |
0.89    1.03
s:=f4() ->                               49.92   47.50 |  47.55   45.66 |
9.17   10.66
s:=f5() ->                                0.86    1.47 |   0.77    1.55 |
1.36    1.73
ascan(a,i%ARR_LEN) ->                     0.77    1.44 |   0.70    1.30 |
1.25    1.23
ascan(a2,c+chr(i%64+64)) ->               2.75    4.20 |   2.83    4.11 |
3.25    3.56
ascan(a,{|x|x==i%ARR_LEN}) ->             6.89   12.55 |   6.80   11.73 |
8.34   10.48
=======================================================|================|==============
total application time:                 105.06  137.52 | 102.06  131.20 |
78.75   94.27
total real time:                        109.16  143.47 | 106.24  136.39 |
81.41   97.67

Best regards,
Saulius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080915/bd701efe/attachment.html
From druzus at acn.waw.pl  Mon Sep 15 14:44:10 2008
From: druzus at acn.waw.pl (=?utf-8?Q?Przemys=C5=82aw?= Czerpak)
Date: Mon Sep 15 14:44:48 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48CE9A2E.9020201@dbtopas.lt>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
	<48CE57C6.2030006@dbtopas.lt>
	<20080915154445.GA803@34-mo7-2.acn.waw.pl>
	<48CE9A2E.9020201@dbtopas.lt>
Message-ID: <20080915184410.GA13559@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> 09/15/08 20:12:36 Harbour 1.1.0dev (Rev. 9407), Windows XP 5.1.2600 Service 
[...]
> c:=L_C ->                                   0.34    0.47
> c:=M_C ->                                   0.30    0.50
> (sh) c:=F_C ->                              0.69    1.73
> (ex) c:=F_C ->                              0.72    1.72
> &('f1('+str(i)+')') ->                     12.64   24.11
> aadd(aa,{i,j,s,a,a2,t,bc}) ->               6.66   10.30
> f3(a,a2,c,i,j,t,bc) ->                      1.45    2.53
> f2(a2) ->                                   0.53    0.97
> s:=f5() ->                                  1.16    2.36
> ascan(a2,c+chr(i%64+64)) ->                 3.33    5.61
> ascan(a,{|x|x==i%ARR_LEN}) ->               9.95   18.45
> total application time:                   163.42  215.14

Thank you very much.
It's faster but still slower then I thought.
Maybe BCC does not inline InterLocked*() functions or
they are not as efficient as they can be.
I committed an hour ago assembler version of HB_ATOM_INC
and HB_ATOM_DEC macros for x86 CPUs and PTHREADS. If you
have a while and you can adopt it to BCC and Intel ASM
syntax then we can check if it's worth to replace WIN
API functions for BCC.
BTW have you compiled Harbour with memory statistic module
or with -DHB_FM_STATISTICS_OFF? The memory statistic in MT
version needs additional mutex call for synchronization.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Sep 15 14:49:34 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 14:50:02 2008
Subject: [Harbour] Q: Enable HB_FM_WIN32_ALLOC by default?
In-Reply-To: <48CE8156.40806@dbtopas.lt>
References: <0BD79432-ADBE-4818-BB9B-221F3E3A0A70@syenar.hu>	<48CE5979.2030203@dbtopas.lt>
	<D2D3B90C-0FC8-462A-81E3-5C7AA3933604@syenar.hu>
	<48CE8156.40806@dbtopas.lt>
Message-ID: <8E4D4B7B-C2ED-4120-A54C-A809F4B222FF@syenar.hu>

Hi Mindaugas,

This was it:
---
FUNCTION Main()
    LOCAL i
    LOCAL aRecs := {}
    FOR i := 1 TO 100000
       AAdd( aRecs, {} )
       ? i
    NEXT
---
Chokes @ 30-40000 on a system with 3GB RAM.

You can find more on this in the archives,
about the time when you were away.

[ This sample actually made me switch to BCC 5.82. ]

Brgds,
Viktor

On 2008.09.15., at 17:37, Mindaugas Kavaliauskas wrote:

>>> I've used to test BCC and MinGW speed some time ago. BCC worked  
>>> faster on speedtst.prg. Do we have some specific test for memory  
>>> manager? It can answer the question what is faster and how much?
>> I agree to check speed, too, but it's not only
>> speed, BCC55 MM is so simple, that a simple
>> loop creating arrays can make it choke. So I'd
>> count on efficiency and consistency too.
>
>
> Hi,
>
>
> of cause MM should be bug-free. Can You (or anyone) send me sample  
> code indicating BCC MM bugs? I've not found any problem with it yet.
>
> I've just compared BCC MM vs. Windows native MM (LocalAlloc/ 
> LocalFree). The result are interesting. On my IntelCeleron 2.2GHz/ 
> 256MB RAM machine with no other application running speedtst.prg  
> gives:
>  BCC: 135 seconds
>  WIN: 108 seconds
> But if I run any application that uses 30-150 MB of RAM (ex.  
> Thunderbird, Firefox, etc), result are:
>  BCC: 137 seconds
>  WIN: 238 seconds
>
> On another machine Pentium4 3GHz, 512MB RAM I do not find this  
> effect and BCC is always faster regardless memory usage of other  
> processes:
>  BCC: 53 seconds
>  WIN: 89 seconds
>
>
> Best regards,
> Mindaugas
>
> P.S. all numbers are average of 4 tests to minimize variance of  
> execution time estimate.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From toninhofwi at yahoo.com.br  Mon Sep 15 14:55:13 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Sep 15 14:51:30 2008
Subject: [Harbour] GPF upon app exiting
In-Reply-To: <to5tc49dfjg16td44oild8f7hrr5eli833@4ax.com>
References: <48CD70ED.4030609@shaw.ca>
	<o4vqc4d3qjih69tovl65van5bj0pcfcrk9@4ax.com>
	<48CE8663.7080507@shaw.ca>
	<to5tc49dfjg16td44oild8f7hrr5eli833@4ax.com>
Message-ID: <dkbtc4d0h04h6jeoa7hpdjovmjh93nqcnu@4ax.com>

Luis, I forget an important information: You need link

bcc55\lib\cg32.lib

as a FIRST lib with your application.

And, before compile harbour and your application, run cgconfig.exe and
uncheck "Enable" in Error messabe box" group, because CG report false
allarms from hb_stack_ready() for each prg that you compile.


Regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From harbour.01 at syenar.hu  Mon Sep 15 14:54:38 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 14:54:49 2008
Subject: [Harbour] Error Building Harbour from SVN
In-Reply-To: <48CE8CD8.2020709@ec-red.com>
References: <48CE6C67.1070208@ec-red.com>
	<6EB81A71-7392-497D-B499-10CEC300F622@syenar.hu>
	<48CE8CD8.2020709@ec-red.com>
Message-ID: <1AA6D263-5A3A-4256-A014-D5ADF2F55791@syenar.hu>

Please retry after my recent commit.

Brgds,
Viktor

On 2008.09.15., at 18:27, Guillermo Varona Silup? wrote:

> Szak?ts Viktor escribi?:
>> Hi,
>>
>> Pls read this entry (and the next one):
>> 2008-09-14 12:38 UTC+0200
> Ok. Thanks you very much.
>
> now i got this:
>
> D:\harbour>make_gnu clean
> make: *** mainstd: No such file or directory.  Stop.
> make[3]: *** [clean] Error 2
> make[2]: *** [clean] Error 2
>
> D:\harbour>make_gnu
> make: *** mainstd: No such file or directory.  Stop.
> make[3]: *** [first] Error 2
> make[2]: *** [first] Error 2
> make[3]: *** [ctmisc.o] Error 1
> make[2]: *** [descend] Error 2
> make[3]: *** [whtfont.o] Error -1073741819
> make[2]: *** [descend] Error 2
>
> D:\harbour>
>
> Best Regards
> GVS
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Sep 15 14:55:12 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 14:55:21 2008
Subject: [Harbour] 2008-09-15 20:54 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91764$Blat.v2.6.2$954d2098$31462e0962c@127.0.0.1>

2008-09-15 20:54 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * tests/multifnc/Makefile
  * doc/gmake.txt
  * bin/hb-func.sh
  * bin/postinst.sh
  * include/hbdefs.h
  * source/vm/Makefile
  * source/vm/vmmt/Makefile
    ! Changed mingw32 to mingw in remaining places.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep 15 15:07:21 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 15:07:28 2008
Subject: [Harbour] 2008-09-15 21:05 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91766$Blat.v2.6.2$47ccee64$7e08a8ba2ac@127.0.0.1>

2008-09-15 21:05 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
  * contrib/mtpl_b32.mak
    + Added -vG -Od to debug flags (CodeGuard and no optimization 
      if HB_BUILD_DEBUG is 'yes').
    ; I couldn't test it, because I'm getting a fatal error 
      when trying with my BCC build file.
      Fatal: Unable to open file '.OBJ'
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep 15 15:12:06 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 15:12:17 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <2386af1b0809151137v4a86e9bagc4ef9266948544f9@mail.gmail.com>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
	<9257026e0809150659q666ff798u1abd9a5877e7104@mail.gmail.com>
	<20080915145612.GA3845@34-mo7-2.acn.waw.pl>
	<9257026e0809150856o70e42fd4y25be13047d162bd5@mail.gmail.com>
	<2386af1b0809151137v4a86e9bagc4ef9266948544f9@mail.gmail.com>
Message-ID: <FE417A3D-02B3-4275-A5BC-446483455AC5@syenar.hu>

On 2008.09.15., at 20:37, Saulius Zrelskis wrote:

> Hi,
> Borland C++ 5.82
>
>                                                      
> Harbour             |   xHarbour
>                                            Rev.9405    |    Rev. 
> 9407    |   Rev. 6213
>                                           _ST_    _MT_ |   _ST_     
> _MT_ |  _ST_    _MT_
> s:=f4() ->                               49.92   47.50 |  47.55    
> 45.66 |  9.17   10.66

I wonder what makes Harbour so slow or xhb so fast here...?

--
FUNCTION F4()
    RETURN Space( 40000 )
--

Brgds,
Viktor

From druzus at acn.waw.pl  Mon Sep 15 15:24:49 2008
From: druzus at acn.waw.pl (=?utf-8?Q?Przemys=C5=82aw?= Czerpak)
Date: Mon Sep 15 15:25:27 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <2386af1b0809151137v4a86e9bagc4ef9266948544f9@mail.gmail.com>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
	<9257026e0809150659q666ff798u1abd9a5877e7104@mail.gmail.com>
	<20080915145612.GA3845@34-mo7-2.acn.waw.pl>
	<9257026e0809150856o70e42fd4y25be13047d162bd5@mail.gmail.com>
	<2386af1b0809151137v4a86e9bagc4ef9266948544f9@mail.gmail.com>
Message-ID: <20080915192449.GA16822@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Saulius Zrelskis wrote:

Hi Saulius,

> Hi,
> Borland C++ 5.82
>                                                     Harbour             |
> xHarbour
>                                            Rev.9405    |    Rev.9407    |
> Rev. 6213
>                                           _ST_    _MT_ |   _ST_    _MT_ |
> _ST_    _MT_
[...]
> =======================================================|================|==============
> total application time:                 105.06  137.52 | 102.06  131.20 |
> 78.75   94.27

Many thanks for the results but if you want to compare Harbour and
xHarbour results then please recompile Harbour with HB_FM_STATISTICS_OFF
macro, f.e. using:
   set C_USR=-DHB_FM_STATISTICS_OFF

In xHarbour memory statistic is disabled by default and have to be
explicitly enabled by HB_FM_STATISTICS macro.
Memory statistic module has serious speed overhead.
You can check if you applicatin is linked with FM stat if you run
it with //info parameter. You should see in the 1-st info line
   ... MemStat:On ...
or
   ... MemStat:Off ...
I'm realy interesting in the BCC results with Harbour and xharbour.

best regards,
Przemek

ps. if possible please send your messages as plain text not HTML.
    It will be easier for us to read them and compare results.
From capelsoft at terra.es  Mon Sep 15 15:58:55 2008
From: capelsoft at terra.es (=?iso-8859-2?Q?Jos=E9_Luis_Capel_-?=)
Date: Mon Sep 15 15:59:03 2008
Subject: [Harbour] Wince - Evc4 and GPF
References: <96F07428-58D5-410E-A266-EFCC6877B606@syenar.hu><9257026e0809141233p6df94545k3e57ba71af3f489d@mail.gmail.com><E15DEC9961BC47F3B5189FD357545580@pepeluis>
	<20080914200309.GD26269@34-mo7-2.acn.waw.pl>
Message-ID: <CD6E03CD37504ADA95AFD6B672053FFB@pepeluis>

Hi Przemek,

>
> Look that there is no memory protection in WinCE or at least above
> two addresses are not protected. It's hardware/OS dependant behavior.
>
>> Maybe is needed some extra code to handle gpf's ?
>
> probably yes. You can try to generate FPE using division by 0.
> Of course if CPU generates exception for such situation and there
> is no default OS handle for it.
>

I tried what you told me and the results are same in Evc4: nothing happens 
(apparently) and program continues execution.

In order to trap this exception I made some changes in hbwmain.c.  These 
changes are:

...
...
#if defined( HB_WINCE )
   HB_TCHAR_FREE( pFree );
#endif

#if defined( HB_VM_STARTUP )
   hb_winmainArgInit( hInstance, hPrevInstance, iCmdShow );
   hb_cmdargInit( s_argc, s_argv );

//-- change
#if defined( HB_WINCE )
__try {
#endif
// -- change

   hb_vmInit( TRUE );
   iErrorCode = hb_vmQuit();

// -- change
#if defined( HB_WINCE )
    } __except(EXCEPTION_EXECUTE_HANDLER)
    {
    MessageBox(NULL,TEXT("Some GPF caugth!!"),TEXT("Test"), MB_OK);
    }
#endif
// -- change
...
...


What I wanted to do is to envolve all Vm execution within a __try/__except() 
compiler functions.

I have had same results as it wasn't there.  I mean... nothing hanppened. 
So I gess that maybe some other __try/__except is catching the exception.... 
or not.  I searched all the sources and I could not find any other 
__try/__except.

So... at this point I am a little bit lost of how to solve that.  Any help 
or clue are wellcome.

Many thanks for your help.
Regards,
Jos? lUis Capel



From bedipritpal at hotmail.com  Mon Sep 15 16:05:13 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Sep 15 16:05:19 2008
Subject: [Harbour] Current SVN non-compiling on BCC 5.5.1
Message-ID: <19500062.post@talk.nabble.com>


Hello

I am unable to compile current SVN on BCC 5.5.1.

Downloaded afresh SVN and compiling with these flags

SET HB_BUILD_ST=
SET C_USR=-DHB_FM_STATISTICS_OFF -DHB_FM_WIN32_ALLOC -D__MT__ -DHB_VM_MT
SET L_USR=cw32mt.lib

SET HB_BUILD_ST=
SET HB_BUILD_ST=no      Does not make any difference

The error is immediate after make_b32 is issued after make_b32 clean.

MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
source\common\expropt1.c:
source\common\expropt2.c:
source\common\hbarch.c:
source\common\hbfsapi.c:
source\common\hbfopen.c:
source\common\hbgete.c:
source\common\hbwince.c:
source\common\hbhash.c:
source\common\hbdate.c:
source\common\hbstr.c:
source\common\hbtrace.c:
source\common\hbver.c:
source\common\hbverdsp.c:
source\common\reserved.c:
TLIB 4.5 Copyright (c) 1987, 1999 Inprise Corporation
+obj\b32\expropt1.obj &
+obj\b32\expropt2.obj &
+obj\b32\hbarch.obj &
+obj\b32\hbfsapi.obj &
+obj\b32\hbfopen.obj &
+obj\b32\hbgete.obj &
+obj\b32\hbwince.obj &
+obj\b32\hbhash.obj &
+obj\b32\hbdate.obj &
+obj\b32\hbstr.obj &
+obj\b32\hbtrace.obj &
+obj\b32\hbver.obj &
+obj\b32\hbverdsp.obj &
+obj\b32\reserved.obj &
+
source\pp\hbpp.c:
Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Fatal: Unable to open file '.OBJ'

** error 1 ** deleting bin\b32\hbpp.exe

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Current-SVN-non-compiling-on-BCC-5.5.1-tp19500062p19500062.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Mon Sep 15 16:11:08 2008
From: druzus at acn.waw.pl (=?utf-8?Q?Przemys=C5=82aw?= Czerpak)
Date: Mon Sep 15 16:11:46 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <2386af1b0809151137v4a86e9bagc4ef9266948544f9@mail.gmail.com>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
	<9257026e0809150659q666ff798u1abd9a5877e7104@mail.gmail.com>
	<20080915145612.GA3845@34-mo7-2.acn.waw.pl>
	<9257026e0809150856o70e42fd4y25be13047d162bd5@mail.gmail.com>
	<2386af1b0809151137v4a86e9bagc4ef9266948544f9@mail.gmail.com>
Message-ID: <20080915201108.GA8271@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Saulius Zrelskis wrote:

Hi Saulius,

> s:=f4() ->                               49.92   47.50 |  47.55   45.66 |
> 9.17   10.66

This is the reason why Harbour total times were worse then xHarbour ones.
Just simply the test executed by Harbour activates C-RTL memory module
garbage collector or allocating/freeing physical memory pages from/to
OS. This usually depends on total memory usage and memory fragmentation
and it's activated when some limits are reached. Harbour consumes less
memory and in small number of blocks then xharbour and this tests
compiled by Harbour exploits one of such limits in a loop when in
xHarbour is between some other limits above with memory allocated
by current xHVM and speedtst.prg.
This is changing depending on other memory allocation in whole
application. If you will make some experiments with additional
allocating some additional memory then you will find places where
the speed will be hardly reduced in Harbour and suddenly increased
in xHarbour. I do not know BCC and Windows (LocalAlloc()) internals
but such limits are often calculated as percent of total memory usage
so applications which allocates more memory are less effected. It may
also dependent on total OS memory and how much memory other applications
allocated. You can find in xHarbour mailing list archive that this
problem was discussed few years ago.

This test should be moved from speedtst.prg (or at least the size
of memory block should be strongly reduced to not hide real results)
to memory manager tests which will allow us to test different MM
modules and probably our own one in the future.
I'll make it and I'll add some information about enabled memory
statistic.

best regards,
Przemek
From a.jurkiewicz at abix.info.pl  Mon Sep 15 16:12:04 2008
From: a.jurkiewicz at abix.info.pl (ABIX - Adam Jurkiewicz)
Date: Mon Sep 15 16:12:14 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
Message-ID: <200809152212.04659.a.jurkiewicz@abix.info.pl>

Hi,
Intel(R) Celeron(R) M CPU        420  @ 1.60GHz / 1 GB RAM
gcc version 4.2.1 (SUSE Linux - openSUSE 10.3)
Thread model: posix

09/15/08 22:00:57 Harbour 1.1.0dev (Rev. 9409), Linux 2.6.22.5-31-default i686
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.11
CPU usage -> secondsCPU()

                                                      _ST_       _MT_
c:=L_C ->                                             0.08       0.31
n:=L_N ->                                             0.06       0.28
d:=L_D ->                                             0.07       0.29
c:=M_C ->                                             0.09       0.30
n:=M_N ->                                             0.07       0.29
d:=M_D ->                                             0.07       0.54
(sh) c:=F_C ->                                        0.25       0.45
(sh) n:=F_N ->                                        0.31       0.51
(sh) d:=F_D ->                                        0.16       0.35
(ex) c:=F_C ->                                        0.25       0.46
(ex) n:=F_N ->                                        0.31       0.50
(ex) d:=F_D ->                                        0.18       0.36
n:=o:GenCode ->                                       0.25       1.00
n:=o[8] ->                                            0.18       0.55
round(i/1000,2) ->                                    0.42       1.33
str(i/1000) ->                                        0.89       1.68
val(a3[i%ARR_LEN+1]) ->                               0.70       2.01
dtos(j+i%10000-5000) ->                               0.71       2.14
eval({||i%ARR_LEN}) ->                                0.42       1.51
eval({|x|x%ARR_LEN},i) ->                             0.46       1.77
eval({|x|f1(x)},i) ->                                 0.61       2.89
&('f1('+str(i)+')') ->                                5.29       9.21
eval([&('{|x|f1(x)}')]) ->                            0.65       2.75
j := valtype(a)+valtype(i) ->                         0.76       2.40
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                1.36       3.43
j := val(a2[i%ARR_LEN+1]) ->                          0.79       2.23
j := a2[i%ARR_LEN+1] == s ->                          0.49       1.61
j := a2[i%ARR_LEN+1] = s ->                           0.56       1.72
j := a2[i%ARR_LEN+1] >= s ->                          0.54       1.72
j := a2[i%ARR_LEN+1] < s ->                           0.55       1.71
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         1.59       4.57
f0() ->                                               0.21       0.97
f1(i) ->                                              0.32       1.30
f2(c[8]) ->                                           0.24       1.08
f2(c[40000]) ->                                       0.25       1.19
f2(@c[40000]) ->                                      0.22       1.31
f2(c[40000]); c2:=c ->                                0.34       1.68
f2(@c[40000]); c2:=c ->                               0.32       1.53
f3(a,a2,c,i,j,t,bc) ->                                0.62       2.83
f2(a2) ->                                             0.26       1.09
s:=f4() ->                                           12.65      14.80
s:=f5() ->                                            0.54       1.75
ascan(a,i%ARR_LEN) ->                                 0.56       1.62
ascan(a2,c+chr(i%64+64)) ->                           1.91       4.53
ascan(a,{|x|x==i%ARR_LEN}) ->                         4.61      18.10
============================================================
total application time:                              47.13     124.02
total real time:                                     47.95     131.55

best regards,
Adam

-- 
ABIX - Linuksowe Systemy Wspomagania Biznesu www.abix.info.pl
Gadu-Gadu: 302315
Skype: abix_adamj 
Wsparcie aplikacji: http://groups-beta.google.com/group/abix-rcsoft?hl=pl
From lorenzo.fiorini at gmail.com  Mon Sep 15 16:16:17 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 15 16:16:23 2008
Subject: [Harbour] 2008-09-15 20:54 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c91764$Blat.v2.6.2$954d2098$31462e0962c@127.0.0.1>
References: <01c91764$Blat.v2.6.2$954d2098$31462e0962c@127.0.0.1>
Message-ID: <9257026e0809151316u1bd3d870t170146a6190d4183@mail.gmail.com>

On Mon, Sep 15, 2008 at 8:55 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> 2008-09-15 20:54 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>  * tests/multifnc/Makefile
>  * doc/gmake.txt
>  * bin/hb-func.sh
>  * bin/postinst.sh
>  * include/hbdefs.h
>  * source/vm/Makefile
>  * source/vm/vmmt/Makefile
>    ! Changed mingw32 to mingw in remaining places.

I would consider to change it also in 1.0.1.

We have already changed cemgw to mingwce so there is no reason to
don't change mingw32 also.

Having mingw for 1.1.0 and mingw32 for 1.0.1 seems to create confusion.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Mon Sep 15 16:23:18 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 16:23:28 2008
Subject: [Harbour] 2008-09-15 20:54 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <9257026e0809151316u1bd3d870t170146a6190d4183@mail.gmail.com>
References: <01c91764$Blat.v2.6.2$954d2098$31462e0962c@127.0.0.1>
	<9257026e0809151316u1bd3d870t170146a6190d4183@mail.gmail.com>
Message-ID: <961C8392-FB87-4A82-9695-95E8A5C3AAA5@syenar.hu>

Hi Lorenzo,

I'd vote a no here, since I'm not confident there won't
be any more related changes needed, plus it breaks
compatibility of build environment, so besides changing
all my tried and tested scripts, all users would have to
do the same to upgrade from 1.0.0 to 1.0.1.

mingce was a bit different because this HB_COMPILER value
was (as I guess) very rarely used directly, most users
used the provided .sh scripts, mingwce builds are also
much less wide spread than mingw32, so overall it creates
a much smaller possibility for incompatibility.

These are nice changes, but we need to draw the line, and
I'd definitely wouldn't want to restart the build tests
at this stage, we're running on low capacity already.

Brgds,
Viktor

On 2008.09.15., at 22:16, Lorenzo Fiorini wrote:

> On Mon, Sep 15, 2008 at 8:55 PM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
>> 2008-09-15 20:54 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>> * tests/multifnc/Makefile
>> * doc/gmake.txt
>> * bin/hb-func.sh
>> * bin/postinst.sh
>> * include/hbdefs.h
>> * source/vm/Makefile
>> * source/vm/vmmt/Makefile
>>   ! Changed mingw32 to mingw in remaining places.
>
> I would consider to change it also in 1.0.1.
>
> We have already changed cemgw to mingwce so there is no reason to
> don't change mingw32 also.
>
> Having mingw for 1.1.0 and mingw32 for 1.0.1 seems to create  
> confusion.
>
> best regards,
> Lorenzo

From labitas at gmail.com  Mon Sep 15 16:23:22 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Mon Sep 15 16:23:34 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <FE417A3D-02B3-4275-A5BC-446483455AC5@syenar.hu>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
	<9257026e0809150659q666ff798u1abd9a5877e7104@mail.gmail.com>
	<20080915145612.GA3845@34-mo7-2.acn.waw.pl>
	<9257026e0809150856o70e42fd4y25be13047d162bd5@mail.gmail.com>
	<2386af1b0809151137v4a86e9bagc4ef9266948544f9@mail.gmail.com>
	<FE417A3D-02B3-4275-A5BC-446483455AC5@syenar.hu>
Message-ID: <2386af1b0809151323h4f573d2fgdf7e36234c2977e7@mail.gmail.com>

Probably something is incorrect on my site.
If true, sorry for misleading...

D:\MyXHb\ERROR>testh.exe //info
Harbour Terminal: Windows native console
Harbour 1.1.0dev (Rev. 9407)
Windows XP 5.1.2600 Service Pack 2
DS avail=101128KB  OS avail=2080520KB  EMM avail=0KB  MemStat:Off  MT:On

09/15/08 23:20:22 Harbour 1.1.0dev (Rev. 9407) (MT), Windows XP
5.1.2600 Service Pack 2
Borland C++ 5.8.2 (32 bit)
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.28
CPU usage -> secondsCPU()

c:=L_C ->                                             0.31
n:=L_N ->                                             0.25
d:=L_D ->                                             0.27
c:=M_C ->                                             0.33
n:=M_N ->                                             0.23
d:=M_D ->                                             0.27
(sh) c:=F_C ->                                        0.45
(sh) n:=F_N ->                                        0.55
(sh) d:=F_D ->                                        0.39
(ex) c:=F_C ->                                        0.52
(ex) n:=F_N ->                                        0.52
(ex) d:=F_D ->                                        0.36
n:=o:GenCode ->                                       0.83
n:=o[8] ->                                            0.53
round(i/1000,2) ->                                    0.91
str(i/1000) ->                                        1.83
val(a3[i%ARR_LEN+1]) ->                               1.56
dtos(j+i%10000-5000) ->                               1.86
eval({||i%ARR_LEN}) ->                                1.03
eval({|x|x%ARR_LEN},i) ->                             1.05
eval({|x|f1(x)},i) ->                                 1.73
&('f1('+str(i)+')') ->                                7.77
eval([&('{|x|f1(x)}')]) ->                            1.73
j := valtype(a)+valtype(i) ->                         1.64
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                2.94
j := val(a2[i%ARR_LEN+1]) ->                          1.80
j := a2[i%ARR_LEN+1] == s ->                          1.31
j := a2[i%ARR_LEN+1] = s ->                           1.41
j := a2[i%ARR_LEN+1] >= s ->                          1.47
j := a2[i%ARR_LEN+1] < s ->                           1.39
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         5.91
f0() ->                                               0.63
f1(i) ->                                              0.83
f2(c[8]) ->                                           0.77
f2(c[40000]) ->                                       0.75
f2(@c[40000]) ->                                      0.67
f2(c[40000]); c2:=c ->                                1.06
f2(@c[40000]); c2:=c ->                               1.00
f3(a,a2,c,i,j,t,bc) ->                                1.81
f2(a2) ->                                             0.83
s:=f4() ->                                           52.88
s:=f5() ->                                            1.17
ascan(a,i%ARR_LEN) ->                                 1.44
ascan(a2,c+chr(i%64+64)) ->                           3.72
ascan(a,{|x|x==i%ARR_LEN}) ->                        11.70
============================================================
total application time:                             135.17
total real time:                                    142.77

Best regards,
Saulius
From druzus at acn.waw.pl  Mon Sep 15 16:24:30 2008
From: druzus at acn.waw.pl (=?utf-8?Q?Przemys=C5=82aw?= Czerpak)
Date: Mon Sep 15 16:25:06 2008
Subject: [Harbour] 2008-09-15 04:33 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9CDB4FB1-9C16-4925-8810-892FF145383B@syenar.hu>
References: <20080915023417.4EF7BBF6AD@34-mo7-2.acn.waw.pl>
	<9CDB4FB1-9C16-4925-8810-892FF145383B@syenar.hu>
Message-ID: <20080915202430.GB8271@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Szakáts Viktor wrote:

Hi Viktor.

> [ I cannot anymore use non-GNU make files for
> BCC to do any tests though. ]

What has happened?

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Mon Sep 15 16:46:25 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 15 16:46:32 2008
Subject: [Harbour] Question about MT
Message-ID: <9257026e0809151346m718f6d7die21fc1709620894@mail.gmail.com>

Is it correct if I say that:

main()
...
use xyz alias xyz
...
hb_threadStart( @f() )
...
function f()

select xyz <- doesn't exist?

while in xHarbour WAs are "shared" between threads?

best regards,
Lorenzo
From hbco2 at sbcglobal.net  Mon Sep 15 16:52:12 2008
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Mon Sep 15 16:52:20 2008
Subject: [Harbour] Revision 9409
References: <9412F8C32B80473380EC1327B4083FBE@emag><ADAA3C66-9D47-4923-A65B-7177C306D9CD@syenar.hu>
	<D0E6806E35DD47C1BE3EF37931AEC980@emag>
Message-ID: <001c01c91774$f0256ec0$0303a8c0@hbco>

Revision 9409

MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Fatal: Unable to open file '.OBJ'

** error 1 ** deleting bin\b32\hbpp.exe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080915/8afaa4b1/attachment.html
From dbtopas at dbtopas.lt  Mon Sep 15 16:56:25 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Sep 15 16:56:20 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080915184410.GA13559@34-mo7-2.acn.waw.pl>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>	<48CE57C6.2030006@dbtopas.lt>	<20080915154445.GA803@34-mo7-2.acn.waw.pl>	<48CE9A2E.9020201@dbtopas.lt>
	<20080915184410.GA13559@34-mo7-2.acn.waw.pl>
Message-ID: <48CECBF9.1080605@dbtopas.lt>

Hi,


> Maybe BCC does not inline InterLocked*() functions or
> they are not as efficient as they can be.

Interlocked*() functions are WinAPI functions. It cannot be inlined.


> I committed an hour ago assembler version of HB_ATOM_INC
> and HB_ATOM_DEC macros for x86 CPUs and PTHREADS. If you
> have a while and you can adopt it to BCC and Intel ASM
> syntax then we can check if it's worth to replace WIN
> API functions for BCC.

The problem is that "asm { ... }" code inside .c file requires assembler 
compiler which is not part of BCC free command line tools. Many people 
will be unable to build Harbour binaries. I use some hacky tricks in my 
code to include asm into C, but it will not work on Win64, so, not 
suitable for Harbour. Does anyone know how to include asm code into C???

The whole code of InterlockedIncrement() is 5 CPU instructions. So, I 
guess we will not save a lot.


> BTW have you compiled Harbour with memory statistic module
> or with -DHB_FM_STATISTICS_OFF? The memory statistic in MT
> version needs additional mutex call for synchronization.

It was default build using make_b32.bat, i.e. with memstat. Here are 
results without memstat:


09/15/08 23:26:57 Harbour 1.1.0dev (Rev. 9407), Windows XP 5.1.2600 
Service Pack 2

ARR_LEN =         16                        ST      MT
N_LOOPS =    1000000
empty loops overhead =                      0.17    0.30
CPU usage -> secondsCPU()

c:=L_C ->                                   0.25    0.38
n:=L_N ->                                   0.23    0.27
d:=L_D ->                                   0.23    0.27
c:=M_C ->                                   0.27    0.41
n:=M_N ->                                   0.27    0.30
d:=M_D ->                                   0.27    0.28
(sh) c:=F_C ->                              0.39    0.89
(sh) n:=F_N ->                              0.61    0.66
(sh) d:=F_D ->                              0.31    0.36
(ex) c:=F_C ->                              0.42    0.89
(ex) n:=F_N ->                              0.59    0.66
(ex) d:=F_D ->                              0.33    0.34
n:=o:GenCode ->                             0.55    0.78
n:=o[8] ->                                  0.53    0.61
round(i/1000,2) ->                          0.75    0.94
str(i/1000) ->                              1.55    2.59
val(a3[i%ARR_LEN+1]) ->                     1.41    1.86
dtos(j+i%10000-5000) ->                     1.44    2.09
eval({||i%ARR_LEN}) ->                      0.70    1.11
eval({|x|x%ARR_LEN},i) ->                   0.78    1.16
eval({|x|f1(x)},i) ->                       1.25    1.83
&('f1('+str(i)+')') ->                      7.14   15.55
eval([&('{|x|f1(x)}')]) ->                  1.22    1.81
j := valtype(a)+valtype(i) ->               1.17    2.08
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->      2.41    3.69
j := val(a2[i%ARR_LEN+1]) ->                1.59    2.03
j := a2[i%ARR_LEN+1] == s ->                1.14    1.64
j := a2[i%ARR_LEN+1] = s ->                 1.22    1.67
j := a2[i%ARR_LEN+1] >= s ->                1.20    1.67
j := a2[i%ARR_LEN+1] < s ->                 1.22    1.72
aadd(aa,{i,j,s,a,a2,t,bc}) ->               6.67    6.48
f0() ->                                     0.41    0.55
f1(i) ->                                    0.63    0.89
f2(c[8]) ->                                 0.50    0.78
f2(c[40000]) ->                             0.50    0.77
f2(@c[40000]) ->                            0.41    0.63
f2(c[40000]); c2:=c ->                      0.75    1.19
f2(@c[40000]); c2:=c ->                     0.66    1.05
f3(a,a2,c,i,j,t,bc) ->                      1.27    2.05
f2(a2) ->                                   0.52    0.78
s:=f4() ->                                 66.92   64.16
s:=f5() ->                                  0.81    1.47
ascan(a,i%ARR_LEN) ->                       0.80    1.17
ascan(a2,c+chr(i%64+64)) ->                 2.63    3.94
ascan(a,{|x|x==i%ARR_LEN}) ->               7.88   14.56
==========================================================
total application time:                   130.69  164.55
total real time:                          133.94  169.13


Best regards,
Mindaugas

From dbtopas at dbtopas.lt  Mon Sep 15 17:02:48 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Sep 15 17:02:44 2008
Subject: [Harbour] Q: Enable HB_FM_WIN32_ALLOC by default?
In-Reply-To: <8E4D4B7B-C2ED-4120-A54C-A809F4B222FF@syenar.hu>
References: <0BD79432-ADBE-4818-BB9B-221F3E3A0A70@syenar.hu>	<48CE5979.2030203@dbtopas.lt>	<D2D3B90C-0FC8-462A-81E3-5C7AA3933604@syenar.hu>	<48CE8156.40806@dbtopas.lt>
	<8E4D4B7B-C2ED-4120-A54C-A809F4B222FF@syenar.hu>
Message-ID: <48CECD78.2020409@dbtopas.lt>

> ---
> FUNCTION Main()
>    LOCAL i
>    LOCAL aRecs := {}
>    FOR i := 1 TO 100000
>       AAdd( aRecs, {} )
>       ? i
>    NEXT
> ---
> Chokes @ 30-40000 on a system with 3GB RAM.
> 
> You can find more on this in the archives,
> about the time when you were away.
> 
> [ This sample actually made me switch to BCC 5.82. ]


Hi,


great! :) I'm a little surprised. My 256MB system also alerts low 
virtual memory at 38000. After this sample and after Saulius' results 
(the main speed difference reason is SPACE(40000)) I've started to 
thing, that we need our own memory manager...


Best regards,
Mindaugas
From lorenzo.fiorini at gmail.com  Mon Sep 15 17:06:08 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 15 17:06:16 2008
Subject: [Harbour] Re: Question about MT
In-Reply-To: <9257026e0809151346m718f6d7die21fc1709620894@mail.gmail.com>
References: <9257026e0809151346m718f6d7die21fc1709620894@mail.gmail.com>
Message-ID: <9257026e0809151406l275b3c40m2e5e7d9b11d7d8a5@mail.gmail.com>

On Mon, Sep 15, 2008 at 10:46 PM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com> wrote:

> Is it correct if I say that:

I've read again the MT's ChangeLog entry and it seems that very few
things are passed from the "parent" thread to the "child".

Surely there are good reasons behind it, but I see difficult ( or I'm
missing sth ) to add threads to existing apps.

What I mean is that today it's normal to have:

main()

opendbfs()

mainmenu() // which call

menupoint1()
...
menupoint2()
...

if I have a long report or a ftp exchange I could move it to a
separate thread so the user doesn't wait for it, but if the threaded
function has to reopen all the dbfs it will require a major change of
the apps. With SQL data object is much easier you need only to pass
one reference to the connection but with many workareas that have many
indexes things are not easy.

Am I wrong? ( I hope so )

best regards,
Lorenzo
From druzus at acn.waw.pl  Mon Sep 15 17:09:00 2008
From: druzus at acn.waw.pl (PrzemysÅaw Czerpak)
Date: Mon Sep 15 17:09:38 2008
Subject: [Harbour] 2008-09-15 23:08 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080915210900.GA17586@34-mo7-2.acn.waw.pl>

2008-09-15 23:08 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  + harbour/tests/memtst.prg
    + added some simple tests for memory manager

  * harbour/tests/speedtst.prg
    * reduced the size of allocated block size to not test C-RTL
      memory manager but HVM speed

  * harbour/include/hbthread.h
    * added for x86@32 PTHREADS builds HB_ATOM_GET() and HB_ATOM_SET()
      so they can be used together with HB_ATOM_INC()/HB_ATOM_DEC()
      also for x86@64 but with reduced to 32bit reference counter.

best regards
Przemek
From harbour.01 at syenar.hu  Mon Sep 15 17:12:30 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 17:12:41 2008
Subject: [Harbour] MSVS non-GNU: doesn't work
Message-ID: <DD9B6954-0501-41F2-9E1B-A742456F2144@syenar.hu>

I was trying to rebuild Harbour for MSVS speed tests,
but it's stopping around the same area as BCC.

Brgds,
Viktor

From druzus at acn.waw.pl  Mon Sep 15 17:20:30 2008
From: druzus at acn.waw.pl (=?utf-8?Q?Przemys=C5=82aw?= Czerpak)
Date: Mon Sep 15 17:21:06 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <2386af1b0809151323h4f573d2fgdf7e36234c2977e7@mail.gmail.com>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
	<9257026e0809150659q666ff798u1abd9a5877e7104@mail.gmail.com>
	<20080915145612.GA3845@34-mo7-2.acn.waw.pl>
	<9257026e0809150856o70e42fd4y25be13047d162bd5@mail.gmail.com>
	<2386af1b0809151137v4a86e9bagc4ef9266948544f9@mail.gmail.com>
	<FE417A3D-02B3-4275-A5BC-446483455AC5@syenar.hu>
	<2386af1b0809151323h4f573d2fgdf7e36234c2977e7@mail.gmail.com>
Message-ID: <20080915212030.GA4365@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Saulius Zrelskis wrote:
> Probably something is incorrect on my site.
> If true, sorry for misleading...

It's correct. It was BCC/MS-Win memory manager.
See my other message. I've just move this test to
separate memtest.prg to not hide real HVM results
by foreign code which in such tests causes that
results are in practice random.
If possible please make tests again with rev.9410
or later.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Sep 15 17:23:38 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 17:23:51 2008
Subject: [Harbour] 2008-09-15 20:54 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <9257026e0809151316u1bd3d870t170146a6190d4183@mail.gmail.com>
References: <01c91764$Blat.v2.6.2$954d2098$31462e0962c@127.0.0.1>
	<9257026e0809151316u1bd3d870t170146a6190d4183@mail.gmail.com>
Message-ID: <80F8A7BD-3E7C-4238-A579-356E66064D42@syenar.hu>

BTW, does anyone know of a MinGW 64-bit build available
for testing?

I hope they'll get it right and use the same tool names
with different switches or something similar, otherwise
the whole mingw32 -> mingw renaming may turn out to be
a mistake on our part. (since we might have rather needed
a new mingw64 HB_COMPILER value).

Well, I guess we will see.

Brgds,
Viktor

On 2008.09.15., at 22:16, Lorenzo Fiorini wrote:

> On Mon, Sep 15, 2008 at 8:55 PM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
>> 2008-09-15 20:54 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>> * tests/multifnc/Makefile
>> * doc/gmake.txt
>> * bin/hb-func.sh
>> * bin/postinst.sh
>> * include/hbdefs.h
>> * source/vm/Makefile
>> * source/vm/vmmt/Makefile
>>   ! Changed mingw32 to mingw in remaining places.
>
> I would consider to change it also in 1.0.1.
>
> We have already changed cemgw to mingwce so there is no reason to
> don't change mingw32 also.
>
> Having mingw for 1.1.0 and mingw32 for 1.0.1 seems to create  
> confusion.
>
> best regards,
> Lorenzo

From bedipritpal at hotmail.com  Mon Sep 15 17:44:56 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Sep 15 17:45:03 2008
Subject: [Harbour] Question about MT
In-Reply-To: <9257026e0809151346m718f6d7die21fc1709620894@mail.gmail.com>
References: <9257026e0809151346m718f6d7die21fc1709620894@mail.gmail.com>
Message-ID: <19501793.post@talk.nabble.com>


Lorenzo


Lorenzo Fiorini-2 wrote:
> 
> Is it correct if I say that:
> 
> main()
> ...
> use xyz alias xyz
> ...
> hb_threadStart( @f() )
> ...
> function f()
> 
> select xyz <- doesn't exist?
> 
> while in xHarbour WAs are "shared" between threads?
> 
> 

Absolutely correct. 

xHarbour implementation of MT 
as far as work areas is concerned is not STANDARD.
Xbase++ implements MT in the same way as in Harbour, though,
Xbase++ has a mechanism to shift a work area to ZERO zone and then
all threads can share this resource.

Hopefully Przem will implement ZERO space functionality.
As he said current is mere basic implementation and advanced is 
going to be followed.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Question-about-MT-tp19501557p19501793.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Mon Sep 15 17:50:14 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 17:50:27 2008
Subject: [Harbour] 2008-09-15 04:33 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080915202430.GB8271@34-mo7-2.acn.waw.pl>
References: <20080915023417.4EF7BBF6AD@34-mo7-2.acn.waw.pl>
	<9CDB4FB1-9C16-4925-8810-892FF145383B@syenar.hu>
	<20080915202430.GB8271@34-mo7-2.acn.waw.pl>
Message-ID: <52DAD3D4-62BE-4553-825C-F2F99DABCBF4@syenar.hu>

Hi Przemek,

On 2008.09.15., at 22:24, Przemys?aw Czerpak wrote:

> On Mon, 15 Sep 2008, Szak?ts Viktor wrote:
>
> Hi Viktor.
>
>> [ I cannot anymore use non-GNU make files for
>> BCC to do any tests though. ]
>
> What has happened?

Something must have gone wrong in common.mak (I guess),
since I'm getting the ".OBJ" file error also mentioned
by Pritpal (and reported in one of my ChangeLog entries),
MSVS also won't build, stopping at around the same point.
Besides that I have/had my system (along with Harbour)
setup the single MT _or_ ST way, now with the new one
there is no way to build any tests out of the box using
bld_*.bat files (at least not without editing them first).

IOW, after my first patch it was pretty easy to get an MT
build with non-GNU, now it's not easily possible even if
this problem gets fixed.

I'd simply keep this simpler. Or we may go to the #pragma
way, but that needs some more work to do.

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep 15 17:52:33 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 17:52:49 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <48CECBF9.1080605@dbtopas.lt>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>	<48CE57C6.2030006@dbtopas.lt>	<20080915154445.GA803@34-mo7-2.acn.waw.pl>	<48CE9A2E.9020201@dbtopas.lt>
	<20080915184410.GA13559@34-mo7-2.acn.waw.pl>
	<48CECBF9.1080605@dbtopas.lt>
Message-ID: <B6E95936-FE68-4D81-9C74-56AD316E871D@syenar.hu>

>>
Hi Mindaugas,

>> I committed an hour ago assembler version of HB_ATOM_INC
>> and HB_ATOM_DEC macros for x86 CPUs and PTHREADS. If you
>> have a while and you can adopt it to BCC and Intel ASM
>> syntax then we can check if it's worth to replace WIN
>> API functions for BCC.
>
> The problem is that "asm { ... }" code inside .c file requires  
> assembler compiler which is not part of BCC free command line tools.  
> Many people will be unable to build Harbour binaries. I use some  
> hacky tricks in my code to include asm into C, but it will not work  
> on Win64, so, not suitable for Harbour. Does anyone know how to  
> include asm code into C???
>
> The whole code of InterlockedIncrement() is 5 CPU instructions. So,  
> I guess we will not save a lot.

Free BCC 5.82 has (an also free) TASM32 included, if that's of any help.

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep 15 18:51:31 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 18:51:41 2008
Subject: [Harbour] Release 1.0.1 #5
Message-ID: <CC686016-A683-4886-A2FE-A0D6BF7ADB77@syenar.hu>

Hi all,

OSX 32/64/PPC/x86 Unibin updated.

Used external packages (on my system that is):
- Allegro 4.2.2
- Apollo 6.1.0.4
- libcurl 7.19.0 (7.18.2 for DMC builds)
- Firebird 2.0.4
- FreeImage 3.11.0
- libgd 2.0.34
- libharu 2.1.0
- mysql 5.0.47
- pgsql 8.3.3
- ADS 9.00

Tested platforms:
- Windows
	BCC 5.51
	BCC 5.82
	GCC Cygwin 3.4.4
	GCC MinGW 3.4.5 (on msys 1.0.10)
	GCC MinGW 4.1.2 (on msys 1.0.10)
TODO	GCC MinGW 3.4.5 (cross compile on OpenSuse 10.3, FC3)
	GCC MinGW 4.2.1 (cross compile on Ubuntu 8.04.1)
	GCC MinGW 4.3.2 (cross compile on Fedora 9)
	GCC MinGW 4.3.2a (on msys 1.0.10)
TODO	MSVC 6.0 (HBODBC: needs fresh ODBC headers from MSSDK)
TODO	MSVC 7.1 (MSVS 2003)
	MSVC 8.0 (MSVS 2005)
	MSVC 8.0 (MSVS 2005) C++
	MSVC 9.0 (MSVS 2008 SP1)
	MSVC 9.0 (MSVS 2008 SP1) C++
	MSVC 9.0 (MSVS 2008 SP1) 64 bit
	MSVC 9.0 (MSVS 2008 SP1) C++ 64 bit (cross-compile on Win32)
	PellesC 4.5 (HBSQLIT3: interface only)
	PellesC 5.0
	PellesC 5.0 64 bit (cross-compile on Win32)
	Open Watcom 1.7 (HBSQLIT3: interface only)
	Digital Mars C 4.50
- WinCE
TODO	MSVC 6.0 (eVC4)
TODO	GCC 4.0.1 (mingw32ce 0.51.0) (cross-compile on Ubuntu 8.04.1)
TODO	GCC 4.1.0 (mingw32ce 0.50.0) (cross-compile on OpenSuse 10.3, FC3)
	GCC ?.?.? (mingw32ce 0.50-1) (cross-compile on Fedora 9)
- Linux
	GCC 4.2.3 (Ubuntu 8.04.1)
	GCC 4.3.0 (Fedora 9)
TODO	GCC 4.2.1 (SuSE 10.3)
TODO	Open Watcom (with patches only. FAILED)
TODO	GCC (RedHat 7.3)
	GCC (OpenSuse 10.3)
TODO	GCC (FC3)
- OS X
	GCC 4.0.1 i386, x86_64, PPC, PPC64 (Leopard 10.5.5 Intel + XCode 3.1.1)
- Solaris
TODO	GCC 3.4.3 i86pc (SunOS 5.11 - OpenSolaris 2008.05)
- BSD
TODO	Reported OK (No details)
- HPUX
TODO	Reported OK (a week ago in /trunk)
- OS/2
	GCC 3.3.5 (EMX/Innotek)
- DOS
TODO	GCC 3.3.2 32 bit (DJGPP) (DJGPP bash port)
	GCC 4.2.3 32 bit (DJGPP) ('make install' won't properly work)
TODO	Open Watcom 1.7 (command.com)

Brgds,
Viktor

From druzus at acn.waw.pl  Mon Sep 15 19:00:53 2008
From: druzus at acn.waw.pl (=?utf-8?Q?Przemys=C5=82aw?= Czerpak)
Date: Mon Sep 15 19:01:32 2008
Subject: [Harbour] Re: Question about MT
In-Reply-To: <9257026e0809151406l275b3c40m2e5e7d9b11d7d8a5@mail.gmail.com>
References: <9257026e0809151346m718f6d7die21fc1709620894@mail.gmail.com>
	<9257026e0809151406l275b3c40m2e5e7d9b11d7d8a5@mail.gmail.com>
Message-ID: <20080915230053.GA31139@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> > Is it correct if I say that:
> I've read again the MT's ChangeLog entry and it seems that very few
> things are passed from the "parent" thread to the "child".
> Surely there are good reasons behind it, but I see difficult ( or I'm
> missing sth ) to add threads to existing apps.
> What I mean is that today it's normal to have:
> main()
> opendbfs()
> mainmenu() // which call
> menupoint1()
> menupoint2()
> 
> if I have a long report or a ftp exchange I could move it to a
> separate thread so the user doesn't wait for it, but if the threaded
> function has to reopen all the dbfs it will require a major change of
> the apps.

No it's exactly reverted situation. You can reopen all DBFs quite fast
in single function. Just pass them to child workarea in an array.
But if you do not want to make it then you will have to change your
application and add some mutexes to synchronize WA access between
threads. Farther to not kill the performance you will have to group
your IO operations inside single locks. It will still not be efficient
enough when your application uses because indexes because each thread
will discard index page tress for the other if they are operating
on different records so each skip will have to start with seek to
rebuild the path from index root node to current record key, etc.
You will also have to implement your own functions to lock workarea
which will keep current record and current order and after each WA
LOCK you will have to restore them and before each WA UNLOCK you
will have to store current values which will be restores later.
Do you like it? You have to make it in xHarbour. And you cannot
easy reopen tables because WA aliases are global so each thread
will have to use new alias names. Full WA and alias separation
like in Harbour resolves this problems. Please also consider
that it's quite easy to implement automatic synchronization with
setting and saving RECNO and order number. Anyhow it will not
be useable for real life application. Just think what will
happen when two threads want to read 100 fields from different
records in the same WA on real multiprocessor machine:

=thread 1: locks WA makes GOTO 20, RDD reads record from file,
           reads field from record buffer, unlocks WA
=thread 2: locks WA makes GOTO 30, RDD reads record from file,
           reads field from record buffer, unlocks WA
=thread 1: locks WA makes GOTO 20, RDD reads record from file
           again because thread 2 has just overloaded the
           buffer with record 30 body, reads field from record
           buffer, unlocks WA
=thread 1: locks WA makes GOTO 30, RDD reads record from file
           again because thread 1 has just overloaded the
           buffer with record 20 body, reads field from record
           buffer, unlocks WA
[the same yet 98 times]

Now think about 10 threads and think what will happen. It
will be killer for any computer. To resolve the problem
you will have to create separate record buffer for each
thread in each shared WA. But the same you will have to
make for RECNO value, index tree, current index position
and nearly all other WA internal data so you will end up
with nearly full copy of WA. In practice only OS related
resources will not have to be replicated and even should
not be for optimal performance. For WA it means that
you can share file handles, file locks and file cache
buffers. We do not have file cache buffers yet so it's
not too much what we can share.
As you can see reopening WA does not make too much
different operations then creating final really working
with acceptable performance shared workarea for new
thread.
I'll add WA cloning mechanism in the future but now just
simply reopen the tables.
You can crate function which will store information about
all open in shared mode tables and indexes in an array, f.e.:
   { cRDD, cTable, { cIndexes, ... } }
for all used WA and then pass this array to child thread
so it can reopen them.
If you do not was not start each thread with such code
for each single query then do not terminate threads after
finished job but stop it on mutex using hb_mutexSubscribe()
waiting for new job which will be send from server by
hb_mutexNotify(). The workarea will be open so you can
simply make the requested job. If your server will decide
that there is too much waiting threads (f.e. more then 5)
then simply send few terminate requests using this mutex
to reduce number of waiting threads. You have classing
example how it can work in tests/mt/mttest07.prg
where as terminate request I used NIL value.

> With SQL data object is much easier you need only to pass
> one reference to the connection

Not such easy. Only if used protocol/API is stateless and
connection library MT safe. If API is not stateless then
each thread will need new (cloned by us end if necessary by
server) communication object which will store the states or
you will have to use mutex to synchronize access to such
object and it's internal connection. In practice it's
exactly the same problem as for workareas and exactly
the same things have to be resolved.

> but with many workareas that have many
> indexes things are not easy.
> Am I wrong? ( I hope so )

Read above. I'm not sure I was clear enough bu I hope
you will understand me.

best regards,
Przemek
From bedipritpal at hotmail.com  Mon Sep 15 19:06:23 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Sep 15 19:06:27 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <B6E95936-FE68-4D81-9C74-56AD316E871D@syenar.hu>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
	<48CE57C6.2030006@dbtopas.lt>
	<20080915154445.GA803@34-mo7-2.acn.waw.pl>
	<48CE9A2E.9020201@dbtopas.lt>
	<20080915184410.GA13559@34-mo7-2.acn.waw.pl>
	<48CECBF9.1080605@dbtopas.lt>
	<B6E95936-FE68-4D81-9C74-56AD316E871D@syenar.hu>
Message-ID: <19502705.post@talk.nabble.com>


Hi

>Free BCC 5.82 has (an also free) TASM32 included, if that's of any help.

I have downloaded the 300+ mb package but while installing
it demands a lot other packages which I do not want to install
on my machine. What is the short cut?

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/2008-09-15-13%3A38-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp19491411p19502705.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Mon Sep 15 19:37:14 2008
From: druzus at acn.waw.pl (=?utf-8?Q?Przemys=C5=82aw?= Czerpak)
Date: Mon Sep 15 19:37:52 2008
Subject: [Harbour] 2008-09-15 04:33 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <52DAD3D4-62BE-4553-825C-F2F99DABCBF4@syenar.hu>
References: <20080915023417.4EF7BBF6AD@34-mo7-2.acn.waw.pl>
	<9CDB4FB1-9C16-4925-8810-892FF145383B@syenar.hu>
	<20080915202430.GB8271@34-mo7-2.acn.waw.pl>
	<52DAD3D4-62BE-4553-825C-F2F99DABCBF4@syenar.hu>
Message-ID: <20080915233714.GB31139@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Something must have gone wrong in common.mak (I guess),
> since I'm getting the ".OBJ" file error also mentioned
> by Pritpal (and reported in one of my ChangeLog entries),
> MSVS also won't build, stopping at around the same point.

I can test only make_gcc.mak and it works for me.
Looks that make_b32.mak also works for some people
on this list so the problem may not be easy repeatable.
Unfortunately BCC make does not work with WINE correctly
so I cannot test it myself in my Linux box.
The modification in common.mak I made should not be
intrusive for existing systems. Here is the full patch:

Index: common.mak
===================================================================
--- common.mak	(wersja 9401)
+++ common.mak	(kopia robocza)
@@ -94,6 +94,8 @@
 OBJ_DIR = obj\$(HB_CC_NAME)
 LIB_DIR = lib\$(HB_CC_NAME)
 
+MT_OBJ_DIR = obj\$(HB_CC_NAME)_mt
+
 DLL_ROOTDIR = obj\dll
 DLL_OBJ_DIR = $(DLL_ROOTDIR)\$(HB_CC_NAME)
 
@@ -103,6 +105,8 @@
     $(OBJ_DIR)      \
     $(LIB_DIR)      \
     \
+    $(MT_OBJ_DIR)   \
+    \
     $(DLL_ROOTDIR)  \
     $(DLL_OBJ_DIR)
 
@@ -211,6 +215,7 @@
 COMPILER_LIB = $(LIB_DIR)\$(LIBPREF)hbcplr$(LIBEXT)
 PP_LIB       = $(LIB_DIR)\$(LIBPREF)hbpp$(LIBEXT)
 VM_LIB       = $(LIB_DIR)\$(LIBPREF)hbvm$(LIBEXT)
+VMMT_LIB     = $(LIB_DIR)\$(LIBPREF)hbvmmt$(LIBEXT)
 RTL_LIB      = $(LIB_DIR)\$(LIBPREF)hbrtl$(LIBEXT)
 MACRO_LIB    = $(LIB_DIR)\$(LIBPREF)hbmacro$(LIBEXT)
 DEBUG_LIB    = $(LIB_DIR)\$(LIBPREF)hbdebug$(LIBEXT)

I do not see anything dangerouse though maybe creating build
directories does not work in make_bcc.mak
Try to make
   md obj\b32_mt
manually. If it helps then please add it to SVN or try to
fix make_bcc.mak because it does not create build dirs
correctly.
If it does not help then you may try to remove empty
lines with '\' only from HB_DEST_DIRS definition. Some
make systems (like OW one) does not like them.
I have no more ideas what could be wrong.
In fact I do not see anything wrong in recent modifications
and probably it only exploited old bug with not working
directory creation so it will be necessary to add new
directory to SVN or fix mkdir code in make_b32.mak
It probably works only on some chosen windows version
and it's the answer why some pople was able to create
BCC binaries from current SVN using native BCC make.

> Besides that I have/had my system (along with Harbour)
> setup the single MT _or_ ST way, now with the new one
> there is no way to build any tests out of the box using
> bld_*.bat files (at least not without editing them first).

You are wrong. Nothing has been changed here and only for
ST build one new library is created. I know that you do not
like then please simply ignore that it exists. I also
invested time to keep logic you created.

> IOW, after my first patch it was pretty easy to get an MT
> build with non-GNU, now it's not easily possible even if
> this problem gets fixed.

I haven't removed them. It still exists and have the same
functionality as before.

> I'd simply keep this simpler. Or we may go to the #pragma
> way, but that needs some more work to do.

The whole modification on make_bcc.mak and comman.mak
has only few lines. Please check them and if they made
any problems for you then please try to fix them or
at least send here verbose BCC make output so I can
try to locate the problem my self. But I think that
adding directory will be enough.

best regards,
Przemek

From harbour.01 at syenar.hu  Mon Sep 15 19:37:11 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 19:38:58 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <19502705.post@talk.nabble.com>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
	<48CE57C6.2030006@dbtopas.lt>
	<20080915154445.GA803@34-mo7-2.acn.waw.pl>
	<48CE9A2E.9020201@dbtopas.lt>
	<20080915184410.GA13559@34-mo7-2.acn.waw.pl>
	<48CECBF9.1080605@dbtopas.lt>
	<B6E95936-FE68-4D81-9C74-56AD316E871D@syenar.hu>
	<19502705.post@talk.nabble.com>
Message-ID: <C2FF9FF7-E1FA-43A8-BA4D-BF060DB70702@syenar.hu>

Hi Pritpal,

On 2008.09.16., at 1:06, Pritpal Bedi wrote:

>
> Hi
>
>> Free BCC 5.82 has (an also free) TASM32 included, if that's of any  
>> help.
>
> I have downloaded the 300+ mb package but while installing
> it demands a lot other packages which I do not want to install
> on my machine. What is the short cut?

I've installed it as is, then copied from the install dir
what I needed (bin, include, lib, help) to my devl dir,
and finally uninstalled the whole official package.

Brgds,
Viktor

From philb at philb.us  Mon Sep 15 20:16:04 2008
From: philb at philb.us (Phil Barnett)
Date: Mon Sep 15 20:16:12 2008
Subject: [Harbour] =?utf-8?q?PrzemysL=27=E2=3F=3Faw?=
In-Reply-To: <20080915170835.GA17449@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CDA552.1020009@mail.udg.mx>
	<20080915170835.GA17449@34-mo7-2.acn.waw.pl>
Message-ID: <200809152016.04739.philb@philb.us>

On Monday 15 September 2008 01:08:35 pm Przemys?aw Czerpak wrote:

> I was talking only about HVM lib compilation. Not whole harbour
> core code recompilation what I want to eliminate.
> My results with -j 3 GNU make switch to divide jobs into 3 processors
> and HVM lib only are:
> time make
> ? ?real ? ?0m7.489s
> ? ?user ? ?0m14.669s
> ? ?sys ? ? 0m0.984s
>
> As you can see it takes less then 7.5 seconds of real time and is
> acceptable for me.

I recently bought a similar computer except it's quad core.

Did you know that you can use up to -j 6 and see more improvements. I'm not 
sure why, but it's pretty well documented that it works this way.

I was recompiling a linux kernel and saw improvements on my quad core up to -j 
7. I was surprised.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From harbour.01 at syenar.hu  Mon Sep 15 20:28:12 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 20:28:21 2008
Subject: [Harbour] 2008-09-15 04:33 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080915233714.GB31139@34-mo7-2.acn.waw.pl>
References: <20080915023417.4EF7BBF6AD@34-mo7-2.acn.waw.pl>
	<9CDB4FB1-9C16-4925-8810-892FF145383B@syenar.hu>
	<20080915202430.GB8271@34-mo7-2.acn.waw.pl>
	<52DAD3D4-62BE-4553-825C-F2F99DABCBF4@syenar.hu>
	<20080915233714.GB31139@34-mo7-2.acn.waw.pl>
Message-ID: <0857980A-5308-40FF-AF02-3B33FD60F325@syenar.hu>

> Try to make
>   md obj\b32_mt
> manually. If it helps then please add it to SVN or try to
> fix make_bcc.mak because it does not create build dirs
> correctly.
> If it does not help then you may try to remove empty
> lines with '\' only from HB_DEST_DIRS definition. Some
> make systems (like OW one) does not like them.
> I have no more ideas what could be wrong.
> In fact I do not see anything wrong in recent modifications
> and probably it only exploited old bug with not working
> directory creation so it will be necessary to add new
> directory to SVN or fix mkdir code in make_b32.mak
> It probably works only on some chosen windows version
> and it's the answer why some pople was able to create
> BCC binaries from current SVN using native BCC make.

Sorry, but I find this modification so confusing overall
that I don't feel myself comfortable to touch it this time
(besides not being a master of make files and weird make
problems.).

[ I'll probably need to live with the double/quadruple
compilation consequences anyway, like skimming through
every warnings 4 times, waiting for compilation 4 times.
But if I think about it, I'll just turn off anything
not needed by me, so problem will be easily solved.]

BTW, here some new dirs were in obj.

>> IOW, after my first patch it was pretty easy to get an MT
>> build with non-GNU, now it's not easily possible even if
>> this problem gets fixed.
>
> I haven't removed them. It still exists and have the same
> functionality as before.

Okay, now I seem to see that I _may_ be able to build an MT
build like before, while also getting _another_ MT version
(copy) of hbvm.lib, name hbvmmt.lib. But I may misunderstand
how this is supposed to work. It's confusion on the max.
I just can hope this is something temporary.

>> I'd simply keep this simpler. Or we may go to the #pragma
>> way, but that needs some more work to do.
>
> The whole modification on make_bcc.mak and comman.mak
> has only few lines. Please check them and if they made
> any problems for you then please try to fix them or
> at least send here verbose BCC make output so I can
> try to locate the problem my self. But I think that
> adding directory will be enough.

It doesn't work anyway for some reason (I'm using the exact
same environment and build files as yesterday, when it was
working properly - to my best knowledge that is). MSVS wasn't
updated, so it's half done. IMHO we should revert this change
or I'll let someone else fixing/finishing it.

BTW, why can CLIP and XBase++ be MT only?

Brgds,
Viktor

From druzus at acn.waw.pl  Mon Sep 15 20:29:05 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 15 20:29:42 2008
Subject: [Harbour] questions about MT, to przemek
In-Reply-To: <48CE6D37.7040201@marchuet.net>
References: <48CE3378.6070508@marchuet.net>
	<20080915105131.GA18501@34-mo7-2.acn.waw.pl>
	<48CE6D37.7040201@marchuet.net>
Message-ID: <20080916002905.GA10136@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Miguel Angel Marchuet wrote:

Hi Miguel,

> I was thinking about LetoDB, working with a thread for each connection,
> but using the same wa all connections.

Please read my message to Lorenzo. Such code will be performance kill.
In practice only file handle, file locks and file buffers (caches when
we will have them can be shared) and rest have to be cloned or one thread
will overwrite information necessary for others and restoring all such
data may cost in heavy loaded systems thousands times more then ruining
second program/process for this job.

> I think it would be interesting to be able to also provide public wa for all threads.
> (configuration application, semaphores inter applications, data servers ,...) could be
> valid examples.

Why not but I do not see how it may effects current MT WA code.
I'll only add WA cloning what in the future when we will have
our own file caching sustems may give quite nice performance
improvements for DBF servers like LetoDB.

> or it may be possible communication between threads, so that one thread to another request
> information that is the one that is open wa.

I'm not sure I understood. It is possible to nicely exchange information
between threads. I can implement also passing workareas but if you want
to use single WA by more then one thread in the same time then you should
expect only slowness. In some cases critical. Just simply each thread will
need each own copy of data stored in WA to access it immediately without
recalculation or resource refresh. Only OS related resources can be shared
and it can improve the performance in comparison to full separation but
does not have to if OS gives fast IO operations.

best regards,
Przemek
From philb at philb.us  Mon Sep 15 20:31:16 2008
From: philb at philb.us (Phil Barnett)
Date: Mon Sep 15 20:31:23 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF8B@SRV02.deltain.net>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CE4DD1.9050000@mail.udg.mx>
	<AFB948164110ED43B5EB849E8DEEF03815EF8B@SRV02.deltain.net>
Message-ID: <200809152031.17032.philb@philb.us>

On Monday 15 September 2008 09:28:12 am Massimo Belgrano wrote:
> I agree with victor an important thing for 3rd parties, end-user
> developers and the community a love also 1.1 version.
> IMO 1.0.1 will be ready first of final version 1.1.0 ant the 1.0.2 be
> more simple.
> So before official presentation in your small town were not present two
> amazing movies
> Developer audiences who is interested can easy follow one or either
> project
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org
> [mailto:harbour-bounces@harbour-project.org] On Behalf Of David Arturo
> Macias Corona
> Sent: Monday, September 15, 2008 1:58 PM
> To: harbour@harbour-project.org
> Subject: [Harbour] Re: Release 1.0.1 #1
>
> [Viktor]
>
>  >1.0.x stable release is (was a few month ago) an important
>  >thing for 3rd parties, end-user developers and the community
>  >in general. I don't think we need to reargue that here and now.
>
> [Lorenzo]
>
>  >Clearly working with only one branch will be easier but it will not
>  >solve the bug-fixing problem:
>  >
>  >if today we find a bug in 1.0.0 and we don't touch the 1.0.0 release
>  >we have to say "wait the next release". But probably the next release
>  >will be ready in months and probably will carry incompatibilities. So
>  >simply to fix a bug we need to wait months plus change and retest
>  >working code.
>  >
>  >I think that a "rebase" to 1.0.1 is necessary because the diff between
>  >1.0.0 and 1.0.1 is "big" due to dirs/files renames and some small but
>  >"wide" changes in constants names and 64 bit support. This makes
>  >difficult to check what are the "real" differences.
>  >( I hope that that 1.0.2 will be much smaller )
>  >
>  >The same will happen for 1.1.0 and so we'll need 1.1.1.
>  >
>  >What we really need to do is to make the release process easier.
>  >( we've already started a discussion about it )
>
> "I wrote about "to wait for a better moment", not to stop or drop 1.0.1"
>
> I will to expose my point in other words: I am/was trying to protect
> work of Viktor and Przemek of unnecessary pressure
>
> Przemek work on threads/mt is a big project
> Viktor work on 1.0.1 is a big project. It was not just bug-fixing  :-)
>   It should be named something as 1.0.5 or more
>
> If both big projects are presented at same time, as result they will to
> compete for attention causing loss of care in revision/tests
> It distract developers and users minimizing importance of common efforts
>
> Is like as a small town were two amazing movies will be presented in two
>
> places at same time, and ALL town want to see both and enjoy peacefully
> Is not bad idea to distribute movies in two days

If I understand the problem correctly, and I think I do, it is the reason 
Linux invented GIT and stopped using SVN (and formerly CVS) for Linux Kernel 
repository.

GIT allows more selective rearward application of patches in the newest 
version. That way, everyone works in the most modern of revisions and 
managers decide what is applied to prior versions as patches.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From philb at philb.us  Mon Sep 15 20:34:36 2008
From: philb at philb.us (Phil Barnett)
Date: Mon Sep 15 20:34:41 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <200809152031.17032.philb@philb.us>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<AFB948164110ED43B5EB849E8DEEF03815EF8B@SRV02.deltain.net>
	<200809152031.17032.philb@philb.us>
Message-ID: <200809152034.37090.philb@philb.us>

On Monday 15 September 2008 08:31:16 pm Phil Barnett wrote:

> If I understand the problem correctly, and I think I do, it is the reason
> Linux invented GIT and stopped using SVN (and formerly CVS) for Linux
> Kernel repository.
>
> GIT allows more selective rearward application of patches in the newest
> version. That way, everyone works in the most modern of revisions and
> managers decide what is applied to prior versions as patches.

Sorry, that should read "Linus invented GIT". Linus Torvalds.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From druzus at acn.waw.pl  Mon Sep 15 20:43:44 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 15 20:44:20 2008
Subject: [Harbour] 2008-09-15 04:33 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <0857980A-5308-40FF-AF02-3B33FD60F325@syenar.hu>
References: <20080915023417.4EF7BBF6AD@34-mo7-2.acn.waw.pl>
	<9CDB4FB1-9C16-4925-8810-892FF145383B@syenar.hu>
	<20080915202430.GB8271@34-mo7-2.acn.waw.pl>
	<52DAD3D4-62BE-4553-825C-F2F99DABCBF4@syenar.hu>
	<20080915233714.GB31139@34-mo7-2.acn.waw.pl>
	<0857980A-5308-40FF-AF02-3B33FD60F325@syenar.hu>
Message-ID: <20080916004344.GB10136@34-mo7-2.acn.waw.pl>

On Tue, 16 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> It doesn't work anyway for some reason (I'm using the exact
> same environment and build files as yesterday, when it was
> working properly - to my best knowledge that is). MSVS wasn't
> updated, so it's half done. IMHO we should revert this change
> or I'll let someone else fixing/finishing it.

I'll make in this weekend test on real windows machine
so please leave them as they are.

> BTW, why can CLIP and XBase++ be MT only?

1-st. Both use different ABI and each C function receives
pointer to virtual machine so they do not have to access
TLS data. We will have to drop Clipper compatibility and
rewrite whole code to implement it.
2-nd xBase++ is in only for single CPU and single OS,
compiled with one C compiler so it was possible to
use hacks which are dedicated only for such limited
build.
3-rd xBase++ seems to not use reference counters but
all complex variables are freed by GC what increase the
performance but also memory usage and may badly interacts
with heavy loaded systems which have to extensively use
swaps.
4-th I do not know xbase++ performance specially in
heavy loaded systems but CLIP is over 5 times slower
then Harbour.

Dropping Clipper compatibility and moving to new better
API is IMHO quite interesting idea but performance reduction
or to strong platform oriented hacking not.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Sep 15 21:03:05 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 21:03:16 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <200809152031.17032.philb@philb.us>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CE4DD1.9050000@mail.udg.mx>
	<AFB948164110ED43B5EB849E8DEEF03815EF8B@SRV02.deltain.net>
	<200809152031.17032.philb@philb.us>
Message-ID: <6783A106-F7BD-4ECC-AF6D-EA28779FB38F@syenar.hu>

>> places at same time, and ALL town want to see both and enjoy  
>> peacefully
>> Is not bad idea to distribute movies in two days
>
> If I understand the problem correctly, and I think I do, it is the  
> reason
> Linux invented GIT and stopped using SVN (and formerly CVS) for  
> Linux Kernel
> repository.
>
> GIT allows more selective rearward application of patches in the  
> newest
> version. That way, everyone works in the most modern of revisions and
> managers decide what is applied to prior versions as patches.

GIT is nice in supporting costless branching (personal branches even)
and commits, plus it's probably better in merging/syncing, but these
are only one part of the "problem". Managing two branches _is_ an
time and energy consuming thing whatever versioning system one uses.
After all deciding what patch should go where and the fact that
there are two different set of "worlds" to keep in mind is not the job
of any versioning system, it's largely a human matter. Not to mention
the release process (testing, building, documenting, administering)
is largely independent of the versioning system used.

I'm not saying it couldn't be made easier than it is with SVN, but
that's not the major bottleneck in Harbour, that's almost sure.

[ I imagine with GIT it would be much easier to accept patches
from _everyone_ (there is no point in repository _write_ anymore,
everyone can write by default and without costs, so there is not
that much need for politics involving giving write access, etc),
so it could encourage participation, and would make it easier to
manage picking, acceptance/rejection and merging of patches (that's
what Linus does on the kernel AFAIK). As for the latter, Harbour seems
too small to directly benefit from such possibilities. ]

[ BTW, GIT has a very nice property that it handles the whole
repository as one huge "file", so if you move a code snippet from
one file to another, it will keep track of it. ]

Brgds,
Viktor

From druzus at acn.waw.pl  Mon Sep 15 21:08:24 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 15 21:08:59 2008
Subject: [Harbour] =?utf-8?Q?Przemys=C5=82aw?=
In-Reply-To: <200809152016.04739.philb@philb.us>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CDA552.1020009@mail.udg.mx>
	<20080915170835.GA17449@34-mo7-2.acn.waw.pl>
	<200809152016.04739.philb@philb.us>
Message-ID: <20080916010824.GC10136@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Phil Barnett wrote:

Hi Phil,

> > I was talking only about HVM lib compilation. Not whole harbour
> > core code recompilation what I want to eliminate.
> > My results with -j 3 GNU make switch to divide jobs into 3 processors
> > and HVM lib only are:
> > time make
> > ? ?real ? ?0m7.489s
> > ? ?user ? ?0m14.669s
> > ? ?sys ? ? 0m0.984s
> > As you can see it takes less then 7.5 seconds of real time and is
> > acceptable for me.
> I recently bought a similar computer except it's quad core.
> Did you know that you can use up to -j 6 and see more improvements. I'm not 
> sure why, but it's pretty well documented that it works this way.
> I was recompiling a linux kernel and saw improvements on my quad core up to -j 
> 7. I was surprised.

It's not such amazing. I haven't had time to make some experiments with
my new machine but even on single CPU computers I used to use -j 2 for
kernel recompilation and it was giving performance improvement. Just
simply when one process is waiting for disk IO operation the second one
can make compilation of data read in the buffer or located in OS caches.
The parallel execution in GNU make is really nice feature which can
be used for very different jobs, f.e. I've seen Linux startup script
written as GNU make file with all dependences between ruining services.
It was really easy to update and/or extend and system was booting
much faster then using simple linear scripts due to -j GNU make
option :-)

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Sep 15 21:19:33 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 21:19:51 2008
Subject: [Harbour] 2008-09-15 04:33 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080916004344.GB10136@34-mo7-2.acn.waw.pl>
References: <20080915023417.4EF7BBF6AD@34-mo7-2.acn.waw.pl>
	<9CDB4FB1-9C16-4925-8810-892FF145383B@syenar.hu>
	<20080915202430.GB8271@34-mo7-2.acn.waw.pl>
	<52DAD3D4-62BE-4553-825C-F2F99DABCBF4@syenar.hu>
	<20080915233714.GB31139@34-mo7-2.acn.waw.pl>
	<0857980A-5308-40FF-AF02-3B33FD60F325@syenar.hu>
	<20080916004344.GB10136@34-mo7-2.acn.waw.pl>
Message-ID: <6A87A386-10E2-4D1D-A5CE-BB5780DDECBE@syenar.hu>

>> It doesn't work anyway for some reason (I'm using the exact
>> same environment and build files as yesterday, when it was
>> working properly - to my best knowledge that is). MSVS wasn't
>> updated, so it's half done. IMHO we should revert this change
>> or I'll let someone else fixing/finishing it.
>
> I'll make in this weekend test on real windows machine
> so please leave them as they are.

I can promise that. I won't touch Harbour even.

>> BTW, why can CLIP and XBase++ be MT only?
>
> 1-st. Both use different ABI and each C function receives
> pointer to virtual machine so they do not have to access
> TLS data. We will have to drop Clipper compatibility and
> rewrite whole code to implement it.

I'm not sure dropping compatibility is necessary.

We may just need to extend our current Clipper
compatibility macros to include thread context
data under the hood. For Harbour API compatibility
is also doable in a similar way.

(also see below)

> 2-nd xBase++ is in only for single CPU and single OS,
> compiled with one C compiler so it was possible to
> use hacks which are dedicated only for such limited
> build.

More limited that's for sure, but it also supports
(supported?) OS/2.

> 4-th I do not know xbase++ performance specially in
> heavy loaded systems but CLIP is over 5 times slower
> then Harbour.

Okay. I think one mistake we're heading to is that
we measure Harbour against an older Harbour (or some
imaginary opponents, or even the clock) when it
comes to speed. IOW, we may even now delete some features
from here an there to gain extra performance, but we don't
do this of course. Question is two-fold IMO: 1) Can we still
enhance MT performance to cause the less "overhead",
2) Is performance satisfactory for _real-life_ purposes
with MT, or not? Whom are we racing against exactly?

> Dropping Clipper compatibility and moving to new better
> API is IMHO quite interesting idea but performance reduction
> or to strong platform oriented hacking not.

No need to drop Clipper compatibility IMO.

I'm too tired and unmotivated by last few days kicks in the
stomach, so I may not explain it with too much details,
and I'm also probably totally wrong, but anyway:

HB_FUNC( MYFUNC ) -> void HB_FUNC_MYFUNC( HB_TLS ctx )
{
    _retc( var ); -> hb_retc_mt( ctx, var );
}

or any combinations of this idea.

'CLIPPER FUNC( void )' kind of declarations won't
probably survive, that's the only drawback.

Similar problem is with "multiwindow" GT's, if we
want to keep Clipper compatibility while enhancing
our own API with a "wnd" item.

Brgds,
Viktor

From druzus at acn.waw.pl  Mon Sep 15 22:26:19 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 15 22:26:54 2008
Subject: [Harbour] 2008-09-15 04:33 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <6A87A386-10E2-4D1D-A5CE-BB5780DDECBE@syenar.hu>
References: <20080915023417.4EF7BBF6AD@34-mo7-2.acn.waw.pl>
	<9CDB4FB1-9C16-4925-8810-892FF145383B@syenar.hu>
	<20080915202430.GB8271@34-mo7-2.acn.waw.pl>
	<52DAD3D4-62BE-4553-825C-F2F99DABCBF4@syenar.hu>
	<20080915233714.GB31139@34-mo7-2.acn.waw.pl>
	<0857980A-5308-40FF-AF02-3B33FD60F325@syenar.hu>
	<20080916004344.GB10136@34-mo7-2.acn.waw.pl>
	<6A87A386-10E2-4D1D-A5CE-BB5780DDECBE@syenar.hu>
Message-ID: <20080916022618.GA7456@34-mo7-2.acn.waw.pl>

On Tue, 16 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

>> I'll make in this weekend test on real windows machine
>> so please leave them as they are.
> I can promise that. I won't touch Harbour even.

I located the problem. It's created by you without any
ChangeLog entry. Please fix it.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Sep 15 23:18:35 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 15 23:18:42 2008
Subject: [Harbour] 2008-09-16 05:14 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c917aa$Blat.v2.6.2$e76240e8$12a0bffd41e0@127.0.0.1>

2008-09-16 05:14 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * doc/gmake.txt
   * doc/gtapi.txt
   * doc/hbmake.txt
   * doc/windll.txt
     * Useless changes.

   * make_vc.mak
     * Some untested MT support for MSVC.

   * include/hbdefs.h
     ! Removed mistakenly committed experiment to pull in 
       MT related libs. This caused the strange build problem due 
       to empty lib name passed to #pragma. This could work 
       in case someone wanted to deal with it in the future.
--
Brgds,
Viktor

From philb at philb.us  Mon Sep 15 23:37:55 2008
From: philb at philb.us (Phil Barnett)
Date: Mon Sep 15 23:38:00 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <6783A106-F7BD-4ECC-AF6D-EA28779FB38F@syenar.hu>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<200809152031.17032.philb@philb.us>
	<6783A106-F7BD-4ECC-AF6D-EA28779FB38F@syenar.hu>
Message-ID: <200809152337.56049.philb@philb.us>

On Monday 15 September 2008 09:03:05 pm Szak?ts Viktor wrote:
>  As for the latter, Harbour seems
> too small to directly benefit from such possibilities.

I was not suggesting that we use it. I was only pointing out that what you 
were complaining about was exactly why GIT arrived in the world.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From bedipritpal at hotmail.com  Mon Sep 15 23:55:49 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Sep 15 23:55:55 2008
Subject: [Harbour] 2008-09-16 05:14 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c917aa$Blat.v2.6.2$e76240e8$12a0bffd41e0@127.0.0.1>
References: <01c917aa$Blat.v2.6.2$e76240e8$12a0bffd41e0@127.0.0.1>
Message-ID: <19504905.post@talk.nabble.com>


Hello Viktor


Szak?ts Viktor wrote:
> 
> 2008-09-16 05:14 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>    * include/hbdefs.h
>      ! Removed mistakenly committed experiment to pull in 
>        MT related libs. This caused the strange build problem due 
>        to empty lib name passed to #pragma. This could work 
>        in case someone wanted to deal with it in the future.
> 

Now the new error, immediately after make_b32:

MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
Error E2194: Could not find file '_XHB.cpp'
source\common\expropt1.c:

** error 1 ** deleting obj\b32\expropt1.obj


Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/2008-09-16-05%3A14-UTC%2B0200-Viktor-Szakats-%28harbour.01-syenar-hu%29-tp19504733p19504905.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Tue Sep 16 00:10:53 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 16 00:11:08 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <200809152337.56049.philb@philb.us>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<200809152031.17032.philb@philb.us>
	<6783A106-F7BD-4ECC-AF6D-EA28779FB38F@syenar.hu>
	<200809152337.56049.philb@philb.us>
Message-ID: <6690FE75-9324-4347-8105-EB3DE0351AE7@syenar.hu>

>
> On Monday 15 September 2008 09:03:05 pm Szak?ts Viktor wrote:
>> As for the latter, Harbour seems
>> too small to directly benefit from such possibilities.
>
> I was not suggesting that we use it. I was only pointing out that  
> what you
> were complaining about was exactly why GIT arrived in the world.

While I still don't see where did I complain of anything
to which GIT would be the solution (I was merely shocked
by some words and lack of interest), I'd be glad to try
GIT (libharu's repository is in GIT f.e., Wine too). Too
bad it's currently not very easy to access and use outside
Linux (in Windows for serious work f.e.). And since it comes
from Linus, there is a "slight" chance that ease of use for
mere mortals will suffer. So it might be some time until
it catches on like SVN.

Probably everyone knows this very good intro from Linus:
http://www.youtube.com/watch?v=4XpnKHJAok8

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Tue Sep 16 01:32:32 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Sep 16 01:32:39 2008
Subject: [Harbour] Re: Question about MT
In-Reply-To: <20080915230053.GA31139@34-mo7-2.acn.waw.pl>
References: <9257026e0809151346m718f6d7die21fc1709620894@mail.gmail.com>
	<9257026e0809151406l275b3c40m2e5e7d9b11d7d8a5@mail.gmail.com>
	<20080915230053.GA31139@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809152232p7399fc59u177db9233685a9be@mail.gmail.com>

On Tue, Sep 16, 2008 at 1:00 AM, Przemys?aw Czerpak <druzus@acn.waw.pl> wrote:

> No it's exactly reverted situation. You can reopen all DBFs quite fast
> in single function. Just pass them to child workarea in an array.
> ...
> I'll add WA cloning mechanism in the future but now just
> simply reopen the tables.
> You can crate function which will store information about
> all open in shared mode tables and indexes in an array, f.e.:
>   { cRDD, cTable, { cIndexes, ... } }
> ...
> for all used WA and then pass this array to child thread
> so it can reopen them.

Many thanks for the explanation.

I'm not complaining about Harbour implementation, I'm simply trying to
understand how can I start to use threads in existing apps.

I've used xHarbour's threads in the past so I was a little bit
confused at first.

I'll take some time to rethink the code and I'll report.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Tue Sep 16 02:00:44 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Sep 16 02:00:50 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <6690FE75-9324-4347-8105-EB3DE0351AE7@syenar.hu>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<200809152031.17032.philb@philb.us>
	<6783A106-F7BD-4ECC-AF6D-EA28779FB38F@syenar.hu>
	<200809152337.56049.philb@philb.us>
	<6690FE75-9324-4347-8105-EB3DE0351AE7@syenar.hu>
Message-ID: <9257026e0809152300p27ba1c03x911ce23aa8514739@mail.gmail.com>

On Tue, Sep 16, 2008 at 6:10 AM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> While I still don't see where did I complain of anything
> to which GIT would be the solution (I was merely shocked
> by some words and lack of interest), I'd be glad to try
> GIT (libharu's repository is in GIT f.e., Wine too). Too
> bad it's currently not very easy to access and use outside
> Linux (in Windows for serious work f.e.). And since it comes
> from Linus, there is a "slight" chance that ease of use for
> mere mortals will suffer. So it might be some time until
> it catches on like SVN.

I've used git but I never really mastered it, then I moved to bazaar
but today I use hg mercurial both in Linux and Windows.
I find it simple to understand and to use and it has a good plug in
for Eclipse ( our company's standard IDE ). AFAIK mercurial is also
well supported in Netbeans.

best regards,
Lorenzo
From niki at synel.co.il  Tue Sep 16 02:02:33 2008
From: niki at synel.co.il (Chen Kedem)
Date: Tue Sep 16 02:03:10 2008
Subject: [Harbour] Re: 2008-09-15 21:05 UTC+0200 Viktor Szakats (harbour.01
 syenar hu)
Message-ID: <1A07FEDC778C3E4AA417F089511F859C03268A6A19@Mail-yoq.SYNEL-COMPANY.LTD>

Viktor,

> 2008-09-15 21:05 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * make_b32.mak
>   * contrib/mtpl_b32.mak
>     + Added -vG -Od to debug flags (CodeGuard and no optimization  if HB_BUILD_DEBUG is 'yes').

CodeGuard enabled programs are EXTREMELY slow, it should only be enabled when you want to
inspect your program for leaks and other troubles. I know people are using debug versions in client
sites to help them in future trouble finding (or just forget to turn off debug, yes I saw that too). I don't
think it should be enabled with debug.

(*not yet tested or looked at it yet*)
Also, if you enable CodeGuard and HB_BUILD_DLL=yes you need to add cg32.lib to the list
of linked libraries.
or:
set LDFLAGSDLL=cg32.lib
set L_USR=cg32.lib


  Chen.
From lorenzo.fiorini at gmail.com  Tue Sep 16 02:21:41 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Sep 16 02:21:47 2008
Subject: [Harbour] questions about MT, to przemek
In-Reply-To: <20080916002905.GA10136@34-mo7-2.acn.waw.pl>
References: <48CE3378.6070508@marchuet.net>
	<20080915105131.GA18501@34-mo7-2.acn.waw.pl>
	<48CE6D37.7040201@marchuet.net>
	<20080916002905.GA10136@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809152321q64611bbei2aece85dfdd5887e@mail.gmail.com>

On Tue, Sep 16, 2008 at 2:29 AM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> Please read my message to Lorenzo. Such code will be performance kill.
> In practice only file handle, file locks and file buffers (caches when
> we will have them can be shared) and rest have to be cloned or one thread
> will overwrite information necessary for others and restoring all such
> data may cost in heavy loaded systems thousands times more then ruining
> second program/process for this job.

The more I learn about it, the more I understand that ( another time )
Przemyslaw is right.

It's the workarea concept that's far from multithreading and making it
"public" or shared will not help.

I'm thinking about "resurrecting" the idea of HDO Harbour Data Object
that I implemented years ago.

The idea was to "hide workarea code" inside classes similar to the
ones of contrib/hbmysql or contrib/hbpgsql. I still use a simple form
of it in my Clipper/FiveWin code so that two MDI windows can show data
from the same dbf using different indexes and recno() ( simply stored
saved in the obj instance ).
Using objects will make cloning an entire set of workareas only one
line of code and will narrow the code differences between accessing
dbfs and SQL tables.

best regards,
Lorenzo
From labitas at gmail.com  Tue Sep 16 03:29:06 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Tue Sep 16 03:29:15 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080915212030.GA4365@34-mo7-2.acn.waw.pl>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
	<9257026e0809150659q666ff798u1abd9a5877e7104@mail.gmail.com>
	<20080915145612.GA3845@34-mo7-2.acn.waw.pl>
	<9257026e0809150856o70e42fd4y25be13047d162bd5@mail.gmail.com>
	<2386af1b0809151137v4a86e9bagc4ef9266948544f9@mail.gmail.com>
	<FE417A3D-02B3-4275-A5BC-446483455AC5@syenar.hu>
	<2386af1b0809151323h4f573d2fgdf7e36234c2977e7@mail.gmail.com>
	<20080915212030.GA4365@34-mo7-2.acn.waw.pl>
Message-ID: <2386af1b0809160029q6c307abfwb87a18c326a5b1de@mail.gmail.com>

Hi,
Now results are:

Harbour Terminal: Windows native console
Harbour 1.1.0dev (Rev. 9411)
Windows XP 5.1.2600 Service Pack 2
DS avail=152604KB  OS avail=2080520KB  EMM avail=0KB  MemStat:Off  MT:On

Startup loop to increase CPU clock...

09/16/08 10:21:05 Harbour 1.1.0dev (Rev. 9411) (MT), Windows XP
5.1.2600 Service Pack 2
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.30
CPU usage -> secondsCPU()

-----

Harbour Terminal: Win32 buffered console
xHarbour build 1.1.0 Intl. (SimpLex) (Rev. 6213)
Windows  XP Professional 5.01.2600 Service Pack 2
Borland C++ 5.8.2 (32 bit)
DS avail=151584KB  OS avail=2077192KB  EMM avail=0KB  MemStat:Off  MT:On  Opt:0

Startup loop to increase CPU clock...

09/16/08 10:24:30 xHarbour build 1.1.0 Intl. (SimpLex) (Rev. 6213)
(MT), Windows  XP Professional 5.01.2600 Service Pack 2
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.33
CPU usage -> secondsCPU()

-----
                                           Harbour     |    xHarbour
                                          _ST_    _MT_ |   _ST_    _MT_
c:=L_C ->                                 0.17    0.27 |   0.16    0.20
n:=L_N ->                                 0.14    0.20 |   0.16    0.14
d:=L_D ->                                 0.13    0.19 |   0.14    0.16
c:=M_C ->                                 0.16    0.30 |   0.17    0.39
n:=M_N ->                                 0.13    0.23 |   0.17    0.39
d:=M_D ->                                 0.14    0.22 |   0.14    0.34
(sh) c:=F_C ->                            0.31    0.48 |   0.41    0.69
(sh) n:=F_N ->                            0.42    0.55 |   0.48    0.59
(sh) d:=F_D ->                            0.28    0.36 |   0.33    0.41
(ex) c:=F_C ->                            0.34    0.48 |   0.44    0.66
(ex) n:=F_N ->                            0.45    0.53 |   0.47    0.56
(ex) d:=F_D ->                            0.25    0.34 |   0.34    0.42
n:=o:GenCode ->                           0.42    0.88 |   0.59    0.61
n:=o[8] ->                                0.28    0.53 |   0.31    0.36
round(i/1000,2) ->                        0.63    0.89 |   1.03    0.91
str(i/1000) ->                            1.34    1.73 |   1.69    1.91
val(a3[i%ARR_LEN+1]) ->                   1.14    1.56 |   1.47    1.42
dtos(j+i%10000-5000) ->                   1.20    1.80 |   1.52    1.55
eval({||i%ARR_LEN}) ->                    0.58    1.05 |   0.80    0.95
eval({|x|x%ARR_LEN},i) ->                 0.58    1.11 |   0.86    1.09
eval({|x|f1(x)},i) ->                     0.95    1.72 |   1.48    1.80
&('f1('+str(i)+')') ->                    5.53    7.55 |   8.13   10.55
eval([&('{|x|f1(x)}')]) ->                0.97    1.75 |   1.48    1.84
j := valtype(a)+valtype(i) ->             0.97    1.67 |   1.48    1.88
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->    2.03    3.00 |   2.45    2.64
j := val(a2[i%ARR_LEN+1]) ->              1.34    1.78 |   1.58    1.67
j := a2[i%ARR_LEN+1] == s ->              0.77    1.36 |   0.86    1.05
j := a2[i%ARR_LEN+1] = s ->               0.86    1.45 |   0.91    1.00
j := a2[i%ARR_LEN+1] >= s ->              0.81    1.36 |   0.89    0.91
j := a2[i%ARR_LEN+1] < s ->               0.86    1.36 |   0.86    0.97
aadd(aa,{i,j,s,a,a2,t,bc}) ->             4.95    7.67 |   2.81    3.53
f0() ->                                   0.31    0.58 |   0.89    0.92
f1(i) ->                                  0.52    0.88 |   0.91    0.98
f2(c[8]) ->                               0.39    0.77 |   0.94    1.06
f2(c[40000]) ->                           0.39    0.80 |   0.94    1.03
f2(@c[40000]) ->                          0.36    0.70 |   0.86    0.97
f2(c[40000]); c2:=c ->                    0.55    1.02 |   1.13    1.27
f2(@c[40000]); c2:=c ->                   0.50    1.00 |   1.11    1.20
f3(a,a2,c,i,j,t,bc) ->                    0.89    1.70 |   2.45    2.81
f2(a2) ->                                 0.41    0.83 |   0.92    1.06
s:=f4() ->                                1.13    1.63 |   1.75    2.14
s:=f5() ->                                0.61    1.14 |   1.34    1.66
ascan(a,i%ARR_LEN) ->                     0.77    1.42 |   1.25    1.19
ascan(a2,c+chr(i%64+64)) ->               2.61    3.66 |   3.28    3.50
ascan(a,{|x|x==i%ARR_LEN}) ->             6.48   11.91 |   8.41   10.56
=======================================================================
total application time:                  52.88   85.89 |  71.41   86.11
total real time:                         54.33   89.59 |  73.63   88.11


Best regards,
Saulius
From dmacias at mail.udg.mx  Tue Sep 16 03:47:15 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Sep 16 03:47:21 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48CF6483.3060304@mail.udg.mx>

Przemek:

>Can you make OS2 build test with current devel branch (1.1. in trunk)?
>It's highly possible that OS2 build is broken by last modifications
>because I was not even able to verify the modifications by simple
>compilation.

Below are results of current Harbour under eComStation 1.2MR
gcc 3.3.5

warnings in thread.c and error in estack.c

David Macias


../../gtstd.c: In function `hb_gt_std_ReadKey':
../../gtstd.c:389: warning: unused variable `TODO'
../../thread.c: In function `hb_threadMutexLock':
../../thread.c:826: warning: comparison between signed and unsigned
../../thread.c: In function `hb_threadMutexTimedLock':
../../thread.c:869: warning: comparison between signed and unsigned
../../thread.c: In function `hb_threadMutexUnlock':
../../thread.c:940: warning: comparison between signed and unsigned
../../../estack.c: In function `hb_stackInit':
../../../estack.c:310: warning: implicit declaration of function 
`DosAllocThread
LocalMemory'
../../../estack.c:310: error: parse error before '}' token
../../../estack.c: In function `hb_stackFree':
../../../estack.c:323: error: parse error before '}' token
make[4]: *** [estack.o] Error 1
make[3]: *** [descend] Error 2
make[2]: *** [first] Error 2

From miguelangel at marchuet.net  Tue Sep 16 03:59:01 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Tue Sep 16 03:58:22 2008
Subject: [Harbour] Re: Question about MT
In-Reply-To: <20080915230053.GA31139@34-mo7-2.acn.waw.pl>
References: <9257026e0809151346m718f6d7die21fc1709620894@mail.gmail.com>	<9257026e0809151406l275b3c40m2e5e7d9b11d7d8a5@mail.gmail.com>
	<20080915230053.GA31139@34-mo7-2.acn.waw.pl>
Message-ID: <48CF6745.4090900@marchuet.net>

I tray to say another thing.

When I say public wa. I want to say that the recno
is the same for all threads, and the wa is too exactly the same.

->thread 1: skip
->thread 2: recno

for example thread 2 make window paint OrdKeyNo()/OrdKeyCount() values.
             thread 1 control browse move.

this case are not possible with actual thread system.
	
I am sure that anyone you something can happen, so that it is necessary to have public areas.
without detract from private ones.

I think that Multithread, can be more usefull with public and private wa
public and private (public variables)

Best regards,
Miguel Angel Marchuet



> On Mon, 15 Sep 2008, Lorenzo Fiorini wrote:
> 
> Hi Lorenzo,
> 
>>> Is it correct if I say that:
>> I've read again the MT's ChangeLog entry and it seems that very few
>> things are passed from the "parent" thread to the "child".
>> Surely there are good reasons behind it, but I see difficult ( or I'm
>> missing sth ) to add threads to existing apps.
>> What I mean is that today it's normal to have:
>> main()
>> opendbfs()
>> mainmenu() // which call
>> menupoint1()
>> menupoint2()
>>
>> if I have a long report or a ftp exchange I could move it to a
>> separate thread so the user doesn't wait for it, but if the threaded
>> function has to reopen all the dbfs it will require a major change of
>> the apps.
> 
> No it's exactly reverted situation. You can reopen all DBFs quite fast
> in single function. Just pass them to child workarea in an array.
> But if you do not want to make it then you will have to change your
> application and add some mutexes to synchronize WA access between
> threads. Farther to not kill the performance you will have to group
> your IO operations inside single locks. It will still not be efficient
> enough when your application uses because indexes because each thread
> will discard index page tress for the other if they are operating
> on different records so each skip will have to start with seek to
> rebuild the path from index root node to current record key, etc.
> You will also have to implement your own functions to lock workarea
> which will keep current record and current order and after each WA
> LOCK you will have to restore them and before each WA UNLOCK you
> will have to store current values which will be restores later.
> Do you like it? You have to make it in xHarbour. And you cannot
> easy reopen tables because WA aliases are global so each thread
> will have to use new alias names. Full WA and alias separation
> like in Harbour resolves this problems. Please also consider
> that it's quite easy to implement automatic synchronization with
> setting and saving RECNO and order number. Anyhow it will not
> be useable for real life application. Just think what will
> happen when two threads want to read 100 fields from different
> records in the same WA on real multiprocessor machine:
> 
> =thread 1: locks WA makes GOTO 20, RDD reads record from file,
>            reads field from record buffer, unlocks WA
> =thread 2: locks WA makes GOTO 30, RDD reads record from file,
>            reads field from record buffer, unlocks WA
> =thread 1: locks WA makes GOTO 20, RDD reads record from file
>            again because thread 2 has just overloaded the
>            buffer with record 30 body, reads field from record
>            buffer, unlocks WA
> =thread 1: locks WA makes GOTO 30, RDD reads record from file
>            again because thread 1 has just overloaded the
>            buffer with record 20 body, reads field from record
>            buffer, unlocks WA
> [the same yet 98 times]
> 
> Now think about 10 threads and think what will happen. It
> will be killer for any computer. To resolve the problem
> you will have to create separate record buffer for each
> thread in each shared WA. But the same you will have to
> make for RECNO value, index tree, current index position
> and nearly all other WA internal data so you will end up
> with nearly full copy of WA. In practice only OS related
> resources will not have to be replicated and even should
> not be for optimal performance. For WA it means that
> you can share file handles, file locks and file cache
> buffers. We do not have file cache buffers yet so it's
> not too much what we can share.
> As you can see reopening WA does not make too much
> different operations then creating final really working
> with acceptable performance shared workarea for new
> thread.
> I'll add WA cloning mechanism in the future but now just
> simply reopen the tables.
> You can crate function which will store information about
> all open in shared mode tables and indexes in an array, f.e.:
>    { cRDD, cTable, { cIndexes, ... } }
> for all used WA and then pass this array to child thread
> so it can reopen them.
> If you do not was not start each thread with such code
> for each single query then do not terminate threads after
> finished job but stop it on mutex using hb_mutexSubscribe()
> waiting for new job which will be send from server by
> hb_mutexNotify(). The workarea will be open so you can
> simply make the requested job. If your server will decide
> that there is too much waiting threads (f.e. more then 5)
> then simply send few terminate requests using this mutex
> to reduce number of waiting threads. You have classing
> example how it can work in tests/mt/mttest07.prg
> where as terminate request I used NIL value.
> 
>> With SQL data object is much easier you need only to pass
>> one reference to the connection
> 
> Not such easy. Only if used protocol/API is stateless and
> connection library MT safe. If API is not stateless then
> each thread will need new (cloned by us end if necessary by
> server) communication object which will store the states or
> you will have to use mutex to synchronize access to such
> object and it's internal connection. In practice it's
> exactly the same problem as for workareas and exactly
> the same things have to be resolved.
> 
>> but with many workareas that have many
>> indexes things are not easy.
>> Am I wrong? ( I hope so )
> 
> Read above. I'm not sure I was clear enough bu I hope
> you will understand me.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> __________ Informaci?n de NOD32, revisi?n 3444 (20080916) __________
> 
> Este mensaje ha sido analizado con NOD32 antivirus system
> http://www.nod32.com
> 
> 
> 

From lorenzo.fiorini at gmail.com  Tue Sep 16 04:54:53 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Sep 16 04:55:01 2008
Subject: [Harbour] Re: Question about MT
In-Reply-To: <48CF6745.4090900@marchuet.net>
References: <9257026e0809151346m718f6d7die21fc1709620894@mail.gmail.com>
	<9257026e0809151406l275b3c40m2e5e7d9b11d7d8a5@mail.gmail.com>
	<20080915230053.GA31139@34-mo7-2.acn.waw.pl>
	<48CF6745.4090900@marchuet.net>
Message-ID: <9257026e0809160154k58d5a43fn984caefa076e0934@mail.gmail.com>

On Tue, Sep 16, 2008 at 9:59 AM, Miguel Angel Marchuet
<miguelangel@marchuet.net> wrote:

> I am sure that anyone you something can happen, so that it is necessary to
> have public areas.
> without detract from private ones.
>
> I think that Multithread, can be more usefull with public and private wa
> public and private (public variables)

????????

Sorry I don't understand could you rephrase it?

best regards,
Lorenzo
From dbtopas at dbtopas.lt  Tue Sep 16 05:36:05 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Sep 16 05:36:00 2008
Subject: [Harbour] 2008-09-15 04:33 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <52DAD3D4-62BE-4553-825C-F2F99DABCBF4@syenar.hu>
References: <20080915023417.4EF7BBF6AD@34-mo7-2.acn.waw.pl>	<9CDB4FB1-9C16-4925-8810-892FF145383B@syenar.hu>	<20080915202430.GB8271@34-mo7-2.acn.waw.pl>
	<52DAD3D4-62BE-4553-825C-F2F99DABCBF4@syenar.hu>
Message-ID: <48CF7E05.5060900@dbtopas.lt>

Szak?ts Viktor wrote:
>>> [ I cannot anymore use non-GNU make files for
>>> BCC to do any tests though. ]
>>
>> What has happened?
> 
> Something must have gone wrong in common.mak (I guess),
> since I'm getting the ".OBJ" file error also mentioned
> by Pritpal (and reported in one of my ChangeLog entries),
> MSVS also won't build, stopping at around the same point.
> Besides that I have/had my system (along with Harbour)
> setup the single MT _or_ ST way, now with the new one
> there is no way to build any tests out of the box using
> bld_*.bat files (at least not without editing them first).
> 
> IOW, after my first patch it was pretty easy to get an MT
> build with non-GNU, now it's not easily possible even if
> this problem gets fixed.

Hi,


I've not understood, do you have problem with MS or BCC build? I'm using 
BCC55 for ST/MT testing and standard make_b32.bat works very well.

Before
------------------
2008-09-15 04:33 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
   * harbour/common.mak
   * harbour/make_b32.mak
   * harbour/make_gcc.mak
     + added HBVMMT library for default builds
       BCC version not tested - please test.
------------------
I had to:
- set define HB_MT_VM
- build binaries
- rename hbvm.lib to hbvmmt.lib
- do make_b32.bat clean
- build again (without HB_VM_MT)

Now it is enough to:
- build binaries

Do you find problem in BCC55 or BCC582?


Best regards,
Mindaugas


From harbour.01 at syenar.hu  Tue Sep 16 05:40:50 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 16 05:41:01 2008
Subject: [Harbour] 2008-09-16 05:14 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <19504905.post@talk.nabble.com>
References: <01c917aa$Blat.v2.6.2$e76240e8$12a0bffd41e0@127.0.0.1>
	<19504905.post@talk.nabble.com>
Message-ID: <80E55861-A019-4E77-ADF4-AF810CE242FD@syenar.hu>

I don't know what this may be, but looks
like something locally screwed. Did you try
after a fresh checkout?

Brgds,
Viktor

On 2008.09.16., at 5:55, Pritpal Bedi wrote:

>
> Hello Viktor
>
>
> Szak?ts Viktor wrote:
>>
>> 2008-09-16 05:14 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>>   * include/hbdefs.h
>>     ! Removed mistakenly committed experiment to pull in
>>       MT related libs. This caused the strange build problem due
>>       to empty lib name passed to #pragma. This could work
>>       in case someone wanted to deal with it in the future.
>>
>
> Now the new error, immediately after make_b32:
>
> MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
> Error E2194: Could not find file '_XHB.cpp'
> source\common\expropt1.c:
>
> ** error 1 ** deleting obj\b32\expropt1.obj
>
>
> Regards
> Pritpal Bedi
>
> -- 
> View this message in context: http://www.nabble.com/2008-09-16-05%3A14-UTC%2B0200-Viktor-Szakats-%28harbour.01-syenar-hu%29-tp19504733p19504905.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From dbtopas at dbtopas.lt  Tue Sep 16 05:42:46 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Sep 16 05:42:41 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <C2FF9FF7-E1FA-43A8-BA4D-BF060DB70702@syenar.hu>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>	<48CE57C6.2030006@dbtopas.lt>	<20080915154445.GA803@34-mo7-2.acn.waw.pl>	<48CE9A2E.9020201@dbtopas.lt>	<20080915184410.GA13559@34-mo7-2.acn.waw.pl>	<48CECBF9.1080605@dbtopas.lt>	<B6E95936-FE68-4D81-9C74-56AD316E871D@syenar.hu>	<19502705.post@talk.nabble.com>
	<C2FF9FF7-E1FA-43A8-BA4D-BF060DB70702@syenar.hu>
Message-ID: <48CF7F96.8070801@dbtopas.lt>

Szak?ts Viktor wrote:
>> I have downloaded the 300+ mb package but while installing
>> it demands a lot other packages which I do not want to install
>> on my machine. What is the short cut?
> 
> I've installed it as is, then copied from the install dir
> what I needed (bin, include, lib, help) to my devl dir,
> and finally uninstalled the whole official package.

Hi,


does copied bin/include/lib/help of BCC582 works without .net?

I do not have .net installed and I'm trying to avoid this. There was one 
more big "against BCC582" by Luis Krause Mantilla on xharbour mailing list:
> Thanks for the info.  It was quite a hassle to get BCC 5.8 installed.
> Even though I already had .net 1.1 installed, I had go fine the
> .net 1.1 sdk, .net redist 1.1 and the j# redist 1.1 installers from
> MS site before the Turbo C++ installer would install.


Best regards,
Mindaugas
From harbour.01 at syenar.hu  Tue Sep 16 05:46:02 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 16 05:46:11 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <9257026e0809152300p27ba1c03x911ce23aa8514739@mail.gmail.com>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<200809152031.17032.philb@philb.us>
	<6783A106-F7BD-4ECC-AF6D-EA28779FB38F@syenar.hu>
	<200809152337.56049.philb@philb.us>
	<6690FE75-9324-4347-8105-EB3DE0351AE7@syenar.hu>
	<9257026e0809152300p27ba1c03x911ce23aa8514739@mail.gmail.com>
Message-ID: <37554616-C6A5-4562-BFB5-E76810F17E9D@syenar.hu>

Yes, Mercurial seems very nice and more approachable.

I personally could never try it due to some (unfixable
since one year - probably out of sheer stupidity - but
I did try everything) missing Python SVN bindings
(which broke my local Trac under Apache, too - all
Windows BTW), which would be needed for a repository
conversion. So for me the downside is that it's written
in Python. If anyone has a solution for the above, it'd
be great to hear.

Brgds,
Viktor

On 2008.09.16., at 8:00, Lorenzo Fiorini wrote:

> On Tue, Sep 16, 2008 at 6:10 AM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
>> While I still don't see where did I complain of anything
>> to which GIT would be the solution (I was merely shocked
>> by some words and lack of interest), I'd be glad to try
>> GIT (libharu's repository is in GIT f.e., Wine too). Too
>> bad it's currently not very easy to access and use outside
>> Linux (in Windows for serious work f.e.). And since it comes
>> from Linus, there is a "slight" chance that ease of use for
>> mere mortals will suffer. So it might be some time until
>> it catches on like SVN.
>
> I've used git but I never really mastered it, then I moved to bazaar
> but today I use hg mercurial both in Linux and Windows.
> I find it simple to understand and to use and it has a good plug in
> for Eclipse ( our company's standard IDE ). AFAIK mercurial is also
> well supported in Netbeans.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue Sep 16 06:00:07 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 16 06:00:17 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <48CF7F96.8070801@dbtopas.lt>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>	<48CE57C6.2030006@dbtopas.lt>	<20080915154445.GA803@34-mo7-2.acn.waw.pl>	<48CE9A2E.9020201@dbtopas.lt>	<20080915184410.GA13559@34-mo7-2.acn.waw.pl>	<48CECBF9.1080605@dbtopas.lt>	<B6E95936-FE68-4D81-9C74-56AD316E871D@syenar.hu>	<19502705.post@talk.nabble.com>
	<C2FF9FF7-E1FA-43A8-BA4D-BF060DB70702@syenar.hu>
	<48CF7F96.8070801@dbtopas.lt>
Message-ID: <C7767CE2-D941-4201-A447-1353BE246619@syenar.hu>

>
Hi Mindaugas,

> does copied bin/include/lib/help of BCC582 works without .net?

For the base compiler tools - everything needed for
a Harbour build - it doesn't need .NET.

> I do not have .net installed and I'm trying to avoid this. There was  
> one more big "against BCC582" by Luis Krause Mantilla on xharbour  
> mailing list:

I didn't know that, but I haven't met with any real
problems with it. [ may be interesting to see that mail
anyway. ]

There is some bloat in its binary dirs and some signs
that the BCC project is (still) having some difficult
times.

I may be moving forward to MSVS 2008 though, because
it's much better supported and seems to create better
executables. I've yet to see it doing incremental links.

>> Thanks for the info.  It was quite a hassle to get BCC 5.8 installed.
>> Even though I already had .net 1.1 installed, I had go fine the
>> .net 1.1 sdk, .net redist 1.1 and the j# redist 1.1 installers from
>> MS site before the Turbo C++ installer would install.

Yes, now that you say I think I also had install
the first two to finish with the initial installation.
You can most probably remove these (if made possible
by MS that is) once you have your stripped installation.

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 16 06:01:55 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 16 06:02:03 2008
Subject: [Harbour] 2008-09-16 12:01 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c917e3$Blat.v2.6.2$3fec0afe$15581017be4a@127.0.0.1>

2008-09-16 12:01 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
  * contrib/mtpl_b32.mak
    ! Removed CG switches.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 16 06:01:57 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 16 06:02:08 2008
Subject: [Harbour] Re: 2008-09-15 21:05 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C03268A6A19@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C03268A6A19@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <744A539B-EA2E-47E1-BA27-49FF2BD387C8@syenar.hu>

>> 2008-09-15 21:05 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>>  * make_b32.mak
>>  * contrib/mtpl_b32.mak
>>    + Added -vG -Od to debug flags (CodeGuard and no optimization   
>> if HB_BUILD_DEBUG is 'yes').
>
> CodeGuard enabled programs are EXTREMELY slow, it should only be  
> enabled when you want to
> inspect your program for leaks and other troubles. I know people are  
> using debug versions in client
> sites to help them in future trouble finding (or just forget to turn  
> off debug, yes I saw that too). I don't
> think it should be enabled with debug.

Thanks Chen, I'll remove them then.

Brgds,
Viktor

From mbelgrano at deltain.it  Tue Sep 16 06:22:36 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep 16 06:22:52 2008
Subject: [Harbour] Wich internal define are you using in harbour?
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EF9D@SRV02.deltain.net>

Hi Harbour folk
Which other harbour compiler/library  internal define are now active?
If you know any option please other follow please reply with -DHB_* and
if possible a little description

 -DHB_WIN32_IO
 -DHB_FM_WIN32_ALLOC
 -DHB_FM_STATISTICS_OFF
 -DHB_GUI
 -DHB_NO_PROFILER
 -DHB_NO_TRACE
 -DHB_USE_TLS 
 -DHB_MT_VM?

Thanks in advance

Massimo Belgrano

From maurilio.longo at libero.it  Tue Sep 16 06:35:14 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Sep 16 06:35:22 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <48CDA859.5050006@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CDA859.5050006@mail.udg.mx>
Message-ID: <48CF8BE2.2040000@libero.it>

David,

xHarbour DOES buil mt in OS/2 :)

Maurilio.



David Arturo Macias Corona wrote:
> Przemek:
> 
>>Can you make OS2 build test with current devel branch (1.1. in trunk)?
>>It's highly possible that OS2 build is broken by last modifications
>>because I was not even able to verify the modifications by simple
>>compilation.
> 
> First of all thanks for your great work
> 
> While reading your big message which reflect the wide of your work I was
> thinking about to look for my next "break to rest" time to test it under
> OS/2
> 
> At first comment I am not sure it will work but I hope
> xHarbour does not build MT in OS/2 perhaps for specific reasons
> 
> David Macias
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From dmacias at mail.udg.mx  Tue Sep 16 06:57:55 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Sep 16 06:58:02 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48CF9133.8060202@mail.udg.mx>

Maurilio:

 > xHarbour DOES buil mt in OS/2 :)

How    :-)

David Macias


From harbour.01 at syenar.hu  Tue Sep 16 07:01:28 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 16 07:01:38 2008
Subject: [Harbour] 2008-09-16 13:01 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c917eb$Blat.v2.6.2$91963124$108474ca0cc8@127.0.0.1>

2008-09-16 13:01 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/compiler/hbgenerr.c
    * Most ':' chars removed from Harbour compiler error messages.
      Few still remain, where I wasn't sure of the exact meaning 
      or final layout of the texts.
      Warnings are also a TODO yet.
      Please review.
--
Brgds,
Viktor

From sscc at mweb.co.za  Tue Sep 16 07:29:01 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Sep 16 07:29:19 2008
Subject: [Harbour] Release 1.0.1 #3
In-Reply-To: <5BF79AE6-35CF-4E97-9719-7E5D880A7B8D@syenar.hu>
References: <5BF79AE6-35CF-4E97-9719-7E5D880A7B8D@syenar.hu>
Message-ID: <48CF987D.9000309@mweb.co.za>

Szak?ts Viktor wrote:

> TODO    MSVC 6.0 (HBODBC: needs fresh ODBC headers from MSSDK)

All seems fine.

There were many command line warnings, about suppressing these kind of 
warnings:

source\pp\ppcore.c(1376) : warning C4761: integral size mismatch in 
argument; conversion supplied

which MSVC 6 doesn't support, no big deal.

HBODBC compiles OK? Well the log file was empty and I have an 
hbodbc.lib created. Maybe you fixed it here?

2008-09-10 13:22 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbodbc/odbc.c
     ! MSVC warning fixed in the UNICODE path.

I have attached the hbtest output.

Thanks
Alex






-------------- next part --------------
Harbour Regression Test Suite
Copyright (c) 1999-2008, http://www.harbour-project.org/
---------------------------------------------------------------------------
      Version: Harbour 1.0.1 Intl. (Rev. 9404)
     Compiler: Microsoft Visual C 12.0.8804 (32 bit)
           OS: Windows XP 5.1.2600 Service Pack 2
   Date, Time: 2008.09.16 13:28:04
       Output: (stdout)
Shortcut opt.: ON
     Switches:  
===========================================================================
R No.  Line            TestCall()                               -> Result                                                                                | Expected                                                                             
---------------------------------------------------------------------------
!  596 MAIN_HVMA(351)  saArray[ 1000 ]                         
       Result: "E BASE 1132 Bound error array access A:2:A:{.[1].};N:1000 "
     Expected: "E BASE 1132 Bound error array access "
!  597 MAIN_HVMA(352)  saArray[ 1000 ] := 1                    
       Result: "E BASE 1133 Bound error array assign A:1:N:1000 "
     Expected: "E BASE 1133 Bound error array assign "
!  726 MAIN_HVMA(513)  RTSTR( 00000500000000000000 )           
       Result: " 16  500000000000000"
     Expected: " 21       500000000000000"
!  727 MAIN_HVMA(514)  RTSTR( 0500000000000000 )               
       Result: " 16  500000000000000"
     Expected: " 17   500000000000000"
! 1071 MAIN_MATH(359)  Str(1234567890 * 1234567890 )           
       Result: " 1524157875019052100"
     Expected: " 1524157875019052000"
! 1466 MAIN_STR(322)   AllTrim( NIL )                          
       Result: "E BASE 2022 Argument error ALLTRIM A:1:U:NIL F:S"
     Expected: "E BASE 2022 Argument error ALLTRIM F:S"
! 1467 MAIN_STR(323)   AllTrim( 100 )                          
       Result: "E BASE 2022 Argument error ALLTRIM A:1:N:100 F:S"
     Expected: "E BASE 2022 Argument error ALLTRIM F:S"
! 1539 MAIN_STR(423)   StrTran( NIL )                          
       Result: "E BASE 1126 Argument error STRTRAN A:1:U:NIL F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 1540 MAIN_STR(424)   StrTran( 100 )                          
       Result: "E BASE 1126 Argument error STRTRAN A:1:N:100 F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 1541 MAIN_STR(426)   StrTran( "AA", 1 )                      
       Result: "E BASE 1126 Argument error STRTRAN A:2:C:AA;N:1 F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 2828 MAIN_ARRAY(107) AFill( NIL )                            
       Result: "E BASE 6004 Argument error AFILL A:1:U:NIL "
     Expected: "E BASE 6004 Argument error AFILL "
! 2872 MAIN_ARRAY(164) ASize( NIL )                            
       Result: "E BASE 2023 Argument error ASIZE A:1:U:NIL "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2873 MAIN_ARRAY(165) ASize( {} )                             
       Result: "E BASE 2023 Argument error ASIZE A:1:A:{.[0].} "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2874 MAIN_ARRAY(166) ASize( ErrorNew() )                     
       Result: "E BASE 2023 Argument error ASIZE A:1:O:ERROR Object "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2875 MAIN_ARRAY(175) ASize( NIL, 0 )                         
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:0 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2876 MAIN_ARRAY(176) ASize( NIL, 1 )                         
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:1 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2877 MAIN_ARRAY(177) ASize( NIL, -1 )                        
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:-1 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2899 MAIN_ARRAY(214) Array( -1 )                             
       Result: "E BASE 1131 Bound error array dimension A:1:N:-1 "
     Expected: "E BASE 1131 Bound error array dimension "
! 2900 MAIN_ARRAY(215) Array( 1, 0, -10 )                      
       Result: "E BASE 1131 Bound error array dimension A:3:N:1;N:0;N:-10 "
     Expected: "E BASE 1131 Bound error array dimension "
! 3026 MAIN_ARRAY(362) TAEVSM()                                
       Result: "N10N 9N 8N 7N 6         5"
     Expected: "N10N 9N 8N 7N 6N 5N 4N 3N 2N 1         0"
! 3027 MAIN_ARRAY(363) TASOSM1()                               
       Result: "NN 5NN 4NN 3NN 2         1{ 3 }"
     Expected: "NN 5NN 4NN 3NN 2NN 1NN 0NN 0NN 0NN 0NN 0NN 0NN 0         0{  }"
! 3028 MAIN_ARRAY(364) TASOSM2()                               
       Result: "NN 5NN 4NN 3NN 2         1{ 3 }"
     Expected: "NN 5NN 4NN 3NN 2NN 1NN 0NN 0NN 0NN 0NN 0         0{  }"
! 4705 MAIN_LAST(179)  __MRestore( "$NOTHERE.MEM", .F. )       
       Result: "E BASE 2005 Open error $NOTHERE.MEM A:2:C:$NOTHERE.MEM;L:.F. F:DR"
     Expected: "E BASE 2005 Open error $NOTHERE.MEM F:DR"
! 4707 MAIN_LAST(183)  __MSave( BADFNAME(), "*", .T. )         
       Result: "E BASE 2006 Create error *BADNAM*.MEM A:3:C:*BADNAM*.MEM;C:*;L:.T. F:DR"
     Expected: "E BASE 2006 Create error *BADNAM*.MEM F:DR"
===========================================================================
Test calls passed:       4683 ( 99.49 % )
Test calls failed:         24 ( 0.51 % )
                   ----------
            Total:       4707 ( Time elapsed: 0.11 seconds )

WARNING ! Failures detected
From harbour.01 at syenar.hu  Tue Sep 16 07:52:12 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 16 07:52:21 2008
Subject: [Harbour] Release 1.0.1 #3
In-Reply-To: <48CF987D.9000309@mweb.co.za>
References: <5BF79AE6-35CF-4E97-9719-7E5D880A7B8D@syenar.hu>
	<48CF987D.9000309@mweb.co.za>
Message-ID: <233203F0-3BB7-4024-BBAC-790FECA23C6F@syenar.hu>

Hi Alex,

This looks good, many thanks.

As for ODBC, these were just a few warnings fixed, so
maybe you just have now the fresh SDK headers in place.

[ BTW, my OpenSolaris VM just collapsed after trying
to start it up after a failed Solaris OS upgrade (run
out of virtual disk space), plus a VBOX and an OS X
upgrade. So I may not do any OpenSolaris tests until
the next OS version is released. I guess it would work
though, as most changes were outside the scope of this
OS, and if not, we can fix those in 1.0.2. ]

Brgds,
Viktor

On 2008.09.16., at 13:29, Alex Strickland wrote:

> Szak?ts Viktor wrote:
>
>> TODO    MSVC 6.0 (HBODBC: needs fresh ODBC headers from MSSDK)
>
> All seems fine.
>
> There were many command line warnings, about suppressing these kind  
> of warnings:
>
> source\pp\ppcore.c(1376) : warning C4761: integral size mismatch in  
> argument; conversion supplied
>
> which MSVC 6 doesn't support, no big deal.
>
> HBODBC compiles OK? Well the log file was empty and I have an  
> hbodbc.lib created. Maybe you fixed it here?
>
> 2008-09-10 13:22 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>  * contrib/hbodbc/odbc.c
>    ! MSVC warning fixed in the UNICODE path.
>
> I have attached the hbtest output.
>
> Thanks
> Alex
>
>
>
>
>
>
> Harbour Regression Test Suite
> Copyright (c) 1999-2008, http://www.harbour-project.org/
> ---------------------------------------------------------------------------
>      Version: Harbour 1.0.1 Intl. (Rev. 9404)
>     Compiler: Microsoft Visual C 12.0.8804 (32 bit)
>           OS: Windows XP 5.1.2600 Service Pack 2
>   Date, Time: 2008.09.16 13:28:04
>       Output: (stdout)
> Shortcut opt.: ON
>     Switches:
> = 
> = 
> = 
> = 
> = 
> ======================================================================
> R No.  Line            TestCall()                               ->  
> Result 
>                                                                                 | 
>  Expected
> ---------------------------------------------------------------------------
> !  596 MAIN_HVMA(351)  saArray[ 1000 ]
>       Result: "E BASE 1132 Bound error array access A:2:A:{.[1].};N: 
> 1000 "
>     Expected: "E BASE 1132 Bound error array access "
> !  597 MAIN_HVMA(352)  saArray[ 1000 ] := 1
>       Result: "E BASE 1133 Bound error array assign A:1:N:1000 "
>     Expected: "E BASE 1133 Bound error array assign "
> !  726 MAIN_HVMA(513)  RTSTR( 00000500000000000000 )
>       Result: " 16  500000000000000"
>     Expected: " 21       500000000000000"
> !  727 MAIN_HVMA(514)  RTSTR( 0500000000000000 )
>       Result: " 16  500000000000000"
>     Expected: " 17   500000000000000"
> ! 1071 MAIN_MATH(359)  Str(1234567890 * 1234567890 )
>       Result: " 1524157875019052100"
>     Expected: " 1524157875019052000"
> ! 1466 MAIN_STR(322)   AllTrim( NIL )
>       Result: "E BASE 2022 Argument error ALLTRIM A:1:U:NIL F:S"
>     Expected: "E BASE 2022 Argument error ALLTRIM F:S"
> ! 1467 MAIN_STR(323)   AllTrim( 100 )
>       Result: "E BASE 2022 Argument error ALLTRIM A:1:N:100 F:S"
>     Expected: "E BASE 2022 Argument error ALLTRIM F:S"
> ! 1539 MAIN_STR(423)   StrTran( NIL )
>       Result: "E BASE 1126 Argument error STRTRAN A:1:U:NIL F:S"
>     Expected: "E BASE 1126 Argument error STRTRAN F:S"
> ! 1540 MAIN_STR(424)   StrTran( 100 )
>       Result: "E BASE 1126 Argument error STRTRAN A:1:N:100 F:S"
>     Expected: "E BASE 1126 Argument error STRTRAN F:S"
> ! 1541 MAIN_STR(426)   StrTran( "AA", 1 )
>       Result: "E BASE 1126 Argument error STRTRAN A:2:C:AA;N:1 F:S"
>     Expected: "E BASE 1126 Argument error STRTRAN F:S"
> ! 2828 MAIN_ARRAY(107) AFill( NIL )
>       Result: "E BASE 6004 Argument error AFILL A:1:U:NIL "
>     Expected: "E BASE 6004 Argument error AFILL "
> ! 2872 MAIN_ARRAY(164) ASize( NIL )
>       Result: "E BASE 2023 Argument error ASIZE A:1:U:NIL "
>     Expected: "E BASE 2023 Argument error ASIZE "
> ! 2873 MAIN_ARRAY(165) ASize( {} )
>       Result: "E BASE 2023 Argument error ASIZE A:1:A:{.[0].} "
>     Expected: "E BASE 2023 Argument error ASIZE "
> ! 2874 MAIN_ARRAY(166) ASize( ErrorNew() )
>       Result: "E BASE 2023 Argument error ASIZE A:1:O:ERROR Object "
>     Expected: "E BASE 2023 Argument error ASIZE "
> ! 2875 MAIN_ARRAY(175) ASize( NIL, 0 )
>       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:0 "
>     Expected: "E BASE 2023 Argument error ASIZE "
> ! 2876 MAIN_ARRAY(176) ASize( NIL, 1 )
>       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:1 "
>     Expected: "E BASE 2023 Argument error ASIZE "
> ! 2877 MAIN_ARRAY(177) ASize( NIL, -1 )
>       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:-1 "
>     Expected: "E BASE 2023 Argument error ASIZE "
> ! 2899 MAIN_ARRAY(214) Array( -1 )
>       Result: "E BASE 1131 Bound error array dimension A:1:N:-1 "
>     Expected: "E BASE 1131 Bound error array dimension "
> ! 2900 MAIN_ARRAY(215) Array( 1, 0, -10 )
>       Result: "E BASE 1131 Bound error array dimension A:3:N:1;N: 
> 0;N:-10 "
>     Expected: "E BASE 1131 Bound error array dimension "
> ! 3026 MAIN_ARRAY(362) TAEVSM()
>       Result: "N10N 9N 8N 7N 6         5"
>     Expected: "N10N 9N 8N 7N 6N 5N 4N 3N 2N 1         0"
> ! 3027 MAIN_ARRAY(363) TASOSM1()
>       Result: "NN 5NN 4NN 3NN 2         1{ 3 }"
>     Expected: "NN 5NN 4NN 3NN 2NN 1NN 0NN 0NN 0NN 0NN 0NN 0NN  
> 0         0{  }"
> ! 3028 MAIN_ARRAY(364) TASOSM2()
>       Result: "NN 5NN 4NN 3NN 2         1{ 3 }"
>     Expected: "NN 5NN 4NN 3NN 2NN 1NN 0NN 0NN 0NN 0NN 0         0{  }"
> ! 4705 MAIN_LAST(179)  __MRestore( "$NOTHERE.MEM", .F. )
>       Result: "E BASE 2005 Open error $NOTHERE.MEM A:2:C: 
> $NOTHERE.MEM;L:.F. F:DR"
>     Expected: "E BASE 2005 Open error $NOTHERE.MEM F:DR"
> ! 4707 MAIN_LAST(183)  __MSave( BADFNAME(), "*", .T. )
>       Result: "E BASE 2006 Create error *BADNAM*.MEM A: 
> 3:C:*BADNAM*.MEM;C:*;L:.T. F:DR"
>     Expected: "E BASE 2006 Create error *BADNAM*.MEM F:DR"
> = 
> = 
> = 
> = 
> = 
> ======================================================================
> Test calls passed:       4683 ( 99.49 % )
> Test calls failed:         24 ( 0.51 % )
>                   ----------
>            Total:       4707 ( Time elapsed: 0.11 seconds )
>
> WARNING ! Failures detected
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From clipper5_y2d at versateladsl.be  Tue Sep 16 08:24:37 2008
From: clipper5_y2d at versateladsl.be (frank van nuffel)
Date: Tue Sep 16 08:26:00 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200
	PrzemyslawCzerpak	(druzus/at/priv.onet.pl)
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>	<48CE57C6.2030006@dbtopas.lt>	<20080915154445.GA803@34-mo7-2.acn.waw.pl>	<48CE9A2E.9020201@dbtopas.lt>	<20080915184410.GA13559@34-mo7-2.acn.waw.pl>	<48CECBF9.1080605@dbtopas.lt>	<B6E95936-FE68-4D81-9C74-56AD316E871D@syenar.hu>	<19502705.post@talk.nabble.com><C2FF9FF7-E1FA-43A8-BA4D-BF060DB70702@syenar.hu><48CF7F96.8070801@dbtopas.lt>
	<C7767CE2-D941-4201-A447-1353BE246619@syenar.hu>
Message-ID: <D2B710BDCEAA4A65AF351908724CA903@uwlhldv32rnqu4>

Hello Viktor,
         Mindaugas,

btw, congrats to you all for these achievements; i'm trying to keep up with
both 1.0.1 and 1.1.0dev; synchronising goes fine (after the sourceforge SVN
message a simple fresh checkout solved every sync hassle)

i confirm .NET 1.1 as well as its SDK and J# 1.1 redist is needed to be able
to install Turbo C++ 5.8 but also that all of these can be uninstalled from
configuration->software; probably, having windows make a system recovery
backup before installing and restoring that backup afterwards will also
clear out the registry from updates by these; it's a bit of compare and
match against the freecommandline install (5.5.1) to gather all necessary
files, but it works; i've come to finish recompiling both branches with
5.8.2 and all works like a charm

Thanks for all the work and care,

with kind regards,

frank

----- Original Message ----- 
From: "Szak?ts Viktor" <harbour.01@syenar.hu>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Tuesday, September 16, 2008 12:00 PM
Subject: Re: [Harbour] 2008-09-15 13:38 UTC+0200 PrzemyslawCzerpak
(druzus/at/priv.onet.pl)


>>> Thanks for the info.  It was quite a hassle to get BCC 5.8 installed.
>>> Even though I already had .net 1.1 installed, I had go fine the
>>> .net 1.1 sdk, .net redist 1.1 and the j# redist 1.1 installers from
>>> MS site before the Turbo C++ installer would install.

> Yes, now that you say I think I also had install
> the first two to finish with the initial installation.
> You can most probably remove these (if made possible
> by MS that is) once you have your stripped installation.

From druzus at acn.waw.pl  Tue Sep 16 08:26:34 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 16 08:27:11 2008
Subject: [Harbour] Re: Question about MT
In-Reply-To: <48CF6745.4090900@marchuet.net>
References: <9257026e0809151346m718f6d7die21fc1709620894@mail.gmail.com>
	<9257026e0809151406l275b3c40m2e5e7d9b11d7d8a5@mail.gmail.com>
	<20080915230053.GA31139@34-mo7-2.acn.waw.pl>
	<48CF6745.4090900@marchuet.net>
Message-ID: <20080916122634.GA15097@34-mo7-2.acn.waw.pl>

On Tue, 16 Sep 2008, Miguel Angel Marchuet wrote:

Hi Migueal,

> I tray to say another thing.
> When I say public wa. I want to say that the recno
> is the same for all threads, and the wa is too exactly the same.
> ->thread 1: skip
> ->thread 2: recno
> for example thread 2 make window paint OrdKeyNo()/OrdKeyCount() values.
>             thread 1 control browse move.

I do not understand what you want to do. Please explain me
how you can imagine that one thread will make skip index
for browse navigation and second one for ordKeyCount()
using the same data? It's exactly the problem I'm
talking about. You will create performance killer setting
and restoring index key between task switching which will
be in practice manual on set/release mutex so of you will
not be able to benefit from mutliCPU machines.
The only one think you can do without WA cloning is
hardcoding some chosen operations and specific for given
RDD operations to work on some local data copy with the
second thread. But it's not sth what give .prg user
flexible interface.

> this case are not possible with actual thread system.

Simultaneous RDD access is be possible only with WA cloning.
Now you can emulate it by reopening the table.
In xHarbour it's not possible at all.

> I am sure that anyone you something can happen, so that it is necessary to have public areas.
> without detract from private ones.

Yes common workareas are very good idea and I'll add them
but they will not work for situations like you described above
because access to such WA structures will have to controlled
by mutex so it will not be possible to make on the same WA
two different operations simultaneously. F.e. you will not
be able to scan index to calculate ordKeyCount() in one
thread and in the same time scan index for simple SKIP
navigation. For such simultaneous access you need cloned
WA structures and shared ones do not give you anything
valuable.

> I think that Multithread, can be more usefull with public and private wa
> public and private (public variables)

I also think it's good to add some options to control resources shared
and cloned between threads but I have some doubts if you know what yo
want do with WA shared WA in different threads.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep 16 08:49:24 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 16 08:49:58 2008
Subject: [Harbour] 2008-09-16 14:49 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080916124924.GA27251@34-mo7-2.acn.waw.pl>

2008-09-16 14:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbthread.h
    + added DMC to list of compilers which can use __declspec( thread )
    + automatically use TLS for Linux and GLIBC >= 2.6 on x86* machines

  * harbour/include/hbthread.h
  * harbour/source/vm/estack.c
  * harbour/source/vm/thread.c
    ! clean up typos in OS2 builds

best regards
Przemek
From druzus at acn.waw.pl  Tue Sep 16 08:50:57 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 16 08:51:33 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <48CF6483.3060304@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48CF6483.3060304@mail.udg.mx>
Message-ID: <20080916125057.GA27640@34-mo7-2.acn.waw.pl>

On Tue, 16 Sep 2008, David Arturo Macias Corona wrote:

Hi David,

> Below are results of current Harbour under eComStation 1.2MR
> gcc 3.3.5
> warnings in thread.c and error in estack.c

Thank you very much.
Can you try again with current SVN?

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Sep 16 09:01:45 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 16 09:02:00 2008
Subject: [Harbour] [1.0] 2008-09-16 15:00 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c917fc$Blat.v2.6.2$5f4361fe$28c2252a00e@127.0.0.1>

2008-09-16 15:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * debian/changelog
    + Added 1.0.1.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 16 09:15:18 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 16 09:15:26 2008
Subject: [Harbour] Release 1.0.1 #6
Message-ID: <6E048D27-E096-4B2C-96C4-028CD52ECC80@syenar.hu>

Hi all,

I'll tag 1.0.1 tomorrow.

Ubuntu/OpenSuse default build tested, MSVC 6 added.

Used external packages (on my system that is):
- Allegro 4.2.2
- Apollo 6.1.0.4
- libcurl 7.19.0 (7.18.2 for DMC builds)
- Firebird 2.0.4
- FreeImage 3.11.0
- libgd 2.0.34
- libharu 2.1.0
- mysql 5.0.47
- pgsql 8.3.3
- ADS 9.00

Tested platforms:
- Windows
	BCC 5.51
	BCC 5.82
	GCC Cygwin 3.4.4
	GCC MinGW 3.4.5 (on msys 1.0.10)
	GCC MinGW 4.1.2 (on msys 1.0.10)
TODO	GCC MinGW 3.4.5 (cross compile on OpenSuse 10.3, FC3)
	GCC MinGW 4.2.1 (cross compile on Ubuntu 8.04.1)
	GCC MinGW 4.3.2 (cross compile on Fedora 9)
	GCC MinGW 4.3.2a (on msys 1.0.10)
	MSVC 6.0 (HBODBC: needs fresh ODBC headers from MSSDK)
TODO	MSVC 7.1 (MSVS 2003)
	MSVC 8.0 (MSVS 2005)
	MSVC 8.0 (MSVS 2005) C++
	MSVC 9.0 (MSVS 2008 SP1)
	MSVC 9.0 (MSVS 2008 SP1) C++
	MSVC 9.0 (MSVS 2008 SP1) 64 bit
	MSVC 9.0 (MSVS 2008 SP1) C++ 64 bit (cross-compile on Win32)
	PellesC 4.5 (HBSQLIT3: interface only)
	PellesC 5.0
	PellesC 5.0 64 bit (cross-compile on Win32)
	Open Watcom 1.7 (HBSQLIT3: interface only)
	Digital Mars C 4.50
- WinCE
TODO	MSVC 6.0 (eVC4)
TODO	GCC 4.0.1 (mingw32ce 0.51.0) (cross-compile on Ubuntu 8.04.1)
TODO	GCC 4.1.0 (mingw32ce 0.50.0) (cross-compile on OpenSuse 10.3, FC3)
	GCC ?.?.? (mingw32ce 0.50-1) (cross-compile on Fedora 9)
- Linux
	GCC 4.2.3 (Ubuntu 8.04.1)
	GCC 4.3.0 (Fedora 9)
TODO	GCC 4.2.1 (SuSE 10.3)
TODO	Open Watcom (with patches only. FAILED)
TODO	GCC (RedHat 7.3)
	GCC (OpenSuse 10.3)
TODO	GCC (FC3)
- OS X
	GCC 4.0.1 i386, x86_64, PPC, PPC64 (Leopard 10.5.5 Intel + XCode 3.1.1)
- Solaris
TODO	GCC 3.4.3 i86pc (SunOS 5.11 - OpenSolaris 2008.05)
- BSD
TODO	Reported OK (No details)
- HPUX
TODO	Reported OK (a week ago in /trunk)
- OS/2
	GCC 3.3.5 (EMX/Innotek)
- DOS
TODO	GCC 3.3.2 32 bit (DJGPP) (DJGPP bash port)
	GCC 4.2.3 32 bit (DJGPP) ('make install' won't properly work)
TODO	Open Watcom 1.7 (command.com)

Brgds,
Viktor

From niki at synel.co.il  Tue Sep 16 09:39:38 2008
From: niki at synel.co.il (Chen Kedem)
Date: Tue Sep 16 09:40:17 2008
Subject: [Harbour] Re: 2008-09-16 14:49 UTC+0200 Przemyslaw Czerpak
 (druzus/at/priv.onet.pl)
Message-ID: <1A07FEDC778C3E4AA417F089511F859C03268A6A1C@Mail-yoq.SYNEL-COMPANY.LTD>

> 2008-09-16 14:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/include/hbthread.h
>     + added DMC to list of compilers which can use __declspec( thread )
>     + automatically use TLS for Linux and GLIBC >= 2.6 on x86* machines

I suggest changing the following in include/hbthread.h (r9415):

On line #304 change:

#  if defined( __BORLANDC__ )
#     define HB_USE_TLS

Into:

#  if defined( __BORLANDC__ ) && !defined( __CODEGUARD__ )
#     define HB_USE_TLS

As let the user manually enable this option if he/she want to.
Apparently CodeGuard does not like __thread variables and I saw posts from 1998
asking for it to be fixed.


  Chen.
From druzus at acn.waw.pl  Tue Sep 16 09:56:04 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 16 09:56:39 2008
Subject: [Harbour] Re: 2008-09-16 14:49 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C03268A6A1C@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C03268A6A1C@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <20080916135604.GA11145@34-mo7-2.acn.waw.pl>

On Tue, 16 Sep 2008, Chen Kedem wrote:

Hi Chen,

> I suggest changing the following in include/hbthread.h (r9415):
> On line #304 change:
> #  if defined( __BORLANDC__ )
> #     define HB_USE_TLS
> Into:
> #  if defined( __BORLANDC__ ) && !defined( __CODEGUARD__ )
> #     define HB_USE_TLS
> As let the user manually enable this option if he/she want to.
> Apparently CodeGuard does not like __thread variables and I saw posts from 1998
> asking for it to be fixed.

Yes, I forgot to make it in previous commit. I'll commit it in a while.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep 16 09:58:11 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 16 09:58:46 2008
Subject: [Harbour] 2008-09-16 15:57 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080916135811.GA16591@34-mo7-2.acn.waw.pl>

2008-09-16 15:57 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbthread.h
    * do not use native TLS support in BCC builds when CodeGuard
      is enabled

best regards
Przemek
From e.m.giordano at emagsoftware.it  Tue Sep 16 10:01:08 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Sep 16 10:01:15 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200
	PrzemyslawCzerpak	(druzus/at/priv.onet.pl)
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>	<48CE57C6.2030006@dbtopas.lt>	<20080915154445.GA803@34-mo7-2.acn.waw.pl>	<48CE9A2E.9020201@dbtopas.lt><20080915184410.GA13559@34-mo7-2.acn.waw.pl><48CECBF9.1080605@dbtopas.lt>
	<B6E95936-FE68-4D81-9C74-56AD316E871D@syenar.hu>
Message-ID: <6D0C719490754EE1B299E2A579FFA60F@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: luned? 15 settembre 2008 23.52
Oggetto: Re: [Harbour] 2008-09-15 13:38 UTC+0200 PrzemyslawCzerpak 
(druzus/at/priv.onet.pl)


> Free BCC 5.82 has (an also free) TASM32 included, if that's of any help.

Are you sure that BCC 5.82 is free? Where can I read the licence?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From lorenzo.fiorini at gmail.com  Tue Sep 16 10:13:57 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Sep 16 10:14:04 2008
Subject: [Harbour] 2008-09-16 13:01 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c917eb$Blat.v2.6.2$91963124$108474ca0cc8@127.0.0.1>
References: <01c917eb$Blat.v2.6.2$91963124$108474ca0cc8@127.0.0.1>
Message-ID: <9257026e0809160713v1c5162f6o77863e9ad35fa0fc@mail.gmail.com>

On Tue, Sep 16, 2008 at 1:01 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> 2008-09-16 13:01 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>  * source/compiler/hbgenerr.c
>    * Most ':' chars removed from Harbour compiler error messages.
>      Few still remain, where I wasn't sure of the exact meaning
>      or final layout of the texts.
>      Warnings are also a TODO yet.
>      Please review.

Many thanks. The same should be done in ppcore.c.

Sorry if I insist but ":" is always meaningless in 1 line sentences.

I don't see any difference in:

"Meaningless use of expression '%s'"
and
"Meaningless use of expression: '%s'"

if not we should have it in all the messages like:

Outer codeblock variable '%s' is out of reach
should be
Outer codeblock variable: '%s' is out of reach

and so on.

best regards,
Lorenzo
From clipper5_y2d at versateladsl.be  Tue Sep 16 10:46:44 2008
From: clipper5_y2d at versateladsl.be (frank van nuffel)
Date: Tue Sep 16 10:46:57 2008
Subject: [Harbour] 2008-09-15 13:38
	UTC+0200PrzemyslawCzerpak	(druzus/at/priv.onet.pl)
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>	<48CE57C6.2030006@dbtopas.lt>	<20080915154445.GA803@34-mo7-2.acn.waw.pl>	<48CE9A2E.9020201@dbtopas.lt><20080915184410.GA13559@34-mo7-2.acn.waw.pl><48CECBF9.1080605@dbtopas.lt><B6E95936-FE68-4D81-9C74-56AD316E871D@syenar.hu>
	<6D0C719490754EE1B299E2A579FFA60F@emag>
Message-ID: <5BE75FC0C4F540C5A93DBD55DEE7C047@uwlhldv32rnqu4>

Hi Enrico,

you can download from here

http://cc.codegear.com/Free.aspx?id=24724

on the right, on top it says it is a free download, but you'll have to 
register, upon which an email will be sent with a valid license for +-32000 
days - no kidding ;-)

you'll have to gather the required files from that install, just enough for 
compiling, just like the 5.5.1 version - then you can uninstall Turbo C++ 
and keep the selection of those files for using it as a 5.8.2 version
(at least that is how i proceeded) - unless i missed sth

best regards,

frank

pardon me, Viktor, i don't want to be disrespectful intervening in this 
thread, but have gone thru that download myself just a while ago :-)

----- Original Message ----- 
From: "Enrico Maria Giordano" <e.m.giordano@emagsoftware.it>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Tuesday, September 16, 2008 4:01 PM
Subject: Re: [Harbour] 2008-09-15 13:38 UTC+0200PrzemyslawCzerpak 
(druzus/at/priv.onet.pl)


>
> -----Messaggio Originale----- 
> Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
> A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
> Data invio: luned? 15 settembre 2008 23.52
> Oggetto: Re: [Harbour] 2008-09-15 13:38 UTC+0200 PrzemyslawCzerpak 
> (druzus/at/priv.onet.pl)
>
>
>> Free BCC 5.82 has (an also free) TASM32 included, if that's of any help.
>
> Are you sure that BCC 5.82 is free? Where can I read the licence?
>
> EMG
>
> --
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 

From miguelangel at marchuet.net  Tue Sep 16 10:50:23 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Tue Sep 16 10:49:42 2008
Subject: [Harbour] Re: Question about MT
In-Reply-To: <20080916122634.GA15097@34-mo7-2.acn.waw.pl>
References: <9257026e0809151346m718f6d7die21fc1709620894@mail.gmail.com>	<9257026e0809151406l275b3c40m2e5e7d9b11d7d8a5@mail.gmail.com>	<20080915230053.GA31139@34-mo7-2.acn.waw.pl>	<48CF6745.4090900@marchuet.net>
	<20080916122634.GA15097@34-mo7-2.acn.waw.pl>
Message-ID: <48CFC7AF.8080207@marchuet.net>


> Yes common workareas are very good idea and I'll add them
> but they will not work for situations like you described above
> because access to such WA structures will have to controlled
> by mutex so it will not be possible to make on the same WA
> two different operations simultaneously. F.e. you will not
> be able to scan index to calculate ordKeyCount() in one
> thread and in the same time scan index for simple SKIP
> navigation. For such simultaneous access you need cloned
> WA structures and shared ones do not give you anything
> valuable.
> 

Exactly, this is i try to say. :) :) :) I hope

Examples of use:

	at msdn is possible to found an example using threads, one works only refreshing
         a controls of the window meanwhile another thread make a background process. 1st
         present FieldGet's at screen meanwhile 2nd works moving recno etc...	

	Meanwhile 1st thread prints invoices at background, 2nd thread prints in screen
	every second how progress the process reading OrdKeyNo().

	Meanwhile 1st process sell ticket cinema. 2nd thread automatically prints
	a ticket using one of your triggers.

> I also think it's good to add some options to control resources shared
> and cloned between threads but I have some doubts if you know what yo
> want do with WA shared WA in different threads.

I know what does it mean, but think that if you have a database in xml, ini or html file
will be possible to share it.

Another case, if we want to use a function or object to manage one wa, and we call it from
different threads, we needs that this wa will be common for all threads. Example we use tDataBase
object to manage application configuration and work sometimes as mutex too.

I know that it can fall down performance for shared wa, but will be a programmer election to make it
public or private wa


Best regards,
Miguel Angel Marchuet
From mbelgrano at deltain.it  Tue Sep 16 11:01:02 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep 16 11:01:17 2008
Subject: [Harbour] 2008-09-15 13:38
	UTC+0200PrzemyslawCzerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <6D0C719490754EE1B299E2A579FFA60F@emag>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>	<48CE57C6.2030006@dbtopas.lt>	<20080915154445.GA803@34-mo7-2.acn.waw.pl>	<48CE9A2E.9020201@dbtopas.lt><20080915184410.GA13559@34-mo7-2.acn.waw.pl><48CECBF9.1080605@dbtopas.lt><B6E95936-FE68-4D81-9C74-56AD316E871D@syenar.hu>
	<6D0C719490754EE1B299E2A579FFA60F@emag>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFA9@SRV02.deltain.net>

Is include in turbo exlorer http://turboexplorer.com/cpp 
That you can download from http://cc.codegear.com/free/turbo

Here I find information http://blog.marcocantu.com/blog/turbo_license.html
Seem that you can develop commercial applications with the Turbo Explorer editions..

But for the windows platform is not better switch on Visual C++ 2008 Express Edition?


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Enrico Maria Giordano
Sent: Tuesday, September 16, 2008 4:01 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] 2008-09-15 13:38 UTC+0200PrzemyslawCzerpak (druzus/at/priv.onet.pl)


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: luned? 15 settembre 2008 23.52
Oggetto: Re: [Harbour] 2008-09-15 13:38 UTC+0200 PrzemyslawCzerpak 
(druzus/at/priv.onet.pl)


> Free BCC 5.82 has (an also free) TASM32 included, if that's of any help.

Are you sure that BCC 5.82 is free? Where can I read the licence?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From arcadia2 at sbcglobal.net  Tue Sep 16 11:28:19 2008
From: arcadia2 at sbcglobal.net (bill robertson)
Date: Tue Sep 16 11:28:27 2008
Subject: [Harbour] 2008-09-15 13:38
	UTC+0200PrzemyslawCzerpak	(druzus/at/priv.onet.pl)
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>	<48CE57C6.2030006@dbtopas.lt>	<20080915154445.GA803@34-mo7-2.acn.waw.pl>	<48CE9A2E.9020201@dbtopas.lt><20080915184410.GA13559@34-mo7-2.acn.waw.pl><48CECBF9.1080605@dbtopas.lt><B6E95936-FE68-4D81-9C74-56AD316E871D@syenar.hu>
	<6D0C719490754EE1B299E2A579FFA60F@emag>
Message-ID: <BE12D2C1F1524AAF8EE61FF3C6DB75FD@billws>

----- Original Message ----- 
From: "Enrico Maria Giordano" <e.m.giordano@emagsoftware.it>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Tuesday, September 16, 2008 10:01 AM
Subject: Re: [Harbour] 2008-09-15 13:38 UTC+0200PrzemyslawCzerpak 
(druzus/at/priv.onet.pl)


>
> -----Messaggio Originale----- 
> Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
> A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
> Data invio: luned? 15 settembre 2008 23.52
> Oggetto: Re: [Harbour] 2008-09-15 13:38 UTC+0200 PrzemyslawCzerpak 
> (druzus/at/priv.onet.pl)
>
>
>> Free BCC 5.82 has (an also free) TASM32 included, if that's of any help.
>
> Are you sure that BCC 5.82 is free? Where can I read the licence?
>
> EMG
>
Hi Enrico,

When you install it, you have to get a license file from Borland. Borland 
has a license manager where you can view the licenses you have on your 
machine. I think they also explain this on their web site where you download 
the 300+ MB file. My license for the free version says:
Product Details

Product title --- C++Builder 2006 for Win32

Product sku --- Explorer

Serial number --- /* I stripped */

Platform --- Windows

Non-commercial use only --- No

Trial license --- false

Term type --- Fixed Date

Remaining days --- 35817

From harbour.01 at syenar.hu  Tue Sep 16 12:24:09 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 16 12:24:19 2008
Subject: [Harbour] 2008-09-16 13:01 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <9257026e0809160713v1c5162f6o77863e9ad35fa0fc@mail.gmail.com>
References: <01c917eb$Blat.v2.6.2$91963124$108474ca0cc8@127.0.0.1>
	<9257026e0809160713v1c5162f6o77863e9ad35fa0fc@mail.gmail.com>
Message-ID: <09DD3792-77BF-4E6E-876F-DB210FCBEE31@syenar.hu>

Hi Lorenzo,

Okay, I'll check ppcore.c a bit later.

Please review these changes, especially since there are
still some of the ':' chars left, where I couldn't find
out the meaning of the message, or the variables in them,
and I also didn't know how to generate such messages to
actually check it.

If you have some error samples or error code, it could
also help, there are just a few of these messages BTW.

Brgds,
Viktor

On 2008.09.16., at 16:13, Lorenzo Fiorini wrote:

> On Tue, Sep 16, 2008 at 1:01 PM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
>> 2008-09-16 13:01 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>> * source/compiler/hbgenerr.c
>>   * Most ':' chars removed from Harbour compiler error messages.
>>     Few still remain, where I wasn't sure of the exact meaning
>>     or final layout of the texts.
>>     Warnings are also a TODO yet.
>>     Please review.
>
> Many thanks. The same should be done in ppcore.c.
>
> Sorry if I insist but ":" is always meaningless in 1 line sentences.
>
> I don't see any difference in:
>
> "Meaningless use of expression '%s'"
> and
> "Meaningless use of expression: '%s'"
>
> if not we should have it in all the messages like:
>
> Outer codeblock variable '%s' is out of reach
> should be
> Outer codeblock variable: '%s' is out of reach
>
> and so on.
>
> best regards,
> Lorenzo

From harbour.01 at syenar.hu  Tue Sep 16 12:36:08 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 16 12:36:18 2008
Subject: [Harbour] 2008-09-15 13:38
	UTC+0200PrzemyslawCzerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <5BE75FC0C4F540C5A93DBD55DEE7C047@uwlhldv32rnqu4>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>	<48CE57C6.2030006@dbtopas.lt>	<20080915154445.GA803@34-mo7-2.acn.waw.pl>	<48CE9A2E.9020201@dbtopas.lt><20080915184410.GA13559@34-mo7-2.acn.waw.pl><48CECBF9.1080605@dbtopas.lt><B6E95936-FE68-4D81-9C74-56AD316E871D@syenar.hu>
	<6D0C719490754EE1B299E2A579FFA60F@emag>
	<5BE75FC0C4F540C5A93DBD55DEE7C047@uwlhldv32rnqu4>
Message-ID: <9C0EB7E6-F00C-460F-B96E-9CBAC5CA65A6@syenar.hu>

>
Hi Frank,

> http://cc.codegear.com/Free.aspx?id=24724
>
> on the right, on top it says it is a free download, but you'll have  
> to register, upon which an email will be sent with a valid license  
> for +-32000 days - no kidding ;-)
>
> you'll have to gather the required files from that install, just  
> enough for compiling, just like the 5.5.1 version - then you can  
> uninstall Turbo C++ and keep the selection of those files for using  
> it as a 5.8.2 version
> (at least that is how i proceeded) - unless i missed sth
>
> best regards,
>
> frank
>
> pardon me, Viktor, i don't want to be disrespectful intervening in  
> this thread, but have gone thru that download myself just a while  
> ago :-)

Hey, no problem at all. [ I did the same as you exactly BTW. ]

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 16 12:48:50 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 16 12:49:01 2008
Subject: [Harbour] Wich internal define are you using in harbour?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EF9D@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EF9D@SRV02.deltain.net>
Message-ID: <38D02176-C20A-452E-BC35-A161442CF147@syenar.hu>

-DHB_WIN32_IO - DEFAULT - no need to use this macro since long.
-DHB_FM_WIN32_ALLOC - OPTION - Recommended for - at least - BCC55.
-DHB_FM_STATISTICS_OFF - OPTION. And DEFAULT in final releases.
-DHB_GUI - OPTION
-DHB_NO_PROFILER - OPTION
-DHB_NO_TRACE - OPTION
-DHB_USE_TLS - You shouldn't directly fiddle with this.
-DHB_MT_VM - You shouldn't directly fiddle with this.

Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Tue Sep 16 12:52:06 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Sep 16 12:52:16 2008
Subject: [Harbour] 2008-09-15
	13:38UTC+0200PrzemyslawCzerpak	(druzus/at/priv.onet.pl)
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>	<48CE57C6.2030006@dbtopas.lt>	<20080915154445.GA803@34-mo7-2.acn.waw.pl>	<48CE9A2E.9020201@dbtopas.lt><20080915184410.GA13559@34-mo7-2.acn.waw.pl><48CECBF9.1080605@dbtopas.lt><B6E95936-FE68-4D81-9C74-56AD316E871D@syenar.hu><6D0C719490754EE1B299E2A579FFA60F@emag>
	<AFB948164110ED43B5EB849E8DEEF03815EFA9@SRV02.deltain.net>
Message-ID: <C262CACBB56F41979DDBC82B86B5BFB0@emag>


-----Messaggio Originale----- 
Da: "Massimo Belgrano" <mbelgrano@deltain.it>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 16 settembre 2008 17.01
Oggetto: RE: [Harbour] 2008-09-15 13:38UTC+0200PrzemyslawCzerpak 
(druzus/at/priv.onet.pl)


> Is include in turbo exlorer http://turboexplorer.com/cpp
> That you can download from http://cc.codegear.com/free/turbo
>
> Here I find information http://blog.marcocantu.com/blog/turbo_license.html
> Seem that you can develop commercial applications with the Turbo Explorer 
> editions..

Thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Tue Sep 16 12:50:27 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Sep 16 12:52:36 2008
Subject: [Harbour] 2008-09-15
	13:38UTC+0200PrzemyslawCzerpak	(druzus/at/priv.onet.pl)
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>	<48CE57C6.2030006@dbtopas.lt>	<20080915154445.GA803@34-mo7-2.acn.waw.pl>	<48CE9A2E.9020201@dbtopas.lt><20080915184410.GA13559@34-mo7-2.acn.waw.pl><48CECBF9.1080605@dbtopas.lt><B6E95936-FE68-4D81-9C74-56AD316E871D@syenar.hu><6D0C719490754EE1B299E2A579FFA60F@emag>
	<5BE75FC0C4F540C5A93DBD55DEE7C047@uwlhldv32rnqu4>
Message-ID: <6FDD6F10C39B4650BBCFCD2D5F29EA2D@emag>


-----Messaggio Originale----- 
Da: "frank van nuffel" <clipper5_y2d@versateladsl.be>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 16 settembre 2008 16.46
Oggetto: Re: [Harbour] 2008-09-15 13:38UTC+0200PrzemyslawCzerpak 
(druzus/at/priv.onet.pl)


> Hi Enrico,
>
> you can download from here
>
> http://cc.codegear.com/Free.aspx?id=24724
>
> on the right, on top it says it is a free download, but you'll have to 
> register, upon which an email will be sent with a valid license for 
> +-32000 days - no kidding ;-)

Thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Tue Sep 16 12:55:00 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 16 12:55:09 2008
Subject: [Harbour] 2008-09-15 13:38
	UTC+0200PrzemyslawCzerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFA9@SRV02.deltain.net>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>	<48CE57C6.2030006@dbtopas.lt>	<20080915154445.GA803@34-mo7-2.acn.waw.pl>	<48CE9A2E.9020201@dbtopas.lt><20080915184410.GA13559@34-mo7-2.acn.waw.pl><48CECBF9.1080605@dbtopas.lt><B6E95936-FE68-4D81-9C74-56AD316E871D@syenar.hu>
	<6D0C719490754EE1B299E2A579FFA60F@emag>
	<AFB948164110ED43B5EB849E8DEEF03815EFA9@SRV02.deltain.net>
Message-ID: <28021ACE-BFD0-4D2C-AA91-4984CF062992@syenar.hu>

> But for the windows platform is not better switch on Visual C++ 2008  
> Express Edition?

It is definitely better. MSVS is superior in probably
all aspects, and free even for commercial usage.

If I could do such thing, I'd recommend to make MSVS
2008 the _mainstream_ development compiler for Harbour,
to replace the aging BCC 5.5.1 with a much robust
option.

I'm now into converting my own local project to use
MSVS [until I cannot tame GCC on Windows].

Brgds,
Viktor

From mbelgrano at deltain.it  Tue Sep 16 13:03:30 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep 16 13:03:44 2008
Subject: [Harbour] Wich internal define are you using in harbour?
In-Reply-To: <38D02176-C20A-452E-BC35-A161442CF147@syenar.hu>
References: <AFB948164110ED43B5EB849E8DEEF03815EF9D@SRV02.deltain.net>
	<38D02176-C20A-452E-BC35-A161442CF147@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFAC@SRV02.deltain.net>

Thanks
 but my question was/be
Are present other internal outside of this list?

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Tuesday, September 16, 2008 6:49 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Wich internal define are you using in harbour?

-DHB_WIN32_IO - DEFAULT - no need to use this macro since long.
-DHB_FM_WIN32_ALLOC - OPTION - Recommended for - at least - BCC55.
-DHB_FM_STATISTICS_OFF - OPTION. And DEFAULT in final releases.
-DHB_GUI - OPTION
-DHB_NO_PROFILER - OPTION
-DHB_NO_TRACE - OPTION
-DHB_USE_TLS - You shouldn't directly fiddle with this.
-DHB_MT_VM - You shouldn't directly fiddle with this.

Brgds,
Viktor

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Tue Sep 16 13:07:53 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 16 13:08:29 2008
Subject: [Harbour] Re: Question about MT
In-Reply-To: <48CFC7AF.8080207@marchuet.net>
References: <9257026e0809151346m718f6d7die21fc1709620894@mail.gmail.com>
	<9257026e0809151406l275b3c40m2e5e7d9b11d7d8a5@mail.gmail.com>
	<20080915230053.GA31139@34-mo7-2.acn.waw.pl>
	<48CF6745.4090900@marchuet.net>
	<20080916122634.GA15097@34-mo7-2.acn.waw.pl>
	<48CFC7AF.8080207@marchuet.net>
Message-ID: <20080916170753.GA30173@34-mo7-2.acn.waw.pl>

On Tue, 16 Sep 2008, Miguel Angel Marchuet wrote:

Hi Miguel,

> Examples of use:
> 	at msdn is possible to found an example using threads, one works only refreshing
>         a controls of the window meanwhile another thread make a background process. 1st
>         present FieldGet's at screen meanwhile 2nd works moving recno etc...	

It's not clear for me the relation between threads.
If both threads cooperate together then it should be shared area.
But in such case it will only slow the final application because
both thread have to be synced and one can start when second finished.
If they do not make some other expensive jobs not related to WA access
then program will be slower due to synchronization and/or context
switching.
If they are making two different independent jobs then each of them
need cloned WA structure for efficient work.

> 	Meanwhile 1st thread prints invoices at background, 2nd thread prints in screen
> 	every second how progress the process reading OrdKeyNo().
> 	Meanwhile 1st process sell ticket cinema. 2nd thread automatically prints
> 	a ticket using one of your triggers.

This are independent jobs for which you need cloned workareas.
The shared one will not be enough.
We do not have native cloning support but you can simply reopen
table in second other threads to reach such effect. When we will
have cloned WA then instead of reopening you send WA from one
thread to another. The rest of code will not be changed.

> I know what does it mean, but think that if you have a database in xml, ini or html file
> will be possible to share it.

The storage format is less important here. Each one can be synced
and only the cost will be different.

> Another case, if we want to use a function or object to manage one wa, and we call it from
> different threads, we needs that this wa will be common for all threads. Example we use tDataBase
> object to manage application configuration and work sometimes as mutex too.

And current model is perfect here. Create thread which will make all
requested job from other threads on this WA. I do not want why you want
to keep this WA accessible by all other threads. It will force mutex
synchronization on the levels. 1-st for WA access because only one thread
at the same time can access thread which can be supported by Harbour
Harbour automatically to eliminate possible crashes or internal structure
corruption and 2-nd which will be used by programmer to group logical
WA operations in one atom operation which cannot be interrupted by other
threads. We may decide to not implement the 1-st one at all so user
will have to make all synchronizations manually but I do not know it's
good idea because any user mistake in synchronization can corrupt internal
RDD structures. Anyhow even without 1-st mutex synchronization access to
such WA will be linear done by one thread only and you will not be able
to benefit from speed improvement using threads on multi CPU machine.

> I know that it can fall down performance for shared wa, but will be a programmer election to make it
> public or private wa

But you have such possibilities now. All examples you are presenting
so far need only one thread access or cloned workareas. So far non of
them needs shared workareas.
End everything can be done by simple table reopening. You can still use
mutexes instead of RDD locks to synchronize the access.

best regards,
Przemek
From mbelgrano at deltain.it  Tue Sep 16 13:10:15 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep 16 13:10:27 2008
Subject: [Harbour] Wich internal define are you using in harbour?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFAC@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EF9D@SRV02.deltain.net><38D02176-C20A-452E-BC35-A161442CF147@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815EFAC@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFAD@SRV02.deltain.net>

Like 
-DADS_LIB_VERSION=700
-DHB_HASH_MSG_ITEMS
That not are present

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Massimo Belgrano
Sent: Tuesday, September 16, 2008 7:04 PM
To: Harbour Project Main Developer List.
Subject: RE: [Harbour] Wich internal define are you using in harbour?

Thanks
 but my question was/be
Are present other internal outside of this list?

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Tuesday, September 16, 2008 6:49 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Wich internal define are you using in harbour?

-DHB_WIN32_IO - DEFAULT - no need to use this macro since long.
-DHB_FM_WIN32_ALLOC - OPTION - Recommended for - at least - BCC55.
-DHB_FM_STATISTICS_OFF - OPTION. And DEFAULT in final releases.
-DHB_GUI - OPTION
-DHB_NO_PROFILER - OPTION
-DHB_NO_TRACE - OPTION
-DHB_USE_TLS - You shouldn't directly fiddle with this.
-DHB_MT_VM - You shouldn't directly fiddle with this.

Brgds,
Viktor

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Tue Sep 16 13:12:04 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 16 13:12:39 2008
Subject: [Harbour] 2008-09-16 19:11 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080916171204.GA30503@34-mo7-2.acn.waw.pl>

2008-09-16 19:11 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/utils/hbtest/rt_class.prg
    ! fixed description message

  * harbour/common.mak
  * harbour/utils/hbtest/Makefile
  * harbour/utils/hbtest/hbtest.prg
  + harbour/utils/hbtest/rt_mt.prg
    + added simple MT test for fast checking MT builds
      NOTE: DMC builds crashes with and without direct TLS access
            If possible it has to be fixed. Now MT mode is not supported
            for this compiler.

best regards
Przemek
From druzus at acn.waw.pl  Tue Sep 16 13:35:46 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 16 13:36:21 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48CECBF9.1080605@dbtopas.lt>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
	<48CE57C6.2030006@dbtopas.lt>
	<20080915154445.GA803@34-mo7-2.acn.waw.pl>
	<48CE9A2E.9020201@dbtopas.lt>
	<20080915184410.GA13559@34-mo7-2.acn.waw.pl>
	<48CECBF9.1080605@dbtopas.lt>
Message-ID: <20080916173546.GA30158@34-mo7-2.acn.waw.pl>

On Mon, 15 Sep 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

>> Maybe BCC does not inline InterLocked*() functions or
>> they are not as efficient as they can be.
> Interlocked*() functions are WinAPI functions. It cannot be inlined.

I know that they are Windows API functions but
MSDN says that each compiler should try to inline them
using its own resources. In GCC such functions are declared
as extern inline. So I understand that BCC does not make it
and simply call original ones.

> The problem is that "asm { ... }" code inside .c file requires assembler 
> compiler which is not part of BCC free command line tools. Many people will 
> be unable to build Harbour binaries.

Yes this is a problem if during C compilation you cannot check if assembler
is available. In such case the only one solution is putting the code in
binary form.

> I use some hacky tricks in my code to 
> include asm into C, but it will not work on Win64, so, not suitable for 

Such code have to be protected by CPU checking so it will not be enabled
for unsupported machines.

> Harbour. Does anyone know how to include asm code into C???

If these are only few instructions then you can use __emit__ (...),
see rtl/hbtone.c

> The whole code of InterlockedIncrement() is 5 CPU instructions. So, I guess 
> we will not save a lot.

Probably yes. We can try to check it. See below.
To be precise we do not need exact interlocked behavior. We only
need protected INC in HB_ATOM_INC and protected DEC in HB_ATOM_DEC
with EQUAL flag saving.

> It was default build using make_b32.bat, i.e. with memstat. Here are 
> results without memstat:
[...]
> total application time:                   130.69  164.55

Much better though still the difference is quite huge.
You can simply check the cost of Interlocked*() operation
be redefining them inside hbthreads.h to:

   #define HB_ATOM_INC( p )    ( ++(*(p)) )
   #define HB_ATOM_DEC( p )    ( --(*(p)) )

If it will give any noticeable speed improvement in character or
array access in the above test then we can try to use their inlined
assembler version. Other wise we can leave it as is.
Looks that the most expensive is TLS access and it reduce the
performance in BCC builds - the cost of ABI in which VM pointer
is not passed to functions :-(.
We can do three things:
   1. add some tricks to reduce TLS access like HB_THREAD_STUB in
      xHarbour in hvm.c but it makes the code a little bit ugly
      though it will probably improve the MT speed about few percent.
   2. we can change used ABI so each Harbour function which may
      need HVM access will receive pointer to HB_STACK. Quite easy
      for HB_FUNC() but for internal ones it will force much more
      jobs.
   3. we can leave it as is waiting for new hardware and OS-es where
      TLS access is usually greatly improved very often by native
      hardware support.

best regards,
Przemek

ps. Do you have assembler version of InterlockedDec() function?
From harbour.01 at syenar.hu  Tue Sep 16 13:41:35 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 16 13:41:44 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080916173546.GA30158@34-mo7-2.acn.waw.pl>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
	<48CE57C6.2030006@dbtopas.lt>
	<20080915154445.GA803@34-mo7-2.acn.waw.pl>
	<48CE9A2E.9020201@dbtopas.lt>
	<20080915184410.GA13559@34-mo7-2.acn.waw.pl>
	<48CECBF9.1080605@dbtopas.lt>
	<20080916173546.GA30158@34-mo7-2.acn.waw.pl>
Message-ID: <47545BCB-B875-4797-88A4-BB6451C689E3@syenar.hu>

>
Hi Przemek,

>   2. we can change used ABI so each Harbour function which may
>      need HVM access will receive pointer to HB_STACK. Quite easy
>      for HB_FUNC() but for internal ones it will force much more
>      jobs.

One vote for this one.

Wouldn't this increase the size of -gc3 compiled apps, due
to passing a pointer for every VM calls?

Brgds,
Viktor

From druzus at acn.waw.pl  Tue Sep 16 13:57:07 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 16 13:57:41 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <47545BCB-B875-4797-88A4-BB6451C689E3@syenar.hu>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
	<48CE57C6.2030006@dbtopas.lt>
	<20080915154445.GA803@34-mo7-2.acn.waw.pl>
	<48CE9A2E.9020201@dbtopas.lt>
	<20080915184410.GA13559@34-mo7-2.acn.waw.pl>
	<48CECBF9.1080605@dbtopas.lt>
	<20080916173546.GA30158@34-mo7-2.acn.waw.pl>
	<47545BCB-B875-4797-88A4-BB6451C689E3@syenar.hu>
Message-ID: <20080916175707.GA22474@34-mo7-2.acn.waw.pl>

On Tue, 16 Sep 2008, Szakáts Viktor wrote:

Hi Viktor,

>>   2. we can change used ABI so each Harbour function which may
>>      need HVM access will receive pointer to HB_STACK. Quite easy
>>      for HB_FUNC() but for internal ones it will force much more
>>      jobs.
> One vote for this one.
> Wouldn't this increase the size of -gc3 compiled apps, due
> to passing a pointer for every VM calls?

Yes it will. But it will and it will have some speed overhead
for single thread programs but much smaller then accessing TLS
which on some platforms where there is no native TLS support
is very huge.
But it will also mean that we will drop binary compatibility
with all existing tools.
I like this idea but I do not want to start such modification
as long as we will not know how current code works on different
platforms and what other problems we may found which will be good
to resolve together. BTW does anyone tried to use threads with
DMC? I create DMC builds in my Linux box with and without HB_USE_TLS
but in both cases hbtest crashes on MT test code I added.

best regards,
Przemek
From jose.luis at iaicom.com  Tue Sep 16 14:53:41 2008
From: jose.luis at iaicom.com (=?iso-8859-1?Q?Jos=E9_Luis_Capel_?=)
Date: Tue Sep 16 14:50:31 2008
Subject: [Harbour] Wince - Evc4 and GPF
In-Reply-To: <CD6E03CD37504ADA95AFD6B672053FFB@pepeluis>
References: <96F07428-58D5-410E-A266-EFCC6877B606@syenar.hu><9257026e0809141233p6df94545k3e57ba71af3f489d@mail.gmail.com><E15DEC9961BC47F3B5189FD357545580@pepeluis><20080914200309.GD26269@34-mo7-2.acn.waw.pl>
	<CD6E03CD37504ADA95AFD6B672053FFB@pepeluis>
Message-ID: <004801c9182d$89fd8ce0$bb001aac@AGSoft.local>

Hi all,

I really appreciate some solution or ideas to control the GPFs on the Pocket
PC. 

Without the GPFs control working, Harbour on Pocket PC should be unusable
:-(

I am sorry for strissing you up with this matter... but I am not a C expert
and I am lost.

Nobody here is using Harbour on the Pocket PC?


Many thanks for your help.
Regards,
Jos? Luis Capel


JLC>-----Mensaje original-----
JLC>De: harbour-bounces@harbour-project.org 
JLC>[mailto:harbour-bounces@harbour-project.org] En nombre de 
JLC>Jos? Luis Capel -
JLC>Enviado el: lunes, 15 de septiembre de 2008 21:59
JLC>Para: Harbour Project Main Developer List.
JLC>Asunto: Re: [Harbour] Wince - Evc4 and GPF
JLC>
JLC>Hi Przemek,
JLC>
JLC>>
JLC>> Look that there is no memory protection in WinCE or at 
JLC>least above two 
JLC>> addresses are not protected. It's hardware/OS dependant behavior.
JLC>>
JLC>>> Maybe is needed some extra code to handle gpf's ?
JLC>>
JLC>> probably yes. You can try to generate FPE using division by 0.
JLC>> Of course if CPU generates exception for such situation 
JLC>and there is 
JLC>> no default OS handle for it.
JLC>>
JLC>
JLC>I tried what you told me and the results are same in Evc4: 
JLC>nothing happens
JLC>(apparently) and program continues execution.
JLC>
JLC>In order to trap this exception I made some changes in 
JLC>hbwmain.c.  These changes are:
JLC>
JLC>...
JLC>...
JLC>#if defined( HB_WINCE )
JLC>   HB_TCHAR_FREE( pFree );
JLC>#endif
JLC>
JLC>#if defined( HB_VM_STARTUP )
JLC>   hb_winmainArgInit( hInstance, hPrevInstance, iCmdShow );
JLC>   hb_cmdargInit( s_argc, s_argv );
JLC>
JLC>//-- change
JLC>#if defined( HB_WINCE )
JLC>__try {
JLC>#endif
JLC>// -- change
JLC>
JLC>   hb_vmInit( TRUE );
JLC>   iErrorCode = hb_vmQuit();
JLC>
JLC>// -- change
JLC>#if defined( HB_WINCE )
JLC>    } __except(EXCEPTION_EXECUTE_HANDLER)
JLC>    {
JLC>    MessageBox(NULL,TEXT("Some GPF caugth!!"),TEXT("Test"), MB_OK);
JLC>    }
JLC>#endif
JLC>// -- change
JLC>...
JLC>...
JLC>
JLC>
JLC>What I wanted to do is to envolve all Vm execution within a 
JLC>__try/__except() compiler functions.
JLC>
JLC>I have had same results as it wasn't there.  I mean... 
JLC>nothing hanppened. 
JLC>So I gess that maybe some other __try/__except is catching 
JLC>the exception.... 
JLC>or not.  I searched all the sources and I could not find 
JLC>any other __try/__except.
JLC>
JLC>So... at this point I am a little bit lost of how to solve 
JLC>that.  Any help or clue are wellcome.
JLC>
JLC>Many thanks for your help.
JLC>Regards,
JLC>Jos? lUis Capel
JLC>
JLC>
JLC>
JLC>_______________________________________________
JLC>Harbour mailing list
JLC>Harbour@harbour-project.org
JLC>http://lists.harbour-project.org/mailman/listinfo/harbour

From dbtopas at dbtopas.lt  Tue Sep 16 14:54:18 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Sep 16 14:55:30 2008
Subject: [Harbour] MM
Message-ID: <48D000DA.5040109@dbtopas.lt>

Hi,


I've tested a few memory managers (MM) with tests\memtst.prg. All test 
is using BCC55 compiler, singe thread application, FM statistics 
switched off, 2.2GHz Celeron, 256MB RAM.

Three MM were tested: BCC55, Win32 Local*(), DL MM (see: 
http://gee.cs.oswego.edu/dl/html/malloc.html).

The results are:
                                        BCC     WIN     DL
single large memory blocks:            1.27    1.80    2.56
many large memory blocks:             13.11   12.97   12.69
large memory block reallocation:       2.47    3.30    0.33


Best regards,
Mindaugas

P.S. BCC with its MM does not crash on memtst.prg!
From druzus at acn.waw.pl  Tue Sep 16 14:59:35 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 16 15:00:10 2008
Subject: [Harbour] Wince - Evc4 and GPF
In-Reply-To: <004801c9182d$89fd8ce0$bb001aac@AGSoft.local>
References: <CD6E03CD37504ADA95AFD6B672053FFB@pepeluis>
	<004801c9182d$89fd8ce0$bb001aac@AGSoft.local>
Message-ID: <20080916185935.GA19252@34-mo7-2.acn.waw.pl>

On Tue, 16 Sep 2008, Jos? Luis Capel  wrote:

Hi Jose,

> I really appreciate some solution or ideas to control the GPFs on the Pocket
> PC. 
> Without the GPFs control working, Harbour on Pocket PC should be unusable
> :-(

I do not understand why you want to generate an exception and
how is it related to Harbour.
What do you want to do and why?

> I am sorry for strissing you up with this matter... but I am not a C expert
> and I am lost.

If there is no hardware support then you will not make it in such
way. You can only try to generate it explicitly by _throw_ if used
C compilers supports it.

> Nobody here is using Harbour on the Pocket PC?

I do not know and I do not know why simulating bugs in
low level code can help in using Harbour on any platform.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep 16 15:13:49 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 16 15:14:23 2008
Subject: [Harbour] MM
In-Reply-To: <48D000DA.5040109@dbtopas.lt>
References: <48D000DA.5040109@dbtopas.lt>
Message-ID: <20080916191349.GA23674@34-mo7-2.acn.waw.pl>

On Tue, 16 Sep 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> I've tested a few memory managers (MM) with tests\memtst.prg. All test is 
> using BCC55 compiler, singe thread application, FM statistics switched off, 
> 2.2GHz Celeron, 256MB RAM.
> Three MM were tested: BCC55, Win32 Local*(), DL MM (see: 
> http://gee.cs.oswego.edu/dl/html/malloc.html).
> The results are:
>                                        BCC     WIN     DL
> single large memory blocks:            1.27    1.80    2.56
> many large memory blocks:             13.11   12.97   12.69
> large memory block reallocation:       2.47    3.30    0.33

Very interesting. BTW this are my results for Linux with GLIBC 2.8
on Phenom 2.1Ghz:
   single large memory blocks:            0.55
   many large memory blocks:              3.07
   large memory block reallocation:       0.07

> P.S. BCC with its MM does not crash on memtst.prg!

Probably earlier memory allocation in two previous tests
changed the internal memory strategy or simply created in
memory manager enough number of memory 'wholes' that that
were used for intermediate allocations so the realloc was
always working on the same memory area only enlarging it
(no new memory was mapped after main array block).

best regards,
Przemek
From jose.luis at iaicom.com  Tue Sep 16 15:18:02 2008
From: jose.luis at iaicom.com (=?iso-8859-1?Q?Jos=E9_Luis_Capel_?=)
Date: Tue Sep 16 15:14:50 2008
Subject: [Harbour] Wince - Evc4 and GPF
In-Reply-To: <20080916185935.GA19252@34-mo7-2.acn.waw.pl>
References: <CD6E03CD37504ADA95AFD6B672053FFB@pepeluis><004801c9182d$89fd8ce0$bb001aac@AGSoft.local>
	<20080916185935.GA19252@34-mo7-2.acn.waw.pl>
Message-ID: <004901c91830$f06f90b0$bb001aac@AGSoft.local>

Hi Przemek,
 
JLC>
JLC>> I really appreciate some solution or ideas to control the 
JLC>GPFs on the 
JLC>> Pocket PC.
JLC>> Without the GPFs control working, Harbour on Pocket PC should be 
JLC>> unusable :-(
JLC>
JLC>I do not understand why you want to generate an exception 
JLC>and how is it related to Harbour.

Maybe I didn't explain me clearly.  I don't want to generate an exeception
but catch it.

JLC>What do you want to do and why?
JLC>

What I want to do is to catch exceptions in any way... because executing a
programa under Wince that generates a GPF doesn't terminate program.

JLC>
JLC>If there is no hardware support then you will not make it 
JLC>in such way. You can only try to generate it explicitly by 
JLC>_throw_ if used C compilers supports it.
JLC>

How ?  An example can help me a lot.

Many thanks for your help.
Regards,
Jos? Luis Capel



From e.m.giordano at emagsoftware.it  Tue Sep 16 15:39:23 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Sep 16 15:39:30 2008
Subject: [Harbour] 2008-09-15
	13:38UTC+0200PrzemyslawCzerpak	(druzus/at/priv.onet.pl)
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>	<48CE57C6.2030006@dbtopas.lt>	<20080915154445.GA803@34-mo7-2.acn.waw.pl>	<48CE9A2E.9020201@dbtopas.lt><20080915184410.GA13559@34-mo7-2.acn.waw.pl><48CECBF9.1080605@dbtopas.lt><B6E95936-FE68-4D81-9C74-56AD316E871D@syenar.hu><6D0C719490754EE1B299E2A579FFA60F@emag>
	<BE12D2C1F1524AAF8EE61FF3C6DB75FD@billws>
Message-ID: <B6AC617CC5DF423F99A22304607E521D@emag>


-----Messaggio Originale----- 
Da: "bill robertson" <arcadia2@sbcglobal.net>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 16 settembre 2008 17.28
Oggetto: Re: [Harbour] 2008-09-15 13:38UTC+0200PrzemyslawCzerpak 
(druzus/at/priv.onet.pl)


> Hi Enrico,
>
> When you install it, you have to get a license file from Borland. Borland 
> has a license manager where you can view the licenses you have on your 
> machine. I think they also explain this on their web site where you 
> download the 300+ MB file. My license for the free version says:

Thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at acn.waw.pl  Tue Sep 16 16:00:20 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 16 16:00:54 2008
Subject: [Harbour] Wince - Evc4 and GPF
In-Reply-To: <004901c91830$f06f90b0$bb001aac@AGSoft.local>
References: <20080916185935.GA19252@34-mo7-2.acn.waw.pl>
	<004901c91830$f06f90b0$bb001aac@AGSoft.local>
Message-ID: <20080916200020.GA10466@34-mo7-2.acn.waw.pl>

On Tue, 16 Sep 2008, Jos? Luis Capel  wrote:

Hi Jose,

> JLC>What do you want to do and why?
> JLC>
> What I want to do is to catch exceptions in any way... because executing a
> programa under Wince that generates a GPF doesn't terminate program.

It can be hardware/OS dependent so on one machine it may terminate
program but on some other other not. There is many different WinCE
versions, ARM processors and other devices used in mobile devices.
Anyhow Harbour core code should not GPF. If it does then it should
be fixed. What problem have you found?

BTW if it really GPFs (Genral Protection Fault) and it's not other
error then your device has memory protection. In you previous posts
you tried to assign 0x00000000 and 0xFFFFFFFF - maybe these addresses
belongs to process. In such case try different.
And how you detected that they not generate exception? Maybe in
your device producer uses some exception handler which simply
causes that exceptions are ignored. Quite often practice to hide
bugs in pure quality software. Maybe it's possible to change default
exception handler to your own which will call hb_errInternal() or
simply: exit( EXIT_FAILURE );. In source/vm/extrap.c
SetUnhandledExceptionFilter() is disabled for WinCE builds because
it was missing in some testing WinCE environments but maybe the
one you are using supports it. If yes then please send us information
about exact environment so we can enable it for such builds.
You can also try to cange the return value in exception filter from
EXCEPTION_CONTINUE_SEARCH to EXCEPTION_EXECUTE_HANDLER.
Maybe it's possible in your environment to overload default exception
handler by adding your own UnhandledExceptionFilter() function to the
application code. You can try.
Anyhow valid Harbour application should not generate exceptions so
all of the above is for some rather abnormal situations.

> JLC>If there is no hardware support then you will not make it 
> JLC>in such way. You can only try to generate it explicitly by 
> JLC>_throw_ if used C compilers supports it.
> How ?  An example can help me a lot.

check in google: try catch throw
and the 1-st link will point to MSDN documentation.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Tue Sep 16 16:15:23 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Sep 16 16:15:31 2008
Subject: [Harbour] MM
In-Reply-To: <20080916191349.GA23674@34-mo7-2.acn.waw.pl>
References: <48D000DA.5040109@dbtopas.lt>
	<20080916191349.GA23674@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809161315s11f9af9arbd6b52553eb8c8d4@mail.gmail.com>

On Tue, Sep 16, 2008 at 9:13 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> Very interesting. BTW this are my results for Linux with GLIBC 2.8
> on Phenom 2.1Ghz:
>   single large memory blocks:            0.55
>   many large memory blocks:              3.07
>   large memory block reallocation:       0.07

Here is what I get on a Intel(R) Core(TM)2 Duo CPU     E6750  @ 2.66GHz

Warning !!! Memory statistic enabled.

09/16/08 21:52:41 Harbour 1.1.0dev (Rev. 9415) (FMSTAT), Linux 2.6.26.3-29.fc9.i
686 i686

testing single large memory blocks allocation and freeing...
 CPU time:          0.39 sec.
real time:          0.39 sec.

testing many large memory blocks allocation and freeing...
 CPU time:          1.98 sec.
real time:          2.01 sec.

testing large memory block reallocation with intermediate allocations...
 CPU time:          0.06 sec.
real time:          0.06 sec.

BTW as you can see I still have the fm enabled by default.

I used hbmk -n -static memtst.prg. If I use hbmk - -static -nofmstat I get:

/tmp/cc4LyIIb.o: In function `_hb_lnk_ForceLink_build':
hb-build-xyz-7440.c:(.text+0xc): undefined reference to `HB_FUN_HB_FM_NOSTAT

Any idea where I should look?

best regards,
Lorenzo
From dbtopas at dbtopas.lt  Tue Sep 16 16:20:57 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Sep 16 16:22:21 2008
Subject: [Harbour] MM
In-Reply-To: <20080916191349.GA23674@34-mo7-2.acn.waw.pl>
References: <48D000DA.5040109@dbtopas.lt>
	<20080916191349.GA23674@34-mo7-2.acn.waw.pl>
Message-ID: <48D01529.9050703@dbtopas.lt>

>> I've tested a few memory managers (MM) with tests\memtst.prg. All test is 
>> using BCC55 compiler, singe thread application, FM statistics switched off, 
>> 2.2GHz Celeron, 256MB RAM.
>> Three MM were tested: BCC55, Win32 Local*(), DL MM (see: 
>> http://gee.cs.oswego.edu/dl/html/malloc.html).
>> The results are:
>>                                        BCC     WIN     DL
>> single large memory blocks:            1.27    1.80    2.56
>> many large memory blocks:             13.11   12.97   12.69
>> large memory block reallocation:       2.47    3.30    0.33
> Very interesting. BTW this are my results for Linux with GLIBC 2.8
> on Phenom 2.1Ghz:
>    single large memory blocks:            0.55
>    many large memory blocks:              3.07
>    large memory block reallocation:       0.07
> 

>> P.S. BCC with its MM does not crash on memtst.prg!
> 
> Probably earlier memory allocation in two previous tests
> changed the internal memory strategy or simply created in
> memory manager enough number of memory 'wholes' that that
> were used for intermediate allocations so the realloc was
> always working on the same memory area only enlarging it
> (no new memory was mapped after main array block).

Yes, I also think crash disappeared because of two previous test which
creates some different layout inside MM heap.

One more think I've understood after some more tests is that MM testing
could not be done in single test. Different test (or the same test in a 
different memory situation can give very different results). I'll write 
down a few more words about it.

I've run TaskManager to see how much memory each MM uses. I found out
that huge amount of memory is allocated by WIN MM before program exits
(on last "Press any key..." message). The exact numbers are:

                                        BCC     WIN     DL
VM size before process exit (KB):      7396   72956    6702

Yes, 73MB of 256MB are occupied! The huge memory allocation is done
during the last "large memory block reallocation" test. I decided that
WIN MM is clever enough and lets a single application to allocate a huge
amount of memory, since no other applications are running (only services
and some background "startup" applications).
So, I decided to repeat the test in "high memory usage" situation. I've 
run a few applications (Firefox that occupies 80MB of VM, GIMP 79MB and 
Thunderbird 59MB) and repeated all test. The results was:
                                        BCC     WIN     DL
single large memory blocks:            1.69    2.03    1.50
many large memory blocks:             15.09   15.17   14.13
large memory block reallocation:       2.86    3.91    0.36
VM size before process exit (KB):      8192  100024    6696

WIN MM allocates this huge mount of memory during "large memory block
reallocation" test. I was a little surprised that DL started to work 
faster in "high memory usage" situation (1.5 seconds instead of 2.56). 
The next surprising thing is that WIN MM allocates even more memory 
100MB instead of 73MB. I've repeated last tests a few times, the results 
are the same.


Best regards,
Mindaugas

From druzus at acn.waw.pl  Tue Sep 16 16:58:20 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 16 16:58:55 2008
Subject: [Harbour] MM
In-Reply-To: <9257026e0809161315s11f9af9arbd6b52553eb8c8d4@mail.gmail.com>
References: <48D000DA.5040109@dbtopas.lt>
	<20080916191349.GA23674@34-mo7-2.acn.waw.pl>
	<9257026e0809161315s11f9af9arbd6b52553eb8c8d4@mail.gmail.com>
Message-ID: <20080916205820.GA18655@34-mo7-2.acn.waw.pl>

On Tue, 16 Sep 2008, Lorenzo Fiorini wrote:
> BTW as you can see I still have the fm enabled by default.
> I used hbmk -n -static memtst.prg. If I use hbmk - -static -nofmstat I get:
> /tmp/cc4LyIIb.o: In function `_hb_lnk_ForceLink_build':
> hb-build-xyz-7440.c:(.text+0xc): undefined reference to `HB_FUN_HB_FM_NOSTAT
> Any idea where I should look?

By default Harbour is created with memory statistic enabled.
It was only disabled recently in 1.0.1 so new binaries will
be faster.
If you want to create Harbour devel binaries without FM
stat then you have to recompile Harbour with HB_FM_STATISTICS_OFF
macro.

I'll change hb* scripts so it will try automatically detect
if this macro is used in C_USR.

best regards,
Przemek
From miguelangel at marchuet.net  Tue Sep 16 17:02:36 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Tue Sep 16 17:04:09 2008
Subject: [Harbour] Re: Question about MT
In-Reply-To: <20080916170753.GA30173@34-mo7-2.acn.waw.pl>
References: <9257026e0809151346m718f6d7die21fc1709620894@mail.gmail.com>	<9257026e0809151406l275b3c40m2e5e7d9b11d7d8a5@mail.gmail.com>	<20080915230053.GA31139@34-mo7-2.acn.waw.pl>	<48CF6745.4090900@marchuet.net>	<20080916122634.GA15097@34-mo7-2.acn.waw.pl>	<48CFC7AF.8080207@marchuet.net>
	<20080916170753.GA30173@34-mo7-2.acn.waw.pl>
Message-ID: <48D01EEC.9050307@marchuet.net>

Do not worry, I pay. my English is insufficient to explain what we see 
clear and necessary.

As I understand cloned wa don't share recno and filters synchronized 
between areas and this
is important do make some works without reopen new wa handle.

Of course always there are another way to do the same. But remember that 
sometimes performance
is less important.

Cloned wa would be enoughs for LetoDB.

But, why we need to open thousand's of instances of a wa if i only need 
one. When the access
to tables are not important, why penalize memory ?

but

Do not worry, I pay. my English is insufficient to explain what we see 
clear and necessary.

thanks for your work ;)

Best regards,
Miguel Angel Marchuet
From dbtopas at dbtopas.lt  Tue Sep 16 17:22:43 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Sep 16 17:24:17 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080916173546.GA30158@34-mo7-2.acn.waw.pl>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>	<48CE57C6.2030006@dbtopas.lt>	<20080915154445.GA803@34-mo7-2.acn.waw.pl>	<48CE9A2E.9020201@dbtopas.lt>	<20080915184410.GA13559@34-mo7-2.acn.waw.pl>	<48CECBF9.1080605@dbtopas.lt>
	<20080916173546.GA30158@34-mo7-2.acn.waw.pl>
Message-ID: <48D023A3.4000005@dbtopas.lt>

Hi,


Przemyslaw Czerpak wrote:
>>> Maybe BCC does not inline InterLocked*() functions or
>>> they are not as efficient as they can be.
>> Interlocked*() functions are WinAPI functions. It cannot be inlined.
> 
> I know that they are Windows API functions but
> MSDN says that each compiler should try to inline them
> using its own resources.

I've reverse engineered .obj files produced by BCC. It does not inline 
Interlocked*() functions, but uses Win32 API calls.


>> Harbour. Does anyone know how to include asm code into C???
> 
> If these are only few instructions then you can use __emit__ (...),
> see rtl/hbtone.c

I'll take a look.


>> It was default build using make_b32.bat, i.e. with memstat. Here are 
>> results without memstat:
> [...]
>> total application time:                   130.69  164.55
> 
> Much better though still the difference is quite huge.
> You can simply check the cost of Interlocked*() operation
> be redefining them inside hbthreads.h to:
> 
>    #define HB_ATOM_INC( p )    ( ++(*(p)) )
>    #define HB_ATOM_DEC( p )    ( --(*(p)) )

Here are new results:

ARR_LEN =         16                     ST      MT      MT
N_LOOPS =    1000000                                   (++(*(p)))
empty loops overhead =                   0.16    0.30    0.34
CPU usage -> secondsCPU()

c:=L_C ->                                0.22    0.38    0.33
n:=L_N ->                                0.22    0.25    0.31
d:=L_D ->                                0.19    0.25    0.31
c:=M_C ->                                0.25    0.41    0.31
n:=M_N ->                                0.22    0.28    0.30
d:=M_D ->                                0.23    0.25    0.30
(sh) c:=F_C ->                           0.36    0.88    0.78
(sh) n:=F_N ->                           0.58    0.66    0.63
(sh) d:=F_D ->                           0.30    0.36    0.34
(ex) c:=F_C ->                           0.38    0.88    0.80
(ex) n:=F_N ->                           0.56    0.66    0.63
(ex) d:=F_D ->                           0.28    0.36    0.33
n:=o:GenCode ->                          0.50    0.78    0.75
n:=o[8] ->                               0.45    0.61    0.56
round(i/1000,2) ->                       0.73    0.94    1.00
str(i/1000) ->                           1.50    2.59    2.53
val(a3[i%ARR_LEN+1]) ->                  1.34    1.81    1.70
dtos(j+i%10000-5000) ->                  1.42    2.13    2.13
eval({||i%ARR_LEN}) ->                   0.67    1.03    1.09
eval({|x|x%ARR_LEN},i) ->                0.75    1.23    1.25
eval({|x|f1(x)},i) ->                    1.17    1.83    1.83
&('f1('+str(i)+')') ->                   7.22   13.39   12.38
eval([&('{|x|f1(x)}')]) ->               1.17    1.83    1.84
j := valtype(a)+valtype(i) ->            1.09    2.06    1.97
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->   2.31    3.70    3.48
j := val(a2[i%ARR_LEN+1]) ->             1.53    2.14    1.98
j := a2[i%ARR_LEN+1] == s ->             1.09    1.69    1.39
j := a2[i%ARR_LEN+1] = s ->              1.16    1.70    1.45
j := a2[i%ARR_LEN+1] >= s ->             1.19    1.69    1.44
j := a2[i%ARR_LEN+1] < s ->              1.13    1.69    1.47
aadd(aa,{i,j,s,a,a2,t,bc}) ->            4.89    7.31    6.31
f0() ->                                  0.34    0.55    0.56
f1(i) ->                                 0.59    0.91    0.97
f2(c[8]) ->                              0.47    0.78    0.75
f2(c[40000]) ->                          0.45    0.75    0.75
f2(@c[40000]) ->                         0.38    0.61    0.66
f2(c[40000]); c2:=c ->                   0.70    1.16    1.05
f2(@c[40000]); c2:=c ->                  0.59    1.05    1.00
f3(a,a2,c,i,j,t,bc) ->                   1.20    2.05    1.77
f2(a2) ->                                0.48    0.80    0.73
s:=f4() ->                               1.69    2.41    2.39
s:=f5() ->                               0.75    1.45    1.42
ascan(a,i%ARR_LEN) ->                    0.78    1.17    1.14
ascan(a2,c+chr(i%64+64)) ->              2.64    3.91    3.66
ascan(a,{|x|x==i%ARR_LEN}) ->            7.81   14.44   13.52
===============================================================
total application time:                 61.33  101.38   98.66
total real time:                        62.16  102.20   99.49

Interlocked*() does not consumes a lot of time. MT-ST time difference is 
the same as in previous tests ~40seconds, but after droping significance 
of f4() call, ration of MT/ST became even larger ~= 1.6.


> Looks that the most expensive is TLS access and it reduce the
> performance in BCC builds - the cost of ABI in which VM pointer
> is not passed to functions :-(.
> We can do three things:
>    1. add some tricks to reduce TLS access like HB_THREAD_STUB in
>       xHarbour in hvm.c but it makes the code a little bit ugly
>       though it will probably improve the MT speed about few percent.
>    2. we can change used ABI so each Harbour function which may
>       need HVM access will receive pointer to HB_STACK. Quite easy
>       for HB_FUNC() but for internal ones it will force much more
>       jobs.
>    3. we can leave it as is waiting for new hardware and OS-es where
>       TLS access is usually greatly improved very often by native
>       hardware support.

I know very few about TLS. How TLS functions and __thread keyword are 
implemented in other compilers and OSes based on the same x86 hardware? 
Why MT/ST speed ration is not so big on Linux? Can we implement our own 
TLS based on GCC/GLIBC idea?


> ps. Do you have assembler version of InterlockedDec() function?

If you mean using xadd instruction, it's almost the same as increment. 
Increment is:
     mov         eax,1
     lock xadd   [esp],eax
     inc         eax
     ret
Decrement is:
     mov         eax,-1
     lock xadd   [esp],eax
     dec         eax
     ret


Best regards,
Mindaugas
From dmacias at mail.udg.mx  Tue Sep 16 18:36:53 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Sep 16 18:36:58 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48D03505.3090409@mail.udg.mx>

Przemek:

 >Thank you very much.
 >Can you try again with current SVN?

Below are results of current Harbour under eComStation 1.2MR
gcc 3.3.5

warnings in thread.c

hbvmmt.a is created

16/09/08  5:04p       337,554    124 a---  hbvm.a
16/09/08  5:06p       338,296    124 a---  hbvmmt.a

David Macias


../../gtstd.c: In function `hb_gt_std_ReadKey':
../../gtstd.c:389: warning: unused variable `TODO'
../../../thread.c: In function `hb_threadCreate':
../../../thread.c:353: warning: comparison of unsigned expression < 0 is 
always false
../../../thread.c: In function `hb_threadJoin':
../../../thread.c:378: warning: passing arg 1 of `DosWaitThread' makes 
pointer from integer without a cast
../../../thread.c: In function `hb_threadDetach':
../../../thread.c:402: warning: passing arg 1 of `DosWaitThread' makes 
pointer from integer without a cast


From dmacias at mail.udg.mx  Tue Sep 16 18:48:56 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Sep 16 18:49:04 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48D037D8.8050504@mail.udg.mx>

Przemek:

This are st or mt ?
[E:\harbour809mt\harbour\tests]..\bin\hbrun.exe speedtst.prg

Below are results

David Macias


AMD Athlon 2200+ 2.0GHz, 1 Gb RAM, gcc 3.3.5

Warning !!! Memory statistic enabled.

Startup loop to increase CPU clock...

09/16/08 17:42:23 Harbour 1.1.0dev (Rev. 9418) (FMSTAT), OS/2 4.50
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.14
CPU usage -> secondsCPU()

c:=L_C ->                                             0.10
n:=L_N ->                                             0.09
d:=L_D ->                                             0.09
c:=M_C ->                                             0.11
n:=M_N ->                                             0.10
d:=M_D ->                                             0.10
(sh) c:=F_C ->                                        0.71
(sh) n:=F_N ->                                        0.37
(sh) d:=F_D ->                                        0.21
(ex) c:=F_C ->                                        0.70
(ex) n:=F_N ->                                        0.37
(ex) d:=F_D ->                                        0.22
n:=o:GenCode ->                                       0.32
n:=o[8] ->                                            0.21
round(i/1000,2) ->                                    0.45
str(i/1000) ->                                        1.52
val(a3[i%ARR_LEN+1]) ->                               0.88
dtos(j+i%10000-5000) ->                               1.20
eval({||i%ARR_LEN}) ->                                0.44
eval({|x|x%ARR_LEN},i) ->                             0.48
eval({|x|f1(x)},i) ->                                 0.69
&('f1('+str(i)+')') ->                               10.11
eval([&('{|x|f1(x)}')]) ->                            0.79
j := valtype(a)+valtype(i) ->                         1.21
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                2.19
j := val(a2[i%ARR_LEN+1]) ->                          0.89
j := a2[i%ARR_LEN+1] == s ->                          0.61
j := a2[i%ARR_LEN+1] = s ->                           0.69
j := a2[i%ARR_LEN+1] >= s ->                          0.65
j := a2[i%ARR_LEN+1] < s ->                           0.65
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         3.76
f0() ->                                               0.28
f1(i) ->                                              0.39
f2(c[8]) ->                                           0.31
f2(c[40000]) ->                                       0.31
f2(@c[40000]) ->                                      0.30
f2(c[40000]); c2:=c ->                                0.42
f2(@c[40000]); c2:=c ->                               0.42
f3(a,a2,c,i,j,t,bc) ->                                0.75
f2(a2) ->                                             0.33
s:=f4() ->                                            1.44
s:=f5() ->                                            0.95
ascan(a,i%ARR_LEN) ->                                 0.60
ascan(a2,c+chr(i%64+64)) ->                           2.80
ascan(a,{|x|x==i%ARR_LEN}) ->                         6.61
============================================================
total application time:                              53.30
total real time:                                     53.30

From dbtopas at dbtopas.lt  Tue Sep 16 18:49:02 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Sep 16 18:50:49 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080916173546.GA30158@34-mo7-2.acn.waw.pl>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>	<48CE57C6.2030006@dbtopas.lt>	<20080915154445.GA803@34-mo7-2.acn.waw.pl>	<48CE9A2E.9020201@dbtopas.lt>	<20080915184410.GA13559@34-mo7-2.acn.waw.pl>	<48CECBF9.1080605@dbtopas.lt>
	<20080916173546.GA30158@34-mo7-2.acn.waw.pl>
Message-ID: <48D037DE.8010300@dbtopas.lt>

Hi again,


> Looks that the most expensive is TLS access and it reduce the
> performance in BCC builds - the cost of ABI in which VM pointer
> is not passed to functions :-(.
> We can do three things:
>    1. add some tricks to reduce TLS access like HB_THREAD_STUB in
>       xHarbour in hvm.c but it makes the code a little bit ugly
>       though it will probably improve the MT speed about few percent.
>    2. we can change used ABI so each Harbour function which may
>       need HVM access will receive pointer to HB_STACK. Quite easy
>       for HB_FUNC() but for internal ones it will force much more
>       jobs.
>    3. we can leave it as is waiting for new hardware and OS-es where
>       TLS access is usually greatly improved very often by native
>       hardware support.


I've spent some time (well not much, an hour...) to find out how tls 
works on Windows.
The original idea is based on undocumented (but de facto) fs segment. In 
Win32 both 9x and NT fs segment register points to Win32 Thread 
information block (TIB). Structure is defined at 
http://en.wikipedia.org/wiki/Win32_Thread_Information_Block

TIB could be used to access some thread specific data (including TLS 
values) as an alternative to Win32 API calls. For example a single asm 
instruction
    mov eax,fs:[24h]
could be used instead of GetCurrentThreadID Win32 API call.

To enable TIB extensions (or by other reasons) TIB should be not 
accessed directly from fs segment, but address of TIB is obtained from 
using fs:[18h], and this addresss is used to access TIB using common 
data segment register ds. So, GetCurentThreadID in asm could be implemented:
    mov eax,fs:[18h]
    mov eax,[eax+24h]
    ret
Actually it is exact code for GetCurentThreadID from kernel32.dll.

BCC's TLS is implented:
   int __thread  a;
would be comiled to:
   call ___GetTls
   mov  eax,[eax+some_offset]

The function __GetTls itself is:
   mov  eax,[tls_index]
   mov  edx,fs:[2Ch]
   mov  eax,[edx+eax*4]
   ret

Win32 API's TlsGetValue() is a little less optimal. It creates stack 
frame (push bp, etc.), checks for tls_index value to not exceed maximul 
allowed value, and clears last error value. This adds 7 more CPU 
instructions. These few additional instructions should not cause a big 
overhead, but my test shows a big speed difference. speedtst.prg shows 
100 seconds with HB_USE_TLS and 170 seconds without HB_USE_TLS 
(commented out HB_USE_TLS inside hbthread.h). The reason of such big 
overhead is not clear enough for me. Win32 API calls during application 
load process are redirected to dlls via additional jmp instruction, but 
this does not explain such big overhead.


Best regards,
Mindaugas

From dmacias at mail.udg.mx  Tue Sep 16 18:52:05 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Sep 16 18:52:11 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48D03895.6040504@mail.udg.mx>

Przemek:

and
[E:\harbour809mt\harbour\tests]..\bin\hbrun.exe memtst.prg

Below are results

David Macias


AMD Athlon 2200+ 2.0GHz, 1 Gb RAM, gcc 3.3.5

Warning !!! Memory statistic enabled.

09/16/08 17:49:24 Harbour 1.1.0dev (Rev. 9418) (FMSTAT), OS/2 4.50

testing single large memory blocks allocation and freeing...
  CPU time:          1.22 sec.
real time:          1.22 sec.

testing many large memory blocks allocation and freeing...
  CPU time:          9.85 sec.
real time:          9.85 sec.

testing large memory block reallocation with intermediate allocations...
Warning!!! some compilers may badly fail here
Press any key to continue...      1000      2000      3000      4000 
   5000
     6000      7000      8000      9000     10000     11000     12000 
   13000
    14000     15000     16000     17000     18000     19000     20000 
   21000
    22000     23000     24000     25000     26000     27000
Unrecoverable error 9009: hb_xrealloc can't reallocate memory
Called from AADD(0)
                    Called from MAIN(67) in pcode.hrb
                                                     Called from 
HB_HRBRUN(0)
 
      Called from _APPMAIN(109) in ../../hbrun.prg

From bedipritpal at hotmail.com  Tue Sep 16 19:12:54 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Sep 16 19:13:02 2008
Subject: [Harbour] MT and WA - Implementation Notes in Xbase++
Message-ID: <19522439.post@talk.nabble.com>


Hello Przemek

Here are two functions in Xbase++ which amply
demonstrate the functionality of ZERO space where 
two threads can share a common WA.

When I was working with Xbase++ long back, probably in 
year 2002-03, I exploited this feature mainly for only one 
table which was responsible for some synchronization for a 
particular operation. Nowhere I needed this feature otherwise.
MTs importance is gone once resources become shared between
threads. MT has a meaning only when everything in a thread 
is self-contained. Your implementation of MT is PERFECT. 

Just consider this scenario which Angel is emphasizing:

//------------------------------------------------//

Syntax

DbRelease( [<nWorkArea>|<cAlias>], [<bAreaBlock>] ) --> lSuccess 

Parameters 

<nWorkArea>

<nWorkArea> is a positive integer specifying the work area whose alias name
is to be transferred into the Zero space. It defaults to the number of the
current work area. 

<cAlias>

Alternately, <cAlias> can be specified for <nWorkArea> . If used, <cAlias>
is a character string containing the alias name to transfer. 

<bAreaBlock>

The optional argument <bAreaBlock> specifies a code block to be associated
with the work area. 

Return 

The function DbRelease() returns .T. (true) when the alias name is
successfully transferred into the Zero space, otherwise it is .F. (false). 

Description 

Together with DbRequest(), the function DbRelease() allows the utilization
of the work space concept of Xbase++. Work spaces are used for database
access across multiple work areas. Each thread has one work space with a
maximum of 65.000 work areas. Within work areas, database files are opened
and database fields can be accessed. Access to field variables of one
database is bound to the work area where the database file is opened.
Normally, a work area exists only in the thread where the database is opened
(work areas are local to a thread). 

Using DbRelease() and DbRequest() makes it possible to exchange alias names
between two work spaces. The alias name is the reference to an open
database. Thus, a specific work area can be accessed from different threads
while the corresponding database is opened once. This allows the advantages
of multi-threading in database programming to be utilized. For example, a
complex database query can be started in a separate thread while the user is
entering data in the main application thread. The user does not need to wait
for the operation to finish but can be notified when the query is complete. 

Exchanging alias names between work spaces always involves a virtual work
space, the Zero space. Function DbRelease() releases the alias name of a
work area in the current work space. It is then collected in the Zero space
and transferred to a work area of another work space when DbRequest() is
called. If the work area is linked to other work areas (SET RELATION) alias
names of all child work areas are transferred as well. 
The second parameter <bAreaBlock> is used to define an operation to be
performed within a work area of another work space. It is a code block that
is associated with the work area's alias name. When the alias name is
transferred using DbRequest(), the code block is retrieved as well. It can
then be passed to the function Eval() in order to perform the database
operation. 

Caution 
When an alias name is transferred to the Zero space, database access in the
corresponding work area is not possible. The work area is then not used and
function Used() returns .F. (false). However, the database file is still
open. 

Example 

// Perform database operations in a separate thread 

// The example demonstrates how a database query can 
// be performed in a separate thread. The task is to count 
// all customers whose last name is Thompson. This is 
// accomplished by a thread that executes the procedure 
// DbOperation(). This procedure is called from a code block 
// which is passed to DbRelease(). 
 
   PROCEDURE Main 
      LOCAL bFor    := {|| Trim(FIELD->LASTNAME) == "Thompson" } 

      LOCAL bJob    := {|| DbCount( bFor ) } 
      LOCAL oThread := Thread():new() 
 
      USE Customer                          // open database 
 
      oThread:start( "DbOperation" )        // thread executes code 
      ? "Thread started" 
      WAIT "Press a key to release work area" 
 
      DbRelease( , bJob )                   // start query 
 
      CLS 
      ? "Database operation (Query) runs in separate thread" 
      ? 
      ? "Used()", Used()                    // alias exists now 

      ? "Performing some other tasks"       // in the work space of 
                                            // the second thread. 
      DbRequest( , , @bJob, .T. )           // Get alias back 
 
      ? "Result of query:", Eval( bJob )    // display result in 
                                            // main thread and 
      CLOSE Customer                        // close database 
   RETURN 
 
   ********************* 
   PROCEDURE DbOperation                    // Procedure for any 

      LOCAL bBlock, xResult                 // database operation. 
 
      IF DbRequest( , , @bBlock, .T. )      // Wait for work area. 
         xResult := Eval( bBlock )          // Perform operation. 
         DbRelease( , {|| xResult } )       // Release work area and 
      ENDIF                                 // return result within 
                                            // a code block. 
   RETURN 
 
   ************************ 
   FUNCTION DbCount( bFor )                 // Count all records 

      LOCAL nCount := 0                     // that match a 
      GO TOP                                // condition. 
      DO WHILE ! Eof() 
         IF Eval( bFor ) 
            nCount ++ 
         ENDIF 
         SKIP 
      ENDDO 

   RETURN nCount 

//------------------------------------------------------------//

Syntax 

DbRequest( [<cAlias>], [<lFreeArea>], ; 

           [<@bAreaBlock>], [<lWait>] ) --> lSuccess 

Parameters 

<cAlias>

<cAlias> is a character expression specifying the alias name of the work
area to be transferred from the Zero space into the current work space. If
not specified, the next alias name pending in the Zero space is transferred. 

<lFreeArea>

<lFreeArea> is a logical value specifying whether an unused work area should
be selected prior to the transfer. It defaults to .F. (false). This means
that an unused work area is not selected. If the work area of the current
work space is used, all files are closed in this area with DbCloseArea().
Then the alias name is transferred from the Zero space. 

<@bAreaBlock>

<@bAreaBlock> is an optional variable that must be passed by reference. It
receives the code block associated with the work area in the Zero space. The
code block is specified when calling function DbRelease(). As an
alternative, this code block can be retrieved with the function DbJob(). 

<lWait>

The optional parameter <lWait> determines whether DbRequest() waits until a
work area is found in the Zero space and can be transferred to the current
work space. It defaults to .F. (false). This means that the function does
not wait but returns immediately even if the Zero space is empty. If .T.
(true) is specified, the function waits until it detects an alias name in
the Zero space that can be transferred. 

Return 

The return value of DbRequest() is .T. (true) if an alias name is
transferred to the current work space, otherwise it is .F. (false). 

Description 

The function DbRequest() transfers alias names from the virtual work space
(Zero space) into the current work space. It is the counterpart of
DbRelease(), which transfers alias names into the Zero space. 
The transfer of alias names follows the FIFO principle (First in first out).
If the Zero space contains multiple alias names, DbRequest() transfers the
alias that was released first. If <cAlias> is specified DbRequest()
transfers the first alias name that matches <cAlias> . For more information,
refer to function DbRelease(). 

//---------------------------------------------------------//

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/MT-and-WA---Implementation-Notes-in-Xbase%2B%2B-tp19522439p19522439.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Tue Sep 16 19:15:31 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 16 19:15:41 2008
Subject: [Harbour] [1.0] 2008-09-16 15:00 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c91852$Blat.v2.6.2$1d5ce282$f04fc27439e@127.0.0.1>

2008-09-16 15:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/pp/ppcore.c
    ! Minor typo in one PP error message.

  * utils/hbmake/hbmake.prg
    * Updated by large patch from Bill Robertson.
      Adds several enhancements, fixes and optimizations 
      to the previous version.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 16 19:18:26 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 16 19:18:34 2008
Subject: [Harbour] 2008-09-17 01:17 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91852$Blat.v2.6.2$85964ed8$2e090449cc8@127.0.0.1>

2008-09-17 01:17 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * debian/changelog
    * Synced with 1.0.1.

  * source/pp/ppcore.c
    ! Minor typo in one PP error message. (sync 1.0.1)
    * Cleaned ":" from all PP error/warning messages to be 
      friendly with Eclipse.

  * source/compiler/hbgenerr.c
    * Cleaned some more ":" chars from compiler error/warning 
      messages to be friendly with Eclipse.
    ; NOTE: Few more still remain. If you have an idea how to rephrase these, pls tell:
            "Bound error: '%s'"
            "Syntax error: '%s'"
            "Syntax error: \"%s at '%s'\""
            "Invalid lvalue: '%s'"
            "Invalid use of '@' (pass by reference): '%s'"
            "3Incompatible type in assignment to declared array element expected: '%s'"
            "4Suspicious type in assignment to declared array element expected: '%s'"

  * utils/hbmake/hbmake.prg
    * Updated by large patch from Bill Robertson.
      Adds several enhancements, fixes and optimizations 
      to the previous version.

  * utils/hbdoc/hbdoc.prg
  * utils/hbmake/hbmake.prg
  * utils/hbrun/hbrun.prg
    * Changed the way version number is shown.

  * utils/hbmake/hbmake.prg
    * Updated MT lib lists. (untested)

  * make_b32.mak
    * Minor sync with make_vc.mak.

  * make_vc.mak
    * Attempt to implement hbvmmt.lib just like in 
      make_b32.mak to make them synced.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Tue Sep 16 19:30:02 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 16 19:30:41 2008
Subject: [Harbour] 2008-09-17 01:29 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080916233002.GA10084@34-mo7-2.acn.waw.pl>

2008-09-17 01:29 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/make_xmingwce.sh
  * harbour/make_xmingw.sh
    + added an option to build utility binaries in cross builds

  * harbour/source/vm/thread.c
    ! fixes in OS2 builds MT builds

best regards
Przemek
From druzus at acn.waw.pl  Tue Sep 16 19:31:56 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 16 19:32:33 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <48D03505.3090409@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48D03505.3090409@mail.udg.mx>
Message-ID: <20080916233156.GA24897@34-mo7-2.acn.waw.pl>

On Tue, 16 Sep 2008, David Arturo Macias Corona wrote:

Hi David,

> Below are results of current Harbour under eComStation 1.2MR
> gcc 3.3.5
> ../../gtstd.c: In function `hb_gt_std_ReadKey':
> ../../gtstd.c:389: warning: unused variable `TODO'
> ../../../thread.c: In function `hb_threadCreate':
> ../../../thread.c:353: warning: comparison of unsigned expression < 0 is 
> always false
> ../../../thread.c: In function `hb_threadJoin':
> ../../../thread.c:378: warning: passing arg 1 of `DosWaitThread' makes 
> pointer from integer without a cast
> ../../../thread.c: In function `hb_threadDetach':
> ../../../thread.c:402: warning: passing arg 1 of `DosWaitThread' makes 
> pointer from integer without a cast

Thank you very much again.
I've just fixed above problems in thread.c.
If possible please try to recompile Harbour once again
and try to build tests/mt/*.prg programs using libhbvmmt instead
of libhbvm. If everything is correct then they should work.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep 16 19:34:45 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 16 19:35:21 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <48D03895.6040504@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48D03895.6040504@mail.udg.mx>
Message-ID: <20080916233445.GB24897@34-mo7-2.acn.waw.pl>

On Tue, 16 Sep 2008, David Arturo Macias Corona wrote:

Hi David,

> [E:\harbour809mt\harbour\tests]..\bin\hbrun.exe memtst.prg
> Below are results
[...]
> testing large memory block reallocation with intermediate allocations...
> Warning!!! some compilers may badly fail here
[...]
> Unrecoverable error 9009: hb_xrealloc can't reallocate memory
> Called from AADD(0)
>                    Called from MAIN(67) in pcode.hrb
>                                                     Called from 
> HB_HRBRUN(0)
>
>      Called from _APPMAIN(109) in ../../hbrun.prg

It's yet another C compiler which needs better memory manager.
The one located by Mindaugas seems to be very good choice for
such situations.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep 16 20:17:32 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 16 20:18:07 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48D037DE.8010300@dbtopas.lt>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
	<48CE57C6.2030006@dbtopas.lt>
	<20080915154445.GA803@34-mo7-2.acn.waw.pl>
	<48CE9A2E.9020201@dbtopas.lt>
	<20080915184410.GA13559@34-mo7-2.acn.waw.pl>
	<48CECBF9.1080605@dbtopas.lt>
	<20080916173546.GA30158@34-mo7-2.acn.waw.pl>
	<48D037DE.8010300@dbtopas.lt>
Message-ID: <20080917001732.GC24897@34-mo7-2.acn.waw.pl>

On Wed, 17 Sep 2008, Mindaugas Kavaliauskas wrote:

Hi,

> I've spent some time (well not much, an hour...) to find out how tls works 
> on Windows.
> The original idea is based on undocumented (but de facto) fs segment. In 
> Win32 both 9x and NT fs segment register points to Win32 Thread information 
> block (TIB). Structure is defined at 
> http://en.wikipedia.org/wiki/Win32_Thread_Information_Block
> TIB could be used to access some thread specific data (including TLS 
> values) as an alternative to Win32 API calls. For example a single asm 
> instruction
>    mov eax,fs:[24h]
> could be used instead of GetCurrentThreadID Win32 API call.
> To enable TIB extensions (or by other reasons) TIB should be not accessed 
> directly from fs segment, but address of TIB is obtained from using 
> fs:[18h], and this addresss is used to access TIB using common data segment 
> register ds. So, GetCurentThreadID in asm could be implemented:
>    mov eax,fs:[18h]
>    mov eax,[eax+24h]
>    ret
> Actually it is exact code for GetCurentThreadID from kernel32.dll.
> BCC's TLS is implented:
>   int __thread  a;
> would be comiled to:
>   call ___GetTls
>   mov  eax,[eax+some_offset]
> The function __GetTls itself is:
>   mov  eax,[tls_index]
>   mov  edx,fs:[2Ch]
>   mov  eax,[edx+eax*4]
>   ret
> Win32 API's TlsGetValue() is a little less optimal. It creates stack frame 
> (push bp, etc.), checks for tls_index value to not exceed maximul allowed 
> value, and clears last error value. This adds 7 more CPU instructions. 

Thank you very much for this information. I didn't know details of MS-Win
TLS implementation.

> These few additional instructions should not cause a big overhead, but my 
> test shows a big speed difference. speedtst.prg shows 100 seconds with 
> HB_USE_TLS and 170 seconds without HB_USE_TLS (commented out HB_USE_TLS 
> inside hbthread.h). The reason of such big overhead is not clear enough for 

It's expected. retrieving hb_stack pointer is critical for HVM speed.
For each PCODE it's accessed many times. Just compare speed difference
when you compiled ST HVM with and without HB_NO_DEFAULT_STACK_MACROS.
And here the difference is much smaller.
I guess that if you inline this function then speed of MT Harbour-BCC
programs will be greatly improved. If I understand the above it should
look like (meta code which should be adopted to BCC so it can be inlined):

   static __inline__ PHB_STACK hb_stack_ptr( void )
   {
      __asm__ (
         mov   eax,hb_stack_key
         mov   edx,fs:[2Ch]
         mov   eax,[edx+eax*4]
      );
   }

If we also want to use HB_STACK_MACROS then hb_stack_key in estack.h
should be changed to public variable. 

> me. Win32 API calls during application load process are redirected to dlls 
> via additional jmp instruction, but this does not explain such big 
> overhead.

It's the most often used peace of code by HVM which is critical for
the performance. Just check how much hb_stack*() functions is used in
hvm.c and then check how many times each of them access hb_stack
variable. Now you can also imagine why passing hb_stack pointer
is important. In practice each HVM function need it.
We can reduce the problem by introducing meta variables with
HB_STACK pointer initialized at the beginning of each function.
In xHarbour it's done by HB_THREAD_STUB macro. Using this trick
only inside estack.c should give noticeable performance improvement
when HB_STACK_MACROS are disables (default when HB_USE_TLS is
not enabled). This I'll probably implement ASAP but it can be also
used inside hvm.c code with HB_STACK_MACROS though here it will
make code more ugly. If the results from estack.c modification
will be sufficient and the code will not look ugly then maybe
I'll make it. But if you can create inlined version of above
code for BCC (don't ask me how, I stop seriously using BCC in
DOS days and here some tricks will be necessary) then maybe it
will give enough speed improvement for this compiler.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep 16 20:29:25 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 16 20:30:00 2008
Subject: [SPAM]  [Harbour] MT and WA - Implementation Notes in Xbase++
In-Reply-To: <19522439.post@talk.nabble.com>
References: <19522439.post@talk.nabble.com>
Message-ID: <20080917002925.GD24897@34-mo7-2.acn.waw.pl>

On Tue, 16 Sep 2008, Pritpal Bedi wrote:

Hi Pritpal,

> Here are two functions in Xbase++ which amply
> demonstrate the functionality of ZERO space where 
> two threads can share a common WA.

Many thanks for the documentation.
I was thinking about exactly the same mechanism when
I was writing about moving WA from one thread to other.
Just simply some solutions are natural.
It's used instead of shared WA which have to be synced
by user. Moving WA pointer gives automatic synchronization
for grouped operations without risk that user mistake
will break internal RDD/WA structures.
To not reinvent the wheel I'll implement exactly the
same functionality as was documented.
BTW with two simple helper C functions it can be
implement even at .prg level.

best regards,
Przemek
From bedipritpal at hotmail.com  Tue Sep 16 20:56:29 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Sep 16 20:56:35 2008
Subject: [Harbour] MT and Thread Control - Signals
Message-ID: <19523545.post@talk.nabble.com>


Hello Przemek

[Xbase++]

Here is the complete implementation detail how various
threads coordinate with each other :


Controlling threads using signals 
------------------------------
There is a possibility for coordinating threads which does not require a
thread to terminate before another thread resumes. However, this requires
the usage of an object of the Signal class. The Signal object must be
visible in two threads at the same time. With the aid of a Signal object,
one thread can tell one or more other threads to leave their wait state and
to resume program execution: 

   Thread A             Thread B 
 
   running              running        // simultaneous execution 
      |                    |           // of program code 
      |                 oSignal:wait() // thread B stops  
      | 
      |                 wait state     // thread A executes code 
   oSignal:signal()      
      |                 running        // thread B resumes 

      |                    | 

Whenever a thread executes the :wait() method of a Signal object, it enters
a wait state and stops program execution. The thread leaves its wait state
only after another thread calls the :signal() method of the same Signal
object. In this way a communication between threads is realized. One thread
tells other threads to leave their wait state and to resume program
execution. 


Mutual exclusion of threads 
--------------------------
As long as multiple threads execute different program code at the same time,
the coordination of threads is possible using wait states as achieved with
:synchronize() or ThreadWait(). However, wait states are not possible if the
same program code is running simultaneously in multiple threads. A common
example for this situation is adding/deleting elements to/from a globally
visible array: 

   PUBLIC aQueue := {} 
 
   FOR i:=1 TO 10000                   // This loop cannot 
      Add( "Test" )                    // be executed in 
      Del()                            // multiple threads 
   NEXT 
 
   ********************** 
   FUNCTION Add( xValue ) 
   RETURN AAdd( aQueue, xValue ) 
 
   ************** 
   FUNCTION Del() 
      LOCAL xValue 
 
      IF Len(aQueue) > 1 
         xValue := aQueue[1] 
         ADel ( aQueue, 1 ) 
         ASize( aQueue, Len(aQueue)-1 ) 

      ENDIF 

   RETURN xValue 

In this example, the array aQueue is used to temporarily store arbitrary
values. The values are retrieved from the array according to the FIFO
principle (First In First Out). Function Add() adds an element to the end of
the array, while function Del() reads the first element and shrinks the
array by one element (note: this kind of data management is called a Queue). 
When the functions Add() and Del() are executed in different threads, the
PUBLIC array aQueue is accessed simultaneously by multiple threads. This
leads to a critical situation in function Del() when the array has only one
element. In this case, a runtime error can occur: 

   Thread A                Thread B 
 
   LOCAL xValue 
   IF Len(aQueue) > 1 
      Thread is            Thread executes function completely 
      interrupted by the 
      operating system     LOCAL xValue 
                           IF Len(aQueue) > 1 
                              xValue := aQueue[1] 
                              ADel ( aQueue, 1 ) 
                              ASize( aQueue, Len(aQueue)-1 ) 
                           ENDIF 
                           RETURN xValue 

      Thread resumes 
 
      xValue := aQueue[1] 
 
      Runtime error: 

      Meanwhile, the array is empty 

The operating system can interrupt a thread at any time in order to give
another thread access to the CPU. If threads A and B execute function Del()
at the same time, it is possible that thread A is interrupted immediately
after the IF statement. Thread B may then run the function to completion
before thread A is scheduled again for program execution. In this case, a
runtime error can occur because the function Del() is not completely
executed in one thread before another thread executes the same function. 

The example function Del() represents those situations in multi-threading
which require muliple operations to be executed in one particular thread
before another thread may execute the same operations. This can be resolved
when thread B is stopped while thread A executes the Del() function. Only
after thread A has run this function to completion may thread B begin with
executing the same function. Such a situation is called "mutual exclusion"
because one thread excludes all other threads from executing the same code
at the same time. 

Mutual exclusion of threads is achieved in Xbase++ not on the
PROCEDURE/FUNCTION level but with the aid of SYNC methods. The SYNC
attribute for methods guarantees that the method code is executed by only
one thread at any time. However, this is restricted to one and the same
object. If one object is visible in multiple threads and the method is
called simultaneously with that object, the execution of the method is
serialized between the threads. In contrast, if two objects of the same
class are used in two threads and the same method is called with both
objects, the program code of the method runs parallel in both threads. As a
result, mutual exclusion is only possible if two threads attempt to execute
the same method with the same object. The object must be an instance of a
user-defined class that implements SYNC methods. A SYNC method is executed
entirely in one thread. All other threads are automatically stopped when
they attempt to execute the same method with the same object. 

The example with the beforementioned PUBLIC array aQueue must be programmed
as a user-defined class in order to safely access the array from multiple
threads: 

   PUBLIC oQueue := Queue():new() 
 
   FOR i:=1 TO 10000                   // This loop can run 
      oQueue:add( "Test" )             // simultaneously in 
      oQueue:del()                     // multiple threads 
   NEXT 
 
   *********** 
   CLASS Queue                         // Class for managing 
      PROTECTED:                       // a queue 
      VAR aQueue 
 
      EXPORTED: 
      INLINE METHOD init 
         ::aQueue := {}                // Initialize array 

      RETURN self 
 
      SYNC METHOD add, del             // Synchronized methods 
   ENDCLASS 
 
   METHOD Queue:add( xValue )          // Add an element 
   RETURN AAdd( ::aQueue, xValue ) 
 
   METHOD Queue:del                    // Remove first element 
      LOCAL xValue                     // and shrink array  
 
      IF Len(::aQueue) > 1 
         xValue := aQueue[1] 
         ADel ( ::aQueue, 1 ) 
         ASize( ::aQueue, Len(::aQueue)-1 ) 
      ENDIF 

   RETURN xValue 

In this example, the Queue class is used for managing a dynamic array that
may be accessed and changed from multiple threads simultaneously. The array
is referenced in the instance variable :aQueue and it is accessed within the
SYNC methods :add() and :del() . The Queue object which contains the array
is globally visible. The execution of the :del() method is automatically
serialized between multiple threads: 

   Thread A               Thread B 
      |                      | 
    oQueue:del()             | 
      |                    oQueue:del() 
    <...>            
    ADel( ::aQueue, 1 )      thread is stopped 
    <...> 
    RETURN xValue            thread resumes 
      |                    <...> 
      |                    ADel( ::aQueue, 1 )  
      |                    <...> 
      |                    RETURN xValue 

      |                      | 

When thread B wants to execute the :del() method while this method is
executed by thread A, thread B is stopped because it wants to execute the
method with the same Queue object. Therefore, SYNC methods are used whenever
multiple operations must be guaranteed to be executed in one thread before
another thread executes the same operations. A SYNC method can be executed
with the same object only in one thread at any time (Note: if a class method
is declared with the SYNC attribute, its execution is serialized for all
objects of the class). 



Signal()  - Class function of the Signal class. 
------------------------------------------
Return 

The function Signal() returns the class object of the Signal class. 

Description 

Signal objects are used to control program flow within one or more threads
from one other thread. To achieve this, it is necessary that one and the
same Signal object is visible in at least two threads. Therefore, Signal
objects can only be used in conjunction with Thread objects. In other words,
at least one additional Thread object must exist in an application for the
Signal class to become useful (note: the Main procedure is executed by an
implicit Thread object). 
There are two methods in the Signal class: :signal() and :wait() . The
method :signal() triggers a signal, while the :wait() method causes a thread
to enter a wait state. If a thread executes the :wait() method, it waits for
the signal and suspends program execution. The thread resumes as soon as a
second thread executes the :signal() method with the same Signal object. 

With the aid of Signal objects it becomes possible for the current thread to
control program flow in other threads. Each thread which executes the
:wait() method enters a wait state until another thread executes the
:signal() method. 
Caution: Multiple Signal objects can be used to control program execution in
multiple threads. Since a Signal object limits program control in threads to
a wait state, so-called "dead lock" situations can occur when multiple
Signal objects are used. A dead lock is reached when thread A waits for a
signal from thread B, while, at the same time, thread B waits for a signal
from thread A. 

Class methods 

:new()

Creates an instance of the Signal class. 

Instance variables 

:cargo	Instance variable for ad-hoc use. 

Attribute: 	EXPORTED

 Datatype: 	All data types

Methods 

:signal() --> self

Triggers a signal for other threads. 

:wait( [<nTimeOut>] ) --> lSignalled

Waits until another thread triggers the signal. 

Example - 1 

// Simple screen saver 

// A simple screen saver for text mode applications is programmed 

// in this example. The code for the screen saver runs in 

// a separate thread which waits to be signalled for a maximum of 

// 5 seconds. If no signal is triggered, the screen saver is 

// activated. The thread is signalled from the Main procedure 

// each time an event (keyboard, mouse) is taken from the 

// event queue. 

 

   #include "AppEvent.ch" 

 

   PROCEDURE Main 

      LOCAL nEvent, oThread, oSignal 

 

      ? "Press a key. ESC quits" 

 

      oThread := Thread():new() 

      oSignal := Signal():new() 

 

      oThread:start( "ScreenSaver", oSignal, 5 ) 

 

      DO WHILE nEvent <> xbeK_ESC 

         nEvent := AppEvent(,,,0) 

         oSignal:signal() 

 

         ? "Event =", nEvent 

      ENDDO 

   RETURN 

 

   ** Procedure runs in separate thread 

   PROCEDURE ScreenSaver( oSignal, nSeconds ) 

      LOCAL cScreen, cTemp 

 

      DO WHILE .T. 

 

         IF .NOT. oSignal:wait( nSeconds * 100 ) 

            // This code is executed if no signal is triggered 

            // for more than <nSeconds> seconds 

            cScreen := SaveScreen( 0,0, MaxRow(), MaxCol() ) 

            cTemp   := SubStr( cScreen, 2 ) + Left( cScreen, 1 ) 

 

            // Change screen until thread is signalled 

            DO WHILE .NOT. oSignal:wait(10) 

               cTemp := SubStr( cTemp, 3 ) + Left( cTemp, 2 ) 

               RestScreen( 0,0, MaxRow(), MaxCol(), cTemp ) 

            ENDDO 

 

            RestScreen( 0,0, MaxRow(), MaxCol(), cScreen ) 

            cScreen := ; 

            cTemp   := NIL 

         ENDIF 

 

      ENDDO 

   RETURN 

Example - 2 

// Controlling Append in two threads using signals 

// A new database is created in this example and records from 

// an existing database are appended. An array is used as a 

// read/write buffer to transfer data from the existing to the 

// new database. Reading and writing data runs simultaneously 

// in two threads. Two Signal objects coordinate which thread 

// may read and which one may write. A third signal causes 

// the second thread to terminate. 

 

   PROCEDURE Main 

      LOCAL oReadDone, oWriteDone, oDoExit, oThread, aValues 

      USE LargeDB 

      DbCreate( "Test", DbStruct() ) 

      oThread     := Thread():new() 

      aValues     := Array( FCount() ) 

      oReadDone   := Signal():new() 

      oWriteDone  := Signal():new() 

      oDoExit     := Signal():new() 
 

      oThread:start( "AppendTo", "Test"    , aValues , ; 

                      oReadDone, oWriteDone, oDoExit ) 

      oWriteDone:wait()           // Wait until 2nd database 

                                  // is open 

      DO WHILE .T.                // Transfer record to array 

         Aeval( aValues, {|x,i| x:=FieldGet(i) },,, .T. ) 

         IF ! Eof() 

            oReadDone:signal()    // 1st signal: record is read 

            SKIP 

         ELSE 

            oDoExit:signal()      // 2nd signal: terminate thread #2 

            EXIT 

         ENDIF 

         oWriteDone:wait()        // Wait until data is written 

      ENDDO                       // to new database 

 

      oThread:synchronize(0) 

 

      USE 

   RETURN 
 

   ** Procedure runs in separate thread 

   PROCEDURE AppendTo( cDbFile, aValues, ; 

                       oReadDone, oWriteDone, oDoExit ) 

      USE (cDbFile) EXCLUSIVE 

      oWriteDone:signal()         // Signal: database is open 

      DO WHILE .T. 

         IF oReadDone:wait(10)    // Check if record is read 

            DbAppend()            // Write data 

            AEval( aValues, {|x,i| FieldPut(i,x) } ) 

            oWriteDone:signal()   // Signal: Data is written 

         ELSEIF oDoExit:wait(10)  // Got an Exit signal? 

            EXIT 

         ENDIF 

      ENDDO 

      USE 

   RETURN 

//-------------------------------------------------//

More to follow.

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/MT-and-Thread-Control---Signals-tp19523545p19523545.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Tue Sep 16 22:22:34 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Sep 16 22:22:43 2008
Subject: [Harbour] MT - Thread Specific Functions in Xbase++
Message-ID: <19524300.post@talk.nabble.com>


Hello Everybody

Just for information sake:


ThreadID() -> nThreadID 
----------
Return 

The function returns a numeric value > 0. 

Description 

The function ThreadID() is used to get the numeric ID of the thread in which
the function is called. The value is unique within a single process and may
occur multiple times in different processes. 


ThreadInfo( <nWhichInfo>, [<nThreadID>] ) --> aInfo 
------------------------------------------
Parameters 

<nWhichInfo>

#define constants from the file THREAD.CH must be used for this parameter.
They determine the type of information returned by the function. Multiple
constants can be combined with '+'. 

Constants for ThreadInfo() 

  Sequence  Constant             Description                                    

  A         THREADINFO_TID       The numeric thread ID                          
  B         THREADINFO_SYSTHND   The numeric handle used by the operating       
                                 system for this thread.                        
  C         THREADINFO_FUNCINFO  The function name and line number currently    
                                 being executed.                                
  D         THREADINFO_TOBJ      The thread object representing the thread      

<nThreadID>

An optional thread ID can be passed to obtain information about one
particular thread. If this parameter is omitted, all threads are queried. 

Return 

The function returns a two-dimensional array where each thread has one
sub-array containing one or more elements controlled by <nWhichInfo> . If
<nWhichInfo> is a combination of constants, the elements of the sub-array
(the array columns) appear in the sequence order of each constant (first
column in the table). 

Description 

The function ThreadInfo() returns various information about existing threads
of the current process. The constant THREADINFO_TID retrieves the Xbase++
thread ID which is also returned  by the ThreadId() function for the current
thread. THREADINFO_SYSTHND retrieves the thread IDs used by the operating
system. They are provided for calling API functions or for passing system
IDs to third-party tools which require this low-lovel information.
THREADINFO_FUNCINFO results in two elements being added to the sub-arrays.
They contain program line and name of the function or method currently being
executed in the corresponding thread. Both elements contain NIL if the
thread is idle and does not process program code. THREADINFO_TOBJ finally
retrieves the Thread object representing a thread. 

Example 

// Obtaining information about threads 
// The example lists full and partial information 
// about threads that can be retrieved with ThreadInfo() 
 
   #include "Thread.ch" 
 
   PROCEDURE Main 
      LOCAL aInfo, aThread := { Thread():new(), Thread():new() } 
 
      CLS 
      aThread[1]:start( "Test1" ) 
      aThread[2]:start( "Test2" ) 
 
      ? "Retrieve all thread information" 
      aInfo := ThreadInfo( THREADINFO_TID      + ; 
                           THREADINFO_SYSTHND  + ; 

                           THREADINFO_FUNCINFO + ; 
                           THREADINFO_TOBJ       ) 
 
      AEval( aInfo, {|a| QOut( Var2Char(a) ) } ) 
 
      ? 
      ? "Retrieve partial thread information" 
      aInfo := ThreadInfo( THREADINFO_FUNCINFO + ; 
                           THREADINFO_TID        ) 
 
      ? 
      AEval( aInfo, {|a| QOut( Var2Char(a) ) } ) 
   RETURN 
 
 
   PROCEDURE Test1 
      DO WHILE .T. 
         DispOutAt( 10, 10, Time() ) 

         Sleep(100) 
      ENDDO 
   RETURN 
 
 
   PROCEDURE Test2 
      LOCAL nCount := 0 
      DO WHILE .T. 
         DispOutAt( 12, 10, nCount ++ ) 
         Sleep(17) 
      ENDDO 
   RETURN 
 
   // Program output 
 
   // Retrieve all thread information 
   // {1, 324, 14, MAIN, thread} 
   // {2, 724, 31, TEST1, thread} 
   // {3, 748, 40, TEST2, thread} 
   // 
   // Retrieve partial thread information 
   // {1, 21, MAIN} 
   // {2, 31, TEST1} 

   // {3, 40, TEST2} 


ThreadObject() --> oThread 
--------------
Return 

The function returns the Thread object which currently executes program
code. 

Description 

The function ThreadObject() is used to retrieve the current Thread object
when multiple threads are running. This is especially useful if the same
user-defined function is executed multiple times and simultaneously in
different threads. The function can also be used to retrieve the implicit
Thread object which executes the Main procedure at program startup. 


ThreadWait( <aThreads> , [<nTimeOut>], ) --> oThread | NIL 
-----------------------------------------
Parameters 

<aThreads>

<aThreads> is an array whose elements contain Thread objects. The current
thread waits for the termination of one or all of the corresponding threads.
The number of elements in <aThreads> is limited to the value of the constant
THREAD_WAIT_MAX from THREAD.CH. 

<nTimeOut>

<nTimeOut> specifies the maximum amount of time the current thread will wait
for the termination of other threads. The unit is 1/100th of a second. The
default value is 0 and this causes the current thread to wait infinitely
until one Thread object in <aThreads> has finished with executing code. If a
value > 0 is specified for <nTimeOut> and no thread has terminated within
this period of time, the current thread resumes progam execution. 

Return 

If one thread terminates within the time limit defined with <nTimeOut> , the
function returns the corresponding Thread object. Otherwise, the return
value is NIL. 

Description 

The function ThreadWait() causes the current thread to wait until one thread
from a number of threads has terminated. Compared to the :synchronize() 
method of the Thread class, the function has the advantage that the current
thread does not need to wait for a particular thread, but rather can wait
for any thread from a number of threads. Note that the number of threads the
current thread can wait for is limited to the constant THREAD_WAIT_MAX by
the operating system. 


ThreadWaitAll( <aThreads> , [<nTimeOut>]  ) --> lSuccess 
-------------------------------------------
Parameters 

<aThreads>

<aThreads> is an array whose elements contain Thread objects. The current
thread waits for the termination of all of the corresponding threads. The
number of elements in <aThreads> , or thread objects, respectively, is
limited to the value of the constant THREAD_WAIT_MAX from THREAD.CH. 

<nTimeOut>

<nTimeOut> specifies the maximum amount of time the current thread will wait
for the termination of all other threads. The unit is 1/100th of a second. 
The default value is 0 and this causes the current thread to wait infinitely
until all other Thread objects are finished with executing code. If a value
> 0 is specified for <nTimeOut> and no thread has terminated within this
period of time, the current thread resumes progam execution. 

Return 

When all threads specified in <aThreads> have terminated, the return value
is .T. (true). If the waiting period is limited by a value greater than 0
for <nTimeOut> and not all threads have terminated when this time limit has
expired, the function returns .F. (false). 

Description 

The function ThreadWaitAll() causes the current thread to wait for the
termination of multiple other threads. Compared to the :synchronize() method
of the Thread class, it has the advantage that the current thread does not
need to wait for one particular Thread object but rather can wait for
multiple threads to complete execution of code. 


Regards
Pritpal Bedi



-- 
View this message in context: http://www.nabble.com/MT---Thread-Specific-Functions-in-Xbase%2B%2B-tp19524300p19524300.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From toninhofwi at yahoo.com.br  Tue Sep 16 22:48:07 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Sep 16 22:41:47 2008
Subject: [Harbour] GPF sample
Message-ID: <tor0d494h9v1d081l75ki4j8nrh76kpsq3@4ax.com>

Hi friends,

The sample below GPF after MT implementation:

I'm using rddads.lib and ace.lib together.

---cut---

procedure main()
return

function DboTempOpenFromDbf()
   AdsSetFileType( 3 )
return nil

#pragma BEGINDUMP

#include "windows.h"
#include "hbapi.h"

HB_FUNC( RDDSYS )
{
  hb_ret();
}

#pragma ENDDUMP

---cut---


Regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From toninhofwi at yahoo.com.br  Tue Sep 16 22:57:35 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Sep 16 22:51:13 2008
Subject: [Harbour] hb_gcall() and fwh
Message-ID: <2as0d45gdmf93hvv09a8isrbdq6j2dsp4v@4ax.com>

Hi,

I see that fwh continues calling hb_gcall() after each time a dialog
close. It remains necessary in current svn or we have a better choice
?

TIA and regards,

Toninho.

		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opção para você! 
Experimente já e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From toninhofwi at yahoo.com.br  Tue Sep 16 23:07:01 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Sep 16 23:00:36 2008
Subject: [Harbour] GPF sample
Message-ID: <e2t0d4tqqv5cua0cfmnq2ag3m1hm7gvlpg@4ax.com>

Hi friends,

The sample below GPF after MT implementation:

I'm using rddads.lib and ace.lib together.

---cut---

procedure main()
return

function DboTempOpenFromDbf()
   AdsSetFileType( 3 )
return nil

#pragma BEGINDUMP

#include "windows.h"
#include "hbapi.h"

HB_FUNC( RDDSYS )
{
  hb_ret();
}

#pragma ENDDUMP

---cut---


Regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From lorenzo.fiorini at gmail.com  Wed Sep 17 02:02:04 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Sep 17 02:02:10 2008
Subject: [Harbour] MT "stubbed" functions in 1.0.1?
Message-ID: <9257026e0809162302m6145cd1cw757e5fc60a5eae19@mail.gmail.com>

I tried to test new memtst and speedtst with 1.0.1 to check the
differences with 1.1.0 but the last uses the func HB_MTVM() which is
defined in source/vm/threads.c.

IMHO it would useful to add "stubbed" thread functions to 1.0.1 so
that one can start to add MT code to real apps without requiring to
jump in production with 1.1.0 too early.

Clearly if we think that 1.1.0 will be released soon, it is less important.

best regards,
Lorenzo
From maurilio.longo at libero.it  Wed Sep 17 03:25:36 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Sep 17 03:25:46 2008
Subject: [Harbour] MT and Thread Control - Signals
In-Reply-To: <19523545.post@talk.nabble.com>
References: <19523545.post@talk.nabble.com>
Message-ID: <48D0B0F0.6080106@libero.it>

Hi Pritpal and Przemyslaw,

signals and sync methods are very usefull and common in xbase++ mt programs.
xharbour already has support for both of them (it seems to me that the SYNC
option still has some problems, but it's been a long time since I last checked
it), maybe having the same support in harbour could make it easier to move
code from xbase++/xharbour to harbour and vv.

Best regards.

Maurilio.

Pritpal Bedi wrote:
> Hello Przemek
> 
> [Xbase++]
> 
> Here is the complete implementation detail how various
> threads coordinate with each other :
> 
> 
> Controlling threads using signals 
> ------------------------------
> There is a possibility for coordinating threads which does not require a
> thread to terminate before another thread resumes. However, this requires
> the usage of an object of the Signal class. The Signal object must be
> visible in two threads at the same time. With the aid of a Signal object,
> one thread can tell one or more other threads to leave their wait state and
> to resume program execution: 
> 
>    Thread A             Thread B 
>  
>    running              running        // simultaneous execution 
>       |                    |           // of program code 
>       |                 oSignal:wait() // thread B stops  
>       | 
>       |                 wait state     // thread A executes code 
>    oSignal:signal()      
>       |                 running        // thread B resumes 
> 
>       |                    | 
> 
> Whenever a thread executes the :wait() method of a Signal object, it enters
> a wait state and stops program execution. The thread leaves its wait state
> only after another thread calls the :signal() method of the same Signal
> object. In this way a communication between threads is realized. One thread
> tells other threads to leave their wait state and to resume program
> execution. 
> 
> 
> Mutual exclusion of threads 
> --------------------------
> As long as multiple threads execute different program code at the same time,
> the coordination of threads is possible using wait states as achieved with
> :synchronize() or ThreadWait(). However, wait states are not possible if the
> same program code is running simultaneously in multiple threads. A common
> example for this situation is adding/deleting elements to/from a globally
> visible array: 
> 
>    PUBLIC aQueue := {} 
>  
>    FOR i:=1 TO 10000                   // This loop cannot 
>       Add( "Test" )                    // be executed in 
>       Del()                            // multiple threads 
>    NEXT 
>  
>    ********************** 
>    FUNCTION Add( xValue ) 
>    RETURN AAdd( aQueue, xValue ) 
>  
>    ************** 
>    FUNCTION Del() 
>       LOCAL xValue 
>  
>       IF Len(aQueue) > 1 
>          xValue := aQueue[1] 
>          ADel ( aQueue, 1 ) 
>          ASize( aQueue, Len(aQueue)-1 ) 
> 
>       ENDIF 
> 
>    RETURN xValue 
> 
> In this example, the array aQueue is used to temporarily store arbitrary
> values. The values are retrieved from the array according to the FIFO
> principle (First In First Out). Function Add() adds an element to the end of
> the array, while function Del() reads the first element and shrinks the
> array by one element (note: this kind of data management is called a Queue). 
> When the functions Add() and Del() are executed in different threads, the
> PUBLIC array aQueue is accessed simultaneously by multiple threads. This
> leads to a critical situation in function Del() when the array has only one
> element. In this case, a runtime error can occur: 
> 
>    Thread A                Thread B 
>  
>    LOCAL xValue 
>    IF Len(aQueue) > 1 
>       Thread is            Thread executes function completely 
>       interrupted by the 
>       operating system     LOCAL xValue 
>                            IF Len(aQueue) > 1 
>                               xValue := aQueue[1] 
>                               ADel ( aQueue, 1 ) 
>                               ASize( aQueue, Len(aQueue)-1 ) 
>                            ENDIF 
>                            RETURN xValue 
> 
>       Thread resumes 
>  
>       xValue := aQueue[1] 
>  
>       Runtime error: 
> 
>       Meanwhile, the array is empty 
> 
> The operating system can interrupt a thread at any time in order to give
> another thread access to the CPU. If threads A and B execute function Del()
> at the same time, it is possible that thread A is interrupted immediately
> after the IF statement. Thread B may then run the function to completion
> before thread A is scheduled again for program execution. In this case, a
> runtime error can occur because the function Del() is not completely
> executed in one thread before another thread executes the same function. 
> 
> The example function Del() represents those situations in multi-threading
> which require muliple operations to be executed in one particular thread
> before another thread may execute the same operations. This can be resolved
> when thread B is stopped while thread A executes the Del() function. Only
> after thread A has run this function to completion may thread B begin with
> executing the same function. Such a situation is called "mutual exclusion"
> because one thread excludes all other threads from executing the same code
> at the same time. 
> 
> Mutual exclusion of threads is achieved in Xbase++ not on the
> PROCEDURE/FUNCTION level but with the aid of SYNC methods. The SYNC
> attribute for methods guarantees that the method code is executed by only
> one thread at any time. However, this is restricted to one and the same
> object. If one object is visible in multiple threads and the method is
> called simultaneously with that object, the execution of the method is
> serialized between the threads. In contrast, if two objects of the same
> class are used in two threads and the same method is called with both
> objects, the program code of the method runs parallel in both threads. As a
> result, mutual exclusion is only possible if two threads attempt to execute
> the same method with the same object. The object must be an instance of a
> user-defined class that implements SYNC methods. A SYNC method is executed
> entirely in one thread. All other threads are automatically stopped when
> they attempt to execute the same method with the same object. 
> 
> The example with the beforementioned PUBLIC array aQueue must be programmed
> as a user-defined class in order to safely access the array from multiple
> threads: 
> 
>    PUBLIC oQueue := Queue():new() 
>  
>    FOR i:=1 TO 10000                   // This loop can run 
>       oQueue:add( "Test" )             // simultaneously in 
>       oQueue:del()                     // multiple threads 
>    NEXT 
>  
>    *********** 
>    CLASS Queue                         // Class for managing 
>       PROTECTED:                       // a queue 
>       VAR aQueue 
>  
>       EXPORTED: 
>       INLINE METHOD init 
>          ::aQueue := {}                // Initialize array 
> 
>       RETURN self 
>  
>       SYNC METHOD add, del             // Synchronized methods 
>    ENDCLASS 
>  
>    METHOD Queue:add( xValue )          // Add an element 
>    RETURN AAdd( ::aQueue, xValue ) 
>  
>    METHOD Queue:del                    // Remove first element 
>       LOCAL xValue                     // and shrink array  
>  
>       IF Len(::aQueue) > 1 
>          xValue := aQueue[1] 
>          ADel ( ::aQueue, 1 ) 
>          ASize( ::aQueue, Len(::aQueue)-1 ) 
>       ENDIF 
> 
>    RETURN xValue 
> 
> In this example, the Queue class is used for managing a dynamic array that
> may be accessed and changed from multiple threads simultaneously. The array
> is referenced in the instance variable :aQueue and it is accessed within the
> SYNC methods :add() and :del() . The Queue object which contains the array
> is globally visible. The execution of the :del() method is automatically
> serialized between multiple threads: 
> 
>    Thread A               Thread B 
>       |                      | 
>     oQueue:del()             | 
>       |                    oQueue:del() 
>     <...>            
>     ADel( ::aQueue, 1 )      thread is stopped 
>     <...> 
>     RETURN xValue            thread resumes 
>       |                    <...> 
>       |                    ADel( ::aQueue, 1 )  
>       |                    <...> 
>       |                    RETURN xValue 
> 
>       |                      | 
> 
> When thread B wants to execute the :del() method while this method is
> executed by thread A, thread B is stopped because it wants to execute the
> method with the same Queue object. Therefore, SYNC methods are used whenever
> multiple operations must be guaranteed to be executed in one thread before
> another thread executes the same operations. A SYNC method can be executed
> with the same object only in one thread at any time (Note: if a class method
> is declared with the SYNC attribute, its execution is serialized for all
> objects of the class). 
> 
> 
> 
> Signal()  - Class function of the Signal class. 
> ------------------------------------------
> Return 
> 
> The function Signal() returns the class object of the Signal class. 
> 
> Description 
> 
> Signal objects are used to control program flow within one or more threads
> from one other thread. To achieve this, it is necessary that one and the
> same Signal object is visible in at least two threads. Therefore, Signal
> objects can only be used in conjunction with Thread objects. In other words,
> at least one additional Thread object must exist in an application for the
> Signal class to become useful (note: the Main procedure is executed by an
> implicit Thread object). 
> There are two methods in the Signal class: :signal() and :wait() . The
> method :signal() triggers a signal, while the :wait() method causes a thread
> to enter a wait state. If a thread executes the :wait() method, it waits for
> the signal and suspends program execution. The thread resumes as soon as a
> second thread executes the :signal() method with the same Signal object. 
> 
> With the aid of Signal objects it becomes possible for the current thread to
> control program flow in other threads. Each thread which executes the
> :wait() method enters a wait state until another thread executes the
> :signal() method. 
> Caution: Multiple Signal objects can be used to control program execution in
> multiple threads. Since a Signal object limits program control in threads to
> a wait state, so-called "dead lock" situations can occur when multiple
> Signal objects are used. A dead lock is reached when thread A waits for a
> signal from thread B, while, at the same time, thread B waits for a signal
> from thread A. 
> 
> Class methods 
> 
> :new()
> 
> Creates an instance of the Signal class. 
> 
> Instance variables 
> 
> :cargo	Instance variable for ad-hoc use. 
> 
> Attribute: 	EXPORTED
> 
>  Datatype: 	All data types
> 
> Methods 
> 
> :signal() --> self
> 
> Triggers a signal for other threads. 
> 
> :wait( [<nTimeOut>] ) --> lSignalled
> 
> Waits until another thread triggers the signal. 
> 
> Example - 1 
> 
> // Simple screen saver 
> 
> // A simple screen saver for text mode applications is programmed 
> 
> // in this example. The code for the screen saver runs in 
> 
> // a separate thread which waits to be signalled for a maximum of 
> 
> // 5 seconds. If no signal is triggered, the screen saver is 
> 
> // activated. The thread is signalled from the Main procedure 
> 
> // each time an event (keyboard, mouse) is taken from the 
> 
> // event queue. 
> 
>  
> 
>    #include "AppEvent.ch" 
> 
>  
> 
>    PROCEDURE Main 
> 
>       LOCAL nEvent, oThread, oSignal 
> 
>  
> 
>       ? "Press a key. ESC quits" 
> 
>  
> 
>       oThread := Thread():new() 
> 
>       oSignal := Signal():new() 
> 
>  
> 
>       oThread:start( "ScreenSaver", oSignal, 5 ) 
> 
>  
> 
>       DO WHILE nEvent <> xbeK_ESC 
> 
>          nEvent := AppEvent(,,,0) 
> 
>          oSignal:signal() 
> 
>  
> 
>          ? "Event =", nEvent 
> 
>       ENDDO 
> 
>    RETURN 
> 
>  
> 
>    ** Procedure runs in separate thread 
> 
>    PROCEDURE ScreenSaver( oSignal, nSeconds ) 
> 
>       LOCAL cScreen, cTemp 
> 
>  
> 
>       DO WHILE .T. 
> 
>  
> 
>          IF .NOT. oSignal:wait( nSeconds * 100 ) 
> 
>             // This code is executed if no signal is triggered 
> 
>             // for more than <nSeconds> seconds 
> 
>             cScreen := SaveScreen( 0,0, MaxRow(), MaxCol() ) 
> 
>             cTemp   := SubStr( cScreen, 2 ) + Left( cScreen, 1 ) 
> 
>  
> 
>             // Change screen until thread is signalled 
> 
>             DO WHILE .NOT. oSignal:wait(10) 
> 
>                cTemp := SubStr( cTemp, 3 ) + Left( cTemp, 2 ) 
> 
>                RestScreen( 0,0, MaxRow(), MaxCol(), cTemp ) 
> 
>             ENDDO 
> 
>  
> 
>             RestScreen( 0,0, MaxRow(), MaxCol(), cScreen ) 
> 
>             cScreen := ; 
> 
>             cTemp   := NIL 
> 
>          ENDIF 
> 
>  
> 
>       ENDDO 
> 
>    RETURN 
> 
> Example - 2 
> 
> // Controlling Append in two threads using signals 
> 
> // A new database is created in this example and records from 
> 
> // an existing database are appended. An array is used as a 
> 
> // read/write buffer to transfer data from the existing to the 
> 
> // new database. Reading and writing data runs simultaneously 
> 
> // in two threads. Two Signal objects coordinate which thread 
> 
> // may read and which one may write. A third signal causes 
> 
> // the second thread to terminate. 
> 
>  
> 
>    PROCEDURE Main 
> 
>       LOCAL oReadDone, oWriteDone, oDoExit, oThread, aValues 
> 
>       USE LargeDB 
> 
>       DbCreate( "Test", DbStruct() ) 
> 
>       oThread     := Thread():new() 
> 
>       aValues     := Array( FCount() ) 
> 
>       oReadDone   := Signal():new() 
> 
>       oWriteDone  := Signal():new() 
> 
>       oDoExit     := Signal():new() 
>  
> 
>       oThread:start( "AppendTo", "Test"    , aValues , ; 
> 
>                       oReadDone, oWriteDone, oDoExit ) 
> 
>       oWriteDone:wait()           // Wait until 2nd database 
> 
>                                   // is open 
> 
>       DO WHILE .T.                // Transfer record to array 
> 
>          Aeval( aValues, {|x,i| x:=FieldGet(i) },,, .T. ) 
> 
>          IF ! Eof() 
> 
>             oReadDone:signal()    // 1st signal: record is read 
> 
>             SKIP 
> 
>          ELSE 
> 
>             oDoExit:signal()      // 2nd signal: terminate thread #2 
> 
>             EXIT 
> 
>          ENDIF 
> 
>          oWriteDone:wait()        // Wait until data is written 
> 
>       ENDDO                       // to new database 
> 
>  
> 
>       oThread:synchronize(0) 
> 
>  
> 
>       USE 
> 
>    RETURN 
>  
> 
>    ** Procedure runs in separate thread 
> 
>    PROCEDURE AppendTo( cDbFile, aValues, ; 
> 
>                        oReadDone, oWriteDone, oDoExit ) 
> 
>       USE (cDbFile) EXCLUSIVE 
> 
>       oWriteDone:signal()         // Signal: database is open 
> 
>       DO WHILE .T. 
> 
>          IF oReadDone:wait(10)    // Check if record is read 
> 
>             DbAppend()            // Write data 
> 
>             AEval( aValues, {|x,i| FieldPut(i,x) } ) 
> 
>             oWriteDone:signal()   // Signal: Data is written 
> 
>          ELSEIF oDoExit:wait(10)  // Got an Exit signal? 
> 
>             EXIT 
> 
>          ENDIF 
> 
>       ENDDO 
> 
>       USE 
> 
>    RETURN 
> 
> //-------------------------------------------------//
> 
> More to follow.
> 
> Regards
> Pritpal Bedi
> 
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From dmacias at mail.udg.mx  Wed Sep 17 03:41:23 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Sep 17 03:41:28 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48D0B4A3.9050400@mail.udg.mx>

Przemek:

 >I've just fixed above problems in thread.c.
 >If possible please try to recompile Harbour once again
 >and try to build tests/mt/*.prg programs using libhbvmmt instead
 >of libhbvm. If everything is correct then they should work.

I used
set C_USR=-DHB_FM_STATISTICS_OFF

It build hbvmmt.a without warnings, thanks
Now Harbour is multithread in OS/2 ?  :-)

 >It's yet another C compiler which needs better memory manager.
 >The one located by Mindaugas seems to be very good choice for
 >such situations.

:-(

Below are results of some tests:

a) memtst.prg
   ST:  Fail with hb_xrealloc error
   MT:  Does not fail. Why ?

b) speedtst.prg
ST without HB_FM_STATISTICS_OFF and using hbrun speedtst.prg
  total application time:                              53.30
  total real time:                                     53.30
ST
  total application time:                              46.77
  total real time:                                     46.78
MT
  total application time:                             135.88
  total real time:                                    135.88

does not show too much difference between both ST but large with MT

c) mt\mttest01.prg - 07.prg
  No one failed

David Macias


AMD Athlon 2200+ 2.0GHz, 1 Gb RAM, gcc 3.3.5

a) memtst.prg
------------------------
[E:\harbour809mt\harbour\tests] memtst_st.exe

09/17/08 02:13:57 Harbour 1.1.0dev (Rev. 9421), OS/2 4.50

testing single large memory blocks allocation and freeing...
  CPU time:          1.22 sec.
real time:          1.22 sec.

testing many large memory blocks allocation and freeing...
  CPU time:          9.72 sec.
real time:          9.72 sec.

testing large memory block reallocation with intermediate allocations...
Warning!!! some compilers may badly fail here
Press any key to continue...      1000      2000      3000      4000 
   5000
     6000      7000      8000      9000     10000     11000     12000 
   13000
    14000     15000     16000     17000     18000     19000     20000 
   21000
    22000     23000     24000     25000     26000     27000     28000 
   29000
    30000     31000     32000     33000     34000     35000     36000 
   37000
    38000     39000     40000     41000     42000     43000     44000 
   45000
    46000     47000     48000     49000     50000     51000     52000 
   53000
    54000     55000     56000     57000     58000     59000     60000 
   61000
    62000     63000     64000
Unrecoverable error 9009: hb_xrealloc can't reallocate memory
Called from AADD(0)
                    Called from MAIN(67) in memtst.prg

------------------------

[E:\harbour809mt\harbour\tests] memtst_mt.exe

09/17/08 02:16:58 Harbour 1.1.0dev (Rev. 9421) (MT), OS/2 4.50

testing single large memory blocks allocation and freeing...
  CPU time:          1.30 sec.
real time:          1.30 sec.

testing many large memory blocks allocation and freeing...
  CPU time:         10.06 sec.
real time:         10.06 sec.

testing large memory block reallocation with intermediate allocations...
Warning!!! some compilers may badly fail here
Press any key to continue...      1000      2000      3000      4000 
   5000
     6000      7000      8000      9000     10000     11000     12000 
   13000
    14000     15000     16000     17000     18000     19000     20000 
   21000
    22000     23000     24000     25000     26000     27000     28000 
   29000
    30000     31000     32000     33000     34000     35000     36000 
   37000
    38000     39000     40000     41000     42000     43000     44000 
   45000
    46000     47000     48000     49000     50000     51000     52000 
   53000
    54000     55000     56000     57000     58000     59000     60000 
   61000
    62000     63000     64000     65000     66000     67000     68000 
   69000
    70000     71000     72000     73000     74000     75000     76000 
   77000
    78000     79000     80000     81000     82000     83000     84000 
   85000
    86000     87000     88000     89000     90000     91000     92000 
   93000
    94000     95000     96000     97000     98000     99000    100000
  CPU time:          1.09 sec.
real time:          1.09 sec.
Press any key to continue...

------------------------


b) speedtst.prg

speedtst_st.exe
------------------------
Startup loop to increase CPU clock...

09/16/08 23:42:14 Harbour 1.1.0dev (Rev. 9421), OS/2 4.50
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.14
CPU usage -> secondsCPU()

c:=L_C ->                                             0.10
n:=L_N ->                                             0.09
d:=L_D ->                                             0.09
c:=M_C ->                                             0.12
n:=M_N ->                                             0.10
d:=M_D ->                                             0.10
(sh) c:=F_C ->                                        0.51
(sh) n:=F_N ->                                        0.33
(sh) d:=F_D ->                                        0.21
(ex) c:=F_C ->                                        0.52
(ex) n:=F_N ->                                        0.34
(ex) d:=F_D ->                                        0.21
n:=o:GenCode ->                                       0.32
n:=o[8] ->                                            0.21
round(i/1000,2) ->                                    0.45
str(i/1000) ->                                        1.37
val(a3[i%ARR_LEN+1]) ->                               0.91
dtos(j+i%10000-5000) ->                               1.14
eval({||i%ARR_LEN}) ->                                0.45
eval({|x|x%ARR_LEN},i) ->                             0.48
eval({|x|f1(x)},i) ->                                 0.69
&('f1('+str(i)+')') ->                                8.05
eval([&('{|x|f1(x)}')]) ->                            0.71
j := valtype(a)+valtype(i) ->                         0.90
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                1.81
j := val(a2[i%ARR_LEN+1]) ->                          0.91
j := a2[i%ARR_LEN+1] == s ->                          0.63
j := a2[i%ARR_LEN+1] = s ->                           0.70
j := a2[i%ARR_LEN+1] >= s ->                          0.65
j := a2[i%ARR_LEN+1] < s ->                           0.64
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         2.32
f0() ->                                               0.29
f1(i) ->                                              0.41
f2(c[8]) ->                                           0.32
f2(c[40000]) ->                                       0.31
f2(@c[40000]) ->                                      0.31
f2(c[40000]); c2:=c ->                                0.43
f2(@c[40000]); c2:=c ->                               0.43
f3(a,a2,c,i,j,t,bc) ->                                0.72
f2(a2) ->                                             0.32
s:=f4() ->                                            1.39
s:=f5() ->                                            0.77
ascan(a,i%ARR_LEN) ->                                 0.61
ascan(a2,c+chr(i%64+64)) ->                           2.39
ascan(a,{|x|x==i%ARR_LEN}) ->                         5.50
============================================================
total application time:                              46.77
total real time:                                     46.78

------------------------

speedtst_mt.exe

Startup loop to increase CPU clock...

09/16/08 23:43:24 Harbour 1.1.0dev (Rev. 9421) (MT), OS/2 4.50
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.23
CPU usage -> secondsCPU()

c:=L_C ->                                             1.19
n:=L_N ->                                             0.15
d:=L_D ->                                             0.15
c:=M_C ->                                             1.20
n:=M_N ->                                             0.16
d:=M_D ->                                             0.16
(sh) c:=F_C ->                                        1.08
(sh) n:=F_N ->                                        0.42
(sh) d:=F_D ->                                        0.25
(ex) c:=F_C ->                                        1.08
(ex) n:=F_N ->                                        0.42
(ex) d:=F_D ->                                        0.26
n:=o:GenCode ->                                       1.51
n:=o[8] ->                                            1.33
round(i/1000,2) ->                                    0.61
str(i/1000) ->                                        2.52
val(a3[i%ARR_LEN+1]) ->                               3.48
dtos(j+i%10000-5000) ->                               2.10
eval({||i%ARR_LEN}) ->                                1.81
eval({|x|x%ARR_LEN},i) ->                             1.88
eval({|x|f1(x)},i) ->                                 2.23
&('f1('+str(i)+')') ->                               11.07
eval([&('{|x|f1(x)}')]) ->                            2.24
j := valtype(a)+valtype(i) ->                         3.01
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                5.35
j := val(a2[i%ARR_LEN+1]) ->                          3.64
j := a2[i%ARR_LEN+1] == s ->                          3.90
j := a2[i%ARR_LEN+1] = s ->                           4.02
j := a2[i%ARR_LEN+1] >= s ->                          4.00
j := a2[i%ARR_LEN+1] < s ->                           4.01
aadd(aa,{i,j,s,a,a2,t,bc}) ->                        11.43
f0() ->                                               0.41
f1(i) ->                                              0.60
f2(c[8]) ->                                           1.52
f2(c[40000]) ->                                       1.52
f2(@c[40000]) ->                                      0.46
f2(c[40000]); c2:=c ->                                2.76
f2(@c[40000]); c2:=c ->                               1.74
f3(a,a2,c,i,j,t,bc) ->                                5.07
f2(a2) ->                                             1.53
s:=f4() ->                                            2.28
s:=f5() ->                                            1.69
ascan(a,i%ARR_LEN) ->                                 1.90
ascan(a2,c+chr(i%64+64)) ->                           5.78
ascan(a,{|x|x==i%ARR_LEN}) ->                        21.54
============================================================
total application time:                             135.88
total real time:                                    135.88

------------------------

[E:\harbour809mt\harbour\tests\mt]mttest01.exe

Harbour 1.1.0dev (Rev. 9421)
join: .T.
result: Hello World!!! Hello World!!! Hello World!!!
static var type: B
      12345.678
      12346.678

------------------------

[E:\harbour809mt\harbour\tests\mt]mttest02.exe

Harbour 1.1.0dev (Rev. 9421)
Main start
Thread ID: 0x233ce94
===================
M
Thread begin
Parameters: A B C
tttMttM
Thread QUIT
Thread ALWAYS section
MMMMMMM
===================
Main QUIT
Main ALWAYS section

I'm EXIT procedure

------------------------

[E:\harbour809mt\harbour\tests\mt]mttest03.exe

Harbour 1.1.0dev (Rev. 9421)
Main start

Thread ID: 0x233ce94
===================
MThread begin
Parameters: A B C
tMtttMttMttMtt
Main QUIT
Main ALWAYS section

Thread ALWAYS section

I'm EXIT procedure

------------------------

[E:\harbour809mt\harbour\tests\mt]mttest04.exe

Harbour 1.1.0dev (Rev. 9421)
Main start
Starting threads: <1><2><3><4><5>
Wait 5 seconds or hit any key...
Waiting for threads...
Threads joined
Sum of thread local counters:     139247
Protected item result.......:     139247 OK
Unprotected item result.....:     139247 *
  * - can be different then local sum on real multi-CPU systems
End of main

------------------------

[E:\harbour809mt\harbour\tests\mt]mttest05.exe

Harbour 1.1.0dev (Rev. 9421)
Starting threads: <1><2><3><4><5>
Waiting for threads...
Threads joined
Sum of results:    5000500
      should be:    5000500 OK

------------------------

[E:\harbour809mt\harbour\tests\mt]mttest06.exe

Harbour 1.1.0dev (Rev. 9421)
Starting threads: <1><2><3><4><5>
Waiting for threads...
Threads joined
Sum of results:    5000500
      should be:    5000500 OK

------------------------

[E:\harbour809mt\harbour\tests\mt]mttest07.exe

Harbour 1.1.0dev (Rev. 9421)
Main start
Starting threads: <1><2><3><4><5>
Sending jobs...
Sending terminate values...<1><2><3><4><5>
Collecting results...
Waiting for threads...
Threads joined
OK, final sum: 16698333.33
End of main

------------------------
From dmacias at mail.udg.mx  Wed Sep 17 03:53:05 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Sep 17 03:53:11 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48D0B761.3000606@mail.udg.mx>

Viktor:

doc\whatsnew.txt said:
-------------------------------
Version 1.0.1 (2008-09-10)
[...]
- Memory statistics module now turned off by default for optimal
   performance. It can be turned on by setting HB_FM_STATISTICS
   macro.
-------------------------------

but to build trunk (1.1.x) is necessary (at least OS/2):
   set C_USR=-DHB_FM_STATISTICS_OFF

Comparing both include\hbsetup.h, with other differences, we have:
1.0.1
-----
/* #define HB_FM_STATISTICS */

trunk
-----
  * By default this is turned on. Define HB_FM_STATISTICS_OFF to turn it 
off.
  */
#if defined( HB_FM_STATISTICS_OFF )
    #undef HB_FM_STATISTICS
#elif !defined( HB_FM_STATISTICS )
    #define HB_FM_STATISTICS
#endif


It is pending to merge or it will go back to old setting in 1.1.x ?

David Macias


From dbtopas at dbtopas.lt  Wed Sep 17 04:00:27 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Sep 17 04:02:37 2008
Subject: [Harbour] MT "stubbed" functions in 1.0.1?
In-Reply-To: <9257026e0809162302m6145cd1cw757e5fc60a5eae19@mail.gmail.com>
References: <9257026e0809162302m6145cd1cw757e5fc60a5eae19@mail.gmail.com>
Message-ID: <48D0B91B.9050009@dbtopas.lt>

> IMHO it would useful to add "stubbed" thread functions to 1.0.1 so
> that one can start to add MT code to real apps without requiring to
> jump in production with 1.1.0 too early.

Hi,


if we'll do it, we'll have current 1.1.0 code in 1.0.1, so 1.0.1 will 
become meaningless. You can use 1.1.0, because 1.0.1 + MT is 1.1.0 (at 
least in current code).


Best regards,
Mindaugas
From dmacias at mail.udg.mx  Wed Sep 17 04:08:37 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Sep 17 04:08:43 2008
Subject: [Harbour] Re: MT "stubbed" functions in 1.0.1?
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48D0BB05.202@mail.udg.mx>

 >I tried to test new memtst and speedtst with 1.0.1 to check the
 >differences with 1.1.0 but the last uses the func HB_MTVM() which is
 >defined in source/vm/threads.c.

 >IMHO it would useful to add "stubbed" thread functions to 1.0.1 so
 >that one can start to add MT code to real apps without requiring to
 >jump in production with 1.1.0 too early.

 >Clearly if we think that 1.1.0 will be released soon, it is less 
 >important.

Sorry but I don't agree.

It will add more confution
False mt code in 1.0.1 which is bug-fixing branch without real mt

David Macias


From dmacias at mail.udg.mx  Wed Sep 17 04:15:31 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Sep 17 04:15:38 2008
Subject: [Harbour] Re: MT "stubbed" functions in 1.0.1?
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48D0BCA3.10701@mail.udg.mx>

Mindaugas:

 > You can use 1.1.0, because 1.0.1 + MT is 1.1.0 (at
 >least in current code).

Not exactly

Comparing hbsetup.ch, hbsetup.h exist at least two differences
New code in 1.0.1 which does not exist in 1.1.x
I am not sure how closer is 1.0.1 and 1.1.x excluding mt

David Macias


From niki at synel.co.il  Wed Sep 17 04:58:34 2008
From: niki at synel.co.il (Chen Kedem)
Date: Wed Sep 17 04:59:11 2008
Subject: [Harbour] Re: Release 1.0.1 #1
Message-ID: <1A07FEDC778C3E4AA417F089511F859C03268A6A21@Mail-yoq.SYNEL-COMPANY.LTD>

David,

> Version 1.0.1 (2008-09-10)
> [...]
> - Memory statistics module now turned off by default for optimal
>    performance. It can be turned on by setting HB_FM_STATISTICS
>    macro.
> -------------------------------
>
> but to build trunk (1.1.x) is necessary (at least OS/2):
>    set C_USR=-DHB_FM_STATISTICS_OFF

The idea here, is that 1.0.1 is a final release, and as such it is default to performance.
1.1.0 is the dev version, and for now it is default to ease of debugging and reporting
problems (which the FM_STATISTICS help to find).

When it will be the time for 1.1.0 to be released as final, these defaults will probably
changed exactly as they were changed for 1.0.1 (and there are other candidates).


  Chen.
From harbour.01 at syenar.hu  Wed Sep 17 05:18:52 2008
From: harbour.01 at syenar.hu (=?WINDOWS-1252?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 05:19:03 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <48D0B761.3000606@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48D0B761.3000606@mail.udg.mx>
Message-ID: <BAC415FF-CE0A-4155-9E69-84DD5F86F45F@syenar.hu>

Hi David,

The idea here is that we're having FM stat
module - by default - turned off for stable
branches (like 1.0, and a future stable 1.1),
but we leave it on for the dev branch (trunk).

IOW, I didn't intend to sync this either way.

Brgds,
Viktor

On 2008.09.17., at 9:53, David Arturo Macias Corona wrote:

> Viktor:
>
> doc\whatsnew.txt said:
> -------------------------------
> Version 1.0.1 (2008-09-10)
> [...]
> - Memory statistics module now turned off by default for optimal
>  performance. It can be turned on by setting HB_FM_STATISTICS
>  macro.
> -------------------------------
>
> but to build trunk (1.1.x) is necessary (at least OS/2):
>  set C_USR=-DHB_FM_STATISTICS_OFF
>
> Comparing both include\hbsetup.h, with other differences, we have:
> 1.0.1
> -----
> /* #define HB_FM_STATISTICS */
>
> trunk
> -----
> * By default this is turned on. Define HB_FM_STATISTICS_OFF to turn  
> it off.
> */
> #if defined( HB_FM_STATISTICS_OFF )
>   #undef HB_FM_STATISTICS
> #elif !defined( HB_FM_STATISTICS )
>   #define HB_FM_STATISTICS
> #endif
>
>
> It is pending to merge or it will go back to old setting in 1.1.x ?
>
> David Macias
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Wed Sep 17 05:25:09 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 05:25:19 2008
Subject: [Harbour] MT "stubbed" functions in 1.0.1?
In-Reply-To: <9257026e0809162302m6145cd1cw757e5fc60a5eae19@mail.gmail.com>
References: <9257026e0809162302m6145cd1cw757e5fc60a5eae19@mail.gmail.com>
Message-ID: <F6600232-2E4C-4247-B4DC-E00B42E5D735@syenar.hu>

We will be having (and we already have) other
differences, too, and even these current function
name may change and/or get extended, new ones added,
so I think this would just create false impressions
in 1.0.1. We should remember that MT is not yet
mature in trunk.

For speedtst and memtst conditional code can easily
be added to make them compile in 1.0.1, and if this
is done, I can even sync back these two tests to 1.0
branch.

Brgds,
Viktor

On 2008.09.17., at 8:02, Lorenzo Fiorini wrote:

> I tried to test new memtst and speedtst with 1.0.1 to check the
> differences with 1.1.0 but the last uses the func HB_MTVM() which is
> defined in source/vm/threads.c.
>
> IMHO it would useful to add "stubbed" thread functions to 1.0.1 so
> that one can start to add MT code to real apps without requiring to
> jump in production with 1.1.0 too early.
>
> Clearly if we think that 1.1.0 will be released soon, it is less  
> important.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Wed Sep 17 05:35:30 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 05:35:42 2008
Subject: [Harbour] Wich internal define are you using in harbour?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFAD@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EF9D@SRV02.deltain.net><38D02176-C20A-452E-BC35-A161442CF147@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815EFAC@SRV02.deltain.net>
	<AFB948164110ED43B5EB849E8DEEF03815EFAD@SRV02.deltain.net>
Message-ID: <744B03DE-7FAD-4816-8E0A-794CBC65191E@syenar.hu>

> -DADS_LIB_VERSION=700

This one is only needed if you want to override
autodetection.

> -DHB_HASH_MSG_ITEMS
> That not are present

You can find the documented ones in hbsetup.ch and
hbsetup.h. To find the rest, you can dig them out
from the source (or lookup older messages where this
topic has been touched a few times). I personally
wouldn't recommend fiddling with those to anyone.
There are far enough documented and semi-documented
variables for a Harbour user to deal with, and for
whom this is not enough there is the adventure to
find and try the rest :) This looks like a good
candidate for an unofficial "Tips & Tricks for Harbour"
page.

Brgds,
Viktor

>
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org 
> ] On Behalf Of Massimo Belgrano
> Sent: Tuesday, September 16, 2008 7:04 PM
> To: Harbour Project Main Developer List.
> Subject: RE: [Harbour] Wich internal define are you using in harbour?
>
> Thanks
> but my question was/be
> Are present other internal outside of this list?
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org 
> ] On Behalf Of Szak?ts Viktor
> Sent: Tuesday, September 16, 2008 6:49 PM
> To: Harbour Project Main Developer List.
> Subject: Re: [Harbour] Wich internal define are you using in harbour?
>
> -DHB_WIN32_IO - DEFAULT - no need to use this macro since long.
> -DHB_FM_WIN32_ALLOC - OPTION - Recommended for - at least - BCC55.
> -DHB_FM_STATISTICS_OFF - OPTION. And DEFAULT in final releases.
> -DHB_GUI - OPTION
> -DHB_NO_PROFILER - OPTION
> -DHB_NO_TRACE - OPTION
> -DHB_USE_TLS - You shouldn't directly fiddle with this.
> -DHB_MT_VM - You shouldn't directly fiddle with this.
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Wed Sep 17 05:41:42 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 05:41:52 2008
Subject: [Harbour] GPF sample
In-Reply-To: <e2t0d4tqqv5cua0cfmnq2ag3m1hm7gvlpg@4ax.com>
References: <e2t0d4tqqv5cua0cfmnq2ag3m1hm7gvlpg@4ax.com>
Message-ID: <83A789AD-F388-474C-B274-45F319E4D0F8@syenar.hu>

Hi Toninho,

> #pragma BEGINDUMP
>
> #include "windows.h"
> #include "hbapi.h"
>
> HB_FUNC( RDDSYS )
> {
>  hb_ret();
> }
>
> #pragma ENDDUMP

Just an off-topic recommendation. For an equivalent, but
speedier, shorter and - Harbour-only - _portable_ code,
you should - instead of the above - consider using this:
---
PROCEDURE RDDSYS()
     RETURN
---
or even (but this is only 99% equivalent):
---
ANNOUNCE RDDSYS
---

Brgds,
Viktor

From dmacias at mail.udg.mx  Wed Sep 17 06:01:29 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Sep 17 06:01:38 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48D0D579.7070605@mail.udg.mx>

[Chen]
 >The idea here, is that 1.0.1 is a final release, and as such it is 
 >default to performance.
 >1.1.0 is the dev version, and for now it is default to ease of 
debugging >and reporting
 >problems (which the FM_STATISTICS help to find).

 >When it will be the time for 1.1.0 to be released as final, these 
 >defaults will probably
 >changed exactly as they were changed for 1.0.1 (and there are other 
 >candidates).

[Viktor]
 >The idea here is that we're having FM stat
 >module - by default - turned off for stable
 >branches (like 1.0, and a future stable 1.1),
 >but we leave it on for the dev branch (trunk).

 >IOW, I didn't intend to sync this either way.

Thanks Chen, Viktor

Harbour 1.0.0 have:
---------------
  * By default this is turned on. Define HB_FM_STATISTICS_OFF to turn it 
off.
  */
#ifndef HB_FM_STATISTICS_OFF
    #define HB_FM_STATISTICS
#endif
---------------

so at least for OS/2 version I provided, it have stat on. Sorry  :-)

------------------------
Built on: Aug 14 2008 04:08:15
Last ChangeLog entry: 2008-08-13 16:35 UTC+0200 Viktor Szakats 
(harbour.01 syena
[...]
Memory tracing and statistics: on
------------------------

OT:
Viktor, what VirtualBox are you using ?
In Mandriva 2008.1 I upgraded from 1.6.2 to 2.0.2 and have seen some 
stranges

David Macias


From druzus at acn.waw.pl  Wed Sep 17 06:14:26 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 17 06:14:59 2008
Subject: [Harbour] GPF sample
In-Reply-To: <e2t0d4tqqv5cua0cfmnq2ag3m1hm7gvlpg@4ax.com>
References: <e2t0d4tqqv5cua0cfmnq2ag3m1hm7gvlpg@4ax.com>
Message-ID: <20080917101426.GA11556@34-mo7-2.acn.waw.pl>

On Wed, 17 Sep 2008, Toninho@fwi wrote:

Hi Toninho,

> The sample below GPF after MT implementation:
> I'm using rddads.lib and ace.lib together.
> ---cut---
> procedure main()
> return
> function DboTempOpenFromDbf()
>    AdsSetFileType( 3 )
> return nil
> #pragma BEGINDUMP
> #include "windows.h"
> #include "hbapi.h"
> HB_FUNC( RDDSYS )
> {
>   hb_ret();
> }
> #pragma ENDDUMP
> ---cut---

Thank you for example. It's very strange. It shouldn't GPF.
Maybe it's a compile/link problem. I guess you are using BCC.
Can someone else check it and confirm the problem.
I cannot replicate it without ADS in my Linux box.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Sep 17 06:24:33 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 17 06:25:05 2008
Subject: [Harbour] hb_gcall() and fwh
In-Reply-To: <2as0d45gdmf93hvv09a8isrbdq6j2dsp4v@4ax.com>
References: <2as0d45gdmf93hvv09a8isrbdq6j2dsp4v@4ax.com>
Message-ID: <20080917102433.GB11556@34-mo7-2.acn.waw.pl>

On Tue, 16 Sep 2008, Toninho@fwi wrote:

Hi Toninho,

> I see that fwh continues calling hb_gcall() after each time a dialog
> close. It remains necessary in current svn or we have a better choice

Not yet but Harbour is ready for automatic GC activation which I'll
enable soon. Anyhow it may effect 3-rd party code which keeps not
attached GC blocks. With current API it can be done quite easy even
by mistake.
This problem can be resolved by changing the semantic and/or names
of few hb_gc*() functions but it may force 3-rd party code modification
if it uses them.
In general hb_gcAlloc() should always return locked block. Storing this
block in HB_ITEM (hb_retPtrGC(), hb_storptrGC(), hb_itemPutPtrGC()) should
automatically unlock it by calling hb_gcAttach(). hb_gcLock() and hb_gcUnlock()
will be less important and in practice not longer necessary so probably can be
dropped from public API.
I do not want to make too much modification together to be able to easy
the source of problems reported by users. But if everything will work OK
with new MT code then I'll add automatic GC activation.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Sep 17 06:42:04 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 17 06:42:37 2008
Subject: [Harbour] MT and Thread Control - Signals
In-Reply-To: <48D0B0F0.6080106@libero.it>
References: <19523545.post@talk.nabble.com> <48D0B0F0.6080106@libero.it>
Message-ID: <20080917104204.GC11556@34-mo7-2.acn.waw.pl>

On Wed, 17 Sep 2008, Maurilio Longo wrote:

Hi Pritpal and Maurilio,

> signals and sync methods are very usefull and common in xbase++ mt programs.
> xharbour already has support for both of them (it seems to me that the SYNC
> option still has some problems, but it's been a long time since I last checked

Harbour has exactly the same functionality using MUTEXES.
   hb_mutexCreate() -> <pMtx>
   hb_mutexLock( <pMtx> [, <nTimeOut> ] ) -> <lLocked>
   hb_mutexUnlock( <pMtx> ) -> <lOK>
   hb_mutexNotify( <pMtx> [, <xVal>] ) -> NIL
   hb_mutexNotifyAll( <pMtx> [, <xVal>] ) -> NIL
   hb_mutexSubscribe( <pMtx>, [ <nTimeOut> ] [, @<xSubscribed> ] ) -> <lSubscribed>
   hb_mutexSubscribeNow( <pMtx>, [ <nTimeOut> ] [, @<xSubscribed> ] ) -> <lSubscribed>

SUBSCRIBE it the same as WAIT and NOTIFY the as SIGNAL. It was not clear for
me from the documentation Pritpal sent if xbase++ WAIT internally works like
hb_mutexSubscribe() or hb_mutexSubscribeNow(). The valid one should be used.
If you need class which will work like in xBase++ then you can implement it
in few lines.
We do not have yet SYNC methods at all but I'd implemented low level code
for then in thread.c and I have to updated yet classes.c.
xHarbour have only CLASS SYNC methods but it also does not support normal
SYNC methods though it compiles code which uses them but internally convert
the function to class methods synchronization.

> it), maybe having the same support in harbour could make it easier to move
> code from xbase++/xharbour to harbour and vv.

Yes. But I'll prefer to create basic function interface which should allow
to easy write upper level code like synchronization object in xBase++.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Sep 17 06:48:31 2008
From: harbour.01 at syenar.hu (=?WINDOWS-1252?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 06:48:41 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <48D0D579.7070605@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48D0D579.7070605@mail.udg.mx>
Message-ID: <E76DCF67-754F-4EB1-8F10-24FD10821E87@syenar.hu>

>
Hi David,

> Harbour 1.0.0 have:
> ---------------
> * By default this is turned on. Define HB_FM_STATISTICS_OFF to turn  
> it off.
> */
> #ifndef HB_FM_STATISTICS_OFF
>   #define HB_FM_STATISTICS
> #endif
> ---------------
>
> so at least for OS/2 version I provided, it have stat on. Sorry  :-)

This change was implemented starting 1.0.1,
see the 1.0 branch.

> OT:
> Viktor, what VirtualBox are you using ?
> In Mandriva 2008.1 I upgraded from 1.6.2 to 2.0.2 and have seen some  
> stranges

Me too, from 1.6.4 to 2.0.0, then 2.0.2. Latest
OpenSUSE and Ubuntu are working perfectly, but
latest OpenSolaris got either _extremely_ slow
or just hangs after a while, at the Gnome login,
maybe the disk is full after a previous attempt
to upgrade (surprisingly the pack was well above
1GB AFAIR), but I have no idea how to check/fix
that from the boot loader.

Update: Oh well, I've retried just now, and I don't
know why, but now it booted okay. All I did in the
meantime is maybe a reboot and a VMWare Fusion 1.1.3
to 2.0.0 upgrade (which I bought before I got to
know about VirtualBox, and until VBOX 2.x was the
only VM which could host 64-bit OSes in OSX).

So now I hope to make an 1.0.1 build on Solaris.

Brgds,
Viktor

From toninhofwi at yahoo.com.br  Wed Sep 17 07:25:24 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Sep 17 07:19:00 2008
Subject: [Harbour] GPF sample
In-Reply-To: <83A789AD-F388-474C-B274-45F319E4D0F8@syenar.hu>
References: <e2t0d4tqqv5cua0cfmnq2ag3m1hm7gvlpg@4ax.com>
	<83A789AD-F388-474C-B274-45F319E4D0F8@syenar.hu>
Message-ID: <f2q1d45ea2jbcftl4agloecrle3v26u3ns@4ax.com>

On Wed, 17 Sep 2008 11:41:42 +0200, you wrote:

>Hi Toninho,
>
>> #pragma BEGINDUMP
>>
>> #include "windows.h"
>> #include "hbapi.h"
>>
>> HB_FUNC( RDDSYS )
>> {
>>  hb_ret();
>> }
>>
>> #pragma ENDDUMP
>
>Just an off-topic recommendation. For an equivalent, but
>speedier, shorter and - Harbour-only - _portable_ code,
>you should - instead of the above - consider using this:
>---
>PROCEDURE RDDSYS()
>     RETURN
>---
>or even (but this is only 99% equivalent):
>---
>ANNOUNCE RDDSYS

Thanks for teach me Viktor.  BTW, this bug appeared only after MT
implementation.

Regards,

Toninho.


	

	
		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opção para você! 
Experimente já e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From harbour.01 at syenar.hu  Wed Sep 17 07:23:49 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 07:23:54 2008
Subject: [Harbour] 2008-09-17 13:22 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c918b7$Blat.v2.6.2$db96368a$14484629687e@127.0.0.1>

2008-09-17 13:22 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * tests/memtst.prg
  * tests/speedtst.prg
    * Made them compile with < 1.1 Harbour versions.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep 17 07:25:19 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 07:25:24 2008
Subject: [Harbour] [1.0] 2008-09-17 13:24 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c918b8$Blat.v2.6.2$1101e71a$121862a87d06@127.0.0.1>

2008-09-17 13:24 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  + tests/memtst.prg
  * tests/speedtst.prg
    * Added/synced these two tests from trunk r9423.
--
Brgds,
Viktor

From toninhofwi at yahoo.com.br  Wed Sep 17 07:32:35 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Sep 17 07:26:40 2008
Subject: [Harbour] GPF sample
In-Reply-To: <20080917101426.GA11556@34-mo7-2.acn.waw.pl>
References: <e2t0d4tqqv5cua0cfmnq2ag3m1hm7gvlpg@4ax.com>
	<20080917101426.GA11556@34-mo7-2.acn.waw.pl>
Message-ID: <paq1d4haqaq0u4epdslunhlmbk6i2ft1nv@4ax.com>

>Thank you for example. It's very strange. It shouldn't GPF.
>Maybe it's a compile/link problem. I guess you are using BCC.
>Can someone else check it and confirm the problem.
>I cannot replicate it without ADS in my Linux box.

Przemek, thank you. 

Yes, I'm using BCC 6.10 but I have GPF in prior versions too, same
using -DHB_FM_WIN32_ALLOC, and GPF appear *ONLY* when app finish.

I'm not 100% right but seems that functions like below GPF in the same
way:

---cut---
HB_FUNC( GTSYS )
{
  hb_ret();
}

HB_FUNC( GTGUI )
{
  hb_ret();
}

HB_FUNC( HB_GT_WIN )
{
  hb_ret();
}
---cut---

But I'm not sure, I can't test it in a small sample. 

Regards,

Toninho.


	

	
		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opção para você! 
Experimente já e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From harbour.01 at syenar.hu  Wed Sep 17 07:38:22 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 07:38:31 2008
Subject: [Harbour] Release 1.0.1 #7
Message-ID: <BF63172D-644F-4F60-A2C8-3F3AADD01BC4@syenar.hu>

Hi all,

Anyone by any chance could do a WinCE build test
on Windows?

+ Passed OpenSolaris test.

Used external packages (on my system that is):
- Allegro 4.2.2
- Apollo 6.1.0.4
- libcurl 7.19.0 (7.18.2 for DMC builds)
- Firebird 2.0.4
- FreeImage 3.11.0
- libgd 2.0.34
- libharu 2.1.0
- mysql 5.0.47
- pgsql 8.3.3
- ADS 9.00

Tested platforms:
- Windows
	BCC 5.51
	BCC 5.82
	GCC Cygwin 3.4.4
	GCC MinGW 3.4.5 (on msys 1.0.10)
	GCC MinGW 4.1.2 (on msys 1.0.10)
TODO	GCC MinGW 3.4.5 (cross compile on OpenSuse 10.3, FC3)
	GCC MinGW 4.2.1 (cross compile on Ubuntu 8.04.1)
	GCC MinGW 4.3.2 (cross compile on Fedora 9)
	GCC MinGW 4.3.2a (on msys 1.0.10)
	MSVC 6.0 (HBODBC: needs fresh ODBC headers from MSSDK)
TODO	MSVC 7.1 (MSVS 2003)
	MSVC 8.0 (MSVS 2005)
	MSVC 8.0 (MSVS 2005) C++
	MSVC 9.0 (MSVS 2008 SP1)
	MSVC 9.0 (MSVS 2008 SP1) C++
	MSVC 9.0 (MSVS 2008 SP1) 64 bit
	MSVC 9.0 (MSVS 2008 SP1) C++ 64 bit (cross-compile on Win32)
	PellesC 4.5 (HBSQLIT3: interface only)
	PellesC 5.0
	PellesC 5.0 64 bit (cross-compile on Win32)
	Open Watcom 1.7 (HBSQLIT3: interface only)
	Digital Mars C 4.50
- WinCE
TODO	MSVC 6.0 (eVC4)
TODO	GCC 4.0.1 (mingw32ce 0.51.0) (cross-compile on Ubuntu 8.04.1)
TODO	GCC 4.1.0 (mingw32ce 0.50.0) (cross-compile on OpenSuse 10.3, FC3)
	GCC ?.?.? (mingw32ce 0.50-1) (cross-compile on Fedora 9)
- Linux
	GCC 4.2.3 (Ubuntu 8.04.1)
	GCC 4.3.0 (Fedora 9)
TODO	GCC 4.2.1 (SuSE 10.3)
TODO	Open Watcom (with patches only. FAILED)
TODO	GCC (RedHat 7.3)
	GCC (OpenSuse 10.3)
TODO	GCC (FC3)
- OS X
	GCC 4.0.1 i386, x86_64, PPC, PPC64 (Leopard 10.5.5 Intel + XCode 3.1.1)
- Solaris
	GCC 3.4.3 i86pc (SunOS 5.11 - OpenSolaris 2008.05)
- BSD
TODO	Reported OK
- HPUX
TODO	Reported OK
- OS/2
	GCC 3.3.5 (EMX/Innotek)
- DOS
TODO	GCC 3.3.2 32 bit (DJGPP) (DJGPP bash port)
	GCC 4.2.3 32 bit (DJGPP) ('make install' won't properly work)
TODO	Open Watcom 1.7 (command.com)

Brgds,
Viktor

From toninhofwi at yahoo.com.br  Wed Sep 17 07:51:59 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Sep 17 07:45:35 2008
Subject: [Harbour] GPF sample
In-Reply-To: <83A789AD-F388-474C-B274-45F319E4D0F8@syenar.hu>
References: <e2t0d4tqqv5cua0cfmnq2ag3m1hm7gvlpg@4ax.com>
	<83A789AD-F388-474C-B274-45F319E4D0F8@syenar.hu>
Message-ID: <snr1d4dcc8e1ebaqv7h7n3vpre74m8r6m7@4ax.com>

>Just an off-topic recommendation. For an equivalent, but
>speedier, shorter and - Harbour-only - _portable_ code,
>you should - instead of the above - consider using this:
>---
>PROCEDURE RDDSYS()
>     RETURN

Viktor, I', tested and GPF in the same way:

---cut---
procedure main()
return

function DboTempOpenFromDbf()
   AdsSetFileType( 3 )
return nil

procedure rddsys
return
---cut---


Anybody that use BCC can confirm this please?


Regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From harbour.01 at syenar.hu  Wed Sep 17 08:11:46 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 08:11:53 2008
Subject: [Harbour] 2008-09-17 14:04 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c918be$Blat.v2.6.2$8e1faa24$2b4224980c0@127.0.0.1>

2008-09-17 14:04 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * bin/hb-mkslib.sh
  * make_xmingwce.sh
  * make_gcc.sh
  * make_xmingw.sh
  * make_gnu.sh
  * make_tgz.sh
    + Added SunOS platform detection as an attempt to make 
      make_tgz.sh work on OpenSolaris.
    ; NOFIX: Still, when trying to use make_tgz.sh in OpenSolaris, 
             I'm getting these errors:
             ---
             ld: fatal: library -lharbour: not found
             ld: fatal: library -lncurses: not found
             ---
             gtar: wheel: %s: Invalid group
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep 17 08:52:00 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 08:52:11 2008
Subject: [Harbour] GPF sample
In-Reply-To: <snr1d4dcc8e1ebaqv7h7n3vpre74m8r6m7@4ax.com>
References: <e2t0d4tqqv5cua0cfmnq2ag3m1hm7gvlpg@4ax.com>
	<83A789AD-F388-474C-B274-45F319E4D0F8@syenar.hu>
	<snr1d4dcc8e1ebaqv7h7n3vpre74m8r6m7@4ax.com>
Message-ID: <A104B72B-332A-4ADA-9866-46D7D2762F7E@syenar.hu>

Hi Toninho,

I can confirm, it crashes here with an empty GPF MessageBox.

BCC 5.8.2, MT, UNICODE, ADS 9.00.

Brgds,
Viktor

On 2008.09.17., at 13:51, Toninho@fwi wrote:

>> Just an off-topic recommendation. For an equivalent, but
>> speedier, shorter and - Harbour-only - _portable_ code,
>> you should - instead of the above - consider using this:
>> ---
>> PROCEDURE RDDSYS()
>>    RETURN
>
> Viktor, I', tested and GPF in the same way:
>
> ---cut---
> procedure main()
> return
>
> function DboTempOpenFromDbf()
>   AdsSetFileType( 3 )
> return nil
>
> procedure rddsys
> return
> ---cut---
>
>
> Anybody that use BCC can confirm this please?
>
>
> Regards,
>
> Toninho.
>
> __________________________________________________
> Fa?a liga??es para outros computadores com o novo Yahoo! Messenger
> http://br.beta.messenger.yahoo.com/
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From niki at synel.co.il  Wed Sep 17 08:54:07 2008
From: niki at synel.co.il (Chen Kedem)
Date: Wed Sep 17 08:54:45 2008
Subject: [Harbour] Re: GPF sample
Message-ID: <1A07FEDC778C3E4AA417F089511F859C03268A6A24@Mail-yoq.SYNEL-COMPANY.LTD>

Toninho,

> Viktor, I', tested and GPF in the same way

> function DboTempOpenFromDbf()
>    AdsSetFileType( 3 )
> return nil

I use C++Builder 5.0 but I don't have ADS, so I need to remark the ADS function.
When doing that there is no error in ST or MT modes (with or without CodeGuard).

Maybe your ADS library is ST mode only? maybe you link cp32.lib instead of cp32mt.lib
or any other type of fixup?

  Chen.
From dbtopas at dbtopas.lt  Wed Sep 17 08:57:29 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Sep 17 08:59:37 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080917001732.GC24897@34-mo7-2.acn.waw.pl>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>	<48CE57C6.2030006@dbtopas.lt>	<20080915154445.GA803@34-mo7-2.acn.waw.pl>	<48CE9A2E.9020201@dbtopas.lt>	<20080915184410.GA13559@34-mo7-2.acn.waw.pl>	<48CECBF9.1080605@dbtopas.lt>	<20080916173546.GA30158@34-mo7-2.acn.waw.pl>	<48D037DE.8010300@dbtopas.lt>
	<20080917001732.GC24897@34-mo7-2.acn.waw.pl>
Message-ID: <48D0FEB9.9000301@dbtopas.lt>

Hi,


Przemyslaw Czerpak wrote:
> I guess that if you inline this function then speed of MT Harbour-BCC
> programs will be greatly improved. If I understand the above it should
> look like (meta code which should be adopted to BCC so it can be inlined):
> 
>    static __inline__ PHB_STACK hb_stack_ptr( void )
>    {
>       __asm__ (
>          mov   eax,hb_stack_key
>          mov   edx,fs:[2Ch]
>          mov   eax,[edx+eax*4]
>       );
>    }

I've tried a few inline functions. A few because application GPF's and I 
was trying to make it in another way. The last try was:

       static __inline void* hb_stack_ptr_from_tls( void )
       {
          /* mov ecx,hb_stack_key */
          _ECX = hb_stack_key;
          /* mov eax,dword ptr fs:[00000018h] */
          __emit__( 0x64, 0xA1, 0x18, 0x00, 0x00, 0x00 );
          /* mov eax,[eax+ecx*4+00000E10h] */
          __emit__( 0x8B, 0x84, 0x88, 0x10, 0x0E, 0x00, 0x00 );
          /* ret (if function is not inlined) */
          return (void*) _EAX;
       }

#undef  hb_stack_ready
#define hb_stack_ready() (s_fInited && hb_stack_ptr_from_tls() != NULL)
#undef  hb_stack_ptr
#define hb_stack_ptr     ( ( PHB_STACK ) hb_stack_ptr_from_tls() )


But this code was GPFing on estack.c line #305:
          hb_stack.iTSD = pTSD->iHandle;

BCC generates this code:
   mov ecx,[esi]
   mov eax,fs:[00000018h]
   mov eax,[eax+ecx*4+00000E10h]
   mov eax,[ebx]
   mov [eax+00000094h],eax

The first 3 lines are expected. It puts hb_stack address into eax.
The fourth line get pTSD->iHandle into eax (!!!) again. The last puts 
pTSD->iHandle into hb_stack.iTSD, but the problem is that both 
destination address and source value are assigned to eax (and 
overwritten of cause)!!! The correct code should be, for example:
   mov ecx,[esi]
   mov eax,fs:[00000018h]
   mov eax,[eax+ecx*4+00000E10h]
   mov ECX,[ebx]            // use ECX for value of pTSD->iHandle
   mov [eax+00000094h],ECX


Does anybody knows how to inform BCC that _EAX is "busy" register and 
should not be overwritten?

Well, I'm not sure it is possible, since
   return (void*) _EAX;
is enough good why for compiler to understand that eax contains a 
valuable information and could not be overwritten.

Any ideas how to solve this?



Best regards,
Mindaugas
From harbour.01 at syenar.hu  Wed Sep 17 09:48:56 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 09:49:05 2008
Subject: [Harbour] Re: GPF sample
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C03268A6A24@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C03268A6A24@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <7A7D9213-17B6-4E68-8212-07DF66469412@syenar.hu>

Hi Chen,

On 2008.09.17., at 14:54, Chen Kedem wrote:

> Toninho,
>
>> Viktor, I', tested and GPF in the same way
>
>> function DboTempOpenFromDbf()
>>   AdsSetFileType( 3 )
>> return nil
>
> I use C++Builder 5.0 but I don't have ADS, so I need to remark the  
> ADS function.
> When doing that there is no error in ST or MT modes (with or without  
> CodeGuard).

Without the Ads*() call it doesn't GPF here either.

> Maybe your ADS library is ST mode only? maybe you link cp32.lib  
> instead of cp32mt.lib
> or any other type of fixup?

I was using plain bld_b32.bat (in rddads/tests)
to build this sample, with C_USR set to '-tWM'
locally. This calls bld.bat which has cw32mt.lib
listed amongst the libs. It may wrong though, this
matter is getting very confusing to follow. There
is no cp32mt.lib in BCC55.

I think I will remove cw32mt.lib from bld.bat, and
it will have to be supplied through HB_USER_LIBS
envvar manually, to make this more consistent (?).

As for ADS lib, there is only one .dll version,
and the .lib created from this using implib. I
don't know if MT is supported or not.

Brgds,
Viktor

From abe.buch at att.net  Wed Sep 17 10:18:11 2008
From: abe.buch at att.net (Abeb)
Date: Wed Sep 17 10:18:19 2008
Subject: [Harbour] handel nil in savearr.prg in hbnf
Message-ID: <19533101.post@talk.nabble.com>


can these lines be add to take in account nil values

Saveing
      CASE cValType = "U"
        cString := "NIL"
        nLen := LEN(cString)
        FWrite(nHandle, L2Bin(nLen), 4)
        FWrite(nHandle, cString)

Restoreing
       CASE cValType = "U"
         cMemVar := SPACE(nLen)
         FREAD(nHandle, @cMemVar, nLen)
         xMemVar = nil

Thanks
Abe

-- 
View this message in context: http://www.nabble.com/handel-nil-in-savearr.prg-in-hbnf-tp19533101p19533101.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Wed Sep 17 10:25:45 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 17 10:26:16 2008
Subject: [Harbour] 2008-09-17 14:04 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c918be$Blat.v2.6.2$8e1faa24$2b4224980c0@127.0.0.1>
References: <01c918be$Blat.v2.6.2$8e1faa24$2b4224980c0@127.0.0.1>
Message-ID: <20080917142545.GA13372@34-mo7-2.acn.waw.pl>

On Wed, 17 Sep 2008, Szakáts Viktor wrote:

Hi Viktor,

>   * bin/hb-mkslib.sh
>   * make_xmingwce.sh
>   * make_gcc.sh
>   * make_xmingw.sh
>   * make_gnu.sh
>   * make_tgz.sh
>     + Added SunOS platform detection as an attempt to make 
>       make_tgz.sh work on OpenSolaris.

The auto detection was correct and you added dummy code
which does not work.
   uname -s | tr -d "[-]" | tr '[A-Z]' '[a-z]
returns OS name in lowercase without '-' delimiters.
It works naively for Linux HP-UX and SunOS.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Sep 17 10:32:16 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 10:32:26 2008
Subject: [Harbour] 2008-09-17 14:04 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20080917142545.GA13372@34-mo7-2.acn.waw.pl>
References: <01c918be$Blat.v2.6.2$8e1faa24$2b4224980c0@127.0.0.1>
	<20080917142545.GA13372@34-mo7-2.acn.waw.pl>
Message-ID: <4E99AE21-538F-451E-925D-454A68FCD76D@syenar.hu>

Hi Przemek,

On 2008.09.17., at 16:25, Przemyslaw Czerpak wrote:

> On Wed, 17 Sep 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>>  * bin/hb-mkslib.sh
>>  * make_xmingwce.sh
>>  * make_gcc.sh
>>  * make_xmingw.sh
>>  * make_gnu.sh
>>  * make_tgz.sh
>>    + Added SunOS platform detection as an attempt to make
>>      make_tgz.sh work on OpenSolaris.
>
> The auto detection was correct and you added dummy code
> which does not work.
>   uname -s | tr -d "[-]" | tr '[A-Z]' '[a-z]
> returns OS name in lowercase without '-' delimiters.
> It works naively for Linux HP-UX and SunOS.

Hm, okay thanks, I'll remove it, but
shouldn't I also remove "darwin" then?
uname returns "Darwin" in OSX.

BTW, do you have an idea why make_tgz.sh
doesn't work in Solaris?

Brgds,
Viktor

From mbelgrano at deltain.it  Wed Sep 17 11:20:43 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Sep 17 11:22:16 2008
Subject: [Harbour] Unresolved external '__beginthreadex' 
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFB0@SRV02.deltain.net>

Recompiling an old application with 1.1.0dev I receive this error
 
Error: Unresolved external '__beginthreadex' referenced from
C:\HARBOUR\LIB\HBVM
.LIB|thread
Error: Unresolved external '__endthreadex' referenced from
C:\HARBOUR\LIB\HBVM.L
IB|thread
What lib must add?


Massimo Belgrano

From druzus at acn.waw.pl  Wed Sep 17 11:41:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 17 11:42:35 2008
Subject: [Harbour] MM
In-Reply-To: <48D01529.9050703@dbtopas.lt>
References: <48D000DA.5040109@dbtopas.lt>
	<20080916191349.GA23674@34-mo7-2.acn.waw.pl>
	<48D01529.9050703@dbtopas.lt>
Message-ID: <20080917154151.GA30851@34-mo7-2.acn.waw.pl>

On Tue, 16 Sep 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

>>> I've tested a few memory managers (MM) with tests\memtst.prg. All test is 
>>> using BCC55 compiler, singe thread application, FM statistics switched 
>>> off, 2.2GHz Celeron, 256MB RAM.
>>> Three MM were tested: BCC55, Win32 Local*(), DL MM (see: 
>>> http://gee.cs.oswego.edu/dl/html/malloc.html).
>>> The results are:
>>>                                        BCC     WIN     DL
>>> single large memory blocks:            1.27    1.80    2.56
>>> many large memory blocks:             13.11   12.97   12.69
>>> large memory block reallocation:       2.47    3.30    0.33
> I've run TaskManager to see how much memory each MM uses. I found out
> that huge amount of memory is allocated by WIN MM before program exits
> (on last "Press any key..." message). The exact numbers are:
>                                        BCC     WIN     DL
> VM size before process exit (KB):      7396   72956    6702
> Yes, 73MB of 256MB are occupied! The huge memory allocation is done
> during the last "large memory block reallocation" test. I decided that
> WIN MM is clever enough and lets a single application to allocate a huge
> amount of memory, since no other applications are running (only services
> and some background "startup" applications).
> So, I decided to repeat the test in "high memory usage" situation. I've run 
> a few applications (Firefox that occupies 80MB of VM, GIMP 79MB and 
> Thunderbird 59MB) and repeated all test. The results was:
>                                        BCC     WIN     DL
> single large memory blocks:            1.69    2.03    1.50
> many large memory blocks:             15.09   15.17   14.13
> large memory block reallocation:       2.86    3.91    0.36
> VM size before process exit (KB):      8192  100024    6696
> WIN MM allocates this huge mount of memory during "large memory block
> reallocation" test.
> I was a little surprised that DL started to work faster 
> in "high memory usage" situation (1.5 seconds instead of 2.56). The next 
> surprising thing is that WIN MM allocates even more memory 100MB instead of 
> 73MB. I've repeated last tests a few times, the results are the same.

Probably WIN MM uses algorithm tuned to average application memory usage.
and this causes such results.
The speed improvment in DL can be caused by faster allocating memory pages
by OS though we should check if this loop can cause OS memory reallocation.
The DL MM is quite nice configurable and we can easy tune the limits.
I also made some tests and it gives nearly the same results as native
Linux MM so I guess Linux uses modified version of this code.
For me it's the most important are results in critical situations and here
the DL MM is much much better then BCC or WIN MMs (from 8 to 12 times faster).
If possible please also make test with xHarbour so we can compare the results
of array resizing with early HVM preallocation. It will be an answer if we
should make it our self or rather use good memory manager.

DL MM seems to be very good peace of work. It's public domain code so
I suggest to include it to SVN. Then we can change it and integrate some
of our own extensions. F.e. we can start with reference counters and move
them directly into DL memory block what should reduce total memory usage
and increase performance a little bit. Later we may add some other features.
This MM should be enabled optionally so if necessary some builds can use
native MM.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Sep 17 11:54:13 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 11:54:27 2008
Subject: [Harbour] 2008-09-17 17:32 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c918dd$Blat.v2.6.2$a1c04f06$5185459b32e@127.0.0.1>

2008-09-17 17:32 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * bin/hb-mkslib.sh
  * make_gcc.sh
  * make_gnu.sh
  * make_tgz.sh
  * make_xmingw.sh
  * make_xmingwce.sh
  * contrib/make_gcc_all.sh
  * contrib/mtpl_gcc.sh
    - Removed unnecessary explicit SunOS detection.
    - Removed unnecessary explicit Darwin detection (to be tested).

  * contrib/make_gcc_all.sh
    ! Fixed 'cyg' platform in contrib make files.

  * make_tgz.sh
    ! Fixed .tgz generation for SunOS. Thanks Przemek.
      I simply copied the Linux method here, I'm not sure 64-bit 
      code would apply here, too.
    ! Fix for SunOS to link against curses instead of ncurses lib.
      Someone pls verify me.
    ; TOFIX: make_tgz.sh in OpenSolaris still has these errors:
             ld: fatal: relocations remain against allocatable but non-writable sections.
             ld: fatal: library -lharbour: not found
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep 17 11:59:10 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 11:59:19 2008
Subject: [Harbour] MM
In-Reply-To: <20080917154151.GA30851@34-mo7-2.acn.waw.pl>
References: <48D000DA.5040109@dbtopas.lt>
	<20080916191349.GA23674@34-mo7-2.acn.waw.pl>
	<48D01529.9050703@dbtopas.lt>
	<20080917154151.GA30851@34-mo7-2.acn.waw.pl>
Message-ID: <CADCCC20-780E-4C74-86D7-00149F434E66@syenar.hu>

>
Hi all,

> DL MM seems to be very good peace of work. It's public domain code so
> I suggest to include it to SVN. Then we can change it and integrate  
> some
> of our own extensions. F.e. we can start with reference counters and  
> move
> them directly into DL memory block what should reduce total memory  
> usage
> and increase performance a little bit. Later we may add some other  
> features.
> This MM should be enabled optionally so if necessary some builds can  
> use
> native MM.

I agree. Since it's one file only, I'd suggest to add
it to our vm dir.

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep 17 12:04:58 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 12:05:03 2008
Subject: [Harbour] 2008-09-17 18:04 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c918df$Blat.v2.6.2$2203d07e$ff898872fc6@127.0.0.1>

2008-09-17 18:04 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_gcc.sh
  * contrib/make_gcc_all.sh
    ! cyg to w32 architecture conversion got uncommented.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep 17 12:07:34 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 12:07:39 2008
Subject: [Harbour] [1.0] 2008-09-17 18:04 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c918df$Blat.v2.6.2$7eff867e$c80cab9dca4@127.0.0.1>

; Partial sync with trunk r9428

2008-09-17 18:04 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_gcc.sh
  * contrib/make_gcc_all.sh
    ! cyg to w32 architecture conversion got uncommented.

2008-09-17 17:32 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/mtpl_gcc.sh
    - Detecting 'cyg' platform looks unnecessary here and may 
      only create problems, so it got removed.

  * contrib/make_gcc_all.sh
    ! Fixed 'cyg' platform in contrib make files.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Wed Sep 17 12:39:01 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 17 12:39:34 2008
Subject: [Harbour] 2008-09-17 18:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080917163901.GA4864@34-mo7-2.acn.waw.pl>

2008-09-17 18:38 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbthread.h
    + added macros to disable default native compiler TLS support:
      HB_NO_TLS

  * harbour/source/vm/set.c
    ! fixed GPF when set listeners were removed

best regards
Przemek
From druzus at acn.waw.pl  Wed Sep 17 12:47:59 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 17 12:48:32 2008
Subject: [Harbour] GPF sample
In-Reply-To: <paq1d4haqaq0u4epdslunhlmbk6i2ft1nv@4ax.com>
References: <e2t0d4tqqv5cua0cfmnq2ag3m1hm7gvlpg@4ax.com>
	<20080917101426.GA11556@34-mo7-2.acn.waw.pl>
	<paq1d4haqaq0u4epdslunhlmbk6i2ft1nv@4ax.com>
Message-ID: <20080917164759.GA10436@34-mo7-2.acn.waw.pl>

On Wed, 17 Sep 2008, Toninho@fwi wrote:

Hi Toninho,

> Yes, I'm using BCC 6.10 but I have GPF in prior versions too, same
> using -DHB_FM_WIN32_ALLOC, and GPF appear *ONLY* when app finish.
> I'm not 100% right but seems that functions like below GPF in the same

The GPF was inside code used to unregister SET listener handles.
My stupid typo. In our core code only ADS RDD uses this feature
and only code which was requesting ADS had problems.
I've just fixed it. Thank you for information.

best regards,
Przemek
From toninhofwi at yahoo.com.br  Wed Sep 17 12:53:14 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Sep 17 12:49:26 2008
Subject: [Harbour] GPF sample
In-Reply-To: <A104B72B-332A-4ADA-9866-46D7D2762F7E@syenar.hu>
References: <e2t0d4tqqv5cua0cfmnq2ag3m1hm7gvlpg@4ax.com>
	<83A789AD-F388-474C-B274-45F319E4D0F8@syenar.hu>
	<snr1d4dcc8e1ebaqv7h7n3vpre74m8r6m7@4ax.com>
	<A104B72B-332A-4ADA-9866-46D7D2762F7E@syenar.hu>
Message-ID: <fed2d4d0hvmtmk1npv4va10sjp602ghgii@4ax.com>

>Hi Toninho,
>
>I can confirm, it crashes here with an empty GPF MessageBox.
>
>BCC 5.8.2, MT, UNICODE, ADS 9.00.

Yes, for this reason my LOG of codeguard has no lines or sources,

Thanks and best regards,

Toninho.


	

	
		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opção para você! 
Experimente já e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From druzus at acn.waw.pl  Wed Sep 17 13:33:11 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 17 13:33:45 2008
Subject: [Harbour] GPF sample
In-Reply-To: <fed2d4d0hvmtmk1npv4va10sjp602ghgii@4ax.com>
References: <e2t0d4tqqv5cua0cfmnq2ag3m1hm7gvlpg@4ax.com>
	<83A789AD-F388-474C-B274-45F319E4D0F8@syenar.hu>
	<snr1d4dcc8e1ebaqv7h7n3vpre74m8r6m7@4ax.com>
	<A104B72B-332A-4ADA-9866-46D7D2762F7E@syenar.hu>
	<fed2d4d0hvmtmk1npv4va10sjp602ghgii@4ax.com>
Message-ID: <20080917173311.GA26123@34-mo7-2.acn.waw.pl>

On Wed, 17 Sep 2008, Toninho@fwi wrote:

Hi Toninho,

> >I can confirm, it crashes here with an empty GPF MessageBox.
> >BCC 5.8.2, MT, UNICODE, ADS 9.00.
> Yes, for this reason my LOG of codeguard has no lines or sources,

I'm afraid it was mistake in CG configuration/Harbour build
switches. The GPF was caused by ADSRDD only but it was inside
source/vm/set.c and should be caught by CodeGuard.
I installed ACE client for Linux built ADSRDD and caught error
in valgrind immediately.

best regards,
Przemek
From toninhofwi at yahoo.com.br  Wed Sep 17 13:51:39 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Sep 17 13:47:48 2008
Subject: [Harbour] GPF sample
In-Reply-To: <20080917164759.GA10436@34-mo7-2.acn.waw.pl>
References: <e2t0d4tqqv5cua0cfmnq2ag3m1hm7gvlpg@4ax.com>
	<20080917101426.GA11556@34-mo7-2.acn.waw.pl>
	<paq1d4haqaq0u4epdslunhlmbk6i2ft1nv@4ax.com>
	<20080917164759.GA10436@34-mo7-2.acn.waw.pl>
Message-ID: <8rg2d49ki14mrvajgamh6m0t5durbsd27g@4ax.com>

On Wed, 17 Sep 2008 18:47:59 +0200, you wrote:

>On Wed, 17 Sep 2008, Toninho@fwi wrote:
>
>Hi Toninho,
>
>> Yes, I'm using BCC 6.10 but I have GPF in prior versions too, same
>> using -DHB_FM_WIN32_ALLOC, and GPF appear *ONLY* when app finish.
>> I'm not 100% right but seems that functions like below GPF in the same
>
>The GPF was inside code used to unregister SET listener handles.
>My stupid typo. In our core code only ADS RDD uses this feature
>and only code which was requesting ADS had problems.
>I've just fixed it. Thank you for information.

Hi Przemek, thank you for the fix. No GPF now.

Best regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From toninhofwi at yahoo.com.br  Wed Sep 17 14:05:17 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Sep 17 14:01:27 2008
Subject: [Harbour] ADS Index Page Size
Message-ID: <ndh2d4dfa3vlfntg2fj5j8m99j2043et4q@4ax.com>

Hi ppl,

Are there any set for create Indexes with configurable Page Size ?   I
have specific adt databases that need be created with 1024  Index Page
Size. 

I have my own ads1.c changed to do this, but IMO is important if we
can have this configuration in set() or at the INDEX ON command.

from ads doc:
---cut---
Advantage Proprietary Index files (ADIs) have a configurable page
size, with a default of 512 bytes. There are some situations where it
may be desirable to use larger page sizes.

?	As a general rule, tables with over one million records per
table may benefit from larger index page sizes. Filters and SQL
queries that include most of the records in the table may run faster
with increased index page sizes. However, searches for single records
or small subsets of the table probably would not benefit from larger
page sizes.

?	Indexes with large keys may require larger page sizes. If the
page size is not large enough, it may not be possible to create an
index with longer keys. In addition, if the page size is too small,
Advantage may not be able to balance the index properly, which could
result in a 7022 error when updating the table.
---cut---


TIA and best regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From harbour.01 at syenar.hu  Wed Sep 17 14:22:52 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 14:23:04 2008
Subject: [Harbour] Tagged: Harbour 1.0.1 (r9429)
Message-ID: <ADC4A068-C546-4A65-938F-503CD3F36752@syenar.hu>

Hi all,

I've tagged Harbour release 1.0.1 (r9429).
I'll upload sources and some binaries soon.

URL:
https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/tags/harbour-1.0.0

Notes:
- To get the source from SVN, use 'svn export <URL>'.
- This is a read-only repository section, never commit anything to it.
- Commit 1.0.1 fixes and patches to /branches/harbour-1.0 SVN dir.

ChangeLog:

Version 1.0.1 (2008-09-10)

General
=============================
- Digital Marc C build fixed.
- Debian, RPM packaging fixes.
- Several code quality enhancements, warning fixes.
- Doc quality fixes, formatting.
- Fixed so that build-time PRG_USR always overrides default
   options in GNU-make.
- Added openSUSE package requirements to doc/linux1st.txt.
- Unnecessary compiler options and lib dependencies cleaned
   from build processes.
- Fixed Darwin (OS X) builds broken due to a change shortly
   before 1.0.0.
- Non-critical filename casing related cleanups.
- Non-ASCII chars stripped from several source files for
   better portability.
- Added RDD regression test code.
- Fixed potential buffer overruns in PP, GTCRS, GTPCA,
   GTSTD, hbfbird, hbwhat32.
- Eliminated remaining non-safe string manipulation calls:
   strncpy(), strcpy() -> hb_strncpy()
   strncat(), strcat() -> hb_strncat()
- Some contrib name collisions fixed in non-GNU builds.
- gtalleg GT moved to the contrib area to enable it for
   non-GNU builds and non-*nix builds in general.
   Use HB_INC_ALLEGRO or HB_DIR_ALLEGRO (for non-GNU make only)
   to specify the location of the headers or the package
   (respectively).
- Harbour compiler now defaults to -gc0 switch (was -gc2) to
   generate the smallest possible .c output by default.
- Fixed to compile under Cygwin.
- -mno-cygwin option removed from MinGW builds. You may
   need to readd this to C_USR if you use very old MinGW compilers,
   like Cygnus MinGW32 2.95.
- Fixed WinCE harbour.dll generation in non-GNU builds.
- Fixed WinCE build warnings in non-GNU builds.
- Synced build options between BCC/MSVC GNU make and
   non-GNU make.
- Default HB_VISUALC_VER envvar value changed uniformly
   to 80 for both core and contrib and WinCE build in non-GNU make.
   You may need change your environment if you relied on the default.
- Non-GNU MSVC WinCE builds are now integrated into mainstream
   non-GNU MSVC make. make_vcce.bat was removed. Please read
   instructions in make_vc.bat, how to initiate a WinCE build.
- Now Harbour is able to build and run properly in MSVC C mode
   in AMD64 (64-bit) mode.
- Added experimental Pelles C WinCE GNU-make file. It doesn't
   yet work properly.
- Post batch file called from core non-GNU make files was
   renamed, please update your system if you're using them:
   exit_err.bat -> hbmkpost.bat
- Added experimental MSVC WinCE GNU-make file.
- Added Darwin autodetection to non-GNU .sh make files.
- Changed GNU-make name of MinGW WinCE compiler (HB_COMPILER)
   from 'cemgw' to 'mingwce'. Please update your system, if
   you've been using this directly (and not via make_*ce.sh scripts).
- Memory statistics module now turned off by default for optimal
   performance. It can be turned on by setting HB_FM_STATISTICS
   macro.

Core
=============================
- Added HB_LEGACY_LEVEL macro to control inclusion of
   certain deprecated Harbour elements. This macro is
   enabled by default, and will be disabled (and legacy
   parts probably removed) in Harbour 1.1. You can disable it
   now manually by #defining HB_LEGACY_LEVEL_OFF, in order to
   check what elements needs to be changed, and if they were
   properly and fully changed in your local code.
- HB_DBG_*() internal functions moved to the internal
   function namespace __DBG*(). Some of these - potentially
   used by 3rd party packages - are still accessible under
   the old name, when HB_LEGACY_LEVEL is #defined.
- Removed old __VM*() macros which were aliased to __DBG*()
   functions.
- Macro name change __EXPORT__ -> HB_DYNLIB
   This shouldn't normally affect users, but if you happen
   to use it, please update it.
- Some internal macro names changed as follows:
   OS_UNIX_COMPATIBLE *                -> HB_OS_UNIX_COMPATIBLE
   OS_DOS_COMPATIBLE                   -> ! 
defined( HB_OS_UNIX_COMPATIBLE )
   OS_PATH_LIST_SEPARATOR              -> HB_OS_PATH_LIST_SEP_CHR
   OS_PATH_DELIMITER *                 -> HB_OS_PATH_DELIM_CHR
   OS_PATH_DELIMITER_STRING            -> HB_OS_PATH_DELIM_STR
   OS_PATH_DELIMITER_LIST              -> HB_OS_PATH_DELIM_LIST
   OS_FILE_MASK                        -> HB_OS_ALLFILE_MASK
   OS_DRIVE_DELIMITER                  -> HB_OS_DRIVE_DELIM_CHR
   OS_HAS_DRIVE_LETTER                 -> HB_OS_HAS_DRIVE_LETTER
   OS_OPT_DELIMITER_LIST               -> HB_OS_OPT_DELIM_LIST
   OS_EOL_LEN                          -> HB_OS_EOL_LEN
   HARBOUR_GCC_OS2                     -> HB_OS_OS2_GCC
   HARBOUR_START_PROCEDURE             -> HB_START_PROCEDURE
   HARBOUR_MAIN_STD                    -> HB_MAIN_STD
   HARBOUR_MAIN_WIN                    -> HB_MAIN_WIN
   HARBOUR_MAX_RDD_DRIVERNAME_LENGTH * -> HB_RDD_MAX_DRIVERNAME_LEN
   HARBOUR_MAX_RDD_ALIAS_LENGTH *      -> HB_RDD_MAX_ALIAS_LEN
   HARBOUR_MAX_RDD_AREA_NUM            -> HB_RDD_MAX_AREA_NUM
   If you happen to use these, please update your code to use
   the new names. The more commonly used ones (marked with '*')
   are still available under the old name, covered with HB_LEGACY_LEVEL.
- hbmake and hbdoc tools reduction in size, several
   fixes, better multiplaform support and lots of code cleanups,
   especially in hbmake (still a long way to go though).
- Some names deprecated and replaced with new ones:
   FHANDLE      -> HB_FHANDLE
   EVALINFO     -> HB_EVALINFO
   PEVALINFO    -> PHB_EVALINFO
   EVALINFO_PTR -> marked as legacy, use PHB_EVALINFO instead.
   CLR_STRLEN   -> HB_CLRSTR_LEN
   All of these are marked with HB_LEGACY_LEVEL.
   Important to note that legacy Clipper compatible C
   sources may continue to use Clipper compatible symbols,
   regardless of the HB_LEGACY_LEVEL setting. It's advised
   to change these to Harbour-only C sources in preparation
   to the next Harbour major version (1.1).
- Marked hb_fileNameConv() as HB_LEGACY_LEVEL. 3rd party
   and app developers should switch to hb_fsNameConv().
- GTI_*, GFX_* macros marked as HB_LEGACY_LEVEL. Please use
   HB_GTI_*, HB_GFX_* equivalents.
- Fixed potential buffer overrun in hb_fsTempName().
   This got introduced shortly before 1.0.0.
- Debugger: Strip function name from module name used to initialize
   global and file wide variables. It fixes presenting file wide
   static variables in debugger.
- Removed hb_hInstance, hb_hPrevInstance, s_iCmdShow, s_WinMainParam
   old undocumented public variables. 3rd parties should use
   official hb_winmainArgGet() API to get these values.
   This feature is also HB_LEGACY_LEVEL dependent, therefore it will
   be finalized in 1.1, until then, old symbols will still work.
- Fixed _FIELD indirectly used as alias to generate the right RTE:
   ? ("_FIELD")->NAME, or:
   M->var := "_FIELD"; ? ("&var")->NAME
- Fixed OS() to detect Vista/Windows 2008. This bug got
   introduced in 1.0.0rc2.
- Fixed OS() string when run on Windows XP 64-bit Edition.
- Changed HB_COMPILER() to always show 32/64-bit in the
   returned string.
- Fixed GPFs and leaks when using Harbour compiler -w3 switch.
- Bad workaround added for Pelles C 5.00.1 in AMD64 mode to
   compile the Harbour 'inet' subsystem. It won't properly
   work, but it lets build the rest of Harbour (like hbrun.exe).
- PCRE lib upgraded to 7.8 (from 7.7)
- Fixed dbInfo( DBI_POSITIONED ) returned value.
- Fixed internal error in dirty index reading.
- Fixed return value of HB_INETGETSNDBUFSIZE().
- Fixed GPF when user sort code block reduces the size of sorted array.
- Fixed typo in hash cloning code which caused that references
   was copied to cloned array. Thanks to Mindaugas for example.
- Added missing MESSAGE <MessageName> TO <oObject> to hbclass.ch.

Contrib
=============================
- hbmzip potential GPF fixed in executable type detection.
- General code style fixes in certain contribs.
- Harbour -km switch enabled for contribs.
- hbmysql SQLFETCHR() function updated to allow fetching
   binary (BLOB) fields.
- hbclipsm GAUGE*() function fixes.
- gtalleg fixed to compile under several non-*nix platforms
   (still needs more work).
- xhb: HB_ARRAYBLOCK() compatibility function added.
- hbnf FT_GETE() function bad leak fixed on Win32 systems,
   and potential GPF on all systems.
- hbwhat32 removed wintypes.ch header. Header with the same
   name and identical content can be found in xhb contrib.
- hbct VOLUME() buffer overrun fixed.
- hbole GPF fixed. This bug got introduced in 1.0.0rc2.
- hbole, hbw32 64-bit fix for MESSAGEBOX() functions. It now
   allows for both pointer and numeric types to be passed as
   a window handle.
- hbwhat32 fixed to not define WinMain() and also not to
   collide with certain Harbour public symbols.
- hbw32 unnecessary memory allocation hacks removed from
   OLE support.
- Using ANSI C comments more consistently in contribs.
- hbct / atnum.c changed to workaround a compiler bug in
   Pelles C 5.00.1 in AMD64 mode.
- hbole modified to generate RTE when OLE object cannot
   be found, to be in sync with hbw32 OLE implementation.
- hbbtree fixed scope problem in class, causing an RTE.
   Added build batch files for its tests.
- Remaining code (hbwhat32, hbnf) fixed to always use
   Harbour C API, instead of legacy Clipper C API (*.api,
   clipdefs.h and extend.h).
- hbsqlit2 lib was moved to examples and sqlite2 sources
   removed. Please use hbsqlit3 instead.
- hbziparch heavy rework/refactor/reduce/fixing effort,
   what resulted in hbziparc, which implements the same old
   ZipArchive interface with similar functionality (except
   progress codeblock callbacks unzip functions and .zip
   spanning feature), now rewritten in Harbour. If you need
   to use this API, please change hbziparch to hbziparc and
   link in hbmzip library, too. In contrary to old
   implementation, this new one is completely portable and
   fixes some potential leaks and GPFs. This code could use
   some more testing, be aware.
- hbbmcdx fixed internal error in dirty index reading.
- hbcurl added support for libcurl 7.19.0 features.
- hbhpdf added support for libharu 2.1.0.
- Fixed so that contrib source files cannot collide with each
   other when building them using the non-GNU make system.
- Former hbwhat32 lib added to the default contrib list
   under the name of hbwhat, compilation was fully cleaned
   and fixed to support Win64 platform. INTERNETREADFILE(),
   INTERNETWRITEFILE() functions were fixed. what32.ch renamed
   to hbwhat.ch.
- hbhpdf fixed HPDF_ADDPAGELABEL().
- hbw32 got a new COM port handling class and API.
- gtwvg got some enhancements and 64-bit compatibility fixes.
   A critical 1.0.0 bug was also fixed, which could cause
   dialogs to not appear.
- hbfimage fixed to compile with Watcom compilers.

Known build issues
=============================
- Windows 64-bit builds may generate a large amount of type
   conversion warnings. This is currently normal and will be
   addressed in a future version.
- Contrib hbfimage won't currently compile on Linux systems.
   This will be addressed in a future version.
- Contrib hbsqlit3 will not embed foreign sqlite3 library code
   for Pelles C 4.5 and Open Watcom 1.7 due to fatal compile problems.
   For these compilers you will have to supply sqlite3 library
   yourself. For other compilers, some warnings are expected and
   normal in this non-Harbour code.
- Using Pelles C 5.00.1 in 64-bit mode, HB_INET*() functions
   won't work.
- gtalleg, hbwhat contrib may not compile on all platforms/compilers.
- hbcurl won't build when using DMC and libcurl 7.19.0.
   Earlier versions build okay.


Brgds,
Viktor

From druzus at acn.waw.pl  Wed Sep 17 15:32:31 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 17 15:33:04 2008
Subject: [Harbour] Tagged: Harbour 1.0.1 (r9429)
In-Reply-To: <ADC4A068-C546-4A65-938F-503CD3F36752@syenar.hu>
References: <ADC4A068-C546-4A65-938F-503CD3F36752@syenar.hu>
Message-ID: <20080917193231.GA2623@34-mo7-2.acn.waw.pl>

On Wed, 17 Sep 2008, Szakáts Viktor wrote:

Hi Viktor,

> I've tagged Harbour release 1.0.1 (r9429).
> I'll upload sources and some binaries soon.

Thank you very much.

> URL:
> https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/tags/harbour-1.0.0

../tags/harbour-1.0.0 is use dintentionally or it should be:
../tags/harbour-1.0.1?

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Sep 17 15:35:59 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 15:36:11 2008
Subject: [Harbour] Tagged: Harbour 1.0.1 (r9429)
In-Reply-To: <20080917193231.GA2623@34-mo7-2.acn.waw.pl>
References: <ADC4A068-C546-4A65-938F-503CD3F36752@syenar.hu>
	<20080917193231.GA2623@34-mo7-2.acn.waw.pl>
Message-ID: <764AC79C-D99B-4291-B4D0-37E2FC4EC57B@syenar.hu>

Hi Przemek and all,

On 2008.09.17., at 21:32, Przemyslaw Czerpak wrote:

> On Wed, 17 Sep 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> I've tagged Harbour release 1.0.1 (r9429).
>> I'll upload sources and some binaries soon.
>
> Thank you very much.
>
>> URL:
>> https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/tags/harbour-1.0.0
>
> ../tags/harbour-1.0.0 is use dintentionally or it should be:
> ../tags/harbour-1.0.1?

Yes sorry, my fault, I copy pasted and got distracted by
something, forgot to update it.

This is the correct one of course:
https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/tags/harbour-1.0.1

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep 17 15:36:33 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 15:36:39 2008
Subject: [Harbour] Tagged: Harbour 1.0.1 (r9429) [CORRECTED]
Message-ID: <9F16F1DF-5641-421F-82A8-B958153953DD@syenar.hu>

Hi all,

I've tagged Harbour release 1.0.1 (r9429).
I'll upload sources and some binaries soon.

URL:
https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/tags/harbour-1.0.1

Notes:
- To get the source from SVN, use 'svn export <URL>'.
- This is a read-only repository section, never commit anything to it.
- Commit 1.0.1 fixes and patches to /branches/harbour-1.0 SVN dir.

ChangeLog:

Version 1.0.1 (2008-09-10)

General
=============================
- Digital Marc C build fixed.
- Debian, RPM packaging fixes.
- Several code quality enhancements, warning fixes.
- Doc quality fixes, formatting.
- Fixed so that build-time PRG_USR always overrides default
  options in GNU-make.
- Added openSUSE package requirements to doc/linux1st.txt.
- Unnecessary compiler options and lib dependencies cleaned
  from build processes.
- Fixed Darwin (OS X) builds broken due to a change shortly
  before 1.0.0.
- Non-critical filename casing related cleanups.
- Non-ASCII chars stripped from several source files for
  better portability.
- Added RDD regression test code.
- Fixed potential buffer overruns in PP, GTCRS, GTPCA,
  GTSTD, hbfbird, hbwhat32.
- Eliminated remaining non-safe string manipulation calls:
  strncpy(), strcpy() -> hb_strncpy()
  strncat(), strcat() -> hb_strncat()
- Some contrib name collisions fixed in non-GNU builds.
- gtalleg GT moved to the contrib area to enable it for
  non-GNU builds and non-*nix builds in general.
  Use HB_INC_ALLEGRO or HB_DIR_ALLEGRO (for non-GNU make only)
  to specify the location of the headers or the package
  (respectively).
- Harbour compiler now defaults to -gc0 switch (was -gc2) to
  generate the smallest possible .c output by default.
- Fixed to compile under Cygwin.
- -mno-cygwin option removed from MinGW builds. You may
  need to readd this to C_USR if you use very old MinGW compilers,
  like Cygnus MinGW32 2.95.
- Fixed WinCE harbour.dll generation in non-GNU builds.
- Fixed WinCE build warnings in non-GNU builds.
- Synced build options between BCC/MSVC GNU make and
  non-GNU make.
- Default HB_VISUALC_VER envvar value changed uniformly
  to 80 for both core and contrib and WinCE build in non-GNU make.
  You may need change your environment if you relied on the default.
- Non-GNU MSVC WinCE builds are now integrated into mainstream
  non-GNU MSVC make. make_vcce.bat was removed. Please read
  instructions in make_vc.bat, how to initiate a WinCE build.
- Now Harbour is able to build and run properly in MSVC C mode
  in AMD64 (64-bit) mode.
- Added experimental Pelles C WinCE GNU-make file. It doesn't
  yet work properly.
- Post batch file called from core non-GNU make files was
  renamed, please update your system if you're using them:
  exit_err.bat -> hbmkpost.bat
- Added experimental MSVC WinCE GNU-make file.
- Added Darwin autodetection to non-GNU .sh make files.
- Changed GNU-make name of MinGW WinCE compiler (HB_COMPILER)
  from 'cemgw' to 'mingwce'. Please update your system, if
  you've been using this directly (and not via make_*ce.sh scripts).
- Memory statistics module now turned off by default for optimal
  performance. It can be turned on by setting HB_FM_STATISTICS
  macro.

Core
=============================
- Added HB_LEGACY_LEVEL macro to control inclusion of
  certain deprecated Harbour elements. This macro is
  enabled by default, and will be disabled (and legacy
  parts probably removed) in Harbour 1.1. You can disable it
  now manually by #defining HB_LEGACY_LEVEL_OFF, in order to
  check what elements needs to be changed, and if they were
  properly and fully changed in your local code.
- HB_DBG_*() internal functions moved to the internal
  function namespace __DBG*(). Some of these - potentially
  used by 3rd party packages - are still accessible under
  the old name, when HB_LEGACY_LEVEL is #defined.
- Removed old __VM*() macros which were aliased to __DBG*()
  functions.
- Macro name change __EXPORT__ -> HB_DYNLIB
  This shouldn't normally affect users, but if you happen
  to use it, please update it.
- Some internal macro names changed as follows:
  OS_UNIX_COMPATIBLE *                -> HB_OS_UNIX_COMPATIBLE
  OS_DOS_COMPATIBLE                   -> ! 
defined( HB_OS_UNIX_COMPATIBLE )
  OS_PATH_LIST_SEPARATOR              -> HB_OS_PATH_LIST_SEP_CHR
  OS_PATH_DELIMITER *                 -> HB_OS_PATH_DELIM_CHR
  OS_PATH_DELIMITER_STRING            -> HB_OS_PATH_DELIM_STR
  OS_PATH_DELIMITER_LIST              -> HB_OS_PATH_DELIM_LIST
  OS_FILE_MASK                        -> HB_OS_ALLFILE_MASK
  OS_DRIVE_DELIMITER                  -> HB_OS_DRIVE_DELIM_CHR
  OS_HAS_DRIVE_LETTER                 -> HB_OS_HAS_DRIVE_LETTER
  OS_OPT_DELIMITER_LIST               -> HB_OS_OPT_DELIM_LIST
  OS_EOL_LEN                          -> HB_OS_EOL_LEN
  HARBOUR_GCC_OS2                     -> HB_OS_OS2_GCC
  HARBOUR_START_PROCEDURE             -> HB_START_PROCEDURE
  HARBOUR_MAIN_STD                    -> HB_MAIN_STD
  HARBOUR_MAIN_WIN                    -> HB_MAIN_WIN
  HARBOUR_MAX_RDD_DRIVERNAME_LENGTH * -> HB_RDD_MAX_DRIVERNAME_LEN
  HARBOUR_MAX_RDD_ALIAS_LENGTH *      -> HB_RDD_MAX_ALIAS_LEN
  HARBOUR_MAX_RDD_AREA_NUM            -> HB_RDD_MAX_AREA_NUM
  If you happen to use these, please update your code to use
  the new names. The more commonly used ones (marked with '*')
  are still available under the old name, covered with HB_LEGACY_LEVEL.
- hbmake and hbdoc tools reduction in size, several
  fixes, better multiplaform support and lots of code cleanups,
  especially in hbmake (still a long way to go though).
- Some names deprecated and replaced with new ones:
  FHANDLE      -> HB_FHANDLE
  EVALINFO     -> HB_EVALINFO
  PEVALINFO    -> PHB_EVALINFO
  EVALINFO_PTR -> marked as legacy, use PHB_EVALINFO instead.
  CLR_STRLEN   -> HB_CLRSTR_LEN
  All of these are marked with HB_LEGACY_LEVEL.
  Important to note that legacy Clipper compatible C
  sources may continue to use Clipper compatible symbols,
  regardless of the HB_LEGACY_LEVEL setting. It's advised
  to change these to Harbour-only C sources in preparation
  to the next Harbour major version (1.1).
- Marked hb_fileNameConv() as HB_LEGACY_LEVEL. 3rd party
  and app developers should switch to hb_fsNameConv().
- GTI_*, GFX_* macros marked as HB_LEGACY_LEVEL. Please use
  HB_GTI_*, HB_GFX_* equivalents.
- Fixed potential buffer overrun in hb_fsTempName().
  This got introduced shortly before 1.0.0.
- Debugger: Strip function name from module name used to initialize
  global and file wide variables. It fixes presenting file wide
  static variables in debugger.
- Removed hb_hInstance, hb_hPrevInstance, s_iCmdShow, s_WinMainParam
  old undocumented public variables. 3rd parties should use
  official hb_winmainArgGet() API to get these values.
  This feature is also HB_LEGACY_LEVEL dependent, therefore it will
  be finalized in 1.1, until then, old symbols will still work.
- Fixed _FIELD indirectly used as alias to generate the right RTE:
  ? ("_FIELD")->NAME, or:
  M->var := "_FIELD"; ? ("&var")->NAME
- Fixed OS() to detect Vista/Windows 2008. This bug got
  introduced in 1.0.0rc2.
- Fixed OS() string when run on Windows XP 64-bit Edition.
- Changed HB_COMPILER() to always show 32/64-bit in the
  returned string.
- Fixed GPFs and leaks when using Harbour compiler -w3 switch.
- Bad workaround added for Pelles C 5.00.1 in AMD64 mode to
  compile the Harbour 'inet' subsystem. It won't properly
  work, but it lets build the rest of Harbour (like hbrun.exe).
- PCRE lib upgraded to 7.8 (from 7.7)
- Fixed dbInfo( DBI_POSITIONED ) returned value.
- Fixed internal error in dirty index reading.
- Fixed return value of HB_INETGETSNDBUFSIZE().
- Fixed GPF when user sort code block reduces the size of sorted array.
- Fixed typo in hash cloning code which caused that references
  was copied to cloned array. Thanks to Mindaugas for example.
- Added missing MESSAGE <MessageName> TO <oObject> to hbclass.ch.

Contrib
=============================
- hbmzip potential GPF fixed in executable type detection.
- General code style fixes in certain contribs.
- Harbour -km switch enabled for contribs.
- hbmysql SQLFETCHR() function updated to allow fetching
  binary (BLOB) fields.
- hbclipsm GAUGE*() function fixes.
- gtalleg fixed to compile under several non-*nix platforms
  (still needs more work).
- xhb: HB_ARRAYBLOCK() compatibility function added.
- hbnf FT_GETE() function bad leak fixed on Win32 systems,
  and potential GPF on all systems.
- hbwhat32 removed wintypes.ch header. Header with the same
  name and identical content can be found in xhb contrib.
- hbct VOLUME() buffer overrun fixed.
- hbole GPF fixed. This bug got introduced in 1.0.0rc2.
- hbole, hbw32 64-bit fix for MESSAGEBOX() functions. It now
  allows for both pointer and numeric types to be passed as
  a window handle.
- hbwhat32 fixed to not define WinMain() and also not to
  collide with certain Harbour public symbols.
- hbw32 unnecessary memory allocation hacks removed from
  OLE support.
- Using ANSI C comments more consistently in contribs.
- hbct / atnum.c changed to workaround a compiler bug in
  Pelles C 5.00.1 in AMD64 mode.
- hbole modified to generate RTE when OLE object cannot
  be found, to be in sync with hbw32 OLE implementation.
- hbbtree fixed scope problem in class, causing an RTE.
  Added build batch files for its tests.
- Remaining code (hbwhat32, hbnf) fixed to always use
  Harbour C API, instead of legacy Clipper C API (*.api,
  clipdefs.h and extend.h).
- hbsqlit2 lib was moved to examples and sqlite2 sources
  removed. Please use hbsqlit3 instead.
- hbziparch heavy rework/refactor/reduce/fixing effort,
  what resulted in hbziparc, which implements the same old
  ZipArchive interface with similar functionality (except
  progress codeblock callbacks unzip functions and .zip
  spanning feature), now rewritten in Harbour. If you need
  to use this API, please change hbziparch to hbziparc and
  link in hbmzip library, too. In contrary to old
  implementation, this new one is completely portable and
  fixes some potential leaks and GPFs. This code could use
  some more testing, be aware.
- hbbmcdx fixed internal error in dirty index reading.
- hbcurl added support for libcurl 7.19.0 features.
- hbhpdf added support for libharu 2.1.0.
- Fixed so that contrib source files cannot collide with each
  other when building them using the non-GNU make system.
- Former hbwhat32 lib added to the default contrib list
  under the name of hbwhat, compilation was fully cleaned
  and fixed to support Win64 platform. INTERNETREADFILE(),
  INTERNETWRITEFILE() functions were fixed. what32.ch renamed
  to hbwhat.ch.
- hbhpdf fixed HPDF_ADDPAGELABEL().
- hbw32 got a new COM port handling class and API.
- gtwvg got some enhancements and 64-bit compatibility fixes.
  A critical 1.0.0 bug was also fixed, which could cause
  dialogs to not appear.
- hbfimage fixed to compile with Watcom compilers.

Known build issues
=============================
- Windows 64-bit builds may generate a large amount of type
  conversion warnings. This is currently normal and will be
  addressed in a future version.
- Contrib hbfimage won't currently compile on Linux systems.
  This will be addressed in a future version.
- Contrib hbsqlit3 will not embed foreign sqlite3 library code
  for Pelles C 4.5 and Open Watcom 1.7 due to fatal compile problems.
  For these compilers you will have to supply sqlite3 library
  yourself. For other compilers, some warnings are expected and
  normal in this non-Harbour code.
- Using Pelles C 5.00.1 in 64-bit mode, HB_INET*() functions
  won't work.
- gtalleg, hbwhat contrib may not compile on all platforms/compilers.
- hbcurl won't build when using DMC and libcurl 7.19.0.
  Earlier versions build okay.


Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Wed Sep 17 15:40:45 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Sep 17 15:40:53 2008
Subject: [Harbour] Tagged: Harbour 1.0.1 (r9429)
In-Reply-To: <ADC4A068-C546-4A65-938F-503CD3F36752@syenar.hu>
References: <ADC4A068-C546-4A65-938F-503CD3F36752@syenar.hu>
Message-ID: <9257026e0809171240j19029021wafb83374ad39249b@mail.gmail.com>

On Wed, Sep 17, 2008 at 8:22 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> I've tagged Harbour release 1.0.1 (r9429).
> I'll upload sources and some binaries soon.
>
> URL:
> https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/tags/harbour-1.0.0
> ...

Good job, many thanks.

best regards,
Lorenzo
From lkrausem at shaw.ca  Wed Sep 17 16:00:39 2008
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Wed Sep 17 16:00:48 2008
Subject: [Harbour] 2008-09-17 18:38 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080917163901.GA4864@34-mo7-2.acn.waw.pl>
References: <20080917163901.GA4864@34-mo7-2.acn.waw.pl>
Message-ID: <48D161E7.7070404@shaw.ca>

Przemek:

Thanks!  This also fixes the GPF I mentioned over the weekend.
This is an ST app that uses ADS and with your fix no more GPF
upon closing the app.

> 2008-09-17 18:38 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> [snip]
>   * harbour/source/vm/set.c
>     ! fixed GPF when set listeners were removed
>
>   

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From e.m.giordano at emagsoftware.it  Wed Sep 17 16:13:17 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Sep 17 16:13:26 2008
Subject: [Harbour] Release 1.0.1 #7
References: <BF63172D-644F-4F60-A2C8-3F3AADD01BC4@syenar.hu>
Message-ID: <741FDB8D8F734C4D829A0398DA0CD143@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoled? 17 settembre 2008 13.38
Oggetto: [Harbour] Release 1.0.1 #7


> Hi all,
>
> Anyone by any chance could do a WinCE build test
> on Windows?

Can I use

Microsoft (R) C/C++ Optimizing Compiler Version 12.20.9615 for ARM
Copyright (C) Microsoft Corp 1984-2002. All rights reserved.

to build Harbour for WinCE? If yes, how? I tried adding

set HB_BUILD_WINCE=yes
set HB_CC_NAME=vcce
set HB=C:\your_harbour_windows_binaries\harbour.exe
set HBPP=C:\your_harbour_windows_binaries\hbpp.exe

to my compile batch without good result. It seems I don't have nmake.exe and 
the build process requires it.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Wed Sep 17 16:16:58 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 16:17:02 2008
Subject: [Harbour] 2008-09-17 22:15 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91902$Blat.v2.6.2$5605e268$1038ede1f6fa@127.0.0.1>

2008-09-17 22:15 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/rddado/adordd.prg
    ! Marking one STATIC var as thread STATIC.
    ; BTW, this should be revised for whole contrib .prg code.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Wed Sep 17 16:18:29 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 17 16:19:02 2008
Subject: [Harbour] Re: Release 1.0.1 #1
In-Reply-To: <48D0B4A3.9050400@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48D0B4A3.9050400@mail.udg.mx>
Message-ID: <20080917201829.GA28124@34-mo7-2.acn.waw.pl>

On Wed, 17 Sep 2008, David Arturo Macias Corona wrote:

Hi David,

> It build hbvmmt.a without warnings, thanks
> Now Harbour is multithread in OS/2 ?  :-)

Thank you very much for your tests.
It means that we have working MT in OS/2.

> b) speedtst.prg
> ST without HB_FM_STATISTICS_OFF and using hbrun speedtst.prg
>  total application time:                              53.30
> ST
>  total application time:                              46.77
> MT
>  total application time:                             135.88
> does not show too much difference between both ST but large with MT

It's caused by two reasons:
1. In OS2 builds we do not have any atomic inc/dec operations
   so mutexes are used to protect references counters. It's hardly
   visible in:
      ST: c:=L_C ->     0.10
      MT: c:=L_C ->     1.19
   Because OS/2 uses GCC then we should be able to use the same
   macros as for PTHREAD base MT Harbour builds for x86 machines.
   I'll add them ASAP. Please test, you should find noticeable speed
   improvement. Looks that mutexes are very expensive in OS/2.
2. The cost of TLS access. I cannot say yet how much is it yet
   because it can be hidden by the mutexes used in reference counters
   but this results:
      ST: empty loops overhead =    0.14
      MT: empty loops overhead =    0.23
   suggest it's not such big. It can reduced by using stack macros
   also for OS/2 MT builds. It can be quite easy done because OS2
   uses a little bit specific method of accessing TLS data. I'll
   make it in next step when I will know the results for eliminating
   mutexes from references counters.

The memory memtest.prg mat not crash in MT mode due to different
memory allocations. It's nothing amazing and does not make the
memory manager provided by your C compiler better :-( Important
is that it can crash in some quite simple situations. I suggest
to make some test with alternative MM I'll commit ASAP.

Once again thank you for your tests.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Wed Sep 17 16:49:50 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Sep 17 16:49:55 2008
Subject: [Harbour] Tagged: Harbour 1.0.1 (r9429) [CORRECTED]
In-Reply-To: <9F16F1DF-5641-421F-82A8-B958153953DD@syenar.hu>
References: <9F16F1DF-5641-421F-82A8-B958153953DD@syenar.hu>
Message-ID: <9257026e0809171349i447034aembc792a2171c2b6fe@mail.gmail.com>

On Wed, Sep 17, 2008 at 9:36 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> I've tagged Harbour release 1.0.1 (r9429).
> I'll upload sources and some binaries soon.

I've just built the rpms under Fedora 9 using a fresh user and a clean
env after a svn checkout ( no local modifications ).

Tell me if you want them.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Wed Sep 17 16:50:33 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 16:50:43 2008
Subject: [Harbour] Release 1.0.1 #7
In-Reply-To: <741FDB8D8F734C4D829A0398DA0CD143@emag>
References: <BF63172D-644F-4F60-A2C8-3F3AADD01BC4@syenar.hu>
	<741FDB8D8F734C4D829A0398DA0CD143@emag>
Message-ID: <CE0BD461-0783-45F6-AA67-C481300A3C0F@syenar.hu>

Hi Enrico,

> to build Harbour for WinCE? If yes, how? I tried adding

You probably can, but I don't know how to
configure MSVS 2008 to make that. There are
probably materials on that on the internet.

> set HB_BUILD_WINCE=yes
> set HB_CC_NAME=vcce
> set HB=C:\your_harbour_windows_binaries\harbour.exe
> set HBPP=C:\your_harbour_windows_binaries\hbpp.exe
>
> to my compile batch without good result. It seems I don't have  
> nmake.exe and the build process requires it.

I'm afraid I cannot help more than the above.
nmake.exe seems to be needed for this process,
this didn't change compared to 1.0.0.

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep 17 16:53:34 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 16:53:43 2008
Subject: [Harbour] BUG: OSX 64-bit hbtest failures (non-critical)
Message-ID: <2BE56DAA-2A7A-45D8-B4C8-37E6972EAF88@syenar.hu>

Hi all,

Just tested with 1.0.1:
---
Harbour Regression Test Suite
Copyright (c) 1999-2008, http://www.harbour-project.org/
---------------------------------------------------------------------------
       Version: Harbour 1.0.1 Intl. (Rev. 9429)
      Compiler: GNU C 4.0.1 (64 bit)
            OS: Darwin 9.5.0 i386
    Date, Time: 2008.09.17 22:30:45
        Output: (stdout)
Shortcut opt.: ON
      Switches:
=
=
=
========================================================================
R No.  Line            TestCall()                               ->  
Result 
                                                                                 | 
  Expected
---------------------------------------------------------------------------
...
! 1266 MAIN_STR(66)    Str(R_PASSENL(  1860637360 ))
        Result: "1860637360"
      Expected: "          1860637360"
! 1269 MAIN_STR(69)    Str(R_PASSENL(  1000000000 ))
        Result: "1000000000"
      Expected: "          1000000000"
! 1270 MAIN_STR(70)    Str(R_PASSENL(  2147483647 ))
        Result: "2147483647"
      Expected: "          2147483647"
! 1271 MAIN_STR(71)    Str(R_PASSENL(  2147483648 ))
        Result: "2147483648"
      Expected: "         -2147483648"
! 1277 MAIN_STR(78)    Str(R_PASSENLC())
        Result: "1000000000"
      Expected: "          1000000000"
...
= 
= 
= 
========================================================================
Test calls passed:       4678 ( 99.38 % )
Test calls failed:         29 ( 0.62 % )
                    ----------
             Total:       4707 ( Time elapsed: 0.07 seconds )

WARNING ! Failures detected
---

Brgds,
Viktor

From a.jurkiewicz at abix.info.pl  Wed Sep 17 16:56:32 2008
From: a.jurkiewicz at abix.info.pl (ABIX - Adam Jurkiewicz)
Date: Wed Sep 17 16:56:41 2008
Subject: [Harbour] RPM for 1.0.1 openSUSE
Message-ID: <200809172256.32522.a.jurkiewicz@abix.info.pl>

As usualy I've made RPMs for openSUSE 10.3, availble at:
http://www.abix.info.pl/kompilator-harbour,56.html

best regards,
Adam
-- 
ABIX - Linuksowe Systemy Wspomagania Biznesu www.abix.info.pl
Gadu-Gadu: 302315
Skype: abix_adamj 
Wsparcie aplikacji: http://groups-beta.google.com/group/abix-rcsoft?hl=pl
From harbour.01 at syenar.hu  Wed Sep 17 17:32:00 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 17:32:10 2008
Subject: [Harbour] Tagged: Harbour 1.0.1 (r9429) [CORRECTED]
In-Reply-To: <9257026e0809171349i447034aembc792a2171c2b6fe@mail.gmail.com>
References: <9F16F1DF-5641-421F-82A8-B958153953DD@syenar.hu>
	<9257026e0809171349i447034aembc792a2171c2b6fe@mail.gmail.com>
Message-ID: <8C5DE8D7-59CD-404A-A0D2-85BFD28AD0F4@syenar.hu>

Hi Lorenzo,

On 2008.09.17., at 22:49, Lorenzo Fiorini wrote:

> On Wed, Sep 17, 2008 at 9:36 PM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
>> I've tagged Harbour release 1.0.1 (r9429).
>> I'll upload sources and some binaries soon.
>
> I've just built the rpms under Fedora 9 using a fresh user and a clean
> env after a svn checkout ( no local modifications ).
>
> Tell me if you want them.

Great, of course. Can you upload them to sf.net directly?
(I've enabled this option for your on the members page)

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep 17 17:34:19 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 17:34:28 2008
Subject: [Harbour] RPM for 1.0.1 openSUSE
In-Reply-To: <200809172256.32522.a.jurkiewicz@abix.info.pl>
References: <200809172256.32522.a.jurkiewicz@abix.info.pl>
Message-ID: <18EB3A78-ABDA-410A-A064-C3313F1413A7@syenar.hu>

Hi Adam,

Thanks. May I add you to the Harbour members list,
so that you can directly upload this to our sf.net dl page?

Brgds,
Viktor

On 2008.09.17., at 22:56, ABIX - Adam Jurkiewicz wrote:

> As usualy I've made RPMs for openSUSE 10.3, availble at:
> http://www.abix.info.pl/kompilator-harbour,56.html
>
> best regards,
> Adam
> -- 
> ABIX - Linuksowe Systemy Wspomagania Biznesu www.abix.info.pl
> Gadu-Gadu: 302315
> Skype: abix_adamj
> Wsparcie aplikacji: http://groups-beta.google.com/group/abix-rcsoft?hl=pl
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Wed Sep 17 18:16:32 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 17 18:17:03 2008
Subject: [Harbour] BUG: OSX 64-bit hbtest failures (non-critical)
In-Reply-To: <2BE56DAA-2A7A-45D8-B4C8-37E6972EAF88@syenar.hu>
References: <2BE56DAA-2A7A-45D8-B4C8-37E6972EAF88@syenar.hu>
Message-ID: <20080917221632.GA7894@34-mo7-2.acn.waw.pl>

On Wed, 17 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Harbour Regression Test Suite
> Copyright (c) 1999-2008, http://www.harbour-project.org/
> ---------------------------------------------------------------------------
>       Version: Harbour 1.0.1 Intl. (Rev. 9429)
>      Compiler: GNU C 4.0.1 (64 bit)
>            OS: Darwin 9.5.0 i386
>    Date, Time: 2008.09.17 22:30:45
>        Output: (stdout)
> Shortcut opt.: ON
>      Switches:
> ========================================================================
> R No.  Line            TestCall()                               -> Result   
>                                                                             
>  | Expected
> ---------------------------------------------------------------------------
> ...
> ! 1266 MAIN_STR(66)    Str(R_PASSENL(  1860637360 ))
>        Result: "1860637360"
>      Expected: "          1860637360"
> ! 1269 MAIN_STR(69)    Str(R_PASSENL(  1000000000 ))
>        Result: "1000000000"
>      Expected: "          1000000000"
> ! 1270 MAIN_STR(70)    Str(R_PASSENL(  2147483647 ))
>        Result: "2147483647"
>      Expected: "          2147483647"
> ! 1271 MAIN_STR(71)    Str(R_PASSENL(  2147483648 ))
>        Result: "2147483648"
>      Expected: "         -2147483648"
> ! 1277 MAIN_STR(78)    Str(R_PASSENLC())
>        Result: "1000000000"
>      Expected: "          1000000000"

It's normal. Just simply [U]LONG is 64 bit integer on all "normal" 64-bit
platforms and you hard coded in the above tests 32bit LONG behavior :-)
I thought you made it intentionally.
The results are perfectly valid and expected. Only Win64 has 32 bit LONG.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Sep 17 18:39:04 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 18:39:14 2008
Subject: [Harbour] BUG: OSX 64-bit hbtest failures (non-critical)
In-Reply-To: <20080917221632.GA7894@34-mo7-2.acn.waw.pl>
References: <2BE56DAA-2A7A-45D8-B4C8-37E6972EAF88@syenar.hu>
	<20080917221632.GA7894@34-mo7-2.acn.waw.pl>
Message-ID: <548FA816-83BA-46EF-8185-3A8E00957B43@syenar.hu>

>>
Hi Przemek,

>> ! 1266 MAIN_STR(66)    Str(R_PASSENL(  1860637360 ))
>>       Result: "1860637360"
>>     Expected: "          1860637360"
>> ! 1269 MAIN_STR(69)    Str(R_PASSENL(  1000000000 ))
>>       Result: "1000000000"
>>     Expected: "          1000000000"
>> ! 1270 MAIN_STR(70)    Str(R_PASSENL(  2147483647 ))
>>       Result: "2147483647"
>>     Expected: "          2147483647"
>> ! 1271 MAIN_STR(71)    Str(R_PASSENL(  2147483648 ))
>>       Result: "2147483648"
>>     Expected: "         -2147483648"
>> ! 1277 MAIN_STR(78)    Str(R_PASSENLC())
>>       Result: "1000000000"
>>     Expected: "          1000000000"
>
> It's normal. Just simply [U]LONG is 64 bit integer on all "normal"  
> 64-bit
> platforms and you hard coded in the above tests 32bit LONG  
> behavior :-)
> I thought you made it intentionally.
> The results are perfectly valid and expected. Only Win64 has 32 bit  
> LONG.

Well, sorry, I'm almost brain-dead (just like when posting the
above), so I'm not sure if I will be able to give any proper fix
for this one right now :/

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Sep 17 19:17:22 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 17 19:17:55 2008
Subject: [Harbour] 2008-09-18 01:17 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080917231722.GA30182@34-mo7-2.acn.waw.pl>

2008-09-18 01:17 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/fm.c
  + harbour/source/vm/dlmalloc.c
    + added alternative memory manager written by Doug Lea
      It can be activated by recompiling Harbour with HB_FM_DL_ALLOC macro.
      Please make test on different platforms with different C compilers.
      Linux users will not benefit from it because the default GLIBC MM
      is derived from a version of code.
      NOTE: the results may strongly depend on total memory allocation
      and will be different then in simple memory tests.

best regards
Przemek
From toninhofwi at yahoo.com.br  Wed Sep 17 20:33:11 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Sep 17 20:26:48 2008
Subject: [Harbour] 2008-09-18 01:17 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080917231722.GA30182@34-mo7-2.acn.waw.pl>
References: <20080917231722.GA30182@34-mo7-2.acn.waw.pl>
Message-ID: <r883d4lr7gdrf79lgv8a62fetqdr2h9t23@4ax.com>

>      Please make test on different platforms with different C compilers.

Hi Przemek,

With bcc 6.10 and windows XP is working very nice, speedtst down 6
seconds and my application seems more 'light'... I don't know why...

Thanks and best reards,

Toninho.
__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From dmacias at mail.udg.mx  Wed Sep 17 22:39:20 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Sep 17 22:39:26 2008
Subject: [Harbour] Harbour 1.0.1 binaries for OS/2-eCS
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48D1BF58.4080003@mail.udg.mx>

Harbour 1.0.1 binaries file for OS/2-eComStation are available in Harbour
download page

as harbour-1.0.1.bin-os2.gcc.zip

Include Harbour libraries for:
- MySQL 5.1.23 ( hbmysql.a )
- Postgres 8.1.4 ( hbpgsql.a )
- cUrl 7.18.1 ( hbcurl.a )

All packages from Paul Smedley site:
http://www.smedley.info/os2ports/index.php

David Macias



From harbour.01 at syenar.hu  Wed Sep 17 23:05:14 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 17 23:05:25 2008
Subject: [Harbour] 1.0.1 builds uploaded
Message-ID: <0D15A67D-DF7B-4AE2-AF44-F811636B5DA3@syenar.hu>

Source:
	harbour-1.0.1-src.zip
	harbour-1.0.1.tar.bz2
	harbour-1.0.1.tar.gz
	harbour-1.0.1-0.src.rpm
Ubuntu:
	harbour_1.0.1-1_i386.deb
OpenSUSE:
	harbour-1.0.1-0.i586.rpm
	harbour-static-1.0.1-0.i586.rpm
	harbour-lib-1.0.1-0.i586.rpm
	harbour-contrib-1.0.1-0.i586.rpm
	harbour-ads-1.0.1-0.i586.rpm
	harbour-gd-1.0.1-0.i586.rpm
	harbour-hbhpdf-1.0.1-0.i586.rpm
	harbour-mysql-1.0.1-0.i586.rpm
	harbour-odbc-1.0.1-0.i586.rpm
	harbour-pgsql-1.0.1-0.i586.rpm
OSX:
	harbour-1.0.1-darwin_9.5.0.bin.tar.gz
Windows:
	harbour-1.0.1-win32-bcc551.zip
	harbour-1.0.1-win32-bcc582.zip
	harbour-1.0.1-win32-cygwin344.zip
	harbour-1.0.1-win32-dmc450.zip
	harbour-1.0.1-win32-mingw345.zip
	harbour-1.0.1-win32-mingw412.zip
	harbour-1.0.1-win32-mingw432.zip
	harbour-1.0.1-win32-msvs2005.zip
	harbour-1.0.1-win32-msvs2005cpp.zip
	harbour-1.0.1-win32-msvs2008.zip
	harbour-1.0.1-win32-msvs2008cpp.zip
	harbour-1.0.1-win32-owatcom17.zip
	harbour-1.0.1-win32-pellesc45.zip
	harbour-1.0.1-win32-pellesc50.zip
	harbour-1.0.1-win64-msvs2008.zip
	harbour-1.0.1-win64-msvs2008cpp.zip
	harbour-1.0.1-win64-pellesc50.zip
DOS:
	HB101.zip

Brgds,
Viktor

From hbco2 at sbcglobal.net  Thu Sep 18 00:49:05 2008
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Thu Sep 18 00:49:12 2008
Subject: [Harbour] RPM for 1.0.1 openSUSE
In-Reply-To: <200809172256.32522.a.jurkiewicz@abix.info.pl>
References: <200809172256.32522.a.jurkiewicz@abix.info.pl>
Message-ID: <1221713345.6846.5.camel@hblx.340cst>

Hi Adam,

I have downloaded and installed the rpm's from your site.  Attempting to
compile speedtst.prg using hbmk yielded the following:

/usr/lib/gcc/i586-suse-linux/4.2.1/../../../../i586-suse-linux/bin/ld:
cannot find -lx11

This is apparently from the following line in hbmk:

if [ "${HB_WITHOUT_X11}" != "yes" ]; then
    if [ -f "${HB_LIB_INSTALL}/libgtxvt.a" ] || [ -f
"${HB_LIB_INSTALL}/libgtxwc.a" ]; then
        [ -d "/usr/X11R6/lib64" ] && SYSTEM_LIBS="${SYSTEM_LIBS}
-L/usr/X11R6/lib64"
        SYSTEM_LIBS="-L/usr/X11R6/lib -lX11 ${SYSTEM_LIBS}"
    fi

/usr/X11R6 exists, but the directory is empty.  Which X11 library is
missing,would it be xorg-x11-devel?

Bill



On Wed, 2008-09-17 at 22:56 +0200, ABIX - Adam Jurkiewicz wrote:
> As usualy I've made RPMs for openSUSE 10.3, availble at:
> http://www.abix.info.pl/kompilator-harbour,56.html
> 
> best regards,
> Adam

From bedipritpal at hotmail.com  Thu Sep 18 01:08:14 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Sep 18 01:08:20 2008
Subject: [Harbour] 2008-09-18 01:17 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080917231722.GA30182@34-mo7-2.acn.waw.pl>
References: <20080917231722.GA30182@34-mo7-2.acn.waw.pl>
Message-ID: <19546034.post@talk.nabble.com>


Hello Przemek


Przemyslaw Czerpak-2 wrote:
> 
> 2008-09-18 01:17 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/vm/fm.c
>   + harbour/source/vm/dlmalloc.c
>     + added alternative memory manager written by Doug Lea
>       It can be activated by recompiling Harbour with HB_FM_DL_ALLOC
> macro.
>       Please make test on different platforms with different C compilers.
>       Linux users will not benefit from it because the default GLIBC MM
>       is derived from a version of code.
>       NOTE: the results may strongly depend on total memory allocation
>       and will be different then in simple memory tests.
> 

It has solved mem problem as I had reported earlier.

Function Main() 
   Local i 
   Local aRecs := {} 

   for i := 1 to 100000 
      aadd( aRecs, {} ) 
      ? i 
   next 

   Return nil 

Now if it is like

   for i := 1 to 1000000  // 1 million
      aadd( aRecs, {} ) 
      ? i 
   next 

application does not crash. I could probably FEEL application
has become more fast, though I have no benchmarks.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/2008-09-18-01%3A17-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp19543179p19546034.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Thu Sep 18 01:23:30 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 18 01:24:02 2008
Subject: [Harbour] 2008-09-18 07:21 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080918052330.GA25979@34-mo7-2.acn.waw.pl>

2008-09-18 07:21 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbthread.h
    * use assembler version of atomic inc/dec operation in all x86 based
      GCC builds - it should noticeable improve OS2 MT build speed,
      please test.

  * harbour/include/hbcomp.h
  * harbour/include/hbapicdp.h
  * harbour/include/hbcompdf.h
  * harbour/include/hbgtcore.h
  * harbour/include/hbapifs.h
  * harbour/include/hbwince.h
  * harbour/include/hbexpra.c
  * harbour/include/hbexprop.h
  * harbour/include/hbmacro.h
  * harbour/include/hbapigt.h
  * harbour/include/hbapi.h
  * harbour/include/hbapiitm.h
  * harbour/include/hbexprb.c
  * harbour/source/pp/ppcore.c
  * harbour/source/pp/hbpp.c
  * harbour/source/vm/macro.c
  * harbour/source/vm/cmdarg.c
  * harbour/source/vm/arrays.c
  * harbour/source/vm/extrap.c
  * harbour/source/vm/memvars.c
  * harbour/source/vm/eval.c
  * harbour/source/vm/extend.c
  * harbour/source/vm/set.c
  * harbour/source/main/harbour.c
  * harbour/source/common/hbfsapi.c
  * harbour/source/common/reserved.c
  * harbour/source/common/expropt1.c
  * harbour/source/macro/macro.yyc
  * harbour/source/macro/macro.y
  * harbour/source/macro/macro.yyh
  * harbour/source/macro/macrolex.c
  * harbour/source/rtl/gtdos/gtdos.c
  * harbour/source/rtl/gtwin/gtwin.c
  * harbour/source/rtl/gtxwc/gtxwc.c
  * harbour/source/rtl/gtos2/gtos2.c
  * harbour/source/rtl/hbgtcore.c
  * harbour/source/rtl/cdpapi.c
  * harbour/source/rtl/gtcrs/gtcrs.c
  * harbour/source/rtl/hbtoken.c
  * harbour/source/rtl/gtchrmap.c
  * harbour/source/rtl/gtstd/gtstd.c
  * harbour/source/rtl/gtsln/mousesln.c
  * harbour/source/rtl/gtsln/gtsln.c
  * harbour/source/rtl/gtsln/kbsln.c
  * harbour/source/rtl/gttrm/gttrm.c
  * harbour/source/rtl/gtpca/gtpca.c
  * harbour/source/rtl/hbhex.c
  * harbour/source/rtl/gtgui/gtgui.c
  * harbour/source/rtl/gt_tpl/gt_tpl.c
  * harbour/source/rtl/gtcgi/gtcgi.c
  * harbour/source/rtl/gtwvt/gtwvt.c
  * harbour/source/rtl/strtran.c
  * harbour/source/rtl/hbinet.c
  * harbour/source/rtl/gtapi.c
  * harbour/source/rtl/filesys.c
  * harbour/source/rdd/dbfntx/dbfntx1.c
  * harbour/source/rdd/dbsql.c
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
  * harbour/source/rdd/dbffpt/dbffpt1.c
  * harbour/source/rdd/hbsix/sxfname.c
  * harbour/source/compiler/ppcomp.c
  * harbour/source/compiler/hbmain.c
  * harbour/source/compiler/cmdcheck.c
  * harbour/source/compiler/hbdbginf.c
  * harbour/source/compiler/genc.c
  * harbour/source/compiler/hbident.c
  * harbour/source/compiler/hbusage.c
  * harbour/source/compiler/gencc.c
  * harbour/source/compiler/harbour.yyc
  * harbour/source/compiler/harbour.y
  * harbour/contrib/gtalleg/gtalleg.c
  * harbour/contrib/hbct/charlist.c
  * harbour/contrib/hbct/charmix.c
  * harbour/contrib/hbct/screen1.c
  * harbour/contrib/hbct/atrepl.c
  * harbour/contrib/xhb/hboutdbg.c
  * harbour/contrib/xhb/hbxml.c
  * harbour/contrib/xhb/hbxml.h
  * harbour/contrib/hbgt/strexpan.c
  * harbour/contrib/hbsqlit3/sqlite3/sqlite3.c
  * harbour/contrib/gtwvg/gtwvg.c
  * harbour/contrib/hbclipsm/status.c
  * harbour/contrib/hbclipsm/gauge.c
  * harbour/contrib/hbmisc/stringsx.c
  * harbour/contrib/hbtip/utils.c
  * harbour/contrib/hbgf/hbgfgtk/msginfo.c
  * harbour/contrib/hbgf/hbgfgtk/harbgtk.h
  * harbour/contrib/hbbmcdx/bmdbfcdx.c
  * harbour/utils/hbmake/hbmgauge.c
    * use const char * instead of char * in places which should be marked
      as const

best regards
Przemek
From lorenzo.fiorini at gmail.com  Thu Sep 18 01:49:55 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep 18 01:50:01 2008
Subject: [Harbour] 1.0.1 rpms for Fedora 9 uploaded
Message-ID: <9257026e0809172249l254e850tc982126b4444a775@mail.gmail.com>

I plan to do the same for Centos 5.2 asap.

best regards,
Lorenzo
From druzus at acn.waw.pl  Thu Sep 18 01:56:20 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 18 01:56:51 2008
Subject: [Harbour] 2008-09-18 07:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080918055620.GA8446@34-mo7-2.acn.waw.pl>

2008-09-18 07:55 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/cdpapi.c
    * explicit casting to char * in 1-st strchr() parameter as workaround
      for wrong function prototype in DMC header files

best regards
Przemek
From lorenzo.fiorini at gmail.com  Thu Sep 18 02:26:54 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep 18 02:26:59 2008
Subject: [Harbour] 2008-09-18 07:21 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080918052330.GA25979@34-mo7-2.acn.waw.pl>
References: <20080918052330.GA25979@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809172326y54ac01d6o93b4b7a56a4530ff@mail.gmail.com>

On Thu, Sep 18, 2008 at 7:23 AM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> 2008-09-18 07:21 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbthread.h
>    * use assembler version of atomic inc/dec operation in all x86 based
>      GCC builds - it should noticeable improve OS2 MT build speed,
>      please test.
> ...
>  * harbour/utils/hbmake/hbmgauge.c
>    * use const char * instead of char * in places which should be marked
>      as const

Under Fedora 9 I get this.

../../hboutdbg.c: In function 'debugInit':
../../hboutdbg.c:109: error: assignment of read-only location
'*(pFileName->szName + 20u)'

Any idea?

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Thu Sep 18 02:30:37 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep 18 02:30:46 2008
Subject: [Harbour] 2008-09-18 07:21 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0809172326y54ac01d6o93b4b7a56a4530ff@mail.gmail.com>
References: <20080918052330.GA25979@34-mo7-2.acn.waw.pl>
	<9257026e0809172326y54ac01d6o93b4b7a56a4530ff@mail.gmail.com>
Message-ID: <9257026e0809172330p90a80a8t217fc7a33a854d80@mail.gmail.com>

On Thu, Sep 18, 2008 at 8:26 AM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com> wrote:

> Under Fedora 9 I get this.
>
> ../../hboutdbg.c: In function 'debugInit':
> ../../hboutdbg.c:109: error: assignment of read-only location
> '*(pFileName->szName + 20u)'

Sorry, it's ok. svn problems.

best regards,
Lorenzo
From sscc at mweb.co.za  Thu Sep 18 03:24:41 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Sep 18 03:25:04 2008
Subject: [Harbour] Tagged: Harbour 1.0.1 (r9429)
In-Reply-To: <ADC4A068-C546-4A65-938F-503CD3F36752@syenar.hu>
References: <ADC4A068-C546-4A65-938F-503CD3F36752@syenar.hu>
Message-ID: <48D20239.3020207@mweb.co.za>

Szak?ts Viktor wrote:

> 
> I've tagged Harbour release 1.0.1 (r9429).
> I'll upload sources and some binaries soon.

Thanks very much.

Is the process to upload binaries detailed anywhere?

Regards
Alex
From dmacias at mail.udg.mx  Thu Sep 18 03:50:27 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Sep 18 03:50:30 2008
Subject: [Harbour] Re: 2008-09-18 01:17 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48D20843.7000208@mail.udg.mx>

Przemek:

 >2008-09-18 01:17 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
 >  * harbour/source/vm/fm.c
 >  + harbour/source/vm/dlmalloc.c
 >    + added alternative memory manager written by Doug Lea
 >      It can be activated by recompiling Harbour with HB_FM_DL_ALLOC 
 >macro.
 >      Please make test on different platforms with different C >compilers.
 >      Linux users will not benefit from it because the default GLIBC MM
 >      is derived from a version of code.
 >      NOTE: the results may strongly depend on total memory allocation
 >      and will be different then in simple memory tests.

Below are results of current Harbour under eComStation 1.2MR
gcc 3.3.5

set C_USR=-DHB_FM_STATISTICS_OFF -DHB_FM_DL_ALLOC

errors in dlmalloc.c

David Macias


../../gtstd.c: In function `hb_gt_std_ReadKey':
../../gtstd.c:389: warning: unused variable `TODO'
In file included from ../../fm.c:117:
../../dlmalloc.c: In function `mmap_alloc':
../../dlmalloc.c:3120: error: `MAP_PRIVATE' undeclared (first use in 
this functi
on)
../../dlmalloc.c:3120: error: (Each undeclared identifier is reported 
only once
../../dlmalloc.c:3120: error: for each function it appears in.)
../../dlmalloc.c: In function `sys_alloc':
../../dlmalloc.c:3417: error: `MAP_PRIVATE' undeclared (first use in 
this functi
on)
../../dlmalloc.c: In function `release_unused_segments':
../../dlmalloc.c:3537: warning: implicit declaration of function `munmap'
make[3]: *** [fm.o] Error 1
make[2]: *** [descend] Error 2
E:/usr/i386-pc-os2-emx/bin/ld.exe: No such file or directory for hbvm
make[3]: *** [hbrun.exe] Error 1
make[2]: *** [descend] Error 2
[...]
From tomaz.zupan at orpo.si  Thu Sep 18 03:52:29 2008
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Thu Sep 18 03:52:39 2008
Subject: [Harbour] 1.0.1 for Mandriva 2008.1 uploaded
In-Reply-To: <48D20239.3020207@mweb.co.za>
References: <ADC4A068-C546-4A65-938F-503CD3F36752@syenar.hu>
	<48D20239.3020207@mweb.co.za>
Message-ID: <200809180952.29397.tomaz.zupan@orpo.si>

Anyone needeing rpms for older mandriva releases should build from source or 
srpm.

Lp, Toma?

From harbour.01 at syenar.hu  Thu Sep 18 04:22:18 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 18 04:22:30 2008
Subject: [Harbour] MSVS 2008: error with new alloc
Message-ID: <05579321-71DF-474A-8416-62DE5F0BBEB5@syenar.hu>

Hi all,

Maybe unrelated, but I'm getting this (on the command line)
with MSVS 20008 (UNICODE, STATS OFF, HB_FM_DL_ALLOC), when
the application terminates:

"This application has requested the Runtime to terminate it in an  
unusual way.
Please contact the application's support team for more information."

Then it GPFs.

Can someone confirm?

Brgds,
Viktor

From a.jurkiewicz at abix.info.pl  Thu Sep 18 04:24:30 2008
From: a.jurkiewicz at abix.info.pl (ABIX - Adam Jurkiewicz)
Date: Thu Sep 18 04:24:41 2008
Subject: [Harbour] RPM for 1.0.1 openSUSE
In-Reply-To: <1221713345.6846.5.camel@hblx.340cst>
References: <200809172256.32522.a.jurkiewicz@abix.info.pl>
	<1221713345.6846.5.camel@hblx.340cst>
Message-ID: <200809181024.30821.a.jurkiewicz@abix.info.pl>

Dnia czwartek, 18 wrze?nia 2008, Bill Smith napisa?:
> Hi Adam,
>         [ -d "/usr/X11R6/lib64" ] && SYSTEM_LIBS="${SYSTEM_LIBS}
> -L/usr/X11R6/lib64"
>         SYSTEM_LIBS="-L/usr/X11R6/lib -lX11 ${SYSTEM_LIBS}"
>     fi

Have you installed harbour-static-1.0.1-0.i586.rpm  ?
It provides libgtxwc.a. 

The following lines:
	if [ "${HB_WITHOUT_X11}" != "yes" ]; then
	? ? if [ -f "${HB_LIB_INSTALL}/libgtxvt.a" ] || [ -f
	"${HB_LIB_INSTALL}/libgtxwc.a" ];
search for libgtxwc.a file.

On my laptop:

adasiek@abix-acer:/usr/lib/harbour> ll libgtxwc.a
-rw-r--r-- 1 root root 42566 IX 17 22:27 libgtxwc.a

adasiek@abix-acer:~/SVN/harbour-1.0.1/tests> cat /etc/SuSE-release
openSUSE 10.3 (i586)
VERSION = 10.3
adasiek@abix-acer:~/SVN/harbour-1.0.1/tests> uname -a
Linux abix-acer 2.6.22.5-31-default #1 SMP 2007/09/21 22:29:00 UTC i686 i686 
i386 GNU/Linux


adasiek@abix-acer:~/SVN/harbour-1.0.1/tests> hbmk speedtst.prg
Harbour 1.0.1 Intl. (Rev. 9429)
Copyright (c) 1999-2008, http://www.harbour-project.org/
Compiling 'speedtst.prg'...
Lines 647, Functions/Procedures 11
Generating C source output to 'speedtst.c'... Done.

adasiek@abix-acer:~/SVN/harbour-1.0.1/tests> sudo rpm -qa | grep x11
xorg-x11-libX11-7.2-75
xorg-x11-libxkbfile-7.2-63
xorg-x11-libxcb-devel-7.2-51
xorg-x11-libXfixes-devel-7.2-64
xorg-x11-libXpm-devel-7.2-65
yast2-x11-2.15.11-22
xorg-x11-libX11-ccache-7.2-88
xorg-x11-libICE-7.2-61
xorg-x11-libxcb-7.2-51
xorg-x11-libXrender-7.2-65
xorg-x11-libICE-devel-7.2-61
xorg-x11-libXprintUtil-7.2-60
xorg-x11-libs-7.2-103
xorg-x11-Xvnc-7.1-91
x11-input-wacom-0.7.8-37
xorg-x11-driver-input-7.2-110
x11-input-synaptics-0.14.6-103
xorg-x11-libXfixes-7.2-64
xorg-x11-libXt-7.2-65
xorg-x11-libX11-devel-7.2-75
xorg-x11-libXt-devel-7.2-65
xorg-x11-libXmu-devel-7.2-65
xorg-x11-fonts-7.2-85
xorg-x11-devel-7.2-103
ghostscript-x11-8.15.4-3
xorg-x11-driver-video-7.2-189
dbus-1-x11-1.0.2-67
xorg-x11-util-devel-7.2-54
xorg-x11-libXpm-7.2-65
x11-tools-0.1-100
xorg-x11-server-7.2-143
xorg-x11-libSM-7.2-58
xorg-x11-fonts-devel-7.2-53
xorg-x11-libXdmcp-devel-7.2-53
xorg-x11-libSM-devel-7.2-58
xorg-x11-libXrender-devel-7.2-65
xorg-x11-libXp-devel-7.2-60
xorg-x11-libXdmcp-7.2-53
xorg-x11-libfontenc-devel-7.2-59
xorg-x11-libXp-7.2-60
xorg-x11-server-extra-7.2-143
xorg-x11-libXprintUtil-devel-7.2-60
xorg-x11-7.2-135
xorg-x11-libXau-7.2-54
xorg-x11-libfontenc-7.2-59
xorg-x11-libXext-7.2-65
xorg-x11-libXmu-7.2-65
xorg-x11-libxkbfile-devel-7.2-63
xorg-x11-fonts-core-7.2-85
x11-input-wacom-tools-0.7.8-37
xorg-x11-proto-devel-7.2-67
xorg-x11-libXau-devel-7.2-54
xorg-x11-xtrans-devel-7.2-55
xorg-x11-libXv-7.2-61
xorg-x11-libXext-devel-7.2-65
xorg-x11-libXv-devel-7.2-61
libqt4-x11-4.3.1-23


Best regards,
Adam

-- 
ABIX - Linuksowe Systemy Wspomagania Biznesu www.abix.info.pl
Gadu-Gadu: 302315
Skype: abix_adamj 
Wsparcie aplikacji: http://groups-beta.google.com/group/abix-rcsoft?hl=pl
From harbour.01 at syenar.hu  Thu Sep 18 04:33:47 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 18 04:33:59 2008
Subject: [Harbour] Warnings with new alloc
Message-ID: <770C4AEF-02FC-442D-A38D-4D2FE31F512A@syenar.hu>

Hi Przemek,

I'm getting these warnings for the malloc code FYI:
[ It may be enough to suppress them, like we do for
sqlite3, at least for these compilers. ]

MSVS 2008:
c:\work\harbour\harbour\source\vm\dlmalloc.c(675) : warning C4565:  
'malloc' : redefinition; the symbol was previously declared with  
__declspec(restrict)
c:\work\harbour\harbour\source\vm\dlmalloc.c(675) : warning C4565:  
'malloc' : redefinition; the symbol was previously declared with  
__declspec(noalias)
c:\work\harbour\harbour\source\vm\dlmalloc.c(684) : warning C4565:  
'free' : redefinition; the symbol was previously declared with  
__declspec(noalias)
c:\work\harbour\harbour\source\vm\dlmalloc.c(691) : warning C4565:  
'calloc' : redefinition; the symbol was previously declared with  
__declspec(restrict)
c:\work\harbour\harbour\source\vm\dlmalloc.c(691) : warning C4565:  
'calloc' : redefinition; the symbol was previously declared with  
__declspec(noalias)
c:\work\harbour\harbour\source\vm\dlmalloc.c(716) : warning C4565:  
'realloc' : redefinition; the symbol was previously declared with  
__declspec(restrict)
c:\work\harbour\harbour\source\vm\dlmalloc.c(716) : warning C4565:  
'realloc' : redefinition; the symbol was previously declared with  
__declspec(noalias)
c:\work\harbour\harbour\source\vm\dlmalloc.c(4023) : warning C4565:  
'malloc' : redefinition; the symbol was previously declared with  
__declspec(restrict)
c:\work\harbour\harbour\source\vm\dlmalloc.c(4023) : warning C4565:  
'malloc' : redefinition; the symbol was previously declared with  
__declspec(noalias)
c:\work\harbour\harbour\source\vm\dlmalloc.c(4155) : warning C4565:  
'free' : redefinition; the symbol was previously declared with  
__declspec(noalias)
c:\work\harbour\harbour\source\vm\dlmalloc.c(4255) : warning C4565:  
'calloc' : redefinition; the symbol was previously declared with  
__declspec(restrict)
c:\work\harbour\harbour\source\vm\dlmalloc.c(4255) : warning C4565:  
'calloc' : redefinition; the symbol was previously declared with  
__declspec(noalias)
c:\work\harbour\harbour\source\vm\dlmalloc.c(4270) : warning C4565:  
'realloc' : redefinition; the symbol was previously declared with  
__declspec(restrict)
c:\work\harbour\harbour\source\vm\dlmalloc.c(4270) : warning C4565:  
'realloc' : redefinition; the symbol was previously declared with  
__declspec(noalias)

BCC 5.8.2:
Warning W8008 source\vm\dlmalloc.c 2787: Condition is always true in  
function internal_mallinfo
Warning W8008 source\vm\dlmalloc.c 2825: Condition is always true in  
function internal_malloc_stats
Warning W8084 source\vm\dlmalloc.c 3258: Suggest parentheses to  
clarify precedence in function prepend_alloc
Warning W8084 source\vm\dlmalloc.c 3314: Suggest parentheses to  
clarify precedence in function add_segment
Warning W8004 source\vm\dlmalloc.c 3300: 'nfences' is assigned a value  
that is never used in function add_segment
Warning W8019 source\vm\dlmalloc.c 3396: Code has no effect in  
function sys_alloc
Warning W8004 source\vm\dlmalloc.c 3430: 'end' is assigned a value  
that is never used in function sys_alloc
Warning W8004 source\vm\dlmalloc.c 3429: 'br' is assigned a value that  
is never used in function sys_alloc
Warning W8084 source\vm\dlmalloc.c 3545: Suggest parentheses to  
clarify precedence in function release_unused_segments
Warning W8041 source\vm\dlmalloc.c 3557: Negating unsigned value in  
function sys_trim
Warning W8008 source\vm\dlmalloc.c 3580: Condition is always false in  
function sys_trim
Warning W8066 source\vm\dlmalloc.c 3581: Unreachable code in function  
sys_trim
Warning W8008 source\vm\dlmalloc.c 3607: Condition is always true in  
function sys_trim
Warning W8004 source\vm\dlmalloc.c 3582: 'extra' is assigned a value  
that is never used in function sys_trim
Warning W8041 source\vm\dlmalloc.c 3623: Negating unsigned value in  
function tmalloc_large
Warning W8084 source\vm\dlmalloc.c 3626: Suggest parentheses to  
clarify precedence in function tmalloc_large
Warning W8041 source\vm\dlmalloc.c 3653: Negating unsigned value in  
function tmalloc_large
Warning W8041 source\vm\dlmalloc.c 3656: Negating unsigned value in  
function tmalloc_large
Warning W8084 source\vm\dlmalloc.c 3657: Suggest parentheses to  
clarify precedence in function tmalloc_large
Warning W8084 source\vm\dlmalloc.c 3683: Suggest parentheses to  
clarify precedence in function tmalloc_large
Warning W8041 source\vm\dlmalloc.c 3698: Negating unsigned value in  
function tmalloc_small
Warning W8084 source\vm\dlmalloc.c 3699: Suggest parentheses to  
clarify precedence in function tmalloc_small
Warning W8041 source\vm\dlmalloc.c 3735: Negating unsigned value in  
function internal_realloc
Warning W8008 source\vm\dlmalloc.c 3739: Condition is always true in  
function internal_realloc
Warning W8066 source\vm\dlmalloc.c 3800: Unreachable code in function  
internal_realloc
Warning W8041 source\vm\dlmalloc.c 3816: Negating unsigned value in  
function internal_memalign
Warning W8008 source\vm\dlmalloc.c 3830: Condition is always false in  
function internal_memalign
Warning W8066 source\vm\dlmalloc.c 3830: Unreachable code in function  
internal_memalign
Warning W8041 source\vm\dlmalloc.c 3843: Negating unsigned value in  
function internal_memalign
Warning W8008 source\vm\dlmalloc.c 3960: Condition is always false in  
function ialloc
Warning W8066 source\vm\dlmalloc.c 3960: Unreachable code in function  
ialloc
Warning W8008 source\vm\dlmalloc.c 4047: Condition is always true in  
function malloc
Warning W8041 source\vm\dlmalloc.c 4075: Negating unsigned value in  
function malloc
Warning W8041 source\vm\dlmalloc.c 4076: Negating unsigned value in  
function malloc
Warning W8084 source\vm\dlmalloc.c 4077: Suggest parentheses to  
clarify precedence in function malloc
Warning W8041 source\vm\dlmalloc.c 4103: Negating unsigned value in  
function malloc
Warning W8066 source\vm\dlmalloc.c 4152: Unreachable code in function  
malloc
Warning W8008 source\vm\dlmalloc.c 4173: Condition is always true in  
function free
Warning W8084 source\vm\dlmalloc.c 4239: Suggest parentheses to  
clarify precedence in function free
Warning W8008 source\vm\dlmalloc.c 4324: Condition is always true in  
function malloc_trim
Warning W8004 source\vm\dlmalloc.c 4323: 'result' is assigned a value  
that is never used in function malloc_trim

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep 18 04:39:41 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 18 04:39:50 2008
Subject: [Harbour] BUG: .rpm builds missing some contribs + name problems
In-Reply-To: <9257026e0809172249l254e850tc982126b4444a775@mail.gmail.com>
References: <9257026e0809172249l254e850tc982126b4444a775@mail.gmail.com>
Message-ID: <A279CB76-AB9A-41E5-B2E7-C89689FD7D48@syenar.hu>

Hi Lorenzo and all,

Many thanks.

Just a quick report:
1) I've noticed after the release, that hbcurl (and
maybe a few other externally dependent contribs),
are not being built when choosing make_rpm.sh.
IMO this should be fixed.

2) I'm in doubt which names should be used in these
filenames:
harbour-ADS-1.0.1-0.i586.rpm. Should ADS be referring
to the external package name, or should it be our
contrib lib name? I would guess the first. Either
way, some of the names should be cleaned up in next
version.

Any feedback?

Brgds,
Viktor

On 2008.09.18., at 7:49, Lorenzo Fiorini wrote:

> I plan to do the same for Centos 5.2 asap.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From tomaz.zupan at orpo.si  Thu Sep 18 04:56:31 2008
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Thu Sep 18 04:56:40 2008
Subject: [Harbour] BUG: .rpm builds missing some contribs + name problems
In-Reply-To: <A279CB76-AB9A-41E5-B2E7-C89689FD7D48@syenar.hu>
References: <9257026e0809172249l254e850tc982126b4444a775@mail.gmail.com>
	<A279CB76-AB9A-41E5-B2E7-C89689FD7D48@syenar.hu>
Message-ID: <200809181056.31512.tomaz.zupan@orpo.si>

On Thursday 18 September 2008 10:39:41 Szak?ts Viktor wrote:
> Just a quick report:
> 1) I've noticed after the release, that hbcurl (and
> maybe a few other externally dependent contribs),
> are not being built when choosing make_rpm.sh.
> IMO this should be fixed.
>
make_rpm.sh checks what what devel packages (headers usualy) do you have on 
your system and then builds what it can. Maybe we should define a list of 
reqired libraries and throw an error if not present.

LP, Toma?


From miguelangel at marchuet.net  Thu Sep 18 05:03:22 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Thu Sep 18 05:02:40 2008
Subject: [Harbour] 2008-09-18 11:02 UTC+0100 Miguel Angel Marchuet
	<miguelangel@marchuet.net>
Message-ID: <48D2195A.1030202@marchuet.net>

2008-09-18 11:02 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
   * contrib/hbbmcdx/bmdbfcdx.c
   * source/rdd/dbfcdx/dbfcdx1.c
     ! fixed generation error when length of key is greater than 256 as Clipper.
       instead of wait for internal error.
     * Used defined errors instead of hardcoded numbers.

Best regards,
Miguel Angel marchuet
From harbour.01 at syenar.hu  Thu Sep 18 05:28:52 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 18 05:29:04 2008
Subject: [Harbour] BUG: .rpm builds missing some contribs + name problems
In-Reply-To: <200809181056.31512.tomaz.zupan@orpo.si>
References: <9257026e0809172249l254e850tc982126b4444a775@mail.gmail.com>
	<A279CB76-AB9A-41E5-B2E7-C89689FD7D48@syenar.hu>
	<200809181056.31512.tomaz.zupan@orpo.si>
Message-ID: <7D23725C-D621-4149-9D3A-3CB9B68BC25A@syenar.hu>

> On Thursday 18 September 2008 10:39:41 Szak?ts Viktor wrote:
>> Just a quick report:
>> 1) I've noticed after the release, that hbcurl (and
>> maybe a few other externally dependent contribs),
>> are not being built when choosing make_rpm.sh.
>> IMO this should be fixed.
>>
> make_rpm.sh checks what what devel packages (headers usualy) do you  
> have on
> your system and then builds what it can. Maybe we should define a  
> list of
> reqired libraries and throw an error if not present.

If have libcurl on this system, but detection
seems to be missing in this case (I didn't check
but there may others as well). It works
the opposite way now by default: if a dependency
is detected, the contrib will be built. Maybe
we could throw warnings on the non-build-able
contribs, that would definitely help for builders.

Brgds,
Viktor


From harbour.01 at syenar.hu  Thu Sep 18 05:31:42 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 18 05:31:47 2008
Subject: [Harbour] 2008-09-18 11:25 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91971$Blat.v2.6.2$5c227732$1b50f166418@127.0.0.1>

2008-09-18 11:25 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_rpm.sh
    ! Attempt to detect libcurl.
      [TOMERGE 1.0]

  * contrib/hbziparc/hbziparc.prg
  * contrib/hbwin/win_tole.prg
  * contrib/hbvpdf/hbvpdf.prg
    * Some STATIC vars converted to THREAD STATIC.
    * aReport renamed to s_aReport.
      (is it a good idea to name 'ts_name' THREAD STATIC 
      vars?)

  * utils/hbmake/hbmake.prg
    ! Patch by Bill Robertson applied.
      This should eliminate any messing with harbour.cfg.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep 18 05:34:21 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 18 05:34:32 2008
Subject: [Harbour] 2008-09-18 11:02 UTC+0100 Miguel Angel Marchuet
	<miguelangel@marchuet.net>
In-Reply-To: <48D2195A.1030202@marchuet.net>
References: <48D2195A.1030202@marchuet.net>
Message-ID: <88F1C6A7-4B6C-400F-A901-DDA1118A15CF@syenar.hu>

Hi Miguel,

There are few warnings in hbbmcdx code, most of them seem to need
just a cast, but I don't want to mess with this code because I may
break it. Could you take a look at them:

.\bmdbfcdx.c(432) : warning C4244: '=' : conversion from 'int' to  
'BYTE', possible loss of data
.\bmdbfcdx.c(1603) : warning C4244: '=' : conversion from 'int' to  
'SHORT', possible loss of data
.\bmdbfcdx.c(1614) : warning C4244: '-=' : conversion from 'int' to  
'SHORT', possible loss of data
.\bmdbfcdx.c(1627) : warning C4244: '=' : conversion from 'int' to  
'SHORT', possible loss of data
.\bmdbfcdx.c(1818) : warning C4244: '=' : conversion from 'int' to  
'USHORT', possible loss of data
.\bmdbfcdx.c(2041) : warning C4244: '-=' : conversion from 'int' to  
'SHORT', possible loss of data
.\bmdbfcdx.c(2118) : warning C4244: '+=' : conversion from 'int' to  
'SHORT', possible loss of data
.\bmdbfcdx.c(2241) : warning C4244: '-=' : conversion from 'int' to  
'SHORT', possible loss of data
.\bmdbfcdx.c(2717) : warning C4244: '=' : conversion from 'int' to  
'BYTE', possible loss of data
.\bmdbfcdx.c(2779) : warning C4244: '=' : conversion from 'int' to  
'BYTE', possible loss of data
.\bmdbfcdx.c(2830) : warning C4244: '=' : conversion from 'int' to  
'BYTE', possible loss of data
.\bmdbfcdx.c(3490) : warning C4244: '=' : conversion from 'size_t' to  
'USHORT', possible loss of data
.\bmdbfcdx.c(3491) : warning C4244: '=' : conversion from 'size_t' to  
'USHORT', possible loss of data
.\bmdbfcdx.c(5141) : warning C4244: '=' : conversion from 'int' to  
'USHORT', possible loss of data
.\bmdbfcdx.c(5484) : warning C4244: 'argument' : conversion from 'int'  
to 'BYTE', possible loss of data
.\bmdbfcdx.c(5484) : warning C4244: 'argument' : conversion from 'int'  
to 'BYTE', possible loss of data
.\bmdbfcdx.c(5489) : warning C4244: 'argument' : conversion from 'int'  
to 'USHORT', possible loss of data
.\bmdbfcdx.c(5521) : warning C4244: 'argument' : conversion from 'int'  
to 'BYTE', possible loss of data
.\bmdbfcdx.c(5521) : warning C4244: 'argument' : conversion from 'int'  
to 'BYTE', possible loss of data
.\bmdbfcdx.c(5550) : warning C4244: 'argument' : conversion from 'int'  
to 'BYTE', possible loss of data
.\bmdbfcdx.c(5550) : warning C4244: 'argument' : conversion from 'int'  
to 'BYTE', possible loss of data
.\bmdbfcdx.c(7616) : warning C4244: '=' : conversion from 'int' to  
'BYTE', possible loss of data
.\bmdbfcdx.c(9270) : warning C4244: 'argument' : conversion from 'int'  
to 'BYTE', possible loss of data
.\bmdbfcdx.c(9270) : warning C4244: 'argument' : conversion from 'int'  
to 'BYTE', possible loss of data
.\bmdbfcdx.c(9447) : warning C4244: '-=' : conversion from 'int' to  
'SHORT', possible loss of data
.\bmdbfcdx.c(9538) : warning C4244: 'argument' : conversion from 'int'  
to 'BYTE', possible loss of data
.\bmdbfcdx.c(9538) : warning C4244: 'argument' : conversion from 'int'  
to 'BYTE', possible loss of data
.\bmdbfcdx.c(9584) : warning C4244: 'argument' : conversion from 'int'  
to 'BYTE', possible loss of data
.\bmdbfcdx.c(9584) : warning C4244: 'argument' : conversion from 'int'  
to 'BYTE', possible loss of data
.\bmdbfcdx.c(9841) : warning C4244: 'argument' : conversion from 'int'  
to 'BYTE', possible loss of data
.\bmdbfcdx.c(9841) : warning C4244: 'argument' : conversion from 'int'  
to 'BYTE', possible loss of data
.\bmdbfcdx.c(10274) : warning C4244: '=' : conversion from 'int' to  
'USHORT', possible loss of data

Brgds,
Viktor

On 2008.09.18., at 11:03, Miguel Angel Marchuet wrote:

> 2008-09-18 11:02 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net 
> >
>  * contrib/hbbmcdx/bmdbfcdx.c
>  * source/rdd/dbfcdx/dbfcdx1.c
>    ! fixed generation error when length of key is greater than 256  
> as Clipper.
>      instead of wait for internal error.
>    * Used defined errors instead of hardcoded numbers.
>
> Best regards,
> Miguel Angel marchuet
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Sep 18 05:49:02 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 18 05:49:07 2008
Subject: [Harbour] 2008-09-18 11:48 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91973$Blat.v2.6.2$c830c986$141c2df618e0@127.0.0.1>

2008-09-18 11:48 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbmisc/fileread.prg
    * Changed to use natic CLASS syntax.
--
Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Thu Sep 18 05:51:39 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep 18 05:51:46 2008
Subject: [Harbour] BUG: .rpm builds missing some contribs + name problems
In-Reply-To: <A279CB76-AB9A-41E5-B2E7-C89689FD7D48@syenar.hu>
References: <9257026e0809172249l254e850tc982126b4444a775@mail.gmail.com>
	<A279CB76-AB9A-41E5-B2E7-C89689FD7D48@syenar.hu>
Message-ID: <9257026e0809180251m1372b2a3taa049f20d0302d05@mail.gmail.com>

On Thu, Sep 18, 2008 at 10:39 AM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Just a quick report:
> 1) I've noticed after the release, that hbcurl (and
> maybe a few other externally dependent contribs),
> are not being built when choosing make_rpm.sh.
> IMO this should be fixed.

Yes, I used ./make_rpm.sh --with curl.

But f.e I had errors under Centos:

../../hbcurl.c: In function 'HB_FUN_CURL_EASY_SETOPT':
../../hbcurl.c:957: error: 'CURLOPT_HTTP_TRANSFER_DECODING' undeclared
(first use in this function)
../../hbcurl.c:957: error: (Each undeclared identifier is reported only once
../../hbcurl.c:957: error: for each function it appears in.)
../../hbcurl.c:1061: error: 'CURLOPT_FTP_SSL_CCC' undeclared (first
use in this function)
../../hbcurl.c:1134: error: 'CURLOPT_TIMEOUT_MS' undeclared (first use
in this function)
../../hbcurl.c:1164: error: 'CURLOPT_CONNECTTIMEOUT_MS' undeclared
(first use in this function)
../../hbcurl.c:1248: error: 'CURLOPT_SSH_AUTH_TYPES' undeclared (first
use in this function)
../../hbcurl.c:1256: error: 'CURLOPT_SSH_PUBLIC_KEYFILE' undeclared
(first use in this function)
../../hbcurl.c:1259: error: 'CURLOPT_SSH_PRIVATE_KEYFILE' undeclared
(first use in this function)
../../hbcurl.c: In function 'HB_FUN_CURL_VERSION_INFO':
../../hbcurl.c:1777: error: 'CURLVERSION_FOURTH' undeclared (first use
in this function)
../../hbcurl.c:1778: error: 'curl_version_info_data' has no member
named 'libssh_version'
make[3]: *** [hbcurl.o] Error 1
make[2]: *** [descend] Error 2

this also means that if we want to have the contrib libs working on
many distributions and/or many versions of the "external" code the
things may become complicated.

> 2) I'm in doubt which names should be used in these
> filenames:
> harbour-ADS-1.0.1-0.i586.rpm. Should ADS be referring
> to the external package name, or should it be our
> contrib lib name? I would guess the first. Either
> way, some of the names should be cleaned up in next
> version.
>
> Any feedback?

Probably our contrib name will be easier to manage and to understand:
f.e. ODBC is called unixODBC under Un*xes, but before we should define
the guidelines of the packaging like: which flags and which contribs
are to be considered "standard".

F.e. the use of HB_COMMERCE has legal issues and we can't decide on
behalf of the user.

So sorry if I repeat myself but IMHO we should not provide binaries at
all. Every developer should be able to do:

unzip harbour-1.0.1.zip

cd harbour-1.0.1

./make_xyz --with <what I want>

If we still want to provide binaries, we should at least choose the
safest path like HB_COMMERCE=yes and no GPL code provided.

best regards,
Lorenzo


best regards,
Lorenzo
From miguelangel at marchuet.net  Thu Sep 18 06:25:31 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Thu Sep 18 06:24:48 2008
Subject: [Harbour] 2008-09-18 11:02 UTC+0100 Miguel Angel
	Marchuet	<miguelangel@marchuet.net>
In-Reply-To: <88F1C6A7-4B6C-400F-A901-DDA1118A15CF@syenar.hu>
References: <48D2195A.1030202@marchuet.net>
	<88F1C6A7-4B6C-400F-A901-DDA1118A15CF@syenar.hu>
Message-ID: <48D22C9B.9090205@marchuet.net>

? estrange, is the same code of DBFCDX
and i don't receive warnings :(

make_b32.log
-----------------------------------------
MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
	bcc32.exe -c -q -d -w -w-sig- -O2 -I..\..\include -DHB_HASH_MSG_ITEMS -DHB_NO_PROFILER    -oobj\b32\bmdbfcdx.obj .\bmdbfcdx.c
.\bmdbfcdx.c:
	bcc32.exe -c -q -d -w -w-sig- -O2 -I..\..\include -DHB_HASH_MSG_ITEMS -DHB_NO_PROFILER    -oobj\b32\bmsixcdx.obj .\bmsixcdx.c
.\bmsixcdx.c:
	if exist "..\..\lib\b32\hbbmcdx.lib" del "..\..\lib\b32\hbbmcdx.lib" > NUL
	tlib.exe "..\..\lib\b32\hbbmcdx.lib" /P32  @MAKE0000.@@@
TLIB 4.5 Copyright (c) 1987, 1998 Borland International
+obj\b32\bmdbfcdx.obj &
+obj\b32\bmsixcdx.obj &
+
------------------------------------------

How I can reproduce your warnings ?

Best regards,
Miguel Angel Marchuet


Szak?ts Viktor escribi?:
> Hi Miguel,
> 
> There are few warnings in hbbmcdx code, most of them seem to need
> just a cast, but I don't want to mess with this code because I may
> break it. Could you take a look at them:
> 
> .\bmdbfcdx.c(432) : warning C4244: '=' : conversion from 'int' to 
> 'BYTE', possible loss of data
> .\bmdbfcdx.c(1603) : warning C4244: '=' : conversion from 'int' to 
> 'SHORT', possible loss of data
> .\bmdbfcdx.c(1614) : warning C4244: '-=' : conversion from 'int' to 
> 'SHORT', possible loss of data
> .\bmdbfcdx.c(1627) : warning C4244: '=' : conversion from 'int' to 
> 'SHORT', possible loss of data
> .\bmdbfcdx.c(1818) : warning C4244: '=' : conversion from 'int' to 
> 'USHORT', possible loss of data
> .\bmdbfcdx.c(2041) : warning C4244: '-=' : conversion from 'int' to 
> 'SHORT', possible loss of data
> .\bmdbfcdx.c(2118) : warning C4244: '+=' : conversion from 'int' to 
> 'SHORT', possible loss of data
> .\bmdbfcdx.c(2241) : warning C4244: '-=' : conversion from 'int' to 
> 'SHORT', possible loss of data
> .\bmdbfcdx.c(2717) : warning C4244: '=' : conversion from 'int' to 
> 'BYTE', possible loss of data
> .\bmdbfcdx.c(2779) : warning C4244: '=' : conversion from 'int' to 
> 'BYTE', possible loss of data
> .\bmdbfcdx.c(2830) : warning C4244: '=' : conversion from 'int' to 
> 'BYTE', possible loss of data
> .\bmdbfcdx.c(3490) : warning C4244: '=' : conversion from 'size_t' to 
> 'USHORT', possible loss of data
> .\bmdbfcdx.c(3491) : warning C4244: '=' : conversion from 'size_t' to 
> 'USHORT', possible loss of data
> .\bmdbfcdx.c(5141) : warning C4244: '=' : conversion from 'int' to 
> 'USHORT', possible loss of data
> .\bmdbfcdx.c(5484) : warning C4244: 'argument' : conversion from 'int' 
> to 'BYTE', possible loss of data
> .\bmdbfcdx.c(5484) : warning C4244: 'argument' : conversion from 'int' 
> to 'BYTE', possible loss of data
> .\bmdbfcdx.c(5489) : warning C4244: 'argument' : conversion from 'int' 
> to 'USHORT', possible loss of data
> .\bmdbfcdx.c(5521) : warning C4244: 'argument' : conversion from 'int' 
> to 'BYTE', possible loss of data
> .\bmdbfcdx.c(5521) : warning C4244: 'argument' : conversion from 'int' 
> to 'BYTE', possible loss of data
> .\bmdbfcdx.c(5550) : warning C4244: 'argument' : conversion from 'int' 
> to 'BYTE', possible loss of data
> .\bmdbfcdx.c(5550) : warning C4244: 'argument' : conversion from 'int' 
> to 'BYTE', possible loss of data
> .\bmdbfcdx.c(7616) : warning C4244: '=' : conversion from 'int' to 
> 'BYTE', possible loss of data
> .\bmdbfcdx.c(9270) : warning C4244: 'argument' : conversion from 'int' 
> to 'BYTE', possible loss of data
> .\bmdbfcdx.c(9270) : warning C4244: 'argument' : conversion from 'int' 
> to 'BYTE', possible loss of data
> .\bmdbfcdx.c(9447) : warning C4244: '-=' : conversion from 'int' to 
> 'SHORT', possible loss of data
> .\bmdbfcdx.c(9538) : warning C4244: 'argument' : conversion from 'int' 
> to 'BYTE', possible loss of data
> .\bmdbfcdx.c(9538) : warning C4244: 'argument' : conversion from 'int' 
> to 'BYTE', possible loss of data
> .\bmdbfcdx.c(9584) : warning C4244: 'argument' : conversion from 'int' 
> to 'BYTE', possible loss of data
> .\bmdbfcdx.c(9584) : warning C4244: 'argument' : conversion from 'int' 
> to 'BYTE', possible loss of data
> .\bmdbfcdx.c(9841) : warning C4244: 'argument' : conversion from 'int' 
> to 'BYTE', possible loss of data
> .\bmdbfcdx.c(9841) : warning C4244: 'argument' : conversion from 'int' 
> to 'BYTE', possible loss of data
> .\bmdbfcdx.c(10274) : warning C4244: '=' : conversion from 'int' to 
> 'USHORT', possible loss of data
> 
> Brgds,
> Viktor
> 
> On 2008.09.18., at 11:03, Miguel Angel Marchuet wrote:
> 
>> 2008-09-18 11:02 UTC+0100 Miguel Angel Marchuet 
>> <miguelangel@marchuet.net>
>>  * contrib/hbbmcdx/bmdbfcdx.c
>>  * source/rdd/dbfcdx/dbfcdx1.c
>>    ! fixed generation error when length of key is greater than 256 as 
>> Clipper.
>>      instead of wait for internal error.
>>    * Used defined errors instead of hardcoded numbers.
>>
>> Best regards,
>> Miguel Angel marchuet
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> __________ Informaci?n de NOD32, revisi?n 3450 (20080918) __________
> 
> Este mensaje ha sido analizado con NOD32 antivirus system
> http://www.nod32.com
> 
> 
> 

From toninhofwi at yahoo.com.br  Thu Sep 18 06:36:32 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Thu Sep 18 06:32:40 2008
Subject: [Harbour] ADS Index Page Size
In-Reply-To: <ndh2d4dfa3vlfntg2fj5j8m99j2043et4q@4ax.com>
References: <ndh2d4dfa3vlfntg2fj5j8m99j2043et4q@4ax.com>
Message-ID: <beb4d454g27e7mlht05hf9b81oevv4ftpf@4ax.com>

Hi Przemek,

Please tell me a thing: in hbrddcdx.h we have

#define CDX_PAGELEN   512

Can we create a new item structure for _DBORDERCONDINFO and put this
value there?  In this way we can set index page size in OrdCondSet()


Thanks and best regards,

Toninho.



On Wed, 17 Sep 2008 15:05:17 -0300, you wrote:

>Hi ppl,
>
>Are there any set for create Indexes with configurable Page Size ?   I
>have specific adt databases that need be created with 1024  Index Page
>Size. 
>
>I have my own ads1.c changed to do this, but IMO is important if we
>can have this configuration in set() or at the INDEX ON command.
>
>from ads doc:
>---cut---
>Advantage Proprietary Index files (ADIs) have a configurable page
>size, with a default of 512 bytes. There are some situations where it
>may be desirable to use larger page sizes.
>
>?	As a general rule, tables with over one million records per
>table may benefit from larger index page sizes. Filters and SQL
>queries that include most of the records in the table may run faster
>with increased index page sizes. However, searches for single records
>or small subsets of the table probably would not benefit from larger
>page sizes.
>
>?	Indexes with large keys may require larger page sizes. If the
>page size is not large enough, it may not be possible to create an
>index with longer keys. In addition, if the page size is too small,
>Advantage may not be able to balance the index properly, which could
>result in a 7022 error when updating the table.
>---cut---
>
>
>TIA and best regards,
>
>Toninho.
>
>
>		
>_______________________________________________________ 
>Yahoo! Mail - Sempre a melhor op??o para voc?! 
>Experimente j? e veja as novidades. 
>http://br.yahoo.com/mailbeta/tudonovo/
> 
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour

__________________________________________________
Fa?a liga??es para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From harbour.01 at syenar.hu  Thu Sep 18 06:33:26 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 18 06:33:38 2008
Subject: [Harbour] BUG: .rpm builds missing some contribs + name problems
In-Reply-To: <9257026e0809180251m1372b2a3taa049f20d0302d05@mail.gmail.com>
References: <9257026e0809172249l254e850tc982126b4444a775@mail.gmail.com>
	<A279CB76-AB9A-41E5-B2E7-C89689FD7D48@syenar.hu>
	<9257026e0809180251m1372b2a3taa049f20d0302d05@mail.gmail.com>
Message-ID: <EF6DD62A-E0C4-44B6-ADBD-D3E44DFAF752@syenar.hu>

Hi Lorenzo,

Thanks. Which version of libcurl is installed on your system?

> this also means that if we want to have the contrib libs working on
> many distributions and/or many versions of the "external" code the
> things may become complicated.

It's the job of our contribs to make sure they support
an enough wide range of external lib version. For hbcurl
I only did it as far as the oldest reported version goes,
but any old version can be implemented, if needed.

>> 2) I'm in doubt which names should be used in these
>> filenames:
>> harbour-ADS-1.0.1-0.i586.rpm. Should ADS be referring
>> to the external package name, or should it be our
>> contrib lib name? I would guess the first. Either
>> way, some of the names should be cleaned up in next
>> version.
>>
>> Any feedback?
>
> Probably our contrib name will be easier to manage and to understand:
> f.e. ODBC is called unixODBC under Un*xes, but before we should define
> the guidelines of the packaging like: which flags and which contribs
> are to be considered "standard".

I agree.

> F.e. the use of HB_COMMERCE has legal issues and we can't decide on
> behalf of the user.

Probably should be off by default. (it probably is off by default, I  
didn't check)

> So sorry if I repeat myself but IMHO we should not provide binaries at
> all. Every developer should be able to do:
>
> unzip harbour-1.0.1.zip
>
> cd harbour-1.0.1
>
> ./make_xyz --with <what I want>
>
> If we still want to provide binaries, we should at least choose the
> safest path like HB_COMMERCE=yes and no GPL code provided.

Quite true. (Shouldn't it be "HB_COMMERCE=no"? Maybe I'm
misunderstanding its meaning)

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep 18 06:34:45 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 18 06:34:57 2008
Subject: [Harbour] 2008-09-18 11:02 UTC+0100 Miguel Angel
	Marchuet	<miguelangel@marchuet.net>
In-Reply-To: <48D22C9B.9090205@marchuet.net>
References: <48D2195A.1030202@marchuet.net>
	<88F1C6A7-4B6C-400F-A901-DDA1118A15CF@syenar.hu>
	<48D22C9B.9090205@marchuet.net>
Message-ID: <A69F7BBD-50CE-41E6-A018-1C502C72037E@syenar.hu>

>
Hi Miguel,

> ? estrange, is the same code of DBFCDX
> and i don't receive warnings :(
>
> make_b32.log
> -----------------------------------------
> MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
> 	bcc32.exe -c -q -d -w -w-sig- -O2 -I..\..\include - 
> DHB_HASH_MSG_ITEMS -DHB_NO_PROFILER    -oobj\b32\bmdbfcdx.obj . 
> \bmdbfcdx.c
> .\bmdbfcdx.c:
> 	bcc32.exe -c -q -d -w -w-sig- -O2 -I..\..\include - 
> DHB_HASH_MSG_ITEMS -DHB_NO_PROFILER    -oobj\b32\bmsixcdx.obj . 
> \bmsixcdx.c
> .\bmsixcdx.c:
> 	if exist "..\..\lib\b32\hbbmcdx.lib" del "..\..\lib 
> \b32\hbbmcdx.lib" > NUL
> 	tlib.exe "..\..\lib\b32\hbbmcdx.lib" /P32  @MAKE0000.@@@
> TLIB 4.5 Copyright (c) 1987, 1998 Borland International
> +obj\b32\bmdbfcdx.obj &
> +obj\b32\bmsixcdx.obj &
> +
> ------------------------------------------
>
> How I can reproduce your warnings ?

Sorry, forgot to say these are MSVS [2008] -W4 warnings,
the current default if you try to build with MSVS.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep 18 06:35:52 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 18 06:36:03 2008
Subject: [Harbour] 2008-09-18 11:02 UTC+0100 Miguel Angel
	Marchuet	<miguelangel@marchuet.net>
In-Reply-To: <48D22C9B.9090205@marchuet.net>
References: <48D2195A.1030202@marchuet.net>
	<88F1C6A7-4B6C-400F-A901-DDA1118A15CF@syenar.hu>
	<48D22C9B.9090205@marchuet.net>
Message-ID: <42994BEE-1E40-48BE-85BD-190251431AF2@syenar.hu>

>
Miguel,

> ? estrange, is the same code of DBFCDX
> and i don't receive warnings :(

Ops, one more thing: DBFCDX has these warnings too.

Brgds,
Viktor

From toninhofwi at yahoo.com.br  Thu Sep 18 07:01:44 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Thu Sep 18 06:57:52 2008
Subject: [Harbour] hb_gcall() and fwh
In-Reply-To: <20080917102433.GB11556@34-mo7-2.acn.waw.pl>
References: <2as0d45gdmf93hvv09a8isrbdq6j2dsp4v@4ax.com>
	<20080917102433.GB11556@34-mo7-2.acn.waw.pl>
Message-ID: <bvc4d41pltmarlf45vc8n1i2gj5nm0h42d@4ax.com>

>Not yet but Harbour is ready for automatic GC activation which I'll
>enable soon. Anyhow it may effect 3-rd party code which keeps not
>attached GC blocks. With current API it can be done quite easy even
>by mistake.

Hi Przemek.

Really the best is enable automatic GC activation, BTW the new MM that
you has implemented is really more efficient. I can feel in my
application, mainly in big and heavy processes.

Thanks and regards,

Toninho.


	

	
		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opção para você! 
Experimente já e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From lorenzo.fiorini at gmail.com  Thu Sep 18 07:04:06 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep 18 07:04:12 2008
Subject: [Harbour] BUG: .rpm builds missing some contribs + name problems
In-Reply-To: <EF6DD62A-E0C4-44B6-ADBD-D3E44DFAF752@syenar.hu>
References: <9257026e0809172249l254e850tc982126b4444a775@mail.gmail.com>
	<A279CB76-AB9A-41E5-B2E7-C89689FD7D48@syenar.hu>
	<9257026e0809180251m1372b2a3taa049f20d0302d05@mail.gmail.com>
	<EF6DD62A-E0C4-44B6-ADBD-D3E44DFAF752@syenar.hu>
Message-ID: <9257026e0809180404n69d292a0s4d8b1c49b704f8fd@mail.gmail.com>

On Thu, Sep 18, 2008 at 12:33 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Quite true. (Shouldn't it be "HB_COMMERCE=no"? Maybe I'm
> misunderstanding its meaning)

Actually HB_COMMERCE=yes means "suitable for commercial apps". For
rpms it means --without gpllib

---
if [ "${HB_COMMERCE}" = "yes" ]
then
    INST_PARAM="${INST_PARAM} --without gpllib"
fi
---

it means no GPM but also slang AFAIK has a "special" license.

Another problem is mysql which is GPL unless the user has purchased a license.
I'm not a lawyer so I don't know if simply providing rpms is enough to
"stain" full harbour.
To be sure I don't build and link any "pure" GPL code.

best regards,
Lorenzo
From druzus at acn.waw.pl  Thu Sep 18 07:27:56 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 18 07:28:27 2008
Subject: [Harbour] 2008-09-18 11:02 UTC+0100 Miguel Angel Marchuet
	<miguelangel@marchuet.net>
In-Reply-To: <48D2195A.1030202@marchuet.net>
References: <48D2195A.1030202@marchuet.net>
Message-ID: <20080918112756.GA1500@34-mo7-2.acn.waw.pl>

On Thu, 18 Sep 2008, Miguel Angel Marchuet wrote:

Hi Miguel,

> 2008-09-18 11:02 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
>   * contrib/hbbmcdx/bmdbfcdx.c
>   * source/rdd/dbfcdx/dbfcdx1.c
>     ! fixed generation error when length of key is greater than 256 as Clipper.
>       instead of wait for internal error.
>     * Used defined errors instead of hardcoded numbers.

Thanks for adding RT error but it should be done in a little bit different
way. The above touched only one chosen situation when the same problem can
appear also for FOR clause. The area for storing KEY and FOR expressions
in CDX format has 512 bytes. In Clipper it's divided in two fixed size
region (each has 255 bytes + leading 0). But not all systems have such
fixed limit and some of them checks only total length of both expressions,
f.e. ADS. If we want to open files created by them we have to change the
code not only add RT errors. In theory then may not store leading zeros
but I do not know if other systems will be able to read such indexes so I
suggest to set maximum limit for total length of both expressions to 511.
At least one 0 to divide them. I have it in my local CDX code so I'll
commit it ASAP. BTW for error code I suggest to add few new constant
values instead of reusing some others.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Sep 18 07:40:11 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 18 07:40:41 2008
Subject: [Harbour] ADS Index Page Size
In-Reply-To: <beb4d454g27e7mlht05hf9b81oevv4ftpf@4ax.com>
References: <ndh2d4dfa3vlfntg2fj5j8m99j2043et4q@4ax.com>
	<beb4d454g27e7mlht05hf9b81oevv4ftpf@4ax.com>
Message-ID: <20080918114010.GB1500@34-mo7-2.acn.waw.pl>

On Thu, 18 Sep 2008, Toninho@fwi wrote:

Ho Toninho,

> Please tell me a thing: in hbrddcdx.h we have
> #define CDX_PAGELEN   512
> Can we create a new item structure for _DBORDERCONDINFO and put this
> value there?  In this way we can set index page size in OrdCondSet()

If you look carefully then you will find that there are about 30 different
parameters which can be passed also and some of them are even more important.
We cannot extend DBORDERCONDINFO for each new one. For such thins use rather
RDDI_* action, f.e.:
   rddInfo( RDDI_INDEXPAGESIZE, 1024, "ADT" )
which will set default index page size for newly created indexes.
Just like you can set other features in DBF* CDX before table, memo or index
are created.
ADI is slightly modified CDX format and I want like to support for it
to pure DBFCDX code in the future so I will also need this RDDI action.

best regards,
Przemek
From tomaz.zupan at orpo.si  Thu Sep 18 07:45:01 2008
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Thu Sep 18 07:45:09 2008
Subject: [Harbour] BUG: .rpm builds missing some contribs + name problems
In-Reply-To: <9257026e0809180251m1372b2a3taa049f20d0302d05@mail.gmail.com>
References: <9257026e0809172249l254e850tc982126b4444a775@mail.gmail.com>
	<A279CB76-AB9A-41E5-B2E7-C89689FD7D48@syenar.hu>
	<9257026e0809180251m1372b2a3taa049f20d0302d05@mail.gmail.com>
Message-ID: <200809181345.01309.tomaz.zupan@orpo.si>

On Thursday 18 September 2008 11:51:39 Lorenzo Fiorini wrote:
> On Thu, Sep 18, 2008 at 10:39 AM, Szak?ts Viktor <harbour.01@syenar.hu> 
wrote:
> > Just a quick report:
> > 1) I've noticed after the release, that hbcurl (and
> > maybe a few other externally dependent contribs),
> > are not being built when choosing make_rpm.sh.
> > IMO this should be fixed.
>
> Yes, I used ./make_rpm.sh --with curl.
>
> But f.e I had errors under Centos:
>
> ../../hbcurl.c: In function 'HB_FUN_CURL_EASY_SETOPT':
> ../../hbcurl.c:957: error: 'CURLOPT_HTTP_TRANSFER_DECODING' undeclared
...
...
> named 'libssh_version'
> make[3]: *** [hbcurl.o] Error 1
> make[2]: *** [descend] Error 2
>

Do you have libcurl-devel installed?

>
> Probably our contrib name will be easier to manage and to understand:
> f.e. ODBC is called unixODBC under Un*xes, but before we should define
> the guidelines of the packaging like: which flags and which contribs
> are to be considered "standard".
>
> F.e. the use of HB_COMMERCE has legal issues and we can't decide on
> behalf of the user.

I agree. Even better would be if make_xxx would default to this agreed 
settings, check if it has all it needs and return errors if something is 
missing. 

LP, Toma?
From toninhofwi at yahoo.com.br  Thu Sep 18 07:59:05 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Thu Sep 18 07:55:12 2008
Subject: [Harbour] ADS Index Page Size
In-Reply-To: <20080918114010.GB1500@34-mo7-2.acn.waw.pl>
References: <ndh2d4dfa3vlfntg2fj5j8m99j2043et4q@4ax.com>
	<beb4d454g27e7mlht05hf9b81oevv4ftpf@4ax.com>
	<20080918114010.GB1500@34-mo7-2.acn.waw.pl>
Message-ID: <khg4d45cd3qo87g5bun82l4vm8849h2ce5@4ax.com>

>ADI is slightly modified CDX format and I want like to support for it
>to pure DBFCDX code in the future so I will also need this RDDI action.

Thanks Przemek. I?ll wait. 

Best regards,

Toninho.

__________________________________________________
Fa?a liga??es para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From harbour.01 at syenar.hu  Thu Sep 18 08:02:35 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 18 08:02:39 2008
Subject: [Harbour] 2008-09-18 14:00 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91986$Blat.v2.6.2$70224158$2344dcfa5e0@127.0.0.1>

2008-09-18 14:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_vc.mak
    * Synced with BCC to build in ST mode by default.

  ; TOFIX: There seems to be an old problem where contrib 
           .prg files won't get rebuilt after a modification 
           by running make_vc.bat (MSVC only).
           Marek, if you see this, could you take a look at it?
--
Brgds,
Viktor

From druzus at acn.waw.pl  Thu Sep 18 08:13:20 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 18 08:13:52 2008
Subject: [Harbour] hb_gcall() and fwh
In-Reply-To: <bvc4d41pltmarlf45vc8n1i2gj5nm0h42d@4ax.com>
References: <2as0d45gdmf93hvv09a8isrbdq6j2dsp4v@4ax.com>
	<20080917102433.GB11556@34-mo7-2.acn.waw.pl>
	<bvc4d41pltmarlf45vc8n1i2gj5nm0h42d@4ax.com>
Message-ID: <20080918121320.GA17643@34-mo7-2.acn.waw.pl>

On Thu, 18 Sep 2008, Toninho@fwi wrote:

Hi Toninho,

> >Not yet but Harbour is ready for automatic GC activation which I'll
> >enable soon. Anyhow it may effect 3-rd party code which keeps not
> >attached GC blocks. With current API it can be done quite easy even
> >by mistake.
> Really the best is enable automatic GC activation,

We will return to this subject in few weeks.

> BTW the new MM that
> you has implemented is really more efficient. I can feel in my
> application, mainly in big and heavy processes.

I only committed it. Mindaugas found this code.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Sep 18 08:21:05 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 18 08:21:15 2008
Subject: [Harbour] BUG: .rpm builds missing some contribs + name problems
In-Reply-To: <9257026e0809180404n69d292a0s4d8b1c49b704f8fd@mail.gmail.com>
References: <9257026e0809172249l254e850tc982126b4444a775@mail.gmail.com>
	<A279CB76-AB9A-41E5-B2E7-C89689FD7D48@syenar.hu>
	<9257026e0809180251m1372b2a3taa049f20d0302d05@mail.gmail.com>
	<EF6DD62A-E0C4-44B6-ADBD-D3E44DFAF752@syenar.hu>
	<9257026e0809180404n69d292a0s4d8b1c49b704f8fd@mail.gmail.com>
Message-ID: <07BDCB3A-8EF0-4064-8700-E46F8D9B4405@syenar.hu>

>
Hi Lorenzo,

> Actually HB_COMMERCE=yes means "suitable for commercial apps". For
> rpms it means --without gpllib

Okay, that clarifies. Should be named something more clear IMO.

> ---
> if [ "${HB_COMMERCE}" = "yes" ]
> then
>    INST_PARAM="${INST_PARAM} --without gpllib"
> fi
> ---
>
> it means no GPM but also slang AFAIK has a "special" license.
>
> Another problem is mysql which is GPL unless the user has purchased  
> a license.
> I'm not a lawyer so I don't know if simply providing rpms is enough to
> "stain" full harbour.
> To be sure I don't build and link any "pure" GPL code.

For mysql, we're not distributing any parts of it in
any form with hbmysql, just linking against it and using
the headers at build-time, so from Harbour's POV this
should be any problem IMO, user should decide whether the
mysql license allows them to use it with out hbmysql.
For gpm this is different, as we're using it to build some
Harbour command-line tools, so we're distributing it in
linked form. Anyhow, it's still safest for the users to
exclude these from builds in the first place.

BTW, you didn't tell me your libcurl version..

Brgds,
Viktor

From dbtopas at dbtopas.lt  Thu Sep 18 08:25:37 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Sep 18 08:27:44 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080917001732.GC24897@34-mo7-2.acn.waw.pl>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>	<48CE57C6.2030006@dbtopas.lt>	<20080915154445.GA803@34-mo7-2.acn.waw.pl>	<48CE9A2E.9020201@dbtopas.lt>	<20080915184410.GA13559@34-mo7-2.acn.waw.pl>	<48CECBF9.1080605@dbtopas.lt>	<20080916173546.GA30158@34-mo7-2.acn.waw.pl>	<48D037DE.8010300@dbtopas.lt>
	<20080917001732.GC24897@34-mo7-2.acn.waw.pl>
Message-ID: <48D248C1.8090600@dbtopas.lt>

> But if you can create inlined version of above
> code for BCC (don't ask me how, I stop seriously using BCC in
> DOS days and here some tricks will be necessary) then maybe it
> will give enough speed improvement for this compiler.

Hi,


it's possible the goal could be reached, but I'm unable to write inline 
function for tls accessing.
Perhaps we should use HB_THREAD_STUB or pass pStack parameter to 
functions. What is expected slowdown in ST function (when pStack will be 
passed from function to function)? Are we going to change existing 
functions, or use a new MT friendly one, and keep old one for 
compatibility, for example,

   HB_EXPORT void hb_vmPushInteger( PHB_STACK pStack, int iNumber )
   {
       hb_vmmtPushInteger( hb_stack_ptr, iNumber );
   }

   HB_EXPORT void hb_vmmtPushInteger( PHB_STACK pStack, int iNumber )
   {
      ...
   {


Best regards,
Mindaugas
From lorenzo.fiorini at gmail.com  Thu Sep 18 08:35:07 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep 18 08:35:14 2008
Subject: [Harbour] BUG: .rpm builds missing some contribs + name problems
In-Reply-To: <200809181345.01309.tomaz.zupan@orpo.si>
References: <9257026e0809172249l254e850tc982126b4444a775@mail.gmail.com>
	<A279CB76-AB9A-41E5-B2E7-C89689FD7D48@syenar.hu>
	<9257026e0809180251m1372b2a3taa049f20d0302d05@mail.gmail.com>
	<200809181345.01309.tomaz.zupan@orpo.si>
Message-ID: <9257026e0809180535y118aa167l78bdef58972bbc76@mail.gmail.com>

On Thu, Sep 18, 2008 at 1:45 PM, Toma? Zupan <tomaz.zupan@orpo.si> wrote:

> Do you have libcurl-devel installed?

Yes, of course. In Centos is called:

curl-devel-7.15.5-2.el5
curl-7.15.5-2.el5

best regards,
Lorenzo
From harbour.01 at syenar.hu  Thu Sep 18 09:01:54 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 18 09:02:00 2008
Subject: [Harbour] 2008-09-18 15:00 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9198e$Blat.v2.6.2$b97db5e6$162c45fdb062@127.0.0.1>

2008-09-18 15:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbcurl/hbcurl.c
    ! Made it compile with a slightly older (~7.15.x) 
      versions of libcurl. Please test.
--
Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Thu Sep 18 09:07:23 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep 18 09:07:32 2008
Subject: [Harbour] mingw cross build issue
Message-ID: <9257026e0809180607kd98cc11x6185dea499ab9d0f@mail.gmail.com>

mingw32-cross build under Fedora 9:

../../getlist.prg:55: error: E0030  Syntax error "syntax error at 'STATIC'"

../../getlist.prg:59: warning: W0001  Ambiguous reference 'S_OGETLISTACTIVE'

../../getlist.prg:60: warning: W0001  Ambiguous reference 'S_OGETLISTACTIVE'

../../getlist.prg:63: warning: W0001  Ambiguous reference 'S_OGETLISTACTIVE'

../../getlist.prg:65: warning: W0001  Ambiguous reference 'S_OGETLISTACTIVE'

../../getlist.prg:66: warning: W0001  Ambiguous reference 'S_OGETLISTACTIVE'

../../getlist.prg:74: warning: W0001  Ambiguous reference 'S_OGETLISTACTIVE'

../../getlist.prg:77: error: E0030  Syntax error "syntax error at 'STATIC'"

../../getlist.prg:80: warning: W0001  Ambiguous reference 'S_OGETLISTLAST'

../../getlist.prg:83: warning: W0001  Ambiguous reference 'S_OGETLISTLAST'
make[3]: *** [getlist.c] Error 1

The problem is in "THREAD STATIC x". What I'm missing?

best regards,
Lorenzo
From tomaz.zupan at orpo.si  Thu Sep 18 09:40:16 2008
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Thu Sep 18 09:40:24 2008
Subject: [Harbour] 2008-09-18 15:00 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c9198e$Blat.v2.6.2$b97db5e6$162c45fdb062@127.0.0.1>
References: <01c9198e$Blat.v2.6.2$b97db5e6$162c45fdb062@127.0.0.1>
Message-ID: <200809181540.16360.tomaz.zupan@orpo.si>

On Thursday 18 September 2008 15:01:54 Szak?ts Viktor wrote:
> 2008-09-18 15:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * contrib/hbcurl/hbcurl.c
>     ! Made it compile with a slightly older (~7.15.x)
>       versions of libcurl. Please test.

Works here with curl 7.18.

LP, Toma?
From tomaz.zupan at orpo.si  Thu Sep 18 09:47:42 2008
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Thu Sep 18 09:47:49 2008
Subject: [Harbour] Detecting curl in make_rpm.sh
In-Reply-To: <200809181540.16360.tomaz.zupan@orpo.si>
References: <01c9198e$Blat.v2.6.2$b97db5e6$162c45fdb062@127.0.0.1>
	<200809181540.16360.tomaz.zupan@orpo.si>
Message-ID: <200809181547.42997.tomaz.zupan@orpo.si>

There seems to be one closing square bracket too much on line 112. There is an 
error just after make_rpm.sh starts. Can somebody confirm this?

LP, Toma?

Diff:
Index: make_rpm.sh
===================================================================
--- make_rpm.sh	(revision 9440)
+++ make_rpm.sh	(working copy)
@@ -109,7 +109,7 @@
 then
     INST_PARAM="${INST_PARAM} --with allegro"
 fi
-if [ -f /usr/include/curl/curl.h ] ]
+if [ -f /usr/include/curl/curl.h ]
 then
     INST_PARAM="${INST_PARAM} --with curl"
 fi
From lorenzo.fiorini at gmail.com  Thu Sep 18 10:13:24 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep 18 10:13:31 2008
Subject: [Harbour] 2008-09-18 15:00 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c9198e$Blat.v2.6.2$b97db5e6$162c45fdb062@127.0.0.1>
References: <01c9198e$Blat.v2.6.2$b97db5e6$162c45fdb062@127.0.0.1>
Message-ID: <9257026e0809180713v1e493375p78ee1812364fc435@mail.gmail.com>

On Thu, Sep 18, 2008 at 3:01 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> 2008-09-18 15:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>  * contrib/hbcurl/hbcurl.c
>    ! Made it compile with a slightly older (~7.15.x)
>      versions of libcurl. Please test.

Ok also with Centos 5.2 only a small typo in:

./make_rpm.sh: line 112: [: /usr/include/curl/curl.h: binary operator expected

a "]" left.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Thu Sep 18 10:26:20 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep 18 10:26:27 2008
Subject: [Harbour] Detecting curl in make_rpm.sh
In-Reply-To: <200809181547.42997.tomaz.zupan@orpo.si>
References: <01c9198e$Blat.v2.6.2$b97db5e6$162c45fdb062@127.0.0.1>
	<200809181540.16360.tomaz.zupan@orpo.si>
	<200809181547.42997.tomaz.zupan@orpo.si>
Message-ID: <9257026e0809180726h2e963e8dgecb3b44877b35796@mail.gmail.com>

On Thu, Sep 18, 2008 at 3:47 PM, Toma? Zupan <tomaz.zupan@orpo.si> wrote:

> There seems to be one closing square bracket too much on line 112. There is an
> error just after make_rpm.sh starts. Can somebody confirm this?

Yes, see my previous msg to Viktor.

best regards,
Lorenzo
From druzus at acn.waw.pl  Thu Sep 18 10:35:29 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 18 10:36:01 2008
Subject: [Harbour] mingw cross build issue
In-Reply-To: <9257026e0809180607kd98cc11x6185dea499ab9d0f@mail.gmail.com>
References: <9257026e0809180607kd98cc11x6185dea499ab9d0f@mail.gmail.com>
Message-ID: <20080918143529.GA5189@34-mo7-2.acn.waw.pl>

On Thu, 18 Sep 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> ../../getlist.prg:55: error: E0030  Syntax error "syntax error at 'STATIC'"
> make[3]: *** [getlist.c] Error 1
> The problem is in "THREAD STATIC x". What I'm missing?

You are using older (1.0.1 or earlier) harbour vompiler to
compiler 1.1.0 .prg code.
THREAD STATIC is supported only in the newest compilers.
If you want to use the same source code with older ones
then please use PP rule like:

   #command THREAD STATIC <vars,...> => STATIC <vars>

best regards,
Przemek
From dbtopas at dbtopas.lt  Thu Sep 18 10:45:33 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Sep 18 10:47:39 2008
Subject: [Harbour] A few questions about MT
Message-ID: <48D2698D.80206@dbtopas.lt>

Hi,


1) memvars are local to the thread including PUBLICs. I use a few 
memvars to set some global variables/setting, like, comma separator, 
help file name, etc. I do not change it later during program execution. 
In MT these PUBLIC memvars are visible only in main thread. Do you 
suggest to duplicate memvars in all threads, or use another approach?

2) We use HB_ATOM_INC for strings usage counters. Can HB_ITEMs used by a 
few threads, or each thread uses its own HB_ITEMs? For example, can we 
pass parameters to hb_threadStart() by reference? If HB_ITEMs can be 
shared among threads, then we need synchronization to access HB_ITEMs 
value (not reference counter only).

3) threads can be used to simplify implementation of IO. It's easier to 
implement synchronous (blocking) IO, let say, wait for some data on COM 
port, instead of asynchronous IO (processing some notification about 
data arival, etc). How can this blocking IO thread can be terminated?
Is it OK to kill a thread if I do not want to listen port any more and 
want to exit application? We do not have function to terminate thread 
among hb_thread*().


Sorry, for dumb questions. Just MT is new think for me. And I would like 
to put some communication code into synchronous mode, to avoid confusing 
protocol state machine.


Best regards,
Mindaugas
From druzus at acn.waw.pl  Thu Sep 18 11:01:36 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 18 11:02:07 2008
Subject: [Harbour] Warnings with new alloc
In-Reply-To: <770C4AEF-02FC-442D-A38D-4D2FE31F512A@syenar.hu>
References: <770C4AEF-02FC-442D-A38D-4D2FE31F512A@syenar.hu>
Message-ID: <20080918150136.GB5189@34-mo7-2.acn.waw.pl>

On Thu, 18 Sep 2008, Szakáts Viktor wrote:

Hi Viktor,

> I'm getting these warnings for the malloc code FYI:
> [ It may be enough to suppress them, like we do for
> sqlite3, at least for these compilers. ]

Please try to compiler current sqlite3 without any #pragma.
I cleaned nearly all standard warnings for GCC/G++ builds.

> MSVS 2008:
> c:\work\harbour\harbour\source\vm\dlmalloc.c(675) : warning C4565: 'malloc' 
> : redefinition; the symbol was previously declared with 
> __declspec(restrict)
> c:\work\harbour\harbour\source\vm\dlmalloc.c(675) : warning C4565: 'malloc' 
> : redefinition; the symbol was previously declared with __declspec(noalias)
> c:\work\harbour\harbour\source\vm\dlmalloc.c(684) : warning C4565: 'free' : 
> redefinition; the symbol was previously declared with __declspec(noalias)
> c:\work\harbour\harbour\source\vm\dlmalloc.c(691) : warning C4565: 'calloc' 
> : redefinition; the symbol was previously declared with 
> __declspec(restrict)
> c:\work\harbour\harbour\source\vm\dlmalloc.c(691) : warning C4565: 'calloc' 
> : redefinition; the symbol was previously declared with __declspec(noalias)
> c:\work\harbour\harbour\source\vm\dlmalloc.c(716) : warning C4565: 
> 'realloc' : redefinition; the symbol was previously declared with 
> __declspec(restrict)
> c:\work\harbour\harbour\source\vm\dlmalloc.c(716) : warning C4565: 
> 'realloc' : redefinition; the symbol was previously declared with 
> __declspec(noalias)
> c:\work\harbour\harbour\source\vm\dlmalloc.c(4023) : warning C4565: 
> 'malloc' : redefinition; the symbol was previously declared with 
> __declspec(restrict)
> c:\work\harbour\harbour\source\vm\dlmalloc.c(4023) : warning C4565: 
> 'malloc' : redefinition; the symbol was previously declared with 
> __declspec(noalias)
> c:\work\harbour\harbour\source\vm\dlmalloc.c(4155) : warning C4565: 'free' 
> : redefinition; the symbol was previously declared with __declspec(noalias)
> c:\work\harbour\harbour\source\vm\dlmalloc.c(4255) : warning C4565: 
> 'calloc' : redefinition; the symbol was previously declared with 
> __declspec(restrict)
> c:\work\harbour\harbour\source\vm\dlmalloc.c(4255) : warning C4565: 
> 'calloc' : redefinition; the symbol was previously declared with 
> __declspec(noalias)
> c:\work\harbour\harbour\source\vm\dlmalloc.c(4270) : warning C4565: 
> 'realloc' : redefinition; the symbol was previously declared with 
> __declspec(restrict)
> c:\work\harbour\harbour\source\vm\dlmalloc.c(4270) : warning C4565: 
> 'realloc' : redefinition; the symbol was previously declared with 
> __declspec(noalias)

I know about them. On some platforms they can be even critical for
compilations (errors). It depends on above function declarations in
C header files which are different between systems. For C compilers
which respects attributes defined in function header declarations it
will be enough to disable prototyping in dlmalloc.c for malloc(),
caloc(), realloc() and free(). You can also use different name space
for dlmalloc functions by defining USE_DL_PREFIX macros (it's enough
to recompile Harbour with it but in such case default C MM also will
be linked to to CRTL dependnces. It' snot optimal but Harbour does
not call memory expensive C functions so it should not be a big
problem. Foreign code linked via DLL will probably use its own
MM even if we use standard ANSI names.

> BCC 5.8.2:
> Warning W8008 source\vm\dlmalloc.c 2787: Condition is always true in 
> function internal_mallinfo
> Warning W8008 source\vm\dlmalloc.c 2825: Condition is always true in 
> function internal_malloc_stats
> Warning W8084 source\vm\dlmalloc.c 3258: Suggest parentheses to clarify 
> precedence in function prepend_alloc
> Warning W8084 source\vm\dlmalloc.c 3314: Suggest parentheses to clarify 
> precedence in function add_segment
> Warning W8004 source\vm\dlmalloc.c 3300: 'nfences' is assigned a value that 
> is never used in function add_segment
> Warning W8019 source\vm\dlmalloc.c 3396: Code has no effect in function 
> sys_alloc
> Warning W8004 source\vm\dlmalloc.c 3430: 'end' is assigned a value that is 
> never used in function sys_alloc
> Warning W8004 source\vm\dlmalloc.c 3429: 'br' is assigned a value that is 
> never used in function sys_alloc
> Warning W8084 source\vm\dlmalloc.c 3545: Suggest parentheses to clarify 
> precedence in function release_unused_segments
> Warning W8041 source\vm\dlmalloc.c 3557: Negating unsigned value in 
> function sys_trim
> Warning W8008 source\vm\dlmalloc.c 3580: Condition is always false in 
> function sys_trim
> Warning W8066 source\vm\dlmalloc.c 3581: Unreachable code in function 
> sys_trim
> Warning W8008 source\vm\dlmalloc.c 3607: Condition is always true in 
> function sys_trim
> Warning W8004 source\vm\dlmalloc.c 3582: 'extra' is assigned a value that 
> is never used in function sys_trim
> Warning W8041 source\vm\dlmalloc.c 3623: Negating unsigned value in 
> function tmalloc_large
> Warning W8084 source\vm\dlmalloc.c 3626: Suggest parentheses to clarify 
> precedence in function tmalloc_large
> Warning W8041 source\vm\dlmalloc.c 3653: Negating unsigned value in 
> function tmalloc_large
> Warning W8041 source\vm\dlmalloc.c 3656: Negating unsigned value in 
> function tmalloc_large
> Warning W8084 source\vm\dlmalloc.c 3657: Suggest parentheses to clarify 
> precedence in function tmalloc_large
> Warning W8084 source\vm\dlmalloc.c 3683: Suggest parentheses to clarify 
> precedence in function tmalloc_large
> Warning W8041 source\vm\dlmalloc.c 3698: Negating unsigned value in 
> function tmalloc_small
> Warning W8084 source\vm\dlmalloc.c 3699: Suggest parentheses to clarify 
> precedence in function tmalloc_small
> Warning W8041 source\vm\dlmalloc.c 3735: Negating unsigned value in 
> function internal_realloc
> Warning W8008 source\vm\dlmalloc.c 3739: Condition is always true in 
> function internal_realloc
> Warning W8066 source\vm\dlmalloc.c 3800: Unreachable code in function 
> internal_realloc
> Warning W8041 source\vm\dlmalloc.c 3816: Negating unsigned value in 
> function internal_memalign
> Warning W8008 source\vm\dlmalloc.c 3830: Condition is always false in 
> function internal_memalign
> Warning W8066 source\vm\dlmalloc.c 3830: Unreachable code in function 
> internal_memalign
> Warning W8041 source\vm\dlmalloc.c 3843: Negating unsigned value in 
> function internal_memalign
> Warning W8008 source\vm\dlmalloc.c 3960: Condition is always false in 
> function ialloc
> Warning W8066 source\vm\dlmalloc.c 3960: Unreachable code in function 
> ialloc
> Warning W8008 source\vm\dlmalloc.c 4047: Condition is always true in 
> function malloc
> Warning W8041 source\vm\dlmalloc.c 4075: Negating unsigned value in 
> function malloc
> Warning W8041 source\vm\dlmalloc.c 4076: Negating unsigned value in 
> function malloc
> Warning W8084 source\vm\dlmalloc.c 4077: Suggest parentheses to clarify 
> precedence in function malloc
> Warning W8041 source\vm\dlmalloc.c 4103: Negating unsigned value in 
> function malloc
> Warning W8066 source\vm\dlmalloc.c 4152: Unreachable code in function 
> malloc
> Warning W8008 source\vm\dlmalloc.c 4173: Condition is always true in 
> function free
> Warning W8084 source\vm\dlmalloc.c 4239: Suggest parentheses to clarify 
> precedence in function free
> Warning W8008 source\vm\dlmalloc.c 4324: Condition is always true in 
> function malloc_trim
> Warning W8004 source\vm\dlmalloc.c 4323: 'result' is assigned a value that 
> is never used in function malloc_trim

Most of them are documented in dlmalloc.c and left intentionally.
I can pacify them though I'd rather suggest to use #pragma for to
disable warnings for it. At least for next few weeks maybe months.
I would like to know real application results before I'll begin to
change this code.

best regards,
Przemek
From miguelangel at marchuet.net  Thu Sep 18 11:04:15 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Thu Sep 18 11:03:52 2008
Subject: [Harbour] 2008-09-18 11:02 UTC+0100 Miguel Angel
	Marchuet	<miguelangel@marchuet.net>
In-Reply-To: <20080918112756.GA1500@34-mo7-2.acn.waw.pl>
References: <48D2195A.1030202@marchuet.net>
	<20080918112756.GA1500@34-mo7-2.acn.waw.pl>
Message-ID: <48D26DEF.9080704@marchuet.net>


> Thanks for adding RT error but it should be done in a little bit different
> way. The above touched only one chosen situation when the same problem can
> appear also for FOR clause. The area for storing KEY and FOR expressions
> in CDX format has 512 bytes. In Clipper it's divided in two fixed size
> region (each has 255 bytes + leading 0). But not all systems have such
> fixed limit and some of them checks only total length of both expressions,
> f.e. ADS. If we want to open files created by them we have to change the
> code not only add RT errors. In theory then may not store leading zeros
> but I do not know if other systems will be able to read such indexes so I
> suggest to set maximum limit for total length of both expressions to 511.
> At least one 0 to divide them. I have it in my local CDX code so I'll
> commit it ASAP. BTW for error code I suggest to add few new constant
> values instead of reusing some others.
> 

I agree.

But some considerations:

1) macro evaluator actually supports 254 chars as in clipper.
    Then it suppose that macro evaluator should grow to support at least 511 chars,
    better 64Kb.		

2) we can support 511 key for ads signatures only. I don't know if clipper inform correct
    length of key

Please commit ;)

Best regards
Miguel Angel Marchuet
From lorenzo.fiorini at gmail.com  Thu Sep 18 11:09:38 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep 18 11:09:44 2008
Subject: [Harbour] mingw cross build issue
In-Reply-To: <20080918143529.GA5189@34-mo7-2.acn.waw.pl>
References: <9257026e0809180607kd98cc11x6185dea499ab9d0f@mail.gmail.com>
	<20080918143529.GA5189@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809180809l2aa55c9cyec9ba9340d2b8492@mail.gmail.com>

On Thu, Sep 18, 2008 at 4:35 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> You are using older (1.0.1 or earlier) harbour vompiler to
> compiler 1.1.0 .prg code.
> THREAD STATIC is supported only in the newest compilers.
> If you want to use the same source code with older ones
> then please use PP rule like:
>
>   #command THREAD STATIC <vars,...> => STATIC <vars>

Sorry, synlink of "native" harbour compiler pointed to 1.0.1.

I'm trying to test MT in 1.1.0 while keeping 1.0.1 for normal work and
I don't always succeed :)

best regards,
Lorenzo
From druzus at acn.waw.pl  Thu Sep 18 11:10:30 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 18 11:11:01 2008
Subject: [Harbour] Re: 2008-09-18 01:17 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48D20843.7000208@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48D20843.7000208@mail.udg.mx>
Message-ID: <20080918151030.GC5189@34-mo7-2.acn.waw.pl>

On Thu, 18 Sep 2008, David Arturo Macias Corona wrote:

Hi David,

> Below are results of current Harbour under eComStation 1.2MR
> gcc 3.3.5
> set C_USR=-DHB_FM_STATISTICS_OFF -DHB_FM_DL_ALLOC
> errors in dlmalloc.c
> In file included from ../../fm.c:117:
> ../../dlmalloc.c: In function `mmap_alloc':
> ../../dlmalloc.c:3120: error: `MAP_PRIVATE' undeclared (first use in this 
> functi
> on)
> ../../dlmalloc.c:3120: error: (Each undeclared identifier is reported only 
> once
> ../../dlmalloc.c:3120: error: for each function it appears in.)
> ../../dlmalloc.c: In function `sys_alloc':
> ../../dlmalloc.c:3417: error: `MAP_PRIVATE' undeclared (first use in this 
> functi
> on)
> ../../dlmalloc.c: In function `release_unused_segments':
> ../../dlmalloc.c:3537: warning: implicit declaration of function `munmap'

If GCC for OS2 does not give emulation layer for mmap functions then
this code will not work for you. It can be updated to use native OS2
API but it should be done by real OS2 user who knows well this system
and some low level functions behavior and performance in different
situations. Now do not enable HB_FM_DL_ALLOC it in OS2 builds.

BTW If possible please recompile Harbour (without HB_FM_DL_ALLOC of
course) and check speedtst.prg in MT mode. I would like to see the
speed difference after my last modification which enabled inlined
assembler version of atomic reference counters incrementation and
decrementation in OS2 builds.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Sep 18 11:23:07 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 18 11:23:30 2008
Subject: [Harbour] 2008-09-18 15:00 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <9257026e0809180713v1e493375p78ee1812364fc435@mail.gmail.com>
References: <01c9198e$Blat.v2.6.2$b97db5e6$162c45fdb062@127.0.0.1>
	<9257026e0809180713v1e493375p78ee1812364fc435@mail.gmail.com>
Message-ID: <414938BC-4701-4DF2-A778-EBBBECAD2C93@syenar.hu>

Hi Lorenzo and all,

Thanks for spotting this, clearly a typo.

I'd appreciate if you or someone else could commit
this, I can't right now, and I may forget it later.

Brgds,
Viktor

On 2008.09.18., at 16:13, Lorenzo Fiorini wrote:

> On Thu, Sep 18, 2008 at 3:01 PM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
>> 2008-09-18 15:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>> * contrib/hbcurl/hbcurl.c
>>   ! Made it compile with a slightly older (~7.15.x)
>>     versions of libcurl. Please test.
>
> Ok also with Centos 5.2 only a small typo in:
>
> ./make_rpm.sh: line 112: [: /usr/include/curl/curl.h: binary  
> operator expected
>
> a "]" left.
>
> best regards,
> Lorenzo

From druzus at acn.waw.pl  Thu Sep 18 11:25:16 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 18 11:25:46 2008
Subject: [Harbour] 2008-09-18 17:24 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080918152516.GA14997@34-mo7-2.acn.waw.pl>

2008-09-18 17:24 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/make_rpm.sh
    * use rpm to test if curl-devel package is installed

  * harbour/include/hbapi.h
  * harbour/source/common/hbstr.c
    + added hb_strduptrim() and hb_strlentrim()

  * harbour/source/rdd/dbfcdx/dbfcdx1.c
    ! control total length of KEY and FOR expression together
      to be compatible with other CDX drivers.
      Total length of both expressions cannot exceed 512 bytes
      (with two trailing ASCII 0 characters)

best regards
Przemek
From harbour.01 at syenar.hu  Thu Sep 18 12:03:04 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 18 12:03:18 2008
Subject: [Harbour] 2008-09-18 17:24 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080918152516.GA14997@34-mo7-2.acn.waw.pl>
References: <20080918152516.GA14997@34-mo7-2.acn.waw.pl>
Message-ID: <EEE25D47-E477-4188-A153-2F1DAE5EC5CB@syenar.hu>

Thanks Przemek.

Brgds,
Viktor

On 2008.09.18., at 17:25, Przemyslaw Czerpak wrote:

> 2008-09-18 17:24 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/make_rpm.sh
>    * use rpm to test if curl-devel package is installed
>
>  * harbour/include/hbapi.h
>  * harbour/source/common/hbstr.c
>    + added hb_strduptrim() and hb_strlentrim()
>
>  * harbour/source/rdd/dbfcdx/dbfcdx1.c
>    ! control total length of KEY and FOR expression together
>      to be compatible with other CDX drivers.
>      Total length of both expressions cannot exceed 512 bytes
>      (with two trailing ASCII 0 characters)
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From miguelangel at marchuet.net  Thu Sep 18 12:06:24 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Thu Sep 18 12:05:43 2008
Subject: [Harbour] 2008-09-18 17:24 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080918152516.GA14997@34-mo7-2.acn.waw.pl>
References: <20080918152516.GA14997@34-mo7-2.acn.waw.pl>
Message-ID: <48D27C80.2080701@marchuet.net>

what about memory leaks:

Compiling...
Harbour 1.1.0dev (Rev. 9441)
Copyright (c) 1999-2008, http://www.harbour-project.org/
Compiling 'test.prg'...
Lines 79, Functions/Procedures 1
Generating C source output to 'test.c'... Done.
Borland C++ 5.82 for Win32 Copyright (c) 1993, 2005 Borland
test.c:
*
Linking...
Turbo Incremental Link 5.69 Copyright (c) 1997-2005 Borland
* Application successfully built

Error DBFCDX/1054  Data width error
Called from ORDCREATE(0)
Called from DBCREATEINDEX(0)
Called from MAIN(29)
----------------------------------------
Total memory allocated: 92423 bytes (719 block(s))
Warning, memory allocated but not released: 604 bytes (3 block(s))
source\vm\fm.c:779: HB_TR_ERROR Block 1 (size 56) ORDCREATE(0), "020000000900000
01C4549003FE2480045020000B10000000100000000000000D01E950000000000000000000000000
02F00000000003F00"
source\vm\fm.c:779: HB_TR_ERROR Block 2 (size 24) ORDCREATE(0), "481F95000002000
0B3010000000000000000000000000000"
source\vm\fm.c:779: HB_TR_ERROR Block 3 (size 512) ORDCREATE(0), "<?6?.}a.111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111
1111111111.H<?6?.H<?6?.H<?6?.H<?6?.H<?6?.H<?6?.H<?6?.H<?6?.H<?6?.H<?6?.H<?6?.H<?
6?.H<?6?.H<?6?.H<?6?.H<?6?.H<?6?.H<?6?.H<?6?.H<?6?.H<?6?.H}a.1111111111111111111
11"

test:

FUNCTION MAIN()

     LOCAL nSec

     LOCAL cVal, i

     REQUEST DBFCDX

     RddSetDefault( "DBFCDX" )

     DBCREATE( "__MYTEST", { { "test", "C", 35, 0 } } )

     USE __MYTEST
     INDEX ON 
FIELD->test+Upper("111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111")+FIELD->test+FIELD->test+FIELD->test+FIELD->test+FIELD->test+FIELD->test+FIELD->test+FIELD->test+FIELD->test+FIELD->test+FIELD->test+FIELD->test+FIELD->test+FIELD->test+FIELD->test+FIELD->test+FIELD->test+FIELD->test+FIELD->test+FIELD->test+FIELD->test+Upper("111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111")+Upper("111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111") 
TO __MYTEST
     ? indexkey()
     FOR i = 1 TO 10000
         APPEND BLANK
         FIELD->test := str(i)
     NEXT
     ? "end"
RETURN NIL


From druzus at acn.waw.pl  Thu Sep 18 12:53:07 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 18 12:53:40 2008
Subject: [Harbour] A few questions about MT
In-Reply-To: <48D2698D.80206@dbtopas.lt>
References: <48D2698D.80206@dbtopas.lt>
Message-ID: <20080918165307.GA15124@34-mo7-2.acn.waw.pl>

On Thu, 18 Sep 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> 1) memvars are local to the thread including PUBLICs. I use a few memvars 
> to set some global variables/setting, like, comma separator, help file 
> name, etc. I do not change it later during program execution. In MT these 
> PUBLIC memvars are visible only in main thread.

To be precise in thread which defined them.

> Do you suggest to duplicate 
> memvars in all threads, or use another approach?

We have few choices. F.e. we can add automatic memvars inheritance
so each child thread will share all parent thread memvars visible
when thread was started as its own PUBLIC variables.
The variables will be shared so you will have to add your own
synchronization code if you want to change them (write operation).
Such method is natural for our memvar code and can be easy implemented.
AFAIK xbase++ shares public variables between threads. But I do not know
detail behavior of such solution in some strange situation (f.e. thread
declares public when some other threads or even this one have private
variables. Clipper in such case overwrite private and do not create
public one. I do not know if exact implementation of above feature will
not interact with Clipper compatibility. I can try to implement it
respecting only Clipper behavior. It should be enough to keep public
handles separated from privates and use them when there is no private
handle with the same symbol. As 3-rd option we can add support for
GLOBAL variables though implemented without hardcoded links like in
xHarbour but by dynamic symbol table so they will work also with .hrb
files and will not reduce the speed in code which does not use them.

> 2) We use HB_ATOM_INC for strings usage counters. Can HB_ITEMs used by a 
> few threads, or each thread uses its own HB_ITEMs? For example, can we pass 
> parameters to hb_threadStart() by reference? If HB_ITEMs can be shared 
> among threads, then we need synchronization to access HB_ITEMs value (not 
> reference counter only).

Variables can be fully shared between threads. You can pass them by
reference, detach and move between threads directly or indirectly f.e.
by codeblocks. There is only one exception which is not safe even in
single thread mode just like in Clipper. Storing local references
in arrays ( { @localVar } ) does not automatically detach them from
HVM stack. It allows to create code which may corrupt HVM stack, f.e
you can create references to unused part of stack...
Ups... I forgot to add detaching local vars passed by reference to
hb_threadStart(). I'll add it in a while. I was thinking about adding
automatic detaching which would resolve the problem with arrays also
but I haven't time to make speed tests.

Please only remember that HVM synchronize only read only access to
variables. If you want to modify variables which can be access
simultaneously by different threads then you should add your own
protection code. Now you can uses mutexes (they are also conditional
variables and message queues) for this job. I'll add support for
object sync methods soon. You can think about this mechanism just
like about automatic instance are protection. Each object will have
it's own critical section which is gate for each methods declared
with SYNC attribute.

> 3) threads can be used to simplify implementation of IO. It's easier to 
> implement synchronous (blocking) IO, let say, wait for some data on COM 
> port, instead of asynchronous IO (processing some notification about data 
> arival, etc). How can this blocking IO thread can be terminated?

I haven't implement low level cancel mechanism intentionally. To avoid
resource leaks each thread has to cleanly leave HVM closing all handles
and freeing memory. So know the only one way to terminate other thread
is sending QUIT request to this thread by hb_threadQuitRequest(). This
request is recognized only by HVM code. I adde two functions hb_vmUnlock()
and hb_vmLock() and encapsulate potentially slow file IO operations between
their calls. It gives three things. It inform other threads that the current
one is not HVM active so it's possible to start GC pass (only one thread can
be HVM active during GC mark/scan pass), if necessary stops execution if
some threads forces GC usage and checks for pending QUITE requests. After
calling them thread in C code may use hb_vmRequestQuery() to check if there
is QUITE request and interrupt the job by simple return. But it will not
interrupt thread waiting on IO operation. In some OSes IO operations are
not cancel points so it's not even techincally possible to cancel thread
in IO operation. For this it's necessary to intorduce OS dependent mechanism
which we can wait on available events and also for kill signals. F.e. for
MS-Win WiatForMultipleObjects() can be use and it will be enough to add to
HVM function which will return handle to termination semaphore. If events
comes from this semaphore the thread call HVM functions to check what
has happen and receives information if it should terminate or can continue
its job. But before we try to implement it first I suggest to collect some
experience from different OS-es and current to not hard code some local
only solution.

> Is it OK to kill a thread if I do not want to listen port any more and want 
> to exit application? We do not have function to terminate thread among 
> hb_thread*().

When main thread leave HVM (by calling QUITE or returning from MAIN
procedure then QUITE request is sent to all HVM threads and main thread
waits for all other HVM thread termination. Anyhow it does not break any
blocking IO operations. It has to be implemented in the thread code.
For our own code, f.e. using hb_inet*() functions I hope we will add
respecting HVM signals ASAP. But 3-r dparty code will have to be addotpted
to respect it.
>From your own code you can use hb_threadQuitRequest( <pThID> ) which
send thread request to given thread with blocking the caller and
hb_threadTerminateAll() which sends QUITE request to all threads and
waits for their termination blocking the caller. But as I said above
sending QUITE request will have immediately effect only on .prg code
or .c code which uses hb_vmLock()/hb_vmUnlock() and/or hb_vmRequestQuery()
and will not cancel/wake up threads waiting for blocking IO operations
if the code was not adopted for such situations.

> Sorry, for dumb questions. Just MT is new think for me. And I would like to 
> put some communication code into synchronous mode, to avoid confusing 
> protocol state machine.

There are not dump questions but very good ones. They also greatly
illustrate the problems which we have to resolve and which have to
be resolved by user.
BTW if you need some working solution now then you can use simple pooling
with some timeout f.e. few seconds to leave hbinet.c code for a while and
your thread will be terminated inside .prg code immediately.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Thu Sep 18 12:54:06 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep 18 12:54:13 2008
Subject: [Harbour] mingwce cross build issue
Message-ID: <9257026e0809180954l462df31cr6aa6940cb203b7c@mail.gmail.com>

Under Fedora 9 using cegcc-mingw32ce-0.50-1.i586 I get:

In file included from ../../../arrays.c:78:
../../../../../include/hbstack.h:194: error: thread-local storage not
supported for this target
make[4]: *** [arrays.o] Error 1

( I hope I didn't mess the env this time ).

best regards,
Lorenzo
From druzus at acn.waw.pl  Thu Sep 18 13:19:36 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 18 13:20:05 2008
Subject: [Harbour] 2008-09-18 11:02 UTC+0100 Miguel Angel Marchuet
	<miguelangel@marchuet.net>
In-Reply-To: <48D26DEF.9080704@marchuet.net>
References: <48D2195A.1030202@marchuet.net>
	<20080918112756.GA1500@34-mo7-2.acn.waw.pl>
	<48D26DEF.9080704@marchuet.net>
Message-ID: <20080918171936.GB15124@34-mo7-2.acn.waw.pl>

On Thu, 18 Sep 2008, Miguel Angel Marchuet wrote:

Hi Miguel,

> But some considerations:
> 1) macro evaluator actually supports 254 chars as in clipper.
>    Then it suppose that macro evaluator should grow to support at least 511 chars,
>    better 64Kb.		

In Harbour it's quarantied that each macro up to 8MB will work. In fact
it can be much bigger but we stop to guaranties that it can be compiled.
If such situations will appear Harbour generate clean RT error during
macro compilation.
In xHarbour maximal guaranted size is 32767 bytes and there is no protection
against posisble errors caused by longer macros. They are silently compiled
but wrong PCODE is generated whci may can any other unpredicitble results
like RT errors or GPFs during execution.
In Clipper 256 bytes is guarantied (at least in documentaiton). It also can
compile longer macro strings and then they can but do not have to work.
It depends on their body.
Clipper does not have good enough protection against maximum macro size
what can cause internal VM structure corruption. It can be exploited
even by macros shorter then 256 bytes if they are complicated enough.

Each from the above compilers can support macros longer then above
limits if they are not use some constructions.
F.e. try this code in Clipper:

   proc main()
   local s
      s:='{|x| x $ "' + repl("ABCDEFGHIJ", 20) + '" .or.' + ;
             ' x $ "' + repl("0123456789", 20) + '" }'
      ? len(s)
      ? eval(&s,"F")
      ? eval(&s,"X")
   return

It will work just like xHarbour can support macros longer then 32Kb
and Harbour longer then 8Mb.
Though only Harbour cleanly checks all limits during compilations.

> 2) we can support 511 key for ads signatures only. I don't know if clipper inform correct
>    length of key

COMIX yes. There were some problems with SIX drivers but I do not remember
them exactly and to be honest I'm too lazy to repeat tests. Sorry.
I've just committed and the code should work even without proper macro
expresison length in tag header.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Sep 18 13:28:17 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 18 13:28:46 2008
Subject: [Harbour] 2008-09-18 19:28 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080918172817.GA13282@34-mo7-2.acn.waw.pl>

2008-09-18 19:28 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
    ! fixed memory leak - Many thanks to Miguel for report

best regards
Przemek
From druzus at acn.waw.pl  Thu Sep 18 13:34:22 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 18 13:34:51 2008
Subject: [Harbour] mingwce cross build issue
In-Reply-To: <9257026e0809180954l462df31cr6aa6940cb203b7c@mail.gmail.com>
References: <9257026e0809180954l462df31cr6aa6940cb203b7c@mail.gmail.com>
Message-ID: <20080918173422.GA13278@34-mo7-2.acn.waw.pl>

On Thu, 18 Sep 2008, Lorenzo Fiorini wrote:
> Under Fedora 9 using cegcc-mingw32ce-0.50-1.i586 I get:
> In file included from ../../../arrays.c:78:
> ../../../../../include/hbstack.h:194: error: thread-local storage not
> supported for this target
> make[4]: *** [arrays.o] Error 1

Do not use HB_USE_TLS macro. __thread keyword is not supported by
this platform/C compiler.

BTW AFAIK WinCE does not support threads (maybe newer versions can)
so you can make 
   export HB_MT=no
to disable HBVMMT build for this platform.

best regards,
Przemek
From maurilio.longo at libero.it  Thu Sep 18 13:41:15 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Sep 18 13:41:26 2008
Subject: [Harbour] A few questions about MT
In-Reply-To: <20080918165307.GA15124@34-mo7-2.acn.waw.pl>
References: <48D2698D.80206@dbtopas.lt>
	<20080918165307.GA15124@34-mo7-2.acn.waw.pl>
Message-ID: <48D292BB.8060203@libero.it>

Przemyslaw,

this is from xbase++ docs (I've attached it), maybe you already did read it.
Anyway I think it could be usefull to be compatible here given that xbase++
has a great user base and has threads since day one.

Best regards.

Maurilio.

PS. I'll try to build latest harbour on OS/2 in the coming days and I will
tell you what happens. A very bright work, this one of yours, as usual! :)


Przemyslaw Czerpak wrote:
> On Thu, 18 Sep 2008, Mindaugas Kavaliauskas wrote:
> 
> Hi Mindaugas,
> 
>> 1) memvars are local to the thread including PUBLICs. I use a few memvars 
>> to set some global variables/setting, like, comma separator, help file 
>> name, etc. I do not change it later during program execution. In MT these 
>> PUBLIC memvars are visible only in main thread.
> 
> To be precise in thread which defined them.
> 
>> Do you suggest to duplicate 
>> memvars in all threads, or use another approach?
> 
> We have few choices. F.e. we can add automatic memvars inheritance
> so each child thread will share all parent thread memvars visible
> when thread was started as its own PUBLIC variables.
> The variables will be shared so you will have to add your own
> synchronization code if you want to change them (write operation).
> Such method is natural for our memvar code and can be easy implemented.
> AFAIK xbase++ shares public variables between threads. But I do not know
> detail behavior of such solution in some strange situation (f.e. thread
> declares public when some other threads or even this one have private
> variables. Clipper in such case overwrite private and do not create
> public one. I do not know if exact implementation of above feature will
> not interact with Clipper compatibility. I can try to implement it
> respecting only Clipper behavior. It should be enough to keep public
> handles separated from privates and use them when there is no private
> handle with the same symbol. As 3-rd option we can add support for
> GLOBAL variables though implemented without hardcoded links like in
> xHarbour but by dynamic symbol table so they will work also with .hrb
> files and will not reduce the speed in code which does not use them.
> 
>> 2) We use HB_ATOM_INC for strings usage counters. Can HB_ITEMs used by a 
>> few threads, or each thread uses its own HB_ITEMs? For example, can we pass 
>> parameters to hb_threadStart() by reference? If HB_ITEMs can be shared 
>> among threads, then we need synchronization to access HB_ITEMs value (not 
>> reference counter only).
> 
> Variables can be fully shared between threads. You can pass them by
> reference, detach and move between threads directly or indirectly f.e.
> by codeblocks. There is only one exception which is not safe even in
> single thread mode just like in Clipper. Storing local references
> in arrays ( { @localVar } ) does not automatically detach them from
> HVM stack. It allows to create code which may corrupt HVM stack, f.e
> you can create references to unused part of stack...
> Ups... I forgot to add detaching local vars passed by reference to
> hb_threadStart(). I'll add it in a while. I was thinking about adding
> automatic detaching which would resolve the problem with arrays also
> but I haven't time to make speed tests.
> 
> Please only remember that HVM synchronize only read only access to
> variables. If you want to modify variables which can be access
> simultaneously by different threads then you should add your own
> protection code. Now you can uses mutexes (they are also conditional
> variables and message queues) for this job. I'll add support for
> object sync methods soon. You can think about this mechanism just
> like about automatic instance are protection. Each object will have
> it's own critical section which is gate for each methods declared
> with SYNC attribute.
> 
>> 3) threads can be used to simplify implementation of IO. It's easier to 
>> implement synchronous (blocking) IO, let say, wait for some data on COM 
>> port, instead of asynchronous IO (processing some notification about data 
>> arival, etc). How can this blocking IO thread can be terminated?
> 
> I haven't implement low level cancel mechanism intentionally. To avoid
> resource leaks each thread has to cleanly leave HVM closing all handles
> and freeing memory. So know the only one way to terminate other thread
> is sending QUIT request to this thread by hb_threadQuitRequest(). This
> request is recognized only by HVM code. I adde two functions hb_vmUnlock()
> and hb_vmLock() and encapsulate potentially slow file IO operations between
> their calls. It gives three things. It inform other threads that the current
> one is not HVM active so it's possible to start GC pass (only one thread can
> be HVM active during GC mark/scan pass), if necessary stops execution if
> some threads forces GC usage and checks for pending QUITE requests. After
> calling them thread in C code may use hb_vmRequestQuery() to check if there
> is QUITE request and interrupt the job by simple return. But it will not
> interrupt thread waiting on IO operation. In some OSes IO operations are
> not cancel points so it's not even techincally possible to cancel thread
> in IO operation. For this it's necessary to intorduce OS dependent mechanism
> which we can wait on available events and also for kill signals. F.e. for
> MS-Win WiatForMultipleObjects() can be use and it will be enough to add to
> HVM function which will return handle to termination semaphore. If events
> comes from this semaphore the thread call HVM functions to check what
> has happen and receives information if it should terminate or can continue
> its job. But before we try to implement it first I suggest to collect some
> experience from different OS-es and current to not hard code some local
> only solution.
> 
>> Is it OK to kill a thread if I do not want to listen port any more and want 
>> to exit application? We do not have function to terminate thread among 
>> hb_thread*().
> 
> When main thread leave HVM (by calling QUITE or returning from MAIN
> procedure then QUITE request is sent to all HVM threads and main thread
> waits for all other HVM thread termination. Anyhow it does not break any
> blocking IO operations. It has to be implemented in the thread code.
> For our own code, f.e. using hb_inet*() functions I hope we will add
> respecting HVM signals ASAP. But 3-r dparty code will have to be addotpted
> to respect it.
>>From your own code you can use hb_threadQuitRequest( <pThID> ) which
> send thread request to given thread with blocking the caller and
> hb_threadTerminateAll() which sends QUITE request to all threads and
> waits for their termination blocking the caller. But as I said above
> sending QUITE request will have immediately effect only on .prg code
> or .c code which uses hb_vmLock()/hb_vmUnlock() and/or hb_vmRequestQuery()
> and will not cancel/wake up threads waiting for blocking IO operations
> if the code was not adopted for such situations.
> 
>> Sorry, for dumb questions. Just MT is new think for me. And I would like to 
>> put some communication code into synchronous mode, to avoid confusing 
>> protocol state machine.
> 
> There are not dump questions but very good ones. They also greatly
> illustrate the problems which we have to resolve and which have to
> be resolved by user.
> BTW if you need some working solution now then you can use simple pooling
> with some timeout f.e. few seconds to leave hbinet.c code for a while and
> your thread will be terminated inside .prg code immediately.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


-------------- next part --------------
The ability to divide a program up into different threads presents a new dimension for programmers who have not previously programmed in a multi-threading environment. Although creating threads is simple in Xbase++, programming a multi-threaded application adds new complexity and requirements for the design of programs. In addition, new sources of error must be considered which may result from different parts of an application being executed at the same time. First of all, multi-threading affects the visibility of variables in different threads. The following table shows the differences:

Visibility of variables in different threads

  Visibility              Storage class

  Visible in the process  PUBLIC
  (all threads)           STATIC

  Visible in the thread   LOCAL
  (this Thread)           PRIVATE
                          FIELD

Variables declared as LOCAL or PRIVATE are only visible in the thread where the declaration occurred. The variables declared with PUBLIC or STATIC are visible in all threads of a process (application program). Field variables (FIELD) are visible in a work area of a work space. A work space is bound to a thread. Since work spaces can be moved between threads, field variables can become visible in different threads. At a given point in time, a field variable is visible only in one thread.

Whenever program code is divided up into different threads, the possibility of multiple threads having simultaneous access to the same variable (PUBLIC or STATIC) and changing it should be avoided. If multiple threads are modifying the same variable, the value of the variable is not predictable. The following example demonstrates this situation:

   STATIC snNumber := 0                  // file-wide visible STATIC

   PROCEDURE Main
      LOCAL i, oThread := Thread():new() // create thread object

      oThread:start( "Decrement" )       // decrement snNumber

      FOR i:=1 TO 10000
         snNumber ++                     // increment snNumber
      NEXT

      ? "Result:", snNumber              // theoretically this is 0
   RETURN

   PROCEDURE Decrement
      LOCAL i
      FOR i:=1 TO 10000

         snNumber --                     // decrement snNumber
      NEXT

   RETURN

In the example, two FOR...NEXT loops run simultaneously in two different threads. The same STATIC variable is accessed in both threads. The first thread increments the variable 10000 times and the second thread decrements the variable 10000 times. Theoretically, the result would be the value zero. In practice this value is seldom reached. Generally the value of snNumber at the end of the program is greater than zero. This is because the operating system independently allocates the processor time for the two threads. The FOR...NEXT loop in the Main procedure begins incrementing as soon as the first thread is started. Switching between the threads takes time, and the STATIC variable increments several times before the second thread has actually started. When the FOR...NEXT loop in the first thread ends, the entire process is terminated, including the second thread. This means that the FOR...NEXT loop in the second thread is cancelled before the counter variable i reaches the value 10000. For this reason, the value of snNumber at the end of the program is almost always greater than zero.

This program demonstrates that programming multiple threads requires consideration of special issues. Simultaneous access to the same variables or files by multiple threads should be avoided. When two threads are using the same variables, the result (or the value of the variable) is not predictable, since the operating system allocates which thread is to receive available processor time. The thread which last performed an assignment sets the value of the variable. As a general rule, the part of the program that is to run in a separate thread should be written in such way that it can be compiled and linked as an independent program. All variables in a thread should be protected from access by other threads.
From info at fsgiudice.com  Thu Sep 18 14:06:26 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Thu Sep 18 14:06:36 2008
Subject: [Harbour] Tagged: Harbour 1.0.1 (r9429)
In-Reply-To: <ADC4A068-C546-4A65-938F-503CD3F36752@syenar.hu>
References: <ADC4A068-C546-4A65-938F-503CD3F36752@syenar.hu>
Message-ID: <48D298A2.7080708@fsgiudice.com>

Hi Viktor,


Szak?ts Viktor ha scritto:
> Hi all,
> 
> I've tagged Harbour release 1.0.1 (r9429).
> I'll upload sources and some binaries soon.
> 
Excellent job!

FYI, today sf.net reports Harbour in Overall Rank at position 172 and at 
10th under Database category.

http://sourceforge.net/project/stats/rank_history.php?group_id=681&ugn=harbour-project
http://sourceforge.net/softwaremap/trove_list.php?form_cat=66

Very good, my compliments to you, Przemek and all.

Best Regards

Francesco



From druzus at acn.waw.pl  Thu Sep 18 14:41:55 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 18 14:42:25 2008
Subject: [Harbour] 2008-09-18 20:41 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080918184155.GA5731@34-mo7-2.acn.waw.pl>

2008-09-18 20:41 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/thread.c
    * detach local parameters passed by reference to hb_threadStart()
      to avoid possible calling thread HVM stack corruption

best regards
Przemek
From harbour.01 at syenar.hu  Thu Sep 18 14:54:47 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 18 14:54:56 2008
Subject: [Harbour] A few questions about MT
In-Reply-To: <48D2698D.80206@dbtopas.lt>
References: <48D2698D.80206@dbtopas.lt>
Message-ID: <2F43D8B8-2727-494E-83EF-F6D1D449479F@syenar.hu>

Hi folks,

I also have one:

If a given thread gets a non-handled RTE, or, an internal
error, will the whole application fail and exit, or just
the thread where the error occured?

Brgds,
Viktor

On 2008.09.18., at 16:45, Mindaugas Kavaliauskas wrote:

> Hi,
>
>
> 1) memvars are local to the thread including PUBLICs. I use a few  
> memvars to set some global variables/setting, like, comma separator,  
> help file name, etc. I do not change it later during program  
> execution. In MT these PUBLIC memvars are visible only in main  
> thread. Do you suggest to duplicate memvars in all threads, or use  
> another approach?
>
> 2) We use HB_ATOM_INC for strings usage counters. Can HB_ITEMs used  
> by a few threads, or each thread uses its own HB_ITEMs? For example,  
> can we pass parameters to hb_threadStart() by reference? If HB_ITEMs  
> can be shared among threads, then we need synchronization to access  
> HB_ITEMs value (not reference counter only).
>
> 3) threads can be used to simplify implementation of IO. It's easier  
> to implement synchronous (blocking) IO, let say, wait for some data  
> on COM port, instead of asynchronous IO (processing some  
> notification about data arival, etc). How can this blocking IO  
> thread can be terminated?
> Is it OK to kill a thread if I do not want to listen port any more  
> and want to exit application? We do not have function to terminate  
> thread among hb_thread*().
>
>
> Sorry, for dumb questions. Just MT is new think for me. And I would  
> like to put some communication code into synchronous mode, to avoid  
> confusing protocol state machine.
>
>
> Best regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Sep 18 15:00:52 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 18 15:01:03 2008
Subject: [Harbour] Warnings with new alloc
In-Reply-To: <20080918150136.GB5189@34-mo7-2.acn.waw.pl>
References: <770C4AEF-02FC-442D-A38D-4D2FE31F512A@syenar.hu>
	<20080918150136.GB5189@34-mo7-2.acn.waw.pl>
Message-ID: <6DAF412B-A241-4554-A55C-619FCE337193@syenar.hu>

Hi Przemek and all,

>> I'm getting these warnings for the malloc code FYI:
>> [ It may be enough to suppress them, like we do for
>> sqlite3, at least for these compilers. ]
>
> Please try to compiler current sqlite3 without any #pragma.
> I cleaned nearly all standard warnings for GCC/G++ builds.

Okay, I'll check, although I was thinking about sqlite3.c
recently, since a new version is out, and there are so
many differences in both our version and their new version,
that it's impossible to upgrade without losing your
fixes, and it's not difficult to guess, that most of
the problems you've fixed, didn't make it into the new
version (albeit they claimed better portability).

[ The other problem is that some of our smaller supported
compilers cannot cope with the "amalgamation" sqlite3.c
file, since it's too big, so we should also think about
using the split version somehow. ]

So, and I really don't know what is the best solution,
what do you guys propose for the problems above on the
longer run?

We could either pick the latest version, patch it again
(we still have a few warnings here and there - I have them),
and submit to the sqlite3 author? I can help in this, but
the patching needs to be done again :(

>> c:\work\harbour\harbour\source\vm\dlmalloc.c(4270) : warning C4565:
>> 'realloc' : redefinition; the symbol was previously declared with
>> __declspec(noalias)
>
> I know about them. On some platforms they can be even critical for
> compilations (errors). It depends on above function declarations in
> C header files which are different between systems. For C compilers
> which respects attributes defined in function header declarations it
> will be enough to disable prototyping in dlmalloc.c for malloc(),
> caloc(), realloc() and free(). You can also use different name space
> for dlmalloc functions by defining USE_DL_PREFIX macros (it's enough
> to recompile Harbour with it but in such case default C MM also will
> be linked to to CRTL dependnces. It' snot optimal but Harbour does
> not call memory expensive C functions so it should not be a big
> problem. Foreign code linked via DLL will probably use its own
> MM even if we use standard ANSI names.

Okay, I let this to your best judgement.

>> BCC 5.8.2:
>> Warning W8004 source\vm\dlmalloc.c 4323: 'result' is assigned a  
>> value that
>> is never used in function malloc_trim
>
> Most of them are documented in dlmalloc.c and left intentionally.
> I can pacify them though I'd rather suggest to use #pragma for to
> disable warnings for it. At least for next few weeks maybe months.
> I would like to know real application results before I'll begin to
> change this code.

Absolutely reasonable, let's revisit this later.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep 18 15:09:36 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 18 15:09:53 2008
Subject: [Harbour] A few questions about MT
In-Reply-To: <20080918165307.GA15124@34-mo7-2.acn.waw.pl>
References: <48D2698D.80206@dbtopas.lt>
	<20080918165307.GA15124@34-mo7-2.acn.waw.pl>
Message-ID: <A1E8AD22-84C4-4717-9C48-26E0664DA207@syenar.hu>

Hi Przemek, Mindaugas,

>> We have few choices. F.e. we can add automatic memvars inheritance
> so each child thread will share all parent thread memvars visible
> when thread was started as its own PUBLIC variables.
> The variables will be shared so you will have to add your own
> synchronization code if you want to change them (write operation).
> Such method is natural for our memvar code and can be easy  
> implemented.
> AFAIK xbase++ shares public variables between threads. But I do not  
> know
> detail behavior of such solution in some strange situation (f.e.  
> thread
> declares public when some other threads or even this one have private
> variables. Clipper in such case overwrite private and do not create
> public one. I do not know if exact implementation of above feature  
> will
> not interact with Clipper compatibility. I can try to implement it
> respecting only Clipper behavior. It should be enough to keep public
> handles separated from privates and use them when there is no private
> handle with the same symbol. As 3-rd option we can add support for
> GLOBAL variables though implemented without hardcoded links like in
> xHarbour but by dynamic symbol table so they will work also with .hrb
> files and will not reduce the speed in code which does not use them.

For now, I'd personally vote to make PUBLICs visible for
all threads (otherwise most apps would need to be rewritten
in this respect I guess), and PRIVATEs to the threads that
define them. 'THREAD PUBLIC' could be introduced to create
PUBLICs visible only for the current thread if someone
needs such thing. It would be analogous to THREAD STATIC.

[ BTW, it's difficult to stay 100% Clipper compatible
here, as we're having situations which were nonexistent
in the Clipper-era. MT-enabled code is essentially
non-Clipper compatible anyway, so if we can keep ST
behavior Clipper-compatible, I think it's no problem to
deviate from 100% compatibility for MT cases. ]

Can someone check XBase++ behaviour?

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep 18 15:32:09 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 18 15:32:18 2008
Subject: [Harbour] 2008-09-18 21:31 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c919c5$Blat.v2.6.2$3dfe3e36$1420779fe2ee@127.0.0.1>

2008-09-18 21:31 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/xhb/Makefile
  * contrib/xhb/common.mak
  + contrib/xhb/xhbcopyf.c
  + contrib/xhb/tests
  + contrib/xhb/tests/testcp.prg
  + contrib/xhb/tests/bld_b32.bat
  + contrib/xhb/tests/bld_vc.bat
    + Added XHB_COPYFILE() function, which is (more or less) 
      compatible with xhb's extended __COPYFILE() function.
      Thanks to Toninho for the initial code and hint.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep 18 16:01:23 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 18 16:01:26 2008
Subject: [Harbour] 2008-09-18 22:00 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c919c9$Blat.v2.6.2$535ff20c$101c763f7a90@127.0.0.1>

2008-09-18 22:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/vm/fm.c
    ! Suppressing warnings for foreign dmalloc.c code for BCC.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Thu Sep 18 16:25:48 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 18 16:26:17 2008
Subject: [Harbour] A few questions about MT
In-Reply-To: <2F43D8B8-2727-494E-83EF-F6D1D449479F@syenar.hu>
References: <48D2698D.80206@dbtopas.lt>
	<2F43D8B8-2727-494E-83EF-F6D1D449479F@syenar.hu>
Message-ID: <20080918202548.GA31987@34-mo7-2.acn.waw.pl>

On Thu, 18 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I also have one:
> If a given thread gets a non-handled RTE, or, an internal
> error, will the whole application fail and exit, or just
> the thread where the error occured?

RT errors, begin sequence / break / recover / always statements,
object destructs, quit, are handled by each thread separately by
the thread when the event happen without inter thread interaction.
Each thread has it's own error handler by default initialized
by ERRORSYS() function call at thread startup. You can create
MT safe code using above construction without any problems,
There is only one exception QUIT executed by main thread sends
QUIT requests to all other HVM threads and waits for their
termination. Then it executes all exit procedures. The same
happens when main thread finish its job returning for main
startup function.

With the internal error situation is different. They are
generated in unusual situations when we cannot continue farther
execution safely, f.e. due to internal HVM structures corruption.
Internal error handler executes exit() function which may terminate
the whole program but does not have to. It may also suspend only
calling thread waiting for others (f.e. until they terminate
or reach some place where can be killed). It's platform dependent
behavior. The one thing we can make in such case yet is sending non
blocking QUIT request to all other HVM threads before calling exit().
Probably I'll add it ASAP.

best regards,
Przemek
From paul.strand8 at gmail.com  Thu Sep 18 16:50:35 2008
From: paul.strand8 at gmail.com (Paul Strand)
Date: Thu Sep 18 16:50:42 2008
Subject: [Harbour] using make_gnu.bat to build Harbour
Message-ID: <679aaa3d0809181350u23813b4ame9bcb96a15ef988e@mail.gmail.com>

Hello, this is my first post to the list. Thanks guys for an outstanding
work that you are doing!
I am trying to build Harbour using make_gnu.bat and mingw32. I have created
a batch file this way:

set HB_GT_LIB=gtgui
SET HB_GT_DEFAULT=gui
make_gnu.bat

It gets built fine, but when I try to build an exe it always request to link
-lgtwin or I get an unresolved external HB_FUN_HB_GT_WIN

and if I include it, then a console window is always created. Is gtwin a
must ? How to get ride of the console window ? I am using the Windows api
functions directly (CreateWindow(),...)

Any hint is welcome,

Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080918/36537afe/attachment.html
From dmacias at mail.udg.mx  Thu Sep 18 18:52:48 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Sep 18 18:52:52 2008
Subject: [Harbour] Re: 2008-09-18 01:17 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48D2DBC0.9010200@mail.udg.mx>

Przemek:

 >If GCC for OS2 does not give emulation layer for mmap functions then
 >this code will not work for you. It can be updated to use native OS2
 >API but it should be done by real OS2 user who knows well this system
 >and some low level functions behavior and performance in different
 >situations. Now do not enable HB_FM_DL_ALLOC it in OS2 builds.

OK, disabled

 >BTW If possible please recompile Harbour (without HB_FM_DL_ALLOC of
 >course) and check speedtst.prg in MT mode. I would like to see the
 >speed difference after my last modification which enabled inlined
 >assembler version of atomic reference counters incrementation and
 >decrementation in OS2 builds.

Below are results of current Harbour under eComStation 1.2MR
gcc 3.3.5

set C_USR=-DHB_FM_STATISTICS_OFF

new warnings in set.c

Below are results of some tests:

a) memtst.prg
    ST:  Fail with hb_xrealloc error
      same as before
    MT:  Does not fail

b) speedtst.prg
ST
   total application time:                              46.99
   total real time:                                     46.99
MT
   total application time:                              67.05
   total real time:                                     67.05

before:
   total application time:                             135.88
   total real time:                                    135.88

ST keep same as previous, but MT fall from 135.88 to 67.05
  50 % faster  :-)
Do you expected more or less ?

c) mt\mttest01.prg - 07.prg
   FAILED mttest05, mttest06
    something appear/disappear flashing in screen

David Macias


../../set.c: In function `open_handle':
../../set.c:212: warning: passing arg 1 of `hb_strupr' discards 
qualifiers from
pointer target type
../../../set.c: In function `open_handle':
../../../set.c:212: warning: passing arg 1 of `hb_strupr' discards 
qualifiers fr
om pointer target type


AMD Athlon 2200+ 2.0GHz, 1 Gb RAM, gcc 3.3.5

a) memtst.prg
------------------------
[E:\harbour809mt\harbour\tests]memtst_st.exe


09/18/08 17:17:06 Harbour 1.1.0dev (Rev. 9445), OS/2 4.50

testing single large memory blocks allocation and freeing...
  CPU time:          1.21 sec.
real time:          1.21 sec.

testing many large memory blocks allocation and freeing...
  CPU time:          9.69 sec.
real time:          9.69 sec.

testing large memory block reallocation with intermediate allocations...
Warning!!! some compilers may badly fail here
Press any key to continue...      1000      2000      3000      4000 
   5000
     6000      7000      8000      9000     10000     11000     12000 
   13000
    14000     15000     16000     17000     18000     19000     20000 
   21000
    22000     23000     24000     25000     26000     27000     28000 
   29000
    30000     31000     32000     33000     34000     35000     36000 
   37000
    38000     39000     40000     41000     42000     43000     44000 
   45000
    46000     47000     48000     49000     50000     51000     52000 
   53000
    54000     55000     56000     57000     58000     59000     60000 
   61000
    62000     63000     64000
Unrecoverable error 9009: hb_xrealloc can't reallocate memory
Called from AADD(0)
                    Called from MAIN(67) in memtst.prg


------------------------

[E:\harbour809mt\harbour\tests]memtst_mt.exe

09/18/08 17:18:30 Harbour 1.1.0dev (Rev. 9445) (MT), OS/2 4.50

testing single large memory blocks allocation and freeing...
  CPU time:          1.23 sec.
real time:          1.23 sec.

testing many large memory blocks allocation and freeing...
  CPU time:          9.91 sec.
real time:          9.91 sec.

testing large memory block reallocation with intermediate allocations...
Warning!!! some compilers may badly fail here
Press any key to continue...      1000      2000      3000      4000 
   5000
     6000      7000      8000      9000     10000     11000     12000 
   13000
    14000     15000     16000     17000     18000     19000     20000 
   21000
    22000     23000     24000     25000     26000     27000     28000 
   29000
    30000     31000     32000     33000     34000     35000     36000 
   37000
    38000     39000     40000     41000     42000     43000     44000 
   45000
    46000     47000     48000     49000     50000     51000     52000 
   53000
    54000     55000     56000     57000     58000     59000     60000 
   61000
    62000     63000     64000     65000     66000     67000     68000 
   69000
    70000     71000     72000     73000     74000     75000     76000 
   77000
    78000     79000     80000     81000     82000     83000     84000 
   85000
    86000     87000     88000     89000     90000     91000     92000 
   93000
    94000     95000     96000     97000     98000     99000    100000
  CPU time:          0.80 sec.
real time:          0.80 sec.
Press any key to continue...

------------------------

b) speedtst.prg

[E:\harbour809mt\harbour\tests]speedtst_mt.exe

Startup loop to increase CPU clock...

09/18/08 17:22:45 Harbour 1.1.0dev (Rev. 9445), OS/2 4.50
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.17
CPU usage -> secondsCPU()

c:=L_C ->                                             0.00
n:=L_N ->                                             0.00
d:=L_D ->                                             0.21
c:=M_C ->                                             0.37
n:=M_N ->                                             0.00
d:=M_D ->                                             0.09
(sh) c:=F_C ->                                        0.50
(sh) n:=F_N ->                                        0.40
(sh) d:=F_D ->                                        0.23
(ex) c:=F_C ->                                        1.09
(ex) n:=F_N ->                                        0.34
(ex) d:=F_D ->                                        0.00
n:=o:GenCode ->                                       1.13
n:=o[8] ->                                            0.00
round(i/1000,2) ->                                    0.85
str(i/1000) ->                                        1.31
val(a3[i%ARR_LEN+1]) ->                               0.88
dtos(j+i%10000-5000) ->                               1.03
eval({||i%ARR_LEN}) ->                                0.00
eval({|x|x%ARR_LEN},i) ->                             0.20
eval({|x|f1(x)},i) ->                                 0.80
&('f1('+str(i)+')') ->                                8.69
eval([&('{|x|f1(x)}')]) ->                            0.68
j := valtype(a)+valtype(i) ->                         0.87
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                1.73
j := val(a2[i%ARR_LEN+1]) ->                          0.91
j := a2[i%ARR_LEN+1] == s ->                          0.00
j := a2[i%ARR_LEN+1] = s ->                           0.66
j := a2[i%ARR_LEN+1] >= s ->                          0.62
j := a2[i%ARR_LEN+1] < s ->                           0.61
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         2.31
f0() ->                                               0.25
f1(i) ->                                              0.37
f2(c[8]) ->                                           0.29
f2(c[40000]) ->                                       0.29
f2(@c[40000]) ->                                      0.28
f2(c[40000]); c2:=c ->                                0.40
f2(@c[40000]); c2:=c ->                               0.40
f3(a,a2,c,i,j,t,bc) ->                                0.69
f2(a2) ->                                             0.30
s:=f4() ->                                            2.24
s:=f5() ->                                            0.00
ascan(a,i%ARR_LEN) ->                                 0.00
ascan(a2,c+chr(i%64+64)) ->                           2.28
ascan(a,{|x|x==i%ARR_LEN}) ->                         5.48
============================================================
total application time:                              46.99
total real time:                                     46.99

------------------------

[E:\harbour809mt\harbour\tests]speedtst_mt.exe

Startup loop to increase CPU clock...

09/18/08 17:23:48 Harbour 1.1.0dev (Rev. 9445) (MT), OS/2 4.50
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.23
CPU usage -> secondsCPU()

c:=L_C ->                                             0.16
n:=L_N ->                                             0.14
d:=L_D ->                                             0.14
c:=M_C ->                                             0.17
n:=M_N ->                                             0.15
d:=M_D ->                                             0.16
(sh) c:=F_C ->                                        0.53
(sh) n:=F_N ->                                        0.41
(sh) d:=F_D ->                                        0.25
(ex) c:=F_C ->                                        0.52
(ex) n:=F_N ->                                        0.40
(ex) d:=F_D ->                                        0.25
n:=o:GenCode ->                                       0.50
n:=o[8] ->                                            0.31
round(i/1000,2) ->                                    0.70
str(i/1000) ->                                        1.60
val(a3[i%ARR_LEN+1]) ->                               1.24
dtos(j+i%10000-5000) ->                               1.44
eval({||i%ARR_LEN}) ->                                0.75
eval({|x|x%ARR_LEN},i) ->                             0.80
eval({|x|f1(x)},i) ->                                 1.15
&('f1('+str(i)+')') ->                               10.19
eval([&('{|x|f1(x)}')]) ->                            1.18
j := valtype(a)+valtype(i) ->                         1.33
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                2.34
j := val(a2[i%ARR_LEN+1]) ->                          1.31
j := a2[i%ARR_LEN+1] == s ->                          0.85
j := a2[i%ARR_LEN+1] = s ->                           0.91
j := a2[i%ARR_LEN+1] >= s ->                          0.93
j := a2[i%ARR_LEN+1] < s ->                           0.90
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         4.23
f0() ->                                               0.40
f1(i) ->                                              0.58
f2(c[8]) ->                                           0.45
f2(c[40000]) ->                                       0.46
f2(@c[40000]) ->                                      0.46
f2(c[40000]); c2:=c ->                                0.63
f2(@c[40000]); c2:=c ->                               0.63
f3(a,a2,c,i,j,t,bc) ->                                0.96
f2(a2) ->                                             0.47
s:=f4() ->                                            1.54
s:=f5() ->                                            1.08
ascan(a,i%ARR_LEN) ->                                 0.79
ascan(a2,c+chr(i%64+64)) ->                           3.06
ascan(a,{|x|x==i%ARR_LEN}) ->                         9.12
============================================================
total application time:                              67.05
total real time:                                     67.05

------------------------

[E:\harbour809mt\harbour\tests\mt] mttest01.exe

Harbour 1.1.0dev (Rev. 9445)
join: .T.
result: Hello World!!! Hello World!!! Hello World!!!
static var type: B
      12345.678
      12346.678

------------------------

[E:\harbour809mt\harbour\tests\mt] mttest02.exe

Harbour 1.1.0dev (Rev. 9445)
Main start
Thread ID: 0x233ce94
===================

MThread begin
Parameters: A B C
tMtttMt
MThread QUIT
Thread ALWAYS section
MMMMMM
===================
Main QUIT
Main ALWAYS section

I'm EXIT procedure

------------------------

[E:\harbour809mt\harbour\tests\mt] mttest03.exe

Harbour 1.1.0dev (Rev. 9445)
Main start
Thread ID: 0x233ce94
===================

MThread begin
Parameters: A B C
tMttMttMttMtt
Main QUIT
Main ALWAYS section

Thread ALWAYS section

I'm EXIT procedure

------------------------

[E:\harbour809mt\harbour\tests\mt] mttest04.exe

Harbour 1.1.0dev (Rev. 9445)
Main start
Starting threads: <1><2><3><4><5>
Wait 5 seconds or hit any key...
Waiting for threads...
Threads joined
Sum of thread local counters:     228391
Protected item result.......:     228391 OK
Unprotected item result.....:     228391 *
  * - can be different then local sum on real multi-CPU systems
End of main

------------------------

[E:\harbour809mt\harbour\tests\mt] mttest05.exe

Harbour 1.1.0dev (Rev. 9445)
Starting threads: <1><2><3><4><5>
Waiting for threads...
Threads joined
Sum of results:         30
      should be:    5000500 ERROR

------------------------

[E:\harbour809mt\harbour\tests\mt] mttest06.exe

Harbour 1.1.0dev (Rev. 9445)
Starting threads: <1><2><3><4><5>
Waiting for threads...
Threads joined
Sum of results:         30
      should be:    5000500 ERROR

------------------------

[E:\harbour809mt\harbour\tests\mt] mttest07.exe

Harbour 1.1.0dev (Rev. 9445)
Main start
Starting threads: <1><2><3><4><5>
Sending jobs...
Sending terminate values...<1><2><3><4><5>
Collecting results...
Waiting for threads...
Threads joined
OK, final sum: 16698333.33
End of main

------------------------


From mhsabado at gmail.com  Thu Sep 18 19:47:09 2008
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Thu Sep 18 19:47:25 2008
Subject: [Harbour] Unresolved External with BCC582
In-Reply-To: <48d29303.c6c1f10a.26a1.532cSMTPIN_ADDED@mx.google.com>
References: <48d29303.c6c1f10a.26a1.532cSMTPIN_ADDED@mx.google.com>
Message-ID: <48D2E87D.8030006@gmail.com>

Hi,

I have encountered below error when compiling my application from latest 
SVN.  I'm using BCC582 and xMate.

Unresolved external '__beginthreadex' reference from ..\LIB\HBVM.LIB|thread
Unresolved external '__endthreadex' reference from ..\LIB\HBVM.LIB|thread

Thanks for any help.

Regards,
Mario
From dmacias at mail.udg.mx  Thu Sep 18 19:54:18 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Sep 18 19:54:21 2008
Subject: [Harbour] Re: 2008-09-18 01:17 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48D2EA2A.6090002@mail.udg.mx>

Przemek:

 >  FAILED mttest05, mttest06
 >   something appear/disappear flashing in screen

mttest05 are failing in random way

Results of previous message were after building Harbour

After reboot
   Rebuilding mttest05
   Failed first 3 run, does not failed next 4

After reboot
   Rebuilding mttest05
   Does not failed next 5

After reboot
   Rebuilding mttest05
   Does not failed, failed, does not, ... with rebuilt in between
   See part of sequence output below

Anyway, is failing randomly
Everytime it fail "something appear/disappear flashing in screen"

Can you check it and some one can check in other platforms/compilers ?

(rebuild, runs, runs, rebuild, runs, more runs, ..., rebuild, runs, ... )

Any idea to catch it ?

Mostly fails with
  Sum of results:         30
but happen to
  Sum of results:    3000312
       should be:    5000500 ERROR

so is a failure some point between

David Macias


[E:\harbour809mt\harbour\tests\mt] mttest05

Harbour 1.1.0dev (Rev. 9445)
Starting threads: <1><2><3><4><5>
Waiting for threads...
Threads joined
Sum of results:    5000500
      should be:    5000500 OK
[E:\harbour809mt\harbour\tests\mt]bld_os2.cmd mttest06 mt
Harbour 1.1.0dev (Rev. 9445)
Copyright (c) 1999-2008, http://www.harbour-project.org/
Compiling 'mttest06.prg'...
Lines 49, Functions/Procedures 3
Generating C source output to 'mttest06.c'... Done.

[E:\harbour809mt\harbour\tests\mt] mttest05

Harbour 1.1.0dev (Rev. 9445)
Starting threads: <1><2><3><4><5>
Waiting for threads...
Threads joined
Sum of results:         30
      should be:    5000500 ERROR

[E:\harbour809mt\harbour\tests\mt] mttest05

Harbour 1.1.0dev (Rev. 9445)
Starting threads: <1><2><3><4><5>
Waiting for threads...
Threads joined
Sum of results:         30
      should be:    5000500 ERROR
[E:\harbour809mt\harbour\tests\mt] mttest05

Harbour 1.1.0dev (Rev. 9445)
Starting threads: <1><2><3><4><5>
Waiting for threads...
Threads joined
Sum of results:    5000500
      should be:    5000500 OK

[E:\harbour809mt\harbour\tests\mt] mttest05

Harbour 1.1.0dev (Rev. 9445)
Starting threads: <1><2><3><4><5>
Waiting for threads...
Threads joined
Sum of results:    5000500
      should be:    5000500 OK
[E:\harbour809mt\harbour\tests\mt] mttest05

Harbour 1.1.0dev (Rev. 9445)
Starting threads: <1><2><3><4><5>
Waiting for threads...
Threads joined
Sum of results:    5000500
      should be:    5000500 OK
[E:\harbour809mt\harbour\tests\mt] mttest05

Harbour 1.1.0dev (Rev. 9445)
Starting threads: <1><2><3><4><5>
Waiting for threads...
Threads joined
Sum of results:         30
      should be:    5000500 ERROR


[E:\harbour809mt\harbour\tests\mt] mttest05

Harbour 1.1.0dev (Rev. 9445)
Starting threads: <1><2><3><4><5>
Waiting for threads...
Threads joined
Sum of results:    5000500
      should be:    5000500 OK
[E:\harbour809mt\harbour\tests\mt]bld_os2.cmd mttest05 mt
Harbour 1.1.0dev (Rev. 9445)
Copyright (c) 1999-2008, http://www.harbour-project.org/
Compiling 'mttest05.prg'...
Lines 43, Functions/Procedures 2
Generating C source output to 'mttest05.c'... Done.

[E:\harbour809mt\harbour\tests\mt] mttest05

Harbour 1.1.0dev (Rev. 9445)
Starting threads: <1><2><3><4><5>
Waiting for threads...
Threads joined
Sum of results:         30
      should be:    5000500 ERROR

[E:\harbour809mt\harbour\tests\mt] mttest05

Harbour 1.1.0dev (Rev. 9445)
Starting threads: <1><2><3><4><5>
Waiting for threads...
Threads joined
Sum of results:    3000312
      should be:    5000500 ERROR
[E:\harbour809mt\harbour\tests\mt] mttest05

Harbour 1.1.0dev (Rev. 9445)
Starting threads: <1><2><3><4><5>
Waiting for threads...
Threads joined
Sum of results:         30
      should be:    5000500 ERROR

[E:\harbour809mt\harbour\tests\mt] mttest05

Harbour 1.1.0dev (Rev. 9445)
Starting threads: <1><2><3><4><5>
Waiting for threads...
Threads joined
Sum of results:         30
      should be:    5000500 ERROR
[E:\harbour809mt\harbour\tests\mt] mttest05

Harbour 1.1.0dev (Rev. 9445)
Starting threads: <1><2><3><4><5>
Waiting for threads...
Threads joined
Sum of results:    5000500
      should be:    5000500 OK

[E:\harbour809mt\harbour\tests\mt]bld_os2.cmd mttest05 mt
Harbour 1.1.0dev (Rev. 9445)
Copyright (c) 1999-2008, http://www.harbour-project.org/
Compiling 'mttest05.prg'...
Lines 43, Functions/Procedures 2
Generating C source output to 'mttest05.c'... Done.

[E:\harbour809mt\harbour\tests\mt] mttest05

Harbour 1.1.0dev (Rev. 9445)
Starting threads: <1><2><3><4><5>
Waiting for threads...
Threads joined
Sum of results:         30
      should be:    5000500 ERROR
[E:\harbour809mt\harbour\tests\mt] mttest05

Harbour 1.1.0dev (Rev. 9445)
Starting threads: <1><2><3><4><5>
Waiting for threads...
Threads joined
Sum of results:    5000500
      should be:    5000500 OK
From toninhofwi at yahoo.com.br  Thu Sep 18 21:25:14 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Thu Sep 18 21:18:49 2008
Subject: [Harbour] Time wrong in Harbour.exe /build vs hb_buildDate()
Message-ID: <pav5d49hfdmkfmipaotf8lq5j7qpk3pe3e@4ax.com>

Hi,

My latest Harbour.exe /build display time 1 second  more than
hb_buildDate()

harbour.exe /build = 21:24:09
hb_buildDate() = 21:24:08

Don't ask me what I did to see this ;)


Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opção para você! 
Experimente já e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From budyanto at centrin.net.id  Fri Sep 19 02:43:09 2008
From: budyanto at centrin.net.id (Budyanto Dj.)
Date: Fri Sep 19 02:43:36 2008
Subject: [Harbour] Tagged: Harbour 1.0.1 (r9429)
In-Reply-To: <48D298A2.7080708@fsgiudice.com>
References: <ADC4A068-C546-4A65-938F-503CD3F36752@syenar.hu>
Message-ID: <48D3AC6D.3941.28DF6361@localhost>

On 18 Sep 2008 at 20:06, Francesco Saverio Giudice wrote:
> FYI, today sf.net reports Harbour in Overall Rank at position 172 and at 
> 10th under Database category.

In Compilers category it's #4
http://sourceforge.net/softwaremap/trove_list.php?form_cat=48

regards,
budyanto

From maurilio.longo at libero.it  Fri Sep 19 03:21:09 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Sep 19 03:21:16 2008
Subject: [Harbour] A few questions about MT
In-Reply-To: <A1E8AD22-84C4-4717-9C48-26E0664DA207@syenar.hu>
References: <48D2698D.80206@dbtopas.lt>	<20080918165307.GA15124@34-mo7-2.acn.waw.pl>
	<A1E8AD22-84C4-4717-9C48-26E0664DA207@syenar.hu>
Message-ID: <48D352E5.6070709@libero.it>

Viktor,

I agree, publics should be public :) between threads with synchronization left
to the user.

This has the advantage to be xbase++ compatible.

I think that on mt issues we should be compatible with xbase++ which is now
the "de facto" standard.

Best regards.

Maurilio.


Szak?ts Viktor wrote:
> Hi Przemek, Mindaugas,
> 
>>> We have few choices. F.e. we can add automatic memvars inheritance
>> so each child thread will share all parent thread memvars visible
>> when thread was started as its own PUBLIC variables.
>> The variables will be shared so you will have to add your own
>> synchronization code if you want to change them (write operation).
>> Such method is natural for our memvar code and can be easy implemented.
>> AFAIK xbase++ shares public variables between threads. But I do not know
>> detail behavior of such solution in some strange situation (f.e. thread
>> declares public when some other threads or even this one have private
>> variables. Clipper in such case overwrite private and do not create
>> public one. I do not know if exact implementation of above feature will
>> not interact with Clipper compatibility. I can try to implement it
>> respecting only Clipper behavior. It should be enough to keep public
>> handles separated from privates and use them when there is no private
>> handle with the same symbol. As 3-rd option we can add support for
>> GLOBAL variables though implemented without hardcoded links like in
>> xHarbour but by dynamic symbol table so they will work also with .hrb
>> files and will not reduce the speed in code which does not use them.
> 
> For now, I'd personally vote to make PUBLICs visible for
> all threads (otherwise most apps would need to be rewritten
> in this respect I guess), and PRIVATEs to the threads that
> define them. 'THREAD PUBLIC' could be introduced to create
> PUBLICs visible only for the current thread if someone
> needs such thing. It would be analogous to THREAD STATIC.
> 
> [ BTW, it's difficult to stay 100% Clipper compatible
> here, as we're having situations which were nonexistent
> in the Clipper-era. MT-enabled code is essentially
> non-Clipper compatible anyway, so if we can keep ST
> behavior Clipper-compatible, I think it's no problem to
> deviate from 100% compatibility for MT cases. ]
> 
> Can someone check XBase++ behaviour?
> 
> Brgds,
> Viktor
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From labitas at gmail.com  Fri Sep 19 03:44:27 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Fri Sep 19 03:44:34 2008
Subject: [Harbour] More speedtst/memtst results
Message-ID: <2386af1b0809190044x53a8940et3c487e88c8146129@mail.gmail.com>

memtst.prg 9410 2008-09-15 21:09:27Z druzus $

09/19/08 09:56:39 Harbour 1.1.0dev (Rev. 9444) (MT), Windows XP
5.1.2600 Service Pack 2
Sep 19 2008 09:49:15 Borland C++ 5.8.2 (32 bit)

09/19/08 10:00:03 Harbour 1.1.0dev (Rev. 9444) (MT), Windows XP
5.1.2600 Service Pack 2
Sep 19 2008 08:53:57 Open Watcom C++ 12.70.8 (32 bit)

                                                          ST            MT
                                                       BC     WC     BC     WC
                                                      ===========   ===========
c:=L_C ->                                             0.16   0.14   0.30   0.28
n:=L_N ->                                             0.14   0.13   0.20   0.23
d:=L_D ->                                             0.13   0.13   0.19   0.25
c:=M_C ->                                             0.16   0.14   0.31   0.27
n:=M_N ->                                             0.14   0.14   0.22   0.25
d:=M_D ->                                             0.14   0.13   0.25   0.25
(sh) c:=F_C ->                                        0.34   0.28   0.48   0.39
(sh) n:=F_N ->                                        0.47   0.36   0.50   0.44
(sh) d:=F_D ->                                        0.28   0.25   0.36   0.39
(ex) c:=F_C ->                                        0.34   0.30   0.50   0.42
(ex) n:=F_N ->                                        0.44   0.38   0.50   0.48
(ex) d:=F_D ->                                        0.30   0.25   0.38   0.39
n:=o:GenCode ->                                       0.39   0.38   0.83   0.77
n:=o[8] ->                                            0.30   0.30   0.55   0.52
round(i/1000,2) ->                                    0.53   0.48   0.89   1.00
str(i/1000) ->                                        1.36   0.95   1.77   1.47
val(a3[i%ARR_LEN+1]) ->                               1.06   1.05   1.56   1.67
dtos(j+i%10000-5000) ->                               1.25   0.98   1.80   1.78
eval({||i%ARR_LEN}) ->                                0.56   0.53   1.03   1.03
eval({|x|x%ARR_LEN},i) ->                             0.58   0.56   1.16   1.23
eval({|x|f1(x)},i) ->                                 0.92   0.77   1.70   1.89
&('f1('+str(i)+')') ->                                5.61   5.19   7.47   6.77
eval([&('{|x|f1(x)}')]) ->                            0.97   0.81   1.72   1.97
j := valtype(a)+valtype(i) ->                         0.91   0.88   1.63   1.77
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                2.05   1.63   2.84   2.73
j := val(a2[i%ARR_LEN+1]) ->                          1.28   1.25   1.83   2.03
j := a2[i%ARR_LEN+1] == s ->                          0.78   0.73   1.31   1.31
j := a2[i%ARR_LEN+1] = s ->                           0.83   0.72   1.44   1.38
j := a2[i%ARR_LEN+1] >= s ->                          0.84   0.75   1.38   1.36
j := a2[i%ARR_LEN+1] < s ->                           0.86   0.73   1.34   1.42
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         4.42   2.13   4.48   3.66
f0() ->                                               0.31   0.25   0.59   0.67
f1(i) ->                                              0.52   0.44   0.84   0.97
f2(c[8]) ->                                           0.34   0.34   0.77   0.83
f2(c[40000]) ->                                       0.36   0.34   0.78   0.73
f2(@c[40000]) ->                                      0.34   0.28   0.66   0.80
f2(c[40000]); c2:=c ->                                0.55   0.48   1.00   1.08
f2(@c[40000]); c2:=c ->                               0.52   0.48   0.97   1.05
f3(a,a2,c,i,j,t,bc) ->                                0.92   0.78   1.78   1.83
f2(a2) ->                                             0.42   0.33   0.83   0.81
s:=f4() ->                                            1.11   0.95   1.63   1.63
s:=f5() ->                                            0.59   0.58   1.11   1.20
ascan(a,i%ARR_LEN) ->                                 0.78   0.69   1.38   1.22
ascan(a2,c+chr(i%64+64)) ->                           2.50   1.89   3.75   3.22
ascan(a,{|x|x==i%ARR_LEN}) ->                         6.44   5.98  11.42  12.55
=================================================================  =====  =====
total application time:                              52.11  44.36  81.11  83.22
total real time:                                     54.00  46.05  83.78  85.81



memtst.prg 9410 2008-09-15 21:09:27Z druzus $

09/19/08 10:11:37 Harbour 1.1.0dev (Rev. 9444) (MT), Windows XP
5.1.2600 Service Pack 2
Sep 19 2008 09:49:15 Borland C++ 5.8.2 (32 bit)

09/19/08 10:14:33 Harbour 1.1.0dev (Rev. 9444) (MT), Windows XP
5.1.2600 Service Pack 2
Sep 19 2008 08:53:57 Open Watcom C++ 12.70.8 (32 bit)

			     ST                     MT
		      BC             WC       BC          WC
                    =====================   =====================
testing single large memory blocks allocation and freeing...
 CPU time:          1.08 sec.   1.22 sec.   1.05 sec.  1.25 sec.
real time:          1.08 sec.   1.28 sec.   1.11 sec.  1.30 sec.

testing many large memory blocks allocation and freeing...
 CPU time:          8.45 sec.   7.73 sec.   8.61 sec.  7.88 sec.
real time:          8.77 sec.   7.95 sec.   8.92 sec.  8.05 sec.

testing large memoryblock reallocation with intermediate allocations...
 CPU time:          1.80 sec.   2.19 sec.   1.86 sec.  2.31 sec.
real time:          1.84 sec.   2.31 sec.   1.99 sec.  2.41 sec.

Best regards,
Saulius
From miguelangel at marchuet.net  Fri Sep 19 04:28:59 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Fri Sep 19 04:28:22 2008
Subject: [Harbour] to przmek about ordkeyval length
Message-ID: <48D362CB.8060205@marchuet.net>

OrdKeyVal can't be more large than 240 at cdx almoust in clipper.
If you are agree I upload this changes:

I want to do to this changes :

    bType = hb_cdxItemType( pResult );
    switch ( bType )
    {
       case 'N':
       case 'D':
          uiLen = 8;
          break;
       case 'L':
          uiLen = 1;
          break;
       case 'C':
          uiLen = ( USHORT ) hb_itemGetCLen( pResult );
          break;
       default:
          bType = 'U';
          uiLen = 0;
    }
    hb_itemRelease( pResult );

    /* Make sure KEY has proper type and iLen is not 0 */
    if ( bType == 'U' || uiLen == 0 || uiLen > CDX_MAXKEY )
    {
       hb_vmDestroyBlockOrMacro( pKeyExp );
       SELF_GOTO( ( AREAP ) pArea, ulRecNo );
       hb_cdxErrorRT( pArea, bType == 'U' ? EG_DATATYPE : EG_DATAWIDTH,
                      EDBF_INVALIDKEY, NULL, 0, 0 );
       return FAILURE;
    }

so solve as at clipper the next problem:

FUNCTION MAIN()

     LOCAL i

     REQUEST DBFCDX
     RddSetDefault( "DBFCDX" )

     DBCREATE( "__MYTEST", { { "test", "C", 241, 0 } } )

     USE __MYTEST
     INDEX ON FIELD->Test TO __MYTEST

     FOR i := 1 TO 10
         APPEND BLANK
         FIELD->test := Replicate( "1", 240 ) + Str( 10 - i, 1 )
     NEXT

     DbGoTop()
     ? &(OrdKey())
     ? "Length of &(OrdKey()) :" + Str( Len( &(OrdKey()) ) )
     ? OrdKeyVal()
     ? "Length of OrdKeyVal() :" + Str( Len(OrdKeyVal()) )
     WHILE ! EOF()
       ? Right( FIELD->Test, 1 )
       DbSkip()
     ENDDO

     USE
     FERASE( "__MYTEST.DBF" )
     FERASE( "__MYTEST.CDX" )

     ? "end"
RETURN NIL
From miguelangel at marchuet.net  Fri Sep 19 04:40:10 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Fri Sep 19 04:39:25 2008
Subject: [Harbour] to przmek about ordkeyval length
In-Reply-To: <48D362CB.8060205@marchuet.net>
References: <48D362CB.8060205@marchuet.net>
Message-ID: <48D3656A.9060807@marchuet.net>

or better

    /* Make sure KEY has proper type and iLen lower than 240 */
    if ( uiLen > CDX_MAXKEY )
    {
       if( hb_cdxErrorRT( pArea, bType == 'U' ? EG_DATATYPE : EG_DATAWIDTH,
                          EDBF_INVALIDKEY, NULL, 0, uiLen > CDX_MAXKEY ? EF_CANDEFAULT : 0 ) == FAILURE )
       {
         hb_vmDestroyBlockOrMacro( pKeyExp );
         SELF_GOTO( ( AREAP ) pArea, ulRecNo );
         return FAILURE;
       }
       else
         uiLen = CDX_MAXKEY;
    }
    /* Make sure KEY has proper type and iLen is not 0 */
    else if ( bType == 'U' || uiLen == 0 )
    {
       hb_vmDestroyBlockOrMacro( pKeyExp );
       SELF_GOTO( ( AREAP ) pArea, ulRecNo );
       return hb_cdxErrorRT( pArea, bType == 'U' ? EG_DATATYPE : EG_DATAWIDTH, EDBF_INVALIDKEY, NULL, 0, 0 );
    }



Best regards,
Miguel Angel Marchuet
From harbour.01 at syenar.hu  Fri Sep 19 04:45:30 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 19 04:45:43 2008
Subject: [Harbour] A few questions about MT
In-Reply-To: <20080918202548.GA31987@34-mo7-2.acn.waw.pl>
References: <48D2698D.80206@dbtopas.lt>
	<2F43D8B8-2727-494E-83EF-F6D1D449479F@syenar.hu>
	<20080918202548.GA31987@34-mo7-2.acn.waw.pl>
Message-ID: <0609C8F8-D7FA-45E8-88FF-ADC87658E584@syenar.hu>

Hi Przemek,

Many thanks, this is perfectly inline with what I've expected.

Brgds,
Viktor

On 2008.09.18., at 22:25, Przemyslaw Czerpak wrote:

> On Thu, 18 Sep 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> I also have one:
>> If a given thread gets a non-handled RTE, or, an internal
>> error, will the whole application fail and exit, or just
>> the thread where the error occured?
>
> RT errors, begin sequence / break / recover / always statements,
> object destructs, quit, are handled by each thread separately by
> the thread when the event happen without inter thread interaction.
> Each thread has it's own error handler by default initialized
> by ERRORSYS() function call at thread startup. You can create
> MT safe code using above construction without any problems,
> There is only one exception QUIT executed by main thread sends
> QUIT requests to all other HVM threads and waits for their
> termination. Then it executes all exit procedures. The same
> happens when main thread finish its job returning for main
> startup function.
>
> With the internal error situation is different. They are
> generated in unusual situations when we cannot continue farther
> execution safely, f.e. due to internal HVM structures corruption.
> Internal error handler executes exit() function which may terminate
> the whole program but does not have to. It may also suspend only
> calling thread waiting for others (f.e. until they terminate
> or reach some place where can be killed). It's platform dependent
> behavior. The one thing we can make in such case yet is sending non
> blocking QUIT request to all other HVM threads before calling exit().
> Probably I'll add it ASAP.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Sep 19 05:03:02 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 19 05:03:08 2008
Subject: [Harbour] 2008-09-19 11:00 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91a36$Blat.v2.6.2$85a7b8cc$1728a58e912e@127.0.0.1>

2008-09-19 11:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbct/fcopy.prg
  * contrib/hbnf/dfile.prg
  * contrib/hbpgsql/pgrdd.prg
  * contrib/hbtpathy/telepath.prg
  * contrib/rddado/adordd.prg
    + Some STATICs converted to THREAD STATIC.

  * contrib/hbtip/ftpcln.prg
    * STATIC var renamed.
--
Brgds,
Viktor

From mbelgrano at deltain.it  Fri Sep 19 05:29:38 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Sep 19 05:30:20 2008
Subject: [Harbour] Wich difference is between HB_BUILD_ST=N+hbvmmt.lib and
	HB_BUILD_ST=Y ?
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFB3@SRV02.deltain.net>

If i build without HB_BUILD_ST=Y I can create A MT application linking HBVMmt.lib instead hbbm.lib
If I Build with HB_BUILD_ST=N  only hbvm.lib is created
I am using bcc
Wich difference is between HB_BUILD_ST=N+hbvmmt.lib and HB_BUILD_ST=Y ?
 

Massimo Belgrano

?

From info at fsgiudice.com  Fri Sep 19 05:46:27 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri Sep 19 05:46:36 2008
Subject: [Harbour] Tagged: Harbour 1.0.1 (r9429)
In-Reply-To: <48D3AC6D.3941.28DF6361@localhost>
References: <ADC4A068-C546-4A65-938F-503CD3F36752@syenar.hu>
	<48D3AC6D.3941.28DF6361@localhost>
Message-ID: <48D374F3.3030604@fsgiudice.com>



Budyanto Dj. ha scritto:
> On 18 Sep 2008 at 20:06, Francesco Saverio Giudice wrote:
>> FYI, today sf.net reports Harbour in Overall Rank at position 172 and at 
>> 10th under Database category.
> 
> In Compilers category it's #4
> http://sourceforge.net/softwaremap/trove_list.php?form_cat=48
> 
Great!

Best Regards

Francesco
From miguelangel at marchuet.net  Fri Sep 19 06:26:11 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Fri Sep 19 06:25:25 2008
Subject: [Harbour] 2008-09-19 12:21 UTC+0100 Miguel Angel Marchuet
	<miguelangel@marchuet.net>
Message-ID: <48D37E43.9070309@marchuet.net>

2008-09-19 12:21 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
   * contrib/hbbmcdx/bmdbfcdx.c
   * source/rdd/dbfcdx/dbfcdx1.c
     ! fixed return value after rt error.
     * Added rt error as in clipper when OrdkeyVal is greater than 240, with default
       capabilities as in clipper.
     code to test it:
	FUNCTION MAIN()

	    LOCAL i
	    LOCAL nSec := SECONDS()

	    REQUEST DBFCDX
	    RddSetDefault( "DBFCDX" )

	    DBCREATE( "__MYTEST", { { "test", "C", 241, 0 } } )

	    USE __MYTEST
	    INDEX ON FIELD->Test TO __MYTEST

	    FOR i := 1 TO 10
	        APPEND BLANK
         	FIELD->test := Replicate( "1", 240 ) + Str( 10 - i, 1 )
	    NEXT

	    DbGoTop()
	    ? &(OrdKey())
	    ? "Length of &(OrdKey()) :" + Str( Len( &(OrdKey()) ) )
	    ? OrdKeyVal()
	    ? "Length of OrdKeyVal() :" + Str( Len(OrdKeyVal()) )
	    WHILE ! EOF()
	      ? Right( FIELD->Test, 1 )
	      DbSkip()
	    ENDDO

	    USE
	    FERASE( "__MYTEST.DBF" )
	    FERASE( "__MYTEST.CDX" )

	RETURN NIL


Best regards,
Miguel Angel marchuet
From mbelgrano at deltain.it  Fri Sep 19 06:31:04 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Sep 19 06:31:12 2008
Subject: Fw: [Harbour] Suggestion for harbour web site?
In-Reply-To: <531d7a750809131635u5efdd4c7u42aa3b8aa0e161af@mail.gmail.com>
References: <1E3A7E8548744E708BDBF71586AEB7AF@Home><200809131715.34780.philb@philb.us>
	<531d7a750809131635u5efdd4c7u42aa3b8aa0e161af@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFB4@SRV02.deltain.net>

All fine
My suggest is have one page for download for easy approach, and one
Third-party Tools and Libraries
5 colunn Nape of platform,compiler, Harbour Binary 1.1  + C Compiler   +
Note
                                         Binary	C compiler	Notes
- Windows
	BCC 5.51
	BCC 5.82
	GCC Cygwin 3.4.4
	GCC MinGW 3.4.5 (on msys 1.0.10)
	GCC MinGW 4.1.2 (on msys 1.0.10)
	GCC MinGW 3.4.5 (cross compile on OpenSuse 10.3, FC3)
	GCC MinGW 4.2.1 (cross compile on Ubuntu 8.04.1)
	GCC MinGW 4.3.2a (on msys 1.0.10)
	MSVC 6.0 
	MSVC 7.1 (MSVS 2003)
	MSVC 8.0 (MSVS 2005)
	MSVC 8.0 (MSVS 2005) C++
	MSVC 9.0 (MSVS 2008 SP1)
	MSVC 9.0 (MSVS 2008 SP1) C++
	MSVC 9.0 (MSVS 2008 SP1) 64 bit
	MSVC 9.0 (MSVS 2008 SP1) C++ 64 bit (cross-compile on Win32)
	PellesC 4.5 (HBSQLIT3: interface only)
	PellesC 5.0
	PellesC 5.0 64 bit (cross-compile on Win32)
	Open Watcom 1.7 (HBSQLIT3: interface only)
	Digital Mars C 4.50
- WinCE
	MSVC 6.0 (eVC4)
	GCC 4.0.1 (mingw32ce 0.51.0) (cross-compile on Ubuntu 8.04.1)
	GCC 4.1.0 (mingw32ce 0.50.0) (cross-compile on OpenSuse 10.3,
FC3)
- Linux
	GCC 4.2.3 (Ubuntu 8.04.1)
	GCC 4.3.0 (Fedora) (non-default build)
	GCC 4.2.1 (SuSE 10.3)
	Open Watcom (with patches only. FAILED)
	GCC (RedHat 7.3)
	GCC (OpenSuse 10.3)
	GCC (FC3)
- OS X
	GCC 4.0.1 i386, x86_64, PPC, PPC64 (Leopard 10.5.4 PPC + XCode
3.1)
	GCC 4.0.1 i386, x86_64, PPC, PPC64 (Leopard 10.5.4 Intel + XCode

3.1)
	GCC 4.0.1 PPC (Leopard 10.5.4 PPC + XCode 3.0) (non-default
build)
- Solaris
	GCC 3.4.3 i86pc (SunOS 5.11 - OpenSolaris 2008.05)
- BSD
	Ver
- HPUX
	Ver)
- OS/2
	GCC 3.3.5 (EMX/Innotek)
- DOS
	GCC 3.3.2 32 bit (DJGPP) (DJGPP bash port)
	GCC 4.2.3 32 bit (DJGPP) ('make install' won't properly work)
	Open Watcom 1.7 (command.com)

Bottom 
Source contrib.(also a unique colun)
Bison     (also a unique column
Tortoise



-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Vailton Renato
Sent: Sunday, September 14, 2008 1:36 AM
To: Harbour Project Main Developer List.
Subject: Re: Fw: [Harbour] Suggestion for harbour web site?

Hi all!

I think the next step would be to define the topics to the menu of the
site. Which items will be needed? To give an idea, may I suggest the
following
items:

* About
  Start page with welcome msg & short about text

* Documentation
   > Harbour documentation Index
   A HTML version of /doc folder or any other material for support

   > Tutorials & Articles

      * Quick Start
      * Installing HB on Windows
      * Installing HB on Linux
     * Compiling from SVN

   > Sample applications
     Small examples taken from the folder SAMPLES highlighting some of
the
many
   resources of the project:

     * Hello World
     * DBF operations
     * OOP
     * GUI samples
     * Linux
       etc...

   > Other Harbour documentation sites
     Various external links that have material support for the HB
project.
   (Wikipedia, FAQ, Lists & News, etc.)

* Download
  > Binaries & Source
    A single option with link to SF.net with no text.

  > Auxiliar tools
    Bison, GCC, FLEX, Tortoise, download link

  > Snapshot builds
    A Small descriptive text with link for download.

  > Third-party Tools and Libraries
    Same as http://www.harbour-project.org/3rdparty.htm

  > FAQ
    Same as http://www.harbour-project.org/faq/harbour.html

  > History (if applicable)


* Resources (or DEVELOPMENT)
  > Bug/Issue Database
    Short text with link to
https://sourceforge.net/tracker/?func=browse&group_id=681&atid=100681

  > Report Bugs
    Short text with link to
https://sourceforge.net/tracker/?group_id=681&atid=100681&func=add)

  > Mailing Lists
    Link with Mailing Lists

  > Lists & news around the World
  Ordened by language and/or Location

  > Harbour Art (Harbour logos to download)
    Note: the current URL is broken

  > Licensing
    Text about GPL & HB commercial products.

* Screenshots
  On windows, linux, mac, ppc, etc...

* News
  > News

  > Lastest Changelog

  > Roadmap for HB (if applicable)


At the bottom of each page i suggest putting a text as:

"The product names used in this web site are for identification purposes
only. All trademarks and registered trademarks are the property of their
respective owners."
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Fri Sep 19 06:35:03 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 19 06:35:38 2008
Subject: [Harbour] to przmek about ordkeyval length
In-Reply-To: <48D362CB.8060205@marchuet.net>
References: <48D362CB.8060205@marchuet.net>
Message-ID: <20080919103503.GB31987@34-mo7-2.acn.waw.pl>

On Fri, 19 Sep 2008, Miguel Angel Marchuet wrote:
> OrdKeyVal can't be more large than 240 at cdx almoust in clipper.

Just like in all other languages.
240 bytes is forced by internal CDX structure for 512 bytes
index page length.
You have to be able to store in the worst case at least two keys
in index page.

> If you are agree I upload this changes:
> I want to do to this changes :
>    bType = hb_cdxItemType( pResult );
>    switch ( bType )
>    {
>       case 'N':
>       case 'D':
>          uiLen = 8;
>          break;
>       case 'L':
>          uiLen = 1;
>          break;
>       case 'C':
>          uiLen = ( USHORT ) hb_itemGetCLen( pResult );
>          break;
>       default:
>          bType = 'U';
>          uiLen = 0;
>    }
>    hb_itemRelease( pResult );
>    /* Make sure KEY has proper type and iLen is not 0 */
>    if ( bType == 'U' || uiLen == 0 || uiLen > CDX_MAXKEY )
>    {
>       hb_vmDestroyBlockOrMacro( pKeyExp );
>       SELF_GOTO( ( AREAP ) pArea, ulRecNo );
>       hb_cdxErrorRT( pArea, bType == 'U' ? EG_DATATYPE : EG_DATAWIDTH,
>                      EDBF_INVALIDKEY, NULL, 0, 0 );
>       return FAILURE;
>    }
> so solve as at clipper the next problem:
> FUNCTION MAIN()
>     LOCAL i
>     REQUEST DBFCDX
>     RddSetDefault( "DBFCDX" )
>     DBCREATE( "__MYTEST", { { "test", "C", 241, 0 } } )
>     USE __MYTEST
>     INDEX ON FIELD->Test TO __MYTEST
>     FOR i := 1 TO 10
>         APPEND BLANK
>         FIELD->test := Replicate( "1", 240 ) + Str( 10 - i, 1 )
>     NEXT
>     DbGoTop()
>     ? &(OrdKey())
>     ? "Length of &(OrdKey()) :" + Str( Len( &(OrdKey()) ) )
>     ? OrdKeyVal()
>     ? "Length of OrdKeyVal() :" + Str( Len(OrdKeyVal()) )
>     WHILE ! EOF()
>       ? Right( FIELD->Test, 1 )
>       DbSkip()
>     ENDDO
>     USE
>     FERASE( "__MYTEST.DBF" )
>     FERASE( "__MYTEST.CDX" )
>     ? "end"
> RETURN NIL

Only CL53/COMIX CDX driver generate RT error for keys longer then maximal
supported length. All other like NTX, CL52CDX, SIX3 (NTX,CDX,NSX) and
[x]Harbour current code simply cut the index keys to the maximal length
without any RT errors so I do not know it's good idea. People may have
code which depends on such behavior.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Sep 19 06:58:12 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 19 06:58:40 2008
Subject: [Harbour] Re: 2008-09-18 01:17 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48D2EA2A.6090002@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48D2EA2A.6090002@mail.udg.mx>
Message-ID: <20080919105811.GC31987@34-mo7-2.acn.waw.pl>

On Thu, 18 Sep 2008, David Arturo Macias Corona wrote:

Hi David,

> >  FAILED mttest05, mttest06
> >   something appear/disappear flashing in screen
> mttest05 are failing in random way
> Results of previous message were after building Harbour
> After reboot
>   Rebuilding mttest05
>   Failed first 3 run, does not failed next 4
> After reboot
>   Rebuilding mttest05
>   Does not failed next 5
> After reboot
>   Rebuilding mttest05
>   Does not failed, failed, does not, ... with rebuilt in between
>   See part of sequence output below

In theory such situation is possible if OS2 does not keep
thread return results for parent process when thread terminates.
In such case DosWaitThread() will always fail and hb_threadJoin()
will not store thread return value in second parameter. I'll
add workaround for it so for OS2 the results of DosWaitThread()
will be ignored. It should resolve the problem.
If the above is true then it also explains why there is no detaching
in OS2 - just simply there is nothing to detach and thread exist
codes are simply dropped by OS so parent cannot check them.

Many thanks for your tests.
I'll commit modifications in few hours and I'll ask you to
recheck mttest0[56].prg

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Sep 19 06:59:59 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 19 07:00:09 2008
Subject: [Harbour] to przmek about ordkeyval length
In-Reply-To: <20080919103503.GB31987@34-mo7-2.acn.waw.pl>
References: <48D362CB.8060205@marchuet.net>
	<20080919103503.GB31987@34-mo7-2.acn.waw.pl>
Message-ID: <D5AC4F99-0896-40B2-9974-71A0751CDFD1@syenar.hu>

>>
Hi Miguel, Przemek,

>>    ? "Length of OrdKeyVal() :" + Str( Len(OrdKeyVal()) )
>>    WHILE ! EOF()
>>      ? Right( FIELD->Test, 1 )
>>      DbSkip()
>>    ENDDO
>>    USE
>>    FERASE( "__MYTEST.DBF" )
>>    FERASE( "__MYTEST.CDX" )
>>    ? "end"
>> RETURN NIL
>
> Only CL53/COMIX CDX driver generate RT error for keys longer then  
> maximal
> supported length. All other like NTX, CL52CDX, SIX3 (NTX,CDX,NSX) and
> [x]Harbour current code simply cut the index keys to the maximal  
> length
> without any RT errors so I do not know it's good idea. People may have
> code which depends on such behavior.

I agree. This may simply cause incompatibilities
(RT errors) in so far well working C5x apps, so I'd vote
to somehow streamline this, to not cause these problems.

Brgds,
Viktor

From miguelangel at marchuet.net  Fri Sep 19 07:05:17 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Fri Sep 19 07:04:31 2008
Subject: [Harbour] to przmek about ordkeyval length
In-Reply-To: <20080919103503.GB31987@34-mo7-2.acn.waw.pl>
References: <48D362CB.8060205@marchuet.net>
	<20080919103503.GB31987@34-mo7-2.acn.waw.pl>
Message-ID: <48D3876D.5080109@marchuet.net>

> Only CL53/COMIX CDX driver generate RT error for keys longer then maximal
> supported length. All other like NTX, CL52CDX, SIX3 (NTX,CDX,NSX) and
> [x]Harbour current code simply cut the index keys to the maximal length
> without any RT errors so I do not know it's good idea. People may have
> code which depends on such behavior.

Yes is correct only CL53 generate this error, I only tested CL52, CL53 and VFP.
Then only CL52 no generate error (talking about CDX always).

People is possible don't know that and then his cdx is incorrectly indexed because an
error was expected.

CL53 and VFP generates an rt error.

I found this interesting information :
-------------
Note:
For a standalone index (.idx) file, the length of an index key must be between 1 and 100 characters. For a compound index (.cdx) 
file, the length of an index key must be between 1 and 240 characters.

With some collating sequences, or when using double-byte character set (DBCS) characters, each character in the index expression 
uses two characters in the index key. In these cases, the length of the index expression is limited to 50 or 120 characters, 
respectively.

If you specify an expression that exceeds the limits set for creating index keys, Visual FoxPro generates an error.

The length of an index key in a compound index (.cdx) file must be between 1 and 240 characters. The length of an index key in 
an index (.idx) file must be between 1 and 100 characters. With some collating sequences, or when using double-byte character 
set (DBCS) characters, each character in the index expression uses two characters in the index key. In these cases, the length 
of the index expression is limited to 120 characters.
---------------

Best regards,
Miguel Angel Marchuet
From miguelangel at marchuet.net  Fri Sep 19 07:31:28 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Fri Sep 19 07:30:43 2008
Subject: [Harbour] to przmek about ordkeyval length
In-Reply-To: <D5AC4F99-0896-40B2-9974-71A0751CDFD1@syenar.hu>
References: <48D362CB.8060205@marchuet.net>	<20080919103503.GB31987@34-mo7-2.acn.waw.pl>
	<D5AC4F99-0896-40B2-9974-71A0751CDFD1@syenar.hu>
Message-ID: <48D38D90.5050405@marchuet.net>

>>
>> Only CL53/COMIX CDX driver generate RT error for keys longer then maximal
>> supported length. All other like NTX, CL52CDX, SIX3 (NTX,CDX,NSX) and
>> [x]Harbour current code simply cut the index keys to the maximal length
>> without any RT errors so I do not know it's good idea. People may have
>> code which depends on such behavior.
> 
> I agree. This may simply cause incompatibilities
> (RT errors) in so far well working C5x apps, so I'd vote
> to somehow streamline this, to not cause these problems.
> 

If all CDX rdds except cl52 generate error with default capabilities.
I prefer compatibilities with others.

Some users found the problem after more hours of work expecting any
type of rt error. And result finally that the problem was a non compatible
feature to do happy an incorrect program.

If anybody want to make this index can use Left( <>, 240 ) to make a compatible
index.

Best regards,
Miguel Angel Marchuet
From sscc at mweb.co.za  Fri Sep 19 08:15:51 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Sep 19 08:16:38 2008
Subject: [Harbour] comp.lang.clipper
Message-ID: <48D397F7.5020901@mweb.co.za>

Hi

Does anyone have any objections to me putting a short note on 
comp.lang.clipper outlining the significant milestones recently passed 
and the new mt stuff?

Unless I missed something already.

Regards
Alex
From harbour.01 at syenar.hu  Fri Sep 19 08:17:12 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 19 08:17:27 2008
Subject: [Harbour] to przmek about ordkeyval length
In-Reply-To: <48D38D90.5050405@marchuet.net>
References: <48D362CB.8060205@marchuet.net>	<20080919103503.GB31987@34-mo7-2.acn.waw.pl>
	<D5AC4F99-0896-40B2-9974-71A0751CDFD1@syenar.hu>
	<48D38D90.5050405@marchuet.net>
Message-ID: <5B4EB553-8DF2-419B-8CDE-08F4B26689D6@syenar.hu>

>>>
Hi Miguel,

>>> Only CL53/COMIX CDX driver generate RT error for keys longer then  
>>> maximal
>>> supported length. All other like NTX, CL52CDX, SIX3 (NTX,CDX,NSX)  
>>> and
>>> [x]Harbour current code simply cut the index keys to the maximal  
>>> length
>>> without any RT errors so I do not know it's good idea. People may  
>>> have
>>> code which depends on such behavior.
>> I agree. This may simply cause incompatibilities
>> (RT errors) in so far well working C5x apps, so I'd vote
>> to somehow streamline this, to not cause these problems.
>
> If all CDX rdds except cl52 generate error with default capabilities.
> I prefer compatibilities with others.

Sorry, but in Harbour we prefer compatibility with 5.2e :)

As Przemek says, SIX for example doesn't RTE. So this seem
rather an RDD driver (and/or version) specific property,
and as such I'd suggest to replicate it that way in Harbour.

Otherwise everyone will have to retest his working applications
to see if they RTE with the new Harbour version, this is not
very easy and not very good solution. Also, in some situations
too long indexes may be simply the result of say an ID+NAME
index, where NAME happens to be very long, but practically
the cutting won't cause any real-word problems (unless it
throws an undersired RTE, that is). I'm sure if the cut part
of the index is relevant, the problem would found out anyway,
without an RTE, since this limit is a pretty well documented,
and long-standing one.

I'd suggest to revert this, if not possible to sort out
the version/RDD details.

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Sep 19 08:21:10 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 19 08:21:22 2008
Subject: [Harbour] comp.lang.clipper
In-Reply-To: <48D397F7.5020901@mweb.co.za>
References: <48D397F7.5020901@mweb.co.za>
Message-ID: <07108A25-B9DA-494C-94E1-FD2783AF8C27@syenar.hu>

Hi Alex,

Not at all, very good idea.

Brgds,
Viktor

On 2008.09.19., at 14:15, Alex Strickland wrote:

> Hi
>
> Does anyone have any objections to me putting a short note on  
> comp.lang.clipper outlining the significant milestones recently  
> passed and the new mt stuff?
>
> Unless I missed something already.
>
> Regards
> Alex
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Fri Sep 19 08:26:49 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Sep 19 08:27:05 2008
Subject: [Harbour] comp.lang.clipper
In-Reply-To: <48D397F7.5020901@mweb.co.za>
References: <48D397F7.5020901@mweb.co.za>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFB5@SRV02.deltain.net>

Good idea
What do you thiunk of : 

Harbour community is  pleased to announce that a major release of the
harbour: vesion 1.0.0.
Harbour is robust, highly tested, and valued by developers all over the
globe for its capabilities. Available on a wide range of Unix and
Windows platforms. 
now we are working on version 1.0.1 for update any error 
The group work also to version 1.1 who implement  Multi Thread structure
and  Multi windows as you can read at harbour developer list  at
http://news.gmane.org/gmane.comp.lang.harbour.devel  

So please test how your clipper source work without problem and post any
problem
and post problem (if present) here
https://sourceforge.net/tracker/?group_id=681&atid=100681&func=add 
or subscribe harbour mailing list here
http://lists.harbour-project.org/mailman/listinfo/harbour-users 

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Alex
Strickland
Sent: Friday, September 19, 2008 2:16 PM
To: Harbour Project Main Developer List.
Subject: [Harbour] comp.lang.clipper

Hi

Does anyone have any objections to me putting a short note on 
comp.lang.clipper outlining the significant milestones recently passed 
and the new mt stuff?

Unless I missed something already.

Regards
Alex
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From lorenzo.fiorini at gmail.com  Fri Sep 19 08:48:14 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Sep 19 08:48:21 2008
Subject: [Harbour] comp.lang.clipper
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFB5@SRV02.deltain.net>
References: <48D397F7.5020901@mweb.co.za>
	<AFB948164110ED43B5EB849E8DEEF03815EFB5@SRV02.deltain.net>
Message-ID: <9257026e0809190548u285e6211i2b0209718e8b204b@mail.gmail.com>

On Fri, Sep 19, 2008 at 2:26 PM, Massimo Belgrano <mbelgrano@deltain.it> wrote:

> What do you thiunk of :
>
> Harbour community is  pleased to announce that a major release of the
> harbour: vesion 1.0.0.
> ...
> http://lists.harbour-project.org/mailman/listinfo/harbour-users

Massimo, don't you think it's better to leave this kind of things to
native English speakers? :)

best regards,
Lorenzo
From toninhofwi at yahoo.com.br  Fri Sep 19 09:07:45 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Fri Sep 19 09:03:44 2008
Subject: [Harbour] to przmek about ordkeyval length
In-Reply-To: <5B4EB553-8DF2-419B-8CDE-08F4B26689D6@syenar.hu>
References: <48D362CB.8060205@marchuet.net>	<20080919103503.GB31987@34-mo7-2.acn.waw.pl>
	<D5AC4F99-0896-40B2-9974-71A0751CDFD1@syenar.hu>
	<48D38D90.5050405@marchuet.net>
	<5B4EB553-8DF2-419B-8CDE-08F4B26689D6@syenar.hu>
Message-ID: <ru87d4tfvov6uav82e5ik27l3u4enei2ah@4ax.com>

>As Przemek says, SIX for example doesn't RTE. So this seem
>rather an RDD driver (and/or version) specific property,
>and as such I'd suggest to replicate it that way in Harbour.

FYI ADS doesn't RTE too.

Regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From mbelgrano at deltain.it  Fri Sep 19 09:15:41 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Sep 19 09:15:52 2008
Subject: [Harbour] comp.lang.clipper
In-Reply-To: <9257026e0809190548u285e6211i2b0209718e8b204b@mail.gmail.com>
References: <48D397F7.5020901@mweb.co.za><AFB948164110ED43B5EB849E8DEEF03815EFB5@SRV02.deltain.net>
	<9257026e0809190548u285e6211i2b0209718e8b204b@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFB7@SRV02.deltain.net>

Absolutly but is only a suggestion

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Lorenzo
Fiorini
Sent: Friday, September 19, 2008 2:48 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] comp.lang.clipper

On Fri, Sep 19, 2008 at 2:26 PM, Massimo Belgrano <mbelgrano@deltain.it>
wrote:

> What do you thiunk of :
>
> Harbour community is  pleased to announce that a major release of the
> harbour: vesion 1.0.0.
> ...
> http://lists.harbour-project.org/mailman/listinfo/harbour-users

Massimo, don't you think it's better to leave this kind of things to
native English speakers? :)

best regards,
Lorenzo
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From miguelangel at marchuet.net  Fri Sep 19 09:16:25 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Fri Sep 19 09:17:57 2008
Subject: [Harbour] to przmek about ordkeyval length
In-Reply-To: <5B4EB553-8DF2-419B-8CDE-08F4B26689D6@syenar.hu>
References: <48D362CB.8060205@marchuet.net>	<20080919103503.GB31987@34-mo7-2.acn.waw.pl>	<D5AC4F99-0896-40B2-9974-71A0751CDFD1@syenar.hu>	<48D38D90.5050405@marchuet.net>
	<5B4EB553-8DF2-419B-8CDE-08F4B26689D6@syenar.hu>
Message-ID: <48D3A629.10103@marchuet.net>

we are talking about CDX not six.

the question is create incompatible CDX or not create ?

Instead of revert, i think is better to work by setting. Then people
as you that prefer cl52 compatible or people that prefer cl53 compatible

if you want cl52 compatible then you need to break Round function to work
bad as in CL52 too. Or in this case you are not interested ?

;)

Best regards
Miguel Angel marchuet

Szak?ts Viktor escribi?:
>>>>
> Hi Miguel,
>
>>>> Only CL53/COMIX CDX driver generate RT error for keys longer then 
>>>> maximal
>>>> supported length. All other like NTX, CL52CDX, SIX3 (NTX,CDX,NSX) and
>>>> [x]Harbour current code simply cut the index keys to the maximal 
>>>> length
>>>> without any RT errors so I do not know it's good idea. People may have
>>>> code which depends on such behavior.
>>> I agree. This may simply cause incompatibilities
>>> (RT errors) in so far well working C5x apps, so I'd vote
>>> to somehow streamline this, to not cause these problems.
>>
>> If all CDX rdds except cl52 generate error with default capabilities.
>> I prefer compatibilities with others.
>
> Sorry, but in Harbour we prefer compatibility with 5.2e :)
>
> As Przemek says, SIX for example doesn't RTE. So this seem
> rather an RDD driver (and/or version) specific property,
> and as such I'd suggest to replicate it that way in Harbour.
>
> Otherwise everyone will have to retest his working applications
> to see if they RTE with the new Harbour version, this is not
> very easy and not very good solution. Also, in some situations
> too long indexes may be simply the result of say an ID+NAME
> index, where NAME happens to be very long, but practically
> the cutting won't cause any real-word problems (unless it
> throws an undersired RTE, that is). I'm sure if the cut part
> of the index is relevant, the problem would found out anyway,
> without an RTE, since this limit is a pretty well documented,
> and long-standing one.
>
> I'd suggest to revert this, if not possible to sort out
> the version/RDD details.
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> __________ Informaci?n de ESET Smart Security, versi?n de la base de 
> firmas de virus 3455 (20080919) __________
>
> ESET Smart Security ha comprobado este mensaje.
> http://www.eset.com
>
>
>
From harbour.01 at syenar.hu  Fri Sep 19 09:24:58 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 19 09:25:15 2008
Subject: [Harbour] comp.lang.clipper
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFB5@SRV02.deltain.net>
References: <48D397F7.5020901@mweb.co.za>
	<AFB948164110ED43B5EB849E8DEEF03815EFB5@SRV02.deltain.net>
Message-ID: <641607E5-41D7-4188-84C8-1DD3BE5A023C@syenar.hu>

I trust Alex's judgment on the best wording on this
announcement.

Regarding yours, I'd definitely give a lesser marketing
tone to it, and I'd definitely refrain from advertising
not-yet existing features in Harbour (like multi-window),
however cool they might be, since there is no need to spread
unnecessary expectations or drive development directions
with such adverts. We also have a lot of other plans in
the mix.

gmane is not the official site of Harbour, I'd suggest
to advertise our own mailing list page, if anything, but
probably the main homepage is enough.

Brgds,
Viktor

On 2008.09.19., at 14:26, Massimo Belgrano wrote:

> Good idea
> What do you thiunk of :
>
> Harbour community is  pleased to announce that a major release of the
> harbour: vesion 1.0.0.
> Harbour is robust, highly tested, and valued by developers all over  
> the
> globe for its capabilities. Available on a wide range of Unix and
> Windows platforms.
> now we are working on version 1.0.1 for update any error
> The group work also to version 1.1 who implement  Multi Thread  
> structure
> and  Multi windows as you can read at harbour developer list  at
> http://news.gmane.org/gmane.comp.lang.harbour.devel
>
> So please test how your clipper source work without problem and post  
> any
> problem
> and post problem (if present) here
> https://sourceforge.net/tracker/?group_id=681&atid=100681&func=add
> or subscribe harbour mailing list here
> http://lists.harbour-project.org/mailman/listinfo/harbour-users
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org
> [mailto:harbour-bounces@harbour-project.org] On Behalf Of Alex
> Strickland
> Sent: Friday, September 19, 2008 2:16 PM
> To: Harbour Project Main Developer List.
> Subject: [Harbour] comp.lang.clipper
>
> Hi
>
> Does anyone have any objections to me putting a short note on
> comp.lang.clipper outlining the significant milestones recently passed
> and the new mt stuff?
>
> Unless I missed something already.
>
> Regards
> Alex
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Sep 19 09:48:29 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 19 09:48:51 2008
Subject: [Harbour] to przmek about ordkeyval length
In-Reply-To: <48D3A629.10103@marchuet.net>
References: <48D362CB.8060205@marchuet.net>	<20080919103503.GB31987@34-mo7-2.acn.waw.pl>	<D5AC4F99-0896-40B2-9974-71A0751CDFD1@syenar.hu>	<48D38D90.5050405@marchuet.net>
	<5B4EB553-8DF2-419B-8CDE-08F4B26689D6@syenar.hu>
	<48D3A629.10103@marchuet.net>
Message-ID: <C92FB330-6DD0-40D4-ACAF-A55457EB4159@syenar.hu>

>
Hi Miguel,

> we are talking about CDX not six.
> the question is create incompatible CDX or not create ?

Incompatible with what? I don't really understand what
existing bugs are you trying to fix here to be honest.

> Instead of revert, i think is better to work by setting. Then people
> as you that prefer cl52 compatible or people that prefer cl53  
> compatible

Our goal is to be C5.2x compatible. This didn't change.

Anyone can prefer anything else, that's not the question,
really. C5.2x apps should not break when compiled with Harbour.

> if you want cl52 compatible then you need to break Round function to  
> work
> bad as in CL52 too. Or in this case you are not interested ?

I'm not sure what the other hundreds of compatibility cases
have to do with this specific one. Please don't wash together
this issue with others. Sometimes we choose to fix C5.2 behavior
if it's _buggy_, and we do so after carefully discussing the
details, before committing anything.

In this case though there was no bug here at all. You simply
have a preference to have an RTE here, whilst Clipper just
silently cuts the key.

Since our goal is 5.2x, and this causes an incompatibility
even if you're implementing an 5.3 feature here, I'd suggest
to revert this.

Brgds,
Viktor

From sscc at mweb.co.za  Fri Sep 19 11:08:30 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Sep 19 11:09:15 2008
Subject: [Harbour] comp.lang.clipper
In-Reply-To: <07108A25-B9DA-494C-94E1-FD2783AF8C27@syenar.hu>
References: <48D397F7.5020901@mweb.co.za>
	<07108A25-B9DA-494C-94E1-FD2783AF8C27@syenar.hu>
Message-ID: <48D3C06E.3060204@mweb.co.za>

Szak?ts Viktor wrote:

> Not at all, very good idea.

I basically used your release wording, and added a little:

To all

Harbour: 1.0.1 released (2008-09-18 18:41)

The Harbour Project is a Free Open Source Software effort to build a 
multiplatform Clipper language compiler. Harbour consists of the xBase 
language compiler and the runtime libraries with different terminal 
plugins and different databases (not just DBF).

1.0.1 is the second release of the stable branch of Harbour. 
Development on this branch is now restricted to bug fixes and 
maintenance issues. You can download it from:

http://sourceforge.net/project/showfiles.php?group_id=681

Development of the trunk continues at version 1.1.0 with a major 
update to the project to allow multi-threading.

Regards
Alex Strickland



From harbour.01 at syenar.hu  Fri Sep 19 11:37:23 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 19 11:37:35 2008
Subject: [Harbour] comp.lang.clipper
In-Reply-To: <48D3C06E.3060204@mweb.co.za>
References: <48D397F7.5020901@mweb.co.za>
	<07108A25-B9DA-494C-94E1-FD2783AF8C27@syenar.hu>
	<48D3C06E.3060204@mweb.co.za>
Message-ID: <3E7ABB8B-04F7-436C-90B5-9E8825BD2C32@syenar.hu>

Hi Alex,

That's perfect, thanks a lot.

Brgds,
Viktor

On 2008.09.19., at 17:08, Alex Strickland wrote:

> Szak?ts Viktor wrote:
>
>> Not at all, very good idea.
>
> I basically used your release wording, and added a little:
>
> To all
>
> Harbour: 1.0.1 released (2008-09-18 18:41)
>
> The Harbour Project is a Free Open Source Software effort to build a  
> multiplatform Clipper language compiler. Harbour consists of the  
> xBase language compiler and the runtime libraries with different  
> terminal plugins and different databases (not just DBF).
>
> 1.0.1 is the second release of the stable branch of Harbour.  
> Development on this branch is now restricted to bug fixes and  
> maintenance issues. You can download it from:
>
> http://sourceforge.net/project/showfiles.php?group_id=681
>
> Development of the trunk continues at version 1.1.0 with a major  
> update to the project to allow multi-threading.
>
> Regards
> Alex Strickland
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From miguelangel at marchuet.net  Fri Sep 19 12:41:11 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Fri Sep 19 12:40:29 2008
Subject: [Harbour] to przmek about ordkeyval length
In-Reply-To: <C92FB330-6DD0-40D4-ACAF-A55457EB4159@syenar.hu>
References: <48D362CB.8060205@marchuet.net>	<20080919103503.GB31987@34-mo7-2.acn.waw.pl>	<D5AC4F99-0896-40B2-9974-71A0751CDFD1@syenar.hu>	<48D38D90.5050405@marchuet.net>	<5B4EB553-8DF2-419B-8CDE-08F4B26689D6@syenar.hu>	<48D3A629.10103@marchuet.net>
	<C92FB330-6DD0-40D4-ACAF-A55457EB4159@syenar.hu>
Message-ID: <48D3D627.7090604@marchuet.net>

Szak?ts Viktor escribi?:
>>
> Hi Miguel,
> 
>> we are talking about CDX not six.
>> the question is create incompatible CDX or not create ?
> 
> Incompatible with what? I don't really understand what
> existing bugs are you trying to fix here to be honest.
> 

(remember that OrdKeyVal and others doesn't exists at CL52 as you know perfectly)

if you create an index CDX of DBFCDX with Len( OrdKeyVal() ) > 240
without my last commit,

1st) the index can be incorrect ordered
2nd) the index can't be opened with some other non harbour programs because
      is not cdx compatible.

I suggest to arise rt error under define, of course only at DBFCDX rdd (I'm not talking about ADS and others)

	#define HB_COMPAT_C53

remember you that HB_COMPAT_C53 is the default flag at harbour

/* #define HB_EXTENSION */        /* Enable Harbour non-portable extensions */
#define HB_C52_UNDOC              /* Enable CA-Cl*pper 5.2e/5.3x undocumented features */
/* #define HB_C52_STRICT */       /* Enable CA-Cl*pper 5.2e/5.3x strict compatibility */
#define HB_COMPAT_C53             /* Enable CA-Cl*pper 5.3x extensions */
#define HB_COMPAT_XPP             /* Enable Alaska Xbase++ extensions */
/* #define HB_COMPAT_VO */        /* Enable CA-VO extensions */
#define HB_COMPAT_FLAGSHIP        /* Enable Flagship extensions */
/* #define HB_COMPAT_FOXPRO */    /* Enable FoxPro extensions */
/* #define HB_COMPAT_DBASE */     /* Enable dBase extensions */
/* #define HB_COMPAT_CLIP */      /* Enable CLIP extensions */


Best regards,
Miguel Angel Marchuet
From maurilio.longo at libero.it  Fri Sep 19 12:52:23 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Sep 19 12:52:31 2008
Subject: [Harbour] Re: 2008-09-18 01:17 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080918151030.GC5189@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<48D20843.7000208@mail.udg.mx>
	<20080918151030.GC5189@34-mo7-2.acn.waw.pl>
Message-ID: <48D3D8C7.7000609@libero.it>

Przemyslaw,

no, there is not mmap on OS/2. Several years ago I wrote a .dll to emulate it
for the msql (miniSQL) OS/2 port and it worked ok, but was not the real thing :)

You can still find it on http://hobbes.nsmu.edu, but I think it would be
better not to use it at all.

Best regards.

Maurilio.

Przemyslaw Czerpak wrote:
> On Thu, 18 Sep 2008, David Arturo Macias Corona wrote:
> 
> Hi David,
> 
>> Below are results of current Harbour under eComStation 1.2MR
>> gcc 3.3.5
>> set C_USR=-DHB_FM_STATISTICS_OFF -DHB_FM_DL_ALLOC
>> errors in dlmalloc.c
>> In file included from ../../fm.c:117:
>> ../../dlmalloc.c: In function `mmap_alloc':
>> ../../dlmalloc.c:3120: error: `MAP_PRIVATE' undeclared (first use in this 
>> functi
>> on)
>> ../../dlmalloc.c:3120: error: (Each undeclared identifier is reported only 
>> once
>> ../../dlmalloc.c:3120: error: for each function it appears in.)
>> ../../dlmalloc.c: In function `sys_alloc':
>> ../../dlmalloc.c:3417: error: `MAP_PRIVATE' undeclared (first use in this 
>> functi
>> on)
>> ../../dlmalloc.c: In function `release_unused_segments':
>> ../../dlmalloc.c:3537: warning: implicit declaration of function `munmap'
> 
> If GCC for OS2 does not give emulation layer for mmap functions then
> this code will not work for you. It can be updated to use native OS2
> API but it should be done by real OS2 user who knows well this system
> and some low level functions behavior and performance in different
> situations. Now do not enable HB_FM_DL_ALLOC it in OS2 builds.
> 
> BTW If possible please recompile Harbour (without HB_FM_DL_ALLOC of
> course) and check speedtst.prg in MT mode. I would like to see the
> speed difference after my last modification which enabled inlined
> assembler version of atomic reference counters incrementation and
> decrementation in OS2 builds.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Fri Sep 19 12:56:47 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Sep 19 12:56:56 2008
Subject: [Harbour] Re: 2008-09-18 01:17 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080919105811.GC31987@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<48D2EA2A.6090002@mail.udg.mx>
	<20080919105811.GC31987@34-mo7-2.acn.waw.pl>
Message-ID: <48D3D9CF.4030304@libero.it>

Przemyslaw Czerpak wrote:
> In theory such situation is possible if OS2 does not keep
> thread return results for parent process when thread terminates.
> In such case DosWaitThread() will always fail and hb_threadJoin()
> will not store thread return value in second parameter. I'll
> add workaround for it so for OS2 the results of DosWaitThread()
> will be ignored. It should resolve the problem.
> If the above is true then it also explains why there is no detaching
> in OS2 - just simply there is nothing to detach and thread exist
> codes are simply dropped by OS so parent cannot check them.
> 

this is what doswaitthread() does:

Places the current thread into a wait state until another thread in the
current process has ended. It then returns the thread identifier of the ending
thread.

#define INCL_DOSPROCESS
#include <os2.h>

PTID      ptid;    /*  Address of the thread identification. */
ULONG     option;  /*  An indicator that specifies whether to return if no
thread has ended. */
APIRET    ulrc;    /*  Return Code. */

ulrc = DosWaitThread(ptid, option);


ptid (PTID) - in/out
Address of the thread identification.


Input The address of the ThreadID of the thread of interest. If ptid is 0, the
current thread waits until the next thread in the process has ended. If ptid
is nonzero, the current thread waits until the indicated thread has ended.

Output The ThreadID of the ended thread is returned in this field.

option (ULONG) - input
An indicator that specifies whether to return if no thread has ended.

The values of this field are shown in the following list:

0 DCWW_WAIT
The current thread waits until a thread ends. If a thread has already ended,
the call returns immediately with the ptid.

1 DCWW_NOWAIT
The current thread does not wait if no threads have ended.

ulrc (APIRET) - returns
Return Code.

DosWaitThread returns one of the following values:

0 NO_ERROR
95 ERROR_INTERRUPT
294 ERROR_THREAD_NOT_TERMINATED
309 ERROR_INVALID_THREADID

For a full list of error codes, see Errors.

Remarks:

DosWaitThread is used to wait for termination of threads within a process. It
is usually used so that thread resources (for example, the stack) can be
recovered when a thread ends. DosWaitThread waits on any thread within the
current process, or on a specific thread within the process, based on the ptid
parameter's contents. option allows the caller the option of waiting until a
thread ends, or getting immediate return and status. If no thread has ended
and the DCWW_NOWAIT option is specified, the ptid field is preserved.

If DosWaitThread is called with the input ptid set to the current thread (the
thread attempts to wait on its own termination), the ERROR_INVALID_THREADID
error code is returned. ERROR_INVALID_THREADID is also returned if a caller
attempts to wait on the termination of the thread with a ptid of 1.


I hope this helps and thanks for your continued OS/2 support!

Best regards.

Maurilio.


-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From mbelgrano at deltain.it  Fri Sep 19 13:06:21 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Sep 19 13:06:35 2008
Subject: [Harbour] Unresolved External with BCC582
In-Reply-To: <48D2E87D.8030006@gmail.com>
References: <48d29303.c6c1f10a.26a1.532cSMTPIN_ADDED@mx.google.com>
	<48D2E87D.8030006@gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFBA@SRV02.deltain.net>

You have to link your application. with cw32mt.lib instead of cw32.lib
and with hbvmmt.lib instead of hbvm.li

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Mario H.
Sabado
Sent: Friday, September 19, 2008 1:47 AM
To: harbour@harbour-project.org
Subject: [Harbour] Unresolved External with BCC582

Hi,

I have encountered below error when compiling my application from latest

SVN.  I'm using BCC582 and xMate.

Unresolved external '__beginthreadex' reference from
..\LIB\HBVM.LIB|thread
Unresolved external '__endthreadex' reference from
..\LIB\HBVM.LIB|thread

Thanks for any help.

Regards,
Mario
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Fri Sep 19 13:20:38 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 19 13:20:50 2008
Subject: [Harbour] to przmek about ordkeyval length
In-Reply-To: <48D3D627.7090604@marchuet.net>
References: <48D362CB.8060205@marchuet.net>	<20080919103503.GB31987@34-mo7-2.acn.waw.pl>	<D5AC4F99-0896-40B2-9974-71A0751CDFD1@syenar.hu>	<48D38D90.5050405@marchuet.net>	<5B4EB553-8DF2-419B-8CDE-08F4B26689D6@syenar.hu>	<48D3A629.10103@marchuet.net>
	<C92FB330-6DD0-40D4-ACAF-A55457EB4159@syenar.hu>
	<48D3D627.7090604@marchuet.net>
Message-ID: <62A82EE3-163D-40C6-9939-20CB3A9570FC@syenar.hu>

>
Hi Miguel,

> (remember that OrdKeyVal and others doesn't exists at CL52 as you  
> know perfectly)

You've added two new RTEs in CDX code in two commits.

Both of these went into the index creation code
(hb_cdxOrderCreate()), so I'm not sure what do these have
to do with 5.3-only OrdKeyVal(). What am I missing?

> if you create an index CDX of DBFCDX with Len( OrdKeyVal() ) > 240
> without my last commit,
>
> 1st) the index can be incorrect ordered

They're not incorrect, rather they are perfectly ordered
along the documentation.

It's a different matter, that some programmers may
not know about this (IMO well-known and old) limit, and
may expect wrong code to work as they imagined.

> 2nd) the index can't be opened with some other non harbour programs  
> because
>     is not cdx compatible.

Even if this is true, we should solve it in a C52 compatible
way, which seems to be to simply cut the key according
to the limit. As far as I can see from the code, this is
exactly what happened in Harbour, before your patches.

See lines 7407-7408 in r9343.

> I suggest to arise rt error under define, of course only at DBFCDX  
> rdd (I'm not talking about ADS and others)
>
> 	#define HB_COMPAT_C53
>
> remember you that HB_COMPAT_C53 is the default flag at harbour

This would be a nice administrative move, but since
- as you say - we have C53 features turned on by default,
it wouldn't solve any of the C52 compatibility problems
this would cause.

This is a C53 "feature" which breaks C52 compatibility
for no good reason. The reason is probably that they've
completely swapped the CDX RDD in 5.3, and such details
got lost in this - I supposed - rushed development move,
but this wouldn't be the last thing gone wrong in C5.3
development anyway.

I still vote to revert this.

Notice however that in hbbmcdx you may well keep all
these extra features, as we don't have similar compatibility
concerns there.

Brgds,
Viktor

From mbelgrano at deltain.it  Fri Sep 19 13:51:57 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Sep 19 13:52:10 2008
Subject: [Harbour] to przmek about ordkeyval length
In-Reply-To: <62A82EE3-163D-40C6-9939-20CB3A9570FC@syenar.hu>
References: <48D362CB.8060205@marchuet.net>	<20080919103503.GB31987@34-mo7-2.acn.waw.pl>	<D5AC4F99-0896-40B2-9974-71A0751CDFD1@syenar.hu>	<48D38D90.5050405@marchuet.net>	<5B4EB553-8DF2-419B-8CDE-08F4B26689D6@syenar.hu>	<48D3A629.10103@marchuet.net><C92FB330-6DD0-40D4-ACAF-A55457EB4159@syenar.hu><48D3D627.7090604@marchuet.net>
	<62A82EE3-163D-40C6-9939-20CB3A9570FC@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFBC@SRV02.deltain.net>

I vote also for not implement "feature" which breaks C52 compatibility
HB_strictlyCOMPAT_C53_and_imcompatible_52

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Friday, September 19, 2008 7:21 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] to przmek about ordkeyval length

>
Hi Miguel,

> (remember that OrdKeyVal and others doesn't exists at CL52 as you  
> know perfectly)

You've added two new RTEs in CDX code in two commits.

Both of these went into the index creation code
(hb_cdxOrderCreate()), so I'm not sure what do these have
to do with 5.3-only OrdKeyVal(). What am I missing?

> if you create an index CDX of DBFCDX with Len( OrdKeyVal() ) > 240
> without my last commit,
>
> 1st) the index can be incorrect ordered

They're not incorrect, rather they are perfectly ordered
along the documentation.

It's a different matter, that some programmers may
not know about this (IMO well-known and old) limit, and
may expect wrong code to work as they imagined.

> 2nd) the index can't be opened with some other non harbour programs  
> because
>     is not cdx compatible.

Even if this is true, we should solve it in a C52 compatible
way, which seems to be to simply cut the key according
to the limit. As far as I can see from the code, this is
exactly what happened in Harbour, before your patches.

See lines 7407-7408 in r9343.

> I suggest to arise rt error under define, of course only at DBFCDX  
> rdd (I'm not talking about ADS and others)
>
> 	#define HB_COMPAT_C53
>
> remember you that HB_COMPAT_C53 is the default flag at harbour

This would be a nice administrative move, but since
- as you say - we have C53 features turned on by default,
it wouldn't solve any of the C52 compatibility problems
this would cause.

This is a C53 "feature" which breaks C52 compatibility
for no good reason. The reason is probably that they've
completely swapped the CDX RDD in 5.3, and such details
got lost in this - I supposed - rushed development move,
but this wouldn't be the last thing gone wrong in C5.3
development anyway.

I still vote to revert this.

Notice however that in hbbmcdx you may well keep all
these extra features, as we don't have similar compatibility
concerns there.

Brgds,
Viktor

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Fri Sep 19 13:54:41 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 19 13:55:10 2008
Subject: [Harbour] Re: 2008-09-18 01:17 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48D3D8C7.7000609@libero.it>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48D20843.7000208@mail.udg.mx>
	<20080918151030.GC5189@34-mo7-2.acn.waw.pl>
	<48D3D8C7.7000609@libero.it>
Message-ID: <20080919175441.GA32368@34-mo7-2.acn.waw.pl>

On Fri, 19 Sep 2008, Maurilio Longo wrote:

Hi Maurilio,

> no, there is not mmap on OS/2. Several years ago I wrote a .dll to emulate it
> for the msql (miniSQL) OS/2 port and it worked ok, but was not the real thing :)
> You can still find it on http://hobbes.nsmu.edu, but I think it would be
> better not to use it at all.

Thank you very much for the information. It means that dlmalloc.c
will have to be updated to use native OS2 API in the future if it
works as expected for Windows users.
Probably you are the best person to make it in such case :-)

best regards,
Przemek
From druzus at acn.waw.pl  Fri Sep 19 14:14:07 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 19 14:14:33 2008
Subject: [Harbour] Re: 2008-09-18 01:17 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48D3D9CF.4030304@libero.it>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48D2EA2A.6090002@mail.udg.mx>
	<20080919105811.GC31987@34-mo7-2.acn.waw.pl>
	<48D3D9CF.4030304@libero.it>
Message-ID: <20080919181407.GB32368@34-mo7-2.acn.waw.pl>

On Fri, 19 Sep 2008, Maurilio Longo wrote:

Hi Maurilio,

> this is what doswaitthread() does:
> Places the current thread into a wait state until another thread in the
> current process has ended. It then returns the thread identifier of the
> ending thread.
[...]
> I hope this helps and thanks for your continued OS/2 support!

Yes thank you very much. I haven't noticed it before and I was suggested
by DosWaitThread() usage in xHarbour which is also wrong. I should read
domination more carefully.
This function cannot be used to join given thread because it waits for
_any_ thread termination. It also explains some other things. Why OS2
does not have thread detach functionality. It's not necessary because
it deallocates all thread resources (stack and exit code) when thread
terminates automatically without waiting for other thread to collect
this information.
It means for use two things:
1. we do not need any other spacial code for thread detaching because
   for us all OS2 threads are detached.
2. we have to implement join functionality our self becasue OS2 does
   not supports it and DosWaitThread() cannot be used for two reasons:
      a. it waits for any thread
      b. there is race condition in using this function because thread
         can terminate before we call it.

I'll try to implement our own thread joining code for OS2 soon.

best regards,
Przemek
From maurilio.longo at libero.it  Fri Sep 19 15:20:48 2008
From: maurilio.longo at libero.it (maurilio longo)
Date: Fri Sep 19 15:20:54 2008
Subject: =?iso-8859-1?b?UmU6IFtIYXJib3VyXSBSZTogMjAwOC0wOS0xOCAwMToxNyBVVEMr?=
	=?iso-8859-1?b?MDIwMCBQcnplbXlzbGF3IEN6ZXJwYWsgKGRydXp1cy9hdC9wcml2?=
	=?iso-8859-1?b?Lm9uZXQucGwp?=
Message-ID: <K7GJ2O$12B4140D04FD4373CBCDC73DAC20FD5D@libero.it>

Przemyslaw,

> This function cannot be used to join given thread because it waits for
> _any_ thread termination. 

No, you can wait for a particular thread.

See:

ptid (PTID) - in/out Address of the thread identification.

Input The address of the ThreadID of the thread of interest. If ptid is 0, the current thread waits until the next thread in the process has ended. If ptid is nonzero, the current thread waits until the indicated thread has ended.

Output The ThreadID of the ended thread is returned in this field. 


>It also explains some other things. Why OS2
> does not have thread detach functionality. It's not necessary because
> it deallocates all thread resources (stack and exit code) when thread
> terminates automatically without waiting for other thread to collect
> this information.

Yes, right.

> It means for use two things:
> 1. we do not need any other spacial code for thread detaching because
>    for us all OS2 threads are detached.
> 2. we have to implement join functionality our self becasue OS2 does
>    not supports it and DosWaitThread() cannot be used for two reasons:
>       a. it waits for any thread

No, see before.

>       b. there is race condition in using this function because thread
>          can terminate before we call it.
> 

I'm not sure of this, but I think that if you call it with the ID of a terminated thread or a thread terminates while you're calling it with its ID you get back

309 ERROR_INVALID_THREADID 

Best regards.

Maurilio.

> I'll try to implement our own thread joining code for OS2 soon.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

From druzus at acn.waw.pl  Fri Sep 19 15:53:05 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 19 15:53:31 2008
Subject: [Harbour] Re: 2008-09-18 01:17 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <K7GJ2O$12B4140D04FD4373CBCDC73DAC20FD5D@libero.it>
References: <K7GJ2O$12B4140D04FD4373CBCDC73DAC20FD5D@libero.it>
Message-ID: <20080919195305.GA1132@34-mo7-2.acn.waw.pl>

On Fri, 19 Sep 2008, maurilio longo wrote:

Hi Maurilio,

> > This function cannot be used to join given thread because it waits for
> > _any_ thread termination.
> No, you can wait for a particular thread.
> See:
> ptid (PTID) - in/out Address of the thread identification.
> Input The address of the ThreadID of the thread of interest. If ptid is 0, the current thread waits until the next thread in the process has ended. If ptid is nonzero, the current thread waits until the indicated thread has ended.
> Output The ThreadID of the ended thread is returned in this field.

Yes, Again I was to fast in reading the description :-(
Anyhow it does not explain David's results.
At least one thread should be correctly joined because main thread
jumps to join threads very fast when other threads have to make their
jobs which take few seconds.
I'll add workaround for collecting thread results. Probably it will help
but this code should be checked by real OS2 user.

> I'm not sure of this, but I think that if you call it with the ID of a terminated thread or a thread terminates while you're calling it with its ID you get back
> 309 ERROR_INVALID_THREADID

So the race condition still exists. Sooner or later the TID will have
to be reused. I only hope that it's not done too frequently and OS2 tries
to allocate unique TIDs reusing if necessary the ones freed earlier in
FIFO order. It will minimize the risk of race condition.

Thank you very much for your help.

best regards,
Przemek
From bedipritpal at hotmail.com  Fri Sep 19 16:13:13 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Sep 19 16:13:19 2008
Subject: [Harbour] HB_EXEC() - Candidate for RTL ?
Message-ID: <19578811.post@talk.nabble.com>


Hello Guys

Function HB_EXEC() is included in HBTIP.LIB.
Is not this function a candidate for RTL?

HBWhat.lib calls this function. In xHarbour it is 
included in eval.c.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/HB_EXEC%28%29---Candidate-for-RTL---tp19578811p19578811.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Fri Sep 19 16:28:08 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 19 16:28:34 2008
Subject: [Harbour] 2008-09-19 22:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080919202808.GA8826@34-mo7-2.acn.waw.pl>

2008-09-19 22:27 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/set.c
    ! fixed casting

  * harbour/contrib/xhb/xhbcopyf.c
    * replaced TABs with SPACEs

  * harbour/include/hbapirdd.h
  * harbour/source/rdd/workarea.c
  * harbour/source/rdd/wacore.c
  * harbour/source/rdd/wafunc.c
    + added support for detaching and attaching workareas

  * harbour/source/vm/hvm.c
    % minor cleanup in thread return code

  * harbour/include/hbthread.h
  * harbour/source/vm/thread.c
    * unlock HVM stack during thread join operation
    * added workaround for DosWaitThread() which seems to fail if thread
      terminated before
    ; added TOFIX note for OS2 and join code

best regards
Przemek
From bedipritpal at hotmail.com  Fri Sep 19 16:29:57 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Sep 19 16:30:03 2008
Subject: [Harbour] RDD - <CONNECTION> of type PHB_ITEM
Message-ID: <19579020.post@talk.nabble.com>


Hello Przemek

I re-request :
1) Extend <CONNECTION> clause to be of type PHB_ITEM
OR
2) Provide new clause like <CARGO> of type PHB_ITEM in 
core of RDD.

I understand that this feature may be used by new RDDs in 
different way but probably new RDDs may have additional features 
which cannot be covered uniformally in all RDDs.

I am missing a lot of features on an RDBMS Rdd on top of USRRDD
due to lack of an additional slot in the RDD layer.

BTW <CONNECTION> clause gives RTE, can you please look into?

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/RDD---%3CCONNECTION%3E-of-type-PHB_ITEM-tp19579020p19579020.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Fri Sep 19 17:32:43 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 19 17:33:10 2008
Subject: [SPAM]  [Harbour] RDD - <CONNECTION> of type PHB_ITEM
In-Reply-To: <19579020.post@talk.nabble.com>
References: <19579020.post@talk.nabble.com>
Message-ID: <20080919213243.GA20896@34-mo7-2.acn.waw.pl>

On Fri, 19 Sep 2008, Pritpal Bedi wrote:

Hi Pritpal,

> I re-request :
> 1) Extend <CONNECTION> clause to be of type PHB_ITEM
> OR
> 2) Provide new clause like <CARGO> of type PHB_ITEM in 
> core of RDD.
> I understand that this feature may be used by new RDDs in 
> different way but probably new RDDs may have additional features 
> which cannot be covered uniformally in all RDDs.
> I am missing a lot of features on an RDBMS Rdd on top of USRRDD
> due to lack of an additional slot in the RDD layer.

OK, I'll look at RDD code and check what can be optimal solution.

> BTW <CONNECTION> clause gives RTE, can you please look into?

When I was working on new PP and std.ch I removed them and
haven't restored so far. Maybe even good because now we can
collect more features together without unnecessary redundancy.
In next week I'll try to collect the list and send it here.

best regards,
Przemek
From bedipritpal at hotmail.com  Fri Sep 19 18:02:33 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Sep 19 18:02:39 2008
Subject: [Harbour] [SPAM]  RDD - <CONNECTION> of type PHB_ITEM
In-Reply-To: <20080919213243.GA20896@34-mo7-2.acn.waw.pl>
References: <19579020.post@talk.nabble.com>
	<20080919213243.GA20896@34-mo7-2.acn.waw.pl>
Message-ID: <19579865.post@talk.nabble.com>


Przemek,


Przemyslaw Czerpak-2 wrote:
> 
> OK, I'll look at RDD code and check what can be optimal solution.
> 
>> BTW <CONNECTION> clause gives RTE, can you please look into?
> 
> When I was working on new PP and std.ch I removed them and
> haven't restored so far. Maybe even good because now we can
> collect more features together without unnecessary redundancy.
> In next week I'll try to collect the list and send it here.
> 

Thanks a lot. I will be waiting.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/RDD---%3CCONNECTION%3E-of-type-PHB_ITEM-tp19579020p19579865.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Fri Sep 19 18:12:39 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 19 18:13:06 2008
Subject: [SPAM]  [Harbour] HB_EXEC() - Candidate for RTL ?
In-Reply-To: <19578811.post@talk.nabble.com>
References: <19578811.post@talk.nabble.com>
Message-ID: <20080919221239.GB20896@34-mo7-2.acn.waw.pl>

On Fri, 19 Sep 2008, Pritpal Bedi wrote:

Hi Pritpal,


> Function HB_EXEC() is included in HBTIP.LIB.
> Is not this function a candidate for RTL?

Rather not. This function uses hack which is
strictly oriented for current HVM low level
code. I'd rather prefer sth cleaner for such
jobs or implemented directly in HVM code.

> HBWhat.lib calls this function. In xHarbour it is 
> included in eval.c.

This:

   If Valtype(bProc)=="N"
      nRet := HB_Exec( bProc, oObj, hWnd, nMsg, nwParam, nlParam, xCargo )

and this code:

   iif(Valtype(aDialog[ nIndex, 2 ])=="N", ;
      HB_Exec( aDialog[ nIndex,2 ], aDialog[ nIndex, 4], hDlg, nMsg, nwParam, nlParam, aDialog[ nIndex, 5 ]  ),;
      0 );

for sure does not work correctly. If HB_Exec() is executed with
1-st numeric parameter then it causes RT error in both Harbour
and xHarbour.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Sep 19 18:42:44 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 19 18:43:11 2008
Subject: [Harbour] 2008-09-20 00:42 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080919224244.GA19677@34-mo7-2.acn.waw.pl>

2008-09-20 00:42 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  + harbour/source/rdd/wadetach.c
    + added .prg functions:
         hb_waDetach( [<nWorkArea>|<cAlias>], [<xCargo>] ) -> <lSuccess>
         hb_waRequest( [<cAlias>], [<lFreeArea>], [<@xCargo>], [<lWait>] )
            -> <lSuccess>
      The first one detach workarea from current thread and move it
      to special hidden holder. Before detaching all relations (parent
      and child) to detached workarea are cleared.
      The second one restores area from the holder and attach it
      to calling thread.
    + added xBase++ compatible functions DbRelease() / DbRequest()
      xBase++ users please test. If possible please also check what xBase++
      does with relations and active RLOCKs/FLOCK on released WA.

best regards
Przemek
From druzus at acn.waw.pl  Fri Sep 19 18:43:04 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 19 18:43:30 2008
Subject: [SPAM]  [Harbour] MT and WA - Implementation Notes in Xbase++
In-Reply-To: <20080917002925.GD24897@34-mo7-2.acn.waw.pl>
References: <19522439.post@talk.nabble.com>
	<20080917002925.GD24897@34-mo7-2.acn.waw.pl>
Message-ID: <20080919224304.GC20896@34-mo7-2.acn.waw.pl>

On Wed, 17 Sep 2008, Przemyslaw Czerpak wrote:

Hi Pritpal,

> > Here are two functions in Xbase++ which amply
> > demonstrate the functionality of ZERO space where 
> > two threads can share a common WA.
> Many thanks for the documentation.

I just commited them but I had to make one thing which
is not explicitly set in documentation: clear all relations
in current work area and in all its parrent.
I also do not know if xBase++ removes all locks from WA
(dbUnlock()) before detaching. I added such code but is
disabled by default now.

best regards,
Przemek
From mhsabado at gmail.com  Fri Sep 19 20:45:56 2008
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Fri Sep 19 20:46:29 2008
Subject: [Harbour] Unresolved External with BCC582
In-Reply-To: <48d3ed63.1c365e0a.73ff.ffff8ac1SMTPIN_ADDED@mx.google.com>
References: <48d3ed63.1c365e0a.73ff.ffff8ac1SMTPIN_ADDED@mx.google.com>
Message-ID: <48D447C4.8070708@gmail.com>

> Message: 4
> Date: Fri, 19 Sep 2008 19:06:21 +0200
> From: "Massimo Belgrano" <mbelgrano@deltain.it>
> Subject: RE: [Harbour] Unresolved External with BCC582
> To: "Harbour Project Main Developer List."
> 	<harbour@harbour-project.org>
> Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFBA@SRV02.deltain.net>
> Content-Type: text/plain;	charset="US-ASCII"
>
> You have to link your application. with cw32mt.lib instead of cw32.lib
> and with hbvmmt.lib instead of hbvm.li
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org
> [mailto:harbour-bounces@harbour-project.org] On Behalf Of Mario H.
> Sabado
> Sent: Friday, September 19, 2008 1:47 AM
> To: harbour@harbour-project.org
> Subject: [Harbour] Unresolved External with BCC582
>
> Hi,
>
> I have encountered below error when compiling my application from latest
>
> SVN.  I'm using BCC582 and xMate.
>
> Unresolved external '__beginthreadex' reference from
> ..\LIB\HBVM.LIB|thread
> Unresolved external '__endthreadex' reference from
> ..\LIB\HBVM.LIB|thread
>
> Thanks for any help.
>
> Regards,
> Mario
Massimo,  sorry for my ignorance but what switch do I need to build HBVMMT.LIB?  I can't find it in current build.

Thanks and best regards,
Mario

From druzus at acn.waw.pl  Fri Sep 19 21:38:59 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 19 21:39:27 2008
Subject: [Harbour] 2008-09-20 03:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080920013859.GA1102@34-mo7-2.acn.waw.pl>

2008-09-20 03:38 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/hvm.c
    * minor modification: #ifdef ... => #if defined( ... )

  * harbour/source/rtl/gtcrs/gtcrs.c
  * harbour/source/rtl/gttrm/gttrm.c
    ! fixed reentrance counter resetting

best regards
Przemek
From hbco2 at sbcglobal.net  Fri Sep 19 21:51:29 2008
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Fri Sep 19 21:51:25 2008
Subject: [Harbour] 2008-09-20 03:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080920013859.GA1102@34-mo7-2.acn.waw.pl>
References: <20080920013859.GA1102@34-mo7-2.acn.waw.pl>
Message-ID: <1221875489.4238.11.camel@hblx.340cst>

BCC32 (WinXP) reports it doesn't know how to make obj/b32/dbdetach.obj-

On Sat, 2008-09-20 at 03:38 +0200, Przemyslaw Czerpak wrote:
> 2008-09-20 03:38 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/vm/hvm.c
>     * minor modification: #ifdef ... => #if defined( ... )
> 
>   * harbour/source/rtl/gtcrs/gtcrs.c
>   * harbour/source/rtl/gttrm/gttrm.c
>     ! fixed reentrance counter resetting
> 
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From teo at windtelsoft.com  Fri Sep 19 22:29:20 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Fri Sep 19 22:18:25 2008
Subject: [Harbour] 2008-09-20 03:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <1221875489.4238.11.camel@hblx.340cst>
References: <20080920013859.GA1102@34-mo7-2.acn.waw.pl>
	<1221875489.4238.11.camel@hblx.340cst>
Message-ID: <200809192129.20753.teo@windtelsoft.com>

On Friday 19 September 2008 08:51:29 pm Bill Smith wrote:
> BCC32 (WinXP) reports it doesn't know how to make obj/b32/dbdetach.obj-
>
> On Sat, 2008-09-20 at 03:38 +0200, Przemyslaw Czerpak wrote:
> > 2008-09-20 03:38 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> >   * harbour/source/vm/hvm.c
> >     * minor modification: #ifdef ... => #if defined( ... )
> >
> >   * harbour/source/rtl/gtcrs/gtcrs.c
> >   * harbour/source/rtl/gttrm/gttrm.c
> >     ! fixed reentrance counter resetting

2008-09-19 21:26 UTC-0500 Teo Fonrouge (teo/at/windtelsoft/dot/com)
  * common.mak
  * source/rdd/Makefile
    * removed dbdetach.* from make constructors


best regards,

Teo
From bedipritpal at hotmail.com  Fri Sep 19 23:14:33 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Sep 19 23:14:41 2008
Subject: [Harbour] MT Modal - Harbour vs xHarbour
Message-ID: <19582273.post@talk.nabble.com>


Hello Guys

Here is the message transcript on xHarbour NG:

*******************************************************
Pritpal Bedi ha scritto:
> Hello Gian
> 
>>> Development of the trunk continues at version 1.1.0 with a major update
>>> to the project to allow multi-threading.
>>>
>> Just by the way, is there any relation with XHB threading?
> 
> I do not know the internals of MT but it seems Harbour
> MT modal is quiet different from xHarbour's.
> 
> The main difference what I can see ( from programmers point of view )
> is that each thread is self contained as far as PRIVATE, STATICS, and
> WORK AREAS are concerned. You can open one table in different
> threads with same alias, just like in Xbase++. In xHarbour you
> cannot achieve the same. If you remember, I had requested you this
> feature when you were working on MT.
> 
> Harbour MT is heading towards Xbase++ modal which I, personally,
> consider is the de facto standard.
> 
> Regards
> Pritpal Bedi 
> 
> 

:-) Which means that you cannot work on the same area from different
threads.

However, the work I left on MT was interesting but still incomplete. I
hoped for someone to complete the work; and, as you remember, I pointed
out that separating work areas, private and other things for each thread
would have been extremely easy, actually easier than how the thing was
done (i.e. a simplification), and that if there was a concrete will to
do that any (core) developer in xharbour should have been able to do that.

Concretely, unless the thing has been changed beyond my knowledge, it is
just a matter of bringing the structures you are indicating into the MT
VM Stack, or alternatively, to bring each of those structures in its own
thread-local instance.

But, as I pointed out at the time, that was a limitation, rather than a
feature. If you want to use private variables or thread-local alias in
an xharbour thread you just... can do it. I.e. name the area after the
threadID. OTOH, if you want to share an area across threads in
Xbase++... you just can't.

In other words, MT model in xharbour allows for all the programming
style and techniques you may have in XBase++, while the reverse doesn't
hold. Whenever this happens, I call it a limitation, not a feature.

It can be argued that this limitation allows some low-level
optimizations. In example, tread-local DB areas doesn't require implicit
interlocking; while a non-contended lock has nearly zero cost, it's
always more than no lock. But this is another question; it's performance
vs. flexibility. So, if you want to discuss about THAT topic, there can
be some ground, otherwise you're exchanging a limitation for a feature.

Giancarlo.

*****************************************************

As I am not the right person to reply to this message technically,
if someone can point out the differences in better perspective...

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/MT-Modal---Harbour-vs-xHarbour-tp19582273p19582273.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Fri Sep 19 23:37:23 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 19 23:37:50 2008
Subject: [Harbour] 2008-09-20 05:37 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080920033723.GA25574@34-mo7-2.acn.waw.pl>

2008-09-20 05:37 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/common.mak
  * harbour/source/rdd/Makefile
    ! restored dbdetach.* in makefiles

  + harbour/source/rdd/dbdetach.c
    + added file I forgot to add in previous commit

  * harbour/source/vm/thread.c
    + added support for using function name as string in HB_THREADSTART()
    + added support for thread attributes. They will be used in the future.

best regards
Przemek
From bedipritpal at hotmail.com  Fri Sep 19 23:40:46 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Sep 19 23:40:52 2008
Subject: [Harbour] MT Modal - Harbour vs xHarbour
In-Reply-To: <19582273.post@talk.nabble.com>
References: <19582273.post@talk.nabble.com>
Message-ID: <19582379.post@talk.nabble.com>


Yet another post from Jimmy, an Xbase++ developer:


hi,

> :-) Which means that you cannot work on the same area from different
> threads.

you can use Xbase++ ZeroSpace() to switch Workspace if you want ...

> Concretely, unless the thing has been changed beyond my knowledge, it is
> just a matter of bringing the structures you are indicating into the MT
> VM Stack, or alternatively, to bring each of those structures in its own
> thread-local instance.

im not a C Programmer and not a spezialist for VM Stack but i think
there are more things possible.


... what happend if you use different Threads and call external DLL
where you have to use Stacks and Pointer ?


> But, as I pointed out at the time, that was a limitation, rather than a
> feature. If you want to use private variables or thread-local alias in
> an xharbour thread you just... can do it. I.e. name the area after the
> threadID. OTOH, if you want to share an area across threads in
> Xbase++... you just can't.
>
> In other words, MT model in xharbour allows for all the programming
> style and techniques you may have in XBase++, while the reverse doesn't
> hold. Whenever this happens, I call it a limitation, not a feature.

i do not know how MT model in xharbour work, but we had that Discussion
in Xbase++ long time ago. You might call it a limitation but i do not feel
limited by Xbase++ MT when i have the Security that they are realy
Thread - "Safe"

i can not see a sense to work from 2 Thread to same WorkspaceArea
on same DBF ... what happen if 1 Thread fail (and Record ist locked) ?

same with PUBLIC and PRIVATE, which you can accsess from each
Thread in Xbase++ ... but did you "modify" those Memvar at runtime ?

i do not know how MT model in xharbour "talk" between Thread ?
how to "signal" others Threads ?
how to send Events to other Thread ?
how to access Class Var from other Threads ?

and last but not least : what about DualCore with 4 or more CPU ?

... can i run a Thread per CPU ? ( can not with Xbase++,  but in
Terminal Server Mode you can start a new Session using "next" CPU )

> It can be argued that this limitation allows some low-level
> optimizations. In example, tread-local DB areas doesn't require implicit
> interlocking; while a non-contended lock has nearly zero cost, it's
> always more than no lock. But this is another question; it's performance
> vs. flexibility. So, if you want to discuss about THAT topic, there can
> be some ground, otherwise you're exchanging a limitation for a feature.

i agree that Xbase+ seem to open new connection in each WorkspaceArea().
it woud be nice to have a "build-in" Cache to "mirror" next Connection as
"vitural" DBF :)

greetings by OHR
Jimmy 


-- 
View this message in context: http://www.nabble.com/MT-Modal---Harbour-vs-xHarbour-tp19582273p19582379.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Fri Sep 19 23:41:37 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Sep 19 23:41:44 2008
Subject: [Harbour] MT Modal - Harbour vs xHarbour
In-Reply-To: <19582379.post@talk.nabble.com>
References: <19582273.post@talk.nabble.com> <19582379.post@talk.nabble.com>
Message-ID: <19582385.post@talk.nabble.com>


And this is my reply to the previous post:


Jimmy

>> :-) Which means that you cannot work on the same area from different
>> threads.
>
> you can use Xbase++ ZeroSpace() to switch Workspace if you want ...

Absolutely right. Today Przemek has committed exactly same behaviour as of
Xbase++

****************************
2008-09-20 00:42 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  + harbour/source/rdd/wadetach.c
    + added .prg functions:
         hb_waDetach( [<nWorkArea>|<cAlias>], [<xCargo>] ) -> <lSuccess>
         hb_waRequest( [<cAlias>], [<lFreeArea>], [<@xCargo>], [<lWait>] )
            -> <lSuccess>
      The first one detach workarea from current thread and move it
      to special hidden holder. Before detaching all relations (parent
      and child) to detached workarea are cleared.
      The second one restores area from the holder and attach it
      to calling thread.
    + added xBase++ compatible functions DbRelease() / DbRequest()
      xBase++ users please test. If possible please also check what xBase++
      does with relations and active RLOCKs/FLOCK on released WA.
****************************

 > ... what happend if you use different Threads and call external DLL
> where you have to use Stacks and Pointer ?
>

This is interesting point. I will forward it to Harbour NG.

> i do not know how MT model in xharbour work, but we had that Discussion
> in Xbase++ long time ago. You might call it a limitation but i do not feel
> limited by Xbase++ MT when i have the Security that they are realy
> Thread - "Safe"
>

Exactly my view point. MT looses all its glory if it is not self contained.

> i can not see a sense to work from 2 Thread to same WorkspaceArea
> on same DBF ... what happen if 1 Thread fail (and Record ist locked) ?
>

I confirm.

> same with PUBLIC and PRIVATE, which you can accsess from each
> Thread in Xbase++ ... but did you "modify" those Memvar at runtime ?

[Harbour] Even STATICS can be declared thread safe with keyword
THREAD STATIC. This feature is not available in Xbase++ also, correct
me if I am wrong because I left development on Xbase++ long back.

> i do not know how MT model in xharbour "talk" between Thread ?
> how to "signal" others Threads ?
> how to send Events to other Thread ?
> how to access Class Var from other Threads ?

[Harbour] Developers are discussing these points and lower level functions 
are in place.
Probably within next week or so, they will come up with Xbase++ compatible
Singnal() objects.

> and last but not least : what about DualCore with 4 or more CPU ?

[Harbour] Supports it.

> i agree that Xbase+ seem to open new connection in each WorkspaceArea().
> it woud be nice to have a "build-in" Cache to "mirror" next Connection as
> "vitural" DBF :)

[Harbour] Przemek has shown intererst in this area as he refers it as 
"Cloning"
the WAs. I hope it will be in place soon.

Regards
Pritpal Bedi 


-- 
View this message in context: http://www.nabble.com/MT-Modal---Harbour-vs-xHarbour-tp19582273p19582385.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From capelsoft at terra.es  Sat Sep 20 05:38:08 2008
From: capelsoft at terra.es (=?utf-8?Q?Jos=C3=A9_Luis_Capel_-?=)
Date: Sat Sep 20 05:38:17 2008
Subject: [Harbour] Wince - Evc4 and GPF
References: <20080916185935.GA19252@34-mo7-2.acn.waw.pl><004901c91830$f06f90b0$bb001aac@AGSoft.local>
	<20080916200020.GA10466@34-mo7-2.acn.waw.pl>
Message-ID: <8C1532C5C96B4D9E8263B2F6445901DE@pepeluis>

Hi Przemek,

>
> It can be hardware/OS dependent so on one machine it may terminate
> program but on some other other not. There is many different WinCE
> versions, ARM processors and other devices used in mobile devices.
> Anyhow Harbour core code should not GPF. If it does then it should
> be fixed. What problem have you found?
>

I haven't found any problem related to harbour.  I just pointed out that any 
Gpf caused by, for example, my application (due to a programming error) will 
not be trapped by Harbour system.

> BTW if it really GPFs (Genral Protection Fault) and it's not other
> error then your device has memory protection. In you previous posts
> you tried to assign 0x00000000 and 0xFFFFFFFF - maybe these addresses
> belongs to process. In such case try different.

It was just an example....

> And how you detected that they not generate exception? Maybe in
> your device producer uses some exception handler which simply
> causes that exceptions are ignored. Quite often practice to hide
> bugs in pure quality software. Maybe it's possible to change default
> exception handler to your own which will call hb_errInternal() or
> simply: exit( EXIT_FAILURE );. In source/vm/extrap.c
> SetUnhandledExceptionFilter() is disabled for WinCE builds because
> it was missing in some testing WinCE environments but maybe the
> one you are using supports it. If yes then please send us information
> about exact environment so we can enable it for such builds.
> You can also try to cange the return value in exception filter from
> EXCEPTION_CONTINUE_SEARCH to EXCEPTION_EXECUTE_HANDLER.
> Maybe it's possible in your environment to overload default exception
> handler by adding your own UnhandledExceptionFilter() function to the
> application code. You can try.

I tried some ways... One of them was explained in one of my previous posts. 
I show again:

hbwmain.c

...
...
#if defined( HB_WINCE )
   HB_TCHAR_FREE( pFree );
#endif

#if defined( HB_VM_STARTUP )
   hb_winmainArgInit( hInstance, hPrevInstance, iCmdShow );
   hb_cmdargInit( s_argc, s_argv );

//-- change
#if defined( HB_WINCE )
__try {
#endif
// -- change

   hb_vmInit( TRUE );
   iErrorCode = hb_vmQuit();

// -- change
#if defined( HB_WINCE )
    } __except(EXCEPTION_EXECUTE_HANDLER)
    {
    MessageBox(NULL,TEXT("Some GPF caugth!!"),TEXT("Test"), MB_OK);
    }
#endif
// -- change
...
...

I wanted to trap any exection thrown in hb_vmInit or hb_vmQuit().  In my 
tests I could not see MessageBox.  I would like somebody else who has 
experience in Evc4 could give me ideas.  I'll appreciate a lot.

> Anyhow valid Harbour application should not generate exceptions so
> all of the above is for some rather abnormal situations.
>

Yes... sure that a valid Harbour application should not generate exceptions. 
But in my case I have it ! :-)

>> JLC>If there is no hardware support then you will not make it
>> JLC>in such way. You can only try to generate it explicitly by
>> JLC>_throw_ if used C compilers supports it.
>> How ?  An example can help me a lot.
>
> check in google: try catch throw
> and the 1-st link will point to MSDN documentation.
>

Thanks!  I found something related to set_terminate() function.  Seems that 
Evc4 (in C mode) has not it implemented (or I am not able to implement it). 
So... any help is really apreciate.

Thanks and regards.
Jos? Luis Capel

From capelsoft at terra.es  Sat Sep 20 06:29:48 2008
From: capelsoft at terra.es (=?utf-8?Q?Jos=C3=A9_Luis_Capel_-?=)
Date: Sat Sep 20 06:29:55 2008
Subject: [Harbour] Make_gnu and Mingw 
References: <20080916185935.GA19252@34-mo7-2.acn.waw.pl><004901c91830$f06f90b0$bb001aac@AGSoft.local><20080916200020.GA10466@34-mo7-2.acn.waw.pl>
	<8C1532C5C96B4D9E8263B2F6445901DE@pepeluis>
Message-ID: <FBDC288E86804829B14A98B130479760@pepeluis>

Hi,

I build latest cvs harbour for mingw (win32) using these sets:


SET LIB=\programacion\mingw\lib
SET INCLUDE=\programacion\mingw\include
SET PATH=\programacion\mingw\bin;%PATH%

SET HB_GT_LIB=gtgui
SET HB_GT_DEFAULT=gui
SET CLIBFLAGS=-DHB_OS_WIN_32
SET HB_MAKE_PROGRAM=\programacion\mingw\bin\mingw32-make.exe


It works perfectly.  I have just some basicals questions.

Is HB_MAKE_PROGRAM still used ?? Seemed that this set are not used since 
'make' is called instead of mingw32.make (which is the name of mingw make 
for windows).

The second question is about generated harbour.exe It is located at 
\harbour\source\main\w32\mingw... Why?

Thanks for your help.
Regards,
Jos? Luis Capel 

From dmacias at mail.udg.mx  Sat Sep 20 06:43:35 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sat Sep 20 06:43:35 2008
Subject: [Harbour] Re: 2008-09-19 22:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48D4D3D7.4020505@mail.udg.mx>

Przemek:

>2008-09-19 22:27 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbthread.h
>  * harbour/source/vm/thread.c
>    * unlock HVM stack during thread join operation
>    * added workaround for DosWaitThread() which seems to fail if thread
>      terminated before
>    ; added TOFIX note for OS2 and join code

For mttest05:

1 fresh Harbour
1 build Harbour
150 runs with
  - 10 rebuilt
  -  3 reboots

result:
0 errors

------------------------
[E:\harbour809mt\harbour\tests\mt]mttest05

Harbour 1.1.0dev (Rev. 9452)
Starting threads: <1><2><3><4><5>
Waiting for threads...
Threads joined
Sum of results:    5000500
      should be:    5000500 OK
------------------------

David Macias



From mbelgrano at deltain.it  Sat Sep 20 06:58:11 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Sep 20 06:58:19 2008
Subject: [Harbour] Unresolved External with BCC582
In-Reply-To: <48D447C4.8070708@gmail.com>
References: <48d3ed63.1c365e0a.73ff.ffff8ac1SMTPIN_ADDED@mx.google.com>
	<48D447C4.8070708@gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFC0@SRV02.deltain.net>

Build Harbour without HB_BUILD_ST macro. set HB_BUILD_ST=no
You will find two version of Harbour VM library: hbvm.lib and
hbvmmt.lib.
Use first version to link single thread application and second one with
cw32mt to create MT program.


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Mario H.
Sabado
Sent: Saturday, September 20, 2008 2:46 AM
To: harbour@harbour-project.org
Subject: RE: [Harbour] Unresolved External with BCC582

> Message: 4
> Date: Fri, 19 Sep 2008 19:06:21 +0200
> From: "Massimo Belgrano" <mbelgrano@deltain.it>
> Subject: RE: [Harbour] Unresolved External with BCC582
> To: "Harbour Project Main Developer List."
> 	<harbour@harbour-project.org>
> Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFBA@SRV02.deltain.net>
> Content-Type: text/plain;	charset="US-ASCII"
>
> You have to link your application. with cw32mt.lib instead of cw32.lib
> and with hbvmmt.lib instead of hbvm.li
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org
> [mailto:harbour-bounces@harbour-project.org] On Behalf Of Mario H.
> Sabado
> Sent: Friday, September 19, 2008 1:47 AM
> To: harbour@harbour-project.org
> Subject: [Harbour] Unresolved External with BCC582
>
> Hi,
>
> I have encountered below error when compiling my application from
latest
>
> SVN.  I'm using BCC582 and xMate.
>
> Unresolved external '__beginthreadex' reference from
> ..\LIB\HBVM.LIB|thread
> Unresolved external '__endthreadex' reference from
> ..\LIB\HBVM.LIB|thread
>
> Thanks for any help.
>
> Regards,
> Mario
Massimo,  sorry for my ignorance but what switch do I need to build
HBVMMT.LIB?  I can't find it in current build.

Thanks and best regards,
Mario

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From xharbour at telkom.net.id  Sat Sep 20 09:18:56 2008
From: xharbour at telkom.net.id (Andi Jahja)
Date: Sat Sep 20 09:19:19 2008
Subject: [Harbour] MT Modal - Harbour vs xHarbour
In-Reply-To: <19582385.post@talk.nabble.com>
References: <19582379.post@talk.nabble.com> <19582385.post@talk.nabble.com>
Message-ID: <20080920201816.38C3.422BA498@telkom.net.id>

And this is the reply from xHarbour expert:

Pritpal Bedi ha scritto:
> Jimmy
> 
>>> :-) Which means that you cannot work on the same area from different
>>> threads.
>> you can use Xbase++ ZeroSpace() to switch Workspace if you want ...

I cannot see any relation with the problem at stake.

> 
> Absolutely right. Today Przemek has committed exactly same behaviour as of
> Xbase++
> 
> ****************************
> 2008-09-20 00:42 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   + harbour/source/rdd/wadetach.c
>     + added .prg functions:
>          hb_waDetach( [<nWorkArea>|<cAlias>], [<xCargo>] ) -> <lSuccess>
>          hb_waRequest( [<cAlias>], [<lFreeArea>], [<@xCargo>], [<lWait>] )
>             -> <lSuccess>
>       The first one detach workarea from current thread and move it
>       to special hidden holder. Before detaching all relations (parent
>       and child) to detached workarea are cleared.
>       The second one restores area from the holder and attach it
>       to calling thread.
>     + added xBase++ compatible functions DbRelease() / DbRequest()
>       xBase++ users please test. If possible please also check what xBase++
>       does with relations and active RLOCKs/FLOCK on released WA.
> ****************************
> 

This has nothing to do with MT...

>  > ... what happend if you use different Threads and call external DLL
>> where you have to use Stacks and Pointer ?
>>
> 
> This is interesting point. I will forward it to Harbour NG.
> 

Ehm... are you really sure you know what you're talking about?

The stack pointer in Xharbour is held in thread-local-stack; this means
that a DLL can transparently receive anything it needs to have about the
local execution context at 0 cost.

>> i do not know how MT model in xharbour work, but we had that Discussion
>> in Xbase++ long time ago. You might call it a limitation but i do not feel
>> limited by Xbase++ MT when i have the Security that they are realy
>> Thread - "Safe"
>>
> 
> Exactly my view point. MT looses all its glory if it is not self contained.

... MT has not to be glory. It has to be useful. Usefulness lies in the
possible pattern usage. Reducing possible pattern usage reduces usefulness.

Also, thread safety has nothing to do with the hard limits you impose on
the developers... as the Java language learned the hard way, loosing
market shares against .NET and having to rewrite the vast majority of
multi-threading related stuff in 1.5 and 1.6 machines.

> 
>> i can not see a sense to work from 2 Thread to same WorkspaceArea
>> on same DBF ... what happen if 1 Thread fail (and Record ist locked) ?
>>
> 
> I confirm.

The fact that you cannot see a solution doesn't mean another developer
has your same limited views.

What happens if a thread fails and you have a mutex still locked? ---
will private variables not being shared across threads save your
application? -- of course, no.

Thread safety has nothing to do with what you are forbidden to do. You
can do pretty thread unsafe programs even with the most protective
language, and the other way around, you can do pretty thread safe
programs even with the most relaxed MT paradigms.

However, if you want to see the sense, a thread may be in charge of a
seek, leaving the record pointer in a position and signaling another
thread that would be in charge to process the found record. As
mass-storage operations and memory-CPU intensive calculus have different
operational speeds, this makes lots of sense. (Even if there are other
ways to do that, as i.e. passing the record number around, it doesn't
mean this solution isn't "right" as the others).

> 
>> same with PUBLIC and PRIVATE, which you can accsess from each
>> Thread in Xbase++ ... but did you "modify" those Memvar at runtime ?
> 
> [Harbour] Even STATICS can be declared thread safe with keyword
> THREAD STATIC. This feature is not available in Xbase++ also, correct
> me if I am wrong because I left development on Xbase++ long back.
> 

The fact that there is a keyword to do such things hasn't any relation
with the basic model. In example, xharobour may have THREAD LOCAL
PUBLIC/PRIVATE/AREA declared in someway.

Oh.

Actually it has.

Just don't use them from other threads! (wasn't that hard, was it?)

Seriously; thread local statics are a good idea, as they are explicitly
meant to have different value bound to the same symbol in different
threads. It's a thing you want to have in a language. You can add it to
XHarbour with a couple of changes in the grammar file and some small
changes in VM stack; it's probably 30 minutes work.


>> i do not know how MT model in xharbour "talk" between Thread ?
>> how to "signal" others Threads ?
>> how to send Events to other Thread ?
>> how to access Class Var from other Threads ?
> 

.... I don't get your point. Isn't reading the manual enough to understand?

> [Harbour] Developers are discussing these points and lower level functions 
> are in place.
> Probably within next week or so, they will come up with Xbase++ compatible
> Singnal() objects.
> 
>> and last but not least : what about DualCore with 4 or more CPU ?
> 
> [Harbour] Supports it.

You're talking nonsense. There is no (real) MT without multiple CPUs/cores.

I would suggest you to get a book on multithreading in general before
arguing on the topic. This is a good start:

http://www.amazon.com/Art-Multiprocessor-Programming-Maurice-Herlihy/dp/0123705916/ref=pd_bbs_1?ie=UTF8&s=books&qid=1221898149&sr=8-1

Said all this, if a standard is getting established, it may be sensed to
follow it WITHOUT imposing any limitation.

In example, areas and variables may be made thread-local by default,
while the keyword SHARED in declaration would make them publically
visible to all threads. In this way, MT programs written in
XBase++/Harbour would be immediately portable to XHarbour, which would
still provide the feature of having shared variables, and areas, across
threads.

Giancarlo.


P.S. There IS ground in arguing that an established standard should be
followed OR that one method may lead to provide more performance at VM
level than the other; so, there IS ground in suggesting that XHarbour
should be like XBase++ in this aspect. Just none of your contribute to
this discussion was in that direction; they're plainly nonsense.

On Fri, 19 Sep 2008 20:41:37 -0700 (PDT)
Pritpal Bedi <bedipritpal@hotmail.com> wrote:

> Message-ID: <19582385.post@talk.nabble.com>
> 
> 
> And this is my reply to the previous post:
> 
> 
> Jimmy
> 
> >> :-) Which means that you cannot work on the same area from different
> >> threads.
> >
> > you can use Xbase++ ZeroSpace() to switch Workspace if you want ...
> 
> Absolutely right. Today Przemek has committed exactly same behaviour as of
> Xbase++
> 
> ****************************
> 2008-09-20 00:42 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   + harbour/source/rdd/wadetach.c
>     + added .prg functions:
>          hb_waDetach( [<nWorkArea>|<cAlias>], [<xCargo>] ) -> <lSuccess>
>          hb_waRequest( [<cAlias>], [<lFreeArea>], [<@xCargo>], [<lWait>] )
>             -> <lSuccess>
>       The first one detach workarea from current thread and move it
>       to special hidden holder. Before detaching all relations (parent
>       and child) to detached workarea are cleared.
>       The second one restores area from the holder and attach it
>       to calling thread.
>     + added xBase++ compatible functions DbRelease() / DbRequest()
>       xBase++ users please test. If possible please also check what xBase++
>       does with relations and active RLOCKs/FLOCK on released WA.
> ****************************
> 
>  > ... what happend if you use different Threads and call external DLL
> > where you have to use Stacks and Pointer ?
> >
> 
> This is interesting point. I will forward it to Harbour NG.
> 
> > i do not know how MT model in xharbour work, but we had that Discussion
> > in Xbase++ long time ago. You might call it a limitation but i do not feel
> > limited by Xbase++ MT when i have the Security that they are realy
> > Thread - "Safe"
> >
> 
> Exactly my view point. MT looses all its glory if it is not self contained.
> 
> > i can not see a sense to work from 2 Thread to same WorkspaceArea
> > on same DBF ... what happen if 1 Thread fail (and Record ist locked) ?
> >
> 
> I confirm.
> 
> > same with PUBLIC and PRIVATE, which you can accsess from each
> > Thread in Xbase++ ... but did you "modify" those Memvar at runtime ?
> 
> [Harbour] Even STATICS can be declared thread safe with keyword
> THREAD STATIC. This feature is not available in Xbase++ also, correct
> me if I am wrong because I left development on Xbase++ long back.
> 
> > i do not know how MT model in xharbour "talk" between Thread ?
> > how to "signal" others Threads ?
> > how to send Events to other Thread ?
> > how to access Class Var from other Threads ?
> 
> [Harbour] Developers are discussing these points and lower level functions 
> are in place.
> Probably within next week or so, they will come up with Xbase++ compatible
> Singnal() objects.
> 
> > and last but not least : what about DualCore with 4 or more CPU ?
> 
> [Harbour] Supports it.
> 
> > i agree that Xbase+ seem to open new connection in each WorkspaceArea().
> > it woud be nice to have a "build-in" Cache to "mirror" next Connection as
> > "vitural" DBF :)
> 
> [Harbour] Przemek has shown intererst in this area as he refers it as 
> "Cloning"
> the WAs. I hope it will be in place soon.
> 
> Regards
> Pritpal Bedi 
> 
> 
> -- 
> View this message in context: http://www.nabble.com/MT-Modal---Harbour-vs-xHarbour-tp19582273p19582385.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour


From mbelgrano at deltain.it  Sat Sep 20 07:24:21 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Sep 20 12:00:59 2008
Subject: [Harbour] what is changed from clipper.lib and extend.lib in
	library structure
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFC1@SRV02.deltain.net>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 3559 bytes
Desc: image001.gif
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080920/5d43d050/attachment-0001.gif
From toninhofwi at yahoo.com.br  Sat Sep 20 13:40:03 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sat Sep 20 13:33:36 2008
Subject: [Harbour] Time wrong in Harbour.exe /build vs hb_buildDate()
In-Reply-To: <pav5d49hfdmkfmipaotf8lq5j7qpk3pe3e@4ax.com>
References: <pav5d49hfdmkfmipaotf8lq5j7qpk3pe3e@4ax.com>
Message-ID: <69dad41fujg7qgian513gg3re93u8hi729@4ax.com>

>My latest Harbour.exe /build display time 1 second  more than
>hb_buildDate()
>
>harbour.exe /build = 21:24:09
>hb_buildDate() = 21:24:08

Now is fixed, thanks.

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opção para você! 
Experimente já e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From mbelgrano at deltain.it  Sun Sep 21 09:04:44 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Sep 21 09:05:08 2008
Subject: [Harbour] Tagged: Harbour 1.0.1 (r9429)
In-Reply-To: <48D298A2.7080708@fsgiudice.com>
References: <ADC4A068-C546-4A65-938F-503CD3F36752@syenar.hu>
	<48D298A2.7080708@fsgiudice.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFC3@SRV02.deltain.net>

And today the in Overall Rank is at position 160!

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Francesco Saverio Giudice
Sent: Thursday, September 18, 2008 8:06 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Tagged: Harbour 1.0.1 (r9429)

Hi Viktor,


Szak?ts Viktor ha scritto:
> Hi all,
> 
> I've tagged Harbour release 1.0.1 (r9429).
> I'll upload sources and some binaries soon.
> 
Excellent job!

FYI, today sf.net reports Harbour in Overall Rank at position 172 and at 
10th under Database category.

http://sourceforge.net/project/stats/rank_history.php?group_id=681&ugn=harbour-project
http://sourceforge.net/softwaremap/trove_list.php?form_cat=66

Very good, my compliments to you, Przemek and all.

Best Regards

Francesco



_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From myorg63 at mail.ru  Sun Sep 21 09:56:41 2008
From: myorg63 at mail.ru (Petr Chornyj)
Date: Sun Sep 21 09:56:47 2008
Subject: [Harbour] harbour 1.1 ( ChangeLog 9453 2008-09-20 03:37:41Z druzus
	) + bcc (551 or 582).
Message-ID: <19594721.post@talk.nabble.com>


/*
 =====================================================  
*/

#include "common.ch"

FUNCTION _AppMain( ... )
	//
	IF ! CheckCfg( "test.ini" )
		RETURN -1
	ENDIF
	? "Ok"

RETURN 0
/*
 =====================================================  
*/
FUNCTION CheckCfg( cIniFile )
LOCAL hIni, hMain, nIndex := 0
PUBLIC bf, mf, hf 
	//
	hIni := HB_IniRead( cIniFile )
	IF Empty( hIni )
		? "Error: missing or wrong " + cIniFile
		RETURN FALSE
	ENDIF
	
	nIndex := hb_HScan( hIni, {|cKey| cKey == "MAIN" } )
	IF nIndex == 0
		? "Error: missing MAIN section in " + cIniFile
		RETURN FALSE
	ENDIF

        hMain := hb_HValueAt( hIni, nIndex )

	? Empty( hMain )
        ? ( ! hb_IsHash( hMain ) )

	IF Empty( hMain ) .OR. ( ! hb_IsHash( hMain ) )
		? "Error: wrong MAIN section in " + cIniFile
		RETURN FALSE
	ENDIF
	//
RETURN TRUE

/*
 =====================================================  
*/

# test.ini
[MAIN]
PARAM1=value
PARAM2=value
PARAM3=value
PARAM3=value
# end test.ini
/*
 =====================================================  
*/

With harbour 1.1 ( ChangeLog 9453 2008-09-20 03:37:41Z druzus ) + bcc (551
or 582)
result is

.T.
.F.
Error: wrong MAIN section in test.ini

With harbour 1.1 + msvc 71, pocc 5.0.1, dm 5.51, owatcom 17a;
harbour 1.1 + + bcc551, 582 + harbour-b32.dll;
harbour 1.0. (ChangeLog 9429 2008-09-17 16:07:27Z vszakats)  + bcc551, 582
result is

.F.
.F.
Ok

Regards,
Petr
-- 
View this message in context: http://www.nabble.com/harbour-1.1-%28-ChangeLog-9453-2008-09-20-03%3A37%3A41Z-druzus-%29-%2B-bcc-%28551-or-582%29.-tp19594721p19594721.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Sun Sep 21 10:15:56 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 21 10:16:21 2008
Subject: [Harbour] Re: 2008-09-19 22:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48D4D3D7.4020505@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48D4D3D7.4020505@mail.udg.mx>
Message-ID: <20080921141556.GA12267@34-mo7-2.acn.waw.pl>

On Sat, 20 Sep 2008, David Arturo Macias Corona wrote:

Hi David,

> For mttest05:
> 1 fresh Harbour
> 1 build Harbour
> 150 runs with
>  - 10 rebuilt
>  -  3 reboots
> result:
> 0 errors

Thank you very much for your tests.
Looks that it works correctly anyhow I do not
like the way it is done. I hope that OS2 users
will clean this code in the future.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Sun Sep 21 11:06:30 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Sep 21 11:06:36 2008
Subject: [Harbour] MT "stress" test success
Message-ID: <9257026e0809210806m10fcb0c6q1b14df9b70610e66@mail.gmail.com>

I have a procedure that "upload" a complete set of dbfs to a
Postgresql database.
It's based on a data dictionary that hold tables, sql indexes, sql
scripts and is usually run every night.

The loop is:

for every table
...
use <table>
__dbSql to a text file
if remote
   ftp upload
endif
create the sql script to "import" that text file and create indexes
exec the sql script
...
next
...
exec many sql scripts to sum and create dw tables.

Since with MT copy, ftp, sql steps could be "pipelined" I've tested
this possibility.
I've moved the single table process into a function called using
hb_threadStart and I added an  hb_threadWaitForAll() after the loop to
wait all the uploads before continue.

In this way all the tables ( in the test 80 for 4G of dbfs/cdxs ) have
been processed at the same time ( I used a local database, without the
ftp step ).

Everything worked as expected!

On a single PC this was was more a test of the disk reliability :) but
at the end all the tables were uploaded and all the sql scripts were
executed.

However I've found that even a "small" change like that required a
major change in the code. Not in the function itself but in all that
functions that are called in the middle.
Things like data driven app and "static file wide vars + set/set
functions" may become a problem.

It seems that MT imposes a rethink of many acquired patterns.

Good, time to go back to books :)

best regards,
Lorenzo
From druzus at acn.waw.pl  Sun Sep 21 11:41:58 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 21 11:42:21 2008
Subject: [SPAM]  [Harbour] MT Modal - Harbour vs xHarbour
In-Reply-To: <19582273.post@talk.nabble.com>
References: <19582273.post@talk.nabble.com>
Message-ID: <20080921154158.GB12267@34-mo7-2.acn.waw.pl>

On Fri, 19 Sep 2008, Pritpal Bedi wrote:

Hi Pritpal,

> Here is the message transcript on xHarbour NG:
[...]

xHarbour never had have working MT model. There is nothing
what even can be called MT model in this language. Just few
hacks to create and executes threads but serious problems
in core code was never resolved. In many cases not even touched.
Evan such basic functionality like safe readonly access to
complex variables was implemented few months ago by Walter
and only for MS-Win.
If you look carefully at xHarbour MT code you will find that
from thread startup there are bad race conditions.
Lexer, compiler and macro compiler are full of static variables
and are not MT safe. here at least there is protection: mutex
to block access to macro compiler so only one thread can access
it. It means that xHarbour MT programs which extensively use
macrocompiler are reduced to single CPU speed and they cannot
benefit from multiprocessor machines.
There is not protection for class definition which is kept
in single memory block and when new class is added this block
is resized. Because classes are added dynamically when calls
function is called 1-st time then such situation can happen
in any moment. It means that executing code which uses object
messages is not MT safe be. It can work for some programs but
it may also badly crashes - timed dependent race condtion.
Instead of redesigning memvars code for MT mode the memvars
table was moved to HVM stack as is from MT code. It forces
other things. xHarbour has to use thread local memvars and
there is no option for memvars sharing. But even this was
hacked because code for dynamic symbol table was also used
from ST mode without necessary modification. Instead hacks
where intorduced. In xHarbour MT mode all memvars are accessed
by _name_  not symbols. When thread access asign memvar then
to the mamavr name is added prefix: ":TH:" + <thread_id> + ":"
and such name is scann in dynamic symbol table. It's performance
killer and memory leak because symbol registered in dynamic
symbol tables cannot be removed. Beacuse thread uses cyclic IDs
repeated from 1 to 32000 (BTW also without protection against
non unique values but xHarbour has many such small bugs in MT code)
then in long working MT programs using memvars each used PRIVATE and
PUBLIC variable will be registered 32000 times in dynamic symbol
table. Of course it will not happen because xHarbour will crash.
Just simply the maximum number of dynamic symbols will be reached
earlier. In sumarry you cannot use memvars in real MT xHarbour
programs at all.
But it's not all. In the same table as memvars which was made thread
local are also kept detached local variables which can be accessed
by codeblocks. Such codeblocks can be storred in different places
which will be accessible after thread termination. F.e. in one of
the worst cases they maybe added to one of class definition.
When threads terminates its memvars pool is released by codeblocks
which detached local can be still accessible by other threads and
so when you try to evaluate them or _even_ delete you will have
GPF or other unexpected behavior because freed memory is accessed.
It means that they are corrupted forever and xHarbour will GPF
on HVM exit when will try to free all alocated items.
Result: you cannot use codeblocks with locals in xHarbour MT programs
or at least in very limited way _only_ in thread which created them
and you have to be sure that all their instances will be removed before
threads which created them terminates.
In practice all sets in xHarbour are global to application. It means
that there is not even way to use safely many things in xHarbour
by different threads without bad interactions. F.e. it's not possible
that one thread will operate on WA 1 with SET DELETED ON and second
one on WA 2 with SET DELETED OFF. It's not MT safe to use CODEPAGEs
in WA because for indexing RDDs switching active codepage which is
also global program setting not thread dependent, etc. You can imagine
all other bad interactions. It means that you cannot use many things
safely in xHarbour MT programs. F.e. even operating on different
RDDs is not fully MT safe and you have to be very carefull to not
change any of global settings.
The worka rea in xHarbour are not separated at all. It means that
each thread can access the same workare without _ANY_ protections.
To not GPF user have to create exclusive access to WA yourself.
It means that it have to be protect by user mutex, F.e.:

   static s_wa1mutex

   [...]

   s_wa1mutex := HB_MUTEXCREATE()   // INIT

   [...]

   HB_MUTEXLOCK( s_wa1mutex )       // LOCK WA

   [do sth with WA]

   HB_MUTEXUNLOCK( s_wa1mutex )     // UNLOCK WA

   [...]


It means that in xHarbour WA accessed is reduced to sth what
in xbase++ is called zero zone what is also supported by Harbout.
Just simply instead of using mutex LOCK/UNLOCK you are using
hb_dbDetach() and hb_dbRequest(). F.e. the same code in Harbour
may look like:


   [...]

   hb_dbDetach( "MYTABLE" )         // INIT

   [...]

   hb_waRequest( "MYTABLE" )       // LOCK WA

   [do sth with WA]

   hb_waDetach( "MYTABLE" )         // UNLOCK WA

   [...]

The difference is only in protection. In Harbour and xBase
user cannot corrupt WA by mistake due to missing warkarea lock
because locks are obligatory. In xHarbour they are not obligatory
and user any user mistake will corrupt internal RDD structures
causing unpredictable results, f.e. data lost or curruption.
Farther in xHarbour aliases are global to application so it's
not possible to create two independent threads which will use
aliases with the same name. You have to change your code to
eliminate such situatyions - of course if it's possible. As you
can emaigne sometimes it means that you have to rewrite in practice
whole code which uses aliases.
There are also many other things broken or not implemented in
xHarbour MT mode at all. If you are interesting then you can look
at xHarbour code. Some easy visible you will finde immediately
f.e. s_iBaseLine is static variable in hvm.c global for all
threads - it means that line numbering (PROCLINE()) does not
work correctly in MT programs. hb_vm_iTry is also static variable
used in TRY/CATCH statement. Any functionality related to this
variable does not work correctly in MT programs.
Such things can be easy fixed but if you will dig deeper then you
will find some other much more serious problems. Some of them
I described above. Bu not all f.e. in xHarbour destructors uses
hack in GC which uses s_bCollecting program global variable.
It's not MT safe so xHarbour MT programs cannot use destructors
or they may crash in unexpected places or block HVM/GC deadlocking
the whole application.
In summary if xHarbour developers will want to have really working
MT model then they will have to remove most of existing code and
implement it from scratch. But 1-st they will have to define how
it should work and what are their goals at beginning and cleanup
ST HVM resolving long waiting problems and bugs. Otherwise during
implementation they will find problems which cannot be easy resolved
without changing already written code and they will end with something
like they have now.
Enough, it's not my job to analyze xHarbour problems on on this
list.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Sep 21 11:44:03 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 21 11:44:26 2008
Subject: [SPAM]  Re: [Harbour] MT Modal - Harbour vs xHarbour
In-Reply-To: <20080920201816.38C3.422BA498@telkom.net.id>
References: <19582379.post@talk.nabble.com> <19582385.post@talk.nabble.com>
	<20080920201816.38C3.422BA498@telkom.net.id>
Message-ID: <20080921154403.GC12267@34-mo7-2.acn.waw.pl>

On Sat, 20 Sep 2008, Andi Jahja wrote:

Hi Andi,

> And this is the reply from xHarbour expert:
> > Absolutely right. Today Przemek has committed exactly same behaviour as of
> > Xbase++
> > ****************************
> > 2008-09-20 00:42 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> >   + harbour/source/rdd/wadetach.c
> >     + added .prg functions:
> >          hb_waDetach( [<nWorkArea>|<cAlias>], [<xCargo>] ) -> <lSuccess>
> >          hb_waRequest( [<cAlias>], [<lFreeArea>], [<@xCargo>], [<lWait>] )
> >             -> <lSuccess>
> >       The first one detach workarea from current thread and move it
> >       to special hidden holder. Before detaching all relations (parent
> >       and child) to detached workarea are cleared.
> >       The second one restores area from the holder and attach it
> >       to calling thread.
> >     + added xBase++ compatible functions DbRelease() / DbRequest()
> >       xBase++ users please test. If possible please also check what xBase++
> >       does with relations and active RLOCKs/FLOCK on released WA.
> > ****************************
> This has nothing to do with MT...

The above is enough to not make any other comments.
It will be waste of time.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Sep 21 12:26:13 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 21 12:26:35 2008
Subject: [SPAM]  [Harbour] harbour 1.1 ( ChangeLog 9453 2008-09-20
	03:37:41Z druzus ) + bcc (551 or 582).
In-Reply-To: <19594721.post@talk.nabble.com>
References: <19594721.post@talk.nabble.com>
Message-ID: <20080921162613.GA3185@34-mo7-2.acn.waw.pl>

On Sun, 21 Sep 2008, Petr Chornyj wrote:

It works perfectly for me.

[...]
> FUNCTION CheckCfg( cIniFile )
> LOCAL hIni, hMain, nIndex := 0
> PUBLIC bf, mf, hf 
> 	//
> 	hIni := HB_IniRead( cIniFile )
> 	IF Empty( hIni )
> 		? "Error: missing or wrong " + cIniFile
> 		RETURN FALSE
> 	ENDIF
> 	
> 	nIndex := hb_HScan( hIni, {|cKey| cKey == "MAIN" } )
> 	IF nIndex == 0
> 		? "Error: missing MAIN section in " + cIniFile
> 		RETURN FALSE
> 	ENDIF
> 
>         hMain := hb_HValueAt( hIni, nIndex )
> 
> 	? Empty( hMain )
>         ? ( ! hb_IsHash( hMain ) )
> 
> 	IF Empty( hMain ) .OR. ( ! hb_IsHash( hMain ) )
> 		? "Error: wrong MAIN section in " + cIniFile
> 		RETURN FALSE
> 	ENDIF
[...]
I added to this code also:
      for each v in hMain  // v is new LOCAL var
         ? v:__enumKey(), "=>", v
      next

and it shows:
.F.
.F.
PARAM1 => value
PARAM2 => value
PARAM3 => value
Ok

best regards,
Przemek
From myorg63 at mail.ru  Sun Sep 21 14:16:52 2008
From: myorg63 at mail.ru (Petr Chornyj)
Date: Sun Sep 21 14:16:57 2008
Subject: [Harbour] [SPAM]  harbour 1.1 ( ChangeLog 9453 2008-09-20
	03:37:41Z druzus ) + bcc (551 or 582).
In-Reply-To: <20080921162613.GA3185@34-mo7-2.acn.waw.pl>
References: <19594721.post@talk.nabble.com>
	<20080921162613.GA3185@34-mo7-2.acn.waw.pl>
Message-ID: <19596934.post@talk.nabble.com>



Przemyslaw Czerpak-2 wrote:
> 
> On Sun, 21 Sep 2008, Petr Chornyj wrote:
> 
> It works perfectly for me.
> 
> 

What compiler you use?
I rebuild harbour from scratch with bcc 582 and got again

.T.
.F.
Error: missing MAIN section in test.ini


I try it with msvc 71, OpenWatcom 17a, Digital Mars 8.51, even with bcc582 +
harbour-11-b32.dll 

.F.
.F.
PARAM1 => value
PARAM2 => value 
PARAM3 => value
Ok

I confused..  :confused:
Can anybody (Przemyslaw excepted) confirm/dispove it?

-- 
View this message in context: http://www.nabble.com/harbour-1.1-%28-ChangeLog-9453-2008-09-20-03%3A37%3A41Z-druzus-%29-%2B-bcc-%28551-or-582%29.-tp19594721p19596934.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From toninhofwi at yahoo.com.br  Sun Sep 21 15:00:07 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sun Sep 21 14:53:40 2008
Subject: [Harbour] [SPAM] harbour 1.1 ( ChangeLog 9453 2008-09-20
	03:37:41Z druzus ) + bcc (551 or 582).
In-Reply-To: <19596934.post@talk.nabble.com>
References: <19594721.post@talk.nabble.com>
	<20080921162613.GA3185@34-mo7-2.acn.waw.pl>
	<19596934.post@talk.nabble.com>
Message-ID: <416dd4d92acq1sfqbs1p4i23pf121pki3l@4ax.com>

>Can anybody (Przemyslaw excepted) confirm/dispove it?

Here your code shows:

.T.
.F.
Error: wrong MAIN section in test.ini


BCC 6.10, windows XP,

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opção para você! 
Experimente já e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From mbelgrano at deltain.it  Sun Sep 21 15:21:43 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Sep 21 15:21:56 2008
Subject: [Harbour] [SPAM] harbour 1.1 ( ChangeLog 9453
	2008-09-2003:37:41Z druzus ) + bcc (551 or 582).
In-Reply-To: <416dd4d92acq1sfqbs1p4i23pf121pki3l@4ax.com>
References: <19594721.post@talk.nabble.com><20080921162613.GA3185@34-mo7-2.acn.waw.pl><19596934.post@talk.nabble.com>
	<416dd4d92acq1sfqbs1p4i23pf121pki3l@4ax.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFC5@SRV02.deltain.net>

I recevive
.T.
.F.
Error: wrong MAIN section in test.ini


Harbour Terminal: Windows native console
Harbour 1.1.0dev (Rev. 9453)
Windows Vista 6.0.6001 Service Pack 1
DS avail=954044KB  OS avail=2061944KB  EMM avail=0KB  MemStat:Off  MT:On

Bcc55

Will //INFO display also info of c compiler?

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Toninho@fwi
Sent: Sunday, September 21, 2008 9:00 PM
To: Harbour Project Main Developer List.
Subject: Re: Re: [Harbour] [SPAM] harbour 1.1 ( ChangeLog 9453 2008-09-2003:37:41Z druzus ) + bcc (551 or 582).

>Can anybody (Przemyslaw excepted) confirm/dispove it?

Here your code shows:

.T.
.F.
Error: wrong MAIN section in test.ini


BCC 6.10, windows XP,

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Sun Sep 21 15:26:15 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Sep 21 15:26:26 2008
Subject: [Harbour] MT "stress" test success
In-Reply-To: <9257026e0809210806m10fcb0c6q1b14df9b70610e66@mail.gmail.com>
References: <9257026e0809210806m10fcb0c6q1b14df9b70610e66@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFC6@SRV02.deltain.net>

Interesting 
Can you post same source like a template demo?

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Lorenzo
Fiorini
Sent: Sunday, September 21, 2008 5:07 PM
To: Harbour Project Main Developer List.
Subject: [Harbour] MT "stress" test success

I have a procedure that "upload" a complete set of dbfs to a
Postgresql database.
It's based on a data dictionary that hold tables, sql indexes, sql
scripts and is usually run every night.

The loop is:

for every table
...
use <table>
__dbSql to a text file
if remote
   ftp upload
endif
create the sql script to "import" that text file and create indexes
exec the sql script
...
next
...
exec many sql scripts to sum and create dw tables.

Since with MT copy, ftp, sql steps could be "pipelined" I've tested
this possibility.
I've moved the single table process into a function called using
hb_threadStart and I added an  hb_threadWaitForAll() after the loop to
wait all the uploads before continue.

In this way all the tables ( in the test 80 for 4G of dbfs/cdxs ) have
been processed at the same time ( I used a local database, without the
ftp step ).

Everything worked as expected!

On a single PC this was was more a test of the disk reliability :) but
at the end all the tables were uploaded and all the sql scripts were
executed.

However I've found that even a "small" change like that required a
major change in the code. Not in the function itself but in all that
functions that are called in the middle.
Things like data driven app and "static file wide vars + set/set
functions" may become a problem.

It seems that MT imposes a rethink of many acquired patterns.

Good, time to go back to books :)

best regards,
Lorenzo
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Sun Sep 21 17:04:36 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 21 17:04:59 2008
Subject: [Harbour] 2008-09-21 23:03 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080921210436.GA10656@34-mo7-2.acn.waw.pl>

2008-09-21 23:03 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapi.h
  * harbour/source/vm/arrays.c
    + added hb_arrayGetPtrGC(), hb_arrayGetSymbol(), hb_arraySetSymbol()

  * harbour/include/hbapi.h
  * harbour/source/vm/dynsym.c
    + added hb_dynsymProtectEval(). Works like hb_dynsymEval() but
      keeps dynamic symbol table locked during whole execution.
      It's faster then hb_dynsymEval() but user function may not
      access dynamic symbol tbale to not cause recursive locks
    + added protection against possible dynamic symbol table resizing
      during hb_dynsymEval() by other threads.

  * harbour/include/hbapi.h
  * harbour/source/vm/memvars.c
    + added hb_memvarSaveInArray( int iScope, BOOL fCopy ) and
      hb_memvarRestoreFromArray( PHB_ITEM pArray )
    % use hb_dynsymProtectEval() in places where it's safe

  * harbour/include/Makefile
  + harbour/include/hbthread.ch
    + added header file with thread constant definitions:
         HB_THREAD_INHERIT_PUBLIC
         HB_THREAD_INHERIT_PRIVATE
         HB_THREAD_INHERIT_MEMVARS
         HB_THREAD_MEMVARS_COPY

  * harbour/include/hbthread.h
  * harbour/source/vm/hvm.c
  * harbour/source/vm/thread.c
    + added support for inheriting visible memvars from current
      thread when new thread is created. Memvars in child thread
      can be shared with parrent or they can be copied. See HB_THREAD_*
      attributes defined in hbthread.ch, f.e.:
         hb_threadStart( HB_THREAD_INHERIT_PUBLIC, @thFunc() )
      or:
         hb_threadStart( HB_BITOR( HB_THREAD_INHERIT_MEMVARS + ;
                                   HB_THREAD_MEMVARS_COPY ), ;
                          @thFunc() )
      Please note that when child thread creates new PUBLIC variable
      which didn't existed when thread was started then it's visible
      only for this thread and optionally for its child threads but
      not for parent thread.
      Please also remember that write access to shared memvars have
      to be protected by users.

  + harbour/tests/mt/mttest08.prg
    + added test code for thread memvars inheritance

best regards
Przemek
From druzus at acn.waw.pl  Sun Sep 21 17:35:01 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 21 17:35:23 2008
Subject: [Harbour] MT "stress" test success
In-Reply-To: <9257026e0809210806m10fcb0c6q1b14df9b70610e66@mail.gmail.com>
References: <9257026e0809210806m10fcb0c6q1b14df9b70610e66@mail.gmail.com>
Message-ID: <20080921213501.GA29160@34-mo7-2.acn.waw.pl>

On Sun, 21 Sep 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> However I've found that even a "small" change like that required a
> major change in the code. Not in the function itself but in all that
> functions that are called in the middle.
> Things like data driven app and "static file wide vars + set/set
> functions" may become a problem.

Please remember that Harbour supports

   THREAD STATIC <var> [ := <init> ]

which are local to thread - each thread uses it's own copy
of such static variable initialized to <init>.
In many cases it's enough to use them instead of normal static
variables though it depends on program context.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Sep 21 17:50:42 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 21 17:51:04 2008
Subject: [SPAM]  Re: [Harbour] [SPAM]  harbour 1.1 ( ChangeLog 9453
	2008-09-20 03:37:41Z druzus ) + bcc (551 or 582).
In-Reply-To: <19596934.post@talk.nabble.com>
References: <19594721.post@talk.nabble.com>
	<20080921162613.GA3185@34-mo7-2.acn.waw.pl>
	<19596934.post@talk.nabble.com>
Message-ID: <20080921215042.GB29160@34-mo7-2.acn.waw.pl>

On Sun, 21 Sep 2008, Petr Chornyj wrote:

Hi Peter,

> What compiler you use?
> I rebuild harbour from scratch with bcc 582 and got again
> .T.
> .F.
> Error: missing MAIN section in test.ini
> 
> I try it with msvc 71, OpenWatcom 17a, Digital Mars 8.51, even with bcc582 +
> harbour-11-b32.dll 
> .F.
> .F.
> PARAM1 => value
> PARAM2 => value 
> PARAM3 => value
> Ok

Very strange results. I do not know anything about compiler
dependent code in this example.
It's possible that it's a bug exploited only in some BCC
builds. Can you check the results of code below with CodeGuard
BCC builds?
BTW does it work with 1.0.1 BCC builds?

PROC MAIN()
   LOCAL cIniFile, hIni, v

   cIniFile := "test.ini"
   hIni := HB_IniRead( cIniFile )
   IF Empty( hIni )
      ? "Error: missing or wrong " + cIniFile
   ELSEIF ! "MAIN" $ hIni
      ? "Error: missing MAIN section in " + cIniFile
   ELSE
      FOR EACH v IN hIni[ "MAIN" ]
         ? v:__enumKey(), "=>", v
      NEXT
   ENDIF
RETURN

best regards,
Przemek
From druzus at acn.waw.pl  Sun Sep 21 18:04:26 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 21 18:04:48 2008
Subject: [SPAM]  Re: [Harbour] [SPAM]  harbour 1.1 ( ChangeLog 9453
	2008-09-20 03:37:41Z druzus ) + bcc (551 or 582).
In-Reply-To: <20080921215042.GB29160@34-mo7-2.acn.waw.pl>
References: <19594721.post@talk.nabble.com>
	<20080921162613.GA3185@34-mo7-2.acn.waw.pl>
	<19596934.post@talk.nabble.com>
	<20080921215042.GB29160@34-mo7-2.acn.waw.pl>
Message-ID: <20080921220426.GC29160@34-mo7-2.acn.waw.pl>

On Sun, 21 Sep 2008, Przemyslaw Czerpak wrote:

Hi Peter,

> Very strange results. I do not know anything about compiler
> dependent code in this example.

I think that I know what could be a problem:
regular expressions library.
BCC uses its own copy of very old PCRE library to emulate
POSIX regex. Just simply this library is used during linking
instead of HBPCRE and code which uses regular expressions
fails. It also explains why it works with harbour.dll which
is linked correctly with HBPCRE in Harbour build make files.
Please add HBPCRE to linked library list and it should begin
to work.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Sep 21 19:14:24 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 21 19:14:46 2008
Subject: [Harbour] A few questions about MT
In-Reply-To: <A1E8AD22-84C4-4717-9C48-26E0664DA207@syenar.hu>
References: <48D2698D.80206@dbtopas.lt>
	<20080918165307.GA15124@34-mo7-2.acn.waw.pl>
	<A1E8AD22-84C4-4717-9C48-26E0664DA207@syenar.hu>
Message-ID: <20080921231424.GA18618@34-mo7-2.acn.waw.pl>

On Thu, 18 Sep 2008, Szak?ts Viktor wrote:

Hi all,

> For now, I'd personally vote to make PUBLICs visible for
> all threads (otherwise most apps would need to be rewritten
> in this respect I guess), and PRIVATEs to the threads that
> define them. 'THREAD PUBLIC' could be introduced to create
> PUBLICs visible only for the current thread if someone
> needs such thing. It would be analogous to THREAD STATIC.

I thought about it and I think that making PUBLIC common for
all threads may force code rewriting.
Now we have full thread encapsulation so you can take ST
code which uses memvars and use it in MT programs without
modifications. If we make PUBLIC common for all threads
then it will be necessary to make like THREAD PUBLIC or
add synchronization code. It will be also necessary to
change memvars symbol table and keep separate pointers
for private and public variables.
Now I decided to add thread attributes which allows to
control what will happen with existing memvars when new
thread is created so it's possible that child thread will
have copy of all existing PUBLIC and/or PRIVATE variables
or making them common (shared) with parent thread.
It allows to reach nearly the same effect as in xBase++.
It's enough to create new thread with HB_THREAD_INHERIT_PUBLIC
attribute. There is only one difference. When thread creates
new PUBLIC variable which wasn't existing when thread was created
then this variable is created only for this thread. As I said above
For strict xbase++ compatibility we will need to divide memvars
handles to store PUBLIC and PRIVATE ones separately. If users will
vote for such solution then I'll add it too. In such case we
probably should also add support fot THREAD PUBLIC variables.
Now let's return to GLOBALs. GLOBALs are application wide STATIC
variables. If we do not want to add them then we should add support
for automatic PUBLIC declaration and initialization with the same
conditions as STATIC initialization. This will cover the necessary
functionality. We can make it in two ways:
1. use existing syntax and only allow to declare PUBLIC out of
   function body just like file wide statics. The bad effects
   of such solution is forcing -n compilation. It also make such
   code harder to locate when program have to be ported for some
   other xbase language.
2. we will introduce new syntax, f.e.
   INIT PUBLIC <var1> [ := <exp1> ] [, <varN> [ := <expN> ]
For me the second one seems to be cleaner.
Because it's possible to initialize the same PUBLIC variable
more then once in different modules then at startup HVM will
detect such situation and generate internal errors. It should
help with finding name conflicts in own and 3-rd party libraries
and fix them immediately just after linking. Otherwise it may
cause unexpected behaviors at runtime. Without such protection
sometimes it maybe very hard to locate the real reason of problem.

best regards,
Przemek
From toninhofwi at yahoo.com.br  Sun Sep 21 19:27:54 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sun Sep 21 19:21:26 2008
Subject: [Harbour] Time wrong in Harbour.exe /build vs hb_buildDate()
In-Reply-To: <pav5d49hfdmkfmipaotf8lq5j7qpk3pe3e@4ax.com>
References: <pav5d49hfdmkfmipaotf8lq5j7qpk3pe3e@4ax.com>
Message-ID: <ctldd4tvshr4if3g55j7bnlf6ohfn7kuvt@4ax.com>

HI ppl,

Very strange, but this problem appeared again in latest SVN:

harbour /build = 20:19:11
? hb_builddate() = 20:19:10

Anybody confirm please ?

TIA and best regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From druzus at acn.waw.pl  Sun Sep 21 19:52:10 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 21 19:52:31 2008
Subject: [Harbour] Time wrong in Harbour.exe /build vs hb_buildDate()
In-Reply-To: <ctldd4tvshr4if3g55j7bnlf6ohfn7kuvt@4ax.com>
References: <pav5d49hfdmkfmipaotf8lq5j7qpk3pe3e@4ax.com>
	<ctldd4tvshr4if3g55j7bnlf6ohfn7kuvt@4ax.com>
Message-ID: <20080921235210.GA8468@34-mo7-2.acn.waw.pl>

On Sun, 21 Sep 2008, Toninho@fwi wrote:

Hi Toninho,

> Very strange, but this problem appeared again in latest SVN:
> harbour /build = 20:19:11
> ? hb_builddate() = 20:19:10
> Anybody confirm please ?

It's expected behavior. These are two different functions
and each of them use __TIME__ macro. So in the above test
you have information when common/hbverdsp.c was compiler
and when common/hbver.c
That's all. If it's a real problem then I can change hb_verBuildInfo()
function to not use __DATE__ and __TIME__ macros but hb_verBuildDate()
functions so the results will be the same.

best regards,
Przemek
From toninhofwi at yahoo.com.br  Sun Sep 21 20:34:01 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sun Sep 21 20:27:40 2008
Subject: [Harbour] Time wrong in Harbour.exe /build vs hb_buildDate()
In-Reply-To: <20080921235210.GA8468@34-mo7-2.acn.waw.pl>
References: <pav5d49hfdmkfmipaotf8lq5j7qpk3pe3e@4ax.com>
	<ctldd4tvshr4if3g55j7bnlf6ohfn7kuvt@4ax.com>
	<20080921235210.GA8468@34-mo7-2.acn.waw.pl>
Message-ID: <hvpdd4p8e8d21k9ac754c9c5agc4297d0q@4ax.com>

>It's expected behavior. These are two different functions
>and each of them use __TIME__ macro. So in the above test
>you have information when common/hbverdsp.c was compiler
>and when common/hbver.c
>That's all. If it's a real problem then I can change hb_verBuildInfo()
>function to not use __DATE__ and __TIME__ macros but hb_verBuildDate()
>functions so the results will be the same.

Przemek, thanks for your information. IMO if this change don't have
any side effect, should be fixed because this two informations need be
matched or final users can be confused.

Best regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From druzus at acn.waw.pl  Sun Sep 21 20:32:25 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 21 20:32:47 2008
Subject: [Harbour] [SPAM] harbour 1.1 ( ChangeLog 9453
	2008-09-2003:37:41Z druzus ) + bcc (551 or 582).
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFC5@SRV02.deltain.net>
References: <416dd4d92acq1sfqbs1p4i23pf121pki3l@4ax.com>
	<AFB948164110ED43B5EB849E8DEEF03815EFC5@SRV02.deltain.net>
Message-ID: <20080922003225.GB8468@34-mo7-2.acn.waw.pl>

On Sun, 21 Sep 2008, Massimo Belgrano wrote:

Hi Massimo,

> Will //INFO display also info of c compiler?

No, this information is shown when you run harbour application
with //BUILD switch.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Sep 21 20:34:39 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 21 20:35:00 2008
Subject: [Harbour] 2008-09-22 02:34 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080922003439.GA5240@34-mo7-2.acn.waw.pl>

2008-09-22 02:34 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbvm.h
  * harbour/source/vm/hvm.c
  * harbour/source/vm/thread.c
    + added .prg function hb_threadSelf() -> <pThID> | NIL
      It returns thread ID pointer variable or NIL when thread was
      registered without it (main thread and some 3-rd party threads
      created by C API)

  * harbour/source/vm/hvm.c
    * protect s_InitFunctions and s_ExitFunctions by mutex

  * harbour/source/common/hbverdsp.c
    * use hb_verBuildDate() instead of __DATE__ and __TIME__ in
      hb_verBuildInfo() function to report the same time in both
      cases.

best regards
Przemek
From druzus at acn.waw.pl  Sun Sep 21 20:46:15 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 21 20:46:36 2008
Subject: [Harbour] MT TOFIX / TODO
Message-ID: <20080922004614.GA8200@34-mo7-2.acn.waw.pl>

Hi all,

Here is a list of things which should be fixed or added
in Harbour MT mode. I plan to make most of them soon but
I think it's good to document them now to avoid possible
problems or confusions.
In few cases I do not know if I will want to resolve them
for MT mode, f.e. investing time in MT safe profiler code.
Maybe I'll simply always disable it in MT builds.

1. Tracelog is not MT safe
   BTW: By default HVM is compiled with optional .prg function call
        tracing. This feature can be controlled (enabled/disabled) by
        __TRACEPRGCALLS() function. If user does not want to use it
        then he can rebuild Harbour with HB_NO_TRACE.
        IMHO HB_NO_TRACE should be default for Harbour builds and user
        who need it should recompile Harbour with HB_PRG_TRACE.
        I plan to make it soon.
2. DEBUGGER is not MT safe. Now do not use debugger in code with
   more then one thread active or it will crash.
   Before we will touch this code please think how MT debugger should
   work.
3. PROFILLER is not MT safe. It's optional code disabled by default.
   Before we will touch it please think how it should work for MT
   programs.
4. There is possible race condition in hb_threadWaitForAll() and
   hb_threadTerminateAll() - it's possible that they will finish
   and new HVM thread will be created in a while. It may happen
   when one of child thread begin to starts new thread and then is
   terminated. Both functions can finished waiting for loop for
   existing threads before the new one will be registered. It
   has to be fixed and I'll make it ASAP
5. hb_threadQuitRequest() can be ignored by thread in some cases
   due to race condition. It may happen if thread will overwrite
   request send by caller simultaneously, f.e. by BREAK.
6. There is possible race condition when class function is
   called 1-st time to create new object. It's possible that
   two threads will try to register the same class. It has to
   be fixed.
7, HB_LIBLOAD()/__HRBLOAD() may not be MT safe in some cases.
   Before they will not be resolved please try to not use this
   functions when other threads are executed.
8. It will be good to add user functions to resize class and RDD
   node arrays for situation when user will want to use more classes
   or RDDs registered at runtime by threads then set by default.
9. We should use hb_vmUnlock()/hb_vmLock() with hb_vmRequestQuerry()
   checking inside hbinet.c
10. Add protection for single GT access from different threads.
11. We need our own file lock server for aliased and MT workareas
    synchronization in POSIX systems 
12. We should check contrib code and eliminate non MT safe code
    or document non MT safe functions.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Sep 21 21:50:09 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 21 21:50:29 2008
Subject: [Harbour] 2008-09-22 03:49 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080922015009.GA5009@34-mo7-2.acn.waw.pl>

2008-09-22 03:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbstack.h
  * harbour/source/vm/estack.c
  * harbour/source/vm/hvm.c
    + added support for nested hb_vmUnlock()/hb_vmLock() calls

  * harbour/source/rtl/hbinet.c
    * encapsulated all potentially slow inet functions inside
      hb_vmUnlock()/hb_vmLock() calls

best regards
Przemek
From druzus at acn.waw.pl  Sun Sep 21 22:27:42 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 21 22:28:02 2008
Subject: [Harbour] 2008-09-22 04:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080922022742.GA4375@34-mo7-2.acn.waw.pl>

2008-09-22 04:27 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/hbinet.c
    ! fixed typo in previous commit which broke MS-Win builds
    * check hb_vmReaquestQuery() after executing use codeblocks

best regards
Przemek
From bedipritpal at hotmail.com  Sun Sep 21 23:49:31 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun Sep 21 23:49:38 2008
Subject: [Harbour] 2008-09-21 20:29 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <19601498.post@talk.nabble.com>


2008-09-21 20:29 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/hbwhat/*.c;*.prg
    ! Prefixed every WHAT specific functions with "WHT_" and 
      Windows specific functions with "VWN_"

    ; NOTE: Now onwards HBWhat.lib use proprietory namespace and 
      can be used alongwith any other WINAPI library. In the next 
      few days I will upload a working demo taking care of all
      the components together.
  
    ; TOFIX: HBWhat.lib is not usable as is still.
      Viktor, please examine these two functions in wincorec.c
         HB_FUNC( WHT__GETDLGPROC )
         BOOL CALLBACK __DlgProc( H... )
      where I have changed the casts to original code. Only then
      I could get it worked. It is only for WHT_DialogBox() and 
      I am sure until we fix it no other component will work.
      It should be easy, IMO, just I do not know the whole story.
      Probably the above change will not let HbWhat to be compliled
      by other compilers or they will produce warnings.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-09-21-20%3A29-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp19601498p19601498.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From lorenzo.fiorini at gmail.com  Mon Sep 22 02:00:54 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 22 02:01:00 2008
Subject: [Harbour] MT "stress" test success
In-Reply-To: <20080921213501.GA29160@34-mo7-2.acn.waw.pl>
References: <9257026e0809210806m10fcb0c6q1b14df9b70610e66@mail.gmail.com>
	<20080921213501.GA29160@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809212300w1a986257w86262193e3f50e34@mail.gmail.com>

On Sun, Sep 21, 2008 at 11:35 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> Please remember that Harbour supports
>
>   THREAD STATIC <var> [ := <init> ]
>
> which are local to thread - each thread uses it's own copy
> of such static variable initialized to <init>.
> In many cases it's enough to use them instead of normal static
> variables though it depends on program context.

Many thanks.

However I've found that MT helps to rethink the oldest parts of the
applications.

I've found that many functions I've written in the past can be easily
replaced by Harbour internal functions or are not so critical today.

In ClientServer/Lan times every access to the files was a pain so it
was normal trying to load as much as possible at startup from files to
static file wide arrays accessed by set/get funcs.
But those arrays have become a shared resource between many different
part of the app.

Since my goal is to move completely to an RPC/XML schema, MT is
essential to support multiple users with multiple apps on the same
server/port.
So for me it's better to start to clean the apps than trying to get
them work in some way.

best regards,
Lorenzo
From e.m.giordano at emagsoftware.it  Mon Sep 22 02:54:12 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Sep 22 02:54:22 2008
Subject: [Harbour] Error in latest SVN
Message-ID: <9D320B1031A94494A503569A8768A058@emag>

Error E2140 source\rtl\hbinet.c 354: Declaration is not allowed here in 
function hb_getHosts

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From miguelangel at marchuet.net  Mon Sep 22 03:21:27 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Mon Sep 22 03:20:39 2008
Subject: [Harbour] RDD controversy question for all people
Message-ID: <48D74777.5080703@marchuet.net>

View the controversy it creates, I propose to upload the following rdds:

dbf1.c strict compatibility with C/52 (RT and Types) 	DBFCDX52.LIB
dbf2.c strict compatibility with CL53 (RT, BM and Types)DBFCDX53.LIB
dbf3.c strict compatibility with VFoxPro (RT and Types) DBFCDXVF.LIB
dbf4.c strict compatibility with ADS (RT and Types) 	DBFCDXAD.LIB
dbf5.c extended from the current RDD harbour 		DBFCDXHB.LIB
...
dbf6.c strict compatibility with DBaseIV 		MDBCDX.LIB
db1.c  strict compatibility with Paradox 		DBPX.LIB


this can lighten the rdds make something even faster.

All people are agree ?


I can upload it this week.

Best regards,
Miguel Angel marchuet
From jfl at mafact.com  Mon Sep 22 03:43:00 2008
From: jfl at mafact.com (J. Lefebvre)
Date: Mon Sep 22 03:43:23 2008
Subject: [Harbour] RDD controversy question for all people
In-Reply-To: <48D74777.5080703@marchuet.net>
Message-ID: <d957fd2c.1c91c86.21ae8849.767d@mafact.com>

I like the idea !

Best regards,
JF

-----Message d'origine-----
De?: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] De la part de Miguel Angel Marchuet
Envoy??: lundi 22 septembre 2008 9:21
??: Harbour Project Main Developer List.
Objet?: [Harbour] RDD controversy question for all people

View the controversy it creates, I propose to upload the following rdds:

dbf1.c strict compatibility with C/52 (RT and Types) 	DBFCDX52.LIB
dbf2.c strict compatibility with CL53 (RT, BM and Types)DBFCDX53.LIB
dbf3.c strict compatibility with VFoxPro (RT and Types) DBFCDXVF.LIB
dbf4.c strict compatibility with ADS (RT and Types) 	DBFCDXAD.LIB
dbf5.c extended from the current RDD harbour 		DBFCDXHB.LIB
...
dbf6.c strict compatibility with DBaseIV 		MDBCDX.LIB
db1.c  strict compatibility with Paradox 		DBPX.LIB


this can lighten the rdds make something even faster.

All people are agree ?


I can upload it this week.

Best regards,
Miguel Angel marchuet
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From dbtopas at dbtopas.lt  Mon Sep 22 03:47:59 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Sep 22 03:49:58 2008
Subject: [Harbour] 2008-09-22 02:34 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080922003439.GA5240@34-mo7-2.acn.waw.pl>
References: <20080922003439.GA5240@34-mo7-2.acn.waw.pl>
Message-ID: <48D74DAF.4060100@dbtopas.lt>

Hi,


>     + added .prg function hb_threadSelf() -> <pThID> | NIL
>       It returns thread ID pointer variable or NIL when thread was
>       registered without it (main thread and some 3-rd party threads
>       created by C API)

Can main thread be terminated after child thread? Can child process wait 
for exit of main thread (let's say main thread do some initialization 
only) and child continue to do the rest job? In this case we need 
hb_threadJoin(pMainThread), but it could not be obtained by hb_threadSelf().

Does anybody know a good thread tutorial/primer to help answer this many 
other similar questions?


Best regards,
Mindaugas


P.S. is it ok, that hb_vmSuspendThreads() returns from inside of 
HB_VM_LOCK/HB_VM_UNLOCK?
From lorenzo.fiorini at gmail.com  Mon Sep 22 04:15:42 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 22 04:15:47 2008
Subject: [Harbour] RDD controversy question for all people
In-Reply-To: <48D74777.5080703@marchuet.net>
References: <48D74777.5080703@marchuet.net>
Message-ID: <9257026e0809220115s7acca45cx7eb13ce1523bea04@mail.gmail.com>

On Mon, Sep 22, 2008 at 9:21 AM, Miguel Angel Marchuet
<miguelangel@marchuet.net> wrote:

> View the controversy it creates

Actually the project leaders are Przemyslaw and Viktor ( in alphabetic order ).

We've agreed time ago that nobody else can change the core code
without announcing it and waiting for their consensus and I don't see
any reason to change this rule now.

In particular RDD and "core" features are under Przemyslaw's control.

I kindly ask you to revert your changes in DBFCDX as requested by
Przemyslaw and Viktor and to respect the rules of the project in the
future.

best regards,
Lorenzo
From jfl at mafact.com  Mon Sep 22 04:25:00 2008
From: jfl at mafact.com (J. Lefebvre)
Date: Mon Sep 22 04:25:47 2008
Subject: [Harbour] RDD controversy question for all people
In-Reply-To: <9257026e0809220115s7acca45cx7eb13ce1523bea04@mail.gmail.com>
Message-ID: <c75f1ece.1c91c8c.21d564d5.4509@mafact.com>

Hummmm, 

Did he change anything else ? 

Did I miss some mail ?

The only mail I got was clearly a request to do upload.

" View the controversy it creates, I propose to upload the following rdds: ..."

I clearly see the word "propose to" in this sentence !

Regards,

JF

-----Message d'origine-----
De?: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] De la part de Lorenzo Fiorini
Envoy??: lundi 22 septembre 2008 10:16
??: Harbour Project Main Developer List.
Objet?: Re: [Harbour] RDD controversy question for all people

On Mon, Sep 22, 2008 at 9:21 AM, Miguel Angel Marchuet
<miguelangel@marchuet.net> wrote:

> View the controversy it creates

Actually the project leaders are Przemyslaw and Viktor ( in alphabetic order ).

We've agreed time ago that nobody else can change the core code
without announcing it and waiting for their consensus and I don't see
any reason to change this rule now.

In particular RDD and "core" features are under Przemyslaw's control.

I kindly ask you to revert your changes in DBFCDX as requested by
Przemyslaw and Viktor and to respect the rules of the project in the
future.

best regards,
Lorenzo
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From miguelangel at marchuet.net  Mon Sep 22 04:37:14 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Mon Sep 22 04:36:24 2008
Subject: [Harbour] RDD controversy question for all people
In-Reply-To: <9257026e0809220115s7acca45cx7eb13ce1523bea04@mail.gmail.com>
References: <48D74777.5080703@marchuet.net>
	<9257026e0809220115s7acca45cx7eb13ce1523bea04@mail.gmail.com>
Message-ID: <48D7593A.8060301@marchuet.net>

I'm talking how revert las changes in the best way

I know your opinion. you only want strict 52 compatibility
in this case don't worry, you can use the same lib as always.

but there are some other body that can prefer more speed
and different security levels in a separated and clean rdd.

don't worry last changes will be reverted at rddcdx as standard
rdd of harbour.

I now I'm purposing another solution than don't touches the kernel
of harbour of course.

NOW I want opinion of other people, please.

Best regards,
Miguel Angel Marchuet

From maurilio.longo at libero.it  Mon Sep 22 04:38:37 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Mon Sep 22 04:38:49 2008
Subject: [Harbour] SIGFPE during build of hbtest
Message-ID: <48D7598D.9060302@libero.it>

Hi,

I'm trying to buil harbour on OS/2 with GCC, I'm getting this:

gcc -I. -I../../../../include -W -Wall -O2  -c rt_date.c -ort_date.o
../../../../source/main/os2/gcc/harbour.exe ../../rt_file.prg -n -q0 -w3 -es2 -k
m -I../../../../include
gcc -I. -I../../../../include -W -Wall -O2  -c rt_file.c -ort_file.o
../../../../source/main/os2/gcc/harbour.exe ../../rt_hvm.prg -n -q0 -w3 -es2 -km
 -I../../../../include
gcc -I. -I../../../../include -W -Wall -O2  -c rt_hvm.c -ort_hvm.o
../../../../source/main/os2/gcc/harbour.exe ../../rt_hvma.prg -n -q0 -w3 -es2 -k
m -I../../../../include

Killed by SIGFPE
pid=0x62a5 ppid=0x628a tid=0x0001 slot=0x00e3 pri=0x0200 mc=0x0001
E:\REPOSITORY\HARBOUR-SVN\SOURCE\MAIN\OS2\GCC\HARBOUR.EXE
LIBC063 0:0005547a
cs:eip=005b:1d67547a      ss:esp=0053:0217eab0      ebp=0217eb28
 ds=0053      es=0053      fs=150b      gs=0000     efl=00010206
eax=00000000 ebx=40100000 ecx=40100000 edx=00000000 edi=40100000 esi=40100000
Process dumping was disabled, use DUMPPROC / PROCDUMP to enable it.
make[1]: *** [rt_hvma.c] Error 127
make[1]: Leaving directory `/repository/harbour-svn/utils/hbtest/os2/gcc'
make: *** [descend] Error 2

Is there something already known here or do I have to build it with full debug
 info to get a stack trace?

Every thing else seems to build correctly, though.

Best regards.

Maurilio.


-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From myorg63 at mail.ru  Mon Sep 22 05:03:36 2008
From: myorg63 at mail.ru (Petr Chornyj)
Date: Mon Sep 22 05:03:41 2008
Subject: [Harbour] [SPAM]  Re: [SPAM]  harbour 1.1 ( ChangeLog 9453
	2008-09-20 03:37:41Z druzus ) + bcc (551 or 582).
In-Reply-To: <20080921220426.GC29160@34-mo7-2.acn.waw.pl>
References: <19594721.post@talk.nabble.com>
	<20080921162613.GA3185@34-mo7-2.acn.waw.pl>
	<19596934.post@talk.nabble.com>
	<20080921215042.GB29160@34-mo7-2.acn.waw.pl>
	<20080921220426.GC29160@34-mo7-2.acn.waw.pl>
Message-ID: <19604164.post@talk.nabble.com>



Przemyslaw Czerpak-2 wrote:
> 
> On Sun, 21 Sep 2008, Przemyslaw Czerpak wrote:
> 
> I think that I know what could be a problem:
> regular expressions library.
> 

Thank you!

For linking test application I use standard bld.bat from BIN directory.
>From bld.bat 
harbour 1.0.1
  bcc32 -O2 -d %CFLAGS% -I%HB_INC_INSTALL% -L%HB_LIB_INSTALL% %1.c
%HB_USER_LIBS% hbcpage.lib hbcpage.lib hbdebug.lib hbvm.lib ... hbpcre.lib
hbzlib.lib

harbour 1.1
  bcc32 -O2 -d %C_USR% -I%HB_INC_INSTALL% -L%HB_LIB_INSTALL% %1.c CW32MT.LIB
%HB_USER_LIBS% hbcpage.lib hbdebug.lib hbvm.lib .. hbpcre.lib hbzlib.lib

I link hbpcre.lib BEFORE CW32MT.LIB and all works as fine.

I found this in ChangeLog:
2008-09-14 19:59 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * bin/bld.bat
    + Added cw32mt.lib for BCC32 to make it work for MT Harbour.
    ; I hope this won't break ST Harbour builds, a quick tests 
      proved not.

Fot mr it break not onle ST but also MT :)
For MT we need something like

SET HB_MT=mt 
IF NOT HB_MT=="" SET _CW32MT=cw32mt.lib 

  bcc32 -O2 -d %C_USR% -I%HB_INC_INSTALL% -L%HB_LIB_INSTALL% %1.c
%HB_USER_LIBS% hbcpage.lib hbdebug.lib hbvm%MT%.lib .. hbpcre.lib hbzlib.lib
%_CW32MT%


Regards, 
Petr
-- 
View this message in context: http://www.nabble.com/harbour-1.1-%28-ChangeLog-9453-2008-09-20-03%3A37%3A41Z-druzus-%29-%2B-bcc-%28551-or-582%29.-tp19594721p19604164.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Mon Sep 22 05:08:17 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 05:08:24 2008
Subject: [Harbour] Make_gnu and Mingw 
In-Reply-To: <FBDC288E86804829B14A98B130479760@pepeluis>
References: <20080916185935.GA19252@34-mo7-2.acn.waw.pl><004901c91830$f06f90b0$bb001aac@AGSoft.local><20080916200020.GA10466@34-mo7-2.acn.waw.pl>
	<8C1532C5C96B4D9E8263B2F6445901DE@pepeluis>
	<FBDC288E86804829B14A98B130479760@pepeluis>
Message-ID: <A12BB9AE-B302-460C-9B08-C608BDD80E46@syenar.hu>

Hi Jose,

> SET CLIBFLAGS=-DHB_OS_WIN_32

This one is not needed.

> SET HB_MAKE_PROGRAM=\programacion\mingw\bin\mingw32-make.exe

This is only supported in non-GNU make, so it's not
needed either.

> The second question is about generated harbour.exe It is located at  
> \harbour\source\main\w32\mingw... Why?

You need to use 'make_gnu.bat install' to put them
to their final location (HB_*_INSTALL dirs).

Brgds,
Viktor

From myorg63 at mail.ru  Mon Sep 22 05:16:53 2008
From: myorg63 at mail.ru (Petr Chornyj)
Date: Mon Sep 22 05:16:59 2008
Subject: [Harbour] RDD controversy question for all people
In-Reply-To: <48D7593A.8060301@marchuet.net>
References: <48D74777.5080703@marchuet.net>
	<9257026e0809220115s7acca45cx7eb13ce1523bea04@mail.gmail.com>
	<48D7593A.8060301@marchuet.net>
Message-ID: <19604315.post@talk.nabble.com>




Miguel Angel Marchuet wrote:
> 
> 
> NOW I want opinion of other people, please.
> 
> 

It interestingly for me

Regards,
Petr
-- 
View this message in context: http://www.nabble.com/RDD-controversy-question-for-all-people-tp19602998p19604315.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Mon Sep 22 05:25:52 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 05:25:59 2008
Subject: [SPAM] Re: [Harbour] [SPAM] harbour 1.1 ( ChangeLog 9453
	2008-09-20 03:37:41Z druzus ) + bcc (551 or 582).
In-Reply-To: <20080921220426.GC29160@34-mo7-2.acn.waw.pl>
References: <19594721.post@talk.nabble.com>
	<20080921162613.GA3185@34-mo7-2.acn.waw.pl>
	<19596934.post@talk.nabble.com>
	<20080921215042.GB29160@34-mo7-2.acn.waw.pl>
	<20080921220426.GC29160@34-mo7-2.acn.waw.pl>
Message-ID: <40FC45FA-CAF8-43A4-BEF6-AEB76FC0C55C@syenar.hu>

Hi Przemek, Peter,

>> Very strange results. I do not know anything about compiler
>> dependent code in this example.
>
> I think that I know what could be a problem:
> regular expressions library.
> BCC uses its own copy of very old PCRE library to emulate
> POSIX regex. Just simply this library is used during linking
> instead of HBPCRE and code which uses regular expressions
> fails. It also explains why it works with harbour.dll which
> is linked correctly with HBPCRE in Harbour build make files.
> Please add HBPCRE to linked library list and it should begin
> to work.

Can we somehow make it the default for BCC to use Harbour's
PCRE _only_, and remove the option to use own BCC one? Where
should thid be done?

To be honest I'm still a bit confused on PCRE settings, so
I couldn't ever test the Harbour built-in one.

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Mon Sep 22 05:29:25 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 22 05:29:31 2008
Subject: [Harbour] RDD controversy question for all people
In-Reply-To: <48D7593A.8060301@marchuet.net>
References: <48D74777.5080703@marchuet.net>
	<9257026e0809220115s7acca45cx7eb13ce1523bea04@mail.gmail.com>
	<48D7593A.8060301@marchuet.net>
Message-ID: <9257026e0809220229v1a1a8e41h440ad990dd7acb9c@mail.gmail.com>

On Mon, Sep 22, 2008 at 10:37 AM, Miguel Angel Marchuet
<miguelangel@marchuet.net> wrote:

> I know your opinion. you only want strict 52 compatibility
> in this case don't worry, you can use the same lib as always.

We've got a similar discussion months ago ( see Rushmore and bitmap
filters thread ).
There is nothing personal here. It's simply a matter of rules.
I simply accept that actually Przemyslaw and Viktor have the last word
on what goes in the repository. Every successful OSS I know work in
this way.
So if Viktor says "revert", me you and every other developer have to revert.

About your proposal of "new" RDDs I'm against it since I think that
few weeks after 1.0 we need to fix the actual code ( if necessary )
and add new features instead of rebuilding what is working.

This change could be a goal for a 2.0 or a 3.0 branch.

best regards,
Lorenzo
From dbtopas at dbtopas.lt  Mon Sep 22 05:34:57 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Sep 22 05:36:59 2008
Subject: [Harbour] RDD controversy question for all people
In-Reply-To: <48D74777.5080703@marchuet.net>
References: <48D74777.5080703@marchuet.net>
Message-ID: <48D766C1.6050502@dbtopas.lt>

Hi,


> View the controversy it creates, I propose to upload the following rdds:
> 
> dbf1.c strict compatibility with C/52 (RT and Types)     DBFCDX52.LIB
> dbf2.c strict compatibility with CL53 (RT, BM and Types)DBFCDX53.LIB
> dbf3.c strict compatibility with VFoxPro (RT and Types) DBFCDXVF.LIB
> dbf4.c strict compatibility with ADS (RT and Types)     DBFCDXAD.LIB
> dbf5.c extended from the current RDD harbour         DBFCDXHB.LIB
> ...
> dbf6.c strict compatibility with DBaseIV         MDBCDX.LIB
> db1.c  strict compatibility with Paradox         DBPX.LIB
> 
> 
> this can lighten the rdds make something even faster.
> 
> All people are agree ?


I think it will make a total mess for any Harbour user. It's better to 
have one RDD containing all features. For developers - many source code 
will be duplicated in dbf*.c, and it will harder to change code.



Best regards,
Mindaugas
From harbour.01 at syenar.hu  Mon Sep 22 05:38:57 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 05:39:04 2008
Subject: [Harbour] A few questions about MT
In-Reply-To: <20080921231424.GA18618@34-mo7-2.acn.waw.pl>
References: <48D2698D.80206@dbtopas.lt>
	<20080918165307.GA15124@34-mo7-2.acn.waw.pl>
	<A1E8AD22-84C4-4717-9C48-26E0664DA207@syenar.hu>
	<20080921231424.GA18618@34-mo7-2.acn.waw.pl>
Message-ID: <1050CEFC-928C-45E4-AA63-AAF3AB99BF85@syenar.hu>

Hi Przemek,

On 2008.09.22., at 1:14, Przemyslaw Czerpak wrote:

>> For now, I'd personally vote to make PUBLICs visible for
>> all threads (otherwise most apps would need to be rewritten
>> in this respect I guess), and PRIVATEs to the threads that
>> define them. 'THREAD PUBLIC' could be introduced to create
>> PUBLICs visible only for the current thread if someone
>> needs such thing. It would be analogous to THREAD STATIC.
>
> I thought about it and I think that making PUBLIC common for
> all threads may force code rewriting.

What I had in mind is code like this (which I use frequently
for app global settings - which are for the most part read-only
and global to the whole app, however programming practice it
may be)

FUNC MAIN()
    PUBLIC app[_APP_SETTING_MAX_] := { ... }
    customer_handling()
    item_handling()
    RETURN NIL

FUNCTION customer_handling()
    open dbs, open window
    ... IF app[_APP_SOMEGLOBALSETTING] ; ... ; ENDIF ; ...
    close window, open dbs
    RETURN NIL

FUNCTION items_handling()
    open dbs, open window
    ... IF app[_APP_GLOBALSETTING] ; ... ; ENDIF ; ...
    close window, open dbs
    RETURN NIL

If I'd like to move *_handling to separate threads, I'd
be in trouble I guess. If they'd be inherited and global,
the only place I'd have to deal with blocking reentrancy
is the setup functions - where these values are actually
written.

> Now I decided to add thread attributes which allows to
> control what will happen with existing memvars when new
> thread is created so it's possible that child thread will
> have copy of all existing PUBLIC and/or PRIVATE variables
> or making them common (shared) with parent thread.
> It allows to reach nearly the same effect as in xBase++.

Many thanks this looks good. I'd also make the defaults
XBase++ like to make it easier to grasp.

> For strict xbase++ compatibility we will need to divide memvars
> handles to store PUBLIC and PRIVATE ones separately. If users will
> vote for such solution then I'll add it too. In such case we
> probably should also add support fot THREAD PUBLIC variables.

One vote to be (or to have to option to be) fully XBase++
compatible.

> Now let's return to GLOBALs. GLOBALs are application wide STATIC
> variables. If we do not want to add them then we should add support
> for automatic PUBLIC declaration and initialization with the same
> conditions as STATIC initialization. This will cover the necessary
> functionality. We can make it in two ways:
> 1. use existing syntax and only allow to declare PUBLIC out of
>   function body just like file wide statics. The bad effects
>   of such solution is forcing -n compilation. It also make such
>   code harder to locate when program have to be ported for some
>   other xbase language.
> 2. we will introduce new syntax, f.e.
>   INIT PUBLIC <var1> [ := <exp1> ] [, <varN> [ := <expN> ]
> For me the second one seems to be cleaner.

As far as the syntax goes, I seem to like better option 1),
since it's more "natural". But I also like the collision detection
feature you mention for INIT PUBLIC.

It may be nice if we could somehow support GLOBALs with some
#translates or #defines in hbcompat.ch. I'm not sure which option
supports this better.

Also - XBase++ users -, how is this solved in that language?

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep 22 05:39:42 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 05:39:48 2008
Subject: [Harbour] Time wrong in Harbour.exe /build vs hb_buildDate()
In-Reply-To: <hvpdd4p8e8d21k9ac754c9c5agc4297d0q@4ax.com>
References: <pav5d49hfdmkfmipaotf8lq5j7qpk3pe3e@4ax.com>
	<ctldd4tvshr4if3g55j7bnlf6ohfn7kuvt@4ax.com>
	<20080921235210.GA8468@34-mo7-2.acn.waw.pl>
	<hvpdd4p8e8d21k9ac754c9c5agc4297d0q@4ax.com>
Message-ID: <9F8A3EF1-2231-4806-A2BA-EA36B352117C@syenar.hu>

+1

Brgds,
Viktor

On 2008.09.22., at 2:34, Toninho@fwi wrote:

>> It's expected behavior. These are two different functions
>> and each of them use __TIME__ macro. So in the above test
>> you have information when common/hbverdsp.c was compiler
>> and when common/hbver.c
>> That's all. If it's a real problem then I can change  
>> hb_verBuildInfo()
>> function to not use __DATE__ and __TIME__ macros but  
>> hb_verBuildDate()
>> functions so the results will be the same.
>
> Przemek, thanks for your information. IMO if this change don't have
> any side effect, should be fixed because this two informations need be
> matched or final users can be confused.
>
> Best regards,
>
> Toninho.
>
> __________________________________________________
> Fa?a liga??es para outros computadores com o novo Yahoo! Messenger
> http://br.beta.messenger.yahoo.com/
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Sep 22 05:46:06 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 05:46:13 2008
Subject: [Harbour] RDD controversy question for all people
In-Reply-To: <48D74777.5080703@marchuet.net>
References: <48D74777.5080703@marchuet.net>
Message-ID: <6AE459D8-1972-41B7-8F22-D0E41F38AE25@syenar.hu>

Hi Miguel,

I find this extremely confusing and difficult to
maintain and use, and pretty much defeats the
purpose of _Replaceable_ Database Driver concept,
so I vote a strong no.

Brgds,
Viktor

On 2008.09.22., at 9:21, Miguel Angel Marchuet wrote:

> View the controversy it creates, I propose to upload the following  
> rdds:
>
> dbf1.c strict compatibility with C/52 (RT and Types) 	DBFCDX52.LIB
> dbf2.c strict compatibility with CL53 (RT, BM and Types)DBFCDX53.LIB
> dbf3.c strict compatibility with VFoxPro (RT and Types) DBFCDXVF.LIB
> dbf4.c strict compatibility with ADS (RT and Types) 	DBFCDXAD.LIB
> dbf5.c extended from the current RDD harbour 		DBFCDXHB.LIB
> ...
> dbf6.c strict compatibility with DBaseIV 		MDBCDX.LIB
> db1.c  strict compatibility with Paradox 		DBPX.LIB
>
>
> this can lighten the rdds make something even faster.
>
> All people are agree ?
>
>
> I can upload it this week.
>
> Best regards,
> Miguel Angel marchuet
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Sep 22 05:52:22 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 05:52:31 2008
Subject: [Harbour] [SPAM] Re: [SPAM] harbour 1.1 ( ChangeLog 9453
	2008-09-20 03:37:41Z druzus ) + bcc (551 or 582).
In-Reply-To: <19604164.post@talk.nabble.com>
References: <19594721.post@talk.nabble.com>
	<20080921162613.GA3185@34-mo7-2.acn.waw.pl>
	<19596934.post@talk.nabble.com>
	<20080921215042.GB29160@34-mo7-2.acn.waw.pl>
	<20080921220426.GC29160@34-mo7-2.acn.waw.pl>
	<19604164.post@talk.nabble.com>
Message-ID: <B038D04B-3ADB-4505-B051-C4A24E6B0EBC@syenar.hu>

Hi Petr,

> Fot mr it break not onle ST but also MT :)

Thanks I wanted to remove this lib anyway.
HB_USER_LIBS should be used to specify special
MT lib.

> For MT we need something like
>
> SET HB_MT=mt
> IF NOT HB_MT=="" SET _CW32MT=cw32mt.lib

I don't plan to implement this yet in non-GNU
make systems, but HB_USER_LIBS=cw32mt.lib
(or cp32mt, or cw32mti) will do for everyone.

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep 22 06:22:48 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 06:23:02 2008
Subject: [Harbour] what is changed from clipper.lib and extend.lib in
	library structure
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFC1@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EFC1@SRV02.deltain.net>
Message-ID: <63A8E2D5-42FE-4F3C-A22D-A8E5A5DB3B76@syenar.hu>

I'd agree on a lib merge, but last time we've
tried it looked like something against the various
needs ppl seem to be having.

Maybe hbmacro, hblang, hbcpage, hbrdd could be
merged into hbrtl without concerns. This would be
a small step to this direction.

We'd definitely need opinions and an agreement on
it and also helping hands who can do this merge.

Brgds,
Viktor

On 2008.09.20., at 13:24, Massimo Belgrano wrote:

> I have read an problem regarding getprinters on harbour user and I  
> have tried to recompile sample
> Each times that I try recompile harbour sample I have a lot of  
> problem regarding library resolve
> In clipper I must link basically only clipper.lib and extend.lib  
> with in harbour I have big number of library?
> Wich are library that must be always loaded like clipper.lib?
> Can same body post a reply on harbour user http://lists.harbour-project.org/mailman/listinfo/harbour-users 
>  ?
> *******************************
> Function Imprime(cArq,cPrint)
> *******************************
> *
> *
>    #include "hbcompat.ch"
> Local oPrn, aPrn:=GetPrinters()
> if empty(aPrn)
>    MsgInfo( 'Not Print' )
>    return .f.
> endif
> If cPrint == Nil
>  cPrint := GetDefaultPrinter()
> EndIf
>
>   //Set Printer to (GetDefaultPrinter() )
>  //Set(_SET_PRINTER)
>  //Set(_SET_PRINTFILE)
>  //Set Console Off
>  //Set Printer On
>  nRet := PrintFileRaw(cPrint,cArq,'Pedido')
>  if nRet < 1
>    MsgStop('Error Printing: '+rtrim(str(nRet)))
>   EndIf
>  //Linhas := mlcount(txt,nCol)
>  //For i:=1 to Linhas
>  //   ? rTrim(MemoLine(txt,nCol,i,,,.f.))
>  //Next
>  //Set Printer Off
>  //Set Console On
>  //Set Printer to
>  Return .t.
> Error: Unresolved external '__turboFloat' referenced from root
> Error: Unresolved external '__beginthreadex' referenced from C: 
> \HARBOUR\LIB\HBVM.LIB|thread
> Error: Unresolved external 'VirtualAlloc' referenced from C:\HARBOUR 
> \LIB\HBVM.LIB|fm
> Error: Unresolved external 'VirtualQuery' referenced from C:\HARBOUR 
> \LIB\HBVM.LIB|fm
> Error: Unresolved external 'VirtualFree' referenced from C:\HARBOUR 
> \LIB\HBVM.LIB|fm
> Error: Unresolved external 'InterlockedCompareExchange' referenced  
> from C:\HARBOUR\LIB\HBVM.LIB|fm
> Error: Unresolved external 'Sleep' referenced from C:\HARBOUR\LIB 
> \HBVM.LIB|fm
> Error: Unresolved external 'InterlockedExchange' referenced from C: 
> \HARBOUR\LIB\HBVM.LIB|fm
> Error: Unresolved external 'GetSystemInfo' referenced from C:\HARBOUR 
> \LIB\HBVM.LIB|fm
> Error: Unresolved external '__streams' referenced from C:\HARBOUR\LIB 
> \HBVM.LIB|fm
> Error: Unresolved external '_fprintf' referenced from C:\HARBOUR\LIB 
> \HBVM.LIB|fm
> Error: Unresolved external '_abort' referenced from C:\HARBOUR\LIB 
> \HBVM.LIB|fm
> Error: Unresolved external '_memset' referenced from C:\HARBOUR\LIB 
> \HBVM.LIB|fm
> Error: Unresolved external 'InterlockedIncrement' referenced from C: 
> \HARBOUR\LIB\HBVM.LIB|fm
> Error: Unresolved external '_memcpy' referenced from C:\HARBOUR\LIB 
> \HBVM.LIB|fm
> Error: Unresolved external 'InterlockedDecrement' referenced from C: 
> \HARBOUR\LIB\HBVM.LIB|fm
> Error: Unresolved external '_snprintf' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|langapi
> Error: Unresolved external '_pow' referenced from C:\HARBOUR\LIB 
> \HBCOMMON.LIB|hbstr
> Error: Unresolved external '_modf' referenced from C:\HARBOUR\LIB 
> \HBCOMMON.LIB|hbstr
> Error: Unresolved external '__llmul' referenced from C:\HARBOUR\LIB 
> \HBCOMMON.LIB|hbstr
> Error: Unresolved external '_strlen' referenced from C:\HARBOUR\LIB 
> \HBCOMMON.LIB|hbstr
> Error: Unresolved external '__ltolower' referenced from C:\HARBOUR 
> \LIB\HBCOMMON.LIB|hbstr
> Error: Unresolved external '__ltoupper' referenced from C:\HARBOUR 
> \LIB\HBCOMMON.LIB|hbstr
> Error: Unresolved external '_memmove' referenced from C:\HARBOUR\LIB 
> \HBVM.LIB|dynsym
> Error: Unresolved external '___System__GetTls' referenced from C: 
> \HARBOUR\LIB\HBVM.LIB|dynsym
> Error: Unresolved external 'GetStdHandle' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|filesys
> Error: Unresolved external 'CreateFileA' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|filesys
> Error: Unresolved external 'CloseHandle' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|filesys
> Error: Unresolved external '_setmode' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|filesys
> Error: Unresolved external 'GetFileTime' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|filesys
> Error: Unresolved external 'FileTimeToLocalFileTime' referenced from  
> C:\HARBOUR\LIB\HBRTL.LIB|filesys
> Error: Unresolved external 'FileTimeToSystemTime' referenced from C: 
> \HARBOUR\LIB\HBRTL.LIB|filesys
> Error: Unresolved external 'GetLocalTime' referenced from C:\HARBOUR 
> \LIB\HBCOMMON.LIB|hbdate
> Error: Unresolved external 'GetFileAttributesA' referenced from C: 
> \HARBOUR\LIB\HBRTL.LIB|filesys
> Error: Unresolved external 'GetVolumeInformationA' referenced from C: 
> \HARBOUR\LIB\HBRTL.LIB|hbffind
> Error: Unresolved external 'FindFirstFileA' referenced from C: 
> \HARBOUR\LIB\HBRTL.LIB|hbffind
> Error: Unresolved external 'FindNextFileA' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|hbffind
> Error: Unresolved external 'GetLastError' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|fserror
> Error: Unresolved external 'FindClose' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|hbffind
> Error: Unresolved external 'SystemTimeToFileTime' referenced from C: 
> \HARBOUR\LIB\HBRTL.LIB|filesys
> Error: Unresolved external 'LocalFileTimeToFileTime' referenced from  
> C:\HARBOUR\LIB\HBRTL.LIB|filesys
> Error: Unresolved external 'SetFileTime' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|filesys
> Error: Unresolved external 'SetFileAttributesA' referenced from C: 
> \HARBOUR\LIB\HBRTL.LIB|filesys
> Error: Unresolved external 'ReadFile' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|filesys
> Error: Unresolved external 'WriteFile' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|filesys
> Error: Unresolved external 'SetEndOfFile' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|filesys
> Error: Unresolved external 'FlushFileBuffers' referenced from C: 
> \HARBOUR\LIB\HBRTL.LIB|filesys
> Error: Unresolved external 'LockFileEx' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|filesys
> Error: Unresolved external 'LockFile' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|filesys
> Error: Unresolved external '_isspace' referenced from C:\HARBOUR\LIB 
> \HBCOMMON.LIB|hbver
> Error: Unresolved external 'GetVersionExA' referenced from C:\HARBOUR 
> \LIB\HBCOMMON.LIB|hbver
> Error: Unresolved external 'GetEnvironmentVariableA' referenced from  
> C:\HARBOUR\LIB\HBCOMMON.LIB|hbgete
> Error: Unresolved external '_strchr' referenced from C:\HARBOUR\LIB 
> \HBVM.LIB|cmdarg
> Error: Unresolved external '_strpbrk' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|cdpapi
> Error: Unresolved external '_memcmp' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|strtran
> Error: Unresolved external '__ftoul' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|idle
> Error: Unresolved external 'GetCurrentProcess' referenced from C: 
> \HARBOUR\LIB\HBRTL.LIB|seconds
> Error: Unresolved external 'GetProcessTimes' referenced from C: 
> \HARBOUR\LIB\HBRTL.LIB|seconds
> Error: Unresolved external 'EmptyClipboard' referenced from C: 
> \HARBOUR\LIB\HBRTL.LIB|gtclip
> Error: Unresolved external 'GlobalAlloc' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|gtclip
> Error: Unresolved external 'MultiByteToWideChar' referenced from C: 
> \HARBOUR\LIB\HBCOMMON.LIB|hbwince
> Error: Unresolved external 'WideCharToMultiByte' referenced from C: 
> \HARBOUR\LIB\HBCOMMON.LIB|hbwince
> Error: Unresolved external 'SetClipboardData' referenced from C: 
> \HARBOUR\LIB\HBRTL.LIB|gtclip
> Error: Unresolved external 'IsClipboardFormatAvailable' referenced  
> from C:\HARBOUR\LIB\HBRTL.LIB|gtclip
> Error: Unresolved external 'OpenClipboard' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|gtclip
> Error: Unresolved external 'GetClipboardData' referenced from C: 
> \HARBOUR\LIB\HBRTL.LIB|gtclip
> Error: Unresolved external 'GlobalLock' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|gtclip
> Error: Unresolved external '_wcslen' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|gtclip
> Error: Unresolved external 'GlobalSize' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|gtclip
> Error: Unresolved external 'GlobalUnlock' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|gtclip
> Error: Unresolved external 'CloseClipboard' referenced from C: 
> \HARBOUR\LIB\HBRTL.LIB|gtclip
> Error: Unresolved external 'SetConsoleCursorPosition' referenced  
> from C:\HARBOUR\LIB\GTWIN.LIB|gtwin
> Error: Unresolved external 'SetConsoleCursorInfo' referenced from C: 
> \HARBOUR\LIB\GTWIN.LIB|gtwin
> Error: Unresolved external 'WriteConsoleOutputA' referenced from C: 
> \HARBOUR\LIB\GTWIN.LIB|gtwin
> Error: Unresolved external 'ReadConsoleOutputA' referenced from C: 
> \HARBOUR\LIB\GTWIN.LIB|gtwin
> Error: Unresolved external 'FreeConsole' referenced from C:\HARBOUR 
> \LIB\GTWIN.LIB|gtwin
> Error: Unresolved external 'AllocConsole' referenced from C:\HARBOUR 
> \LIB\GTWIN.LIB|gtwin
> Error: Unresolved external 'GetConsoleScreenBufferInfo' referenced  
> from C:\HARBOUR\LIB\GTWIN.LIB|gtwin
> Error: Unresolved external 'GetConsoleMode' referenced from C: 
> \HARBOUR\LIB\GTWIN.LIB|gtwin
> Error: Unresolved external 'SetConsoleScreenBufferSize' referenced  
> from C:\HARBOUR\LIB\GTWIN.LIB|gtwin
> Error: Unresolved external 'SetConsoleWindowInfo' referenced from C: 
> \HARBOUR\LIB\GTWIN.LIB|gtwin
> Error: Unresolved external 'SetConsoleCtrlHandler' referenced from C: 
> \HARBOUR\LIB\GTWIN.LIB|gtwin
> Error: Unresolved external 'SetConsoleMode' referenced from C: 
> \HARBOUR\LIB\GTWIN.LIB|gtwin
> Error: Unresolved external 'GetNumberOfConsoleInputEvents'  
> referenced from C:\HARBOUR\LIB\GTWIN.LIB|gtwin
> Error: Unresolved external 'ReadConsoleInputA' referenced from C: 
> \HARBOUR\LIB\GTWIN.LIB|gtwin
> Error: Unresolved external '__ftol' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|gttone
> Error: Unresolved external 'Beep' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|gttone
> Error: Unresolved external 'GetConsoleTitleA' referenced from C: 
> \HARBOUR\LIB\GTWIN.LIB|gtwin
> Error: Unresolved external 'SetConsoleTitleA' referenced from C: 
> \HARBOUR\LIB\GTWIN.LIB|gtwin
> Error: Unresolved external 'GetLargestConsoleWindowSize' referenced  
> from C:\HARBOUR\LIB\GTWIN.LIB|gtwin
> Error: Unresolved external 'GetKeyboardState' referenced from C: 
> \HARBOUR\LIB\HBRTL.LIB|gtkbstat
> Error: Unresolved external 'SetKeyboardState' referenced from C: 
> \HARBOUR\LIB\HBRTL.LIB|gtkbstat
> Error: Unresolved external 'GetKeyState' referenced from C:\HARBOUR 
> \LIB\GTWIN.LIB|gtwin
> Error: Unresolved external 'GetNumberOfConsoleMouseButtons'  
> referenced from C:\HARBOUR\LIB\GTWIN.LIB|gtwin
> Error: Unresolved external '_atol' referenced from C:\HARBOUR\LIB 
> \HBVM.LIB|cmdarg
> Error: Unresolved external 'UnlockFileEx' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|filesys
> Error: Unresolved external 'UnlockFile' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|filesys
> Error: Unresolved external 'SetFilePointer' referenced from C: 
> \HARBOUR\LIB\HBRTL.LIB|filesys
> Error: Unresolved external 'DeleteFileA' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|filesys
> Error: Unresolved external 'MoveFileA' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|filesys
> Error: Unresolved external 'CreateDirectoryA' referenced from C: 
> \HARBOUR\LIB\HBRTL.LIB|filesys
> Error: Unresolved external 'SetCurrentDirectoryA' referenced from C: 
> \HARBOUR\LIB\HBRTL.LIB|filesys
> Error: Unresolved external 'RemoveDirectoryA' referenced from C: 
> \HARBOUR\LIB\HBRTL.LIB|filesys
> Error: Unresolved external 'GetCurrentDirectoryA' referenced from C: 
> \HARBOUR\LIB\HBRTL.LIB|filesys
> Error: Unresolved external '__chdrive' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|filesys
> Error: Unresolved external 'GetDriveTypeA' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|filesys
> Error: Unresolved external 'GetFileType' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|filesys
> Error: Unresolved external '__getdrive' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|filesys
> Error: Unresolved external '_printf' referenced from C:\HARBOUR\LIB 
> \HBVM.LIB|estack
> Error: Unresolved external '_fopen' referenced from C:\HARBOUR\LIB 
> \HBCOMMON.LIB|hbfopen
> Error: Unresolved external '_fwrite' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|errorint
> Error: Unresolved external '_fclose' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|errorint
> Error: Unresolved external '_exit' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|errorint
> Error: Unresolved external 'GlobalMemoryStatus' referenced from C: 
> \HARBOUR\LIB\HBVM.LIB|fm
> Error: Unresolved external '__isnan' referenced from C:\HARBOUR\LIB 
> \HBVM.LIB|itemapi
> Error: Unresolved external '__finite' referenced from C:\HARBOUR\LIB 
> \HBVM.LIB|itemapi
> Error: Unresolved external '__llmod' referenced from C:\HARBOUR\LIB 
> \HBVM.LIB|itemapi
> Error: Unresolved external '__lldiv' referenced from C:\HARBOUR\LIB 
> \HBVM.LIB|itemapi
> Error: Unresolved external '_isdigit' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|dates
> Error: Unresolved external '__endthreadex' referenced from C:\HARBOUR 
> \LIB\HBVM.LIB|thread
> Error: Unresolved external 'DeleteCriticalSection' referenced from C: 
> \HARBOUR\LIB\HBVM.LIB|thread
> Error: Unresolved external 'InitializeCriticalSection' referenced  
> from C:\HARBOUR\LIB\HBVM.LIB|thread
> Error: Unresolved external 'CreateSemaphoreA' referenced from C: 
> \HARBOUR\LIB\HBVM.LIB|thread
> Error: Unresolved external 'GetCurrentThreadId' referenced from C: 
> \HARBOUR\LIB\HBVM.LIB|thread
> Error: Unresolved external 'ReleaseSemaphore' referenced from C: 
> \HARBOUR\LIB\HBVM.LIB|thread
> Error: Unresolved external 'WaitForSingleObject' referenced from C: 
> \HARBOUR\LIB\HBVM.LIB|thread
> Error: Unresolved external 'EnterCriticalSection' referenced from C: 
> \HARBOUR\LIB\HBVM.LIB|thread
> Error: Unresolved external 'LeaveCriticalSection' referenced from C: 
> \HARBOUR\LIB\HBVM.LIB|thread
> Error: Unresolved external '_fmod' referenced from C:\HARBOUR\LIB 
> \HBCOMMON.LIB|expropt2
> Error: Unresolved external '_strncmp' referenced from C:\HARBOUR\LIB 
> \HBMACRO.LIB|macrob
> Error: Unresolved external '__llshr' referenced from C:\HARBOUR\LIB 
> \HBMACRO.LIB|macrob
> Error: Unresolved external '__llshl' referenced from C:\HARBOUR\LIB 
> \HBMACRO.LIB|macrob
> Error: Unresolved external '_memchr' referenced from C:\HARBOUR\LIB 
> \HBVM.LIB|macro
> Error: Unresolved external '_srand' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|hbrandom
> Error: Unresolved external '_rand' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|hbrandom
> Error: Unresolved external 'GetTempPathA' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|fstemp
> Error: Unresolved external 'GetTempFileNameA' referenced from C: 
> \HARBOUR\LIB\HBRTL.LIB|fstemp
> Error: Unresolved external '_sqrt' referenced from C:\HARBOUR\LIB 
> \RDDNTX.LIB|dbfntx1
> Error: Unresolved external '_ceil' referenced from C:\HARBOUR\LIB 
> \RDDNTX.LIB|dbfntx1
> Error: Unresolved external '_exp' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|math
> Error: Unresolved external '_log' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|math
> Error: Unresolved external '__huge_dble' referenced from C:\HARBOUR 
> \LIB\HBRTL.LIB|math
> Error: Unresolved external 'IsBadReadPtr' referenced from C:\HARBOUR 
> \LIB\HBVM.LIB|extrap
> Error: Unresolved external 'IsBadWritePtr' referenced from C:\HARBOUR 
> \LIB\HBVM.LIB|extrap
> Error: Unresolved external 'MessageBoxA' referenced from C:\HARBOUR 
> \LIB\HBVM.LIB|extrap
> Error: Unresolved external 'SetUnhandledExceptionFilter' referenced  
> from C:\HARBOUR\LIB\HBVM.LIB|extrap
> Error: Unresolved external '_vfprintf' referenced from C:\HARBOUR\LIB 
> \HBCOMMON.LIB|hbtrace
> Error: Unresolved external '_fflush' referenced from C:\HARBOUR\LIB 
> \HBCOMMON.LIB|hbtrace
> Error: Unresolved external '_HB_FUN_GETPRINTERS' referenced from C: 
> \CLIP52\LAVORI\MASSIMO\ARCA\OBJ\MAX26.OBJ
> Error: Unresolved external '_HB_FUN_MSGINFO' referenced from C: 
> \CLIP52\LAVORI\MASSIMO\ARCA\OBJ\MAX26.OBJ
> Error: Unresolved external '_HB_FUN_GETDEFAULTPRINTER' referenced  
> from C:\CLIP52\LAVORI\MASSIMO\ARCA\OBJ\MAX26.OBJ
> Error: Unresolved external '_HB_FUN_PRINTFILERAW' referenced from C: 
> \CLIP52\LAVORI\MASSIMO\ARCA\OBJ\MAX26.OBJ
> Error: Unresolved external '_HB_FUN_MSGSTOP' referenced from C: 
> \CLIP52\LAVORI\MASSIMO\ARCA\OBJ\MAX26.OBJ
> Error: Unresolved external '_strrchr' referenced from C:\HARBOUR\LIB 
> \HBDEBUG.LIB|dbgentry
> Error: Unresolved external '_isalpha' referenced from C:\HARBOUR\LIB 
> \HBDEBUG.LIB|dbgentry
> Error: Unresolved external '_isupper' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|is
> Error: Unresolved external '_islower' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|is
> Error: Unresolved external '_system' referenced from C:\HARBOUR\LIB 
> \HBRTL.LIB|run
>
> Massimo Belgrano
> Albo Nazionale Informatici Professionisti n? 2620
> Socio n? 2843 Associazione Informatici Professionisti
> <image001.gif>
> Analisi e sviluppo software per Lan e Web
> Consulenza informatica - Formazione
> Delta Informatica S.r.l.  http://www.deltain.it
> Via Torelli , 31 - 28100 Novara - Tel: 0321/30281
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From myorg63 at mail.ru  Mon Sep 22 06:33:58 2008
From: myorg63 at mail.ru (Petr Chornyj)
Date: Mon Sep 22 06:34:04 2008
Subject: [Harbour] [SPAM] Re: [SPAM] harbour 1.1 ( ChangeLog 9453
	2008-09-20 03:37:41Z druzus ) + bcc (551 or 582).
In-Reply-To: <B038D04B-3ADB-4505-B051-C4A24E6B0EBC@syenar.hu>
References: <19594721.post@talk.nabble.com>
	<20080921162613.GA3185@34-mo7-2.acn.waw.pl>
	<19596934.post@talk.nabble.com>
	<20080921215042.GB29160@34-mo7-2.acn.waw.pl>
	<20080921220426.GC29160@34-mo7-2.acn.waw.pl>
	<19604164.post@talk.nabble.com>
	<B038D04B-3ADB-4505-B051-C4A24E6B0EBC@syenar.hu>
Message-ID: <19605314.post@talk.nabble.com>


Hi Viktor,

> SET HB_MT=mt
> ..
> but HB_USER_LIBS=cw32mt.lib (or cp32mt, or cw32mti) will do for everyone.

I agree.

What about

SET HB_MT=mt   and   hbvm%MT%?

Regards,
Petr


-- 
View this message in context: http://www.nabble.com/harbour-1.1-%28-ChangeLog-9453-2008-09-20-03%3A37%3A41Z-druzus-%29-%2B-bcc-%28551-or-582%29.-tp19594721p19605314.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Mon Sep 22 06:41:40 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 06:41:50 2008
Subject: [Harbour] what is changed from clipper.lib and extend.lib
	inlibrary structure
In-Reply-To: <63A8E2D5-42FE-4F3C-A22D-A8E5A5DB3B76@syenar.hu>
References: <AFB948164110ED43B5EB849E8DEEF03815EFC1@SRV02.deltain.net>
	<63A8E2D5-42FE-4F3C-A22D-A8E5A5DB3B76@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFC8@SRV02.deltain.net>

I agree on library merge
If we adopt a standard make will be minus important library merge because the make 
But without a standard make we can more easy to use
Is Possible give either monolithic and parcelized?

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Monday, September 22, 2008 12:23 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] what is changed from clipper.lib and extend.lib inlibrary structure

I'd agree on a lib merge, but last time we've
tried it looked like something against the various
needs ppl seem to be having.

Maybe hbmacro, hblang, hbcpage, hbrdd could be
merged into hbrtl without concerns. This would be
a small step to this direction.

We'd definitely need opinions and an agreement on
it and also helping hands who can do this merge.

Brgds,
Viktor


From mbelgrano at deltain.it  Mon Sep 22 06:43:32 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 06:43:41 2008
Subject: [Harbour] RDD controversy question for all people
In-Reply-To: <48D766C1.6050502@dbtopas.lt>
References: <48D74777.5080703@marchuet.net> <48D766C1.6050502@dbtopas.lt>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFC9@SRV02.deltain.net>

Agree It's better to have one RDD containing all feature


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Mindaugas
Kavaliauskas
Sent: Monday, September 22, 2008 11:35 AM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] RDD controversy question for all people

Hi,


> View the controversy it creates, I propose to upload the following
rdds:
> 
> dbf1.c strict compatibility with C/52 (RT and Types)     DBFCDX52.LIB
> dbf2.c strict compatibility with CL53 (RT, BM and Types)DBFCDX53.LIB
> dbf3.c strict compatibility with VFoxPro (RT and Types) DBFCDXVF.LIB
> dbf4.c strict compatibility with ADS (RT and Types)     DBFCDXAD.LIB
> dbf5.c extended from the current RDD harbour         DBFCDXHB.LIB
> ...
> dbf6.c strict compatibility with DBaseIV         MDBCDX.LIB
> db1.c  strict compatibility with Paradox         DBPX.LIB
> 
> 
> this can lighten the rdds make something even faster.
> 
> All people are agree ?


I think it will make a total mess for any Harbour user. It's better to 
have one RDD containing all features. For developers - many source code 
will be duplicated in dbf*.c, and it will harder to change code.



Best regards,
Mindaugas
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Mon Sep 22 06:44:24 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 06:44:32 2008
Subject: [Harbour] [SPAM] Re: [SPAM] harbour 1.1 ( ChangeLog 9453
	2008-09-20 03:37:41Z druzus ) + bcc (551 or 582).
In-Reply-To: <19605314.post@talk.nabble.com>
References: <19594721.post@talk.nabble.com>
	<20080921162613.GA3185@34-mo7-2.acn.waw.pl>
	<19596934.post@talk.nabble.com>
	<20080921215042.GB29160@34-mo7-2.acn.waw.pl>
	<20080921220426.GC29160@34-mo7-2.acn.waw.pl>
	<19604164.post@talk.nabble.com>
	<B038D04B-3ADB-4505-B051-C4A24E6B0EBC@syenar.hu>
	<19605314.post@talk.nabble.com>
Message-ID: <20811645-8983-4E65-9AB9-0824FC48FA44@syenar.hu>

>
Hi Petr,

> Hi Viktor,
>
>> SET HB_MT=mt
>> ..
>> but HB_USER_LIBS=cw32mt.lib (or cp32mt, or cw32mti) will do for  
>> everyone.
>
> I agree.
>
> What about
>
> SET HB_MT=mt   and   hbvm%MT%?

For now, IMO it's too much combinations to maintain. Maybe
later, I still prefer one Harbour and to not put this extra
level of complexity onto the whole Harbour infrastucutre.
Although currently the speed overhead is indeed high, and
f.e. my app will crash on startup if MT is enabled (could be
anything, I didn't investigate yet), so it's not yet the time
for such "common" Harbour.

Maybe #pragma comment( lib, "cw32mt.lib" ) would be a better
solution, someone would have to test, and we should somehow
find out what are the several other "c?32mt*.lib"s, and when
to use which, but I'm not very optimistic. I'd like to keep
things as simple and easy to maintain and use as possible.

Brgds,
Viktor

From miguelangel at marchuet.net  Mon Sep 22 06:46:18 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Mon Sep 22 06:45:28 2008
Subject: [Harbour] RDD controversy question for all people
In-Reply-To: <6AE459D8-1972-41B7-8F22-D0E41F38AE25@syenar.hu>
References: <48D74777.5080703@marchuet.net>
	<6AE459D8-1972-41B7-8F22-D0E41F38AE25@syenar.hu>
Message-ID: <48D7777A.6020000@marchuet.net>

I agree with you and Mindaugas, of course.

But then we can do the next.

dbf0.c for common code

with the next rdd structure (example):

wa - dbf0 - dbf(especific) - (index)

actually there are features incompatibles between rdd
it can be solved.

* for example dBase IV use dbf with 32 field length
* rt errors
* field types.

now we are supporting the weight of all rdds in one
loosing some speed and generating some incompatibilities.

Some times is not possible to support all in one. There
are field types with diferent meanings at diferent versions
of DBF. VARLENGTH, BINARY (text & memo) fields.

etc ...


Add a level more to inheritance will allow us better cope with
all versions have a maintenance easier, and some have rdds faster and lighter.

Best regards,
Miguel Angel Marchuet


From harbour.01 at syenar.hu  Mon Sep 22 06:48:13 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 06:48:23 2008
Subject: [Harbour] what is changed from clipper.lib and extend.lib
	inlibrary structure
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFC8@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EFC1@SRV02.deltain.net>
	<63A8E2D5-42FE-4F3C-A22D-A8E5A5DB3B76@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815EFC8@SRV02.deltain.net>
Message-ID: <D42FD592-1335-47CA-A890-434D094DE262@syenar.hu>

> I agree on library merge
> If we adopt a standard make will be minus important library merge  
> because the make
> But without a standard make we can more easy to use
> Is Possible give either monolithic and parcelized?

IMO there is no point in making something
simpler, if the end result will be even more
complicated.

IOW, if we do some merge, we should do so without
any bad side-effects and it should make things
simpler and better for everyone, therefore if
we merge we should drop the separate libs, that's
the only point of such move.

Maintaining both just makes build process even
longer and creates new questions for all users.

BTW, with harbour.dll we actually do have a merged
lib already. I personally don't like .dlls, but this
may be an existing solution for some.

Brgds,
Viktor

From miguelangel at marchuet.net  Mon Sep 22 06:54:35 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Mon Sep 22 06:53:44 2008
Subject: [Harbour] RDD controversy question for all people
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFC9@SRV02.deltain.net>
References: <48D74777.5080703@marchuet.net> <48D766C1.6050502@dbtopas.lt>
	<AFB948164110ED43B5EB849E8DEEF03815EFC9@SRV02.deltain.net>
Message-ID: <48D7796B.3070506@marchuet.net>

Massimo Belgrano escribi?:
> Agree It's better to have one RDD containing all feature

But this is simply not possible :)

because each rdd has incompatible features with each others.
or the cost in speed is unacceptable.

For example dbase III has 10 field name length dbase IV is 32 and different structure.
Another example field type Q has different meanings between DBF of ADS and DBF of VFP
ant has too different ways to support auto incremental fields.

sometimes to be compatible with ALL is simply IMPOSSIBLE.

;)

Best regards,
Miguel Angel Marchuet
From sscc at mweb.co.za  Mon Sep 22 06:59:42 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Mon Sep 22 07:00:02 2008
Subject: [Harbour] RDD controversy question for all people
In-Reply-To: <48D7777A.6020000@marchuet.net>
References: <48D74777.5080703@marchuet.net>	<6AE459D8-1972-41B7-8F22-D0E41F38AE25@syenar.hu>
	<48D7777A.6020000@marchuet.net>
Message-ID: <48D77A9E.1020705@mweb.co.za>

Miguel Angel Marchuet wrote:

> Add a level more to inheritance will allow us better cope with
> all versions have a maintenance easier, and some have rdds faster and 
> lighter.

I know this has come up before, but I never understood the answer (or 
maybe the problem). Why don't you use inheritance for your current 
bitmap implementation of dbfcdx?

Regards
Alex
From lorenzo.fiorini at gmail.com  Mon Sep 22 07:11:35 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 22 07:11:41 2008
Subject: [Harbour] hb_wadetach vs hb_dbdetach
Message-ID: <9257026e0809220411j4e946f44jfc9a6508c3bf5e4e@mail.gmail.com>

Does hb_dbdetach supersedes hb_wadetach?

I don't have harbour/source/rdd/wadetach.c in the svn.

best regards,
Lorenzo

2008-09-20 00:42 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  + harbour/source/rdd/wadetach.c
    + added .prg functions:
         hb_waDetach( [<nWorkArea>|<cAlias>], [<xCargo>] ) -> <lSuccess>
         hb_waRequest( [<cAlias>], [<lFreeArea>], [<@xCargo>], [<lWait>] )
            -> <lSuccess>
      The first one detach workarea from current thread and move it
      to special hidden holder. Before detaching all relations (parent
      and child) to detached workarea are cleared.
      The second one restores area from the holder and attach it
      to calling thread.
    + added xBase++ compatible functions DbRelease() / DbRequest()
      xBase++ users please test. If possible please also check what xBase++
      does with relations and active RLOCKs/FLOCK on released WA.
From miguelangel at marchuet.net  Mon Sep 22 07:31:04 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Mon Sep 22 07:30:13 2008
Subject: [Harbour] RDD controversy question for all people
In-Reply-To: <48D77A9E.1020705@mweb.co.za>
References: <48D74777.5080703@marchuet.net>	<6AE459D8-1972-41B7-8F22-D0E41F38AE25@syenar.hu>	<48D7777A.6020000@marchuet.net>
	<48D77A9E.1020705@mweb.co.za>
Message-ID: <48D781F8.80809@marchuet.net>

Ok I will do it

Alex Strickland escribi?:
> Miguel Angel Marchuet wrote:
> 
>> Add a level more to inheritance will allow us better cope with
>> all versions have a maintenance easier, and some have rdds faster and 
>> lighter.
> 
> I know this has come up before, but I never understood the answer (or 
> maybe the problem). Why don't you use inheritance for your current 
> bitmap implementation of dbfcdx?
> 
> Regards
> Alex
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> __________ Informaci?n de NOD32, revisi?n 3458 (20080921) __________
> 
> Este mensaje ha sido analizado con NOD32 antivirus system
> http://www.nod32.com
> 
> 
> 

From harbour.01 at syenar.hu  Mon Sep 22 07:45:58 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 07:46:08 2008
Subject: [Harbour] MT TOFIX / TODO
In-Reply-To: <20080922004614.GA8200@34-mo7-2.acn.waw.pl>
References: <20080922004614.GA8200@34-mo7-2.acn.waw.pl>
Message-ID: <4AEB5A87-375B-4FEB-96FD-1FB3B890B26D@syenar.hu>

>
Hi Przemek,

> 1. Tracelog is not MT safe
>   BTW: By default HVM is compiled with optional .prg function call
>        tracing. This feature can be controlled (enabled/disabled) by
>        __TRACEPRGCALLS() function. If user does not want to use it
>        then he can rebuild Harbour with HB_NO_TRACE.
>        IMHO HB_NO_TRACE should be default for Harbour builds and user
>        who need it should recompile Harbour with HB_PRG_TRACE.
>        I plan to make it soon.

I agree.

> 2. DEBUGGER is not MT safe. Now do not use debugger in code with
>   more then one thread active or it will crash.
>   Before we will touch this code please think how MT debugger should
>   work.

Per thread debug windows maybe? Someone familiar with c# or
Java MT-ing could give some hints how this matter is solved
over there.

> 3. PROFILLER is not MT safe. It's optional code disabled by default.
>   Before we will touch it please think how it should work for MT
>   programs.

Something similar, each thread is getting all its information
gathered in the profiler along with its thread ID. At the end
we can get the same report as now for each thread, and maybe
- as an extra - these values could be shown in an aggregated
way for the whole application.

> 12. We should check contrib code and eliminate non MT safe code
>    or document non MT safe functions.

Yes, this will be a big one, but a good opportunity to see what
needs to be done to be MT in other apps/libs in general, too.

It would be great if everyone could/would contribute here.

Brgds,
Viktor

From mbelgrano at deltain.it  Mon Sep 22 08:05:33 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 08:05:44 2008
Subject: [Harbour] RDD controversy question for all people
In-Reply-To: <48D7796B.3070506@marchuet.net>
References: <48D74777.5080703@marchuet.net>
	<48D766C1.6050502@dbtopas.lt><AFB948164110ED43B5EB849E8DEEF03815EFC9@SRV02.deltain.net>
	<48D7796B.3070506@marchuet.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFCA@SRV02.deltain.net>

Afaik Xbase++ and harbour have one RDD/DBE for dbf layer and are compatible with 99% of other engine

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Miguel Angel Marchuet
Sent: Monday, September 22, 2008 12:55 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] RDD controversy question for all people

Massimo Belgrano escribi?:
> Agree It's better to have one RDD containing all feature

But this is simply not possible :)

because each rdd has incompatible features with each others.
or the cost in speed is unacceptable.

For example dbase III has 10 field name length dbase IV is 32 and different structure.
Another example field type Q has different meanings between DBF of ADS and DBF of VFP
ant has too different ways to support auto incremental fields.

sometimes to be compatible with ALL is simply IMPOSSIBLE.

;)

Best regards,
Miguel Angel Marchuet
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Mon Sep 22 08:16:28 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 08:16:38 2008
Subject: [Harbour] MT TOFIX / TODO
In-Reply-To: <20080922004614.GA8200@34-mo7-2.acn.waw.pl>
References: <20080922004614.GA8200@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFCB@SRV02.deltain.net>

Compliment Genius

Can i give you some little clarification regarding "multi windows interface for thread "
      TODO: CTWIN is not MT safe yet - it will be updated together
            with core GT when we add multi window interface for
            thread with own console window.
I admit that I have same project where "multi windows" will be very useful

How a clipper developer can help you?
Can I help you collecting post regarding MT  and sending you for using as basis for documentation?

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Monday, September 22, 2008 2:46 AM
To: Harbour Project Main Developer List.
Subject: [Harbour] MT TOFIX / TODO

Hi all,

Here is a list of things which should be fixed or added
in Harbour MT mode. I plan to make most of them soon but
I think it's good to document them now to avoid possible
problems or confusions.
In few cases I do not know if I will want to resolve them
for MT mode, f.e. investing time in MT safe profiler code.
Maybe I'll simply always disable it in MT builds.

1. Tracelog is not MT safe
   BTW: By default HVM is compiled with optional .prg function call
        tracing. This feature can be controlled (enabled/disabled) by
        __TRACEPRGCALLS() function. If user does not want to use it
        then he can rebuild Harbour with HB_NO_TRACE.
        IMHO HB_NO_TRACE should be default for Harbour builds and user
        who need it should recompile Harbour with HB_PRG_TRACE.
        I plan to make it soon.
2. DEBUGGER is not MT safe. Now do not use debugger in code with
   more then one thread active or it will crash.
   Before we will touch this code please think how MT debugger should
   work.
3. PROFILLER is not MT safe. It's optional code disabled by default.
   Before we will touch it please think how it should work for MT
   programs.
4. There is possible race condition in hb_threadWaitForAll() and
   hb_threadTerminateAll() - it's possible that they will finish
   and new HVM thread will be created in a while. It may happen
   when one of child thread begin to starts new thread and then is
   terminated. Both functions can finished waiting for loop for
   existing threads before the new one will be registered. It
   has to be fixed and I'll make it ASAP
5. hb_threadQuitRequest() can be ignored by thread in some cases
   due to race condition. It may happen if thread will overwrite
   request send by caller simultaneously, f.e. by BREAK.
6. There is possible race condition when class function is
   called 1-st time to create new object. It's possible that
   two threads will try to register the same class. It has to
   be fixed.
7, HB_LIBLOAD()/__HRBLOAD() may not be MT safe in some cases.
   Before they will not be resolved please try to not use this
   functions when other threads are executed.
8. It will be good to add user functions to resize class and RDD
   node arrays for situation when user will want to use more classes
   or RDDs registered at runtime by threads then set by default.
9. We should use hb_vmUnlock()/hb_vmLock() with hb_vmRequestQuerry()
   checking inside hbinet.c
10. Add protection for single GT access from different threads.
11. We need our own file lock server for aliased and MT workareas
    synchronization in POSIX systems 
12. We should check contrib code and eliminate non MT safe code
    or document non MT safe functions.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From toninhofwi at yahoo.com.br  Mon Sep 22 08:27:12 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Sep 22 08:23:05 2008
Subject: [Harbour] 2008-09-22 04:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080922022742.GA4375@34-mo7-2.acn.waw.pl>
References: <20080922022742.GA4375@34-mo7-2.acn.waw.pl>
Message-ID: <9n3fd41httcgjmr8jjd4ddgck132jr15m6@4ax.com>

>2008-09-22 04:27 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/rtl/hbinet.c
>    ! fixed typo in previous commit which broke MS-Win builds
>    * check hb_vmReaquestQuery() after executing use codeblocks
>

Przemek thanks, but now, I have this error:

source\rtl\hbinet.c:
Error E2140 source\rtl\hbinet.c 354: Declaration is not allowed here
in function hb_getHosts
*** 1 errors in Compile ***

** error 2 ** deleting obj\b32\hbinet.obj



Regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From mbelgrano at deltain.it  Mon Sep 22 08:26:33 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 08:26:52 2008
Subject: [Harbour] inheritance in harbour
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFCC@SRV02.deltain.net>

can used inheritance in harbour for Inherit a rdd or inherit a GT?
Will harbour suggest a standard way for inherit GT/RDD features rather
than keeping a local copy of it? .
So harbour can grow Without duplicating code


Massimo Belgrano

From sscc at mweb.co.za  Mon Sep 22 08:39:35 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Mon Sep 22 08:41:47 2008
Subject: [Harbour] inheritance in harbour
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFCC@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EFCC@SRV02.deltain.net>
Message-ID: <48D79207.5090409@mweb.co.za>

Massimo Belgrano wrote:

> can used inheritance in harbour for Inherit a rdd or inherit a GT?
> Will harbour suggest a standard way for inherit GT/RDD features rather
> than keeping a local copy of it? .
> So harbour can grow Without duplicating code

You can inherit already. I am sketchy on the details but basically 
because it is C and it is not an OO language, there is a table of 
function addresses. You inherit (copy) the table and override the 
function addresses with your own function addresses, and then those 
are what is called in "your" copy.

Have a look at the RDD code. There are also types (function 
signatures) so that you have basic type checking support in your 
"override" functions.

This is (very basically) what C++ does with the "this" pointer for 
objects, it allows the function addresses to be looked up in the vtable.

Regards
Alex
From harbour.01 at syenar.hu  Mon Sep 22 08:44:32 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 08:44:41 2008
Subject: [Harbour] 2008-09-21 20:29 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <19601498.post@talk.nabble.com>
References: <19601498.post@talk.nabble.com>
Message-ID: <04920F8E-4A1F-4BF5-B559-09F9E54B84B9@syenar.hu>

Hi Pritpal,

>    ; TOFIX: HBWhat.lib is not usable as is still.
>      Viktor, please examine these two functions in wincorec.c
>         HB_FUNC( WHT__GETDLGPROC )
>         BOOL CALLBACK __DlgProc( H... )
>      where I have changed the casts to original code. Only then
>      I could get it worked. It is only for WHT_DialogBox() and
>      I am sure until we fix it no other component will work.
>      It should be easy, IMO, just I do not know the whole story.
>      Probably the above change will not let HbWhat to be compliled
>      by other compilers or they will produce warnings.

Okay, I may check this later, but it's difficult without
test code.

Anyway I'd prefer if you could maintain this, and
I'd appreciate if your could even fix it where may
got broken, since you know this lib much better
than anyone else.

For the story, basically it was not about warnings, it
was about general 64-bit Windows compatibility. When you
compile it with 64-bit MSVC compiler, you'll get warnings
of course and these may help finding places with potential
problems.

Generally speaking most problems were due to Windows
handles (pointers), LPARAM, WPARAM, LRESULT being
64-bit values, while in hbwhat code these were stored and
passed as longs (and sometimes as ints). longs/ints in
64-bit Windows are still 32-bit, so truncation would
occur which can easily be a problem. To fix that, all
places where hbwhat code uses long/int should have been
changed to variables and APIs passing 64-bit values.
This typically means to change hb_parnl() to hb_parnint()/hb_parptr(),
and hb_retnl() to hb_retnint()/hb_retptr(). Plus add the
required casts (since *int() are counting as values not
pointers), and where pointer arithmetic is done.

That being said, the problem in hand is probably that
WHT__GETDLGPROC() was using an explicit hb_retptr()
call, while it should have been HB_RETWI( __DlgProc ).

Please replace current hb_retnl( ( ULONG ) __DlgProc )
with hb_retnint( __DlgProc ) and see if it works.

BTW, may I kindly ask you to use ANSI comments instead
of C++ style ones.

Brgds,
Viktor

From paul.strand8 at gmail.com  Mon Sep 22 08:45:14 2008
From: paul.strand8 at gmail.com (Paul Strand)
Date: Mon Sep 22 08:45:20 2008
Subject: [Harbour] Make_gnu and Mingw
In-Reply-To: <A12BB9AE-B302-460C-9B08-C608BDD80E46@syenar.hu>
References: <20080916185935.GA19252@34-mo7-2.acn.waw.pl>
	<004901c91830$f06f90b0$bb001aac@AGSoft.local>
	<20080916200020.GA10466@34-mo7-2.acn.waw.pl>
	<8C1532C5C96B4D9E8263B2F6445901DE@pepeluis>
	<FBDC288E86804829B14A98B130479760@pepeluis>
	<A12BB9AE-B302-460C-9B08-C608BDD80E46@syenar.hu>
Message-ID: <679aaa3d0809220545t2ba9a8cav571e583cce37d470@mail.gmail.com>

Mr. Viktor,

I have found that I have to link libgtwin.a and libgtgui.a for mingw

are they both required ? I thought that libgtwin.a was not needed for gui mode

Paul
From harbour.01 at syenar.hu  Mon Sep 22 08:47:12 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 08:47:23 2008
Subject: [Harbour] 2008-09-21 20:29 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <04920F8E-4A1F-4BF5-B559-09F9E54B84B9@syenar.hu>
References: <19601498.post@talk.nabble.com>
	<04920F8E-4A1F-4BF5-B559-09F9E54B84B9@syenar.hu>
Message-ID: <6CA071D3-5B7B-45CF-AA42-8A329D665113@syenar.hu>

>
Hi Pritpal,

(small typo fixed below)

> That being said, the problem in hand is probably that
> WHT__GETDLGPROC() was using an explicit hb_retptr()
> call, while it should have been HB_RETWI( __DlgProc ).
>
> Please replace current hb_retnl( ( ULONG ) __DlgProc )
> with hb_retnint( __DlgProc ) and see if it works.

with HB_RETWI( __DlgProc ) of course.

Brgds,
Viktor

From mbelgrano at deltain.it  Mon Sep 22 08:47:27 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 08:47:39 2008
Subject: [Harbour] inheritance in harbour
In-Reply-To: <48D79207.5090409@mweb.co.za>
References: <AFB948164110ED43B5EB849E8DEEF03815EFCC@SRV02.deltain.net>
	<48D79207.5090409@mweb.co.za>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFCD@SRV02.deltain.net>

Thanks alex

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Alex
Strickland
Sent: Monday, September 22, 2008 2:40 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] inheritance in harbour

Massimo Belgrano wrote:

> can used inheritance in harbour for Inherit a rdd or inherit a GT?
> Will harbour suggest a standard way for inherit GT/RDD features rather
> than keeping a local copy of it? .
> So harbour can grow Without duplicating code

You can inherit already. I am sketchy on the details but basically 
because it is C and it is not an OO language, there is a table of 
function addresses. You inherit (copy) the table and override the 
function addresses with your own function addresses, and then those 
are what is called in "your" copy.

Have a look at the RDD code. There are also types (function 
signatures) so that you have basic type checking support in your 
"override" functions.

This is (very basically) what C++ does with the "this" pointer for 
objects, it allows the function addresses to be looked up in the vtable.

Regards
Alex
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Mon Sep 22 08:49:27 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 08:49:48 2008
Subject: [Harbour] hb_wadetach vs hb_dbdetach
In-Reply-To: <9257026e0809220411j4e946f44jfc9a6508c3bf5e4e@mail.gmail.com>
References: <9257026e0809220411j4e946f44jfc9a6508c3bf5e4e@mail.gmail.com>
Message-ID: <20080922124927.GA15107@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Lorenzo Fiorini wrote:

Hi Lorenzo.

> Does hb_dbdetach supersedes hb_wadetach?
> I don't have harbour/source/rdd/wadetach.c in the svn.

Sorry it was my mistake. The 1-st version was using 'wa' prefix
then I decided to change it to 'db' before committing but I
forgot to update ChangeLog files. Finlay we have hb_dbDetach()
and hb_dbRequest() in harbour/source/rdd/dbdetach.c.
In one of next commits I'll correct the ChangeLog entry.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Sep 22 08:56:39 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 08:56:58 2008
Subject: [Harbour] SIGFPE during build of hbtest
In-Reply-To: <48D7598D.9060302@libero.it>
References: <48D7598D.9060302@libero.it>
Message-ID: <20080922125639.GB15107@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Maurilio Longo wrote:

Hi Maurilio,

> I'm trying to buil harbour on OS/2 with GCC, I'm getting this:

> ../../../../source/main/os2/gcc/harbour.exe ../../rt_hvma.prg -n -q0 -w3 -es2 -k
> m -I../../../../include
> Killed by SIGFPE
> pid=0x62a5 ppid=0x628a tid=0x0001 slot=0x00e3 pri=0x0200 mc=0x0001
> E:\REPOSITORY\HARBOUR-SVN\SOURCE\MAIN\OS2\GCC\HARBOUR.EXE
> LIBC063 0:0005547a
> cs:eip=005b:1d67547a      ss:esp=0053:0217eab0      ebp=0217eb28
>  ds=0053      es=0053      fs=150b      gs=0000     efl=00010206
> eax=00000000 ebx=40100000 ecx=40100000 edx=00000000 edi=40100000 esi=40100000
> Process dumping was disabled, use DUMPPROC / PROCDUMP to enable it.
> make[1]: *** [rt_hvma.c] Error 127
> make[1]: Leaving directory `/repository/harbour-svn/utils/hbtest/os2/gcc'
> make: *** [descend] Error 2
> Is there something already known here 

I see it 1-st time. I'm using about 10 different GCC builds and
I've never noticed this problem. I also do not remember that
David have ever reported sth like that.

> or do I have to build it with full debug
>  info to get a stack trace?

If you can then it would greatly help to locate the problem.

> Every thing else seems to build correctly, though.

It's possible that this problem is local to GCC builds anyhow
it should be located and fixed. But I will need C call stack
to say sth more. I've just made some tests in Linux and valgrind
and rt_hvma.prg is compiled correctly without any problems.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Sep 22 09:09:45 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 09:10:06 2008
Subject: [Harbour] 2008-09-22 02:34 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48D74DAF.4060100@dbtopas.lt>
References: <20080922003439.GA5240@34-mo7-2.acn.waw.pl>
	<48D74DAF.4060100@dbtopas.lt>
Message-ID: <20080922130945.GC15107@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

>>     + added .prg function hb_threadSelf() -> <pThID> | NIL
>>       It returns thread ID pointer variable or NIL when thread was
>>       registered without it (main thread and some 3-rd party threads
>>       created by C API)
> Can main thread be terminated after child thread? Can child process wait 
> for exit of main thread (let's say main thread do some initialization only) 
> and child continue to do the rest job? In this case we need 
> hb_threadJoin(pMainThread), but it could not be obtained by 
> hb_threadSelf().

Main thread is a little bit specific.
When it terminates or use QUIT command then QUIT request is
sent to all other threads and it waits for their termination.
QUIT in other threads terminates only calling thread.
hb_threadWaitForAll() and hb_threadTerminateAll() can be executed
only by main thread. They are ignored when other thread call them.
The main thread cannot be terminated by hb_threadQuitRequest().
All of the above are only my own decisions but such scheme may
help when you try to use HVM locally embedded in other project
which call hb_vmInit() / hb_vmQuit()

> P.S. is it ok, that hb_vmSuspendThreads() returns from inside of 
> HB_VM_LOCK/HB_VM_UNLOCK?

It's correct. HB_VM_UNLOCK is called by hb_vmResumeThreads().
It means that each code which uses hb_vmSuspendThreads() has to
check return value and execute hb_vmResumeThreads(), f.e.:

   if( hb_vmSuspendThreads( TRUE ) )
   {
      [..do.someting..]

      hb_vmResumeThreads();
   }

In the future maybe I'll add also .prg functions with the same
functionality and in such case the mutex will be unlocked. Anyhow
until our own and most popular 3-rd party code will not be updated
to play fair with MT HVM then such function in user space can simply
lock the HVM so I'm waiting with this yet.

best regards,
Przemek
From mbelgrano at deltain.it  Mon Sep 22 09:16:42 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 09:16:53 2008
Subject: [Harbour] a tools For our administrators
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFCE@SRV02.deltain.net>

  Package name    : releaseforge   Version: 1.3 

  Upstream Author : Phil Schwartz <pschwa...@mailzilla.net> 

  URL             : http://releaseforge.sourceforge.net/  

  License         : GPL 

  Description     : alternative to SourceForge's File Release System
(FRS) 

 An open source utility designed for the administrators and 

 release engineers of SourceForge projects. ReleaseForge allows 

 you to easily create new SourceForge project releases and edit 

 existing releases in a quicker and friendlier manner than the 

 usual SourceForge web interface. After using ReleaseForge once, 

 you'll wonder how you ever could've lived without it. 

 To use this package, you must already have an account with 

 SourceForge and have a project hosted with them to release 

 files. 

 For more information: http://releaseforge.sourceforge.net  

 

 

I cise as sourceforge alternative

  1  http://gforge.org 

  2. https://launchpad.net 

  3. http://ospdev.net 

 

Massimo Belgrano

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080922/305e275b/attachment.html
From arcadia2 at sbcglobal.net  Mon Sep 22 09:17:20 2008
From: arcadia2 at sbcglobal.net (bill robertson)
Date: Mon Sep 22 09:17:29 2008
Subject: [Harbour] hbinet.c problem with windows and bcc32
Message-ID: <677D89664639469790C175350AAF1694@billws>

Cannot get a clean compile in Harbour with windows and bcc32. Get an error 
at line 354 stating that ulong uladdr can't be placed here. The problem is 
that hb_vmUnlock(); at line 350 makes line 354 invalid.

Starting at line 350 in hbinet.c

   /* TOFIX: make it MT safe */

------> the placement here is makes the defined section below invalid ----> 
hb_vmUnlock();

   /* let's see if name is an IP address; not necessary on Linux */
#if defined(HB_OS_WIN_32) || defined(HB_OS_OS2)
   ULONG ulAddr;

   ulAddr = inet_addr( name );
   if( ulAddr == INADDR_NONE )
   {
      if( strcmp( "255.255.255.255", name ) == 0 )
      {
         Host = gethostbyaddr( (const char*) &ulAddr, sizeof( ulAddr ), 
AF_INET );
      }
   }
   else
   {
      Host = gethostbyaddr( (const char*)  &ulAddr, sizeof( ulAddr ), 
AF_INET );
   }
#endif

From harbour.01 at syenar.hu  Mon Sep 22 09:17:35 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 09:17:45 2008
Subject: [Harbour] Make_gnu and Mingw
In-Reply-To: <679aaa3d0809220545t2ba9a8cav571e583cce37d470@mail.gmail.com>
References: <20080916185935.GA19252@34-mo7-2.acn.waw.pl>
	<004901c91830$f06f90b0$bb001aac@AGSoft.local>
	<20080916200020.GA10466@34-mo7-2.acn.waw.pl>
	<8C1532C5C96B4D9E8263B2F6445901DE@pepeluis>
	<FBDC288E86804829B14A98B130479760@pepeluis>
	<A12BB9AE-B302-460C-9B08-C608BDD80E46@syenar.hu>
	<679aaa3d0809220545t2ba9a8cav571e583cce37d470@mail.gmail.com>
Message-ID: <BAAA2268-C4A6-4C37-A27A-BF5D21CA5381@syenar.hu>

Hi Paul,

Pls use this in your app code:

---
PROCEDURE HB_GTSYS()
    REQUEST HB_GT_GUI
    RETURN

PROCEDURE HB_GT_GUI_DEFAULT()
    RETURN
---

And you won't need it.

[ All other methods circulating on the list are unnecessarily
complicated and with side-effects. ]

Brgds,
Viktor

On 2008.09.22., at 14:45, Paul Strand wrote:

> Mr. Viktor,
>
> I have found that I have to link libgtwin.a and libgtgui.a for mingw
>
> are they both required ? I thought that libgtwin.a was not needed  
> for gui mode
>
> Paul
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Mon Sep 22 09:24:04 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 09:24:24 2008
Subject: [Harbour] 2008-09-22 15:23 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080922132404.GA27328@34-mo7-2.acn.waw.pl>

2008-09-22 15:23 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/hbinet.c
    ! fixed W32 compilation

best regards
Przemek
From mbelgrano at deltain.it  Mon Sep 22 09:29:31 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 09:29:46 2008
Subject: [Harbour] Make_gnu and Mingw
In-Reply-To: <BAAA2268-C4A6-4C37-A27A-BF5D21CA5381@syenar.hu>
References: <20080916185935.GA19252@34-mo7-2.acn.waw.pl><004901c91830$f06f90b0$bb001aac@AGSoft.local><20080916200020.GA10466@34-mo7-2.acn.waw.pl><8C1532C5C96B4D9E8263B2F6445901DE@pepeluis><FBDC288E86804829B14A98B130479760@pepeluis><A12BB9AE-B302-460C-9B08-C608BDD80E46@syenar.hu><679aaa3d0809220545t2ba9a8cav571e583cce37d470@mail.gmail.com>
	<BAAA2268-C4A6-4C37-A27A-BF5D21CA5381@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFCF@SRV02.deltain.net>

So ia not good this 
   ANNOUNCE GTSYS
   ANNOUNCE HB_GT_SYS
   REQUEST HB_GT_WIN
   REQUEST HB_GT_WVT
   REQUEST HB_GT_STD
   REQUEST HB_GT_GUI
   REQUEST HB_GT_VWT_DEFAULT

Must I replace With follow?

PROCEDURE HB_GTSYS()
   REQUEST HB_GT_WIN
   REQUEST HB_GT_WVT
   REQUEST HB_GT_STD
   REQUEST HB_GT_GUI
    RETURN

PROCEDURE HB_GT_VWT_DEFAULT()
    RETURN

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Monday, September 22, 2008 3:18 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Make_gnu and Mingw

Hi Paul,

Pls use this in your app code:

---
PROCEDURE HB_GTSYS()
    REQUEST HB_GT_GUI
    RETURN

PROCEDURE HB_GT_GUI_DEFAULT()
    RETURN
---

And you won't need it.

[ All other methods circulating on the list are unnecessarily
complicated and with side-effects. ]

Brgds,
Viktor

On 2008.09.22., at 14:45, Paul Strand wrote:

> Mr. Viktor,
>
> I have found that I have to link libgtwin.a and libgtgui.a for mingw
>
> are they both required ? I thought that libgtwin.a was not needed  
> for gui mode
>
> Paul
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Mon Sep 22 10:14:46 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 10:15:10 2008
Subject: [Harbour] Re: 2008-09-18 01:17 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48D2DBC0.9010200@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48D2DBC0.9010200@mail.udg.mx>
Message-ID: <20080922141446.GA12555@34-mo7-2.acn.waw.pl>

On Thu, 18 Sep 2008, David Arturo Macias Corona wrote:

Hi David,

> Below are results of current Harbour under eComStation 1.2MR
> gcc 3.3.5
> b) speedtst.prg
> ST
>   total application time:                              46.99
>   total real time:                                     46.99
> MT
>   total application time:                              67.05
>   total real time:                                     67.05
> before:
>   total application time:                             135.88
>   total real time:                                    135.88
> ST keep same as previous, but MT fall from 135.88 to 67.05
>  50 % faster  :-)
> Do you expected more or less ?

Many thanks for your tests.
The speed difference was the cost of using mutexes to protect
access to reference counters. As you can see they are very slow
in OS2 - much slower then futexes in Linux and critical sections
in Windows. Using assembler inlined code for atomic incrementation/
decrementation of reference counters greatly improved the speed
and reduce MT HVM overhead from ~89 sec. to ~20 sec. so the real
speed improvement calculated only for MT overhead is much better.
Now we can try to reduce the rest from this 20 sec. In OS2 it should
be possible to nicely use stack macros even without native compiler
TLS support. I'll make such modification in a while and I would like
to ask you to repeat the speedtst.prg tests with new SVN code.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Sep 22 10:15:09 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 10:15:30 2008
Subject: [Harbour] 2008-09-22 16:14 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080922141509.GA7111@34-mo7-2.acn.waw.pl>

2008-09-22 16:14 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbstack.h
  * harbour/source/vm/estack.c
    + added support for using stack macros without native compiler TLS
      support in MT mode.
    * enabled stack macros by default for OS2 MT builds
      David, if possible please try speedtst.prg with current MT HVM

best regards
Przemek
From druzus at acn.waw.pl  Mon Sep 22 10:19:13 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 10:19:32 2008
Subject: [Harbour] Make_gnu and Mingw
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFCF@SRV02.deltain.net>
References: <BAAA2268-C4A6-4C37-A27A-BF5D21CA5381@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815EFCF@SRV02.deltain.net>
Message-ID: <20080922141912.GA19815@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Massimo Belgrano wrote:
> So ia not good this 
>    ANNOUNCE GTSYS

This is not necessary in Harbour.

>    ANNOUNCE HB_GT_SYS
>    REQUEST HB_GT_WIN
>    REQUEST HB_GT_WVT
>    REQUEST HB_GT_STD
>    REQUEST HB_GT_GUI
>    REQUEST HB_GT_VWT_DEFAULT

That's OK.

> Must I replace With follow?
> PROCEDURE HB_GTSYS()
>    REQUEST HB_GT_WIN
>    REQUEST HB_GT_WVT
>    REQUEST HB_GT_STD
>    REQUEST HB_GT_GUI
>     RETURN
> PROCEDURE HB_GT_VWT_DEFAULT()
>     RETURN

No. Both gives functionally the same effect.

best regards,
Przemek
From paul.strand8 at gmail.com  Mon Sep 22 10:21:18 2008
From: paul.strand8 at gmail.com (Paul Strand)
Date: Mon Sep 22 10:21:25 2008
Subject: [Harbour] Make_gnu and Mingw
In-Reply-To: <BAAA2268-C4A6-4C37-A27A-BF5D21CA5381@syenar.hu>
References: <20080916185935.GA19252@34-mo7-2.acn.waw.pl>
	<004901c91830$f06f90b0$bb001aac@AGSoft.local>
	<20080916200020.GA10466@34-mo7-2.acn.waw.pl>
	<8C1532C5C96B4D9E8263B2F6445901DE@pepeluis>
	<FBDC288E86804829B14A98B130479760@pepeluis>
	<A12BB9AE-B302-460C-9B08-C608BDD80E46@syenar.hu>
	<679aaa3d0809220545t2ba9a8cav571e583cce37d470@mail.gmail.com>
	<BAAA2268-C4A6-4C37-A27A-BF5D21CA5381@syenar.hu>
Message-ID: <679aaa3d0809220721o3671b096o7aa88c3f0788ae72@mail.gmail.com>

Mr. Viktor,

gcc reports this link error:

c:\harbour\lib\w32\mingw32/libgtgui.a(gtgui.o):gtgui.c:(.text+0x1b9):
multiple definition of `HB_FUN_HB_GT_GUI_DEFAULT'

seems there is something wrong.

Paul

> Pls use this in your app code:
>
> ---
> PROCEDURE HB_GTSYS()
>   REQUEST HB_GT_GUI
>   RETURN
>
> PROCEDURE HB_GT_GUI_DEFAULT()
>   RETURN
> ---
>
> And you won't need it.
>
> [ All other methods circulating on the list are unnecessarily
> complicated and with side-effects. ]
From mbelgrano at deltain.it  Mon Sep 22 10:24:27 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 10:24:39 2008
Subject: [Harbour] Re: 2008-09-18 01:17 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20080922141446.GA12555@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx><48D2DBC0.9010200@mail.udg.mx>
	<20080922141446.GA12555@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFD0@SRV02.deltain.net>

What about add to speedtest 
Set alternate to sppedtest.log ADDITIVE 
And //INFO information?


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Monday, September 22, 2008 4:15 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Re: 2008-09-18 01:17 UTC+0200 Przemyslaw Czerpak(druzus/at/priv.onet.pl)

On Thu, 18 Sep 2008, David Arturo Macias Corona wrote:

Hi David,

> Below are results of current Harbour under eComStation 1.2MR
> gcc 3.3.5
> b) speedtst.prg
> ST
>   total application time:                              46.99
>   total real time:                                     46.99
> MT
>   total application time:                              67.05
>   total real time:                                     67.05
> before:
>   total application time:                             135.88
>   total real time:                                    135.88
> ST keep same as previous, but MT fall from 135.88 to 67.05
>  50 % faster  :-)
> Do you expected more or less ?

Many thanks for your tests.
The speed difference was the cost of using mutexes to protect
access to reference counters. As you can see they are very slow
in OS2 - much slower then futexes in Linux and critical sections
in Windows. Using assembler inlined code for atomic incrementation/
decrementation of reference counters greatly improved the speed
and reduce MT HVM overhead from ~89 sec. to ~20 sec. so the real
speed improvement calculated only for MT overhead is much better.
Now we can try to reduce the rest from this 20 sec. In OS2 it should
be possible to nicely use stack macros even without native compiler
TLS support. I'll make such modification in a while and I would like
to ask you to repeat the speedtst.prg tests with new SVN code.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From paul.strand8 at gmail.com  Mon Sep 22 10:26:33 2008
From: paul.strand8 at gmail.com (Paul Strand)
Date: Mon Sep 22 10:26:41 2008
Subject: [Harbour] Make_gnu and Mingw
In-Reply-To: <20080922141912.GA19815@34-mo7-2.acn.waw.pl>
References: <BAAA2268-C4A6-4C37-A27A-BF5D21CA5381@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815EFCF@SRV02.deltain.net>
	<20080922141912.GA19815@34-mo7-2.acn.waw.pl>
Message-ID: <679aaa3d0809220726w36ca488dt6914347d370a9a38@mail.gmail.com>

Mr. Przemek,

Your suggestion solved it, thanks:

      ANNOUNCE HB_GT_SYS
      REQUEST HB_GT_GUI
      REQUEST HB_GT_GUI_DEFAULT

Paul
From harbour.01 at syenar.hu  Mon Sep 22 10:25:32 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 10:26:55 2008
Subject: [Harbour] Make_gnu and Mingw
In-Reply-To: <679aaa3d0809220721o3671b096o7aa88c3f0788ae72@mail.gmail.com>
References: <20080916185935.GA19252@34-mo7-2.acn.waw.pl>
	<004901c91830$f06f90b0$bb001aac@AGSoft.local>
	<20080916200020.GA10466@34-mo7-2.acn.waw.pl>
	<8C1532C5C96B4D9E8263B2F6445901DE@pepeluis>
	<FBDC288E86804829B14A98B130479760@pepeluis>
	<A12BB9AE-B302-460C-9B08-C608BDD80E46@syenar.hu>
	<679aaa3d0809220545t2ba9a8cav571e583cce37d470@mail.gmail.com>
	<BAAA2268-C4A6-4C37-A27A-BF5D21CA5381@syenar.hu>
	<679aaa3d0809220721o3671b096o7aa88c3f0788ae72@mail.gmail.com>
Message-ID: <18DFF1DC-980C-4B49-9E7E-7E97107E8FDB@syenar.hu>

>
Hi Paul,

> gcc reports this link error:
>
> c:\harbour\lib\w32\mingw32/libgtgui.a(gtgui.o):gtgui.c:(.text+0x1b9):
> multiple definition of `HB_FUN_HB_GT_GUI_DEFAULT'

You'll need to remove all other solutions targeting
this same goal (requesting GTGUI and making it the
default GT), like special build switches, ANNOUNCE
HB_GT_GUI_DEFAULT and such things.

IOW, solution I wrote is the _only_ thing
you need to get GTGUI for a default Harbour build.

Brdgs,
Viktor

From druzus at acn.waw.pl  Mon Sep 22 10:37:40 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 10:38:01 2008
Subject: [Harbour] 2008-09-22 16:37 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080922143740.GA25067@34-mo7-2.acn.waw.pl>

2008-09-22 16:37 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/hbregex.c
   * added hack to force linking newer PCRE versions not the one included
     in BCC RTL when Harbour is compiled without HB_PCRE_REGEX_BCC.
     If user application will uses regex expressions (directly or indirectly
     by some RTL functions) then lining it without HBPCE should give link
     time error that pcre_config() function is missing.

best regards
Przemek
From harbour.01 at syenar.hu  Mon Sep 22 10:38:28 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 10:38:43 2008
Subject: [Harbour] Make_gnu and Mingw
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFCF@SRV02.deltain.net>
References: <20080916185935.GA19252@34-mo7-2.acn.waw.pl><004901c91830$f06f90b0$bb001aac@AGSoft.local><20080916200020.GA10466@34-mo7-2.acn.waw.pl><8C1532C5C96B4D9E8263B2F6445901DE@pepeluis><FBDC288E86804829B14A98B130479760@pepeluis><A12BB9AE-B302-460C-9B08-C608BDD80E46@syenar.hu><679aaa3d0809220545t2ba9a8cav571e583cce37d470@mail.gmail.com>
	<BAAA2268-C4A6-4C37-A27A-BF5D21CA5381@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815EFCF@SRV02.deltain.net>
Message-ID: <2F2CA9BF-CD08-428F-A765-D93457C32E01@syenar.hu>

> So ia not good this
>   ANNOUNCE GTSYS
>   ANNOUNCE HB_GT_SYS
>   REQUEST HB_GT_WIN
>   REQUEST HB_GT_WVT
>   REQUEST HB_GT_STD
>   REQUEST HB_GT_GUI
>   REQUEST HB_GT_VWT_DEFAULT
>
> Must I replace With follow?

The above has a few problems:
- REQUEST HB_GT_VWT_DEFAULT is wrong and should be ANNOUNCE.
- ANNOUNCE HB_GT_SYS is wrong and should be ANNOUNCE HB_GTSYS.
- ANNOUNCE GTSYS is not needed.
- You can only have one ANNOUNCE per .prg (Clipper compatibility)
- ANNOUNCE/REQUEST cannot be placed anywhere in the .prg code AFAIR.

It's up to everyone which method he's using in
their own code, but the one I wrote is probably the
"best practice".

It would be nice if we told this solution for those
asking for a solution to this problem.

Just to repeat:
---
PROCEDURE HB_GTSYS()
    REQUEST HB_GT_GUI
    /* Other REQUEST HB_GT_??? lines, like HB_GT_WVT, HB_GT_WIN may  
follow */
    RETURN

/* Replace GUI with the default GT name you've choosen (like WVT,  
WIN). */
PROCEDURE HB_GT_GUI_DEFAULT()
    RETURN
------

Brgds,
Viktor

>
>
> PROCEDURE HB_GTSYS()
>   REQUEST HB_GT_WIN
>   REQUEST HB_GT_WVT
>   REQUEST HB_GT_STD
>   REQUEST HB_GT_GUI
>    RETURN
>
> PROCEDURE HB_GT_VWT_DEFAULT()
>    RETURN
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org 
> ] On Behalf Of Szak?ts Viktor
> Sent: Monday, September 22, 2008 3:18 PM
> To: Harbour Project Main Developer List.
> Subject: Re: [Harbour] Make_gnu and Mingw
>
> Hi Paul,
>
> Pls use this in your app code:
>
> ---
> PROCEDURE HB_GTSYS()
>    REQUEST HB_GT_GUI
>    RETURN
>
> PROCEDURE HB_GT_GUI_DEFAULT()
>    RETURN
> ---
>
> And you won't need it.
>
> [ All other methods circulating on the list are unnecessarily
> complicated and with side-effects. ]
>
> Brgds,
> Viktor
>
> On 2008.09.22., at 14:45, Paul Strand wrote:
>
>> Mr. Viktor,
>>
>> I have found that I have to link libgtwin.a and libgtgui.a for mingw
>>
>> are they both required ? I thought that libgtwin.a was not needed
>> for gui mode
>>
>> Paul
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Sep 22 10:42:09 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 10:42:23 2008
Subject: [Harbour] Make_gnu and Mingw
In-Reply-To: <679aaa3d0809220726w36ca488dt6914347d370a9a38@mail.gmail.com>
References: <BAAA2268-C4A6-4C37-A27A-BF5D21CA5381@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815EFCF@SRV02.deltain.net>
	<20080922141912.GA19815@34-mo7-2.acn.waw.pl>
	<679aaa3d0809220726w36ca488dt6914347d370a9a38@mail.gmail.com>
Message-ID: <D722D03E-747B-4985-A3C4-FFEFBE8833B9@syenar.hu>

Notice that you most probably need Harbour to be built
with special switches to make this work. It won't work
with the default Harbour build.

Przemek, can you comment, this is a so oftenly appearing
question, that it would be nice to have a common solution.

[ my proposed one works with default builds, that's
for sure. ]

Brgds,
Viktor

On 2008.09.22., at 16:26, Paul Strand wrote:

> Mr. Przemek,
>
> Your suggestion solved it, thanks:
>
>      ANNOUNCE HB_GT_SYS
>      REQUEST HB_GT_GUI
>      REQUEST HB_GT_GUI_DEFAULT
>
> Paul
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Sep 22 10:46:36 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 10:46:52 2008
Subject: [Harbour] 2008-09-22 16:37 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080922143740.GA25067@34-mo7-2.acn.waw.pl>
References: <20080922143740.GA25067@34-mo7-2.acn.waw.pl>
Message-ID: <BF6590B1-0F31-49DD-97E6-63C6040955C3@syenar.hu>

Many thanks Przemek.

Brgds,
Viktor

On 2008.09.22., at 16:37, Przemyslaw Czerpak wrote:

> 2008-09-22 16:37 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/rtl/hbregex.c
>   * added hack to force linking newer PCRE versions not the one  
> included
>     in BCC RTL when Harbour is compiled without HB_PCRE_REGEX_BCC.
>     If user application will uses regex expressions (directly or  
> indirectly
>     by some RTL functions) then lining it without HBPCE should give  
> link
>     time error that pcre_config() function is missing.
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Mon Sep 22 10:46:40 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 10:47:04 2008
Subject: [Harbour] Make_gnu and Mingw
In-Reply-To: <2F2CA9BF-CD08-428F-A765-D93457C32E01@syenar.hu>
References: <BAAA2268-C4A6-4C37-A27A-BF5D21CA5381@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815EFCF@SRV02.deltain.net>
	<2F2CA9BF-CD08-428F-A765-D93457C32E01@syenar.hu>
Message-ID: <20080922144640.GA31928@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Szak?ts Viktor wrote:
>>   ANNOUNCE GTSYS
>>   ANNOUNCE HB_GT_SYS
>>   REQUEST HB_GT_WIN
>>   REQUEST HB_GT_WVT
>>   REQUEST HB_GT_STD
>>   REQUEST HB_GT_GUI
>>   REQUEST HB_GT_VWT_DEFAULT
>>
>> Must I replace With follow?
>
> The above has a few problems:
> - REQUEST HB_GT_VWT_DEFAULT is wrong and should be ANNOUNCE.

No it shouldn't. It's correct.
   REQUEST HB_GT_VWT_DEFAULT
also indirectly implied:
   REQUEST HB_GT_VWT 

> - ANNOUNCE HB_GT_SYS is wrong and should be ANNOUNCE HB_GTSYS.
> - ANNOUNCE GTSYS is not needed.

That's correct. I missed it in previous message.

> - You can only have one ANNOUNCE per .prg (Clipper compatibility)
> - ANNOUNCE/REQUEST cannot be placed anywhere in the .prg code AFAIR.

They can be and they do not have effect for code. Compiler does
not generate any PCODE for them. It's the matter of readability
not technical problem.

> It's up to everyone which method he's using in
> their own code, but the one I wrote is probably the
> "best practice".

Except HB_GT_*_DEFAULT usage.

> It would be nice if we told this solution for those
> asking for a solution to this problem.
> Just to repeat:
> ---
> PROCEDURE HB_GTSYS()
>    REQUEST HB_GT_GUI
>    /* Other REQUEST HB_GT_??? lines, like HB_GT_WVT, HB_GT_WIN may follow 
> */
>    RETURN
> /* Replace GUI with the default GT name you've choosen (like WVT, WIN). */
> PROCEDURE HB_GT_GUI_DEFAULT()
>    RETURN
> ------

Simpler:

   PROCEDURE HB_GTSYS()
      REQUEST HB_GT_GUI_DEFAULT

is enough.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Sep 22 11:18:45 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 11:19:03 2008
Subject: [Harbour] Make_gnu and Mingw
In-Reply-To: <20080922144640.GA31928@34-mo7-2.acn.waw.pl>
References: <BAAA2268-C4A6-4C37-A27A-BF5D21CA5381@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815EFCF@SRV02.deltain.net>
	<2F2CA9BF-CD08-428F-A765-D93457C32E01@syenar.hu>
	<20080922144640.GA31928@34-mo7-2.acn.waw.pl>
Message-ID: <1F81533F-E21D-4E78-BD27-8D645C8C3CF6@syenar.hu>

>>   PROCEDURE HB_GTSYS()
>      REQUEST HB_GT_GUI_DEFAULT

Thanks. Very strange, I've been wrong
for years regarding this, even stranger
that PROCEDURE HB_GT_WVT_DEFAULT works
for me since very long.

I'll do some tests a bit later.

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Mon Sep 22 11:30:09 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 22 11:30:15 2008
Subject: [Harbour] Remove last order added
Message-ID: <9257026e0809220830r44b9974fhc85a5876783b6183@mail.gmail.com>

I Cl*pper/DBFCDX was not possible remove an order from the list after
an OrdListAdd.

Is it still true?

best regards,
Lorenzo
From e.m.giordano at emagsoftware.it  Mon Sep 22 11:31:53 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Sep 22 11:32:01 2008
Subject: [Harbour] 2008-09-22 15:23 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20080922132404.GA27328@34-mo7-2.acn.waw.pl>
Message-ID: <61DC2092757F4859AED7F93BD1128E04@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: <harbour@harbour-project.org>
Data invio: luned? 22 settembre 2008 15.24
Oggetto: [Harbour] 2008-09-22 15:23 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> 2008-09-22 15:23 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/rtl/hbinet.c
>    ! fixed W32 compilation

Thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at acn.waw.pl  Mon Sep 22 11:49:20 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 11:49:40 2008
Subject: [Harbour] Re: 2008-09-18 01:17 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFD0@SRV02.deltain.net>
References: <20080922141446.GA12555@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815EFD0@SRV02.deltain.net>
Message-ID: <20080922154920.GA17055@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Massimo Belgrano wrote:

Hi Massimo,

> What about add to speedtest 
> Set alternate to sppedtest.log ADDITIVE 
> And //INFO information?

The information about MT mode and FM statistic is already
included in standard speedtst.prg output.
If you want to redirect speedtst.prg output to file then simply
run it with:
   ./speedtst > sppedtst.log
Anyhow if you think it's important then we can add also alternate
though in such case speedtst.prg will have to be updated to use
ConOut() instead of StdOut() otherwise it will not work. But such
modification will disable shell redirecting by > for some GTs.

best regards,
Przemek
From mbelgrano at deltain.it  Mon Sep 22 11:52:09 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 11:52:21 2008
Subject: [Harbour] Re: 2008-09-18 01:17 UTC+0200
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFD0@SRV02.deltain.net>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx><48D2DBC0.9010200@mail.udg.mx><20080922141446.GA12555@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815EFD0@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFD1@SRV02.deltain.net>

How is possible emulate //INFO 
? HB_GTVERSION(), HB_GTVERSION(1)
Harbour Terminal: Windows native console 
? hb_compiler()
Harbour 1.1.0dev (Rev. 9453)
? os()
Windows Vista 6.0.6001 Service Pack 1
? hbbuildinfo(30)
DS avail=978788KB  OS avail=2062008KB  EMM avail=0KB  MemStat:Off  MT:On


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Massimo Belgrano
Sent: Monday, September 22, 2008 4:24 PM
To: Harbour Project Main Developer List.
Subject: RE: [Harbour] Re: 2008-09-18 01:17 UTC+0200 PrzemyslawCzerpak(druzus/at/priv.onet.pl)

What about add to speedtest
Set alternate to sppedtest.log ADDITIVE And //INFO information?


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Monday, September 22, 2008 4:15 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Re: 2008-09-18 01:17 UTC+0200 Przemyslaw Czerpak(druzus/at/priv.onet.pl)

On Thu, 18 Sep 2008, David Arturo Macias Corona wrote:

Hi David,

> Below are results of current Harbour under eComStation 1.2MR gcc 3.3.5
> b) speedtst.prg
> ST
>   total application time:                              46.99
>   total real time:                                     46.99
> MT
>   total application time:                              67.05
>   total real time:                                     67.05
> before:
>   total application time:                             135.88
>   total real time:                                    135.88
> ST keep same as previous, but MT fall from 135.88 to 67.05  50 % 
> faster  :-) Do you expected more or less ?

Many thanks for your tests.
The speed difference was the cost of using mutexes to protect access to reference counters. As you can see they are very slow in OS2 - much slower then futexes in Linux and critical sections in Windows. Using assembler inlined code for atomic incrementation/ decrementation of reference counters greatly improved the speed and reduce MT HVM overhead from ~89 sec. to ~20 sec. so the real speed improvement calculated only for MT overhead is much better.
Now we can try to reduce the rest from this 20 sec. In OS2 it should be possible to nicely use stack macros even without native compiler TLS support. I'll make such modification in a while and I would like to ask you to repeat the speedtst.prg tests with new SVN code.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From lkrausem at shaw.ca  Mon Sep 22 11:52:53 2008
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Mon Sep 22 11:53:10 2008
Subject: [Harbour] RDD controversy question for all people
In-Reply-To: <48D74777.5080703@marchuet.net>
References: <48D74777.5080703@marchuet.net>
Message-ID: <48D7BF55.3080707@shaw.ca>

I like the idea too.

Miguel Angel Marchuet wrote:
> View the controversy it creates, I propose to upload the following rdds:
>
> dbf1.c strict compatibility with C/52 (RT and Types)     DBFCDX52.LIB
> dbf2.c strict compatibility with CL53 (RT, BM and Types)DBFCDX53.LIB
> dbf3.c strict compatibility with VFoxPro (RT and Types) DBFCDXVF.LIB
> dbf4.c strict compatibility with ADS (RT and Types)     DBFCDXAD.LIB
> dbf5.c extended from the current RDD harbour         DBFCDXHB.LIB
> ...
> dbf6.c strict compatibility with DBaseIV         MDBCDX.LIB
> db1.c  strict compatibility with Paradox         DBPX.LIB
>
>
> this can lighten the rdds make something even faster.
>
> All people are agree ?
>
>
> I can upload it this week.
>
> Best regards,
> Miguel Angel marchuet
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From druzus at acn.waw.pl  Mon Sep 22 11:55:25 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 11:55:45 2008
Subject: [Harbour] Remove last order added
In-Reply-To: <9257026e0809220830r44b9974fhc85a5876783b6183@mail.gmail.com>
References: <9257026e0809220830r44b9974fhc85a5876783b6183@mail.gmail.com>
Message-ID: <20080922155525.GB17055@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> I Cl*pper/DBFCDX was not possible remove an order from the list after
> an OrdListAdd.
> Is it still true?

No. in Harbour you can use ordBagClear(). AFAIR there were some
libraries for CA-Cl*pper which give that functionality for any
RDDs which supported ORDLSTDELETE() method. In SIX3 it was possible
by sx_ClearOrder( cOrdBagName ) or Sx_KillTag( .t., cOrdBagName )

best regards,
Przemek
From druzus at acn.waw.pl  Mon Sep 22 11:58:00 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 11:58:20 2008
Subject: [Harbour] Make_gnu and Mingw
In-Reply-To: <1F81533F-E21D-4E78-BD27-8D645C8C3CF6@syenar.hu>
References: <BAAA2268-C4A6-4C37-A27A-BF5D21CA5381@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815EFCF@SRV02.deltain.net>
	<2F2CA9BF-CD08-428F-A765-D93457C32E01@syenar.hu>
	<20080922144640.GA31928@34-mo7-2.acn.waw.pl>
	<1F81533F-E21D-4E78-BD27-8D645C8C3CF6@syenar.hu>
Message-ID: <20080922155800.GC17055@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Szakáts Viktor wrote:
>>>   PROCEDURE HB_GTSYS()
>>      REQUEST HB_GT_GUI_DEFAULT
> Thanks. Very strange, I've been wrong
> for years regarding this, even stranger
> that PROCEDURE HB_GT_WVT_DEFAULT works
> for me since very long.

It works but in such case does not indirectly request given
GT so you had to also use REQUEST HB_GT_WVT. And you were
using C linker which does not report multiple function definition
with your link switches.

best regards,
Przemek
From mbelgrano at deltain.it  Mon Sep 22 12:06:28 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 12:06:55 2008
Subject: [Harbour] can load always a large number of library?
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFD2@SRV02.deltain.net>

Wich disadvantage for load always this library
hbcplr.lib
hbrtl.lib
hbvm.lib
hblang.lib
hbcpage.lib
hbmacro.lib
hbcommon.lib
hbdebug.lib
hbpp.lib
hbpcre.lib
hbct.lib
hbmisc.lib
hbnf.lib
hbzlib.lib
HBMZIP.LIB
hbusrrdd.lib
hbrdd.lib
rddntx.lib
rddcdx.lib
rddfpt.lib
hbsix.lib
gtgui.lib
gtwvt.lib
gtwvg.lib
gtwin.lib
gtstd.lib
hbwIN.lib
xhb.lib
BY BCC C0W32.OBJ,CW32.LIB,IMPORT32.LIB0

Wich modification for a mt program?

What be add for not mt program
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Error: Unresolved external '__beginthreadex' referenced from
C:\HARBOUR\LIB\HBVM.LIB|thread
Error: Unresolved external '__endthreadex' referenced from
C:\HARBOUR\LIB\HBVM.LIB|thread


Massimo Belgrano

From lorenzo.fiorini at gmail.com  Mon Sep 22 12:24:19 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 22 12:24:26 2008
Subject: [Harbour] Remove last order added
In-Reply-To: <20080922155525.GB17055@34-mo7-2.acn.waw.pl>
References: <9257026e0809220830r44b9974fhc85a5876783b6183@mail.gmail.com>
	<20080922155525.GB17055@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809220924u3947464fw1797eb1179d840e7@mail.gmail.com>

On Mon, Sep 22, 2008 at 5:55 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> No. in Harbour you can use ordBagClear(). AFAIR there were some
> libraries for CA-Cl*pper which give that functionality for any
> RDDs which supported ORDLSTDELETE() method. In SIX3 it was possible
> by sx_ClearOrder( cOrdBagName ) or Sx_KillTag( .t., cOrdBagName )

Great! Sorry I completely missed it for years.

Looking in dbcmd.c I found:

HB_FUNC( ORDBAGCLEAR )
{
   AREAP pArea = ( AREAP ) hb_rddGetCurrentWorkAreaPointer();

   if( pArea )
   {
      DBORDERINFO pOrderInfo;
      memset( &pOrderInfo, 0, sizeof( DBORDERINFO ) );
      pOrderInfo.atomBagName = hb_param( 1, HB_IT_STRING );
      if( !pOrderInfo.atomBagName )
         pOrderInfo.atomBagName = hb_param( 1, HB_IT_NUMERIC );
      hb_retl( SELF_ORDLSTDELETE( pArea, &pOrderInfo ) == SUCCESS );
   }
   else
      hb_retl( FALSE );
}

does it means that I can pass the bag name OR the index number?

best regards,
Lorenzo
From druzus at acn.waw.pl  Mon Sep 22 12:29:59 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 12:30:19 2008
Subject: [Harbour] Re: 2008-09-18 01:17 UTC+0200
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFD1@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EFD0@SRV02.deltain.net>
	<AFB948164110ED43B5EB849E8DEEF03815EFD1@SRV02.deltain.net>
Message-ID: <20080922162959.GA16061@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Massimo Belgrano wrote:
> How is possible emulate //INFO 
> ? HB_GTVERSION(), HB_GTVERSION(1)
> Harbour Terminal: Windows native console 
> ? hb_compiler()
> Harbour 1.1.0dev (Rev. 9453)
> ? os()
> Windows Vista 6.0.6001 Service Pack 1
> ? hbbuildinfo(30)
> DS avail=978788KB  OS avail=2062008KB  EMM avail=0KB  MemStat:Off  MT:On

#include "hbmemory.ch"
function hb_buildInfo()
return "DS avail=" + ltrim( str( memory( HB_MEM_BLOCK ) ) ) + "KB  " + ;
       "OS avail=" + ltrim( str( memory( HB_MEM_VM ) ) ) + "KB  " + ;
       "EMM avail=" + ltrim( str( memory( HB_MEM_EMS ) ) ) + "KB  " + ;
       "MemStat:" + iif( memory( HB_MEM_USEDMAX ) > 0, "On", "Off" ) + ;
       "  MT:" + iif( hb_mtvm(), "On", "Off" )

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Mon Sep 22 12:30:44 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Sep 22 12:30:52 2008
Subject: [Harbour] My FWH apps GPF using latest SVN
Message-ID: <5114C6439EBF4520A8260C94634AF558@emag>

As subject.

Any ideas?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic

From druzus at acn.waw.pl  Mon Sep 22 12:31:58 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 12:32:18 2008
Subject: [Harbour] Remove last order added
In-Reply-To: <9257026e0809220924u3947464fw1797eb1179d840e7@mail.gmail.com>
References: <9257026e0809220830r44b9974fhc85a5876783b6183@mail.gmail.com>
	<20080922155525.GB17055@34-mo7-2.acn.waw.pl>
	<9257026e0809220924u3947464fw1797eb1179d840e7@mail.gmail.com>
Message-ID: <20080922163158.GA26107@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Lorenzo Fiorini wrote:
> Looking in dbcmd.c I found:
[...]
> does it means that I can pass the bag name OR the index number?

Yes but it will depend on RDD if numeric value will be accepted.
Some RDDs may refuse it.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Sep 22 12:33:56 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 12:34:19 2008
Subject: [Harbour] Make_gnu and Mingw
In-Reply-To: <20080922155800.GC17055@34-mo7-2.acn.waw.pl>
References: <BAAA2268-C4A6-4C37-A27A-BF5D21CA5381@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815EFCF@SRV02.deltain.net>
	<2F2CA9BF-CD08-428F-A765-D93457C32E01@syenar.hu>
	<20080922144640.GA31928@34-mo7-2.acn.waw.pl>
	<1F81533F-E21D-4E78-BD27-8D645C8C3CF6@syenar.hu>
	<20080922155800.GC17055@34-mo7-2.acn.waw.pl>
Message-ID: <B24FE197-7593-4FDE-9F1C-CE6D38BF6E64@syenar.hu>

Okay, thanks. I've updated my code, so just to
correct myself - and this is even simpler:

---
PROCEDURE HB_GTSYS()
   REQUEST HB_GT_GUI_DEFAULT
   /* Other REQUEST HB_GT_??? lines, like HB_GT_WVT, HB_GT_WIN may  
follow */
   RETURN
---

BTW, do we _really_ need HB_GT_LIB in our Harbour build files?

I'd think that since overriding the default GT at runtime
is preferred and even very easy, should we bother by
offering this as a build-time option? IMO this isn't needed,
and just creates ground for unnecessary variations.

Opinions on this?

In any case I'll move WinCE GT selection to hbgtcore.c,
and remove the unnecessary defaulting logic from non-GNU
make files.

Brgds,
Viktor

On 2008.09.22., at 17:58, Przemyslaw Czerpak wrote:

> On Mon, 22 Sep 2008, Szak?ts Viktor wrote:
>>>>  PROCEDURE HB_GTSYS()
>>>     REQUEST HB_GT_GUI_DEFAULT
>> Thanks. Very strange, I've been wrong
>> for years regarding this, even stranger
>> that PROCEDURE HB_GT_WVT_DEFAULT works
>> for me since very long.
>
> It works but in such case does not indirectly request given
> GT so you had to also use REQUEST HB_GT_WVT. And you were
> using C linker which does not report multiple function definition
> with your link switches.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Mon Sep 22 12:34:50 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 22 12:34:59 2008
Subject: [Harbour] Remove last order added
In-Reply-To: <20080922155525.GB17055@34-mo7-2.acn.waw.pl>
References: <9257026e0809220830r44b9974fhc85a5876783b6183@mail.gmail.com>
	<20080922155525.GB17055@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809220934n2b53fdaey9bf1250642df291c@mail.gmail.com>

On Mon, Sep 22, 2008 at 5:55 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> No. in Harbour you can use ordBagClear(). AFAIR there were some
> libraries for CA-Cl*pper which give that functionality for any
> RDDs which supported ORDLSTDELETE() method. In SIX3 it was possible
> by sx_ClearOrder( cOrdBagName ) or Sx_KillTag( .t., cOrdBagName )

I've tried with DBFCDX but I get only:

Error DBFCDX/0  Operation not supported
ORDBAGCLEAR(0)
CXDELETE(635)
...

I've tried passing ordname(indexord()), indexord() and dbOrderInfo(
DBOI_FULLPATH )

What am I missing?

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Mon Sep 22 12:36:59 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 22 12:37:06 2008
Subject: [Harbour] Remove last order added
In-Reply-To: <9257026e0809220934n2b53fdaey9bf1250642df291c@mail.gmail.com>
References: <9257026e0809220830r44b9974fhc85a5876783b6183@mail.gmail.com>
	<20080922155525.GB17055@34-mo7-2.acn.waw.pl>
	<9257026e0809220934n2b53fdaey9bf1250642df291c@mail.gmail.com>
Message-ID: <9257026e0809220936l4e5f08f3nbee70091be21f47c@mail.gmail.com>

On Mon, Sep 22, 2008 at 6:34 PM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com> wrote:

> I've tried with DBFCDX but I get only:

Could it be that's only supported by six driver?

best regards,
Lorenzo
From mbelgrano at deltain.it  Mon Sep 22 12:38:22 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 12:38:33 2008
Subject: [Harbour] Re: 2008-09-18 01:17
	UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20080922162959.GA16061@34-mo7-2.acn.waw.pl>
References: <AFB948164110ED43B5EB849E8DEEF03815EFD0@SRV02.deltain.net><AFB948164110ED43B5EB849E8DEEF03815EFD1@SRV02.deltain.net>
	<20080922162959.GA16061@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFD3@SRV02.deltain.net>

Very tank

Is possible also display wich is the c compiler ?


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Monday, September 22, 2008 6:30 PM
To: Harbour Project Main Developer List.
Subject: Re: RE: [Harbour] Re: 2008-09-18 01:17 UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)

On Mon, 22 Sep 2008, Massimo Belgrano wrote:
> How is possible emulate //INFO 
> ? HB_GTVERSION(), HB_GTVERSION(1)
> Harbour Terminal: Windows native console 
> ? hb_compiler()
> Harbour 1.1.0dev (Rev. 9453)
> ? os()
> Windows Vista 6.0.6001 Service Pack 1
> ? hbbuildinfo(30)
> DS avail=978788KB  OS avail=2062008KB  EMM avail=0KB  MemStat:Off  MT:On

#include "hbmemory.ch"
function hb_buildInfo()
return "DS avail=" + ltrim( str( memory( HB_MEM_BLOCK ) ) ) + "KB  " + ;
       "OS avail=" + ltrim( str( memory( HB_MEM_VM ) ) ) + "KB  " + ;
       "EMM avail=" + ltrim( str( memory( HB_MEM_EMS ) ) ) + "KB  " + ;
       "MemStat:" + iif( memory( HB_MEM_USEDMAX ) > 0, "On", "Off" ) + ;
       "  MT:" + iif( hb_mtvm(), "On", "Off" )

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From lorenzo.fiorini at gmail.com  Mon Sep 22 12:44:17 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 22 12:44:23 2008
Subject: [Harbour] Re: 2008-09-18 01:17
	UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFD3@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EFD0@SRV02.deltain.net>
	<AFB948164110ED43B5EB849E8DEEF03815EFD1@SRV02.deltain.net>
	<20080922162959.GA16061@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815EFD3@SRV02.deltain.net>
Message-ID: <9257026e0809220944o10df7ef1v5fc389838ae44852@mail.gmail.com>

On Mon, Sep 22, 2008 at 6:38 PM, Massimo Belgrano <mbelgrano@deltain.it> wrote:

> Very tank

LOL

Molto serbatoio anche a te :)))

best regards,
Lorenzo
From carlo.borelli at gmail.com  Mon Sep 22 12:47:01 2008
From: carlo.borelli at gmail.com (Carlo Borelli)
Date: Mon Sep 22 12:47:07 2008
Subject: [Harbour] can load always a large number of library?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFD2@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EFD2@SRV02.deltain.net>
Message-ID: <f60d50830809220947t4b6802e9l2950e4f2b184f988@mail.gmail.com>

If I remember correctly, you need to link BCC cw32mt library instead of cw32.

/* Se mi ricordo bene, devi linkare cw32mt al posto di cw32. */

Carlo.

2008/9/23 Massimo Belgrano <mbelgrano@deltain.it>:
> Wich disadvantage for load always this library
> hbcplr.lib
> hbrtl.lib
> hbvm.lib
> hblang.lib
> hbcpage.lib
> hbmacro.lib
> hbcommon.lib
> hbdebug.lib
> hbpp.lib
> hbpcre.lib
> hbct.lib
> hbmisc.lib
> hbnf.lib
> hbzlib.lib
> HBMZIP.LIB
> hbusrrdd.lib
> hbrdd.lib
> rddntx.lib
> rddcdx.lib
> rddfpt.lib
> hbsix.lib
> gtgui.lib
> gtwvt.lib
> gtwvg.lib
> gtwin.lib
> gtstd.lib
> hbwIN.lib
> xhb.lib
> BY BCC C0W32.OBJ,CW32.LIB,IMPORT32.LIB0
>
> Wich modification for a mt program?
>
> What be add for not mt program
> Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
> Error: Unresolved external '__beginthreadex' referenced from
> C:\HARBOUR\LIB\HBVM.LIB|thread
> Error: Unresolved external '__endthreadex' referenced from
> C:\HARBOUR\LIB\HBVM.LIB|thread
>
>
> Massimo Belgrano
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From mbelgrano at deltain.it  Mon Sep 22 12:54:59 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 12:55:11 2008
Subject: [Harbour] Re: 2008-09-18
	01:17UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0809220944o10df7ef1v5fc389838ae44852@mail.gmail.com>
References: <AFB948164110ED43B5EB849E8DEEF03815EFD0@SRV02.deltain.net><AFB948164110ED43B5EB849E8DEEF03815EFD1@SRV02.deltain.net><20080922162959.GA16061@34-mo7-2.acn.waw.pl><AFB948164110ED43B5EB849E8DEEF03815EFD3@SRV02.deltain.net>
	<9257026e0809220944o10df7ef1v5fc389838ae44852@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFD4@SRV02.deltain.net>

I have thinked Thanks but my hand have written tank
A log time ago I have written "Mery Crismas" that can be a comic effect for duble error
Perch? ? pi? vicino a "mery per sempre" che "a buon natale"
"mery per sempre" ? Un film che andava all'epoca dell'errore


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Lorenzo Fiorini
Sent: Monday, September 22, 2008 6:44 PM
To: Harbour Project Main Developer List.
Subject: Re: RE: [Harbour] Re: 2008-09-18 01:17UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)

On Mon, Sep 22, 2008 at 6:38 PM, Massimo Belgrano <mbelgrano@deltain.it> wrote:

> Very tank

LOL

Molto serbatoio anche a te :)))

best regards,
Lorenzo
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Mon Sep 22 12:58:46 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 12:59:06 2008
Subject: [Harbour] Remove last order added
In-Reply-To: <9257026e0809220934n2b53fdaey9bf1250642df291c@mail.gmail.com>
References: <9257026e0809220830r44b9974fhc85a5876783b6183@mail.gmail.com>
	<20080922155525.GB17055@34-mo7-2.acn.waw.pl>
	<9257026e0809220934n2b53fdaey9bf1250642df291c@mail.gmail.com>
Message-ID: <20080922165846.GA7871@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> > No. in Harbour you can use ordBagClear(). AFAIR there were some
> > libraries for CA-Cl*pper which give that functionality for any
> > RDDs which supported ORDLSTDELETE() method. In SIX3 it was possible
> > by sx_ClearOrder( cOrdBagName ) or Sx_KillTag( .t., cOrdBagName )
> I've tried with DBFCDX but I get only:
> Error DBFCDX/0  Operation not supported
> ORDBAGCLEAR(0)
> CXDELETE(635)
> I've tried passing ordname(indexord()), indexord() and dbOrderInfo(
> DBOI_FULLPATH )
> What am I missing?

Looks that I haven't implemented it for DBFCDX in SVN code but only
for DBFNTX. I'll add it ASAP.

BTW As numeric value it should be bug number not tag number.
    This function operates on bugs not tags.

best regards,
Przemek
From mbelgrano at deltain.it  Mon Sep 22 13:11:32 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 13:11:44 2008
Subject: [Harbour] can load always a large number of library?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFD2@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EFD2@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFD5@SRV02.deltain.net>

I resolved __beginthreadex removing cw32.lib and adding cw32mt.lib
Also in not mt program we must load  cw32mt.lib instead cw32.lib?


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Massimo
Belgrano
Sent: Monday, September 22, 2008 6:06 PM
To: Harbour Project Main Developer List.
Subject: [Harbour] can load always a large number of library?

What be add for not mt program
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Error: Unresolved external '__beginthreadex' referenced from
C:\HARBOUR\LIB\HBVM.LIB|thread
Error: Unresolved external '__endthreadex' referenced from
C:\HARBOUR\LIB\HBVM.LIB|thread


Massimo Belgrano

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Mon Sep 22 13:13:00 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 13:13:10 2008
Subject: [Harbour] can load always a large number of library?
In-Reply-To: <f60d50830809220947t4b6802e9l2950e4f2b184f988@mail.gmail.com>
References: <AFB948164110ED43B5EB849E8DEEF03815EFD2@SRV02.deltain.net>
	<f60d50830809220947t4b6802e9l2950e4f2b184f988@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFD6@SRV02.deltain.net>

Grazie Carlo



-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Carlo Borelli
Sent: Monday, September 22, 2008 6:47 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] can load always a large number of library?

If I remember correctly, you need to link BCC cw32mt library instead of cw32.

/* Se mi ricordo bene, devi linkare cw32mt al posto di cw32. */

Carlo.


From harbour.01 at syenar.hu  Mon Sep 22 13:21:47 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 13:21:57 2008
Subject: [Harbour] 2008-09-22 19:19 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91cd7$Blat.v2.6.2$b1774014$3a0739bcde8@127.0.0.1>

2008-09-22 19:19 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
  * make_vc.mak
  * common.mak
  * source/rtl/hbgtcore.c
    ! Any messing with HB_GT_LIB and HB_GT_DEFAULT was removed 
      from non-GNU make files, to leave these things to the 
      source code itself (just like in GNU-make).
    + Added automatic selection of GTWVT from source code, 
      so that it also works in GNU-make.

  * source/rdd/dbfcdx/dbfcdx1.c
    ! Restored RTE behaviour when key length is zero.
    ! Recently added C53 compatible but C52 incompatible 
      RTE enabled only if HB_COMPAT_C53 and HB_C52_STRICT 
      are both #defined to not make valid C52 apps crash.
    ; Someone pls review me.
--
Brgds,
Viktor

From mbelgrano at deltain.it  Mon Sep 22 13:22:21 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 13:22:35 2008
Subject: [Harbour] FLISOL 2008 - Venezuela Caracas
In-Reply-To: <f60d50830801251302t4c5a6be8h3c5f1d7de7b3d2fa@mail.gmail.com>
References: <f60d50830801251302t4c5a6be8h3c5f1d7de7b3d2fa@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFD8@SRV02.deltain.net>

Have you same result?

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Carlo Borelli
Sent: Friday, January 25, 2008 10:03 PM
To: harbour@harbour-project.org
Subject: [Harbour] FLISOL 2008 - Venezuela Caracas

Good morning everybody,
due to the event here linked
http://www.flisol.info/FLISOL2008/Venezuela/Caracas (sorry, only
spanish), I'm interested to develop a talk about Harbour Project.
The FLISOL is an Latino America Open Source Installation Festival and
I think could be a good opportunity to spread words about Harbour
since I'm an old clipper developer and, in the last year, using
Harbour with great satisfaction on Linux and some Microsoft platforms.
So, I want kindly ask to everybody: whoever has any kind of
documentations like slides, docs, whatever will be, core internal
calls, haw work the engine, etc. plz send me for the translation job
from english and italian, meanwhile the talk will be in spanish. I'll
accept this three languages: italian, english, spanish.
Moreover, what I'll produce about the talk will be avalaible for
everybody will needs that.

A big thanks,

Carlo.
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Mon Sep 22 13:28:14 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 13:28:22 2008
Subject: [Harbour] 2008-09-22 19:24 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91cd8$Blat.v2.6.2$97f3148c$768efd9f290@127.0.0.1>

2008-09-22 19:24 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * bin/bld.bat
    - Removed recently added cw32mt.lib.
    ; Now, for MT builds 'set HB_USER_LIBS=cw32mt.lib' should 
      be used. Where cw32mt.lib may also be cp32mt.lib, 
      cp32mti.lib, cw32mti.lib depending on other factors.
      Notice that even this would only work if Harbour was 
      built with 'set HB_BUILD_ST=no'.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Mon Sep 22 13:32:26 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 13:32:45 2008
Subject: [Harbour] 2008-09-22 19:32 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080922173226.GA12665@34-mo7-2.acn.waw.pl>

2008-09-22 19:32 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/ChangeLog
   ! corrected previous ChangeLog entry: instead of hb_waDetach()/
     hb_waRequest() should be db_dbDetach()/hb_dbRequest()

  * harbour/source/vm/hvm.c
   * disabled PRG tracing in default builds. If someone wants to
     use this feature then he should recompile Harbour with HB_PRG_TRACE
     macro. In such case tracing can be enabled/disabled by __TRACEPRGCALLS()
     function. HB_NO_TRACE macro is not longer usable - it's default in
     current code.

  * harbour/source/vm/classes.c
    + added PRG function __clsPreallocate() which extends the size of
      classes buffer to given value to avoid later RT reallocations.
      It may be useful in some very seldom cases for MT programs which
      will allocate dynamically at runtime more then 16386 classes.
      In practice rather impossible though who knows ;-)

  * harbour/source/rdd/workarea.c
    * set default preallocation size for RDD nodes to 128
    + added PRG function __rddPreallocate() which extends the size of
      RDD nodes buffer to given value to avoid later RT reallocations.
      It may be useful in some very seldom cases for MT programs which
      will register dynamically at runtime more then 128 RDDs when other
      threads are active and may use RDD nodes.

  * harbour/include/hbrddcdx.h
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
    + added ORDLSTDELETE() method.
      Now ordbagClear() should work for DBFCDX.

best regards
Przemek
From druzus at acn.waw.pl  Mon Sep 22 13:37:03 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 13:37:25 2008
Subject: [Harbour] can load always a large number of library?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFD5@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EFD2@SRV02.deltain.net>
	<AFB948164110ED43B5EB849E8DEEF03815EFD5@SRV02.deltain.net>
Message-ID: <20080922173703.GA12401@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Massimo Belgrano wrote:

Hi Massimo,

> I resolved __beginthreadex removing cw32.lib and adding cw32mt.lib
> Also in not mt program we must load  cw32mt.lib instead cw32.lib?

No though it may be good practice for 3-rd party code which may use
own threads and call CRTL functions.
Harbour calls _beginthreadex/_endthreadex only from hbvmmt or
from hbvm but only if you compiled harbour with default MT support
without ST mode, f.e. for BCC you set HB_BUILD_ST macro to sth different
then "yes" and recompiled Harbour.

best regards,
Przemek
From toninhofwi at yahoo.com.br  Mon Sep 22 13:50:38 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Sep 22 13:46:29 2008
Subject: [Harbour] 2008-09-22 14:34 UTC-0300 Antonio Carlos Pantaglione
Message-ID: <ammfd4p2m498mqktkvc9ii25335km7p0h0@4ax.com>

2008-09-22 14:34 UTC-0300 Antonio Carlos Pantaglione
<toninho@fwi.com.br>
  % source/rtl/dbedit.prg
  % source/rtl/dirscan.prg
  % source/rtl/errorsys.prg
  % source/rtl/hbini.prg
  % source/rtl/listbox.prg
  % source/rtl/objfunc.prg
  % source/rtl/tbrowse.prg
  % source/rtl/tclass.prg
  % source/rtl/tget.prg
  % source/rtl/tgetlist.prg
    % Code formating and some local decarations inlined


Regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From mbelgrano at deltain.it  Mon Sep 22 13:47:47 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 13:48:00 2008
Subject: [Harbour] can load always a large number of library?
In-Reply-To: <20080922173703.GA12401@34-mo7-2.acn.waw.pl>
References: <AFB948164110ED43B5EB849E8DEEF03815EFD2@SRV02.deltain.net><AFB948164110ED43B5EB849E8DEEF03815EFD5@SRV02.deltain.net>
	<20080922173703.GA12401@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFD9@SRV02.deltain.net>

I compiled harbour wsith set HB_BUILD_ST=yes because I think that with this option  can choice if link hbvm.lib I have normal mode with hbvmmt.lib I have multi tread mode
Why build harbour with set HB_BUILD_ST=yes?
Why build harbour with set HB_BUILD_ST=no?
Why build harbour with set HB_BUILD_ST=nothing?
WIch mode will be standard for 1.1?
Wich difference are need from a MT application to a non mt application?


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Monday, September 22, 2008 7:37 PM
To: Harbour Project Main Developer List.
Subject: Re: RE: [Harbour] can load always a large number of library?

On Mon, 22 Sep 2008, Massimo Belgrano wrote:

Hi Massimo,

> I resolved __beginthreadex removing cw32.lib and adding cw32mt.lib
> Also in not mt program we must load  cw32mt.lib instead cw32.lib?

No though it may be good practice for 3-rd party code which may use
own threads and call CRTL functions.
Harbour calls _beginthreadex/_endthreadex only from hbvmmt or
from hbvm but only if you compiled harbour with default MT support
without ST mode, f.e. for BCC you set HB_BUILD_ST macro to sth different
then "yes" and recompiled Harbour.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From e.m.giordano at emagsoftware.it  Mon Sep 22 13:49:56 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Sep 22 13:50:03 2008
Subject: [Harbour] Warnings
Message-ID: <17C1D2BCEBB44927B10245E6B4E5BD87@emag>

Warning W8012 source\vm\classes.c 4526: Comparing signed and unsigned values 
in function HB_FUN___CLSPREALLOCATE

Warning W8012 source\rdd\workarea.c 2235: Comparing signed and unsigned 
values in function HB_FUN___RDDPREALLOCATE

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Mon Sep 22 13:55:04 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 13:55:16 2008
Subject: [Harbour] Re: MSVS 2008: error with new alloc
In-Reply-To: <05579321-71DF-474A-8416-62DE5F0BBEB5@syenar.hu>
References: <05579321-71DF-474A-8416-62DE5F0BBEB5@syenar.hu>
Message-ID: <451EA718-DE83-44AA-B1A7-ED0E3255AD43@syenar.hu>

Hi Przemek,

I've now retried after a full rebuild (with same flags
as in prev message) and I'm getting the same error and
GPF results with small or even empty test program,
like "FUNC MAIN()".

Do you have any tips what could this be? Or how could
we get close to the solution?

Brgds,
Viktor

On 2008.09.18., at 10:22, Szak?ts Viktor wrote:

> Hi all,
>
> Maybe unrelated, but I'm getting this (on the command line)
> with MSVS 20008 (UNICODE, STATS OFF, HB_FM_DL_ALLOC), when
> the application terminates:
>
> "This application has requested the Runtime to terminate it in an  
> unusual way.
> Please contact the application's support team for more information."
>
> Then it GPFs.
>
> Can someone confirm?
>
> Brgds,
> Viktor
>

From toninhofwi at yahoo.com.br  Mon Sep 22 14:01:49 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Sep 22 13:57:40 2008
Subject: [Harbour] My FWH apps GPF using latest SVN
In-Reply-To: <5114C6439EBF4520A8260C94634AF558@emag>
References: <5114C6439EBF4520A8260C94634AF558@emag>
Message-ID: <57nfd45s02v953o1snvce0padcegtgf6hg@4ax.com>

>As subject.
>
>Any ideas?
>
>EMG

Hi Enrico.

Have you tryed with some fwh\samples prg?  My app with FWH July 2007
build and ChangeLog 9465 is working fine, in ST mode and bcc 6.10

Regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From carlo.borelli at gmail.com  Mon Sep 22 14:00:20 2008
From: carlo.borelli at gmail.com (Carlo Borelli)
Date: Mon Sep 22 14:00:29 2008
Subject: [Harbour] FLISOL 2008 - Venezuela Caracas
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFD8@SRV02.deltain.net>
References: <f60d50830801251302t4c5a6be8h3c5f1d7de7b3d2fa@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03815EFD8@SRV02.deltain.net>
Message-ID: <f60d50830809221100y30b82f2j1d9b11a510f4e864@mail.gmail.com>

Pardon? You answered to an old message I posted. Do you mean MT with
BCC libraries?

Carlo.

2008/9/23 Massimo Belgrano <mbelgrano@deltain.it>:
> Have you same result?
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Carlo Borelli
> Sent: Friday, January 25, 2008 10:03 PM
> To: harbour@harbour-project.org
> Subject: [Harbour] FLISOL 2008 - Venezuela Caracas
>
> Good morning everybody,
> due to the event here linked
> http://www.flisol.info/FLISOL2008/Venezuela/Caracas (sorry, only
> spanish), I'm interested to develop a talk about Harbour Project.
> The FLISOL is an Latino America Open Source Installation Festival and
> I think could be a good opportunity to spread words about Harbour
> since I'm an old clipper developer and, in the last year, using
> Harbour with great satisfaction on Linux and some Microsoft platforms.
> So, I want kindly ask to everybody: whoever has any kind of
> documentations like slides, docs, whatever will be, core internal
> calls, haw work the engine, etc. plz send me for the translation job
> from english and italian, meanwhile the talk will be in spanish. I'll
> accept this three languages: italian, english, spanish.
> Moreover, what I'll produce about the talk will be avalaible for
> everybody will needs that.
>
> A big thanks,
>
> Carlo.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
From lorenzo.fiorini at gmail.com  Mon Sep 22 14:08:32 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 22 14:08:39 2008
Subject: [Harbour] 2008-09-22 19:32 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080922173226.GA12665@34-mo7-2.acn.waw.pl>
References: <20080922173226.GA12665@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809221108o3c346776s81da413a6e3a43f0@mail.gmail.com>

On Mon, Sep 22, 2008 at 7:32 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> 2008-09-22 19:32 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/ChangeLog
>   ! corrected previous ChangeLog entry: instead of hb_waDetach()/
>     hb_waRequest() should be db_dbDetach()/hb_dbRequest()
> ...
>  * harbour/include/hbrddcdx.h
>  * harbour/source/rdd/dbfcdx/dbfcdx1.c
>    + added ORDLSTDELETE() method.
>      Now ordbagClear() should work for DBFCDX.

Many thanks it seem to work.

I've used as:

...
   local cIdxFile := dbOrderInfo( DBOI_FULLPATH )

   ordBagClear( cIdxFile )

   return nil
...

I've ported it to my local 1.0.1 do you think there might be problem
to use it in production?

best regards,
Lorenzo
From druzus at acn.waw.pl  Mon Sep 22 14:40:57 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 14:41:40 2008
Subject: [Harbour] 2008-09-22 20:40 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080922184057.GA12832@34-mo7-2.acn.waw.pl>

2008-09-22 20:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/classes.c
  * harbour/source/rdd/workarea.c
    * pacified BCC warnings

  * harbour/source/debug/dbgwa.prg
  * harbour/source/debug/debugger.prg
  * harbour/source/debug/dbghelp.prg
    * eliminated two static variables

best regards
Przemek
From druzus at acn.waw.pl  Mon Sep 22 14:54:47 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 14:55:30 2008
Subject: [Harbour] 2008-09-22 20:54 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080922185447.GA25100@34-mo7-2.acn.waw.pl>

2008-09-22 20:54 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/dbfntx/dbfntx1.c
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
    * do not allow to close production index by ordBagClear() when
      strict FP compatibility is set for production index or when
      _SET_AUTOPEN is enabled. It compatible behavior to ordListClear()
      function

best regards
Przemek
From mbelgrano at deltain.it  Mon Sep 22 14:56:54 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 14:57:08 2008
Subject: [Harbour] FLISOL 2008 - Venezuela Caracas
In-Reply-To: <f60d50830809221100y30b82f2j1d9b11a510f4e864@mail.gmail.com>
References: <f60d50830801251302t4c5a6be8h3c5f1d7de7b3d2fa@mail.gmail.com><AFB948164110ED43B5EB849E8DEEF03815EFD8@SRV02.deltain.net>
	<f60d50830809221100y30b82f2j1d9b11a510f4e864@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFDA@SRV02.deltain.net>

I refer to your project of develop a talk about Harbour Project by collect any kind of
 documentations like slides, docs,
Can you share same doc?
If I start a Multilingual Wiki with harbour you can be interested ?
Vorrei realizzare un portale dove la documentazione e esempi siano da baricentro
Credo che la partecipazione di un poliglotta sia basilare per questa comunity


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Carlo Borelli
Sent: Monday, September 22, 2008 8:00 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] FLISOL 2008 - Venezuela Caracas

Pardon? You answered to an old message I posted. Do you mean MT with
BCC libraries?

Carlo.

2008/9/23 Massimo Belgrano <mbelgrano@deltain.it>:
> Have you same result?
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Carlo Borelli
> Sent: Friday, January 25, 2008 10:03 PM
> To: harbour@harbour-project.org
> Subject: [Harbour] FLISOL 2008 - Venezuela Caracas
>
> Good morning everybody,
> due to the event here linked
> http://www.flisol.info/FLISOL2008/Venezuela/Caracas (sorry, only
> spanish), I'm interested to develop a talk about Harbour Project.
> The FLISOL is an Latino America Open Source Installation Festival and
> I think could be a good opportunity to spread words about Harbour
> since I'm an old clipper developer and, in the last year, using
> Harbour with great satisfaction on Linux and some Microsoft platforms.
> So, I want kindly ask to everybody: whoever has any kind of
> documentations like slides, docs, whatever will be, core internal
> calls, haw work the engine, etc. plz send me for the translation job
> from english and italian, meanwhile the talk will be in spanish. I'll
> accept this three languages: italian, english, spanish.
> Moreover, what I'll produce about the talk will be avalaible for
> everybody will needs that.
>
> A big thanks,
>
> Carlo.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Mon Sep 22 15:06:31 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 15:07:14 2008
Subject: [Harbour] can load always a large number of library?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFD9@SRV02.deltain.net>
References: <20080922173703.GA12401@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815EFD9@SRV02.deltain.net>
Message-ID: <20080922190631.GA24797@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Massimo Belgrano wrote:
> I compiled harbour wsith set HB_BUILD_ST=yes because I think that with
> this option  can choice if link hbvm.lib I have normal mode with hbvmmt.lib
> I have multi tread mode

Exactly but you have to make some mistake in setting environment vars.
I suggest to remove all instances of HB_BUILD_ST from your settings.
Please also remove all HB_MT_VM macros you may have in your settings.
Probably this one forced to compile hbvm.lib in MT mode.
Creating both libraries is default as long as you do not change it
by some personal settings f.e. HB_BUILD_ST=no or HB_MT_VM in C_USR

> Why build harbour with set HB_BUILD_ST=nothing?
> WIch mode will be standard for 1.1?

We will see. Now it's development state and we are using internal
switches which help us to work on Harbour and create new builds.
I cannot say what we will have in final 1.2 (1.1 is devel branch
and stable release will have number 1.2).

> Wich difference are need from a MT application to a non mt application?

If you do not want to create your own threads then there is no differnce
for you. Only MT HVM is slower then non MT one but the difference depends
on used C compiler, platform and your code. Usually user code calls many
RTL/RDD functions and pure HVM speed is less important.
If you want to create your own threads then you will have to follow
some general MT programming rules which are language independent.
Then use Harbour synchronization mechanisms if they are necessary for
your algorithms (f.e. you want to share or exchange some variables
between threads) to make your code MT safe.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Sep 22 15:11:32 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 15:12:16 2008
Subject: [Harbour] 2008-09-22 19:32 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0809221108o3c346776s81da413a6e3a43f0@mail.gmail.com>
References: <20080922173226.GA12665@34-mo7-2.acn.waw.pl>
	<9257026e0809221108o3c346776s81da413a6e3a43f0@mail.gmail.com>
Message-ID: <20080922191132.GB24797@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Lorenzo Fiorini wrote:
> I've used as:
>    local cIdxFile := dbOrderInfo( DBOI_FULLPATH )
>    ordBagClear( cIdxFile )
>    return nil

If you are using unique order bag names then ordBagName()
should be enough. You do not have to use full path.

> I've ported it to my local 1.0.1 do you think there might be problem
> to use it in production?

Yes. Current version with additional protection for production
indexes does not make anything more then ordListClear() but allows
to chose only one bag.
But please remember that when you close order bag then it will not
be updated automatically with table modifications so you can make
it out of sync.
If you are using it for temporary indexes then I suggest to use
TEMPORARY clause in index command. Such index files are automatically
removed after closing.

best regards,
Przemek
From mbelgrano at deltain.it  Mon Sep 22 15:17:07 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 15:17:17 2008
Subject: [Harbour] can load always a large number of library?
In-Reply-To: <20080922190631.GA24797@34-mo7-2.acn.waw.pl>
References: <20080922173703.GA12401@34-mo7-2.acn.waw.pl><AFB948164110ED43B5EB849E8DEEF03815EFD9@SRV02.deltain.net>
	<20080922190631.GA24797@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFDD@SRV02.deltain.net>

Now I have this 
set C_USR=-DHB_WIN32_IO -DHB_FM_DL_ALLOC -DHB_MT_VM -DHB_FM_STATISTICS_OFF -tWM -OS -Ov -Oi -Oc -Q 
set HB_BUILD_ST=yes

I have changed to 

set C_USR=-DHB_WIN32_IO -DHB_FM_DL_ALLOC  -DHB_FM_STATISTICS_OFF -tWM -OS -Ov -Oi -Oc -Q 
set HB_BUILD_ST=


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Monday, September 22, 2008 9:07 PM
To: Harbour Project Main Developer List.
Subject: Re: RE: RE: [Harbour] can load always a large number of library?

On Mon, 22 Sep 2008, Massimo Belgrano wrote:
> I compiled harbour wsith set HB_BUILD_ST=yes because I think that with
> this option  can choice if link hbvm.lib I have normal mode with hbvmmt.lib
> I have multi tread mode

Exactly but you have to make some mistake in setting environment vars.
I suggest to remove all instances of HB_BUILD_ST from your settings.
Please also remove all HB_MT_VM macros you may have in your settings.
Probably this one forced to compile hbvm.lib in MT mode.
Creating both libraries is default as long as you do not change it
by some personal settings f.e. HB_BUILD_ST=no or HB_MT_VM in C_USR

> Why build harbour with set HB_BUILD_ST=nothing?
> WIch mode will be standard for 1.1?

We will see. Now it's development state and we are using internal
switches which help us to work on Harbour and create new builds.
I cannot say what we will have in final 1.2 (1.1 is devel branch
and stable release will have number 1.2).

> Wich difference are need from a MT application to a non mt application?

If you do not want to create your own threads then there is no differnce
for you. Only MT HVM is slower then non MT one but the difference depends
on used C compiler, platform and your code. Usually user code calls many
RTL/RDD functions and pure HVM speed is less important.
If you want to create your own threads then you will have to follow
some general MT programming rules which are language independent.
Then use Harbour synchronization mechanisms if they are necessary for
your algorithms (f.e. you want to share or exchange some variables
between threads) to make your code MT safe.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From toninhofwi at yahoo.com.br  Mon Sep 22 15:21:46 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Sep 22 15:17:36 2008
Subject: [Harbour] 2008-09-22 16:19 UTC-0300 Antonio Carlos Pantaglione
Message-ID: <31sfd4df85org7sl41ma5pcgv56ik4b0m4@4ax.com>

2008-09-22 16:19 UTC-0300 Antonio Carlos Pantaglione
<toninho@fwi.com.br>
  * harbour/contrib/rddads/ads1.c
    * using AdsCreateIndex61 when ADS_LIB_VERSION >= 610. This
functions use ADS_DEFAULT as index page size parameter and force
Advantage to compute a page size based on the key size to provide
optimal balancing.


Regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From druzus at acn.waw.pl  Mon Sep 22 15:17:04 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 15:17:47 2008
Subject: [Harbour] Re: MSVS 2008: error with new alloc
In-Reply-To: <451EA718-DE83-44AA-B1A7-ED0E3255AD43@syenar.hu>
References: <05579321-71DF-474A-8416-62DE5F0BBEB5@syenar.hu>
	<451EA718-DE83-44AA-B1A7-ED0E3255AD43@syenar.hu>
Message-ID: <20080922191704.GA6314@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Szakáts Viktor wrote:

Hi Viktor,

> I've now retried after a full rebuild (with same flags
> as in prev message) and I'm getting the same error and
> GPF results with small or even empty test program,
> like "FUNC MAIN()".
> Do you have any tips what could this be? Or how could
> we get close to the solution?

Probably MSVC does not allow to replace default malloc()/free()
and if you make it it causes some internal errors inside CRTL.
In such case if you want to test dlmalloc.c with MSVC you will
have to use USE_DL_PREFIX build macro. It causes that dlmalloc.c
will be used only by Harbour code.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Sep 22 15:44:47 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 15:45:31 2008
Subject: [Harbour] can load always a large number of library?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFDD@SRV02.deltain.net>
References: <20080922190631.GA24797@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815EFDD@SRV02.deltain.net>
Message-ID: <20080922194447.GA10824@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Massimo Belgrano wrote:
> Now I have this 
> set C_USR=-DHB_WIN32_IO -DHB_FM_DL_ALLOC -DHB_MT_VM -DHB_FM_STATISTICS_OFF -tWM -OS -Ov -Oi -Oc -Q 
> set HB_BUILD_ST=yes
> I have changed to 
> set C_USR=-DHB_WIN32_IO -DHB_FM_DL_ALLOC  -DHB_FM_STATISTICS_OFF -tWM -OS -Ov -Oi -Oc -Q 
> set HB_BUILD_ST=

Much better. With this settings you can create hbvm lib without MT
references. I also suggest to remove fully
   set HB_BUILD_ST=
If you not use it anywhere then it's not necessary to clear it.
And please remove HB_WIN32_IO - this macro was never necessary
in the whole [x]Harbour history you know. It was necessary only
for few month some years ago. It's internal setting enabled
automatically on platforms which may need it.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Mon Sep 22 15:53:13 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 22 15:53:19 2008
Subject: [Harbour] 2008-09-22 19:32 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080922191132.GB24797@34-mo7-2.acn.waw.pl>
References: <20080922173226.GA12665@34-mo7-2.acn.waw.pl>
	<9257026e0809221108o3c346776s81da413a6e3a43f0@mail.gmail.com>
	<20080922191132.GB24797@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809221253u26502d86i486caca8ec0becea@mail.gmail.com>

On Mon, Sep 22, 2008 at 9:11 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> If you are using unique order bag names then ordBagName()
> should be enough. You do not have to use full path.

The file names are created unique.
BTW what do you think it's the better way to get unique file name in Harbour?

> But please remember that when you close order bag then it will not
> be updated automatically with table modifications so you can make
> it out of sync.
> If you are using it for temporary indexes then I suggest to use
> TEMPORARY clause in index command. Such index files are automatically
> removed after closing.

I'll do. They are temporary indexes used to "simulate" SQL selects as in:

#command SELECT * FROM <table> ORDER BY <key>                           ;
            [WHERE <for> ]                                                 ;
            [<all:ALL>]                                                    ;
            [WHILE <while>]                                                ;
            [INTO <into> ]                                                 ;
            [<unique: UNIQUE>]                                             ;
            [<ascend: ASC>]                                                ;
            [<descend: DESC>]                                              ;
         => ordCondSet( "", <{for}>,                                       ;
                        [<.all.>],                                         ;
                        <{while}>,                                         ;
                        , ,                                                ;
                        RECNO(), , ,                                       ;
                        .t., [<.descend.>],,.t. )
         ;
         ;  ordCreate(TEMPFIDX(), "CURSOR", <(key)>, <{key}>, [<.unique.>]);
         ; [ <into> := indexord() ]

best regards,
Lorenzo
From e.m.giordano at emagsoftware.it  Mon Sep 22 15:55:11 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Sep 22 15:55:18 2008
Subject: [Harbour] My FWH apps GPF using latest SVN
References: <5114C6439EBF4520A8260C94634AF558@emag>
	<57nfd45s02v953o1snvce0padcegtgf6hg@4ax.com>
Message-ID: <41F8D24511A246D68DDE316854791DA3@emag>


-----Messaggio Originale----- 
Da: "Toninho@fwi" <toninhofwi@yahoo.com.br>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: luned? 22 settembre 2008 20.01
Oggetto: Re: [Harbour] My FWH apps GPF using latest SVN


> Hi Enrico.
>
> Have you tryed with some fwh\samples prg?  My app with FWH July 2007
> build and ChangeLog 9465 is working fine, in ST mode and bcc 6.10

I found the problem. It was my fault. Thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Mon Sep 22 16:01:49 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Sep 22 16:01:57 2008
Subject: [Harbour] 2008-09-22 20:40 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20080922184057.GA12832@34-mo7-2.acn.waw.pl>
Message-ID: <0FCCFA57265F4C4E9F20A8B8D89C0165@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: <harbour@harbour-project.org>
Data invio: luned? 22 settembre 2008 20.40
Oggetto: [Harbour] 2008-09-22 20:40 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> 2008-09-22 20:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/vm/classes.c
>  * harbour/source/rdd/workarea.c
>    * pacified BCC warnings

Thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at acn.waw.pl  Mon Sep 22 16:08:53 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 16:09:38 2008
Subject: [Harbour] 2008-09-22 22:08 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080922200853.GA20429@34-mo7-2.acn.waw.pl>

2008-09-22 22:08 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/thread.c
    ! fixed GPF when hb_threadSelf() was executed from thread without
      allocated ID object (f.e. main thread)

best regards
Przemek
From druzus at acn.waw.pl  Mon Sep 22 16:24:40 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 16:25:24 2008
Subject: [Harbour] 2008-09-22 19:32 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0809221253u26502d86i486caca8ec0becea@mail.gmail.com>
References: <20080922173226.GA12665@34-mo7-2.acn.waw.pl>
	<9257026e0809221108o3c346776s81da413a6e3a43f0@mail.gmail.com>
	<20080922191132.GB24797@34-mo7-2.acn.waw.pl>
	<9257026e0809221253u26502d86i486caca8ec0becea@mail.gmail.com>
Message-ID: <20080922202440.GA20488@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> BTW what do you think it's the better way to get unique file name in Harbour?

It depends on context. For temporary files you can use HB_FTEMPCREATE()
function.

> > If you are using it for temporary indexes then I suggest to use
> > TEMPORARY clause in index command. Such index files are automatically
> > removed after closing.
> I'll do. They are temporary indexes used to "simulate" SQL selects as in:
[...]

Then use TEMPORARY and instead of ordbagClear() use ordDestroy()
to kill given tag when it's not longer necessary.
For temporary indexes order bag name is only for your own use.
It allows to group tags in single file but they are not used
as real part of file name. When TEMPORARY flag is used RDD
automatically create unique temporary file or add new tags
to existing temporary index it it was create with the same
bag name. RDD may even do not create file at all if it decides
that it will be better to create index only in memory.
So in your PP command instead of TEMPFIDX() you can use
any constant value like: "TEMPBAG"
When all tags in order bag are removed by ordDestroy()
order bag is also removed.
TEMPORARY indexes have also yet another feature important for
you. They are always used in internal exclusive mode without
file locks and concurrent access checking. It means that
they will work faster when you will use them.
BTW temporary files in Linux are created by mkstemp() function
in default location for temporary files. Usually it's /tmp
directory. Be sure that you have enough space in it. If not
then use TMPDIR envvar (or other valid for your distro) to
change their default location.

best regards,
Przemek
From dmacias at mail.udg.mx  Mon Sep 22 16:45:33 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Mon Sep 22 16:45:37 2008
Subject: [Harbour] Re: SIGFPE during build of hbtest
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48D803ED.9080608@mail.udg.mx>

Maurilio, Przemek:

> I'm trying to buil harbour on OS/2 with GCC, I'm getting this:

>> Killed by SIGFPE
>> pid=0x62a5 ppid=0x628a tid=0x0001 slot=0x00e3 pri=0x0200 mc=0x0001
>> E:\REPOSITORY\HARBOUR-SVN\SOURCE\MAIN\OS2\GCC\HARBOUR.EXE
>> LIBC063 0:0005547a

>> Is there something already known here

>I see it 1-st time. I'm using about 10 different GCC builds and
>I've never noticed this problem. I also do not remember that
>David have ever reported sth like that.

No, I have not seen that error

>> Every thing else seems to build correctly, though.

>It's possible that this problem is local to GCC builds anyhow
>it should be located and fixed.

I think is due to local environment
Harbour does not use bison but for xHarbour was hard to find the right one.
For make versions was equal, one of them sometimes caused segmentation
fault building library, 99 % CPU and/or freeze. The oldiest make is the
best as I explained in recent message to Maurilio

I am using eComStation 1.2MR, I do not know which OS/2 is using Maurilio
Both of us use same gcc 3.3.5 version

David Macias



From harbour.01 at syenar.hu  Mon Sep 22 16:46:13 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 16:46:24 2008
Subject: [Harbour] Re: MSVS 2008: error with new alloc
In-Reply-To: <20080922191704.GA6314@34-mo7-2.acn.waw.pl>
References: <05579321-71DF-474A-8416-62DE5F0BBEB5@syenar.hu>
	<451EA718-DE83-44AA-B1A7-ED0E3255AD43@syenar.hu>
	<20080922191704.GA6314@34-mo7-2.acn.waw.pl>
Message-ID: <32233A4E-51F2-42F0-9C90-DBDE6C2F15B4@syenar.hu>

Hi Przemek,

Many thanks, that solved the problem.

Shouldn't we make USE_DL_PREFIX the default
for all compilers/platforms, to avoid such
possible problems, and also to make this matter
unified across all our builds?

Brgds,
Viktor

On 2008.09.22., at 21:17, Przemyslaw Czerpak wrote:

> On Mon, 22 Sep 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> I've now retried after a full rebuild (with same flags
>> as in prev message) and I'm getting the same error and
>> GPF results with small or even empty test program,
>> like "FUNC MAIN()".
>> Do you have any tips what could this be? Or how could
>> we get close to the solution?
>
> Probably MSVC does not allow to replace default malloc()/free()
> and if you make it it causes some internal errors inside CRTL.
> In such case if you want to test dlmalloc.c with MSVC you will
> have to use USE_DL_PREFIX build macro. It causes that dlmalloc.c
> will be used only by Harbour code.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Mon Sep 22 16:55:23 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 16:55:35 2008
Subject: [Harbour] can load always a large number of library?
In-Reply-To: <20080922194447.GA10824@34-mo7-2.acn.waw.pl>
References: <20080922190631.GA24797@34-mo7-2.acn.waw.pl><AFB948164110ED43B5EB849E8DEEF03815EFDD@SRV02.deltain.net>
	<20080922194447.GA10824@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFE0@SRV02.deltain.net>

Ok I made:
set C_USR=-DHB_FM_DL_ALLOC  -DHB_FM_STATISTICS_OFF -tWM -OS -Ov -Oi -Oc -Q

HB_BUILD_ST compile harbour in ST or MT mode w
what can be done with an harbour compiled in ST or MT mode?
So I have compiled in st mode and now I can't run sample in tests\mt like mttest07
So if I WANT compile this test I must recompile harbour with HB_BUILD_ST=No?


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Monday, September 22, 2008 9:45 PM
To: Harbour Project Main Developer List.
Subject: Re: RE: RE: RE: [Harbour] can load always a large number of library?

On Mon, 22 Sep 2008, Massimo Belgrano wrote:
> Now I have this 
> set C_USR=-DHB_WIN32_IO -DHB_FM_DL_ALLOC -DHB_MT_VM -DHB_FM_STATISTICS_OFF -tWM -OS -Ov -Oi -Oc -Q 
> set HB_BUILD_ST=yes
> I have changed to 
> set C_USR=-DHB_WIN32_IO -DHB_FM_DL_ALLOC  -DHB_FM_STATISTICS_OFF -tWM -OS -Ov -Oi -Oc -Q 
> set HB_BUILD_ST=

Much better. With this settings you can create hbvm lib without MT
references. I also suggest to remove fully
   set HB_BUILD_ST=
If you not use it anywhere then it's not necessary to clear it.
And please remove HB_WIN32_IO - this macro was never necessary
in the whole [x]Harbour history you know. It was necessary only
for few month some years ago. It's internal setting enabled
automatically on platforms which may need it.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From lorenzo.fiorini at gmail.com  Mon Sep 22 17:01:40 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 22 17:01:46 2008
Subject: [Harbour] 2008-09-22 19:32 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080922202440.GA20488@34-mo7-2.acn.waw.pl>
References: <20080922173226.GA12665@34-mo7-2.acn.waw.pl>
	<9257026e0809221108o3c346776s81da413a6e3a43f0@mail.gmail.com>
	<20080922191132.GB24797@34-mo7-2.acn.waw.pl>
	<9257026e0809221253u26502d86i486caca8ec0becea@mail.gmail.com>
	<20080922202440.GA20488@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809221401k330c91d9k9389cf3beec74a85@mail.gmail.com>

On Mon, Sep 22, 2008 at 10:24 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> Then use TEMPORARY and instead of ordbagClear() use ordDestroy()
> to kill given tag when it's not longer necessary.
> ...
> directory. Be sure that you have enough space in it. If not
> then use TMPDIR envvar (or other valid for your distro) to
> change their default location.

Many thanks I'll do some test.

If I've understood well if the bag name is "automatic" I need to give
a unique tag name. As you can see today I use the same tag name
"CURSOR" since I'm sure I create different bags.
Is there a simple way to have a unique and valid tag name?

Is it also a way to know if an index is TEMPORARY?
I've looked into dbinfo.ch but I haven't found a DBOI_TEMPORARY | MEMORY.
I ask this because sometimes I need "real different dbfs" so I combine
copy and index and this will help to find places where I can add
TEMPORARY clause.

best regards,
Lorenzo
From bedipritpal at hotmail.com  Mon Sep 22 17:34:55 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Sep 22 17:35:02 2008
Subject: [Harbour] 2008-09-21 20:29 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <6CA071D3-5B7B-45CF-AA42-8A329D665113@syenar.hu>
References: <19601498.post@talk.nabble.com>
	<04920F8E-4A1F-4BF5-B559-09F9E54B84B9@syenar.hu>
	<6CA071D3-5B7B-45CF-AA42-8A329D665113@syenar.hu>
Message-ID: <19616094.post@talk.nabble.com>


Hello Viktor

>with HB_RETWI( __DlgProc ) of course.
Works.

But:

hb_vmPushSymbol( hb_itemGetSymbol( pSymTest ) );
does not work


hb_vmPushSymbol( hb_dynsymSymbol( pSymTest ) );
works.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-09-21-20%3A29-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp19601498p19616094.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Mon Sep 22 17:35:42 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Sep 22 17:35:49 2008
Subject: [Harbour] 2008-09-21 20:29 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <6CA071D3-5B7B-45CF-AA42-8A329D665113@syenar.hu>
References: <19601498.post@talk.nabble.com>
	<04920F8E-4A1F-4BF5-B559-09F9E54B84B9@syenar.hu>
	<6CA071D3-5B7B-45CF-AA42-8A329D665113@syenar.hu>
Message-ID: <19616118.post@talk.nabble.com>


Hello Viktor

>with HB_RETWI( __DlgProc ) of course.
Works.

But:

hb_vmPushSymbol( hb_itemGetSymbol( pSymTest ) );
does not work


hb_vmPushSymbol( hb_dynsymSymbol( pSymTest ) );
works.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-09-21-20%3A29-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp19601498p19616118.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Mon Sep 22 17:55:19 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 17:55:31 2008
Subject: [Harbour] can load always a large number of library?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFE0@SRV02.deltain.net>
References: <20080922190631.GA24797@34-mo7-2.acn.waw.pl><AFB948164110ED43B5EB849E8DEEF03815EFDD@SRV02.deltain.net><20080922194447.GA10824@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815EFE0@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFE2@SRV02.deltain.net>

If I build with HB_BUILD_ST=No Must link BCC cw32mt library instead/additive of cw32 also in follow  Program?

function main
  ? HB_GTVERSION(), HB_GTVERSION(1)
  ? VERSION()
  ? hb_compiler()
  ? hb_buildInfo()
  wait "max"
return
#include "hbmemory.ch"
function hb_buildInfo()
return "DS avail=" + ltrim( str( memory( HB_MEM_BLOCK ) ) ) + "KB  " + ;
       "OS avail=" + ltrim( str( memory( HB_MEM_VM ) ) ) + "KB  " + ;
       "EMM avail=" + ltrim( str( memory( HB_MEM_EMS ) ) ) + "KB  " + ;
       "MemStat:" + iif( memory( HB_MEM_USEDMAX ) > 0, "On", "Off" ) + ;
       "  MT:" + iif( hb_mtvm(), "On", "Off" )
Return

If ia add cw32mt.lib it display:
WIN Harbour Terminal: Windows native console
Harbour 1.1.0dev (Rev. 9468)
Borland C++ 5.5.1 (32 bit)
DS avail=845288KB  OS avail=2061524KB  EMM avail=0KB  MemStat:Off  MT:On
Max

Without add cw32mt.lib I receive 
Error: Unresolved external '__beginthreadex' referenced from C:\HARBOUR\LIB\HBVM.LIB|thread
Error: Unresolved external '__endthreadex' referenced from C:\HARBOUR\LIB\HBVM.LIB|thread



How can display the version of operative system like "Microsoft Windows [Versione 6.0.6001]"?


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Massimo Belgrano
Sent: Monday, September 22, 2008 10:55 PM
To: Harbour Project Main Developer List.
Subject: RE: RE: RE: RE: [Harbour] can load always a large number of library?

Ok I made:
set C_USR=-DHB_FM_DL_ALLOC  -DHB_FM_STATISTICS_OFF -tWM -OS -Ov -Oi -Oc -Q

HB_BUILD_ST compile harbour in ST or MT mode w what can be done with an harbour compiled in ST or MT mode?
So I have compiled in st mode and now I can't run sample in tests\mt like mttest07 So if I WANT compile this test I must recompile harbour with HB_BUILD_ST=No?


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Monday, September 22, 2008 9:45 PM
To: Harbour Project Main Developer List.
Subject: Re: RE: RE: RE: [Harbour] can load always a large number of library?

On Mon, 22 Sep 2008, Massimo Belgrano wrote:
> Now I have this
> set C_USR=-DHB_WIN32_IO -DHB_FM_DL_ALLOC -DHB_MT_VM 
> -DHB_FM_STATISTICS_OFF -tWM -OS -Ov -Oi -Oc -Q set HB_BUILD_ST=yes I 
> have changed to set C_USR=-DHB_WIN32_IO -DHB_FM_DL_ALLOC  
> -DHB_FM_STATISTICS_OFF -tWM -OS -Ov -Oi -Oc -Q set HB_BUILD_ST=

Much better. With this settings you can create hbvm lib without MT references. I also suggest to remove fully
   set HB_BUILD_ST=
If you not use it anywhere then it's not necessary to clear it.
And please remove HB_WIN32_IO - this macro was never necessary in the whole [x]Harbour history you know. It was necessary only for few month some years ago. It's internal setting enabled automatically on platforms which may need it.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Mon Sep 22 18:01:07 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 18:01:51 2008
Subject: [Harbour] 2008-09-22 19:32 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0809221401k330c91d9k9389cf3beec74a85@mail.gmail.com>
References: <20080922173226.GA12665@34-mo7-2.acn.waw.pl>
	<9257026e0809221108o3c346776s81da413a6e3a43f0@mail.gmail.com>
	<20080922191132.GB24797@34-mo7-2.acn.waw.pl>
	<9257026e0809221253u26502d86i486caca8ec0becea@mail.gmail.com>
	<20080922202440.GA20488@34-mo7-2.acn.waw.pl>
	<9257026e0809221401k330c91d9k9389cf3beec74a85@mail.gmail.com>
Message-ID: <20080922220107.GA4029@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Lorenzo Fiorini wrote:
> If I've understood well if the bag name is "automatic" I need to give
> a unique tag name. As you can see today I use the same tag name
> "CURSOR" since I'm sure I create different bags.

You can keep it and still use the function to generate unique
bag names as before. It will work but the order bag name set by
you will be used only inside Harbour for tag/bag selection.

> Is there a simple way to have a unique and valid tag name?

You can use your own function with cyclic counter, f.e.:

   func newTagName()
      thread static nCounter := 0
      local cTag
      while .t.
         if ++nCounter == 1000
            nCounter := 1
         endif
         cTag := "TMP" + strzero( nCounter, 3 )
         if ordNumber( cTag ) == 0
            exit
         endif
      enddo
   return cTag

> Is it also a way to know if an index is TEMPORARY?

No. We do not have such DBOI_* action.

> I've looked into dbinfo.ch but I haven't found a DBOI_TEMPORARY | MEMORY.
> I ask this because sometimes I need "real different dbfs" so I combine
> copy and index and this will help to find places where I can add
> TEMPORARY clause.

Now you can only implement some local solution, f.e. if all normal
index are used in shared mode then you can check DBOI_SHARED flag.
Or you can use some unique order bag name, f.e.: "TEMPORARY" or like
in example above you can check for "TMP" prefix in tag name (ordName()).

best regards,
Przemek
From mbelgrano at deltain.it  Mon Sep 22 18:07:51 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 18:08:02 2008
Subject: [Harbour] can load always a large number of library?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFE2@SRV02.deltain.net>
References: <20080922190631.GA24797@34-mo7-2.acn.waw.pl><AFB948164110ED43B5EB849E8DEEF03815EFDD@SRV02.deltain.net><20080922194447.GA10824@34-mo7-2.acn.waw.pl><AFB948164110ED43B5EB849E8DEEF03815EFE0@SRV02.deltain.net>
	<AFB948164110ED43B5EB849E8DEEF03815EFE2@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFE3@SRV02.deltain.net>

I receive error Object Destructor Failure: Reference to freed block
WIN Harbour Terminal: Windows native console
Windows Vista 6.0.6001 Service Pack 1
Harbour 1.1.0dev (Rev. 9468)
Borland C++ 5.5.1 (32 bit)
DS avail=913956KB  OS avail=2061524KB  EMM avail=0KB  MemStat:Off  MT:On
max
Error BASE/1301  Object Destructor Failure: Reference to freed block



-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Massimo Belgrano
Sent: Monday, September 22, 2008 11:55 PM
To: Harbour Project Main Developer List.
Subject: RE: RE: RE: RE: [Harbour] can load always a large number of library?

If I build with HB_BUILD_ST=No Must link BCC cw32mt library instead/additive of cw32 also in follow  Program?

function main
  ? HB_GTVERSION(), HB_GTVERSION(1)
  ? VERSION()
  ? os()
  ? hb_compiler()
  ? hb_buildInfo()
  wait "max"
return
#include "hbmemory.ch"
function hb_buildInfo()
return "DS avail=" + ltrim( str( memory( HB_MEM_BLOCK ) ) ) + "KB  " + ;
       "OS avail=" + ltrim( str( memory( HB_MEM_VM ) ) ) + "KB  " + ;
       "EMM avail=" + ltrim( str( memory( HB_MEM_EMS ) ) ) + "KB  " + ;
       "MemStat:" + iif( memory( HB_MEM_USEDMAX ) > 0, "On", "Off" ) + ;
       "  MT:" + iif( hb_mtvm(), "On", "Off" ) Return

If ia add cw32mt.lib it display:
WIN Harbour Terminal: Windows native console Harbour 1.1.0dev (Rev. 9468) Borland C++ 5.5.1 (32 bit) DS avail=845288KB  OS avail=2061524KB  EMM avail=0KB  MemStat:Off  MT:On Max

Without add cw32mt.lib I receive
Error: Unresolved external '__beginthreadex' referenced from C:\HARBOUR\LIB\HBVM.LIB|thread
Error: Unresolved external '__endthreadex' referenced from C:\HARBOUR\LIB\HBVM.LIB|thread





-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Massimo Belgrano
Sent: Monday, September 22, 2008 10:55 PM
To: Harbour Project Main Developer List.
Subject: RE: RE: RE: RE: [Harbour] can load always a large number of library?

Ok I made:
set C_USR=-DHB_FM_DL_ALLOC  -DHB_FM_STATISTICS_OFF -tWM -OS -Ov -Oi -Oc -Q

HB_BUILD_ST compile harbour in ST or MT mode w what can be done with an harbour compiled in ST or MT mode?
So I have compiled in st mode and now I can't run sample in tests\mt like mttest07 So if I WANT compile this test I must recompile harbour with HB_BUILD_ST=No?


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Monday, September 22, 2008 9:45 PM
To: Harbour Project Main Developer List.
Subject: Re: RE: RE: RE: [Harbour] can load always a large number of library?

On Mon, 22 Sep 2008, Massimo Belgrano wrote:
> Now I have this
> set C_USR=-DHB_WIN32_IO -DHB_FM_DL_ALLOC -DHB_MT_VM 
> -DHB_FM_STATISTICS_OFF -tWM -OS -Ov -Oi -Oc -Q set HB_BUILD_ST=yes I 
> have changed to set C_USR=-DHB_WIN32_IO -DHB_FM_DL_ALLOC  
> -DHB_FM_STATISTICS_OFF -tWM -OS -Ov -Oi -Oc -Q set HB_BUILD_ST=

Much better. With this settings you can create hbvm lib without MT references. I also suggest to remove fully
   set HB_BUILD_ST=
If you not use it anywhere then it's not necessary to clear it.
And please remove HB_WIN32_IO - this macro was never necessary in the whole [x]Harbour history you know. It was necessary only for few month some years ago. It's internal setting enabled automatically on platforms which may need it.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Mon Sep 22 18:09:17 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 18:09:59 2008
Subject: [Harbour] Re: MSVS 2008: error with new alloc
In-Reply-To: <32233A4E-51F2-42F0-9C90-DBDE6C2F15B4@syenar.hu>
References: <05579321-71DF-474A-8416-62DE5F0BBEB5@syenar.hu>
	<451EA718-DE83-44AA-B1A7-ED0E3255AD43@syenar.hu>
	<20080922191704.GA6314@34-mo7-2.acn.waw.pl>
	<32233A4E-51F2-42F0-9C90-DBDE6C2F15B4@syenar.hu>
Message-ID: <20080922220917.GB4029@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Many thanks, that solved the problem.
> Shouldn't we make USE_DL_PREFIX the default
> for all compilers/platforms, to avoid such
> possible problems, and also to make this matter
> unified across all our builds?

In fact it's a little bit less efficient because
two memory managers are used: one for CRTL and second
for Harbour. It's not a big problem because the 1-st
one allocates usually only small amount of memory
(we do not use any memory expensive CRTL functions
anyhow it reduce the address space and also causes
that more memory is allocated from system then necessary
because each MM allocates them in bigger peaces then
application requested.
If possible it's always better to use only one memory
manager. Anyhow final decision for above setting we
should take when we we will know real test results
from different C compilers and environments. Maybe
default MSVC MM is good enough so it not necessary
to use dlmalloc.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Sep 22 18:17:45 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 18:18:29 2008
Subject: [Harbour] Re: SIGFPE during build of hbtest
In-Reply-To: <48D803ED.9080608@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48D803ED.9080608@mail.udg.mx>
Message-ID: <20080922221745.GC4029@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, David Arturo Macias Corona wrote:

Hi,

> I think is due to local environment
> Harbour does not use bison but for xHarbour was hard to find the right one.

To be precise. Harbour uses bison but it's necessary only when you
want to modify some grammar rules yourself in harbour *.y files so
it's rather for core developers. It's not necessary for normal users.

BTW if possible please try speedtst.prg with current MT HVM on OS2.
    I enabled stack macros for these builds and I'd like to know
    if it works and what is the speed difference to your previous
    tests to calculate real overhead caused by accessing TLS date
    in OS2.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Sep 22 18:25:46 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 18:26:29 2008
Subject: [Harbour] can load always a large number of
	library?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFE0@SRV02.deltain.net>
References: <20080922194447.GA10824@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815EFE0@SRV02.deltain.net>
Message-ID: <20080922222546.GD4029@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Massimo Belgrano wrote:

Hi Massimo,

> Ok I made:
> set C_USR=-DHB_FM_DL_ALLOC  -DHB_FM_STATISTICS_OFF -tWM -OS -Ov -Oi -Oc -Q
> HB_BUILD_ST compile harbour in ST or MT mode w
> what can be done with an harbour compiled in ST or MT mode?
> So I have compiled in st mode and now I can't run sample in tests\mt like mttest07

make copy of bld.bat, change hbvm.lib to hbvmmt.lib and add cw32mt.lib and
-tWN in line which executes bcc32.

> So if I WANT compile this test I must recompile harbour with HB_BUILD_ST=No?

Please forget that such switch exists. Just like many others you are
collecting from archive messages which are not valid from years.
It's a public forum and each time you public them you confused other
users.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Sep 22 18:27:47 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 18:28:30 2008
Subject: [Harbour] can load always a large number of
	library?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFE2@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EFE0@SRV02.deltain.net>
	<AFB948164110ED43B5EB849E8DEEF03815EFE2@SRV02.deltain.net>
Message-ID: <20080922222747.GE4029@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Massimo Belgrano wrote:
> If I build with HB_BUILD_ST=No Must link BCC cw32mt library instead/additive
> of cw32 also in follow  Program?

In each program. It forces only MT mode without ST one.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Sep 22 18:32:19 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 18:33:02 2008
Subject: [Harbour] can load always a large number of
	library?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFE3@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EFE2@SRV02.deltain.net>
	<AFB948164110ED43B5EB849E8DEEF03815EFE3@SRV02.deltain.net>
Message-ID: <20080922223219.GF4029@34-mo7-2.acn.waw.pl>

On Tue, 23 Sep 2008, Massimo Belgrano wrote:

Hi Massimo,

> I receive error Object Destructor Failure: Reference to freed block
> WIN Harbour Terminal: Windows native console
> Windows Vista 6.0.6001 Service Pack 1
> Harbour 1.1.0dev (Rev. 9468)
> Borland C++ 5.5.1 (32 bit)
> DS avail=913956KB  OS avail=2061524KB  EMM avail=0KB  MemStat:Off  MT:On
> max
> Error BASE/1301  Object Destructor Failure: Reference to freed block

I can only guess that experimenting with different build flags you
finally created wrong binaries or you mixed libraries from different builds.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Sep 22 18:36:08 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 18:36:18 2008
Subject: [Harbour] 2008-09-21 20:29 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <19616094.post@talk.nabble.com>
References: <19601498.post@talk.nabble.com>
	<04920F8E-4A1F-4BF5-B559-09F9E54B84B9@syenar.hu>
	<6CA071D3-5B7B-45CF-AA42-8A329D665113@syenar.hu>
	<19616094.post@talk.nabble.com>
Message-ID: <4D6E3214-E252-4A10-94E4-91772790BE20@syenar.hu>

>
Hi Pritpal,

> Hello Viktor
>
>> with HB_RETWI( __DlgProc ) of course.
> Works.

Thanks.

Do you want to commit this? (with the things below)

> But:
>
> hb_vmPushSymbol( hb_itemGetSymbol( pSymTest ) );
> does not work
>
>
> hb_vmPushSymbol( hb_dynsymSymbol( pSymTest ) );
> works.

Hm, this seems like a different subject, I'm not
really sure what is the difference, but I don't
remember changing any of these recently.

Brgds,
Viktor

From mbelgrano at deltain.it  Mon Sep 22 18:55:53 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 22 18:56:06 2008
Subject: [Harbour] can load always a large number
	oflibrary?
In-Reply-To: <20080922222546.GD4029@34-mo7-2.acn.waw.pl>
References: <20080922194447.GA10824@34-mo7-2.acn.waw.pl><AFB948164110ED43B5EB849E8DEEF03815EFE0@SRV02.deltain.net>
	<20080922222546.GD4029@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFE4@SRV02.deltain.net>

Sorry for my confusion but i have at least one million of question in my heads
The biggest problem is that I can't understand what is "mt mode" and what is "st mode"
Can I made any application (mt/st) in either mode in different way? (for example -tWN)
I have undestrand That a mt application is more slow than st
But limitation of "mt mode" and "st mode" are unknow

Thanks for your patience



-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Tuesday, September 23, 2008 12:26 AM
To: Harbour Project Main Developer List.
Subject: Re: RE: RE: RE: RE: [Harbour] can load always a large number oflibrary?

On Mon, 22 Sep 2008, Massimo Belgrano wrote:

Hi Massimo,

> Ok I made:
> set C_USR=-DHB_FM_DL_ALLOC  -DHB_FM_STATISTICS_OFF -tWM -OS -Ov -Oi -Oc -Q
> HB_BUILD_ST compile harbour in ST or MT mode w
> what can be done with an harbour compiled in ST or MT mode?
> So I have compiled in st mode and now I can't run sample in tests\mt like mttest07

make copy of bld.bat, change hbvm.lib to hbvmmt.lib and add cw32mt.lib and
-tWN in line which executes bcc32.

> So if I WANT compile this test I must recompile harbour with HB_BUILD_ST=No?

Please forget that such switch exists. Just like many others you are
collecting from archive messages which are not valid from years.
It's a public forum and each time you public them you confused other
users.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Mon Sep 22 19:06:45 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 19:07:30 2008
Subject: [Harbour] 2008-09-21 20:29 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <4D6E3214-E252-4A10-94E4-91772790BE20@syenar.hu>
References: <19601498.post@talk.nabble.com>
	<04920F8E-4A1F-4BF5-B559-09F9E54B84B9@syenar.hu>
	<6CA071D3-5B7B-45CF-AA42-8A329D665113@syenar.hu>
	<19616094.post@talk.nabble.com>
	<4D6E3214-E252-4A10-94E4-91772790BE20@syenar.hu>
Message-ID: <20080922230645.GA5952@34-mo7-2.acn.waw.pl>

On Tue, 23 Sep 2008, Szak?ts Viktor wrote:

Hi,

>> hb_vmPushSymbol( hb_itemGetSymbol( pSymTest ) );
>> does not work
>> hb_vmPushSymbol( hb_dynsymSymbol( pSymTest ) );
>> works.
> Hm, this seems like a different subject, I'm not
> really sure what is the difference, but I don't
> remember changing any of these recently.

If pSymTest is PHB_DYNS then:
   hb_vmPushSymbol( hb_dynsymSymbol( pSymTest ) );

or better:
   hb_vmPushDynSym( pSymTest );

should be used.

But if it's PHB_ITEM with symbol inside then:
   hb_vmPushSymbol( hb_itemGetSymbol( pSymTest ) );

or better:
   hb_vmPush( pSymTest );

should be used.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Sep 22 19:51:13 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 22 19:51:25 2008
Subject: [Harbour] Re: MSVS 2008: error with new alloc
In-Reply-To: <20080922220917.GB4029@34-mo7-2.acn.waw.pl>
References: <05579321-71DF-474A-8416-62DE5F0BBEB5@syenar.hu>
	<451EA718-DE83-44AA-B1A7-ED0E3255AD43@syenar.hu>
	<20080922191704.GA6314@34-mo7-2.acn.waw.pl>
	<32233A4E-51F2-42F0-9C90-DBDE6C2F15B4@syenar.hu>
	<20080922220917.GB4029@34-mo7-2.acn.waw.pl>
Message-ID: <DD709B32-8DF7-4573-87F2-D0C06E959A98@syenar.hu>

Hi Przemek,

Pls find attached some speedtst/memtst outputs.
Looks like dlalloc is well suited for MSVC with
a significant speedup in ST mode, and mostly
better results in MT mode.

Tested with MSVS2008 SP1, XPPro SP3, Intel 865 + P4HT 2.6, 3GB RAM.

                                               ST       ST        
MT       MT
                                          DLALLOC      STD   
DLALLOC      STD
======================================= -------- -------- --------  
--------
c:=L_C ->                                   0.08     0.09     0.28      
0.30
n:=L_N ->                                   0.06     0.09     0.20      
0.19
d:=L_D ->                                   0.05     0.06     0.19      
0.16
c:=M_C ->                                   0.09     0.09     0.53      
0.31
n:=M_N ->                                   0.05     0.08     0.50      
0.19
d:=M_D ->                                   0.08     0.06     0.19      
0.20
(sh) c:=F_C ->                              0.23     0.55     0.78      
0.64
(sh) n:=F_N ->                              0.34     0.38     0.58      
0.45
(sh) d:=F_D ->                              0.19     0.17     0.31      
0.28
(ex) c:=F_C ->                              0.22     0.48     0.70      
0.63
(ex) n:=F_N ->                              0.36     0.36     0.47      
0.45
(ex) d:=F_D ->                              0.19     0.17     0.30      
0.28
n:=o:GenCode ->                             0.22     0.28     0.77      
0.77
n:=o[8] ->                                  0.17     0.19     0.45      
0.45
round(i/1000,2) ->                          0.38     0.41     0.94      
0.91
str(i/1000) ->                              0.72     1.02     1.52      
1.53
val(a3[i%ARR_LEN+1]) ->                     0.78     0.78     1.56      
1.58
dtos(j+i%10000-5000) ->                     0.73     0.97     1.80      
1.89
eval({||i%ARR_LEN}) ->                      0.39     0.39     1.08      
1.14
eval({|x|x%ARR_LEN},i) ->                   0.41     0.41     1.17      
1.20
eval({|x|f1(x)},i) ->                       0.53     0.56     2.38      
1.97
&('f1('+str(i)+')') ->                      3.88     9.13     9.38      
8.70
eval([&('{|x|f1(x)}')]) ->                  0.55     0.56     2.38      
1.97
j := valtype(a)+valtype(i) ->               0.52     0.84     1.97      
2.02
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->      1.19     1.52     2.84      
2.89
j := val(a2[i%ARR_LEN+1]) ->                0.84     0.84     1.75      
1.81
j := a2[i%ARR_LEN+1] == s ->                0.53     0.56     1.34      
1.38
j := a2[i%ARR_LEN+1] = s ->                 0.58     0.61     1.44      
1.52
j := a2[i%ARR_LEN+1] >= s ->                0.58     0.59     1.44      
1.50
j := a2[i%ARR_LEN+1] < s ->                 0.56     0.61     1.42      
1.50
aadd(aa,{i,j,s,a,a2,t,bc}) ->               1.72     3.59     5.73      
5.80
f0() ->                                     0.22     0.22     0.66      
0.70
f1(i) ->                                    0.28     0.28     0.92      
0.98
f2(c[8]) ->                                 0.25     0.23     0.86      
0.86
f2(c[40000]) ->                             0.25     0.27     0.84      
0.84
f2(@c[40000]) ->                            0.22     0.22     0.81      
0.81
f2(c[40000]); c2:=c ->                      0.34     0.34     1.13      
1.13
f2(@c[40000]); c2:=c ->                     0.31     0.31     1.14      
1.11
f3(a,a2,c,i,j,t,bc) ->                      0.55     0.55     2.00      
2.03
f2(a2) ->                                   0.25     0.23     0.86      
0.86
s:=f4() ->                                  1.33     2.13     2.91      
2.92
s:=f5() ->                                  0.42     0.70     1.52      
1.52
ascan(a,i%ARR_LEN) ->                       0.50     0.50     1.20      
1.19
ascan(a2,c+chr(i%64+64)) ->                 1.64     2.06     3.53      
3.77
ascan(a,{|x|x==i%ARR_LEN}) ->               4.45     4.91    17.34     
13.84
= 
= 
= 
= 
= 
========================================================================
total application time:                    32.52    44.42    96.91     
92.02
total real time:                           32.64    44.61    97.16     
93.53

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: results.zip
Type: application/zip
Size: 7185 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080923/cf217ba3/results.zip
-------------- next part --------------


On 2008.09.23., at 0:09, Przemyslaw Czerpak wrote:

> On Mon, 22 Sep 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> Many thanks, that solved the problem.
>> Shouldn't we make USE_DL_PREFIX the default
>> for all compilers/platforms, to avoid such
>> possible problems, and also to make this matter
>> unified across all our builds?
>
> In fact it's a little bit less efficient because
> two memory managers are used: one for CRTL and second
> for Harbour. It's not a big problem because the 1-st
> one allocates usually only small amount of memory
> (we do not use any memory expensive CRTL functions
> anyhow it reduce the address space and also causes
> that more memory is allocated from system then necessary
> because each MM allocates them in bigger peaces then
> application requested.
> If possible it's always better to use only one memory
> manager. Anyhow final decision for above setting we
> should take when we we will know real test results
> from different C compilers and environments. Maybe
> default MSVC MM is good enough so it not necessary
> to use dlmalloc.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Mon Sep 22 23:52:00 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 22 23:52:42 2008
Subject: [Harbour] Re: MSVS 2008: error with new alloc
In-Reply-To: <DD709B32-8DF7-4573-87F2-D0C06E959A98@syenar.hu>
References: <05579321-71DF-474A-8416-62DE5F0BBEB5@syenar.hu>
	<451EA718-DE83-44AA-B1A7-ED0E3255AD43@syenar.hu>
	<20080922191704.GA6314@34-mo7-2.acn.waw.pl>
	<32233A4E-51F2-42F0-9C90-DBDE6C2F15B4@syenar.hu>
	<20080922220917.GB4029@34-mo7-2.acn.waw.pl>
	<DD709B32-8DF7-4573-87F2-D0C06E959A98@syenar.hu>
Message-ID: <20080923035159.GA17808@34-mo7-2.acn.waw.pl>

On Tue, 23 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Pls find attached some speedtst/memtst outputs.
> Looks like dlalloc is well suited for MSVC with
> a significant speedup in ST mode, and mostly
> better results in MT mode.
> Tested with MSVS2008 SP1, XPPro SP3, Intel 865 + P4HT 2.6, 3GB RAM.
[...]
> ascan(a,{|x|x==i%ARR_LEN}) ->               4.45     4.91    17.34    13.84
> =============================================================================
> total application time:                    32.52    44.42    96.91    92.02

I'm surprised with this results.
In ascan(a,{|x|x==i%ARR_LEN}) only two one small memory blocks are
allocated but the speed difference is huge.
Anyhow the MT overhead is too big to say sth more now.
Let's try to reduce it.
MSVC builds does not use native TLS support by default.
Please enable it be recompiling Harbour with HB_USE_TLS
macro. If native TLS supports works well in MSVC then
it should give noticeable speed improvement. Please send
the results here.
If everything works as expected and you can also test other MSVC
versions then please enable native TLS support in default MSVC
builds in hbthread.h

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Tue Sep 23 00:34:24 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Sep 23 00:34:29 2008
Subject: [Harbour] 2008-09-22 19:32 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080922220107.GA4029@34-mo7-2.acn.waw.pl>
References: <20080922173226.GA12665@34-mo7-2.acn.waw.pl>
	<9257026e0809221108o3c346776s81da413a6e3a43f0@mail.gmail.com>
	<20080922191132.GB24797@34-mo7-2.acn.waw.pl>
	<9257026e0809221253u26502d86i486caca8ec0becea@mail.gmail.com>
	<20080922202440.GA20488@34-mo7-2.acn.waw.pl>
	<9257026e0809221401k330c91d9k9389cf3beec74a85@mail.gmail.com>
	<20080922220107.GA4029@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809222134y7f120b7ble3559821f928a6df@mail.gmail.com>

On Tue, Sep 23, 2008 at 12:01 AM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> You can keep it and still use the function to generate unique
> bag names as before. It will work but the order bag name set by
> you will be used only inside Harbour for tag/bag selection.
...
> in example above you can check for "TMP" prefix in tag name (ordName()).

Many thanks for your help.

best regards,
Lorenzo
From maurilio.longo at libero.it  Tue Sep 23 03:43:15 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Sep 23 03:43:22 2008
Subject: [Harbour] Re: SIGFPE during build of hbtest
In-Reply-To: <48D803ED.9080608@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48D803ED.9080608@mail.udg.mx>
Message-ID: <48D89E13.6010203@libero.it>

David Arturo Macias Corona wrote:
>> It's possible that this problem is local to GCC builds anyhow
>> it should be located and fixed.
> 
Maybe it's because I'm using a SMP kernel? (on a PIV HT cpu, though, not a
real dual or more core).

I'll try a debug build asap.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From dmacias at mail.udg.mx  Tue Sep 23 04:30:52 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Sep 23 04:30:55 2008
Subject: [Harbour] Re: 2008-09-19 22:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48D8A93C.20504@mail.udg.mx>

Przemek:

>> For mttest05:
[...]
>> result:
>> 0 errors

>Thank you very much for your tests.
>Looks that it works correctly anyhow I do not
>like the way it is done. I hope that OS2 users
>will clean this code in the future.

Maurilio, are you reading ?  :-)
( yes, I know you can clean it )


>2008-09-21 23:03 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  + harbour/tests/mt/mttest08.prg
>    + added test code for thread memvars inheritance

Results below for OS/2:mttest08.prg:mt


>The speed difference was the cost of using mutexes to protect
>access to reference counters. As you can see they are very slow
>in OS2 - much slower then futexes in Linux and critical sections
>in Windows. Using assembler inlined code for atomic incrementation/
>decrementation of reference counters greatly improved the speed
>and reduce MT HVM overhead from ~89 sec. to ~20 sec. so the real
>speed improvement calculated only for MT overhead is much better.
>Now we can try to reduce the rest from this 20 sec. In OS2 it should
>be possible to nicely use stack macros even without native compiler
>TLS support. I'll make such modification in a while and I would like
>to ask you to repeat the speedtst.prg tests with new SVN code.

>2008-09-22 16:14 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbstack.h
>  * harbour/source/vm/estack.c
>    + added support for using stack macros without native compiler TLS
>      support in MT mode.
>    * enabled stack macros by default for OS2 MT builds
>      David, if possible please try speedtst.prg with current MT HVM

>BTW if possible please try speedtst.prg with current MT HVM on OS2.
>    I enabled stack macros for these builds and I'd like to know
>    if it works and what is the speed difference to your previous
>    tests to calculate real overhead caused by accessing TLS date
>    in OS2.

Below are results of current Harbour under eComStation 1.2MR
gcc 3.3.5

ST
    total application time:                              47.13
    total real time:                                     47.14
MT
    total application time:                              55.08
    total real time:                                     55.08

before:
MT
    total application time:                              67.05
    total real time:                                     67.05
and older before:
    total application time:                             135.88
    total real time:                                    135.88

ST keep same as previous, but MT continue falling
   135.88  -->  67.05  --> 55.08 seconds

Now MT is only 17 % slower than ST   :-)

You improved MT performance in few days, so we are near days where MT
can be used in place of ST without too much speed penalty

I have not started MT tests in Win32 / Linux yet. Both will be in
Core2Duo 2.0 so a great speed difference should be expected respect to
current Athlon 2200+ tests

Thanks for your work

David Macias


..............................

[E:\harbour809mt\harbour\tests\mt]mttest08_mt.exe

Main start

Do not inherit memvars.
main thread:
     PUB1: C -> main:public1
     PUB2: C -> main:public2
     PRV1: C -> main:private1
     PRV2: C -> main:private2
child thread:
     PUB1: U
     PUB2: U
     PRV1: U
     PRV2: U
assign...
child thread:
     PUB1: C -> thread:public1
     PUB2: C -> thread:public2
     PRV1: C -> thread:private1
     PRV2: C -> thread:private2
main thread:
     PUB1: C -> main:public1
     PUB2: C -> main:public2
     PRV1: C -> main:private1
     PRV2: C -> main:private2
Press any key to continue...


Inherit copy of publics.
main thread:
     PUB1: C -> main:public1
     PUB2: C -> main:public2
     PRV1: C -> main:private1
     PRV2: C -> main:private2
child thread:
     PUB1: C -> main:public1
     PUB2: C -> main:public2
     PRV1: U
     PRV2: U
assign...
child thread:
     PUB1: C -> thread:public1
     PUB2: C -> thread:public2
     PRV1: C -> thread:private1
     PRV2: C -> thread:private2
main thread:
     PUB1: C -> main:public1
     PUB2: C -> main:public2
     PRV1: C -> main:private1
     PRV2: C -> main:private2
Press any key to continue...

Inherit copy of privates.
main thread:
     PUB1: C -> main:public1
     PUB2: C -> main:public2
     PRV1: C -> main:private1
     PRV2: C -> main:private2
child thread:
     PUB1: U
     PUB2: U
     PRV1: C -> main:private1
     PRV2: C -> main:private2
assign...
child thread:
     PUB1: C -> thread:public1
     PUB2: C -> thread:public2
     PRV1: C -> thread:private1
     PRV2: C -> thread:private2
main thread:
     PUB1: C -> main:public1
     PUB2: C -> main:public2
     PRV1: C -> main:private1
     PRV2: C -> main:private2
Press any key to continue...

Inherit copy of publics and privates.
main thread:
     PUB1: C -> main:public1
     PUB2: C -> main:public2
     PRV1: C -> main:private1
     PRV2: C -> main:private2
child thread:
     PUB1: C -> main:public1
     PUB2: C -> main:public2
     PRV1: C -> main:private1
     PRV2: C -> main:private2
assign...
child thread:
     PUB1: C -> thread:public1
     PUB2: C -> thread:public2
     PRV1: C -> thread:private1
     PRV2: C -> thread:private2
main thread:
     PUB1: C -> main:public1
     PUB2: C -> main:public2
     PRV1: C -> main:private1
     PRV2: C -> main:private2
Press any key to continue...

Share publics with child threads.
main thread:
     PUB1: C -> main:public1
     PUB2: C -> main:public2
     PRV1: C -> main:private1
     PRV2: C -> main:private2
child thread:
     PUB1: C -> main:public1
     PUB2: C -> main:public2
     PRV1: U
     PRV2: U
assign...
child thread:
     PUB1: C -> thread:public1
     PUB2: C -> thread:public2
     PRV1: C -> thread:private1
     PRV2: C -> thread:private2
main thread:
     PUB1: C -> thread:public1
     PUB2: C -> thread:public2
     PRV1: C -> main:private1
     PRV2: C -> main:private2
Press any key to continue...

Share privates with child threads.
main thread:
     PUB1: C -> main:public1
     PUB2: C -> main:public2
     PRV1: C -> main:private1
     PRV2: C -> main:private2
child thread:
     PUB1: U
     PUB2: U
     PRV1: C -> main:private1
     PRV2: C -> main:private2
assign...
child thread:
     PUB1: C -> thread:public1
     PUB2: C -> thread:public2
     PRV1: C -> thread:private1
     PRV2: C -> thread:private2
main thread:
     PUB1: C -> main:public1
     PUB2: C -> main:public2
     PRV1: C -> thread:private1
     PRV2: C -> thread:private2
Press any key to continue...

Share publics and privates with child threads.
main thread:
     PUB1: C -> main:public1
     PUB2: C -> main:public2
     PRV1: C -> main:private1
     PRV2: C -> main:private2
child thread:
     PUB1: C -> main:public1
     PUB2: C -> main:public2
     PRV1: C -> main:private1
     PRV2: C -> main:private2
assign...
child thread:
     PUB1: C -> thread:public1
     PUB2: C -> thread:public2
     PRV1: C -> thread:private1
     PRV2: C -> thread:private2
main thread:
     PUB1: C -> thread:public1
     PUB2: C -> thread:public2
     PRV1: C -> thread:private1
     PRV2: C -> thread:private2
Press any key to continue...


..............................

[E:\harbour809mt\harbour\tests]speedtst_st.exe

Startup loop to increase CPU clock...

09/23/08 02:08:43 Harbour 1.1.0dev (Rev. 9469), OS/2 4.50
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.14
CPU usage -> secondsCPU()

c:=L_C ->                                             0.10
n:=L_N ->                                             0.09
d:=L_D ->                                             0.09
c:=M_C ->                                             0.12
n:=M_N ->                                             0.10
d:=M_D ->                                             0.10
(sh) c:=F_C ->                                        0.45
(sh) n:=F_N ->                                        0.34
(sh) d:=F_D ->                                        0.23
(ex) c:=F_C ->                                        0.43
(ex) n:=F_N ->                                        0.34
(ex) d:=F_D ->                                        0.21
n:=o:GenCode ->                                       0.32
n:=o[8] ->                                            0.21
round(i/1000,2) ->                                    0.45
str(i/1000) ->                                        1.34
val(a3[i%ARR_LEN+1]) ->                               0.91
dtos(j+i%10000-5000) ->                               1.07
eval({||i%ARR_LEN}) ->                                0.46
eval({|x|x%ARR_LEN},i) ->                             0.51
eval({|x|f1(x)},i) ->                                 0.74
&('f1('+str(i)+')') ->                                7.96
eval([&('{|x|f1(x)}')]) ->                            0.75
j := valtype(a)+valtype(i) ->                         0.93
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                1.94
j := val(a2[i%ARR_LEN+1]) ->                          0.97
j := a2[i%ARR_LEN+1] == s ->                          0.64
j := a2[i%ARR_LEN+1] = s ->                           0.75
j := a2[i%ARR_LEN+1] >= s ->                          0.70
j := a2[i%ARR_LEN+1] < s ->                           0.71
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         2.37
f0() ->                                               0.27
f1(i) ->                                              0.43
f2(c[8]) ->                                           0.32
f2(c[40000]) ->                                       0.32
f2(@c[40000]) ->                                      0.30
f2(c[40000]); c2:=c ->                                0.42
f2(@c[40000]); c2:=c ->                               0.42
f3(a,a2,c,i,j,t,bc) ->                                0.73
f2(a2) ->                                             0.32
s:=f4() ->                                            1.34
s:=f5() ->                                            0.73
ascan(a,i%ARR_LEN) ->                                 0.61
ascan(a2,c+chr(i%64+64)) ->                           2.55
ascan(a,{|x|x==i%ARR_LEN}) ->                         5.53
============================================================
total application time:                              47.13
total real time:                                     47.14


..............................

[E:\harbour809mt\harbour\tests]speedtst_mt.exe

Startup loop to increase CPU clock...

09/23/08 02:09:48 Harbour 1.1.0dev (Rev. 9469) (MT), OS/2 4.50
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.17
CPU usage -> secondsCPU()

c:=L_C ->                                             0.14
n:=L_N ->                                             0.12
d:=L_D ->                                             0.12
c:=M_C ->                                             0.15
n:=M_N ->                                             0.13
d:=M_D ->                                             0.13
(sh) c:=F_C ->                                        0.43
(sh) n:=F_N ->                                        0.38
(sh) d:=F_D ->                                        0.22
(ex) c:=F_C ->                                        0.43
(ex) n:=F_N ->                                        0.37
(ex) d:=F_D ->                                        0.22
n:=o:GenCode ->                                       0.39
n:=o[8] ->                                            0.25
round(i/1000,2) ->                                    0.52
str(i/1000) ->                                        1.37
val(a3[i%ARR_LEN+1]) ->                               0.97
dtos(j+i%10000-5000) ->                               1.10
eval({||i%ARR_LEN}) ->                                0.52
eval({|x|x%ARR_LEN},i) ->                             0.58
eval({|x|f1(x)},i) ->                                 0.86
&('f1('+str(i)+')') ->                                8.62
eval([&('{|x|f1(x)}')]) ->                            0.89
j := valtype(a)+valtype(i) ->                         1.07
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                1.94
j := val(a2[i%ARR_LEN+1]) ->                          1.02
j := a2[i%ARR_LEN+1] == s ->                          0.73
j := a2[i%ARR_LEN+1] = s ->                           0.87
j := a2[i%ARR_LEN+1] >= s ->                          0.86
j := a2[i%ARR_LEN+1] < s ->                           0.87
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         3.43
f0() ->                                               0.33
f1(i) ->                                              0.49
f2(c[8]) ->                                           0.38
f2(c[40000]) ->                                       0.39
f2(@c[40000]) ->                                      0.36
f2(c[40000]); c2:=c ->                                0.52
f2(@c[40000]); c2:=c ->                               0.50
f3(a,a2,c,i,j,t,bc) ->                                0.87
f2(a2) ->                                             0.39
s:=f4() ->                                            1.42
s:=f5() ->                                            0.79
ascan(a,i%ARR_LEN) ->                                 0.74
ascan(a2,c+chr(i%64+64)) ->                           2.69
ascan(a,{|x|x==i%ARR_LEN}) ->                         7.66
============================================================
total application time:                              55.08
total real time:                                     55.08

..............................


From harbour.01 at syenar.hu  Tue Sep 23 05:16:03 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 05:16:19 2008
Subject: [Harbour] Re: MSVS 2008: error with new alloc
In-Reply-To: <20080923035159.GA17808@34-mo7-2.acn.waw.pl>
References: <05579321-71DF-474A-8416-62DE5F0BBEB5@syenar.hu>
	<451EA718-DE83-44AA-B1A7-ED0E3255AD43@syenar.hu>
	<20080922191704.GA6314@34-mo7-2.acn.waw.pl>
	<32233A4E-51F2-42F0-9C90-DBDE6C2F15B4@syenar.hu>
	<20080922220917.GB4029@34-mo7-2.acn.waw.pl>
	<DD709B32-8DF7-4573-87F2-D0C06E959A98@syenar.hu>
	<20080923035159.GA17808@34-mo7-2.acn.waw.pl>
Message-ID: <7D5CEED9-C435-41F4-9AD2-6B0FB139DB3C@syenar.hu>

Hi Przemek,

First of all I did a mistake, so I've redone
speedtest MT/DLALLOC and memtest MT&ST/DLALLOC.

I've also added results with TLS. Looks like TLS
has enhanced performance by a factor of two (so I'll
enable it), DLALLOC is also consistently better,
so we should also enable it. In fact MT+DLALLOC
speed is just slightly slower than ST without
DLALLOC (like 1.0.1), so we've basically gained
back the MT speed loss.

[ As for other versions I only have MSVS2005, where
I reckon the speeds would be quite similar - but
had no time to redo all these tests for now -,
someone should test WinCE, MSVC6 versions, and
once we should also test 64-bit, but I'll leave
that for later. ]

BTW, can we change memtst to output to stdout,
not require key presses, and also for both tests
to include build-time switches in their outputs.
These would ease testing.

                                               ST       ST        
MT       MT       ST       ST       MT       MT
                                          DLALLOC      STD   
DLALLOC      STD  DLALLOC      STD  DLALLOC      STD
                                                                                  TLS 
       TLS      TLS      TLS
======================================= -------- -------- --------  
-------- -------- -------- -------- --------
c:=L_C ->                                   0.08     0.09     0.30      
0.30     0.06     0.09     0.19     0.19
n:=L_N ->                                   0.06     0.09     0.16      
0.19     0.05     0.06     0.08     0.08
d:=L_D ->                                   0.05     0.06     0.17      
0.16     0.06     0.06     0.08     0.09
c:=M_C ->                                   0.09     0.09     0.31      
0.31     0.09     0.11     0.19     0.20
n:=M_N ->                                   0.05     0.08     0.19      
0.19     0.06     0.08     0.09     0.08
d:=M_D ->                                   0.08     0.06     0.20      
0.20     0.09     0.06     0.09     0.08
(sh) c:=F_C ->                              0.23     0.55     0.67      
0.64     0.23     0.53     0.50     0.53
(sh) n:=F_N ->                              0.34     0.38     0.50      
0.45     0.34     0.38     0.36     0.34
(sh) d:=F_D ->                              0.19     0.17     0.31      
0.28     0.19     0.17     0.19     0.17
(ex) c:=F_C ->                              0.22     0.48     0.66      
0.63     0.25     0.50     0.50     0.53
(ex) n:=F_N ->                              0.36     0.36     0.52      
0.45     0.34     0.38     0.34     0.34
(ex) d:=F_D ->                              0.19     0.17     0.30      
0.28     0.19     0.19     0.19     0.17
n:=o:GenCode ->                             0.22     0.28     0.75      
0.77     0.23     0.27     0.38     0.36
n:=o[8] ->                                  0.17     0.19     0.45      
0.45     0.16     0.20     0.27     0.28
round(i/1000,2) ->                          0.38     0.41     0.94      
0.91     0.38     0.41     0.39     0.44
str(i/1000) ->                              0.72     1.02     1.45      
1.53     0.70     0.97     1.02     1.06
val(a3[i%ARR_LEN+1]) ->                     0.78     0.78     1.59      
1.58     0.80     0.78     0.98     0.98
dtos(j+i%10000-5000) ->                     0.73     0.97     1.72      
1.89     0.72     0.97     1.09     1.16
eval({||i%ARR_LEN}) ->                      0.39     0.39     1.11      
1.14     0.41     0.36     0.55     0.53
eval({|x|x%ARR_LEN},i) ->                   0.41     0.41     1.20      
1.20     0.41     0.41     0.56     0.56
eval({|x|f1(x)},i) ->                       0.53     0.56     2.39      
1.97     0.52     0.56     0.73     0.70
&('f1('+str(i)+')') ->                      3.88     9.13     8.94      
8.70     6.91     6.88     8.94     7.25
eval([&('{|x|f1(x)}')]) ->                  0.55     0.56     2.44      
1.97     0.55     0.55     0.73     0.75
j := valtype(a)+valtype(i) ->               0.52     0.84     1.94      
2.02     1.45     0.81     1.00     1.05
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->      1.19     1.52     2.84      
2.89     1.19     1.50     1.72     1.77
j := val(a2[i%ARR_LEN+1]) ->                0.84     0.84     1.86      
1.81     0.84     0.84     1.06     1.05
j := a2[i%ARR_LEN+1] == s ->                0.53     0.56     1.39      
1.38     0.53     0.55     0.84     0.84
j := a2[i%ARR_LEN+1] = s ->                 0.58     0.61     1.47      
1.52     0.59     0.61     0.89     0.88
j := a2[i%ARR_LEN+1] >= s ->                0.58     0.59     1.50      
1.50     0.56     0.59     0.89     0.88
j := a2[i%ARR_LEN+1] < s ->                 0.56     0.61     1.47      
1.50     0.58     0.59     0.88     0.88
aadd(aa,{i,j,s,a,a2,t,bc}) ->               1.72     3.59     4.22      
5.80     1.75     3.59     3.14     4.59
f0() ->                                     0.22     0.22     0.70      
0.70     0.22     0.22     0.23     0.27
f1(i) ->                                    0.28     0.28     0.95      
0.98     0.28     0.28     0.36     0.34
f2(c[8]) ->                                 0.25     0.23     0.89      
0.86     0.20     0.23     0.39     0.44
f2(c[40000]) ->                             0.25     0.27     1.05      
0.84     0.25     0.27     0.38     0.38
f2(@c[40000]) ->                            0.22     0.22     1.28      
0.81     0.22     0.22     0.27     0.25
f2(c[40000]); c2:=c ->                      0.34     0.34     1.17      
1.13     0.34     0.34     0.58     0.56
f2(@c[40000]); c2:=c ->                     0.31     0.31     1.17      
1.11     0.31     0.33     0.45     0.44
f3(a,a2,c,i,j,t,bc) ->                      0.55     0.55     2.00      
2.03     0.52     0.55     0.97     0.95
f2(a2) ->                                   0.25     0.23     0.89      
0.86     0.25     0.25     0.38     0.38
s:=f4() ->                                  1.33     2.13     2.36      
2.92     1.31     2.11     1.66     2.17
s:=f5() ->                                  0.42     0.70     1.53      
1.52     0.73     0.69     0.78     0.81
ascan(a,i%ARR_LEN) ->                       0.50     0.50     1.23      
1.19     0.73     0.52     0.66     0.66
ascan(a2,c+chr(i%64+64)) ->                 1.64     2.06     3.58      
3.77     1.64     2.05     2.03     2.27
ascan(a,{|x|x==i%ARR_LEN}) ->               4.45     4.91    16.75     
13.84     4.45     4.91     6.44     6.61
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
========================================================================
total application time:                    32.52    44.42    94.39     
92.02    36.98    41.98    47.95    49.63
total real time:                           32.64    44.61    94.70     
93.53    37.14    42.16    48.09    49.70

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: results2.zip
Type: application/zip
Size: 14999 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080923/2befc7db/results2-0001.zip
-------------- next part --------------


On 2008.09.23., at 5:52, Przemyslaw Czerpak wrote:

> On Tue, 23 Sep 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> Pls find attached some speedtst/memtst outputs.
>> Looks like dlalloc is well suited for MSVC with
>> a significant speedup in ST mode, and mostly
>> better results in MT mode.
>> Tested with MSVS2008 SP1, XPPro SP3, Intel 865 + P4HT 2.6, 3GB RAM.
> [...]
>> ascan(a,{|x|x==i%ARR_LEN}) ->               4.45     4.91     
>> 17.34    13.84
>> = 
>> = 
>> = 
>> = 
>> = 
>> = 
>> = 
>> = 
>> =====================================================================
>> total application time:                    32.52    44.42     
>> 96.91    92.02
>
> I'm surprised with this results.
> In ascan(a,{|x|x==i%ARR_LEN}) only two one small memory blocks are
> allocated but the speed difference is huge.
> Anyhow the MT overhead is too big to say sth more now.
> Let's try to reduce it.
> MSVC builds does not use native TLS support by default.
> Please enable it be recompiling Harbour with HB_USE_TLS
> macro. If native TLS supports works well in MSVC then
> it should give noticeable speed improvement. Please send
> the results here.
> If everything works as expected and you can also test other MSVC
> versions then please enable native TLS support in default MSVC
> builds in hbthread.h
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue Sep 23 05:25:37 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 05:25:45 2008
Subject: [Harbour] 2008-09-23 11:24 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91d5e$Blat.v2.6.2$56e7ed42$d90aa7a2ed4@127.0.0.1>

2008-09-23 11:24 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbthread.h
    % Enabled TLS for _MSC_VER compilers.
    ; Tested with MSVS 2008 32-bit. Someone pls test with 
      older/other MSVC compilers (especially MSVC6 and WinCE mode)
      to refine the default setting if needed.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 23 05:28:48 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 05:28:55 2008
Subject: [Harbour] 2008-09-23 11:27 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91d5e$Blat.v2.6.2$c8849bf8$1924c14de4a4@127.0.0.1>

2008-09-23 11:27 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/vm/fm.c
    ! Enabled USE_DL_PREFIX for _MSC_VER compilers.
      This may be refined, but without this setting MSVS 2008 
      would give an error on exit and GPF.
--
Brgds,
Viktor

From maurilio.longo at libero.it  Tue Sep 23 06:26:29 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Sep 23 06:26:36 2008
Subject: [Harbour] SIGFPE during build of hbtest
In-Reply-To: <20080922125639.GB15107@34-mo7-2.acn.waw.pl>
References: <48D7598D.9060302@libero.it>
	<20080922125639.GB15107@34-mo7-2.acn.waw.pl>
Message-ID: <48D8C455.4090802@libero.it>

Przemyslaw,

I'm not able to get a stack dump :( (it's a long story, gdb is not up to date
with the rest of the GCC tool chain I'm using)

But I've found that the problem comes from rt_hvma.prg lines 191 and 192
(commented as operators precedence).

If I comment them the build goes on, If I uncomment just one of them (it does
not matter which one) I get the SIGFPE.

I'm still trying to find a way to have a back trace and/or a map file sice I
have the cp:eip of the SIGFPE.

Maurilio.


Przemyslaw Czerpak wrote:
> On Mon, 22 Sep 2008, Maurilio Longo wrote:
> 
> Hi Maurilio,
> 
>> I'm trying to buil harbour on OS/2 with GCC, I'm getting this:
> 
>> ../../../../source/main/os2/gcc/harbour.exe ../../rt_hvma.prg -n -q0 -w3 -es2 -k
>> m -I../../../../include
>> Killed by SIGFPE
>> pid=0x62a5 ppid=0x628a tid=0x0001 slot=0x00e3 pri=0x0200 mc=0x0001
>> E:\REPOSITORY\HARBOUR-SVN\SOURCE\MAIN\OS2\GCC\HARBOUR.EXE
>> LIBC063 0:0005547a
>> cs:eip=005b:1d67547a      ss:esp=0053:0217eab0      ebp=0217eb28
>>  ds=0053      es=0053      fs=150b      gs=0000     efl=00010206
>> eax=00000000 ebx=40100000 ecx=40100000 edx=00000000 edi=40100000 esi=40100000
>> Process dumping was disabled, use DUMPPROC / PROCDUMP to enable it.
>> make[1]: *** [rt_hvma.c] Error 127
>> make[1]: Leaving directory `/repository/harbour-svn/utils/hbtest/os2/gcc'
>> make: *** [descend] Error 2
>> Is there something already known here 
> 
> I see it 1-st time. I'm using about 10 different GCC builds and
> I've never noticed this problem. I also do not remember that
> David have ever reported sth like that.
> 
>> or do I have to build it with full debug
>>  info to get a stack trace?
> 
> If you can then it would greatly help to locate the problem.
> 
>> Every thing else seems to build correctly, though.
> 
> It's possible that this problem is local to GCC builds anyhow
> it should be located and fixed. But I will need C call stack
> to say sth more. I've just made some tests in Linux and valgrind
> and rt_hvma.prg is compiled correctly without any problems.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Tue Sep 23 07:33:22 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 07:33:32 2008
Subject: [Harbour] .cdx corruption detected
Message-ID: <EDB101E4-1B7E-4AB6-94E7-D5427BC7ADE5@syenar.hu>

Hi all,

I've now built my app with 1.1.0dev (ST), and while everything
seem to work fine and much snappier than in 1.0.1, I'm getting
"1012 Corruption detected" errors on so far perfectly working
.cdx indexes. After a reindex the problem goes away, but this
is not very good even in this case.

The exact same application - with essentially identical build
switches except HB_FM_DL_ALLOC - compiled with 1.0.1 works
without RTEs.

Any ideas where to look?

Brgds,
Viktor

From toninhofwi at yahoo.com.br  Tue Sep 23 07:54:03 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Sep 23 07:49:51 2008
Subject: [Harbour] 2008-09-23 08:45 UTC-0300 Antonio Carlos Pantaglione
Message-ID: <b6mhd4lb9bfkb14bkpu808ffg6t0ktgbp1@4ax.com>

2008-09-23 08:45 UTC-0300 Antonio Carlos Pantaglione
<toninho@fwi.com.br>
   * contrib/rddads/adsmgmnt.c
     + ADSMGSETHANDLE( nHandle ) to set an existing connection handle
     ! ADSMGGETUSERNAMES() that was skipping first user


Regards,

Toninho.


	

	
		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opção para você! 
Experimente já e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From toninhofwi at yahoo.com.br  Tue Sep 23 08:47:11 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Sep 23 08:43:01 2008
Subject: [Harbour] memtst and  HB_FM_DL_ALLOC
Message-ID: <l8ohd411mf47h52q0rt5uj3pe1v3lsqu22@4ax.com>

Hi,

in memtst, with  bcc 6.10 and windows:

"testing single large memory blocks allocation and freeing..."
same results using bcc and dla

"testing many large memory blocks allocation and freeing..."
bcc 7.39, dla 4.94

 "testing large memory block reallocation with intermediate
allocations..."  "Warning!!! some compilers may badly fail here"

bcc 1.41, dla 6.11

Here bcc go always fast, but dla have "WAITS" in various steps and the
results are variable, but always bad than bcc.

speedtst is bcc 46.7, dla 45.2


Regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From harbour.01 at syenar.hu  Tue Sep 23 08:48:29 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 08:48:37 2008
Subject: [Harbour] 2008-09-23 14:38 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91d7a$Blat.v2.6.2$add0d0ee$31484648d8@127.0.0.1>

2008-09-23 14:38 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbole/ole2.c
  * contrib/hbgf/hbgfwin/winapi.c
  * contrib/hbgf/hbgfos2/os2pm.c
  * contrib/hbwin/win_ole.c
  * contrib/hbwhat/wincorec.c
  * source/rtl/do.c
  * source/rdd/workarea.c
    % hb_vmPushSymbol( hb_dynsymSymbol( p ) ) -> hb_vmPushDynSym( p )

  * contrib/hbwhat/wincorec.c
    ! WHT__GETDLGPROC() fixed.
    ! hb_vmPushSymbol( hb_itemGetSymbol( p ) ) -> hb_vmPushDynSym( p )

  * contrib/hbgf/hbgfwin/winapi.c
  * contrib/hbwhat/wincorec.c
  * contrib/hbwhat/whtmsg.c
  * contrib/hbwhat/whtbmp.c
  * contrib/hbwhat/whtcomm.c
  * contrib/hbwhat/whthead.c
  * contrib/hbwhat/whthead.c
  * contrib/hbwhat/whtkbrd.c
  * contrib/hbwhat/whtlv.c
  * contrib/hbwhat/whttext.c
  * contrib/hbwhat/whtwnd.c
  * contrib/hbwhat/whtdlg.c
  * contrib/hbwhat/whttab.c
    ! Fixed few LPARAM/WPARAM passings to be 64-bit compatible.
      (hb_parnl()/hb_parni() -> hb_parnint())

  * source/vm/thread.c
  * source/rtl/do.c
  * source/rdd/usrrdd/usrrdd.c
  * contrib/hbwhat/whtlv.c
  * contrib/hbwhat/whtfont.c
    % hb_vmPushSymbol( hb_itemGetSymbol( p ) ) -> hb_vmPush()
    ; QUESTION/TOFIX: In whtlv.c and whtfont.c this may be wrong, 
                      and hb_vmPushDynSym() could be needed instead.
                      Can someone take a look pls?
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 23 08:50:39 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 08:50:46 2008
Subject: [Harbour] 2008-09-23 14:50 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91d7a$Blat.v2.6.2$fb330410$f046c111c46@127.0.0.1>

2008-09-23 14:50 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/rddads/adsmgmnt.c
    * Minor.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 23 08:54:08 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 08:54:18 2008
Subject: [Harbour] 2008-09-23 08:45 UTC-0300 Antonio Carlos Pantaglione
In-Reply-To: <b6mhd4lb9bfkb14bkpu808ffg6t0ktgbp1@4ax.com>
References: <b6mhd4lb9bfkb14bkpu808ffg6t0ktgbp1@4ax.com>
Message-ID: <07FCAD80-BD4E-4776-BE97-00F9AA69D463@syenar.hu>

Hi Toninho,

On 2008.09.23., at 13:54, Toninho@fwi wrote:

> 2008-09-23 08:45 UTC-0300 Antonio Carlos Pantaglione
> <toninho@fwi.com.br>
>   * contrib/rddads/adsmgmnt.c
>     ! ADSMGGETUSERNAMES() that was skipping first user

Many thanks. Probably the same fix should be done for
ADSGETWORKERTHREADACTIVITY(). Can you check this?

Brgds,
Viktor

From druzus at acn.waw.pl  Tue Sep 23 09:05:06 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 23 09:05:47 2008
Subject: [Harbour] Re: 2008-09-19 22:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48D8A93C.20504@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48D8A93C.20504@mail.udg.mx>
Message-ID: <20080923130506.GA20289@34-mo7-2.acn.waw.pl>

On Tue, 23 Sep 2008, David Arturo Macias Corona wrote:

Hi David,

> Results below for OS/2:mttest08.prg:mt

Mant thanks for your all tests.

> Below are results of current Harbour under eComStation 1.2MR
> gcc 3.3.5
> ST
>    total application time:                              47.13
>    total real time:                                     47.14
> MT
>    total application time:                              55.08
>    total real time:                                     55.08
> before:
> MT
>    total application time:                              67.05
>    total real time:                                     67.05
> and older before:
>    total application time:                             135.88
>    total real time:                                    135.88
> ST keep same as previous, but MT continue falling
>   135.88  -->  67.05  --> 55.08 seconds
> Now MT is only 17 % slower than ST   :-)
> You improved MT performance in few days, so we are near days where MT
> can be used in place of ST without too much speed penalty

Now we reach level which cannot be improved too much more
though I'll commit in a while yet another modification which
will buffer TLS access by preloading hb_stack pointer to C
stack functions local variable. It should give some additional
speed improvement on some platforms/C compilers, f.e. in BCC
builds which seems the have very expensive cost of native
TLS variables.

> I have not started MT tests in Win32 / Linux yet. Both will be in
> Core2Duo 2.0 so a great speed difference should be expected respect to
> current Athlon 2200+ tests

Not in sppedtst.prg test. It's classic single thread program
which will use only one CPU.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep 23 09:18:55 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 23 09:19:37 2008
Subject: [Harbour] SIGFPE during build of hbtest
In-Reply-To: <48D8C455.4090802@libero.it>
References: <48D7598D.9060302@libero.it>
	<20080922125639.GB15107@34-mo7-2.acn.waw.pl>
	<48D8C455.4090802@libero.it>
Message-ID: <20080923131855.GB20289@34-mo7-2.acn.waw.pl>

On Tue, 23 Sep 2008, Maurilio Longo wrote:

Hi Maurilio,


> I'm not able to get a stack dump :( (it's a long story, gdb is not up to date
> with the rest of the GCC tool chain I'm using)
> But I've found that the problem comes from rt_hvma.prg lines 191 and 192
> (commented as operators precedence).
> If I comment them the build goes on, If I uncomment just one of them (it does
> not matter which one) I get the SIGFPE.
> I'm still trying to find a way to have a back trace and/or a map file sice I
> have the cp:eip of the SIGFPE.

And this is an answer.
These two line have math epression:
    1 + 2 * 3 / 4 - 2 ** 2 ^ 3
which is fully optimized by compiler at compile time.
But to calculate the result compiler have to call pow()
function and here we probably have GPF. AFAIR from your
older messages in OS2 math operation on wrong data
produces FPE. It's probably C compiler and/or OS version
dependent so David does not have this problem but you
you have just exploited stupid typo in POWER operator
optimization. In expropt2.c[367] we have unnecessary
redundant two line I had to copy by mistake from
expropt2.c[357]:
      pSelf->value.asNum.val.d = pow( pLeft->value.asNum.val.d,
                                      pRight->value.asNum.val.d );
I guess that if you remove it then all will work correctly.
Please confirm. I'll commit this fix ASAP.
One of the above value is nor double value by HB_LONG and is
passed to pow() without conversion so it may give wrong IEEE758
double value which causes SIGFPE. It's also possible that
If you are using HB_LONG_LONG_OFF and 32bits in this value
are undefined at all (random) and David doesn't so in this
test they are always 0 and whole number does not cause FPE
exception.

Many thanks for your tests and help.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep 23 09:22:22 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 23 09:23:05 2008
Subject: [Harbour] .cdx corruption detected
In-Reply-To: <EDB101E4-1B7E-4AB6-94E7-D5427BC7ADE5@syenar.hu>
References: <EDB101E4-1B7E-4AB6-94E7-D5427BC7ADE5@syenar.hu>
Message-ID: <20080923132222.GC20289@34-mo7-2.acn.waw.pl>

On Tue, 23 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I've now built my app with 1.1.0dev (ST), and while everything
> seem to work fine and much snappier than in 1.0.1, I'm getting
> "1012 Corruption detected" errors on so far perfectly working
> .cdx indexes. After a reindex the problem goes away, but this
> is not very good even in this case.
> The exact same application - with essentially identical build
> switches except HB_FM_DL_ALLOC - compiled with 1.0.1 works
> without RTEs.
> Any ideas where to look?

It's possible that two applications where using different national
collating. Please be sure that it's not in your code. If your code
is correct then it's possible that I make some mistake when I was
updating CDP internals moving hb_code_page to HB_STACK. In such case
any example which will illustrate the problem will greatly help
and I'll fix it immediatelly.

best regards,
Przemek
From mbelgrano at deltain.it  Tue Sep 23 09:24:47 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep 23 09:25:01 2008
Subject: [Harbour] PillHarbour: Harbour MT/ST mode Please revise and reply
	corrected version
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFE9@SRV02.deltain.net>

Harbour MT Mode and ST Mode

 

How build st mode

remove if present all instances of HB_BUILD_ST from your settings.

Please also remove all HB_MT_VM macros you may have in C_USR

How Build in mt mode

Creating both libraries is default as long as you do not change it
by some personal settings f.e. HB_BUILD_ST=no or HB_MT_VM in C

Wich difference are need from a MT application to a non mt application?


If you do not want to create your own threads then there is no differnce
for you. Only MT HVM is slower then non MT one but the difference
depends
on used C compiler, platform and your code. Usually user code calls many
RTL/RDD functions and pure HVM speed is less important.
If you want to create your own threads then you will have to follow
some general MT programming rules which are language independent.
Then use Harbour synchronization mechanisms if they are necessary for
your algorithms (f.e. you want to share or exchange some variables
between threads) to make your code MT safe.

Compilation and linking

For MT mode HVM library should be compiled with HB_MT_VM macro.
   GNU make automatically creates hbvmmt library which should be
   linked with Harbour MT programs instead of hbvm

> I resolved __beginthreadex removing cw32.lib and adding cw32mt.lib
> Also in not mt program we must load  cw32mt.lib instead cw32.lib?

No though it may be good practice for 3-rd party code which may use
own threads and call CRTL functions.
Harbour calls _beginthreadex/_endthreadex only from hbvmmt or
from hbvm but only if you compiled harbour with default MT support
without ST mode, f.e. for BCC you set HB_BUILD_ST macro to sth different
then "yes" and recompiled Harbour.

make copy of bld.bat, change hbvm.lib to hbvmmt.lib and add cw32mt.lib
and -tWN in line which executes bcc32.

 

What six start up objs go with what four bcc32 5.5 libs.

 ; Now, for MT builds 'set HB_USER_LIBS=cw32mt.lib' should 
      be used. Where cw32mt.lib may also be cp32mt.lib, 
      cp32mti.lib, cw32mti.lib depending on other factors.
      Notice that even this would only work if Harbour was 
      built with 'set HB_BUILD_ST=no'.

>Windows plain?

c0w32.obj + import32.lib + cw32.lib

>Windows multi threaded?

c0w32.obj + import32.lib + cw32mt.lib

>Windows DLL plain?

c0d32.obj + import32.lib + cw32.lib

>Windows DLL multi threaded?

c0d32.obj + import32.lib + cw32mt.lib

>Console plain?

c0x32.obj + import32.lib + cw32.lib

>Console multi threaded?

c0x32.obj + import32.lib + cw32mt.lib


To summarize the startup OBJs:
 

c0d32.obj 

DLL startup module

 

c0d32w.obj

DLL startup module

Wide-char version

c0d32x.obj

DLL startup module

no exception handling

c0pkg32.obj

Package startup module

 

c0w32.obj

GUI EXE startup module

 

c0w32w.obj

GUI EXE startup module

Wide-char version

c0x32.obj

32-bit console-mode EXE startup module

 

c0x32w.obj

32-bit console-mode EXE startup module

Wide-char version

The d stands for dll, the w for windows GUI exe's, and the x is for
console
mode exe's.

The RTL libs are

cp32mt.lib       VCL-compliant C RTL multithreaded static library
cp3250mt.dll, cp32mti.lib    VCL-compliant import library for
multithreaded C RTL
cw32.lib          RTL single-threaded static library
cw3250.dll, cw32i.lib  Import library for RTL cw3250.dll
cw32mt.lib      RTL multi-threaded static library
cw3250mt.dll, cw32mti.lib     Import library for multithreaded RTL
cw3250mt.dll

The 'p' in 'cp' means pascal. No need for that one. The 'i's stand for
import library. mt stands for multi-threaded. For simplicity, you can
stic
to cw32.lib and cw32mt.lib for apps compiled with the free bc55

 

 

 

Massimo Belgrano <mailto:mbelgrano@deltain.com> 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080923/e883ee17/attachment.html
From druzus at acn.waw.pl  Tue Sep 23 09:33:36 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 23 09:34:17 2008
Subject: [Harbour] Re: MSVS 2008: error with new alloc
In-Reply-To: <7D5CEED9-C435-41F4-9AD2-6B0FB139DB3C@syenar.hu>
References: <05579321-71DF-474A-8416-62DE5F0BBEB5@syenar.hu>
	<451EA718-DE83-44AA-B1A7-ED0E3255AD43@syenar.hu>
	<20080922191704.GA6314@34-mo7-2.acn.waw.pl>
	<32233A4E-51F2-42F0-9C90-DBDE6C2F15B4@syenar.hu>
	<20080922220917.GB4029@34-mo7-2.acn.waw.pl>
	<DD709B32-8DF7-4573-87F2-D0C06E959A98@syenar.hu>
	<20080923035159.GA17808@34-mo7-2.acn.waw.pl>
	<7D5CEED9-C435-41F4-9AD2-6B0FB139DB3C@syenar.hu>
Message-ID: <20080923133336.GD20289@34-mo7-2.acn.waw.pl>

On Tue, 23 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

Many hanks for your tests.
Now the MT overhead is much smaller. I'll commit last
modification with TLS buffering and this will be the
final version. Probably we can improve the speed
yet a little bit but it will not be anything hardly noticeable.
Now in my Linux with assembler macros for counters, native
TLS support and TLS preloading MT programs are ~11% slower
then MT ones in speedtst.prg.
Please check the difference for MSVC.

> BTW, can we change memtst to output to stdout,
> not require key presses, and also for both tests
> to include build-time switches in their outputs.
> These would ease testing.

use //build switch and if necessary redirect stderr to
stdout by //stderr:1

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep 23 09:35:37 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 23 09:36:19 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48D248C1.8090600@dbtopas.lt>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>
	<48CE57C6.2030006@dbtopas.lt>
	<20080915154445.GA803@34-mo7-2.acn.waw.pl>
	<48CE9A2E.9020201@dbtopas.lt>
	<20080915184410.GA13559@34-mo7-2.acn.waw.pl>
	<48CECBF9.1080605@dbtopas.lt>
	<20080916173546.GA30158@34-mo7-2.acn.waw.pl>
	<48D037DE.8010300@dbtopas.lt>
	<20080917001732.GC24897@34-mo7-2.acn.waw.pl>
	<48D248C1.8090600@dbtopas.lt>
Message-ID: <20080923133537.GE20289@34-mo7-2.acn.waw.pl>

On Thu, 18 Sep 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> it's possible the goal could be reached, but I'm unable to write inline 
> function for tls accessing.
> Perhaps we should use HB_THREAD_STUB or pass pStack parameter to functions.

I've just implement it for estack.c and hvm.c.
If possible please make tests so we can compare how it effects BCC builds.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep 23 09:39:02 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 23 09:39:44 2008
Subject: [Harbour] 2008-09-23 15:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080923133902.GA14875@34-mo7-2.acn.waw.pl>

2008-09-23 15:38 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/codebloc.c
    * updated old and not longer valid comment

  * harbour/source/vm/memvars.c
    * minor code formatting

  * harbour/source/common/expropt2.c
    ! fixed bug in power math expression optimization caused
      by two lines left in the code by mistake. Many thanks to
      Maurilio for locating the problem.

  * harbour/include/hbstack.h
  * harbour/source/vm/estack.c
  * harbour/source/vm/hvm.c
    % added support for buffering hb_stack TLS access be preloading
      the stack pointer into C stack function local variables.
      Please make speed tests for MT mode with different C compilers
      and different platforms.

best regards
Przemek
From mbelgrano at deltain.it  Tue Sep 23 09:49:35 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep 23 09:49:48 2008
Subject: [Harbour] PillHarbour: Harbour MT/ST mode Please revise and
	replycorrected version
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFE9@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EFE9@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFEA@SRV02.deltain.net>

I have shared a document with title "Harbour MT Mode and ST Mode": 
is achivied on online on Google Document. clic for open:
http://docs.google.com/Doc?id=dhmtv9fs_164d7q4qf4&invite=
<http://docs.google.com/Doc?id=dhmtv9fs_164d7q4qf4&invite=> 
Require me authorization for modification or use as temporary

User:pillharbour@gmail.com

Password:harbour99

 

Massimo Belgrano <mailto:mbelgrano@deltain.com> 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080923/8baebadb/attachment.html
From maurilio.longo at libero.it  Tue Sep 23 09:52:45 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Sep 23 09:52:52 2008
Subject: [Harbour] SIGFPE during build of hbtest
In-Reply-To: <20080923131855.GB20289@34-mo7-2.acn.waw.pl>
References: <48D7598D.9060302@libero.it>	<20080922125639.GB15107@34-mo7-2.acn.waw.pl>	<48D8C455.4090802@libero.it>
	<20080923131855.GB20289@34-mo7-2.acn.waw.pl>
Message-ID: <48D8F4AD.4020403@libero.it>

Przemyslaw,

I removed those lines and a full rebuild was completed without errors.

Thanks a lot.

Maurilio.

Przemyslaw Czerpak wrote:
> On Tue, 23 Sep 2008, Maurilio Longo wrote:
> 
> Hi Maurilio,
> 
> 
>> I'm not able to get a stack dump :( (it's a long story, gdb is not up to date
>> with the rest of the GCC tool chain I'm using)
>> But I've found that the problem comes from rt_hvma.prg lines 191 and 192
>> (commented as operators precedence).
>> If I comment them the build goes on, If I uncomment just one of them (it does
>> not matter which one) I get the SIGFPE.
>> I'm still trying to find a way to have a back trace and/or a map file sice I
>> have the cp:eip of the SIGFPE.
> 
> And this is an answer.
> These two line have math epression:
>     1 + 2 * 3 / 4 - 2 ** 2 ^ 3
> which is fully optimized by compiler at compile time.
> But to calculate the result compiler have to call pow()
> function and here we probably have GPF. AFAIR from your
> older messages in OS2 math operation on wrong data
> produces FPE. It's probably C compiler and/or OS version
> dependent so David does not have this problem but you
> you have just exploited stupid typo in POWER operator
> optimization. In expropt2.c[367] we have unnecessary
> redundant two line I had to copy by mistake from
> expropt2.c[357]:
>       pSelf->value.asNum.val.d = pow( pLeft->value.asNum.val.d,
>                                       pRight->value.asNum.val.d );
> I guess that if you remove it then all will work correctly.
> Please confirm. I'll commit this fix ASAP.
> One of the above value is nor double value by HB_LONG and is
> passed to pow() without conversion so it may give wrong IEEE758
> double value which causes SIGFPE. It's also possible that
> If you are using HB_LONG_LONG_OFF and 32bits in this value
> are undefined at all (random) and David doesn't so in this
> test they are always 0 and whole number does not cause FPE
> exception.
> 
> Many thanks for your tests and help.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From bedipritpal at hotmail.com  Tue Sep 23 09:53:58 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Sep 23 09:54:03 2008
Subject: [Harbour] 2008-09-23 06:51 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <19628207.post@talk.nabble.com>


2008-09-23 06:51 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/hbwin/win_ole.c
    % hb_vmPushDynDym() => hb_vmPushDynSym()

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-09-23-06%3A51-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp19628207p19628207.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Tue Sep 23 10:07:54 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Sep 23 10:08:00 2008
Subject: [Harbour] 2008-09-23 07:05 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <19628541.post@talk.nabble.com>


2008-09-23 07:05 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/hbwhat/wincorec.c
    % hb_retptr() => HB_RETWI()

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-09-23-07%3A05-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp19628541p19628541.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Tue Sep 23 10:34:08 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 23 10:34:52 2008
Subject: [Harbour] SIGFPE during build of hbtest
In-Reply-To: <48D8F4AD.4020403@libero.it>
References: <48D7598D.9060302@libero.it>
	<20080922125639.GB15107@34-mo7-2.acn.waw.pl>
	<48D8C455.4090802@libero.it>
	<20080923131855.GB20289@34-mo7-2.acn.waw.pl>
	<48D8F4AD.4020403@libero.it>
Message-ID: <20080923143407.GA23501@34-mo7-2.acn.waw.pl>

On Tue, 23 Sep 2008, Maurilio Longo wrote:

Hi Maurilio,

> I removed those lines and a full rebuild was completed without errors.

Many thanks for confirmations.

best regards,
Przemek
From maurilio.longo at libero.it  Tue Sep 23 10:34:42 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Sep 23 10:35:00 2008
Subject: [Harbour] os/2 build
Message-ID: <48D8FE82.3090406@libero.it>

Prezemyslaw,

I see that the OS/2 build has -DTCPV40HDRS disabled by default, now, IMHO this
is an error since the biggest part of OS/2 systems still out there won't be
able to run harbour .EXEs if this define is not enabled.

On the contrary, on newer systems this defines will just cause very minor
slowdowns on Gigabit ethernet or higher.

So, to be compatible with older systems, which is one of the strongest
capability of OS/2, it would be wiser to have it enabled.

That said, I'd like to ask you to re-enable it if anybody has nothing to object.

Best regards.

Maurilio.


-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Tue Sep 23 10:47:14 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Sep 23 10:47:21 2008
Subject: [Harbour] hbrun and mt
Message-ID: <48D90172.70002@libero.it>

Hi Przemyslaw,

is hbrun mt ready? I was trying to use it to run mt\mttestxx but I get errors,
sometimes, like this:

(E:\repository\harbour-svn\tests\mt)\harbour\bin\hbrun mttest01.prg

Harbour 1.1.0dev (Rev. 9479)
Error BASE/3012  Argument error: HB_THREADJOIN
Called from HB_THREADJOIN(0)
Called from MAIN(25)
Called from HB_HRBRUN(0)
Called from _APPMAIN(109)


(E:\repository\harbour-svn\tests\mt)\harbour\bin\hbrun mttest04.prg

Harbour 1.1.0dev (Rev. 9479)
Main start
Starting threads: <1><2><3><4><5>
Wait 5 seconds or hit any key...
Waiting for threads...
Error BASE/3012  Argument error: HB_THREADJOIN
Called from HB_THREADJOIN(0)
Called from (b)MAIN(48)
Called from AEVAL(0)
Called from MAIN(48)
Called from HB_HRBRUN(0)
Called from _APPMAIN(109)

Other tests, like 02, 03 seem to work.

Maurilio.

PS.I was using hbrun because there is ready way to run tests inside tests\ dir
(on OS/2 at least).


-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From druzus at acn.waw.pl  Tue Sep 23 11:01:09 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 23 11:01:52 2008
Subject: [Harbour] os/2 build
In-Reply-To: <48D8FE82.3090406@libero.it>
References: <48D8FE82.3090406@libero.it>
Message-ID: <20080923150109.GA28912@34-mo7-2.acn.waw.pl>

On Tue, 23 Sep 2008, Maurilio Longo wrote:

Hi Maurilio,

> I see that the OS/2 build has -DTCPV40HDRS disabled by default, now, IMHO this
> is an error since the biggest part of OS/2 systems still out there won't be
> able to run harbour .EXEs if this define is not enabled.
> On the contrary, on newer systems this defines will just cause very minor
> slowdowns on Gigabit ethernet or higher.
> So, to be compatible with older systems, which is one of the strongest
> capability of OS/2, it would be wiser to have it enabled.
> That said, I'd like to ask you to re-enable it if anybody has nothing to object.

Yes of course. These are real OS2 users developers decisions.
I have no idea what this macro exactly does and where is necessary.
I fully trust your decision here.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep 23 11:09:50 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 23 11:10:32 2008
Subject: [Harbour] 2008-09-23 17:09 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080923150950.GA21373@34-mo7-2.acn.waw.pl>

2008-09-23 17:09 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/os2/gcc.cf
    * enabled -DTCPV40HDRS in default builds, can be disabled by
      setting HB_OS2_NEW_TCP=yes environment variable

best regards
Przemek
From miguelangel at marchuet.net  Tue Sep 23 11:27:40 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Tue Sep 23 11:26:55 2008
Subject: [Harbour] 2008-09-22 19:19 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c91cd7$Blat.v2.6.2$b1774014$3a0739bcde8@127.0.0.1>
References: <01c91cd7$Blat.v2.6.2$b1774014$3a0739bcde8@127.0.0.1>
Message-ID: <48D90AEC.3060706@marchuet.net>

I think is better this:

#ifdef HB_C52_STRICT
          if( uiLen > CDX_MAXKEY )
             uiLen = CDX_MAXKEY;
#endif

...

#ifndef HB_C52_STRICT
    else if ( bType == 'C' && uiLen > CDX_MAXKEY )
    {
       if( hb_cdxErrorRT( pArea, EG_DATAWIDTH, EDBF_INVALIDKEY, NULL, 0, EF_CANDEFAULT ) == E_DEFAULT )
         uiLen = CDX_MAXKEY;
       else
       {
         hb_vmDestroyBlockOrMacro( pKeyExp );
         SELF_GOTO( ( AREAP ) pArea, ulRecNo );
         return FAILURE;
       }
    }
#endif


Best regards,
Miguel Angel Marchuer
From mbelgrano at deltain.it  Tue Sep 23 11:33:00 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep 23 11:33:34 2008
Subject: [Harbour] PillHarbour: website
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFEA@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EFE9@SRV02.deltain.net>
	<AFB948164110ED43B5EB849E8DEEF03815EFEA@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFEB@SRV02.deltain.net>

I have started the website of harbour documentation

http://sites.google.com/site/pillharbour/

 

I think  that everyone on harbour  community have in heads same strong
capability of this tools. 90% of this knowledge in head and 10% in files

With this site I want collect documentation from any source in any
languages but strictly regarding harbour project

I hope that everybody that have build part of documentation in any
languages (eng-ita-XXX- can send us

Website grow with your documentation 

We adopt same licenze of harbour

If final documentation is good it will be  distribute with harbour 

 

 

Massimo Belgrano <mailto:mbelgrano@deltain.com> 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080923/e77a608a/attachment.html
From maurilio.longo at libero.it  Tue Sep 23 11:39:26 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Sep 23 11:39:34 2008
Subject: [Harbour] os/2 build
In-Reply-To: <20080923150109.GA28912@34-mo7-2.acn.waw.pl>
References: <48D8FE82.3090406@libero.it>
	<20080923150109.GA28912@34-mo7-2.acn.waw.pl>
Message-ID: <48D90DAE.2060502@libero.it>

Przemyslaw Czerpak wrote:
> Yes of course. These are real OS2 users developers decisions.
> I have no idea what this macro exactly does and where is necessary.
This macro enables the use of older version of TCP/IP headers, like those that
were available on OS/2 before eComStation and OS/2 Warp Server of eBusiness.

The older headers use a 16 bits interface to tcp/ip (on OS/2 device drivers
are 16 bit protect mode apart from some newer ones) instead of the newer at 32
bits. But nearly all network cards still use 16 bits drivers, so, in the end,
you talk using 16 bits with your network interface.

Thanks.

Maurilio.

PS. That define is not enough to _build_ harbour, you also need to have the
PATH enviroment set so that the 16bits socket library comes before the 32bits
one, otherwise it won't build. But as soon as it is built, it will work on all
systems.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Tue Sep 23 11:40:14 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Sep 23 11:40:17 2008
Subject: [Harbour] 2008-09-23 17:09 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080923150950.GA21373@34-mo7-2.acn.waw.pl>
References: <20080923150950.GA21373@34-mo7-2.acn.waw.pl>
Message-ID: <48D90DDE.5060803@libero.it>

Very neat,

thanks a lot.

Maurilio.

Przemyslaw Czerpak wrote:
> 2008-09-23 17:09 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/config/os2/gcc.cf
>     * enabled -DTCPV40HDRS in default builds, can be disabled by
>       setting HB_OS2_NEW_TCP=yes environment variable
> 
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From labitas at gmail.com  Tue Sep 23 11:59:10 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Tue Sep 23 11:59:18 2008
Subject: [Harbour] 2008-09-23 15:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080923133902.GA14875@34-mo7-2.acn.waw.pl>
References: <20080923133902.GA14875@34-mo7-2.acn.waw.pl>
Message-ID: <2386af1b0809230859v399a80aekcc11f675464d99ba@mail.gmail.com>

Some speed test results:


                                                ST     |       MT
                                          ---------------------------
                                           -TLS   +TLS |  -TLS   +TLS
                                          =============|=============
Before:

09/23/08 14:26:24 Harbour 1.1.0dev (Rev. 9472) (MT), Windows XP
5.1.2600 Service Pack 2
Sep 23 2008 14:16:04 Borland C++ 5.8.2 (32 bit)

total application time:                   51.38  51.20 | 89.52  81.72
total real time:                          52.89  52.88 | 91.95  83.75


09/23/08 15:18:57 Harbour 1.1.0dev (Rev. 9472) (MT), Windows XP
5.1.2600 Service Pack 2
Sep 23 2008 15:00:51 Open Watcom C++ 12.70.8 (32 bit)

total application time:                   44.48  44.45 | 87.23  53.88
total real time:                          46.11  45.86 | 90.08  55.39


Now:


09/23/08 17:21:27 Harbour 1.1.0dev (Rev. 9479) (MT), Windows XP
5.1.2600 Service Pack 2
Sep 23 2008 17:14:24 Borland C++ 5.8.2 (32 bit)

total application time:                   49.80  50.02 | 61.28  62.23
total real time:                          51.59  51.66 | 62.86  63.86


09/23/08 17:57:54 Harbour 1.1.0dev (Rev. 9479) (MT), Windows XP
5.1.2600 Service Pack 2
Sep 23 2008 17:51:27 Open Watcom C++ 12.70.8 (32 bit)

total application time:                   44.67  44.80 | 54.33  52.34
total real time:                          46.25  46.20 | 55.80  53.72


It seems that now speed not depends on HB_USE_TLS

Good work, thank you!

Best regards,
Saulius
From druzus at acn.waw.pl  Tue Sep 23 12:03:57 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 23 12:04:42 2008
Subject: [Harbour] hbrun and mt
In-Reply-To: <48D90172.70002@libero.it>
References: <48D90172.70002@libero.it>
Message-ID: <20080923160357.GB28912@34-mo7-2.acn.waw.pl>

On Tue, 23 Sep 2008, Maurilio Longo wrote:
> Hi Przemyslaw,
> is hbrun mt ready? I was trying to use it to run mt\mttestxx but I get errors,
> sometimes, like this:
> (E:\repository\harbour-svn\tests\mt)\harbour\bin\hbrun mttest01.prg
> Harbour 1.1.0dev (Rev. 9479)
> Error BASE/3012  Argument error: HB_THREADJOIN
> Called from HB_THREADJOIN(0)
> Called from MAIN(25)
> Called from HB_HRBRUN(0)
> Called from _APPMAIN(109)

HBRUN is linked with hbmt not hbmtvm in standard GNU builds so it does
not have support to MT. HB_STARTTHREAD() does not create new thread and
returns NIL instead of thread pointer. It causes that later HB_THREADJOIN
reports argument error. So the above is expected and correct.

> Other tests, like 02, 03 seem to work.

I do not think so. They only do not reprort errors when linked with
ST HVM but second thread is not started.

> PS.I was using hbrun because there is ready way to run tests inside tests\ dir
> (on OS/2 at least).

If you need hbrun in MT mode then please change in its Makefile
hbvm to hbvmmt in two places and relink it. I'll look later for a way
to build it in MT mode by default for platforms which supports MT.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Sep 23 12:57:29 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 12:57:40 2008
Subject: [Harbour] 2008-09-23 18:56 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91d9d$Blat.v2.6.2$76a5ad10$1a2ccc8adb80@127.0.0.1>

2008-09-23 18:56 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/rddads/adsmgmnt.c
    ! Blind fix to ADSMGGETWORKERTHREADACTIVITY() where the 
      first element in list wasn't returned.
      Please test, I couldn't.

  * source/vm/fm.c
    ! Stupid typo. (I guess I'm completely confused by separated 
      "#" and preprocessor command :/ Second typo in two lines.)
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 23 13:04:10 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 13:04:19 2008
Subject: [Harbour] Re: MSVS 2008: error with new alloc
In-Reply-To: <20080923133336.GD20289@34-mo7-2.acn.waw.pl>
References: <05579321-71DF-474A-8416-62DE5F0BBEB5@syenar.hu>
	<451EA718-DE83-44AA-B1A7-ED0E3255AD43@syenar.hu>
	<20080922191704.GA6314@34-mo7-2.acn.waw.pl>
	<32233A4E-51F2-42F0-9C90-DBDE6C2F15B4@syenar.hu>
	<20080922220917.GB4029@34-mo7-2.acn.waw.pl>
	<DD709B32-8DF7-4573-87F2-D0C06E959A98@syenar.hu>
	<20080923035159.GA17808@34-mo7-2.acn.waw.pl>
	<7D5CEED9-C435-41F4-9AD2-6B0FB139DB3C@syenar.hu>
	<20080923133336.GD20289@34-mo7-2.acn.waw.pl>
Message-ID: <8AD37D0F-CDFA-4BDA-8B37-AFD3CFFA479A@syenar.hu>

Hi Przemek,

Okay, I'll redo the tests using DLALLOC only to
keep it simple.

>> BTW, can we change memtst to output to stdout,
>> not require key presses, and also for both tests
>> to include build-time switches in their outputs.
>> These would ease testing.
>
> use //build switch and if necessary redirect stderr to
> stdout by //stderr:1

I know these, but couldn't we make it easier?
I may look into this later. memtest output can
only be screen grabbed.

[ And another related issue: for GTWVT apps,
I've found no way to grab the output of //build.
I don't know if there is a fix for this, but it'd
be definitely useful. ]

BTW, Google Chrome has an automated build / test
system, which is providing such amazing automated
performance graphs:
http://build.chromium.org/buildbot/perf/dashboard/overview.html

[ buildbot is an OSS project BTW. ]

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 23 13:08:07 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 13:08:16 2008
Subject: [Harbour] 2008-09-22 19:19 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <48D90AEC.3060706@marchuet.net>
References: <01c91cd7$Blat.v2.6.2$b1774014$3a0739bcde8@127.0.0.1>
	<48D90AEC.3060706@marchuet.net>
Message-ID: <917E7CC1-B753-4CE6-8819-4A6B3F72FB5A@syenar.hu>

Hi Miguel,

> I think is better this:
>
> #ifdef HB_C52_STRICT
>         if( uiLen > CDX_MAXKEY )
>            uiLen = CDX_MAXKEY;
> #endif
>
> ...
>
> #ifndef HB_C52_STRICT
>   else if ( bType == 'C' && uiLen > CDX_MAXKEY )
>   {
>      if( hb_cdxErrorRT( pArea, EG_DATAWIDTH, EDBF_INVALIDKEY, NULL,  
> 0, EF_CANDEFAULT ) == E_DEFAULT )
>        uiLen = CDX_MAXKEY;
>      else
>      {
>        hb_vmDestroyBlockOrMacro( pKeyExp );
>        SELF_GOTO( ( AREAP ) pArea, ulRecNo );
>        return FAILURE;
>      }
>   }
> #endif

This wouldn't fix the incompatibility for default builds,
plus these are C53 features, so they need to marked as such.

Brdgs,
Viktor

From harbour.01 at syenar.hu  Tue Sep 23 13:04:43 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 13:14:51 2008
Subject: [Harbour] 2008-09-23 06:51 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <19628207.post@talk.nabble.com>
References: <19628207.post@talk.nabble.com>
Message-ID: <BB8CF689-0A41-406D-AAA2-0F9A906FB112@syenar.hu>

Thanks a lot Pritpal.

Brgds,
Viktor

On 2008.09.23., at 15:53, Pritpal Bedi wrote:

>
> 2008-09-23 06:51 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>  * harbour/contrib/hbwin/win_ole.c
>    % hb_vmPushDynDym() => hb_vmPushDynSym()
>
> Regards
> Pritpal Bedi
> -- 
> View this message in context: http://www.nabble.com/2008-09-23-06%3A51-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp19628207p19628207.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue Sep 23 13:18:04 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 13:18:13 2008
Subject: [Harbour] PellesC 5.0 64-bit issues confirmed
Message-ID: <A1260FBC-CD57-46B9-B983-16A0A0C0D9F8@syenar.hu>

See:
http://forum.pellesc.de/index.php?topic=2590.0

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 23 13:35:48 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 13:35:59 2008
Subject: [Harbour] Re: MSVS 2008: error with new alloc
In-Reply-To: <20080923133336.GD20289@34-mo7-2.acn.waw.pl>
References: <05579321-71DF-474A-8416-62DE5F0BBEB5@syenar.hu>
	<451EA718-DE83-44AA-B1A7-ED0E3255AD43@syenar.hu>
	<20080922191704.GA6314@34-mo7-2.acn.waw.pl>
	<32233A4E-51F2-42F0-9C90-DBDE6C2F15B4@syenar.hu>
	<20080922220917.GB4029@34-mo7-2.acn.waw.pl>
	<DD709B32-8DF7-4573-87F2-D0C06E959A98@syenar.hu>
	<20080923035159.GA17808@34-mo7-2.acn.waw.pl>
	<7D5CEED9-C435-41F4-9AD2-6B0FB139DB3C@syenar.hu>
	<20080923133336.GD20289@34-mo7-2.acn.waw.pl>
Message-ID: <FFFA6FE6-6651-4733-81ED-0EB7C0DB10E3@syenar.hu>

Hi Przemek,

I've done the tests, MT speed got ~5% better.
The MT overhead for MSVS 2008 on my system is 41%.

How much do you think this could be further enhanced
in case we'd pass the HVM context to all Harbour
API functions?

                                               ST       ST        
MT       MT       ST       ST       MT       MT       ST       MT
                                          DLALLOC      STD   
DLALLOC      STD  DLALLOC      STD  DLALLOC      STD  DLALLOC  DLALLOC
                                                                                  TLS 
       TLS      TLS      TLS     CTLS     CTLS
======================================= -------- -------- --------  
-------- -------- -------- -------- -------- -------- --------
c:=L_C ->                                   0.08     0.09     0.30      
0.30     0.06     0.09     0.19     0.19     0.08     0.19
n:=L_N ->                                   0.06     0.09     0.16      
0.19     0.05     0.06     0.08     0.08     0.05     0.06
d:=L_D ->                                   0.05     0.06     0.17      
0.16     0.06     0.06     0.08     0.09     0.06     0.08
c:=M_C ->                                   0.09     0.09     0.31      
0.31     0.09     0.11     0.19     0.20     0.09     0.20
n:=M_N ->                                   0.05     0.08     0.19      
0.19     0.06     0.08     0.09     0.08     0.06     0.08
d:=M_D ->                                   0.08     0.06     0.20      
0.20     0.09     0.06     0.09     0.08     0.09     0.09
(sh) c:=F_C ->                              0.23     0.55     0.67      
0.64     0.23     0.53     0.50     0.53     0.22     0.53
(sh) n:=F_N ->                              0.34     0.38     0.50      
0.45     0.34     0.38     0.36     0.34     0.33     0.38
(sh) d:=F_D ->                              0.19     0.17     0.31      
0.28     0.19     0.17     0.19     0.17     0.16     0.20
(ex) c:=F_C ->                              0.22     0.48     0.66      
0.63     0.25     0.50     0.50     0.53     0.19     0.53
(ex) n:=F_N ->                              0.36     0.36     0.52      
0.45     0.34     0.38     0.34     0.34     0.33     0.41
(ex) d:=F_D ->                              0.19     0.17     0.30      
0.28     0.19     0.19     0.19     0.17     0.16     0.20
n:=o:GenCode ->                             0.22     0.28     0.75      
0.77     0.23     0.27     0.38     0.36     0.22     0.38
n:=o[8] ->                                  0.17     0.19     0.45      
0.45     0.16     0.20     0.27     0.28     0.17     0.27
round(i/1000,2) ->                          0.38     0.41     0.94      
0.91     0.38     0.41     0.39     0.44     0.38     0.45
str(i/1000) ->                              0.72     1.02     1.45      
1.53     0.70     0.97     1.02     1.06     0.70     1.00
val(a3[i%ARR_LEN+1]) ->                     0.78     0.78     1.59      
1.58     0.80     0.78     0.98     0.98     0.81     1.02
dtos(j+i%10000-5000) ->                     0.73     0.97     1.72      
1.89     0.72     0.97     1.09     1.16     0.72     1.03
eval({||i%ARR_LEN}) ->                      0.39     0.39     1.11      
1.14     0.41     0.36     0.55     0.53     0.41     0.50
eval({|x|x%ARR_LEN},i) ->                   0.41     0.41     1.20      
1.20     0.41     0.41     0.56     0.56     0.44     0.56
eval({|x|f1(x)},i) ->                       0.53     0.56     2.39      
1.97     0.52     0.56     0.73     0.70     0.53     0.70
&('f1('+str(i)+')') ->                      3.88     9.13     8.94      
8.70     6.91     6.88     8.94     7.25     3.84     6.41
eval([&('{|x|f1(x)}')]) ->                  0.55     0.56     2.44      
1.97     0.55     0.55     0.73     0.75     0.55     0.72
j := valtype(a)+valtype(i) ->               0.52     0.84     1.94      
2.02     1.45     0.81     1.00     1.05     0.53     0.98
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->      1.19     1.52     2.84      
2.89     1.19     1.50     1.72     1.77     1.25     1.73
j := val(a2[i%ARR_LEN+1]) ->                0.84     0.84     1.86      
1.81     0.84     0.84     1.06     1.05     0.86     1.06
j := a2[i%ARR_LEN+1] == s ->                0.53     0.56     1.39      
1.38     0.53     0.55     0.84     0.84     0.52     0.83
j := a2[i%ARR_LEN+1] = s ->                 0.58     0.61     1.47      
1.52     0.59     0.61     0.89     0.88     0.56     0.89
j := a2[i%ARR_LEN+1] >= s ->                0.58     0.59     1.50      
1.50     0.56     0.59     0.89     0.88     0.55     0.86
j := a2[i%ARR_LEN+1] < s ->                 0.56     0.61     1.47      
1.50     0.58     0.59     0.88     0.88     0.53     0.86
aadd(aa,{i,j,s,a,a2,t,bc}) ->               1.72     3.59     4.22      
5.80     1.75     3.59     3.14     4.59     1.66     3.16
f0() ->                                     0.22     0.22     0.70      
0.70     0.22     0.22     0.23     0.27     0.23     0.23
f1(i) ->                                    0.28     0.28     0.95      
0.98     0.28     0.28     0.36     0.34     0.27     0.30
f2(c[8]) ->                                 0.25     0.23     0.89      
0.86     0.20     0.23     0.39     0.44     0.27     0.38
f2(c[40000]) ->                             0.25     0.27     1.05      
0.84     0.25     0.27     0.38     0.38     0.28     0.34
f2(@c[40000]) ->                            0.22     0.22     1.28      
0.81     0.22     0.22     0.27     0.25     0.20     0.25
f2(c[40000]); c2:=c ->                      0.34     0.34     1.17      
1.13     0.34     0.34     0.58     0.56     0.31     0.53
f2(@c[40000]); c2:=c ->                     0.31     0.31     1.17      
1.11     0.31     0.33     0.45     0.44     0.30     0.42
f3(a,a2,c,i,j,t,bc) ->                      0.55     0.55     2.00      
2.03     0.52     0.55     0.97     0.95     0.56     0.97
f2(a2) ->                                   0.25     0.23     0.89      
0.86     0.25     0.25     0.38     0.38     0.27     0.38
s:=f4() ->                                  1.33     2.13     2.36      
2.92     1.31     2.11     1.66     2.17     1.48     1.67
s:=f5() ->                                  0.42     0.70     1.53      
1.52     0.73     0.69     0.78     0.81     0.42     0.75
ascan(a,i%ARR_LEN) ->                       0.50     0.50     1.23      
1.19     0.73     0.52     0.66     0.66     0.53     0.63
ascan(a2,c+chr(i%64+64)) ->                 1.64     2.06     3.58      
3.77     1.64     2.05     2.03     2.27     1.72     2.08
ascan(a,{|x|x==i%ARR_LEN}) ->               4.45     4.91    16.75     
13.84     4.45     4.91     6.44     6.61     4.30     6.45
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
= 
========================================================================
total application time:                    32.52    44.42    94.39     
92.02    36.98    41.98    47.95    49.63    32.52    46.00
total real time:                           32.64    44.61    94.70     
93.53    37.14    42.16    48.09    49.70    32.88    46.27

Brgds,
Viktor

On 2008.09.23., at 15:33, Przemyslaw Czerpak wrote:

> On Tue, 23 Sep 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
> Many hanks for your tests.
> Now the MT overhead is much smaller. I'll commit last
> modification with TLS buffering and this will be the
> final version. Probably we can improve the speed
> yet a little bit but it will not be anything hardly noticeable.
> Now in my Linux with assembler macros for counters, native
> TLS support and TLS preloading MT programs are ~11% slower
> then MT ones in speedtst.prg.
> Please check the difference for MSVC.
>
>> BTW, can we change memtst to output to stdout,
>> not require key presses, and also for both tests
>> to include build-time switches in their outputs.
>> These would ease testing.
>
> use //build switch and if necessary redirect stderr to
> stdout by //stderr:1
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From maurilio.longo at libero.it  Tue Sep 23 13:43:57 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Sep 23 13:44:06 2008
Subject: [Harbour] hbrun and mt
In-Reply-To: <20080923160357.GB28912@34-mo7-2.acn.waw.pl>
References: <48D90172.70002@libero.it>
	<20080923160357.GB28912@34-mo7-2.acn.waw.pl>
Message-ID: <48D92ADD.6040304@libero.it>

Przemyslaw,

I did the change to the makefile, I get an immediate SIGSEGV simply starting
hbrun.

(E:\repository\harbour-svn\tests)\harbour\bin\hbrun mt\mttest01.prg

Killed by SIGSEGV
pid=0x7e87 ppid=0x0253 tid=0x0001 slot=0x00b2 pri=0x0200 mc=0x0001
E:\HARBOUR\BIN\HBRUN.EXE
HBRUN 0:00026f26
cs:eip=005b:00036f26      ss:esp=0053:022afe50      ebp=022afe58
 ds=0053      es=0053      fs=150b      gs=0000     efl=00010212
eax=00000000 ebx=026001c0 ecx=00000000 edx=0260013c edi=0001028f esi=00000028
Process dumping was disabled, use DUMPPROC / PROCDUMP to enable it.

The same if I try to build any of the test programs inside tests\ using hvmmt.


Maurilio.


Przemyslaw Czerpak wrote:
> On Tue, 23 Sep 2008, Maurilio Longo wrote:
>> Hi Przemyslaw,
>> is hbrun mt ready? I was trying to use it to run mt\mttestxx but I get errors,
>> sometimes, like this:
>> (E:\repository\harbour-svn\tests\mt)\harbour\bin\hbrun mttest01.prg
>> Harbour 1.1.0dev (Rev. 9479)
>> Error BASE/3012  Argument error: HB_THREADJOIN
>> Called from HB_THREADJOIN(0)
>> Called from MAIN(25)
>> Called from HB_HRBRUN(0)
>> Called from _APPMAIN(109)
> 
> HBRUN is linked with hbmt not hbmtvm in standard GNU builds so it does
> not have support to MT. HB_STARTTHREAD() does not create new thread and
> returns NIL instead of thread pointer. It causes that later HB_THREADJOIN
> reports argument error. So the above is expected and correct.
> 
>> Other tests, like 02, 03 seem to work.
> 
> I do not think so. They only do not reprort errors when linked with
> ST HVM but second thread is not started.
> 
>> PS.I was using hbrun because there is ready way to run tests inside tests\ dir
>> (on OS/2 at least).
> 
> If you need hbrun in MT mode then please change in its Makefile
> hbvm to hbvmmt in two places and relink it. I'll look later for a way
> to build it in MT mode by default for platforms which supports MT.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From rportnoff at spendmap.com  Tue Sep 23 13:46:45 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Tue Sep 23 13:45:23 2008
Subject: [Harbour] Proposed changes to EXTRAP.C
In-Reply-To: <FFFA6FE6-6651-4733-81ED-0EB7C0DB10E3@syenar.hu>
References: <05579321-71DF-474A-8416-62DE5F0BBEB5@syenar.hu>
	<451EA718-DE83-44AA-B1A7-ED0E3255AD43@syenar.hu>
	<20080922191704.GA6314@34-mo7-2.acn.waw.pl>
	<32233A4E-51F2-42F0-9C90-DBDE6C2F15B4@syenar.hu>
	<20080922220917.GB4029@34-mo7-2.acn.waw.pl>
	<DD709B32-8DF7-4573-87F2-D0C06E959A98@syenar.hu>
	<20080923035159.GA17808@34-mo7-2.acn.waw.pl>
	<7D5CEED9-C435-41F4-9AD2-6B0FB139DB3C@syenar.hu>
	<20080923133336.GD20289@34-mo7-2.acn.waw.pl>
	<FFFA6FE6-6651-4733-81ED-0EB7C0DB10E3@syenar.hu>
Message-ID: <B0083771417@ms1.3peaks.com>

Hi all,

I suggest the following changes to EXTAP.C:

1. The log should be closed BEFORE any alert messages are displayed.

2. There needs to be a way to suppress any alert messages (ie. create 
log and exit) for applications that do not require user activity (eg. 
server programs).

Regards,
Randy.


From toninhofwi at yahoo.com.br  Tue Sep 23 14:11:43 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Sep 23 14:07:29 2008
Subject: [Harbour] 2008-09-23 08:45 UTC-0300 Antonio Carlos Pantaglione
In-Reply-To: <07FCAD80-BD4E-4776-BE97-00F9AA69D463@syenar.hu>
References: <b6mhd4lb9bfkb14bkpu808ffg6t0ktgbp1@4ax.com>
	<07FCAD80-BD4E-4776-BE97-00F9AA69D463@syenar.hu>
Message-ID: <k5cid49fsmb6orf59jc66c3v4r9dpunjm0@4ax.com>

>Hi Toninho,
>
>On 2008.09.23., at 13:54, Toninho@fwi wrote:
>
>> 2008-09-23 08:45 UTC-0300 Antonio Carlos Pantaglione
>> <toninho@fwi.com.br>
>>   * contrib/rddads/adsmgmnt.c
>>     ! ADSMGGETUSERNAMES() that was skipping first user
>
>Many thanks. Probably the same fix should be done for
>ADSGETWORKERTHREADACTIVITY(). Can you check this?

Hi Viktor,

ADSGETWORKERTHREADACTIVITY() is working fine here with latest SVN.

Thanks and best regards,

Toninho.


__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From toninhofwi at yahoo.com.br  Tue Sep 23 14:14:19 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Sep 23 14:10:05 2008
Subject: [Harbour] 2008-09-23 18:56 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c91d9d$Blat.v2.6.2$76a5ad10$1a2ccc8adb80@127.0.0.1>
References: <01c91d9d$Blat.v2.6.2$76a5ad10$1a2ccc8adb80@127.0.0.1>
Message-ID: <uecid49nlqiiotui4dhsp5bpnuvfkinqtk@4ax.com>

>2008-09-23 18:56 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>  * contrib/rddads/adsmgmnt.c
>    ! Blind fix to ADSMGGETWORKERTHREADACTIVITY() where the 
>      first element in list wasn't returned.
>      Please test, I couldn't.

Thanks Viktor.  Tested and working.

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opção para você! 
Experimente já e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From harbour.01 at syenar.hu  Tue Sep 23 14:16:21 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 14:16:32 2008
Subject: [Harbour] .cdx corruption detected
In-Reply-To: <20080923132222.GC20289@34-mo7-2.acn.waw.pl>
References: <EDB101E4-1B7E-4AB6-94E7-D5427BC7ADE5@syenar.hu>
	<20080923132222.GC20289@34-mo7-2.acn.waw.pl>
Message-ID: <338BA96B-800E-4CBB-B24A-22FB0A3A8052@syenar.hu>

Hi Przemek,

> It's possible that two applications where using different national
> collating. Please be sure that it's not in your code. If your code
> is correct then it's possible that I make some mistake when I was
> updating CDP internals moving hb_code_page to HB_STACK. In such case
> any example which will illustrate the problem will greatly help
> and I'll fix it immediatelly.

The apps are 100% exactly the same. I just suspect
the index was created by the Clipper version of my
app, but nevertheless 1.0.1 opens it, while 1.1.0
doesn't.

I've uploaded small test .prg/.dbf/.cdx + also
Windows .exes built with BCC58 in any case, here:

http://www.syenar.hu/harbour/cdxcorr.zip

[ I've also included the .cdx which was created by
1.1.0, and which works. It only differs in a few
bytes from the corrupted one, maybe it's useful,
its name is test-110.cdx. ]

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 23 14:34:06 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 14:34:17 2008
Subject: [Harbour] Proposed changes to EXTRAP.C
In-Reply-To: <B0083771417@ms1.3peaks.com>
References: <05579321-71DF-474A-8416-62DE5F0BBEB5@syenar.hu>
	<451EA718-DE83-44AA-B1A7-ED0E3255AD43@syenar.hu>
	<20080922191704.GA6314@34-mo7-2.acn.waw.pl>
	<32233A4E-51F2-42F0-9C90-DBDE6C2F15B4@syenar.hu>
	<20080922220917.GB4029@34-mo7-2.acn.waw.pl>
	<DD709B32-8DF7-4573-87F2-D0C06E959A98@syenar.hu>
	<20080923035159.GA17808@34-mo7-2.acn.waw.pl>
	<7D5CEED9-C435-41F4-9AD2-6B0FB139DB3C@syenar.hu>
	<20080923133336.GD20289@34-mo7-2.acn.waw.pl>
	<FFFA6FE6-6651-4733-81ED-0EB7C0DB10E3@syenar.hu>
	<B0083771417@ms1.3peaks.com>
Message-ID: <0978EC97-6570-4F89-8C69-FF3E6622267F@syenar.hu>

>
Hi Randy,

> Hi all,
>
> I suggest the following changes to EXTAP.C:
>
> 1. The log should be closed BEFORE any alert messages are displayed.

True and thanks, I'll commit this ASAP.

> 2. There needs to be a way to suppress any alert messages (ie.  
> create log and exit) for applications that do not require user  
> activity (eg. server programs).

How about making GPF a simple internal error call?

[ I'd personally avoid any MessageBox() calls from any
Harbour core or contrib code. ]

To suppress .log file, I'll modify the code to explicitly
not try to create a log file if the _SET_HBOUTLOG filename
is empty, but this probably works even now.

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 23 14:42:34 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 14:42:45 2008
Subject: [Harbour] 2008-09-23 20:41 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91dac$Blat.v2.6.2$24b5f136$3b0ca73fb2c@127.0.0.1>

2008-09-23 20:41 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/vm/extrap.c
    ! Fixed to close .log file before showing MessageBox().
      [TOMERGE 1.0]

    + Don't attempt to write into .log file if the _SET_HBOUTLOG 
      filename is empty.

    ; TOFIX: Remove all remaining MessageBox() calls from 
             Harbour sources.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Tue Sep 23 15:42:37 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 23 15:43:18 2008
Subject: [Harbour] .cdx corruption detected
In-Reply-To: <338BA96B-800E-4CBB-B24A-22FB0A3A8052@syenar.hu>
References: <EDB101E4-1B7E-4AB6-94E7-D5427BC7ADE5@syenar.hu>
	<20080923132222.GC20289@34-mo7-2.acn.waw.pl>
	<338BA96B-800E-4CBB-B24A-22FB0A3A8052@syenar.hu>
Message-ID: <20080923194237.GA5298@34-mo7-2.acn.waw.pl>

On Tue, 23 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> The apps are 100% exactly the same. I just suspect
> the index was created by the Clipper version of my
> app, but nevertheless 1.0.1 opens it, while 1.1.0
> doesn't.

And this is the answer. Header validation is too strong
and recognize this index as corrupted because it sets
that for expression has 1 byte and starts in the same
place as key expression (overwriting). I'll reduce header
validation in a while. BTW which Clipper RDD creates such
indexes.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep 23 15:43:03 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 23 15:43:45 2008
Subject: [Harbour] 2008-09-23 21:42 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080923194303.GA7980@34-mo7-2.acn.waw.pl>

2008-09-23 21:42 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/hb-func.sh
    * use HB_IMPORT instead of hardcoded attributes in hb* scripts

  * harbour/source/common/hbver.c
    * generate different info for POCC and XCC compilers

  * harbour/source/rdd/dbfcdx/dbfcdx1.c
    * reduce header validation to not report clipper indexes as corrupted

best regards
Przemek
From rportnoff at spendmap.com  Tue Sep 23 15:50:35 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Tue Sep 23 15:49:12 2008
Subject: [Harbour] Proposed changes to EXTRAP.C
In-Reply-To: <0978EC97-6570-4F89-8C69-FF3E6622267F@syenar.hu>
References: <05579321-71DF-474A-8416-62DE5F0BBEB5@syenar.hu>
	<451EA718-DE83-44AA-B1A7-ED0E3255AD43@syenar.hu>
	<20080922191704.GA6314@34-mo7-2.acn.waw.pl>
	<32233A4E-51F2-42F0-9C90-DBDE6C2F15B4@syenar.hu>
	<20080922220917.GB4029@34-mo7-2.acn.waw.pl>
	<DD709B32-8DF7-4573-87F2-D0C06E959A98@syenar.hu>
	<20080923035159.GA17808@34-mo7-2.acn.waw.pl>
	<7D5CEED9-C435-41F4-9AD2-6B0FB139DB3C@syenar.hu>
	<20080923133336.GD20289@34-mo7-2.acn.waw.pl>
	<FFFA6FE6-6651-4733-81ED-0EB7C0DB10E3@syenar.hu>
	<B0083771417@ms1.3peaks.com>
	<0978EC97-6570-4F89-8C69-FF3E6622267F@syenar.hu>
Message-ID: <B0083775041@ms1.3peaks.com>

Hi Viktor,

What would also be great would be if you could optionally (eg. 
_SET_FORCE_FATER_TERMINATION) force the app to close instead of being 
held open by the O/S GPF alert message. For example, a server 
application that runs into a GPF, is held open/running since Windows 
attempts to display the GPF window - If Harbour could force the app 
to terminate (again, as an option), this would be very helpful.

Best regards,
Randy.

At 02:34 PM 9/23/2008, you wrote:

>Hi Randy,
>
>>Hi all,
>>
>>I suggest the following changes to EXTAP.C:
>>
>>1. The log should be closed BEFORE any alert messages are displayed.
>
>True and thanks, I'll commit this ASAP.
>
>>2. There needs to be a way to suppress any alert messages (ie.
>>create log and exit) for applications that do not require user
>>activity (eg. server programs).
>
>How about making GPF a simple internal error call?
>
>[ I'd personally avoid any MessageBox() calls from any
>Harbour core or contrib code. ]
>
>To suppress .log file, I'll modify the code to explicitly
>not try to create a log file if the _SET_HBOUTLOG filename
>is empty, but this probably works even now.
>
>Brgds,
>Viktor
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour


From harbour.01 at syenar.hu  Tue Sep 23 15:57:29 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 15:57:42 2008
Subject: [Harbour] .cdx corruption detected
In-Reply-To: <20080923194237.GA5298@34-mo7-2.acn.waw.pl>
References: <EDB101E4-1B7E-4AB6-94E7-D5427BC7ADE5@syenar.hu>
	<20080923132222.GC20289@34-mo7-2.acn.waw.pl>
	<338BA96B-800E-4CBB-B24A-22FB0A3A8052@syenar.hu>
	<20080923194237.GA5298@34-mo7-2.acn.waw.pl>
Message-ID: <C8FD92A2-EF3D-4440-B2A6-4288E9A1FB38@syenar.hu>

Hi Przemek,

>> The apps are 100% exactly the same. I just suspect
>> the index was created by the Clipper version of my
>> app, but nevertheless 1.0.1 opens it, while 1.1.0
>> doesn't.
>
> And this is the answer. Header validation is too strong
> and recognize this index as corrupted because it sets
> that for expression has 1 byte and starts in the same
> place as key expression (overwriting). I'll reduce header
> validation in a while. BTW which Clipper RDD creates such
> indexes.

Many thanks, after your fix, all .cdx-es are recognized
just fine.

These were created by SIXCDX [3.02].

Brgds,
Viktor

From rportnoff at spendmap.com  Tue Sep 23 16:06:40 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Tue Sep 23 16:05:18 2008
Subject: [Harbour] Proposed changes to EXTRAP.C
Message-ID: <B0083775492@ms1.3peaks.com>

...or is it Harbour that is telling Windows that a GPF occurred? If 
so, we should make this optional and just allow the EXE to exit.

Hi Viktor,

What would also be great would be if you could optionally (eg. 
_SET_FORCE_FATER_TERMINATION) force the app to close instead of being 
held open by the O/S GPF alert message. For example, a server 
application that runs into a GPF, is held open/running since Windows 
attempts to display the GPF window - If Harbour could force the app 
to terminate (again, as an option), this would be very helpful.

Best regards,
Randy.

At 02:34 PM 9/23/2008, you wrote:

>Hi Randy,
>
>>Hi all,
>>
>>I suggest the following changes to EXTAP.C:
>>
>>1. The log should be closed BEFORE any alert messages are displayed.
>
>True and thanks, I'll commit this ASAP.
>
>>2. There needs to be a way to suppress any alert messages (ie.
>>create log and exit) for applications that do not require user
>>activity (eg. server programs).
>
>How about making GPF a simple internal error call?
>
>[ I'd personally avoid any MessageBox() calls from any
>Harbour core or contrib code. ]
>
>To suppress .log file, I'll modify the code to explicitly
>not try to create a log file if the _SET_HBOUTLOG filename
>is empty, but this probably works even now.
>
>Brgds,
>Viktor
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour


From druzus at acn.waw.pl  Tue Sep 23 16:11:56 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 23 16:12:36 2008
Subject: [Harbour] hbrun and mt
In-Reply-To: <48D92ADD.6040304@libero.it>
References: <48D90172.70002@libero.it>
	<20080923160357.GB28912@34-mo7-2.acn.waw.pl>
	<48D92ADD.6040304@libero.it>
Message-ID: <20080923201155.GA17790@34-mo7-2.acn.waw.pl>

On Tue, 23 Sep 2008, Maurilio Longo wrote:

Hi Maurilio,

> I did the change to the makefile, I get an immediate SIGSEGV simply starting
> hbrun.
> (E:\repository\harbour-svn\tests)\harbour\bin\hbrun mt\mttest01.prg
> Killed by SIGSEGV
> pid=0x7e87 ppid=0x0253 tid=0x0001 slot=0x00b2 pri=0x0200 mc=0x0001
> E:\HARBOUR\BIN\HBRUN.EXE
> HBRUN 0:00026f26
> cs:eip=005b:00036f26      ss:esp=0053:022afe50      ebp=022afe58
>  ds=0053      es=0053      fs=150b      gs=0000     efl=00010212
> eax=00000000 ebx=026001c0 ecx=00000000 edx=0260013c edi=0001028f esi=00000028
> Process dumping was disabled, use DUMPPROC / PROCDUMP to enable it.
> The same if I try to build any of the test programs inside tests\ using hvmmt.

Then there is probably sth wrong with your build.
I would like to wait for David's confirmation with
current SVN code. It's possible that the problem
is caused by some stupid typo in today modifications
for speed improvement. But if not and it works for David
then it has to be sth local to OS2-GCC builds and I'm
afraid that it will be out of my knowledge to resolve
the problem. You know much more about OS2.
For sure it works for me in Linux and W32 cross builds.
BTW today I committed modification with TLS preloading.
If you synced SVN then you should make clean build 

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep 23 16:19:33 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 23 16:20:13 2008
Subject: [Harbour] Re: MSVS 2008: error with new alloc
In-Reply-To: <8AD37D0F-CDFA-4BDA-8B37-AFD3CFFA479A@syenar.hu>
References: <05579321-71DF-474A-8416-62DE5F0BBEB5@syenar.hu>
	<451EA718-DE83-44AA-B1A7-ED0E3255AD43@syenar.hu>
	<20080922191704.GA6314@34-mo7-2.acn.waw.pl>
	<32233A4E-51F2-42F0-9C90-DBDE6C2F15B4@syenar.hu>
	<20080922220917.GB4029@34-mo7-2.acn.waw.pl>
	<DD709B32-8DF7-4573-87F2-D0C06E959A98@syenar.hu>
	<20080923035159.GA17808@34-mo7-2.acn.waw.pl>
	<7D5CEED9-C435-41F4-9AD2-6B0FB139DB3C@syenar.hu>
	<20080923133336.GD20289@34-mo7-2.acn.waw.pl>
	<8AD37D0F-CDFA-4BDA-8B37-AFD3CFFA479A@syenar.hu>
Message-ID: <20080923201933.GB17790@34-mo7-2.acn.waw.pl>

On Tue, 23 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

>> use //build switch and if necessary redirect stderr to
>> stdout by //stderr:1
> I know these, but couldn't we make it easier?
> I may look into this later. memtest output can
> only be screen grabbed.

So probably we should follow Massimo suggestion and use
SET ALTERNATE for logging output or force some other GT,
f.e. GTCGI.
BTW I've seen that in bld.bat only one GT library is used
(%_HB_GT_LIB%). It should be changed and all core GT drivers
for given platform should passed to linker which will chose
default one or GT(s) requested by user in compiled code.

> [ And another related issue: for GTWVT apps,
> I've found no way to grab the output of //build.
> I don't know if there is a fix for this, but it'd
> be definitely useful. ]

I cannot tests it in Linux but AFAIR it depends on parent
process and if it set redirection for calling one even if
it's GUI program then it works. I'm 90% sure that it was
working for me for Harbour MinGW application executed from
MSYS.

> BTW, Google Chrome has an automated build / test
> system, which is providing such amazing automated
> performance graphs:
> http://build.chromium.org/buildbot/perf/dashboard/overview.html
> [ buildbot is an OSS project BTW. ]

Very nice. I'll try to look at it closer in some spare time.

best regards,
Przemek
From dmacias at mail.udg.mx  Tue Sep 23 16:36:58 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Sep 23 16:37:06 2008
Subject: [Harbour] Re: 2008-09-19 22:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48D9536A.1090300@mail.udg.mx>

Przemek, Maurilio:

[Maurilio]
 >I see that the OS/2 build has -DTCPV40HDRS disabled by default, now, 
 >IMHO this
 >is an error since the biggest part of OS/2 systems still out there 
won't >be
 >able to run harbour .EXEs if this define is not enabled.

 >On the contrary, on newer systems this defines will just cause very >minor
 >slowdowns on Gigabit ethernet or higher.

 >So, to be compatible with older systems, which is one of the strongest
 >capability of OS/2, it would be wiser to have it enabled.

 >That said, I'd like to ask you to re-enable it if anybody has nothing 
to >object.

[Przemek]
 >Yes of course. These are real OS2 users developers decisions.
 >I have no idea what this macro exactly does and where is necessary.
 >I fully trust your decision here.

[Przemek]
 >2008-09-23 17:09 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
 >  * harbour/config/os2/gcc.cf
 >    * enabled -DTCPV40HDRS in default builds, can be disabled by
 >      setting HB_OS2_NEW_TCP=yes environment variable

This WAS discussed time ago by Przemek and Maurilio exposing differences 
between OS/2 and eComStation
At last -DTCPV40HDRS was disabled by Przemek against Maurilio point 
which does not use Harbour in OS/2

I oppose to reenable it if mentioned in that time is not revised

....................
2007-04-06 02:32 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
   * harbour/config/os2/gcc.cf
     * commented out -DTCPV40HDRS in CFLAGS
   * harbour/make_gnu.cmd
     * added commented by default: set C_USR=-DTCPV40HDRS %C_USR%
....................

David Macias


From harbour.01 at syenar.hu  Tue Sep 23 16:52:54 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 16:53:03 2008
Subject: [Harbour] Proposed changes to EXTRAP.C
In-Reply-To: <B0083775041@ms1.3peaks.com>
References: <05579321-71DF-474A-8416-62DE5F0BBEB5@syenar.hu>
	<451EA718-DE83-44AA-B1A7-ED0E3255AD43@syenar.hu>
	<20080922191704.GA6314@34-mo7-2.acn.waw.pl>
	<32233A4E-51F2-42F0-9C90-DBDE6C2F15B4@syenar.hu>
	<20080922220917.GB4029@34-mo7-2.acn.waw.pl>
	<DD709B32-8DF7-4573-87F2-D0C06E959A98@syenar.hu>
	<20080923035159.GA17808@34-mo7-2.acn.waw.pl>
	<7D5CEED9-C435-41F4-9AD2-6B0FB139DB3C@syenar.hu>
	<20080923133336.GD20289@34-mo7-2.acn.waw.pl>
	<FFFA6FE6-6651-4733-81ED-0EB7C0DB10E3@syenar.hu>
	<B0083771417@ms1.3peaks.com>
	<0978EC97-6570-4F89-8C69-FF3E6622267F@syenar.hu>
	<B0083775041@ms1.3peaks.com>
Message-ID: <BC03D03F-2B6C-4395-91E9-880542D46100@syenar.hu>

Hi Randy,

What you say is probably possible to control by
the return value of the exception handler.

I'd feel a Set() to be too early to control such
an isolated, moreover platform-dependent detail in
Harbour, but if we can somehow broaden the context
this may also be an option.

For the time being I'd rather propose an internal
command line switch (F.e. //EXMODE:<n> or similar)
to control this, where <n> could be:
1=alert and pass (default)
2=pass
3=quit

Brgds,
Viktor

On 2008.09.23., at 21:50, Randy Portnoff wrote:

> Hi Viktor,
>
> What would also be great would be if you could optionally (eg.  
> _SET_FORCE_FATER_TERMINATION) force the app to close instead of  
> being held open by the O/S GPF alert message. For example, a server  
> application that runs into a GPF, is held open/running since Windows  
> attempts to display the GPF window - If Harbour could force the app  
> to terminate (again, as an option), this would be very helpful.
>
> Best regards,
> Randy.
>
> At 02:34 PM 9/23/2008, you wrote:
>
>> Hi Randy,
>>
>>> Hi all,
>>>
>>> I suggest the following changes to EXTAP.C:
>>>
>>> 1. The log should be closed BEFORE any alert messages are displayed.
>>
>> True and thanks, I'll commit this ASAP.
>>
>>> 2. There needs to be a way to suppress any alert messages (ie.
>>> create log and exit) for applications that do not require user
>>> activity (eg. server programs).
>>
>> How about making GPF a simple internal error call?
>>
>> [ I'd personally avoid any MessageBox() calls from any
>> Harbour core or contrib code. ]
>>
>> To suppress .log file, I'll modify the code to explicitly
>> not try to create a log file if the _SET_HBOUTLOG filename
>> is empty, but this probably works even now.
>>
>> Brgds,
>> Viktor
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Tue Sep 23 17:16:14 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Sep 23 17:16:22 2008
Subject: [Harbour] 2008-09-23 15:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080923133902.GA14875@34-mo7-2.acn.waw.pl>
References: <20080923133902.GA14875@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809231416n2c5852f3w9eb6058e114208e6@mail.gmail.com>

On Tue, Sep 23, 2008 at 3:39 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

>      Please make speed tests for MT mode with different C compilers
>      and different platforms.

Under Fedora 9, gcc version 4.3.0 20080428 (Red Hat 4.3.0-8) (GCC)

MT total real time:                                     21.06
ST total real time:                                      17.91

only 15% slower.

best regards,
Lorenzo

09/23/08 22:51:19 Harbour 1.1.0dev (Rev. 9483) (MT), Linux 2.6.26.3-29.fc9.i686
i686
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.06
CPU usage -> secondsCPU()

c:=L_C ->                                             0.07
n:=L_N ->                                             0.03
d:=L_D ->                                             0.04
c:=M_C ->                                             0.08
n:=M_N ->                                             0.04
d:=M_D ->                                             0.04
(sh) c:=F_C ->                                        0.14
(sh) n:=F_N ->                                        0.17
(sh) d:=F_D ->                                        0.07
(ex) c:=F_C ->                                        0.14
(ex) n:=F_N ->                                        0.18
(ex) d:=F_D ->                                        0.07
n:=o:GenCode ->                                       0.16
n:=o[8] ->                                            0.12
round(i/1000,2) ->                                    0.21
str(i/1000) ->                                        0.46
val(a3[i%ARR_LEN+1]) ->                               0.43
dtos(j+i%10000-5000) ->                               0.37
eval({||i%ARR_LEN}) ->                                0.23
eval({|x|x%ARR_LEN},i) ->                             0.23
eval({|x|f1(x)},i) ->                                 0.33
&('f1('+str(i)+')') ->                                3.06
eval([&('{|x|f1(x)}')]) ->                            0.36
j := valtype(a)+valtype(i) ->                         0.45
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                0.74
j := val(a2[i%ARR_LEN+1]) ->                          0.48
j := a2[i%ARR_LEN+1] == s ->                          0.32
j := a2[i%ARR_LEN+1] = s ->                           0.35
j := a2[i%ARR_LEN+1] >= s ->                          0.34
j := a2[i%ARR_LEN+1] < s ->                           0.35
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         1.26
f0() ->                                               0.12
f1(i) ->                                              0.19
f2(c[8]) ->                                           0.18
f2(c[40000]) ->                                       0.17
f2(@c[40000]) ->                                      0.12
f2(c[40000]); c2:=c ->                                0.25
f2(@c[40000]); c2:=c ->                               0.19
f3(a,a2,c,i,j,t,bc) ->                                0.46
f2(a2) ->                                             0.17
s:=f4() ->                                            0.73
s:=f5() ->                                            0.27
ascan(a,i%ARR_LEN) ->                                 0.29
ascan(a2,c+chr(i%64+64)) ->                           0.95
ascan(a,{|x|x==i%ARR_LEN}) ->                         2.93
============================================================
total application time:                              21.05
total real time:                                     21.06

09/23/08 22:54:01 Harbour 1.1.0dev (Rev. 9483), Linux 2.6.26.3-29.fc9.i686 i686
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.04
CPU usage -> secondsCPU()

c:=L_C ->                                             0.05
n:=L_N ->                                             0.04
d:=L_D ->                                             0.04
c:=M_C ->                                             0.05
n:=M_N ->                                             0.04
d:=M_D ->                                             0.05
(sh) c:=F_C ->                                        0.13
(sh) n:=F_N ->                                        0.18
(sh) d:=F_D ->                                        0.09
(ex) c:=F_C ->                                        0.14
(ex) n:=F_N ->                                        0.18
(ex) d:=F_D ->                                        0.09
n:=o:GenCode ->                                       0.14
n:=o[8] ->                                            0.10
round(i/1000,2) ->                                    0.21
str(i/1000) ->                                        0.44
val(a3[i%ARR_LEN+1]) ->                               0.39
dtos(j+i%10000-5000) ->                               0.33
eval({||i%ARR_LEN}) ->                                0.19
eval({|x|x%ARR_LEN},i) ->                             0.20
eval({|x|f1(x)},i) ->                                 0.31
&('f1('+str(i)+')') ->                                2.72
eval([&('{|x|f1(x)}')]) ->                            0.32
j := valtype(a)+valtype(i) ->                         0.36
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                0.64
j := val(a2[i%ARR_LEN+1]) ->                          0.47
j := a2[i%ARR_LEN+1] == s ->                          0.28
j := a2[i%ARR_LEN+1] = s ->                           0.31
j := a2[i%ARR_LEN+1] >= s ->                          0.30
j := a2[i%ARR_LEN+1] < s ->                           0.32
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         0.97
f0() ->                                               0.11
f1(i) ->                                              0.19
f2(c[8]) ->                                           0.12
f2(c[40000]) ->                                       0.13
f2(@c[40000]) ->                                      0.13
f2(c[40000]); c2:=c ->                                0.18
f2(@c[40000]); c2:=c ->                               0.18
f3(a,a2,c,i,j,t,bc) ->                                0.32
f2(a2) ->                                             0.13
s:=f4() ->                                            0.68
s:=f5() ->                                            0.24
ascan(a,i%ARR_LEN) ->                                 0.27
ascan(a2,c+chr(i%64+64)) ->                           0.90
ascan(a,{|x|x==i%ARR_LEN}) ->                         2.45
============================================================
total application time:                              17.91
total real time:                                     17.91
From mbelgrano at deltain.it  Tue Sep 23 17:45:13 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep 23 17:45:28 2008
Subject: [Harbour] Re: MSVS 2008: error with new alloc
In-Reply-To: <20080923201933.GB17790@34-mo7-2.acn.waw.pl>
References: <05579321-71DF-474A-8416-62DE5F0BBEB5@syenar.hu><451EA718-DE83-44AA-B1A7-ED0E3255AD43@syenar.hu><20080922191704.GA6314@34-mo7-2.acn.waw.pl><32233A4E-51F2-42F0-9C90-DBDE6C2F15B4@syenar.hu><20080922220917.GB4029@34-mo7-2.acn.waw.pl><DD709B32-8DF7-4573-87F2-D0C06E959A98@syenar.hu><20080923035159.GA17808@34-mo7-2.acn.waw.pl><7D5CEED9-C435-41F4-9AD2-6B0FB139DB3C@syenar.hu><20080923133336.GD20289@34-mo7-2.acn.waw.pl><8AD37D0F-CDFA-4BDA-8B37-AFD3CFFA479A@syenar.hu>
	<20080923201933.GB17790@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFF3@SRV02.deltain.net>


>>> use //build switch and if necessary redirect stderr to
>>> stdout by //stderr:1
>> I know these, but couldn't we make it easier?
>> I may look into this later. memtest output can
>> only be screen grabbed.

>So probably we should follow Massimo suggestion and use
>SET ALTERNATE for logging output or force some other GT,

Good see appreciation for an idea
From druzus at acn.waw.pl  Tue Sep 23 17:54:40 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 23 17:55:21 2008
Subject: [Harbour] Re: 2008-09-19 22:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48D9536A.1090300@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48D9536A.1090300@mail.udg.mx>
Message-ID: <20080923215440.GA1595@34-mo7-2.acn.waw.pl>

On Tue, 23 Sep 2008, David Arturo Macias Corona wrote:

Hi David,

> >2008-09-23 17:09 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> >  * harbour/config/os2/gcc.cf
> >    * enabled -DTCPV40HDRS in default builds, can be disabled by
> >      setting HB_OS2_NEW_TCP=yes environment variable
> This WAS discussed time ago by Przemek and Maurilio exposing differences 
> between OS/2 and eComStation
> At last -DTCPV40HDRS was disabled by Przemek against Maurilio point which 
> does not use Harbour in OS/2
> I oppose to reenable it if mentioned in that time is not revised

I'm sorry I forgot about it and I do not remember the exact arguments
against TCPV40HDRS. I should wait with committing it.
Now IMHO you should agree it together. I'm not OS2 user and I cannot
make any decision here.
If you will need arbiter then please send a message here describing
problem(s) created by TCPV40HDRS here and the final default setting
will be group decision.

If this switch allows to use Harbour binaries on wider range of OS2
versions then probably it should be default. But I do not remember
what exact problems it was creating. AFAIR some additional dependences
to old socket library but I'm not sure.

At this moment for me much more important is checking if current
SVN code is working for you. If TCPV40HDRS is a problem in your
builds then please remove it. It does not work for Maurilio and
I would like to know if it's not caused by my today modifications.
If you can test it then it will greatly help and reduce the
problem.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Sep 23 18:24:32 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 18:24:39 2008
Subject: [Harbour] 2008-09-24 00:18 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91dcb$Blat.v2.6.2$26fcd922$1d446bc9fedc@127.0.0.1>

2008-09-24 00:18 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * tests/memtst.prg
    + Added #include "simpleio.ch" to allow output redirection.

  * bin/bld.bat
  * bin/bld_os2.cmd
    * Removed any HB_GT_LIB "selection" logic. Selection is to 
      be done from source code, from now on all supported core GTs 
      are included in the lib list.
    * Few other minor cleanups.

  * source/vm/cmdarg.c
    * Commented code turned into HB_C52_STRICT branch.

  * source/vm/vmmt/Makefile
    ! Fixed cemgw -> mingwce

  * config/dos/global.cf
  * config/os2/global.cf
  * config/w32/global.cf
    % Removed unnecessary logic to select default GT. This is 
      done in Harbour source code now.

  ; TOFIX: After MT changes, mingw32 build gives this new error:
           make: *** mainstd: No such file or directory.  Stop.
           make[3]: *** [first] Error 2
           make[2]: *** [first] Error 2
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 23 18:31:46 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 18:31:55 2008
Subject: [Harbour] Linux default GT
Message-ID: <D2C6118B-AB35-4B4B-85F6-38F6EE4CDBF0@syenar.hu>

Hi Przemek,

In hbgtcore.c currently for HB_OS_LINUX the
default GT is GTCRS. Shouldn't we change this
to GTTRM?

Brgds,
Viktor

From druzus at acn.waw.pl  Tue Sep 23 18:38:21 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 23 18:39:27 2008
Subject: [Harbour] Linux default GT
In-Reply-To: <D2C6118B-AB35-4B4B-85F6-38F6EE4CDBF0@syenar.hu>
References: <D2C6118B-AB35-4B4B-85F6-38F6EE4CDBF0@syenar.hu>
Message-ID: <20080923223821.GA13767@34-mo7-2.acn.waw.pl>

On Wed, 24 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> In hbgtcore.c currently for HB_OS_LINUX the
> default GT is GTCRS. Shouldn't we change this
> to GTTRM?

Yes it should and probably also for all other *nixes.
I'll commit modification in a while.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Sep 23 18:44:01 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 18:44:09 2008
Subject: [Harbour] Linux default GT
In-Reply-To: <20080923223821.GA13767@34-mo7-2.acn.waw.pl>
References: <D2C6118B-AB35-4B4B-85F6-38F6EE4CDBF0@syenar.hu>
	<20080923223821.GA13767@34-mo7-2.acn.waw.pl>
Message-ID: <F7C0E2EB-E4D6-4651-A1F6-EE5EF73A9F8E@syenar.hu>

I have it ready in the cue already :) just let me commit it,
and please review / complete it.

Brgds,
Viktor

On 2008.09.24., at 0:38, Przemyslaw Czerpak wrote:

> On Wed, 24 Sep 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> In hbgtcore.c currently for HB_OS_LINUX the
>> default GT is GTCRS. Shouldn't we change this
>> to GTTRM?
>
> Yes it should and probably also for all other *nixes.
> I'll commit modification in a while.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Tue Sep 23 18:44:44 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 23 18:45:24 2008
Subject: [Harbour] 2008-09-24 00:44 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080923224444.GA19824@34-mo7-2.acn.waw.pl>

2008-09-24 00:44 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/hbgtcore.c
  * harbour/source/rtl/gtsys.c
    * use GTTRM as default GT in *nixes

best regards
Przemek
From dmacias at mail.udg.mx  Tue Sep 23 19:09:35 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Sep 23 19:09:38 2008
Subject: [Harbour] Re: 2008-09-19 22:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48D9772F.6090502@mail.udg.mx>

Przemek, Maurilio:

[Maurilio]
 >> I did the change to the makefile, I get an immediate SIGSEGV simply 
 >>starting
 >> hbrun.
 >> (E:\repository\harbour-svn\tests)\harbour\bin\hbrun mt\mttest01.prg
 >> Killed by SIGSEGV

[Przemek]
 >Then there is probably sth wrong with your build.
 >I would like to wait for David's confirmation with
 >current SVN code. It's possible that the problem
 >is caused by some stupid typo in today modifications
 >for speed improvement. But if not and it works for David
 >then it has to be sth local to OS2-GCC builds and I'm
 >afraid that it will be out of my knowledge to resolve
 >the problem. You know much more about OS2.
 >For sure it works for me in Linux and W32 cross builds.
 >BTW today I committed modification with TLS preloading.
 >If you synced SVN then you should make clean build

Please fix this. I fixed it locally:
   config/os2/gcc.cf:24: *** missing separator.  Stop.

Current Harbour compile/run fine
I use newest
   set HB_OS2_NEW_TCP=yes
but not agree with name   :-)
When it is "New TCP" ? three years ago, now, two years ahead, ... ?

I renamed original hbrun.exe as hbrun_st.exe and created new 
hbrun_mt.exe with hbvmmt.a
23/09/08  4:55p     2,711,279    124 a---  hbrun_st.exe
23/09/08  5:16p     2,729,903    124 a---  hbrun_mt.exe

Using same execution as Maurilio with MT:
"(E:\repository\harbour-svn\tests)\harbour\bin\hbrun mt\mttest01.prg"
--------------------
[E:\harbour809mt\harbour\tests]e:\harbour809mt\harbour\bin\hbrun_mt.exe 
mt\mttest01.prg

Harbour 1.1.0dev (Rev. 9483)
join: .T.
result: Hello World!!! Hello World!!! Hello World!!!
static var type: B
      12345.678
      12346.678
--------------------

and checking with ST it must fail as well:
--------------------
[E:\harbour809mt\harbour\tests]e:\harbour809mt\harbour\bin\hbrun_st.exe 
mt\mttes
t01.prg

Harbour 1.1.0dev (Rev. 9483)
Error BASE/3012  Argument error: HB_THREADJOIN
Called from HB_THREADJOIN(0)
Called from MAIN(25)
Called from HB_HRBRUN(0)
Called from _APPMAIN(109)
--------------------

and mttest01 compiled with MT
--------------------
[E:\harbour809mt\harbour\tests]mt\mttest01.exe

Harbour 1.1.0dev (Rev. 9483)
join: .T.
result: Hello World!!! Hello World!!! Hello World!!!
static var type: B
      12345.678
      12346.678
--------------------


Everything worked fine here with current Harbour (9483, fresh build) and 
eComStation 1.2MR with set HB_OS2_NEW_TCP=yes ( without -DTCPV40HDRS )


I include tests with:

speedtst.prg compiled with MT
-----------------------------
   total application time:                              51.98
   total real time:                                     51.98

speedtst.prg executed with hbrun_mt.exe
---------------------------------------
[E:\harbour809mt\harbour\tests]e:\harbour809mt\harbour\bin\hbrun_mt.exe 
speedtst.prg
   total application time:                              53.01
   total real time:                                     53.01

Recent was:
ST
     total application time:                              47.13
     total real time:                                     47.14
MT
     total application time:                              55.08
     total real time:                                     55.08

So MT continue falling near ST  :-)
I know that "mileage may vary" due to concurrent tasks

 >Now we reach level which cannot be improved too much more
 >though I'll commit in a while yet another modification which
 >will buffer TLS access by preloading hb_stack pointer to C
 >stack functions local variable. It should give some additional
 >speed improvement on some platforms/C compilers, f.e. in BCC
 >builds which seems the have very expensive cost of native
 >TLS variables.

Maybe this is the reason

 >> I have not started MT tests in Win32 / Linux yet. Both will be in
 >> Core2Duo 2.0 so a great speed difference should be expected respect to
 >> current Athlon 2200+ tests

 >Not in sppedtst.prg test. It's classic single thread program
 >which will use only one CPU.

My expects are not exactly for multi-CPU, but for comparing two 
generations of processors

In previous tests with highly extensive calculations program, the 
core2duo 2.0 terminate in half of time against a PentiumIV 3.3 Mhz HT
Same Windows XP

I made that program around 15 years ago. Is a computer simulation of an 
polymer extruder involving numerical methods and finite differences in 
3-D grids calculating velocity, pressure, temperature, ... profiles
It that time a run used near 2 hours (486/DX ?), now core2duo made it in 
3 minutes

Program are still in 16 bits with Clipper 5.3 (latest compiled in 1997)
Perhaps later I will try with (x)Harbour, it will be a good test  :-)

David Macias

From bedipritpal at hotmail.com  Tue Sep 23 19:16:48 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Sep 23 19:16:56 2008
Subject: [Harbour] 2008-09-23 16:19 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <19638479.post@talk.nabble.com>


2008-09-23 16:19 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/hbwhat
    + /tests
    + /tests/whatdemo.prg
      A demo program, very basic, will be expanded in future, together
      with gtwvt.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-09-23-16%3A19-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp19638479p19638479.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Tue Sep 23 19:20:04 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 23 19:20:46 2008
Subject: [Harbour] Linux default GT
In-Reply-To: <F7C0E2EB-E4D6-4651-A1F6-EE5EF73A9F8E@syenar.hu>
References: <D2C6118B-AB35-4B4B-85F6-38F6EE4CDBF0@syenar.hu>
	<20080923223821.GA13767@34-mo7-2.acn.waw.pl>
	<F7C0E2EB-E4D6-4651-A1F6-EE5EF73A9F8E@syenar.hu>
Message-ID: <20080923232004.GA13939@34-mo7-2.acn.waw.pl>

On Wed, 24 Sep 2008, Szak?ts Viktor wrote:
> I have it ready in the cue already :) just let me commit it,
> and please review / complete it.

Ups, sorry Viktor, I commited before I received this message :-(

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Sep 23 19:38:13 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 19:38:28 2008
Subject: [Harbour] 2008-09-24 01:37 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91dd5$Blat.v2.6.2$71fa88b6$1388b9b256e6@127.0.0.1>

2008-09-24 01:37 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/gtsys.c
    * Added HB_WINCE with GTWVT to the set of defaults.

  * config/darwin/global.cf
  * config/hpux/global.cf
  * config/linux/global.cf
  * config/sunos/global.cf
  * config/bsd/global.cf
    % Removed unnecessary defaulting to GTSTD.

  * config/os2/gcc.cf
    ! Fixed minor typo in line 24 / HB_OS2_NEW_TCP.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 23 19:42:12 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 19:42:18 2008
Subject: [Harbour] 2008-09-24 01:41 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91dd6$Blat.v2.6.2$006a4582$e844e0f29c@127.0.0.1>

2008-09-24 01:41 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbwhat/tests/whatdemo.prg
    ! SVN ID.

  + contrib/hbwhat/tests/bld_b32.bat
  + contrib/hbwhat/tests/bld_vc.bat
    + Added missing non-GNU make files.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 23 20:14:15 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 20:14:28 2008
Subject: [Harbour] Linux default GT
In-Reply-To: <20080923232004.GA13939@34-mo7-2.acn.waw.pl>
References: <D2C6118B-AB35-4B4B-85F6-38F6EE4CDBF0@syenar.hu>
	<20080923223821.GA13767@34-mo7-2.acn.waw.pl>
	<F7C0E2EB-E4D6-4651-A1F6-EE5EF73A9F8E@syenar.hu>
	<20080923232004.GA13939@34-mo7-2.acn.waw.pl>
Message-ID: <41A78134-DD85-4737-85DF-1208799EFCAD@syenar.hu>

No problem at all Przemek.

Brgds,
Viktor

On 2008.09.24., at 1:20, Przemyslaw Czerpak wrote:

> On Wed, 24 Sep 2008, Szak?ts Viktor wrote:
>> I have it ready in the cue already :) just let me commit it,
>> and please review / complete it.
>
> Ups, sorry Viktor, I commited before I received this message :-(
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From toninhofwi at yahoo.com.br  Tue Sep 23 20:44:04 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Sep 23 20:37:35 2008
Subject: [Harbour] memtst and  HB_FM_DL_ALLOC
In-Reply-To: <l8ohd411mf47h52q0rt5uj3pe1v3lsqu22@4ax.com>
References: <l8ohd411mf47h52q0rt5uj3pe1v3lsqu22@4ax.com>
Message-ID: <p63jd4ta91aolfr6vmmj16lvo2e3vuffu8@4ax.com>

>Here bcc go always fast, but dla have "WAITS" in various steps and the
>results are variable, but always bad than bcc.

Very strange. My first test was done under Windows Vista. The same
test with a notebook and windows XP and DLA works better, with no
"waits".

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opção para você! 
Experimente já e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From harbour.01 at syenar.hu  Tue Sep 23 21:16:14 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 21:16:27 2008
Subject: [Harbour] mingw results and Windows compiler roundup
Message-ID: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>

Hi all,

I've built mingw with -DHB_USE_TLS (the rest is default),
then I got 'undefined reference to '__emutls_get_address'
errors on linking. Such symbol doesn't BTW exist in MinGW
4.3.2 supplied libs.

Then I went with the fully default build, and it worked okay.

Final mingw speedtst results are:
ST: 64.06
MT: 87.42

Here are some Windows compiler comparison results
(speedtst / Total application time)
=================================================

1.1.0 (r9488)

- -DHB_NO_DEBUG [ -DHB_NO_TRACE is default ] -DHB_FM_STATISTICS_OFF - 
DHB_FM_DL_ALLOC
- Harbour: -l -gc3 [I didn't mean to test with -gc3, but I had it  
there for production, and forgot about it]
- MSVS switches: (all default C mode)
- GCC switches: -O3 -fomit-frame-pointer -ffast-math -march=pentiumpro
- BCC switches: -6 -OS -Ov -Oi -Oc -Q -tWM

Compiler     ST     MT overhead
-------- ------ ------ --------
MSVS2008  32.41  46.09      42%
GCC432    46.58  66.02      41% [NOTE: GCC doesn't have TLS support  
AFAIK]
BCC58     52.64  72.75      38%

1.0.1 (release)

- -DHB_NO_DEBUG -DHB_NO_TRACE [ -DHB_FM_STATISTICS_OFF is default ]
- Rest of switches same as above.

Compiler     ST
-------- ------
MSVS2008  41.06
GCC432    53.25
BCC58     52.80

Basically I'm getting a consistent 36-42% MT overhead with all
compilers, so I wouldn't be surprised if overhead would highly
depend on exact CPU model and maybe Windows version.

The other conclusion is that MSVS2008 seems to generate far
the best code, 1.1.0 MT mode even beats 1.0.1 ST mode with all
compilers.

[ Would be interesting to see how removing -gc3 would change
above results, but I'll leave that for another time. ]

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 23 21:20:28 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 21:20:37 2008
Subject: [Harbour] Re: mingw results and Windows compiler roundup
In-Reply-To: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
Message-ID: <CDAC0365-28E9-4E64-B739-5DF536E3438A@syenar.hu>

> [ Would be interesting to see how removing -gc3 would change
> above results, but I'll leave that for another time. ]

Update:

Thinking about it, -gc3 for Harbour itself only (that was
the case) shouldn't affect test results too much, as speedtst
doesn't seem to call .prg RTL code, so the results should
theoretically be the same with a -gc0 Harbour build.

Again: speedtst.prg was always compiled with -gc0.

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 23 21:26:40 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 21:26:50 2008
Subject: [Harbour] Re: mingw results and Windows compiler roundup
In-Reply-To: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
Message-ID: <6FBEDA25-AAC9-4F02-B4D8-F5551C07BE23@syenar.hu>

> The other conclusion is that MSVS2008 seems to generate far
> the best code, 1.1.0 MT mode even beats 1.0.1 ST mode with all
> compilers.

Update/Typo: Except itself.

Brgds and good night,
Viktor

From elart at elart.it  Tue Sep 23 21:40:04 2008
From: elart at elart.it (elart)
Date: Tue Sep 23 21:40:15 2008
Subject: [Harbour] Compile error... 
Message-ID: <48D99A74.8070702@elart.it>

I have a prg was compiling without  any issue, now i get:

/usr/lib/gcc/i486-linux-gnu/4.3.2/../../../../lib/libgttrm.a(gttrm.o): 
In function `hb_gt_trm_termOutTrans':
gttrm.c:(.text+0x5b1): undefined reference to `hb_vmCDP'
/usr/lib/gcc/i486-linux-gnu/4.3.2/../../../../lib/libgttrm.a(gttrm.o): 
In function `hb_gt_trm_SetDispCP':
gttrm.c:(.text+0x4c3e): undefined reference to `hb_cdpID'
/usr/lib/gcc/i486-linux-gnu/4.3.2/../../../../lib/libgttrm.a(gttrm.o): 
In function `hb_gt_trm_SetKeyCP':
gttrm.c:(.text+0x4e1d): undefined reference to `hb_cdpID'
collect2: ld returned 1 exit status

-----------------------------------------------------------------------------------
HB_GT_LIB=gttrm

Thank you

From harbour.01 at syenar.hu  Tue Sep 23 21:48:52 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 21:49:04 2008
Subject: [Harbour] HB_NO_DEBUG - getting rid of it
Message-ID: <7BDB7D67-D57F-4625-87CA-7D7D69773C1F@syenar.hu>

Hi Przemek,

I still think we should have no HB_NO_DEBUG switch
to avoid debug overhead.

The debug overhead comes from these few sources:
- hb_vmDo()
- hb_vmSend()
- HB_P_LINE opcode
- HB_P_MODULENAME opcode

 From these, HB_P_LINE can easily be suppressed
by /l switch for maximum speed and small footprint,
same can be done by not using /b switch to avoid
HB_P_MODULENAME pcodes completely. That leaves
hb_vmDo()/hb_vmSend(). I assume the biggest stake
of the overhead comes from call via these opcodes:
HB_P_DO, HB_P_DOSHORT, HB_P_FUNCTION, HB_P_FUNCTIONSHORT,
HB_P_SEND, HB_P_SENDSHORT.

Question: What if had debug and non-debug versions
of hb_vmDo()/hb_vmSend() with corresponding debug
and non-debug flavours of HB_P_* opcodes, and Harbour
compiler would use the debug ones when /b was used
and the fast non-debug ones when /b is not used,
which is the default.

That would leave a minimal overhead in direct
hb_vmDo/hb_Send() calls only, but that's probably
negligible, and in return we could get rid of
HB_NO_DEBUG.

What's your opinion?

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 23 21:50:23 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 21:50:29 2008
Subject: [Harbour] 2008-09-24 02:26 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91de7$Blat.v2.6.2$e8995aa8$188e1c46724@127.0.0.1>

2008-09-24 02:26 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_gcc.sh
  * make_gnu_os2.cmd
  * make_gnu.bat
  * make_gnu.sh
  * make_tgz.sh
    % Some additional GT defaulting logic removed.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 23 22:14:33 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 23 22:14:43 2008
Subject: [Harbour] HB_GTGUI_HACK
Message-ID: <94E6C7CB-0474-4384-8945-47B258E65273@syenar.hu>

Hi all,

I intend to remove HB_GTGUI_HACK undocumented
build-time option from Harbour, as it just adds up the
build-time and GT selection confusion.

Users needing GUI apps, should very simply use
these in their code with any default Windows builds:
--
PROCEDURE HB_GTSYS
    REQUEST HB_GT_GUI_DEFAULT
    RETURN
--
or maybe:
--
ANNOUNCE HB_GTSYS
REQUEST HB_GT_GUI_DEFAULT
--

Any reasoned objections?

Brgds,
Viktor

From jose.luis at iaicom.com  Wed Sep 24 03:41:45 2008
From: jose.luis at iaicom.com (=?iso-8859-1?Q?Jos=E9_Luis_Capel_?=)
Date: Wed Sep 24 03:38:24 2008
Subject: [Harbour] Evc4 error building libs 
In-Reply-To: <94E6C7CB-0474-4384-8945-47B258E65273@syenar.hu>
References: <94E6C7CB-0474-4384-8945-47B258E65273@syenar.hu>
Message-ID: <003e01c91e18$ff08b960$bb001aac@AGSoft.local>

Hi,

Using svn from yesterday afternoon I got this error building harbour libs
for evc4:

source\rtl\gtclip.c(69) : error C2078: too many initializers

Attached log file.

Regards,
JOs? Luis Capel
-------------- next part --------------
A non-text attachment was scrubbed...
Name: make_vcce.rar
Type: application/octet-stream
Size: 1558 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080924/6bda1fa8/make_vcce.obj
From maurilio.longo at libero.it  Wed Sep 24 04:00:36 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Sep 24 04:00:45 2008
Subject: [Harbour] hbrun and mt
In-Reply-To: <20080923201155.GA17790@34-mo7-2.acn.waw.pl>
References: <48D90172.70002@libero.it>	<20080923160357.GB28912@34-mo7-2.acn.waw.pl>	<48D92ADD.6040304@libero.it>
	<20080923201155.GA17790@34-mo7-2.acn.waw.pl>
Message-ID: <48D9F3A4.1090402@libero.it>

Przemyslaw,

I've reverted my svn copy to revision 9476, just before your last change, and
I can run every test in tests\mt without problems (rebuilding hbrun with mt vm).

So it has to be something related to your last change.

Maurilio.

Przemyslaw Czerpak wrote:
> On Tue, 23 Sep 2008, Maurilio Longo wrote:
> 
> Hi Maurilio,
> 
>> I did the change to the makefile, I get an immediate SIGSEGV simply starting
>> hbrun.
>> (E:\repository\harbour-svn\tests)\harbour\bin\hbrun mt\mttest01.prg
>> Killed by SIGSEGV
>> pid=0x7e87 ppid=0x0253 tid=0x0001 slot=0x00b2 pri=0x0200 mc=0x0001
>> E:\HARBOUR\BIN\HBRUN.EXE
>> HBRUN 0:00026f26
>> cs:eip=005b:00036f26      ss:esp=0053:022afe50      ebp=022afe58
>>  ds=0053      es=0053      fs=150b      gs=0000     efl=00010212
>> eax=00000000 ebx=026001c0 ecx=00000000 edx=0260013c edi=0001028f esi=00000028
>> Process dumping was disabled, use DUMPPROC / PROCDUMP to enable it.
>> The same if I try to build any of the test programs inside tests\ using hvmmt.
> 
> Then there is probably sth wrong with your build.
> I would like to wait for David's confirmation with
> current SVN code. It's possible that the problem
> is caused by some stupid typo in today modifications
> for speed improvement. But if not and it works for David
> then it has to be sth local to OS2-GCC builds and I'm
> afraid that it will be out of my knowledge to resolve
> the problem. You know much more about OS2.
> For sure it works for me in Linux and W32 cross builds.
> BTW today I committed modification with TLS preloading.
> If you synced SVN then you should make clean build 
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Wed Sep 24 04:11:48 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Sep 24 04:11:54 2008
Subject: [Harbour] Re: 2008-09-19 22:27 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080923215440.GA1595@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<48D9536A.1090300@mail.udg.mx>
	<20080923215440.GA1595@34-mo7-2.acn.waw.pl>
Message-ID: <48D9F644.9050904@libero.it>

Przemyslaw,

first of all, I'm sorry we're wasting your time with this issue.

Then, since you added the new envvar, David can build his copy with new
headers, but the 'default' build, the one that gets distributed should be with
the old headers.

Those old headers make it possible for a program built with them to run on
every copy of OS/2 starting from OS/2 Warp 3.0 up until now. Warp 3.0 was
released in 1992 or 1993 (I don't remember exactly), while new headers run
only on eCs and some Warp Server, so we are talking of OS/2 versions from
around 2001-2002 up until now, but with a much lower number of copies. I don't
think eCS has sold more than a few thousands copies up until now.

Maurilio.

Przemyslaw Czerpak wrote:
> On Tue, 23 Sep 2008, David Arturo Macias Corona wrote:
> 
> Hi David,
> 
>>> 2008-09-23 17:09 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>>>  * harbour/config/os2/gcc.cf
>>>    * enabled -DTCPV40HDRS in default builds, can be disabled by
>>>      setting HB_OS2_NEW_TCP=yes environment variable
>> This WAS discussed time ago by Przemek and Maurilio exposing differences 
>> between OS/2 and eComStation
>> At last -DTCPV40HDRS was disabled by Przemek against Maurilio point which 
>> does not use Harbour in OS/2
>> I oppose to reenable it if mentioned in that time is not revised
> 
> I'm sorry I forgot about it and I do not remember the exact arguments
> against TCPV40HDRS. I should wait with committing it.
> Now IMHO you should agree it together. I'm not OS2 user and I cannot
> make any decision here.
> If you will need arbiter then please send a message here describing
> problem(s) created by TCPV40HDRS here and the final default setting
> will be group decision.
> 
> If this switch allows to use Harbour binaries on wider range of OS2
> versions then probably it should be default. But I do not remember
> what exact problems it was creating. AFAIR some additional dependences
> to old socket library but I'm not sure.
> 
> At this moment for me much more important is checking if current
> SVN code is working for you. If TCPV40HDRS is a problem in your
> builds then please remove it. It does not work for Maurilio and
> I would like to know if it's not caused by my today modifications.
> If you can test it then it will greatly help and reduce the
> problem.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Wed Sep 24 04:13:52 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Sep 24 04:13:58 2008
Subject: [Harbour] Re: 2008-09-19 22:27 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <48D9772F.6090502@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48D9772F.6090502@mail.udg.mx>
Message-ID: <48D9F6C0.6050807@libero.it>

David Arturo Macias Corona wrote:
> 
> Current Harbour compile/run fine
> I use newest
>   set HB_OS2_NEW_TCP=yes
> but not agree with name   :-)

:)

> When it is "New TCP" ? three years ago, now, two years ahead, ... ?
> 

We could call it HB_OS2_TCP32 :)

> I renamed original hbrun.exe as hbrun_st.exe and created new
> hbrun_mt.exe with hbvmmt.a
> 23/09/08  4:55p     2,711,279    124 a---  hbrun_st.exe
> 23/09/08  5:16p     2,729,903    124 a---  hbrun_mt.exe
> 
> Using same execution as Maurilio with MT:
> "(E:\repository\harbour-svn\tests)\harbour\bin\hbrun mt\mttest01.prg"
> --------------------
> [E:\harbour809mt\harbour\tests]e:\harbour809mt\harbour\bin\hbrun_mt.exe
> mt\mttest01.prg
> 

Maybe it is because I'm using a SMP kernel?

Best regards.

Maurilio.



-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From druzus at acn.waw.pl  Wed Sep 24 04:19:09 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 24 04:19:49 2008
Subject: [Harbour] hbrun and mt
In-Reply-To: <48D9F3A4.1090402@libero.it>
References: <48D90172.70002@libero.it>
	<20080923160357.GB28912@34-mo7-2.acn.waw.pl>
	<48D92ADD.6040304@libero.it>
	<20080923201155.GA17790@34-mo7-2.acn.waw.pl>
	<48D9F3A4.1090402@libero.it>
Message-ID: <20080924081909.GA13001@34-mo7-2.acn.waw.pl>

On Wed, 24 Sep 2008, Maurilio Longo wrote:

Hi Maurilio,

> I've reverted my svn copy to revision 9476, just before your last change, and
> I can run every test in tests\mt without problems (rebuilding hbrun with mt vm).
> So it has to be something related to your last change.

Thank you for testing.
The first thing I have in mind is that you haven't made full harbour
recompilation after this modifications.
Are you sure that you have made _full_ clean build after syncing with SVN?
Current SVN code works for David and your results suggest that not whole code
was recompiled. The modification was in header files so 'clean' is necessary.
Do you have any warnings in clean build?

best regards,
Przemek
From maurilio.longo at libero.it  Wed Sep 24 04:53:32 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Sep 24 04:53:40 2008
Subject: [Harbour] hbrun and mt
In-Reply-To: <20080924081909.GA13001@34-mo7-2.acn.waw.pl>
References: <48D90172.70002@libero.it>	<20080923160357.GB28912@34-mo7-2.acn.waw.pl>	<48D92ADD.6040304@libero.it>	<20080923201155.GA17790@34-mo7-2.acn.waw.pl>	<48D9F3A4.1090402@libero.it>
	<20080924081909.GA13001@34-mo7-2.acn.waw.pl>
Message-ID: <48DA000C.1000506@libero.it>

Przemyslaw Czerpak wrote:
> Thank you for testing.
> The first thing I have in mind is that you haven't made full harbour
> recompilation after this modifications.

make clean
make > log 2>&1

from top of harbour dir.

> Are you sure that you have made _full_ clean build after syncing with SVN?
> Current SVN code works for David and your results suggest that not whole code
> was recompiled. The modification was in header files so 'clean' is necessary.
> Do you have any warnings in clean build?
> 

No, just these ones:

(E:\repository\harbour-svn)type log | grep warn
../../gtstd.c:389: warning: unused variable `TODO'
../../sqlite3/sqlite3.c:13134: warning: comparison between signed and unsigned
../../sqlite3/sqlite3.c:17910: warning: unused parameter `flags'
../../sqlite3/sqlite3.c:18259: warning: unused parameter `id'
../../sqlite3/sqlite3.c:18266: warning: unused parameter `id'
../../sqlite3/sqlite3.c:18464: warning: unused parameter `pVfs'
../../sqlite3/sqlite3.c:18467: warning: unused parameter `syncDir'
../../sqlite3/sqlite3.c:18481: warning: unused parameter `pVfs'
../../sqlite3/sqlite3.c:18516: warning: unused parameter `pVfs'
../../sqlite3/sqlite3.c:18562: warning: unused parameter `pVfs'
../../sqlite3/sqlite3.c:18588: warning: unused parameter `pVfs'
../../sqlite3/sqlite3.c:18601: warning: unused parameter `pVfs'
../../sqlite3/sqlite3.c:18601: warning: unused parameter `nBuf'
../../sqlite3/sqlite3.c:18601: warning: unused parameter `zBufOut'
../../sqlite3/sqlite3.c:18604: warning: unused parameter `pVfs'
../../sqlite3/sqlite3.c:18618: warning: unused parameter `pVfs'
../../sqlite3/sqlite3.c:18635: warning: comparison between signed and unsigned
../../sqlite3/sqlite3.c:18642: warning: comparison between signed and unsigned
../../sqlite3/sqlite3.c:18649: warning: comparison between signed and unsigned
../../sqlite3/sqlite3.c:18658: warning: comparison between signed and unsigned
../../sqlite3/sqlite3.c:18665: warning: comparison between signed and unsigned
../../sqlite3/sqlite3.c:18669: warning: comparison between signed and unsigned
../../sqlite3/sqlite3.c:18673: warning: comparison between signed and unsigned
../../sqlite3/sqlite3.c:18677: warning: comparison between signed and unsigned
../../sqlite3/sqlite3.c:18632: warning: unused parameter `pVfs'
../../sqlite3/sqlite3.c:18694: warning: unused parameter `pVfs'
../../sqlite3/sqlite3.c:18712: warning: unused parameter `pVfs'



Best regards.

Maurilio.

> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Wed Sep 24 06:13:33 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 24 06:13:40 2008
Subject: [Harbour] 2008-09-24 12:12 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91e2e$Blat.v2.6.2$33428a5c$1fdcd40fde8e@127.0.0.1>

2008-09-24 12:12 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * common.mak
  * source/rtl/gtgui/Makefile
  - source/rtl/gtgui/gtdef.c
    - Removed HB_GTGUI_HACK to masquerade GTGUI under a different 
      name and to make Windows users happier. Instead of hacking
      Windows users with GUI programs should simply use 
      this in their code:
      --
      PROCEDURE HB_GTSYS
         REQUEST HB_GT_GUI_DEFAULT
         RETURN
      --
    ; This clears up a few exceptions, make hacks and a few possible 
      confusions.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Wed Sep 24 06:27:08 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 24 06:27:47 2008
Subject: [Harbour] hbrun and mt
In-Reply-To: <48D9F3A4.1090402@libero.it>
References: <48D90172.70002@libero.it>
	<20080923160357.GB28912@34-mo7-2.acn.waw.pl>
	<48D92ADD.6040304@libero.it>
	<20080923201155.GA17790@34-mo7-2.acn.waw.pl>
	<48D9F3A4.1090402@libero.it>
Message-ID: <20080924102708.GA6006@34-mo7-2.acn.waw.pl>

On Wed, 24 Sep 2008, Maurilio Longo wrote:

Hi Maurilio,

> I've reverted my svn copy to revision 9476, just before your last change, and
> I can run every test in tests\mt without problems (rebuilding hbrun with mt vm).
> So it has to be something related to your last change.

I rechecked them again and I do not see anything wrong in this modifications.
In fact there were two modifications related to OS2: TLS buffering and
DTCPV40HDRS macro in default builds. Please try to disable them selectively.
You can disable TLS buffering by commenting the line with:
   #define HB_STACK_PRELOAD
at the beginning of estack.c. If it does not help then do the same
in hvm.c. Finally try to not use DTCPV40HDRS.
I have no more ideas what could be the problem.

best regards and thanks for your help.
Przemek
From harbour.01 at syenar.hu  Wed Sep 24 06:31:47 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 24 06:31:51 2008
Subject: [Harbour] 2008-09-24 12:31 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91e30$Blat.v2.6.2$bf5a7610$1f4c68b02fd6@127.0.0.1>

2008-09-24 12:31 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/vm/vmmt/Makefile
    ! Possible fix for mingw build error:
      make: *** mainstd: No such file or directory.  Stop.
      make[3]: *** [first] Error 2
      make[2]: *** [first] Error 2
    ; Please review.

    ; TOFIX: These DLALLOC warnings are present with MinGW 4.3.2
             In file included from ../../fm.c:127:
             ../../dlmalloc.c:1144: warning: ignoring #pragma warning 
             In file included from ../../fm.c:127:
             ../../dlmalloc.c: In function 'sys_alloc':
             ../../dlmalloc.c:3396: warning: statement with no effect
--
Brgds,
Viktor

From druzus at acn.waw.pl  Wed Sep 24 06:42:47 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 24 06:43:30 2008
Subject: [Harbour] Evc4 error building libs
In-Reply-To: <003e01c91e18$ff08b960$bb001aac@AGSoft.local>
References: <94E6C7CB-0474-4384-8945-47B258E65273@syenar.hu>
	<003e01c91e18$ff08b960$bb001aac@AGSoft.local>
Message-ID: <20080924104247.GA22400@34-mo7-2.acn.waw.pl>

On Wed, 24 Sep 2008, Jos? Luis Capel  wrote:

Hi Jose,

> Using svn from yesterday afternoon I got this error building harbour libs
> for evc4:
> source\rtl\gtclip.c(69) : error C2078: too many initializers
> Attached log file.

Probably MT mode is enabled in WINCE builds. It should be disabled.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Sep 24 06:52:18 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 24 06:52:23 2008
Subject: [Harbour] 2008-09-24 12:47 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91e33$Blat.v2.6.2$9d13c536$1a20b100b25c@127.0.0.1>

2008-09-24 12:47 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * harbour-ce-spec
  * harbour-w32-spec
  * harbour.spec
  * make_xmingwce.sh
    % Some remaining explicit GT defaultings removed. Relying on 
      RTL source code.

  * include/hbsetup.h
    ! Disabled HB_MT_VM for HB_WINCE.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Wed Sep 24 06:53:19 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 24 06:53:58 2008
Subject: [Harbour] Compile error...
In-Reply-To: <48D99A74.8070702@elart.it>
References: <48D99A74.8070702@elart.it>
Message-ID: <20080924105319.GB22400@34-mo7-2.acn.waw.pl>

On Wed, 24 Sep 2008, elart wrote:
> I have a prg was compiling without  any issue, now i get:
> /usr/lib/gcc/i486-linux-gnu/4.3.2/../../../../lib/libgttrm.a(gttrm.o): In 
> function `hb_gt_trm_termOutTrans':
> gttrm.c:(.text+0x5b1): undefined reference to `hb_vmCDP'
> /usr/lib/gcc/i486-linux-gnu/4.3.2/../../../../lib/libgttrm.a(gttrm.o): In 
> function `hb_gt_trm_SetDispCP':
> gttrm.c:(.text+0x4c3e): undefined reference to `hb_cdpID'
> /usr/lib/gcc/i486-linux-gnu/4.3.2/../../../../lib/libgttrm.a(gttrm.o): In 
> function `hb_gt_trm_SetKeyCP':
> gttrm.c:(.text+0x4e1d): undefined reference to `hb_cdpID'
> collect2: ld returned 1 exit status

You have to repeat hbvm lib after gttrm.
If you do not want to repeat libraries then encapsulate
harbour library list inside:
   -Wl,--start-group
and
   -Wl,--end-group

in gcc command or use hb* scripts instead of calling gcc directly.

best regards,
Przemek
From jose.luis at iaicom.com  Wed Sep 24 07:12:24 2008
From: jose.luis at iaicom.com (=?iso-8859-1?Q?Jos=E9_Luis_Capel_?=)
Date: Wed Sep 24 07:09:05 2008
Subject: [Harbour] Evc4 error building libs
In-Reply-To: <20080924104247.GA22400@34-mo7-2.acn.waw.pl>
References: <94E6C7CB-0474-4384-8945-47B258E65273@syenar.hu><003e01c91e18$ff08b960$bb001aac@AGSoft.local>
	<20080924104247.GA22400@34-mo7-2.acn.waw.pl>
Message-ID: <004801c91e36$6c335320$bb001aac@AGSoft.local>

Hi Przemek,
 

JLC>
JLC>Probably MT mode is enabled in WINCE builds. It should be disabled.
JLC>


Is set MT mode by default ?  I didn't setted any specific set for MT mode...

Regards,
Jos? Luis Capel

From mbelgrano at deltain.it  Wed Sep 24 07:29:30 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Sep 24 07:29:40 2008
Subject: R: [Harbour] Evc4 error building libs
In-Reply-To: <004801c91e36$6c335320$bb001aac@AGSoft.local>
References: <94E6C7CB-0474-4384-8945-47B258E65273@syenar.hu><003e01c91e18$ff08b960$bb001aac@AGSoft.local><20080924104247.GA22400@34-mo7-2.acn.waw.pl>
	<004801c91e36$6c335320$bb001aac@AGSoft.local>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFF8@SRV02.deltain.net>

Are you sure that multitread is not aivable on win_ce?
Reading from 
http://alfetta.hpc.net/obj_search.asp?Keywords=beginthreadex
I read

beginthreadex is not available for newer versions of Windows CE (starting 
with 2.11 or 3.0). I'm pretty sure the extra work that had been done by 
beginthreadex is now down by CreateThread. (Note that this is _only_ true 
for Windows CE; the differences between beginthreadex and CreateThread are 
still true for "big" Windows".)

I just used dejanews (now at 
http://groups.google.com/advanced_group_search) to look up
windows ce beginthread
with the search restricted to December 2001, and got 10 hits, including at 
least a few that look very relevant.

>Subject: BeginThread usage vs CreateThread
>From: cchipman@nomadics.com (Carl Chipman)
>Date: Thu, 28 Mar 2002 15:45:25 -0600
>X-Message-Number: 2
>
>This is a multi-part message in MIME format.
>
>------=_NextPart_000_006C_01C1D66F.93D04B60
>Content-Type: text/plain;
> charset="iso-8859-1"
>Content-Transfer-Encoding: 7bit
>
>Is it still recommend under Windows CE 3.0 to use beginthread and
>beginthreadex if we are planning on using C run time functions in a
>thread?
>
>TIA,
>Carl Chipman
>
>Carl Chipman
>Nomadics, Inc.HYPERLINK "mailto:Inc.cchipman@nomadics.com"
>cchipman@nomadics.com
>HYPERLINK "http://www.nomadics.com/"http://www.nomadics.com
>
>---
>Outgoing mail is certified Virus Free.
>Checked by AVG anti-virus system (http://www.grisoft.com).
>Version: 6.0.343 / Virus Database: 190 - Release Date: 3/22/2002
>
>------=_NextPart_000_006C_01C1D66F.93D04B60
>Content-Type: text/html;
> charset="iso-8859-1"
>Content-Transfer-Encoding: quoted-printable
>
>xmlns:w=3D"urn:schemas-microsoft-com:office:word" = 
>xmlns=3D"http://www.w3.org/TR/REC-html40">
>
>Is it still recommend under Windows CE 3.0 to use beginthread and
>beginthreadex if = we are planning on using C run time functions in a thread?
>
>TIA,
>Carl Chipman
>
>
>
>Carl Chipman
>Nomadics, Inc.<3d.htm>
>cchipman@nomadics.com
><3d.htm>http://www.nomadics.com
>
>
>

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Jos? Luis Capel 
Inviato: mercoled? 24 settembre 2008 13.12
A: 'Harbour Project Main Developer List.'
Oggetto: RE: [Harbour] Evc4 error building libs

Hi Przemek,
 

JLC>
JLC>Probably MT mode is enabled in WINCE builds. It should be disabled.
JLC>


Is set MT mode by default ?  I didn't setted any specific set for MT mode...

Regards,
Jos? Luis Capel

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Wed Sep 24 07:31:20 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Sep 24 07:31:28 2008
Subject: R: [Harbour] Evc4 error building libs
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFF8@SRV02.deltain.net>
References: <94E6C7CB-0474-4384-8945-47B258E65273@syenar.hu><003e01c91e18$ff08b960$bb001aac@AGSoft.local><20080924104247.GA22400@34-mo7-2.acn.waw.pl><004801c91e36$6c335320$bb001aac@AGSoft.local>
	<AFB948164110ED43B5EB849E8DEEF03815EFF8@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFF9@SRV02.deltain.net>

Use _beginthreadex. Defined in stdlib.h - only if library (in compiler options)
set to multithread. CreateThread is also possible, but in this way some C RTL
functions (those that need per-thread buffers, e.g. strtok) may work
incorrectly.

Best regards
Fedor 
-----Original Message-----
Subject: _beginthread
From: joconnell@paradigm4.com (John D. O'Connell)
Date: Tue, 05 Jan 1999 13:09:41 -0500
X-Message-Number: 12

Hello All,

Does anybody have any information on _beginthread? Seems to be missing
from WinCE. If this isn't available what are we supposed to do? This
is really getting ponderous!


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Massimo Belgrano
Inviato: mercoled? 24 settembre 2008 13.30
A: Harbour Project Main Developer List.
Oggetto: R: [Harbour] Evc4 error building libs

Are you sure that multitread is not aivable on win_ce?
Reading from 
http://alfetta.hpc.net/obj_search.asp?Keywords=beginthreadex
I read

beginthreadex is not available for newer versions of Windows CE (starting 
with 2.11 or 3.0). I'm pretty sure the extra work that had been done by 
beginthreadex is now down by CreateThread. (Note that this is _only_ true 
for Windows CE; the differences between beginthreadex and CreateThread are 
still true for "big" Windows".)

I just used dejanews (now at 
http://groups.google.com/advanced_group_search) to look up
windows ce beginthread
with the search restricted to December 2001, and got 10 hits, including at 
least a few that look very relevant.

>Subject: BeginThread usage vs CreateThread
>From: cchipman@nomadics.com (Carl Chipman)
>Date: Thu, 28 Mar 2002 15:45:25 -0600
>X-Message-Number: 2
>
>This is a multi-part message in MIME format.
>
>------=_NextPart_000_006C_01C1D66F.93D04B60
>Content-Type: text/plain;
> charset="iso-8859-1"
>Content-Transfer-Encoding: 7bit
>
>Is it still recommend under Windows CE 3.0 to use beginthread and
>beginthreadex if we are planning on using C run time functions in a
>thread?
>
>TIA,
>Carl Chipman
>
>Carl Chipman
>Nomadics, Inc.HYPERLINK "mailto:Inc.cchipman@nomadics.com"
>cchipman@nomadics.com
>HYPERLINK "http://www.nomadics.com/"http://www.nomadics.com
>
>---
>Outgoing mail is certified Virus Free.
>Checked by AVG anti-virus system (http://www.grisoft.com).
>Version: 6.0.343 / Virus Database: 190 - Release Date: 3/22/2002
>
>------=_NextPart_000_006C_01C1D66F.93D04B60
>Content-Type: text/html;
> charset="iso-8859-1"
>Content-Transfer-Encoding: quoted-printable
>
>xmlns:w=3D"urn:schemas-microsoft-com:office:word" = 
>xmlns=3D"http://www.w3.org/TR/REC-html40">
>
>Is it still recommend under Windows CE 3.0 to use beginthread and
>beginthreadex if = we are planning on using C run time functions in a thread?
>
>TIA,
>Carl Chipman
>
>
>
>Carl Chipman
>Nomadics, Inc.<3d.htm>
>cchipman@nomadics.com
><3d.htm>http://www.nomadics.com
>
>
>

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Jos? Luis Capel 
Inviato: mercoled? 24 settembre 2008 13.12
A: 'Harbour Project Main Developer List.'
Oggetto: RE: [Harbour] Evc4 error building libs

Hi Przemek,
 

JLC>
JLC>Probably MT mode is enabled in WINCE builds. It should be disabled.
JLC>


Is set MT mode by default ?  I didn't setted any specific set for MT mode...

Regards,
Jos? Luis Capel

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Wed Sep 24 07:36:08 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Sep 24 07:36:16 2008
Subject: R: [Harbour] Evc4 error building libs
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EFF9@SRV02.deltain.net>
References: <94E6C7CB-0474-4384-8945-47B258E65273@syenar.hu><003e01c91e18$ff08b960$bb001aac@AGSoft.local><20080924104247.GA22400@34-mo7-2.acn.waw.pl><004801c91e36$6c335320$bb001aac@AGSoft.local><AFB948164110ED43B5EB849E8DEEF03815EFF8@SRV02.deltain.net>
	<AFB948164110ED43B5EB849E8DEEF03815EFF9@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EFFA@SRV02.deltain.net>


See the 11 June 2004 contribution by Steve Maillet to thread called 
"creating threads in eMbedded VC++" in 
microsoft.public.windowsce.embedded.vc states explicitly that 
CreateThread has been fixed for Windows CE. A later contribution from 
Marius Prisecaru to the same thread says MFC users need to use 
AfxBeginThread


From dmacias at mail.udg.mx  Wed Sep 24 07:36:31 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Sep 24 07:36:34 2008
Subject: [Harbour] Re: hbrun and mt
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48DA263F.2040202@mail.udg.mx>

Przemek, Maurilio:

[Przemek]
>I'm sorry I forgot about it and I do not remember the exact arguments
>against TCPV40HDRS. I should wait with committing it.
>Now IMHO you should agree it together. I'm not OS2 user and I cannot
>make any decision here.
>If you will need arbiter then please send a message here describing
>problem(s) created by TCPV40HDRS here and the final default setting
>will be group decision.

>If this switch allows to use Harbour binaries on wider range of OS2
>versions then probably it should be default. But I do not remember
>what exact problems it was creating. AFAIR some additional dependences
>to old socket library but I'm not sure.

Yes, it is libraries for TCP/IP

../../../../lib/os2/gcc/hbrtl.a(hbinet.o): Undefined symbol tcp_h_errno
referenced from text segment
make[3]: *** [hbrun.exe] Error 1
make[2]: *** [descend] Error 2


[Maurilio]
>first of all, I'm sorry we're wasting your time with this issue.

>Then, since you added the new envvar, David can build his copy with new
>headers, but the 'default' build, the one that gets distributed should 
>be with the old headers.

>Those old headers make it possible for a program built with them to 
run >on every copy of OS/2 starting from OS/2 Warp 3.0 up until now.
Warp 3.0 >was released in 1992 or 1993 (I don't remember exactly), while
new >headers run only on eCs and some Warp Server, so we are talking of
OS/2 >versions from around 2001-2002 up until now, but with a much lower
>number of copies. I don't think eCS has sold more than a few thousands 
>copies up until now.


I tried to build Harbour with "old" TCPIP in eComStation 1.2MR

ReleaseNotes.os2 doc say:
---------------------------------------
v3.2.2 Alpha 2:
---------------
     A few bugfixes and a couple of new features.

         o The TCP/IP headers and libraries scheme have been changed.
           The default is the current OS/2 tcpip toolkit (BSD 4.4 based).
           To target the older OS/2 tcpip stack (BSD 4.3 based) you must
           define TCPV40HDRS before including any TCP/IP headers and make
           sure usr/lib/tcpipv4 is searched before usr/lib (this is to
           get the right libsocket). It is recommended to use the -D
           compiler option for the define and either the LIBRARY_PATH or
           the -L compiler/linker option for the library.
---------------------------------------

and was explained by Maurilio earlier

So I used:
-------
   Rem set HB_OS2_NEW_TCP=yes
   set L_USR=-Le:\usr\lib\tcpipv4
-------

and Harbour compile/run fine

For hbrun.exe linking result in:
gcc -W -Wall -O2 -o hbrun.exe hbrun.o  -L../../../../lib/os2/gcc
-Le:\usr\lib\tcpipv4   -lhbextern  -lhbdebug  -lhbvm  -lhbrtl  -lhblang
  -lhbcpage  -lhbrdd  -lhbrtl  -lhbvm  -lhbmacro  -lhbpp  -lhbcplr
-lhbcommon  -lhbpcre  -lhbzlib  -lrddntx  -lrddcdx  -lrddfpt  -lhbsix
-lhbhsx  -lhbusrrdd  -lgtcgi  -lgtos2  -lgtpca  -lgtstd -lhbrtl -lsocket

which clear this error:
../../../../lib/os2/gcc/hbrtl.a(hbinet.o): Undefined symbol tcp_h_errno
referenced from text segment
make[3]: *** [hbrun.exe] Error 1
make[2]: *** [descend] Error 2


Due good results, we can leave as default, as it is:
gcc.cf: -DTCPV40HDRS
build, with a note about use of \usr\lib\tcpipv4 :
Rem set HB_OS2_NEW_TCP=yes
set L_USR=-Le:\usr\lib\tcpipv4

but Iam still not agree with name HB_OS2_NEW_TCP
Can you change to name suggested by Maurilio ?
--------------
> We could call it HB_OS2_TCP32 :)
--------------

I rebuilt hbrun with MT and tested problem of Maurilio again:
--------------------------------
[E:\harbour809mt\harbour\tests]e:\harbour809mt\harbour\bin\hbrun_mt.exe
mt\mttest01.prg

Harbour 1.1.0dev (Rev. 9489)
join: .T.
result: Hello World!!! Hello World!!! Hello World!!!
static var type: B
      12345.678
      12346.678
--------------------------------

and checking with ST it fail as well with HB_THREADJOIN

speedtst.prg works fine too


Yesterday I wrote to Maurilio about Harbour for OS/2:
-------------------------------
But since I started doing Harbour releases, there are 403 downloads,
behind Windows, Dos and ahead of MacOS, Ubuntu, Fedora, Mandriva, Suse, ...
-------------------------------

Today are 404 downloads  :-)

That amount of dowloads mean a good interest in Harbour for OS/2 and
justify efforts of Przemek to maintain it clean in OS/2 and efforts of
Maurilio for explanations / hints

Next Harbour for OS/2 will be with "old" TCPIP  :-)
Or should be two versions ?

David Macias


From druzus at acn.waw.pl  Wed Sep 24 07:57:17 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 24 07:57:57 2008
Subject: [Harbour] 2008-09-24 13:57 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080924115717.GA21278@34-mo7-2.acn.waw.pl>

2008-09-24 13:57 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/compiler/cmdcheck.c
    ! fixed starting index in parsed parameters. argv[0] is
      application name with path not user parameter. Parsing
      it was giving unpredictable results if harbour binaries
      were located in path having option delimiters in name

best regards
Przemek
From maurilio.longo at libero.it  Wed Sep 24 08:23:51 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Sep 24 08:23:58 2008
Subject: [Harbour] building with HB_TR_LEVEL_DEBUG
Message-ID: <48DA3157.8080203@libero.it>

Hi,

trying to pinpoint a problem I did try to build hvmmt with

C_USR=-DHB_TR_LEVEL_DEBUG

It fails in multiple files with symbols unknown or redefinition of symbols and
so on.

It this a known issue?

Best regards.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From druzus at acn.waw.pl  Wed Sep 24 08:54:11 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 24 08:54:49 2008
Subject: [Harbour] 2008-09-24 14:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080924125411.GA17874@34-mo7-2.acn.waw.pl>

2008-09-24 14:53 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/dynsym.c
  * harbour/source/vm/arrays.c
  * harbour/source/vm/memvars.c
    ! fixed three typos which broke HB_TR_DEBUG messages

best regards
Przemek
From harbour.01 at syenar.hu  Wed Sep 24 10:07:30 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 24 10:07:42 2008
Subject: [Harbour] 2008-09-24 16:06 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91e4e$Blat.v2.6.2$e24a352a$e4ccc8507c0@127.0.0.1>

2008-09-24 16:06 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * bin/bld.bat
  * bin/bld_os2.cmd
    * HARBOURFLAGS removed as a public envvar to setup Harbour 
      parameters. Use PRG_USR instead.

  * common.mak
    ! Fixed after recent modification.

  * source/compiler/cmdcheck.c
    * Minor formatting.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep 24 10:19:12 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 24 10:19:22 2008
Subject: [Harbour] 2008-09-24 16:18 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91e50$Blat.v2.6.2$849a4bf2$14608ee66114@127.0.0.1>

2008-09-24 16:18 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/vm/fm.c
    + Enabled dlmalloc (HB_FM_DL_ALLOC) for MSVC, BCC and MINGW builds.
    ; It's possible to disable dlmalloc with HB_FM_STD_ALLOC 
      for testing purposes.
--
Brgds,
Viktor

From guy.roussin at teledetection.fr  Wed Sep 24 10:42:26 2008
From: guy.roussin at teledetection.fr (guy.roussin@teledetection.fr)
Date: Wed Sep 24 10:42:34 2008
Subject: [Harbour] Incorrect behavior with hbrun and gtxxx
In-Reply-To: <48C8D331.3030804@teledetection.fr>
References: <48C8D331.3030804@teledetection.fr>
Message-ID: <48DA51D2.7040802@teledetection.fr>

Hello,

I submit this bug sometimes ago, but i get no answer.

I use every day harbour to create small scriptq and it
would be very useful if the option //gtxxx was ok.

Thank you,


Guy

> Hello,
> 
> $ cat t.prg
> #!/usr/bin/hbrun //gtcgi
> proc main
> ? OS(), VERSION(), DATE(), TIME()
> ? HB_GTVERSION(), HB_GTVERSION(1)
> quit
> 
> $ ./t.prg
> Linux 2.6.18-6-amd64 x86_64 Harbour 1.0.1dev Intl. (Rev. 9344) 09/11/08 
> 10:07:35
> TRM Harbour terminal driver
> 
> I think the correct behavior is to use the CGI terminal driver
> because of the first line of the code ?
> 
> See in Changelog :
> 2007-04-11 22:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  ...
>  * harbour/utils/hbrun/hbrun.prg
>    + added support for compilation and direct execution of .prg files
>      Now hbrun can accept as first parameter .hrb or .prg file and if
>      it's .prg file it's compiled and then executed just like .hrb one.
>      In *nixes if you copy compiled hbrun to /usr/bin directory then
>      you can add to your .prg files as first line:
>         #!/usr/bin/hbrun
>      and then after setting executable attribute you can directly
>      execute them, f.e.:
>         ./test.prg
>      If you are using Linux then you can also chose default gt driver
>      by dding to above line: //gt<name>
>      F.e.
>         #!/usr/bin/hbrun //gtstd
> 
> Thank you.
> 
> Guy
>
From rportnoff at spendmap.com  Wed Sep 24 11:13:05 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Wed Sep 24 11:11:42 2008
Subject: [Harbour] Download link on main Harbour page
In-Reply-To: <20080924125411.GA17874@34-mo7-2.acn.waw.pl>
References: <20080924125411.GA17874@34-mo7-2.acn.waw.pl>
Message-ID: <B0083802180@ms1.3peaks.com>

The download link on the main Harbour page reads "1.0.0" but takes 
you to a download area for v1.0.1


From druzus at acn.waw.pl  Wed Sep 24 11:40:57 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 24 11:41:37 2008
Subject: [Harbour] Incorrect behavior with hbrun and gtxxx
In-Reply-To: <48DA51D2.7040802@teledetection.fr>
References: <48C8D331.3030804@teledetection.fr>
	<48DA51D2.7040802@teledetection.fr>
Message-ID: <20080924154057.GA29256@34-mo7-2.acn.waw.pl>

On Wed, 24 Sep 2008, guy.roussin@teledetection.fr wrote:

Hi Guy,

> I submit this bug sometimes ago, but i get no answer.
> I use every day harbour to create small scriptq and it
> would be very useful if the option //gtxxx was ok.

Relink it with shared library and you will have all GTs included
in harbour.so available or if you need static binaries then use
-gt* switch for the ones you need, .f.e:
   hbmk -n -w -es2 -gtstd -gtcgi -gttrm -gtxwc -fullstatic hbrun
by default in *nixes only GTTRM and GTNUL are included.
I think that we can add some "light" GTs like GTSTD and GTCGI
which odes not need any external libraries to default static hbrun
builds.
Viktor?

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Sep 24 11:48:53 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 24 11:49:06 2008
Subject: [Harbour] Incorrect behavior with hbrun and gtxxx
In-Reply-To: <20080924154057.GA29256@34-mo7-2.acn.waw.pl>
References: <48C8D331.3030804@teledetection.fr>
	<48DA51D2.7040802@teledetection.fr>
	<20080924154057.GA29256@34-mo7-2.acn.waw.pl>
Message-ID: <295FD505-4A1D-4BF5-8E49-4DBC248C9897@syenar.hu>

>> I submit this bug sometimes ago, but i get no answer.
>> I use every day harbour to create small scriptq and it
>> would be very useful if the option //gtxxx was ok.
>
> Relink it with shared library and you will have all GTs included
> in harbour.so available or if you need static binaries then use
> -gt* switch for the ones you need, .f.e:
>   hbmk -n -w -es2 -gtstd -gtcgi -gttrm -gtxwc -fullstatic hbrun
> by default in *nixes only GTTRM and GTNUL are included.
> I think that we can add some "light" GTs like GTSTD and GTCGI
> which odes not need any external libraries to default static hbrun
> builds.
> Viktor?

Sure thing, good idea.

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep 24 11:59:36 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 24 11:59:45 2008
Subject: [Harbour] 2008-09-24 17:58 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91e5e$Blat.v2.6.2$8b0e5f06$f48c1e05d32@127.0.0.1>

2008-09-24 17:58 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbrun/hbrun.prg
    + Added REQUESTs for GTSTD, GTCGI, GTPCA (these GTs are 
      available on all platforms).
    % Removed explicit GT defaulting logic (now identical to 
      the one in RTL).
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep 24 12:18:19 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 24 12:18:24 2008
Subject: [Harbour] 2008-09-24 18:17 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91e61$Blat.v2.6.2$2846cf40$1984b17eb080@127.0.0.1>

2008-09-24 18:17 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbdoc/hbdoc.prg
  * utils/hbmake/hbmake.prg
  * utils/hbrun/hbrun.prg
    % One function made STATIC.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Wed Sep 24 12:27:52 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 24 12:28:30 2008
Subject: [Harbour] 2008-09-24 18:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080924162752.GA7900@34-mo7-2.acn.waw.pl>

2008-09-24 18:27 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/hb-func.sh
    * reverted modification for import attributes - this will be changed
      in the future to function calls

best regards
Przemek
From maurilio.longo at libero.it  Wed Sep 24 13:02:45 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Sep 24 13:02:53 2008
Subject: [Harbour] hbrun and mt
In-Reply-To: <20080924102708.GA6006@34-mo7-2.acn.waw.pl>
References: <48D90172.70002@libero.it>	<20080923160357.GB28912@34-mo7-2.acn.waw.pl>	<48D92ADD.6040304@libero.it>	<20080923201155.GA17790@34-mo7-2.acn.waw.pl>	<48D9F3A4.1090402@libero.it>
	<20080924102708.GA6006@34-mo7-2.acn.waw.pl>
Message-ID: <48DA72B5.1070105@libero.it>

Przemyslaw,

I'm not completely sure I do understand the way the pre-loading of the stack
gets done, but I think it ends up in creating a variable in every C function
which needs access to the stack.

Now,

int f()
{
  HB_STACK_TLS_PRELOAD
}

becomes (more or less)

int f()
{
  PULONG hb_stack_ptr = hb_tls_get( hb_stack_key );
}

where hb_stack_key is an index in win32 but the real memory address in OS/2.

So, when in win32 you call TlsGetValue( hb_stack_key ) you ask for the content
of that slot of memory, but when you call DosAllocThreadLocalMemory( 1, &k ),
1 means you need a single DWORD, &k will contain the address of that DWORD
which is local to your thread.

So, when every function calls hb_tls_get() in OS/2, you simply get back what
you passed to it, which is not the original pointer you got with
DosAllocThreadLocalMemory() since the first call did not save it somewhere.

Maybe I'm just confused by too many macros and I'm simply missing the real way
 in which this should work, but after a few hours looking at this problem I
cannot understand what is not working.

Can you please confirm what I've said or explain to me how pre-loading is
intended to work?

Maurilio.


Przemyslaw Czerpak wrote:
> I rechecked them again and I do not see anything wrong in this modifications.
> In fact there were two modifications related to OS2: TLS buffering and
> DTCPV40HDRS macro in default builds. Please try to disable them selectively.
> You can disable TLS buffering by commenting the line with:
>    #define HB_STACK_PRELOAD
> at the beginning of estack.c. If it does not help then do the same
> in hvm.c. Finally try to not use DTCPV40HDRS.
> I have no more ideas what could be the problem.
> 
> best regards and thanks for your help.
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From druzus at acn.waw.pl  Wed Sep 24 13:23:04 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 24 13:23:43 2008
Subject: [Harbour] Re: 2008-09-19 22:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48D9772F.6090502@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48D9772F.6090502@mail.udg.mx>
Message-ID: <20080924172303.GA4674@34-mo7-2.acn.waw.pl>

On Tue, 23 Sep 2008, David Arturo Macias Corona wrote:

Hi David,

> Please fix this. I fixed it locally:
>   config/os2/gcc.cf:24: *** missing separator.  Stop.

Viktor already did it.

> Current Harbour compile/run fine
> I use newest
>   set HB_OS2_NEW_TCP=yes
> but not agree with name   :-)
> When it is "New TCP" ? three years ago, now, two years ahead, ... ?

OK, I'll change it. I'm only waiting for Maurilio results.
Maybe he can locate the problem he has with OS2 MT builds.

> I renamed original hbrun.exe as hbrun_st.exe and created new hbrun_mt.exe 
> with hbvmmt.a
> 23/09/08  4:55p     2,711,279    124 a---  hbrun_st.exe
> 23/09/08  5:16p     2,729,903    124 a---  hbrun_mt.exe
> Using same execution as Maurilio with MT:
> "(E:\repository\harbour-svn\tests)\harbour\bin\hbrun mt\mttest01.prg"
> --------------------
[...]
> Everything worked fine here with current Harbour (9483, fresh build) and 
> eComStation 1.2MR with set HB_OS2_NEW_TCP=yes ( without -DTCPV40HDRS )

Thank you very much for your tests.
Maurilio I will have to wait for your results. Maybe you can reduce
the problem as I suggested or catch it in the debugger or tracelog
messages. BTW tracelog is not MT safe though for such test it should
not be a problem.

> I include tests with:
> speedtst.prg compiled with MT
> -----------------------------
>   total application time:                              51.98
>   total real time:                                     51.98
> speedtst.prg executed with hbrun_mt.exe
> ---------------------------------------
[...]
> Recent was:
> ST
>     total application time:                              47.13
>     total real time:                                     47.14
> MT
>     total application time:                              55.08
>     total real time:                                     55.08
>
> So MT continue falling near ST  :-)
> I know that "mileage may vary" due to concurrent tasks

And this is probably the smallest MT overhead 10-15% we can
reach. I've got similar results in my Linux box. Now cost of
TLS access is minor and the overhead is caused by different
methods of hb_stack accessing. When we use the pointer then
we have one additional memory access to calculate the address
of stack item. When it's static variable accessed by address
then compiler can use direct addressing without reading stack
pointer from memory. The stack operations are critical for speed
of HVM when pure PCODE is evaluated and here even small differences
are noticeable.

BTW I'm still surprised with the method of implementing TLS access
in OS2. It looks that at least one memory page at the same address
is individually mapped to each thread. It's interesting solution
but it forces memory descriptors refreshing when context is switched
even if it's still the same process so probably it's not possible to
make it in user space with only some small support from OS. It's
rather like process switching though maybe on current machines the
overhead caused by memory descriptors reloading is very small so
it's not such important. Anyhow for programmer and C compilers it's
really nice solution which makes only very small performance reduction
for single thread context.

If you want then you can also try to use -O3 instead of -O2 GCC
optimization flag. It enables some additional optimizations like
automatic normal function inlining. Probably it will give some
additional 2-5% of speed improvement in ST and MT mode.

> My expects are not exactly for multi-CPU, but for comparing two generations 
> of processors
> In previous tests with highly extensive calculations program, the core2duo 
> 2.0 terminate in half of time against a PentiumIV 3.3 Mhz HT
> Same Windows XP
> I made that program around 15 years ago. Is a computer simulation of an 
> polymer extruder involving numerical methods and finite differences in 3-D 
> grids calculating velocity, pressure, temperature, ... profiles
> It that time a run used near 2 hours (486/DX ?), now core2duo made it in 3 
> minutes
> Program are still in 16 bits with Clipper 5.3 (latest compiled in 1997)
> Perhaps later I will try with (x)Harbour, it will be a good test  :-)

It will be relay interesting to compare them. Anyhow such simulation can
be very often divided into parallel task and here MT mode can give nice
speed improvement.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Sep 24 13:57:44 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 24 13:58:23 2008
Subject: [Harbour] hbrun and mt
In-Reply-To: <48DA72B5.1070105@libero.it>
References: <48D90172.70002@libero.it>
	<20080923160357.GB28912@34-mo7-2.acn.waw.pl>
	<48D92ADD.6040304@libero.it>
	<20080923201155.GA17790@34-mo7-2.acn.waw.pl>
	<48D9F3A4.1090402@libero.it>
	<20080924102708.GA6006@34-mo7-2.acn.waw.pl>
	<48DA72B5.1070105@libero.it>
Message-ID: <20080924175744.GA24591@34-mo7-2.acn.waw.pl>

On Wed, 24 Sep 2008, Maurilio Longo wrote:

Hi Maurilio,

> I'm not completely sure I do understand the way the pre-loading of the stack
> gets done, but I think it ends up in creating a variable in every C function
> which needs access to the stack.

Exactly.

> Now,
> int f()
> {
>   HB_STACK_TLS_PRELOAD
> }
> becomes (more or less)
> int f()
> {
>   PULONG hb_stack_ptr = hb_tls_get( hb_stack_key );
> }
> where hb_stack_key is an index in win32 but the real memory address in OS/2.
> So, when in win32 you call TlsGetValue( hb_stack_key ) you ask for the content
> of that slot of memory, but when you call DosAllocThreadLocalMemory( 1, &k ),
> 1 means you need a single DWORD, &k will contain the address of that DWORD
> which is local to your thread.

Yes it is. Read my message to David. It will not give noticeable speed
difference in OS2 because it only safes one memory access. Just like
in my Linux box where I can use C compiler TLS support.

> So, when every function calls hb_tls_get() in OS/2, you simply get back what
> you passed to it,

Exactly.

> which is not the original pointer you got with
> DosAllocThreadLocalMemory() since the first call did not save it somewhere.

No, it saved it. It's done in hb_stackInit() which should be the first
function whichop operates on allocated TLM. Then it's safe to call
HB_STACK_TLS_PRELOAD.
But I think you just help me to find the reason of problem.

> Maybe I'm just confused by too many macros and I'm simply missing the real way
>  in which this should work, but after a few hours looking at this problem I
> cannot understand what is not working.
> Can you please confirm what I've said or explain to me how pre-loading is
> intended to work?

I think that the problem is caused by hb_xgrab(). You probably uses memory
statistics enabled in your Harbour builds and David disabled them and
this is the reason why it works for him but not for you. I think that
if you recompile Harbour with -DHB_FM_STATISTICS_OFF then it will work
Just simply I made a typo in hb_stackBaseProcInfo() which is called by
memory statistic module from hb_xgrab() which is used before HVM starts
to register .prg modules. HB_STACK_TLS_PRELOAD should be used _after_
hb_stack_ready() in this function. I'll commit fix in a while.
Thank you very much for your help.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Sep 24 14:30:31 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 24 14:31:09 2008
Subject: [Harbour] 2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080924183031.GA4901@34-mo7-2.acn.waw.pl>

2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/estack.c
    ! fixed stack preloading - it should be after checking if stack
      exist :)

best regards
Przemek
From niki at synel.co.il  Wed Sep 24 15:18:24 2008
From: niki at synel.co.il (Chen Kedem)
Date: Wed Sep 24 15:19:10 2008
Subject: [Harbour] Feature Request SF#2122754: Trigger on variable change
Message-ID: <1A07FEDC778C3E4AA417F089511F859C03268A6A3F@Mail-yoq.SYNEL-COMPANY.LTD>

This submitted to the Harbour SF as feature request (I just forward it as is)
https://sourceforge.net/tracker/index.php?func=detail&aid=2122754&group_id=681&atid=350681

---------------------------------------------
is it possible for you to implement a "data trigger" (for vars, fields,
object and so on) defining a code block called when the object changes his
value...
example of code
function main()
local nvar as numeric
nvar := 1
//
// set trigger (for example)
//
_set_trigger("nvar",{|cName,Value| qout(cName+" new value:"+str(Value)}
// trigger is called immediately after nvar value change
nvar++
return NIL

result:
NVAR new value: 2
---------------------------------------------


  Chen.
From druzus at acn.waw.pl  Wed Sep 24 15:48:33 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 24 15:49:12 2008
Subject: [Harbour] Feature Request SF#2122754: Trigger on variable change
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C03268A6A3F@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C03268A6A3F@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <20080924194833.GC22400@34-mo7-2.acn.waw.pl>

On Wed, 24 Sep 2008, Chen Kedem wrote:
> is it possible for you to implement a "data trigger" (for vars, fields,
> object and so on) defining a code block called when the object changes his
> value...
> example of code
> function main()
> local nvar as numeric
> nvar := 1
> //
> // set trigger (for example)
> //
> _set_trigger("nvar",{|cName,Value| qout(cName+" new value:"+str(Value)}
> // trigger is called immediately after nvar value change
> nvar++
> return NIL
> result:
> NVAR new value: 2

For simple vars there is no such functionality at .prg level though
it's be quite easy to implement it in C using existing functionality.
We even already use such mechanism in few places, f.e. for thread local
static variables or SETGET object method references. I do not find it
enough usable to create public .prg interface for it but it's possible
and if more people will request for it and group agree I can implement
it.
For DBFs it's possible to set triggers executed on each fields access/
assign using SIX3 interface.

best regards,
Przemek
From niki at synel.co.il  Wed Sep 24 16:08:59 2008
From: niki at synel.co.il (Chen Kedem)
Date: Wed Sep 24 16:09:46 2008
Subject: [Harbour] RE: Feature Request SF#2122754: Trigger on variable change
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C03268A6A3F@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C03268A6A3F@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <1A07FEDC778C3E4AA417F089511F859C03268A6A41@Mail-yoq.SYNEL-COMPANY.LTD>

Przemek,

> I do not find it enough usable to create public .prg interface for it

For non-DB variable this looks like a debugging option
(like trigger a breakpoint when a variable value changed),
can't see other application for it which can't be done using normal coding
(again, it was not my request I had just forward it to the list).

  Chen.
From lorenzo.fiorini at gmail.com  Wed Sep 24 16:21:09 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Sep 24 16:21:15 2008
Subject: [Harbour] Results for mingw32
Message-ID: <9257026e0809241321v5c38f53fi628ff95ca46cb196@mail.gmail.com>

msys/mingw 3.4.5 ( current )

ST total real time:                                     17.55
MT total real time:                                     26.53

mt tests are working ok.

I only get this warnings:

In file included from fm.c:136:
dlmalloc.c:1144: warning: ignoring #pragma warning
dlmalloc.c: In function `malloc':
dlmalloc.c:3396: warning: statement with no effect
In file included from ../fm.c:136:
../dlmalloc.c:1144: warning: ignoring #pragma warning
../dlmalloc.c: In function `malloc':
../dlmalloc.c:3396: warning: statement with no effect

best regards,
Lorenzo

09/24/08 22:04:37 Harbour 1.1.0dev (Rev. 9500), Windows 2000 5.0.2195
Service Pack 4
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.03
CPU usage -> secondsCPU()

c:=L_C ->                                             0.06
n:=L_N ->                                             0.04
d:=L_D ->                                             0.04
c:=M_C ->                                             0.08
n:=M_N ->                                             0.04
d:=M_D ->                                             0.05
(sh) c:=F_C ->                                        0.13
(sh) n:=F_N ->                                        0.16
(sh) d:=F_D ->                                        0.09
(ex) c:=F_C ->                                        0.13
(ex) n:=F_N ->                                        0.17
(ex) d:=F_D ->                                        0.09
n:=o:GenCode ->                                       0.14
n:=o[8] ->                                            0.09
round(i/1000,2) ->                                    0.30
str(i/1000) ->                                        1.08
val(a3[i%ARR_LEN+1]) ->                               0.35
dtos(j+i%10000-5000) ->                               0.39
eval({||i%ARR_LEN}) ->                                0.19
eval({|x|x%ARR_LEN},i) ->                             0.22
eval({|x|f1(x)},i) ->                                 0.25
&('f1('+str(i)+')') ->                                2.45
eval([&('{|x|f1(x)}')]) ->                            0.26
j := valtype(a)+valtype(i) ->                         0.35
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                1.02
j := val(a2[i%ARR_LEN+1]) ->                          0.41
j := a2[i%ARR_LEN+1] == s ->                          0.23
j := a2[i%ARR_LEN+1] = s ->                           0.29
j := a2[i%ARR_LEN+1] >= s ->                          0.30
j := a2[i%ARR_LEN+1] < s ->                           0.27
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         0.81
f0() ->                                               0.09
f1(i) ->                                              0.13
f2(c[8]) ->                                           0.11
f2(c[40000]) ->                                       0.11
f2(@c[40000]) ->                                      0.10
f2(c[40000]); c2:=c ->                                0.14
f2(@c[40000]); c2:=c ->                               0.14
f3(a,a2,c,i,j,t,bc) ->                                0.31
f2(a2) ->                                             0.12
s:=f4() ->                                            0.65
s:=f5() ->                                            0.22
ascan(a,i%ARR_LEN) ->                                 0.30
ascan(a2,c+chr(i%64+64)) ->                           0.99
ascan(a,{|x|x==i%ARR_LEN}) ->                         2.29
============================================================
total application time:                              17.56
total real time:                                     17.55

09/24/08 22:03:29 Harbour 1.1.0dev (Rev. 9500) (MT), Windows 2000
5.0.2195 Service Pack 4
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.07
CPU usage -> secondsCPU()

c:=L_C ->                                             0.08
n:=L_N ->                                             0.04
d:=L_D ->                                             0.04
c:=M_C ->                                             0.09
n:=M_N ->                                             0.05
d:=M_D ->                                             0.05
(sh) c:=F_C ->                                        0.16
(sh) n:=F_N ->                                        0.16
(sh) d:=F_D ->                                        0.10
(ex) c:=F_C ->                                        0.16
(ex) n:=F_N ->                                        0.16
(ex) d:=F_D ->                                        0.10
n:=o:GenCode ->                                       0.21
n:=o[8] ->                                            0.15
round(i/1000,2) ->                                    0.38
str(i/1000) ->                                        1.17
val(a3[i%ARR_LEN+1]) ->                               0.49
dtos(j+i%10000-5000) ->                               0.47
eval({||i%ARR_LEN}) ->                                0.34
eval({|x|x%ARR_LEN},i) ->                             0.36
eval({|x|f1(x)},i) ->                                 0.48
&('f1('+str(i)+')') ->                                3.00
eval([&('{|x|f1(x)}')]) ->                            0.53
j := valtype(a)+valtype(i) ->                         0.52
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                1.20
j := val(a2[i%ARR_LEN+1]) ->                          0.54
j := a2[i%ARR_LEN+1] == s ->                          0.35
j := a2[i%ARR_LEN+1] = s ->                           0.40
j := a2[i%ARR_LEN+1] >= s ->                          0.40
j := a2[i%ARR_LEN+1] < s ->                           0.39
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         1.29
f0() ->                                               0.20
f1(i) ->                                              0.25
f2(c[8]) ->                                           0.24
f2(c[40000]) ->                                       0.23
f2(@c[40000]) ->                                      0.21
f2(c[40000]); c2:=c ->                                0.36
f2(@c[40000]); c2:=c ->                               0.30
f3(a,a2,c,i,j,t,bc) ->                                0.55
f2(a2) ->                                             0.24
s:=f4() ->                                            0.82
s:=f5() ->                                            0.39
ascan(a,i%ARR_LEN) ->                                 0.42
ascan(a2,c+chr(i%64+64)) ->                           1.38
ascan(a,{|x|x==i%ARR_LEN}) ->                         3.90
============================================================
total application time:                              26.53
total real time:                                     26.53
From harbour.01 at syenar.hu  Wed Sep 24 18:23:03 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Sep 24 18:23:10 2008
Subject: [Harbour] 2008-09-25 00:22 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91e94$Blat.v2.6.2$1c8eba5e$15c0cff6380c@127.0.0.1>

2008-09-25 00:22 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
  * make_gcc.mak
  * make_vc.mak
  * harbour.spec
  * source/rtl/hbgtcore.c
  * source/rtl/Makefile
  * source/rtl/gtsys.c
  * config/w32/poccce.cf
  * config/w32/xcc.cf
  * config/w32/pocc.cf
    % Removed HB_GT_DEFAULT envvar, which was the exact synonym 
      of HB_GT_LIB. Please use HB_GT_LIB instead, if you - by any 
      chance - want to change the default GT at Harbour build-time.

  * tests/speedtst.prg
    ! Fixed to delete temp .dbf files before exiting.
--
Brgds,
Viktor

From maurilio.longo at libero.it  Thu Sep 25 03:15:37 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Sep 25 03:15:46 2008
Subject: [Harbour] hbrun and mt
In-Reply-To: <20080924175744.GA24591@34-mo7-2.acn.waw.pl>
References: <48D90172.70002@libero.it>	<20080923160357.GB28912@34-mo7-2.acn.waw.pl>	<48D92ADD.6040304@libero.it>	<20080923201155.GA17790@34-mo7-2.acn.waw.pl>	<48D9F3A4.1090402@libero.it>	<20080924102708.GA6006@34-mo7-2.acn.waw.pl>	<48DA72B5.1070105@libero.it>
	<20080924175744.GA24591@34-mo7-2.acn.waw.pl>
Message-ID: <48DB3A99.7000706@libero.it>

Przemyslaw,

yes! with fm statistics off it works wonderfully :)

Thanks so much.

Maurilio.

Przemyslaw Czerpak wrote:
> On Wed, 24 Sep 2008, Maurilio Longo wrote:
> 
> Hi Maurilio,
> 
>> I'm not completely sure I do understand the way the pre-loading of the stack
>> gets done, but I think it ends up in creating a variable in every C function
>> which needs access to the stack.
> 
> Exactly.
> 
>> Now,
>> int f()
>> {
>>   HB_STACK_TLS_PRELOAD
>> }
>> becomes (more or less)
>> int f()
>> {
>>   PULONG hb_stack_ptr = hb_tls_get( hb_stack_key );
>> }
>> where hb_stack_key is an index in win32 but the real memory address in OS/2.
>> So, when in win32 you call TlsGetValue( hb_stack_key ) you ask for the content
>> of that slot of memory, but when you call DosAllocThreadLocalMemory( 1, &k ),
>> 1 means you need a single DWORD, &k will contain the address of that DWORD
>> which is local to your thread.
> 
> Yes it is. Read my message to David. It will not give noticeable speed
> difference in OS2 because it only safes one memory access. Just like
> in my Linux box where I can use C compiler TLS support.
> 
>> So, when every function calls hb_tls_get() in OS/2, you simply get back what
>> you passed to it,
> 
> Exactly.
> 
>> which is not the original pointer you got with
>> DosAllocThreadLocalMemory() since the first call did not save it somewhere.
> 
> No, it saved it. It's done in hb_stackInit() which should be the first
> function whichop operates on allocated TLM. Then it's safe to call
> HB_STACK_TLS_PRELOAD.
> But I think you just help me to find the reason of problem.
> 
>> Maybe I'm just confused by too many macros and I'm simply missing the real way
>>  in which this should work, but after a few hours looking at this problem I
>> cannot understand what is not working.
>> Can you please confirm what I've said or explain to me how pre-loading is
>> intended to work?
> 
> I think that the problem is caused by hb_xgrab(). You probably uses memory
> statistics enabled in your Harbour builds and David disabled them and
> this is the reason why it works for him but not for you. I think that
> if you recompile Harbour with -DHB_FM_STATISTICS_OFF then it will work
> Just simply I made a typo in hb_stackBaseProcInfo() which is called by
> memory statistic module from hb_xgrab() which is used before HVM starts
> to register .prg modules. HB_STACK_TLS_PRELOAD should be used _after_
> hb_stack_ready() in this function. I'll commit fix in a while.
> Thank you very much for your help.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From guy.roussin at teledetection.fr  Thu Sep 25 03:42:24 2008
From: guy.roussin at teledetection.fr (guy.roussin@teledetection.fr)
Date: Thu Sep 25 03:42:32 2008
Subject: [Harbour] 2008-09-24 18:17 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c91e61$Blat.v2.6.2$2846cf40$1984b17eb080@127.0.0.1>
References: <01c91e61$Blat.v2.6.2$2846cf40$1984b17eb080@127.0.0.1>
Message-ID: <48DB40E0.9070300@teledetection.fr>

Szak?ts Viktor a ?crit :
> 2008-09-24 18:17 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * utils/hbdoc/hbdoc.prg
>   * utils/hbmake/hbmake.prg
>   * utils/hbrun/hbrun.prg
>     % One function made STATIC.

Thank you Viktor & Przemek.
Can we get this for 1.0.2 ?

Guy
From druzus at acn.waw.pl  Thu Sep 25 03:57:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 03:58:28 2008
Subject: [Harbour] hbrun and mt
In-Reply-To: <48DB3A99.7000706@libero.it>
References: <48D90172.70002@libero.it>
	<20080923160357.GB28912@34-mo7-2.acn.waw.pl>
	<48D92ADD.6040304@libero.it>
	<20080923201155.GA17790@34-mo7-2.acn.waw.pl>
	<48D9F3A4.1090402@libero.it>
	<20080924102708.GA6006@34-mo7-2.acn.waw.pl>
	<48DA72B5.1070105@libero.it>
	<20080924175744.GA24591@34-mo7-2.acn.waw.pl>
	<48DB3A99.7000706@libero.it>
Message-ID: <20080925075751.GA31961@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, Maurilio Longo wrote:

Hi Maurilio,

> yes! with fm statistics off it works wonderfully :)

Thank you for confirmation. Now it should work also with memory
statistic enabled.
When we will make some other test then I'll disable stack preloading
for this systems and C compilers when it does not give any valuable
speed improvement.

best regards,
Przemek
From miguelangel at marchuet.net  Thu Sep 25 04:22:00 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Thu Sep 25 04:21:08 2008
Subject: [Harbour] Feature Request SF#2122754: Trigger on variable change
In-Reply-To: <20080924194833.GC22400@34-mo7-2.acn.waw.pl>
References: <1A07FEDC778C3E4AA417F089511F859C03268A6A3F@Mail-yoq.SYNEL-COMPANY.LTD>
	<20080924194833.GC22400@34-mo7-2.acn.waw.pl>
Message-ID: <48DB4A28.3050906@marchuet.net>

It can be very useful, we need to do it manually :(
in our ERP need to spread some values on changing variables, and
the tree some times is very long and easy to break, we now are using
codeblocks that are evaluated overloading assign operator.

Is an important feature to ERP developers.

Trigger can be better solution, because only one variable is overloaded.

Best regards,
Miguel Angel Marchuet

Przemyslaw Czerpak escribi?:
> On Wed, 24 Sep 2008, Chen Kedem wrote:
>> is it possible for you to implement a "data trigger" (for vars, fields,
>> object and so on) defining a code block called when the object changes his
>> value...
>> example of code
>> function main()
>> local nvar as numeric
>> nvar := 1
>> //
>> // set trigger (for example)
>> //
>> _set_trigger("nvar",{|cName,Value| qout(cName+" new value:"+str(Value)}
>> // trigger is called immediately after nvar value change
>> nvar++
>> return NIL
>> result:
>> NVAR new value: 2
> 
> For simple vars there is no such functionality at .prg level though
> it's be quite easy to implement it in C using existing functionality.
> We even already use such mechanism in few places, f.e. for thread local
> static variables or SETGET object method references. I do not find it
> enough usable to create public .prg interface for it but it's possible
> and if more people will request for it and group agree I can implement
> it.
> For DBFs it's possible to set triggers executed on each fields access/
> assign using SIX3 interface.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> __________ Informaci?n de ESET NOD32 Antivirus, versi?n de la base de firmas de virus 3469 (20080924) __________
> 
> ESET NOD32 Antivirus ha comprobado este mensaje.
> http://www.eset.com
> 
> 
> 

From dmacias at mail.udg.mx  Thu Sep 25 04:44:36 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Sep 25 04:44:39 2008
Subject: [Harbour] Re: hbrun and mt
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48DB4F74.6000003@mail.udg.mx>

Przemek, Maurilio:

[Maurilio]
>> yes! with fm statistics off it works wonderfully :)

[Przemek]
>Thank you for confirmation. Now it should work also with memory
>statistic enabled.
>When we will make some other test then I'll disable stack preloading
>for this systems and C compilers when it does not give any valuable
>speed improvement.

I made a fresh build without -DHB_FM_STATISTICS_OFF
--------------------------
set HB_ARCHITECTURE=os2
set HB_COMPILER=gcc
set HB_GT_LIB=

rem set PRG_USR=
rem set C_USR=
Rem  set C_USR=-DHB_LONG_LONG_OFF
Rem set C_USR=-DHB_FM_STATISTICS_OFF -DHB_FM_DL_ALLOC
Rem set C_USR=-DHB_FM_STATISTICS_OFF

set L_USR=-Le:\usr\lib\tcpipv4

rem set C_USR=-DTCPV40HDRS %C_USR%

Rem set HB_OS2_NEW_TCP=yes
--------------------------

and Harbour build/run fine

Creating / running hbrun_mt.exe with mttest01.prg:

-----------------------------
[E:\harbour809mt\harbour\tests]e:\harbour809mt\harbour\bin\hbrun_mt.exe
mt\mttest01.prg

Harbour 1.1.0dev (Rev. 9501)
join: .T.
result: Hello World!!! Hello World!!! Hello World!!!
static var type: B
      12345.678
      12346.678
-----------------------------

It does not raise error reported by Maurilio:
----------------------------
>> I did the change to the makefile, I get an immediate SIGSEGV simply
>>starting hbrun.
>> (E:\repository\harbour-svn\tests)\harbour\bin\hbrun mt\mttest01.prg
>> Killed by SIGSEGV
----------------------------

so real problem with Maurilio build remain unknown, but is affected by
HB_FM_STATISTICS_OFF

David Macias


From harbour.01 at syenar.hu  Thu Sep 25 04:51:15 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 04:51:24 2008
Subject: [Harbour] Feature Request SF#2122754: Trigger on variable change
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C03268A6A3F@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C03268A6A3F@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <17D8CF93-84F6-496D-B763-42555BE6D44D@syenar.hu>

Hi all,

For simple variables I find this an odd feature,
might be even dangerous and may also affect
performance. Not to mention how many odd cases
it may generate (think of recursion if the trigger
block modifies the triggering variable, variables
referencing other variables, and handling arrays
- even embedded ones, let alone objects).

Also, for variables a very easy and proper alternate
solution is to use simple set/get methods/functions,
and hiding the variable as hidden object var or simple
static var.

For fields it might be useful though, but as Przemek
says, we already have it.

Brgds,
Viktor

On 2008.09.24., at 21:18, Chen Kedem wrote:

> This submitted to the Harbour SF as feature request (I just forward  
> it as is)
> https://sourceforge.net/tracker/index.php?func=detail&aid=2122754&group_id=681&atid=350681
>
> ---------------------------------------------
> is it possible for you to implement a "data trigger" (for vars,  
> fields,
> object and so on) defining a code block called when the object  
> changes his
> value...
> example of code
> function main()
> local nvar as numeric
> nvar := 1
> //
> // set trigger (for example)
> //
> _set_trigger("nvar",{|cName,Value| qout(cName+" new  
> value:"+str(Value)}
> // trigger is called immediately after nvar value change
> nvar++
> return NIL
>
> result:
> NVAR new value: 2
> ---------------------------------------------
>
>
>  Chen.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Thu Sep 25 05:25:56 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 05:26:34 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
Message-ID: <20080925092556.GA7193@34-mo7-2.acn.waw.pl>

On Wed, 24 Sep 2008, Szak?ts Viktor wrote:

Hi all,

> I've built mingw with -DHB_USE_TLS (the rest is default),
> then I got 'undefined reference to '__emutls_get_address'
> errors on linking. Such symbol doesn't BTW exist in MinGW
> 4.3.2 supplied libs.

AFAIR the work on TLS support for MinGW started at the begining of
summer so probably you should look at newest MinGW versions (probably
devel ones if you want to use it).

> Here are some Windows compiler comparison results
> (speedtst / Total application time)
> =================================================
> 1.1.0 (r9488)
> - -DHB_NO_DEBUG [ -DHB_NO_TRACE is default ] -DHB_FM_STATISTICS_OFF 
> -DHB_FM_DL_ALLOC
> - Harbour: -l -gc3 [I didn't mean to test with -gc3, but I had it there for 
> production, and forgot about it]

It may has some indirect impact on CPU cache efficiency. Not big but
noticeable in tests.

> - MSVS switches: (all default C mode)
> - GCC switches: -O3 -fomit-frame-pointer -ffast-math -march=pentiumpro
> - BCC switches: -6 -OS -Ov -Oi -Oc -Q -tWM

-ffast-math in some cases increases the differences in FL arithmetic
so not all people like it.
I also suggest to check -march=pentiumpro. This CPU has extremely slow
16bit registers and it's possible that MinGW will try to make some
workarounds for it but I do not know if it really does it. Anyhow
I rather suggest to chose something more closer to hardware you are
using if you want to enable CPU optimization.

> Compiler     ST     MT overhead
> -------- ------ ------ --------
> MSVS2008  32.41  46.09      42%
> GCC432    46.58  66.02      41% [NOTE: GCC doesn't have TLS support AFAIK]
> BCC58     52.64  72.75      38%
> 1.0.1 (release)
> - -DHB_NO_DEBUG -DHB_NO_TRACE [ -DHB_FM_STATISTICS_OFF is default ]
> - Rest of switches same as above.
> Compiler     ST
> -------- ------
> MSVS2008  41.06
> GCC432    53.25
> BCC58     52.80

In all this tests memory manager has the most important impact
so it's hard to well compare the results. I noticed in the past
that Windows is extremly slow in comparision to other OSes when
process has to allocate/free memory pages. It probably strictly
depends on Windows version but I'm not Windows guru to say which
versions works better/worse.
Here the MSVC results are the best but I'm not sure it's caused
by better code only. I think that OpenWatcom with its default MM
will give you also such good results. If you can please check it
on the same machine.

> Basically I'm getting a consistent 36-42% MT overhead with all
> compilers, so I wouldn't be surprised if overhead would highly
> depend on exact CPU model and maybe Windows version.

The cost of TLS access is strictly compiler/OS dependent. I've
just make interesting experiment to compare the code of using
stack pointer to dynamically allocated stack instead of statick
stack address in ST programs.
I made very simple modificatrion. In hbstack.c for ST mode I changed:

      extern HB_STACK hb_stack;

to:

      extern PHB_STACK hb_stack_ptr;
#     define hb_stack      ( * hb_stack_ptr )

and in estack.c:
   #  if defined( HB_STACK_MACROS )
         HB_STACK hb_stack;
   #  else
         static HB_STACK hb_stack;
   #  endif

to:
      HB_STACK _hb_stack_;
      PHB_STACK hb_stack_ptr = &_hb_stack_;

Then I recompiled HVM. The results are realy interesting:
With original HVM I have:
   ST: total application time:                              27.80
   MT: total application time:                              30.79
with modified one:
   ST: total application time:                              32.09
   MT: total application time:                              30.93

The modification was only for ST mode so MT results are the same.
But in ST mode it nicely shows the overhead of using pointer to stack
instead of it direct address which can be optimized by compiler.
In GCC build it's _bigger_ then native TLS access with enabled buffering.
Without buffering the results are in practice the same. Probably buffering
in local C function variable allows to enable some additional optimization
because GCC does not have to worry that it will be change by some external
function calls.
It means that we already reach the same speed level as in ST mode if
compiler has fast TLS access. In Current Linux and GCC versions using
TLS does not have any noticeable speed impact. The same is in OS2. For
us this is zero cost.
The results are the same and the overhead ~10-20% is caused by different
data structures which does not allow to enable optimizations possible for
statically allocated HB_STACK structure.
It also means that we will not improve the speed if we begin to pass
the pointer to HB_STACK between functions as parameter.
The problem is only with systems where TLS access is really expensive.
F.e. older Linuxes, some *nixes, some systems without TLS at all where
we will have to emulate it ourselves and looks that also in Windows
though here I'm not such sure the results for compilers with native
TLS support. At least few of then should give better performance. The
speed difference is simply too huge. I also made some tests but I run
MinGW and BCC programs in my Linux box using WINE and the overhead is
from 25% to 32%.
BTW. Viktor if possible then I would like to send you MinGW binaries
to compare results on your system with your native MinGW builds.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Sep 25 05:31:30 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 05:32:08 2008
Subject: [Harbour] Re: hbrun and mt
In-Reply-To: <48DB4F74.6000003@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48DB4F74.6000003@mail.udg.mx>
Message-ID: <20080925093130.GB7193@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, David Arturo Macias Corona wrote:

Hi David,

> I made a fresh build without -DHB_FM_STATISTICS_OFF
> and Harbour build/run fine

Thank you very much for test.

> It does not raise error reported by Maurilio:
> ----------------------------
>>> I did the change to the makefile, I get an immediate SIGSEGV simply
>>> starting hbrun.
>>> (E:\repository\harbour-svn\tests)\harbour\bin\hbrun mt\mttest01.prg
>>> Killed by SIGSEGV
> ----------------------------
> so real problem with Maurilio build remain unknown, but is affected by
> HB_FM_STATISTICS_OFF

No. it's known. I fixed it at:
   2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)

and it's the reason why it's working for you now. It was real bug.

Once again thank you very much for your help. Now MT for OS2
seems to be fully functional and works well. Some minor things
can be cleaned yet but they are not big problem.
Have you agreed final version for TCPV40HDRS / HB_OS2_TCP32

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Sep 25 05:33:12 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 05:33:16 2008
Subject: [Harbour] 2008-09-25 11:26 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91ef1$Blat.v2.6.2$bae7c3b4$1838300b1192@127.0.0.1>

2008-09-25 11:26 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  - harbour-ce-spec
  + harbour-wce-spec
  - harbour-w32-spec
  + harbour-win-spec
  - make_rpmw32.sh
  + make_rpmwin.sh
  - make_rpmce.sh
  + make_rpmwce.sh
    * Some steps done to use more consistent names for Windows 
      and Windows CE, and also to move away from '32' usage.
    ; TODO: I'd prefer to give all .spec files the same 
            empty extensions, could anyone help how to 
            convert current harbour.spec to harbour-spec and 
            not break .rpm creation? Plus it would be also 
            good to implement automatic versioning on .rpm 
            build just like for harbour-win/wce in make_rpmw*.sh 
            scripts.

  - hbgtmk.sh
  + make_rpm_from_svn.sh
    * Renamed to give a better idea about its purpose.
    ; NOTE: make_rpm_from_svn.sh seems a bit pointless now 
            that we have the final releases in separate SVN tags.

  * make_gcc.mak
    * Minor formatting.
--
Brgds,
Viktor

From maurilio.longo at libero.it  Thu Sep 25 05:38:24 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Sep 25 05:38:31 2008
Subject: [Harbour] Re: hbrun and mt
In-Reply-To: <20080925093130.GB7193@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<48DB4F74.6000003@mail.udg.mx>
	<20080925093130.GB7193@34-mo7-2.acn.waw.pl>
Message-ID: <48DB5C10.2060001@libero.it>

Przemyslaw,

> Have you agreed final version for TCPV40HDRS / HB_OS2_TCP32

I think yes, let's wait for David confirmation, anyway HB_OS2_TCP32 is more
meaningfull since it pinpoints what it is changing.

Thanks.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Thu Sep 25 06:12:02 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Sep 25 06:12:12 2008
Subject: [Harbour] Re: 2008-09-18 01:17 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080919175441.GA32368@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<48D20843.7000208@mail.udg.mx>	<20080918151030.GC5189@34-mo7-2.acn.waw.pl>	<48D3D8C7.7000609@libero.it>
	<20080919175441.GA32368@34-mo7-2.acn.waw.pl>
Message-ID: <48DB63F2.9010604@libero.it>

Przemyslaw Czerpak wrote:
> Thank you very much for the information. It means that dlmalloc.c
> will have to be updated to use native OS2 API in the future if it
> works as expected for Windows users.
> Probably you are the best person to make it in such case :-)
> 

Przemyslaw,

I was looking at dlmalloc, so I decided to try the test program from Pritpal
(message of september, 18th), on OS/2, latest cvs code, hbrun with vmmt linked
 in I can add nearly 816000 items before I get a realloc error.

    809000
    810000
    811000
    812000
    813000
    814000
    815000
    816000
Unrecoverable error 9009: hb_xrealloc can't reallocate memory
Called from AADD(0)
                   Called from MAIN(6) in pcode.hrb
                                                   Called from HB_HRBRUN(0)

Called from _APPMAIN(114) in ../../hbrun.prg

Now it has to be said that on OS/2 a program can allocate a maximum of 512Mb
(actually you top around 450-500Mb) because this is the virtual address space
assigned to each process.

It is possible to use more memory calling specific APIs, but a pointer to a
block into this memory, called 'high memory', cannot be passed to all OS/2
APIs. So it is of limited use.

That said, I think that porting dlmalloc to OS/2 is a waste of time without,
probably, any real advantage in terms of speed or stability (I see from
dlmalloc.c that it is not well suited for mt programs since it uses a global
lock which can become the bottleneck).

Those above are my two cents :)

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From dmacias at mail.udg.mx  Thu Sep 25 06:16:14 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Sep 25 06:16:16 2008
Subject: [Harbour] Re: hbrun and mt
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48DB64EE.5020808@mail.udg.mx>

Przemek, Maurilio:

 >>Once again thank you very much for your help. Now MT for OS2
 >>seems to be fully functional and works well. Some minor things
 >>can be cleaned yet but they are not big problem.
 >>Have you agreed final version for TCPV40HDRS / HB_OS2_TCP32

 >I think yes, let's wait for David confirmation, anyway HB_OS2_TCP32 is 
 >more meaningfull since it pinpoints what it is changing.

Yes Iam agree, it look better

Please add in gcc.cf a comment for -DTCPV40HDRS based on:

---------------------------------------
v3.2.2 Alpha 2:
---------------
     A few bugfixes and a couple of new features.

         o The TCP/IP headers and libraries scheme have been changed.
           The default is the current OS/2 tcpip toolkit (BSD 4.4 based).
           To target the older OS/2 tcpip stack (BSD 4.3 based) you must
           define TCPV40HDRS before including any TCP/IP headers and make
           sure usr/lib/tcpipv4 is searched before usr/lib (this is to
           get the right libsocket). It is recommended to use the -D
           compiler option for the define and either the LIBRARY_PATH or
           the -L compiler/linker option for the library.
---------------------------------------

As Maurilio explained earlier, setting -DTCPV40HDRS does not complete 
all the work if tcpipv4 libraries are not forced, as example:

-------
   set L_USR=-Le:\usr\lib\tcpipv4
-------

David Macias

From harbour.01 at syenar.hu  Thu Sep 25 06:17:55 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 06:18:04 2008
Subject: [Harbour] Re: 2008-09-18 01:17 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <48DB63F2.9010604@libero.it>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<48D20843.7000208@mail.udg.mx>	<20080918151030.GC5189@34-mo7-2.acn.waw.pl>	<48D3D8C7.7000609@libero.it>
	<20080919175441.GA32368@34-mo7-2.acn.waw.pl>
	<48DB63F2.9010604@libero.it>
Message-ID: <F7E543DE-63FC-4E7E-8FE5-1077BBB5DE87@syenar.hu>

>
Hi Maurilio, David,

> Unrecoverable error 9009: hb_xrealloc can't reallocate memory
> Called from AADD(0)
>                   Called from MAIN(6) in pcode.hrb
>                                                   Called from  
> HB_HRBRUN(0)
>
> Called from _APPMAIN(114) in ../../hbrun.prg

Do I see well, that in OS/2 a stack trace looks
always misaligned as above?

This, and also plain usage of \r in Windows, should
IMO be fixed. Dunno what's the best way to make these
EOLs fully portable though.

Brgds,
Viktor

From druzus at acn.waw.pl  Thu Sep 25 06:27:39 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 06:28:16 2008
Subject: [Harbour] 2008-09-25 11:26 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c91ef1$Blat.v2.6.2$bae7c3b4$1838300b1192@127.0.0.1>
References: <01c91ef1$Blat.v2.6.2$bae7c3b4$1838300b1192@127.0.0.1>
Message-ID: <20080925102739.GA22650@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> 2008-09-25 11:26 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>     * Some steps done to use more consistent names for Windows 
>       and Windows CE, and also to move away from '32' usage.
>     ; TODO: I'd prefer to give all .spec files the same 
>             empty extensions, could anyone help how to 
>             convert current harbour.spec to harbour-spec and 
>             not break .rpm creation? Plus it would be also 

It will break one feature. Now you can download harbour-*.src.tar.gz
and use:
   rpmbuild -ta harbour-*.src.tar.gz

and RPM automatically extracts *.spec file(s) and use then to create
RPM package. It's the reason why only one (native) file has .spec
extension.
Of course we can drop such functionality.

>             good to implement automatic versioning on .rpm 
>             build just like for harbour-win/wce in make_rpmw*.sh 
>             scripts.

The problem is with above functionality. The file has to be packed
with valid number.

>   - hbgtmk.sh
>   + make_rpm_from_svn.sh
>     * Renamed to give a better idea about its purpose.
>     ; NOTE: make_rpm_from_svn.sh seems a bit pointless now 
>             that we have the final releases in separate SVN tags.

IMHO it's enough to update it in each branch.
I was looking for such keyword in SVN documentation to make the url
updating automatic but I was not able to find anything like that :-(

best regards,
Przemek
From maurilio.longo at libero.it  Thu Sep 25 06:33:46 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Sep 25 06:33:52 2008
Subject: [Harbour] Re: 2008-09-18 01:17 UTC+0200
	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <F7E543DE-63FC-4E7E-8FE5-1077BBB5DE87@syenar.hu>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<48D20843.7000208@mail.udg.mx>	<20080918151030.GC5189@34-mo7-2.acn.waw.pl>	<48D3D8C7.7000609@libero.it>	<20080919175441.GA32368@34-mo7-2.acn.waw.pl>	<48DB63F2.9010604@libero.it>
	<F7E543DE-63FC-4E7E-8FE5-1077BBB5DE87@syenar.hu>
Message-ID: <48DB690A.3070904@libero.it>

Viktor,

not always, I mean, if I press Alt-C stack trace is ok.

If I call hbrun speedtst.prg, output is misaligned.

Maurilio.


Szak?ts Viktor wrote:
>>
> Hi Maurilio, David,
> 
>> Unrecoverable error 9009: hb_xrealloc can't reallocate memory
>> Called from AADD(0)
>>                   Called from MAIN(6) in pcode.hrb
>>                                                   Called from
>> HB_HRBRUN(0)
>>
>> Called from _APPMAIN(114) in ../../hbrun.prg
> 
> Do I see well, that in OS/2 a stack trace looks
> always misaligned as above?
> 
> This, and also plain usage of \r in Windows, should
> IMO be fixed. Dunno what's the best way to make these
> EOLs fully portable though.
> 
> Brgds,
> Viktor
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Thu Sep 25 06:38:03 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Sep 25 06:38:11 2008
Subject: [Harbour] A few questions about MT
In-Reply-To: <1050CEFC-928C-45E4-AA63-AAF3AB99BF85@syenar.hu>
References: <48D2698D.80206@dbtopas.lt>	<20080918165307.GA15124@34-mo7-2.acn.waw.pl>	<A1E8AD22-84C4-4717-9C48-26E0664DA207@syenar.hu>	<20080921231424.GA18618@34-mo7-2.acn.waw.pl>
	<1050CEFC-928C-45E4-AA63-AAF3AB99BF85@syenar.hu>
Message-ID: <48DB6A0B.6020606@libero.it>

Viktor and Przemyslaw,

+1 for a way to be fully xbase++ compatible.

Maurilio.


-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Thu Sep 25 06:40:21 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 06:40:30 2008
Subject: [Harbour] 2008-09-25 11:26 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20080925102739.GA22650@34-mo7-2.acn.waw.pl>
References: <01c91ef1$Blat.v2.6.2$bae7c3b4$1838300b1192@127.0.0.1>
	<20080925102739.GA22650@34-mo7-2.acn.waw.pl>
Message-ID: <F49F22EC-0594-4E2D-B6D3-949221C879A6@syenar.hu>

>>
Hi Przemek,

>>            empty extensions, could anyone help how to
>>            convert current harbour.spec to harbour-spec and
>>            not break .rpm creation? Plus it would be also
>
> It will break one feature. Now you can download harbour-*.src.tar.gz
> and use:
>   rpmbuild -ta harbour-*.src.tar.gz
>
> and RPM automatically extracts *.spec file(s) and use then to create
> RPM package. It's the reason why only one (native) file has .spec
> extension.
> Of course we can drop such functionality.
>
>>            good to implement automatic versioning on .rpm
>>            build just like for harbour-win/wce in make_rpmw*.sh
>>            scripts.
>
> The problem is with above functionality. The file has to be packed
> with valid number.

Okay, now I understand. I can't judge how important this feature
is really for .rpm users, or if its used or not by anyone, so
we may just leave it.

It'd be better to have them aligned, because they need to be
update together in 99% of cases, and currently it's very easy
to forget about the others.

>>  - hbgtmk.sh
>>  + make_rpm_from_svn.sh
>>    * Renamed to give a better idea about its purpose.
>>    ; NOTE: make_rpm_from_svn.sh seems a bit pointless now
>>            that we have the final releases in separate SVN tags.
>
> IMHO it's enough to update it in each branch.
> I was looking for such keyword in SVN documentation to make the url
> updating automatic but I was not able to find anything like that :-(

Hm, I still don't really see the purpose of this script.

To build the same version from SVN, as the source distribution
this file come from, well, I can't see why it could be useful.
If the purpose is to be able to build a recent devl version
from official source distribution, the current SVN URL is fine.

Brgds,
Viktor

From maurilio.longo at libero.it  Thu Sep 25 06:41:17 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Sep 25 06:41:24 2008
Subject: [Harbour] 2008-09-22 02:34 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080922003439.GA5240@34-mo7-2.acn.waw.pl>
References: <20080922003439.GA5240@34-mo7-2.acn.waw.pl>
Message-ID: <48DB6ACD.9040208@libero.it>

Przemyslaw,

why thread 1 does not have TID? I think that all .prg thread should be equal
:) so that we can handle them the same way.

Best regards.

Maurilio.


Przemyslaw Czerpak wrote:
> 2008-09-22 02:34 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/include/hbvm.h
>   * harbour/source/vm/hvm.c
>   * harbour/source/vm/thread.c
>     + added .prg function hb_threadSelf() -> <pThID> | NIL
>       It returns thread ID pointer variable or NIL when thread was
>       registered without it (main thread and some 3-rd party threads
>       created by C API)
> 
>   * harbour/source/vm/hvm.c
>     * protect s_InitFunctions and s_ExitFunctions by mutex
> 
>   * harbour/source/common/hbverdsp.c
>     * use hb_verBuildDate() instead of __DATE__ and __TIME__ in
>       hb_verBuildInfo() function to report the same time in both
>       cases.
> 
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Thu Sep 25 06:49:49 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 06:49:58 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <20080925092556.GA7193@34-mo7-2.acn.waw.pl>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
	<20080925092556.GA7193@34-mo7-2.acn.waw.pl>
Message-ID: <7DC874FB-6DA0-4370-8C0B-B58E55268F01@syenar.hu>

>>
Hi Przemek,

>> I've built mingw with -DHB_USE_TLS (the rest is default),
>> then I got 'undefined reference to '__emutls_get_address'
>> errors on linking. Such symbol doesn't BTW exist in MinGW
>> 4.3.2 supplied libs.
>
> AFAIR the work on TLS support for MinGW started at the begining of
> summer so probably you should look at newest MinGW versions (probably
> devel ones if you want to use it).

Despite my 'GCC432' markings, this was actually done
with the latest stable MinGW, which is 4.1.2, so I'll
make some tests with the latest available 4.3.2 non-official
build, maybe it already has it.

[ Update: Tried MinGW 4.3.2 with -DHB_USE_TLS, and I'm
still getting the same error as above. Maybe I'm doing
something wrong, which could well may be given the zillions
of factors involved. ]

>> - MSVS switches: (all default C mode)
>> - GCC switches: -O3 -fomit-frame-pointer -ffast-math - 
>> march=pentiumpro
>> - BCC switches: -6 -OS -Ov -Oi -Oc -Q -tWM
>
> -ffast-math in some cases increases the differences in FL arithmetic
> so not all people like it.
> I also suggest to check -march=pentiumpro. This CPU has extremely slow
> 16bit registers and it's possible that MinGW will try to make some
> workarounds for it but I do not know if it really does it. Anyhow
> I rather suggest to chose something more closer to hardware you are
> using if you want to enable CPU optimization.

Okay and thanks, I'll simply remove both, as the .exe ought to
run on not just my system, but possibly on all hardware my app
may run (when I begin to use GCC live). I also removed -ffast-math
from future official MinGW builds.

[ Update: After removing both from 1.0.1 builds, I got _just slightly_
bigger binaries, and about identical performance. As a downside, now
I'm getting 44 errors in hbtest, due to failing Round() and Int()
tests: 914, 917-920, 923-925, 959, 962-965, 968-970, 987-990.
Actually the new MinGW results are the right ones, but the
expected results seem to be screwed up, showing 705032704 instead of
5000000000. Quite strange. ]

>> It also means that we will not improve the speed if we begin to pass
> the pointer to HB_STACK between functions as parameter.
> The problem is only with systems where TLS access is really expensive.
> F.e. older Linuxes, some *nixes, some systems without TLS at all where
> we will have to emulate it ourselves and looks that also in Windows
> though here I'm not such sure the results for compilers with native
> TLS support. At least few of then should give better performance. The
> speed difference is simply too huge. I also made some tests but I run
> MinGW and BCC programs in my Linux box using WINE and the overhead is
> from 25% to 32%.
> BTW. Viktor if possible then I would like to send you MinGW binaries
> to compare results on your system with your native MinGW builds.

Okay, no problem.

[ As for OpenWatcom tests, maybe a bit later, I'd personally
rather choose the best from the mainstream compilers. ]

[ Lucky Linux/OS/2 users, I didn't expect Windows to suck this much.
Having said all that, maybe it'd just fine to enable MT by default on
those systems where there is no extra overhead beyond the one caused
by different C structures. ]

Brgds,
Viktor

From dmacias at mail.udg.mx  Thu Sep 25 06:56:10 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Sep 25 06:56:19 2008
Subject: [Harbour] Re: 2008-09-18 01:17 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48DB6E4A.7050201@mail.udg.mx>

Viktor:

 >> Unrecoverable error 9009: hb_xrealloc can't reallocate memory
 >> Called from AADD(0)
 >>                   Called from MAIN(6) in pcode.hrb
 >>                                                   Called from
 >> HB_HRBRUN(0)
 >>
 >> Called from _APPMAIN(114) in ../../hbrun.prg

 >Do I see well, that in OS/2 a stack trace looks
 >always misaligned as above?

 >This, and also plain usage of \r in Windows, should
 >IMO be fixed. Dunno what's the best way to make these
 >EOLs fully portable though.

[Maurilio]
 >not always, I mean, if I press Alt-C stack trace is ok.
 >If I call hbrun speedtst.prg, output is misaligned.

In stack trace happen as Viktor said

In speedtst.prg is due to:
------------------
#ifndef EOL
     #define EOL chr(10)
#endif
#command ? => outstd(EOL)
#command ? <xx,...> => outstd(<xx>, EOL)
------------------


Speedtst.prg produce this kind of output:

------------------------------
                                                      f2(c[40000]); c2:=c ->
                            0.41
                                 f2(@c[40000]); c2:=c ->
       0.39
            f3(a,a2,c,i,j,t,bc) ->                                0.74
 
f2(a2) ->
                                             0.31
                                                  s:=f4() ->
                        1.84
                             s:=f5() ->
   1.04
        ascan(a,i%ARR_LEN) ->                                 0.93
 
ascan(a2,c+chr
(i%64+64)) ->                           3.02
                                              ascan(a,{|x|x==i%ARR_LEN}) ->
                    7.67
 
========================================================
====
      total application time:                              57.53
                                                                 total 
real time:
                                      57.53
------------------------------

David Macias


From druzus at acn.waw.pl  Thu Sep 25 07:01:02 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 07:01:40 2008
Subject: [Harbour] Re: 2008-09-18 01:17 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48DB63F2.9010604@libero.it>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48D20843.7000208@mail.udg.mx>
	<20080918151030.GC5189@34-mo7-2.acn.waw.pl>
	<48D3D8C7.7000609@libero.it>
	<20080919175441.GA32368@34-mo7-2.acn.waw.pl>
	<48DB63F2.9010604@libero.it>
Message-ID: <20080925110102.GB22650@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, Maurilio Longo wrote:

Hi Maurilio,

> > Thank you very much for the information. It means that dlmalloc.c
> > will have to be updated to use native OS2 API in the future if it
> > works as expected for Windows users.
> > Probably you are the best person to make it in such case :-)
> I was looking at dlmalloc, so I decided to try the test program from Pritpal
> (message of september, 18th), on OS/2, latest cvs code, hbrun with vmmt linked
>  in I can add nearly 816000 items before I get a realloc error.
>     809000
>     810000
>     811000
>     812000
>     813000
>     814000
>     815000
>     816000
> Unrecoverable error 9009: hb_xrealloc can't reallocate memory
> Called from AADD(0)
>                    Called from MAIN(6) in pcode.hrb
>                                                    Called from HB_HRBRUN(0)
> Called from _APPMAIN(114) in ../../hbrun.prg
> Now it has to be said that on OS/2 a program can allocate a maximum of 512Mb
> (actually you top around 450-500Mb) because this is the virtual address space
> assigned to each process.

The problem is that this code _ALLOCATES_ such huge amount of memory
when in fact it needs much more. It's caused by uneficient memory manager.
When this program finish after 1'000'000 iterations then
MEMORY( HB_MEM_USEDMAX ) shows  48'176'447. This is totatl memory
allocated by Harbour.  The rest is MM overhead. Memory conservative
MM should not allocate more then ~twice memory ~ 100MB. Good MM with
automatic preallocation for future resising but also tuned to safe memory
should allocate about three times more memory ~150MB. In my Linux box for
such test it's 144MB. _Exactly_ 3 times more (classic algorithm). And
results are very close to DL-MM results.
The default MM in GCC for OS2 is not clever enough to rach such results
and allocates much more memory then necessary probably also highly reducing
performance because it suggest that array resize (AADD()) forces two often
phisical memory realloction of array body to newly alocated blocks.

> It is possible to use more memory calling specific APIs, but a pointer to a
> block into this memory, called 'high memory', cannot be passed to all OS/2
> APIs. So it is of limited use.

OK, fine. Each OS has such limit. F.e. to speed up Linux system you can
limit maximum process memory to 1GB and in such case system can use fixed
addreses for kernel and user space so switchin between them (calling any
kernel level function) does not force memory descriptor overloading.
Very nice feature which give real high speed imporvement. But it's not
the problem we are talking about.
The real problem is that MM you used allocated more then ~150 of physical
memory for this _whole_ test. In the place where it fails for you DL-MM
should not need more then ~120MB.

> That said, I think that porting dlmalloc to OS/2 is a waste of time without,
> probably, any real advantage in terms of speed or stability (I see from
> dlmalloc.c that it is not well suited for mt programs since it uses a global
> lock which can become the bottleneck).
> Those above are my two cents :)

I think that you haven't noticed where is the problem and you
take wrong conclusions. The MM behavior is also important for
us to take decision about out own prealocations, f.e. in array
add. Looks that good MM can made it very efficiently respecting
also other memory requirements so we do not have to implement
it ourselves for only chosen things, f.e. arrays body reducing
the MM choices.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Sep 25 07:03:08 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 07:03:18 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <7DC874FB-6DA0-4370-8C0B-B58E55268F01@syenar.hu>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
	<20080925092556.GA7193@34-mo7-2.acn.waw.pl>
	<7DC874FB-6DA0-4370-8C0B-B58E55268F01@syenar.hu>
Message-ID: <22C21C8F-B90A-4FF9-AEA8-3F743121C84D@syenar.hu>

>
Hi Przemek,

> [ Update: Tried MinGW 4.3.2 with -DHB_USE_TLS, and I'm
> still getting the same error as above. Maybe I'm doing
> something wrong, which could well may be given the zillions
> of factors involved. ]

I did something wrong. Too much compilers and compiled
environments on one computer...

So, with 4.3.2 TLS is working. Let's see the results:

           App   Real
MT-412: 65.05  65.52
MT-432: 64.73  65.34
ST-412: 45.19  45.69
ST-432: 40.77  41.11

I conclude that TLS support in 4.3.2 is pretty good
to enhance ST performance, and gives a very small
advantage in MT mode.

[ 4.3.2 tests were done with r9502, 4.1.2 ones with r9488,
but with identical features, except TLS. ]

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep 25 07:09:20 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 07:09:23 2008
Subject: [Harbour] 2008-09-25 13:07 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91eff$Blat.v2.6.2$28b243f8$14e0bc04a6fc@127.0.0.1>

2008-09-25 13:07 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbthread.h
    + Enabled HB_USE_TLS for MinGW >= 4.3.0
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep 25 07:13:42 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 07:13:46 2008
Subject: [Harbour] 2008-09-25 13:13 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91eff$Blat.v2.6.2$c4d523ea$190ce913d488@127.0.0.1>

2008-09-25 13:13 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * tests/speedtst.prg
    ! Use hb_OSNewLine() instead of hard-wired EOL.
    + Emulate hb_OSNewLine() for non-Harbour compilers.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep 25 07:16:55 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 07:16:59 2008
Subject: [Harbour] 2008-09-25 13:16 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91f00$Blat.v2.6.2$3817d2da$f68abdc5856@127.0.0.1>

2008-09-25 13:16 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/xhb/hbcompat.ch
    + Added xhb_CopyFile() two-way translations.
      (untested)
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep 25 07:30:04 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 07:30:08 2008
Subject: [Harbour] 2008-09-25 13:28 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91f02$Blat.v2.6.2$0e47d3d6$1c7cfae6b702@127.0.0.1>

2008-09-25 13:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  - make_tgz.sh
  + mpkg_tgz.sh
  - make_deb.sh
  + mpkg_deb.sh
  - make_rpm.sh
  + mpkg_rpm.sh
  - make_rpmwce.sh
  + mpkg_rpm_wce.sh
  - make_rpmwin.sh
  + mpkg_rpm_win.sh
  - make_xmingw.sh
  + make_gnu_xmingw.sh
  - make_xmingwce.sh
  + make_gnu_xmingwce.sh
  - make_rpm_from_svn.sh
  + mpkg_rpm_from_svn.sh
    * Some renamed in the hope that it will better separate 
      the simple build scripts (make*) from package build 
      (mpkg*) scripts.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Thu Sep 25 09:54:39 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 09:55:16 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <7DC874FB-6DA0-4370-8C0B-B58E55268F01@syenar.hu>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
	<20080925092556.GA7193@34-mo7-2.acn.waw.pl>
	<7DC874FB-6DA0-4370-8C0B-B58E55268F01@syenar.hu>
Message-ID: <20080925135439.GA14636@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, Szakáts Viktor wrote:

Hi Viktor,

>
> [ Update: After removing both from 1.0.1 builds, I got _just slightly_
> bigger binaries, and about identical performance. As a downside, now
> I'm getting 44 errors in hbtest, due to failing Round() and Int()
> tests: 914, 917-920, 923-925, 959, 962-965, 968-970, 987-990.
> Actually the new MinGW results are the right ones, but the
> expected results seem to be screwed up, showing 705032704 instead of
> 5000000000. Quite strange. ]

Can you send the exact hbtest output?

>> BTW. Viktor if possible then I would like to send you MinGW binaries
>> to compare results on your system with your native MinGW builds.
> Okay, no problem.

Thank you. I'll create them in a while and send to your private
email address.

> [ As for OpenWatcom tests, maybe a bit later, I'd personally
> rather choose the best from the mainstream compilers. ]


> [ Lucky Linux/OS/2 users, I didn't expect Windows to suck this much.
> Having said all that, maybe it'd just fine to enable MT by default on
> those systems where there is no extra overhead beyond the one caused
> by different C structures. ]

In Linux it' snot such easy. You need quite new 2.6 kernels, new GLIBC
and new GCC for native TLS support which works also in static binaries.
Otherwise you have to use pthread_getspecific() which is much slower.
I still have many installation based on 2.4 or even 2.2. I hope that
older ones with 2.0 and 1.2/1.3 died with the hardware ;-) anyhow here
we do not have pthreads support so it will not work.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Sep 25 10:02:43 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 10:03:21 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <22C21C8F-B90A-4FF9-AEA8-3F743121C84D@syenar.hu>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
	<20080925092556.GA7193@34-mo7-2.acn.waw.pl>
	<7DC874FB-6DA0-4370-8C0B-B58E55268F01@syenar.hu>
	<22C21C8F-B90A-4FF9-AEA8-3F743121C84D@syenar.hu>
Message-ID: <20080925140243.GB14636@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, Szakáts Viktor wrote:

Hi Viktor,

>> [ Update: Tried MinGW 4.3.2 with -DHB_USE_TLS, and I'm
>> still getting the same error as above. Maybe I'm doing
>> something wrong, which could well may be given the zillions
>> of factors involved. ]
> I did something wrong. Too much compilers and compiled
> environments on one computer...
> So, with 4.3.2 TLS is working. Let's see the results:
>           App   Real
> MT-412: 65.05  65.52
> MT-432: 64.73  65.34
> ST-412: 45.19  45.69
> ST-432: 40.77  41.11
> I conclude that TLS support in 4.3.2 is pretty good
> to enhance ST performance, and gives a very small
> advantage in MT mode.

I do not know details for MinGW TLS but it's possible that it will be
imporved yet in the future, f.e. now thay can use simple function call
like in BCC. Anyhow in current SVN code the cost of TLS is quite
efficient hidden by HB_STACK_PRELOAD. Just try to remove:

   #define HB_STACK_PRELOAD

fro the beginning of estack.c and hvm.c and rebuild Harbour without
HB_USE_TLS. Then compare the results. If they will be the same then
probably current MinGW version simply calls TlsGetValue() for native
TLS access so it the same as calling this function by us.

best regards,
Przemek
From maurilio.longo at libero.it  Thu Sep 25 10:29:31 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Sep 25 10:29:41 2008
Subject: [Harbour] 2008-09-24 20:30 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080924183031.GA4901@34-mo7-2.acn.waw.pl>
References: <20080924183031.GA4901@34-mo7-2.acn.waw.pl>
Message-ID: <48DBA04B.8030501@libero.it>

Przemyslaw,

latest code, OS/2 GCC, HB_FM_STATISTICS_OFF, PIV HT 3.6GHz, SMP Kernel.

ST

============================================================
total application time:                              52.85
total real time:                                     52.85


MT

============================================================
total application time:                              70.91
total real time:                                     70.92

Best regards.

Maurilio.

Przemyslaw Czerpak wrote:
> 2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/vm/estack.c
>     ! fixed stack preloading - it should be after checking if stack
>       exist :)
> 
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From druzus at acn.waw.pl  Thu Sep 25 11:10:48 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 11:11:25 2008
Subject: [Harbour] A few questions about MT
In-Reply-To: <1050CEFC-928C-45E4-AA63-AAF3AB99BF85@syenar.hu>
References: <48D2698D.80206@dbtopas.lt>
	<20080918165307.GA15124@34-mo7-2.acn.waw.pl>
	<A1E8AD22-84C4-4717-9C48-26E0664DA207@syenar.hu>
	<20080921231424.GA18618@34-mo7-2.acn.waw.pl>
	<1050CEFC-928C-45E4-AA63-AAF3AB99BF85@syenar.hu>
Message-ID: <20080925151048.GC14636@34-mo7-2.acn.waw.pl>

On Mon, 22 Sep 2008, Szakáts Viktor wrote:

Hi all interested in PUBLIC like in xBase++

Now user can fully control the memavars inheritance even separately
for public and private vars. IMHO it's very flexible and allows
to use many of existing code using memvars without rewirting it
for MT mode so seems to be better then xBase++ implementation.
Sharing only public with existing xBase++ code emulates it quite
well with one exception. If child thread create new PUBLIC variable
then it will not be visible in parent thread if it didn't have such
variable allocated when thread was created. F.e.:
   #include "hbthread.ch"
   memvar PUB1, PUB2
   proc main()
      public PUB1 := "main:pub1"
      ? "parent:"
      ? type( "PUB1" ), iif( type( "PUB1" ) != "U", PUB1, "" )
      ? type( "PUB2" ), iif( type( "PUB2" ) != "U", PUB2, "" )
      hb_threadJoin( hb_threadStart( HB_THREAD_INHERIT_PUBLIC, @thFunc() ) )
      ? "parent:"
      ? type( "PUB1" ), iif( type( "PUB1" ) != "U", PUB1, "" )
      ? type( "PUB2" ), iif( type( "PUB2" ) != "U", PUB2, "" )
   return
   proc thFunc()
      public PUB1 := "thread:pub1"
      public PUB2 := "thread:pub2"
      ? "child:"
      ? type( "PUB1" ), PUB1
      ? type( "PUB2" ), PUB2
   return

This code in Harbour shows:

   parent:
   C main:pub1
   U
   child:
   C thread:pub1
   C thread:pub2
   parent:
   C thread:pub1
   U

If I understand well xbase++ documentation then in this language it should
show:
   parent:
   C main:pub1
   U
   child:
   C thread:pub1
   C thread:pub2
   parent:
   C thread:pub1
   C thread:pub2

BTW If someone can confirm this then it will be nice. Otherwise we may
    talk about sth what does not exists.
    In all xbase++ documentations I've seen so far the important for me
    things are missing and only basic behavior is described. Just like in
    dbRelease()/dbDetach(). What does xbase++ with relations and active
    locks (RLOCK()/FLOCK() when WA is released?

So public variable created by child thread is also visible in all other
threads even if it didn't exist when thread is created.

Now I'm thinking about real application usage. I cannot touch any
shared variables without protection. It means that If I want to use it
in parrent thread I have to know its name. If I know it then I can simply
declare it by:
   public <varname>
before I'll start the thread just like pub1 was declared in example above.
Here new INIT PUBLIC statement can be very nicely used to initialize all
such PUBLIC variables automatically when program starts. Of coures if
someone want to create such global to process public variables.
After rethinking the problem I'm finding xbase++ behavior as limitation
not a feature because now each thread can use it's own set of public
variables, known only for this thread and its child threads which can
be shared between them if necessary and it does not effect parent thread.
If we exactly replicate the xbase++ behavior we will stronlgy reduce
PUBLIC functionality to sth what can be used only by application author
which knows all PUBLIC variable names and does not have to worry about
name conflicts with 3-rd party code. The final result of such model
has also yet another bad side effect. Each access to public variable
have to be protected by MUTEX if this is not readonly var what makes
some other complications.
In summary I'm finding current Harbour behavior better.
I can implement xBase++ like solution even quite easy though with some
additional memory cost - we will have to store PUBLICs handles directly
in global dynamic symbol table which is not thread local. I've just check
it. Anyhow it will not be possible to keep current optional memvar
separation fully working. Just simply each thread if wants to see public
variables have to access also common to all thread PUBLIC area and has
to be able to create threads which can create in this area effecting all
other threads even if user needs full separation. Additionally it will
force using hidden for user mutex synchronization used each time global
public area is accessed/assign to avoid internal structure corruption
what will reduce the performance.
In real applications it's very minor problem and here I do not see good
reason reduce functionality, security and speed and only to replicate
exact xbase++ behavior.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Sep 25 11:17:48 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 11:18:25 2008
Subject: [Harbour] 2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48DBA04B.8030501@libero.it>
References: <20080924183031.GA4901@34-mo7-2.acn.waw.pl>
	<48DBA04B.8030501@libero.it>
Message-ID: <20080925151748.GD14636@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, Maurilio Longo wrote:

Hi Maurilio,

> latest code, OS/2 GCC, HB_FM_STATISTICS_OFF, PIV HT 3.6GHz, SMP Kernel.
> ST
> ============================================================
> total application time:                              52.85
> total real time:                                     52.85
> MT
> ============================================================
> total application time:                              70.91
> total real time:                                     70.92

Thank you for the tests. You have a little bit bigger difference then
David. It's ~34%. But I cannot say exactly why. It's possible that
some memory operation have different cost in MT and ST code due to
different startup memory consumption by MT and ST HVMs. Anyhow it's
in acceptable range.

Best regards,
Przemek
From maurilio.longo at libero.it  Thu Sep 25 11:26:06 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Sep 25 11:26:16 2008
Subject: [Harbour] 2008-09-24 20:30 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080925151748.GD14636@34-mo7-2.acn.waw.pl>
References: <20080924183031.GA4901@34-mo7-2.acn.waw.pl>	<48DBA04B.8030501@libero.it>
	<20080925151748.GD14636@34-mo7-2.acn.waw.pl>
Message-ID: <48DBAD8E.7040600@libero.it>

Przemyslaw Czerpak wrote:
> 
> Thank you for the tests. You have a little bit bigger difference then
> David. It's ~34%. But I cannot say exactly why. It's possible that
> some memory operation have different cost in MT and ST code due to
> different startup memory consumption by MT and ST HVMs. Anyhow it's
> in acceptable range.
> 
Yes, probably differences between SMP and UNI kernels, or size of on chip cache.

Anyway, I think that in real code you don't notice such a difference.

Best regards.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From druzus at acn.waw.pl  Thu Sep 25 11:31:06 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 11:31:42 2008
Subject: [Harbour] 2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48DBAD8E.7040600@libero.it>
References: <20080924183031.GA4901@34-mo7-2.acn.waw.pl>
	<48DBA04B.8030501@libero.it>
	<20080925151748.GD14636@34-mo7-2.acn.waw.pl>
	<48DBAD8E.7040600@libero.it>
Message-ID: <20080925153106.GA2245@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, Maurilio Longo wrote:

Hi Maurilio,

> Yes, probably differences between SMP and UNI kernels, or size of on chip cache.
> Anyway, I think that in real code you don't notice such a difference.

Yes of course. This test measures only HVM performance on pure PCODE
evaluation. In real code lot of expensive C functions is used, f.e.
for database access so the difference is much smaller or even not
visible at all.
BTW what are xHarbour results on the same hardware in OS2?

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Sep 25 11:48:10 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 11:48:36 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <20080925135439.GA14636@34-mo7-2.acn.waw.pl>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
	<20080925092556.GA7193@34-mo7-2.acn.waw.pl>
	<7DC874FB-6DA0-4370-8C0B-B58E55268F01@syenar.hu>
	<20080925135439.GA14636@34-mo7-2.acn.waw.pl>
Message-ID: <D9B82B27-AB1B-4FC1-B54D-C7C7F8F671E2@syenar.hu>

Hi Przemek,

>> tests: 914, 917-920, 923-925, 959, 962-965, 968-970, 987-990.
>> Actually the new MinGW results are the right ones, but the
>> expected results seem to be screwed up, showing 705032704 instead of
>> 5000000000. Quite strange. ]
>
> Can you send the exact hbtest output?

Pls find them attached (for both 1.0.1 and 1.1.0).

Brgds,
Viktor

-------------- next part --------------
Harbour Regression Test Suite
Copyright (c) 1999-2008, http://www.harbour-project.org/
---------------------------------------------------------------------------
      Version: Harbour 1.1.0dev (Rev. 9502)
     Compiler: MinGW GNU C 4.1.2 (32 bit)
           OS: Windows XP 5.1.2600 Service Pack 3
   Date, Time: 2008.09.25 12:20:53
       Output: (stdout)
Shortcut opt.: ON
     Switches:  
===========================================================================
R No.  Line            TestCall()                               -> Result                                                                                | Expected                                                                             
---------------------------------------------------------------------------
!  596 MAIN_HVMA(0)    saArray[ 1000 ]                         
       Result: "E BASE 1132 Bound error array access A:2:A:{.[1].};N:1000 "
     Expected: "E BASE 1132 Bound error array access "
!  597 MAIN_HVMA(0)    saArray[ 1000 ] := 1                    
       Result: "E BASE 1133 Bound error array assign A:1:N:1000 "
     Expected: "E BASE 1133 Bound error array assign "
!  726 MAIN_HVMA(0)    RTSTR( 00000500000000000000 )           
       Result: " 16  500000000000000"
     Expected: " 21       500000000000000"
!  727 MAIN_HVMA(0)    RTSTR( 0500000000000000 )               
       Result: " 16  500000000000000"
     Expected: " 17   500000000000000"
!  914 MAIN_MATH(0)    Round(5000000000, 0)                    
       Result: 5000000000
     Expected: 705032704
!  917 MAIN_MATH(0)    Round(5000000000, -1)                   
       Result: 5000000000
     Expected: 705032704
!  918 MAIN_MATH(0)    Round(5000000000, -2)                   
       Result: 5000000000
     Expected: 705032704
!  919 MAIN_MATH(0)    Round(5000000000, -2)                   
       Result: 5000000000
     Expected: 705032704
!  920 MAIN_MATH(0)    Round(5000000000.129, 0)                
       Result: 5000000000
     Expected: 705032704
!  923 MAIN_MATH(0)    Round(5000000000.129, -1)               
       Result: 5000000000
     Expected: 705032704
!  924 MAIN_MATH(0)    Round(5000000000.129, -2)               
       Result: 5000000000
     Expected: 705032704
!  925 MAIN_MATH(0)    Round(5000000000.129, -2)               
       Result: 5000000000
     Expected: 705032704
!  959 MAIN_MATH(0)    Round(-5000000000, 0)                   
       Result: -5000000000
     Expected: -705032704
!  962 MAIN_MATH(0)    Round(-5000000000, -1)                  
       Result: -5000000000
     Expected: -705032704
!  963 MAIN_MATH(0)    Round(-5000000000, -2)                  
       Result: -5000000000
     Expected: -705032704
!  964 MAIN_MATH(0)    Round(-5000000000, -2)                  
       Result: -5000000000
     Expected: -705032704
!  965 MAIN_MATH(0)    Round(-5000000000.129, 0)               
       Result: -5000000000
     Expected: -705032704
!  968 MAIN_MATH(0)    Round(-5000000000.129, -1)              
       Result: -5000000000
     Expected: -705032704
!  969 MAIN_MATH(0)    Round(-5000000000.129, -2)              
       Result: -5000000000
     Expected: -705032704
!  970 MAIN_MATH(0)    Round(-5000000000.129, -2)              
       Result: -5000000000
     Expected: -705032704
!  987 MAIN_MATH(0)    Int(5000000000.90)                      
       Result: 5000000000
     Expected: 705032704
!  988 MAIN_MATH(0)    Int(-5000000000.90)                     
       Result: -5000000000
     Expected: -705032704
!  989 MAIN_MATH(0)    Int(5000000000)                         
       Result: 5000000000
     Expected: 705032704
!  990 MAIN_MATH(0)    Int(-5000000000)                        
       Result: -5000000000
     Expected: -705032704
! 1071 MAIN_MATH(0)    Str(1234567890 * 1234567890 )           
       Result: " 1524157875019052100"
     Expected: " 1524157875019052000"
! 1466 MAIN_STR(0)     AllTrim( NIL )                          
       Result: "E BASE 2022 Argument error ALLTRIM A:1:U:NIL F:S"
     Expected: "E BASE 2022 Argument error ALLTRIM F:S"
! 1467 MAIN_STR(0)     AllTrim( 100 )                          
       Result: "E BASE 2022 Argument error ALLTRIM A:1:N:100 F:S"
     Expected: "E BASE 2022 Argument error ALLTRIM F:S"
! 1539 MAIN_STR(0)     StrTran( NIL )                          
       Result: "E BASE 1126 Argument error STRTRAN A:1:U:NIL F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 1540 MAIN_STR(0)     StrTran( 100 )                          
       Result: "E BASE 1126 Argument error STRTRAN A:1:N:100 F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 1541 MAIN_STR(0)     StrTran( "AA", 1 )                      
       Result: "E BASE 1126 Argument error STRTRAN A:2:C:AA;N:1 F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 2828 MAIN_ARRAY(0)   AFill( NIL )                            
       Result: "E BASE 6004 Argument error AFILL A:1:U:NIL "
     Expected: "E BASE 6004 Argument error AFILL "
! 2872 MAIN_ARRAY(0)   ASize( NIL )                            
       Result: "E BASE 2023 Argument error ASIZE A:1:U:NIL "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2873 MAIN_ARRAY(0)   ASize( {} )                             
       Result: "E BASE 2023 Argument error ASIZE A:1:A:{.[0].} "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2874 MAIN_ARRAY(0)   ASize( ErrorNew() )                     
       Result: "E BASE 2023 Argument error ASIZE A:1:O:ERROR Object "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2875 MAIN_ARRAY(0)   ASize( NIL, 0 )                         
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:0 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2876 MAIN_ARRAY(0)   ASize( NIL, 1 )                         
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:1 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2877 MAIN_ARRAY(0)   ASize( NIL, -1 )                        
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:-1 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2899 MAIN_ARRAY(0)   Array( -1 )                             
       Result: "E BASE 1131 Bound error array dimension A:1:N:-1 "
     Expected: "E BASE 1131 Bound error array dimension "
! 2900 MAIN_ARRAY(0)   Array( 1, 0, -10 )                      
       Result: "E BASE 1131 Bound error array dimension A:3:N:1;N:0;N:-10 "
     Expected: "E BASE 1131 Bound error array dimension "
! 3026 MAIN_ARRAY(0)   TAEVSM()                                
       Result: "N10N 9N 8N 7N 6         5"
     Expected: "N10N 9N 8N 7N 6N 5N 4N 3N 2N 1         0"
! 3027 MAIN_ARRAY(0)   TASOSM1()                               
       Result: "NN 5NN 4NN 3NN 2         1{ 3 }"
     Expected: "NN 5NN 4NN 3NN 2NN 1NN 0NN 0NN 0NN 0NN 0NN 0NN 0         0{  }"
! 3028 MAIN_ARRAY(0)   TASOSM2()                               
       Result: "NN 5NN 4NN 3NN 2         1{ 3 }"
     Expected: "NN 5NN 4NN 3NN 2NN 1NN 0NN 0NN 0NN 0NN 0         0{  }"
! 4705 MAIN_LAST(0)    __MRestore( "$NOTHERE.MEM", .F. )       
       Result: "E BASE 2005 Open error $NOTHERE.MEM A:2:C:$NOTHERE.MEM;L:.F. F:DR"
     Expected: "E BASE 2005 Open error $NOTHERE.MEM F:DR"
! 4707 MAIN_LAST(0)    __MSave( BADFNAME(), "*", .T. )         
       Result: "E BASE 2006 Create error *BADNAM*.MEM A:3:C:*BADNAM*.MEM;C:*;L:.T. F:DR"
     Expected: "E BASE 2006 Create error *BADNAM*.MEM F:DR"
===========================================================================
Test calls passed:       4663 ( 99.06 % )
Test calls failed:         44 ( 0.94 % )
                   ----------
            Total:       4707 ( Time elapsed: 0.27 seconds )

WARNING ! Failures detected
-------------- next part --------------
Harbour Build Info
---------------------------
Version: Harbour 1.1.0dev (Rev. 9502)
PCode version: 0.2
Compiler: MinGW GNU C 4.1.2 (32 bit)
Platform: Windows XP 5.1.2600 Service Pack 3

Built on: Sep 25 2008 12:08:27
Last ChangeLog entry: 2008-09-25 11:26 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
ChangeLog SVN version: ChangeLog 9502 2008-09-25 09:33:06Z vszakats
Extra Harbour compiler switches: -l -gc3
Extra C compiler switches: -O3 -fomit-frame-pointer -DHB_NO_DEBUG -DHB_FM_STATISTICS_OFF -DHB_FM_DL_ALLOC -DHB_USE_TLS
Extra linker switches: -s
Other build settings: (C mode) 

Clipper 5.3b compatible extensions: yes
Clipper 5.2e/5.3b compatible undocumented: yes
Clipper 5.2e/5.3b strict compatibility: no
Xbase++ compatible extensions: yes
FlagShip compatible extensions: yes
Visual Objects compatible extensions: no
FoxPro compatible extensions: no
dBase compatible extensions: no
CLIP compatible extensions: no
Non-portable Harbour extensions: no
Profiler: off
Memory tracing and statistics: off
Maximum symbol name length: 63
---------------------------
-------------- next part --------------
Harbour Regression Test Suite
Copyright (c) 1999-2008, http://www.harbour-project.org/
---------------------------------------------------------------------------
      Version: Harbour 1.0.1 Intl. (Rev. 9429)
     Compiler: MinGW GNU C 4.1.2 (32 bit)
           OS: Windows XP 5.1.2600 Service Pack 3
   Date, Time: 2008.09.25 17:43:03
       Output: (stdout)
Shortcut opt.: ON
     Switches:  
===========================================================================
R No.  Line            TestCall()                               -> Result                                                                                | Expected                                                                             
---------------------------------------------------------------------------
!  596 MAIN_HVMA(0)    saArray[ 1000 ]                         
       Result: "E BASE 1132 Bound error array access A:2:A:{.[1].};N:1000 "
     Expected: "E BASE 1132 Bound error array access "
!  597 MAIN_HVMA(0)    saArray[ 1000 ] := 1                    
       Result: "E BASE 1133 Bound error array assign A:1:N:1000 "
     Expected: "E BASE 1133 Bound error array assign "
!  726 MAIN_HVMA(0)    RTSTR( 00000500000000000000 )           
       Result: " 16  500000000000000"
     Expected: " 21       500000000000000"
!  727 MAIN_HVMA(0)    RTSTR( 0500000000000000 )               
       Result: " 16  500000000000000"
     Expected: " 17   500000000000000"
!  914 MAIN_MATH(0)    Round(5000000000, 0)                    
       Result: 5000000000
     Expected: 705032704
!  917 MAIN_MATH(0)    Round(5000000000, -1)                   
       Result: 5000000000
     Expected: 705032704
!  918 MAIN_MATH(0)    Round(5000000000, -2)                   
       Result: 5000000000
     Expected: 705032704
!  919 MAIN_MATH(0)    Round(5000000000, -2)                   
       Result: 5000000000
     Expected: 705032704
!  920 MAIN_MATH(0)    Round(5000000000.129, 0)                
       Result: 5000000000
     Expected: 705032704
!  923 MAIN_MATH(0)    Round(5000000000.129, -1)               
       Result: 5000000000
     Expected: 705032704
!  924 MAIN_MATH(0)    Round(5000000000.129, -2)               
       Result: 5000000000
     Expected: 705032704
!  925 MAIN_MATH(0)    Round(5000000000.129, -2)               
       Result: 5000000000
     Expected: 705032704
!  959 MAIN_MATH(0)    Round(-5000000000, 0)                   
       Result: -5000000000
     Expected: -705032704
!  962 MAIN_MATH(0)    Round(-5000000000, -1)                  
       Result: -5000000000
     Expected: -705032704
!  963 MAIN_MATH(0)    Round(-5000000000, -2)                  
       Result: -5000000000
     Expected: -705032704
!  964 MAIN_MATH(0)    Round(-5000000000, -2)                  
       Result: -5000000000
     Expected: -705032704
!  965 MAIN_MATH(0)    Round(-5000000000.129, 0)               
       Result: -5000000000
     Expected: -705032704
!  968 MAIN_MATH(0)    Round(-5000000000.129, -1)              
       Result: -5000000000
     Expected: -705032704
!  969 MAIN_MATH(0)    Round(-5000000000.129, -2)              
       Result: -5000000000
     Expected: -705032704
!  970 MAIN_MATH(0)    Round(-5000000000.129, -2)              
       Result: -5000000000
     Expected: -705032704
!  987 MAIN_MATH(0)    Int(5000000000.90)                      
       Result: 5000000000
     Expected: 705032704
!  988 MAIN_MATH(0)    Int(-5000000000.90)                     
       Result: -5000000000
     Expected: -705032704
!  989 MAIN_MATH(0)    Int(5000000000)                         
       Result: 5000000000
     Expected: 705032704
!  990 MAIN_MATH(0)    Int(-5000000000)                        
       Result: -5000000000
     Expected: -705032704
! 1071 MAIN_MATH(0)    Str(1234567890 * 1234567890 )           
       Result: " 1524157875019052100"
     Expected: " 1524157875019052000"
! 1466 MAIN_STR(0)     AllTrim( NIL )                          
       Result: "E BASE 2022 Argument error ALLTRIM A:1:U:NIL F:S"
     Expected: "E BASE 2022 Argument error ALLTRIM F:S"
! 1467 MAIN_STR(0)     AllTrim( 100 )                          
       Result: "E BASE 2022 Argument error ALLTRIM A:1:N:100 F:S"
     Expected: "E BASE 2022 Argument error ALLTRIM F:S"
! 1539 MAIN_STR(0)     StrTran( NIL )                          
       Result: "E BASE 1126 Argument error STRTRAN A:1:U:NIL F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 1540 MAIN_STR(0)     StrTran( 100 )                          
       Result: "E BASE 1126 Argument error STRTRAN A:1:N:100 F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 1541 MAIN_STR(0)     StrTran( "AA", 1 )                      
       Result: "E BASE 1126 Argument error STRTRAN A:2:C:AA;N:1 F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 2828 MAIN_ARRAY(0)   AFill( NIL )                            
       Result: "E BASE 6004 Argument error AFILL A:1:U:NIL "
     Expected: "E BASE 6004 Argument error AFILL "
! 2872 MAIN_ARRAY(0)   ASize( NIL )                            
       Result: "E BASE 2023 Argument error ASIZE A:1:U:NIL "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2873 MAIN_ARRAY(0)   ASize( {} )                             
       Result: "E BASE 2023 Argument error ASIZE A:1:A:{.[0].} "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2874 MAIN_ARRAY(0)   ASize( ErrorNew() )                     
       Result: "E BASE 2023 Argument error ASIZE A:1:O:ERROR Object "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2875 MAIN_ARRAY(0)   ASize( NIL, 0 )                         
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:0 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2876 MAIN_ARRAY(0)   ASize( NIL, 1 )                         
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:1 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2877 MAIN_ARRAY(0)   ASize( NIL, -1 )                        
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:-1 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2899 MAIN_ARRAY(0)   Array( -1 )                             
       Result: "E BASE 1131 Bound error array dimension A:1:N:-1 "
     Expected: "E BASE 1131 Bound error array dimension "
! 2900 MAIN_ARRAY(0)   Array( 1, 0, -10 )                      
       Result: "E BASE 1131 Bound error array dimension A:3:N:1;N:0;N:-10 "
     Expected: "E BASE 1131 Bound error array dimension "
! 3026 MAIN_ARRAY(0)   TAEVSM()                                
       Result: "N10N 9N 8N 7N 6         5"
     Expected: "N10N 9N 8N 7N 6N 5N 4N 3N 2N 1         0"
! 3027 MAIN_ARRAY(0)   TASOSM1()                               
       Result: "NN 5NN 4NN 3NN 2         1{ 3 }"
     Expected: "NN 5NN 4NN 3NN 2NN 1NN 0NN 0NN 0NN 0NN 0NN 0NN 0         0{  }"
! 3028 MAIN_ARRAY(0)   TASOSM2()                               
       Result: "NN 5NN 4NN 3NN 2         1{ 3 }"
     Expected: "NN 5NN 4NN 3NN 2NN 1NN 0NN 0NN 0NN 0NN 0         0{  }"
! 4705 MAIN_LAST(0)    __MRestore( "$NOTHERE.MEM", .F. )       
       Result: "E BASE 2005 Open error $NOTHERE.MEM A:2:C:$NOTHERE.MEM;L:.F. F:DR"
     Expected: "E BASE 2005 Open error $NOTHERE.MEM F:DR"
! 4707 MAIN_LAST(0)    __MSave( BADFNAME(), "*", .T. )         
       Result: "E BASE 2006 Create error *BADNAM*.MEM A:3:C:*BADNAM*.MEM;C:*;L:.T. F:DR"
     Expected: "E BASE 2006 Create error *BADNAM*.MEM F:DR"
===========================================================================
Test calls passed:       4663 ( 99.06 % )
Test calls failed:         44 ( 0.94 % )
                   ----------
            Total:       4707 ( Time elapsed: 0.26 seconds )

WARNING ! Failures detected
-------------- next part --------------
Harbour Build Info
---------------------------
Version: Harbour 1.0.1 Intl. (Rev. 9429)
PCode version: 0.2
Compiler: MinGW GNU C 4.1.2 (32 bit)
Platform: Windows XP 5.1.2600 Service Pack 3

Built on: Sep 25 2008 11:36:32
Last ChangeLog entry: 2008-09-17 18:04 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
ChangeLog SVN version: ChangeLog 9429 2008-09-17 16:07:27Z vszakats
Extra Harbour compiler switches: -l -gc3
Extra C compiler switches: -O3 -fomit-frame-pointer -DHB_NO_DEBUG -DHB_NO_TRACE
Extra linker switches: -s
Other build settings: (C mode)

Clipper 5.3b compatible extensions: yes
Clipper 5.2e/5.3b compatible undocumented: yes
Clipper 5.2e/5.3b strict compatibility: no
Xbase++ compatible extensions: yes
FlagShip compatible extensions: yes
Visual Objects compatible extensions: no
FoxPro compatible extensions: no
dBase compatible extensions: no
CLIP compatible extensions: no
Non-portable Harbour extensions: no
Profiler: off
Memory tracing and statistics: off
Maximum symbol name length: 63
---------------------------
From druzus at acn.waw.pl  Thu Sep 25 12:52:39 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 12:53:16 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <20080925092556.GA7193@34-mo7-2.acn.waw.pl>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
	<20080925092556.GA7193@34-mo7-2.acn.waw.pl>
Message-ID: <20080925165239.GA14100@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, Przemyslaw Czerpak wrote:

Hi All,

> The cost of TLS access is strictly compiler/OS dependent. I've
> just make interesting experiment to compare the code of using
> stack pointer to dynamically allocated stack instead of statick
> stack address in ST programs.
> I made very simple modificatrion. In hbstack.c for ST mode I changed:
>       extern HB_STACK hb_stack;
> to:
>       extern PHB_STACK hb_stack_ptr;
> #     define hb_stack      ( * hb_stack_ptr )
> and in estack.c:
>    #  if defined( HB_STACK_MACROS )
>          HB_STACK hb_stack;
>    #  else
>          static HB_STACK hb_stack;
>    #  endif
> to:
>       HB_STACK _hb_stack_;
>       PHB_STACK hb_stack_ptr = &_hb_stack_;

An now I compared BCC-5.5 and GCC-4.3.1 assembler code generated for
such modified HVM and this simple code:

   void func( void )
   {
      hb_stackPush();
      hb_stackPop();
   }

BCC with -4 -5 -6 -O2 gives:
         ;	
         ;	void func( void )
         ;	{
         ;	   hb_stackPush();
         ;	
      @3:
      	mov       eax,dword ptr [_hb_stack_ptr]
      	add       dword ptr [eax+4],4
      	mov       edx,dword ptr [eax+4]
      	mov       ecx,dword ptr [_hb_stack_ptr]
      	cmp       edx,dword ptr [ecx+8]
      	jne       short @4
      	call      _hb_stackIncrease
         ;	
         ;	   hb_stackPop();
         ;	
      @4:
      	mov       eax,dword ptr [_hb_stack_ptr]
      	sub       dword ptr [eax+4],4
      	mov       edx,dword ptr [_hb_stack_ptr]
      	mov       ecx,dword ptr [edx+4]
      	mov       eax,dword ptr [ecx]
      	test      dword ptr [eax],46085
      	je        short @5
      	push      eax
      	call      _hb_itemClear
      	pop       ecx
         ;	
         ;	}
         ;	
      @5:
      @6:
      	ret 

Please note that _hb_stack_ptr is accessed always 4 times.
In my GCC final code looks for -O3 is:
      func:
      	pushl	%ebp
      	movl	%esp, %ebp
      	subl	$8, %esp
      	movl	hb_stack_ptr, %ecx
      	movl	4(%ecx), %eax
      	addl	$4, %eax
      	cmpl	8(%ecx), %eax
      	movl	%eax, 4(%ecx)
      	je	.L6
      .L2:
      	movl	4(%ecx), %edx
      	leal	-4(%edx), %eax
      	movl	%eax, 4(%ecx)
      	movl	-4(%edx), %eax
      	testw	$-19451, (%eax)
      	jne	.L7
      	leave
      	ret
      .L7:
      	movl	%eax, (%esp)
      	call	hb_itemClear
      	leave
      	ret
      .L6:
      	call	hb_stackIncrease
      	movl	hb_stack_ptr, %ecx
      	jmp	.L2

It access hb_stack_ptr only _ONCE_ during normal code execution.
The second hb_stack_ptr is used when external function like
hb_stackIncrease() have to be called (in practice never or few
times in whole application live).
And this explains the speed difference. Which such optimization
the overhead in my builds is minimal when TLS native variables
are used. GCC was always optimized to reduce memory access when
BCC seems to be hardcoded for x86 machines where the cost of memory
operation was relatively small in the past and now data CPU caches
reduce the overhead but it's still not friendly code for CPU
optimization logic.
It also shows why TLS cost so much in BCC. Four calls instead
of one in my GCC in such simple example.

best regards,
Przemek
From maurilio.longo at libero.it  Thu Sep 25 13:01:34 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Sep 25 13:01:43 2008
Subject: [Harbour] 2008-09-24 20:30 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080925153106.GA2245@34-mo7-2.acn.waw.pl>
References: <20080924183031.GA4901@34-mo7-2.acn.waw.pl>	<48DBA04B.8030501@libero.it>	<20080925151748.GD14636@34-mo7-2.acn.waw.pl>	<48DBAD8E.7040600@libero.it>
	<20080925153106.GA2245@34-mo7-2.acn.waw.pl>
Message-ID: <48DBC3EE.10600@libero.it>

Ok, here they are,

same hardware, xharbour at $Id: ChangeLog,v 1.6182 2008/08/01 09:41:14
marchuet Exp $

MT

total application time:                             214.79
total real time:                                    214.79

ST

total application time:                              95.18
total real time:                                     95.18

I attach full results.

Best regards.

Maurilio.


-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: mt.log
Type: application/x-log
Size: 3176 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080925/663bfe2b/mt.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: st.log
Type: application/x-log
Size: 3171 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080925/663bfe2b/st.bin
From druzus at acn.waw.pl  Thu Sep 25 13:22:22 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 13:22:58 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <D9B82B27-AB1B-4FC1-B54D-C7C7F8F671E2@syenar.hu>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
	<20080925092556.GA7193@34-mo7-2.acn.waw.pl>
	<7DC874FB-6DA0-4370-8C0B-B58E55268F01@syenar.hu>
	<20080925135439.GA14636@34-mo7-2.acn.waw.pl>
	<D9B82B27-AB1B-4FC1-B54D-C7C7F8F671E2@syenar.hu>
Message-ID: <20080925172222.GB14100@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, Szakáts Viktor wrote:

Hi Viktor,

>>> tests: 914, 917-920, 923-925, 959, 962-965, 968-970, 987-990.
>>> Actually the new MinGW results are the right ones, but the
>>> expected results seem to be screwed up, showing 705032704 instead of
>>> 5000000000. Quite strange. ]
>> Can you send the exact hbtest output?

!  914 MAIN_MATH(0)    Round(5000000000, 0)                    
       Result: 5000000000
     Expected: 705032704

This is very serious problem.
Just try:
   proc main()
      ? 5000000000
   return

It means that during compilation 5000000000 in source code
is stripped to 32bits. Please carefully check your build settings.
I cannot replicate it in any of my C compilers and I rether do
not expect that it will be wrong. It's my very old code perfectly
working for years in Harbour and xHarbour. For me it looks like sth
seriously wrong with LONGLONG numbers in C compiler or side effects
of some experiments with macros or definitions we are using, f.e.
HB_LONG type mapped to LONG without updating corresponding macros or
HB_LONG_LONG_OFF used to compile only part of Harbour code, f.e.
only compiler or only HVM/RTL. Or some C different compiler switches
use to compile only part of Harbour code which may interact with size
or alignment of data structures or ABI.
Please once again carefully check you environment and try to replicate
these results with _FULL_ clean build.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Thu Sep 25 13:43:08 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep 25 13:43:14 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <20080925172222.GB14100@34-mo7-2.acn.waw.pl>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
	<20080925092556.GA7193@34-mo7-2.acn.waw.pl>
	<7DC874FB-6DA0-4370-8C0B-B58E55268F01@syenar.hu>
	<20080925135439.GA14636@34-mo7-2.acn.waw.pl>
	<D9B82B27-AB1B-4FC1-B54D-C7C7F8F671E2@syenar.hu>
	<20080925172222.GB14100@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809251043j7304272ch97ddc2eab688d08c@mail.gmail.com>

On Thu, Sep 25, 2008 at 7:22 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> This is very serious problem.
> Just try:
>   proc main()
>      ? 5000000000
>   return

I don't know if it helps but I've just tried with current official mingw 3.4.5:

$ gcc -v
Reading specs from c:/mingw/bin/../lib/gcc/mingw32/3.4.5/specs
Configured with: ../gcc-3.4.5/configure --with-gcc --with-gnu-ld
--with-gnu-as --host=mingw32 --target=mingw32 --prefix=/mingw
--enable-threads --disable-nls
--enable-languages=c,c++,f77,ada,objc,java --disable-win32-registry
--disable-shared --enable-sjlj-exceptions --enable-libgcj
--disable-java-awt --without-x --enable-java-gc=boehm
--disable-libgcj-debug --enable-interpreter
--enable-hash-synchronization --enable-libstdcxx-debug
Thread model: win32
gcc version 3.4.5 (mingw special)

and I got the right result.

Also hbtest.exe behaves correctly.

best regards,
Lorenzo
From druzus at acn.waw.pl  Thu Sep 25 13:53:34 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 13:54:11 2008
Subject: [Harbour] 2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48DBC3EE.10600@libero.it>
References: <20080924183031.GA4901@34-mo7-2.acn.waw.pl>
	<48DBA04B.8030501@libero.it>
	<20080925151748.GD14636@34-mo7-2.acn.waw.pl>
	<48DBAD8E.7040600@libero.it>
	<20080925153106.GA2245@34-mo7-2.acn.waw.pl>
	<48DBC3EE.10600@libero.it>
Message-ID: <20080925175334.GA11391@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, Maurilio Longo wrote:

Hi Maurilio,

> Ok, here they are,
> same hardware, xharbour at $Id: ChangeLog,v 1.6182 2008/08/01 09:41:14
> marchuet Exp $
> MT
> total application time:                             214.79
> ST
> total application time:                              95.18

I expected worse results then Harbour ones but I didn't expect such
big difference and such big MT overhead. xHarbour does not even use
protection for complex variable reference counters in OS2 builds -
Walter implemented them only for MS-Windows.
In my Linux box the difference is smaller though I'm using a little
bit modified xHarbour version with working native TLS support. I'll
made tests with current clean CVS.

best regards,
Przemek
From bedipritpal at hotmail.com  Thu Sep 25 14:06:52 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Sep 25 14:06:59 2008
Subject: Re[Harbour] quest to share MT knowledge on Xbase++ NG
In-Reply-To: <48D2698D.80206@dbtopas.lt>
References: <48D2698D.80206@dbtopas.lt>
Message-ID: <19675252.post@talk.nabble.com>


Today I have posted this message on Xbase++ NG:

****************************************
Hello Everybody

Harbour developers are concentrating on Multi-Threading
at the moment and have implemented the fairly advanced,
optimized, and stable modal.

As Xbase++ is the pioneer and is the only working MT modal
in xbase world, development team has unanimously agreed to follow
XBase++ MT modal in Harbour too.

Because this is a design-time phase of MT implemention in
Harbour, development team needs the expertise of Xbase++ community
to share their experiences in any way related to MT applications.
For example, it will be interesting to have a knowledgebase
about features and shortcomings of Xbase++ MT modal.

I, personally and on bahalf of the Clipper community,
request you to participate in the discussion going on at
http://www.nabble.com/A-few-questions-about-MT-to19555409.html .
You never know a small comment of yours may change the MT
concept.

Hope to see your posts there.

Regards
Pritpal Bedi
****************************************
-- 
View this message in context: http://www.nabble.com/A-few-questions-about-MT-tp19555409p19675252.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Thu Sep 25 14:19:14 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 14:19:28 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <20080925172222.GB14100@34-mo7-2.acn.waw.pl>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
	<20080925092556.GA7193@34-mo7-2.acn.waw.pl>
	<7DC874FB-6DA0-4370-8C0B-B58E55268F01@syenar.hu>
	<20080925135439.GA14636@34-mo7-2.acn.waw.pl>
	<D9B82B27-AB1B-4FC1-B54D-C7C7F8F671E2@syenar.hu>
	<20080925172222.GB14100@34-mo7-2.acn.waw.pl>
Message-ID: <0AC562C0-A5CB-4767-B2F8-7DB1E5AECA5C@syenar.hu>

Hi Przemek,

After some experimenting it looks like -gc3 is the culprit.
This can be easily seen even by using harbour.exe from the
official MinGW binary package.

You short sample program, compiled with -gc3 will produce
this line:
---
hb_xvmPushLongLong( HB_LL( 705032704 ) );
---

Brgds,
Viktor

On 2008.09.25., at 19:22, Przemyslaw Czerpak wrote:

> On Thu, 25 Sep 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>>>> tests: 914, 917-920, 923-925, 959, 962-965, 968-970, 987-990.
>>>> Actually the new MinGW results are the right ones, but the
>>>> expected results seem to be screwed up, showing 705032704 instead  
>>>> of
>>>> 5000000000. Quite strange. ]
>>> Can you send the exact hbtest output?
>
> !  914 MAIN_MATH(0)    Round(5000000000, 0)
>       Result: 5000000000
>     Expected: 705032704
>
> This is very serious problem.
> Just try:
>   proc main()
>      ? 5000000000
>   return
>
> It means that during compilation 5000000000 in source code
> is stripped to 32bits. Please carefully check your build settings.
> I cannot replicate it in any of my C compilers and I rether do
> not expect that it will be wrong. It's my very old code perfectly
> working for years in Harbour and xHarbour. For me it looks like sth
> seriously wrong with LONGLONG numbers in C compiler or side effects
> of some experiments with macros or definitions we are using, f.e.
> HB_LONG type mapped to LONG without updating corresponding macros or
> HB_LONG_LONG_OFF used to compile only part of Harbour code, f.e.
> only compiler or only HVM/RTL. Or some C different compiler switches
> use to compile only part of Harbour code which may interact with size
> or alignment of data structures or ABI.
> Please once again carefully check you environment and try to replicate
> these results with _FULL_ clean build.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Thu Sep 25 14:28:34 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 14:29:10 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <20080925165239.GA14100@34-mo7-2.acn.waw.pl>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
	<20080925092556.GA7193@34-mo7-2.acn.waw.pl>
	<20080925165239.GA14100@34-mo7-2.acn.waw.pl>
Message-ID: <20080925182834.GA15966@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, Przemyslaw Czerpak wrote:
> In my GCC final code looks for -O3 is:
>       func:
>       	pushl	%ebp
>       	movl	%esp, %ebp
>       	subl	$8, %esp
>       	movl	hb_stack_ptr, %ecx
>       	movl	4(%ecx), %eax
>       	addl	$4, %eax
>       	cmpl	8(%ecx), %eax
>       	movl	%eax, 4(%ecx)
>       	je	.L6
>       .L2:
>       	movl	4(%ecx), %edx
>       	leal	-4(%edx), %eax
>       	movl	%eax, 4(%ecx)
>       	movl	-4(%edx), %eax
>       	testw	$-19451, (%eax)
>       	jne	.L7
>       	leave
>       	ret
>       .L7:
>       	movl	%eax, (%esp)
>       	call	hb_itemClear
>       	leave
>       	ret
>       .L6:
>       	call	hb_stackIncrease
>       	movl	hb_stack_ptr, %ecx
>       	jmp	.L2
> 
> It access hb_stack_ptr only _ONCE_ during normal code execution.

And next hint. I've just tried the same code but in MT mode with real
native TLS access. GCC gives:

      func2:
      	pushl	%ebp
      	movl	%esp, %ebp
      	subl	$24, %esp
      	movl	%ebx, -8(%ebp)
      	movl	hb_stack_ptr@INDNTPOFF, %ebx
      	movl	%esi, -4(%ebp)
      	movl	%gs:0, %esi
      	movl	(%esi,%ebx), %edx
      	movl	(%edx), %eax
      	addl	$4, %eax
      	cmpl	4(%edx), %eax
      	movl	%eax, (%edx)
      	je	.L6
      .L2:
      	movl	(%esi,%ebx), %eax
      	movl	(%eax), %ecx
      	leal	-4(%ecx), %edx
      	movl	%edx, (%eax)
      	movl	-4(%ecx), %eax
      	testw	$-19451, (%eax)
      	je	.L4
      	movl	%eax, (%esp)
      	call	hb_itemClear
      .L4:
      	movl	-8(%ebp), %ebx
      	movl	-4(%ebp), %esi
      	movl	%ebp, %esp
      	popl	%ebp
      	ret
      .L6:
      	call	hb_stackIncrease
      	jmp	.L2

It stores TLS pointer inside ESI[EBX] registers and then simply reuses it
so even in very complicated functions it access TLS only once.
It means that using HB_STACK_TLS_PRELOAD reduces only indirect addressing
overhead and ESI register saveing/restoring:

      func2:
      	pushl	%ebp
      	movl	%gs:0, %eax
      	movl	%esp, %ebp
      	pushl	%ebx
      	subl	$4, %esp
      	movl	hb_stack_ptr@INDNTPOFF, %edx
      	movl	(%eax,%edx), %ebx
      	movl	(%ebx), %edx
      	addl	$4, %edx
      	cmpl	4(%ebx), %edx
      	movl	%edx, (%ebx)
      	je	.L6
      .L2:
      	leal	-4(%edx), %eax
      	movl	%eax, (%ebx)
      	movl	-4(%edx), %eax
      	testw	$-19451, (%eax)
      	je	.L4
      	movl	%eax, (%esp)
      	call	hb_itemClear
      .L4:
      	addl	$4, %esp
      	popl	%ebx
      	popl	%ebp
      	ret
      .L6:
      	call	hb_stackIncrease
      	movl	(%ebx), %edx
      	jmp	.L2

Now it's clear why the results are such different.
Each compiler which will not make such optimization will give
noticeable slower code for MT mode.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Sep 25 14:40:15 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 14:40:50 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <0AC562C0-A5CB-4767-B2F8-7DB1E5AECA5C@syenar.hu>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
	<20080925092556.GA7193@34-mo7-2.acn.waw.pl>
	<7DC874FB-6DA0-4370-8C0B-B58E55268F01@syenar.hu>
	<20080925135439.GA14636@34-mo7-2.acn.waw.pl>
	<D9B82B27-AB1B-4FC1-B54D-C7C7F8F671E2@syenar.hu>
	<20080925172222.GB14100@34-mo7-2.acn.waw.pl>
	<0AC562C0-A5CB-4767-B2F8-7DB1E5AECA5C@syenar.hu>
Message-ID: <20080925184015.GB15966@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, Szakáts Viktor wrote:

Hi Viktor,

> After some experimenting it looks like -gc3 is the culprit.

I expected that it may be related to -gc3 switch and before
I wrote this message rebuild Harbour with -gc3 using Linux GCC
and cross MingGW. Everything works as expected.

> This can be easily seen even by using harbour.exe from the
> official MinGW binary package.
> You short sample program, compiled with -gc3 will produce
> this line:
> ---
> hb_xvmPushLongLong( HB_LL( 705032704 ) );
> ---

But for me it's:
   hb_xvmPushLongLong( HB_LL( 5000000000 ) );

Can you check in you MinGW the folowing code:
   #include <stdio.h>
   int main( void )
   {
      printf( "TEST NUMER = [%lld]\n", 5000000000LL );
      return 0;
   }

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Sep 25 14:58:18 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 14:58:32 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <20080925184015.GB15966@34-mo7-2.acn.waw.pl>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
	<20080925092556.GA7193@34-mo7-2.acn.waw.pl>
	<7DC874FB-6DA0-4370-8C0B-B58E55268F01@syenar.hu>
	<20080925135439.GA14636@34-mo7-2.acn.waw.pl>
	<D9B82B27-AB1B-4FC1-B54D-C7C7F8F671E2@syenar.hu>
	<20080925172222.GB14100@34-mo7-2.acn.waw.pl>
	<0AC562C0-A5CB-4767-B2F8-7DB1E5AECA5C@syenar.hu>
	<20080925184015.GB15966@34-mo7-2.acn.waw.pl>
Message-ID: <AF720B6D-500C-4CBF-A8FE-913F852CDA49@syenar.hu>

Hi Przemek,

> But for me it's:
>   hb_xvmPushLongLong( HB_LL( 5000000000 ) );
>
> Can you check in you MinGW the folowing code:
>   #include <stdio.h>
>   int main( void )
>   {
>      printf( "TEST NUMER = [%lld]\n", 5000000000LL );
>      return 0;
>   }

Gives me:
TEST NUMBER = [705032704]

In MinGW 3.4.5 (official - tested in two different machines),
4.1.2 (official), 4.3.2 (unofficial).

gcc -v outputs below:
---
Reading specs from C:/devl/MinGW-345/bin/../lib/gcc/mingw32/3.4.5/specs
Configured with: ../gcc-3.4.5-20060117-3/configure --with-gcc --with- 
gnu-ld --with-gnu-as --host=mingw32 --target=mingw32 --prefix=/mingw -- 
enable-threads --disable-nls --enable-languages=c,c+ 
+,f77,ada,objc,java --disable-win32-registry --disable-shared --enable- 
sjlj-exceptions --enable-libgcj --disable-java-awt --without-x -- 
enable-java-gc=boehm --disable-libgcj-debug --enable-interpreter -- 
enable-hash-synchronization --enable-libstdcxx-debug
Thread model: win32
gcc version 3.4.5 (mingw-vista special r3)
---
Using built-in specs.
Target: i686-pc-mingw32
Configured with: ../src/configure --prefix=c:/temp/gcc/dest --enable- 
languages=c,c++ --disable-shared --enable-threads=win32 --disable- 
win32-registry --disable-checking --disable-nls --enable-sjlj- 
exceptions --disable-libstdcxx-pch
Thread model: win32
gcc version 4.1.2
---
Using built-in specs.
Target: mingw32
Configured with: ../gcc-4.3.2/configure --prefix=/mingw -- 
build=mingw32 --enable-languages=c,ada,c++,fortran,objc,obj-c++ --with- 
bugurl=http://www.tdragon.net/recentgcc/bugs.php --disable-nls -- 
disable-win32-registry --enable-libgomp --disable-werror --enable- 
threads --disable-symvers --enable-cxx-flags='-fno-function-sections - 
fno-data-sections' --enable-fully-dynamic-string --enable-version- 
specific-runtime-libs --enable-sjlj-exceptions --with- 
pkgversion='4.3.2-tdm-1 for MinGW'
Thread model: win32
gcc version 4.3.2 (4.3.2-tdm-1 for MinGW)
---

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep 25 15:38:37 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 15:38:51 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <AF720B6D-500C-4CBF-A8FE-913F852CDA49@syenar.hu>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
	<20080925092556.GA7193@34-mo7-2.acn.waw.pl>
	<7DC874FB-6DA0-4370-8C0B-B58E55268F01@syenar.hu>
	<20080925135439.GA14636@34-mo7-2.acn.waw.pl>
	<D9B82B27-AB1B-4FC1-B54D-C7C7F8F671E2@syenar.hu>
	<20080925172222.GB14100@34-mo7-2.acn.waw.pl>
	<0AC562C0-A5CB-4767-B2F8-7DB1E5AECA5C@syenar.hu>
	<20080925184015.GB15966@34-mo7-2.acn.waw.pl>
	<AF720B6D-500C-4CBF-A8FE-913F852CDA49@syenar.hu>
Message-ID: <ED87CF8C-0DF8-44D7-A0F5-CF5A6864B2B6@syenar.hu>

Same code copied to OSX (Intel), compiled with default gcc 4.0.1
gives the right result:
---
TEST NUMBER = [5000000000]
---

Brgds,
Viktor

On 2008.09.25., at 20:58, Szak?ts Viktor wrote:

> Hi Przemek,
>
>> But for me it's:
>>  hb_xvmPushLongLong( HB_LL( 5000000000 ) );
>>
>> Can you check in you MinGW the folowing code:
>>  #include <stdio.h>
>>  int main( void )
>>  {
>>     printf( "TEST NUMER = [%lld]\n", 5000000000LL );
>>     return 0;
>>  }
>
> Gives me:
> TEST NUMBER = [705032704]
>
> In MinGW 3.4.5 (official - tested in two different machines),
> 4.1.2 (official), 4.3.2 (unofficial).
>
> gcc -v outputs below:
> ---
> Reading specs from C:/devl/MinGW-345/bin/../lib/gcc/mingw32/3.4.5/ 
> specs
> Configured with: ../gcc-3.4.5-20060117-3/configure --with-gcc --with- 
> gnu-ld --with-gnu-as --host=mingw32 --target=mingw32 --prefix=/mingw  
> --enable-threads --disable-nls --enable-languages=c,c+ 
> +,f77,ada,objc,java --disable-win32-registry --disable-shared -- 
> enable-sjlj-exceptions --enable-libgcj --disable-java-awt --without- 
> x --enable-java-gc=boehm --disable-libgcj-debug --enable-interpreter  
> --enable-hash-synchronization --enable-libstdcxx-debug
> Thread model: win32
> gcc version 3.4.5 (mingw-vista special r3)
> ---
> Using built-in specs.
> Target: i686-pc-mingw32
> Configured with: ../src/configure --prefix=c:/temp/gcc/dest --enable- 
> languages=c,c++ --disable-shared --enable-threads=win32 --disable- 
> win32-registry --disable-checking --disable-nls --enable-sjlj- 
> exceptions --disable-libstdcxx-pch
> Thread model: win32
> gcc version 4.1.2
> ---
> Using built-in specs.
> Target: mingw32
> Configured with: ../gcc-4.3.2/configure --prefix=/mingw -- 
> build=mingw32 --enable-languages=c,ada,c++,fortran,objc,obj-c++ -- 
> with-bugurl=http://www.tdragon.net/recentgcc/bugs.php --disable-nls  
> --disable-win32-registry --enable-libgomp --disable-werror --enable- 
> threads --disable-symvers --enable-cxx-flags='-fno-function-sections  
> -fno-data-sections' --enable-fully-dynamic-string --enable-version- 
> specific-runtime-libs --enable-sjlj-exceptions --with- 
> pkgversion='4.3.2-tdm-1 for MinGW'
> Thread model: win32
> gcc version 4.3.2 (4.3.2-tdm-1 for MinGW)
> ---
>
> Brgds,
> Viktor
>

From harbour.01 at syenar.hu  Thu Sep 25 15:44:05 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 15:44:15 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <ED87CF8C-0DF8-44D7-A0F5-CF5A6864B2B6@syenar.hu>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
	<20080925092556.GA7193@34-mo7-2.acn.waw.pl>
	<7DC874FB-6DA0-4370-8C0B-B58E55268F01@syenar.hu>
	<20080925135439.GA14636@34-mo7-2.acn.waw.pl>
	<D9B82B27-AB1B-4FC1-B54D-C7C7F8F671E2@syenar.hu>
	<20080925172222.GB14100@34-mo7-2.acn.waw.pl>
	<0AC562C0-A5CB-4767-B2F8-7DB1E5AECA5C@syenar.hu>
	<20080925184015.GB15966@34-mo7-2.acn.waw.pl>
	<AF720B6D-500C-4CBF-A8FE-913F852CDA49@syenar.hu>
	<ED87CF8C-0DF8-44D7-A0F5-CF5A6864B2B6@syenar.hu>
Message-ID: <5674B0E7-665C-4066-AA29-879D4421EC06@syenar.hu>

Hi Przemek,

I've found some pages listing %lld as one the significant
incompatibilities of MinGW compared to Linux GCC.

In MinGW the equivalent formatting seems to be:
"%I64d" which is also claimed to be the Microsoft C compatible syntax.

Testing with %I64d shows correct results in 3.4.5 and 4.3.2.

Brgds,
Viktor

On 2008.09.25., at 21:38, Szak?ts Viktor wrote:

> Same code copied to OSX (Intel), compiled with default gcc 4.0.1
> gives the right result:
> ---
> TEST NUMBER = [5000000000]
> ---
>
> Brgds,
> Viktor
>
> On 2008.09.25., at 20:58, Szak?ts Viktor wrote:
>
>> Hi Przemek,
>>
>>> But for me it's:
>>> hb_xvmPushLongLong( HB_LL( 5000000000 ) );
>>>
>>> Can you check in you MinGW the folowing code:
>>> #include <stdio.h>
>>> int main( void )
>>> {
>>>    printf( "TEST NUMER = [%lld]\n", 5000000000LL );
>>>    return 0;
>>> }
>>
>> Gives me:
>> TEST NUMBER = [705032704]
>>
>> In MinGW 3.4.5 (official - tested in two different machines),
>> 4.1.2 (official), 4.3.2 (unofficial).
>>
>> gcc -v outputs below:
>> ---
>> Reading specs from C:/devl/MinGW-345/bin/../lib/gcc/mingw32/3.4.5/ 
>> specs
>> Configured with: ../gcc-3.4.5-20060117-3/configure --with-gcc -- 
>> with-gnu-ld --with-gnu-as --host=mingw32 --target=mingw32 --prefix=/ 
>> mingw --enable-threads --disable-nls --enable-languages=c,c+ 
>> +,f77,ada,objc,java --disable-win32-registry --disable-shared -- 
>> enable-sjlj-exceptions --enable-libgcj --disable-java-awt --without- 
>> x --enable-java-gc=boehm --disable-libgcj-debug --enable- 
>> interpreter --enable-hash-synchronization --enable-libstdcxx-debug
>> Thread model: win32
>> gcc version 3.4.5 (mingw-vista special r3)
>> ---
>> Using built-in specs.
>> Target: i686-pc-mingw32
>> Configured with: ../src/configure --prefix=c:/temp/gcc/dest -- 
>> enable-languages=c,c++ --disable-shared --enable-threads=win32 -- 
>> disable-win32-registry --disable-checking --disable-nls --enable- 
>> sjlj-exceptions --disable-libstdcxx-pch
>> Thread model: win32
>> gcc version 4.1.2
>> ---
>> Using built-in specs.
>> Target: mingw32
>> Configured with: ../gcc-4.3.2/configure --prefix=/mingw -- 
>> build=mingw32 --enable-languages=c,ada,c++,fortran,objc,obj-c++ -- 
>> with-bugurl=http://www.tdragon.net/recentgcc/bugs.php --disable-nls  
>> --disable-win32-registry --enable-libgomp --disable-werror --enable- 
>> threads --disable-symvers --enable-cxx-flags='-fno-function- 
>> sections -fno-data-sections' --enable-fully-dynamic-string --enable- 
>> version-specific-runtime-libs --enable-sjlj-exceptions --with- 
>> pkgversion='4.3.2-tdm-1 for MinGW'
>> Thread model: win32
>> gcc version 4.3.2 (4.3.2-tdm-1 for MinGW)
>> ---
>>
>> Brgds,
>> Viktor
>>
>

From harbour.01 at syenar.hu  Thu Sep 25 15:56:00 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 16:06:05 2008
Subject: [Harbour] 2008-09-25 21:50 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c91f48$Blat.v2.6.2$bbc860ac$1240c46ab70@127.0.0.1>

2008-09-25 21:50 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbdefs.h
    ! Fixed 64-bit printf() formatting strings to be compatible 
      with MinGW. MinGW seems to follow the Microsoft way instead 
      of being compatible with other GCC dialects.
      This fixes some pcode/c code (-gc3) generation problems for 
      long long literals, and hbfbird/FBGETDATA() potential problems, 
      when MinGW 3.x/4.x compilers were used.
      [TOMERGE 1.0]

    ; TOFIX: Some sqlite3.c code may also be affected, since 
             "%llX" and "%lld"s are hard-coded into the source.
--
Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Thu Sep 25 16:06:32 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep 25 16:06:39 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <5674B0E7-665C-4066-AA29-879D4421EC06@syenar.hu>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
	<7DC874FB-6DA0-4370-8C0B-B58E55268F01@syenar.hu>
	<20080925135439.GA14636@34-mo7-2.acn.waw.pl>
	<D9B82B27-AB1B-4FC1-B54D-C7C7F8F671E2@syenar.hu>
	<20080925172222.GB14100@34-mo7-2.acn.waw.pl>
	<0AC562C0-A5CB-4767-B2F8-7DB1E5AECA5C@syenar.hu>
	<20080925184015.GB15966@34-mo7-2.acn.waw.pl>
	<AF720B6D-500C-4CBF-A8FE-913F852CDA49@syenar.hu>
	<ED87CF8C-0DF8-44D7-A0F5-CF5A6864B2B6@syenar.hu>
	<5674B0E7-665C-4066-AA29-879D4421EC06@syenar.hu>
Message-ID: <9257026e0809251306k3bd263fcge78aaeb209b839a5@mail.gmail.com>

On Thu, Sep 25, 2008 at 9:44 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> I've found some pages listing %lld as one the significant
> incompatibilities of MinGW compared to Linux GCC.
>
> In MinGW the equivalent formatting seems to be:
> "%I64d" which is also claimed to be the Microsoft C compatible syntax.
>
> Testing with %I64d shows correct results in 3.4.5 and 4.3.2.

I've just found that adding -ansi "corrects" %lld under 3.4.5.

best regards,
Lorenzo
From druzus at acn.waw.pl  Thu Sep 25 16:12:48 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 16:13:24 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <5674B0E7-665C-4066-AA29-879D4421EC06@syenar.hu>
References: <20080925092556.GA7193@34-mo7-2.acn.waw.pl>
	<7DC874FB-6DA0-4370-8C0B-B58E55268F01@syenar.hu>
	<20080925135439.GA14636@34-mo7-2.acn.waw.pl>
	<D9B82B27-AB1B-4FC1-B54D-C7C7F8F671E2@syenar.hu>
	<20080925172222.GB14100@34-mo7-2.acn.waw.pl>
	<0AC562C0-A5CB-4767-B2F8-7DB1E5AECA5C@syenar.hu>
	<20080925184015.GB15966@34-mo7-2.acn.waw.pl>
	<AF720B6D-500C-4CBF-A8FE-913F852CDA49@syenar.hu>
	<ED87CF8C-0DF8-44D7-A0F5-CF5A6864B2B6@syenar.hu>
	<5674B0E7-665C-4066-AA29-879D4421EC06@syenar.hu>
Message-ID: <20080925201248.GA8511@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I've found some pages listing %lld as one the significant
> incompatibilities of MinGW compared to Linux GCC.
> In MinGW the equivalent formatting seems to be:
> "%I64d" which is also claimed to be the Microsoft C compatible syntax.
> Testing with %I64d shows correct results in 3.4.5 and 4.3.2.

So I'll add MinGW to the list of other Windows compilers which uses I64
in hbdefs.h. It will resolve the problem.

best regards,
Przemek
From myorg63 at mail.ru  Thu Sep 25 16:21:29 2008
From: myorg63 at mail.ru (Petr Chornyj)
Date: Thu Sep 25 16:21:35 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <ED87CF8C-0DF8-44D7-A0F5-CF5A6864B2B6@syenar.hu>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
	<20080925092556.GA7193@34-mo7-2.acn.waw.pl>
	<7DC874FB-6DA0-4370-8C0B-B58E55268F01@syenar.hu>
	<20080925135439.GA14636@34-mo7-2.acn.waw.pl>
	<D9B82B27-AB1B-4FC1-B54D-C7C7F8F671E2@syenar.hu>
	<20080925172222.GB14100@34-mo7-2.acn.waw.pl>
	<0AC562C0-A5CB-4767-B2F8-7DB1E5AECA5C@syenar.hu>
	<20080925184015.GB15966@34-mo7-2.acn.waw.pl>
	<AF720B6D-500C-4CBF-A8FE-913F852CDA49@syenar.hu>
	<ED87CF8C-0DF8-44D7-A0F5-CF5A6864B2B6@syenar.hu>
Message-ID: <19677563.post@talk.nabble.com>




Szak?ts Viktor wrote:
> 
>> Gives me: 
>> TEST NUMBER = [705032704]
> 


   #include <stdio.h> 
   #include <inttypes.h>

   int main( void ) 
   { 
      printf( "TEST NUMER = [%lld]\n",    5000000000LL ); 
      printf( "TEST NUMER = [%I64u]\n", 5000000000LL ); 
      return 0; 
   }


http://www.nabble.com/long-long-int-printf-query-td16372489.html#a16372489
http://www.nabble.com/long-long-int-printf-query-td16372489.html#a16372489 
-- 
View this message in context: http://www.nabble.com/mingw-results-and-Windows-compiler-roundup-tp19640310p19677563.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Thu Sep 25 16:22:51 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 16:23:08 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <20080925201248.GA8511@34-mo7-2.acn.waw.pl>
References: <20080925092556.GA7193@34-mo7-2.acn.waw.pl>
	<7DC874FB-6DA0-4370-8C0B-B58E55268F01@syenar.hu>
	<20080925135439.GA14636@34-mo7-2.acn.waw.pl>
	<D9B82B27-AB1B-4FC1-B54D-C7C7F8F671E2@syenar.hu>
	<20080925172222.GB14100@34-mo7-2.acn.waw.pl>
	<0AC562C0-A5CB-4767-B2F8-7DB1E5AECA5C@syenar.hu>
	<20080925184015.GB15966@34-mo7-2.acn.waw.pl>
	<AF720B6D-500C-4CBF-A8FE-913F852CDA49@syenar.hu>
	<ED87CF8C-0DF8-44D7-A0F5-CF5A6864B2B6@syenar.hu>
	<5674B0E7-665C-4066-AA29-879D4421EC06@syenar.hu>
	<20080925201248.GA8511@34-mo7-2.acn.waw.pl>
Message-ID: <A594B717-306E-4CA1-8A02-012A392FB851@syenar.hu>

I've already did it, but it's the best if you take a second look
(I can make a mistake virtually anywhere :)

Question, what to do with sqlite3.c.

Brgds,
Viktor

On 2008.09.25., at 22:12, Przemyslaw Czerpak wrote:

> On Thu, 25 Sep 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> I've found some pages listing %lld as one the significant
>> incompatibilities of MinGW compared to Linux GCC.
>> In MinGW the equivalent formatting seems to be:
>> "%I64d" which is also claimed to be the Microsoft C compatible  
>> syntax.
>> Testing with %I64d shows correct results in 3.4.5 and 4.3.2.
>
> So I'll add MinGW to the list of other Windows compilers which uses  
> I64
> in hbdefs.h. It will resolve the problem.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Sep 25 16:29:06 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 16:29:16 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <20080925140243.GB14636@34-mo7-2.acn.waw.pl>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
	<20080925092556.GA7193@34-mo7-2.acn.waw.pl>
	<7DC874FB-6DA0-4370-8C0B-B58E55268F01@syenar.hu>
	<22C21C8F-B90A-4FF9-AEA8-3F743121C84D@syenar.hu>
	<20080925140243.GB14636@34-mo7-2.acn.waw.pl>
Message-ID: <155A6ABA-F1A7-47A3-BAFF-4213AD619E34@syenar.hu>

Przemek,

> I do not know details for MinGW TLS but it's possible that it will be
> imporved yet in the future, f.e. now thay can use simple function call
> like in BCC. Anyhow in current SVN code the cost of TLS is quite
> efficient hidden by HB_STACK_PRELOAD. Just try to remove:
>
>   #define HB_STACK_PRELOAD
>
> fro the beginning of estack.c and hvm.c and rebuild Harbour without
> HB_USE_TLS. Then compare the results. If they will be the same then
> probably current MinGW version simply calls TlsGetValue() for native
> TLS access so it the same as calling this function by us.

I've now created a new local production build (which fixed
-gc3 / hbtest) with above changes, and results went up to
96.67 / 97.39 compared to unmodified build value 64.38 / 64.81.
Both with MinGW 4.3.2.

I hope this helps.

Brgds,
Viktor

From druzus at acn.waw.pl  Thu Sep 25 16:36:44 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 16:37:19 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <A594B717-306E-4CA1-8A02-012A392FB851@syenar.hu>
References: <20080925135439.GA14636@34-mo7-2.acn.waw.pl>
	<D9B82B27-AB1B-4FC1-B54D-C7C7F8F671E2@syenar.hu>
	<20080925172222.GB14100@34-mo7-2.acn.waw.pl>
	<0AC562C0-A5CB-4767-B2F8-7DB1E5AECA5C@syenar.hu>
	<20080925184015.GB15966@34-mo7-2.acn.waw.pl>
	<AF720B6D-500C-4CBF-A8FE-913F852CDA49@syenar.hu>
	<ED87CF8C-0DF8-44D7-A0F5-CF5A6864B2B6@syenar.hu>
	<5674B0E7-665C-4066-AA29-879D4421EC06@syenar.hu>
	<20080925201248.GA8511@34-mo7-2.acn.waw.pl>
	<A594B717-306E-4CA1-8A02-012A392FB851@syenar.hu>
Message-ID: <20080925203644.GA24305@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, Szak?ts Viktor wrote:
> I've already did it, but it's the best if you take a second look
> (I can make a mistake virtually anywhere :)

You made exactly what I did with the byte precision ;-)
so after svn update I do not have any conflicts and hbdefs.h
is not marked as modified in my code. I have to say that people
working on MinGW port are really funny sumtimes. MinGW supports
LL suffix for long long int numbers which is even strictly necessary
but does not support 'll' in printf() format and use MS extension.
Who is defining it :-)

BTW I've just found that in my MinGW builds PRG_USR was overwritten
by other settings and this build was created with default -gc
switch when I was making testing it.
In summary it will be good to implement our own *printf() formatting
somewhere. It's the most expensive function we are using from C RTL
and quite often written in two versions for MT and ST mode. The ST
one simply uses static variables.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Sep 25 16:51:28 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 16:51:39 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <20080925203644.GA24305@34-mo7-2.acn.waw.pl>
References: <20080925135439.GA14636@34-mo7-2.acn.waw.pl>
	<D9B82B27-AB1B-4FC1-B54D-C7C7F8F671E2@syenar.hu>
	<20080925172222.GB14100@34-mo7-2.acn.waw.pl>
	<0AC562C0-A5CB-4767-B2F8-7DB1E5AECA5C@syenar.hu>
	<20080925184015.GB15966@34-mo7-2.acn.waw.pl>
	<AF720B6D-500C-4CBF-A8FE-913F852CDA49@syenar.hu>
	<ED87CF8C-0DF8-44D7-A0F5-CF5A6864B2B6@syenar.hu>
	<5674B0E7-665C-4066-AA29-879D4421EC06@syenar.hu>
	<20080925201248.GA8511@34-mo7-2.acn.waw.pl>
	<A594B717-306E-4CA1-8A02-012A392FB851@syenar.hu>
	<20080925203644.GA24305@34-mo7-2.acn.waw.pl>
Message-ID: <A46DD482-D4B0-454D-83D2-5B94E3D25D7C@syenar.hu>

>
Hi Przemek,

> On Thu, 25 Sep 2008, Szak?ts Viktor wrote:
>> I've already did it, but it's the best if you take a second look
>> (I can make a mistake virtually anywhere :)
>
> You made exactly what I did with the byte precision ;-)
> so after svn update I do not have any conflicts and hbdefs.h
> is not marked as modified in my code. I have to say that people
> working on MinGW port are really funny sumtimes. MinGW supports
> LL suffix for long long int numbers which is even strictly necessary
> but does not support 'll' in printf() format and use MS extension.
> Who is defining it :-)

I have no idea, anyhow lucky we have standards in the computing field :)

> BTW I've just found that in my MinGW builds PRG_USR was overwritten
> by other settings and this build was created with default -gc
> switch when I was making testing it.
> In summary it will be good to implement our own *printf() formatting
> somewhere. It's the most expensive function we are using from C RTL
> and quite often written in two versions for MT and ST mode. The ST
> one simply uses static variables.

Seems like a good idea. Considering the few CRTL stuff we use,
maybe we could just get rid of them all. At least as far as core is
concerned. [ Clipper did it, too. ]

BTW, I've just looked into the build results and there are 4 new
warnings after the hbdefs.h change :(

../../genc.c:1585: warning: format '%I64i' expects type 'int', but  
argument 3 has type 'long long int'
../../gencc.c:1239: warning: format '%I64i' expects type 'int', but  
argument 3 has type 'long long int'
../../estack.c:1019: warning: format '%I64i' expects type 'int', but  
argument 2 has type 'HB_LONG'
../../hbsqlit3.c:1136: warning: format '%I64d' expects type 'int', but  
argument 4 has type 'sqlite3_uint64'

Brgds,
Viktor

From myorg63 at mail.ru  Thu Sep 25 17:03:26 2008
From: myorg63 at mail.ru (Petr Chornyj)
Date: Thu Sep 25 17:03:39 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <A594B717-306E-4CA1-8A02-012A392FB851@syenar.hu>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
	<20080925092556.GA7193@34-mo7-2.acn.waw.pl>
	<7DC874FB-6DA0-4370-8C0B-B58E55268F01@syenar.hu>
	<20080925135439.GA14636@34-mo7-2.acn.waw.pl>
	<D9B82B27-AB1B-4FC1-B54D-C7C7F8F671E2@syenar.hu>
	<20080925172222.GB14100@34-mo7-2.acn.waw.pl>
	<0AC562C0-A5CB-4767-B2F8-7DB1E5AECA5C@syenar.hu>
	<20080925184015.GB15966@34-mo7-2.acn.waw.pl>
	<AF720B6D-500C-4CBF-A8FE-913F852CDA49@syenar.hu>
	<ED87CF8C-0DF8-44D7-A0F5-CF5A6864B2B6@syenar.hu>
	<5674B0E7-665C-4066-AA29-879D4421EC06@syenar.hu>
	<20080925201248.GA8511@34-mo7-2.acn.waw.pl>
	<A594B717-306E-4CA1-8A02-012A392FB851@syenar.hu>
Message-ID: <19678278.post@talk.nabble.com>




Szak?ts Viktor wrote:
> 
> 
> Question, what to do with sqlite3.c.
> 
> Brgds,
> Viktor
> 
> 

I thinks authors of sqlite know this bug 

#if defined(SQLITE_TEST) || defined(SQLITE_DEBUG) ||
defined(SQLITE_MEMDEBUG)
/*
** A version of printf() that understands %lld.  Used for debugging.
** The printf() built into some versions of windows does not understand %lld
** and segfaults if you give it a long long int.
*/
SQLITE_PRIVATE void sqlite3DebugPrintf(const char *zFormat, ...){


also all "fprintf" is guarded by SQLITE_DEBUG.

In first looks all it safe.


Regards,
Petr
-- 
View this message in context: http://www.nabble.com/mingw-results-and-Windows-compiler-roundup-tp19640310p19678278.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dmacias at mail.udg.mx  Thu Sep 25 17:05:42 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Sep 25 17:05:44 2008
Subject: [Harbour] Re: 2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48DBFD26.90906@mail.udg.mx>

[Maurilio]
>latest code, OS/2 GCC, HB_FM_STATISTICS_OFF, PIV HT 3.6GHz, SMP Kernel.
>ST
>============================================================
>total application time:                              52.85
>total real time:                                     52.85
>MT
>============================================================
>total application time:                              70.91
>total real time:                                     70.92

[Maurilio]
> Ok, here they are,
> same hardware, xharbour at $Id: ChangeLog,v 1.6182 2008/08/01 09:41:14
> marchuet Exp $
> MT
> total application time:                             214.79
> ST
> total application time:                              95.18

[Przemek]
>I expected worse results then Harbour ones but I didn't expect such
>big difference and such big MT overhead. xHarbour does not even use
>protection for complex variable reference counters in OS2 builds -
>Walter implemented them only for MS-Windows.
>In my Linux box the difference is smaller though I'm using a little
>bit modified xHarbour version with working native TLS support. I'll
>made tests with current clean CVS.


I see many surprises:

a) PIV HT 3.6GHz, SMP Kernel.
My hardware for OS/2 tests are AMD Athlon 2200+ 2.0 Ghz 1 Gb RAM
This Athlon never are ahead of an PIV 2.2 GHz, my "old" PIV 3.3 GHz HT
was allways near double speed than Athlon in any test
So something is wrong: results for PIV HT 3.6 Ghz should be better than
Athlon 2200+ at least in half of time

Or your machine is heavily loaded, or low RAM or something else, but
must be better

b) A very big difference between Harbour and xHarbour in both ST and MT

c) A very big difference between ST and MT in xHarbour


As I have xHarbour MT under OS/2 (yes, Maurilio told me how to build it)
I made same tests. xHarbour around 14 August 2008

speedtst.prg

Harbour
=======
ST
      total application time:                              47.13
      total real time:                                     47.14
MT
      total application time:                              51.98
      total real time:                                     51.98

xHarbour
========
ST
      total application time:                              71.52
      total real time:                                     71.52
MT
      total application time:                             119.68
      total real time:                                    119.69


Again, results should be greater than those of Maurilio hardware


Complete results for xHarbour are below

David Macias

-------------------------
xHarbour ST

Startup loop to increase CPU clock...

09/25/08 15:05:22 xHarbour build 1.1.0 Intl. (SimpLex) (Rev. 6192), OS/2
4.50
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.23
CPU usage -> secondsCPU()

c:=L_C ->                                             0.15
n:=L_N ->                                             0.13
d:=L_D ->                                             0.13
c:=M_C ->                                             0.16
n:=M_N ->                                             0.14
d:=M_D ->                                             0.14
(sh) c:=F_C ->                                        0.64
(sh) n:=F_N ->                                        0.42
(sh) d:=F_D ->                                        0.29
(ex) c:=F_C ->                                        0.66
(ex) n:=F_N ->                                        0.35
(ex) d:=F_D ->                                        0.28
n:=o:GenCode ->                                       0.57
n:=o[8] ->                                            0.29
round(i/1000,2) ->                                    1.00
str(i/1000) ->                                        2.08
val(a3[i%ARR_LEN+1]) ->                               1.11
dtos(j+i%10000-5000) ->                               1.16
eval({||i%ARR_LEN}) ->                                0.82
eval({|x|x%ARR_LEN},i) ->                             0.88
eval({|x|f1(x)},i) ->                                 1.44
&('f1('+str(i)+')') ->                               10.85
eval([&('{|x|f1(x)}')]) ->                            1.43
j := valtype(a)+valtype(i) ->                         1.76
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                2.41
j := val(a2[i%ARR_LEN+1]) ->                          1.30
j := a2[i%ARR_LEN+1] == s ->                          0.71
j := a2[i%ARR_LEN+1] = s ->                           0.71
j := a2[i%ARR_LEN+1] >= s ->                          0.70
j := a2[i%ARR_LEN+1] < s ->                           0.69
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         2.94
f0() ->                                               0.67
f1(i) ->                                              0.80
f2(c[8]) ->                                           0.76
f2(c[40000]) ->                                       0.74
f2(@c[40000]) ->                                      0.71
f2(c[40000]); c2:=c ->                                0.89
f2(@c[40000]); c2:=c ->                               0.86
f3(a,a2,c,i,j,t,bc) ->                                1.23
f2(a2) ->                                             0.77
s:=f4() ->                                            2.16
s:=f5() ->                                            1.58
ascan(a,i%ARR_LEN) ->                                 1.08
ascan(a2,c+chr(i%64+64)) ->                           2.75
ascan(a,{|x|x==i%ARR_LEN}) ->                         9.86
============================================================
total application time:                              71.52
total real time:                                     71.52

-------------------------
xHarbour MT

Startup loop to increase CPU clock...

09/25/08 15:06:48 xHarbour build 1.1.0 Intl. (SimpLex) (Rev. 6192) (MT),
OS/2 4.50
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.28
CPU usage -> secondsCPU()

c:=L_C ->                                             0.18
n:=L_N ->                                             0.15
d:=L_D ->                                             0.15
c:=M_C ->                                             3.11
n:=M_N ->                                             3.08
d:=M_D ->                                             3.06
(sh) c:=F_C ->                                        0.65
(sh) n:=F_N ->                                        0.40
(sh) d:=F_D ->                                        0.29
(ex) c:=F_C ->                                        0.69
(ex) n:=F_N ->                                        0.42
(ex) d:=F_D ->                                        0.32
n:=o:GenCode ->                                       0.71
n:=o[8] ->                                            0.33
round(i/1000,2) ->                                    0.90
str(i/1000) ->                                        1.89
val(a3[i%ARR_LEN+1]) ->                               1.55
dtos(j+i%10000-5000) ->                               1.26
eval({||i%ARR_LEN}) ->                                0.92
eval({|x|x%ARR_LEN},i) ->                             0.98
eval({|x|f1(x)},i) ->                                 3.07
&('f1('+str(i)+')') ->                               19.44
eval([&('{|x|f1(x)}')]) ->                            3.10
j := valtype(a)+valtype(i) ->                         1.85
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                2.76
j := val(a2[i%ARR_LEN+1]) ->                          1.68
j := a2[i%ARR_LEN+1] == s ->                          0.78
j := a2[i%ARR_LEN+1] = s ->                           0.79
j := a2[i%ARR_LEN+1] >= s ->                          0.78
j := a2[i%ARR_LEN+1] < s ->                           0.78
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         6.22
f0() ->                                               2.18
f1(i) ->                                              2.31
f2(c[8]) ->                                           2.23
f2(c[40000]) ->                                       2.23
f2(@c[40000]) ->                                      2.18
f2(c[40000]); c2:=c ->                                2.42
f2(@c[40000]); c2:=c ->                               2.38
f3(a,a2,c,i,j,t,bc) ->                                2.78
f2(a2) ->                                             2.23
s:=f4() ->                                            3.76
s:=f5() ->                                            3.19
ascan(a,i%ARR_LEN) ->                                 1.06
ascan(a2,c+chr(i%64+64)) ->                           2.78
ascan(a,{|x|x==i%ARR_LEN}) ->                        13.07
============================================================
total application time:                             119.68
total real time:                                    119.69

----------------



From druzus at acn.waw.pl  Thu Sep 25 17:11:13 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 17:11:49 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <A46DD482-D4B0-454D-83D2-5B94E3D25D7C@syenar.hu>
References: <20080925172222.GB14100@34-mo7-2.acn.waw.pl>
	<0AC562C0-A5CB-4767-B2F8-7DB1E5AECA5C@syenar.hu>
	<20080925184015.GB15966@34-mo7-2.acn.waw.pl>
	<AF720B6D-500C-4CBF-A8FE-913F852CDA49@syenar.hu>
	<ED87CF8C-0DF8-44D7-A0F5-CF5A6864B2B6@syenar.hu>
	<5674B0E7-665C-4066-AA29-879D4421EC06@syenar.hu>
	<20080925201248.GA8511@34-mo7-2.acn.waw.pl>
	<A594B717-306E-4CA1-8A02-012A392FB851@syenar.hu>
	<20080925203644.GA24305@34-mo7-2.acn.waw.pl>
	<A46DD482-D4B0-454D-83D2-5B94E3D25D7C@syenar.hu>
Message-ID: <20080925211113.GB24305@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Seems like a good idea. Considering the few CRTL stuff we use,
> maybe we could just get rid of them all. At least as far as core is
> concerned. [ Clipper did it, too. ]

Some function like memcpy() or memmove() are very often inlined
and highly optimized so not for all of them I will want to make
such replacement. But things like *printf() and FILE based function
can be eliminated.

> BTW, I've just looked into the build results and there are 4 new
> warnings after the hbdefs.h change :(
> ../../genc.c:1585: warning: format '%I64i' expects type 'int', but argument 
> 3 has type 'long long int'
> ../../gencc.c:1239: warning: format '%I64i' expects type 'int', but 
> argument 3 has type 'long long int'
> ../../estack.c:1019: warning: format '%I64i' expects type 'int', but 
> argument 2 has type 'HB_LONG'
> ../../hbsqlit3.c:1136: warning: format '%I64d' expects type 'int', but 
> argument 4 has type 'sqlite3_uint64'

In all four places the code is correct and passed value is 64bit signed
integer. Just simply MinGW developers added support for I64 in *printf()
but they forgot to update expected type validation which should mot be
'int' but 'long long int' for such formatting and MinGW reports wrong
warnings. It's a bug in MinGW. I only hope it does not effect generated
code.

best regards,
Przemek
From bedipritpal at hotmail.com  Thu Sep 25 17:22:36 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Sep 25 17:22:42 2008
Subject: Re[Harbour] quest to share MT knowledge on Xbase++ NG
In-Reply-To: <19675252.post@talk.nabble.com>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
Message-ID: <19678591.post@talk.nabble.com>


Hi

And I got this reply:

****************************************
Pritpal,

why should I as a Xbase++ developer help a competitor to advance its 
product???

And why do you ask for our help in the Xbase++ generic newsgroup? In my 
eyes this is trolling. This has nothing to do with Xbase++.

Maybe you should visit the thread started by Massimo in the soapbox 
newsgroup. This will help you to understand how Xbase++ developers think 
about this.

Maybe in future times I and others should start some interesting threads 
in the Harbour groups about the great new enhancements within Xbase++? 
Lets see how other harbour developers react to this!

Jan

****************************************

-- 
View this message in context: http://www.nabble.com/A-few-questions-about-MT-tp19555409p19678591.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Thu Sep 25 17:42:21 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 17:42:30 2008
Subject: Re[Harbour] quest to share MT knowledge on Xbase++ NG
In-Reply-To: <19678591.post@talk.nabble.com>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com>
Message-ID: <4633D61D-7DCD-46FC-A484-E033678550C8@syenar.hu>

I can understand the feelings of Jan to be honest.

I have no idea what kind of newsgroup is where you've
posted this message, but if XBase++ developers frequent
it, this can easily be taken as offense and the result
is kinda predictable.

Set aside the above, I think we have enough expertise
and available information (maybe even working copies
of XBase++ for testing) to be able to polish the MT
support to have the best available solution, be it fully
or partially XBase++ compatible.

So I think it's up to us local XBase++ users to make
anything like the above happen. [ I'm no XBase++ user BTW. ]

So far though, no test results were posted on Przemek's
request, which makes it look like we don't even care
that much.

Brgds,
Viktor

On 2008.09.25., at 23:22, Pritpal Bedi wrote:

>
> Hi
>
> And I got this reply:
>
> ****************************************
> Pritpal,
>
> why should I as a Xbase++ developer help a competitor to advance its
> product???
>
> And why do you ask for our help in the Xbase++ generic newsgroup? In  
> my
> eyes this is trolling. This has nothing to do with Xbase++.
>
> Maybe you should visit the thread started by Massimo in the soapbox
> newsgroup. This will help you to understand how Xbase++ developers  
> think
> about this.
>
> Maybe in future times I and others should start some interesting  
> threads
> in the Harbour groups about the great new enhancements within Xbase++?
> Lets see how other harbour developers react to this!
>
> Jan
>
> ****************************************
>
> -- 
> View this message in context: http://www.nabble.com/A-few-questions-about-MT-tp19555409p19678591.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Sep 25 18:00:15 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 18:00:25 2008
Subject: Re[Harbour] quest to share MT knowledge on Xbase++ NG
In-Reply-To: <19678591.post@talk.nabble.com>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com>
Message-ID: <6EA5E4C3-6DBD-40C7-A7B8-00C19298DD03@syenar.hu>

BTW folks, I'm seeing replies on nabble.com (by Angel Pais
for example) to this thread, but these messages don't make
it to this list (which is BTW perfectly okay to avoid spam).

I see this whole nabble/gmain cross-posting a big mess,
and just a way to scatter information and making the
wrong impression for users.

Brgds,
Viktor

On 2008.09.25., at 23:22, Pritpal Bedi wrote:

>
> Hi
>
> And I got this reply:
>
> ****************************************
> Pritpal,
>
> why should I as a Xbase++ developer help a competitor to advance its
> product???
>
> And why do you ask for our help in the Xbase++ generic newsgroup? In  
> my
> eyes this is trolling. This has nothing to do with Xbase++.
>
> Maybe you should visit the thread started by Massimo in the soapbox
> newsgroup. This will help you to understand how Xbase++ developers  
> think
> about this.
>
> Maybe in future times I and others should start some interesting  
> threads
> in the Harbour groups about the great new enhancements within Xbase++?
> Lets see how other harbour developers react to this!
>
> Jan
>
> ****************************************
>
> -- 
> View this message in context: http://www.nabble.com/A-few-questions-about-MT-tp19555409p19678591.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Thu Sep 25 18:28:45 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 18:29:27 2008
Subject: [SPAM]  Re: Re[Harbour] quest to share MT knowledge on Xbase++ NG
In-Reply-To: <19678591.post@talk.nabble.com>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com>
Message-ID: <20080925222845.GA2629@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, Pritpal Bedi wrote:

Hi Pritpal,

> Pritpal,
> why should I as a Xbase++ developer help a competitor to advance its 
> product???
> And why do you ask for our help in the Xbase++ generic newsgroup? In my 
> eyes this is trolling. This has nothing to do with Xbase++.
> Maybe you should visit the thread started by Massimo in the soapbox 
> newsgroup. This will help you to understand how Xbase++ developers think 
> about this.
> Maybe in future times I and others should start some interesting threads 
> in the Harbour groups about the great new enhancements within Xbase++? 
> Lets see how other harbour developers react to this!

I'm not surprised with such answer. xbase++ is commercial project so it's
rather expected.
BTW I like that they clearly said what they think about it.

Personally I like some xbase++ ideas you presented here but I'm not
interested in any implementation details. Also so far I haven't seen
anything what I is new for me and what I wasn't plan to implement though
with different names or with some a little bit different conditions.
And I do not have any knowledge about xbase++ so I do not agree that
you said that we are following xbase++ model. Some of their solutions are
natural and probably anyone who think about it longer will end with
sth similar. F.e. I was thinking about moving workareas between threads.
When you send information about dbRelease()/dbRequest() I found it as
nice API for such solution and I added it quite fast. But the internal
implementation is for sure different then the one in xbase++. We do not
have any zero zone but simple array item which holds areas. It's the result
of my original idea when I wanted to add code to move workarea into variable
which can be moved between threads and then attached to thread local WA list.
I decided to use xbase++ compatible .prg interface only for one reason.
In the example you sent is nicely visible that it will work with only
one thread two and also with some modifications with many worker threads
which are waiting for jobs from other threads. It was a little bit like
in LINDA and I already found it nice :-)

I do not need any think more. The only one think which can be usable is
making some tests of real xbase++ behavior if you expect I'll create some
compatible .prg level interface.
F.e. what happens with relations and lock in dbRealese(). I have to take
some arbitrary decisions like removing all relations (and I cannot change
it because it will break WA separation) and removing all locks what I can
change if you will find it as necessary for xBase++ compatibility though
I do not like this idea very much.
As you can read in other thread I also do not like documented xBase++
PUBLIC behavior and I'm finding current Harbour solution as better and
I would like to keep it.

In xbase++ documentation you sent I do not find anything about dangerous
situations and possible bad side effects. Only small information that
programmer should eliminate some situations (f.e. simultaneous write
access) with some trivial examples. I can only guess that they do not
want to write about real low level problems because it's commercial project
and they do not want to lost customers informing that application may cause
GPF. But I think that real xBase++ user well know what can happen in some
cases and many times saw GPF. Even such small thing will be problem in
serious conversation in public forum.

And the final thing. All code I'm creating for [x]Harbour it based on
my own ideas and low level implementations. I do not want to create
even potential owner rights problems. Closer cooperation with commercial
clipper compatible compiler authors may cause sth like that so I'm not
interesting in it.

I hope that I also clearly presented my point of view.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Sep 25 18:55:32 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 18:55:43 2008
Subject: [Harbour] Harbour announcement on XBase++ NG :(
Message-ID: <F2F6DCE1-349E-41F5-95F6-F89094653C27@syenar.hu>

Hi Massimo and all,

Probably the intention is good, but please guys
could you just think it twice before posting Harbour
"advertisements" on other non-free Clipper compatible
product forums?

This is least to say impolite and really unnecessary
from our POV, besides painting a pretty wrong image
of Harbour.

There are other - much better / yet probably more
time-consuming - ways to contribute to this project,
if you really want, and we probably all know what
I'm talking about.

Brgds,
Viktor

From druzus at acn.waw.pl  Thu Sep 25 19:13:42 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 19:14:20 2008
Subject: [SPAM]  Re: Re[Harbour] quest to share MT knowledge on Xbase++ NG
In-Reply-To: <6EA5E4C3-6DBD-40C7-A7B8-00C19298DD03@syenar.hu>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com>
	<6EA5E4C3-6DBD-40C7-A7B8-00C19298DD03@syenar.hu>
Message-ID: <20080925231342.GB2629@34-mo7-2.acn.waw.pl>

On Fri, 26 Sep 2008, Szak?ts Viktor wrote:
> BTW folks, I'm seeing replies on nabble.com (by Angel Pais
> for example) to this thread, but these messages don't make
> it to this list (which is BTW perfectly okay to avoid spam).

Hi Viktor and Angel,
I've just read this message and I've got answer for one thing.
Many thanks.
Publics are really global and the assign is done in atomic
operation what is the additional necessary protection I was writing
about in previous message. But to make it fully safe also access has
to be done as atomic operation or they have to extensively use GC.
I also found interesting information that statics are protected too.
I guess it's internal VM protection only not logical protection.
I can implement such protection but on some platforms it may be
expensive so I'm not sure it's worth to do. I'll return to this
problem in some spare time when I'll make some real speed tests.

best regards,
Przemek
From bedipritpal at hotmail.com  Thu Sep 25 19:58:13 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Sep 25 19:58:19 2008
Subject: [Harbour] Harbour announcement on XBase++ NG :(
In-Reply-To: <F2F6DCE1-349E-41F5-95F6-F89094653C27@syenar.hu>
References: <F2F6DCE1-349E-41F5-95F6-F89094653C27@syenar.hu>
Message-ID: <19680425.post@talk.nabble.com>


Sorry Viktor

>Hi Massimo and all,

My post was related with knowledge on MT issues
which can be well described by Xbase++ user.

Also I have learned that it is not good to 
post any such messages on their NG. Probably one more
message will be my last on this topic.

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/Harbour-announcement-on-XBase%2B%2B-NG-%3A%28-tp19679834p19680425.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Thu Sep 25 20:00:53 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 20:01:28 2008
Subject: [SPAM]  Re: Re[Harbour] quest to share MT knowledge on Xbase++ NG
In-Reply-To: <20080925231342.GB2629@34-mo7-2.acn.waw.pl>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com>
	<6EA5E4C3-6DBD-40C7-A7B8-00C19298DD03@syenar.hu>
	<20080925231342.GB2629@34-mo7-2.acn.waw.pl>
Message-ID: <20080926000053.GC2629@34-mo7-2.acn.waw.pl>

On Fri, 26 Sep 2008, Przemyslaw Czerpak wrote:
> Publics are really global and the assign is done in atomic
> operation what is the additional necessary protection I was writing
> about in previous message. But to make it fully safe also access has
> to be done as atomic operation or they have to extensively use GC.

But I'm looking at the code example and for me it's not MT safe or
xBase++ makes sth else what is not documented.

> I ussually carry aplication-wide info in a public array protected by a public logical var
>
> EJ: 
>
> public aConfig := {.t.}
> public lInUse   := .f.
>
> then in each thread when I want to modify the array I do (simplified example, it is usually encapsulated in a class):
>
> do while lInUse
> enddo
> lInUse := ! lInUse
> if lInUse  // another thread may come in the interim
>    aadd(aConfig,'elem')
>    lInUse := ! lInUse
> endif

In this code we have:
   lInUse := ! lInUse
To make this code MT safe the above line has to be one atomic
operation in xBase++. Is it true?
If not then two threads can at the same time read lInUse receive
.f. then each of them will revert its value and store in atomic
operation into lInUse.
Then both will pass successfully the test:
   if lInUse  // another thread may come in the interim
and will make aadd().

On single CPU machine and seldom calls two above code it may
work 99.9% of cases and will fail only when OS change active
thread context between access and assign operations in line:
   lInUse := ! lInUse
But in multi CPU ones when cost of operation inside
   if InUse
      ...
    lInUse := ! lInUse
   endif
is relatively high then you have big chance that two threads will
be blocked simultaneously at:
   do while lInUse
   enddo
then both will be unblocked and you have very big chance that they
will make next instruction well synchronized and both will access
the critical section.
The key is in:
   lInUse := ! lInUse
line. This code can be MT safe _only_ if xBase++ executes this
whole line as one atomic operation.
So far I haven't found any information about such functionality.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Sep 25 20:01:40 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 20:01:52 2008
Subject: [Harbour] Harbour announcement on XBase++ NG :(
In-Reply-To: <19680425.post@talk.nabble.com>
References: <F2F6DCE1-349E-41F5-95F6-F89094653C27@syenar.hu>
	<19680425.post@talk.nabble.com>
Message-ID: <74F249DC-C543-4EC8-A582-2D8DC75966C2@syenar.hu>

Hi Pritpal,

I know, this mail was targeted to Massimo specifically.

Brgds,
Viktor

On 2008.09.26., at 1:58, Pritpal Bedi wrote:

>
> Sorry Viktor
>
>> Hi Massimo and all,
>
> My post was related with knowledge on MT issues
> which can be well described by Xbase++ user.
>
> Also I have learned that it is not good to
> post any such messages on their NG. Probably one more
> message will be my last on this topic.
>
> Regards
> Pritpal Bedi
>
>
> -- 
> View this message in context: http://www.nabble.com/Harbour-announcement-on-XBase%2B%2B-NG-%3A%28-tp19679834p19680425.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From bedipritpal at hotmail.com  Thu Sep 25 20:13:25 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Sep 25 20:13:32 2008
Subject: [Harbour] [SPAM]  Re: Request to share MT knowledge on Xbase++ NG
In-Reply-To: <20080925222845.GA2629@34-mo7-2.acn.waw.pl>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com>
	<20080925222845.GA2629@34-mo7-2.acn.waw.pl>
Message-ID: <19680441.post@talk.nabble.com>


Przemek

> why should I as a Xbase++ developer help a competitor to advance its 
> product???
> And why do you ask for our help in the Xbase++ generic newsgroup? In my 

Please do not understand me wrong.
I know you have implemented far superior MT design than
Xbase++, I swear. My point was to gather in-production
difficulties/achievements of MT modal.

Having said that no more posts on Xbase++ NG.

Harbour users has full faith into your capabilities
as has been said many times. Do whatever you think
is best for this protocol. Prg level interface is quiet
simple and can be implemented in a day or two.

Sorry if this has caused any inconvenience to you.

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/A-few-questions-about-MT-tp19555409p19680441.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From amigosam at adinet.com.uy  Thu Sep 25 20:31:51 2008
From: amigosam at adinet.com.uy (Angel Pais)
Date: Thu Sep 25 20:31:57 2008
Subject: [Harbour] [SPAM]  Re: Request to share MT knowledge on Xbase++ NG
In-Reply-To: <20080926000053.GC2629@34-mo7-2.acn.waw.pl>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com>
	<6EA5E4C3-6DBD-40C7-A7B8-00C19298DD03@syenar.hu>
	<20080925231342.GB2629@34-mo7-2.acn.waw.pl>
	<20080926000053.GC2629@34-mo7-2.acn.waw.pl>
Message-ID: <19680697.post@talk.nabble.com>


Hi Przemek

First of all I must say you are right, this code isn't thread safe:
lInUse := ! lInUse

But i've also said its only a simplification.
In a real program this code:
1- goes inside a sync method of a class
2- the logical var does not exit
3- the array is a var of the class
4- the class is referenced by in a Public var

My intention was to show you that any manipulation of a public var must be
enclosed by some kind of semaphore ( be it implemented as a sync method,
mutex or logical var)

Excuse me, such loose sample I gave you.

Any code you want compiled and tested in xbase++ just send it to me and I'll
be glad to report the results back to you.

Angel

-- 
View this message in context: http://www.nabble.com/A-few-questions-about-MT-tp19555409p19680697.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Thu Sep 25 20:38:59 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Sep 25 20:39:09 2008
Subject: [SPAM] Re: Re[Harbour] quest to share MT knowledge on Xbase++ NG
In-Reply-To: <20080926000053.GC2629@34-mo7-2.acn.waw.pl>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com>
	<6EA5E4C3-6DBD-40C7-A7B8-00C19298DD03@syenar.hu>
	<20080925231342.GB2629@34-mo7-2.acn.waw.pl>
	<20080926000053.GC2629@34-mo7-2.acn.waw.pl>
Message-ID: <4C3BE115-75CA-4FBE-96D9-1316411F8B23@syenar.hu>

> The key is in:
>   lInUse := ! lInUse
> line. This code can be MT safe _only_ if xBase++ executes this
> whole line as one atomic operation.
> So far I haven't found any information about such functionality.

I see no sign this expression would be atomic.

I'd think if it would be, there would exist some
sort of documentation (but at list a list) of the
such automatically grouped operations, otherwise it's
very difficult to decide for a programmer what to
expect. It's even more difficult to test.

But of course, I may be wrong.

Brgds,
Viktor

From druzus at acn.waw.pl  Thu Sep 25 20:42:15 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 25 20:42:49 2008
Subject: [Harbour] 2008-09-26 02:42 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080926004215.GA15454@34-mo7-2.acn.waw.pl>

2008-09-26 02:42 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/thread.c
    ! fixed thread cleanup code when startthread() fails, f.e.
      OS refuse to create new thread.

best regards
Przemek
From bedipritpal at hotmail.com  Thu Sep 25 21:27:46 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Sep 25 21:27:52 2008
Subject: Re[Harbour] quest to share MT knowledge on Xbase++ NG
In-Reply-To: <19681028.post@talk.nabble.com>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com> <19681028.post@talk.nabble.com>
Message-ID: <19681131.post@talk.nabble.com>


Rodd


RoddGraham wrote:
> 
> Please look again at Xbase++ NG.  Jan does not represent my position and
> other Xbase++ users may yet respond.
> 

Thanks for the support.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/A-few-questions-about-MT-tp19555409p19681131.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From rgraham at grahamautomation.com  Thu Sep 25 22:42:09 2008
From: rgraham at grahamautomation.com (RoddGraham)
Date: Thu Sep 25 22:42:17 2008
Subject: Re[Harbour] quest to share MT knowledge on Xbase++ NG
In-Reply-To: <19678591.post@talk.nabble.com>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com>
Message-ID: <19681028.post@talk.nabble.com>



Pritpal Bedi wrote:
> 
> And I got this reply:
> 
> ****************************************
> Pritpal,
> 
> why should I as a Xbase++ developer help a competitor to advance its 
> product???
> 
> 
> 

Please look again at Xbase++ NG.  Jan does not represent my position and
other Xbase++ users may yet respond.
-- 
View this message in context: http://www.nabble.com/A-few-questions-about-MT-tp19555409p19681028.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From rgraham at grahamautomation.com  Thu Sep 25 23:16:30 2008
From: rgraham at grahamautomation.com (RoddGraham)
Date: Thu Sep 25 23:16:36 2008
Subject: Re[Harbour] quest to share MT knowledge on Xbase++ NG
In-Reply-To: <19675252.post@talk.nabble.com>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
Message-ID: <19681451.post@talk.nabble.com>




Pritpal Bedi wrote:
> 
> Today I have posted this message on Xbase++ NG:
> 
> For example, it will be interesting to have a knowledgebase
> about features and shortcomings of Xbase++ MT modal.
> 
> 

As a MT Xbase++ user, I have knowledge of its features and shortcommings.

1) Xbase++ is MT, but only reliable on single cpu core within the process. 
By default, the Xbase++ runtime sets single core affinity with the OS.  In
fact you must make an undocumented setting to allow Xbase++ to use multiple
cores after which it will lock (live or dead I do not know) in a race
condition.  I speculate it is the fact that the developer likes to self
implement the thread concurrency controls at the metal rather than using the
OS facilities.  The undocumented setting changes the thread synchronization
algorithm used from one optimized for single core which is incompatible in a
multi-core environment.  To the developers credit, see item #3 for the
reason why thread synchronization performance is a big issue in xBase
dialects.  My experience is Xbase++ performance is unacceptable when
attempting multi-core processing even if the lock issue was resolved. 
Probably why it is not a big priority for Alaska to fix.

2) PUBLICs are global, PRIVATEs and WORKAREAs are thread local.  IMO, you
have flexibility in defining visibility scope as you add MT to harbour since
pre-existing non-MT code does not have the concept of thread local nor does
it have more than one thread.  From my perspective, the xBase++ scoping is
correct as PUBLICs/PRIVATEs are rarely used in a professional architecture
and only necessary when they must be accessed by runtime symbolic
references.  WORKAREAs could go either way, but it simplifies concurrency to
file locking for native file RDDs to have them thread local.  Of course with
DBS based RDDs (such as ADS), the session layer may impose serialization
when shared across threads which leads me to conclude that the entire data
layer is thread local.  It is because I use ADS and the session
serialization that I do not pass WORKAREAs between threads in Xbase++. 
Additionally, you have to make a pass of your process state settings (ie.
SET commands) and decide whether they make more sense globally or thread
locally.  When in doubt, I lean towards SETtings being thread local since
they should inherit from the thread that created them which makes them
behave like global settings if set appropriately in the first thread and
never changed again.  If the SETting can have inter-thread side effects, it
should be thread local.

3) The single core affinity referred to in item #1 above results in improved
process thoroughput in Xbase++.  Unlike MT at the C level, the garbage
collected, shared memory system of xBase languages becomes a choke point due
to excessive serialization required to guarantee integrity.  Every memory
variable accessed in every expression must be serialized to ensure the
validity of the access.  Xbase++ uses the single core optimization that is
is not possible for two threads to attempt serialization in the exact same
clock cycle such that certain cpu primitives are guaranteed atomic to
complete without context switch.  Hence, they reduce the overheads
associated the traditional hardware level, multi core synchronization
instructions.  Memory serialization and concurrency is a well known issue
for C developers, but it is exasperated by the single shared memory
architecture of the xBase language.

4) While I am not an implementor of the underlying memory managers, I have
contemplated how to overcome this problem in Xbase++.  The best idea I have
to address this problem is to create variables in thread local memory heaps
that do not require thread synchronization to access.  If a thread accesses
a variable in another threads heap, it would trigger a move event that would
relocate the variable to a shared, global heap which requires
synchronization on all accesses.  Of course the move event would require
synchronization with the thread that owns the local heap.  I believe that
this would work since the vast majority of variables are not shared between
threads.  The GC would only need to synchronize with one thread at a time to
clean the thead local heaps and hopefully the shared, global heap would be
small enough that the GC disruption would be limited due to a quick run and
the possibility that the application threads might not access the global
heap (ie. be processing from the thread local heap) during its GC.  The
downside of this architecture is that process memory may fragment quickly
due to multiple heaps and exhaust Win32 limits.  Of course Win64 breaking
the 3GB process memory limit is just around the corner.

5) Finally, the only thread synchronization feature of Xbase++ at the .PRG
level is SYNC METHODs which serialize on the object instance (or class
object for CLASS SYNC METHODs).  This is straight forward implementation
that requires nothing more than including a serialization mutex in every
class and instance object which is used by the respective SYNC METHODs.  The
only caveat is that inter-object deadlocks can occur.  AFAIK, Xbase++ does
not implement deadlock detection, but leaves it up to the app developer to
'don't do that'.  Since any variable or routine can be implemented as a
CLASS, I find the SYNC METHODs sufficient and elegant to satisfy MT
development at the .PRG layer.

Enjoy,

Rodd Graham
-- 
View this message in context: http://www.nabble.com/A-few-questions-about-MT-tp19555409p19681451.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From rgraham at grahamautomation.com  Thu Sep 25 23:18:56 2008
From: rgraham at grahamautomation.com (RoddGraham)
Date: Thu Sep 25 23:19:02 2008
Subject: Re[Harbour] quest to share MT knowledge on Xbase++ NG
In-Reply-To: <19681131.post@talk.nabble.com>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com> <19681028.post@talk.nabble.com>
	<19681131.post@talk.nabble.com>
Message-ID: <19681861.post@talk.nabble.com>



I have attempted to post my Xbase++ MT knowledge on the nabble.com link you
provided.  However it keeps saying that the post was not accepted by the
mail list.

As I spent some effort trying to share, can someone confirm that it is
posted for all to see or what I need to do to post it.  It is somewhat long,
but I do not think it is a size limit.

Thanks,

Rodd Graham

-- 
View this message in context: http://www.nabble.com/A-few-questions-about-MT-tp19555409p19681861.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Thu Sep 25 23:51:48 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Sep 25 23:51:54 2008
Subject: Re[Harbour] quest to share MT knowledge on Xbase++ NG
In-Reply-To: <19681861.post@talk.nabble.com>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com> <19681028.post@talk.nabble.com>
	<19681131.post@talk.nabble.com> <19681861.post@talk.nabble.com>
Message-ID: <19682085.post@talk.nabble.com>


Rodd


RoddGraham wrote:
> 
> 
> I have attempted to post my Xbase++ MT knowledge on the nabble.com link
> you provided.  However it keeps saying that the post was not accepted by
> the mail list.
> 
> As I spent some effort trying to share, can someone confirm that it is
> posted for all to see or what I need to do to post it.  It is somewhat
> long, but I do not think it is a size limit.
> 
> Thanks,
> 
> Rodd Graham
> 
> 

It is visible on the list. For some time Nabble reports this message
while the message gets delivered, I do not know why.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/A-few-questions-about-MT-tp19555409p19682085.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From hbco2 at sbcglobal.net  Fri Sep 26 02:37:32 2008
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Fri Sep 26 02:37:36 2008
Subject: Re[Harbour] quest to share MT knowledge on Xbase++ NG
In-Reply-To: <19681131.post@talk.nabble.com>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com> <19681028.post@talk.nabble.com>
	<19681131.post@talk.nabble.com>
Message-ID: <1222411052.3730.22.camel@hblx.340cst>

I'll stick my nose in here with the suggestion that perhaps this is not
the proper place to discuss this material. As valid as the topic might
be on a neutral newsgroup, there are all sorts of possible ramifications
and unintended consequences that can come of discussions here that could
affect development of Harbour.

There must be other venues where this discussion can be conducted, (and
I'd love to follow those threads) but my vote is to stick with
Harbour-specific topics in the Harbour newsgroups.

As always, much appreciation for all the tremendous work, contribution
and exciting results we all appreciate in the development of this
compiler.

Bill


On Thu, 2008-09-25 at 18:27 -0700, Pritpal Bedi wrote:
> Rodd
> 
> 
> RoddGraham wrote:
> > 
> > Please look again at Xbase++ NG.  Jan does not represent my position and
> > other Xbase++ users may yet respond.
> > 
> 
> Thanks for the support.
> 
> Regards
> Pritpal Bedi
> 

From mbelgrano at deltain.it  Fri Sep 26 03:02:27 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Sep 26 03:02:42 2008
Subject: [Harbour] Harbour announcement on XBase++ NG :(
In-Reply-To: <74F249DC-C543-4EC8-A582-2D8DC75966C2@syenar.hu>
References: <F2F6DCE1-349E-41F5-95F6-F89094653C27@syenar.hu><19680425.post@talk.nabble.com>
	<74F249DC-C543-4EC8-A582-2D8DC75966C2@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F000@SRV02.deltain.net>

I ty to remember

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Friday, September 26, 2008 2:02 AM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Harbour announcement on XBase++ NG :(

Hi Pritpal,

I know, this mail was targeted to Massimo specifically.

Brgds,
Viktor

On 2008.09.26., at 1:58, Pritpal Bedi wrote:

>
> Sorry Viktor
>
>> Hi Massimo and all,
>
> My post was related with knowledge on MT issues
> which can be well described by Xbase++ user.
>
> Also I have learned that it is not good to
> post any such messages on their NG. Probably one more
> message will be my last on this topic.
>
> Regards
> Pritpal Bedi
>
>
> -- 
> View this message in context: http://www.nabble.com/Harbour-announcement-on-XBase%2B%2B-NG-%3A%28-tp19679834p19680425.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From rgraham at grahamautomation.com  Fri Sep 26 03:03:53 2008
From: rgraham at grahamautomation.com (RoddGraham)
Date: Fri Sep 26 03:03:59 2008
Subject: [Harbour] [SPAM]  Re: Request to share MT knowledge on Xbase++ NG
In-Reply-To: <20080926000053.GC2629@34-mo7-2.acn.waw.pl>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com>
	<6EA5E4C3-6DBD-40C7-A7B8-00C19298DD03@syenar.hu>
	<20080925231342.GB2629@34-mo7-2.acn.waw.pl>
	<20080926000053.GC2629@34-mo7-2.acn.waw.pl>
Message-ID: <19683494.post@talk.nabble.com>



Przemyslaw Czerpak-2 wrote:
> 
> In this code we have:
>    lInUse := ! lInUse
> To make this code MT safe the above line has to be one atomic
> operation in xBase++. Is it true?
> 

This is not true in Xbase++.  Each variable access (read and write) is
serialized independently which guarantees valid value access and assignment. 
Xbase++ at the .PRG level ONLY provides thread synchronization through SYNC
methods of class objects for building atomic operations larger than
access/assign.  SYNC methods acquire a mutex lock embedded in the class
instance prior to method entry and release the lock upon method exit.  It is
expected (and required) that thread shared values which must be synchronized
be directly or indirectly controlled by the oject instance.  Nested SYNC
methods are supported with the mutex held through the entire sequence.  All
SYNC methods of an object instance shared the same mutex.


Przemyslaw Czerpak-2 wrote:
> 
> The key is in:
>    lInUse := ! lInUse
> line. This code can be MT safe _only_ if xBase++ executes this
> whole line as one atomic operation.
> So far I haven't found any information about such functionality.
> 

Per the above, you won't find that information because your operation is
only thread safe when inside a SYNC method and lInUse is an instance
variable.

Rodd Graham
-- 
View this message in context: http://www.nabble.com/A-few-questions-about-MT-tp19555409p19683494.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From maurilio.longo at libero.it  Fri Sep 26 03:28:55 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Sep 26 03:29:07 2008
Subject: [Harbour] 2008-09-24 20:30 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080925175334.GA11391@34-mo7-2.acn.waw.pl>
References: <20080924183031.GA4901@34-mo7-2.acn.waw.pl>	<48DBA04B.8030501@libero.it>	<20080925151748.GD14636@34-mo7-2.acn.waw.pl>	<48DBAD8E.7040600@libero.it>	<20080925153106.GA2245@34-mo7-2.acn.waw.pl>	<48DBC3EE.10600@libero.it>
	<20080925175334.GA11391@34-mo7-2.acn.waw.pl>
Message-ID: <48DC8F37.6090402@libero.it>

Przemyslaw,

Przemyslaw Czerpak wrote:
> I expected worse results then Harbour ones but I didn't expect such
> big difference and such big MT overhead. xHarbour does not even use
> protection for complex variable reference counters in OS2 builds -
> Walter implemented them only for MS-Windows.

Now that you reminded me about this I've checked and my local copy of xHarbour
has this change for OS/2 as well (I just had not enough time to commit it) but
 it is done using a C runtime functions

#define HB_ATOMIC_INC( x )          __atomic_increment_s32( (long *) &(x) )
#define HB_ATOMIC_DEC( x )          __atomic_decrement_s32( (long *) &(x) )

instead of your inlined asm, so this could have a much higher overhead.

I'll try to port your code back to xHarbour and see what changes speed wise.

I did a full rebuild before testing, though.

Best regards.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From rgraham at grahamautomation.com  Fri Sep 26 03:30:13 2008
From: rgraham at grahamautomation.com (RoddGraham)
Date: Fri Sep 26 03:30:19 2008
Subject: Re[Harbour] quest to share MT knowledge on Xbase++ NG
In-Reply-To: <1222411052.3730.22.camel@hblx.340cst>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com> <19681028.post@talk.nabble.com>
	<19681131.post@talk.nabble.com>
	<1222411052.3730.22.camel@hblx.340cst>
Message-ID: <19683752.post@talk.nabble.com>



Bill Smith-12 wrote:
> 
> There must be other venues where this discussion can be conducted, (and
> I'd love to follow those threads) but my vote is to stick with
> Harbour-specific topics in the Harbour newsgroups.
> 

Sorry to have intruded.  I felt led to contribute per Pritpal's invitation
on the Xbase++ NG which included a link directly to this thread.  Hopefully
my other posts on this thread are helpful for Harbour to understand Xbase++
MT.

As I stated on the Xbase++ NG, it is in the xBase dialect communities
interest to converge the language implementations on the best practices of
all the players.  IMO, Harbour, xHarbour, and Xbase++ users should embrace
our shared heritage in the Clipper branch of the dBase tree.

Just as importantly, we should look to the Visual Objects/Vulcan and
Foxbase/Foxpro branches as peers with a common interest in migrating a
legacy application development language into modern environments.  

When practical, interoperability between the implementations is good.  

Otherwise, we can see our fate by looking at our COBOL and RPG predecessors
or the countless 'toy' languages depending upon how you perceive xBase.

Regards,

Rodd Graham
-- 
View this message in context: http://www.nabble.com/A-few-questions-about-MT-tp19555409p19683752.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From maurilio.longo at libero.it  Fri Sep 26 03:34:50 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Sep 26 03:34:58 2008
Subject: [Harbour] Re: 2008-09-24 20:30 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <48DBFD26.90906@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48DBFD26.90906@mail.udg.mx>
Message-ID: <48DC909A.3010605@libero.it>

David Arturo Macias Corona wrote:
> 
> 
> I see many surprises:
> 
> a) PIV HT 3.6GHz, SMP Kernel.
> My hardware for OS/2 tests are AMD Athlon 2200+ 2.0 Ghz 1 Gb RAM
> This Athlon never are ahead of an PIV 2.2 GHz, my "old" PIV 3.3 GHz HT
> was allways near double speed than Athlon in any test
> So something is wrong: results for PIV HT 3.6 Ghz should be better than
> Athlon 2200+ at least in half of time
> 
> Or your machine is heavily loaded, or low RAM or something else, but
> must be better
> 
No load, 1Gb of ram mostly free.

It is a HP Compaq dc5100 SFF (PM215AV) with a 3.6 GHz PIV HT cpu, I've just
checked in the BIOS. It has a 28/2048 Kb L1/L2 cache.

It could be that the SMP kernel is not well suited for a HT system, maybe it
really needs a multicore/multicpu system.

I don't know, but the system doesn't seem to be slow or sluggish in any way.

> b) A very big difference between Harbour and xHarbour in both ST and MT
> 
> c) A very big difference between ST and MT in xHarbour
> 
See my other answer to Przemyslaw.
> 
> As I have xHarbour MT under OS/2 (yes, Maurilio told me how to build it)
> I made same tests. xHarbour around 14 August 2008
> 
> speedtst.prg
> 
> Harbour
> =======
> ST
>      total application time:                              47.13
>      total real time:                                     47.14
> MT
>      total application time:                              51.98
>      total real time:                                     51.98
> 
> xHarbour
> ========
> ST
>      total application time:                              71.52
>      total real time:                                     71.52
> MT
>      total application time:                             119.68
>      total real time:                                    119.69
> 
> 
At first sight xHarbour ST is nearly twice as slow as Harbour ST and xHarbour
MT is more than twice slow than Harbour.

Best regards.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From labitas at gmail.com  Fri Sep 26 03:44:27 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Fri Sep 26 03:44:34 2008
Subject: [Harbour] mingw results and Windows compiler roundup
In-Reply-To: <20080925165239.GA14100@34-mo7-2.acn.waw.pl>
References: <2F123EDF-F43A-4FDB-885F-154A08CA1321@syenar.hu>
	<20080925092556.GA7193@34-mo7-2.acn.waw.pl>
	<20080925165239.GA14100@34-mo7-2.acn.waw.pl>
Message-ID: <2386af1b0809260044u159e6293o7094dbb203034cac@mail.gmail.com>

Hi, Przemek

> An now I compared BCC-5.5 and GCC-4.3.1 assembler code generated for
> such modified HVM and this simple code:
>
>   void func( void )
>   {
>      hb_stackPush();
>      hb_stackPop();
>   }

GCC generates wonderfull code

In my experience BCC produces best code by changing, say

#define hb_stackPush( )             do { \
                                       if( ++hb_stack.pPos == hb_stack.pEnd ) \
                                          hb_stackIncrease(); \
                                    } while ( 0 )


#define hb_stackPop( )              do { --hb_stack.pPos; \
                                       if( HB_IS_COMPLEX( * hb_stack.pPos ) ) \
                                          hb_itemClear( * hb_stack.pPos ); \
                                    } while ( 0 )

into


#define hb_stackPush( )             do { PHB_STACK p = &hb_stack; \
                                       if( ++p->pPos == p->pEnd ) \
                                          hb_stackIncrease(); \
                                    } while ( 0 )


#define hb_stackPop( )              do { PHB_STACK p = &hb_stack; --p->pPos; \
                                       if( HB_IS_COMPLEX( * p->pPos ) ) \
                                          hb_itemClear( * p->pPos ); \
                                    } while ( 0 )

This gives:

        mov       eax,offset _hb_stack
        add       dword ptr [eax+4],4
        mov       edx,dword ptr [eax+4]
        cmp       edx,dword ptr [eax+8]
        jne       short @3
        call      _hb_stackIncrease
@3:
        mov       eax,offset _hb_stack
        sub       dword ptr [eax+4],4
        mov       edx,dword ptr [eax+4]
        mov       edx,dword ptr [edx]
        test      dword ptr [edx],46085
        je        short @6
        push      edx
        call      _hb_itemClear
        pop       ecx
@6:

Anyway, this is not lifebuoy, there is no possibilities in all places
do translators work.

Best regards,
Saulius
From maurilio.longo at libero.it  Fri Sep 26 04:37:40 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Sep 26 04:37:49 2008
Subject: [Harbour] 2008-09-24 20:30 UTC+0200
	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <48DC8F37.6090402@libero.it>
References: <20080924183031.GA4901@34-mo7-2.acn.waw.pl>	<48DBA04B.8030501@libero.it>	<20080925151748.GD14636@34-mo7-2.acn.waw.pl>	<48DBAD8E.7040600@libero.it>	<20080925153106.GA2245@34-mo7-2.acn.waw.pl>	<48DBC3EE.10600@libero.it>	<20080925175334.GA11391@34-mo7-2.acn.waw.pl>
	<48DC8F37.6090402@libero.it>
Message-ID: <48DC9F54.6080604@libero.it>

Przemyslaw,

I've used your inlined asm inc/dec routines and now xHarbour MT is a little
bit faster, but not so much.

xHarbour MT

total application time:                             203.21
total real time:                                    203.22

Best regards.

Maurilio.


Maurilio Longo wrote:
> Przemyslaw,
> 
> Przemyslaw Czerpak wrote:
>> I expected worse results then Harbour ones but I didn't expect such
>> big difference and such big MT overhead. xHarbour does not even use
>> protection for complex variable reference counters in OS2 builds -
>> Walter implemented them only for MS-Windows.
> 
> Now that you reminded me about this I've checked and my local copy of xHarbour
> has this change for OS/2 as well (I just had not enough time to commit it) but
>  it is done using a C runtime functions
> 
> #define HB_ATOMIC_INC( x )          __atomic_increment_s32( (long *) &(x) )
> #define HB_ATOMIC_DEC( x )          __atomic_decrement_s32( (long *) &(x) )
> 
> instead of your inlined asm, so this could have a much higher overhead.
> 
> I'll try to port your code back to xHarbour and see what changes speed wise.
> 
> I did a full rebuild before testing, though.
> 
> Best regards.
> 
> Maurilio.
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From mbelgrano at deltain.it  Fri Sep 26 05:35:16 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Sep 26 05:35:40 2008
Subject: [Harbour] New in FlagShip rel 6 (Visual FlagShip) will be
	intresting for harbour 
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F003@SRV02.deltain.net>


The FS6 compiler and library handles now THREE different i/o modes:
GUI : graphical oriented i/o, requires X11 or Windows32
Terminal: text/curses oriented i/o e.g. for console or remote terminals,
same behavior as
FlagShip 4.48. Available for Unix & Linux only.
Basic : basic/stream i/o e.g. for Web, CGI, background processing etc.
The screen
oriented i/o is roughly simulated for source compatibility purposes.

@..SAY and ? accepts also RichText when the string starts with <html>
string or when SET
HTMLTEXT is ON. Additional features are the graphic cursor in GUI mode
(see SET
GUICURSOR ON) and optional clauses for specific FONT, COLOR, GUICOLOR
etc. More
details in section CMD.
@..SAY IMAGE allows to display graphic images in gif, png, bmp, jpeg and
another common
formats, including scaling, borders and so forth.
@..GET the PICTURE template mask was extended for 'B' (alpha + space),
'^' (protected),
'_' (uneditable space)
@..GET/READ handles cut & paste
@..PROMPT/MENU TO accepts '&' and '\>' for hotkeys. Nested PROMPTs are
supported to
any level by using PRIVATE or LOCAL _oPrompt variable, comparable to
nested GETs. It
also has optional clauses for color, style, codeblock processing etc.
Selection by single or
double mouse click is adjustable too.
@..BOX can draw sunken, raised or plain GUI boxes
Source http://www.fship.com/manual/fsman_REL.pdf

Massimo Belgrano

From mbelgrano at deltain.it  Fri Sep 26 05:38:35 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Sep 26 05:38:51 2008
Subject: [Harbour] Finding memoedit advanced expreriences
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F004@SRV02.deltain.net>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 3559 bytes
Desc: image001.gif
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080926/a626c7e1/attachment.gif
From mbelgrano at deltain.it  Fri Sep 26 05:40:03 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Sep 26 05:40:16 2008
Subject: [Harbour] Finding memoedit advanced expreriences
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F004@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815F004@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F005@SRV02.deltain.net>

Sorry for signature


From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Massimo
Belgrano
Sent: Friday, September 26, 2008 11:39 AM
To: Harbour Project Main Developer List.
Subject: [Harbour] Finding memoedit advanced expreriences

Have anyone made cut/copy/past, search/replace with memoedit?
Can this experienced be shared? 

Will a rtf editor be written in pure prg?

Massimo Belgrano

From harbour.01 at syenar.hu  Fri Sep 26 06:22:37 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 26 06:22:47 2008
Subject: Re[Harbour] quest to share MT knowledge on Xbase++ NG
In-Reply-To: <19683752.post@talk.nabble.com>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com> <19681028.post@talk.nabble.com>
	<19681131.post@talk.nabble.com>
	<1222411052.3730.22.camel@hblx.340cst>
	<19683752.post@talk.nabble.com>
Message-ID: <CE0F292C-41D9-4AB5-BF95-FB0B74852649@syenar.hu>

Hi Rodd,

>> There must be other venues where this discussion can be conducted,  
>> (and
>> I'd love to follow those threads) but my vote is to stick with
>> Harbour-specific topics in the Harbour newsgroups.
>>
>
> Sorry to have intruded.  I felt led to contribute per Pritpal's  
> invitation
> on the Xbase++ NG which included a link directly to this thread.   
> Hopefully
> my other posts on this thread are helpful for Harbour to understand  
> Xbase++
> MT.

Many thanks for dropping in and posting your experiences.

It's also good to see friendly tones on the relevant XBase++
NG threads.

> As I stated on the Xbase++ NG, it is in the xBase dialect communities
> interest to converge the language implementations on the best  
> practices of
> all the players.  IMO, Harbour, xHarbour, and Xbase++ users should  
> embrace
> our shared heritage in the Clipper branch of the dBase tree.
> Just as importantly, we should look to the Visual Objects/Vulcan and
> Foxbase/Foxpro branches as peers with a common interest in migrating a
> legacy application development language into modern environments.
>
> When practical, interoperability between the implementations is good.
>
> Otherwise, we can see our fate by looking at our COBOL and RPG  
> predecessors
> or the countless 'toy' languages depending upon how you perceive  
> xBase.

I absolutely agree.

If the Clipper legacy community is too much occupied with
their own local "territories" instead of focusing on cooperation,
but at least "interoperation", the community will just scatter
the language into small enough and incompatible enough parts
to risk them becoming irrelevant and just disappear.

I still didn't give up on implementing the "dialect" idea we
have discussed some time ago here. That would mean that language
extensions would be packaged into separate libs instead of
being build-time #ifdef options. This would allow opening this
field for 3rd party developers and also for us to more freely
implement such extensions while letting the users decide which
they want to use. To implement this clearly though, we may
need some new language features (to extend classes, maybe
even implement different functionality for the same function
name - but this latter is really the ugly side of interoperability).
Although I believe there is certain point which can be reached
with existing facilities, mainly by moving dialect dependent
features into separate libs and separate source dirs.

Opinions regarding this is highly welcome.

Brgds,
Viktor

From dmacias at mail.udg.mx  Fri Sep 26 07:47:27 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Sep 26 07:47:27 2008
Subject: [Harbour] Re: 2008-09-19 22:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48DCCBCF.7080302@mail.udg.mx>

Przemek:

> If you want then you can also try to use -O3 instead of -O2 GCC
> optimization flag. It enables some additional optimizations like
> automatic normal function inlining. Probably it will give some
> additional 2-5% of speed improvement in ST and MT mode.

I made a fresh build using:
CFLAGS = -W -Wall -O3
	
The improvement was marginal
slightly lower with ST and slightly higher with MT
Both results can be explained by variations in OS tasks too

ST
    total application time:                              45.81
    total real time:                                     45.81
MT
    total application time:                              52.78
    total real time:                                     52.78

Previous:
ST
      total application time:                              47.13
      total real time:                                     47.14
MT
      total application time:                              51.98
      total real time:                                     51.98

David Macias



Startup loop to increase CPU clock...

09/26/08 06:21:27 Harbour 1.1.0dev (Rev. 9508), OS/2 4.50
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.13
CPU usage -> secondsCPU()

c:=L_C ->                                             0.12
n:=L_N ->                                             0.10
d:=L_D ->                                             0.10
c:=M_C ->                                             0.12
n:=M_N ->                                             0.10
d:=M_D ->                                             0.10
(sh) c:=F_C ->                                        0.43
(sh) n:=F_N ->                                        0.36
(sh) d:=F_D ->                                        0.20
(ex) c:=F_C ->                                        0.41
(ex) n:=F_N ->                                        0.37
(ex) d:=F_D ->                                        0.21
n:=o:GenCode ->                                       0.32
n:=o[8] ->                                            0.21
round(i/1000,2) ->                                    0.47
str(i/1000) ->                                        1.35
val(a3[i%ARR_LEN+1]) ->                               0.84
dtos(j+i%10000-5000) ->                               0.98
eval({||i%ARR_LEN}) ->                                0.44
eval({|x|x%ARR_LEN},i) ->                             0.49
eval({|x|f1(x)},i) ->                                 0.69
&('f1('+str(i)+')') ->                                7.72
eval([&('{|x|f1(x)}')]) ->                            0.71
j := valtype(a)+valtype(i) ->                         0.88
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                1.73
j := val(a2[i%ARR_LEN+1]) ->                          0.92
j := a2[i%ARR_LEN+1] == s ->                          0.61
j := a2[i%ARR_LEN+1] = s ->                           0.69
j := a2[i%ARR_LEN+1] >= s ->                          0.67
j := a2[i%ARR_LEN+1] < s ->                           0.68
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         2.21
f0() ->                                               0.28
f1(i) ->                                              0.39
f2(c[8]) ->                                           0.33
f2(c[40000]) ->                                       0.33
f2(@c[40000]) ->                                      0.31
f2(c[40000]); c2:=c ->                                0.45
f2(@c[40000]); c2:=c ->                               0.44
f3(a,a2,c,i,j,t,bc) ->                                0.70
f2(a2) ->                                             0.34
s:=f4() ->                                            1.25
s:=f5() ->                                            0.63
ascan(a,i%ARR_LEN) ->                                 0.60
ascan(a2,c+chr(i%64+64)) ->                           2.39
ascan(a,{|x|x==i%ARR_LEN}) ->                         6.00
============================================================
total application time:                              45.81
total real time:                                     45.81



Startup loop to increase CPU clock...

09/26/08 06:25:11 Harbour 1.1.0dev (Rev. 9508) (MT), OS/2 4.50
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.15
CPU usage -> secondsCPU()

c:=L_C ->                                             0.13
n:=L_N ->                                             0.10
d:=L_D ->                                             0.11
c:=M_C ->                                             0.14
n:=M_N ->                                             0.12
d:=M_D ->                                             0.11
(sh) c:=F_C ->                                        0.43
(sh) n:=F_N ->                                        0.37
(sh) d:=F_D ->                                        0.20
(ex) c:=F_C ->                                        0.42
(ex) n:=F_N ->                                        0.36
(ex) d:=F_D ->                                        0.20
n:=o:GenCode ->                                       0.36
n:=o[8] ->                                            0.23
round(i/1000,2) ->                                    0.48
str(i/1000) ->                                        1.43
val(a3[i%ARR_LEN+1]) ->                               0.92
dtos(j+i%10000-5000) ->                               1.07
eval({||i%ARR_LEN}) ->                                0.50
eval({|x|x%ARR_LEN},i) ->                             0.54
eval({|x|f1(x)},i) ->                                 0.78
&('f1('+str(i)+')') ->                                8.98
eval([&('{|x|f1(x)}')]) ->                            0.81
j := valtype(a)+valtype(i) ->                         0.97
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                1.85
j := val(a2[i%ARR_LEN+1]) ->                          0.98
j := a2[i%ARR_LEN+1] == s ->                          0.64
j := a2[i%ARR_LEN+1] = s ->                           0.70
j := a2[i%ARR_LEN+1] >= s ->                          0.70
j := a2[i%ARR_LEN+1] < s ->                           0.72
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         3.52
f0() ->                                               0.29
f1(i) ->                                              0.44
f2(c[8]) ->                                           0.35
f2(c[40000]) ->                                       0.35
f2(@c[40000]) ->                                      0.34
f2(c[40000]); c2:=c ->                                0.47
f2(@c[40000]); c2:=c ->                               0.47
f3(a,a2,c,i,j,t,bc) ->                                0.82
f2(a2) ->                                             0.35
s:=f4() ->                                            1.34
s:=f5() ->                                            0.79
ascan(a,i%ARR_LEN) ->                                 0.67
ascan(a2,c+chr(i%64+64)) ->                           2.54
ascan(a,{|x|x==i%ARR_LEN}) ->                         7.74
============================================================
total application time:                              52.78
total real time:                                     52.78




From druzus at acn.waw.pl  Fri Sep 26 11:00:27 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 26 11:01:01 2008
Subject: [Harbour] Re: 2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48DBFD26.90906@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48DBFD26.90906@mail.udg.mx>
Message-ID: <20080926150027.GA11051@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, David Arturo Macias Corona wrote:

Hi David,

> I see many surprises:
> speedtst.prg
> Harbour
> =======
> ST
>      total application time:                              47.13
> MT
>      total application time:                              51.98
>
> xHarbour
> ========
> ST
>      total application time:                              71.52
> MT
>      total application time:                             119.68

Your results are more similar to the ones I have in my Linux box
and only Harbour MT overhead is bigger.
I took current Harbour and xHarbour code and unmodified speedtst.prg
from Harbour SVN and I have:

Harbour
      ST: total application time:      25.10
      MT: total application time:      27.99
xHarbour:
      ST: total application time:      38.23
      MT: total application time:      51.95

   Harbour MT overhead to ST mode is:  11.51%
   xHarbour MT overhead to ST mode is: 35.89%

   xHarbour ST mode is 52.31% slower then Harbour
   xHarbour MT mode is 86.60% slower then Harbour

In your results:

   Harbour MT overhead to ST mode is:  10.27%
   xHarbour MT overhead to ST mode is: 67.34%

   xHarbour ST mode is 51.75% slower then Harbour
   xHarbour MT mode is 130.26% slower then Harbour

As I said the only one noticeable difference is bigger MT overhead
in xHarbour for OS2 then in xHarbour for Linux. The rest is in practice
proportionally the same.
The overhead ~10-15 percent seems to be minimal cost we have to pay for
MT mode in Harbour and cannot be significantly reduced.
I also made test for cost of MT overhead in Linux when native compiler
TLS support is disabled in Harbour.
   MT: total application time:      37.58
The overhead is huge: 49.72% and this is more close to the results
in Windows which Viktor has.

I made BCC build in my linux box and the results are:
   ST: 34.32
   MT: 42.61
MT ooverhead is 24.16%
Now we have HB_STACK_TLS_PRELOAD macro which allows to use
Mindaugas inlined assembler code for TLS access:
   ST: 34.21
   MT: 41.60
It reduces the overhead to 21.60%. Rather small. Any how I'll
add it to SVN code so users can make test in real windows environment.
If they do not show noticeable improvement then I'll remove it from
SVN.
Finally I tested cross build version of MinGW-3.4.5 and I'm very
surprised with the results:
   ST: 22.35
   MT: 31.69
The ST code is faster then native linux code. I noticed that programs
executed by WINE runs fater on real multi CPU machine but I haven't
expected anything like that.
The MT overhead is 41.79%.
This MinGW version does not have native TLS support so I create asm
inline function based on the one created for BCC by Mindaugas and it
reduced the MT speedtst time to 28.88 sec. (overhead 29.22%).
I'll commit both inline asm functions to SF repository in a while
and I would like to ask BCC and MinGW users to make speed tests for
MT mode for Harbour compiled with and without -DHB_NO_TLS macro.
It will be the answer if it's worth to keep them or not.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Sep 26 11:05:59 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 26 11:06:35 2008
Subject: [SPAM]  Re: [Harbour] [SPAM]  Re: Request to share MT
	knowledge on Xbase++ NG
In-Reply-To: <19680441.post@talk.nabble.com>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com>
	<20080925222845.GA2629@34-mo7-2.acn.waw.pl>
	<19680441.post@talk.nabble.com>
Message-ID: <20080926150559.GB11051@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, Pritpal Bedi wrote:

Hi Pritpal,

> > why should I as a Xbase++ developer help a competitor to advance its 
> > product???
> > And why do you ask for our help in the Xbase++ generic newsgroup? In my 
> Please do not understand me wrong.

Sorry, I was wrong. I hope that you asked xbase++ authors but
you addressed your question to xbase++ users. I'm surprised with
their reaction.
They should be interesting in working alternatives for xbase++.
Now I do not understand it. Let's return to Harbour problems.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Sep 26 11:08:41 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 26 11:09:14 2008
Subject: [SPAM]  Re: [Harbour] [SPAM]  Re: Request to share MT
	knowledge on Xbase++ NG
In-Reply-To: <19680697.post@talk.nabble.com>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com>
	<6EA5E4C3-6DBD-40C7-A7B8-00C19298DD03@syenar.hu>
	<20080925231342.GB2629@34-mo7-2.acn.waw.pl>
	<20080926000053.GC2629@34-mo7-2.acn.waw.pl>
	<19680697.post@talk.nabble.com>
Message-ID: <20080926150841.GC11051@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, Angel Pais wrote:

Hi Angel,

> First of all I must say you are right, this code isn't thread safe:
> lInUse := ! lInUse
> But i've also said its only a simplification.
> In a real program this code:
> 1- goes inside a sync method of a class
> 2- the logical var does not exit
> 3- the array is a var of the class
> 4- the class is referenced by in a Public var
> My intention was to show you that any manipulation of a public var must be
> enclosed by some kind of semaphore ( be it implemented as a sync method,
> mutex or logical var)

OK, Thanks for confirmation now it's clear. Only the example confused me.

> Any code you want compiled and tested in xbase++ just send it to me and I'll
> be glad to report the results back to you.

Thank you very much for you proposition.
I'll create code to test the relations and lock behavior in released
workarea.

best regards,
Przemek
From rportnoff at spendmap.com  Fri Sep 26 11:27:50 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Fri Sep 26 11:26:28 2008
Subject: [Harbour] A few questions about MT
In-Reply-To: <20080925151048.GC14636@34-mo7-2.acn.waw.pl>
References: <48D2698D.80206@dbtopas.lt>
	<20080918165307.GA15124@34-mo7-2.acn.waw.pl>
	<A1E8AD22-84C4-4717-9C48-26E0664DA207@syenar.hu>
	<20080921231424.GA18618@34-mo7-2.acn.waw.pl>
	<1050CEFC-928C-45E4-AA63-AAF3AB99BF85@syenar.hu>
	<20080925151048.GC14636@34-mo7-2.acn.waw.pl>
Message-ID: <B0083856618@ms1.3peaks.com>

Hi all,

Not sure if this was already covered in this thread so I will mention 
it just in case...

IMO, work areas need to support both per thread and cross thread 
capability, on a per work area basis.

For example, you may have one workarea that needs to be 
thread-specific while another can be
shared across all threads - Similar to PUBLIC versus LOCAL variables.

I could see the PRG syntax looking something like this:

use MYTABLE.DBF new shared threadsafe  // Current thread only

use MYTABLE.DBF new shared  // Can be accessed by all threads

Regards,
Randy.


From sscc at mweb.co.za  Fri Sep 26 11:27:19 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Sep 26 11:27:53 2008
Subject: [SPAM]  Re: [Harbour] [SPAM]  Re: Request to share MT	knowledge
	on Xbase++ NG
In-Reply-To: <20080926150841.GC11051@34-mo7-2.acn.waw.pl>
References: <48D2698D.80206@dbtopas.lt>
	<19675252.post@talk.nabble.com>	<19678591.post@talk.nabble.com>	<6EA5E4C3-6DBD-40C7-A7B8-00C19298DD03@syenar.hu>	<20080925231342.GB2629@34-mo7-2.acn.waw.pl>	<20080926000053.GC2629@34-mo7-2.acn.waw.pl>	<19680697.post@talk.nabble.com>
	<20080926150841.GC11051@34-mo7-2.acn.waw.pl>
Message-ID: <48DCFF57.8000000@mweb.co.za>

Przemyslaw Czerpak wrote:

> I'll create code to test the relations and lock behavior in released
> workarea.

 From Pritpals message about xbase++ behaviour dated 2008/09/17 01:12 AM:

Exchanging alias names between work spaces always involves a virtual work
space, the Zero space. Function DbRelease() releases the alias name of a
work area in the current work space. It is then collected in the Zero 
space
and transferred to a work area of another work space when DbRequest() is
called. If the work area is linked to other work areas (SET RELATION) 
alias
names of all child work areas are transferred as well.
The second parameter <bAreaBlock> is used to define an operation to be
performed within a work area of another work space. It is a code block 
that
is associated with the work area's alias name. When the alias name is
transferred using DbRequest(), the code block is retrieved as well. It can
then be passed to the function Eval() in order to perform the database
operation.

I do not recall any mention of locks.

Regards
Alex
From abe.buch at att.net  Fri Sep 26 11:40:51 2008
From: abe.buch at att.net (Abeb)
Date: Fri Sep 26 11:40:57 2008
Subject: [Harbour] how to force Num-Lock on?  gtwvt
Message-ID: <19691006.post@talk.nabble.com>


How can i catch that num-lock was pressed (or any other key like
ctrl,shift,alt) and force num-lock on?

useing gtwvt

thanks
abe.

-- 
View this message in context: http://www.nabble.com/how-to-force-Num-Lock-on---gtwvt-tp19691006p19691006.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From abe.buch at att.net  Fri Sep 26 11:41:34 2008
From: abe.buch at att.net (Abeb)
Date: Fri Sep 26 11:41:39 2008
Subject: [Harbour] how to play wav files, useing gtwvt?
Message-ID: <19691028.post@talk.nabble.com>


as subject
thanks
abe

-- 
View this message in context: http://www.nabble.com/how-to-play-wav-files%2C-useing-gtwvt--tp19691028p19691028.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From lorenzo.fiorini at gmail.com  Fri Sep 26 12:01:12 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Sep 26 12:01:22 2008
Subject: [Harbour] Re: 2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080926150027.GA11051@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48DBFD26.90906@mail.udg.mx>
	<20080926150027.GA11051@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809260901u45fab471ye7eeaac14362f976@mail.gmail.com>

On Fri, Sep 26, 2008 at 5:00 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> Finally I tested cross build version of MinGW-3.4.5 and I'm very
> surprised with the results:
>   ST: 22.35
>   MT: 31.69
> The ST code is faster then native linux code. I noticed that programs
> executed by WINE runs fater on real multi CPU machine but I haven't
> expected anything like that.
> The MT overhead is 41.79%.
> This MinGW version does not have native TLS support so I create asm
> inline function based on the one created for BCC by Mindaugas and it
> reduced the MT speedtst time to 28.88 sec. (overhead 29.22%).
> I'll commit both inline asm functions to SF repository in a while
> and I would like to ask BCC and MinGW users to make speed tests for
> MT mode for Harbour compiled with and without -DHB_NO_TLS macro.
> It will be the answer if it's worth to keep them or not.

I've also found that the official 3.4.5 is faster than 4.3.2 tdm
unofficial even in a native Win ( W2Ksp4 under VirtualBox VM ).

best regards,
Lorenzo
From maurilio.longo at libero.it  Fri Sep 26 12:13:46 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Sep 26 12:13:58 2008
Subject: [Harbour] Re: 2008-09-24 20:30 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080926150027.GA11051@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<48DBFD26.90906@mail.udg.mx>
	<20080926150027.GA11051@34-mo7-2.acn.waw.pl>
Message-ID: <48DD0A3A.6070109@libero.it>

Hi Przemyslaw,

Przemyslaw Czerpak wrote:
> 
> Your results are more similar to the ones I have in my Linux box
> and only Harbour MT overhead is bigger.
> I took current Harbour and xHarbour code and unmodified speedtst.prg
> from Harbour SVN and I have:
> 

I did several tests to understand why my results are so different:

first, pc is as fast as it has to be :) I mean I used a speed comparison tool
and I've tested my pc against a PIV 2.4 GHz with OS/2 and a UNI kernel and
I've got these results

  PIV 2.4GHz UNI   --  PIV 3.6GHz HT SMP
CPU INT   2001.95          2863.38
CPU FLOAT   91.49           217.92
MEMORY    4481.71          5213.02

so, pc speed seems ok, but, I've noticed one thing, when I run speedtst on the
 UNI kernel I see that the single CPU is maxed out (using OS/2 version of task
manager, just to give you an idea).

When i run it on the SMP kernel, though, both CPUs keep going up and down, in
spikes, as if there is some call which suspends the program for a certain
amount of time.

This peculiar behaviour does not happen when I run the speed comparison tool,
so it has to be something inside speedtst and/or harbour runtime and/or gcc
runtime, but I don't understand what!

Maybe there are calls to mutexes and/or critical sections which happen so
often as to slow down everything.

I've made another test, even a loop like this

while .T.
enddo

does not max out a single cpu even if I write it in C !

I really don't understand :)

Maurilio.



-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.



From m-vogel at gmx.net  Fri Sep 26 12:13:51 2008
From: m-vogel at gmx.net (Martin Vogel)
Date: Fri Sep 26 12:14:08 2008
Subject: [Harbour]  Re: Request to share MT	knowledge on Xbase++ NG
In-Reply-To: <20080926150559.GB11051@34-mo7-2.acn.waw.pl>
References: <48D2698D.80206@dbtopas.lt>
	<19675252.post@talk.nabble.com>	<19678591.post@talk.nabble.com>	<20080925222845.GA2629@34-mo7-2.acn.waw.pl>	<19680441.post@talk.nabble.com>
	<20080926150559.GB11051@34-mo7-2.acn.waw.pl>
Message-ID: <48DD0A3F.4090803@gmx.net>

Hi Przemek, all,

it probably is not that important, but this might be an explanation:

In the xbase++ forums, you can often see people writing about "harbour",
but what they mean is the commercial release of xHarbour. And the latter
IS a competitor to xbase++...

And I do not know how much the concept of free software (free as in free
speech) has been discussed in their community. Free software where it is
perfectly allowed to have & keep & copy the source code, to fork a
project, ... isn't that great (I'm serious!)?

Having said that: Keep up your superb work, guys! Congrats to 1.0.x!!
And thank you for releasing your great work as free software!

-Martin








Przemyslaw Czerpak wrote:
> On Thu, 25 Sep 2008, Pritpal Bedi wrote:
> 
> Hi Pritpal,
> 
>>> why should I as a Xbase++ developer help a competitor to advance its 
>>> product???
>>> And why do you ask for our help in the Xbase++ generic newsgroup? In my 
>> Please do not understand me wrong.
> 
> Sorry, I was wrong. I hope that you asked xbase++ authors but
> you addressed your question to xbase++ users. I'm surprised with
> their reaction.
> They should be interesting in working alternatives for xbase++.
> Now I do not understand it. Let's return to Harbour problems.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

From harbour.01 at syenar.hu  Fri Sep 26 12:19:05 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 26 12:19:15 2008
Subject: [Harbour] SVN: Created tag harbour-1.0.0
In-Reply-To: <20080813170603.GA20044@34-mo7-2.acn.waw.pl>
References: <7F08C37B-12B0-434D-A431-E2A9A8D25A55@syenar.hu>
	<20080813170603.GA20044@34-mo7-2.acn.waw.pl>
Message-ID: <D32F45A5-AE4E-4238-AFD1-B2FE9C6A8472@syenar.hu>

Hi Przemek,

> And I would like to ask someone who can update Harbour home page
> to add me to developers list. I was not with you when the project
> started but in last years I created a lot of core code which is
> now heart of Harbour.
> As I can see also many other people should be added to this list.

I've got access to our page from Phil, and I've added you
to the Harbour crew page.

Please check it and tell me if you want to change anything.

Brgds,
Viktor

From maurilio.longo at libero.it  Fri Sep 26 12:25:06 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Sep 26 12:25:13 2008
Subject: [Harbour] Re: 2008-09-24 20:30 UTC+0200
	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <48DD0A3A.6070109@libero.it>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<48DBFD26.90906@mail.udg.mx>	<20080926150027.GA11051@34-mo7-2.acn.waw.pl>
	<48DD0A3A.6070109@libero.it>
Message-ID: <48DD0CE2.30906@libero.it>

Uhm,

this sample puts both cpus at 100%

function main()
   hb_threadStart( @t() )
   while .t.
   enddo
return

function t()
    while .t.
    enddo
return


but if in main thread I call Inkey(100) CPUs start spiking again...

Maurilio.

PS. BTW, If I press Alt-C process does not stop, probably only single thread
gets stopped. See here, I had to press Alt-C two times.


(E:\repository\harbour-svn\tests\mt)mau

Cancelled at: T (9) in mau.prg

Cancelled at: INKEY (0)
MAIN (5) in mau.prg

(E:\repository\harbour-svn\tests\mt)





-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Fri Sep 26 12:31:03 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 26 12:31:14 2008
Subject: [Harbour]  Re: Request to share MT	knowledge on Xbase++ NG
In-Reply-To: <48DD0A3F.4090803@gmx.net>
References: <48D2698D.80206@dbtopas.lt>
	<19675252.post@talk.nabble.com>	<19678591.post@talk.nabble.com>	<20080925222845.GA2629@34-mo7-2.acn.waw.pl>	<19680441.post@talk.nabble.com>
	<20080926150559.GB11051@34-mo7-2.acn.waw.pl>
	<48DD0A3F.4090803@gmx.net>
Message-ID: <39EFF047-04E8-46A8-8CDE-38FB4DE5552D@syenar.hu>

> it probably is not that important, but this might be an explanation:
>
> In the xbase++ forums, you can often see people writing about  
> "harbour",
> but what they mean is the commercial release of xHarbour. And the  
> latter
> IS a competitor to xbase++...
>
> And I do not know how much the concept of free software (free as in  
> free
> speech) has been discussed in their community. Free software where  
> it is
> perfectly allowed to have & keep & copy the source code, to fork a
> project, ... isn't that great (I'm serious!)?
>
> Having said that: Keep up your superb work, guys! Congrats to 1.0.x!!
> And thank you for releasing your great work as free software!

Thanks Martin. I've also noticed that some/most folks replying
to recent threads seem to confuse Harbour and xhb (and probably
thinking Harbour being the same as xhb).

Brgds,
Viktor

From druzus at acn.waw.pl  Fri Sep 26 12:38:37 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 26 12:39:11 2008
Subject: [SPAM]  Re: Re[Harbour] quest to share MT knowledge on Xbase++ NG
In-Reply-To: <19681451.post@talk.nabble.com>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19681451.post@talk.nabble.com>
Message-ID: <20080926163837.GD11051@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, RoddGraham wrote:

Hi Rodd,

Nice to see your messages again.

> As a MT Xbase++ user, I have knowledge of its features and shortcommings.
> 1) Xbase++ is MT, but only reliable on single cpu core within the process. 
> By default, the Xbase++ runtime sets single core affinity with the OS.  In
> fact you must make an undocumented setting to allow Xbase++ to use multiple
> cores after which it will lock (live or dead I do not know) in a race
> condition.  I speculate it is the fact that the developer likes to self
> implement the thread concurrency controls at the metal rather than using the
> OS facilities.  The undocumented setting changes the thread synchronization
> algorithm used from one optimized for single core which is incompatible in a
> multi-core environment.  To the developers credit, see item #3 for the
> reason why thread synchronization performance is a big issue in xBase
> dialects.  My experience is Xbase++ performance is unacceptable when
> attempting multi-core processing even if the lock issue was resolved. 
> Probably why it is not a big priority for Alaska to fix.

Interesting. Such weak scalability is usually result of intensive
critical section usage. In the last two years are invest a lot of time
to eliminate such code so now only few small elements are covered by
critical sections what should not reduce the performance on real multi
CPU machines.

> 2) PUBLICs are global, PRIVATEs and WORKAREAs are thread local.  IMO, you
> have flexibility in defining visibility scope as you add MT to harbour since
> pre-existing non-MT code does not have the concept of thread local nor does
> it have more than one thread.  From my perspective, the xBase++ scoping is
> correct as PUBLICs/PRIVATEs are rarely used in a professional architecture
> and only necessary when they must be accessed by runtime symbolic
> references.

In current harbour code when thread is started user can define what
should happen with existing memvar variables (PUBLICs and PRIVATEs).
It's possible:
   1. do not pass any PUBLICs and PRIVATEs to the child thread
   2. copy PUBLICs and/or PRIVATEs to the child thread
   3. share PUBLICs and/or PRIVATEs with the child thread
Of course each child thread creating other threads can also make the
same. When PRIVATEs are copied or shared with child thread then
it see them as PUBLICs.

> WORKAREAs could go either way, but it simplifies concurrency to
> file locking for native file RDDs to have them thread local.  Of course with

In Harbour it will works in the same way. You can also move WA between
threads. The xbase++ compatible functions dbRelease() and dbRequest() exist
in harbour.
In the future I'll add also support to clone workarea. Such cloned WA
will use common file IO handles, buffers and file lock pool. I'm also
thinking about adding pseudo exclusive mode which will be exclusive for
other applications but cloned WA will be synced internally without file
locks.

> DBS based RDDs (such as ADS), the session layer may impose serialization
> when shared across threads which leads me to conclude that the entire data
> layer is thread local.  It is because I use ADS and the session
> serialization that I do not pass WORKAREAs between threads in Xbase++. 

The ADS RDD will have to be updated for MT mode. Not all things are safe.
Especially there is a problem with some global settings passing to ADS
library like _SET_DELETED. So far I haven't checked if ACE has some
additional support for MT programs so I cannot say too much about.
Anyhow this I'd like to leave for ADSRDD developers/users. I do not use it.

> Additionally, you have to make a pass of your process state settings (ie.
> SET commands) and decide whether they make more sense globally or thread
> locally.  When in doubt, I lean towards SETtings being thread local since
> they should inherit from the thread that created them which makes them
> behave like global settings if set appropriately in the first thread and
> never changed again.  If the SETting can have inter-thread side effects, it
> should be thread local.

In Harbour alls SETs are inherited from parent thread and each thread uses
it's own copy of SET.

> 3) The single core affinity referred to in item #1 above results in improved
> process thoroughput in Xbase++.  Unlike MT at the C level, the garbage
> collected, shared memory system of xBase languages becomes a choke point due
> to excessive serialization required to guarantee integrity.  Every memory
> variable accessed in every expression must be serialized to ensure the
> validity of the access.  Xbase++ uses the single core optimization that is
> is not possible for two threads to attempt serialization in the exact same
> clock cycle such that certain cpu primitives are guaranteed atomic to
> complete without context switch.  Hence, they reduce the overheads
> associated the traditional hardware level, multi core synchronization
> instructions.  Memory serialization and concurrency is a well known issue
> for C developers, but it is exasperated by the single shared memory
> architecture of the xBase language.

Harbour does not have such protection. I was thinking about it but it has
to cost extremely much. On some architecture it will be real performance
killer if we will call OS synchronization function. It will be necessary
to use some assembler hacks to reduce it. Such elements will have to be
discuss here. Give full complex item integrity protection with the cost
of performance. I'm afraid that it will be hard to agree common decision.
People familiar with MT programming will prefer missing protection and
better performance because for all shared variables it's always necessary
to add own protection and they used to make it correctly. But people who
begins their adventure with MT programing each additional protection will
be welcome. Anyhow for the answer we will have to wait for users' experiences
after working with current code.
Maybe we will chose some middle solution. F.e. synchronization reference
item so user will be able to declare variable as automatically synced in
source code or at RT by some function, f.e. hb_autoSyncVar( @var, <lOnOff> )

> 4) While I am not an implementor of the underlying memory managers, I have
> contemplated how to overcome this problem in Xbase++.  The best idea I have
> to address this problem is to create variables in thread local memory heaps
> that do not require thread synchronization to access.  If a thread accesses
> a variable in another threads heap, it would trigger a move event that would
> relocate the variable to a shared, global heap which requires
> synchronization on all accesses.  Of course the move event would require
> synchronization with the thread that owns the local heap.  I believe that
> this would work since the vast majority of variables are not shared between
> threads.  The GC would only need to synchronize with one thread at a time to
> clean the thead local heaps and hopefully the shared, global heap would be
> small enough that the GC disruption would be limited due to a quick run and
> the possibility that the application threads might not access the global
> heap (ie. be processing from the thread local heap) during its GC.  The
> downside of this architecture is that process memory may fragment quickly
> due to multiple heaps and exhaust Win32 limits.  Of course Win64 breaking
> the 3GB process memory limit is just around the corner.

I will have to think about it longer to give you an answer. Now I cannot
say how it will work with long references chains when some of references
are in thread local heap and some other in thread global. Moving complex
item from local to global thread also does not look easy. F.e. some subarrays
can still be accessible by local variables so we will have to mark all complex
item nodes (it will benecesary to add circularity detection) that they belongs
to common heap. Otherwise they will be still accessible without protection by
other thread local variables. I also see some other problems which will have
to be resolved. Now I do not find it as easy to implement solution.

> 5) Finally, the only thread synchronization feature of Xbase++ at the .PRG
> level is SYNC METHODs which serialize on the object instance (or class
> object for CLASS SYNC METHODs).  This is straight forward implementation
> that requires nothing more than including a serialization mutex in every
> class and instance object which is used by the respective SYNC METHODs.  The
> only caveat is that inter-object deadlocks can occur.  AFAIK, Xbase++ does
> not implement deadlock detection, but leaves it up to the app developer to
> 'don't do that'.  Since any variable or routine can be implemented as a
> CLASS, I find the SYNC METHODs sufficient and elegant to satisfy MT
> development at the .PRG layer.

I'll add sync methods ASAP. It's rather simple job. Now user can use
functions to create their own mutexes which are also condition variables
and message queues so you can easy implement signal object in Harbour
yourself.
But I have one question. AFAIR in xbase++ the active locks set on executed
SYNC methods are removed when thread executes oSignal:wait. Then they are
restored - locked again. Maybe I do not understand some conditions but for
me it's sth what can create deadlock if signaled thread have to restore
more then one lock and it's out of user control. Is documented what xbase++
does in such case?

Many thanks for your help.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Sep 26 12:48:50 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 26 12:49:24 2008
Subject: [SPAM]  Re: [Harbour] [SPAM]  Re: Request to share MT knowledge
	on Xbase++ NG
In-Reply-To: <48DCFF57.8000000@mweb.co.za>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com>
	<6EA5E4C3-6DBD-40C7-A7B8-00C19298DD03@syenar.hu>
	<20080925231342.GB2629@34-mo7-2.acn.waw.pl>
	<20080926000053.GC2629@34-mo7-2.acn.waw.pl>
	<19680697.post@talk.nabble.com>
	<20080926150841.GC11051@34-mo7-2.acn.waw.pl>
	<48DCFF57.8000000@mweb.co.za>
Message-ID: <20080926164850.GE11051@34-mo7-2.acn.waw.pl>

On Fri, 26 Sep 2008, Alex Strickland wrote:

Hi Alex,

> From Pritpals message about xbase++ behaviour dated 2008/09/17 01:12 AM:
> Exchanging alias names between work spaces always involves a virtual work
> space, the Zero space. Function DbRelease() releases the alias name of a
> work area in the current work space. It is then collected in the Zero space
> and transferred to a work area of another work space when DbRequest() is
> called. If the work area is linked to other work areas (SET RELATION) alias
> names of all child work areas are transferred as well.

Thank you very much I missed it.
But what happens with parent relations to moved WA and how oare child
visible in ZeroZone. Can I REQUEST each of them separately or only the
WA which was explicitly released? If the first the what happens with
relation their parent relation? Is it cleared? And what happens with
associated codeblock action? Is it shared with child WA?

best regards,
Przemek
From druzus at acn.waw.pl  Fri Sep 26 12:58:41 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 26 12:59:14 2008
Subject: [Harbour] A few questions about MT
In-Reply-To: <B0083856618@ms1.3peaks.com>
References: <48D2698D.80206@dbtopas.lt>
	<20080918165307.GA15124@34-mo7-2.acn.waw.pl>
	<A1E8AD22-84C4-4717-9C48-26E0664DA207@syenar.hu>
	<20080921231424.GA18618@34-mo7-2.acn.waw.pl>
	<1050CEFC-928C-45E4-AA63-AAF3AB99BF85@syenar.hu>
	<20080925151048.GC14636@34-mo7-2.acn.waw.pl>
	<B0083856618@ms1.3peaks.com>
Message-ID: <20080926165841.GF11051@34-mo7-2.acn.waw.pl>

On Fri, 26 Sep 2008, Randy Portnoff wrote:

Hi Randy,
> Not sure if this was already covered in this thread so I will mention it 
> just in case...
> IMO, work areas need to support both per thread and cross thread 
> capability, on a per work area basis.

Both are already implemented.
Just simply dbRequest() and dbRelease() are obligatory locks for global
WA. Otherwise you will have intermediate WA corruption or unexpected
results when two threads will try to make sth on the same WA, f.e.
one will make skip(1) and the second skip(-1). If you do not see it yet
the you can even define preporcessor commands to make it more clear, f.e.:
   #xcommand WA_LOCK   <(alias)> => dbRequest(<alias>)
   #xcommand WA_UNLOCK <(alias)> => dbRelease(<alias>)
   #command GLOBAL USE [<param,...>] => USE <param>; dbRelease()

If you want to use common for all thread WA you are making:
   WA_LOCK MYTABLE
   [...]
   WA_UNLOCK MYTABLE

> For example, you may have one workarea that needs to be thread-specific 
> while another can be
> shared across all threads - Similar to PUBLIC versus LOCAL variables.
> I could see the PRG syntax looking something like this:
> use MYTABLE.DBF new shared threadsafe  // Current thread only

   use MYTABLE.DBF new shared

> use MYTABLE.DBF new shared  // Can be accessed by all threads

   GLOBAL use MYTABLE.DBF new shared

best regards,
Przemek
From druzus at acn.waw.pl  Fri Sep 26 13:35:13 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 26 13:35:47 2008
Subject: [Harbour] 2008-09-26 19:34 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080926173513.GA29936@34-mo7-2.acn.waw.pl>

2008-09-26 19:34 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbstack.h
  * harbour/source/vm/estack.c
    + added assembler inline macros for TLS access in BCC and MinGW32
      They are enabled when Harbour is compiled with -DHB_NO_TLS.
      Please check the speed difference. If it will be noticeable
      then we keep them probably as default. Otherwise they will be
      removed.

best regards
Przemek
From druzus at acn.waw.pl  Fri Sep 26 13:40:23 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 26 13:40:56 2008
Subject: [Harbour] Re: 2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48DD0CE2.30906@libero.it>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48DBFD26.90906@mail.udg.mx>
	<20080926150027.GA11051@34-mo7-2.acn.waw.pl>
	<48DD0A3A.6070109@libero.it> <48DD0CE2.30906@libero.it>
Message-ID: <20080926174023.GA31045@34-mo7-2.acn.waw.pl>

On Fri, 26 Sep 2008, Maurilio Longo wrote:

Hi Maurilio,

> this sample puts both cpus at 100%
> function main()
>    hb_threadStart( @t() )
>    while .t.
>    enddo
> return
> function t()
>     while .t.
>     enddo
> return
> but if in main thread I call Inkey(100) CPUs start spiking again...

For me it looks like normal CPU balancing done by OS.
It's out of Harbour application controll. Sometimes it
can be controlled by OS settings.

> PS. BTW, If I press Alt-C process does not stop, probably only single thread
> gets stopped. See here, I had to press Alt-C two times.
> (E:\repository\harbour-svn\tests\mt)mau
> Cancelled at: T (9) in mau.prg
> Cancelled at: INKEY (0)
> MAIN (5) in mau.prg
> (E:\repository\harbour-svn\tests\mt)

Yes ALT-C stops only the thread which received such key.
If this is the main thread then QUIT request is send to all other
threads. Otherwise only one thread is terminated.

best regards,
Przemek
From rportnoff at spendmap.com  Fri Sep 26 13:52:48 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Fri Sep 26 13:51:28 2008
Subject: [Harbour] Proposed changes to EXTRAP.C
Message-ID: <B0083860220@ms1.3peaks.com>

Hi Viktor,

It seems that returning EXCEPTION_EXECUTE_HANDLER (instead of 
EXCEPTION_CONTINUE_SEARCH) suppresses the Windows GPF dialog and 
allows the app to exit immediately.

Regards,
Randy.

At 02:34 PM 9/23/2008, you wrote:

>Hi Randy,
>
>>Hi all,
>>
>>I suggest the following changes to EXTAP.C:
>>
>>1. The log should be closed BEFORE any alert messages are displayed.
>
>True and thanks, I'll commit this ASAP.
>
>>2. There needs to be a way to suppress any alert messages (ie.
>>create log and exit) for applications that do not require user
>>activity (eg. server programs).
>
>How about making GPF a simple internal error call?
>
>[ I'd personally avoid any MessageBox() calls from any
>Harbour core or contrib code. ]
>
>To suppress .log file, I'll modify the code to explicitly
>not try to create a log file if the _SET_HBOUTLOG filename
>is empty, but this probably works even now.
>
>Brgds,
>Viktor
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour


From mbelgrano at deltain.it  Fri Sep 26 14:01:07 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Sep 26 14:01:25 2008
Subject: [Harbour] how to force Num-Lock on?  gtwvt
In-Reply-To: <19691006.post@talk.nabble.com>
References: <19691006.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F007@SRV02.deltain.net>

Ksetnum() 
(Not tried) 

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Abeb
Sent: Friday, September 26, 2008 5:41 PM
To: harbour@harbour-project.org
Subject: [Harbour] how to force Num-Lock on? gtwvt


How can i catch that num-lock was pressed (or any other key like
ctrl,shift,alt) and force num-lock on?

useing gtwvt

thanks
abe.

-- 
View this message in context:
http://www.nabble.com/how-to-force-Num-Lock-on---gtwvt-tp19691006p196910
06.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Fri Sep 26 15:28:31 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 26 15:29:06 2008
Subject: [Harbour] 2008-09-26 21:28 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080926192831.GA21261@34-mo7-2.acn.waw.pl>

2008-09-26 21:28 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/thread.c
    * release thread return value when is retrieve

  * harbour/common.mak
  * harbour/source/rtl/Makefile
  + harbour/source/rtl/tthreadx.prg
    + added xBase++ compatible signal class

  * harbour/source/rdd/wacore.c
    ! added missing alias setting after attaching work area

  + harbour/tests/mt/mttest09.prg
    + added test code for using the same work area in different threads

best regards
Przemek
From abe.buch at att.net  Fri Sep 26 15:34:33 2008
From: abe.buch at att.net (Abeb)
Date: Fri Sep 26 15:34:40 2008
Subject: [Harbour] how to force Num-Lock on?  gtwvt
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F007@SRV02.deltain.net>
References: <19691006.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815F007@SRV02.deltain.net>
Message-ID: <19695015.post@talk.nabble.com>


The trick is to trap the keypress of numlock ( or other control key)


Massimo Belgrano-3 wrote:
> 
> Ksetnum() 
> (Not tried) 
> 
> -----Original Message-----
> From: harbour-bounces@harbour-project.org
> [mailto:harbour-bounces@harbour-project.org] On Behalf Of Abeb
> Sent: Friday, September 26, 2008 5:41 PM
> To: harbour@harbour-project.org
> Subject: [Harbour] how to force Num-Lock on? gtwvt
> 
> 
> How can i catch that num-lock was pressed (or any other key like
> ctrl,shift,alt) and force num-lock on?
> 
> useing gtwvt
> 
> thanks
> abe.
> 
> -- 
> View this message in context:
> http://www.nabble.com/how-to-force-Num-Lock-on---gtwvt-tp19691006p196910
> 06.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/how-to-force-Num-Lock-on---gtwvt-tp19691006p19695015.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From myorg63 at mail.ru  Fri Sep 26 15:46:25 2008
From: myorg63 at mail.ru (Petr Chornyj)
Date: Fri Sep 26 15:46:32 2008
Subject: [Harbour] 2008-09-26 19:34 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080926173513.GA29936@34-mo7-2.acn.waw.pl>
References: <20080926173513.GA29936@34-mo7-2.acn.waw.pl>
Message-ID: <19695178.post@talk.nabble.com>



Przemyslaw Czerpak-2 wrote:
> 
>     + added assembler inline macros for TLS access in BCC and MinGW32
>       They are enabled when Harbour is compiled with -DHB_NO_TLS.
>       Please check the speed difference. 
> 


Very well - ~20 seconds it's noticeable

Harbour 1.1.0dev (Rev. 9509) (MT), Windows XP 5.1.2600 Service Pack 2 

With HB_NO_TLS
--------------
MinGW 4.3.2
C_USR=-O4 -fomit-frame-pointer -ffast-math -DHB_FM_STATISTICS_OFF
-DHB_HASH_MSG_ITEMS -DHB_NO_TLS

total application time:                              54.30 
total real time:                                     55.49 

Bcc 5.8.2
C_USR=-Oc -Oi -OS -Ov -5 -6 -tWM -DHB_FM_STATISTICS_OFF -DHB_HASH_MSG_ITEMS
-DHB_NO_TLS

total application time:                              61.42 
total real time:                                     62.77 
==========================================================
Without HB_NO_TLS
-----------------
MinGW 4.3.2
C_USR=-O4 -fomit-frame-pointer -ffast-math -DHB_FM_STATISTICS_OFF
-DHB_HASH_MSG_ITEMS

total application time:                              72.56 
total real time:                                     74.09 

Bcc 5.8.2
C_USR=-Oc -Oi -OS -Ov -5 -6 -tWM -DHB_FM_STATISTICS_OFF -DHB_HASH_MSG_ITEMS 
total application time:                              84.06 
total real time:                                     86.02 

Regards,
Petr

-- 
View this message in context: http://www.nabble.com/2008-09-26-19%3A34-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp19693147p19695178.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From lorenzo.fiorini at gmail.com  Fri Sep 26 15:50:40 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Sep 26 15:50:50 2008
Subject: [Harbour] 2008-09-26 19:34 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080926173513.GA29936@34-mo7-2.acn.waw.pl>
References: <20080926173513.GA29936@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809261250u6c2caf4fxda9216df0d965978@mail.gmail.com>

On Fri, Sep 26, 2008 at 7:35 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> 2008-09-26 19:34 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbstack.h
>  * harbour/source/vm/estack.c
>    + added assembler inline macros for TLS access in BCC and MinGW32
>      They are enabled when Harbour is compiled with -DHB_NO_TLS.
>      Please check the speed difference. If it will be noticeable
>      then we keep them probably as default. Otherwise they will be
>      removed.

msys/mingw 3.4.5 official:

ST total real time:                                     17.65
MT total real time:                                     24.75

it was:

ST total real time:                                     17.55
MT total real time:                                     26.53


09/26/08 21:43:04 Harbour 1.1.0dev (Rev. 9510), Windows 2000 5.0.2195
Service Pack 4
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.04
CPU usage -> secondsCPU()

c:=L_C ->                                             0.04
n:=L_N ->                                             0.05
d:=L_D ->                                             0.05
c:=M_C ->                                             0.04
n:=M_N ->                                             0.04
d:=M_D ->                                             0.04
(sh) c:=F_C ->                                        0.12
(sh) n:=F_N ->                                        0.15
(sh) d:=F_D ->                                        0.08
(ex) c:=F_C ->                                        0.13
(ex) n:=F_N ->                                        0.16
(ex) d:=F_D ->                                        0.08
n:=o:GenCode ->                                       0.13
n:=o[8] ->                                            0.09
round(i/1000,2) ->                                    0.30
str(i/1000) ->                                        1.06
val(a3[i%ARR_LEN+1]) ->                               0.36
dtos(j+i%10000-5000) ->                               0.32
eval({||i%ARR_LEN}) ->                                0.20
eval({|x|x%ARR_LEN},i) ->                             0.21
eval({|x|f1(x)},i) ->                                 0.24
&('f1('+str(i)+')') ->                                2.53
eval([&('{|x|f1(x)}')]) ->                            0.25
j := valtype(a)+valtype(i) ->                         0.36
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                0.97
j := val(a2[i%ARR_LEN+1]) ->                          0.40
j := a2[i%ARR_LEN+1] == s ->                          0.23
j := a2[i%ARR_LEN+1] = s ->                           0.26
j := a2[i%ARR_LEN+1] >= s ->                          0.26
j := a2[i%ARR_LEN+1] < s ->                           0.26
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         0.75
f0() ->                                               0.08
f1(i) ->                                              0.14
f2(c[8]) ->                                           0.10
f2(c[40000]) ->                                       0.10
f2(@c[40000]) ->                                      0.09
f2(c[40000]); c2:=c ->                                0.14
f2(@c[40000]); c2:=c ->                               0.13
f3(a,a2,c,i,j,t,bc) ->                                0.28
f2(a2) ->                                             0.10
s:=f4() ->                                            0.64
s:=f5() ->                                            0.23
ascan(a,i%ARR_LEN) ->                                 0.27
ascan(a2,c+chr(i%64+64)) ->                           1.03
ascan(a,{|x|x==i%ARR_LEN}) ->                         2.32
============================================================
total application time:                              17.64
total real time:                                     17.65

09/26/08 21:43:36 Harbour 1.1.0dev (Rev. 9510) (MT), Windows 2000
5.0.2195 Service Pack 4
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.06
CPU usage -> secondsCPU()

c:=L_C ->                                             0.08
n:=L_N ->                                             0.05
d:=L_D ->                                             0.04
c:=M_C ->                                             0.09
n:=M_N ->                                             0.05
d:=M_D ->                                             0.05
(sh) c:=F_C ->                                        0.14
(sh) n:=F_N ->                                        0.16
(sh) d:=F_D ->                                        0.09
(ex) c:=F_C ->                                        0.14
(ex) n:=F_N ->                                        0.15
(ex) d:=F_D ->                                        0.10
n:=o:GenCode ->                                       0.20
n:=o[8] ->                                            0.13
round(i/1000,2) ->                                    0.39
str(i/1000) ->                                        1.20
val(a3[i%ARR_LEN+1]) ->                               0.46
dtos(j+i%10000-5000) ->                               0.46
eval({||i%ARR_LEN}) ->                                0.30
eval({|x|x%ARR_LEN},i) ->                             0.33
eval({|x|f1(x)},i) ->                                 0.44
&('f1('+str(i)+')') ->                                2.98
eval([&('{|x|f1(x)}')]) ->                            0.46
j := valtype(a)+valtype(i) ->                         0.47
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                1.22
j := val(a2[i%ARR_LEN+1]) ->                          0.56
j := a2[i%ARR_LEN+1] == s ->                          0.35
j := a2[i%ARR_LEN+1] = s ->                           0.45
j := a2[i%ARR_LEN+1] >= s ->                          0.40
j := a2[i%ARR_LEN+1] < s ->                           0.40
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         1.25
f0() ->                                               0.13
f1(i) ->                                              0.22
f2(c[8]) ->                                           0.19
f2(c[40000]) ->                                       0.18
f2(@c[40000]) ->                                      0.14
f2(c[40000]); c2:=c ->                                0.27
f2(@c[40000]); c2:=c ->                               0.22
f3(a,a2,c,i,j,t,bc) ->                                0.47
f2(a2) ->                                             0.19
s:=f4() ->                                            0.77
s:=f5() ->                                            0.31
ascan(a,i%ARR_LEN) ->                                 0.44
ascan(a2,c+chr(i%64+64)) ->                           1.37
ascan(a,{|x|x==i%ARR_LEN}) ->                         3.52
============================================================
total application time:                              24.74
total real time:                                     24.75
From myorg63 at mail.ru  Fri Sep 26 15:54:36 2008
From: myorg63 at mail.ru (Petr Chornyj)
Date: Fri Sep 26 15:54:43 2008
Subject: [Harbour] 2008-09-26 19:34 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <19695178.post@talk.nabble.com>
References: <20080926173513.GA29936@34-mo7-2.acn.waw.pl>
	<19695178.post@talk.nabble.com>
Message-ID: <19695296.post@talk.nabble.com>


Also with mingw 4.3.2 I get 

../../genc.c: In function 'hb_p_pushlonglong':
../../genc.c:1585: warning: format '%I64i' expects type 'int', but argument
3 has type 'long long int'
../../gencc.c: In function 'hb_p_pushlonglong':
../../gencc.c:1239: warning: format '%I64i' expects type 'int', but argument
3 has type 'long long int'
../../estack.c: In function 'hb_stackDispLocal':
../../estack.c:1011: warning: format '%I64i' expects type 'int', but
argument 2 has type 'HB_LONG'
In file included from ../../fm.c:136:
../../dlmalloc.c:1144: warning: ignoring #pragma warning 
In file included from ../../fm.c:136:
../../dlmalloc.c: In function 'sys_alloc':
../../dlmalloc.c:3396: warning: statement with no effect
../../../estack.c: In function 'hb_stackDispLocal':
../../../estack.c:1011: warning: format '%I64i' expects type 'int', but
argument 2 has type 'HB_LONG'
In file included from ../../../fm.c:136:
../../../dlmalloc.c:1144: warning: ignoring #pragma warning 
In file included from ../../../fm.c:136:
../../../dlmalloc.c: In function 'sys_alloc':
../../../dlmalloc.c:3396: warning: statement with no effect
../../sqlite3/sqlite3.c: In function 'sqlite3WhereBegin':
../../sqlite3/sqlite3.c:38768: warning: assuming signed overflow does not
occur when assuming that (X - c) <= X is always true
../../whtmmcap.c:39:1: warning: "WM_CAP_SET_CALLBACK_ERRORW" redefined
In file included from ../../whtmmcap.c:20:
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1138:1:
warning: this is the location of the previous definition
../../whtmmcap.c:41:1: warning: "WM_CAP_SET_CALLBACK_ERRORA" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1137:1:
warning: this is the location of the previous definition
../../whtmmcap.c:48:1: warning: "WM_CAP_SET_CALLBACK_STATUS" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1139:1:
warning: this is the location of the previous definition
../../whtmmcap.c:52:1: warning: "WM_CAP_SET_CALLBACK_YIELD" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1140:1:
warning: this is the location of the previous definition
../../whtmmcap.c:53:1: warning: "WM_CAP_SET_CALLBACK_FRAME" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1221:1:
warning: this is the location of the previous definition
../../whtmmcap.c:54:1: warning: "WM_CAP_SET_CALLBACK_VIDEOSTREAM" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1143:1:
warning: this is the location of the previous definition
../../whtmmcap.c:55:1: warning: "WM_CAP_SET_CALLBACK_WAVESTREAM" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1144:1:
warning: this is the location of the previous definition
../../whtmmcap.c:56:1: warning: "WM_CAP_GET_USER_DATA" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1145:1:
warning: this is the location of the previous definition
../../whtmmcap.c:57:1: warning: "WM_CAP_SET_USER_DATA" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1146:1:
warning: this is the location of the previous definition
../../whtmmcap.c:59:1: warning: "WM_CAP_DRIVER_CONNECT" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1147:1:
warning: this is the location of the previous definition
../../whtmmcap.c:60:1: warning: "WM_CAP_DRIVER_DISCONNECT" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1148:1:
warning: this is the location of the previous definition
../../whtmmcap.c:62:1: warning: "WM_CAP_DRIVER_GET_NAMEA" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1149:1:
warning: this is the location of the previous definition
../../whtmmcap.c:63:1: warning: "WM_CAP_DRIVER_GET_VERSIONA" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1151:1:
warning: this is the location of the previous definition
../../whtmmcap.c:64:1: warning: "WM_CAP_DRIVER_GET_NAMEW" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1150:1:
warning: this is the location of the previous definition
../../whtmmcap.c:65:1: warning: "WM_CAP_DRIVER_GET_VERSIONW" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1152:1:
warning: this is the location of the previous definition
../../whtmmcap.c:74:1: warning: "WM_CAP_DRIVER_GET_CAPS" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1153:1:
warning: this is the location of the previous definition
../../whtmmcap.c:76:1: warning: "WM_CAP_FILE_SET_CAPTURE_FILEA" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1154:1:
warning: this is the location of the previous definition
../../whtmmcap.c:77:1: warning: "WM_CAP_FILE_GET_CAPTURE_FILEA" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1156:1:
warning: this is the location of the previous definition
../../whtmmcap.c:78:1: warning: "WM_CAP_FILE_SAVEASA" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1159:1:
warning: this is the location of the previous definition
../../whtmmcap.c:79:1: warning: "WM_CAP_FILE_SAVEDIBA" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1162:1:
warning: this is the location of the previous definition
../../whtmmcap.c:80:1: warning: "WM_CAP_FILE_SET_CAPTURE_FILEW" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1155:1:
warning: this is the location of the previous definition
../../whtmmcap.c:81:1: warning: "WM_CAP_FILE_GET_CAPTURE_FILEW" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1157:1:
warning: this is the location of the previous definition
../../whtmmcap.c:82:1: warning: "WM_CAP_FILE_SAVEASW" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1160:1:
warning: this is the location of the previous definition
../../whtmmcap.c:83:1: warning: "WM_CAP_FILE_SAVEDIBW" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1163:1:
warning: this is the location of the previous definition
../../whtmmcap.c:97:1: warning: "WM_CAP_FILE_ALLOCATE" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1158:1:
warning: this is the location of the previous definition
../../whtmmcap.c:98:1: warning: "WM_CAP_FILE_SET_INFOCHUNK" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1161:1:
warning: this is the location of the previous definition
../../whtmmcap.c:100:1: warning: "WM_CAP_EDIT_COPY" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1164:1:
warning: this is the location of the previous definition
../../whtmmcap.c:102:1: warning: "WM_CAP_SET_AUDIOFORMAT" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1165:1:
warning: this is the location of the previous definition
../../whtmmcap.c:103:1: warning: "WM_CAP_GET_AUDIOFORMAT" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1166:1:
warning: this is the location of the previous definition
../../whtmmcap.c:105:1: warning: "WM_CAP_DLG_VIDEOFORMAT" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1167:1:
warning: this is the location of the previous definition
../../whtmmcap.c:106:1: warning: "WM_CAP_DLG_VIDEOSOURCE" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1168:1:
warning: this is the location of the previous definition
../../whtmmcap.c:107:1: warning: "WM_CAP_DLG_VIDEODISPLAY" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1169:1:
warning: this is the location of the previous definition
../../whtmmcap.c:108:1: warning: "WM_CAP_GET_VIDEOFORMAT" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1170:1:
warning: this is the location of the previous definition
../../whtmmcap.c:109:1: warning: "WM_CAP_SET_VIDEOFORMAT" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1171:1:
warning: this is the location of the previous definition
../../whtmmcap.c:110:1: warning: "WM_CAP_DLG_VIDEOCOMPRESSION" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1172:1:
warning: this is the location of the previous definition
../../whtmmcap.c:112:1: warning: "WM_CAP_SET_PREVIEW" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1173:1:
warning: this is the location of the previous definition
../../whtmmcap.c:113:1: warning: "WM_CAP_SET_OVERLAY" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1174:1:
warning: this is the location of the previous definition
../../whtmmcap.c:114:1: warning: "WM_CAP_SET_PREVIEWRATE" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1175:1:
warning: this is the location of the previous definition
../../whtmmcap.c:115:1: warning: "WM_CAP_SET_SCALE" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1176:1:
warning: this is the location of the previous definition
../../whtmmcap.c:116:1: warning: "WM_CAP_GET_STATUS" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1177:1:
warning: this is the location of the previous definition
../../whtmmcap.c:117:1: warning: "WM_CAP_SET_SCROLL" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1178:1:
warning: this is the location of the previous definition
../../whtmmcap.c:119:1: warning: "WM_CAP_GRAB_FRAME" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1179:1:
warning: this is the location of the previous definition
../../whtmmcap.c:120:1: warning: "WM_CAP_GRAB_FRAME_NOSTOP" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1180:1:
warning: this is the location of the previous definition
../../whtmmcap.c:122:1: warning: "WM_CAP_SEQUENCE" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1181:1:
warning: this is the location of the previous definition
../../whtmmcap.c:123:1: warning: "WM_CAP_SEQUENCE_NOFILE" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1182:1:
warning: this is the location of the previous definition
../../whtmmcap.c:124:1: warning: "WM_CAP_SET_SEQUENCE_SETUP" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1183:1:
warning: this is the location of the previous definition
../../whtmmcap.c:125:1: warning: "WM_CAP_GET_SEQUENCE_SETUP" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1184:1:
warning: this is the location of the previous definition
../../whtmmcap.c:127:1: warning: "WM_CAP_SET_MCI_DEVICEA" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1185:1:
warning: this is the location of the previous definition
../../whtmmcap.c:128:1: warning: "WM_CAP_GET_MCI_DEVICEA" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1187:1:
warning: this is the location of the previous definition
../../whtmmcap.c:129:1: warning: "WM_CAP_SET_MCI_DEVICEW" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1186:1:
warning: this is the location of the previous definition
../../whtmmcap.c:130:1: warning: "WM_CAP_GET_MCI_DEVICEW" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1188:1:
warning: this is the location of the previous definition
../../whtmmcap.c:141:1: warning: "WM_CAP_STOP" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1189:1:
warning: this is the location of the previous definition
../../whtmmcap.c:142:1: warning: "WM_CAP_ABORT" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1190:1:
warning: this is the location of the previous definition
../../whtmmcap.c:144:1: warning: "WM_CAP_SINGLE_FRAME_OPEN" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1191:1:
warning: this is the location of the previous definition
../../whtmmcap.c:145:1: warning: "WM_CAP_SINGLE_FRAME_CLOSE" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1192:1:
warning: this is the location of the previous definition
../../whtmmcap.c:146:1: warning: "WM_CAP_SINGLE_FRAME" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1193:1:
warning: this is the location of the previous definition
../../whtmmcap.c:148:1: warning: "WM_CAP_PAL_OPENA" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1194:1:
warning: this is the location of the previous definition
../../whtmmcap.c:149:1: warning: "WM_CAP_PAL_SAVEA" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1196:1:
warning: this is the location of the previous definition
../../whtmmcap.c:150:1: warning: "WM_CAP_PAL_OPENW" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1195:1:
warning: this is the location of the previous definition
../../whtmmcap.c:151:1: warning: "WM_CAP_PAL_SAVEW" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1197:1:
warning: this is the location of the previous definition
../../whtmmcap.c:160:1: warning: "WM_CAP_PAL_PASTE" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1198:1:
warning: this is the location of the previous definition
../../whtmmcap.c:161:1: warning: "WM_CAP_PAL_AUTOCREATE" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1199:1:
warning: this is the location of the previous definition
../../whtmmcap.c:162:1: warning: "WM_CAP_PAL_MANUALCREATE" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1200:1:
warning: this is the location of the previous definition
../../whtmmcap.c:165:1: warning: "WM_CAP_SET_CALLBACK_CAPCONTROL" redefined
c:\mingw4\bin\../lib/gcc/mingw32/4.3.2/../../../../include/vfw.h:1201:1:
warning: this is the location of the previous definition
../../whtmmcap.c: In function 'HB_FUN_VWN_CAPCAPTUREABORT':
../../whtmmcap.c:327: warning: implicit declaration of function
'capSendMessage'

Regards,
Petr

-- 
View this message in context: http://www.nabble.com/2008-09-26-19%3A34-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp19693147p19695296.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Fri Sep 26 16:07:55 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Sep 26 16:08:05 2008
Subject: [Harbour] 2008-09-26 19:34 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080926173513.GA29936@34-mo7-2.acn.waw.pl>
References: <20080926173513.GA29936@34-mo7-2.acn.waw.pl>
Message-ID: <723F0552-9876-4780-838D-8939D554AF2A@syenar.hu>

Total application time (r9509):

Compiler             ST     MT overhead
---------------- ------ ------ --------
BCC551            70.55 104.73      48%
BCC551 HB_NO_TLS  69.63  91.98      32%

BCC582            52.45  71.23      36%
BCC582 HB_NO_TLS  51.81  71.64      38%

GCC412            46.06  63.55      38%
GCC412 HB_NO_TLS  46.55  64.03      38%

GCC432            41.22  77.44      88%
GCC432 HB_NO_TLS  40.67  64.14      58%

Brgds,
Viktor

On 2008.09.26., at 19:35, Przemyslaw Czerpak wrote:

> 2008-09-26 19:34 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbstack.h
>  * harbour/source/vm/estack.c
>    + added assembler inline macros for TLS access in BCC and MinGW32
>      They are enabled when Harbour is compiled with -DHB_NO_TLS.
>      Please check the speed difference. If it will be noticeable
>      then we keep them probably as default. Otherwise they will be
>      removed.
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From rgraham at grahamautomation.com  Fri Sep 26 16:38:01 2008
From: rgraham at grahamautomation.com (RoddGraham)
Date: Fri Sep 26 16:38:06 2008
Subject: [Harbour] [SPAM]  Re: Request to share MT knowledge on Xbase++ NG
Message-ID: <19695418.post@talk.nabble.com>



Przemyslaw Czerpak-2 wrote:
> 
> Nice to see your messages again.
> 

I am always lurking out here.  Nice to see you are still aggressively
involved in Harbour.  I assume you are still disconnected from xHarbour
based upon our communications a year ago (or so).


Przemyslaw Czerpak-2 wrote:
> 
> Interesting. Such weak scalability is usually result of intensive
> critical section usage. In the last two years are invest a lot of time
> to eliminate such code so now only few small elements are covered by
> critical sections what should not reduce the performance on real multi
> CPU machines.
> 

I am only an external observer of the runtime.  I do not look at the
internals because I have no control over them.  What would I do with any
discovery?

Nevertheless, I think Xbase++ is hindered by 'intensive critical sections'. 
I think they are driven to this because GC and memory compaction is
performed on an independent thread without halting the application.  I think
they use lightweight synchronization techniques that are facilitated by
single processor core affinity and the GC works continuously and
incrementally.

If I remember the xHarbour source correctly (which I assume is similar to
Harbour), it pauses application threads while GC is operational.


Przemyslaw Czerpak-2 wrote:
> 
> The ADS RDD will have to be updated for MT mode. Not all things are safe.
> Especially there is a problem with some global settings passing to ADS
> library like _SET_DELETED. So far I haven't checked if ACE has some
> additional support for MT programs so I cannot say too much about.
> Anyhow this I'd like to leave for ADSRDD developers/users. I do not use
> it.
> 

ACE is natively MT.  It supports one outstanding request per DBS connection
and serializes requests from multiple threads that are sharing a connection.


Przemyslaw Czerpak-2 wrote:
> 
> Harbour does not have such protection. I was thinking about it but it has
> to cost extremely much. On some architecture it will be real performance
> killer if we will call OS synchronization function. It will be necessary
> to use some assembler hacks to reduce it. Such elements will have to be
> discuss here. Give full complex item integrity protection with the cost
> of performance. I'm afraid that it will be hard to agree common decision.
> People familiar with MT programming will prefer missing protection and
> better performance because for all shared variables it's always necessary
> to add own protection and they used to make it correctly. But people who
> begins their adventure with MT programing each additional protection will
> be welcome. Anyhow for the answer we will have to wait for users'
> experiences
> after working with current code.
> Maybe we will chose some middle solution. F.e. synchronization reference
> item so user will be able to declare variable as automatically synced in
> source code or at RT by some function, f.e. hb_autoSyncVar( @var, <lOnOff>
> )
> 

As I stated above, I think the variable access synchronization is driven by
the parallel execution GC design more than providing protection to discrete
variables.  As you stated earlier, entire expressions would need to be
atomic for most MT applications to be accurate.  In reality, .PRG level MT
support in Xbase++ is limited to SYNC methods of classes.


Przemyslaw Czerpak-2 wrote:
> 
> I will have to think about it longer to give you an answer. Now I cannot
> say how it will work with long references chains when some of references
> are in thread local heap and some other in thread global. Moving complex
> item from local to global thread also does not look easy. F.e. some
> subarrays
> can still be accessible by local variables so we will have to mark all
> complex
> item nodes (it will benecesary to add circularity detection) that they
> belongs
> to common heap. Otherwise they will be still accessible without protection
> by
> other thread local variables. I also see some other problems which will
> have
> to be resolved. Now I do not find it as easy to implement solution.
> 

I did not want to imply that it would be easy.  IMO, the complexity works
against the proposal.

I think the best case examples to study for insight are the Java and .NET
runtimes since they experience the exact same issues AND have had
significant resources to develop their solutions.  However, their solutions
may very well require those significant resources which are unavailable to
the Harbour project.


Przemyslaw Czerpak-2 wrote:
> 
> But I have one question. AFAIR in xbase++ the active locks set on executed
> SYNC methods are removed when thread executes oSignal:wait. Then they are
> restored - locked again. Maybe I do not understand some conditions but for
> me it's sth what can create deadlock if signaled thread have to restore
> more then one lock and it's out of user control. Is documented what
> xbase++
> does in such case?
> 

My interpretation of the documentation (which is not backed by actual
experience) is that the locks are not removed.  Instead, I believe that
locks held by a waiting thread are ignored by other threads AND the waiting
thread is blocked from CPU scheduling while another thread is executing a
SYNC method to which it 'interrupted' the lock AND the lock ownership is
changed/restored to the other thread while the SYNC method is active.

Hope this helps.

Rodd Graham
-- 
View this message in context: http://www.nabble.com/A-few-questions-about-MT-tp19555409p19695418.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From lorenzo.fiorini at gmail.com  Fri Sep 26 16:38:42 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Sep 26 16:38:50 2008
Subject: [Harbour] 2008-09-26 19:34 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080926173513.GA29936@34-mo7-2.acn.waw.pl>
References: <20080926173513.GA29936@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0809261338k4ae391fan15be48636c6ca886@mail.gmail.com>

On Fri, Sep 26, 2008 at 7:35 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> 2008-09-26 19:34 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbstack.h
>  * harbour/source/vm/estack.c
>    + added assembler inline macros for TLS access in BCC and MinGW32
>      They are enabled when Harbour is compiled with -DHB_NO_TLS.
>      Please check the speed difference. If it will be noticeable
>      then we keep them probably as default. Otherwise they will be
>      removed.

msys/mingw 4.3.2 tdm-1
Extra C compiler switches: -O3 -DHB_FM_STATISTICS_OFF -DHB_NO_READDBG
-DHB_EXT_INKEY -DHB_PP_MULTILINE_STRING

ST total real time:                                     24.44
MT total real time:                                     41.27

Extra C compiler switches: -O3 -DHB_NO_TLS -DHB_FM_STATISTICS_OFF
-DHB_NO_READDBG -DHB_EXT_INKEY -DHB_PP_MULTILINE_STRING

total real time:                                     24.64
total real time:                                     30.24

It seems that HB_NOT_TLS is good for 4.3.2 but it is still slower than 3.4.5.

best regards,
Lorenzo

09/26/08 22:25:05 Harbour 1.1.0dev (Rev. 9510), Windows 2000 5.0.2195
Service Pack 4
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.06
CPU usage -> secondsCPU()

c:=L_C ->                                             0.06
n:=L_N ->                                             0.06
d:=L_D ->                                             0.07
c:=M_C ->                                             0.08
n:=M_N ->                                             0.06
d:=M_D ->                                             0.07
(sh) c:=F_C ->                                        0.18
(sh) n:=F_N ->                                        0.22
(sh) d:=F_D ->                                        0.12
(ex) c:=F_C ->                                        0.18
(ex) n:=F_N ->                                        0.22
(ex) d:=F_D ->                                        0.10
n:=o:GenCode ->                                       0.17
n:=o[8] ->                                            0.14
round(i/1000,2) ->                                    0.29
str(i/1000) ->                                        1.20
val(a3[i%ARR_LEN+1]) ->                               0.49
dtos(j+i%10000-5000) ->                               0.47
eval({||i%ARR_LEN}) ->                                0.29
eval({|x|x%ARR_LEN},i) ->                             0.28
eval({|x|f1(x)},i) ->                                 0.36
&('f1('+str(i)+')') ->                                3.04
eval([&('{|x|f1(x)}')]) ->                            0.37
j := valtype(a)+valtype(i) ->                         0.44
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                1.13
j := val(a2[i%ARR_LEN+1]) ->                          0.55
j := a2[i%ARR_LEN+1] == s ->                          0.37
j := a2[i%ARR_LEN+1] = s ->                           0.38
j := a2[i%ARR_LEN+1] >= s ->                          0.38
j := a2[i%ARR_LEN+1] < s ->                           0.38
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         1.08
f0() ->                                               0.12
f1(i) ->                                              0.19
f2(c[8]) ->                                           0.14
f2(c[40000]) ->                                       0.14
f2(@c[40000]) ->                                      0.13
f2(c[40000]); c2:=c ->                                0.20
f2(@c[40000]); c2:=c ->                               0.19
f3(a,a2,c,i,j,t,bc) ->                                0.38
f2(a2) ->                                             0.15
s:=f4() ->                                            1.90
s:=f5() ->                                            0.33
ascan(a,i%ARR_LEN) ->                                 0.34
ascan(a2,c+chr(i%64+64)) ->                           0.97
ascan(a,{|x|x==i%ARR_LEN}) ->                         3.27
============================================================
total application time:                              24.42
total real time:                                     24.44


09/26/08 22:22:48 Harbour 1.1.0dev (Rev. 9510) (MT), Windows 2000
5.0.2195 Servi
    ce Pack 4
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.12
CPU usage -> secondsCPU()

c:=L_C ->                                             0.14
n:=L_N ->                                             0.12
d:=L_D ->                                             0.12
c:=M_C ->                                             0.16
n:=M_N ->                                             0.14
d:=M_D ->                                             0.13
(sh) c:=F_C ->                                        0.29
(sh) n:=F_N ->                                        0.28
(sh) d:=F_D ->                                        0.14
(ex) c:=F_C ->                                        0.28
(ex) n:=F_N ->                                        0.29
(ex) d:=F_D ->                                        0.16
n:=o:GenCode ->                                       0.34
n:=o[8] ->                                            0.26
round(i/1000,2) ->                                    0.55
str(i/1000) ->                                        1.34
val(a3[i%ARR_LEN+1]) ->                               0.73
dtos(j+i%10000-5000) ->                               0.69
eval({||i%ARR_LEN}) ->                                0.48
eval({|x|x%ARR_LEN},i) ->                             0.56
eval({|x|f1(x)},i) ->                                 0.85
&('f1('+str(i)+')') ->                                3.90
eval([&('{|x|f1(x)}')]) ->                            0.90
j := valtype(a)+valtype(i) ->                         0.82
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                1.57
j := val(a2[i%ARR_LEN+1]) ->                          0.87
j := a2[i%ARR_LEN+1] == s ->                          0.60
j := a2[i%ARR_LEN+1] = s ->                           0.63
j := a2[i%ARR_LEN+1] >= s ->                          0.60
j := a2[i%ARR_LEN+1] < s ->                           0.61
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         1.85
f0() ->                                               0.35
f1(i) ->                                              0.46
f2(c[8]) ->                                           0.40
f2(c[40000]) ->                                       0.41
f2(@c[40000]) ->                                      0.35
f2(c[40000]); c2:=c ->                                0.54
f2(@c[40000]); c2:=c ->                               0.51
f3(a,a2,c,i,j,t,bc) ->                                0.97
f2(a2) ->                                             0.39
s:=f4() ->                                            2.17
s:=f5() ->                                            0.59
ascan(a,i%ARR_LEN) ->                                 0.58
ascan(a2,c+chr(i%64+64)) ->                           1.65
ascan(a,{|x|x==i%ARR_LEN}) ->                         6.04
============================================================
total application time:                              41.25
total real time:                                     41.27

Extra C compiler switches: -O3 -DHB_NO_TLS -DHB_FM_STATISTICS_OFF
-DHB_NO_READDBG -DHB_EXT_INKEY -DHB_PP_MULTILINE_STRING

09/26/08 22:33:27 Harbour 1.1.0dev (Rev. 9510), Windows 2000 5.0.2195
Service Pa
ck 4
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.06
CPU usage -> secondsCPU()

c:=L_C ->                                             0.06
n:=L_N ->                                             0.06
d:=L_D ->                                             0.07
c:=M_C ->                                             0.07
n:=M_N ->                                             0.07
d:=M_D ->                                             0.06
(sh) c:=F_C ->                                        0.19
(sh) n:=F_N ->                                        0.23
(sh) d:=F_D ->                                        0.10
(ex) c:=F_C ->                                        0.19
(ex) n:=F_N ->                                        0.23
(ex) d:=F_D ->                                        0.11
n:=o:GenCode ->                                       0.18
n:=o[8] ->                                            0.15
round(i/1000,2) ->                                    0.30
str(i/1000) ->                                        1.23
val(a3[i%ARR_LEN+1]) ->                               0.50
dtos(j+i%10000-5000) ->                               0.47
eval({||i%ARR_LEN}) ->                                0.29
eval({|x|x%ARR_LEN},i) ->                             0.28
eval({|x|f1(x)},i) ->                                 0.36
&('f1('+str(i)+')') ->                                3.07
eval([&('{|x|f1(x)}')]) ->                            0.37
j := valtype(a)+valtype(i) ->                         0.43
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                1.11
j := val(a2[i%ARR_LEN+1]) ->                          0.56
j := a2[i%ARR_LEN+1] == s ->                          0.36
j := a2[i%ARR_LEN+1] = s ->                           0.39
j := a2[i%ARR_LEN+1] >= s ->                          0.38
j := a2[i%ARR_LEN+1] < s ->                           0.39
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         1.09
f0() ->                                               0.11
f1(i) ->                                              0.19
f2(c[8]) ->                                           0.15
f2(c[40000]) ->                                       0.14
f2(@c[40000]) ->                                      0.12
f2(c[40000]); c2:=c ->                                0.20
f2(@c[40000]); c2:=c ->                               0.19
f3(a,a2,c,i,j,t,bc) ->                                0.39
f2(a2) ->                                             0.15
s:=f4() ->                                            1.93
s:=f5() ->                                            0.33
ascan(a,i%ARR_LEN) ->                                 0.34
ascan(a2,c+chr(i%64+64)) ->                           0.98
ascan(a,{|x|x==i%ARR_LEN}) ->                         3.29
============================================================
total application time:                              24.61
total real time:                                     24.64

09/26/08 22:35:37 Harbour 1.1.0dev (Rev. 9510) (MT), Windows 2000
5.0.2195 Service Pack 4
ARR_LEN =         16
N_LOOPS =    1000000
empty loops overhead =          0.07
CPU usage -> secondsCPU()

c:=L_C ->                                             0.11
n:=L_N ->                                             0.07
d:=L_D ->                                             0.07
c:=M_C ->                                             0.11
n:=M_N ->                                             0.08
d:=M_D ->                                             0.08
(sh) c:=F_C ->                                        0.23
(sh) n:=F_N ->                                        0.21
(sh) d:=F_D ->                                        0.11
(ex) c:=F_C ->                                        0.23
(ex) n:=F_N ->                                        0.22
(ex) d:=F_D ->                                        0.10
n:=o:GenCode ->                                       0.23
n:=o[8] ->                                            0.17
round(i/1000,2) ->                                    0.43
str(i/1000) ->                                        1.23
val(a3[i%ARR_LEN+1]) ->                               0.56
dtos(j+i%10000-5000) ->                               0.54
eval({||i%ARR_LEN}) ->                                0.35
eval({|x|x%ARR_LEN},i) ->                             0.34
eval({|x|f1(x)},i) ->                                 0.48
&('f1('+str(i)+')') ->                                3.56
eval([&('{|x|f1(x)}')]) ->                            0.49
j := valtype(a)+valtype(i) ->                         0.64
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->                1.24
j := val(a2[i%ARR_LEN+1]) ->                          0.67
j := a2[i%ARR_LEN+1] == s ->                          0.44
j := a2[i%ARR_LEN+1] = s ->                           0.47
j := a2[i%ARR_LEN+1] >= s ->                          0.46
j := a2[i%ARR_LEN+1] < s ->                           0.47
aadd(aa,{i,j,s,a,a2,t,bc}) ->                         1.51
f0() ->                                               0.20
f1(i) ->                                              0.25
f2(c[8]) ->                                           0.24
f2(c[40000]) ->                                       0.23
f2(@c[40000]) ->                                      0.20
f2(c[40000]); c2:=c ->                                0.32
f2(@c[40000]); c2:=c ->                               0.27
f3(a,a2,c,i,j,t,bc) ->                                0.60
f2(a2) ->                                             0.23
s:=f4() ->                                            2.02
s:=f5() ->                                            0.45
ascan(a,i%ARR_LEN) ->                                 0.47
ascan(a2,c+chr(i%64+64)) ->                           1.28
ascan(a,{|x|x==i%ARR_LEN}) ->                         4.38
============================================================
total application time:                              30.22
total real time:                                     30.24
From clipper5_y2d at versateladsl.be  Fri Sep 26 16:46:37 2008
From: clipper5_y2d at versateladsl.be (frank van nuffel)
Date: Fri Sep 26 16:47:43 2008
Subject: [Harbour] 2008-09-26 19:34 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20080926173513.GA29936@34-mo7-2.acn.waw.pl>
Message-ID: <306286C55B37423F9A74693A3F2A7858@uwlhldv32rnqu4>

Hi all, here are some extra results

----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
To: <harbour@harbour-project.org>
Sent: Friday, September 26, 2008 7:35 PM
Subject: [Harbour] 2008-09-26 19:34 UTC+0200 Przemyslaw
Czerpak(druzus/at/priv.onet.pl)


> 2008-09-26 19:34 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbstack.h
>  * harbour/source/vm/estack.c
>    + added assembler inline macros for TLS access in BCC and MinGW32
>      They are enabled when Harbour is compiled with -DHB_NO_TLS.
>      Please check the speed difference. If it will be noticeable
>      then we keep them probably as default. Otherwise they will be
>      removed.

SET L_USR=cw32mt.lib
SET HB_BUILD_ST=no
set
C_USR=-Oc -Oi -OS -Ov -5 -6 -tWM -DHB_FM_STATISTICS_OFF -DHB_HASH_MSG_ITEMS
-DHB_FM_WIN32_ALLOC -D__MT__ -DHB_VM_MT -DHB_NO_TLS

bld_b32 speedtst
run_prg speedtst

09/26/08 22:31:18 Harbour 1.1.0dev (Rev. 9510) (MT), Windows XP 5.1.2600
Service Pack 3
total application time:                              60.97
total real time:                                     61.14

SET L_USR=cw32mt.lib
SET HB_BUILD_ST=no
set
C_USR=-Oc -Oi -OS -Ov -5 -6 -tWM -DHB_FM_STATISTICS_OFF -DHB_HASH_MSG_ITEMS
-DHB_FM_WIN32_ALLOC -D__MT__ -DHB_VM_MT


bld_b32 speedtst
run_prg speedtst

09/26/08 22:35:02 Harbour 1.1.0dev (Rev. 9510) (MT), Windows XP 5.1.2600
Service Pack 3
total application time:                              77.19
total real time:                                     77.97

21,5% difference

.oO here are the votes from Belgium:

MT -DHB_NO_TLS    10.0 POINTS!
MT                                 9.9 POINTS!

does this sound familiar? .oO Eurovision Song Contest ;-)

best regards,

frank

From rgraham at grahamautomation.com  Fri Sep 26 17:00:14 2008
From: rgraham at grahamautomation.com (RoddGraham)
Date: Fri Sep 26 17:00:20 2008
Subject: [Harbour] [SPAM]  Re: [SPAM]  Re: Request to share MT knowledge
	on Xbase++ NG
In-Reply-To: <20080926164850.GE11051@34-mo7-2.acn.waw.pl>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com>
	<6EA5E4C3-6DBD-40C7-A7B8-00C19298DD03@syenar.hu>
	<20080925231342.GB2629@34-mo7-2.acn.waw.pl>
	<20080926000053.GC2629@34-mo7-2.acn.waw.pl>
	<19680697.post@talk.nabble.com>
	<20080926150841.GC11051@34-mo7-2.acn.waw.pl>
	<48DCFF57.8000000@mweb.co.za>
	<20080926164850.GE11051@34-mo7-2.acn.waw.pl>
Message-ID: <19695931.post@talk.nabble.com>



Przemyslaw Czerpak-2 wrote:
> 
> But what happens with parent relations to moved WA and how oare child
> visible in ZeroZone. Can I REQUEST each of them separately or only the
> WA which was explicitly released? If the first the what happens with
> relation their parent relation? Is it cleared? And what happens with
> associated codeblock action? Is it shared with child WA?
> 

In Xbase++, the zero workspace (zone) is like an isolated RDD context
without an associated application thread.  Probably implemented using one of
the Xbase++ internal threads for ownership of the context.

Per the Xbase++ documentation, all child relation workareas are
simultaneously moved into or out of the zero workspace.  No operations can
be performed against the workareas while in the zero workspace, so the
relations cannot be altered during the move.  However, you can probably
request an implicitly moved child area from the zero workspace without
requesting the parent.  My expectation is that moves into and out of the
zero workspace are processed with the exact same logic AND parent relations
are released, but my experience says it is as likely that the parent
relations are left dangling against the missing workarea and will result in
a fault if they are activated.

You request workareas from the zero workspace by alias which IMO is a
weakness in the design.  Rather than having alias naming collisions, the
zero workspace FIFO's the workareas such that duplicate aliases are
retrieved in the order they were submitted.

Some general facilities included for managing the zero workspace:

1) You can attach a arbritrary codeblock to the workarea when dbRelease()ing
it to the zero workspace which can be retrieved.
2) You can retrieve an array of alias names currently in the zero workspace
with WorkSpaceList( DB_ZEROSPACE ).
3) You can enumerate the workareas in the zero workspace with WorkSpaceEval(
CodeBlock, DB_ZEROSPACE ).

DB_ZEROSPACE is a manifest constant.  DB_WORKSPACE is also available for
processing the current threads workarea context.

The associated code block is attached to the workarea that was explicity
dbRelease()d to the zero workspace.  It is not shared with child workareas. 
AFAIK, the code block can only be set by the dbRelease() and is permanently
associated until replaced via another dbRelease().

IMO, the Xbase++ zero workspace is adequate for the goal, but is
minimalistically implemented and not feature rich.

Rodd
-- 
View this message in context: http://www.nabble.com/A-few-questions-about-MT-tp19555409p19695931.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Fri Sep 26 17:03:44 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 26 17:04:17 2008
Subject: [SPAM]  RE: [Harbour] how to force Num-Lock on?  gtwvt
In-Reply-To: <19695015.post@talk.nabble.com>
References: <19691006.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815F007@SRV02.deltain.net>
	<19695015.post@talk.nabble.com>
Message-ID: <20080926210344.GA17760@34-mo7-2.acn.waw.pl>

On Fri, 26 Sep 2008, Abeb wrote:
> The trick is to trap the keypress of numlock ( or other control key)

And your received correct answer.

Sample code below. It uses two different methods to extract
cotnrol key state. But please remember that not all GTs
can support such functionality.

best regards,
Przemek


#include "inkey.ch"
#include "hbgtinfo.ch"
proc main()
   local cStatus, iStatus, nKey
   clear screen
   while ( nKey := inkey( 0.1 ) ) != K_ESC
      iStatus := hb_gtInfo( HB_GTI_KBDSHIFTS )
      cStatus := ""
      cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_SHIFT ) != 0, ;
                     "SHIFT ", "      " )
      cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_CTRL ) != 0, ;
                     "CTRL ", "     " )
      cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_ALT ) != 0, ;
                     "ALT ", "    " )
      cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_SCROLOCK ) != 0, ;
                     "SCRLOCK ", "        " )
      cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_NUMLOCK ) != 0, ;
                     "NUMLOCK ", "        " )
      cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_CAPSLOCK ) != 0, ;
                     "CAPSLOCK ", "         " )
      cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_INSERT ) != 0, ;
                     "INSERT ", "       " )
      @ 1, 0 say cStatus

      cStatus := ""
      cStatus += iif( KSETINS(), "INS ", "    " )
      cStatus += iif( KSETCAPS(), "CAPS ", "     " )
      cStatus += iif( KSETNUM(), "NUM ", "    " )
      cStatus += iif( KSETSCROLL(), "SCROLL ", "       " )
      @ 2, 0 say cStatus
      if nKey==asc("C") .or. nKey==asc("c")
         KSETCAPS(!KSETCAPS())
      elseif nKey==asc("I") .or. nKey==asc("i")
         KSETINS(!KSETINS())
      elseif nKey==asc("N") .or. nKey==asc("n")
         KSETNUM(!KSETNUM())
      elseif nKey==asc("S") .or. nKey==asc("s")
         KSETSCROLL(!KSETSCROLL())
      endif
   enddo
return
From mbelgrano at deltain.it  Fri Sep 26 17:29:36 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Sep 26 17:29:55 2008
Subject: [Harbour] how to play wav files, useing gtwvt?
In-Reply-To: <19691028.post@talk.nabble.com>
References: <19691028.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F008@SRV02.deltain.net>

In windows platform you can use mciSendString api
Afaik this function is present in hwgui mciSendString( cCommand,
@cResult, hWindow )


This Recording sound using the API and mciSendString with Visual Basic 6
http://www.rediware.com/programming/vb/vbrecwav/vbrecordwav.htm


From info at fsgiudice.com  Fri Sep 26 17:51:14 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri Sep 26 17:51:28 2008
Subject: [Harbour] how to force Num-Lock on?  gtwvt
In-Reply-To: <19691006.post@talk.nabble.com>
References: <19691006.post@talk.nabble.com>
Message-ID: <48DD5952.2060408@fsgiudice.com>

Hi Abeb,

Abeb ha scritto:
> How can i catch that num-lock was pressed (or any other key like
> ctrl,shift,alt) and force num-lock on?
> 
> useing gtwvt
> 
> thanks
> abe.
> 

try code below I wrote some time ago for xharbour, not tested with 
current harbour SVN.

Best Regards

Francesco

-------------------------------------------

#include "common.ch"

PROCEDURE MAIN()

    ? "Set capslock ON"
    SetCapsLock( TRUE )

    Inkey( 0 )

    ? "Set numlock ON"
    SetNumLock( TRUE )

    Inkey( 0 )

    ? "CAPSLOCK state is : " + IIF( GetCapsLock(), "ON ", "OFF" )
    ? "NUMLOCK  state is : " + IIF( GetNumLock(), "ON ", "OFF" )

    Inkey( 0 )

    ? "Disable capslock"
    SetCapsLock( FALSE )

    Inkey( 0 )

    ? "Disable numlock"
    SetNumLock( FALSE )

    Inkey( 0 )

    ? "CAPSLOCK state is : " + IIF( GetCapsLock(), "ON ", "OFF" )
    ? "NUMLOCK  state is: " + IIF( GetNumLock(), "ON ", "OFF" )

    Inkey( 0 )

RETURN


#pragma BEGINDUMP

#include <windows.h>

#include "hbapi.h"

#define TOGGLED 0x0001

void SetKeyLock( BYTE vKey, BOOL bState )
{
    BOOL bCurrentState;

    bCurrentState = ( GetKeyState( vKey ) & TOGGLED );

    if( (bState && !bCurrentState) ||
        (!bState && bCurrentState) )
    {
       // Simulate a key press
       keybd_event( vKey,
                    0,
                    KEYEVENTF_EXTENDEDKEY | 0,
                    0 );

       // Simulate a key release
       keybd_event( vKey,
                    0,
                    KEYEVENTF_EXTENDEDKEY | KEYEVENTF_KEYUP,
                    0);
    }
}

BOOL GetKeyLock( int vKey )
{
    return ( GetKeyState( vKey ) & TOGGLED );
}

HB_FUNC( SETCAPSLOCK )
{
    SetKeyLock( VK_CAPITAL, hb_parl( 1 ) );
}

HB_FUNC( SETNUMLOCK )
{
    SetKeyLock( VK_NUMLOCK, hb_parl( 1 ) );
}

HB_FUNC( GETCAPSLOCK )
{
    hb_retl( GetKeyLock( VK_CAPITAL ) );
}

HB_FUNC( GETNUMLOCK )
{
    hb_retl( GetKeyLock( VK_NUMLOCK ) );
}

#pragma ENDDUMP
From druzus at acn.waw.pl  Fri Sep 26 18:35:42 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 26 18:36:16 2008
Subject: [SPAM]  Re: [Harbour] [SPAM]  Re: [SPAM]  Re: Request to share
	MT knowledge on Xbase++ NG
In-Reply-To: <19695931.post@talk.nabble.com>
References: <19675252.post@talk.nabble.com> <19678591.post@talk.nabble.com>
	<6EA5E4C3-6DBD-40C7-A7B8-00C19298DD03@syenar.hu>
	<20080925231342.GB2629@34-mo7-2.acn.waw.pl>
	<20080926000053.GC2629@34-mo7-2.acn.waw.pl>
	<19680697.post@talk.nabble.com>
	<20080926150841.GC11051@34-mo7-2.acn.waw.pl>
	<48DCFF57.8000000@mweb.co.za>
	<20080926164850.GE11051@34-mo7-2.acn.waw.pl>
	<19695931.post@talk.nabble.com>
Message-ID: <20080926223542.GA17369@34-mo7-2.acn.waw.pl>

On Fri, 26 Sep 2008, RoddGraham wrote:

Hi Rodd,

> In Xbase++, the zero workspace (zone) is like an isolated RDD context
> without an associated application thread.  Probably implemented using one of
> the Xbase++ internal threads for ownership of the context.

In Harbour it's normal item. I can even add function to store it
in any variable but I do not want to make internals documented API yet.
You can have as much as you want such variables.

> Per the Xbase++ documentation, all child relation workareas are
> simultaneously moved into or out of the zero workspace.  No operations can
> be performed against the workareas while in the zero workspace, so the
> relations cannot be altered during the move.  However, you can probably
> request an implicitly moved child area from the zero workspace without
> requesting the parent.  My expectation is that moves into and out of the
> zero workspace are processed with the exact same logic AND parent relations
> are released, but my experience says it is as likely that the parent
> relations are left dangling against the missing workarea and will result in
> a fault if they are activated.

Below I'm attaching small code which can be used for basic tests.
If possible I would like to ask you or other xbase++ user to run
it and send results here.

> You request workareas from the zero workspace by alias which IMO is a
> weakness in the design.  Rather than having alias naming collisions, the
> zero workspace FIFO's the workareas such that duplicate aliases are
> retrieved in the order they were submitted.

Here I do not agree because it gives very nice API for sharing databases
between threads, f.e. from the message I sent to Randy:

   #command GLOBAL USE [<param,...>] => USE <param>; dbRelease()
   #xcommand WA_LOCK   <(alias)> => dbRequest(<alias>)
   #xcommand WA_UNLOCK <(alias)> => dbRelease(<alias>)

and then each thread can make:

   WA_LOCK MYTABLE
      [ do sth ]
   WA_UNLOCK MYTABLE

Instead of thinking about additional work areas space think about
explicit locks for thread common WA.
In such context alias selection is perfect because it gives consistent
behavior to thread local WA.
If programmer wants to use common WA and local WA in the same thread
keeping aliasing fully functional then it has to use unique aliases.
Just like for single thread programs.
I can add also an option to attach WA without alias setting but
In such case it will be necessary to add alternative method of WA
selection in dbRequest() so detaching will have to set some additional
ID. IMHO it will be too much complicated and it will be much easier
to give public API to WA holder items so programmer can use many different
sets with detached WA.

> Some general facilities included for managing the zero workspace:
> 1) You can attach a arbritrary codeblock to the workarea when dbRelease()ing
> it to the zero workspace which can be retrieved.

It's done.

> 2) You can retrieve an array of alias names currently in the zero workspace
> with WorkSpaceList( DB_ZEROSPACE ).

I didn't know about it.

> 3) You can enumerate the workareas in the zero workspace with WorkSpaceEval(
> CodeBlock, DB_ZEROSPACE ).

I wanted to add to Harbour hb_waEval() and I even have it's code implemented
but I didn't know about xbase++ WorkSpaceEval() and its second parameter.

> DB_ZEROSPACE is a manifest constant.  DB_WORKSPACE is also available for
> processing the current threads workarea context.

I guess xbase++ can have more WorkSpace*() functions. Before I'll begin
to add them I would like to see the list.

> The associated code block is attached to the workarea that was explicity
> dbRelease()d to the zero workspace.  It is not shared with child workareas. 
> AFAIK, the code block can only be set by the dbRelease() and is permanently
> associated until replaced via another dbRelease().

Rather pair: dbRequest() and dbRelease() :-)

> IMO, the Xbase++ zero workspace is adequate for the goal, but is
> minimalistically implemented and not feature rich.

It will depend on what you need.
Here I like xbase++ API because they can be used in interesting ways
f.e. as obligatory locking to common for all thread WAs.
Look also at mttest09.prg. You can find that the same code can be
executed by single thread program and MT one. In this API I'm
missing only one thing. Just like a codeblock I would like to
attach access mask which will be filter for existing detached WA.
With such API I can run 5 worker threads waiting for jobs with mask
WA_TODO in dbRequest(). Then each other thread can push some operations
with such mask. When it will need results it will ask about released
WA with mask WA_DONE. Worker thread when attach WA with WA_TODO mask
evaluates codeblock and then release WA with result and WA_DONE mask.
Anyhow here probably it will be better to use handles instead of aliases.
Maybe I'll add also such WA holder in the future.

best regards,
Przemek




proc main()
local i
for i:=1 to 4
   dbcreate("_tst"+str(i,1),{{"F","C",1,0}})
   select(i)
   use ("_tst"+str(i,1)) shared
   while lastrec() < 10
      dbAppend()
   enddo
   dbUnlock()
next
select _tst1
dbRlock(2)
dbRlock(5)
dbRlock(6)
dbRlock(8)
set relation to recno() into _tst2, to recno() into _tst3
select _tst2
set relation to recno() into _tst3
select _tst4
set relation to recno() into _tst1
for i:=1 to 4
   (i)->(dspRel())
next
? "detaching _tst1", dbRelease("_tst1")
for i:=1 to 4
   (i)->(dspRel())
next
select 2
if !used()
   ? "attaching _tst2", dbRequest("_tst2",,.f.)
   for i:=1 to 4
      (i)->(dspRel())
   next
endif
select 1
? "attaching _tst1", dbRequest("_tst1",,.f.)
for i:=1 to 4
   (i)->(dspRel())
next
return

proc dspRel()
local cRel, i:=0, aLck
if used()
   ? alias() + ":"
   while !empty( cRel := dbRelation( ++i ) )
      ?? "", cRel, "->", ltrim(str(dbRSelect(i)))
   enddo
   if !empty( aLck := dbRlockList() )
      ?? "  locks:"
      aEval( aLck, {|x| qqout("",ltrim(str(x)))} )
   endif
endif
return
From rgraham at grahamautomation.com  Fri Sep 26 20:23:48 2008
From: rgraham at grahamautomation.com (RoddGraham)
Date: Fri Sep 26 20:23:56 2008
Subject: [Harbour] [SPAM]  Re: [SPAM]  Re: [SPAM]  Re: Request to share
	MT knowledge on Xbase++ NG
In-Reply-To: <20080926223542.GA17369@34-mo7-2.acn.waw.pl>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com>
	<6EA5E4C3-6DBD-40C7-A7B8-00C19298DD03@syenar.hu>
	<20080925231342.GB2629@34-mo7-2.acn.waw.pl>
	<20080926000053.GC2629@34-mo7-2.acn.waw.pl>
	<19680697.post@talk.nabble.com>
	<20080926150841.GC11051@34-mo7-2.acn.waw.pl>
	<48DCFF57.8000000@mweb.co.za>
	<20080926164850.GE11051@34-mo7-2.acn.waw.pl>
	<19695931.post@talk.nabble.com>
	<20080926223542.GA17369@34-mo7-2.acn.waw.pl>
Message-ID: <19698288.post@talk.nabble.com>




Przemyslaw Czerpak-2 wrote:
> 
> Below I'm attaching small code which can be used for basic tests.
> If possible I would like to ask you or other xbase++ user to run
> it and send results here.
> 

Here is the output from Xbase++ v1.90.331:

_TST1: recno() -> 2 recno() -> 3  locks: 2 5 6 8
_TST2: recno() -> 3
_TST3:
_TST4: recno() -> 1
detaching _tst1 Y
_TST2: recno() -> 3
_TST3:
_TST4: recno() -> 1
attaching _tst1 Y
_TST1: recno() -> 2 recno() -> 3  locks: 2 5 6 8
_TST2: recno() -> 3
_TST3:
_TST4: recno() -> 1

Of course, this output throws a fly in the ointment with regard to
documentation vs actual implementation.  The child workareas did not move to
the zero workspace, the parent workarea was left with a dangling relation,
and the moved workarea retained relations that would have been invalid in
the workspace of another thread.  Obviously leading to a runtime error if
the application developer does not handle the issue.

On the plus side, the source compiled and executed without modification or
error.

Regards, 

Rodd Graham
-- 
View this message in context: http://www.nabble.com/A-few-questions-about-MT-tp19555409p19698288.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From rgraham at grahamautomation.com  Fri Sep 26 20:59:01 2008
From: rgraham at grahamautomation.com (RoddGraham)
Date: Fri Sep 26 20:59:07 2008
Subject: [Harbour] [SPAM]  Re: [SPAM]  Re: [SPAM]  Re: Request to share
	MT knowledge on Xbase++ NG
In-Reply-To: <20080926223542.GA17369@34-mo7-2.acn.waw.pl>
References: <48D2698D.80206@dbtopas.lt> <19675252.post@talk.nabble.com>
	<19678591.post@talk.nabble.com>
	<6EA5E4C3-6DBD-40C7-A7B8-00C19298DD03@syenar.hu>
	<20080925231342.GB2629@34-mo7-2.acn.waw.pl>
	<20080926000053.GC2629@34-mo7-2.acn.waw.pl>
	<19680697.post@talk.nabble.com>
	<20080926150841.GC11051@34-mo7-2.acn.waw.pl>
	<48DCFF57.8000000@mweb.co.za>
	<20080926164850.GE11051@34-mo7-2.acn.waw.pl>
	<19695931.post@talk.nabble.com>
	<20080926223542.GA17369@34-mo7-2.acn.waw.pl>
Message-ID: <19698574.post@talk.nabble.com>



Przemyslaw Czerpak-2 wrote:
> 
>> You request workareas from the zero workspace by alias which IMO is a
>> weakness in the design.  Rather than having alias naming collisions, the
>> zero workspace FIFO's the workareas such that duplicate aliases are
>> retrieved in the order they were submitted.
> 
> Here I do not agree because it gives very nice API for sharing databases
> between threads...
> 

My goal in this thread is not agreement or disagreement.  FWIW, I could care
less about sharing workareas (or using GLOBALS/PRIVATES) between threads as
it is a facility I would never use.  And you are right, I disagree with the
alias name and FIFO design, but it is the current implementation of Xbase++.

My goal is to maximize the source code compatibility of the two compilers. 
If an Xbase++ api can be adopted or emulated in Harbour with compatibility
and you agree with the api, then by all means make compatibility.  Those
apis that don't make sense or you don't want to implement can be addressed
by using the preprocessor to issue a warning or error so that issues with
source code ported from Xbase++ can be quickly identified and resolved. 
Obviously, the worst thing to do would be to adopt the api naming with an
alternate behavour.

I am know wondering if it would be a good idea to add a optional DIALECT
statement/define/pragma at the top .PRG source code to indicate flavor to
the compiler in much the same way you add a <!DOCTYPE to the top of an HTML
document to indicate its flavor.  Just a thought.


Przemyslaw Czerpak-2 wrote:
> 
> I guess xbase++ can have more WorkSpace*() functions. Before I'll begin
> to add them I would like to see the list.
> 

WorkSpaceList() and WorkSpaceEval() is the entire list.  In fact
WorkSpaceEval() is nothing more than aeval(WorkSpaceList(),codeblock). 
DB_ZEROSPACE and DB_WORKSPACE are the only documented constants with values
of 2 and 1 respectively.  DB_WORKSPACE is the default.

So long as the primitives exist to emulate these functions, I think that
implementing the Xbase++ compatibility functions (while trivial) is best
left to the parties that are interested in porting code from Xbase++. 
Hopefully they would do this in an Xbase++ compatibility library that is
shared as part of the Harbour project.  I essentially had to do this same
thing when porting from Clipper to Xbase++ which I shared on the Xbase++ NG.

No sense burning your time implementing things unless they are valuable to
the Harbour community as a whole.


Przemyslaw Czerpak-2 wrote:
> 
>> The associated code block is attached to the workarea that was explicity
>> dbRelease()d to the zero workspace.  It is not shared with child
>> workareas. 
>> AFAIK, the code block can only be set by the dbRelease() and is
>> permanently
>> associated until replaced via another dbRelease().
> 
> Rather pair: dbRequest() and dbRelease() :-)
> 

The codeblock is just a workarea attribute set at dbRelease().  I find no
other documented way to write the value, but the value can be read at any
time using dbJob() which takes no parameters and returns the value of the
current workarea.  I am not even sure if or why the value is limited to
codeblock type since it is never documented to be evaled.

Regards,

Rodd Graham
-- 
View this message in context: http://www.nabble.com/A-few-questions-about-MT-tp19555409p19698574.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From toninhofwi at yahoo.com.br  Fri Sep 26 21:06:51 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Fri Sep 26 21:00:19 2008
Subject: [Harbour] 2008-09-26 19:34 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080926173513.GA29936@34-mo7-2.acn.waw.pl>
References: <20080926173513.GA29936@34-mo7-2.acn.waw.pl>
Message-ID: <7n1rd4l9fqtk9ba0m0qao7omtktpa3tg5m@4ax.com>


>2008-09-26 19:34 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbstack.h
>  * harbour/source/vm/estack.c
>    + added assembler inline macros for TLS access in BCC and MinGW32
>      They are enabled when Harbour is compiled with -DHB_NO_TLS.
>      Please check the speed difference. If it will be noticeable
>      then we keep them probably as default. Otherwise they will be
>      removed.
>
>best regards

Hi Przemek, this is BCC 6.10 results:

new means -DHB_NO_TLS

---------------------------------------     oldST newST oldMT newMT
total application time:                56.05 56.23 73.14 70.39
total real time:                           56.25 56.36 73.28 70.48


Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opção para você! 
Experimente já e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From harbour.01 at syenar.hu  Sat Sep 27 03:16:20 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Sep 27 03:16:25 2008
Subject: [Harbour] 2008-09-27 09:15 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92070$Blat.v2.6.2$f0d49760$12bc5dff2a5c@127.0.0.1>

2008-09-27 09:15 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbthread.h
    % Disabled HB_USE_TLS for __BORLAND__ and __MINGW32__ for 
      best performance.

  * contrib/hbwhat/whtmmcap.c
    ! Fixed some warnings under certain MinGW 4.3.2 
      installations. 
      TODO: hbwhat users pls finish this fix.

  * utils/hbmake/hbmake.prg
    ! Fixed hbw32 to hbwin.
    * Win32 references changed to Windows.

  * make_gcc.sh
    * Not accepting CFLAGS anymore as custom C flags envvar.
      Pls use C_USR instead.

  * make_gcc.mak
    + Added wsock32 lib to Cygwin system liblist.
    ! Removed setting HB_OS_* macros explicitly.

  * make_b32.mak
  * make_vc.mak
    * Minor formatting.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Sep 27 03:19:29 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Sep 27 03:19:30 2008
Subject: [Harbour] 2008-09-27 09:17 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92071$Blat.v2.6.2$6168a110$d946a066ad0@127.0.0.1>

2008-09-27 09:17 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_gcc.sh
    % Minor cleanup after prev changes.
--
Brgds,
Viktor

From dmacias at mail.udg.mx  Sat Sep 27 05:34:11 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sat Sep 27 05:34:09 2008
Subject: [Harbour] Re: 2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48DDFE13.7020901@mail.udg.mx>

Maurilio:

>I've got these results

>  PIV 2.4GHz UNI   --  PIV 3.6GHz HT SMP
>CPU INT   2001.95          2863.38
>CPU FLOAT   91.49           217.92
 >MEMORY    4481.71          5213.02

And your speedtst.prg results in UNI ? Are very different of SMP ?

>so, pc speed seems ok, but, I've noticed one thing, when I run speedtst
>on the UNI kernel I see that the single CPU is maxed out (using OS/2
>version of task manager, just to give you an idea).

>When i run it on the SMP kernel, though, both CPUs keep going up and
>down, in spikes, as if there is some call which suspends the program 
 >for a certain amount of time.

>This peculiar behaviour does not happen when I run the speed comparison
>tool, so it has to be something inside speedtst and/or harbour runtime 
>and/or gcc runtime, but I don't understand what!

I saw same behaviour
In AMD Athlon CPU goes 100 % in OS/2 but in Windows XPP SP2 and Linux
Mandriva 2008 too
In Core2Duo:
Windows Vista HP: both CPU alternate 60% / 40%
Windows XPP SP2: both CPU alternate 80% / 20%
OS/2: refuse to install due hardware
Linux Mandriva 2008.1: mainly 5% / 100 %  second CPU does everything

At last all seem to be an OS decision

I made "long-runs" adding a 0 to:
   #define N_LOOPS 10000000
so is 10x greater. Results are linear, time consumed was 10x

David Macias


From dmacias at mail.udg.mx  Sat Sep 27 07:29:07 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sat Sep 27 07:29:06 2008
Subject: [Harbour] Re: 2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48DE1903.6070909@mail.udg.mx>

Przemek:

>Harbour
>      ST: total application time:      25.10
>      MT: total application time:      27.99
>xHarbour:
>      ST: total application time:      38.23
>      MT: total application time:      51.95

>   Harbour MT overhead to ST mode is:  11.51%
>   xHarbour MT overhead to ST mode is: 35.89%

>   xHarbour ST mode is 52.31% slower then Harbour
>   xHarbour MT mode is 86.60% slower then Harbour

>In your results:

>   Harbour MT overhead to ST mode is:  10.27%
>   xHarbour MT overhead to ST mode is: 67.34%

>   xHarbour ST mode is 51.75% slower then Harbour
>   xHarbour MT mode is 130.26% slower then Harbour

>As I said the only one noticeable difference is bigger MT overhead
>in xHarbour for OS2 then in xHarbour for Linux. The rest is in practice
>proportionally the same.
>The overhead ~10-15 percent seems to be minimal cost we have to pay for
>MT mode in Harbour and cannot be significantly reduced.

Well detailed and interesting results.
At last we can live with 10-15 % penalty for benefits of MT  :-)


>I'll commit both inline asm functions to SF repository in a while
>and I would like to ask BCC and MinGW users to make speed tests for
>MT mode for Harbour compiled with and without -DHB_NO_TLS macro.
>It will be the answer if it's worth to keep them or not.

As I saw in different posts performance with -DHB_NO_TLS is better in
general with exceptions in particular, so I suppose it should be kept


I made my pending tests for comparison of two generations processors

AMD Athlon 2200+ 2.0 GHz/1MbL2, 1 Gb RAM (2003)
========================================
Each OS in own partition, with AirBoot 1.05 as boot manager

Windows, BCC 5.5.1
Harbour 1.1.0dev (Rev. 9508), Windows XP 5.1.2600 Service Pack 2
-------------
ST
   total application time:                              51.28
   total real time:                                     51.58
MT
   total application time:                              62.28
   total real time:                                     62.42

OS/2: eComStation 1.2 MR
Harbour 1.1.0dev (Rev. 9508), OS/2 4.50
-------------
ST
   total application time:                              46.42
   total real time:                                     46.42
MT
   total application time:                              52.99
   total real time:                                     53.02

OS/2: IBM OS/2 MCP
Harbour 1.1.0dev (Rev. 9508), OS/2 4.50
-------------
ST
   total application time:                              45.59
   total real time:                                     45.60
MT
   total application time:                              53.01
   total real time:                                     53.01

Linux Mandriva 2008
Harbour 1.1.0dev (Rev. 9507), Linux 2.6.22.18-desktop-1mdv i686
-------------
ST
   total application time:                              64.25
   total real time:                                     67.25
MT
   total application time:                              75.71
   total real time:                                     78.90

Comments:
- Very different results between OS in same hardware
- OS/2 is best in both versions :-)
   AMD Athlon - OS/2 show a good combination for performance
- Surprisely Linux is too slow ( is desktop )
- Overhead for MT is uniform



Intel Core2Duo 2.0 GHz/4MbL2, 2 Gb RAM (Santa Rosa, July 2007)
======================================
Each OS in own partition, with AirBoot 1.05 as boot manager

Windows, BCC 5.5.1
Harbour 1.1.0dev (Rev. 9508), Windows Vista 6.0.6000
-------------
ST
   total application time:                              34.32
   total real time:                                     35.19
MT
   total application time:                              45.97
   total real time:                                     46.53

Harbour 1.1.0dev (Rev. 9508), Windows XP 5.1.2600 Service Pack 2
-------------
ST
   total application time:                              39.91
   total real time:                                     40.78
MT
   total application time:                              52.20
   total real time:                                     52.95

Harbour 1.1.0dev (Rev. 9508), Windows XP 5.1.2600 Service Pack 2
Windows under VirtualBox 2.0.2 on Linux Mandriva 2008.1
-------------
ST
   total application time:                              24.12
   total real time:                                     34.39
MT
   total application time:                              35.39
   total real time:                                     45.77

Linux Mandriva 2008.1
Harbour 1.1.0dev (Rev. 9507), Linux 2.6.24.4-laptop-1mnb i686
-------------
ST
   total application time:                              42.09
   total real time:                                     42.09
MT
   total application time:                              50.37
   total real time:                                     50.37


Comments:
- Very different results between OS with same hardware
- Surprisely Linux is slow
- Overhead for MT is uniform but greater
- Strange results for VirtualBox with 10 sec difference between
application/real times
Even so it was faster than both real Windows Vista/XP

- Disappointment for Core2Duo
I expected much better results, even results are better for same OS

Logic is: if PIV 3.3/1MbL2 has better performance than AMD Athlon
2200+/256KbL2 and Core2Duo 2.0/4MbL2 has better performance than PIV
3.3, then Core2Duo must have a better performance than AMD Athlon 2200+,
BUT to much  :-)
I little justificacion: is Core2Duo mobile

David Macias


From dmacias at mail.udg.mx  Sat Sep 27 13:53:44 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sat Sep 27 13:53:43 2008
Subject: [Harbour] Re: Re: 2008-09-24 20:30 UTC+0200 Przemys...
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48DE7328.9090706@mail.udg.mx>

I received a message from:
   Rodd Graham <donotreply@choicemailone.com>
included below

But I never sent a message to Rodd Graham or any e-mail related
Can be an error of "mailbox protection system" but also can be another
type of info collector so I send this warning to Harbour list

I did not used included link
   "Click here to verify your identity"
because I know my identity  :-)

David Macias


Hello, you recently sent a message to Rodd Graham.

I am now using a mailbox protection system called ChoiceMail One to
block unsolicited junk mail. Because you are actually reading this note,
it is highly unlikely that your message to me was in fact unsolicited.
However, I regret that I do not already have your email address in my
approved list. That is why this note has been sent to you.
Please click on the link below to verify your identity.

Click here to verify your identity

When your browser opens, fill in your name and a short reason for
wishing to send e-mail to me. Your message will be delivered to me after
I review this information.

There is no need to send your original message again.

The information you provide will only be seen by me and is not saved by
DigiPortal Software for any purpose.

To find out how ChoiceMail One can help prevent your own inbox from
overflowing with junk e-mail, you can visit DigiPortal Software's web
site at
http://www.digiportal.com

More details about the registration process itself can be found at
http://www.digiportal.com/senderinfo.htm

Please be aware that a response is required within 40 day(s) to prevent
your messages from being automatically deleted.



From bedipritpal at hotmail.com  Sat Sep 27 16:40:21 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Sep 27 16:40:28 2008
Subject: [Harbour] Class TThread - Xbase++ Implementation
Message-ID: <19706251.post@talk.nabble.com>


Hello Przemek

Below is the class skelton with documentation of Xbase++ thread
implementation
via Thread class. It also contains two examples, 2nd one is really
interesting one
though I do not know how it behaves.

This skelton compiles fine in Harbour. Just review it and if possible fill
in the blanks.
It may qualify for tthreadx.prg when finished.

Regards
Pritpal Bedi

***********************************************
#include "hbclass.ch"

#ifdef HB_COMPAT_XPP

CREATE CLASS TThread FUNCTION Thread
   VAR  maxStackSize   AS USUAL PROTECTED INIT 50000

   VAR  active         AS LOGICAL READONLY  INIT .f.
   /* READONLY ASSIGNMENT HIDDEN

      As long as a thread is executing program code,
      the instance variable :active contains the value .T. (true).
      Before execution of the program code in the thread starts and after
the code
      has ended, this instance variable contains the value .F. (false).
      :active is used to determine when the program code specified using the
      method :start() has ended. The instance variable gives no information
      about whether processor time is allotted to the thread at a particular
point.
   */

   VAR  deltaTime      AS NUMERIC READONLY  INIT 0
   /* READONLY ASSIGNMENT HIDDEN

      If a Thread object is to execute its program code repeatedly,
      a time interval can be specified in 1/100ths of a second using the
      :setInterval()  method. When the interval has expired,
      the program code is executed automatically again. However,
      the operating system cannot guarantee that a thread will be restarted
      exactly at that point in time when the interval expires.
      Therefore, the exact elapsed time since the last restart is stored
      in the :deltaTime instance variable. It is calculated each time
      an execution cycle is complete. If the value of :deltaTime is
repeatedly
      added to a LOCAL variable, the result is the exact total execution
time of a thread.
   */

   VAR  interval       AS USUAL READONLY  INIT NIL
   /* READONLY ASSIGNMENT HIDDEN
      NUMERIC | NIL

      The time interval specified with the :setInterval() method is stored
      in this instance variable. If specified, :interval contains a numeric
value.
      The unit is 1/100th of a second.
   */

   VAR  priority       AS NUMERIC READONLY  INIT 0
   /* READONLY ASSIGNMENT HIDDEN

      The operating system distributes the processor time to the available
threads.
      The distribution occurs on the basis of the priority of each thread.
      Precedence when allocating processor time is based on the priority of
each thread.
      Threads with the same priority are treated equally, and the CPU is
assigned
      to these threads by the operating system using a round robin scheme.
      Threads with lower priority are allocated processor time only when
      higher priority threads do not execute code.
   */

   VAR  startCount     AS NUMERIC READONLY  INIT 0
   /* READONLY ASSIGNMENT HIDDEN

      If a time interval is specified by the :setInterval() method for the
repeated
      execution of program code in a thread, the value in :startCount is
incremented by 1
      each time when program execution begins. If the thread is terminated,
      this instance variable will contain the total number of execution
cycles
      since calling the :start() method.
   */

   VAR  startTime      AS USUAL READONLY  INIT NIL
   /* READONLY ASSIGNMENT HIDDEN
      NUMERIC | NIL

      The instance variable :startTime is used to store the time when a
      Thread object actually starts with program execution after calling the
      :start() method. The value is set by the :setStartTime() method and
indicates
      the start time as "number of seconds since midnight".
      When a thread commences program execution, :startTime is reset to NIL.
   */

   VAR  threadID       AS NUMERIC READONLY  INIT 0
   /* READONLY ASSIGNMENT HIDDEN

      When a new thread is created, it receives a unique numeric ID for
identification.
      This ID is stored in the instance variable :threadID . It is only
provided
      as information and cannot be changed.
   */

   VAR  atEnd          AS USUAL EXPORTED  INIT NIL
   /* EXPORTED
      Character | Code block | (NIL)

      Either a code block or a character string containing the name of a
globally visible,
      user-defined function can optionally be assigned to :atEnd . The
corresponding
      program code is executed in the :start() method before the thread
terminates.
      This is analogous to an EXIT PROCEDURE of the application program.
   */

   VAR  atStart        AS USUAL EXPORTED  INIT NIL
   /* EXPORTED
      Character | Code block | (NIL)

      Either a code block or a character string containing the name of a
globally visible,
      user-defined function can optionally be assigned to :atStart . The
corresponding
      program code is executed in the :start() method, prior to the
execution
      of the code which is specified when the :start() method is called.
      This is analogous to an INIT PROCEDURE of the application program.
   */

   VAR  cargo          AS USUAL EXPORTED  INIT NIL
   /* EXPORTED
      All Data Types

      This instance variable is not used by the Thread object.
      Values of all data types can be assigned to it.
   */

   VAR  result         AS USUAL EXPORTED  INIT NIL
   /* EXPORTED
      Any data type is possible.

      After processing in a thread has terminated, the instance variable
:result
      contains the return value of the function or procedure executed in the
thread.
   */

   METHOD new( nMaxStackSize )

   PROTECTED:
   METHOD atEnd()
   METHOD atStart()
   METHOD execute()

   EXPORTED:
   METHOD quit( xResult, nRestart )
   METHOD setInterval( nHSeconds )
   METHOD setPriority( nPriority )
   METHOD setStartTime( nSeconds )
   METHOD start()
   METHOD synchronize( nTimeOut )


ENDCLASS

METHOD new( nMaxStackSize ) CLASS TTHREAD
   /* <nMaxStackSize> is a numeric value which indicates the maximum size
(in bytes)
      of the stack for the thread. The default value is 50000 bytes.

      A Thread object manages a thread and can execute program code in the
thread.
      As soon as the object is created, the thread is available.
      The function or procedure to be executed within the new thread must be
      specified using the method :start().
   */

   if HB_ISNUMERIC( nMaxStackSize )
      ::maxStackSize := nMaxStackSize
   endif

RETURN self

METHOD atEnd( ... ) CLASS TTHREAD
   /*  [<xParamList>]
       is a comma-separated list of any expressions which are passed
       to the method :atEnd(). They are identical with the parameters passed
to :execute().

       The :atEnd() method is PROTECTED and can only be invoked from
subclasses of the
       Thread class. Its purpose is to implement program code in a
user-defined method
       which is executed once at the end of a thread, rather than using the
:atEnd
       instance variable. The method is called from :start() before a thread
terminates.
       Note that when both instance variable and method specify code to
execute when a
       thread ends, the :atEnd() method is executed first.
   */

RETURN nil

METHOD atStart( ... ) CLASS TTHREAD
   /* [<xParamList>]
      <xParamList> is a comma-separated list of any expressions which are
passed
      to the method :atStart() . They are identical with the parameters
passed to :execute() .

      The :atStart() method is PROTECTED and can only be invoked from
subclasses
      of the Thread class. Its purpose is to implement program code in a
user-defined
      method which is executed once at the beginning of a thread, rather
than using the
      :atStart instance variable. The method is called at the beginning of a
thread.
      Note that if both instance variable and method specify code to execute
      when a thread starts, the :atStart() method is executed first.
   */

RETURN nil

METHOD execute( ... ) CLASS TTHREAD
   /* [<xParamList>]
      <xParamList> is a comma-separated list of any expressions which are
passed
      to the method :execute() .

      This method does not have a return value in the usual sense because it
runs
      asynchronously. The RETURN value of :execute() is assigned to the
      instance variable :result where it can be retrieved from when the
thread has ended.

      The method :execute() can only be executed by subclasses of the class
Thread
      since it has the PROTECTED visibility attribute. By subclassing, the
thread class
      can be designed to accommodate specific needs of the programmer. When
the
      method :start() is called without the first parameter, all subsequent
parameters
      are passed to the method :execute() and appear in <xParamList> . The
program code
      of this method is then executed in the separate thread which is
maintained by
      the Thread object.
   */

RETURN nil

METHOD quit( xResult, nRestart ) CLASS TTHREAD
   /* [<xResult>]
      Optionally any value <xResult> can be passed to the method which is
assigned as
      return value of the thread to the :result instance variable.

      [<nRestart>]
      Constants from the following table can be used for <nRestart>.
      They are defined in THREAD.CH.

      QUIT_NORESTART [D] The instance variable :interval is set to NIL
before the thread is terminated
      QUIT_RESTART       The instance variable :interval remains unchanged

      The :quit() method immediately terminates execution of program code of
the threead
      of this thread object. Before the thread returns, the :atEnd() method
is called and
      the program code defined by :atEnd is executed, if specified. The
:quit() method
      is special in the Thread class because it can be called only for that
Thread object
      which maintains the current thread. This is equivalent to the
expression
      ThreadObject():quit() . It is not possible to use :quit() for
terminating a thread
      directly from another thread. Terminating a running thread from
outside can only
      be done indirectly (refer to the example below).

      Note: If a time interval is set on the corresponding Thread object
      (see :setInterval() ) and QUIT_RESTART is passed to :quit() ,
      only the current execution cycle is terminated and the Thread object
restarts
      the thread when the time interval has expired.
   */

RETURN nil

METHOD setInterval( nHSeconds ) CLASS TTHREAD
   /* <nHSeconds>
      indicates the time interval in 1/100ths of a second after which a
thread is
      automatically restarted. The value of <nHSeconds> is stored in the
:interval
      instance variable. Passing the value NIL voids a previously set
interval.

      The method :setInterval() defines a time interval. When it expires,
the Thread object
      automatically restarts the thread and executes the program code
specified to the
      :start() method. If the value of <nHSeconds> is smaller than the
required execution
      time of the thread, it is restarted as soon as the thread has finished
code execution.
      Each time the thread begins executing code, the instance variable
:startCount
      is incremented by 1. The thread remains active until the time interval
is set to NIL.
      After that, the thread is terminated.

      Note: The time interval after which the thread is restarted can
deviate from the value
      <nHSeconds> . The actual achieved time interval is stored in the
instance variable :deltaTime .
   */

   if HB_ISNUMERIC( nHSeconds )
      ::interval := nHSeconds
   endif
RETURN .f.

METHOD setPriority( nPriority ) CLASS TTHREAD
   /* <nPriority>
      Constants listed in the following table can be used for <nPriority> .
      They are defined in the file THREAD.CH

      PRIORITY_HIGHEST        Highest priority
      PRIORITY_ABOVENORMAL    High priority
      PRIORITY_NORMAL         Normal priority
      PRIORITY_BELOWNORMAL    Low priority
      PRIORITY_LOWEST         Lowest priority

      Special purpose priorities

      PRIORITY_TIME_CRITICAL  Thread executes code as soon as it is Ready to
Run
      PRIORITY_IDLE           Thread executes code when no other thread is
                              Ready to Run or executing code


      The method :setPriority() returns the value .T. (true) if the priority
for the
      thread can be set, otherwise it returns .F. (false).

      The method :setPriority() allows the priority of threads to be
specified.
      The operating system distributes processor time to various threads
according to
      their priority. Threads with high priority receive precedence when
processor time
      is assigned and these threads are executed prior to threads having a
lower priority.

      By default, the threads in an Xbase++ program have the priority
PRIORITY_NORMAL.
      An Xbase++ application is provided processor time along with other
programs based
      on precedence. The priority does not normally need to be changed.

      Caution: The Thread object allows thread priority to be changed and
appropriate
      handling of this remains the responsibility of the programmer. Raising
the priority
      of a thread only makes more processor time available to the thread
from the
      operating system. It does not ensure that a program will run faster.
In the worst case,
      if the priority is set too high, it would mean that multi-tasking and
multi-threading
      are no longer possible since the Xbase++ application is allocated all
of the
      processor time and other programs are not able to run until the
Xbase++
      application has terminated.
   */

   if HB_ISNUMERIC( nPriority )
      ::priority := nPriority
   endif

RETURN .f.

METHOD setStartTime( nSeconds ) CLASS TTHREAD
   /* <nSeconds>                                                                                                                                                                                                                                                                                                                            
      The numeric parameter <nSeconds> indicates the time when a thread is
to start
      executing program code. It must be specified as "seconds since
midnight".
      If <nSeconds> is smaller than the return value of the function
Seconds(),
      the thread will start on the next day. Passing the value NIL voids a
previously
      defined start time.

      If the start time is set, the method returns the value .T. (true),
otherwise it returns .F. (false).

      With :setStartTime() a particular point in time can be defined for a
Thread object
      to actually begin with the execution of program code after the
:start() method is
      called. The Thread object delays program execution until the return
value of
      Seconds() is larger than <nSeconds> . The value of <nSeconds> is
assigned to
      the :startTime instance variable. If :startTime contains a smaller
value than
      Seconds() when :start() is called, the Thread object commences program
execution
      on the following day. When the start time is voided after being set
and no program
      code has been executed so far, the Thread object immediately starts
the thread.

      If :setStartTime() is used in conjunction with :setInterval() the
:setInterval()
      should be called in the :atStart callback slot.
   */

   if HB_ISNUMERIC( nSeconds )
      ::startTime := nSeconds
   endif

RETURN .f.

METHOD start( ... ) CLASS TTHREAD
   /* <cFuncName>
      <cFuncName> is a character string containing the name of the function
or procedure
      to be executed in the thread. The identifier must be known (visible at
runtime),
      which means the name of a STATIC FUNCTION or STATIC PROCEDURE cannot
be specified.

      <bCodeBlock>                                                                                                                                                                                                                                                          
.t.
      Alternatively, a code block can be specified as the first parameter
instead of a
      function name. <bCodeBlock> is evaluated in the thread.                                                                                                                              
synchronize( nTimeOut ) CLASS TTHREAD

      <xParamList>
      <xParamList> is a comma-separated list of expressions that is passed
to the
      specified function or code block. Variables in <xParamList> are always
passed by
      value and not by reference to the new thread. The reference operator
is ignored when
      :start() is called.

      If the thread is started, the method :start() returns the value .T.
(true), otherwise it returns .F. (false).

      The method :start() starts the thread which is managed by the Thread
object and
      executes the function <cFuncName> or evaluates the code block
<bCodeBlock> .
      The parameters <xParamList> are passed on to the function or code
block, respectively.
      At the beginning and at the end of the method, functions or code
blocks are executed
      if they are specified in the instance variables :atStart and :atEnd .
As long as
      program code is running in the thread, the instance variable :active
contains the
      value .T. (true). As soon as the program code has ended, :active
contains .F. (false)
      and the return value of <cFuncName> or <bCodeBlock> is assigned to the
instance
      variable :result .

      Repeated calls to :start() are rejected as long as the thread is
active.
      The method can only be called again when the instance variable :active
contains the
      value .F. (false).

      When a start time is defined with :setStartTime() , the Thread object
delays program
      execution in the thread until this time is reached. Also, if a time
interval for
      repeated execution is specified with :setInterval() , the program code
is restarted
      automatically in the thread.

      When the parameter <cFuncName> is not specified, the method :start()
passes all
      parameters from <xParamList> to the method :execute() . This method
can only be
      called by subclasses of the Thread class. This allows the Thread class
to be modified
      to fit user-specific needs.
   */

   LOCAL lSuccess := .F.

RETURN lSuccess

METHOD synchronize( nTimeOut ) CLASS TTHREAD
   /* <nTimeOut>
      <nTimeOut> is a positive integer specifying a time interval in
increments of 1/100ths of a second. The current thread waits until this
interval has elapsed. The second thread is managed by the Thread object
executing the method :synchronize() , i.e. the thread where :synchronize()
is called waits for the Thread object which executes this method. When the
value zero is specified for <nTimeOut> , the current thread waits
indefinitely until the code in the other thread is complete.

      When the program code of a second thread has completed its processing
following
      :synchronize() , the method returns the value .T. (true). If the
return value is .F.
      (false), the process in the other thread could not be completed within
the specified
      time interval.

      The method :synchronize() allows the current thread to be synchronized
with other
      threads. The current thread waits for termination of the execution of
a thread
      managed by a Thread object. Generally, this method is only needed when
threads whose
      results are dependent on each other are run within an Xbase++
application.
      For example, part of a statistic might be calculated in thread A while
another part
      of the same statistic is calculated in thread B. Before the complete
result can be
      displayed, both threads must be finished so that thread A can take the
entire result
      into consideration. If thread B needs more time for calculation than
thread A,
      thread A may need to wait for thread B. In this case, the message
:synchronize()
      would be sent to the Thread object managing thread B within thread A.

      Note: When the current thread must wait for the end of a second
thread,
      there are two possible approaches:

      DO WHILE .NOT. oThreadB:synchronize(1)
         <programm code>
      ENDDO

      // or //

      oThreadB:synchronize(0)

      Both approaches cause the program in the current thread to be
continued only after
      thread B has finished. The first possibility uses a loop that is
exited only when
      the second thread has ended. In the second case, the current thread is
stopped until
      thread B terminates. During this period, processor time is allocated
only to thread B.
      The current thread resumes when thread B has terminated.

      Warning: Before calling :synchronize() , make sure that no time
interval is defined
      with :setInterval() . If an interval is set, the :synchronize() method
may never return.
   */

   LOCAL lSuccess := .f.

RETURN lSuccess


// Example - 1
// Allowing a program to be run in a separate thread
// The example demonstrates how a new thread in which
// part of a program runs is created. A Thread object
// runs code to display the time while data is entered
// in the main thread.

   PROCEDURE XPPThreadExample_1()
      LOCAL oThread := Thread():new()
      LOCAL GetList := {}

      CLS

      oThread:start( "showTime", MaxRow(), MaxCol()-7 )

      USE Customer NEW EXCLUSIVE

      @ 10,10 SAY " Lastname"  GET FIELD->Lastname
      @ 12,10 SAY "Firstname"  GET FIELD->Firstname
      READ

   RETURN

   PROCEDURE ShowTime( nRow, nCol )

      DO WHILE .T.
         DispOutAt( nRow, nCol, Time() )
         Sleep(100)
      ENDDO

   RETURN

// Example - 2
// Terminating a thread from outside
// The example shows a user-defined Thread class with methods
// suitable for terminating a thread from outside.

   CREATE CLASS MyThread FROM TThread

   PROTECTED:
      VAR terminated

   EXPORTED:
      VAR workCounter

      METHOD init      INLINE ::Thread:init(), ::terminated  := .F.,
::workCounter := 0, self
      METHOD terminate INLINE ( ::terminated := .T. )

      METHOD execute
      METHOD checkTermination

   ENDCLASS

   ** This method is executed in the thread

   METHOD execute() CLASS MyThread

      DO WHILE ::workCounter < 10000000
         // program code for thread

         DispOutAt( 0, 0, ::workCounter++ )
         ::checkTermination()
      ENDDO

   RETURN self

   ** This method checks whether or not the thread must
   ** terminate and cancels it, if necessary

   METHOD checkTermination() CLASS MyThread

      IF ::terminated
         ::terminated := .F.
         ::quit()
      ENDIF

   RETURN self


   ** Procedure for testing the MyThread() class

   PROCEDURE XPPThreadExample_2()
      LOCAL oThread := MyThread():new()
      LOCAL cVar    := "Hello World"
      LOCAL GetList := {}

      CLS

      oThread:start()

      @ 10, 10 SAY "Hi:" GET cVar
      READ

      oThread:terminate()

      WAIT "Thread is terminated from the Main thread"

   RETURN
#endif
***********************************************
-- 
View this message in context: http://www.nabble.com/Class-TThread---Xbase%2B%2B-Implementation-tp19706251p19706251.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Sat Sep 27 18:49:18 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Sep 27 18:49:25 2008
Subject: Re[Harbour] maining THREADs related functions
In-Reply-To: <19706251.post@talk.nabble.com>
References: <19706251.post@talk.nabble.com>
Message-ID: <19707145.post@talk.nabble.com>


Hello Przemek

Following are the other threads related functions in Xbase++.
This is the complete list.

Regards
Pritpal Bedi


******************************************************

FUNCTION ThreadID()
   /*
      Each thread managed by a Thread object can be identified by a numeric
ID. Thread IDs are
      consecutive numbers, i.e. the first thread has the ID 1 and it
executes the Main procedure.
      A Thread object stores the thread ID in its instance variable
:threadID .
      When the function ThreadID() is called, it retrieves the Thread object
of the current
      thread and returns the value of the instance variable :threadID . This
again is the
      numeric ID of the current thread.
   */
   LOCAL nThdID := 0

RETURN nThdID

FUNCTION ThreadObject()
   /*
      The function ThreadObject() is used to retrieve the current Thread
object when
      multiple threads are running. This is especially useful if the same
user-defined function
      is executed multiple times and simultaneously in different threads.
The function can
      also be used to retrieve the implicit Thread object which executes the
Main procedure
      at program startup.
   */
   LOCAL oThread

RETURN oThread

FUNCTION ThreadInfo( nWhichInfo, nThreadID )
   /*
      <nWhichInfo>
      #define constants from the file THREAD.CH must be used for this
parameter.
      They determine the type of information returned by the function.
Multiple constants
      can be combined with '+'.

        A         THREADINFO_TID       The numeric thread ID
        B         THREADINFO_SYSTHND   The numeric handle used by the
operating
                                       system for this thread.
        C         THREADINFO_FUNCINFO  The function name and line number
currently
                                       being executed.
        D         THREADINFO_TOBJ      The thread object representing the
thread

      <nThreadID>
      An optional thread ID can be passed to obtain information about one
particular thread.
      If this parameter is omitted, all threads are queried.

      Return
      The function returns a two-dimensional array where each thread has one
sub-array
      containing one or more elements controlled by <nWhichInfo> . If
<nWhichInfo> is a
      combination of constants, the elements of the sub-array (the array
columns) appear
      in the sequence order of each constant (first column in the table).

      The function ThreadInfo() returns various information about existing
threads of the
      current process. The constant THREADINFO_TID retrieves the Xbase++
thread ID which is
      also returned  by the ThreadId() function for the current thread.
THREADINFO_SYSTHND
      retrieves the thread IDs used by the operating system. They are
provided for calling
      API functions or for passing system IDs to third-party tools which
require this low-lovel
      information. THREADINFO_FUNCINFO results in two elements being added
to the sub-arrays.
      They contain program line and name of the function or method currently
being executed
      in the corresponding thread. Both elements contain NIL if the thread
is idle and does
      not process program code. THREADINFO_TOBJ finally retrieves the Thread
object representing
      a thread.

      PROCEDURE Main
         LOCAL aInfo, aThread := { Thread():new(), Thread():new() }
   
         CLS
         aThread[1]:start( "Test1" )
         aThread[2]:start( "Test2" )
   
         ? "Retrieve all thread information"
         aInfo := ThreadInfo( THREADINFO_TID      + ;
                              THREADINFO_SYSTHND  + ;
                              THREADINFO_FUNCINFO + ;
                              THREADINFO_TOBJ       )
   
         AEval( aInfo, {|a| QOut( Var2Char(a) ) } )
   
         ?
         ? "Retrieve partial thread information"
         aInfo := ThreadInfo( THREADINFO_FUNCINFO + ;
                              THREADINFO_TID        )
   
         ?
         AEval( aInfo, {|a| QOut( Var2Char(a) ) } )
      RETURN
   
   
      PROCEDURE Test1
         DO WHILE .T.
            DispOutAt( 10, 10, Time() )
   
            Sleep(100)
         ENDDO
      RETURN
   
   
      PROCEDURE Test2
         LOCAL nCount := 0
         DO WHILE .T.
            DispOutAt( 12, 10, nCount ++ )
            Sleep(17)
         ENDDO
      RETURN
   
      // Program output
   
      // Retrieve all thread information
      // {1, 324, 14, MAIN, thread}
      // {2, 724, 31, TEST1, thread}
      // {3, 748, 40, TEST2, thread}
      //
      // Retrieve partial thread information
      // {1, 21, MAIN}
      // {2, 31, TEST1}
   
      // {3, 40, TEST2}

   */
   LOCAL aThdInfo := {}

RETURN aThdInfo

FUNCTION ThreadWait( aThreads, nTimeOut )
   /*
      <aThreads>
      is an array whose elements contain Thread objects. The current thread
waits for the
      termination of one or all of the corresponding threads. The number of
elements in
      <aThreads> is limited to the value of the constant THREAD_WAIT_MAX
from THREAD.CH.

      <nTimeOut>
      specifies the maximum amount of time the current thread will wait for
the termination
      of other threads. The unit is 1/100th of a second. The default value
is 0 and this causes
      the current thread to wait infinitely until one Thread object in
<aThreads> has finished
      with executing code. If a value > 0 is specified for <nTimeOut> and no
thread has
      terminated within this period of time, the current thread resumes
progam execution.

      Return
      If one thread terminates within the time limit defined with <nTimeOut>
,
      the function returns the corresponding Thread object. Otherwise, the
return value is NIL.


      The function ThreadWait() causes the current thread to wait until one
thread from a
      number of threads has terminated. Compared to the :synchronize() 
method of the Thread
      class, the function has the advantage that the current thread does not
need to wait for
      a particular thread, but rather can wait for any thread from a number
of threads. Note
      that the number of threads the current thread can wait for is limited
to the constant
      THREAD_WAIT_MAX by the operating system.

   */
   LOCAL xResult

RETURN xResult

FUNCTION ThreadWaitAll( aThreads, nTimeOut )
   /*
      <aThreads>
      is an array whose elements contain Thread objects. The current thread
waits for the
      termination of all of the corresponding threads. The number of
elements in <aThreads> ,
      or thread objects, respectively, is limited to the value of the
constant
      THREAD_WAIT_MAX from THREAD.CH.

      <nTimeOut>
      specifies the maximum amount of time the current thread will wait for
the termination
      of all other threads. The unit is 1/100th of a second.  The default
value is 0 and
      this causes the current thread to wait infinitely until all other
Thread objects are
      finished with executing code. If a value > 0 is specified for
<nTimeOut> and no thread
      has terminated within this period of time, the current thread resumes
progam execution.

      Returns
      When all threads specified in <aThreads> have terminated, the return
value
      is .T. (true). If the waiting period is limited by a value greater
than 0 for
      <nTimeOut> and not all threads have terminated when this time limit
has expired,
      the function returns .F. (false).


      The function ThreadWaitAll() causes the current thread to wait for the
termination
      of multiple other threads. Compared to the :synchronize() method of
the Thread class,
      it has the advantage that the current thread does not need to wait for
one particular
      Thread object but rather can wait for multiple threads to complete
execution of code.
   */
   LOCAL lSuccess := .t.

RETURN lSuccess

******************************************************
-- 
View this message in context: http://www.nabble.com/Class-TThread---Xbase%2B%2B-Implementation-tp19706251p19707145.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From abe.buch at att.net  Sun Sep 28 14:01:06 2008
From: abe.buch at att.net (Abeb)
Date: Sun Sep 28 14:01:19 2008
Subject: [Harbour] [SPAM]  RE: how to force Num-Lock on?  gtwvt
In-Reply-To: <20080926210344.GA17760@34-mo7-2.acn.waw.pl>
References: <19691006.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815F007@SRV02.deltain.net>
	<19695015.post@talk.nabble.com>
	<20080926210344.GA17760@34-mo7-2.acn.waw.pl>
Message-ID: <19713171.post@talk.nabble.com>


But the chalange is to trap any time the user presses the numlock, and put it
back on.


Przemyslaw Czerpak-2 wrote:
> 
> On Fri, 26 Sep 2008, Abeb wrote:
>> The trick is to trap the keypress of numlock ( or other control key)
> 
> And your received correct answer.
> 
> Sample code below. It uses two different methods to extract
> cotnrol key state. But please remember that not all GTs
> can support such functionality.
> 
> best regards,
> Przemek
> 
> 
> #include "inkey.ch"
> #include "hbgtinfo.ch"
> proc main()
>    local cStatus, iStatus, nKey
>    clear screen
>    while ( nKey := inkey( 0.1 ) ) != K_ESC
>       iStatus := hb_gtInfo( HB_GTI_KBDSHIFTS )
>       cStatus := ""
>       cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_SHIFT ) != 0, ;
>                      "SHIFT ", "      " )
>       cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_CTRL ) != 0, ;
>                      "CTRL ", "     " )
>       cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_ALT ) != 0, ;
>                      "ALT ", "    " )
>       cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_SCROLOCK ) != 0, ;
>                      "SCRLOCK ", "        " )
>       cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_NUMLOCK ) != 0, ;
>                      "NUMLOCK ", "        " )
>       cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_CAPSLOCK ) != 0, ;
>                      "CAPSLOCK ", "         " )
>       cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_INSERT ) != 0, ;
>                      "INSERT ", "       " )
>       @ 1, 0 say cStatus
> 
>       cStatus := ""
>       cStatus += iif( KSETINS(), "INS ", "    " )
>       cStatus += iif( KSETCAPS(), "CAPS ", "     " )
>       cStatus += iif( KSETNUM(), "NUM ", "    " )
>       cStatus += iif( KSETSCROLL(), "SCROLL ", "       " )
>       @ 2, 0 say cStatus
>       if nKey==asc("C") .or. nKey==asc("c")
>          KSETCAPS(!KSETCAPS())
>       elseif nKey==asc("I") .or. nKey==asc("i")
>          KSETINS(!KSETINS())
>       elseif nKey==asc("N") .or. nKey==asc("n")
>          KSETNUM(!KSETNUM())
>       elseif nKey==asc("S") .or. nKey==asc("s")
>          KSETSCROLL(!KSETSCROLL())
>       endif
>    enddo
> return
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/how-to-force-Num-Lock-on---gtwvt-tp19691006p19713171.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From abe.buch at att.net  Sun Sep 28 14:10:59 2008
From: abe.buch at att.net (Abeb)
Date: Sun Sep 28 14:11:04 2008
Subject: [Harbour] [SPAM]  RE: how to force Num-Lock on?  gtwvt
In-Reply-To: <20080926210344.GA17760@34-mo7-2.acn.waw.pl>
References: <19691006.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815F007@SRV02.deltain.net>
	<19695015.post@talk.nabble.com>
	<20080926210344.GA17760@34-mo7-2.acn.waw.pl>
Message-ID: <19713177.post@talk.nabble.com>


also i tried both methods , and they don't seem to work under gtwvt.


Przemyslaw Czerpak-2 wrote:
> 
> On Fri, 26 Sep 2008, Abeb wrote:
>> The trick is to trap the keypress of numlock ( or other control key)
> 
> And your received correct answer.
> 
> Sample code below. It uses two different methods to extract
> cotnrol key state. But please remember that not all GTs
> can support such functionality.
> 
> best regards,
> Przemek
> 
> 
> #include "inkey.ch"
> #include "hbgtinfo.ch"
> proc main()
>    local cStatus, iStatus, nKey
>    clear screen
>    while ( nKey := inkey( 0.1 ) ) != K_ESC
>       iStatus := hb_gtInfo( HB_GTI_KBDSHIFTS )
>       cStatus := ""
>       cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_SHIFT ) != 0, ;
>                      "SHIFT ", "      " )
>       cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_CTRL ) != 0, ;
>                      "CTRL ", "     " )
>       cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_ALT ) != 0, ;
>                      "ALT ", "    " )
>       cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_SCROLOCK ) != 0, ;
>                      "SCRLOCK ", "        " )
>       cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_NUMLOCK ) != 0, ;
>                      "NUMLOCK ", "        " )
>       cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_CAPSLOCK ) != 0, ;
>                      "CAPSLOCK ", "         " )
>       cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_INSERT ) != 0, ;
>                      "INSERT ", "       " )
>       @ 1, 0 say cStatus
> 
>       cStatus := ""
>       cStatus += iif( KSETINS(), "INS ", "    " )
>       cStatus += iif( KSETCAPS(), "CAPS ", "     " )
>       cStatus += iif( KSETNUM(), "NUM ", "    " )
>       cStatus += iif( KSETSCROLL(), "SCROLL ", "       " )
>       @ 2, 0 say cStatus
>       if nKey==asc("C") .or. nKey==asc("c")
>          KSETCAPS(!KSETCAPS())
>       elseif nKey==asc("I") .or. nKey==asc("i")
>          KSETINS(!KSETINS())
>       elseif nKey==asc("N") .or. nKey==asc("n")
>          KSETNUM(!KSETNUM())
>       elseif nKey==asc("S") .or. nKey==asc("s")
>          KSETSCROLL(!KSETSCROLL())
>       endif
>    enddo
> return
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/how-to-force-Num-Lock-on---gtwvt-tp19691006p19713177.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From capelsoft at terra.es  Sun Sep 28 14:39:19 2008
From: capelsoft at terra.es (=?iso-8859-1?Q?Jos=E9_Luis_Capel_-?=)
Date: Sun Sep 28 14:39:27 2008
Subject: [Harbour] Still having errors building libs for Wince - Evc4
References: <19691006.post@talk.nabble.com><AFB948164110ED43B5EB849E8DEEF03815F007@SRV02.deltain.net><19695015.post@talk.nabble.com><20080926210344.GA17760@34-mo7-2.acn.waw.pl>
	<19713177.post@talk.nabble.com>
Message-ID: <2D9B67290691497697048CCE70D79B30@pepeluis>

Hi,

After last svn (9512) I'm still having this error:

source\rtl\gtclip.c(69) : error C2078: too many initializers

I'm using these sets:

SET HBPP=P:\programacion\harbour\hbpp.exe

SET HB_BUILD_WINCE=yes
SET HB_CC_NAME=vcce
SET HB_ARCHITECTURE=w32
SET HB_GT_LIB=gtgui
SET HB_GT_DEFAULT=gui
SET HB_VISUALC_VER=60
SET HB_BUILD_MODE=c
SET C_USR= -DHARBOUR_MAIN_WIN
SET HB_BUILD_DLL=no

Maybe I'm missing something... any help is apreciated.

Regards,
Jos? lUis Capel
Attached log file


----- Original Message ----- 
From: "Abeb" <abe.buch@att.net>
To: <harbour@harbour-project.org>
Sent: Sunday, September 28, 2008 8:10 PM
Subject: Re: [Harbour] [SPAM] RE: how to force Num-Lock on? gtwvt


>
> also i tried both methods , and they don't seem to work under gtwvt.
>
>
> Przemyslaw Czerpak-2 wrote:
>>
>> On Fri, 26 Sep 2008, Abeb wrote:
>>> The trick is to trap the keypress of numlock ( or other control key)
>>
>> And your received correct answer.
>>
>> Sample code below. It uses two different methods to extract
>> cotnrol key state. But please remember that not all GTs
>> can support such functionality.
>>
>> best regards,
>> Przemek
>>
>>
>> #include "inkey.ch"
>> #include "hbgtinfo.ch"
>> proc main()
>>    local cStatus, iStatus, nKey
>>    clear screen
>>    while ( nKey := inkey( 0.1 ) ) != K_ESC
>>       iStatus := hb_gtInfo( HB_GTI_KBDSHIFTS )
>>       cStatus := ""
>>       cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_SHIFT ) != 0, ;
>>                      "SHIFT ", "      " )
>>       cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_CTRL ) != 0, ;
>>                      "CTRL ", "     " )
>>       cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_ALT ) != 0, ;
>>                      "ALT ", "    " )
>>       cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_SCROLOCK ) != 0, ;
>>                      "SCRLOCK ", "        " )
>>       cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_NUMLOCK ) != 0, ;
>>                      "NUMLOCK ", "        " )
>>       cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_CAPSLOCK ) != 0, ;
>>                      "CAPSLOCK ", "         " )
>>       cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_INSERT ) != 0, ;
>>                      "INSERT ", "       " )
>>       @ 1, 0 say cStatus
>>
>>       cStatus := ""
>>       cStatus += iif( KSETINS(), "INS ", "    " )
>>       cStatus += iif( KSETCAPS(), "CAPS ", "     " )
>>       cStatus += iif( KSETNUM(), "NUM ", "    " )
>>       cStatus += iif( KSETSCROLL(), "SCROLL ", "       " )
>>       @ 2, 0 say cStatus
>>       if nKey==asc("C") .or. nKey==asc("c")
>>          KSETCAPS(!KSETCAPS())
>>       elseif nKey==asc("I") .or. nKey==asc("i")
>>          KSETINS(!KSETINS())
>>       elseif nKey==asc("N") .or. nKey==asc("n")
>>          KSETNUM(!KSETNUM())
>>       elseif nKey==asc("S") .or. nKey==asc("s")
>>          KSETSCROLL(!KSETSCROLL())
>>       endif
>>    enddo
>> return
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>
>
> -- 
> View this message in context: 
> http://www.nabble.com/how-to-force-Num-Lock-on---gtwvt-tp19691006p19713177.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: make_vcce.rar
Type: application/octet-stream
Size: 1640 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080928/6df273f8/make_vcce.obj
From harbour.01 at syenar.hu  Sun Sep 28 15:37:03 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Sep 28 15:37:16 2008
Subject: [Harbour] Still having errors building libs for Wince - Evc4
In-Reply-To: <2D9B67290691497697048CCE70D79B30@pepeluis>
References: <19691006.post@talk.nabble.com><AFB948164110ED43B5EB849E8DEEF03815F007@SRV02.deltain.net><19695015.post@talk.nabble.com><20080926210344.GA17760@34-mo7-2.acn.waw.pl>
	<19713177.post@talk.nabble.com>
	<2D9B67290691497697048CCE70D79B30@pepeluis>
Message-ID: <913074BD-BC7C-4AC3-B3C0-2551FF38928B@syenar.hu>

>
Hi Jose,

These are not needed:
> SET HB_ARCHITECTURE=w32
> SET HB_GT_DEFAULT=gui

Instead of this:
> SET C_USR= -DHARBOUR_MAIN_WIN
use this (if you really need it):
SET C_USR=-DHB_MAIN_WIN

As for the error, probably MT mode is not properly disabled.

Brgds,
Viktor

From jose.luis at iaicom.com  Mon Sep 29 03:30:53 2008
From: jose.luis at iaicom.com (=?iso-8859-1?Q?Jos=E9_Luis_Capel_?=)
Date: Mon Sep 29 03:27:29 2008
Subject: [Harbour] Still having errors building libs for Wince - Evc4
In-Reply-To: <913074BD-BC7C-4AC3-B3C0-2551FF38928B@syenar.hu>
References: <19691006.post@talk.nabble.com><AFB948164110ED43B5EB849E8DEEF03815F007@SRV02.deltain.net><19695015.post@talk.nabble.com><20080926210344.GA17760@34-mo7-2.acn.waw.pl><19713177.post@talk.nabble.com><2D9B67290691497697048CCE70D79B30@pepeluis>
	<913074BD-BC7C-4AC3-B3C0-2551FF38928B@syenar.hu>
Message-ID: <00a701c92205$4e6e6b90$bb001aac@AGSoft.local>

Viktor,

Thanks for your answer.
 
JLC>These are not needed:
JLC>> SET HB_ARCHITECTURE=w32
JLC>> SET HB_GT_DEFAULT=gui
JLC>
JLC>Instead of this:
JLC>> SET C_USR= -DHARBOUR_MAIN_WIN
JLC>use this (if you really need it):
JLC>SET C_USR=-DHB_MAIN_WIN

Thanks for the info and suggestions.

JLC>
JLC>As for the error, probably MT mode is not properly disabled.
JLC>


Do I need to do something more ?

REgards,
Jos? Luis Capel

From harbour.01 at syenar.hu  Mon Sep 29 04:15:35 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 29 04:15:34 2008
Subject: [Harbour] 2008-09-29 10:13 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9220b$Blat.v2.6.2$8c5de75e$1da8d0a2783a@127.0.0.1>

2008-09-29 10:13 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
  * make_vc.mak
    ! Fixed to use 'COPY /B' instead of 'COPY /A' to install 
      headers, to avoid appending and EOL to these files.
      They should work as is.

  * make_gcc.mak
    ! Fixed mainstd lib name.
      [TOMERGE 1.0]
--
Brgds,
Viktor

From maurilio.longo at libero.it  Mon Sep 29 04:36:32 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Mon Sep 29 04:36:45 2008
Subject: [Harbour] Re: 2008-09-24 20:30 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080926174023.GA31045@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<48DBFD26.90906@mail.udg.mx>	<20080926150027.GA11051@34-mo7-2.acn.waw.pl>	<48DD0A3A.6070109@libero.it>
	<48DD0CE2.30906@libero.it>
	<20080926174023.GA31045@34-mo7-2.acn.waw.pl>
Message-ID: <48E09390.7030701@libero.it>

Przemyslaw Czerpak wrote:
> For me it looks like normal CPU balancing done by OS.
> It's out of Harbour application controll. Sometimes it
> can be controlled by OS settings.
> 
Yes, I've added a call to set affinity to a single cpu and now I have one cpu
maxed out and the other nearly idle.

I was not 'prepared' to the fact that OS/2 reschedules to the cpu with less
work (which is what is causing cpu monitor to spike).

Anyway, it still is slower than the same program on a 2.4Ghz CPU with UNI
kernel, so maybe there is some slowdown in the kernel and/or the SMP kernel
should be used on a real multi-cpu PC while I have a HT one.

Maybe changing speedtst to divide it into two functions and execute both at
the same time with two threads could gain something.

That said, all is working as it should :)

>> PS. BTW, If I press Alt-C process does not stop, probably only single thread
>> gets stopped. See here, I had to press Alt-C two times.
>> (E:\repository\harbour-svn\tests\mt)mau
>> Cancelled at: T (9) in mau.prg
>> Cancelled at: INKEY (0)
>> MAIN (5) in mau.prg
>> (E:\repository\harbour-svn\tests\mt)
> 
> Yes ALT-C stops only the thread which received such key.
> If this is the main thread then QUIT request is send to all other
> threads. Otherwise only one thread is terminated.
> 
IMHO this is 'wrong' since I don't know which thread I'm killing, because
killing a single thread in a multi-threaded program could create problems to
the whole program and because I need a way to stop a program without having to
press Alt-C a few tens of times :)

So, I'd say that Alt-C should terminate the whole process.

Best regards.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Mon Sep 29 05:06:29 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Mon Sep 29 05:06:40 2008
Subject: [Harbour] Re: 2008-09-24 20:30 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <48DDFE13.7020901@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48DDFE13.7020901@mail.udg.mx>
Message-ID: <48E09A95.2040700@libero.it>

David Arturo Macias Corona wrote:
> Maurilio:
> 
>> I've got these results
> 
>>  PIV 2.4GHz UNI   --  PIV 3.6GHz HT SMP
>> CPU INT   2001.95          2863.38
>> CPU FLOAT   91.49           217.92
>>MEMORY    4481.71          5213.02
> 
> And your speedtst.prg results in UNI ? Are very different of SMP ?
> 
Yes, way faster.

ST takes 42,9 seconds
MT takes 59,3

Regards.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From druzus at acn.waw.pl  Mon Sep 29 05:06:22 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 29 05:06:52 2008
Subject: [SPAM]  Re: [Harbour] [SPAM]  RE: how to force Num-Lock on? gtwvt
In-Reply-To: <19713171.post@talk.nabble.com>
References: <19691006.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815F007@SRV02.deltain.net>
	<19695015.post@talk.nabble.com>
	<20080926210344.GA17760@34-mo7-2.acn.waw.pl>
	<19713171.post@talk.nabble.com>
Message-ID: <20080929090622.GA25197@34-mo7-2.acn.waw.pl>

On Sun, 28 Sep 2008, Abeb wrote:
> But the chalange is to trap any time the user presses the numlock, and put it
> back on.

So this code is still OK.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Sep 29 05:07:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 29 05:08:17 2008
Subject: [SPAM]  Re: [Harbour] [SPAM]  RE: how to force Num-Lock on? gtwvt
In-Reply-To: <19713177.post@talk.nabble.com>
References: <19691006.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815F007@SRV02.deltain.net>
	<19695015.post@talk.nabble.com>
	<20080926210344.GA17760@34-mo7-2.acn.waw.pl>
	<19713177.post@talk.nabble.com>
Message-ID: <20080929090751.GB25197@34-mo7-2.acn.waw.pl>

On Sun, 28 Sep 2008, Abeb wrote:
> also i tried both methods , and they don't seem to work under gtwvt.

Probably you made sth wrong. It works for me in Linux when
I run MS-Win GTWVT application using WINE.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Sep 29 05:18:23 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 29 05:18:51 2008
Subject: [Harbour] Re: 2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48DE1903.6070909@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48DE1903.6070909@mail.udg.mx>
Message-ID: <20080929091823.GC25197@34-mo7-2.acn.waw.pl>

On Sat, 27 Sep 2008, David Arturo Macias Corona wrote:

Hi David,

> Linux Mandriva 2008
> Harbour 1.1.0dev (Rev. 9507), Linux 2.6.22.18-desktop-1mdv i686
> -------------
> ST
>   total application time:                              64.25
>   total real time:                                     67.25
> MT
>   total application time:                              75.71
>   total real time:                                     78.90
> Comments:
> - Surprisely Linux is too slow ( is desktop )

How do you compiled Linux version?
Have you enabled any optimization in Linux builds?
Only mpkg_*.sh scripts enable GCC optimizations and in
normal build process by default all are disabled.
If you used one of them then please try to rebuild
Harbour with
   export C_USR="-O3"

best regards,
Przemek
From druzus at acn.waw.pl  Mon Sep 29 05:19:31 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 29 05:19:57 2008
Subject: [Harbour] 2008-09-29 11:18 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080929091931.GA17391@34-mo7-2.acn.waw.pl>

2008-09-29 11:18 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbvm.h
  * harbour/include/hbthread.h
  * harbour/source/vm/hvm.c
  * harbour/source/vm/thread.c
    + added hb_vmThreadRegister() funtion which allows to register new
      thread in HVM without HVM stack allocation
    + added hb_vmThreadRelease() which removes registered thread which
      does not have allocated HVM stack yet
    + added hb_threadStateNew() which returns new thread control state
      which can be used as parameter to hb_vmThreadInit(),
      hb_vmThreadRegister(), hb_vmThreadRelease()
    * register thread control state also for main thread
      Now hb_threadSelf() returns thread pointer also for main thread
    ! fixed possible race condition in hb_threadWaitForAll() and
      hb_threadTerminateAll() by using hb_vmThreadRegister() before
      starting thread.

  * harbour/source/rtl/idle.c
    * interrupt hb_idleSleep() on QUIT or BREAK requests

  * harbour/tests/mt/mttest09.prg
    * small cleanup

best regards
Przemek
From harbour.01 at syenar.hu  Mon Sep 29 05:24:59 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 29 05:25:13 2008
Subject: [Harbour] Re: 2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080929091823.GC25197@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48DE1903.6070909@mail.udg.mx>
	<20080929091823.GC25197@34-mo7-2.acn.waw.pl>
Message-ID: <9961BBF3-65C5-4D7D-9817-4CACAB1F7938@syenar.hu>

BTW, is there any objection to enable GCC -O3 switch
for all scripts?

MSVC/BCC already goes with optimizations turned on.

Brgds,
Viktor

On 2008.09.29., at 11:18, Przemyslaw Czerpak wrote:

> On Sat, 27 Sep 2008, David Arturo Macias Corona wrote:
>
> Hi David,
>
>> Linux Mandriva 2008
>> Harbour 1.1.0dev (Rev. 9507), Linux 2.6.22.18-desktop-1mdv i686
>> -------------
>> ST
>>  total application time:                              64.25
>>  total real time:                                     67.25
>> MT
>>  total application time:                              75.71
>>  total real time:                                     78.90
>> Comments:
>> - Surprisely Linux is too slow ( is desktop )
>
> How do you compiled Linux version?
> Have you enabled any optimization in Linux builds?
> Only mpkg_*.sh scripts enable GCC optimizations and in
> normal build process by default all are disabled.
> If you used one of them then please try to rebuild
> Harbour with
>   export C_USR="-O3"
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From maurilio.longo at libero.it  Mon Sep 29 05:26:28 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Mon Sep 29 05:26:39 2008
Subject: [Harbour] thread priority
Message-ID: <48E09F44.1050104@libero.it>

Hi Przemyslaw,

I think we need a way to set thread priority, which is missing right now if
I'm not wrong.

We could have four or five states (like IDLE, REGULAR, HIGH, TIME_CRITICAL),
then every platform maps those states to its own available thread priority states.

Best regards.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From dmacias at mail.udg.mx  Mon Sep 29 06:38:35 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Mon Sep 29 06:38:41 2008
Subject: [Harbour] Re: 2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48E0B02B.9000300@mail.udg.mx>

Przemek:

 >How do you compiled Linux version?
 >Have you enabled any optimization in Linux builds?
 >Only mpkg_*.sh scripts enable GCC optimizations and in
 >normal build process by default all are disabled.
 >If you used one of them then please try to rebuild
 >Harbour with
 >   export C_USR="-O3"

With make_gnu.sh

Intel Core2Duo 2.0 GHz/4MbL2, 2 Gb RAM (Santa Rosa, July 2007)

Linux Mandriva 2008.1
Harbour 1.1.0dev (Rev. 9507), Linux 2.6.24.4-laptop-1mnb i686
-------------
With "-O3"
ST
   total application time:                              24.54
   total real time:                                     24.59
MT
   total application time:                              28.03
   total real time:                                     28.03

Without "-O3"
ST
   total application time:                              42.09
   total real time:                                     42.09
MT
   total application time:                              50.37
   total real time:                                     50.37

Comments:
- No doubts, -O3 is the choice  :-)

David Macias



From druzus at acn.waw.pl  Mon Sep 29 06:46:35 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 29 06:47:05 2008
Subject: [Harbour] Re: 2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48E09390.7030701@libero.it>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48DBFD26.90906@mail.udg.mx>
	<20080926150027.GA11051@34-mo7-2.acn.waw.pl>
	<48DD0A3A.6070109@libero.it> <48DD0CE2.30906@libero.it>
	<20080926174023.GA31045@34-mo7-2.acn.waw.pl>
	<48E09390.7030701@libero.it>
Message-ID: <20080929104635.GA3417@34-mo7-2.acn.waw.pl>

On Mon, 29 Sep 2008, Maurilio Longo wrote:

Hi Maurilio,

> >> PS. BTW, If I press Alt-C process does not stop, probably only single thread
> >> gets stopped. See here, I had to press Alt-C two times.
> >> (E:\repository\harbour-svn\tests\mt)mau
> >> Cancelled at: T (9) in mau.prg
> >> Cancelled at: INKEY (0)
> >> MAIN (5) in mau.prg
> >> (E:\repository\harbour-svn\tests\mt)
> > Yes ALT-C stops only the thread which received such key.
> > If this is the main thread then QUIT request is send to all other
> > threads. Otherwise only one thread is terminated.
> IMHO this is 'wrong' since I don't know which thread I'm killing, because
> killing a single thread in a multi-threaded program could create problems to
> the whole program and because I need a way to stop a program without having to
> press Alt-C a few tens of times :)
> So, I'd say that Alt-C should terminate the whole process.

I have different opinion. In the future we will have support for more
then one console windows in some GTs (GTWVT, GTXWC, it's also possible
for GTTRM, GTCRS and GTSLN if they are executed in xWindow) and each
can has its own console window with separate keyboard events.
In such case it will be interesting functionality to kill only
one thread bound with given console not whole application.
Now we should define the access to one console by many threads
and synchronization methods. When we will make it then we can also
add support for sending cancel request to all threads bound with given
console 

Best regards
Przemek
From mbelgrano at deltain.it  Mon Sep 29 06:54:46 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 29 06:55:09 2008
Subject: [Harbour] Re: 2008-09-24 20:30 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20080929104635.GA3417@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx><48DBFD26.90906@mail.udg.mx><20080926150027.GA11051@34-mo7-2.acn.waw.pl><48DD0A3A.6070109@libero.it>
	<48DD0CE2.30906@libero.it><20080926174023.GA31045@34-mo7-2.acn.waw.pl><48E09390.7030701@libero.it>
	<20080929104635.GA3417@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F00A@SRV02.deltain.net>

In the future we will have support for Multiple gui?

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Monday, September 29, 2008 12:47 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Re: 2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak(druzus/at/priv.onet.pl)

On Mon, 29 Sep 2008, Maurilio Longo wrote:

Hi Maurilio,

> >> PS. BTW, If I press Alt-C process does not stop, probably only single thread
> >> gets stopped. See here, I had to press Alt-C two times.
> >> (E:\repository\harbour-svn\tests\mt)mau
> >> Cancelled at: T (9) in mau.prg
> >> Cancelled at: INKEY (0)
> >> MAIN (5) in mau.prg
> >> (E:\repository\harbour-svn\tests\mt)
> > Yes ALT-C stops only the thread which received such key.
> > If this is the main thread then QUIT request is send to all other
> > threads. Otherwise only one thread is terminated.
> IMHO this is 'wrong' since I don't know which thread I'm killing, because
> killing a single thread in a multi-threaded program could create problems to
> the whole program and because I need a way to stop a program without having to
> press Alt-C a few tens of times :)
> So, I'd say that Alt-C should terminate the whole process.

I have different opinion. In the future we will have support for more
then one console windows in some GTs (GTWVT, GTXWC, it's also possible
for GTTRM, GTCRS and GTSLN if they are executed in xWindow) and each
can has its own console window with separate keyboard events.
In such case it will be interesting functionality to kill only
one thread bound with given console not whole application.
Now we should define the access to one console by many threads
and synchronization methods. When we will make it then we can also
add support for sending cancel request to all threads bound with given
console 

Best regards
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Mon Sep 29 06:55:29 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 29 06:55:57 2008
Subject: [Harbour] Re: 2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9961BBF3-65C5-4D7D-9817-4CACAB1F7938@syenar.hu>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48DE1903.6070909@mail.udg.mx>
	<20080929091823.GC25197@34-mo7-2.acn.waw.pl>
	<9961BBF3-65C5-4D7D-9817-4CACAB1F7938@syenar.hu>
Message-ID: <20080929105529.GB3417@34-mo7-2.acn.waw.pl>

On Mon, 29 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> BTW, is there any objection to enable GCC -O3 switch
> for all scripts?
> MSVC/BCC already goes with optimizations turned on.

Some GCC versions where wrongly modified by Linux distribution authors
and where giving wrong code or GPF during compilation when -O3 was enabled,
f.e. older Mandrake and Mandriva distros. It's the reason why I never
enabled optimization by default. In some cases I also want to disable
some of GCC features, f.e. automatic function inlining so I need builds
with reduced optimization or without any optimizations.
We can make -O3 default but it should be enabled only when user does not
use any other -O? switches in C_USR so if necessary it will be possible
to disable it without editing make files.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Sep 29 07:00:48 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 29 07:00:59 2008
Subject: [Harbour] Re: 2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080929105529.GB3417@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48DE1903.6070909@mail.udg.mx>
	<20080929091823.GC25197@34-mo7-2.acn.waw.pl>
	<9961BBF3-65C5-4D7D-9817-4CACAB1F7938@syenar.hu>
	<20080929105529.GB3417@34-mo7-2.acn.waw.pl>
Message-ID: <7A62AA1B-F011-48A2-9E0F-0BEDE73B5B76@syenar.hu>

Hi Przemek,

> Some GCC versions where wrongly modified by Linux distribution authors
> and where giving wrong code or GPF during compilation when -O3 was  
> enabled,
> f.e. older Mandrake and Mandriva distros. It's the reason why I never
> enabled optimization by default. In some cases I also want to disable
> some of GCC features, f.e. automatic function inlining so I need  
> builds
> with reduced optimization or without any optimizations.
> We can make -O3 default but it should be enabled only when user does  
> not
> use any other -O? switches in C_USR so if necessary it will be  
> possible
> to disable it without editing make files.

Isn't it so that if someone uses C_USR=-O1, it would
override the default setting? I didn't try this with GCC,
but this is normal command line behavior (if C_USR follows
built-in options), and I do use this with MSVC.

If so, I think this is safe to do.

Also, what do you think of -O4, which is supported by
newer GCC. I don't know from exactly which version,
but older ones seems to silently accept it.

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep 29 07:01:51 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 29 07:02:00 2008
Subject: [Harbour] Still having errors building libs for Wince - Evc4
In-Reply-To: <00a701c92205$4e6e6b90$bb001aac@AGSoft.local>
References: <19691006.post@talk.nabble.com><AFB948164110ED43B5EB849E8DEEF03815F007@SRV02.deltain.net><19695015.post@talk.nabble.com><20080926210344.GA17760@34-mo7-2.acn.waw.pl><19713177.post@talk.nabble.com><2D9B67290691497697048CCE70D79B30@pepeluis>
	<913074BD-BC7C-4AC3-B3C0-2551FF38928B@syenar.hu>
	<00a701c92205$4e6e6b90$bb001aac@AGSoft.local>
Message-ID: <B5F8FECB-B8C2-44DF-84C9-3DD2B0CC876E@syenar.hu>

Hi Jose,

> JLC>Instead of this:
> JLC>> SET C_USR= -DHARBOUR_MAIN_WIN
> JLC>use this (if you really need it):
> JLC>SET C_USR=-DHB_MAIN_WIN
>
> Thanks for the info and suggestions.
>
> JLC>
> JLC>As for the error, probably MT mode is not properly disabled.
> JLC>
>
>
> Do I need to do something more ?

It would be great if you could take a closer look into it.

Brgds,
Viktor

From druzus at acn.waw.pl  Mon Sep 29 07:40:02 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 29 07:40:29 2008
Subject: [Harbour] Re: 2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <7A62AA1B-F011-48A2-9E0F-0BEDE73B5B76@syenar.hu>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48DE1903.6070909@mail.udg.mx>
	<20080929091823.GC25197@34-mo7-2.acn.waw.pl>
	<9961BBF3-65C5-4D7D-9817-4CACAB1F7938@syenar.hu>
	<20080929105529.GB3417@34-mo7-2.acn.waw.pl>
	<7A62AA1B-F011-48A2-9E0F-0BEDE73B5B76@syenar.hu>
Message-ID: <20080929114002.GA28936@34-mo7-2.acn.waw.pl>

On Mon, 29 Sep 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Isn't it so that if someone uses C_USR=-O1, it would
> override the default setting? I didn't try this with GCC,
> but this is normal command line behavior (if C_USR follows
> built-in options), and I do use this with MSVC.

It should in such way.

> If so, I think this is safe to do.

OK, let's do that.

> Also, what do you think of -O4, which is supported by
> newer GCC. I don't know from exactly which version,
> but older ones seems to silently accept it.

I know nothing about -O4 GCC switch. Where did you found
information about it?

best regards,
Przemek
From druzus at acn.waw.pl  Mon Sep 29 07:59:55 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 29 08:00:22 2008
Subject: [Harbour] 2008-09-29 13:59 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080929115955.GA15710@34-mo7-2.acn.waw.pl>

2008-09-29 13:59 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/workarea.c
    * added protection against multiple registering RDD with the same
      name by *_GETFUNCTABLE() in ST/MT mode or other thread in MT mode

best regards
Przemek
From harbour.01 at syenar.hu  Mon Sep 29 08:28:28 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 29 08:28:50 2008
Subject: [Harbour] Re: 2008-09-24 20:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080929114002.GA28936@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48DE1903.6070909@mail.udg.mx>
	<20080929091823.GC25197@34-mo7-2.acn.waw.pl>
	<9961BBF3-65C5-4D7D-9817-4CACAB1F7938@syenar.hu>
	<20080929105529.GB3417@34-mo7-2.acn.waw.pl>
	<7A62AA1B-F011-48A2-9E0F-0BEDE73B5B76@syenar.hu>
	<20080929114002.GA28936@34-mo7-2.acn.waw.pl>
Message-ID: <BBCFBA2F-1C68-41B8-A292-C03CBB9AA6F8@syenar.hu>

Hi Przemek,

> On Mon, 29 Sep 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> Isn't it so that if someone uses C_USR=-O1, it would
>> override the default setting? I didn't try this with GCC,
>> but this is normal command line behavior (if C_USR follows
>> built-in options), and I do use this with MSVC.
>
> It should in such way.
>
>> If so, I think this is safe to do.
>
> OK, let's do that.

Okay.

>> Also, what do you think of -O4, which is supported by
>> newer GCC. I don't know from exactly which version,
>> but older ones seems to silently accept it.
>
> I know nothing about -O4 GCC switch. Where did you found
> information about it?

I cannot exactly recall, maybe it was just discussion
or experimental, I really forgot.

Brgds,
Viktor

From info at fsgiudice.com  Mon Sep 29 09:47:56 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Sep 29 09:48:13 2008
Subject: [Harbour] hb_setSetCentury() function proposal
Message-ID: <48E0DC8C.1000800@fsgiudice.com>

Hi Przemek, Viktor,

I would like to add hb_setSetCentury() C level function that I need to 
modify SET CENTURY at C level.
So there are two files involved in this change:

include/hbset.h
source/vm/set.c

I have attached a diff patch tu current SVN as proposal.
If there is no objection I will upload this changes to SVN.

(some differences because my editor trims trailing spaces)

Best regards

Francesco
-------------- next part --------------
Index: include/hbset.h
===================================================================
--- include/hbset.h	(revision 9514)
+++ include/hbset.h	(working copy)
@@ -254,6 +254,7 @@
 
 extern HB_EXPORT HB_FHANDLE hb_setGetAltHan( void );
 extern HB_EXPORT BOOL       hb_setGetCentury( void );
+extern HB_EXPORT BOOL       hb_setSetCentury( BOOL );
 extern HB_EXPORT HB_FHANDLE hb_setGetExtraHan( void );
 extern HB_EXPORT HB_FHANDLE hb_setGetPrintHan( void );
 extern HB_EXPORT BOOL       hb_setGetAlternate( void );
Index: source/vm/set.c
===================================================================
--- source/vm/set.c	(revision 9514)
+++ source/vm/set.c	(working copy)
@@ -200,7 +200,7 @@
          if( pFilename->szName )
          {
             int iLen = ( int ) strlen( pFilename->szName );
-            if( ( iLen == 3 && 
+            if( ( iLen == 3 &&
                   ( hb_stricmp( pFilename->szName, "PRN" ) == 0 ||
                     hb_stricmp( pFilename->szName, "CON" ) == 0 ) ) ||
                 ( iLen == 4 &&
@@ -301,34 +301,13 @@
    hb_setSetItem( HB_SET_CANCEL, hb_param( 1, HB_IT_LOGICAL ) );
 }
 
-HB_FUNC( __SETCENTURY )
+HB_EXPORT BOOL    hb_setSetCentury( BOOL new_century_setting )
 {
    PHB_SET_STRUCT pSet = hb_stackSetStruct();
    BOOL old_century_setting = pSet->hb_set_century;
 
+   pSet->hb_set_century = new_century_setting;
    /*
-    * Change the setting if the parameter is a logical value, or is
-    * either "ON" or "OFF" (regardless of case)
-    */
-   if( ISLOG( 1 ) )
-      pSet->hb_set_century = hb_parl( 1 );
-   else if( ISCHAR( 1 ) )
-   {
-      char * szString = hb_parc( 1 );
-      ULONG ulLen = hb_parclen( 1 );
-
-      if( ulLen >= 2
-       && toupper( ( UCHAR ) szString[ 0 ] ) == 'O'
-       && toupper( ( UCHAR ) szString[ 1 ] ) == 'N' )
-         pSet->hb_set_century = TRUE;
-      else if( ulLen >= 3
-       && toupper( ( UCHAR ) szString[ 0 ] ) == 'O'
-       && toupper( ( UCHAR ) szString[ 1 ] ) == 'F'
-       && toupper( ( UCHAR ) szString[ 2 ] ) == 'F' )
-         pSet->hb_set_century = FALSE;
-   }
-
-   /*
     * Finally, if the setting changed, adjust the current date format to use
     * the correct number of year digits.
     */
@@ -394,6 +373,36 @@
    hb_retl( old_century_setting );
 }
 
+HB_FUNC( __SETCENTURY )
+{
+   BOOL new_century_setting;
+
+   /*
+    * Change the setting if the parameter is a logical value, or is
+    * either "ON" or "OFF" (regardless of case)
+    */
+   if( ISLOG( 1 ) )
+      new_century_setting = hb_parl( 1 );
+   else if( ISCHAR( 1 ) )
+   {
+      char * szString = hb_parc( 1 );
+      ULONG ulLen = hb_parclen( 1 );
+
+      if( ulLen >= 2
+       && toupper( ( UCHAR ) szString[ 0 ] ) == 'O'
+       && toupper( ( UCHAR ) szString[ 1 ] ) == 'N' )
+         new_century_setting = TRUE;
+      else if( ulLen >= 3
+       && toupper( ( UCHAR ) szString[ 0 ] ) == 'O'
+       && toupper( ( UCHAR ) szString[ 1 ] ) == 'F'
+       && toupper( ( UCHAR ) szString[ 2 ] ) == 'F' )
+         new_century_setting = FALSE;
+   }
+
+   /* call C level function to set century */
+   return hb_setSetCentury( new_century_setting );
+}
+
 HB_FUNC( SET )
 {
    PHB_SET_STRUCT pSet = hb_stackSetStruct();
@@ -958,7 +967,7 @@
          /* Return NIL if called with invalid SET specifier */
          break;
 
-#if 0 
+#if 0
       /*
        * intentionally removed default: clause to enable C compiler warning
        * when not all HB_SET_* cases are implemented. [druzus]
@@ -1516,7 +1525,7 @@
          case HB_SET_HBOUTLOGINFO:
          case HB_SET_INVALID_:
             break;
-#if 0 
+#if 0
          /*
           * intentionally removed default: clause to enable C compiler warning
           * when not all HB_SET_* cases are implemented. [druzus]
@@ -1634,7 +1643,7 @@
       case HB_SET_HBOUTLOGINFO:
       case HB_SET_INVALID_:
          break;
-#if 0 
+#if 0
       /*
        * intentionally removed default: clause to enable C compiler warning
        * when not all HB_SET_* cases are implemented. [druzus]
@@ -1733,7 +1742,7 @@
       case HB_SET_TRIMFILENAME:
       case HB_SET_INVALID_:
          break;
-#if 0 
+#if 0
       /*
        * intentionally removed default: clause to enable C compiler warning
        * when not all HB_SET_* cases are implemented. [druzus]
@@ -1832,7 +1841,7 @@
       case HB_SET_HBOUTLOGINFO:
       case HB_SET_INVALID_:
          break;
-#if 0 
+#if 0
       /*
        * intentionally removed default: clause to enable C compiler warning
        * when not all HB_SET_* cases are implemented. [druzus]
From harbour.01 at syenar.hu  Mon Sep 29 10:03:08 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 29 10:03:19 2008
Subject: [Harbour] 2008-09-29 15:59 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9223c$Blat.v2.6.2$19ed35e5$1e5c45eeb884@127.0.0.1>

2008-09-29 15:59 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * ChangeLog
  * mpkg_tgz.sh
  * harbour.spec
  * config/darwin/gcc.cf
  * config/hpux/gcc.cf
  * config/dos/rsx32.cf
  * config/dos/djgpp.cf
  * config/linux/gcc.cf
  * config/os2/gcc.cf
  * config/sunos/gcc.cf
  * config/bsd/gcc.cf
  * config/w32/mingwce.cf
  * config/w32/gcc.cf
  * config/w32/rsxnt.cf
  * config/w32/mingw.cf
    + -O3 GCC optimization level made the default for all GCC 
      builds. Those who wish to use lower optimization settings, 
      pls use C_USR=-O2 or such.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep 29 10:07:13 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 29 10:07:24 2008
Subject: [Harbour] hb_setSetCentury() function proposal
In-Reply-To: <48E0DC8C.1000800@fsgiudice.com>
References: <48E0DC8C.1000800@fsgiudice.com>
Message-ID: <22240CE8-E1F5-48E6-AB6E-859F2882BD47@syenar.hu>

Hi Francesco,

It looks okay to me.

Brgds,
Viktor

On 2008.09.29., at 15:47, Francesco Saverio Giudice wrote:

> Hi Przemek, Viktor,
>
> I would like to add hb_setSetCentury() C level function that I need  
> to modify SET CENTURY at C level.
> So there are two files involved in this change:
>
> include/hbset.h
> source/vm/set.c
>
> I have attached a diff patch tu current SVN as proposal.
> If there is no objection I will upload this changes to SVN.
>
> (some differences because my editor trims trailing spaces)
>
> Best regards
>
> Francesco
> Index: include/hbset.h
> ===================================================================
> --- include/hbset.h	(revision 9514)
> +++ include/hbset.h	(working copy)
> @@ -254,6 +254,7 @@
>
> extern HB_EXPORT HB_FHANDLE hb_setGetAltHan( void );
> extern HB_EXPORT BOOL       hb_setGetCentury( void );
> +extern HB_EXPORT BOOL       hb_setSetCentury( BOOL );
> extern HB_EXPORT HB_FHANDLE hb_setGetExtraHan( void );
> extern HB_EXPORT HB_FHANDLE hb_setGetPrintHan( void );
> extern HB_EXPORT BOOL       hb_setGetAlternate( void );
> Index: source/vm/set.c
> ===================================================================
> --- source/vm/set.c	(revision 9514)
> +++ source/vm/set.c	(working copy)
> @@ -200,7 +200,7 @@
>          if( pFilename->szName )
>          {
>             int iLen = ( int ) strlen( pFilename->szName );
> -            if( ( iLen == 3 &&
> +            if( ( iLen == 3 &&
>                   ( hb_stricmp( pFilename->szName, "PRN" ) == 0 ||
>                     hb_stricmp( pFilename->szName, "CON" ) == 0 ) ) ||
>                 ( iLen == 4 &&
> @@ -301,34 +301,13 @@
>    hb_setSetItem( HB_SET_CANCEL, hb_param( 1, HB_IT_LOGICAL ) );
> }
>
> -HB_FUNC( __SETCENTURY )
> +HB_EXPORT BOOL    hb_setSetCentury( BOOL new_century_setting )
> {
>    PHB_SET_STRUCT pSet = hb_stackSetStruct();
>    BOOL old_century_setting = pSet->hb_set_century;
>
> +   pSet->hb_set_century = new_century_setting;
>    /*
> -    * Change the setting if the parameter is a logical value, or is
> -    * either "ON" or "OFF" (regardless of case)
> -    */
> -   if( ISLOG( 1 ) )
> -      pSet->hb_set_century = hb_parl( 1 );
> -   else if( ISCHAR( 1 ) )
> -   {
> -      char * szString = hb_parc( 1 );
> -      ULONG ulLen = hb_parclen( 1 );
> -
> -      if( ulLen >= 2
> -       && toupper( ( UCHAR ) szString[ 0 ] ) == 'O'
> -       && toupper( ( UCHAR ) szString[ 1 ] ) == 'N' )
> -         pSet->hb_set_century = TRUE;
> -      else if( ulLen >= 3
> -       && toupper( ( UCHAR ) szString[ 0 ] ) == 'O'
> -       && toupper( ( UCHAR ) szString[ 1 ] ) == 'F'
> -       && toupper( ( UCHAR ) szString[ 2 ] ) == 'F' )
> -         pSet->hb_set_century = FALSE;
> -   }
> -
> -   /*
>     * Finally, if the setting changed, adjust the current date  
> format to use
>     * the correct number of year digits.
>     */
> @@ -394,6 +373,36 @@
>    hb_retl( old_century_setting );
> }
>
> +HB_FUNC( __SETCENTURY )
> +{
> +   BOOL new_century_setting;
> +
> +   /*
> +    * Change the setting if the parameter is a logical value, or is
> +    * either "ON" or "OFF" (regardless of case)
> +    */
> +   if( ISLOG( 1 ) )
> +      new_century_setting = hb_parl( 1 );
> +   else if( ISCHAR( 1 ) )
> +   {
> +      char * szString = hb_parc( 1 );
> +      ULONG ulLen = hb_parclen( 1 );
> +
> +      if( ulLen >= 2
> +       && toupper( ( UCHAR ) szString[ 0 ] ) == 'O'
> +       && toupper( ( UCHAR ) szString[ 1 ] ) == 'N' )
> +         new_century_setting = TRUE;
> +      else if( ulLen >= 3
> +       && toupper( ( UCHAR ) szString[ 0 ] ) == 'O'
> +       && toupper( ( UCHAR ) szString[ 1 ] ) == 'F'
> +       && toupper( ( UCHAR ) szString[ 2 ] ) == 'F' )
> +         new_century_setting = FALSE;
> +   }
> +
> +   /* call C level function to set century */
> +   return hb_setSetCentury( new_century_setting );
> +}
> +
> HB_FUNC( SET )
> {
>    PHB_SET_STRUCT pSet = hb_stackSetStruct();
> @@ -958,7 +967,7 @@
>          /* Return NIL if called with invalid SET specifier */
>          break;
>
> -#if 0
> +#if 0
>       /*
>        * intentionally removed default: clause to enable C compiler  
> warning
>        * when not all HB_SET_* cases are implemented. [druzus]
> @@ -1516,7 +1525,7 @@
>          case HB_SET_HBOUTLOGINFO:
>          case HB_SET_INVALID_:
>             break;
> -#if 0
> +#if 0
>          /*
>           * intentionally removed default: clause to enable C  
> compiler warning
>           * when not all HB_SET_* cases are implemented. [druzus]
> @@ -1634,7 +1643,7 @@
>       case HB_SET_HBOUTLOGINFO:
>       case HB_SET_INVALID_:
>          break;
> -#if 0
> +#if 0
>       /*
>        * intentionally removed default: clause to enable C compiler  
> warning
>        * when not all HB_SET_* cases are implemented. [druzus]
> @@ -1733,7 +1742,7 @@
>       case HB_SET_TRIMFILENAME:
>       case HB_SET_INVALID_:
>          break;
> -#if 0
> +#if 0
>       /*
>        * intentionally removed default: clause to enable C compiler  
> warning
>        * when not all HB_SET_* cases are implemented. [druzus]
> @@ -1832,7 +1841,7 @@
>       case HB_SET_HBOUTLOGINFO:
>       case HB_SET_INVALID_:
>          break;
> -#if 0
> +#if 0
>       /*
>        * intentionally removed default: clause to enable C compiler  
> warning
>        * when not all HB_SET_* cases are implemented. [druzus]
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Mon Sep 29 10:19:19 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 29 10:19:50 2008
Subject: [Harbour] hb_setSetCentury() function proposal
In-Reply-To: <48E0DC8C.1000800@fsgiudice.com>
References: <48E0DC8C.1000800@fsgiudice.com>
Message-ID: <20080929141919.GA12598@34-mo7-2.acn.waw.pl>

On Mon, 29 Sep 2008, Francesco Saverio Giudice wrote:

Hi Francesco,

> I would like to add hb_setSetCentury() C level function that I need to 
> modify SET CENTURY at C level.
> So there are two files involved in this change:
> include/hbset.h
> source/vm/set.c
> I have attached a diff patch tu current SVN as proposal.
> If there is no objection I will upload this changes to SVN.

Fine, I'll add it but HB_FUNC( __SETCENTURY ) should not be changed.
In the attached version it always changes the _SET_CENTURY to random
value when if is called without parameters or with wrong parameter.

best regards,
Przemek
From info at fsgiudice.com  Mon Sep 29 10:44:24 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Sep 29 10:44:41 2008
Subject: [Harbour] hb_setSetCentury() function proposal
In-Reply-To: <20080929141919.GA12598@34-mo7-2.acn.waw.pl>
References: <48E0DC8C.1000800@fsgiudice.com>
	<20080929141919.GA12598@34-mo7-2.acn.waw.pl>
Message-ID: <48E0E9C8.5060809@fsgiudice.com>

Hi Przemek,

yes, my fault.
I will fix it in a while.

best regards
Francesco

Przemyslaw Czerpak ha scritto:
> On Mon, 29 Sep 2008, Francesco Saverio Giudice wrote:
> 
> Hi Francesco,
> 
>> I would like to add hb_setSetCentury() C level function that I need to 
>> modify SET CENTURY at C level.
>> So there are two files involved in this change:
>> include/hbset.h
>> source/vm/set.c
>> I have attached a diff patch tu current SVN as proposal.
>> If there is no objection I will upload this changes to SVN.
> 
> Fine, I'll add it but HB_FUNC( __SETCENTURY ) should not be changed.
> In the attached version it always changes the _SET_CENTURY to random
> value when if is called without parameters or with wrong parameter.
> 
> best regards,
> Przemek

From info at fsgiudice.com  Mon Sep 29 11:24:40 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Sep 29 11:24:56 2008
Subject: [Harbour] hb_setSetCentury() function proposal
In-Reply-To: <48E0E9C8.5060809@fsgiudice.com>
References: <48E0DC8C.1000800@fsgiudice.com>	<20080929141919.GA12598@34-mo7-2.acn.waw.pl>
	<48E0E9C8.5060809@fsgiudice.com>
Message-ID: <48E0F338.4040109@fsgiudice.com>

Hi Przemek,

attached the new version and test program I used to check it.
I hope now it is right.

best regards

Francesco

Francesco Saverio Giudice ha scritto:
> Hi Przemek,
> 
> yes, my fault.
> I will fix it in a while.
> 
> best regards
> Francesco
> 

-------------- next part --------------
Index: include/hbset.h
===================================================================
--- include/hbset.h	(revision 9514)
+++ include/hbset.h	(working copy)
@@ -254,6 +254,7 @@
 
 extern HB_EXPORT HB_FHANDLE hb_setGetAltHan( void );
 extern HB_EXPORT BOOL       hb_setGetCentury( void );
+extern HB_EXPORT BOOL       hb_setSetCentury( BOOL );
 extern HB_EXPORT HB_FHANDLE hb_setGetExtraHan( void );
 extern HB_EXPORT HB_FHANDLE hb_setGetPrintHan( void );
 extern HB_EXPORT BOOL       hb_setGetAlternate( void );
Index: source/vm/set.c
===================================================================
--- source/vm/set.c	(revision 9514)
+++ source/vm/set.c	(working copy)
@@ -200,7 +200,7 @@
          if( pFilename->szName )
          {
             int iLen = ( int ) strlen( pFilename->szName );
-            if( ( iLen == 3 && 
+            if( ( iLen == 3 &&
                   ( hb_stricmp( pFilename->szName, "PRN" ) == 0 ||
                     hb_stricmp( pFilename->szName, "CON" ) == 0 ) ) ||
                 ( iLen == 4 &&
@@ -301,34 +301,13 @@
    hb_setSetItem( HB_SET_CANCEL, hb_param( 1, HB_IT_LOGICAL ) );
 }
 
-HB_FUNC( __SETCENTURY )
+HB_EXPORT BOOL    hb_setSetCentury( BOOL new_century_setting )
 {
    PHB_SET_STRUCT pSet = hb_stackSetStruct();
    BOOL old_century_setting = pSet->hb_set_century;
 
+   pSet->hb_set_century = new_century_setting;
    /*
-    * Change the setting if the parameter is a logical value, or is
-    * either "ON" or "OFF" (regardless of case)
-    */
-   if( ISLOG( 1 ) )
-      pSet->hb_set_century = hb_parl( 1 );
-   else if( ISCHAR( 1 ) )
-   {
-      char * szString = hb_parc( 1 );
-      ULONG ulLen = hb_parclen( 1 );
-
-      if( ulLen >= 2
-       && toupper( ( UCHAR ) szString[ 0 ] ) == 'O'
-       && toupper( ( UCHAR ) szString[ 1 ] ) == 'N' )
-         pSet->hb_set_century = TRUE;
-      else if( ulLen >= 3
-       && toupper( ( UCHAR ) szString[ 0 ] ) == 'O'
-       && toupper( ( UCHAR ) szString[ 1 ] ) == 'F'
-       && toupper( ( UCHAR ) szString[ 2 ] ) == 'F' )
-         pSet->hb_set_century = FALSE;
-   }
-
-   /*
     * Finally, if the setting changed, adjust the current date format to use
     * the correct number of year digits.
     */
@@ -391,9 +370,61 @@
    }
 
    /* Return the previous setting */
-   hb_retl( old_century_setting );
+   return ( old_century_setting ) ;
 }
 
+HB_FUNC( __SETCENTURY )
+{
+   BOOL new_century_setting;
+   BOOL set_new_value = FALSE;
+
+   /*
+    * Change the setting if the parameter is a logical value, or is
+    * either "ON" or "OFF" (regardless of case)
+    */
+   if( ISLOG( 1 ) )
+   {
+      new_century_setting = hb_parl( 1 );
+      set_new_value = TRUE;
+   }
+   else if( ISCHAR( 1 ) )
+   {
+      char * szString = hb_parc( 1 );
+      ULONG ulLen = hb_parclen( 1 );
+
+      if( ulLen >= 2
+       && toupper( ( UCHAR ) szString[ 0 ] ) == 'O'
+       && toupper( ( UCHAR ) szString[ 1 ] ) == 'N' )
+      {
+         new_century_setting = TRUE;
+         set_new_value = TRUE;
+      }
+      else if( ulLen >= 3
+       && toupper( ( UCHAR ) szString[ 0 ] ) == 'O'
+       && toupper( ( UCHAR ) szString[ 1 ] ) == 'F'
+       && toupper( ( UCHAR ) szString[ 2 ] ) == 'F' )
+      {
+         new_century_setting = FALSE;
+         set_new_value = TRUE;
+      }
+   }
+
+   /* in case of parameters error or missing */
+   if ( !set_new_value )
+   {
+     /* get current value so I can return it */
+     PHB_SET_STRUCT pSet = hb_stackSetStruct();
+
+     /* do nothing and return current century set */
+     hb_retl( pSet->hb_set_century );
+   }
+   else
+   {
+     /* call C level function to set century */
+     hb_retl( hb_setSetCentury( new_century_setting ) );
+   }
+}
+
 HB_FUNC( SET )
 {
    PHB_SET_STRUCT pSet = hb_stackSetStruct();
@@ -958,7 +989,7 @@
          /* Return NIL if called with invalid SET specifier */
          break;
 
-#if 0 
+#if 0
       /*
        * intentionally removed default: clause to enable C compiler warning
        * when not all HB_SET_* cases are implemented. [druzus]
@@ -1516,7 +1547,7 @@
          case HB_SET_HBOUTLOGINFO:
          case HB_SET_INVALID_:
             break;
-#if 0 
+#if 0
          /*
           * intentionally removed default: clause to enable C compiler warning
           * when not all HB_SET_* cases are implemented. [druzus]
@@ -1634,7 +1665,7 @@
       case HB_SET_HBOUTLOGINFO:
       case HB_SET_INVALID_:
          break;
-#if 0 
+#if 0
       /*
        * intentionally removed default: clause to enable C compiler warning
        * when not all HB_SET_* cases are implemented. [druzus]
@@ -1733,7 +1764,7 @@
       case HB_SET_TRIMFILENAME:
       case HB_SET_INVALID_:
          break;
-#if 0 
+#if 0
       /*
        * intentionally removed default: clause to enable C compiler warning
        * when not all HB_SET_* cases are implemented. [druzus]
@@ -1832,7 +1863,7 @@
       case HB_SET_HBOUTLOGINFO:
       case HB_SET_INVALID_:
          break;
-#if 0 
+#if 0
       /*
        * intentionally removed default: clause to enable C compiler warning
        * when not all HB_SET_* cases are implemented. [druzus]
-------------- next part --------------

PROCEDURE Main()
  LOCAL lCentury

  // Get current Century
  lCentury = __SETCENTURY()

  ? "Get Century = ", __SETCENTURY()
  ? "Set Century .T.  , Old = ", __SETCENTURY( .T. )
  ? "Set Century .F.  , Old = ", __SETCENTURY( .F. )
  ? "Set Century ON   , Old = ", __SETCENTURY( "ON" )
  ? "Set Century OFF  , Old = ", __SETCENTURY( "OFF" )
  ? "Set Century NIL  , Old = ", __SETCENTURY( NIL )
  ? "Set Century 1    , Old = ", __SETCENTURY(  1  )
  ? "Set Century ''   , Old = ", __SETCENTURY( "" )
  ? "Set Century 'ERR', Old = ", __SETCENTURY( "ERR" )
  ? "Get Century = ", __SETCENTURY()

  ?

  TEST_CENTURY()


RETURN

#pragma BEGINDUMP

#include "hbapi.h"
#include "hbset.h"

HB_FUNC( TEST_CENTURY )
{
  BOOL bCentury;

  bCentury = hb_setGetCentury();
  printf( "Century = %i\n\r", bCentury );

  bCentury = hb_setSetCentury( TRUE );
  printf( "Century = %i\n\r", bCentury );

  bCentury = hb_setSetCentury( FALSE );
  printf( "Century = %i\n\r", bCentury );

}

#pragma ENDDUMP
From info at fsgiudice.com  Mon Sep 29 11:28:03 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Sep 29 11:28:18 2008
Subject: [Harbour] hb_setSetCentury() function proposal
In-Reply-To: <48E0F338.4040109@fsgiudice.com>
References: <48E0DC8C.1000800@fsgiudice.com>	<20080929141919.GA12598@34-mo7-2.acn.waw.pl>	<48E0E9C8.5060809@fsgiudice.com>
	<48E0F338.4040109@fsgiudice.com>
Message-ID: <48E0F403.5030304@fsgiudice.com>

Ah, sorry, it is correct, but wrong as logic.
I have mixed C and PRG version. Sorry.
Disregard last mail.
I will send last correct version.

beste regards

Francesco

Francesco Saverio Giudice ha scritto:
> Hi Przemek,
> 
> attached the new version and test program I used to check it.
> I hope now it is right.
> 
> best regards
> 
> Francesco
> 
> Francesco Saverio Giudice ha scritto:
>> Hi Przemek,
>>
>> yes, my fault.
>> I will fix it in a while.
>>
>> best regards
>> Francesco
>>
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
From info at fsgiudice.com  Mon Sep 29 11:30:49 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Sep 29 11:31:04 2008
Subject: [Harbour] hb_setSetCentury() function proposal
In-Reply-To: <48E0F403.5030304@fsgiudice.com>
References: <48E0DC8C.1000800@fsgiudice.com>	<20080929141919.GA12598@34-mo7-2.acn.waw.pl>	<48E0E9C8.5060809@fsgiudice.com>	<48E0F338.4040109@fsgiudice.com>
	<48E0F403.5030304@fsgiudice.com>
Message-ID: <48E0F4A9.3060506@fsgiudice.com>

Uhm, I'm tired.
Version sent is correct.

best regards

Francesco

Francesco Saverio Giudice ha scritto:
> Ah, sorry, it is correct, but wrong as logic.
> I have mixed C and PRG version. Sorry.
> Disregard last mail.
> I will send last correct version.
> 
> beste regards
> 
> Francesco
> 

From druzus at acn.waw.pl  Mon Sep 29 11:32:06 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 29 11:32:32 2008
Subject: [Harbour] hb_setSetCentury() function proposal
In-Reply-To: <48E0F338.4040109@fsgiudice.com>
References: <48E0DC8C.1000800@fsgiudice.com>
	<20080929141919.GA12598@34-mo7-2.acn.waw.pl>
	<48E0E9C8.5060809@fsgiudice.com> <48E0F338.4040109@fsgiudice.com>
Message-ID: <20080929153206.GB12598@34-mo7-2.acn.waw.pl>

On Mon, 29 Sep 2008, Francesco Saverio Giudice wrote:

Hi Francesco,

> attached the new version and test program I used to check it.
> I hope now it is right.

Yes it's OK though it can be made simpler by using some existing
functions, f.e.:

   HB_FUNC( __SETCENTURY )
   {
      BOOL old_century_setting = hb_setGetCentury();
      PHB_ITEM pNewVal = hb_param( 1, HB_IT_ANY );

      if( pNewVal )
         hb_setSetCentury( set_logical( pNewVal, old_century_setting ) );

      hb_retl( old_century_setting );
   }

If you agree I'll commit it with some minor cleanup.

best regards
Przemek
From info at fsgiudice.com  Mon Sep 29 11:38:50 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Sep 29 11:39:06 2008
Subject: [Harbour] hb_setSetCentury() function proposal
In-Reply-To: <20080929153206.GB12598@34-mo7-2.acn.waw.pl>
References: <48E0DC8C.1000800@fsgiudice.com>	<20080929141919.GA12598@34-mo7-2.acn.waw.pl>	<48E0E9C8.5060809@fsgiudice.com>
	<48E0F338.4040109@fsgiudice.com>
	<20080929153206.GB12598@34-mo7-2.acn.waw.pl>
Message-ID: <48E0F68A.7040704@fsgiudice.com>

Hi Przemek,


Przemyslaw Czerpak ha scritto:
> 
> If you agree I'll commit it with some minor cleanup.
> 
Obviously please commit it.

Thank you

best regards

Francesco

From druzus at acn.waw.pl  Mon Sep 29 11:42:08 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 29 11:42:34 2008
Subject: [Harbour] 2008-09-29 17:41 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080929154208.GA24119@34-mo7-2.acn.waw.pl>

2008-09-29 17:41 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbset.h
  * harbour/source/vm/set.c
    + divided __SETCENTURY() PRG function into two functions:
      __SETCENTURY() and public C function hb_setSetCentury()
      to manipulate century setting from C code.
      Modyfication by Francesco Saverio Giudice

best regards
Przemek
From info at fsgiudice.com  Mon Sep 29 11:53:38 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Sep 29 11:53:54 2008
Subject: [Harbour] 2008-09-29 17:41 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080929154208.GA24119@34-mo7-2.acn.waw.pl>
References: <20080929154208.GA24119@34-mo7-2.acn.waw.pl>
Message-ID: <48E0FA02.3020905@fsgiudice.com>

Hi Przemek,

thank you.

best regards

Francesco

Przemyslaw Czerpak ha scritto:
> 2008-09-29 17:41 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/include/hbset.h
>   * harbour/source/vm/set.c
>     + divided __SETCENTURY() PRG function into two functions:
>       __SETCENTURY() and public C function hb_setSetCentury()
>       to manipulate century setting from C code.
>       Modyfication by Francesco Saverio Giudice
> 
> best regards
> Przemek

From druzus at acn.waw.pl  Mon Sep 29 12:00:46 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 29 12:01:11 2008
Subject: [Harbour] Re: hbrun and mt
In-Reply-To: <48DB64EE.5020808@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48DB64EE.5020808@mail.udg.mx>
Message-ID: <20080929160045.GC12598@34-mo7-2.acn.waw.pl>

On Thu, 25 Sep 2008, David Arturo Macias Corona wrote:

Hi David and Maurilio,

> >I think yes, let's wait for David confirmation, anyway HB_OS2_TCP32 is 
> >more meaningfull since it pinpoints what it is changing.
> Yes Iam agree, it look better
> Please add in gcc.cf a comment for -DTCPV40HDRS based on:
> ---------------------------------------
> v3.2.2 Alpha 2:
> ---------------
>     A few bugfixes and a couple of new features.
>
>         o The TCP/IP headers and libraries scheme have been changed.
>           The default is the current OS/2 tcpip toolkit (BSD 4.4 based).
>           To target the older OS/2 tcpip stack (BSD 4.3 based) you must
>           define TCPV40HDRS before including any TCP/IP headers and make
>           sure usr/lib/tcpipv4 is searched before usr/lib (this is to
>           get the right libsocket). It is recommended to use the -D
>           compiler option for the define and either the LIBRARY_PATH or
>           the -L compiler/linker option for the library.
> ---------------------------------------
> As Maurilio explained earlier, setting -DTCPV40HDRS does not complete all 
> the work if tcpipv4 libraries are not forced, as example:
> -------
>   set L_USR=-Le:\usr\lib\tcpipv4
> -------

So maybe it will be better to keep this setting and above information
inside make_gnu_os2.cmd.
For sure for new users it will be easier to locate this file and read
the information or even modify the file then in config/os2/gcc.cf.
What do you think?

best regards,
Przemek
From abe.buch at att.net  Mon Sep 29 12:10:41 2008
From: abe.buch at att.net (Abeb)
Date: Mon Sep 29 12:10:48 2008
Subject: [Harbour] [SPAM]  Re: [SPAM]  RE: how to force Num-Lock on? gtwvt
In-Reply-To: <20080929090622.GA25197@34-mo7-2.acn.waw.pl>
References: <19691006.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815F007@SRV02.deltain.net>
	<19695015.post@talk.nabble.com>
	<20080926210344.GA17760@34-mo7-2.acn.waw.pl>
	<19713171.post@talk.nabble.com>
	<20080929090622.GA25197@34-mo7-2.acn.waw.pl>
Message-ID: <19726842.post@talk.nabble.com>


But anywhere in a big app. as evant function like onkeypress is whats needed.


Przemyslaw Czerpak-2 wrote:
> 
> On Sun, 28 Sep 2008, Abeb wrote:
>> But the chalange is to trap any time the user presses the numlock, and
>> put it
>> back on.
> 
> So this code is still OK.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/how-to-force-Num-Lock-on---gtwvt-tp19691006p19726842.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From maurilio.longo at libero.it  Mon Sep 29 12:11:50 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Mon Sep 29 12:11:59 2008
Subject: [Harbour] Re: hbrun and mt
In-Reply-To: <20080929160045.GC12598@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<48DB64EE.5020808@mail.udg.mx>
	<20080929160045.GC12598@34-mo7-2.acn.waw.pl>
Message-ID: <48E0FE46.5070505@libero.it>

Przemyslaw,

I agree, you're right.

Maurilio.


-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From toninhofwi at yahoo.com.br  Mon Sep 29 12:16:35 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Sep 29 12:12:11 2008
Subject: [Harbour] 2008-09-29 13:11 UTC-0300 Antonio Carlos Pantaglione
Message-ID: <cqv1e4hrjhi1l8emnph5g9v6ns4mrumot6@4ax.com>

2008-09-29 13:11 UTC-0300 Antonio Carlos Pantaglione
<toninho@fwi.com.br>
   * contrib/xhb/common.mak
   * contrib/xhb/makefile
   + contrib/xhb/hbstruct.ch
   + contrib/xhb/hbstruct.prg
     + STRUCTURE / MEMBER / ENDSTRUCTURE support


Regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From abe.buch at att.net  Mon Sep 29 12:12:34 2008
From: abe.buch at att.net (Abeb)
Date: Mon Sep 29 12:12:41 2008
Subject: [Harbour] how to force Num-Lock on?  gtwvt
In-Reply-To: <48DD5952.2060408@fsgiudice.com>
References: <19691006.post@talk.nabble.com> <48DD5952.2060408@fsgiudice.com>
Message-ID: <19726881.post@talk.nabble.com>


This Code works. Thanks

Francesco Saverio Giudice wrote:
> 
> Hi Abeb,
> 
> Abeb ha scritto:
>> How can i catch that num-lock was pressed (or any other key like
>> ctrl,shift,alt) and force num-lock on?
>> 
>> useing gtwvt
>> 
>> thanks
>> abe.
>> 
> 
> try code below I wrote some time ago for xharbour, not tested with 
> current harbour SVN.
> 
> Best Regards
> 
> Francesco
> 
> -------------------------------------------
> 
> #include "common.ch"
> 
> PROCEDURE MAIN()
> 
>     ? "Set capslock ON"
>     SetCapsLock( TRUE )
> 
>     Inkey( 0 )
> 
>     ? "Set numlock ON"
>     SetNumLock( TRUE )
> 
>     Inkey( 0 )
> 
>     ? "CAPSLOCK state is : " + IIF( GetCapsLock(), "ON ", "OFF" )
>     ? "NUMLOCK  state is : " + IIF( GetNumLock(), "ON ", "OFF" )
> 
>     Inkey( 0 )
> 
>     ? "Disable capslock"
>     SetCapsLock( FALSE )
> 
>     Inkey( 0 )
> 
>     ? "Disable numlock"
>     SetNumLock( FALSE )
> 
>     Inkey( 0 )
> 
>     ? "CAPSLOCK state is : " + IIF( GetCapsLock(), "ON ", "OFF" )
>     ? "NUMLOCK  state is: " + IIF( GetNumLock(), "ON ", "OFF" )
> 
>     Inkey( 0 )
> 
> RETURN
> 
> 
> #pragma BEGINDUMP
> 
> #include <windows.h>
> 
> #include "hbapi.h"
> 
> #define TOGGLED 0x0001
> 
> void SetKeyLock( BYTE vKey, BOOL bState )
> {
>     BOOL bCurrentState;
> 
>     bCurrentState = ( GetKeyState( vKey ) & TOGGLED );
> 
>     if( (bState && !bCurrentState) ||
>         (!bState && bCurrentState) )
>     {
>        // Simulate a key press
>        keybd_event( vKey,
>                     0,
>                     KEYEVENTF_EXTENDEDKEY | 0,
>                     0 );
> 
>        // Simulate a key release
>        keybd_event( vKey,
>                     0,
>                     KEYEVENTF_EXTENDEDKEY | KEYEVENTF_KEYUP,
>                     0);
>     }
> }
> 
> BOOL GetKeyLock( int vKey )
> {
>     return ( GetKeyState( vKey ) & TOGGLED );
> }
> 
> HB_FUNC( SETCAPSLOCK )
> {
>     SetKeyLock( VK_CAPITAL, hb_parl( 1 ) );
> }
> 
> HB_FUNC( SETNUMLOCK )
> {
>     SetKeyLock( VK_NUMLOCK, hb_parl( 1 ) );
> }
> 
> HB_FUNC( GETCAPSLOCK )
> {
>     hb_retl( GetKeyLock( VK_CAPITAL ) );
> }
> 
> HB_FUNC( GETNUMLOCK )
> {
>     hb_retl( GetKeyLock( VK_NUMLOCK ) );
> }
> 
> #pragma ENDDUMP
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/how-to-force-Num-Lock-on---gtwvt-tp19691006p19726881.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From abe.buch at att.net  Mon Sep 29 12:20:03 2008
From: abe.buch at att.net (Abeb)
Date: Mon Sep 29 12:20:10 2008
Subject: [Harbour] how to play wav files, useing gtwvt?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F008@SRV02.deltain.net>
References: <19691028.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815F008@SRV02.deltain.net>
Message-ID: <19727020.post@talk.nabble.com>


Thanks a lot.

this led me an example in xharbour called Pegged, it uses PlaySound
function.

Thanks again.


Massimo Belgrano-3 wrote:
> 
> In windows platform you can use mciSendString api
> Afaik this function is present in hwgui mciSendString( cCommand,
> @cResult, hWindow )
> 
> 
> This Recording sound using the API and mciSendString with Visual Basic 6
> http://www.rediware.com/programming/vb/vbrecwav/vbrecordwav.htm
> 
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/how-to-play-wav-files%2C-useing-gtwvt--tp19691028p19727020.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Mon Sep 29 12:50:30 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 29 12:50:57 2008
Subject: [Harbour] 2008-09-29 18:49 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080929165030.GA13169@34-mo7-2.acn.waw.pl>

2008-09-29 18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/os2/gcc.cf
  * harbour/make_gnu_os2.cmd
    * moved -DTCPV40HDRS to make_gnu_os2.cmd and added small description
      about this macro. By default is enabled, can be disabled by
      setting environment variable HB_OS2_TCP32 to 'yes', f.e.
         SET HB_OS2_TCP32=yes
      David and Maurilio, please check me.

best regards
Przemek
From cvc at oohg.org  Mon Sep 29 12:56:05 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Mon Sep 29 12:56:22 2008
Subject: [Harbour] st printer to diferences between harbour and xharbour
Message-ID: <48E108A5.10401@oohg.org>


Hi all:

with the next code using an HP  USB pcl printer I obtain a valid print test

but in harbour I obtain a file named (printer name) plus ".prn"


why is the concept diference ?

wich is correct ?

regards
Ciro

clear
?? 'Print test'
?  '---------------------------------'
? SET(_SET_DEVICE)
aPrinter:=GetPrinters()
IF EMPTY(aPrinter)
    ? '----- No Printers installed'
ELSE
    set printer to (GetDefaultPrinter())
    ? SET(_SET_PRINTER)
    ? SET(_SET_PRINTFILE)
     set console off
     set printer on

      ? 'Default Printer'
      ?'----------------'
       ? GetDefaultPrinter()
       ?
       ? 'Printers Available'
       ?'-------------------'
       FOR x:= 1 TO LEN(aPrinter)
         ? aPrinter[x]
       NEXT x
       aPrinter:= GetPrinters(.T.)
       ? 'Printers and Ports'
       ?'-------------------'
       FOR x:= 1 TO LEN(aPrinter)
         ? aPrinter[x,1]+' on '+aPrinter[x,2]
       NEXT x
       EJECT
       set printer off
       set console on
       set printer to
  ENDIF
  ? SET(_SET_PRINTER)
  ? SET(_SET_DEVICE)
   WAIT


-- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From druzus at acn.waw.pl  Mon Sep 29 13:12:00 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 29 13:12:30 2008
Subject: [SPAM]  Re: [Harbour] [SPAM]  Re: [SPAM]  RE: how to force
	Num-Lock on? gtwvt
In-Reply-To: <19726842.post@talk.nabble.com>
References: <19691006.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815F007@SRV02.deltain.net>
	<19695015.post@talk.nabble.com>
	<20080926210344.GA17760@34-mo7-2.acn.waw.pl>
	<19713171.post@talk.nabble.com>
	<20080929090622.GA25197@34-mo7-2.acn.waw.pl>
	<19726842.post@talk.nabble.com>
Message-ID: <20080929171200.GA25787@34-mo7-2.acn.waw.pl>

On Mon, 29 Sep 2008, Abeb wrote:
> But anywhere in a big app. as evant function like onkeypress is whats needed.

If I understand you correctly then you need sth like special
inkey value returned when some key shift flags are changed so
you can associate some codeblock with it.
It can be usable but such modification should be introduced
with other meta key to report platform/GT specific events in common
for all GTs way.
BTW any code which try to access or modify keyboard shift flags
is not well portable to other platforms.

best regards,
Przemek
From maurilio.longo at libero.it  Mon Sep 29 13:16:54 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Mon Sep 29 13:17:01 2008
Subject: [Harbour] 2008-09-29 18:49 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080929165030.GA13169@34-mo7-2.acn.waw.pl>
References: <20080929165030.GA13169@34-mo7-2.acn.waw.pl>
Message-ID: <48E10D86.6070909@libero.it>

Przemyslaw,

sorry, I did not understand your request. I thought you were going to move the
description of -DTCPV40HDRS to make_gnu_os2.cmd since make_gnu_os2.cmd should
be the "entry point" of those that start building harbour on OS/2

Doing it this way you cannot build harbour with this define without using
make_gnu_os2.cmd (I was building it simply by calling make in harbour's top
level folder).

That said, please, don't waste any more time on this issue! :)

There are two people building harbour, in the whole world, right now: David
and me, and we will change our build environment to adapt it.

Thanks a lot.

Maurilio.

Przemyslaw Czerpak wrote:
> 2008-09-29 18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/config/os2/gcc.cf
>   * harbour/make_gnu_os2.cmd
>     * moved -DTCPV40HDRS to make_gnu_os2.cmd and added small description
>       about this macro. By default is enabled, can be disabled by
>       setting environment variable HB_OS2_TCP32 to 'yes', f.e.
>          SET HB_OS2_TCP32=yes
>       David and Maurilio, please check me.
> 
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From jorge_castellani at yahoo.com  Mon Sep 29 13:33:21 2008
From: jorge_castellani at yahoo.com (Jorge Castellani)
Date: Mon Sep 29 13:33:28 2008
Subject: [Harbour] Duplicated functions
Message-ID: <955496.67183.qm@web53103.mail.re2.yahoo.com>

Hi!Today I tried to compile a console aplication using MiniGUI version 6.2.2 (implements Harbour compiler version 1.01), and I got this error:?c:\hmg\Harbour\lib/libhbct.a(dattime2.o):dattime2.c:(.text+0x2b0): multiple definition of `HB_FUN_DMY'
c:\hmg\Harbour\lib/libhbclipsm.a(date.o):date.c:(.text+0x120): first defined here

The same error appears involving functions ADDMONTH and MDY.
It is possible to fix this error changing a compiler parameter or so, or it must be fixed by you?Thanks in advance!Jorge.


      ____________________________________________________________________________________
?Todo sobre Amor y Sexo!
La gu?a completa para tu vida en Mujer de Hoy.                       
http://mujerdehoy.telemundo.yahoo.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080929/6086446c/attachment-0001.html
From harbour.01 at syenar.hu  Mon Sep 29 14:38:43 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 29 14:38:59 2008
Subject: [Harbour] [SPAM]  RE: how to force Num-Lock on?  gtwvt
In-Reply-To: <19713171.post@talk.nabble.com>
References: <19691006.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815F007@SRV02.deltain.net>
	<19695015.post@talk.nabble.com>
	<20080926210344.GA17760@34-mo7-2.acn.waw.pl>
	<19713171.post@talk.nabble.com>
Message-ID: <2112EF2F-2119-47D5-A656-D5DD6B48D2B4@syenar.hu>

> But the chalange is to trap any time the user presses the numlock,  
> and put it
> back on.

I think this is not the job of a user application,
but certainly not the job of GTWVT.

There are probably ways to hack this behavior on the
OS level.

Brgds,
Viktor

>
>
>
> Przemyslaw Czerpak-2 wrote:
>>
>> On Fri, 26 Sep 2008, Abeb wrote:
>>> The trick is to trap the keypress of numlock ( or other control key)
>>
>> And your received correct answer.
>>
>> Sample code below. It uses two different methods to extract
>> cotnrol key state. But please remember that not all GTs
>> can support such functionality.
>>
>> best regards,
>> Przemek
>>
>>
>> #include "inkey.ch"
>> #include "hbgtinfo.ch"
>> proc main()
>>   local cStatus, iStatus, nKey
>>   clear screen
>>   while ( nKey := inkey( 0.1 ) ) != K_ESC
>>      iStatus := hb_gtInfo( HB_GTI_KBDSHIFTS )
>>      cStatus := ""
>>      cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_SHIFT ) != 0, ;
>>                     "SHIFT ", "      " )
>>      cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_CTRL ) != 0, ;
>>                     "CTRL ", "     " )
>>      cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_ALT ) != 0, ;
>>                     "ALT ", "    " )
>>      cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_SCROLOCK ) !=  
>> 0, ;
>>                     "SCRLOCK ", "        " )
>>      cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_NUMLOCK ) != 0, ;
>>                     "NUMLOCK ", "        " )
>>      cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_CAPSLOCK ) !=  
>> 0, ;
>>                     "CAPSLOCK ", "         " )
>>      cStatus += iif( HB_BITAND( iStatus, HB_GTI_KBD_INSERT ) != 0, ;
>>                     "INSERT ", "       " )
>>      @ 1, 0 say cStatus
>>
>>      cStatus := ""
>>      cStatus += iif( KSETINS(), "INS ", "    " )
>>      cStatus += iif( KSETCAPS(), "CAPS ", "     " )
>>      cStatus += iif( KSETNUM(), "NUM ", "    " )
>>      cStatus += iif( KSETSCROLL(), "SCROLL ", "       " )
>>      @ 2, 0 say cStatus
>>      if nKey==asc("C") .or. nKey==asc("c")
>>         KSETCAPS(!KSETCAPS())
>>      elseif nKey==asc("I") .or. nKey==asc("i")
>>         KSETINS(!KSETINS())
>>      elseif nKey==asc("N") .or. nKey==asc("n")
>>         KSETNUM(!KSETNUM())
>>      elseif nKey==asc("S") .or. nKey==asc("s")
>>         KSETSCROLL(!KSETSCROLL())
>>      endif
>>   enddo
>> return
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/how-to-force-Num-Lock-on---gtwvt-tp19691006p19713171.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Sep 29 14:44:02 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 29 14:44:24 2008
Subject: [Harbour] Duplicated functions
In-Reply-To: <955496.67183.qm@web53103.mail.re2.yahoo.com>
References: <955496.67183.qm@web53103.mail.re2.yahoo.com>
Message-ID: <F6F1A069-F664-48BE-9CC1-8E5D471D4B3A@syenar.hu>

Hi Jorge,

You're trying to link two contrib libs which have
common function names. Common function names across
libs is normal in certain case, like for example in
this one.

As a solution, try deleting one of the libs from
the lib list of your link command. You'll probably
want to delete hbclipsm.

Brgds,
Viktor

On 2008.09.29., at 19:33, Jorge Castellani wrote:

> Hi!
>
>
> Today I tried to compile a console aplication using MiniGUI version  
> 6.2.2 (implements Harbour compiler version 1.01), and I got this  
> error:
>
>
> c:\hmg\Harbour\lib/libhbct.a(dattime2.o):dattime2.c:(.text+0x2b0):  
> multiple definition of `HB_FUN_DMY'
> c:\hmg\Harbour\lib/libhbclipsm.a(date.o):date.c:(.text+0x120): first  
> defined here
>
> The same error appears involving functions ADDMONTH and MDY.
>
> It is possible to fix this error changing a compiler parameter or  
> so, or it must be fixed by you?
>
>
> Thanks in advance!
>
> Jorge.
>
>
>
>
> ?Todo sobre Amor y Sexo!
> La gu?a completa para tu vida en Mujer de Hoy:
> http://mujerdehoy.telemundo.yahoo.com/_______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Mon Sep 29 16:56:14 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 29 16:56:39 2008
Subject: [Harbour] 2008-09-29 22:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080929205614.GA25081@34-mo7-2.acn.waw.pl>

2008-09-29 22:55 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/hvm.c
    ! restored some item type settings I wrongly removed few days ago

best regards
Przemek
From harbour.01 at syenar.hu  Mon Sep 29 17:17:04 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 29 17:17:13 2008
Subject: [Harbour] 2008-09-29 23:13 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92278$Blat.v2.6.2$b8847515$19b8eecc65d2@127.0.0.1>

2008-09-29 23:13 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
  * contrib/mtpl_b32.mak
  * bin/bld.bat
    % Added BCC optimization switches
      (the ones used for the Harbour release versions).

  * bin/bld.bat
  * bin/bld_os2.cmd
    + Added -O3 to GCC compilation.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Mon Sep 29 17:24:28 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 29 17:24:53 2008
Subject: [SPAM]  [Harbour] Class TThread - Xbase++ Implementation
In-Reply-To: <19706251.post@talk.nabble.com>
References: <19706251.post@talk.nabble.com>
Message-ID: <20080929212428.GA28103@34-mo7-2.acn.waw.pl>

On Sat, 27 Sep 2008, Pritpal Bedi wrote:

Hi Pritpal,

> Below is the class skelton with documentation of Xbase++ thread
> implementation
> via Thread class. It also contains two examples, 2nd one is really
> interesting one
> though I do not know how it behaves.
> This skelton compiles fine in Harbour. Just review it and if possible fill
> in the blanks.
> It may qualify for tthreadx.prg when finished.

Thank you very much, Not everything can be implemented at .prg level
but I'll add some C functions which should allow it.

best regards,
Przemek
From toninhofwi at yahoo.com.br  Mon Sep 29 18:13:06 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Sep 29 18:06:02 2008
Subject: [Harbour] 2008-09-29 23:13 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c92278$Blat.v2.6.2$b8847515$19b8eecc65d2@127.0.0.1>
References: <01c92278$Blat.v2.6.2$b8847515$19b8eecc65d2@127.0.0.1>
Message-ID: <f5k2e4p95fgc8p5adtos40g454kb7v991m@4ax.com>

>  * bin/bld.bat
>    % Added BCC optimization switches
>      (the ones used for the Harbour release versions).
Viktor, thanks for it.

In my bcc32.cfg I use these options that you added and other two:

-5 Generate Pentium instructions
-6 Generate Pentium Pro instructions

---cut---
The Instruction Set options specify for which CPU instruction set the
compiler should generate code.

80386 (Command-line switch: -3)
Choose the 80386 option if you want the compiler to generate 80386
protected-mode compatible instructions running on Windows 95 or
Windows NT.

i486 (Command-line switch: -4)
Choose the i486 option if you want the compiler to generate i486
protected-mode compatible instructions running on Windows 95 or
Windows NT.

Pentium (Command-line switch: -5)
Choose the Pentium option if you want the compiler to generate Pentium
instructions on Windows 95 or Windows NT.
While this option increases the speed at which the application runs on
Pentium machines, expect the program to be a bit larger than when
compiled with the 80386 or i486 options. In addition, Pentium-compiled
code will sustain a performance hit on non-Pentium systems.

Pentium Pro (Command-line switch: -6)
Choose the Pentium Pro option if you want the compiler to generate
Pentium Pro instructions running on Windows 95 or Windows NT.

Default = 80386  (-3)
---cut---


Regards,

Toninho.

__________________________________________________
Faça ligações para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From harbour.01 at syenar.hu  Mon Sep 29 18:15:23 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 29 18:15:33 2008
Subject: [Harbour] 2008-09-29 23:13 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <f5k2e4p95fgc8p5adtos40g454kb7v991m@4ax.com>
References: <01c92278$Blat.v2.6.2$b8847515$19b8eecc65d2@127.0.0.1>
	<f5k2e4p95fgc8p5adtos40g454kb7v991m@4ax.com>
Message-ID: <F081FF7D-10DA-4DF7-AC14-C784602EBA67@syenar.hu>

>
Hi Toninho,

> In my bcc32.cfg I use these options that you added and other two:
>
> -5 Generate Pentium instructions
> -6 Generate Pentium Pro instructions

I'm using -6 locally (actually just thinking of dropping it),
but I intentionally didn't add it to the default switches,
as I believe we shouldn't optimize in ways which may prevent
some (old) computers to run Harbour or resulting executables.

We don't use any CPU specific optimization switches for GCC,
MSVC either.

For those who know their end-user environment well enough to
optimize for these, they can be added to C_USR.

Brgds,
Viktor

From alex_degarate at hotmail.com  Mon Sep 29 18:36:33 2008
From: alex_degarate at hotmail.com (Alejandro de Garate)
Date: Mon Sep 29 18:36:38 2008
Subject: [Harbour] HBDOC & documentation
Message-ID: <BLU149-W19710A528A1D6F9437D58985400@phx.gbl>


Viktor, all
 
I am unable to syncronize with SVN
 
I did several changes to hbdoc.prg and genhtm.prg and will do many more. Can you hold down from doing changes ?
 
Viktor, If you agree I will send it to you the files changed and
all the htm files from .\doc and .\doc\en in a few days to upload
to SVN
 
regards
Alejandro
_________________________________________________________________
Invite your mail contacts to join your friends list with Windows Live Spaces. It's easy!
http://spaces.live.com/spacesapi.aspx?wx_action=create&wx_url=/friends.aspx&mkt=en-us
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080929/6217294d/attachment.html
From harbour.01 at syenar.hu  Mon Sep 29 19:01:37 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 29 19:01:45 2008
Subject: [Harbour] HBDOC & documentation
In-Reply-To: <BLU149-W19710A528A1D6F9437D58985400@phx.gbl>
References: <BLU149-W19710A528A1D6F9437D58985400@phx.gbl>
Message-ID: <4EFF588D-3CAE-4F80-985A-A0D38C68ADA2@syenar.hu>

Hi Alejandro,

On 2008.09.30., at 0:36, Alejandro de Garate wrote:

> I am unable to syncronize with SVN

Any specifics? SVN read and write works smoothly lately.

> I did several changes to hbdoc.prg and genhtm.prg and will do many  
> more. Can you hold down from doing changes ?

Of course, no problem and nothing pending on my side.

> Viktor, If you agree I will send it to you the files changed and
> all the htm files from .\doc and .\doc\en in a few days to upload
> to SVN

If you can get around the technical problems,
IMO it would be better if you could commit these
directly. Also, I trust you, you can do it
perfectly right.

Brgds,
Viktor

From bedipritpal at hotmail.com  Mon Sep 29 19:51:05 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Sep 29 19:51:14 2008
Subject: [Harbour] Error: Unresolved external '_hb_stack' referenced from
	C:\HARBOUR\LIB\XHB.LIB|cstructc
Message-ID: <19733908.post@talk.nabble.com>


Hello

I am receiving this error when linking in MT mode:

[1]:iLink32.Exe -Gn -aa -Tpe -m @Ar32.bcl
Turbo Incremental Link 5.69 Copyright (c) 1997-2005 Borland
Error: Unresolved external '_hb_stack' referenced from
C:\HARBOUR\LIB\XHB.LIB|cstructc

BCC58

SET HB_BUILD_ST=
SET C_USR=-DHB_FM_STATISTICS_OFF -DHB_FM_DL_ALLOC -D__MT__ -DHB_VM_MT
-DHB_NO_PROFILER
SET L_USR=cw32mt.lib

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Error%3A-Unresolved-external-%27_hb_stack%27-referenced-from-C%3A%5CHARBOUR%5CLIB%5CXHB.LIB%7Ccstructc-tp19733908p19733908.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Mon Sep 29 20:02:13 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 29 20:02:31 2008
Subject: [Harbour] Error: Unresolved external '_hb_stack' referenced from
	C:\HARBOUR\LIB\XHB.LIB|cstructc
In-Reply-To: <19733908.post@talk.nabble.com>
References: <19733908.post@talk.nabble.com>
Message-ID: <9338D885-1E3E-4949-BC63-B2B8725B8474@syenar.hu>

Hi Pritpal,

This looks like a mismatch between core and contrib
build-time MT switches.

-DHB_FM_DL_ALLOC is now unnecessary, and I believe -D__MT__
is also not needed, maybe even dangerous.
-DHB_VM_MT should be -DHB_MT_VM. (this may be the real problem)

[ BTW, I think HB_VM_MT would be the better name.
Przemek, shouldn't we change it? "VM" is the subsystem
name, "MT" is the feature name. ]

Brgds,
Viktor

On 2008.09.30., at 1:51, Pritpal Bedi wrote:

>
> Hello
>
> I am receiving this error when linking in MT mode:
>
> [1]:iLink32.Exe -Gn -aa -Tpe -m @Ar32.bcl
> Turbo Incremental Link 5.69 Copyright (c) 1997-2005 Borland
> Error: Unresolved external '_hb_stack' referenced from
> C:\HARBOUR\LIB\XHB.LIB|cstructc
>
> BCC58
>
> SET HB_BUILD_ST=
> SET C_USR=-DHB_FM_STATISTICS_OFF -DHB_FM_DL_ALLOC -D__MT__ -DHB_VM_MT
> -DHB_NO_PROFILER
> SET L_USR=cw32mt.lib
>
> Regards
> Pritpal Bedi
> -- 
> View this message in context: http://www.nabble.com/Error%3A-Unresolved-external-%27_hb_stack%27-referenced-from-C%3A%5CHARBOUR%5CLIB%5CXHB.LIB%7Ccstructc-tp19733908p19733908.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Sep 29 20:08:13 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 29 20:08:20 2008
Subject: [Harbour] 2008-09-30 02:07 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92290$Blat.v2.6.2$a158a8a3$190875411110@127.0.0.1>

2008-09-30 02:07 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_vc.mak
  * config/w32/msvc.cf
  * config/w32/msvcce.cf
    ! Removed -fp:fast optimization switch from WinCE builds.
    ! -W4 warning level enabled for MSVC in GNU-make too.
--
Brgds,
Viktor

From bedipritpal at hotmail.com  Mon Sep 29 20:21:48 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Sep 29 20:21:55 2008
Subject: [Harbour] Error: Unresolved external '_hb_stack' referenced
	from C:\HARBOUR\LIB\XHB.LIB|cstructc
In-Reply-To: <9338D885-1E3E-4949-BC63-B2B8725B8474@syenar.hu>
References: <19733908.post@talk.nabble.com>
	<9338D885-1E3E-4949-BC63-B2B8725B8474@syenar.hu>
Message-ID: <19734200.post@talk.nabble.com>


Viktor


Szak?ts Viktor wrote:
> 
> This looks like a mismatch between core and contrib
> build-time MT switches.
> 
> -DHB_FM_DL_ALLOC is now unnecessary, and I believe -D__MT__
> is also not needed, maybe even dangerous.
> -DHB_VM_MT should be -DHB_MT_VM. (this may be the real problem)
> 

Now I get

BCC58
C_USR=-DHB_FM_STATISTICS_OFF -DHB_NO_PROFILER -DHB_MT_VM

[1]:iLink32.Exe -Gn -aa -Tpe -s @CacheMGR.bcl
Turbo Incremental Link 5.69 Copyright (c) 1997-2005 Borland
Error: Unresolved external '_hb_stack_key' referenced from
C:\HARBOUR\LIB\XHB.LIB|cstructc

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Error%3A-Unresolved-external-%27_hb_stack%27-referenced-from-C%3A%5CHARBOUR%5CLIB%5CXHB.LIB%7Ccstructc-tp19733908p19734200.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Mon Sep 29 20:29:47 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Sep 29 20:29:53 2008
Subject: [Harbour] Error: Unresolved external '_hb_stack' referenced
	from C:\HARBOUR\LIB\XHB.LIB|cstructc
In-Reply-To: <19734200.post@talk.nabble.com>
References: <19733908.post@talk.nabble.com>
	<9338D885-1E3E-4949-BC63-B2B8725B8474@syenar.hu>
	<19734200.post@talk.nabble.com>
Message-ID: <19734262.post@talk.nabble.com>


Viktor,

Please ignore. HB_MT_VM has done the trick.

Thanks


Pritpal Bedi wrote:
> 
> Viktor
> 
> 
> Szak?ts Viktor wrote:
>> 
>> This looks like a mismatch between core and contrib
>> build-time MT switches.
>> 
>> -DHB_FM_DL_ALLOC is now unnecessary, and I believe -D__MT__
>> is also not needed, maybe even dangerous.
>> -DHB_VM_MT should be -DHB_MT_VM. (this may be the real problem)
>> 
> 
> Now I get
> 
> BCC58
> C_USR=-DHB_FM_STATISTICS_OFF -DHB_NO_PROFILER -DHB_MT_VM
> 
> [1]:iLink32.Exe -Gn -aa -Tpe -s @CacheMGR.bcl
> Turbo Incremental Link 5.69 Copyright (c) 1997-2005 Borland
> Error: Unresolved external '_hb_stack_key' referenced from
> C:\HARBOUR\LIB\XHB.LIB|cstructc
> 
> Regards
> Pritpal Bedi
> 
> 

-- 
View this message in context: http://www.nabble.com/Error%3A-Unresolved-external-%27_hb_stack%27-referenced-from-C%3A%5CHARBOUR%5CLIB%5CXHB.LIB%7Ccstructc-tp19733908p19734262.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Mon Sep 29 20:32:53 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 29 20:33:03 2008
Subject: [Harbour] Error: Unresolved external '_hb_stack' referenced from
	C:\HARBOUR\LIB\XHB.LIB|cstructc
In-Reply-To: <19734200.post@talk.nabble.com>
References: <19733908.post@talk.nabble.com>
	<9338D885-1E3E-4949-BC63-B2B8725B8474@syenar.hu>
	<19734200.post@talk.nabble.com>
Message-ID: <6C3B67E6-7718-4190-8B00-3A10BDBB5559@syenar.hu>

>
Hi Pritpal,

> Szak?ts Viktor wrote:
>>
>> This looks like a mismatch between core and contrib
>> build-time MT switches.
>>
>> -DHB_FM_DL_ALLOC is now unnecessary, and I believe -D__MT__
>> is also not needed, maybe even dangerous.
>> -DHB_VM_MT should be -DHB_MT_VM. (this may be the real problem)
>>
>
> Now I get
>
> BCC58
> C_USR=-DHB_FM_STATISTICS_OFF -DHB_NO_PROFILER -DHB_MT_VM
>
> [1]:iLink32.Exe -Gn -aa -Tpe -s @CacheMGR.bcl
> Turbo Incremental Link 5.69 Copyright (c) 1997-2005 Borland
> Error: Unresolved external '_hb_stack_key' referenced from
> C:\HARBOUR\LIB\XHB.LIB|cstructc

[ First I thought this is the newly added .prg file, but
no, this is an old existing .c file. ]

I just can guess: cstructc.c is using some internals,
which needs to be compiled with the exact same MT switches
as the HVM, and in your case they either don't match, or
MT switches are not effective on this contrib source code,
or even more probably this piece of code needs to be updated
for MT, because they are digging into HVM internals too
deeply. [ my bet is the latter. ]

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep 29 20:33:21 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Sep 29 20:33:25 2008
Subject: [Harbour] Error: Unresolved external '_hb_stack' referenced from
	C:\HARBOUR\LIB\XHB.LIB|cstructc
In-Reply-To: <19734262.post@talk.nabble.com>
References: <19733908.post@talk.nabble.com>
	<9338D885-1E3E-4949-BC63-B2B8725B8474@syenar.hu>
	<19734200.post@talk.nabble.com> <19734262.post@talk.nabble.com>
Message-ID: <30A41579-BB54-4175-87CB-F6030950F8BA@syenar.hu>

Too late, but fine if it works :)

Brgds,
Viktor

On 2008.09.30., at 2:29, Pritpal Bedi wrote:

>
> Viktor,
>
> Please ignore. HB_MT_VM has done the trick.
>
> Thanks
>
>
> Pritpal Bedi wrote:
>>
>> Viktor
>>
>>
>> Szak?ts Viktor wrote:
>>>
>>> This looks like a mismatch between core and contrib
>>> build-time MT switches.
>>>
>>> -DHB_FM_DL_ALLOC is now unnecessary, and I believe -D__MT__
>>> is also not needed, maybe even dangerous.
>>> -DHB_VM_MT should be -DHB_MT_VM. (this may be the real problem)
>>>
>>
>> Now I get
>>
>> BCC58
>> C_USR=-DHB_FM_STATISTICS_OFF -DHB_NO_PROFILER -DHB_MT_VM
>>
>> [1]:iLink32.Exe -Gn -aa -Tpe -s @CacheMGR.bcl
>> Turbo Incremental Link 5.69 Copyright (c) 1997-2005 Borland
>> Error: Unresolved external '_hb_stack_key' referenced from
>> C:\HARBOUR\LIB\XHB.LIB|cstructc
>>
>> Regards
>> Pritpal Bedi
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/Error%3A-Unresolved-external-%27_hb_stack%27-referenced-from-C%3A%5CHARBOUR%5CLIB%5CXHB.LIB%7Ccstructc-tp19733908p19734262.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From ssbbs at yahoo.com.tw  Mon Sep 29 20:45:03 2008
From: ssbbs at yahoo.com.tw (WenSheng)
Date: Mon Sep 29 20:45:21 2008
Subject: [Harbour] about hash() of xHarbour
In-Reply-To: <48E0DC8C.1000800@fsgiudice.com>
References: <48E0DC8C.1000800@fsgiudice.com>
Message-ID: <20080930084405.2F2F.84A669A0@mail.zzz.com.tw>


Hi!!

I'm user of xHarbour,
I hope can trans to harbour,
but use many hash(),
somebody can help me how to use is at harbour ?


From teo at windtelsoft.com  Mon Sep 29 20:51:44 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Mon Sep 29 21:20:47 2008
Subject: [Harbour] about hash() of xHarbour
In-Reply-To: <20080930084405.2F2F.84A669A0@mail.zzz.com.tw>
References: <48E0DC8C.1000800@fsgiudice.com>
	<20080930084405.2F2F.84A669A0@mail.zzz.com.tw>
Message-ID: <200809291951.44561.teo@windtelsoft.com>

On Monday 29 September 2008 07:45:03 pm WenSheng wrote:
> Hi!!
>
> I'm user of xHarbour,
> I hope can trans to harbour,
> but use many hash(),
> somebody can help me how to use is at harbour ?

Sure WenSheng,

You may try first to include the file "hbcompat.ch" (under 
the "harbour/contrib/xhb" dir) in your sources in order to deal with the 
differ naming of hash functions, here is an extract regarding that:

   /* Hash item functions */
   #xtranslate HASH([<x,...>])         => hb_HASH(<x>)
   #xtranslate HHASKEY([<x,...>])      => hb_HHASKEY(<x>)
   #xtranslate HGETPOS([<x,...>])      => hb_HPOS(<x>)   
   #xtranslate HGET([<x,...>])         => hb_HGET(<x>)   
   #xtranslate HSET([<x,...>])         => hb_HSET(<x>)   
   #xtranslate HDEL([<x,...>])         => hb_HDEL(<x>)   
   #xtranslate HGETKEYAT([<x,...>])    => hb_HKEYAT(<x>) 
   #xtranslate HGETVALUEAT([<x,...>])  => hb_HVALUEAT(<x>)
   #xtranslate HSETVALUEAT([<x,...>])  => hb_HVALUEAT(<x>)
   #xtranslate HGETPAIRAT([<x,...>])   => hb_HPAIRAT(<x>) 
   #xtranslate HDELAT([<x,...>])       => hb_HDELAT(<x>)  
   #xtranslate HGETKEYS([<x,...>])     => hb_HKEYS(<x>)   
   #xtranslate HGETVALUES([<x,...>])   => hb_HVALUES(<x>) 
   #xtranslate HFILL([<x,...>])        => hb_HFILL(<x>)   
   #xtranslate HCLONE([<x,...>])       => hb_HCLONE(<x>)  
   #xtranslate HCOPY([<x,...>])        => hb_HCOPY(<x>)   
   #xtranslate HMERGE([<x,...>])       => hb_HMERGE(<x>)  
   #xtranslate HEVAL([<x,...>])        => hb_HEVAL(<x>)   
   #xtranslate HSCAN([<x,...>])        => hb_HSCAN(<x>)   
   #xtranslate HSETCASEMATCH([<x,...>])=> hb_HSETCASEMATCH(<x>)
   #xtranslate HGETCASEMATCH([<x,...>])=> hb_HCASEMATCH(<x>)   
   #xtranslate HSETAUTOADD([<x,...>])  => hb_HSETAUTOADD(<x>)  
   #xtranslate HGETAUTOADD([<x,...>])  => hb_HAUTOADD(<x>)     
   #xtranslate HALLOCATE([<x,...>])    => hb_HALLOCATE(<x>)    
   #xtranslate HDEFAULT([<x,...>])     => hb_HDEFAULT(<x>)     



best regards

Teo
From bedipritpal at hotmail.com  Mon Sep 29 23:59:03 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Sep 29 23:59:09 2008
Subject: [Harbour] MT Compilation of PRG/C Application Sources
Message-ID: <19735802.post@talk.nabble.com>


Hello

Do we need to compile PRG/C application sources/third party libraries
with exactly same switches with which Harbour is compiled?

OR

-DHB_MT_VM is enough?

OR 

No need of any specific switches?

IMO it is better if application code does not require any switches.
Otherwise switching to ST and MT will require everything recompiled.
I know this is difficult, but just an ...

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/MT-Compilation-of-PRG-C-Application-Sources-tp19735802p19735802.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Tue Sep 30 02:57:48 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 30 02:57:59 2008
Subject: [Harbour] MT Compilation of PRG/C Application Sources
In-Reply-To: <19735802.post@talk.nabble.com>
References: <19735802.post@talk.nabble.com>
Message-ID: <D28E7875-547B-45B2-8071-E86A5A73FF31@syenar.hu>

>
Hi Pritpal,

> Do we need to compile PRG/C application sources/third party libraries
> with exactly same switches with which Harbour is compiled?
>
> OR
>
> -DHB_MT_VM is enough?

It's only needed for some special cases dealing with
HVM internals, like that file in xhb. For normal .prg
files, it's never needed. For regular C interface code
it should be never needed, but the .c (and also .prg)
code should ideally be written to support MT mode too.

It'd far from ideal to have two versions of xhb.lib,
so if there is any chance to fix this, we should
try to do it.

Brgds,
Viktor

From mbelgrano at deltain.it  Tue Sep 30 04:57:19 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep 30 04:57:45 2008
Subject: [Harbour] HBDOC & documentation
In-Reply-To: <BLU149-W19710A528A1D6F9437D58985400@phx.gbl>
References: <BLU149-W19710A528A1D6F9437D58985400@phx.gbl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F00F@SRV02.deltain.net>

After your modification will be possible also convert to unique file
llike chm,pdf?

This format are good also for search 

 

From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Alejandro de
Garate
Sent: Tuesday, September 30, 2008 12:37 AM
To: harbour@harbour-project.org
Subject: [Harbour] HBDOC & documentation

 

Viktor, all
 
I am unable to syncronize with SVN
 
I did several changes to hbdoc.prg and genhtm.prg and will do many more.
Can you hold down from doing changes ?
 
Viktor, If you agree I will send it to you the files changed and
all the htm files from .\doc and .\doc\en in a few days to upload
to SVN
 
regards
Alejandro

________________________________

Invite your mail contacts to join your friends list with Windows Live
Spaces. It's easy! Try it!
<http://spaces.live.com/spacesapi.aspx?wx_action=create&wx_url=/friends.
aspx&mkt=en-us> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080930/8dbd099c/attachment-0001.html
From druzus at acn.waw.pl  Tue Sep 30 05:28:25 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 30 05:28:49 2008
Subject: [SPAM]  [Harbour] Error: Unresolved external '_hb_stack'
	referenced from C:\HARBOUR\LIB\XHB.LIB|cstructc
In-Reply-To: <19733908.post@talk.nabble.com>
References: <19733908.post@talk.nabble.com>
Message-ID: <20080930092825.GA23324@34-mo7-2.acn.waw.pl>

On Mon, 29 Sep 2008, Pritpal Bedi wrote:

Hi Pritpal,

> I am receiving this error when linking in MT mode:
> [1]:iLink32.Exe -Gn -aa -Tpe -m @Ar32.bcl
> Turbo Incremental Link 5.69 Copyright (c) 1997-2005 Borland
> Error: Unresolved external '_hb_stack' referenced from
> C:\HARBOUR\LIB\XHB.LIB|cstructc

This code uses stack macros so it's strictly depend on HVM
compilation switches. It doesn't matter it's MT or ST code.
You will have the same problem if you compile HVM without
stack macros and XHB library with stack stack macros.
I'll add workaround for it in a while.

> SET HB_BUILD_ST=
> SET C_USR=-DHB_FM_STATISTICS_OFF -DHB_FM_DL_ALLOC -D__MT__ -DHB_VM_MT
> -DHB_NO_PROFILER
> SET L_USR=cw32mt.lib

PleaSE remove all of them and left _ONLY_:

   SET C_USR=-DHB_FM_STATISTICS_OFF

This is the only one setting which effectively works.
All others can only break sth or are ignored due to
typos.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep 30 05:34:36 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 30 05:35:01 2008
Subject: [SPAM]  [Harbour] MT Compilation of PRG/C Application Sources
In-Reply-To: <19735802.post@talk.nabble.com>
References: <19735802.post@talk.nabble.com>
Message-ID: <20080930093436.GB23324@34-mo7-2.acn.waw.pl>

On Mon, 29 Sep 2008, Pritpal Bedi wrote:

Hi Pritpal,

> Do we need to compile PRG/C application sources/third party libraries
> with exactly same switches with which Harbour is compiled?

No we do not need anything like that untill you will notr
force sth by setting some build macros ;-)
For MT programs you only have to link hbvmmt instead of hbvm and
in some compilers MT version of C rtl, f.e. cw32mt.lib in BCC.

> -DHB_MT_VM is enough?

It's not necessary. Please do not use it.

> No need of any specific switches?

Yes.

There is a problem with some code which come from xHarbour
in XHB library which directly access some HVM interrnals and
need to be compiled with the same switches as HVM (it doesn't
matter it's MT or ST mode, the problem can be exploited also
by ST only applications). I'll commit fix in a minute.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep 30 05:37:46 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 30 05:38:10 2008
Subject: [Harbour] 2008-09-30 11:37 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080930093746.GA27030@34-mo7-2.acn.waw.pl>

2008-09-30 11:37 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/Makefile
  + harbour/include/hbvmint.h
    + added new header file which works like hbvmopt.h but does not enable
      stack macros

  * harbour/contrib/xhb/xhbenum.c
  * harbour/contrib/xhb/xhbqself.c
  * harbour/contrib/xhb/xhbwith.c
  * harbour/contrib/xhb/cstructc.c
  * harbour/contrib/hbwin/win_ole.c
    ! use hbvmint.h instead of hbvmopt.h to eliminate direct bindings to
      HVM stack structure

best regards
Przemek
From harbour.01 at syenar.hu  Tue Sep 30 06:38:47 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 30 06:38:59 2008
Subject: [SPAM] [Harbour] Error: Unresolved external '_hb_stack'
	referenced from C:\HARBOUR\LIB\XHB.LIB|cstructc
In-Reply-To: <20080930092825.GA23324@34-mo7-2.acn.waw.pl>
References: <19733908.post@talk.nabble.com>
	<20080930092825.GA23324@34-mo7-2.acn.waw.pl>
Message-ID: <4098075E-CBDE-47B0-ADB3-858139B7F2D2@syenar.hu>

>>
Hi Przemek,

>> PleaSE remove all of them and left _ONLY_:
>
>   SET C_USR=-DHB_FM_STATISTICS_OFF

Is it possible to somehow control FM STATISTICS
to be off by default when HB_VER_STATUS is empty
(release versions), and on by default when it's
not empty (dev, alpha, beta, rc, etc)?

This would make one less thing to take care of
for releases.

Brgds,
Viktor

From dmacias at mail.udg.mx  Tue Sep 30 07:15:29 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Sep 30 07:15:35 2008
Subject: [Harbour] Re: 2008-09-29 18:49 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48E20A51.9070905@mail.udg.mx>

Przemek:

 > 2008-09-29 18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
 >   * harbour/config/os2/gcc.cf
 >   * harbour/make_gnu_os2.cmd
 >     * moved -DTCPV40HDRS to make_gnu_os2.cmd and added small escription
 >       about this macro. By default is enabled, can be disabled by
 >       setting environment variable HB_OS2_TCP32 to 'yes', f.e.
 >          SET HB_OS2_TCP32=yes
 >       David and Maurilio, please check me.

I am agree with changes
Now all settings/info are contained in just one file while before it was 
in two files

[Maurilio]
 >There are two people building harbour, in the whole world, right now: 
 >David and me, and we will change our build environment to adapt it.

Maurilio:

Remember, the important here is not the quantity but the quality of 
these two people   :-)

David Macias

From rodrmigu at gmail.com  Tue Sep 30 08:24:36 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Tue Sep 30 08:24:43 2008
Subject: [Harbour] Some issues related to the SET_DATEFORMAT'
Message-ID: <80b05d460809300524l4410f14bv6707388f533446a@mail.gmail.com>

Hi all,

An user from xhgtk group reported error when compiled with msvc2008. Is the
error below related to the recent changes? If so, would you please kindly
provide the new approach to be used in order to fix the errors below?

Ic:\harbour\include -Iinclude -Foobj/gtkliststore.obj
source/gtk/gtkliststore.c gtkliststore.c
source/gtk/gtkliststore.c(140) : error C2065: 'hb_set' : undeclared
identifier
source/gtk/gtkliststore.c(140) : error C2228: left of '.HB_SET_DATEFORMAT'
must have class/struct/union type is ''unknown-type''
source/gtk/gtkliststore.c(225) : error C2065: 'hb_set' : undeclared
identifier
source/gtk/gtkliststore.c(225) : error C2228: left of '.HB_SET_DATEFORMAT'
must have class/struct/union type is ''unknown-type''

Here are the piece of the code:

      case HB_IT_DATE:
         hb_dateFormat( hb_pardsbuff( szDate, i+1 ), szFormatted,
hb_set.HB_SET_DATEFORMAT );
         gtk_list_store_set(list_store, iter, hb_parni(i), szFormatted, -1);
         break;

    case HB_IT_DATE:
       hb_dateFormat( hb_pardsbuff( szDate, 4 ), szFormatted,
hb_set.HB_SET_DATEFORMAT );


Thanks in advance
Rodrigo Moreno
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080930/7c00b483/attachment.html
From druzus at acn.waw.pl  Tue Sep 30 09:03:02 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 30 09:03:32 2008
Subject: [Harbour] Some issues related to the SET_DATEFORMAT'
In-Reply-To: <80b05d460809300524l4410f14bv6707388f533446a@mail.gmail.com>
References: <80b05d460809300524l4410f14bv6707388f533446a@mail.gmail.com>
Message-ID: <20080930130302.GA14224@34-mo7-2.acn.waw.pl>

On Tue, 30 Sep 2008, Rodrigo Miguel wrote:

Hi Rodrigo,

> An user from xhgtk group reported error when compiled with msvc2008. Is the
> error below related to the recent changes? If so, would you please kindly
> provide the new approach to be used in order to fix the errors below?

You cannot longer access hb_set structure directly. Now it's
a part of HVM stack and each thread can has its own SET structure.
You have to use Harbour API functions instead. See set of hb_set*()
functions in hbset.h

> Ic:\harbour\include -Iinclude -Foobj/gtkliststore.obj
> source/gtk/gtkliststore.c gtkliststore.c
> source/gtk/gtkliststore.c(140) : error C2065: 'hb_set' : undeclared
> identifier
> source/gtk/gtkliststore.c(140) : error C2228: left of '.HB_SET_DATEFORMAT'
> must have class/struct/union type is ''unknown-type''
> source/gtk/gtkliststore.c(225) : error C2065: 'hb_set' : undeclared
> identifier
> source/gtk/gtkliststore.c(225) : error C2228: left of '.HB_SET_DATEFORMAT'
> must have class/struct/union type is ''unknown-type''
> Here are the piece of the code:
>       case HB_IT_DATE:
>          hb_dateFormat( hb_pardsbuff( szDate, i+1 ), szFormatted, hb_set.HB_SET_DATEFORMAT );

Change it to:
   hb_dateFormat( hb_pardsbuff( szDate, i+1 ), szFormatted, hb_setGetDateFormat() );

best regards,
Przemek
From mbelgrano at deltain.it  Tue Sep 30 09:20:25 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep 30 09:20:51 2008
Subject: [Harbour] zipped version of harbour documentation
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F015@SRV02.deltain.net>

I have posted here a zipped version of harbour documentation
It is a 30 Mb rtf but 1,7 Mb the zipped version

http://groups.google.it/group/pharbour?hl=it

I Can generate doc,pdf,chm
I am working on divide/reduce for share using google docs
Direct link (if it work)
http://pharbour.googlegroups.com/web/xHrb.zip?hl=it&gda=Pm5BWzkAAACYzoVT
R5K6rUX9oMM0N5-mxoVxcD-XbijNY7GbGuKw2yXKlrQddl1Zcwmlb9rLpgspzCxLmDNq3-F8
LY_cVgIx&gsc=2qgMlwsAAADv_sq4O0PlgjHpnrjtDzQR


Massimo Belgrano

From bedipritpal at hotmail.com  Tue Sep 30 10:53:10 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Sep 30 10:53:18 2008
Subject: [Harbour] 2008-09-30 11:37 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080930093746.GA27030@34-mo7-2.acn.waw.pl>
References: <20080930093746.GA27030@34-mo7-2.acn.waw.pl>
Message-ID: <19743687.post@talk.nabble.com>


Przemek


Przemyslaw Czerpak-2 wrote:
> 
> 2008-09-30 11:37 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/include/Makefile
>   + harbour/include/hbvmint.h
>     + added new header file which works like hbvmopt.h but does not enable
>       stack macros
> 
>   * harbour/contrib/xhb/xhbenum.c
>   * harbour/contrib/xhb/xhbqself.c
>   * harbour/contrib/xhb/xhbwith.c
>   * harbour/contrib/xhb/cstructc.c
>   * harbour/contrib/hbwin/win_ole.c
>     ! use hbvmint.h instead of hbvmopt.h to eliminate direct bindings to
>       HVM stack structure
> 

Perfect. 

Now I can build Harbour with only -DHB_FM_STATISTICS_OFF flag and all
other sources with hbvmint.h whereever hbvmopt.h was used, without problems.
It has much earier for end user to build executable.

Now I can switch to MT and ST mode just by linking
hbvmmt.lib + cw32mt.lib  MT
hbvm.lib + cw32.lib  ST

Thanks.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-09-30-11%3A37-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp19738941p19743687.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Tue Sep 30 11:07:30 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep 30 11:07:56 2008
Subject: [Harbour] 2008-09-30 11:37 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <19743687.post@talk.nabble.com>
References: <20080930093746.GA27030@34-mo7-2.acn.waw.pl>
	<19743687.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F016@SRV02.deltain.net>

Wich is your C_USR,HB_BUILD_ST,PRG_USR,CFLAGS ecc?


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi
Sent: Tuesday, September 30, 2008 4:53 PM
To: harbour@harbour-project.org
Subject: Re: [Harbour] 2008-09-30 11:37 UTC+0200 Przemyslaw
Czerpak(druzus/at/priv.onet.pl)


Przemek


Przemyslaw Czerpak-2 wrote:
> 
> 2008-09-30 11:37 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/include/Makefile
>   + harbour/include/hbvmint.h
>     + added new header file which works like hbvmopt.h but does not
enable
>       stack macros
> 
>   * harbour/contrib/xhb/xhbenum.c
>   * harbour/contrib/xhb/xhbqself.c
>   * harbour/contrib/xhb/xhbwith.c
>   * harbour/contrib/xhb/cstructc.c
>   * harbour/contrib/hbwin/win_ole.c
>     ! use hbvmint.h instead of hbvmopt.h to eliminate direct bindings
to
>       HVM stack structure
> 

Perfect. 

Now I can build Harbour with only -DHB_FM_STATISTICS_OFF flag and all
other sources with hbvmint.h whereever hbvmopt.h was used, without
problems.
It has much earier for end user to build executable.

Now I can switch to MT and ST mode just by linking
hbvmmt.lib + cw32mt.lib  MT
hbvm.lib + cw32.lib  ST

Thanks.

Regards
Pritpal Bedi
-- 
View this message in context:
http://www.nabble.com/2008-09-30-11%3A37-UTC%2B0200-Przemyslaw-Czerpak-%
28druzus-at-priv.onet.pl%29-tp19738941p19743687.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Tue Sep 30 11:30:34 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep 30 11:30:58 2008
Subject: [Harbour] st printer to diferences between harbour and xharbour
In-Reply-To: <48E108A5.10401@oohg.org>
References: <48E108A5.10401@oohg.org>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F017@SRV02.deltain.net>

I am not sure but I have done something of similar:
         G_PORTA=GetDefaultPrinter()
         G_PORTA =PrinterPortToName(G_PORTA)
         set printer to &G_PORTA


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Ciro Vargas
Clemow
Sent: Monday, September 29, 2008 6:56 PM
To: Harbour Project Main Developer List.
Subject: [Harbour] st printer to diferences between harbour and xharbour


Hi all:

with the next code using an HP  USB pcl printer I obtain a valid print
test

but in harbour I obtain a file named (printer name) plus ".prn"


why is the concept diference ?

wich is correct ?

regards
Ciro

clear
?? 'Print test'
?  '---------------------------------'
? SET(_SET_DEVICE)
aPrinter:=GetPrinters()
IF EMPTY(aPrinter)
    ? '----- No Printers installed'
ELSE
    set printer to (GetDefaultPrinter())
    ? SET(_SET_PRINTER)
    ? SET(_SET_PRINTFILE)
     set console off
     set printer on

      ? 'Default Printer'
      ?'----------------'
       ? GetDefaultPrinter()
       ?
       ? 'Printers Available'
       ?'-------------------'
       FOR x:= 1 TO LEN(aPrinter)
         ? aPrinter[x]
       NEXT x
       aPrinter:= GetPrinters(.T.)
       ? 'Printers and Ports'
       ?'-------------------'
       FOR x:= 1 TO LEN(aPrinter)
         ? aPrinter[x,1]+' on '+aPrinter[x,2]
       NEXT x
       EJECT
       set printer off
       set console on
       set printer to
  ENDIF
  ? SET(_SET_PRINTER)
  ? SET(_SET_DEVICE)
   WAIT


-- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the
no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more
powerfull )


_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From dbtopas at dbtopas.lt  Tue Sep 30 13:40:13 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Sep 30 13:39:30 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080923133537.GE20289@34-mo7-2.acn.waw.pl>
References: <20080915113913.GA28078@34-mo7-2.acn.waw.pl>	<48CE57C6.2030006@dbtopas.lt>	<20080915154445.GA803@34-mo7-2.acn.waw.pl>	<48CE9A2E.9020201@dbtopas.lt>	<20080915184410.GA13559@34-mo7-2.acn.waw.pl>	<48CECBF9.1080605@dbtopas.lt>	<20080916173546.GA30158@34-mo7-2.acn.waw.pl>	<48D037DE.8010300@dbtopas.lt>	<20080917001732.GC24897@34-mo7-2.acn.waw.pl>	<48D248C1.8090600@dbtopas.lt>
	<20080923133537.GE20289@34-mo7-2.acn.waw.pl>
Message-ID: <48E2647D.7080505@dbtopas.lt>

Hi,


Przemyslaw Czerpak wrote:
>> Perhaps we should use HB_THREAD_STUB or pass pStack parameter to functions.
> 
> I've just implement it for estack.c and hvm.c.
> If possible please make tests so we can compare how it effects BCC builds.

Sorry for long delay, I was out of office a little, and I'm not sure for 
presence in nearest time.

I've tried to test it using -DHB_STACK_PRELOAD. Because I see
   #if defined( HB_STACK_PRELOAD ) && !defined( HB_USE_TLS )
in hbstack.h and because of

> 2008-09-26 19:34 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/include/hbstack.h
>   * harbour/source/vm/estack.c
>     + added assembler inline macros for TLS access in BCC and MinGW32
>       They are enabled when Harbour is compiled with -DHB_NO_TLS.

I've used -DHB_NO_TLS also.

But compilation with C_USR=-DHB_STACK_PRELOAD -DHB_NO_TLS finishes on 
errors:

Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
source\vm\arrays.c:
Error E2451 source\vm\arrays.c 106: Undefined symbol '_hb_stack_ptr_' in 
function hb_arrayPushBase
Error E2451 source\vm\arrays.c 127: Undefined symbol '_hb_stack_ptr_' in 
function hb_arrayReleaseGarbage
Error E2451 source\vm\arrays.c 911: Undefined symbol '_hb_stack_ptr_' in 
function hb_arrayScan
Error E2451 source\vm\arrays.c 1059: Undefined symbol '_hb_stack_ptr_' 
in function hb_arrayRevScan
Error E2451 source\vm\arrays.c 1404: Undefined symbol '_hb_stack_ptr_' 
in function hb_arrayFromStack
Error E2451 source\vm\arrays.c 1420: Undefined symbol '_hb_stack_ptr_' 
in function hb_arrayFromParams
Error E2451 source\vm\arrays.c 1441: Undefined symbol '_hb_stack_ptr_' 
in function hb_arrayBaseParams
Warning W8013 source\vm\arrays.c 1443: Possible use of 'uiPCount' before 
definition in function hb_arrayBaseParams
Error E2451 source\vm\arrays.c 1461: Undefined symbol '_hb_stack_ptr_' 
in function hb_arraySelfParams
Warning W8013 source\vm\arrays.c 1463: Possible use of 'uiPCount' before 
definition in function hb_arraySelfParams


I'm a little confused in all these settings: only hbthread.h checks for 
HB_NO_TLS, hbstack.h ignores this setting. Correct order of include 
files is important?! So, I've not tried to correct this problem.

The only reason I see for binding stack preload with "no tls" is that 
stack preload also uses inlined Windows like function to access tls. But 
I see it as to separate features stack: stack preload and tls access 
method (compiler native or system API)?


Best regards,
Mindaugas
From druzus at acn.waw.pl  Tue Sep 30 14:17:50 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 30 14:18:17 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48E2647D.7080505@dbtopas.lt>
References: <20080915154445.GA803@34-mo7-2.acn.waw.pl>
	<48CE9A2E.9020201@dbtopas.lt>
	<20080915184410.GA13559@34-mo7-2.acn.waw.pl>
	<48CECBF9.1080605@dbtopas.lt>
	<20080916173546.GA30158@34-mo7-2.acn.waw.pl>
	<48D037DE.8010300@dbtopas.lt>
	<20080917001732.GC24897@34-mo7-2.acn.waw.pl>
	<48D248C1.8090600@dbtopas.lt>
	<20080923133537.GE20289@34-mo7-2.acn.waw.pl>
	<48E2647D.7080505@dbtopas.lt>
Message-ID: <20080930181750.GA30722@34-mo7-2.acn.waw.pl>

On Tue, 30 Sep 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

>>> Perhaps we should use HB_THREAD_STUB or pass pStack parameter to functions.
>> I've just implement it for estack.c and hvm.c.
>> If possible please make tests so we can compare how it effects BCC builds.
> Sorry for long delay, I was out of office a little, and I'm not sure for 
> presence in nearest time.

Absolutely NP.

> I've tried to test it using -DHB_STACK_PRELOAD. Because I see
>   #if defined( HB_STACK_PRELOAD ) && !defined( HB_USE_TLS )
> in hbstack.h and because of

HB_STACK_PRELOAD is internal macro which can be set only inside files
which were updated to use it (now hvm.c and estack.c) and it's set
automatically.

>> 2008-09-26 19:34 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>>   * harbour/include/hbstack.h
>>   * harbour/source/vm/estack.c
>>     + added assembler inline macros for TLS access in BCC and MinGW32
>>       They are enabled when Harbour is compiled with -DHB_NO_TLS.
> I've used -DHB_NO_TLS also.

It was enough but now you do not have to use -DHB_NO_TLS because
it's default for current BCC builds.

> But compilation with C_USR=-DHB_STACK_PRELOAD -DHB_NO_TLS finishes on 
> errors:
> Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
> source\vm\arrays.c:
> Error E2451 source\vm\arrays.c 106: Undefined symbol '_hb_stack_ptr_' in 
> function hb_arrayPushBase

It's expected due to -DHB_STACK_PRELOAD

> I'm a little confused in all these settings: only hbthread.h checks for 
> HB_NO_TLS, hbstack.h ignores this setting. Correct order of include files 
> is important?! So, I've not tried to correct this problem.

No, it's not important. All problems were caused by -DHB_STACK_PRELOAD

> The only reason I see for binding stack preload with "no tls" is that stack 
> preload also uses inlined Windows like function to access tls. But I see it 
> as to separate features stack: stack preload and tls access method 
> (compiler native or system API)?

When compiler native TLS is disabled and file define HB_STACK_PRELOAD
before including harbour header files then each function which have
to access hb_stack buffers it's address by HB_STACK_TLS_PRELOAD.
If possible assembler inline function is used to retrieve stack address
which is a little bit faster then call to OS TLS function and even native
TLS support in some compilers (f.e.BCC).
Compile current SVN code without any additional switches and compare
the tstspeed.prg results to previous ones.

best regards,
Przemek
From rodrmigu at gmail.com  Tue Sep 30 14:20:14 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Tue Sep 30 14:20:23 2008
Subject: [Harbour] Re: Some issues related to the SET_DATEFORMAT'
In-Reply-To: <80b05d460809300524l4410f14bv6707388f533446a@mail.gmail.com>
References: <80b05d460809300524l4410f14bv6707388f533446a@mail.gmail.com>
Message-ID: <80b05d460809301120q53f94326w3d7c10f6facddca9@mail.gmail.com>

Hi,

> Change it to:
>  hb_dateFormat( hb_pardsbuff( szDate, i+1 ), szFormatted,
hb_setGetDateFormat() );
changed and working properly fine.

Thanks
Rodrigo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080930/6427385a/attachment.html
From alex_degarate at hotmail.com  Tue Sep 30 14:27:31 2008
From: alex_degarate at hotmail.com (Alejandro de Garate)
Date: Tue Sep 30 14:27:37 2008
Subject: [Harbour] HBDOC & documentation
Message-ID: <BLU149-W73D34FA63C4A8AD260328185430@phx.gbl>


>After your modification will be possible also convert to unique file>llike chm,pdf? >This format are good also for search 
 
Not in the short time. My first goal is to generate html and later xml from current docs.
hbdoc is quite complex and is not easy to process files without a standard format, like files existing in
.\doc
In a near future we should decide which is the standard format for Harbour's documentation.
 
Alejandro 
 
 
 
_________________________________________________________________
Connect to the next generation of MSN Messenger?
http://imagine-msn.com/messenger/launch80/default.aspx?locale=en-us&source=wlmailtagline
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080930/5813af8f/attachment.html
From harbour.01 at syenar.hu  Tue Sep 30 14:35:49 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 30 14:36:29 2008
Subject: [Harbour] zipped version of harbour documentation
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F015@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815F015@SRV02.deltain.net>
Message-ID: <0B0DFBA3-6356-4677-A816-2D05BF58BC87@syenar.hu>

Is this free documentation? If it is, why
do I need a membership to download it?

Brgds,
Viktor

On 2008.09.30., at 15:20, Massimo Belgrano wrote:

> I have posted here a zipped version of harbour documentation
> It is a 30 Mb rtf but 1,7 Mb the zipped version
>
> http://groups.google.it/group/pharbour?hl=it
>
> I Can generate doc,pdf,chm
> I am working on divide/reduce for share using google docs
> Direct link (if it work)
> http://pharbour.googlegroups.com/web/xHrb.zip?hl=it&gda=Pm5BWzkAAACYzoVT
> R5K6rUX9oMM0N5-mxoVxcD- 
> XbijNY7GbGuKw2yXKlrQddl1Zcwmlb9rLpgspzCxLmDNq3-F8
> LY_cVgIx&gsc=2qgMlwsAAADv_sq4O0PlgjHpnrjtDzQR
>
>
> Massimo Belgrano
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Tue Sep 30 14:47:48 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep 30 14:47:57 2008
Subject: R: Re: [Harbour] zipped version of harbour documentation
Message-ID: <000901c9232d$097a680a$0400a8c0@deltain.net>

Is a working in progress
Not yet  redy 

----- Messaggio originale -----
Da: Szak?ts Viktor <harbour.01@syenar.hu>
Inviato: marted? 30 settembre 2008 20.37
A: Harbour Project Main Developer List. <harbour@harbour-project.org>
Oggetto: Re: [Harbour] zipped version of harbour documentation

Is this free documentation? If it is, why
do I need a membership to download it?

Brgds,
Viktor

On 2008.09.30., at 15:20, Massimo Belgrano wrote:

> I have posted here a zipped version of harbour documentation
> It is a 30 Mb rtf but 1,7 Mb the zipped version
>
> http://groups.google.it/group/pharbour?hl=it
>
> I Can generate doc,pdf,chm
> I am working on divide/reduce for share using google docs
> Direct link (if it work)
> http://pharbour.googlegroups.com/web/xHrb.zip?hl=it&gda=Pm5BWzkAAACYzoVT
> R5K6rUX9oMM0N5-mxoVxcD- 
> XbijNY7GbGuKw2yXKlrQddl1Zcwmlb9rLpgspzCxLmDNq3-F8
> LY_cVgIx&gsc=2qgMlwsAAADv_sq4O0PlgjHpnrjtDzQR
>
>
> Massimo Belgrano
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Tue Sep 30 14:57:15 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 30 14:57:37 2008
Subject: R: Re: [Harbour] zipped version of harbour documentation
In-Reply-To: <000901c9232d$097a680a$0400a8c0@deltain.net>
References: <000901c9232d$097a680a$0400a8c0@deltain.net>
Message-ID: <FB79AE96-48F6-40B4-83DD-F1F39471C9ED@syenar.hu>

Harbour is also a work in progress.

If this is not free, I'd suggest to move it away
from this development list.

Brgds,
Viktor

On 2008.09.30., at 20:47, Massimo Belgrano wrote:

> Is a working in progress
> Not yet  redy
>
> ----- Messaggio originale -----
> Da: Szak?ts Viktor <harbour.01@syenar.hu>
> Inviato: marted? 30 settembre 2008 20.37
> A: Harbour Project Main Developer List. <harbour@harbour-project.org>
> Oggetto: Re: [Harbour] zipped version of harbour documentation
>
> Is this free documentation? If it is, why
> do I need a membership to download it?
>
> Brgds,
> Viktor
>
> On 2008.09.30., at 15:20, Massimo Belgrano wrote:
>
>> I have posted here a zipped version of harbour documentation
>> It is a 30 Mb rtf but 1,7 Mb the zipped version
>>
>> http://groups.google.it/group/pharbour?hl=it
>>
>> I Can generate doc,pdf,chm
>> I am working on divide/reduce for share using google docs
>> Direct link (if it work)
>> http://pharbour.googlegroups.com/web/xHrb.zip?hl=it&gda=Pm5BWzkAAACYzoVT
>> R5K6rUX9oMM0N5-mxoVxcD-
>> XbijNY7GbGuKw2yXKlrQddl1Zcwmlb9rLpgspzCxLmDNq3-F8
>> LY_cVgIx&gsc=2qgMlwsAAADv_sq4O0PlgjHpnrjtDzQR
>>
>>
>> Massimo Belgrano
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From myorg63 at mail.ru  Tue Sep 30 15:54:07 2008
From: myorg63 at mail.ru (Petr Chornyj)
Date: Tue Sep 30 15:54:13 2008
Subject: [Harbour] Yet another memory allocator?
Message-ID: <19749208.post@talk.nabble.com>


By a lucky accident I found  http://www.hoard.org/ http://www.hoard.org/ 
I try test hoard MA with  Harbour 1.0.1 and msvc71.


Harbour 1.1.0dev (Rev. 9523), Windows XP 5.1.2600 SP2 
============================================================ 
total application time:                            39.39 
total real time:                                     40.14 


Harbour 1.0.1 Intl. (Rev. 9429), Windows XP 5.1.2600 SP2 
============================================================ 
total application time:                            46.70 
total real time:                                     47.75 

Harbour 1.0.1 Intl. (Rev. 9429), Windows XP 5.1.2600 SP2 
+
winhoard
============================================================ 
total application time:                           40.42 
total real time:                                     41.39 


Has anybody any experiment with this allocator on Win, *Nix?

Regards,
Petr

-- 
View this message in context: http://www.nabble.com/Yet-another-memory-allocator--tp19749208p19749208.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Tue Sep 30 16:17:54 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Sep 30 16:18:10 2008
Subject: [Harbour] Yet another memory allocator?
In-Reply-To: <19749208.post@talk.nabble.com>
References: <19749208.post@talk.nabble.com>
Message-ID: <DFECE5FA-9E4A-4518-B497-6A6A832EA69F@syenar.hu>

Hi Petr,

Looks interesting, it would be good to see MT results,
as hoard claims to improve MT performance in the first
place.

As for applying it to Harbour, there is one showstopper:

--- (excerpt from the hoard FAQ)
Can I use Hoard with a commercial application?
Yes. Hoard is available under two licenses. The first license is the  
GNU General Public License. That license is free, but it requires you  
to open-source your application. The second option is to purchase a  
license from the University of Texas at Austin.

---

Brgds,

Viktor


On 2008.09.30., at 21:54, Petr Chornyj wrote:

>
> By a lucky accident I found  http://www.hoard.org/ http://www.hoard.org/
> I try test hoard MA with  Harbour 1.0.1 and msvc71.
>
>
> Harbour 1.1.0dev (Rev. 9523), Windows XP 5.1.2600 SP2
> ============================================================
> total application time:                            39.39
> total real time:                                     40.14
>
>
> Harbour 1.0.1 Intl. (Rev. 9429), Windows XP 5.1.2600 SP2
> ============================================================
> total application time:                            46.70
> total real time:                                     47.75
>
> Harbour 1.0.1 Intl. (Rev. 9429), Windows XP 5.1.2600 SP2
> +
> winhoard
> ============================================================
> total application time:                           40.42
> total real time:                                     41.39
>
>
> Has anybody any experiment with this allocator on Win, *Nix?
>
> Regards,
> Petr
>
> -- 
> View this message in context: http://www.nabble.com/Yet-another-memory-allocator--tp19749208p19749208.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From cvc at oohg.org  Tue Sep 30 16:55:17 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Tue Sep 30 16:55:31 2008
Subject: [Harbour] st printer to diferences between harbour and xharbour
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F017@SRV02.deltain.net>
References: <48E108A5.10401@oohg.org>
	<AFB948164110ED43B5EB849E8DEEF03815F017@SRV02.deltain.net>
Message-ID: <48E29235.7080005@oohg.org>

Massimo Belgrano escribi?:
> I am not sure but I have done something of similar:
>          G_PORTA=GetDefaultPrinter()
>          G_PORTA =PrinterPortToName(G_PORTA)
>          set printer to &G_PORTA

thanks Massimo,  I will test.

best regards
Ciro
> -- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From myorg63 at mail.ru  Tue Sep 30 16:59:01 2008
From: myorg63 at mail.ru (Petr Chornyj)
Date: Tue Sep 30 16:59:07 2008
Subject: [Harbour] Yet another memory allocator?
In-Reply-To: <DFECE5FA-9E4A-4518-B497-6A6A832EA69F@syenar.hu>
References: <19749208.post@talk.nabble.com>
	<DFECE5FA-9E4A-4518-B497-6A6A832EA69F@syenar.hu>
Message-ID: <19750288.post@talk.nabble.com>


> It would be good to see MT results


Harbour 1.1.0dev (Rev. 9523) (MT), Windows XP 5.1.2600 Service Pack 2 
============================================================ 
total application time:                              62.95 
total real time:                                     64.50 

Harbour 1.1.0dev (Rev. 9523) (MT), Windows XP 5.1.2600 Service Pack 2 
+
winhoard
============================================================ 
total application time:                              63.05 
total real time:                                     64.92 


Maybe someone can test with Linux also..

> there is one showstopper
Yes I know about it.

But one advantage - it's can use with old version Harbour and even xHarbour
(but it not our problem).

Also here 
http://prdownloads.sourceforge.net/nedmalloc/nedmalloc_v105_svn1078.zip?download
http://prdownloads.sourceforge.net/nedmalloc/nedmalloc_v105_svn1078.zip  I
found dlmalloc V2.8.4


    V2.8.4 (not yet released)
      * Add mspace_mmap_large_chunks; thanks to Jean Brouwers
      * Fix insufficient sys_alloc padding when using 16byte alignment
      * Fix bad error check in mspace_footprint
      * Adaptations for ptmalloc, courtesy of Wolfram Gloger.
      * Reentrant spin locks, courtesy of Earl Chew and others
      * Win32 improvements, courtesy of Niall Douglas and Earl Chew
      * Add NO_SEGMENT_TRAVERSAL and MAX_RELEASE_CHECK_RATE options
      * Extension hook in malloc_state
      * Various small adjustments to reduce warnings on some compilers
      * Various configuration extensions/changes for more platforms. Thanks
         to all who contributed these.

Maybe it's can be helpful for Harbour.

Regards,
Petr
-- 
View this message in context: http://www.nabble.com/Yet-another-memory-allocator--tp19749208p19750288.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Tue Sep 30 17:45:29 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep 30 17:45:37 2008
Subject: R: Re: R: Re: [Harbour] zipped version of harbour documentation
Message-ID: <000a01c92345$db69b50b$0400a8c0@deltain.net>

Is free but not ready

----- Messaggio originale -----
Da: Szak?ts Viktor <harbour.01@syenar.hu>
Inviato: marted? 30 settembre 2008 20.58
A: Harbour Project Main Developer List. <harbour@harbour-project.org>
Oggetto: Re: R: Re: [Harbour] zipped version of harbour documentation

Harbour is also a work in progress.

If this is not free, I'd suggest to move it away
from this development list.

Brgds,
Viktor

On 2008.09.30., at 20:47, Massimo Belgrano wrote:

> Is a working in progress
> Not yet  redy
>
> ----- Messaggio originale -----
> Da: Szak?ts Viktor <harbour.01@syenar.hu>
> Inviato: marted? 30 settembre 2008 20.37
> A: Harbour Project Main Developer List. <harbour@harbour-project.org>
> Oggetto: Re: [Harbour] zipped version of harbour documentation
>
> Is this free documentation? If it is, why
> do I need a membership to download it?
>
> Brgds,
> Viktor
>
> On 2008.09.30., at 15:20, Massimo Belgrano wrote:
>
>> I have posted here a zipped version of harbour documentation
>> It is a 30 Mb rtf but 1,7 Mb the zipped version
>>
>> http://groups.google.it/group/pharbour?hl=it
>>
>> I Can generate doc,pdf,chm
>> I am working on divide/reduce for share using google docs
>> Direct link (if it work)
>> http://pharbour.googlegroups.com/web/xHrb.zip?hl=it&gda=Pm5BWzkAAACYzoVT
>> R5K6rUX9oMM0N5-mxoVxcD-
>> XbijNY7GbGuKw2yXKlrQddl1Zcwmlb9rLpgspzCxLmDNq3-F8
>> LY_cVgIx&gsc=2qgMlwsAAADv_sq4O0PlgjHpnrjtDzQR
>>
>>
>> Massimo Belgrano
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
