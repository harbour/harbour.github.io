From info at fsgiudice.com  Thu Jan  1 05:41:10 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Thu Jan  1 05:41:16 2009
Subject: [Harbour] test
Message-ID: <495C9DC6.6040405@fsgiudice.com>

Best Regards

Francesco
From zen25000 at zen.co.uk  Sat Jan  3 17:47:05 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Sat Jan  3 17:47:09 2009
Subject: [Harbour] Mail problem?
Message-ID: <21270405.post@talk.nabble.com>


I have not seen any postings since Dec 24th, is it not working or do I have a
problem?

Happy New Year !
-- 
View this message in context: http://www.nabble.com/Mail-problem--tp21270405p21270405.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From info at fsgiudice.com  Sat Jan  3 20:40:14 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Jan  3 20:40:49 2009
Subject: [Harbour] 
	OpenProcess, ProcessValue, CloseProcess porting to harbour
Message-ID: <4960137E.9090709@fsgiudice.com>

Hi Przemek, Mindaugas,

is it possible to port functions in subject from xharbour to harbour ?
I'm trying but I have not enough experience at C level and with harbour 
internals.
Basically I need them to run an external program and 
capture output.												TIA

Best Regards,

Francesco
From george at duplication.ca  Sun Jan  4 00:42:15 2009
From: george at duplication.ca (george)
Date: Sun Jan  4 00:33:44 2009
Subject: [Harbour] alt numpad characters
In-Reply-To: <4960137E.9090709@fsgiudice.com>
References: <4960137E.9090709@fsgiudice.com>
Message-ID: <49604C37.2040504@duplication.ca>

Hi,

Is it possible to make harbour programs accept characters entered using the 
Alt-numpad method in Windows? For example hold Alt and type 130 on the numeric 
keypad to enter the letter ??

I've tried using using the standard windows console with Harbour 1.0 and 1.0.1.

A Clipper 5.3 DBU accepts these characters.

Thanks
George


From niki at synel.co.il  Sun Jan  4 01:16:07 2009
From: niki at synel.co.il (Chen Kedem)
Date: Sun Jan  4 01:18:35 2009
Subject: [Harbour] SF Feature Requests#2475056: PCRE automatic precompiling
Message-ID: <1A07FEDC778C3E4AA417F089511F859C0335276234@Mail-yoq.SYNEL-COMPANY.LTD>

The following feature request was posted on SF:
http://sourceforge.net/tracker/index.php?func=detail&aid=2475056&group_id=681&atid=350681

Anonymous wrote:
--------------------------------------------------------
PCRE automatic precompiling

Hi Harbour folks,
hb_regexMatch() and friends could be enhanced in speed, if the passed PCRE
expressions would be compiled and cached for subsequent calls. Typically
hb_regexMatch() is used with the same PCRE expression on many data
(database records f.e.), and precompiling the expression is always more
efficient than recompiling the same expression on each call.

Sometimes, manually precompiling an expression (with hb_regexComp()), isn't
easily possible (needs substantial program modification, if possible at
all), f.e. when the hb_regexMatch() call is used in a macro.

If hb_regex*() functions would maintain a per thread cache of - say - the
last 10-20 expressions in a hashed lookup table, along with the precompiled
expressions in binary form, it would create a transparent speedup for all
apps. This may even make hb_regexComp() unnecessary.

Regards
--------------------------------------------------------


  Chen.

ps. I started getting mails from the list (thanks phil),
some of them are month old, guess the queue are getting cleaned.
From zen25000 at zen.co.uk  Sun Jan  4 04:05:33 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Sun Jan  4 04:05:36 2009
Subject: [Harbour] Mail problem?
In-Reply-To: <21270405.post@talk.nabble.com>
References: <21270405.post@talk.nabble.com>
Message-ID: <21274149.post@talk.nabble.com>


OK  - I got some list mail today.

Barry Jackson wrote:
> 
> I have not seen any postings since Dec 24th, is it not working or do I
> have a problem?
> 
> Happy New Year !
> 

-- 
View this message in context: http://www.nabble.com/Mail-problem--tp21270405p21274149.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From m.renzi at maticasrl.it  Sun Jan  4 15:51:40 2009
From: m.renzi at maticasrl.it (Massimo Renzi (Matica Srl))
Date: Sun Jan  4 15:51:42 2009
Subject: [Harbour] are you alive?
In-Reply-To: <494647D6.4030800@maticasrl.it>
References: <531d7a750812111206q4c63ef5lac1401af490eb30@mail.gmail.com>
	<494647D6.4030800@maticasrl.it>
Message-ID: <4961215C.9030503@maticasrl.it>

Hi all,
exist another maillist? I dont recive any message.
thank you
Max

From zen25000 at zen.co.uk  Sun Jan  4 16:10:21 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Sun Jan  4 16:10:28 2009
Subject: [Harbour] are you alive?
In-Reply-To: <4961215C.9030503@maticasrl.it>
References: <531d7a750812111206q4c63ef5lac1401af490eb30@mail.gmail.com>	<494647D6.4030800@maticasrl.it>
	<4961215C.9030503@maticasrl.it>
Message-ID: <496125BD.3050305@zen.co.uk>

Hi Max
Same here - but I got this one!
Seems the list has problems again.
No messages since December 24th are going to :-
http://www.nabble.com/Harbour---Dev-f688.html
The Nabble site seems OK though as I sent a couple
of tests direct to it.
Very strange.
I don't really understand how the mail list works
- not been around here long.
Barry.


Massimo Renzi (Matica Srl) wrote:
> Hi all,
> exist another maillist? I dont recive any message.
> thank you
> Max
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From zen25000 at zen.co.uk  Sun Jan  4 16:59:11 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Sun Jan  4 16:59:20 2009
Subject: [Harbour] hbtpathy test help?
Message-ID: <4961312F.2050306@zen.co.uk>

I have tested telepath.prg with the original testtp.prg program and a 
loopback plug, but it fails, so to check whether it is failing on both 
send and receive I did the following:
I tested the port with a loopback and a C port test program from the web 
in Linux and it works.
I have another machine with a Clipper terminal emulation program (mine) 
that also works OK with loopback.
The C test talks to the Clipper terminal and vice versa via null modem 
cable.
However the hbtpathy test program does not send OR receive. Baud rate 
parity etc. OK.
The only modification I have made to hbtpathy.prg   is a delay function 
to replace ThreadSleep() which I hope will suffice and a modified test 
program to send single characters and check the receive buffer at each 
key press:-

function main
tp_open( 1,, 9600, 8, "N", 1 )
  do while !LASTKEY()=27
    tp_send( 1, CHR(LASTKEY()))
    tp_delay(0.5)           //uses ThreadSleep()
    ? tp_recv( 1 )
    inkey(0)
  enddo
tp_Close( 1 )
return nil

function ThreadSleep ( millisecs )
secs = millisecs/1000
now = seconds()
DO WHILE seconds()<now+secs
ENDDO
return nil

I admit that I have now hit a brick wall with this. The programs compile 
OK and link with tpcommon.c and tplinux.c without errors.
I have stepped through in debug as far as the calls to the C library and 
all seems well.
Any help would be appreciated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090104/19fc6b18/attachment.html
From april_white at sympatico.ca  Sun Jan  4 22:31:29 2009
From: april_white at sympatico.ca (April White)
Date: Sun Jan  4 22:31:37 2009
Subject: [Harbour] are you alive?
In-Reply-To: <4961215C.9030503@maticasrl.it>
References: <531d7a750812111206q4c63ef5lac1401af490eb30@mail.gmail.com>	<494647D6.4030800@maticasrl.it>
	<4961215C.9030503@maticasrl.it>
Message-ID: <BLU0-SMTP504C96493F3D1321BEF55CEFE10@phx.gbl>

Massimo Renzi (Matica Srl) wrote:
>
> exist another maillist? I dont recive any message.

On January 3rd I received the monthly reminder, but on the 5th I received:
 >> Your membership in the mailing list Harbour has been disabled due to 
excessive bounces...

I re-enabled the setting on the profile page and received three messages

April White
From lkrausem at shaw.ca  Sun Jan  4 22:59:34 2009
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Sun Jan  4 22:59:40 2009
Subject: [Harbour] are you alive?
In-Reply-To: <BLU0-SMTP504C96493F3D1321BEF55CEFE10@phx.gbl>
References: <531d7a750812111206q4c63ef5lac1401af490eb30@mail.gmail.com>
	<494647D6.4030800@maticasrl.it> <4961215C.9030503@maticasrl.it>
	<BLU0-SMTP504C96493F3D1321BEF55CEFE10@phx.gbl>
Message-ID: <496185A6.9050104@shaw.ca>

Same here.  Mine said it was disabled on Dec 27 for the same
reasons.  The link in the email to re-enable it didn't work so
I had to log to the sourceforge area to re-enable it again.

Regards,

April White wrote:
> Massimo Renzi (Matica Srl) wrote:
>>
>> exist another maillist? I dont recive any message.
>
> On January 3rd I received the monthly reminder, but on the 5th I 
> received:
> >> Your membership in the mailing list Harbour has been disabled due 
> to excessive bounces...
>
> I re-enabled the setting on the profile page and received three messages
>
> April White
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From dbtopas at dbtopas.lt  Mon Jan  5 07:02:39 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Jan  5 07:00:28 2009
Subject: [Harbour] Re: Virtual machine comparison
In-Reply-To: <20081231160000.GA6389@34-mo7-2.acn.waw.pl>
References: <495A3E54.6080102@dbtopas.lt>	<20081231125930.GA10423@34-mo7-2.acn.waw.pl>	<495B7C2D.7040609@dbtopas.lt>
	<20081231160000.GA6389@34-mo7-2.acn.waw.pl>
Message-ID: <4961F6DF.5050203@dbtopas.lt>

Hi,


After last changes comparison table is (no -ko flags used):

No Test code               Harbour  PHP   Python Ruby   Java  Java+JIT
----------------------------------+------+------+------+------+-------+
    10'000'000 times: 

11 nJ+=nI*2+17               4.61   3.41   6.54  25.53   1.36    0.08
12 nJ+=17+1+...+1+nI*2       4.61   6.10   6.62  45.86   1.36    0.08
13 nJ+=nI*2+17+1+...+1      10.86   5.95  12.96  45.78   1.92    0.17
    200'000 times:
21 cI:=cI+"a"                0.08   6.70   0.11  25.80 1641.766 1650.437
22 cI+="a"                   0.08   0.07   0.12  25.83 1649.344 1654.735
31 AADD(aI,{nI})             0.16   0.29   0.32   0.20   0.76    0.40
32 AADD(aI,{aI[nI-1][1]+1})  0.25   0.34   0.38   0.39   0.92    0.40
-----------------------------------------------------------------------

So, we need to work on typed integer variable optimisation to be perfect :)


>> I know this problem of current compiler, but I do not know how difficult is 
>> > to change this. Do we need to rewrite the whole harbour.y and all most 
>> > helper hb_comp* functions? Or this is a smaller work?
> 
> Smaller but we will have to at least "touch" most of compiler code. For me
> it means occasion to make some other modifications which will make whole
> code simpler and faster and add some extensions like strong typing.
> I do not like to leave unfinished job and this one will have to consume
> some time so I need strong motivation to start it. But maybe you will
> try.

Since, I do not know the compiler internals very well, I've started from 
bison rules. Rewriting it to lemon parser was a good way to know 
internals better. It took me more than a day of rewriting rules. But all 
this job requires some changes in C code also. So, I'm not sure if these 
lemon rules are useful at all, but the goal was to understand internals 
better. The main differences (bison vs. lemon), I found:

1) non-terminal symbol should be lowercase

2) terminal symbol can not be character. All ',', '(', ')' should be 
changed to some define, like C_COMMA, C_LBRACKET, C_RBRACKET, etc. And 
complex code has to be fixed to return these constants.

3) symbol : symbola symbolb symbolc
has to be converted to
    symbol ::= symbola symbolb symbolc

4) $$, $1, $2, ...
has to be converted to explicitly defined X, A, B, ...
    symbol(X) ::= symbola(A) symbolb(B)

5) lemon passes the whole structure, not a union member as bison do. So:
"%type <string> IdentName" and "$1", should be changed to:
"%type identname {HB_EXPR_PTR}" and "A->string".

6) lemon does not allow multiple C code for single rule. You can specify 
a single C code an the end of rule. So, you can not write rules:

DefTwoParam : ParamOne AsType
               { hb_compVariableAdd($1, HB_COMP_PARAM->cVarType); }
               ',' ParamTwo AsType
               { hb_compVariableAdd($5, HB_COMP_PARAM->cVarType); }

This should be fixed by adding value to AsType non-terminal symbol 
instead of "global" compiler variable cVarType.

AsType : AS_NUMERIC { $$ = 'N'; }
...

DefTwoParam : ParamOne AsType ',' ParamTwo AsType
               { hb_compVariableAdd($1, $2);
                 hb_compVariableAdd($4, $5); }

The problem is that AsType keeps its state in two global variables: 
cVarType and szFromClass, so we can not store type in a simple integer 
value and need to define a structure, collect these structures in some 
list, etc. There are a few more global variables, like: iVarScope, etc.


Sometimes a simple solution exists, definition of new non-terminal 
symbols, i.e.

DefTwoParam : ParamOne AsType DefTwoParam1 ',' ParamTwo AsType
               { /* end C code */ }

DefTwoParam1 : /*empty */ { /* middle C code */ }

but the problem is that ParamOne is not accessible in "middle C code".

7) Bison allows access symbols not from current rule. Actually ParamOne 
could be reached by $-1 from "middle C code", but these hacky solutions 
are not allowed in lemon. There are 4 places containing hacky code in 
current bison rules.


Now I would like more a way to implement parser rules rewriter instead 
of rewriting rules by hand. Only some places (like $0) will need to be 
fixed by hand.

====================================================

The problem with all these rule changes are:
1) lemon finds 39 collisions, but I'm unable to find a reason. (I guess 
there 3 or 4 collisions, but symbols are used a few times, so it 
generate a lot collisions).
2) I'm unable to do compiler changes in a small steps. So, I've ruined 
compiler code without many chances to make it work.

To create expression tree and generate pcode after exit from parser, 
needs a lot of changes, but I can not find a good way to do it in a 
small steps.
Maybe leaving existing code to do the job and creation of parallel 
expression tree could be a solution. We need to duplicate expression 
tree code. Later we can move expression optimisation and pcode 
generation to new expression tree, and later drop current pcode 
generation code.


Best regards,
Mindaugas
From dbtopas at dbtopas.lt  Mon Jan  5 07:10:35 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Jan  5 07:08:23 2009
Subject: [Harbour] 	OpenProcess, ProcessValue, CloseProcess porting to
	harbour
In-Reply-To: <4960137E.9090709@fsgiudice.com>
References: <4960137E.9090709@fsgiudice.com>
Message-ID: <4961F8BB.9020208@dbtopas.lt>

Hi,

> is it possible to port functions in subject from xharbour to harbour ?
> I'm trying but I have not enough experience at C level and with harbour 
> internals.
> Basically I need them to run an external program and capture 
> output.                                               

It is possible, but it is not portable solution. I'm not the guru of I/O 
redirection, but I guess Przemek will give you more precise answer about 
it.


Regards,
Mindaugas

From philb at philb.us  Mon Jan  5 07:23:03 2009
From: philb at philb.us (Phil Barnett)
Date: Mon Jan  5 07:23:09 2009
Subject: [Harbour] test
Message-ID: <4961FBA7.6060801@philb.us>

test
From druzus at acn.waw.pl  Mon Jan  5 07:34:24 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan  5 07:31:09 2009
Subject: [Harbour] 2009-01-05 13:33 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090105123424.GA10302@34-mo7-2.acn.waw.pl>

2009-01-05 13:33 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbgtcore.h
  * harbour/source/rtl/hbgtcore.c
    * changed BYTE bClearColor to USHORT uiClearColor


  The following modifications were made by Viktor Szakats,
  (2008-11-22 16:15 UTC+0100 - 2008-12-19 12:56 UTC+0100)
  Many thanks. It's the first part without CP conversions in OS calls which
  I will want to check yet. Please tests MS-Windows only modifications.

  * harbour/make_vc.mak
  * harbour/contrib/mtpl_vc.mak
    + Added support for A_USR.

  * harbour/include/set.ch
  * harbour/include/hbextern.ch
  * harbour/source/vm/cmdarg.c
  * harbour/source/vm/set.c
  * harbour/source/rtl/tgetlist.prg
  * harbour/source/rtl/gete.c
  * harbour/contrib/hbhpdf/harupdf.c
    * formatting

  * harbour/source/rtl/hbffind.c
    * Changed few places to use sizeof() instead of
      explicit size macro.

  * harbour/source/vm/extrap.c
    + Added module listing. (also supports Win64)

  * harbour/source/common/hbver.c
    + Added Intel C compiler detection. (from xhb)
    + Added Wine detection (unofficial but stable looking
      detection method. There intentionally doesn't exist
      an official method to do this detection, yet there
      are cases when this is necessary. It's also essential
      for error reports.)
      See also:
      http://www.mail-archive.com/wine-devel@winehq.org/msg48659.html

  * harbour/source/common/hbfopen.c
    ! Reverted recent change to use fopen_s(). fopen_s()
      will always open in exclusive mode, so it could create
      incompatibilities.

  * harbour/source/codepage/cpbgmik.c
    ! Fixed BGMIK collation encoding. Someone familiar with
      BG CPs please confirm this, but previously it was
      almost certainly broken, as the collation was identical
      to BG866.

  * harbour/source/rtl/diskspac.c
  * harbour/source/rtl/disksphb.c
    ! GetModuleHandleA() -> GetModuleHandle()
    ; NOTE: GetModuleHandleA() WinCE emulation in
            source/common/wince.c might be unnecessary
            after this change.

  * harbour/source/rtl/memoedit.prg
  * harbour/source/rtl/teditor.prg
    ! Cleaned insert handling. It now won't anymore mess up
      the cursor on instantiation (in New() method). Internal
      :lInsert state replaced by Set( _SET_INSERT ). Cursor
      is only touched in the editing loop.

  * harbour/source/rtl/version.c
    ! HB_VERSION( HB_VERSION_BUILD_DATE ): Fixed month
      being off by one.

  * harbour/contrib/hbmzip/hbmzip.c
    ! Fixed typo which caused timestamps stored in .zip files
      to be wrong.

  * harbour/contrib/hbhpdf/tests/harupdf.prg
    ! Minor typo in code.

  * harbour/contrib/rddads/rddads.h
    + Added detection for ACE 9.10.

  * harbour/contrib/hbtip/sendmail.prg
    ! Stricter parameter checking in hb_SendMail().

  * harbour/contrib/examples/dbu/hb_dbu.dif
    + Added SET DATE ANSI and SET CENTURY ON

  * harbour/source/rtl/gtxwc/gtxwc.c
    + Generating HB_K_RESIZE keystrokes on screen resize.
      This way it's working similarly to gtwvt.
    ! Typos in comments.

  * harbour/source/rtl/gtwin/gtwin.c
    ! Fixed HB_GTI_KBDSHIFTS not working in console mode.
      Replaced GetKeyboardState() call with GetKeyState() calls.

  * harbour/source/rtl/gtwvt/gtwvt.c
    + Added 'layered' window support. It's enabled on W2K
      and above (and only when not in Terminal Services
      environment, because it makes it perform worse). This
      way the screen is also properly displayed regardless
      of what the Harbour application does. It also fixes
      numerous paint artifacts, when GTWVT window was in
      the background and another window is moved in front
      of it.
    ! Fixed only generate HB_K_RESIZE keystrokes when
      resize mode is HB_GTI_RESIZEMODE_ROWS.

best regards
Przemek
From rportnoff at spendmap.com  Mon Jan  5 09:12:06 2009
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Mon Jan  5 09:11:49 2009
Subject: [Harbour] Test
In-Reply-To: <20090105123424.GA10302@34-mo7-2.acn.waw.pl>
References: <20090105123424.GA10302@34-mo7-2.acn.waw.pl>
Message-ID: <B0085824493@ms1.3peaks.com>



From jacek at achilles.wam.lodz.pl  Mon Jan  5 09:51:46 2009
From: jacek at achilles.wam.lodz.pl (Jacek Kubica)
Date: Mon Jan  5 09:52:05 2009
Subject: =?utf-8?Q?=5BSpam=5D?=
 Re: [Harbour] test
In-Reply-To: <4961FBA7.6060801@philb.us>
References: <4961FBA7.6060801@philb.us>
Message-ID: <10222008964.20090105155146@achilles.wam.lodz.pl>


Hello Phil,

Monday, January 05, 2009, 1:23:03 PM, you wrote:

PB> test
PB> _______________________________________________
PB> Harbour mailing list
PB> Harbour@harbour-project.org
PB> http://lists.harbour-project.org/mailman/listinfo/harbour

test PASSED ;-)

IMHO all old list members should be informed
to visit list`s WWW site and re-enable mail
delivery.
(or you can re-enable it "manualy")

Thanks to Massimo Belgrano for forwarded
info about it on Harbour MiniGUI List.

-- 
   Best regards
and Happy New Year 2009,

    Jacek Kubica


-------------- next part --------------
Poczta zostala przeskanowana przez system antywirusowy i nie zawiera wirusow.
From lorenzo.fiorini at gmail.com  Mon Jan  5 09:58:10 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jan  5 09:58:15 2009
Subject: [Harbour] test
In-Reply-To: <4961FBA7.6060801@philb.us>
References: <4961FBA7.6060801@philb.us>
Message-ID: <9257026e0901050658p4cf0d8e3u7e2c31ebf14a8065@mail.gmail.com>

test
From druzus at acn.waw.pl  Mon Jan  5 12:20:57 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan  5 12:17:43 2009
Subject: [Harbour] 2009-01-05 18:20 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090105172057.GA5754@34-mo7-2.acn.waw.pl>

2009-01-05 18:20 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/dbsql.c
  * harbour/source/rdd/dbfntx/dbfntx1.c
  * harbour/source/rdd/dbfnsx/dbfnsx1.c
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
  * harbour/contrib/rddads/ads1.c
    ! reuse the same error object when CANRETRY flag is set for valid
      TRIES member update

best regards
Przemek
From info at fsgiudice.com  Mon Jan  5 12:34:07 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jan  5 12:34:20 2009
Subject: [Harbour] 	OpenProcess, ProcessValue, CloseProcess porting to
	harbour
In-Reply-To: <4961F8BB.9020208@dbtopas.lt>
References: <4960137E.9090709@fsgiudice.com> <4961F8BB.9020208@dbtopas.lt>
Message-ID: <4962448F.20006@fsgiudice.com>

Hi Mindaugas,

thank you for replying,

Il 05/01/2009 13.10, Mindaugas Kavaliauskas ha scritto:
> Hi,
> 
>> is it possible to port functions in subject from xharbour to harbour ?
>> I'm trying but I have not enough experience at C level and with 
>> harbour internals.
>> Basically I need them to run an external program and capture 
>> output.                                               
> 
> It is possible, but it is not portable solution. I'm not the guru of I/O 
> redirection, but I guess Przemek will give you more precise answer about 
> it.
> 
In xHarbour Giancarlo (AFAIR) did it working multiplatform. I'm trying 
to port to Harbour but there are some changes I don't understand well, 
mostly related to different MT environment. xHarbour version has VM/MT 
calls inside that files (filesys.c and philes.c) in rtl lib, instead 
Harbour has VM API calls only in hbvm*.lib, so I don't know exactly how 
translate, for example, below lines:

---------------------------
#elif defined( HB_OS_WIN_32 ) && ! defined( HB_WIN32_IO )
{
    int iPid;

    HB_SYMBOL_UNUSED( bWait );

    HB_STACK_UNLOCK
    HB_TEST_CANCEL_ENABLE_ASYN
    #ifdef __BORLANDC__
       iPid = cwait( &iRetStatus, (int) fhProc, 0 );
    #else
       iPid = _cwait( &iRetStatus, (int) fhProc, 0 );
    #endif
    HB_DISABLE_ASYN_CANC
    HB_STACK_LOCK;

    if ( iPid != (int) fhProc )
    {
       iRetStatus = -1;
    }
}
#elif defined( HB_WIN32_IO )
---------------------------

in particular macros:
    HB_TEST_CANCEL_ENABLE_ASYN
    HB_DISABLE_ASYN_CANC

as I have understood that
    HB_STACK_UNLOCK
    HB_STACK_LOCK
should be
    hb_vmUnlock();
    hb_vmLock();

Thank you

Best Regards

Francesco

From info at fsgiudice.com  Mon Jan  5 12:36:02 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jan  5 12:36:10 2009
Subject: [Harbour] test
In-Reply-To: <4961FBA7.6060801@philb.us>
References: <4961FBA7.6060801@philb.us>
Message-ID: <49624502.7080205@fsgiudice.com>

Hi Phil,

now it seems that NG works well.
Just to say thank you for your efforts.

Best Regards

Francesco

Il 05/01/2009 13.23, Phil Barnett ha scritto:
> test
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Mon Jan  5 12:46:14 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan  5 12:42:56 2009
Subject: [Harbour]  OpenProcess, ProcessValue, CloseProcess porting to
	harbour
In-Reply-To: <4961F8BB.9020208@dbtopas.lt>
References: <4960137E.9090709@fsgiudice.com> <4961F8BB.9020208@dbtopas.lt>
Message-ID: <20090105174614.GA9074@34-mo7-2.acn.waw.pl>

On Mon, 05 Jan 2009, Mindaugas Kavaliauskas wrote:

Hi,

>> is it possible to port functions in subject from xharbour to harbour ?
>> I'm trying but I have not enough experience at C level and with harbour 
>> internals.
>> Basically I need them to run an external program and capture output.
> It is possible, but it is not portable solution. I'm not the guru of I/O 
> redirection, but I guess Przemek will give you more precise answer about 
> it.

Except DOS which is single process system it can be ported to other
supported by us systems though I wanted to write them in a little bit
different way probably also changing parameters at least at C level.
I can make it but we will have to ask OS2 users to make tests and if
necessary update the code or inform us about problems/errors.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Jan  5 12:47:18 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan  5 12:44:01 2009
Subject: [Harbour] test
In-Reply-To: <49624502.7080205@fsgiudice.com>
References: <4961FBA7.6060801@philb.us> <49624502.7080205@fsgiudice.com>
Message-ID: <20090105174717.GA26763@34-mo7-2.acn.waw.pl>

On Mon, 05 Jan 2009, Francesco Saverio Giudice wrote:
> Hi Phil,
> now it seems that NG works well.
> Just to say thank you for your efforts.

+1

best regards,
Przemek
From druzus at acn.waw.pl  Mon Jan  5 12:58:45 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan  5 12:55:29 2009
Subject: [Harbour] OpenProcess, ProcessValue, CloseProcess porting to
	harbour
In-Reply-To: <4962448F.20006@fsgiudice.com>
References: <4960137E.9090709@fsgiudice.com> <4961F8BB.9020208@dbtopas.lt>
	<4962448F.20006@fsgiudice.com>
Message-ID: <20090105175845.GB26763@34-mo7-2.acn.waw.pl>

On Mon, 05 Jan 2009, Francesco Saverio Giudice wrote:

Hi Francesco,

> in particular macros:
>    HB_TEST_CANCEL_ENABLE_ASYN
>    HB_DISABLE_ASYN_CANC

You do not need it. Harbour does not use any OS level thread
cancellation code. AFAIK xHarbour code is also not safe for
such cancellation so it should be updated (it's not easy job
because it needs whole code verifying and adding push/pop cleanup
functions for all allocated resources like allocated memory, any
OS handles, used work areas, etc) or removed.

> as I have understood that
>    HB_STACK_UNLOCK
>    HB_STACK_LOCK
> should be
>    hb_vmUnlock();
>    hb_vmLock();

In general yes though internally they do not make exactly the same
operations.

best regards,
Przemek
From info at fsgiudice.com  Mon Jan  5 13:25:41 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jan  5 13:25:50 2009
Subject: [Harbour] OpenProcess, ProcessValue, CloseProcess porting to
	harbour
In-Reply-To: <20090105175845.GB26763@34-mo7-2.acn.waw.pl>
References: <4960137E.9090709@fsgiudice.com>
	<4961F8BB.9020208@dbtopas.lt>	<4962448F.20006@fsgiudice.com>
	<20090105175845.GB26763@34-mo7-2.acn.waw.pl>
Message-ID: <496250A5.6000306@fsgiudice.com>

Hi Przemek,

Il 05/01/2009 18.58, Przemyslaw Czerpak ha scritto:
> On Mon, 05 Jan 2009, Francesco Saverio Giudice wrote:
> 
> Hi Francesco,
> 
>> in particular macros:
>>    HB_TEST_CANCEL_ENABLE_ASYN
>>    HB_DISABLE_ASYN_CANC
> 
> You do not need it. Harbour does not use any OS level thread
> cancellation code. AFAIK xHarbour code is also not safe for
> such cancellation so it should be updated (it's not easy job
> because it needs whole code verifying and adding push/pop cleanup
> functions for all allocated resources like allocated memory, any
> OS handles, used work areas, etc) or removed.
> 
>> as I have understood that
>>    HB_STACK_UNLOCK
>>    HB_STACK_LOCK
>> should be
>>    hb_vmUnlock();
>>    hb_vmLock();
> 
> In general yes though internally they do not make exactly the same
> operations.
> 

Ok, I'll try, also if I would like if you will find spare time to port 
it to harbour because surely it will be better aligned to internals than 
a simple "translation".

TIA

Best regards,

Francesco

From a.jurkiewicz at abix.info.pl  Mon Jan  5 14:45:27 2009
From: a.jurkiewicz at abix.info.pl (ABIX Adam Jurkiewicz)
Date: Mon Jan  5 14:45:38 2009
Subject: [Harbour] test
In-Reply-To: <495C9DC6.6040405@fsgiudice.com>
References: <495C9DC6.6040405@fsgiudice.com>
Message-ID: <49626357.2050306@abix.info.pl>

Francesco Saverio Giudice pisze:
> Best Regards
List seems to be alive ;-)

Adam
-- 
ABIX - Linuksowe Systemy Wspomagania Biznesu www.abix.info.pl
Gadu-Gadu: 302315
Skype: abix_adamj
Wsparcie: http://groups-beta.google.com/group/abix-rcsoft?hl=pl
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3282 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090105/26f21907/smime.bin
From cvc at oohg.org  Mon Jan  5 18:28:56 2009
From: cvc at oohg.org (Ciro Vargas C)
Date: Mon Jan  5 18:28:58 2009
Subject: [Harbour] test
Message-ID: <d6500b450901051528w446f09b3vcd38b7e5c514a5b7@mail.gmail.com>

test
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090105/80a8bf94/attachment.html
From philb at philb.us  Mon Jan  5 19:18:56 2009
From: philb at philb.us (Phil Barnett)
Date: Mon Jan  5 19:19:02 2009
Subject: [Spam] Re: [Harbour] test
In-Reply-To: <10222008964.20090105155146@achilles.wam.lodz.pl>
References: <4961FBA7.6060801@philb.us>
	<10222008964.20090105155146@achilles.wam.lodz.pl>
Message-ID: <4962A370.40907@philb.us>

Jacek Kubica wrote:
> Hello Phil,
>
> Monday, January 05, 2009, 1:23:03 PM, you wrote:
>
> PB> test
> PB> _______________________________________________
> PB> Harbour mailing list
> PB> Harbour@harbour-project.org
> PB> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> test PASSED ;-)
>
> IMHO all old list members should be informed
> to visit list`s WWW site and re-enable mail
> delivery.
> (or you can re-enable it "manualy")
>
> Thanks to Massimo Belgrano for forwarded
> info about it on Harbour MiniGUI List.
>
>   
All done. I manually reenabled everyone who was bounce-kicked.

The technicians from Plesk SWEAR that they didn't do anything to fix it, 
but after I gave them the password for the server (that got messed up 
after their upgrade process) suddenly all the lists started working.

So, regardless of what they say, the evidence is clear that they found 
and fixed the problem.

I just wish they would tell what they did so I don't have to pay them 
next time.
From sscc at mweb.co.za  Tue Jan  6 03:22:33 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Jan  6 03:22:40 2009
Subject: [Harbour] Compiling with VS2005
Message-ID: <496314C9.2040808@mweb.co.za>

Hi

I am trying to compile programs using Harbour 1.0.1 from SVN. 
Compiling and installing Harbour went fine but I cannot link my apps, 
I am getting these 5 unresolved externals (this is a sample of them):

hbcommon.lib(expropt2.obj) : error LNK2001: unresolved external symbol 
__ftol2

rddntx.lib(dbfntx1.obj) : error LNK2001: unresolved external symbol 
__ftol2_sse

hbmzip.lib(zip.obj) : error LNK2019: unresolved external symbol 
__time64 referenced in function _time

hbvm.lib(itemapi.obj) : error LNK2019: unresolved external symbol 
__alldvrm referenced in function _hb_itemStrBuf

hbcommon.lib(hbtrace.obj) : error LNK2019: unresolved external symbol 
___iob_func referenced in function _hb_tr_level

I added bufferoverflowU.lib to the lib list to get rid of some other 
unresolved symbols, but I can't find which libs these ones are in.

Thanks
Alex



From sscc at mweb.co.za  Tue Jan  6 04:18:58 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Jan  6 04:19:01 2009
Subject: [Harbour] Re: Compiling with VS2005
In-Reply-To: <496314C9.2040808@mweb.co.za>
References: <496314C9.2040808@mweb.co.za>
Message-ID: <49632202.6070703@mweb.co.za>

Alex Strickland wrote:

> I am trying to compile programs using Harbour 1.0.1 from SVN. Compiling 
> and installing Harbour went fine but I cannot link my apps, I am getting 
> these 5 unresolved externals (this is a sample of them):

Sometimes I think the act of finally asking for help is the only way 
to bump your brain into getting the answer yourself. Anyway, I still 
had a path set to MSVC6, which I was convinced I had removed.

Thanks
Alex

From rodrmigu at gmail.com  Tue Jan  6 07:29:41 2009
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Tue Jan  6 07:29:45 2009
Subject: [Harbour] Re: Compiling with VS2005
In-Reply-To: <49632202.6070703@mweb.co.za>
References: <496314C9.2040808@mweb.co.za> <49632202.6070703@mweb.co.za>
Message-ID: <80b05d460901060429k77fa9f90od00de52abbfdd9a9@mail.gmail.com>

Hi,

Also, I'm getting on 2005 & 2008 a long list of warnings, like these:

source\compiler\hbmain.c(298) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\compiler\hbmain.c(868) : warning C4244: '-=' : conversion from
'int' to 'USHORT', possible loss of data
source\compiler\hbmain.c(3511) : warning C4244: '+=' : conversion from
'size_t' to 'USHORT', possible loss of data
source\compiler\gencc.c(637) : warning C4244: '=' : conversion from
'size_t' to 'USHORT', possible loss of data
source\compiler\gencc.c(789) : warning C4244: '=' : conversion from
'size_t' to 'USHORT', possible loss of data
source\compiler\gencc.c(1539) : warning C4244: '=' : conversion from
'size_t' to 'USHORT', possible loss of data
source\compiler\hbfix.c(124) : warning C4244: '+=' : conversion from
'int' to 'SHORT', possible loss of data
source\main\harbour.c(281) : warning C4244: '=' : conversion from
'int' to 'char', possible loss of data

Regards,
Rodrigo

On Tue, Jan 6, 2009 at 7:18 AM, Alex Strickland <sscc@mweb.co.za> wrote:
> Alex Strickland wrote:
>
>> I am trying to compile programs using Harbour 1.0.1 from SVN. Compiling
>> and installing Harbour went fine but I cannot link my apps, I am getting
>> these 5 unresolved externals (this is a sample of them):
>
> Sometimes I think the act of finally asking for help is the only way to bump
> your brain into getting the answer yourself. Anyway, I still had a path set
> to MSVC6, which I was convinced I had removed.
>
> Thanks
> Alex
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From mbelgrano at deltain.it  Tue Jan  6 08:48:32 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jan  6 08:48:34 2009
Subject: [Harbour] Test
Message-ID: <609353e70901060548y59ec469bofe746bf966c7673@mail.gmail.com>

Test

-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090106/ec6b17c3/attachment.html
From elart at elart.it  Tue Jan  6 08:50:32 2009
From: elart at elart.it (elart)
Date: Tue Jan  6 08:50:40 2009
Subject: [Harbour] test
Message-ID: <496361A8.9000207@elart.it>

test

From mbelgrano at deltain.it  Tue Jan  6 08:57:32 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jan  6 08:57:34 2009
Subject: [Harbour] A problem with my mail and harbour mailing
Message-ID: <609353e70901060557h4b9f5b18k8fdbdd7d95bdd78e@mail.gmail.com>

Hi Phil
I think that i have a little problem.
The message that I post on harbour developer mailing list need one or
two day to be visible
probably i can't see this messages sent also to mailing list
I have verified my subscription but seem fine
instead I can post messages on harbour user list without problem
I have send this messages to you and to list so you can verify

Thanks in advance
-- 
Massimo Belgrano
From mbelgrano at deltain.it  Tue Jan  6 09:09:30 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jan  6 09:09:34 2009
Subject: [Harbour] Re: A problem with my mail and harbour mailing
In-Reply-To: <609353e70901060557h4b9f5b18k8fdbdd7d95bdd78e@mail.gmail.com>
References: <609353e70901060557h4b9f5b18k8fdbdd7d95bdd78e@mail.gmail.com>
Message-ID: <609353e70901060609o7435e163ua7d7d4f419e0f5e8@mail.gmail.com>

Hoops all work fine
sorry

2009/1/6 Massimo Belgrano <mbelgrano@deltain.it>

> Hi Phil
> I think that i have a little problem.
> The message that I post on harbour developer mailing list need one or
> two day to be visible
> probably i can't see this messages sent also to mailing list
> I have verified my subscription but seem fine
> instead I can post messages on harbour user list without problem
> I have send this messages to you and to list so you can verify
>
> Thanks in advance
> --
> Massimo Belgrano
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090106/5fc14825/attachment.html
From teo at windtelsoft.com  Tue Jan  6 12:05:09 2009
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Wed Jan  7 00:12:15 2009
Subject: [Harbour] Help with scope class checking
Message-ID: <200901061105.09494.teo@windtelsoft.com>

Hello,

I would like to kindly ask you for a little help on an technical Harbour 
problem:

I'm building an Client/Server database library based on Harbour Objects, the 
idea behind this is simple:

?* On the Server side:
? ?- An RDOServer object is created and starts listening for incoming clients 
on a predetermined port, when an new client connect request is received, then 
an Harbour Thread is fired and it polls for the client requests, tipically 
the client will start the comunication with a TTable():New(). This Thread 
will serve to the client for all the TTable objects required and process the 
messages and then return to the client the result (as an serialized HB_ITEM).

?* On the Client side:
? ?- An TTable object is created *and if* his tablename is something 
like "RDO://rdoserver.com:port/the_database_name.dbf", this will instantiate 
an RDOCLient object and assign it to a data in the TTable object. The new 
TTable object requested (in the "NEW" message) will be sended to the Server 
(as an string with an classname id and serialized params) where the TTable 
object will be created and then returned to the client (as an serialized 
Object item) where it will be the assigned as the actual client TTable 
object. Some of the TTable object messages/methods will be processed on the 
server and the result returned to the client, i.e. when the database is 
needed to be physically opened ( Table:Open() ) the "Open" method on the 
Client will send the request to the Server where the "Open" method will be 
executed, the result is returned to the client.

? * Remarks
? ? - TTable Class is part the opensource wxHarbour library 
(http://sourceforge.net/projects/wxharbour/)
? ? - Both the Client and the Server class definitions are exactly equal, they 
differ only when an Client request TTable is needed.
? ? - Sorry for my bad english.

? * The Help I request:
? ? - I need to be able to bypass the scope class checking when an method 
needs to be executed on the Server side (check the function 
TRDOSOCKETBASE_PROCESSCLIENTREQUESTS on the attached cpp source code). 
Currently I cannot execute the private/protected methods on the Server side 
and this messages/methods need to be executed *as if* they were executed on 
the Client. Please check this function on the attached source code.


Any help, insight, criticism are welcome in this order, no, just kidding :), 
please provide any help, idea or whatever.


best regards,

Teo

PD: I have checked the hb_dbgObjSendMessagge() (classes.c) and it seems that 
it does what I want, but I'm a little lost in understand the details.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: trdoserver_c.cpp.zip
Type: application/x-zip
Size: 2319 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090106/e0f78aa9/trdoserver_c.cpp.bin
From maurilio.longo at libero.it  Wed Jan  7 03:34:57 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Jan  7 03:35:03 2009
Subject: [Harbour] what happened to the mailing list?
Message-ID: <49646931.1060400@libero.it>

Hi all,

as subject says, what happened? I did not receive messages from december the
20th to january the 5th.

I've seen this morning a warning from the mailing list of excessive bouncings
of my address, which is just impossible since I'm subscribed to several
mailing list which kept delivering messages to my address during the whole
'black out' period.

Best regards.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From info at fsgiudice.com  Wed Jan  7 04:08:08 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Jan  7 04:08:16 2009
Subject: [Harbour] what happened to the mailing list?
In-Reply-To: <49646931.1060400@libero.it>
References: <49646931.1060400@libero.it>
Message-ID: <496470F8.2000407@fsgiudice.com>

Hi Maurilio,

there was a problem on Harbour mailing list that Phil (thanks again) has 
solved from 5th of january.
You can find lost messages on harbour mailing list archive.

Best Regards

Francesco

Il 07/01/2009 9.34, Maurilio Longo ha scritto:
> Hi all,
> 
> as subject says, what happened? I did not receive messages from december the
> 20th to january the 5th.
> 
> I've seen this morning a warning from the mailing list of excessive bouncings
> of my address, which is just impossible since I'm subscribed to several
> mailing list which kept delivering messages to my address during the whole
> 'black out' period.
> 
> Best regards.
> 
> Maurilio.
> 
From zen25000 at zen.co.uk  Wed Jan  7 06:43:58 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Wed Jan  7 06:44:09 2009
Subject: [Harbour] what happened to the mailing list?
In-Reply-To: <496470F8.2000407@fsgiudice.com>
References: <49646931.1060400@libero.it> <496470F8.2000407@fsgiudice.com>
Message-ID: <4964957E.8040601@zen.co.uk>

Hello all - glad it's working again.
I generally read the mail in the Nabble forum as it is easier to follow 
threads.
The site says:-
"This forum is an archive for the mailing list: harbour@harbour-project.org"
however there is still a gap in the messages between Dec 27 and Jan 5th.
Also, can someone explain whether in reality there is any difference 
between
posting to the forum or to the list? I have assumed that mail sent to 
either
should automatically arrive in the other, but with these mail problems 
it's been
hard to tell if this is really happening.
I posted a message (to the list) asking for help using hbtpathy on Jan 
5th but I don't see it anywhere.
Regards,
Barry

Francesco Saverio Giudice wrote:
> Hi Maurilio,
>
> there was a problem on Harbour mailing list that Phil (thanks again) 
> has solved from 5th of january.
> You can find lost messages on harbour mailing list archive.
>
> Best Regards
>
> Francesco
>
> Il 07/01/2009 9.34, Maurilio Longo ha scritto:
>> Hi all,
>>
>> as subject says, what happened? I did not receive messages from 
>> december the
>> 20th to january the 5th.
>>
>> I've seen this morning a warning from the mailing list of excessive 
>> bouncings
>> of my address, which is just impossible since I'm subscribed to several
>> mailing list which kept delivering messages to my address during the 
>> whole
>> 'black out' period.
>>
>> Best regards.
>>
>> Maurilio.
>>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From gvarona at ec-red.com  Wed Jan  7 08:07:49 2009
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Wed Jan  7 08:07:51 2009
Subject: [Harbour] How to generate ERROR.LOG file with details of the
 failure of run-time errors?
Message-ID: <4964A925.7040703@ec-red.com>

In xHarbour ever happens a runtime error, it generates a file named
Error.log contains:

******************************* Error log file
********************************
Date ............: 14/04/2008
Time ............: 11:44:38
Available Memory : 626036
Multi Threading  : No
VM Optimization  : 0
Application      : Z:\CU\XSYSCU.EXE
Operating System : Windows XP Professional 5.01.2600 Service Pack 2
Compiler         : Borland C++ 5.5.1
xHarbour Version : xHarbour build 0.99.51 Intl. (SimpLex)
Build Date       : Nov 11 2005 19:09:49
-------------------------- Environmental Information
--------------------------
Exact is ........: Off
Fixed is ........: Off
Decimals is at ..: 2
Date Format is ..: DD/MM/YYYY
Epoch is ........: 1900
Path is .........:
Default is ......:
Exclusive is ....: Off
SoftSeek is .....: Off
Unique is .......: Off
Deleted is ......: On
Cancel is .......: On
Debug is ........: False
Color is ........: N+/W,B+/BG,N/N,N/N,N+/W,R+/N,R/G,W+/B
Cursor is .......: 1
Console is ......: On
Alternate is ....: Off
AltFile is ......:
Device is .......: SCREEN
Printer is ......: False
PrintFile is ....: PRN
Margin is .......: 0
Bell is .........: Off
Confirm is ......: Off
Escape is .......: On
Insert is .......: Off
Intensity is ....: On
Scoreboard is ...: Off
Delimeters is ...: Off
Delimchars is ...: ::
Wrap is .........: On
Message is ......: 23
MCenter is ......: On
===========================Detailed Work Area
Items============================

++++++++++++++++++++ Internal Error Handling Information
+++++++++++++++++++++
Subsystem Call ..: BASE
System Code .....: 1002
Default Status ..: False
Description .....: Alias does not exist
Operation .......: FUENTE
Arguments .......:
Involved File ...:
Dos Error Code ..: 0
  Trace Through:
----------------
RESTOBRA              :     996 in Module: Util.prg
(b)CREA_MENU          :      82 in Module:
EXECUTE               :     432 in Module:
MENUMODAL             :     208 in Module: Mm.prg
MAIN                  :     256 in Module: Menu.prg

############################## Video Screen Dump
##############################

+--------------------------------------------------------------------------------+
|????????????????????????????????????????????????????????????????????????????????|
|SyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO REGIONAL PIURA SyS-CU
GOBIERNO RE|
|ESyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO REGIONAL PIURA SyS-CU
GOBIERNO R|
|RESyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO REGIONAL PIURA SyS-CU
GOBIERNO |
| RESyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO REGIONAL PIURA SyS-CU
GOBIERNO|
|O RESyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO REGIONAL PIURA
SyS-CU GOBIERN|
|NO RESyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO REGIONAL PIURA
SyS-CU GOBIER|
|RNO RESyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO REGIONAL PIURA
SyS-CU GOBIE|
|ERNO RESyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO REGIONAL PIURA
SyS-CU GOBI|
|IERNO RESyS-CU GOBIE??????????????????????????????????????????L PIURA
SyS-CU GOB|
|BIERNO RESyS-CU GOBI? SISTEMA DE COSTOS UNITARIOS - <SyS-CU>??AL PIURA
SyS-CU GO|
|??? Restore de Obras (Recupera de Respaldos)
???????????????????????????????????|
|? 

?|
|????????????????????????????????????????????????????????????????????????????????|
|? Indique Unidad/Ruta/NomArch
<U:\Ruta1\Ruta2\...\RutaN\NomArch>:              ?|
|?
E:470 

?|
|????????????????????????????????????????????????????????????????????????????????|
|S-CU GOBIERNO RESyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO REGIONAL
PIURA Sy|
|Error BASE/1002  Alias does not exist:
FUENTE                                   |
| 

|
|Error at ...: RESTOBRA(996) in Module:
Util.prg                                 |
|Called from : (b)CREA_MENU(82) in
Module:                                       |
|Called from : EXECUTE(432) in
Module:                                           |
|Called from : MENUMODAL(208) in Module:
Mm.prg                                  |
|Called from : MAIN(256) in Module:
Menu.prg                                     |
+--------------------------------------------------------------------------------+
**********************************

Can I do this in Harbor?

TIA
Best Regards
GVS


-------------- next part --------------
******************************* Error log file ********************************

Date ............: 14/04/2008
Time ............: 11:44:38
Available Memory : 626036
Multi Threading  : No
VM Optimization  : 0
Application      : Z:\CU\XSYSCU.EXE
Operating System : Windows XP Professional 5.01.2600 Service Pack 2
Compiler         : Borland C++ 5.5.1
xHarbour Version : xHarbour build 0.99.51 Intl. (SimpLex)
Build Date       : Nov 11 2005 19:09:49

-------------------------- Environmental Information --------------------------

Exact is ........: Off
Fixed is ........: Off
Decimals is at ..: 2
Date Format is ..: DD/MM/YYYY
Epoch is ........: 1900
Path is .........: 
Default is ......: 
Exclusive is ....: Off
SoftSeek is .....: Off
Unique is .......: Off
Deleted is ......: On
Cancel is .......: On
Debug is ........: False
Color is ........: N+/W,B+/BG,N/N,N/N,N+/W,R+/N,R/G,W+/B
Cursor is .......: 1
Console is ......: On
Alternate is ....: Off
AltFile is ......: 
Device is .......: SCREEN
Printer is ......: False
PrintFile is ....: PRN
Margin is .......: 0
Bell is .........: Off
Confirm is ......: Off
Escape is .......: On
Insert is .......: Off
Intensity is ....: On
Scoreboard is ...: Off
Delimeters is ...: Off
Delimchars is ...: ::
Wrap is .........: On
Message is ......: 23
MCenter is ......: On

===========================Detailed Work Area Items============================


++++++++++++++++++++ Internal Error Handling Information  +++++++++++++++++++++

Subsystem Call ..: BASE
System Code .....: 1002
Default Status ..: False
Description .....: Alias does not exist
Operation .......: FUENTE
Arguments .......: 
Involved File ...: 
Dos Error Code ..: 0

 Trace Through:
----------------
RESTOBRA              :     996 in Module: Util.prg
(b)CREA_MENU          :      82 in Module: 
EXECUTE               :     432 in Module: 
MENUMODAL             :     208 in Module: Mm.prg
MAIN                  :     256 in Module: Menu.prg


############################## Video Screen Dump ##############################

+--------------------------------------------------------------------------------+
|????????????????????????????????????????????????????????????????????????????????|
|SyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO RE|
|ESyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO R|
|RESyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO |
| RESyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO|
|O RESyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERN|
|NO RESyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIER|
|RNO RESyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIE|
|ERNO RESyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBI|
|IERNO RESyS-CU GOBIE??????????????????????????????????????????L PIURA SyS-CU GOB|
|BIERNO RESyS-CU GOBI? SISTEMA DE COSTOS UNITARIOS - <SyS-CU>??AL PIURA SyS-CU GO|
|??? Restore de Obras (Recupera de Respaldos) ???????????????????????????????????|
|?                                                                              ?|
|????????????????????????????????????????????????????????????????????????????????|
|? Indique Unidad/Ruta/NomArch <U:\Ruta1\Ruta2\...\RutaN\NomArch>:              ?|
|? E:470                                                                        ?|
|????????????????????????????????????????????????????????????????????????????????|
|S-CU GOBIERNO RESyS-CU GOBIERNO REGIONAL PIURA SyS-CU GOBIERNO REGIONAL PIURA Sy|
|Error BASE/1002  Alias does not exist: FUENTE                                   |
|                                                                                |
|Error at ...: RESTOBRA(996) in Module: Util.prg                                 |
|Called from : (b)CREA_MENU(82) in Module:                                       |
|Called from : EXECUTE(432) in Module:                                           |
|Called from : MENUMODAL(208) in Module: Mm.prg                                  |
|Called from : MAIN(256) in Module: Menu.prg                                     |
+--------------------------------------------------------------------------------+



From mbelgrano at deltain.it  Wed Jan  7 08:08:20 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Jan  7 08:08:23 2009
Subject: [Harbour] Difference harbour/xharbour about free VIRTUAL MEMORY
Message-ID: <609353e70901070508l716c80c4kfed35184c419f3c6@mail.gmail.com>

Can somebody confirm?
From: Andi Jahja <xharbour@...>
Subject: Re: Current CVS stable?
Newsgroups: gmane.comp.lang.xharbour.devel
Date: 2009-01-07 10:46:45 GMT (2 hours and 17 minutes ago)

Very stable! :-)

One important status now compared to Harbour :-):

 xHarbour gently free VIRTUAL MEMORY upon application exit while
 Harbour, at the present moment, does not.

 (As usual, I use MEMPROOF with BCC build to make a test.)

Congrats for the xHarbour crews!

--
Andi


-- 
Massimo Belgrano
From miguelangel at marchuet.net  Wed Jan  7 11:44:56 2009
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Jan  7 11:41:04 2009
Subject: [Harbour] ourxdbu free for all
Message-ID: <4964DC08.3040905@marchuet.net>

uploaded new version of ourxdbu

* Version 1.5.2
   + Added multilanguage support (spanish, french, polish, russian, portuguesse, and others )
   + Added vista skin
   + Added dbfnsx driver

download it from:

http://www.xharbour.com/xhc/index.asp?page=xhc_download_detail.asp&type=dl&id=78&show_i=7&show_sub=1

or from

http://sourceforge.net/projects/ourxdbu/

	
I DENY THE USE OF THIS APPLICATION TO THE CITIZENS TO ISRAEL TO STOP KILLING PEOPLE.

Best regards,
Miguel Angel Marchuet
From maurilio.longo at libero.it  Wed Jan  7 12:03:53 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Jan  7 12:03:57 2009
Subject: [Harbour] what can I use for these missing xharbour functions?
Message-ID: <4964E079.8060603@libero.it>

Hi,

I'm trying to build a program of mine I've developed under xharbour on harbour
and I've found a couple of "missing" functions:

..\lib/hbcurl.a(teasy.o): Undefined symbol _HB_FUN___CLSMSGASSIGNED referenced
from data segment
..\lib/hbcurl.a(hbcurl.o): Undefined symbol _hb_itemPutCLStatic referenced
from text segment
make: *** [ims] Error 1

Is there something I can use instead of them? In particular ClsMsgAssigned()
which is used to see if a subclass defines a message and, if this is the case,
call the message.

Best regards.

Maurilio.

PS. Note that hbcurl is not contrib\hbcurl available inside harbour svn.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From lorenzo.fiorini at gmail.com  Wed Jan  7 12:04:56 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jan  7 12:05:35 2009
Subject: [Harbour] -w3 optimizazion issue
Message-ID: <9257026e0901070904t78b0af0x52f47a81f61a2839@mail.gmail.com>

function main
local nVar := 0
nVar++
return nil

In the code above harbour returns:
testopt.prg:2:MAIN warning: W0032  Variable 'NVAR' is assigned but not
used in function '2:MAIN'

if I "fix" the warning removing ":= 0" with:

function main
local nVar
nVar++
return nil

I get no more messages but I the code stops with a RT error at line 3.

Is there any way to detect such situation?

best regards,
Lorenzo
From makis1970 at gmail.com  Wed Jan  7 12:05:54 2009
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Wed Jan  7 12:12:17 2009
Subject: [Harbour] -w3 optimizazion issue
In-Reply-To: <9257026e0901070904t78b0af0x52f47a81f61a2839@mail.gmail.com>
References: <9257026e0901070904t78b0af0x52f47a81f61a2839@mail.gmail.com>
Message-ID: <000c01c970ea$34cc4430$9e64cc90$@com>

Hi Lorenzo,
I think that in this example the warning is ok. You never used this
variable. As I can understand a variable is used only if it's a right
opponent of an expression or a function parameter (at least on first level
optimization).

Brgds
Mike Evans

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Lorenzo Fiorini
Sent: Wednesday, January 07, 2009 7:05 PM
To: Harbour Project Main Developer List.
Subject: [Harbour] -w3 optimizazion issue

function main
local nVar := 0
nVar++
return nil

In the code above harbour returns:
testopt.prg:2:MAIN warning: W0032  Variable 'NVAR' is assigned but not
used in function '2:MAIN'

if I "fix" the warning removing ":= 0" with:

function main
local nVar
nVar++
return nil

I get no more messages but I the code stops with a RT error at line 3.

Is there any way to detect such situation?

best regards,
Lorenzo
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Wed Jan  7 12:27:54 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jan  7 12:28:26 2009
Subject: [Harbour] -w3 optimizazion issue
In-Reply-To: <000c01c970ea$34cc4430$9e64cc90$@com>
References: <9257026e0901070904t78b0af0x52f47a81f61a2839@mail.gmail.com>
	<000c01c970ea$34cc4430$9e64cc90$@com>
Message-ID: <9257026e0901070927v5487202bjcb7caba26bab5b3e@mail.gmail.com>

On Wed, Jan 7, 2009 at 6:05 PM, Mike Evans (Gmail) <makis1970@gmail.com> wrote:
> I think that in this example the warning is ok. You never used this
> variable. As I can understand a variable is used only if it's a right
> opponent of an expression or a function parameter (at least on first level
> optimization).

Yes, the warning is right but it drives to the wrong "fix".
It's nVar++ the "more" useless code or at least both are useless.

What I mean is that with the local nVar := 0 it gives the warning but
it works while without it it says nothing but it doesn't work.

best regards,
Lorenzo
From maurilio.longo at libero.it  Wed Jan  7 12:44:37 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Jan  7 12:44:40 2009
Subject: [Harbour] #unSomething
Message-ID: <4964EA05.8040008@libero.it>

Hi,

I'm using these two commands inside a .ch file on xharbour, harbour gives an
error when it encounters them

#xuntranslate CINIT
#uncommand __DEFINE__

telling me that #xuntranslate and xuncommand miss a => in their definition.

Are they not supported on harbour or am I missing something?

Thanks a lot.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From teo at windtelsoft.com  Wed Jan  7 00:22:31 2009
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Wed Jan  7 13:08:35 2009
Subject: [Harbour] what can I use for these missing xharbour functions?
In-Reply-To: <4964E079.8060603@libero.it>
References: <4964E079.8060603@libero.it>
Message-ID: <200901062322.31771.teo@windtelsoft.com>

On Wednesday 07 January 2009 11:03:53 Maurilio Longo wrote:
> Hi,
>
> I'm trying to build a program of mine I've developed under xharbour on
> harbour and I've found a couple of "missing" functions:
>
> ..\lib/hbcurl.a(teasy.o): Undefined symbol _HB_FUN___CLSMSGASSIGNED
> referenced from data segment
> ..\lib/hbcurl.a(hbcurl.o): Undefined symbol _hb_itemPutCLStatic referenced
> from text segment
> make: *** [ims] Error 1
>
> Is there something I can use instead of them? In particular
> ClsMsgAssigned() which is used to see if a subclass defines a message and,
> if this is the case, call the message.

Hello Maurilio,

Try to use __objHasMsg() to substitute __clsMsgAssigned().

For hb_itemPutCLStatic() try to use hb_itemPutCL().

best regards,

Teo
From teo at windtelsoft.com  Wed Jan  7 00:30:34 2009
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Wed Jan  7 13:17:05 2009
Subject: [Harbour] How to generate ERROR.LOG file with details of the
	failure of run-time errors?
In-Reply-To: <4964A925.7040703@ec-red.com>
References: <4964A925.7040703@ec-red.com>
Message-ID: <200901062330.34762.teo@windtelsoft.com>

On Wednesday 07 January 2009 07:07:49 Guillermo Varona Silup? wrote:
> In xHarbour ever happens a runtime error, it generates a file named
> Error.log contains:
>
> ******************************* Error log file
> ********************************
[snip]
> +--------------------------------------------------------------------------
>------+ **********************************
>
> Can I do this in Harbor?

Hello Guillermo,

To get that long-long error log in Harbour you need to implement it on the 
harbour's errorsys.prg. Check how xHarbour does it in their errorsys.prg

Maybe you just need to substitute the harbour's errorsys.prg file with the 
xHarbour one.


best regards,

Teo
From maurilio.longo at libero.it  Wed Jan  7 13:26:25 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Jan  7 13:26:32 2009
Subject: [Harbour] what can I use for these missing xharbour functions?
In-Reply-To: <200901062322.31771.teo@windtelsoft.com>
References: <4964E079.8060603@libero.it>
	<200901062322.31771.teo@windtelsoft.com>
Message-ID: <4964F3D1.4000209@libero.it>

Teo Fonrouge wrote:
> 
> Try to use __objHasMsg() to substitute __clsMsgAssigned().
> 
Teo, thanks, but I need to know if a subclass implements a message which is
virtual in the parent class. I think that __objHasMessage() returns true even
if the subclass does not implement it.

> For hb_itemPutCLStatic() try to use hb_itemPutCL().
> 
> best regards,
Ok, thanks a lot.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From makis1970 at gmail.com  Wed Jan  7 13:29:42 2009
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Wed Jan  7 13:36:15 2009
Subject: [Harbour] -w3 optimizazion issue
In-Reply-To: <9257026e0901070927v5487202bjcb7caba26bab5b3e@mail.gmail.com>
References: <9257026e0901070904t78b0af0x52f47a81f61a2839@mail.gmail.com>	<000c01c970ea$34cc4430$9e64cc90$@com>
	<9257026e0901070927v5487202bjcb7caba26bab5b3e@mail.gmail.com>
Message-ID: <001001c970f5$e99f27f0$bcdd77d0$@com>

The right fix is to delete every nvar in your function (as far as I can
understand), but in general if you remove the assignment it will be nice if
the compiler return an error that you are making a concatenation -
calculation on a non initialized variable. I think that something like that
it will be nice as we will have a lot less runtime errors due to bad coding.


Brgds
Mike Evans

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Lorenzo Fiorini
Sent: Wednesday, January 07, 2009 7:28 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] -w3 optimizazion issue

On Wed, Jan 7, 2009 at 6:05 PM, Mike Evans (Gmail) <makis1970@gmail.com>
wrote:
> I think that in this example the warning is ok. You never used this
> variable. As I can understand a variable is used only if it's a right
> opponent of an expression or a function parameter (at least on first level
> optimization).

Yes, the warning is right but it drives to the wrong "fix".
It's nVar++ the "more" useless code or at least both are useless.

What I mean is that with the local nVar := 0 it gives the warning but
it works while without it it says nothing but it doesn't work.

best regards,
Lorenzo
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From teo at windtelsoft.com  Wed Jan  7 02:09:52 2009
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Wed Jan  7 15:02:01 2009
Subject: [Harbour] what can I use for these missing xharbour functions?
In-Reply-To: <4964F3D1.4000209@libero.it>
References: <4964E079.8060603@libero.it>
	<200901062322.31771.teo@windtelsoft.com>
	<4964F3D1.4000209@libero.it>
Message-ID: <200901070109.52473.teo@windtelsoft.com>

On Wednesday 07 January 2009 12:26:25 Maurilio Longo wrote:
> Teo Fonrouge wrote:
> > Try to use __objHasMsg() to substitute __clsMsgAssigned().
>
> Teo, thanks, but I need to know if a subclass implements a message which is
> virtual in the parent class. I think that __objHasMessage() returns true
> even if the subclass does not implement it.

Maurilio,

Please check with last SVN the __objHasMsgAssigned() function, it is supposed 
to be similar to xHarbour's __clsMsgAssigned().

[snip]

best regards,

Teo
From teo at windtelsoft.com  Wed Jan  7 02:11:08 2009
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Wed Jan  7 15:02:56 2009
Subject: [Harbour] 2009-01-07 13:52 UTC-0600 Teo Fonrouge
	(teo/at/windtelsoft/dot/com)
Message-ID: <200901070111.08700.teo@windtelsoft.com>

  * source/vm/classes.c
    + addded __objHasMsgAssigned( object, "msgName" )
      ; this is similar to xHarbour __clsMsgAssigned() and checks
      ; if a VIRTUAL message has been overrided in a sub-class.
      ; TODO: Please check this implementation, I'm sure it can be optimized.

best regards,

Teo
From lorenzo.fiorini at gmail.com  Wed Jan  7 15:07:24 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jan  7 15:07:27 2009
Subject: [Harbour] -w3 optimizazion issue
In-Reply-To: <001001c970f5$e99f27f0$bcdd77d0$@com>
References: <9257026e0901070904t78b0af0x52f47a81f61a2839@mail.gmail.com>
	<000c01c970ea$34cc4430$9e64cc90$@com>
	<9257026e0901070927v5487202bjcb7caba26bab5b3e@mail.gmail.com>
	<001001c970f5$e99f27f0$bcdd77d0$@com>
Message-ID: <9257026e0901071207q7bec64e2x896fd2a115b78c63@mail.gmail.com>

On Wed, Jan 7, 2009 at 7:29 PM, Mike Evans (Gmail) <makis1970@gmail.com> wrote:

> The right fix is to delete every nvar in your function (as far as I can
> understand), but in general if you remove the assignment it will be nice if
> the compiler return an error that you are making a concatenation -
> calculation on a non initialized variable. I think that something like that
> it will be nice as we will have a lot less runtime errors due to bad coding.

This code is valid:

function main
local nVar := 0
nVar++
return nVar

because nVar is used "after" the nVar++ so if a warning has to be
issued it should point to nVar++ not local nVar := 0. Note that after
deleting nVar++ local nVar := 0 become useless also.

best regards,
Lorenzo
From zen25000 at zen.co.uk  Wed Jan  7 15:37:20 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Wed Jan  7 15:37:28 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
Message-ID: <21339751.post@talk.nabble.com>


I am building an application to run in Mandriva Linux that needs com port
functions as in Clipper tools. I have built an xhgtk GUI front end which is
now working fine thanks to help here. I am now trying to use the functions
in telepath.prg to provide the com functions.
I have tested telepath.prg with the original testtp.prg and a loopback plug,
but it fails, so to check whether it is failing on both send and receive I
did the following:-
I tested my com port with a loopback and a port test program built from
source in Linux and it works.
I have an old laptop with a terminal emulation program (mine in Clipper)
that also works OK with the loopback.
The port test program in Linux talks to the laptop and vice versa via a null
modem cable.
However my test program (below) does not send OR receive. Baud rate parity
etc. OK.
The only modifications I have made to hbtpathy.prg  are small debug prints
to screen and a delay function to replace ThreadSleep() which may be a
problem. I have made a small test program to send single characters and
check the receive buffer at each key press:-

function main
tp_open( 1,, 9600, 8, "N", 1 )
  do while !LASTKEY()=27
    tp_send( 1, CHR(LASTKEY()))
    tp_delay(0.5)           //uses ThreadSleep()
    ? tp_recv( 1 )
    inkey(0)
  enddo
tp_Close( 1 )
return nil

function ThreadSleep ( millisecs )
secs = millisecs/1000
now = seconds()
DO WHILE seconds()<now+secs
ENDDO
return nil

I have compiled and linked the test program as follows:-

[baz@jackodesktop hbr]$ hbcmp -gc -n telepath.prg
Harbour 1.1.0dev (Rev. 9956)
Copyright (c) 1999-2008, http://www.harbour-project.org/
Compiling 'telepath.prg'...
Lines 1137, Functions/Procedures 31
Generating C source output to 'telepath.c'... Done.

[baz@jackodesktop hbr]$ hbcmp -gc testtp.prg
Harbour 1.1.0dev (Rev. 9956)
Copyright (c) 1999-2008, http://www.harbour-project.org/
Compiling 'testtp.prg'...
Lines 19, Functions/Procedures 3
Generating C source output to 'testtp.c'... Done.

[baz@jackodesktop hbr]$ hbcc testtp.c telepath.c tpcommon.c tplinux.c
[baz@jackodesktop hbr]$

Then with loopback plug connected :-

[baz@jackodesktop hbr]$ a.out

Send String =                                                      
FetchChars =                           // from debug line added to function
fetchchars
Handle          3                         // debug line added to function
fetchchars
Recv string =                           // first loop should fetch nothing
                                            // Hit key "a"
Send String = a
FetchChars =
Handle          3
Recv string =                           //this should receive "a"


I admit that I have now hit a brick wall with this. 
I have stepped through in debug as far as I can.
Any help would be appreciated. Has anyone used telepath functions 
in Linux who could send me some working code to test in Mandriva?
Anyone got any debugging ideas? 
Thanks in advance.
-- 
View this message in context: http://www.nabble.com/Using--contrib-hbtpathy-fuctions-in-Linux-tp21339751p21339751.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From gvarona at ec-red.com  Wed Jan  7 15:44:52 2009
From: gvarona at ec-red.com (=?UTF-8?B?R3VpbGxlcm1vIFZhcm9uYSBTaWx1cMO6?=)
Date: Wed Jan  7 15:44:56 2009
Subject: [Harbour] How to generate ERROR.LOG file with details of the
	failure of run-time errors?
In-Reply-To: <200901062330.34762.teo@windtelsoft.com>
References: <4964A925.7040703@ec-red.com>
	<200901062330.34762.teo@windtelsoft.com>
Message-ID: <49651444.5010905@ec-red.com>

Teo Fonrouge escribi?:
> On Wednesday 07 January 2009 07:07:49 Guillermo Varona Silup? wrote:
>   
>> In xHarbour ever happens a runtime error, it generates a file named
>> Error.log contains:
>>
>> ******************************* Error log file
>> ********************************
>>     
> [snip]
>   
>> +--------------------------------------------------------------------------
>> ------+ **********************************
>>
>> Can I do this in Harbor?
>>     
>
> Hello Guillermo,
>
> To get that long-long error log in Harbour you need to implement it on the 
> harbour's errorsys.prg. Check how xHarbour does it in their errorsys.prg
>
> Maybe you just need to substitute the harbour's errorsys.prg file with the 
> xHarbour one.
>   
Ok. Thanks. try to implement

Best Regards
GVS
From rportnoff at spendmap.com  Wed Jan  7 15:57:46 2009
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Wed Jan  7 15:57:49 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
In-Reply-To: <21339751.post@talk.nabble.com>
References: <21339751.post@talk.nabble.com>
Message-ID: <B0085876032@ms1.3peaks.com>

Hi Barry,

I can't help you with your problem but I do have two comments 
regarding your ThreadSleep() function:

1. I do not think that this will sleep the thread (unless Harbour 
does something which I doubt it does) - You need to make a call in 
this loop to explicitly sleep the thread. For example:

DO WHILE seconds()<now+secs
     ReleaseCPU()
ENDDO

2. Your function will hang if it is called near midnight.

Randy.


At 03:37 PM 1/7/2009, you wrote:

>I am building an application to run in Mandriva Linux that needs com port
>functions as in Clipper tools. I have built an xhgtk GUI front end which is
>now working fine thanks to help here. I am now trying to use the functions
>in telepath.prg to provide the com functions.
>I have tested telepath.prg with the original testtp.prg and a loopback plug,
>but it fails, so to check whether it is failing on both send and receive I
>did the following:-
>I tested my com port with a loopback and a port test program built from
>source in Linux and it works.
>I have an old laptop with a terminal emulation program (mine in Clipper)
>that also works OK with the loopback.
>The port test program in Linux talks to the laptop and vice versa via a null
>modem cable.
>However my test program (below) does not send OR receive. Baud rate parity
>etc. OK.
>The only modifications I have made to hbtpathy.prg  are small debug prints
>to screen and a delay function to replace ThreadSleep() which may be a
>problem. I have made a small test program to send single characters and
>check the receive buffer at each key press:-
>
>function main
>tp_open( 1,, 9600, 8, "N", 1 )
>   do while !LASTKEY()=27
>     tp_send( 1, CHR(LASTKEY()))
>     tp_delay(0.5)           //uses ThreadSleep()
>     ? tp_recv( 1 )
>     inkey(0)
>   enddo
>tp_Close( 1 )
>return nil
>
>function ThreadSleep ( millisecs )
>secs = millisecs/1000
>now = seconds()
>DO WHILE seconds()<now+secs
>ENDDO
>return nil
>
>I have compiled and linked the test program as follows:-
>
>[baz@jackodesktop hbr]$ hbcmp -gc -n telepath.prg
>Harbour 1.1.0dev (Rev. 9956)
>Copyright (c) 1999-2008, http://www.harbour-project.org/
>Compiling 'telepath.prg'...
>Lines 1137, Functions/Procedures 31
>Generating C source output to 'telepath.c'... Done.
>
>[baz@jackodesktop hbr]$ hbcmp -gc testtp.prg
>Harbour 1.1.0dev (Rev. 9956)
>Copyright (c) 1999-2008, http://www.harbour-project.org/
>Compiling 'testtp.prg'...
>Lines 19, Functions/Procedures 3
>Generating C source output to 'testtp.c'... Done.
>
>[baz@jackodesktop hbr]$ hbcc testtp.c telepath.c tpcommon.c tplinux.c
>[baz@jackodesktop hbr]$
>
>Then with loopback plug connected :-
>
>[baz@jackodesktop hbr]$ a.out
>
>Send String =
>FetchChars =                           // from debug line added to function
>fetchchars
>Handle          3                         // debug line added to function
>fetchchars
>Recv string =                           // first loop should fetch nothing
>                                             // Hit key "a"
>Send String = a
>FetchChars =
>Handle          3
>Recv string =                           //this should receive "a"
>
>
>I admit that I have now hit a brick wall with this.
>I have stepped through in debug as far as I can.
>Any help would be appreciated. Has anyone used telepath functions
>in Linux who could send me some working code to test in Mandriva?
>Anyone got any debugging ideas?
>Thanks in advance.
>--
>View this message in context: 
>http://www.nabble.com/Using--contrib-hbtpathy-fuctions-in-Linux-tp21339751p21339751.html
>Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour


From zen25000 at zen.co.uk  Wed Jan  7 16:26:19 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Wed Jan  7 16:26:53 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
In-Reply-To: <B0085876032@ms1.3peaks.com>
References: <21339751.post@talk.nabble.com> <B0085876032@ms1.3peaks.com>
Message-ID: <21340671.post@talk.nabble.com>


Thanks Randy,
I wondered about that but did not know of a way to implement ThreadSleep().
I have tried to use your suggestion but without documentation I can't find
the lib for 
ReleaseCPU() :-
undefined reference to `HB_FUN_RELEASECPU'
Where can I find a full listing of Harbour functions etc. the site only
seems to list the basics?

Barry


Randy Portnoff-2 wrote:
> I do not think that this will sleep the thread
> Hi Barry,
> 
> I can't help you with your problem but I do have two comments 
> regarding your ThreadSleep() function:
> 
> 1. I do not think that this will sleep the thread (unless Harbour 
> does something which I doubt it does) - You need to make a call in 
> this loop to explicitly sleep the thread. For example:
> 
> DO WHILE seconds()<now+secs
>      ReleaseCPU()
> ENDDO
> 
> 2. Your function will hang if it is called near midnight.
> 
> Randy.
> 
> 
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Using--contrib-hbtpathy-fuctions-in-Linux-tp21339751p21340671.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From rportnoff at spendmap.com  Wed Jan  7 16:31:15 2009
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Wed Jan  7 16:31:17 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
In-Reply-To: <21340671.post@talk.nabble.com>
References: <21339751.post@talk.nabble.com> <B0085876032@ms1.3peaks.com>
	<21340671.post@talk.nabble.com>
Message-ID: <B0085876763@ms1.3peaks.com>

Sorry, the function is called hb_ReleaseCPU() - It is defined in 
IDLE.C as follows:

/* Release a CPU time slice */
HB_FUNC( HB_RELEASECPU )
{
    hb_releaseCPU();
}


At 04:26 PM 1/7/2009, you wrote:

>Thanks Randy,
>I wondered about that but did not know of a way to implement ThreadSleep().
>I have tried to use your suggestion but without documentation I can't find
>the lib for
>ReleaseCPU() :-
>undefined reference to `HB_FUN_RELEASECPU'
>Where can I find a full listing of Harbour functions etc. the site only
>seems to list the basics?
>
>Barry
>
>
>Randy Portnoff-2 wrote:
> > I do not think that this will sleep the thread
> > Hi Barry,
> >
> > I can't help you with your problem but I do have two comments
> > regarding your ThreadSleep() function:
> >
> > 1. I do not think that this will sleep the thread (unless Harbour
> > does something which I doubt it does) - You need to make a call in
> > this loop to explicitly sleep the thread. For example:
> >
> > DO WHILE seconds()<now+secs
> >      ReleaseCPU()
> > ENDDO
> >
> > 2. Your function will hang if it is called near midnight.
> >
> > Randy.
> >
> >
> >
> >
> >
>
>--
>View this message in context: 
>http://www.nabble.com/Using--contrib-hbtpathy-fuctions-in-Linux-tp21339751p21340671.html
>Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour


From maurilio.longo at libero.it  Wed Jan  7 16:32:43 2009
From: maurilio.longo at libero.it (maurilio longo)
Date: Wed Jan  7 16:32:48 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
Message-ID: <KD4EIJ$B4C9DD1D8F0FBFEE83B7F7D23806A557@libero.it>


Barry,

I'm not sure, I don't have telepathy help at hand, but

> 
> function main
> tp_open( 1,, 9600, 8, "N", 1 )

tp_open( port, input-buffer size, output-buffer size, speed...

so it lacks a comma and as such 9600 is not port speed and all the other parameters are wrong as well.

But, I have to check with the help and the source which I don't have here.

best regards.

Maurilio.



>   do while !LASTKEY()=27
>     tp_send( 1, CHR(LASTKEY()))
>     tp_delay(0.5)           //uses ThreadSleep()
>     ? tp_recv( 1 )
>     inkey(0)
>   enddo
> tp_Close( 1 )
> return nil
> 
> function ThreadSleep ( millisecs )
> secs = millisecs/1000
> now = seconds()
> DO WHILE seconds()<now+secs
> ENDDO
> return nil
> 
> I have compiled and linked the test program as follows:-
> 
> [baz@jackodesktop hbr]$ hbcmp -gc -n telepath.prg
> Harbour 1.1.0dev (Rev. 9956)
> Copyright (c) 1999-2008, http://www.harbour-project.org/
> Compiling 'telepath.prg'...
> Lines 1137, Functions/Procedures 31
> Generating C source output to 'telepath.c'... Done.
> 
> [baz@jackodesktop hbr]$ hbcmp -gc testtp.prg
> Harbour 1.1.0dev (Rev. 9956)
> Copyright (c) 1999-2008, http://www.harbour-project.org/
> Compiling 'testtp.prg'...
> Lines 19, Functions/Procedures 3
> Generating C source output to 'testtp.c'... Done.
> 
> [baz@jackodesktop hbr]$ hbcc testtp.c telepath.c tpcommon.c tplinux.c
> [baz@jackodesktop hbr]$
> 
> Then with loopback plug connected :-
> 
> [baz@jackodesktop hbr]$ a.out
> 
> Send String =                                                      
> FetchChars =                           // from debug line added to function
> fetchchars
> Handle          3                         // debug line added to function
> fetchchars
> Recv string =                           // first loop should fetch nothing
>                                             // Hit key "a"
> Send String = a
> FetchChars =
> Handle          3
> Recv string =                           //this should receive "a"
> 
> 
> I admit that I have now hit a brick wall with this. 
> I have stepped through in debug as far as I can.
> Any help would be appreciated. Has anyone used telepath functions 
> in Linux who could send me some working code to test in Mandriva?
> Anyone got any debugging ideas? 
> Thanks in advance.
> -- 
> View this message in context: http://www.nabble.com/Using--contrib-hbtpathy-fuctions-in-Linux-tp21339751p21339751.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

From zen25000 at zen.co.uk  Wed Jan  7 17:33:46 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Wed Jan  7 17:34:20 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
In-Reply-To: <B0085876763@ms1.3peaks.com>
References: <21339751.post@talk.nabble.com> <B0085876032@ms1.3peaks.com>
	<21340671.post@talk.nabble.com> <B0085876763@ms1.3peaks.com>
Message-ID: <21341309.post@talk.nabble.com>


Randy: That's better, it compiled and linked OK - thanks.
Still not working though.

Marilio: I just got your reply - thanks you are right I missed a ","
compared to the testtp.prg in contrib.
I have run my test with and without Randy's ReleaseCPU() in the delay loop
and still no output using the loopback. The "Recv String=" is outputting the
tp_recv return value just before the function returns it.
So test is now :-

function main
tp_open( 1,,,9600, 8, "N", 1 )
  do while !LASTKEY()=27
    tp_send( 1, CHR(LASTKEY()))
    tp_delay(0.5)
    ? tp_recv( 1 )
    inkey(0)
  enddo
tp_Close( 1 )
return nil

function ThreadSleep ( millisecs )
secs = millisecs/1000
now = seconds()
DO WHILE seconds()<now+secs
hb_ReleaseCPU()                      //randy
ENDDO
return nil

Any other thoughts?

> > function main
> > tp_open( 1,, 9600, 8, "N", 1 )

> > tp_open( port, input-buffer size, output-buffer size, speed...

> > so it lacks a comma and as such 9600 is not port speed and all the other
> parameters are wrong as 
> > well.


Sorry, the function is called hb_ReleaseCPU() - It is defined in 
IDLE.C as follows:

/* Release a CPU time slice */
HB_FUNC( HB_RELEASECPU )
{
    hb_releaseCPU();
}



-- 
View this message in context: http://www.nabble.com/Using--contrib-hbtpathy-fuctions-in-Linux-tp21339751p21341309.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From zen25000 at zen.co.uk  Wed Jan  7 18:32:56 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Wed Jan  7 18:33:29 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
In-Reply-To: <21341309.post@talk.nabble.com>
References: <21339751.post@talk.nabble.com> <B0085876032@ms1.3peaks.com>
	<21340671.post@talk.nabble.com> <B0085876763@ms1.3peaks.com>
	<21341309.post@talk.nabble.com>
Message-ID: <21342842.post@talk.nabble.com>


Marilio,
I just tested with the laptop and hbtpathy is now receiving - only - hence
the loopback fail.

Send String = g
FetchChars = ffff
Handle          3
Recv string = ffff
ffff

So we are half way there!
Pity it's this way round as my application only needs to send !

Barry
-- 
View this message in context: http://www.nabble.com/Using--contrib-hbtpathy-fuctions-in-Linux-tp21339751p21342842.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bruno.luciani at gmail.com  Wed Jan  7 20:23:58 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Wed Jan  7 20:24:02 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
In-Reply-To: <21342842.post@talk.nabble.com>
References: <21339751.post@talk.nabble.com> <B0085876032@ms1.3peaks.com>
	<21340671.post@talk.nabble.com> <B0085876763@ms1.3peaks.com>
	<21341309.post@talk.nabble.com> <21342842.post@talk.nabble.com>
Message-ID: <133778360901071723k1f89be4at170928f563de38b1@mail.gmail.com>

Barry , try this library


http://www.carozodequilmes.com.ar/Projects/QAC/hbcomm.lib.htm

this page its part of

http://www.carozodequilmes.com.ar/Projects/QAC/_Index_QAC.htm

It 's in spanish but the code in zip it's comented in english

Bruno





2009/1/7 Barry Jackson <zen25000@zen.co.uk>:
>
> Marilio,
> I just tested with the laptop and hbtpathy is now receiving - only - hence
> the loopback fail.
>
> Send String = g
> FetchChars = ffff
> Handle          3
> Recv string = ffff
> ffff
>
> So we are half way there!
> Pity it's this way round as my application only needs to send !
>
> Barry
> --
> View this message in context: http://www.nabble.com/Using--contrib-hbtpathy-fuctions-in-Linux-tp21339751p21342842.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From niki at synel.co.il  Thu Jan  8 02:39:26 2009
From: niki at synel.co.il (Chen Kedem)
Date: Thu Jan  8 02:41:56 2009
Subject: [Harbour] Re: ourxdbu free for all
Message-ID: <1A07FEDC778C3E4AA417F089511F859C04192DDD07@Mail-yoq.SYNEL-COMPANY.LTD>

Miguel,

> I DENY THE USE OF THIS APPLICATION TO THE CITIZENS TO ISRAEL TO STOP KILLING PEOPLE.

I am furious that you are mixing politics with the Harbour project!
This is NOT a political group, and adding such notes degrade the
community efforts to help people all over the world, regardless of
their physical location, or country of origin.

I am only going to reply on this issue once; this is not the scope
of this group to such arguments.

You don?t know the whole details, cities in Israel are under fire
for more than 7 years, in that time Israel withdraw from the Gaza
strip, it did not stop the firing. On the past few moths there was
a cease-fire which was sort of accepted by both sides. Two weeks
ago it was the official date that end that agreement, Israel said
it want to continue with the cease-fire, we were answered with more
that 70 rockets on our cities. Do you think another country would
have sit and do nothing? Israel try to target offending military
targets, they aim to our cities. And when they fire from within a
school, the only way to stop the firing is shooting back to that
school. This is horrible, and children do get hurt, we have no
choice! Now they are hiding and operating their military actions
from their hospital, knowing we do care about such issues
(the Israeli hospital in Ashkelon was already targeted a few times,
I didn?t see any angry protests denouncing that).

Only two hours ago, the northern part of Israel was the target of
rockets attacks from the Lebanon side with no cause.

And as you deny your product from Israeli citizens, you are welcome
to yank out any Pentium class processor from your computers are it
was designed in Israel, you may probably need to do so to some of
the chips in your digital camera and mobile phone. I don?t see you
revoking these rights for American or British citizens for the acts
that their soldiers are doing in Afghanistan or Iraq, I don?t see
you ?punishing? Chinese citizens for the human right violations
their government does, you don?t have any issues with Russian and
Ukraine conflict, or the was in Sudan and other parts of Africa,
the Indian Pakistan tension, or the one between Central American
governments and the USA.

There are places suitable for expreesing such opinions, this is not one of them.

I am sorry for the Harbour community to post this very off-topic
here. My view is that the open source community should gap the
bridges between people, which in turn such help reducing all these
global conflicts and wars.



  Chen.
From maurilio.longo at libero.it  Thu Jan  8 03:02:03 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Jan  8 03:02:12 2009
Subject: [Harbour] 2009-01-07 13:52 UTC-0600 Teo
	Fonrouge	(teo/at/windtelsoft/dot/com)
In-Reply-To: <200901070111.08700.teo@windtelsoft.com>
References: <200901070111.08700.teo@windtelsoft.com>
Message-ID: <4965B2FB.6040605@libero.it>

Teo,

thanks so much! I'll test it asap.

Maurilio.

Teo Fonrouge wrote:
>   * source/vm/classes.c
>     + addded __objHasMsgAssigned( object, "msgName" )
>       ; this is similar to xHarbour __clsMsgAssigned() and checks
>       ; if a VIRTUAL message has been overrided in a sub-class.
>       ; TODO: Please check this implementation, I'm sure it can be optimized.
> 
> best regards,
> 
> Teo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Thu Jan  8 03:16:12 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Jan  8 03:16:17 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
In-Reply-To: <21342842.post@talk.nabble.com>
References: <21339751.post@talk.nabble.com>
	<B0085876032@ms1.3peaks.com>	<21340671.post@talk.nabble.com>
	<B0085876763@ms1.3peaks.com>	<21341309.post@talk.nabble.com>
	<21342842.post@talk.nabble.com>
Message-ID: <4965B64C.8080101@libero.it>

Barry,

I never used a loopbak device, I did attach a modem and send to it an ATIx
command which makes the modem answer back with some internal data/status.

I was even able to print to a serial printer from linux (an old mandrake).

That said, tp_xxx is just a prof of concept and it was not finished nor
polished because the project that should have used it never saw the light.

So, I'd look at the C code, is very simple, maybe you can put some printf()
there to see what happens at the low level.

I'd also try a tp_recv( 1, 1 ) // see second one, which is num of chars to wait.

Also, tp_recv() calls fetchchars() which calls p_ReadPort() which is the
function that does the real work and is written in C.

Hope this helps you in some way.

Maurilio.

Barry Jackson wrote:
> Marilio,
> I just tested with the laptop and hbtpathy is now receiving - only - hence
> the loopback fail.
> 
> Send String = g
> FetchChars = ffff
> Handle          3
> Recv string = ffff
> ffff
> 
> So we are half way there!
> Pity it's this way round as my application only needs to send !
> 
> Barry

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Thu Jan  8 05:42:52 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Jan  8 05:42:58 2009
Subject: [Harbour] 2009-01-07 13:52 UTC-0600 Teo
	Fonrouge	(teo/at/windtelsoft/dot/com)
In-Reply-To: <200901070111.08700.teo@windtelsoft.com>
References: <200901070111.08700.teo@windtelsoft.com>
Message-ID: <4965D8AC.7010002@libero.it>

Teo,

works wonderfully :)

Thanks a lot!

Maurilio.

Teo Fonrouge wrote:
>   * source/vm/classes.c
>     + addded __objHasMsgAssigned( object, "msgName" )
>       ; this is similar to xHarbour __clsMsgAssigned() and checks
>       ; if a VIRTUAL message has been overrided in a sub-class.
>       ; TODO: Please check this implementation, I'm sure it can be optimized.
> 
> best regards,
> 
> Teo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From zen25000 at zen.co.uk  Thu Jan  8 05:56:30 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Thu Jan  8 05:57:03 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
In-Reply-To: <133778360901071723k1f89be4at170928f563de38b1@mail.gmail.com>
References: <21339751.post@talk.nabble.com> <B0085876032@ms1.3peaks.com>
	<21340671.post@talk.nabble.com> <B0085876763@ms1.3peaks.com>
	<21341309.post@talk.nabble.com> <21342842.post@talk.nabble.com>
	<133778360901071723k1f89be4at170928f563de38b1@mail.gmail.com>
Message-ID: <21349708.post@talk.nabble.com>


Thanks Bruno,
I had a quick look but it seems to be Windows based - is it for Linux as
well?
If so I will look closer.
Cheers, Barry

Bugzilla from bruno.luciani@gmail.com wrote:
> 
> Barry , try this library
> 
> 
> http://www.carozodequilmes.com.ar/Projects/QAC/hbcomm.lib.htm
> 
> this page its part of
> 
> http://www.carozodequilmes.com.ar/Projects/QAC/_Index_QAC.htm
> 
> It 's in spanish but the code in zip it's comented in english
> 
> Bruno
> 
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/Using--contrib-hbtpathy-fuctions-in-Linux-tp21339751p21349708.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dbtopas at dbtopas.lt  Thu Jan  8 06:15:39 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Jan  8 06:17:44 2009
Subject: [Harbour] ChangeLog 2009-01-08 13:12 UTC+0200 Mindaugas Kavaliauskas
Message-ID: <4965E05B.9010703@dbtopas.lt>

2009-01-08 13:12 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * harbour/source/compiler/hbopt.c
     * improved 'variable assigned but unused' detection logic
   * harbour/source/rtl/treport.prg
     * fixed assigned but unused variable
From M.Horodyski at pzuzycie.com.pl  Thu Jan  8 06:22:16 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu Jan  8 06:22:21 2009
Subject: [Harbour] Compile tests with OpenWatcom.
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501BBFEE3@PINK.zycie.pzu>

I try work with OpenWacom 1.7 on Win32.
Positively create Harbor.exe (with a few errors in WVGWIN, thaks to
Massimo).
I have all libraries (lib files in folder C:\harbour\lib\w32\owatcom\.).

When trying to compile programs from a subdirectory tests using
bld_gnu.bat or hbmk_gnu.bat, unfortunately, I have such communications :

>>>>>>>>>>>
[... Snip many lines...]
loading object files
searching libraries
Warning! W1008: cannot open /hbdebug.lib : No such file or directory
[ snip 20 libs ]
Warning! W1008: cannot open /gtgui.lib : No such file or directory
Error! E2028: hb_vmProcessSymbolsEx_ is an undefined reference
[snip 12 an undefined reference]
Error! E2028: HB_FUN_QOUT_ is an undefined reference
Warning! W1023: no starting address found, using 00401000
creating a Windows NT character-mode executable
file atest.obj(c:\harbour\tests\w32\owatcom\atest.c): undefined symbol
hb_vmProcessSymbolsEx_
[snip 11 undefined symbol]
file atest.obj(c:\harbour\tests\w32\owatcom\atest.c): undefined symbol
hb_xvmExitProc_
file atest.obj(c:\harbour\tests\w32\owatcom\atest.c): undefined symbol
HB_FUN_QOUT_
make[1]: Leaving directory `c:/harbour/tests/w32/owatcom'
<<<<<<<<<<<<<<<

And aplication is not created.
Trouble begins after :
Warning! W1008: cannot open /hbdebug.lib : No such file or directory
Problem remains after copy libraries to c:\harbour\lib\..
My lib environment is :
c:\harbour\lib>set lib
LIB=C:\harbour\LIB;   

Contents of file c:\harbour\tests\w32\owatcom\__link__.tmp :
>>>>>>>>>>>
OP osn=NT OP stack=65536 OP CASEEXACT NAME atest.exe 
FILE atest.obj 
LIB /hbdebug 
[...snip 22 libs...]
LIB /gtgui 
@C:\WATCOM/binnt/wlink.lnk 
LIB kernel32.lib, user32.lib, wsock32.lib, winspool.lib, oleaut32.lib,
uuid.lib, comctl32.lib, mapi32.lib 
<<<<<<<<<<<

My version of make is :
make.exe -v                                              
GNU Make 3.81                                                      
Copyright (C) 2006  Free Software Foundation, Inc.                 
This is free software; see the source for copying conditions.      
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.                                                
                                                                   
This program built for i386-pc-mingw32                             


What is wrong ?

Regards,
Marek Horodyski
From dbtopas at dbtopas.lt  Thu Jan  8 06:21:21 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Jan  8 06:23:26 2009
Subject: [Harbour] 2009-01-05 13:33 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20090105123424.GA10302@34-mo7-2.acn.waw.pl>
References: <20090105123424.GA10302@34-mo7-2.acn.waw.pl>
Message-ID: <4965E1B1.6060402@dbtopas.lt>

Hi,


>   The following modifications were made by Viktor Szakats,
>   (2008-11-22 16:15 UTC+0100 - 2008-12-19 12:56 UTC+0100)

BTW, Viktor is absent on the list. What's happened?


Regards,
Mindaugas
From soporte at dsgsoftware.com  Thu Jan  8 06:42:17 2009
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Thu Jan  8 06:42:53 2009
Subject: [Harbour] PCode DLL
Message-ID: <001901c97186$419db260$6c01a8c0@PcJuanxp>

Hi all,

I'm trying to use a PCode DLL (without harbour.dll) with current SVN but it 
doesn't work :(

The DLL is generated and loaded correctly (it's created with maindllp.c and 
BCC58) but it seems that hb_vmProcessSymbolsEx() isn't able to locate 
hb_vmProcessDynLibSymbols().

Any help is welcome.

Best regards
Juan 

From M.Horodyski at pzuzycie.com.pl  Thu Jan  8 10:46:25 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu Jan  8 10:46:29 2009
Subject: [Harbour] Viktor - where are you
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501BC003C@PINK.zycie.pzu>

?
From zen25000 at zen.co.uk  Thu Jan  8 12:59:20 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Thu Jan  8 12:59:30 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
In-Reply-To: <4965B64C.8080101@libero.it>
References: <21339751.post@talk.nabble.com>	<B0085876032@ms1.3peaks.com>	<21340671.post@talk.nabble.com>	<B0085876763@ms1.3peaks.com>	<21341309.post@talk.nabble.com>	<21342842.post@talk.nabble.com>
	<4965B64C.8080101@libero.it>
Message-ID: <49663EF8.7060507@zen.co.uk>

Hi Maurilio,
I finally got it sorted! :-)
The problem on transmit was the lack of a time-out parameter for tp_send.
In telepathy.prg the time-out defaults to 0, so if no time-out parameter 
is passed
it will not send as it thinks it has already timed out.
The sample testtp.prg sends no parameter and can not work.
Either the default needs changing or testtp.prg needs a parameter adding.
I now have testtp.prg as :-
function main
   ?
   tp_open( 1,,, 9600, 8, "N", 1 )
   tp_send( 1, "Hi there Bob",1 )         // One second time-out
   tp_inkey( .5 )
   ? tp_recv( 1 )
   ?
   ?
   tp_Close( 1 )
return nil

function ThreadSleep ( millisecs )
secs = millisecs/1000
now = seconds()
DO WHILE seconds()<now+secs
hb_ReleaseCPU()
ENDDO
return nil

This now works with a loopback plug:-
[baz@jackodesktop hbr]$ a.out

Hi there Bob

[baz@jackodesktop hbr]$

However, strangely, it also works with a comma missing in tp_open(), 
probably because the same parameters are used in this test for transmit 
and receive.

What are your thoughts on the hb_ReleaseCPU() line? It does work without 
it, but I guess it probably hangs the machine for the duration of the delay.

Thanks everyone for your help - I can now get on with my project. :-)

Cheers,
Barry


Maurilio Longo wrote:
> Barry,
>
> I never used a loopbak device, I did attach a modem and send to it an ATIx
> command which makes the modem answer back with some internal data/status.
>
> I was even able to print to a serial printer from linux (an old mandrake).
>
> That said, tp_xxx is just a prof of concept and it was not finished nor
> polished because the project that should have used it never saw the light.
>
> So, I'd look at the C code, is very simple, maybe you can put some printf()
> there to see what happens at the low level.
>
> I'd also try a tp_recv( 1, 1 ) // see second one, which is num of chars to wait.
>
> Also, tp_recv() calls fetchchars() which calls p_ReadPort() which is the
> function that does the real work and is written in C.
>
> Hope this helps you in some way.
>
> Maurilio.
>
> Barry Jackson wrote:
>   
>> Marilio,
>> I just tested with the laptop and hbtpathy is now receiving - only - hence
>> the loopback fail.
>>
>> Send String = g
>> FetchChars = ffff
>> Handle          3
>> Recv string = ffff
>> ffff
>>
>> So we are half way there!
>> Pity it's this way round as my application only needs to send !
>>
>> Barry
>>     
>
>   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090108/c4d006f0/attachment.html
From maurilio.longo at libero.it  Thu Jan  8 13:15:11 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Jan  8 13:15:17 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
In-Reply-To: <49663EF8.7060507@zen.co.uk>
References: <21339751.post@talk.nabble.com>	<B0085876032@ms1.3peaks.com>	<21340671.post@talk.nabble.com>	<B0085876763@ms1.3peaks.com>	<21341309.post@talk.nabble.com>	<21342842.post@talk.nabble.com>	<4965B64C.8080101@libero.it>
	<49663EF8.7060507@zen.co.uk>
Message-ID: <496642AF.2080405@libero.it>

Barry,

good to know,

it can even been that my version has changes that I did not update to the svn,
sorry for this, I'll check out and, in case, update the svn.

Can you fix this in svn?

Best regards.

Maurilio.

Barry Jackson wrote:
> Hi Maurilio,
> I finally got it sorted! :-)
> The problem on transmit was the lack of a time-out parameter for tp_send.
> In telepathy.prg the time-out defaults to 0, so if no time-out parameter
> is passed
> it will not send as it thinks it has already timed out.
> The sample testtp.prg sends no parameter and can not work.
> Either the default needs changing or testtp.prg needs a parameter adding.
> I now have testtp.prg as :-
> function main
>    ?
>    tp_open( 1,,, 9600, 8, "N", 1 )
>    tp_send( 1, "Hi there Bob",1 )         // One second time-out
>    tp_inkey( .5 )
>    ? tp_recv( 1 )
>    ?
>    ?
>    tp_Close( 1 )
> return nil
> 
> function ThreadSleep ( millisecs )
> secs = millisecs/1000
> now = seconds()
> DO WHILE seconds()<now+secs
> hb_ReleaseCPU()
> ENDDO
> return nil
> 
> This now works with a loopback plug:-
> [baz@jackodesktop hbr]$ a.out
> 
> Hi there Bob
> 
> [baz@jackodesktop hbr]$
> 
> However, strangely, it also works with a comma missing in tp_open(),
> probably because the same parameters are used in this test for transmit
> and receive.
> 
> What are your thoughts on the hb_ReleaseCPU() line? It does work without
> it, but I guess it probably hangs the machine for the duration of the delay.
> 
> Thanks everyone for your help - I can now get on with my project. :-)
> 
> Cheers,
> Barry
> 
> 
> Maurilio Longo wrote:
>> Barry,
>>
>> I never used a loopbak device, I did attach a modem and send to it an ATIx
>> command which makes the modem answer back with some internal data/status.
>>
>> I was even able to print to a serial printer from linux (an old mandrake).
>>
>> That said, tp_xxx is just a prof of concept and it was not finished nor
>> polished because the project that should have used it never saw the light.
>>
>> So, I'd look at the C code, is very simple, maybe you can put some printf()
>> there to see what happens at the low level.
>>
>> I'd also try a tp_recv( 1, 1 ) // see second one, which is num of chars to wait.
>>
>> Also, tp_recv() calls fetchchars() which calls p_ReadPort() which is the
>> function that does the real work and is written in C.
>>
>> Hope this helps you in some way.
>>
>> Maurilio.
>>
>> Barry Jackson wrote:
>>   
>>> Marilio,
>>> I just tested with the laptop and hbtpathy is now receiving - only - hence
>>> the loopback fail.
>>>
>>> Send String = g
>>> FetchChars = ffff
>>> Handle          3
>>> Recv string = ffff
>>> ffff
>>>
>>> So we are half way there!
>>> Pity it's this way round as my application only needs to send !
>>>
>>> Barry
>>>     
>>
>>   
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From info at fsgiudice.com  Thu Jan  8 14:41:40 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Thu Jan  8 14:42:02 2009
Subject: [Harbour] ChangeLog 2009-01-08 13:12 UTC+0200 Mindaugas
	Kavaliauskas
In-Reply-To: <4965E05B.9010703@dbtopas.lt>
References: <4965E05B.9010703@dbtopas.lt>
Message-ID: <496656F4.3040406@fsgiudice.com>


Hi Mindaugas,

Il 08/01/2009 12.15, Mindaugas Kavaliauskas ha scritto:
> 2009-01-08 13:12 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
>   * harbour/source/compiler/hbopt.c
>     * improved 'variable assigned but unused' detection logic

in contrib/xhb I got:

.\cstruct.prg(461) Warning W0032  Variable 'COUNTER' is assigned but not 
used in function 'HB_CTYPEARRAYID(0)'

** error 1 ** deleting obj\b32\cstruct.obj


the other part of SVN compile correctly.

Best Regards

Francesco
From info at fsgiudice.com  Thu Jan  8 14:44:44 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Thu Jan  8 14:44:51 2009
Subject: [Harbour] ChangeLog 2009-01-08 13:12 UTC+0200
	Mindaugas	Kavaliauskas
In-Reply-To: <496656F4.3040406@fsgiudice.com>
References: <4965E05B.9010703@dbtopas.lt> <496656F4.3040406@fsgiudice.com>
Message-ID: <496657AC.9010700@fsgiudice.com>

Ops, sorry, I see the error, please ignore previous mail, also if it 
will be good to have a correct first line number signaled instead of (0).

Best Regards

Francesco

Il 08/01/2009 20.41, Francesco Saverio Giudice ha scritto:
> 
> Hi Mindaugas,
> 
> .\cstruct.prg(461) Warning W0032  Variable 'COUNTER' is assigned but not 
> used in function 'HB_CTYPEARRAYID(0)'
> 
> ** error 1 ** deleting obj\b32\cstruct.obj
> 
> 
> the other part of SVN compile correctly.
> 

From info at fsgiudice.com  Thu Jan  8 14:58:21 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Thu Jan  8 14:58:30 2009
Subject: [Harbour] Changelog 2009-01-08 20:55 UTC+0100 Francesco Saverio
	Giudice (info/at/fsgiudice.com)
Message-ID: <49665ADD.3030406@fsgiudice.com>

2009-01-08 20:55 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   * harbour/contrib/xhb/cstruct.prg
     * fixed assigned but unused variable

Best Regards

Francesco
From zen25000 at zen.co.uk  Thu Jan  8 16:03:49 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Thu Jan  8 16:04:02 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
In-Reply-To: <496642AF.2080405@libero.it>
References: <21339751.post@talk.nabble.com> <B0085876032@ms1.3peaks.com>
	<21340671.post@talk.nabble.com> <B0085876763@ms1.3peaks.com>
	<21341309.post@talk.nabble.com> <21342842.post@talk.nabble.com>
	<4965B64C.8080101@libero.it> <49663EF8.7060507@zen.co.uk>
	<496642AF.2080405@libero.it>
Message-ID: <21360901.post@talk.nabble.com>


Maurilio
No I can't do it - sorry.
I feel a bit guilty asking questions here, but the last answer anyone got in
the "user" list was in 2006! :-(

Cheers, Barry

Sorry abt direct email - mistake!


Maurilio Longo wrote:
> 
> Barry,
> 
> good to know,
> 
> it can even been that my version has changes that I did not update to the
> svn,
> sorry for this, I'll check out and, in case, update the svn.
> 
> Can you fix this in svn?
> 
> Best regards.
> 
> Maurilio.
> 
> Barry Jackson wrote:
>> Hi Maurilio,
>> I finally got it sorted! :-)
>> The problem on transmit was the lack of a time-out parameter for tp_send.
>> In telepathy.prg the time-out defaults to 0, so if no time-out parameter
>> is passed
>> it will not send as it thinks it has already timed out.
>> The sample testtp.prg sends no parameter and can not work.
>> Either the default needs changing or testtp.prg needs a parameter adding.
>> I now have testtp.prg as :-
>> function main
>>    ?
>>    tp_open( 1,,, 9600, 8, "N", 1 )
>>    tp_send( 1, "Hi there Bob",1 )         // One second time-out
>>    tp_inkey( .5 )
>>    ? tp_recv( 1 )
>>    ?
>>    ?
>>    tp_Close( 1 )
>> return nil
>> 
>> function ThreadSleep ( millisecs )
>> secs = millisecs/1000
>> now = seconds()
>> DO WHILE seconds()<now+secs
>> hb_ReleaseCPU()
>> ENDDO
>> return nil
>> 
>> This now works with a loopback plug:-
>> [baz@jackodesktop hbr]$ a.out
>> 
>> Hi there Bob
>> 
>> [baz@jackodesktop hbr]$
>> 
>> However, strangely, it also works with a comma missing in tp_open(),
>> probably because the same parameters are used in this test for transmit
>> and receive.
>> 
>> What are your thoughts on the hb_ReleaseCPU() line? It does work without
>> it, but I guess it probably hangs the machine for the duration of the
>> delay.
>> 
>> Thanks everyone for your help - I can now get on with my project. :-)
>> 
>> Cheers,
>> Barry
>> 
>> 
>> Maurilio Longo wrote:
>>> Barry,
>>>
>>> I never used a loopbak device, I did attach a modem and send to it an
>>> ATIx
>>> command which makes the modem answer back with some internal
>>> data/status.
>>>
>>> I was even able to print to a serial printer from linux (an old
>>> mandrake).
>>>
>>> That said, tp_xxx is just a prof of concept and it was not finished nor
>>> polished because the project that should have used it never saw the
>>> light.
>>>
>>> So, I'd look at the C code, is very simple, maybe you can put some
>>> printf()
>>> there to see what happens at the low level.
>>>
>>> I'd also try a tp_recv( 1, 1 ) // see second one, which is num of chars
>>> to wait.
>>>
>>> Also, tp_recv() calls fetchchars() which calls p_ReadPort() which is the
>>> function that does the real work and is written in C.
>>>
>>> Hope this helps you in some way.
>>>
>>> Maurilio.
>>>
>>> Barry Jackson wrote:
>>>   
>>>> Marilio,
>>>> I just tested with the laptop and hbtpathy is now receiving - only -
>>>> hence
>>>> the loopback fail.
>>>>
>>>> Send String = g
>>>> FetchChars = ffff
>>>> Handle          3
>>>> Recv string = ffff
>>>> ffff
>>>>
>>>> So we are half way there!
>>>> Pity it's this way round as my application only needs to send !
>>>>
>>>> Barry
>>>>     
>>>
>>>   
>> 
>> ------------------------------------------------------------------------
>> 
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> -- 
>  __________
> |  |  | |__| Maurilio Longo
> |_|_|_|____| farmaconsult s.r.l.
> 
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/Using--contrib-hbtpathy-fuctions-in-Linux-tp21339751p21360901.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From myorg63 at mail.ru  Thu Jan  8 17:28:46 2009
From: myorg63 at mail.ru (Petr Chornyj)
Date: Thu Jan  8 17:28:50 2009
Subject: [Harbour] Compile tests with OpenWatcom.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501BBFEE3@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501BBFEE3@PINK.zycie.pzu>
Message-ID: <21362353.post@talk.nabble.com>




Horodyski Marek (PZUZ) wrote:
> 
> I have all libraries (lib files in folder C:\harbour\lib\w32\owatcom\.).
> 
> 

Just try add one line in hbmk.bat

        echo FILE %_HB_PRG_NAME%.obj >> _hb_mk.tmp
==> echo LIBP C:\harbour\lib\w32\owatcom >> _hb_mk.tmp
        echo LIB hbcpage.lib >> _hb_mk.tmp

Regards,
Petr
-- 
View this message in context: http://www.nabble.com/Compile-tests-with-OpenWatcom.-tp21350100p21362353.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Thu Jan  8 18:53:08 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jan  8 18:49:44 2009
Subject: [Harbour] Re: Virtual machine comparison
In-Reply-To: <4961F6DF.5050203@dbtopas.lt>
References: <495A3E54.6080102@dbtopas.lt>
	<20081231125930.GA10423@34-mo7-2.acn.waw.pl>
	<495B7C2D.7040609@dbtopas.lt>
	<20081231160000.GA6389@34-mo7-2.acn.waw.pl>
	<4961F6DF.5050203@dbtopas.lt>
Message-ID: <20090108235308.GA2136@34-mo7-2.acn.waw.pl>

On Mon, 05 Jan 2009, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> After last changes comparison table is (no -ko flags used):
> No Test code               Harbour  PHP   Python Ruby   Java  Java+JIT
> ----------------------------------+------+------+------+------+-------+
>    10'000'000 times: 
> 11 nJ+=nI*2+17               4.61   3.41   6.54  25.53   1.36    0.08
> 12 nJ+=17+1+...+1+nI*2       4.61   6.10   6.62  45.86   1.36    0.08
> 13 nJ+=nI*2+17+1+...+1      10.86   5.95  12.96  45.78   1.92    0.17
>    200'000 times:
> 21 cI:=cI+"a"                0.08   6.70   0.11  25.80 1641.766 1650.437
> 22 cI+="a"                   0.08   0.07   0.12  25.83 1649.344 1654.735
> 31 AADD(aI,{nI})             0.16   0.29   0.32   0.20   0.76    0.40
> 32 AADD(aI,{aI[nI-1][1]+1})  0.25   0.34   0.38   0.39   0.92    0.40
> -----------------------------------------------------------------------
> So, we need to work on typed integer variable optimisation to be perfect :)

The -ko compiler switch will decrease the cost of 13 test above to 12
level. Why you didn't use it?

> Since, I do not know the compiler internals very well, I've started from 
> bison rules. Rewriting it to lemon parser was a good way to know internals 
> better. It took me more than a day of rewriting rules. But all this job 
> requires some changes in C code also. So, I'm not sure if these lemon rules 
> are useful at all, but the goal was to understand internals better. The 
> main differences (bison vs. lemon), I found:

I'm really under express of your job.

> 1) non-terminal symbol should be lowercase
> 2) terminal symbol can not be character. All ',', '(', ')' should be 
> changed to some define, like C_COMMA, C_LBRACKET, C_RBRACKET, etc. And 
> complex code has to be fixed to return these constants.

Mayby we can try to use common symbol values for PP and lexer to reduce
number of translations anyhow even adding some new one to existing code
is not a problem.

> 3) symbol : symbola symbolb symbolc
> has to be converted to
>    symbol ::= symbola symbolb symbolc
> 4) $$, $1, $2, ...
> has to be converted to explicitly defined X, A, B, ...
>    symbol(X) ::= symbola(A) symbolb(B)

what greatly increase readability and eliminates possible typos when
grammar rules have to be changed and indexes are not correctly updated
what is quite often problem with bison.

> 5) lemon passes the whole structure, not a union member as bison do. So:
> "%type <string> IdentName" and "$1", should be changed to:
> "%type identname {HB_EXPR_PTR}" and "A->string".

It's rather result of used syntax not low level constructions used on
grammar stack and here lemon rules are also more readable.

> 6) lemon does not allow multiple C code for single rule. You can specify a 
> single C code an the end of rule. So, you can not write rules:
> DefTwoParam : ParamOne AsType
>               { hb_compVariableAdd($1, HB_COMP_PARAM->cVarType); }
>               ',' ParamTwo AsType
>               { hb_compVariableAdd($5, HB_COMP_PARAM->cVarType); }
> This should be fixed by adding value to AsType non-terminal symbol instead 
> of "global" compiler variable cVarType.
> AsType : AS_NUMERIC { $$ = 'N'; }
> ...
> DefTwoParam : ParamOne AsType ',' ParamTwo AsType
>               { hb_compVariableAdd($1, $2);
>                 hb_compVariableAdd($4, $5); }

In theory is limitation but in practice it forces much more cleaner
rules because it's not possible to easy use such global hack like in
bison. It makes later code updating much easier. Specially when many
people have to work common project. Any global variables used in
bison grammar rules sooner or later creates some problems. For me
it's very good design decision. It also helps to create MT and reentrant
safe code.

> The problem is that AsType keeps its state in two global variables: 
> cVarType and szFromClass, so we can not store type in a simple integer 
> value and need to define a structure, collect these structures in some 
> list, etc. There are a few more global variables, like: iVarScope, etc.

Yes it is and even if we will want to still with bison then it will
be good to eliminate them. Though it does not mean that we will be
able to fully eliminate all global variables. In some places they
can be very usable and in some other they will be strictly necessary
f.e. stack index updated by statements which allocates stack items
for temporary variables and much easier and faster WITH OBJECT
implementation (technically WITH OBJECT is only unnamed temporary
variable).
There is also problem with syntax error reporting. In Clipper
END, ENDIF, ENDDO, NEXT, ENDCASE always closes the last statement
even if it's not valid clause and only error is reported, f.e.:

   FOR i:=1 to 2
      IF x
         ? "x"
      NEXT  // here error is reported and NEXT works like ENDIF
            // you can confim it if you put ENDIF in THIS line
   NEXT

Compiling this code generate in Clipper only one error. To reach
such effect we can add all closing statements to each defined statement
but the ones which are not valid will generate RT errors.
We can also use one global list common for all type of statemants and
do not define full grammar rules for them but only separated for simple
IF ..., FOR ..., WHILE ..., ... which will push new statement and
END, ENDIF, ENDDO, NEXT, ... which will pop last statement generating
error if necessary. ELSE, ELSEIF, CASE, ... will operate on last
statement in the list. Such list greatly simplify GOTO instructions
when some statements allocate VM stack. In our case LOOP and EXIT.
It's very easy to check if they can be used in some nested statements
and generate RT error or pop valid number of stack items allocated
by statements which are interrupted/exited. This version is usually
much easier to update when you want to extend language and introduce
some new constructions. Please also note that it allows to eliminate
a lot of { intermediate C code }.

> Sometimes a simple solution exists, definition of new non-terminal symbols, 
> i.e.
> DefTwoParam : ParamOne AsType DefTwoParam1 ',' ParamTwo AsType
>               { /* end C code */ }
> DefTwoParam1 : /*empty */ { /* middle C code */ }
> but the problem is that ParamOne is not accessible in "middle C code".
> 7) Bison allows access symbols not from current rule. Actually ParamOne 
> could be reached by $-1 from "middle C code", but these hacky solutions are 
> not allowed in lemon. There are 4 places containing hacky code in current 
> bison rules.

And should be eliminated. All negative indexes in grammar rules are
potentially source of problems.

> Now I would like more a way to implement parser rules rewriter instead of 
> rewriting rules by hand. Only some places (like $0) will need to be fixed 
> by hand.

I think that also some others, i.e. see above. Even if it's not strictly
necessary then it will make code cleaner, simpler and easier to update or
extend.

> ====================================================
> The problem with all these rule changes are:
> 1) lemon finds 39 collisions, but I'm unable to find a reason. (I guess 
> there 3 or 4 collisions, but symbols are used a few times, so it generate a 
> lot collisions).
> 2) I'm unable to do compiler changes in a small steps. So, I've ruined 
> compiler code without many chances to make it work.

This will be hard. Probably 1-st we should update current code for
bison. We can start with expression rules defined for macrocompiler
eliminate all negative indexes in expressions and then extend them
adding support for statements.
Please remember that compiler and macrocompiler have a lot of common code
so modification in compiler should be synced with macrocompiler.

> To create expression tree and generate pcode after exit from parser, needs 
> a lot of changes, but I can not find a good way to do it in a small steps.
> Maybe leaving existing code to do the job and creation of parallel 
> expression tree could be a solution. We need to duplicate expression tree 
> code. Later we can move expression optimisation and pcode generation to new 
> expression tree, and later drop current pcode generation code.

The things should look easier if we clean grammar rules and use single
statement list. This can be the 1-st step.
We can add support for lemon later. It took some work but finally using
bison2.3 with destructors and our own expression garbage collector with
protection against some bison bugs we finally have working MT safe code
without memory leaks so it's not such critical as it was in the past
though I still think it's worth to do.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Jan  8 19:24:57 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jan  8 19:21:32 2009
Subject: [Harbour] 2009-01-09 01:24 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090109002457.GA2892@34-mo7-2.acn.waw.pl>

2009-01-09 01:24 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/hbntos.c
  * harbour/source/rtl/hbrandom.c
    * removed dummy spaces

  * harbour/source/rtl/filesys.c
    * updated HB_TRACE messages

  * harbour/source/rdd/dbfntx/dbfntx1.c
  * harbour/source/rdd/dbfnsx/dbfnsx1.c
    * return pure index name without path and extension for DBOI_BAGNAME just
      like DBFCDX does. It's not Clipper compatible but looks that people
      expects ordBagName() behavior implemented in COMIX CDX driver (CL53).
      Full index name can be accessed by DBOI_FULLPATH.
      If you think it's wrong and we should keep CL52 DBFNTX behavior then
      I can revert it but I will want to also change DBFCDX to keep
      ordBagName() compatible core RDDs.
      Please let me know your preferences.

  * harbour/contrib/hbtpathy/telepath.prg
    ! replaced ThreadSleep() with hb_idleSleep()

best regards
Przemek
From druzus at acn.waw.pl  Thu Jan  8 19:33:55 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jan  8 19:30:30 2009
Subject: [Harbour] PCode DLL
In-Reply-To: <001901c97186$419db260$6c01a8c0@PcJuanxp>
References: <001901c97186$419db260$6c01a8c0@PcJuanxp>
Message-ID: <20090109003355.GB2136@34-mo7-2.acn.waw.pl>

On Thu, 08 Jan 2009, Juan G?lvez wrote:

Hi,

> I'm trying to use a PCode DLL (without harbour.dll) with current SVN but it 
> doesn't work :(
> The DLL is generated and loaded correctly (it's created with maindllp.c and 
> BCC58) but it seems that hb_vmProcessSymbolsEx() isn't able to locate 
> hb_vmProcessDynLibSymbols().
> Any help is welcome.

If you want to used PCODE DLLs with static Harbour binaries then you
have to compile Harbour exporting public symbols like for share
harbour library. It's enough to set HB_DYNLIB macro. F.e. by:
   set C_USR=-DHB_DYNLIB
then rebuild Harbour.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Jan  8 20:49:24 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jan  8 20:46:00 2009
Subject: [Harbour] 2009-01-05 13:33 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <4965E1B1.6060402@dbtopas.lt>
References: <20090105123424.GA10302@34-mo7-2.acn.waw.pl>
	<4965E1B1.6060402@dbtopas.lt>
Message-ID: <20090109014924.GA31651@34-mo7-2.acn.waw.pl>

On Thu, 08 Jan 2009, Mindaugas Kavaliauskas wrote:

Hi,

>>   The following modifications were made by Viktor Szakats,
>>   (2008-11-22 16:15 UTC+0100 - 2008-12-19 12:56 UTC+0100)
> BTW, Viktor is absent on the list. What's happened?

I received private message from Viktor about it before Christmas
but I do not have any permission to froward it. I think that Viktor
is reading this list at least periodically and if he will want
and have spare time then he can answer himself.

best regards,
Przemek
From mhsabado at gmail.com  Thu Jan  8 21:10:37 2009
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Thu Jan  8 21:10:56 2009
Subject: [Harbour] Hb_GtInfo( HB_GTI_CLOSABLE, .F. ) Not Working?
In-Reply-To: <49663161.060bca0a.1142.ffffe4c2SMTPIN_ADDED@mx.google.com>
References: <49663161.060bca0a.1142.ffffe4c2SMTPIN_ADDED@mx.google.com>
Message-ID: <4966B21D.7020009@gmail.com>


Hi,

I noticed time that below code does not disable the close button of my 
application.  Can somebody confirm?

 Hb_GtInfo( HB_GTI_CLOSABLE, .F. )

TIA,
Mario
From bedipritpal at hotmail.com  Thu Jan  8 21:54:39 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Jan  8 21:54:42 2009
Subject: [Harbour] Hb_GtInfo( HB_GTI_CLOSABLE, .F. ) Not Working?
In-Reply-To: <4966B21D.7020009@gmail.com>
References: <4966B21D.7020009@gmail.com>
Message-ID: <21365368.post@talk.nabble.com>


Hi


Mario H. Sabado wrote:
> 
> I noticed time that below code does not disable the close button of my 
> application.  Can somebody confirm?
> 
>  Hb_GtInfo( HB_GTI_CLOSABLE, .F. )
> 

It works perfectly. Which GT - GTWVT or GTWVG ?

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Hb_GtInfo%28-HB_GTI_CLOSABLE%2C-.F.-%29-Not-Working--tp21365000p21365368.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From soporte at dsgsoftware.com  Fri Jan  9 03:47:10 2009
From: soporte at dsgsoftware.com (=?UTF-8?Q?Juan_G=C3=A1lvez?=)
Date: Fri Jan  9 03:48:09 2009
Subject: [Harbour] PCode DLL
References: <001901c97186$419db260$6c01a8c0@PcJuanxp>
	<20090109003355.GB2136@34-mo7-2.acn.waw.pl>
Message-ID: <002b01c97237$0394c920$6c01a8c0@PcJuanxp>

Hi Przemek,

> 
> If you want to used PCODE DLLs with static Harbour binaries then you
> have to compile Harbour exporting public symbols like for share
> harbour library. It's enough to set HB_DYNLIB macro. F.e. by:
>   set C_USR=-DHB_DYNLIB
> then rebuild Harbour.
> 

It works fine :)

I thought -D__EXPORT__ made this work. Should I also maintain it ? 

Please, could you give a small explanation of these macros?

Many thanks
Juan
From M.Horodyski at pzuzycie.com.pl  Fri Jan  9 04:14:39 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri Jan  9 04:14:43 2009
Subject: [Harbour] Harbour and OpenWatcom.
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501BC0125@PINK.zycie.pzu>

Thanks Peter for your reply.
Problem still. I send current file and raport in zip file to priv email.

Yesterday I have send 2 mails to harbour@harbour-project.org, but from
request have one  mail.
Fortunately, is still
http://lists.harbour-project.org/pipermail/harbour/2009-January/thread.h
tml

Regards,
Marek Horodyski
From M.Horodyski at pzuzycie.com.pl  Fri Jan  9 04:44:35 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri Jan  9 04:44:42 2009
Subject: [Harbour] Trouble with ca. 380kb zip files to Peter mail adres ?
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501BC0154@PINK.zycie.pzu>

I have trouble with myorg63@mail.ru :
<nlb02fe.pzuzycie.com.pl #5.5.0 smtp;550 Access from ip address
193.109.245.6 blocked. Visit
http://win.mail.ru/cgi-bin/support_bl?ip=193.109.245.6>

And try here with smaller atachment.
Who can help my ?

Regards,
Marek Horodyski


-------------- next part --------------
A non-text attachment was scrubbed...
Name: HARBOUR.ZIP
Type: application/x-zip-compressed
Size: 18013 bytes
Desc: HARBOUR.ZIP
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090109/e250c250/HARBOUR-0001.bin
From druzus at acn.waw.pl  Fri Jan  9 05:10:19 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Jan  9 05:06:53 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
In-Reply-To: <21339751.post@talk.nabble.com>
References: <21339751.post@talk.nabble.com>
Message-ID: <20090109101019.GA19385@34-mo7-2.acn.waw.pl>

On Wed, 07 Jan 2009, Barry Jackson wrote:

Hi Barry,

[...]
> I have compiled and linked the test program as follows:-
> 
> [baz@jackodesktop hbr]$ hbcmp -gc -n telepath.prg
> Harbour 1.1.0dev (Rev. 9956)
> Copyright (c) 1999-2008, http://www.harbour-project.org/
> Compiling 'telepath.prg'...
> Lines 1137, Functions/Procedures 31
> Generating C source output to 'telepath.c'... Done.
> 
> [baz@jackodesktop hbr]$ hbcmp -gc testtp.prg
> Harbour 1.1.0dev (Rev. 9956)
> Copyright (c) 1999-2008, http://www.harbour-project.org/
> Compiling 'testtp.prg'...
> Lines 19, Functions/Procedures 3
> Generating C source output to 'testtp.c'... Done.
> 
> [baz@jackodesktop hbr]$ hbcc testtp.c telepath.c tpcommon.c tplinux.c
> [baz@jackodesktop hbr]$

It's not directly related to your problem but I think that you should not
build final application in such compilicated way. bhbtpathy is created by
GNU make system when you build Harbour so it should be enough to make:
   hbmk testtp.prg -lbhbtpathy

best regards,
Przemek
From druzus at acn.waw.pl  Fri Jan  9 05:14:00 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Jan  9 05:10:35 2009
Subject: [Harbour] Watcom and WIn32
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C95018AE511@PINK.zycie.pzu>
References: <NLB01FEiu3fQtYdVzDp00016b20@gatein.pzuzycie.com.pl>
	<FFAFD6EA63A3FC4784FBDA52BE7A7C95018AE511@PINK.zycie.pzu>
Message-ID: <20090109101400.GB19385@34-mo7-2.acn.waw.pl>

On Fri, 07 Nov 2008, Horodyski Marek (PZUZ) wrote:

Hi Marek,

> How I try make harbour with OpenWatcom 1.7 ?
> In make_gnu.bat is call make.exe, but watcom has nMake.
> With change name make program too not work.

You need GNU make.
All builds can be created using GNU make. Only BCC and MSVC
have additional optional make files for their native make systems.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Jan  9 05:21:45 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Jan  9 05:18:23 2009
Subject: [Harbour] Compile tests with OpenWatcom.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501BBFEE3@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501BBFEE3@PINK.zycie.pzu>
Message-ID: <20090109102145.GC19385@34-mo7-2.acn.waw.pl>

On Thu, 08 Jan 2009, Horodyski Marek (PZUZ) wrote:

Hi Marek,

> I try work with OpenWacom 1.7 on Win32.
> Positively create Harbor.exe (with a few errors in WVGWIN, thaks to
> Massimo).
> I have all libraries (lib files in folder C:\harbour\lib\w32\owatcom\.).

If you set, HB_BIN_INSTALL, HB_INC_INSTALL, HB_LIB_INSTALL
environemnt variables to final directories, f.e.:
   set HB_BIN_INSTALL=c:\harbour\owatcom\bin
   set HB_INC_INSTALL=c:\harbour\owatcom\include
   set HB_LIB_INSTALL=c:\harbour\owatcom\lib

and then execute
   make_gnu.bat install
Then all finale binaries and header files will be copied to given
location.

> When trying to compile programs from a subdirectory tests using
> bld_gnu.bat or hbmk_gnu.bat, unfortunately, I have such communications :
> >>>>>>>>>>>
> [... Snip many lines...]
> loading object files
> searching libraries
> Warning! W1008: cannot open /hbdebug.lib : No such file or directory
> [ snip 20 libs ]
> Warning! W1008: cannot open /gtgui.lib : No such file or directory
> Error! E2028: hb_vmProcessSymbolsEx_ is an undefined reference
> [snip 12 an undefined reference]
> Error! E2028: HB_FUN_QOUT_ is an undefined reference
> Warning! W1023: no starting address found, using 00401000
> creating a Windows NT character-mode executable
> file atest.obj(c:\harbour\tests\w32\owatcom\atest.c): undefined symbol
> hb_vmProcessSymbolsEx_
> [snip 11 undefined symbol]
> file atest.obj(c:\harbour\tests\w32\owatcom\atest.c): undefined symbol
> hb_xvmExitProc_
> file atest.obj(c:\harbour\tests\w32\owatcom\atest.c): undefined symbol
> HB_FUN_QOUT_
> make[1]: Leaving directory `c:/harbour/tests/w32/owatcom'
> <<<<<<<<<<<<<<<
> And aplication is not created.

You are using some old build scripts which probably creates .lnk file
for OpenWatcom using sth like:
      echo LIB %HB_LIB_INSTALL%\hbdebug.lib >> _hb_mk.tmp
and because you do not have HB_LIB_INSTALL envvar then library paths
points to \ directory.
Use current hbmk.bat from Harbour repository (bin\hbmk.bat)

best regards,
Przemek
From druzus at acn.waw.pl  Fri Jan  9 05:27:07 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Jan  9 05:23:42 2009
Subject: [Harbour] PCode DLL
In-Reply-To: <002b01c97237$0394c920$6c01a8c0@PcJuanxp>
References: <001901c97186$419db260$6c01a8c0@PcJuanxp>
	<20090109003355.GB2136@34-mo7-2.acn.waw.pl>
	<002b01c97237$0394c920$6c01a8c0@PcJuanxp>
Message-ID: <20090109102707.GD19385@34-mo7-2.acn.waw.pl>

On Fri, 09 Jan 2009, Juan G?lvez wrote:

Hi Juan,

>> If you want to used PCODE DLLs with static Harbour binaries then you
>> have to compile Harbour exporting public symbols like for share
>> harbour library. It's enough to set HB_DYNLIB macro. F.e. by:
>>   set C_USR=-DHB_DYNLIB
>> then rebuild Harbour.
> It works fine :)
> I thought -D__EXPORT__ made this work. Should I also maintain it ? 
> Please, could you give a small explanation of these macros?

Few weeks ago __EXPORT__ macro was renamed to HB_DYNLIB which is
probably also not very good name but now is the official one.
When it's set public functions are marked as exported and in
final binaries linker create special table which can be used
by loaded DLLs to locate function addresses.

best regards,
Przemek
From zen25000 at zen.co.uk  Fri Jan  9 06:14:56 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Fri Jan  9 06:15:01 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
In-Reply-To: <20090109101019.GA19385@34-mo7-2.acn.waw.pl>
References: <21339751.post@talk.nabble.com>
	<20090109101019.GA19385@34-mo7-2.acn.waw.pl>
Message-ID: <21370374.post@talk.nabble.com>


Hi Przemek,
Thank you so much for that!
I knew there had to be an easier way, but could not find it! Easy when you
know.
I have now built my small Linux application using xhgtk front end and
hbtpathy for the com functions - 
it works fine - just like my Xbase++ version in Windows - I am really
impressed with Harbour! 
It also builds with 
hbmk hdvr -lhbtpathy -xhgtk    //Much easier than my 3 step approach!
It produces a 40kB executable which runs on this machine. 
Question, what other files do I need to deploy to another machine that has
no Harbour installed to enable it to run there? Is there a tool to do this?
Regards,
Barry.


Przemyslaw Czerpak-2 wrote:
> 
> On Wed, 07 Jan 2009, Barry Jackson wrote:
> 
> Hi Barry,
> 
> [...]
>> I have compiled and linked the test program as follows:-
>> 
>> [baz@jackodesktop hbr]$ hbcmp -gc -n telepath.prg
>> Harbour 1.1.0dev (Rev. 9956)
>> Copyright (c) 1999-2008, http://www.harbour-project.org/
>> Compiling 'telepath.prg'...
>> Lines 1137, Functions/Procedures 31
>> Generating C source output to 'telepath.c'... Done.
>> 
>> [baz@jackodesktop hbr]$ hbcmp -gc testtp.prg
>> Harbour 1.1.0dev (Rev. 9956)
>> Copyright (c) 1999-2008, http://www.harbour-project.org/
>> Compiling 'testtp.prg'...
>> Lines 19, Functions/Procedures 3
>> Generating C source output to 'testtp.c'... Done.
>> 
>> [baz@jackodesktop hbr]$ hbcc testtp.c telepath.c tpcommon.c tplinux.c
>> [baz@jackodesktop hbr]$
> 
> It's not directly related to your problem but I think that you should not
> build final application in such compilicated way. bhbtpathy is created by
> GNU make system when you build Harbour so it should be enough to make:
>    hbmk testtp.prg -lbhbtpathy
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/Using--contrib-hbtpathy-fuctions-in-Linux-tp21339751p21370374.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From soporte at dsgsoftware.com  Fri Jan  9 06:27:37 2009
From: soporte at dsgsoftware.com (=?UTF-8?Q?Juan_G=C3=A1lvez?=)
Date: Fri Jan  9 06:27:35 2009
Subject: [Harbour] PCode DLL
References: <001901c97186$419db260$6c01a8c0@PcJuanxp><20090109003355.GB2136@34-mo7-2.acn.waw.pl><002b01c97237$0394c920$6c01a8c0@PcJuanxp>
	<20090109102707.GD19385@34-mo7-2.acn.waw.pl>
Message-ID: <008c01c9724d$4976cae0$6c01a8c0@PcJuanxp>

Many thanks

----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Friday, January 09, 2009 11:27 AM
Subject: Re: [Harbour] PCode DLL


> On Fri, 09 Jan 2009, Juan G?lvez wrote:
>
> Hi Juan,
>
>>> If you want to used PCODE DLLs with static Harbour binaries then you
>>> have to compile Harbour exporting public symbols like for share
>>> harbour library. It's enough to set HB_DYNLIB macro. F.e. by:
>>>   set C_USR=-DHB_DYNLIB
>>> then rebuild Harbour.
>> It works fine :)
>> I thought -D__EXPORT__ made this work. Should I also maintain it ?
>> Please, could you give a small explanation of these macros?
>
> Few weeks ago __EXPORT__ macro was renamed to HB_DYNLIB which is
> probably also not very good name but now is the official one.
> When it's set public functions are marked as exported and in
> final binaries linker create special table which can be used
> by loaded DLLs to locate function addresses.
>
> best regards,
> Przemek

From druzus at acn.waw.pl  Fri Jan  9 07:03:33 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Jan  9 07:00:07 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
In-Reply-To: <21370374.post@talk.nabble.com>
References: <21339751.post@talk.nabble.com>
	<20090109101019.GA19385@34-mo7-2.acn.waw.pl>
	<21370374.post@talk.nabble.com>
Message-ID: <20090109120333.GA31535@34-mo7-2.acn.waw.pl>

On Fri, 09 Jan 2009, Barry Jackson wrote:

Hi Barry,

> I have now built my small Linux application using xhgtk front end and
> hbtpathy for the com functions - 
> it works fine - just like my Xbase++ version in Windows - I am really
> impressed with Harbour! 
> It also builds with 
> hbmk hdvr -lhbtpathy -xhgtk    //Much easier than my 3 step approach!
> It produces a 40kB executable which runs on this machine. 
> Question, what other files do I need to deploy to another machine that has
> no Harbour installed to enable it to run there? Is there a tool to do this?

Such executable file uses shared harbour.so and xhgtk.so libraries
and you should install them on destination machine. If you are using
RPM based distribution then I suggest to create RPMs for Harbour and
XHGTK and then install xhgtk-*.<arch>.rpm and harbour-lib-*.<arch>.rpm.
Both contains above shared libraries.
You can also create static binaries using -static hb* script parameters.
In such case the Harbour and xHarbour libraries will be linked with your
application. Anyhow still other system and GTK libraries will be linked
dynamically so you will need compatible libraries installed in destination
system. You can also use -fullstatic parameter which eliminates this
problem and create fully static binaries if you have static version of
used libraries installed. Unfortunately GTK does not provide static
libs so in this case it will not work. Also static binaries using some
system functionality may not be well portable. If you want to reduce
the problem with coping binaries between systems then the easiest way
is creating shared binaries as you have now and distribute them with
used shared libraries (harbour.so and xhgtk.so in this case).
Your compiled .prg code or .c code using Harbour API should not have
any other external references so even if harbour.so and/or xhgtk.so
cannot be installed on destination system then it will be enough to
download valid binary libraries for this system or rebuild them from
source code without touching your application.

best regards,
Przemek
From maurilio.longo at libero.it  Fri Jan  9 07:18:04 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Jan  9 07:18:10 2009
Subject: [Harbour] CHANGELOG: 2009-01-09 12:55 UTC+0100 Maurilio Longo 
Message-ID: <4967407C.6060403@libero.it>

2009-01-09 12:55 UTC+0100 Maurilio Longo (maurilio.longo@libero.it)
  * harbour/config/os2/global.cf
    * simplified and fixed an error in deleting files
  * harbour/source/rtl/hbffind.c
    ! fixed hb_fsFindNextLow() in OS/2 which was using stat to find file size, but
      as it seems, st_size contains garbage. Removed call to stat() and used
      buffer returned by DosFindFirst().
-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From zen25000 at zen.co.uk  Fri Jan  9 07:26:39 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Fri Jan  9 07:26:43 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
In-Reply-To: <20090109120333.GA31535@34-mo7-2.acn.waw.pl>
References: <21339751.post@talk.nabble.com>
	<20090109101019.GA19385@34-mo7-2.acn.waw.pl>
	<21370374.post@talk.nabble.com>
	<20090109120333.GA31535@34-mo7-2.acn.waw.pl>
Message-ID: <21371348.post@talk.nabble.com>


Hi Przemek,
Thank you for taking the time to provide such a detailed and complete
explanation.
Cheers,
Barry.


Przemyslaw Czerpak-2 wrote:
> 
> On Fri, 09 Jan 2009, Barry Jackson wrote:
> 
> Hi Barry,
> 
>> I have now built my small Linux application using xhgtk front end and
>> hbtpathy for the com functions - 
>> it works fine - just like my Xbase++ version in Windows - I am really
>> impressed with Harbour! 
>> It also builds with 
>> hbmk hdvr -lhbtpathy -xhgtk    //Much easier than my 3 step approach!
>> It produces a 40kB executable which runs on this machine. 
>> Question, what other files do I need to deploy to another machine that
>> has
>> no Harbour installed to enable it to run there? Is there a tool to do
>> this?
> 
> Such executable file uses shared harbour.so and xhgtk.so libraries
> and you should install them on destination machine. If you are using
> RPM based distribution then I suggest to create RPMs for Harbour and
> XHGTK and then install xhgtk-*.<arch>.rpm and harbour-lib-*.<arch>.rpm.
> Both contains above shared libraries.
> You can also create static binaries using -static hb* script parameters.
> In such case the Harbour and xHarbour libraries will be linked with your
> application. Anyhow still other system and GTK libraries will be linked
> dynamically so you will need compatible libraries installed in destination
> system. You can also use -fullstatic parameter which eliminates this
> problem and create fully static binaries if you have static version of
> used libraries installed. Unfortunately GTK does not provide static
> libs so in this case it will not work. Also static binaries using some
> system functionality may not be well portable. If you want to reduce
> the problem with coping binaries between systems then the easiest way
> is creating shared binaries as you have now and distribute them with
> used shared libraries (harbour.so and xhgtk.so in this case).
> Your compiled .prg code or .c code using Harbour API should not have
> any other external references so even if harbour.so and/or xhgtk.so
> cannot be installed on destination system then it will be enough to
> download valid binary libraries for this system or rebuild them from
> source code without touching your application.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/Using--contrib-hbtpathy-fuctions-in-Linux-tp21339751p21371348.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Fri Jan  9 07:35:41 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Jan  9 07:32:17 2009
Subject: [Harbour] 2009-01-09 13:35 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090109123541.GA10749@34-mo7-2.acn.waw.pl>

2009-01-09 13:35 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/classes.c
    * updated __objHasMsgAssigned()
      + accept also symbols (@methodname()) not only strings as message name
        (2-nd parameter) just like in __objHasMsg() or __objSendMsg()
      + added suport for scalar classes in __objHasMsgAssigned()
      + generate RT error when wrong parameters are passed
    * updated comments with .prg functions syntax

best regards
Przemek
From M.Horodyski at pzuzycie.com.pl  Fri Jan  9 07:53:50 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri Jan  9 07:53:54 2009
Subject: [Harbour] Watcom and WIn32
In-Reply-To: <20090109101400.GB19385@34-mo7-2.acn.waw.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501BC0249@PINK.zycie.pzu>

>-----Original Message-----
>From: Przemyslaw Czerpak [mailto:druzus@acn.waw.pl] 
>Sent: Friday, January 09, 2009 11:14 AM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] Watcom and WIn32
>
>On Fri, 07 Nov 2008, Horodyski Marek (PZUZ) wrote:
>
[...]
>> How I try make harbour with OpenWatcom 1.7 ?
>> In make_gnu.bat is call make.exe, but watcom has nMake.
>> With change name make program too not work.
[...]
>You need GNU make.
>All builds can be created using GNU make. Only BCC and MSVC 
>have additional optional make files for their native make systems.

Przemek,
now I have already GNU MAKE system, but he does not see libraries when I
compile testing programs (as tests folders).

Reagards,
Marek Horodyski
From druzus at acn.waw.pl  Fri Jan  9 08:41:40 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Jan  9 08:38:14 2009
Subject: [Harbour] Watcom and WIn32
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501BC0249@PINK.zycie.pzu>
References: <20090109101400.GB19385@34-mo7-2.acn.waw.pl>
	<FFAFD6EA63A3FC4784FBDA52BE7A7C9501BC0249@PINK.zycie.pzu>
Message-ID: <20090109134140.GA27676@34-mo7-2.acn.waw.pl>

On Fri, 09 Jan 2009, Horodyski Marek (PZUZ) wrote:

Hi Marek,

> now I have already GNU MAKE system, but he does not see libraries when I
> compile testing programs (as tests folders).

See the second message I sent today as answer for your request.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Jan  9 09:18:15 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jan  9 09:18:19 2009
Subject: [Harbour] hbct issues
Message-ID: <9257026e0901090618h6c744aafo4d773b0e2b52808d@mail.gmail.com>

I've found that XTOC( 2007 ) returns garbage and that LASTDAYOM
returns 0 without parameters while the doc says it should use the
system date.

For XTOC there is warning that says:

     ATTENTION: different implementations or platforms of Harbour, they
 *      could produce different format in the string returned by XTOC() for
 *      data type NUMBER.

Is there anybody with CT installed that can confirm the differences?

function main

? "LASTDAYOM", LASTDAYOM()
? "XTOC", XTOC( 2007 )

return nil


best regards,
Lorenzo

P.S. I've fixed locally LASTDAYOM in this way:

HB_FUNC( LASTDAYOM )
{
   BOOL bLeap = 0;
   int iYear, iMonth, iDay;

   if( ISDATE( 1 ) )
   {
      PHB_ITEM pDate = hb_param( 1, HB_IT_DATE );
      LONG lDate = hb_itemGetDL( pDate );

      if( lDate )
      {
         hb_dateDecode( lDate, &iYear, &iMonth, &iDay );
      }
      else
      {
         hb_dateToday( &iYear, &iMonth, &iDay );
      }
      bLeap = ct_isleap( iYear );
   }
   else if( ISNUM( 1 ) )
   {
      iMonth = hb_parni( 1 );
   }
   else if( ISNIL( 1 ) )
          // <---- added this
   {
	   hb_dateToday( &iYear, &iMonth, &iDay );
   }
               // <--------------------
   else
   {
      iMonth = 0;
   }

   hb_retni( ( iMonth && ( iMonth <= 12 ) ? ct_daysinmonth( iMonth,
bLeap ) : 0 ) );

}
From M.Horodyski at pzuzycie.com.pl  Fri Jan  9 09:50:37 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri Jan  9 09:50:41 2009
Subject: [Harbour] Compile tests with OpenWatcom.
In-Reply-To: <20090109102145.GC19385@34-mo7-2.acn.waw.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501BC02D5@PINK.zycie.pzu>

>You are using some old build scripts which probably creates 
>.lnk file for OpenWatcom using sth like:
>      echo LIB %HB_LIB_INSTALL%\hbdebug.lib >> _hb_mk.tmp and 
>because you do not have HB_LIB_INSTALL envvar then library 
>paths points to \ directory.
>Use current hbmk.bat from Harbour repository (bin\hbmk.bat)

Hm. My make not used hbmk.bat.
I see now, that file C:\harbour\tests\w32\owatcom\__link__.tmp is based
on file MAKEFILE in TESTS subfolder.
How can I change it ?

Regards,
Marek Horodyski
From druzus at acn.waw.pl  Fri Jan  9 12:00:05 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Jan  9 11:56:38 2009
Subject: [Harbour] 2009-01-09 17:59 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090109170005.GA17970@34-mo7-2.acn.waw.pl>

2009-01-09 17:59 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbct/ftoc.c
  * harbour/contrib/hbct/misc1.c
    * changed XTOC(), FTOC() and CTOF() to always store/retirve numbers as
      double value in little endian order to reduce platform differences
      ; TOFIX intorduce new macro which can be used instead sizeof( double )
        for platforms where double size is different then 8 and macro
        HB_FORCE_IEEE754_DOUBLE is set

  * harbour/contrib/hbct/dattime2.c
    * changed date functions to use default date like in CT3

best regards
Przemek
From druzus at acn.waw.pl  Fri Jan  9 12:02:35 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Jan  9 11:59:08 2009
Subject: [Harbour] Compile tests with OpenWatcom.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501BC02D5@PINK.zycie.pzu>
References: <20090109102145.GC19385@34-mo7-2.acn.waw.pl>
	<FFAFD6EA63A3FC4784FBDA52BE7A7C9501BC02D5@PINK.zycie.pzu>
Message-ID: <20090109170235.GA17739@34-mo7-2.acn.waw.pl>

On Fri, 09 Jan 2009, Horodyski Marek (PZUZ) wrote:
> >You are using some old build scripts which probably creates 
> >.lnk file for OpenWatcom using sth like:
> >      echo LIB %HB_LIB_INSTALL%\hbdebug.lib >> _hb_mk.tmp and 
> >because you do not have HB_LIB_INSTALL envvar then library 
> >paths points to \ directory.
> >Use current hbmk.bat from Harbour repository (bin\hbmk.bat)
> Hm. My make not used hbmk.bat.
> I see now, that file C:\harbour\tests\w32\owatcom\__link__.tmp is based
> on file MAKEFILE in TESTS subfolder.
> How can I change it ?

Do not change it but use hbmk.bat to compile and link your .prg code.
It generates link file automatically. You can look at it to create
your own cutomized version if necessary.

best regards,
Przemek
From bruno.luciani at gmail.com  Fri Jan  9 12:11:57 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Fri Jan  9 12:12:00 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
In-Reply-To: <21349708.post@talk.nabble.com>
References: <21339751.post@talk.nabble.com> <B0085876032@ms1.3peaks.com>
	<21340671.post@talk.nabble.com> <B0085876763@ms1.3peaks.com>
	<21341309.post@talk.nabble.com> <21342842.post@talk.nabble.com>
	<133778360901071723k1f89be4at170928f563de38b1@mail.gmail.com>
	<21349708.post@talk.nabble.com>
Message-ID: <133778360901090911l5421b154k49b969a8f9e94d04@mail.gmail.com>

It is for windows but compiles ok using MinGW , I dont know if it works
in linux , probably not .

Bruno

2009/1/8 Barry Jackson <zen25000@zen.co.uk>:
>
> Thanks Bruno,
> I had a quick look but it seems to be Windows based - is it for Linux as
> well?
> If so I will look closer.
> Cheers, Barry
>
> Bugzilla from bruno.luciani@gmail.com wrote:
>>
>> Barry , try this library
>>
>>
>> http://www.carozodequilmes.com.ar/Projects/QAC/hbcomm.lib.htm
>>
>> this page its part of
>>
>> http://www.carozodequilmes.com.ar/Projects/QAC/_Index_QAC.htm
>>
>> It 's in spanish but the code in zip it's comented in english
>>
>> Bruno
>>
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>
>
> --
> View this message in context: http://www.nabble.com/Using--contrib-hbtpathy-fuctions-in-Linux-tp21339751p21349708.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From bruno.luciani at gmail.com  Fri Jan  9 12:34:06 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Fri Jan  9 12:34:10 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
In-Reply-To: <21349708.post@talk.nabble.com>
References: <21339751.post@talk.nabble.com> <B0085876032@ms1.3peaks.com>
	<21340671.post@talk.nabble.com> <B0085876763@ms1.3peaks.com>
	<21341309.post@talk.nabble.com> <21342842.post@talk.nabble.com>
	<133778360901071723k1f89be4at170928f563de38b1@mail.gmail.com>
	<21349708.post@talk.nabble.com>
Message-ID: <133778360901090934k25ac22dj66569e45fbf14b30@mail.gmail.com>

the library is in source format take a try

Bruno

2009/1/8 Barry Jackson <zen25000@zen.co.uk>:
>
> Thanks Bruno,
> I had a quick look but it seems to be Windows based - is it for Linux as
> well?
> If so I will look closer.
> Cheers, Barry
>
> Bugzilla from bruno.luciani@gmail.com wrote:
>>
>> Barry , try this library
>>
>>
>> http://www.carozodequilmes.com.ar/Projects/QAC/hbcomm.lib.htm
>>
>> this page its part of
>>
>> http://www.carozodequilmes.com.ar/Projects/QAC/_Index_QAC.htm
>>
>> It 's in spanish but the code in zip it's comented in english
>>
>> Bruno
>>
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>
>
> --
> View this message in context: http://www.nabble.com/Using--contrib-hbtpathy-fuctions-in-Linux-tp21339751p21349708.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From lorenzo.fiorini at gmail.com  Fri Jan  9 12:48:16 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jan  9 12:48:22 2009
Subject: [Harbour] 2009-01-09 17:59 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20090109170005.GA17970@34-mo7-2.acn.waw.pl>
References: <20090109170005.GA17970@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0901090948h2901af8u3b688a6408776b5c@mail.gmail.com>

On Fri, Jan 9, 2009 at 6:00 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:
> 2009-01-09 17:59 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/contrib/hbct/ftoc.c
>  * harbour/contrib/hbct/misc1.c
>    * changed XTOC(), FTOC() and CTOF() to always store/retirve numbers as
>      double value in little endian order to reduce platform differences
>      ; TOFIX intorduce new macro which can be used instead sizeof( double )
>        for platforms where double size is different then 8 and macro
>        HB_FORCE_IEEE754_DOUBLE is set
>
>  * harbour/contrib/hbct/dattime2.c
>    * changed date functions to use default date like in CT3

Many thanks.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Fri Jan  9 13:18:58 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jan  9 13:19:06 2009
Subject: [Harbour] 2009-01-09 17:59 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20090109170005.GA17970@34-mo7-2.acn.waw.pl>
References: <20090109170005.GA17970@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0901091018vfb9803esad4e4f4df0cd8e0a@mail.gmail.com>

On Fri, Jan 9, 2009 at 6:00 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:
> 2009-01-09 17:59 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/contrib/hbct/ftoc.c
>  * harbour/contrib/hbct/misc1.c
>    * changed XTOC(), FTOC() and CTOF() to always store/retirve numbers as
>      double value in little endian order to reduce platform differences
>      ; TOFIX intorduce new macro which can be used instead sizeof( double )
>        for platforms where double size is different then 8 and macro
>        HB_FORCE_IEEE754_DOUBLE is set

Sorry maybe I don't understand. What should returns XTOC with numbers?

In the doc I read:
...
.  Numeric values always return an 8-byte string:

        ? XTOC(0)                                // Length 8
        ? XTOC(9.9)                              // Ditto
        ? XTOC(-9.9)                             // Ditto
        ? XTOC(99)                               // Ditto
        ? XTOC(-99)                              // Ditto
...

length 8 of what?

For ? XTOC( 2007 ) I still see "garbage" ( Ubuntu 8.10/x86 ).

best regards,
Lorenzo
From zen25000 at zen.co.uk  Fri Jan  9 13:38:50 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Fri Jan  9 13:39:03 2009
Subject: [Harbour] 2009-01-09 17:59 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0901091018vfb9803esad4e4f4df0cd8e0a@mail.gmail.com>
References: <20090109170005.GA17970@34-mo7-2.acn.waw.pl>
	<9257026e0901091018vfb9803esad4e4f4df0cd8e0a@mail.gmail.com>
Message-ID: <496799BA.8010807@zen.co.uk>

I just tested

? XTOC( 2007 )

in Mandriva 2009 and it returns NIL

Lorenzo Fiorini wrote:
> On Fri, Jan 9, 2009 at 6:00 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:
>   
>> 2009-01-09 17:59 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>>  * harbour/contrib/hbct/ftoc.c
>>  * harbour/contrib/hbct/misc1.c
>>    * changed XTOC(), FTOC() and CTOF() to always store/retirve numbers as
>>      double value in little endian order to reduce platform differences
>>      ; TOFIX intorduce new macro which can be used instead sizeof( double )
>>        for platforms where double size is different then 8 and macro
>>        HB_FORCE_IEEE754_DOUBLE is set
>>     
>
> Sorry maybe I don't understand. What should returns XTOC with numbers?
>
> In the doc I read:
> ...
> .  Numeric values always return an 8-byte string:
>
>         ? XTOC(0)                                // Length 8
>         ? XTOC(9.9)                              // Ditto
>         ? XTOC(-9.9)                             // Ditto
>         ? XTOC(99)                               // Ditto
>         ? XTOC(-99)                              // Ditto
> ...
>
> length 8 of what?
>
> For ? XTOC( 2007 ) I still see "garbage" ( Ubuntu 8.10/x86 ).
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090109/08ae7429/attachment.html
From zen25000 at zen.co.uk  Fri Jan  9 13:56:17 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Fri Jan  9 13:56:21 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
In-Reply-To: <133778360901090934k25ac22dj66569e45fbf14b30@mail.gmail.com>
References: <21339751.post@talk.nabble.com> <B0085876032@ms1.3peaks.com>
	<21340671.post@talk.nabble.com> <B0085876763@ms1.3peaks.com>
	<21341309.post@talk.nabble.com> <21342842.post@talk.nabble.com>
	<133778360901071723k1f89be4at170928f563de38b1@mail.gmail.com>
	<21349708.post@talk.nabble.com>
	<133778360901090934k25ac22dj66569e45fbf14b30@mail.gmail.com>
Message-ID: <21378299.post@talk.nabble.com>


Thanks Bruno,
I will pass on it as it seems to rely on calls to Win32 functions.
Linux also uses a port name not a number and this would not be incorporated.
I have resolved the problems that I was having with hbtpathy
and my application is working - just a bit of tidying up to do.
Thanks again for your interest,
Cheers, Barry

Bugzilla from bruno.luciani@gmail.com wrote:
> 
> the library is in source format take a try
> 
> Bruno
> 
> 

-- 
View this message in context: http://www.nabble.com/Using--contrib-hbtpathy-fuctions-in-Linux-tp21339751p21378299.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From giuseppe-mastrangelo at tiscali.it  Sat Jan 10 15:30:55 2009
From: giuseppe-mastrangelo at tiscali.it (Giuseppe Mastrangelo)
Date: Sat Jan 10 15:30:59 2009
Subject: [Harbour] Difference harbour/xharbour about free VIRTUAL MEMORY
In-Reply-To: <609353e70901070508l716c80c4kfed35184c419f3c6@mail.gmail.com>
References: <609353e70901070508l716c80c4kfed35184c419f3c6@mail.gmail.com>
Message-ID: <c331a2ee0901101230j8b3e367ga4efe33e8d455ae4@mail.gmail.com>

2009/1/7, Massimo Belgrano <mbelgrano@deltain.it>:
> Can somebody confirm?
> From: Andi Jahja <xharbour@...>
> Subject: Re: Current CVS stable?
> Newsgroups: gmane.comp.lang.xharbour.devel
> Date: 2009-01-07 10:46:45 GMT (2 hours and 17 minutes ago)
>
> Very stable! :-)
>
> One important status now compared to Harbour :-):
>
>  xHarbour gently free VIRTUAL MEMORY upon application exit while
>  Harbour, at the present moment, does not.
>
>  (As usual, I use MEMPROOF with BCC build to make a test.)
>
> Congrats for the xHarbour crews!
>
> --
> Andi
>
>
> --
> Massimo Belgrano
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>

-- 
Inviato dal mio dispositivo mobile

Giuseppe Mastrangelo
Skype:giuseppe-mastrangelo
From capelsoft at terra.es  Sun Jan 11 14:26:01 2009
From: capelsoft at terra.es (=?iso-8859-1?Q?Jos=E9_Luis_Capel?=)
Date: Sun Jan 11 14:26:12 2009
Subject: [Harbour] Compiling harbour on PellesC for wince
References: <609353e70901070508l716c80c4kfed35184c419f3c6@mail.gmail.com>
	<c331a2ee0901101230j8b3e367ga4efe33e8d455ae4@mail.gmail.com>
Message-ID: <8812C435A49C45229DC4D40DE9473E4A@PEPELUIS3>

Hi,

With latest SVN I try to compile libs for Pelles C - Wince (ver. 5.00.8).

I use these sets:

SET HBPP=\programacion_disk\programacion\harbour\hbpp.exe
SET HBPPGEN=\programacion_disk\programacion\harbour\hbppgen.exe
set HB_ARCHITECTURE=w32
set HB_COMPILER=poccce
set PRG_USR=-l
SET HB_GT_LIB=gtgui
SET HB_GT_DEFAULT=gui
SET C_USR= -DHARBOUR_MAIN_WIN -DHB_FM_STATISTICS

And when I execute 'make_gnu.bat' I get these console errors (see bellow). 
I am pretty sure that paths are corrects... as some libs are created.  So... 
if someone can help me I'll appreciate.

Thanks and regards,
Jos? Luis Capel
PS: attached compressed make_gnu.log


mingw32-make.exe[3]: *** [hbfsapi.obj] Error 1
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[3]: *** [hbpp.obj] Error 1
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[3]: *** [cmdcheck.obj] Error 1
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[3]: *** [harbour.obj] Error 1
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[3]: *** [console.obj] Error 1
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[3]: *** [classes.obj] Error 1
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[3]: *** [workarea.obj] Error 1
mingw32-make.exe[2]: *** [descend] Error 2
process_begin: CreateProcess(NULL, 
../../../../source/main/w32/poccce/harbour.ex
e ../../hbextern.prg -n -i../../../../include -q0 -w3 -es2 -gc0 -km -l -l, 
...)
failed.
make (e=2): El sistema no puede hallar el archivo especificado.
mingw32-make.exe[3]: *** [hbextern.c] Error 2
mingw32-make.exe[2]: *** [descend] Error 2
process_begin: CreateProcess(NULL, 
../../../../source/main/w32/poccce/harbour.ex
e ../../dbgmenu.prg -n -i../../../../include -q0 -w3 -es2 -gc0 -km -l -l, 
...) f
ailed.
make (e=2): El sistema no puede hallar el archivo especificado.
mingw32-make.exe[3]: *** [dbgmenu.c] Error 2
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[1]: *** [first] Error 2
process_begin: CreateProcess(NULL, 
../../../../source/main/w32/poccce/harbour.ex
e 
../../hbrun.prg -n -i../../../../include -q0 -w3 -es2 -gc0 -km -l -l -gc0 -gc0
, ...) failed.
make (e=2): El sistema no puede hallar el archivo especificado.
mingw32-make.exe[3]: *** [hbrun.c] Error 2
mingw32-make.exe[2]: *** [descend] Error 2
process_begin: CreateProcess(NULL, 
../../../../source/main/w32/poccce/harbour.ex
e 
../../hbtest.prg -n -i../../../../include -q0 -w3 -es2 -gc0 -km -l -l -gc0 -gc
0, ...) failed.
make (e=2): El sistema no puede hallar el archivo especificado.
mingw32-make.exe[3]: *** [hbtest.c] Error 2
mingw32-make.exe[2]: *** [descend] Error 2
process_begin: CreateProcess(NULL, 
../../../../source/main/w32/poccce/harbour.ex
e 
../../hbdoc.prg -n -i../../../../include -q0 -w3 -es2 -gc0 -km -l -l -gc0 -gc0
, ...) failed.
make (e=2): El sistema no puede hallar el archivo especificado.
mingw32-make.exe[3]: *** [hbdoc.c] Error 2
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[3]: *** [hbmlang.obj] Error 1
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[1]: *** [first] Error 2
mingw32-make.exe[3]: *** [gtwvg.obj] Error 1
mingw32-make.exe[2]: *** [descend] Error 2
process_begin: CreateProcess(NULL, 
../../../../source/main/w32/poccce/harbour.ex
e ../../tbtree.prg -n -i../../../../include -q0 -w3 -es2 -gc0 -km -l -l, 
...) fa
iled.
make (e=2): El sistema no puede hallar el archivo especificado.
mingw32-make.exe[3]: *** [tbtree.c] Error 2
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[3]: *** [ctnet.obj] Error 1
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[4]: *** [winapi.obj] Error 1
mingw32-make.exe[3]: *** [descend] Error 2
mingw32-make.exe[2]: *** [first] Error 2
process_begin: CreateProcess(NULL, 
../../../../source/main/w32/poccce/harbour.ex
e ../../fileread.prg -n -i../../../../include -q0 -w3 -es2 -gc0 -km -l -l, 
...)
failed.
make (e=2): El sistema no puede hallar el archivo especificado.
mingw32-make.exe[3]: *** [fileread.c] Error 2
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[3]: *** [hbmzip.obj] Error 1
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[3]: *** [getenvrn.obj] Error 1
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[3]: *** [odbc.obj] Error 1
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[3]: *** [ole2.obj] Error 1
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[3]: *** [hbsqlit3.obj] Error 1
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[3]: *** [utils.obj] Error 1
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[3]: *** [tpwin32.obj] Error 1
mingw32-make.exe[2]: *** [descend] Error 2
process_begin: CreateProcess(NULL, 
../../../../source/main/w32/poccce/harbour.ex
e ../../hbvpdf.prg -n -i../../../../include -q0 -w3 -es2 -gc0 -km -l -l, 
...) fa
iled.
make (e=2): El sistema no puede hallar el archivo especificado.
mingw32-make.exe[3]: *** [hbvpdf.c] Error 2
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[3]: *** [win_dll.obj] Error 1
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[3]: *** [wincorec.obj] Error 1
mingw32-make.exe[2]: *** [descend] Error 2
process_begin: CreateProcess(NULL, 
../../../../source/main/w32/poccce/harbour.ex
e ../../hbziparc.prg -n -i../../../../include -q0 -w3 -es2 -gc0 -km -l -l, 
...)
failed.
make (e=2): El sistema no puede hallar el archivo especificado.
mingw32-make.exe[3]: *** [hbziparc.c] Error 2
mingw32-make.exe[2]: *** [descend] Error 2
process_begin: CreateProcess(NULL, 
../../../../source/main/w32/poccce/harbour.ex
e ../../adordd.prg -n -i../../../../include -q0 -w3 -es2 -gc0 -km -l -l, 
...) fa
iled.
make (e=2): El sistema no puede hallar el archivo especificado.
mingw32-make.exe[3]: *** [adordd.c] Error 2
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[3]: *** [filestat.obj] Error 1
mingw32-make.exe[2]: *** [descend] Error 2
process_begin: CreateProcess(NULL, 
../../../../source/main/w32/poccce/harbour.ex
e ../../tmsql.prg -n -i../../../../include -q0 -w3 -es2 -gc0 -km -l -l, ...) 
fai
led.
make (e=2): El sistema no puede hallar el archivo especificado.
mingw32-make.exe[3]: *** [tmsql.c] Error 2
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[3]: *** [sqlmix.obj] Error 1
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[1]: *** [first] Error 2
mingw32-make.exe: *** [first] Error 2












































































-------------- next part --------------
A non-text attachment was scrubbed...
Name: make_gnu.rar
Type: application/octet-stream
Size: 3380 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090111/f8b8619f/make_gnu.obj
From teo at windtelsoft.com  Sun Jan 11 16:33:14 2009
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Sun Jan 11 16:33:18 2009
Subject: [Harbour] Help with scope class checking
In-Reply-To: <200901061105.09494.teo@windtelsoft.com>
References: <200901061105.09494.teo@windtelsoft.com>
Message-ID: <200901111533.14900.teo@windtelsoft.com>

On Tuesday 06 January 2009 11:05:09 am Teo Fonrouge wrote:

[snip]

<friendly reminder>

Przemek, can you give any help on this ?. I just want to be able to send 
messages to private/protected methods from C source.


Thanks in advance.


best regards,

Teo
From zen25000 at zen.co.uk  Sun Jan 11 19:01:23 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Sun Jan 11 19:01:26 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
In-Reply-To: <20090109120333.GA31535@34-mo7-2.acn.waw.pl>
References: <21339751.post@talk.nabble.com>
	<20090109101019.GA19385@34-mo7-2.acn.waw.pl>
	<21370374.post@talk.nabble.com>
	<20090109120333.GA31535@34-mo7-2.acn.waw.pl>
Message-ID: <21406238.post@talk.nabble.com>


I can not find  harbour.so and xhgtk.so libraries on my machine so I have
installed the RPMs.

Yesterday I checked out the latest svn and updated to rev10031 and latest
xhgtk  I am now finding that my GUI executables will only launch from a
terminal and not directly. Has something changed in Harbour or xhgtk to
cause this? 
F.e. xhgtk/samples/classes/button.prg compiled on 3/1/2009 will run by
clicking the executable from Dolphin file manager, the same code compiled
now will only run by launching from a terminal. The produced file sizes and
permissions are the same.
Any ideas what may be the cause?


Przemyslaw Czerpak-2 wrote:
> 
> On Fri, 09 Jan 2009, Barry Jackson wrote:
> 
> Hi Barry,
> 
>> I have now built my small Linux application using xhgtk front end and
>> hbtpathy for the com functions - 
>> it works fine - just like my Xbase++ version in Windows - I am really
>> impressed with Harbour! 
>> It also builds with 
>> hbmk hdvr -lhbtpathy -xhgtk    //Much easier than my 3 step approach!
>> It produces a 40kB executable which runs on this machine. 
>> Question, what other files do I need to deploy to another machine that
>> has
>> no Harbour installed to enable it to run there? Is there a tool to do
>> this?
> 
> Such executable file uses shared harbour.so and xhgtk.so libraries
> and you should install them on destination machine. If you are using
> RPM based distribution then I suggest to create RPMs for Harbour and
> XHGTK and then install xhgtk-*.<arch>.rpm and harbour-lib-*.<arch>.rpm.
> Both contains above shared libraries.
> You can also create static binaries using -static hb* script parameters.
> In such case the Harbour and xHarbour libraries will be linked with your
> application. Anyhow still other system and GTK libraries will be linked
> dynamically so you will need compatible libraries installed in destination
> system. You can also use -fullstatic parameter which eliminates this
> problem and create fully static binaries if you have static version of
> used libraries installed. Unfortunately GTK does not provide static
> libs so in this case it will not work. Also static binaries using some
> system functionality may not be well portable. If you want to reduce
> the problem with coping binaries between systems then the easiest way
> is creating shared binaries as you have now and distribute them with
> used shared libraries (harbour.so and xhgtk.so in this case).
> Your compiled .prg code or .c code using Harbour API should not have
> any other external references so even if harbour.so and/or xhgtk.so
> cannot be installed on destination system then it will be enough to
> download valid binary libraries for this system or rebuild them from
> source code without touching your application.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/Using--contrib-hbtpathy-fuctions-in-Linux-tp21339751p21406238.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From M.Horodyski at pzuzycie.com.pl  Mon Jan 12 04:28:46 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Mon Jan 12 04:28:51 2009
Subject: [Harbour] Compile tests with OpenWatcom.
In-Reply-To: <20090109170235.GA17739@34-mo7-2.acn.waw.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501BC03E9@PINK.zycie.pzu>

>-----Original Message-----
>From: Przemyslaw Czerpak [mailto:druzus@acn.waw.pl] 
>Sent: Friday, January 09, 2009 6:03 PM
>To: Harbour Project Main Developer List.
>Subject: Re: RE: [Harbour] Compile tests with OpenWatcom.

...

>Do not change it but use hbmk.bat to compile and link your .prg code.
>It generates link file automatically. You can look at it to 
>create your own cutomized version if necessary.
>
>best regards,
>Przemek
>

Oh, yes. Probably I had worse days :)

Now I try comile tests programs, and it now work. Try test :

C:\harbour\tests>hbmk alias
Open Watcom Linker Version 1.7
Portions Copyright (c) 1985-2002 Sybase, Inc. All Rights Reserved.
Source code is available under the Sybase Open Watcom Public License.
See http://www.openwatcom.org/ for details.
loading object files
searching libraries
Error! E2028: HB_FUN_TEST_ is an undefined reference
creating a Windows NT character-mode executable
file alias.obj(C:\harbour\tests\alias.c): undefined symbol HB_FUN_TEST_

Why ?

Regards,
Marek Horodyski
From druzus at acn.waw.pl  Mon Jan 12 09:16:06 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 12 09:12:38 2009
Subject: [Harbour] 2009-01-12 15:15 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090112141606.GA5581@34-mo7-2.acn.waw.pl>

2009-01-12 15:15 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/fm.c
  * harbour/include/hbwmain.c
    * use HeapAlloc( GetProcessHeap(), ... ) instead of LocalAlloc()
      when HB_FM_WIN32_ALLOC macro is set - Toninho's tests show that
      it's a little bit more efficient - thanks.

best regards
Przemek
From toninhofwi at yahoo.com.br  Mon Jan 12 11:09:56 2009
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Jan 12 10:08:25 2009
Subject: [Harbour] 2009-01-12 15:15 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20090112141606.GA5581@34-mo7-2.acn.waw.pl>
References: <20090112141606.GA5581@34-mo7-2.acn.waw.pl>
Message-ID: <gpqmm4lmcpnk1csma0a0m738q7gp5d6ami@4ax.com>

>2009-01-12 15:15 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/vm/fm.c
>  * harbour/include/hbwmain.c
>    * use HeapAlloc( GetProcessHeap(), ... ) instead of LocalAlloc()
>      when HB_FM_WIN32_ALLOC macro is set - Toninho's tests show that
>      it's a little bit more efficient - thanks.

thank you.

best regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From druzus at acn.waw.pl  Mon Jan 12 14:42:23 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 12 14:38:58 2009
Subject: [Harbour] Help with scope class checking
In-Reply-To: <200901061105.09494.teo@windtelsoft.com>
References: <200901061105.09494.teo@windtelsoft.com>
Message-ID: <20090112194223.GA10961@34-mo7-2.acn.waw.pl>

On Tue, 06 Jan 2009, Teo Fonrouge wrote:

Hi Teo,

> I'm building an Client/Server database library based on Harbour Objects, the 
> idea behind this is simple:
> ?* On the Server side:
> ? ?- An RDOServer object is created and starts listening for incoming clients 
> on a predetermined port, when an new client connect request is received, then 
> an Harbour Thread is fired and it polls for the client requests, tipically 
> the client will start the comunication with a TTable():New(). This Thread 
> will serve to the client for all the TTable objects required and process the 
> messages and then return to the client the result (as an serialized HB_ITEM).
> ?* On the Client side:
> ? ?- An TTable object is created *and if* his tablename is something 
> like "RDO://rdoserver.com:port/the_database_name.dbf", this will instantiate 
> an RDOCLient object and assign it to a data in the TTable object. The new 
> TTable object requested (in the "NEW" message) will be sended to the Server 
> (as an string with an classname id and serialized params) where the TTable 
> object will be created and then returned to the client (as an serialized 
> Object item) where it will be the assigned as the actual client TTable 
> object. Some of the TTable object messages/methods will be processed on the 
> server and the result returned to the client, i.e. when the database is 
> needed to be physically opened ( Table:Open() ) the "Open" method on the 
> Client will send the request to the Server where the "Open" method will be 
> executed, the result is returned to the client.
> ? * Remarks
> ? ? - TTable Class is part the opensource wxHarbour library 
> (http://sourceforge.net/projects/wxharbour/)
> ? ? - Both the Client and the Server class definitions are exactly equal, they 
> differ only when an Client request TTable is needed.
> ? ? - Sorry for my bad english.
> 
> ? * The Help I request:
> ? ? - I need to be able to bypass the scope class checking when an method 
> needs to be executed on the Server side (check the function 
> TRDOSOCKETBASE_PROCESSCLIENTREQUESTS on the attached cpp source code). 
> Currently I cannot execute the private/protected methods on the Server side 
> and this messages/methods need to be executed *as if* they were executed on 
> the Client. Please check this function on the attached source code.

The class scoping is not only protection against executing methods from
external code. It's also used to chose valid method when nameconflict
appears. It's possible to disable scoping but in such way you will also
lost real private/hidden messages. F.e. this code perfectly well works
in Harbour though two classes uses hidden instance variable with the same
name: 'v'. Harbour uses scopes to resolve name conflicts.

   #include "hbclass.ch"

   create class cls1
      var v init 0 hidden
   exported:
      method inc inline ++::v
   endclass

   create class cls2 from cls1
      var v hidden
   exported:
      method touch inline ::v := seconds()
      method last inline ::v
   endclass

   proc main()
      local o := cls2():new()
      ? o:inc()
      ? o:last()
      wait
      o:touch()
      ? o:inc()
      ? o:last()
      wait
      o:touch()
      ? o:inc()
      ? o:last()
      wait
   return

If you disable scoping then this code will not longer work.
Just simply the same code:
   ::v
is used to access two different instance variables and the valid
one is chosen using the class of method which executes it.
Please also note that such protection is very important when you
are working on bigger project in a team. You do not have to worry
that name conflicts in subclasses written by other developers will
break your code. It also eliminates possible mistakes and incorrect
assigning hidden data of other classes.

> Any help, insight, criticism are welcome in this order, no, just kidding :), 
> please provide any help, idea or whatever.

It's not clear for me why you want to execute hidden or protected messages
from external code. If someone defines some messages with restrict scope
then he usually intentionally want to protect them against unauthorized
access. If scoping breaks some functionality necessary for external code
then class definition should be changed otherwise the scoping is reduce
to source code decoration.

> PD: I have checked the hb_dbgObjSendMessagge() (classes.c) and it seems that 
> it does what I want, but I'm a little lost in understand the details.

Yes, it does. It's helper function for debugger which allow to execute
messages setting execution context (scope) to given HVM stack frame.
In debugger iProcLevel parameter is used to set the same scope as for
the .prg code which is currently debugged. If it's 0 then scope is set
like for methods of pObject so you can execute any hidden methods defined
in pObject class but it's not enough to execute hidden messages defined
in parent classes. This is not intentional but result of my typo and
I'll change it because now it does not make what I defined that it should.
The line 2420:
      pBase->item.asSymbol.stackstate->uiClass = uiClass;
should be changed to:
      pBase->item.asSymbol.stackstate->uiClass = pMethod->uiSprClass;

The iParamOffset is an offset to parameters in current function frame.
To use this function you have define function visible for .prg code and
call it instead of directly sending messages. In debugger __DBGSENDMSG()
is used for it.
You can create your own functions with such functionality, f.e.:
   HB_FUNC( __MYSENDMSG )
   {
      PHB_ITEM pObject = hb_param( 1, HB_IT_ANY );
      PHB_ITEM pMessage = hb_param( 2, HB_IT_SYBOL | HB_IT_STRING );
      hb_dbgObjSendMessage( 0, pObject, pMessage, 3 );
   }
and in your C code call this (pass parameters to HVM stack and execute
hb_vmDo( 2 + <n> ) ) instead of sending messages directly to pObject, f.e.:

   static PHB_DYNS s___mySendMsg = NULL;
   [...]
   if( s___mySendMsg == NULL )
      hb_dynsymGetCase( "__MYSENDMSG" );
   hb_vmPushDynSym( s___mySendMsg );
   hb_vmPushNil();
   hb_vmPush( pMessage );
   hb_vmPush( pObject );
   for( ui = 0; ui < uiPCount; ++ui )
      hb_vmPush( pParam[ ui ] );
   hb_vmDo( uiPCount + 2 );

The intermediate function is necessary to create frame where we can set
valid execution context (scope).
__MYSENDMSG should be visible for HVM (hb_dynsymFind()) so it should be
REQUEST-ed in your .prg code.
It will work but this method disables automatic name conflict resolving
so if you have hidden methods using same name defined in different subclasses
then you will execute only and always the last one. In the above example
you will access 'v' from cls2 but you will not be able to access 'v' from
cls1.
For your own use it maybe enough but the above should not be used as
documented Harbour method in some generic code. It's programmer job to
properly define class members scopes to not create any of such hacks
in upper level code which uses objects of given class.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Jan 12 15:19:28 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 12 15:19:44 2009
Subject: [Harbour] Viktor - where are you
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501BC003C@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501BC003C@PINK.zycie.pzu>
Message-ID: <18d502870901121219l28fdbeb1o86d306d009075408@mail.gmail.com>

Hello Marek and all,
I'm alive and well (after breathing some fresh air outside this list), I
was/am
pretty busy with other things, amongst these some local large apps were
by now converted to Harbour (Win/OSX, Linux to follow soon) for the most
part
(I've found conversion to be an indefinite process, so I cannot say
"fully").
By now there is a pretty big (and probably useful) bunch of local patches
which
I'd like to submit sometimes in the future. The first half was committed
by Przemek already (many thanks for the great job!). I can send the second
half to the list, maybe you can all help them to be committed. Many of
these
changes were addressing codepage and hbct lib issues. Also, I have a local
list of TOFIXes about issues found with Harbour. Weekend's news is line
drawing
support for GTWVT regardless of the codepage used (plus CP selection was
fixed),
this works in both Unicode and non-Unicode mode. This makes it possible
to abandon DOS codepages without losing drawing chars.

I've seen very nice Christmas presents contributed to Harbour, and I also
have one, my CUI windowing layer is now ready to be committed, pls
decide if it should make it into Harbour, and where. The layer is similar
to CTWIN, but it allows to write to background windows and handles
overlapping windows much better in general.

BTW, Harbour in real life environments seems very-very stable.

Keep up the good work folks, I'm trying to catch up with the list and
contribute as soon as I can.

Brgds and Happy New Year to you all,
Viktor

On Thu, Jan 8, 2009 at 4:46 PM, Horodyski Marek (PZUZ) <
M.Horodyski@pzuzycie.com.pl> wrote:

> ?
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090112/c8f81471/attachment.html
From druzus at acn.waw.pl  Mon Jan 12 15:28:36 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 12 15:26:31 2009
Subject: [Harbour] Help with scope class checking
In-Reply-To: <20090112194223.GA10961@34-mo7-2.acn.waw.pl>
References: <200901061105.09494.teo@windtelsoft.com>
	<20090112194223.GA10961@34-mo7-2.acn.waw.pl>
Message-ID: <20090112202836.GA4058@34-mo7-2.acn.waw.pl>

On Mon, 12 Jan 2009, Przemyslaw Czerpak wrote:

Hi,

> in parent classes. This is not intentional but result of my typo and
> I'll change it because now it does not make what I defined that it should.
> The line 2420:
>       pBase->item.asSymbol.stackstate->uiClass = uiClass;
> should be changed to:
>       pBase->item.asSymbol.stackstate->uiClass = pMethod->uiSprClass;

Ups. It's not a typo. I've just look carefully at the code and it's
correct. The real class is extracted later from METHOD structure so
it works as I wanted.

best regards,
Przemek
From info at fsgiudice.com  Mon Jan 12 15:28:29 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jan 12 15:29:32 2009
Subject: [Harbour] Viktor - where are you
In-Reply-To: <18d502870901121219l28fdbeb1o86d306d009075408@mail.gmail.com>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501BC003C@PINK.zycie.pzu>
	<18d502870901121219l28fdbeb1o86d306d009075408@mail.gmail.com>
Message-ID: <496BA7ED.7040802@fsgiudice.com>

Hi Viktor,

Il 12/01/2009 21.19, Viktor Szak?ts ha scritto:
> Hello Marek and all,
> 
[snip]
> 
> Keep up the good work folks, I'm trying to catch up with the list and 
> contribute as soon as I can.
> 
> Brgds and Happy New Year to you all,

Nice to see you around,

best regards

Francesco

From druzus at acn.waw.pl  Mon Jan 12 17:35:53 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 12 17:32:27 2009
Subject: [Harbour] 2009-01-12 23:35 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090112223553.GA8201@34-mo7-2.acn.waw.pl>

2009-01-12 23:35 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/cdpapi.c
  * harbour/source/rtl/langapi.c
    * increase maximum number of lang and codepage modules from 64 to 128
      (we already have more then 64)

  * harbour/include/hbgtinfo.ch
    + added HB_GTI_BOXCP - it allows to chose CP for given characters put
      by DISPBOX() and similar box drawing functions.

  * harbour/source/rtl/gttrm/gttrm.c
    + added support for HB_GTI_BOXCP. Now it's possible to change the CP
      used for box drawing characters. Before this modification is was
      hardcoded to "EN"
    * use codepage set by HB_SET{DISP|TERM}CP() also for box characters
      if last parameter <lBox> is true
    This functionality (using different CP for box drawing characters)
    is available only if terminal works in Unicode mode (UTF8).

best regards
Przemek
From zen25000 at zen.co.uk  Mon Jan 12 19:36:34 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Mon Jan 12 19:36:37 2009
Subject: [Harbour] Using /contrib/hbtpathy fuctions in Linux
In-Reply-To: <21406238.post@talk.nabble.com>
References: <21339751.post@talk.nabble.com>
	<20090109101019.GA19385@34-mo7-2.acn.waw.pl>
	<21370374.post@talk.nabble.com>
	<20090109120333.GA31535@34-mo7-2.acn.waw.pl>
	<21406238.post@talk.nabble.com>
Message-ID: <21427189.post@talk.nabble.com>


OK it's not Harbour that has caused this as I have checked in another
installation and new compiles run OK in the same Linux build. Very strange!

Barry Jackson wrote:
> 
> Yesterday I checked out the latest svn and updated to rev10031 and latest
> xhgtk  I am now finding that my GUI executables will only launch from a
> terminal and not directly. Has something changed in Harbour or xhgtk to
> cause this? 
> F.e. xhgtk/samples/classes/button.prg compiled on 3/1/2009 will run by
> clicking the executable from Dolphin file manager, the same code compiled
> now will only run by launching from a terminal. The produced file sizes
> and permissions are the same.
> Any ideas what may be the cause?
> 

-- 
View this message in context: http://www.nabble.com/Using--contrib-hbtpathy-fuctions-in-Linux-tp21339751p21427189.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Mon Jan 12 21:53:28 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Jan 12 21:53:31 2009
Subject: [Harbour] Viktor - where are you
In-Reply-To: <496BA7ED.7040802@fsgiudice.com>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501BC003C@PINK.zycie.pzu>
	<18d502870901121219l28fdbeb1o86d306d009075408@mail.gmail.com>
	<496BA7ED.7040802@fsgiudice.com>
Message-ID: <21428562.post@talk.nabble.com>




Francesco Saverio Giudice wrote:
> 
> Hi Viktor,
> 
> Il 12/01/2009 21.19, Viktor Szak?ts ha scritto:
>> Hello Marek and all,
>> 
> [snip]
>> 
>> Keep up the good work folks, I'm trying to catch up with the list and 
>> contribute as soon as I can.
>> 
>> Brgds and Happy New Year to you all,
> 
> Nice to see you around,
> 
> best regards
> 
> Francesco
> 

+1

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/Viktor---where-are-you-tp21354401p21428562.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mhsabado at gmail.com  Tue Jan 13 02:05:58 2009
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Tue Jan 13 02:06:19 2009
Subject: [Harbour] Hb_GtInfo( HB_GTI_CLOSABLE, .F. ) Not Working?
Message-ID: <496C3D56.8010304@gmail.com>

>
> Message: 5
> Date: Thu, 8 Jan 2009 18:54:39 -0800 (PST)
> From: Pritpal Bedi <bedipritpal@hotmail.com>
> Subject: Re: [Harbour] Hb_GtInfo( HB_GTI_CLOSABLE, .F. ) Not Working?
> To: harbour@harbour-project.org
> Message-ID: <21365368.post@talk.nabble.com>
> Content-Type: text/plain; charset=us-ascii
>
>
> Hi
>
>
> Mario H. Sabado wrote:
>   
>> > 
>> > I noticed time that below code does not disable the close button of my 
>> > application.  Can somebody confirm?
>> > 
>> >  Hb_GtInfo( HB_GTI_CLOSABLE, .F. )
>> > 
>>     
>
> It works perfectly. Which GT - GTWVT or GTWVG ?
>
> Regards
> Pritpal Bedi
>   
Hello Pritbal,

Thanks for your reply.  I'm using GTWVT.

Regards,
Mario

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090113/ca1faa9f/attachment-0001.html
From M.Horodyski at pzuzycie.com.pl  Tue Jan 13 04:14:59 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Tue Jan 13 04:15:04 2009
Subject: [Harbour] Viktor - where are you
In-Reply-To: <18d502870901121219l28fdbeb1o86d306d009075408@mail.gmail.com>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501C37145@PINK.zycie.pzu>


 ________________________________

	From: Viktor Szak?ts [mailto:harbour.01@syenar.hu] 
	Sent: Monday, January 12, 2009 9:19 PM
	To: Harbour Project Main Developer List.
	Subject: Re: [Harbour] Viktor - where are you
	
	
	Hello Marek and all, 
	[ ...] 
	
	Keep up the good work folks, I'm trying to catch up with the list and 
	contribute as soon as I can.
	
	
	Brgds and Happy New Year to you all,
	Viktor
	 

We'd love to see you again. 
Your work make us way. 
 
Regards,
Marek Horodyski
From toninhofwi at yahoo.com.br  Tue Jan 13 05:58:26 2009
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Jan 13 04:56:52 2009
Subject: [Harbour] Viktor - where are you
In-Reply-To: <18d502870901121219l28fdbeb1o86d306d009075408@mail.gmail.com>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501BC003C@PINK.zycie.pzu>
	<18d502870901121219l28fdbeb1o86d306d009075408@mail.gmail.com>
Message-ID: <jssom4dm0vn4v7i3f7tqou6ap760te1maq@4ax.com>

>Happy New Year to you all,

Same for you, glad to see you again,

regards,

Toninho.


	

	
		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From druzus at acn.waw.pl  Tue Jan 13 08:07:43 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jan 13 08:04:07 2009
Subject: [Harbour] 2009-01-13 14:07 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090113130743.GA29864@34-mo7-2.acn.waw.pl>

2009-01-13 14:07 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/common.mak
  * harbour/source/rtl/Makefile
  * harbour/include/hbapifs.h
  * harbour/include/hbextern.ch
  + harbour/source/rtl/hbproces.c
  + harbour/source/rtl/hbprocfn.c
    + added C functions hb_fsOpenProcess(), hb_fsProcessValue(),
      hb_fsCloseProcess()
    + added .prg functions HB_OPENPROCESS(), HB_PROCESSVALUE(),
      HB_CLOSEPROCESS()
    Based on xHarbour code by Giancarlo Niccolai.
    Warning: it's possible that they will be changed in the future.
    Please test current implementation. Now few notes about it.
    Each handle returned by HB_OPENPROCESS() have to be closed
    by HB_PROCESSVALUE(). Even if process is killed by HB_CLOSEPROCESS()
    its handle is still open and HB_PROCESSVALUE() has to be executed.
    Type of handle depends on OS. In *nixes it's process PID. In MS-Windows
    it's HANDLE. HB_PROCESSVALUE() attach process exit result in *nixes
    cleaning zombie processes and in Windows closing the HANDLE. If you
    do not call this function then you will have resource leak.
    HB_CLOSEPROCESS() only sends quite request to the process but does
    not execute any cleanup code.
    All communication handles returned in parameters by reference by
    HB_OPENPROCESS() function have to be closed using FCLOSE() function.
    If hStdOut and hStdErr are references to the same variables then
    executing process stdout and stderr is redirected to the only one
    pipe. When handles for stdout, stderr and stdin are not given then
    executed process inherits them from parent process unless <lDetach>
    parameter is not given. In such case they are redirected to null
    device (/dev/null or NUL).
    The OS2 version is not tested. Please make tests.
    There is no support for DOS which is single process OS.
    In WinCE builds std{out,err,in} redirecting and process detaching does
    not work too.
    The parameters parsing should be updated. Now MS-Windows version uses
    native OS command line parsing and quoting by "" can be used for
    parameters with blank characters. I do not know any escape character
    which can be used to pass (") as parameter to MS-Windows application.
    In all other OS-es standard bourne shell rules are used. Parameters can
    be quoted by "" or '' and escape character is \. Quoting by '' disables
    special meaning of escape character. In OS2 where \ is path separator
    escaping and '' quoting is disabled so it works like in MS-Windows
    but I do not know if parameters divided by calling process are fully
    respected by low level API calls in this system.

best regards
Przemek
From harbour.01 at syenar.hu  Tue Jan 13 09:33:50 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Jan 13 09:33:56 2009
Subject: [Harbour] 2009-01-13 14:07 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20090113130743.GA29864@34-mo7-2.acn.waw.pl>
References: <20090113130743.GA29864@34-mo7-2.acn.waw.pl>
Message-ID: <18d502870901130633w23b22945s9cd58cf287cbfeb1@mail.gmail.com>

Hi Przemek,
I'd suggest to use following function names, to keep them in the same
"namespace":
HB_PROCESSOPEN()
HB_PROCESSVALUE() (unchanged)
HB_PROCESSCLOSE()
hb_fsProcessOpen()
hb_fsProcessValue() (unchanged)
hb_fsProcessClose()

[ Slightly related to this, I've a pending addition of WIN_RUNDETACHED() to
hbwin.lib. ]

Brgds,
Viktor

On Tue, Jan 13, 2009 at 2:07 PM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:

> 2009-01-13 14:07 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/common.mak
>  * harbour/source/rtl/Makefile
>  * harbour/include/hbapifs.h
>  * harbour/include/hbextern.ch
>  + harbour/source/rtl/hbproces.c
>  + harbour/source/rtl/hbprocfn.c
>    + added C functions hb_fsOpenProcess(), hb_fsProcessValue(),
>      hb_fsCloseProcess()
>    + added .prg functions HB_OPENPROCESS(), HB_PROCESSVALUE(),
>      HB_CLOSEPROCESS()
>    Based on xHarbour code by Giancarlo Niccolai.
>    Warning: it's possible that they will be changed in the future.
>    Please test current implementation. Now few notes about it.
>    Each handle returned by HB_OPENPROCESS() have to be closed
>    by HB_PROCESSVALUE(). Even if process is killed by HB_CLOSEPROCESS()
>    its handle is still open and HB_PROCESSVALUE() has to be executed.
>    Type of handle depends on OS. In *nixes it's process PID. In MS-Windows
>    it's HANDLE. HB_PROCESSVALUE() attach process exit result in *nixes
>    cleaning zombie processes and in Windows closing the HANDLE. If you
>    do not call this function then you will have resource leak.
>    HB_CLOSEPROCESS() only sends quite request to the process but does
>    not execute any cleanup code.
>    All communication handles returned in parameters by reference by
>    HB_OPENPROCESS() function have to be closed using FCLOSE() function.
>    If hStdOut and hStdErr are references to the same variables then
>    executing process stdout and stderr is redirected to the only one
>    pipe. When handles for stdout, stderr and stdin are not given then
>    executed process inherits them from parent process unless <lDetach>
>    parameter is not given. In such case they are redirected to null
>    device (/dev/null or NUL).
>    The OS2 version is not tested. Please make tests.
>    There is no support for DOS which is single process OS.
>    In WinCE builds std{out,err,in} redirecting and process detaching does
>    not work too.
>    The parameters parsing should be updated. Now MS-Windows version uses
>    native OS command line parsing and quoting by "" can be used for
>    parameters with blank characters. I do not know any escape character
>    which can be used to pass (") as parameter to MS-Windows application.
>    In all other OS-es standard bourne shell rules are used. Parameters can
>    be quoted by "" or '' and escape character is \. Quoting by '' disables
>    special meaning of escape character. In OS2 where \ is path separator
>    escaping and '' quoting is disabled so it works like in MS-Windows
>    but I do not know if parameters divided by calling process are fully
>    respected by low level API calls in this system.
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090113/a7d0188b/attachment.html
From bedipritpal at hotmail.com  Tue Jan 13 10:24:52 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Jan 13 10:24:56 2009
Subject: [Harbour] 2009-01-13 07:17 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <21437863.post@talk.nabble.com>


2009-01-13 07:17 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/gtwvg.c
    ! Synchronized with GTWVT as per change below ( Przemek ):
    + Added 'layered' window support. It's enabled on W2K
      and above (and only when not in Terminal Services
      environment, because it makes it perform worse). This
      way the screen is also properly displayed regardless
      of what the Harbour application does. It also fixes
      numerous paint artifacts, when GTWVT window was in
      the background and another window is moved in front
      of it.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2009-01-13-07%3A17-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp21437863p21437863.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From info at fsgiudice.com  Tue Jan 13 11:00:46 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Jan 13 11:01:21 2009
Subject: [Harbour] 2009-01-13 14:07 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20090113130743.GA29864@34-mo7-2.acn.waw.pl>
References: <20090113130743.GA29864@34-mo7-2.acn.waw.pl>
Message-ID: <496CBAAE.1070502@fsgiudice.com>

Hi Przemek,

Il 13/01/2009 14.07, Przemyslaw Czerpak ha scritto:
> 2009-01-13 14:07 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)

thank you very much.
About names I vote for Vitkor proposal hb_Process*() leaving defines for 
hbcompat

Thanks again.

Best regards

Francesco

From teo at windtelsoft.com  Tue Jan 13 11:05:38 2009
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Tue Jan 13 12:04:25 2009
Subject: [Harbour] Help with scope class checking
In-Reply-To: <20090112194223.GA10961@34-mo7-2.acn.waw.pl>
References: <200901061105.09494.teo@windtelsoft.com>
	<20090112194223.GA10961@34-mo7-2.acn.waw.pl>
Message-ID: <200901131005.38688.teo@windtelsoft.com>

On Monday 12 January 2009 01:42:23 pm Przemyslaw Czerpak wrote:
> On Tue, 06 Jan 2009, Teo Fonrouge wrote:
>
> Hi Teo,
>
> > I'm building an Client/Server database library based on Harbour Objects,
> > the idea behind this is simple:
> > ?* On the Server side:
> > ? ?- An RDOServer object is created and starts listening for incoming
> > clients on a predetermined port, when an new client connect request is
> > received, then an Harbour Thread is fired and it polls for the client
> > requests, tipically the client will start the comunication with a
> > TTable():New(). This Thread will serve to the client for all the TTable
> > objects required and process the messages and then return to the client
> > the result (as an serialized HB_ITEM). * On the Client side:
> > ? ?- An TTable object is created *and if* his tablename is something
> > like "RDO://rdoserver.com:port/the_database_name.dbf", this will
> > instantiate an RDOCLient object and assign it to a data in the TTable
> > object. The new TTable object requested (in the "NEW" message) will be
> > sended to the Server (as an string with an classname id and serialized
> > params) where the TTable object will be created and then returned to the
> > client (as an serialized Object item) where it will be the assigned as
> > the actual client TTable object. Some of the TTable object
> > messages/methods will be processed on the server and the result returned
> > to the client, i.e. when the database is needed to be physically opened (
> > Table:Open() ) the "Open" method on the Client will send the request to
> > the Server where the "Open" method will be executed, the result is
> > returned to the client.
> > ? * Remarks
> > ? ? - TTable Class is part the opensource wxHarbour library
> > (http://sourceforge.net/projects/wxharbour/)
> > ? ? - Both the Client and the Server class definitions are exactly equal,
> > they differ only when an Client request TTable is needed.
> > ? ? - Sorry for my bad english.
> >
> > ? * The Help I request:
> > ? ? - I need to be able to bypass the scope class checking when an method
> > needs to be executed on the Server side (check the function
> > TRDOSOCKETBASE_PROCESSCLIENTREQUESTS on the attached cpp source code).
> > Currently I cannot execute the private/protected methods on the Server
> > side and this messages/methods need to be executed *as if* they were
> > executed on the Client. Please check this function on the attached source
> > code.
>
> The class scoping is not only protection against executing methods from
> external code. It's also used to chose valid method when nameconflict
> appears. It's possible to disable scoping but in such way you will also
> lost real private/hidden messages. F.e. this code perfectly well works
> in Harbour though two classes uses hidden instance variable with the same
> name: 'v'. Harbour uses scopes to resolve name conflicts.
>
>    #include "hbclass.ch"
>
>    create class cls1
>       var v init 0 hidden
>    exported:
>       method inc inline ++::v
>    endclass
>
>    create class cls2 from cls1
>       var v hidden
>    exported:
>       method touch inline ::v := seconds()
>       method last inline ::v
>    endclass
>
>    proc main()
>       local o := cls2():new()
>       ? o:inc()
>       ? o:last()
>       wait
>       o:touch()
>       ? o:inc()
>       ? o:last()
>       wait
>       o:touch()
>       ? o:inc()
>       ? o:last()
>       wait
>    return
>
> If you disable scoping then this code will not longer work.
>
> Just simply the same code:
>    ::v
>
> is used to access two different instance variables and the valid
> one is chosen using the class of method which executes it.
> Please also note that such protection is very important when you
> are working on bigger project in a team. You do not have to worry
> that name conflicts in subclasses written by other developers will
> break your code. It also eliminates possible mistakes and incorrect
> assigning hidden data of other classes.

Hello Przemek,

I'm aware of and also take advantage of such great functionality.

>
> > Any help, insight, criticism are welcome in this order, no, just kidding
> > :), please provide any help, idea or whatever.
>
> It's not clear for me why you want to execute hidden or protected messages
> from external code. If someone defines some messages with restrict scope
> then he usually intentionally want to protect them against unauthorized
> access. If scoping breaks some functionality necessary for external code
> then class definition should be changed otherwise the scoping is reduce
> to source code decoration.

The reason is that I want to execute the same messages in the same 
instantiated (object) class type, but, in two possible ways: one as a Client 
machine, and the other as a Server.

Let me describe it in a simplistic way:

I have a TTable class that is able of handle all the things that one can do 
with a database via object messages (methods):

  - TTable:Open ; opens a database.
  - TTable:Skip ; skips a record
  - TTable:Read ; read the database fields to TField's list.
  - TTable:FieldByName("fieldName") ; returns a TField object
  - TTable:Seek ; seeks for a key in an index.
  - ... and so on.

Then, suppose that I want to open a remote database and change some field 
values, i.e.:

/* start prg code */
FUNCTION Main
  LOCAL table  // will contain a TTable object
  LOCAL fldSalary  // will contain a TNumericField object

  /* this will create a Socket with the server 
     open locally the database: TTable:New("test.dbf") 
     and return the object to the Client. */
  table := TTable():New( "rdo://myserver.com:8000/test.dbf" )

  fldSalary := table:FieldByName( "salary" )

  /* this will execute, in the Server, the ::Seek( "PETER" )
     (and return to the Client the seek result) */
  table:Seek( "PETER" )
  
  /* this will execute, in the Server, the ::Eof() which will return
     the eof value (boolean) to the Client. */
  IF table:Eof()
    ? "Peter is not here."
    QUIT
  ENDIF

  /* this will, on the Server, assign the field value of "salary"
     to the current value of the same field times 1.2 */
  fldSalary:Value := fldSalary:Value * 1.2 // we increase 20% his salary

  /* This will close the database on the Server
     and destroy the Socket */
  table:Close()

RETURN NIL
/* end prg code */

In this case, all the messages called are public ones, but in some 
implementation (even in the TTable itself) there is desirable to have 
private/protected messages too, and those need to be executed on the Server.

Currently I have the implementation of sending the messages from a Client 
machine to a Server one, right on the METHOD body, i.e the ::Eof method is 
something like:

/* start prg code */
CLASS TTable FROM TObject
  (...)
  METHOD Eof
  (...)
ENDCLASS

METHOD FUNCTION Eof CLASS TTable
 
  /* here checks if we are a remote Client accessing a Server */
  IF ::ThisIsClientMachine
    RETURN ::SendToServer()
  ENDIF

RETURN ::Alias:Eof()

/* end prg code */

Here ::SendToServer is the C function that connects trough the socket to the 
Server and request the execution of the ::Eof method on the Server.

And even it'll be possible to define some functionality in a inherited class, 
and this functionality will work right on the Server side, something 
like "stored procedures", i.e.:

/* start prg code */
CLASS MyTTable FROM TTable
  METHOD IncreaseSalary( percent )
ENDCLASS

METHOD PROCEDURE IncreaseSalary( percent ) CLASS MyTTable
  LOCAL fldSalary

  IF ::ThisIsClientMachine
    ::SendToServer( percent )
    RETURN
  ENDIF

  fldSalary := ::FieldByName( "salary" )
  fldSalary:Value *= ( percent / 100 + 1 )

RETURN

/* end prg code */

At this moment this is still work on progress.

>
> > PD: I have checked the hb_dbgObjSendMessagge() (classes.c) and it seems
> > that it does what I want, but I'm a little lost in understand the
> > details.
>
> Yes, it does. It's helper function for debugger which allow to execute
> messages setting execution context (scope) to given HVM stack frame.
> In debugger iProcLevel parameter is used to set the same scope as for
> the .prg code which is currently debugged. If it's 0 then scope is set
> like for methods of pObject so you can execute any hidden methods defined
> in pObject class but it's not enough to execute hidden messages defined
> in parent classes. This is not intentional but result of my typo and
> I'll change it because now it does not make what I defined that it should.
> The line 2420:
>       pBase->item.asSymbol.stackstate->uiClass = uiClass;
> should be changed to:
>       pBase->item.asSymbol.stackstate->uiClass = pMethod->uiSprClass;
>
> The iParamOffset is an offset to parameters in current function frame.
> To use this function you have define function visible for .prg code and
> call it instead of directly sending messages. In debugger __DBGSENDMSG()
> is used for it.
> You can create your own functions with such functionality, f.e.:
>    HB_FUNC( __MYSENDMSG )
>    {
>       PHB_ITEM pObject = hb_param( 1, HB_IT_ANY );
>       PHB_ITEM pMessage = hb_param( 2, HB_IT_SYBOL | HB_IT_STRING );
>       hb_dbgObjSendMessage( 0, pObject, pMessage, 3 );
>    }
> and in your C code call this (pass parameters to HVM stack and execute
> hb_vmDo( 2 + <n> ) ) instead of sending messages directly to pObject, f.e.:
>
>    static PHB_DYNS s___mySendMsg = NULL;
>    [...]
>    if( s___mySendMsg == NULL )
>       hb_dynsymGetCase( "__MYSENDMSG" );
>    hb_vmPushDynSym( s___mySendMsg );
>    hb_vmPushNil();
>    hb_vmPush( pMessage );
>    hb_vmPush( pObject );
>    for( ui = 0; ui < uiPCount; ++ui )
>       hb_vmPush( pParam[ ui ] );
>    hb_vmDo( uiPCount + 2 );
>
> The intermediate function is necessary to create frame where we can set
> valid execution context (scope).
> __MYSENDMSG should be visible for HVM (hb_dynsymFind()) so it should be
> REQUEST-ed in your .prg code.

Thanks, now I know the details to implement it.

> It will work but this method disables automatic name conflict resolving
> so if you have hidden methods using same name defined in different
> subclasses then you will execute only and always the last one. In the above
> example you will access 'v' from cls2 but you will not be able to access
> 'v' from cls1.

I understand and I'll take it in count.

> For your own use it maybe enough but the above should not be used as
> documented Harbour method in some generic code. It's programmer job to
> properly define class members scopes to not create any of such hacks
> in upper level code which uses objects of given class.

I completely agree.

>
> best regards,
> Przemek


ThanksE100 Przemek.



best regards,

Teo
From dbtopas at dbtopas.lt  Tue Jan 13 13:05:05 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Jan 13 13:07:02 2009
Subject: [Harbour] ChangeLog 2009-01-13 20:00 UTC+0200 Mindaugas Kavaliauskas
Message-ID: <496CD7D1.9000504@dbtopas.lt>

2009-01-13 20:00 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * harbour/contrib/rddads/adsx.c
     * improved code to solve RDD initialisation order problem
   * harbour/contrib/rddsql/sqlbase.c
     ! fixed minor typo
   * harbour/source/pp/hbpp.c
   * harbour/source/compiler/hbusage.c
     * updated copyright year to 2009
From harbour.01 at syenar.hu  Tue Jan 13 14:09:54 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Jan 13 14:11:34 2009
Subject: [Harbour] Compiling harbour on PellesC for wince
In-Reply-To: <8812C435A49C45229DC4D40DE9473E4A@PEPELUIS3>
References: <609353e70901070508l716c80c4kfed35184c419f3c6@mail.gmail.com>
	<c331a2ee0901101230j8b3e367ga4efe33e8d455ae4@mail.gmail.com>
	<8812C435A49C45229DC4D40DE9473E4A@PEPELUIS3>
Message-ID: <18d502870901131109q77027cdew7901348090e5990d@mail.gmail.com>

Jose,
I use these:
---
set HB_CROSS_BIN_DIR=C:\!hb\_cross_compile
set HB_BIN_COMPILE=%HB_CROSS_BIN_DIR%
set HB_PPGEN_PATH=%HB_CROSS_BIN_DIR%
set HB=%HB_CROSS_BIN_DIR%\harbour.exe
set HBPP=%HB_CROSS_BIN_DIR%\hbpp.exe
---

This should work for both GNU and non-GNU makes, unfortunately
the cross compilation envvar names are not synced, but above
will set them all. In your example, there is no 'HB' envvar, that's
why it fails. [ also see my previous examples on this list ]

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090113/d96aade8/attachment.html
From teo at windtelsoft.com  Tue Jan 13 14:23:18 2009
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Tue Jan 13 15:29:07 2009
Subject: [Harbour] "Self" variable is not showed in debugger
Message-ID: <200901131323.19066.teo@windtelsoft.com>

Hello,

As subject. The following sample will not show the Self variable in the 
Monitor->Local menu option when compiled with -b option:

/* start prg code */
#include "hbclass.ch"

FUNCTION Main

  t := Test1():New( 1 )

RETURN NIL

CLASS Test1
  DATA v
  METHOD New
ENDCLASS

METHOD New( p1 ) CLASS Test1
  AltD()
  ::v := p1
RETURN Self
/* end prg code */


best regards,

Teo
From druzus at acn.waw.pl  Tue Jan 13 16:22:55 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jan 13 16:19:18 2009
Subject: [Harbour] "Self" variable is not showed in debugger
In-Reply-To: <200901131323.19066.teo@windtelsoft.com>
References: <200901131323.19066.teo@windtelsoft.com>
Message-ID: <20090113212255.GA19827@34-mo7-2.acn.waw.pl>

On Tue, 13 Jan 2009, Teo Fonrouge wrote:

Hi Teo,

> As subject. The following sample will not show the Self variable in the 
> Monitor->Local menu option when compiled with -b option:
[...]

because now it's fully optimized during compilation. If you want to
disable this optimization then use -kJ compiler switch.
BTW maybe we should disable some optimizations automatically when -b
Harbour compiler switch is used.
What is the group opinion?

best regards,
Przemek
From druzus at acn.waw.pl  Tue Jan 13 16:44:55 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jan 13 16:41:19 2009
Subject: [Harbour] 2009-01-13 22:44 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090113214455.GA10794@34-mo7-2.acn.waw.pl>

2009-01-13 22:44 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/hb-func.sh
    ! restored GCC optimization flags in hb* scripts disabled unintentionally
      by some other modifications 

  * harbour/include/hbapifs.h
  * harbour/source/rtl/hbproces.c
    * renamed hb_fsOpenProcess() and hb_fsCloseProcess() to
      hb_fsProcessOpen(), hb_fsProcessClose()

  * harbour/include/hbextern.ch
  * harbour/source/rtl/hbprocfn.c
    * renamed hb_openProcess() and hb_closeProcess() to
      hb_processOpen(), hb_processClose()

  * harbour/contrib/xhb/hbcompat.ch
    * added xHarbour compatible translations
      hb_openProcess() <-> hb_processOpen()
      hb_closeProcess() <-> hb_processClose()

best regards
Przemek
From harbour.01 at syenar.hu  Tue Jan 13 16:57:28 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Jan 13 16:57:33 2009
Subject: [Harbour] 2009-01-13 22:44 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20090113214455.GA10794@34-mo7-2.acn.waw.pl>
References: <20090113214455.GA10794@34-mo7-2.acn.waw.pl>
Message-ID: <18d502870901131357x401c8187sd0a59f92639f71d5@mail.gmail.com>

Thanks a lot!
Brgds,
Viktor

On Tue, Jan 13, 2009 at 10:44 PM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:

> 2009-01-13 22:44 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/bin/hb-func.sh
>    ! restored GCC optimization flags in hb* scripts disabled
> unintentionally
>      by some other modifications
>
>  * harbour/include/hbapifs.h
>  * harbour/source/rtl/hbproces.c
>    * renamed hb_fsOpenProcess() and hb_fsCloseProcess() to
>      hb_fsProcessOpen(), hb_fsProcessClose()
>
>  * harbour/include/hbextern.ch
>  * harbour/source/rtl/hbprocfn.c
>    * renamed hb_openProcess() and hb_closeProcess() to
>      hb_processOpen(), hb_processClose()
>
>  * harbour/contrib/xhb/hbcompat.ch
>    * added xHarbour compatible translations
>      hb_openProcess() <-> hb_processOpen()
>      hb_closeProcess() <-> hb_processClose()
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090113/52bc5aa8/attachment-0001.html
From druzus at acn.waw.pl  Tue Jan 13 19:39:16 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jan 13 19:35:39 2009
Subject: [Harbour] 2009-01-14 01:38 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090114003916.GA22469@34-mo7-2.acn.waw.pl>

2009-01-14 01:38 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gtxwc/gtxwc.c
    ! added protection against inaccessible character cell value
      what could cause accessing uninitialized memory and GPF

  * harbour/include/hbrdddbf.h
    ! fixed HB_DIRTYREAD() macro not updated when RDDI_* settings were
      converted from global to thread local

  * harbour/source/rdd/dbf1.c
  * harbour/source/rdd/dbfntx/dbfntx1.c
  * harbour/source/rdd/dbfnsx/dbfnsx1.c
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
  * harbour/source/rdd/dbffpt/dbffpt1.c
    % replaced <RDD>NODE_DATA() and <RDD>AREA_DATA() macros defined
      in each RDD by common for all DBF bases RDDs DBFNODE_DATA() and
      DBFAREA_DATA() macros defined in hbrdddbf.h to reduce possible
      mistakes in code updating in the future

best regards
Przemek
From info at fsgiudice.com  Tue Jan 13 19:51:07 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Jan 13 19:51:17 2009
Subject: [Harbour] LOGCDX RDD
Message-ID: <496D36FB.80302@fsgiudice.com>

Hi,

I would like to share an USR RDD that permits to log to a file any DBF 
updates.
I have tested it with my xharbour repository, but it should works also 
with harbour.
It's a proof of concept done to check some problems I have at one 
customer that says that he losts some records. So I want to trace all 
changes to see if anyone delete records.

LOGCDX inherits from DBFCDX.

An example is:

#include "dbinfo.ch"

REQUEST LOGCDX

PROCEDURE Main()
    RDDSetDefault( "LOGCDX" )
    rddInfo( RDDI_MEMOVERSION, DB_MEMOVER_CLIP, "LOGCDX" )

    hb_LogCdxLogFileName( "changes.log" )
    hb_LogCdxTag( NETNAME() + "\" + hb_USERNAME() )
    hb_LogCdxActive( .T. )

    USE test
    field->name := "Francesco"

RETURN

Any comments are welcome.
If it can be useful I can upload to SVN.

Best Regards

Francesco
-------------- next part --------------
A non-text attachment was scrubbed...
Name: logcdx.prg
Type: application/x-prg
Size: 11118 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090114/f584b541/logcdx.bin
From druzus at acn.waw.pl  Tue Jan 13 20:25:02 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jan 13 20:21:25 2009
Subject: [Harbour] LOGCDX RDD
In-Reply-To: <496D36FB.80302@fsgiudice.com>
References: <496D36FB.80302@fsgiudice.com>
Message-ID: <20090114012502.GA17972@34-mo7-2.acn.waw.pl>

On Wed, 14 Jan 2009, Francesco Saverio Giudice wrote:

Hi Francesco,

> I would like to share an USR RDD that permits to log to a file any DBF 
> updates.
> I have tested it with my xharbour repository, but it should works also with 
> harbour.
> It's a proof of concept done to check some problems I have at one customer 
> that says that he losts some records. So I want to trace all changes to see 
> if anyone delete records.
> LOGCDX inherits from DBFCDX.
[...]
> Any comments are welcome.

I think that you can introduce simple DEFINE with small PP rules to
allow inheritance from any other RDD, f.e.:

   #define BASE_RDD  DBFCDX

   #xtranslate MACRO2STR( <x> ) => #<x>
   [...]
   REQUEST BASE_RDD
   [...]
   LOCAL cSuperRDD := MACRO2STR( BASE_RDD )

I do not see and CDX specific code and in above version it will
be more general. Maybe you should also change function names from
hb_LogCdx*() to hb_LogRdd*() and maybe RDD name or also used DEFINE
like:
   #define LOGRDD_NAME LOGCDX

> If it can be useful I can upload to SVN.

Yes, please do that. I think that some people will find very useful.

best regards,
Przemek
From philb at philb.us  Tue Jan 13 23:33:35 2009
From: philb at philb.us (Phil Barnett)
Date: Tue Jan 13 23:33:41 2009
Subject: [Harbour] "Self" variable is not showed in debugger
In-Reply-To: <20090113212255.GA19827@34-mo7-2.acn.waw.pl>
References: <200901131323.19066.teo@windtelsoft.com>
	<20090113212255.GA19827@34-mo7-2.acn.waw.pl>
Message-ID: <496D6B1F.4080801@philb.us>

Przemyslaw Czerpak wrote:
> On Tue, 13 Jan 2009, Teo Fonrouge wrote:
>
> Hi Teo,
>
>   
>> As subject. The following sample will not show the Self variable in the 
>> Monitor->Local menu option when compiled with -b option:
>>     
> [...]
>
> because now it's fully optimized during compilation. If you want to
> disable this optimization then use -kJ compiler switch.
> BTW maybe we should disable some optimizations automatically when -b
> Harbour compiler switch is used.
> What is the group opinion?
>
>   
Yes, that makes sense.
From dbtopas at dbtopas.lt  Wed Jan 14 08:11:39 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Jan 14 08:13:34 2009
Subject: [Harbour] ChangeLog 2009-01-14 15:10 UTC+0200 Mindaugas Kavaliauskas
Message-ID: <496DE48B.9000701@dbtopas.lt>

2009-01-14 15:10 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * harbour/source/compiler/hbopt.c
     * disabled code optimisation (selfifying local, removing local),
       if code is compiled using -b (debug) switch
From druzus at acn.waw.pl  Wed Jan 14 08:35:08 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 14 08:31:30 2009
Subject: [Harbour] ChangeLog 2009-01-14 15:10 UTC+0200 Mindaugas
	Kavaliauskas
In-Reply-To: <496DE48B.9000701@dbtopas.lt>
References: <496DE48B.9000701@dbtopas.lt>
Message-ID: <20090114133508.GA8408@34-mo7-2.acn.waw.pl>

On Wed, 14 Jan 2009, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> 2009-01-14 15:10 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
>   * harbour/source/compiler/hbopt.c
>     * disabled code optimisation (selfifying local, removing local),
>       if code is compiled using -b (debug) switch

Thank you.

best regards,
Przemek
From mbelgrano at deltain.it  Wed Jan 14 08:43:33 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Jan 14 08:43:37 2009
Subject: [Harbour] 2009-01-13 07:17 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <21437863.post@talk.nabble.com>
References: <21437863.post@talk.nabble.com>
Message-ID: <609353e70901140543v4698e140ieee9ae33eafb05ac@mail.gmail.com>

n xbase++ 1.9 sl1 you can still mix traditional SAY/GET or TBrowse() with
Graphical User Interface elements for an easy and fast migration. In
previous Xbase++ versions only some Xbase Parts have been able to use
visual-styles. With SL1 all Xbase Parts, even rather complex browser parts
or the tab-page, fully conform with the UI of the platform; this leads to a
more consistent and state-of-the-art end user experience.

This capabilty is also for gtwvg & harbour part?


2009/1/13 Pritpal Bedi <bedipritpal@hotmail.com>

>
> 2009-01-13 07:17 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>  * harbour/contrib/gtwvg/gtwvg.c
>    ! Synchronized with GTWVT as per change below ( Przemek ):
>    + Added 'layered' window support. It's enabled on W2K
>      and above (and only when not in Terminal Services
>      environment, because it makes it perform worse). This
>      way the screen is also properly displayed regardless
>      of what the Harbour application does. It also fixes
>      numerous paint artifacts, when GTWVT window was in
>      the background and another window is moved in front
>      of it.
>
> Regards
> Pritpal Bedi
> --
> View this message in context:
> http://www.nabble.com/2009-01-13-07%3A17-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp21437863p21437863.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090114/f873f85d/attachment-0001.html
From dbtopas at dbtopas.lt  Wed Jan 14 09:15:29 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Jan 14 09:17:23 2009
Subject: [Harbour] Re: Virtual machine comparison
In-Reply-To: <4961F6DF.5050203@dbtopas.lt>
References: <495A3E54.6080102@dbtopas.lt>	<20081231125930.GA10423@34-mo7-2.acn.waw.pl>	<495B7C2D.7040609@dbtopas.lt>	<20081231160000.GA6389@34-mo7-2.acn.waw.pl>
	<4961F6DF.5050203@dbtopas.lt>
Message-ID: <496DF381.6080202@dbtopas.lt>

Hi,


>> After last changes comparison table is (no -ko flags used):
>> No Test code               Harbour  PHP   Python Ruby   Java  Java+JIT
>> ----------------------------------+------+------+------+------+-------+
>>    10'000'000 times: 
>> 11 nJ+=nI*2+17               4.61   3.41   6.54  25.53   1.36    0.08
>> 12 nJ+=17+1+...+1+nI*2       4.61   6.10   6.62  45.86   1.36    0.08
>> 13 nJ+=nI*2+17+1+...+1      10.86   5.95  12.96  45.78   1.92    0.17
>>    200'000 times:
>> 21 cI:=cI+"a"                0.08   6.70   0.11  25.80 1641.766 1650.437
>> 22 cI+="a"                   0.08   0.07   0.12  25.83 1649.344 1654.735
>> 31 AADD(aI,{nI})             0.16   0.29   0.32   0.20   0.76    0.40
>> 32 AADD(aI,{aI[nI-1][1]+1})  0.25   0.34   0.38   0.39   0.92    0.40
>> -----------------------------------------------------------------------
>> So, we need to work on typed integer variable optimisation to be perfect :)
> 
> The -ko compiler switch will decrease the cost of 13 test above to 12
> level. Why you didn't use it?

actually, the reason is very simple. I was too lazy to compile test 
code, so, I've just run it using hbrun.exe. I was unable to add -ko 
switch, but I believe I'll get the same 4.61 for test13.


> I'm really under express of your job.

It was not so difficult, but more routine job. In a last few days/nights 
I moved dbtopas.lt domain to new openSUSE11.1 server. It was much more 
difficult. I still have some questions, but perhaps on private mail, 
since it is out of topic.


>> 1) non-terminal symbol should be lowercase
>> 2) terminal symbol can not be character. All ',', '(', ')' should be 
>> changed to some define, like C_COMMA, C_LBRACKET, C_RBRACKET, etc. And 
>> complex code has to be fixed to return these constants.
>> ... 
>> 7) Bison allows access symbols not from current rule. Actually ParamOne 
>> could be reached by $-1 from "middle C code", but these hacky solutions are 
>> not allowed in lemon.

I'll try to put my hands on this, but these days I have more ideas than 
time to implement it.


Best regards,
Mindaugas
From harbour.01 at syenar.hu  Wed Jan 14 10:30:56 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 14 10:31:02 2009
Subject: [Harbour] ChangeLog: 2009-01-14 16:15 UTC+0100 Viktor Szakats
Message-ID: <18d502870901140730i50949800g9e3656bac304199d@mail.gmail.com>

Here is all my patches, pls test and comment. It's possible some
mistakes crippled in, while applying/merging all these patches.
Also don't forget to check the TOFIX section at the end.

2009-01-14 16:15 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/net.c
  * contrib/hbziparc/hbziparc.prg
  * contrib/hbct/files.c
    * Minor formatting.

  * source/rtl/gtxwc/gtxwc.c
    ! Fix to recent fix. An '!' was missing, Przemek pls check me.

  * source/rtl/philes.c
    + HB_PROGNAME() now returns absolute path in *NIX systems, too.
      (please test and refine)

  * source/lang/msgca.c
    ! Fixes from xhb.

  * contrib/hbziparc/hbziparc.prg
    * Minor correction ( = -> := )

  * source/rtl/gtwin/gtwin.c
    + Added HB_GTI_CODEPAGE support.
      As per MS docs, this works only when non-raster font is used
      in the console window. Notice that the accepted CP values are
      different from the GTWVT ones (GTWIN being the more "logical"
      one, since it's a newer API). Currently, Harbour doesn't try
      to hide these interface details.
    ; TODO: UNICODE and BOX char support for GTWIN mode.

  * source/rtl/tbrowse.prg
    * Using HB_DISPOUTATBOX() to draw column/header/footer separators.
    ; NOTE: This may cause problems if someone wants to use native
            CP (accented or other special CP specific) chars to draw
            these screen elements. Maybe an option should be added,
            or some sort of markings in the separator strings to
            control that.
            Pls REVIEW.

  * include/hbextern.ch
  * source/rtl/console.c
    + Added HB_DISPOUTATBOX() which is similar to HB_DISPOUTAT(),
      but marks the text drawn as HB_GT_ATTR_BOX, so these chars
      can be properly displayed as drawing chars, regardless of
      the selected codepage. Another difference is that this
      function only supports strings to be printed. Other types
      don't print anything.
    ; NOTE: Maybe this function could use a better name, pls
            review and decide.

  * source/rtl/gtwvt/gtwvt.c
  * source/rtl/gtwvt/gtwvt.h
    ! Fixed not accepting zero as a HB_GTI_CODEPAGE value.
    ! Fixed HB_GTI_CODEPAGE to change the codepage.
    + Added box char support in Unicode mode.
      For chars marked as HB_GT_ATTR_BOX, chars will be
      mapped to Unicode according to CP437.
    + Added box char support in non-Unicode mode.
      For chars marked as HB_GT_ATTR_BOX, OEM_CHARSET will
      always be used.
    ; NOTE: This way it's possible to use ISO/WIN codepages with
            GTWVT, while still being able to use various drawing
            chars (lines, blocks, arrows).
    ; NOTE: The available set of drawing chars depends on the
            OS OEM_CHARSET mapping _for non-Unicode Harbour_.
            For Unicode Harbour, full CP437 codepage is
            always available.
    ; NOTE: This solution doesn't go as far as (GTWXC) to
            graphically draw / emulate these chars.
    ; TODO: Add HB_GTI_BOXCP support to change hard-wired "EN" CP.

  * include/hbapigt.h
  * include/hbgtcore.h
    ! Moved HB_GT_ATTR_* macros to public headers, because they
      are needed for public API functions.

  * contrib/hbwin/win_reg.prg
    + w32_regRead(): Added second parameter to specify the default
      value returned in case the reg entry doesn't exist.
      If not specified, NIL will be returned, just like before.
    + GetRegistry(): Added 4th parameter with same purpose as above.

  * source/rtl/hbregex.c
    * Minor opt.

  * contrib/hbwin/win_misc.c
    * Added command line option parameter to WIN_RUNDETACHED().

  * include/hbapi.h
    + HB_ERRCODE (to replace ERRCODE)
    + HB_SUCCESS (to replace SUCCESS)
    + HB_FAILURE (to replace FAILURE)

  + contrib/hbwin/win_misc.c
  * contrib/hbwin/common.mak
  * contrib/hbwin/Makefile
    + WIN_SHELLEXECUTE()
      WIN_RUNDETACHED()
      WIN_LOADRESOURCE()
      Added some new Windows API wrappers.
    ; TODO: Add hb_osEncode() to them.

  * source/rtl/diskspac.c
  * source/rtl/disksphb.c
    ! Fixed DISKSPACE() and HB_DISKSPACE() for Darwin.
      Previously they had returned erroneous values.
    ; TOFIX: Probably HB_DISKSPACE() should be implemented for Watcom and
CEGCC,
             just like DISKSPACE() is.

  * source/rtl/filesys.c
    ! hb_fsGetAttr() to set the returned attribute to zero
      in case of error.

  * include/hbextern.ch
  * source/rtl/philes.c
    + HB_FSETATTR( <cFileName>, @<nAttr> ) -> <lSuccess>
    + HB_FGETATTR( <cFileName>, <nAttr> ) -> <lSuccess>
    + HB_FSETDATETIME( <cFileName>, [<dDate>], [<cTime HH:MM:SS>] ) ->
<lSuccess>

  * source/rtl/direct.c
    ! Fixed DIRECTORY() when called with "V" (label) parameter.
      Tested under Windows. Please test/correct for other platforms.
      On Windows, the dirspec should not contain a filemask in order
      to work.

  * contrib/hbtip/base64x.c
    % HB_BASE64(): Optimized, cleaned.
    ! HB_BASE64(): Removed second parameter allowing to pass the length of
      the string. This could cause GPF if passed incorrectly. Now length
      is simply determined using hb_parclen().
    ; TOFIX: Input string size limit checking.

  * include/hbdefs.h
    + HB_SIZEOFARRAY() macro, which does: ( sizeof( var ) / sizeof( *var ) )
      To be really precise, f.e. all hb_strncpy() calls should use
      'hb_strncpy( d, s, HB_SIZEOFARRAY( d ) );' instead of:
      'hb_strncpy( d, s, sizeof( d ) );' (given that 'd' is allocated at
compile time).
      So that the code adapts to changing character sizes (like UTF-16/32).
      It's useful in some other places, too.

  * contrib/hbct/dattime2.c
    * 0 -> FALSE for BOOL types.

  * include/hbextern.ch
  * source/rtl/strmatch.c
    + HB_WILDMATCHI(). Case-instenstive, exact match. First
      two parameters and return value are the same as for
      HB_WILDMATCH().

  * include/hbextern.ch
  * source/rtl/cdpapi.c
    + HB_CDPSELECT() which does the same as HB_SETCODEPAGE(), but
      aligns well with function naming rules and namespace.
      HB_SETCODEPAGE() still works, but usage is not recommended.
    + Added HB_CDPUNIID( <cHarbourCP> ) -> <cCPName>
      This will return the std CP ID of a Harbour CP, or empty
      if the Harbour CP isn't linked.

  * include/hbapi.h
  * source/rtl/is.c
    ! Fixed compile error when HB_CDP_SUPPORT_OFF is defined.
    + Added following functions:
      hb_charIsDigit()
      hb_charIsAlpha()
      hb_charIsLower()
      hb_charIsUpper()

  * include/hbapi.h
    - hb_strUpperCopy() removed. Implementation was missing.

  * source/rtl/strcase.c
    * Minor formatting.

  * source/rtl/filesys.c
    ! hb_fsCurDirBuff() fixed potential buffer overrun by one byte.

  * source/rtl/hbrunfun.c
  * source/rtl/run.c
    ! Fixed missing header hbapiitm.h (after previous local change).

  * include/hbapi.h
  * include/hbset.h
  * include/hbapifs.h
  * include/set.ch
  * source/rtl/hbffind.c
  * source/rtl/gete.c
  * source/rtl/filesys.c
  * source/rtl/hbrunfun.c
  * source/rtl/run.c
  * source/rtl/philes.c
  * source/vm/set.c
  * source/vm/cmdarg.c
    + Added file system CP translation.
      Set( _SET_FNAMECP[, <cCPID> ] ) -> <cOldCPID>
      All operations passing filenames to/from the
      OS will convert them to/from the host CP from/to
      the FS CP specified using _SET_FNAMECP.
    * hb_fsNameConv() extended to deal with CP
      conversion, if requested by the app.
    + hb_fsNameConvFrom() (exported) added to deal
      with CP conversions for filenames received from OS.
    + hb_fsNameConvTo() (exported) added to deal
      with CP conversions for filenames/string sent to the OS.
    + Added hb_setGetFNAMECP() (exported) function.
    + Added hb_setGetFileCPTransTo(), hb_setGetFileCPTransFrom()
      (non-exported) functions.
    + hb_fsCurDirBuff() and hb_fsFindNextLow() extended
      to use hb_fsNameConvFrom().
    + Added hb_fsBaseDirBuff() to return the base
      directory on the C level (based on argv[0]).
    + Added HB_PROGNAME() to return the executable
      program name (based on argv[0]).
    + Added HB_DIRBASE() to return the executable
      base directory (based on argv[0]).
    * Renames done regarding OS/FS CP conversion:
      hb_fsNameConvFrom()        -> hb_osDecode()
      hb_fsNameConvTo()          -> hb_osEncode()
      hb_setGetFileCPTransTo()   -> -
      hb_setGetFileCPTransFrom() -> -
      hb_setGetFNAMECP()         -> hb_setGetOSCODEPAGE()
      _SET_FNAMECP               -> _SET_OSCODEPAGE
    * hb_osDecode()/hb_osEncode() extended to have a second
      parameter BOOL * fFree.
       Changed all calls to handle the case when fFree is set
      to TRUE by hb_osDecode()/hb_osEncode().
    + HB_GETENV(): Added 3rd logical parameter to control wether
      to convert the returned value from OS CP to Harbour CP.
      The default is TRUE to be in sync with GETE[NV]() and the
      rest of core.
    * hb_fsNameConv() is now doing OS CP conversion using std APIs,
      rather than duplicating such logic. I've traded some speed
      for modularity.
    * hb_osDecode/hb_osEncode() function declarations moved to hbapi.h
    * hb_osDecode/hb_osEncode() function definitions moved to set.c
    ; NOTE: None of these were extensively tested, and I tend
            to make mistakes when dealing with pointers.
            It compiles cleanly with BCC, and some basic tests
            worked, but bFree = TRUE codepaths are not yet
            working so this needs more review.

  * source/rtl/teditor.prg
  * source/rtl/tpersist.prg
  * utils/hbmake/hbmake.prg
    * MemoRead() -> hb_MemoRead()

  * contrib/hbct/files.c
    ; TOFIX: Many functions here are possibly not thread safe.
    ; TOFIX: Calling hb_fsFindClose() at app exit (and thus keeping
             the FF handles open for the whole app lifetime) doesn't
             play well with server side apps (as the app may run for
             months or even longer), and even worse, they
             will lock the passed directory so that they cannot be
             removed (maybe even renamed), until the app exists.
             At least on Windows.

  * source/rtl/dirdrive.c
    ! Fixed to use F_ERROR instead of -1.

  * include/hbextern.ch
    ! Added missing HB_GCSTEP().

  * source/vm/extrap.c
    + Added CPU dump code for Windows x64.
    + Enabled module listing for Windows 64-bit platforms.
    % Minor cleanup in Windows x86 CPU dump code.
    + Added TODO for Windows IA64 CPU dump.
    + Added TODO for Windows x64 stack walk, with pointers.
    + Added TOFIX regarding displaying module names in Windows x64 mode.

  * source/rtl/fstemp.c
    ! Minor formatting.

  * source/rtl/gete.c
  * source/rtl/run.c
  * source/rtl/hbrunfun.c
  * source/vm/cmdarg.c
    + Added CP conversion to:
      GETE[NV](), HB_GETENV(), __RUN(), HB_RUN(),
      HB_ARGSTRING(), HB_CMDLINE().

  ; TODO: dbCreateTemp( <cAlias>, <aStruct>, <cRDD>, <cDelimArg>,
<nConnection> ) -> <lSuccess>
          Generates and opens a new dbf with a temporary filename
          in exclusive mode, deletes it automatically when closed.
          All indexes created for this table, should ideally have
          the temporary flag on, so those get deleted too, when closed.

  ; TOFIX: hb_regex*() functions will not honor Harbour CP setting,
           when case insensitivity is selected.

  ; TOFIX: hbct / SetFDaTi() to move any local logic into Harbour core
           functions and use a simple Harbour API call only.
           I'm not sure what is the reason with keeping the logic
           duplicated here; if this isn't by intent, this function
           could be much simplified.

  ; TOFIX: Avoid using C level toupper()/tolower()/islower()/isupper()

  ; TOFIX: hb_regexMatch()'s 3rd parameter has a double meaning.
           It controls case-sensitivity (in sync with the documentation),
           but it also controls if hb_regexMatch() behaves like
           hb_regexLike() (.T.), or hb_regexHas() (.F.). This means
           that hb_regexMatch(,, .T.) == hb_regexLike(,, .T.)
(case-sensitive) and
                hb_regexMatch(,, .F.) == hb_regexHas(,, .F.)
(case-insensitive)
           Maybe this was the intent of the original developers, but
           to me it looks a rather strange behaviour which was added by
           accidentally forgetting about the 3rd parameter already being
           utilized. This either needs to be fixed, or properly documented.

  ; NOTE: Noteworthy links:
          http://docs.python.org/3.0/whatsnew/3.0.html
            - Unicode/text section
            - Removed <> (use != instead)
          http://sphinx.pocoo.org/
            - Documentation format

http://fredeaker.blogspot.com/2007/01/character-encoding-detection.html
            - Character encoding detection
--
Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090114/a27044bf/attachment-0001.html
From mbelgrano at deltain.it  Wed Jan 14 11:11:51 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Jan 14 11:11:55 2009
Subject: [Harbour] This application can be written in clipper ten year ago,
	but today is a web application
Message-ID: <609353e70901140811p1fbe8480g87731590c18f0f1a@mail.gmail.com>

This application can be written in clipper ten year ago, but today is a web
application

*Invotrak* <http://www.invotrak.com/>: Web application for freelancers and
small businesses to track invoices sent to clients. It helps keep track of
overdue invoices and revenue, notify your clients of new invoices, keep
copies of issued invoices etc.

Will harbour do something similar?
-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090114/50131e93/attachment.html
From harbour.01 at syenar.hu  Wed Jan 14 11:52:46 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 14 11:52:51 2009
Subject: [Harbour] 2009-01-14 17:51 UTC+0100 Viktor Szakats
Message-ID: <18d502870901140852q12a4f091wcaf30e9d44f56bb2@mail.gmail.com>

(still one of the pending changes)

2009-01-14 17:51 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbmzip/hbmzip.c
    + Added .prg level functions:
      HB_ZIPSTOREFILEHANDLE():
         To add a new file to a .zip via an already open handle (typically a
temp file).
         Obviously, file date/time/attrib will not be set.
      HB_UNZIPEXTRACTCURRENTFILETOHANDLE():
         To extract a file to an already open file handle.
    ; NOTE: I'm not sure if these new functions are useful
            enough to be added to official SVN. Except for Windows,
            there doesn't seem to be a trend that OSes would
            support native temp files, so that we can use this
            to avoid race conditions. Opinions are welcome.
--
Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090114/890d6291/attachment.html
From dbtopas at dbtopas.lt  Wed Jan 14 12:48:43 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Jan 14 12:48:49 2009
Subject: [Harbour] ChangeLog: 2009-01-14 16:15 UTC+0100 Viktor Szakats
In-Reply-To: <18d502870901140730i50949800g9e3656bac304199d@mail.gmail.com>
References: <18d502870901140730i50949800g9e3656bac304199d@mail.gmail.com>
Message-ID: <496E257B.5080506@dbtopas.lt>

Hi,


>           http://sphinx.pocoo.org/
>             - Documentation format

Viktor, can you add some comment about this documentation system. Does 
Sphinx parses source files? Can it parse .prg code?

I'm used to see to sources, but sometimes it would be more quick to look 
to docs for function parameters, etc. I've looked to utils/hbdoc, but 
could not make anything, because hbdoc.exe requires some Norton Guide 
link file, I was not able to find one in SVN.


I've also tried to look at a few documentation systems:
1) Robodoc creates manual using ugly "section/subsection" headings.
2) Doxygen is oriented to object oriented programming style. It tries to 
document classes, methods, etc., but no documentation for functions. 
Though, I was able to manage documentation of functions by including it 
into modules.
Doxygen analyses code itself (not only documentation inside comments), 
so, it is unable to parse unsupported programming language (i.e. PRG code).


Writing a simple source parser (parses documentation tags inside 
comments), it's a few hours job. I think we need one for function 
documentation.



Best regards,
Mindaugas
From mbelgrano at deltain.it  Wed Jan 14 13:06:44 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Jan 14 13:06:51 2009
Subject: [Harbour] ChangeLog: 2009-01-14 16:15 UTC+0100 Viktor Szakats
In-Reply-To: <496E257B.5080506@dbtopas.lt>
References: <18d502870901140730i50949800g9e3656bac304199d@mail.gmail.com>
	<496E257B.5080506@dbtopas.lt>
Message-ID: <609353e70901141006xe67e3c9x2336c419ca39e0b@mail.gmail.com>

+1


2009/1/14 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>

>
> Writing a simple source parser (parses documentation tags inside comments),
> it's a few hours job. I think we need one for function documentation.
>
>
>
> Best regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090114/e9d2816d/attachment.html
From mbelgrano at deltain.it  Wed Jan 14 14:04:17 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Jan 14 14:04:21 2009
Subject: [Harbour] Harbour Web Site - English & Portuguese version
In-Reply-To: <531d7a750812111206q4c63ef5lac1401af490eb30@mail.gmail.com>
References: <531d7a750812111206q4c63ef5lac1401af490eb30@mail.gmail.com>
Message-ID: <609353e70901141104l34dbdeb9t453d28312597efb4@mail.gmail.com>

Wich situation for upcoming harbour website?
Anybody have news?

2008/12/11 Vailton Renato <vailtom@gmail.com>

> Hi all!
>
> I concluded much of the development of the site for the project and
> would like to present the results.
>
> Project site in English:
> http://www.harbour-project.org/preview2/index.html
>
> Project site in Portuguese of Brazil (updated mirror):
> http://www.harbour-project.com.br/
>
> If I forgot to include someone in the Crew List please let me know.
> Opportunity to list the details that feel incomplete:
>
> * Documentation> Harbor documentation Index
>   Requires adjustments in the layout of the page.
>
> * Documentation> Tutorials
>   Need texts to fill the page. I have personal difficulties in
> assembling something in English to this page, but in the longer
> version in Portuguese I can contribute more.
>
> * Downloads> Helping tools
>  If you approve the idea, I think here would be the ideal place to
> put a list of tools for download as auxiliary Bison, GCC, FLEX,
> TortoiseSVN, and so on.
>
> Outside this, the site as a whole needs to be reviewed in search of
> errors. I look forward criticisms and suggestions ...
> Vailton Renato
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090114/5b39e249/attachment.html
From info at fsgiudice.com  Wed Jan 14 15:40:57 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Jan 14 15:41:04 2009
Subject: [Harbour] 2009-01-18 21:39 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
Message-ID: <496E4DD9.9050904@fsgiudice.com>

2009-01-18 21:39 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   + harbour/source/rdd/usrrdd/example/exlog.prg
   + harbour/source/rdd/usrrdd/rdds/logrdd.prg
   * harbour/source/rdd/usrrdd/rdds/Makefile
     + Added new LOGRDD rdd file and related example
     ; NOTE: A simple RDD which introduce logging to file. It inheriths from
             any existent RDD but if you write / replace / delete something
             on tables it writes changes in a log file.
             It needs to inherit a standard RDD to which it adds logging
             capabilities.
             Related functions:
             hb_LogRddInherit() -> <cRDDName>
               REQUESTED - It must returns the standard RDD name to be 
inherited.
                           This function HAVE to be defined from user in 
application.
             hb_LogRddLogFileName( [<cFileName>] ) -> <cOldFileName>
               OPTIONAL  - Set/Get logging file name (default 
"changes.log").
             hb_LogRddTag( [<cTag>] ) -> <cOldTag>
               OPTIONAL  - Set/Get Tag string added in each log line.
                           (default COMPUTERNAME\UserName)
             hb_LogRddActive( [<lActive>] ) -> <lOldActive>
               OPTIONAL  - Set/Get logging active status (default .F.).



Example:

#include "dbinfo.ch"

// Request for LOGRDD rdd driver
REQUEST LOGRDD

// Here put Request for RDD you want to inherit then add
// function hb_LogRddInherit() (see at bottom)
REQUEST DBFCDX

PROCEDURE Main()

    // Set LOGRDD as default RDD otherwise I have to set explicitly use
    // with DRIVER option
    RDDSetDefault( "LOGRDD" )
    // Adding Memofile Info
    rddInfo( RDDI_MEMOVERSION, DB_MEMOVER_CLIP, "LOGRDD" )

    // Define Log File Name and position
    hb_LogRddLogFileName( "logs\changes.log" )
    // Define Tag to add for each line logged
    hb_LogRddTag( NETNAME() + "\" + hb_USERNAME() )
    // Activate Logging, it can be stopped/started at any moment
    hb_LogRddActive( .T. )

    // Start program logic

    // Open a table with logging (default RDD is LOGRDD)
    USE test
    field->name := "Francesco"
    CLOSE

    // Open a table without logging
    USE test DRIVER "DBFCDX"
    APPEND BLANK
    field->name := "Francesco"

RETURN

FUNCTION hb_LogRddInherit()
RETURN "DBFCDX"

Best regards,

Francesco

From info at fsgiudice.com  Wed Jan 14 15:48:18 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Jan 14 15:48:24 2009
Subject: [Harbour] LOGCDX RDD
In-Reply-To: <20090114012502.GA17972@34-mo7-2.acn.waw.pl>
References: <496D36FB.80302@fsgiudice.com>
	<20090114012502.GA17972@34-mo7-2.acn.waw.pl>
Message-ID: <496E4F92.5060403@fsgiudice.com>

Hi Przemek,

Il 14/01/2009 2.25, Przemyslaw Czerpak ha scritto:
> 
> I do not see and CDX specific code and in above version it will
> be more general. Maybe you should also change function names from
> hb_LogCdx*() to hb_LogRdd*() and maybe RDD name or also used DEFINE
> like:
>    #define LOGRDD_NAME LOGCDX
> 
>> If it can be useful I can upload to SVN.
> 
> Yes, please do that. I think that some people will find very useful.
> 

Done, I hope that solution I have adopted, using a function call than a 
fixed macro, it is a valid solution.
Tested locally with my xharbour version it works correctly.

Please advise in case of errors.

Any question, also to Viktor, there is a way to build also user rdd in 
SVN as a standard lib ? I don't know if it will be a good solution to 
add them to hbusrrdd, or not ?

Best regards,

Francesco


From lorenzo.fiorini at gmail.com  Wed Jan 14 15:48:39 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jan 14 15:48:51 2009
Subject: [Harbour] Segfault in hb_ctw including ctextern.ch
Message-ID: <9257026e0901141248s60dff23em7b8eb94454e50f84@mail.gmail.com>

I've started to use some hbct functions in dynamic loaded hrb modules
and I get this segfault:

0xb7cc83ef in hb_ctw_gt_Resize () from /opt/harbour/lib/libharbour.so
Current language:  auto; currently asm
(gdb) bt
#0  0xb7cc83ef in hb_ctw_gt_Resize () from /opt/harbour/lib/libharbour.so
#1  0xb7ad2a78 in hb_gt_def_Init () from /opt/harbour/lib/libharbour.so
#2  0xb7c030ea in hb_gtInit () from /opt/harbour/lib/libharbour.so
#3  0xb7bf059b in hb_conInit () from /opt/harbour/lib/libharbour.so
#4  0xb7c8348c in hb_vmInit () from /opt/harbour/lib/libharbour.so
#5  0xb7c925be in main () from /opt/harbour/lib/libharbour.so
#6  0xb765b685 in __libc_start_main () from /lib/tls/i686/cmov/libc.so.6
#7  0x0804e0a1 in ?? ()

To reproduce it:

#include "ctextern.ch"
function main
? boy()
return nil

hbmk testct2.prg && ./testct2

best regards,
Lorenzo
From harbour.01 at syenar.hu  Wed Jan 14 17:01:09 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 14 17:01:20 2009
Subject: [Harbour] LOGCDX RDD
In-Reply-To: <496E4F92.5060403@fsgiudice.com>
References: <496D36FB.80302@fsgiudice.com>
	<20090114012502.GA17972@34-mo7-2.acn.waw.pl>
	<496E4F92.5060403@fsgiudice.com>
Message-ID: <18d502870901141401q3871d8a7i9e0b28f1ac8ead64@mail.gmail.com>

Hi Francesco,
Surely it can be done, it's a matter of investing some time into it.
I'd suggest 'udd*' as a lib name for them to make it clear these
are hbusrrdd "plugins".

For GNU-make it's actually pretty easy to do, for non-GNU, it
needs some more manual work.

Brgds,
Viktor

On Wed, Jan 14, 2009 at 9:48 PM, Francesco Saverio Giudice <
info@fsgiudice.com> wrote:

> Hi Przemek,
>
> Il 14/01/2009 2.25, Przemyslaw Czerpak ha scritto:
>
>>
>> I do not see and CDX specific code and in above version it will
>> be more general. Maybe you should also change function names from
>> hb_LogCdx*() to hb_LogRdd*() and maybe RDD name or also used DEFINE
>> like:
>>   #define LOGRDD_NAME LOGCDX
>>
>>  If it can be useful I can upload to SVN.
>>>
>>
>> Yes, please do that. I think that some people will find very useful.
>>
>>
> Done, I hope that solution I have adopted, using a function call than a
> fixed macro, it is a valid solution.
> Tested locally with my xharbour version it works correctly.
>
> Please advise in case of errors.
>
> Any question, also to Viktor, there is a way to build also user rdd in SVN
> as a standard lib ? I don't know if it will be a good solution to add them
> to hbusrrdd, or not ?
>
> Best regards,
>
> Francesco
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090114/11ab0c86/attachment-0001.html
From harbour.01 at syenar.hu  Wed Jan 14 17:19:41 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 14 17:19:47 2009
Subject: [Harbour] ChangeLog: 2009-01-14 16:15 UTC+0100 Viktor Szakats
In-Reply-To: <496E257B.5080506@dbtopas.lt>
References: <18d502870901140730i50949800g9e3656bac304199d@mail.gmail.com>
	<496E257B.5080506@dbtopas.lt>
Message-ID: <18d502870901141419uab19b89x8e7facaa193d419f@mail.gmail.com>

Hi Mindaugas,

I don't know it very deeply, just stumbled upon it accidentally while
reading about Python 3.0. The end result looks very clean,
just like the doc sources (even cleaner than MediaWiki, if such
comparison makes any sense). So Harbour came instantly in mind.
It doesn't seem like a source code scanner though, so the docs
has to be converted from some format (like NG) or written from
scratch. Since the format is simple, conversion may be feasible.

I agree that neither Robodoc nor Doxygen is perfect for Harbour,
so this one may still have a chance. hbmake is useless as is.
We should dump it sooner or later, otherwise we will stay under
the false impression we have a working documenter tool ;)

Docs would indeed be important for Harbour. I wish we could
somehow borrow the xhb one, or cooperate with xhb to make
it apply for both projects. This way it's a proper waste of resources.

BTW, Python is a beautifully crafted tool, and certain issues
and development directions seem to fall in line with Harbour's.

Brgds,
Viktor

On Wed, Jan 14, 2009 at 6:48 PM, Mindaugas Kavaliauskas
<dbtopas@dbtopas.lt>wrote:

> Hi,
>
>
>           http://sphinx.pocoo.org/
>>            - Documentation format
>>
>
> Viktor, can you add some comment about this documentation system. Does
> Sphinx parses source files? Can it parse .prg code?
>
> I'm used to see to sources, but sometimes it would be more quick to look to
> docs for function parameters, etc. I've looked to utils/hbdoc, but could not
> make anything, because hbdoc.exe requires some Norton Guide link file, I was
> not able to find one in SVN.
>
>
> I've also tried to look at a few documentation systems:
> 1) Robodoc creates manual using ugly "section/subsection" headings.
> 2) Doxygen is oriented to object oriented programming style. It tries to
> document classes, methods, etc., but no documentation for functions. Though,
> I was able to manage documentation of functions by including it into
> modules.
> Doxygen analyses code itself (not only documentation inside comments), so,
> it is unable to parse unsupported programming language (i.e. PRG code).
>
>
> Writing a simple source parser (parses documentation tags inside comments),
> it's a few hours job. I think we need one for function documentation.
>
>
>
> Best regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090114/f00f222b/attachment.html
From info at fsgiudice.com  Wed Jan 14 17:34:27 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Jan 14 17:34:36 2009
Subject: [Harbour] LOGCDX RDD
In-Reply-To: <18d502870901141401q3871d8a7i9e0b28f1ac8ead64@mail.gmail.com>
References: <496D36FB.80302@fsgiudice.com>	<20090114012502.GA17972@34-mo7-2.acn.waw.pl>	<496E4F92.5060403@fsgiudice.com>
	<18d502870901141401q3871d8a7i9e0b28f1ac8ead64@mail.gmail.com>
Message-ID: <496E6873.6020909@fsgiudice.com>

Hi Viktor,

Il 14/01/2009 23.01, Viktor Szak?ts ha scritto:
> Hi Francesco,
> 
> Surely it can be done, it's a matter of investing some time into it.
> I'd suggest 'udd*' as a lib name for them to make it clear these 
> are hbusrrdd "plugins".
> 
> For GNU-make it's actually pretty easy to do, for non-GNU, it 
> needs some more manual work.
> 

and what about a single hbusrdds.lib or hbudds.lib that contains all 
together, see that all are small prg files ?

If we agree on name, I'll try to implement changes in *.mak files.

Best regards,

Francesco
From info at fsgiudice.com  Wed Jan 14 17:42:19 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Jan 14 17:42:27 2009
Subject: [Harbour] LOGCDX RDD
In-Reply-To: <496E6873.6020909@fsgiudice.com>
References: <496D36FB.80302@fsgiudice.com>	<20090114012502.GA17972@34-mo7-2.acn.waw.pl>	<496E4F92.5060403@fsgiudice.com>	<18d502870901141401q3871d8a7i9e0b28f1ac8ead64@mail.gmail.com>
	<496E6873.6020909@fsgiudice.com>
Message-ID: <496E6A4B.3050408@fsgiudice.com>

Hi Viktor,

Il 14/01/2009 23.34, Francesco Saverio Giudice ha scritto:
> 
> and what about a single hbusrdds.lib or hbudds.lib that contains all 
> together, see that all are small prg files ?
> 
checking files I have seen that
harbour\source\rdd\usrrdd\rdds\Makefile
already contains usrrdds as lib name

so can we use it also for non-Gnu make files ?

Best regards,

Francesco

From harbour.01 at syenar.hu  Wed Jan 14 17:59:17 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 14 17:59:22 2009
Subject: [Harbour] LOGCDX RDD
In-Reply-To: <496E6A4B.3050408@fsgiudice.com>
References: <496D36FB.80302@fsgiudice.com>
	<20090114012502.GA17972@34-mo7-2.acn.waw.pl>
	<496E4F92.5060403@fsgiudice.com>
	<18d502870901141401q3871d8a7i9e0b28f1ac8ead64@mail.gmail.com>
	<496E6873.6020909@fsgiudice.com> <496E6A4B.3050408@fsgiudice.com>
Message-ID: <18d502870901141459n3e43c67aq9a76fe5edae6bfcf@mail.gmail.com>

On Wed, Jan 14, 2009 at 11:42 PM, Francesco Saverio Giudice <
info@fsgiudice.com> wrote:

> Hi Viktor,
>
> Il 14/01/2009 23.34, Francesco Saverio Giudice ha scritto:
>
>>
>> and what about a single hbusrdds.lib or hbudds.lib that contains all
>> together, see that all are small prg files ?
>>
>
For a kick start it's a good idea to create one monolithic lib.
This makes it possible to clean, debug and use them instantly.

On the longer run I'd personally prefer them separate. Otherwise
it makes them look like one monolithic lib, which they really aren't.
Similar logic is already implemented for rddsql, where we have
sdd* libs as "plugins".

For the monolithic name, I'd suggest 'hbuddall' (or 'hbudds, but
the single 's' can mean 'static' and other things, so it's a bit
ambigous), and later we can still move to 'udd*'.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090114/9c6b9bcb/attachment.html
From info at fsgiudice.com  Wed Jan 14 18:10:33 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Jan 14 18:10:44 2009
Subject: [Harbour] LOGCDX RDD
In-Reply-To: <18d502870901141459n3e43c67aq9a76fe5edae6bfcf@mail.gmail.com>
References: <496D36FB.80302@fsgiudice.com>	<20090114012502.GA17972@34-mo7-2.acn.waw.pl>	<496E4F92.5060403@fsgiudice.com>	<18d502870901141401q3871d8a7i9e0b28f1ac8ead64@mail.gmail.com>	<496E6873.6020909@fsgiudice.com>
	<496E6A4B.3050408@fsgiudice.com>
	<18d502870901141459n3e43c67aq9a76fe5edae6bfcf@mail.gmail.com>
Message-ID: <496E70E9.5080701@fsgiudice.com>



Il 14/01/2009 23.59, Viktor Szak?ts ha scritto:
> 
> For the monolithic name, I'd suggest 'hbuddall' (or 'hbudds, but 
> the single 's' can mean 'static' and other things, so it's a bit 
> ambigous), and later we can still move to 'udd*'.
> 
ok, agreeded for hbuddall name for now.
Now I will try to update non-GNU files.


Best regards,

Francesco
From harbour.01 at syenar.hu  Wed Jan 14 18:47:15 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 14 18:47:22 2009
Subject: [Harbour] 2009-01-15 00:46 UTC+0100 Viktor Szakats
Message-ID: <18d502870901141547p256c4f60g33d6507fcba366a1@mail.gmail.com>

2009-01-15 00:46 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
  * source/pp/hbpp.c
  * utils/hbdoc/hbdoc.prg
  * utils/hbmake/hbmake.prg
  * utils/hbtest/hbtest.prg
  * utils/hbrun/hbrun.prg
    * More copyrights bumped to 2009.
--
Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090115/7af372f1/attachment.html
From info at fsgiudice.com  Wed Jan 14 19:10:13 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Jan 14 19:10:24 2009
Subject: [Harbour] 2009-01-15 00:46 UTC+0100 Viktor Szakats
In-Reply-To: <18d502870901141547p256c4f60g33d6507fcba366a1@mail.gmail.com>
References: <18d502870901141547p256c4f60g33d6507fcba366a1@mail.gmail.com>
Message-ID: <496E7EE5.3050208@fsgiudice.com>

Viktor,

Il 15/01/2009 0.47, Viktor Szak?ts ha scritto:
> 2009-01-15 00:46 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
>   * source/pp/hbpp.c
>   * utils/hbdoc/hbdoc.prg
>   * utils/hbmake/hbmake.prg
>   * utils/hbtest/hbtest.prg
>   * utils/hbrun/hbrun.prg
>     * More copyrights bumped to 2009.
> --

I don't see this update on SVN.
I'm ready with hbuddall update. May I commit ?

Best regards,

Francesco
From dbtopas at dbtopas.lt  Wed Jan 14 20:15:13 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Jan 14 20:15:22 2009
Subject: [Harbour] ChangeLog 2009-01-15 03:20 UTC+0200 Mindaugas Kavaliauskas
Message-ID: <496E8E21.1060909@dbtopas.lt>

2009-01-15 03:20 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * harbour/include/hbcomp.h
   * harbour/include/hbcompdf.h
   * harbour/include/hbexprb.c
   * harbour/source/compiler/harbour.y
   * harbour/source/compiler/harbour.yyc
   * harbour/source/compiler/harbour.yyh
   * harbour/source/compiler/hbcomp.c
   * harbour/source/compiler/hbmain.c
     * removed global variables HB_COMP_PARAM->cVarType, ->szFromClass
From dbtopas at dbtopas.lt  Wed Jan 14 20:35:57 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Jan 14 20:36:01 2009
Subject: [Harbour] ChangeLog 2009-01-15 03:20 UTC+0200 Mindaugas
	Kavaliauskas
In-Reply-To: <496E8E21.1060909@dbtopas.lt>
References: <496E8E21.1060909@dbtopas.lt>
Message-ID: <496E92FD.80605@dbtopas.lt>

Mindaugas Kavaliauskas wrote:
> 2009-01-15 03:20 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
>   * harbour/include/hbcomp.h
>   * harbour/include/hbcompdf.h
>   * harbour/include/hbexprb.c
>   * harbour/source/compiler/harbour.y
>   * harbour/source/compiler/harbour.yyc
>   * harbour/source/compiler/harbour.yyh
>   * harbour/source/compiler/hbcomp.c
>   * harbour/source/compiler/hbmain.c
>     * removed global variables HB_COMP_PARAM->cVarType, ->szFromClass


P.S. I'm using 2.3 bison, but compiler generates some warnings on bison 
generated harbour.yyc code. Przemek, how do you avoid these warnings? By 
changing c.m4 (YYUSE(), etc)?
From harbour.01 at syenar.hu  Wed Jan 14 20:41:59 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 14 20:42:04 2009
Subject: [Harbour] 2009-01-15 00:46 UTC+0100 Viktor Szakats
In-Reply-To: <496E7EE5.3050208@fsgiudice.com>
References: <18d502870901141547p256c4f60g33d6507fcba366a1@mail.gmail.com>
	<496E7EE5.3050208@fsgiudice.com>
Message-ID: <18d502870901141741l5612c599sd1fb6b2e4127698d@mail.gmail.com>

ops, corrected, forgot to 'svn update'. it's yours now.
Brgds,
Viktor

On Thu, Jan 15, 2009 at 1:10 AM, Francesco Saverio Giudice <
info@fsgiudice.com> wrote:

> Viktor,
>
> Il 15/01/2009 0.47, Viktor Szak?ts ha scritto:
>
>  2009-01-15 00:46 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
>>  * source/pp/hbpp.c
>>  * utils/hbdoc/hbdoc.prg
>>  * utils/hbmake/hbmake.prg
>>  * utils/hbtest/hbtest.prg
>>  * utils/hbrun/hbrun.prg
>>    * More copyrights bumped to 2009.
>> --
>>
>
> I don't see this update on SVN.
> I'm ready with hbuddall update. May I commit ?
>
> Best regards,
>
> Francesco
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090115/44e0516c/attachment.html
From druzus at acn.waw.pl  Wed Jan 14 20:55:06 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 14 20:51:26 2009
Subject: [Harbour] ChangeLog 2009-01-15 03:20 UTC+0200 Mindaugas
	Kavaliauskas
In-Reply-To: <496E92FD.80605@dbtopas.lt>
References: <496E8E21.1060909@dbtopas.lt> <496E92FD.80605@dbtopas.lt>
Message-ID: <20090115015506.GA9223@34-mo7-2.acn.waw.pl>

On Thu, 15 Jan 2009, Mindaugas Kavaliauskas wrote:
>> 2009-01-15 03:20 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
>>   * harbour/include/hbcomp.h
>>   * harbour/include/hbcompdf.h
>>   * harbour/include/hbexprb.c
>>   * harbour/source/compiler/harbour.y
>>   * harbour/source/compiler/harbour.yyc
>>   * harbour/source/compiler/harbour.yyh
>>   * harbour/source/compiler/hbcomp.c
>>   * harbour/source/compiler/hbmain.c
>>     * removed global variables HB_COMP_PARAM->cVarType, ->szFromClass
> P.S. I'm using 2.3 bison, but compiler generates some warnings on bison 
> generated harbour.yyc code. Przemek, how do you avoid these warnings? By 
> changing c.m4 (YYUSE(), etc)?

Yes,
I'm attaching my small local patches which eliminates these warnings.

best regards,
Przemek

ps. Thank you for above modifications.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: bison-patch.tgz
Type: application/x-compressed-tar
Size: 920 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090115/21f70e2f/bison-patch.bin
From dbtopas at dbtopas.lt  Wed Jan 14 21:38:34 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Jan 14 21:38:43 2009
Subject: [Harbour] ChangeLog 2009-01-15 04:40 UTC+0200 Mindaugas Kavaliauskas
Message-ID: <496EA1AA.9030801@dbtopas.lt>

2009-01-15 04:40 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * harbour/source/compiler/harbour.yyc
   * harbour/source/compiler/harbour.yyh
     * fixed warnings using bison patch provided by Przemek
From bedipritpal at hotmail.com  Wed Jan 14 21:53:27 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Jan 14 21:53:30 2009
Subject: [Harbour] 2009-01-13 07:17 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <609353e70901140543v4698e140ieee9ae33eafb05ac@mail.gmail.com>
References: <21437863.post@talk.nabble.com>
	<609353e70901140543v4698e140ieee9ae33eafb05ac@mail.gmail.com>
Message-ID: <21470091.post@talk.nabble.com>


Massimo


Massimo Belgrano-3 wrote:
> 
> n xbase++ 1.9 sl1 you can still mix traditional SAY/GET or TBrowse() with
> Graphical User Interface elements for an easy and fast migration. In
> previous Xbase++ versions only some Xbase Parts have been able to use
> visual-styles. With SL1 all Xbase Parts, even rather complex browser parts
> or the tab-page, fully conform with the UI of the platform; this leads to
> a
> more consistent and state-of-the-art end user experience.
> 
> This capabilty is also for gtwvg & harbour part?
> 

I did not see the xbase++ sl1 yet.
First part is to write all classes to honor xbase parts, then 
I will see how it can be integrated with CUI.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/2009-01-13-07%3A17-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp21437863p21470091.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Wed Jan 14 22:10:11 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Jan 14 22:10:14 2009
Subject: [Harbour] 2009-01-18 21:39 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
In-Reply-To: <496E4DD9.9050904@fsgiudice.com>
References: <496E4DD9.9050904@fsgiudice.com>
Message-ID: <21470379.post@talk.nabble.com>


Francesco


Francesco Saverio Giudice wrote:
> 
> 2009-01-18 21:39 UTC+0100 Francesco Saverio Giudice
> (info/at/fsgiudice.com)
>    + harbour/source/rdd/usrrdd/example/exlog.prg
>    + harbour/source/rdd/usrrdd/rdds/logrdd.prg
>    * harbour/source/rdd/usrrdd/rdds/Makefile
>      + Added new LOGRDD rdd file and related example
>      ; NOTE: A simple RDD which introduce logging to file. It inheriths
> from
>              any existent RDD but if you write / replace / delete
> something
>              on tables it writes changes in a log file.
>              It needs to inherit a standard RDD to which it adds logging
>              capabilities.
>              Related functions:
>              hb_LogRddInherit() -> <cRDDName>
>                REQUESTED - It must returns the standard RDD name to be 
> inherited.
>                            This function HAVE to be defined from user in 
> application.
>              hb_LogRddLogFileName( [<cFileName>] ) -> <cOldFileName>
>                OPTIONAL  - Set/Get logging file name (default 
> "changes.log").
>              hb_LogRddTag( [<cTag>] ) -> <cOldTag>
>                OPTIONAL  - Set/Get Tag string added in each log line.
>                            (default COMPUTERNAME\UserName)
>              hb_LogRddActive( [<lActive>] ) -> <lOldActive>
>                OPTIONAL  - Set/Get logging active status (default .F.).
> 
> 
> 
> Example:
> 
> #include "dbinfo.ch"
> 
> // Request for LOGRDD rdd driver
> REQUEST LOGRDD
> 
> // Here put Request for RDD you want to inherit then add
> // function hb_LogRddInherit() (see at bottom)
> REQUEST DBFCDX
> 
> PROCEDURE Main()
> 
>     // Set LOGRDD as default RDD otherwise I have to set explicitly use
>     // with DRIVER option
>     RDDSetDefault( "LOGRDD" )
>     // Adding Memofile Info
>     rddInfo( RDDI_MEMOVERSION, DB_MEMOVER_CLIP, "LOGRDD" )
> 
>     // Define Log File Name and position
>     hb_LogRddLogFileName( "logs\changes.log" )
>     // Define Tag to add for each line logged
>     hb_LogRddTag( NETNAME() + "\" + hb_USERNAME() )
>     // Activate Logging, it can be stopped/started at any moment
>     hb_LogRddActive( .T. )
> 
>     // Start program logic
> 
>     // Open a table with logging (default RDD is LOGRDD)
>     USE test
>     field->name := "Francesco"
>     CLOSE
> 
>     // Open a table without logging
>     USE test DRIVER "DBFCDX"
>     APPEND BLANK
>     field->name := "Francesco"
> 
> RETURN
> 
> FUNCTION hb_LogRddInherit()
> RETURN "DBFCDX"
> 

A very good tool in Harbour. Can be a basis for ROLLBACK if 
polished properly.

One point which may enhance the usability ( we can limit string size 
or can make it tokenized data string ):

hb_LogRddTag( [<cTag> | <bBlock] ) -> <cOldTag>

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2009-01-18-21%3A39-UTC%2B0100-Francesco-Saverio-Giudice-%28info-at-fsgiudice.com%29-tp21464688p21470379.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Thu Jan 15 05:53:15 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Jan 15 05:53:19 2009
Subject: [Harbour] ChangeLog: 2009-01-14 16:15 UTC+0100 Viktor Szakats
In-Reply-To: <18d502870901141419uab19b89x8e7facaa193d419f@mail.gmail.com>
References: <18d502870901140730i50949800g9e3656bac304199d@mail.gmail.com>
	<496E257B.5080506@dbtopas.lt>
	<18d502870901141419uab19b89x8e7facaa193d419f@mail.gmail.com>
Message-ID: <609353e70901150253j7155d66fj9a5ec0b9c603dff5@mail.gmail.com>

The harbour minigui project have a documentation ready to use
I think that Can added to Harbour.doc (i can convert in pdf with commercial
tool)
http://hmgs-minigui.cvs.sourceforge.net/*checkout*/hmgs-minigui/minigui/Harbour/doc/%28x%29harbour.chm


Massimo Belgrano

2009/1/14 Viktor Szak?ts <harbour.01@syenar.hu>

> Hi Mindaugas,
>
> I don't know it very deeply, just stumbled upon it accidentally  while
> reading about Python 3.0. The end result looks very clean,
> just like the doc sources (even cleaner than MediaWiki, if such
> comparison makes any sense). So Harbour came instantly in mind.
> It doesn't seem like a source code scanner though, so the docs
> has to be converted from some format (like NG) or written from
> scratch. Since the format is simple, conversion may be feasible.
>
> I agree that neither Robodoc nor Doxygen is perfect for Harbour,
> so this one may still have a chance. hbmake is useless as is.
> We should dump it sooner or later, otherwise we will stay under
> the false impression we have a working documenter tool ;)
>
> Docs would indeed be important for Harbour. I wish we could
> somehow borrow the xhb one, or cooperate with xhb to make
> it apply for both projects. This way it's a proper waste of resources.
>
> BTW, Python is a beautifully crafted tool, and certain issues
> and development directions seem to fall in line with Harbour's.
>
> Brgds,
> Viktor
>
> On Wed, Jan 14, 2009 at 6:48 PM, Mindaugas Kavaliauskas <
> dbtopas@dbtopas.lt> wrote:
>
>> Hi,
>>
>>
>>          http://sphinx.pocoo.org/
>>>            - Documentation format
>>>
>>
>> Viktor, can you add some comment about this documentation system. Does
>> Sphinx parses source files? Can it parse .prg code?
>>
>> I'm used to see to sources, but sometimes it would be more quick to look
>> to docs for function parameters, etc. I've looked to utils/hbdoc, but could
>> not make anything, because hbdoc.exe requires some Norton Guide link file, I
>> was not able to find one in SVN.
>>
>>
>> I've also tried to look at a few documentation systems:
>> 1) Robodoc creates manual using ugly "section/subsection" headings.
>> 2) Doxygen is oriented to object oriented programming style. It tries to
>> document classes, methods, etc., but no documentation for functions. Though,
>> I was able to manage documentation of functions by including it into
>> modules.
>> Doxygen analyses code itself (not only documentation inside comments), so,
>> it is unable to parse unsupported programming language (i.e. PRG code).
>>
>>
>> Writing a simple source parser (parses documentation tags inside
>> comments), it's a few hours job. I think we need one for function
>> documentation.
>>
>>
>>
>> Best regards,
>> Mindaugas
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>


-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090115/b3828235/attachment.html
From mbelgrano at deltain.it  Thu Jan 15 06:00:12 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Jan 15 06:00:16 2009
Subject: [Harbour] 2009-01-13 07:17 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <21470091.post@talk.nabble.com>
References: <21437863.post@talk.nabble.com>
	<609353e70901140543v4698e140ieee9ae33eafb05ac@mail.gmail.com>
	<21470091.post@talk.nabble.com>
Message-ID: <609353e70901150300sdb2d3bcy5b324b219aec10c0@mail.gmail.com>

Wich class/function must BE implement for Honor xbase parts?
Wich timeline ?
Have you a wrapper #include for test xbase parts with harbour?


>
> I did not see the xbase++ sl1 yet.
> First part is to write all classes to honor xbase parts, then
> I will see how it can be integrated with CUI.
>
> Regards
> Pritpal Bedi
>
> --
> View this message in context:
> http://www.nabble.com/2009-01-13-07%3A17-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp21437863p21470091.html
>  Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090115/0a664cfd/attachment-0001.html
From bedipritpal at hotmail.com  Thu Jan 15 07:16:16 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Jan 15 07:16:19 2009
Subject: [Harbour] 2009-01-13 07:17 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <609353e70901150300sdb2d3bcy5b324b219aec10c0@mail.gmail.com>
References: <21437863.post@talk.nabble.com>
	<609353e70901140543v4698e140ieee9ae33eafb05ac@mail.gmail.com>
	<21470091.post@talk.nabble.com>
	<609353e70901150300sdb2d3bcy5b324b219aec10c0@mail.gmail.com>
Message-ID: <21476449.post@talk.nabble.com>




Massimo Belgrano-3 wrote:
> 
> Wich class/function must BE implement for Honor xbase parts?
> Wich timeline ?
> Have you a wrapper #include for test xbase parts with harbour?
> 

harbour/contrib/gtwvg/tests/demoxbp.prg

Pritpal
-- 
View this message in context: http://www.nabble.com/2009-01-13-07%3A17-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp21437863p21476449.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Thu Jan 15 07:49:03 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jan 15 07:45:22 2009
Subject: [Harbour] 2009-01-15 13:48 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090115124903.GA8373@34-mo7-2.acn.waw.pl>

2009-01-15 13:48 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/set.c
    * do not check for HVM stack existence in ST HVM to avoid compiler
      warning

  * harbour/contrib/hbct/ctextern.ch
    ! removed HB_GT_CTW and HB_GT_CTW_DEFAULT added by mistake
      It caused GPF at HVM startup because CTW was register as
      default GT driver 

  * harbour/contrib/hbbmcdx/bmdbfcdx.c
    ! added missing hbstack.h
    ! fixed accessing RDD node structure

  * harbour/contrib/hbct/ctwin.h
  * harbour/contrib/hbct/ctwin.c
  * harbour/contrib/hbct/ctwfunc.c
    + extended internal CTW API functions to hide/show window, create
      new window without displaying it, selecting window without moving
      it to top level, changing existing window shadow attribute.
    + added support user window levels controlled by user
      (BOTTOM, DEFAULT, TOP)
    + added support for selecting client area (possible to update square)
      in each CT Window
    It's a work in progress and the above modifications will be updated yet.

best regards
Przemek
From druzus at acn.waw.pl  Thu Jan 15 14:53:08 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jan 15 14:49:27 2009
Subject: [Harbour] 2009-01-15 20:52 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090115195308.GA26601@34-mo7-2.acn.waw.pl>

2009-01-15 20:52 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/hvm.c
    * register default RT symbols after setting exception handler

  * harbour/source/vm/fm.c
    % keep process heap address in static variable when HeapAlloc()
      is used.

  * harbour/source/vm/extrap.c
    * casting to pacify warnings

best regards
Przemek
From druzus at acn.waw.pl  Thu Jan 15 15:27:40 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jan 15 15:23:58 2009
Subject: [Harbour] 2009-01-15 21:27 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090115202740.GA21447@34-mo7-2.acn.waw.pl>

2009-01-15 21:27 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbct/ctwin.c
    * added small hack for scrolling console output when client area
      is set

best regards
Przemek
From info at fsgiudice.com  Thu Jan 15 17:10:13 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Thu Jan 15 17:10:37 2009
Subject: [Harbour] 2009-01-15 23:08 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
Message-ID: <496FB445.80607@fsgiudice.com>

2009-01-15 23:08 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   * harbour/common.mak
   * harbour/config/global.cf
   * harbour/harbour-wce-spec
   * harbour/harbour-win-spec
   * harbour/harbour.spec
   * harbour/make_b32.bat
   * harbour/make_b32.mak
   * harbour/make_gcc.mak
   * harbour/make_vc.mak
     * Added hbuddall library to standard make files
       ; NOTE: hbuddall contains all USR RDDS files in
               harbour/source/rdd/usrrdd/rdds/*
               Viktor pls check me.

   * harbour/source/rdd/usrrdd/rdds/arrayrdd.prg
   * harbour/source/rdd/usrrdd/rdds/fcomma.prg
   * harbour/source/rdd/usrrdd/rdds/hscdx.prg
   * harbour/source/rdd/usrrdd/rdds/logrdd.prg
     * fixed assigned but unused variable


Best regards

Francesco
From info at fsgiudice.com  Thu Jan 15 18:15:47 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Thu Jan 15 18:15:55 2009
Subject: [Harbour] 2009-01-16 00:13 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
Message-ID: <496FC3A3.40903@fsgiudice.com>

2009-01-16 00:13 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   * harbour/source/rdd/usrrdd/rdds/logrdd.prg
     * Added new functions
     ; NOTE:
          hb_LogRddMsgLogBlock( [<bMsgLogBlock>] ) -> <bOldMsgLogBlock>
            bMsgLogBlock codeblock permits to user to alter message to log
            into standard log file.
            Codeblock receives follow parameters:
            cTag, cRDDName, cCmd, nWA, cMsg
          hb_LogRddUserLogBlock( [<bUserLogBlock>] ) -> <bOldUserLogBlock>
            bUserLogBlock codeblock redirect all log to user that can log
            everywhere. Parameters send to bUserLogBlock are same of
            bMsgLogBlock.

   * harbour/source/rdd/usrrdd/example/exlog.prg
     * Changed with new functions

   * harbour/make_b32.bat
     * removed comment on first line


Best regards

Francesco
From info at fsgiudice.com  Thu Jan 15 18:17:42 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Thu Jan 15 18:17:50 2009
Subject: [Harbour] 2009-01-18 21:39 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
In-Reply-To: <21470379.post@talk.nabble.com>
References: <496E4DD9.9050904@fsgiudice.com> <21470379.post@talk.nabble.com>
Message-ID: <496FC416.9000506@fsgiudice.com>

Hi Pritpal,

Il 15/01/2009 4.10, Pritpal Bedi ha scritto:
> 
> A very good tool in Harbour. Can be a basis for ROLLBACK if 
> polished properly.
> 

Thank you.

> One point which may enhance the usability ( we can limit string size 
> or can make it tokenized data string ):
> 
> hb_LogRddTag( [<cTag> | <bBlock] ) -> <cOldTag>
> 

I have added two new functions so you can control log stream.
See
2009-01-16 00:13 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)

Best regards

Francesco
From toninhofwi at yahoo.com.br  Thu Jan 15 18:43:29 2009
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Thu Jan 15 18:43:21 2009
Subject: [Harbour] 2009-01-16 00:13 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
In-Reply-To: <496FC3A3.40903@fsgiudice.com>
References: <496FC3A3.40903@fsgiudice.com>
Message-ID: <kdivm4959fc04rhhuk1scvgba39khjfd0q@4ax.com>

>   * harbour/source/rdd/usrrdd/rdds/logrdd.prg

Hi Francesco, thanks for this implementation, really useful.

Please tell me if it works with ADSRDD,

Regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From toninhofwi at yahoo.com.br  Thu Jan 15 18:44:45 2009
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Thu Jan 15 18:44:37 2009
Subject: [Harbour] 2009-01-15 20:52 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20090115195308.GA26601@34-mo7-2.acn.waw.pl>
References: <20090115195308.GA26601@34-mo7-2.acn.waw.pl>
Message-ID: <qhivm4dnp4i339vsvk3qjmikvqgk8bpbfa@4ax.com>

>  * harbour/source/vm/fm.c
>    % keep process heap address in static variable when HeapAlloc()
>      is used.

Hi Przemek, a little bit faster here,

Thanks and best regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From druzus at acn.waw.pl  Thu Jan 15 19:10:15 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jan 15 19:06:33 2009
Subject: [Harbour] 2009-01-16 01:10 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090116001015.GA15583@34-mo7-2.acn.waw.pl>

2009-01-16 01:10 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbrddnsx.h
  * harbour/source/rdd/dbfnsx/dbfnsx1.c
    ! fixed typo in descend flag checking
    % optimized current key decoding

  * harbour/source/rdd/dbfntx/dbfntx1.c
    * formatting

best regards
Przemek
From harbour.01 at syenar.hu  Thu Jan 15 19:43:42 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Jan 15 19:43:47 2009
Subject: [Harbour] 2009-01-15 23:08 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
In-Reply-To: <496FB445.80607@fsgiudice.com>
References: <496FB445.80607@fsgiudice.com>
Message-ID: <18d502870901151643v37641260mda183f256c877954@mail.gmail.com>

Hi Francesco,

I've just tested the non-GNU MSVC build, and it worked flawlessly. Thanks a
lot!
Brgds,
Viktor

On Thu, Jan 15, 2009 at 11:10 PM, Francesco Saverio Giudice <
info@fsgiudice.com> wrote:

> 2009-01-15 23:08 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com
> )
>  * harbour/common.mak
>  * harbour/config/global.cf
>  * harbour/harbour-wce-spec
>  * harbour/harbour-win-spec
>  * harbour/harbour.spec
>  * harbour/make_b32.bat
>  * harbour/make_b32.mak
>  * harbour/make_gcc.mak
>  * harbour/make_vc.mak
>    * Added hbuddall library to standard make files
>      ; NOTE: hbuddall contains all USR RDDS files in
>              harbour/source/rdd/usrrdd/rdds/*
>              Viktor pls check me.
>
>  * harbour/source/rdd/usrrdd/rdds/arrayrdd.prg
>  * harbour/source/rdd/usrrdd/rdds/fcomma.prg
>  * harbour/source/rdd/usrrdd/rdds/hscdx.prg
>  * harbour/source/rdd/usrrdd/rdds/logrdd.prg
>    * fixed assigned but unused variable
>
>
> Best regards
>
> Francesco
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090116/4d8b3fd8/attachment.html
From harbour.01 at syenar.hu  Thu Jan 15 19:49:11 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Jan 15 19:49:15 2009
Subject: [Harbour] Automatic SVN commit mails
Message-ID: <18d502870901151649t1c29add4t956e0f25bbe85b01@mail.gmail.com>

Hi all,
On sf.net there is support automatic commit e-mails for SVN.
It's easy to setup on the sf.net admin page.

There is a short mod and a long mode, where the diff is included.

What do you guys think about enabling it, so that the ChangeLog
e-mails are sent automatically by the system? This way there would
be one less manual thing (or local script) to worry about.

I'd vote to turn it on and experiment with it for a few days, so
that we can see the format, and decide to keep it or not.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090116/9b5b487b/attachment.html
From info at fsgiudice.com  Fri Jan 16 02:57:15 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri Jan 16 02:57:24 2009
Subject: [Harbour] 2009-01-16 00:13 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
In-Reply-To: <kdivm4959fc04rhhuk1scvgba39khjfd0q@4ax.com>
References: <496FC3A3.40903@fsgiudice.com>
	<kdivm4959fc04rhhuk1scvgba39khjfd0q@4ax.com>
Message-ID: <49703DDB.7000504@fsgiudice.com>

Hi Toninho,

Il 16/01/2009 0.43, Toninho@fwi ha scritto:
>>   * harbour/source/rdd/usrrdd/rdds/logrdd.prg
> 
> Hi Francesco, thanks for this implementation, really useful.
> 
> Please tell me if it works with ADSRDD,
> 

It should. I haven't ADS so I cannot test it, but try

harbour/source/rdd/usrrdd/example/exlog.prg

simply changing DBFCDX string with ADSRDD.

Best regards,

Francesco


From fmancera at viaopen.com  Fri Jan 16 04:37:48 2009
From: fmancera at viaopen.com (fmancera@viaopen.com)
Date: Fri Jan 16 04:38:08 2009
Subject: [Harbour] Automatic SVN commit mails
In-Reply-To: <18d502870901151649t1c29add4t956e0f25bbe85b01@mail.gmail.com>
References: <18d502870901151649t1c29add4t956e0f25bbe85b01@mail.gmail.com>
Message-ID: <06cccaaaa6e0d342da63d26fede9e6ad@viaopen.com>

Hello Viktor,


> Hi all,
> On sf.net there is support automatic commit e-mails for SVN.
> It's easy to setup on the sf.net admin page.
> 
> There is a short mod and a long mode, where the diff is included.
> 
> What do you guys think about enabling it, so that the ChangeLog
> e-mails are sent automatically by the system? This way there would
> be one less manual thing (or local script) to worry about.
> 
> I'd vote to turn it on and experiment with it for a few days, so
> that we can see the format, and decide to keep it or not.
> 

I think yes.

Regards,

Fernando Mancera
www.viaopen.com

> Brgds,
> Viktor

From info at fsgiudice.com  Fri Jan 16 05:03:57 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri Jan 16 05:04:07 2009
Subject: [Harbour] Automatic SVN commit mails
In-Reply-To: <18d502870901151649t1c29add4t956e0f25bbe85b01@mail.gmail.com>
References: <18d502870901151649t1c29add4t956e0f25bbe85b01@mail.gmail.com>
Message-ID: <49705B8D.80700@fsgiudice.com>

Hi Viktor,

Il 16/01/2009 1.49, Viktor Szak?ts ha scritto:
> There is a short mod and a long mode, where the diff is included.
> 
If it is possible to limit only to Changelog file, then ok in long mode 
with diff.
Do you have a link to sf.net site where I can read something or see a 
sample ?

Best regards

Francesco
From harbour.01 at syenar.hu  Fri Jan 16 05:18:25 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Jan 16 05:19:08 2009
Subject: [Harbour] Automatic SVN commit mails
In-Reply-To: <49705B8D.80700@fsgiudice.com>
References: <18d502870901151649t1c29add4t956e0f25bbe85b01@mail.gmail.com>
	<49705B8D.80700@fsgiudice.com>
Message-ID: <18d502870901160218v3f10f747m37a750dd1d9d3851@mail.gmail.com>

http://alexandria.wiki.sourceforge.net/Subversion+-+Version+Control+for+Source+Codeunder
"Hook scripts"

I assume it would include the commit message in the
e-mail, and SVN users should make sure the commit
message always contains the relevant ChangeLog entry.

This is the good practice anyway, and this is how we've
been doing it so far.

Brgds,
Viktor

On Fri, Jan 16, 2009 at 11:03 AM, Francesco Saverio Giudice <
info@fsgiudice.com> wrote:

> Hi Viktor,
>
> Il 16/01/2009 1.49, Viktor Szak?ts ha scritto:
>
>> There is a short mod and a long mode, where the diff is included.
>>
>>  If it is possible to limit only to Changelog file, then ok in long mode
> with diff.
> Do you have a link to sf.net site where I can read something or see a
> sample ?
>
> Best regards
>
> Francesco
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090116/813e5a78/attachment.html
From M.Horodyski at pzuzycie.com.pl  Fri Jan 16 06:23:34 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri Jan 16 06:23:44 2009
Subject: [Harbour] 2009-01-13 07:17 UTC-0800 Pritpal
	Bedi(pritpal@vouchcac.com)
In-Reply-To: <21476449.post@talk.nabble.com>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501C37C0D@PINK.zycie.pzu>

>-----Original Message-----
>From: Pritpal Bedi [mailto:bedipritpal@hotmail.com] 
>Sent: Thursday, January 15, 2009 1:16 PM
...
>> Have you a wrapper #include for test xbase parts with harbour?
>> 
>
>harbour/contrib/gtwvg/tests/demoxbp.prg
>
>Pritpal

How can I build demowvg with OpenWatcom ?
I see in cntrib\gtwvg only make_b32.bat and make_vc.bat, and in
c:\harbour\contrib\gtwvg\tests\ only bld_b32.bat, bld_vc.bat,
hbmk_b32.bat, hbmk_vc.bat. HBMK_B32 says that GTWVG.LIB is not found
etc. How can I build librares from contrib folder ?


Regards,
Marek Horodyski
From harbour.01 at syenar.hu  Fri Jan 16 06:35:09 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Jan 16 06:36:43 2009
Subject: [Harbour] Fwd: SF.net SVN: harbour-project:[10057]
	trunk/harbour/ChangeLog
In-Reply-To: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>
Message-ID: <18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>

This is how such e-mail looks like. It looks fine to me.
Now, the problem is, the sender e-mail address is always
the committer's sf.net e-mail alias, and our mailing list
allows only members to post (rightly so), which means that
we cannot set the mailing list address as recipient, since
mails will be ignored. Unless committer happens to use the
sf.net address to subscribe to the list, but that's currently no
one.

Any ideas how to resolve that the best way?

Brgds,
Viktor

---------- Forwarded message ----------
From: [vszakats users sourceforge net]
Date: Fri, Jan 16, 2009 at 12:26 PM
Subject: SF.net SVN: harbour-project:[10057] trunk/harbour/ChangeLog
To: ******@******


Revision: 10057

http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10057&view=rev
Author:   vszakats
Date:     2009-01-16 11:26:53 +0000 (Fri, 16 Jan 2009)

Log Message:
-----------
testing hook

Modified Paths:
--------------
   trunk/harbour/ChangeLog

Modified: trunk/harbour/ChangeLog
===================================================================
--- trunk/harbour/ChangeLog     2009-01-16 00:31:36 UTC (rev 10056)
+++ trunk/harbour/ChangeLog     2009-01-16 11:26:53 UTC (rev 10057)
@@ -7,7 +7,7 @@
   For example:
   2008-12-31 13:59 UTC+0100 Foo Bar (foo.bar foobar.org)
 */
-
+TESTING
 2009-01-16 01:30 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbct/video.c
  * contrib/hbct/pack.c


This was sent by the SourceForge.net collaborative development platform, the
world's largest Open Source development site.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090116/d42c1b1b/attachment.html
From M.Horodyski at pzuzycie.com.pl  Fri Jan 16 07:11:25 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri Jan 16 07:11:29 2009
Subject: [Harbour] Uhttpd1/2 and ow.
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501C37C6B@PINK.zycie.pzu>

Mindaugas,
How can I compile above file with soket.c and OpenWatcom compiler ?

Regards,
Marek Horodyski
From dbtopas at dbtopas.lt  Fri Jan 16 08:26:41 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Jan 16 08:26:42 2009
Subject: [Harbour] Uhttpd1/2 and ow.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501C37C6B@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501C37C6B@PINK.zycie.pzu>
Message-ID: <49708B11.7040507@dbtopas.lt>

> How can I compile above file with soket.c and OpenWatcom compiler ?

Hi,


I do not have OW compiler. You should find docs about OW compiler 
command line switches and try to run it. Later fix compile time warnings 
and errors, if compiler will generate it.


Regards,
Mindaugas


From dbtopas at dbtopas.lt  Fri Jan 16 08:31:48 2009
From: dbtopas at dbtopas.lt (DB Topas)
Date: Fri Jan 16 08:31:50 2009
Subject: [Harbour] Fwd: SF.net SVN:
	harbour-project:[10057]	trunk/harbour/ChangeLog
In-Reply-To: <18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>
	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>
Message-ID: <49708C44.9040307@dbtopas.lt>

Viktor Szak?ts wrote:
> Any ideas how to resolve that the best way?


Hi,


svnnotify --from somewhere@example.com


Regards,
Mindaugas
From harbour.01 at syenar.hu  Fri Jan 16 09:06:37 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Jan 16 09:08:29 2009
Subject: [Harbour] Fwd: SF.net SVN: harbour-project:[10057]
	trunk/harbour/ChangeLog
In-Reply-To: <49708C44.9040307@dbtopas.lt>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>
	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>
	<49708C44.9040307@dbtopas.lt>
Message-ID: <18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>

I'm not sure how svnnotify works, but if it's a client side solution, we
haven't solved too much (the point would be to make this
fully automatic for everyone), if it's server side, the choices are
limited to the sf.net hosted notifier script, and with this, the only
configuration option is a destination e-mail.

Maybe some sort of forwarder e-mail address could do the job.

Brgds,
Viktor

On Fri, Jan 16, 2009 at 2:31 PM, DB Topas <dbtopas@dbtopas.lt> wrote:

> Viktor Szak?ts wrote:
>
>> Any ideas how to resolve that the best way?
>>
>
>
> Hi,
>
>
> svnnotify --from somewhere@example.com
>
>
> Regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090116/8e8f20ea/attachment-0001.html
From info at fsgiudice.com  Fri Jan 16 09:53:14 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri Jan 16 09:53:20 2009
Subject: [Harbour] Fwd: SF.net SVN:
	harbour-project:[10057]	trunk/harbour/ChangeLog
In-Reply-To: <18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>	<49708C44.9040307@dbtopas.lt>
	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>
Message-ID: <49709F5A.9080105@fsgiudice.com>

Hi Viktor,

Il 16/01/2009 15.06, Viktor Szak?ts ha scritto:
> I'm not sure how svnnotify works, but if it's a client side solution, 
> we haven't solved too much (the point would be to make this 
> fully automatic for everyone), if it's server side, the choices are 
> limited to the sf.net <http://sf.net> hosted notifier script, and with 
> this, the only 
> configuration option is a destination e-mail.
> 
> Maybe some sort of forwarder e-mail address could do the job.
> 
As I have seen in sf.net docs the only option is:
"we only support one user-provided option to this script, the email 
address to send the notification to"
so email will be sent using sf login name.
This can be solved if Phil can add sf developers to ng list as valid 
senders.

The other question is that, AFAIR and for description I have read, 
svnnotify will send every commit made to any file on SVN and not only to 
changelog file, as implemented on sf.net, and this I don't like.
So, if this is confirmed, even if I like idea my vote is no because, 
also if there is more work to do, I continue to prefer a clean message 
reporting that part of changelog regarding a single commit.

My 2 cents.

Best regards,

Francesco

From toninhofwi at yahoo.com.br  Fri Jan 16 11:09:57 2009
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Fri Jan 16 10:08:05 2009
Subject: [Harbour] Automatic SVN commit mails
In-Reply-To: <06cccaaaa6e0d342da63d26fede9e6ad@viaopen.com>
References: <18d502870901151649t1c29add4t956e0f25bbe85b01@mail.gmail.com>
	<06cccaaaa6e0d342da63d26fede9e6ad@viaopen.com>
Message-ID: <4ac1n4lr83kbuvdrmc1qnhe33e1sisad8h@4ax.com>

>I think yes.

+1,

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From harbour.01 at syenar.hu  Fri Jan 16 10:14:03 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Jan 16 10:16:13 2009
Subject: [Harbour] Fwd: SF.net SVN: harbour-project:[10057]
	trunk/harbour/ChangeLog
In-Reply-To: <49709F5A.9080105@fsgiudice.com>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>
	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>
	<49708C44.9040307@dbtopas.lt>
	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>
	<49709F5A.9080105@fsgiudice.com>
Message-ID: <18d502870901160714n467704fdod5ab210654b066e7@mail.gmail.com>

>
> Maybe some sort of forwarder e-mail address could do the job.
>>
>>  As I have seen in sf.net docs the only option is:
> "we only support one user-provided option to this script, the email address
> to send the notification to"
> so email will be sent using sf login name.
> This can be solved if Phil can add sf developers to ng list as valid
> senders.


Yes, if Phil can configure the list to allow mails coming from
@users.sourceforge.net, that would solve the problem.


> The other question is that, AFAIR and for description I have read,
> svnnotify will send every commit made to any file on SVN and not only to
> changelog file, as implemented on sf.net, and this I don't like.
> So, if this is confirmed, even if I like idea my vote is no because, also
> if there is more work to do, I continue to prefer a clean message reporting
> that part of changelog regarding a single commit.


I've just tested it with a real-life commit, and there is
_one_ e-mail sent for one commit, regardless of the number
of files involved. And this is completely normal.

So what essentially is happening, is that it's enough for the
committer to copy the relevant (uncommitted) ChangeLog entry
into the SVN commit window (aka "log message") (this is
unchanged compared to current practice). And a proper mail
will be sent with the given ChangeLog entry. So with the new
method we can save the manual e-mailing. Which is IMO very
nice. This new mail format - while more cryptic at first - contain
information about the trunk/branch committed, it contains the
revision number, too, which also help avoiding mistakes and it's
a pain to add manually.

It's also very nice (but your mileage can vary), that the diff
can be included. I most of the time watch the diffs manually
using SVN or WinMerge, so this one can be also saved.
It's a very good change to review mistakes, too.

Here's the mail I've got from a proper commit:
-------------------------------------------------
Revision: 10059

http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10059&view=rev
Author:   vszakats
Date:     2009-01-16 15:01:58 +0000 (Fri, 16 Jan 2009)

Log Message:
-----------
2009-01-16 16:01 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
 * contrib/examples/misc/guess.prg
   * Formatting. (just to test SVN commit hook).

Modified Paths:
--------------
   trunk/harbour/ChangeLog
   trunk/harbour/contrib/examples/misc/guess.prg

Modified: trunk/harbour/ChangeLog
===================================================================
--- trunk/harbour/ChangeLog     2009-01-16 11:36:54 UTC (rev 10058)
+++ trunk/harbour/ChangeLog     2009-01-16 15:01:58 UTC (rev 10059)
@@ -8,6 +8,10 @@
   2008-12-31 13:59 UTC+0100 Foo Bar (foo.bar foobar.org)
 */

+2009-01-16 16:01 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
+  * contrib/examples/misc/guess.prg
+    * Formatting. (just to test SVN commit hook).
+
 2009-01-16 01:30 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbct/video.c
  * contrib/hbct/pack.c

Modified: trunk/harbour/contrib/examples/misc/guess.prg
===================================================================
--- trunk/harbour/contrib/examples/misc/guess.prg       2009-01-16 11:36:54
UTC (rev 10058)
+++ trunk/harbour/contrib/examples/misc/guess.prg       2009-01-16 15:01:58
UTC (rev 10059)
@@ -2,23 +2,23 @@
 * $Id$
 */

-//
-// Guess a number
-//
-// Date       : 1999/04/22
-//
-// My first application (big word) written in Harbour
-//
-// Written by Eddie Runia
-// www - http://www.harbour-project.org
-//
-// Placed in the public domain
-//
+/*
+   Guess a number

-extern OutStd
+   Date       : 1999/04/22

-function Main()
+   My first application (big word) written in Harbour

+   Written by Eddie Runia
+   www - http://www.harbour-project.org
+
+   Placed in the public domain
+*/
+
+EXTERN OutStd
+
+PROCEDURE Main()
+
  local flGuessed
  local CRLF  := chr(13)+chr(10)
  local nSeed := 241
@@ -50,11 +50,8 @@
     enddo

   enddo
-return nil

+   RETURN

-function Read( cPrompt )        // Simple read function.
-
-return __Accept( cPrompt )
-
-
+FUNCTION Read( cPrompt )        /* Simple read function */
+   RETURN __Accept( cPrompt )


This was sent by the SourceForge.net collaborative development platform, the
world's largest Open Source development site.
-------------------------------------------------

--
Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090116/962b237d/attachment.html
From dbtopas at dbtopas.lt  Fri Jan 16 10:33:01 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Jan 16 10:33:02 2009
Subject: [Harbour] Fwd: SF.net SVN:
	harbour-project:[10057]	trunk/harbour/ChangeLog
In-Reply-To: <18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>	<49708C44.9040307@dbtopas.lt>
	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>
Message-ID: <4970A8AD.5060207@dbtopas.lt>

Viktor Szak?ts wrote:
> Maybe some sort of forwarder e-mail address could do the job.


Mmmm... Yes, perhaps. I'm nor shure if mailling list has possibility to 
allow *@sourceforge.net users. Otherwise every "sourceforge.net 
developer" one by one should be added to list.
This can have also have some side effects, if someone uses redirection 
from @sourceforge.net account, it will get two copies of message, 
because both emails will be subscribed.

If we can subscribe some: svncommit@harbour-project.org to mailing list, 
and put .forward from svncommit@harbour-project.org to 
harbour@harbour-project.org it could be a solution. We should also solve:
1) "From:" changing on forward.
2) Do not forward mails from harbour@harbour-project.org back to 
harbour@harbour-project.org, to avoid loop.


Regards,
Mindaugas
From dbtopas at dbtopas.lt  Fri Jan 16 10:38:35 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Jan 16 10:38:36 2009
Subject: [Harbour] Fwd: SF.net
	SVN:	harbour-project:[10057]	trunk/harbour/ChangeLog
In-Reply-To: <49709F5A.9080105@fsgiudice.com>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>	<49708C44.9040307@dbtopas.lt>	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>
	<49709F5A.9080105@fsgiudice.com>
Message-ID: <4970A9FB.7090205@dbtopas.lt>

> The other question is that, AFAIR and for description I have read, 
> svnnotify will send every commit made to any file on SVN and not only to 
> changelog file, as implemented on sf.net, and this I don't like.

Hi,


> From: [vszakats users sourceforge net]
> Date: Fri, Jan 16, 2009 at 12:26 PM
> Subject: SF.net SVN: harbour-project:[10057] trunk/harbour/ChangeLog
> To: ******@******
> 
> 
> Revision: 10057
>          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10057&view=rev
> Author:   vszakats
> Date:     2009-01-16 11:26:53 +0000 (Fri, 16 Jan 2009)
> 
> Log Message:
> -----------
> testing hook

Log message is HERE ^^^^, at the begining of email, so you don't have to 
look all content of email. Sometimes, I use to see changes of other 
developers, so diff output is usefull. Perhaps, the only bad reason 
could be diff for harbour.yyc file. It is long and has no info about the 
change.

Why do you want to avoid getting diff for every file? Limited mailbox 
size, or...?


Best regards,
Mindaugas
From harbour.01 at syenar.hu  Fri Jan 16 10:42:12 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Jan 16 10:44:15 2009
Subject: [Harbour] Fwd: SF.net SVN: harbour-project:[10057]
	trunk/harbour/ChangeLog
In-Reply-To: <4970A9FB.7090205@dbtopas.lt>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>
	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>
	<49708C44.9040307@dbtopas.lt>
	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>
	<49709F5A.9080105@fsgiudice.com> <4970A9FB.7090205@dbtopas.lt>
Message-ID: <18d502870901160742v56c8f5dbi15fdfa7bd1e8aaac@mail.gmail.com>

There is option in sf.net to add multiple hooks, so there could be one hook
with and another without the diffs. I personally wouldn't
make it that complicated, as the main point of this list is development,
so diffs shouldn't be something unorthodox or inappropriate here,
at least IMO.

Brgds,
Viktor

On Fri, Jan 16, 2009 at 4:38 PM, Mindaugas Kavaliauskas
<dbtopas@dbtopas.lt>wrote:

> The other question is that, AFAIR and for description I have read,
>> svnnotify will send every commit made to any file on SVN and not only to
>> changelog file, as implemented on sf.net, and this I don't like.
>>
>
> Hi,
>
>
>  From: [vszakats users sourceforge net]
>> Date: Fri, Jan 16, 2009 at 12:26 PM
>> Subject: SF.net SVN: harbour-project:[10057] trunk/harbour/ChangeLog
>> To: ******@******
>>
>>
>> Revision: 10057
>>
>> http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10057&view=rev
>> Author:   vszakats
>> Date:     2009-01-16 11:26:53 +0000 (Fri, 16 Jan 2009)
>>
>> Log Message:
>> -----------
>> testing hook
>>
>
> Log message is HERE ^^^^, at the begining of email, so you don't have to
> look all content of email. Sometimes, I use to see changes of other
> developers, so diff output is usefull. Perhaps, the only bad reason could be
> diff for harbour.yyc file. It is long and has no info about the change.
>
> Why do you want to avoid getting diff for every file? Limited mailbox size,
> or...?
>
>
> Best regards,
> Mindaugas
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090116/65227927/attachment-0001.html
From M.Horodyski at pzuzycie.com.pl  Fri Jan 16 10:45:56 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri Jan 16 10:46:01 2009
Subject: [Harbour] Uhttpd1/2 and ow.
In-Reply-To: <49708B11.7040507@dbtopas.lt>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501C37D93@PINK.zycie.pzu>

>-----Original Message-----
>From: Mindaugas Kavaliauskas [mailto:dbtopas@dbtopas.lt] 
>Sent: Friday, January 16, 2009 2:27 PM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] Uhttpd1/2 and ow.
>
>> How can I compile above file with soket.c and OpenWatcom compiler ?
>
>Hi,
>
>
>I do not have OW compiler. You should find docs about OW 
>compiler command line switches and try to run it. Later fix 
>compile time warnings and errors, if compiler will generate it.

When add 2 lines in hbmk :

      wpp386 -j -w3 -5s -5r -fp5 -oxehtz -zq -zt0 -mf -bt=NT %C_USR%
%_HB_PRG_NAME%.c -fo=%_HB_PRG_NAME%.obj
Here ->      wpp386 -j -w3 -5s -5r -fp5 -oxehtz -zq -zt0 -mf -bt=NT
socket.c -fo=socket.obj
      echo OP osn=NT OP stack=65536 OP CASEEXACT %L_USR% NAME
%_HB_PRG_NAME%.exe > _hb_mk.tmp
      echo FILE %_HB_PRG_NAME%.obj >> _hb_mk.tmp
And here ->      echo FILE socket.obj >> _hb_mk.tmp
      echo LIBP C:\harbour\lib\w32\owatcom >> _hb_mk.tmp

I can compile and run it. But this bat file is now only to utttpd files.

Regards,
Marek Horodyski
From harbour.01 at syenar.hu  Fri Jan 16 10:48:43 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Jan 16 10:50:44 2009
Subject: [Harbour] Fwd: SF.net SVN: harbour-project:[10057]
	trunk/harbour/ChangeLog
In-Reply-To: <4970A8AD.5060207@dbtopas.lt>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>
	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>
	<49708C44.9040307@dbtopas.lt>
	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>
	<4970A8AD.5060207@dbtopas.lt>
Message-ID: <18d502870901160748qfca2e95o96d408ce11c4e5ee@mail.gmail.com>

>
> Mmmm... Yes, perhaps. I'm nor shure if mailling list has possibility to
> allow *@sourceforge.net users. Otherwise every "sourceforge.net developer"
> one by one should be added to list.
> This can have also have some side effects, if someone uses redirection from
> @sourceforge.net account, it will get two copies of message, because both
> emails will be subscribed.


True. One-by-one needs manual administration and possibility for mistake.

Maybe committers could resubscribe using sf.net addresses, but that
again would mean the commit posts would not be guaranteed to be
complete.


> If we can subscribe some: svncommit@harbour-project.org to mailing list,
> and put .forward from svncommit@harbour-project.org to
> harbour@harbour-project.org it could be a solution. We should also solve:
> 1) "From:" changing on forward.
> 2) Do not forward mails from harbour@harbour-project.org back to
> harbour@harbour-project.org, to avoid loop.


Yes, that looks like it.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090116/cf560c76/attachment.html
From info at fsgiudice.com  Fri Jan 16 10:57:25 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri Jan 16 10:57:31 2009
Subject: [Harbour] Fwd:
	SF.net	SVN:	harbour-project:[10057]	trunk/harbour/ChangeLog
In-Reply-To: <4970A9FB.7090205@dbtopas.lt>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>	<49708C44.9040307@dbtopas.lt>	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>	<49709F5A.9080105@fsgiudice.com>
	<4970A9FB.7090205@dbtopas.lt>
Message-ID: <4970AE65.9060401@fsgiudice.com>

Hi,

Il 16/01/2009 16.38, Mindaugas Kavaliauskas ha scritto:
>>
>> Log Message:
>> -----------
>> testing hook
> 
> Log message is HERE ^^^^, at the begining of email, so you don't have to 
> look all content of email. Sometimes, I use to see changes of other 
> developers, so diff output is usefull. Perhaps, the only bad reason 
> could be diff for harbour.yyc file. It is long and has no info about the 
> change.
> 

ok, I missed it.

> Why do you want to avoid getting diff for every file? Limited mailbox 
> size, or...?
> 

Simply that I see on other lists that some people, because it is 
available diff for every files, limit or avoid to write in changelog and 
in log message.
But I'm sure we will continue to be diligent ;-)

Ok, lets go on with test.

Best regards

Francesco
From dbtopas at dbtopas.lt  Fri Jan 16 11:06:59 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Jan 16 11:06:59 2009
Subject: [Harbour] Uhttpd1/2 and ow.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501C37D93@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501C37D93@PINK.zycie.pzu>
Message-ID: <4970B0A3.2060108@dbtopas.lt>

> When add 2 lines in hbmk :
> 
>       wpp386 -j -w3 -5s -5r -fp5 -oxehtz -zq -zt0 -mf -bt=NT %C_USR%
> %_HB_PRG_NAME%.c -fo=%_HB_PRG_NAME%.obj
> Here ->      wpp386 -j -w3 -5s -5r -fp5 -oxehtz -zq -zt0 -mf -bt=NT
> socket.c -fo=socket.obj
>       echo OP osn=NT OP stack=65536 OP CASEEXACT %L_USR% NAME
> %_HB_PRG_NAME%.exe > _hb_mk.tmp
>       echo FILE %_HB_PRG_NAME%.obj >> _hb_mk.tmp
> And here ->      echo FILE socket.obj >> _hb_mk.tmp
>       echo LIBP C:\harbour\lib\w32\owatcom >> _hb_mk.tmp
> 
> I can compile and run it. But this bat file is now only to utttpd files.

Hi,


I really do not now that hbmk is. I'm using my own scripts to compile. 
Please, keep a separate .bat file for uhttpd, or manage the solution any 
way you can. uhttpd is not a part of Harbour code, it is just some test 
sample for developers on mailing list, so I will not provide any 
multiplatform build system for it.


Best regards,
Mindaugas

From harbour.01 at syenar.hu  Fri Jan 16 11:22:26 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Jan 16 11:24:54 2009
Subject: [Harbour] Fwd: SF.net SVN: harbour-project:[10057]
	trunk/harbour/ChangeLog
In-Reply-To: <4970AE65.9060401@fsgiudice.com>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>
	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>
	<49708C44.9040307@dbtopas.lt>
	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>
	<49709F5A.9080105@fsgiudice.com> <4970A9FB.7090205@dbtopas.lt>
	<4970AE65.9060401@fsgiudice.com>
Message-ID: <18d502870901160822r63a6df6ej95efa82c266e0fba@mail.gmail.com>

Well, we have option for both. It diff is problematic, we can easily have
notifications without it.
With diff, we also need to deal with maximum message sizes,
which is 40K. Diff files can often be larger than that. We can raise
the limit (maybe only for the forwarder mailbox), or omit the diffs.

Or have a separate "full diff commit notification" list (in addition
to the normal short commit notifications).

Brgds,
Viktor

On Fri, Jan 16, 2009 at 4:57 PM, Francesco Saverio Giudice <
info@fsgiudice.com> wrote:

> Hi,
>
> Il 16/01/2009 16.38, Mindaugas Kavaliauskas ha scritto:
>
>>
>>> Log Message:
>>> -----------
>>> testing hook
>>>
>>
>> Log message is HERE ^^^^, at the begining of email, so you don't have to
>> look all content of email. Sometimes, I use to see changes of other
>> developers, so diff output is usefull. Perhaps, the only bad reason could be
>> diff for harbour.yyc file. It is long and has no info about the change.
>>
>>
> ok, I missed it.
>
>  Why do you want to avoid getting diff for every file? Limited mailbox
>> size, or...?
>>
>>
> Simply that I see on other lists that some people, because it is available
> diff for every files, limit or avoid to write in changelog and in log
> message.
> But I'm sure we will continue to be diligent ;-)
>
> Ok, lets go on with test.
>
> Best regards
>
> Francesco
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090116/02638354/attachment.html
From lorenzo.fiorini at gmail.com  Fri Jan 16 11:49:27 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jan 16 11:49:31 2009
Subject: [Harbour] Can the compiler warn if a local var is used unassigned?
Message-ID: <9257026e0901160849r6488bfbdsec3e9519ed06f223@mail.gmail.com>

Thanks to great Mindaugas' -w3 addition I've done a major cleanup of my apps.

I wonder if the compiler can detect if a local var is used before assigned.

function main
local nVar
nVar := nVar + 1
return nVar

best regards,
Lorenzo
From info at fsgiudice.com  Fri Jan 16 15:49:50 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri Jan 16 15:49:59 2009
Subject: [Harbour] 2009-01-16 21:48 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
Message-ID: <4970F2EE.6080306@fsgiudice.com>

2009-01-16 21:48 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   * harbour/source/rdd/usrrdd/rdds/logrdd.prg
     + Added new function hb_LogRddValueToText()
     * Changed parameters send at CodeBlocks that user can define
       using hb_LogRddMsgLogBlock() and hb_LogRddUserLogBlock().
       See notes.

     ; NOTE: Made LOGRDD more under user control:
        - hb_LogRddValueToText( <xValue>] ) -> <cValue>
            cValue is formatted as "[<cValType>]>>><cString><<<"
            f.e.: date 31/12/2009 is formatted as "[D]>>>0d20091231<<<"
                  in harbour
            this function already exists as local function as ValToText()
        - Now bMsgLogBlock, defined using hb_LogRddMsgLogBlock(), receives
            follow parameters:
            cTag, cRDDName, cCmd, nWA, xPar1, xPar2, xPar3
            and has to returns a valid formatted string or NIL.
            In last case nothing is written to log file.
            xPar1, xPar2 and xPar3 change depends from called commands.
            For details see at ToString() local function.
        - bUserLogBlock, defined using hb_LogRddUserLogBlock(), receives 
same
            parameters of bMsgLogBlock.
            It have to return nothing, so it is under user control where to
            log and the format of the log string.


Best Regards

Francesco
From info at fsgiudice.com  Fri Jan 16 16:07:36 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri Jan 16 16:07:42 2009
Subject: [Harbour] 2009-01-16 22:05 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
Message-ID: <4970F718.40303@fsgiudice.com>

2009-01-16 22:05 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   * harbour/source/rdd/usrrdd/rdds/logrdd.prg
     - removed sample at end of file
     * typos
   * harbour/source/rdd/usrrdd/example/exlog.prg
     * Altered to reflect new codeblock parameters and added
       local MyToString() function to see how handle commands.


Best regards,

Francesco
From dbtopas at dbtopas.lt  Fri Jan 16 18:37:41 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Jan 16 18:37:42 2009
Subject: [Harbour] Can the compiler warn if a local var is used unassigned?
In-Reply-To: <9257026e0901160849r6488bfbdsec3e9519ed06f223@mail.gmail.com>
References: <9257026e0901160849r6488bfbdsec3e9519ed06f223@mail.gmail.com>
Message-ID: <49711A45.2090306@dbtopas.lt>

Lorenzo Fiorini wrote:
> Thanks to great Mindaugas' -w3 addition I've done a major cleanup of my apps.
> 
> I wonder if the compiler can detect if a local var is used before assigned.
> 
> function main
> local nVar
> nVar := nVar + 1
> return nVar

Hi,


it can detect, but...

In Harbour variables are (kind of) assigned to NIL on its' defnintion, 
and this fact is often used by programmers. We often do, something like:

   LOCAL xI
   FOR nI := 1 TO ..
      IF xI == NIL  // xI is unassigned on first cycle of the loop
          ...
      ENDIF
      ...
   NEXT
or:
    PROC MY_MD5FILE(...)
    LOCAL cMD5
    DO WHILE ( cBuf := READBUF(...) ) != NIL
       cMD5 := HB_MD5( cBuf, cMD5 ) // cMD5 is unassigned on first cycle
    ENDDO
    RETURN cMD5

So,
    LOCAL nVar
    nVar := nVar + 1
is kind of
    LOCAL nVar := NIL
    nVar := nVar + 1
problem.

But it is not problem of unassigned variable, it is problem of operation 
plus (NIL + NUMERIC). Some error detection could be done now, but 
expression tree and general infrastructure of typed variables/values in 
compiler can help to find much more errors, ex.:
   nVar := NIL
   nVar += LEN(aI)
So, I do not want to do a partial implementation of this based on pcode 
analysis.


Best regards,
Mindaugas

From druzus at acn.waw.pl  Fri Jan 16 21:39:21 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Jan 16 21:35:36 2009
Subject: [Harbour] 2009-01-17 03:39 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090117023921.GA16899@34-mo7-2.acn.waw.pl>

2009-01-17 03:39 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbgtcore.h
  * harbour/source/rtl/hbgtcore.c
    + added two new methods:
      TOUCHLINE() - marks line as modified
      REDRAWDIFF() - it contains REFRESH() from which is now called so
      it's possible to overload this method by upper level RDDs without
      touching REFRESH() method which can be overloaded by intermediate
      RDDs

  * harbour/contrib/hbct/ctwin.c
    % do not use EXPOSEAREA() and TOUCHCELL() methods but TOUCHLINE()
      only and overloaded REDRAWDIFF() - it should gives noticeable
      speed improvement in some where cost of screen update is very
      big and GT does not calculate minimal update area.

  * harbour/source/rdd/dbfnsx/dbfnsx1.c
    % minor speed improvement in key decoding

best regards
Przemek
From lorenzo.fiorini at gmail.com  Fri Jan 16 22:06:42 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jan 16 22:06:46 2009
Subject: [Harbour] Can the compiler warn if a local var is used 
	unassigned?
In-Reply-To: <49711A45.2090306@dbtopas.lt>
References: <9257026e0901160849r6488bfbdsec3e9519ed06f223@mail.gmail.com>
	<49711A45.2090306@dbtopas.lt>
Message-ID: <9257026e0901161906t73d68da8p9e13d7645bd3d50@mail.gmail.com>

On Sat, Jan 17, 2009 at 12:37 AM, Mindaugas Kavaliauskas
<dbtopas@dbtopas.lt> wrote:

> In Harbour variables are (kind of) assigned to NIL on its' defnintion, and
> this fact is often used by programmers. We often do, something like:
>
>  LOCAL xI
>  FOR nI := 1 TO ..
>     IF xI == NIL  // xI is unassigned on first cycle of the loop
>         ...
>     ENDIF
>     ...
>  NEXT
> ...
> So, I do not want to do a partial implementation of this based on pcode
> analysis.

I have seen how useful has been -w3 to detect bad code like:

function lookup
.....
cOldAlias = alias()
select cNewAlias
.....
<miss to restore the saved alias>
return

I understand it could also warn valid code but I still think it could
be useful to have it maybe as separate switch like ( -w3U or -wu ) to
detect "possible" rt errors.

Clearly typed vars would be a more definitive solution but it also
will require a big change in the code, instead this could be a "run
once" switch to use with -w3 to clean and check existing code.

best regards,
Lorenzo







so it could be also useful to check where giving a look but now after
deleting many unused assignments
From philb at philb.us  Fri Jan 16 20:19:20 2009
From: philb at philb.us (Phil Barnett)
Date: Fri Jan 16 22:53:56 2009
Subject: [Harbour] Fwd: SF.net SVN: harbour-project:[10057]
	trunk/harbour/ChangeLog
In-Reply-To: <18d502870901160748qfca2e95o96d408ce11c4e5ee@mail.gmail.com>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>	<49708C44.9040307@dbtopas.lt>	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>	<4970A8AD.5060207@dbtopas.lt>
	<18d502870901160748qfca2e95o96d408ce11c4e5ee@mail.gmail.com>
Message-ID: <49713218.8080806@philb.us>

Viktor Szak?ts wrote:
>
>     Mmmm... Yes, perhaps. I'm nor shure if mailling list has
>     possibility to allow *@sourceforge.net <http://sourceforge.net>
>     users. Otherwise every "sourceforge.net <http://sourceforge.net>
>     developer" one by one should be added to list.
>     This can have also have some side effects, if someone uses
>     redirection from @sourceforge.net <http://sourceforge.net>
>     account, it will get two copies of message, because both emails
>     will be subscribed.
>
>
> True. One-by-one needs manual administration and possibility for mistake.
>
> Maybe committers could resubscribe using sf.net <http://sf.net> 
> addresses, but that 
> again would mean the commit posts would not be guaranteed to be 
> complete.
>  
>
>     If we can subscribe some: svncommit@harbour-project.org
>     <mailto:svncommit@harbour-project.org> to mailing list, and put
>     .forward from svncommit@harbour-project.org
>     <mailto:svncommit@harbour-project.org> to
>     harbour@harbour-project.org <mailto:harbour@harbour-project.org>
>     it could be a solution. We should also solve:
>     1) "From:" changing on forward.
>     2) Do not forward mails from harbour@harbour-project.org
>     <mailto:harbour@harbour-project.org> back to
>     harbour@harbour-project.org <mailto:harbour@harbour-project.org>,
>     to avoid loop.
>
>
> Yes, that looks like it.
I can build mailboxes on the domain and I can forward them. I can join 
harbour@harbour-project.org with the nomail option set.

Does that sound like it will work? nomail means don't send any list mail.
From harbour.01 at syenar.hu  Sat Jan 17 05:50:40 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Jan 17 05:50:43 2009
Subject: [Harbour] Fwd: SF.net SVN: harbour-project:[10057]
	trunk/harbour/ChangeLog
In-Reply-To: <49713218.8080806@philb.us>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>
	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>
	<49708C44.9040307@dbtopas.lt>
	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>
	<4970A8AD.5060207@dbtopas.lt>
	<18d502870901160748qfca2e95o96d408ce11c4e5ee@mail.gmail.com>
	<49713218.8080806@philb.us>
Message-ID: <18d502870901170250s55f3239fy8f883243e85c6637@mail.gmail.com>

Hi Phil,

>
>> Yes, that looks like it.
>>
> I can build mailboxes on the domain and I can forward them. I can join
> harbour@harbour-project.org with the nomail option set.
>
> Does that sound like it will work? nomail means don't send any list mail.


Sounds okay, let's try it with svncommit@harbour-project.org

I'm setting up a notification for this address.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090117/3a8cd12c/attachment.html
From harbour.01 at syenar.hu  Sat Jan 17 05:59:19 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Jan 17 05:59:24 2009
Subject: [Harbour] Fwd: SF.net SVN: harbour-project:[10057]
	trunk/harbour/ChangeLog
In-Reply-To: <18d502870901170250s55f3239fy8f883243e85c6637@mail.gmail.com>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>
	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>
	<49708C44.9040307@dbtopas.lt>
	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>
	<4970A8AD.5060207@dbtopas.lt>
	<18d502870901160748qfca2e95o96d408ce11c4e5ee@mail.gmail.com>
	<49713218.8080806@philb.us>
	<18d502870901170250s55f3239fy8f883243e85c6637@mail.gmail.com>
Message-ID: <18d502870901170259u6e30afe8o938917a6da48f5ef@mail.gmail.com>

Phil, could you please also raise the message size limit to 150K?

sf.net has a '--max-diff-length 100000' option set,
so 150K is enough, and it's also acceptable as a generic
limit for all subscribers. (we're at 40K right now AFAIK).

Brgds,
Viktor

On Sat, Jan 17, 2009 at 11:50 AM, Viktor Szak?ts <harbour.01@syenar.hu>wrote:

> Hi Phil,
>
>>
>>> Yes, that looks like it.
>>>
>> I can build mailboxes on the domain and I can forward them. I can join
>> harbour@harbour-project.org with the nomail option set.
>>
>> Does that sound like it will work? nomail means don't send any list mail.
>
>
> Sounds okay, let's try it with svncommit@harbour-project.org
>
> I'm setting up a notification for this address.
>
> Brgds,
> Viktor
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090117/8470aaaf/attachment.html
From harbour.01 at syenar.hu  Sat Jan 17 17:26:23 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Jan 17 17:26:34 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
Message-ID: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>

Hi all,
Pls see a Harbour library which implements SHA2 related
checksumming and SHA2 MAC creation, here:

http://www.syenar.hu/harbour/hbsha2.zip

Usage from .prg:
HB_SHA224( <cMessage> ) -> <cDigest>
HB_SHA256( <cMessage> ) -> <cDigest>
HB_SHA384( <cMessage> ) -> <cDigest>
HB_SHA512( <cMessage> ) -> <cDigest>

HB_SHA224_HMAC( <cMessage>, <cKey> ) -> <cMAC>
HB_SHA256_HMAC( <cMessage>, <cKey> ) -> <cMAC>
HB_SHA384_HMAC( <cMessage>, <cKey> ) -> <cMAC>
HB_SHA512_HMAC( <cMessage>, <cKey> ) -> <cMAC>

This is a thin wrapper around this code:
http://www.ouah.org/ogay/sha2/
http://www.ouah.org/ogay/hmac/

Above code has BSD license, the same as used in PCRE, so I assume
it's also safe to include it in Harbour.

You can unzip the attached code in the contrib dir, and build
it just like any other contribs.

If there are no objections and I've received feedback, I plan to
add these functions to the core.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090117/d6bd5aa4/attachment.html
From info at fsgiudice.com  Sat Jan 17 18:19:19 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Jan 17 18:19:25 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
In-Reply-To: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>
References: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>
Message-ID: <49726777.4010900@fsgiudice.com>

Hi Viktor,

Il 17/01/2009 23.26, Viktor Szak?ts ha scritto:
> Pls see a Harbour library which implements SHA2 related 
> checksumming and SHA2 MAC creation, here:

Great addition!
I will try.
Thank you.

A question: anyone has played with SSL support ? I'm interested about it 
because I'm playing with Mindaugas uhttpd code (I've extended it a little).

Best Regards,

Francesco
From harbour.01 at syenar.hu  Sat Jan 17 20:29:54 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Jan 17 20:29:58 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
In-Reply-To: <49726777.4010900@fsgiudice.com>
References: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>
	<49726777.4010900@fsgiudice.com>
Message-ID: <18d502870901171729w48da61f8n871fdc612cbc111f@mail.gmail.com>

Hi Francesco,


> A question: anyone has played with SSL support ? I'm interested about it
> because I'm playing with Mindaugas uhttpd code (I've extended it a little).
>

Maybe we should upload it, and continue to extend the code online,
it's a very important addition, and everyone could benefit from it. It
could go to /contrib/examples/<...>/ as is.

I've played with OpenSSL in context with hbcurl. Once getting through the
burden of building it (or using the .dll version), it seemed pretty simple
to add SSL support for example for SMTP. To use it with Harbour apps,
either an OpenSSL API Harbour wrapper layer would be needed, or
a C level Harbour inet API. At least that's how it seemed to me.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090118/f046260d/attachment.html
From dbtopas at dbtopas.lt  Sat Jan 17 22:26:36 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sat Jan 17 22:26:35 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
In-Reply-To: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>
References: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>
Message-ID: <4972A16C.9040104@dbtopas.lt>

Viktor Szak?ts wrote:
> Pls see a Harbour library which implements SHA2 related 
> checksumming and SHA2 MAC creation, here:
> 
> http://www.syenar.hu/harbour/hbsha2.zip
> 
> Usage from .prg:
> HB_SHA224( <cMessage> ) -> <cDigest>
> HB_SHA256( <cMessage> ) -> <cDigest>
> HB_SHA384( <cMessage> ) -> <cDigest>
> HB_SHA512( <cMessage> ) -> <cDigest>
> 
> HB_SHA224_HMAC( <cMessage>, <cKey> ) -> <cMAC>
> HB_SHA256_HMAC( <cMessage>, <cKey> ) -> <cMAC>
> HB_SHA384_HMAC( <cMessage>, <cKey> ) -> <cMAC>
> HB_SHA512_HMAC( <cMessage>, <cKey> ) -> <cMAC>
> 
> This is a thin wrapper around this code:
> http://www.ouah.org/ogay/sha2/
> http://www.ouah.org/ogay/hmac/
> 
> Above code has BSD license, the same as used in PCRE, so I assume 
> it's also safe to include it in Harbour.
> 
> You can unzip the attached code in the contrib dir, and build 
> it just like any other contribs.
> 
> If there are no objections and I've received feedback, I plan to 
> add these functions to the core.

Hi,


just a few quick ideas:
1) it would be nice to have C also interface and to have names 
compatible to existing MD5 hasing;
2) SHA1 is also member of the family and often used (SHA224 is seldom);
3) HMAC calculation is algorithm independent from hasing. Maybe we can 
have universal HB_HMAC() instead of HB_*_HMAC(),
I guess code is:
FUNC HB_HMAC(fHash, cMessage, cKey)
    IF LEN(cKey) > 64;   cKey := HB_HexToStr(EVAL(fHash, cKey))
    ENDIF
    cKey := PADR(cKey, 64, CHR(0))
RETURN EVAL(fHash, HB_STRXOR(cKey, 0x5C) + ;
                    EVAL(fHash, HB_STRXOR(cKey, 0x36) + cMessage))
4) If there are some licence problem, we can find public domain 
implementations. I guess rfc or standarts implementation is also free by 
some mean;
5) I'm starting to think about some generic HB_CRYPT*() library. I 
should stop think :)


Best regards,
Mindaugas
From harbour.01 at syenar.hu  Sun Jan 18 04:01:47 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Jan 18 04:01:52 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
In-Reply-To: <4972A16C.9040104@dbtopas.lt>
References: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>
	<4972A16C.9040104@dbtopas.lt>
Message-ID: <18d502870901180101k4b2cfbfct732fd38863783cd1@mail.gmail.com>

Hi Mindaugas,

Many thanks for the feedback.

1) it would be nice to have C also interface and to have names compatible to
> existing MD5 hasing;


The C interface is there, a Harbour C namespace
(and MD5 function) compatible layer can easily be added.


> 2) SHA1 is also member of the family and often used (SHA224 is seldom);


As far as I could see there is no big overhead in having
all four versions bundled together. I guess 256 and 512
are the most often used versions, so if group thinks we
can easily remove the rest.

I didn't deal with SHA1 because it isn't considered safe
anymore (just like MD5). It can easily be added, given
we find an implementation with a Harbour compatible licence.

Here's one:
http://www.aarongifford.com/computers/hmac_sha1.tar.gz
(HMAC support is BSD, the rest is PD)

Personally, I'd also welcome AES in Harbour.


> 3) HMAC calculation is algorithm independent from hasing. Maybe we can have
> universal HB_HMAC() instead of HB_*_HMAC(),
> I guess code is:
> FUNC HB_HMAC(fHash, cMessage, cKey)
>   IF LEN(cKey) > 64;   cKey := HB_HexToStr(EVAL(fHash, cKey))
>   ENDIF
>   cKey := PADR(cKey, 64, CHR(0))
> RETURN EVAL(fHash, HB_STRXOR(cKey, 0x5C) + ;
>                   EVAL(fHash, HB_STRXOR(cKey, 0x36) + cMessage))


Good idea, but I'm personally lost with the details here :)

Maybe I should change the names to HB_HMAC_SHA*()
from HB_SHA*_HMAC() as a small step, should I?


> 4) If there are some licence problem, we can find public domain
> implementations. I guess rfc or standarts implementation is also free by
> some mean;


A public domain one would be great, but couldn't find any.


> 5) I'm starting to think about some generic HB_CRYPT*() library. I should
> stop think :)


Just go ahead :)

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090118/0a186ad1/attachment.html
From niki at synel.co.il  Sun Jan 18 05:02:00 2009
From: niki at synel.co.il (Chen Kedem)
Date: Sun Jan 18 05:04:40 2009
Subject: [Harbour] SF Feature Requests#2516291: setmode()
Message-ID: <1A07FEDC778C3E4AA417F089511F859C07A860C6D3@Mail-yoq.SYNEL-COMPANY.LTD>

The following feature request was posted on SF:
http://sourceforge.net/tracker/index.php?func=detail&aid=2516291&group_id=681&atid=350681

mastercom wrote:
--------------------------------------------------------
setmode()

Hi Harbour Guys,
I'm using harbour on the following env:

HB_ARCHITECTURE=w32
HB_COMPILER=mingw32
HB_GT_LIB=gtwvt

it would be nice if the setmode() function automatically sets the character
size of display window.
for example, if I call setmode(25,80) and enlarge the window size to the
entire screen and, after doing that, call setmode(43,80) harbour does not
set the requested size.
If I reduce the windows size (and the characters size), then the second
setmode(43,80) works properly.
Is it possible to do this work automatically?

Thank you and thanks a lot for harbour.
--------------------------------------------------------


  Chen.
From niki at synel.co.il  Sun Jan 18 05:02:13 2009
From: niki at synel.co.il (Chen Kedem)
Date: Sun Jan 18 05:08:56 2009
Subject: [Harbour] Re: SF Feature Requests#2475056: PCRE automatic
	precompiling
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C0335276234@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C0335276234@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <1A07FEDC778C3E4AA417F089511F859C07A860C6D4@Mail-yoq.SYNEL-COMPANY.LTD>

The following was sent to the list and got no comment, maybe bacuse of the problems we had in the list.

http://lists.harbour-project.org/pipermail/harbour/2009-January/014073.html_______
From: Chen Kedem
Sent: 04 January 2009 08:16
To: Harbour mail-list
Subject: SF Feature Requests#2475056: PCRE automatic precompiling

The following feature request was posted on SF:
http://sourceforge.net/tracker/index.php?func=detail&aid=2475056&group_id=681&atid=350681

Anonymous wrote:
--------------------------------------------------------
PCRE automatic precompiling

Hi Harbour folks,
hb_regexMatch() and friends could be enhanced in speed, if the passed PCRE
expressions would be compiled and cached for subsequent calls. Typically
hb_regexMatch() is used with the same PCRE expression on many data
(database records f.e.), and precompiling the expression is always more
efficient than recompiling the same expression on each call.

Sometimes, manually precompiling an expression (with hb_regexComp()), isn't
easily possible (needs substantial program modification, if possible at
all), f.e. when the hb_regexMatch() call is used in a macro.

If hb_regex*() functions would maintain a per thread cache of - say - the
last 10-20 expressions in a hashed lookup table, along with the precompiled
expressions in binary form, it would create a transparent speedup for all
apps. This may even make hb_regexComp() unnecessary.

Regards
--------------------------------------------------------


  Chen.
From bedipritpal at hotmail.com  Sun Jan 18 06:44:58 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun Jan 18 06:45:01 2009
Subject: [Harbour] SF Feature Requests#2516291: setmode()
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C07A860C6D3@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C07A860C6D3@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <21526885.post@talk.nabble.com>


This is a known issue.
Next issue I will try to resolve it.


Chen Kedem wrote:
> 
> setmode()
> 
> Hi Harbour Guys,
> I'm using harbour on the following env:
> 
> HB_ARCHITECTURE=w32
> HB_COMPILER=mingw32
> HB_GT_LIB=gtwvt
> 
> it would be nice if the setmode() function automatically sets the
> character
> size of display window.
> for example, if I call setmode(25,80) and enlarge the window size to the
> entire screen and, after doing that, call setmode(43,80) harbour does not
> set the requested size.
> If I reduce the windows size (and the characters size), then the second
> setmode(43,80) works properly.
> Is it possible to do this work automatically?
> 

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/SF-Feature-Requests-2516291%3A-setmode%28%29-tp21525966p21526885.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Sun Jan 18 16:12:25 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Jan 18 16:08:36 2009
Subject: [Harbour] 2009-01-18 22:12 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090118211225.GA8137@34-mo7-2.acn.waw.pl>

2009-01-18 22:12 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/hbgtcore.c
    ! fixed UNSELECTED color updating in SetColor(). It should be changed
      only and always when ENHANCED color is changed

  * harbour/contrib/hbmzip/hbmzip.c
    ! fixed GPF in hb_zipDeleteFile() when file has comment

best regards
Przemek
From info at fsgiudice.com  Sun Jan 18 17:59:29 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Jan 18 17:59:37 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
In-Reply-To: <18d502870901171729w48da61f8n871fdc612cbc111f@mail.gmail.com>
References: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>	<49726777.4010900@fsgiudice.com>
	<18d502870901171729w48da61f8n871fdc612cbc111f@mail.gmail.com>
Message-ID: <4973B451.7020901@fsgiudice.com>

Hi Viktor,

Il 18/01/2009 2.29, Viktor Szak?ts ha scritto:
> Maybe we should upload it, and continue to extend the code online, 
> it's a very important addition, and everyone could benefit from it. It 
> could go to /contrib/examples/<...>/ as is.
>

Ok, I'll do, if Mindaugas agree. Do you have a name proposal ?
I think we can name it webserver (what fantasy ;-) ).
One version I have is based on Mindaugas version with socket.c and it is 
fast and stable. Another is based on inet*() version, that offers 
actually multiplatform support and extensions, but it has some problems.
So if it is ok I will upload first version.
Both have one problem at end of application if using HRBs modules 
(Unrecoverable 9001 error) but only on exit and I have not found the 
cause, otherwise they works.

> I've played with OpenSSL in context with hbcurl. Once getting through the 
> burden of building it (or using the .dll version), it seemed pretty simple 
> to add SSL support for example for SMTP. To use it with Harbour apps, 
> either an OpenSSL API Harbour wrapper layer would be needed, or 
> a C level Harbour inet API. At least that's how it seemed to me.
> 
Yes same thought here, also if I have found some basic examples around 
the net on minimal HTTPS support.
What I would like is to have a full multiplatform support and 
HTTP/HTTPS. Perhaps it is  the moment to start final net development.

Best regards

Francesco
From dbtopas at dbtopas.lt  Sun Jan 18 20:21:26 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sun Jan 18 20:21:22 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
In-Reply-To: <18d502870901180101k4b2cfbfct732fd38863783cd1@mail.gmail.com>
References: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>	<4972A16C.9040104@dbtopas.lt>
	<18d502870901180101k4b2cfbfct732fd38863783cd1@mail.gmail.com>
Message-ID: <4973D596.9090404@dbtopas.lt>

Hi,


> I didn't deal with SHA1 because it isn't considered safe 
> anymore (just like MD5). It can easily be added, given 
> we find an implementation with a Harbour compatible licence.

MD5 and SHA1 is still used in many standards. You can use stronger 
hashing in your application, but you'll need these for compatibility, 
ex. CRAM-MD5 (using MD5 HMAC) is used in IMAP, see: 
http://www.isi.edu/in-notes/rfc2195.txt

I do not know SHA1 details, but MD5 HMAC is still safe. MD5 is broken 
via birthday attack, but not MD5 HMAC. But perhaps it could be done in a 
few years...

> Personally, I'd also welcome AES in Harbour.
>  
> 
>     3) HMAC calculation is algorithm independent from hasing. Maybe we
>     can have universal HB_HMAC() instead of HB_*_HMAC(),
>     I guess code is:
>     FUNC HB_HMAC(fHash, cMessage, cKey)
>       IF LEN(cKey) > 64;   cKey := HB_HexToStr(EVAL(fHash, cKey))
>       ENDIF
>       cKey := PADR(cKey, 64, CHR(0))
>     RETURN EVAL(fHash, HB_STRXOR(cKey, 0x5C) + ;
>                       EVAL(fHash, HB_STRXOR(cKey, 0x36) + cMessage))
> 
> 
> Good idea, but I'm personally lost with the details here :)

The proposed above HB_HMAC() is full implementation of HMAC. Just see: 
http://en.wikipedia.org/wiki/HMAC  It is independent from hashing 
algorithm. It can calculate any HMAC:
   cSHA256HMAC := HB_HMAC(@HB_SHA256, cMessage, cKey)
   cMD5HMAC := HB_HMAC(@HB_MD5, cMessage, cKey)
etc.

> Maybe I should change the names to HB_HMAC_SHA*() 
> from HB_SHA*_HMAC() as a small step, should I?
>  
> 
>     4) If there are some licence problem, we can find public domain
>     implementations. I guess rfc or standarts implementation is also
>     free by some mean;
> 
> 
> A public domain one would be great, but couldn't find any.

http://www.cryptopp.com/ source are public domain, but it's C++. I also 
  think it is not difficult to implement using algorithm description.


>     5) I'm starting to think about some generic HB_CRYPT*() library. I
>     should stop think :)
> 
> Just go ahead :)

You've mentioned AES. Here I think we will need also some hb_crypt*() 
functions to separate block cipher mode (ECB, CBC, PCBC, CFB, OFB) from 
cipher itself (AES, DES, Blowfish, etc), just like I suggest to separate 
HMAC algorithm from hashing algorithm.


Regards,
Mindaugas
From dbtopas at dbtopas.lt  Sun Jan 18 20:31:56 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sun Jan 18 20:31:52 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
In-Reply-To: <4973B451.7020901@fsgiudice.com>
References: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>	<49726777.4010900@fsgiudice.com>	<18d502870901171729w48da61f8n871fdc612cbc111f@mail.gmail.com>
	<4973B451.7020901@fsgiudice.com>
Message-ID: <4973D80C.2040109@dbtopas.lt>

Francesco Saverio Giudice wrote:
> Ok, I'll do, if Mindaugas agree. Do you have a name proposal ?
> I think we can name it webserver (what fantasy ;-) ).
> One version I have is based on Mindaugas version with socket.c and it is 
> fast and stable. Another is based on inet*() version, that offers 
> actually multiplatform support and extensions, but it has some problems.
> So if it is ok I will upload first version.
> Both have one problem at end of application if using HRBs modules 
> (Unrecoverable 9001 error) but only on exit and I have not found the 
> cause, otherwise they works.

Feel free to do anything with proposed uhttpd (also commit). I just have 
some ideas how to extend it, but I'm not sure if these ideas will be 
similar to SVN changes by other people. It can happen, that after some 
time I will propose something completely different and incompatible from 
SVN.

I do not remember if I've mentioned the initial idea of name "uhttpd". 
Here "u" stands for "micro", since the first version was a tiny 300 prg 
lines http server.


Best regards,
Mindaugas

From harbour.01 at syenar.hu  Mon Jan 19 03:43:16 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 19 03:45:55 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
In-Reply-To: <4973D596.9090404@dbtopas.lt>
References: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>
	<4972A16C.9040104@dbtopas.lt>
	<18d502870901180101k4b2cfbfct732fd38863783cd1@mail.gmail.com>
	<4973D596.9090404@dbtopas.lt>
Message-ID: <18d502870901190043w50aa0fd3l90a0799eb3f91bae@mail.gmail.com>

Hi Mindaugas,


> I didn't deal with SHA1 because it isn't considered safe anymore (just like
>> MD5). It can easily be added, given we find an implementation with a Harbour
>> compatible licence.
>>
>
> MD5 and SHA1 is still used in many standards. You can use stronger hashing
> in your application, but you'll need these for compatibility, ex. CRAM-MD5
> (using MD5 HMAC) is used in IMAP, see:
> http://www.isi.edu/in-notes/rfc2195.txt


Yes, I know. Well, let's rename the lib to hbcrypt, so all such can be
included, I've also added an SHA-1 implementation, but no Harbour
layer and tests. I'll leave that for the group.


>    3) HMAC calculation is algorithm independent from hasing. Maybe we
>>    can have universal HB_HMAC() instead of HB_*_HMAC(),
>>    I guess code is:
>>    FUNC HB_HMAC(fHash, cMessage, cKey)
>>      IF LEN(cKey) > 64;   cKey := HB_HexToStr(EVAL(fHash, cKey))
>>      ENDIF
>>      cKey := PADR(cKey, 64, CHR(0))
>>    RETURN EVAL(fHash, HB_STRXOR(cKey, 0x5C) + ;
>>                      EVAL(fHash, HB_STRXOR(cKey, 0x36) + cMessage))
>>
>>
>> Good idea, but I'm personally lost with the details here :)
>>
>
> The proposed above HB_HMAC() is full implementation of HMAC. Just see:
> http://en.wikipedia.org/wiki/HMAC  It is independent from hashing
> algorithm. It can calculate any HMAC:
>  cSHA256HMAC := HB_HMAC(@HB_SHA256, cMessage, cKey)
>  cMD5HMAC := HB_HMAC(@HB_MD5, cMessage, cKey)
> etc.


Great, I'll test this and replace current HMAC implementation with this,
thanks!

We will need an HB_STRXOR(). Does this seem okay (UCHAR vs. BYTE might be
wrong here):
---
#include "hbapi.h"

HB_FUNC( HB_STRXOR )
{
   ULONG nStrSize = hb_parclen( 1 );
   UCHAR * pbyDest = ( UCHAR * ) hb_xgrab( nStrSize + 1 );

   const UCHAR * pbySource = ( UCHAR * ) hb_parcx( 1 );
   const UCHAR * pbyXor = ( UCHAR * ) hb_parcx( 2 );
   ULONG nXorSize = hb_parclen( 2 );

   ULONG nRetValPos = 0;
   ULONG nStrPos = 0;
   ULONG nXorPos = 0;

   while( nStrPos < nStrSize )
   {
      pbyDest[ nRetValPos++ ] = pbySource[ nStrPos++ ] ^ ( nXorSize ?
pbyXor[ nXorPos++ ] : 0 );

      if( nXorPos == nXorSize )
         nXorPos = 0;
   }

   hb_retclen_buffer( ( char * ) pbyDest, nStrSize );
}
---


> A public domain one would be great, but couldn't find any.
>>
>
> http://www.cryptopp.com/ source are public domain, but it's C++. I also
>  think it is not difficult to implement using algorithm description.


Nice page. On first round these BSD sources will do, just
to have something to tackle (and use), later, the group can
rewrite and/or replace them with better licensed ones.


> Just go ahead :)
>>
>
> You've mentioned AES. Here I think we will need also some hb_crypt*()
> functions to separate block cipher mode (ECB, CBC, PCBC, CFB, OFB) from
> cipher itself (AES, DES, Blowfish, etc), just like I suggest to separate
> HMAC algorithm from hashing algorithm.


Definitely sounds very interesting (and also beyond my capabilities :).

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090119/d43b140e/attachment.html
From harbour.01 at syenar.hu  Mon Jan 19 03:43:56 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 19 03:46:37 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
In-Reply-To: <4973D80C.2040109@dbtopas.lt>
References: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>
	<49726777.4010900@fsgiudice.com>
	<18d502870901171729w48da61f8n871fdc612cbc111f@mail.gmail.com>
	<4973B451.7020901@fsgiudice.com> <4973D80C.2040109@dbtopas.lt>
Message-ID: <18d502870901190043o4271dd56mf48327d7161818c4@mail.gmail.com>

uhttpd seems good to me.
Brgds,
Viktor

On Mon, Jan 19, 2009 at 2:31 AM, Mindaugas Kavaliauskas
<dbtopas@dbtopas.lt>wrote:

> Francesco Saverio Giudice wrote:
>
>> Ok, I'll do, if Mindaugas agree. Do you have a name proposal ?
>> I think we can name it webserver (what fantasy ;-) ).
>> One version I have is based on Mindaugas version with socket.c and it is
>> fast and stable. Another is based on inet*() version, that offers actually
>> multiplatform support and extensions, but it has some problems.
>> So if it is ok I will upload first version.
>> Both have one problem at end of application if using HRBs modules
>> (Unrecoverable 9001 error) but only on exit and I have not found the cause,
>> otherwise they works.
>>
>
> Feel free to do anything with proposed uhttpd (also commit). I just have
> some ideas how to extend it, but I'm not sure if these ideas will be similar
> to SVN changes by other people. It can happen, that after some time I will
> propose something completely different and incompatible from SVN.
>
> I do not remember if I've mentioned the initial idea of name "uhttpd". Here
> "u" stands for "micro", since the first version was a tiny 300 prg lines
> http server.
>
>
> Best regards,
> Mindaugas
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090119/2bc0c7d1/attachment.html
From druzus at acn.waw.pl  Mon Jan 19 06:55:46 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 19 06:51:58 2009
Subject: [Harbour] Re: SF Feature Requests#2475056: PCRE automatic
	precompiling
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C07A860C6D4@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C0335276234@Mail-yoq.SYNEL-COMPANY.LTD>
	<1A07FEDC778C3E4AA417F089511F859C07A860C6D4@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <20090119115546.GA26177@34-mo7-2.acn.waw.pl>

On Sun, 18 Jan 2009, Chen Kedem wrote:

Hi Chen,

> --------------------------------------------------------
> PCRE automatic precompiling
> Hi Harbour folks,
> hb_regexMatch() and friends could be enhanced in speed, if the passed PCRE
> expressions would be compiled and cached for subsequent calls. Typically
> hb_regexMatch() is used with the same PCRE expression on many data
> (database records f.e.), and precompiling the expression is always more
> efficient than recompiling the same expression on each call.
> Sometimes, manually precompiling an expression (with hb_regexComp()), isn't
> easily possible (needs substantial program modification, if possible at
> all), f.e. when the hb_regexMatch() call is used in a macro.

I do not see any problem in using precompiled regex expressions in macro
compiler. It's enough to store them in private variable.

Of course it's also always possible to create cache for compiled regex
expressions and programmer can make it in few lines if he need it, f.e.:

   func hb_regexPrecComp( cRegex, ... )
      thread static s_hRegex := { => }
      if !cRegex $ s_hRegex
         s_hRegex[ cRegex ] := hb_rexgexComp( cRegex, ... )
      endif
      return s_hRegex[ cRegex ]

and use this function instead of hb_regexComp()

> If hb_regex*() functions would maintain a per thread cache of - say - the
> last 10-20 expressions in a hashed lookup table, along with the precompiled
> expressions in binary form, it would create a transparent speedup for all
> apps. This may even make hb_regexComp() unnecessary.

And slowness in application which does not need it but table has to be
scanned for such precompiled expressions.
If user needs caching then can create it himself just like above. It's only
few lines. In some cases instead of creating wrapper to hb_rexgexComp() it
will be easier to create wrapper to hb_rexgexMatch(), f.e.:

   function my_regexMatch( xRegex, ... )
      thread static s_hRegex := { => }
      if valtype( xRegex ) == "C"
         if !xRegex $ s_hRegex
            xRegex := s_hRegex[ xRegex ] := hb_rexgexComp( xRegex, ... )
         else
            xRegex := s_hRegex[ xRegex ]
         endif
      endif
      return hb_rexgexMatch( xRegex, ... )

What is better and easier to use depends on user code but it can be
always easy implemented. In both versions there is no upper cache
size limit but it can be also added.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Jan 19 06:58:01 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 19 06:54:10 2009
Subject: [Harbour] 2009-01-19 12:57 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090119115801.GA15905@34-mo7-2.acn.waw.pl>

2009-01-19 12:57 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/hbproces.c
    ! include signal.h in all *nixes builds - it was my typo and not only
      Darwin needs it.

best regards
Przemek
From druzus at acn.waw.pl  Mon Jan 19 07:10:49 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 19 07:06:58 2009
Subject: [Harbour] 2009-01-19 13:10 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090119121049.GA26381@34-mo7-2.acn.waw.pl>

2009-01-19 13:10 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbmzip/hbmzip.c
    ! added missing nInternalAttr and nExternalAttr parameters decoding in
      function HB_ZIPFILECREATE() - problem located and fixed by Andres Reyes
      in xHarbour

best regards
Przemek
From niki at synel.co.il  Mon Jan 19 07:24:20 2009
From: niki at synel.co.il (Chen Kedem)
Date: Mon Jan 19 07:29:20 2009
Subject: [Harbour] Re: SF Feature Requests#2475056: PCRE automatic
	precompiling
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C07A860C6D4@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C0335276234@Mail-yoq.SYNEL-COMPANY.LTD>,
	<1A07FEDC778C3E4AA417F089511F859C07A860C6D4@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <1A07FEDC778C3E4AA417F089511F859C07A860C6DF@Mail-yoq.SYNEL-COMPANY.LTD>

Przemek,

Thanks for the reply.
I added it to the feature request and mark that item as closed.

  Chen.
From sscc at mweb.co.za  Mon Jan 19 09:01:59 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Mon Jan 19 09:02:09 2009
Subject: [Harbour] Class questions
Message-ID: <497487D7.5010804@mweb.co.za>

Hi

I was calling a method called "end" on a COM object, and nothing was 
happening. Fortunately for me the COM object supplies an equivalent 
alternative - endTransaction(), and that worked.

Is end() somehow reserved in our classes?

In a similar vein, what is the difference between init() and new()?

Are there other "special" methods?

TIA
Alex
From druzus at acn.waw.pl  Mon Jan 19 10:21:52 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 19 10:17:59 2009
Subject: [Harbour] Class questions
In-Reply-To: <497487D7.5010804@mweb.co.za>
References: <497487D7.5010804@mweb.co.za>
Message-ID: <20090119152151.GA16933@34-mo7-2.acn.waw.pl>

On Mon, 19 Jan 2009, Alex Strickland wrote:

Hi Alex,

> I was calling a method called "end" on a COM object, and nothing was 
> happening. Fortunately for me the COM object supplies an equivalent 
> alternative - endTransaction(), and that worked.
> Is end() somehow reserved in our classes?

AFAIK we do not have any of such restrictions. This code works perfectly.

   #include "hbclass.ch"
   proc main
      local o:=mycls():new()
      o:end()
   return
   create class mycls
      method end
   end class
   method end
      ? ::classname, hb_methodName()
   return self

Maybe you should check some non Harbour .ch files. Some Harbour 3-rd
party libraries uses a lot of PP rules which can break valid code.
Check code generated with -p option and also .c output (-gc2) for
:end() and :endTransaction() and compare differences.
Anyhow it's not Harbour problem.

> In a similar vein, what is the difference between init() and new()?

In Class(y) code class function should return "class object" not object
of given class. This class object understands :NEW() message and create
object of given class sending to this object :INIT() message with
parameters passed to :NEW(). Neither Harbour nor xHarbour have real
class object support and class functions always return object of given
class and both NEW() and INIT() are messages of this object. The default
implementation of :NEW() inherited from HBOBJECT class simply calls :INIT()
method.
I wanted to add real class object support to Harbour but I do not know
if it's still possible. People already created a lot of code which does
not use :new() at all so it will be serious backward compatibility problem.
It's a classic example of problems created by unfinished code added to
official repository which later cannot be easy finished or fixed.
Probably now the only one way to resolve this problem is creating new
hbclass.ch and leaving the old one for backward compatibility. Maybe
I or someone else will make it in the future. Code which calls NEW()
should work with both versions.

> Are there other "special" methods?

Read Class(y) documentation about general ideas.
See source/rtl/tobject.prg for default methods inherited from
HBOBJECT class.
If you use in your code:
   #define HB_CLS_NOTOBJECT      /* do not inherit from HBObject calss */
before
   #include "hbclass.ch"
then you disable inheritance from hbobject in your classes.
Additionally each class of any type supports:
   CLASSNAME
   CLASSH
   CLASSSEL
messages implemented in core code. They always work. 1-st and 2-nd
are Clipper compatible, f.e.:
   ? NIL:className, NIL:classH
works in both compilers in all cases.
If we add full class(y) support and class function will return object
of given class then this object will support message defined in
source/rtl/tclass.prg. In such case we should also extend it and add
some additional messages Class(y) compatible.

best regards,
Przemek
From dbtopas at dbtopas.lt  Mon Jan 19 10:52:40 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Jan 19 10:52:36 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
In-Reply-To: <18d502870901190043w50aa0fd3l90a0799eb3f91bae@mail.gmail.com>
References: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>	<4972A16C.9040104@dbtopas.lt>	<18d502870901180101k4b2cfbfct732fd38863783cd1@mail.gmail.com>	<4973D596.9090404@dbtopas.lt>
	<18d502870901190043w50aa0fd3l90a0799eb3f91bae@mail.gmail.com>
Message-ID: <4974A1C8.2060604@dbtopas.lt>

Hi,


> We will need an HB_STRXOR(). Does this seem okay (UCHAR vs. BYTE might 
> be wrong here):

Oh, yes, I forgot it's my function, not Harbour's. I use code:

HB_FUNC( HB_STRXOR )
{
    PHB_ITEM    pItem, pItem2;
    ULONG       ulLen1, ulLen2, ul, ul2;
    const char  *pStr1, *pStr2;
    char*       pRet;

    pItem = hb_param( 1, HB_IT_STRING );
    if( pItem )
    {
       pStr1 = hb_itemGetCPtr( pItem );
       ulLen1 = hb_itemGetCLen( pItem );

       if( ( pItem2 = hb_param( 2, HB_IT_STRING ) ) != NULL )
       {
          ulLen2 = hb_itemGetCLen( pItem2 );
          if( ulLen2 )
          {
             pStr2 = hb_itemGetCPtr( pItem2 );

             pRet = ( char* ) hb_xgrab( ulLen1 + 1 );
             memcpy( pRet, pStr1, ulLen1 + 1 );
             ul2 = 0;
             for( ul = 0; ul < ulLen1; ul++ )
             {
                pRet[ ul ] ^= pStr2[ ul2 ];
                if( ++ul2 == ulLen2 )
                   ul2 = 0;
             }
             hb_retclen_buffer( pRet, ulLen1 );
          }
          else
             hb_itemReturn( pItem );

          return;
       }
       else if( ( pItem2 = hb_param( 2, HB_IT_NUMERIC ) ) != NULL )
       {
          char  bChar = ( char ) hb_itemGetNI( pItem2 );

          if( bChar )
          {
             pRet = ( char* ) hb_xgrab( ulLen1 + 1 );
             memcpy( pRet, pStr1, ulLen1 + 1 );
             for( ul = 0; ul < ulLen1; ul++ )
                pRet[ ul ] ^= bChar;

             hb_retclen_buffer( pRet, ulLen1 );
          }
          else
             hb_itemReturn( pItem );

          return;
       }
    }
    hb_errRT_BASE_SubstR( EG_ARG, 3012, NULL, HB_ERR_FUNCNAME, 
HB_ERR_ARGS_BASEPARAMS );
}


It has syntax:
    HB_STRXOR( cString, cKey ) --> cXoredString
or
    HB_STRXOR( cString, nByte ) --> cXoredString

Some parameter error detection is done (I'm not sure that error subcode 
we should use, so, I've used 3012, just like in HB_STRTOHEX()). String 
is not reallocated if xor'ing to empty string or zero byte. Feel free to 
commit this code.


Best regards,
Mindaugas

From druzus at acn.waw.pl  Mon Jan 19 12:01:14 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 19 11:57:23 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
In-Reply-To: <4974A1C8.2060604@dbtopas.lt>
References: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>
	<4972A16C.9040104@dbtopas.lt>
	<18d502870901180101k4b2cfbfct732fd38863783cd1@mail.gmail.com>
	<4973D596.9090404@dbtopas.lt>
	<18d502870901190043w50aa0fd3l90a0799eb3f91bae@mail.gmail.com>
	<4974A1C8.2060604@dbtopas.lt>
Message-ID: <20090119170114.GA4214@34-mo7-2.acn.waw.pl>

On Mon, 19 Jan 2009, Mindaugas Kavaliauskas wrote:

Hi,

> Some parameter error detection is done (I'm not sure that error subcode we 
> should use, so, I've used 3012, just like in HB_STRTOHEX()). String is not 
> reallocated if xor'ing to empty string or zero byte. Feel free to commit 
> this code.

The RT error code numbers in Harbour is more general problem.
In Clipper each function uses its own unique error codes.
Most of these errors is replicated in Harbour code but our own
new functions does not use unique errors.
It should be cleaned.
We should create header file with RT error codes (also with the Clipper)
ones and use the #define costnant instead of numbers in source code.
Centralized list of RT errors should help in eliminating duplicated errors.
It's quite big job and I do not know if we will find contributors for it.

Similar problem we have with compile time errors though here the situations
is a little bit better. Anyhow it's not exactly what Clipper does.
In Harbour we have warning and error messages divided in separated list.
Additionally error messages are divided into FATAL (stoping compilation)
and normal once.
In Clipper seems that all error and warning messages are kept in single
list and error/warning number defined type of error:
   1000 <= x < 2000     // warnings
   2000 <= x < 3000     // errors
   3000 <= x < 4000     // fatal errors
Probably we should make the same and use and single function to generate
warnings and errors and eliminate current cPrefix parameter which seems to
be redundant.
Because we have different warning levels then we should divide warnings
for different levels:
   1000 <= x < 1200     // -w1
   1200 <= x < 1300     // -w2
   1300 <= x < 1400     // -w3
   1400 <= x < 1500     // -w4
   ...
and remove current hack with number set as 1-st character of warning
message. Clear error numbers definition greatly helps in creating
documentation, translations and locating the problem.

In the past I even created such modification for Harbour compiler but
I've never committed it so now it should be probably updated for modified
code. If we will find voluntaries to update RT error list then I can
made modifications in compiler code.
We should also create list of internal errors.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Jan 19 13:34:48 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 19 13:30:56 2009
Subject: [Harbour] 2009-01-19 19:34 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090119183448.GA3736@34-mo7-2.acn.waw.pl>

2009-01-19 19:34 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbct/ctwin.c
  * harbour/contrib/hbct/ctwin.h
  * harbour/contrib/hbct/ctwfunc.c
    + added support for window shadows which clears highlight attributes
      instead of using fixed shadow color attribute

best regards
Przemek
From lorenzo.fiorini at gmail.com  Mon Jan 19 13:36:45 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jan 19 13:36:49 2009
Subject: [Harbour] MT questions
Message-ID: <9257026e0901191036g6a43d265oed855b7a11ed34d9@mail.gmail.com>

I've merged some app into a single MT binary. What I expect is that
the all keeps all the previous way to work so different menus,
different dbfs but as thread modules instead of running binaries using
HB_RUN.

I've put all the sources in tha same dirs and added "thread" to all
module static vars but I still get a "shared" behaviour
( statics are set/get using a function ).

For example I have a static array that keeps the menu prompts. At the
start the menus are correct since every "module" has its own own
prompts but if I choose an entry in one app I get that entry disabled
in another app or not disabled at all.

If I launch the same app with a parameter that start only one thread
at time it works as expected.

Surely I'm missing sth or I am misunderstood how the "thread static" works.

Any suggestion?

best regards,
Lorenzo
From druzus at acn.waw.pl  Mon Jan 19 13:58:30 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 19 13:54:39 2009
Subject: [Harbour] MT questions
In-Reply-To: <9257026e0901191036g6a43d265oed855b7a11ed34d9@mail.gmail.com>
References: <9257026e0901191036g6a43d265oed855b7a11ed34d9@mail.gmail.com>
Message-ID: <20090119185830.GA9722@34-mo7-2.acn.waw.pl>

On Mon, 19 Jan 2009, Lorenzo Fiorini wrote:

Hi Lorenzo,

> For example I have a static array that keeps the menu prompts. At the
> start the menus are correct since every "module" has its own own
> prompts but if I choose an entry in one app I get that entry disabled
> in another app or not disabled at all.
> If I launch the same app with a parameter that start only one thread
> at time it works as expected.
> Surely I'm missing sth or I am misunderstood how the "thread static" works.
> Any suggestion?

Probably you are asking about the same thing as Pritpal was few weeks
ago. Should we clone or simply copy thread static initial value.
Now it's copied so the behavior is the same as for:

   proc main()
      local a:={}
      ? len(a)
      p(a)
      ? len(a)
   return
   proc p(x)
      aadd(x,0)
   return

Please note that p() changes the body of 'a' because 'a' and 'x'
local variables shares the same array body.
The same happens now for thread static variables initial value.
Each thread has its own thread static variable but they share
initialization data when it's complex item (hash or array) so
when you modify them in one thread in other modifications are
visible. If you want to eliminate this behavior you should
initialize the variable from source code, f.e.:
   if s_var == NIL
      s_var := {}
   endif
anyhow it's still open the question about Harbour default behavior.
I can change it and instead of copping initialization data to thread
static variable I can clone it. In other words the original initialization
value will be always kept in hidden HVM structures and cloned when each
thread access it 1-st time. Such modification will effect only hashes
and array values. All other types will be unchanged.
Seems that you are the second person confused by current behavior and
probably not the last one and this is important argument for me to
think about changing it.
What's the group opinion about it?

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Jan 19 14:02:55 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 19 14:03:02 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
In-Reply-To: <4974A1C8.2060604@dbtopas.lt>
References: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>
	<4972A16C.9040104@dbtopas.lt>
	<18d502870901180101k4b2cfbfct732fd38863783cd1@mail.gmail.com>
	<4973D596.9090404@dbtopas.lt>
	<18d502870901190043w50aa0fd3l90a0799eb3f91bae@mail.gmail.com>
	<4974A1C8.2060604@dbtopas.lt>
Message-ID: <18d502870901191102o1c0e8435ua2240e688906a85@mail.gmail.com>

Thanks Mindaugas.
For some reason I still cannot make pass your generic .prg HMAC function
on the validation tests. Probably some stupid mistakes on my part.

Brgds,
Viktor

On Mon, Jan 19, 2009 at 4:52 PM, Mindaugas Kavaliauskas
<dbtopas@dbtopas.lt>wrote:

> Hi,
>
>
>  We will need an HB_STRXOR(). Does this seem okay (UCHAR vs. BYTE might be
>> wrong here):
>>
>
> Oh, yes, I forgot it's my function, not Harbour's. I use code:
>
> HB_FUNC( HB_STRXOR )
> {
>   PHB_ITEM    pItem, pItem2;
>   ULONG       ulLen1, ulLen2, ul, ul2;
>   const char  *pStr1, *pStr2;
>   char*       pRet;
>
>   pItem = hb_param( 1, HB_IT_STRING );
>   if( pItem )
>   {
>      pStr1 = hb_itemGetCPtr( pItem );
>      ulLen1 = hb_itemGetCLen( pItem );
>
>      if( ( pItem2 = hb_param( 2, HB_IT_STRING ) ) != NULL )
>      {
>         ulLen2 = hb_itemGetCLen( pItem2 );
>         if( ulLen2 )
>         {
>            pStr2 = hb_itemGetCPtr( pItem2 );
>
>            pRet = ( char* ) hb_xgrab( ulLen1 + 1 );
>            memcpy( pRet, pStr1, ulLen1 + 1 );
>            ul2 = 0;
>            for( ul = 0; ul < ulLen1; ul++ )
>            {
>               pRet[ ul ] ^= pStr2[ ul2 ];
>               if( ++ul2 == ulLen2 )
>                  ul2 = 0;
>            }
>            hb_retclen_buffer( pRet, ulLen1 );
>         }
>         else
>            hb_itemReturn( pItem );
>
>         return;
>      }
>      else if( ( pItem2 = hb_param( 2, HB_IT_NUMERIC ) ) != NULL )
>      {
>         char  bChar = ( char ) hb_itemGetNI( pItem2 );
>
>         if( bChar )
>         {
>            pRet = ( char* ) hb_xgrab( ulLen1 + 1 );
>            memcpy( pRet, pStr1, ulLen1 + 1 );
>            for( ul = 0; ul < ulLen1; ul++ )
>               pRet[ ul ] ^= bChar;
>
>            hb_retclen_buffer( pRet, ulLen1 );
>         }
>         else
>            hb_itemReturn( pItem );
>
>         return;
>      }
>   }
>   hb_errRT_BASE_SubstR( EG_ARG, 3012, NULL, HB_ERR_FUNCNAME,
> HB_ERR_ARGS_BASEPARAMS );
> }
>
>
> It has syntax:
>   HB_STRXOR( cString, cKey ) --> cXoredString
> or
>   HB_STRXOR( cString, nByte ) --> cXoredString
>
> Some parameter error detection is done (I'm not sure that error subcode we
> should use, so, I've used 3012, just like in HB_STRTOHEX()). String is not
> reallocated if xor'ing to empty string or zero byte. Feel free to commit
> this code.
>
>
> Best regards,
>
> Mindaugas
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090119/ff851bec/attachment.html
From harbour.01 at syenar.hu  Mon Jan 19 14:35:41 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 19 14:37:43 2009
Subject: [Harbour] MT questions
In-Reply-To: <20090119185830.GA9722@34-mo7-2.acn.waw.pl>
References: <9257026e0901191036g6a43d265oed855b7a11ed34d9@mail.gmail.com>
	<20090119185830.GA9722@34-mo7-2.acn.waw.pl>
Message-ID: <18d502870901191135y72041af1x514814dab53651ec@mail.gmail.com>

+1 for handling them separately. (reasons: more coherent/expected
behaviour, quicker and more compact code, since inline initialization can
be used without
concerns. It's a light reasoning after doing a quick scan on my source and
spotting
quite some places where current behaviour is a potential problem.)

Brgds,
VIktor

On Mon, Jan 19, 2009 at 7:58 PM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:

> On Mon, 19 Jan 2009, Lorenzo Fiorini wrote:
>
> Hi Lorenzo,
>
> > For example I have a static array that keeps the menu prompts. At the
> > start the menus are correct since every "module" has its own own
> > prompts but if I choose an entry in one app I get that entry disabled
> > in another app or not disabled at all.
> > If I launch the same app with a parameter that start only one thread
> > at time it works as expected.
> > Surely I'm missing sth or I am misunderstood how the "thread static"
> works.
> > Any suggestion?
>
> Probably you are asking about the same thing as Pritpal was few weeks
> ago. Should we clone or simply copy thread static initial value.
> Now it's copied so the behavior is the same as for:
>
>   proc main()
>      local a:={}
>      ? len(a)
>      p(a)
>      ? len(a)
>   return
>   proc p(x)
>      aadd(x,0)
>   return
>
> Please note that p() changes the body of 'a' because 'a' and 'x'
> local variables shares the same array body.
> The same happens now for thread static variables initial value.
> Each thread has its own thread static variable but they share
> initialization data when it's complex item (hash or array) so
> when you modify them in one thread in other modifications are
> visible. If you want to eliminate this behavior you should
> initialize the variable from source code, f.e.:
>   if s_var == NIL
>      s_var := {}
>   endif
> anyhow it's still open the question about Harbour default behavior.
> I can change it and instead of copping initialization data to thread
> static variable I can clone it. In other words the original initialization
> value will be always kept in hidden HVM structures and cloned when each
> thread access it 1-st time. Such modification will effect only hashes
> and array values. All other types will be unchanged.
> Seems that you are the second person confused by current behavior and
> probably not the last one and this is important argument for me to
> think about changing it.
> What's the group opinion about it?
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090119/c027acd7/attachment.html
From zen25000 at zen.co.uk  Mon Jan 19 14:41:02 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Mon Jan 19 14:41:06 2009
Subject: [Harbour] Application Launch Problem
Message-ID: <4974D74E.60902@zen.co.uk>

Please help. I posted this to the Nabble forum but it seems not to have 
made it to the list.
I can not make any test xhgtk program run from a desktop launcher or a 
file manager SINCE updating Harbour and xhgtk from SVN in early January.
I have builds of tests (F.e. button.prg made during December which 
launch OK but if I re-build now they will ONLY from a terminal.
I think maybe something in SVN changed between December and January that 
has caused this?
The only error that I can see when attempting to launch outside a 
terminal is written to xsession-errors which is "TERM environment 
variable needs set." 
However the TERM env var seems OK.
~$ echo $TERM
xterm
I have tried two new O.S. installs on my machine (new partition) both 
Gnome and KDE but with no change.
I have put new test builds built on this machine (AMD 64 (32bit) with 
nvidia graphics) on another machine running the same O.S (Mandriva 
2009.0 KDE4 with older Intel video) and they launch OK.
I am lost.
I have a help request running in the Mandriva forum here which may give 
more background:-
http://forum.mandriva.com/viewtopic.php?p=623946#623946
Thanks in advance,
Barry
From jfl at mafact.com  Mon Jan 19 14:51:00 2009
From: jfl at mafact.com (J. Lefebvre)
Date: Mon Jan 19 14:51:32 2009
Subject: [Harbour] MT questions
Message-ID: <4fd7b7a1.1c97a6f.5120313.51a2@mafact.com>

Same for me. It seem more 'intuitive' for me that each thread really has it's own initial value, even when the value by itself is the same.
 
Is there or should we have some "static shared" where the pointer could be shared ?
 
Regard,
 
JF,
 
De : harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] De la part de Viktor Szak?ts
Envoy? : lundi 19 janvier 2009 20:36
? : Harbour Project Main Developer List.
Objet : Re: [Harbour] MT questions
 
+1 for handling them separately. (reasons: more coherent/expected behaviour, 
quicker and more compact code, since inline initialization can be used without 
concerns. It's a light reasoning after doing a quick scan on my source and spotting 
quite some places where current behaviour is a potential problem.)
 
Brgds,
VIktor
 
On Mon, Jan 19, 2009 at 7:58 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:
On Mon, 19 Jan 2009, Lorenzo Fiorini wrote:

Hi Lorenzo,

> For example I have a static array that keeps the menu prompts. At the
> start the menus are correct since every "module" has its own own
> prompts but if I choose an entry in one app I get that entry disabled
> in another app or not disabled at all.
> If I launch the same app with a parameter that start only one thread
> at time it works as expected.
> Surely I'm missing sth or I am misunderstood how the "thread static" works.
> Any suggestion?
Probably you are asking about the same thing as Pritpal was few weeks
ago. Should we clone or simply copy thread static initial value.
Now it's copied so the behavior is the same as for:

  proc main()
     local a:={}
     ? len(a)
     p(a)
     ? len(a)
  return
  proc p(x)
     aadd(x,0)
  return

Please note that p() changes the body of 'a' because 'a' and 'x'
local variables shares the same array body.
The same happens now for thread static variables initial value.
Each thread has its own thread static variable but they share
initialization data when it's complex item (hash or array) so
when you modify them in one thread in other modifications are
visible. If you want to eliminate this behavior you should
initialize the variable from source code, f.e.:
  if s_var == NIL
     s_var := {}
  endif
anyhow it's still open the question about Harbour default behavior.
I can change it and instead of copping initialization data to thread
static variable I can clone it. In other words the original initialization
value will be always kept in hidden HVM structures and cloned when each
thread access it 1-st time. Such modification will effect only hashes
and array values. All other types will be unchanged.
Seems that you are the second person confused by current behavior and
probably not the last one and this is important argument for me to
think about changing it.
What's the group opinion about it?

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090119/3a725142/attachment-0001.html
From druzus at acn.waw.pl  Mon Jan 19 15:35:19 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 19 15:31:27 2009
Subject: [Harbour] Application Launch Problem
In-Reply-To: <4974D74E.60902@zen.co.uk>
References: <4974D74E.60902@zen.co.uk>
Message-ID: <20090119203519.GA32525@34-mo7-2.acn.waw.pl>

On Mon, 19 Jan 2009, Barry Jackson wrote:

Hi Barry,

> Please help. I posted this to the Nabble forum but it seems not to have 
> made it to the list.
> I can not make any test xhgtk program run from a desktop launcher or a file 
> manager SINCE updating Harbour and xhgtk from SVN in early January.
> I have builds of tests (F.e. button.prg made during December which launch 
> OK but if I re-build now they will ONLY from a terminal.
> I think maybe something in SVN changed between December and January that 
> has caused this?

Nothing in Harbour code.
I guess that you simply begin to use GTSLN as your default GT driver
and the above is standard Slang behavior when application is executed
without psedoterminal.
Use default terminal driver. In Harbour *nix builds it's GTTRM now.
Just simply remove all you HB_GT_DEFAULT or HB_GT_LIB settings and
allow Harbour to chose the default one.
If you are creating pure GUI application and you do not plan to have
any console output then you can disable all GT drivers and use GTNUL.
If you are suing hb* scripts (see doc/howtobld.txt) then it's enough
to use -gtnul switch as hbmk or hblnk parameter.

Please also note that it's possible to setup pseudo terminal in special
mode which will freeze any application trying to write into it. See
-tostop parameter in man stty.
If you have such environment (not in this case because it would block
also all application using stderr output) and you application can write
sth to terminal device then using GTNUL is a must.
It's not the source of problem in this case but it should address some
of your future questions, f.e. during writing some daemons programs ;-)

> The only error that I can see when attempting to launch outside a terminal 
> is written to xsession-errors which is "TERM environment variable needs 
> set." However the TERM env var seems OK.
> ~$ echo $TERM
> xterm

This variable is set in your xterm session but probably it does not
exists when you execute your program without terminal emulator and
Slang needs it.

> I have tried two new O.S. installs on my machine (new partition) both Gnome 
> and KDE but with no change.
> I have put new test builds built on this machine (AMD 64 (32bit) with 
> nvidia graphics) on another machine running the same O.S (Mandriva 2009.0 
> KDE4 with older Intel video) and they launch OK.
> I am lost.
> I have a help request running in the Mandriva forum here which may give 
> more background:-
> http://forum.mandriva.com/viewtopic.php?p=623946#623946

Do not use GTSLN. It will be enough.
Just simply make a tests and run application linked by:
   hbmk -n -w -es2 -gttrm button.prg
or better rebuild Harbour without GTSLN as default terminal and then
simply use:
   hbmk -n -w -es2 button.prg

best regards,
Przemek
From druzus at acn.waw.pl  Mon Jan 19 15:38:56 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 19 15:35:05 2009
Subject: [Harbour] 2009-01-19 21:38 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090119203856.GA20219@34-mo7-2.acn.waw.pl>

2009-01-19 21:38 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbct/ctwin.c
  * harbour/contrib/hbct/ctwin.h
    + added support for nested window shadows

best regards
Przemek
From dbtopas at dbtopas.lt  Mon Jan 19 16:03:22 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Jan 19 16:03:17 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
In-Reply-To: <18d502870901191102o1c0e8435ua2240e688906a85@mail.gmail.com>
References: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>	<4972A16C.9040104@dbtopas.lt>	<18d502870901180101k4b2cfbfct732fd38863783cd1@mail.gmail.com>	<4973D596.9090404@dbtopas.lt>	<18d502870901190043w50aa0fd3l90a0799eb3f91bae@mail.gmail.com>	<4974A1C8.2060604@dbtopas.lt>
	<18d502870901191102o1c0e8435ua2240e688906a85@mail.gmail.com>
Message-ID: <4974EA9A.8020902@dbtopas.lt>

Hi,


> For some reason I still cannot make pass your generic .prg HMAC function 
> on the validation tests. Probably some stupid mistakes on my part.

No, on my one. I forgot one Hex->Bin conversion. It should be:

FUNC HB_HMAC(fHash, cMessage, cKey)
   IF LEN(cKey) > 64;   cKey := HB_HexToStr(EVAL(fHash, cKey))
   ENDIF
   cKey := PADR(cKey, 64, CHR(0))
RETURN EVAL(fHash, HB_STRXOR(cKey, 0x5C) + ;
                    HB_HexToStr(EVAL(fHash, HB_STRXOR(cKey, 0x36) + 
cMessage)))

Now
   ? HB_HMAC(@HB_MD5(), "<1896.697170952@postoffice.reston.mci.net>", 
"tanstaaftanstaaf")
prints "b913a602c7eda7a495b4e6e7334d3890" (this test data is used in 
http://www.isi.edu/in-notes/rfc2195.txt).


Regards,
Mindaugas


P.S. sometimes one more optional parameter would be really usefull 
HB_{MD5|SHA1|...}( cMessage [, lBinary ] ), to avoid two unnecessary 
Bin->Hex->Bin conversion in function like HB_HMAC:

FUNC HB_HMAC(fHash, cMessage, cKey, lBinary)
   IF LEN(cKey) > 64;   cKey := EVAL(fHash, cKey, .T.)
   ENDIF
   cKey := PADR(cKey, 64, CHR(0))
RETURN EVAL(fHash, HB_STRXOR(cKey, 0x5C) + ;
                    EVAL(fHash, HB_STRXOR(cKey, 0x36) + cMessage, .T.), 
lBinary)

In many cases (ex., communication protocol implementation) we need 
binary digest result, and hex format is used for human readable 
representation only.
From bedipritpal at hotmail.com  Mon Jan 19 16:04:59 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Jan 19 16:05:01 2009
Subject: [Harbour] MT questions
In-Reply-To: <20090119185830.GA9722@34-mo7-2.acn.waw.pl>
References: <9257026e0901191036g6a43d265oed855b7a11ed34d9@mail.gmail.com>
	<20090119185830.GA9722@34-mo7-2.acn.waw.pl>
Message-ID: <21551560.post@talk.nabble.com>


Przemek

<<<
+1 for handling them separately. (reasons: more coherent/expected behaviour, 
quicker and more compact code, since inline initialization can be used
without 
concerns. It's a light reasoning after doing a quick scan on my source and
spotting 
quite some places where current behaviour is a potential problem.)
>>>

I am still waiting it to happen.
I have converted all my applns to MT and have been 
struggling to change 'thread static' behavior which is very tedius.
I endorse Viktor's observation.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/MT-questions-tp21548901p21551560.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Mon Jan 19 16:17:11 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 19 16:13:19 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
In-Reply-To: <4974EA9A.8020902@dbtopas.lt>
References: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>
	<4972A16C.9040104@dbtopas.lt>
	<18d502870901180101k4b2cfbfct732fd38863783cd1@mail.gmail.com>
	<4973D596.9090404@dbtopas.lt>
	<18d502870901190043w50aa0fd3l90a0799eb3f91bae@mail.gmail.com>
	<4974A1C8.2060604@dbtopas.lt>
	<18d502870901191102o1c0e8435ua2240e688906a85@mail.gmail.com>
	<4974EA9A.8020902@dbtopas.lt>
Message-ID: <20090119211711.GA23105@34-mo7-2.acn.waw.pl>

On Mon, 19 Jan 2009, Mindaugas Kavaliauskas wrote:

Hi,

> P.S. sometimes one more optional parameter would be really usefull 
> HB_{MD5|SHA1|...}( cMessage [, lBinary ] ), to avoid two unnecessary 
> Bin->Hex->Bin conversion in function like HB_HMAC:
> FUNC HB_HMAC(fHash, cMessage, cKey, lBinary)
>   IF LEN(cKey) > 64;   cKey := EVAL(fHash, cKey, .T.)
>   ENDIF
>   cKey := PADR(cKey, 64, CHR(0))
> RETURN EVAL(fHash, HB_STRXOR(cKey, 0x5C) + ;
>                    EVAL(fHash, HB_STRXOR(cKey, 0x36) + cMessage, .T.), 
> lBinary)
> In many cases (ex., communication protocol implementation) we need binary 
> digest result, and hex format is used for human readable representation 
> only.

You are right. I'll add support for such parameter.
Maybe we should even return binary data by default.
What's group decision?

best regards,
Przemek
From druzus at acn.waw.pl  Mon Jan 19 16:18:04 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 19 16:14:12 2009
Subject: [Harbour] 2009-01-19 22:17 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090119211804.GA28364@34-mo7-2.acn.waw.pl>

2009-01-19 22:17 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/hvm.c
    * clone arrays and hash tables instead of coping when thread static
      variable is initialized

  + harbour/tests/mt/mttest12.prg
    + added demonstration/test code which illustrates thread static
      variables initialization

best regards
Przemek
From dbtopas at dbtopas.lt  Mon Jan 19 16:23:55 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Jan 19 16:23:48 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
In-Reply-To: <20090119211711.GA23105@34-mo7-2.acn.waw.pl>
References: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>	<4972A16C.9040104@dbtopas.lt>	<18d502870901180101k4b2cfbfct732fd38863783cd1@mail.gmail.com>	<4973D596.9090404@dbtopas.lt>	<18d502870901190043w50aa0fd3l90a0799eb3f91bae@mail.gmail.com>	<4974A1C8.2060604@dbtopas.lt>	<18d502870901191102o1c0e8435ua2240e688906a85@mail.gmail.com>	<4974EA9A.8020902@dbtopas.lt>
	<20090119211711.GA23105@34-mo7-2.acn.waw.pl>
Message-ID: <4974EF6B.7020406@dbtopas.lt>

Hi,

>> In many cases (ex., communication protocol implementation) we need binary 
>> digest result, and hex format is used for human readable representation 
>> only.
> 
> You are right. I'll add support for such parameter.
> Maybe we should even return binary data by default.
> What's group decision?

No, let's leave it default to hex format. Hackers will be clever enough 
to add .T., the other, ex., who just want to print md5 sum of a file, 
will be glad to do:
    ? hb_md5file("myfile.ext")

Leaving lBinary = .F. for default will also make this change backward 
compatible.

For example PHP uses also this convention:
    string md5( string str [, bool raw_output] )
raw_output is false by default.


Regards,
Mindaugas

From harbour.01 at syenar.hu  Mon Jan 19 16:31:27 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 19 16:32:55 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
In-Reply-To: <4974EF6B.7020406@dbtopas.lt>
References: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>
	<4972A16C.9040104@dbtopas.lt>
	<18d502870901180101k4b2cfbfct732fd38863783cd1@mail.gmail.com>
	<4973D596.9090404@dbtopas.lt>
	<18d502870901190043w50aa0fd3l90a0799eb3f91bae@mail.gmail.com>
	<4974A1C8.2060604@dbtopas.lt>
	<18d502870901191102o1c0e8435ua2240e688906a85@mail.gmail.com>
	<4974EA9A.8020902@dbtopas.lt>
	<20090119211711.GA23105@34-mo7-2.acn.waw.pl>
	<4974EF6B.7020406@dbtopas.lt>
Message-ID: <18d502870901191331k4d96589bv11b3e28b3cecb22c@mail.gmail.com>

hmmm, really strange. In this case I won't add any SHA2 functions to core in
this fashion. Rather I'll keep it in hbcrypt() in binary form.
Or, if group agrees, we break with the HB_MD5 "habit" and these
new ones will use binary data by default.

Am I living a different world, or is it true, that in the majority of cases
checksums are meant to be printed for _users_? I would think these
cryptic numbers are most of the time embedded in some streams,
and a machine is dealing with them. Except when it's travelling in
a text file (.xml, .ini, and oh well .sfv).

To me the latter seems by far the rarest, but again I may be wrong.
But even if so, it's just a function call to convert vice and versa.

Anyhow it'd be nice the know what led to the current MD5
implementation.

Brgds.
Viktor

On Mon, Jan 19, 2009 at 10:23 PM, Mindaugas Kavaliauskas <dbtopas@dbtopas.lt
> wrote:

> Hi,
>
>  In many cases (ex., communication protocol implementation) we need binary
>>> digest result, and hex format is used for human readable representation
>>> only.
>>>
>>
>> You are right. I'll add support for such parameter.
>> Maybe we should even return binary data by default.
>> What's group decision?
>>
>
> No, let's leave it default to hex format. Hackers will be clever enough to
> add .T., the other, ex., who just want to print md5 sum of a file, will be
> glad to do:
>   ? hb_md5file("myfile.ext")
>
> Leaving lBinary = .F. for default will also make this change backward
> compatible.
>
> For example PHP uses also this convention:
>   string md5( string str [, bool raw_output] )
> raw_output is false by default.
>
>
> Regards,
> Mindaugas
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090119/f5d468b5/attachment.html
From harbour.01 at syenar.hu  Mon Jan 19 16:25:15 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 19 16:33:29 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
In-Reply-To: <20090119211711.GA23105@34-mo7-2.acn.waw.pl>
References: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>
	<4972A16C.9040104@dbtopas.lt>
	<18d502870901180101k4b2cfbfct732fd38863783cd1@mail.gmail.com>
	<4973D596.9090404@dbtopas.lt>
	<18d502870901190043w50aa0fd3l90a0799eb3f91bae@mail.gmail.com>
	<4974A1C8.2060604@dbtopas.lt>
	<18d502870901191102o1c0e8435ua2240e688906a85@mail.gmail.com>
	<4974EA9A.8020902@dbtopas.lt>
	<20090119211711.GA23105@34-mo7-2.acn.waw.pl>
Message-ID: <18d502870901191325q217a0aa0had97d3f5f8b7533d@mail.gmail.com>

I wasn't aware that HB_MD5 is returning a hexa string.
In my personaly opinion, but it's probably too late to modify
that, such functions should return a binary stream of bytes,
and if user wants, it can be easily converted to hex using
hb_strtohex(). This way it's properly modular and there's
no redundancy.

So instead of having an 'lbinary' option, I think this should
always return binary and no option is necessary.

At least I've been following that road with HB_SHA* functions.

Brgds,
Viktor

On Mon, Jan 19, 2009 at 10:17 PM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:

> On Mon, 19 Jan 2009, Mindaugas Kavaliauskas wrote:
>
> Hi,
>
> > P.S. sometimes one more optional parameter would be really usefull
> > HB_{MD5|SHA1|...}( cMessage [, lBinary ] ), to avoid two unnecessary
> > Bin->Hex->Bin conversion in function like HB_HMAC:
> > FUNC HB_HMAC(fHash, cMessage, cKey, lBinary)
> >   IF LEN(cKey) > 64;   cKey := EVAL(fHash, cKey, .T.)
> >   ENDIF
> >   cKey := PADR(cKey, 64, CHR(0))
> > RETURN EVAL(fHash, HB_STRXOR(cKey, 0x5C) + ;
> >                    EVAL(fHash, HB_STRXOR(cKey, 0x36) + cMessage, .T.),
> > lBinary)
> > In many cases (ex., communication protocol implementation) we need binary
> > digest result, and hex format is used for human readable representation
> > only.
>
> You are right. I'll add support for such parameter.
> Maybe we should even return binary data by default.
> What's group decision?
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090119/6cf85d83/attachment-0001.html
From dbtopas at dbtopas.lt  Mon Jan 19 16:36:30 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Jan 19 16:36:24 2009
Subject: [Harbour] MT questions
In-Reply-To: <4fd7b7a1.1c97a6f.5120313.51a2@mafact.com>
References: <4fd7b7a1.1c97a6f.5120313.51a2@mafact.com>
Message-ID: <4974F25E.9060405@dbtopas.lt>

Hi,


> Same for me. It seem more ?intuitive? for me that each thread really has 
> it?s own initial value, even when the value by itself is the same.

I agree, and I prefer even more strict behaviour here. Thread statics 
should be initialized to NIL on thread startup. Because it's static of 
THAT PARTICULAR thread, and its' value is not related to value of parent 
thread statics. This also makes to leave cloning decision for 
programmer: he can clone, or do not clone, or create new objects, typed 
pointers, since cloning for them usually means nothing.

I see Przemek is already committed the change. We can leave it. The 
above opinion is more "theoretical", because I have we very few MT 
programming skills and I do not have a strong feeling on that should be 
default in cases like this.


Regards,
Mindaugas
From dbtopas at dbtopas.lt  Mon Jan 19 16:42:36 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Jan 19 16:42:29 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
In-Reply-To: <18d502870901191331k4d96589bv11b3e28b3cecb22c@mail.gmail.com>
References: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>	<4972A16C.9040104@dbtopas.lt>	<18d502870901180101k4b2cfbfct732fd38863783cd1@mail.gmail.com>	<4973D596.9090404@dbtopas.lt>	<18d502870901190043w50aa0fd3l90a0799eb3f91bae@mail.gmail.com>	<4974A1C8.2060604@dbtopas.lt>	<18d502870901191102o1c0e8435ua2240e688906a85@mail.gmail.com>	<4974EA9A.8020902@dbtopas.lt>	<20090119211711.GA23105@34-mo7-2.acn.waw.pl>	<4974EF6B.7020406@dbtopas.lt>
	<18d502870901191331k4d96589bv11b3e28b3cecb22c@mail.gmail.com>
Message-ID: <4974F3CC.3040903@dbtopas.lt>

Viktor Szak?ts wrote:
> hmmm, really strange. In this case I won't add any SHA2 functions 
> to core in this fashion. Rather I'll keep it in hbcrypt() in binary form.
> Or, if group agrees, we break with the HB_MD5 "habit" and these 
> new ones will use binary data by default.
> 
> Am I living a different world, or is it true, that in the majority of cases 
> checksums are meant to be printed for _users_? I would think these 
> cryptic numbers are most of the time embedded in some streams, 
> and a machine is dealing with them. Except when it's travelling in 
> a text file (.xml, .ini, and oh well .sfv).
> 
> To me the latter seems by far the rarest, but again I may be wrong. 
> But even if so, it's just a function call to convert vice and versa.
> 
> Anyhow it'd be nice the know what led to the current MD5 
> implementation.


Hi,


no problem for me. We can change it to binary (with or without lBinary) 
parameter. I can accept any implementation here, but we should use the 
same approach for all digest functions.


Best regards,
Mindaugas


P.S. I can always find an argument :) Python returns binary string:
   md5.new("Nobody inspects the spammish repetition").digest()

From harbour.01 at syenar.hu  Mon Jan 19 16:42:45 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 19 16:44:30 2009
Subject: [Harbour] MT questions
In-Reply-To: <4974F25E.9060405@dbtopas.lt>
References: <4fd7b7a1.1c97a6f.5120313.51a2@mafact.com>
	<4974F25E.9060405@dbtopas.lt>
Message-ID: <18d502870901191342x768669fbn121b3d31bcd1570@mail.gmail.com>

I agree with you.
So is it true, that I now _have to_ initialize everything with NIL
explicitly,
if I want them to be inited to a known value for all threads?

I was specifically avoiding this so far, because the NIL assignment
would just take some extra time one startup (not much, but keeping
startup time low is important, and this is just an extra cost for each
STATIC variable around the app).

Brgds,
Viktor

On Mon, Jan 19, 2009 at 10:36 PM, Mindaugas Kavaliauskas <dbtopas@dbtopas.lt
> wrote:

> Hi,
>
>
>  Same for me. It seem more 'intuitive' for me that each thread really has
>> it's own initial value, even when the value by itself is the same.
>>
>
> I agree, and I prefer even more strict behaviour here. Thread statics
> should be initialized to NIL on thread startup. Because it's static of THAT
> PARTICULAR thread, and its' value is not related to value of parent thread
> statics. This also makes to leave cloning decision for programmer: he can
> clone, or do not clone, or create new objects, typed pointers, since cloning
> for them usually means nothing.
>
> I see Przemek is already committed the change. We can leave it. The above
> opinion is more "theoretical", because I have we very few MT programming
> skills and I do not have a strong feeling on that should be default in cases
> like this.
>
>
> Regards,
> Mindaugas
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090119/b6740cea/attachment.html
From harbour.01 at syenar.hu  Mon Jan 19 16:49:34 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 19 16:51:34 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
In-Reply-To: <4974F3CC.3040903@dbtopas.lt>
References: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>
	<4973D596.9090404@dbtopas.lt>
	<18d502870901190043w50aa0fd3l90a0799eb3f91bae@mail.gmail.com>
	<4974A1C8.2060604@dbtopas.lt>
	<18d502870901191102o1c0e8435ua2240e688906a85@mail.gmail.com>
	<4974EA9A.8020902@dbtopas.lt>
	<20090119211711.GA23105@34-mo7-2.acn.waw.pl>
	<4974EF6B.7020406@dbtopas.lt>
	<18d502870901191331k4d96589bv11b3e28b3cecb22c@mail.gmail.com>
	<4974F3CC.3040903@dbtopas.lt>
Message-ID: <18d502870901191349l79e2a1bbjb8a3c875c8303252@mail.gmail.com>

Well, Python ranks much higher on my language respect list than PHP, so +1
:)
Brgds,
Viktor

On Mon, Jan 19, 2009 at 10:42 PM, Mindaugas Kavaliauskas <dbtopas@dbtopas.lt
> wrote:

> Viktor Szak?ts wrote:
>
>> hmmm, really strange. In this case I won't add any SHA2 functions to core
>> in this fashion. Rather I'll keep it in hbcrypt() in binary form.
>> Or, if group agrees, we break with the HB_MD5 "habit" and these new ones
>> will use binary data by default.
>>
>> Am I living a different world, or is it true, that in the majority of
>> cases checksums are meant to be printed for _users_? I would think these
>> cryptic numbers are most of the time embedded in some streams, and a machine
>> is dealing with them. Except when it's travelling in a text file (.xml,
>> .ini, and oh well .sfv).
>>
>> To me the latter seems by far the rarest, but again I may be wrong. But
>> even if so, it's just a function call to convert vice and versa.
>>
>> Anyhow it'd be nice the know what led to the current MD5 implementation.
>>
>
>
> Hi,
>
>
> no problem for me. We can change it to binary (with or without lBinary)
> parameter. I can accept any implementation here, but we should use the same
> approach for all digest functions.
>
>
> Best regards,
> Mindaugas
>
>
> P.S. I can always find an argument :) Python returns binary string:
>  md5.new("Nobody inspects the spammish repetition").digest()
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090119/13d520c8/attachment.html
From mbelgrano at deltain.it  Mon Jan 19 16:57:45 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Jan 19 16:57:49 2009
Subject: [Harbour] MT questions
In-Reply-To: <21551560.post@talk.nabble.com>
References: <9257026e0901191036g6a43d265oed855b7a11ed34d9@mail.gmail.com>
	<20090119185830.GA9722@34-mo7-2.acn.waw.pl>
	<21551560.post@talk.nabble.com>
Message-ID: <609353e70901191357n43dc696fs52648fd5458cefa9@mail.gmail.com>

+1

2009/1/19 Pritpal Bedi <bedipritpal@hotmail.com>

>
> Przemek
>
> I am still waiting it to happen.
> I have converted all my applns to MT and have been
> struggling to change 'thread static' behavior which is very tedius.
> I endorse Viktor's observation.
>
> Regards
> Pritpal Bedi
> --
> View this message in context:
> http://www.nabble.com/MT-questions-tp21548901p21551560.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090119/6a981ece/attachment.html
From info at fsgiudice.com  Mon Jan 19 17:40:49 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jan 19 17:41:00 2009
Subject: [Harbour] 2009-01-19 23:39 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
Message-ID: <49750171.3030908@fsgiudice.com>

2009-01-19 23:39 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   + harbour/contrib/examples/uhttpd
   + harbour/contrib/examples/socket.c
   + harbour/contrib/examples/uhttpd.prg
   + harbour/contrib/examples/hbmk_b32.bat
   + harbour/contrib/examples/readme.txt
   + harbour/contrib/examples/home
   + harbour/contrib/examples/home/cgi-bin
   + harbour/contrib/examples/home/counter.html
   + harbour/contrib/examples/home/css
   + harbour/contrib/examples/home/css/base.css
   + harbour/contrib/examples/home/favicon.ico
   + harbour/contrib/examples/home/images
   + harbour/contrib/examples/home/images/ajax-loader.gif
   + harbour/contrib/examples/home/index.html
   + harbour/contrib/examples/home/js
   + harbour/contrib/examples/home/js/ajax.js
   + harbour/contrib/examples/home/testajax.html
   + harbour/contrib/examples/home/testxmldb.html
   + harbour/contrib/examples/home/xsl
   + harbour/contrib/examples/home/xsl/based.xsl
   + harbour/contrib/examples/home/xsl/basep.xsl
   + harbour/contrib/examples/logs
   + harbour/contrib/examples/modules
   + harbour/contrib/examples/modules/bldhrb.bat
   + harbour/contrib/examples/modules/showcounter.prg
   + harbour/contrib/examples/modules/tableservletdb.prg
   + harbour/contrib/examples/modules/testajax.prg
     + Uploaded first version of uHTTPD server.
     ; NOTE:
       This is first version of uHTTPD (micro HTTPD server) based
       on a sample shared from Mindaugas (thanks!).
       Actually is only for windows and BCC32.
       To build use hbmk_b32.bat
       Please read readme.txt before start to use.


best regards

Francesco
From info at fsgiudice.com  Mon Jan 19 17:45:05 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jan 19 17:46:49 2009
Subject: [Harbour] 2009-01-19 23:43 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
Message-ID: <49750271.1070308@fsgiudice.com>

2009-01-19 23:43 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   * harbour/Changelog
     * fixed path of previous upload


sorry typo in changelog fixed

Best regards

Francesco
From info at fsgiudice.com  Mon Jan 19 17:46:16 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jan 19 17:47:29 2009
Subject: [Harbour] 2009-01-19 23:43 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
Message-ID: <497502B8.90005@fsgiudice.com>

2009-01-19 23:43 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   * harbour/Changelog
     * fixed path of previous upload


sorry typo in changelog fixed

Best regards

Francesco
From info at fsgiudice.com  Mon Jan 19 17:52:14 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jan 19 17:52:20 2009
Subject: [Harbour] Error in SVN automatic mail
Message-ID: <4975041E.7040600@fsgiudice.com>

Hi All,

I'm receiving this mail from sf.net:
What I have to do ?

Best regards,

Francesco
------------------------
Hi. This is the qmail-send program at fiberhosting.net.
I'm afraid I wasn't able to deliver your message to the following addresses.
This is a permanent error; I've given up. Sorry it didn't work out.

<svncommit@harbour-project.org>:
This address no longer accepts mail.

--- Below this line is a copy of the message.

Return-Path: <fsgiudice@users.sourceforge.net>
Received: (qmail 14847 invoked from network); 19 Jan 2009 17:40:10 -0500
Received-SPF: none (no valid SPF record)
Received: from ch3.sourceforge.net (HELO d5vjzd1.ch3.sourceforge.com) 
(216.34.181.60)
   by harbour-project.org with (DHE-RSA-AES256-SHA encrypted) SMTP; 19 
Jan 2009 17:40:09 -0500
Received: from apache by d5vjzd1.ch3.sourceforge.com with local (Exim 4.69)
	(envelope-from <fsgiudice@users.sourceforge.net>)

[snip]
From harbour.01 at syenar.hu  Mon Jan 19 18:03:40 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 19 18:03:47 2009
Subject: [Harbour] Error in SVN automatic mail
In-Reply-To: <4975041E.7040600@fsgiudice.com>
References: <4975041E.7040600@fsgiudice.com>
Message-ID: <18d502870901191503w241a1265sc3f8bc4a7f2e31bc@mail.gmail.com>

Hi Francesco,

Yes, the notification is already set up, but the mailbox is not yet
existing. We should wait for Phil to set it up,
so that we can test the redirection + notification.

Until this matter gets settled, commiters pls ignore this
error message.

Brgds,
Viktor

On Mon, Jan 19, 2009 at 11:52 PM, Francesco Saverio Giudice <
info@fsgiudice.com> wrote:

> Hi All,
>
> I'm receiving this mail from sf.net:
> What I have to do ?
>
> Best regards,
>
> Francesco
> ------------------------
> Hi. This is the qmail-send program at fiberhosting.net.
> I'm afraid I wasn't able to deliver your message to the following
> addresses.
> This is a permanent error; I've given up. Sorry it didn't work out.
>
> <svncommit@harbour-project.org>:
> This address no longer accepts mail.
>
> --- Below this line is a copy of the message.
>
> Return-Path: <fsgiudice@users.sourceforge.net>
> Received: (qmail 14847 invoked from network); 19 Jan 2009 17:40:10 -0500
> Received-SPF: none (no valid SPF record)
> Received: from ch3.sourceforge.net (HELO d5vjzd1.ch3.sourceforge.com)
> (216.34.181.60)
>  by harbour-project.org with (DHE-RSA-AES256-SHA encrypted) SMTP; 19 Jan
> 2009 17:40:09 -0500
> Received: from apache by d5vjzd1.ch3.sourceforge.com with local (Exim
> 4.69)
>        (envelope-from <fsgiudice@users.sourceforge.net>)
>
> [snip]
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090120/18bf5f1b/attachment.html
From info at fsgiudice.com  Mon Jan 19 18:20:01 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jan 19 18:20:07 2009
Subject: [Harbour] 2009-01-20 00:20 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
Message-ID: <49750AA1.7010806@fsgiudice.com>

2009-01-20 00:20 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   + harbour/contrib/examples/uhttpd/modules/info.prg
     + New sample showing server variables
   * harbour/contrib/examples/uhttpd/home/index.html
   * harbour/contrib/examples/uhttpd/readme.txt
   * harbour/contrib/examples/uhttpd/uhttpd.prg
     * updated for new sample


Best regards

Francesco
From zen25000 at zen.co.uk  Mon Jan 19 18:32:24 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Mon Jan 19 18:32:29 2009
Subject: [Harbour] Application Launch Problem
In-Reply-To: <20090119203519.GA32525@34-mo7-2.acn.waw.pl>
References: <4974D74E.60902@zen.co.uk>
	<20090119203519.GA32525@34-mo7-2.acn.waw.pl>
Message-ID: <49750D88.5090006@zen.co.uk>

Przemek
Thank you! 
>>I guess that you simply begin to use GTSLN as your default GT driver
Probably! - I was following the recommendation in the xhgtk README 
Quote:-
1. Environment configuration - General guidelines
---------------------------
	
	- Linux/Unix eg:

		export HB_PATH=/xharbour
		export HB_ARCHITECTURE=linux
		export HB_COMPILER=gcc		
                export HB_GT_LIB=gtsln               ******
		export HB_MULTI_GT=NO
		export HB_PREF=xhb
		export HB_BIN_INSTALL=$HB_PATH/bin
		export HB_LIB_INSTALL=$HB_PATH/lib
		export HB_INC_INSTALL=$HB_PATH/include
		export PATH=$HB_PATH/bin:$PATH
------------------------------------------------------
Maybe that should be updated?

If I change it to "export HB_GT_LIB=gttrm" and use mpkg_rpm_from_svn.sh to
re-build harbour rpms then I guess that will work?

Yes, "hbmk -n -w -es2 -gttrm -xhgtk button.prg" works fine and
so does my small application (with the warnings off) - I need to clean up my code! ;-) 

I have been using the Mandriva package manager to install the rpms.
>From time to time I then uninstall Harbour and xhgtk using the manager.
I check out the latest SVN and then run mpkg_rpm_from_svn.sh for Harbour and 
make_rpm.sh for xhgtk.
I then use the package manager to re-install all the packages.

Is that the best way for someone with very limited knowledge (me) to use SVN ?
Or would you suggest a different way?

Also is there any xhgtk documentation in English?

Thanks again for your help,
Barry
 




Przemyslaw Czerpak wrote:
> On Mon, 19 Jan 2009, Barry Jackson wrote:
>
> Hi Barry,
>
>   
>> Please help. I posted this to the Nabble forum but it seems not to have 
>> made it to the list.
>> I can not make any test xhgtk program run from a desktop launcher or a file 
>> manager SINCE updating Harbour and xhgtk from SVN in early January.
>> I have builds of tests (F.e. button.prg made during December which launch 
>> OK but if I re-build now they will ONLY from a terminal.
>> I think maybe something in SVN changed between December and January that 
>> has caused this?
>>     
>
> Nothing in Harbour code.
> I guess that you simply begin to use GTSLN as your default GT driver
> and the above is standard Slang behavior when application is executed
> without psedoterminal.
> Use default terminal driver. In Harbour *nix builds it's GTTRM now.
> Just simply remove all you HB_GT_DEFAULT or HB_GT_LIB settings and
> allow Harbour to chose the default one.
> If you are creating pure GUI application and you do not plan to have
> any console output then you can disable all GT drivers and use GTNUL.
> If you are suing hb* scripts (see doc/howtobld.txt) then it's enough
> to use -gtnul switch as hbmk or hblnk parameter.
>
> Please also note that it's possible to setup pseudo terminal in special
> mode which will freeze any application trying to write into it. See
> -tostop parameter in man stty.
> If you have such environment (not in this case because it would block
> also all application using stderr output) and you application can write
> sth to terminal device then using GTNUL is a must.
> It's not the source of problem in this case but it should address some
> of your future questions, f.e. during writing some daemons programs ;-)
>
>   
>> The only error that I can see when attempting to launch outside a terminal 
>> is written to xsession-errors which is "TERM environment variable needs 
>> set." However the TERM env var seems OK.
>> ~$ echo $TERM
>> xterm
>>     
>
> This variable is set in your xterm session but probably it does not
> exists when you execute your program without terminal emulator and
> Slang needs it.
>
>   
>> I have tried two new O.S. installs on my machine (new partition) both Gnome 
>> and KDE but with no change.
>> I have put new test builds built on this machine (AMD 64 (32bit) with 
>> nvidia graphics) on another machine running the same O.S (Mandriva 2009.0 
>> KDE4 with older Intel video) and they launch OK.
>> I am lost.
>> I have a help request running in the Mandriva forum here which may give 
>> more background:-
>> http://forum.mandriva.com/viewtopic.php?p=623946#623946
>>     
>
> Do not use GTSLN. It will be enough.
> Just simply make a tests and run application linked by:
>    hbmk -n -w -es2 -gttrm button.prg
> or better rebuild Harbour without GTSLN as default terminal and then
> simply use:
>    hbmk -n -w -es2 button.prg
>
> best regards,
> Przemek
>
>   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090119/1bb208f6/attachment.html
From druzus at acn.waw.pl  Mon Jan 19 18:42:15 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 19 18:38:23 2009
Subject: [Harbour] MT questions
In-Reply-To: <4974F25E.9060405@dbtopas.lt>
References: <4fd7b7a1.1c97a6f.5120313.51a2@mafact.com>
	<4974F25E.9060405@dbtopas.lt>
Message-ID: <20090119234215.GA24412@34-mo7-2.acn.waw.pl>

On Mon, 19 Jan 2009, Mindaugas Kavaliauskas wrote:

Hi,

>> Same for me. It seem more ?intuitive? for me that each thread really 
>> has it?s own initial value, even when the value by itself is the same.
> I agree, and I prefer even more strict behaviour here. Thread statics 
> should be initialized to NIL on thread startup. Because it's static of THAT 
> PARTICULAR thread, and its' value is not related to value of parent thread 
> statics. This also makes to leave cloning decision for programmer: he can 
> clone, or do not clone, or create new objects, typed pointers, since 
> cloning for them usually means nothing.
> I see Przemek is already committed the change. We can leave it. The above 
> opinion is more "theoretical", because I have we very few MT programming 
> skills and I do not have a strong feeling on that should be default in 
> cases like this.

To clarify because it's possible that people are confused by some
information.
The same initialization value is and always used in each thread and
it data declared by user in source code (.prg). It's not inherited
from parent thread and never was. The initialization to NIL is as
good as to 1, .t., 0d20090119, "text", {|| "CodeBlock" }, { "A"=>"qwe" }
or any other constant value.
Please run harbour/tests/mt/mttest12.prg to see it.
The modification I committed few hours ago changed only one thing:
complex values which are not cloned by simple assignment like, f.e.:
   a := {}
   b := a   // now 'a' and 'b' points to the same array
(hashes and arrays in current HVM code) now are cloned so it's not
possible to change original initialization value. For each thread
it's always the same as declared in source code.
But this is only to initialization code. If someone manually assign
the same array using := operator into thread static variable in
two different threads then it will not be cloned or anything like
that and both threads will share the same array body.

I hope that now it is more clear for every body.

best regards,
Przemek
From dbtopas at dbtopas.lt  Mon Jan 19 18:49:59 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Jan 19 18:49:56 2009
Subject: [Harbour] MT questions
In-Reply-To: <20090119234215.GA24412@34-mo7-2.acn.waw.pl>
References: <4fd7b7a1.1c97a6f.5120313.51a2@mafact.com>	<4974F25E.9060405@dbtopas.lt>
	<20090119234215.GA24412@34-mo7-2.acn.waw.pl>
Message-ID: <497511A7.9010701@dbtopas.lt>

Przemyslaw Czerpak wrote:
> I hope that now it is more clear for every body.

Yes. Thanks. Sorry, for writing before testing.

Regards,
Mindaugas
From harbour.01 at syenar.hu  Mon Jan 19 19:17:48 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 19 19:17:53 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
In-Reply-To: <4974EA9A.8020902@dbtopas.lt>
References: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>
	<4972A16C.9040104@dbtopas.lt>
	<18d502870901180101k4b2cfbfct732fd38863783cd1@mail.gmail.com>
	<4973D596.9090404@dbtopas.lt>
	<18d502870901190043w50aa0fd3l90a0799eb3f91bae@mail.gmail.com>
	<4974A1C8.2060604@dbtopas.lt>
	<18d502870901191102o1c0e8435ua2240e688906a85@mail.gmail.com>
	<4974EA9A.8020902@dbtopas.lt>
Message-ID: <18d502870901191617p79000611yc119625171aeeaa5@mail.gmail.com>

Hi Mindaugas,

Now it's better, but in order to make them give the right results with
SHA384 and SHA512, 64 has to be changed to 128. I'm
lost how to do this in a generic way.

Brgds,
Viktor

On Mon, Jan 19, 2009 at 10:03 PM, Mindaugas Kavaliauskas <dbtopas@dbtopas.lt
> wrote:

> Hi,
>
>
>  For some reason I still cannot make pass your generic .prg HMAC function
>> on the validation tests. Probably some stupid mistakes on my part.
>>
>
> No, on my one. I forgot one Hex->Bin conversion. It should be:
>
> FUNC HB_HMAC(fHash, cMessage, cKey)
>  IF LEN(cKey) > 64;   cKey := HB_HexToStr(EVAL(fHash, cKey))
>  ENDIF
>  cKey := PADR(cKey, 64, CHR(0))
> RETURN EVAL(fHash, HB_STRXOR(cKey, 0x5C) + ;
>                   HB_HexToStr(EVAL(fHash, HB_STRXOR(cKey, 0x36) +
> cMessage)))
>
> Now
>  ? HB_HMAC(@HB_MD5(), "<1896.697170952@postoffice.reston.mci.net>",
> "tanstaaftanstaaf")
> prints "b913a602c7eda7a495b4e6e7334d3890" (this test data is used in
> http://www.isi.edu/in-notes/rfc2195.txt).
>
>
> Regards,
> Mindaugas
>
>
> P.S. sometimes one more optional parameter would be really usefull
> HB_{MD5|SHA1|...}( cMessage [, lBinary ] ), to avoid two unnecessary
> Bin->Hex->Bin conversion in function like HB_HMAC:
>
> FUNC HB_HMAC(fHash, cMessage, cKey, lBinary)
>  IF LEN(cKey) > 64;   cKey := EVAL(fHash, cKey, .T.)
>  ENDIF
>  cKey := PADR(cKey, 64, CHR(0))
> RETURN EVAL(fHash, HB_STRXOR(cKey, 0x5C) + ;
>                   EVAL(fHash, HB_STRXOR(cKey, 0x36) + cMessage, .T.),
> lBinary)
>
> In many cases (ex., communication protocol implementation) we need binary
> digest result, and hex format is used for human readable representation
> only.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090120/32dd4c68/attachment-0001.html
From jfl at mafact.com  Mon Jan 19 20:07:00 2009
From: jfl at mafact.com (J. Lefebvre)
Date: Mon Jan 19 20:07:55 2009
Subject: [Harbour] MT questions
Message-ID: <8289ab31.1c97a9b.633a968.4a57@mafact.com>

Good job, 

Thanks,

JF,

-----Message d'origine-----
De?: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] De la part de Przemyslaw Czerpak
Envoy??: mardi 20 janvier 2009 0:42
??: Harbour Project Main Developer List.
Objet?: Re: [Harbour] MT questions

On Mon, 19 Jan 2009, Mindaugas Kavaliauskas wrote:

Hi,

....

I hope that now it is more clear for every body.

best regards,
Przemek

From dbtopas at dbtopas.lt  Mon Jan 19 20:21:15 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Jan 19 20:21:09 2009
Subject: [Harbour] Harbour SHA2 and SHA2-HMAC support
In-Reply-To: <18d502870901191617p79000611yc119625171aeeaa5@mail.gmail.com>
References: <18d502870901171426x4dd42c69oa70f85c58ffbdb02@mail.gmail.com>	<4972A16C.9040104@dbtopas.lt>	<18d502870901180101k4b2cfbfct732fd38863783cd1@mail.gmail.com>	<4973D596.9090404@dbtopas.lt>	<18d502870901190043w50aa0fd3l90a0799eb3f91bae@mail.gmail.com>	<4974A1C8.2060604@dbtopas.lt>	<18d502870901191102o1c0e8435ua2240e688906a85@mail.gmail.com>	<4974EA9A.8020902@dbtopas.lt>
	<18d502870901191617p79000611yc119625171aeeaa5@mail.gmail.com>
Message-ID: <4975270B.7040502@dbtopas.lt>

Viktor Szak?ts wrote:
> Now it's better, but in order to make them give the right results 
> with SHA384 and SHA512, 64 has to be changed to 128. I'm 
> lost how to do this in a generic way.

Hi,


why? 64 bytes (binary, not hex) is 512 bits. So, HMAC is OK up to 512 bits.

After reading some docs (rfc4868)
=================================
Well... Me also... The problem is that hash size is completely different 
thing than block size. It's possible to do:

   IF LEN(EVAL(fFunc, "", .F./*hex, not binary*/)) > 64
     IF LEN(cKey) > 128;  cKey := ...
     ENDIF
     cKey := PADR(..., 128)
   ELSE
     IF LEN(cKey) > 64;  cKey := ...
     ENDIF
     cKey := PADR(..., 64)
   ENDIF

But this solution is not very nice. It will not work for some hashing 
functions...  :(
We can not manage this without storing additional attributes (like block 
size) for hashing algorithms. It could implemented using some structures 
for cryptographic algorithms registration, but it is not a simple 
solution... Perhaps, we must go back to HB_HMAC_*(), or develop more 
complicated infrastructure. Does anyone have another ideas?


Regards,
Mindaugas

From marcosgambeta at uol.com.br  Mon Jan 19 20:54:12 2009
From: marcosgambeta at uol.com.br (Marcos Gambeta)
Date: Mon Jan 19 20:54:17 2009
Subject: [Harbour] Application Launch Problem
In-Reply-To: <49750D88.5090006@zen.co.uk>
References: <4974D74E.60902@zen.co.uk>	<20090119203519.GA32525@34-mo7-2.acn.waw.pl>
	<49750D88.5090006@zen.co.uk>
Message-ID: <49752EC4.7000209@uol.com.br>

Barry Jackson escreveu:
 >
 > Also is there any xhgtk documentation in English?
 >

Hi Barry,

The xhgtk documentation is a work in progress. You can use the Google 
translator to navigate the website in english:

http://translate.google.com.br/translate?u=http://xhgtk.sourceforge.net&sl=pt&tl=en&hl=pt-BR&ie=UTF-8

The xhgtk functions follow the same name and parameters of the gtk+ 
functions. You can use the gtk+ documentation to see how the functions work:

http://library.gnome.org/devel/gtk/stable/index.html

You can use the list below to send questions related to xhgtk 
development (Przemyslaw Czerpak is in the list too):

https://lists.sourceforge.net/lists/listinfo/xhgtk-developers


Regards,
Marcos Gambeta

From lorenzo.fiorini at gmail.com  Tue Jan 20 03:01:42 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Jan 20 03:01:46 2009
Subject: [Harbour] 2009-01-19 22:17 UTC+0100 Przemyslaw Czerpak 
	(druzus/at/priv.onet.pl)
In-Reply-To: <20090119211804.GA28364@34-mo7-2.acn.waw.pl>
References: <20090119211804.GA28364@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0901200001v17c3f4e3p424a043e6d001aed@mail.gmail.com>

On Mon, Jan 19, 2009 at 10:18 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> 2009-01-19 22:17 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/vm/hvm.c
>    * clone arrays and hash tables instead of coping when thread static
>      variable is initialized
>
>  + harbour/tests/mt/mttest12.prg
>    + added demonstration/test code which illustrates thread static
>      variables initialization

Many thanks it works perfectly.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Tue Jan 20 03:44:34 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Jan 20 03:44:38 2009
Subject: [Harbour] MT question #2
Message-ID: <9257026e0901200044g4aac8cfajfc795a60935920a2@mail.gmail.com>

Now the menus are ok but I have problems with the dbfs.
The apps ( now threads ) share many dbfs.
But if I run the 3 threads at the app start, lsof shows "common" dbfs
opened only 1 time.
Also it seems not a time related issue since I get the same result if
I put a wait behind every threadStart.

I've searched in the mailing list and in the ChangeLog and what I
found seems to state that workareas are local to threads.

Any idea?

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Tue Jan 20 05:04:38 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Jan 20 05:04:42 2009
Subject: [Harbour] Re: MT question #2
In-Reply-To: <9257026e0901200044g4aac8cfajfc795a60935920a2@mail.gmail.com>
References: <9257026e0901200044g4aac8cfajfc795a60935920a2@mail.gmail.com>
Message-ID: <9257026e0901200204v61b684dfudccf25c234d6800d@mail.gmail.com>

On Tue, Jan 20, 2009 at 9:44 AM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com> wrote:

> Now the menus are ok but I have problems with the dbfs.
> ...
> I've searched in the mailing list and in the ChangeLog and what I
> found seems to state that workareas are local to threads.

I've tried a small test and it works as expected so it must be sth more complex.
When I open the dbfs I also create some temporary dbfs.
I use a simple if file() to check if there is already a temp file with
that name and if yes I change the file name by a char.
Could it be that check if not atomic enough and that two threads use
the same temporary dbf?

I could protect the dbfopen with a mutex. Is it safe to create a
static hash that holds the mutexes in the main thread and access it
using a function?

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Tue Jan 20 05:38:45 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Jan 20 05:38:49 2009
Subject: [Harbour] Re: MT question #2
In-Reply-To: <9257026e0901200204v61b684dfudccf25c234d6800d@mail.gmail.com>
References: <9257026e0901200044g4aac8cfajfc795a60935920a2@mail.gmail.com>
	<9257026e0901200204v61b684dfudccf25c234d6800d@mail.gmail.com>
Message-ID: <9257026e0901200238m6bdee5bbwa62a6ad086529902@mail.gmail.com>

On Tue, Jan 20, 2009 at 11:04 AM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com> wrote:

> I could protect the dbfopen with a mutex. Is it safe to create a
> static hash that holds the mutexes in the main thread and access it
> using a function?

Sorry if I continue to reply to myself but with a mutex like:

in the main thread
...
   hSMutex[ "dbxopen" ] := hb_MutexCreate()
...
function getappmutex()
   return hSMutex
...

in the "child" threads:

   hb_MutexLock( GETAPPMUTEX()[ "dbxopen" ] )
...
   hb_MutexUnLock( GETAPPMUTEX()[ "dbxopen" ] )
...

it seems to work as expected.

best regards,
Lorenzo
From mbelgrano at deltain.it  Tue Jan 20 05:48:31 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jan 20 05:48:34 2009
Subject: [Harbour] Application Launch Problem
In-Reply-To: <49752EC4.7000209@uol.com.br>
References: <4974D74E.60902@zen.co.uk>
	<20090119203519.GA32525@34-mo7-2.acn.waw.pl>
	<49750D88.5090006@zen.co.uk> <49752EC4.7000209@uol.com.br>
Message-ID: <609353e70901200248k3e168920uc640bb632f004f96@mail.gmail.com>

Intresting

2009/1/20 Marcos Gambeta <marcosgambeta@uol.com.br>

> Barry Jackson escreveu:
> >
> > Also is there any xhgtk documentation in English?
> >
>
> Hi Barry,
>
> The xhgtk documentation is a work in progress. You can use the Google
> translator to navigate the website in english:
>
>
> http://translate.google.com.br/translate?u=http://xhgtk.sourceforge.net&sl=pt&tl=en&hl=pt-BR&ie=UTF-8
>
> The xhgtk functions follow the same name and parameters of the gtk+
> functions. You can use the gtk+ documentation to see how the functions work:
>
> http://library.gnome.org/devel/gtk/stable/index.html
>
> You can use the list below to send questions related to xhgtk development
> (Przemyslaw Czerpak is in the list too):
>
> https://lists.sourceforge.net/lists/listinfo/xhgtk-developers
>
>
> Regards,
> Marcos Gambeta
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090120/961c1064/attachment.html
From druzus at acn.waw.pl  Tue Jan 20 06:34:22 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jan 20 06:30:29 2009
Subject: [Harbour] MT question #2
In-Reply-To: <9257026e0901200044g4aac8cfajfc795a60935920a2@mail.gmail.com>
References: <9257026e0901200044g4aac8cfajfc795a60935920a2@mail.gmail.com>
Message-ID: <20090120113422.GA18542@34-mo7-2.acn.waw.pl>

On Tue, 20 Jan 2009, Lorenzo Fiorini wrote:

Hi,

> Now the menus are ok but I have problems with the dbfs.
> The apps ( now threads ) share many dbfs.
> But if I run the 3 threads at the app start, lsof shows "common" dbfs
> opened only 1 time.

Yes it is. The file handles are shared. We have also common lock pool
for synchronization between threads and aliased workareas (they also
reuse existing handles). It's necessary due to POSIX lock semantic and
it also improve the speed by reducing number of system calls (open()/close()
cost is minor but eliminated lseek() is really miserable)

> Also it seems not a time related issue since I get the same result if
> I put a wait behind every threadStart.

There is nothing wrong with above. It's expected and intentionally
implemented. All is correct.

> I've searched in the mailing list and in the ChangeLog and what I
> found seems to state that workareas are local to threads.

Workareas are local to thread but they share file handles to reduce
allocated resources and give working locking between threads.
In the future we probably also introduce common caches.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Jan 20 06:39:46 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jan 20 06:35:54 2009
Subject: [Harbour] Re: MT question #2
In-Reply-To: <9257026e0901200204v61b684dfudccf25c234d6800d@mail.gmail.com>
References: <9257026e0901200044g4aac8cfajfc795a60935920a2@mail.gmail.com>
	<9257026e0901200204v61b684dfudccf25c234d6800d@mail.gmail.com>
Message-ID: <20090120113946.GB18542@34-mo7-2.acn.waw.pl>

On Tue, 20 Jan 2009, Lorenzo Fiorini wrote:

Hi,

> I've tried a small test and it works as expected so it must be sth more complex.
> When I open the dbfs I also create some temporary dbfs.
> I use a simple if file() to check if there is already a temp file with
> that name and if yes I change the file name by a char.
> Could it be that check if not atomic enough and that two threads use
> the same temporary dbf?

Harbour recognize that the same file is reopen using it's inode not
name so even if you create hard or soft links to given file then
it will be detected that the same file is open and existing open handle
reused in new workarea.

> I could protect the dbfopen with a mutex. Is it safe to create a
> static hash that holds the mutexes in the main thread and access it
> using a function?

Yes you can. You can keep it in public variable or return by function
like in your second mail (slower version). Readonly access to complex
variables is guarantied by HVM. It's only important that you will not
modify this hash array inserting new items or deleting some existing
ones when other threads are executed.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Tue Jan 20 06:48:53 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Jan 20 06:51:22 2009
Subject: [Harbour] Re: MT question #2
In-Reply-To: <20090120113946.GB18542@34-mo7-2.acn.waw.pl>
References: <9257026e0901200044g4aac8cfajfc795a60935920a2@mail.gmail.com>
	<9257026e0901200204v61b684dfudccf25c234d6800d@mail.gmail.com>
	<20090120113946.GB18542@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0901200348w3b3045aej66171311ab3d92a6@mail.gmail.com>

On Tue, Jan 20, 2009 at 12:39 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> Harbour recognize that the same file is reopen using it's inode not
> name so even if you create hard or soft links to given file then
> it will be detected that the same file is open and existing open handle
> reused in new workarea.

Many thanks, now it's clear.

I'm getting some errors with temporary files used to sort or index (
though in a stress test ).
What's the best way to get a unique temporay file in the same dir that
work in *nix, osx and win that work in a mt app?

best regards,
Lorenzo
From druzus at acn.waw.pl  Tue Jan 20 07:20:17 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jan 20 07:16:23 2009
Subject: [Harbour] Re: MT question #2
In-Reply-To: <9257026e0901200348w3b3045aej66171311ab3d92a6@mail.gmail.com>
References: <9257026e0901200044g4aac8cfajfc795a60935920a2@mail.gmail.com>
	<9257026e0901200204v61b684dfudccf25c234d6800d@mail.gmail.com>
	<20090120113946.GB18542@34-mo7-2.acn.waw.pl>
	<9257026e0901200348w3b3045aej66171311ab3d92a6@mail.gmail.com>
Message-ID: <20090120122017.GA12050@34-mo7-2.acn.waw.pl>

On Tue, 20 Jan 2009, Lorenzo Fiorini wrote:
> I'm getting some errors with temporary files used to sort or index (
> though in a stress test ).

Probably you generated non unique file names for them.
You will have to change your code.

> What's the best way to get a unique temporay file in the same dir that
> work in *nix, osx and win that work in a mt app?

For indexes simply use TEMPORARY clause, f.e.:
   INDEX ON ... TEMPORARY
Such indexes will be created in temporary files or in memory if RDD
decides it's better and on close any temporary files will be removed.
They are always accessed in exclusive mode even if workarea is shared
what also improve the speed.
We do not have support for TEMPORARY tables yet so here you will
have to generate unique file name. The procedure which makes it
should always create empty physical file otherwise you will have
race condition between generating unique name with checking if it
does not exist and creating the table.
In theory we can use hb_FTempCreate() but because it does not
allow to control file name extensions then it may be a little bit
problematic so I suggest to create own function and use FO_EXCL flag
with HB_FCREATE(), f.e. sth like:

   function MK_TMPFILE( cDir )
      local hFile, cName, nTry := 0
      while ++nTry < 10000
         cName := cDir + [...] + ".tmp" // gen unique file name with extension
         hFile := hb_FCreate( cName,, FO_EXCLUSIVE + FO_EXCL )
         if hFile != -1
            FClose( hFile )
            return cName
         endif
      enddo
      return nil

It's not 100% safe method because FO_EXCL flag cannot be supported without
race condition on remote systems (f.e. NFS mounted volumes) but for such
usage like in your case it's enough.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Jan 20 06:54:34 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Jan 20 07:17:09 2009
Subject: [Harbour] Re: MT question #2
In-Reply-To: <9257026e0901200348w3b3045aej66171311ab3d92a6@mail.gmail.com>
References: <9257026e0901200044g4aac8cfajfc795a60935920a2@mail.gmail.com>
	<9257026e0901200204v61b684dfudccf25c234d6800d@mail.gmail.com>
	<20090120113946.GB18542@34-mo7-2.acn.waw.pl>
	<9257026e0901200348w3b3045aej66171311ab3d92a6@mail.gmail.com>
Message-ID: <18d502870901200354sc33c9ben9a38efaca895090d@mail.gmail.com>

Hi Lorenzo,
Did you try hb_FTempCreate()?

hb_FTempCreate( cDir, cPrefix, FC_NORMAL, @cFileName ) ) -> fhnd

Brgds,
Viktor

On Tue, Jan 20, 2009 at 12:48 PM, Lorenzo Fiorini <lorenzo.fiorini@gmail.com
> wrote:

> On Tue, Jan 20, 2009 at 12:39 PM, Przemyslaw Czerpak <druzus@acn.waw.pl>
> wrote:
>
> > Harbour recognize that the same file is reopen using it's inode not
> > name so even if you create hard or soft links to given file then
> > it will be detected that the same file is open and existing open handle
> > reused in new workarea.
>
> Many thanks, now it's clear.
>
> I'm getting some errors with temporary files used to sort or index (
> though in a stress test ).
> What's the best way to get a unique temporay file in the same dir that
> work in *nix, osx and win that work in a mt app?
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090120/6d2fb375/attachment.html
From zen25000 at zen.co.uk  Tue Jan 20 07:17:09 2009
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Tue Jan 20 07:17:15 2009
Subject: [Harbour] Application Launch Problem
In-Reply-To: <49752EC4.7000209@uol.com.br>
References: <4974D74E.60902@zen.co.uk>	<20090119203519.GA32525@34-mo7-2.acn.waw.pl>
	<49750D88.5090006@zen.co.uk> <49752EC4.7000209@uol.com.br>
Message-ID: <4975C0C5.4060808@zen.co.uk>

Thanks Marcos,
That's just what I needed.
Cheers,
Barry

Marcos Gambeta wrote:
> Barry Jackson escreveu:
> >
> > Also is there any xhgtk documentation in English?
> >
>
> Hi Barry,
>
> The xhgtk documentation is a work in progress. You can use the Google 
> translator to navigate the website in english:
>
> http://translate.google.com.br/translate?u=http://xhgtk.sourceforge.net&sl=pt&tl=en&hl=pt-BR&ie=UTF-8 
>
>
> The xhgtk functions follow the same name and parameters of the gtk+ 
> functions. You can use the gtk+ documentation to see how the functions 
> work:
>
> http://library.gnome.org/devel/gtk/stable/index.html
>
> You can use the list below to send questions related to xhgtk 
> development (Przemyslaw Czerpak is in the list too):
>
> https://lists.sourceforge.net/lists/listinfo/xhgtk-developers
>
>
> Regards,
> Marcos Gambeta
>
>
From lorenzo.fiorini at gmail.com  Tue Jan 20 10:30:18 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Jan 20 10:30:25 2009
Subject: [Harbour] Re: MT question #2
In-Reply-To: <18d502870901200354sc33c9ben9a38efaca895090d@mail.gmail.com>
References: <9257026e0901200044g4aac8cfajfc795a60935920a2@mail.gmail.com>
	<9257026e0901200204v61b684dfudccf25c234d6800d@mail.gmail.com>
	<20090120113946.GB18542@34-mo7-2.acn.waw.pl>
	<9257026e0901200348w3b3045aej66171311ab3d92a6@mail.gmail.com>
	<18d502870901200354sc33c9ben9a38efaca895090d@mail.gmail.com>
Message-ID: <9257026e0901200730n673e1858l9ea0296b10bf3731@mail.gmail.com>

On Tue, Jan 20, 2009 at 12:54 PM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:

> Did you try hb_FTempCreate()?
> hb_FTempCreate( cDir, cPrefix, FC_NORMAL, @cFileName ) ) -> fhnd

Thanks, I'll try it.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Tue Jan 20 10:28:12 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Jan 20 10:31:14 2009
Subject: [Harbour] Re: MT question #2
In-Reply-To: <20090120122017.GA12050@34-mo7-2.acn.waw.pl>
References: <9257026e0901200044g4aac8cfajfc795a60935920a2@mail.gmail.com>
	<9257026e0901200204v61b684dfudccf25c234d6800d@mail.gmail.com>
	<20090120113946.GB18542@34-mo7-2.acn.waw.pl>
	<9257026e0901200348w3b3045aej66171311ab3d92a6@mail.gmail.com>
	<20090120122017.GA12050@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0901200728u70af8539l1e46ef3ba8a74e6c@mail.gmail.com>

On Tue, Jan 20, 2009 at 1:20 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> Probably you generated non unique file names for them.
> You will have to change your code.

Thanks, I've changed it and know it seems to work better.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Tue Jan 20 11:32:43 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Jan 20 11:36:58 2009
Subject: [Harbour] 2009-01-20 17:29 UTC+0100 Viktor Szakats
Message-ID: <18d502870901200832g12ecc941i420341916c034098@mail.gmail.com>

2009-01-20 17:29 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbhpdf/harupdf.c
    ! HPDF_SETINFODATEATTR() fixed taking date/time from the wrong
      parameter.
    ! HPDF_SETINFODATEATTR() fixed to initialize the date structure
      passed to libharu.

    ; NOTE: I've changed my editor config to automatically clean line
            ending spaces. This may cause larger diffs even for
            small modifications until all these spaces are cleaned
            from the sources. FYI.
--
Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090120/b5d0bc11/attachment.html
From lorenzo.fiorini at gmail.com  Tue Jan 20 12:51:40 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Jan 20 12:53:24 2009
Subject: [Harbour] Harbour MT success report
Message-ID: <9257026e0901200951u16f3a91l96ff246ab71fd890@mail.gmail.com>

Thanks to Harbour team I have been able to merge 8 separate apps into
a single binary that run the "apps" as threads.
I started the entire process yesterday morning and after few hours (
and few emails to the list ) I got it working. Note also that much of
the time was spent to change "clashing" function names and to change
file wide statics to thread statics.

What I found really magic is that every thread can have his own GT and
even a different GUI.
In the test the main thread is a xhgtk app that creates a trayicon
with a popup menu that launch "the original" gtxwc apps ( sth like
OpenOffice's QuickStart under Win ).

Many thanks again to all.

Now I'm investigating the possibility to call xhgtk code inside GTXWC threads.
For example it would be nice to use the gtk text editor instead of
memoedit or gtk file chooser to open or save a file. They would give a
"modern" look to the apps without much rewriting. Any suggestion is
welcome.

best regards,
Lorenzo
From mbelgrano at deltain.it  Tue Jan 20 12:59:40 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jan 20 12:59:44 2009
Subject: [Harbour] Harbour MT success report
In-Reply-To: <9257026e0901200951u16f3a91l96ff246ab71fd890@mail.gmail.com>
References: <9257026e0901200951u16f3a91l96ff246ab71fd890@mail.gmail.com>
Message-ID: <609353e70901200959s1c3e25f3u38a0521f36e0f381@mail.gmail.com>

Can yuo post sample extracted from your experience
It will be a very intersing for a lot of user

2009/1/20 Lorenzo Fiorini <lorenzo.fiorini@gmail.com>

> Thanks to Harbour team I have been able to merge 8 separate apps into
> a single binary that run the "apps" as threads.
> I started the entire process yesterday morning and after few hours (
> and few emails to the list ) I got it working. Note also that much of
> the time was spent to change "clashing" function names and to change
> file wide statics to thread statics.
>
> What I found really magic is that every thread can have his own GT and
> even a different GUI.
> In the test the main thread is a xhgtk app that creates a trayicon
> with a popup menu that launch "the original" gtxwc apps ( sth like
> OpenOffice's QuickStart under Win ).
>
> Many thanks again to all.
>
> Now I'm investigating the possibility to call xhgtk code inside GTXWC
> threads.
> For example it would be nice to use the gtk text editor instead of
> memoedit or gtk file chooser to open or save a file. They would give a
> "modern" look to the apps without much rewriting. Any suggestion is
> welcome.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090120/40228ee9/attachment.html
From lorenzo.fiorini at gmail.com  Tue Jan 20 13:33:30 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Jan 20 13:33:35 2009
Subject: [Harbour] Harbour MT success report
In-Reply-To: <609353e70901200959s1c3e25f3u38a0521f36e0f381@mail.gmail.com>
References: <9257026e0901200951u16f3a91l96ff246ab71fd890@mail.gmail.com>
	<609353e70901200959s1c3e25f3u38a0521f36e0f381@mail.gmail.com>
Message-ID: <9257026e0901201033n62b9c25bj7fa56008ab6becb7@mail.gmail.com>

On Tue, Jan 20, 2009 at 6:59 PM, Massimo Belgrano <mbelgrano@deltain.it> wrote:

> Can yuo post sample extracted from your experience

Massimo, there is nothing special in my code, what's is great is
Harbour and the team of developers that made so easy to move to MT.
I've started with test/mt examples, read the ChangeLog and search in the list.
I have to admit that sometimes is not easy to find what you search.
For example I recall Priptal's issue only when Przemyslaw mentioned it
and I've just found that like today I asked about temporary files time
ago.
The problem is that the terms used in computer programming are always
the same so generic queries are useless and if you know exactly what
you're looking for you already know the answer :)

P.S. could you kindly remove your email signature when you send to the list?
As you see nobody here uses it.
Massimo is well enough.

best regards,
Lorenzo
From mbelgrano at deltain.it  Tue Jan 20 14:27:35 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jan 20 14:27:40 2009
Subject: [Harbour] Harbour Web Site - English & Portuguese version
In-Reply-To: <531d7a750812111206q4c63ef5lac1401af490eb30@mail.gmail.com>
References: <531d7a750812111206q4c63ef5lac1401af490eb30@mail.gmail.com>
Message-ID: <609353e70901201127j5a7bfc12j3a8a1db59b46c71a@mail.gmail.com>

Wich news regarding the site for the project?


2008/12/11 Vailton Renato <vailtom@gmail.com>

> Hi all!
>
> I concluded much of the development of the site for the project and
> would like to present the results.
>
> Project site in English:
> http://www.harbour-project.org/preview2/index.html
>
> Project site in Portuguese of Brazil (updated mirror):
> http://www.harbour-project.com.br/
>
> If I forgot to include someone in the Crew List please let me know.
> Opportunity to list the details that feel incomplete:
>
> * Documentation> Harbor documentation Index
>   Requires adjustments in the layout of the page.
>
> * Documentation> Tutorials
>   Need texts to fill the page. I have personal difficulties in
> assembling something in English to this page, but in the longer
> version in Portuguese I can contribute more.
>
> * Downloads> Helping tools
>  If you approve the idea, I think here would be the ideal place to
> put a list of tools for download as auxiliary Bison, GCC, FLEX,
> TortoiseSVN, and so on.
>
> Outside this, the site as a whole needs to be reviewed in search of
> errors. I look forward criticisms and suggestions ...
> Vailton Renato
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090120/88b6b63c/attachment.html
From harbour.01 at syenar.hu  Tue Jan 20 14:56:33 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Jan 20 14:56:40 2009
Subject: [Harbour] 2009-01-20 20:47 UTC+0100 Viktor Szakats
Message-ID: <18d502870901201156t3c13bec6ld763876ad384990f@mail.gmail.com>

2009-01-20 20:47 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
  * contrib/make_b32_all.bat
  * contrib/make_gcc_all.sh
  * contrib/make_vc_all.bat
  * contrib/Makefile
  + contrib/hbcrypt
  + contrib/hbcrypt/Makefile
  + contrib/hbcrypt/make_b32.bat
  + contrib/hbcrypt/make_vc.bat
  + contrib/hbcrypt/make_gcc.sh
  + contrib/hbcrypt/common.mak
  + contrib/hbcrypt/hbsha2.c
  + contrib/hbcrypt/hbsha2hm.c
  + contrib/hbcrypt/sha1.h
  + contrib/hbcrypt/sha1.c
  + contrib/hbcrypt/sha2.h
  + contrib/hbcrypt/sha2.c
  + contrib/hbcrypt/sha1hmac.h
  + contrib/hbcrypt/sha1hmac.c
  + contrib/hbcrypt/sha2hmac.h
  + contrib/hbcrypt/sha2hmac.c
  + contrib/hbcrypt/tests
  + contrib/hbcrypt/tests/testsha2.prg
  + contrib/hbcrypt/tests/hbmk_b32.bat
  + contrib/hbcrypt/tests/hbmk_vc.bat
    + Added hbcrypt library. Included .prg level functions:
      - HB_SHA224( <cMessage> ) -> <cDigest>
      - HB_SHA256( <cMessage> ) -> <cDigest>
      - HB_SHA384( <cMessage> ) -> <cDigest>
      - HB_SHA512( <cMessage> ) -> <cDigest>
      - HB_HMAC_SHA224( <cMessage>, <cKey> ) -> <cMAC>
      - HB_HMAC_SHA256( <cMessage>, <cKey> ) -> <cMAC>
      - HB_HMAC_SHA384( <cMessage>, <cKey> ) -> <cMAC>
      - HB_HMAC_SHA512( <cMessage>, <cKey> ) -> <cMAC>
    ; TODO: Add C level wrappers in Harbour namespace.
    ; TODO: Add .prg level wrappers for SHA1 functions + tests.
    ; TODO: Convert HB_MD5() work on binary data, rather than
            doing hexadecimal conversion accessible using
            standard Harbour functions anyway.
    ; TODO: Add other crypt functions (AES, ...).
    ; NOTE: I plan to move these functions to core, after they've
            matured here.
--
Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090120/0a285b44/attachment.html
From vailtom at gmail.com  Tue Jan 20 16:08:28 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Tue Jan 20 16:08:35 2009
Subject: [Harbour] Harbour Web Site - English & Portuguese version
In-Reply-To: <609353e70901141104l34dbdeb9t453d28312597efb4@mail.gmail.com>
References: <531d7a750812111206q4c63ef5lac1401af490eb30@mail.gmail.com>
	<609353e70901141104l34dbdeb9t453d28312597efb4@mail.gmail.com>
Message-ID: <531d7a750901201308r4da94e94leced030f735025fe@mail.gmail.com>

After a few days away for health care and personal matters and many
details I'm back to finish the CONTRIB page and post again updates for
revisions and comments.

2009/1/14 Massimo Belgrano <mbelgrano@deltain.it>:
> Wich situation for upcoming harbour website?
> Anybody have news?
>
> 2008/12/11 Vailton Renato <vailtom@gmail.com>
>>
>> Hi all!
>>
>> I concluded much of the development of the site for the project and
>> would like to present the results.
>>
>> Project site in English:
>> http://www.harbour-project.org/preview2/index.html
>>
>> Project site in Portuguese of Brazil (updated mirror):
>> http://www.harbour-project.com.br/
>>
>> If I forgot to include someone in the Crew List please let me know.
>> Opportunity to list the details that feel incomplete:
>>
>> * Documentation> Harbor documentation Index
>>   Requires adjustments in the layout of the page.
>>
>> * Documentation> Tutorials
>>   Need texts to fill the page. I have personal difficulties in
>> assembling something in English to this page, but in the longer
>> version in Portuguese I can contribute more.
>>
>> * Downloads> Helping tools
>>  If you approve the idea, I think here would be the ideal place to
>> put a list of tools for download as auxiliary Bison, GCC, FLEX,
>> TortoiseSVN, and so on.
>>
>> Outside this, the site as a whole needs to be reviewed in search of
>> errors. I look forward criticisms and suggestions ...
>> Vailton Renato
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
>
> --
> Massimo Belgrano
>
> Albo Nazionale Informatici Professionisti 2620
> Socio 2843 Associazione Informatici prof.
>
> Analisi e sviluppo software per Lan e Web
> Consulenza informatica - Formazione
> Delta Informatica S.r.l.  http://www.deltain.it
> Via Torelli,31 - 28100 Novara - Tel: 0321/30281
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>



-- 
Vailton Renato
SQL LIB, MyMake & xDev Developer
From info at fsgiudice.com  Tue Jan 20 16:32:44 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Jan 20 16:32:54 2009
Subject: [Harbour] 2009-01-20 20:47 UTC+0100 Viktor Szakats
In-Reply-To: <18d502870901201156t3c13bec6ld763876ad384990f@mail.gmail.com>
References: <18d502870901201156t3c13bec6ld763876ad384990f@mail.gmail.com>
Message-ID: <497642FC.6050805@fsgiudice.com>

Hi Viktor,

Il 20/01/2009 20.56, Viktor Szak?ts ha scritto:
> 2009-01-20 20:47 UTC+0100 Viktor Szakats (harbour.01 syenar hu)

with BCC55 hbcrypt won't build
-----------------------------------------
MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
	bcc32.exe -c -q -d -Q -w -w-sig- -4 -O2 -OS -Ov -Oi -Oc -I..\..\include 
-DHB_FM_STATISTICS_OFF   -oobj\b32\hbsha2.obj .\hbsha2.c
.\hbsha2.c:
Error E2176 .\sha2.h 55: Too many types in declaration
   + Full parser context
   + .\hbsha2.c, line 55: #include .\sha2.h
*** 1 errors in Compile ***

** error 1 ** deleting obj\b32\hbsha2.obj
-----------------------------------------


with BCC582 builds but with follow errors.
-----------------------------------------
MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
	bcc32.exe -c -q -d -Q -w -w-sig- -4 -O2 -OS -Ov -Oi -Oc -I..\..\include 
-DHB_FM_STATISTICS_OFF   -oobj\b32\hbsha2.obj .\hbsha2.c
.\hbsha2.c:
	bcc32.exe -c -q -d -Q -w -w-sig- -4 -O2 -OS -Ov -Oi -Oc -I..\..\include 
-DHB_FM_STATISTICS_OFF   -oobj\b32\hbsha2hm.obj .\hbsha2hm.c
.\hbsha2hm.c:
	bcc32.exe -c -q -d -Q -w -w-sig- -4 -O2 -OS -Ov -Oi -Oc -I..\..\include 
-DHB_FM_STATISTICS_OFF   -oobj\b32\sha1.obj .\sha1.c
.\sha1.c:
Warning W8004 .\sha1.c 99: 'a' is assigned a value that is never used in 
function SHA1_Transform
Warning W8065 .\sha1.c 122: Call to function 'memcpy' with no prototype 
in function SHA1_Update
Warning W8065 .\sha1.c 130: Call to function 'memcpy' with no prototype 
in function SHA1_Update
Warning W8065 .\sha1.c 155: Call to function 'memset' with no prototype 
in function SHA1_Final
Warning W8065 .\sha1.c 156: Call to function 'memset' with no prototype 
in function SHA1_Final
Warning W8065 .\sha1.c 157: Call to function 'memset' with no prototype 
in function SHA1_Final
Warning W8065 .\sha1.c 158: Call to function 'memset' with no prototype 
in function SHA1_Final
Warning W8004 .\sha1.c 159: 'j' is assigned a value that is never used 
in function SHA1_Final
Warning W8004 .\sha1.c 154: 'i' is assigned a value that is never used 
in function SHA1_Final
	bcc32.exe -c -q -d -Q -w -w-sig- -4 -O2 -OS -Ov -Oi -Oc -I..\..\include 
-DHB_FM_STATISTICS_OFF   -oobj\b32\sha1hmac.obj .\sha1hmac.c
.\sha1hmac.c:
	bcc32.exe -c -q -d -Q -w -w-sig- -4 -O2 -OS -Ov -Oi -Oc -I..\..\include 
-DHB_FM_STATISTICS_OFF   -oobj\b32\sha2.obj .\sha2.c
.\sha2.c:
	bcc32.exe -c -q -d -Q -w -w-sig- -4 -O2 -OS -Ov -Oi -Oc -I..\..\include 
-DHB_FM_STATISTICS_OFF   -oobj\b32\sha2hmac.obj .\sha2hmac.c
.\sha2hmac.c:
	tlib.exe "..\..\lib\b32\hbcrypt.lib" /P64  @MAKE0000.@@@
TLIB 4.5 Copyright (c) 1987, 1998 Borland International
+obj\b32\hbsha2.obj &
+obj\b32\hbsha2hm.obj &
+obj\b32\sha1.obj &
+obj\b32\sha1hmac.obj &
+obj\b32\sha2.obj &
+obj\b32\sha2hmac.obj &
+
-----------------------------------------

after built I have tried with testsha2.prg in tests folder (after have 
corrected a typo error at line 138) I get all test returning .F.


Best regards

Francesco
From dbtopas at dbtopas.lt  Tue Jan 20 16:54:07 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Jan 20 16:53:59 2009
Subject: [Harbour] 2009-01-20 20:47 UTC+0100 Viktor Szakats
In-Reply-To: <497642FC.6050805@fsgiudice.com>
References: <18d502870901201156t3c13bec6ld763876ad384990f@mail.gmail.com>
	<497642FC.6050805@fsgiudice.com>
Message-ID: <497647FF.8050800@dbtopas.lt>

> after built I have tried with testsha2.prg in tests folder (after have 
> corrected a typo error at line 138) I get all test returning .F.

Just an untested hint. Line 138 uses HB_HexToStr(), but function name is
StrToHex(). Maybe here is one more error...?


Regards,
Mindaugas

From mbelgrano at deltain.it  Tue Jan 20 16:50:14 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jan 20 16:57:32 2009
Subject: [Harbour] Harbour Web Site - English & Portuguese version
In-Reply-To: <531d7a750901201308r4da94e94leced030f735025fe@mail.gmail.com>
References: <531d7a750812111206q4c63ef5lac1401af490eb30@mail.gmail.com>
	<609353e70901141104l34dbdeb9t453d28312597efb4@mail.gmail.com>
	<531d7a750901201308r4da94e94leced030f735025fe@mail.gmail.com>
Message-ID: <609353e70901201350r233b1418m9bc314764a469ebe@mail.gmail.com>

Very Thanks for your effort

2009/1/20 Vailton Renato <vailtom@gmail.com>

> After a few days away for health care and personal matters and many
> details I'm back to finish the CONTRIB page and post again updates for
> revisions and comments.
>
> 2009/1/14 Massimo Belgrano <mbelgrano@deltain.it>:
> > Wich situation for upcoming harbour website?
> > Anybody have news?
> >
> > 2008/12/11 Vailton Renato <vailtom@gmail.com>
> >>
> >> Hi all!
> >>
> >> I concluded much of the development of the site for the project and
> >> would like to present the results.
> >>
> >> Project site in English:
> >> http://www.harbour-project.org/preview2/index.html
> >>
> >> Project site in Portuguese of Brazil (updated mirror):
> >> http://www.harbour-project.com.br/
> >>
> >> If I forgot to include someone in the Crew List please let me know.
> >> Opportunity to list the details that feel incomplete:
> >>
> >> * Documentation> Harbor documentation Index
> >>   Requires adjustments in the layout of the page.
> >>
> >> * Documentation> Tutorials
> >>   Need texts to fill the page. I have personal difficulties in
> >> assembling something in English to this page, but in the longer
> >> version in Portuguese I can contribute more.
> >>
> >> * Downloads> Helping tools
> >>  If you approve the idea, I think here would be the ideal place to
> >> put a list of tools for download as auxiliary Bison, GCC, FLEX,
> >> TortoiseSVN, and so on.
> >>
> >> Outside this, the site as a whole needs to be reviewed in search of
> >> errors. I look forward criticisms and suggestions ...
> >> Vailton Renato
> >> _______________________________________________
> >> Harbour mailing list
> >> Harbour@harbour-project.org
> >> http://lists.harbour-project.org/mailman/listinfo/harbour
> >
> >
> >
> > --
> > Massimo Belgrano
> >
> > Albo Nazionale Informatici Professionisti 2620
> > Socio 2843 Associazione Informatici prof.
> >
> > Analisi e sviluppo software per Lan e Web
> > Consulenza informatica - Formazione
> > Delta Informatica S.r.l.  http://www.deltain.it
> > Via Torelli,31 - 28100 Novara - Tel: 0321/30281
> >
> > _______________________________________________
> > Harbour mailing list
> > Harbour@harbour-project.org
> > http://lists.harbour-project.org/mailman/listinfo/harbour
> >
> >
>
>
>
> --
> Vailton Renato
> SQL LIB, MyMake & xDev Developer
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090120/4a7075f1/attachment.html
From harbour.01 at syenar.hu  Tue Jan 20 17:06:07 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Jan 20 17:06:13 2009
Subject: [Harbour] 2009-01-20 20:47 UTC+0100 Viktor Szakats
In-Reply-To: <497642FC.6050805@fsgiudice.com>
References: <18d502870901201156t3c13bec6ld763876ad384990f@mail.gmail.com>
	<497642FC.6050805@fsgiudice.com>
Message-ID: <18d502870901201406i1a88770t8c7c42f4d962f414@mail.gmail.com>

Hi Francesco,
Thanks I've committed these fixes:

2009-01-20 23:04 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbcrypt/sha1.c
    ! Fixed some BCC warnings.

2009-01-20 23:00 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbcrypt/sha1.c
    ! Added #include <string.h> for mem*().

2009-01-20 22:51 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbcrypt/tests/testsha2.prg
    ! Fixed typo in some last minute (and untested) modifications.

As for the BCC error, I'd like to ask BCC users to find out
what could be the problem. GCC and MSVC build cleanly,
and tests show all '.T.'.

Brgds,
Viktor

On Tue, Jan 20, 2009 at 10:32 PM, Francesco Saverio Giudice <
info@fsgiudice.com> wrote:

> Hi Viktor,
>
> Il 20/01/2009 20.56, Viktor Szak?ts ha scritto:
>
>> 2009-01-20 20:47 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
>>
>
> with BCC55 hbcrypt won't build
> -----------------------------------------
> MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
>        bcc32.exe -c -q -d -Q -w -w-sig- -4 -O2 -OS -Ov -Oi -Oc
> -I..\..\include -DHB_FM_STATISTICS_OFF   -oobj\b32\hbsha2.obj .\hbsha2.c
> .\hbsha2.c:
> Error E2176 .\sha2.h 55: Too many types in declaration
>  + Full parser context
>  + .\hbsha2.c, line 55: #include .\sha2.h
> *** 1 errors in Compile ***
>
> ** error 1 ** deleting obj\b32\hbsha2.obj
> -----------------------------------------
>
>
> with BCC582 builds but with follow errors.
> -----------------------------------------
> MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
>        bcc32.exe -c -q -d -Q -w -w-sig- -4 -O2 -OS -Ov -Oi -Oc
> -I..\..\include -DHB_FM_STATISTICS_OFF   -oobj\b32\hbsha2.obj .\hbsha2.c
> .\hbsha2.c:
>        bcc32.exe -c -q -d -Q -w -w-sig- -4 -O2 -OS -Ov -Oi -Oc
> -I..\..\include -DHB_FM_STATISTICS_OFF   -oobj\b32\hbsha2hm.obj .\hbsha2hm.c
> .\hbsha2hm.c:
>        bcc32.exe -c -q -d -Q -w -w-sig- -4 -O2 -OS -Ov -Oi -Oc
> -I..\..\include -DHB_FM_STATISTICS_OFF   -oobj\b32\sha1.obj .\sha1.c
> .\sha1.c:
> Warning W8004 .\sha1.c 99: 'a' is assigned a value that is never used in
> function SHA1_Transform
> Warning W8065 .\sha1.c 122: Call to function 'memcpy' with no prototype in
> function SHA1_Update
> Warning W8065 .\sha1.c 130: Call to function 'memcpy' with no prototype in
> function SHA1_Update
> Warning W8065 .\sha1.c 155: Call to function 'memset' with no prototype in
> function SHA1_Final
> Warning W8065 .\sha1.c 156: Call to function 'memset' with no prototype in
> function SHA1_Final
> Warning W8065 .\sha1.c 157: Call to function 'memset' with no prototype in
> function SHA1_Final
> Warning W8065 .\sha1.c 158: Call to function 'memset' with no prototype in
> function SHA1_Final
> Warning W8004 .\sha1.c 159: 'j' is assigned a value that is never used in
> function SHA1_Final
> Warning W8004 .\sha1.c 154: 'i' is assigned a value that is never used in
> function SHA1_Final
>        bcc32.exe -c -q -d -Q -w -w-sig- -4 -O2 -OS -Ov -Oi -Oc
> -I..\..\include -DHB_FM_STATISTICS_OFF   -oobj\b32\sha1hmac.obj .\sha1hmac.c
> .\sha1hmac.c:
>        bcc32.exe -c -q -d -Q -w -w-sig- -4 -O2 -OS -Ov -Oi -Oc
> -I..\..\include -DHB_FM_STATISTICS_OFF   -oobj\b32\sha2.obj .\sha2.c
> .\sha2.c:
>        bcc32.exe -c -q -d -Q -w -w-sig- -4 -O2 -OS -Ov -Oi -Oc
> -I..\..\include -DHB_FM_STATISTICS_OFF   -oobj\b32\sha2hmac.obj .\sha2hmac.c
> .\sha2hmac.c:
>        tlib.exe "..\..\lib\b32\hbcrypt.lib" /P64  @MAKE0000.@@@
> TLIB 4.5 Copyright (c) 1987, 1998 Borland International
> +obj\b32\hbsha2.obj &
> +obj\b32\hbsha2hm.obj &
> +obj\b32\sha1.obj &
> +obj\b32\sha1hmac.obj &
> +obj\b32\sha2.obj &
> +obj\b32\sha2hmac.obj &
> +
> -----------------------------------------
>
> after built I have tried with testsha2.prg in tests folder (after have
> corrected a typo error at line 138) I get all test returning .F.
>
>
> Best regards
>
> Francesco
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090120/e3638d01/attachment.html
From info at fsgiudice.com  Tue Jan 20 17:09:39 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Jan 20 17:09:48 2009
Subject: [Harbour] 2009-01-20 20:47 UTC+0100 Viktor Szakats
In-Reply-To: <497647FF.8050800@dbtopas.lt>
References: <18d502870901201156t3c13bec6ld763876ad384990f@mail.gmail.com>	<497642FC.6050805@fsgiudice.com>
	<497647FF.8050800@dbtopas.lt>
Message-ID: <49764BA3.8070107@fsgiudice.com>

Hi Mindaugas,

Il 20/01/2009 22.54, Mindaugas Kavaliauskas ha scritto:
>> after built I have tried with testsha2.prg in tests folder (after have 
>> corrected a typo error at line 138) I get all test returning .F.
> 
> Just an untested hint. Line 138 uses HB_HexToStr(), but function name is
> StrToHex(). Maybe here is one more error...?
> 
Right! Got it
Changing it to:
STATIC FUNCTION StrToHex( cMem )
    RETURN Lower( hb_StrToHex( cMem ) )

made it working. Thank you.
Viktor could you kindly update it ?

Best regards

Francesco
From harbour.01 at syenar.hu  Tue Jan 20 17:11:36 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Jan 20 17:13:46 2009
Subject: [Harbour] 2009-01-20 20:47 UTC+0100 Viktor Szakats
In-Reply-To: <49764BA3.8070107@fsgiudice.com>
References: <18d502870901201156t3c13bec6ld763876ad384990f@mail.gmail.com>
	<497642FC.6050805@fsgiudice.com> <497647FF.8050800@dbtopas.lt>
	<49764BA3.8070107@fsgiudice.com>
Message-ID: <18d502870901201411u665f5ab7h558b4dc81ea205af@mail.gmail.com>

Yes, it's done already.
Brgds,
Viktor

On Tue, Jan 20, 2009 at 11:09 PM, Francesco Saverio Giudice <
info@fsgiudice.com> wrote:

> Hi Mindaugas,
>
> Il 20/01/2009 22.54, Mindaugas Kavaliauskas ha scritto:
>
>> after built I have tried with testsha2.prg in tests folder (after have
>>> corrected a typo error at line 138) I get all test returning .F.
>>>
>>
>> Just an untested hint. Line 138 uses HB_HexToStr(), but function name is
>> StrToHex(). Maybe here is one more error...?
>>
>>  Right! Got it
> Changing it to:
> STATIC FUNCTION StrToHex( cMem )
>   RETURN Lower( hb_StrToHex( cMem ) )
>
> made it working. Thank you.
> Viktor could you kindly update it ?
>
> Best regards
>
> Francesco
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090120/b513b1a4/attachment.html
From info at fsgiudice.com  Tue Jan 20 17:24:44 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Jan 20 17:24:51 2009
Subject: [Harbour] 2009-01-20 20:47 UTC+0100 Viktor Szakats
In-Reply-To: <18d502870901201411u665f5ab7h558b4dc81ea205af@mail.gmail.com>
References: <18d502870901201156t3c13bec6ld763876ad384990f@mail.gmail.com>	<497642FC.6050805@fsgiudice.com>
	<497647FF.8050800@dbtopas.lt>	<49764BA3.8070107@fsgiudice.com>
	<18d502870901201411u665f5ab7h558b4dc81ea205af@mail.gmail.com>
Message-ID: <49764F2C.5050603@fsgiudice.com>


Il 20/01/2009 23.11, Viktor Szak?ts ha scritto:
> Yes, it's done already.
> 
I have seen you mail after mine.
Already tested and it works.
Thank you.

Best regards,

Francesco
From harbour.01 at syenar.hu  Tue Jan 20 17:30:06 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Jan 20 17:31:52 2009
Subject: [Harbour] proper tar utility for Windows
Message-ID: <18d502870901201430l79c3899k97ea92f97dcafc87@mail.gmail.com>

Hi folks,
Anyone knows a tar utility for Windows, which works properly?
(it's a plus if it doesn't depend on Cyg and similar dlls)

I use this one:
UNTGZ/32bit Decompression Utility 0.95 freeware version
Copyright (c) 1996,97 Tillmann Steinbrecher. Feb 17 1997

But it consistently messes up f.e. OpenSSL tars, like this one:
http://www.openssl.org/source/openssl-0.9.8j.tar.gz

Any tips?

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090120/d0762b75/attachment.html
From info at fsgiudice.com  Tue Jan 20 17:51:47 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Jan 20 17:51:54 2009
Subject: [Harbour] proper tar utility for Windows
In-Reply-To: <18d502870901201430l79c3899k97ea92f97dcafc87@mail.gmail.com>
References: <18d502870901201430l79c3899k97ea92f97dcafc87@mail.gmail.com>
Message-ID: <49765583.8060202@fsgiudice.com>

Hi Viktor,

Il 20/01/2009 23.30, Viktor Szak?ts ha scritto:
> Hi folks,
> 
> Anyone knows a tar utility for Windows, which works properly?
> (it's a plus if it doesn't depend on Cyg and similar dlls)
> 
> I use this one:
> UNTGZ/32bit Decompression Utility 0.95 freeware version
> Copyright (c) 1996,97 Tillmann Steinbrecher. Feb 17 1997
> 
> But it consistently messes up f.e. OpenSSL tars, like this one:
> http://www.openssl.org/source/openssl-0.9.8j.tar.gz
> 
> Any tips?

I use Total Commander (www.ghisler.com) as GUI file manager that fully 
manage tar files.
Otherwise, as command line tools, tar from gnuwin32 
(http://gnuwin32.sourceforge.net/packages/gtar.htm) that has 2 
dependencies dll 
(http://garr.dl.sourceforge.net/sourceforge/gnuwin32/tar-1.13-1-dep.zip)

HTH

Best regards,
Francesco
From harbour.01 at syenar.hu  Tue Jan 20 18:24:38 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Jan 20 18:24:43 2009
Subject: [Harbour] proper tar utility for Windows
In-Reply-To: <49765583.8060202@fsgiudice.com>
References: <18d502870901201430l79c3899k97ea92f97dcafc87@mail.gmail.com>
	<49765583.8060202@fsgiudice.com>
Message-ID: <18d502870901201524y1f16dc0by28d75f5f7901688e@mail.gmail.com>

Thanks Francesco.
I'd prefer something CLI, the gnuwin32 one doesn't handle -z option,
so files have to be manually ungzipped first. It also fails to create
the \include\openssl dir content properly. These are links in the tar,
and it creates .lnk files (untgz32 creates zero byte files). Both make
the build process file.

[ I've tried the msys one, but it doesn't do anything. ]

Brgds,
Viktor

On Tue, Jan 20, 2009 at 11:51 PM, Francesco Saverio Giudice <
info@fsgiudice.com> wrote:

> Hi Viktor,
>
> Il 20/01/2009 23.30, Viktor Szak?ts ha scritto:
>
>  Hi folks,
>>
>> Anyone knows a tar utility for Windows, which works properly?
>> (it's a plus if it doesn't depend on Cyg and similar dlls)
>>
>> I use this one:
>> UNTGZ/32bit Decompression Utility 0.95 freeware version
>> Copyright (c) 1996,97 Tillmann Steinbrecher. Feb 17 1997
>>
>> But it consistently messes up f.e. OpenSSL tars, like this one:
>> http://www.openssl.org/source/openssl-0.9.8j.tar.gz
>>
>> Any tips?
>>
>
> I use Total Commander (www.ghisler.com) as GUI file manager that fully
> manage tar files.
> Otherwise, as command line tools, tar from gnuwin32 (
> http://gnuwin32.sourceforge.net/packages/gtar.htm) that has 2 dependencies
> dll (
> http://garr.dl.sourceforge.net/sourceforge/gnuwin32/tar-1.13-1-dep.zip)
>
> HTH
>
> Best regards,
> Francesco
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090121/38b56a97/attachment.html
From lostmyhearttoher at gmail.com  Tue Jan 20 19:00:26 2009
From: lostmyhearttoher at gmail.com (Lost)
Date: Tue Jan 20 19:00:30 2009
Subject: [Harbour] proper tar utility for Windows
In-Reply-To: <18d502870901201524y1f16dc0by28d75f5f7901688e@mail.gmail.com>
References: <18d502870901201430l79c3899k97ea92f97dcafc87@mail.gmail.com>
	<49765583.8060202@fsgiudice.com>
	<18d502870901201524y1f16dc0by28d75f5f7901688e@mail.gmail.com>
Message-ID: <402ac8b70901201600u5c0293dfvf29d1291f80a179b@mail.gmail.com>

Hi Viktor,

El d?a 20/01/2009 Viktor Szak?ts <harbour.01@syenar.hu> escribi?:

> I'd prefer something CLI, the gnuwin32 one doesn't handle -z option,
> so files have to be manually ungzipped first. It also fails to create
> the \include\openssl dir content properly. These are links in the tar,
> and it creates .lnk files (untgz32 creates zero byte files). Both make
> the build process file.
> [ I've tried the msys one, but it doesn't do anything. ]
> Brgds,
> Viktor
>

Maybe it's not quite what you're looking for, but have you tried 7-zip?
http://www.7-zip.org/
There is a command line version in the download page.

(BTW, it's great to see you back around!)

HTH,
Lost
From philb at philb.us  Wed Jan 21 00:05:50 2009
From: philb at philb.us (Phil Barnett)
Date: Wed Jan 21 00:05:50 2009
Subject: [Harbour] Fwd: SF.net SVN:
	harbour-project:[10057]	trunk/harbour/ChangeLog
In-Reply-To: <4970A8AD.5060207@dbtopas.lt>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>	<49708C44.9040307@dbtopas.lt>	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>
	<4970A8AD.5060207@dbtopas.lt>
Message-ID: <4976AD2E.5070303@philb.us>

Mindaugas Kavaliauskas wrote:
> Viktor Szak?ts wrote:
>> Maybe some sort of forwarder e-mail address could do the job.
>
>
> Mmmm... Yes, perhaps. I'm nor shure if mailling list has possibility 
> to allow *@sourceforge.net users. Otherwise every "sourceforge.net 
> developer" one by one should be added to list.
> This can have also have some side effects, if someone uses redirection 
> from @sourceforge.net account, it will get two copies of message, 
> because both emails will be subscribed.
>
> If we can subscribe some: svncommit@harbour-project.org to mailing 
> list, and put .forward from svncommit@harbour-project.org to 
> harbour@harbour-project.org it could be a solution. We should also solve:
> 1) "From:" changing on forward.
> 2) Do not forward mails from harbour@harbour-project.org back to 
> harbour@harbour-project.org, to avoid loop.
>
I think it would be better to create a mailing list for these svn mails 
that anyone can subscribe to and it will be read only except for the SVN 
mailer. That way, it will not inflate the developer list with messages 
that a lot of people will never read.

I'm suggesting a list named svn@harbour-project.org

On that list, I can create the above accounts.

Would that be better than having these go to the main list, or do you 
all want them on the existing list?
From lorenzo.fiorini at gmail.com  Wed Jan 21 03:28:00 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jan 21 03:28:06 2009
Subject: [Harbour] mttest10.prg and Windows List Group option
Message-ID: <9257026e0901210028hbb38fbfk7c134bac84b4c965@mail.gmail.com>

I use the option "Always group windows" in Ubuntu/Gnome Window List applet.

The doc says:
"Select this option to always group windows of the same process under
one Window List button."

but the windows created by mttest10 ( and by my apps ) are not grouped.

Is it expected?

best regards,
Lorenzo
From harbour.01 at syenar.hu  Wed Jan 21 03:37:12 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 21 03:39:48 2009
Subject: [Harbour] proper tar utility for Windows
In-Reply-To: <402ac8b70901201600u5c0293dfvf29d1291f80a179b@mail.gmail.com>
References: <18d502870901201430l79c3899k97ea92f97dcafc87@mail.gmail.com>
	<49765583.8060202@fsgiudice.com>
	<18d502870901201524y1f16dc0by28d75f5f7901688e@mail.gmail.com>
	<402ac8b70901201600u5c0293dfvf29d1291f80a179b@mail.gmail.com>
Message-ID: <18d502870901210037l3ad005dex1fe1ab830877a515@mail.gmail.com>

Hi Lost,
Thanks for your suggestion. It seems it also doesn't create
those files, but I've just retried, and the whole issue seems
to be worked around by the OpenSSL build process, so this
specific problem is now solved. 7z is a good choice for
this job as I use it anyway (but I have to keep in mind it's
also good for tar :).

BTW, it would be great to see 7z support in Harbour.

[ The slight problem with this is that ANSI C 7z encoder
doesn't exist yet, but they seem to be working on it. ]

Brgds,
Viktor

On Wed, Jan 21, 2009 at 1:00 AM, Lost <lostmyhearttoher@gmail.com> wrote:

> Hi Viktor,
>
> El d?a 20/01/2009 Viktor Szak?ts <harbour.01@syenar.hu> escribi?:
>
> > I'd prefer something CLI, the gnuwin32 one doesn't handle -z option,
> > so files have to be manually ungzipped first. It also fails to create
> > the \include\openssl dir content properly. These are links in the tar,
> > and it creates .lnk files (untgz32 creates zero byte files). Both make
> > the build process file.
> > [ I've tried the msys one, but it doesn't do anything. ]
> > Brgds,
> > Viktor
> >
>
> Maybe it's not quite what you're looking for, but have you tried 7-zip?
> http://www.7-zip.org/
> There is a command line version in the download page.
>
> (BTW, it's great to see you back around!)
>
> HTH,
> Lost
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090121/3e807605/attachment.html
From druzus at acn.waw.pl  Wed Jan 21 03:46:27 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 21 03:42:32 2009
Subject: [Harbour] Fwd: SF.net SVN: harbour-project:[10057]
	trunk/harbour/ChangeLog
In-Reply-To: <4976AD2E.5070303@philb.us>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>
	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>
	<49708C44.9040307@dbtopas.lt>
	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>
	<4970A8AD.5060207@dbtopas.lt> <4976AD2E.5070303@philb.us>
Message-ID: <20090121084627.GA9668@34-mo7-2.acn.waw.pl>

On Wed, 21 Jan 2009, Phil Barnett wrote:

Hi Phil,

> I think it would be better to create a mailing list for these svn mails 
> that anyone can subscribe to and it will be read only except for the SVN 
> mailer. That way, it will not inflate the developer list with messages that 
> a lot of people will never read.
> I'm suggesting a list named svn@harbour-project.org
> On that list, I can create the above accounts.
> Would that be better than having these go to the main list, or do you all 
> want them on the existing list?

I'd prefer separate list.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Jan 21 03:43:17 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 21 03:53:18 2009
Subject: [Harbour] Fwd: SF.net SVN: harbour-project:[10057] 
	trunk/harbour/ChangeLog
In-Reply-To: <4976AD2E.5070303@philb.us>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>
	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>
	<49708C44.9040307@dbtopas.lt>
	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>
	<4970A8AD.5060207@dbtopas.lt> <4976AD2E.5070303@philb.us>
Message-ID: <18d502870901210043t38aae244x9a88f57b9fced79@mail.gmail.com>

IMO this is a developer list so such mails are expected,
if we split the lists into two, it will be complicated (and error
prone) to simply reply to those commit e-mails (this is
very useful and also common practice), which kind of
defeats the purpose, as the manual ChangeLog e-mails
would still have to be created to keep this list informed.

For those who are bothered by these mails, it's very easy
to filter them out BTW. (not so easy for digest readers, though).

Or, another option is to redirect the diff-less (thus short)
commit messages to this list and create a new one for
the verbose commit mails containing full diffs. (maybe
rather named 'svn-diffed@harbour-project.org', or similar)

Any further opinions on this?
Brgds,
Viktor

On Wed, Jan 21, 2009 at 6:05 AM, Phil Barnett <philb@philb.us> wrote:

> Mindaugas Kavaliauskas wrote:
>
>> Viktor Szak?ts wrote:
>>
>>> Maybe some sort of forwarder e-mail address could do the job.
>>>
>>
>>
>> Mmmm... Yes, perhaps. I'm nor shure if mailling list has possibility to
>> allow *@sourceforge.net users. Otherwise every "sourceforge.netdeveloper" one by one should be added to list.
>> This can have also have some side effects, if someone uses redirection
>> from @sourceforge.net account, it will get two copies of message, because
>> both emails will be subscribed.
>>
>> If we can subscribe some: svncommit@harbour-project.org to mailing list,
>> and put .forward from svncommit@harbour-project.org to
>> harbour@harbour-project.org it could be a solution. We should also solve:
>> 1) "From:" changing on forward.
>> 2) Do not forward mails from harbour@harbour-project.org back to
>> harbour@harbour-project.org, to avoid loop.
>>
>>  I think it would be better to create a mailing list for these svn mails
> that anyone can subscribe to and it will be read only except for the SVN
> mailer. That way, it will not inflate the developer list with messages that
> a lot of people will never read.
>
> I'm suggesting a list named svn@harbour-project.org
>
> On that list, I can create the above accounts.
>
> Would that be better than having these go to the main list, or do you all
> want them on the existing list?
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090121/f0a248bc/attachment.html
From druzus at acn.waw.pl  Wed Jan 21 03:58:14 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 21 03:54:18 2009
Subject: [Harbour] proper tar utility for Windows
In-Reply-To: <18d502870901210037l3ad005dex1fe1ab830877a515@mail.gmail.com>
References: <18d502870901201430l79c3899k97ea92f97dcafc87@mail.gmail.com>
	<49765583.8060202@fsgiudice.com>
	<18d502870901201524y1f16dc0by28d75f5f7901688e@mail.gmail.com>
	<402ac8b70901201600u5c0293dfvf29d1291f80a179b@mail.gmail.com>
	<18d502870901210037l3ad005dex1fe1ab830877a515@mail.gmail.com>
Message-ID: <20090121085814.GA18150@34-mo7-2.acn.waw.pl>

On Wed, 21 Jan 2009, Szak?ts Viktor wrote:

Hi Viktor,

> Thanks for your suggestion. It seems it also doesn't create
> those files, but I've just retried, and the whole issue seems
> to be worked around by the OpenSSL build process, so this
> specific problem is now solved. 7z is a good choice for
> this job as I use it anyway (but I have to keep in mind it's
> also good for tar :).

Maybe I'm wrong but isn't the file creating problems for you
softlinks which does not exists in MS-Windows file systems
so they simply cannot be created on this architecture and
your results with different tar decompressors are only
workarounds for it?

best regards,
Przemek
From druzus at acn.waw.pl  Wed Jan 21 04:03:29 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 21 03:59:34 2009
Subject: [Harbour] 2009-01-21 10:02 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090121090329.GA25716@34-mo7-2.acn.waw.pl>

2009-01-21 10:02 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/ChangeLog
    * cleaned some typos

  * harbour/common.mak
  * harbour/source/rtl/Makefile
  + harbour/source/rtl/strtoexp.c
  * harbour/source/rtl/valtostr.c
    * moved my HB_STRTOEXP() function to separate file

  * harbour/common.mak
  * harbour/source/rtl/Makefile
  + harbour/source/rtl/strc.c
    + added two new functions to operate on C like strings:
      HB_STRDECODESCAPE( <cEscSeqStr> ) -> <cStr>
         Decode string with \ escape sequences.
      HB_STRCDECODE( <cStr> [, @<lCont> ] ) -> <cResult> | NIL
         Decode string using C compiler rules.
         If second parameter <lCont> is passed by reference then it allows
         to decode multiline strings. In such case <lCont> is set to .T.
         if string ends with unclosed "" quoting and next call to this
         function with lCont parameter continue string decoding.
         Function returns decoded string or NIL on syntax error.
      They will be helper functions for decoding .pot files.

  * harbour/source/rtl/hbi18n.c
  * harbour/source/rtl/hbstrsh.c
    % small optimizations

best regards
Przemek
From harbour.01 at syenar.hu  Wed Jan 21 04:05:57 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 21 04:09:10 2009
Subject: [Harbour] proper tar utility for Windows
In-Reply-To: <20090121085814.GA18150@34-mo7-2.acn.waw.pl>
References: <18d502870901201430l79c3899k97ea92f97dcafc87@mail.gmail.com>
	<49765583.8060202@fsgiudice.com>
	<18d502870901201524y1f16dc0by28d75f5f7901688e@mail.gmail.com>
	<402ac8b70901201600u5c0293dfvf29d1291f80a179b@mail.gmail.com>
	<18d502870901210037l3ad005dex1fe1ab830877a515@mail.gmail.com>
	<20090121085814.GA18150@34-mo7-2.acn.waw.pl>
Message-ID: <18d502870901210105p7e2aa88cr82228fc6b34323ae@mail.gmail.com>

Yes, this is the case. It seems there is no solution for this problem,
besides making these packages not
to rely on the affected links when used on Windows. In
OpenSSL this is handled by the perl Configure script.
(I've just tried it on an OpenSSL .tgz unpacked on Windows).

Brgds,
Viktor

On Wed, Jan 21, 2009 at 9:58 AM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:

> On Wed, 21 Jan 2009, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
> > Thanks for your suggestion. It seems it also doesn't create
> > those files, but I've just retried, and the whole issue seems
> > to be worked around by the OpenSSL build process, so this
> > specific problem is now solved. 7z is a good choice for
> > this job as I use it anyway (but I have to keep in mind it's
> > also good for tar :).
>
> Maybe I'm wrong but isn't the file creating problems for you
> softlinks which does not exists in MS-Windows file systems
> so they simply cannot be created on this architecture and
> your results with different tar decompressors are only
> workarounds for it?
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090121/dc242882/attachment.html
From druzus at acn.waw.pl  Wed Jan 21 04:41:57 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 21 04:38:02 2009
Subject: [Harbour] 2009-01-21 10:41 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090121094157.GA1714@34-mo7-2.acn.waw.pl>

2009-01-21 10:41 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbcrypt/sha1.h
  * harbour/contrib/hbcrypt/sha1.c
    ! disabled LITTLE_ENDIAN macro definition to avoid conflicts with
      macros using the same name defined in some system header files
      HB_LITTLE_ENDIAN used instead

best regards
Przemek
From lorenzo.fiorini at gmail.com  Wed Jan 21 07:09:32 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jan 21 07:09:36 2009
Subject: [Harbour] Re: Harbour MT success report
In-Reply-To: <9257026e0901200951u16f3a91l96ff246ab71fd890@mail.gmail.com>
References: <9257026e0901200951u16f3a91l96ff246ab71fd890@mail.gmail.com>
Message-ID: <9257026e0901210409q142c6815ye1f11c7c252a3278@mail.gmail.com>

On Tue, Jan 20, 2009 at 6:51 PM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com> wrote:

> What I found really magic is that every thread can have his own GT and
> even a different GUI.
> In the test the main thread is a xhgtk app that creates a trayicon
> with a popup menu that launch "the original" gtxwc apps ( sth like
> OpenOffice's QuickStart under Win ).

Unfortunately the same approach doesn't work in Win. The main xhgtk
thread works but it cannot launch gtwvt threads. It returns:

Application Internal Error - C:\dvl\src\ws\tas\out\tas.exe
Terminated at: 2009.01.21 11:48:40
Unrecoverable error 10001: It's not a GUI program
------------------------------------------------------------------------

best regards,
Lorenzo
From druzus at acn.waw.pl  Wed Jan 21 07:24:58 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 21 07:21:03 2009
Subject: [Harbour] Re: Harbour MT success report
In-Reply-To: <9257026e0901210409q142c6815ye1f11c7c252a3278@mail.gmail.com>
References: <9257026e0901200951u16f3a91l96ff246ab71fd890@mail.gmail.com>
	<9257026e0901210409q142c6815ye1f11c7c252a3278@mail.gmail.com>
Message-ID: <20090121122458.GA932@34-mo7-2.acn.waw.pl>

On Wed, 21 Jan 2009, Lorenzo Fiorini wrote:

Hi Lorenzo,

> Unfortunately the same approach doesn't work in Win. The main xhgtk
> thread works but it cannot launch gtwvt threads. It returns:
> Application Internal Error - C:\dvl\src\ws\tas\out\tas.exe
> Terminated at: 2009.01.21 11:48:40
> Unrecoverable error 10001: It's not a GUI program

This error is reported when application is not linked with
WinMain() startup point and it does not depend or xhgtk or
MT mode at all. If you are using MinGW then use -mwindows
liner switch and do not link with hbmainstd library.

BTW if you want to use xhgtk in different threads then I suggest
to 1-st read GTK documentation for MT programming.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Wed Jan 21 09:36:40 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jan 21 09:36:44 2009
Subject: [Harbour] Re: Harbour MT success report
In-Reply-To: <20090121122458.GA932@34-mo7-2.acn.waw.pl>
References: <9257026e0901200951u16f3a91l96ff246ab71fd890@mail.gmail.com>
	<9257026e0901210409q142c6815ye1f11c7c252a3278@mail.gmail.com>
	<20090121122458.GA932@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0901210636s52fc42d3jb59418bb95eec961@mail.gmail.com>

On Wed, Jan 21, 2009 at 1:24 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> This error is reported when application is not linked with
> WinMain() startup point and it does not depend or xhgtk or
> MT mode at all. If you are using MinGW then use -mwindows
> liner switch and do not link with hbmainstd library.

Sorry probably I was not clear enough.

I use only hb* scripts so -mwindows is added automatically.

If under msys I build using:

hbmk -mt mttest10

it works as expected ( I've defined THREAD_GT as "WVT" )

instead if I use:

hbmk -mt -xhgtk mttest10

I get:

------------------------------------------------------------------------
Application Internal Error - c:\dvl\src\mytests\mt\mttest10.exe
Terminated at: 2009.01.21 15:29:48
Unrecoverable error 10001: It's not a GUI program
------------------------------------------------------------------------

In my test app the gtk startup works as expected I get the error when
I start the "child" thread at "hb_gtReload( "WVT" )

------------------------------------------------------------------------
Application Internal Error - C:\dvl\src\ws\tas\out\tas.exe
Terminated at: 2009.01.21 15:09:28
Unrecoverable error 10001: It's not a GUI program
Called from HB_GTRELOAD(0)
...
------------------------------------------------------------------------

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Wed Jan 21 09:56:05 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jan 21 09:58:57 2009
Subject: [Harbour] Re: Harbour MT success report
In-Reply-To: <9257026e0901210409q142c6815ye1f11c7c252a3278@mail.gmail.com>
References: <9257026e0901200951u16f3a91l96ff246ab71fd890@mail.gmail.com>
	<9257026e0901210409q142c6815ye1f11c7c252a3278@mail.gmail.com>
Message-ID: <9257026e0901210656g1911a948mced88e2aa458ba32@mail.gmail.com>

On Wed, Jan 21, 2009 at 1:09 PM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com> wrote:

> Unfortunately the same approach doesn't work in Win. The main xhgtk
> thread works but it cannot launch gtwvt threads. It returns:

Instead under Mac OSX 10.5 it works exactly as in Linux
( if you have gtk and X11 installed of course ).

best regards,
Lorenzo
From M.Horodyski at pzuzycie.com.pl  Wed Jan 21 10:10:53 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Wed Jan 21 10:10:58 2009
Subject: [Harbour] 2009-01-19 23:39 UTC+0100 Francesco Saverio
	Giudice(info/at/fsgiudice.com)
In-Reply-To: <49750171.3030908@fsgiudice.com>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501CB2AE7@PINK.zycie.pzu>

>-----Original Message-----
>From: Francesco Saverio Giudice [mailto:info@fsgiudice.com] 
>Sent: Monday, January 19, 2009 11:41 PM
>To: Harbour Project Main Developer List.
>Subject: [Harbour] 2009-01-19 23:39 UTC+0100 Francesco Saverio 
>Giudice(info/at/fsgiudice.com)
>
>2009-01-19 23:39 UTC+0100 Francesco Saverio Giudice 
>(info/at/fsgiudice.com)
>   + harbour/contrib/examples/uhttpd
...

>       Actually is only for windows and BCC32.
>       To build use hbmk_b32.bat
>       Please read readme.txt before start to use.
>
>
>best regards
>
>Francesco

Fracesco,
Where from can we get bgd.dll ?
On http://www.libgd.org/Downloads are sources ( we need binaries).

Regards,
Marek Horodyski
From info at fsgiudice.com  Wed Jan 21 10:57:25 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Jan 21 10:57:51 2009
Subject: [Harbour] 2009-01-19 23:39 UTC+0100 Francesco
	Saverio	Giudice(info/at/fsgiudice.com)
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501CB2AE7@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501CB2AE7@PINK.zycie.pzu>
Message-ID: <497745E5.9020700@fsgiudice.com>

Hi Marek,

Il 21/01/2009 16.10, Horodyski Marek (PZUZ) ha scritto:
> Where from can we get bgd.dll ?
> On http://www.libgd.org/Downloads are sources ( we need binaries).

libgd.org is a little cryptic with links. Correct link to releases is in 
main page under "news". Anyway the link is:

http://www.libgd.org/releases/gd-latest-win32.zip

Best regards

Francesco
From lorenzo.fiorini at gmail.com  Wed Jan 21 10:58:32 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jan 21 11:00:15 2009
Subject: [Harbour] 2009-01-21 16:42 UTC+0100 Lorenzo Fiorini
Message-ID: <9257026e0901210758o1de90627l25a43317f0354492@mail.gmail.com>

2009-01-21 16:42 UTC+0100 Lorenzo Fiorini (lorenzo.fiorini/at/gmail.com)
  * contrib/hbpgsql/tests/simple.prg
  * contrib/hbpgsql/tests/async.prg
  * contrib/hbpgsql/tests/cache.prg
  * contrib/hbpgsql/tests/stress.prg
  * contrib/hbpgsql/tests/dbf2pg.prg
    * general cleanup for Harbour
	 * fix of function and method names, removed hard wired uid and pwd
  * contrib/hbtip/utils.c
    * added new mime types like flash files, rtf, csv

best regards,
Lorenzo
From info at fsgiudice.com  Wed Jan 21 11:09:00 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Jan 21 11:09:15 2009
Subject: [Harbour] 2009-01-21 17:02 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
Message-ID: <4977489C.2000006@fsgiudice.com>

2009-01-21 17:02 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   * harbour/contrib/examples/uhttpd/hbmk_b32.bat
     * Updated with link where download bgd.dll

TODO: I will upload version with -DWITH_GD switch to remove needs for 
hbgd but I'm working on uhttpd.prg now.

In meanwhile please comment line 88 (REQUEST GDIMAGE, ...) and remove 
hbgd.lib and bgd.lib from batch file.
The only sample that not work is "counter".

Best regards

Francesco
From harbour.01 at syenar.hu  Wed Jan 21 11:13:57 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 21 11:14:01 2009
Subject: [Harbour] 2009-01-21 16:42 UTC+0100 Lorenzo Fiorini
In-Reply-To: <9257026e0901210758o1de90627l25a43317f0354492@mail.gmail.com>
References: <9257026e0901210758o1de90627l25a43317f0354492@mail.gmail.com>
Message-ID: <18d502870901210813x78f97fb2ma8f0a0910ce61cc0@mail.gmail.com>

Hi Lorenzo,
Could you add OpenDocument files? (.ods, .odt)

These are very nice file formats and even easy to generate
directly from an app.

Brgds,
Viktor

On Wed, Jan 21, 2009 at 4:58 PM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com>wrote:

> 2009-01-21 16:42 UTC+0100 Lorenzo Fiorini (lorenzo.fiorini/at/gmail.com)
>  * contrib/hbpgsql/tests/simple.prg
>  * contrib/hbpgsql/tests/async.prg
>  * contrib/hbpgsql/tests/cache.prg
>  * contrib/hbpgsql/tests/stress.prg
>  * contrib/hbpgsql/tests/dbf2pg.prg
>    * general cleanup for Harbour
>         * fix of function and method names, removed hard wired uid and pwd
>  * contrib/hbtip/utils.c
>    * added new mime types like flash files, rtf, csv
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090121/6fc1711f/attachment.html
From harbour.01 at syenar.hu  Wed Jan 21 11:18:59 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 21 11:19:05 2009
Subject: [Harbour] THREAD STATIC var naming
Message-ID: <18d502870901210818l1158838cv3e17ef296374e9b3@mail.gmail.com>

Hi all,
I'd like to propose to mark all THREAD STATIC
vars with the 't_' prefix, instead of 's_' to make
the difference obvious when looking at the code.

So:
THREAD STATIC t_var
STATIC s_var

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090121/669cec8d/attachment.html
From info at fsgiudice.com  Wed Jan 21 11:39:16 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Jan 21 11:39:24 2009
Subject: [Harbour] 2009-01-21 17:38 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
Message-ID: <49774FB4.7000502@fsgiudice.com>

2009-01-21 17:38 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   * harbour/Changelog
     * missed upload

best regards

Francesco
From druzus at acn.waw.pl  Wed Jan 21 11:50:17 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 21 11:46:20 2009
Subject: [Harbour] Re: Harbour MT success report
In-Reply-To: <9257026e0901210636s52fc42d3jb59418bb95eec961@mail.gmail.com>
References: <9257026e0901200951u16f3a91l96ff246ab71fd890@mail.gmail.com>
	<9257026e0901210409q142c6815ye1f11c7c252a3278@mail.gmail.com>
	<20090121122458.GA932@34-mo7-2.acn.waw.pl>
	<9257026e0901210636s52fc42d3jb59418bb95eec961@mail.gmail.com>
Message-ID: <20090121165017.GA12544@34-mo7-2.acn.waw.pl>

On Wed, 21 Jan 2009, Lorenzo Fiorini wrote:

Hi Lorenzo,

> Sorry probably I was not clear enough.
> I use only hb* scripts so -mwindows is added automatically.

No it isn't. Neither -mconsole nor -mwindows is enabled by default
in hb* scripts.

> If under msys I build using:
> hbmk -mt mttest10
> it works as expected ( I've defined THREAD_GT as "WVT" )

Because without -mwindows/-mconsole switches LD/GCC tries to
guess the type of binaries using functions from linked objects
and libraries and in such case it guess it's GUI application
and sets WinMain() as startup point.

> instead if I use:
> hbmk -mt -xhgtk mttest10
> I get:
> ------------------------------------------------------------------------
> Application Internal Error - c:\dvl\src\mytests\mt\mttest10.exe
> Terminated at: 2009.01.21 15:29:48
> Unrecoverable error 10001: It's not a GUI program
> ------------------------------------------------------------------------

In this case it creates application where Harbour WinMain() was not executed.
Try to use -mwindows explicitly. The above internal error is generated by
Harbour when WinMain() was not application entry point. Nothing more
is checked.
Try to force it using -mwindows switch or removing [hb]mainstd from linked
library list.

> In my test app the gtk startup works as expected I get the error when
> I start the "child" thread at "hb_gtReload( "WVT" )

You've got an error when you try to activate GTWVT.
You do not need separate thread for it. You can try
to reload GT in single thread program too. If you create
binaries in the same way then you will have the same effect.
If you create binaries where Harbour WinMain() will be executed
then above error will disappear.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Jan 21 11:53:06 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 21 11:49:10 2009
Subject: [Harbour] 2009-01-21 17:52 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090121165306.GA30521@34-mo7-2.acn.waw.pl>

2009-01-21 17:52 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/common.mak
  * harbour/source/rtl/Makefile
  - harbour/source/rtl/hbi18n.c
  + harbour/source/rtl/hbi18n1.c
    * renamed hbi18n.c to hbi18n1.c to avoid conflicts with hbi18n
      program - non GNU make files needs unique file names
    ! fixed bug in internal function __I18N_HASHTABLE()

  * harbour/common.mak
  * harbour/source/rtl/Makefile
  + harbour/source/rtl/hbi18n2.prg
    + added new I18N functions to manage .pot files and generate .hbl ones.
      public functions:
      HB_I18N_loadPot( <cFile>, [<pI18N>] [, @<cErrorMsg>] ) -> <pI18N> | NIL
         Reads .pot file and returns Harbour translation set or NIL when
         error appears. In such case <cErrorMsg> is contains error message
         string. If second parameter [<pI18N>] is given then translation
         items read from .pot file are added to this set. Otherwise new
         Harbour translation set is created.
      HB_I18N_savePot( <cFile>, <pI18N> [, @<cErrorMsg>] ) -> <lSuccess>
         Generates .pot file from Harbour translation set. Please note
         that Harbour translation set does not contain additional
         information which exists in original .pot files like source
         code numbers or alternative plural forms.
      internal functions for Harbour developers which will work on I18N
      tools:
      __I18N_potArrayLoad( <cFile> [, @<cErrorMsg>] ) -> <aTrans> | NIL
         Reads .pot file and returns array with translation items or
         NIL when error appears. In such case <cErrorMsg> is contains
         error message string.
         <aTrans> is an array with translation items containing additional
         informations from .pot file which are not necessary in final
         translation sets used at runtime. It's designed for I18N tools
         written in Harbour to manage .pot files and/or create .hbl ones.
      __I18N_potArraySave( <cFile>, <aTrans> [, @<cErrorMsg>] ) -> <lSuccess>
         Generates .pot file from array with translations items.
      __I18N_potArrayJoin( <aTrans>, <aTrans2> ) -> <aTrans>
         Join two arrays with translation items. Items from <aTrans2>
         are added to <aTrans>. If given translation item already exists
         in <aTrans> (the same msgctxt and msgid) then source code references
         are merged and translations from <aTrans2> are added only if
         <aTrans> does not have it.
      __I18N_potArrayToHash( <aTrans>, [<lEmpty>] [, <hI18N>] ) -> <hI18N>
         Converts array with translation items to hash table in the format
         used internally by Harbour translation sets. It's the same format
         as used __I18N_hashTable() function. The conversion removes data
         which is not necessary for runtime translations like source code
         references or alternative source plural forms.
         If second parameter <hI18N> is given then translation items form
         <aTrans> are added to it. Otherwise new hash table with is created.
         If <lEmpty> is .T. then also items with empty translation are added
         but source strings are used instead of missing destination ones.

  * harbour/include/hbextern.ch
    + added new I18N functions

  * harbour/harbour-win-spec
  * harbour/harbour-wce-spec
  * harbour/harbour.spec
  * harbour/mpkg_tgz.sh
  * harbour/make_b32.mak
  * harbour/make_vc.mak
  * harbour/make_gcc.mak
  * harbour/common.mak
  * harbour/utils/Makefile
  + harbour/utils/hbi18n
  + harbour/utils/hbi18n/hbi18n.prg
  + harbour/utils/hbi18n/Makefile
    + added very simple application to manage .pot/.hbl files
      Syntax: hbi18n -m | -g [-o<outfile>] [-e] [-q] <files1[.pot] ...>
         -m             merge given .pot files
         -g             generate .hbl file from given .pot files
         -o<outfile>    output file name
                        default is first .pot file name with
                        .po_ (merge) or .hbl extension
         -e             do not strip empty translation rules from .hbl files
         -q             quiet mode

      TODO: extend it and add support for interactive mode which will
            allow to edit translations.

best regards
Przemek
From info at fsgiudice.com  Wed Jan 21 11:49:52 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Jan 21 11:49:59 2009
Subject: [Harbour] THREAD STATIC var naming
In-Reply-To: <18d502870901210818l1158838cv3e17ef296374e9b3@mail.gmail.com>
References: <18d502870901210818l1158838cv3e17ef296374e9b3@mail.gmail.com>
Message-ID: <49775230.5060700@fsgiudice.com>

Hi Viktor,

Il 21/01/2009 17.18, Viktor Szak?ts ha scritto:
> Hi all,
> 
> I'd like to propose to mark all THREAD STATIC 
> vars with the 't_' prefix, instead of 's_' to make 
> the difference obvious when looking at the code.
> 
> So:
> THREAD STATIC t_var
> STATIC s_var
> 

why not ts_ ?

Best regards

Francesco
From lorenzo.fiorini at gmail.com  Wed Jan 21 11:58:09 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jan 21 11:58:13 2009
Subject: [Harbour] 2009-01-21 16:42 UTC+0100 Lorenzo Fiorini
In-Reply-To: <18d502870901210813x78f97fb2ma8f0a0910ce61cc0@mail.gmail.com>
References: <9257026e0901210758o1de90627l25a43317f0354492@mail.gmail.com>
	<18d502870901210813x78f97fb2ma8f0a0910ce61cc0@mail.gmail.com>
Message-ID: <9257026e0901210858t6481565u1f6f94ad1503da64@mail.gmail.com>

On Wed, Jan 21, 2009 at 5:13 PM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:

> Could you add OpenDocument files? (.ods, .odt)
> These are very nice file formats and even easy to generate
> directly from an app.

O course. I've simply synced the "compatible" part of my local repo.

BTW have you tried to generate ods or an odt from Harbour?
I've done some tests but the ODF doc was huge so I never find enough
time to continue.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Wed Jan 21 12:11:55 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jan 21 12:11:59 2009
Subject: [Harbour] Re: Harbour MT success report
In-Reply-To: <20090121165017.GA12544@34-mo7-2.acn.waw.pl>
References: <9257026e0901200951u16f3a91l96ff246ab71fd890@mail.gmail.com>
	<9257026e0901210409q142c6815ye1f11c7c252a3278@mail.gmail.com>
	<20090121122458.GA932@34-mo7-2.acn.waw.pl>
	<9257026e0901210636s52fc42d3jb59418bb95eec961@mail.gmail.com>
	<20090121165017.GA12544@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0901210911k76454d00g94ef1ae112fef880@mail.gmail.com>

On Wed, Jan 21, 2009 at 5:50 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> Try to force it using -mwindows switch or removing [hb]mainstd from linked
> library list.

I've tried hbmk -mt -xhgtk -mwindows mttest10.prg but I get the same result.

But probably I don't understand well.

In hb-func.sh I see:

if [ "\${HB_COMPILER}" = "mingw" ]; then
    if [ -z "\${HB_MODE}" ]; then
        LN_OPT="\${LN_OPT} -mwindows"
        l="hbmainwin"
    elif [ "\${HB_MODE}" = "gui" ]; then
        l="hbmainwin"
    elif [ "\${HB_MODE}" = "std" ]; then
        l="hbmainstd"
    fi

so I was sure that -mwindows was used by default with mingw.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Wed Jan 21 13:10:04 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 21 13:10:08 2009
Subject: [Harbour] THREAD STATIC var naming
In-Reply-To: <49775230.5060700@fsgiudice.com>
References: <18d502870901210818l1158838cv3e17ef296374e9b3@mail.gmail.com>
	<49775230.5060700@fsgiudice.com>
Message-ID: <18d502870901211010v51661188j8928eeb2d02c8308@mail.gmail.com>

Vars names align better visually if all prefixes are of equal length (one
char). It's also easier to swap
automatically without manual reformatting.

We have 'g_', 's_', 't_', so it's a not a really busy
list of prefixes, I'd prefer not to make it any more
verbose than necessary.

Brgds,
Viktor

On Wed, Jan 21, 2009 at 5:49 PM, Francesco Saverio Giudice <
info@fsgiudice.com> wrote:

> Hi Viktor,
>
> Il 21/01/2009 17.18, Viktor Szak?ts ha scritto:
>
>  Hi all,
>>
>> I'd like to propose to mark all THREAD STATIC vars with the 't_' prefix,
>> instead of 's_' to make the difference obvious when looking at the code.
>>
>> So:
>> THREAD STATIC t_var
>> STATIC s_var
>>
>>
> why not ts_ ?
>
> Best regards
>
> Francesco
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090121/e9a91c63/attachment.html
From harbour.01 at syenar.hu  Wed Jan 21 13:15:18 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 21 13:15:23 2009
Subject: [Harbour] 2009-01-21 16:42 UTC+0100 Lorenzo Fiorini
In-Reply-To: <9257026e0901210858t6481565u1f6f94ad1503da64@mail.gmail.com>
References: <9257026e0901210758o1de90627l25a43317f0354492@mail.gmail.com>
	<18d502870901210813x78f97fb2ma8f0a0910ce61cc0@mail.gmail.com>
	<9257026e0901210858t6481565u1f6f94ad1503da64@mail.gmail.com>
Message-ID: <18d502870901211015o54c35914p7dda8d326e8f5ff7@mail.gmail.com>

I've implemented native .ods output just recently.
No .odt yet, for docs I'm going the .pdf way. (hbhpdf
+ libharu are very nice).

Most time spent was to inspect what is absolute
minimum content required for an .ods file. I can
send you such "stripped" sample file. From this
point it's pretty easy to generate, one .xml file,
a few small helper files, and all that hbmzip-ped
together.

Brgds,
Viktor

On Wed, Jan 21, 2009 at 5:58 PM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com>wrote:

> On Wed, Jan 21, 2009 at 5:13 PM, Viktor Szak?ts <harbour.01@syenar.hu>
> wrote:
>
> > Could you add OpenDocument files? (.ods, .odt)
> > These are very nice file formats and even easy to generate
> > directly from an app.
>
> O course. I've simply synced the "compatible" part of my local repo.
>
> BTW have you tried to generate ods or an odt from Harbour?
> I've done some tests but the ODF doc was huge so I never find enough
> time to continue.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090121/efd507a4/attachment.html
From druzus at acn.waw.pl  Wed Jan 21 13:25:02 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 21 13:21:11 2009
Subject: [Harbour] THREAD STATIC var naming
In-Reply-To: <18d502870901211010v51661188j8928eeb2d02c8308@mail.gmail.com>
References: <18d502870901210818l1158838cv3e17ef296374e9b3@mail.gmail.com>
	<49775230.5060700@fsgiudice.com>
	<18d502870901211010v51661188j8928eeb2d02c8308@mail.gmail.com>
Message-ID: <20090121182502.GA3606@34-mo7-2.acn.waw.pl>

On Wed, 21 Jan 2009, Szak?ts Viktor wrote:

Hi Viktor,

> Vars names align better visually if all prefixes are of equal length (one
> char). It's also easier to swap
> automatically without manual reformatting.
> We have 'g_', 's_', 't_', so it's a not a really busy
> list of prefixes, I'd prefer not to make it any more
> verbose than necessary.

t_ prefix is OK for me.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Wed Jan 21 13:24:51 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jan 21 13:26:40 2009
Subject: [Harbour] 2009-01-21 16:42 UTC+0100 Lorenzo Fiorini
In-Reply-To: <18d502870901211015o54c35914p7dda8d326e8f5ff7@mail.gmail.com>
References: <9257026e0901210758o1de90627l25a43317f0354492@mail.gmail.com>
	<18d502870901210813x78f97fb2ma8f0a0910ce61cc0@mail.gmail.com>
	<9257026e0901210858t6481565u1f6f94ad1503da64@mail.gmail.com>
	<18d502870901211015o54c35914p7dda8d326e8f5ff7@mail.gmail.com>
Message-ID: <9257026e0901211024i4fbdb368p1137e241b9182f7e@mail.gmail.com>

On Wed, Jan 21, 2009 at 7:15 PM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:

> I've implemented native .ods output just recently.
> No .odt yet, for docs I'm going the .pdf way. (hbhpdf
> + libharu are very nice).

I'm using hbvpdf for pdfs but I also need "editable" documents so I use RTFs.

> Most time spent was to inspect what is absolute
> minimum content required for an .ods file. I can
> send you such "stripped" sample file. From this
> point it's pretty easy to generate, one .xml file,
> a few small helper files, and all that hbmzip-ped
> together.

Many thanks. It could be the begin of an odf lib for Harbour.

best regards,
Lorenzo
From druzus at acn.waw.pl  Wed Jan 21 13:33:59 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 21 13:30:02 2009
Subject: [Harbour] Re: Harbour MT success report
In-Reply-To: <9257026e0901210911k76454d00g94ef1ae112fef880@mail.gmail.com>
References: <9257026e0901200951u16f3a91l96ff246ab71fd890@mail.gmail.com>
	<9257026e0901210409q142c6815ye1f11c7c252a3278@mail.gmail.com>
	<20090121122458.GA932@34-mo7-2.acn.waw.pl>
	<9257026e0901210636s52fc42d3jb59418bb95eec961@mail.gmail.com>
	<20090121165017.GA12544@34-mo7-2.acn.waw.pl>
	<9257026e0901210911k76454d00g94ef1ae112fef880@mail.gmail.com>
Message-ID: <20090121183359.GB3606@34-mo7-2.acn.waw.pl>

On Wed, 21 Jan 2009, Lorenzo Fiorini wrote:
> > Try to force it using -mwindows switch or removing [hb]mainstd from linked
> > library list.
> I've tried hbmk -mt -xhgtk -mwindows mttest10.prg but I get the same result.
> But probably I don't understand well.
> In hb-func.sh I see:
> if [ "\${HB_COMPILER}" = "mingw" ]; then
>     if [ -z "\${HB_MODE}" ]; then
>         LN_OPT="\${LN_OPT} -mwindows"
>         l="hbmainwin"
>     elif [ "\${HB_MODE}" = "gui" ]; then
>         l="hbmainwin"
>     elif [ "\${HB_MODE}" = "std" ]; then
>         l="hbmainstd"
>     fi
> so I was sure that -mwindows was used by default with mingw.

Ups, I forgot I added it. My fault. Sorry for disinformation.

But it's the problem I said. main() instead of WinMain() as application
entry point and it's inside XHGTK library.
Just simply xhgtk/source/general.c contains main() function which is
detected by MinGW linker so it ignores -mwindows switch and creates
application with main() startup entry do it's not possible to use
any code which needs WinMain() (f.e. GTWVT) with MinGW when XHGTK
is linked. It should be fixed in XHGTK library probably using some
startup/cleanup code instead of creating wrapper to hb_vmInit()/
hb_vmQuit()

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Wed Jan 21 13:34:25 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jan 21 13:35:43 2009
Subject: [Harbour] Re: Harbour MT success report
In-Reply-To: <20090121183359.GB3606@34-mo7-2.acn.waw.pl>
References: <9257026e0901200951u16f3a91l96ff246ab71fd890@mail.gmail.com>
	<9257026e0901210409q142c6815ye1f11c7c252a3278@mail.gmail.com>
	<20090121122458.GA932@34-mo7-2.acn.waw.pl>
	<9257026e0901210636s52fc42d3jb59418bb95eec961@mail.gmail.com>
	<20090121165017.GA12544@34-mo7-2.acn.waw.pl>
	<9257026e0901210911k76454d00g94ef1ae112fef880@mail.gmail.com>
	<20090121183359.GB3606@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0901211034w5337f7c7t37a5b1033347fc4a@mail.gmail.com>

On Wed, Jan 21, 2009 at 7:33 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> Just simply xhgtk/source/general.c contains main() function which is
> detected by MinGW linker so it ignores -mwindows switch and creates
> application with main() startup entry do it's not possible to use
> any code which needs WinMain() (f.e. GTWVT) with MinGW when XHGTK
> is linked. It should be fixed in XHGTK library probably using some
> startup/cleanup code instead of creating wrapper to hb_vmInit()/
> hb_vmQuit()

Many thanks for the time.

I'll forward the info to the xhgtk list.

best rergards,
Lorenzo
From info at fsgiudice.com  Wed Jan 21 13:42:08 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Jan 21 13:42:15 2009
Subject: [Harbour] THREAD STATIC var naming
In-Reply-To: <18d502870901211010v51661188j8928eeb2d02c8308@mail.gmail.com>
References: <18d502870901210818l1158838cv3e17ef296374e9b3@mail.gmail.com>	<49775230.5060700@fsgiudice.com>
	<18d502870901211010v51661188j8928eeb2d02c8308@mail.gmail.com>
Message-ID: <49776C80.9000905@fsgiudice.com>



Il 21/01/2009 19.10, Viktor Szak?ts ha scritto:
> Vars names align better visually if all prefixes are 
> of equal length (one char). It's also easier to swap 
> automatically without manual reformatting.
> 
> We have 'g_', 's_', 't_', so it's a not a really busy 
> list of prefixes, I'd prefer not to make it any more 
> verbose than necessary.
> 
Ok, just a thought. t_* it's ok.

Best regards

Francesco
From harbour.01 at syenar.hu  Wed Jan 21 13:46:24 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 21 13:46:32 2009
Subject: [Harbour] 2009-01-21 16:42 UTC+0100 Lorenzo Fiorini
In-Reply-To: <9257026e0901211024i4fbdb368p1137e241b9182f7e@mail.gmail.com>
References: <9257026e0901210758o1de90627l25a43317f0354492@mail.gmail.com>
	<18d502870901210813x78f97fb2ma8f0a0910ce61cc0@mail.gmail.com>
	<9257026e0901210858t6481565u1f6f94ad1503da64@mail.gmail.com>
	<18d502870901211015o54c35914p7dda8d326e8f5ff7@mail.gmail.com>
	<9257026e0901211024i4fbdb368p1137e241b9182f7e@mail.gmail.com>
Message-ID: <18d502870901211046v5fecfff3rd58a4d0c230ff098@mail.gmail.com>

Here's the file:http://www.syenar.hu/harbour/sample.ods

Brgds,
Viktor

On Wed, Jan 21, 2009 at 7:24 PM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com>wrote:

> On Wed, Jan 21, 2009 at 7:15 PM, Viktor Szak?ts <harbour.01@syenar.hu>
> wrote:
>
> > I've implemented native .ods output just recently.
> > No .odt yet, for docs I'm going the .pdf way. (hbhpdf
> > + libharu are very nice).
>
> I'm using hbvpdf for pdfs but I also need "editable" documents so I use
> RTFs.
>
> > Most time spent was to inspect what is absolute
> > minimum content required for an .ods file. I can
> > send you such "stripped" sample file. From this
> > point it's pretty easy to generate, one .xml file,
> > a few small helper files, and all that hbmzip-ped
> > together.
>
> Many thanks. It could be the begin of an odf lib for Harbour.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090121/3525d9c4/attachment-0001.html
From harbour.01 at syenar.hu  Wed Jan 21 15:47:22 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 21 15:47:26 2009
Subject: [Harbour] 2009-01-21 21:46 UTC+0100 Viktor Szakats
Message-ID: <18d502870901211247l7f7183bfp83137f4b66641e95@mail.gmail.com>

2009-01-21 21:46 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbhpdf/harupdf.ch
  * contrib/hbhpdf/harupdf.c
    + Added HPDF_VERSION_TEXT() function which returns the
      libharu version hbhpdf was linked against.
    - Removed #define HPDF_VERSION_TEXT with hard-wired libharu
      version.
--
Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090121/f46f5bbb/attachment.html
From rodrmigu at gmail.com  Wed Jan 21 16:19:17 2009
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Wed Jan 21 16:19:21 2009
Subject: [Harbour] Re: Harbour MT success report
In-Reply-To: <9257026e0901211034w5337f7c7t37a5b1033347fc4a@mail.gmail.com>
References: <9257026e0901200951u16f3a91l96ff246ab71fd890@mail.gmail.com>
	<9257026e0901210409q142c6815ye1f11c7c252a3278@mail.gmail.com>
	<20090121122458.GA932@34-mo7-2.acn.waw.pl>
	<9257026e0901210636s52fc42d3jb59418bb95eec961@mail.gmail.com>
	<20090121165017.GA12544@34-mo7-2.acn.waw.pl>
	<9257026e0901210911k76454d00g94ef1ae112fef880@mail.gmail.com>
	<20090121183359.GB3606@34-mo7-2.acn.waw.pl>
	<9257026e0901211034w5337f7c7t37a5b1033347fc4a@mail.gmail.com>
Message-ID: <80b05d460901211319y52e709dbm5a601795b3cacae4@mail.gmail.com>

sorry for the dummy question, how about change the main to WinMain in
the code below when running on windows?


int main( int argc, char * argv[] )
{
    if( gtk_init_check( &argc, &argv ) )
    {
        hb_cmdargInit( argc, argv );
        hb_vmInit( TRUE );
        xhgtk_clean_items();
        hb_vmQuit();
    }
    else
        fprintf( stderr, "%s\n", "GTK+ Initilization Error" );

    return 0;
}

Regards,
Rodrigo

On Wed, Jan 21, 2009 at 4:34 PM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com> wrote:
> On Wed, Jan 21, 2009 at 7:33 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:
>
>> Just simply xhgtk/source/general.c contains main() function which is
>> detected by MinGW linker so it ignores -mwindows switch and creates
>> application with main() startup entry do it's not possible to use
>> any code which needs WinMain() (f.e. GTWVT) with MinGW when XHGTK
>> is linked. It should be fixed in XHGTK library probably using some
>> startup/cleanup code instead of creating wrapper to hb_vmInit()/
>> hb_vmQuit()
>
> Many thanks for the time.
>
> I'll forward the info to the xhgtk list.
>
> best rergards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From lorenzo.fiorini at gmail.com  Wed Jan 21 17:11:11 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jan 21 17:11:15 2009
Subject: [Harbour] Re: Harbour MT success report
In-Reply-To: <80b05d460901211319y52e709dbm5a601795b3cacae4@mail.gmail.com>
References: <9257026e0901200951u16f3a91l96ff246ab71fd890@mail.gmail.com>
	<9257026e0901210409q142c6815ye1f11c7c252a3278@mail.gmail.com>
	<20090121122458.GA932@34-mo7-2.acn.waw.pl>
	<9257026e0901210636s52fc42d3jb59418bb95eec961@mail.gmail.com>
	<20090121165017.GA12544@34-mo7-2.acn.waw.pl>
	<9257026e0901210911k76454d00g94ef1ae112fef880@mail.gmail.com>
	<20090121183359.GB3606@34-mo7-2.acn.waw.pl>
	<9257026e0901211034w5337f7c7t37a5b1033347fc4a@mail.gmail.com>
	<80b05d460901211319y52e709dbm5a601795b3cacae4@mail.gmail.com>
Message-ID: <9257026e0901211411o403d7ec1kc7f194e97d5e7a1b@mail.gmail.com>

On Wed, Jan 21, 2009 at 10:19 PM, Rodrigo Miguel <rodrmigu@gmail.com> wrote:

> sorry for the dummy question, how about change the main to WinMain in
> the code below when running on windows?

I've tried but I get a gpf at the app start.

best regards,
Lorenzo
From info at fsgiudice.com  Wed Jan 21 19:10:07 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Jan 21 19:10:16 2009
Subject: [Harbour] 2009-01-22 01:08 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
Message-ID: <4977B95F.7080607@fsgiudice.com>

2009-01-22 01:08 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   * harbour/contrib/examples/uhttpd/uhttpd.prg
      + Added support for ini file (default: uhttpd.ini)
      + modified to add support to Lib GD on batch request
      * changed THREAD STATIC names with t_ prefix
      * changed all global STATIC names with s_ prefix
      - removed C level function EXE_FULLNAME (hb_argv( 0 ) does same)
   * harbour/contrib/examples/uhttpd/hbmk_b32.bat
     + now support LIBGD on request
   * harbour/contrib/examples/uhttpd/readme.txt
     * updated infos
   + harbour/contrib/examples/uhttpd/uhttpd.ini
     + Added default ini file
       if not found are used internal defaults or command line flags
   * harbour/contrib/examples/uhttpd/home/counter.html
     * Fixed typo
     ; NOTE:
       Hope that will follow multiplatform version.


Best regards,

Francesco
From info at fsgiudice.com  Wed Jan 21 19:15:01 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Jan 21 19:15:08 2009
Subject: [Harbour] 2009-01-19 23:39 UTC+0100
	Francesco	Saverio	Giudice(info/at/fsgiudice.com)
In-Reply-To: <497745E5.9020700@fsgiudice.com>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501CB2AE7@PINK.zycie.pzu>
	<497745E5.9020700@fsgiudice.com>
Message-ID: <4977BA85.7050102@fsgiudice.com>

Hi Marek,

Il 21/01/2009 16.57, Francesco Saverio Giudice ha scritto:
> Il 21/01/2009 16.10, Horodyski Marek (PZUZ) ha scritto:
>> Where from can we get bgd.dll ?

now it possible to build without libgd support.
Use hbmk_b32.bat --without-gd
Obviously will not work ajax counter sample that requires it.

Any comments are welcome.

Best regards

Francesco
From info at fsgiudice.com  Wed Jan 21 19:18:41 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Jan 21 19:18:47 2009
Subject: [Harbour] SVN $id issue
Message-ID: <4977BB61.2050902@fsgiudice.com>

Hi folks,

I'm experience a problem with
/*
  * $Id: rlcdx.prg 9754 2008-10-27 22:40:04Z vszakats $
  */
macro: any file I update still maintains first macro version (above 
comes from uhttpd.prg).
Is it a normal behavior ?

Best regards,

Francesco
From harbour.01 at syenar.hu  Wed Jan 21 19:29:33 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 21 19:29:37 2009
Subject: [Harbour] SVN $id issue
In-Reply-To: <4977BB61.2050902@fsgiudice.com>
References: <4977BB61.2050902@fsgiudice.com>
Message-ID: <18d502870901211629m31d38e58v64a1645696052df8@mail.gmail.com>

You have to use these command to set the file properties after 'svn add'-ing
them:
.bat/.cmd:
svn propset svn:keywords "Author Date Id Revision" %*
svn propset svn:eol-style CRLF %*

.sh:
svn propset svn:keywords "Author Date Id Revision" %*
svn propset svn:eol-style LF %*
svn propset svn:executable ON %*

other text files (.prg, .ch, .c, .h, .txt, ...):
svn propset svn:keywords "Author Date Id Revision" %*
svn propset svn:eol-style native %*

('%*' is the filenames, I've copied these out from my
svn adder batch files)

Brgds,
Viktor

On Thu, Jan 22, 2009 at 1:18 AM, Francesco Saverio Giudice <
info@fsgiudice.com> wrote:

> Hi folks,
>
> I'm experience a problem with
> /*
>  * $Id: rlcdx.prg 9754 2008-10-27 22:40:04Z vszakats $
>  */
> macro: any file I update still maintains first macro version (above comes
> from uhttpd.prg).
> Is it a normal behavior ?
>
> Best regards,
>
> Francesco
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090122/4f2703e5/attachment.html
From info at fsgiudice.com  Wed Jan 21 19:48:08 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Jan 21 19:48:15 2009
Subject: [Harbour] SVN $id issue
In-Reply-To: <18d502870901211629m31d38e58v64a1645696052df8@mail.gmail.com>
References: <4977BB61.2050902@fsgiudice.com>
	<18d502870901211629m31d38e58v64a1645696052df8@mail.gmail.com>
Message-ID: <4977C248.3040605@fsgiudice.com>

Hi Viktor,

Il 22/01/2009 1.29, Viktor Szak?ts ha scritto:
> You have to use these command to set the file 
> properties after 'svn add'-ing them:
> 
thank you. Really I'm using TortoiseSVN, but I think that I have found 
where to apply your suggestions.

Best regards,

Francesco

From philb at philb.us  Wed Jan 21 21:13:05 2009
From: philb at philb.us (Phil Barnett)
Date: Wed Jan 21 21:13:11 2009
Subject: [Harbour] Fwd: SF.net SVN: harbour-project:[10057]
	trunk/harbour/ChangeLog
In-Reply-To: <18d502870901210043t38aae244x9a88f57b9fced79@mail.gmail.com>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>	<49708C44.9040307@dbtopas.lt>	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>	<4970A8AD.5060207@dbtopas.lt>
	<4976AD2E.5070303@philb.us>
	<18d502870901210043t38aae244x9a88f57b9fced79@mail.gmail.com>
Message-ID: <4977D631.6000205@philb.us>

Viktor Szak?ts wrote:
> IMO this is a developer list so such mails are expected, 
> if we split the lists into two, it will be complicated (and error 
> prone) to simply reply to those commit e-mails (this is 
> very useful and also common practice), which kind of 
> defeats the purpose, as the manual ChangeLog e-mails 
> would still have to be created to keep this list informed.
I guess that I don't understand the reason you would reply to a read 
only list, but I'm willing to listen .

How about this:

1. Create svn@harbour-project.org
2. Set the reply-to on that list to this list.
3. You build a filter in your email client to combine the two lists into 
one mailbox.

I think that would satisfy everyone.

From druzus at acn.waw.pl  Wed Jan 21 22:38:12 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 21 22:34:16 2009
Subject: [Harbour] Re: Harbour MT success report
In-Reply-To: <80b05d460901211319y52e709dbm5a601795b3cacae4@mail.gmail.com>
References: <9257026e0901200951u16f3a91l96ff246ab71fd890@mail.gmail.com>
	<9257026e0901210409q142c6815ye1f11c7c252a3278@mail.gmail.com>
	<20090121122458.GA932@34-mo7-2.acn.waw.pl>
	<9257026e0901210636s52fc42d3jb59418bb95eec961@mail.gmail.com>
	<20090121165017.GA12544@34-mo7-2.acn.waw.pl>
	<9257026e0901210911k76454d00g94ef1ae112fef880@mail.gmail.com>
	<20090121183359.GB3606@34-mo7-2.acn.waw.pl>
	<9257026e0901211034w5337f7c7t37a5b1033347fc4a@mail.gmail.com>
	<80b05d460901211319y52e709dbm5a601795b3cacae4@mail.gmail.com>
Message-ID: <20090122033812.GA1339@34-mo7-2.acn.waw.pl>

On Wed, 21 Jan 2009, Rodrigo Miguel wrote:

Hi Rodrigo,

> sorry for the dummy question, how about change the main to WinMain in
> the code below when running on windows?

It will be necessary to replicate all Harbour operations coded in
source/vm/mainwin.c and include/hbwmain.c.
I'd rather suggest to make it less intrusive which will not force
updating XHGTK code when sth will be changed in core [x]Harbour
initialization code and use startup initialization to register
hb_vmAtInit()/hb_vmAtExit() functions.
I've just committed such modification to XHGTK SVN repository.
   2009-01-22 04:11 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
Please make tests on different platforms.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Jan 22 01:13:59 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Jan 22 01:14:04 2009
Subject: [Harbour] Fwd: SF.net SVN: harbour-project:[10057] 
	trunk/harbour/ChangeLog
In-Reply-To: <4977D631.6000205@philb.us>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>
	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>
	<49708C44.9040307@dbtopas.lt>
	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>
	<4970A8AD.5060207@dbtopas.lt> <4976AD2E.5070303@philb.us>
	<18d502870901210043t38aae244x9a88f57b9fced79@mail.gmail.com>
	<4977D631.6000205@philb.us>
Message-ID: <18d502870901212213t4ab8a60bj91befcc2d8f7cb9@mail.gmail.com>

>
> IMO this is a developer list so such mails are expected, if we split the
>> lists into two, it will be complicated (and error prone) to simply reply to
>> those commit e-mails (this is very useful and also common practice), which
>> kind of defeats the purpose, as the manual ChangeLog e-mails would still
>> have to be created to keep this list informed.
>>
> I guess that I don't understand the reason you would reply to a read only
> list, but I'm willing to listen .


The point is to make ChangeLog e-mails
automatic. Currently, the manual ChangeLog
e-mails are being regularly replied to on this
very list. I think we shouldn't lose this "feature",
even after moving to automated ChangeLog
(aka commit) mails.


> How about this:
>
> 1. Create svn@harbour-project.org
> 2. Set the reply-to on that list to this list.
> 3. You build a filter in your email client to combine the two lists into
> one mailbox.


> I think that would satisfy everyone.


Not very good. Since you _must_ subscribe to and
monitor yet another list, even if you just want to be
informed about the changes, just like before.

What is the problem with my proposal?

Let's make it even more simple:
- Add svn@harbour-project.org to current list,
- I'll setup the commit notifications, to be brief (no diffs).

This basically replaces the current manual ChangeLog
mails with similar brief content, same amount of mail,
at tha same time it saves every committer to manually
send mails, and no subscriber has to do anything for
it to work.

[ I've already subscribed myself to full-diff mails,
so I personally don't care if the full-diffs appear here
also. But I have to tell, it's extremely useful, and it
saves me lots of minutes for every commit done to
the Harbour SVN (even if it's mine). ]

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090122/8adb75d5/attachment.html
From lorenzo.fiorini at gmail.com  Thu Jan 22 03:32:31 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Jan 22 03:32:35 2009
Subject: [Harbour] Re: Harbour MT success report
In-Reply-To: <20090122033812.GA1339@34-mo7-2.acn.waw.pl>
References: <9257026e0901200951u16f3a91l96ff246ab71fd890@mail.gmail.com>
	<9257026e0901210409q142c6815ye1f11c7c252a3278@mail.gmail.com>
	<20090121122458.GA932@34-mo7-2.acn.waw.pl>
	<9257026e0901210636s52fc42d3jb59418bb95eec961@mail.gmail.com>
	<20090121165017.GA12544@34-mo7-2.acn.waw.pl>
	<9257026e0901210911k76454d00g94ef1ae112fef880@mail.gmail.com>
	<20090121183359.GB3606@34-mo7-2.acn.waw.pl>
	<9257026e0901211034w5337f7c7t37a5b1033347fc4a@mail.gmail.com>
	<80b05d460901211319y52e709dbm5a601795b3cacae4@mail.gmail.com>
	<20090122033812.GA1339@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0901220032n38fda83etf04d676e960d84c6@mail.gmail.com>

On Thu, Jan 22, 2009 at 4:38 AM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> I've just committed such modification to XHGTK SVN repository.
>   2009-01-22 04:11 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> Please make tests on different platforms.

Many thanks, under Win it works perfectly.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Thu Jan 22 03:33:23 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Jan 22 03:33:27 2009
Subject: [Harbour] 2009-01-22 09:30 UTC+0100 Lorenzo Fiorini
Message-ID: <9257026e0901220033l64a6f714ia2fbea38e63ba711@mail.gmail.com>

2009-01-22 09:30 UTC+0100 Lorenzo Fiorini (lorenzo.fiorini/at/gmail.com)
  * bin/hb-mkslib.sh
    * fix name of dylibs
  * source/compiler/hbgenerr.c
    * cleaned some ":" in the error messages

best regards,
Lorenzo
From M.Horodyski at pzuzycie.com.pl  Thu Jan 22 04:15:06 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu Jan 22 04:15:11 2009
Subject: [Harbour] 2009-01-19 23:39 UTC+0100
	FrancescoSaverio	Giudice(info/at/fsgiudice.com)
In-Reply-To: <497745E5.9020700@fsgiudice.com>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501CB2BBE@PINK.zycie.pzu>

>-----Original Message-----
>Subject: Re: [Harbour] 2009-01-19 23:39 UTC+0100 
>FrancescoSaverio Giudice(info/at/fsgiudice.com)

Hi Francesco,

>> Where from can we get bgd.dll ?
>> On http://www.libgd.org/Downloads are sources ( we need binaries).
>
>libgd.org is a little cryptic with links. Correct link to 
>releases is in main page under "news". Anyway the link is:
>
>http://www.libgd.org/releases/gd-latest-win32.zip

Here is bgd.lib. Can I use it istead bhd.dll ?
Can I link it with Watcom ?

Regards,
Marek Horodyski
From lorenzo.fiorini at gmail.com  Thu Jan 22 04:22:28 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Jan 22 04:22:33 2009
Subject: [Harbour] 2009-01-22 10:15 UTC+0100 Lorenzo Fiorini
Message-ID: <9257026e0901220122y17f56e0fhdec87bcd8812d05b@mail.gmail.com>

2009-01-22 10:15 UTC+0100 Lorenzo Fiorini (lorenzo.fiorini/at/gmail.com)
  * bin/hb-func.sh
    * fix darwin detection
  * make_gnu.sh
    * fix darwin detection
	 * added ncurses detection logic like slang one
  * contrib/hbtip/ftpcln.prg
    * fixed wrong changes from nil to .f.
	 * someone in the past has done a mass change of the return values
	 * without checking the results

I think that in make_gnu.sh HB_COMMERCE default should be "yes".
If someone want to accept slang or gpm licenses they have to add
HB_COMMERCE="no".

best regards,
Lorenzo
From M.Horodyski at pzuzycie.com.pl  Thu Jan 22 04:39:50 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu Jan 22 04:39:54 2009
Subject: [Harbour] 2009-01-19 23:39
	UTC+0100Francesco	Saverio	Giudice(info/at/fsgiudice.com)
In-Reply-To: <4977BA85.7050102@fsgiudice.com>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501CB2BD7@PINK.zycie.pzu>

>-----Original Message-----
>From: Francesco Saverio Giudice [mailto:info@fsgiudice.com] 
...

>> Il 21/01/2009 16.10, Horodyski Marek (PZUZ) ha scritto:
>>> Where from can we get bgd.dll ?
>
>now it possible to build without libgd support.
>Use hbmk_b32.bat --without-gd
>Obviously will not work ajax counter sample that requires it.
>
>Any comments are welcome.

Please give me some time (but Ajax I also wanted to use).

Regards,
Marek Horodyski
From info at fsgiudice.com  Thu Jan 22 05:04:38 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Thu Jan 22 05:04:46 2009
Subject: [Harbour] 2009-01-19
	23:39	UTC+0100Francesco	Saverio	Giudice(info/at/fsgiudice.com)
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501CB2BD7@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501CB2BD7@PINK.zycie.pzu>
Message-ID: <497844B6.1040903@fsgiudice.com>

Hi Marek,

Il 22/01/2009 10.39, Horodyski Marek (PZUZ) ha scritto:
> 
> Please give me some time (but Ajax I also wanted to use).
> 
You find two other Ajax examples, without gd only counter sample don't work.

Best regards,

Francesco

From harbour.01 at syenar.hu  Thu Jan 22 07:14:09 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Jan 22 07:14:18 2009
Subject: [Harbour] 2009-01-22 10:15 UTC+0100 Lorenzo Fiorini
In-Reply-To: <9257026e0901220122y17f56e0fhdec87bcd8812d05b@mail.gmail.com>
References: <9257026e0901220122y17f56e0fhdec87bcd8812d05b@mail.gmail.com>
Message-ID: <18d502870901220414g298b8bf1ie64af6971339dd5d@mail.gmail.com>

Hi Lorenzo,


> 2009-01-22 10:15 UTC+0100 Lorenzo Fiorini (lorenzo.fiorini/at/gmail.com)
>  * bin/hb-func.sh
>    * fix darwin detection
>  * make_gnu.sh
>    * fix darwin detection


I've once did that but it turned out to be unnecessary,
as 'uname' always returns 'darwin' and never '<something> darwin',
so the extra match is just superfluous. For bsd it's needed
because 'netbsd' and 'openbsd' can be the name, for dos it
can be 'dr-dos', 'ms-dos', 'pc-dos'. You get the idea.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090122/4738a0e0/attachment.html
From M.Horodyski at pzuzycie.com.pl  Thu Jan 22 11:11:05 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu Jan 22 11:11:11 2009
Subject: [Harbour] 2009-01-19 23:39
	UTC+0100Francesco	Saverio	Giudice(info/at/fsgiudice.com)
In-Reply-To: <4977BA85.7050102@fsgiudice.com>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501CB2DB2@PINK.zycie.pzu>

>-----Original Message-----
>From: Francesco Saverio Giudice [mailto:info@fsgiudice.com] 
>Sent: Thursday, January 22, 2009 1:15 AM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] 2009-01-19 23:39 UTC+0100Francesco 
>Saverio Giudice(info/at/fsgiudice.com)
>
>Hi Marek,
>
>Il 21/01/2009 16.57, Francesco Saverio Giudice ha scritto:
>> Il 21/01/2009 16.10, Horodyski Marek (PZUZ) ha scritto:
>>> Where from can we get bgd.dll ?
>
>now it possible to build without libgd support.
>Use hbmk_b32.bat --without-gd

In harbour-nightly (1).zip this file (hbmk_b32.bat) is without "--without-gd"

My new files :
               Name                ?  Size   ?  Date  ?Time ?
..                                 ?<UP--DIR>?22-01-09?16:35?
gd-latest-win32 (1)             zip?   583356?22-01-09?16:35?
harbour-nightly (1)             zip?  9103698?22-01-09?16:00?


I try build with OW, but without succes :

c:\harbour\contrib\examples\uhttpd>hbmk uhttpd
uhttpd.c(6718): Warning! W013: col(18) unreachable code
Open Watcom Linker Version 1.7
Portions Copyright (c) 1985-2002 Sybase, Inc. All Rights Reserved.
Source code is available under the Sybase Open Watcom Public License.
See http://www.openwatcom.org/ for details.
loading object files
searching libraries
Error! E2028: HB_FUN_WIN_SYSREFRESH_ is an undefined reference
Error! E2028: HB_FUN_HB_SPRINTF_ is an undefined reference
Error! E2028: HB_FUN_WIN_TIMEZONEBIAS_ is an undefined reference
Error! E2028: HB_FUN_WIN_SETENV_ is an undefined reference
Error! E2028: HB_FUN_EXE_FULLPATH_ is an undefined reference
Error! E2028: HB_FUN_HB_TOOUTDEBUG_ is an undefined reference
Error! E2028: HB_FUN_GDIMAGE_ is an undefined reference
Error! E2028: HB_FUN_GDIMAGECHAR_ is an undefined reference
Error! E2028: HB_FUN_GDCHART_ is an undefined reference
creating a Windows NT character-mode executable
file uhttpd.obj(c:\harbour\contrib\examples\uhttpd\uhttpd.c): undefined symbol HB_FUN_WIN_SYSREFRESH_
file uhttpd.obj(c:\harbour\contrib\examples\uhttpd\uhttpd.c): undefined symbol HB_FUN_HB_SPRINTF_
file uhttpd.obj(c:\harbour\contrib\examples\uhttpd\uhttpd.c): undefined symbol HB_FUN_WIN_TIMEZONEBIAS_
file uhttpd.obj(c:\harbour\contrib\examples\uhttpd\uhttpd.c): undefined symbol HB_FUN_WIN_SETENV_
file uhttpd.obj(c:\harbour\contrib\examples\uhttpd\uhttpd.c): undefined symbol HB_FUN_EXE_FULLPATH_
file uhttpd.obj(c:\harbour\contrib\examples\uhttpd\uhttpd.c): undefined symbol HB_FUN_HB_TOOUTDEBUG_
file uhttpd.obj(c:\harbour\contrib\examples\uhttpd\uhttpd.c): undefined symbol HB_FUN_GDIMAGE_
file uhttpd.obj(c:\harbour\contrib\examples\uhttpd\uhttpd.c): undefined symbol HB_FUN_GDIMAGECHAR_
file uhttpd.obj(c:\harbour\contrib\examples\uhttpd\uhttpd.c): undefined symbol HB_FUN_GDCHART_

I try tomoorow, with new harbour-nightly.zip file.

Regards,
Marek Horodyski
From dbtopas at dbtopas.lt  Thu Jan 22 11:35:38 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Jan 22 11:35:38 2009
Subject: [Harbour] ChangeLog 2009-01-22 18:20 UTC+0200 Mindaugas Kavaliauskas
Message-ID: <4978A05A.4060001@dbtopas.lt>

2009-01-22 18:20 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * harbour/source/compiler/hbmain.c
   * harbour/source/pp/hbpp.c
   * harbour/source/pp/ppcore.c
     + added __FILE__ define for .prg code
     ; Please, look if this is implemented the right and optimal way.
       I'm a little confused about PP initialization order, and how
       __DATE__, etc, survive after hb_pp_reset in compiler.
From roberbox at gmail.com  Thu Jan 22 14:41:02 2009
From: roberbox at gmail.com (Roberto Lopez)
Date: Thu Jan 22 13:41:16 2009
Subject: [Harbour] Question about HBPP (possible bug?)
Message-ID: <4978CBCE.4020501@gmail.com>

Hi All,

I'm trying to create a preprocessor directive to generate HTML code as 
follows:

#command END SCRIPT => \</SCRIPT>

The code generated adds a space between the less than operator and the 
slash, resulting in the following:

< /SCRIPT>

Sadly, the additional space impedes the correct page rendering on IE and 
FireFox.

I've made the test with HBPP.EXE bundled with 1.01 binaries (Mingw).

Is this a bug, is this a normal behavior or must I use a different syntax?

Thanks in advance.

Regards,

Roberto.

From philb at philb.us  Thu Jan 22 20:27:55 2009
From: philb at philb.us (Phil Barnett)
Date: Thu Jan 22 20:28:02 2009
Subject: [Harbour] Fwd: SF.net SVN: harbour-project:[10057]
	trunk/harbour/ChangeLog
In-Reply-To: <18d502870901212213t4ab8a60bj91befcc2d8f7cb9@mail.gmail.com>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>	<49708C44.9040307@dbtopas.lt>	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>	<4970A8AD.5060207@dbtopas.lt>
	<4976AD2E.5070303@philb.us>	<18d502870901210043t38aae244x9a88f57b9fced79@mail.gmail.com>	<4977D631.6000205@philb.us>
	<18d502870901212213t4ab8a60bj91befcc2d8f7cb9@mail.gmail.com>
Message-ID: <49791D1B.7050500@philb.us>

Viktor Szak?ts wrote:
>
> Not very good. Since you _must_ subscribe to and 
> monitor yet another list, even if you just want to be 
> informed about the changes, just like before.
>
> What is the problem with my proposal?
You are creating a feed to the mail system that there is no way to opt 
out of, thus giving regular subscribers no way to reduce their mail 
burden. Sure you can filter i away, but only after you have downloaded 
it. And it's going to have a size limit of 150k. That's a lot of 
downloading just to throw it away.

What I am proposing is an opt in system. You only have to join it once, 
it lasts indefinitely. You create a filter to put it in the correct 
mailbox, that lasts indefinitely. This is a very minor burden to give 
choice to others before the mail download instead of after the mail 
download.

Your method reduces choice and increases mail burden. People with modems 
do care about this stuff. I believe in efficiency whenever I can get it. 
Choice is good when it's not excessive and burdensome, which this is 
not. Subscribe once, add one rule and you get exactly what you want.
From sscc at mweb.co.za  Fri Jan 23 03:27:57 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Jan 23 03:28:09 2009
Subject: [Harbour] Class questions
In-Reply-To: <20090119152151.GA16933@34-mo7-2.acn.waw.pl>
References: <497487D7.5010804@mweb.co.za>
	<20090119152151.GA16933@34-mo7-2.acn.waw.pl>
Message-ID: <49797F8D.6090908@mweb.co.za>

Hi Przemyslaw

I downloaded Class(y) and read the docs. Thank you for your (as usual) 
detailed reply, I am now considerably more educated. Class(y) seemed 
to be really on the cutting edge back then, the folks at CA really 
blew Clipper out of the water.

FWIW I would be in favour of the breaking change to disambiguate new() 
and init().

Thanks and regards
Alex
From lorenzo.fiorini at gmail.com  Fri Jan 23 04:08:25 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jan 23 04:08:29 2009
Subject: [Harbour] Class questions
In-Reply-To: <20090119152151.GA16933@34-mo7-2.acn.waw.pl>
References: <497487D7.5010804@mweb.co.za>
	<20090119152151.GA16933@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0901230108s52dc6554s26e4a1a6fb9f1c90@mail.gmail.com>

On Mon, Jan 19, 2009 at 4:21 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> In Class(y) code class function should return "class object" not object
> of given class. This class object understands :NEW() message and create
> object of given class sending to this object :INIT() message with
> parameters passed to :NEW(). Neither Harbour nor xHarbour have real
> class object support and class functions always return object of given
> class and both NEW() and INIT() are messages of this object. The default
> implementation of :NEW() inherited from HBOBJECT class simply calls :INIT()
> method.
> I wanted to add real class object support to Harbour but I do not know
> if it's still possible. People already created a lot of code which does
> not use :new() at all so it will be serious backward compatibility problem.
> It's a classic example of problems created by unfinished code added to
> official repository which later cannot be easy finished or fixed.
> Probably now the only one way to resolve this problem is creating new
> hbclass.ch and leaving the old one for backward compatibility. Maybe
> I or someone else will make it in the future. Code which calls NEW()
> should work with both versions.

If it is only a compatibility issue I think it should be be fixed asap.
The two headers approach is perfect.
Also in the new header I'll keep only the Class(y) "interface".
It is the only interface that have a usable documentation.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Fri Jan 23 04:22:26 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Jan 23 04:22:33 2009
Subject: [Harbour] Fwd: SF.net SVN: harbour-project:[10057] 
	trunk/harbour/ChangeLog
In-Reply-To: <49791D1B.7050500@philb.us>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>
	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>
	<49708C44.9040307@dbtopas.lt>
	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>
	<4970A8AD.5060207@dbtopas.lt> <4976AD2E.5070303@philb.us>
	<18d502870901210043t38aae244x9a88f57b9fced79@mail.gmail.com>
	<4977D631.6000205@philb.us>
	<18d502870901212213t4ab8a60bj91befcc2d8f7cb9@mail.gmail.com>
	<49791D1B.7050500@philb.us>
Message-ID: <18d502870901230122k1b9fbd82nd858a96691d4f3ae@mail.gmail.com>

Hi Phil,


> What is the problem with my proposal?
>>
> You are creating a feed to the mail system that there is no way to opt out
> of, thus giving regular subscribers no way to reduce their mail burden. Sure
> you can filter i away, but only after you have downloaded it. And it's going
> to have a size limit of 150k. That's a lot of downloading just to throw it
> away.


Wrong. The commit mails without diffs are just as small as current
ChangeLog
e-mails. Same thing. No need to raise size limits. Same amount of mails.
It _replaces_ current ChangeLog e-mails, so total number of received mails
are _unchanged_.

What I am proposing is an opt in system. You only have to join it once, it
> lasts indefinitely. You create a filter to put it in the correct mailbox,
> that lasts indefinitely. This is a very minor burden to give choice to
> others before the mail download instead of after the mail download.
>
> Your method reduces choice and increases mail burden. People with modems do
> care about this stuff. I believe in efficiency whenever I can get it. Choice
> is good when it's not excessive and burdensome, which this is not. Subscribe
> once, add one rule and you get exactly what you want.


Sorry to say, but I think you've totally misunderstood me.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090123/5f1a1805/attachment.html
From vailtom at gmail.com  Fri Jan 23 07:54:50 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Fri Jan 23 07:54:54 2009
Subject: [Harbour] To Przemyslaw Czerpak about USRRDD
Message-ID: <531d7a750901230454k4887b978hf2e05bcd70f2ac5c@mail.gmail.com>

Hi Przemyslaw!

I'm converting an RDD written in C to work under the USRRDD. Some
functions such as GOTO / TOP / BOTTOM, SKIP SEEK and were written in C
that I would like to take advantage of them in this conversion and for
this I need to pass them directly to the function
USRRDD_GETFUNCTABLE().

I need to obtain the value of USRRDD_AREADATA() calling the macro
SELF_USRDATA(pArea), but I had difficulties to assemble something
equivalent in another module C. .. And as these routines may change as
the evolution of the product I would propose the creation of a
function to access this value as:

PHB_ITEM hb_usrAreaData (int NWA, PHB_ITEM pNewValue)
(
    Areais pArea = hb_usrGetAreaPointer (hb_parni (1));

    if (pArea & & pArea-> rddID <s_uiUsrNodes & & SELF_USRNODE (pArea))
    (
       PHB_ITEM pItem = SELF_USRDATA (pArea) -> pItem;

       if (pNewValue)
       (
          hb_itemCopy (pItem, pNewValue);
       )
       return pItem;
    )
    return NULL;
)

This will certainly facilitate access and maintenance of this value
directly via C and would be something really faster. You have any
other suggestions or the way would be this?

Best regards,
Vailton
From capelsoft at terra.es  Fri Jan 23 10:57:53 2009
From: capelsoft at terra.es (=?iso-8859-1?Q?Jos=E9_Luis_Capel?=)
Date: Fri Jan 23 10:57:59 2009
Subject: [Harbour] Question about HB_VM_STARTUP 
Message-ID: <33323CF7E11F4B388C47CF1647402193@PEPELUIS3>

Hi all,

What is the main pourpose of this define ?

Thnks and regrds,
Jos? Luis Capel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090123/94c0d4ce/attachment.html
From dbtopas at dbtopas.lt  Fri Jan 23 12:28:35 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Jan 23 12:28:37 2009
Subject: [Harbour] 2008-11-01 21:13 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20081128213258.GA20608@34-mo7-2.acn.waw.pl>
References: <E026792F-67F0-415C-BB19-95277B4CFA92@syenar.hu>	<20081105201105.GA26241@34-mo7-2.acn.waw.pl>	<4912E7C2.6010801@dbtopas.lt>	<10B32C8C-926E-455F-BD36-0F8236EBCBDA@syenar.hu>	<491315D1.7030303@dbtopas.lt>	<6B0D3378-AB28-4273-B24E-CD3D321FDD30@syenar.hu>	<20081106172214.GA9967@34-mo7-2.acn.waw.pl>	<492D46FA.9010808@dbtopas.lt>	<20081127155323.GA25089@34-mo7-2.acn.waw.pl>	<493008E0.9020503@dbtopas.lt>
	<20081128213258.GA20608@34-mo7-2.acn.waw.pl>
Message-ID: <4979FE43.1060409@dbtopas.lt>

Przemyslaw Czerpak wrote:
>>> 5. For easy use it's necessary to have in core code function which will
>>>    work like printf(). Otherwise it will be hard to create strings for
>>>    translations which are not context dependent.
>>>    Such function should be in base escape characters like %s or %d
>>>    compatible with C so we can use dedicated tools to operate on .pot
>>>    files. Anyhow for better flexibility we should add support for stringify
>>>    and format any item size. F.e. %s should also work for numeric, date and
>>>    logical items. In general it should be possible to create formatting
>>>    similar to the one given by transform and picture clasue.    We can add 
>>> support for passing picture clase directly in formatted
>>>    string or as parameter. We can also add some additional extensions.
>>>    The function name is less important. We can call it hb_strFormat().
>>>    It's time to implement it.
>> Yes. We need it. The problem is, if we had to be C compatible, or we need 
>> to to implement our own Harbour specific type specifiers.
>> A simple implementation could be:
>>   %d = LTRIM(STR(nValue)) or LTRIM(STR(ROUND(nValue, 0))) ???
>>   %s = cValue or TRIM(cValue) ???
>> but we will always want some new extensions. I still can not make agreement 
>> with myself what specifiers should be. Do you have some ideas about it?
>> From i18n point of view a very important thing is %1$d extension. It is not 
>> related to speficier type problem, so I we need to implement it for sure.
> 
> Just like you I still cannot take final decision.
> For use parameter indexing is a must.

Hi,


I've wrote some basic version of the function.

Implemented:
   - specifiers: c (char), s (string), d (decimal), f (float);
   - flags: - (left align), + (print + sign), space (print space sign), 
0 (zero padding);
   - width;
   - decimals;
   - parameter numbers;

% [<param>$] [+|-|space|0] [<width>][.<dec>][c|s|d|f]

The goal was to be C compatible, i.e.:
   - do not print STR() style '*' for to short width numbers;
   - do not convert types (see below, for exceptions).

Harbour has different types than C, and full C compatibility is 
impossible, or function behaviour will look weird, without any adaption 
to Harbour. So, I've made a few small exceptions/extensions to strict C 
compatible implementation:
   - %d allows to take LOGICAL parameter type, and function prints "1" 
and "0", for .T. and .F.. In C true/false is represented by integer 
values (of some width) 1 and 0, so, introducing this extension for 
LOGICAL type, I feel more C compatible.
   - %f In C language %f uses 6 decimal places, but harbour has 
<decimal> format inside numeric item, so, I've used this value for 
default. Without this, we will need to show explicit <decimal> format 
for many things like FIELD values, to get result we usually expect. 
However, I've not used default default value for <width>, because nature 
of sprintf() is to print numbers without left padding, using default 
<width> will do most numeric print left padded and very incompatible to C.

For discussion: I've implemented character %c printing using numeric 
values (in C char type is numeric type), but it is common in Harbour to 
represent character as strings on length 1. Maybe, we should extend %c, 
to accept string type and use first character of string.

For discussion: what function name should be used? Since the goal is to 
be C compatible, I guess HB_SPRINTF() is better than HB_STRFORMAT().


Best regards,
Mindaugas


Source
======
#include <ctype.h>
#include "hbapi.h"
#include "hbapiitm.h"
#include "hbapierr.h"


typedef struct
{
    char*   pData;
    ULONG   ulLen;
    ULONG   ulMax;
} BUFFERTYPE;


static void bufadd( BUFFERTYPE* pBuf, char* pAdd, ULONG ulLen )
{
    if( pBuf->ulLen + ulLen >= pBuf->ulMax )
    {
       pBuf->ulMax += pBuf->ulMax >> 1 + ulLen;
       pBuf->pData = ( char* ) hb_xrealloc( pBuf->pData, pBuf->ulMax );
    }
    memcpy( pBuf->pData + pBuf->ulLen, pAdd, ulLen );
    pBuf->ulLen += ulLen;
    pBuf->pData[ pBuf->ulLen ] = '\0';
}


PHB_ITEM hb_sprintf( PHB_ITEM pItemReturn, PHB_ITEM pItemFormat, int 
iCount, PHB_ITEM* pItemArray )
{
    BUFFERTYPE  buffer;
    PHB_ITEM    pItem;
    char        *pFmt, *pFmtEnd, *pFmtSave;
    int         i, iParam, iParamNo, iWidth, iDec;
    ULONG       ulSize;
    BOOL        fLeftAlign, fForceSign, fPadZero, fSpaceSign;

    pFmt = hb_itemGetCPtr( pItemFormat );
    ulSize = hb_itemGetCLen( pItemFormat );
    pFmtEnd = pFmt + ulSize;

    buffer.ulMax = ulSize + 16;
    buffer.ulLen = 0;
    buffer.pData = ( char* ) hb_xgrab( buffer.ulMax );
    buffer.pData[ 0 ] = '\0';

    iParam = 0;
    while( pFmt < pFmtEnd )
    {
       if( *pFmt != '%' )
       {
          bufadd( &buffer, pFmt++, 1 );
          continue;
       }

       pFmtSave = pFmt;

       if( ++pFmt >= pFmtEnd )
          continue;

       if( *pFmt == '%' )
       {
          bufadd( &buffer, pFmt++, 1 );
          continue;
       }

       iWidth = iDec = -1;
       fLeftAlign = fForceSign = fPadZero = fSpaceSign = 0;

       /* parse parameter number */
       iParamNo = 0;
       while( isdigit( *pFmt ) )
       {
          iParamNo = iParamNo * 10 + *pFmt++ - '0';
       }
       if( iParamNo > 0 && *pFmt == '$' )
       {
          pFmt++;
       }
       else
       {
          iParamNo = -1;
          pFmt = pFmtSave + 1;
       }

       /* Parse flags */
       do
       {
          switch( *pFmt )
          {
             case '-':
                fLeftAlign = 1;
                continue;
             case '+':
                fForceSign = 1;
                continue;
             case ' ':
                fSpaceSign = 1;
                continue;
             case '0':
                fPadZero = 1;
                continue;
          }
          break;
       } while( * ++pFmt );

       /* Parse width */
       if( isdigit( *pFmt ) )
       {
          iWidth = 0;
          while( isdigit( *pFmt ) )
             iWidth = iWidth * 10 + *pFmt++ - '0';
       }

       /* Parse decimals */
       if( *pFmt == '.' )
       {
          pFmt++;
          iDec = 0;
          if( isdigit( *pFmt ) )
          {
             while( isdigit( *pFmt ) )
                iDec = iDec * 10 + *pFmt++ - '0';
          }
       }

       /* Parse specifier */
       if( *pFmt == 'c' || *pFmt == 'd' || *pFmt == 'f' || *pFmt == 's' )
       {
          if( iParamNo == -1 )
             iParamNo = ++iParam;

          if( iParamNo > iCount )
          {
             hb_xfree( buffer.pData );
             hb_errRT_BASE_SubstR( EG_ARG, 1099, NULL, HB_ERR_FUNCNAME, 
HB_ERR_ARGS_BASEPARAMS );
             return NULL;
          }

          pItem = pItemArray[ iParamNo - 1 ];
       }

       switch( *pFmt )
       {
          case 'c':
          {
             char    buf[ 1 ];

             buf[ 0 ] = ( char ) hb_itemGetNI( pItem );
             if( fLeftAlign )
             {
                bufadd( &buffer, buf, 1 );
             }
             if( iWidth > 1 )
             {
                for( i = 1; i < iWidth; i++ )
                   bufadd( &buffer, " ", 1 );
             }
             if( ! fLeftAlign )
             {
                bufadd( &buffer, buf, 1 );
             }
             break;
          }

          case 'd':
          {
             char      *pStr = NULL, *pStr2;
             int       iSize, iExtra;

             if( HB_IS_NUMERIC( pItem ) )
             {
                iSize = sizeof( HB_LONG ) * 3 + 1;
                pStr2 = pStr = ( char* ) hb_xgrab( iSize + 1 );
                hb_itemStrBuf( pStr, pItem, iSize, 0 );
                while( *pStr2 == ' ' )  pStr2++;
                iSize = strlen( pStr2 );
             }
             else if ( HB_IS_LOGICAL( pItem ) )
             {
                iSize = 1;
                if( hb_itemGetL( pItem ) )
                   pStr2 = "1";
                else
                   pStr2 = "0";
             }
             else
             {
                iSize = 1;
                pStr2 = "0";
             }

             iExtra = 0;
             if( ( fForceSign || fSpaceSign ) && *pStr2 != '-' )
                iExtra = 1;

             if( fLeftAlign )
             {
                /* Zero padding is ignored on left Align */
                if( *pStr2 != '-' )
                {
                   /* ForceSign has priority over SpaceSign */
                   if( fForceSign )
                      bufadd( &buffer, "+", 1 );
                   else
                   {
                      if( fSpaceSign )
                         bufadd( &buffer, " ", 1 );
                   }
                }
                bufadd( &buffer, pStr2, ( ULONG ) iSize );
                for( i = iSize + iExtra; i < iWidth; i++ )
                   bufadd( &buffer, " ", 1 );
             }
             else
             {
                /* Right align */
                if( fPadZero )
                {
                   if( *pStr2 == '-' )
                   {
                      bufadd( &buffer, pStr2++, 1 );
                   }
                   else
                   {
                      /* ForceSign has priority over SpaceSign */
                      if( fForceSign )
                         bufadd( &buffer, "+", 1 );
                      else
                      {
                         if( fSpaceSign )
                            bufadd( &buffer, " ", 1 );
                      }
                   }
                   for( i = iSize + iExtra; i < iWidth; i++ )
                      bufadd( &buffer, "0", 1 );

                   bufadd( &buffer, pStr2, strlen( pStr2 ) );
                }
                else
                {
                   for( i = iSize + iExtra; i < iWidth; i++ )
                      bufadd( &buffer, " ", 1 );

                   if( *pStr2 != '-' )
                   {
                      /* ForceSign has priority over SpaceSign */
                      if( fForceSign )
                         bufadd( &buffer, "+", 1 );
                      else
                      {
                         if( fSpaceSign )
                            bufadd( &buffer, " ", 1 );
                      }
                   }
                   bufadd( &buffer, pStr2, ( ULONG ) iSize );
                }
             }

             if( pStr )
                hb_xfree( pStr );
             break;
          }

          case 'f':
          {
             char      *pStr = NULL, *pStr2;
             int       iSize, iExtra, iD;

             if( HB_IS_NUMERIC( pItem ) )
             {
                hb_itemGetNLen( pItem, &iSize, &iD );

                if( iDec != -1 )
                {
                   iSize += iDec - iD + 1;
                   iD = iDec;
                }

                /* Let 255 be a limit for number length */
                if( iSize > 255 )
                   iSize = 255;
                if( iD > 253 )
                   iD = 253;
                if( iSize < iD + 2 )
                   iSize = iD + 2;

                pStr2 = pStr = ( char* ) hb_xgrab( iSize + 1 );
                hb_itemStrBuf( pStr, pItem, iSize, iD );

                if( pStr[ 0 ] == '*' && iSize < 255 )
                {
                   pStr2 = pStr = ( char* ) hb_xrealloc( pStr, 256 );
                   hb_itemStrBuf( pStr, pItem, 255, iD );
                }
                while( *pStr2 == ' ' )  pStr2++;
                iSize = strlen( pStr2 );
             }
             else
             {
                iSize = 1;
                pStr2 = "0";
             }

             iExtra = 0;
             if( ( fForceSign || fSpaceSign ) && *pStr2 != '-' )
                iExtra = 1;

             if( fLeftAlign )
             {
                /* Zero padding is ignored on left Align */
                if( *pStr2 != '-' )
                {
                   /* ForceSign has priority over SpaceSign */
                   if( fForceSign )
                      bufadd( &buffer, "+", 1 );
                   else
                   {
                      if( fSpaceSign )
                         bufadd( &buffer, " ", 1 );
                   }
                }
                bufadd( &buffer, pStr2, ( ULONG ) iSize );
                for( i = iSize + iExtra; i < iWidth; i++ )
                   bufadd( &buffer, " ", 1 );
             }
             else
             {
                /* Right align */
                if( fPadZero )
                {
                   if( *pStr2 == '-' )
                   {
                      bufadd( &buffer, pStr2++, 1 );
                   }
                   else
                   {
                      /* ForceSign has priority over SpaceSign */
                      if( fForceSign )
                         bufadd( &buffer, "+", 1 );
                      else
                      {
                         if( fSpaceSign )
                            bufadd( &buffer, " ", 1 );
                      }
                   }
                   for( i = iSize + iExtra; i < iWidth; i++ )
                      bufadd( &buffer, "0", 1 );

                   bufadd( &buffer, pStr2, strlen( pStr2 ) );
                }
                else
                {
                   for( i = iSize + iExtra; i < iWidth; i++ )
                      bufadd( &buffer, " ", 1 );

                   if( *pStr2 != '-' )
                   {
                      /* ForceSign has priority over SpaceSign */
                      if( fForceSign )
                         bufadd( &buffer, "+", 1 );
                      else
                      {
                         if( fSpaceSign )
                            bufadd( &buffer, " ", 1 );
                      }
                   }
                   bufadd( &buffer, pStr2, ( ULONG ) iSize );
                }
             }

             if( pStr )
                hb_xfree( pStr );
             break;
          }

          case 's':
          {
             char*   pStr = hb_itemGetCPtr( pItem );

             ulSize = hb_itemGetCLen( pItem );
             if( fLeftAlign )
             {
                bufadd( &buffer, pStr, ulSize );
             }
             if( iWidth > 1 )
             {
                for( i = (int) ulSize; i < iWidth; i++ )
                   bufadd( &buffer, " ", 1 );
             }
             if( ! fLeftAlign )
             {
                bufadd( &buffer, pStr, ulSize );
             }
             break;
          }

          default:
             bufadd( &buffer, pFmtSave, pFmt - pFmtSave + 1 );
       }
       pFmt++;
    }

    pItemReturn = hb_itemPutCL( pItemReturn, buffer.pData, buffer.ulLen );
    hb_xfree( buffer.pData );
    return pItemReturn;
}


HB_FUNC( HB_SPRINTF )
{
    PHB_ITEM  pFormat = hb_param( 1, HB_IT_STRING );
    int       i, iParams = hb_pcount();
    PHB_ITEM* pItemArray = NULL;

    if( pFormat )
    {
       if( iParams > 1 )
       {
          pItemArray = ( PHB_ITEM* ) hb_xgrab( ( iParams - 1 ) * sizeof( 
PHB_ITEM ) );
          for( i = 1; i < iParams; i++ )
             pItemArray[ i - 1 ] = hb_param( i + 1, HB_IT_ANY );
       }

       hb_itemReturnRelease( hb_sprintf( NULL, pFormat, iParams - 1, 
pItemArray ) );

       if( iParams > 1 )
       {
          hb_xfree( pItemArray );
       }
    }
    else
       hb_errRT_BASE_SubstR( EG_ARG, 1099, NULL, HB_ERR_FUNCNAME, 
HB_ERR_ARGS_BASEPARAMS );
}
From lorenzo.fiorini at gmail.com  Sat Jan 24 05:33:02 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Jan 24 05:33:05 2009
Subject: [Harbour] About i18n
Message-ID: <9257026e0901240233l62a32f6ata6b5874b1796ceca@mail.gmail.com>

I've read all the messages about i18n in the list, the gnu gettext
doc, the ChangeLog but I still miss sth.

I've added -j switch and #xtranslate _( <x,...> ) =>
hb_i18n_gettext_strict( <x> ) and I got the .pot file. I've translated
it and created the .hbl file using utils/hbi18n but I can't figure out
how to use it in the app.

In xHarbour, following xharbour/doc/hbi18n.txt, I used sth like:

...
   HB_I18NSetBaseLanguage( "it_IT", "Italiano" )
   HB_I18nSetPath( "<apppath>/i18n")
   HB_I18nSetLanguage( "<appname>_en_US" )
...

Is there anybody that could kindly recap out to start from a domestic
base language and add one or more translations that the user can
choose at runtime?

best regards,
Lorenzo
From druzus at acn.waw.pl  Sat Jan 24 08:20:15 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Jan 24 08:16:11 2009
Subject: [Harbour] Question about HB_VM_STARTUP
In-Reply-To: <33323CF7E11F4B388C47CF1647402193@PEPELUIS3>
References: <33323CF7E11F4B388C47CF1647402193@PEPELUIS3>
Message-ID: <20090124132015.GA11143@34-mo7-2.acn.waw.pl>

On Fri, 23 Jan 2009, Jos? Luis Capel wrote:

Hi,

> What is the main pourpose of this define ?

When defined it activates HVM.
See include/hbwmain.c and source/vm/mainwin.c.
The file include/hbwmain.c is used also in other tools which
does not need HVM and it's the reason why we have this macro.

best regards,
Przemek
From druzus at acn.waw.pl  Sat Jan 24 08:31:09 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Jan 24 08:27:05 2009
Subject: [Harbour] About i18n
In-Reply-To: <9257026e0901240233l62a32f6ata6b5874b1796ceca@mail.gmail.com>
References: <9257026e0901240233l62a32f6ata6b5874b1796ceca@mail.gmail.com>
Message-ID: <20090124133108.GB11143@34-mo7-2.acn.waw.pl>

On Sat, 24 Jan 2009, Lorenzo Fiorini wrote:
> I've read all the messages about i18n in the list, the gnu gettext
> doc, the ChangeLog but I still miss sth.
> I've added -j switch and #xtranslate _( <x,...> ) =>
> hb_i18n_gettext_strict( <x> ) and I got the .pot file. I've translated
> it and created the .hbl file using utils/hbi18n but I can't figure out
> how to use it in the app.
> 
> In xHarbour, following xharbour/doc/hbi18n.txt, I used sth like:
> ...
>    HB_I18NSetBaseLanguage( "it_IT", "Italiano" )
>    HB_I18nSetPath( "<apppath>/i18n")
>    HB_I18nSetLanguage( "<appname>_en_US" )
> ...
> Is there anybody that could kindly recap out to start from a domestic
> base language and add one or more translations that the user can
> choose at runtime?

We havn't defined yet any rules used for automatic .hbl file loading.
See notes I left about it in ChangeLog file.
Now you have to load it yourself. To load translation from a file you
can simply use:

   cTable := hb_memoread( cFile )
   if hb_i18n_check( cTable, @cDescription )
      ? "Activating i18N module:", cDescription
      hb_i18n_set( hb_i18n_restoreTable( cTable ) )
   else
      ? "Wrong .hbl file:", cFile
   endif

If you want then you can also use LANG envvar as part of you .hbl
file names. You can also chose the language in other way.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Sat Jan 24 09:13:10 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Jan 24 09:13:14 2009
Subject: [Harbour] About i18n
In-Reply-To: <20090124133108.GB11143@34-mo7-2.acn.waw.pl>
References: <9257026e0901240233l62a32f6ata6b5874b1796ceca@mail.gmail.com>
	<20090124133108.GB11143@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0901240613y6c3526d6w5d0ef572455d91c9@mail.gmail.com>

On Sat, Jan 24, 2009 at 2:31 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> We havn't defined yet any rules used for automatic .hbl file loading.
> See notes I left about it in ChangeLog file.

Sorry, I didn't see them.

> If you want then you can also use LANG envvar as part of you .hbl
> file names. You can also chose the language in other way.

Ok, now it's more clear.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sat Jan 24 11:10:28 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Jan 24 11:10:36 2009
Subject: [Harbour] 2008-11-01 21:13 UTC+0100 Przemyslaw Czerpak 
	(druzus/at/priv.onet.pl)
In-Reply-To: <4979FE43.1060409@dbtopas.lt>
References: <E026792F-67F0-415C-BB19-95277B4CFA92@syenar.hu>
	<10B32C8C-926E-455F-BD36-0F8236EBCBDA@syenar.hu>
	<491315D1.7030303@dbtopas.lt>
	<6B0D3378-AB28-4273-B24E-CD3D321FDD30@syenar.hu>
	<20081106172214.GA9967@34-mo7-2.acn.waw.pl>
	<492D46FA.9010808@dbtopas.lt>
	<20081127155323.GA25089@34-mo7-2.acn.waw.pl>
	<493008E0.9020503@dbtopas.lt>
	<20081128213258.GA20608@34-mo7-2.acn.waw.pl>
	<4979FE43.1060409@dbtopas.lt>
Message-ID: <18d502870901240810i4c4d5bc9i9d1deaddb4359fce@mail.gmail.com>

Hi Mindaugas,
If the function is fully C compatible, HB_SPRINTF() is okay,
but if it's not I'd rather use HB_STRFORMAT() to avoid any
confusion. Since Harbour programming and needs are somewhat
different from C I would think we cannot (and it's rather pointless to)
go for full compatibility, so it'd be better to just say the Harbour
formatting syntax is _inspired by_ the C syntax, but it's a slightly
different thing (and may have additional/incompatible extensions in
the future). Such extension in the future might be to support
regular Harbour picture strings: '%1$s{"!"}' (syntax glue is just a
quick example).

BTW, we need to reserve hb_sprintf() C level function name for
a real printf() compatible C level implementation to eventually
remove dependency on C RTL printf() functions.

So my vote overall is hb_StrFormat() for C level and HB_STRFORMAT()
for .prg level function name.

Brgds,
Viktor

On Fri, Jan 23, 2009 at 6:28 PM, Mindaugas Kavaliauskas
<dbtopas@dbtopas.lt>wrote:

>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090124/9dd9602c/attachment-0001.html
From info at fsgiudice.com  Sun Jan 25 06:33:37 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Jan 25 06:33:47 2009
Subject: [Harbour] 2009-01-25 12:30 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
Message-ID: <497C4E11.9020004@fsgiudice.com>

2009-01-25 12:30 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   * harbour/contrib/examples/uhttpd/uhttpd.prg
     + Added hb_Inet*() version
   * harbour/contrib/examples/uhttpd/hbmk_b32.bat
     + Added support for hb_Inet*() version
     ; NOTE:
       To use hb_Inet*() version build using
       hbmk_b32.bat --with-inet

Another step to multiplatform version.
Used INet until new NET support will be added.
Now I have to clean last Windows additions.

Best regards

Francesco
From info at fsgiudice.com  Sun Jan 25 06:38:28 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Jan 25 06:38:36 2009
Subject: [Harbour] SSLWrap
Message-ID: <497C4F34.7040205@fsgiudice.com>

Hi Viktor,
I have found an interesting SSL Wrapper that I'm trying to convert to 
harbour.
http://www.rickk.com/sslwrap
Do you have any updates on SSL support ?
I have seen on previous messages that you are playing with OpenSSL.

Best regards

Francesco
From harbour.01 at syenar.hu  Sun Jan 25 11:53:40 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Jan 25 11:53:45 2009
Subject: [Harbour] Normal SVN commit mail
Message-ID: <18d502870901250853y8abd2ebgecbf9c99ca8533f7@mail.gmail.com>

Revision: 10092

http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10092&view=rev
Author:   fsgiudice
Date:     2009-01-25 11:31:40 +0000 (Sun, 25 Jan 2009)

Log Message:
-----------
2009-01-25 12:30 UTC+0100 Francesco Saverio Giudice
 * harbour/contrib/examples/uhttpd/uhttpd.prg
   + Added hb_Inet*() version
 * harbour/contrib/examples/uhttpd/hbmk_b32.bat
   + Added support for hb_Inet*() version
   ; NOTE:
     To use hb_Inet*() version build using
     hbmk_b32.bat --with-inet

Modified Paths:
--------------
   trunk/harbour/ChangeLog
   trunk/harbour/contrib/examples/uhttpd/hbmk_b32.bat
   trunk/harbour/contrib/examples/uhttpd/uhttpd.prg


This was sent by the SourceForge.net collaborative development platform, the
world's largest Open Source development site.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090125/ebdac9f7/attachment.html
From lorenzo.fiorini at gmail.com  Sun Jan 25 12:26:57 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Jan 25 12:27:01 2009
Subject: [Harbour] About field declaration
Message-ID: <9257026e0901250926r47575176x61410826cc11057b@mail.gmail.com>

In the process to clean my apps for MT I'm replacing statics and
set/get funcs with objects or publics. I've found several places where
I use FIELD declaration like:

field CRECID
field CSESSID
...
USEDBF ddmgtlog ALIAS MGT MODE MODE_EXCLUSIVE ;
          index CRECID+CSESSID to PRIMARY tag OF ddmgtlog, ;
                CSESSID+CRECID to SESSID tag OF ddmgtlog
...

which turn to be

ordcreate( <(cdx1)>, <(tag1)>, <(exp1)>, {exp1} )
...

so I need field declarations for {exp1}.

Am I correct if I say that I can remove the FIELD declarations and
{exp1} and leave to ordcreate to create the cb from the "expn" string?

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sun Jan 25 13:13:40 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Jan 25 13:13:52 2009
Subject: [Harbour] SSLWrap
In-Reply-To: <497C4F34.7040205@fsgiudice.com>
References: <497C4F34.7040205@fsgiudice.com>
Message-ID: <18d502870901251013w347d479he95d876c911396de@mail.gmail.com>

Hi Francesco,
We'd rather need something native, but this and stunnel
can be a solution until Harbour apps don't have proper
SSL support.

By 'wrapper' I meant a .prg level layer to access the OpenSSL API.
The most basic subset is just a few calls, so maybe it's
not as bad as one would first think:

http://www.ibm.com/developerworks/linux/library/l-openssl.html
http://www.openssl.org/docs/ssl/ssl.html

Here are the details of the Python wrapper, with similar issue
we would face in Harbour:
http://pyopenssl.sourceforge.net/pyOpenSSL.txt

Otherwise not much update here, I've recompiled everything this week
to update OpenSSL, libssh and libcurl to the latest versions. (talking
about Windows only, I have these components missing for Linux and
Darwin yet).

Update: I've quickly hammered up a skeleton of an OpenSSL Harbour
layer. Find it here:
http://www.syenar.hu/harbour/hbopnssl.zip
[ Only some basic SSL_CTX calls are implemented yet. ]

Brgds,
Viktor

On Sun, Jan 25, 2009 at 12:38 PM, Francesco Saverio Giudice <
info@fsgiudice.com> wrote:

> Hi Viktor,
> I have found an interesting SSL Wrapper that I'm trying to convert to
> harbour.
> http://www.rickk.com/sslwrap
> Do you have any updates on SSL support ?
> I have seen on previous messages that you are playing with OpenSSL.
>
> Best regards
>
> Francesco
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090125/981e2996/attachment.html
From harbour.01 at syenar.hu  Sun Jan 25 16:19:55 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Jan 25 16:20:00 2009
Subject: [Harbour] 2009-01-25 22:16 UTC+0100 Viktor Szakats
Message-ID: <18d502870901251319r1418cc2cvd942d3b14b154b35@mail.gmail.com>

2009-01-25 22:16 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/philes.c
    ! FWRITE(): Fixed accessing past the string buffer (thus
      causing potential GPF and a huge security hole) when
      the passed length is greater than the length of the string.
      Very old bug. In fact CA-Cl*pper suffers from the same
      problem, and behaviour for such case is not documented.
      Harbour will ignore the length parameter (thus writing
      the whole passed string), if the length is invalid.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090125/65e89cb2/attachment.html
From harbour.01 at syenar.hu  Sun Jan 25 18:57:13 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Jan 25 18:57:17 2009
Subject: [Harbour] 2009-01-26 00:52 UTC+0100 Viktor Szakats
Message-ID: <18d502870901251557g590419adw5b9a750218455931@mail.gmail.com>

2009-01-26 00:52 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
   * contrib/Makefile
   * contrib/make_b32_all.bat
   * contrib/make_gcc_all.sh
   * contrib/make_vc_all.bat
   + contrib/hbssl
   + contrib/hbssl/Makefile
   + contrib/hbssl/common.mak
   + contrib/hbssl/make_b32.bat
   + contrib/hbssl/make_vc.bat
   + contrib/hbssl/make_gcc.sh
   + contrib/hbssl/hbssl.h
   + contrib/hbssl/hbssl.ch
   + contrib/hbssl/ssl.c
   + contrib/hbssl/sslctx.c
   + contrib/hbssl/sslrand.c
   + contrib/hbssl/tests
   + contrib/hbssl/tests/hbmk_b32.bat
   + contrib/hbssl/tests/hbmk_vc.bat
   + contrib/hbssl/tests/test.prg
     + Added Harbour bindings to OpenSSL.
       Work in progress, but it's theoretically already functional.
       To build, set your HB_DIR_OPENSSL or HB_INC_OPENSSL envvar.
     ; TOFIX: Makefile openssl autodetection should be adjusted.

   * contrib/examples/uhttpd
     ! Fixed SVN attributes. (except for /home dir)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090126/f4f79ef3/attachment.html
From info at fsgiudice.com  Sun Jan 25 19:08:04 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Jan 25 19:08:12 2009
Subject: [Harbour] 2009-01-26 01:07 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
Message-ID: <497CFEE4.9070501@fsgiudice.com>

2009-01-26 01:07 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   * harbour/contrib/examples/uhttpd/uhttpd.prg
     + Added CGIExec() function
       Now uHTTPD supports external cgi executables.
       A big thank you to Giancarlo Niccolai that wrote Process*() functions
       and to Przemek that has ported them to harbour.
     ; NOTE: security has to be checked.
       A minimal executable test can be downloaded from:
       http://www.fsgiudice.com/testcgi.zip
       Expand into harbour/contrib/examples/uhttpd/home/cgi-bin, then run
       it using http://localhost:8082/cgi-bin/testcgi.exe


Best regards

Francesco
From info at fsgiudice.com  Sun Jan 25 19:09:39 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Jan 25 19:11:49 2009
Subject: [Harbour] 2009-01-26 00:52 UTC+0100 Viktor Szakats
In-Reply-To: <18d502870901251557g590419adw5b9a750218455931@mail.gmail.com>
References: <18d502870901251557g590419adw5b9a750218455931@mail.gmail.com>
Message-ID: <497CFF43.1000006@fsgiudice.com>

Hi Viktor,

Il 26/01/2009 0.57, Viktor Szak?ts ha scritto:
> 2009-01-26 00:52 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
>      + Added Harbour bindings to OpenSSL.
>        Work in progress, but it's theoretically already functional.
>        To build, set your HB_DIR_OPENSSL or HB_INC_OPENSSL envvar.
>      ; TOFIX: Makefile openssl autodetection should be adjusted.
> 
Great!
I will check ASAP

Best regards

Francesco
From info at fsgiudice.com  Sun Jan 25 19:11:20 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Jan 25 19:13:29 2009
Subject: [Harbour] 2009-01-26 00:52 UTC+0100 Viktor Szakats
In-Reply-To: <18d502870901251557g590419adw5b9a750218455931@mail.gmail.com>
References: <18d502870901251557g590419adw5b9a750218455931@mail.gmail.com>
Message-ID: <497CFFA8.3070801@fsgiudice.com>

Hi Viktor,

Il 26/01/2009 0.57, Viktor Szak?ts ha scritto:
> 2009-01-26 00:52 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
>      + Added Harbour bindings to OpenSSL.
>        Work in progress, but it's theoretically already functional.
>        To build, set your HB_DIR_OPENSSL or HB_INC_OPENSSL envvar.
>      ; TOFIX: Makefile openssl autodetection should be adjusted.
> 
Great!
I will check ASAP

Best regards

Francesco
From info at fsgiudice.com  Sun Jan 25 19:13:13 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Jan 25 19:13:34 2009
Subject: [Harbour] 2009-01-26 00:52 UTC+0100 Viktor Szakats
In-Reply-To: <18d502870901251557g590419adw5b9a750218455931@mail.gmail.com>
References: <18d502870901251557g590419adw5b9a750218455931@mail.gmail.com>
Message-ID: <497D0019.5060107@fsgiudice.com>

Hi Viktor,

Il 26/01/2009 0.57, Viktor Szak?ts ha scritto:
> 2009-01-26 00:52 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
>      + Added Harbour bindings to OpenSSL.
>        Work in progress, but it's theoretically already functional.
>        To build, set your HB_DIR_OPENSSL or HB_INC_OPENSSL envvar.
>      ; TOFIX: Makefile openssl autodetection should be adjusted.
> 
Great!
I will check ASAP

Best regards

Francesco
From harbour.01 at syenar.hu  Mon Jan 26 04:20:01 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 26 04:20:06 2009
Subject: [Harbour] 2009-01-26 10:19 UTC+0100 Viktor Szakats
Message-ID: <18d502870901260120p6e6a2447na9425ea562c7816f@mail.gmail.com>

2009-01-26 10:19 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbssl/common.mak
   * contrib/hbssl/Makefile
   * contrib/hbssl/hbssl.h
   + contrib/hbssl/sslsess.c
   + contrib/hbssl/sslciph.c
   * contrib/hbssl/ssl.c
   * contrib/hbssl/sslctx.c
   * contrib/hbssl/tests/test.prg
     + More SSL API added.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090126/173b02ee/attachment-0001.html
From M.Horodyski at pzuzycie.com.pl  Mon Jan 26 05:25:15 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Mon Jan 26 05:25:21 2009
Subject: [Harbour] 2009-01-26 01:07 UTC+0100 Francesco Saverio
	Giudice(info/at/fsgiudice.com)
In-Reply-To: <497CFEE4.9070501@fsgiudice.com>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501CB31AA@PINK.zycie.pzu>

>-----Original Message-----
>From: Francesco Saverio Giudice [mailto:info@fsgiudice.com] 
>Sent: Monday, January 26, 2009 1:08 AM
>To: Harbour Project Main Developer List.
>Subject: [Harbour] 2009-01-26 01:07 UTC+0100 Francesco Saverio 
>Giudice(info/at/fsgiudice.com)
>
>2009-01-26 01:07 UTC+0100 Francesco Saverio Giudice 
>(info/at/fsgiudice.com)

[...]

>       A minimal executable test can be downloaded from:
>       http://www.fsgiudice.com/testcgi.zip
>       Expand into 
>harbour/contrib/examples/uhttpd/home/cgi-bin, then run
>       it using http://localhost:8082/cgi-bin/testcgi.exe
>

He not work:(
IE and Chrome not run this without another serwer aplication on 8082
port.

Francesco,
I try compile now uhttpd with bcc32.
It requires bgd, hbgd, hbct and xhb libs.
To build this lib from contibs I must improve mtpl_b32.mak file.
In line 88 I change :

#INCLUDE_DIR = $(HB_ROOT)\include
INCLUDE_DIR = $(INCLUDE)

Why :
In variable INCLUDE have I path to all header files in harbour\inlude
and borlands include files.
When is 

$(HB_ROOT)\include

Then borlands includes files are not visible !

To build hbgd.lib, create I file run.bat with contents :

set HB_INC_GD=D:\gd\include
set HB_DIR_GD=D:\gd
call make_b32.bat

In D:\GD folder is oryginal GD project.

But now, when I try compile uhttpd with hbmk_b32.bat, in errorlog file
is :

>>>>>>>>>>>>>>>>>>
Building uHTTPD server

Lib GD support enabled

Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
uhttpd.c:
socket.c:
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Error: Unresolved external '_HB_FUN_HB_SPRINTF' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_MILLISECONDS' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_MEMOREAD' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_TOOUTDEBUG' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_I18N_GETTEXT' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_I18N_GETTEXT_STRICT' referenced
from D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_I18N_NGETTEXT' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_I18N_NGETTEXT_STRICT' referenced
from D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_I18N_CREATE' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_I18N_CODEPAGE' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_I18N_PLURALFORM' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_I18N_DESCRIPTION' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_I18N_ADDTEXT' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_I18N_SET' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_I18N_SAVETABLE' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_I18N_RESTORETABLE' referenced
from D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_I18N_HEADERSIZE' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_I18N_CHECK' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN___I18N_HASHTABLE' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_OSISWINNT' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_OSISWINCE' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_CODEPAGE_ES850C' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_CODEPAGE_ESISO' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_CODEPAGE_ESISOC' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_CODEPAGE_ESWINC' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_CODEPAGE_FRISO' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_CODEPAGE_FRWIN' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_CODEPAGE_HRWIN' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_CODEPAGE_ITWIN' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_CODEPAGE_RO852' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_CODEPAGE_ROISO' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_CODEPAGE_ROWIN' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_CODEPAGE_SVISO' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_RAT' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_HSETBINARY' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_HBINARY' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Error: Unresolved external '_HB_FUN_HB_HSORT' referenced from
D:\HARBOUR\CONTRIB\EXAMPLES\UHTTPD\UHTTPD.OBJ
Build error
<<<<<<<<<<<<<<<<<<<<<<<<

Is list libs in hbmk_b32.bat complete ?


Regards,
Marek Horodyski
From harbour.01 at syenar.hu  Mon Jan 26 05:58:31 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 26 05:58:35 2009
Subject: [Harbour] ChangeLogs
Message-ID: <18d502870901260258m6d3f49b2je9298606098828e7@mail.gmail.com>

2009-01-26 11:34 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbssl/sslctx.c
   * contrib/hbssl/ssl.c
     + Added more SSL API.

   * TODO
     * Updated.

2009-01-26 10:35 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbssl/tests/test.prg
   * contrib/hbssl/ssl.c
     + More SSL API added.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090126/b07e0608/attachment.html
From lorenzo.fiorini at gmail.com  Mon Jan 26 06:33:13 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jan 26 06:33:18 2009
Subject: [Harbour] Missing dependences linking hbuddall.a
Message-ID: <9257026e0901260333t1ede39b7hc4b3492803853cb9@mail.gmail.com>

Including hbuddall.a in the lib list I get:

Lines 58, Functions/Procedures 1
Generating C source output to 'tsturdd.c'... Done.
/opt/harbour/lib/libharbour.so: undefined reference to `HB_FUN_HB_FLASTREC'
/opt/harbour/lib/libharbour.so: undefined reference to `HB_FUN_HB_FSKIP'
/opt/harbour/lib/libharbour.so: undefined reference to `HB_FUN_HB_FGOTO'
/opt/harbour/lib/libharbour.so: undefined reference to `HB_FUN_HB_FRECNO'
/opt/harbour/lib/libharbour.so: undefined reference to `HB_FUN_HB_FGOTOP'
/opt/harbour/lib/libharbour.so: undefined reference to `HB_FUN_HB_FREADLN'
/opt/harbour/lib/libharbour.so: undefined reference to `HB_FUN_HB_LOGRDDINHERIT'
/opt/harbour/lib/libharbour.so: undefined reference to `HB_FUN_HB_FGOBOTTOM'
/opt/harbour/lib/libharbour.so: undefined reference to `HB_FUN_HB_UNUSED_VAR'
/opt/harbour/lib/libharbour.so: undefined reference to `HB_FUN_HB_FUSE'
/opt/harbour/lib/libharbour.so: undefined reference to `HB_FUN_HB_FSELECT'

HB_F* functions are in contrib/hbmisc, HB_LOGRDDINHERIT is defined in
exlog and I can't find HB_UNUSED_VAR.

Suggestions to clean it?

best regards,
Lorenzo
From info at fsgiudice.com  Mon Jan 26 07:18:33 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jan 26 07:18:43 2009
Subject: [Harbour] Missing dependences linking hbuddall.a
In-Reply-To: <9257026e0901260333t1ede39b7hc4b3492803853cb9@mail.gmail.com>
References: <9257026e0901260333t1ede39b7hc4b3492803853cb9@mail.gmail.com>
Message-ID: <497DAA19.2070909@fsgiudice.com>

Hi Lorenzo,

Il 26/01/2009 12.33, Lorenzo Fiorini ha scritto:
> Including hbuddall.a in the lib list I get:
> 
> HB_F* functions are in contrib/hbmisc, HB_LOGRDDINHERIT is defined in
> exlog and I can't find HB_UNUSED_VAR.
> 
> Suggestions to clean it?
> 

this should be fixed after:
2009-01-26 13:11 UTC+0100 Francesco Saverio Giudice

Best regards

Francesco

From info at fsgiudice.com  Mon Jan 26 07:17:32 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jan 26 07:21:37 2009
Subject: [Harbour] 2009-01-26 13:11 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
Message-ID: <497DA9DC.6020300@fsgiudice.com>

2009-01-26 13:11 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   * harbour/source/rdd/usrrdd/rdds/logrdd.prg
     * changed REQUEST to DYNAMIC HB_LOGRDDINHERIT
     * fixed typo: HB_UNUSED_VAR() is HB_SYMBOL_UNUSED()
   * harbour/source/rdd/usrrdd/example/exlog.prg
     * fixed typo: HB_UNUSED_VAR() is HB_SYMBOL_UNUSED()


Best regards

Francesco
From lorenzo.fiorini at gmail.com  Mon Jan 26 07:40:24 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jan 26 07:40:29 2009
Subject: [Harbour] Missing dependences linking hbuddall.a
In-Reply-To: <497DAA19.2070909@fsgiudice.com>
References: <9257026e0901260333t1ede39b7hc4b3492803853cb9@mail.gmail.com>
	<497DAA19.2070909@fsgiudice.com>
Message-ID: <9257026e0901260440g77577906n697d163be46d42f1@mail.gmail.com>

On Mon, Jan 26, 2009 at 1:18 PM, Francesco Saverio Giudice
<info@fsgiudice.com> wrote:

> this should be fixed after:
> 2009-01-26 13:11 UTC+0100 Francesco Saverio Giudice

Many thanks.

May I ask you sth about arrayrdd?
I'm doing some tests.
I've changed DBFCDX to ARRAYRDD in tests/testcdx.prg:

...
REQUEST ARRAYRDD
...
   dbCreate( "testcdx", aStruct, "ARRAYRDD", .T., "TESTCDX" )
...

but I get this RT error:

RddName: ARRAYRDD
Press any key to continue...
Error BASE/1002  Alias does not exist: TESTCDX
Called from MAIN(31)

it seems there no alias set.

Is it expected?

best regards,
Lorenzo
From capelsoft at terra.es  Mon Jan 26 09:24:21 2009
From: capelsoft at terra.es (=?utf-8?Q?Jos=C3=A9_Luis_Capel?=)
Date: Mon Jan 26 09:24:26 2009
Subject: [Harbour] Question about HB_VM_STARTUP
References: <33323CF7E11F4B388C47CF1647402193@PEPELUIS3>
	<20090124132015.GA11143@34-mo7-2.acn.waw.pl>
Message-ID: <56364D518C4F4B418B07B807C0C65DEE@PEPELUIS3>

Przemek,

>
>> What is the main pourpose of this define ?
>
> When defined it activates HVM.
> See include/hbwmain.c and source/vm/mainwin.c.
> The file include/hbwmain.c is used also in other tools which
> does not need HVM and it's the reason why we have this macro.
>

Many thanks for your answer.

Regards,
Jos? luis CApel 

From capelsoft at terra.es  Mon Jan 26 09:35:16 2009
From: capelsoft at terra.es (=?iso-8859-1?Q?Jos=E9_Luis_Capel?=)
Date: Mon Jan 26 09:35:27 2009
Subject: [Harbour] Error compiling last SVN evc4
Message-ID: <4EEA08E86FCC474A931C48D6200C50DC@PEPELUIS3>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: make_vcce.log
Type: application/octet-stream
Size: 9673 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090126/5f0ddd28/make_vcce-0001.obj
From druzus at acn.waw.pl  Mon Jan 26 10:00:23 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 26 09:56:15 2009
Subject: [Harbour] 2008-11-01 21:13 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <4979FE43.1060409@dbtopas.lt>
References: <4912E7C2.6010801@dbtopas.lt>
	<10B32C8C-926E-455F-BD36-0F8236EBCBDA@syenar.hu>
	<491315D1.7030303@dbtopas.lt>
	<6B0D3378-AB28-4273-B24E-CD3D321FDD30@syenar.hu>
	<20081106172214.GA9967@34-mo7-2.acn.waw.pl>
	<492D46FA.9010808@dbtopas.lt>
	<20081127155323.GA25089@34-mo7-2.acn.waw.pl>
	<493008E0.9020503@dbtopas.lt>
	<20081128213258.GA20608@34-mo7-2.acn.waw.pl>
	<4979FE43.1060409@dbtopas.lt>
Message-ID: <20090126150023.GA539@uran.home.aster.pl>

On Fri, 23 Jan 2009, Mindaugas Kavaliauskas wrote:

Hi,

> Hi,
> I've wrote some basic version of the function.
> Implemented:
>   - specifiers: c (char), s (string), d (decimal), f (float);
>   - flags: - (left align), + (print + sign), space (print space sign), 0 
> (zero padding);
>   - width;
>   - decimals;
>   - parameter numbers;
> % [<param>$] [+|-|space|0] [<width>][.<dec>][c|s|d|f]
> The goal was to be C compatible, i.e.:
>   - do not print STR() style '*' for to short width numbers;
>   - do not convert types (see below, for exceptions).
> Harbour has different types than C, and full C compatibility is impossible, 
> or function behaviour will look weird, without any adaption to Harbour. So, 

There are also some small differences to original print behavior, f.e.:
%012d in C printf() is 0 padded 12 length 'd' formatting and in this code
it's parameter 12-th 'd' formatting. I also do not see support for string
cutting, f.e.:
   printf( "[%.3s]", "ABCDEF" );

Month ago I crated for my friend sprintf() implementation to use in embedded
system. It should be fully ANSI C compatible though some things like double
, long long support or positional parameters can be disabled to reduce the
code size, external dependencies and memory/stack usage and such reduced
version is used.
If does not support A, a, E, e, G, g conversions and simply redirect them
to F or f and conversions which needs locale setting. See notes in the code.
They were not necessary in this project and also they are not necessary for
us.
Now this code is strongly GCC related and will have to be updated for
other compilers but it can be easy done and it can be used as our own
hb_snprintf() implementation (of course I'll update copyright notice).
I'm attaching it. It should quite well show how different flags are
interpreted and their precedence in different conversions.

> I've made a few small exceptions/extensions to strict C compatible 
> implementation:
>   - %d allows to take LOGICAL parameter type, and function prints "1" and 
> "0", for .T. and .F.. In C true/false is represented by integer values (of 
> some width) 1 and 0, so, introducing this extension for LOGICAL type, I 
> feel more C compatible.

It's OK for me.

>   - %f In C language %f uses 6 decimal places, but harbour has <decimal> 
> format inside numeric item, so, I've used this value for default. Without 
> this, we will need to show explicit <decimal> format for many things like 
> FIELD values, to get result we usually expect. However, I've not used 
> default default value for <width>, because nature of sprintf() is to print 
> numbers without left padding, using default <width> will do most numeric 
> print left padded and very incompatible to C.

OK

> For discussion: I've implemented character %c printing using numeric values 
> (in C char type is numeric type), but it is common in Harbour to represent 
> character as strings on length 1. Maybe, we should extend %c, to accept 
> string type and use first character of string.

I think it's good idea.

> For discussion: what function name should be used? Since the goal is to be 
> C compatible, I guess HB_SPRINTF() is better than HB_STRFORMAT().

If the formatting will be C compatible then I vote for HB_SPRINTF()
otherwise HB_STRFORMAT().

best regards,
Przemek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: prnf.c.gz
Type: application/x-gzip
Size: 6055 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090126/ecef6180/prnf.c.gz
From harbour.01 at syenar.hu  Mon Jan 26 09:59:45 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 26 09:59:50 2009
Subject: [Harbour] Missing dependences linking hbuddall.a
In-Reply-To: <9257026e0901260333t1ede39b7hc4b3492803853cb9@mail.gmail.com>
References: <9257026e0901260333t1ede39b7hc4b3492803853cb9@mail.gmail.com>
Message-ID: <18d502870901260659x6356a866t32ed29facc316de0@mail.gmail.com>

Well, since these hbmisc functions are very low quality components (bugs,
non-MT/reentrant, no 64-bit support),
I'd suggest to remove this udd from core and place it
somewhere under hbmisc or examples.

Or, of course if someone takes the effort to replace this
dependency with a working one, it's even better.

Brgds,
Viktor

On Mon, Jan 26, 2009 at 12:33 PM, Lorenzo Fiorini <lorenzo.fiorini@gmail.com
> wrote:

> Including hbuddall.a in the lib list I get:
>
> Lines 58, Functions/Procedures 1
> Generating C source output to 'tsturdd.c'... Done.
> /opt/harbour/lib/libharbour.so: undefined reference to `HB_FUN_HB_FLASTREC'
> /opt/harbour/lib/libharbour.so: undefined reference to `HB_FUN_HB_FSKIP'
> /opt/harbour/lib/libharbour.so: undefined reference to `HB_FUN_HB_FGOTO'
> /opt/harbour/lib/libharbour.so: undefined reference to `HB_FUN_HB_FRECNO'
> /opt/harbour/lib/libharbour.so: undefined reference to `HB_FUN_HB_FGOTOP'
> /opt/harbour/lib/libharbour.so: undefined reference to `HB_FUN_HB_FREADLN'
> /opt/harbour/lib/libharbour.so: undefined reference to
> `HB_FUN_HB_LOGRDDINHERIT'
> /opt/harbour/lib/libharbour.so: undefined reference to
> `HB_FUN_HB_FGOBOTTOM'
> /opt/harbour/lib/libharbour.so: undefined reference to
> `HB_FUN_HB_UNUSED_VAR'
> /opt/harbour/lib/libharbour.so: undefined reference to `HB_FUN_HB_FUSE'
> /opt/harbour/lib/libharbour.so: undefined reference to `HB_FUN_HB_FSELECT'
>
> HB_F* functions are in contrib/hbmisc, HB_LOGRDDINHERIT is defined in
> exlog and I can't find HB_UNUSED_VAR.
>
> Suggestions to clean it?
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090126/ca1c0e02/attachment.html
From info at fsgiudice.com  Mon Jan 26 10:47:53 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jan 26 10:48:12 2009
Subject: [Harbour] 2009-01-26 16:47 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
Message-ID: <497DDB29.5020300@fsgiudice.com>

2009-01-26 16:47 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   * harbour/source/rdd/usrrdd/rdds/arrayrdd.prg
     * fixed harbour version without using hbcompat.ch
       ; TODO: USRRDD not supports dbCreate() extension params
   + harbour/source/rdd/usrrdd/example/exarr.prg
     + ARRAYRDD example
   + harbour/source/rdd/usrrdd/example/hbmk_b32.bat
     + BCC make file


Best regards

Francesco
From druzus at acn.waw.pl  Mon Jan 26 10:53:55 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 26 10:49:48 2009
Subject: [Harbour] 2009-01-26 16:53 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090126155355.GA6424@uran.home.aster.pl>

2009-01-26 16:53 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/darwin/gcc.cf
    ! changed CCACHE to HB_CCACHE
  * harbour/include/hbatomic.h
    ! removed unnecessary volatile casting in Darwin atomic function
      parameters
  * harbour/source/compiler/harbour.y
    ! cleaned one untyped expression assign
  (by Phil Krylov borrowed from xHarbour)

  * harbour/bin/hb-func.sh
    * updated contrib library last

best regards
Przemek
From info at fsgiudice.com  Mon Jan 26 10:50:34 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jan 26 10:50:39 2009
Subject: [Harbour] Missing dependences linking hbuddall.a
In-Reply-To: <9257026e0901260440g77577906n697d163be46d42f1@mail.gmail.com>
References: <9257026e0901260333t1ede39b7hc4b3492803853cb9@mail.gmail.com>	<497DAA19.2070909@fsgiudice.com>
	<9257026e0901260440g77577906n697d163be46d42f1@mail.gmail.com>
Message-ID: <497DDBCA.1070704@fsgiudice.com>

Hi Lorenzo,

Il 26/01/2009 13.40, Lorenzo Fiorini ha scritto:
> RddName: ARRAYRDD
> Press any key to continue...
> Error BASE/1002  Alias does not exist: TESTCDX
> Called from MAIN(31)
> 
> it seems there no alias set.
> 
> Is it expected?
> 
Yes, USRRDD seems to not support dbCreate() extended parameters.
You have to use separated dbCreate() / USE commands and it will works.
See example after my changelog:
2009-01-26 16:47 UTC+0100 Francesco Saverio Giudice

Ask me if you need something else. I use ARRAYRDD in everyday 
applications with no problems, also if I would like to implement INDEXES 
support.

Best regards

Francesco
From harbour.01 at syenar.hu  Mon Jan 26 10:59:01 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 26 10:59:08 2009
Subject: [Harbour] 2009-01-26 16:47 UTC+0100 Francesco Saverio Giudice 
	(info/at/fsgiudice.com)
In-Reply-To: <497DDB29.5020300@fsgiudice.com>
References: <497DDB29.5020300@fsgiudice.com>
Message-ID: <18d502870901260759m7b28da1bu540311551f7cbfd6@mail.gmail.com>

Hi Francesco,
May I suggest to remove the xhb lib dependency in these examples?

Core by definition should never depend on a contrib, it's an important
rule we should stick with.

Brgds,
Viktor

On Mon, Jan 26, 2009 at 4:47 PM, Francesco Saverio Giudice <
info@fsgiudice.com> wrote:

> 2009-01-26 16:47 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com
> )
>  * harbour/source/rdd/usrrdd/rdds/arrayrdd.prg
>    * fixed harbour version without using hbcompat.ch
>      ; TODO: USRRDD not supports dbCreate() extension params
>  + harbour/source/rdd/usrrdd/example/exarr.prg
>    + ARRAYRDD example
>  + harbour/source/rdd/usrrdd/example/hbmk_b32.bat
>    + BCC make file
>
>
> Best regards
>
> Francesco
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090126/697c4546/attachment-0001.html
From harbour.01 at syenar.hu  Mon Jan 26 11:12:43 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 26 11:12:48 2009
Subject: [Harbour] 2009-01-26 17:10 UTC+0100 Viktor Szakats
Message-ID: <18d502870901260812m9e651d7ye281968aa720cb94@mail.gmail.com>

2009-01-26 17:10 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
   * common.mak
   * include/hbextern.ch
   * source/rtl/Makefile
   + source/rtl/strxor.c
     + Added HB_STRXOR() (work of Mindaugas Kavaliauskas)

   * common.mak
   * source/common/Makefile
   + source/common/hbprintf.c
     + Added hb_snprintf_c() (temp name, untested) (work of Przemyslaw
Czerpak)
       [ I've added a normal Harbour license, as per your permission
       on the list. Pls give me feedback is this is wrong. ]

   * source/rdd/usrrdd/example/exlog.prg
     ! Fixed missing #includes.

   * source/rdd/usrrdd/example/hbmk_b32.bat
   + source/rdd/usrrdd/example/hbmk_vc.bat
     + Added MSVC make file.
     ! Added EOL to the last line to hbmk_b32.bat.
     ! xhb.lib dependency removed. It was not needed anyway.
     ; TOFIX: When compiling exhsx.prg, this happens:
              exhsx.obj : error LNK2001: unresolved external symbol
_HB_FUN_HSXRDD

   * contrib/hbssl/sslsess.c
   * contrib/hbssl/sslctx.c
   * contrib/hbssl/sslciph.c
     * Minor changes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090126/969dea02/attachment.html
From druzus at acn.waw.pl  Mon Jan 26 11:19:06 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 26 11:14:57 2009
Subject: [Harbour] 2009-01-26 16:47 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
In-Reply-To: <497DDB29.5020300@fsgiudice.com>
References: <497DDB29.5020300@fsgiudice.com>
Message-ID: <20090126161906.GA12170@uran.home.aster.pl>

On Mon, 26 Jan 2009, Francesco Saverio Giudice wrote:

Hi Francesco,

> 2009-01-26 16:47 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
>   * harbour/source/rdd/usrrdd/rdds/arrayrdd.prg
>     * fixed harbour version without using hbcompat.ch
>       ; TODO: USRRDD not supports dbCreate() extension params

This is not true. USRRDD fully support it and to be precise
there are not extended dbCreate() parameters which are passed
yo RDD. Just simply inside DBCRETE() function SELF_CLOSE() metod
is called or not. If it does not work in some RDD then it means
that it's the problem in this RDD only and should be fixed.
Probably the RDD you tested does not keep table open after
SLEF_CREATE() method.
It does not depend if this RDD was written using USRRDD or not.

best regards,
Przemek
From info at fsgiudice.com  Mon Jan 26 11:15:47 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jan 26 11:15:56 2009
Subject: [Harbour] 2009-01-26 16:47 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
In-Reply-To: <18d502870901260759m7b28da1bu540311551f7cbfd6@mail.gmail.com>
References: <497DDB29.5020300@fsgiudice.com>
	<18d502870901260759m7b28da1bu540311551f7cbfd6@mail.gmail.com>
Message-ID: <497DE1B3.6020608@fsgiudice.com>

Hi Viktor,

Il 26/01/2009 16.59, Viktor Szak?ts ha scritto:
> Hi Francesco,
> 
> May I suggest to remove the xhb lib dependency in these examples?
> 
> Core by definition should never depend on a contrib, it's an important 
> rule we should stick with.
> 
AFAIR the only dependence is hb_ToOutDebug() that I have commented out 
(maybe is it the time to move it outside from xhb ;-) ? ) and used only 
for tests.

But I will check ASAP.

Best regards

Francesco
From info at fsgiudice.com  Mon Jan 26 11:23:48 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jan 26 11:23:54 2009
Subject: [Harbour] 2009-01-26 16:47 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
In-Reply-To: <20090126161906.GA12170@uran.home.aster.pl>
References: <497DDB29.5020300@fsgiudice.com>
	<20090126161906.GA12170@uran.home.aster.pl>
Message-ID: <497DE394.3030501@fsgiudice.com>

Hi Przemek,

Il 26/01/2009 17.19, Przemyslaw Czerpak ha scritto:
> 
> This is not true. USRRDD fully support it and to be precise
> there are not extended dbCreate() parameters which are passed
> yo RDD. Just simply inside DBCRETE() function SELF_CLOSE() metod
> is called or not. If it does not work in some RDD then it means
> that it's the problem in this RDD only and should be fixed.
> Probably the RDD you tested does not keep table open after
> SLEF_CREATE() method.
> It does not depend if this RDD was written using USRRDD or not.
> 
Sorry for misunderstanding it and for not precise phrase I wrote in 
Changelog (I will correct it and in mail to Lorenzo I wrote that it 
*seems* to not support).
I apologize for this.
Surely it is my fault in writing ARRAYRDD, but I never used extended 
parameters before, so I didn't knew where those parameters were passed.
Before upload last changes I have tested (and you find commented 
hb_toOutDebug()) if aOpenInfo carries above informations, but I didn't 
found them.

Best regards

Francesco


From harbour.01 at syenar.hu  Mon Jan 26 11:33:04 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 26 11:33:09 2009
Subject: [Harbour] 2009-01-26 16:47 UTC+0100 Francesco Saverio Giudice 
	(info/at/fsgiudice.com)
In-Reply-To: <497DE1B3.6020608@fsgiudice.com>
References: <497DDB29.5020300@fsgiudice.com>
	<18d502870901260759m7b28da1bu540311551f7cbfd6@mail.gmail.com>
	<497DE1B3.6020608@fsgiudice.com>
Message-ID: <18d502870901260833s2d513f3bx77b6a6e3e13b340c@mail.gmail.com>

Hi Francesco,
Yes, removing it didn't cause any problem.

AFAIR the only dependence is hb_ToOutDebug() that I have commented out
> (maybe is it the time to move it outside from xhb ;-) ? ) and used only for
> tests.


Hm, I personally still strongly dislike this set of functions.

The naming, the scope, the API, portability, none of these are
in sync with our general core direction.

We need something ligher, simpler.

If we don't want to use logging in speed critical areas, this simple
function could IMO easily add logging into core. Maybe if we add
a way to setup the filename, it would have some point to have it
in core (and maybe rewritten in C). Also FO_EXCL could be used
here.

#include "fileio.ch"
PROCEDURE LogMsg( cString )
    LOCAL nHandle
    IF (nHandle := iif(hb_FileExists( cFileName ), FOpen( cFileName,
FO_WRITE + FO_DENYWRITE),;
                                              FCreate( cFileName, FC_NORMAL
) ) ) != F_ERROR
       FSeek( nHandle, 0, FS_END)
       FWrite( nHandle, cEvent + hb_osNewLine() )
       FClose( nHandle )
    ENDIF
    RETURN

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090126/a1735c42/attachment.html
From lorenzo.fiorini at gmail.com  Mon Jan 26 12:31:46 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jan 26 12:32:13 2009
Subject: [Harbour] Missing dependences linking hbuddall.a
In-Reply-To: <497DDBCA.1070704@fsgiudice.com>
References: <9257026e0901260333t1ede39b7hc4b3492803853cb9@mail.gmail.com>
	<497DAA19.2070909@fsgiudice.com>
	<9257026e0901260440g77577906n697d163be46d42f1@mail.gmail.com>
	<497DDBCA.1070704@fsgiudice.com>
Message-ID: <9257026e0901260931y3881f045y6abc4816e9781705@mail.gmail.com>

On Mon, Jan 26, 2009 at 4:50 PM, Francesco Saverio Giudice
<info@fsgiudice.com> wrote:

> Ask me if you need something else. I use ARRAYRDD in everyday applications
> with no problems, also if I would like to implement INDEXES support.

Many thanks.

best regards,
Lorenzo
From dbtopas at dbtopas.lt  Mon Jan 26 13:25:42 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Jan 26 13:25:36 2009
Subject: [Harbour] 2008-11-01 21:13 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20090126150023.GA539@uran.home.aster.pl>
References: <4912E7C2.6010801@dbtopas.lt>	<10B32C8C-926E-455F-BD36-0F8236EBCBDA@syenar.hu>	<491315D1.7030303@dbtopas.lt>	<6B0D3378-AB28-4273-B24E-CD3D321FDD30@syenar.hu>	<20081106172214.GA9967@34-mo7-2.acn.waw.pl>	<492D46FA.9010808@dbtopas.lt>	<20081127155323.GA25089@34-mo7-2.acn.waw.pl>	<493008E0.9020503@dbtopas.lt>	<20081128213258.GA20608@34-mo7-2.acn.waw.pl>	<4979FE43.1060409@dbtopas.lt>
	<20090126150023.GA539@uran.home.aster.pl>
Message-ID: <497E0026.9050005@dbtopas.lt>

Hi,


Przemyslaw Czerpak wrote:
> There are also some small differences to original print behavior, f.e.:
> %012d in C printf() is 0 padded 12 length 'd' formatting and in this code
> it's parameter 12-th 'd' formatting. 

Can you give an error example? I'm unable to find the bug. I get correct 
result for:
    ? HB_SPRINTF( "[%012d]", 123 ) // [000000000123]


> I also do not see support for string
> cutting, f.e.:
>    printf( "[%.3s]", "ABCDEF" );
> 

Thanks! I'll fix it. I was using the first google link for printf() 
reference and some tests on linux's printf() function, but I did not 
know the meaning of "." for strings. I'll try to use a better docs to 
know details better.


> If the formatting will be C compatible then I vote for HB_SPRINTF()
> otherwise HB_STRFORMAT().

I see full C compatibility is not possible due Harbour language nature, 
so, let's call it HB_STRFORMAT().


> Month ago I crated for my friend sprintf() implementation to use in embedded
> system. It should be fully ANSI C compatible though some things like double
> , long long support or positional parameters can be disabled to reduce the
> code size, external dependencies and memory/stack usage and such reduced
> version is used.
> If does not support A, a, E, e, G, g conversions and simply redirect them
> to F or f and conversions which needs locale setting. See notes in the code.
> They were not necessary in this project and also they are not necessary for
> us.
> Now this code is strongly GCC related and will have to be updated for
> other compilers but it can be easy done and it can be used as our own
> hb_snprintf() implementation (of course I'll update copyright notice).
> I'm attaching it. It should quite well show how different flags are
> interpreted and their precedence in different conversions.

I'll still a little confused on functionality of Harbour's formats 
itself. Should we support argument length modifier (h,l,L) because 
Harbour has argument length determined by item structure, etc. Anyone's 
ideas are welcome.

You've proposed rc_snprintf(). Do you mean HB_STRFORMAT() should use 
original C s[n]printf() function, thus making it's output more C 
compatible, but possibly STR() incompatible for rounding errors, etc? 
I've used hb_itemStrBuf() to avoid incompatible results for STR(nValue, 
20, 10) and HB_STRFORMAT("%20.10f", nValue).


Best regards,
Mindaugas
From info at fsgiudice.com  Mon Jan 26 14:28:45 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jan 26 14:28:51 2009
Subject: [Harbour] 2009-01-26 20:24 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
Message-ID: <497E0EED.1070603@fsgiudice.com>

2009-01-26 20:24 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   * harbour/ChangeLog
     * added missed entry I haven't uploaded and fixed my wrong phrase.


Best regards

Francesco
From druzus at acn.waw.pl  Mon Jan 26 14:38:30 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 26 14:34:21 2009
Subject: [Harbour] 2009-01-26 16:47 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
In-Reply-To: <497DE394.3030501@fsgiudice.com>
References: <497DDB29.5020300@fsgiudice.com>
	<20090126161906.GA12170@uran.home.aster.pl>
	<497DE394.3030501@fsgiudice.com>
Message-ID: <20090126193830.GA28473@uran.home.aster.pl>

On Mon, 26 Jan 2009, Francesco Saverio Giudice wrote:

Hi Francesco,

>> This is not true. USRRDD fully support it and to be precise
>> there are not extended dbCreate() parameters which are passed
>> yo RDD. Just simply inside DBCRETE() function SELF_CLOSE() metod
>> is called or not. If it does not work in some RDD then it means
>> that it's the problem in this RDD only and should be fixed.
>> Probably the RDD you tested does not keep table open after
>> SLEF_CREATE() method.
>> It does not depend if this RDD was written using USRRDD or not.
> Sorry for misunderstanding it and for not precise phrase I wrote in 
> Changelog (I will correct it and in mail to Lorenzo I wrote that it *seems* 
> to not support).
> I apologize for this.
> Surely it is my fault in writing ARRAYRDD, but I never used extended 
> parameters before, so I didn't knew where those parameters were passed.
> Before upload last changes I have tested (and you find commented 
> hb_toOutDebug()) if aOpenInfo carries above informations, but I didn't 
> found them.

See above. Such parameters are not passed to RDD and RDD does not have
to know about them. The problem is caused by the fact that ARRAYRDD does
net keep table open after successful execution of CREATE() method.
This method should leave table open in all RDDs. Otherwise some functionality
like COPY TO or additional dbCreate() parameters will not work.

best regards,
Przemek
From info at fsgiudice.com  Mon Jan 26 14:51:37 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jan 26 14:51:44 2009
Subject: [Harbour] 2009-01-26 17:10 UTC+0100 Viktor Szakats
In-Reply-To: <18d502870901260812m9e651d7ye281968aa720cb94@mail.gmail.com>
References: <18d502870901260812m9e651d7ye281968aa720cb94@mail.gmail.com>
Message-ID: <497E1449.3050400@fsgiudice.com>

Hi Viktor,

Il 26/01/2009 17.12, Viktor Szak?ts ha scritto:
>    + source/common/hbprintf.c
>      + Added hb_snprintf_c() (temp name, untested) (work of Przemyslaw 
> Czerpak)
>        [ I've added a normal Harbour license, as per your permission
>        on the list. Pls give me feedback is this is wrong. ]

building with BCC I got this error:

	bcc32.exe -c -q -d -Q -w -w-sig- -tWM -4 -O2 -OS -Ov -Oi -Oc -Iinclude 
-Iobj\b32 -DHB_FM_STATISTICS_OFF -oobj\b32\hbprintf.obj 
source\common\hbprintf.c
source\common\hbprintf.c:
Error E2141 source\common\hbprintf.c 114: Declaration syntax error
Warning W8065 source\common\hbprintf.c 492: Call to function 'signbit' 
with no prototype in function put_dbl
Warning W8065 source\common\hbprintf.c 676: Call to function 'strnlen' 
with no prototype in function put_str
Error E2188 source\common\hbprintf.c 803: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 827: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 902: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 904: Expression syntax in function 
hb_snprintf_c
Warning W8065 source\common\hbprintf.c 905: Call to function 'isnan' 
with no prototype in function hb_snprintf_c
Warning W8065 source\common\hbprintf.c 911: Call to function 'isinf' 
with no prototype in function hb_snprintf_c
Warning W8065 source\common\hbprintf.c 917: Call to function 'isinf' 
with no prototype in function hb_snprintf_c
Error E2188 source\common\hbprintf.c 929: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 931: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 933: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 935: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 937: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 939: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 941: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 943: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 954: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 956: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 958: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 960: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 962: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 964: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 966: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 968: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 982: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 997: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 1009: Expression syntax in function 
hb_snprintf_c
Error E2188 source\common\hbprintf.c 1020: Expression syntax in function 
hb_snprintf_c
Error E2228 source\common\hbprintf.c 1020: Too many error or warning 
messages in function hb_snprintf_c
*** 26 errors in Compile ***

** error 1 ** deleting obj\b32\hbprintf.obj

Best regards

Francesco

From info at fsgiudice.com  Mon Jan 26 14:53:45 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jan 26 14:53:52 2009
Subject: [Harbour] 2009-01-26 16:47 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
In-Reply-To: <20090126193830.GA28473@uran.home.aster.pl>
References: <497DDB29.5020300@fsgiudice.com>	<20090126161906.GA12170@uran.home.aster.pl>	<497DE394.3030501@fsgiudice.com>
	<20090126193830.GA28473@uran.home.aster.pl>
Message-ID: <497E14C9.7000901@fsgiudice.com>

Hi Przemek,

Il 26/01/2009 20.38, Przemyslaw Czerpak ha scritto:
> 
> See above. Such parameters are not passed to RDD and RDD does not have
> to know about them. The problem is caused by the fact that ARRAYRDD does
> net keep table open after successful execution of CREATE() method.
> This method should leave table open in all RDDs. Otherwise some functionality
> like COPY TO or additional dbCreate() parameters will not work.

Ok, thank you, I'm changing ARRAYRDD behaviour.

Best regards,

Francesco

From druzus at acn.waw.pl  Mon Jan 26 15:15:41 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 26 15:11:32 2009
Subject: [Harbour] 2008-11-01 21:13 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <497E0026.9050005@dbtopas.lt>
References: <491315D1.7030303@dbtopas.lt>
	<6B0D3378-AB28-4273-B24E-CD3D321FDD30@syenar.hu>
	<20081106172214.GA9967@34-mo7-2.acn.waw.pl>
	<492D46FA.9010808@dbtopas.lt>
	<20081127155323.GA25089@34-mo7-2.acn.waw.pl>
	<493008E0.9020503@dbtopas.lt>
	<20081128213258.GA20608@34-mo7-2.acn.waw.pl>
	<4979FE43.1060409@dbtopas.lt>
	<20090126150023.GA539@uran.home.aster.pl>
	<497E0026.9050005@dbtopas.lt>
Message-ID: <20090126201541.GA371@uran.home.aster.pl>

On Mon, 26 Jan 2009, Mindaugas Kavaliauskas wrote:

Hi,

>> There are also some small differences to original print behavior, f.e.:
>> %012d in C printf() is 0 padded 12 length 'd' formatting and in this code
>> it's parameter 12-th 'd' formatting. 
> Can you give an error example? I'm unable to find the bug. I get correct 
> result for:
>    ? HB_SPRINTF( "[%012d]", 123 ) // [000000000123]

Ups, My fault I only watch in the source code without real tests
and I missed that patern pointer is reverted when '$' is missing.
Sorry.

> I'll still a little confused on functionality of Harbour's formats itself. 
> Should we support argument length modifier (h,l,L) because Harbour has 
> argument length determined by item structure, etc. Anyone's ideas are 
> welcome.

Probably we should add at least basic support to properly parse patterns
ignoring things which are not necessary for us though some modifiers can
be used to strip the number, f.e. 0x12345678 as "%hx" should give "5678"
so we can support them partially. Keeping full support for C printf
modifiers should help when people use the same strings in C and .prg
code. For .prg snprintf() wrapper we only have the possibilities to make
additional parameters validation and of course we should introduce it but
we do not have to make any limitations in supported format.

> You've proposed rc_snprintf(). Do you mean HB_STRFORMAT() should use 
> original C s[n]printf() function, thus making it's output more C 
> compatible, but possibly STR() incompatible for rounding errors, etc? I've 
> used hb_itemStrBuf() to avoid incompatible results for STR(nValue, 20, 10) 
> and HB_STRFORMAT("%20.10f", nValue).

And this is OK for me. I also prefer using the same rules for numbers
conversions as in core code. rc_snprintf() is my internal name not a
proposition and this code was not related to Harbour at all. It's pure
C code which to use as snprintf() replacement. It should be updated to
use it with Harbour. It can be also adopted to be core of .prg snprintf()
wrapper. In such case the code can be greatly simplified and reduced.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Jan 26 15:18:53 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 26 15:14:44 2009
Subject: [Harbour] 2009-01-26 17:10 UTC+0100 Viktor Szakats
In-Reply-To: <497E1449.3050400@fsgiudice.com>
References: <18d502870901260812m9e651d7ye281968aa720cb94@mail.gmail.com>
	<497E1449.3050400@fsgiudice.com>
Message-ID: <20090126201853.GA16981@uran.home.aster.pl>

On Mon, 26 Jan 2009, Francesco Saverio Giudice wrote:

Hi,

>>    + source/common/hbprintf.c
>>      + Added hb_snprintf_c() (temp name, untested) (work of Przemyslaw 
>> Czerpak)
>>        [ I've added a normal Harbour license, as per your permission
>>        on the list. Pls give me feedback is this is wrong. ]
> building with BCC I got this error:
> 	bcc32.exe -c -q -d -Q -w -w-sig- -tWM -4 -O2 -OS -Ov -Oi -Oc -Iinclude 
> -Iobj\b32 -DHB_FM_STATISTICS_OFF -oobj\b32\hbprintf.obj 
> source\common\hbprintf.c
> source\common\hbprintf.c:
> Error E2141 source\common\hbprintf.c 114: Declaration syntax error
> Warning W8065 source\common\hbprintf.c 492: Call to function 'signbit' with 
> no prototype in function put_dbl
> Warning W8065 source\common\hbprintf.c 676: Call to function 'strnlen' with 
> no prototype in function put_str
[...]

As I said it's GCC only code. It has to be updated for other compilers.
I'll try to make it ASAP. Meanwhile it should be disabled from default
compilation.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Jan 26 15:20:42 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 26 15:20:48 2009
Subject: [Harbour] 2009-01-26 17:10 UTC+0100 Viktor Szakats
In-Reply-To: <497E1449.3050400@fsgiudice.com>
References: <18d502870901260812m9e651d7ye281968aa720cb94@mail.gmail.com>
	<497E1449.3050400@fsgiudice.com>
Message-ID: <18d502870901261220s630b2a1dw45384219c01cabe8@mail.gmail.com>

Yes, it doesn't compile under MSVC either, so unless there is someone to
tweak it, I'll disable the code.

Until then I've made a few patches, but it's not enough.

[ I see Przemek jumped in, so I'll just disable it for the time being. ]

Brgds,
Viktor

On Mon, Jan 26, 2009 at 8:51 PM, Francesco Saverio Giudice <
info@fsgiudice.com> wrote:

> Hi Viktor,
>
> Il 26/01/2009 17.12, Viktor Szak?ts ha scritto:
>
>>   + source/common/hbprintf.c
>>     + Added hb_snprintf_c() (temp name, untested) (work of Przemyslaw
>> Czerpak)
>>       [ I've added a normal Harbour license, as per your permission
>>       on the list. Pls give me feedback is this is wrong. ]
>>
>
> building with BCC I got this error:
>
>        bcc32.exe -c -q -d -Q -w -w-sig- -tWM -4 -O2 -OS -Ov -Oi -Oc
> -Iinclude -Iobj\b32 -DHB_FM_STATISTICS_OFF -oobj\b32\hbprintf.obj
> source\common\hbprintf.c
> source\common\hbprintf.c:
> Error E2141 source\common\hbprintf.c 114: Declaration syntax error
> Warning W8065 source\common\hbprintf.c 492: Call to function 'signbit' with
> no prototype in function put_dbl
> Warning W8065 source\common\hbprintf.c 676: Call to function 'strnlen' with
> no prototype in function put_str
> Error E2188 source\common\hbprintf.c 803: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 827: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 902: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 904: Expression syntax in function
> hb_snprintf_c
> Warning W8065 source\common\hbprintf.c 905: Call to function 'isnan' with
> no prototype in function hb_snprintf_c
> Warning W8065 source\common\hbprintf.c 911: Call to function 'isinf' with
> no prototype in function hb_snprintf_c
> Warning W8065 source\common\hbprintf.c 917: Call to function 'isinf' with
> no prototype in function hb_snprintf_c
> Error E2188 source\common\hbprintf.c 929: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 931: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 933: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 935: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 937: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 939: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 941: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 943: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 954: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 956: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 958: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 960: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 962: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 964: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 966: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 968: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 982: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 997: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 1009: Expression syntax in function
> hb_snprintf_c
> Error E2188 source\common\hbprintf.c 1020: Expression syntax in function
> hb_snprintf_c
> Error E2228 source\common\hbprintf.c 1020: Too many error or warning
> messages in function hb_snprintf_c
> *** 26 errors in Compile ***
>
> ** error 1 ** deleting obj\b32\hbprintf.obj
>
> Best regards
>
> Francesco
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090126/75da2719/attachment-0001.html
From druzus at acn.waw.pl  Mon Jan 26 15:26:13 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 26 15:22:03 2009
Subject: [Harbour] 2009-01-26 21:25 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090126202613.GA3507@uran.home.aster.pl>

2009-01-26 21:25 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/common/hbprintf.c
  * harbour/source/codepage/cpeswinm.c
  * harbour/source/rdd/usrrdd/example/exlog.prg
  * harbour/source/rdd/usrrdd/rdds/logrdd.prg
  * harbour/contrib/xhb/dbgfx.prg
  * harbour/contrib/xhb/xhb.h
  * harbour/contrib/xhb/sprintf.prg
  * harbour/contrib/xhb/dbgfxc.c
  * harbour/contrib/xhb/hbstruct.prg
  * harbour/contrib/xhb/hbstruct.ch
  * harbour/contrib/hbmsql/tests/hbmk_b32.bat
  * harbour/contrib/hbmsql/tests/hbmk_vc.bat
    ! fixed hardcoded CRLF and svn:eol-style attribute

best regards
Przemek
From info at fsgiudice.com  Mon Jan 26 15:23:08 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jan 26 15:23:14 2009
Subject: [Harbour] 2009-01-26 01:07 UTC+0100 Francesco
	Saverio	Giudice(info/at/fsgiudice.com)
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501CB31AA@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501CB31AA@PINK.zycie.pzu>
Message-ID: <497E1BAC.5040308@fsgiudice.com>

Hi Marek,

Il 26/01/2009 11.25, Horodyski Marek (PZUZ) ha scritto:
>>       A minimal executable test can be downloaded from:
>>       http://www.fsgiudice.com/testcgi.zip
>>       Expand into 
>> harbour/contrib/examples/uhttpd/home/cgi-bin, then run
>>       it using http://localhost:8082/cgi-bin/testcgi.exe
>>
> 
> He not work:(
> IE and Chrome not run this without another serwer aplication on 8082
> port.
> 

This is correct. You need a web server to run it. (Or you can run it on 
cmd console but you will see only an html page output)

> Francesco,
> I try compile now uhttpd with bcc32.
> It requires bgd, hbgd, hbct and xhb libs.

I'm trying to limit non standard libs use but uhttpd links all standard 
libs to permit to HRB modules to find all standard functions.
One you can exclude is libgd (bgd and hbgd) with:
hbmk_b32.bat --without-gd

> To build this lib from contibs I must improve mtpl_b32.mak file.

No, please don't change standard make files. They are already ready to use.
You only need to define some environment variables.
I use to run this batch before start building process:
---------- set_vars.bat ---------------
SET HARBOURFLAGS=-DHB_HASH_MSG_ITEMS
set HB_DIR_GD=j:\lib\gd
set HB_DIR_FREEIMAGE=j:\lib\freeimage
set HB_DIR_FIREBIRD=J:\Firebird\Firebird_2_1
set HB_DIR_LIBHARU=j:\lib\libharu
set HB_DIR_CURL=j:\lib\curl
set HB_DIR_OPENSSL=j:\lib\openssl
set HB_BUILD_DLL=yes
set C_USR=-DHB_FM_STATISTICS_OFF
set HB_BUILD_ST=
---------------------------------------
having in j:\lib all developer files from any single lib.
Then you have to run from harbour root folder:
make_b32.bat clean
make_b32.bat
make_b32.bat install
cd contrib
make_b32_all.bat clean
make_b32_all.bat
make_b32_all.bat install

 > Then borlands includes files are not visible !

You have to add into borland bin directory these config files:
----- bcc32.cfg ------
-I"j:\Bcc55\include"
-L"j:\Bcc55\lib;j:\Bcc55\lib\psdk"
-lj"j:\Bcc55\lib;j:\Bcc55\lib\psdk"
----------------------

----- ilink32.cfg ----
-L"j:\Bcc55\lib;j:\Bcc55\lib\psdk"
----------------------

----- tlink32.cfg ----
/Lj:\Bcc55\lib
----------------------

changing paths to correct BCC folder (them are corrected either for 
BCC55 than for BCC582)

> Is list libs in hbmk_b32.bat complete ?
> 
Yes

Feel free to ask if you need more help.

Best regards

Francesco

From jarabal at gmail.com  Mon Jan 26 15:49:29 2009
From: jarabal at gmail.com (Xavi)
Date: Mon Jan 26 15:50:58 2009
Subject: [Harbour] 2008-11-01 21:13 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20090126150023.GA539@uran.home.aster.pl>
References: <4912E7C2.6010801@dbtopas.lt>	<10B32C8C-926E-455F-BD36-0F8236EBCBDA@syenar.hu>	<491315D1.7030303@dbtopas.lt>	<6B0D3378-AB28-4273-B24E-CD3D321FDD30@syenar.hu>	<20081106172214.GA9967@34-mo7-2.acn.waw.pl>	<492D46FA.9010808@dbtopas.lt>	<20081127155323.GA25089@34-mo7-2.acn.waw.pl>	<493008E0.9020503@dbtopas.lt>	<20081128213258.GA20608@34-mo7-2.acn.waw.pl>	<4979FE43.1060409@dbtopas.lt>
	<20090126150023.GA539@uran.home.aster.pl>
Message-ID: <497E21D9.2090903@gmail.com>

Przemek,

stdint.h is C99, Does not exist in many compilers as BCC 5.5
	
As far I know hbmisc/spd.c is 100% compatible with sprintf() C99 and adds new features.
It was allowed me, move C/C++ solutions to Harbour applications.
Of course, using C RTL snprintf().

Best regards,
Xavi

Przemyslaw Czerpak escribi?:
> On Fri, 23 Jan 2009, Mindaugas Kavaliauskas wrote:
> 
> Hi,
> 
>> Hi,
>> I've wrote some basic version of the function.
>> Implemented:
>>   - specifiers: c (char), s (string), d (decimal), f (float);
>>   - flags: - (left align), + (print + sign), space (print space sign), 0 
>> (zero padding);
>>   - width;
>>   - decimals;
>>   - parameter numbers;
>> % [<param>$] [+|-|space|0] [<width>][.<dec>][c|s|d|f]
>> The goal was to be C compatible, i.e.:
>>   - do not print STR() style '*' for to short width numbers;
>>   - do not convert types (see below, for exceptions).
>> Harbour has different types than C, and full C compatibility is impossible, 
>> or function behaviour will look weird, without any adaption to Harbour. So, 
> 
> There are also some small differences to original print behavior, f.e.:
> %012d in C printf() is 0 padded 12 length 'd' formatting and in this code
> it's parameter 12-th 'd' formatting. I also do not see support for string
> cutting, f.e.:
>    printf( "[%.3s]", "ABCDEF" );
> 
> Month ago I crated for my friend sprintf() implementation to use in embedded
> system. It should be fully ANSI C compatible though some things like double
> , long long support or positional parameters can be disabled to reduce the
> code size, external dependencies and memory/stack usage and such reduced
> version is used.
> If does not support A, a, E, e, G, g conversions and simply redirect them
> to F or f and conversions which needs locale setting. See notes in the code.
> They were not necessary in this project and also they are not necessary for
> us.
> Now this code is strongly GCC related and will have to be updated for
> other compilers but it can be easy done and it can be used as our own
> hb_snprintf() implementation (of course I'll update copyright notice).
> I'm attaching it. It should quite well show how different flags are
> interpreted and their precedence in different conversions.
> 
>> I've made a few small exceptions/extensions to strict C compatible 
>> implementation:
>>   - %d allows to take LOGICAL parameter type, and function prints "1" and 
>> "0", for .T. and .F.. In C true/false is represented by integer values (of 
>> some width) 1 and 0, so, introducing this extension for LOGICAL type, I 
>> feel more C compatible.
> 
> It's OK for me.
> 
>>   - %f In C language %f uses 6 decimal places, but harbour has <decimal> 
>> format inside numeric item, so, I've used this value for default. Without 
>> this, we will need to show explicit <decimal> format for many things like 
>> FIELD values, to get result we usually expect. However, I've not used 
>> default default value for <width>, because nature of sprintf() is to print 
>> numbers without left padding, using default <width> will do most numeric 
>> print left padded and very incompatible to C.
> 
> OK
> 
>> For discussion: I've implemented character %c printing using numeric values 
>> (in C char type is numeric type), but it is common in Harbour to represent 
>> character as strings on length 1. Maybe, we should extend %c, to accept 
>> string type and use first character of string.
> 
> I think it's good idea.
> 
>> For discussion: what function name should be used? Since the goal is to be 
>> C compatible, I guess HB_SPRINTF() is better than HB_STRFORMAT().
> 
> If the formatting will be C compatible then I vote for HB_SPRINTF()
> otherwise HB_STRFORMAT().
> 
> best regards,
> Przemek
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From bedipritpal at hotmail.com  Mon Jan 26 16:06:44 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Jan 26 16:06:48 2009
Subject: [Harbour] 2009-01-26 13:02 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <21673873.post@talk.nabble.com>


2009-01-26 13:02 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/hbziparc/hbziparc.prg
    ! Fixed <acFiles> behavior if the parameter is not passed.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2009-01-26-13%3A02-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp21673873p21673873.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Mon Jan 26 16:20:15 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 26 16:16:06 2009
Subject: [Harbour] 2008-11-01 21:13 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <497E21D9.2090903@gmail.com>
References: <491315D1.7030303@dbtopas.lt>
	<6B0D3378-AB28-4273-B24E-CD3D321FDD30@syenar.hu>
	<20081106172214.GA9967@34-mo7-2.acn.waw.pl>
	<492D46FA.9010808@dbtopas.lt>
	<20081127155323.GA25089@34-mo7-2.acn.waw.pl>
	<493008E0.9020503@dbtopas.lt>
	<20081128213258.GA20608@34-mo7-2.acn.waw.pl>
	<4979FE43.1060409@dbtopas.lt>
	<20090126150023.GA539@uran.home.aster.pl>
	<497E21D9.2090903@gmail.com>
Message-ID: <20090126212015.GA11298@uran.home.aster.pl>

On Mon, 26 Jan 2009, Xavi wrote:

Hi Xavi,

> stdint.h is C99, Does not exist in many compilers as BCC 5.5

Yes, I know.

> As far I know hbmisc/spd.c is 100% compatible with sprintf() C99 and adds new features.
> It was allowed me, move C/C++ solutions to Harbour applications.
> Of course, using C RTL snprintf().

And this is exactly what we want to eliminate. The code I sent is
snprintf() replacement.

best regards,
Przemek
From info at fsgiudice.com  Mon Jan 26 16:47:29 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jan 26 16:47:36 2009
Subject: [Harbour] 2009-01-26 22:45 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
Message-ID: <497E2F71.8030301@fsgiudice.com>

2009-01-26 22:45 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   * harbour/source/rdd/usrrdd/rdds/arrayrdd.prg
     * fixed AR_CREATE() to be compatible with dbCreate() extension
       parameters
   * harbour/source/rdd/usrrdd/example/exarr.prg
     * updated

Best regards

Francesco
From info at fsgiudice.com  Mon Jan 26 16:48:52 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jan 26 16:48:58 2009
Subject: [Harbour] Missing dependences linking hbuddall.a
In-Reply-To: <9257026e0901260440g77577906n697d163be46d42f1@mail.gmail.com>
References: <9257026e0901260333t1ede39b7hc4b3492803853cb9@mail.gmail.com>	<497DAA19.2070909@fsgiudice.com>
	<9257026e0901260440g77577906n697d163be46d42f1@mail.gmail.com>
Message-ID: <497E2FC4.4090009@fsgiudice.com>

Hi Lorenzo,

Il 26/01/2009 13.40, Lorenzo Fiorini ha scritto:
> ...
> 
> but I get this RT error:
> 
> RddName: ARRAYRDD
> Press any key to continue...
> Error BASE/1002  Alias does not exist: TESTCDX
> Called from MAIN(31)
> 
> it seems there no alias set.
> 
> Is it expected?

should be fixed after
2009-01-26 22:45 UTC+0100 Francesco Saverio Giudice

please tell me if now it is ok.

Best regards

Francesco
From harbour.01 at syenar.hu  Mon Jan 26 16:59:47 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 26 16:59:53 2009
Subject: [Harbour] 2009-01-26 22:57 UTC+0100 Viktor Szakats
Message-ID: <18d502870901261359s6d02bfbfl9bb88b199da39919@mail.gmail.com>

2009-01-26 22:57 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
  * source/rdd/usrrdd/example/exhsx.prg
    ! Removed HSXRDD references. It seems to work without them.

  * contrib/hbssl/ssl.c
    * Comment changes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090126/1c21b583/attachment.html
From harbour.01 at syenar.hu  Mon Jan 26 17:35:39 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 26 17:35:42 2009
Subject: [Harbour] 2009-01-26 23:32 UTC+0100 Viktor Szakats
Message-ID: <18d502870901261435g51f915aaxdaf2b156056f087a@mail.gmail.com>

2009-01-26 23:32 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
   + contrib/examples/uhttpd/hbmk_vc.bat
     + Added MSVC make file.

   * contrib/examples/uhttpd/socket.c
     ! Made it compile with MSVC.
     ! Added SVN header.

   * contrib/examples/uhttpd/uhttpd.prg
   + contrib/examples/uhttpd/uhttpdc.c
     + C level stuff moved to separate file.

   ; NOTE: I'm getting an "Argument error: +" when browse
           to http://localhost:8082 (using Chrome if that matters).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090126/8959466d/attachment.html
From harbour.01 at syenar.hu  Mon Jan 26 17:56:09 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 26 17:56:13 2009
Subject: [Harbour] Re: 2009-01-26 23:32 UTC+0100 Viktor Szakats
In-Reply-To: <18d502870901261435g51f915aaxdaf2b156056f087a@mail.gmail.com>
References: <18d502870901261435g51f915aaxdaf2b156056f087a@mail.gmail.com>
Message-ID: <18d502870901261456y39095e52sec75a2800500f2ff@mail.gmail.com>

Aha, it does work when built with --with-inet, great.
Previously, without it, I've also got this:

Application Memory Allocation Report -
...\harbour\contrib\examples\uhttpd\uhttpd.exe
Terminated at: 2009.01.26 23:53:18
Total memory allocated: 281977 bytes (3813 block(s))
Warning, memory allocated but not released: 132 bytes (3 block(s))
Block 1 00CE51B8 (size 40) SOCKET_ACCEPT(0),
"707C0D0170860D0180D2500001000100000000000F000000802C0D014F4752455353000000000000"
Block 2 010D7C70 (size 40) SOCKET_GETPEERNAME(0),
"70860D01B851CE0080D250000100010000000000C8FFCE00588A0D010000000058D7B800084CCE00"
Block 3 010D8670 (size 40) SOCKET_GETSOCKNAME(0),
"B851CE00707C0D0180D250000100010000000000C8FFCE00F08B0D010000000058D7B800084CCE00"
------------------------------------------------------------------------

Brgds,
Viktor

On Mon, Jan 26, 2009 at 11:35 PM, Viktor Szak?ts <harbour.01@syenar.hu>wrote:

> 2009-01-26 23:32 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
>    + contrib/examples/uhttpd/hbmk_vc.bat
>      + Added MSVC make file.
>
>    * contrib/examples/uhttpd/socket.c
>      ! Made it compile with MSVC.
>      ! Added SVN header.
>
>    * contrib/examples/uhttpd/uhttpd.prg
>    + contrib/examples/uhttpd/uhttpdc.c
>      + C level stuff moved to separate file.
>
>    ; NOTE: I'm getting an "Argument error: +" when browse
>            to http://localhost:8082 (using Chrome if that matters).
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090126/3cd7237d/attachment-0001.html
From bedipritpal at hotmail.com  Mon Jan 26 18:13:18 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Jan 26 18:13:21 2009
Subject: [Harbour] 2009-01-26 15:07 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <21674231.post@talk.nabble.com>


2009-01-26 15:07 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/gtwvg.c
  * harbour/contrib/gtwvg/gtwvg.h
    ! Synchronized with GTWVT per Viktor's changes for box characters.
    ! Commented out previous change per Przemek's "Layered Attributes".
      Somehow, this change had increased the flickering of the window as
      it invalidates the whole window when it regain focus, not desirable
      behavior in GTWVG with GUI elelments.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2009-01-26-15%3A07-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp21674231p21674231.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dbtopas at dbtopas.lt  Mon Jan 26 18:25:52 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Jan 26 18:25:44 2009
Subject: [Harbour] Re: 2009-01-26 23:32 UTC+0100 Viktor Szakats
In-Reply-To: <18d502870901261456y39095e52sec75a2800500f2ff@mail.gmail.com>
References: <18d502870901261435g51f915aaxdaf2b156056f087a@mail.gmail.com>
	<18d502870901261456y39095e52sec75a2800500f2ff@mail.gmail.com>
Message-ID: <497E4680.7090702@dbtopas.lt>

Viktor Szak?ts wrote:
> Aha, it does work when built with --with-inet, great.
> 
> Previously, without it, I've also got this:
> 
> Application Memory Allocation Report - 
> ...\harbour\contrib\examples\uhttpd\uhttpd.exe
> Terminated at: 2009.01.26 23:53:18
> Total memory allocated: 281977 bytes (3813 block(s))
> Warning, memory allocated but not released: 132 bytes (3 block(s))
> Block 1 00CE51B8 (size 40) SOCKET_ACCEPT(0), 
> "707C0D0170860D0180D2500001000100000000000F000000802C0D014F4752455353000000000000"
> Block 2 010D7C70 (size 40) SOCKET_GETPEERNAME(0), 
> "70860D01B851CE0080D250000100010000000000C8FFCE00588A0D010000000058D7B800084CCE00"
> Block 3 010D8670 (size 40) SOCKET_GETSOCKNAME(0), 
> "B851CE00707C0D0180D250000100010000000000C8FFCE00F08B0D010000000058D7B800084CCE00"
> ------------------------------------------------------------------------

Line:
       hb_itemParamStoreForward( 2, hb_itemPutSockaddr( NULL, &saddr ) );
should be replaced by:
    PHB_ITEM          pItem;
       ...
       pItem = hb_itemPutSockaddr( NULL, &saddr );
       hb_itemParamStoreForward( 2, pItem );
       hb_itemRelease( pItem );


Best regards,
Mindaugas
From harbour.01 at syenar.hu  Mon Jan 26 18:33:47 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 26 18:33:54 2009
Subject: [Harbour] 2009-01-26 15:07 UTC-0800 Pritpal Bedi 
	(pritpal@vouchcac.com)
In-Reply-To: <21674231.post@talk.nabble.com>
References: <21674231.post@talk.nabble.com>
Message-ID: <18d502870901261533g45bbebees58d1ab22431cac49@mail.gmail.com>

Hi Pritpal,


> 2009-01-26 15:07 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>  * harbour/contrib/gtwvg/gtwvg.c
>  * harbour/contrib/gtwvg/gtwvg.h
>    ! Synchronized with GTWVT per Viktor's changes for box characters.
>    ! Commented out previous change per Przemek's "Layered Attributes".


This was originally my addition, but Przemek was nice to commit it
on my behalf. Anyway, I think you should look for some more information
regarding "layered window" mode, because one of it's points is to
reduce flickering and unnecessary redraw requests. You ask Windows
to manage the bitmap and you only need to update it when a real update
occurs (but not, when the window is just moved around or gets focus).
So this isn't a magic switch, and you may need to tweak the way
WVG windows are updated to exploit it's possibilities in a good way.

This link is good for a start, but probably not enough to finish:
http://msdn.microsoft.com/en-us/library/ms997507.aspx

[ Surprisingly Vista removed support for layered windows,
so it may also happen that we should tweak this feature
when running under Vista. I've already turned it off for TS mode,
because of bad performance. ]

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090127/7baab1ef/attachment.html
From harbour.01 at syenar.hu  Mon Jan 26 18:34:30 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 26 18:34:34 2009
Subject: [Harbour] 2009-01-27 00:21 UTC+0100 Viktor Szakats
Message-ID: <18d502870901261534x44e94e08r9fbb4e9e6574304@mail.gmail.com>

2009-01-27 00:21 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
  * contrib/examples/uhttpd/uhttpd.prg
    + Added callstack in RTE message (ugly but useful).
    ! Fixed RTE when displaying server status.
      (might have broken non-inet-mode)

  * contrib/examples/uhttpd/hbmk_b32.bat
  * contrib/examples/uhttpd/hbmk_vc.bat
    + Trying to shutdown server before build.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090127/b90da5e5/attachment.html
From harbour.01 at syenar.hu  Mon Jan 26 18:43:44 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 26 18:43:48 2009
Subject: [Harbour] Re: 2009-01-26 23:32 UTC+0100 Viktor Szakats
In-Reply-To: <497E4680.7090702@dbtopas.lt>
References: <18d502870901261435g51f915aaxdaf2b156056f087a@mail.gmail.com>
	<18d502870901261456y39095e52sec75a2800500f2ff@mail.gmail.com>
	<497E4680.7090702@dbtopas.lt>
Message-ID: <18d502870901261543v1c18e48ci39a693a383f883cb@mail.gmail.com>

Many thanks, this fixes it.
I'll commit ASAP.

Brgds,
Viktor

On Tue, Jan 27, 2009 at 12:25 AM, Mindaugas Kavaliauskas <dbtopas@dbtopas.lt
> wrote:

> Viktor Szak?ts wrote:
>
>> Aha, it does work when built with --with-inet, great.
>>
>> Previously, without it, I've also got this:
>>
>> Application Memory Allocation Report -
>> ...\harbour\contrib\examples\uhttpd\uhttpd.exe
>> Terminated at: 2009.01.26 23:53:18
>> Total memory allocated: 281977 bytes (3813 block(s))
>> Warning, memory allocated but not released: 132 bytes (3 block(s))
>> Block 1 00CE51B8 (size 40) SOCKET_ACCEPT(0),
>> "707C0D0170860D0180D2500001000100000000000F000000802C0D014F4752455353000000000000"
>> Block 2 010D7C70 (size 40) SOCKET_GETPEERNAME(0),
>> "70860D01B851CE0080D250000100010000000000C8FFCE00588A0D010000000058D7B800084CCE00"
>> Block 3 010D8670 (size 40) SOCKET_GETSOCKNAME(0),
>> "B851CE00707C0D0180D250000100010000000000C8FFCE00F08B0D010000000058D7B800084CCE00"
>> ------------------------------------------------------------------------
>>
>
> Line:
>      hb_itemParamStoreForward( 2, hb_itemPutSockaddr( NULL, &saddr ) );
> should be replaced by:
>   PHB_ITEM          pItem;
>      ...
>      pItem = hb_itemPutSockaddr( NULL, &saddr );
>      hb_itemParamStoreForward( 2, pItem );
>      hb_itemRelease( pItem );
>
>
> Best regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090127/85071e00/attachment.html
From harbour.01 at syenar.hu  Mon Jan 26 18:43:55 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Jan 26 18:44:00 2009
Subject: [Harbour] 2009-01-27 00:39 UTC+0100 Viktor Szakats
Message-ID: <18d502870901261543x61a3945fj576f14b741f1524b@mail.gmail.com>

2009-01-27 00:39 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
  * contrib/examples/uhttpd/uhttpd.prg
    ! Fixed RTE when in socket.c mode.

  * contrib/examples/uhttpd/socket.c
    ! Fixed leak. Thanks to Mindaugas.

  ; TOFIX: Ajax test (404 Not Found),
           Counter (image not found),
           cgi-bin (broken link),
           XML database (empty boxes in Chrome, empty boxes
           and error messagebox with IE8)
           doesn't work here.

           Shall I configure something?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090127/e9cdb2fc/attachment.html
From cigcor at hotmail.com  Mon Jan 26 20:38:13 2009
From: cigcor at hotmail.com (=?iso-8859-1?Q?S=E9rgio_Kondo?=)
Date: Mon Jan 26 19:38:31 2009
Subject: [Harbour] Compact .HRB or encrypt string in .HRB
Message-ID: <COL103-DS11A8CDC48EEAB07A6862C8DCCB0@phx.gbl>

Hi,
Is possible to compact .hrb files or encrypt string in .hrb files?
My interest is hide password string in .hrb files, if I put password string in this file.
S?rgio
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090126/edd43806/attachment.html
From druzus at acn.waw.pl  Mon Jan 26 22:30:41 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jan 26 22:26:32 2009
Subject: [Harbour] 2009-01-27 04:30 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090127033041.GA27270@uran.home.aster.pl>

2009-01-27 04:30 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbdefs.h
    * added some C compilers which supports stdint.h

  * harbour/source/common/hbprintf.c
    * eliminated non portable GCC only C syntax.
    * updated to compile with other C compilers.
      Now only GNUC with C99 support and BORLAND C gives all
      +inf/-inf/NaN values for [long] double conversions.
      Other compilers uses NaN also for infinite numbers or nothing.
      Please add full support for them. See TODO notes I left.
      For compilers which supports C99 floating point macros should
      be enough to enable the same macros used for GNUC && _ISOC99_SOURCE.

  * harbour/contrib/hbcrypt/sha2.h
  * harbour/contrib/hbcrypt/sha2.c
    ! fixed BCC5.5 compilation

   TOFIX: harbour/contrib/hbssl/ssl.c[631], sslctx.c[268], sslctx.c[281]
          error: invalid conversion from ?void*? to ?const char*?
          I do not know if SSL_get_ex_data()/SSL_CTX_get_app_data()
          returns valid ASCIIZ string so I cannot decide if simple casting
          is safe and to pacify above errors.
          Viktor, can you look at it?

best regards
Przemek
From philb at philb.us  Tue Jan 27 00:21:59 2009
From: philb at philb.us (Phil Barnett)
Date: Tue Jan 27 00:22:05 2009
Subject: [Harbour] Fwd: SF.net SVN: harbour-project:[10057]
	trunk/harbour/ChangeLog
In-Reply-To: <18d502870901230122k1b9fbd82nd858a96691d4f3ae@mail.gmail.com>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>	<49708C44.9040307@dbtopas.lt>	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>	<4970A8AD.5060207@dbtopas.lt>
	<4976AD2E.5070303@philb.us>	<18d502870901210043t38aae244x9a88f57b9fced79@mail.gmail.com>	<4977D631.6000205@philb.us>	<18d502870901212213t4ab8a60bj91befcc2d8f7cb9@mail.gmail.com>	<49791D1B.7050500@philb.us>
	<18d502870901230122k1b9fbd82nd858a96691d4f3ae@mail.gmail.com>
Message-ID: <497E99F7.8070607@philb.us>

Viktor Szak?ts wrote:
> Hi Phil,
>  
>
>         What is the problem with my proposal?
>
>     You are creating a feed to the mail system that there is no way to
>     opt out of, thus giving regular subscribers no way to reduce their
>     mail burden. Sure you can filter i away, but only after you have
>     downloaded it. And it's going to have a size limit of 150k. That's
>     a lot of downloading just to throw it away.
>
>
> Wrong. The commit mails without diffs are just as small as current 
> ChangeLog 
> e-mails. Same thing. No need to raise size limits. Same amount of mails. 
> It _replaces_ current ChangeLog e-mails, so total number of received 
> mails 
> are _unchanged_.
>
>     What I am proposing is an opt in system. You only have to join it
>     once, it lasts indefinitely. You create a filter to put it in the
>     correct mailbox, that lasts indefinitely. This is a very minor
>     burden to give choice to others before the mail download instead
>     of after the mail download.
>
>     Your method reduces choice and increases mail burden. People with
>     modems do care about this stuff. I believe in efficiency whenever
>     I can get it. Choice is good when it's not excessive and
>     burdensome, which this is not. Subscribe once, add one rule and
>     you get exactly what you want.
>
>
> Sorry to say, but I think you've totally misunderstood me.
I've offered to give you:

1. If you reply to these messages, the reply goes to the developer list.
2. By adding one rule in your email system, you can have them delivered 
to the same developer folder that you already have.

How is that not exactly what you want? I mean, if it's such a big deal 
that you would have to subscribe, I can do that for you.

I think you have totally misunderstood me. I offered not only a way to 
get what you wanted, but I also offered the flexibility to opt out of 
this automated mail for anyone who doesn't want it.

I think I understood you perfectly. You don't want to subscribe to 
another list and combine it with the one you already have. I want people 
to have that capability and I offered you a way to have it your way too 
with one simple step on your end.

This is not rocket science.
From harbour.01 at syenar.hu  Tue Jan 27 02:59:23 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Jan 27 02:59:28 2009
Subject: [Harbour] 2009-01-27 04:30 UTC+0100 Przemyslaw Czerpak 
	(druzus/at/priv.onet.pl)
In-Reply-To: <20090127033041.GA27270@uran.home.aster.pl>
References: <20090127033041.GA27270@uran.home.aster.pl>
Message-ID: <18d502870901262359qe2b19e6t73c997d45da19295@mail.gmail.com>

Hi Przemek,

   * eliminated non portable GCC only C syntax.
>    * updated to compile with other C compilers.


Thanks!


>   TOFIX: harbour/contrib/hbssl/ssl.c[631], sslctx.c[268], sslctx.c[281]
>          error: invalid conversion from 'void*' to 'const char*'
>          I do not know if SSL_get_ex_data()/SSL_CTX_get_app_data()
>          returns valid ASCIIZ string so I cannot decide if simple casting
>          is safe and to pacify above errors.
>          Viktor, can you look at it?


It can return just about anything user passes (including binary
data). [ docs wrongly show these as 'char *'. ] I'll remove these
functions for the time being, as this feature needs some extra
logic to be usable from the Harbour level.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090127/4d289abf/attachment.html
From harbour.01 at syenar.hu  Tue Jan 27 03:22:20 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Jan 27 03:22:25 2009
Subject: [Harbour] Fwd: SF.net SVN: harbour-project:[10057] 
	trunk/harbour/ChangeLog
In-Reply-To: <497E99F7.8070607@philb.us>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>
	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>
	<4970A8AD.5060207@dbtopas.lt> <4976AD2E.5070303@philb.us>
	<18d502870901210043t38aae244x9a88f57b9fced79@mail.gmail.com>
	<4977D631.6000205@philb.us>
	<18d502870901212213t4ab8a60bj91befcc2d8f7cb9@mail.gmail.com>
	<49791D1B.7050500@philb.us>
	<18d502870901230122k1b9fbd82nd858a96691d4f3ae@mail.gmail.com>
	<497E99F7.8070607@philb.us>
Message-ID: <18d502870901270022g3a58c063ua5d9998699ff0071@mail.gmail.com>

Hi Phil,


> I've offered to give you:
>
> 1. If you reply to these messages, the reply goes to the developer list.
> 2. By adding one rule in your email system, you can have them delivered to
> the same developer folder that you already have.
>
> How is that not exactly what you want? I mean, if it's such a big deal that
> you would have to subscribe, I can do that for you.
>
> I think you have totally misunderstood me. I offered not only a way to get
> what you wanted, but I also offered the flexibility to opt out of this
> automated mail for anyone who doesn't want it.
>
> I think I understood you perfectly. You don't want to subscribe to another
> list and combine it with the one you already have. I want people to have
> that capability and I offered you a way to have it your way too with one
> simple step on your end.
>
> This is not rocket science.


For your idea to have a point, we will need _two_ separate
mailing lists, commit@ and commit-diffs@ (let's not use
'svn', as we may change to other versioning in the future),
so that everyone can decide _which_ kind of notification
he wants to have (simple or full with diffs).

Without this option, the extra list is plain pointless, as
again, it's just to _replace_ current ChangeLog e-mails
with automated ones with _similar content and volume_.

Anyhow I feel this will lead to a mess, where some ppl
don't get informed about changes, because not being
subscribed to the other list, and because of this, some
developers will continue to send manual ChangeLogs,
creating double notifications for those who subscribed.
Honestly, I don't like this at all.

In fact, one of the points is to not give opt-out option.
This is a developers' list, the change e-mails are the
_backbone_ of this list, and _all members are receiving
this information since the beginning_. Why would we
suddenly need to change that?

Again, our other, much simpler and consistent option is to
simply swap the manual mails to automated ones, with no
change on any parties side.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090127/c87688b4/attachment.html
From harbour.01 at syenar.hu  Tue Jan 27 03:29:05 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Jan 27 03:29:08 2009
Subject: [Harbour] 2009-01-27 04:30 UTC+0100 Przemyslaw Czerpak 
	(druzus/at/priv.onet.pl)
In-Reply-To: <20090127033041.GA27270@uran.home.aster.pl>
References: <20090127033041.GA27270@uran.home.aster.pl>
Message-ID: <18d502870901270029t4e913211hc3ef2c37fe997dc2@mail.gmail.com>

Hi Przemek,

 * harbour/source/common/hbprintf.c
>    * eliminated non portable GCC only C syntax.
>    * updated to compile with other C compilers.
>      Now only GNUC with C99 support and BORLAND C gives all
>      +inf/-inf/NaN values for [long] double conversions.


Does this seem like something useful for MSVC:
http://www.koders.com/c/fid81D328FDCF6D1084BC3BE9B1A1E04F50140EAF45.aspx

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090127/6ae75412/attachment.html
From info at fsgiudice.com  Tue Jan 27 03:29:57 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Jan 27 03:30:05 2009
Subject: [Harbour] 2009-01-27 00:39 UTC+0100 Viktor Szakats
In-Reply-To: <18d502870901261543x61a3945fj576f14b741f1524b@mail.gmail.com>
References: <18d502870901261543x61a3945fj576f14b741f1524b@mail.gmail.com>
Message-ID: <497EC605.6080807@fsgiudice.com>

Hi Viktor,

Il 27/01/2009 0.43, Viktor Szak?ts ha scritto:
>   ; TOFIX: Ajax test (404 Not Found),
>            Counter (image not found),
>            cgi-bin (broken link),
>            XML database (empty boxes in Chrome, empty boxes
>            and error messagebox with IE8)
>            doesn't work here.
> 
>            Shall I configure something?
> 

yes, as I wrote in readme.txt you have to build hrb modules that you 
find in modules folder. Use bldhrb.bat to build them (it also copies hrb 
result file in ../home/cgi-bin), then you can run tests.
Build all 4 files you find.
I will update index.html to display this warning message.

Thanks for other updates.

Keep me informed if this solve.

Best regards

Francesco
From harbour.01 at syenar.hu  Tue Jan 27 03:34:16 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Jan 27 03:34:24 2009
Subject: [Harbour] 2009-01-27 04:30 UTC+0100 Przemyslaw Czerpak 
	(druzus/at/priv.onet.pl)
In-Reply-To: <20090127033041.GA27270@uran.home.aster.pl>
References: <20090127033041.GA27270@uran.home.aster.pl>
Message-ID: <18d502870901270034k78cc740csb8ad05ad542eb646@mail.gmail.com>

Two links that may be useful sometimes:
stdint.h implemented for MSVC compilers:
http://msinttypes.googlecode.com/svn/trunk/stdint.h

Portable stdint.h implementation:
http://www.azillionmonkeys.com/qed/pstdint.h

Brgds,
Viktor

On Tue, Jan 27, 2009 at 4:30 AM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:

> 2009-01-27 04:30 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbdefs.h
>    * added some C compilers which supports stdint.h
>
>  * harbour/source/common/hbprintf.c
>    * eliminated non portable GCC only C syntax.
>    * updated to compile with other C compilers.
>      Now only GNUC with C99 support and BORLAND C gives all
>      +inf/-inf/NaN values for [long] double conversions.
>      Other compilers uses NaN also for infinite numbers or nothing.
>      Please add full support for them. See TODO notes I left.
>      For compilers which supports C99 floating point macros should
>      be enough to enable the same macros used for GNUC && _ISOC99_SOURCE.
>
>  * harbour/contrib/hbcrypt/sha2.h
>  * harbour/contrib/hbcrypt/sha2.c
>    ! fixed BCC5.5 compilation
>
>   TOFIX: harbour/contrib/hbssl/ssl.c[631], sslctx.c[268], sslctx.c[281]
>          error: invalid conversion from 'void*' to 'const char*'
>          I do not know if SSL_get_ex_data()/SSL_CTX_get_app_data()
>          returns valid ASCIIZ string so I cannot decide if simple casting
>          is safe and to pacify above errors.
>          Viktor, can you look at it?
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090127/19ae5587/attachment.html
From info at fsgiudice.com  Tue Jan 27 03:43:53 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Jan 27 03:44:08 2009
Subject: [Harbour] 2009-01-27 00:39 UTC+0100 Viktor Szakats
In-Reply-To: <497EC605.6080807@fsgiudice.com>
References: <18d502870901261543x61a3945fj576f14b741f1524b@mail.gmail.com>
	<497EC605.6080807@fsgiudice.com>
Message-ID: <497EC949.4010606@fsgiudice.com>

Hi Viktor,

Il 27/01/2009 9.29, Francesco Saverio Giudice ha scritto:
>>            XML database (empty boxes in Chrome, empty boxes
>>            and error messagebox with IE8)

ah, this doesn't works with Chrome, but tested with IE7, FF and Opera.

Best regards

Francesco
From harbour.01 at syenar.hu  Tue Jan 27 03:48:11 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Jan 27 03:48:15 2009
Subject: [Harbour] 2009-01-27 00:39 UTC+0100 Viktor Szakats
In-Reply-To: <497EC605.6080807@fsgiudice.com>
References: <18d502870901261543x61a3945fj576f14b741f1524b@mail.gmail.com>
	<497EC605.6080807@fsgiudice.com>
Message-ID: <18d502870901270048m41b26e25o88a9c24b186ec78a@mail.gmail.com>

Hi Francesco,


>           Shall I configure something?
>>
>>
> yes, as I wrote in readme.txt you have to build hrb modules that you find
> in modules folder. Use bldhrb.bat to build them (it also copies hrb result
> file in ../home/cgi-bin), then you can run tests.
> Build all 4 files you find.


Did that and now everything works great, except this one:
http://localhost:8082/info

info.hrb is in the cgi-bin dir.

I will update index.html to display this warning message.


Thanks, this will be great.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090127/eb881270/attachment-0001.html
From info at fsgiudice.com  Tue Jan 27 03:59:36 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Jan 27 04:00:33 2009
Subject: [Harbour] 2009-01-27 00:39 UTC+0100 Viktor Szakats
In-Reply-To: <18d502870901270048m41b26e25o88a9c24b186ec78a@mail.gmail.com>
References: <18d502870901261543x61a3945fj576f14b741f1524b@mail.gmail.com>	<497EC605.6080807@fsgiudice.com>
	<18d502870901270048m41b26e25o88a9c24b186ec78a@mail.gmail.com>
Message-ID: <497ECCF8.5050008@fsgiudice.com>

Hi Viktor,

> Did that and now everything works great, except this one:
> http://localhost:8082/info
>  
> info.hrb is in the cgi-bin dir.

just seen.
> 
>     I will update index.html to display this warning message.
> 
> Thanks, this will be great.
> 

Thanks to you

Best regards

Francesco
From info at fsgiudice.com  Tue Jan 27 04:16:18 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Jan 27 04:16:23 2009
Subject: [Harbour] 2009-01-27 10:14 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
Message-ID: <497ED0E2.5070709@fsgiudice.com>

2009-01-27 10:14 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   * harbour/contrib/examples/uhttpd/uhttpd.prg
     * Fixed APP_NAME that causes wrong ini file name and than error
       loading aliases from uhttpd.ini


Best regards

Francesco
From info at fsgiudice.com  Tue Jan 27 04:17:09 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Jan 27 04:17:17 2009
Subject: [Harbour] 2009-01-27 00:39 UTC+0100 Viktor Szakats
In-Reply-To: <497ECCF8.5050008@fsgiudice.com>
References: <18d502870901261543x61a3945fj576f14b741f1524b@mail.gmail.com>	<497EC605.6080807@fsgiudice.com>	<18d502870901270048m41b26e25o88a9c24b186ec78a@mail.gmail.com>
	<497ECCF8.5050008@fsgiudice.com>
Message-ID: <497ED115.4060609@fsgiudice.com>

Hi Viktor,

Il 27/01/2009 9.59, Francesco Saverio Giudice ha scritto:
>> Did that and now everything works great, except this one:
>> http://localhost:8082/info
>>  
>> info.hrb is in the cgi-bin dir.
> 
> just seen.


should be ok after
2009-01-27 10:14 UTC+0100 Francesco Saverio Giudice

Best regards

Francesco
From harbour.01 at syenar.hu  Tue Jan 27 04:41:01 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Jan 27 04:41:05 2009
Subject: [Harbour] 2009-01-27 00:39 UTC+0100 Viktor Szakats
In-Reply-To: <497ED115.4060609@fsgiudice.com>
References: <18d502870901261543x61a3945fj576f14b741f1524b@mail.gmail.com>
	<497EC605.6080807@fsgiudice.com>
	<18d502870901270048m41b26e25o88a9c24b186ec78a@mail.gmail.com>
	<497ECCF8.5050008@fsgiudice.com> <497ED115.4060609@fsgiudice.com>
Message-ID: <18d502870901270141k685613b0vc1cbc5325c3d4230@mail.gmail.com>

Many thanks Francesco, now it's perfect.
What do you think of making uhttpd a library?
This way it could easily be embedded in other apps.
This would need some generalizations here
and there, plus detaching the UI. This way it
could become an hbhttpd.lib, launchable from
any apps using one function call, and probably
some hooks to get feedback on what's going on.

Brgds,
Viktor

On Tue, Jan 27, 2009 at 10:17 AM, Francesco Saverio Giudice <
info@fsgiudice.com> wrote:

> Hi Viktor,
>
> Il 27/01/2009 9.59, Francesco Saverio Giudice ha scritto:
>
>> Did that and now everything works great, except this one:
>>> http://localhost:8082/info
>>>  info.hrb is in the cgi-bin dir.
>>>
>>
>> just seen.
>>
>
>
> should be ok after
> 2009-01-27 10:14 UTC+0100 Francesco Saverio Giudice
>
>
> Best regards
>
> Francesco
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090127/e2f5e171/attachment.html
From mbelgrano at deltain.it  Tue Jan 27 05:22:01 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jan 27 05:22:04 2009
Subject: [Harbour] Question about re-routing Windows API to an Ajax Web
Message-ID: <609353e70901270222r4052b326n84be8a7514f56795@mail.gmail.com>

Hi Randy
Wich is the actual situation of this project?
re-routing Windows API to an Ajax Web client can be a intresting feature
for harbour gt?
Other people are interested?


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Randy Portnoff
Sent: Tuesday, August 07, 2007 5:32 PM
To: Harbour Project Main Developer List.; Harbour Project Main Developer
List.
Subject: Re: [Harbour] Viewer <-> XML <-> Application (was multi UI)

Hi all,

I am not sure if this helps you, but we are currently porting our
Windows app to Ajax - We intend on re-routing all the Windows API code
with calls to an Ajax Web client. We are developing an XML schema to
describe the user events and responses from the server.
There will be one instance of the Win32 EXE running on one or more
servers (ie. server farms) for each web client instance. See the
attached diagram as an example of how we are implementing this. This
framework allows us to offer both a Windows and web client using the
same source code base.

Regards,
Randy.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090127/369a1f4d/attachment.html
From jfl at mafact.com  Tue Jan 27 05:27:00 2009
From: jfl at mafact.com (J. Lefebvre)
Date: Tue Jan 27 05:27:48 2009
Subject: [Harbour] Question about re-routing Windows API to an Ajax Web
Message-ID: <e1e59921.1c98069.a533d40.1d2a@mafact.com>

Yes I am J
 
For sure !
 
Regards,
 
JF,
 
De : harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] De la part de Massimo Belgrano
Envoy? : mardi 27 janvier 2009 11:22
? : Harbour Project Main Developer List.
Objet : [Harbour] Question about re-routing Windows API to an Ajax Web
 

Hi Randy
Wich is the actual situation of this project?
re-routing Windows API to an Ajax Web client can be a intresting feature
for harbour gt?
Other people are interested?


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Randy Portnoff
Sent: Tuesday, August 07, 2007 5:32 PM
To: Harbour Project Main Developer List.; Harbour Project Main Developer
List.
Subject: Re: [Harbour] Viewer <-> XML <-> Application (was multi UI)

Hi all,

I am not sure if this helps you, but we are currently porting our
Windows app to Ajax - We intend on re-routing all the Windows API code
with calls to an Ajax Web client. We are developing an XML schema to
describe the user events and responses from the server.
There will be one instance of the Win32 EXE running on one or more
servers (ie. server farms) for each web client instance. See the
attached diagram as an example of how we are implementing this. This
framework allows us to offer both a Windows and web client using the
same source code base.

Regards,
Randy.


 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090127/32719486/attachment.html
From info at fsgiudice.com  Tue Jan 27 05:39:54 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Jan 27 05:40:40 2009
Subject: [Harbour] 2009-01-27 00:39 UTC+0100 Viktor Szakats
In-Reply-To: <18d502870901270141k685613b0vc1cbc5325c3d4230@mail.gmail.com>
References: <18d502870901261543x61a3945fj576f14b741f1524b@mail.gmail.com>	<497EC605.6080807@fsgiudice.com>	<18d502870901270048m41b26e25o88a9c24b186ec78a@mail.gmail.com>	<497ECCF8.5050008@fsgiudice.com>
	<497ED115.4060609@fsgiudice.com>
	<18d502870901270141k685613b0vc1cbc5325c3d4230@mail.gmail.com>
Message-ID: <497EE47A.1020907@fsgiudice.com>

Hi Viktor,

Il 27/01/2009 10.41, Viktor Szak?ts ha scritto:
> Many thanks Francesco, now it's perfect.
> 

Thank you

> What do you think of making uhttpd a library? 
> This way it could easily be embedded in other apps.
> This would need some generalizations here 
> and there, plus detaching the UI. This way it 
> could become an hbhttpd.lib, launchable from 
> any apps using one function call, and probably 
> some hooks to get feedback on what's going on.
> 
What I'm need now is to have a complete web server (with SSL support, 
sessions support, database sharing helper functions, cache support (?), 
...) and multiplatform (removing actual embedded WIN_* API calls or 
better moving them into harbour core making them multiplatform, like 
SETENV or SYSREFRESH).
After, or in the middle, we can think to move all inside a single 
function call and move it in a library so can be embedded, that is not 
so difficult (I will try, but it has a lower priority than finish web 
server).
Another thing is to create a final version of cgi lib to use with web 
server and integrate it to uhttpd (actually I have a mine minicgi.lib 
that I'm using and with I have built testcgi.exe) as definitive version 
to use in harbour (now there are 2 or 3 around).
Tell me if it is ok as path.

Do you have tested also testcgi.exe as I wrote in Changelog ?

Best regards

Francesco
From harbour.01 at syenar.hu  Tue Jan 27 07:02:08 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Jan 27 07:02:11 2009
Subject: [Harbour] 2009-01-27 00:39 UTC+0100 Viktor Szakats
In-Reply-To: <497EE47A.1020907@fsgiudice.com>
References: <18d502870901261543x61a3945fj576f14b741f1524b@mail.gmail.com>
	<497EC605.6080807@fsgiudice.com>
	<18d502870901270048m41b26e25o88a9c24b186ec78a@mail.gmail.com>
	<497ECCF8.5050008@fsgiudice.com> <497ED115.4060609@fsgiudice.com>
	<18d502870901270141k685613b0vc1cbc5325c3d4230@mail.gmail.com>
	<497EE47A.1020907@fsgiudice.com>
Message-ID: <18d502870901270402l43a7d6bet93acdedb39cfe21f@mail.gmail.com>

Hi Francesco,


> What do you think of making uhttpd a library? This way it could easily be
>> embedded in other apps.
>> This would need some generalizations here and there, plus detaching the
>> UI. This way it could become an hbhttpd.lib, launchable from any apps using
>> one function call, and probably some hooks to get feedback on what's going
>> on.
>>
>>  What I'm need now is to have a complete web server (with SSL support,
> sessions support, database sharing helper functions, cache support (?), ...)
> and multiplatform (removing actual embedded WIN_* API calls or better moving
> them into harbour core making them multiplatform, like SETENV or
> SYSREFRESH).
> After, or in the middle, we can think to move all inside a single function
> call and move it in a library so can be embedded, that is not so difficult
> (I will try, but it has a lower priority than finish web server).
> Another thing is to create a final version of cgi lib to use with web
> server and integrate it to uhttpd (actually I have a mine minicgi.lib that
> I'm using and with I have built testcgi.exe) as definitive version to use in
> harbour (now there are 2 or 3 around).
> Tell me if it is ok as path.


Looks perfect to me. We should also tidy up the
source from xhb.lib and hbcompat.ch dependent
parts, but it's just a few places.

Proper CGI lib would be nice, we have one in hbtip,
how's that one?


> Do you have tested also testcgi.exe as I wrote in Changelog ?


Yes, and it's working fine, too.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090127/c05d41d9/attachment.html
From rodrmigu at gmail.com  Tue Jan 27 07:14:41 2009
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Tue Jan 27 07:14:44 2009
Subject: [Harbour] Compact .HRB or encrypt string in .HRB
In-Reply-To: <COL103-DS11A8CDC48EEAB07A6862C8DCCB0@phx.gbl>
References: <COL103-DS11A8CDC48EEAB07A6862C8DCCB0@phx.gbl>
Message-ID: <80b05d460901270414i5bca173clcfe832b4c7d9c9af@mail.gmail.com>

S?rgio,

I use .hrb a lot and I write them inside of my RDBMS. So I use the
Base64 to convert binaries files to a ASC string like Base64. Here are
the functions that I use:

Function Base64Decode( cFile, cData )
    Local oEncoder
    Local nHandle
    Local result := .t.

    oEncoder := TIPEncoder():New( "base64" )

    if (nHandle := FCreate(cFile)) != -1
        cData := oEncoder:Decode(cData)
        FWrite(nHandle, cData)
        FClose(nHandle)
    else
        result := .f.
    endif
return result


Function Base64Encode( cFile, cData )
    Local oEncoder
    Local cBuffer := Space(1024)
    Local nHandle
    Local nLen
    Local result := .t.

    oEncoder := TIPEncoder():New( "base64" )

    if (nHandle := FOpen(cFile)) != -1
        cData := ""
        nLen := FRead( nHandle, @cBuffer, 1024 )

        do while nLen > 0
            if nLen < 1024
                cData += Substr( cBuffer, 1, nLen )
            else
                cData += cBuffer
            endif
            nLen := FRead( nHandle, @cBuffer, 1024 )
        enddo

        cData := oEncoder:Encode(cData)
        FClose(nHandle)
    else
        result := .f.
    endif
return result

Regards,
Rodrigo



On Mon, Jan 26, 2009 at 11:38 PM, S?rgio Kondo <cigcor@hotmail.com> wrote:
> Hi,
> Is possible to compact .hrb files or encrypt string in .hrb files?
> My interest is hide password string in .hrb files, if I put password string
> in this file.
> S?rgio
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
From druzus at acn.waw.pl  Tue Jan 27 07:42:06 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jan 27 07:37:56 2009
Subject: [Harbour] Compact .HRB or encrypt string in .HRB
In-Reply-To: <COL103-DS11A8CDC48EEAB07A6862C8DCCB0@phx.gbl>
References: <COL103-DS11A8CDC48EEAB07A6862C8DCCB0@phx.gbl>
Message-ID: <20090127124206.GA18086@uran.home.aster.pl>

On Mon, 26 Jan 2009, S?rgio Kondo wrote:

Hi,

> Is possible to compact .hrb files or encrypt string in .hrb files?
> My interest is hide password string in .hrb files, if I put password
> string in this file.

You can make anything what you want with .hrb files body. You only
have to decode it before you will call HB_HRBLOAD( <cHrbBody> ), f.e.
you can use this function to compress and encrypt .hrb files:

   proc encode_hrb( cKey )
      local cHrbBody, file
      for each file in directory( "*.hrb" )
         cHrbBody := hb_memoread( file[ 1 ] )
         if !empty( cHrbBody )
            cHrbBody := hb_zcompress( cHrbBody )
            cHrbBody := sx_encrypt( cHrbBody, cKey )
            hb_memowrit( file[ 1 ] + "enc", cHrbBody )
         endif
      next
      return

and this one to load such files:

   proc load_hrb( cKey, cFile, /* init function parameters*/ ... )
      local cHrbBody
      cHrbBody := hb_memoread( cFile )
      cHrbBody := sx_decrypt( cHrbBody, cKey )
      cHrbBody := hb_zuncompress( cHrbBody )
      hb_hrbLoad( cHrbBody, ... )
      return

In both functions <cKey> is used as encryption key. It's not strong
encryption but for simple string hiding should be enough.

best regards,
Przemek
From rportnoff at spendmap.com  Tue Jan 27 08:45:51 2009
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Tue Jan 27 08:46:40 2009
Subject: [Harbour] Question about re-routing Windows API to an Ajax
  Web
In-Reply-To: <609353e70901270222r4052b326n84be8a7514f56795@mail.gmail.co
 m>
References: <609353e70901270222r4052b326n84be8a7514f56795@mail.gmail.com>
Message-ID: <B0086211570@ms1.3peaks.com>

Hi Massimo,

We have been working on this project for over a year now and we are 
almost finished - There were some bumps along the way. The framework 
is tied tightly to our app so I do not think it could be easily used 
by others. In addition, I have two partners who do not want to 
release the code for this framework at this time - If anything 
changes in this regard I will certainly let you know.

Regards,
Randy.

At 05:22 AM 1/27/2009, you wrote:

>Hi Randy
>Wich is the actual situation of this project?
>re-routing Windows API to an Ajax Web client can be a intresting feature
>for harbour gt?
>Other people are interested?
>
>
>-----Original Message-----
>From: 
><mailto:harbour-bounces@harbour-project.org>harbour-bounces@harbour-project.org
>[mailto:harbour-bounces@harbour-project.org] On Behalf Of Randy Portnoff
>Sent: Tuesday, August 07, 2007 5:32 PM
>To: Harbour Project Main Developer List.; Harbour Project Main Developer
>List.
>Subject: Re: [Harbour] Viewer <-> XML <-> Application (was multi UI)
>
>Hi all,
>
>I am not sure if this helps you, but we are currently porting our
>Windows app to Ajax - We intend on re-routing all the Windows API code
>with calls to an Ajax Web client. We are developing an XML schema to
>describe the user events and responses from the server.
>There will be one instance of the Win32 EXE running on one or more
>servers (ie. server farms) for each web client instance. See the
>attached diagram as an example of how we are implementing this. This
>framework allows us to offer both a Windows and web client using the
>same source code base.
>
>Regards,
>Randy.
>
>
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090127/c3ebef69/attachment.html
From lorenzo.fiorini at gmail.com  Tue Jan 27 08:54:08 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Jan 27 08:54:13 2009
Subject: [Harbour] 2009-01-27 00:39 UTC+0100 Viktor Szakats
In-Reply-To: <18d502870901270402l43a7d6bet93acdedb39cfe21f@mail.gmail.com>
References: <18d502870901261543x61a3945fj576f14b741f1524b@mail.gmail.com>
	<497EC605.6080807@fsgiudice.com>
	<18d502870901270048m41b26e25o88a9c24b186ec78a@mail.gmail.com>
	<497ECCF8.5050008@fsgiudice.com> <497ED115.4060609@fsgiudice.com>
	<18d502870901270141k685613b0vc1cbc5325c3d4230@mail.gmail.com>
	<497EE47A.1020907@fsgiudice.com>
	<18d502870901270402l43a7d6bet93acdedb39cfe21f@mail.gmail.com>
Message-ID: <9257026e0901270554m53d54a93ia2c39034c415b0ef@mail.gmail.com>

On Tue, Jan 27, 2009 at 1:02 PM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:

> Proper CGI lib would be nice, we have one in hbtip,
> how's that one?

Perfect, I use it everyday.

best regards,
Lorenzo
From mbelgrano at deltain.it  Tue Jan 27 09:13:55 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jan 27 09:13:58 2009
Subject: [Harbour] Question about re-routing Windows API to an Ajax Web
In-Reply-To: <B0086211570@ms1.3peaks.com>
References: <609353e70901270222r4052b326n84be8a7514f56795@mail.gmail.com>
	<B0086211570@ms1.3peaks.com>
Message-ID: <609353e70901270613g79023522t9e4a0e31e0b65c18@mail.gmail.com>

Thanks for clarification
i am interested to better understanding
you maintain same harbour source code from desktop app to webapp?
How complex is this source code?
Have a little demo?


2009/1/27 Randy Portnoff <rportnoff@spendmap.com>

>  Hi Massimo,
>
> We have been working on this project for over a year now and we are almost
> finished - There were some bumps along the way. The framework is tied
> tightly to our app so I do not think it could be easily used by others. In
> addition, I have two partners who do not want to release the code for this
> framework at this time - If anything changes in this regard I will certainly
> let you know.
>
> Regards,
> Randy.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090127/b557d58a/attachment.html
From rportnoff at spendmap.com  Tue Jan 27 09:25:55 2009
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Tue Jan 27 09:25:39 2009
Subject: [Harbour] Question about re-routing Windows API to an Ajax
  Web
In-Reply-To: <609353e70901270613g79023522t9e4a0e31e0b65c18@mail.gmail.co
 m>
References: <609353e70901270222r4052b326n84be8a7514f56795@mail.gmail.com>
	<B0086211570@ms1.3peaks.com>
	<609353e70901270613g79023522t9e4a0e31e0b65c18@mail.gmail.com>
Message-ID: <B0086212524@ms1.3peaks.com>


>i am interested to better understanding
>you maintain same harbour source code from desktop app to webapp?

There are two parts - The first part is the re-routing of my Windows 
app so that all UI goes to a central function - This function uses 
TCP/IP and XML to communicate with the Ajax web side. Therefore, the 
same app with the same source code can run as a Windows or web 
client. When run as a web client, an app EXE is spawned for each 
logged in user.

>How complex is this source code?

My app was originally written to centralize all UI to a common place. 
Therefore, very little of my app needed to change - I simply needed 
to re-route any UI code to a new place. I then simulate Windows 
events (eg. user clicking on a button) when events come in from the 
web - This allows all my message handling to remain untouched. So, 
the code on the app side is fairly straight forward. However, the 
Java/.NET code is VERY complex and sophisticated. We originally 
wanted to target all browsers but there seemed to be too many 
browser-specific issues so we opted for support of only IE 7/8 and FireFox 2/3.

>Have a little demo?

Not yet but soon...


>2009/1/27 Randy Portnoff 
><<mailto:rportnoff@spendmap.com>rportnoff@spendmap.com>
>Hi Massimo,
>
>We have been working on this project for over a year now and we are 
>almost finished - There were some bumps along the way. The framework 
>is tied tightly to our app so I do not think it could be easily used 
>by others. In addition, I have two partners who do not want to 
>release the code for this framework at this time - If anything 
>changes in this regard I will certainly let you know.
>
>Regards,
>Randy.
>
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090127/19460614/attachment-0001.html
From druzus at acn.waw.pl  Tue Jan 27 09:31:27 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jan 27 09:27:15 2009
Subject: [Harbour] 2009-01-27 15:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090127143127.GA18111@uran.home.aster.pl>

2009-01-27 15:31 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/common/hbprintf.c
    ! fixed two bugs in conversions

best regards
Przemek
From mbelgrano at deltain.it  Tue Jan 27 09:45:33 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jan 27 09:45:37 2009
Subject: [Harbour] Question about re-routing Windows API to an Ajax Web
In-Reply-To: <B0086212524@ms1.3peaks.com>
References: <609353e70901270222r4052b326n84be8a7514f56795@mail.gmail.com>
	<B0086211570@ms1.3peaks.com>
	<609353e70901270613g79023522t9e4a0e31e0b65c18@mail.gmail.com>
	<B0086212524@ms1.3peaks.com>
Message-ID: <609353e70901270645p110387f3q1cbf61797d807e75@mail.gmail.com>

> There are two parts - The first part is the re-routing of my Windows app so
> that all UI goes to a central function - This function uses TCP/IP and XML
> to communicate with the Ajax web side. Therefore, the same app with the same
> source code can run as a Windows or web client. When run as a web client, an
> app EXE is spawned for each logged in user.
>

Intresting for example button function you use
randy_userinterface("button","test",{randy_action()}
inside randy_userinterface you have a function that is able to go to win32
or use tcpip to webserver using ajax
you can't use get system as compatibility layer or any gt?
Wich rdd are you using?

Why When run as a web client, an app EXE is spawned for each logged in user?


My app was originally written to centralize all UI to a common place.
> Therefore, very little of my app needed to change - I simply needed to
> re-route any UI code to a new place. I then simulate Windows events (eg.
> user clicking on a button) when events come in from the web - This allows
> all my message handling to remain untouched. So, the code on the app side is
> fairly straight forward. However, the Java/.NET code is VERY complex and
> sophisticated. We originally wanted to target all browsers but there seemed
> to be too many browser-specific issues so we opted for support of only IE
> 7/8 and FireFox 2/3.
>

and i think Google Chome in future becase is very good for speed
Harbour app uses TCP/IP and XML to communicate with the Ajax web side.
the server side is Java or wich languages of .NET ?


> Have a little demo?
>
> Not yet but soon...
>

Tell me informed
also same  print screen will be very intresting
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090127/e59ed538/attachment.html
From rportnoff at spendmap.com  Tue Jan 27 10:05:05 2009
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Tue Jan 27 10:04:48 2009
Subject: [Harbour] Question about re-routing Windows API to an Ajax
  Web
In-Reply-To: <609353e70901270645p110387f3q1cbf61797d807e75@mail.gmail.co
 m>
References: <609353e70901270222r4052b326n84be8a7514f56795@mail.gmail.com>
	<B0086211570@ms1.3peaks.com>
	<609353e70901270613g79023522t9e4a0e31e0b65c18@mail.gmail.com>
	<B0086212524@ms1.3peaks.com>
	<609353e70901270645p110387f3q1cbf61797d807e75@mail.gmail.com>
Message-ID: <B0086213356@ms1.3peaks.com>


>There are two parts - The first part is the re-routing of my Windows 
>app so that all UI goes to a central function - This function uses 
>TCP/IP and XML to communicate with the Ajax web side. Therefore, the 
>same app with the same source code can run as a Windows or web 
>client. When run as a web client, an app EXE is spawned for each 
>logged in user.
>
>Intresting for example button function you use
>randy_userinterface("button","test",{randy_action()}
>inside randy_userinterface you have a function that is able to go to 
>win32 or use tcpip to webserver using ajax

I receive a button event (as XML) from the web side - I then simulate 
this event in the app by posting a WM_LBUTTONDOWN and WM_LBUTTONUP 
message to my event handler - At this point, my app does not care if 
the event came from Windows of the Web.

>you can't use get system as compatibility layer or any gt?

We tried to implement field masking (similar to the get system) but 
it was too slow for each keystroke. Therefore, the user can enter 
whatever they want into a field - As soon as they leave the field, 
the field mask is enforced. If the data violates the field mask, 
input focus remains on the field and the field mask is displayed so 
the user knows how to enter the data.

>Wich rdd are you using?

ADS (local), ADS (server) and SQL (Mediator).

>Why When run as a web client, an app EXE is spawned for each logged in user?

We were not ready to convert our app to be multi-threaded so this 
seemed like the best alternative and actually works quite well. We 
may convert the app to be multi-threaded so that only a single app 
instance is required per server. However, as mentioned, it runs very 
well like this so we may just leave it as is - It's much simpler!

>
>
>My app was originally written to centralize all UI to a common 
>place. Therefore, very little of my app needed to change - I simply 
>needed to re-route any UI code to a new place. I then simulate 
>Windows events (eg. user clicking on a button) when events come in 
>from the web - This allows all my message handling to remain 
>untouched. So, the code on the app side is fairly straight forward. 
>However, the Java/.NET code is VERY complex and sophisticated. We 
>originally wanted to target all browsers but there seemed to be too 
>many browser-specific issues so we opted for support of only IE 7/8 
>and FireFox 2/3.
>
>
>and i think Google Chome in future becase is very good for speed
>Harbour app uses TCP/IP and XML to communicate with the Ajax web side.
>the server side is Java or wich languages of .NET ?
>
>>Have a little demo?
>Not yet but soon...
>
>
>Tell me informed
>also same  print screen will be very intresting
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090127/742469c1/attachment.html
From cigcor at hotmail.com  Tue Jan 27 11:05:03 2009
From: cigcor at hotmail.com (=?UTF-8?Q?S=C3=A9rgio_Kondo?=)
Date: Tue Jan 27 10:21:22 2009
Subject: [Harbour] Compact .HRB or encrypt string in .HRB
In-Reply-To: <20090127124206.GA18086@uran.home.aster.pl>
References: <COL103-DS11A8CDC48EEAB07A6862C8DCCB0@phx.gbl>
	<20090127124206.GA18086@uran.home.aster.pl>
Message-ID: <COL103-DS21726EA51A0CE4E222BA0EDCCB0@phx.gbl>

Thanks Przemek and Rodrigo.
S?rgio
--------------------------------------------------
From: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
Sent: Tuesday, January 27, 2009 9:42 AM
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Subject: Re: [Harbour] Compact .HRB or encrypt string in .HRB

> On Mon, 26 Jan 2009, S?rgio Kondo wrote:
>
> Hi,
>
>> Is possible to compact .hrb files or encrypt string in .hrb files?
>> My interest is hide password string in .hrb files, if I put password
>> string in this file.
>
> You can make anything what you want with .hrb files body. You only
> have to decode it before you will call HB_HRBLOAD( <cHrbBody> ), f.e.
> you can use this function to compress and encrypt .hrb files:
>
>   proc encode_hrb( cKey )
>      local cHrbBody, file
>      for each file in directory( "*.hrb" )
>         cHrbBody := hb_memoread( file[ 1 ] )
>         if !empty( cHrbBody )
>            cHrbBody := hb_zcompress( cHrbBody )
>            cHrbBody := sx_encrypt( cHrbBody, cKey )
>            hb_memowrit( file[ 1 ] + "enc", cHrbBody )
>         endif
>      next
>      return
>
> and this one to load such files:
>
>   proc load_hrb( cKey, cFile, /* init function parameters*/ ... )
>      local cHrbBody
>      cHrbBody := hb_memoread( cFile )
>      cHrbBody := sx_decrypt( cHrbBody, cKey )
>      cHrbBody := hb_zuncompress( cHrbBody )
>      hb_hrbLoad( cHrbBody, ... )
>      return
>
> In both functions <cKey> is used as encryption key. It's not strong
> encryption but for simple string hiding should be enough.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
From druzus at acn.waw.pl  Tue Jan 27 10:34:13 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jan 27 10:30:02 2009
Subject: [Harbour] 2009-01-27 16:33 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090127153413.GA3976@uran.home.aster.pl>

2009-01-27 16:33 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbdefs.h
    * include stdint.h in DJGPP >= 2.4

  * harbour/source/common/hbprintf.c
    ! fixed DJGPP <= 2.3 compilation

  * harbour/source/common/hbstr.c
    * force buffer ending in DJGPP <= 2.3 when vsprintf() is used

  * harbour/source/rtl/hbproces.c
    ! fixed typo in HB_SYMBOL_UNUSED() variable name

  * harbour/config/dos/global.cf
    ! fixed for GNU make ports which prefer COMSPEC before SHELL

best regards
Przemek
From bedipritpal at hotmail.com  Tue Jan 27 10:53:37 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Jan 27 10:53:42 2009
Subject: [Harbour] 2009-01-26 15:07 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <18d502870901261533g45bbebees58d1ab22431cac49@mail.gmail.com>
References: <21674231.post@talk.nabble.com>
	<18d502870901261533g45bbebees58d1ab22431cac49@mail.gmail.com>
Message-ID: <21688095.post@talk.nabble.com>


Viktor


Viktor Szak?ts wrote:
> 
> This was originally my addition, but Przemek was nice to commit it
> on my behalf. Anyway, I think you should look for some more information
> regarding "layered window" mode, because one of it's points is to
> reduce flickering and unnecessary redraw requests. You ask Windows
> to manage the bitmap and you only need to update it when a real update
> occurs (but not, when the window is just moved around or gets focus).
> So this isn't a magic switch, and you may need to tweak the way
> WVG windows are updated to exploit it's possibilities in a good way.
> 
> This link is good for a start, but probably not enough to finish:
> http://msdn.microsoft.com/en-us/library/ms997507.aspx
> 
> [ Surprisingly Vista removed support for layered windows,
> so it may also happen that we should tweak this feature
> when running under Vista. I've already turned it off for TS mode,
> because of bad performance. ]
> 

I am aware of this fact, but surprisingly, after implementing it,
my applns behaved contrary to this fact. A lot of flickering occured.
So I disabled it until I find the real cause why it is happening so.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/2009-01-26-15%3A07-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp21674231p21688095.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Tue Jan 27 10:58:55 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Jan 27 10:58:58 2009
Subject: [Harbour] 2009-01-27 10:14 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
In-Reply-To: <497ED0E2.5070709@fsgiudice.com>
References: <497ED0E2.5070709@fsgiudice.com>
Message-ID: <21688199.post@talk.nabble.com>


Hi All

After examining the uhttpd implimentation I am 
wondering if .hrb code can be loaded once and reused
with every next request. That way this will come at par
with Xbase++'s WAA (Web Application Adopter) protocol 
where program DLL (called package) is loaded only once.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2009-01-27-10%3A14-UTC%2B0100-Francesco-Saverio-Giudice-%28info-at-fsgiudice.com%29-tp21681995p21688199.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Tue Jan 27 11:04:08 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jan 27 10:59:57 2009
Subject: [Harbour] 2009-01-27 17:03 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090127160408.GA27175@uran.home.aster.pl>

2009-01-27 17:03 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/dos/dir.cf
  * harbour/config/dos/install.cf
    ! fixed for GNU make ports which prefer COMSPEC before SHELL

best regards
Przemek
From dbtopas at dbtopas.lt  Tue Jan 27 11:00:35 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Jan 27 11:00:29 2009
Subject: [Harbour] Compact .HRB or encrypt string in .HRB
In-Reply-To: <COL103-DS11A8CDC48EEAB07A6862C8DCCB0@phx.gbl>
References: <COL103-DS11A8CDC48EEAB07A6862C8DCCB0@phx.gbl>
Message-ID: <497F2FA3.4000700@dbtopas.lt>

S?rgio Kondo wrote:
> Hi,
> Is possible to compact .hrb files or encrypt string in .hrb files?
> My interest is hide password string in .hrb files, if I put password 
> string in this file.
> S?rgio

Hi,


I do not know how strong encryption you want to have. Simple
   #pragma texthidden(1)
could hide a string.


Regards,
Mindaugas
From druzus at acn.waw.pl  Tue Jan 27 11:23:27 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jan 27 11:19:15 2009
Subject: [Harbour] 2009-01-27 17:23 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090127162327.GA10503@uran.home.aster.pl>

2009-01-27 17:23 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/dos/owatcom.cf
    * increased max library page size (-p=32 => -p=64)

best regards
Przemek
From info at fsgiudice.com  Tue Jan 27 12:45:13 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Jan 27 12:45:19 2009
Subject: [Harbour] 2009-01-27 10:14 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
In-Reply-To: <21688199.post@talk.nabble.com>
References: <497ED0E2.5070709@fsgiudice.com> <21688199.post@talk.nabble.com>
Message-ID: <497F4829.1080901@fsgiudice.com>

Hi Pritpal,

Il 27/01/2009 16.58, Pritpal Bedi ha scritto:
> Hi All
> 
> After examining the uhttpd implimentation I am 
> wondering if .hrb code can be loaded once and reused
> with every next request. That way this will come at par
> with Xbase++'s WAA (Web Application Adopter) protocol 
> where program DLL (called package) is loaded only once.
> 
this is one point in my todo list, but I don't know if there are any 
problems storing hrb modules in memory and reuse them.

What happens to loaded symbol table ? because every modules will have 
HRBMAIN() and could have same other function names.
And another: what is faster ? Load from file using __HRBLOAD() / 
__HRBUNLOAD() or scanning and array / hash table every time ? I suppose 
the second, but I have doubts on symbol table.

Przemek, Viktor ?

Best regards

Francesco

From harbour.01 at syenar.hu  Tue Jan 27 13:20:04 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Jan 27 13:20:10 2009
Subject: [Harbour] 2009-01-27 10:14 UTC+0100 Francesco Saverio Giudice 
	(info/at/fsgiudice.com)
In-Reply-To: <497F4829.1080901@fsgiudice.com>
References: <497ED0E2.5070709@fsgiudice.com> <21688199.post@talk.nabble.com>
	<497F4829.1080901@fsgiudice.com>
Message-ID: <18d502870901271020q46deaf1amc58862fb5eafa704@mail.gmail.com>

I think the .hrb modules aren't loaded on a per thread basis, so
it's not like several of them could be loaded in parallel.

As far as I see from the sources, loading an .hrb from
memory is already supported, if you pass the .hrb as a
string to the HB_HRBLOAD() function. Maybe a separate
HB_HRBLOADFROMMEMORY() would be more clear.

[ BTW I'd recommend using HB_HRB*() names instead of the
obsolete __HRB*() ones. ]

Brgds,
Viktor

On Tue, Jan 27, 2009 at 6:45 PM, Francesco Saverio Giudice <
info@fsgiudice.com> wrote:

> Hi Pritpal,
>
> Il 27/01/2009 16.58, Pritpal Bedi ha scritto:
>
>> Hi All
>>
>> After examining the uhttpd implimentation I am wondering if .hrb code can
>> be loaded once and reused
>> with every next request. That way this will come at par
>> with Xbase++'s WAA (Web Application Adopter) protocol where program DLL
>> (called package) is loaded only once.
>>
>>  this is one point in my todo list, but I don't know if there are any
> problems storing hrb modules in memory and reuse them.
>
> What happens to loaded symbol table ? because every modules will have
> HRBMAIN() and could have same other function names.
> And another: what is faster ? Load from file using __HRBLOAD() /
> __HRBUNLOAD() or scanning and array / hash table every time ? I suppose the
> second, but I have doubts on symbol table.
>
> Przemek, Viktor ?
>
> Best regards
>
> Francesco
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090127/fabd8bbc/attachment.html
From info at fsgiudice.com  Tue Jan 27 18:36:15 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Jan 27 18:36:31 2009
Subject: [Harbour] 2009-01-27 10:14 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
In-Reply-To: <18d502870901271020q46deaf1amc58862fb5eafa704@mail.gmail.com>
References: <497ED0E2.5070709@fsgiudice.com>
	<21688199.post@talk.nabble.com>	<497F4829.1080901@fsgiudice.com>
	<18d502870901271020q46deaf1amc58862fb5eafa704@mail.gmail.com>
Message-ID: <497F9A6F.4040107@fsgiudice.com>


Il 27/01/2009 19.20, Viktor Szak?ts ha scritto:
> I think the .hrb modules aren't loaded on a per thread basis, so 
> it's not like several of them could be loaded in parallel.
>

This should be Przemek to clear. What happens in this case ? Are they MT 
  safe ? In uhttpd they *can be loaded* in parallel in different threads.
One thing I may do is to serialize them to a single-specific thread that 
  can run hrb modules one after another and store them to avoid next 
file load. Is this the way ?


> As far as I see from the sources, loading an .hrb from 
> memory is already supported, if you pass the .hrb as a 
> string to the HB_HRBLOAD() function. 

Yes I know.

Maybe a separate
> HB_HRBLOADFROMMEMORY() would be more clear.
> 
> [ BTW I'd recommend using HB_HRB*() names instead of the 
> obsolete __HRB*() ones. ]
> 

Done, I will upload in next commit

Best regards,

Francesco
From harbour.01 at syenar.hu  Tue Jan 27 19:02:42 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Jan 27 19:02:50 2009
Subject: [Harbour] 2009-01-27 10:14 UTC+0100 Francesco Saverio Giudice 
	(info/at/fsgiudice.com)
In-Reply-To: <497F9A6F.4040107@fsgiudice.com>
References: <497ED0E2.5070709@fsgiudice.com> <21688199.post@talk.nabble.com>
	<497F4829.1080901@fsgiudice.com>
	<18d502870901271020q46deaf1amc58862fb5eafa704@mail.gmail.com>
	<497F9A6F.4040107@fsgiudice.com>
Message-ID: <18d502870901271602s4d4b57d4s2640730317601e5@mail.gmail.com>

>
> I think the .hrb modules aren't loaded on a per thread basis, so it's not
>> like several of them could be loaded in parallel.
>>
>>
> This should be Przemek to clear. What happens in this case ? Are they MT
>  safe ? In uhttpd they *can be loaded* in parallel in different threads.
> One thing I may do is to serialize them to a single-specific thread that
>  can run hrb modules one after another and store them to avoid next file
> load. Is this the way ?


Yes, let's wait for Przemek. It was pretty much a guess from my side,
I haven't yet started to use .hrbs, but they seem very useful.


> [ BTW I'd recommend using HB_HRB*() names instead of the obsolete __HRB*()
>> ones. ]
>>
>
>>
> Done, I will upload in next commit


Thank you.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090128/24bdbb42/attachment.html
From druzus at acn.waw.pl  Tue Jan 27 21:52:50 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jan 27 21:48:38 2009
Subject: [Harbour] 2009-01-27 10:14 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
In-Reply-To: <497F9A6F.4040107@fsgiudice.com>
References: <497ED0E2.5070709@fsgiudice.com> <21688199.post@talk.nabble.com>
	<497F4829.1080901@fsgiudice.com>
	<18d502870901271020q46deaf1amc58862fb5eafa704@mail.gmail.com>
	<497F9A6F.4040107@fsgiudice.com>
Message-ID: <20090128025250.GA26095@uran.home.aster.pl>

On Wed, 28 Jan 2009, Francesco Saverio Giudice wrote:
>> I think the .hrb modules aren't loaded on a per thread basis, so it's not 
>> like several of them could be loaded in parallel.
> This should be Przemek to clear. What happens in this case ? Are they MT  
> safe ? In uhttpd they *can be loaded* in parallel in different threads.
> One thing I may do is to serialize them to a single-specific thread that  
> can run hrb modules one after another and store them to avoid next file 
> load. Is this the way ?

We have common public function list so when one thread loads .hrb module
then all public functions in this module become visible and accessible to
all other threads. When module is unloaded then functions are removed.
It's not safe to unload .hrb module when other threads or even the same
thread is executing code from this module so programmer should avoid
such situations. This potential problem can be exploited even in single
thread program so it's not directly related to MT mode.
When .hrb module is loaded HVM allocates symbol table for this module.
This symbol table is never released even if module is unloaded. In such
case the symbol table is only marked as unused and will be reused instead
of allocating new one if the same module will be loaded again or other
module using exactly the same symbols.
It's possible to implement full module unloading but now it will be hard
to introduce it due to backward compatibility. Just simply at beginning
Harbour was not designed for such situation and addresses of function
symbols were used as constant values by different (mostly 3-rd party) code.
If we implement module unloading then such code will have to be updated.
In fact only dynamic symbol table addresses (PHB_DYNS) are really constant
and it's guarantied that they will never changed during HVM execution.
So I decided to implement only symbol table recycling but I'm open to
change it in the future. Anyhow current behavior has also few interesting
features.
When .hrb module is loaded and it uses static variables then array with
static vars then during module loading area for new statics is allocated
and attached to symbol table. This area is also never freed and is reused
with symbol table together when module is loaded again. Static variables
are initialized only once when module is loaded 1-st time. Sometimes it
can be nice and really helpful behavior f.e. module can store some data
in static variables and then access it when it's loaded again or can pass
reference to static variable to other code which will update it when
module is unloaded and then after next load retrieve result from it.
But sometimes people may expect full reinitialization. Now it's not
possible. If we want to have both functionality then we will have to
introduce some flags to HB_HRBLOAD() to control it. Similar to flags
passed to hb_threadStart() which controls memvar inheritance, f.e.:
   HB_REINIT_STATIC
But please remember that reusing module symbol table and static variables
without reinitialization has yet another very important functionality.
If .hrb modules defines new classes then when modules is unloaded and
loaded again the same class definition is also reused. Otherwise new
class will be allocated because we keep class references in static
variables inside class function.

The next thing which can be controlled by such flags is action for
duplicated public function symbols. Now when .hrb module is loaded
and in contains public function which already exists in HVM then this
function is not registered and all references to this function in .hrb
module are replaced by the function which already exists in HVM so
simply such function is not visible or accessible at all. Here we can
introduce the following actions:
   HB_KEEP_LOCAL_REFERENCES
It means that local references to public function will not be overloaded
by the functions with the same name already registered in HVM. So other
code and macro compiler will still access public HVM function but code
executed from .hrb module will access the function defined in this module.
   HB_OVERLOAD_FUNCTIONS
When public function name conflict appears then function defined in .hrb
module will overload the one existed before. This is a little bit danger
functionality which should not be enabled in the code like HTTP server.
In practice it will be usable for users who want to upgrade/patch their
programs using .hrb modules. It's important and interesting functionality
but rather limited to local usage. It also produce other problems.
F.e. how to restore functions overloaded by few modules when they are
unloaded in different order. I do not know if I want to deeply fight with
such problem. If I implement such functionality then probably it will be
very basic version and after unloading previous functions will not be
restored.
If module is unloaded and some other code will try to execute function
or method which was in this module f.e. using function reference then
it simply receives RT error that function or method does not exists.
When module is loaded again and symbol table reused all references becomes
automatically valid.

Now let's return to MT mode.
All of the above operations are protected by HVM and does not need any
external protection. There are only two exceptions:
1-st I was pointing above - never unload code which is currently executed
also in ST programs. This have to be resolved by user.
2-nd is much more complicated because it cannot be easy resolved by user.
It's caused by modules which use static variables. When such module is
loaded 1-st time then it's necessary to allocate area for new statics.
We keep all static variables in single array. It's one continuous memory
block and reallocation may change it address. It means that other thread
may access static variable in the same moment when this block change its
address and this is not thread safe. It may cause GPF. We have to resolve
it in HVM but here simple mutex does not help at all. We have only two
choices:
   1. stop all threads in known place to be sure that they do not access
      any static variables. It's not 100% safe solution because some C
      code may keep static variable address and we will not know about it.
      It can be exploited even by very simple code like:
         HB_FUNC( FOO ) { hb_itemReturn( hb_param( 1, HB_IT_ANY ) ); }
      It's enough that user will call FOO( @s_var ) and inside return item
      we will have object variable with destructor. This destructor
      execution will be stopped by our interrupt point and other thread
      will reallocate static table so address returned by
      hb_param( 1, HB_IT_ANY ) will not be longer valid during hb_itemMove()
      execution inside hb_itemReturn().
      I know that the risk is small but it exists and can happen.
   2. Redesign data structures used to keep static variables to eliminate
      reallocation when new statics are added. This is still on my TODO
      list. I was sending this list in the past here. AFAIR this is the
      last MT problem not addressed by me yet.

So what should you make now?
I suggest to ignore this problem until I'll not change structures used
to hold static variables. The chance for GPF is rather small. The side
effect of array preallocation added by Mindaugas is noticeable reduced
number of memory reallocation when new statics are added so the risk is
really small that the problem will be exploited. Of course it _MUST_ be
fixed but it should not be critical during uHTTPd developing.
Now concentrate on the above information. I hope it helps to understand
how .hrb modules works.

BTW all of the above is also valid with exactly the same conditions for
compiled .prg code loaded/unloaded from dynamic libraries (.dll, .so,
.sl, .dyn, ...).

best regards,
Przemek
From druzus at acn.waw.pl  Tue Jan 27 22:22:10 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jan 27 22:17:58 2009
Subject: [Harbour] 2009-01-27 04:30 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <18d502870901270034k78cc740csb8ad05ad542eb646@mail.gmail.com>
References: <20090127033041.GA27270@uran.home.aster.pl>
	<18d502870901270034k78cc740csb8ad05ad542eb646@mail.gmail.com>
Message-ID: <20090128032210.GA7613@uran.home.aster.pl>

On Tue, 27 Jan 2009, Szak?ts Viktor wrote:

Hi Viktor,

> Two links that may be useful sometimes:
> stdint.h implemented for MSVC compilers:
> http://msinttypes.googlecode.com/svn/trunk/stdint.h
> 
> Portable stdint.h implementation:
> http://www.azillionmonkeys.com/qed/pstdint.h

Thanks for the links.
I do not want to implement our ownIEEE754 double value
decoding. The only one place I made it is common/hbarch.c
because I need it for binary compatibility in some places
like CDX format or PCODE in .hrb modules used on different
platforms. Here we have platform native double values so
insteadof decoding them manually I strongly prefer to use
compiler functions. These are very simple functions (often
macros) and most compilers supports them. If not then nothing
very wrong will happen. Just simply we will not show +/-INF
value but NaN instead. We do not have it in our code so it's
not vital functionality for us.
For [u]intmax_t we can use [U]LONGLONG as replacement. Not
good but will work for current compilers. It's only important
to add support for stdint.h for all possible compilers checking
their version if necessary. It should help in the future if
some compilers support bigger then 64bit integers so [u]intmax_t
will be declared correctly.
Now if possible and necessary then please update hbprintf.c for
MSVC. It's the last popular compiler I haven't tested. We should
also make some tests with different *nixes.
Anyhow current hb_snprintf_c() code seems to be ready to replace
our snprintf() wrapper (hb_snprintf()).

best regards,
Przemek
From druzus at acn.waw.pl  Tue Jan 27 22:28:08 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jan 27 22:23:56 2009
Subject: [Harbour] 2009-01-28 04:27 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090128032808.GA28336@uran.home.aster.pl>

2009-01-28 04:27 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/common/hbprintf.c
    * added yet another TODO marker for easier code updating to new
      C compilers

best regards
Przemek
From philb at philb.us  Wed Jan 28 01:39:38 2009
From: philb at philb.us (Phil Barnett)
Date: Wed Jan 28 01:39:44 2009
Subject: [Harbour] Fwd: SF.net SVN: harbour-project:[10057]
	trunk/harbour/ChangeLog
In-Reply-To: <18d502870901270022g3a58c063ua5d9998699ff0071@mail.gmail.com>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>	<4970A8AD.5060207@dbtopas.lt>
	<4976AD2E.5070303@philb.us>	<18d502870901210043t38aae244x9a88f57b9fced79@mail.gmail.com>	<4977D631.6000205@philb.us>	<18d502870901212213t4ab8a60bj91befcc2d8f7cb9@mail.gmail.com>	<49791D1B.7050500@philb.us>	<18d502870901230122k1b9fbd82nd858a96691d4f3ae@mail.gmail.com>	<497E99F7.8070607@philb.us>
	<18d502870901270022g3a58c063ua5d9998699ff0071@mail.gmail.com>
Message-ID: <497FFDAA.8090303@philb.us>

Viktor Szak?ts wrote:

 >Anyhow I feel this will lead to a mess, where some ppl
> don't get informed about changes, because not being 
> subscribed to the other list, and because of this, some 
> developers will continue to send manual ChangeLogs, 
> creating double notifications for those who subscribed. 
> Honestly, I don't like this at all.
>
> In fact, one of the points is to not give opt-out option.
> This is a developers' list, the change e-mails are the 
> _backbone_ of this list, and _all members are receiving 
> this information since the beginning_. Why would we 
> suddenly need to change that?
>
> Again, our other, much simpler and consistent option is to 
> simply swap the manual mails to automated ones, with no 
> change on any parties side.
Ok, that was a very coherent discussion that adds meaning that you were 
not conveying before. Thank you.

Earlier, it was requested to increase the limit of file attachments on 
this list to 150K. I was under the impression that change was to 
facilitate these new emails.

Is this not the case? If not, then why are we raising the limit?
From harbour.01 at syenar.hu  Wed Jan 28 03:04:42 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 28 03:04:46 2009
Subject: [Harbour] 2009-01-27 04:30 UTC+0100 Przemyslaw Czerpak 
	(druzus/at/priv.onet.pl)
In-Reply-To: <20090128032210.GA7613@uran.home.aster.pl>
References: <20090127033041.GA27270@uran.home.aster.pl>
	<18d502870901270034k78cc740csb8ad05ad542eb646@mail.gmail.com>
	<20090128032210.GA7613@uran.home.aster.pl>
Message-ID: <18d502870901280004j7b868246n945dc3dc3a6e763c@mail.gmail.com>

Hi Przemek,


> Now if possible and necessary then please update hbprintf.c for
> MSVC. It's the last popular compiler I haven't tested. We should


I've made and attempt, but it turned out Microsoft refuses to
support C99 standard (they push ppl to use recent C++ standards
instead). They don't support stdint.h either (probably because
it would increase the chance to write more portable code).
And there are no official functions to detect inf and nan. So, this
doesn't look like a joyride for MSVC. I'm keeping this topic open,
so maybe I'll stumble in some solutions in the future.

[ I did just a quick check but looking at the CRL sources, it
seems MSVC printf() implementation doesn't support nan/inf
either. ]

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090128/5bead5ad/attachment.html
From harbour.01 at syenar.hu  Wed Jan 28 03:52:35 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 28 03:52:40 2009
Subject: [Harbour] Fwd: SF.net SVN: harbour-project:[10057] 
	trunk/harbour/ChangeLog
In-Reply-To: <497FFDAA.8090303@philb.us>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>
	<4976AD2E.5070303@philb.us>
	<18d502870901210043t38aae244x9a88f57b9fced79@mail.gmail.com>
	<4977D631.6000205@philb.us>
	<18d502870901212213t4ab8a60bj91befcc2d8f7cb9@mail.gmail.com>
	<49791D1B.7050500@philb.us>
	<18d502870901230122k1b9fbd82nd858a96691d4f3ae@mail.gmail.com>
	<497E99F7.8070607@philb.us>
	<18d502870901270022g3a58c063ua5d9998699ff0071@mail.gmail.com>
	<497FFDAA.8090303@philb.us>
Message-ID: <18d502870901280052h2dda512i411e11fd5ffc43d9@mail.gmail.com>

Hi Phil,


> Again, our other, much simpler and consistent option is to simply swap the
>> manual mails to automated ones, with no change on any parties side.
>>
> Ok, that was a very coherent discussion that adds meaning that you were not
> conveying before. Thank you.
>
> Earlier, it was requested to increase the limit of file attachments on this
> list to 150K. I was under the impression that change was to facilitate these
> new emails.
>
> Is this not the case? If not, then why are we raising the limit?


No we don't need to, I've written in my previous e-mail that increasing
limit
is not necessary, since we will be using short (without diffs)
notifications,
as this seems to be the preferred form here on the list. Short
notifications
are just a few lines longer than current ChangeLog mails.

These short commit notifications are now being sent to
svncommit@harbour-project.org

[ For _diffed_ notifications, we may add a separate list if there will be
enough
demand for it in the future. I've set this up for myself, and I like it very
much. ]

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090128/f02eaaf7/attachment.html
From harbour.01 at syenar.hu  Wed Jan 28 04:47:52 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 28 04:47:57 2009
Subject: [Harbour] 2009-01-27 04:30 UTC+0100 Przemyslaw Czerpak 
	(druzus/at/priv.onet.pl)
In-Reply-To: <18d502870901280004j7b868246n945dc3dc3a6e763c@mail.gmail.com>
References: <20090127033041.GA27270@uran.home.aster.pl>
	<18d502870901270034k78cc740csb8ad05ad542eb646@mail.gmail.com>
	<20090128032210.GA7613@uran.home.aster.pl>
	<18d502870901280004j7b868246n945dc3dc3a6e763c@mail.gmail.com>
Message-ID: <18d502870901280147o6d59a196tc1e4deaf5d5ec84d@mail.gmail.com>

MSVC 8.0 gives these errors:
source\common\hbprintf.c(316) : error C2061: syntax error : identifier
'intmax_t'
source\common\hbprintf.c(317) : error C2061: syntax error : identifier
'as_x_uintmax_t'
source\common\hbprintf.c(317) : error C2059: syntax error : ';'
source\common\hbprintf.c(325) : error C2059: syntax error : '}'
source\common\hbprintf.c(329) : error C2061: syntax error : identifier
'x_type'
source\common\hbprintf.c(330) : error C2059: syntax error : '}'
source\common\hbprintf.c(336) : error C2061: syntax error : identifier
'v_param'
source\common\hbprintf.c(337) : error C2059: syntax error : '}'
source\common\hbprintf.c(381) : error C2143: syntax error : missing '{'
before '*'
source\common\hbprintf.c(381) : error C2143: syntax error : missing ')'
before '*'
source\common\hbprintf.c(381) : error C2081: 'v_paramlst' : name in formal
parameter list illegal
source\common\hbprintf.c(381) : error C2143: syntax error : missing '{'
before '*'
source\common\hbprintf.c(381) : warning C4431: missing type specifier - int
assumed. Note: C no longer supports default-int
source\common\hbprintf.c(381) : error C2059: syntax error : 'type'
source\common\hbprintf.c(381) : error C2059: syntax error : ')'
source\common\hbprintf.c(410) : error C2143: syntax error : missing ')'
before '*'
source\common\hbprintf.c(410) : error C2143: syntax error : missing '{'
before '*'
source\common\hbprintf.c(410) : warning C4431: missing type specifier - int
assumed. Note: C no longer supports default-int
source\common\hbprintf.c(410) : warning C4431: missing type specifier - int
assumed. Note: C no longer supports default-int
source\common\hbprintf.c(410) : error C2040: 'va_list' : 'int' differs in
levels of indirection from 'char *'
source\common\hbprintf.c(410) : error C2146: syntax error : missing ';'
before identifier 'va'
source\common\hbprintf.c(410) : warning C4218: nonstandard extension used :
must specify at least a storage class or a type
source\common\hbprintf.c(410) : error C2059: syntax error : ')'
source\common\hbprintf.c(411) : warning C4431: missing type specifier - int
assumed. Note: C no longer supports default-int
source\common\hbprintf.c(411) : error C2054: expected '(' to follow 'va'
source\common\hbprintf.c(487) : error C2146: syntax error : missing ')'
before identifier 'value'
source\common\hbprintf.c(487) : error C2081: 'uintmax_t' : name in formal
parameter list illegal
source\common\hbprintf.c(487) : error C2061: syntax error : identifier
'value'
source\common\hbprintf.c(487) : error C2059: syntax error : ';'
source\common\hbprintf.c(487) : error C2059: syntax error : ','
source\common\hbprintf.c(487) : error C2059: syntax error : ')'
source\common\hbprintf.c(542) : error C2146: syntax error : missing ')'
before identifier 'value'
source\common\hbprintf.c(542) : error C2081: 'uintmax_t' : name in formal
parameter list illegal
source\common\hbprintf.c(542) : error C2061: syntax error : identifier
'value'
source\common\hbprintf.c(542) : error C2059: syntax error : ';'
source\common\hbprintf.c(542) : error C2059: syntax error : ','
source\common\hbprintf.c(543) : error C2059: syntax error : ')'
source\common\hbprintf.c(715) : error C2146: syntax error : missing ')'
before identifier 'value'
source\common\hbprintf.c(715) : error C2081: 'uintmax_t' : name in formal
parameter list illegal
source\common\hbprintf.c(715) : error C2061: syntax error : identifier
'value'
source\common\hbprintf.c(715) : error C2059: syntax error : ';'
source\common\hbprintf.c(715) : error C2059: syntax error : ','
source\common\hbprintf.c(716) : error C2059: syntax error : ')'
source\common\hbprintf.c(834) : error C2065: 'v_param' : undeclared
identifier
source\common\hbprintf.c(834) : error C2146: syntax error : missing ';'
before identifier 'argbuf'
source\common\hbprintf.c(834) : error C2065: 'argbuf' : undeclared
identifier
source\common\hbprintf.c(834) : error C2109: subscript requires array or
pointer type
source\common\hbprintf.c(835) : error C2065: 'v_paramlst' : undeclared
identifier
source\common\hbprintf.c(835) : error C2146: syntax error : missing ';'
before identifier 'params'
source\common\hbprintf.c(835) : error C2065: 'params' : undeclared
identifier
source\common\hbprintf.c(837) : error C2224: left of '.size' must have
struct/union type
source\common\hbprintf.c(838) : error C2224: left of '.maxarg' must have
struct/union type
source\common\hbprintf.c(839) : error C2224: left of '.arglst' must have
struct/union type
source\common\hbprintf.c(840) : error C2224: left of '.repeat' must have
struct/union type
source\common\hbprintf.c(845) : error C2224: left of '.repeat' must have
struct/union type
source\common\hbprintf.c(847) : error C2224: left of '.repeat' must have
struct/union type
source\common\hbprintf.c(848) : error C2224: left of '.maxarg' must have
struct/union type
source\common\hbprintf.c(851) : warning C4013: 'va_arg_fill' undefined;
assuming extern returning int
source\common\hbprintf.c(870) : error C2146: syntax error : missing ';'
before identifier 'argval'
source\common\hbprintf.c(870) : error C2065: 'argval' : undeclared
identifier
source\common\hbprintf.c(871) : error C2143: syntax error : missing ';'
before 'type'
source\common\hbprintf.c(877) : error C2065: 'value' : undeclared identifier
source\common\hbprintf.c(880) : error C2065: 'param' : undeclared identifier
source\common\hbprintf.c(891) : error C2065: 'stop' : undeclared identifier
source\common\hbprintf.c(894) : error C2065: 'flags' : undeclared identifier
source\common\hbprintf.c(932) : error C2065: 'width' : undeclared identifier
source\common\hbprintf.c(932) : warning C4013: 'va_arg_get' undefined;
assuming extern returning int
source\common\hbprintf.c(932) : error C2223: left of '->value' must point to
struct/union
source\common\hbprintf.c(932) : fatal error C1903: unable to recover from
previous error(s); stopping

Brgds,
Viktor


On Wed, Jan 28, 2009 at 9:04 AM, Viktor Szak?ts <harbour.01@syenar.hu>wrote:

> Hi Przemek,
>
>
>> Now if possible and necessary then please update hbprintf.c for
>> MSVC. It's the last popular compiler I haven't tested. We should
>
>
> I've made and attempt, but it turned out Microsoft refuses to
> support C99 standard (they push ppl to use recent C++ standards
> instead). They don't support stdint.h either (probably because
> it would increase the chance to write more portable code).
> And there are no official functions to detect inf and nan. So, this
> doesn't look like a joyride for MSVC. I'm keeping this topic open,
> so maybe I'll stumble in some solutions in the future.
>
> [ I did just a quick check but looking at the CRL sources, it
> seems MSVC printf() implementation doesn't support nan/inf
> either. ]
>
> Brgds,
> Viktor
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090128/4a63c283/attachment-0001.html
From druzus at acn.waw.pl  Wed Jan 28 07:15:05 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 28 07:11:00 2009
Subject: [Harbour] 2009-01-27 04:30 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <18d502870901280147o6d59a196tc1e4deaf5d5ec84d@mail.gmail.com>
References: <20090127033041.GA27270@uran.home.aster.pl>
	<18d502870901270034k78cc740csb8ad05ad542eb646@mail.gmail.com>
	<20090128032210.GA7613@uran.home.aster.pl>
	<18d502870901280004j7b868246n945dc3dc3a6e763c@mail.gmail.com>
	<18d502870901280147o6d59a196tc1e4deaf5d5ec84d@mail.gmail.com>
Message-ID: <20090128121505.GA311@uran.home.aster.pl>

On Wed, 28 Jan 2009, Szak?ts Viktor wrote:

Hi Viktor,

> MSVC 8.0 gives these errors:
> source\common\hbprintf.c(316) : error C2061: syntax error : identifier
> 'intmax_t'
[...]

Look at hbprintf.c source and add prober MSVC #define in places marked
as TODO.
Probably updating the 1-st one which defined [u]intmax_t as [U]LONGLONG
will be enough.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Jan 28 07:29:39 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 28 07:25:32 2009
Subject: [Harbour] 2009-01-28 13:29 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090128122939.GA15964@uran.home.aster.pl>

2009-01-28 13:29 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/common/hbprintf.c
    * redefine [u]intmax_t as [U]LONGLONG in MSVC builds.

best regards
Przemek
From harbour.01 at syenar.hu  Wed Jan 28 07:52:02 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 28 07:52:08 2009
Subject: [Harbour] 2009-01-28 13:29 UTC+0100 Przemyslaw Czerpak 
	(druzus/at/priv.onet.pl)
In-Reply-To: <20090128122939.GA15964@uran.home.aster.pl>
References: <20090128122939.GA15964@uran.home.aster.pl>
Message-ID: <18d502870901280452g62aaf53amb624310eff61a7f7@mail.gmail.com>

Thanks a lot.
Now, these are the only warnings remaining:
source\common\hbprintf.c(1036) : warning C4013: '_finite' undefined;
assuming extern returning int
c:\work\harbour-new\harbour\source\common\hbprintf.c(1191) : warning C4701:
potentially uninitialized local variable 'size' used

Brgds,
Viktor

On Wed, Jan 28, 2009 at 1:29 PM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:

> 2009-01-28 13:29 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/common/hbprintf.c
>    * redefine [u]intmax_t as [U]LONGLONG in MSVC builds.
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090128/d8d840cf/attachment.html
From jarabal at gmail.com  Wed Jan 28 08:11:21 2009
From: jarabal at gmail.com (Xavi)
Date: Wed Jan 28 08:12:53 2009
Subject: [Harbour] 2008-11-01 21:13 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20090126212015.GA11298@uran.home.aster.pl>
References: <491315D1.7030303@dbtopas.lt>	<6B0D3378-AB28-4273-B24E-CD3D321FDD30@syenar.hu>	<20081106172214.GA9967@34-mo7-2.acn.waw.pl>	<492D46FA.9010808@dbtopas.lt>	<20081127155323.GA25089@34-mo7-2.acn.waw.pl>	<493008E0.9020503@dbtopas.lt>	<20081128213258.GA20608@34-mo7-2.acn.waw.pl>	<4979FE43.1060409@dbtopas.lt>	<20090126150023.GA539@uran.home.aster.pl>	<497E21D9.2090903@gmail.com>
	<20090126212015.GA11298@uran.home.aster.pl>
Message-ID: <49805979.1000106@gmail.com>

Przemek,

The return value does not include the terminating null byte in the count.
...
          if( c != 0 ) ++size;
       }
       while( c != 0 );
...
	
I made a few tests with BCC and Spd add #define snprintf hb_snprintf_c
and the basics are working but with differences in accuracy.

? Sql_sprintf( "Phi = %.15f", (1 + 5**0.5) / 2 ) )

Phi = 1.618033988749895 snprintf() it's Ok
Phi = 1.618033981323242 hb_snprintf_c()

Best regards,
Xavi

Przemyslaw Czerpak escribi?:
> On Mon, 26 Jan 2009, Xavi wrote:
> 
> Hi Xavi,
> 
>> stdint.h is C99, Does not exist in many compilers as BCC 5.5
> 
> Yes, I know.
> 
>> As far I know hbmisc/spd.c is 100% compatible with sprintf() C99 and adds new features.
>> It was allowed me, move C/C++ solutions to Harbour applications.
>> Of course, using C RTL snprintf().
> 
> And this is exactly what we want to eliminate. The code I sent is
> snprintf() replacement.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 




From druzus at acn.waw.pl  Wed Jan 28 08:24:40 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 28 08:20:27 2009
Subject: [Harbour] 2009-01-28 13:29 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <18d502870901280452g62aaf53amb624310eff61a7f7@mail.gmail.com>
References: <20090128122939.GA15964@uran.home.aster.pl>
	<18d502870901280452g62aaf53amb624310eff61a7f7@mail.gmail.com>
Message-ID: <20090128132440.GA29449@uran.home.aster.pl>

On Wed, 28 Jan 2009, Szak?ts Viktor wrote:
> Thanks a lot.
> Now, these are the only warnings remaining:
> source\common\hbprintf.c(1036) : warning C4013: '_finite' undefined;
> assuming extern returning int

In 99% this function have to be defined in float.h it's so it should
be enough to include this file.
I'll commit modifications but I only guessing what MSVC does.

> c:\work\harbour-new\harbour\source\common\hbprintf.c(1191) : warning C4701:
> potentially uninitialized local variable 'size' used

It's not real problem but I'll pacify this warning.

If possible then please try to update hbprintf.c for MSVC yourself.
I do not have any MSVC version which can be executed with WINE in
my Linux BOX so I cannot make any tests myself. I cannot even install
it.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Jan 28 08:25:57 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 28 08:21:43 2009
Subject: [Harbour] 2009-01-28 14:25 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090128132557.GA10209@uran.home.aster.pl>

2009-01-28 14:25 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/common/hbprintf.c
    ! include float.h in MSVC builds
    * changed code a little bit to pacify MSVC warning

best regards
Przemek
From harbour.01 at syenar.hu  Wed Jan 28 08:32:14 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 28 08:32:19 2009
Subject: [Harbour] 2009-01-28 13:29 UTC+0100 Przemyslaw Czerpak 
	(druzus/at/priv.onet.pl)
In-Reply-To: <20090128132440.GA29449@uran.home.aster.pl>
References: <20090128122939.GA15964@uran.home.aster.pl>
	<18d502870901280452g62aaf53amb624310eff61a7f7@mail.gmail.com>
	<20090128132440.GA29449@uran.home.aster.pl>
Message-ID: <18d502870901280532y3d5b2040x53282ba5f4b63de7@mail.gmail.com>

Hi Przemek,


> > Now, these are the only warnings remaining:
> > source\common\hbprintf.c(1036) : warning C4013: '_finite' undefined;
> > assuming extern returning int
>
> In 99% this function have to be defined in float.h it's so it should
> be enough to include this file.
> I'll commit modifications but I only guessing what MSVC does.


I think this is solved in source/rtl/math.c in some ways, maybe it
helps.

[ You're right, it's there in float.h in both MSVC 8 and 9, dunno
why the warning still. ]


> > c:\work\harbour-new\harbour\source\common\hbprintf.c(1191) : warning
> C4701:
> > potentially uninitialized local variable 'size' used
>
> It's not real problem but I'll pacify this warning.
>
> If possible then please try to update hbprintf.c for MSVC yourself.
> I do not have any MSVC version which can be executed with WINE in
> my Linux BOX so I cannot make any tests myself. I cannot even install
> it.


I used to do this, but this code is so complicated, I'd better not
touch it myself, especially not now, being very busy with other
things (there were two huge updates lately).

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090128/ac877e6f/attachment.html
From harbour.01 at syenar.hu  Wed Jan 28 08:35:01 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 28 08:35:06 2009
Subject: [Harbour] 2009-01-28 14:25 UTC+0100 Przemyslaw Czerpak 
	(druzus/at/priv.onet.pl)
In-Reply-To: <20090128132557.GA10209@uran.home.aster.pl>
References: <20090128132557.GA10209@uran.home.aster.pl>
Message-ID: <18d502870901280535w84c75d0uc6ede5ce2eedfd91@mail.gmail.com>

Many thanks. Getting better, now this one remains:

source\common\hbprintf.c(1035) : warning C4244: 'function' : conversion from
'long double' to 'double', possible loss of data

I've checked line 1035, but I'd rather not touch it.

Brgds,Viktor

On Wed, Jan 28, 2009 at 2:25 PM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:

> 2009-01-28 14:25 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/common/hbprintf.c
>    ! include float.h in MSVC builds
>    * changed code a little bit to pacify MSVC warning
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090128/ead8e393/attachment.html
From labitas at gmail.com  Wed Jan 28 09:25:08 2009
From: labitas at gmail.com (Saulius Zrelskis)
Date: Wed Jan 28 09:25:11 2009
Subject: [Harbour] Compiler GPF
Message-ID: <2386af1b0901280625i53ad7453nc771181fd1ff78ef@mail.gmail.com>

Hi,

Compiling test attached compiler Harbour.exe GPFs.

Command line:
  d:\harbour\bin\harbour test -n -p -id:\harbour\include
Compiler options seems significant.

Harbour 1.1.0dev (Rev. 10127)
WinXP, BCC5.8

Best regards,
Saulius
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.tar.gz
Type: application/x-gzip
Size: 1291 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090128/603273b7/test.tar-0001.gz
From druzus at acn.waw.pl  Wed Jan 28 11:12:34 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 28 11:08:21 2009
Subject: [Harbour] 2008-11-01 21:13 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <49805979.1000106@gmail.com>
References: <20081106172214.GA9967@34-mo7-2.acn.waw.pl>
	<492D46FA.9010808@dbtopas.lt>
	<20081127155323.GA25089@34-mo7-2.acn.waw.pl>
	<493008E0.9020503@dbtopas.lt>
	<20081128213258.GA20608@34-mo7-2.acn.waw.pl>
	<4979FE43.1060409@dbtopas.lt>
	<20090126150023.GA539@uran.home.aster.pl>
	<497E21D9.2090903@gmail.com>
	<20090126212015.GA11298@uran.home.aster.pl>
	<49805979.1000106@gmail.com>
Message-ID: <20090128161234.GA27962@uran.home.aster.pl>

On Wed, 28 Jan 2009, Xavi wrote:

Hi Xavi,

> The return value does not include the terminating null byte in the count.
> ...
>          if( c != 0 ) ++size;
>       }
>       while( c != 0 );
> ...

I cannot find such code in hbprintf.c.
hb_printf_c() for sure sets trailing \0 byte in all cases even if buffer
is too small.


> I made a few tests with BCC and Spd add #define snprintf hb_snprintf_c
> and the basics are working but with differences in accuracy.
> ? Sql_sprintf( "Phi = %.15f", (1 + 5**0.5) / 2 ) )
> Phi = 1.618033988749895 snprintf() it's Ok
> Phi = 1.618033981323242 hb_snprintf_c()

Welcome to the fantastic world of floating point arithmetic by Borland.
Try this code with this "incredible" compiler:
      #include <stdio.h>
      #include <math.h>
      #include <float.h>

      int main( void )
      {
         printf( "[%.15f]\n", ((1 + pow(5.0,0.5)) / 2 ) );
         _fpclass( 0 );
         printf( "[%.15f]\n", ((1 + pow(5.0,0.5)) / 2 ) );
         return 0;
      }

It's good to know that calling _fpclass()  reduce floating point
precision to 'float' type even if you use 'double' or 'long double'.
It will create problems for us also in HVM calculations if 3-r party
code execute this function, f.e. try this:

   proc main()
      ? str( (1 + 5**0.5) / 2, 20, 15 )
      _fpclass()
      ? str( (1 + 5**0.5) / 2, 20, 15 )
   return
   #pragma begindump
   #include <math.h>
   #include <float.h>
   HB_FUNC( _FPCLASS )
   {
      _fpclass( 0 );
   }
   #pragma enddump

I'll disable _fplcass() and checking for +-inf in BCC builds.
It will fix the results and I think we should document it somewhere
to avoid possible problems which can be created by 3-r party code
which will try to use it.
   _fplcass() is forbidden in BCC builds !!!! ;-)
   ==============================================

best regards,
Przemek
From druzus at acn.waw.pl  Wed Jan 28 11:39:24 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 28 11:35:10 2009
Subject: [Harbour] 2009-01-28 14:25 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <18d502870901280535w84c75d0uc6ede5ce2eedfd91@mail.gmail.com>
References: <20090128132557.GA10209@uran.home.aster.pl>
	<18d502870901280535w84c75d0uc6ede5ce2eedfd91@mail.gmail.com>
Message-ID: <20090128163924.GA22374@uran.home.aster.pl>

On Wed, 28 Jan 2009, Szak?ts Viktor wrote:

Hi,

> source\common\hbprintf.c(1035) : warning C4244: 'function' : conversion from
> 'long double' to 'double', possible loss of data
> I've checked line 1035, but I'd rather not touch it.

Please check if MSVC has _finite() function which can accept
'long double' as parameter, f.e.: _finitel()
I'll enable using _finitel() in MSVC builds in next commit but
please confirm if it works.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Jan 28 11:41:52 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 28 11:37:37 2009
Subject: [Harbour] 2009-01-28 17:41 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090128164152.GA5651@uran.home.aster.pl>

2009-01-28 17:41 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/common/hbprintf.c
    ! do not use _fpclass() in BCC builds - it breaks FL arithmetic
    * use _finitel() instead of _finite() in MSVC builds

best regards
Przemek
From harbour.01 at syenar.hu  Wed Jan 28 11:42:58 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 28 11:43:03 2009
Subject: [Harbour] 2009-01-28 14:25 UTC+0100 Przemyslaw Czerpak 
	(druzus/at/priv.onet.pl)
In-Reply-To: <20090128163924.GA22374@uran.home.aster.pl>
References: <20090128132557.GA10209@uran.home.aster.pl>
	<18d502870901280535w84c75d0uc6ede5ce2eedfd91@mail.gmail.com>
	<20090128163924.GA22374@uran.home.aster.pl>
Message-ID: <18d502870901280842w18dbd2e7s42b283d7c955d729@mail.gmail.com>

Hi Przemek,
I've found these in float.h: (no long double finite, but there's
an isnan, plus fpclass() with some useful stuff)

---
#ifndef _SIGN_DEFINED
_CRTIMP __checkReturn double __cdecl _copysign (__in double _Number, __in
double _Sign);
_CRTIMP __checkReturn double __cdecl _chgsign (__in double _X);
#define _SIGN_DEFINED
#endif
_CRTIMP __checkReturn double __cdecl _scalb(__in double _X, __in long _Y);
_CRTIMP __checkReturn double __cdecl _logb(__in double _X);
_CRTIMP __checkReturn double __cdecl _nextafter(__in double _X, __in double
_Y);
_CRTIMP __checkReturn int    __cdecl _finite(__in double _X);
_CRTIMP __checkReturn int    __cdecl _isnan(__in double _X);
_CRTIMP __checkReturn int    __cdecl _fpclass(__in double _X);

#ifdef _M_AMD64
_CRTIMP __checkReturn float __cdecl _scalbf(__in float _X, __in long _Y);
#endif

#define _FPCLASS_SNAN   0x0001  /* signaling NaN */
#define _FPCLASS_QNAN   0x0002  /* quiet NaN */
#define _FPCLASS_NINF   0x0004  /* negative infinity */
#define _FPCLASS_NN     0x0008  /* negative normal */
#define _FPCLASS_ND     0x0010  /* negative denormal */
#define _FPCLASS_NZ     0x0020  /* -0 */
#define _FPCLASS_PZ     0x0040  /* +0 */
#define _FPCLASS_PD     0x0080  /* positive denormal */
#define _FPCLASS_PN     0x0100  /* positive normal */
#define _FPCLASS_PINF   0x0200  /* positive infinity */
---

Brgds,
Viktor

On Wed, Jan 28, 2009 at 5:39 PM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:

> On Wed, 28 Jan 2009, Szak?ts Viktor wrote:
>
> Hi,
>
> > source\common\hbprintf.c(1035) : warning C4244: 'function' : conversion
> from
> > 'long double' to 'double', possible loss of data
> > I've checked line 1035, but I'd rather not touch it.
>
> Please check if MSVC has _finite() function which can accept
> 'long double' as parameter, f.e.: _finitel()
> I'll enable using _finitel() in MSVC builds in next commit but
> please confirm if it works.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090128/06b2be93/attachment.html
From mbelgrano at deltain.it  Wed Jan 28 12:55:28 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Jan 28 12:55:31 2009
Subject: [Harbour] Intresting comparison harbour & xharbour by activity
Message-ID: <609353e70901280955h14fe545dr46198860681a0b41@mail.gmail.com>

Intresting comparison harbour & xharbour by activity

http://www.ohloh.net/p/compare?metric=Activity&project_0=harbour+project&project_1=xHarbour+Extended+Harbour+Compiler

-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090128/fce67061/attachment.html
From druzus at acn.waw.pl  Wed Jan 28 13:03:37 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 28 12:59:23 2009
Subject: [Harbour] 2009-01-28 19:03 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090128180337.GA3994@uran.home.aster.pl>

2009-01-28 19:03 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/common/hbprintf.c
    * disabled _finitel() in MSVC builds, added casting to double instead

best regards
Przemek
From jarabal at gmail.com  Wed Jan 28 13:52:40 2009
From: jarabal at gmail.com (Xavi)
Date: Wed Jan 28 13:54:27 2009
Subject: [Harbour] 2008-11-01 21:13 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20090128161234.GA27962@uran.home.aster.pl>
References: <20081106172214.GA9967@34-mo7-2.acn.waw.pl>	<492D46FA.9010808@dbtopas.lt>	<20081127155323.GA25089@34-mo7-2.acn.waw.pl>	<493008E0.9020503@dbtopas.lt>	<20081128213258.GA20608@34-mo7-2.acn.waw.pl>	<4979FE43.1060409@dbtopas.lt>	<20090126150023.GA539@uran.home.aster.pl>	<497E21D9.2090903@gmail.com>	<20090126212015.GA11298@uran.home.aster.pl>	<49805979.1000106@gmail.com>
	<20090128161234.GA27962@uran.home.aster.pl>
Message-ID: <4980A978.6040800@gmail.com>

Przemek,

> I cannot find such code in hbprintf.c.
In the line 1181: ++size;
Sorry, I needed added for testing the if( c != 0 ) and I thought that you would see more clearly.

> hb_printf_c() for sure sets trailing \0 byte in all cases even if buffer
> is too small.
Yes, but return size accumulate the \0 byte (terminating null) and sprintf or snprintf not.
It's also possible in 1183: while( c != 0 ); --size;


> Welcome to the fantastic world of floating point arithmetic by Borland.
Yes I see. Thanks, now don't have differences in accuracy.

Best regards,
Xavi

Przemyslaw Czerpak escribi?:
> On Wed, 28 Jan 2009, Xavi wrote:
> 
> Hi Xavi,
> 
>> The return value does not include the terminating null byte in the count.
>> ...
>>          if( c != 0 ) ++size;
>>       }
>>       while( c != 0 );
>> ...
> 
> I cannot find such code in hbprintf.c.
> hb_printf_c() for sure sets trailing \0 byte in all cases even if buffer
> is too small.
> 
> 
>> I made a few tests with BCC and Spd add #define snprintf hb_snprintf_c
>> and the basics are working but with differences in accuracy.
>> ? Sql_sprintf( "Phi = %.15f", (1 + 5**0.5) / 2 ) )
>> Phi = 1.618033988749895 snprintf() it's Ok
>> Phi = 1.618033981323242 hb_snprintf_c()
> 
> Welcome to the fantastic world of floating point arithmetic by Borland.
> Try this code with this "incredible" compiler:
>       #include <stdio.h>
>       #include <math.h>
>       #include <float.h>
> 
>       int main( void )
>       {
>          printf( "[%.15f]\n", ((1 + pow(5.0,0.5)) / 2 ) );
>          _fpclass( 0 );
>          printf( "[%.15f]\n", ((1 + pow(5.0,0.5)) / 2 ) );
>          return 0;
>       }
> 
> It's good to know that calling _fpclass()  reduce floating point
> precision to 'float' type even if you use 'double' or 'long double'.
> It will create problems for us also in HVM calculations if 3-r party
> code execute this function, f.e. try this:
> 
>    proc main()
>       ? str( (1 + 5**0.5) / 2, 20, 15 )
>       _fpclass()
>       ? str( (1 + 5**0.5) / 2, 20, 15 )
>    return
>    #pragma begindump
>    #include <math.h>
>    #include <float.h>
>    HB_FUNC( _FPCLASS )
>    {
>       _fpclass( 0 );
>    }
>    #pragma enddump
> 
> I'll disable _fplcass() and checking for +-inf in BCC builds.
> It will fix the results and I think we should document it somewhere
> to avoid possible problems which can be created by 3-r party code
> which will try to use it.
>    _fplcass() is forbidden in BCC builds !!!! ;-)
>    ==============================================
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

From druzus at acn.waw.pl  Wed Jan 28 14:37:18 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 28 14:33:04 2009
Subject: [Harbour] 2008-11-01 21:13 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <4980A978.6040800@gmail.com>
References: <20081127155323.GA25089@34-mo7-2.acn.waw.pl>
	<493008E0.9020503@dbtopas.lt>
	<20081128213258.GA20608@34-mo7-2.acn.waw.pl>
	<4979FE43.1060409@dbtopas.lt>
	<20090126150023.GA539@uran.home.aster.pl>
	<497E21D9.2090903@gmail.com>
	<20090126212015.GA11298@uran.home.aster.pl>
	<49805979.1000106@gmail.com>
	<20090128161234.GA27962@uran.home.aster.pl>
	<4980A978.6040800@gmail.com>
Message-ID: <20090128193718.GA24871@uran.home.aster.pl>

On Wed, 28 Jan 2009, Xavi wrote:

Hi Xavi,

>> I cannot find such code in hbprintf.c.
> In the line 1181: ++size;
> Sorry, I needed added for testing the if( c != 0 ) and
> I thought that you would see more clearly.

Sorry, it confused me.

>> hb_printf_c() for sure sets trailing \0 byte in all cases even if buffer
>> is too small.
> Yes, but return size accumulate the \0 byte (terminating null) and sprintf
> or snprintf not.
> It's also possible in 1183: while( c != 0 ); --size;

Sorry but I do not understand. sprintf() does not have any buffer overflow
protection so it will always write whole output to memory with trailing 0
corrupting the memory if buffer is too small and it's the reason why we do
not use this function.
snprintf() should always sat triling 0 _inside_ the buffer consuming one
byte fo rit. It's documented ISO C99 behavior:

    The functions snprintf() and vsnprintf() do not write  more  than  size
    bytes  (including  the trailing '\0').  If the output was truncated due
    to this limit then the return value is the number  of  characters  (not
    including the trailing '\0') which would have been written to the final
    string if enough space had been available.  Thus,  a  return  value  of
    size  or  more  means  that  the output was truncated.  (See also below
    under NOTES.)

and hb_snprintf_c() fully respects this fact. If the buffer is two small
then trailing 0 is set in line 1196:

   /* always set trailing \0 !!! */
   if( bufsize )
      buffer[ bufsize - 1 ] = 0;

If BCC does not work in such way then it's yet another bug in BCC.

<wait>

I've just check BCC5.5 and it's even worse. BCC *ignores* buffer size
in [v]snprintf() functions so there is not protection at all. It means
that also our hb_snprintf() which uses internally vsnprintf() does
not give any protection. It's _VERY_ serious bug and it means that
at least for this compiler we _MUST_ switch to hb_snprintf_c() or
we will have potential buffer overflows in core code.
It will be good to test also other C compilers.

best regards,
Przemek
From jarabal at gmail.com  Wed Jan 28 15:06:22 2009
From: jarabal at gmail.com (Xavi)
Date: Wed Jan 28 15:07:57 2009
Subject: [Harbour] 2008-11-01 21:13 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20090128193718.GA24871@uran.home.aster.pl>
References: <20081127155323.GA25089@34-mo7-2.acn.waw.pl>	<493008E0.9020503@dbtopas.lt>	<20081128213258.GA20608@34-mo7-2.acn.waw.pl>	<4979FE43.1060409@dbtopas.lt>	<20090126150023.GA539@uran.home.aster.pl>	<497E21D9.2090903@gmail.com>	<20090126212015.GA11298@uran.home.aster.pl>	<49805979.1000106@gmail.com>	<20090128161234.GA27962@uran.home.aster.pl>	<4980A978.6040800@gmail.com>
	<20090128193718.GA24871@uran.home.aster.pl>
Message-ID: <4980BABE.6000702@gmail.com>

Przemek,

Yes you're right. But sorry for my bad English.

http://www.opengroup.org/onlinepubs/009695399/functions/fprintf.html
"Return value: Upon successful completion, the snprintf() function shall return the number of bytes that would be written to s 
had n been sufficiently large *excluding the terminating null byte* ."
	
Now hb_snprintf_c() include in the return value "size" the terminating null byte, you know?.

char cBuffer[ 4096 ];
size_t size = snprintf( cBuffer, sizeof(cBuffer), " %s ", "Hello" );
ASSERT( size == strlen(cBuffer) ); /* C99 */

size = hb_snprintf_c( cBuffer, sizeof(cBuffer), " %s ", "Hello" );
ASSERT( size == strlen(cBuffer) + 1 ); /* No C99 */

Best regards,
Xavi

Przemyslaw Czerpak escribi?:
> On Wed, 28 Jan 2009, Xavi wrote:
> 
> Hi Xavi,
> 
>>> I cannot find such code in hbprintf.c.
>> In the line 1181: ++size;
>> Sorry, I needed added for testing the if( c != 0 ) and
>> I thought that you would see more clearly.
> 
> Sorry, it confused me.
> 
>>> hb_printf_c() for sure sets trailing \0 byte in all cases even if buffer
>>> is too small.
>> Yes, but return size accumulate the \0 byte (terminating null) and sprintf
>> or snprintf not.
>> It's also possible in 1183: while( c != 0 ); --size;
> 
> Sorry but I do not understand. sprintf() does not have any buffer overflow
> protection so it will always write whole output to memory with trailing 0
> corrupting the memory if buffer is too small and it's the reason why we do
> not use this function.
> snprintf() should always sat triling 0 _inside_ the buffer consuming one
> byte fo rit. It's documented ISO C99 behavior:
> 
>     The functions snprintf() and vsnprintf() do not write  more  than  size
>     bytes  (including  the trailing '\0').  If the output was truncated due
>     to this limit then the return value is the number  of  characters  (not
>     including the trailing '\0') which would have been written to the final
>     string if enough space had been available.  Thus,  a  return  value  of
>     size  or  more  means  that  the output was truncated.  (See also below
>     under NOTES.)
> 
> and hb_snprintf_c() fully respects this fact. If the buffer is two small
> then trailing 0 is set in line 1196:
> 
>    /* always set trailing \0 !!! */
>    if( bufsize )
>       buffer[ bufsize - 1 ] = 0;
> 
> If BCC does not work in such way then it's yet another bug in BCC.
> 
> <wait>
> 
> I've just check BCC5.5 and it's even worse. BCC *ignores* buffer size
> in [v]snprintf() functions so there is not protection at all. It means
> that also our hb_snprintf() which uses internally vsnprintf() does
> not give any protection. It's _VERY_ serious bug and it means that
> at least for this compiler we _MUST_ switch to hb_snprintf_c() or
> we will have potential buffer overflows in core code.
> It will be good to test also other C compilers.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

From druzus at acn.waw.pl  Wed Jan 28 15:53:53 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 28 15:49:39 2009
Subject: [Harbour] 2008-11-01 21:13 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <4980BABE.6000702@gmail.com>
References: <20081128213258.GA20608@34-mo7-2.acn.waw.pl>
	<4979FE43.1060409@dbtopas.lt>
	<20090126150023.GA539@uran.home.aster.pl>
	<497E21D9.2090903@gmail.com>
	<20090126212015.GA11298@uran.home.aster.pl>
	<49805979.1000106@gmail.com>
	<20090128161234.GA27962@uran.home.aster.pl>
	<4980A978.6040800@gmail.com>
	<20090128193718.GA24871@uran.home.aster.pl>
	<4980BABE.6000702@gmail.com>
Message-ID: <20090128205353.GA5102@uran.home.aster.pl>

On Wed, 28 Jan 2009, Xavi wrote:

Hi Xavi,

> Yes you're right. But sorry for my bad English.

Not worse then mine.
Now I understand that you are talking about integer value returned
by snprintf() not about the buffer contents. Sorry my fault.

> http://www.opengroup.org/onlinepubs/009695399/functions/fprintf.html
> "Return value: Upon successful completion, the snprintf() function shall 
> return the number of bytes that would be written to s had n been 
> sufficiently large *excluding the terminating null byte* ."
> Now hb_snprintf_c() include in the return value "size" the terminating
> null byte, you know?.

Yes sure, it's a bug and should be fixed.
instead of:
   return ( int ) size
we should have:
   return ( int ) ( size - 1 );

Many thanks for noticing it. I'll fix it in a while.

best regards,
Przemek
From jarabal at gmail.com  Wed Jan 28 15:58:58 2009
From: jarabal at gmail.com (Xavi)
Date: Wed Jan 28 16:00:34 2009
Subject: [Harbour] 2008-11-01 21:13 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20090128205353.GA5102@uran.home.aster.pl>
References: <20081128213258.GA20608@34-mo7-2.acn.waw.pl>	<4979FE43.1060409@dbtopas.lt>	<20090126150023.GA539@uran.home.aster.pl>	<497E21D9.2090903@gmail.com>	<20090126212015.GA11298@uran.home.aster.pl>	<49805979.1000106@gmail.com>	<20090128161234.GA27962@uran.home.aster.pl>	<4980A978.6040800@gmail.com>	<20090128193718.GA24871@uran.home.aster.pl>	<4980BABE.6000702@gmail.com>
	<20090128205353.GA5102@uran.home.aster.pl>
Message-ID: <4980C712.8070609@gmail.com>

Hi Przemek,
	
Ok, Thanks to you and sorry for my bad English.

Best regards,
Xavi

Przemyslaw Czerpak escribi?:
> On Wed, 28 Jan 2009, Xavi wrote:
> 
> Hi Xavi,
> 
>> Yes you're right. But sorry for my bad English.
> 
> Not worse then mine.
> Now I understand that you are talking about integer value returned
> by snprintf() not about the buffer contents. Sorry my fault.
> 
>> http://www.opengroup.org/onlinepubs/009695399/functions/fprintf.html
>> "Return value: Upon successful completion, the snprintf() function shall 
>> return the number of bytes that would be written to s had n been 
>> sufficiently large *excluding the terminating null byte* ."
>> Now hb_snprintf_c() include in the return value "size" the terminating
>> null byte, you know?.
> 
> Yes sure, it's a bug and should be fixed.
> instead of:
>    return ( int ) size
> we should have:
>    return ( int ) ( size - 1 );
> 
> Many thanks for noticing it. I'll fix it in a while.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

From druzus at acn.waw.pl  Wed Jan 28 16:28:50 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 28 16:24:37 2009
Subject: [Harbour] 2009-01-28 22:28 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090128212850.GA21761@uran.home.aster.pl>

2009-01-28 22:28 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/itemapi.c
    % eliminated hb_snpritf() from HB_IT_POINTER conversion in
      hb_itemString()

  * harbour/source/common/hbprintf.c
    ! fixed return value - it should be one less. Thanks to Xavi.
    + added support for I64, I32 and I16 length specifiers - it's
      MS-Windows only extension but it should help in replacing
      native C *printf() calls with Harbour version.

best regards
Przemek
From info at fsgiudice.com  Wed Jan 28 16:52:33 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Jan 28 16:52:41 2009
Subject: [Harbour] 2009-01-27 10:14 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
In-Reply-To: <20090128025250.GA26095@uran.home.aster.pl>
References: <497ED0E2.5070709@fsgiudice.com>
	<21688199.post@talk.nabble.com>	<497F4829.1080901@fsgiudice.com>	<18d502870901271020q46deaf1amc58862fb5eafa704@mail.gmail.com>	<497F9A6F.4040107@fsgiudice.com>
	<20090128025250.GA26095@uran.home.aster.pl>
Message-ID: <4980D3A1.2050901@fsgiudice.com>

Hi Przemek,

Il 28/01/2009 3.52, Przemyslaw Czerpak ha scritto:

First of all thank you for your detailed explanation,

[snip]
> 
>    HB_REINIT_STATIC
>    HB_KEEP_LOCAL_REFERENCES

good

>    HB_OVERLOAD_FUNCTIONS

interesting, but, as you pointed out, is dangerous in code like HTTP 
server, so my vote is no

> So what should you make now?
> I suggest to ignore this problem until I'll not change structures used
> to hold static variables. The chance for GPF is rather small. The side
> effect of array preallocation added by Mindaugas is noticeable reduced
> number of memory reallocation when new statics are added so the risk is
> really small that the problem will be exploited. Of course it _MUST_ be
> fixed but it should not be critical during uHTTPd developing.
> Now concentrate on the above information. I hope it helps to understand
> how .hrb modules works.
> 
> BTW all of the above is also valid with exactly the same conditions for
> compiled .prg code loaded/unloaded from dynamic libraries (.dll, .so,
> .sl, .dyn, ...).
> 

Ok, I will go on. Thank you again.

Just 3 other questions:
1 - I would like to limit use of some functions that may be dangerous if 
used from a user, like zap a database or FErase, but this are only two 
samples and maybe not pertinent in real developing, or to other 
functions, like dbUseArea(), that I want that not have to be used 
because I would like to add an HTTP_dbUseArea() that can open databases 
and control them. Is there a way to add a HRB_INHIBIT_FUNCTIONS that can 
inhibit some function calls from hrb at HVM level ?

2 - In uhttpd.prg the piece of code that runs HRB modules is guarded 
from a mutex:
--------------
.....
               // Lock HRB to avoid MT race conditions
               IF hb_mutexLock( s_hmtxHRB )  <<<<----
                  IF HRB_ACTIVATE_CACHE
                     // caching modules
                     IF !hb_HHasKey( s_hHRBModules, cFileName )
                        hb_HSet( s_hHRBModules, cFileName, 
HRB_LoadFromFile( uOSFileName( cFileName ) ) )
                     ENDIF
                     cHRBBody := s_hHRBModules[ cFileName ]
                  ELSE
                     cHRBBody := HRB_LoadFromFile( uOSFileName( 
cFileName ) )
                  ENDIF
                  IF !EMPTY( pHRB := HB_HRBLOAD( cHRBBody ) )

                      xResult := HRBMAIN()

                      HB_HRBUNLOAD( pHRB )
                  ELSE
                      uSetStatusCode( 404 )
                      t_cErrorMsg := "File does not exist: " + cFileName
                  ENDIF
                  hb_mutexUnlock( s_hmtxHRB ) <<<<----

               ENDIF

.....

STATIC FUNCTION HRB_LoadFromFile( cFile )
    RETURN hb_memoread( cFile )

--------------
Is it correct or is it unnecessary because this is already done from HVM  ?

3 - In the same piece of code (not already uploaded) I have thought to a 
memory cache of HRBBody code using an hash (actually HRB_ACTIVATE_CACHE 
can has value .T. or .F.) but I'm not able to evaluate costs between 
load from file everytime (where I suppose that OS helps caching file in 
memory) or scanning an hash and retrieve the string (apart from a side 
effect: loading an hrb module from file permits to update hrb code on 
the fly, the other method load hrb only first time than I need to 
"purge" list to have it loaded again).

TIA

Best regards,

Francesco
From dbtopas at dbtopas.lt  Wed Jan 28 17:33:56 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Jan 28 17:33:58 2009
Subject: [Harbour] Clipper incompatibilities
Message-ID: <4980DD54.60203@dbtopas.lt>

Hi,


my friends showed a few more Clipper incompatibilites.
1) negative julian dates
   SET(4, "yyyy-mm-dd")
   dDate := CTOD("") - 1
   ? dDate     // Clipper: "1449-02-15", Harbour: "    -  -  "

I would suggest to fix a code for samples like this, but sometimes this 
Harbour behaviour can lead to unexpected results:

Export:
   IF ! EMPTY(dDate)
     cFileContent := DTOC(dDate)
   ENDIF

Import:
   dDate := CTOD(cFileContent)
   // We expect dDate to be non empty date, but it is empty in Harbour

Usually we never expect following code to print .T.:
   IF ! EMPTY(dDate)
     ? EMPTY(CTOD(DTOC(dDate)))
   ENDIF


2) index creation using codeblock
REQUEST DBFCDX
PROC main()
FIELD F
   RDDSETDEFAULT("DBFCDX")
   DBCREATE("test145", {{"F", "C", 1, 0}})
   DBUSEAREA(.T.,, "test145")
   DBAPPEND();  F := "a"
   DBAPPEND();  F := "c"
   DBAPPEND();  F := "b"
   OrdCreate("test145", "f", "", {|| F})
   DBEVAL({|| QQOUT(F)})
   DBCLOSEALL()
RETURN

Clipper prints: abc
Harbour prints: acb


3) during the test number 2, I found a GPF in RDD code.
If you do not delete *.dbf and *.cdx files after running Clipper test, 
and try to run Harbour test (I've used: hbrun test145.prg), I get a GPF on:
Called from DBAPPEND(0)
Called from MAIN(8) in pcode.hrb
Called from HB_HRBRUN(0)
Called from _APPMAIN(0) in utils\hbrun\hbrun.prg


Regards,
Mindaugas


From harbour.01 at syenar.hu  Wed Jan 28 18:13:55 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Jan 28 18:14:00 2009
Subject: [Harbour] 2008-11-01 21:13 UTC+0100 Przemyslaw Czerpak 
	(druzus/at/priv.onet.pl)
In-Reply-To: <20090128193718.GA24871@uran.home.aster.pl>
References: <20081127155323.GA25089@34-mo7-2.acn.waw.pl>
	<20081128213258.GA20608@34-mo7-2.acn.waw.pl>
	<4979FE43.1060409@dbtopas.lt>
	<20090126150023.GA539@uran.home.aster.pl> <497E21D9.2090903@gmail.com>
	<20090126212015.GA11298@uran.home.aster.pl>
	<49805979.1000106@gmail.com>
	<20090128161234.GA27962@uran.home.aster.pl>
	<4980A978.6040800@gmail.com>
	<20090128193718.GA24871@uran.home.aster.pl>
Message-ID: <18d502870901281513qd956ad2mb74010bc4c45b21a@mail.gmail.com>

>
> I've just check BCC5.5 and it's even worse. BCC *ignores* buffer size
> in [v]snprintf() functions so there is not protection at all. It means
> that also our hb_snprintf() which uses internally vsnprintf() does
> not give any protection. It's _VERY_ serious bug and it means that
> at least for this compiler we _MUST_ switch to hb_snprintf_c() or
> we will have potential buffer overflows in core code.
> It will be good to test also other C compilers.


Heavy news. BCC looks unfit for production work in my view.

I think we should switch to hb_snprintf_c() for all platforms.
(by simply renaming it to hb_snprintf() and remove the #define tricks.)

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090129/adbb98f1/attachment.html
From druzus at acn.waw.pl  Wed Jan 28 20:07:40 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 28 20:03:27 2009
Subject: [Harbour] Clipper incompatibilities
In-Reply-To: <4980DD54.60203@dbtopas.lt>
References: <4980DD54.60203@dbtopas.lt>
Message-ID: <20090129010740.GA21775@uran.home.aster.pl>

On Thu, 29 Jan 2009, Mindaugas Kavaliauskas wrote:

Hi,

> my friends showed a few more Clipper incompatibilites.
> 1) negative julian dates
>   SET(4, "yyyy-mm-dd")
>   dDate := CTOD("") - 1
>   ? dDate     // Clipper: "1449-02-15", Harbour: "    -  -  "
> I would suggest to fix a code for samples like this, but sometimes this 
> Harbour behaviour can lead to unexpected results:
> Export:
>   IF ! EMPTY(dDate)
>     cFileContent := DTOC(dDate)
>   ENDIF
> Import:
>   dDate := CTOD(cFileContent)
>   // We expect dDate to be non empty date, but it is empty in Harbour
> Usually we never expect following code to print .T.:
>   IF ! EMPTY(dDate)
>     ? EMPTY(CTOD(DTOC(dDate)))
>   ENDIF

This is not such simple.
1-st the range of dates which can be convereted to strings is much
smaller then whole supported date range. We can only represent aa
strings dates from:
   0000-01-01
to:
   9999-12-31
in fact we should even start from 0001-01-01 because year 1-st year
in our calendar has number 1 not 0 anyhow 0 can be used as some type
of meta representation of 1 year B.C.
This defines range of dates which can be converted to strings to:
   1721060 <= dDate <= 5373484
Internally Harbour and Clipper keeps dates as number of days from
Julina's day.
All dates out of this range cannot be presented as strings.
Clipper introduces additional smaller upper limit at: 2999-12-31
which we do not replicate intentionally for compatibility with
other systems.
So at beginning we should not expect that the date converted to
string should will be non empty if date is not empty. It isn't
even with Clipper.
   ? ctod("")+1
In this example we can only see that for some range of negative
date values Clipper gives non empty date strings. Of course it's
a bug. Probably dates are converted in some cyclic periods to
non empty values. If you are interested then you can try to
find this period. Anyhow it's a bug and should not be replicate.
Please note that it's not revertable conversion, f.e. try this code:

   ? (ctod("")-1)
   ? (ctod("")-1)-ctod("")
   ? ctod("1449-02-15")-ctod("")
   ? (ctod("")-1)==ctod("1449-02-15")

If you begin to dig deeper in Clipper date conversions you will
find also other bugs.
For me current Harbour behavior is perfect and systematic without
any unexpected anomalies like above.

> 2) index creation using codeblock
> REQUEST DBFCDX
> PROC main()
> FIELD F
>   RDDSETDEFAULT("DBFCDX")
>   DBCREATE("test145", {{"F", "C", 1, 0}})
>   DBUSEAREA(.T.,, "test145")
>   DBAPPEND();  F := "a"
>   DBAPPEND();  F := "c"
>   DBAPPEND();  F := "b"
>   OrdCreate("test145", "f", "", {|| F})
>   DBEVAL({|| QQOUT(F)})
>   DBCLOSEALL()
> RETURN
>
> Clipper prints: abc
> Harbour prints: acb

Here we have missing RT error.
Index is not created due to invalid index key expression: ""
Current DBFCDX detects it and do not create index but RT
error is not generated. Clipper does not validate key expression.
I do not remember why exactly we added stringed key expression
validation but it was done in last few months.
We can add RT error or remove this validation.
I'll add this RT error. It should help in finding bugs in code.
If someone will have serious reasons to remove it then we can
disuse about it.

> 3) during the test number 2, I found a GPF in RDD code.
> If you do not delete *.dbf and *.cdx files after running Clipper test, and 
> try to run Harbour test (I've used: hbrun test145.prg), I get a GPF on:
> Called from DBAPPEND(0)
> Called from MAIN(8) in pcode.hrb
> Called from HB_HRBRUN(0)
> Called from _APPMAIN(0) in utils\hbrun\hbrun.prg

This is also side effect of recent modifications. For some reasons
we accept tags with empty key expression like structural tags.
Probably some sent such index created by some other tools. I do not
remember and I forgot to document the source of modifications.
I'll block it so RT error will be generated.
The GPF can be also exploited in DBFNTX but for different reasons.
I'll fix it too.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Jan 28 20:16:28 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 28 20:12:13 2009
Subject: [Harbour] 2009-01-29 02:16 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090129011628.GA3443@uran.home.aster.pl>

2009-01-29 02:16 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/common/hbprintf.c
    * minor modification for easier future updating

  * harbour/source/rdd/dbfntx/dbfntx1.c
    ! fixed possible GPF caused by corrupted indexes

  * harbour/source/rdd/dbfcdx/dbfcdx1.c
    ! fixed possible GPF caused by missing RT error
    ! added RT errors for invalid KEY or FOR expressions

best regards
Przemek
From dbtopas at dbtopas.lt  Wed Jan 28 20:23:07 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Jan 28 20:23:07 2009
Subject: [Harbour] Clipper incompatibilities
In-Reply-To: <20090129010740.GA21775@uran.home.aster.pl>
References: <4980DD54.60203@dbtopas.lt>
	<20090129010740.GA21775@uran.home.aster.pl>
Message-ID: <498104FB.2050100@dbtopas.lt>

Hi,

> Index is not created due to invalid index key expression: ""
> Current DBFCDX detects it and do not create index but RT
> error is not generated. Clipper does not validate key expression.
> I do not remember why exactly we added stringed key expression
> validation but it was done in last few months.
> We can add RT error or remove this validation.
> I'll add this RT error. It should help in finding bugs in code.
> If someone will have serious reasons to remove it then we can
> disuse about it.

Yes, I think we had no problem with some Harbour version in the past. 
Now the problem is: what should we put into key expression, if indexing 
should be done using codeblock? Using NIL parameter for key expression 
generates run time error.

In DBFCDX block has a kind of priority - index is generated using 
codeblock, and key expression is used only for storing key in .cdx files 
(temporary .cdx files in this case). But the situation is opposite in 
ADSX RDD. Key expression is passed to the server, and if server is 
unable to solve that expression, ADSX creates local memory index using 
codeblock. Solution to satisfy both DBFCDX and ADSX was simple:
   OrdCreate(,, "", {|| ...key.block...})

Now I have to do something like:
   OrdCreate(,, "FUNC_UNKNOWN_FOR_ADS()", {|| ...key.block...})
   ...

FUNC FUNC_UNKNOWN_FOR_ADS()
RETURN SPACE(1)

to be expression valid for DBFCDX (even if it is not used for indexing), 
and to be it invalid for ADS, thus forcing fallback to local indexing by 
codeblock.


Regards,
Mindaugas

From druzus at acn.waw.pl  Wed Jan 28 20:38:10 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jan 28 20:33:56 2009
Subject: [Harbour] 2009-01-27 10:14 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
In-Reply-To: <4980D3A1.2050901@fsgiudice.com>
References: <497ED0E2.5070709@fsgiudice.com> <21688199.post@talk.nabble.com>
	<497F4829.1080901@fsgiudice.com>
	<18d502870901271020q46deaf1amc58862fb5eafa704@mail.gmail.com>
	<497F9A6F.4040107@fsgiudice.com>
	<20090128025250.GA26095@uran.home.aster.pl>
	<4980D3A1.2050901@fsgiudice.com>
Message-ID: <20090129013810.GB21775@uran.home.aster.pl>

On Wed, 28 Jan 2009, Francesco Saverio Giudice wrote:

Hi,

> Just 3 other questions:
> 1 - I would like to limit use of some functions that may be dangerous if 
> used from a user, like zap a database or FErase, but this are only two 
> samples and maybe not pertinent in real developing, or to other functions, 
> like dbUseArea(), that I want that not have to be used because I would like 
> to add an HTTP_dbUseArea() that can open databases and control them. Is 
> there a way to add a HRB_INHIBIT_FUNCTIONS that can inhibit some function 
> calls from hrb at HVM level ?

As long as you do not block macro compiler then it will not be possible.
Even if you block it in this module then programmer can find other way to
execute any function by macro compiler inside other modules, f.e. he can
try to use some filter or even index key expressions passed as string adding
his own forbidden code.
To make it we should locate and document all functions which makes
macrocompilation. We should declare forbidden namespace for given thread
and respect this name space in all macrocompilations.
It's complicated problem and to create some really working solutions
which will be acceptable for programmers using restrictive environment
it's necessary to first carefully document all possible danger places
in core code and what will happen if some things will be blocked.

> 2 - In uhttpd.prg the piece of code that runs HRB modules is guarded from a 
> mutex:
> --------------
> .....
>               // Lock HRB to avoid MT race conditions
>               IF hb_mutexLock( s_hmtxHRB )  <<<<----
>                  IF HRB_ACTIVATE_CACHE
>                     // caching modules
>                     IF !hb_HHasKey( s_hHRBModules, cFileName )
>                        hb_HSet( s_hHRBModules, cFileName, ;
>                            HRB_LoadFromFile( uOSFileName( cFileName ) ) )
>                     ENDIF
>                     cHRBBody := s_hHRBModules[ cFileName ]
>                  ELSE
>                     cHRBBody := HRB_LoadFromFile( uOSFileName( cFileName ) )
>                  ENDIF
>                  IF !EMPTY( pHRB := HB_HRBLOAD( cHRBBody ) )
>                      xResult := HRBMAIN()
>
>                      HB_HRBUNLOAD( pHRB )
>                  ELSE
>                      uSetStatusCode( 404 )
>                      t_cErrorMsg := "File does not exist: " + cFileName
>                  ENDIF
>                  hb_mutexUnlock( s_hmtxHRB ) <<<<----
>
>               ENDIF
> .....
>
> STATIC FUNCTION HRB_LoadFromFile( cFile )
>    RETURN hb_memoread( cFile )
>
> --------------
> Is it correct or is it unnecessary because this is already done from HVM  ?

For HVM it's not necessary but you need it for your own code to protect
s_hHRBModules variable and public function name space because you are
using fixed starting function HRBMAIN() and only one public function
with given name can be register in HVM so this code can be executed only
by one thread and you have to block other threads.

> 3 - In the same piece of code (not already uploaded) I have thought to a 
> memory cache of HRBBody code using an hash (actually HRB_ACTIVATE_CACHE can 
> has value .T. or .F.) but I'm not able to evaluate costs between load from 
> file everytime (where I suppose that OS helps caching file in memory) or 
> scanning an hash and retrieve the string (apart from a side effect: loading 
> an hrb module from file permits to update hrb code on the fly, the other 
> method load hrb only first time than I need to "purge" list to have it 
> loaded again).

The performance will be strictly platform dependent. Probably in Linux
and other *nixes you will not find big speed difference. But in windows
or when files are not stored on local drives then it will increase
performance.
Anyhow in such case I suggest to add option to discard buffers without
server reloading. 
When cache is disabled I suggest to make file loading outside s_hmtxHRB
to reduce time when it's locked.

best regards,
Przemek
From dbtopas at dbtopas.lt  Wed Jan 28 20:41:31 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Jan 28 20:41:35 2009
Subject: [Harbour] Clipper incompatibilities
In-Reply-To: <20090129010740.GA21775@uran.home.aster.pl>
References: <4980DD54.60203@dbtopas.lt>
	<20090129010740.GA21775@uran.home.aster.pl>
Message-ID: <4981094B.3050507@dbtopas.lt>

Hi,

>> 1) negative julian dates
>>   SET(4, "yyyy-mm-dd")
>>   dDate := CTOD("") - 1
>>   ? dDate     // Clipper: "1449-02-15", Harbour: "    -  -  "
> ...
> So at beginning we should not expect that the date converted to
> string should will be non empty if date is not empty. It isn't
> even with Clipper.
>    ? ctod("")+1
> In this example we can only see that for some range of negative
> date values Clipper gives non empty date strings. Of course it's
> a bug. Probably dates are converted in some cyclic periods to
> non empty values. If you are interested then you can try to
> find this period. Anyhow it's a bug and should not be replicate.
> Please note that it's not revertable conversion, f.e. try this code:
> 
>    ? (ctod("")-1)
>    ? (ctod("")-1)-ctod("")
>    ? ctod("1449-02-15")-ctod("")
>    ? (ctod("")-1)==ctod("1449-02-15")
> 
> If you begin to dig deeper in Clipper date conversions you will
> find also other bugs.
> For me current Harbour behavior is perfect and systematic without
> any unexpected anomalies like above.

Yes, I know these issues. I've looked to code before writing a letter. 
To be Clipper compatible we need to used unsigned long (we have signed 
now) for Julian date and use unsigned short (we have signed int now) for 
intermediate year representation. In conversions Julian <-> 
(year,month,day). Since this is not a few line change, I wanted to 
consult the mailing list about these issues.
The main annoying thing is that: EMPTY(dDate) is true, but 
EMPTY(CTOD(DTOC(dDate))) is false, for dates like CTOD("")-1 in Harbour.

Since, this annoying thing is also valid for CTOD("")+1 for both Clipper 
and Harbour, let's leave it as it is.


Regards,
Mindaugas
From philb at philb.us  Thu Jan 29 03:25:38 2009
From: philb at philb.us (Phil Barnett)
Date: Thu Jan 29 03:25:45 2009
Subject: [Harbour] Fwd: SF.net SVN: harbour-project:[10057]
	trunk/harbour/ChangeLog
In-Reply-To: <18d502870901170250s55f3239fy8f883243e85c6637@mail.gmail.com>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>	<49708C44.9040307@dbtopas.lt>	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>	<4970A8AD.5060207@dbtopas.lt>	<18d502870901160748qfca2e95o96d408ce11c4e5ee@mail.gmail.com>	<49713218.8080806@philb.us>
	<18d502870901170250s55f3239fy8f883243e85c6637@mail.gmail.com>
Message-ID: <49816802.8020706@philb.us>

Viktor Szak?ts wrote:
> Hi Phil,
>
>
>         Yes, that looks like it.
>
>     I can build mailboxes on the domain and I can forward them. I can
>     join harbour@harbour-project.org
>     <mailto:harbour@harbour-project.org> with the nomail option set.
>
>     Does that sound like it will work? nomail means don't send any
>     list mail.
>
>
> Sounds okay, let's try it with svncommit@harbour-project.org 
> <mailto:svncommit@harbour-project.org>
>
> I'm setting up a notification for this address.
Ok, svncommit is allowed to send mail to this list via a redirect.

I'm now concerned that this will open a door into the list for spamming, 
since we have a redirect with no restrictions that is allowed to post here.

I now believe it would be best if the have the svn commit emails go 
directly to the list, as soon as that happens, I'll get a notice that 
mail was blocked and I can allow it through and set it to nomail, 
nodups. That will close the hole.

I'm sure nobody here wants to see spam start making its way in this nice 
clean list.
From harbour.01 at syenar.hu  Thu Jan 29 05:27:12 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Jan 29 05:27:18 2009
Subject: [Harbour] Fwd: SF.net SVN: harbour-project:[10057] 
	trunk/harbour/ChangeLog
In-Reply-To: <49816802.8020706@philb.us>
References: <E1LNmqj-0005f7-DN@dn4whf1.ch3.sourceforge.com>
	<18d502870901160335v1573fc8fgd6e54077a77fd3a0@mail.gmail.com>
	<49708C44.9040307@dbtopas.lt>
	<18d502870901160606n24840a4ew233be955d16f2773@mail.gmail.com>
	<4970A8AD.5060207@dbtopas.lt>
	<18d502870901160748qfca2e95o96d408ce11c4e5ee@mail.gmail.com>
	<49713218.8080806@philb.us>
	<18d502870901170250s55f3239fy8f883243e85c6637@mail.gmail.com>
	<49816802.8020706@philb.us>
Message-ID: <18d502870901290227s27bca7c0o6ca0e662135fe6a9@mail.gmail.com>

Many thanks Phil.

Let's wait for the first commit to appear.

Brgds,
Viktor

On Thu, Jan 29, 2009 at 9:25 AM, Phil Barnett <philb@philb.us> wrote:

> Viktor Szak?ts wrote:
>
>> Hi Phil,
>>
>>
>>        Yes, that looks like it.
>>
>>    I can build mailboxes on the domain and I can forward them. I can
>>    join harbour@harbour-project.org
>>    <mailto:harbour@harbour-project.org> with the nomail option set.
>>
>>    Does that sound like it will work? nomail means don't send any
>>    list mail.
>>
>>
>> Sounds okay, let's try it with svncommit@harbour-project.org <mailto:
>> svncommit@harbour-project.org>
>>
>> I'm setting up a notification for this address.
>>
> Ok, svncommit is allowed to send mail to this list via a redirect.
>
> I'm now concerned that this will open a door into the list for spamming,
> since we have a redirect with no restrictions that is allowed to post here.
>
> I now believe it would be best if the have the svn commit emails go
> directly to the list, as soon as that happens, I'll get a notice that mail
> was blocked and I can allow it through and set it to nomail, nodups. That
> will close the hole.
>
> I'm sure nobody here wants to see spam start making its way in this nice
> clean list.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090129/c4ebd746/attachment.html
From M.Horodyski at pzuzycie.com.pl  Thu Jan 29 07:48:19 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu Jan 29 07:48:25 2009
Subject: [Harbour] (no subject)
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501D386B2@PINK.zycie.pzu>

I try build harbour from naightly.zip of 29.01.2009, and don't can
create GTWVT.
In make_b32.log have I :

bcc32.exe -c -q -d -Q -w -w-sig- -tWM -4 -O2 -OS -Ov -Oi -Oc -Iinclude
-Iobj\b32 -DHB_FM_STATISTICS_OFF -oobj\b32\gtwvt.obj
source\rtl\gtwvt\gtwvt.c
source\rtl\gtwvt\gtwvt.c:
Warning W8017 source\rtl\gtwvt\gtwvt.c 87: Redefinition of
'_WIN32_WINNT' is not identical
Error E2451 source\rtl\gtwvt\gtwvt.c 1777: Undefined symbol
'SM_REMOTESESSION' in function hb_gt_wvt_CreateConsoleWindow
*** 1 errors in Compile ***


Regards,
Marek Horodyski
From harbour.01 at syenar.hu  Thu Jan 29 08:27:12 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Jan 29 08:27:17 2009
Subject: [Harbour] (no subject)
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501D386B2@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501D386B2@PINK.zycie.pzu>
Message-ID: <18d502870901290527s6227a1dl32228b7cb58bea1b@mail.gmail.com>

Hi Marek,
Just out of curiosity, which BCC version is this?

Brgds,
Viktor

On Thu, Jan 29, 2009 at 1:48 PM, Horodyski Marek (PZUZ) <
M.Horodyski@pzuzycie.com.pl> wrote:

> I try build harbour from naightly.zip of 29.01.2009, and don't can
> create GTWVT.
> In make_b32.log have I :
>
> bcc32.exe -c -q -d -Q -w -w-sig- -tWM -4 -O2 -OS -Ov -Oi -Oc -Iinclude
> -Iobj\b32 -DHB_FM_STATISTICS_OFF -oobj\b32\gtwvt.obj
> source\rtl\gtwvt\gtwvt.c
> source\rtl\gtwvt\gtwvt.c:
> Warning W8017 source\rtl\gtwvt\gtwvt.c 87: Redefinition of
> '_WIN32_WINNT' is not identical
> Error E2451 source\rtl\gtwvt\gtwvt.c 1777: Undefined symbol
> 'SM_REMOTESESSION' in function hb_gt_wvt_CreateConsoleWindow
> *** 1 errors in Compile ***
>
>
> Regards,
> Marek Horodyski
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090129/62b4ce52/attachment.html
From M.Horodyski at pzuzycie.com.pl  Thu Jan 29 08:42:47 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu Jan 29 08:42:54 2009
Subject: Previous message: [Harbour] (no subject)
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501D38700@PINK.zycie.pzu>

Hi Viktor,

>>>>
Hi Marek,
Just out of curiosity, which BCC version is this?
<<<<<

BCC32 5.5.1

Regards,
Marek Horodyski
From M.Horodyski at pzuzycie.com.pl  Thu Jan 29 08:46:06 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu Jan 29 08:46:11 2009
Subject: Previous message: [Harbour] (no subject)
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501D38709@PINK.zycie.pzu>


 >-----Original Message-----
>From: Horodyski Marek (PZUZ) 
>Sent: Thursday, January 29, 2009 1:48 PM
>To: 'Harbour Project Main Developer List.'
>Subject: 
>
>I try build harbour from naightly.zip of 29.01.2009, and don't 

Sorry, it was 27.01.2009

Regards,
Marek Horodyski
From harbour.01 at syenar.hu  Thu Jan 29 08:51:24 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Jan 29 08:51:29 2009
Subject: Previous message: [Harbour] (no subject)
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501D38709@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501D38709@PINK.zycie.pzu>
Message-ID: <18d502870901290551o57d7a9fam7fa9925e8d6352b@mail.gmail.com>

Hm, strange nobody reported that yet, especially that hbwhat.lib has the
same issue since years (in almost
all of its files).
I've committed a fix.

Brgds,
Viktor

On Thu, Jan 29, 2009 at 2:46 PM, Horodyski Marek (PZUZ) <
M.Horodyski@pzuzycie.com.pl> wrote:

>
>  >-----Original Message-----
> >From: Horodyski Marek (PZUZ)
> >Sent: Thursday, January 29, 2009 1:48 PM
> >To: 'Harbour Project Main Developer List.'
> >Subject:
> >
> >I try build harbour from naightly.zip of 29.01.2009, and don't
>
> Sorry, it was 27.01.2009
>
> Regards,
> Marek Horodyski
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090129/9340c6f7/attachment.html
From druzus at acn.waw.pl  Thu Jan 29 13:46:51 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jan 29 13:42:34 2009
Subject: [Harbour] Clipper incompatibilities
In-Reply-To: <498104FB.2050100@dbtopas.lt>
References: <4980DD54.60203@dbtopas.lt>
	<20090129010740.GA21775@uran.home.aster.pl>
	<498104FB.2050100@dbtopas.lt>
Message-ID: <20090129184651.GA20592@uran.home.aster.pl>

On Thu, 29 Jan 2009, Mindaugas Kavaliauskas wrote:

Hi,

> Yes, I think we had no problem with some Harbour version in the past. Now 
> the problem is: what should we put into key expression, if indexing should 
> be done using codeblock? Using NIL parameter for key expression generates 
> run time error.

Please note that this can be used only for temporary indexes.
When index is reopened then it needs valid key and for expressions.
It means that we create corrupted indexes in such way.

> In DBFCDX block has a kind of priority - index is generated using 
> codeblock, and key expression is used only for storing key in .cdx files 
> (temporary .cdx files in this case). But the situation is opposite in ADSX 
> RDD. Key expression is passed to the server, and if server is unable to 
> solve that expression, ADSX creates local memory index using codeblock. 
> Solution to satisfy both DBFCDX and ADSX was simple:
>   OrdCreate(,, "", {|| ...key.block...})
> Now I have to do something like:
>   OrdCreate(,, "FUNC_UNKNOWN_FOR_ADS()", {|| ...key.block...})
>   ...
> FUNC FUNC_UNKNOWN_FOR_ADS()
> RETURN SPACE(1)
> to be expression valid for DBFCDX (even if it is not used for indexing), 
> and to be it invalid for ADS, thus forcing fallback to local indexing by 
> codeblock.

I do not like such hacks because they are really RDD dependent.
I'll unblock such possibilities in next commit but maybe we should
allow to create such indexes only if temporary flag is set.
Temporary indexes are automatically removed on close so we will not
leave corrupted files. They are also open in EXCLUSIVE mode so other
application will not be able to access them.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Jan 29 13:49:41 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jan 29 13:45:24 2009
Subject: [Harbour] 2009-01-29 19:48 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090129184941.GA28910@uran.home.aster.pl>

2009-01-29 19:48 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/postinst.sh
    ! added missing export in envvar setting.

  * harbour/config/linux/install.cf
    * added error message when install directory is not set.

  * harbour/config/lib.cf
  * harbour/config/bin.cf
  * harbour/config/dir.cf
    + added explicit support for make recursive calls.
      Question: why we use $(MK) instead of $(MAKE) so it necessary
      to mark recursive make calls manually?

  * harbour/config/dir.cf
    * rewritten DIR_RUL to use only GNU make commands instead of
      OS scripts. Now config/<arch>/dir.cf files are not longer used.
      Please make build tests on different platforms. If all will
      be correct then we remove these files.

  * harbour/source/common/Makefile
  * harbour/source/vm/Makefile
  * harbour/source/vm/vmmt/Makefile
    * moved biggest files to begin of file list for better parallel
      compilation utilization.

  * harbour/source/rdd/dbfcdx/dbfcdx1.c
    * accept invalid string key expression if codeblock key expression
      is given.

best regards
Przemek
From lorenzo.fiorini at gmail.com  Thu Jan 29 16:26:11 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Jan 29 16:28:10 2009
Subject: [Harbour] 2009-01-29 19:48 UTC+0100 Przemyslaw Czerpak 
	(druzus/at/priv.onet.pl)
In-Reply-To: <20090129184941.GA28910@uran.home.aster.pl>
References: <20090129184941.GA28910@uran.home.aster.pl>
Message-ID: <9257026e0901291326v178464c7g1e83e6419a2053db@mail.gmail.com>

On Thu, Jan 29, 2009 at 7:49 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

>  * harbour/config/dir.cf
>    * rewritten DIR_RUL to use only GNU make commands instead of
>      OS scripts. Now config/<arch>/dir.cf files are not longer used.
>      Please make build tests on different platforms. If all will
>      be correct then we remove these files.

I've tested it under Ubuntu and WinXP msys/mingw and it works as expected.
No more errors using -j option under msys/mingw.

Many thanks.

best regards,
Lorenzo
From druzus at acn.waw.pl  Thu Jan 29 16:51:33 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jan 29 16:47:16 2009
Subject: [Harbour] 2009-01-29 22:50 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090129215133.GA20521@uran.home.aster.pl>

2009-01-29 22:50 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/rules.cf
  * harbour/config/dos/bcc16.cf
    ! fixed wrong automatic macros $? was used instead of $<

  * harbour/config/dir.cf
    * optional new DIR_RULE setting for easier testing

  * harbour/config/c.cf
    + added support for setting dependencies for files which needs
      grammar header files generated by bison (YACC_DEPEND)

  * harbour/source/macro/Makefile
    * marked macrolex.c as YACC_DEPEND dependent

  * harbour/source/compiler/Makefile
    * marked complex.c as YACC_DEPEND dependent

best regards
Przemek
From harbour.01 at syenar.hu  Thu Jan 29 17:34:23 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Jan 29 17:34:31 2009
Subject: [Harbour] 2009-01-29 22:50 UTC+0100 Przemyslaw Czerpak 
	(druzus/at/priv.onet.pl)
In-Reply-To: <20090129215133.GA20521@uran.home.aster.pl>
References: <20090129215133.GA20521@uran.home.aster.pl>
Message-ID: <18d502870901291434x2b9d722fx1040c1a59859877a@mail.gmail.com>

Hi Przemek,
Worked here with Mingw and msys.

I've just tested BCC16, and got this:
---
echo. ../../../../lib/dos/bcc16/hbcommon.lib &> __lib__.tmp
The syntax of the command is incorrect.
---

[ plus, 'install' mode doesn't work at all. ]

[ well, BCC16 is really just a portability exercise, isn't it :) ]

Brgds,
Viktor

On Thu, Jan 29, 2009 at 10:51 PM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:

> 2009-01-29 22:50 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/config/rules.cf
>  * harbour/config/dos/bcc16.cf
>    ! fixed wrong automatic macros $? was used instead of $<
>
>  * harbour/config/dir.cf
>    * optional new DIR_RULE setting for easier testing
>
>  * harbour/config/c.cf
>    + added support for setting dependencies for files which needs
>      grammar header files generated by bison (YACC_DEPEND)
>
>  * harbour/source/macro/Makefile
>    * marked macrolex.c as YACC_DEPEND dependent
>
>  * harbour/source/compiler/Makefile
>    * marked complex.c as YACC_DEPEND dependent
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090129/5000a9d0/attachment.html
From druzus at acn.waw.pl  Thu Jan 29 21:18:17 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jan 29 21:14:00 2009
Subject: [Harbour] 2009-01-29 22:50 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <18d502870901291434x2b9d722fx1040c1a59859877a@mail.gmail.com>
References: <20090129215133.GA20521@uran.home.aster.pl>
	<18d502870901291434x2b9d722fx1040c1a59859877a@mail.gmail.com>
Message-ID: <20090130021817.GA27166@uran.home.aster.pl>

On Thu, 29 Jan 2009, Szak?ts Viktor wrote:

Hi,

> Worked here with Mingw and msys.
> I've just tested BCC16, and got this:
> ---
> echo. ../../../../lib/dos/bcc16/hbcommon.lib &> __lib__.tmp
> The syntax of the command is incorrect.
> ---
> [ plus, 'install' mode doesn't work at all. ]
> [ well, BCC16 is really just a portability exercise, isn't it :) ]

Thanks for tests.
Looks that it works with *nixes and MS-Windows MSYS.
There are problems with DOS builds. I made some tests with
DOS (in DOSEMU) and DJGPP and it does not work. Looks like
a problems with recursive calls and -C flag. It stops to
work on second level. I'll try to make deeper tests tomorrow.
I would like to ask someone to make MinGW or other Win32 build
tests but without MSYS to check if it works. And if possible
OS2 build tests. For platforms which will not work I'll restore
previous version. For other ones I'd prefer to keep new version
which better utilize parallel processing. It greatly reduces the
compilation time.

I've never tried to make BCC16 builds so I cannot say it was
ever working. And I'm talking only about make process. For sure
current HVM/RTL cannot work in 16bit environment due to memory
limitations.

best regards,
Przemek
From info at fsgiudice.com  Thu Jan 29 21:27:47 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Thu Jan 29 21:28:10 2009
Subject: [Harbour] 2009-01-30 03:24 UTC+0100 Francesco Saverio Giudice
	(info/at/fsgiudice.com)
Message-ID: <498265A3.6070806@fsgiudice.com>

2009-01-30 03:24 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   * harbour/contrib/examples/uhttpd/uhttpd.prg
     * Updated uHTTPD (Work in progress)
       + Added HRB caching (set #define HRB_ACTIVATE_CACHE .T. to enable)
       + Added support for Cookies
       * Formatted
       ! Renamed all public functions with uhttpd_ prefix (TOCHECK)
       + Added support for array content in POST variables
       * Optimized some code
   + harbour/contrib/examples/uhttpd/cgifunc.prg
     + Some helper function moved here from uhttpd prg and added
       some functions of mine
   + harbour/contrib/examples/uhttpd/cookie.prg
     + Cookie class
   + harbour/contrib/examples/uhttpd/modules/cookie.prg
     + cookie sample module
   + harbour/contrib/examples/uhttpd/home/postsample.html
     + POST example
   * harbour/contrib/examples/uhttpd/uhttpd.ini
     + Added new script alias for cookie sample

   * harbour/contrib/examples/uhttpd/hbmk_b32.bat
   * harbour/contrib/examples/uhttpd/home/index.html
   * harbour/contrib/examples/uhttpd/home/testxmldb.html
   * harbour/contrib/examples/uhttpd/modules/bldhrb.bat
   * harbour/contrib/examples/uhttpd/modules/info.prg
   * harbour/contrib/examples/uhttpd/modules/showcounter.prg
   * harbour/contrib/examples/uhttpd/modules/tableservletdb.prg
     * Updated for new function prefix and some formatting


Best regards

Francesco
From harbour.01 at syenar.hu  Fri Jan 30 01:35:10 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Jan 30 01:35:17 2009
Subject: [Harbour] 2009-01-29 22:50 UTC+0100 Przemyslaw Czerpak 
	(druzus/at/priv.onet.pl)
In-Reply-To: <20090130021817.GA27166@uran.home.aster.pl>
References: <20090129215133.GA20521@uran.home.aster.pl>
	<18d502870901291434x2b9d722fx1040c1a59859877a@mail.gmail.com>
	<20090130021817.GA27166@uran.home.aster.pl>
Message-ID: <18d502870901292235p7b091250x81ec4ba0ea60dfa5@mail.gmail.com>

I'd suggest to remove bcc16.cf. [ I wasn't expecting it to work either. ]
What do you think?

Brgds,
Viktor

On Fri, Jan 30, 2009 at 3:18 AM, Przemyslaw Czerpak <druzus@acn.waw.pl>wrote:

> On Thu, 29 Jan 2009, Szak?ts Viktor wrote:
>
> Hi,
>
> > Worked here with Mingw and msys.
> > I've just tested BCC16, and got this:
> > ---
> > echo. ../../../../lib/dos/bcc16/hbcommon.lib &> __lib__.tmp
> > The syntax of the command is incorrect.
> > ---
> > [ plus, 'install' mode doesn't work at all. ]
> > [ well, BCC16 is really just a portability exercise, isn't it :) ]
>
> Thanks for tests.
> Looks that it works with *nixes and MS-Windows MSYS.
> There are problems with DOS builds. I made some tests with
> DOS (in DOSEMU) and DJGPP and it does not work. Looks like
> a problems with recursive calls and -C flag. It stops to
> work on second level. I'll try to make deeper tests tomorrow.
> I would like to ask someone to make MinGW or other Win32 build
> tests but without MSYS to check if it works. And if possible
> OS2 build tests. For platforms which will not work I'll restore
> previous version. For other ones I'd prefer to keep new version
> which better utilize parallel processing. It greatly reduces the
> compilation time.
>
> I've never tried to make BCC16 builds so I cannot say it was
> ever working. And I'm talking only about make process. For sure
> current HVM/RTL cannot work in 16bit environment due to memory
> limitations.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090130/338cccf1/attachment.html
From harbour.01 at syenar.hu  Fri Jan 30 02:31:43 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Jan 30 02:31:48 2009
Subject: [Harbour] Stripping accents from a string.
Message-ID: <18d502870901292331q43ecbe42o22f0302562657d8b@mail.gmail.com>

Hi all,
Stripping accents from a string is often needed when dealing with external
systems
accepting only ASCII alphabet, and is useful to prepare strings for
comparison (in
case of names f.e.).

original: "a???bcde?fghi??jklmno?????pqrstu?????vwxyz"
stripped: "aaaabcdeefghiiijklmnoooooopqrstuuuuuuvwxyz"

This functionality is missing from Harbour, yet it would be best integrated
to the
codepage subsystem. But before I do anything, I'd like to discuss it here.

I was thinking adding two new strings to the HB_CODEPAGE structure,
which would hold the necessary ASCII character equivalent of the current
accented lowercase and uppercase char strings.

Any comments?

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090130/f0ca781a/attachment-0001.html
From vszakats at users.sourceforge.net  Fri Jan 30 02:55:04 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri Jan 30 02:55:07 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10138]
	trunk/harbour/ChangeLog
Message-ID: <E1LSoDQ-0001k0-66@74yxhf1.ch3.sourceforge.com>

Revision: 10138
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10138&view=rev
Author:   vszakats
Date:     2009-01-30 07:55:03 +0000 (Fri, 30 Jan 2009)

Log Message:
-----------
2009-01-30 08:52 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
  * ChangeLog
    ! Typos in former ChangeLog entries.
      (testing commit notification)

Modified Paths:
--------------
    trunk/harbour/ChangeLog


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Fri Jan 30 03:07:12 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Jan 30 03:07:17 2009
Subject: [Harbour] Automatic ChangeLog notification activated
Message-ID: <18d502870901300007j1ebc787u980b05cb0cc0c5ae@mail.gmail.com>

Hi all,
As may have noticed the first automatic commit notification e-mail
has arrived to the list (many thanks to Phil).

This means that committers no longer have to manually send
an email to this list, containing the changelog entry. In fact, the
best would be to never send these anymore to avoid duplicate
notification.

On the other hand, from now on it's required from all committers
to fill the "log message" on commit with the ChangeLog entry
belonging to the commit. This is good practice anyway, and most
of us did this so far.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090130/33a020a4/attachment.html
From toninhofwi at yahoo.com.br  Fri Jan 30 05:57:04 2009
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Fri Jan 30 04:55:21 2009
Subject: [Harbour] Stripping accents from a string.
In-Reply-To: <18d502870901292331q43ecbe42o22f0302562657d8b@mail.gmail.com>
References: <18d502870901292331q43ecbe42o22f0302562657d8b@mail.gmail.com>
Message-ID: <5sm5o4lu4s9obe7eb5j0sugal09su00p3b@4ax.com>

>This functionality is missing from Harbour, yet it would be best integrated
>to the codepage subsystem. But before I do anything, I'd like to discuss it here.

Viktor, This is a nice feature for languages like portuguese for
example. I have my own func that do this, but integrate it in
HB_CODEPAGE structure sounds perfect.

Regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From sscc at mweb.co.za  Fri Jan 30 05:29:16 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Jan 30 05:29:29 2009
Subject: [Harbour] Stripping accents from a string.
In-Reply-To: <18d502870901292331q43ecbe42o22f0302562657d8b@mail.gmail.com>
References: <18d502870901292331q43ecbe42o22f0302562657d8b@mail.gmail.com>
Message-ID: <4982D67C.90605@mweb.co.za>

Viktor Szak?ts wrote:

> Any comments?

Are you thinking of catering for things like ? -> ss?

Regards
Alex
From harbour.01 at syenar.hu  Fri Jan 30 05:52:31 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Jan 30 05:52:35 2009
Subject: [Harbour] Stripping accents from a string.
In-Reply-To: <4982D67C.90605@mweb.co.za>
References: <18d502870901292331q43ecbe42o22f0302562657d8b@mail.gmail.com>
	<4982D67C.90605@mweb.co.za>
Message-ID: <18d502870901300252s387d5dc5pe3ea6677b57a5fed@mail.gmail.com>

2009/1/30 Alex Strickland <sscc@mweb.co.za>

> Viktor Szak?ts wrote:
>
>  Any comments?
>>
>
> Are you thinking of catering for things like ? -> ss?


Yes, this one could be solved also. This actually makes
it much more complicated that I've planned, but fits into
the picture and needs to be solved.

Another interesting area is cyrillic/greek characters (if we
leave out far-east languages for now).

Something like this, but in C:
---
FUNCTION hb_StrToASCII( cSource )
   LOCAL cTarget := "", nChar, tmp
   FOR tmp := 1 TO Len( cSource )
      nChar := Asc( SubStr( cSource, tmp, 1 ) )
      IF nChar >= 32 .AND. mChar <= 127
         cTarget += SubStr( cSource, tmp, 1 )
      ELSEIF HAS_ASCII_EQUIVALENT( nChar )
         cTarget += GET_ASCII_EQUIVALENT( nChar ) /* May add multiple chars
*/
/*    ELSE
         // Strip whole char */
      ENDIF
   NEXT
   RETURN cTarget
---

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090130/6fe03604/attachment.html
From druzus at acn.waw.pl  Fri Jan 30 06:18:11 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Jan 30 06:13:53 2009
Subject: [Harbour] Stripping accents from a string.
In-Reply-To: <18d502870901292331q43ecbe42o22f0302562657d8b@mail.gmail.com>
References: <18d502870901292331q43ecbe42o22f0302562657d8b@mail.gmail.com>
Message-ID: <20090130111810.GA14513@uran.home.aster.pl>

On Fri, 30 Jan 2009, Szak?ts Viktor wrote:

Hi,

> Stripping accents from a string is often needed when dealing with external
> systems
> accepting only ASCII alphabet, and is useful to prepare strings for
> comparison (in
> case of names f.e.).
> original: "a???bcde?fghi??jklmno?????pqrstu?????vwxyz"
> stripped: "aaaabcdeefghiiijklmnoooooopqrstuuuuuuvwxyz"
> This functionality is missing from Harbour, yet it would be best integrated
> to the
> codepage subsystem. But before I do anything, I'd like to discuss it here.
> I was thinking adding two new strings to the HB_CODEPAGE structure,
> which would hold the necessary ASCII character equivalent of the current
> accented lowercase and uppercase char strings.
> Any comments?

This should be done in different way. Current codepage implementation
has few very serious limitations, f.e. it cannot translate characters
between languages, it's very impossible to define CP which does not have
corresponding upper case letters, it cannot translate multibyte characters,
etc.
If you add above strings to CP then you will have yet another thing
which works locally only for given codepage without any relations to
other CPs.
This should be implemented in different way.
We will need global unicode fallback table which will work for any CP
looking for corresponding character replacement in the destination CP
so it will be enough to make translation between any used CP and ASCII
CP (we will have to introduce such unicode table where all characters
which are not in range 32 <= x < 127 will be mapped to 0). Such fall
back table will work also with multibyte translations or if necessary
will replace single byte by multibyte phonetic sequence. f.e. personally
I'm using such feature translation texts in Cyrillic to Latin characters.

Meanwhile if you need such functionality then you can simply introduce
new CPs which will have only ASCII characters for given langauge with
some sufic like NONE or ASCII, f.e.:
   "PLNONE"
      [...]
      "AABCCDEEFGHIJKLLMNNOOPQRSSTUVWXYZZZ",
      "aabccdeefghijkllmnnoopqrsstuvwxyzzz",
      [...]

and then to strip accented characters you can make translations between
   "PL*" -> "PLNONE"
The same you can make for any other languages.
Sooner or later I will have to start serious modifications in our CP code
and I cannot promise that I'll be able to keep such CP extensions like
you proposed working.
The other solution is creating map from unicode table to Latin letters
and then using this map for translations. This can be done as separate
function and will also work for all langaues.
It could be table indexed by unicode U16 value with ASCII characters
or (if you want to introduce multibyte translations for languages which
do not have corresponding unaccented single characters in Latin alphabet)
with strings.
It will be limited to ASCII conversions fallback table I want to introduce.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Fri Jan 30 09:21:58 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Jan 30 09:22:02 2009
Subject: [Harbour] A doubt with shared DBF
Message-ID: <8FAFE54F1DDE4F6F993E88EA9FA9A7C6@emag>

In the following sample I don't see the changed value if SKIP 0 is commented 
out:

FUNCTION MAIN()

    USE TEST SHARED

    ? FIELD -> test

    ? "Waiting for a key..."

    INKEY( 0 ) // here the field is changed by another user

//    SKIP 0

    ? FIELD -> test

    CLOSE

    RETURN NIL

Is it expected?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From dbtopas at dbtopas.lt  Fri Jan 30 09:22:38 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Jan 30 09:22:36 2009
Subject: [Harbour] Clipper incompatibilities
In-Reply-To: <20090129184651.GA20592@uran.home.aster.pl>
References: <4980DD54.60203@dbtopas.lt>	<20090129010740.GA21775@uran.home.aster.pl>	<498104FB.2050100@dbtopas.lt>
	<20090129184651.GA20592@uran.home.aster.pl>
Message-ID: <49830D2E.5010000@dbtopas.lt>

Hi,


> Please note that this can be used only for temporary indexes.
> When index is reopened then it needs valid key and for expressions.
> It means that we create corrupted indexes in such way.

I'm sure I do not reopen tags with empty key expression. We can add key 
expression check for expression loaded from index file. I've not tested, 
but I guess this check already exists. See dbfcdx1.c line 3581:
       pTag->RootBlock = 0; /* To force RT error - index corrupted */


> I'll unblock such possibilities in next commit but maybe we should
> allow to create such indexes only if temporary flag is set.
> Temporary indexes are automatically removed on close so we will not
> leave corrupted files. They are also open in EXCLUSIVE mode so other
> application will not be able to access them.

Currently we do not use temporary flag, but we use our own functions to 
generate temporary file name and we delete all temporary files on 
application exit.
The implementation of temp file name is very similar to Harbour's 
(GetTempPathA(), GetTempFileNameA(), with a different prefix "~db", 
instead of "hb"). I do not remember the reason way we use our functions. 
Perhaps this is legacy from Clipper times. I'll try to add TEMPORARY 
flag and will look what will happen :)



Regards,
Mindaugas
From dbtopas at dbtopas.lt  Fri Jan 30 09:31:09 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Jan 30 09:31:07 2009
Subject: [Harbour] A doubt with shared DBF
In-Reply-To: <8FAFE54F1DDE4F6F993E88EA9FA9A7C6@emag>
References: <8FAFE54F1DDE4F6F993E88EA9FA9A7C6@emag>
Message-ID: <49830F2D.50207@dbtopas.lt>

> In the following sample I don't see the changed value if SKIP 0 is 
> commented out:
> 
> FUNCTION MAIN()
>    USE TEST SHARED
>    ? FIELD -> test
>    ? "Waiting for a key..."
>    INKEY( 0 ) // here the field is changed by another user
> //    SKIP 0
>    ? FIELD -> test
>    CLOSE
>    RETURN NIL
> 
> Is it expected?

Hi,


yes, of cause. The whole record buffer is written to file after record 
cursor is "touched". This helps to avoid multiple disk access on:
    FIELD1 := value1
    FIELD2 := value2
    ...
    FIELDn := valuen

Use DBCOMMIT() (or move record pointer DBSKIP(), DBGOTO(), etc.) to 
force write of record buffer.


Regards,
Mindaugas

From e.m.giordano at emagsoftware.it  Fri Jan 30 09:35:25 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Jan 30 09:35:30 2009
Subject: [Harbour] A doubt with shared DBF
References: <8FAFE54F1DDE4F6F993E88EA9FA9A7C6@emag> <49830F2D.50207@dbtopas.lt>
Message-ID: <D8B01B01BE80420BA339181B359BD8AC@emag>


-----Messaggio Originale----- 
Da: "Mindaugas Kavaliauskas" <dbtopas@dbtopas.lt>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: venerd? 30 gennaio 2009 15.31
Oggetto: Re: [Harbour] A doubt with shared DBF


> > Is it expected?
>
> yes, of cause.

Ok, thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Fri Jan 30 10:21:20 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Jan 30 10:21:25 2009
Subject: [Harbour] Stripping accents from a string.
In-Reply-To: <20090130111810.GA14513@uran.home.aster.pl>
References: <18d502870901292331q43ecbe42o22f0302562657d8b@mail.gmail.com>
	<20090130111810.GA14513@uran.home.aster.pl>
Message-ID: <18d502870901300721n71bc747fy76f64b6d7efd6c3b@mail.gmail.com>

>
> This should be implemented in different way.
> We will need global unicode fallback table which will work for any CP
> looking for corresponding character replacement in the destination CP
> so it will be enough to make translation between any used CP and ASCII
> CP (we will have to introduce such unicode table where all characters
> which are not in range 32 <= x < 127 will be mapped to 0). Such fall
> back table will work also with multibyte translations or if necessary
> will replace single byte by multibyte phonetic sequence. f.e. personally
> I'm using such feature translation texts in Cyrillic to Latin characters.
>
> Meanwhile if you need such functionality then you can simply introduce
> new CPs which will have only ASCII characters for given langauge with
> some sufic like NONE or ASCII, f.e.:
>   "PLNONE"
>      [...]
>      "AABCCDEEFGHIJKLLMNNOOPQRSSTUVWXYZZZ",
>      "aabccdeefghijkllmnnoopqrsstuvwxyzzz",
>      [...]
>
> and then to strip accented characters you can make translations between
>   "PL*" -> "PLNONE"

The same you can make for any other languages.


I'm doing this locally in a slightly different way. It needs two
simple functions and some minimal high level management.
Good but not generic and torn off from core CP handling.

The question is really how to implement this properly as
part of Harbour.

Adding cp??asc?.c (or cp??non?.c) file for all languages
seems like not the most optimal solution, albeit indeed
this would solve it in the less intrusive way as part of core.


> The other solution is creating map from unicode table to Latin letters
> and then using this map for translations. This can be done as separate
> function and will also work for all langaues.
> It could be table indexed by unicode U16 value with ASCII characters
> or (if you want to introduce multibyte translations for languages which
> do not have corresponding unaccented single characters in Latin alphabet)
> with strings.


Probably that U16 table will have to point to a structure which
would hold all these information amongst the others.


> It will be limited to ASCII conversions fallback table I want to introduce.


Okay, I won't change anything then, what you say is obviously better,
but needs revamping the whole CP code, which goes beyond my
scope. Anyhow let's keep this feature in evidence when touching the
CP subsystem, because this feature seems to fit here the best and its
not very easy to replicate locally in a proper way, yet many developers
could benefit from it.

Thanks a lot for your feedback.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090130/d731e01a/attachment.html
From druzus at acn.waw.pl  Fri Jan 30 11:19:54 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Jan 30 11:15:36 2009
Subject: [Harbour] Clipper incompatibilities
In-Reply-To: <49830D2E.5010000@dbtopas.lt>
References: <4980DD54.60203@dbtopas.lt>
	<20090129010740.GA21775@uran.home.aster.pl>
	<498104FB.2050100@dbtopas.lt>
	<20090129184651.GA20592@uran.home.aster.pl>
	<49830D2E.5010000@dbtopas.lt>
Message-ID: <20090130161953.GA3891@uran.home.aster.pl>

On Fri, 30 Jan 2009, Mindaugas Kavaliauskas wrote:

Hi,

> I'm sure I do not reopen tags with empty key expression. We can add key 
> expression check for expression loaded from index file. I've not tested, 
> but I guess this check already exists. See dbfcdx1.c line 3581:
>       pTag->RootBlock = 0; /* To force RT error - index corrupted */

Yes, it forces RT error.

> Currently we do not use temporary flag, but we use our own functions to 
> generate temporary file name and we delete all temporary files on 
> application exit.
> The implementation of temp file name is very similar to Harbour's 
> (GetTempPathA(), GetTempFileNameA(), with a different prefix "~db", instead 
> of "hb"). I do not remember the reason way we use our functions. Perhaps 
> this is legacy from Clipper times. I'll try to add TEMPORARY flag and will 
> look what will happen :)

It will increase the performance for shared tables because TEMPORARY
indexes are always used in exclusive mode without checking for concurrent
modifications.
Even if you do not want to use it then you should at least use
EXCLUSIVE flag for your own temporary indexes to reach the same
performance.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Jan 30 14:19:51 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Jan 30 14:15:32 2009
Subject: [Harbour] 2009-01-30 20:19 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20090130191951.GA15927@uran.home.aster.pl>

2009-01-30 20:19 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/make_gcc.mak
    ! added additional rules to fix time conditions in parallel compilation

  * harbour/config/dos/dir.cf
  * harbour/config/w32/dir.cf
    * changed simple assignments to recursive ones

  * harbour/config/dir.cf
    + added support for dependencies between build directories for
      parallel execution. If compilation of dirX needs results of
      dirY and dirZ compilation then it hsould be declared as:
         dirX{dirY,dirZ}
    % process directories defined in DIRS simultaneously when -j<N>
      GNU make switch is used - it gives additional speed improvement
      on multi CPU machines

  * harbour/Makefile
  * harbour/source/Makefile
    * set directory dependencies for parallel compilation

   The parallel compilation can be enabled by using -j<n> GNU make
   switch on multiprocess platforms, f.e.:
      ./gnu_make.sh -j3
   It should give some speed improvement even on single CPU machines.
   These are results of clean Harbour compilation on my 3 phantom CPU
   computer:

      1. leaner compilation without -j<n>                6m29.895s
      2. parallel compilation with -j5 but without
         parallel directory processing                   3m20.163s
      3. parallel compilation with -j5 and with new
         parallel directory processing                   2m6.168s

best regards
Przemek
From druzus at users.sourceforge.net  Fri Jan 30 14:15:26 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Fri Jan 30 14:15:37 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10139] trunk/harbour
Message-ID: <E1LSypq-0007rG-V9@74yxhf1.ch3.sourceforge.com>

Revision: 10139
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10139&view=rev
Author:   druzus
Date:     2009-01-30 19:15:26 +0000 (Fri, 30 Jan 2009)

Log Message:
-----------
2009-01-30 20:19 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/make_gcc.mak
    ! added additional rules to fix time conditions in parallel compilation

  * harbour/config/dos/dir.cf
  * harbour/config/w32/dir.cf
    * changed simple assignments to recursive ones

  * harbour/config/dir.cf
    + added support for dependencies between build directories for
      parallel execution. If compilation of dirX needs results of
      dirY and dirZ compilation then it hsould be declared as:
         dirX{dirY,dirZ}
    % process directories defined in DIRS simultaneously when -j<N>
      GNU make switch is used - it gives additional speed improvement
      on multi CPU machines

  * harbour/Makefile
  * harbour/source/Makefile
    * set directory dependencies for parallel compilation

   The parallel compilation can be enabled by using -j<n> GNU make
   switch on multiprocess platforms, f.e.:
      ./gnu_make.sh -j3
   It should give some speed improvement even on single CPU machines.
   These are results of clean Harbour compilation on my 3 phantom CPU
   computer:

      1. leaner compilation without -j<n>                6m29.895s
      2. parallel compilation with -j5 but without
         parallel directory processing                   3m20.163s
      3. parallel compilation with -j5 and with new
         parallel directory processing                   2m6.168s

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/Makefile
    trunk/harbour/config/dir.cf
    trunk/harbour/config/dos/dir.cf
    trunk/harbour/config/w32/dir.cf
    trunk/harbour/make_gcc.mak
    trunk/harbour/source/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bedipritpal at hotmail.com  Fri Jan 30 19:30:43 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Jan 30 19:30:46 2009
Subject: [Harbour] A Bunch of Thanks
Message-ID: <21758316.post@talk.nabble.com>


To
All Developers ( Past and Present )
Who Contributed to the Project called - HARBOUR
In Any Way

I pay a deep hearted tribute and extend a bunch of THANKS.

For

Today, I have deployed in production all of my applications,
under the brand name "Vouch", compiled with Harbour,
and have discontinued support for Clipper compilations for ever.

Everything, everywhere, with every application, is running fine.

"Vouch" is now a multi-threaded, multi-window, hibrid GUI, 
pure GUI ( whereever needed ), exploiting many famous Active-X
controls, capable of running on LAN or as REMOTE Terminal 
(Proprietory), and with many more features beyond the scope
of this token of thanks.

Believe me, if we continue with same zest and enthusiam to contribute
to this project, Harbour will become a mainstream language in the
future.

I invite all developers who contributed to this project just to 
say a "Hello" on this thread so that we all could feel your
affection to the language called CLIPPER in good old days.

Thanks again for this huge effort.

Regards
Pritpal Bedi
a student of software analysis and design

-- 
View this message in context: http://www.nabble.com/A-Bunch-of-Thanks-tp21758316p21758316.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From hbco2 at sbcglobal.net  Fri Jan 30 19:53:19 2009
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Fri Jan 30 19:53:26 2009
Subject: [Harbour] A Bunch of Thanks
References: <21758316.post@talk.nabble.com>
Message-ID: <00bb01c9833e$51b69120$0303a8c0@hbco>

+++!
  ----- Original Message ----- 
  From: Pritpal Bedi 
  To: harbour@harbour-project.org 
  Sent: Friday, January 30, 2009 4:30 PM
  Subject: [Harbour] A Bunch of Thanks



  To
  All Developers ( Past and Present )
  Who Contributed to the Project called - HARBOUR
  In Any Way

  I pay a deep hearted tribute and extend a bunch of THANKS.

  For

  Today, I have deployed in production all of my applications,
  under the brand name "Vouch", compiled with Harbour,
  and have discontinued support for Clipper compilations for ever.

  Everything, everywhere, with every application, is running fine.

  "Vouch" is now a multi-threaded, multi-window, hibrid GUI, 
  pure GUI ( whereever needed ), exploiting many famous Active-X
  controls, capable of running on LAN or as REMOTE Terminal 
  (Proprietory), and with many more features beyond the scope
  of this token of thanks.

  Believe me, if we continue with same zest and enthusiam to contribute
  to this project, Harbour will become a mainstream language in the
  future.

  I invite all developers who contributed to this project just to 
  say a "Hello" on this thread so that we all could feel your
  affection to the language called CLIPPER in good old days.

  Thanks again for this huge effort.

  Regards
  Pritpal Bedi
  a student of software analysis and design

  -- 
  View this message in context: http://www.nabble.com/A-Bunch-of-Thanks-tp21758316p21758316.html
  Sent from the Harbour - Dev mailing list archive at Nabble.com.

  _______________________________________________
  Harbour mailing list
  Harbour@harbour-project.org
  http://lists.harbour-project.org/mailman/listinfo/harbour
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090130/b4815572/attachment.html
From budyanto at centrin.net.id  Fri Jan 30 20:17:47 2009
From: budyanto at centrin.net.id (Budyanto Dj.)
Date: Fri Jan 30 20:18:06 2009
Subject: [Harbour] A Bunch of Thanks
In-Reply-To: <21758316.post@talk.nabble.com>
Message-ID: <4984092B.28271.3BE07D81@localhost>

Hello Pritpal,
Congratulations!

regards,
budyanto

On 30 Jan 2009 at 16:30, Pritpal Bedi wrote:

> 
> To
> All Developers ( Past and Present )
> Who Contributed to the Project called - HARBOUR
> In Any Way
> 
> I pay a deep hearted tribute and extend a bunch of THANKS.
> 
> For
> 
> Today, I have deployed in production all of my applications,
> under the brand name "Vouch", compiled with Harbour,
> and have discontinued support for Clipper compilations for ever.
> 
> Everything, everywhere, with every application, is running fine.
> 
> "Vouch" is now a multi-threaded, multi-window, hibrid GUI, 
> pure GUI ( whereever needed ), exploiting many famous Active-X
> controls, capable of running on LAN or as REMOTE Terminal 
> (Proprietory), and with many more features beyond the scope
> of this token of thanks.
> 
> Believe me, if we continue with same zest and enthusiam to contribute
> to this project, Harbour will become a mainstream language in the
> future.
> 
> I invite all developers who contributed to this project just to 
> say a "Hello" on this thread so that we all could feel your
> affection to the language called CLIPPER in good old days.
> 
> Thanks again for this huge effort.
> 
> Regards
> Pritpal Bedi
> a student of software analysis and design
> 
> -- 
> View this message in context: http://www.nabble.com/A-Bunch-of-Thanks-tp21758316p21758316.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour



From harbour.01 at syenar.hu  Sat Jan 31 03:10:56 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Jan 31 03:11:05 2009
Subject: [Harbour] A Bunch of Thanks
In-Reply-To: <21758316.post@talk.nabble.com>
References: <21758316.post@talk.nabble.com>
Message-ID: <18d502870901310010h59c90629j71d4c880309cf3b1@mail.gmail.com>

Hi all,
Similar success story here, I've made the final transition to Harbour last
autumn and it was so successful that I could drop Clipper completely,
in last months I was focusing on "optimizing" for Harbour, utilizing its
features. Now using hbmzip, hbtip, hbct, hbhpdf, hbcurl and some more.
Since a few weeks these apps are able to generate .pdf output from
regular line printer control stream. And by now the apps got Linux and
OS X releases, too.

Speed, smoothness and stability of these apps go rounds around the
Clipper version.

Remote terminal and GUI (probably web, maybe GTK), SQL and UTF8
transition is yet to be done. Using some more Harbour capabilities is
also planned, like hashes, .hrb.

Thanks to all!

Brgds,
Viktor

On Sat, Jan 31, 2009 at 1:30 AM, Pritpal Bedi <bedipritpal@hotmail.com>wrote:

>
> To
> All Developers ( Past and Present )
> Who Contributed to the Project called - HARBOUR
> In Any Way
>
> I pay a deep hearted tribute and extend a bunch of THANKS.
>
> For
>
> Today, I have deployed in production all of my applications,
> under the brand name "Vouch", compiled with Harbour,
> and have discontinued support for Clipper compilations for ever.
>
> Everything, everywhere, with every application, is running fine.
>
> "Vouch" is now a multi-threaded, multi-window, hibrid GUI,
> pure GUI ( whereever needed ), exploiting many famous Active-X
> controls, capable of running on LAN or as REMOTE Terminal
> (Proprietory), and with many more features beyond the scope
> of this token of thanks.
>
> Believe me, if we continue with same zest and enthusiam to contribute
> to this project, Harbour will become a mainstream language in the
> future.
>
> I invite all developers who contributed to this project just to
> say a "Hello" on this thread so that we all could feel your
> affection to the language called CLIPPER in good old days.
>
> Thanks again for this huge effort.
>
> Regards
> Pritpal Bedi
> a student of software analysis and design
>
> --
> View this message in context:
> http://www.nabble.com/A-Bunch-of-Thanks-tp21758316p21758316.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090131/0b0da412/attachment.html
From mbelgrano at deltain.it  Sat Jan 31 03:39:20 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Jan 31 03:39:25 2009
Subject: [Harbour] A Bunch of Thanks
In-Reply-To: <21758316.post@talk.nabble.com>
References: <21758316.post@talk.nabble.com>
Message-ID: <609353e70901310039n46977fa8h6bca94f1bbb508ba@mail.gmail.com>

Hello,Hello,Hello,Hello,Hello,Hello,Hello,Hello!
I invite  everybody join to facebook harbour project  group
http://www.facebook.com/group.php?gid=48795263775&ref=ts
Use harbour people from alla  world
In harbour project on facebbok are joined people from Poland,
egypt,argentina,belgium,venezuela,italy

2009/1/31 Pritpal Bedi <bedipritpal@hotmail.com>

>
> To
> All Developers ( Past and Present )
> Who Contributed to the Project called - HARBOUR
> In Any Way
>
> I pay a deep hearted tribute and extend a bunch of THANKS.
>
> For
>
> Today, I have deployed in production all of my applications,
> under the brand name "Vouch", compiled with Harbour,
> and have discontinued support for Clipper compilations for ever.
>
> Everything, everywhere, with every application, is running fine.
>
> "Vouch" is now a multi-threaded, multi-window, hibrid GUI,
> pure GUI ( whereever needed ), exploiting many famous Active-X
> controls, capable of running on LAN or as REMOTE Terminal
> (Proprietory), and with many more features beyond the scope
> of this token of thanks.
>
> Believe me, if we continue with same zest and enthusiam to contribute
> to this project, Harbour will become a mainstream language in the
> future.
>
> I invite all developers who contributed to this project just to
> say a "Hello" on this thread so that we all could feel your
> affection to the language called CLIPPER in good old days.
>
> Thanks again for this huge effort.
>
> Regards
> Pritpal Bedi
> a student of software analysis and design
>
> --
> View this message in context:
> http://www.nabble.com/A-Bunch-of-Thanks-tp21758316p21758316.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090131/4b5b0a23/attachment-0001.html
From lorenzo.fiorini at gmail.com  Sat Jan 31 04:02:45 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Jan 31 04:02:49 2009
Subject: [Harbour] A Bunch of Thanks
In-Reply-To: <21758316.post@talk.nabble.com>
References: <21758316.post@talk.nabble.com>
Message-ID: <9257026e0901310102j1fb5f2c0o856cd23ddd04b259@mail.gmail.com>

On Sat, Jan 31, 2009 at 1:30 AM, Pritpal Bedi <bedipritpal@hotmail.com> wrote:

> I invite all developers who contributed to this project just to
> say a "Hello" on this thread so that we all could feel your
> affection to the language called CLIPPER in good old days.

Well done Pritpal.

I also plan to release a new version of my apps based on 1.1 next week or so.

There are still open issues about gtwvt, gtxwc and others that I've
bypassed with some hacks in my local repo.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sat Jan 31 04:24:58 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Jan 31 04:25:29 2009
Subject: [Harbour] New sf.net hosted apps enabled
Message-ID: <18d502870901310124v2b5ebd8dxaa3e966ebde31576@mail.gmail.com>

Hi folks,
I've enabled two hosted app on sf.net:

trac
-----
http://apps.sourceforge.net/trac/harbour-project/
This has a good ticket tracking method, a built-in wiki, source browser
and very nice event/change tracker here (integrated with our SVN database):
http://apps.sourceforge.net/trac/harbour-project/timeline

[ this is a very good replacement for diffed commit notifications. ]

MediaWiki
---------------
http://apps.sourceforge.net/mediawiki/harbour-project/index.php?title=Main_Page
Standard wiki solution to gather ideas, sketches, drafts, roadmaps, whatever
else docs.

I hope these will be useful.

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090131/30f3c200/attachment.html
From a.jurkiewicz at abix.info.pl  Sat Jan 31 05:39:08 2009
From: a.jurkiewicz at abix.info.pl (ABIX Adam Jurkiewicz)
Date: Sat Jan 31 05:39:15 2009
Subject: [Harbour] A Bunch of Thanks
In-Reply-To: <21758316.post@talk.nabble.com>
References: <21758316.post@talk.nabble.com>
Message-ID: <49842A4C.6060106@abix.info.pl>

Pritpal Bedi pisze:
>
> I invite all developers who contributed to this project just to 
> say a "Hello" on this thread so that we all could feel your
> affection to the language called CLIPPER in good old days.
> 
>
Just to say hello,
I'm developing some application form my clients using harbour in pure
terminal mode (because all my production environment is SSH/Putty),
everything works perfectly and faster than any Windows aplication...

Many thanks to Przemek for helping/teaching/ showing the way ;-)

Best regards,
Adam

-- 
ABIX - Linuksowe Systemy Wspomagania Biznesu www.abix.info.pl
Gadu-Gadu: 302315
Skype: abix_adamj
Wsparcie: http://groups-beta.google.com/group/abix-rcsoft?hl=pl
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3282 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090131/20688519/smime.bin
From vszakats at users.sourceforge.net  Sat Jan 31 06:36:44 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Jan 31 06:36:47 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10140] trunk/harbour
Message-ID: <E1LTE9U-0001fM-Bs@bj8yhf1.ch3.sourceforge.com>

Revision: 10140
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10140&view=rev
Author:   vszakats
Date:     2009-01-31 11:36:43 +0000 (Sat, 31 Jan 2009)

Log Message:
-----------
2009-01-31 12:35 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
  * utils/hbrun/hbrun.prg
    + If a .dbf file is passed on the command line, hbrun will
      open it.

  * contrib/examples/uhttpd/hbmk_vc.bat
    * Updated.

  * contrib/examples/uhttpd/hbmk_b32.bat
    % Minor opt.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/examples/uhttpd/hbmk_b32.bat
    trunk/harbour/contrib/examples/uhttpd/hbmk_vc.bat
    trunk/harbour/utils/hbrun/hbrun.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From maurilio.longo at libero.it  Sat Jan 31 08:56:47 2009
From: maurilio.longo at libero.it (maurilio longo)
Date: Sat Jan 31 08:56:54 2009
Subject: [Harbour] building on opensolaris
Message-ID: <KEC9EN$1CDE4BE818B82CDBC70F8F03A2646FEE@libero.it>

Hi,

with a couple of very minor changes harbour builds ok on opensolaris 2008.11, but when I try to install it I get these errors:

fclose                              0x284     	./libhbrtl.a/errorint.o
fclose                              0xf90     	./libhbrtl.a/gtchrmap.o
fclose                              0x1080    	./libhbrtl.a/gtchrmap.o
fclose                              0x10a5    	./libhbrtl.a/gtchrmap.o
fclose                              0x679     	./libhbzlib.a/gzio.o
ld: fatal: relocations remain against allocatable but non-writable sections
collect2: ld returned 1 exit status

this is when it tries to build the shared library, after it has copied all bin and lib and include files.

Any idea?

Maurilio.

PS. What is the 'best' place to install on a unix system? I've chosen to install inside /opt/harbour/bin,lib,include, but I'm not completely sure it is the 'best practice'.

From guy.roussin at teledetection.fr  Sat Jan 31 09:24:00 2009
From: guy.roussin at teledetection.fr (Guy Roussin)
Date: Sat Jan 31 09:25:39 2009
Subject: [Harbour] Compilation error
Message-ID: <49845F00.7060405@teledetection.fr>

Hello,

Today i get this error compiling harbour on debian sid (x86) :

$ svn co 
https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/harbour 
harbour
$ cd harbour
$ fakeroot sh mpkg_deb.sh

[...]

make[3]: entrant dans le r?pertoire ? 
/usr/local/src/harbour/contrib/hbfimage ?
make[4]: entrant dans le r?pertoire ? 
/usr/local/src/harbour/contrib/hbfimage/linux/gcc ?
gcc -I. -I../../../../include -Wall -W -O3 -I/usr/include -c 
../../fi_winfu.c -ofi_winfu.o
In file included from ../../fi_winfu.c:74:
/usr/include/FreeImage.h:157: error: conflicting types for ?LONG?
../../../../include/hbdefs.h:212: error: previous declaration of ?LONG? 
was here
make[4]: *** [fi_winfu.o] Erreur 1
make[4]: quittant le r?pertoire ? 
/usr/local/src/harbour/contrib/hbfimage/linux/gcc ?
make[3]: *** [descend] Erreur 2
make[3]: quittant le r?pertoire ? /usr/local/src/harbour/contrib/hbfimage ?
make[2]: *** [hbfimage] Erreur 2
make[2]: quittant le r?pertoire ? /usr/local/src/harbour/contrib ?
make[1]: *** [contrib] Erreur 2
make[1]: quittant le r?pertoire ? /usr/local/src/harbour ?
touch build-stamp
debian/rules binary

$ dpkg -S /usr/include/FreeImage.h
libfreeimage-dev: /usr/include/FreeImage.h

$ apt-cache policy libfreeimage-dev
libfreeimage-dev:
  Install? : 3.10.0-1
  Candidat : 3.10.0-1
 Table de version :
 *** 3.10.0-1 0
        300 http://ftp.fr.debian.org lenny/main Packages
        500 http://ftp.fr.debian.org sid/main Packages
        100 /var/lib/dpkg/status

$ head -157 /usr/include/FreeImage.h | tail -1
typedef int32_t LONG;

$ head -212 include/hbdefs.h | tail -1
   typedef long LONG;

Thank you,

-- 
Guy

From harbour.01 at syenar.hu  Sat Jan 31 09:36:19 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Jan 31 09:36:25 2009
Subject: [Harbour] Compilation error
In-Reply-To: <49845F00.7060405@teledetection.fr>
References: <49845F00.7060405@teledetection.fr>
Message-ID: <18d502870901310636v30bfa809hb35eaced2131b668@mail.gmail.com>

Yes, it's a known name collision problem. We should clean Harbour from all
these common type names (LONG, ULONG,
BOOL, UINT, INT, SCHAR, UCHAR, BYTE, SHORT, USHORT,
LONGLONG, ULONGLONG) which external packages might
use with slightly different meaning.

I'm not sure what's the best practice to follow here, but the most
obvious is to prefix everything with HB_, and move appropriate
names from above to Clipper compatibility .api headers.

Brgds,
Viktor

On Sat, Jan 31, 2009 at 3:24 PM, Guy Roussin
<guy.roussin@teledetection.fr>wrote:

> Hello,
>
> Today i get this error compiling harbour on debian sid (x86) :
>
> $ svn co
> https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/harbourharbour
> $ cd harbour
> $ fakeroot sh mpkg_deb.sh
>
> [...]
>
> make[3]: entrant dans le r?pertoire ?
> /usr/local/src/harbour/contrib/hbfimage ?
> make[4]: entrant dans le r?pertoire ?
> /usr/local/src/harbour/contrib/hbfimage/linux/gcc ?
> gcc -I. -I../../../../include -Wall -W -O3 -I/usr/include -c
> ../../fi_winfu.c -ofi_winfu.o
> In file included from ../../fi_winfu.c:74:
> /usr/include/FreeImage.h:157: error: conflicting types for 'LONG'
> ../../../../include/hbdefs.h:212: error: previous declaration of 'LONG' was
> here
> make[4]: *** [fi_winfu.o] Erreur 1
> make[4]: quittant le r?pertoire ?
> /usr/local/src/harbour/contrib/hbfimage/linux/gcc ?
> make[3]: *** [descend] Erreur 2
> make[3]: quittant le r?pertoire ? /usr/local/src/harbour/contrib/hbfimage ?
> make[2]: *** [hbfimage] Erreur 2
> make[2]: quittant le r?pertoire ? /usr/local/src/harbour/contrib ?
> make[1]: *** [contrib] Erreur 2
> make[1]: quittant le r?pertoire ? /usr/local/src/harbour ?
> touch build-stamp
> debian/rules binary
>
> $ dpkg -S /usr/include/FreeImage.h
> libfreeimage-dev: /usr/include/FreeImage.h
>
> $ apt-cache policy libfreeimage-dev
> libfreeimage-dev:
>  Install? : 3.10.0-1
>  Candidat : 3.10.0-1
> Table de version :
> *** 3.10.0-1 0
>       300 http://ftp.fr.debian.org lenny/main Packages
>       500 http://ftp.fr.debian.org sid/main Packages
>       100 /var/lib/dpkg/status
>
> $ head -157 /usr/include/FreeImage.h | tail -1
> typedef int32_t LONG;
>
> $ head -212 include/hbdefs.h | tail -1
>  typedef long LONG;
>
> Thank you,
>
> --
> Guy
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090131/0870ac01/attachment-0001.html
From harbour.01 at syenar.hu  Sat Jan 31 09:39:14 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Jan 31 09:39:17 2009
Subject: [Harbour] building on opensolaris
In-Reply-To: <KEC9EN$1CDE4BE818B82CDBC70F8F03A2646FEE@libero.it>
References: <KEC9EN$1CDE4BE818B82CDBC70F8F03A2646FEE@libero.it>
Message-ID: <18d502870901310639h7db021d3sf17dceeef6c39369@mail.gmail.com>

It's a known problem. OpenSolaris needs some different (from Linux) ways to
build the shared libraries.
Brgds,
Viktor

On Sat, Jan 31, 2009 at 2:56 PM, maurilio longo <maurilio.longo@libero.it>wrote:

> Hi,
>
> with a couple of very minor changes harbour builds ok on opensolaris
> 2008.11, but when I try to install it I get these errors:
>
> fclose                              0x284       ./libhbrtl.a/errorint.o
> fclose                              0xf90       ./libhbrtl.a/gtchrmap.o
> fclose                              0x1080      ./libhbrtl.a/gtchrmap.o
> fclose                              0x10a5      ./libhbrtl.a/gtchrmap.o
> fclose                              0x679       ./libhbzlib.a/gzio.o
> ld: fatal: relocations remain against allocatable but non-writable sections
> collect2: ld returned 1 exit status
>
> this is when it tries to build the shared library, after it has copied all
> bin and lib and include files.
>
> Any idea?
>
> Maurilio.
>
> PS. What is the 'best' place to install on a unix system? I've chosen to
> install inside /opt/harbour/bin,lib,include, but I'm not completely sure it
> is the 'best practice'.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090131/616948dd/attachment.html
From lorenzo.fiorini at gmail.com  Sat Jan 31 10:16:03 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Jan 31 10:16:07 2009
Subject: [Harbour] building on opensolaris
In-Reply-To: <KEC9EN$1CDE4BE818B82CDBC70F8F03A2646FEE@libero.it>
References: <KEC9EN$1CDE4BE818B82CDBC70F8F03A2646FEE@libero.it>
Message-ID: <9257026e0901310716n7e46c8dbke143d5b51ef93180@mail.gmail.com>

On Sat, Jan 31, 2009 at 2:56 PM, maurilio longo
<maurilio.longo@libero.it> wrote:

> PS. What is the 'best' place to install on a unix system? I've chosen to install inside /opt/harbour/bin,lib,include, but I'm not completely sure it is the 'best practice'.

I use the same place :)

I don't know if it is the "best" place but it allows me to better
control the deployment.

best regards,
Lorenzo
From gvarona at ec-red.com  Sat Jan 31 12:39:20 2009
From: gvarona at ec-red.com (=?UTF-8?B?R3VpbGxlcm1vIFZhcm9uYSBTaWx1cMO6?=)
Date: Sat Jan 31 12:39:24 2009
Subject: [Harbour] Making a Hello World! with gtwvg contrib 
Message-ID: <49848CC8.7070309@ec-red.com>

Hi
I'm trying to use this small PRG gtwvg:

PROCEDURE Main()
Wvt_SetGui( .t. )
@ 10,10 SAY "Hola Mundo"
RETURN

Generates EXE, and run and get a GPF in the console as follows:

Unrecoverable error 6005: Exception error:
Exception Code:C0000005
Exception Address:0040D99A
EAX:00000000 EBX:00000000 ECX:003F4F14 EDX:00000000
ESI:00000000 EDI:00000007 EBP:0013FDE8
CS:EIP:001B:0040D99A SS:ESP:0023:0013FDE0
DS:0023 ES:0023 FS:003B GS:0000
Flags:00010246
CS:EIP: 8B B3 54 0D 00 00 68 80 00 00 00 6A 01 E8 94 D3
SS:ESP: 00000000 0049C1BC 0013FE08 0042AF9F 004AEF14 00000001 00000000 
00000000 00000000 00000000 0013FF24 00424100 00000001 00000000 00000000 
0049C1AC
C stack:
EIP: EBP: Frame: OldEBP, RetAddr, Params...
0040D99A 0013FDE8 0013FE08 0042AF9F 004AEF14 00000001 00000000 00000000 
00000000 00000000
0042AF9F 0013FE08 0013FF24 00424100 00000001 00000000 00000000 0049C1AC 
004AF568 003F6960 0042081D 00000000
00424100 0013FF24 0013FF50 00401180 0049C1F0 0049C1AC 0042AF9F 00000001 
00000000 00000000 00000000 00000000
00401180 0013FF50 0013FF68 00423458 00000000 00152387 00000000 00152387
00423458 0013FF68 0013FF88 00440FA4 00000001 00000000 0049C13C 00152387 
00150000 00154EB0
00440FA4 0013FF88 0013FFB8 0049933F 00400000 00000000 00152387 0000000A 
00000016 00000000 7FFDE000 7FFDE000
0049933F 0013FFB8 0013FFF0 00000000 0049C13C 7C817067 00000016 00000000 
7FFDE000 8054B6ED 0013FFC8 84C53020
Modules:
0x00400000 0x000C3000 
D:\harbourB32\contrib\gtwvg\tests\demogvs.$?0x7C910000 0x0
00B5000 C:\WINDOWS\system32\ntdll.dll
0x7C800000 0x00103000 C:\WINDOWS\system32\kernel32.dll
0x58C30000 0x0009A000 C:\WINDOWS\system32\COMCTL32.DLL
0x77DA0000 0x000AC000 C:\WINDOWS\system32\ADVAPI32.dll
0x77E50000 0x00092000 C:\WINDOWS\system32\RPCRT4.dll
0x77FC0000 0x00011000 C:\WINDOWS\system32\Secur32.dll
0x77EF0000 0x00049000 C:\WINDOWS\system32\GDI32.dll
0x7E390000 0x00091000 C:\WINDOWS\system32\USER32.dll
0x76360000 0x0004A000 C:\WINDOWS\system32\COMDLG32.DLL
0x7E6A0000 0x00821000 C:\WINDOWS\system32\SHELL32.dll
0x77BE0000 0x00058000 C:\WINDOWS\system32\msvcrt.dll
0x77F40000 0x00076000 C:\WINDOWS\system32\SHLWAPI.dll
0x774B0000 0x0013D000 C:\WINDOWS\system32\OLE32.DLL
0x5F1F0000 0x00017000 C:\WINDOWS\system32\OLEPRO32.DLL
0x770F0000 0x0008B000 C:\WINDOWS\system32\OLEAUT32.dll
0x76340000 0x0001D000 C:\WINDOWS\system32\IMM32.DLL
0x773A0000 0x00103000 C:\WINDOWS\WinSxS\x86_Microsoft.Windows.Co$?
Called from WVT_SETGUI(0)
Called from MAIN(10) in demogvs.prg

How do I use GTWVG?
I've seen DEMOWVG.PRG but it seems a little confusing because there are 
many things there.
I understand that I can compile my GTWVG PRG in console mode so they can 
look with windows MS Windows, is that correct?
What are the commands / functions of minimal gtwvg that I use to work 
properly the little Hello World?
Is there a DOC for this contrib?

TIA

**********************************
In Spanish:
Estoy probando ?ste peque?o PRG para utilizar gtwvg:

Genero el EXE, ejecuto y obtengo un GPF y en la consola lo siguiente:

. . .

?C?mo se usa GTWVG?

He visto DEMOWVG.PRG pero me parece algo confuso por que hay muchas 
cosas alli.
Tengo entendido que con GTWVG puedo compilar mis PRG en modo consola 
para que puedan lucir con ventanas tipo MS Windows, ?Es correcto?
?Cu?les son los comandos/funciones minimas de gtwvg que debo utilizar 
para que funcione correctamente el peque?o Hola Mundo?
?Existe alguna DOC de esta contrib?

Best Regards
GVS


From bedipritpal at hotmail.com  Sat Jan 31 14:16:58 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Jan 31 14:17:02 2009
Subject: [Harbour] Making a Hello World! with gtwvg contrib
In-Reply-To: <49848CC8.7070309@ec-red.com>
References: <49848CC8.7070309@ec-red.com>
Message-ID: <21767188.post@talk.nabble.com>


GVS


Guillermo Varona wrote:
> 
> Hi
> I'm trying to use this small PRG gtwvg:
> 
> PROCEDURE Main()
> Wvt_SetGui( .t. )
> @ 10,10 SAY "Hola Mundo"
> RETURN
> 
> 

Try harbour/tests/wvtext.prg and compile it with -d__GTWVG__ and link with
GTWVG.lib.

It is a pure console application and works as is with GTWVG.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Making-a-Hello-World%21-with-gtwvg-contrib-tp21766212p21767188.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sat Jan 31 14:41:54 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Jan 31 14:42:01 2009
Subject: [Harbour] Making a Hello World! with gtwvg contrib
In-Reply-To: <21767188.post@talk.nabble.com>
References: <49848CC8.7070309@ec-red.com> <21767188.post@talk.nabble.com>
Message-ID: <18d502870901311141x677c0ef4g12ea9eae6149b9c0@mail.gmail.com>

I've tried to build recent WVG demos using MSVC 2005, and after adding the
latest SDK (6.0a) to the paths (this is a new requirement,
and is caused by to new API calls used) the two demos have built
successfully, but both GPFs in win_AppendMenu:

---
Application Internal Error -
C:\work\harbour-new\harbour\contrib\gtwvg\tests\demowvg.exe
Terminated at: 2009.01.31 20:35:03
Unrecoverable error 6005: Exception error:

    Exception Code:C0000005
    Exception Address:0040C632
    EAX:004F784F  EBX:00530000  ECX:00000000  EDX:00000053
    ESI:00000011  EDI:004F784F  EBP:00000089
    CS:EIP:001B:0040C632  SS:ESP:0023:0012FE2C
    DS:0023  ES:0023  FS:003B  GS:0000
    Flags:00010293
    CS:EIP: 88 14 39 83 C1 01 83 C0 01 3B CE 7C E2 57 6A 03
    SS:ESP: 00000000 00530DD0 00422DE5 004F77D8 0000001B 00000000 00000000
00000000 00000000 00428D8C 00000004 00000000 00530090 0012FE80 00530000
00000000

    C stack:
    EIP:     EBP:       Frame: OldEBP, RetAddr, Params...

Modules:
0x00400000 0x00149000 C:\work\harbour-new\harbour\contrib\gtwvg0x7C900000
0x000AF000 C:\windows\system32\ntdll.dll
0x7C800000 0x000F6000 C:\windows\system32\kernel32.dll
0x763B0000 0x00049000 C:\windows\system32\COMDLG32.dll
0x77DD0000 0x0009B000 C:\windows\system32\ADVAPI32.dll
0x77E70000 0x00092000 C:\windows\system32\RPCRT4.dll
0x77FE0000 0x00011000 C:\windows\system32\Secur32.dll
0x5D090000 0x0009A000 C:\windows\system32\COMCTL32.dll
0x77F10000 0x00049000 C:\windows\system32\GDI32.dll
0x7E410000 0x00091000 C:\windows\system32\USER32.dll
0x7C9C0000 0x00817000 C:\windows\system32\SHELL32.dll
0x77C10000 0x00058000 C:\windows\system32\msvcrt.dll
0x77F60000 0x00076000 C:\windows\system32\SHLWAPI.dll
0x774E0000 0x0013D000 C:\windows\system32\ole32.dll
0x77120000 0x0008B000 C:\windows\system32\OLEAUT32.dll
0x76390000 0x0001D000 C:\windows\system32\IMM32.DLL
0x10000000 0x00005000 C:\windows\system32\avgrsstx.dll
0x773D0000 0x00103000 C:\windows\WinSxS\x86_Microsoft.Windows.C0x76380000
0x00005000 C:\windows\system32\msimg32.dll
0x74720000 0x0004C000 C:\windows\system32\MSCTF.dll
0x10100000 0x0000E000 C:\Program Files\Logitech\SetPoint\lgscro0x78130000
0x0009B000 C:\windows\WinSxS\x86_Microsoft.VC80.CRT_0x77690000 0x00021000
C:\windows\system32\NTMARTA.DLL
0x71BF0000 0x00013000 C:\windows\system32\SAMLIB.dll
0x76F60000 0x0002C000 C:\windows\system32\WLDAP32.dll

Called from WVT_APPENDMENU(0)
Called from POPUPS(1310) in demowvg.prg
Called from MAIN(163) in demowvg.prg
------------------------------------------------------------------------
Application Internal Error -
C:\work\harbour-new\harbour\contrib\gtwvg\tests\demoxbp.exe
Terminated at: 2009.01.31 20:35:27
Unrecoverable error 6005: Exception error:

    Exception Code:C0000005
    Exception Address:0040BE42
    EAX:0048BA92  EBX:004AD4B8  ECX:00000000  EDX:00000050
    ESI:0000000E  EDI:0048BA92  EBP:0000010F
    CS:EIP:001B:0040BE42  SS:ESP:0023:0012FDE0
    DS:0023  ES:0023  FS:003B  GS:0000
    Flags:00010297
    CS:EIP: 88 14 39 83 C1 01 83 C0 01 3B CE 7C E2 57 6A 03
    SS:ESP: 00000000 004AD8F8 00416415 00490370 00000022 00000000 00000000
00000000 00000000 0041B29C 00000004 00000000 004AC0F0 00000065 004AC000
00000000

    C stack:
    EIP:     EBP:       Frame: OldEBP, RetAddr, Params...

Modules:
0x00400000 0x000BC000 C:\work\harbour-new\harbour\contrib\gtwvg0x7C900000
0x000AF000 C:\windows\system32\ntdll.dll
0x7C800000 0x000F6000 C:\windows\system32\kernel32.dll
0x763B0000 0x00049000 C:\windows\system32\COMDLG32.dll
0x77DD0000 0x0009B000 C:\windows\system32\ADVAPI32.dll
0x77E70000 0x00092000 C:\windows\system32\RPCRT4.dll
0x77FE0000 0x00011000 C:\windows\system32\Secur32.dll
0x5D090000 0x0009A000 C:\windows\system32\COMCTL32.dll
0x77F10000 0x00049000 C:\windows\system32\GDI32.dll
0x7E410000 0x00091000 C:\windows\system32\USER32.dll
0x7C9C0000 0x00817000 C:\windows\system32\SHELL32.dll
0x77C10000 0x00058000 C:\windows\system32\msvcrt.dll
0x77F60000 0x00076000 C:\windows\system32\SHLWAPI.dll
0x774E0000 0x0013D000 C:\windows\system32\ole32.dll
0x77120000 0x0008B000 C:\windows\system32\OLEAUT32.dll
0x76390000 0x0001D000 C:\windows\system32\IMM32.DLL
0x10000000 0x00005000 C:\windows\system32\avgrsstx.dll
0x773D0000 0x00103000 C:\windows\WinSxS\x86_Microsoft.Windows.C0x74720000
0x0004C000 C:\windows\system32\MSCTF.dll
0x10100000 0x0000E000 C:\Program Files\Logitech\SetPoint\lgscro0x78130000
0x0009B000 C:\windows\WinSxS\x86_Microsoft.VC80.CRT_0x77690000 0x00021000
C:\windows\system32\NTMARTA.DLL
0x71BF0000 0x00013000 C:\windows\system32\SAMLIB.dll
0x76F60000 0x0002C000 C:\windows\system32\WLDAP32.dll
0x755C0000 0x0002E000 C:\windows\system32\msctfime.ime

Called from WIN_APPENDMENU(0)
Called from WVGMENU:ADDITEM(0) in .\wvgmenub.prg
Called from ACTIVEXBUILDMENU(333) in demoxbp.prg
Called from MAIN(55) in demoxbp.prg
------------------------------------------------------------------------

Here are the compilation warnings (some of these signal 64-bit
compatibility, security problems and some potential bugs, plus
probably the usual OLE problem, already fixed in several places
in other contribs):
---
gtwvg.c
C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\olectl.h(205) :
warning C4201: nonstandard extension used : nameless struct/union
.\gtwvg.c(919) : warning C4244: '+=' : conversion from 'int' to 'USHORT',
possible loss of data
.\gtwvg.c(920) : warning C4244: '+=' : conversion from 'int' to 'USHORT',
possible loss of data
.\gtwvg.c(942) : warning C4244: '+=' : conversion from 'int' to 'USHORT',
possible loss of data
.\gtwvg.c(943) : warning C4244: '+=' : conversion from 'int' to 'USHORT',
possible loss of data
.\gtwvg.c(2132) : warning C4244: '=' : conversion from 'int' to 'USHORT',
possible loss of data
.\gtwvg.c(2133) : warning C4244: '=' : conversion from 'int' to 'USHORT',
possible loss of data
.\gtwvg.c(2162) : warning C4244: '=' : conversion from 'int' to 'USHORT',
possible loss of data
.\gtwvg.c(2163) : warning C4244: '=' : conversion from 'int' to 'USHORT',
possible loss of data
.\gtwvg.c(3224) : warning C4244: 'function' : conversion from 'int' to
'BYTE', possible loss of data
.\gtwvg.c(3247) : warning C4244: '=' : conversion from 'HB_LONG' to 'DWORD',
possible loss of data
.\gtwvg.c(3252) : warning C4244: '=' : conversion from 'HB_LONG' to 'DWORD',
possible loss of data
.\gtwvg.c(3257) : warning C4244: '=' : conversion from 'HB_LONG' to 'int',
possible loss of data
.\gtwvg.c(3262) : warning C4244: '=' : conversion from 'HB_LONG' to 'int',
possible loss of data
.\gtwvg.c(3267) : warning C4244: '=' : conversion from 'HB_LONG' to 'int',
possible loss of data
.\gtwvg.c(3272) : warning C4244: '=' : conversion from 'HB_LONG' to 'int',
possible loss of data
wvgcore.c
C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\olectl.h(205) :
warning C4201: nonstandard extension used : nameless struct/union
wvgutils.c
C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\olectl.h(205) :
warning C4201: nonstandard extension used : nameless struct/union
.\wvgutils.c(694) : warning C4244: '+=' : conversion from 'int' to 'USHORT',
possible loss of data
.\wvgutils.c(695) : warning C4244: '+=' : conversion from 'int' to 'USHORT',
possible loss of data
wvgsink.c
C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\olectl.h(205) :
warning C4201: nonstandard extension used : nameless struct/union
.\wvgsink.c(488) : warning C4244: 'function' : conversion from 'int' to
'USHORT', possible loss of data
.\wvgsink.c(647) : warning C4305: 'type cast' : truncation from 'HB_LONG' to
'MyRealIEventHandler *'
.\wvgsink.c(677) : warning C4305: 'type cast' : truncation from 'HB_LONG' to
'IDispatch *'
wvgwin.c
C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\olectl.h(205) :
warning C4201: nonstandard extension used : nameless struct/union
.\wvgwin.c(749) : warning C4244: '+=' : conversion from 'int' to 'USHORT',
possible loss of data
.\wvgwin.c(750) : warning C4244: '+=' : conversion from 'int' to 'USHORT',
possible loss of data
.\wvgwin.c(882) : warning C4244: 'function' : conversion from 'HB_LONG' to
'DWORD', possible loss of data
.\wvgwin.c(885) : warning C4244: 'function' : conversion from 'HB_LONG' to
'DWORD', possible loss of data
.\wvgwin.c(905) : warning C4244: 'function' : conversion from 'HB_LONG' to
'DWORD', possible loss of data
.\wvgwin.c(909) : warning C4244: 'function' : conversion from 'HB_LONG' to
'UINT_PTR', possible loss of data
.\wvgwin.c(1174) : warning C4996: 'sprintf': This function or variable may
be unsafe. Consider using sprintf_s instead. To disable deprecation, use
_CRT_SECURE_NO_WARNINGS. See online help for details.
        C:\Program Files\Microsoft Visual Studio 8\VC\INCLUDE\stdio.h(345) :
see declaration of 'sprintf'
.\wvgwin.c(1316) : warning C4244: '=' : conversion from 'LONG' to 'USHORT',
possible loss of data
.\wvgwin.c(1454) : warning C4244: 'function' : conversion from 'HB_LONG' to
'UINT', possible loss of data
.\wvgwin.c(1620) : warning C4047: '=' : 'UINT' differs in levels of
indirection from 'void *'
.\wvgwin.c(1808) : warning C4047: 'function' : 'int' differs in levels of
indirection from 'void *'
.\wvgwin.c(1808) : warning C4024: 'SetWindowPos' : different types for
formal and actual parameter 3
.\wvgwin.c(1808) : warning C4047: 'function' : 'int' differs in levels of
indirection from 'void *'
.\wvgwin.c(1808) : warning C4024: 'SetWindowPos' : different types for
formal and actual parameter 4
wvggui.c
C:\Program Files\Microsoft SDKs\Windows\v6.0A\include\olectl.h(205) :
warning C4201: nonstandard extension used : nameless struct/union
.\wvggui.c(980) : warning C4244: 'function' : conversion from 'HB_LONG' to
'long', possible loss of data
.\wvggui.c(987) : warning C4244: 'function' : conversion from 'HB_LONG' to
'long', possible loss of data
.\wvggui.c(2058) : warning C4244: 'function' : conversion from 'int' to
'BYTE', possible loss of data
.\wvggui.c(2080) : warning C4244: '=' : conversion from 'HB_LONG' to
'DWORD', possible loss of data
.\wvggui.c(2085) : warning C4244: '=' : conversion from 'HB_LONG' to
'DWORD', possible loss of data
.\wvggui.c(2090) : warning C4244: '=' : conversion from 'HB_LONG' to 'int',
possible loss of data
.\wvggui.c(2095) : warning C4244: '=' : conversion from 'HB_LONG' to 'int',
possible loss of data
.\wvggui.c(2100) : warning C4244: '=' : conversion from 'HB_LONG' to 'int',
possible loss of data
.\wvggui.c(2105) : warning C4244: '=' : conversion from 'HB_LONG' to 'int',
possible loss of data
wincallb.c
.\wincallb.c(236) : warning C4244: 'function' : conversion from 'int' to
'USHORT', possible loss of data
.\wincallb.c(238) : warning C4244: 'function' : conversion from 'int' to
'USHORT', possible loss of data
.\wincallb.c(348) : warning C4152: nonstandard extension, function/data
pointer conversion in expression
.\wincallb.c(374) : warning C4244: '=' : conversion from 'int' to 'BYTE',
possible loss of data
.\wincallb.c(375) : warning C4244: '=' : conversion from 'int' to 'BYTE',
possible loss of data
.\wincallb.c(376) : warning C4244: '=' : conversion from 'int' to 'BYTE',
possible loss of data
.\wincallb.c(391) : warning C4152: nonstandard extension, function/data
pointer conversion in expression
.\wincallb.c(392) : warning C4244: '=' : conversion from 'int' to 'byte',
possible loss of data
.\wincallb.c(393) : warning C4244: '=' : conversion from 'int' to 'byte',
possible loss of data
Generating Code...
c:\work\harbour-new\harbour\contrib\gtwvg\wincallb.c(608) : warning C4701:
potentially uninitialized local variable 'j' used
c:\work\harbour-new\harbour\contrib\gtwvg\wvgsink.c(842) : warning C4701:
potentially uninitialized local variable 'hContainer' used
---

Brgds,
Viktor

On Sat, Jan 31, 2009 at 8:16 PM, Pritpal Bedi <bedipritpal@hotmail.com>wrote:

>
> GVS
>
>
> Guillermo Varona wrote:
> >
> > Hi
> > I'm trying to use this small PRG gtwvg:
> >
> > PROCEDURE Main()
> > Wvt_SetGui( .t. )
> > @ 10,10 SAY "Hola Mundo"
> > RETURN
> >
> >
>
> Try harbour/tests/wvtext.prg and compile it with -d__GTWVG__ and link with
> GTWVG.lib.
>
> It is a pure console application and works as is with GTWVG.
>
> Regards
> Pritpal Bedi
>
> --
> View this message in context:
> http://www.nabble.com/Making-a-Hello-World%21-with-gtwvg-contrib-tp21766212p21767188.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090131/c1d1f700/attachment-0001.html
From vszakats at users.sourceforge.net  Sat Jan 31 14:44:04 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Jan 31 14:44:08 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10141] trunk/harbour
Message-ID: <E1LTLl6-0001yC-Fx@74yxhf1.ch3.sourceforge.com>

Revision: 10141
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=10141&view=rev
Author:   vszakats
Date:     2009-01-31 19:44:03 +0000 (Sat, 31 Jan 2009)

Log Message:
-----------
2009-01-31 20:43 UTC+0100 Viktor Szakats (harbour.01 syenar hu)
  * contrib/gtwvg/tests/demoxbp.prg
    + Added SVN header.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtwvg/tests/demoxbp.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bedipritpal at hotmail.com  Sat Jan 31 15:26:24 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Jan 31 15:26:28 2009
Subject: [Harbour] Date-Time Functions - Revisited
Message-ID: <21767870.post@talk.nabble.com>


Hello Everybody

I am struck with one of the Active-X's ( Codejock's Calendar Control ).

Reason: it accepts and returns all events as a date field 
but in DateTime format. It means it contains fractions in the value
of type date. In xHarbour I can retrieve and send both values
with its extended date/time functions but have not figured out
how I can manage them in Harbour. Can someone enlighten me 
how I can achieve it ?

BTW, this is the only issue I have left with in Harbour.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Date-Time-Functions---Revisited-tp21767870p21767870.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sat Jan 31 15:56:15 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Jan 31 15:56:20 2009
Subject: [Harbour] Date-Time Functions - Revisited
In-Reply-To: <21767870.post@talk.nabble.com>
References: <21767870.post@talk.nabble.com>
Message-ID: <18d502870901311256i7f7900f2jd8a620467c8bc382@mail.gmail.com>

Create a custom C level object, with constructor and destructor
(hb_retptrGC()/hb_parptrGC()), and
some support functions to
retrieve the values on .prg level, and you're pretty much done.

Brgds,
Viktor

On Sat, Jan 31, 2009 at 9:26 PM, Pritpal Bedi <bedipritpal@hotmail.com>wrote:

>
> Hello Everybody
>
> I am struck with one of the Active-X's ( Codejock's Calendar Control ).
>
> Reason: it accepts and returns all events as a date field
> but in DateTime format. It means it contains fractions in the value
> of type date. In xHarbour I can retrieve and send both values
> with its extended date/time functions but have not figured out
> how I can manage them in Harbour. Can someone enlighten me
> how I can achieve it ?
>
> BTW, this is the only issue I have left with in Harbour.
>
> Regards
> Pritpal Bedi
> --
> View this message in context:
> http://www.nabble.com/Date-Time-Functions---Revisited-tp21767870p21767870.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090131/42194309/attachment.html
From bedipritpal at hotmail.com  Sat Jan 31 16:44:10 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Jan 31 16:44:13 2009
Subject: [Harbour] Date-Time Functions - Revisited
In-Reply-To: <18d502870901311256i7f7900f2jd8a620467c8bc382@mail.gmail.com>
References: <21767870.post@talk.nabble.com>
	<18d502870901311256i7f7900f2jd8a620467c8bc382@mail.gmail.com>
Message-ID: <21768632.post@talk.nabble.com>


Viktor


Viktor Szak?ts wrote:
> 
> Create a custom C level object, with constructor and destructor
> (hb_retptrGC()/hb_parptrGC()), and
> some support functions to
> retrieve the values on .prg level, and you're pretty much done.
> 
> 

May be I am not so gifted a developer. Any example or hints?

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Date-Time-Functions---Revisited-tp21767870p21768632.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From gvarona at ec-red.com  Sat Jan 31 18:49:58 2009
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Sat Jan 31 18:50:04 2009
Subject: [Harbour] Making a Hello World! with gtwvg contrib
In-Reply-To: <21767188.post@talk.nabble.com>
References: <49848CC8.7070309@ec-red.com> <21767188.post@talk.nabble.com>
Message-ID: <4984E3A6.3020107@ec-red.com>

Pritpal Bedi escribi?:
> . . .
> Try harbour/tests/wvtext.prg and compile it with -d__GTWVG__ and link with
> GTWVG.lib.
>
> It is a pure console application and works as is with GTWVG.
>   
Ok. Thanks Pritpal.

In principle, I just need my console application looks like an MS 
Windows, my example is thus:

PROCEDURE Main()
   LOCAL nVar := 10
   *Wvt_SetGui( .t. )
   @ 10,10 SAY "Hola Mundo" GET nVar
   READ
   RETURN

PROCEDURE HB_GTSYS()
#ifdef __GTWVG__
   REQUEST HB_GT_WVG_DEFAULT
#else
   REQUEST HB_GT_WVT_DEFAULT
   REQUEST HB_GT_WIN
#endif
   RETURN

Now I need to try an application that has several PRG, Does anyone have 
any more to compile BAT PRG?
Currently I use for my application xMate Console ENVIRONMENT and have a 
file for compiling with MinGW + Harbor,
Does anyone have some for ENV xMate PRG using to compile several GTWVG?

In Spanish:
En principio, solo necesito que mi aplicaci?n consola se vea como una 
ventana de MS Windows, mi ejemplo quedo asi:
. . .
Ahora necesito llevar esto a una aplicaci?n que tengo con varios PRG, 
?Algui?n tendr? algun BAT para compilar varios PRG?
Actualmente utilizo xMate para mi aplicaci?n de Consola y tengo un 
archivo ENVIRONMENT para compilar con Harbour + MinGW,
?Algui?n tendr? algun ENV para xMate para compilar varios PRG?

TIA
Best Regards


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090131/9ec771f7/attachment.html
From harbour.01 at syenar.hu  Sat Jan 31 20:49:03 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Jan 31 20:49:08 2009
Subject: [Harbour] Date-Time Functions - Revisited
In-Reply-To: <21768632.post@talk.nabble.com>
References: <21767870.post@talk.nabble.com>
	<18d502870901311256i7f7900f2jd8a620467c8bc382@mail.gmail.com>
	<21768632.post@talk.nabble.com>
Message-ID: <18d502870901311749n632d08fch98f141452b011f99@mail.gmail.com>

Hi Pritpal,

The libharu object is one example in hbhpdf, or SSL_CONTEXT in
hbssl/sslctx.c from line 80 to line 140 (except hb_ssl_method_id_to_ptr()
which is unrelated). There are many other uses, but these are two
quite pure ones.

Or here is a file find API (where the object is HB_FFIND), which I've been
planning to add to Harbour for some time:

---
static HB_GARBAGE_FUNC( PHB_FFIND_release )
{
   void ** ph = ( void ** ) Cargo;

   /* Check if pointer is not NULL to avoid multiple freeing */
   if( ph && * ph )
   {
      /* Destroy the object */
      hb_fsFindClose( ( PHB_FFIND ) * ph );

      /* set pointer to NULL just in case */
      * ph = NULL;
   }
}

static PHB_FFIND PHB_FFIND_par( int iParam )
{
   void ** ph = ( void ** ) hb_parptrGC( PHB_FFIND_release, iParam );

   return ph ? ( PHB_FFIND ) * ph : NULL;
}

HB_FUNC( FILEFINDFIRST )
{
   if( ISCHAR( 1 ) && ISBYREF( 2 ) )
   {
      void ** ph = ( void ** ) hb_gcAlloc( sizeof( PHB_FFIND ),
PHB_FFIND_release );

      PHB_FFIND ffind = hb_fsFindFirst( hb_parc( 1 ), ISNUM( 3 ) ? hb_parnl(
3 ) : HB_FA_ALL );

      * ph = ( void * ) ffind;

      hb_storptrGC( ph, 2 );

      hb_retl( ffind != NULL );
   }
   else
      hb_retl( FALSE );
}

HB_FUNC( FILEFINDNEXT )
{
   PHB_FFIND ffind = PHB_FFIND_par( 1 );

   hb_retl( ffind && hb_fsFindNext( ffind ) );
}

HB_FUNC( FILEFINDNAME )
{
   PHB_FFIND ffind = PHB_FFIND_par( 1 );

   hb_retc( ffind ? ffind->szName : NULL );
}

HB_FUNC( FILEFINDATTR )
{
   PHB_FFIND ffind = PHB_FFIND_par( 1 );

   hb_retnl( ffind ? ffind->attr : 0 );
}

HB_FUNC( FILEFINDSIZE )
{
   PHB_FFIND ffind = PHB_FFIND_par( 1 );

   hb_retnint( ffind ? ffind->size : 0 );
}

HB_FUNC( FILEFINDDATE )
{
   PHB_FFIND ffind = PHB_FFIND_par( 1 );

   hb_retds( ffind ? ffind->szDate : NULL );
}

HB_FUNC( FILEFINDTIME )
{
   PHB_FFIND ffind = PHB_FFIND_par( 1 );

   hb_retc( ffind ? ffind->szTime : NULL );
}
---

Brgds,
Viktor

On Sat, Jan 31, 2009 at 10:44 PM, Pritpal Bedi <bedipritpal@hotmail.com>wrote:

>
> Viktor
>
>
> Viktor Szak?ts wrote:
> >
> > Create a custom C level object, with constructor and destructor
> > (hb_retptrGC()/hb_parptrGC()), and
> > some support functions to
> > retrieve the values on .prg level, and you're pretty much done.
> >
> >
>
> May be I am not so gifted a developer. Any example or hints?
>
> Regards
> Pritpal Bedi
>
> --
> View this message in context:
> http://www.nabble.com/Date-Time-Functions---Revisited-tp21767870p21768632.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090201/8d26b47e/attachment.html
