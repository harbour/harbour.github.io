From druzus at priv.onet.pl  Sun Jul  1 05:43:07 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sun Jul  1 05:43:42 2007
Subject: [Harbour] Tip lib
In-Reply-To: <9257026e0706301459i4c597d5dj69dee875ea43ff2d@mail.gmail.com>
References: <4684F077.4080607@mail.udg.mx>
	<20070629115900.GA13522@localhost.localdomain>
	<3FBFDEBF-0384-47DE-A944-0C50CD7A2248@syenar.hu>
	<20070629140353.GA13787@localhost.localdomain>
	<002301c7ba5c$aa975330$1700000a@PcJuanxp>
	<9257026e0706290845x4650683dg2d04c4fae70cf481@mail.gmail.com>
	<9257026e0706290926i7a03487ax4c3828250cccbb8d@mail.gmail.com>
	<20070630120233.GA18472@localhost.localdomain>
	<20070630122459.GC18472@localhost.localdomain>
	<9257026e0706301459i4c597d5dj69dee875ea43ff2d@mail.gmail.com>
Message-ID: <20070701094307.GA13553@localhost.localdomain>

On Sat, 30 Jun 2007, Lorenzo Fiorini wrote:
> If I "diff" harbour/contrib/tip xharbour/source/tip I see:
> - encmthd.c and hbhex2n.c have been removed in xHarbour

Not removed - I added these files for Harbour version only.
It's C code from #pragma ... and some functions used by TIP
which do not exist in xHarbour.

> - C code is different in base64x.c

The difference is minor - in Harbour I fixed one possible GPF.

> - there is C code added to encb64.prg, encqp.prg, encurl.prg in xHarbour

I moved this code into encmthd.c so it's not problem.
I've just ported current xHarbour version (BTW please inform Hannes that
all strings in [x]Harbour are passed without cloning so the trick with
storing pointer to string only reduce the speed and should not exist in
core code because can confused users which looks in core code for
programming examples) and I can commit it by someone who knows and use
this library will have to test it.

best regards,
Przemek
From soporte at dsgsoftware.com  Mon Jul  2 05:00:38 2007
From: soporte at dsgsoftware.com (=?iso-8859-2?Q?Juan_G=E1lvez?=)
Date: Mon Jul  2 05:01:39 2007
Subject: [Harbour] Tip lib
References: <9257026e0706290845x4650683dg2d04c4fae70cf481@mail.gmail.com><000601c7ba6a$f1ca3890$1700000a@PcJuanxp>
	<20070630121252.GB18472@localhost.localdomain>
Message-ID: <002001c7bc87$84c33160$1700000a@PcJuanxp>

Przemek,

> I'm sorry but I do not use TIP library so I cannot say too much
> about them. If you think that Hannes modifications are important
> then we can add them to Harbour but we will need someone who will
> use/test this modified library.

I've only tested TIpClientFtp class and it seems to work very well ...

> Please remember that Hannes
> modifications are not backward compatible and users code which
> uses TIP library has to be updated too.

I had to make it :-)

I think the main change was TIPClient became an *abstract* super class for 
TIpClientFtp, TIpClientHttp, TIpClientPop and TIpClientSmtp. Hannes 
commented he made it "to comply with OOP rules".

He also added a new THTML class.

Best regards
Juan 

From lorenzo.fiorini at gmail.com  Mon Jul  2 05:24:57 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jul  2 05:25:00 2007
Subject: [Harbour] Tip lib
In-Reply-To: <20070701094307.GA13553@localhost.localdomain>
References: <4684F077.4080607@mail.udg.mx>
	<3FBFDEBF-0384-47DE-A944-0C50CD7A2248@syenar.hu>
	<20070629140353.GA13787@localhost.localdomain>
	<002301c7ba5c$aa975330$1700000a@PcJuanxp>
	<9257026e0706290845x4650683dg2d04c4fae70cf481@mail.gmail.com>
	<9257026e0706290926i7a03487ax4c3828250cccbb8d@mail.gmail.com>
	<20070630120233.GA18472@localhost.localdomain>
	<20070630122459.GC18472@localhost.localdomain>
	<9257026e0706301459i4c597d5dj69dee875ea43ff2d@mail.gmail.com>
	<20070701094307.GA13553@localhost.localdomain>
Message-ID: <9257026e0707020224t6303c8b3t26c23e012125bed1@mail.gmail.com>

On 7/1/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> I've just ported current xHarbour version (BTW please inform Hannes that
> all strings in [x]Harbour are passed without cloning so the trick with
> storing pointer to string only reduce the speed and should not exist in
> core code because can confused users which looks in core code for
> programming examples) and I can commit it by someone who knows and use
> this library will have to test it.

If you want you can send it to me I'll do some tests.

best regards,
Lorenzo
From dmacias at mail.udg.mx  Mon Jul  2 07:13:27 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Mon Jul  2 07:13:32 2007
Subject: [Harbour] Compiling output
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <4688DDD7.6030000@mail.udg.mx>

I noticed this in Linux, but as I see it happen in other platforms

Harbour and xHarbour show differences in compiling output, not expected, 
and seem due to changes in PP in last months

I use my own "std.ch" file, so I apply something like this:

%HB_BIN%harbour %GEN_DIR%sgd0.prg     -i%HB_INC% -p -m -n -a -ustdcha.ch 
-DHARBOUR -DHBCOMM -DNOADS %HB_OS% >> chclipnet.dat

Below are compiling output for:
- Clipper 5.3a
- Harbour Beta build 0.99-3 Intl.  (mid-June 2007)
- xHarbour Compiler build 0.99.71 (SimpLex)  (mid-June 2007)
- xHarbour Compiler build 0.99.60 (SimpLex)  (March 2006)

Recent (x)Harbour show counting of lines of stdcha.ch, which have 2104 lines
Older xHarbour does not show this counting

Real sgd0.prg have 957 lines, 3 functions, 0 procedures
sgd0.ppo for Harbour have 1415 lines, 3 functions, 0 procedures

Recent Harbour output show:
Lines 4816, Functions/Procedures 4

4816 does not match with any calculation, and 4 is wrong

Harbour sequence is strange, it is smaller sometimes ( perhaps include 
files ? ):
100, 200, 300, 100, 100, 100, 200, 300, 400, 500, 600, 700, 800, 100, 
200, 300, 400, 500, 600, 700, 800, 900


xHarbour old and recent output show:
Lines 959, Functions/Procedures 3
It differ in 2 lines

xHarbour sequence is strange, it is smaller sometimes ( perhaps include 
files ? ):
100, 200, 300, 100, 100, 100, 100, 200, 300, 400, 500, 600, 700, 800, 
900, 1000, 100, 200, 300, 400, 500, 600, 700, 800, 900


David Macias


--------------------------------
C:\clipnet>clipper c:\basedat\sisgen\sgd0.prg -p -m -n -a -ustdcha.ch
CA-Clipper (R) 5.3
Copyright (c) 1985-1995, Computer Associates International, Inc.
Microsoft C Floating Point Support Routines
Copyright (c) Microsoft Corp 1984-1993.  All Rights Reserved.
304K available
Loading standard defs from c:\basedat\sisgen\stdcha.ch
Compiling c:\basedat\sisgen\SGD0.PRG
Code size 4901, Symbols 2720, Constants 2219



--------------------------------

Harbour Beta build 0.99-3 Intl.
Copyright 1999-2007, http://www.harbour-project.org/

100

100

200

300

400

500

600

700

800

900

1000

1100

1200

1300

1400

1500

1600

1700

1800

1900

2000

2100
Compiling 'c:\basedat\sisgen\sgd0.prg' and generating preprocessed 
output to 'c:\basedat\sisgen\sgd0.ppo'...

100

200

300

100

100

100

200

300

400

500

600

700

800

100

200

300

400

500

600

700

800

900

Lines 4816, Functions/Procedures 4
Generating C source output to 'sgd0.c'... Done.



--------------------------------

xHarbour Compiler build 0.99.71 (SimpLex)
Copyright 1999-2007, http://www.xharbour.org http://www.harbour-project.org/

100

100

200

300

400

500

600

700

800

900

1000

1100

1200

1300

1400

1500

1600

1700

1800

1900

2000

2100
Compiling 'c:\basedat\sisgen\sgd0.prg' and generating preprocessed 
output to 'c:\basedat\sisgen\sgd0.ppo'...

100

200

300

100

100

100

100

200

300

400

500

600

700

800

900

1000

100

200

300

400

500

600

700

800

900

Lines 959, Functions/Procedures 3
Generating C source output to 'sgd0.c'...
Done.


--------------------------------

xHarbour Compiler build 0.99.60 (SimpLex)
Copyright 1999-2006, http://www.xharbour.org http://www.harbour-project.org/
Loaded: 304 Commands, 0 Translates, 147 Defines from: stdcha.ch
Compiling 'c:\basedat\sisgen\sgd0.prg' and generating preprocessed 
output to 'c:\basedat\sisgen\sgd0.ppo'...

  100
  200
  300
  400
  600
  100
  500
  800
  900
Lines 959, Functions/Procedures 3
Generating C source output to 'sgd0.c'...
Done.



From druzus at priv.onet.pl  Mon Jul  2 08:09:48 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jul  2 08:10:25 2007
Subject: [Harbour] ChangeLog 2007-07-02 14:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070702120948.GA15956@localhost.localdomain>

2007-07-02 14:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcompat.ch
    + added hb_CStr() <=> CStr() translations

  * harbour/common.mak
  * harbour/source/rtl/Makefile
  + harbour/source/rtl/hbbit.c
    + added set of hb_bit*() functions for bit manipulations:
      HB_BITAND( <nVal1>, <nVal2>, [<nVal3,...>] ) => <nResult>
      HB_BITOR( <nVal1>, <nVal2>, [<nVal3,...>] ) => <nResult>
      HB_BITXOR( <nVal1>, <nVal2>, [<nVal3,...>] ) => <nResult>
      HB_BITNOT( <nVal> ) => <nResult>
      HB_BITTEST( <nVal>, <nBit> ) => <lResult>
      HB_BITSET( <nVal>, <nBit> ) => <nResult>
      HB_BITRESET( <nVal>, <nBit> ) => <nResult>
      HB_BITSHIFT( <nVal>, <nBits> ) => <nResult>

  * harbour/contrib/tip/Makefile
  * harbour/contrib/tip/utils.c
  * harbour/contrib/tip/popcln.prg
  * harbour/contrib/tip/Changelog
  * harbour/contrib/tip/cgi.prg
  * harbour/contrib/tip/url.prg
  * harbour/contrib/tip/httpcln.prg
  * harbour/contrib/tip/client.prg
  * harbour/contrib/tip/encoder.prg
  * harbour/contrib/tip/smtpcln.prg
  * harbour/contrib/tip/mail.prg
  * harbour/contrib/tip/ftpcln.prg
  + harbour/contrib/tip/thtml.prg
  + harbour/contrib/tip/thtml.ch
  - harbour/contrib/tip/cstr.prg
    * synced with recent xHarbour modifications - please test

  * harbour/source/vm/hvm.c
    * formatting

  * harbour/source/rdd/delim1.c
  * harbour/source/rdd/dbf1.c
  * harbour/source/rdd/sdf1.c
    % do not copy date value to separate memory buffer but decode dates
      directly from record buffer

  * harbour/source/compiler/hbopt.c
    * optimize PCODE generated for:
         return <somefunc>([<params,...>])

best regards,
Przemek
From druzus at priv.onet.pl  Mon Jul  2 08:11:24 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jul  2 08:12:00 2007
Subject: [Harbour] Tip lib
In-Reply-To: <9257026e0707020224t6303c8b3t26c23e012125bed1@mail.gmail.com>
References: <3FBFDEBF-0384-47DE-A944-0C50CD7A2248@syenar.hu>
	<20070629140353.GA13787@localhost.localdomain>
	<002301c7ba5c$aa975330$1700000a@PcJuanxp>
	<9257026e0706290845x4650683dg2d04c4fae70cf481@mail.gmail.com>
	<9257026e0706290926i7a03487ax4c3828250cccbb8d@mail.gmail.com>
	<20070630120233.GA18472@localhost.localdomain>
	<20070630122459.GC18472@localhost.localdomain>
	<9257026e0706301459i4c597d5dj69dee875ea43ff2d@mail.gmail.com>
	<20070701094307.GA13553@localhost.localdomain>
	<9257026e0707020224t6303c8b3t26c23e012125bed1@mail.gmail.com>
Message-ID: <20070702121124.GB15956@localhost.localdomain>

On Mon, 02 Jul 2007, Lorenzo Fiorini wrote:
> If you want you can send it to me I'll do some tests.

Thank you - I committed the modifications - if sth will be wrong
then we can revert them and in such way more people can make tests.

best regards,
Przemek
From druzus at priv.onet.pl  Mon Jul  2 08:16:58 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jul  2 08:17:35 2007
Subject: [Harbour] Compiling output
In-Reply-To: <4688DDD7.6030000@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<4688DDD7.6030000@mail.udg.mx>
Message-ID: <20070702121658.GC15956@localhost.localdomain>

On Mon, 02 Jul 2007, David Arturo Macias Corona wrote:
> I noticed this in Linux, but as I see it happen in other platforms
> Harbour and xHarbour show differences in compiling output, not expected, 
> and seem due to changes in PP in last months
> I use my own "std.ch" file, so I apply something like this:
> %HB_BIN%harbour %GEN_DIR%sgd0.prg     -i%HB_INC% -p -m -n -a -ustdcha.ch 
> -DHARBOUR -DHBCOMM -DNOADS %HB_OS% >> chclipnet.dat
> Below are compiling output for:
> - Clipper 5.3a
> - Harbour Beta build 0.99-3 Intl.  (mid-June 2007)
> - xHarbour Compiler build 0.99.71 (SimpLex)  (mid-June 2007)
> - xHarbour Compiler build 0.99.60 (SimpLex)  (March 2006)
> Recent (x)Harbour show counting of lines of stdcha.ch, which have 2104 lines

Yes.

> Older xHarbour does not show this counting
> Real sgd0.prg have 957 lines, 3 functions, 0 procedures
> sgd0.ppo for Harbour have 1415 lines, 3 functions, 0 procedures
> Recent Harbour output show:
> Lines 4816, Functions/Procedures 4
> 4816 does not match with any calculation, and 4 is wrong

4816 is total number of all preprocessed lines and 4 is total number of
functions - you probably compiled your code without -n switch and in such
case Clipper and [x]Harbour create one function with the same name as
compiled file.

> Harbour sequence is strange, it is smaller sometimes ( perhaps include 
> files ? ):
> 100, 200, 300, 100, 100, 100, 200, 300, 400, 500, 600, 700, 800, 100, 
> 200, 300, 400, 500, 600, 700, 800, 900

Sorry but I do not see anything strange in the above. Would you like to
change sth?

best regards,
Przemek
From druzus at priv.onet.pl  Mon Jul  2 11:17:28 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jul  2 11:18:05 2007
Subject: [Harbour] ChangeLog 2007-07-02 17:16 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070702151728.GA24968@localhost.localdomain>

2007-07-02 17:16 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/common.mak
  * harbour/source/rtl/Makefile
  + harbour/source/rtl/hbhex.c
    * added HB_HEXTONUM() and HB_NUMTOHEX()

  * harbour/include/hbcompat.ch
    * added trnaslation rules for expresions in parentheses which use
      new xHarbour operators: HAS, IN, LIKE, &, |, ^^, >>, <<
      Please note that only code which uses above operators in parentheses
      will be translated, f.e. this code will not be translated:
         if cVal1 IN cVal2
            nVal := nVal1 | nVal2 | nVal3 | nVal4
         endif
      will not be translated but this one will:
         if ( cVal1 IN cVal2 )
            nVal := ( nVal1 | nVal2 | nVal3 | nVal4 )
         endif

  * harbour/contrib/tip/thtml.prg
  * harbour/contrib/tip/thtml.ch
    + added $\Id
  * harbour/source/rtl/hbbit.c
    + added $\Id
    ! fixed typo in HB_BITSHIFT()

best regards,
Przemek
From druzus at priv.onet.pl  Mon Jul  2 12:11:41 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jul  2 12:12:18 2007
Subject: [Harbour] ChangeLog 2007-07-02 18:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070702161141.GA25164@localhost.localdomain>

2007-07-02 18:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/macro/macro.yyc
  * harbour/source/macro/macro.y
  * harbour/source/macro/macrolex.c
    ! allow to use 'FIELD' and '_FIELD' as variable/function/field name.
    * allow to use 'IF' and 'IIF' as variable/field name.

best regards,
Przemek
From soporte at dsgsoftware.com  Tue Jul  3 04:19:51 2007
From: soporte at dsgsoftware.com (=?iso-8859-2?Q?Juan_G=E1lvez?=)
Date: Tue Jul  3 04:20:57 2007
Subject: [Harbour] ChangeLog 2007-07-02 14:10 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20070702120948.GA15956@localhost.localdomain>
Message-ID: <000201c7bd4b$001d3720$1700000a@PcJuanxp>

Przemek,

I think there's something wrong with last CVS.

The line 132 in contrib\tip\client.prg :

METHOD lastErrorMessage(SocketCon) INLINE ::INetErrorDesc(SocketCon)

is preprocesed as :

_HB_MEMBER lastErrorMessage(); s_oClass:AddInline( "lastErrorMessage", 
{|Self, HB_BITOR( SocketCon, ( Self := ( Self ) ) ), 
::INetErrorDesc(SocketCon) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 
0 ) )

Best regards
Juan

----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Monday, July 02, 2007 2:09 PM
Subject: [Harbour] ChangeLog 2007-07-02 14:10 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> 2007-07-02 14:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbcompat.ch
>    + added hb_CStr() <=> CStr() translations
>
>  * harbour/common.mak
>  * harbour/source/rtl/Makefile
>  + harbour/source/rtl/hbbit.c
>    + added set of hb_bit*() functions for bit manipulations:
>      HB_BITAND( <nVal1>, <nVal2>, [<nVal3,...>] ) => <nResult>
>      HB_BITOR( <nVal1>, <nVal2>, [<nVal3,...>] ) => <nResult>
>      HB_BITXOR( <nVal1>, <nVal2>, [<nVal3,...>] ) => <nResult>
>      HB_BITNOT( <nVal> ) => <nResult>
>      HB_BITTEST( <nVal>, <nBit> ) => <lResult>
>      HB_BITSET( <nVal>, <nBit> ) => <nResult>
>      HB_BITRESET( <nVal>, <nBit> ) => <nResult>
>      HB_BITSHIFT( <nVal>, <nBits> ) => <nResult>
>
>  * harbour/contrib/tip/Makefile
>  * harbour/contrib/tip/utils.c
>  * harbour/contrib/tip/popcln.prg
>  * harbour/contrib/tip/Changelog
>  * harbour/contrib/tip/cgi.prg
>  * harbour/contrib/tip/url.prg
>  * harbour/contrib/tip/httpcln.prg
>  * harbour/contrib/tip/client.prg
>  * harbour/contrib/tip/encoder.prg
>  * harbour/contrib/tip/smtpcln.prg
>  * harbour/contrib/tip/mail.prg
>  * harbour/contrib/tip/ftpcln.prg
>  + harbour/contrib/tip/thtml.prg
>  + harbour/contrib/tip/thtml.ch
>  - harbour/contrib/tip/cstr.prg
>    * synced with recent xHarbour modifications - please test
>
>  * harbour/source/vm/hvm.c
>    * formatting
>
>  * harbour/source/rdd/delim1.c
>  * harbour/source/rdd/dbf1.c
>  * harbour/source/rdd/sdf1.c
>    % do not copy date value to separate memory buffer but decode dates
>      directly from record buffer
>
>  * harbour/source/compiler/hbopt.c
>    * optimize PCODE generated for:
>         return <somefunc>([<params,...>])
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 

From druzus at priv.onet.pl  Tue Jul  3 09:28:57 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul  3 09:29:36 2007
Subject: [Harbour] ChangeLog 2007-07-03 15:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070703132857.GA19113@localhost.localdomain>

2007-07-03 15:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcompat.ch
    * removed bit translation rules starting with comma (,)

  * harbour/source/rtl/hbhex.c
  * harbour/source/rdd/delim1.c
  * harbour/source/rdd/dbf1.c
  * harbour/source/rdd/sdf1.c
    ! fixed casting

best regards,
Przemek
From druzus at priv.onet.pl  Tue Jul  3 09:30:00 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul  3 09:30:37 2007
Subject: [Harbour] ChangeLog 2007-07-02 14:10 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <000201c7bd4b$001d3720$1700000a@PcJuanxp>
References: <20070702120948.GA15956@localhost.localdomain>
	<000201c7bd4b$001d3720$1700000a@PcJuanxp>
Message-ID: <20070703133000.GB19113@localhost.localdomain>

On Tue, 03 Jul 2007, Juan G?lvez wrote:
> Przemek,
> I think there's something wrong with last CVS.
> The line 132 in contrib\tip\client.prg :
> METHOD lastErrorMessage(SocketCon) INLINE ::INetErrorDesc(SocketCon)
> is preprocesed as :
> _HB_MEMBER lastErrorMessage(); s_oClass:AddInline( "lastErrorMessage", 
> {|Self, HB_BITOR( SocketCon, ( Self := ( Self ) ) ), 
> ::INetErrorDesc(SocketCon) }, nScope + iif( .F., 8, 0 ) + iif( .F., 256, 
> 0 ) )

Yes, it is wrong. Thanks for the information. Should be fixed now.

best regards,
Przemek
From soporte at dsgsoftware.com  Tue Jul  3 10:11:25 2007
From: soporte at dsgsoftware.com (=?iso-8859-2?Q?Juan_G=E1lvez?=)
Date: Tue Jul  3 10:12:17 2007
Subject: [Harbour] ChangeLog 2007-07-02 14:10 UTC+0200
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
References: <20070702120948.GA15956@localhost.localdomain><000201c7bd4b$001d3720$1700000a@PcJuanxp>
	<20070703133000.GB19113@localhost.localdomain>
Message-ID: <002e01c7bd7c$129f4290$1700000a@PcJuanxp>

> Yes, it is wrong. Thanks for the information. Should be fixed now.

Yes, it's fixed now. Many thanks.

BTW I think cstr.obj has to be deleted from makefile.bc.

Best regards
Juan
From mbelgrano at deltain.it  Tue Jul  3 10:14:41 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jul  3 10:15:21 2007
Subject: [Harbour] hbmake file indipendent from compiler
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A6E2@SRV02.deltain.net>

Is possible create make file independent from c compiler?

 

 

Massimo Belgrano <mailto:mbelgrano@deltain.com> 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070703/d1ea0541/attachment.html
From mbelgrano at deltain.it  Tue Jul  3 10:14:42 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jul  3 10:15:21 2007
Subject: [Harbour] Where is makallbc?
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A6E3@SRV02.deltain.net>

 

Is aivable in Harbour a batch for compile all contrib line MAKALLBC.bat
of xharbour?

 

 

 

Massimo Belgrano <mailto:mbelgrano@deltain.com> 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070703/d21d4b82/attachment.html
From druzus at priv.onet.pl  Tue Jul  3 10:53:43 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul  3 10:54:19 2007
Subject: [Harbour] ChangeLog 2007-07-03 16:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070703145343.GA5235@localhost.localdomain>

2007-07-03 16:53 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/tip/makefile.bc
    - removed cstr.prg
    + added thtml.prg

best regards,
Przemek
From druzus at priv.onet.pl  Tue Jul  3 10:58:00 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul  3 10:58:35 2007
Subject: [Harbour] hbmake file indipendent from compiler
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809A6E2@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03809A6E2@SRV02.deltain.net>
Message-ID: <20070703145800.GA5594@localhost.localdomain>

On Tue, 03 Jul 2007, Massimo Belgrano wrote:
> Is possible create make file independent from c compiler?

We have it from begining. Makefile in each directory is for GNU make
system which can be used with any C compiler on all platforms. I'm using
it for GCC, G++, OpenWatcom, BCC32, XCC,  MinGW, DJGPP in many  different
*nixes, DOS, Windows.

best regards,
Przemek
From rafa at tesipro.com  Tue Jul  3 11:34:39 2007
From: rafa at tesipro.com (Rafa (TESIPRO))
Date: Tue Jul  3 11:34:40 2007
Subject: [Harbour] Possible bug in #ifdef ?
Message-ID: <468A6C8F.10405@tesipro.com>

Sorry, this code compile correct under xHarbour 0.99.7, but
under Harbour,Version: Harbour devel build 1.1-1 Intl., show errors;

This code;
#define GTK_MAJOR_VERSION                (2)
#define GTK_MINOR_VERSION                (10)
#define GTK_MICRO_VERSION                (6)

/* check whether a Gtk+ version equal to or greater than
 * major.minor.micro is present.
 */
#define    GTK_CHECK_VERSION(major,minor,micro )   (GTK_MAJOR_VERSION > 
(major) || (GTK_MAJOR_VERSION == (major) && GTK_MINOR_VERSION > (minor)) 
|| (GTK_MAJOR_VERSION == (major) && GTK_MINOR_VERSION == (minor) &&  
GTK_MICRO_VERSION >= (micro)))

Function Main()

#ifdef GTK_CHECK_VERION( 2,10 )
   ? "Version 2,10"
#else
   ? "Version < 2,10"
#endif

Return nil

Show this error ;
C:\Harbour\trunk\harbour\gcc\bin/harbour -w -q0 -gc0 -n  
-I../../include  -IC:\T
GTK\include  -IC:\Harbour\trunk\harbour\gcc\include  -oa.c a.prg
a.prg(14) Error E0013  Error in #ifdef
a.prg(16) Error E0015  #else does not match #ifdef
a.prg(18) Error E0014  #endif does not match #endif
3 errors

Under xHarbour compiled correct!

I think problem with #define GTK_CHECK_VERSION, operators || and &&

Harbour support this operators ?

Thank you
Rafa Carmona


From soporte at dsgsoftware.com  Tue Jul  3 11:36:55 2007
From: soporte at dsgsoftware.com (=?iso-8859-2?Q?Juan_G=E1lvez?=)
Date: Tue Jul  3 11:37:34 2007
Subject: [Harbour] ChangeLog 2007-07-03 16:53 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20070703145343.GA5235@localhost.localdomain>
Message-ID: <001601c7bd87$feab1cd0$1700000a@PcJuanxp>

Przemek,

Many thanks.

Sorry but I'm using hbcompat.ch and this code :

DbEval( <||

is preprocesed as :

DbEval( HB_BITOR( <, | )

Best regards
Juan

----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Tuesday, July 03, 2007 4:53 PM
Subject: [Harbour] ChangeLog 2007-07-03 16:53 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> 2007-07-03 16:53 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/contrib/tip/makefile.bc
>    - removed cstr.prg
>    + added thtml.prg
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 

From mbelgrano at deltain.it  Tue Jul  3 11:38:03 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jul  3 11:38:41 2007
Subject: R: [Harbour] hbmake file indipendent from compiler
In-Reply-To: <20070703145800.GA5594@localhost.localdomain>
References: <AFB948164110ED43B5EB849E8DEEF03809A6E2@SRV02.deltain.net>
	<20070703145800.GA5594@localhost.localdomain>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A6E5@SRV02.deltain.net>

Will this rule be applied to hbmake?


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Przemyslaw Czerpak
Inviato: marted? 3 luglio 2007 16.58
A: Harbour Project Main Developer List.
Oggetto: Re: [Harbour] hbmake file indipendent from compiler

On Tue, 03 Jul 2007, Massimo Belgrano wrote:
> Is possible create make file independent from c compiler?

We have it from begining. Makefile in each directory is for GNU make
system which can be used with any C compiler on all platforms. I'm using
it for GCC, G++, OpenWatcom, BCC32, XCC,  MinGW, DJGPP in many  different
*nixes, DOS, Windows.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at priv.onet.pl  Tue Jul  3 12:55:08 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul  3 12:55:44 2007
Subject: [Harbour] Possible bug in #ifdef ?
In-Reply-To: <468A6C8F.10405@tesipro.com>
References: <468A6C8F.10405@tesipro.com>
Message-ID: <20070703165508.GA5785@localhost.localdomain>

On Tue, 03 Jul 2007, Rafa (TESIPRO) wrote:
[...]
> Sorry, this code compile correct under xHarbour 0.99.7, but

It's not true. This code has been never working as you want with
any [x]Harbour version but the old PP simply not reported errors.
Just try:
   proc main()
   #ifdef any stupid text here () / AWR3 E345
      ? 1
   #else
      ? 2
   #endif
   return
and:
   #define any
   #ifdef any stupid ...
      ? 1
   #else
      ? 2
   #endif
   return

[...]
> a.prg(14) Error E0013  Error in #ifdef
> a.prg(16) Error E0015  #else does not match #ifdef
> a.prg(18) Error E0014  #endif does not match #endif
> 3 errors

Correct behavior.

> Under xHarbour compiled correct!

Not true. See above. Because old PP didn't report correct error
message you create nonworking code. Now you can fix it.

> I think problem with #define GTK_CHECK_VERSION, operators || and &&
> Harbour support this operators ?

With the exception to && which is comment in .prg code and works like //
PP support inside #if (not #ifdef) the C bit operators. You can also
use standard xbase .and., .or., .not., f.e.:

  #if defined( sth ) .or. ( sthelse >= 1 .and. sthelse <= ( 1 << 3 ) )
    #stdout "Hello!!!"
  #endif

But the above is for PP. The xHarbour compiler (not PP) bit operators:
<<, >>, &, |, ^^ and IN, HAS, LIKE are not supported by Harbour but
if you will use them inside parentheses then hbcompat.ch can translate
them.

best regards,
Przemek
From druzus at priv.onet.pl  Tue Jul  3 13:01:01 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul  3 13:01:37 2007
Subject: R: [Harbour] hbmake file indipendent from compiler
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809A6E5@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03809A6E2@SRV02.deltain.net>
	<20070703145800.GA5594@localhost.localdomain>
	<AFB948164110ED43B5EB849E8DEEF03809A6E5@SRV02.deltain.net>
Message-ID: <20070703170101.GB5785@localhost.localdomain>

On Tue, 03 Jul 2007, Massimo Belgrano wrote:
> Will this rule be applied to hbmake?

No, I haven't noticed that you are asking only about hbmake.
I cannot help you with hbmake - I do not use it. I'm using
GNU make in my projects.

best regards,
Przemek
From mbelgrano at deltain.it  Tue Jul  3 13:37:45 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jul  3 13:38:27 2007
Subject: R: R: [Harbour] hbmake file indipendent from compiler
In-Reply-To: <20070703170101.GB5785@localhost.localdomain>
References: <AFB948164110ED43B5EB849E8DEEF03809A6E2@SRV02.deltain.net><20070703145800.GA5594@localhost.localdomain><AFB948164110ED43B5EB849E8DEEF03809A6E5@SRV02.deltain.net>
	<20070703170101.GB5785@localhost.localdomain>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A6EA@SRV02.deltain.net>

IMO your work for made easy compile in harbour is important 
Hbmake will be replaced in harbour with something other?


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Przemyslaw Czerpak
Inviato: marted? 3 luglio 2007 19.01
A: Harbour Project Main Developer List.
Oggetto: Re: R: [Harbour] hbmake file indipendent from compiler

On Tue, 03 Jul 2007, Massimo Belgrano wrote:
> Will this rule be applied to hbmake?

No, I haven't noticed that you are asking only about hbmake.
I cannot help you with hbmake - I do not use it. I'm using
GNU make in my projects.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From info at fsgiudice.com  Tue Jul  3 13:53:47 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Jul  3 13:54:34 2007
Subject: [Harbour] [REPOST] how handling C structure in harbour ?
References: <d6rr6315pfvtcd3fqnkg77nr9prm6hkta4@4ax.com><20070612014018.GA19852@localhost.localdomain><t2ts63dslcshe97lsjg6ik503lihrpcpnt@4ax.com><20070612110436.GB21229@localhost.localdomain><9j4t63d9eotmcq8r02o4bno2j99s5d0ijm@4ax.com><466EE203.4020400@dbtopas.lt><20070612194455.GA13447@localhost.localdomain>
	<024001c7ad2f$24003510$b400a8c0@ASUSFSG>
Message-ID: <004a01c7bd9b$1c4f2d40$b400a8c0@ASUSFSG>


Hi All,

----- Original Message ----- 
From: "Francesco Saverio Giudice" <info@fsgiudice.com>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Tuesday, June 12, 2007 10:20 PM
Subject: [Harbour] how handling C structure in harbour ?


> there is a way to handle C structure in harbour ?
> I need to add some Windows APIs and I need to exchange C structures data 
> between C and PRG level as xHarbour does.
>


sorry for reposting this question, but is there anyone that can help ?
I have tried to look at sources in xharbour to port in harbour, but I'm not 
in deep with core part, my C knowledge is low and I don't know how handle C 
structure that in xharbour are handled using strings.

TIA

Best Regards

Francesco
From harbour.01 at syenar.hu  Tue Jul  3 14:06:47 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  3 14:07:08 2007
Subject: R: R: [Harbour] hbmake file indipendent from compiler
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809A6EA@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03809A6E2@SRV02.deltain.net><20070703145800.GA5594@localhost.localdomain><AFB948164110ED43B5EB849E8DEEF03809A6E5@SRV02.deltain.net>
	<20070703170101.GB5785@localhost.localdomain>
	<AFB948164110ED43B5EB849E8DEEF03809A6EA@SRV02.deltain.net>
Message-ID: <4B2613E0-F71F-4E78-BE5A-79E90007B19A@syenar.hu>

Hi Massimo,

Watching the command-line help of thexhb version of
hbmake, it seems to have some of those features you
want to see.

Since the author of hbmake went to xhb long ago,
we could sync hbmake with the version currently in xhb;
after fixing the warnings and xhb specific stuff in it and
keeping our existing fixes of course.

It would be great if you could help to make the
xhb version to compile under Harbour (without
"hbcompat.ch" possibly). I see "IN" usage mostly.

Brgds,
Viktor

On 2007.07.03., at 19:37, Massimo Belgrano wrote:

> IMO your work for made easy compile in harbour is important
> Hbmake will be replaced in harbour with something other?
>
>
> -----Messaggio originale-----
> Da: harbour-bounces@harbour-project.org [mailto:harbour- 
> bounces@harbour-project.org] Per conto di Przemyslaw Czerpak
> Inviato: marted? 3 luglio 2007 19.01
> A: Harbour Project Main Developer List.
> Oggetto: Re: R: [Harbour] hbmake file indipendent from compiler
>
> On Tue, 03 Jul 2007, Massimo Belgrano wrote:
>> Will this rule be applied to hbmake?
>
> No, I haven't noticed that you are asking only about hbmake.
> I cannot help you with hbmake - I do not use it. I'm using
> GNU make in my projects.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Tue Jul  3 15:40:09 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul  3 15:40:46 2007
Subject: [Harbour] ChangeLog 2007-07-03 21:40 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070703194009.GA12962@localhost.localdomain>

2007-07-03 21:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcompat.ch
   ! added closing parentheses in operators translation rules to avoid
     wrong translations
  * harbour/include/hbextern.ch
   + added many missing functions

best regards,
Przemek
From druzus at priv.onet.pl  Tue Jul  3 15:49:40 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul  3 15:50:18 2007
Subject: [Harbour] Re: ChangeLog 2007-07-03 21:40 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <20070703194009.GA12962@localhost.localdomain>
References: <20070703194009.GA12962@localhost.localdomain>
Message-ID: <20070703194940.GB12962@localhost.localdomain>

On Tue, 03 Jul 2007, Przemyslaw Czerpak wrote:
>   * harbour/include/hbextern.ch
>    + added many missing functions

There is still a lot of functions which do not exist in hbextern.ch
but I do not know if I should add all of them, f.e. some SIX3 SX_*(),
functions, HiperSeek HS_*() and Clipper Fast Text search CFT*() functions,
UsrRDD UR_*() functions, some Class(y) compatible functions, codepage and
lang definitions, some obsolete old functions etc. I created their list.
Victor if you have a while to continue hbextern.ch updating then I can
send this list to you.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Jul  3 17:11:16 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  3 17:11:22 2007
Subject: [Harbour] Re: ChangeLog 2007-07-03 21:40 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <20070703194940.GB12962@localhost.localdomain>
References: <20070703194009.GA12962@localhost.localdomain>
	<20070703194940.GB12962@localhost.localdomain>
Message-ID: <426BC783-58FD-452C-9176-9F834BA101A5@syenar.hu>

Yes, no problem, send them to me, I'll add them.

Brgds,
Viktor

On 2007.07.03., at 21:49, Przemyslaw Czerpak wrote:

> On Tue, 03 Jul 2007, Przemyslaw Czerpak wrote:
>>   * harbour/include/hbextern.ch
>>    + added many missing functions
>
> There is still a lot of functions which do not exist in hbextern.ch
> but I do not know if I should add all of them, f.e. some SIX3 SX_*(),
> functions, HiperSeek HS_*() and Clipper Fast Text search CFT*()  
> functions,
> UsrRDD UR_*() functions, some Class(y) compatible functions,  
> codepage and
> lang definitions, some obsolete old functions etc. I created their  
> list.
> Victor if you have a while to continue hbextern.ch updating then I can
> send this list to you.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Tue Jul  3 21:27:30 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul  3 21:28:10 2007
Subject: [Harbour] [REPOST] how handling C structure in harbour ?
In-Reply-To: <004a01c7bd9b$1c4f2d40$b400a8c0@ASUSFSG>
References: <024001c7ad2f$24003510$b400a8c0@ASUSFSG>
	<004a01c7bd9b$1c4f2d40$b400a8c0@ASUSFSG>
Message-ID: <20070704012730.GA26401@localhost.localdomain>

On Tue, 03 Jul 2007, Francesco Saverio Giudice wrote:
> >there is a way to handle C structure in harbour ?
> >I need to add some Windows APIs and I need to exchange C structures data 
> >between C and PRG level as xHarbour does.
> sorry for reposting this question, but is there anyone that can help ?
> I have tried to look at sources in xharbour to port in harbour, but I'm not 
> in deep with core part, my C knowledge is low and I don't know how handle C 
> structure that in xharbour are handled using strings.

The main problem with handling C structures in .prg code using xHarbour
is that so far in all xHarbour versions it's buggy and causes internal
memory corruption or accessing freed memory / GPF, f.e. I'm attaching
valgrind log from current xHarbour CVS version and tests/tstcstru1.prg.
Maybe someone in xHarbour can fix it.
I can port this code to Harbour quite fast and if someone is interested
then I can send it but I cannot fix these code as long as I will not
have known how it should work and how writable buffers should be shared
between C and [x]Harbour. I asked about it few developers who used
xHarbour C structures but it looks that they have no idea how it should
work and they are using "as is" believing that it will not crash the whole
application.

best regards,
Przemek



==26127== Memcheck, a memory error detector for x86-linux.
==26127== Copyright (C) 2002-2004, and GNU GPL'd, by Julian Seward et al.
==26127== Using valgrind-2.2.0, a program supervision framework for x86-linux.
==26127== Copyright (C) 2000-2004, and GNU GPL'd, by Julian Seward et al.
==26127== Valgrind library directory: /usr/lib/valgrind
==26127== Command line
==26127==    ./tstcstru1
==26127== Startup, with flags:
==26127==    --tool=memcheck
==26127==    --leak-check=yes
==26127==    --num-callers=16
==26127==    -v
==26127== Contents of /proc/version:
==26127==   Linux version 2.6.15 (root@localhost.localdomain) (gcc version 3.4.2 20041017 (Red Hat 3.4.2-6.fc3)) #8 PREEMPT Fri Jun 16 01:11:03 CEST 2006
==26127== Reading syms from /tmp/1/tstcstru1 (0x8048000)
==26127==    object doesn't have any debug info
==26127== Reading syms from /lib/ld-2.3.3.so (0x1B8E4000)
==26127==    object doesn't have any debug info
==26127== Reading syms from /usr/lib/valgrind/stage2 (0xB0000000)
==26127== Reading syms from /lib/ld-2.3.3.so (0xB1000000)
==26127==    object doesn't have any debug info
==26127== Reading syms from /usr/lib/valgrind/vgskin_memcheck.so (0xB7BC3000)
==26127== Reading syms from /lib/tls/libc-2.3.3.so (0xB7DEC000)
==26127==    object doesn't have any debug info
==26127== Reading syms from /lib/libdl-2.3.3.so (0xB7F14000)
==26127==    object doesn't have any debug info
==26127== Reading suppressions file: /usr/lib/valgrind/default.supp
==26127== REDIRECT soname:libc.so.6(__GI___errno_location) to soname:libpthread.so.0(__errno_location)
==26127== REDIRECT soname:libc.so.6(__errno_location) to soname:libpthread.so.0(__errno_location)
==26127== REDIRECT soname:libc.so.6(__GI___h_errno_location) to soname:libpthread.so.0(__h_errno_location)
==26127== REDIRECT soname:libc.so.6(__h_errno_location) to soname:libpthread.so.0(__h_errno_location)
==26127== REDIRECT soname:libc.so.6(__GI___res_state) to soname:libpthread.so.0(__res_state)
==26127== REDIRECT soname:libc.so.6(__res_state) to soname:libpthread.so.0(__res_state)
==26127== REDIRECT soname:libc.so.6(stpcpy) to *vgpreload_memcheck.so*(stpcpy)
==26127== REDIRECT soname:libc.so.6(strnlen) to *vgpreload_memcheck.so*(strnlen)
==26127== REDIRECT soname:ld-linux.so.2(stpcpy) to *vgpreload_memcheck.so*(stpcpy)
==26127== REDIRECT soname:ld-linux.so.2(strchr) to *vgpreload_memcheck.so*(strchr)
==26127== 
==26127== Reading syms from /usr/lib/valgrind/vg_inject.so (0x1B8FC000)
==26127== Reading syms from /usr/lib/valgrind/vgpreload_memcheck.so (0x1B901000)
==26127== TRANSLATE: 0x1B8F5A50 redirected to 0x1B90420C
==26127== Reading syms from /home/druzus/CVS/xharbour/out/lib/libxharbour-0.99.71.so (0x1B923000)
==26127== Reading syms from /lib/tls/libm-2.3.3.so (0x95C000)
==26127==    object doesn't have any debug info
==26127== Reading syms from /usr/local/lib/libslang.so.2.0.5 (0x1BC9B000)
==26127==    object doesn't have a symbol table
==26127==    object doesn't have any debug info
==26127== Reading syms from /usr/lib/libncurses.so.5.4 (0x58D8000)
==26127== Reading syms from /usr/X11R6/lib/libX11.so.6.2 (0x987000)
==26127==    object doesn't have a symbol table
==26127==    object doesn't have any debug info
==26127== Reading syms from /lib/tls/libc-2.3.3.so (0x833000)
==26127==    object doesn't have any debug info
==26127== Reading syms from /lib/libdl-2.3.3.so (0x981000)
==26127==    object doesn't have any debug info
==26127== TRANSLATE: 0x896160 redirected to 0x1B904A04
==26127== TRANSLATE: 0x896610 redirected to 0x1B905432
==26127== TRANSLATE: 0x1B8E47A0 redirected to 0x52BFF040
==26127== TRANSLATE: 0x894430 redirected to 0x1B904F30
==26127== Invalid read of size 4
==26127==    at 0x1BAD6E76: StructureToArray (arrayshb.c:1795)
==26127==    by 0x1BAD7122: HB_FUN_HB_STRUCTURETOARRAY (arrayshb.c:1999)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BADC81A: hb_vmExecute (hvm.c:1375)
==26127==    by 0x1BB19451: HB_FUN_DEVALUE (cstruct.c:665)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127==  Address 0x1BDC9728 is 0 bytes inside a block of size 32 free'd
==26127==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==26127==    by 0x1BAD7665: hb_itemClear (fastitem.c:163)
==26127==    by 0x1BAD7A34: hb_itemCopy (fastitem.c:428)
==26127==    by 0x1BAF68FC: hb_arraySet (arrays.c:462)
==26127==    by 0x1BAE1847: hb_vmExecute (hvm.c:1745)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127== 
==26127== Invalid read of size 1
==26127==    at 0x1BAD6F4E: StructureToArray (arrayshb.c:1787)
==26127==    by 0x1BAD7122: HB_FUN_HB_STRUCTURETOARRAY (arrayshb.c:1999)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BADC81A: hb_vmExecute (hvm.c:1375)
==26127==    by 0x1BB19451: HB_FUN_DEVALUE (cstruct.c:665)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127==  Address 0x1BDC972C is 4 bytes inside a block of size 32 free'd
==26127==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==26127==    by 0x1BAD7665: hb_itemClear (fastitem.c:163)
==26127==    by 0x1BAD7A34: hb_itemCopy (fastitem.c:428)
==26127==    by 0x1BAF68FC: hb_arraySet (arrays.c:462)
==26127==    by 0x1BAE1847: hb_vmExecute (hvm.c:1745)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127== 
==26127== Invalid read of size 4
==26127==    at 0x1BAD6F80: StructureToArray (arrayshb.c:1846)
==26127==    by 0x1BAD7122: HB_FUN_HB_STRUCTURETOARRAY (arrayshb.c:1999)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BADC81A: hb_vmExecute (hvm.c:1375)
==26127==    by 0x1BB19451: HB_FUN_DEVALUE (cstruct.c:665)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127==  Address 0x1BDC9730 is 8 bytes inside a block of size 32 free'd
==26127==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==26127==    by 0x1BAD7665: hb_itemClear (fastitem.c:163)
==26127==    by 0x1BAD7A34: hb_itemCopy (fastitem.c:428)
==26127==    by 0x1BAF68FC: hb_arraySet (arrays.c:462)
==26127==    by 0x1BAE1847: hb_vmExecute (hvm.c:1745)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127== 
==26127== Invalid read of size 4
==26127==    at 0x1BAD6EAF: StructureToArray (arrayshb.c:1876)
==26127==    by 0x1BAD7122: HB_FUN_HB_STRUCTURETOARRAY (arrayshb.c:1999)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BADC81A: hb_vmExecute (hvm.c:1375)
==26127==    by 0x1BB19451: HB_FUN_DEVALUE (cstruct.c:665)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127==  Address 0x1BDC9738 is 16 bytes inside a block of size 32 free'd
==26127==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==26127==    by 0x1BAD7665: hb_itemClear (fastitem.c:163)
==26127==    by 0x1BAD7A34: hb_itemCopy (fastitem.c:428)
==26127==    by 0x1BAF68FC: hb_arraySet (arrays.c:462)
==26127==    by 0x1BAE1847: hb_vmExecute (hvm.c:1745)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127== 
==26127== Invalid read of size 4
==26127==    at 0x1BAD6EB3: StructureToArray (arrayshb.c:1876)
==26127==    by 0x1BAD7122: HB_FUN_HB_STRUCTURETOARRAY (arrayshb.c:1999)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BADC81A: hb_vmExecute (hvm.c:1375)
==26127==    by 0x1BB19451: HB_FUN_DEVALUE (cstruct.c:665)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127==  Address 0x1BDC9734 is 12 bytes inside a block of size 32 free'd
==26127==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==26127==    by 0x1BAD7665: hb_itemClear (fastitem.c:163)
==26127==    by 0x1BAD7A34: hb_itemCopy (fastitem.c:428)
==26127==    by 0x1BAF68FC: hb_arraySet (arrays.c:462)
==26127==    by 0x1BAE1847: hb_vmExecute (hvm.c:1745)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127== 
==26127== Invalid read of size 4
==26127==    at 0x1BAD6EEC: StructureToArray (arrayshb.c:1855)
==26127==    by 0x1BAD7122: HB_FUN_HB_STRUCTURETOARRAY (arrayshb.c:1999)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BADC81A: hb_vmExecute (hvm.c:1375)
==26127==    by 0x1BB19451: HB_FUN_DEVALUE (cstruct.c:665)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BB0FB87: hb_objSendMsg (classes.c:2996)
==26127==    by 0x1BAD6E0F: StructureToArray (arrayshb.c:1948)
==26127==    by 0x1BAD7122: HB_FUN_HB_STRUCTURETOARRAY (arrayshb.c:1999)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BADC81A: hb_vmExecute (hvm.c:1375)
==26127==    by 0x1BB19451: HB_FUN_DEVALUE (cstruct.c:665)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==  Address 0x1BDC973E is 22 bytes inside a block of size 32 free'd
==26127==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==26127==    by 0x1BAD7665: hb_itemClear (fastitem.c:163)
==26127==    by 0x1BAD7A34: hb_itemCopy (fastitem.c:428)
==26127==    by 0x1BAF68FC: hb_arraySet (arrays.c:462)
==26127==    by 0x1BAE1847: hb_vmExecute (hvm.c:1745)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127== 
==26127== Invalid read of size 4
==26127==    at 0x1BAD6D50: StructureToArray (arrayshb.c:1913)
==26127==    by 0x1BAD7122: HB_FUN_HB_STRUCTURETOARRAY (arrayshb.c:1999)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BADC81A: hb_vmExecute (hvm.c:1375)
==26127==    by 0x1BB19451: HB_FUN_DEVALUE (cstruct.c:665)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127==  Address 0x1BDC9744 is 28 bytes inside a block of size 32 free'd
==26127==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==26127==    by 0x1BAD7665: hb_itemClear (fastitem.c:163)
==26127==    by 0x1BAD7A34: hb_itemCopy (fastitem.c:428)
==26127==    by 0x1BAF68FC: hb_arraySet (arrays.c:462)
==26127==    by 0x1BAE1847: hb_vmExecute (hvm.c:1745)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127== 
==26127== Invalid read of size 4
==26127==    at 0x1BAD6E97: StructureToArray (arrayshb.c:1802)
==26127==    by 0x1BAD7122: HB_FUN_HB_STRUCTURETOARRAY (arrayshb.c:1999)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BADC81A: hb_vmExecute (hvm.c:1375)
==26127==    by 0x1BB19451: HB_FUN_DEVALUE (cstruct.c:665)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127==  Address 0x1BDD9278 is 0 bytes inside a block of size 32 free'd
==26127==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==26127==    by 0x8048A5B: HB_FUN_DEMOTRANSFERFROMC (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BADF22E: hb_vmExecute (hvm.c:1420)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127== 
==26127== ERROR SUMMARY: 19 errors from 8 contexts (suppressed: 20 from 1)
==26127== 
==26127== 1 errors in context 1 of 8:
==26127== Invalid read of size 4
==26127==    at 0x1BAD6E97: StructureToArray (arrayshb.c:1802)
==26127==    by 0x1BAD7122: HB_FUN_HB_STRUCTURETOARRAY (arrayshb.c:1999)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BADC81A: hb_vmExecute (hvm.c:1375)
==26127==    by 0x1BB19451: HB_FUN_DEVALUE (cstruct.c:665)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127==  Address 0x1BDD9278 is 0 bytes inside a block of size 32 free'd
==26127==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==26127==    by 0x8048A5B: HB_FUN_DEMOTRANSFERFROMC (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BADF22E: hb_vmExecute (hvm.c:1420)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127== 
==26127== 2 errors in context 2 of 8:
==26127== Invalid read of size 4
==26127==    at 0x1BAD6D50: StructureToArray (arrayshb.c:1913)
==26127==    by 0x1BAD7122: HB_FUN_HB_STRUCTURETOARRAY (arrayshb.c:1999)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BADC81A: hb_vmExecute (hvm.c:1375)
==26127==    by 0x1BB19451: HB_FUN_DEVALUE (cstruct.c:665)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127==  Address 0x1BDC9744 is 28 bytes inside a block of size 32 free'd
==26127==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==26127==    by 0x1BAD7665: hb_itemClear (fastitem.c:163)
==26127==    by 0x1BAD7A34: hb_itemCopy (fastitem.c:428)
==26127==    by 0x1BAF68FC: hb_arraySet (arrays.c:462)
==26127==    by 0x1BAE1847: hb_vmExecute (hvm.c:1745)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127== 
==26127== 2 errors in context 3 of 8:
==26127== Invalid read of size 4
==26127==    at 0x1BAD6EEC: StructureToArray (arrayshb.c:1855)
==26127==    by 0x1BAD7122: HB_FUN_HB_STRUCTURETOARRAY (arrayshb.c:1999)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BADC81A: hb_vmExecute (hvm.c:1375)
==26127==    by 0x1BB19451: HB_FUN_DEVALUE (cstruct.c:665)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BB0FB87: hb_objSendMsg (classes.c:2996)
==26127==    by 0x1BAD6E0F: StructureToArray (arrayshb.c:1948)
==26127==    by 0x1BAD7122: HB_FUN_HB_STRUCTURETOARRAY (arrayshb.c:1999)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BADC81A: hb_vmExecute (hvm.c:1375)
==26127==    by 0x1BB19451: HB_FUN_DEVALUE (cstruct.c:665)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==  Address 0x1BDC973E is 22 bytes inside a block of size 32 free'd
==26127==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==26127==    by 0x1BAD7665: hb_itemClear (fastitem.c:163)
==26127==    by 0x1BAD7A34: hb_itemCopy (fastitem.c:428)
==26127==    by 0x1BAF68FC: hb_arraySet (arrays.c:462)
==26127==    by 0x1BAE1847: hb_vmExecute (hvm.c:1745)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127== 
==26127== 2 errors in context 4 of 8:
==26127== Invalid read of size 4
==26127==    at 0x1BAD6EB3: StructureToArray (arrayshb.c:1876)
==26127==    by 0x1BAD7122: HB_FUN_HB_STRUCTURETOARRAY (arrayshb.c:1999)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BADC81A: hb_vmExecute (hvm.c:1375)
==26127==    by 0x1BB19451: HB_FUN_DEVALUE (cstruct.c:665)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127==  Address 0x1BDC9734 is 12 bytes inside a block of size 32 free'd
==26127==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==26127==    by 0x1BAD7665: hb_itemClear (fastitem.c:163)
==26127==    by 0x1BAD7A34: hb_itemCopy (fastitem.c:428)
==26127==    by 0x1BAF68FC: hb_arraySet (arrays.c:462)
==26127==    by 0x1BAE1847: hb_vmExecute (hvm.c:1745)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127== 
==26127== 2 errors in context 5 of 8:
==26127== Invalid read of size 4
==26127==    at 0x1BAD6EAF: StructureToArray (arrayshb.c:1876)
==26127==    by 0x1BAD7122: HB_FUN_HB_STRUCTURETOARRAY (arrayshb.c:1999)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BADC81A: hb_vmExecute (hvm.c:1375)
==26127==    by 0x1BB19451: HB_FUN_DEVALUE (cstruct.c:665)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127==  Address 0x1BDC9738 is 16 bytes inside a block of size 32 free'd
==26127==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==26127==    by 0x1BAD7665: hb_itemClear (fastitem.c:163)
==26127==    by 0x1BAD7A34: hb_itemCopy (fastitem.c:428)
==26127==    by 0x1BAF68FC: hb_arraySet (arrays.c:462)
==26127==    by 0x1BAE1847: hb_vmExecute (hvm.c:1745)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127== 
==26127== 2 errors in context 6 of 8:
==26127== Invalid read of size 4
==26127==    at 0x1BAD6F80: StructureToArray (arrayshb.c:1846)
==26127==    by 0x1BAD7122: HB_FUN_HB_STRUCTURETOARRAY (arrayshb.c:1999)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BADC81A: hb_vmExecute (hvm.c:1375)
==26127==    by 0x1BB19451: HB_FUN_DEVALUE (cstruct.c:665)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127==  Address 0x1BDC9730 is 8 bytes inside a block of size 32 free'd
==26127==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==26127==    by 0x1BAD7665: hb_itemClear (fastitem.c:163)
==26127==    by 0x1BAD7A34: hb_itemCopy (fastitem.c:428)
==26127==    by 0x1BAF68FC: hb_arraySet (arrays.c:462)
==26127==    by 0x1BAE1847: hb_vmExecute (hvm.c:1745)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127== 
==26127== 2 errors in context 7 of 8:
==26127== Invalid read of size 4
==26127==    at 0x1BAD6E76: StructureToArray (arrayshb.c:1795)
==26127==    by 0x1BAD7122: HB_FUN_HB_STRUCTURETOARRAY (arrayshb.c:1999)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BADC81A: hb_vmExecute (hvm.c:1375)
==26127==    by 0x1BB19451: HB_FUN_DEVALUE (cstruct.c:665)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127==  Address 0x1BDC9728 is 0 bytes inside a block of size 32 free'd
==26127==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==26127==    by 0x1BAD7665: hb_itemClear (fastitem.c:163)
==26127==    by 0x1BAD7A34: hb_itemCopy (fastitem.c:428)
==26127==    by 0x1BAF68FC: hb_arraySet (arrays.c:462)
==26127==    by 0x1BAE1847: hb_vmExecute (hvm.c:1745)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127== 
==26127== 6 errors in context 8 of 8:
==26127== Invalid read of size 1
==26127==    at 0x1BAD6F4E: StructureToArray (arrayshb.c:1787)
==26127==    by 0x1BAD7122: HB_FUN_HB_STRUCTURETOARRAY (arrayshb.c:1999)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BADC81A: hb_vmExecute (hvm.c:1375)
==26127==    by 0x1BB19451: HB_FUN_DEVALUE (cstruct.c:665)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
==26127==  Address 0x1BDC972C is 4 bytes inside a block of size 32 free'd
==26127==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==26127==    by 0x1BAD7665: hb_itemClear (fastitem.c:163)
==26127==    by 0x1BAD7A34: hb_itemCopy (fastitem.c:428)
==26127==    by 0x1BAF68FC: hb_arraySet (arrays.c:462)
==26127==    by 0x1BAE1847: hb_vmExecute (hvm.c:1745)
==26127==    by 0x1BB19409: HB_FUN_BUFFER (cstruct.c:612)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x1BB19499: HB_FUN_POINTER (cstruct.c:709)
==26127==    by 0x1BAE32C5: hb_vmSend (hvm.c:7293)
==26127==    by 0x1BADF17C: hb_vmExecute (hvm.c:1778)
==26127==    by 0x804888A: HB_FUN_MAIN (in /tmp/1/tstcstru1)
==26127==    by 0x1BAE1C3D: hb_vmDo (hvm.c:6933)
==26127==    by 0x1BAF5886: main (mainstd.c:66)
--26127-- 
--26127-- supp:   20 Ugly strchr error in /lib/ld-2.3.3.so
==26127== 
==26127== IN SUMMARY: 19 errors from 8 contexts (suppressed: 20 from 1)
==26127== 
==26127== malloc/free: in use at exit: 2048 bytes in 1 blocks.
==26127== malloc/free: 8102 allocs, 8101 frees, 14531927 bytes allocated.
==26127== 
==26127== searching for pointers to 1 not-freed blocks.
==26127== checked 6995076 bytes.
==26127== 
==26127== LEAK SUMMARY:
==26127==    definitely lost: 0 bytes in 0 blocks.
==26127==    possibly lost:   0 bytes in 0 blocks.
==26127==    still reachable: 2048 bytes in 1 blocks.
==26127==         suppressed: 0 bytes in 0 blocks.
==26127== Reachable blocks (those to which a pointer was found) are not shown.
==26127== To see them, rerun with: --show-reachable=yes
--26127--     TT/TC: 0 tc sectors discarded.
--26127--            8254 tt_fast misses.
--26127-- translate: new     7863 (129577 -> 1774960; ratio 136:10)
--26127--            discard 1 (23 -> 320; ratio 139:10).
--26127-- chainings: 5821 chainings, 2 unchainings.
--26127--  dispatch: 5450000 jumps (bb entries); of them 369732 (6%) unchained.
--26127--            425/21951 major/minor sched events.
--26127-- reg-alloc: 1223 t-req-spill, 327111+8055 orig+spill uis,
--26127--            39204 total-reg-rank
--26127--    sanity: 361 cheap, 15 expensive checks.
--26127--    ccalls: 36890 C calls, 59% saves+restores avoided (129568 bytes)
--26127--            48876 args, avg 0.87 setup instrs each (12236 bytes)
--26127--            0% clear the stack (110463 bytes)
--26127--            11984 retvals, 29% of reg-reg movs avoided (6868 bytes)
From philb at philb.us  Wed Jul  4 01:01:08 2007
From: philb at philb.us (Phil Barnett)
Date: Wed Jul  4 01:01:11 2007
Subject: [Harbour] Harbour Repository Downloads
Message-ID: <200707040101.08518.philb@philb.us>


I have created a cron job that runs every three hours starting at 00:00 
Eastern.  It checks out the trunk branch and creates two files. The process 
takes about 1 minute, so you should be able to safely fetch these files at 
any time other than the top of the hour, where you risk having the existing 
file replaced during your fetch.

You can fetch the files with:

http://www.harbour-project.org/harbour-svn.zip
and
http://www.harbour-project.org/harbour-svn.tgz

Can someone please add these download locations to the web site with an 
explanation of what they provide.

I will work on backing up the subversion repository next.

Do you want me to make the repository that I have checked out readable over 
the web as a browsable directory of files?

-- 
Phil Barnett
AI4OF
SKCC #600
From info at fsgiudice.com  Wed Jul  4 01:42:56 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Jul  4 01:43:46 2007
Subject: [Harbour] [REPOST] how handling C structure in harbour ?
References: <024001c7ad2f$24003510$b400a8c0@ASUSFSG><004a01c7bd9b$1c4f2d40$b400a8c0@ASUSFSG>
	<20070704012730.GA26401@localhost.localdomain>
Message-ID: <000a01c7bdfe$2dc2ea40$b400a8c0@ASUSFSG>

Hi Przemek,

> The main problem with handling C structures in .prg code using xHarbour
> is that so far in all xHarbour versions it's buggy and causes internal
> memory corruption or accessing freed memory / GPF, f.e. I'm attaching
> valgrind log from current xHarbour CVS version and tests/tstcstru1.prg.
> Maybe someone in xHarbour can fix it.
> I can port this code to Harbour quite fast and if someone is interested
> then I can send it but I cannot fix these code as long as I will not
> have known how it should work and how writable buffers should be shared
> between C and [x]Harbour. I asked about it few developers who used
> xHarbour C structures but it looks that they have no idea how it should
> work and they are using "as is" believing that it will not crash the whole
> application.
>

thank you for reply,
if you can find a while to port it I will may test.

Best Regards

Francesco
From soporte at dsgsoftware.com  Wed Jul  4 03:40:41 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Wed Jul  4 03:42:21 2007
Subject: [Harbour] Preprocessor issue ?
Message-ID: <000f01c7be0e$c021f920$1700000a@PcJuanxp>

Przemek,

I want to make this translate :

#xtranslate hb_checksum( <x> ) => checksum( <x> )

but this line of code doesn't suffer any change:

cCrcDll := Encrypt( PadR( Abs( Int( hb_CheckSum( MemoRead( ::cPath + '\' + 
If( ::lDongleProt, DD_DLLNAME, CC_DLLNAME ) ), N_KEY ) ) ), 10 ), C_KEY )

Is it a normal behavior ?

Best regards
Juan 

From lorenzo.fiorini at gmail.com  Wed Jul  4 04:00:52 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jul  4 04:00:56 2007
Subject: [Harbour] How to have 5 [x]harbour versions at the same time
Message-ID: <9257026e0707040100g3b588a01ybe67988e735a193@mail.gmail.com>

I need to build stable harbour apps "on demand" ( actually I use beta3
) and do tests with xharbour and devel code.

Actually I've 5 dirs in my home:
harbour_stable, harbour_devel, mingw32-harbour_stable, xharbour_stable
and xharbour_devel.

I switch between them using aliases in .bashrc that set envvar like
HB_NAME, HB_VERSION, HB_INSTALL_PREFIX and HB_CFG_FILE and with some
scripts that add $HB_NAME$HB_VERSION to path.

One problem is libharbour.so which can point to 0.99.3so or 1.1.1.so
depending on the sequence of the installs, so I need to be sure to run
a "stable" install before building stable apps.

Also since in harbour.cfg there is the include dir I need also 5
different .cfg files.
How can I replace $(HB_INC_INSTALL) with actual envvar value in line
182 of gencobj.c?
Is there in harbour sth similar to strtran to get the result of
strtran( "$(HB_INC_INSTALL)", getenv( "HB_INC_INSTALL" ) )?

There must be a better way to do it. Any suggestion?

best regards,
Lorenzo
From druzus at priv.onet.pl  Wed Jul  4 05:13:28 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul  4 05:14:04 2007
Subject: [Harbour] Preprocessor issue ?
In-Reply-To: <000f01c7be0e$c021f920$1700000a@PcJuanxp>
References: <000f01c7be0e$c021f920$1700000a@PcJuanxp>
Message-ID: <20070704091328.GA17907@localhost.localdomain>

On Wed, 04 Jul 2007, Juan G?lvez wrote:
> Przemek,
> I want to make this translate :
> #xtranslate hb_checksum( <x> ) => checksum( <x> )

hb_checksum() in xHarbour calculates adler32 value so right translation
is:
    #xtranslate hb_checksum( [<x,...>] ) => hb_adler( <x> )

> but this line of code doesn't suffer any change:
> cCrcDll := Encrypt( PadR( Abs( Int( hb_CheckSum( MemoRead( ::cPath + '\' + 
> If( ::lDongleProt, DD_DLLNAME, CC_DLLNAME ) ), N_KEY ) ) ), 10 ), C_KEY )
> Is it a normal behavior ?

Yes, it uses N_KEY as second parameter of hb_checksum() which is starting
check sum value. You rule translates only these hb_checksum() calls which
uses exactly one parameter so cannot translate this code.

BTW I do not know what Encrypt() function does - AFAIR it does not exist
in [x]Harbour.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jul  4 05:27:02 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul  4 05:27:38 2007
Subject: [Harbour] How to have 5 [x]harbour versions at the same time
In-Reply-To: <9257026e0707040100g3b588a01ybe67988e735a193@mail.gmail.com>
References: <9257026e0707040100g3b588a01ybe67988e735a193@mail.gmail.com>
Message-ID: <20070704092702.GB17907@localhost.localdomain>

On Wed, 04 Jul 2007, Lorenzo Fiorini wrote:
> I need to build stable harbour apps "on demand" ( actually I use beta3
> ) and do tests with xharbour and devel code.
> Actually I've 5 dirs in my home:
> harbour_stable, harbour_devel, mingw32-harbour_stable, xharbour_stable
> and xharbour_devel.
> I switch between them using aliases in .bashrc that set envvar like
> HB_NAME, HB_VERSION, HB_INSTALL_PREFIX and HB_CFG_FILE and with some
> scripts that add $HB_NAME$HB_VERSION to path.

It's enough to have separate copy of hb* scripts for each of them
in different directory and set valid path for them. Though personally
I prefer using some prefixes, f.e. zhbcmp, zhbmk, zhblnk, ... for old
Harbour version, hbcmpx, hbmkx, hblnkx, ... for MinGW cross build,
bhbcmp, bhbmk, bhblnk, ... for BETA builds, xhbcmp, xhbmk, xhblnk, ...
for xHarbour, etc. so I do not have to make any switches or path
modifications.

> One problem is libharbour.so which can point to 0.99.3so or 1.1.1.so
> depending on the sequence of the installs, so I need to be sure to run
> a "stable" install before building stable apps.

Set in hb* scripts _EXACT_ shared library version, f.e.: -lharbour-1.1.1
instead of -lharbour. Now when we have two branches I think it's time
to add version number to default hb* scripts to avoid possible problems.
I'll do that ASAP.

> Also since in harbour.cfg there is the include dir I need also 5
> different .cfg files.
> How can I replace $(HB_INC_INSTALL) with actual envvar value in line
> 182 of gencobj.c?
> Is there in harbour sth similar to strtran to get the result of
> strtran( "$(HB_INC_INSTALL)", getenv( "HB_INC_INSTALL" ) )?

With hb* scripts you do not need harbour.cfg anyhow if you want we can
add support for substituting environment variables when this file is
parsed by compiler. What syntax you prefer:
1. SHELL like:
    $NAME
    ${NAME}
2. GNU make like:
    $(NAME)
3. RPM like:
    %{NAME}
4. DOS like:
    %NAME%

Best regards,
Przemek
From lorenzo.fiorini at gmail.com  Wed Jul  4 05:29:45 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jul  4 05:29:48 2007
Subject: [Harbour] Memory leak compiling contrib/tip/thtml.prg
Message-ID: <9257026e0707040229s4a809ef0l2a49c5098eed712@mail.gmail.com>

Just for information:

../../../../source/main/linux/gcc/harbour ../../thtml.prg
-DHB_NO_READDBG -DHB_EXT_INKEY -DNODLL -DHB_COMPAT_XHB
-DHB_PP_MULTILINE_STRING -n -q0 -w -es2 -gc0 -I../../
-I../../../../include

----------------------------------------
Total memory allocated: 338509 bytes (16279 blocks)
WARNING! Memory allocated but not released: 60 bytes (3 blocks)
harbour.c:326: HB_TR_ERROR Block 1 0x9d4f480 (size 20)
"\@7\01\00\00\00\00\00\00\00\00\00\00\04\00\0@\00\15\40\00\00"
harbour.c:326: HB_TR_ERROR Block 2 0x9d35b10 (size 20)
"\F3\00\00\00\00\00\00\00\00\00\00\00\04\00\0C\00\15\40\00\00"
harbour.c:326: HB_TR_ERROR Block 3 0x9d34540 (size 20)
"\D6\03\00\00\00\00\00\00\00\00\00\00\04\00\0F\00\15\40\00\00"

best regards,
Lorenzo
From mbelgrano at deltain.it  Wed Jul  4 05:44:42 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Jul  4 05:45:20 2007
Subject: R: R: R: [Harbour] hbmake file indipendent from compiler
In-Reply-To: <4B2613E0-F71F-4E78-BE5A-79E90007B19A@syenar.hu>
References: <AFB948164110ED43B5EB849E8DEEF03809A6E2@SRV02.deltain.net><20070703145800.GA5594@localhost.localdomain><AFB948164110ED43B5EB849E8DEEF03809A6E5@SRV02.deltain.net><20070703170101.GB5785@localhost.localdomain><AFB948164110ED43B5EB849E8DEEF03809A6EA@SRV02.deltain.net>
	<4B2613E0-F71F-4E78-BE5A-79E90007B19A@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A6F2@SRV02.deltain.net>

I am aivable for help X/harbour but not have c knowledge and most of My program are made with gtwvw
I am using hbmake with bcc55
Also the xharbour version is not dependent from c compiler
Imo a standard structure for made a prg project must be done like xpj for xbase++ or xbp for xharbour.com or vbp for visual basicI am thinking to a standard project like follow
SO also a visual version  of harbour (ide)  will be based on same structure
This new version of make Will be also based on hbcmp,bclnk ecc

[PROJECT]
    DEBUG         = yes
    VERSION       = 2.0
    RC_COMPILE    = arc
    RC_FLAGS      = /v
    OBJ_DIR       = OBJ
    RECURSE= NO
    COMPRESS = NO
    WARNINGLEVEL =  0
    USERDEFINE = EURO __GTWVT__
    USERINCLUDE =
    GUI = YES
    MT = NO
    OBJ = objh
    COMPILE_FLAGS =  -DEURO -D__GTWVT__  -m  -w0
    CFLAG1 =  -OS $(CFLAGS) -d -L$(HB_DIR)\lib
    LINK_FLAGS    =   
    PROJECT = TEST.exe $(PR)


[TEST.EXE]
// $START
    ARCABI.CH
    MY.RES
    MYLIB.LIB
    TEST.PRG
    TEST1.PRG,/B
    TEST1.PRG,/W
    lang.lib 
    vm.lib 
    rtl.lib 
    rdd.lib 
    macro.lib 
    pp.lib 
    dbfntx.lib 
    bmdbfcdx.lib 
    dbfcdx.lib 
    dbffpt.lib  
    hbsix.lib 
    common.lib 
    gtwvt.lib 
    codepage.lib 
    ct.lib 
    tip.lib 
    rddads.lib 
    ace32.lib  
    delta4h.lib 
    wvtgui.lib
// $END

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Szak?ts Viktor
Inviato: marted? 3 luglio 2007 20.07
A: Harbour Project Main Developer List.
Oggetto: Re: R: R: [Harbour] hbmake file indipendent from compiler

Hi Massimo,

Watching the command-line help of thexhb version of
hbmake, it seems to have some of those features you
want to see.

Since the author of hbmake went to xhb long ago,
we could sync hbmake with the version currently in xhb;
after fixing the warnings and xhb specific stuff in it and
keeping our existing fixes of course.

It would be great if you could help to make the
xhb version to compile under Harbour (without
"hbcompat.ch" possibly). I see "IN" usage mostly.

Brgds,
Viktor


From lorenzo.fiorini at gmail.com  Wed Jul  4 05:51:18 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jul  4 05:51:22 2007
Subject: [Harbour] How to have 5 [x]harbour versions at the same time
In-Reply-To: <20070704092702.GB17907@localhost.localdomain>
References: <9257026e0707040100g3b588a01ybe67988e735a193@mail.gmail.com>
	<20070704092702.GB17907@localhost.localdomain>
Message-ID: <9257026e0707040251i718ee9d6y117e023dd2a43eaa@mail.gmail.com>

On 7/4/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> Set in hb* scripts _EXACT_ shared library version, f.e.: -lharbour-1.1.1
> instead of -lharbour. Now when we have two branches I think it's time
> to add version number to default hb* scripts to avoid possible problems.
> I'll do that ASAP.

Many thanks. I'd like to use only hb* scripts but I also maintain
C53B/FiveWin16 apps and I need to build them in dosemu.
I hope I'll find the time and the resources to move to GTK so I can
unify Windows and Linux builds.

> With hb* scripts you do not need harbour.cfg anyhow if you want we can
> add support for substituting environment variables when this file is
> parsed by compiler. What syntax you prefer:

I vote for $(NAME)

best regards,
Lorenzo
From druzus at priv.onet.pl  Wed Jul  4 05:50:45 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul  4 05:51:22 2007
Subject: [Harbour] [REPOST] how handling C structure in harbour ?
In-Reply-To: <000a01c7bdfe$2dc2ea40$b400a8c0@ASUSFSG>
References: <20070704012730.GA26401@localhost.localdomain>
	<000a01c7bdfe$2dc2ea40$b400a8c0@ASUSFSG>
Message-ID: <20070704095045.GC17907@localhost.localdomain>

On Wed, 04 Jul 2007, Francesco Saverio Giudice wrote:
> >The main problem with handling C structures in .prg code using xHarbour
> >is that so far in all xHarbour versions it's buggy and causes internal
> >memory corruption or accessing freed memory / GPF, f.e. I'm attaching
> >valgrind log from current xHarbour CVS version and tests/tstcstru1.prg.
> >Maybe someone in xHarbour can fix it.
> >I can port this code to Harbour quite fast and if someone is interested
> >then I can send it but I cannot fix these code as long as I will not
> >have known how it should work and how writable buffers should be shared
> >between C and [x]Harbour. I asked about it few developers who used
> >xHarbour C structures but it looks that they have no idea how it should
> >work and they are using "as is" believing that it will not crash the whole
> >application.
> thank you for reply,
> if you can find a while to port it I will may test.

In attachment but I cleaned only few typos in xHarbour code so the problems
existing in xHarbour version are inherited.
Use it with current DEVEL branch.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jul  4 05:51:29 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul  4 05:52:07 2007
Subject: [Harbour] [REPOST] how handling C structure in harbour ?
In-Reply-To: <20070704095045.GC17907@localhost.localdomain>
References: <20070704012730.GA26401@localhost.localdomain>
	<000a01c7bdfe$2dc2ea40$b400a8c0@ASUSFSG>
	<20070704095045.GC17907@localhost.localdomain>
Message-ID: <20070704095129.GD17907@localhost.localdomain>

On Wed, 04 Jul 2007, Przemyslaw Czerpak wrote:
> In attachment but I cleaned only few typos in xHarbour code so the problems
> existing in xHarbour version are inherited.
> Use it with current DEVEL branch.

I forgot to attach the code.

best regards,
Przemek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cstruct.tgz
Type: application/x-gzip
Size: 12425 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070704/76b95dfa/cstruct.tgz
From soporte at dsgsoftware.com  Wed Jul  4 05:57:27 2007
From: soporte at dsgsoftware.com (=?iso-8859-2?Q?Juan_G=E1lvez?=)
Date: Wed Jul  4 06:00:25 2007
Subject: [Harbour] Preprocessor issue ?
References: <000f01c7be0e$c021f920$1700000a@PcJuanxp>
	<20070704091328.GA17907@localhost.localdomain>
Message-ID: <005401c7be22$0e4ecfc0$1700000a@PcJuanxp>

Przemek,

> hb_checksum() in xHarbour calculates adler32 value so right translation
> is:
>    #xtranslate hb_checksum( [<x,...>] ) => hb_adler( <x> )

Many thanks. I don't know it :-)

> Yes, it uses N_KEY as second parameter of hb_checksum() which is starting
> check sum value. You rule translates only these hb_checksum() calls which
> uses exactly one parameter so cannot translate this code.

I'm sorry I had not noticed and I didn't remember the second parameter.

> BTW I do not know what Encrypt() function does - AFAIR it does not exist
> in [x]Harbour.

It's a FWH function. I know xHarbour has HB_Crypt() / HB_Decrypt() but I 
think Harbour doesn't have them.

Best regards
Juan 

From rafa at tesipro.com  Wed Jul  4 06:02:12 2007
From: rafa at tesipro.com (Rafa (TESIPRO))
Date: Wed Jul  4 06:02:16 2007
Subject: [Harbour] Possible bug in #ifdef ?
In-Reply-To: <20070703165508.GA5785@localhost.localdomain>
References: <468A6C8F.10405@tesipro.com>
	<20070703165508.GA5785@localhost.localdomain>
Message-ID: <468B7024.6030903@tesipro.com>

You are right, I I did not saw the failure, because xHarbour did not 
give any type of error.

Thank you!
Rafa Carmona

From dmacias at mail.udg.mx  Wed Jul  4 06:14:24 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Jul  4 06:14:30 2007
Subject: [Harbour] Re: Compiling output
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <468B7300.3060608@mail.udg.mx>

Przemek:

 >> Older xHarbour does not show this counting
 >> Real sgd0.prg have 957 lines, 3 functions, 0 procedures
 >> sgd0.ppo for Harbour have 1415 lines, 3 functions, 0 procedures
 >> Recent Harbour output show:
 >> Lines 4816, Functions/Procedures 4
 >> 4816 does not match with any calculation, and 4 is wrong

 >4816 is total number of all preprocessed lines and 4 is total number of
 >functions - you probably compiled your code without -n switch and in >such
 >case Clipper and [x]Harbour create one function with the same name as
 >compiled file.

I included in message what compile line was used, and it include -n 
switch,. Anycase, Harbour(4 func/proc) is wrong and 
Clipper(3)/xHarbour(3) are correct, and 4816 does not match with anything

 >> Harbour sequence is strange, it is smaller sometimes ( perhaps include
 >> files ? ):
 >> 100, 200, 300, 100, 100, 100, 200, 300, 400, 500, 600, 700, 800, 100,
 >> 200, 300, 400, 500, 600, 700, 800, 900

 >Sorry but I do not see anything strange in the above. Would you like to
 >change sth?

It is increasing and then decrease, examples: 300, 100, ... 800, 100, ...
As I said, perhaps include files ?

To exclude side effects of "own std.ch", include files, length of .prg 
file, ..., I tested with this ONE line program (test1.prg):

FUNCTION hello ; QOUT("HELLO1") ; QOUT("HELLO2") ; RETURN NIL

and results are interesting. See each case depending of compile line:
( note that no macro define are used in this one line program, and how 
Harbour output change by case, and xHarbour not )


Win32, BCC55
Harbour Beta build 0.99-3 Intl.
xHarbour Compiler build 0.99.71 (SimpLex)

------------------------------
%HB_BIN%harbour test1.prg             -i%HB_INC% -m -n -a -ustdcha.ch 
-DHARBOUR -DHBCOMM -DNOADS %HB_OS% > test1.dat
Harbour: Lines 2256, Functions/Procedures 1
xHarbour: Lines 3, Functions/Procedures 1

( stdcha.ch have 2104 lines, far away of 2256 )

------------------------------
%HB_BIN%harbour test1.prg             -i%HB_INC% -m -n -a -DHARBOUR 
-DHBCOMM -DNOADS %HB_OS% >> test1.dat
Harbour: Lines 18, Functions/Procedures 1
xHarbour: Lines 3, Functions/Procedures 1

( program file 1 line, far away of 18 )

------------------------------
%HB_BIN%harbour test1.prg             -i%HB_INC% -m -n -a -DHBCOMM 
-DNOADS %HB_OS% >> test1.dat
Harbour: Lines 17, Functions/Procedures 1
xHarbour: Lines 3, Functions/Procedures 1

------------------------------
%HB_BIN%harbour test1.prg             -i%HB_INC% -m -n -a -DNOADS 
%HB_OS% >> test1.dat
Harbour: Lines 16, Functions/Procedures 1
xHarbour: Lines 3, Functions/Procedures 1

------------------------------
%HB_BIN%harbour test1.prg             -i%HB_INC% -m -n -a %HB_OS% >> 
test1.dat
Harbour: Lines 15, Functions/Procedures 1
xHarbour: Lines 3, Functions/Procedures 1

------------------------------
%HB_BIN%harbour test1.prg             -i%HB_INC% -m -n -a >> test1.dat
Harbour: Lines 14, Functions/Procedures 1
xHarbour: Lines 3, Functions/Procedures 1

David Macias


From info at fsgiudice.com  Wed Jul  4 06:19:01 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Jul  4 06:19:46 2007
Subject: [Harbour] [REPOST] how handling C structure in harbour ?
References: <20070704012730.GA26401@localhost.localdomain><000a01c7bdfe$2dc2ea40$b400a8c0@ASUSFSG><20070704095045.GC17907@localhost.localdomain>
	<20070704095129.GD17907@localhost.localdomain>
Message-ID: <006801c7be24$bed33000$b400a8c0@ASUSFSG>

Przemek,

----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Wednesday, July 04, 2007 11:51 AM
Subject: Re: [Harbour] [REPOST] how handling C structure in harbour ?


> On Wed, 04 Jul 2007, Przemyslaw Czerpak wrote:
>> In attachment but I cleaned only few typos in xHarbour code so the 
>> problems
>> existing in xHarbour version are inherited.
>> Use it with current DEVEL branch.
>
> I forgot to attach the code.
>

many thanks, I will try and will inform you of results.

Best Regards

Francesco
From rafa at tesipro.com  Wed Jul  4 06:48:03 2007
From: rafa at tesipro.com (Rafa (TESIPRO))
Date: Wed Jul  4 06:47:51 2007
Subject: [Harbour] Possible bug in #ifdef ?
In-Reply-To: <468B7024.6030903@tesipro.com>
References: <468A6C8F.10405@tesipro.com>	<20070703165508.GA5785@localhost.localdomain>
	<468B7024.6030903@tesipro.com>
Message-ID: <468B7AE3.1020408@tesipro.com>

This test  CORRECT!

#define GTK_MAJOR_VERSION    (2)
#define GTK_MINOR_VERSION    (10)
#define GTK_MICRO_VERSION    (6)

#define GTK_CHECK_VERSION( major,minor,micro ) ( GTK_MAJOR_VERSION > 
(major) .or. (GTK_MAJOR_VERSION == (major) .and. GTK_MINOR_VERSION > 
(minor)) .or. (GTK_MAJOR_VERSION == (major) .and. GTK_MINOR_VERSION == 
(minor) .and.  GTK_MICRO_VERSION >= (micro)))

Function Main()

#if GTK_CHECK_VERSION( 2,10,0 )
  #stdout 2,10
#else
  #stdout Version < 2,10
#endif

Return nil

Thank you Prezmeck!!


From lorenzo.fiorini at gmail.com  Wed Jul  4 06:58:47 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jul  4 06:58:50 2007
Subject: [Harbour] Tip lib
In-Reply-To: <20070702121124.GB15956@localhost.localdomain>
References: <3FBFDEBF-0384-47DE-A944-0C50CD7A2248@syenar.hu>
	<002301c7ba5c$aa975330$1700000a@PcJuanxp>
	<9257026e0706290845x4650683dg2d04c4fae70cf481@mail.gmail.com>
	<9257026e0706290926i7a03487ax4c3828250cccbb8d@mail.gmail.com>
	<20070630120233.GA18472@localhost.localdomain>
	<20070630122459.GC18472@localhost.localdomain>
	<9257026e0706301459i4c597d5dj69dee875ea43ff2d@mail.gmail.com>
	<20070701094307.GA13553@localhost.localdomain>
	<9257026e0707020224t6303c8b3t26c23e012125bed1@mail.gmail.com>
	<20070702121124.GB15956@localhost.localdomain>
Message-ID: <9257026e0707040358m76de8a3akda4e11e273a255dc@mail.gmail.com>

On 7/2/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> Thank you - I committed the modifications - if sth will be wrong
> then we can revert them and in such way more people can make tests.

Simply changing tipClient() to tipClientFtp() and TipClientSmtp() I
got my apps working as beta3.

best regards,
Lorenzo
From druzus at priv.onet.pl  Wed Jul  4 07:01:27 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul  4 07:02:02 2007
Subject: [Harbour] Memory leak compiling contrib/tip/thtml.prg
In-Reply-To: <9257026e0707040229s4a809ef0l2a49c5098eed712@mail.gmail.com>
References: <9257026e0707040229s4a809ef0l2a49c5098eed712@mail.gmail.com>
Message-ID: <20070704110127.GA21980@localhost.localdomain>

On Wed, 04 Jul 2007, Lorenzo Fiorini wrote:
> Just for information:
> ../../../../source/main/linux/gcc/harbour ../../thtml.prg
> -DHB_NO_READDBG -DHB_EXT_INKEY -DNODLL -DHB_COMPAT_XHB
> -DHB_PP_MULTILINE_STRING -n -q0 -w -es2 -gc0 -I../../
> -I../../../../include
> ----------------------------------------
> Total memory allocated: 338509 bytes (16279 blocks)
> WARNING! Memory allocated but not released: 60 bytes (3 blocks)
> harbour.c:326: HB_TR_ERROR Block 1 0x9d4f480 (size 20)
> "\@7\01\00\00\00\00\00\00\00\00\00\00\04\00\0@\00\15\40\00\00"
> harbour.c:326: HB_TR_ERROR Block 2 0x9d35b10 (size 20)
> "\F3\00\00\00\00\00\00\00\00\00\00\00\04\00\0C\00\15\40\00\00"
> harbour.c:326: HB_TR_ERROR Block 3 0x9d34540 (size 20)
> "\D6\03\00\00\00\00\00\00\00\00\00\00\04\00\0F\00\15\40\00\00"

Many thanks for information.
It's a memory leak, some others leak possible and bug which has to be fixed
(Inside SWITCH/CASE.../END LOOP can be used and it causes dummy loop).
I'll fix all of them ASAP.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Wed Jul  4 07:07:38 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jul  4 07:07:41 2007
Subject: [Harbour] What about beta3? Any plan for beta4 or 1.0?
Message-ID: <9257026e0707040407h5afdcd37o2eacce424f78040b@mail.gmail.com>

Just to start the discussion, I'm using beta3+diffs in production
since weeks and it is stable and fast.

Any feedback from beta testers?

Any comment?

best regards,
Lorenzo
From miguelangel at marchuet.net  Wed Jul  4 07:54:23 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Jul  4 07:57:36 2007
Subject: [Harbour] 2007-07-04 13:45 UTC+0100 Miguel Angel Marchuet
	(miguelangel/at/marchuet.net)
Message-ID: <468B8A6F.3020701@marchuet.net>

2007-07-04 13:45 UTC+0100 Miguel Angel Marchuet (miguelangel/at/marchuet.net)
  * source/rdd/dbfcdx/dbfcdx1.c
    * removed unnecesary code

I return of my vacancies.

Best regards,
Miguel Angel Marchuet
From druzus at priv.onet.pl  Wed Jul  4 08:08:45 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul  4 08:09:20 2007
Subject: [Harbour] Re: Compiling output
In-Reply-To: <468B7300.3060608@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<468B7300.3060608@mail.udg.mx>
Message-ID: <20070704120845.GA22937@localhost.localdomain>

On Wed, 04 Jul 2007, David Arturo Macias Corona wrote:
> I included in message what compile line was used, and it include -n 
> switch,. Anycase, Harbour(4 func/proc) is wrong and 
> Clipper(3)/xHarbour(3) are correct, and 4816 does not match with anything

Please send .prg/.ch files to me and I'll tell you why is 4 instead of 3
functions. It may be ANNOUNCE or some DO statement or sth like that.
If I'll look at the source code then I'll be able to answer you at once
without guessing.

> It is increasing and then decrease, examples: 300, 100, ... 800, 100, ...
> As I said, perhaps include files ?

Yes, AFAIK just like in Clipper.

> To exclude side effects of "own std.ch", include files, length of .prg 
> file, ..., I tested with this ONE line program (test1.prg):
> FUNCTION hello ; QOUT("HELLO1") ; QOUT("HELLO2") ; RETURN NIL
> and results are interesting. See each case depending of compile line:
> ( note that no macro define are used in this one line program, and how 
> Harbour output change by case, and xHarbour not )

It's the total number of preprocessed lines not lines in your .prg code
which includes also command lines -D... macros and some other macros
added dynamically by compiler like __DATE__, __TIME__, __PLATFORM__*,
etc. If you do not like it then I can change it and reset this counter
to 0 after standard rules initialization and before preprocessing first
.prg file.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jul  4 08:11:21 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul  4 08:11:56 2007
Subject: [Harbour] Tip lib
In-Reply-To: <9257026e0707040358m76de8a3akda4e11e273a255dc@mail.gmail.com>
References: <002301c7ba5c$aa975330$1700000a@PcJuanxp>
	<9257026e0706290845x4650683dg2d04c4fae70cf481@mail.gmail.com>
	<9257026e0706290926i7a03487ax4c3828250cccbb8d@mail.gmail.com>
	<20070630120233.GA18472@localhost.localdomain>
	<20070630122459.GC18472@localhost.localdomain>
	<9257026e0706301459i4c597d5dj69dee875ea43ff2d@mail.gmail.com>
	<20070701094307.GA13553@localhost.localdomain>
	<9257026e0707020224t6303c8b3t26c23e012125bed1@mail.gmail.com>
	<20070702121124.GB15956@localhost.localdomain>
	<9257026e0707040358m76de8a3akda4e11e273a255dc@mail.gmail.com>
Message-ID: <20070704121121.GB22937@localhost.localdomain>

On Wed, 04 Jul 2007, Lorenzo Fiorini wrote:
> >Thank you - I committed the modifications - if sth will be wrong
> >then we can revert them and in such way more people can make tests.
> Simply changing tipClient() to tipClientFtp() and TipClientSmtp() I
> got my apps working as beta3.

Thanks for confirmation.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jul  4 08:56:03 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul  4 08:56:39 2007
Subject: [Harbour] Preprocessor issue ?
In-Reply-To: <005401c7be22$0e4ecfc0$1700000a@PcJuanxp>
References: <000f01c7be0e$c021f920$1700000a@PcJuanxp>
	<20070704091328.GA17907@localhost.localdomain>
	<005401c7be22$0e4ecfc0$1700000a@PcJuanxp>
Message-ID: <20070704125603.GA28793@localhost.localdomain>

On Wed, 04 Jul 2007, Juan G?lvez wrote:
> >BTW I do not know what Encrypt() function does - AFAIR it does not exist
> >in [x]Harbour.
> It's a FWH function. I know xHarbour has HB_Crypt() / HB_Decrypt() but I 
> think Harbour doesn't have them.

Both compilers have SIX3 compatible: Sx_Encrypt()/Sx_Decrypt()

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jul  4 08:56:25 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul  4 08:57:00 2007
Subject: [Harbour] 2007-07-04 13:45 UTC+0100 Miguel Angel Marchuet
	(miguelangel/at/marchuet.net)
In-Reply-To: <468B8A6F.3020701@marchuet.net>
References: <468B8A6F.3020701@marchuet.net>
Message-ID: <20070704125625.GB28793@localhost.localdomain>

On Wed, 04 Jul 2007, Miguel Angel Marchuet wrote:
> 2007-07-04 13:45 UTC+0100 Miguel Angel Marchuet (miguelangel/at/marchuet.net)
>   * source/rdd/dbfcdx/dbfcdx1.c
>     * removed unnecesary code

Thank you.

best regards,
Przemek
From philb at philb.us  Wed Jul  4 09:08:06 2007
From: philb at philb.us (Phil Barnett)
Date: Wed Jul  4 09:08:09 2007
Subject: [Harbour] What about beta3? Any plan for beta4 or 1.0?
In-Reply-To: <9257026e0707040407h5afdcd37o2eacce424f78040b@mail.gmail.com>
References: <9257026e0707040407h5afdcd37o2eacce424f78040b@mail.gmail.com>
Message-ID: <200707040908.06253.philb@philb.us>

On Wednesday 04 July 2007 07:07, Lorenzo Fiorini wrote:
> Just to start the discussion, I'm using beta3+diffs in production
> since weeks and it is stable and fast.
>
> Any feedback from beta testers?

So far, there have been very few bug reports in Beta 3.

Is anyone having any problems?

-- 
Phil Barnett
AI4OF
SKCC #600
From druzus at priv.onet.pl  Wed Jul  4 09:13:43 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul  4 09:14:22 2007
Subject: [Harbour] ChangeLog 2007-07-04 15:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070704131343.GC28793@localhost.localdomain>

2007-07-04 15:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcompdf.h
  * harbour/source/compiler/harbour.yyc
  * harbour/source/compiler/harbour.y
    ! fixed using LOOP inside SWITCH/CASE.../END statement
    ! fixed possible memory leeks when compile time error appear
      with some unfinished LOOP statements
    ! do not push unnecessary NIL on HVM stack when SWITCH/CASE.../END
      statement were used without OTHERWISE clause

  * harbour/source/pp/ppcore.c
    ! do not calculate last line when it does not contain any character
    * clear line number counter after preprocessing standard definitions/
      rules - I hope it will make David happy ;-)

best regards,
Przemek
From soporte at dsgsoftware.com  Wed Jul  4 11:04:52 2007
From: soporte at dsgsoftware.com (=?ISO-8859-2?Q?Juan_G=E1lvez?=)
Date: Wed Jul  4 11:05:32 2007
Subject: [Harbour] Preprocessor issue ?
References: <000f01c7be0e$c021f920$1700000a@PcJuanxp><20070704091328.GA17907@localhost.localdomain><005401c7be22$0e4ecfc0$1700000a@PcJuanxp>
	<20070704125603.GA28793@localhost.localdomain>
Message-ID: <002e01c7be4c$ae5cd5a0$1700000a@PcJuanxp>

Przemek,

> Both compilers have SIX3 compatible: Sx_Encrypt()/Sx_Decrypt()

Thanks. I'll keep it in mind.

Best regards
Juan
From druzus at priv.onet.pl  Wed Jul  4 11:41:13 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul  4 11:41:48 2007
Subject: [Harbour] ChangeLog 2007-07-04 17:40 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070704154113.GA21446@localhost.localdomain>

2007-07-04 17:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/compiler/gencobj.c
    + added support for environment variable substitution in harbour.cfg
      file, envvar should be given as $(<name>) f.e.: $(HB_INC_INSTALL)

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jul  4 11:44:42 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul  4 11:45:18 2007
Subject: [Harbour] Re: ChangeLog 2007-07-03 21:40 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <426BC783-58FD-452C-9176-9F834BA101A5@syenar.hu>
References: <20070703194009.GA12962@localhost.localdomain>
	<20070703194940.GB12962@localhost.localdomain>
	<426BC783-58FD-452C-9176-9F834BA101A5@syenar.hu>
Message-ID: <20070704154442.GA21494@localhost.localdomain>

On Tue, 03 Jul 2007, Szak?ts Viktor wrote:
> Yes, no problem, send them to me, I'll add them.

Thank you very much. I'll send the list in few minutes.
I've got some doubts about adding some functions and
seems that you are the best person to take the decision
about them.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jul  4 12:25:12 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul  4 12:25:47 2007
Subject: [Harbour] Re: ChangeLog 2007-07-03 21:40 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <20070704154442.GA21494@localhost.localdomain>
References: <20070703194009.GA12962@localhost.localdomain>
	<20070703194940.GB12962@localhost.localdomain>
	<426BC783-58FD-452C-9176-9F834BA101A5@syenar.hu>
	<20070704154442.GA21494@localhost.localdomain>
Message-ID: <20070704162512.GB21494@localhost.localdomain>

On Wed, 04 Jul 2007, Przemyslaw Czerpak wrote:
> On Tue, 03 Jul 2007, Szak?ts Viktor wrote:
> > Yes, no problem, send them to me, I'll add them.
> Thank you very much. I'll send the list in few minutes.
> I've got some doubts about adding some functions and
> seems that you are the best person to take the decision
> about them.

Below is the list.

best regards,
Przemek




/* HBSIX lib */
EXTERNAL SX_DTOP
EXTERNAL SX_PTOD
EXTERNAL SX_DECRYPT
EXTERNAL SX_ENCRYPT
EXTERNAL SX_FCOMPRESS
EXTERNAL SX_FDECOMPRESS
EXTERNAL _SX_STRCOMPRESS
EXTERNAL _SX_STRDECOMPRESS

/* HSX lib */
EXTERNAL HS_ADD
EXTERNAL HS_CLOSE
EXTERNAL HS_CREATE
EXTERNAL HS_DELETE
EXTERNAL HS_FILTER
EXTERNAL HS_IFDEL
EXTERNAL HS_INDEX
EXTERNAL HS_KEYCOUNT
EXTERNAL HS_NEXT
EXTERNAL HS_OPEN
EXTERNAL HS_REPLACE
EXTERNAL HS_SET
EXTERNAL HS_UNDELETE
EXTERNAL HS_VERIFY
EXTERNAL HS_VERSION

EXTERNAL CFTSADD
EXTERNAL CFTSCLOSE
EXTERNAL CFTSCREA
EXTERNAL CFTSDELETE
EXTERNAL CFTSIFDEL
EXTERNAL CFTSNEXT
EXTERNAL CFTSOPEN
EXTERNAL CFTSRECN
EXTERNAL CFTSREPLAC
EXTERNAL CFTSSET
EXTERNAL CFTSUNDEL
EXTERNAL CFTSVERI
EXTERNAL CFTSVERS

/* USRRDD lib */
EXTERNAL UR_SUPER_ADDFIELD
EXTERNAL UR_SUPER_ALIAS
EXTERNAL UR_SUPER_APPEND
EXTERNAL UR_SUPER_BOF
EXTERNAL UR_SUPER_CHILDEND
EXTERNAL UR_SUPER_CHILDSTART
EXTERNAL UR_SUPER_CHILDSYNC
EXTERNAL UR_SUPER_CLEARFILTER
EXTERNAL UR_SUPER_CLEARLOCATE
EXTERNAL UR_SUPER_CLEARREL
EXTERNAL UR_SUPER_CLEARSCOPE
EXTERNAL UR_SUPER_CLOSE
EXTERNAL UR_SUPER_CLOSEMEMFILE
EXTERNAL UR_SUPER_COMPILE
EXTERNAL UR_SUPER_CREATE
EXTERNAL UR_SUPER_CREATEFIELDS
EXTERNAL UR_SUPER_CREATEMEMFILE
EXTERNAL UR_SUPER_DBEVAL
EXTERNAL UR_SUPER_DELETE
EXTERNAL UR_SUPER_DELETED
EXTERNAL UR_SUPER_DROP
EXTERNAL UR_SUPER_EOF
EXTERNAL UR_SUPER_ERROR
EXTERNAL UR_SUPER_EVALBLOCK
EXTERNAL UR_SUPER_EXISTS
EXTERNAL UR_SUPER_FIELDCOUNT
EXTERNAL UR_SUPER_FIELDDISPLAY
EXTERNAL UR_SUPER_FIELDINFO
EXTERNAL UR_SUPER_FIELDNAME
EXTERNAL UR_SUPER_FILTERTEXT
EXTERNAL UR_SUPER_FLUSH
EXTERNAL UR_SUPER_FORCEREL
EXTERNAL UR_SUPER_FOUND
EXTERNAL UR_SUPER_GETREC
EXTERNAL UR_SUPER_GETVALUE
EXTERNAL UR_SUPER_GETVALUEFILE
EXTERNAL UR_SUPER_GETVARLEN
EXTERNAL UR_SUPER_GOBOTTOM
EXTERNAL UR_SUPER_GOCOLD
EXTERNAL UR_SUPER_GOHOT
EXTERNAL UR_SUPER_GOTO
EXTERNAL UR_SUPER_GOTOID
EXTERNAL UR_SUPER_GOTOP
EXTERNAL UR_SUPER_INFO
EXTERNAL UR_SUPER_LOCATE
EXTERNAL UR_SUPER_LOCK
EXTERNAL UR_SUPER_OPEN
EXTERNAL UR_SUPER_OPENMEMFILE
EXTERNAL UR_SUPER_ORDCREATE
EXTERNAL UR_SUPER_ORDDESTROY
EXTERNAL UR_SUPER_ORDINFO
EXTERNAL UR_SUPER_ORDLSTADD
EXTERNAL UR_SUPER_ORDLSTCLEAR
EXTERNAL UR_SUPER_ORDLSTDELETE
EXTERNAL UR_SUPER_ORDLSTFOCUS
EXTERNAL UR_SUPER_ORDLSTREBUILD
EXTERNAL UR_SUPER_ORDSETCOND
EXTERNAL UR_SUPER_PACK
EXTERNAL UR_SUPER_PACKREC
EXTERNAL UR_SUPER_PUTREC
EXTERNAL UR_SUPER_PUTVALUE
EXTERNAL UR_SUPER_PUTVALUEFILE
EXTERNAL UR_SUPER_RAWLOCK
EXTERNAL UR_SUPER_RDDINFO
EXTERNAL UR_SUPER_READDBHEADER
EXTERNAL UR_SUPER_RECALL
EXTERNAL UR_SUPER_RECCOUNT
EXTERNAL UR_SUPER_RECID
EXTERNAL UR_SUPER_RECINFO
EXTERNAL UR_SUPER_RECNO
EXTERNAL UR_SUPER_RELAREA
EXTERNAL UR_SUPER_RELEVAL
EXTERNAL UR_SUPER_RELTEXT
EXTERNAL UR_SUPER_SEEK
EXTERNAL UR_SUPER_SETFIELDEXTENT
EXTERNAL UR_SUPER_SETFILTER
EXTERNAL UR_SUPER_SETLOCATE
EXTERNAL UR_SUPER_SETREL
EXTERNAL UR_SUPER_SKIP
EXTERNAL UR_SUPER_SKIPFILTER
EXTERNAL UR_SUPER_SKIPRAW
EXTERNAL UR_SUPER_SORT
EXTERNAL UR_SUPER_SYNCCHILDREN
EXTERNAL UR_SUPER_TRANS
EXTERNAL UR_SUPER_TRANSREC
EXTERNAL UR_SUPER_UNLOCK
EXTERNAL UR_SUPER_WRITEBHEADER
EXTERNAL UR_SUPER_ZAP
EXTERNAL USRRDD_AREADATA
EXTERNAL USRRDD_AREARESULT
EXTERNAL USRRDD_GETFUNCTABLE
EXTERNAL USRRDD_ID
EXTERNAL USRRDD_RDDDATA
EXTERNAL USRRDD_SETBOF
EXTERNAL USRRDD_SETBOTTOM
EXTERNAL USRRDD_SETEOF
EXTERNAL USRRDD_SETFOUND
EXTERNAL USRRDD_SETTOP

/* LANG lib */
EXTERNAL HB_LANG_BG866
EXTERNAL HB_LANG_BGISO
EXTERNAL HB_LANG_BGWIN
EXTERNAL HB_LANG_CA
EXTERNAL HB_LANG_CS852
EXTERNAL HB_LANG_CSISO
EXTERNAL HB_LANG_CSKAM
EXTERNAL HB_LANG_CSWIN
EXTERNAL HB_LANG_DE
EXTERNAL HB_LANG_DEWIN
EXTERNAL HB_LANG_EL
EXTERNAL HB_LANG_ELWIN
EXTERNAL HB_LANG_EN
EXTERNAL HB_LANG_EO
EXTERNAL HB_LANG_ES
EXTERNAL HB_LANG_ESWIN
EXTERNAL HB_LANG_EU
EXTERNAL HB_LANG_FR
EXTERNAL HB_LANG_GL
EXTERNAL HB_LANG_HE862
EXTERNAL HB_LANG_HEWIN
EXTERNAL HB_LANG_HR852
EXTERNAL HB_LANG_HRISO
EXTERNAL HB_LANG_HU852
EXTERNAL HB_LANG_HUCWI
EXTERNAL HB_LANG_HUISO
EXTERNAL HB_LANG_HUWIN
EXTERNAL HB_LANG_ID
EXTERNAL HB_LANG_IS850
EXTERNAL HB_LANG_IT
EXTERNAL HB_LANG_KO
EXTERNAL HB_LANG_NL
EXTERNAL HB_LANG_PL852
EXTERNAL HB_LANG_PLISO
EXTERNAL HB_LANG_PLMAZ
EXTERNAL HB_LANG_PLWIN
EXTERNAL HB_LANG_PT
EXTERNAL HB_LANG_RO
EXTERNAL HB_LANG_RU866
EXTERNAL HB_LANG_RUKOI8
EXTERNAL HB_LANG_RUWIN
EXTERNAL HB_LANG_SL437
EXTERNAL HB_LANG_SL852
EXTERNAL HB_LANG_SLISO
EXTERNAL HB_LANG_SLWIN
EXTERNAL HB_LANG_SR852
EXTERNAL HB_LANG_SRISO
EXTERNAL HB_LANG_SRWIN
EXTERNAL HB_LANG_TR857
EXTERNAL HB_LANG_TRWIN
EXTERNAL HB_LANG_ZHB5
EXTERNAL HB_LANG_ZHGB

/* CODEPAGE lib */
EXTERNAL HB_CODEPAGE_BG866
EXTERNAL HB_CODEPAGE_BGISO
EXTERNAL HB_CODEPAGE_BGWIN
EXTERNAL HB_CODEPAGE_CS852
EXTERNAL HB_CODEPAGE_CSISO
EXTERNAL HB_CODEPAGE_CSKAM
EXTERNAL HB_CODEPAGE_CSWIN
EXTERNAL HB_CODEPAGE_DE
EXTERNAL HB_CODEPAGE_DEWIN
EXTERNAL HB_CODEPAGE_EL
EXTERNAL HB_CODEPAGE_ELWIN
EXTERNAL HB_CODEPAGE_ES
EXTERNAL HB_CODEPAGE_ESMWIN
EXTERNAL HB_CODEPAGE_ESWIN
EXTERNAL HB_CODEPAGE_FR
EXTERNAL HB_CODEPAGE_HR1250
EXTERNAL HB_CODEPAGE_HR437
EXTERNAL HB_CODEPAGE_HR852
EXTERNAL HB_CODEPAGE_HU852
EXTERNAL HB_CODEPAGE_HU852S
EXTERNAL HB_CODEPAGE_HUISO
EXTERNAL HB_CODEPAGE_HUISOS
EXTERNAL HB_CODEPAGE_HUWIN
EXTERNAL HB_CODEPAGE_HUWINS
EXTERNAL HB_CODEPAGE_IT437
EXTERNAL HB_CODEPAGE_IT850
EXTERNAL HB_CODEPAGE_ITISB
EXTERNAL HB_CODEPAGE_ITISO
EXTERNAL HB_CODEPAGE_LT
EXTERNAL HB_CODEPAGE_PL852
EXTERNAL HB_CODEPAGE_PLISO
EXTERNAL HB_CODEPAGE_PLMAZ
EXTERNAL HB_CODEPAGE_PLWIN
EXTERNAL HB_CODEPAGE_PT850
EXTERNAL HB_CODEPAGE_PTISO
EXTERNAL HB_CODEPAGE_RU1251
EXTERNAL HB_CODEPAGE_RU866
EXTERNAL HB_CODEPAGE_RUKOI8
EXTERNAL HB_CODEPAGE_SL437
EXTERNAL HB_CODEPAGE_SL852
EXTERNAL HB_CODEPAGE_SLISO
EXTERNAL HB_CODEPAGE_SLWIN
EXTERNAL HB_CODEPAGE_SRWIN
EXTERNAL HB_CODEPAGE_TR857
EXTERNAL HB_CODEPAGE_TRWIN
EXTERNAL HB_CODEPAGE_UA1251
EXTERNAL HB_CODEPAGE_UA866
EXTERNAL HB_CODEPAGE_UAKOI8

/* GT drivers - platform dependent, cannot be included in all platforms */
EXTERNAL HB_GT_CGI
EXTERNAL HB_GT_CRS
EXTERNAL HB_GT_NUL
EXTERNAL HB_GT_PCA
EXTERNAL HB_GT_SLN
EXTERNAL HB_GT_STD
EXTERNAL HB_GT_TRM
EXTERNAL HB_GT_XWC

#ifdef __DISABLED__
/* should never be a part of hbextern */
EXTERNAL HB_FM_NOSTAT
EXTERNAL HB_FM_STAT

EXTERNAL HB_GT_CGI_DEFAULT
EXTERNAL HB_GT_CRS_DEFAULT
EXTERNAL HB_GT_NUL_DEFAULT
EXTERNAL HB_GT_PCA_DEFAULT
EXTERNAL HB_GT_SLN_DEFAULT
EXTERNAL HB_GT_STD_DEFAULT
EXTERNAL HB_GT_TRM_DEFAULT
EXTERNAL HB_GT_XWC_DEFAULT

/* compiler library - different license should not be enabled by default */
EXTERNAL HB_COMPILE
EXTERNAL HB_COMPILEBUF

/* It can be included but SIXCDX is a little bit modified DBFCDX
 * which do not compres trailing spaces in index keys. Compresing
 * trailing spaces causes that original SIX3 SIXCDX GPFs when it
 * tries to decode such indexes
 */
EXTERNAL SIXCDX, SIXCDX_GETFUNCTABLE

/* old functions which exist only for backward binary compatibility */
EXTERNAL __VMPARLLIST
EXTERNAL __VMSTKGCOUNT
EXTERNAL __VMSTKGLIST
EXTERNAL __VMSTKLCOUNT
EXTERNAL __VMSTKLLIST
EXTERNAL __VMVARGLIST
EXTERNAL __VMVARLGET
EXTERNAL __VMVARLSET
EXTERNAL __VMVARSGET
EXTERNAL __VMVARSLEN
EXTERNAL __VMVARSLIST
EXTERNAL __VMVARSSET

EXTERNAL __STRTKPTR
EXTERNAL __STRTOKEN
EXTERNAL __STRTOKENCOUNT

EXTERNAL __PPADDRULE
EXTERNAL __PREPROCESS
EXTERNAL __PP_FREE

EXTERNAL __CLS_PAR00
EXTERNAL __CLS_PARAM

EXTERNAL DBFDBT, DBFSMT

/* xHarbour obsolte */
EXTERNAL HB_DESERIALBEGIN
EXTERNAL HB_DESERIALNEXT

/* 10 character length shortcuts */
EXTERNAL DBCLEARFIL
EXTERNAL DBCLEARREL
EXTERNAL DBCLOSEARE
EXTERNAL DBFIELDINF
EXTERNAL DBORDERINF
EXTERNAL DBRECORDIN
EXTERNAL DBRLOCKLIS
EXTERNAL DBSELECTAR
EXTERNAL DBSETDRIVE
EXTERNAL DBSETFILTE
EXTERNAL DBSETRELAT
EXTERNAL DBUNLOCKAL
EXTERNAL ORDLISTCLE
EXTERNAL ORDLISTREB
EXTERNAL ORDSETFOCU
EXTERNAL ORDSETRELA
EXTERNAL ORDSKIPRAW
EXTERNAL RDDSETDEFA
EXTERNAL __DBARRANG
EXTERNAL __DBCOPYST
EXTERNAL __DBCOPYXS
EXTERNAL __DBOPENSD

#endif

/* class(y) compatible functions */
EXTERNAL BLOCK
EXTERNAL CHARACTER
EXTERNAL LOGICAL
EXTERNAL NUMERIC
EXTERNAL _ARRAY
EXTERNAL _DATE
EXTERNAL _NIL
EXTERNAL SYMBOL
EXTERNAL SCALAROBJECT

/* PROFILER classes */
EXTERNAL HBPROFILE
EXTERNAL HBPROFILEENTITY
EXTERNAL HBPROFILEFUNCTION
EXTERNAL HBPROFILELOWLEVEL
EXTERNAL HBPROFILEMETHOD
EXTERNAL HBPROFILEOPCODE
EXTERNAL HBPROFILEREPORT
EXTERNAL HBPROFILEREPORTTOARRAY
EXTERNAL HBPROFILEREPORTTOFILE
EXTERNAL HBPROFILEREPORTTOSTRING
EXTERNAL HBPROFILEREPORTTOTBROWSE

/* core functions */
EXTERNAL CLIPINIT
EXTERNAL SYSINIT
EXTERNAL ERRORSYS
EXTERNAL GET

/* why we have it and what they does?
   do we still need these two functions having real WITH OBJECT ? */
EXTERNAL HB_SETOBJECT
EXTERNAL HB_ENDOBJECT

/* I do not know if we should document these functions */
EXTERNAL HB_ARRAYID
EXTERNAL HB_SETCLSHANDLE

/* Now it's the same as HB_GCALL(), should we add it? */
EXTERNAL HB_GCSTEP

/* probably original HB_FEOF() name used also in documentation should
   be restored and libmisc HB_FEOF() changed instead and then HB_FEOF()
   should be added to hbextern.ch */
EXTERNAL HB_F_EOF



/* rest: TO CHECK */
LISTBOX
CAPTIONLENGTH
MENUMSSGLINE
MSSGLINE
PUSHBUTTON
SCROLLBAR
GETMSSGLINE
HBCHECKBOX
HBEDITOR
HBGETLIST
HBLABELFORM
HBLISTBOX
HBPERSISTENT

HBPUSHBUTTON
HBRADIOBUTTON
HBRADIOGROUP
HBREPORTFORM
HBSCROLLBAR
HBTEXTLINE

TBAPPLYKEY
TBCOLUMN
TBMOUSE
TBREADER
TBROWSE
TMEMOEDITOR
TOPBARMENU

__GETLISTACTIVE
__GETLISTLAST
__GETLISTSETACTIVE
From druzus at priv.onet.pl  Wed Jul  4 12:25:30 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul  4 12:26:04 2007
Subject: [Harbour] ChangeLog 2007-07-04 18:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070704162530.GC21494@localhost.localdomain>

2007-07-04 18:25 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbextern.ch
    + added some other missing functions for which I had no doubt they
      should be included

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jul  4 15:49:41 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul  4 15:50:18 2007
Subject: [Harbour] ChangeLog 2007-07-04 21:45 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070704194941.GA23050@localhost.localdomain>

2007-07-04 21:45 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/listbox.prg
    * synced with some xHarbour modifications

There are still four differences (I'm attaching patch) and I'd like
to ask someone familiar with this code to decide if they should be
applied or not.

best regards,
Przemek
-------------- next part --------------
--- listbox.prg	Wed Jul  4 20:59:09 2007
+++ listbox.prg	Wed Jul  4 20:59:07 2007
@@ -245,7 +245,7 @@
       ELSEIF !::isOpen
          ::isOpen := .T.
       ENDIF
-
+      ::display()
    ENDIF
 
 RETURN ::xDropDown
@@ -276,7 +276,7 @@
 Method ADDITEM( cText, xValue ) Class HBListBox
 
    IF ! ISCHARACTER( cText )
-   ELSEIF Valtype( xValue ) $ "CUN"
+   ELSEIF Valtype( xValue ) $ "CU"
       Aadd( ::aItems, { cText, xValue } )
       ::iTemCount++
 
@@ -1150,6 +1150,7 @@
    IF ! ISNIL( oScroll )
 
       IF ISCHARACTER( cCaption )
+         oScroll:capcol  := NIL
          oScroll:caption := cCaption
          oScroll:capcol  := nLeft - __CapLength( cCaption )
       ENDIF
@@ -1161,7 +1162,6 @@
       oScroll:message := cMessage
       oScroll:fblock  := FBlock
       oScroll:sblock  := SBlock
-      oScroll:isopen  := lOpen
       nLen            := Len( aList )
 
       FOR nPos := 1 TO nLen
From myorg63 at mail.ru  Thu Jul  5 02:35:53 2007
From: myorg63 at mail.ru (Petr Chornyj)
Date: Thu Jul  5 02:35:56 2007
Subject: [Harbour] HB_HSCAN function
Message-ID: <11402445.post@talk.nabble.com>


from hashfunc.c
..
HB_FUNC( HB_HSCAN )
{
   PHB_ITEM pHash = hb_param( 1, HB_IT_HASH );
   PHB_ITEM pValue = hb_param( 2, HB_IT_BLOCK ); // maybe HB_IT_ANY ??
..

-- 
View this message in context: http://www.nabble.com/HB_HSCAN-function-tf4015053.html#a11402445
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From lorenzo.fiorini at gmail.com  Thu Jul  5 02:46:03 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Jul  5 02:46:06 2007
Subject: [Harbour] help with gttrm
Message-ID: <9257026e0707042346v4f55f70cne3a38867a82f3132@mail.gmail.com>

Many thanks Przemyslaw, gttrm is GREAT.

I'm testing it under Fedora 7 Gnome gnome-terminal and unlike gtcrs
box chars and maxrow(),maxcol() are corrects "out of the box".

could you help me with some issues?

- when I launch the exe I need to resize window or wait 6secs to see sth

- like gtcrs white background of gets is not shown

- mouse right-click does not work ( tested also in xterm )

- can I get K_CTRL_TAB and K_SH_CTRL_TAB working

- which kind of "emulation" does it need?

best regards,
Lorenzo
From philb at philb.us  Thu Jul  5 02:50:57 2007
From: philb at philb.us (Phil Barnett)
Date: Thu Jul  5 02:51:00 2007
Subject: [Harbour] svn Backups and the scripts that do it all
Message-ID: <200707050250.57075.philb@philb.us>

Ok, I'm backing up the svn repository with rsync and making a tarball of it 
using bzip2 for the best compression. There are three scripts, one that runs 
nightly, ne that runs weekly and one that runs monthly. Each of them keeps 
several previous copies, so we're covered pretty well for at least a month 
back at any time once enough time has elapsed to cover the pattern.

I'll let you look at the scripts to figure out where to snag the output, and 
this will also allow you with minor changes to replicate the process 
yourself.

Also, here is the shell script for the nightly run for the svn checkout that I 
announced a couple of days ago: (watch for line wrap)

*********************
harbour-svn.sh
*********************
#!/bin/bash

PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin; export PATH

cd /var/www/vhosts/harbour-project.org/httpdocs

echo Checkout Harbour Subversion Repository
svn co 
https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/harbour 
harbour-svn

echo Create Zip file of Repository
rm -f harbour-svn.temp
zip -9 -q -r harbour-svn.temp harbour-svn
rm -f harbour-svn.zip
mv harbour-svn.temp harbour-svn.zip
chown harbour.psacln harbour-svn.zip

echo Create tarball of Repository
rm -f harbour-svn.temp.tgz
tar -czf harbour-svn.temp.tgz harbour-svn/
rm -f harbour-svn.tgz
mv harbour-svn.temp.tgz harbour-svn.tgz
chown harbour.psacln harbour-svn.tgz
*********************

And, here are the three scripts that do the daily, weekly and monthly backups 
of the svn repository:

*********************
harbour-svn-backup.sh
*********************
#!/bin/bash

PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin; export PATH

cd /var/www/vhosts/harbour-project.org/httpdocs/svn-backup

echo rsync Harbour Subversion Repository for Backup

rsync -av harbour-project.svn.sourceforge.net::svn/harbour-project/* .

cd ..

echo Create tarball of Repository Backup
rm -f harbour-svn-backup.temp.bz2
tar --use-compress-prog=bzip2 -cf harbour-svn-backup.temp.bz2 svn-backup/
rm -f harbour-svn-backup.4.bz2
mv harbour-svn-backup.3.bz2 harbour-svn-backup.4.bz2
mv harbour-svn-backup.2.bz2 harbour-svn-backup.3.bz2
mv harbour-svn-backup.1.bz2 harbour-svn-backup.2.bz2
mv harbour-svn-backup.bz2 harbour-svn-backup.1.bz2
mv harbour-svn-backup.temp.bz2 harbour-svn-backup.bz2
chown harbour.psacln harbour-svn-backup.bz2
*********************

*********************
harbour-svn-backup-weekly.sh
*********************
#!/bin/bash

PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin; export PATH

cd /var/www/vhosts/harbour-project.org/httpdocs/svn-backup

echo rsync Harbour Subversion Repository for Backup

rsync -av harbour-project.svn.sourceforge.net::svn/harbour-project/* .

cd ..

echo Create tarball of Repository Backup
rm -f harbour-svn-backup-weekly.temp.bz2
tar --use-compress-prog=bzip2 -cf harbour-svn-backup-weekly.temp.bz2 
svn-backup/
rm -f harbour-svn-backup-weekly.2.bz2
mv harbour-svn-backup-weekly.1.bz2 harbour-svn-backup-weekly.2.bz2
mv harbour-svn-backup-weekly.bz2 harbour-svn-backup-weekly.1.bz2
mv harbour-svn-backup-weekly.temp.bz2 harbour-svn-backup-weekly.bz2
chown harbour.psacln harbour-svn-backup-weekly.bz2
*********************

*********************
harbour-svn-backup-monthly.sh
*********************
#!/bin/bash

PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin; export PATH

cd /var/www/vhosts/harbour-project.org/httpdocs/svn-backup

echo rsync Harbour Subversion Repository for Backup

rsync -av harbour-project.svn.sourceforge.net::svn/harbour-project/* .

cd ..

echo Create tarball of Repository Backup
rm -f harbour-svn-backup-monthly.temp.bz2
tar --use-compress-prog=bzip2 -cf harbour-svn-backup-monthly.temp.bz2 
svn-backup/
rm -f harbour-svn-backup-monthly.1.bz2
mv harbour-svn-backup-monthly.bz2 harbour-svn-backup-monthly.1.bz2
mv harbour-svn-backup-monthly.temp.bz2 harbour-svn-backup-monthly.bz2
chown harbour.psacln harbour-svn-backup-monthly.bz2
*********************

Here's the crontab entries that run them: 

*********************
0 */3 * * * /usr/local/sbin/harbour-svn.svn >/dev/null 2>&1
0 0 * * * /usr/local/sbin/harbour-svn-backup.svn >/dev/null 2>&1
0 0 * * 0 /usr/local/sbin/harbour-svn-backup.weekly.svn >/dev/null 2>&1
0 0 1 * * /usr/local/sbin/harbour-svn-backup.monthly.svn >/dev/null 2>&1
*********************

Ah, that's better. These scripts are now backed up on dozens of machines. ;-)

(and Google)

-- 
Phil Barnett
AI4OF
SKCC #600
From lorenzo.fiorini at gmail.com  Thu Jul  5 03:10:02 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Jul  5 03:10:07 2007
Subject: [Harbour] Re: help with gttrm
In-Reply-To: <9257026e0707042346v4f55f70cne3a38867a82f3132@mail.gmail.com>
References: <9257026e0707042346v4f55f70cne3a38867a82f3132@mail.gmail.com>
Message-ID: <9257026e0707050010o5e468ab0w87ddd6946a776ac6@mail.gmail.com>

On 7/5/07, Lorenzo Fiorini <lorenzo.fiorini@gmail.com> wrote:

> - when I launch the exe I need to resize window or wait 6secs to see sth

Sorry I found the "problem" in my code.
With gtxwc to set the fontsize and find the maximum window size I use
the code below.
setmode seems to take more time in gttrm.
No problem I can set the correct window size at start.

best regards,
Lorenzo

( cEnv is sth like "18,255,255" )

...
   if !empty( cEnv ) .and. HB_GT_VERSION() != "STD"
      aVidOpts := listasarray( cEnv )
      #ifdef __PLATFORM__Linux
         if ascan( { 6, 7, 8, 9, 10, 12, 13, 14, 15, 18, 20 },
val(aVidOpts[1]) ) > 0
            GTInfo(GTI_FONTSIZE, val(aVidOpts[1]))
         endif
      #else
         GTInfo(GTI_FONTSIZE, val(aVidOpts[1]))
         if len( aVidOpts ) > 3
            GTInfo(GTI_FONTNAME, aVidOpts[4])
         endif
      #endif
      if len( aVidOpts ) < 3 .or. !setmode( val(aVidOpts[2]), val(aVidOpts[3]) )
         asize( aVidOpts, 3 )
         setmode( 255, 255 )
      endif
      clear screen
      #ifndef __XHARBOUR__
        setmode( MAXROW() , MAXCOL() )
      #endif
      GTInfo(GTI_MOUSESTATUS, 1 )
   endif
...
From philb at philb.us  Thu Jul  5 03:26:24 2007
From: philb at philb.us (Phil Barnett)
Date: Thu Jul  5 03:26:28 2007
Subject: [Harbour] svn Backups and the scripts that do it all
In-Reply-To: <200707050250.57075.philb@philb.us>
References: <200707050250.57075.philb@philb.us>
Message-ID: <200707050326.25007.philb@philb.us>

On Thursday 05 July 2007 02:50, Phil Barnett wrote:
> 0 */3 * * * /usr/local/sbin/harbour-svn.svn >/dev/null 2>&1
> 0 0 * * * /usr/local/sbin/harbour-svn-backup.svn >/dev/null 2>&1
> 0 0 * * 0 /usr/local/sbin/harbour-svn-backup.weekly.svn >/dev/null 2>&1
> 0 0 1 * * /usr/local/sbin/harbour-svn-backup.monthly.svn >/dev/null 2>&1

Well, now that I look at it, that's wrong.

Those should all end in .sh, not .svny

-- 
Phil Barnett
AI4OF
SKCC #600
From harbour.01 at syenar.hu  Thu Jul  5 03:33:53 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  5 03:34:03 2007
Subject: [Harbour] svn Backups and the scripts that do it all
In-Reply-To: <200707050250.57075.philb@philb.us>
References: <200707050250.57075.philb@philb.us>
Message-ID: <99831D9F-B745-49C7-9AFD-63EB06DAB1A3@syenar.hu>

This is great Phil, many thanks for setting this up.
It looks like a very solid backup indeed :)

Thanks for the daily snapshot as well.

Brgds,
Viktor

On 2007.07.05., at 8:50, Phil Barnett wrote:

> Ok, I'm backing up the svn repository with rsync and making a  
> tarball of it
> using bzip2 for the best compression. There are three scripts, one  
> that runs
> nightly, ne that runs weekly and one that runs monthly. Each of  
> them keeps
> several previous copies, so we're covered pretty well for at least  
> a month
> back at any time once enough time has elapsed to cover the pattern.
>
> I'll let you look at the scripts to figure out where to snag the  
> output, and
> this will also allow you with minor changes to replicate the process
> yourself.
>
> Also, here is the shell script for the nightly run for the svn  
> checkout that I
> announced a couple of days ago: (watch for line wrap)
>
> *********************
> harbour-svn.sh
> *********************
> #!/bin/bash
>
> PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin;  
> export PATH
>
> cd /var/www/vhosts/harbour-project.org/httpdocs
>
> echo Checkout Harbour Subversion Repository
> svn co
> https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/ 
> trunk/harbour
> harbour-svn
>
> echo Create Zip file of Repository
> rm -f harbour-svn.temp
> zip -9 -q -r harbour-svn.temp harbour-svn
> rm -f harbour-svn.zip
> mv harbour-svn.temp harbour-svn.zip
> chown harbour.psacln harbour-svn.zip
>
> echo Create tarball of Repository
> rm -f harbour-svn.temp.tgz
> tar -czf harbour-svn.temp.tgz harbour-svn/
> rm -f harbour-svn.tgz
> mv harbour-svn.temp.tgz harbour-svn.tgz
> chown harbour.psacln harbour-svn.tgz
> *********************
>
> And, here are the three scripts that do the daily, weekly and  
> monthly backups
> of the svn repository:
>
> *********************
> harbour-svn-backup.sh
> *********************
> #!/bin/bash
>
> PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin;  
> export PATH
>
> cd /var/www/vhosts/harbour-project.org/httpdocs/svn-backup
>
> echo rsync Harbour Subversion Repository for Backup
>
> rsync -av harbour-project.svn.sourceforge.net::svn/harbour-project/* .
>
> cd ..
>
> echo Create tarball of Repository Backup
> rm -f harbour-svn-backup.temp.bz2
> tar --use-compress-prog=bzip2 -cf harbour-svn-backup.temp.bz2 svn- 
> backup/
> rm -f harbour-svn-backup.4.bz2
> mv harbour-svn-backup.3.bz2 harbour-svn-backup.4.bz2
> mv harbour-svn-backup.2.bz2 harbour-svn-backup.3.bz2
> mv harbour-svn-backup.1.bz2 harbour-svn-backup.2.bz2
> mv harbour-svn-backup.bz2 harbour-svn-backup.1.bz2
> mv harbour-svn-backup.temp.bz2 harbour-svn-backup.bz2
> chown harbour.psacln harbour-svn-backup.bz2
> *********************
>
> *********************
> harbour-svn-backup-weekly.sh
> *********************
> #!/bin/bash
>
> PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin;  
> export PATH
>
> cd /var/www/vhosts/harbour-project.org/httpdocs/svn-backup
>
> echo rsync Harbour Subversion Repository for Backup
>
> rsync -av harbour-project.svn.sourceforge.net::svn/harbour-project/* .
>
> cd ..
>
> echo Create tarball of Repository Backup
> rm -f harbour-svn-backup-weekly.temp.bz2
> tar --use-compress-prog=bzip2 -cf harbour-svn-backup-weekly.temp.bz2
> svn-backup/
> rm -f harbour-svn-backup-weekly.2.bz2
> mv harbour-svn-backup-weekly.1.bz2 harbour-svn-backup-weekly.2.bz2
> mv harbour-svn-backup-weekly.bz2 harbour-svn-backup-weekly.1.bz2
> mv harbour-svn-backup-weekly.temp.bz2 harbour-svn-backup-weekly.bz2
> chown harbour.psacln harbour-svn-backup-weekly.bz2
> *********************
>
> *********************
> harbour-svn-backup-monthly.sh
> *********************
> #!/bin/bash
>
> PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin;  
> export PATH
>
> cd /var/www/vhosts/harbour-project.org/httpdocs/svn-backup
>
> echo rsync Harbour Subversion Repository for Backup
>
> rsync -av harbour-project.svn.sourceforge.net::svn/harbour-project/* .
>
> cd ..
>
> echo Create tarball of Repository Backup
> rm -f harbour-svn-backup-monthly.temp.bz2
> tar --use-compress-prog=bzip2 -cf harbour-svn-backup-monthly.temp.bz2
> svn-backup/
> rm -f harbour-svn-backup-monthly.1.bz2
> mv harbour-svn-backup-monthly.bz2 harbour-svn-backup-monthly.1.bz2
> mv harbour-svn-backup-monthly.temp.bz2 harbour-svn-backup-monthly.bz2
> chown harbour.psacln harbour-svn-backup-monthly.bz2
> *********************
>
> Here's the crontab entries that run them:
>
> *********************
> 0 */3 * * * /usr/local/sbin/harbour-svn.svn >/dev/null 2>&1
> 0 0 * * * /usr/local/sbin/harbour-svn-backup.svn >/dev/null 2>&1
> 0 0 * * 0 /usr/local/sbin/harbour-svn-backup.weekly.svn >/dev/null  
> 2>&1
> 0 0 1 * * /usr/local/sbin/harbour-svn-backup.monthly.svn >/dev/null  
> 2>&1
> *********************
>
> Ah, that's better. These scripts are now backed up on dozens of  
> machines. ;-)
>
> (and Google)
>
> -- 
> Phil Barnett
> AI4OF
> SKCC #600
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From dmacias at mail.udg.mx  Thu Jul  5 05:09:23 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Jul  5 05:09:27 2007
Subject: [Harbour] Re: Compiling output
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <468CB543.3030608@mail.udg.mx>

Przemek:

 >Please send .prg/.ch files to me and I'll tell you why is 4 instead of 3
 >functions. It may be ANNOUNCE or some DO statement or sth like that.
 >If I'll look at the source code then I'll be able to answer you at once
 >without guessing.

Found, it is caused by:
ANNOUNCE HB_GTSYS

 >It's the total number of preprocessed lines not lines in your .prg code
 >which includes also command lines -D... macros and some other macros
 >added dynamically by compiler like __DATE__, __TIME__, __PLATFORM__*,
 >etc. If you do not like it then I can change it and reset this counter
 >to 0 after standard rules initialization and before preprocessing first
 >.prg file.

You, as PP expert, can make the best choice

------------------------
2007-07-04 15:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
   * harbour/source/pp/ppcore.c
     ! do not calculate last line when it does not contain any character
     * clear line number counter after preprocessing standard definitions/
       rules - I hope it will make David happy ;-)
------------------------

Thanks Przemek, now I will not have nightmares with lines counting   :-)

David Macias


From druzus at priv.onet.pl  Thu Jul  5 06:03:22 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jul  5 06:03:58 2007
Subject: [Harbour] HB_HSCAN function
In-Reply-To: <11402445.post@talk.nabble.com>
References: <11402445.post@talk.nabble.com>
Message-ID: <20070705100322.GA7251@localhost.localdomain>

On Wed, 04 Jul 2007, Petr Chornyj wrote:
> from hashfunc.c
> ..
> HB_FUNC( HB_HSCAN )
> {
>    PHB_ITEM pHash = hb_param( 1, HB_IT_HASH );
>    PHB_ITEM pValue = hb_param( 2, HB_IT_BLOCK ); // maybe HB_IT_ANY ??
> ..

Yes. Thanks for the information.

best regards,
Przemek
From philb at philb.us  Thu Jul  5 08:13:37 2007
From: philb at philb.us (Phil Barnett)
Date: Thu Jul  5 08:13:41 2007
Subject: [Harbour] svn Backups and the scripts that do it all
In-Reply-To: <99831D9F-B745-49C7-9AFD-63EB06DAB1A3@syenar.hu>
References: <200707050250.57075.philb@philb.us>
	<99831D9F-B745-49C7-9AFD-63EB06DAB1A3@syenar.hu>
Message-ID: <200707050813.37574.philb@philb.us>

On Thursday 05 July 2007 03:33, Szak?ts Viktor wrote:
> This is great Phil, many thanks for setting this up.
> It looks like a very solid backup indeed :)
>
> Thanks for the daily snapshot as well.

You're welcome. I figure with this head start, perhaps someone else will also 
have some backups as well. Right now, they appear to be working:

drwxr-xr-x   7 root    root        4096 Jul  4 22:46 svn-backup
-rw-r--r--   1 harbour psacln  43205189 Jul  5 01:57 harbour-svn-backup.bz2
-rw-r--r--   1 harbour psacln  43205189 Jul  5 02:04 
harbour-svn-backup-weekly.bz2
-rw-r--r--   1 harbour psacln  43205189 Jul  5 02:15 
harbour-svn-backup-monthly.bz2
drwxr-xr-x  14 root    root        4096 Jul  5 03:27 harbour-svn
-rw-r--r--   1 harbour psacln  14435864 Jul  5 06:00 harbour-svn.zip
-rw-r--r--   1 harbour psacln   9268089 Jul  5 06:00 harbour-svn.tgz

I'll look tomorrow and see that the daily one moves forward. We can already 
see that the daily snapshot is updating every three hours.

-- 
Phil Barnett
AI4OF
SKCC #600
From myorg63 at mail.ru  Fri Jul  6 06:31:07 2007
From: myorg63 at mail.ru (Petr Chornyj)
Date: Fri Jul  6 06:31:11 2007
Subject: [Harbour] ChangeLog 2007-07-02 17:16 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <20070702151728.GA24968@localhost.localdomain>
References: <20070702151728.GA24968@localhost.localdomain>
Message-ID: <11402318.post@talk.nabble.com>



Przemyslaw Czerpak wrote:
> 
>   * harbour/include/hbcompat.ch
>     * added trnaslation rules for expresions in parentheses which use
>       new xHarbour operators: HAS, IN, LIKE, &, |, ^^, >>, <<
>       Please note that only code which uses above operators in parentheses
>       will be translated, f.e. this code will not be translated:
>          if cVal1 IN cVal2
>             nVal := nVal1 | nVal2 | nVal3 | nVal4
>          endif
>       will not be translated but this one will:
>          if ( cVal1 IN cVal2 )
>             nVal := ( nVal1 | nVal2 | nVal3 | nVal4 )
>          endif
> 
> 
> 

Przemyslaw,

>From "hbcompat.ch" - xHarbour operators: IN, .. 
#translate ( <exp1> IN <exp2> => ( <exp1> $ <exp2> )

In xHarbor syntax operator IN is

<cSubString> IN <cString>
<xValue>     IN <aArray>
<xKey>       IN <hHash>

And on my opinion more correctly is this translation
#translate ( <exp1> IN <exp2> )     => ( iif( ValType( <exp2> ) == "C",
<exp1> $ <exp2>, iif( ValType( <exp2> ) == "A", AScan( <exp2>, <exp1> ) > 0,
HB_HHasKey( <exp2>, <exp1> ) ) ) )
or other maybe more elegant solution  

What your idea?

P.S.I am know it is not very important, but more compatible :)

----
Petr


-- 
View this message in context: http://www.nabble.com/ChangeLog-2007-07-02-17%3A16-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tf4012864.html#a11402318
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From soporte at dsgsoftware.com  Fri Jul  6 06:49:39 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Fri Jul  6 06:51:02 2007
Subject: [Harbour] ChangeLog 2007-07-02 17:16 UTC+0200 PrzemyslawCzerpak
	(druzus/at/priv.onet.pl)
References: <20070702151728.GA24968@localhost.localdomain>
	<11402318.post@talk.nabble.com>
Message-ID: <000a01c7bfbb$5f2617b0$1700000a@PcJuanxp>

Petr,

> And on my opinion more correctly is this translation
> #translate ( <exp1> IN <exp2> )     => ( iif( ValType( <exp2> ) == "C",
> <exp1> $ <exp2>, iif( ValType( <exp2> ) == "A", AScan( <exp2>, <exp1> ) > 
> 0,
> HB_HHasKey( <exp2>, <exp1> ) ) ) )
> or other maybe more elegant solution

I think $ operator already makes all this work.

Best regards
Juan 

From myorg63 at mail.ru  Fri Jul  6 07:21:21 2007
From: myorg63 at mail.ru (P. Chornyj)
Date: Fri Jul  6 07:21:39 2007
Subject: =?koi8-r?Q?Re=3A_Re=3A_[Harbour]_ChangeLog_2007-07-02_17=3A16_UTC+0200_PrzemyslawCzerpak(druzus/at/priv.onet.pl)?=
In-Reply-To: <000a01c7bfbb$5f2617b0$1700000a@PcJuanxp>
References: <000a01c7bfbb$5f2617b0$1700000a@PcJuanxp>
Message-ID: <E1I6lsH-0006xu-00.myorg63-mail-ru@f23.mail.ru>

Juan,
> I think $ operator already makes all this work.

Yes, it true. I'm sorry.
I saw ?? bug in my own code.

Thanks for reply
Petr
From antonioharbour at gmail.com  Fri Jul  6 07:30:34 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Fri Jul  6 07:29:57 2007
Subject: [Harbour] HB_ENUMINDEX()
Message-ID: <468e27af.2435440a.18e5.24c5@mx.google.com>

I am trying to build the recently added contrib TIP, but I get this
unresolved external:

tip.lib(client.obj) : error LNK2001: unresolved external symbol
HB_FUN_HB_ENUMINDEX
tip.lib(hbinet.obj) : error LNK2019: unresolved external symbol strerror
referenced in function s_inetRecvInternal
rtl.lib(hbregex.obj) : error LNK2019: unresolved external symbol pcre_exec
referenced in function hb_regexec
rtl.lib(hbregex.obj) : error LNK2019: unresolved external symbol pcre_free
referenced in function _hb_regex_init_
rtl.lib(hbregex.obj) : error LNK2019: unresolved external symbol pcre_malloc
referenced in function _hb_regex_init_
rtl.lib(hbregex.obj) : error LNK2019: unresolved external symbol
pcre_compile referenced in function hb_regcomp

Any hints ? Thanks,

Regards,

Antonio

From antonioharbour at gmail.com  Fri Jul  6 07:36:07 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Fri Jul  6 07:35:29 2007
Subject: [Harbour] HB_ENUMINDEX()
Message-ID: <468e28fc.1936440a.65c7.4401@mx.google.com>

After linking hbpcre.lib I got these unresolved externals only:
 
tip.lib(client.obj) : error LNK2001: unresolved external symbol
HB_FUN_HB_ENUMINDEX
tip.lib(hbinet.obj) : error LNK2019: unresolved external symbol strerror
referenced in function s_inetRecvInternal

Any hints ? Thanks,

Regards,

Antonio

From myorg63 at mail.ru  Fri Jul  6 08:09:12 2007
From: myorg63 at mail.ru (P. Chornyj)
Date: Fri Jul  6 08:09:22 2007
Subject: =?koi8-r?Q?Re=3A_[Harbour]_HB=5FENUMINDEX()?=
In-Reply-To: <468e28fc.1936440a.65c7.4401@mx.google.com>
References: <468e28fc.1936440a.65c7.4401@mx.google.com>
Message-ID: <E1I6mca-0003I1-00.myorg63-mail-ru@f110.mail.ru>

Antonio,

As I am know HB_ENUMINDEX is function from xHarbour?
In Harbour we use e:__enumIndex()

Regards,
Petr
From antonioharbour at gmail.com  Fri Jul  6 08:17:33 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Fri Jul  6 08:16:54 2007
Subject: [Harbour] HB_ENUMINDEX()
In-Reply-To: <E1I6mca-0003I1-00.myorg63-mail-ru@f110.mail.ru>
Message-ID: <468e32b1.1636440a.054e.149c@mx.google.com>

>
As I am know HB_ENUMINDEX is function from xHarbour?
In Harbour we use e:__enumIndex()
>

That's what I thought but in recent contrib\tip files: client.prg and
ftpcln.prg, HB_ENUMINDEX() is used

Should we implement HB_ENUMINDEX() in Harbour or modify those files ?

Regards,

Antonio

From druzus at priv.onet.pl  Fri Jul  6 08:18:00 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jul  6 08:18:36 2007
Subject: [Harbour] ChangeLog 2007-07-02 17:16 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <11402318.post@talk.nabble.com>
References: <20070702151728.GA24968@localhost.localdomain>
	<11402318.post@talk.nabble.com>
Message-ID: <20070706121800.GA17020@localhost.localdomain>

On Fri, 06 Jul 2007, Petr Chornyj wrote:
> >From "hbcompat.ch" - xHarbour operators: IN, .. 
> #translate ( <exp1> IN <exp2> => ( <exp1> $ <exp2> )
> In xHarbor syntax operator IN is
> <cSubString> IN <cString>
> <xValue>     IN <aArray>
> <xKey>       IN <hHash>

In xHarbour IN makes exactly the same job as $ and to be more
precise xHarbour _DOES_NOT_HAVE_ additional operator but IN
is translated by lexer to $

> And on my opinion more correctly is this translation
> #translate ( <exp1> IN <exp2> )     => ( iif( ValType( <exp2> ) == "C",
> <exp1> $ <exp2>, iif( ValType( <exp2> ) == "A", AScan( <exp2>, <exp1> ) > 0,
> HB_HHasKey( <exp2>, <exp1> ) ) ) )
> or other maybe more elegant solution  

If you compile Harbour with HB_COMPAT_XHB macro then $ will also work for
arrays and Hashes just like in xHarbour.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Jul  6 08:21:09 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  6 08:21:16 2007
Subject: [Harbour] ChangeLog 2007-07-02 17:16 UTC+0200 PrzemyslawCzerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <000a01c7bfbb$5f2617b0$1700000a@PcJuanxp>
References: <20070702151728.GA24968@localhost.localdomain>
	<11402318.post@talk.nabble.com>
	<000a01c7bfbb$5f2617b0$1700000a@PcJuanxp>
Message-ID: <A2BAE9D5-E9AA-4AB6-AACB-9A2CDD0BD000@syenar.hu>

Only when HB_COMPAT_XHB is set.

What is the point in using "IN" BTW?

Brgds,
Viktor

On 2007.07.06., at 12:49, Juan G?lvez wrote:

> Petr,
>
>> And on my opinion more correctly is this translation
>> #translate ( <exp1> IN <exp2> )     => ( iif( ValType( <exp2> ) ==  
>> "C",
>> <exp1> $ <exp2>, iif( ValType( <exp2> ) == "A", AScan( <exp2>,  
>> <exp1> ) > 0,
>> HB_HHasKey( <exp2>, <exp1> ) ) ) )
>> or other maybe more elegant solution
>
> I think $ operator already makes all this work.
>
> Best regards
> Juan
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Fri Jul  6 08:21:42 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jul  6 08:22:18 2007
Subject: [Harbour] HB_ENUMINDEX()
In-Reply-To: <468e28fc.1936440a.65c7.4401@mx.google.com>
References: <468e28fc.1936440a.65c7.4401@mx.google.com>
Message-ID: <20070706122142.GB17020@localhost.localdomain>

On Fri, 06 Jul 2007, Antonio Linares wrote:
> After linking hbpcre.lib I got these unresolved externals only:
> tip.lib(client.obj) : error LNK2001: unresolved external symbol
> HB_FUN_HB_ENUMINDEX
> tip.lib(hbinet.obj) : error LNK2019: unresolved external symbol strerror
> referenced in function s_inetRecvInternal
> Any hints ? Thanks,

Yes, read messages I'm sending to this list ;-)
TIP library can be used _ONLY_ with Harbour version compiler with
HB_COMPAT_XHB macro. When you compile Harbour with HB_COMPAT_XHB
then HB_ENUMINDEX() will be translated by compiler to <enum>:__enimIndex()

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Jul  6 08:26:16 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  6 08:26:22 2007
Subject: [Harbour] ChangeLog 2007-07-02 17:16 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070706121800.GA17020@localhost.localdomain>
References: <20070702151728.GA24968@localhost.localdomain>
	<11402318.post@talk.nabble.com>
	<20070706121800.GA17020@localhost.localdomain>
Message-ID: <C557A74D-E2C9-4B7A-AB68-3BD472F858D1@syenar.hu>


On 2007.07.06., at 14:18, Przemyslaw Czerpak wrote:

> On Fri, 06 Jul 2007, Petr Chornyj wrote:
>>> From "hbcompat.ch" - xHarbour operators: IN, ..
>> #translate ( <exp1> IN <exp2> => ( <exp1> $ <exp2> )
>> In xHarbor syntax operator IN is
>> <cSubString> IN <cString>
>> <xValue>     IN <aArray>
>> <xKey>       IN <hHash>
>
> In xHarbour IN makes exactly the same job as $ and to be more
> precise xHarbour _DOES_NOT_HAVE_ additional operator but IN
> is translated by lexer to $

Hm, in this case I completely fail to see any point in
using "IN"... (not that I see much point in it even if
it'd handle "A" and "H")

The ideal solution would be to switch back to using
"$" instead of "IN" to enhance portability.

(I don't think this would happen though)

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Jul  6 08:28:32 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  6 08:28:36 2007
Subject: [Harbour] HB_ENUMINDEX()
In-Reply-To: <20070706122142.GB17020@localhost.localdomain>
References: <468e28fc.1936440a.65c7.4401@mx.google.com>
	<20070706122142.GB17020@localhost.localdomain>
Message-ID: <3EE39C13-A61A-4686-896B-A26C588DAFB2@syenar.hu>

Hi Przemek,

Do you see any problem with adding HB_ENUMINDEX()
to Harbour (non-XHB mode)?

This is a quite essential function when using FOR EACH,
so I think it's okey to have it as a HB_* function instead
of an internal one (__*).

Even the naming is okey.

Brgds,
Viktor

On 2007.07.06., at 14:21, Przemyslaw Czerpak wrote:

> On Fri, 06 Jul 2007, Antonio Linares wrote:
>> After linking hbpcre.lib I got these unresolved externals only:
>> tip.lib(client.obj) : error LNK2001: unresolved external symbol
>> HB_FUN_HB_ENUMINDEX
>> tip.lib(hbinet.obj) : error LNK2019: unresolved external symbol  
>> strerror
>> referenced in function s_inetRecvInternal
>> Any hints ? Thanks,
>
> Yes, read messages I'm sending to this list ;-)
> TIP library can be used _ONLY_ with Harbour version compiler with
> HB_COMPAT_XHB macro. When you compile Harbour with HB_COMPAT_XHB
> then HB_ENUMINDEX() will be translated by compiler to  
> <enum>:__enimIndex()
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Fri Jul  6 08:45:38 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jul  6 08:46:14 2007
Subject: [Harbour] HB_ENUMINDEX()
In-Reply-To: <3EE39C13-A61A-4686-896B-A26C588DAFB2@syenar.hu>
References: <468e28fc.1936440a.65c7.4401@mx.google.com>
	<20070706122142.GB17020@localhost.localdomain>
	<3EE39C13-A61A-4686-896B-A26C588DAFB2@syenar.hu>
Message-ID: <20070706124538.GA17241@localhost.localdomain>

On Fri, 06 Jul 2007, Szak?ts Viktor wrote:
> Hi Przemek,
> Do you see any problem with adding HB_ENUMINDEX()
> to Harbour (non-XHB mode)?

Yes. In xHarbour FORE EACH is very limited and sometimes HB_ENUMINDEX()
is enough though even such simple code cannot be translated to
xHarbour because HB_ENUMINDEX() work only for internal loop:

    FOR EACH e1 IN arr1
        FOR EACH e2 IN e1
            ? "At:", e1:__enumIndex(), e2:__enumIndex(), "is:", e2
        NEXT
    NEXT

so:

    FOR EACH e1 IN arr1
        FOR EACH e2 IN e1
            ? "At:", HB_ENUMINDEX(), HB_ENUMINDEX(), "is:", e2
        NEXT
    NEXT

does not give the same results.

Also xHarbour user can forget about things like:

    FOR EACH e1, e2 IN arr1, arr2
        FOR EACH v1, v2 IN e1, e2
            ? "At:", e1:__enumIndex(), v1:__enumIndex(), "is:", v1
            ? "At:", e2:__enumIndex(), v2:__enumIndex(), "is:", v2
        NEXT
    NEXT

or native support for hashes in FOR EACH:

    h := {"A"=>10,"B"=>20,"C"=>30}
    FOR EACH e IN h
        ? e:__enumIndex(), e:__enumKey(), e:__enumValue()
    NEXT

Ryszard idea of using __enum*() messages was perfect. It also
gives very nice interface for enumerators overloading.

> This is a quite essential function when using FOR EACH,
> so I think it's okey to have it as a HB_* function instead
> of an internal one (__*).

Unfortunately i works only for one enumerator so even in limited
FOR EACH implementation just like in xHarbour it's not enough.
I added support for HB_ENUMINDEX() only for xHarbour compatibility
but I do not want to introduce sth what does not give full functionality.

best regards,
Przemek
From druzus at priv.onet.pl  Fri Jul  6 11:09:45 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jul  6 11:10:21 2007
Subject: [Harbour] ChangeLog 2007-07-02 17:16 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <C557A74D-E2C9-4B7A-AB68-3BD472F858D1@syenar.hu>
References: <20070702151728.GA24968@localhost.localdomain>
	<11402318.post@talk.nabble.com>
	<20070706121800.GA17020@localhost.localdomain>
	<C557A74D-E2C9-4B7A-AB68-3BD472F858D1@syenar.hu>
Message-ID: <20070706150945.GA17609@localhost.localdomain>

On Fri, 06 Jul 2007, Szak?ts Viktor wrote:
> >In xHarbour IN makes exactly the same job as $ and to be more
> >precise xHarbour _DOES_NOT_HAVE_ additional operator but IN
> >is translated by lexer to $
> Hm, in this case I completely fail to see any point in
> using "IN"... (not that I see much point in it even if
> it'd handle "A" and "H")
> The ideal solution would be to switch back to using
> "$" instead of "IN" to enhance portability.

Yes. I fully agree.
Please also note that the bad side effect of IN, HAS and LIKE operators
is that they break PP rules. IN stops to be an identifier but begins to
be an operator so when you have rule like (from std.ch):
    #command SET ORDER TO <tg> [IN <(bg)>] => ordSetFocus( <tg> [, <(bg)>] )

and code like:
    SET ORDER TO "tag1" IN bag1

then it's wrongly translated because
    "tag1" IN bag1
is single expression which PP assign to <tg> match marker and you have
as final code:
    ordSetFocus( "tag1" IN bag1 )
instead of:
    ordSetFocus( "tag1", "bag1" )

You can check older xHarbour versions that they are working in such wrong
(Clipper incompatible) way.
In new PP I haven't implemented support for IN, HAS and LIKE operators so
it's Clipper compatible but the bad side effect is that new PP does not know
that IN, HAS and LIKE are operators and if user created code like:

    SET AUTOSHARE TO "NET" IN cParam

Then it does not translate it using:
    #command SET AUTOSHARE TO <x> => Set( _SET_AUTOSHARE, <x> )

because
    "NET" IN cParam

is not single expression and error is reported so user has to update
their code and use $ or parenthesis, f.e:
    SET AUTOSHARE TO ( "NET" IN cParam )

In general choosing identifiers as operators breaks Clipper's PP rules
so it was bad design decision because you cannot be Clipper compatible
having fully working such operators just like any other.
I do not know what will be xHarbour developers decision for farther moves
and restoring previous IN, HAS, LIKE behavior in new PP. Fortunately
Harbour does not have such problem and I do not see any reason to
introduce it by adding IN, HAS, LIKE operators.

> (I don't think this would happen though)

It depends on user choices.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Jul  6 11:12:39 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  6 11:12:42 2007
Subject: [Harbour] HB_ENUMINDEX()
In-Reply-To: <20070706124538.GA17241@localhost.localdomain>
References: <468e28fc.1936440a.65c7.4401@mx.google.com>
	<20070706122142.GB17020@localhost.localdomain>
	<3EE39C13-A61A-4686-896B-A26C588DAFB2@syenar.hu>
	<20070706124538.GA17241@localhost.localdomain>
Message-ID: <D07EB92E-98C0-47A4-8A34-58597F3F5909@syenar.hu>

I see now and I agree not to add it in this case.

<rand>
It's sad when rushed xhb feature implemenatations
are creating such unresolvable portability problems (and
otherwise avoidable portability work too; see "IN"). I guess
fixing HB_ENUM*() functions in xhb is not an option
either, as ppl are already relying on their behaviour... :(

One technically viable option is to avoid using FOR EACH
in those code parts which we want to share or keep in
more-or-less sync. Same goes for any such app level code
too of course. (or branch by #ifdef __XHARBOUR__, but
this is ugly as hell.). This needs dedication towards portable
Harbour code from the developers, and means that
FOR EACH won't be something to use freely without
extra portability (development) costs.

An escape route would be if xhb would copy our __ENUM*()
implementation then it would start to use it too.
</rant>

Brgds,
Viktor

On 2007.07.06., at 14:45, Przemyslaw Czerpak wrote:

> On Fri, 06 Jul 2007, Szak?ts Viktor wrote:
>> Hi Przemek,
>> Do you see any problem with adding HB_ENUMINDEX()
>> to Harbour (non-XHB mode)?
>
> Yes. In xHarbour FORE EACH is very limited and sometimes  
> HB_ENUMINDEX()
> is enough though even such simple code cannot be translated to
> xHarbour because HB_ENUMINDEX() work only for internal loop:
>
>     FOR EACH e1 IN arr1
>         FOR EACH e2 IN e1
>             ? "At:", e1:__enumIndex(), e2:__enumIndex(), "is:", e2
>         NEXT
>     NEXT
>
> so:
>
>     FOR EACH e1 IN arr1
>         FOR EACH e2 IN e1
>             ? "At:", HB_ENUMINDEX(), HB_ENUMINDEX(), "is:", e2
>         NEXT
>     NEXT
>
> does not give the same results.
>
> Also xHarbour user can forget about things like:
>
>     FOR EACH e1, e2 IN arr1, arr2
>         FOR EACH v1, v2 IN e1, e2
>             ? "At:", e1:__enumIndex(), v1:__enumIndex(), "is:", v1
>             ? "At:", e2:__enumIndex(), v2:__enumIndex(), "is:", v2
>         NEXT
>     NEXT
>
> or native support for hashes in FOR EACH:
>
>     h := {"A"=>10,"B"=>20,"C"=>30}
>     FOR EACH e IN h
>         ? e:__enumIndex(), e:__enumKey(), e:__enumValue()
>     NEXT
>
> Ryszard idea of using __enum*() messages was perfect. It also
> gives very nice interface for enumerators overloading.
>
>> This is a quite essential function when using FOR EACH,
>> so I think it's okey to have it as a HB_* function instead
>> of an internal one (__*).
>
> Unfortunately i works only for one enumerator so even in limited
> FOR EACH implementation just like in xHarbour it's not enough.
> I added support for HB_ENUMINDEX() only for xHarbour compatibility
> but I do not want to introduce sth what does not give full  
> functionality.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Jul  6 11:19:35 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  6 11:19:41 2007
Subject: [Harbour] ChangeLog 2007-07-02 17:16 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070706150945.GA17609@localhost.localdomain>
References: <20070702151728.GA24968@localhost.localdomain>
	<11402318.post@talk.nabble.com>
	<20070706121800.GA17020@localhost.localdomain>
	<C557A74D-E2C9-4B7A-AB68-3BD472F858D1@syenar.hu>
	<20070706150945.GA17609@localhost.localdomain>
Message-ID: <531C8CC7-64CB-4228-90F8-6007BB0665F1@syenar.hu>

This is really unpredictable language syntax behaviour
combined with no gain in functionality. A clear loss.

I'm happy we got it right in Harbour. Hopefully xhb will
eventually fix (revert?) this.

Brgds,
Viktor

On 2007.07.06., at 17:09, Przemyslaw Czerpak wrote:

> On Fri, 06 Jul 2007, Szak?ts Viktor wrote:
>>> In xHarbour IN makes exactly the same job as $ and to be more
>>> precise xHarbour _DOES_NOT_HAVE_ additional operator but IN
>>> is translated by lexer to $
>> Hm, in this case I completely fail to see any point in
>> using "IN"... (not that I see much point in it even if
>> it'd handle "A" and "H")
>> The ideal solution would be to switch back to using
>> "$" instead of "IN" to enhance portability.
>
> Yes. I fully agree.
> Please also note that the bad side effect of IN, HAS and LIKE  
> operators
> is that they break PP rules. IN stops to be an identifier but  
> begins to
> be an operator so when you have rule like (from std.ch):
>     #command SET ORDER TO <tg> [IN <(bg)>] => ordSetFocus( <tg> [, < 
> (bg)>] )
>
> and code like:
>     SET ORDER TO "tag1" IN bag1
>
> then it's wrongly translated because
>     "tag1" IN bag1
> is single expression which PP assign to <tg> match marker and you have
> as final code:
>     ordSetFocus( "tag1" IN bag1 )
> instead of:
>     ordSetFocus( "tag1", "bag1" )
>
> You can check older xHarbour versions that they are working in such  
> wrong
> (Clipper incompatible) way.
> In new PP I haven't implemented support for IN, HAS and LIKE  
> operators so
> it's Clipper compatible but the bad side effect is that new PP does  
> not know
> that IN, HAS and LIKE are operators and if user created code like:
>
>     SET AUTOSHARE TO "NET" IN cParam
>
> Then it does not translate it using:
>     #command SET AUTOSHARE TO <x> => Set( _SET_AUTOSHARE, <x> )
>
> because
>     "NET" IN cParam
>
> is not single expression and error is reported so user has to update
> their code and use $ or parenthesis, f.e:
>     SET AUTOSHARE TO ( "NET" IN cParam )
>
> In general choosing identifiers as operators breaks Clipper's PP rules
> so it was bad design decision because you cannot be Clipper compatible
> having fully working such operators just like any other.
> I do not know what will be xHarbour developers decision for farther  
> moves
> and restoring previous IN, HAS, LIKE behavior in new PP. Fortunately
> Harbour does not have such problem and I do not see any reason to
> introduce it by adding IN, HAS, LIKE operators.
>
>> (I don't think this would happen though)
>
> It depends on user choices.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Fri Jul  6 11:47:50 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jul  6 11:48:27 2007
Subject: [Harbour] HB_ENUMINDEX()
In-Reply-To: <D07EB92E-98C0-47A4-8A34-58597F3F5909@syenar.hu>
References: <468e28fc.1936440a.65c7.4401@mx.google.com>
	<20070706122142.GB17020@localhost.localdomain>
	<3EE39C13-A61A-4686-896B-A26C588DAFB2@syenar.hu>
	<20070706124538.GA17241@localhost.localdomain>
	<D07EB92E-98C0-47A4-8A34-58597F3F5909@syenar.hu>
Message-ID: <20070706154750.GB17609@localhost.localdomain>

On Fri, 06 Jul 2007, Szak?ts Viktor wrote:
> An escape route would be if xhb would copy our __ENUM*()
> implementation then it would start to use it too.

xHarbour's implementation of FOR EACH does not support many of
Harbour extnesions. Adding support for for __enum*() messages
is only part of the problem. xHarbour does not have real enumerator
item type (HB_IT_ENUM in Harbour) and it intorduced many other
limitations.
In Harbour you can enumerate more then one variable in one FOR EACH
loop, f.e. this code:
    func StringToArray( cValue )
    local aValue := array( len( cValue ) ), a, c
       for each a, c in aValue, cValue
          a := c
       next
    return aValue
cannot be ported to xHarbour though it odes not use any __enum*()
messages. You will have to make sth like:

    func StringToArray( cValue )
    local aValue := array( len( cValue ) ), a
       for each a in aValue
          a := cValue[ hb_enumIndex() ]
       next
    return aValue

but if you create reverted code:

    func ArrayToString( aValue )
    local cValue := space( len( aValue ) ), a, c
       for each a, c in aValue, @cValue
          c := a
       next
    return cValue

then using hb_enumIndex() will not be enough because xHarbour
does not support assign when base enumerated value is string.
There are many other similar problems, f.e. in xHarbour FOR EACH,
WITH OBJECT, xBase++ like multivalue macros, etc. do not use HVM
stack but additional HVM registers which have to be safe/restore
in many operations what reduce the speed and also in pure Clipper
code which does not use any FOR EACH / WITH OBJECT or any other
extensions and the size of these additional register is fixed
so now in xHarbour these extensions cannot be used in recursive
programs, f.e. this code:
      proc main()
      p({0},1000)
      return
      proc p(a,n)
      local x
      for each x in a
         ? ++x
         if n > 0
            p(a,n-1)
            n:=0
         endif
      next
      return

compiled by Harbour shows:
               1
               2
               3
      ...
             999
            1000
            1001

but when compiled by xHarbour:
               1
               2
               3
      ...
              13
              14
              15
      Unrecoverable error 9000: FOR EACH excessive nesting!
      Called from P(7)
      Called from P(10)
      Called from P(10)
      ...
      Called from P(10)

etc. so if you need real portability then it will be necessary to
replace current xHarbour FOR EACH implementation with the Harbour
one.

best regards,
Przemek
From creis at gem51.com  Fri Jul  6 13:29:46 2007
From: creis at gem51.com (Carlos Reis)
Date: Fri Jul  6 12:29:08 2007
Subject: [Harbour] problem with Mysql date field
Message-ID: <001301c7bff3$4126d2d0$0202a8c0@star1>

Hi all

I would like to know if any one of you  have this problem :

I can't get any  data from fields type DATE  in MySql when working with
Harbour with HMG

 like in this example:

oQuery := oServer:Query( "Select * FROM  teste  WHERE  id =  1" )

   oRow           :=  oQuery:GetRow(1)
   oID              :=  oRow:fieldGet(1)
   oName        :=  oRow:fieldGet(2)
   odate          :=  oRow:fieldGet(3)

The variable oDate that should be have a DATE  like "2007-07-06"  from the
field type DATE in MySql , but only returns  a ( " ) ...

best regards

C.Reis




From antonioharbour at gmail.com  Fri Jul  6 12:31:30 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Fri Jul  6 12:30:55 2007
Subject: [Harbour] HB_ENUMINDEX()
In-Reply-To: <20070706122142.GB17020@localhost.localdomain>
Message-ID: <468e6e39.2435440a.18e5.ffffba28@mx.google.com>

Przemek,
 
>
Yes, read messages I'm sending to this list ;-) TIP library can be used
_ONLY_ with Harbour version compiler with HB_COMPAT_XHB macro. When you
compile Harbour with HB_COMPAT_XHB then HB_ENUMINDEX() will be translated by
compiler to <enum>:__enimIndex()
>

Ok, thanks :-)  BTW, I have built makefile.vc and make_vc.bat for TIP.lib.
How do I commit them ? Should I use SVN and same syntax as CVS ?

What about this remaining error ?

tip.lib(hbinet.obj) : error LNK2019: unresolved external symbol strerror
referenced in function s_inetRecvInternal

Thanks, 

Regards,

Antonio

From druzus at priv.onet.pl  Fri Jul  6 12:51:55 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jul  6 12:52:33 2007
Subject: [Harbour] HB_ENUMINDEX()
In-Reply-To: <468e6e39.2435440a.18e5.ffffba28@mx.google.com>
References: <20070706122142.GB17020@localhost.localdomain>
	<468e6e39.2435440a.18e5.ffffba28@mx.google.com>
Message-ID: <20070706165155.GA23771@localhost.localdomain>

On Fri, 06 Jul 2007, Antonio Linares wrote:
> Ok, thanks :-)  BTW, I have built makefile.vc and make_vc.bat for TIP.lib.
> How do I commit them ? Should I use SVN and same syntax as CVS ?

Very similar,
    svn help
and then
    svn help <command>
f.e.:
    svn help update
can greatly help, 
Use
    svn status
to check which files has been modified and
    svn diff
to create diff patches if you want to see details

> What about this remaining error ?
> tip.lib(hbinet.obj) : error LNK2019: unresolved external symbol strerror
> referenced in function s_inetRecvInternal

Here you will have to find answer yourself in your C compiler documentation.
Check in which library strerror() is defined and link your program with this
library.

best regards,
Przemek
From antonioharbour at gmail.com  Fri Jul  6 13:34:28 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Fri Jul  6 13:33:52 2007
Subject: [Harbour] HB_ENUMINDEX()
In-Reply-To: <20070706165155.GA23771@localhost.localdomain>
Message-ID: <468e7cfa.1936440a.65c7.fffffa0d@mx.google.com>

Przemek, 

>
Very similar,
    svn help
and then
    svn help <command>
>

Thanks!

> Check in which library strerror() is defined and link your program with
this library.

Thanks again! :-)

Best regards,

Antonio

From harbour.01 at syenar.hu  Fri Jul  6 14:10:15 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  6 14:10:19 2007
Subject: [Harbour] HB_ENUMINDEX()
In-Reply-To: <20070706154750.GB17609@localhost.localdomain>
References: <468e28fc.1936440a.65c7.4401@mx.google.com>
	<20070706122142.GB17020@localhost.localdomain>
	<3EE39C13-A61A-4686-896B-A26C588DAFB2@syenar.hu>
	<20070706124538.GA17241@localhost.localdomain>
	<D07EB92E-98C0-47A4-8A34-58597F3F5909@syenar.hu>
	<20070706154750.GB17609@localhost.localdomain>
Message-ID: <9D2FA13B-3A2E-4E8F-A3FA-104AF59A27BD@syenar.hu>

Thanks for all this info (as usual). It's always good to
hear that Harbour's implementation is done right (most
of us probably already suspected though :). All this info
is very useful when porting something from xhb.

As a rule of thumb, I think we need to port every core
code snippet coming from xhb into portable language or
the native Harbour implementation (so that we never use
"hbcompat.ch" or "#ifdef __XHARBOUR__" in core code.)
That's what we've done so far, so that's okey.

For contrib code, we can allow "hbcompat.ch" to ease
or speed up porting, but I'd recommend porting fully
like we do for the core.

If the original contrib developer cares (s)he can retrofit
these portability fixes into the original code. The benefit
is better code quality and xbase portability with no negative
effect.

Brgds,
Viktor

On 2007.07.06., at 17:47, Przemyslaw Czerpak wrote:

> On Fri, 06 Jul 2007, Szak?ts Viktor wrote:
>> An escape route would be if xhb would copy our __ENUM*()
>> implementation then it would start to use it too.
>
> xHarbour's implementation of FOR EACH does not support many of
> Harbour extnesions. Adding support for for __enum*() messages
> is only part of the problem. xHarbour does not have real enumerator
> item type (HB_IT_ENUM in Harbour) and it intorduced many other
> limitations.
> In Harbour you can enumerate more then one variable in one FOR EACH
> loop, f.e. this code:
>     func StringToArray( cValue )
>     local aValue := array( len( cValue ) ), a, c
>        for each a, c in aValue, cValue
>           a := c
>        next
>     return aValue
> cannot be ported to xHarbour though it odes not use any __enum*()
> messages. You will have to make sth like:
>
>     func StringToArray( cValue )
>     local aValue := array( len( cValue ) ), a
>        for each a in aValue
>           a := cValue[ hb_enumIndex() ]
>        next
>     return aValue
>
> but if you create reverted code:
>
>     func ArrayToString( aValue )
>     local cValue := space( len( aValue ) ), a, c
>        for each a, c in aValue, @cValue
>           c := a
>        next
>     return cValue
>
> then using hb_enumIndex() will not be enough because xHarbour
> does not support assign when base enumerated value is string.
> There are many other similar problems, f.e. in xHarbour FOR EACH,
> WITH OBJECT, xBase++ like multivalue macros, etc. do not use HVM
> stack but additional HVM registers which have to be safe/restore
> in many operations what reduce the speed and also in pure Clipper
> code which does not use any FOR EACH / WITH OBJECT or any other
> extensions and the size of these additional register is fixed
> so now in xHarbour these extensions cannot be used in recursive
> programs, f.e. this code:
>       proc main()
>       p({0},1000)
>       return
>       proc p(a,n)
>       local x
>       for each x in a
>          ? ++x
>          if n > 0
>             p(a,n-1)
>             n:=0
>          endif
>       next
>       return
>
> compiled by Harbour shows:
>                1
>                2
>                3
>       ...
>              999
>             1000
>             1001
>
> but when compiled by xHarbour:
>                1
>                2
>                3
>       ...
>               13
>               14
>               15
>       Unrecoverable error 9000: FOR EACH excessive nesting!
>       Called from P(7)
>       Called from P(10)
>       Called from P(10)
>       ...
>       Called from P(10)
>
> etc. so if you need real portability then it will be necessary to
> replace current xHarbour FOR EACH implementation with the Harbour
> one.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Fri Jul  6 17:17:39 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jul  6 17:18:16 2007
Subject: [Harbour] ChangeLog 2007-07-06 23:15 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070706211739.GA21055@localhost.localdomain>

2007-07-06 23:15 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/libct/bitnum.c
  * harbour/contrib/libct/charlist.c
  * harbour/contrib/libct/ctnet.c
  * harbour/contrib/libct/charonly.c
  * harbour/contrib/libct/atadjust.c
  * harbour/contrib/libct/ctmath.c
  * harbour/contrib/libct/ctset.c
  * harbour/contrib/libct/charsort.c
  * harbour/contrib/libct/ctmath.h
  * harbour/contrib/libct/ctset.h
  * harbour/contrib/libct/cterror.ch
  * harbour/contrib/libct/charmix.c
  * harbour/contrib/libct/charevod.c
  * harbour/contrib/libct/charrepl.c
  * harbour/contrib/libct/charswap.c
  * harbour/contrib/libct/charop.c
  * harbour/contrib/libct/color.prg
  + harbour/contrib/libct/blank.prg
  * harbour/contrib/libct/ct.prg
  * harbour/contrib/libct/ct.ch
  * harbour/contrib/libct/charone.c
  * harbour/contrib/libct/ctchksum.c
  * harbour/contrib/libct/ascpos.c
  * harbour/contrib/libct/charmirr.c
  * harbour/contrib/libct/ctc.c
  * harbour/contrib/libct/ct.h
  * harbour/contrib/libct/atnum.c
  * harbour/contrib/libct/ctmisc.prg
  * harbour/contrib/libct/count.c
  * harbour/contrib/libct/ctcrypt.c
  * harbour/contrib/libct/addascii.c
  * harbour/contrib/libct/ctmath2.c
  * harbour/contrib/libct/ctextern.ch
  * harbour/contrib/libct/asciisum.c
  * harbour/contrib/libct/atrepl.c
  * harbour/contrib/libct/ctstr.c
  * harbour/contrib/libct/ctstr.h
    * synced with xHarbour modifications and fixes
    ! some fixes
    * indenting

  * harbour/source/rtl/errorapi.c
    * indenting

  * harbour/source/vm/hashfunc.c
    + added HB_HSETCASEMATCH(), HB_HSETAUTOADD()
    % some minor optimizations

  * harbour/include/hbcompat.ch
    + added hb_checksum() <=> hb_adler()
    * use new HB_HSET*() function to avoid warnings

  * harbour/include/hbcomp.h
  * harbour/include/hbcompdf.h
  * harbour/include/hberrors.h
  * harbour/source/compiler/hbmain.c
  * harbour/source/compiler/harbour.yyc
  * harbour/source/compiler/harbour.y
  * harbour/source/compiler/harbour.yyh
  * harbour/source/compiler/hbgenerr.c
    ! fixed using EXIT/LOOP inside WITH OBJECT / END statement
    ! fixed optimization of empty BEGIN/END sequence when recover has
      EXIT or LOOP statement
    ! forbidden using EXIT and LOOP inside ALWAYS code in BEGIN/END sequence
    ! forbidden using ALWAYS statement if RECOVER code has EXIT or LOOP
      statement

best regards,
Przemek
From druzus at priv.onet.pl  Fri Jul  6 22:01:52 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jul  6 22:02:28 2007
Subject: [Harbour] ChangeLog 2007-07-07 04:00 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070707020152.GA10834@localhost.localdomain>

2007-07-07 04:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  + harbour/contrib/libct/dbftools.c
  - harbour/contrib/libct/dattime2.prg
  * harbour/contrib/libct/ctmath.h
  * harbour/contrib/libct/Makefile
  * harbour/contrib/libct/exponent.c
  + harbour/contrib/libct/cttime.prg
  * harbour/contrib/libct/ctstr.h
  * harbour/contrib/libct/ct.h
  + harbour/contrib/libct/disk.c
  + harbour/contrib/libct/ctstrfil.c
  + harbour/contrib/libct/ctstrfil.h
  - harbour/contrib/libct/datetime.prg
  - harbour/contrib/libct/pad.c
  + harbour/contrib/libct/dattime2.c
  + harbour/contrib/libct/ctpad.c
  + harbour/contrib/libct/datetime.c
    * synced with xHarbour modifications and fixes
    ! some fixes
    * indenting

best regards,
Przemek
From harbour.01 at syenar.hu  Sat Jul  7 05:31:35 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Jul  7 05:31:36 2007
Subject: [Harbour] CHANGELOG: 2007-07-07 11:25 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7c079$Blat.v2.6.1$9c96f2a4$e72c5b1c07bc@127.0.0.1>

2007-07-07 11:25 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * common.mak
     ! OBJEXT  -> HB_OBJ_EXT   
       EXEEXT  -> HB_EXE_EXT   
       DLLEXT  -> HB_DLL_EXT   
       LIBEXT  -> HB_LIB_EXT   
       LIBPREF -> HB_LIB_PREFIX

   - contrib/libct/alt
   - contrib/libct/token1.prg
   - contrib/libct/ctcolton.c
     - Removed obsolete files.
       QUESTION: Shouldn't LIBCT's COLORTON() simply 
       pass the call to HB_COLORTON() instead of replicating 
       the functionality there (in .prg code)?

   * source/rtl/scrollbr.prg
     ! Formatting.

From druzus at priv.onet.pl  Sat Jul  7 05:36:21 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Jul  7 05:36:57 2007
Subject: [Harbour] ChangeLog 2007-07-07 11:35 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070707093621.GA32161@localhost.localdomain>

2007-07-07 11:35 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/compiler/hbusage.c
    * added to credits list some Harbour developers which were missing
      and also some xHarbour developers which are authors of modules
      we borrowed and ported to xHarbour. It's highly possible that
      still some people are missing. If you fill that you or someone
      else should be added to this list then please send a message
      to harbour devel list

best regards,
Przemek
From harbour.01 at syenar.hu  Sat Jul  7 05:53:07 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Jul  7 05:53:13 2007
Subject: [Harbour] Harbour Repository Downloads
In-Reply-To: <200707040101.08518.philb@philb.us>
References: <200707040101.08518.philb@philb.us>
Message-ID: <A017A6A4-179A-45B0-A399-2988B6208956@syenar.hu>

I've added links to the main page.

BTW, I've still managed to access the website using plain FTP
(with a plaintext password).

Shouldn't we rather disable this and force using SCP only?
(to prevent any password sniffing and getting a virus uploaded again.)

Brgds,
Viktor

On 2007.07.04., at 7:01, Phil Barnett wrote:

>
> I have created a cron job that runs every three hours starting at  
> 00:00
> Eastern.  It checks out the trunk branch and creates two files. The  
> process
> takes about 1 minute, so you should be able to safely fetch these  
> files at
> any time other than the top of the hour, where you risk having the  
> existing
> file replaced during your fetch.
>
> You can fetch the files with:
>
> http://www.harbour-project.org/harbour-svn.zip
> and
> http://www.harbour-project.org/harbour-svn.tgz
>
> Can someone please add these download locations to the web site  
> with an
> explanation of what they provide.
>
> I will work on backing up the subversion repository next.
>
> Do you want me to make the repository that I have checked out  
> readable over
> the web as a browsable directory of files?
>
> -- 
> Phil Barnett
> AI4OF
> SKCC #600
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Sat Jul  7 05:53:51 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Jul  7 05:54:26 2007
Subject: [Harbour] CHANGELOG: 2007-07-07 11:25 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <01c7c079$Blat.v2.6.1$9c96f2a4$e72c5b1c07bc@127.0.0.1>
References: <01c7c079$Blat.v2.6.1$9c96f2a4$e72c5b1c07bc@127.0.0.1>
Message-ID: <20070707095351.GB32161@localhost.localdomain>

On Sat, 07 Jul 2007, Szak?ts Viktor wrote:
>        QUESTION: Shouldn't LIBCT's COLORTON() simply 
>        pass the call to HB_COLORTON() instead of replicating 
>        the functionality there (in .prg code)?

These functions are not exactly the same - CT3 functionscan operate
on NN/NN colors though maybe we should add support for such colors
to core GT code in COLORNUM() and COLORSTOSTRING() methods, etxtend
HB_NTOCOLOR() by adding second parameters like in CT3 and then map
CT3 NTOCOLOR() and COLORTON() to Harbour core functions HB_NTOCOLOR()
and HB_COLORTON()

best regards,
Przemek
From harbour.01 at syenar.hu  Sat Jul  7 06:06:57 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Jul  7 06:07:01 2007
Subject: [Harbour] ChangeLog 2007-07-07 11:35 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070707093621.GA32161@localhost.localdomain>
References: <20070707093621.GA32161@localhost.localdomain>
Message-ID: <1306F713-DF68-4FCE-8531-A76098C8F121@syenar.hu>

Seeing the list it hit me that these mail addresses
would be better masked to avoid being harvested
by e-mail collectors.

There are sites publishing these sources on the
web as is (like www.koders.com, Google Code Search).

What do you think?

Brgds,
Viktor

(I'd prefer replacing @ with a space or maybe /at/, but
the latter is easier to detect IMO.)

On 2007.07.07., at 11:36, Przemyslaw Czerpak wrote:

> 2007-07-07 11:35 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/compiler/hbusage.c
>     * added to credits list some Harbour developers which were missing
>       and also some xHarbour developers which are authors of modules
>       we borrowed and ported to xHarbour. It's highly possible that
>       still some people are missing. If you fill that you or someone
>       else should be added to this list then please send a message
>       to harbour devel list
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Sat Jul  7 06:22:46 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Jul  7 06:23:23 2007
Subject: [Harbour] ChangeLog 2007-07-07 11:35 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <1306F713-DF68-4FCE-8531-A76098C8F121@syenar.hu>
References: <20070707093621.GA32161@localhost.localdomain>
	<1306F713-DF68-4FCE-8531-A76098C8F121@syenar.hu>
Message-ID: <20070707102246.GA339@localhost.localdomain>

On Sat, 07 Jul 2007, Szak?ts Viktor wrote:
> Seeing the list it hit me that these mail addresses
> would be better masked to avoid being harvested
> by e-mail collectors.
> There are sites publishing these sources on the
> web as is (like www.koders.com, Google Code Search).
> What do you think?

I agree.

best regards,
Przemek
From toninhofwi at yahoo.com.br  Sat Jul  7 06:23:32 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sat Jul  7 06:24:08 2007
Subject: [Harbour] ChangeLog 2007-07-07 11:35 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070707093621.GA32161@localhost.localdomain>
References: <20070707093621.GA32161@localhost.localdomain>
Message-ID: <0cqu839sl0sim77u0e0b5tkuu14eioqdis@4ax.com>

>    * added to credits list some Harbour developers which were missing
>      and also some xHarbour developers which are authors of modules
>      we borrowed and ported to xHarbour.

Thanks !


Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From druzus at priv.onet.pl  Sat Jul  7 06:25:41 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Jul  7 06:26:17 2007
Subject: [Harbour] OFFLINE NOTE
Message-ID: <20070707102541.GB339@localhost.localdomain>

Hi All,

I'll be offline for a week. When I'll be back I'll try to answer to
all messages to me.

best regards,
Przemek
From harbour.01 at syenar.hu  Sat Jul  7 06:29:32 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Jul  7 06:29:31 2007
Subject: [Harbour] CHANGELOG: 2007-07-07 12:25 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7c081$Blat.v2.6.1$b52c6c10$125a8ed9d2068@127.0.0.1>

2007-07-07 12:25 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * source/compiler/hbusage.c
     * Steps done to protect e-mail addresses against e-mail 
       scanners.

From harbour.01 at syenar.hu  Sat Jul  7 06:30:54 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Jul  7 06:30:56 2007
Subject: [Harbour] OFFLINE NOTE
In-Reply-To: <20070707102541.GB339@localhost.localdomain>
References: <20070707102541.GB339@localhost.localdomain>
Message-ID: <CD0C93F4-4FD4-415F-A8D5-F6981E8693C4@syenar.hu>

Have a nice time Przemek, I hope this is a holiday :)

Brgds,
Viktor

On 2007.07.07., at 12:25, Przemyslaw Czerpak wrote:

> Hi All,
>
> I'll be offline for a week. When I'll be back I'll try to answer to
> all messages to me.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From carlos.mora at cpcipc.org  Sat Jul  7 06:33:21 2007
From: carlos.mora at cpcipc.org (Carlos Mora)
Date: Sat Jul  7 06:33:58 2007
Subject: [Harbour] Looking for HDO
Message-ID: <468F6BF1.1030401@cpcipc.org>

Some years ago I saw some sources about a Harbour Data Object, I think I 
saw it on Harbour's contribs but not absolutly sure, may be in xHarbour. 
The autor was italian. Does anybody has any reference to that? I've been 
looking for it in Harbour and xHarbour contribs but without luck.

Regards,

Carlos.
From harbour.01 at syenar.hu  Sat Jul  7 06:35:56 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Jul  7 06:35:54 2007
Subject: [Harbour] CHANGELOG: 2007-07-07 12:35 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7c082$Blat.v2.6.1$9a1c7a2c$15c58d8119808@127.0.0.1>

2007-07-07 12:35 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * common.mak
     ! Added dbsql.c

From dmacias at mail.udg.mx  Sat Jul  7 07:33:29 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sat Jul  7 07:33:35 2007
Subject: [Harbour] Re: problem with Mysql date field
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <468F7A09.70509@mail.udg.mx>

 >I would like to know if any one of you  have this problem :

 >I can't get any  data from fields type DATE  in MySql when working with
 >Harbour with HMG

 > like in this example:

 >oQuery := oServer:Query( "Select * FROM  teste  WHERE  id =  1" )

 >   oRow           :=  oQuery:GetRow(1)
 >   oID              :=  oRow:fieldGet(1)
 >   oName        :=  oRow:fieldGet(2)
 >   odate          :=  oRow:fieldGet(3)

 >The variable oDate that should be have a DATE  like "2007-07-06"  from 
 >the
 >field type DATE in MySql , but only returns  a ( " ) ...

 >best regards

 >C.Reis

I just checked with current Harbour MySQL code and is working fine
Date fields are updated/retrieved without problems

I tested in two MySQL environments, with a table with 5 date fields
a) MySQL 4.1.7 under OS/2
b) www.freesql.org ( MySQL version unknown )

If you wish you can test my table used in data fields tests:
MySQL server: www.freesql.org
user: harbour
passw: harbour
database: harbour
table: libsua

libsua.dbf is small: 7204 bytes, 33 records
( warnig: some records are dirty from dbf file, and not is MySQL fault )

David Macias


From niki at synel.co.il  Mon Jul  9 05:02:44 2007
From: niki at synel.co.il (Chen Kedem)
Date: Mon Jul  9 05:09:59 2007
Subject: [Harbour] Re: SVN repository now live
References: <4678DA4D.5061@synel.co.il>
Message-ID: <4691F9B4.6BB5@synel.co.il>

I could not find a working SVN client for my Win95 machine :(
but I manage to find a version that work on my NT4
(the latest v1.4.4 version does not work on NT).

SVN v1.2.3
http://subversion.tigris.org/servlets/ProjectDocumentView?documentID=25188&showInfo=true

With CVS I used to fetch the latest updates like that:

SET HOMEDRIVE=C:
SET HOMEPATH=\CVS
SET CVS_RSH=ssh
SET HOME=C:\CVS\
SET CVSROOT=:ext:ckedem@harbour-project.cvs.sourceforge.net:/cvsroot/harbour-project
cvs update -d -P >c:\tmp\harb.log

Is this the equivalent:
svn co https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/harbour e:\harbour >c:\tmp\harb.log

Can someone please update the doc/howtocvs.txt file
(should it be renamed to howtosvn.txt ?)


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From antonioharbour at gmail.com  Mon Jul  9 09:26:35 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Jul  9 07:26:51 2007
Subject: [Harbour] Re: SVN repository now live
In-Reply-To: <4691F9B4.6BB5@synel.co.il>
References: <4678DA4D.5061@synel.co.il> <4691F9B4.6BB5@synel.co.il>
Message-ID: <A034042F-A65A-4098-B16C-204D6DBA65B4@gmail.com>

Chen,

> I could not find a working SVN client for my Win95 machine :(

I found a TortoiseSVN that is ok for Win95:

http://tortoisesvn.net/node/180

regards,

Antonio


From niki at synel.co.il  Mon Jul  9 07:35:00 2007
From: niki at synel.co.il (Chen Kedem)
Date: Mon Jul  9 10:39:14 2007
Subject: [Harbour] Re: SVN repository now live
References: <4678DA4D.5061@synel.co.il> <4691F9B4.6BB5@synel.co.il>
Message-ID: <46921D64.41B1@synel.co.il>

Antonio,

> I found a TortoiseSVN that is ok for Win95:
> http://tortoisesvn.net/node/180

Thanks, I saw that. It might only work if you have IE installed
on the Win95, which I don't and it failed during installation
requesting a newer version of some DLL's.

At least I have it working on my other machine.


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From soporte at dsgsoftware.com  Tue Jul 10 05:00:50 2007
From: soporte at dsgsoftware.com (=?iso-8859-2?Q?Juan_G=E1lvez?=)
Date: Tue Jul 10 05:01:39 2007
Subject: [Harbour] hbcompat.ch
References: <000f01c7be0e$c021f920$1700000a@PcJuanxp><20070704091328.GA17907@localhost.localdomain><005401c7be22$0e4ecfc0$1700000a@PcJuanxp>
	<20070704125603.GA28793@localhost.localdomain>
Message-ID: <000e01c7c2d0$d6391600$1700000a@PcJuanxp>

Przemek,

I think you has to change hb_adler() to hb_adler32() on hbcompat.ch.

Best regards
Juan
From creis at gem51.com  Tue Jul 10 09:14:12 2007
From: creis at gem51.com (Carlos Reis)
Date: Tue Jul 10 08:12:55 2007
Subject: [Harbour] Re: problem with Mysql date field
Message-ID: <002c01c7c2f4$3766ef10$0202a8c0@star1>

Hi !! David

Thanks for your reply.
I tried to work with your database, everything  works fine  but,
unfortunately  as I suspected the fields  type DATE
only returns  (")

S.O.  Windows XP
Harbour  : version  0.99.3
Harbour MiniGUI version 2.0.031 (HMG)
LibmySql.DLL    1.272 KB of  09-03-2006


best regards
C.Reis



From: David Arturo Macias Corona <dmacias@mail.udg.mx>
Subject: [Harbour] Re: problem with Mysql date field
To: harbour@harbour-project.org

 >I would like to know if any one of you  have this problem :

 >I can't get any  data from fields type DATE  in MySql when working with
 >Harbour with HMG

 > like in this example:

 >oQuery := oServer:Query( "Select * FROM  teste  WHERE  id =  1" )

 >   oRow           :=  oQuery:GetRow(1)
 >   oID              :=  oRow:fieldGet(1)
 >   oName        :=  oRow:fieldGet(2)
 >   odate          :=  oRow:fieldGet(3)

 >The variable oDate that should be have a DATE  like "2007-07-06"  from
 >the
 >field type DATE in MySql , but only returns  a ( " ) ...

 >best regards

 >C.Reis

I just checked with current Harbour MySQL code and is working fine
Date fields are updated/retrieved without problems

I tested in two MySQL environments, with a table with 5 date fields
a) MySQL 4.1.7 under OS/2
b) www.freesql.org ( MySQL version unknown )

If you wish you can test my table used in data fields tests:
MySQL server: www.freesql.org
user: harbour
passw: harbour
database: harbour
table: libsua

libsua.dbf is small: 7204 bytes, 33 records
( warnig: some records are dirty from dbf file, and not is MySQL fault )

David Macias



From niki at synel.co.il  Wed Jul 11 03:08:10 2007
From: niki at synel.co.il (Chen Kedem)
Date: Wed Jul 11 03:07:47 2007
Subject: [Harbour] Re: problem with Mysql date field
Message-ID: <469481DA.3740@synel.co.il>

Carlos,

> I can't get any  data from fields type DATE in MySql

Can you please run the following sample and tell me what is
the output, also try to print this value from within your program
just before you fetch the data from the database:

--tt30.prg--
proc test
? set(4)
------------

set(4) in the date format, the default in Clipper is mm/dd/yy
but in /contrib/mysql/tmysql.prg the date read from mySql is
converted into text by checking some hard coded date format
values, and all of them use 4 digits year format (like mm/dd/yyyy).
When the date format is unknown, the program put "" instead.
This happen in functions GetRow() and ClipValue2SQL()

So a quick fix for you is probably to add SET CENTURY ON
to your program, or modify the date format to something from
the list found in tmysql.prg 


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From harbour.01 at syenar.hu  Wed Jul 11 03:53:23 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul 11 03:53:28 2007
Subject: [Harbour] CHANGELOG: 2007-07-11 09:52 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7c390$Blat.v2.6.1$8e921034$17af87ba908ce@127.0.0.1>

2007-07-11 09:52 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * doc/howtocvs.txt
     * Adapted for SVN (roughly).

   * contrib/mysql/tmysql.prg
     ! Fixed converting MySql date to Harbour date.
       (Thanks Chen)

From harbour.01 at syenar.hu  Wed Jul 11 03:54:39 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul 11 03:54:42 2007
Subject: [Harbour] CHANGELOG: 2007-07-11 09:53 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7c390$Blat.v2.6.1$bbaf0f2c$15fc030a0aac8@127.0.0.1>

2007-07-11 09:53 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   - doc/howtocvs.txt
   + doc/howtosvn.txt
     * File renamed (using 'svn rename').

From harbour.01 at syenar.hu  Wed Jul 11 03:58:53 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul 11 03:58:57 2007
Subject: [Harbour] CHANGELOG: 2007-07-11 09:58 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7c391$Blat.v2.6.1$52db29bc$18bcc53f4a2ea@127.0.0.1>

2007-07-11 09:58 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * contrib/mysql/tmysql.prg
     ! Some further date fixes. (pls test)

From dmacias at mail.udg.mx  Wed Jul 11 05:52:33 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Jul 11 05:52:36 2007
Subject: [Harbour] Re: problem with Mysql date field
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <4694A861.6040301@mail.udg.mx>

 > 2007-07-11 09:58 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
 >    * contrib/mysql/tmysql.prg
 >      ! Some further date fixes. (pls test)

Viktor (and Chen):

Thanks for your changes, it can resolve problem of Carlos

Two observations:

1) In METHOD GetRow(nRow) CLASS TMySQLQuery
---------------------------------
// Date format YYYY-MM-DD
  ::aRow[i] := hb_SToD(SubStr(::aRow[i], 6, 2) + Right(::aRow[i], 2) + 
Left(::aRow[i], 4))
---------------------------------

If source it is YYYY-MM-DD, why you send mmddyyyy to hb_SToD() ?
As I know it must be yyyymmdd

  ::aRow[i] := hb_SToD( Left(::aRow[i], 4) + SubStr(::aRow[i], 6, 2) + 
Right(::aRow[i], 2) )


2) In static function ClipValue2SQL(Value)
--------------------------------
// MySQL dates are like YYYY-MM-DD
cValue := "'"+StrZero(Year(Value), 4)  + "." + StrZero(Month(Value), 2) 
+ "." + StrZero(Day(Value), 2) + "'"
--------------------------------

I am not sure
Why you use 'yyyy.mm.dd' (".") and not 'yyyy-mm-dd' ("-") ?


David Macias


From harbour.01 at syenar.hu  Wed Jul 11 06:03:54 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul 11 06:03:55 2007
Subject: [Harbour] Re: problem with Mysql date field
In-Reply-To: <4694A861.6040301@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<4694A861.6040301@mail.udg.mx>
Message-ID: <49D832B5-7545-4D0A-884F-0039DCCFA7B6@syenar.hu>

Hi David,

> If source it is YYYY-MM-DD, why you send mmddyyyy to hb_SToD() ?
> As I know it must be yyyymmdd
>
>  ::aRow[i] := hb_SToD( Left(::aRow[i], 4) + SubStr(::aRow[i], 6, 2)  
> + Right(::aRow[i], 2) )
>

> 2) In static function ClipValue2SQL(Value)
> --------------------------------
> // MySQL dates are like YYYY-MM-DD
> cValue := "'"+StrZero(Year(Value), 4)  + "." + StrZero(Month 
> (Value), 2) + "." + StrZero(Day(Value), 2) + "'"
> --------------------------------
>
> I am not sure
> Why you use 'yyyy.mm.dd' (".") and not 'yyyy-mm-dd' ("-") ?

You're right. I'll commit these fixes, thanks for you comments.

Brgds,
Viktor



From harbour.01 at syenar.hu  Wed Jul 11 06:05:01 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul 11 06:05:04 2007
Subject: [Harbour] CHANGELOG: 2007-07-11 12:04 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7c3a2$Blat.v2.6.1$f2253934$17bbc5c361ca8@127.0.0.1>

2007-07-11 12:04 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * contrib/mysql/tmysql.prg
     ! Some fixes for the previous fixes.

From dmacias at mail.udg.mx  Wed Jul 11 07:35:30 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Jul 11 07:35:33 2007
Subject: [Harbour] Re: problem with Mysql date field
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <4694C082.60705@mail.udg.mx>

> Hi !! David

 > Thanks for your reply.
 > I tried to work with your database, everything  works fine  but,
 > unfortunately  as I suspected the fields  type DATE
 > only returns  (")

 > S.O.  Windows XP
 > Harbour  : version  0.99.3
 > Harbour MiniGUI version 2.0.031 (HMG)
 > LibmySql.DLL    1.272 KB of  09-03-2006

 > best regards
 > C.Reis


I tested again, now under WinXP Pro SP2 and it work fine. Previous tests 
were under OS/2

Review observations of Chen Kedem and changes of Viktor
Now is more clear what can be your problem
In my test I use date AMERICAN and SET CENTURY ON
With Viktor changes, it will not matter and any date format can be used

David Macias




From randy at palmasdev.com  Wed Jul 11 13:58:25 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Wed Jul 11 13:57:42 2007
Subject: [Harbour] Suggestion to improve self-documenting PRG source
In-Reply-To: <468e6e39.2435440a.18e5.ffffba28@mx.google.com>
References: <20070706122142.GB17020@localhost.localdomain>
	<468e6e39.2435440a.18e5.ffffba28@mx.google.com>
Message-ID: <20070711175738.464892515@smtp.tor.pathcom.com>

Hi all,

When passing a var to a function by reference, it would be nice if 
the function could include the "@" symbol (which would be ignored by 
the compiler) but would improve the self-documenting nature of the 
PRG source code.

For example, currently you would do this:
...
local SomeVar
SomeFunc( @SomeVar )
...
function SomeFunc( /*@*/SomeParam )

But this would be nicer code:

function SomeFunc( @SomeParam )

Again, it would be ignored/removed by the compiler but helps to 
improve the quality of the PRG source.

Regards,
Randy.

From harbour.01 at syenar.hu  Wed Jul 11 14:21:45 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul 11 14:21:48 2007
Subject: [Harbour] Suggestion to improve self-documenting PRG source
In-Reply-To: <20070711175738.464892515@smtp.tor.pathcom.com>
References: <20070706122142.GB17020@localhost.localdomain>
	<468e6e39.2435440a.18e5.ffffba28@mx.google.com>
	<20070711175738.464892515@smtp.tor.pathcom.com>
Message-ID: <9E46E1D6-34A1-4C89-8DDE-502B0AC3EF47@syenar.hu>

Hi Randy,

We've visited this topic in 1999 October and the group
conclusion back then was that it would be better and also
back/cross portable, compatible and in line with strong
typing syntax, if we would rather use "BY REF" (or some
similar PP-able syntax), for example this way:

#xtranslate BY REF =>

FUNCTION SomeFunc( cNormal, cRef BY REF )
	cRef := "newvalue"
	RETURN NIL

While I fully agree with your intention and was proposing
the same thing, I tend to agree with the above solution.

Brgds,
Viktor

---------------------------------------------
From: Dave Pearson <davep@hagbard.demon.co.uk>

On Wed, Oct 27, 1999 at 06:26:34PM +0200, Viktor Szakats wrote:


> What do you think about extending the function/procedure declaration
> syntax, by allowing the usage of the @ character as a parameter  
> prefix, to
> indicate for the code reader that the parameter should be passed by
> reference.
>
> Like:
>
> FUNCTION hb_fsFNameSplit( cFull, @cPath, @cName, @cExt )
> ...
> RETURN NIL
>

This seems to be extra syntax (or more overriding of the '@' operator  
to be
precise) for no real gain. Indicating that a parameter should be  
passed by
reference is the job of proper documentation and/or comments, not the  
job of
language syntax.

For example, "proper" commentary for a function implementation:

,----
| /* SplitName( <cName>, @<cSurname>, @<cFirstName> ) --> lMale */
|
| Function SplitName( cName, cSurname, cFirstName )
`----

Perhaps some in-line comments:

,----
| Function SplitName( cName, /* ByRef */ cSurname, /* ByRef */  
cFirstName )
`----

Perhaps even a command-like syntax:

,----
| #xtranslate BY REF =>
|
| Function SplitName( cName, cSurname BY REF, cFirstName BY REF )
`----

You'll note that the above styles are fully compatible with other CA- 
Clipper
conforming compilers, something which can't be said for the extension  
you
propose.
---------------------------------------------

---------------------------------------------
From: Ryszard Glab <rglab@imid.med.pl>

Viktor Szakats wrote:


>> ,----
>> | #xtranslate BY REF =>
>> |
>> | Function SplitName( cName, cSurname BY REF, cFirstName BY REF )
>> `----
>>
>> You'll note that the above styles are fully compatible with other  
>> CA-Clipper
>> conforming compilers, something which can't be said for the  
>> extension you
>> propose.
>>
>
> OK, convinced, I like the BY REF form.
>

   We can also use an alternative method: AS REFER since we are
supporting AS CHARACTER, AS LOGICAL etc.
Or even more restrictive method used in VO: REF CHARACTER, REF LOGICAL

Regards, Ryszard
---------------------------------------------

On 2007.07.11., at 19:58, Randy Portnoff wrote:

> Hi all,
>
> When passing a var to a function by reference, it would be nice if  
> the function could include the "@" symbol (which would be ignored  
> by the compiler) but would improve the self-documenting nature of  
> the PRG source code.
>
> For example, currently you would do this:
> ...
> local SomeVar
> SomeFunc( @SomeVar )
> ...
> function SomeFunc( /*@*/SomeParam )
>
> But this would be nicer code:
>
> function SomeFunc( @SomeParam )
>
> Again, it would be ignored/removed by the compiler but helps to  
> improve the quality of the PRG source.
>
> Regards,
> Randy.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mpaliwoda at interia.pl  Wed Jul 11 14:59:37 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Jul 11 14:59:47 2007
Subject: [Harbour] A few current makefile system questions
Message-ID: <46952899.9030507@interia.pl>

Hi all,

It's a vacation time and I finaly was able to find some free time
to play a little bit with Harbour again. Unfortunately the whole
last year or so wasn't very successfull, so I wasn't even able to
follow the devel-list posts. Sorry fot that.

I just tried to build Harbour under Cygwin environment after a very
very long time and I found I don't really like current GNU makefile
system behavior. I don't know if this behavior is "by design" or it
is caused by my lack of knowledge, so I'd like to raise few
questions / remarks here, in hope to get answers / suggestions /
corrections :

1. Why does not make process stop after an error occured in any of
    a built module ? Even though an error occures for example in
    building "libcommon.lib" the build process continues "uselessly".
    It's very annoying ( at least to me ;-) ). Does it suggest that
    my Cygwin environment is broken ? Is this behavior repeatable
    on Linux too ? If so - why ?

2. Why are build tools ($CC, $LD) hard coded currently ? It is not
    possible to set it to something like CC=<my CC compiler> in a
    batch file to use other version of gcc. Such a feature will also
    be required for someone who wants to perform a cross-compilation.
    In fact this is my "main objection" to current GNU makefile system.
    An I missing something here ?

    [I suspect that this is also true for Linux, but I did not test it.]

3. How is it possible to do "any kind of cross-compilation" with our
    Makefile systems ? (this is a question for our all makefile systems,
    not only GNU one).
    Building Harbour libs requires to use ppgen.exe and Harbour.exe,
    built during the build process, but cross-compiling means that these
    built tools will (most likely) not run on a machine where we are
    cross-compiling. How should it be solved ? Again - am I missing
    something here ?

4. What are benefits of using "distributed makefiles" (makefiles in
    each module directory) as opposed to one "centralized" makefile ?
    (sorry for the "wording" - I wasn't able to describe it better)

Thanks in advance.

-- 

Regards
  Marek



-----------------R--E--K--L--A--M--A-----------------
Lepsze wiadomosci z kraju i z zagranicy.
Nie wierzysz? Sprawdz - http://wiadomosci.interia.pl/

From e.m.giordano at emagsoftware.it  Thu Jul 12 12:05:20 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Thu Jul 12 12:06:04 2007
Subject: [Harbour] Bug in SORT command
Message-ID: <007a01c7c49e$72c24680$ca64fea9@emag>

This is the sample. Memo fields are empty in the result DBT:

FUNCTION MAIN()

    DBCREATE( "TMPTEST", { { "TEST", "C", 10, 0 }, { "MEMO", "M", 10, 
0 } } )

    USE TMPTEST

    APPEND BLANK

    REPLACE FIELD -> test WITH "Test 3"
    REPLACE FIELD -> memo WITH "Test 3"

    APPEND BLANK

    REPLACE FIELD -> test WITH "Test 2"
    REPLACE FIELD -> memo WITH "Test 2"

    APPEND BLANK

    REPLACE FIELD -> test WITH "Test 1"
    REPLACE FIELD -> memo WITH "Test 1"

    SORT ON FIELD -> test TO TMPSORT

    CLOSE

    RETURN NIL

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From creis at gem51.com  Fri Jul 13 11:18:42 2007
From: creis at gem51.com (Carlos Reis)
Date: Fri Jul 13 10:16:24 2007
Subject: [Harbour] Re: problem with Mysql date field 
Message-ID: <003101c7c561$1af2fc60$0202a8c0@star1>

Hi all
Sorry for delay to replay . I would like to thank all of you that tried to
resolve this problem of
date!!

Chen ,   the output just before fetch the data from the database is
"yyyy-mm-dd"

I test a program that David Macias sent to me  (thanks) everthing works fine
even the DATE fields , but
 the problem of the fields type  DATE in MySQL is not resolved yet to me.

As I said I work with HMG from Roberto Lopez with is last version 2.0.031
I made my programs with is IDE.

The  HMG install the last version of Harbour, and the libraries
with extension"a" like libmysql.a and so on.

As a simple user,  this is very good to me , because I only have to make the
prg's and the  IDE compile and made the EXE.

Now (sorry my ignorance) , how  can I implement your changes in this
environment  (HMG and IDE) ?

Best Regards

Carlos Reis

>Can you please run the following sample and tell me what is
>the output, also try to print this value from within your program
>just before you fetch the data from the database:
>
>--tt30.prg--
>proc test
>? set(4)
>------------
>
>set(4) in the date format, the default in Clipper is mm/dd/yy
>but in /contrib/mysql/tmysql.prg the date read from mySql is
>converted into text by checking some hard coded date format
>values, and all of them use 4 digits year format (like mm/dd/yyyy).
>When the date format is unknown, the program put "" instead.
>This happen in functions GetRow() and ClipValue2SQL()


From druzus at priv.onet.pl  Fri Jul 13 17:10:45 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jul 13 17:11:23 2007
Subject: [Harbour] Suggestion to improve self-documenting PRG source
In-Reply-To: <9E46E1D6-34A1-4C89-8DDE-502B0AC3EF47@syenar.hu>
References: <20070706122142.GB17020@localhost.localdomain>
	<468e6e39.2435440a.18e5.ffffba28@mx.google.com>
	<20070711175738.464892515@smtp.tor.pathcom.com>
	<9E46E1D6-34A1-4C89-8DDE-502B0AC3EF47@syenar.hu>
Message-ID: <20070713211045.GA5240@localhost.localdomain>

On Wed, 11 Jul 2007, Szak?ts Viktor wrote:
> We've visited this topic in 1999 October and the group
> conclusion back then was that it would be better and also
> back/cross portable, compatible and in line with strong
> typing syntax, if we would rather use "BY REF" (or some
> similar PP-able syntax), for example this way:
> #xtranslate BY REF =>
> FUNCTION SomeFunc( cNormal, cRef BY REF )
> 	cRef := "newvalue"
> 	RETURN NIL
> While I fully agree with your intention and was proposing
> the same thing, I tend to agree with the above solution.

    #command PROCEDURE <name>( [<any,...>] @ <any,...> ) =>           ;
         _DEF_ PROCEDURE <name>( [ <any>] )
    #command STATIC PROCEDURE <name>( [<any,...>] @ <any,...> ) =>    ;
         _DEF_ STATIC PROCEDURE <name>( [ <any>] )
    #command INIT PROCEDURE <name>( [<any,...>] @ <any,...> ) =>      ;
         _DEF_ INIT PROCEDURE <name>( [ <any>] )
    #command EXIT PROCEDURE <name>( [<any,...>] @ <any,...> ) =>      ;
         _DEF_ EXIT PROCEDURE <name>( [ <any>] )

    #command FUNCTION <name>( [<any,...>] @ <any,...> ) =>            ;
         _DEF_ FUNCTION <name>( [ <any>] )
    #command STATIC FUNCTION <name>( [<any,...>] @ <any,...> ) =>     ;
         _DEF_ STATIC FUNCTION <name>( [ <any>] )
    #command INIT FUNCTION <name>( [<any,...>] @ <any,...> ) =>       ;
         _DEF_ INIT FUNCTION <name>( [ <any>] )
    #command EXIT FUNCTION <name>( [<any,...>] @ <any,...> ) =>       ;
         _DEF_ EXIT FUNCTION <name>( [ <any>] )

    #command _DEF_ [<scope:static,init,exit>] <type:PROCEDURE,FUNCTION>  ;
         <name>([@]<p1>[,[@]<parms>]) =>                             ;
         <scope> <type> <name>( p1[, <parms>] )

above PP rules also works in Clipper. Use them to compile code like:

    init proc p1( @p1, @p2, @p3, @p4, @p5 )
    exit proc p2( p1, p2, @p3 )
    static proc p2( p1, @p2, p3, @p4, @p5 )
    proc p4( p1, @p2, p3, @p4, @p5 )
    init func f1( @p1, @p2, @p3, @p4, p5 )
    return NIL
    exit func f2( p1, p2, @p3 )
    return NIL
    static func f3( p1, @p2, p3, p4, @p5 )
    return NIL
    func f4( p1, @p2, p3, @p4, p5 )
    return NIL

best regards,
Przemek
From randy at palmasdev.com  Fri Jul 13 17:15:57 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Fri Jul 13 17:15:14 2007
Subject: [Harbour] Suggestion to improve self-documenting PRG source
In-Reply-To: <20070713211045.GA5240@localhost.localdomain>
References: <20070706122142.GB17020@localhost.localdomain>
	<468e6e39.2435440a.18e5.ffffba28@mx.google.com>
	<20070711175738.464892515@smtp.tor.pathcom.com>
	<9E46E1D6-34A1-4C89-8DDE-502B0AC3EF47@syenar.hu>
	<20070713211045.GA5240@localhost.localdomain>
Message-ID: <20070713211510.D98F12613@smtp.tor.pathcom.com>

Got it! Thanks to you and Viktor for your help.

From druzus at priv.onet.pl  Sat Jul 14 06:45:53 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Jul 14 06:46:32 2007
Subject: [Harbour] ChangeLog 2007-07-14 12:31 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070714104553.GA1922@localhost.localdomain>

2007-07-14 12:31 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcompat.ch
    ! changed hb_adler() to hb_adler32()

  * harbour/contrib/libct/dattime2.c
    * changed WEEK() to be exactly CT3 compatible. I do not know why
      but in CT3 WEEK() checks if the first character of date format
      is 'd' or 'D' and in such case uses differ algorithm to calculate
      week number.

best regards,
Przemek
From mbelgrano at deltain.it  Sat Jul 14 07:38:46 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Jul 14 07:39:24 2007
Subject: [Harbour] Wich Implementation planed for GT
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A776@SRV02.deltain.net>

Is possible extend gt capability for create independent console/windows?

My dream IS have several windows opened, each having its own "classical
Clipper input reading" such as @...GET...READ session
running. SO in each screen/console I can write a independent program

 

Is possible a standard way for "merge" gt app with some other GUI
library?

>From a console window capability of create GUI windows and viceversa

I have seen this capability from gtwvw and hwgui. But is made from
special code in hwgui



Is possible having a common interface for basic GUI_* action?

Made more simple switch from a harbour GUI to another

 

When is planed the GTWVW porting in harbour?

 

Thanks in advance

 

Massimo Belgrano <mailto:mbelgrano@deltain.com> 

http://www.deltain.it <http://www.deltain.it/>  
 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070714/8116dfe6/attachment.html
From druzus at priv.onet.pl  Sat Jul 14 07:41:29 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Jul 14 07:42:03 2007
Subject: [Harbour] A few current makefile system questions
In-Reply-To: <46952899.9030507@interia.pl>
References: <46952899.9030507@interia.pl>
Message-ID: <20070714114129.GB1922@localhost.localdomain>

On Wed, 11 Jul 2007, Marek Paliwoda wrote:
> It's a vacation time and I finaly was able to find some free time
> to play a little bit with Harbour again. Unfortunately the whole
> last year or so wasn't very successfull, so I wasn't even able to
> follow the devel-list posts. Sorry fot that.

I hope this one will be better for you and your family.

> I just tried to build Harbour under Cygwin environment after a very
> very long time and I found I don't really like current GNU makefile
> system behavior. I don't know if this behavior is "by design" or it
> is caused by my lack of knowledge, so I'd like to raise few
> questions / remarks here, in hope to get answers / suggestions /
> corrections :
> 1. Why does not make process stop after an error occured in any of
>    a built module ? Even though an error occures for example in
>    building "libcommon.lib" the build process continues "uselessly".
>    It's very annoying ( at least to me ;-) ). Does it suggest that
>    my Cygwin environment is broken ? Is this behavior repeatable
>    on Linux too ? If so - why ?

I do not know if it was intentional or it's a side effect of
implementation. In shell environment I can redirect stderr to
separate file so it's not a problem for me at all because I can
see only error / warning messages. I even found it very useful
because log from single make command it's enough to tell what
libraries / header files are missing. Without it I will have to
ask about logs from repeated compilation after each "fix" when
some ask me for a help. Though we change it and can use GNU make
switch to not interrupt build process after errors.
In configure/<platform>/dir.cf you will find DIR_RULE which have
to be updated to interrupt build process after error.
Continuing compilation on erros is also useful when only some
additional parts of Harbour cannot be created, f.e. some GT
drivers but rest will work so users can create working Harbour
binaries even if he cannot create GTXWC due to missing XWindow
system. Please note that we are not using autoconf. I hard coded
some detection rules in make_{gnu,tgz}.sh but in some cases they
may not work as expected.

> 2. Why are build tools ($CC, $LD) hard coded currently ? It is not
>    possible to set it to something like CC=<my CC compiler> in a
>    batch file to use other version of gcc. Such a feature will also
>    be required for someone who wants to perform a cross-compilation.
>    In fact this is my "main objection" to current GNU makefile system.
>    An I missing something here ?

I think that authors decided that in such way new <compiler>.cf file
should be used, f.e. you can create .cf file where non of predefined
*_RULE variables will be overloaded.

>    [I suspect that this is also true for Linux, but I did not test it.]
> 3. How is it possible to do "any kind of cross-compilation" with our
>    Makefile systems ? (this is a question for our all makefile systems,
>    not only GNU one).
>    Building Harbour libs requires to use ppgen.exe and Harbour.exe,
>    built during the build process, but cross-compiling means that these
>    built tools will (most likely) not run on a machine where we are
>    cross-compiling. How should it be solved ? Again - am I missing
>    something here ?

Please look at make_xmingw.sh - it needs native platform builds of
ppgen and harbour.
Anyhow in my Linux box using WINE and GNU make system I can create
also other W32 binaries, f.e. BCC32, XCC, OpenWatcom and in such
case I do not use any native binaries.

> 4. What are benefits of using "distributed makefiles" (makefiles in
>    each module directory) as opposed to one "centralized" makefile ?
>    (sorry for the "wording" - I wasn't able to describe it better)

It depends on preferences. F.e. I used to work in some directory and
when I want to compile only the code I'm changing then I simply execute
'make'. If I want to cleanly rebuild only some parts of code (f.e. one
library I can execute 'make clean' in chosen directory, etc. I can also
very easy switch between compilers and platforms by changing environment
variables or passing them as make arguments. But in fact these are only
my personal preferences. IMHO it will be good to have alternative GNU
Makefile which will use common.mak.
I'm attaching simple scripts which converts common.mak to common.cf
which is compatible with GNU make. So far I haven't found time to create
makefile.gcc - I will have to analyze what makefile.{bcc,vc} exactly does
first. If you have a while and you can create it then it will be nice ;-)

best regards,
Przemek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: bldgmak.sh
Type: application/x-sh
Size: 711 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070714/cef44727/bldgmak.sh
From druzus at priv.onet.pl  Sat Jul 14 08:12:38 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Jul 14 08:13:14 2007
Subject: [Harbour] Wich Implementation planed for GT
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809A776@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03809A776@SRV02.deltain.net>
Message-ID: <20070714121238.GA25341@localhost.localdomain>

On Sat, 14 Jul 2007, Massimo Belgrano wrote:
> Is possible extend gt capability for create independent console/windows?
> My dream IS have several windows opened, each having its own "classical
> Clipper input reading" such as @...GET...READ session
> running. SO in each screen/console I can write a independent program

I do not know what is "independent program" for you. If they are real
_independent_ _program_ then you have to create separate processes so
it's not a problem - you simply run more then one instance of the same
program.
Seeing your other messages I guess you want to create an MT program
where each thread will have its own console window. It will be possible
in Harbour MT model when I'll finish it - I hope to the end of this year.
Now some GT drivers can create separate Windows and you can switch between
them. I added such possibilities to GTCRS few years ago. Peter creating
GTWVT kept similar convention for internal structures so later if was
quite easy to create GTWVW. Anyhow it's not a standard solution with
common to other GTs interface so I will change it in the future.

> Is possible a standard way for "merge" gt app with some other GUI
> library?

??? I'm not a Windows expert but I do not see any reason why console
window will force modifications in GUI code. They can exist independently.
But in Harbour it's possible to extend GUI libraries to redirect CUI
output to GUI objects because GUI library can overload GT methods at
runtime. In such way (dynamic overloading of GT methods) works CTWIN
in Harbour. I hope that some GUI authors will try to implement it.

> >From a console window capability of create GUI windows and viceversa
> I have seen this capability from gtwvw and hwgui. But is made from
> special code in hwgui

I'm sorry but I do not know what you are talking about. Maybe Alexander
can help.

> Is possible having a common interface for basic GUI_* action?
> Made more simple switch from a harbour GUI to another

I do not know what is 'harbour GUI'.

> When is planed the GTWVW porting in harbour?

I do not know. It will depend on GTWVW authors. I ported GTWVT to
Harbour but I'm not MS-Windows user and I do not like to work on
code I cannot well test. IMHO first someone should try to port WVTGUI.
It should be quite easy job. Because in Harbour some internal structures
are separated then it will be necessary to add some GTI_* actions to
communicate between WVTGUI and GTWVT to retrieve Window handlers, register
some callback procedures, etc. If someone can start such port then I can
help. Later GTWVW can be ported using parts of code used in GTWVT+WVTGUI.

best regards,
Przemek
From mbelgrano at deltain.it  Sat Jul 14 08:52:38 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Jul 14 08:53:14 2007
Subject: R: [Harbour] Wich Implementation planed for GT
In-Reply-To: <20070714121238.GA25341@localhost.localdomain>
References: <AFB948164110ED43B5EB849E8DEEF03809A776@SRV02.deltain.net>
	<20070714121238.GA25341@localhost.localdomain>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A777@SRV02.deltain.net>

Thanks for reply

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] Per conto di Przemyslaw
Czerpak
Inviato: sabato 14 luglio 2007 14.13
A: Harbour Project Main Developer List.
Oggetto: Re: [Harbour] Wich Implementation planed for GT

On Sat, 14 Jul 2007, Massimo Belgrano wrote:

>> Is possible a standard way for "merge" gt app with some other GUI
>> library?

>??? I'm not a Windows expert but I do not see any reason why console
>window will force modifications in GUI code. They can exist
independently.
>But in Harbour it's possible to extend GUI libraries to redirect CUI
>output to GUI objects because GUI library can overload GT methods at
>runtime. In such way (dynamic overloading of GT methods) works CTWIN
>in Harbour. I hope that some GUI authors will try to implement it.

Please GUI autore consider this

>> Is possible having a common interface for basic GUI_* action?
>> Made more simple switch from a harbour GUI to another

>I do not know what is 'harbour GUI'.

Any gui create form and add control with a different syntax
Suggest a BASIC way permit of switching from a gui to anoter without
rewriting all


> When is planed the GTWVW porting in harbour?

>I do not know. It will depend on GTWVW authors. I ported GTWVT to
>Harbour but I'm not MS-Windows user and I do not like to work on
>code I cannot well test. IMHO first someone should try to port WVTGUI.
>It should be quite easy job. Because in Harbour some internal
structures
>are separated then it will be necessary to add some GTI_* actions to
>communicate between WVTGUI and GTWVT to retrieve Window handlers,
register
>some callback procedures, etc. If someone can start such port then I
can
>help. Later GTWVW can be ported using parts of code used in
GTWVT+WVTGUI.

I hope that somebody start this works
I am able to write only good PRG GTVWV is out of my capability

When will possible for each thread have its own console window, With the
upcoming Harbour MT model (end of this year), GTWVT will be similar to
GTWVW?




From druzus at priv.onet.pl  Sat Jul 14 09:17:28 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Jul 14 09:18:04 2007
Subject: R: [Harbour] Wich Implementation planed for GT
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809A777@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03809A776@SRV02.deltain.net>
	<20070714121238.GA25341@localhost.localdomain>
	<AFB948164110ED43B5EB849E8DEEF03809A777@SRV02.deltain.net>
Message-ID: <20070714131728.GA26723@localhost.localdomain>

On Sat, 14 Jul 2007, Massimo Belgrano wrote:
> >I do not know what is 'harbour GUI'.
> Any gui create form and add control with a different syntax
> Suggest a BASIC way permit of switching from a gui to anoter without
> rewriting all

If you are talking about defining some .prg API common for different
GUI libraries and platforms with replaceable low level GUI module so
the same source code can be used in different environments then sth
like that was started by Giancarlo Niccolai in xHarbour. See:
contrib/xwt and contrib/xwt2. But looks that in last years no one
tries to continue work on this library :-(

> When will possible for each thread have its own console window, With the
> upcoming Harbour MT model (end of this year), GTWVT will be similar to
> GTWVW?

It will be possible to open many windows with this GT driver but
if you think about some GUI elements supported by GTWVW then it
will depend on the authors which will try to port WVTGUI (if any).

best regards,
Przemek
From philb at philb.us  Sat Jul 14 12:42:02 2007
From: philb at philb.us (Phil Barnett)
Date: Sat Jul 14 12:42:44 2007
Subject: [Harbour] Further Testing for Beta 3 or Release Candidate 1 status?
Message-ID: <200707141242.02447.philb@philb.us>


I have not seen much feedback for Beta 3. The Beta process moves from stage to 
stage based on your input and feedback, so if we are in a stable state and 
ready to exit beta, it is signaled by lack of 'please fix this' comments from 
people who are actively using the product.

So, my question is this: Are we ready to go to Release Candidate stage or is 
more beta testing required or desired?

-- 
Phil Barnett
AI4OF
SKCC #600
From mbelgrano at deltain.it  Sat Jul 14 13:31:31 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Jul 14 13:32:08 2007
Subject: R: R: [Harbour] Wich Implementation planed for GT
In-Reply-To: <20070714131728.GA26723@localhost.localdomain>
References: <AFB948164110ED43B5EB849E8DEEF03809A776@SRV02.deltain.net><20070714121238.GA25341@localhost.localdomain><AFB948164110ED43B5EB849E8DEEF03809A777@SRV02.deltain.net>
	<20070714131728.GA26723@localhost.localdomain>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A778@SRV02.deltain.net>



-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] Per conto di Przemyslaw
Czerpak
Inviato: sabato 14 luglio 2007 15.17
A: Harbour Project Main Developer List.
Oggetto: Re: R: [Harbour] Wich Implementation planed for GT

>If you are talking about defining some .prg API common for different
>GUI libraries and platforms with replaceable low level GUI module so
>the same source code can be used in different environments then sth
>like that was started by Giancarlo Niccolai in xHarbour. See:
>contrib/xwt and contrib/xwt2. But looks that in last years no one
>tries to continue work on this library :-(

Yes common api for different GUI libraries!
This idea must be promoted
Giancarlo Niccolai is working in harbour/xharbour?
How is difficult extend some GUI library to be xwt2 compatibile?
A gui based on XWT can interact with any GT


>> When will possible for each thread have its own console window, With
the
>> upcoming Harbour MT model (end of this year), GTWVT will be similar
to
>> GTWVW?

>It will be possible to open many windows with this GT driver but
>if you think about some GUI elements supported by GTWVW then it
>will depend on the authors which will try to port WVTGUI (if any).

GTWVW is basically same function as GTVWT with an additional parameter
for windows
Support native EDITBOX


From mpaliwoda at interia.pl  Sat Jul 14 14:10:50 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sat Jul 14 14:10:59 2007
Subject: [Harbour] A few current makefile system questions
In-Reply-To: <20070714114129.GB1922@localhost.localdomain>
References: <46952899.9030507@interia.pl>
	<20070714114129.GB1922@localhost.localdomain>
Message-ID: <469911AA.7050309@interia.pl>

Hi Przemek,

>> Unfortunately the whole
>> last year or so wasn't very successfull, so I wasn't even able to
>> follow the devel-list posts. Sorry fot that.
> 
> I hope this one will be better for you and your family.

Thanks very. This is my hope also ...

>> I just tried to build Harbour under Cygwin environment after a very
>> very long time and I found I don't really like current GNU makefile
>> system behavior. I don't know if this behavior is "by design" or it
>> is caused by my lack of knowledge, so I'd like to raise few
>> questions / remarks here, in hope to get answers / suggestions /
>> corrections :
>> 1. Why does not make process stop after an error occured in any of
>>    a built module ? Even though an error occures for example in
>>    building "libcommon.lib" the build process continues "uselessly".
>>    It's very annoying ( at least to me ;-) ). Does it suggest that
>>    my Cygwin environment is broken ? Is this behavior repeatable
>>    on Linux too ? If so - why ?
> 
> I do not know if it was intentional or it's a side effect of
> implementation. In shell environment I can redirect stderr to
> separate file so it's not a problem for me at all because I can
> see only error / warning messages. I even found it very useful
> because log from single make command it's enough to tell what
> libraries / header files are missing. Without it I will have to
> ask about logs from repeated compilation after each "fix" when
> some ask me for a help. Though we change it and can use GNU make
> switch to not interrupt build process after errors.
> In configure/<platform>/dir.cf you will find DIR_RULE which have
> to be updated to interrupt build process after error.
> Continuing compilation on erros is also useful when only some
> additional parts of Harbour cannot be created, f.e. some GT
> drivers but rest will work so users can create working Harbour
> binaries even if he cannot create GTXWC due to missing XWindow
> system. Please note that we are not using autoconf. I hard coded
> some detection rules in make_{gnu,tgz}.sh but in some cases they
> may not work as expected.

Ok, I see now. So the idea is to allow further build continuation
assuming the problem touches only one module. Well, usualy this is
a good assumption, since most likely development changes are made
to a one module at a time.

>> 2. Why are build tools ($CC, $LD) hard coded currently ? It is not
>>    possible to set it to something like CC=<my CC compiler> in a
>>    batch file to use other version of gcc. Such a feature will also
>>    be required for someone who wants to perform a cross-compilation.
>>    In fact this is my "main objection" to current GNU makefile system.
>>    An I missing something here ?
> 
> I think that authors decided that in such way new <compiler>.cf file
> should be used, f.e. you can create .cf file where non of predefined
> *_RULE variables will be overloaded.

Simple enough. Thanks for the nice hint :).

>>    [I suspect that this is also true for Linux, but I did not test it.]
>> 3. How is it possible to do "any kind of cross-compilation" with our
>>    Makefile systems ? (this is a question for our all makefile systems,
>>    not only GNU one).
>>    Building Harbour libs requires to use ppgen.exe and Harbour.exe,
>>    built during the build process, but cross-compiling means that these
>>    built tools will (most likely) not run on a machine where we are
>>    cross-compiling. How should it be solved ? Again - am I missing
>>    something here ?
> 
> Please look at make_xmingw.sh - it needs native platform builds of
> ppgen and harbour.

Will look deeply into it.

> Anyhow in my Linux box using WINE and GNU make system I can create
> also other W32 binaries, f.e. BCC32, XCC, OpenWatcom and in such
> case I do not use any native binaries.
> 
>> 4. What are benefits of using "distributed makefiles" (makefiles in
>>    each module directory) as opposed to one "centralized" makefile ?
>>    (sorry for the "wording" - I wasn't able to describe it better)
> 
> It depends on preferences. F.e. I used to work in some directory and
> when I want to compile only the code I'm changing then I simply execute
> 'make'. If I want to cleanly rebuild only some parts of code (f.e. one
> library I can execute 'make clean' in chosen directory, etc. I can also
> very easy switch between compilers and platforms by changing environment
> variables or passing them as make arguments. But in fact these are only
> my personal preferences. IMHO it will be good to have alternative GNU
> Makefile which will use common.mak.

But this sounds *quite resonable* to me !! I couldn't imagine this
myself because normally I do not work in unix like environments. I
especially like 'make clean' behavior of a GNU makefile system - it's
not currently available in other makefiles and I am not sure it can
be easily added to them.

> I'm attaching simple scripts which converts common.mak to common.cf
> which is compatible with GNU make. So far I haven't found time to create
> makefile.gcc - I will have to analyze what makefile.{bcc,vc} exactly does
> first. If you have a while and you can create it then it will be nice ;-)

I will make an attempt to do it when I return from holidays,
but I can't promise I will do it (at least properly), because
I am not quite familiar with GNU makefiles.

-- 

The best vacation wishes
    to ALL developers
          Marek


----------------------------------------------------------------------
Bedzie skandal?
T-shirty polityczne >> http://link.interia.pl/f1ac7


From harbour.01 at syenar.hu  Sat Jul 14 15:08:07 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Jul 14 15:08:14 2007
Subject: [Harbour] Suggestion to improve self-documenting PRG source
In-Reply-To: <20070713211045.GA5240@localhost.localdomain>
References: <20070706122142.GB17020@localhost.localdomain>
	<468e6e39.2435440a.18e5.ffffba28@mx.google.com>
	<20070711175738.464892515@smtp.tor.pathcom.com>
	<9E46E1D6-34A1-4C89-8DDE-502B0AC3EF47@syenar.hu>
	<20070713211045.GA5240@localhost.localdomain>
Message-ID: <D93FB8DE-AB23-4EED-B20D-D37DA8737529@syenar.hu>

Perfect!

Brgds,
Viktor

On 2007.07.13., at 23:10, Przemyslaw Czerpak wrote:

> On Wed, 11 Jul 2007, Szak?ts Viktor wrote:
>> We've visited this topic in 1999 October and the group
>> conclusion back then was that it would be better and also
>> back/cross portable, compatible and in line with strong
>> typing syntax, if we would rather use "BY REF" (or some
>> similar PP-able syntax), for example this way:
>> #xtranslate BY REF =>
>> FUNCTION SomeFunc( cNormal, cRef BY REF )
>> 	cRef := "newvalue"
>> 	RETURN NIL
>> While I fully agree with your intention and was proposing
>> the same thing, I tend to agree with the above solution.
>
>     #command PROCEDURE <name>( [<any,...>] @ <any,...> )  
> =>           ;
>          _DEF_ PROCEDURE <name>( [ <any>] )
>     #command STATIC PROCEDURE <name>( [<any,...>] @ <any,...> )  
> =>    ;
>          _DEF_ STATIC PROCEDURE <name>( [ <any>] )
>     #command INIT PROCEDURE <name>( [<any,...>] @ <any,...> )  
> =>      ;
>          _DEF_ INIT PROCEDURE <name>( [ <any>] )
>     #command EXIT PROCEDURE <name>( [<any,...>] @ <any,...> )  
> =>      ;
>          _DEF_ EXIT PROCEDURE <name>( [ <any>] )
>
>     #command FUNCTION <name>( [<any,...>] @ <any,...> )  
> =>            ;
>          _DEF_ FUNCTION <name>( [ <any>] )
>     #command STATIC FUNCTION <name>( [<any,...>] @ <any,...> )  
> =>     ;
>          _DEF_ STATIC FUNCTION <name>( [ <any>] )
>     #command INIT FUNCTION <name>( [<any,...>] @ <any,...> )  
> =>       ;
>          _DEF_ INIT FUNCTION <name>( [ <any>] )
>     #command EXIT FUNCTION <name>( [<any,...>] @ <any,...> )  
> =>       ;
>          _DEF_ EXIT FUNCTION <name>( [ <any>] )
>
>     #command _DEF_ [<scope:static,init,exit>]  
> <type:PROCEDURE,FUNCTION>  ;
>          <name>([@]<p1>[,[@]<parms>]) =>                             ;
>          <scope> <type> <name>( p1[, <parms>] )
>
> above PP rules also works in Clipper. Use them to compile code like:
>
>     init proc p1( @p1, @p2, @p3, @p4, @p5 )
>     exit proc p2( p1, p2, @p3 )
>     static proc p2( p1, @p2, p3, @p4, @p5 )
>     proc p4( p1, @p2, p3, @p4, @p5 )
>     init func f1( @p1, @p2, @p3, @p4, p5 )
>     return NIL
>     exit func f2( p1, p2, @p3 )
>     return NIL
>     static func f3( p1, @p2, p3, p4, @p5 )
>     return NIL
>     func f4( p1, @p2, p3, @p4, p5 )
>     return NIL
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Sat Jul 14 16:20:46 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Jul 14 16:21:22 2007
Subject: [Harbour] Further Testing for Beta 3 or Release Candidate 1
	status?
In-Reply-To: <200707141242.02447.philb@philb.us>
References: <200707141242.02447.philb@philb.us>
Message-ID: <20070714202046.GA5074@localhost.localdomain>

On Sat, 14 Jul 2007, Phil Barnett wrote:
> I have not seen much feedback for Beta 3. The Beta process moves from stage to 
> stage based on your input and feedback, so if we are in a stable state and 
> ready to exit beta, it is signaled by lack of 'please fix this' comments from 
> people who are actively using the product.
> So, my question is this: Are we ready to go to Release Candidate stage or is 
> more beta testing required or desired?

Seems that users do not have problems with BETA3 but some of fixes I made
in DEVEL branch have to be also included in BETA branch. I can do that
but I'd like to know where I should commit them.

best regards,
Przemek
From druzus at priv.onet.pl  Sat Jul 14 16:55:24 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Jul 14 16:56:02 2007
Subject: [Harbour] ChangeLog 2007-07-14 22:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070714205524.GA23048@localhost.localdomain>

2007-07-14 22:55 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gttrm/gttrm.c
    * added protection against corrupted by programmer screen buffer

  * harbour/source/rtl/hbgtcore.c
    * extended hb_gtColorToN() to recognize also "I", "N", "U" and
      numeric NN/NN attributes

  * harbour/contrib/libct/ftoc.c
    * cleanup

  * harbour/contrib/libct/Makefile
  * harbour/contrib/libct/makefile.bc
  * harbour/contrib/libct/makefile.vc
  - harbour/contrib/libct/color.prg
  - harbour/contrib/libct/invrtwin.prg
  + harbour/contrib/libct/color.c
    * rewritten INVERTATTR(), INVERTWIN(), COLORTON(), NTOCOLOR(),
      ENHANCED(), STANDARD(), UNSELECTED() in C code. Now COLORTON()
      and NTOCOLOR() use GT functions for color translations.
    ! fixed INVERTATTR() to not change blink and highlight attributes
    ! fixed INVERTWIN() to work with GT divers which do not use VGA
      compatible screen buffer

best regards,
Przemek
From philb at philb.us  Sat Jul 14 18:44:03 2007
From: philb at philb.us (Phil Barnett)
Date: Sat Jul 14 18:44:31 2007
Subject: [Harbour] Further Testing for Beta 3 or Release Candidate 1
	status?
In-Reply-To: <20070714202046.GA5074@localhost.localdomain>
References: <200707141242.02447.philb@philb.us>
	<20070714202046.GA5074@localhost.localdomain>
Message-ID: <200707141844.03715.philb@philb.us>

On Saturday 14 July 2007, Przemyslaw Czerpak wrote:
> On Sat, 14 Jul 2007, Phil Barnett wrote:
> > I have not seen much feedback for Beta 3. The Beta process moves from
> > stage to stage based on your input and feedback, so if we are in a stable
> > state and ready to exit beta, it is signaled by lack of 'please fix this'
> > comments from people who are actively using the product.
> > So, my question is this: Are we ready to go to Release Candidate stage or
> > is more beta testing required or desired?
>
> Seems that users do not have problems with BETA3 but some of fixes I made
> in DEVEL branch have to be also included in BETA branch. I can do that
> but I'd like to know where I should commit them.

I'm not sure what you mean. Did we tag beta3 in the devel branch or do we have 
a beta branch with a tag on beta3?

-- 
Phil Barnett
AI4OF
SKCC #600
From druzus at priv.onet.pl  Sun Jul 15 02:24:41 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sun Jul 15 02:25:17 2007
Subject: [Harbour] Further Testing for Beta 3 or Release Candidate 1
	status?
In-Reply-To: <200707141844.03715.philb@philb.us>
References: <200707141242.02447.philb@philb.us>
	<20070714202046.GA5074@localhost.localdomain>
	<200707141844.03715.philb@philb.us>
Message-ID: <20070715062441.GA11933@localhost.localdomain>

On Sat, 14 Jul 2007, Phil Barnett wrote:
> > Seems that users do not have problems with BETA3 but some of fixes I made
> > in DEVEL branch have to be also included in BETA branch. I can do that
> > but I'd like to know where I should commit them.
> I'm not sure what you mean. Did we tag beta3 in the devel branch or do
> we have a beta branch with a tag on beta3?

We have DEVEL branch in SVN and BETA in CVS only. The fixes I committed
in last weeks to DEVEL branch should be also done in BETA branch but I
do not know if I should use CVS repository or we will want to migrate
with BETA branch to SVN or simply create BETA branch in current SVN.
In fact with the exception to some new separated extensions like GTTRM
or bit functions recent modifications in DEVEL branch were mostly bug
fixes and because I synced DEVEL and BETA branches just before BETA3
release then I think that if we decide to use SVN also for BETA then
instead of repeating the migration process (CVS->SVN) for BETA branch
we can create such branch in current SVN repository.

best regards,
Przemek
From druzus at priv.onet.pl  Sun Jul 15 03:20:09 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sun Jul 15 03:20:45 2007
Subject: [Harbour] ChangeLog 2007-07-15 09:20 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070715072009.GA12594@localhost.localdomain>

2007-07-15 09:20 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/libct/Makefile
  * harbour/contrib/libct/makefile.bc
  * harbour/contrib/libct/makefile.vc
  * harbour/contrib/libct/misc1.c
  + harbour/contrib/libct/misc2.c
  + harbour/contrib/libct/misc3.c
  * harbour/contrib/libct/num1.c
  * harbour/contrib/libct/numconv.prg
  + harbour/contrib/libct/numcount.c
  + harbour/contrib/libct/numline.c
  * harbour/contrib/libct/numat.c
    * synced with xHarbour modifications and fixes
    + added some missing functions borrowed from xHarbour, in most
      cases it was Pavel Tsarenko code
    ! some fixes
    * indenting

  * harbour/source/rtl/gtfunc.c
    * replaced hb_itemRelease( hb_itemReturn( pItem ) ) by
      hb_itemReturnRelease( pItem )

best regards,
Przemek
From druzus at priv.onet.pl  Sun Jul 15 03:32:35 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sun Jul 15 03:33:10 2007
Subject: [Harbour] Further Testing for Beta 3 or Release Candidate 1
	status?
In-Reply-To: <20070715062441.GA11933@localhost.localdomain>
References: <200707141242.02447.philb@philb.us>
	<20070714202046.GA5074@localhost.localdomain>
	<200707141844.03715.philb@philb.us>
	<20070715062441.GA11933@localhost.localdomain>
Message-ID: <20070715073235.GA15706@localhost.localdomain>

On Sun, 15 Jul 2007, Przemyslaw Czerpak wrote:
> We have DEVEL branch in SVN and BETA in CVS only. The fixes I committed
> in last weeks to DEVEL branch should be also done in BETA branch but I
> do not know if I should use CVS repository or we will want to migrate
> with BETA branch to SVN or simply create BETA branch in current SVN.
> In fact with the exception to some new separated extensions like GTTRM
> or bit functions recent modifications in DEVEL branch were mostly bug
> fixes and because I synced DEVEL and BETA branches just before BETA3
> release then I think that if we decide to use SVN also for BETA then
> instead of repeating the migration process (CVS->SVN) for BETA branch
> we can create such branch in current SVN repository.

Forget about the above - I was wrong.
I've just check that Victor converted to SVN whole CVS repository with
all branches and tags so I'll simply update BETA branch.

best regards,
Przemek
From antonioharbour at gmail.com  Sun Jul 15 03:45:59 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Jul 15 03:46:30 2007
Subject: [Harbour] the true obstacles
Message-ID: <4699d0d1.0503420a.6ef3.ffffcb1b@mx.google.com>

A very interesting reading:

Automtatic english translation:
http://translate.google.com/translate?u=http%3A%2F%2Falternaria.blogspot.com
%2F2007%2F07%2Fsi-existen-virus-que-afectan-linux-pero.html&langpair=es%7Cen
&hl=es&ie=UTF8

Original spanish article:
http://alternaria.blogspot.com/2007/07/si-existen-virus-que-afectan-linux-pe
ro.html

Regards,

Antonio

From esgici at gmail.com  Sun Jul 15 07:40:59 2007
From: esgici at gmail.com (Bicahi Esgici)
Date: Sun Jul 15 07:41:06 2007
Subject: [Harbour] thanks, documentation and two wish
Message-ID: <d4ce00e70707150440g4e504a90j6b442f70cdb1bc22@mail.gmail.com>

Hi to all

Firstly, as a  end user, I want  present my sinceres thanks  to all  Harbour
developper,  especially  to Prezemek for  invaluable works and enhancements.
The legendary Harbour project was in the dead road and now it is a most
robust and live in the area.

IMHO only problem is that Harbour goes rapidly a "undocument-able" project.
The a few old and  incomplete ones are going to being obsolete also rapibly.


I know, good developers are bad documentors. So, for documentation of an
open source project, the users too must work. Personally, I am ready to take
the duties that I can success. But, the developper team have to manage the
task.

IMHO, In beginning, the documentation may be un formetted, plain text.
Formatting in this or that way may be implemented later. AYK the best is
enemy of the good.

BTW, I have two wishs:

  Enhancements in the RDD and especially in the USE command and DBUseArea()
function are being most impressive for me. Without knowing what RDD is
required, any .dbf can be open.  This is wonderful. But, after using I can't
know the RDD used. Because RDDNAME() return current RDD of current work area
only if RDD was declared explicitly. Does will possible and useful that
RDDNAME() returns the RDD setted automatically by USE command or DBUseArea()
function ?

  Failing while USEing may be cuased by several reasons. Does will possible
and useful a UseError() function like FError() ?

Sincerely regards.

-- esgici
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070715/c2b54fc9/attachment.html
From philb at philb.us  Sun Jul 15 11:37:21 2007
From: philb at philb.us (Phil Barnett)
Date: Sun Jul 15 11:38:04 2007
Subject: [Harbour] the true obstacles
In-Reply-To: <4699d0d1.0503420a.6ef3.ffffcb1b@mx.google.com>
References: <4699d0d1.0503420a.6ef3.ffffcb1b@mx.google.com>
Message-ID: <200707151137.21814.philb@philb.us>

On Sunday 15 July 2007, Antonio Linares wrote:

CC: Leaplist

> A very interesting reading:
>
> Automtatic english translation:
> http://translate.google.com/translate?u=http%3A%2F%2Falternaria.blogspot.co
>m
> %2F2007%2F07%2Fsi-existen-virus-que-afectan-linux-pero.html&langpair=es%7Ce
>n &hl=es&ie=UTF8
>
> Original spanish article:
> http://alternaria.blogspot.com/2007/07/si-existen-virus-que-afectan-linux-p
>e ro.html

It sounds like the author is not used to freedom, but would prefer order at 
any cost. Only one choice, no decisions to make.

The only problem with Linux today is that there is too much choice for the 
average person to comprehend. Fortunately, modern Linux distributions take 
care of most of those decisions for you so you don't need to make them or 
even know about them.

We have a user group here in Central Florida where we allow anyone with any 
operating system to come to our meetings, we don't say bad things about any 
distribution with the exception of the software from the convicted 
monopolist, Microsoft. However, _people_ are not Microsoft and if they need 
help, we help them. We feel that it's a waste of energy to fight amongst 
ourselves. We treat Linux as a tool to get our work done. It's not a 
destination, it's a vehicle.

-- 
Phil Barnett
AI4OF
SKCC #600
From lorenzo.fiorini at gmail.com  Sun Jul 15 11:47:28 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Jul 15 11:47:32 2007
Subject: [Harbour] gttrm issues
Message-ID: <9257026e0707150847y2a79093dk92ede4455f8fe8a8@mail.gmail.com>

1) hdo hbmk -n -static -gttrm ttcolors gives:

... undefined reference to `HB_FUN_HB_GT_TRM'

2) I can't get yellow and white as background ( try the test below in
gttrm and gtxwc )
yellow is orange and white is gray using fedora 7 gnome-terminal

best regards,
Lorenzo

#ifdef __HARBOUR__
#include "hbcompat.ch"
#endif

proc main

  clear

#ifdef __HARBOUR__
  @ 5, 0 say HB_GT_VERSION()
#endif

  @ 11, 1 say "text" COLOR "W/R"
  @ 12, 2 say "text" COLOR "N/G"
  @ 13, 3 say "text" COLOR "R/GR*"
  @ 14, 4 say "text" COLOR "N/BG"
  @ 15, 5 say "text" COLOR "W/RB"
  @ 16, 6 say "text" COLOR "W/B"

  @ 16, 6 say "text" COLOR "GR/W"
  @ 17, 7 say "text" COLOR "N/W*"

  wait

  return
From gvarona at ec-red.com  Sun Jul 15 13:38:02 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Sun Jul 15 13:38:45 2007
Subject: [Harbour] Support for Class TopBarMenu of Clipper 5.3
Message-ID: <469A5B7A.2040006@ec-red.com>

not support?

Best Regards
GVS


From niki at synel.co.il  Mon Jul 16 01:36:23 2007
From: niki at synel.co.il (Chen Kedem)
Date: Mon Jul 16 01:35:48 2007
Subject: [Harbour] Support for Class TopBarMenu of Clipper 5.3
Message-ID: <469B03D6.40A2@synel.co.il>

GVS wrote:
> Subject: Support for Class TopBarMenu of Clipper 5.3
> not support?

There is source/rtl/ttopbar.prg in the repository. You probably need
to build Harbour with the HB_COMPAT_C53 flag (it is on by default).
What platform (compiler/OS) you are using?

With BCC32/Win32 the following program print the class name

--yy2.prg--
proc test
? TopBar( 1, 1, 1 ):ClassName  // --> TOPBARMENU
-----------

bld_b32 yy2 /w/a/n
yy2


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From mpaliwoda at interia.pl  Mon Jul 16 01:46:06 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Mon Jul 16 01:46:10 2007
Subject: [Harbour] 2007-07-16 07:30 UTC+0100 Marek Paliwoda (mpaliwoda at
	interia pl)
Message-ID: <20070716054606.556F7638C39@f02.poczta.interia.pl>

2007-07-16 07:30 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)
  * harbour/makefile.bc
  * harbour/makefile.vc
    * added cross-compilation capabilities by means of HB and PPGEN
      environment variables. You can set them to fully qualified paths
      to harbour.exe and ppgen.exe respectivly, to allow cross-compiling.
    * minor cleanups and formatting




----------------------------------------------------------------------
Seks i reklama >> Zobacz
>>> http://link.interia.pl/f1ae4

From mpaliwoda at interia.pl  Mon Jul 16 01:51:36 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Mon Jul 16 01:51:40 2007
Subject: [Harbour] A few current makefile system questions
Message-ID: <20070716055136.71A94638C39@f02.poczta.interia.pl>

Marek Paliwoda wrote :

 >> Please look at make_xmingw.sh - it needs native platform builds of
 >> ppgen and harbour.
 >
 > Will look deeply into it.

Works perfectly with GNU makefiles :) . Thanks very much.

I tried to implement HB_BIN_COMPILE and HB_PPGEN_PATH
for other makefiles, but unfortunately they do not fit
very well into Bcc and Msvc make behavior. So I've done
cross-compiling for Bcc and Msvc in a little bit different
way. You have to define environment variables HB and PPGEN
to fully qualified paths to harbour.exe and ppgen.exe
respectivly. Something like :
     set HB=<path_to_harbour_compiler>\harbour.exe
     set PPGEN=<path_to_ppgen_executable>\ppgen.exe
I did not describe those above variables in makefile's
headers however, due to my lack of english knowledge :) .

I commited new files, but I am not sure everything went ok,
because I am not familiar with SVN yet. It took me quite a 
while to figure out that Harbour uses SVN now :). I was quite 
suprised to see the last ChangeLog entry dated 2007-06-16 23:42 
after performing full CVS checkout ;-) .
BUT, I like switching to SVN very much, even if I am not
familiar with it. The speed of getting full SVN sources
is uncomparable to CVS. Great move.

BTW, Please keep in mind that current harbour cross-compiling
features are not fully supported. On some platforms building
harbour.exe, hbpp.exe, ppgen.exe, etc. does not make much sense
at all (WinCE for example).

-- 

Marek



----------------------------------------------------------------------
Inspiruj?ca nagosc 
Zobacz >>> http://link.interia.pl/f1ade


From harbour.01 at syenar.hu  Mon Jul 16 02:04:41 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul 16 02:04:46 2007
Subject: [Harbour] A few current makefile system questions
In-Reply-To: <20070716055136.71A94638C39@f02.poczta.interia.pl>
References: <20070716055136.71A94638C39@f02.poczta.interia.pl>
Message-ID: <0E95C273-5082-43E5-BF4E-74F6C7DE8FE3@syenar.hu>

Thanks Marek.

Would you mind if I'd change HB to HB_HARBOUR_EXE and
PPGEN to HB_PPGEN_EXE? (to keep us consistent with
the HB_ prefixes for external envvars)

(we should fully shutdown CVS, but I don't know the best
way to do it, maybe to ask sf admins to upload an empty
CVS repository? that's also a bit scary for ppl not aware of
our SVN)

Brgds,
Viktor

On 2007.07.16., at 7:51, Marek Paliwoda wrote:

> Marek Paliwoda wrote :
>
>>> Please look at make_xmingw.sh - it needs native platform builds of
>>> ppgen and harbour.
>>
>> Will look deeply into it.
>
> Works perfectly with GNU makefiles :) . Thanks very much.
>
> I tried to implement HB_BIN_COMPILE and HB_PPGEN_PATH
> for other makefiles, but unfortunately they do not fit
> very well into Bcc and Msvc make behavior. So I've done
> cross-compiling for Bcc and Msvc in a little bit different
> way. You have to define environment variables HB and PPGEN
> to fully qualified paths to harbour.exe and ppgen.exe
> respectivly. Something like :
>      set HB=<path_to_harbour_compiler>\harbour.exe
>      set PPGEN=<path_to_ppgen_executable>\ppgen.exe
> I did not describe those above variables in makefile's
> headers however, due to my lack of english knowledge :) .
>
> I commited new files, but I am not sure everything went ok,
> because I am not familiar with SVN yet. It took me quite a
> while to figure out that Harbour uses SVN now :). I was quite
> suprised to see the last ChangeLog entry dated 2007-06-16 23:42
> after performing full CVS checkout ;-) .
> BUT, I like switching to SVN very much, even if I am not
> familiar with it. The speed of getting full SVN sources
> is uncomparable to CVS. Great move.
>
> BTW, Please keep in mind that current harbour cross-compiling
> features are not fully supported. On some platforms building
> harbour.exe, hbpp.exe, ppgen.exe, etc. does not make much sense
> at all (WinCE for example).
>
> -- 
>
> Marek
>
>
>
> ----------------------------------------------------------------------
> Inspiruj?ca nagosc
> Zobacz >>> http://link.interia.pl/f1ade
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Jul 16 02:05:16 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul 16 02:05:21 2007
Subject: [Harbour] ChangeLog 2007-07-14 22:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070714205524.GA23048@localhost.localdomain>
References: <20070714205524.GA23048@localhost.localdomain>
Message-ID: <D6C5993A-3EB6-4C77-9B4A-1084FEFD1FEE@syenar.hu>

That's great, thank you Przemek.

Brgds,
Viktor

On 2007.07.14., at 22:55, Przemyslaw Czerpak wrote:

> 2007-07-14 22:55 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/rtl/gttrm/gttrm.c
>     * added protection against corrupted by programmer screen buffer
>
>   * harbour/source/rtl/hbgtcore.c
>     * extended hb_gtColorToN() to recognize also "I", "N", "U" and
>       numeric NN/NN attributes
>
>   * harbour/contrib/libct/ftoc.c
>     * cleanup
>
>   * harbour/contrib/libct/Makefile
>   * harbour/contrib/libct/makefile.bc
>   * harbour/contrib/libct/makefile.vc
>   - harbour/contrib/libct/color.prg
>   - harbour/contrib/libct/invrtwin.prg
>   + harbour/contrib/libct/color.c
>     * rewritten INVERTATTR(), INVERTWIN(), COLORTON(), NTOCOLOR(),
>       ENHANCED(), STANDARD(), UNSELECTED() in C code. Now COLORTON()
>       and NTOCOLOR() use GT functions for color translations.
>     ! fixed INVERTATTR() to not change blink and highlight attributes
>     ! fixed INVERTWIN() to work with GT divers which do not use VGA
>       compatible screen buffer
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mpaliwoda at interia.pl  Mon Jul 16 02:29:43 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Mon Jul 16 03:03:29 2007
Subject: [Harbour] ChangeLog 2007-07-14 22:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070716062943.50CFB4B3241@poczta.interia.pl>

Hi Viktor,

> Would you mind if I'd change HB to HB_HARBOUR_EXE and
> PPGEN to HB_PPGEN_EXE? (to keep us consistent with
> the HB_ prefixes for external envvars)

Of course NOT ! :) I have "a habit" to use "short names" and
I often forget about our convention (which I *fully* support
btw). Thanks for your attention and sorry for an inconvenience. 
 
> (we should fully shutdown CVS, but I don't know the best
> way to do it, maybe to ask sf admins to upload an empty
> CVS repository? that's also a bit scary for ppl not aware
> of our SVN)

I fully agree too ( based on my experiences ;-) )

-- 

Marek



----------------------------------------------------------------------
Plaza plazy nierowna
Kliknij
>>>http://link.interia.pl/f1af7

From harbour.01 at syenar.hu  Mon Jul 16 03:13:34 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul 16 03:13:31 2007
Subject: [Harbour] CHANGELOG: 2007-07-16 9:02 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7c778$Blat.v2.6.1$d2c10dbe$b7494a85e98@127.0.0.1>

2007-07-16 9:02 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * common.mak
   * makefile.vc
   * makefile.bc
     * HB -> HB_HARBOUR_EXE
       PPGEN -> HB_PPGEN_EXE
     * Some redundancies removed.
     ; Please test VC.

From niki at synel.co.il  Mon Jul 16 03:23:59 2007
From: niki at synel.co.il (Chen Kedem)
Date: Mon Jul 16 03:23:35 2007
Subject: [Harbour] A few current makefile system questions
Message-ID: <469B1D0F.198B@synel.co.il>

Viktor,

> (we should fully shutdown CVS, but I don't know the best
> way to do it, maybe to ask sf admins to upload an empty
> CVS repository? that's also a bit scary for ppl not aware of
> our SVN)

As a project admin you can submit a support request in SF asking
them to close/remove it (look for other such requests)
https://sourceforge.net/tracker/?group_id=1&atid=200001

I don't know if they can just block/hide it instead of removing it.


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From hbco2 at sbcglobal.net  Mon Jul 16 03:29:41 2007
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Mon Jul 16 03:30:12 2007
Subject: [Harbour] A few current makefile system questions
References: <20070716055136.71A94638C39@f02.poczta.interia.pl>
	<0E95C273-5082-43E5-BF4E-74F6C7DE8FE3@syenar.hu>
Message-ID: <001401c7c77b$14d8b600$0303a8c0@hbco>

It wouldn't hurt to put a note in the CVS Changelog to say that the fileset
is no longer updated and also refer to the new SVN repository.  I have been
out of touch with Harbour in the last month due to e-mail bounces and had to
dig though the archives to find out what happened.

Bill

----- Original Message ----- 
From: "Szak?ts Viktor" <harbour.01@syenar.hu>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Sunday, July 15, 2007 11:04 PM
Subject: Re: [Harbour] A few current makefile system questions


Thanks Marek.

Would you mind if I'd change HB to HB_HARBOUR_EXE and
PPGEN to HB_PPGEN_EXE? (to keep us consistent with
the HB_ prefixes for external envvars)

(we should fully shutdown CVS, but I don't know the best
way to do it, maybe to ask sf admins to upload an empty
CVS repository? that's also a bit scary for ppl not aware of
our SVN)

Brgds,
Viktor

On 2007.07.16., at 7:51, Marek Paliwoda wrote:

> Marek Paliwoda wrote :
>
>>> Please look at make_xmingw.sh - it needs native platform builds of
>>> ppgen and harbour.
>>
>> Will look deeply into it.
>
> Works perfectly with GNU makefiles :) . Thanks very much.
>
> I tried to implement HB_BIN_COMPILE and HB_PPGEN_PATH
> for other makefiles, but unfortunately they do not fit
> very well into Bcc and Msvc make behavior. So I've done
> cross-compiling for Bcc and Msvc in a little bit different
> way. You have to define environment variables HB and PPGEN
> to fully qualified paths to harbour.exe and ppgen.exe
> respectivly. Something like :
>      set HB=<path_to_harbour_compiler>\harbour.exe
>      set PPGEN=<path_to_ppgen_executable>\ppgen.exe
> I did not describe those above variables in makefile's
> headers however, due to my lack of english knowledge :) .
>
> I commited new files, but I am not sure everything went ok,
> because I am not familiar with SVN yet. It took me quite a
> while to figure out that Harbour uses SVN now :). I was quite
> suprised to see the last ChangeLog entry dated 2007-06-16 23:42
> after performing full CVS checkout ;-) .
> BUT, I like switching to SVN very much, even if I am not
> familiar with it. The speed of getting full SVN sources
> is uncomparable to CVS. Great move.
>
> BTW, Please keep in mind that current harbour cross-compiling
> features are not fully supported. On some platforms building
> harbour.exe, hbpp.exe, ppgen.exe, etc. does not make much sense
> at all (WinCE for example).
>
> -- 
>
> Marek
>
>
>
> ----------------------------------------------------------------------
> Inspiruj?ca nagosc
> Zobacz >>> http://link.interia.pl/f1ade
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Jul 16 03:32:34 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul 16 03:32:39 2007
Subject: [Harbour] A few current makefile system questions
In-Reply-To: <469B1D0F.198B@synel.co.il>
References: <469B1D0F.198B@synel.co.il>
Message-ID: <ABA324B4-4C9E-469B-8FFD-124223CC4297@syenar.hu>

Hi Chen,

Thanks I'll try that now.

Brgds,
Viktor

On 2007.07.16., at 9:23, Chen Kedem wrote:

> Viktor,
>
>> (we should fully shutdown CVS, but I don't know the best
>> way to do it, maybe to ask sf admins to upload an empty
>> CVS repository? that's also a bit scary for ppl not aware of
>> our SVN)
>
> As a project admin you can submit a support request in SF asking
> them to close/remove it (look for other such requests)
> https://sourceforge.net/tracker/?group_id=1&atid=200001
>
> I don't know if they can just block/hide it instead of removing it.
>
>
>   Chen.
> ********************************************************************** 
> ************************
> IMPORTANT: The contents of this email and any attachments are  
> confidential. They are intended for the
> named recipient(s) only.
> If you have received this email in error, please notify the system  
> manager or the sender immediately and do
> not disclose the contents to anyone or make copies thereof.
> *** eSafe scanned this email for viruses, vandals, and malicious  
> content. ***
> ********************************************************************** 
> ************************
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Jul 16 03:54:22 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul 16 03:54:33 2007
Subject: [Harbour] A few current makefile system questions
In-Reply-To: <469B1D0F.198B@synel.co.il>
References: <469B1D0F.198B@synel.co.il>
Message-ID: <0A792093-7B15-4FC4-B52E-B771F0AC83D7@syenar.hu>

https://sourceforge.net/tracker/index.php? 
func=detail&aid=1754599&group_id=1&atid=200001

After being emptied I plan to commit one file telling about
the migration.

Brgds,
Viktor

On 2007.07.16., at 9:23, Chen Kedem wrote:

> Viktor,
>
>> (we should fully shutdown CVS, but I don't know the best
>> way to do it, maybe to ask sf admins to upload an empty
>> CVS repository? that's also a bit scary for ppl not aware of
>> our SVN)
>
> As a project admin you can submit a support request in SF asking
> them to close/remove it (look for other such requests)
> https://sourceforge.net/tracker/?group_id=1&atid=200001
>
> I don't know if they can just block/hide it instead of removing it.
>
>
>   Chen.
> ********************************************************************** 
> ************************
> IMPORTANT: The contents of this email and any attachments are  
> confidential. They are intended for the
> named recipient(s) only.
> If you have received this email in error, please notify the system  
> manager or the sender immediately and do
> not disclose the contents to anyone or make copies thereof.
> *** eSafe scanned this email for viruses, vandals, and malicious  
> content. ***
> ********************************************************************** 
> ************************
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From soporte at dsgsoftware.com  Mon Jul 16 03:57:21 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Mon Jul 16 03:58:16 2007
Subject: [Harbour] Some minor fixes on makefile.bc of libct
Message-ID: <008e01c7c77e$fc012a50$1700000a@PcJuanxp>

Hi all,

Attached you can find a renamed zip file that contains some fixes on 
makefile.bc that allows to build libct with Borland C.

Could someone revise and upload them ?

Best regards
Juan 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: makefile.abc
Type: application/octet-stream
Size: 2002 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070716/049469ef/makefile.obj
From sscc at mweb.co.za  Mon Jul 16 03:59:54 2007
From: sscc at mweb.co.za (Alex Strickland)
Date: Mon Jul 16 04:00:27 2007
Subject: [Harbour] Further Testing for Beta 3 or Release Candidate
	1	status?
In-Reply-To: <20070715073235.GA15706@localhost.localdomain>
References: <200707141242.02447.philb@philb.us>	<20070714202046.GA5074@localhost.localdomain>	<200707141844.03715.philb@philb.us>	<20070715062441.GA11933@localhost.localdomain>
	<20070715073235.GA15706@localhost.localdomain>
Message-ID: <469B257A.7080309@mweb.co.za>

To all

Przemyslaw Czerpak wrote:

> I've just check that Victor converted to SVN whole CVS repository with
> all branches and tags so I'll simply update BETA branch.

I was unable to create Beta 3 for MSVC with CVS because of the 
corruption. I thought I would try again for SVN. But I can't see how to 
  see the BETA tag/branch to update my local repository. Is anyone using 
TortoiseSVN, and can enlighten me?

Thanks
Alex


From e.m.giordano at emagsoftware.it  Mon Jul 16 04:05:47 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jul 16 04:06:28 2007
Subject: [Harbour] Further Testing for Beta 3 or Release Candidate1	status?
References: <200707141242.02447.philb@philb.us>	<20070714202046.GA5074@localhost.localdomain>	<200707141844.03715.philb@philb.us>	<20070715062441.GA11933@localhost.localdomain><20070715073235.GA15706@localhost.localdomain>
	<469B257A.7080309@mweb.co.za>
Message-ID: <005501c7c780$1e21a050$ca64fea9@emag>


----- Original Message ----- 
From: "Alex Strickland" <sscc@mweb.co.za>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Monday, July 16, 2007 9:59 AM
Subject: Re: [Harbour] Further Testing for Beta 3 or Release Candidate1 
status?


> I was unable to create Beta 3 for MSVC with CVS because of the corruption. 
> I thought I would try again for SVN. But I can't see how to see the BETA 
> tag/branch to update my local repository. Is anyone using TortoiseSVN, and 
> can enlighten me?

Try "Update to revision".

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From sscc at mweb.co.za  Mon Jul 16 04:18:17 2007
From: sscc at mweb.co.za (Alex Strickland)
Date: Mon Jul 16 04:18:22 2007
Subject: [Harbour] Further Testing for Beta 3 or Release Candidate1	status?
In-Reply-To: <005501c7c780$1e21a050$ca64fea9@emag>
References: <200707141242.02447.philb@philb.us>	<20070714202046.GA5074@localhost.localdomain>	<200707141844.03715.philb@philb.us>	<20070715062441.GA11933@localhost.localdomain><20070715073235.GA15706@localhost.localdomain>	<469B257A.7080309@mweb.co.za>
	<005501c7c780$1e21a050$ca64fea9@emag>
Message-ID: <469B29C9.5090506@mweb.co.za>

Enrico Maria Giordano wrote:

> Try "Update to revision".

I did, I cannot see where a "revision" ties up with a tag/branch.

Regards
Alex

From e.m.giordano at emagsoftware.it  Mon Jul 16 05:04:50 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jul 16 05:05:40 2007
Subject: [Harbour] Further Testing for Beta 3 or Release Candidate1	status?
References: <200707141242.02447.philb@philb.us>	<20070714202046.GA5074@localhost.localdomain>	<200707141844.03715.philb@philb.us>	<20070715062441.GA11933@localhost.localdomain><20070715073235.GA15706@localhost.localdomain>	<469B257A.7080309@mweb.co.za><005501c7c780$1e21a050$ca64fea9@emag>
	<469B29C9.5090506@mweb.co.za>
Message-ID: <00ac01c7c788$5e5a3bc0$ca64fea9@emag>


----- Original Message ----- 
From: "Alex Strickland" <sscc@mweb.co.za>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Monday, July 16, 2007 10:18 AM
Subject: Re: [Harbour] Further Testing for Beta 3 or Release Candidate1 
status?


> > Try "Update to revision".
>
> I did, I cannot see where a "revision" ties up with a tag/branch.

Sorry, I don't know.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From soporte at dsgsoftware.com  Mon Jul 16 06:11:04 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Mon Jul 16 06:11:56 2007
Subject: [Harbour] Building xHarbour application
Message-ID: <002101c7c791$a812d3e0$1700000a@PcJuanxp>

Hi all,

I want to test my current xHarbour app with Harbour.

I think at this moment they only exist 2 reasons that impede a complete test 
:

1) The fourth argument on Str() function (it's an extension to make a left 
trim of the result).
2) The TXml class.

Would it be possible / interesting to borrow them from xHarbour [to use 
under HB_COMPAT_XHB] ?

Best regards
Juan 

From e.m.giordano at emagsoftware.it  Mon Jul 16 06:26:54 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jul 16 06:28:32 2007
Subject: [Harbour] Visual FoxPro incompatibility
Message-ID: <00e901c7c793$d50b0e60$ca64fea9@emag>

The following sample:

REQUEST DBFCDX


FUNCTION MAIN()

    RDDSETDEFAULT( "DBFCDX" )

    USE ARTSTOCS INDEX ARTSTOCS

    ? ORDKEYCOUNT()

    ? FIELDTYPE( FIELDPOS( "PZSTANDARD" ) )
    ? FIELDTYPE( FIELDPOS( "TIMEINS" ) )
    ? FIELDTYPE( FIELDPOS( "TIMEMOD" ) )

    ? FIELD -> pzstandard
    ? FIELD -> timeins
    ? FIELD -> timemod

    WHILE !EOF()
        ? FIELD -> codart, FIELD -> data
        SKIP
    ENDDO

    CLOSE

    INKEY( 0 )

    RETURN NIL

gives:

keyLen=70
parent=2800, iKey=0, rec=88
 child=1400, iKey=26, rec=88
parent val=[ajvbrwwj?YVV?????????????VX?V^?XVV[]
 child 
val=[ajvbrwwj?YVV?????????????VX?V^?XVV[                                   ]
Unrecoverable error 9201: hb_cdxPageSeekKey: wrong parent key.
Called from DBSKIP(0)

Please not that ARTSTOCS.DBF and ARTSTOCS.CDX are from Visual FoxPro.

I can send DBF and CDX if you want.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From mpaliwoda at interia.pl  Sun Jul 15 15:50:45 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Mon Jul 16 08:28:56 2007
Subject: [Harbour] A few current makefile system questions
In-Reply-To: <469911AA.7050309@interia.pl>
References: <46952899.9030507@interia.pl>	<20070714114129.GB1922@localhost.localdomain>
	<469911AA.7050309@interia.pl>
Message-ID: <469A7A95.7000701@interia.pl>

Marek Paliwoda wrote :

>> Please look at make_xmingw.sh - it needs native platform builds of
>> ppgen and harbour.
> 
> Will look deeply into it.

Works perfectly with GNU makefiles :). Thanks very much.

I tried to implement HB_BIN_COMPILE and HB_PPGEN_PATH
for other makefiles, but unfortunately they do not fit
very well into Bcc and Msvc make behavior. So I've done
cross-compiling for Bcc and Msvc in a little bit different
way. You have to define environment variables HB and PPGEN
to fully qualified paths to harbour.exe and ppgen.exe
respectivly. Something like :
     set HB=<path_to_harbour_compiler>\harbour.exe
     set PPGEN=<path_to_ppgen_executable>\ppgen.exe
I did not describe those above variables in makefile's
headers however, due to my lack of english knowledge :).

I am attaching modified makefile.bc and makefile.vc to
this post, asking someone to commit it to a current CVS.
Unfortunately I do not have SVN client configured here,
nor I am very familiar with SVN at all. It even took me
quite a while to figure out that current harbour uses SVN
instead of CVS. I was quite suprised to see the last
ChangeLog entry dated 2007-06-16 23:42 after performing
full CVS checkout :).
BUT, I like switching to SVN very much, even if I am not
familiar with it. The speed of getting full SVN sources
is uncomparable to CVS. Great move.

BTW, Please keep in mind that current harbour cross-compiling
features are not fully supported. On some platforms building
harbour.exe, hbpp.exe, ppgen.exe, etc. does not make much sense
at all (WinCE for example).

-- 

Marek



----------------------------------------------------------------------
Inspiruj?ca nagosc 
Zobacz >>> http://link.interia.pl/f1ade

-------------- next part --------------
#
# $Id: makefile.bc 7456 2007-05-31 13:12:34Z druzus $
#

#
# Makefile for Harbour Project for Borland C/C++ 5.x compilers
#

# ---------------------------------------------------------------
# If you need to set additional compiler/linker options use the
# environment variables below, but please DON'T MODIFY THIS FILE
# for this purpose.
# ---------------------------------------------------------------

#
# NOTE: You can use these envvars to configure the make process:
#       (note that these are all optional)
#
#       CFLAGS            - Extra C compiler options for libraries and for
#                           executables
#       C_USR             - Extra C compiler options for libraries and for
#                           executables (GNU make compatible envvar)
#       CLIBFLAGS         - Extra C compiler options for the static libraries
#       CLIBFLAGSDLL      - Extra C compiler options for the shared libraries
#
#       LDFLAGS           - Extra linker options for the static libraries
#       LDFLAGSDLL        - Extra linker options for the shared libraries
#
#       HARBOURFLAGS      - Extra Harbour compiler options for static libs/exes
#       HARBOURFLAGSDLL   - Extra Harbour compiler options for shared libraries
#       PRG_USR           - Extra Harbour compiler options
#                           (GNU make compatible envvar)
#       HB_GT_LIB         - To override the default GT driver
#                           (search for HB_GT_LIBS for a list of values)
#       HB_BUILD_DLL      - If set to yes enables building harbour VM+RTL
#                           dll in addition to normal static build
#       HB_BUILD_DEBUG    - If set to yes causes to compile with debug info
#       HB_BUILD_VERBOSE  - enables echoing commands being executed
#       HB_REBUILD_PARSER - If set to yes force preprocessing new rules by
#                           bison (you must use bison 2.3 or later)
#       BCCDLL_WITH_DYNRT - If set to -tWR causes that harbour-bc.dll
#                           will use dynamic runtime library (recommended)
#       HB_INSTALL_PREFIX - Path to instalation directory into which
#                           Harbour will be installed when the command
#                           "make_bc.bat install" is lauched. Defaults
#                           to current directory
#
#       HB_DOC_PDF        - Turns on the .PDF file support in the HBDOC utility.
#                           Note that this will require the pdflib contrib.

# ---------------------------------------------------------------
# "echo." intentionally used instead of "echo", to avoid conflicts
# with external commands named echo.
# using macros for ECHO and DEL to allow overiding such as:
#
#    set ECHO=cmd /c echo
#    set DEL=cmd /c del
#
# The above might be needed on Windows 2000 and XP.
# The macros are referenced in makefile.bc
# ---------------------------------------------------------------

.AUTODEPEND

#**********************************************************

.SUFFIXES: .exe .lib .obj .prg .c .l .y

#**********************************************************

!ifndef ECHO
   ECHO = echo.
!endif
!ifndef DEL
   DEL = del
!endif

#**********************************************************

CC     = bcc32.exe
LINKER = ilink32.exe
MKLIB  = tlib.exe

# subdir name for objs,libs,exes
# depends on chosen compiler type
#      Bcc=b32, Msvc=vc
!ifndef CC_DIRNAME
    CC_DIRNAME = b32
!endif

#**********************************************************
#**********************************************************
#**********************************************************

# Include Common Object list files
# shared between Msvc and Borland

!include common.mak

#**********************************************************

# Some definitions cannot be kept in Common.mak
# due to serious limitations of Microsoft Nmake

DLL_OBJS = $(TMP_DLL_OBJS:$(OBJ_DIR)=$(DLL_OBJ_DIR))

#**********************************************************
#**********************************************************
#**********************************************************

# allows to do cross-compiling if neccesary.
!ifndef HB
    HB = $(HARBOUR_EXE)
!endif

# allows to do cross-compiling if neccesary.
!ifndef PPGEN
    PPGEN = $(HBPPGEN_EXE)
!endif

#**********************************************************
#**********************************************************
#**********************************************************

#
# C compiler definition and C flags. These should never have to change.
#

# Main "Include" directory
INCLUDE_DIR    = include

# C Compiler Flags
CFLAGS         = -I$(INCLUDE_DIR) $(C_USR) $(CFLAGS) -Iobj\$(CC_DIRNAME)
!ifndef BCC_NOOPTIM
   CFLAGS      = -O2 $(CFLAGS)
!endif
!if "$(HB_BUILD_DEBUG)" == "yes"
    CFLAGS     = -y -v $(CFLAGS)
!endif
!if "$(BCCDLL_WITH_DYNRT)" == "-tWR"
   RTLIBSUFFIX = i
!endif
CLIBFLAGS      = -c -q $(CFLAGS) $(CLIBFLAGS)
CLIBFLAGSDLL   = -D__EXPORT__ -tWM $(BCCDLL_WITH_DYNRT) $(CLIBFLAGS) $(CLIBFLAGSDLL)
CEXEFLAGSDLL   = -tWM $(BCCDLL_WITH_DYNRT) $(CLIBFLAGS) $(CEXEFLAGSDLL)

# Harbour Compiler Flags
HBFLAGSCMN     = -i$(INCLUDE_DIR) -q0 -w2 -es2 -gc0 $(PRG_USR)
!ifdef HB_DOC_PDF
   HBFLAGSCMN  = $(HBFLAGSCMN) -dPDF
!endif
HARBOURFLAGS   = -n $(HBFLAGSCMN) $(HARBOURFLAGS)
HARBOURFLAGSDLL= -D__EXPORT__ -n1 -l $(HBFLAGSCMN) $(HARBOURFLAGSDLL)

# Linker Flags
LDFLAGS        = -ap -Tpe -Gn -C -L$(LIB_DIR) -L$(BIN_DIR) $(LDFLAGS)
LDFLAGSDLL     = -aa -Gn -C -Tpd -Gi -L$(LIB_DIR) $(LDFLAGSDLL)
!if "$(HB_BUILD_DEBUG)" == "yes"
    LDFLAGS    = -v $(LDFLAGS)
    LDFLAGSDLL = -v $(LDFLAGSDLL)
!endif

#**********************************************************

# This is needed, otherwise the libs may overflow
# when debug info is requested with -v -y
ARFLAGS = /P32

#**********************************************************
# COMPILE Rules
#**********************************************************

# General *.c --> *.obj COMPILE rule for STATIC Libraries
{$(ALL_SRC_DIRS)}.c{$(OBJ_DIR)}.obj:
    $(CC) $(CLIBFLAGS) -o$@ $<

#**********************************************************

# General *.prg --> *.obj COMPILE rule for STATIC Libraries
{$(ALL_SRC_DIRS)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\  $**
    $(CC) $(CLIBFLAGS) -o$@ $(OBJ_DIR)\$&.c

#**********************************************************

# General *.c --> *.obj COMPILE rule for SHARED Libraries
{$(ALL_LIB_SRC_DIRS)}.c{$(DLL_OBJ_DIR)}.obj:
    $(CC) $(CLIBFLAGSDLL) -o$@ $<

#**********************************************************

# General *.prg --> *.obj COMPILE rule for SHARED Libraries
{$(ALL_LIB_SRC_DIRS)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\  $**
    $(CC) $(CLIBFLAGSDLL) -o$@ $(DLL_OBJ_DIR)\$&.c

#**********************************************************

# General *.c --> *.obj COMPILE rules for EXECUTABLES,
# which use Harbour SHARED Library compiled as DLL
{$(ALL_EXE_SRC_DIRS)}.c{$(DLL_OBJ_DIR)}.obj:
    $(CC) $(CEXEFLAGSDLL) -o$@ $<

#**********************************************************

# General *.prg --> *.obj COMPILE rules for EXECUTABLES,
# which use Harbour SHARED Library compiled as DLL
{$(ALL_EXE_SRC_DIRS)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\  $**
    $(CC) $(CEXEFLAGSDLL) -o$@ $(DLL_OBJ_DIR)\$&.c

#**********************************************************
#**********************************************************
#**********************************************************

# General BUILD rules (not used !)

#**********************************************************

# General Library BUILD rule
#{$(OBJ_DIR)}.obj{$(LIB_DIR)}.lib:
#    IF EXIST "$@" $(DEL) "$@" > NUL
#    $(MKLIB) "$@" $(ARFLAGS) @&&!
#+$(**: = &^
#+)
#!

#**********************************************************
#**********************************************************
#**********************************************************

# TARGET dependencies

#**********************************************************

all : $(HB_DEST_DIRS) $(HB_BUILD_TARGETS)

#
# Helper targets
#

BasicLibs : $(COMMON_LIB) $(COMPILER_LIB) $(PP_LIB)
BasicExes : $(HARBOUR_EXE)
StdLibs   : $(STANDARD_STATIC_HBLIBS)

#**********************************************************

clean: doClean
Clean: doClean
CLEAN: doClean

doClean:
    -if exist $(BIN_DIR)\*.exe $(DEL) $(BIN_DIR)\*.exe > nul
    -if exist $(BIN_DIR)\*.tds $(DEL) $(BIN_DIR)\*.tds > nul
    -if exist $(BIN_DIR)\*.tr? $(DEL) $(BIN_DIR)\*.tr? > nul
    -if exist $(BIN_DIR)\*.map $(DEL) $(BIN_DIR)\*.map > nul
    -if exist $(BIN_DIR)\*.dll $(DEL) $(BIN_DIR)\*.dll > nul
    -if exist $(BIN_DIR)\*.lib $(DEL) $(BIN_DIR)\*.lib > nul
    -if exist $(LIB_DIR)\*.lib $(DEL) $(LIB_DIR)\*.lib > nul
    -if exist $(LIB_DIR)\*.bak $(DEL) $(LIB_DIR)\*.bak > nul
    -if exist $(OBJ_DIR)\*.obj $(DEL) $(OBJ_DIR)\*.obj > nul
    -if exist $(OBJ_DIR)\*.c   $(DEL) $(OBJ_DIR)\*.c   > nul
    -if exist $(OBJ_DIR)\*.h   $(DEL) $(OBJ_DIR)\*.h   > nul
    -if exist $(PP_DIR)\pptable.c    $(DEL) $(PP_DIR)\pptable.c    > nul
    -if exist $(DLL_OBJ_DIR)\*.obj   $(DEL) $(DLL_OBJ_DIR)\*.obj   > nul
    -if exist $(DLL_OBJ_DIR)\*.c     $(DEL) $(DLL_OBJ_DIR)\*.c     > nul
    -if exist $(DLL_OBJ_DIR)\*.h     $(DEL) $(DLL_OBJ_DIR)\*.h     > nul
    -if exist inst_$(CC_DIRNAME).log $(DEL) inst_$(CC_DIRNAME).log > nul
    -if exist bin\*.exe        $(DEL) bin\*.exe > nul
    -if exist lib\*.lib        $(DEL) lib\*.lib > nul

#**********************************************************

install : doInstall
Install : doInstall
INSTALL : doInstall

doInstall: $(HB_BIN_INSTALL) $(HB_LIB_INSTALL) $(HB_INC_INSTALL)
    -if exist $(HB_BIN_INSTALL)\nul if exist $(BIN_DIR)\*.exe   copy /B $(BIN_DIR)\*.exe $(HB_BIN_INSTALL) >  inst_$(CC_DIRNAME).log
    -if exist $(HB_BIN_INSTALL)\nul if exist $(BIN_DIR)\*.dll   copy /B $(BIN_DIR)\*.dll $(HB_BIN_INSTALL) >> inst_$(CC_DIRNAME).log
    -if exist $(HB_LIB_INSTALL)\nul if exist $(BIN_DIR)\*.lib   copy /B $(BIN_DIR)\*.lib $(HB_LIB_INSTALL) >> inst_$(CC_DIRNAME).log
    -if exist $(HB_LIB_INSTALL)\nul if exist $(LIB_DIR)\*.lib   copy /B $(LIB_DIR)\*.lib $(HB_LIB_INSTALL) >> inst_$(CC_DIRNAME).log
!if "$(HB_INSTALL_PREFIX)" != "."
    -if exist $(HB_INC_INSTALL)\nul   copy /A include\*.api $(HB_INC_INSTALL) >> inst_$(CC_DIRNAME).log
    -if exist $(HB_INC_INSTALL)\nul   copy /A include\*.ch  $(HB_INC_INSTALL) >> inst_$(CC_DIRNAME).log
    -if exist $(HB_INC_INSTALL)\nul   copy /A include\*.h   $(HB_INC_INSTALL) >> inst_$(CC_DIRNAME).log
!endif

#**********************************************************

$(HB_DEST_DIRS) $(HB_BIN_INSTALL) $(HB_LIB_INSTALL) $(HB_INC_INSTALL):
    !if not exist $@\nul mkdir $@

#**********************************************************
#
# LIBRARY Targets BUILD rules
#
#**********************************************************
$(COMMON_LIB)   : $(COMMON_LIB_OBJS)
    IF EXIST "$(COMMON_LIB)" $(DEL) "$(COMMON_LIB)" > NUL
    $(MKLIB) "$(COMMON_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(PP_LIB)       : $(PP_LIB_OBJS)
    IF EXIST "$(PP_LIB)" $(DEL) "$(PP_LIB)" > NUL
    $(MKLIB) "$(PP_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(COMPILER_LIB) : $(COMPILER_LIB_OBJS)
    IF EXIST "$(COMPILER_LIB)" $(DEL) "$(COMPILER_LIB)" > NUL
    $(MKLIB) "$(COMPILER_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(VM_LIB)       :: BasicExes
$(VM_LIB)       :: $(VM_LIB_OBJS)
    IF EXIST "$(VM_LIB)" $(DEL) "$(VM_LIB)" > NUL
    $(MKLIB) "$(VM_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(RTL_LIB)      :: BasicExes
$(RTL_LIB)      :: $(RTL_LIB_OBJS)
    IF EXIST "$(RTL_LIB)" $(DEL) "$(RTL_LIB)" > NUL
    $(MKLIB) "$(RTL_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(MACRO_LIB)    : $(MACRO_LIB_OBJS)
    IF EXIST "$(MACRO_LIB)" $(DEL) "$(MACRO_LIB)" > NUL
    $(MKLIB) "$(MACRO_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(DEBUG_LIB)    :: BasicExes
$(DEBUG_LIB)    :: $(DEBUG_LIB_OBJS)
    IF EXIST "$(DEBUG_LIB)" $(DEL) "$(DEBUG_LIB)" > NUL
    $(MKLIB) "$(DEBUG_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(LANG_LIB)     : $(LANG_LIB_OBJS)
    IF EXIST "$(LANG_LIB)" $(DEL) "$(LANG_LIB)" > NUL
    $(MKLIB) "$(LANG_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(CODEPAGE_LIB) : $(CODEPAGE_LIB_OBJS)
    IF EXIST "$(CODEPAGE_LIB)" $(DEL) "$(CODEPAGE_LIB)" > NUL
    $(MKLIB) "$(CODEPAGE_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(PCRE_LIB)     : $(PCRE_LIB_OBJS)
    IF EXIST "$(PCRE_LIB)" $(DEL) "$(PCRE_LIB)" > NUL
    $(MKLIB) "$(PCRE_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(RDD_LIB)      :: BasicExes
$(RDD_LIB)      :: $(RDD_LIB_OBJS)
    IF EXIST "$(RDD_LIB)" $(DEL) "$(RDD_LIB)" > NUL
    $(MKLIB) "$(RDD_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(NULSYS_LIB)   : $(NULSYS_LIB_OBJS)
    IF EXIST "$(NULSYS_LIB)" $(DEL) "$(NULSYS_LIB)" > NUL
    $(MKLIB) "$(NULSYS_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(DBFNTX_LIB)   :: BasicExes
$(DBFNTX_LIB)   :: $(DBFNTX_LIB_OBJS)
    IF EXIST "$(DBFNTX_LIB)" $(DEL) "$(DBFNTX_LIB)" > NUL
    $(MKLIB) "$(DBFNTX_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(DBFCDX_LIB)   : $(DBFCDX_LIB_OBJS)
    IF EXIST "$(DBFCDX_LIB)" $(DEL) "$(DBFCDX_LIB)" > NUL
    $(MKLIB) "$(DBFCDX_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(DBFFPT_LIB)   : $(DBFFPT_LIB_OBJS)
    IF EXIST "$(DBFFPT_LIB)" $(DEL) "$(DBFFPT_LIB)" > NUL
    $(MKLIB) "$(DBFFPT_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(HBSIX_LIB)    : $(HBSIX_LIB_OBJS)
    IF EXIST "$(HBSIX_LIB)" $(DEL) "$(HBSIX_LIB)" > NUL
    $(MKLIB) "$(HBSIX_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(HSX_LIB)      : $(HSX_LIB_OBJS)
    IF EXIST "$(HSX_LIB)" $(DEL) "$(HSX_LIB)" > NUL
    $(MKLIB) "$(HSX_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(USRRDD_LIB)   : $(USRRDD_LIB_OBJS)
    IF EXIST "$(USRRDD_LIB)" $(DEL) "$(USRRDD_LIB)" > NUL
    $(MKLIB) "$(USRRDD_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(GTCGI_LIB)    : $(GTCGI_LIB_OBJS)
    IF EXIST "$(GTCGI_LIB)" $(DEL) "$(GTCGI_LIB)" > NUL
    $(MKLIB) "$(GTCGI_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(GTDOS_LIB)    : $(GTDOS_LIB_OBJS)
    IF EXIST "$(GTDOS_LIB)" $(DEL) "$(GTDOS_LIB)" > NUL
    $(MKLIB) "$(GTDOS_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(GTPCA_LIB)    : $(GTPCA_LIB_OBJS)
    IF EXIST "$(GTPCA_LIB)" $(DEL) "$(GTPCA_LIB)" > NUL
    $(MKLIB) "$(GTPCA_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(GTSTD_LIB)    : $(GTSTD_LIB_OBJS)
    IF EXIST "$(GTSTD_LIB)" $(DEL) "$(GTSTD_LIB)" > NUL
    $(MKLIB) "$(GTSTD_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(GTWIN_LIB)    : $(GTWIN_LIB_OBJS)
    IF EXIST "$(GTWIN_LIB)" $(DEL) "$(GTWIN_LIB)" > NUL
    $(MKLIB) "$(GTWIN_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(GTWVT_LIB)    : $(GTWVT_LIB_OBJS)
    IF EXIST "$(GTWVT_LIB)" $(DEL) "$(GTWVT_LIB)" > NUL
    $(MKLIB) "$(GTWVT_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(GTGUI_LIB)    : $(GTGUI_LIB_OBJS)
    IF EXIST "$(GTGUI_LIB)" $(DEL) "$(GTGUI_LIB)" > NUL
    $(MKLIB) "$(GTGUI_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
#
# EXECUTABLE Targets
#
#**********************************************************
#
# HARBOUR build rule
#
$(HARBOUR_EXE) :: BasicLibs
$(HARBOUR_EXE) :: $(HARBOUR_EXE_OBJS)
    IF EXIST "$(HARBOUR_EXE)" $(DEL) "$(HARBOUR_EXE)" > NUL
    $(CC) @&&!
$(CFLAGS)
-e$(HARBOUR_EXE)
$(**: = ^
)
$(COMPILER_LIB)
$(COMMON_LIB)
$(PP_LIB)
!
#**********************************************************
#
# HBPPGEN build rule
#
$(HBPPGEN_EXE) :: $(COMMON_LIB)
$(HBPPGEN_EXE) :: $(HBPPGEN_EXE_OBJS)
    IF EXIST "$(HBPPGEN_EXE)" $(DEL) "$(HBPPGEN_EXE)" > NUL
    $(CC) @&&!
$(CFLAGS)
-e$(HBPPGEN_EXE)
$(**: = ^
)
$(COMMON_LIB)
!
#**********************************************************
#
# HBPP build rule
#
$(HBPP_EXE) :: BasicLibs
$(HBPP_EXE) :: $(HBPP_EXE_OBJS)
    IF EXIST "$(HBPP_EXE)" $(DEL) "$(HBPP_EXE)" > NUL
    $(CC) @&&!
$(CFLAGS)
-e$(HBPP_EXE)
$(**: = ^
)
$(COMMON_LIB)
!
#**********************************************************
#
# HBPPTEST build rule
#
$(HBPPTEST_EXE) :: BasicLibs BasicExes StdLibs
$(HBPPTEST_EXE) :: $(HBPPTEST_EXE_OBJS)
    IF EXIST "$(HBPPTEST_EXE)" $(DEL) "$(HBPPTEST_EXE)" > NUL
    $(CC) @&&!
$(CFLAGS)
-e$(HBPPTEST_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
$(PP_LIB)
!
#**********************************************************
#
# HBRUN build rule
#
$(HBRUN_EXE)  :: BasicLibs BasicExes StdLibs
$(HBRUN_EXE)  :: $(HBRUN_EXE_OBJS)
    IF EXIST "$(HBRUN_EXE)" $(DEL) "$(HBRUN_EXE)" > NUL
    $(CC) @&&!
$(CFLAGS)
-e$(HBRUN_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
!
#**********************************************************
#
# HBTEST build rule
#
$(HBTEST_EXE) :: BasicLibs BasicExes StdLibs
$(HBTEST_EXE) :: $(HBTEST_EXE_OBJS)
    IF EXIST "$(HBTEST_EXE)" $(DEL) "$(HBTEST_EXE)" > NUL
    $(CC) @&&!
$(CFLAGS)
-e$(HBTEST_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
!
#**********************************************************
#
# HBDOC build rule
#

$(HBDOC_EXE)  :: BasicLibs BasicExes StdLibs
$(HBDOC_EXE)  :: $(HBDOC_EXE_OBJS)
    IF EXIST "$(HBDOC_EXE)" $(DEL) "$(HBDOC_EXE)" > NUL
    $(CC) @&&!
$(CFLAGS)
-e$(HBDOC_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
!
#**********************************************************
#
# HBMAKE build rule
#
$(HBMAKE_EXE) :: BasicLibs BasicExes StdLibs
$(HBMAKE_EXE) :: $(HBMAKE_EXE_OBJS)
    IF EXIST "$(HBMAKE_EXE)" $(DEL) "$(HBMAKE_EXE)" > NUL
    $(CC) @&&!
$(CFLAGS)
-e$(HBMAKE_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
!
#**********************************************************
#
# HBVER build rule
#
$(HBVER_EXE)  :: BasicLibs BasicExes StdLibs
$(HBVER_EXE)  :: $(HBVER_EXE_OBJS)
    IF EXIST "$(HBVER_EXE)" $(DEL) "$(HBVER_EXE)" > NUL
    $(CC) @&&!
$(CFLAGS)
-e$(HBVER_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
!
#**********************************************************
#
# DLL Targets
#
#**********************************************************
$(HARBOUR_DLL) :: BasicLibs BasicExes
$(HARBOUR_DLL) :: $(DLL_OBJS)
    $(LINKER) $(LDFLAGSDLL) @&&!
c0d32.obj $**, $@,, cw32mt$(RTLIBSUFFIX).lib import32.lib
!
#**********************************************************
#
# DLL EXECUTABLE Targets
#
#**********************************************************
$(HBTESTDLL_EXE) :: BasicLibs BasicExes
$(HBTESTDLL_EXE) :: $(DLL_OBJ_DIR)\mainstd.obj $(HBTEST_EXE_OBJS:$(OBJ_DIR)=$(DLL_OBJ_DIR))
    $(LINKER) $(LDFLAGS) @&&!
c0x32.obj $**, $@,,$(HARBOUR_DLL:.dll=.lib) cw32mt$(RTLIBSUFFIX).lib import32.lib
!
#----------------------------------------------------------
#$(DLL_OBJ_DIR)\hbtest.obj : $(HBTEST_DIR)\hbtest.prg
#    $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\  $**
#    $(CC) $(CLIBFLAGSDLL) -o$@ $(DLL_OBJ_DIR)\$&.c
#----------------------------------------------------------
$(DLL_OBJ_DIR)\mainstd.obj : $(VM_DIR)\mainstd.c
    $(CC) $(CEXEFLAGSDLL) -o$@ $**
#**********************************************************
#**********************************************************
#**********************************************************

# EXTRA Object's DEPENDENCIES

#**********************************************************

# Generated by an intermediate utility ppgen.exe
# built at the initial phase of build process
$(OBJ_DIR)\pptable.obj : $(PP_DIR)\pptable.c
$(PP_DIR)\pptable.c    : include\hbstdgen.ch
    echo $(PPGEN)
    IF EXIST "$(PP_DIR)\pptable.c" $(DEL) "$(PP_DIR)\pptable.c" > nul
    $(PPGEN) include/hbstdgen.ch -o$(PP_DIR)/pptable.c -q

#**********************************************************

!if "$(HB_REBUILD_PARSER)" == "yes"

$(OBJ_DIR)\macroy.c : $(MACRO_DIR)\macro.y
    bison --no-line -d $** -o$@

$(OBJ_DIR)\harboury.c : $(HARBOUR_DIR)\harbour.y
    bison --no-line -d $** -o$@

!else

$(OBJ_DIR)\macroy.c : $(MACRO_DIR)\macro.yyc
    copy /A $** $@
    copy /A $(**:.yyc=.yyh) $(@:.c=.h)

$(OBJ_DIR)\harboury.c : $(HARBOUR_DIR)\harbour.yyc
    copy /A $** $@
    copy /A $(**:.yyc=.yyh) $(@:.c=.h)

!endif

#**********************************************************

$(OBJ_DIR)\macrol.c : $(MACRO_DIR)\macro.l
    flex -Phb_macro -i -8 -o$@ $**

$(OBJ_DIR)\harbourl.c : $(HARBOUR_DIR)\harbour.l
    flex -Phb_comp -i -8 -o$@ $**

#**********************************************************

$(OBJ_DIR)\macroy.obj : $(OBJ_DIR)\macroy.c
$(OBJ_DIR)\macrol.obj : $(OBJ_DIR)\macrol.c
    $(ECHO) > $(OBJ_DIR)\unistd.h
    $(CC) $(CLIBFLAGS) -I$(OBJ_DIR) -o$@ $**
    $(DEL) $(OBJ_DIR)\unistd.h

$(OBJ_DIR)\harboury.obj : $(OBJ_DIR)\harboury.c
$(OBJ_DIR)\harbourl.obj : $(OBJ_DIR)\harbourl.c
    $(ECHO)  > $(OBJ_DIR)\unistd.h
    $(CC) $(CLIBFLAGS) -I$(OBJ_DIR) -o$@ $**
    $(DEL) $(OBJ_DIR)\unistd.h

#**********************************************************

!if "$(HB_REBUILD_PARSER)" == "yes"

$(DLL_OBJ_DIR)\macroy.c : $(MACRO_DIR)\macro.y
    bison --no-line -d $** -o$@

$(DLL_OBJ_DIR)\harboury.c : $(HARBOUR_DIR)\harbour.y
    bison --no-line -d $** -o$@

!else

$(DLL_OBJ_DIR)\macroy.c : $(MACRO_DIR)\macro.yyc
    copy /A $** $@
    copy /A $(**:.yyc=.yyh) $(@:.c=.h)

$(DLL_OBJ_DIR)\harboury.c : $(HARBOUR_DIR)\harbour.yyc
    copy /A $** $@
    copy /A $(**:.yyc=.yyh) $(@:.c=.h)

!endif

#**********************************************************

$(DLL_OBJ_DIR)\macrol.c : $(MACRO_DIR)\macro.l
    flex -Phb_macro -i -8 -o$@ $**

$(DLL_OBJ_DIR)\harbourl.c : $(HARBOUR_DIR)\harbour.l
    flex -Phb_comp -i -8 -o$@ $**

#**********************************************************

$(DLL_OBJ_DIR)\macroy.obj : $(DLL_OBJ_DIR)\macroy.c
$(DLL_OBJ_DIR)\macrol.obj : $(DLL_OBJ_DIR)\macrol.c
    $(ECHO) > $(DLL_OBJ_DIR)\unistd.h
    $(CC) $(CLIBFLAGS) -I$(DLL_OBJ_DIR) -o$@ $**
    $(DEL) $(DLL_OBJ_DIR)\unistd.h

$(DLL_OBJ_DIR)\harboury.obj : $(DLL_OBJ_DIR)\harboury.c
$(DLL_OBJ_DIR)\harbourl.obj : $(DLL_OBJ_DIR)\harbourl.c
    $(ECHO)  > $(DLL_OBJ_DIR)\unistd.h
    $(CC) $(CLIBFLAGS) -I$(DLL_OBJ_DIR) -o$@ $**
    $(DEL) $(DLL_OBJ_DIR)\unistd.h

#**********************************************************
-------------- next part --------------
#
# $Id: makefile.vc 7563 2007-06-27 17:00:34Z druzus $
#

#
# Makefile for Harbour Project for Msvc 6.0/7.1 compilers
#

# ---------------------------------------------------------------
# If you need to set additional compiler/linker options use the
# environment variables below, but please DON'T MODIFY THIS FILE
# for this purpose.
# ---------------------------------------------------------------

#
# NOTE: You can use these envvars to configure the make process:
#       (note that these are all optional)
#
#       CFLAGS            - Extra C compiler options for libraries and for
#                           executables
#       C_USR             - Extra C compiler options for libraries and for
#                           executables (GNU make compatible envvar)
#       CLIBFLAGS         - Extra C compiler options for the static libraries
#       CLIBFLAGSDLL      - Extra C compiler options for the shared libraries
#
#       LDFLAGS           - Extra linker options for the static libraries
#       LDFLAGSDLL        - Extra linker options for the shared libraries
#
#       HARBOURFLAGS      - Extra Harbour compiler options for static libs/exes
#       HARBOURFLAGSDLL   - Extra Harbour compiler options for shared libraries
#       PRG_USR           - Extra Harbour compiler options
#                           (GNU make compatible envvar)
#       HB_GT_LIB         - To override the default GT driver
#                           (search for HB_GT_LIBS for a list of values)
#       HB_BUILD_DLL      - If set to yes enables building harbour VM+RTL
#                           dll in addition to normal static build
#       HB_BUILD_MODE     - If set to cpp causes to compile in C++ mode
#       HB_BUILD_DEBUG    - If set to yes causes to compile with debug info
#       HB_BUILD_VERBOSE  - enables echoing commands being executed
#       HB_INSTALL_PREFIX - Path to instalation directory into which
#                           Harbour will be installed when the command
#                           "make_vc.bat install" is lauched. Defaults
#                           to current directory
#       HB_VISUALC_VER    - Version of Visual C++ compiler (defaults to 60).
#                           Possible values are : 60, 70, 71, 80
#
#       HB_DOC_PDF        - Turns on the .PDF file support in the HBDOC utility.
#                           Note that this will require the pdflib contrib.

# ---------------------------------------------------------------
# "echo." intentionally used instead of "echo", to avoid conflicts
# with external commands named echo.
# using macros for ECHO and DEL to allow overiding such as:
#
#    set ECHO=cmd /c echo
#    set DEL=cmd /c del
#
# The above might be needed on Windows 2000 and XP.
# The macros are referenced in makefile.bc
# ---------------------------------------------------------------

.SUFFIXES: .exe .lib .obj .prg .c .l .y .ch

#**********************************************************

# Visual C++ version
!ifndef HB_VISUALC_VER
HB_VISUALC_VER = 60
!endif

#**********************************************************

!ifndef ECHO
ECHO = echo.
!endif
!ifndef DEL
DEL = del
!endif

#**********************************************************

CC     = cl.exe
LINKER = link.exe
MKLIB  = lib.exe

# Subdir name for objs,libs,exes.
# Based on chosen compiler type
#      Bcc=b32, Msvc=vc
!ifndef CC_DIRNAME
CC_DIRNAME = vc
!endif

#**********************************************************
#**********************************************************
#**********************************************************

# Include Common Object list files
# shared between Msvc and Borland

!include common.mak

#**********************************************************

# Some definitions cannot be kept in Common.mak
# due to serious limitations of Microsoft Nmake

# Nmake does not support macros in string
# substitution, so we have to hardcode it
DLL_OBJS = $(TMP_DLL_OBJS:obj\vc=obj\dll\vc)

#**********************************************************
#**********************************************************
#**********************************************************

# allows to do cross-compiling if neccesary.
!ifndef HB
HB = $(HARBOUR_EXE)
!endif

# allows to do cross-compiling if neccesary.
!ifndef PPGEN
PPGEN = $(HBPPGEN_EXE)
!endif

#**********************************************************
#**********************************************************
#**********************************************************

#
# C compiler definition and C flags. These should never have to change.
#

# Main "Include" directory
INCLUDE_DIR    = include

# In which mode compile Harbour C or CPP
!if "$(HB_BUILD_MODE)" == "cpp"
HB_BUILD_MODE  = P
!else
HB_BUILD_MODE  = C
!endif

# C Compiler Flags
!if $(HB_VISUALC_VER) >= 80
CFLAGS_VER     = -Ot2b1 -EHs-c- -FD -Gs -D_CRT_SECURE_NO_DEPRECATE
!else
CFLAGS_VER     = -Ogt2yb1p -GX- -G6 -YX -FD -Gs
!endif

CFLAGS         = -I$(INCLUDE_DIR) $(CFLAGS_VER) -T$(HB_BUILD_MODE) -W3 -nologo -D__WINDOWS__ -DWIN32 -D__WIN32__ $(C_USR) $(CFLAGS) -Iobj\$(CC_DIRNAME)

!if "$(HB_BUILD_DEBUG)" == "yes"
CFLAGS         = -Zi $(CFLAGS)
DBGMARKER      = d
!endif

CFLAGS         = -MT$(DBGMARKER) $(CFLAGS)

CLIBFLAGS      = -c $(CFLAGS) $(CLIBFLAGS)
CLIBFLAGSDLL   = -D__EXPORT__ $(CLIBFLAGS) $(CLIBFLAGSDLL)
CEXEFLAGSDLL   = $(CLIBFLAGS) $(CEXEFLAGSDLL)

# Harbour Compiler Flags
HBFLAGSCMN     = -i$(INCLUDE_DIR) -q0 -w2 -es2 -gc1 $(PRG_USR)
!ifdef HB_DOC_PDF
HBFLAGSCMN  = $(HBFLAGSCMN) -dPDF
!endif
HARBOURFLAGS   = -n $(HBFLAGSCMN) $(HARBOURFLAGS)
HARBOURFLAGSDLL= -D__EXPORT__ -n1 $(HBFLAGSCMN) $(HARBOURFLAGSDLL)

# Linker Flags
LDFLAGS        = /NOLOGO /SUBSYSTEM:console /OPT:WIN98 /LIBPATH:$(LIB_DIR) $(LDFLAGS)
LDFLAGSDLL     = /NOLOGO /DLL /OPT:WIN98 /LIBPATH:$(LIB_DIR) $(LDFLAGSDLL)
!if "$(HB_BUILD_DEBUG)" == "yes"
LDFLAGS        = /DEBUG $(LDFLAGS)
LDFLAGSDLL     = /DEBUG $(LDFLAGSDLL)
!endif

#**********************************************************
# COMPILE Rules
#**********************************************************

#*******************************************************
# General *.c --> *.obj COMPILE rules for STATIC Libraries
#*******************************************************
{$(OBJ_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(MAIN_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(COMMON_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(COMPILER_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(PP_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(VM_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(RTL_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(MACRO_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(DEBUG_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(LANG_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(CODEPAGE_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(PCRE_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(RDD_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(NULSYS_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(DBFNTX_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(DBFCDX_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(DBFFPT_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(HBSIX_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(HSX_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(USRRDD_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(GTCGI_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(GTPCA_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(GTSTD_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(GTWIN_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(GTWVT_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(GTGUI_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(HARBOUR_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(HBPP_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(HBPPTEST_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(HBRUN_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(HBTEST_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(HBDOC_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(HBMAKE_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(HBVER_DIR)}.c{$(OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************

#*******************************************************
# General *.prg --> *.obj COMPILE rules for STATIC Libraries
#*******************************************************
{$(OBJ_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(COMMON_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(PP_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(VM_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(RTL_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(MACRO_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(DEBUG_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(LANG_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(CODEPAGE_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(PCRE_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(RDD_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(NULSYS_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(DBFNTX_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(DBFCDX_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(DBFFPT_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBSIX_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(HSX_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(USRRDD_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTCGI_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTPCA_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTSTD_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTWIN_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTWVT_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTGUI_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(HARBOUR_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBPP_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBPPTEST_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) $< -o$(OBJ_DIR)\\
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBRUN_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBTEST_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBDOC_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBMAKE_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBVER_DIR)}.prg{$(OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************

#*******************************************************
# General *.c --> *.obj COMPILE rules for SHARED Libraries
#*******************************************************
{$(DLL_OBJ_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(MAIN_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(COMMON_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(COMPILER_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(PP_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(VM_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(RTL_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(MACRO_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(DEBUG_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(LANG_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(CODEPAGE_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(PCRE_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(RDD_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(NULSYS_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(DBFNTX_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(DBFCDX_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(DBFFPT_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(HBSIX_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(HSX_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(USRRDD_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(GTCGI_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(GTPCA_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(GTSTD_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(GTWIN_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(GTWVT_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(GTGUI_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************

#*******************************************************
# General *.c --> *.obj COMPILE rules for EXECUTABLES,
# which use Harbour SHARED Library compiled as DLL
#*******************************************************
#{$(HARBOUR_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
#    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
#{$(HBPP_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
#    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(HBPPTEST_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(HBRUN_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(HBTEST_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(HBDOC_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(HBMAKE_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(HBVER_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************

#*******************************************************
# General *.prg --> *.obj COMPILE rules for SHARED Libraries
#*******************************************************
{$(DLL_OBJ_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(COMMON_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(PP_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(VM_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(RTL_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(MACRO_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(DEBUG_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(LANG_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(PCRE_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(CODEPAGE_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(RDD_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(NULSYS_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(DBFNTX_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(DBFCDX_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(DBFFPT_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBSIX_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(HSX_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(USRRDD_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTCGI_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTPCA_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTSTD_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTWIN_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTWVT_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTGUI_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************

#*******************************************************
# General *.prg --> *.obj COMPILE rules for EXECUTABLES,
# which use Harbour SHARED Library compiled as DLL
#*******************************************************
#{$(HARBOUR_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
#    $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\ $<
#    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
#{$(HBPP_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
#    $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\ $<
#    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBPPTEST_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBRUN_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBTEST_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBDOC_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBMAKE_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBVER_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
    $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\ $<
    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c

#**********************************************************
#**********************************************************
#**********************************************************
#
# General BUILD rules (not used !)
#
#**********************************************************
# General Library BUILD rule
#{$(OBJ_DIR)}.obj{$(COMMON_DIR)}.lib:
#    IF EXIST "$@" $(DEL) "$@" > nul
#    $(MKLIB) /out:$@ <<
#$**
#<<
#**********************************************************
#**********************************************************
#**********************************************************

# TARGET dependencies

#**********************************************************

all : $(HB_DEST_DIRS) $(HB_BUILD_TARGETS)

#
# Helper targets - disabled for Msvc
#

#BasicLibs : $(COMMON_LIB) $(COMPILER_LIB) $(PP_LIB)
#BasicExes : $(HARBOUR_EXE)
#StdLibs   : $(STANDARD_STATIC_HBLIBS)

#**********************************************************

clean: doClean
Clean: doClean
CLEAN: doClean

doClean:
    -if exist *.idb            $(DEL) *.idb > nul
    -if exist *.pch            $(DEL) *.pch > nul
    -if exist *.pdb            $(DEL) *.pdb > nul
    -if exist $(OBJ_DIR)\*.obj $(DEL) $(OBJ_DIR)\*.obj > nul
    -if exist $(OBJ_DIR)\*.c   $(DEL) $(OBJ_DIR)\*.c   > nul
    -if exist $(OBJ_DIR)\*.h   $(DEL) $(OBJ_DIR)\*.h   > nul
    -if exist $(OBJ_DIR)\*.pch $(DEL) $(OBJ_DIR)\*.pch > nul
    -if exist $(LIB_DIR)\*.lib $(DEL) $(LIB_DIR)\*.lib > nul
    -if exist $(BIN_DIR)\*.exe $(DEL) $(BIN_DIR)\*.exe > nul
    -if exist $(BIN_DIR)\*.pdb $(DEL) $(BIN_DIR)\*.pdb > nul
    -if exist $(BIN_DIR)\*.ilk $(DEL) $(BIN_DIR)\*.ilk > nul
    -if exist $(BIN_DIR)\*.map $(DEL) $(BIN_DIR)\*.map > nul
    -if exist $(BIN_DIR)\*.dll $(DEL) $(BIN_DIR)\*.dll > nul
    -if exist $(BIN_DIR)\*.lib $(DEL) $(BIN_DIR)\*.lib > nul
    -if exist $(BIN_DIR)\*.exp $(DEL) $(BIN_DIR)\*.exp > nul
    -if exist $(PP_DIR)\pptable.c    $(DEL) $(PP_DIR)\pptable.c    > nul
    -if exist $(DLL_OBJ_DIR)\*.obj   $(DEL) $(DLL_OBJ_DIR)\*.obj   > nul
    -if exist $(DLL_OBJ_DIR)\*.c     $(DEL) $(DLL_OBJ_DIR)\*.c     > nul
    -if exist $(DLL_OBJ_DIR)\*.h     $(DEL) $(DLL_OBJ_DIR)\*.h     > nul
    -if exist inst_$(CC_DIRNAME).log $(DEL) inst_$(CC_DIRNAME).log > nul
    -if exist bin\*.exe        $(DEL) bin\*.exe > nul
    -if exist lib\*.lib        $(DEL) lib\*.lib > nul

#**********************************************************

install : doInstall
Install : doInstall
INSTALL : doInstall

doInstall: $(HB_BIN_INSTALL) $(HB_LIB_INSTALL) $(HB_INC_INSTALL)
    -if exist $(HB_BIN_INSTALL)\nul if exist $(BIN_DIR)\*.exe   copy /B /Y $(BIN_DIR)\*.exe $(HB_BIN_INSTALL) >  inst_$(CC_DIRNAME).log
    -if exist $(HB_BIN_INSTALL)\nul if exist $(BIN_DIR)\*.dll   copy /B /Y $(BIN_DIR)\*.dll $(HB_BIN_INSTALL) >> inst_$(CC_DIRNAME).log
    -if exist $(HB_LIB_INSTALL)\nul if exist $(BIN_DIR)\*.lib   copy /B /Y $(BIN_DIR)\*.lib $(HB_LIB_INSTALL) >> inst_$(CC_DIRNAME).log
    -if exist $(HB_LIB_INSTALL)\nul if exist $(LIB_DIR)\*.lib   copy /B /Y $(LIB_DIR)\*.lib $(HB_LIB_INSTALL) >> inst_$(CC_DIRNAME).log
!if "$(HB_INSTALL_PREFIX)" != "."
    -if exist $(HB_INC_INSTALL)\nul   copy /A /Y include\*.api $(HB_INC_INSTALL) >> inst_$(CC_DIRNAME).log
    -if exist $(HB_INC_INSTALL)\nul   copy /A /Y include\*.ch  $(HB_INC_INSTALL) >> inst_$(CC_DIRNAME).log
    -if exist $(HB_INC_INSTALL)\nul   copy /A /Y include\*.h   $(HB_INC_INSTALL) >> inst_$(CC_DIRNAME).log
!endif

#**********************************************************

$(HB_DEST_DIRS) $(HB_BIN_INSTALL) $(HB_LIB_INSTALL) $(HB_INC_INSTALL):
    !if not exist $@\nul mkdir $@

#**********************************************************
#
# LIBRARY Targets BUILD rules
#
#**********************************************************
$(COMMON_LIB)   : $(COMMON_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(PP_LIB)       : $(PP_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(COMPILER_LIB) : $(COMPILER_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(VM_LIB)       : $(VM_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(RTL_LIB)      : $(RTL_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(MACRO_LIB)    : $(MACRO_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(DEBUG_LIB)    : $(DEBUG_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(LANG_LIB)     : $(LANG_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(CODEPAGE_LIB) : $(CODEPAGE_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(PCRE_LIB)     : $(PCRE_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(RDD_LIB)      : $(RDD_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(NULSYS_LIB)   : $(NULSYS_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(DBFNTX_LIB)   : $(DBFNTX_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(DBFCDX_LIB)   : $(DBFCDX_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(DBFFPT_LIB)   : $(DBFFPT_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(HBSIX_LIB)    : $(HBSIX_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(HSX_LIB)      : $(HSX_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(USRRDD_LIB)   : $(USRRDD_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(GTCGI_LIB)    : $(GTCGI_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(GTDOS_LIB)    : $(GTDOS_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(GTPCA_LIB)    : $(GTPCA_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(GTSTD_LIB)    : $(GTSTD_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(GTWIN_LIB)    : $(GTWIN_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(GTWVT_LIB)    : $(GTWVT_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
$(GTGUI_LIB)    : $(GTGUI_LIB_OBJS)
    $(MKLIB) /out:$@ $**
#**********************************************************
#
# EXECUTABLE Targets
#
#**********************************************************
#
# HARBOUR build rule
#
$(HARBOUR_EXE) : $(HARBOUR_EXE_OBJS)
    IF EXIST "$(HARBOUR_EXE)" $(DEL) "$(HARBOUR_EXE)" > nul
    $(LINKER) @<<
$(LDFLAGS)
/OUT:$(HARBOUR_EXE)
$(**: = ^
)
$(COMMON_LIB)
$(COMPILER_LIB)
$(PP_LIB)
<<$(KEEPSTATE)
#**********************************************************
#
# HBPPGEN build rule
#
$(HBPPGEN_EXE) : $(HBPPGEN_EXE_OBJS)
    IF EXIST "$(HBPPGEN_EXE)" $(DEL) "$(HBPPGEN_EXE)" > nul
    $(LINKER) @<<
$(LDFLAGS)
/OUT:$(HBPPGEN_EXE)
$(**: = ^
)
$(COMMON_LIB)
<<$(KEEPSTATE)
#**********************************************************
#
# HBPP build rule
#
$(HBPP_EXE) : $(HBPP_EXE_OBJS)
    IF EXIST "$(HBPP_EXE)" $(DEL) "$(HBPP_EXE)" > nul
    $(LINKER) @<<
$(LDFLAGS)
/OUT:$(HBPP_EXE)
$(**: = ^
)
$(COMMON_LIB)
<<$(KEEPSTATE)
#**********************************************************
#
# HBPPTEST build rule
#
$(HBPPTEST_EXE) : $(HBPPTEST_EXE_OBJS)
    IF EXIST "$(HBPPTEST_EXE)" $(DEL) "$(HBPPTEST_EXE)" > nul
    $(LINKER) @<<
$(LDFLAGS)
/OUT:$(HBPPTEST_EXE)
$(**: = ^
)
$(PP_LIB)
$(STANDARD_STATIC_HBLIBS)
user32.lib winspool.lib
<<$(KEEPSTATE)
#**********************************************************
#
# HBRUN build rule
#
$(HBRUN_EXE)  : $(HBRUN_EXE_OBJS)
    IF EXIST "$(HBRUN_EXE)" $(DEL) "$(HBRUN_EXE)" > nul
    $(LINKER) @<<
$(LDFLAGS)
/OUT:$(HBRUN_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
user32.lib winspool.lib wsock32.lib advapi32.lib
<<$(KEEPSTATE)
#**********************************************************
#
# HBTEST build rule
#
$(HBTEST_EXE) : $(HBTEST_EXE_OBJS)
    IF EXIST "$(HBTEST_EXE)" $(DEL) "$(HBTEST_EXE)" > nul
    $(LINKER) @<<
$(LDFLAGS)
/OUT:$(HBTEST_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
user32.lib winspool.lib
<<$(KEEPSTATE)
#**********************************************************
#
# HBDOC build rule
#
$(HBDOC_EXE)  : $(HBDOC_EXE_OBJS)
    IF EXIST "$(HBDOC_EXE)" $(DEL) "$(HBDOC_EXE)" > nul
    $(LINKER) @<<
$(LDFLAGS)
/OUT:$(HBDOC_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
user32.lib winspool.lib
<<$(KEEPSTATE)
#**********************************************************
#
# HBMAKE build rule
#
$(HBMAKE_EXE) : $(HBMAKE_EXE_OBJS)
    IF EXIST "$(HBMAKE_EXE)" $(DEL) "$(HBMAKE_EXE)" > nul
    $(LINKER) @<<
$(LDFLAGS)
/OUT:$(HBMAKE_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
user32.lib winspool.lib
<<$(KEEPSTATE)
#**********************************************************
#
# HBVER build rule
#
$(HBVER_EXE)  : $(HBVER_EXE_OBJS)
    IF EXIST "$(HBVER_EXE)" $(DEL) "$(HBVER_EXE)" > nul
    $(LINKER) @<<
$(LDFLAGS)
/OUT:$(HBVER_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
user32.lib winspool.lib
<<$(KEEPSTATE)
#**********************************************************
#
# DLL Targets
#
#**********************************************************
#$(HARBOUR_DLL) : $(HARBOUR_EXE) $(DLL_OBJS)
$(HARBOUR_DLL) : $(HB) $(DLL_OBJS)
    $(LINKER) @<<
$(LDFLAGSDLL) /OUT:$(@)
/IMPLIB:$(@:.dll=.lib)
$(DLL_OBJS: = ^
)
advapi32.lib gdi32.lib user32.lib winspool.lib wsock32.lib
<<$(KEEPSTATE)
#**********************************************************
#
# DLL EXECUTABLE Targets
#
#**********************************************************
HBTESTDLL_OBJS =  $(DLL_OBJ_DIR)\mainstd.obj $(HBTEST_EXE_OBJS:obj\vc=obj\dll\vc)
$(HBTESTDLL_EXE) : $(HARBOUR_DLL) $(HBTESTDLL_OBJS)
    $(LINKER) @<<
$(LDFLAGS)
/OUT:$(HBTESTDLL_EXE)
$(HBTESTDLL_OBJS: = ^
)
$(HARBOUR_DLL:.dll=.lib)
<<$(KEEPSTATE)
#----------------------------------------------------------
#$(DLL_OBJ_DIR)\hbtest.obj : $(HBTEST_DIR)\hbtest.prg
#    $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\  $**
#    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#----------------------------------------------------------
$(DLL_OBJ_DIR)\mainstd.obj : $(VM_DIR)\mainstd.c
    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $**
#**********************************************************
#**********************************************************
#**********************************************************
#
# EXTRA Object's DEPENDENCIES
#
#**********************************************************

# Generated by an intermediate utility ppgen.exe
# built at the initial phase of build process
$(OBJ_DIR)\pptable.obj : $(PP_DIR)\pptable.c
$(PP_DIR)\pptable.c    : include\hbstdgen.ch
    IF EXIST "$(PP_DIR)\pptable.c" $(DEL) "$(PP_DIR)\pptable.c" > nul
    $(PPGEN) include/hbstdgen.ch -o$(PP_DIR)/pptable.c -q

#**********************************************************

!if "$(HB_REBUILD_PARSER)" == "yes"

$(OBJ_DIR)\macroy.c : $(MACRO_DIR)\macro.y
    bison --no-line -d $** -o$@

$(OBJ_DIR)\harboury.c : $(HARBOUR_DIR)\harbour.y
    bison --no-line -d $** -o$@

!else

$(OBJ_DIR)\macroy.c : $(MACRO_DIR)\macro.yyc
    copy /A $** $@
    copy /A $(**:.yyc=.yyh) $(@:.c=.h)

$(OBJ_DIR)\harboury.c : $(HARBOUR_DIR)\harbour.yyc
    copy /A $** $@
    copy /A $(**:.yyc=.yyh) $(@:.c=.h)

!endif


$(OBJ_DIR)\macrol.c : $(MACRO_DIR)\macro.l
    flex -Phb_macro -i -8 -o$@ $**

$(OBJ_DIR)\macroy.obj : $(OBJ_DIR)\macroy.c
$(OBJ_DIR)\macrol.obj : $(OBJ_DIR)\macrol.c
    $(ECHO) > $(OBJ_DIR)\unistd.h
    $(CC) $(CLIBFLAGS) -I$(OBJ_DIR) -Fo$(OBJ_DIR)\ $**
    $(DEL) $(OBJ_DIR)\unistd.h


$(OBJ_DIR)\harbourl.c : $(HARBOUR_DIR)\harbour.l
    flex -Phb_comp -i -8 -o$@ $**

$(OBJ_DIR)\harboury.obj : $(OBJ_DIR)\harboury.c
$(OBJ_DIR)\harbourl.obj : $(OBJ_DIR)\harbourl.c
    $(ECHO)  > $(OBJ_DIR)\unistd.h
    $(CC) $(CLIBFLAGS) -I$(OBJ_DIR) -Fo$(OBJ_DIR)\ $**
    $(DEL) $(OBJ_DIR)\unistd.h

#**********************************************************

$(DLL_OBJ_DIR)\macroy.c : $(MACRO_DIR)\macro.y
    bison --no-line -d $** -o$@

$(DLL_OBJ_DIR)\macrol.c : $(MACRO_DIR)\macro.l
    flex -Phb_macro -i -8 -o$@ $**

$(DLL_OBJ_DIR)\macroy.obj : $(DLL_OBJ_DIR)\macroy.c
$(DLL_OBJ_DIR)\macrol.obj : $(DLL_OBJ_DIR)\macrol.c
    $(ECHO) > $(DLL_OBJ_DIR)\unistd.h
    $(CC) $(CLIBFLAGSDLL) -I$(DLL_OBJ_DIR) -Fo$(DLL_OBJ_DIR)\ $**
    $(DEL) $(DLL_OBJ_DIR)\unistd.h

#**********************************************************

$(DLL_OBJ_DIR)\harboury.c : $(HARBOUR_DIR)\harbour.y
    bison --no-line -d $** -o$@

$(DLL_OBJ_DIR)\harbourl.c : $(HARBOUR_DIR)\harbour.l
    flex -Phb_comp -i -8 -o$@ $**

$(DLL_OBJ_DIR)\harboury.obj : $(DLL_OBJ_DIR)\harboury.c
$(DLL_OBJ_DIR)\harbourl.obj : $(DLL_OBJ_DIR)\harbourl.c
    $(ECHO)  > $(DLL_OBJ_DIR)\unistd.h
    $(CC) $(CLIBFLAGSDLL) -I$(DLL_OBJ_DIR) -Fo$(DLL_OBJ_DIR)\ $**
    $(DEL) $(DLL_OBJ_DIR)\unistd.h
From mpaliwoda at interia.pl  Sun Jul 15 16:03:01 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Mon Jul 16 08:28:58 2007
Subject: [Harbour] A few current makefile system questions
In-Reply-To: <469911AA.7050309@interia.pl>
References: <46952899.9030507@interia.pl>	<20070714114129.GB1922@localhost.localdomain>
	<469911AA.7050309@interia.pl>
Message-ID: <469A7D75.7090501@interia.pl>

Marek Paliwoda wrote :

 >> Please look at make_xmingw.sh - it needs native platform builds of
 >> ppgen and harbour.
 >
 > Will look deeply into it.

Works perfectly with GNU makefiles :) . Thanks very much.

I tried to implement HB_BIN_COMPILE and HB_PPGEN_PATH
for other makefiles, but unfortunately they do not fit
very well into Bcc and Msvc make behavior. So I've done
cross-compiling for Bcc and Msvc in a little bit different
way. You have to define environment variables HB and PPGEN
to fully qualified paths to harbour.exe and ppgen.exe
respectivly. Something like :
     set HB=<path_to_harbour_compiler>\harbour.exe
     set PPGEN=<path_to_ppgen_executable>\ppgen.exe
I did not describe those above variables in makefile's
headers however, due to my lack of english knowledge :) .

I am attaching modified makefile.bc and makefile.vc to
this post, asking someone to commit it to a current CVS.
Unfortunately I do not have SVN client configured here,
nor I am very familiar with SVN at all. It even took me
quite a while to figure out that current harbour uses SVN
instead of CVS. I was quite suprised to see the last
ChangeLog entry dated 2007-06-16 23:42 after performing
full CVS checkout :) .
BUT, I like switching to SVN very much, even if I am not
familiar with it. The speed of getting full SVN sources
is uncomparable to CVS. Great move.

BTW, Please keep in mind that current harbour cross-compiling
features are not fully supported. On some platforms building
harbour.exe, hbpp.exe, ppgen.exe, etc. does not make much sense
at all (WinCE for example).

-- 

Marek



#
# $Id: makefile.bc 7456 2007-05-31 13:12:34Z druzus $
#

#
# Makefile for Harbour Project for Borland C/C++ 5.x compilers
#

# ---------------------------------------------------------------
# If you need to set additional compiler/linker options use the
# environment variables below, but please DON'T MODIFY THIS FILE
# for this purpose.
# ---------------------------------------------------------------

#
# NOTE: You can use these envvars to configure the make process:
#       (note that these are all optional)
#
#       CFLAGS            - Extra C compiler options for libraries and for
#                           executables
#       C_USR             - Extra C compiler options for libraries and for
#                           executables (GNU make compatible envvar)
#       CLIBFLAGS         - Extra C compiler options for the static libraries
#       CLIBFLAGSDLL      - Extra C compiler options for the shared libraries
#
#       LDFLAGS           - Extra linker options for the static libraries
#       LDFLAGSDLL        - Extra linker options for the shared libraries
#
#       HARBOURFLAGS      - Extra Harbour compiler options for static libs/exes
#       HARBOURFLAGSDLL   - Extra Harbour compiler options for shared libraries
#       PRG_USR           - Extra Harbour compiler options
#                           (GNU make compatible envvar)
#       HB_GT_LIB         - To override the default GT driver
#                           (search for HB_GT_LIBS for a list of values)
#       HB_BUILD_DLL      - If set to yes enables building harbour VM+RTL
#                           dll in addition to normal static build
#       HB_BUILD_DEBUG    - If set to yes causes to compile with debug info
#       HB_BUILD_VERBOSE  - enables echoing commands being executed
#       HB_REBUILD_PARSER - If set to yes force preprocessing new rules by
#                           bison (you must use bison 2.3 or later)
#       BCCDLL_WITH_DYNRT - If set to -tWR causes that harbour-bc.dll
#                           will use dynamic runtime library (recommended)
#       HB_INSTALL_PREFIX - Path to instalation directory into which
#                           Harbour will be installed when the command
#                           "make_bc.bat install" is lauched. Defaults
#                           to current directory
#
#       HB_DOC_PDF        - Turns on the .PDF file support in the HBDOC utility.
#                           Note that this will require the pdflib contrib.

# ---------------------------------------------------------------
# "echo." intentionally used instead of "echo", to avoid conflicts
# with external commands named echo.
# using macros for ECHO and DEL to allow overiding such as:
#
#    set ECHO=cmd /c echo
#    set DEL=cmd /c del
#
# The above might be needed on Windows 2000 and XP.
# The macros are referenced in makefile.bc
# ---------------------------------------------------------------

.AUTODEPEND

#**********************************************************

.SUFFIXES: .exe .lib .obj .prg .c .l .y

#**********************************************************

!ifndef ECHO
    ECHO = echo.
!endif
!ifndef DEL
    DEL = del
!endif

#**********************************************************

CC     = bcc32.exe
LINKER = ilink32.exe
MKLIB  = tlib.exe

# subdir name for objs,libs,exes
# depends on chosen compiler type
#      Bcc=b32, Msvc=vc
!ifndef CC_DIRNAME
     CC_DIRNAME = b32
!endif

#**********************************************************
#**********************************************************
#**********************************************************

# Include Common Object list files
# shared between Msvc and Borland

!include common.mak

#**********************************************************

# Some definitions cannot be kept in Common.mak
# due to serious limitations of Microsoft Nmake

DLL_OBJS = $(TMP_DLL_OBJS:$(OBJ_DIR)=$(DLL_OBJ_DIR))

#**********************************************************
#**********************************************************
#**********************************************************

# allows to do cross-compiling if neccesary.
!ifndef HB
     HB = $(HARBOUR_EXE)
!endif

# allows to do cross-compiling if neccesary.
!ifndef PPGEN
     PPGEN = $(HBPPGEN_EXE)
!endif

#**********************************************************
#**********************************************************
#**********************************************************

#
# C compiler definition and C flags. These should never have to change.
#

# Main "Include" directory
INCLUDE_DIR    = include

# C Compiler Flags
CFLAGS         = -I$(INCLUDE_DIR) $(C_USR) $(CFLAGS) -Iobj\$(CC_DIRNAME)
!ifndef BCC_NOOPTIM
    CFLAGS      = -O2 $(CFLAGS)
!endif
!if "$(HB_BUILD_DEBUG)" == "yes"
     CFLAGS     = -y -v $(CFLAGS)
!endif
!if "$(BCCDLL_WITH_DYNRT)" == "-tWR"
    RTLIBSUFFIX = i
!endif
CLIBFLAGS      = -c -q $(CFLAGS) $(CLIBFLAGS)
CLIBFLAGSDLL   = -D__EXPORT__ -tWM $(BCCDLL_WITH_DYNRT) $(CLIBFLAGS) $(CLIBFLAGSDLL)
CEXEFLAGSDLL   = -tWM $(BCCDLL_WITH_DYNRT) $(CLIBFLAGS) $(CEXEFLAGSDLL)

# Harbour Compiler Flags
HBFLAGSCMN     = -i$(INCLUDE_DIR) -q0 -w2 -es2 -gc0 $(PRG_USR)
!ifdef HB_DOC_PDF
    HBFLAGSCMN  = $(HBFLAGSCMN) -dPDF
!endif
HARBOURFLAGS   = -n $(HBFLAGSCMN) $(HARBOURFLAGS)
HARBOURFLAGSDLL= -D__EXPORT__ -n1 -l $(HBFLAGSCMN) $(HARBOURFLAGSDLL)

# Linker Flags
LDFLAGS        = -ap -Tpe -Gn -C -L$(LIB_DIR) -L$(BIN_DIR) $(LDFLAGS)
LDFLAGSDLL     = -aa -Gn -C -Tpd -Gi -L$(LIB_DIR) $(LDFLAGSDLL)
!if "$(HB_BUILD_DEBUG)" == "yes"
     LDFLAGS    = -v $(LDFLAGS)
     LDFLAGSDLL = -v $(LDFLAGSDLL)
!endif

#**********************************************************

# This is needed, otherwise the libs may overflow
# when debug info is requested with -v -y
ARFLAGS = /P32

#**********************************************************
# COMPILE Rules
#**********************************************************

# General *.c --> *.obj COMPILE rule for STATIC Libraries
{$(ALL_SRC_DIRS)}.c{$(OBJ_DIR)}.obj:
     $(CC) $(CLIBFLAGS) -o$@ $<

#**********************************************************

# General *.prg --> *.obj COMPILE rule for STATIC Libraries
{$(ALL_SRC_DIRS)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\  $**
     $(CC) $(CLIBFLAGS) -o$@ $(OBJ_DIR)\$&.c

#**********************************************************

# General *.c --> *.obj COMPILE rule for SHARED Libraries
{$(ALL_LIB_SRC_DIRS)}.c{$(DLL_OBJ_DIR)}.obj:
     $(CC) $(CLIBFLAGSDLL) -o$@ $<

#**********************************************************

# General *.prg --> *.obj COMPILE rule for SHARED Libraries
{$(ALL_LIB_SRC_DIRS)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\  $**
     $(CC) $(CLIBFLAGSDLL) -o$@ $(DLL_OBJ_DIR)\$&.c

#**********************************************************

# General *.c --> *.obj COMPILE rules for EXECUTABLES,
# which use Harbour SHARED Library compiled as DLL
{$(ALL_EXE_SRC_DIRS)}.c{$(DLL_OBJ_DIR)}.obj:
     $(CC) $(CEXEFLAGSDLL) -o$@ $<

#**********************************************************

# General *.prg --> *.obj COMPILE rules for EXECUTABLES,
# which use Harbour SHARED Library compiled as DLL
{$(ALL_EXE_SRC_DIRS)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\  $**
     $(CC) $(CEXEFLAGSDLL) -o$@ $(DLL_OBJ_DIR)\$&.c

#**********************************************************
#**********************************************************
#**********************************************************

# General BUILD rules (not used !)

#**********************************************************

# General Library BUILD rule
#{$(OBJ_DIR)}.obj{$(LIB_DIR)}.lib:
#    IF EXIST "$@" $(DEL) "$@" > NUL
#    $(MKLIB) "$@" $(ARFLAGS) @&&!
#+$(**: = &^
#+)
#!

#**********************************************************
#**********************************************************
#**********************************************************

# TARGET dependencies

#**********************************************************

all : $(HB_DEST_DIRS) $(HB_BUILD_TARGETS)

#
# Helper targets
#

BasicLibs : $(COMMON_LIB) $(COMPILER_LIB) $(PP_LIB)
BasicExes : $(HARBOUR_EXE)
StdLibs   : $(STANDARD_STATIC_HBLIBS)

#**********************************************************

clean: doClean
Clean: doClean
CLEAN: doClean

doClean:
     -if exist $(BIN_DIR)\*.exe $(DEL) $(BIN_DIR)\*.exe > nul
     -if exist $(BIN_DIR)\*.tds $(DEL) $(BIN_DIR)\*.tds > nul
     -if exist $(BIN_DIR)\*.tr? $(DEL) $(BIN_DIR)\*.tr? > nul
     -if exist $(BIN_DIR)\*.map $(DEL) $(BIN_DIR)\*.map > nul
     -if exist $(BIN_DIR)\*.dll $(DEL) $(BIN_DIR)\*.dll > nul
     -if exist $(BIN_DIR)\*.lib $(DEL) $(BIN_DIR)\*.lib > nul
     -if exist $(LIB_DIR)\*.lib $(DEL) $(LIB_DIR)\*.lib > nul
     -if exist $(LIB_DIR)\*.bak $(DEL) $(LIB_DIR)\*.bak > nul
     -if exist $(OBJ_DIR)\*.obj $(DEL) $(OBJ_DIR)\*.obj > nul
     -if exist $(OBJ_DIR)\*.c   $(DEL) $(OBJ_DIR)\*.c   > nul
     -if exist $(OBJ_DIR)\*.h   $(DEL) $(OBJ_DIR)\*.h   > nul
     -if exist $(PP_DIR)\pptable.c    $(DEL) $(PP_DIR)\pptable.c    > nul
     -if exist $(DLL_OBJ_DIR)\*.obj   $(DEL) $(DLL_OBJ_DIR)\*.obj   > nul
     -if exist $(DLL_OBJ_DIR)\*.c     $(DEL) $(DLL_OBJ_DIR)\*.c     > nul
     -if exist $(DLL_OBJ_DIR)\*.h     $(DEL) $(DLL_OBJ_DIR)\*.h     > nul
     -if exist inst_$(CC_DIRNAME).log $(DEL) inst_$(CC_DIRNAME).log > nul
     -if exist bin\*.exe        $(DEL) bin\*.exe > nul
     -if exist lib\*.lib        $(DEL) lib\*.lib > nul

#**********************************************************

install : doInstall
Install : doInstall
INSTALL : doInstall

doInstall: $(HB_BIN_INSTALL) $(HB_LIB_INSTALL) $(HB_INC_INSTALL)
     -if exist $(HB_BIN_INSTALL)\nul if exist $(BIN_DIR)\*.exe   copy /B $(BIN_DIR)\*.exe $(HB_BIN_INSTALL) >  inst_$(CC_DIRNAME).log
     -if exist $(HB_BIN_INSTALL)\nul if exist $(BIN_DIR)\*.dll   copy /B $(BIN_DIR)\*.dll $(HB_BIN_INSTALL) >> inst_$(CC_DIRNAME).log
     -if exist $(HB_LIB_INSTALL)\nul if exist $(BIN_DIR)\*.lib   copy /B $(BIN_DIR)\*.lib $(HB_LIB_INSTALL) >> inst_$(CC_DIRNAME).log
     -if exist $(HB_LIB_INSTALL)\nul if exist $(LIB_DIR)\*.lib   copy /B $(LIB_DIR)\*.lib $(HB_LIB_INSTALL) >> inst_$(CC_DIRNAME).log
!if "$(HB_INSTALL_PREFIX)" != "."
     -if exist $(HB_INC_INSTALL)\nul   copy /A include\*.api $(HB_INC_INSTALL) >> inst_$(CC_DIRNAME).log
     -if exist $(HB_INC_INSTALL)\nul   copy /A include\*.ch  $(HB_INC_INSTALL) >> inst_$(CC_DIRNAME).log
     -if exist $(HB_INC_INSTALL)\nul   copy /A include\*.h   $(HB_INC_INSTALL) >> inst_$(CC_DIRNAME).log
!endif

#**********************************************************

$(HB_DEST_DIRS) $(HB_BIN_INSTALL) $(HB_LIB_INSTALL) $(HB_INC_INSTALL):
     !if not exist $@\nul mkdir $@

#**********************************************************
#
# LIBRARY Targets BUILD rules
#
#**********************************************************
$(COMMON_LIB)   : $(COMMON_LIB_OBJS)
     IF EXIST "$(COMMON_LIB)" $(DEL) "$(COMMON_LIB)" > NUL
     $(MKLIB) "$(COMMON_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(PP_LIB)       : $(PP_LIB_OBJS)
     IF EXIST "$(PP_LIB)" $(DEL) "$(PP_LIB)" > NUL
     $(MKLIB) "$(PP_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(COMPILER_LIB) : $(COMPILER_LIB_OBJS)
     IF EXIST "$(COMPILER_LIB)" $(DEL) "$(COMPILER_LIB)" > NUL
     $(MKLIB) "$(COMPILER_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(VM_LIB)       :: BasicExes
$(VM_LIB)       :: $(VM_LIB_OBJS)
     IF EXIST "$(VM_LIB)" $(DEL) "$(VM_LIB)" > NUL
     $(MKLIB) "$(VM_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(RTL_LIB)      :: BasicExes
$(RTL_LIB)      :: $(RTL_LIB_OBJS)
     IF EXIST "$(RTL_LIB)" $(DEL) "$(RTL_LIB)" > NUL
     $(MKLIB) "$(RTL_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(MACRO_LIB)    : $(MACRO_LIB_OBJS)
     IF EXIST "$(MACRO_LIB)" $(DEL) "$(MACRO_LIB)" > NUL
     $(MKLIB) "$(MACRO_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(DEBUG_LIB)    :: BasicExes
$(DEBUG_LIB)    :: $(DEBUG_LIB_OBJS)
     IF EXIST "$(DEBUG_LIB)" $(DEL) "$(DEBUG_LIB)" > NUL
     $(MKLIB) "$(DEBUG_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(LANG_LIB)     : $(LANG_LIB_OBJS)
     IF EXIST "$(LANG_LIB)" $(DEL) "$(LANG_LIB)" > NUL
     $(MKLIB) "$(LANG_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(CODEPAGE_LIB) : $(CODEPAGE_LIB_OBJS)
     IF EXIST "$(CODEPAGE_LIB)" $(DEL) "$(CODEPAGE_LIB)" > NUL
     $(MKLIB) "$(CODEPAGE_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(PCRE_LIB)     : $(PCRE_LIB_OBJS)
     IF EXIST "$(PCRE_LIB)" $(DEL) "$(PCRE_LIB)" > NUL
     $(MKLIB) "$(PCRE_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(RDD_LIB)      :: BasicExes
$(RDD_LIB)      :: $(RDD_LIB_OBJS)
     IF EXIST "$(RDD_LIB)" $(DEL) "$(RDD_LIB)" > NUL
     $(MKLIB) "$(RDD_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(NULSYS_LIB)   : $(NULSYS_LIB_OBJS)
     IF EXIST "$(NULSYS_LIB)" $(DEL) "$(NULSYS_LIB)" > NUL
     $(MKLIB) "$(NULSYS_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(DBFNTX_LIB)   :: BasicExes
$(DBFNTX_LIB)   :: $(DBFNTX_LIB_OBJS)
     IF EXIST "$(DBFNTX_LIB)" $(DEL) "$(DBFNTX_LIB)" > NUL
     $(MKLIB) "$(DBFNTX_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(DBFCDX_LIB)   : $(DBFCDX_LIB_OBJS)
     IF EXIST "$(DBFCDX_LIB)" $(DEL) "$(DBFCDX_LIB)" > NUL
     $(MKLIB) "$(DBFCDX_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(DBFFPT_LIB)   : $(DBFFPT_LIB_OBJS)
     IF EXIST "$(DBFFPT_LIB)" $(DEL) "$(DBFFPT_LIB)" > NUL
     $(MKLIB) "$(DBFFPT_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(HBSIX_LIB)    : $(HBSIX_LIB_OBJS)
     IF EXIST "$(HBSIX_LIB)" $(DEL) "$(HBSIX_LIB)" > NUL
     $(MKLIB) "$(HBSIX_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(HSX_LIB)      : $(HSX_LIB_OBJS)
     IF EXIST "$(HSX_LIB)" $(DEL) "$(HSX_LIB)" > NUL
     $(MKLIB) "$(HSX_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(USRRDD_LIB)   : $(USRRDD_LIB_OBJS)
     IF EXIST "$(USRRDD_LIB)" $(DEL) "$(USRRDD_LIB)" > NUL
     $(MKLIB) "$(USRRDD_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(GTCGI_LIB)    : $(GTCGI_LIB_OBJS)
     IF EXIST "$(GTCGI_LIB)" $(DEL) "$(GTCGI_LIB)" > NUL
     $(MKLIB) "$(GTCGI_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(GTDOS_LIB)    : $(GTDOS_LIB_OBJS)
     IF EXIST "$(GTDOS_LIB)" $(DEL) "$(GTDOS_LIB)" > NUL
     $(MKLIB) "$(GTDOS_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(GTPCA_LIB)    : $(GTPCA_LIB_OBJS)
     IF EXIST "$(GTPCA_LIB)" $(DEL) "$(GTPCA_LIB)" > NUL
     $(MKLIB) "$(GTPCA_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(GTSTD_LIB)    : $(GTSTD_LIB_OBJS)
     IF EXIST "$(GTSTD_LIB)" $(DEL) "$(GTSTD_LIB)" > NUL
     $(MKLIB) "$(GTSTD_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(GTWIN_LIB)    : $(GTWIN_LIB_OBJS)
     IF EXIST "$(GTWIN_LIB)" $(DEL) "$(GTWIN_LIB)" > NUL
     $(MKLIB) "$(GTWIN_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(GTWVT_LIB)    : $(GTWVT_LIB_OBJS)
     IF EXIST "$(GTWVT_LIB)" $(DEL) "$(GTWVT_LIB)" > NUL
     $(MKLIB) "$(GTWVT_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
$(GTGUI_LIB)    : $(GTGUI_LIB_OBJS)
     IF EXIST "$(GTGUI_LIB)" $(DEL) "$(GTGUI_LIB)" > NUL
     $(MKLIB) "$(GTGUI_LIB)" $(ARFLAGS) @&&!
+$(**: = &^
+)
!
#**********************************************************
#
# EXECUTABLE Targets
#
#**********************************************************
#
# HARBOUR build rule
#
$(HARBOUR_EXE) :: BasicLibs
$(HARBOUR_EXE) :: $(HARBOUR_EXE_OBJS)
     IF EXIST "$(HARBOUR_EXE)" $(DEL) "$(HARBOUR_EXE)" > NUL
     $(CC) @&&!
$(CFLAGS)
-e$(HARBOUR_EXE)
$(**: = ^
)
$(COMPILER_LIB)
$(COMMON_LIB)
$(PP_LIB)
!
#**********************************************************
#
# HBPPGEN build rule
#
$(HBPPGEN_EXE) :: $(COMMON_LIB)
$(HBPPGEN_EXE) :: $(HBPPGEN_EXE_OBJS)
     IF EXIST "$(HBPPGEN_EXE)" $(DEL) "$(HBPPGEN_EXE)" > NUL
     $(CC) @&&!
$(CFLAGS)
-e$(HBPPGEN_EXE)
$(**: = ^
)
$(COMMON_LIB)
!
#**********************************************************
#
# HBPP build rule
#
$(HBPP_EXE) :: BasicLibs
$(HBPP_EXE) :: $(HBPP_EXE_OBJS)
     IF EXIST "$(HBPP_EXE)" $(DEL) "$(HBPP_EXE)" > NUL
     $(CC) @&&!
$(CFLAGS)
-e$(HBPP_EXE)
$(**: = ^
)
$(COMMON_LIB)
!
#**********************************************************
#
# HBPPTEST build rule
#
$(HBPPTEST_EXE) :: BasicLibs BasicExes StdLibs
$(HBPPTEST_EXE) :: $(HBPPTEST_EXE_OBJS)
     IF EXIST "$(HBPPTEST_EXE)" $(DEL) "$(HBPPTEST_EXE)" > NUL
     $(CC) @&&!
$(CFLAGS)
-e$(HBPPTEST_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
$(PP_LIB)
!
#**********************************************************
#
# HBRUN build rule
#
$(HBRUN_EXE)  :: BasicLibs BasicExes StdLibs
$(HBRUN_EXE)  :: $(HBRUN_EXE_OBJS)
     IF EXIST "$(HBRUN_EXE)" $(DEL) "$(HBRUN_EXE)" > NUL
     $(CC) @&&!
$(CFLAGS)
-e$(HBRUN_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
!
#**********************************************************
#
# HBTEST build rule
#
$(HBTEST_EXE) :: BasicLibs BasicExes StdLibs
$(HBTEST_EXE) :: $(HBTEST_EXE_OBJS)
     IF EXIST "$(HBTEST_EXE)" $(DEL) "$(HBTEST_EXE)" > NUL
     $(CC) @&&!
$(CFLAGS)
-e$(HBTEST_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
!
#**********************************************************
#
# HBDOC build rule
#

$(HBDOC_EXE)  :: BasicLibs BasicExes StdLibs
$(HBDOC_EXE)  :: $(HBDOC_EXE_OBJS)
     IF EXIST "$(HBDOC_EXE)" $(DEL) "$(HBDOC_EXE)" > NUL
     $(CC) @&&!
$(CFLAGS)
-e$(HBDOC_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
!
#**********************************************************
#
# HBMAKE build rule
#
$(HBMAKE_EXE) :: BasicLibs BasicExes StdLibs
$(HBMAKE_EXE) :: $(HBMAKE_EXE_OBJS)
     IF EXIST "$(HBMAKE_EXE)" $(DEL) "$(HBMAKE_EXE)" > NUL
     $(CC) @&&!
$(CFLAGS)
-e$(HBMAKE_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
!
#**********************************************************
#
# HBVER build rule
#
$(HBVER_EXE)  :: BasicLibs BasicExes StdLibs
$(HBVER_EXE)  :: $(HBVER_EXE_OBJS)
     IF EXIST "$(HBVER_EXE)" $(DEL) "$(HBVER_EXE)" > NUL
     $(CC) @&&!
$(CFLAGS)
-e$(HBVER_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
!
#**********************************************************
#
# DLL Targets
#
#**********************************************************
$(HARBOUR_DLL) :: BasicLibs BasicExes
$(HARBOUR_DLL) :: $(DLL_OBJS)
     $(LINKER) $(LDFLAGSDLL) @&&!
c0d32.obj $**, $@,, cw32mt$(RTLIBSUFFIX).lib import32.lib
!
#**********************************************************
#
# DLL EXECUTABLE Targets
#
#**********************************************************
$(HBTESTDLL_EXE) :: BasicLibs BasicExes
$(HBTESTDLL_EXE) :: $(DLL_OBJ_DIR)\mainstd.obj $(HBTEST_EXE_OBJS:$(OBJ_DIR)=$(DLL_OBJ_DIR))
     $(LINKER) $(LDFLAGS) @&&!
c0x32.obj $**, $@,,$(HARBOUR_DLL:.dll=.lib) cw32mt$(RTLIBSUFFIX).lib import32.lib
!
#----------------------------------------------------------
#$(DLL_OBJ_DIR)\hbtest.obj : $(HBTEST_DIR)\hbtest.prg
#    $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\  $**
#    $(CC) $(CLIBFLAGSDLL) -o$@ $(DLL_OBJ_DIR)\$&.c
#----------------------------------------------------------
$(DLL_OBJ_DIR)\mainstd.obj : $(VM_DIR)\mainstd.c
     $(CC) $(CEXEFLAGSDLL) -o$@ $**
#**********************************************************
#**********************************************************
#**********************************************************

# EXTRA Object's DEPENDENCIES

#**********************************************************

# Generated by an intermediate utility ppgen.exe
# built at the initial phase of build process
$(OBJ_DIR)\pptable.obj : $(PP_DIR)\pptable.c
$(PP_DIR)\pptable.c    : include\hbstdgen.ch
     echo $(PPGEN)
     IF EXIST "$(PP_DIR)\pptable.c" $(DEL) "$(PP_DIR)\pptable.c" > nul
     $(PPGEN) include/hbstdgen.ch -o$(PP_DIR)/pptable.c -q

#**********************************************************

!if "$(HB_REBUILD_PARSER)" == "yes"

$(OBJ_DIR)\macroy.c : $(MACRO_DIR)\macro.y
     bison --no-line -d $** -o$@

$(OBJ_DIR)\harboury.c : $(HARBOUR_DIR)\harbour.y
     bison --no-line -d $** -o$@

!else

$(OBJ_DIR)\macroy.c : $(MACRO_DIR)\macro.yyc
     copy /A $** $@
     copy /A $(**:.yyc=.yyh) $(@:.c=.h)

$(OBJ_DIR)\harboury.c : $(HARBOUR_DIR)\harbour.yyc
     copy /A $** $@
     copy /A $(**:.yyc=.yyh) $(@:.c=.h)

!endif

#**********************************************************

$(OBJ_DIR)\macrol.c : $(MACRO_DIR)\macro.l
     flex -Phb_macro -i -8 -o$@ $**

$(OBJ_DIR)\harbourl.c : $(HARBOUR_DIR)\harbour.l
     flex -Phb_comp -i -8 -o$@ $**

#**********************************************************

$(OBJ_DIR)\macroy.obj : $(OBJ_DIR)\macroy.c
$(OBJ_DIR)\macrol.obj : $(OBJ_DIR)\macrol.c
     $(ECHO) > $(OBJ_DIR)\unistd.h
     $(CC) $(CLIBFLAGS) -I$(OBJ_DIR) -o$@ $**
     $(DEL) $(OBJ_DIR)\unistd.h

$(OBJ_DIR)\harboury.obj : $(OBJ_DIR)\harboury.c
$(OBJ_DIR)\harbourl.obj : $(OBJ_DIR)\harbourl.c
     $(ECHO)  > $(OBJ_DIR)\unistd.h
     $(CC) $(CLIBFLAGS) -I$(OBJ_DIR) -o$@ $**
     $(DEL) $(OBJ_DIR)\unistd.h

#**********************************************************

!if "$(HB_REBUILD_PARSER)" == "yes"

$(DLL_OBJ_DIR)\macroy.c : $(MACRO_DIR)\macro.y
     bison --no-line -d $** -o$@

$(DLL_OBJ_DIR)\harboury.c : $(HARBOUR_DIR)\harbour.y
     bison --no-line -d $** -o$@

!else

$(DLL_OBJ_DIR)\macroy.c : $(MACRO_DIR)\macro.yyc
     copy /A $** $@
     copy /A $(**:.yyc=.yyh) $(@:.c=.h)

$(DLL_OBJ_DIR)\harboury.c : $(HARBOUR_DIR)\harbour.yyc
     copy /A $** $@
     copy /A $(**:.yyc=.yyh) $(@:.c=.h)

!endif

#**********************************************************

$(DLL_OBJ_DIR)\macrol.c : $(MACRO_DIR)\macro.l
     flex -Phb_macro -i -8 -o$@ $**

$(DLL_OBJ_DIR)\harbourl.c : $(HARBOUR_DIR)\harbour.l
     flex -Phb_comp -i -8 -o$@ $**

#**********************************************************

$(DLL_OBJ_DIR)\macroy.obj : $(DLL_OBJ_DIR)\macroy.c
$(DLL_OBJ_DIR)\macrol.obj : $(DLL_OBJ_DIR)\macrol.c
     $(ECHO) > $(DLL_OBJ_DIR)\unistd.h
     $(CC) $(CLIBFLAGS) -I$(DLL_OBJ_DIR) -o$@ $**
     $(DEL) $(DLL_OBJ_DIR)\unistd.h

$(DLL_OBJ_DIR)\harboury.obj : $(DLL_OBJ_DIR)\harboury.c
$(DLL_OBJ_DIR)\harbourl.obj : $(DLL_OBJ_DIR)\harbourl.c
     $(ECHO)  > $(DLL_OBJ_DIR)\unistd.h
     $(CC) $(CLIBFLAGS) -I$(DLL_OBJ_DIR) -o$@ $**
     $(DEL) $(DLL_OBJ_DIR)\unistd.h

#**********************************************************



#
# $Id: makefile.vc 7563 2007-06-27 17:00:34Z druzus $
#

#
# Makefile for Harbour Project for Msvc 6.0/7.1 compilers
#

# ---------------------------------------------------------------
# If you need to set additional compiler/linker options use the
# environment variables below, but please DON'T MODIFY THIS FILE
# for this purpose.
# ---------------------------------------------------------------

#
# NOTE: You can use these envvars to configure the make process:
#       (note that these are all optional)
#
#       CFLAGS            - Extra C compiler options for libraries and for
#                           executables
#       C_USR             - Extra C compiler options for libraries and for
#                           executables (GNU make compatible envvar)
#       CLIBFLAGS         - Extra C compiler options for the static libraries
#       CLIBFLAGSDLL      - Extra C compiler options for the shared libraries
#
#       LDFLAGS           - Extra linker options for the static libraries
#       LDFLAGSDLL        - Extra linker options for the shared libraries
#
#       HARBOURFLAGS      - Extra Harbour compiler options for static libs/exes
#       HARBOURFLAGSDLL   - Extra Harbour compiler options for shared libraries
#       PRG_USR           - Extra Harbour compiler options
#                           (GNU make compatible envvar)
#       HB_GT_LIB         - To override the default GT driver
#                           (search for HB_GT_LIBS for a list of values)
#       HB_BUILD_DLL      - If set to yes enables building harbour VM+RTL
#                           dll in addition to normal static build
#       HB_BUILD_MODE     - If set to cpp causes to compile in C++ mode
#       HB_BUILD_DEBUG    - If set to yes causes to compile with debug info
#       HB_BUILD_VERBOSE  - enables echoing commands being executed
#       HB_INSTALL_PREFIX - Path to instalation directory into which
#                           Harbour will be installed when the command
#                           "make_vc.bat install" is lauched. Defaults
#                           to current directory
#       HB_VISUALC_VER    - Version of Visual C++ compiler (defaults to 60).
#                           Possible values are : 60, 70, 71, 80
#
#       HB_DOC_PDF        - Turns on the .PDF file support in the HBDOC utility.
#                           Note that this will require the pdflib contrib.

# ---------------------------------------------------------------
# "echo." intentionally used instead of "echo", to avoid conflicts
# with external commands named echo.
# using macros for ECHO and DEL to allow overiding such as:
#
#    set ECHO=cmd /c echo
#    set DEL=cmd /c del
#
# The above might be needed on Windows 2000 and XP.
# The macros are referenced in makefile.bc
# ---------------------------------------------------------------

.SUFFIXES: .exe .lib .obj .prg .c .l .y .ch

#**********************************************************

# Visual C++ version
!ifndef HB_VISUALC_VER
HB_VISUALC_VER = 60
!endif

#**********************************************************

!ifndef ECHO
ECHO = echo.
!endif
!ifndef DEL
DEL = del
!endif

#**********************************************************

CC     = cl.exe
LINKER = link.exe
MKLIB  = lib.exe

# Subdir name for objs,libs,exes.
# Based on chosen compiler type
#      Bcc=b32, Msvc=vc
!ifndef CC_DIRNAME
CC_DIRNAME = vc
!endif

#**********************************************************
#**********************************************************
#**********************************************************

# Include Common Object list files
# shared between Msvc and Borland

!include common.mak

#**********************************************************

# Some definitions cannot be kept in Common.mak
# due to serious limitations of Microsoft Nmake

# Nmake does not support macros in string
# substitution, so we have to hardcode it
DLL_OBJS = $(TMP_DLL_OBJS:obj\vc=obj\dll\vc)

#**********************************************************
#**********************************************************
#**********************************************************

# allows to do cross-compiling if neccesary.
!ifndef HB
HB = $(HARBOUR_EXE)
!endif

# allows to do cross-compiling if neccesary.
!ifndef PPGEN
PPGEN = $(HBPPGEN_EXE)
!endif

#**********************************************************
#**********************************************************
#**********************************************************

#
# C compiler definition and C flags. These should never have to change.
#

# Main "Include" directory
INCLUDE_DIR    = include

# In which mode compile Harbour C or CPP
!if "$(HB_BUILD_MODE)" == "cpp"
HB_BUILD_MODE  = P
!else
HB_BUILD_MODE  = C
!endif

# C Compiler Flags
!if $(HB_VISUALC_VER) >= 80
CFLAGS_VER     = -Ot2b1 -EHs-c- -FD -Gs -D_CRT_SECURE_NO_DEPRECATE
!else
CFLAGS_VER     = -Ogt2yb1p -GX- -G6 -YX -FD -Gs
!endif

CFLAGS         = -I$(INCLUDE_DIR) $(CFLAGS_VER) -T$(HB_BUILD_MODE) -W3 -nologo -D__WINDOWS__ -DWIN32 -D__WIN32__ $(C_USR) $(CFLAGS) -Iobj\$(CC_DIRNAME)

!if "$(HB_BUILD_DEBUG)" == "yes"
CFLAGS         = -Zi $(CFLAGS)
DBGMARKER      = d
!endif

CFLAGS         = -MT$(DBGMARKER) $(CFLAGS)

CLIBFLAGS      = -c $(CFLAGS) $(CLIBFLAGS)
CLIBFLAGSDLL   = -D__EXPORT__ $(CLIBFLAGS) $(CLIBFLAGSDLL)
CEXEFLAGSDLL   = $(CLIBFLAGS) $(CEXEFLAGSDLL)

# Harbour Compiler Flags
HBFLAGSCMN     = -i$(INCLUDE_DIR) -q0 -w2 -es2 -gc1 $(PRG_USR)
!ifdef HB_DOC_PDF
HBFLAGSCMN  = $(HBFLAGSCMN) -dPDF
!endif
HARBOURFLAGS   = -n $(HBFLAGSCMN) $(HARBOURFLAGS)
HARBOURFLAGSDLL= -D__EXPORT__ -n1 $(HBFLAGSCMN) $(HARBOURFLAGSDLL)

# Linker Flags
LDFLAGS        = /NOLOGO /SUBSYSTEM:console /OPT:WIN98 /LIBPATH:$(LIB_DIR) $(LDFLAGS)
LDFLAGSDLL     = /NOLOGO /DLL /OPT:WIN98 /LIBPATH:$(LIB_DIR) $(LDFLAGSDLL)
!if "$(HB_BUILD_DEBUG)" == "yes"
LDFLAGS        = /DEBUG $(LDFLAGS)
LDFLAGSDLL     = /DEBUG $(LDFLAGSDLL)
!endif

#**********************************************************
# COMPILE Rules
#**********************************************************

#*******************************************************
# General *.c --> *.obj COMPILE rules for STATIC Libraries
#*******************************************************
{$(OBJ_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(MAIN_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(COMMON_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(COMPILER_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(PP_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(VM_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(RTL_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(MACRO_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(DEBUG_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(LANG_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(CODEPAGE_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(PCRE_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(RDD_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(NULSYS_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(DBFNTX_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(DBFCDX_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(DBFFPT_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(HBSIX_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(HSX_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(USRRDD_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(GTCGI_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(GTPCA_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(GTSTD_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(GTWIN_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(GTWVT_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(GTGUI_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(HARBOUR_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(HBPP_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(HBPPTEST_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(HBRUN_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(HBTEST_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(HBDOC_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(HBMAKE_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************
{$(HBVER_DIR)}.c{$(OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
#*******************************************************

#*******************************************************
# General *.prg --> *.obj COMPILE rules for STATIC Libraries
#*******************************************************
{$(OBJ_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(COMMON_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(PP_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(VM_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(RTL_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(MACRO_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(DEBUG_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(LANG_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(CODEPAGE_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(PCRE_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(RDD_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(NULSYS_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(DBFNTX_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(DBFCDX_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(DBFFPT_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBSIX_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(HSX_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(USRRDD_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTCGI_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTPCA_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTSTD_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTWIN_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTWVT_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTGUI_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(HARBOUR_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBPP_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBPPTEST_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) $< -o$(OBJ_DIR)\\
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBRUN_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBTEST_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBDOC_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBMAKE_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBVER_DIR)}.prg{$(OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
#*******************************************************

#*******************************************************
# General *.c --> *.obj COMPILE rules for SHARED Libraries
#*******************************************************
{$(DLL_OBJ_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(MAIN_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(COMMON_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(COMPILER_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(PP_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(VM_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(RTL_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(MACRO_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(DEBUG_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(LANG_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(CODEPAGE_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(PCRE_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(RDD_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(NULSYS_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(DBFNTX_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(DBFCDX_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(DBFFPT_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(HBSIX_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(HSX_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(USRRDD_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(GTCGI_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(GTPCA_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(GTSTD_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(GTWIN_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(GTWVT_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(GTGUI_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************

#*******************************************************
# General *.c --> *.obj COMPILE rules for EXECUTABLES,
# which use Harbour SHARED Library compiled as DLL
#*******************************************************
#{$(HARBOUR_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
#    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
#{$(HBPP_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
#    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(HBPPTEST_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(HBRUN_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(HBTEST_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(HBDOC_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(HBMAKE_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************
{$(HBVER_DIR)}.c{$(DLL_OBJ_DIR)}.obj::
     $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $<
#*******************************************************

#*******************************************************
# General *.prg --> *.obj COMPILE rules for SHARED Libraries
#*******************************************************
{$(DLL_OBJ_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(COMMON_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(PP_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(VM_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(RTL_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(MACRO_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(DEBUG_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(LANG_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(PCRE_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(CODEPAGE_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(RDD_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(NULSYS_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(DBFNTX_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(DBFCDX_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(DBFFPT_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBSIX_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(HSX_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(USRRDD_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTCGI_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTPCA_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTSTD_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTWIN_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTWVT_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(GTGUI_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGSDLL) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CLIBFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************

#*******************************************************
# General *.prg --> *.obj COMPILE rules for EXECUTABLES,
# which use Harbour SHARED Library compiled as DLL
#*******************************************************
#{$(HARBOUR_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
#    $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\ $<
#    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
#{$(HBPP_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
#    $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\ $<
#    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBPPTEST_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBRUN_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBTEST_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBDOC_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBMAKE_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#*******************************************************
{$(HBVER_DIR)}.prg{$(DLL_OBJ_DIR)}.obj:
     $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\ $<
     $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c

#**********************************************************
#**********************************************************
#**********************************************************
#
# General BUILD rules (not used !)
#
#**********************************************************
# General Library BUILD rule
#{$(OBJ_DIR)}.obj{$(COMMON_DIR)}.lib:
#    IF EXIST "$@" $(DEL) "$@" > nul
#    $(MKLIB) /out:$@ <<
#$**
#<<
#**********************************************************
#**********************************************************
#**********************************************************

# TARGET dependencies

#**********************************************************

all : $(HB_DEST_DIRS) $(HB_BUILD_TARGETS)

#
# Helper targets - disabled for Msvc
#

#BasicLibs : $(COMMON_LIB) $(COMPILER_LIB) $(PP_LIB)
#BasicExes : $(HARBOUR_EXE)
#StdLibs   : $(STANDARD_STATIC_HBLIBS)

#**********************************************************

clean: doClean
Clean: doClean
CLEAN: doClean

doClean:
     -if exist *.idb            $(DEL) *.idb > nul
     -if exist *.pch            $(DEL) *.pch > nul
     -if exist *.pdb            $(DEL) *.pdb > nul
     -if exist $(OBJ_DIR)\*.obj $(DEL) $(OBJ_DIR)\*.obj > nul
     -if exist $(OBJ_DIR)\*.c   $(DEL) $(OBJ_DIR)\*.c   > nul
     -if exist $(OBJ_DIR)\*.h   $(DEL) $(OBJ_DIR)\*.h   > nul
     -if exist $(OBJ_DIR)\*.pch $(DEL) $(OBJ_DIR)\*.pch > nul
     -if exist $(LIB_DIR)\*.lib $(DEL) $(LIB_DIR)\*.lib > nul
     -if exist $(BIN_DIR)\*.exe $(DEL) $(BIN_DIR)\*.exe > nul
     -if exist $(BIN_DIR)\*.pdb $(DEL) $(BIN_DIR)\*.pdb > nul
     -if exist $(BIN_DIR)\*.ilk $(DEL) $(BIN_DIR)\*.ilk > nul
     -if exist $(BIN_DIR)\*.map $(DEL) $(BIN_DIR)\*.map > nul
     -if exist $(BIN_DIR)\*.dll $(DEL) $(BIN_DIR)\*.dll > nul
     -if exist $(BIN_DIR)\*.lib $(DEL) $(BIN_DIR)\*.lib > nul
     -if exist $(BIN_DIR)\*.exp $(DEL) $(BIN_DIR)\*.exp > nul
     -if exist $(PP_DIR)\pptable.c    $(DEL) $(PP_DIR)\pptable.c    > nul
     -if exist $(DLL_OBJ_DIR)\*.obj   $(DEL) $(DLL_OBJ_DIR)\*.obj   > nul
     -if exist $(DLL_OBJ_DIR)\*.c     $(DEL) $(DLL_OBJ_DIR)\*.c     > nul
     -if exist $(DLL_OBJ_DIR)\*.h     $(DEL) $(DLL_OBJ_DIR)\*.h     > nul
     -if exist inst_$(CC_DIRNAME).log $(DEL) inst_$(CC_DIRNAME).log > nul
     -if exist bin\*.exe        $(DEL) bin\*.exe > nul
     -if exist lib\*.lib        $(DEL) lib\*.lib > nul

#**********************************************************

install : doInstall
Install : doInstall
INSTALL : doInstall

doInstall: $(HB_BIN_INSTALL) $(HB_LIB_INSTALL) $(HB_INC_INSTALL)
     -if exist $(HB_BIN_INSTALL)\nul if exist $(BIN_DIR)\*.exe   copy /B /Y $(BIN_DIR)\*.exe $(HB_BIN_INSTALL) >  inst_$(CC_DIRNAME).log
     -if exist $(HB_BIN_INSTALL)\nul if exist $(BIN_DIR)\*.dll   copy /B /Y $(BIN_DIR)\*.dll $(HB_BIN_INSTALL) >> inst_$(CC_DIRNAME).log
     -if exist $(HB_LIB_INSTALL)\nul if exist $(BIN_DIR)\*.lib   copy /B /Y $(BIN_DIR)\*.lib $(HB_LIB_INSTALL) >> inst_$(CC_DIRNAME).log
     -if exist $(HB_LIB_INSTALL)\nul if exist $(LIB_DIR)\*.lib   copy /B /Y $(LIB_DIR)\*.lib $(HB_LIB_INSTALL) >> inst_$(CC_DIRNAME).log
!if "$(HB_INSTALL_PREFIX)" != "."
     -if exist $(HB_INC_INSTALL)\nul   copy /A /Y include\*.api $(HB_INC_INSTALL) >> inst_$(CC_DIRNAME).log
     -if exist $(HB_INC_INSTALL)\nul   copy /A /Y include\*.ch  $(HB_INC_INSTALL) >> inst_$(CC_DIRNAME).log
     -if exist $(HB_INC_INSTALL)\nul   copy /A /Y include\*.h   $(HB_INC_INSTALL) >> inst_$(CC_DIRNAME).log
!endif

#**********************************************************

$(HB_DEST_DIRS) $(HB_BIN_INSTALL) $(HB_LIB_INSTALL) $(HB_INC_INSTALL):
     !if not exist $@\nul mkdir $@

#**********************************************************
#
# LIBRARY Targets BUILD rules
#
#**********************************************************
$(COMMON_LIB)   : $(COMMON_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(PP_LIB)       : $(PP_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(COMPILER_LIB) : $(COMPILER_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(VM_LIB)       : $(VM_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(RTL_LIB)      : $(RTL_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(MACRO_LIB)    : $(MACRO_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(DEBUG_LIB)    : $(DEBUG_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(LANG_LIB)     : $(LANG_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(CODEPAGE_LIB) : $(CODEPAGE_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(PCRE_LIB)     : $(PCRE_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(RDD_LIB)      : $(RDD_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(NULSYS_LIB)   : $(NULSYS_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(DBFNTX_LIB)   : $(DBFNTX_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(DBFCDX_LIB)   : $(DBFCDX_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(DBFFPT_LIB)   : $(DBFFPT_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(HBSIX_LIB)    : $(HBSIX_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(HSX_LIB)      : $(HSX_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(USRRDD_LIB)   : $(USRRDD_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(GTCGI_LIB)    : $(GTCGI_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(GTDOS_LIB)    : $(GTDOS_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(GTPCA_LIB)    : $(GTPCA_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(GTSTD_LIB)    : $(GTSTD_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(GTWIN_LIB)    : $(GTWIN_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(GTWVT_LIB)    : $(GTWVT_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
$(GTGUI_LIB)    : $(GTGUI_LIB_OBJS)
     $(MKLIB) /out:$@ $**
#**********************************************************
#
# EXECUTABLE Targets
#
#**********************************************************
#
# HARBOUR build rule
#
$(HARBOUR_EXE) : $(HARBOUR_EXE_OBJS)
     IF EXIST "$(HARBOUR_EXE)" $(DEL) "$(HARBOUR_EXE)" > nul
     $(LINKER) @<<
$(LDFLAGS)
/OUT:$(HARBOUR_EXE)
$(**: = ^
)
$(COMMON_LIB)
$(COMPILER_LIB)
$(PP_LIB)
<<$(KEEPSTATE)
#**********************************************************
#
# HBPPGEN build rule
#
$(HBPPGEN_EXE) : $(HBPPGEN_EXE_OBJS)
     IF EXIST "$(HBPPGEN_EXE)" $(DEL) "$(HBPPGEN_EXE)" > nul
     $(LINKER) @<<
$(LDFLAGS)
/OUT:$(HBPPGEN_EXE)
$(**: = ^
)
$(COMMON_LIB)
<<$(KEEPSTATE)
#**********************************************************
#
# HBPP build rule
#
$(HBPP_EXE) : $(HBPP_EXE_OBJS)
     IF EXIST "$(HBPP_EXE)" $(DEL) "$(HBPP_EXE)" > nul
     $(LINKER) @<<
$(LDFLAGS)
/OUT:$(HBPP_EXE)
$(**: = ^
)
$(COMMON_LIB)
<<$(KEEPSTATE)
#**********************************************************
#
# HBPPTEST build rule
#
$(HBPPTEST_EXE) : $(HBPPTEST_EXE_OBJS)
     IF EXIST "$(HBPPTEST_EXE)" $(DEL) "$(HBPPTEST_EXE)" > nul
     $(LINKER) @<<
$(LDFLAGS)
/OUT:$(HBPPTEST_EXE)
$(**: = ^
)
$(PP_LIB)
$(STANDARD_STATIC_HBLIBS)
user32.lib winspool.lib
<<$(KEEPSTATE)
#**********************************************************
#
# HBRUN build rule
#
$(HBRUN_EXE)  : $(HBRUN_EXE_OBJS)
     IF EXIST "$(HBRUN_EXE)" $(DEL) "$(HBRUN_EXE)" > nul
     $(LINKER) @<<
$(LDFLAGS)
/OUT:$(HBRUN_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
user32.lib winspool.lib wsock32.lib advapi32.lib
<<$(KEEPSTATE)
#**********************************************************
#
# HBTEST build rule
#
$(HBTEST_EXE) : $(HBTEST_EXE_OBJS)
     IF EXIST "$(HBTEST_EXE)" $(DEL) "$(HBTEST_EXE)" > nul
     $(LINKER) @<<
$(LDFLAGS)
/OUT:$(HBTEST_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
user32.lib winspool.lib
<<$(KEEPSTATE)
#**********************************************************
#
# HBDOC build rule
#
$(HBDOC_EXE)  : $(HBDOC_EXE_OBJS)
     IF EXIST "$(HBDOC_EXE)" $(DEL) "$(HBDOC_EXE)" > nul
     $(LINKER) @<<
$(LDFLAGS)
/OUT:$(HBDOC_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
user32.lib winspool.lib
<<$(KEEPSTATE)
#**********************************************************
#
# HBMAKE build rule
#
$(HBMAKE_EXE) : $(HBMAKE_EXE_OBJS)
     IF EXIST "$(HBMAKE_EXE)" $(DEL) "$(HBMAKE_EXE)" > nul
     $(LINKER) @<<
$(LDFLAGS)
/OUT:$(HBMAKE_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
user32.lib winspool.lib
<<$(KEEPSTATE)
#**********************************************************
#
# HBVER build rule
#
$(HBVER_EXE)  : $(HBVER_EXE_OBJS)
     IF EXIST "$(HBVER_EXE)" $(DEL) "$(HBVER_EXE)" > nul
     $(LINKER) @<<
$(LDFLAGS)
/OUT:$(HBVER_EXE)
$(**: = ^
)
$(STANDARD_STATIC_HBLIBS)
user32.lib winspool.lib
<<$(KEEPSTATE)
#**********************************************************
#
# DLL Targets
#
#**********************************************************
#$(HARBOUR_DLL) : $(HARBOUR_EXE) $(DLL_OBJS)
$(HARBOUR_DLL) : $(HB) $(DLL_OBJS)
     $(LINKER) @<<
$(LDFLAGSDLL) /OUT:$(@)
/IMPLIB:$(@:.dll=.lib)
$(DLL_OBJS: = ^
)
advapi32.lib gdi32.lib user32.lib winspool.lib wsock32.lib
<<$(KEEPSTATE)
#**********************************************************
#
# DLL EXECUTABLE Targets
#
#**********************************************************
HBTESTDLL_OBJS =  $(DLL_OBJ_DIR)\mainstd.obj $(HBTEST_EXE_OBJS:obj\vc=obj\dll\vc)
$(HBTESTDLL_EXE) : $(HARBOUR_DLL) $(HBTESTDLL_OBJS)
     $(LINKER) @<<
$(LDFLAGS)
/OUT:$(HBTESTDLL_EXE)
$(HBTESTDLL_OBJS: = ^
)
$(HARBOUR_DLL:.dll=.lib)
<<$(KEEPSTATE)
#----------------------------------------------------------
#$(DLL_OBJ_DIR)\hbtest.obj : $(HBTEST_DIR)\hbtest.prg
#    $(HB) $(HARBOURFLAGS) -o$(DLL_OBJ_DIR)\  $**
#    $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $(DLL_OBJ_DIR)\$(*B).c
#----------------------------------------------------------
$(DLL_OBJ_DIR)\mainstd.obj : $(VM_DIR)\mainstd.c
     $(CC) $(CEXEFLAGSDLL) -Fo$(DLL_OBJ_DIR)\ $**
#**********************************************************
#**********************************************************
#**********************************************************
#
# EXTRA Object's DEPENDENCIES
#
#**********************************************************

# Generated by an intermediate utility ppgen.exe
# built at the initial phase of build process
$(OBJ_DIR)\pptable.obj : $(PP_DIR)\pptable.c
$(PP_DIR)\pptable.c    : include\hbstdgen.ch
     IF EXIST "$(PP_DIR)\pptable.c" $(DEL) "$(PP_DIR)\pptable.c" > nul
     $(PPGEN) include/hbstdgen.ch -o$(PP_DIR)/pptable.c -q

#**********************************************************

!if "$(HB_REBUILD_PARSER)" == "yes"

$(OBJ_DIR)\macroy.c : $(MACRO_DIR)\macro.y
     bison --no-line -d $** -o$@

$(OBJ_DIR)\harboury.c : $(HARBOUR_DIR)\harbour.y
     bison --no-line -d $** -o$@

!else

$(OBJ_DIR)\macroy.c : $(MACRO_DIR)\macro.yyc
     copy /A $** $@
     copy /A $(**:.yyc=.yyh) $(@:.c=.h)

$(OBJ_DIR)\harboury.c : $(HARBOUR_DIR)\harbour.yyc
     copy /A $** $@
     copy /A $(**:.yyc=.yyh) $(@:.c=.h)

!endif


$(OBJ_DIR)\macrol.c : $(MACRO_DIR)\macro.l
     flex -Phb_macro -i -8 -o$@ $**

$(OBJ_DIR)\macroy.obj : $(OBJ_DIR)\macroy.c
$(OBJ_DIR)\macrol.obj : $(OBJ_DIR)\macrol.c
     $(ECHO) > $(OBJ_DIR)\unistd.h
     $(CC) $(CLIBFLAGS) -I$(OBJ_DIR) -Fo$(OBJ_DIR)\ $**
     $(DEL) $(OBJ_DIR)\unistd.h


$(OBJ_DIR)\harbourl.c : $(HARBOUR_DIR)\harbour.l
     flex -Phb_comp -i -8 -o$@ $**

$(OBJ_DIR)\harboury.obj : $(OBJ_DIR)\harboury.c
$(OBJ_DIR)\harbourl.obj : $(OBJ_DIR)\harbourl.c
     $(ECHO)  > $(OBJ_DIR)\unistd.h
     $(CC) $(CLIBFLAGS) -I$(OBJ_DIR) -Fo$(OBJ_DIR)\ $**
     $(DEL) $(OBJ_DIR)\unistd.h

#**********************************************************

$(DLL_OBJ_DIR)\macroy.c : $(MACRO_DIR)\macro.y
     bison --no-line -d $** -o$@

$(DLL_OBJ_DIR)\macrol.c : $(MACRO_DIR)\macro.l
     flex -Phb_macro -i -8 -o$@ $**

$(DLL_OBJ_DIR)\macroy.obj : $(DLL_OBJ_DIR)\macroy.c
$(DLL_OBJ_DIR)\macrol.obj : $(DLL_OBJ_DIR)\macrol.c
     $(ECHO) > $(DLL_OBJ_DIR)\unistd.h
     $(CC) $(CLIBFLAGSDLL) -I$(DLL_OBJ_DIR) -Fo$(DLL_OBJ_DIR)\ $**
     $(DEL) $(DLL_OBJ_DIR)\unistd.h

#**********************************************************

$(DLL_OBJ_DIR)\harboury.c : $(HARBOUR_DIR)\harbour.y
     bison --no-line -d $** -o$@

$(DLL_OBJ_DIR)\harbourl.c : $(HARBOUR_DIR)\harbour.l
     flex -Phb_comp -i -8 -o$@ $**

$(DLL_OBJ_DIR)\harboury.obj : $(DLL_OBJ_DIR)\harboury.c
$(DLL_OBJ_DIR)\harbourl.obj : $(DLL_OBJ_DIR)\harbourl.c
     $(ECHO)  > $(DLL_OBJ_DIR)\unistd.h
     $(CC) $(CLIBFLAGSDLL) -I$(DLL_OBJ_DIR) -Fo$(DLL_OBJ_DIR)\ $**
     $(DEL) $(DLL_OBJ_DIR)\unistd.h


----------------------------------------------------------------------
O Twoich stronach juz si? m?wi...
Na >>> http://link.interia.pl/f1ad3



From gvarona at ec-red.com  Mon Jul 16 10:08:48 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Mon Jul 16 10:04:36 2007
Subject: [Harbour] Support for Class TopBarMenu of Clipper 5.3
In-Reply-To: <469B03D6.40A2@synel.co.il>
References: <469B03D6.40A2@synel.co.il>
Message-ID: <469B7BF0.6020904@ec-red.com>

Chen Kedem escribi?:

>GVS wrote:
>  
>
>>Subject: Support for Class TopBarMenu of Clipper 5.3
>>not support?
>>    
>>
>
>There is source/rtl/ttopbar.prg in the repository. You probably need
>to build Harbour with the HB_COMPAT_C53 flag (it is on by default).
>What platform (compiler/OS) you are using?
>  
>
Ok. Thank, trying build with HB_COMPAT_C53 flag

Best Regards.
GVS
From mpaliwoda at interia.pl  Mon Jul 16 10:12:15 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Mon Jul 16 10:12:23 2007
Subject: [Harbour] A few current makefile system questions
In-Reply-To: <20070716055136.71A94638C39@f02.poczta.interia.pl>
References: <20070716055136.71A94638C39@f02.poczta.interia.pl>
Message-ID: <469B7CBF.7010909@interia.pl>

Guys ...,

Sorry for multiple posts in this thread but first two posts did not
reach the list during 8 (eight) hours period so I decided to commit
changes myself :).

-- 

Marek

----------------------------------------------------------------------
Plaza plazy nierowna
Kliknij
>>>http://link.interia.pl/f1af7

From harbour.01 at syenar.hu  Mon Jul 16 15:29:09 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul 16 15:29:16 2007
Subject: [Harbour] Building xHarbour application
In-Reply-To: <002101c7c791$a812d3e0$1700000a@PcJuanxp>
References: <002101c7c791$a812d3e0$1700000a@PcJuanxp>
Message-ID: <3C0BFC98-B3B3-48F8-B44A-5C63E860462A@syenar.hu>

Hi Juan,

> b1) The fourth argument on Str() function (it's an extension to  
> make a left trim of the result).

I vote strongly against this type of extension (even inside  
HB_COMPAT_XHB),
but chances are good you can solve this simply with the PP:

#xtranslate Str( <x>, <y>, <z>, .F. ) => STR( <x>, <y>, <z> )
#xtranslate Str( <x>, <y>, <z>, .T. ) => LTRIM( STR( <x>, <y>, <z> ) )
#xtranslate Str( <x>, <y>, <z>, <k> ) => IIF( <k>, LTRIM( STR( <x>,  
<y>, <z> ) ), STR( <x>, <y>, <z> ) )

or something similar.

> 2) The TXml class.

Not knowing the implementation details, I think we can copy it
to contrib and later on we can move it to core if we have a group
decision and the code is portable, tried and we've recognized
and discussed its merits.

I'd find it better to stick with a "quasi-standard" portable XML lib
(like libxml, libexpat), just like we did with PCRE. Or to use even
a C++ lib and add a wrapper only to it in contrib.

My 2 cents.

Brgds,
Viktor

From dmacias at mail.udg.mx  Tue Jul 17 03:41:32 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Jul 17 03:41:37 2007
Subject: [Harbour] Re: problem with Mysql date field
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <469C72AC.3040201@mail.udg.mx>

Carlos:

 >Chen ,   the output just before fetch the data from the database is
 >"yyyy-mm-dd"

 >I test a program that David Macias sent to me  (thanks) everthing 
works >fine
 >even the DATE fields , but
 > the problem of the fields type  DATE in MySQL is not resolved yet to >me.

You are using a date format not managed in Harbour MySQL support.
In place of "yyyy-mm-dd", use any of these:

             if cFormatoDaData = 'mm-dd-yyyy' // USA
             elseif cFormatoDaData = 'dd/mm/yyyy' // BRITISH ou FRENCH
             elseif cFormatoDaData = 'yyyy.mm.dd' // ANSI
             elseif cFormatoDaData = 'dd.mm.yyyy' //GERMAN
             elseif cFormatoDaData = 'dd-mm-yyyy'  //ITALIAN
             elseif cFormatoDaData = 'yyyy/mm/dd' //JAPAN
             elseif cFormatoDaData = 'mm/dd/yyyy' // AMERICAN

In your function:
-----------------------------
Function InicializaAmbiente()
       HB_LANGSELECT("PT")
       SET CENTURY ON
       SET DATE TO ANSI
       SET DATE FORMAT "yyyy-mm-dd"
       SET EPOCH TO 1950
       SET( _SET_DELETED   , TRUE  )
    ENTRADA()
  Return Nil
-----------------------------

suppress SET DATE FORMAT "yyyy-mm-dd" to leave just ANSI format or 
change to date format valid in Harbour MySQL support


 >As I said I work with HMG from Roberto Lopez with is last version >2.0.031
 >I made my programs with is IDE.

 >The  HMG install the last version of Harbour, and the libraries
 >with extension"a" like libmysql.a and so on.

As I see, it work under MingW compiler
In this case, libraries I sent to you are unuseful because they are for 
BCC55 compiler

 >As a simple user,  this is very good to me , because I only have to 
make >the
 >prg's and the  IDE compile and made the EXE.

 >Now (sorry my ignorance) , how  can I implement your changes in this
 >environment  (HMG and IDE) ?

You have at least two choices:
1.- Use your current Harbour libraries.
   Just change date format in your programs
2.-Use new Harbour libraries with your date format or other
   You need to learn how to rebuild Harbour MySQL support under MingW 
(libmysql.a library), or request someone else to rebuild it


Obviously, choice 1 is your solution right now   :-)

David Macias


From soporte at dsgsoftware.com  Tue Jul 17 04:11:40 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Tue Jul 17 04:14:35 2007
Subject: [Harbour] Building xHarbour application
References: <002101c7c791$a812d3e0$1700000a@PcJuanxp>
	<3C0BFC98-B3B3-48F8-B44A-5C63E860462A@syenar.hu>
Message-ID: <000601c7c84a$6d7d93f0$1700000a@PcJuanxp>

Viktor,

> I vote strongly against this type of extension (even inside 
> HB_COMPAT_XHB),
> but chances are good you can solve this simply with the PP:
>
> #xtranslate Str( <x>, <y>, <z>, .F. ) => STR( <x>, <y>, <z> )
> #xtranslate Str( <x>, <y>, <z>, .T. ) => LTRIM( STR( <x>, <y>, <z> ) )
> #xtranslate Str( <x>, <y>, <z>, <k> ) => IIF( <k>, LTRIM( STR( <x>,  <y>, 
> <z> ) ), STR( <x>, <y>, <z> ) )
>
> or something similar.

Thanks. I had already thought of it although my app is partially "data 
driven" and I'll have to revise my dbfs that contain code for the 
macrocompiler.

Why don't you like this extension ? Have you never had that necessity? It 
seems as if you had some "allergy" to HB_COMPAT_XHB :-)

> Not knowing the implementation details, I think we can copy it
> to contrib and later on we can move it to core if we have a group
> decision and the code is portable, tried and we've recognized
> and discussed its merits.
>
> I'd find it better to stick with a "quasi-standard" portable XML lib
> (like libxml, libexpat), just like we did with PCRE. Or to use even
> a C++ lib and add a wrapper only to it in contrib.

I agree. We can wait more opinions.

Best regards
Juan 

From soporte at dsgsoftware.com  Tue Jul 17 04:24:57 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Tue Jul 17 04:25:58 2007
Subject: [Harbour] hbcompat.ch
Message-ID: <002c01c7c84c$0266cdf0$1700000a@PcJuanxp>

Hi Przemek,

Sorry but I think you has to change the xtranslate commands between 
hb_adler32() and hb_checksum() on hbcompat.ch. I think they are invested.

Best regards
Juan 

From harbour.01 at syenar.hu  Tue Jul 17 04:52:26 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 17 04:52:34 2007
Subject: [Harbour] Building xHarbour application
In-Reply-To: <000601c7c84a$6d7d93f0$1700000a@PcJuanxp>
References: <002101c7c791$a812d3e0$1700000a@PcJuanxp>
	<3C0BFC98-B3B3-48F8-B44A-5C63E860462A@syenar.hu>
	<000601c7c84a$6d7d93f0$1700000a@PcJuanxp>
Message-ID: <EBE32A14-D58D-4544-97EC-CF6E1FF83B0C@syenar.hu>

Hi Juan,

>> #xtranslate Str( <x>, <y>, <z>, .F. ) => STR( <x>, <y>, <z> )
>> #xtranslate Str( <x>, <y>, <z>, .T. ) => LTRIM( STR( <x>, <y>,  
>> <z> ) )
>> #xtranslate Str( <x>, <y>, <z>, <k> ) => IIF( <k>, LTRIM( STR 
>> ( <x>,  <y>, <z> ) ), STR( <x>, <y>, <z> ) )
>>
>> or something similar.
>
> Thanks. I had already thought of it although my app is partially  
> "data driven" and I'll have to revise my dbfs that contain code for  
> the macrocompiler.
>
> Why don't you like this extension ? Have you never had that  
> necessity? It seems as if you had some "allergy" to HB_COMPAT_XHB :-)

Well, if they could fit in the Harbour concept and would not
make any harm, we would not guard them with HB_COMPAT_XHB
guard indeed. We need to be careful what to adapt and how.

I've already wrote here my opinion on that in general, and also
for such types of extensions specifically. Also note that Harbour
is not xharbour and using any of the xharbour extensions is
not mandatory just as using Harbour is not mandatory. Meaning:
if you intend to use Harbour and you're using a "random" xharbour
extension, you might want to change your code to use cross-portable
Clipper language constructs (*). Ppl must not use every extension,
do they?

As for this extension my opinion is that LTRIM() around STR()
is indeed a often used function call, but those occasions when
the LTRIM()-ming is actually runtime dependent on a variable is
very rare (this is again based on my own coding experience).
I personally had never such need and I'm not using such thing in
any of my code. So I would think the solution to widely address
this problem is either a simple LSTR() (or similar) local macro
doing LTrim( Str( ) ) (which I _do_ use very often, named N2S()/ 
NUMTOSTR()),
or a HB_LTRIM(), HB_LSTR() (or similar) function extension _if_
we can justify it by making it noticably faster than LTrim( Str( ) ).
This solution is clean, easily portable, has the same advantages,
while it doesn't suffer from any of the disadvantages.

The disadvantage of this kind of extra parameter extension is that
it's pretty painful to scan your code for them, and if you'd port your
code (like you would do now), your app would silently not work as
expected, or in this case, it would not compile, and the only solution
is scanning those and manually changing your code (instead of
just adding a simple HB_LTRIMSTR() function with this functionality).

It'd be great if you could test the #xtranslate solution for this,
and if it's working fine, we can add them to hbcompat.ch.

Brgds,
Viktor

(*) Notice you probably won't be able to port your code to
CA-Cl*pper, XBase++, FlagShip with this extension in it.

From mpaliwoda at interia.pl  Tue Jul 17 05:35:09 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Tue Jul 17 05:35:20 2007
Subject: [Harbour] Building xHarbour application
Message-ID: <20070717093509.A76095C2087@poczta.interia.pl>

Viktor,

I fully agree with your point of view. People are used to 
xharbour's extensions, but they do not realise that most 
of them are not necesary or they can be done in a much 
"simpler/cleaner" way. We should always carefully review 
if particular extensions are really usefull/required.

> >> #xtranslate Str( >x>, >y>, >z>, .F. ) => STR( >x>, >y>, >z> )
> >> #xtranslate Str( >x>, >y>, >z>, .T. ) => LTRIM( STR( >x>, >y>,  
> >> >z> ) )
> >> #xtranslate Str( >x>, >y>, >z>, >k> ) => IIF( >k>, LTRIM( STR 
> >> ( >x>,  >y>, >z> ) ), STR( >x>, >y>, >z> ) )
> >>
> >> or something similar.
> >
> > Thanks. I had already thought of it although my app is partially  
> > "data driven" and I&#039;ll have to revise my dbfs that contain code for  
> > the macrocompiler.
> >
> > Why don&#039;t you like this extension ? Have you never had that  
> > necessity? It seems as if you had some "allergy" to HB_COMPAT_XHB :-)
> 
> Well, if they could fit in the Harbour concept and would not
> make any harm, we would not guard them with HB_COMPAT_XHB
> guard indeed. We need to be careful what to adapt and how.
> 
> I&#039;ve already wrote here my opinion on that in general, and also
> for such types of extensions specifically. Also note that Harbour
> is not xharbour and using any of the xharbour extensions is
> not mandatory just as using Harbour is not mandatory. Meaning:
> if you intend to use Harbour and you&#039;re using a "random" xharbour
> extension, you might want to change your code to use cross-portable
> Clipper language constructs (*). Ppl must not use every extension,
> do they?
> 
> As for this extension my opinion is that LTRIM() around STR()
> is indeed a often used function call, but those occasions when
> the LTRIM()-ming is actually runtime dependent on a variable is
> very rare (this is again based on my own coding experience).
> I personally had never such need and I&#039;m not using such thing in
> any of my code. So I would think the solution to widely address
> this problem is either a simple LSTR() (or similar) local macro
> doing LTrim( Str( ) ) (which I _do_ use very often, named N2S()/ 
> NUMTOSTR()),
> or a HB_LTRIM(), HB_LSTR() (or similar) function extension _if_
> we can justify it by making it noticably faster than LTrim( Str( ) ).
> This solution is clean, easily portable, has the same advantages,
> while it doesn&#039;t suffer from any of the disadvantages.
> 
> The disadvantage of this kind of extra parameter extension is that
> it&#039;s pretty painful to scan your code for them, and if you&#039;d port your
> code (like you would do now), your app would silently not work as
> expected, or in this case, it would not compile, and the only solution
> is scanning those and manually changing your code (instead of
> just adding a simple HB_LTRIMSTR() function with this functionality).
> 
> It&#039;d be great if you could test the #xtranslate solution for this,
> and if it&#039;s working fine, we can add them to hbcompat.ch.
> 
> Brgds,
> Viktor
> 
> (*) Notice you probably won&#039;t be able to port your code to
> CA-Cl*pper, XBase++, FlagShip with this extension in it.
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 




----------------------------------------------------------------------
Zobacz narzeczonego Oli Kwa?niewskiej!
http://link.interia.pl/f1adb

From druzus at priv.onet.pl  Tue Jul 17 08:04:44 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 17 08:05:20 2007
Subject: [Harbour] hbcompat.ch
In-Reply-To: <002c01c7c84c$0266cdf0$1700000a@PcJuanxp>
References: <002c01c7c84c$0266cdf0$1700000a@PcJuanxp>
Message-ID: <20070717120444.GA21023@localhost.localdomain>

On Tue, 17 Jul 2007, Juan G?lvez wrote:
> Hi Przemek,
> Sorry but I think you has to change the xtranslate commands between 
> hb_adler32() and hb_checksum() on hbcompat.ch. I think they are invested.

Yes, you are right. Thank you for information.

best regards,
Przemek
From druzus at priv.onet.pl  Tue Jul 17 08:43:35 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 17 08:44:13 2007
Subject: [Harbour] Building xHarbour application
In-Reply-To: <002101c7c791$a812d3e0$1700000a@PcJuanxp>
References: <002101c7c791$a812d3e0$1700000a@PcJuanxp>
Message-ID: <20070717124335.GB21023@localhost.localdomain>

On Mon, 16 Jul 2007, Juan G?lvez wrote:
> Hi all,
> I want to test my current xHarbour app with Harbour.
> I think at this moment they only exist 2 reasons that impede a complete 
> test :
> 1) The fourth argument on Str() function (it's an extension to make a left 
> trim of the result).

Changing parameters in standard dbase functions is IMHO bad idea.
It causes that source code is not portable between different dbase
compilers so I do not like it. I'd strongly suggest to create new
function instead of hacking parameters of existing functions. With
new function when you will want to port your code to other dbase
compiler it will be enough to add such function to your source code.
I can add it cover by HB_COMPAT_XHB macro but if possible I'd prefer
to not do that.

> 2) The TXml class.

I ported it few months ago but I haven't tested. It's in attachment.

best regards,
Przemek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: txml.tgz
Type: application/x-gzip
Size: 17648 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070717/107e8298/txml-0001.tgz
From druzus at priv.onet.pl  Tue Jul 17 08:52:16 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 17 08:52:52 2007
Subject: [Harbour] Further Testing for Beta 3 or Release Candidate
	1	status?
In-Reply-To: <469B257A.7080309@mweb.co.za>
References: <200707141242.02447.philb@philb.us>
	<20070714202046.GA5074@localhost.localdomain>
	<200707141844.03715.philb@philb.us>
	<20070715062441.GA11933@localhost.localdomain>
	<20070715073235.GA15706@localhost.localdomain>
	<469B257A.7080309@mweb.co.za>
Message-ID: <20070717125216.GC21023@localhost.localdomain>

On Mon, 16 Jul 2007, Alex Strickland wrote:
> I was unable to create Beta 3 for MSVC with CVS because of the 
> corruption. I thought I would try again for SVN. But I can't see how to 
>  see the BETA tag/branch to update my local repository. Is anyone using 
> TortoiseSVN, and can enlighten me?

I do not know TortoiseSVN. You can access BETA branch using:
    https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/branches/beta1/harbour
and if you want the exact BETA3 source code then you can use:
    https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/tags/beta3/harbour

best regards,
Przemek
From makis1970 at gmail.com  Tue Jul 17 08:53:47 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Tue Jul 17 08:58:17 2007
Subject: [Harbour] Rushmore filters.
Message-ID: <005901c7c871$87999f00$96ccdd00$@com>

Przemek,

Sorry for disturbing you again but I would like to know if DBFCDX from
Harbour  support Rushmore filters - optimizations (as Clipper 5.3). If no do
you think that someday you'll make it also for harbour as for xharbour
(commercial)

 

Thanks in advance

Mike Evans

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070717/2ec8034e/attachment.html
From druzus at priv.onet.pl  Tue Jul 17 09:03:48 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 17 09:04:25 2007
Subject: [Harbour] gttrm issues
In-Reply-To: <9257026e0707150847y2a79093dk92ede4455f8fe8a8@mail.gmail.com>
References: <9257026e0707150847y2a79093dk92ede4455f8fe8a8@mail.gmail.com>
Message-ID: <20070717130348.GD21023@localhost.localdomain>

On Sun, 15 Jul 2007, Lorenzo Fiorini wrote:
> 1) hdo hbmk -n -static -gttrm ttcolors gives:
> ... undefined reference to `HB_FUN_HB_GT_TRM'

1-st, I do not know what is hdo.
2-nd, If you see the above message then it means that you do not have
libgttrm.a in HB_LIB_INSTALL directory or you are using some old hb*
script which do not have gttrm in linked library list.

> 2) I can't get yellow and white as background ( try the test below in
> gttrm and gtxwc )
> yellow is orange and white is gray using fedora 7 gnome-terminal

It's not GTTRM problem but gnome-terminal limitation. You will have
exactly the same results with GTCRS and GTSLN. IMHO gnome-terminal
is not the best choice. Personally I'd like to use PTERM - it's part
of PuTTY for *nixes.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Tue Jul 17 09:16:55 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Jul 17 09:16:59 2007
Subject: [Harbour] gttrm issues
In-Reply-To: <20070717130348.GD21023@localhost.localdomain>
References: <9257026e0707150847y2a79093dk92ede4455f8fe8a8@mail.gmail.com>
	<20070717130348.GD21023@localhost.localdomain>
Message-ID: <9257026e0707170616qd5b3b5m3e5ffc3a15966e0b@mail.gmail.com>

On 7/17/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> 1-st, I do not know what is hdo.

Sorry, hdo just set paths:

#!/bin/sh
PATH="$HOME/$HB_NAME$HB_VERSION/bin:$PATH"
$*

> 2-nd, If you see the above message then it means that you do not have
> libgttrm.a in HB_LIB_INSTALL directory or you are using some old hb*
> script which do not have gttrm in linked library list.

Strange I don't have the message with other gtxxx

> It's not GTTRM problem but gnome-terminal limitation. You will have
> exactly the same results with GTCRS and GTSLN. IMHO gnome-terminal
> is not the best choice. Personally I'd like to use PTERM - it's part
> of PuTTY for *nixes.

Thanks, I'll try.

best regards,
Lorenzo
From ssbbs at mail.zzz.com.tw  Tue Jul 17 09:23:23 2007
From: ssbbs at mail.zzz.com.tw (=?UTF-8?B?Iue2sue3ueizh+ioiuKAp+W7luaWh+WLnShX?= =?UTF-8?B?ZW5TaGVuZyki?=)
Date: Tue Jul 17 09:23:30 2007
Subject: [Harbour] harbour can support full unicode ?
In-Reply-To: <20070717124335.GB21023@localhost.localdomain>
References: <002101c7c791$a812d3e0$1700000a@PcJuanxp>
	<20070717124335.GB21023@localhost.localdomain>
Message-ID: <20070717212206.730B.SSBBS@mail.zzz.com.tw>

Hello All!!

We are ASIA country, We need unicode function about string.
Like substr()/left()/right()/strtran()/len() ....


From lorenzo.fiorini at gmail.com  Tue Jul 17 09:42:29 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Jul 17 09:42:33 2007
Subject: [Harbour] gttrm issues
In-Reply-To: <20070717130348.GD21023@localhost.localdomain>
References: <9257026e0707150847y2a79093dk92ede4455f8fe8a8@mail.gmail.com>
	<20070717130348.GD21023@localhost.localdomain>
Message-ID: <9257026e0707170642s637868dena5e414543e720271@mail.gmail.com>

On 7/17/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> 2-nd, If you see the above message then it means that you do not have
> libgttrm.a in HB_LIB_INSTALL directory or you are using some old hb*
> script which do not have gttrm in linked library list.

Sorry, you're right. I use a modified hbfunc.sh.

> It's not GTTRM problem but gnome-terminal limitation. You will have
> exactly the same results with GTCRS and GTSLN. IMHO gnome-terminal
> is not the best choice. Personally I'd like to use PTERM - it's part
> of PuTTY for *nixes.

I tried and indeed yellow is "more" yellow than gnome-terminal but
there is no difference between "gray" and "white" background as they
are defined by C53b and gtxwc.

Unfortunately I've some apps that use colors to show orders delivery
status so I'd need the same color "palette" of gtxwc.

best regards,
Lorenzo
From soporte at dsgsoftware.com  Tue Jul 17 09:55:57 2007
From: soporte at dsgsoftware.com (=?iso-8859-2?Q?Juan_G=E1lvez?=)
Date: Tue Jul 17 09:56:44 2007
Subject: [Harbour] Building xHarbour application
References: <002101c7c791$a812d3e0$1700000a@PcJuanxp>
	<20070717124335.GB21023@localhost.localdomain>
Message-ID: <003f01c7c87a$39dbcd20$1700000a@PcJuanxp>

Hi Przemek,

>> 1) The fourth argument on Str() function (it's an extension to make a 
>> left
>> trim of the result).
>
> Changing parameters in standard dbase functions is IMHO bad idea.
> It causes that source code is not portable between different dbase
> compilers so I do not like it. I'd strongly suggest to create new
> function instead of hacking parameters of existing functions. With
> new function when you will want to port your code to other dbase
> compiler it will be enough to add such function to your source code.
> I can add it cover by HB_COMPAT_XHB macro but if possible I'd prefer
> to not do that.

Ok. Thanks.

>> 2) The TXml class.
>
> I ported it few months ago but I haven't tested. It's in attachment.

Many thanks. I'll try it.You always go a step ahead :)

Best regards
Juan 

From sscc at mweb.co.za  Tue Jul 17 10:10:55 2007
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Jul 17 10:11:29 2007
Subject: [Harbour] Further Testing for Beta 3 or Release
	Candidate	1	status?
In-Reply-To: <20070717125216.GC21023@localhost.localdomain>
References: <200707141242.02447.philb@philb.us>	<20070714202046.GA5074@localhost.localdomain>	<200707141844.03715.philb@philb.us>	<20070715062441.GA11933@localhost.localdomain>	<20070715073235.GA15706@localhost.localdomain>	<469B257A.7080309@mweb.co.za>
	<20070717125216.GC21023@localhost.localdomain>
Message-ID: <469CCDEF.6000406@mweb.co.za>

Przemyslaw Czerpak wrote:

> I do not know TortoiseSVN. You can access BETA branch using:
>     https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/branches/beta1/harbour
> and if you want the exact BETA3 source code then you can use:
>     https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/tags/beta3/harbour

OK, that gave me the idea to use the Tortoise repository browser, which 
allowed me to checkout tags\beta3.

Thanks
Alex

From miguelangel at marchuet.net  Tue Jul 17 10:21:34 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Tue Jul 17 10:26:08 2007
Subject: [Harbour] error in compilation with HB_PCRE_REGEX
Message-ID: <469CD06E.6090209@marchuet.net>

I found the next error at compilation


source\rtl\hbregex.c:
Error E2340 source\rtl\hbregex.c 111: Type mismatch in parameter 6 (wanted 'int *', got 'int') in function hb_regexec
Error E2340 source\rtl\hbregex.c 111: Type mismatch in parameter 7 (wanted 'int', got 'int *') in function hb_regexec
Error E2227 source\rtl\hbregex.c 111: Extra parameter in call to pcre_exec in function hb_regexec
*** 3 errors in Compile ***

Best regards,
Miguel Angel Marchuet
From soporte at dsgsoftware.com  Tue Jul 17 10:35:28 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Tue Jul 17 10:40:30 2007
Subject: [Harbour] libct
Message-ID: <003e01c7c880$568e1670$1700000a@PcJuanxp>

All, Przemek,

I know libct was recently synced with xHarbour but SetFDati() function isn't 
present in Harbour.

Is there any alternative ?

Best regards
Juan 

From miguelangel at marchuet.net  Tue Jul 17 10:51:15 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Tue Jul 17 10:54:55 2007
Subject: [Harbour] 2007-07-17 16:48 UTC+0100 Miguel Angel Marchuet
	<miguelangel/at/marchuet.net>
Message-ID: <469CD763.5030708@marchuet.net>

2007-07-17 16:48 UTC+0100 Miguel Angel Marchuet <miguelangel/at/marchuet.net>
  * contrib/tip/client.prg
  * contrib/tip/ftpcln.prg
    + Added support to PORT transfer mode, alternative to PASV transfer mode. When :bUsePasv will be false
      PORT mode will be used. and cleaned some unused variables.
    + Added method :NoOp()
    + Added method :Rest( nPos )
    * Changed method :LS( cSpec )
    * Changed method :List( cSpec )
    * Changed method :TransferStart()
    * Changed method :Stor( cFile )
    * Changed method :UploadFile( cLocalFile, cRemoteFile )
    * Changed method :DownloadFile( cLocalFile, cRemoteFile )
    + Added method :Port()
    + Added method :SendPort()


Best regards,
Miguel Angel Marchuet
From druzus at priv.onet.pl  Tue Jul 17 11:44:08 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 17 11:44:44 2007
Subject: [Harbour] error in compilation with HB_PCRE_REGEX
In-Reply-To: <469CD06E.6090209@marchuet.net>
References: <469CD06E.6090209@marchuet.net>
Message-ID: <20070717154408.GA26761@localhost.localdomain>

On Tue, 17 Jul 2007, Miguel Angel Marchuet wrote:
> I found the next error at compilation
> source\rtl\hbregex.c:
> Error E2340 source\rtl\hbregex.c 111: Type mismatch in parameter 6 (wanted 'int *', got 'int') in function hb_regexec
> Error E2340 source\rtl\hbregex.c 111: Type mismatch in parameter 7 (wanted 'int', got 'int *') in function hb_regexec
> Error E2227 source\rtl\hbregex.c 111: Extra parameter in call to pcre_exec in function hb_regexec
> *** 3 errors in Compile ***

It's not Harbour problem.
You are trying to compile hbregex with PCRE regex support
using old BCC55 PCRE header files (probably because you set
HB_PCRE_REGEX macro).

best regards,
Przemek
From druzus at priv.onet.pl  Tue Jul 17 12:02:10 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 17 12:02:47 2007
Subject: [Harbour] libct
In-Reply-To: <003e01c7c880$568e1670$1700000a@PcJuanxp>
References: <003e01c7c880$568e1670$1700000a@PcJuanxp>
Message-ID: <20070717160210.GA26863@localhost.localdomain>

On Tue, 17 Jul 2007, Juan G?lvez wrote:
> All, Przemek,
> I know libct was recently synced with xHarbour but SetFDati() function 
> isn't present in Harbour.

Not whole CT library has been synced. I'm systematically updating it
but not all xHarbour modifications are correct so it's time consuming
process because I have to check it.
files.c has not been being updated yet.

> Is there any alternative ?

Just simply take this functions from xHarbour and add it to your code.

best regards,
Przemek
From sscc at mweb.co.za  Tue Jul 17 12:02:39 2007
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Jul 17 12:03:09 2007
Subject: [Harbour] Further Testing for Beta 3 or
	Release	Candidate	1	status?
In-Reply-To: <469CCDEF.6000406@mweb.co.za>
References: <200707141242.02447.philb@philb.us>	<20070714202046.GA5074@localhost.localdomain>	<200707141844.03715.philb@philb.us>	<20070715062441.GA11933@localhost.localdomain>	<20070715073235.GA15706@localhost.localdomain>	<469B257A.7080309@mweb.co.za>	<20070717125216.GC21023@localhost.localdomain>
	<469CCDEF.6000406@mweb.co.za>
Message-ID: <469CE81F.1090604@mweb.co.za>

To Alexander Kresin

I have made a Beta 3 binary for MSVC6 and uploaded :

harbour-0.99.3.bin.w32.msvc6.zip

to :

ftp://upload.sourceforge.net/incoming/

Please would you be kind enough to put it up on SourceForge.

Thank you

Alex
From i at kevincarmody.com  Tue Jul 17 13:33:57 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Tue Jul 17 13:33:16 2007
Subject: [Harbour] harbour can support full unicode ?
In-Reply-To: <20070717212206.730B.SSBBS@mail.zzz.com.tw>
References: <002101c7c791$a812d3e0$1700000a@PcJuanxp>	<20070717124335.GB21023@localhost.localdomain>
	<20070717212206.730B.SSBBS@mail.zzz.com.tw>
Message-ID: <469CFD85.2030506@kevincarmody.com>

????????(WenSheng) wrote:
> Hello All!!
>
> We are ASIA country, We need unicode function about string.
> Like substr()/left()/right()/strtran()/len() ....
Harbour does not support Unicode as a native data type.  Harbour 
developers are now planning to add this support.

In the meantime, Harbour can support Unicode as a byte stream.  I wrote 
some functions to convert between various formats of Unicode byte 
streams and Harbour numeric arrays.  The arrays hold Unicode numeric 
character codes.  You can download these functions from the MiniGui 
Extended forum at 
http://tech.groups.yahoo.com/group/harbourminigui/files/CONTRIB, file 
name UnicodeConvert.prg.

Kevin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070717/a6290436/attachment.html
From mbelgrano at deltain.it  Tue Jul 17 13:40:09 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jul 17 13:43:35 2007
Subject: [Harbour] will scintilla extend harbour as easy as ?
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A79A@SRV02.deltain.net>

Scintilla is a free source code editing component. It comes with
complete 
source code and a license that permits use in any free project or
commercial 
product.

http://www.scintilla.org/

http://scintilla.sourceforge.net/ScintillaDownload.html

 

 

Massimo Belgrano <mailto:mbelgrano@deltain.com> 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070717/79cb7f89/attachment.html
From antonioharbour at gmail.com  Tue Jul 17 13:51:42 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jul 17 13:52:29 2007
Subject: [Harbour] Linus Torvalds interview
Message-ID: <469d01d8.382b420a.137a.3bb2@mx.google.com>

Very interesting:
http://www.oneopensource.it/interview-linus-torvalds/

Regards,

Antonio

From ssbbs at mail.zzz.com.tw  Tue Jul 17 21:43:06 2007
From: ssbbs at mail.zzz.com.tw ({TE(WenSheng))
Date: Tue Jul 17 21:43:18 2007
Subject: [Harbour] harbour can support full unicode ?
In-Reply-To: <469CFD85.2030506@kevincarmody.com>
References: <20070717212206.730B.SSBBS@mail.zzz.com.tw>
	<469CFD85.2030506@kevincarmody.com>
Message-ID: <20070718094221.BA0E.SSBBS@mail.zzz.com.tw>


> 
> Hello All!! We are ASIA country, We need unicode function about string. Like substr()/left()/right()/strtran()/len() ....
> Harbour does not support Unicode as a native data type. Harbour developers are now planning to add this support.
> 
> In the meantime, Harbour can support Unicode as a byte stream. I wrote some functions to convert between various formats of Unicode byte streams and Harbour numeric arrays. The arrays hold Unicode numeric character codes. You can download these functions from the MiniGui Extended forum at http://tech.groups.yahoo.com/group/harbourminigui/files/CONTRIB, file name UnicodeConvert.prg.
> 

I can't get file, Do you can send for me ?
From i at kevincarmody.com  Wed Jul 18 07:04:06 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Wed Jul 18 07:03:26 2007
Subject: [Harbour] harbour can support full unicode ?
In-Reply-To: <20070718094221.BA0E.SSBBS@mail.zzz.com.tw>
References: <20070717212206.730B.SSBBS@mail.zzz.com.tw>	<469CFD85.2030506@kevincarmody.com>
	<20070718094221.BA0E.SSBBS@mail.zzz.com.tw>
Message-ID: <469DF3A6.5000205@kevincarmody.com>

{TE(WenSheng) wrote:
>> Hello All!! We are ASIA country, We need unicode function about string. Like substr()/left()/right()/strtran()/len() ....
>> Harbour does not support Unicode as a native data type.? Harbour developers are now planning to add this support.
>>
>> In the meantime, Harbour can support Unicode as a byte stream.? I wrote some functions to convert between various formats of Unicode byte streams and Harbour numeric arrays.? The arrays hold Unicode numeric character codes.? You can download these functions from the MiniGui Extended forum at http://tech.groups.yahoo.com/group/harbourminigui/files/CONTRIB, file name UnicodeConvert.prg.
>>
>>     
>
> I can't get file, Do you can send for me ?

I've posted it to my web site at
http://kevincarmody.com/misc/unicodeconvert.prg.

Kevin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070718/88c63a39/attachment.html
From druzus at priv.onet.pl  Wed Jul 18 08:44:32 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul 18 08:45:08 2007
Subject: [Harbour] gttrm issues
In-Reply-To: <9257026e0707150847y2a79093dk92ede4455f8fe8a8@mail.gmail.com>
References: <9257026e0707150847y2a79093dk92ede4455f8fe8a8@mail.gmail.com>
Message-ID: <20070718124432.GA6139@localhost.localdomain>

On Sun, 17 Jul 2007, Lorenzo Fiorini wrote:
> > It's not GTTRM problem but gnome-terminal limitation. You will have
> > exactly the same results with GTCRS and GTSLN. IMHO gnome-terminal
> > is not the best choice. Personally I'd like to use PTERM - it's part
> > of PuTTY for *nixes.
> I tried and indeed yellow is "more" yellow than gnome-terminal but
> there is no difference between "gray" and "white" background as they
> are defined by C53b and gtxwc.

XTERM colors are not exactly the same as VGA ones but in PuTTY/PTerm
you can define them yourself. Hit CTRL+MOUSE_RIGHT and change settings.
In colors section chose YELLOW and set as RGB values to: 170, 85, 0
You can find RGB values for default VGA colors in source/rtl/gtxwc/gtxwc.c

    /* these are standard PC console colors in RGB */
    static char *rgb_colors[] = {
       "rgb:00/00/00",   /* black         */
       "rgb:00/00/AA",   /* blue          */
       "rgb:00/AA/00",   /* green         */
       "rgb:00/AA/AA",   /* cyan          */
       "rgb:AA/00/00",   /* red           */
       "rgb:AA/00/AA",   /* magenta       */
       "rgb:AA/55/00",   /* brown         */
       "rgb:AA/AA/AA",   /* light gray    */
       "rgb:55/55/55",   /* gray          */
       "rgb:55/55/FF",   /* light blue    */
       "rgb:55/FF/55",   /* light green   */
       "rgb:55/FF/FF",   /* light cyan    */
       "rgb:FF/55/55",   /* light red     */
       "rgb:FF/55/FF",   /* light magenta */
       "rgb:FF/FF/55",   /* yellow        */
       "rgb:FF/FF/FF"    /* white         */
    };

Using PuTTY you can change terminal settings and then save it with chosen
session name and then use them also in PTerm - you can chose settings when
you run PuTTY/PTerm using -load <session> parameter. AFAIR by default
PTerm loads "Default Settings" session. Inside ~/.putty/sessions you can
find text files with defined sessions. You can distribute them with your
application for easier client computer setup.

PuTTY/PTerm also nicely recognize most of Linux console control codes.
You can check Linux console control codes by:
    man console_codes

If you look at them then you will find that it's possible to change default
colors using RGB values. This script sets default VGA colors:

    #!/bin/sh

    # restore palette
    echo -ne "\033]R"

    # black
    echo -ne "\033]P0000000"
    # red
    echo -ne "\033]P1AA0000"
    # green
    echo -ne "\033]P200AA00"
    # brown
    echo -ne "\033]P3AA5500"
    # blue
    echo -ne "\033]P40000AA"
    # magenta
    echo -ne "\033]P5AA00AA"
    # cyan
    echo -ne "\033]P600AAAA"
    # light gray
    echo -ne "\033]P7AAAAAA"
    # gray
    echo -ne "\033]P8555555"
    # light red
    echo -ne "\033]P9FF5555"
    # light green
    echo -ne "\033]PA55FF55"
    # yellow
    echo -ne "\033]PBFFFF55"
    # light blue
    echo -ne "\033]PC5555FF"
    # light magenta
    echo -ne "\033]PDFF55FF"
    # light cyan
    echo -ne "\033]PE55FFFF"
    # white
    echo -ne "\033]PFFFFFFF"


You can also send such data from your application, f.e. add this function:

    PROC SETRGBCOLOR()
    LOCAL cEscSeq := CHR(27) + "]R" + ;
                     CHR(27) + "]P0000000" + ;
                     CHR(27) + "]P1AA0000" + ;
                     CHR(27) + "]P200AA00" + ;
                     CHR(27) + "]P3AA5500" + ;
                     CHR(27) + "]P40000AA" + ;
                     CHR(27) + "]P5AA00AA" + ;
                     CHR(27) + "]P600AAAA" + ;
                     CHR(27) + "]P7AAAAAA" + ;
                     CHR(27) + "]P8555555" + ;
                     CHR(27) + "]P9FF5555" + ;
                     CHR(27) + "]PA55FF55" + ;
                     CHR(27) + "]PBFFFF55" + ;
                     CHR(27) + "]PC5555FF" + ;
                     CHR(27) + "]PDFF55FF" + ;
                     CHR(27) + "]PE55FFFF" + ;
                     CHR(27) + "]PFFFFFFF"
        FWRITE( HB_GETSTDIN(), cEscSeq )
    RETURN

to your code and then simply execute it.
In the future I'll add to GT API new method to set RGB colors.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jul 18 08:51:01 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul 18 08:51:36 2007
Subject: [Harbour] Further Testing for Beta 3 or
	Release	Candidate	1	status?
In-Reply-To: <469CE81F.1090604@mweb.co.za>
References: <200707141242.02447.philb@philb.us>
	<20070714202046.GA5074@localhost.localdomain>
	<200707141844.03715.philb@philb.us>
	<20070715062441.GA11933@localhost.localdomain>
	<20070715073235.GA15706@localhost.localdomain>
	<469B257A.7080309@mweb.co.za>
	<20070717125216.GC21023@localhost.localdomain>
	<469CCDEF.6000406@mweb.co.za> <469CE81F.1090604@mweb.co.za>
Message-ID: <20070718125101.GB6139@localhost.localdomain>

On Tue, 17 Jul 2007, Alex Strickland wrote:
> To Alexander Kresin
> I have made a Beta 3 binary for MSVC6 and uploaded :
> harbour-0.99.3.bin.w32.msvc6.zip
> to :
> ftp://upload.sourceforge.net/incoming/
> Please would you be kind enough to put it up on SourceForge.

I've just uploaded:
    harbour-0_99_3-DJGPP2_04.tgz
Please also add this DOS binaries.

best regards,
Przemek
From ssbbs at mail.zzz.com.tw  Wed Jul 18 11:22:05 2007
From: ssbbs at mail.zzz.com.tw ({TE(WenSheng))
Date: Wed Jul 18 11:22:26 2007
Subject: [Harbour] harbour can support full unicode ?
In-Reply-To: <469DF3A6.5000205@kevincarmody.com>
References: <20070718094221.BA0E.SSBBS@mail.zzz.com.tw>
	<469DF3A6.5000205@kevincarmody.com>
Message-ID: <20070718232109.DF74.SSBBS@mail.zzz.com.tw>

> 
> I've posted it to my web site at http://kevincarmody.com/misc/unicodeconvert.prg.
> 

Thank you!! I got it.
But, No base string function, Do you have plan to modify string function ?
From creis at gem51.com  Wed Jul 18 12:21:26 2007
From: creis at gem51.com (creis@gem51.com)
Date: Wed Jul 18 12:31:28 2007
Subject: [Harbour] Re: problem with Mysql date field resolved
Message-ID: <20070718172126.au4hw4cajo084sc0@webmail.gem51.com>

Hi all !!

> You have at least two choices:
> 1.- Use your current Harbour libraries.
>   Just change date format in your programs
> 2.-Use new Harbour libraries with your date format or other
>   You need to learn how to rebuild Harbour MySQL support under MingW  
> (libmysql.a library), or request someone else to rebuild it
>
> Obviously, choice 1 is your solution right now   :-)
>

That's what I did ! and it works! Finally my problem with MySql DATE  
field is resolved.

I chose the first option !  1- change my programs.
The solution given by David Macias was only in my function

Function InicializaAmbiente()
        HB_LANGSELECT("PT")
        SET CENTURY ON
        SET DATE TO ANSI
        SET DATE FORMAT "yyyy-mm-dd"
        SET EPOCH TO 2000
        SET( _SET_DELETED   , TRUE  )
     ENTRADA()
   Return Nil

change the SET DATE FORMAT "yyyy-mm-dd" in my case to SET DATE FORMAT  
"yyyy.mm.dd"

Thanks all of you for your support!

best regards

Carlos Reis



From druzus at priv.onet.pl  Wed Jul 18 15:22:00 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul 18 15:22:35 2007
Subject: [Harbour] ChangeLog 2007-07-18 16:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070718192200.GA29752@localhost.localdomain>

2007-07-18 16:25 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/tests/gtchars.prg
  * harbour/tests/gtcolors.prg
  * harbour/tests/gtkeys.prg
  * harbour/contrib/tip/thtml.prg
  * harbour/contrib/tip/thtml.ch
  * harbour/contrib/libct/misc2.c
  * harbour/contrib/libct/color.c
  * harbour/contrib/libct/numcount.c
  * harbour/contrib/libct/numline.c
  * harbour/contrib/libct/misc3.c
  * harbour/source/rtl/hbhex.c
  * harbour/source/rtl/hbbit.c
    * set valid Id svn:keyword

  * harbour/include/hbcompat.ch
    * reverted hb_adler32() <=> hb_checksum() translations

  * harbour/contrib/libct/keyset.c
  + harbour/contrib/libct/like.c
  * harbour/contrib/libct/finan.c
  * harbour/contrib/libct/justify.c
    * synced with xHarbour modifications and fixes
    * indenting

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jul 18 15:22:33 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul 18 15:23:08 2007
Subject: [Harbour] ChangeLog 2007-07-18 16:43 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070718192233.GB29752@localhost.localdomain>

2007-07-18 16:43 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/libct/Makefile
  * harbour/contrib/libct/makefile.bc
  * harbour/contrib/libct/makefile.vc
    * added new files and Juan G?lvez fixes
  * harbour/contrib/libct/like.c
  * harbour/contrib/libct/keyset.c
    ! fixed typo

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jul 18 15:31:09 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul 18 15:31:46 2007
Subject: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070718193109.GC29752@localhost.localdomain>

2007-07-18 21:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapicdp.h
  * harbour/source/rtl/cdpapi.c
    + added C functions: hb_cdpUTF8StringSubstr(), hb_cdpUTF8StringPeek()
    + added .prg functions: HB_UTF8SUBSTR(), HB_UTF8LEFT(), HB_UTF8RIGHT(),
                            HB_UTF8LEN(), HB_UTF8PEEK()
      They are working like corresponding functions: SUBSTR(), LEFT(),
      RIGHT(), LEN(), STRPEEK() but operates on UTF-8 strings.
      TODO: HB_UTF8STUFF(), HB_UTF8TRAN(), HB_UTF8POKE()

  * harbour/include/hbcompat.ch
    + added translation rule for str(<x>,,,.t.)

  * harbour/contrib/tip/ftpcln.prg
    ! changed str(<x>,,,.t.) to ltrim(str(<x>))

  * harbour/source/rtl/right.c
  * harbour/source/rtl/left.c
    % minor optimization

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Jul 18 15:55:26 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul 18 15:55:31 2007
Subject: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070718193109.GC29752@localhost.localdomain>
References: <20070718193109.GC29752@localhost.localdomain>
Message-ID: <32C4589B-176D-4F75-BB01-BCBC24B1894A@syenar.hu>

Thanks for your changes.

On 2007.07.18., at 21:31, Przemyslaw Czerpak wrote:

> 2007-07-18 21:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/include/hbapicdp.h
>   * harbour/source/rtl/cdpapi.c
>     + added C functions: hb_cdpUTF8StringSubstr(),  
> hb_cdpUTF8StringPeek()
>     + added .prg functions: HB_UTF8SUBSTR(), HB_UTF8LEFT(),  
> HB_UTF8RIGHT(),
>                             HB_UTF8LEN(), HB_UTF8PEEK()
>       They are working like corresponding functions: SUBSTR(), LEFT(),
>       RIGHT(), LEN(), STRPEEK() but operates on UTF-8 strings.
>       TODO: HB_UTF8STUFF(), HB_UTF8TRAN(), HB_UTF8POKE()
>
>   * harbour/include/hbcompat.ch
>     + added translation rule for str(<x>,,,.t.)

Just one comment, I think this should be:

#xtranslate str(<x>,[<y>],[<k>],<z>)=> iif(<z>, ltrim(str(<x>, <y>,  
<k>)), str(<x>, <y>, <k>))

(I can't commit at this very moment)

Brgds,
Viktor

From druzus at priv.onet.pl  Wed Jul 18 16:23:38 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul 18 16:24:13 2007
Subject: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <32C4589B-176D-4F75-BB01-BCBC24B1894A@syenar.hu>
References: <20070718193109.GC29752@localhost.localdomain>
	<32C4589B-176D-4F75-BB01-BCBC24B1894A@syenar.hu>
Message-ID: <20070718202338.GA30894@localhost.localdomain>

On Wed, 18 Jul 2007, Szak?ts Viktor wrote:
> >  * harbour/include/hbcompat.ch
> >    + added translation rule for str(<x>,,,.t.)
> Just one comment, I think this should be:
> #xtranslate str(<x>,[<y>],[<k>],<z>)=> iif(<z>, ltrim(str(<x>, <y>,  
> <k>)), str(<x>, <y>, <k>))

I know that it's ugly but xHarbour ignores 2-nd and 3-rd parameter when
more then 3 parameters are passed to STR() so the version I committed
gives the same results as in xHarbour for code like:
    ? str(1,2,3,.t.)
I do not like this STR() extension so I do not want to fix side effects
which exists in xHarbour implementation.

best regards,
Przemek
From i at kevincarmody.com  Wed Jul 18 16:49:14 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Wed Jul 18 16:48:35 2007
Subject: [Harbour] harbour can support full unicode ?
In-Reply-To: <20070718232109.DF74.SSBBS@mail.zzz.com.tw>
References: <20070718094221.BA0E.SSBBS@mail.zzz.com.tw>	<469DF3A6.5000205@kevincarmody.com>
	<20070718232109.DF74.SSBBS@mail.zzz.com.tw>
Message-ID: <469E7CCA.9090507@kevincarmody.com>

{TE(WenSheng) wrote:
>> I've posted it to my web site at http://kevincarmody.com/misc/unicodeconvert.prg.
>>
>>     
>
> Thank you!! I got it.
> But, No base string function, Do you have plan to modify string function

When you say "base string function," do you mean Harbour string
functions that support Unicode? I do not plan to make any modifications
to Harbour to support Unicode strings. The functions I wrote enable you
to work with Unicode via arrays. I developed these functions as a
temporary measure until we have Unicode support in strings.

There are some Harbour developers who plan to add Unicode string
support. Would one of those developers please tell us what the current
status of this project is?


Kevin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070718/12c3f397/attachment.html
From harbour.01 at syenar.hu  Wed Jul 18 18:50:51 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul 18 18:50:56 2007
Subject: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070718202338.GA30894@localhost.localdomain>
References: <20070718193109.GC29752@localhost.localdomain>
	<32C4589B-176D-4F75-BB01-BCBC24B1894A@syenar.hu>
	<20070718202338.GA30894@localhost.localdomain>
Message-ID: <8B293413-23CF-4A49-8BBB-AFD688573C81@syenar.hu>


On 2007.07.18., at 22:23, Przemyslaw Czerpak wrote:

> On Wed, 18 Jul 2007, Szak?ts Viktor wrote:
>>>  * harbour/include/hbcompat.ch
>>>    + added translation rule for str(<x>,,,.t.)
>> Just one comment, I think this should be:
>> #xtranslate str(<x>,[<y>],[<k>],<z>)=> iif(<z>, ltrim(str(<x>, <y>,
>> <k>)), str(<x>, <y>, <k>))
>
> I know that it's ugly but xHarbour ignores 2-nd and 3-rd parameter  
> when
> more then 3 parameters are passed to STR() so the version I committed
> gives the same results as in xHarbour for code like:
>     ? str(1,2,3,.t.)
> I do not like this STR() extension so I do not want to fix side  
> effects
> which exists in xHarbour implementation.

Okey, I stand corrected. I see the point, but the extension looks
even more strange this way :)

HB_NUMTOSTR( <n> ) -> <c> would be some much leaner.

Brgds,
Viktor

From druzus at priv.onet.pl  Wed Jul 18 22:16:56 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul 18 22:17:32 2007
Subject: [Harbour] ChangeLog 2007-07-19 04:15 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070719021656.GA22710@localhost.localdomain>

2007-07-19 04:15 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hb_io.h
    + added #include <dos.h> for DOS builds

  * harbour/source/rtl/gttone.c
    + #include <conio.h> for WATCOM builds

  * harbour/config/w32/watcom.cf
    * cleanup

  + harbour/config/w32/owatcom.cf
    + added OpenWatcom support

  * harbour/contrib/libct/files.c
    * rewritten FILESEEK(), FILESIZE(), FILEATTR(), FILETIME(), FILEDATE()
      now they should work on all supported platforms
    + added FILESMAX() for POSIX systems
    * added FILEDELETE() - It's Phil Krylov code from xHarbour modified
      to be MT safe
    * indenting, cleanup and some minor fixes

best regards,
Przemek
From soporte at dsgsoftware.com  Thu Jul 19 04:59:30 2007
From: soporte at dsgsoftware.com (=?iso-8859-2?Q?Juan_G=E1lvez?=)
Date: Thu Jul 19 05:00:20 2007
Subject: [Harbour] ChangeLog 2007-07-19 04:15 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20070719021656.GA22710@localhost.localdomain>
Message-ID: <005a01c7c9e3$25cd9e20$1700000a@PcJuanxp>

Hi Przemek,

>  * harbour/contrib/libct/files.c
>    * rewritten FILESEEK(), FILESIZE(), FILEATTR(), FILETIME(), FILEDATE()
>      now they should work on all supported platforms
>    + added FILESMAX() for POSIX systems
>    * added FILEDELETE() - It's Phil Krylov code from xHarbour modified
>      to be MT safe
>    * indenting, cleanup and some minor fixes

Many thanks :)

I'm sorry but when I try to compile it I get :

 bcc32 -c -I..\..\include -d -DHB_COMPAT_XHB -DHB_HASH_MSG_ITEMS -O2   -o..\..\obj\b32\files.obj
.\files.c
Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
.\files.c:
Error E2209 .\files.c 68: Unable to open include file 'ctdisk.ch'
Error E2451 .\files.c 195: Undefined symbol 'FA_READONLY' in function
HB_FUN_SETFATTR
Error E2451 .\files.c 197: Undefined symbol 'FA_HIDDEN' in function
HB_FUN_SETFATTR
Error E2451 .\files.c 199: Undefined symbol 'FA_SYSTEM' in function
HB_FUN_SETFATTR
Error E2451 .\files.c 201: Undefined symbol 'FA_NORMAL' in function
HB_FUN_SETFATTR
Warning W8004 .\files.c 213: 'iAttr' is assigned a value that is never used
in function HB_FUN_SETFATTR
*** 5 errors in Compile ***

I think you've to delete the "ctdisk.ch" include and use the HB_FA_*
defines.

Best regards
Juan

From druzus at priv.onet.pl  Thu Jul 19 05:12:59 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jul 19 05:13:35 2007
Subject: [Harbour] ChangeLog 2007-07-19 11:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070719091259.GA11181@localhost.localdomain>

2007-07-19 11:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  + harbour/contrib/libct/ctdisk.ch
    + added missing file I forgot to add in previous commit

  * harbour/contrib/libct/pos1.c
  * harbour/contrib/libct/ct.h
  * harbour/contrib/libct/posdiff.c
  * harbour/contrib/libct/range.c
  * harbour/contrib/libct/pos2.c
  * harbour/contrib/libct/print.c
    * synced with xHarbour modifications and fixes
    ! some fixes
    * indenting

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Thu Jul 19 06:37:41 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Jul 19 06:37:44 2007
Subject: [Harbour] gttrm issues
In-Reply-To: <20070718124432.GA6139@localhost.localdomain>
References: <9257026e0707150847y2a79093dk92ede4455f8fe8a8@mail.gmail.com>
	<20070718124432.GA6139@localhost.localdomain>
Message-ID: <9257026e0707190337q11f3be0ej969e8bff00635646@mail.gmail.com>

On 7/18/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> XTERM colors are not exactly the same as VGA ones but in PuTTY/PTerm
> you can define them yourself. Hit CTRL+MOUSE_RIGHT and change settings.
> In colors section chose YELLOW and set as RGB values to: 170, 85, 0
> You can find RGB values for default VGA colors in source/rtl/gtxwc/gtxwc.c

Thanks for the detailed answer and sorry if I insist but I'd really
like to use gttrm in some installations.

I've done some tests with pterm under F7 and with putty under Windows
but I still can't find the right solution.

The problem is not about the foreground but the background and only
for the "bright" ones.

In the code below under dosemu/c53b and under pterm, the "W"
background is equal to "W*" . I cannot solve it using SETRGBCOLOR().
It changes the colors but it doesn't fix the "bright background" issue.

Many thanks again.

best regards,
Lorenzo

#ifdef __HARBOUR__
#include "hbcompat.ch"
#endif

proc main

setblink(.f.)

clear

#ifdef __HARBOUR__
  @ 5, 0 say HB_GT_VERSION()
#endif

  @ 12, 6 say "text" COLOR "N+/W"
  @ 14, 6 say "text" COLOR "N/W*"

  @ 16, 6 say "text" COLOR "GR+/W"
  @ 18, 6 say "text" COLOR "W/GR*"

  wait

  return
From druzus at priv.onet.pl  Thu Jul 19 06:56:26 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jul 19 06:57:02 2007
Subject: [Harbour] gttrm issues
In-Reply-To: <9257026e0707190337q11f3be0ej969e8bff00635646@mail.gmail.com>
References: <9257026e0707150847y2a79093dk92ede4455f8fe8a8@mail.gmail.com>
	<20070718124432.GA6139@localhost.localdomain>
	<9257026e0707190337q11f3be0ej969e8bff00635646@mail.gmail.com>
Message-ID: <20070719105626.GA15213@localhost.localdomain>

On Thu, 19 Jul 2007, Lorenzo Fiorini wrote:
> The problem is not about the foreground but the background and only
> for the "bright" ones.

Because you are using in your code:
    setblink(.f.)

In terminal GT drivers like GTCRS, GTSLN, GTTRM you cannot control
blink bit behavior. It can be set only on terminal side - there is
no standard escape sequence to control it remotely. So setblink(.f.)
in these GTs only disables sending BLINK attribute. So all what you
have to do is removing setblink(.f.) from you source code.
Compile tests/gtcolors.prg and run it with and without parameter to
see the effect of using SetBlink()

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Thu Jul 19 10:10:12 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Jul 19 10:10:15 2007
Subject: [Harbour] gttrm issues
In-Reply-To: <20070719105626.GA15213@localhost.localdomain>
References: <9257026e0707150847y2a79093dk92ede4455f8fe8a8@mail.gmail.com>
	<20070718124432.GA6139@localhost.localdomain>
	<9257026e0707190337q11f3be0ej969e8bff00635646@mail.gmail.com>
	<20070719105626.GA15213@localhost.localdomain>
Message-ID: <9257026e0707190710x755ce8daxd2b1b9e5df525fea@mail.gmail.com>

On 7/19/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> Because you are using in your code:
>     setblink(.f.)

You're right that was the problem, I've always used it for C53b.

Many thanks for your patience.

best regards,
Lorenzo
From druzus at priv.onet.pl  Thu Jul 19 14:50:24 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jul 19 14:51:01 2007
Subject: [Harbour] ChangeLog 2007-07-19 18:45 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070719185023.GA27888@localhost.localdomain>

2007-07-19 18:45 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/libct/strdiff.c
  * harbour/contrib/libct/token2.c
  * harbour/contrib/libct/Makefile
  * harbour/contrib/libct/wordrepl.c
  * harbour/contrib/libct/strswap.c
  * harbour/contrib/libct/makefile.bc
  * harbour/contrib/libct/screen1.c
  * harbour/contrib/libct/token1.c
  * harbour/contrib/libct/makefile.vc
  * harbour/contrib/libct/ctwfunc.c
  * harbour/contrib/libct/relation.c
  + harbour/contrib/libct/setlast.c
  * harbour/contrib/libct/tab.c
  * harbour/contrib/libct/replace.c
  - harbour/contrib/libct/setlast.prg
  * harbour/contrib/libct/wordtoch.c
  * harbour/contrib/libct/remove.c
    * synced with xHarbour modifications and fixes
    * new functions or .prg functions rewritten in C
    ! some fixes
    * indenting

best regards,
Przemek
From druzus at priv.onet.pl  Thu Jul 19 14:58:40 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jul 19 14:59:16 2007
Subject: [Harbour] ChangeLog 2007-07-19 20:50 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070719185840.GB27888@localhost.localdomain>

2007-07-19 20:50 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/libct/Makefile
  + harbour/contrib/libct/maxline.c
  + harbour/contrib/libct/lton.c
  + harbour/contrib/libct/pack.c
  * harbour/contrib/libct/color.c
  * harbour/contrib/libct/makefile.bc
  * harbour/contrib/libct/screen1.c
  - harbour/contrib/libct/screen2.prg
  * harbour/contrib/libct/makefile.vc
  * harbour/source/rtl/gtapi.c
    * synced with xHarbour modifications and fixes
    * new functions or .prg functions rewritten in C
    ! some fixes
    * indenting

Now all CT3 files in Harbour repository are updated.
There are still few files in xHarbour CVS with new functions
not ported to Harbour yet but it's mostly .prg code which have
to be check if it does not use xHarbour extensions. Also in some
cases the functions should be rewritten because they are not
working as they should. I'll port them or implement in C in some
spare time.

best regards,
Przemek
From makis1970 at gmail.com  Thu Jul 19 15:05:51 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Thu Jul 19 15:10:48 2007
Subject: [Harbour] Przemek is there any possibility in the future to support
	Clipper 5.3 compatible optimized filters in harbour?
Message-ID: <000501c7ca37$d4ab0be0$7e0123a0$@com>

Przemek is there any possibility in the future to support Clipper 5.3
compatible optimized  filters in harbour?

 

Thanks in advance

Mike Evans

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070719/0e47fdfc/attachment.html
From druzus at priv.onet.pl  Thu Jul 19 15:43:36 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jul 19 15:44:10 2007
Subject: [Harbour] Visual FoxPro incompatibility
In-Reply-To: <00e901c7c793$d50b0e60$ca64fea9@emag>
References: <00e901c7c793$d50b0e60$ca64fea9@emag>
Message-ID: <20070719194336.GA6071@localhost.localdomain>

On Mon, 16 Jul 2007, Enrico Maria Giordano wrote:
> The following sample:
[...]
> gives:
> keyLen=70
> parent=2800, iKey=0, rec=88
> child=1400, iKey=26, rec=88
> parent val=[ajvbrwwj?YVV?????????????VX?V^?XVV[]
> child 
> val=[ajvbrwwj?YVV?????????????VX?V^?XVV[                                   ]
> Unrecoverable error 9201: hb_cdxPageSeekKey: wrong parent key.
> Called from DBSKIP(0)
> Please not that ARTSTOCS.DBF and ARTSTOCS.CDX are from Visual FoxPro.
> I can send DBF and CDX if you want.

It's not necessary. This CDX file uses Windows unicode collation function
to hash index keys. The index key size is twice longer and is unreadable
(check ordKeyVal()). Such indexes can be created and used only in Windows
because MS haven't documented the collation algorithm and as usual it's not
compatible with Unicode standards. So I decided to not add support for such
indexes. If you need to use them in [x]Harbour then you can hack DBFCDX and
hash index keys with this function but it will work only in W32 - such
modifications should not take more then few lines.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Thu Jul 19 17:37:22 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Thu Jul 19 17:37:57 2007
Subject: [Harbour] Visual FoxPro incompatibility
References: <00e901c7c793$d50b0e60$ca64fea9@emag>
	<20070719194336.GA6071@localhost.localdomain>
Message-ID: <001701c7ca4c$fdd023b0$ca64fea9@emag>


----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Thursday, July 19, 2007 9:43 PM
Subject: Re: [Harbour] Visual FoxPro incompatibility


> It's not necessary. This CDX file uses Windows unicode collation function
> to hash index keys. The index key size is twice longer and is unreadable
> (check ordKeyVal()). Such indexes can be created and used only in Windows
> because MS haven't documented the collation algorithm and as usual it's 
> not
> compatible with Unicode standards. So I decided to not add support for 
> such
> indexes. If you need to use them in [x]Harbour then you can hack DBFCDX 
> and
> hash index keys with this function but it will work only in W32 - such
> modifications should not take more then few lines.

Ok, thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From miguelangel at marchuet.net  Fri Jul 20 03:57:17 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Fri Jul 20 04:01:04 2007
Subject: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070718202338.GA30894@localhost.localdomain>
References: <20070718193109.GC29752@localhost.localdomain>	<32C4589B-176D-4F75-BB01-BCBC24B1894A@syenar.hu>
	<20070718202338.GA30894@localhost.localdomain>
Message-ID: <46A06ADD.1040205@marchuet.net>

Przemyslaw Czerpak escribi?:
> On Wed, 18 Jul 2007, Szak?ts Viktor wrote:
>>>  * harbour/include/hbcompat.ch
>>>    + added translation rule for str(<x>,,,.t.)
>> Just one comment, I think this should be:
>> #xtranslate str(<x>,[<y>],[<k>],<z>)=> iif(<z>, ltrim(str(<x>, <y>,  
>> <k>)), str(<x>, <y>, <k>))
> 
> I know that it's ugly but xHarbour ignores 2-nd and 3-rd parameter when
> more then 3 parameters are passed to STR() so the version I committed
> gives the same results as in xHarbour for code like:
>     ? str(1,2,3,.t.)
> I do not like this STR() extension so I do not want to fix side effects
> which exists in xHarbour implementation.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

I fix it in xharbour

2007-07-20 09:49 UTC+0100 Miguel Angel Marchuet <miguelangel/at/marchuet.net>
  * source/rtl/str.c
    !fix bug in Str( <nNumber>, [<nLength>], [<nDecimals>], [<lTrim>] ), it ignored 2nd and 3rd parameter
     when the 4th exists. No uses always 2nd and 3rd parameter, too with [<ltrim>] parameter.

If you need to change any thing at hbcompat.ch ...


Best regards,
Miguel Angel Marchuet
From druzus at priv.onet.pl  Fri Jul 20 06:11:07 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jul 20 06:11:43 2007
Subject: [Harbour] harbour can support full unicode ?
In-Reply-To: <469E7CCA.9090507@kevincarmody.com>
References: <20070718094221.BA0E.SSBBS@mail.zzz.com.tw>
	<469DF3A6.5000205@kevincarmody.com>
	<20070718232109.DF74.SSBBS@mail.zzz.com.tw>
	<469E7CCA.9090507@kevincarmody.com>
Message-ID: <20070720101107.GA18727@localhost.localdomain>

On Wed, 18 Jul 2007, Kevin Carmody wrote:
> There are some Harbour developers who plan to add Unicode string
> support. Would one of those developers please tell us what the current
> status of this project is?

I added some functions to manage Unicode data in [x]Harbour core code
because I needed them for some GT drivers but I do not plan to add
special string item type to HVM in the nearest future though it's possible
and can be done in similar way to HB_IT_MEMOFLAG, f.e. HB_IT_UTF8 or
with some other representation though here we will have problem, f.e.
as usual MS reinvented the wheel and for U16 MS-WIndows uses little endian
when rest of world use big endian so we will have serious problem in
portable representation.

best regards,
Przemek
From ssbbs at mail.zzz.com.tw  Fri Jul 20 08:08:27 2007
From: ssbbs at mail.zzz.com.tw ({TE(WenSheng))
Date: Fri Jul 20 08:07:55 2007
Subject: [Harbour] harbour can support full unicode ?
In-Reply-To: <20070720101107.GA18727@localhost.localdomain>
References: <469E7CCA.9090507@kevincarmody.com>
	<20070720101107.GA18727@localhost.localdomain>
Message-ID: <20070720200438.2E5C.SSBBS@mail.zzz.com.tw>

> > There are some Harbour developers who plan to add Unicode string
> > support. Would one of those developers please tell us what the current
> > status of this project is?
> 
> I added some functions to manage Unicode data in [x]Harbour core code
> because I needed them for some GT drivers but I do not plan to add
> special string item type to HVM in the nearest future though it's possible
> and can be done in similar way to HB_IT_MEMOFLAG, f.e. HB_IT_UTF8 or
> with some other representation though here we will have problem, f.e.
> as usual MS reinvented the wheel and for U16 MS-WIndows uses little endian
> when rest of world use big endian so we will have serious problem in
> portable representation.
> 

Thank your answer.
Now We can positively understand [x]harbour can't support until 2008.
We will abandon [x]harbour for other program language.

Thank [x]harbour.

From druzus at priv.onet.pl  Fri Jul 20 10:29:50 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jul 20 10:30:27 2007
Subject: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <46A06ADD.1040205@marchuet.net>
References: <20070718193109.GC29752@localhost.localdomain>
	<32C4589B-176D-4F75-BB01-BCBC24B1894A@syenar.hu>
	<20070718202338.GA30894@localhost.localdomain>
	<46A06ADD.1040205@marchuet.net>
Message-ID: <20070720142950.GA26373@localhost.localdomain>

On Fri, 20 Jul 2007, Miguel Angel Marchuet wrote:
> > I know that it's ugly but xHarbour ignores 2-nd and 3-rd parameter when
> > more then 3 parameters are passed to STR() so the version I committed
> > gives the same results as in xHarbour for code like:
> >     ? str(1,2,3,.t.)
> > I do not like this STR() extension so I do not want to fix side effects
> > which exists in xHarbour implementation.
> I fix it in xharbour
> 2007-07-20 09:49 UTC+0100 Miguel Angel Marchuet <miguelangel/at/marchuet.net>
>   * source/rtl/str.c
>     !fix bug in Str( <nNumber>, [<nLength>], [<nDecimals>], [<lTrim>] ), it ignored 2nd and 3rd parameter
>      when the 4th exists. No uses always 2nd and 3rd parameter, too with [<ltrim>] parameter.
> If you need to change any thing at hbcompat.ch ...

Miguel I do not think it's good idea. Just to clarify my position.
Many [x]Harbour users still uses Clipper or other xbase compilers.
They have code which have to be portable. They are not able to overload
standard library functions in other languages so they cannot use xHarbour
extension implemented inside STR(), AT(), AINS(), ADEL(), etc. Keeping
original functions clean and adding new ones allows to add their
implementation also to other languages and still keep code portable.
In pure code some preprocessor rules can resolve the problem but it will
not help when macro compiler has to be used explicitly or indirectly
(f.e. for index expressions). When extensions are in new functions I can
implement them in other languages too and keep code portable.
Now if someone create index like:
    SET INDEX ON FLD1 + padl( str( FLD2,,,.t. ), 10, "#" ) TO idx1
then such index cannot be used in any other xbase language. It also
introduce additional problems with documentation, f.e. ADS supports
STR() but it does not support 4-th parameter in this function so
simple documentation about supported functions stops to be enough
and users have to check details in implementation.
Now returning to hbcompat.ch. We have this file to be compatible with
xHarbour. Your recent modification causes that code which passed
some wrong parameters to str(...,.t.) will stop to work and we have a
problem.
Should we keep current definition in hbcompat.ch so code like:
    str(1,2,3,.t.)
will work like in yesterday and older xHarbour versions or should we
change it so the code will return "**" like in todays CVS?

best regards,
Przemek
From ptucker at sympatico.ca  Fri Jul 20 11:01:36 2007
From: ptucker at sympatico.ca (Paul Tucker)
Date: Fri Jul 20 11:01:40 2007
Subject: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20070718193109.GC29752@localhost.localdomain><32C4589B-176D-4F75-BB01-BCBC24B1894A@syenar.hu><20070718202338.GA30894@localhost.localdomain><46A06ADD.1040205@marchuet.net>
	<20070720142950.GA26373@localhost.localdomain>
Message-ID: <005d01c7cade$de4235a0$b000a8c0@PAUL>

 PC> [...] it will not help when macro compiler has to be used explicitly or
 PC> indirectly (f.e. for index expressions). When extensions are in new
 PC> functions I can implement them in other languages too and keep code
 PC> portable. Now if someone create index like:
 PC>     SET INDEX ON FLD1 + padl( str( FLD2,,,.t. ), 10, "#" ) TO idx1
 PC> then such index cannot be used in any other xbase language.

Not to point out the obvious or anything, but your compromise of putting 
this in hbcompat won't help in the above situation if someone has created 
this index in xHarbour and wishes (for some reason) to use a harbour app at 
the same time.

Paul 

From miguelangel at marchuet.net  Fri Jul 20 11:11:53 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Fri Jul 20 11:15:45 2007
Subject: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070720142950.GA26373@localhost.localdomain>
References: <20070718193109.GC29752@localhost.localdomain>	<32C4589B-176D-4F75-BB01-BCBC24B1894A@syenar.hu>	<20070718202338.GA30894@localhost.localdomain>	<46A06ADD.1040205@marchuet.net>
	<20070720142950.GA26373@localhost.localdomain>
Message-ID: <46A0D0B9.9080204@marchuet.net>

> Should we keep current definition in hbcompat.ch so code like:
>     str(1,2,3,.t.)
> will work like in yesterday and older xHarbour versions or should we
> change it so the code will return "**" like in todays CVS?


Yes now return "**". I thing now is really backward compatible with other
compilers as Clipper. 2nd and 3rd parameter has effect always.

It's a good idea that PP change LTrim( Str( ... ) ) => Str(...,.T.) in xHarbour.

as

Str(...,.T.) => LTrim( Str( ... ) )in Harbour.

but

Is possible to solve it where is a macro expression loaded from file ?


In other side, the use of extensions in all compilers is responsabilitie of analist
programer. A lot of compilers have its own extensions, Borland, Microsoft, and others.

For example DbCreate in Visual FoxPro. Why overload compiler with 2 functions when 1
can be backward compatible. But in other cases when it is not posible. Then I'm agree
to create a new function with new functionalitie.

If harbour implement de 4th parameter, all the code of xharbour can be compiled with
harbour, and finally we have only one compiler to work.

	
I prefer that we unite the projects [x] harbour in one single one, to take advantage
of better the efforts all.

and if it happens to add parameters that do not break the compatibility and that in
addition improve the speed of the code. Then better that better.

;)

Best regards,
Miguel Angel Marchuet
From druzus at priv.onet.pl  Fri Jul 20 11:41:24 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jul 20 11:42:00 2007
Subject: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <005d01c7cade$de4235a0$b000a8c0@PAUL>
References: <20070720142950.GA26373@localhost.localdomain>
	<005d01c7cade$de4235a0$b000a8c0@PAUL>
Message-ID: <20070720154124.GA26901@localhost.localdomain>

On Fri, 20 Jul 2007, Paul Tucker wrote:
> PC> [...] it will not help when macro compiler has to be used explicitly or
> PC> indirectly (f.e. for index expressions). When extensions are in new
> PC> functions I can implement them in other languages too and keep code
> PC> portable. Now if someone create index like:
> PC>     SET INDEX ON FLD1 + padl( str( FLD2,,,.t. ), 10, "#" ) TO idx1
> PC> then such index cannot be used in any other xbase language.
> 
> Not to point out the obvious or anything, but your compromise of putting 
> this in hbcompat won't help in the above situation if someone has created 
> this index in xHarbour and wishes (for some reason) to use a harbour app at 
> the same time.

This part of my message was about hacking standard xbase functions and
it has nothing to hbcompat.ch.
The last sentence was about hbcompat.ch.

best regards,
Przemek
From mpaliwoda at interia.pl  Fri Jul 20 11:46:35 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Jul 20 11:46:50 2007
Subject: [Harbour] ChangeLog 2007-07-14 22:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070716062943.50CFB4B3241@poczta.interia.pl>
References: <20070716062943.50CFB4B3241@poczta.interia.pl>
Message-ID: <46A0D8DB.9000306@interia.pl>

Hi Victor,

>> Would you mind if I'd change HB to HB_HARBOUR_EXE and
>> PPGEN to HB_PPGEN_EXE? (to keep us consistent with
>> the HB_ prefixes for external envvars)
> 
> Of course NOT ! :) I have "a habit" to use "short names" and
> I often forget about our convention (which I *fully* support
> btw). Thanks for your attention and sorry for an inconvenience. 

I have not reviewed your changes in makefile.bc, makefile.vc and
common.mak so far, assuming you have only changed variables names
:).

Today I have downloaded a fresh SVN copy and I've found that you
have effectivly removed a fix for cross-compilation :). Current
makefiles are no different than before my fix unfortunately. I
know it was not your intention :).

What is worst, I do not have a version I commited to SVN here to
restore it to a proper state, and I don't know how to get an SVN
version from a particular date, so I would like to ask you to
revert your fix - I would really appreciate it :).

I am working for makefile.gc ( for gcc ) which uses common.mak as
a base, and a fix for cross-compiling is very usefull during this
work.

BTW, Looking at your proposed variable names I tend to think
that $(HB) is much much better than $(HB_HARBOUR_EXE) *in this
particular* case because it is *very similar* to standard $(CC)
variable in its behavior. It points to a harbour compiler used
(NOT BUILT !).
The same applies to $(PPGEN). $(HB_PPGEN_EXE) suggests it is
built during make process, while $(PPGEN) simply points to
ppgen executable used (NOT BUILT !).

Note that "used != BUILT" :)

-- 

Marek

----------------------------------------------------------------------
Inspiruj?ca nagosc 
Zobacz >>> http://link.interia.pl/f1ade


From harbour.01 at syenar.hu  Fri Jul 20 12:29:31 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul 20 12:30:10 2007
Subject: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <005d01c7cade$de4235a0$b000a8c0@PAUL>
References: <20070718193109.GC29752@localhost.localdomain><32C4589B-176D-4F75-BB01-BCBC24B1894A@syenar.hu><20070718202338.GA30894@localhost.localdomain><46A06ADD.1040205@marchuet.net>
	<20070720142950.GA26373@localhost.localdomain>
	<005d01c7cade$de4235a0$b000a8c0@PAUL>
Message-ID: <CE0492C2-D4AF-4E5D-9A21-32CF233800F4@syenar.hu>

Hi Paul,

(Nice to see you here :)

hbcompat.ch is at best a workaround to cover most cases, but
it indeed won't help in such situations.

This is exactly why this kind of extension is more than dangerous
by creating a lock-in type of effect for xhb users, making incompatible
and hard to fix code, indexes, macros and creating more support
problems and confusion etc, etc.

At the end of the day this will distract users and the whole Clipper/ 
Harbour
userbase and community loses.

We need to take care of Clipper as a language to avoid these
kind of problems. This is something all developers adding
extensions should be aware of (in every flavour and incarnation
of Clipper compilers - Harbour and xhb included).

These kind of problems are easy to create, also easy to avoid,
but very hard (if possible at all) to fix after the extension gained
significant use in real-world code.

Also notice that the lock-in effect (intentionally added or not) is
good for businesses, but it's very much against the spirit and
interest of FOSS software. So it's best to extend wisely, follow
quasi-standards.

Well, this post is rather addressed to the topic, and for the most
part not to you personally :)

Brgds,
Viktor

On 2007.07.20., at 17:01, Paul Tucker wrote:

> PC> [...] it will not help when macro compiler has to be used  
> explicitly or
> PC> indirectly (f.e. for index expressions). When extensions are in  
> new
> PC> functions I can implement them in other languages too and keep  
> code
> PC> portable. Now if someone create index like:
> PC>     SET INDEX ON FLD1 + padl( str( FLD2,,,.t. ), 10, "#" ) TO idx1
> PC> then such index cannot be used in any other xbase language.
>
> Not to point out the obvious or anything, but your compromise of  
> putting this in hbcompat won't help in the above situation if  
> someone has created this index in xHarbour and wishes (for some  
> reason) to use a harbour app at the same time.
>
> Paul
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Fri Jul 20 12:40:29 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jul 20 12:41:05 2007
Subject: [Harbour] ChangeLog 2007-07-20 18:40 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070720164029.GA27742@localhost.localdomain>

2007-07-20 18:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/libct/Makefile
  * harbour/contrib/libct/makefile.bc
  * harbour/contrib/libct/makefile.vc
  + harbour/contrib/libct/ctvideo.ch
  + harbour/contrib/libct/video.c
   + added CHARPIX(), VGAPALETTE(), VIDEOTYPE(), SETFONT()
     code by Phil Krylov borrowed from xHarbour
  + harbour/contrib/libct/dattime3.c
   + added WAITPERIOD(), TIMEVALID(), SETTIME(), SETDATE()

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Jul 20 12:44:31 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul 20 12:44:34 2007
Subject: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <46A0D0B9.9080204@marchuet.net>
References: <20070718193109.GC29752@localhost.localdomain>	<32C4589B-176D-4F75-BB01-BCBC24B1894A@syenar.hu>	<20070718202338.GA30894@localhost.localdomain>	<46A06ADD.1040205@marchuet.net>
	<20070720142950.GA26373@localhost.localdomain>
	<46A0D0B9.9080204@marchuet.net>
Message-ID: <442B5FCB-51AC-4C42-A150-5FC6CC3D5289@syenar.hu>

Hi Miguel,

> In other side, the use of extensions in all compilers is  
> responsabilitie of analist
> programer. A lot of compilers have its own extensions, Borland,  
> Microsoft, and others.

Yes, and that's why it's so extremely tedious to develop in a cross- 
platform
way in C.

Just take a look at our filesystem code or our .h files. Or take a  
look at autoconf.

I don't think we should replicate that...

> If harbour implement de 4th parameter, all the code of xharbour can  
> be compiled with
> harbour, and finally we have only one compiler to work.

I prefer not to replicate problematic extensions here just because  
xhb already did it.
(I hope I'm not alone)

But most importantly XBase++, FlagShip, CA-Clipper (!) is unlikely to  
add
support for the 4th parameter, so even if your code would cross  
compile between
Harbour and xhb, it would _never_ cross compile with - say - CA-Clipper.

> I prefer that we unite the projects [x] harbour in one single one,  
> to take advantage
> of better the efforts all.
>
> and if it happens to add parameters that do not break the  
> compatibility and that in
> addition improve the speed of the code. Then better that better.

The problem is that it creates cross-portability problems and does break
compatibility.

This actual extension can be done more effectively - faster and  
simpler -
using a separate function.

I don't know about Visual FoxPro which is a commercial product actually
(sortof) developed (and now killed) by Microsoft - who is not exactly
famous of extending wisely, and who has the lock-in strategy on its top
priority list -, but we can surely not fix those problem, what we can  
do is
not creating new ones over here.

As a reminder, in Harbour the main goal is to be CA-Cl*pper 5.2e, all
the rest is extra. So if there is a strange Visual FoxPro extension, we
might simply don't care.

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Jul 20 12:50:33 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul 20 12:50:38 2007
Subject: [Harbour] ChangeLog 2007-07-14 22:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <46A0D8DB.9000306@interia.pl>
References: <20070716062943.50CFB4B3241@poczta.interia.pl>
	<46A0D8DB.9000306@interia.pl>
Message-ID: <51EDD85B-93BB-4C38-9095-DDA1BAD2D52C@syenar.hu>

Hi Marek,

Yes indeed, it was not intentional. A bit too much things to do  
rather :)
I see your point and I apologize!

I can revert the whole thing I did, no problem, and we can fix that
later again or just leave it (but the redundancy I've removed was
valid, is it? and PPGEN should get an HB_ prefix probably).

I'm right now in the basement and my flat fully unusable due to
some heavy repair work. I hope my development PC will be able to
start in a few days (Monday I hope) and I can deal with this.

Until then you can use the SVN web browser to get the previous
versions and recommit, if you would :)

Brgds,
Viktor

On 2007.07.20., at 17:46, Marek Paliwoda wrote:

> Hi Victor,
>
>>> Would you mind if I'd change HB to HB_HARBOUR_EXE and
>>> PPGEN to HB_PPGEN_EXE? (to keep us consistent with
>>> the HB_ prefixes for external envvars)
>> Of course NOT ! :) I have "a habit" to use "short names" and
>> I often forget about our convention (which I *fully* support
>> btw). Thanks for your attention and sorry for an inconvenience.
>
> I have not reviewed your changes in makefile.bc, makefile.vc and
> common.mak so far, assuming you have only changed variables names
> :).
>
> Today I have downloaded a fresh SVN copy and I've found that you
> have effectivly removed a fix for cross-compilation :). Current
> makefiles are no different than before my fix unfortunately. I
> know it was not your intention :).
>
> What is worst, I do not have a version I commited to SVN here to
> restore it to a proper state, and I don't know how to get an SVN
> version from a particular date, so I would like to ask you to
> revert your fix - I would really appreciate it :).
>
> I am working for makefile.gc ( for gcc ) which uses common.mak as
> a base, and a fix for cross-compiling is very usefull during this
> work.
>
> BTW, Looking at your proposed variable names I tend to think
> that $(HB) is much much better than $(HB_HARBOUR_EXE) *in this
> particular* case because it is *very similar* to standard $(CC)
> variable in its behavior. It points to a harbour compiler used
> (NOT BUILT !).
> The same applies to $(PPGEN). $(HB_PPGEN_EXE) suggests it is
> built during make process, while $(PPGEN) simply points to
> ppgen executable used (NOT BUILT !).
>
> Note that "used != BUILT" :)
>
> -- 
>
> Marek
>
> ----------------------------------------------------------------------
> Inspiruj?ca nagosc Zobacz >>> http://link.interia.pl/f1ade
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mpaliwoda at interia.pl  Fri Jul 20 13:06:26 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Jul 20 13:06:36 2007
Subject: [Harbour] ChangeLog 2007-07-14 22:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <51EDD85B-93BB-4C38-9095-DDA1BAD2D52C@syenar.hu>
References: <20070716062943.50CFB4B3241@poczta.interia.pl>	<46A0D8DB.9000306@interia.pl>
	<51EDD85B-93BB-4C38-9095-DDA1BAD2D52C@syenar.hu>
Message-ID: <46A0EB92.3090302@interia.pl>

Viktor,

> Yes indeed, it was not intentional. A bit too much things to do rather :)
> I see your point and I apologize!

No prob :)

> I can revert the whole thing I did, no problem, and we can fix that
> later again or just leave it (but the redundancy I've removed was
> valid, is it? and PPGEN should get an HB_ prefix probably).

Yes, I agree.

> I'm right now in the basement and my flat fully unusable due to
> some heavy repair work. I hope my development PC will be able to
> start in a few days (Monday I hope) and I can deal with this.

:)

> Until then you can use the SVN web browser to get the previous
> versions and recommit, if you would :)

Nice trick. Thanks !

-- 

Marek


----------------------------------------------------------------------
O Twoich stronach juz si? m?wi...
Na >>> http://link.interia.pl/f1ad3



From mbelgrano at deltain.it  Fri Jul 20 13:26:38 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Jul 20 13:30:15 2007
Subject: R: [Harbour] harbour can support full unicode ?
In-Reply-To: <20070720200438.2E5C.SSBBS@mail.zzz.com.tw>
References: <469E7CCA.9090507@kevincarmody.com><20070720101107.GA18727@localhost.localdomain>
	<20070720200438.2E5C.SSBBS@mail.zzz.com.tw>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A7AE@SRV02.deltain.net>

I have read about a lib in xharbour named Unicode is a Lib to translate codepages. Author: Andi Jahja (xharbour@cbn.net.id)

http://www.ohloh.net/projects/5446/contributors/32676


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di ????????(WenSheng)
Inviato: venerd? 20 luglio 2007 14.08
A: Harbour Project Main Developer List.
Oggetto: Re: [Harbour] harbour can support full unicode ?

> > There are some Harbour developers who plan to add Unicode string
> > support. Would one of those developers please tell us what the current
> > status of this project is?
> 
> I added some functions to manage Unicode data in [x]Harbour core code
> because I needed them for some GT drivers but I do not plan to add
> special string item type to HVM in the nearest future though it's possible
> and can be done in similar way to HB_IT_MEMOFLAG, f.e. HB_IT_UTF8 or
> with some other representation though here we will have problem, f.e.
> as usual MS reinvented the wheel and for U16 MS-WIndows uses little endian
> when rest of world use big endian so we will have serious problem in
> portable representation.
> 

Thank your answer.
Now We can positively understand [x]harbour can't support until 2008.
We will abandon [x]harbour for other program language.

Thank [x]harbour.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From xbaseuser at gmail.com  Fri Jul 20 14:46:29 2007
From: xbaseuser at gmail.com (xbase user)
Date: Fri Jul 20 14:46:36 2007
Subject: [Harbour] xHarbour Extensions
Message-ID: <6f88af850707201146w27a260ch409cc2d1773e1965@mail.gmail.com>

 Hi Viktor,

It's quite amazing that you don't want to add this extension when you have
agreed to add
So many incompatible Clipper extensions from xHarbour, like FOR EACH,
HASHES, etc...

Harbour is far away from being a Clipper compatible compiler, after adding
so many xHarbour
Extensions.

Today Harbour-Project contains LOTS of code that can't be compiled with
Clipper neither
with xBase++ and FlagShip (\Contrib\TIP).

Finally what it the real meaning of a Harbour and xHarbour Project, as two
different projects
When they offer the same ?

Regards,

a Clippper-Harbour User
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070720/b65aa8c8/attachment.html
From gerrylist at drouillard.ca  Fri Jul 20 17:35:21 2007
From: gerrylist at drouillard.ca (Gerald Drouillard)
Date: Fri Jul 20 17:36:04 2007
Subject: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <442B5FCB-51AC-4C42-A150-5FC6CC3D5289@syenar.hu>
References: <20070718193109.GC29752@localhost.localdomain>	<32C4589B-176D-4F75-BB01-BCBC24B1894A@syenar.hu>	<20070718202338.GA30894@localhost.localdomain>	<46A06ADD.1040205@marchuet.net>	<20070720142950.GA26373@localhost.localdomain>	<46A0D0B9.9080204@marchuet.net>
	<442B5FCB-51AC-4C42-A150-5FC6CC3D5289@syenar.hu>
Message-ID: <46A12A99.5000806@drouillard.ca>

>> If harbour implement de 4th parameter, all the code of xharbour can be 
>> compiled with
>> harbour, and finally we have only one compiler to work.
> 
> I prefer not to replicate problematic extensions here just because xhb 
> already did it.
> (I hope I'm not alone)
> 
> But most importantly XBase++, FlagShip, CA-Clipper (!) is unlikely to add
> support for the 4th parameter, so even if your code would cross compile 
> between
> Harbour and xhb, it would _never_ cross compile with - say - CA-Clipper.

Who is writing new code for clipper?  Honestly, do you want to write new 
code that you will want to compile with all those others?  Compiling 
your "old" CA-Clipper code is the bases of compatibility, but that does 
not mean you cannot enhance the language as long as you can still 
compile the "old" code.

In a way it is kind of sad to see the duplication of effort in xharbour 
and harbour.  Such tremendous talent in each project all working for the 
same goal in their own threads.
-- 
Regards
--------------------------------------
Gerald Drouillard

From wangshuming01 at gmail.com  Fri Jul 20 21:42:02 2007
From: wangshuming01 at gmail.com (wang shuming)
Date: Fri Jul 20 21:42:05 2007
Subject: [Harbour] Harbour] harbour can support full unicode ?
Message-ID: <c26b21640707201842i1bf54d46g8b92a0ea366c10bc@mail.gmail.com>

Hi,
  Harbour support  unicode is a must ,we face more and more problems as time
goes on.
  Expect harbour will be solved the unicode in a short term.
Thanks Harbour Team!
Shuming Wang
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070721/4dfb1f9b/attachment.html
From harbour.01 at syenar.hu  Sat Jul 21 01:29:29 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Jul 21 01:29:33 2007
Subject: [Harbour] xHarbour Extensions
In-Reply-To: <6f88af850707201146w27a260ch409cc2d1773e1965@mail.gmail.com>
References: <6f88af850707201146w27a260ch409cc2d1773e1965@mail.gmail.com>
Message-ID: <47C87EF7-977A-42B3-875A-759E0399A834@syenar.hu>

Good morning, first anonymous poster in Harbour list's history.

> It's quite amazing that you don't want to add this extension when  
> you have agreed to add
> So many incompatible Clipper extensions from xHarbour, like FOR  
> EACH, HASHES, etc...

Pls. read my past e-mails regarding my and other opinions
on these.

Harbour is not meant to cut the possibility of all extension,
but we tend to welcome those which are properly thought
out and properly implemented. We also have a few rules
to take care of, and this hasn't changed since the beginning.

If the group finds something valuable to implement or
to develop (sometimes on xhb user's request) and the
idea survives the discussion state, chances are good
that it will be included.

> Harbour is far away from being a Clipper compatible compiler, after  
> adding so many xHarbour
> Extensions.
>
> Today Harbour-Project contains LOTS of code that can't be compiled  
> with Clipper neither
> with xBase++ and FlagShip (\Contrib\TIP).

See above.

> Finally what it the real meaning of a Harbour and xHarbour Project,  
> as two different projects
> When they offer the same ?

You'd probably have to ask those who created xharbour (and/or
you should read our message archive to find out). This is my final
word on this topic in general here, as I don't have the energy to go
with flame wars.

If you have some technicals to add on the STR() extension topic though,
you're welcome to uncover them.

Brgds,
Viktor

From philb at philb.us  Sat Jul 21 01:42:05 2007
From: philb at philb.us (Phil Barnett)
Date: Sat Jul 21 01:42:55 2007
Subject: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <46A12A99.5000806@drouillard.ca>
References: <20070718193109.GC29752@localhost.localdomain>
	<442B5FCB-51AC-4C42-A150-5FC6CC3D5289@syenar.hu>
	<46A12A99.5000806@drouillard.ca>
Message-ID: <200707210142.05240.philb@philb.us>

On Friday 20 July 2007, Gerald Drouillard wrote:
> In a way it is kind of sad to see the duplication of effort in xharbour
> and harbour. ?Such tremendous talent in each project all working for the
> same goal in their own threads.

Actually the reason for the split was because we did not have the same goals.

xHarbour attempted to leave many legacy compatibility point behind in an 
effort to modernize the language.

Harbour remained true to the original language spec.

That was the primary difference, other than personality conflicts.

-- 
Phil Barnett
AI4OF
SKCC #600
From gerrylist at drouillard.ca  Sat Jul 21 11:05:29 2007
From: gerrylist at drouillard.ca (Gerald Drouillard)
Date: Sat Jul 21 11:06:08 2007
Subject: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <200707210142.05240.philb@philb.us>
References: <20070718193109.GC29752@localhost.localdomain>	<442B5FCB-51AC-4C42-A150-5FC6CC3D5289@syenar.hu>	<46A12A99.5000806@drouillard.ca>
	<200707210142.05240.philb@philb.us>
Message-ID: <46A220B9.9020004@drouillard.ca>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070721/c2f4f196/attachment.html
From antonioharbour at gmail.com  Sat Jul 21 11:09:35 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sat Jul 21 11:10:00 2007
Subject: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <46A220B9.9020004@drouillard.ca>
Message-ID: <46a221c3.1d01420a.6996.ffffdf35@mx.google.com>

> IMO, it was and still is the personalities.

Agreed

Regards,

Antonio


From niki at synel.co.il  Sun Jul 22 01:19:54 2007
From: niki at synel.co.il (Chen Kedem)
Date: Sun Jul 22 01:19:07 2007
Subject: [Harbour] xHarbour Extensions
Message-ID: <46A2E8FA.1490@synel.co.il>

User,

> It's quite amazing that you don't want to add this extension when
> you have agreed to add So many incompatible Clipper extensions from
> xHarbour, like FOR EACH, HASHES, etc...

And the point is "agreed". Harbour as a project with it own goals,
can borrow from the other project parts which the team thinks will
integrate with current and future design with a strong emphasis on
compatibility to CA-Clipper 5.2e code. I am all with Viktor in this
case (well, usually with all cases). There is the language standard
as we see it (CL 5.2e) and extensions. When one want to write a
portable code, extensions should not be used. As an xHarbour user
you can choose to include such extensions in your code or not. Some
of these extensions were accepted by the Harbour team, and some were
not. Since this is an open source project, nothing is hidden, and you
have the whole source for yourself to modify and add whatever extension
is desire or necessary for your needs. You have the freedom to choose
the language path and product you work with. I don't work with xHarbour
so I don't have a base to compare, but we see more and more xHarbour
users in this group, so I guess we are doing SOMETHING right. Some
of this might be the selective choice of borrowed code.


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From mbelgrano at deltain.it  Sun Jul 22 14:21:10 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Jul 22 14:21:55 2007
Subject: [Harbour] ohloh give report about Harbour
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A7AF@SRV02.deltain.net>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 3559 bytes
Desc: image001.gif
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070722/2c99a0ab/attachment.gif
From mbelgrano at deltain.it  Sun Jul 22 14:54:37 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Jul 22 14:55:13 2007
Subject: R: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <200707210142.05240.philb@philb.us>
References: <20070718193109.GC29752@localhost.localdomain><442B5FCB-51AC-4C42-A150-5FC6CC3D5289@syenar.hu><46A12A99.5000806@drouillard.ca>
	<200707210142.05240.philb@philb.us>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A7B0@SRV02.deltain.net>

Harbour and xharbour are not different to justity the split
So the different goal will be moderated to be not very different
A compile flag can't made [X]Harbour flavor aggressive or conservative?

> In a way it is kind of sad to see the duplication of effort in
xharbour
> and harbour.  Such tremendous talent in each project all working for
the
> same goal in their own threads.
Agree and subscribe Double effort with half result

So an Unification Project will give better result
Either project must elect a people to give decision based on simplex
rules/law
1) Main developer have whenever  reason
2) If two of main developer have a different vision an alternative
vision is a must
3) A public question to [x]harbour userbase will decide most difficult
case with a simple questionarie

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] Per conto di Phil Barnett
Inviato: sabato 21 luglio 2007 7.42
A: harbour@harbour-project.org
Oggetto: Re: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw
Czerpak(druzus/at/priv.onet.pl)
Actually the reason for the split was because we did not have the same
goals.
xHarbour attempted to leave many legacy compatibility point behind in an

ffort to modernize the language.
Harbour remained true to the original language spec.
That was the primary difference, other than personality conflicts.

From jd10jd10 at yahoo.com  Sun Jul 22 21:34:40 2007
From: jd10jd10 at yahoo.com (Jack Daniels)
Date: Sun Jul 22 21:35:28 2007
Subject: R: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
Message-ID: <138518.85400.qm@web33213.mail.mud.yahoo.com>

Personally, I don't see any real issue with 2 seperate Harbour's.
As far as I can tell, none of the personalities have changed so
why tempt future issues?  I prefer Harbour to xHarbour.  In fact,
I have code that runs fine in Harbour but won't run properly in
xHarbour. Also, the commercial connection to xHarbour could
become an issue.  I like the way Harbour is being developed and
see the serious creativity coming from Przemyslaw and the other
Harbour developers.
.
As far as the committee suggestion, forget it!  The quickest way
to stifle creativity, inflate the bureaucracy and get nothing done is
to require collective agreement - just like big government - sucks!
.
xHarbour left Harbour. Go talk to them!

Just my opinion,
Jack Daniels


----- Original Message ----
From: Massimo Belgrano <mbelgrano@deltain.it>
To: Harbour Project Main Developer List. <harbour@harbour-project.org>
Sent: Sunday, July 22, 2007 1:54:37 PM
Subject: R: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw Czerpak(druzus/at/priv.onet.pl)


Harbour and xharbour are not different to justity the split
So the different goal will be moderated to be not very different
A compile flag can't made [X]Harbour flavor aggressive or conservative?

> In a way it is kind of sad to see the duplication of effort in
xharbour
> and harbour.  Such tremendous talent in each project all working for
the
> same goal in their own threads.
Agree and subscribe Double effort with half result

So an Unification Project will give better result
Either project must elect a people to give decision based on simplex
rules/law
1) Main developer have whenever  reason
2) If two of main developer have a different vision an alternative
vision is a must
3) A public question to [x]harbour userbase will decide most difficult
case with a simple questionarie

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] Per conto di Phil Barnett
Inviato: sabato 21 luglio 2007 7.42
A: harbour@harbour-project.org
Oggetto: Re: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw
Czerpak(druzus/at/priv.onet.pl)
Actually the reason for the split was because we did not have the same
goals.
xHarbour attempted to leave many legacy compatibility point behind in an

ffort to modernize the language.
Harbour remained true to the original language spec.
That was the primary difference, other than personality conflicts.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour


       
____________________________________________________________________________________
Yahoo! oneSearch: Finally, mobile search 
that gives answers, not web links. 
http://mobile.yahoo.com/mobileweb/onesearch?refer=1ONXIC
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070722/7a7cb61c/attachment.html
From devlist.harbour at gmail.com  Mon Jul 23 00:34:17 2007
From: devlist.harbour at gmail.com (Patrick Mast, xHarbour.com)
Date: Mon Jul 23 00:34:32 2007
Subject: R: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <138518.85400.qm@web33213.mail.mud.yahoo.com>
References: <138518.85400.qm@web33213.mail.mud.yahoo.com>
Message-ID: <5969F48E-454B-4A12-B0DA-9A29E6EFD8CA@GMail.com>

Hello Jack,

> Personally, I don't see any real issue with 2 seperate Harbour's.
> As far as I can tell, none of the personalities have changed so
> why tempt future issues?  I prefer Harbour to xHarbour.  In fact,
> I have code that runs fine in Harbour but won't run properly in
> xHarbour.

Can you show us some code that runs in Harbour but not in xHarbour?
Not to start a flame, just out of technical interest.

Thanks.

Patrick
From jd10jd10 at yahoo.com  Mon Jul 23 04:55:35 2007
From: jd10jd10 at yahoo.com (Jack Daniels)
Date: Mon Jul 23 04:56:09 2007
Subject: R: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
Message-ID: <560526.48390.qm@web33205.mail.mud.yahoo.com>

Hello Patrick,

There are plenty of examples in your own Newsgroups (see one below).
This code compiles just fine in Harbour and is a good example of the
quality of  Przemyslaw's code.

>From:              Patrick Mast
>Organization:   xHarbour.com Inc.
>Date:               Saturday, July 21, 2007 11:41 AM
>Newsgroups:    local.xHarbour.Builder
>Subject:           Re: Square bracket as delimiter causing error
>
>Carlo,
>
>> The following code to reproduce this problem works correctly in Clipper 
>> 5.2e but fails in RC16 - should I report this as a compatability bug in 
>> the bug reporter? Is there a workaround?
>> 
>> #translate default <x> to <y> => if <x> == NIL ; <x> := <y> ; endif
>> 
>> function main
>>    local c1, c2
>>    default c1 to ["wrong"]
>>    default c2 to '"right"'
>>    ? c1, c2
>> return nil
>
>Yes, this should be reported in the Bug Reporter at 
>http://www.xHarbour.com/BugReporter .
>
>I don't know of a workaround.
>Ron?
>--
>Sincerely,
>Patrick Mast,
>xHarbour.com Inc.
>http://www.xHarbour.com

Regards,
Jack

----- Original Message ----
From: "Patrick Mast, xHarbour.com" <devlist.harbour@gmail.com>
To: Harbour Project Main Developer List. <harbour@harbour-project.org>
Sent: Sunday, July 22, 2007 11:34:17 PM
Subject: Re: R: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw Czerpak(druzus/at/priv.onet.pl)


Hello Jack,

> Personally, I don't see any real issue with 2 seperate Harbour's.
> As far as I can tell, none of the personalities have changed so
> why tempt future issues?  I prefer Harbour to xHarbour.  In fact,
> I have code that runs fine in Harbour but won't run properly in
> xHarbour.

Can you show us some code that runs in Harbour but not in xHarbour?
Not to start a flame, just out of technical interest.

Thanks.

Patrick
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour


       
____________________________________________________________________________________
Get the Yahoo! toolbar and be alerted to new email wherever you're surfing.
http://new.toolbar.yahoo.com/toolbar/features/mail/index.php
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070723/f8b27110/attachment.html
From mbelgrano at deltain.it  Mon Jul 23 05:11:14 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Jul 23 05:14:46 2007
Subject: [Harbour] Vs [XHarbour] or a unification project
In-Reply-To: <560526.48390.qm@web33205.mail.mud.yahoo.com>
References: <560526.48390.qm@web33205.mail.mud.yahoo.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A7B6@SRV02.deltain.net>

The quality of  Przemyslaw's code is not in discussion but Also structure like http://www.xHarbour.com/BugReporter are good for coordinate project

But double effort in develop,debug,promote is not a good thing

The Unification project is so difficult?

Is not possible a flag conservative (Przemyslaw)  and another innovatite (Ron&Patric)

Is so difficult having A different mode of kernel for having either advantages

Not two product but one product to develop,debug,promote

 

 

Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Jack Daniels
Inviato: luned? 23 luglio 2007 10.56
A: Harbour Project Main Developer List.
Oggetto: Re: R: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 PrzemyslawCzerpak(druzus/at/priv.onet.pl)

 

Hello Patrick,

 

There are plenty of examples in your own Newsgroups (see one below).

This code compiles just fine in Harbour and is a good example of the

quality of  Przemyslaw's code.

 

>From:              Patrick Mast
>Organization:   xHarbour.com Inc.
>Date:               Saturday, July 21, 2007 11:41 AM
>Newsgroups:    local.xHarbour.Builder
>Subject:           Re: Square bracket as delimiter causing error
>
>Carlo,
>
>> The following code to reproduce this problem works correctly in Clipper 
>> 5.2e but fails in RC16 - should I report this as a compatability bug in 
>> the bug reporter? Is there a workaround?
>> 
>> #translate default <x> to <y> => if <x> == NIL ; <x> := <y> ; endif
>> 
>> function main
>>    local c1, c2
>>    default c1 to ["wrong"]
>>    default c2 to '"right"'
>>    ? c1, c2
>> return nil
>
>Yes, this should be reported in the Bug Reporter at 
>http://www.xHarbour.com/BugReporter .
>
>I don't know of a workaround.
>Ron?
>--
>Sincerely,
>Patrick Mast,
>xHarbour.com Inc.
>http://www.xHarbour.com

Regards,

Jack

----- Original Message ----
From: "Patrick Mast, xHarbour.com" <devlist.harbour@gmail.com>
To: Harbour Project Main Developer List. <harbour@harbour-project.org>
Sent: Sunday, July 22, 2007 11:34:17 PM
Subject: Re: R: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw Czerpak(druzus/at/priv.onet.pl)

Hello Jack,

> Personally, I don't see any real issue with 2 seperate Harbour's.
> As far as I can tell, none of the personalities have changed so
> why tempt future issues?  I prefer Harbour to xHarbour.  In fact,
> I have code that runs fine in Harbour but won't run properly in
> xHarbour.

Can you show us some code that runs in Harbour but not in xHarbour?
Not to start a flame, just out of technical interest.

Thanks.

Patrick
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

 

 

________________________________

Need a vacation? Get great deals to amazing places <http://us.rd.yahoo.com/evt=48256/*http:/travel.yahoo.com/;_ylc=X3oDMTFhN2hucjlpBF9TAzk3NDA3NTg5BHBvcwM1BHNlYwNncm91cHMEc2xrA2VtYWlsLW5jbQ--> on Yahoo! Travel. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070723/c32d6767/attachment.html
From mbelgrano at deltain.it  Mon Jul 23 05:49:11 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Jul 23 05:52:42 2007
Subject: R: [Harbour] Vs [XHarbour] or a unification project
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809A7B6@SRV02.deltain.net>
References: <560526.48390.qm@web33205.mail.mud.yahoo.com>
	<AFB948164110ED43B5EB849E8DEEF03809A7B6@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A7B8@SRV02.deltain.net>

Also the xharbour language references is a very good work of xharbour

Why not be usefull for either project?

We must write twice documentation?

 

 

Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Massimo Belgrano
Inviato: luned? 23 luglio 2007 11.11
A: Harbour Project Main Developer List.
Oggetto: [Harbour] Vs [XHarbour] or a unification project

 

The quality of  Przemyslaw's code is not in discussion but Also structure like http://www.xHarbour.com/BugReporter are good for coordinate project

But double effort in develop,debug,promote is not a good thing

The Unification project is so difficult?

Is not possible a flag conservative (Przemyslaw)  and another innovatite (Ron&Patric)

Is so difficult having A different mode of kernel for having either advantages

Not two product but one product to develop,debug,promote

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070723/5145d424/attachment-0001.html
From lorenzo.fiorini at gmail.com  Mon Jul 23 06:50:41 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jul 23 06:50:44 2007
Subject: [Harbour] debugger devel branch gpf
Message-ID: <9257026e0707230350k692cf5d2uc864c7e38daa7a2e@mail.gmail.com>

Program received signal SIGSEGV, Segmentation fault.
0x080749b7 in hb_stackNewFrame ()
(gdb) bt
#0  0x080749b7 in hb_stackNewFrame ()
#1  0x0808da0c in hb_vmSend ()
#2  0x0808b8c9 in hb_vmExecute ()
#3  0x080bb9ab in HB_FUN_HBEDITOR_MOVECURSOR ()

here is an another point:

Program received signal SIGSEGV, Segmentation fault.
0x00bb4f6c in _int_malloc () from /lib/libc.so.6
(gdb) bt
#0  0x00bb4f6c in _int_malloc () from /lib/libc.so.6
#1  0x00bb6ebe in malloc () from /lib/libc.so.6
#2  0x0807748f in hb_xgrab ()
#3  0x08074baa in hb_stackIncrease ()
#4  0x0808d683 in hb_vmExecute ()
#5  0x0806549b in HB_FUN_TBRWTEXT_GOTOP ()

another one:

Program received signal SIGSEGV, Segmentation fault.
0x0808935f in hb_vmExecute ()
(gdb) bt
#0  0x0808935f in hb_vmExecute ()
#1  0x080bb3eb in HB_FUN_HBEDITOR_CLRTEXTSELECTION ()
#2  0x0808db33 in hb_vmSend ()
#3  0x0808b8c9 in hb_vmExecute ()
#4  0x080bb9ab in HB_FUN_HBEDITOR_MOVECURSOR ()

please remember I'm using different teditor.prg and tbrwtxt.prg.

Clearly the same code works well with beta3.

Below is a test that shows the gpf.

best regards,
Lorenzo

Procedure Main()

   local cDummy := "test"

   altd()

   dummy()

Return

function dummy()
return 1
From niki at synel.co.il  Mon Jul 23 07:34:50 2007
From: niki at synel.co.il (Chen Kedem)
Date: Mon Jul 23 07:33:56 2007
Subject: [Harbour] debugger devel branch gpf
Message-ID: <46A4925A.581@synel.co.il>

Lorenzo,

> please remember I'm using different teditor.prg and tbrwtxt.prg.

I use the standard and get something simillar with BCC32,
devel ChangeLog 2007-07-20 18:40 UTC+0200 Przemyslaw Czerpak.

bld_b32 tt38.prg /w/a/n/b
tt38

The debugger screen is shown and I press F7, the application quit
without any runtime error, there is one FM report about unreleased
memory. Here is the CodeGuard error for not releasing memory:

Error 00001. 0x300010 (Thread 0x00A5):
Resource leak: The memory block (0xDFA08C) was never freed

The memory block (0x00DFA08C) [size: 101 bytes] was allocated with malloc
Call Tree:
   0x00425083(=tt38.exe:0x01:024083) source\vm\FM.C#244
   0x004E4157(=tt38.exe:0x01:0E3157) source\common\HBSTR.C#139
   0x00406ED4(=tt38.exe:0x01:005ED4) source\debug\DBGENTRY.C#1529
   0x0040776D(=tt38.exe:0x01:00676D) source\debug\DBGENTRY.C#1694
   0x0043A2DA(=tt38.exe:0x01:0392DA) source\vm\HVM.C#4852
   0x0042D9F5(=tt38.exe:0x01:02C9F5) source\vm\HVM.C#1034


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From druzus at priv.onet.pl  Mon Jul 23 08:53:40 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jul 23 08:54:15 2007
Subject: [Harbour] debugger devel branch gpf
In-Reply-To: <9257026e0707230350k692cf5d2uc864c7e38daa7a2e@mail.gmail.com>
References: <9257026e0707230350k692cf5d2uc864c7e38daa7a2e@mail.gmail.com>
Message-ID: <20070723125340.GA12900@localhost.localdomain>

On Mon, 23 Jul 2007, Lorenzo Fiorini wrote:
> Program received signal SIGSEGV, Segmentation fault.
> 0x080749b7 in hb_stackNewFrame ()
> (gdb) bt
> #0  0x080749b7 in hb_stackNewFrame ()
> #1  0x0808da0c in hb_vmSend ()
> #2  0x0808b8c9 in hb_vmExecute ()
> #3  0x080bb9ab in HB_FUN_HBEDITOR_MOVECURSOR ()
> here is an another point:
[...]
> please remember I'm using different teditor.prg and tbrwtxt.prg.
> Clearly the same code works well with beta3.
> Below is a test that shows the gpf.

Lorenzo, I'm not able to replicate it. IMHO you mixed some wrong binaries
f.e. debug library from different builds.
Please try to replicate this problem in clean build.

best regards,
Przemek
From druzus at priv.onet.pl  Mon Jul 23 08:56:05 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jul 23 08:56:41 2007
Subject: [Harbour] debugger devel branch gpf
In-Reply-To: <46A4925A.581@synel.co.il>
References: <46A4925A.581@synel.co.il>
Message-ID: <20070723125605.GB12900@localhost.localdomain>

On Mon, 23 Jul 2007, Chen Kedem wrote:
> Lorenzo,
> > please remember I'm using different teditor.prg and tbrwtxt.prg.
> I use the standard and get something simillar with BCC32,
> devel ChangeLog 2007-07-20 18:40 UTC+0200 Przemyslaw Czerpak.

Thanks for the info. The name of function with trap was not freed on
exit. It's not real memory leak because program is terminated but should
be cleaned to not cause false alarms.

best regards,
Przemek
From devlist.harbour at gmail.com  Mon Jul 23 09:18:22 2007
From: devlist.harbour at gmail.com (Patrick Mast, xHarbour.com)
Date: Mon Jul 23 09:18:34 2007
Subject: R: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <560526.48390.qm@web33205.mail.mud.yahoo.com>
References: <560526.48390.qm@web33205.mail.mud.yahoo.com>
Message-ID: <DF1CB578-EC7A-45E8-A2AB-480126800DE2@GMail.com>

Jack,

> There are plenty of examples in your own Newsgroups (see one below).
> This code compiles just fine in Harbour and is a good example of the
> quality of  Przemyslaw's code.

Thanks for the sample, though I already had this one ;-)

If you have more samples, please let me know! This way we can fix  
xHarbour where needed.

Thanks Jack.

Patrick
From lorenzo.fiorini at gmail.com  Mon Jul 23 09:40:01 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jul 23 09:40:07 2007
Subject: [Harbour] debugger devel branch gpf
In-Reply-To: <20070723125340.GA12900@localhost.localdomain>
References: <9257026e0707230350k692cf5d2uc864c7e38daa7a2e@mail.gmail.com>
	<20070723125340.GA12900@localhost.localdomain>
Message-ID: <9257026e0707230640t227c6d98u9d689fc0a8e10b1a@mail.gmail.com>

On 7/23/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> Lorenzo, I'm not able to replicate it. IMHO you mixed some wrong binaries
> f.e. debug library from different builds.
> Please try to replicate this problem in clean build.

I've tried many times but I still get it. The libs are linked statically.

I've rebuilt using -g and here is the bt:

Program received signal SIGSEGV, Segmentation fault.
hb_stackNewFrame (pStack=0xbef78048, uiParams=0) at ../../estack.c:261
261        pStack->ulPrivateBase = hb_memvarGetPrivatesBase();
(gdb) bt
#0  hb_stackNewFrame (pStack=0xbef78048, uiParams=0) at ../../estack.c:261
#1  0x0808da0c in hb_vmSend (uiParams=0) at ../../hvm.c:4904
#2  0x0808b8c9 in hb_vmExecute (pCode=0x834de00 "\r\001", pSymbols=0x83ad840)
    at ../../hvm.c:1066
#3  0x080bb1ab in HB_FUN_HBEDITOR_CLRTEXTSELECTION () at teditor.c:2523
#4  0x0808db33 in hb_vmSend (uiParams=0) at ../../hvm.c:4923
#5  0x0808b8c9 in hb_vmExecute (
    pCode=0x834d740
"\r\001\001$[\002fP\002$_\002_\001\032\233\001$c\0020\231",
pSymbols=0x83ad840) at ../../hvm.c:1066
#6  0x080bb76b in HB_FUN_HBEDITOR_MOVECURSOR () at teditor.c:973
#7  0x0808db33 in hb_vmSend (uiParams=1) at ../../hvm.c:4923
#8  0x0808b8c9 in hb_vmExecute (pCode=0x832fc43 "\r\001", pSymbols=0x83a7a20)
    at ../../hvm.c:1066

best regards,
Lorenzo
From jd10jd10 at yahoo.com  Mon Jul 23 09:54:11 2007
From: jd10jd10 at yahoo.com (Jack Daniels)
Date: Mon Jul 23 09:54:45 2007
Subject: R: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
Message-ID: <651401.8763.qm@web33206.mail.mud.yahoo.com>

Patrick,

My employer is very upset with me for answering your request the way I did.
He saw my response as "Flaming" and I apologize if you took it that way.  He
supports all "3" projects, including the commercial one.  I believe he posts all
code that breaks xHarbour to your Newsgroups.

Regards,
Jack

----- Original Message ----
From: "Patrick Mast, xHarbour.com" <devlist.harbour@gmail.com>
To: Harbour Project Main Developer List. <harbour@harbour-project.org>
Sent: Monday, July 23, 2007 8:18:22 AM
Subject: Re: R: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw Czerpak(druzus/at/priv.onet.pl)


Jack,

> There are plenty of examples in your own Newsgroups (see one below).
> This code compiles just fine in Harbour and is a good example of the
> quality of  Przemyslaw's code.

Thanks for the sample, though I already had this one ;-)

If you have more samples, please let me know! This way we can fix  
xHarbour where needed.

Thanks Jack.

Patrick
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour


      ____________________________________________________________________________________
Park yourself in front of a world of choices in alternative vehicles. Visit the Yahoo! Auto Green Center.
http://autos.yahoo.com/green_center/ 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070723/1d297aa9/attachment.html
From jd10jd10 at yahoo.com  Mon Jul 23 10:27:24 2007
From: jd10jd10 at yahoo.com (Jack Daniels)
Date: Mon Jul 23 10:27:57 2007
Subject: R: [Harbour] Vs [XHarbour] or a unification project
Message-ID: <802350.65450.qm@web33212.mail.mud.yahoo.com>

Hello Massimo,
 
It appears to me the documentation in the xHarbour CVS is the same years
old stuff.  I agree, neither of the GPL's provide very good docs.  I think the
documentation about which you refer to as "very good work" would be the
commercial version and it is Copyrighted and not free.  If I am wrong on
this, please tell me where to find it.
 
Also, the http://www.xHarbour.com/BugReporter is part of the commercial
project although I think non-subscribers have complete access. IMHO this
forum is equivalent and obviously monitored by Patrick.

When I hear, "Either project must elect a people to give decision based on
simplex rules/law", it sends chills up and down my spine. I stand by my
previous position, if you really want it screwed up, just elect a "government"
to run it!

Regards,
Jack

----- Original Message ----
From: Massimo Belgrano <mbelgrano@deltain.it>
To: Harbour Project Main Developer List. <harbour@harbour-project.org>
Sent: Monday, July 23, 2007 4:49:11 AM
Subject: R: [Harbour] Vs [XHarbour] or a unification project


Also the xharbour language references is a very good work of xharbour
Why not be usefull for either project?
We must write twice documentation?
 
 
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Massimo Belgrano
Inviato: luned? 23 luglio 2007 11.11
A: Harbour Project Main Developer List.
Oggetto: [Harbour] Vs [XHarbour] or a unification project
 
The quality of  Przemyslaw's code is not in discussion but Also structure like http://www.xHarbour.com/BugReporter are good for coordinate project
But double effort in develop,debug,promote is not a good thing
The Unification project is so difficult?
Is not possible a flag conservative (Przemyslaw)  and another innovatite (Ron&Patric)
Is so difficult having A different mode of kernel for having either advantages
Not two product but one product to develop,debug,promote


       
____________________________________________________________________________________
Take the Internet to Go: Yahoo!Go puts the Internet in your pocket: mail, news, photos & more. 
http://mobile.yahoo.com/go?refer=1GNXIC
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070723/f8b3928a/attachment-0001.html
From harbour.01 at syenar.hu  Mon Jul 23 11:41:25 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul 23 11:41:28 2007
Subject: R: [Harbour] Vs [XHarbour] or a unification project
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809A7B8@SRV02.deltain.net>
References: <560526.48390.qm@web33205.mail.mud.yahoo.com>
	<AFB948164110ED43B5EB849E8DEEF03809A7B6@SRV02.deltain.net>
	<AFB948164110ED43B5EB849E8DEEF03809A7B8@SRV02.deltain.net>
Message-ID: <861F78F3-BAF5-4DDC-BC46-5E1AFAC05BC5@syenar.hu>

Hi Massimo,
> The quality of  Przemyslaw's code is not in discussion but Also  
> structure like http://www.xHarbour.com/BugReporter are good for  
> coordinate project
In Harbour, users can use this URL to add and track requests:
http://sourceforge.net/tracker/?group_id=681

Brgds,
Viktor

From devlist.harbour at gmail.com  Mon Jul 23 14:30:58 2007
From: devlist.harbour at gmail.com (Patrick Mast, xHarbour.com)
Date: Mon Jul 23 14:31:09 2007
Subject: R: [Harbour] ChangeLog 2007-07-18 21:30 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <651401.8763.qm@web33206.mail.mud.yahoo.com>
References: <651401.8763.qm@web33206.mail.mud.yahoo.com>
Message-ID: <F8165CD3-A86F-48E7-91D6-BE123833887E@GMail.com>

Hello,

> My employer is very upset with me for answering your request the  
> way I did.
> He saw my response as "Flaming" and I apologize if you took it that  
> way.

I personally also would have replied different to my request yes. But  
no harm done Jack! No problem. ;-)

> He supports all "3" projects, including the commercial one.  I  
> believe he
> posts all code that breaks xHarbour to your Newsgroups.

Thank you.

Patrick
From info at fsgiudice.com  Tue Jul 24 02:42:09 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Jul 24 02:42:57 2007
Subject: [Harbour] [REPOST] how handling C structure in harbour ?
References: <20070704012730.GA26401@localhost.localdomain><000a01c7bdfe$2dc2ea40$b400a8c0@ASUSFSG><20070704095045.GC17907@localhost.localdomain>
	<20070704095129.GD17907@localhost.localdomain>
Message-ID: <001001c7cdbd$c428f500$b400f50a@ASUSFSG>


Hi Przemek,

sorry for late reply, thank you for the code.
I have tried it with tstcstru.prg from xharbour\tests but I got this 
message:

Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
tstcstru.c:
Error E2288 tstcstru.prg 99: Pointer to structure required on left side 
of -> or ->* in function HB_FUN_DEMOTRANSFERTOC
*** 1 errors in Compile ***

the offending line is:

  HB_FUNC( DEMOTRANSFERTOC )
  {
     MY_STRUCTURE *MyStructure = (MY_STRUCTURE * ) hb_param( 1, 
HB_IT_STRING )->item.asString.value;  // <<-----

do you have any idea ?

TIA

Best Regards

Francesco


----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Wednesday, July 04, 2007 11:51 AM
Subject: Re: [Harbour] [REPOST] how handling C structure in harbour ?


> On Wed, 04 Jul 2007, Przemyslaw Czerpak wrote:
>> In attachment but I cleaned only few typos in xHarbour code so the 
>> problems
>> existing in xHarbour version are inherited.
>> Use it with current DEVEL branch.
>
> I forgot to attach the code.
>
> best regards,
> Przemek
>


--------------------------------------------------------------------------------


> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
From lorenzo.fiorini at gmail.com  Tue Jul 24 05:12:31 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Jul 24 05:12:44 2007
Subject: [Harbour] debugger devel branch gpf
In-Reply-To: <9257026e0707230640t227c6d98u9d689fc0a8e10b1a@mail.gmail.com>
References: <9257026e0707230350k692cf5d2uc864c7e38daa7a2e@mail.gmail.com>
	<20070723125340.GA12900@localhost.localdomain>
	<9257026e0707230640t227c6d98u9d689fc0a8e10b1a@mail.gmail.com>
Message-ID: <9257026e0707240212p4ede5b18m1c634e658a9e5654@mail.gmail.com>

On 7/23/07, Lorenzo Fiorini <lorenzo.fiorini@gmail.com> wrote:

> I've tried many times but I still get it. The libs are linked statically.

I've found it, it was a wrong "mix" of prgs, sorry.

best regards,
Lorenzo
From mbelgrano at deltain.it  Tue Jul 24 05:30:55 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jul 24 05:31:36 2007
Subject: R: R: [Harbour] Vs [XHarbour] or a unification project
In-Reply-To: <802350.65450.qm@web33212.mail.mud.yahoo.com>
References: <802350.65450.qm@web33212.mail.mud.yahoo.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A7C5@SRV02.deltain.net>

I think onlky a democratic form of union, probably bad express in english

 

 

Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Jack Daniels
Inviato: luned? 23 luglio 2007 16.27
A: Harbour Project Main Developer List.
Oggetto: Re: R: [Harbour] Vs [XHarbour] or a unification project

 

Hello Massimo,

 

It appears to me the documentation in the xHarbour CVS is the same years

old stuff.  I agree, neither of the GPL's provide very good docs.  I think the

documentation about which you refer to as "very good work" would be the

commercial version and it is Copyrighted and not free.  If I am wrong on

this, please tell me where to find it.

 

Also, the http://www.xHarbour.com/BugReporter is part of the commercial

project although I think non-subscribers have complete access. IMHO this

forum is equivalent and obviously monitored by Patrick.

 

When I hear, "Either project must elect a people to give decision based on

simplex rules/law", it sends chills up and down my spine. I stand by my

previous position, if you really want it screwed up, just elect a "government"

to run it!

Regards,

Jack

 

----- Original Message ----
From: Massimo Belgrano <mbelgrano@deltain.it>
To: Harbour Project Main Developer List. <harbour@harbour-project.org>
Sent: Monday, July 23, 2007 4:49:11 AM
Subject: R: [Harbour] Vs [XHarbour] or a unification project

Also the xharbour language references is a very good work of xharbour

Why not be usefull for either project?

We must write twice documentation?

 

 

Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Massimo Belgrano
Inviato: luned? 23 luglio 2007 11.11
A: Harbour Project Main Developer List.
Oggetto: [Harbour] Vs [XHarbour] or a unification project

 

The quality of  Przemyslaw's code is not in discussion but Also structure like http://www.xHarbour.com/BugReporter are good for coordinate project

But double effort in develop,debug,promote is not a good thing

The Unification project is so difficult?

Is not possible a flag conservative (Przemyslaw)  and another innovatite (Ron&Patric)

Is so difficult having A different mode of kernel for having either advantages

Not two product but one product to develop,debug,promote

 

 

 

 

________________________________

Looking for a deal? Find great prices on flights and hotels <http://us.rd.yahoo.com/evt=47094/*http:/farechase.yahoo.com/;_ylc=X3oDMTFicDJoNDllBF9TAzk3NDA3NTg5BHBvcwMxMwRzZWMDZ3JvdXBzBHNsawNlbWFpbC1uY20->  with Yahoo! FareChase.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070724/399b4364/attachment.html
From druzus at priv.onet.pl  Tue Jul 24 08:19:23 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 24 08:19:58 2007
Subject: [Harbour] [REPOST] how handling C structure in harbour ?
In-Reply-To: <001001c7cdbd$c428f500$b400f50a@ASUSFSG>
References: <20070704095129.GD17907@localhost.localdomain>
	<001001c7cdbd$c428f500$b400f50a@ASUSFSG>
Message-ID: <20070724121923.GA16585@localhost.localdomain>

On Tue, 24 Jul 2007, Francesco Saverio Giudice wrote:
> Hi Przemek,
> sorry for late reply, thank you for the code.
> I have tried it with tstcstru.prg from xharbour\tests but I got this 
> message:
> Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
> tstcstru.c:
> Error E2288 tstcstru.prg 99: Pointer to structure required on left side 
> of -> or ->* in function HB_FUN_DEMOTRANSFERTOC
> *** 1 errors in Compile ***
> the offending line is:
>  HB_FUNC( DEMOTRANSFERTOC )
>  {
>     MY_STRUCTURE *MyStructure = (MY_STRUCTURE * ) hb_param( 1, 
> HB_IT_STRING )->item.asString.value;  // <<-----
> do you have any idea ?

Yes. The above code is classic example what happens when users try
to access item internals dropping documented API. Instead of:
    hb_param( 1, HB_IT_STRING )->item.asString.value
use:
    hb_parc( 1 )

best regards,
Przemek
From druzus at priv.onet.pl  Tue Jul 24 08:35:34 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 24 08:36:12 2007
Subject: [Harbour] ChangeLog 2007-07-24 14:35 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070724123533.GA16980@localhost.localdomain>

2007-07-24 14:35 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/debug/dbgentry.c
    ! cleaned memory leak in not freed trap on debugger exit

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Jul 24 13:42:24 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 24 13:42:29 2007
Subject: [Harbour] CHANGELOG: 2007-07-24 19:40 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7ce19$Blat.v2.6.1$fee1c864$173049a34f14@127.0.0.1>

2007-07-24 19:40 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * common.mak
   * makefile.vc
   * makefile.bc
     * PPGEN -> HBPPGEN
     * Some redundancies removed.
     ! Redone and fixed my previous modifications.
       (Thanks Marek and pls test this.)

From harbour.01 at syenar.hu  Tue Jul 24 14:12:17 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 24 14:12:25 2007
Subject: [Harbour] CHANGELOG: 2007-07-24 20:11 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7ce1e$Blat.v2.6.1$2b800760$6e4d1db2184@127.0.0.1>

2007-07-24 20:11 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * common.mak
   * source/codepage/Makefile
   + source/codepage/cpsk852.c
   + source/codepage/cpskiso.c
   + source/codepage/cpskwin.c
   + source/codepage/cpskkam.c
     + Added Slovak codepages. Pls. test them if you are 
       familiar with the language rules.

From harbour.01 at syenar.hu  Tue Jul 24 14:34:17 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 24 14:34:24 2007
Subject: [Harbour] CHANGELOG: 2007-07-24 20:30 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7ce21$Blat.v2.6.1$3e696c4c$bfcfa13145a@127.0.0.1>

2007-07-24 20:30 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * common.mak
   * include/hbapicdp.h
   * source/codepage/Makefile
   + source/codepage/ucmik.c
   + source/codepage/cpbgmik.c
     + Added BGMIK codepage and Bulgarian MIK unicode conversion 
       table from xHarbour.
     ! Changed internal ID "MIK" to "bg-mik".

   * include/hbapicdp.h
   * source/codepage/uckam.c
     ! Changed internal ID "CSKAM" to "Kamenicky".

From mpaliwoda at interia.pl  Wed Jul 25 00:05:54 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Tue Jul 24 16:06:39 2007
Subject: [Harbour] CHANGELOG: 2007-07-24 19:40 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <01c7ce19$Blat.v2.6.1$fee1c864$173049a34f14@127.0.0.1>
References: <01c7ce19$Blat.v2.6.1$fee1c864$173049a34f14@127.0.0.1>
Message-ID: <46A6CC22.2010905@interia.pl>

Hi Viktor,

> 2007-07-24 19:40 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
>    * common.mak
>    * makefile.vc
>    * makefile.bc
>      * PPGEN -> HBPPGEN
>      * Some redundancies removed.
>      ! Redone and fixed my previous modifications.
>        (Thanks Marek and pls test this.)

Unfortunately not in a next two or three weeks :(.
But certainly I will return to the subject as soon
as possible :).

-- 

Marek

----------------------------------------------------------------------
Gorace i zmyslowe (tylko dla doroslych)

>>>http://link.interia.pl/f1b13

From info at fsgiudice.com  Tue Jul 24 16:31:51 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Jul 24 16:32:38 2007
Subject: [Harbour] [REPOST] how handling C structure in harbour ?
References: <20070704095129.GD17907@localhost.localdomain><001001c7cdbd$c428f500$b400f50a@ASUSFSG>
	<20070724121923.GA16585@localhost.localdomain>
Message-ID: <002401c7ce31$ab76fdd0$b400a8c0@ASUSFSG>

Hi Przmek,

----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Tuesday, July 24, 2007 2:19 PM
Subject: Re: [Harbour] [REPOST] how handling C structure in harbour ?


>
> Yes. The above code is classic example what happens when users try
> to access item internals dropping documented API. Instead of:
>    hb_param( 1, HB_IT_STRING )->item.asString.value
> use:
>    hb_parc( 1 )
>

I have changed, and it goes one step more and compiles succesfully, but 
running it gives me
Unrecoverable error 9022: Memory buffer overflow

Now the offending part is line:

   // Here we receive a true C Structure from a C Function.
   oStructure:Buffer( DemoTransferFromC(), .T. )

that refers to:

  HB_FUNC( DEMOTRANSFERFROMC )
  {
     // We need not worry about Memory Management - will be automatically 
released!
     MY_STRUCTURE *MyStructure = (MY_STRUCTURE *) hb_xgrab( sizeof( 
MY_STRUCTURE ) );
     MY_STRUCTURE *MyStructure2 = (MY_STRUCTURE*) hb_xgrab( sizeof( 
MY_STRUCTURE ) );

     MyStructure->sName = "From C";
     MyStructure->cAge  = 99;
     MyStructure->uiWeight = 77;
     MyStructure->dHeight = 3.14;

     MyStructure->Nested.c1[0] = 'a';
     MyStructure->Nested.c1[1] = 0;
     MyStructure->Nested.l2 = 2000;

     MyStructure->pNext = MyStructure2;

     MyStructure2->sName = "Nested From C";
     MyStructure2->cAge  = 66;
     MyStructure2->uiWeight = 33;
     MyStructure2->dHeight = 1.11;

     MyStructure2->Nested.c1[0] = 'b';
     MyStructure2->Nested.c1[1] = 0;
     MyStructure2->Nested.l2 = 20000;

     MyStructure2->pNext = NULL;

     hb_retclenAdoptRaw( (char *) MyStructure, sizeof( MY_STRUCTURE ) );
  }

But I can't see none of wrong here, probably the problem should be inside 
oStructure:Buffer() that doesn't release memory in correct way probably 
depending on differences in ITEM handling between Harbour vs. xHarbour.

But this is out of my knowledge, I will try to study the code.

Thank you for your time and your patience.

Best Regards

Francesco


From lkrausem at shaw.ca  Tue Jul 24 22:20:04 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Tue Jul 24 22:20:28 2007
Subject: [Harbour] Problem creating .adt files
Message-ID: <46A6B354.5020302@shaw.ca>

I just discovered a nasty bug in Harbour.  If you use dbCreate() to 
create an
.adt table, though it will seem fine if you open it in Harbour, 
attempting to open
that same file with Advantage Data Architect (ARC) will give Error 7016 
Corrupted
Table.

Something changed in the past 3 months that broke it.

After running the sample, try opening the resulting .adt table with 
Advantage Data Architect.
(Creating the table directly in ARC with the same structure as in sample 
works fine).

//---
#include "ads.ch"
#undef ADS

ANNOUNCE RDDSYS

REQUEST ADS

Function Main()
Local aStruct

SetMode( 25, 80 )
cls

aStruct := ;
   { { "ID",       "C",  16, 0 } , ;
     { "Descript", "C", 100, 0 } , ;
     { "RevDate",  "D",   4, 0 } , ; // in .adt date fields are D,4 not D,8
     { "Notes",    "M",   9, 0 } , ;
     { "Bin",      "N",   4, 0 }   ; // ADS will assign it as ShortInt 
of length 2 (-32767 to 32767)
  }

dbCreate( "sample", aStruct, "ADT" )

dbUseArea( .t., "ADT", "sample", "sample", .t., .f. )
? alias()
? "This adt opens just fine in xHarbour, but ARC gives Error 7016 
Corrupted Table!"
dbCloseArea()

Return Nil

Init Function RddInit()

rddSetDefault( "ADS" )
AdsSetServerType( ADS_LOCAL_SERVER )

Return Nil
//---

Regards,

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From harbour.01 at syenar.hu  Wed Jul 25 03:44:38 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul 25 03:44:44 2007
Subject: [Harbour] CHANGELOG: 2007-07-25 09:40 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7ce8f$Blat.v2.6.1$a750f2b6$164ceda86ca8@127.0.0.1>

2007-07-25 09:40 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * common.mak
   * source/codepage/Makefile
   + source/codepage/cpsv850.c
   + source/codepage/cpsvclip.c
   + source/codepage/cpsvwin.c
     + Added Swedish codapages from xHarbour.
     ; The codepages are now synced.

From lorenzo.fiorini at gmail.com  Wed Jul 25 06:58:43 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jul 25 06:58:46 2007
Subject: [Harbour] K_codes under gttrm
Message-ID: <9257026e0707250358y18c0b73fl4af8041c25d604b7@mail.gmail.com>

I've found that many keys combinations does not return clipper
compatible codes in gttrm.

f.e. ctrl+Fx, sh+Fx, ctrl+Ret, ctrl+pgdn/pgup.

Is there sth I can do? I'm using pterm under Linux and putty under Windows.

Can anybody point me to the right doc about gttrm "low levels"?

best regards,
Lorenzo
From druzus at priv.onet.pl  Wed Jul 25 08:06:49 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul 25 08:07:25 2007
Subject: [Harbour] Problem creating .adt files
In-Reply-To: <46A6B354.5020302@shaw.ca>
References: <46A6B354.5020302@shaw.ca>
Message-ID: <20070725120649.GA5797@localhost.localdomain>

On Tue, 24 Jul 2007, Luis Krause Mantilla wrote:
> I just discovered a nasty bug in Harbour.  If you use dbCreate() to 
> create an
> .adt table, though it will seem fine if you open it in Harbour, 
> attempting to open
> that same file with Advantage Data Architect (ARC) will give Error 7016 
> Corrupted
> Table.

Both Harbour and xHarbour gives the same results for me:

druzus:/tmp/2# hbmk -n -w -es2 t.prg -lace && ./t
Harbour devel build 1.1-1 Intl.
Copyright 1999-2007, http://www.harbour-project.org/
Compiling 't.prg'...
Lines 352, Functions/Procedures 3
Generating C source output to 't.c'... Done.

SAMPLE
This adt opens just fine in xHarbour, but ARC gives Error 7016 Corrupted Table!
druzus:/tmp/2#

> Something changed in the past 3 months that broke it.

Nothing has been changed. As you can see above it works perfectly.
Check your environment. Probably you mixed some Harbour and xHarbour
files or different ADS/ACE libraries / header files.

best regards,
Przemek
From toninhofwi at yahoo.com.br  Wed Jul 25 08:23:42 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Jul 25 08:24:32 2007
Subject: [Harbour] Problem creating .adt files
In-Reply-To: <20070725120649.GA5797@localhost.localdomain>
References: <46A6B354.5020302@shaw.ca>
	<20070725120649.GA5797@localhost.localdomain>
Message-ID: <h5gea3pcddqfq379es6nh8gsl70svt8b7b@4ax.com>

>Both Harbour and xHarbour gives the same results for me:
I confirm. All fines here too.

Regards,

Toninho.


	

	
		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From druzus at priv.onet.pl  Wed Jul 25 08:25:20 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul 25 08:25:56 2007
Subject: [Harbour] [REPOST] how handling C structure in harbour ?
In-Reply-To: <002401c7ce31$ab76fdd0$b400a8c0@ASUSFSG>
References: <20070724121923.GA16585@localhost.localdomain>
	<002401c7ce31$ab76fdd0$b400a8c0@ASUSFSG>
Message-ID: <20070725122520.GA6260@localhost.localdomain>

On Tue, 24 Jul 2007, Francesco Saverio Giudice wrote:
> I have changed, and it goes one step more and compiles succesfully, but 
> running it gives me
> Unrecoverable error 9022: Memory buffer overflow

It's possible and can be caused by hb_retclenAdoptRaw() - in
Harbour it's redirected to hb_retclen_buffer() which set chr(0)
at the end of buffer. In xHarbour it doesn't.
You have two choices:
1. allocate one bute more in hb_xgrab()
2. add your own version of hb_retclenAdoptRaw() to cstructc.c
   (see code below) and add to your code:
       #undef hb_retclenAdoptRaw
       extern HB_EXPORT void hb_retclenAdoptRaw( char * szText, ULONG ulLen );
   to disable the #define in hbapi.h
   Introducing string items without leading 0 into HVM is dangerous
   and can break other subsystems so I do not plan to add function
   like hb_retclenAdoptRaw() below to core code (just like
   hb_itemPutCRawStatic() which is inside cstructc.c)
   Personally I think that special version of HB_IT_POINTER with
   autodestructor should be used instead of string items. Probably
   with some set of functions to manage C structures at .prg level
   but I still do not know the conditions how they should be used
   and how writable buffers should be passed to C code. I'll try
   to contact with Andrzej Wo? (original author of this extension)
   to discuss about it. Andrzej if you are reading it can you answer?
   I can create set of hb_par*()/hb_stor*()/hb_ret*() functions to
   exchange pointers between C and .prg code.

best regards,
Przemek

#undef hb_retclenAdoptRaw
HB_EXPORT void hb_retclenAdoptRaw( char * szText, ULONG ulLen )
{
   hb_itemPutCRawStatic( hb_stackReturnItem(), szText, ulLen );
}
From druzus at priv.onet.pl  Wed Jul 25 09:54:32 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul 25 09:55:08 2007
Subject: [Harbour] K_codes under gttrm
In-Reply-To: <9257026e0707250358y18c0b73fl4af8041c25d604b7@mail.gmail.com>
References: <9257026e0707250358y18c0b73fl4af8041c25d604b7@mail.gmail.com>
Message-ID: <20070725135432.GA9560@localhost.localdomain>

On Wed, 25 Jul 2007, Lorenzo Fiorini wrote:
> I've found that many keys combinations does not return clipper
> compatible codes in gttrm.
> f.e. ctrl+Fx, sh+Fx, ctrl+Ret, ctrl+pgdn/pgup.

All of the above are not standard key combination and may not work
PuTTY/PTerm sends SH_Fx keycodes as LINUX and probaly if you make:
    export TERM=limnux
then they will work because PuTTY quite well emulates Linux console.
In such case CTRL+[arrows] can be added and I'll do that soon.
But as far as I know for CTRL+{Fx,Ret,PGUP,PGDN,IN,DEL} PuTTY/PTerm
does not send any sequences.
Though I haven't tested the newest PuTTY/PTerm version.

> Is there sth I can do? I'm using pterm under Linux and putty under Windows.

Ask PuTTY authors to add some support for CTRL+{Fx,Ret,PGUP,PGDN,IN,DEL}
though only CTRL+RET mapped to chr(10) can be used as standard keys and
rest not so I do not know if they agree for such extension.

> Can anybody point me to the right doc about gttrm "low levels"?

I used my keyboard code from GTCRS in GTTRM too but here it's not GTTRM
problem. Anyhow you can use emulator I added in these both GTs:
    [CTRL] + '^' enables CTRL flag and
    [CTRL] + '&' or [CTRL] + '_' enables ALT flag
both ALT and CTRL flags means SHIFT so If you press:
    [CTRL] + '^', [ENTER]
then you will have K_CTRL_ENTER key code, etc.

You can also add your own key code combinations with:
    hb_gtInfo( GTI_ADDKEYMAP, { <nKeyCode>, <cEscSequence> } )
and remove them with:
    hb_gtInfo( GTI_DELKEYMAP, <cEscSequence> )
but it will be usable when you will have terminal which sends sth
when you press some key combination. AFAIK PuTTY doesn't for the
above CTRL+{...}.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jul 25 10:05:17 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul 25 10:05:51 2007
Subject: [Harbour] ChangeLog 2007-07-25 16:05 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070725140517.GA10198@localhost.localdomain>

2007-07-25 16:05 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbgtcore.h
    + added translation for HB_GT_trm

  * harbour/source/rtl/gttrm/gttrm.c
    + map some Linux key codes also in XTerm - they will be usable
      in terminals like PuTTY/PTerm

  * harbour/source/rtl/gtstd/gtstd.c
  * harbour/source/rtl/gtpca/gtpca.c
    + changed the order of checking HB_WIN32_IO and OS_UNIX_COMPATIBLE
      macros for CYGWIN compilation

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Wed Jul 25 10:39:50 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jul 25 10:39:54 2007
Subject: [Harbour] K_codes under gttrm
In-Reply-To: <20070725135432.GA9560@localhost.localdomain>
References: <9257026e0707250358y18c0b73fl4af8041c25d604b7@mail.gmail.com>
	<20070725135432.GA9560@localhost.localdomain>
Message-ID: <9257026e0707250739k457aaa35u14a9059c25816d33@mail.gmail.com>

On 7/25/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> All of the above are not standard key combination and may not work
> PuTTY/PTerm sends SH_Fx keycodes as LINUX and probaly if you make:
>     export TERM=limnux
> then they will work because PuTTY quite well emulates Linux console.
> In such case CTRL+[arrows] can be added and I'll do that soon.

Many thanks.

> But as far as I know for CTRL+{Fx,Ret,PGUP,PGDN,IN,DEL} PuTTY/PTerm
> does not send any sequences.

Customers that still use "text" apps are usually the one that need
fast data entering.
I've always used Ctrl+Ret, Ctrl+Ins, Ctrl+Del, Ret as Edit, Insert,
Delete, Save record since these combinations are easily done with the
right while left one is on the Tab and Esc keys.

I could use K_ALT_RETURN, K_ALT_INS, K_ALT_DEL and K_SH_Fx as "alternatives".
They are not so "handy" but better than mouse.

Are they "safe" key combinations in your opinion?

> I used my keyboard code from GTCRS in GTTRM too but here it's not GTTRM
> ...
> above CTRL+{...}.

They work perfectly.

Many thanks again.

best regards,
Lorenzo
From lkrausem at shaw.ca  Wed Jul 25 11:20:56 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Wed Jul 25 11:21:40 2007
Subject: [Harbour] Problem creating .adt files
In-Reply-To: <20070725120649.GA5797@localhost.localdomain>
References: <46A6B354.5020302@shaw.ca>
	<20070725120649.GA5797@localhost.localdomain>
Message-ID: <46A76A58.7090905@shaw.ca>

Przemek, Toninho:

It seems to be a problem with v 8.10 of ADS (I just started migrating 
apps to
use the most current version of the Advantage dll).

I just reverted the dlls back to v. 7.10 and all is good.  I wonder if 
the problem
is actually in the Advantage dlls, or somewhere else.

The exact version of the ADS dlls are:

ace32.dll   8.10.0.15   from April 16 2007 @ 8:10pm
adsloc32.dll   8.10.0.15  from April 16 2007 @ 8:10pm
axcws32.dll  8.10.0.15   from April 16 2007 @ 8:10pm

And remember, you have to open sample.adt with ARC, that's where the 
corruption
is detected; [x]Harbour will open it no problem.

Thanks

Przemyslaw Czerpak wrote:

>On Tue, 24 Jul 2007, Luis Krause Mantilla wrote:
>  
>
>>I just discovered a nasty bug in Harbour.  If you use dbCreate() to 
>>create an
>>.adt table, though it will seem fine if you open it in Harbour, 
>>attempting to open
>>that same file with Advantage Data Architect (ARC) will give Error 7016 
>>Corrupted
>>Table.
>>    
>>
>
>Both Harbour and xHarbour gives the same results for me:
>
>druzus:/tmp/2# hbmk -n -w -es2 t.prg -lace && ./t
>Harbour devel build 1.1-1 Intl.
>Copyright 1999-2007, http://www.harbour-project.org/
>Compiling 't.prg'...
>Lines 352, Functions/Procedures 3
>Generating C source output to 't.c'... Done.
>
>SAMPLE
>This adt opens just fine in xHarbour, but ARC gives Error 7016 Corrupted Table!
>druzus:/tmp/2#
>
>  
>
>>Something changed in the past 3 months that broke it.
>>    
>>
>
>Nothing has been changed. As you can see above it works perfectly.
>Check your environment. Probably you mixed some Harbour and xHarbour
>files or different ADS/ACE libraries / header files.
>
>best regards,
>Przemek
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>  
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070725/980879aa/attachment.html
From toninhofwi at yahoo.com.br  Wed Jul 25 12:02:38 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Jul 25 12:03:10 2007
Subject: [Harbour] Problem creating .adt files
In-Reply-To: <46A76A58.7090905@shaw.ca>
References: <46A6B354.5020302@shaw.ca>
	<20070725120649.GA5797@localhost.localdomain>
	<46A76A58.7090905@shaw.ca>
Message-ID: <qssea35rii4o250f3pf5kleqbo9jh3kpua@4ax.com>

>It seems to be a problem with v 8.10 of ADS (I just started migrating 
>apps to use the most current version of the Advantage dll).

Luis, I?m currently using ADS 8.10.0.2. I do a test using ARC32
8.10.0.15 and is FINE.

I suspect that you are mixing DLLs from ADS 7 and 8...


Regards,

Toninho.


	

	
		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From guy.roussin at teledetection.fr  Wed Jul 25 12:17:02 2007
From: guy.roussin at teledetection.fr (Guy Roussin)
Date: Wed Jul 25 12:17:37 2007
Subject: [Harbour] Problem with Mysql field number 
Message-ID: <46A7777E.8030109@teledetection.fr>

Hi,

I notice a problem with /contrib/mysql/tsqlbrw.prg
in METHOD Block() CLASS TBColumnSQL

i get a syntax error on line 129 :
return &("{||" + xValue + "}")

1) when xType=="N"
and the field contains negative numbers
in this case xValue return a string of "*"
if i replace the line 108 by, for example :
xValue:=repl(" ",::oBrw:oCurRow:FieldLen(::nFieldNum)-1)+"0"
there is no more errors.
... but this is not a good fix !

2) when fields contains NULL
in the otherwise case
i add :
    xValue := "' '"


Thank you,

Guy
From druzus at priv.onet.pl  Wed Jul 25 12:51:47 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul 25 12:52:23 2007
Subject: [Harbour] ChangeLog 2007-07-25 18:45 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070725165147.GA17111@localhost.localdomain>

2007-07-25 18:45 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gtchrmap.c
    * indenting

  * harbour/source/rtl/gttrm/gttrm.c
    * added some key sequences I used in patch for PuTTY/PTerm
      CTRL+{INS,DEL,HOME,END,PGUP,PGDN} - they are gnome-terminal
      compatible

I'm attaching patch for putty-0.60/unix/gtkwin.c which disables
CTRL+{PGUP,PGDN} keys as scroll buffer controllers and enables
gnome-terminal compatible key sequences for CTRL+{INS,DEL,HOME,
END,PGUP,PGDN,ENTER}

best regards,
Przemek
-------------- next part --------------
--- gtkwin.c-orig	2007-03-19 13:05:34.000000000 +0100
+++ gtkwin.c	2007-07-25 18:00:16.000000000 +0200
@@ -612,19 +612,22 @@
 	    term_scroll(inst->term, 0, -inst->cfg.height/2);
 	    return TRUE;
 	}
+/*
 	if (event->keyval == GDK_Page_Up && (event->state & GDK_CONTROL_MASK)) {
 	    term_scroll(inst->term, 0, -1);
 	    return TRUE;
 	}
+*/
 	if (event->keyval == GDK_Page_Down && (event->state & GDK_SHIFT_MASK)) {
 	    term_scroll(inst->term, 0, +inst->cfg.height/2);
 	    return TRUE;
 	}
+/*
 	if (event->keyval == GDK_Page_Down && (event->state & GDK_CONTROL_MASK)) {
 	    term_scroll(inst->term, 0, +1);
 	    return TRUE;
 	}
-
+*/
 	/*
 	 * Neither does Shift-Ins.
 	 */
@@ -674,7 +677,7 @@
 	/* We handle Return ourselves, because it needs to be flagged as
 	 * special to ldisc. */
 	if (event->keyval == GDK_Return) {
-	    output[1] = '\015';
+	    output[1] = (event->state & GDK_CONTROL_MASK) ? '\012' : '\015';
 	    use_ucsoutput = FALSE;
 	    end = 2;
 	    special = TRUE;
@@ -879,7 +882,7 @@
 		code = 34;
 		break;
 	    }
-	    if (!(event->state & GDK_CONTROL_MASK)) switch (event->keyval) {
+	    /*if (!(event->state & GDK_CONTROL_MASK))*/ switch (event->keyval) {
 	      case GDK_Home: case GDK_KP_Home:
 		code = 1;
 		break;
@@ -980,7 +983,8 @@
 		goto done;
 	    }
 	    if (code) {
-		end = 1 + sprintf(output+1, "\x1B[%d~", code);
+		end = 1 + sprintf(output+1, (event->state & GDK_CONTROL_MASK) ?
+				 "\x1B[%d;5~" : "\x1B[%d~", code);
 		use_ucsoutput = FALSE;
 		goto done;
 	    }
From lkrausem at shaw.ca  Wed Jul 25 13:03:26 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Wed Jul 25 13:04:24 2007
Subject: [Harbour] Problem creating .adt files
In-Reply-To: <20070725120649.GA5797@localhost.localdomain>
References: <46A6B354.5020302@shaw.ca>
	<20070725120649.GA5797@localhost.localdomain>
Message-ID: <46A7825E.9070604@shaw.ca>

Przemek, Toninho, all:

Found the explanation for this ugly problem.  Luckily it isn't Harbour 
or xHarbour,
but Advantage and it has a solution.

Short story:  When I updated to v 8.1 of the Advantage stuff, I kept my 7.1
folder, along with ARC.

It turns out that any .adt you create with v 8.1 dlls will open just 
fine with ARC 8.1,
but will yield error 7016 if you attempt to open it with ARC 7.1.  This 
is something
new since I had been able to open v 7.1 created .adts with ARC 6.1.  So 
BEWARE!

I really hadn't noticed I was still opening .adt with ARC 7.1 because 
even after I installed
ARC 8.1 (and kept ARC 7.1), double clicking on an .adt file in Windows 
still uses
ARC 7.1 to open it, thus creating the problem.

And to make things more confusing, Extended Systems didn't use a 
new/different
icon for ARC 8.1 so even using Open With in Windows shows two entries 
for ARC
with no way of knowing which is which except by trial and error.

Yet another pitfall to be aware my friends.

Regards,

Przemyslaw Czerpak wrote:

>On Tue, 24 Jul 2007, Luis Krause Mantilla wrote:
>  
>
>>I just discovered a nasty bug in Harbour.  If you use dbCreate() to 
>>create an
>>.adt table, though it will seem fine if you open it in Harbour, 
>>attempting to open
>>that same file with Advantage Data Architect (ARC) will give Error 7016 
>>Corrupted
>>Table.
>>    
>>
>
>Both Harbour and xHarbour gives the same results for me:
>
>druzus:/tmp/2# hbmk -n -w -es2 t.prg -lace && ./t
>Harbour devel build 1.1-1 Intl.
>Copyright 1999-2007, http://www.harbour-project.org/
>Compiling 't.prg'...
>Lines 352, Functions/Procedures 3
>Generating C source output to 't.c'... Done.
>
>SAMPLE
>This adt opens just fine in xHarbour, but ARC gives Error 7016 Corrupted Table!
>druzus:/tmp/2#
>
>  
>
>>Something changed in the past 3 months that broke it.
>>    
>>
>
>Nothing has been changed. As you can see above it works perfectly.
>Check your environment. Probably you mixed some Harbour and xHarbour
>files or different ADS/ACE libraries / header files.
>
>best regards,
>Przemek
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>  
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070725/bbdf52f3/attachment.html
From lorenzo.fiorini at gmail.com  Wed Jul 25 13:29:34 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jul 25 13:29:42 2007
Subject: [Harbour] ChangeLog 2007-07-25 18:45 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070725165147.GA17111@localhost.localdomain>
References: <20070725165147.GA17111@localhost.localdomain>
Message-ID: <9257026e0707251029ncdf686t3c31569246b0557e@mail.gmail.com>

On 7/25/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:
> 2007-07-25 18:45 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/rtl/gtchrmap.c
>     * indenting
>
>   * harbour/source/rtl/gttrm/gttrm.c
>     * added some key sequences I used in patch for PuTTY/PTerm
>       CTRL+{INS,DEL,HOME,END,PGUP,PGDN} - they are gnome-terminal
>       compatible
>
> I'm attaching patch for putty-0.60/unix/gtkwin.c which disables
> CTRL+{PGUP,PGDN} keys as scroll buffer controllers and enables
> gnome-terminal compatible key sequences for CTRL+{INS,DEL,HOME,
> END,PGUP,PGDN,ENTER}

Tell me what I can do for you :)

Many thanks.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Wed Jul 25 13:55:51 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jul 25 13:55:54 2007
Subject: [Harbour] K_LDBLCLK and gtxwc/gttrm
Message-ID: <9257026e0707251055v7bad5f3ft5cb15698914b6a5@mail.gmail.com>

I understand that it is difficult to test but under gtxwc and gttrm
K_LDBLCLK seems "critical".

I'm testing with inkeytst and the success/failure ratio is quite low
compared to the "container" pterm window.

What I mean is that under the terminal window almost every "try" is a
success while if I run inkeytst in the same window I need to double
click many times to get it.

Any idea?

best regards,
Lorenzo
From druzus at priv.onet.pl  Wed Jul 25 14:22:24 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul 25 14:22:58 2007
Subject: [Harbour] K_LDBLCLK and gtxwc/gttrm
In-Reply-To: <9257026e0707251055v7bad5f3ft5cb15698914b6a5@mail.gmail.com>
References: <9257026e0707251055v7bad5f3ft5cb15698914b6a5@mail.gmail.com>
Message-ID: <20070725182224.GA17579@localhost.localdomain>

On Wed, 25 Jul 2007, Lorenzo Fiorini wrote:
> I understand that it is difficult to test but under gtxwc and gttrm
> K_LDBLCLK seems "critical".
> I'm testing with inkeytst and the success/failure ratio is quite low
> compared to the "container" pterm window.
> What I mean is that under the terminal window almost every "try" is a
> success while if I run inkeytst in the same window I need to double
> click many times to get it.

There is no special escape sequence for double mouse click so GT
driver have to calculate the delay between two escape sequences.
The delay can be controlled by CL53 compatible function: MDBLCLK()
You can make some experiments with it to tune the delay you like.
Please note that the speed and type of internet connection will
interact with results f.e. two separate sequences with some delay
on client host can be merged and received without any delay by
server.

BTW for keycode tests I suggest to use tests/gtkeys.prg instead of
    inkeytst.prg

best regards,
Przemek
From info at fsgiudice.com  Wed Jul 25 15:18:41 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Jul 25 15:19:31 2007
Subject: [Harbour] [REPOST] how handling C structure in harbour ?
References: <20070724121923.GA16585@localhost.localdomain><002401c7ce31$ab76fdd0$b400a8c0@ASUSFSG>
	<20070725122520.GA6260@localhost.localdomain>
Message-ID: <000301c7cef0$9d891c70$ba00f50a@ASUSFSG>


----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Wednesday, July 25, 2007 2:25 PM
Subject: Re: [Harbour] [REPOST] how handling C structure in harbour ?


> It's possible and can be caused by hb_retclenAdoptRaw() - in
> Harbour it's redirected to hb_retclen_buffer() which set chr(0)
> at the end of buffer. In xHarbour it doesn't.
> You have two choices:
> 1. allocate one bute more in hb_xgrab()
> 2. add your own version of hb_retclenAdoptRaw() to cstructc.c
>   (see code below) and add to your code:
>       #undef hb_retclenAdoptRaw
>       extern HB_EXPORT void hb_retclenAdoptRaw( char * szText, ULONG 
> ulLen );
>   to disable the #define in hbapi.h

Done, but the result now is:

----------------------------------------
Total memory allocated: 82046 bytes (931 block(s))
WARNING! Memory allocated but not released: 36 bytes (1 block(s))
source\vm\fm.c:622: HB_TR_ERROR Block 1 (size 32) DEMOTRANSFERFROMC(0), 
")5-646006334)0004D0000
001F(5.B51+81E09406100-0070000)000-C5F)000"

Ah, sorry, I have forgotten to write it before, I give as default, I have 
compiled all sources with HB_COMPAT_XHB.

>   Introducing string items without leading 0 into HVM is dangerous
>   and can break other subsystems so I do not plan to add function
>   like hb_retclenAdoptRaw() below to core code (just like
>   hb_itemPutCRawStatic() which is inside cstructc.c)
>   Personally I think that special version of HB_IT_POINTER with
>   autodestructor should be used instead of string items. Probably
>   with some set of functions to manage C structures at .prg level
>   but I still do not know the conditions how they should be used
>   and how writable buffers should be passed to C code. I'll try
>   to contact with Andrzej Wo? (original author of this extension)
>   to discuss about it. Andrzej if you are reading it can you answer?
>   I can create set of hb_par*()/hb_stor*()/hb_ret*() functions to
>   exchange pointers between C and .prg code.

This will be very interesting.
I would to use structure to handling Windows API, but probably they will be 
interesting also in Linux, to transfer structure values like, as basic 
sample, RECT or POINT, without having to write a low level function with a 
lot of parameters or using arrays as return values.

Just as a minimal sample I do now using xharbour:

//--------------- Main ------------------
...

rt := oWin:GetClientRect()

? rt:left, rt:top, rt:right, rt:bottom

...

//---------------- PRG LEVEL -----------------

METHOD GetClientRect() CLASS WinControl
  LOCAL rt := (struct RECT)
  LOCAL cBuff

  cBuff := rt:value
  WINAPI_GetClientRect( ::Handle, @cBuff )
  rt:Buffer( cBuff )

RETURN rt

//---------------------- C LEVEL -----------------

HB_FUNC( WINAPI_GETCLIENTRECT )
{
   RECT * rt = (RECT *) hb_parcx( 2 );

   hb_retl( GetClientRect( (HWND) hb_parnl( 1 ), rt ) );
}

//---------------------------------------------------

Best Regards

Francesco

From antonioharbour at gmail.com  Wed Jul 25 15:59:46 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Jul 25 16:00:18 2007
Subject: [Harbour] ( ... ) use
Message-ID: <46a7abce.1e06420a.7fca.476f@mx.google.com>

How to implement this code ?

Function test( 1, 2, ... )

   Another( ... )

Return nil

Is there a way to automatically supply "..." contents to another function
call ? Thanks,

Regards,

Antonio


From druzus at priv.onet.pl  Wed Jul 25 16:38:47 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul 25 16:39:23 2007
Subject: [Harbour] ( ... ) use
In-Reply-To: <46a7abce.1e06420a.7fca.476f@mx.google.com>
References: <46a7abce.1e06420a.7fca.476f@mx.google.com>
Message-ID: <20070725203847.GA18092@localhost.localdomain>

On Wed, 25 Jul 2007, Antonio Linares wrote:
> How to implement this code ?
> Function test( 1, 2, ... )
>    Another( ... )
> Return nil
> Is there a way to automatically supply "..." contents to another function
> call ? Thanks,

Yes, when you declare function/procedure with variable number of
parameters, f.e.:

    proc main()
    test( 1, 2, 3, 4, 5 )
    return

    proc test( p1, p2, ... )
    qout("P1 is:", p1)
    qout("P2 is:", p2)
    qout("other parameters:", ...)
    return


The above works only with Harbour. xHarbour does not support such extension.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Jul 25 16:44:12 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul 25 16:44:46 2007
Subject: [Harbour] [REPOST] how handling C structure in harbour ?
In-Reply-To: <000301c7cef0$9d891c70$ba00f50a@ASUSFSG>
References: <20070725122520.GA6260@localhost.localdomain>
	<000301c7cef0$9d891c70$ba00f50a@ASUSFSG>
Message-ID: <20070725204412.GB18092@localhost.localdomain>

On Wed, 25 Jul 2007, Francesco Saverio Giudice wrote:
> Done, but the result now is:
> ----------------------------------------
> Total memory allocated: 82046 bytes (931 block(s))
> WARNING! Memory allocated but not released: 36 bytes (1 block(s))
> source\vm\fm.c:622: HB_TR_ERROR Block 1 (size 32) DEMOTRANSFERFROMC(0), 
> ")5-646006334)0004D0000
> 001F(5.B51+81E09406100-0070000)000-C5F)000"

Ups, sorry typo inside hb_retclenAdoptRaw() use
   hb_itemPutCRaw( hb_stackReturnItem(), szText, ulLen );
instead of:
   hb_itemPutCRawStatic( hb_stackReturnItem(), szText, ulLen );

best regards,
Przemek
From antonioharbour at gmail.com  Wed Jul 25 16:45:57 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Jul 25 16:46:57 2007
Subject: [Harbour] ( ... ) use
In-Reply-To: <20070725203847.GA18092@localhost.localdomain>
Message-ID: <46a7b6bc.01b6420a.664d.4d82@mx.google.com>

Przemek, 

>
    proc test( p1, p2, ... )
    qout("P1 is:", p1)
    qout("P2 is:", p2)
    qout("other parameters:", ...)
    return
>

Thanks, very good :-)

> The above works only with Harbour. xHarbour does not support such
extension.

I need it for xHarbour too. Do you know a way to make it work (similar) on
xHarbour ? Thanks,

Regards,

Antonio

From druzus at priv.onet.pl  Wed Jul 25 17:31:18 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul 25 17:31:53 2007
Subject: [Harbour] ( ... ) use
In-Reply-To: <46a7b6bc.01b6420a.664d.4d82@mx.google.com>
References: <20070725203847.GA18092@localhost.localdomain>
	<46a7b6bc.01b6420a.664d.4d82@mx.google.com>
Message-ID: <20070725213118.GA18544@localhost.localdomain>

On Wed, 25 Jul 2007, Antonio Linares wrote:
> >    proc test( p1, p2, ... )
> >    qout("P1 is:", p1)
> >    qout("P2 is:", p2)
> >    qout("other parameters:", ...)
> >    return
> Thanks, very good :-)
> > The above works only with Harbour. xHarbour does not support such
> > extension.
> I need it for xHarbour too. Do you know a way to make it work (similar) on
> xHarbour ? Thanks,

AFAIK it's impossible to reach such effect in xHarbour with simple
instruction. You will have to make sth like:

    proc test( ... )
    local a:=hb_aParams()
    switch PCount()
       case 0; qout(); exit
       case 1; qout(a[1]); exit
       case 2; qout(a[1],a[2]); exit
       case 3; qout(a[1],a[2],a[3]); exit
       case 4; qout(a[1],a[2],a[3],a[4]); exit
       case 5; qout(a[1],a[2],a[3],a[4],a[5]); exit
       case 6; qout(a[1],a[2],a[3],a[4],a[5],a[6]); exit
       case 7; qout(a[1],a[2],a[3],a[4],a[5],a[7],a[7]); exit
       /* ... */
    end
    return

or use intermediate function written in C like hb_execfromarray(), f.e.:

    proc test( ... )
    local a:=hb_aParams()
    qout("P1 is:", a[1])
    qout("P2 is:", a[2])
    adel(a,1)
    asize(a,len(a)-1)
    a[1]:="other parameters:"
    hb_execFromArray(@qout(),a)
    return

best regards,
Przemek
From antonioharbour at gmail.com  Wed Jul 25 17:43:27 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Jul 25 17:43:59 2007
Subject: [Harbour] ( ... ) use
In-Reply-To: <20070725213118.GA18544@localhost.localdomain>
Message-ID: <46a7c41b.2381420a.7981.51f3@mx.google.com>

Przemek,

Thanks for your advise,

Do you know if there is a technical limitation to implement it in xHarbour
the same way as it is done in Harbour ? Thanks,

Regards,

Antonio

From druzus at priv.onet.pl  Wed Jul 25 19:21:31 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Jul 25 19:22:07 2007
Subject: [Harbour] ChangeLog 2007-07-26 01:20 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070725232131.GA23909@localhost.localdomain>

2007-07-26 01:20 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gtcrs/gtcrs.c
    * added protection against misleading mouse wheel and mouse drag
      events

  * harbour/source/rtl/gttrm/gttrm.c
    * added protection against misleading mouse wheel and mouse drag
      events
    * enable XTERM like mouse reporting also for Linux terminal - it's
      possible with external mouse driver
    * added some CTRL+Fx escape sequences XTERM and gnome-terminal
      compatible
    * disabled some escape sequences mapped to simple cursor keys
      which are used as CTRL+[cursor key] in recent XTerm versions

Below is new patch for putty-0.60/unix/gtkwin.c which enables
CTRL+Fx escape sequences and mouse wheel events for application

best regards,
Przemek
-------------- next part --------------
--- gtkwin.c-orig	2007-03-19 13:05:34.000000000 +0100
+++ gtkwin.c	2007-07-26 01:18:12.000000000 +0200
@@ -612,19 +612,22 @@
 	    term_scroll(inst->term, 0, -inst->cfg.height/2);
 	    return TRUE;
 	}
+/*
 	if (event->keyval == GDK_Page_Up && (event->state & GDK_CONTROL_MASK)) {
 	    term_scroll(inst->term, 0, -1);
 	    return TRUE;
 	}
+*/
 	if (event->keyval == GDK_Page_Down && (event->state & GDK_SHIFT_MASK)) {
 	    term_scroll(inst->term, 0, +inst->cfg.height/2);
 	    return TRUE;
 	}
+/*
 	if (event->keyval == GDK_Page_Down && (event->state & GDK_CONTROL_MASK)) {
 	    term_scroll(inst->term, 0, +1);
 	    return TRUE;
 	}
-
+*/
 	/*
 	 * Neither does Shift-Ins.
 	 */
@@ -674,7 +677,7 @@
 	/* We handle Return ourselves, because it needs to be flagged as
 	 * special to ldisc. */
 	if (event->keyval == GDK_Return) {
-	    output[1] = '\015';
+	    output[1] = (event->state & GDK_CONTROL_MASK) ? '\012' : '\015';
 	    use_ucsoutput = FALSE;
 	    end = 2;
 	    special = TRUE;
@@ -879,7 +882,8 @@
 		code = 34;
 		break;
 	    }
-	    if (!(event->state & GDK_CONTROL_MASK)) switch (event->keyval) {
+	    /*if (!(event->state & GDK_CONTROL_MASK))*/
+	    switch (event->keyval) {
 	      case GDK_Home: case GDK_KP_Home:
 		code = 1;
 		break;
@@ -967,8 +971,8 @@
 		goto done;
 	    }
 	    if (inst->cfg.funky_type == FUNKY_XTERM && code >= 11 && code <= 14) {
-		if (inst->term->vt52_mode)
-		    end = 1 + sprintf(output+1, "\x1B%c", code + 'P' - 11);
+		if (event->state & GDK_CONTROL_MASK)
+		    end = 1 + sprintf(output+1, "\x1BO5%c", code + 'P' - 11);
 		else
 		    end = 1 + sprintf(output+1, "\x1BO%c", code + 'P' - 11);
 		use_ucsoutput = FALSE;
@@ -980,7 +984,8 @@
 		goto done;
 	    }
 	    if (code) {
-		end = 1 + sprintf(output+1, "\x1B[%d~", code);
+		end = 1 + sprintf(output+1, (event->state & GDK_CONTROL_MASK) ?
+				  "\x1B[%d;5~" : "\x1B[%d~", code);
 		use_ucsoutput = FALSE;
 		goto done;
 	    }
@@ -1093,19 +1098,20 @@
 
     show_mouseptr(inst, 1);
 
-    if (event->button == 4 && event->type == GDK_BUTTON_PRESS) {
+    shift = event->state & GDK_SHIFT_MASK;
+    ctrl = event->state & GDK_CONTROL_MASK;
+    alt = event->state & GDK_MOD1_MASK;
+
+    if (event->button == 4 && event->type == GDK_BUTTON_PRESS &&
+        (shift || !send_raw_mouse)) {
 	term_scroll(inst->term, 0, -5);
 	return TRUE;
     }
-    if (event->button == 5 && event->type == GDK_BUTTON_PRESS) {
+    if (event->button == 5 && event->type == GDK_BUTTON_PRESS &&
+        (shift || !send_raw_mouse)) {
 	term_scroll(inst->term, 0, +5);
 	return TRUE;
     }
-
-    shift = event->state & GDK_SHIFT_MASK;
-    ctrl = event->state & GDK_CONTROL_MASK;
-    alt = event->state & GDK_MOD1_MASK;
-
     if (event->button == 3 && ctrl) {
 	gtk_menu_popup(GTK_MENU(inst->menu), NULL, NULL, NULL, NULL,
 		       event->button, event->time);
@@ -1118,6 +1124,10 @@
 	button = MBT_MIDDLE;
     else if (event->button == 3)
 	button = MBT_RIGHT;
+    else if (event->button == 4)
+	button = MBT_WHEEL_UP;
+    else if (event->button == 5)
+	button = MBT_WHEEL_DOWN;
     else
 	return FALSE;		       /* don't even know what button! */
 
From info at fsgiudice.com  Thu Jul 26 02:09:41 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Thu Jul 26 02:11:10 2007
Subject: [Harbour] [REPOST] how handling C structure in harbour ?
References: <20070725122520.GA6260@localhost.localdomain><000301c7cef0$9d891c70$ba00f50a@ASUSFSG>
	<20070725204412.GB18092@localhost.localdomain>
Message-ID: <002201c7cf4b$8f1f79d0$ba00f50a@ASUSFSG>



----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Wednesday, July 25, 2007 10:44 PM
Subject: Re: [Harbour] [REPOST] how handling C structure in harbour ?


> On Wed, 25 Jul 2007, Francesco Saverio Giudice wrote:
>> Done, but the result now is:
>> ----------------------------------------
>> Total memory allocated: 82046 bytes (931 block(s))
>> WARNING! Memory allocated but not released: 36 bytes (1 block(s))
>> source\vm\fm.c:622: HB_TR_ERROR Block 1 (size 32) DEMOTRANSFERFROMC(0), 
>> ")5-646006334)0004D0000
>> 001F(5.B51+81E09406100-0070000)000-C5F)000"
> 
> Ups, sorry typo inside hb_retclenAdoptRaw() use
>   hb_itemPutCRaw( hb_stackReturnItem(), szText, ulLen );
> instead of:
>   hb_itemPutCRawStatic( hb_stackReturnItem(), szText, ulLen );
> 

Now it works. I will check with real application.

Thanks again.

Best Regards

Francesco
From bhays at abacuslaw.com  Thu Jul 26 05:50:02 2007
From: bhays at abacuslaw.com (bhays)
Date: Thu Jul 26 05:52:43 2007
Subject: [Harbour] Problem creating .adt files
In-Reply-To: <46A7825E.9070604@shaw.ca>
Message-ID: <020901c7cf6a$568b9620$0301a8c0@bh>

Przemek, Toninho, all:

Luis and the ExtSys folks determined that this is related to a
new feature in version 8.1 for the ADT format.
They have added a "new" data type called NUMERIC to the ADT spec :-)
As Luis put it: They added a "backward compatible" dBase-type, but in doing
so created backwards IN-compatible ADT tables.

Yes, there are 3 new data types added with this *incremental* version, which
means
any ADT table created with one of them will appear "corrupted" to any app
(including ARC) that's using 8.0 or earlier DLLs.

Here's why it's an issue for all of us:
With prior ADS versions, a "normal" xBase structure
array could be passed to dbCreate using  { "MYNUMFIELD",   "N", 8, 2 }
Although "Numeric" was considered "unsupported for ADT" all these years, ADS
happily accepted
it and translated it to a DOUBLE in this case, or a shortint or longint
depending
on the sizes passed to it.  With v8.1 DLLs, it creates a different structure
header.

IOW, the exact same exe that creates new tables with these various types
from "N" (with earlier DLLs) will create a different stru with "Numeric" in
the header as the new ADT specific data type (with v8.1 DLLs).
If that app is the only thing accessing the table, all will behave normally
and
you won't see a problem. BUT if a different workstation using v7 DLLs and
Local Server tries to open the file, it will fail with a corruption error
because
it doesn't understand the explicit Numeric type.

If you created ADT tables with the explicit extended ADS types for numbers,
you won't have any issues. But if you created tables with "N", you have a
potential tech support nightmare if one station installs software that
updates
the ADS DLLs.  If that station creates files and other stations still have
older DLLs, they will fail.

Since this is a runtime environment problem that can affect existing apps
in the field, I don't know that making any code changes on our side will
help much.  We *could* add a warning (I'd hate to throw an error)
for future compilations where we look at the
#define for the ADS_REQUIRE_VERSION, but even there we have a
problem because this doesn't work with incremental version differences (last

year there was a problem with that setting handling decimal minorversions).

I'm interested in hearing any suggestions.

(BTW, Przemek did you get the ads1.c I sent you?)

--
  Brian Hays



________________________________


	Przemek, Toninho, all:

	Found the explanation for this ugly problem.  Luckily it isn't
Harbour or xHarbour,
	but Advantage and it has a solution.

	Short story:  When I updated to v 8.1 of the Advantage stuff, I kept
my 7.1
	folder, along with ARC.

	It turns out that any .adt you create with v 8.1 dlls will open just
fine with ARC 8.1,
	but will yield error 7016 if you attempt to open it with ARC 7.1.
This is something
	new since I had been able to open v 7.1 created .adts with ARC 6.1.
So BEWARE!

	I really hadn't noticed I was still opening .adt with ARC 7.1
because even after I installed
	ARC 8.1 (and kept ARC 7.1), double clicking on an .adt file in
Windows still uses
	ARC 7.1 to open it, thus creating the problem.

	And to make things more confusing, Extended Systems didn't use a
new/different
	icon for ARC 8.1 so even using Open With in Windows shows two
entries for ARC
	with no way of knowing which is which except by trial and error.

	Yet another pitfall to be aware my friends.

	Regards,

	Przemyslaw Czerpak wrote:


		On Tue, 24 Jul 2007, Luis Krause Mantilla wrote:


			I just discovered a nasty bug in Harbour.  If you
use dbCreate() to
			create an
			.adt table, though it will seem fine if you open it
in Harbour,
			attempting to open
			that same file with Advantage Data Architect (ARC)
will give Error 7016
			Corrupted
			Table.



		Both Harbour and xHarbour gives the same results for me:

		druzus:/tmp/2# hbmk -n -w -es2 t.prg -lace && ./t
		Harbour devel build 1.1-1 Intl.
		Copyright 1999-2007, http://www.harbour-project.org/
		Compiling 't.prg'...
		Lines 352, Functions/Procedures 3
		Generating C source output to 't.c'... Done.

		SAMPLE
		This adt opens just fine in xHarbour, but ARC gives Error
7016 Corrupted Table!
		druzus:/tmp/2#



			Something changed in the past 3 months that broke
it.



		Nothing has been changed. As you can see above it works
perfectly.
		Check your environment. Probably you mixed some Harbour and
xHarbour
		files or different ADS/ACE libraries / header files.

		best regards,
		Przemek
		_______________________________________________
		Harbour mailing list
		Harbour@harbour-project.org
		http://lists.harbour-project.org/mailman/listinfo/harbour




	--
	Luis Krause Mantilla
	lkrausem at shaw dot ca
	luis_krause at hotmail dot com
	"May the Source be with GNU"





From guy.roussin at teledetection.fr  Thu Jul 26 06:49:46 2007
From: guy.roussin at teledetection.fr (Guy Roussin)
Date: Thu Jul 26 06:50:20 2007
Subject: [Harbour] Problem with Mysql field number
In-Reply-To: <46A7777E.8030109@teledetection.fr>
References: <46A7777E.8030109@teledetection.fr>
Message-ID: <46A87C4A.4020400@teledetection.fr>

Hi,

I think i found the problem.

mysql_fetch_field() in mysql.c return 31
as number of decimals (parm 8) when the
field is a MYSQL_DOUBLE_TYPE.

I don't think we need to fix this in mysql.c,
so here is 2 patches i made

1- First against tmysql.prg :

i add the line :

#include "set.ch"

and

in
METHOD FieldDec(nNum) CLASS TMySQLRow
METHOD FieldDec(nNum) CLASS TMySQLQuery

i change the line :

return ::aFieldStruct[nNum][MYSQL_FS_DECIMALS]

with

if ::aFieldStruct[nNum][MYSQL_FS_TYPE] == MYSQL_FLOAT_TYPE .or. ;
    ::aFieldStruct[nNum][MYSQL_FS_TYPE] == MYSQL_DOUBLE_TYPE
   return set(_SET_DECIMALS)
else
   return ::aFieldStruct[nNum][MYSQL_FS_DECIMALS]
endif

2- Second against tsqlbrw.prg

We need also to change the line 107 in
METHOD Block() CLASS TBColumnSQL :

xValue := Str(xValue, ::oBrw:oCurRow:FieldLen(::nFieldNum), 
::oBrw:oCurRow:FieldDec(::nFieldNum))

with this line :

xValue := "'"+Str(xValue, ::oBrw:oCurRow:FieldLen(::nFieldNum), 
::oBrw:oCurRow:FieldDec(::nFieldNum))+"'"

in the otherwise case we can add this line :
xValue := "'"+xValue+"'"

This fixes bugs for other MYSQL types like timestamp for example
which occur with &("{||" + xValue + "}")


Please test and comment my patch.

Thank you,

Guy


> I notice a problem with /contrib/mysql/tsqlbrw.prg
> in METHOD Block() CLASS TBColumnSQL
> 
> i get a syntax error on line 129 :
> return &("{||" + xValue + "}")
> 
> 1) when xType=="N"
> and the field contains negative numbers
> in this case xValue return a string of "*"
> if i replace the line 108 by, for example :
> xValue:=repl(" ",::oBrw:oCurRow:FieldLen(::nFieldNum)-1)+"0"
> there is no more errors.
> ... but this is not a good fix !
> 
> 2) when fields contains NULL
> in the otherwise case
> i add :
>    xValue := "' '"

-------------- next part --------------
A non-text attachment was scrubbed...
Name: patchFieldDec.diff
Type: patch
Size: 2349 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070726/608f3b45/patchFieldDec.pl
From M.Horodyski at pzuzycie.com.pl  Thu Jul 26 07:12:47 2007
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu Jul 26 07:13:22 2007
Subject: [Harbour] RE: Harbour Digest, Vol 9, Issue 50
Message-ID: <503AD832DBBF60469E9F807668A2F6A20256C8CB@PINK.zycie.pzu>

>From: "Antonio Linares" <antonioharbour@gmail.com>
>Subject: [Harbour] ( ... ) use
>To: <harbour@harbour-project.org>
>Message-ID: <46a7abce.1e06420a.7fca.476f@mx.google.com>
>Content-Type: text/plain;	charset="us-ascii"
>
>How to implement this code ?
>
>Function test( 1, 2, ... )
>
>   Another( ... )
>
>Return nil
>
>Is there a way to automatically supply "..." contents to 
>another function call ? Thanks,

Syntax ( ... ) is used in used in definition of procedure, no when it is
called.

Maby :
Another( HB_aParams())

Regads,
Marek Horodyski

From antonioharbour at gmail.com  Thu Jul 26 07:15:04 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Jul 26 07:15:42 2007
Subject: [Harbour] RE: Harbour Digest, Vol 9, Issue 50
In-Reply-To: <503AD832DBBF60469E9F807668A2F6A20256C8CB@PINK.zycie.pzu>
References: <503AD832DBBF60469E9F807668A2F6A20256C8CB@PINK.zycie.pzu>
Message-ID: <1185448504.6087.1.camel@anto-desktop>

Marek,

> Syntax ( ... ) is used in used in definition of procedure, no when it is
> called.

Harbour supports it. It looks as a xHarbour limitation

regards,

Antonio


From druzus at priv.onet.pl  Thu Jul 26 07:19:52 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jul 26 07:20:30 2007
Subject: [Harbour] ChangeLog 2007-07-26 13:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070726111952.GA25341@localhost.localdomain>

2007-07-26 13:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gttrm/gttrm.c
    * removed old XTerm (XFree 3.x.x) key sequences which are used in
      current XTerm implementation as for keys with modifiers

Final patch for putty-0.60/unix/gtkwin.c in attachment.
It enables sending key modifiers for all function keys and keypad
if you chose "XTerm R6" for "function keys and keypad" in PuTTY/PTerm
configuration and "keyboard" section.
I hope some Windows user can make similar modification also for
Windows PuTTY version or maybe someone will have enough energy
to ask about including such modification in official PuTTY release.

best regards,
Przemek
-------------- next part --------------
--- gtkwin.c-orig	2007-03-19 13:05:34.000000000 +0100
+++ gtkwin.c	2007-07-26 02:51:01.000000000 +0200
@@ -612,19 +612,22 @@
 	    term_scroll(inst->term, 0, -inst->cfg.height/2);
 	    return TRUE;
 	}
+/*
 	if (event->keyval == GDK_Page_Up && (event->state & GDK_CONTROL_MASK)) {
 	    term_scroll(inst->term, 0, -1);
 	    return TRUE;
 	}
+*/
 	if (event->keyval == GDK_Page_Down && (event->state & GDK_SHIFT_MASK)) {
 	    term_scroll(inst->term, 0, +inst->cfg.height/2);
 	    return TRUE;
 	}
+/*
 	if (event->keyval == GDK_Page_Down && (event->state & GDK_CONTROL_MASK)) {
 	    term_scroll(inst->term, 0, +1);
 	    return TRUE;
 	}
-
+*/
 	/*
 	 * Neither does Shift-Ins.
 	 */
@@ -674,7 +677,7 @@
 	/* We handle Return ourselves, because it needs to be flagged as
 	 * special to ldisc. */
 	if (event->keyval == GDK_Return) {
-	    output[1] = '\015';
+	    output[1] = (event->state & GDK_CONTROL_MASK) ? '\012' : '\015';
 	    use_ucsoutput = FALSE;
 	    end = 2;
 	    special = TRUE;
@@ -817,7 +820,39 @@
 	 */
 	{
 	    int code = 0;
-	    switch (event->keyval) {
+	    if (inst->cfg.funky_type == FUNKY_XTERM) switch (event->keyval) {
+	      case GDK_F1:
+		code = 11;
+		break;
+	      case GDK_F2:
+		code = 12;
+		break;
+	      case GDK_F3:
+		code = 13;
+		break;
+	      case GDK_F4:
+		code = 14;
+		break;
+	      case GDK_F5:
+		code = 15;
+		break;
+	      case GDK_F6:
+		code = 17;
+		break;
+	      case GDK_F7:
+		code = 18;
+		break;
+	      case GDK_F8:
+		code = 19;
+		break;
+	      case GDK_F9:
+		code = 20;
+		break;
+	      case GDK_F10:
+		code = 21;
+		break;
+	    }
+	    else switch (event->keyval) {
 	      case GDK_F1:
 		code = (event->state & GDK_SHIFT_MASK ? 23 : 11);
 		break;
@@ -848,6 +883,8 @@
 	      case GDK_F10:
 		code = (event->state & GDK_SHIFT_MASK ? 34 : 21);
 		break;
+	    }
+	    if (!code) switch (event->keyval) {
 	      case GDK_F11:
 		code = 23;
 		break;
@@ -878,8 +915,7 @@
 	      case GDK_F20:
 		code = 34;
 		break;
-	    }
-	    if (!(event->state & GDK_CONTROL_MASK)) switch (event->keyval) {
+
 	      case GDK_Home: case GDK_KP_Home:
 		code = 1;
 		break;
@@ -961,26 +997,48 @@
 		use_ucsoutput = FALSE;
 		goto done;
 	    }
-	    if (inst->cfg.funky_type == FUNKY_LINUX && code >= 11 && code <= 15) {
-		end = 1 + sprintf(output+1, "\x1B[[%c", code + 'A' - 11);
+	    if (inst->cfg.rxvt_homeend && (code == 1 || code == 4)) {
+		end = 1 + sprintf(output+1, code == 1 ? "\x1B[H" : "\x1BOw");
 		use_ucsoutput = FALSE;
 		goto done;
 	    }
-	    if (inst->cfg.funky_type == FUNKY_XTERM && code >= 11 && code <= 14) {
-		if (inst->term->vt52_mode)
-		    end = 1 + sprintf(output+1, "\x1B%c", code + 'P' - 11);
-		else
-		    end = 1 + sprintf(output+1, "\x1BO%c", code + 'P' - 11);
+	    if (inst->cfg.funky_type == FUNKY_LINUX && code >= 11 && code <= 15) {
+		end = 1 + sprintf(output+1, "\x1B[[%c", code + 'A' - 11);
 		use_ucsoutput = FALSE;
 		goto done;
 	    }
-	    if (inst->cfg.rxvt_homeend && (code == 1 || code == 4)) {
-		end = 1 + sprintf(output+1, code == 1 ? "\x1B[H" : "\x1BOw");
-		use_ucsoutput = FALSE;
-		goto done;
+	    if (inst->cfg.funky_type == FUNKY_XTERM && code) {
+		if (code >= 11 && code <= 14) {
+		    if (event->state & GDK_CONTROL_MASK)
+			end = 1 + sprintf(output+1, "\x1BO5%c", code + 'P' - 11);
+		    else if (event->state & GDK_MOD1_MASK)
+			end = 1 + sprintf(output+1, "\x1BO3%c", code + 'P' - 11);
+		    else if (event->state & GDK_SHIFT_MASK)
+			end = 1 + sprintf(output+1, "\x1BO2%c", code + 'P' - 11);
+		    else
+			end = 1 + sprintf(output+1, "\x1BO%c", code + 'P' - 11);
+		    use_ucsoutput = FALSE;
+		    goto done;
+		}
+		if (event->state & GDK_CONTROL_MASK) {
+		    end = 1 + sprintf(output+1, "\x1B[%d;5~", code);
+		    use_ucsoutput = FALSE;
+		    goto done;
+		}
+		if (event->state & GDK_SHIFT_MASK) {
+		    end = 1 + sprintf(output+1, "\x1B[%d;2~", code);
+		    use_ucsoutput = FALSE;
+		    goto done;
+		}
+		if (event->state & GDK_MOD1_MASK) {
+		    end = 1 + sprintf(output+1, "\x1B[%d;3~", code);
+		    use_ucsoutput = FALSE;
+		    goto done;
+		}
 	    }
 	    if (code) {
-		end = 1 + sprintf(output+1, "\x1B[%d~", code);
+		end = 1 + sprintf(output+1, (event->state & GDK_CONTROL_MASK) ?
+				  "\x1B[%d;5~" : "\x1B[%d~", code);
 		use_ucsoutput = FALSE;
 		goto done;
 	    }
@@ -1093,19 +1151,20 @@
 
     show_mouseptr(inst, 1);
 
-    if (event->button == 4 && event->type == GDK_BUTTON_PRESS) {
+    shift = event->state & GDK_SHIFT_MASK;
+    ctrl = event->state & GDK_CONTROL_MASK;
+    alt = event->state & GDK_MOD1_MASK;
+
+    if (event->button == 4 && event->type == GDK_BUTTON_PRESS &&
+        (shift || !send_raw_mouse)) {
 	term_scroll(inst->term, 0, -5);
 	return TRUE;
     }
-    if (event->button == 5 && event->type == GDK_BUTTON_PRESS) {
+    if (event->button == 5 && event->type == GDK_BUTTON_PRESS &&
+        (shift || !send_raw_mouse)) {
 	term_scroll(inst->term, 0, +5);
 	return TRUE;
     }
-
-    shift = event->state & GDK_SHIFT_MASK;
-    ctrl = event->state & GDK_CONTROL_MASK;
-    alt = event->state & GDK_MOD1_MASK;
-
     if (event->button == 3 && ctrl) {
 	gtk_menu_popup(GTK_MENU(inst->menu), NULL, NULL, NULL, NULL,
 		       event->button, event->time);
@@ -1118,6 +1177,10 @@
 	button = MBT_MIDDLE;
     else if (event->button == 3)
 	button = MBT_RIGHT;
+    else if (event->button == 4)
+	button = MBT_WHEEL_UP;
+    else if (event->button == 5)
+	button = MBT_WHEEL_DOWN;
     else
 	return FALSE;		       /* don't even know what button! */
 
From druzus at priv.onet.pl  Thu Jul 26 07:55:04 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jul 26 07:56:16 2007
Subject: [xHarbour-developers] [Harbour] Problem creating .adt files
In-Reply-To: <020901c7cf6a$568b9620$0301a8c0@bh>
References: <46A7825E.9070604@shaw.ca> <020901c7cf6a$568b9620$0301a8c0@bh>
Message-ID: <20070726115503.GB25341@localhost.localdomain>

On Thu, 26 Jul 2007, bhays wrote:
[...]
> With prior ADS versions, a "normal" xBase structure
> array could be passed to dbCreate using  { "MYNUMFIELD",   "N", 8, 2 }
> Although "Numeric" was considered "unsupported for ADT" all these years, ADS
> happily accepted
> it and translated it to a DOUBLE in this case, or a shortint or longint
> depending on the sizes passed to it.
>  With v8.1 DLLs, it creates a different structure header.
> 
> IOW, the exact same exe that creates new tables with these various types
> from "N" (with earlier DLLs) will create a different stru with "Numeric" in
> the header as the new ADT specific data type (with v8.1 DLLs).
> If that app is the only thing accessing the table, all will behave normally
> and you won't see a problem. BUT if a different workstation using v7 DLLs
> and Local Server tries to open the file, it will fail with a corruption error
> because it doesn't understand the explicit Numeric type.
> 
> If you created ADT tables with the explicit extended ADS types for numbers,
> you won't have any issues. But if you created tables with "N", you have a
> potential tech support nightmare if one station installs software that
> updates the ADS DLLs.  If that station creates files and other stations
> still have older DLLs, they will fail.
> 
> Since this is a runtime environment problem that can affect existing apps
> in the field, I don't know that making any code changes on our side will
> help much.  We *could* add a warning (I'd hate to throw an error)
> for future compilations where we look at the
> #define for the ADS_REQUIRE_VERSION, but even there we have a
> problem because this doesn't work with incremental version differences (last
> year there was a problem with that setting handling decimal minorversions).
> 
> I'm interested in hearing any suggestions.

If we want to keep existing code compatible then we will have to add
in ADT RDD translation for "N" fileds exactly the same as was done
by ADS < 8.1 (I hope we can ask ExtSys about exact conditions) and
add support for new "Numeric" type just like we already have "Double",
"Short", ... so new application will not have such problem and will
work in the same way with all ACE libraries until user will not use
"Numeric" field.

But maybe it's time to define new format for extended database types
common for all RDDs. Now we do not have RDD portable DBCREATE() structure.

> (BTW, Przemek did you get the ads1.c I sent you?)

Yes, I was looking at it and sorry that I haven't found time to answer
so far.
The main difference is that xHarbour uses hb_setext-><...> instead of
hb_set.<...>. I guess it was done for people who wanted to link adsrdd
with xHarbour .dll compiled without valid dllimport/dllexport  attributes
for hb_set structure.
I believe it works and for easier synchronization I can make the same
but in fact such modification it's a workaround only for some single
problem not real solution which will address also other problems like
alignment dependent code (less important in such case) and MT version.
Please remember that current code does not allow to use separated SETs
for each thread. Probably it will not be possible to make full thread
separation for ADS RDDs due to 3-rd party code which may not allow us
to implement some features but for sure I will create such possibilities
for other RDDs so I will have to define some API functions to access
SET switches. When you will create thread then it will be possible to
define which resources should be shares and which one separated or cloned.
So instead of accessing some structures with fixed address by
hb_set.HB_SET_OPTIMIZE or hb_setext->HB_SET_OPTIMIZE RDD will have to call
some very simple function like hb_get_SetOptimize() which will return
thread local or global application settings depending on other users
choices.
In summary. Now I can adopt these xHarbour modification for easier RDD
synchronization (with some modifications - hb_setext can be set once
in startup code) but in the future I will have to replace it with
some hb_get_Set*() functions.

best regards,
Przemek
From antonioharbour at gmail.com  Thu Jul 26 08:37:03 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Jul 26 08:37:35 2007
Subject: [Harbour] ChangeLog 2007-07-26 13:10 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <20070726111952.GA25341@localhost.localdomain>
References: <20070726111952.GA25341@localhost.localdomain>
Message-ID: <1185453423.6087.7.camel@anto-desktop>

Przemek,

If I open a terminal from Linux pressing Ctrl+Alt+F1...F6 the ascii
characters that I get are not the right ones, i.e. if I run midnight
commander. This is not a Harbour issue, but do you know how to get the
right ascii chars ? Thanks,

regards,

Antonio


From gerrylist at drouillard.ca  Thu Jul 26 09:03:27 2007
From: gerrylist at drouillard.ca (Gerald Drouillard)
Date: Thu Jul 26 09:04:11 2007
Subject: [Harbour] ChangeLog 2007-07-26 13:10 UTC+0200 Przemyslaw	Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <1185453423.6087.7.camel@anto-desktop>
References: <20070726111952.GA25341@localhost.localdomain>
	<1185453423.6087.7.camel@anto-desktop>
Message-ID: <46A89B9F.8080507@drouillard.ca>

Antonio Linares wrote:
> Przemek,
> 
> If I open a terminal from Linux pressing Ctrl+Alt+F1...F6 the ascii
> characters that I get are not the right ones, i.e. if I run midnight
> commander. This is not a Harbour issue, but do you know how to get the
> right ascii chars ? Thanks,
> 
I believe mc has a difficult time with some "LANG" environment vars.  On 
Ubuntu it defaults (for me) to en_US.UTF-8 which does not display the mc 
box characters properly in putty.  I tried all putty term types, played 
with some of the mc options but still no luck.  I changed the LANG 
setting to en_US and the box characters worked fine.  So before you 
launch mc type
LANG=en_US   (or whatever you need)
and it should work for you.  I think there may be a way to make this the 
default when you log in.

-- 
Regards
--------------------------------------
Gerald Drouillard
Technology Architect
Drouillard & Associates, Inc.
http://www.Drouillard.ca
From antonioharbour at gmail.com  Thu Jul 26 09:20:49 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Jul 26 09:21:22 2007
Subject: [Harbour] ChangeLog 2007-07-26 13:10 UTC+0200
	Przemyslaw	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <46A89B9F.8080507@drouillard.ca>
References: <20070726111952.GA25341@localhost.localdomain>
	<1185453423.6087.7.camel@anto-desktop> <46A89B9F.8080507@drouillard.ca>
Message-ID: <1185456049.6087.9.camel@anto-desktop>

Gerald,

Thanks for your help,

I have tried LANG=en_US and LANG=es_ES with no luck :(

regards,

Antonio

From gerrylist at drouillard.ca  Thu Jul 26 09:42:20 2007
From: gerrylist at drouillard.ca (Gerald Drouillard)
Date: Thu Jul 26 09:43:09 2007
Subject: [Harbour] ChangeLog 2007-07-26 13:10 UTC+0200	Przemyslaw	Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <1185456049.6087.9.camel@anto-desktop>
References: <20070726111952.GA25341@localhost.localdomain>	<1185453423.6087.7.camel@anto-desktop>
	<46A89B9F.8080507@drouillard.ca>
	<1185456049.6087.9.camel@anto-desktop>
Message-ID: <46A8A4BC.1090305@drouillard.ca>

Antonio Linares wrote:
> Gerald,
> 
> Thanks for your help,
> 
> I have tried LANG=en_US and LANG=es_ES with no luck :(
> 
Did you run:
set
afterwards to see that the change worked?

Putty settings I have (which are the default I believe)
Window|Translation:
	Char set: ISO-8859-1:1998
	Use Unicode line drawing code points
Window|Colours:
	Allow terminal to specify ANsi colours
	Allow terminal to use xterm 256 colour-mode
	Bolded text is a different colour



-- 
Regards
--------------------------------------
Gerald Drouillard
Technology Architect
Drouillard & Associates, Inc.
http://www.Drouillard.ca
From antonioharbour at gmail.com  Thu Jul 26 10:11:03 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Jul 26 10:11:35 2007
Subject: [Harbour] ChangeLog 2007-07-26 13:10
	UTC+0200	Przemyslaw	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <46A8A4BC.1090305@drouillard.ca>
References: <20070726111952.GA25341@localhost.localdomain>
	<1185453423.6087.7.camel@anto-desktop> <46A89B9F.8080507@drouillard.ca>
	<1185456049.6087.9.camel@anto-desktop> <46A8A4BC.1090305@drouillard.ca>
Message-ID: <1185459063.6087.15.camel@anto-desktop>

Gerald,

> Did you run:
> set
> afterwards to see that the change worked? 

Yes, just tried it. Same results :(

Thanks for your help,

regards,

Antonio

From lorenzo.fiorini at gmail.com  Thu Jul 26 11:49:10 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Jul 26 11:49:14 2007
Subject: [Harbour] contrib/tip/ftpcln.prg does not work after 2007-07-17
	16:48 UTC+0100
Message-ID: <9257026e0707260849l53da48edm682af5b0f1fdc3c8@mail.gmail.com>

I've downgraded to previous source from sf svn and it works again.

It transfer 0 bytes but it doesn't return an error string.

best regards,
Lorenzo
From bhays at abacuslaw.com  Thu Jul 26 14:07:15 2007
From: bhays at abacuslaw.com (bhays)
Date: Thu Jul 26 14:09:57 2007
Subject: [xHarbour-developers] [Harbour] Problem creating .adt files
In-Reply-To: <20070726115503.GB25341@localhost.localdomain>
Message-ID: <025b01c7cfaf$ccca39a0$0301a8c0@bh>

Przemek:

>>But maybe it's time to define new format for extended database types
common for all RDDs. Now we do not have RDD portable DBCREATE() structure.

Yes, this would be good.

> (BTW, Przemek did you get the ads1.c I sent you?)
>>The main difference is that xHarbour uses hb_setext-><...> instead of
hb_set.<...>.
I guess it was done for people who wanted to link adsrdd with xHarbour .dll
compiled without valid dllimport/dllexport  attributes for hb_set structure.
...

Yes, we discussed this about 6 months ago when I needed to create a DLL that
used FiveWin and ADS.
Antonio was nice enough to modify his code to use hb_GetSetStructPtr()
instead of direct access to the internal structure.
I believe there was some other reason why it was not as simple as declaring
that structure as dllexport, but I don't remember those specifics right now.
When you want to make it all thread safe, I'll be eager to help.


--
  Brian Hays


From druzus at priv.onet.pl  Thu Jul 26 15:46:06 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Jul 26 15:46:41 2007
Subject: [Harbour] ChangeLog 2007-07-26 21:45 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070726194606.GA29276@localhost.localdomain>

2007-07-26 21:45 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  + harbour/bldcmncf.sh
  + harbour/make_gcc.sh
  + harbour/makefile.gc
  * harbour/common.mak
  * harbour/makefile.bc
  * harbour/makefile.vc
  * harbour/make_vc.bat
  * harbour/make_b32.bat
    * added support for GCC and common make file. The extension created
      by Marek Paliwoda with some modifications added by me.
      Victor this commit removed the HB_* prefix from some of internal
      make variables. I've done it temporary to avoid synchronization
      problems with files in SVN, used by me and Marek. I hope we will
      clean the code and restore necessary prefixes when Marek will have
      returned so we can test it in different environments - such
      modification have to be done in all of the above files.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Jul 27 05:57:15 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jul 27 05:57:20 2007
Subject: [Harbour] ISPOINTER under Harbour
Message-ID: <9257026e0707270257m4b7fd130ub9725f0f05936aca@mail.gmail.com>

I'm testing xhgtk under harbour and it has this code:
...
		// foregound Color column
		fgcolor := ::aCols[i, 9]
		if ISPOINTER(fgcolor)
			gtk_widget_modify_fg( renderer, GTK_STATE_NORMAL, fgcolor )
...

what about POINTERS under Harbour?

Any workaround?

best regards,
Lorenzo
From druzus at priv.onet.pl  Fri Jul 27 06:06:33 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jul 27 06:07:08 2007
Subject: [Harbour] ISPOINTER under Harbour
In-Reply-To: <9257026e0707270257m4b7fd130ub9725f0f05936aca@mail.gmail.com>
References: <9257026e0707270257m4b7fd130ub9725f0f05936aca@mail.gmail.com>
Message-ID: <20070727100633.GA10606@localhost.localdomain>

On Fri, 27 Jul 2007, Lorenzo Fiorini wrote:
> I'm testing xhgtk under harbour and it has this code:
> ...
> 		// foregound Color column
> 		fgcolor := ::aCols[i, 9]
> 		if ISPOINTER(fgcolor)
> 			gtk_widget_modify_fg( renderer, GTK_STATE_NORMAL, fgcolor )
> ...
> what about POINTERS under Harbour?
> Any workaround?

The same as in xHarbour's common.ch:

    #xtranslate ISPOINTER( <xValue> ) => HB_ISPOINTER( <xValue> )

best regards,
Przemek
From druzus at priv.onet.pl  Fri Jul 27 06:32:58 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jul 27 06:33:34 2007
Subject: [Harbour] ChangeLog 2007-07-26 13:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <1185453423.6087.7.camel@anto-desktop>
References: <20070726111952.GA25341@localhost.localdomain>
	<1185453423.6087.7.camel@anto-desktop>
Message-ID: <20070727103258.GB10606@localhost.localdomain>

On Thu, 26 Jul 2007, Antonio Linares wrote:
> Przemek,
> If I open a terminal from Linux pressing Ctrl+Alt+F1...F6

It's "Linux console"

> the ascii characters that I get are not the right ones,

I guess you are talking about non ASCII characters ( ASC(c)>127 ) ;-)
f.e. box drawing characters.

> i.e. if I run midnight
> commander. This is not a Harbour issue, but do you know how to get the
> right ascii chars ? Thanks,

The problem can be cause by many different things. F.e. you may using
MC linked with slang version which does not support unicode (BTW what
distribution you are using and is it distro native MC version or you
installed it later?) and your console is in unicode mode or your locale
settings are wrong or sth like that.
You can make some tests setting LANG variable before you run MC and
switching console between UTF-8 and ISO modes.

f.e. try to run MC using this line:
    export LANG="en_US.UTF-8"; echo -ne '\033%G'; mc
it locale and console to UTF-8.

Then you can also try to run MC in ISO mode:
    export LANG="en_US"; echo -ne '\033%@\033(K'; mc

For some reasons some settings and/or libraries in your Linux box
does not work in compatible mode. BTW check if 'echo $TERM' shows 'linux'

best regards,
Przemek
From druzus at priv.onet.pl  Fri Jul 27 06:56:18 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jul 27 06:56:54 2007
Subject: [Harbour] ( ... ) use
In-Reply-To: <46a7c41b.2381420a.7981.51f3@mx.google.com>
References: <20070725213118.GA18544@localhost.localdomain>
	<46a7c41b.2381420a.7981.51f3@mx.google.com>
Message-ID: <20070727105618.GC10606@localhost.localdomain>

On Wed, 25 Jul 2007, Antonio Linares wrote:
> Thanks for your advise,
> Do you know if there is a technical limitation to implement it in xHarbour
> the same way as it is done in Harbour ? Thanks,

Everything can be implemented but the question is if xHarbour
developers are interested in it. In Harbour '...' uses exactly
the same mechanism as multi value xbase++ macros. It's sth what
Ron started to implement in Harbour before the fork and it has been
never working correctly - sth was what one of the fork reasons does
not work even in todays xHarbour CVS.
When I was cleaning Harbour core code I had to remove this implementation
and created new one from scratch in differ way without additional HVM
registers and MT safe. Later it was only few lines to use it also for
passing unnamed parameters (...). It can be ported to xHarbour and
for sure it should be because it will fix some of xHarbour's problems
but it will force some deeper modifications.
Few months ago I suggested xHarbour developers to take Harbour core code
and add xHarbour extensions (in core code there is only few xHarbour
extensions not supported by Harbour and much more extensions has Harbour
which are not supported by xHarbour). Such operation should not take more
then few days and will resolve most of xHarbour's problem but it looked
like xHarbour developers thought I was joking. I wasn't and IMHO it's still
very good choice for xHarbour.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Jul 27 06:59:47 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jul 27 06:59:51 2007
Subject: [Harbour] ISPOINTER under Harbour
In-Reply-To: <20070727100633.GA10606@localhost.localdomain>
References: <9257026e0707270257m4b7fd130ub9725f0f05936aca@mail.gmail.com>
	<20070727100633.GA10606@localhost.localdomain>
Message-ID: <9257026e0707270359q4f5075car9dadb1bf555a50e4@mail.gmail.com>

On 7/27/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> The same as in xHarbour's common.ch:
>
>     #xtranslate ISPOINTER( <xValue> ) => HB_ISPOINTER( <xValue> )

If we agree I'll add it and ISHASH to common.ch.

Also I'd change Valtype( x ) == "X" with HB_ISX( x )

Also in hbcompat.ch HB_PVALUE => PVALUE

best regards,
Lorenzo
From harbour.01 at syenar.hu  Fri Jul 27 07:07:34 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul 27 07:07:39 2007
Subject: [Harbour] ISPOINTER under Harbour
In-Reply-To: <9257026e0707270359q4f5075car9dadb1bf555a50e4@mail.gmail.com>
References: <9257026e0707270257m4b7fd130ub9725f0f05936aca@mail.gmail.com>
	<20070727100633.GA10606@localhost.localdomain>
	<9257026e0707270359q4f5075car9dadb1bf555a50e4@mail.gmail.com>
Message-ID: <E80C91CE-EEA1-436F-9A36-2F6194203712@syenar.hu>

Hi Lorenzo,

On 2007.07.27., at 12:59, Lorenzo Fiorini wrote:

> On 7/27/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:
>
>> The same as in xHarbour's common.ch:
>>
>>     #xtranslate ISPOINTER( <xValue> ) => HB_ISPOINTER( <xValue> )
>
> If we agree I'll add it and ISHASH to common.ch.

Please add it as HB_ISHASH() and add translation from
ISHASH() to hbcompat.ch for xhb compatibility.

> Also I'd change Valtype( x ) == "X" with HB_ISX( x )

What is type "X"?

> Also in hbcompat.ch HB_PVALUE => PVALUE

Okey.

Brgds,
Viktor



From druzus at priv.onet.pl  Fri Jul 27 07:09:32 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jul 27 07:10:08 2007
Subject: [xHarbour-developers] [Harbour] Problem creating .adt files
In-Reply-To: <025b01c7cfaf$ccca39a0$0301a8c0@bh>
References: <20070726115503.GB25341@localhost.localdomain>
	<025b01c7cfaf$ccca39a0$0301a8c0@bh>
Message-ID: <20070727110932.GD10606@localhost.localdomain>

On Thu, 26 Jul 2007, bhays wrote:
> >>But maybe it's time to define new format for extended database types
> common for all RDDs. Now we do not have RDD portable DBCREATE() structure.
> Yes, this would be good.

I'll be absent for few days. When I'll be back I'll try to create some
basic proposition which we can start to discuss. I hope that Marcelo
and Jacek (SQLRDD/MEDIATOR) will also take a part in discussion.

> Yes, we discussed this about 6 months ago when I needed to create a DLL that
> used FiveWin and ADS.
> Antonio was nice enough to modify his code to use hb_GetSetStructPtr()
> instead of direct access to the internal structure.
> I believe there was some other reason why it was not as simple as declaring
> that structure as dllexport, but I don't remember those specifics right now.

Just make a test and declare hb_set with DLLIMPORT (not DLLEXPORT)
attribute and then recompile ADS RDD from Harbour. It will work.

> When you want to make it all thread safe, I'll be eager to help.

Thank you very much.
I'll try to sync both RDDs ASAP but maybe it will be better to define
first some hb_getSet*() functions in both projects? Please also note
that direct access to hb_set structure allows to change some settings
by 3-rd party code without validation or callback notification. It can
be source of very pleasure and hard to locate problems, f.e. you may
link some 3-rd party binaries with your code which change some SETs
which should be synced with ACE library.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Jul 27 07:13:51 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jul 27 07:13:56 2007
Subject: [Harbour] ISPOINTER under Harbour
In-Reply-To: <E80C91CE-EEA1-436F-9A36-2F6194203712@syenar.hu>
References: <9257026e0707270257m4b7fd130ub9725f0f05936aca@mail.gmail.com>
	<20070727100633.GA10606@localhost.localdomain>
	<9257026e0707270359q4f5075car9dadb1bf555a50e4@mail.gmail.com>
	<E80C91CE-EEA1-436F-9A36-2F6194203712@syenar.hu>
Message-ID: <9257026e0707270413g5119f9a4j5535890a78e5b15@mail.gmail.com>

On 7/27/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Please add it as HB_ISHASH() and add translation from
> ISHASH() to hbcompat.ch for xhb compatibility.

Why? Aren't hashes supported in "standard" Harbour?

> What is type "X"?

Sorry for X I meant ALL types.

best regards,
Lorenzo
From druzus at priv.onet.pl  Fri Jul 27 07:18:37 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jul 27 07:19:12 2007
Subject: [Harbour] ISPOINTER under Harbour
In-Reply-To: <9257026e0707270359q4f5075car9dadb1bf555a50e4@mail.gmail.com>
References: <9257026e0707270257m4b7fd130ub9725f0f05936aca@mail.gmail.com>
	<20070727100633.GA10606@localhost.localdomain>
	<9257026e0707270359q4f5075car9dadb1bf555a50e4@mail.gmail.com>
Message-ID: <20070727111837.GE10606@localhost.localdomain>

On Fri, 27 Jul 2007, Lorenzo Fiorini wrote:
> Also I'd change Valtype( x ) == "X" with HB_ISX( x )

This is translation can damage valid code. IMHO It's a bug which
should be fixed in xHarbur. F.e. try to compile and run this code
using Clipper/Harbour and then xHarbour:

    #include "common.ch"
    proc main()
    local l1:=1, l2:=""
    ? valtype(l1) + valtype(l2) == "N" + "C"
    return

PP does not know anything about operator precedence so such translations
cannot work well (compare .ppo files)

> Also in hbcompat.ch HB_PVALUE => PVALUE

AFAIK we already have such trnaslation.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Jul 27 07:20:43 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul 27 07:20:45 2007
Subject: [Harbour] ISPOINTER under Harbour
In-Reply-To: <9257026e0707270413g5119f9a4j5535890a78e5b15@mail.gmail.com>
References: <9257026e0707270257m4b7fd130ub9725f0f05936aca@mail.gmail.com>
	<20070727100633.GA10606@localhost.localdomain>
	<9257026e0707270359q4f5075car9dadb1bf555a50e4@mail.gmail.com>
	<E80C91CE-EEA1-436F-9A36-2F6194203712@syenar.hu>
	<9257026e0707270413g5119f9a4j5535890a78e5b15@mail.gmail.com>
Message-ID: <7D44A457-A353-4C82-91A2-FA9B5CED593E@syenar.hu>

>> Please add it as HB_ISHASH() and add translation from
>> ISHASH() to hbcompat.ch for xhb compatibility.
>
> Why? Aren't hashes supported in "standard" Harbour?

They are, but we're prepending HB_ to every extension.
See the Harbour level HASH API.

>> What is type "X"?
>
> Sorry for X I meant ALL types.

I thought it's something obvious I missing :)

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Jul 27 07:22:56 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul 27 07:22:57 2007
Subject: [xHarbour-developers] [Harbour] Problem creating .adt files
In-Reply-To: <20070727110932.GD10606@localhost.localdomain>
References: <20070726115503.GB25341@localhost.localdomain>
	<025b01c7cfaf$ccca39a0$0301a8c0@bh>
	<20070727110932.GD10606@localhost.localdomain>
Message-ID: <08BE6292-396D-4AC5-874B-EAD761D9E809@syenar.hu>

Hi Przemek and all,

On 2007.07.27., at 13:09, Przemyslaw Czerpak wrote:

> On Thu, 26 Jul 2007, bhays wrote:
>>>> But maybe it's time to define new format for extended database  
>>>> types
>> common for all RDDs. Now we do not have RDD portable DBCREATE()  
>> structure.
>> Yes, this would be good.
>
> I'll be absent for few days. When I'll be back I'll try to create some
> basic proposition which we can start to discuss. I hope that Marcelo
> and Jacek (SQLRDD/MEDIATOR) will also take a part in discussion.
>
>> Yes, we discussed this about 6 months ago when I needed to create  
>> a DLL that
>> used FiveWin and ADS.
>> Antonio was nice enough to modify his code to use  
>> hb_GetSetStructPtr()
>> instead of direct access to the internal structure.
>> I believe there was some other reason why it was not as simple as  
>> declaring
>> that structure as dllexport, but I don't remember those specifics  
>> right now.
>
> Just make a test and declare hb_set with DLLIMPORT (not DLLEXPORT)
> attribute and then recompile ADS RDD from Harbour. It will work.
>
>> When you want to make it all thread safe, I'll be eager to help.
>
> Thank you very much.
> I'll try to sync both RDDs ASAP but maybe it will be better to define
> first some hb_getSet*() functions in both projects? Please also note

I'd propose hb_setGet*() to stay whithin the hb_set* namespace for
all SET related C level API.

Brgds,
Viktor

From druzus at priv.onet.pl  Fri Jul 27 07:23:45 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jul 27 07:24:20 2007
Subject: [Harbour] ISPOINTER under Harbour
In-Reply-To: <E80C91CE-EEA1-436F-9A36-2F6194203712@syenar.hu>
References: <9257026e0707270257m4b7fd130ub9725f0f05936aca@mail.gmail.com>
	<20070727100633.GA10606@localhost.localdomain>
	<9257026e0707270359q4f5075car9dadb1bf555a50e4@mail.gmail.com>
	<E80C91CE-EEA1-436F-9A36-2F6194203712@syenar.hu>
Message-ID: <20070727112345.GF10606@localhost.localdomain>

On Fri, 27 Jul 2007, Szak?ts Viktor wrote:
> Please add it as HB_ISHASH() and add translation from

We already have HB_ISHASH() function

> ISHASH() to hbcompat.ch for xhb compatibility.
> >Also I'd change Valtype( x ) == "X" with HB_ISX( x )
> What is type "X"?

Any type - it was meta marker :-) - see xHarbour's common.ch
The only one thing which can be taken from xHarbour common.ch
and is safe are translations:
    IS*(<x>) => HB_IS*(<x>)

HB_IS*(<x>) is a little bit faster then VALTYPE(<x>) == <c>

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Jul 27 09:03:04 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jul 27 09:03:07 2007
Subject: [Harbour] ISPOINTER under Harbour
In-Reply-To: <7D44A457-A353-4C82-91A2-FA9B5CED593E@syenar.hu>
References: <9257026e0707270257m4b7fd130ub9725f0f05936aca@mail.gmail.com>
	<20070727100633.GA10606@localhost.localdomain>
	<9257026e0707270359q4f5075car9dadb1bf555a50e4@mail.gmail.com>
	<E80C91CE-EEA1-436F-9A36-2F6194203712@syenar.hu>
	<9257026e0707270413g5119f9a4j5535890a78e5b15@mail.gmail.com>
	<7D44A457-A353-4C82-91A2-FA9B5CED593E@syenar.hu>
Message-ID: <9257026e0707270603n44f7c568u889e83f73b294252@mail.gmail.com>

On 7/27/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> They are, but we're prepending HB_ to every extension.
> See the Harbour level HASH API.

Sorry if I ask again but I'm not sure I understood.

Can I add:

#xtranslate ISPOINTER( <xValue> )   => HB_ISPOINTER( <xValue> )
#xtranslate ISHASH( <xValue> )   => HB_ISHASH( <xValue> )

and replace all the other:
...
#translate ISARRAY( <xValue> )     => ( ValType( <xValue> ) == "A" )
...
with
...
#xtranslate ISARRAY( <xValue> )     => HB_ISARRAY( <xValue> )
...
into common.ch?

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Fri Jul 27 09:14:08 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jul 27 09:14:12 2007
Subject: [Harbour] ISPOINTER under Harbour
In-Reply-To: <20070727111837.GE10606@localhost.localdomain>
References: <9257026e0707270257m4b7fd130ub9725f0f05936aca@mail.gmail.com>
	<20070727100633.GA10606@localhost.localdomain>
	<9257026e0707270359q4f5075car9dadb1bf555a50e4@mail.gmail.com>
	<20070727111837.GE10606@localhost.localdomain>
Message-ID: <9257026e0707270614h2ab6baa6u897977bd904a53de@mail.gmail.com>

On 7/27/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> This is translation can damage valid code. IMHO It's a bug which
> should be fixed in xHarbur. F.e. try to compile and run this code
> using Clipper/Harbour and then xHarbour:

Sorry I meant the right side of ISxxxx(), not the "optimizations" of
Valtype(x)=="X"

> AFAIK we already have such trnaslation.

Sorry, you're right. I didn't add hbcompat.ch in the right place.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Fri Jul 27 09:15:30 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul 27 09:15:34 2007
Subject: [Harbour] ISPOINTER under Harbour
In-Reply-To: <9257026e0707270603n44f7c568u889e83f73b294252@mail.gmail.com>
References: <9257026e0707270257m4b7fd130ub9725f0f05936aca@mail.gmail.com>
	<20070727100633.GA10606@localhost.localdomain>
	<9257026e0707270359q4f5075car9dadb1bf555a50e4@mail.gmail.com>
	<E80C91CE-EEA1-436F-9A36-2F6194203712@syenar.hu>
	<9257026e0707270413g5119f9a4j5535890a78e5b15@mail.gmail.com>
	<7D44A457-A353-4C82-91A2-FA9B5CED593E@syenar.hu>
	<9257026e0707270603n44f7c568u889e83f73b294252@mail.gmail.com>
Message-ID: <4E1CE5AA-0294-434A-8325-C13A664E75FF@syenar.hu>

Hi Lorenzo,

On 2007.07.27., at 15:03, Lorenzo Fiorini wrote:

> On 7/27/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:
>
>> They are, but we're prepending HB_ to every extension.
>> See the Harbour level HASH API.
>
> Sorry if I ask again but I'm not sure I understood.
>
> Can I add:
>
> #xtranslate ISPOINTER( <xValue> )   => HB_ISPOINTER( <xValue> )
> #xtranslate ISHASH( <xValue> )   => HB_ISHASH( <xValue> )

These should go to hbcompat.ch, since they break the HB_
naming rule and they're solely needed for xhb compatibility.
We gather all the xhb compatibility translations in hbcompat.ch.

> and replace all the other:
> ...
> #translate ISARRAY( <xValue> )     => ( ValType( <xValue> ) == "A" )
> ...
> with
> ...
> #xtranslate ISARRAY( <xValue> )     => HB_ISARRAY( <xValue> )
> ...
> into common.ch?

I agree with Przemek that this would break compatibility,
so I vote against it.

I think the point in having a separate HB_ISARRAY() is
to have a function version _too_ with similar functionality
to the #define, in case someone needs it (or just want to
always use HB_IS*() in a uniform way). If we map the normal
one to this extended version, users will lose that choice
(and also compatibility).

Brgds,
Viktor

From gerrylist at drouillard.ca  Fri Jul 27 09:15:19 2007
From: gerrylist at drouillard.ca (Gerald Drouillard)
Date: Fri Jul 27 09:15:37 2007
Subject: [Harbour] ( ... ) use
In-Reply-To: <20070727105618.GC10606@localhost.localdomain>
References: <20070725213118.GA18544@localhost.localdomain>	<46a7c41b.2381420a.7981.51f3@mx.google.com>
	<20070727105618.GC10606@localhost.localdomain>
Message-ID: <46A9EFE7.5000205@drouillard.ca>

Przemyslaw Czerpak wrote:
> Few months ago I suggested xHarbour developers to take Harbour core code
> and add xHarbour extensions (in core code there is only few xHarbour
> extensions not supported by Harbour and much more extensions has Harbour
> which are not supported by xHarbour). Such operation should not take more
> then few days and will resolve most of xHarbour's problem but it looked
> like xHarbour developers thought I was joking. I wasn't and IMHO it's still
> very good choice for xHarbour.
IMO, (x)Harbour projects are in some was like the Samba 3.x/4.x 
projects.  There is the 3.x base of stable development/fixes, then you 
have the 4.x team that is more ambitious ... but at the end of the day, 
after the code has proven itself in the 4.x branch it is brought into 
the 3 branch and vise-versa.  In (x)Harbour the personalities are 
keeping any kind of joint effort difficult to sync.

-- 
Regards
--------------------------------------
Gerald Drouillard
Technology Architect
Drouillard & Associates, Inc.
http://www.Drouillard.ca
From lorenzo.fiorini at gmail.com  Fri Jul 27 09:25:53 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jul 27 09:25:57 2007
Subject: [Harbour] ISPOINTER under Harbour
In-Reply-To: <4E1CE5AA-0294-434A-8325-C13A664E75FF@syenar.hu>
References: <9257026e0707270257m4b7fd130ub9725f0f05936aca@mail.gmail.com>
	<20070727100633.GA10606@localhost.localdomain>
	<9257026e0707270359q4f5075car9dadb1bf555a50e4@mail.gmail.com>
	<E80C91CE-EEA1-436F-9A36-2F6194203712@syenar.hu>
	<9257026e0707270413g5119f9a4j5535890a78e5b15@mail.gmail.com>
	<7D44A457-A353-4C82-91A2-FA9B5CED593E@syenar.hu>
	<9257026e0707270603n44f7c568u889e83f73b294252@mail.gmail.com>
	<4E1CE5AA-0294-434A-8325-C13A664E75FF@syenar.hu>
Message-ID: <9257026e0707270625s76af92cbw282bc8d36f1ca4e4@mail.gmail.com>

On 7/27/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> I agree with Przemek that this would break compatibility,
> so I vote against it.

Sorry, I still don't understand. Przemek said:

>>>>>
The only one thing which can be taken from xHarbour common.ch
and is safe are translations:
   IS*(<x>) => HB_IS*(<x>)

HB_IS*(<x>) is a little bit faster then VALTYPE(<x>) == <c>
>>>>>

and this is what I wanted to do.

Anyway it's not a big problem, I can keep it local.

best regards,
Lorenzo
From druzus at priv.onet.pl  Fri Jul 27 09:33:29 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Jul 27 09:33:35 2007
Subject: [Harbour] ISPOINTER under Harbour
In-Reply-To: <4E1CE5AA-0294-434A-8325-C13A664E75FF@syenar.hu>
References: <9257026e0707270257m4b7fd130ub9725f0f05936aca@mail.gmail.com>
	<20070727100633.GA10606@localhost.localdomain>
	<9257026e0707270359q4f5075car9dadb1bf555a50e4@mail.gmail.com>
	<E80C91CE-EEA1-436F-9A36-2F6194203712@syenar.hu>
	<9257026e0707270413g5119f9a4j5535890a78e5b15@mail.gmail.com>
	<7D44A457-A353-4C82-91A2-FA9B5CED593E@syenar.hu>
	<9257026e0707270603n44f7c568u889e83f73b294252@mail.gmail.com>
	<4E1CE5AA-0294-434A-8325-C13A664E75FF@syenar.hu>
Message-ID: <20070727133329.GA13052@localhost.localdomain>

On Fri, 27 Jul 2007, Szak?ts Viktor wrote:
> >and replace all the other:
> >#translate ISARRAY( <xValue> )     => ( ValType( <xValue> ) == "A" )
> >with
> >#xtranslate ISARRAY( <xValue> )     => HB_ISARRAY( <xValue> )
> >into common.ch?
> I agree with Przemek that this would break compatibility,
> so I vote against it.

Seems that we lost the context.
    #translate ISARRAY( <xValue> )    => ( ValType( <xValue> ) == "A" )
can be IMHO safely replaced by:
    #xtranslate ISARRAY( <xValue> )   => ( HB_ISARRAY( <xValue> ) )

The only possible problems I can see is that user have some own PP
rules which tries to preprocess:
    ( ValType( <xValue> ) == "A" )
to sth strange or if he will try to use some of IS*() in sth like
index expression - in such case we will need strict Clipper compatibility.
Anyhow I think this is not a big problem and because
    ( HB_ISARRAY( <xValue> ) )
is faster then
    ( ValType( <xValue> ) == "A" )
I think that such modification is acceptable though each user can
make it himself and I'm not sure we have to change common.ch

But in xHarbour's common.ch you will find also other rules like:

    #xtranslate VALTYPE( <Expr> ) == "N" => HB_ISNUMERIC( <Expr> )

which are breaking valid code (see the example I sent) and such
rules cannot be added to Harbour source code.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Jul 27 09:38:53 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul 27 09:38:53 2007
Subject: [Harbour] ISPOINTER under Harbour
In-Reply-To: <9257026e0707270625s76af92cbw282bc8d36f1ca4e4@mail.gmail.com>
References: <9257026e0707270257m4b7fd130ub9725f0f05936aca@mail.gmail.com>
	<20070727100633.GA10606@localhost.localdomain>
	<9257026e0707270359q4f5075car9dadb1bf555a50e4@mail.gmail.com>
	<E80C91CE-EEA1-436F-9A36-2F6194203712@syenar.hu>
	<9257026e0707270413g5119f9a4j5535890a78e5b15@mail.gmail.com>
	<7D44A457-A353-4C82-91A2-FA9B5CED593E@syenar.hu>
	<9257026e0707270603n44f7c568u889e83f73b294252@mail.gmail.com>
	<4E1CE5AA-0294-434A-8325-C13A664E75FF@syenar.hu>
	<9257026e0707270625s76af92cbw282bc8d36f1ca4e4@mail.gmail.com>
Message-ID: <91C6EFEE-7344-467B-9C83-4817FAAF2514@syenar.hu>


On 2007.07.27., at 15:25, Lorenzo Fiorini wrote:

> On 7/27/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:
>
>> I agree with Przemek that this would break compatibility,
>> so I vote against it.
>
> Sorry, I still don't understand. Przemek said:
>
>>>>>>
> The only one thing which can be taken from xHarbour common.ch
> and is safe are translations:
>    IS*(<x>) => HB_IS*(<x>)
>
> HB_IS*(<x>) is a little bit faster then VALTYPE(<x>) == <c>
>>>>>>
>
> and this is what I wanted to do.
>
> Anyway it's not a big problem, I can keep it local.

Okey, I've checked the xhb common.ch and now see clearer,
what you're saying seems good to me too now.

Brgds,
Viktor



From guy.roussin at teledetection.fr  Fri Jul 27 11:43:16 2007
From: guy.roussin at teledetection.fr (Guy Roussin)
Date: Fri Jul 27 11:43:20 2007
Subject: [Harbour] Segfault with hbmysql lib
Message-ID: <46AA1294.9090801@teledetection.fr>

Hi,

I know this is bad code but i get a segmentation fault
with this 4 lines of code ("Htest" is suppose to not exist):

---
proc main()
local oServer
oServer := TMySQLServer():New("Htest", "Utest", "")
oServer:SelectDB("Dtest")
---

I compile it with :

$ hbmk -n -gttrm -L/usr/lib/mysql -lmysqlclient

Thank you.

Guy
From dmacias at mail.udg.mx  Fri Jul 27 12:54:56 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Jul 27 12:54:59 2007
Subject: [Harbour] OffTopic: XMAS
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <46AA2360.4000603@mail.udg.mx>

I am using a new wireless router which include a log feature

I see many lines of these types:

---------------------
Jul 27 08:37:52 	Xmas port scan attack from WAN (ip:216.239.51.104) 
detected.
---------------------
Jul 27 08:25:12 	Xmas port scan attack from WAN (ip:208.111.3.147) detected.
---------------------
Jul 27 06:31:22 	Xmas port scan attack from WAN (ip:148.243.168.21) 
detected.
---------------------

which are:

[E:\]host 216.239.51.104
216.239.51.104 = kc-in-f104.google.com

[E:\]host 208.111.3.147
208.111.3.147 = harbour-project.org

[E:\]host 148.243.168.21
148.243.168.21 = na-148-243-168-21.na.avantel.net.mx


At this moment, only appear those 3 IP in list

What they mean ? are false alarm ? what is doing harbour-project.org in 
list ?


David Macias

From harbour.01 at syenar.hu  Fri Jul 27 13:39:09 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul 27 13:39:08 2007
Subject: [Harbour] Fwd: [ alexandria-Support Requests-1754599 ] CVS
	repository clean-up: harbour-project
References: <E1IETBb-0006wL-MH@sc8-sf-web22.sourceforge.net>
Message-ID: <F04139D3-C5B8-4ADB-876B-59268336B35C@syenar.hu>

The CVS repository has been wiped. See below.

Brgds,
Viktor

Begin forwarded message:

> From: "SourceForge.net" <noreply@sourceforge.net>
> Date: 2007. j?lius 27. 19:01:07 GMT+02:00
> To: noreply@sourceforge.net
> Subject: [ alexandria-Support Requests-1754599 ] CVS repository  
> clean-up: harbour-project
>
> Support Requests item #1754599, was opened at 2007-07-16 03:52
> Message generated for change (Comment added) made by burley
> You can respond by visiting:
> https://sourceforge.net/tracker/? 
> func=detail&atid=200001&aid=1754599&group_id=1
>
> Please note that this message will contain a full copy of the  
> comment thread,
> including the initial issue submission, for this request,
> not just the latest update.
> Category: Project CVS Services
> Group: Administrative
>> Status: Closed
> Priority: 9
> Private: No
> Submitted By: Viktor Szakats (vszakats)
> Assigned to: David Burley (burley)
> Summary: CVS repository clean-up: harbour-project
>
> Initial Comment:
> Hi folks,
>
> Would you be so kind to purge the whole CVS repository of
> https://sourceforge.net/projects/harbour-project ?
>
> We have made a successful move to SVN a while ago, so
> we don't need CVS anymore.
>
> Brgds,
> Viktor Szakats
>
>
> ----------------------------------------------------------------------
>
> Comment By: David Burley (burley)
> Date: 2007-07-27 13:01
>
> Message:
> Logged In: YES
> user_id=597273
> Originator: NO
>
> Greetings,
>
> Per your request, the specified modules (and their contents)
> have been removed from your project CVS repository.  Should you
> require further assistance from the SourceForge.net team,
> please submit a new support request.
>
> NOTE: In rare circumstances, some of the changes that we make
> to your repository may not synchronize with the pserver
> repository until you check-in a change to your developer
> repository.  Be sure to make such a change and wait up to an
> hour before reporting any anomalies regarding actions we
> performed for you, unless you have verified the problem using
> developer CVS or the web interface.
>
> Thank you,
>
> SourceForge.net support
>
> ----------------------------------------------------------------------
>
> Comment By: David Burley (burley)
> Date: 2007-07-23 09:22
>
> Message:
> Logged In: YES
> user_id=597273
> Originator: NO
>
> Greetings,
>
> This canned response is used by the SourceForge.net team to
> convey information about how this Support Request will be
> handled.  Please read the entirety of this comment before
> taking any further action; information enclosed in this comment
> will help you to ensure that you have an excellent support
> experience.
>
> The SourceForge.net team takes all reported issues seriously;
> we will work to provide you a complete, accurate, and timely
> response to your inquiry.  Information about our support
> policies and procedures may be found here:
> https://sourceforge.net/docs/C01
>
> ABOUT THIS ISSUE: Based on the initial review of this request,
> we have determined that this issue will be considered to have
> High Priority.  Issues within this category typically include
> high-priority issues related to the SourceForge.net site or
> services, such as CVS repository clean up, CVS stale locks, CVS
> import requests, user account issues, and support inquiries.
> A description of our issue priorities may be found here:
> https://sourceforge.net/docs/C01#issue_priorities
>
> TRIAGE PROCESS: The initial review of this issue has resulted
> in a member of the SourceForge.net staff determining who should
> process this issue, and a change in the Priority, Summary,
> Assignee, Group and Category settings for this request.
>
> WHAT TO EXPECT: Issues of this nature will typically be
> reviewed again by the assigned member of the SourceForge.net
> team within 3 business days (the SourceForge.net team works at
> least Monday through Friday, 9am to 5pm Pacific, excepting
> holidays), though most issues of this nature are handled within
> 24 hours of submission.  Within our next response, we will make
> a determination regarding your request, or ask for
> clarification of this issue report.  Please wait patiently for
> our next review of, and response to, this request.
>
> INQUIRING ABOUT THE STATUS OF THIS ISSUE: Should you have
> questions or concerns regarding the status of this issue,
> simply add a comment to this support request.   All comments
> you post to this support request will be received by the
> SourceForge.net team member who has been assigned this issue.
> Please do not submit a second support request about this issue
> (add a comment to this request instead), and do not attempt to
> contact the assignee of this request via email; all additional
> information or comments about this request should be posted as
> a comment to this request.
>
> Thank you,
>
> SourceForge.net support
>
> ----------------------------------------------------------------------
>
> You can respond by visiting:
> https://sourceforge.net/tracker/? 
> func=detail&atid=200001&aid=1754599&group_id=1

From lostmyhearttoher at gmail.com  Fri Jul 27 14:52:13 2007
From: lostmyhearttoher at gmail.com (Lost)
Date: Fri Jul 27 14:52:14 2007
Subject: [Harbour] FOR EACH overloading
Message-ID: <46AA3EDD.3040405@gmail.com>

Hi all,
I'd like to traverse some specialized list objects I use with the "FOR
EACH" syntax, given that Przemek added some support for it. However,
after searching this mailing list, I could find no specs for doing so.
I tried then searching the source code, but the only implementation I
found (contrib/ole2/win32ole.prg) makes no sense to me (I'm not W32
user) and worse yet, Przemek himself flagged it as "not tested".

In summary, I could find no documentation or samples on the subject.

Thus, my question is, does anybody have a hint regarding how to use and
overload the __enum messages? Is the current implementation usable? I
wouldn't mind writing some documentation on the subject, as long as I
can (with your help! ;)) make sense of it.

Thanks in advance, and best regards,

Lost
From philb at philb.us  Fri Jul 27 17:50:18 2007
From: philb at philb.us (Phil Barnett)
Date: Fri Jul 27 17:52:27 2007
Subject: [Harbour] OffTopic: XMAS
In-Reply-To: <46AA2360.4000603@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<46AA2360.4000603@mail.udg.mx>
Message-ID: <200707271750.18831.philb@philb.us>

On Friday 27 July 2007, David Arturo Macias Corona wrote:
> I am using a new wireless router which include a log feature
>
> I see many lines of these types:
>
> ---------------------
> Jul 27 08:37:52 	Xmas port scan attack from WAN (ip:216.239.51.104)
> detected.
> ---------------------
> Jul 27 08:25:12 	Xmas port scan attack from WAN (ip:208.111.3.147)
> detected. ---------------------
> Jul 27 06:31:22 	Xmas port scan attack from WAN (ip:148.243.168.21)
> detected.
> ---------------------
>
> which are:
>
> [E:\]host 216.239.51.104
> 216.239.51.104 = kc-in-f104.google.com
>
> [E:\]host 208.111.3.147
> 208.111.3.147 = harbour-project.org
>
> [E:\]host 148.243.168.21
> 148.243.168.21 = na-148-243-168-21.na.avantel.net.mx
>
>
> At this moment, only appear those 3 IP in list
>
> What they mean ? are false alarm ? what is doing harbour-project.org in
> list ?

It is probably misidentified traffic.

-- 
Phil Barnett
AI4OF
SKCC #600
From antonioharbour at gmail.com  Sat Jul 28 04:01:54 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sat Jul 28 04:02:01 2007
Subject: [Harbour] make_gnu.sh
Message-ID: <1185609714.9960.0.camel@anto-desktop>

Przemek,

Are you able to build current xharbour using make_gnu.sh ?

It gives lots of errors here...

Thanks,

From dmacias at mail.udg.mx  Sat Jul 28 16:01:26 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sat Jul 28 16:01:31 2007
Subject: [Harbour] Re: OffTopic: XMAS
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <46ABA096.6050502@mail.udg.mx>

 >> What they mean ? are false alarm ? what is doing harbour-project.org
 >> in list ?

 >It is probably misidentified traffic.

Thanks Phil
This "misidentified traffic":
- are normal ?
- are often ?
- indicates failures of my new router ?

David Macias


From antonioharbour at gmail.com  Sun Jul 29 11:03:55 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Jul 29 11:04:06 2007
Subject: [Harbour] Linux applications question
Message-ID: <1185721435.7290.13.camel@anto-desktop>

Przemek, all,

If I build this little test.c:

#include <stdio.h>

int main( int args, char * argv[] )
{
   printf( "hello world!\n" );
   return 0;
}

and then build it doing: gcc test.c -otest

I can't execute the resulting application from Nautilus or from
gnome-commander, but I can run it from a terminal window. 

Is there a way to execute it from Nautilus or gnome-commander ? thanks

regards,

Antonio

From teo at windtelsoft.com  Sun Jul 29 19:44:21 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Sun Jul 29 19:44:29 2007
Subject: [Harbour] ("ALIAS")->( ... ) : bug or feature ?
Message-ID: <200707291844.21559.teo@windtelsoft.com>

Hello,

The sample:

<prg>
FUNCTION Main()

  ? ("COKE")->(RecNo())
  ? ("COKE")->(Bof())
  ? ("COKE")->(Eof())
  ? ("COKE")->(Found())

RETURN 1
</prg>

compiled with current Harbour runs the binary without error and gives:
0
.T.
.T.
.F.

xHarbour binary compiled inmediatly throws a: "error base/1002 Alias does not 
exist: COKE" at the first line.

Is this the expected behavior ? and if so why ?

best regards

Teo Fonrouge

PD: Harbour compiler builded with the: "--with xhb --with tip" flags.
From teo at windtelsoft.com  Sun Jul 29 20:18:45 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Sun Jul 29 20:18:50 2007
Subject: [Harbour] Linux applications question
In-Reply-To: <1185721435.7290.13.camel@anto-desktop>
References: <1185721435.7290.13.camel@anto-desktop>
Message-ID: <200707291918.45583.teo@windtelsoft.com>

On Sunday 29 July 2007 10:03:55 am Antonio Linares wrote:
> Przemek, all,
>
> If I build this little test.c:
>
> #include <stdio.h>
>
> int main( int args, char * argv[] )
> {
>    printf( "hello world!\n" );
>    return 0;
> }
>
> and then build it doing: gcc test.c -otest
>
> I can't execute the resulting application from Nautilus or from
> gnome-commander, but I can run it from a terminal window.
>
> Is there a way to execute it from Nautilus or gnome-commander ? thanks

In fact the program IS executed but you can't see anything because the stdout 
output is not processed at all ( nautilus nor gnome-commander does nothing 
with the stdout stream from the program). A terminal window does.


best regards

Teo Fonrouge
From antonioharbour at gmail.com  Sun Jul 29 20:22:54 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Jul 29 20:23:05 2007
Subject: [Harbour] Linux applications question
In-Reply-To: <200707291918.45583.teo@windtelsoft.com>
Message-ID: <46ad2f64.1e87420a.7eb1.62c3@mx.google.com>

Teo, 

>
In fact the program IS executed but you can't see anything because the
stdout output is not processed at all ( nautilus nor gnome-commander does
nothing with the stdout stream from the program). A terminal window does.
>

I have tried to call some GTK+ GUI functions from the application and they
show fine from the terminal, but they are not shown from Nautilus neither
gnome-commander. Any hints ?

Thanks,

Antonio

From lostmyhearttoher at gmail.com  Sun Jul 29 21:00:15 2007
From: lostmyhearttoher at gmail.com (Lost)
Date: Sun Jul 29 21:00:15 2007
Subject: [Harbour] Harbour project website
Message-ID: <46AD381F.3090504@gmail.com>

Hi all,
I've found a couple of issues regarding the project's page:
1- The link to "latest changelog" still points to the CVS version, thus
going nowhere presently. I think it should be updated to point to the
new SVN version.
2- Something similar happens in the FAQ page. There are entries
depicting CVS usage, but there's nothing related to the new SVN access.
Maybe a link to sourceforge's instructions page?

Best regards,

Pablo
From filip_stoklosa at op.pl  Mon Jul 30 05:40:16 2007
From: filip_stoklosa at op.pl (fs)
Date: Mon Jul 30 05:44:29 2007
Subject: [Harbour] WAIT / INKEY kills CPU(Celeron 1.0GHz) on Fedora 7
In-Reply-To: <46ad2f64.1e87420a.7eb1.62c3@mx.google.com>
References: <46ad2f64.1e87420a.7eb1.62c3@mx.google.com>
Message-ID: <200707301140.17006.filip_stoklosa@op.pl>

Hello,

On Fedora 7 WAIT or INKEY(0) utilizes maksimum CPU time :(

Try this test.prg:

function main()
wait // inkey(0)
return(0)

On my system top shows:
PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
26854 root      16   0  6352 4260 1880 R  67.2  1.7   3:19.43 test

xHarbour from last CVS, but it's also is true for older source.
On Fedora 6 is OK.

regards, 
Filip  
From lorenzo.fiorini at gmail.com  Mon Jul 30 06:02:08 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jul 30 06:02:12 2007
Subject: [Harbour] WAIT / INKEY kills CPU(Celeron 1.0GHz) on Fedora 7
In-Reply-To: <200707301140.17006.filip_stoklosa@op.pl>
References: <46ad2f64.1e87420a.7eb1.62c3@mx.google.com>
	<200707301140.17006.filip_stoklosa@op.pl>
Message-ID: <9257026e0707300302t613cd53du9b53352302d9c9e9@mail.gmail.com>

On 7/30/07, fs <filip_stoklosa@op.pl> wrote:

> On Fedora 7 WAIT or INKEY(0) utilizes maksimum CPU time :(

Przemyslaw has adressed it many months ago.

Look in the ChangeLog for idle.c and in the mail archives for my report.

best regards,
Lorenzo
From filip_stoklosa at op.pl  Mon Jul 30 07:05:59 2007
From: filip_stoklosa at op.pl (fs)
Date: Mon Jul 30 07:10:14 2007
Subject: [Harbour] WAIT / INKEY kills CPU(Celeron 1.0GHz) on Fedora 7
In-Reply-To: <9257026e0707300302t613cd53du9b53352302d9c9e9@mail.gmail.com>
References: <46ad2f64.1e87420a.7eb1.62c3@mx.google.com>
	<200707301140.17006.filip_stoklosa@op.pl>
	<9257026e0707300302t613cd53du9b53352302d9c9e9@mail.gmail.com>
Message-ID: <200707301305.59848.filip_stoklosa@op.pl>

Dnia poniedzia?ek, 30 lipca 2007 12:02, Lorenzo Fiorini napisa?:
> On 7/30/07, fs <filip_stoklosa@op.pl> wrote:
> > On Fedora 7 WAIT or INKEY(0) utilizes maksimum CPU time :(
>
> Przemyslaw has adressed it many months ago.
>
> Look in the ChangeLog for idle.c and in the mail archives for my report.
>
> best regards,
> Lorenzo

Thanks,

I see, in Harbour there is 
	idle.c
	      static const struct timespec nanosecs = { 0, 1000000 };
but in xHarbour is
	idle.c
	      static struct timespec nanosecs = { 0, 1000 }; 

I will send info to comp.lang.xharbour - maybe they change

best regards,
Filip
From druzus at priv.onet.pl  Mon Jul 30 10:39:49 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jul 30 10:39:56 2007
Subject: [Harbour] ("ALIAS")->( ... ) : bug or feature ?
In-Reply-To: <200707291844.21559.teo@windtelsoft.com>
References: <200707291844.21559.teo@windtelsoft.com>
Message-ID: <20070730143949.GA31594@localhost.localdomain>

On Sun, 29 Jul 2007, Teo Fonrouge wrote:
> Hello,
> The sample:
> <prg>
> FUNCTION Main()
> 
>   ? ("COKE")->(RecNo())
>   ? ("COKE")->(Bof())
>   ? ("COKE")->(Eof())
>   ? ("COKE")->(Found())
> 
> RETURN 1
> </prg>
> compiled with current Harbour runs the binary without error and gives:
> 0
> .T.
> .T.
> .F.

Just like in Clipper. I made it Clipper compatible few months ago.

> xHarbour binary compiled inmediatly throws a: "error base/1002 Alias does not 
> exist: COKE" at the first line.

Only th older versions. Current xHarbour CVS has my modifications from
Harbour.

> Is this the expected behavior ? and if so why ?

Yes though if you think it's wrong then I can change it
but in the past users reported the previous behavior as
Clipper incompatible.

best regards,
Przemek
From lkrausem at shaw.ca  Mon Jul 30 11:22:39 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Mon Jul 30 11:23:59 2007
Subject: [Harbour] FOR EACH overloading
In-Reply-To: <46AA3EDD.3040405@gmail.com>
References: <46AA3EDD.3040405@gmail.com>
Message-ID: <46AE023F.5010108@shaw.ca>

Lost:

Look in Changelog.18

2007-03-12 14:30 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbexpra.c
    * emulate xHarbour HB_ENUMINDEX() inside FOR EACH loop when
      HB_COMPAT_XHB macro is set
      It's only for compatibility - I strongly suggest to use
            <unumvar>:__enumIndex()
      which is more flexible and allow to chose the enumerator
      variable not only the one from last loop

Regards,

Lost wrote:

>Hi all,
>I'd like to traverse some specialized list objects I use with the "FOR
>EACH" syntax, given that Przemek added some support for it. However,
>after searching this mailing list, I could find no specs for doing so.
>I tried then searching the source code, but the only implementation I
>found (contrib/ole2/win32ole.prg) makes no sense to me (I'm not W32
>user) and worse yet, Przemek himself flagged it as "not tested".
>
>In summary, I could find no documentation or samples on the subject.
>
>Thus, my question is, does anybody have a hint regarding how to use and
>overload the __enum messages? Is the current implementation usable? I
>wouldn't mind writing some documentation on the subject, as long as I
>can (with your help! ;)) make sense of it.
>
>Thanks in advance, and best regards,
>
>Lost
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>  
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From druzus at priv.onet.pl  Mon Jul 30 11:29:04 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jul 30 11:29:13 2007
Subject: [Harbour] FOR EACH overloading
In-Reply-To: <46AA3EDD.3040405@gmail.com>
References: <46AA3EDD.3040405@gmail.com>
Message-ID: <20070730152904.GB31594@localhost.localdomain>

On Fri, 27 Jul 2007, Lost wrote:
> Hi all,
> I'd like to traverse some specialized list objects I use with the "FOR
> EACH" syntax, given that Przemek added some support for it. However,
> after searching this mailing list, I could find no specs for doing so.
> I tried then searching the source code, but the only implementation I
> found (contrib/ole2/win32ole.prg) makes no sense to me (I'm not W32
> user) and worse yet, Przemek himself flagged it as "not tested".

I also do not use Windows so it will be nice if some Windows users can
test if FOR EACH overloading works in WIN32OLE - I added it but I cannot
test it in Linux.

> In summary, I could find no documentation or samples on the subject.
> Thus, my question is, does anybody have a hint regarding how to use and
> overload the __enum messages? Is the current implementation usable? I
> wouldn't mind writing some documentation on the subject, as long as I
> can (with your help! ;)) make sense of it.
> Thanks in advance, and best regards,

See the code below. I hope it will illustrate how to overload FOR EACH
in Harbour. It uses two different methods of overloading but in fact you
can overload any of __enum*() messages if you need it. This code also
shows how flexible is message interface used by Harbour in FOR EACH
implementation in comparison to xHarbour. If some of you tried to
overload FOR EACH in xHarbour knows that it's not possible to reach
such functionality as presented below.

best regards,
Przemek



#include "hbclass.ch"
proc main()
local e, o

   ? "FOR EACH e IN myclass1()"
   o:=myclass1()
   for each e in o
      ? e:__enumIndex(), "=>", e
   next
   ? "FOR EACH e IN myclass1() DESCEND"
   for each e in o descend
      ? e:__enumIndex(), "=>", e
   next
   ?
   ? "FOR EACH e IN myclass2()"
   o:=myclass2()
   for each e in o
      ? e:__enumIndex(), "=>", e
   next
   ? "FOR EACH e IN myclass2() DESCEND"
   for each e in o descend
      ? e:__enumIndex(), "=>", e
   next
return


/* The first form of FOR EACH overloading
 * Can be use when all values can be calculated when FOR EACH starts
 * It overloads __enumStart() message which set base enumerator values.
 * for ascending iteration it sets: {"A","B","C"}
 * and for descending: {1, 2, 3}
 */
CREATE CLASS myclass1
   METHOD __enumStart( enum, lDescend )
END CLASS

METHOD __enumStart( enum, lDescend ) CLASS myclass1
   /* set base value for enumerator */
   /* important: the messages have to be send to the enumerator
    * reference (@enum) not directly to the enumerator enum
    */
   (@enum):__enumBase( iif( lDescend, {1, 2, 3}, {"A","B","C"} ) )
   return .T. /* .F. means stop iteration */


/* The second form of FOR EACH overloading
 * We are overloading the folowing messages:
 *    __enumStart()     // executed when FOR EACH starts
 *    __enumSkip()      // executed on each LOOP
 *    __enumStop()      // executed when FOR EACH stops
 * Such method can be used when we cannot calculate all values
 * when FOR EACH starts or such calculation is expensive so we
 * want to make them dynamically
 */

CREATE CLASS myclass2
   VAR    value
   METHOD __enumStart( enum, lDescend )
   METHOD __enumSkip( enum, lDescend )
   METHOD __enumStop()
END CLASS

METHOD __enumStart( enum, lDescend ) CLASS myclass2
   /* Here we can have initialization code */
   ::value := 0.00
   /* set enumerator value */
   (@enum):__enumValue( ::value )
   /* set enumerator index, to make it more funny for descend
    * iterations we will use negative indexes ;-)
    */
   (@enum):__enumIndex( iif( lDescend, -1, 1 ) )
   return .T. /* continue iteration */

METHOD __enumSkip( enum, lDescend ) CLASS myclass2
   if lDescend
      ::value -= 3
   else
      ::value += 3
   endif
   /* stop iteration when abs( ::value ) > 20 */
   if abs( ::value ) > 20
      return .F.
   endif
   /* set enumerator value */
   (@enum):__enumValue( ::value / 10.0 )
   /* the index is updated automatically but if we want some noncontinuous
    * indexes then here we van set it using (@enum):__enumIndex( nNeIndex )
    * message
    */
   return .T. /* continue iteration */

METHOD PROCEDURE __enumStop() CLASS myclass2
   /* Here we can have cleanup code */
   return
From teo at windtelsoft.com  Mon Jul 30 11:53:07 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Mon Jul 30 11:53:15 2007
Subject: [Harbour] ("ALIAS")->( ... ) : bug or feature ?
In-Reply-To: <20070730143949.GA31594@localhost.localdomain>
References: <200707291844.21559.teo@windtelsoft.com>
	<20070730143949.GA31594@localhost.localdomain>
Message-ID: <200707301053.07599.teo@windtelsoft.com>

On Monday 30 July 2007 09:39:49 am Przemyslaw Czerpak wrote:
> On Sun, 29 Jul 2007, Teo Fonrouge wrote:
> > Hello,
> > The sample:
> > <prg>
> > FUNCTION Main()
> >
> >   ? ("COKE")->(RecNo())
> >   ? ("COKE")->(Bof())
> >   ? ("COKE")->(Eof())
> >   ? ("COKE")->(Found())
> >
> > RETURN 1
> > </prg>
> > compiled with current Harbour runs the binary without error and gives:
> > 0
> > .T.
> > .T.
> > .F.
>
> Just like in Clipper. I made it Clipper compatible few months ago.
>
> > xHarbour binary compiled inmediatly throws a: "error base/1002 Alias does
> > not exist: COKE" at the first line.
>
> Only th older versions. Current xHarbour CVS has my modifications from
> Harbour.

I'm pretty sure that this test is made with latest xHarbour version.

However, if the test is made using a numeric ID for the alias, then xHarbour 
and Harbour give the same results:

<prg>
FUNCTION Main()
  LOCAL xid := 0

  ? (xid)->(RecNo())
  ? (xid)->(Bof())
  ? (xid)->(Eof())
  ? (xid)->(Found())

RETURN 1
</prg>

output is for the two compilers:
0
.T.
.T.
.F.


>
> > Is this the expected behavior ? and if so why ?
>
> Yes though if you think it's wrong then I can change it
> but in the past users reported the previous behavior as
> Clipper incompatible.

Well, it's not wrong, it's just compatible:

1. By using a numeric alias ID gives the same results in both compilers and 
clipper (I guess)
2. Using a string alias ID ( ("COKE")->( ... ) ) is not documented in the 
Clipper Guides, but, I guess, it must have the same behavior that using a 
numeric alias ID.

So, I vote for leave things as they are now.

Anyway I believe that this behavior can lead easily to hard to find bugs (as 
in my case when porting my apps from xHarbour to Harbour).

thanks Przemek.


best regards

Teo Fonrouge
From druzus at priv.onet.pl  Mon Jul 30 12:00:18 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jul 30 12:00:27 2007
Subject: [Harbour] ChangeLog 2007-07-30 18:00 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070730160018.GA1010@localhost.localdomain>

2007-07-30 18:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcompat.ch
    + added #xtranslate ISPOINTER( <xValue> )
    * simplified bit operator translations

  * harbour/include/hbapi.h
    + added #define hb_itemPutCStatic(...) hb_itemPutCConst(...)

  * harbour/include/hbapiitm.h
    - removed #define hb_retclenAdoptRaw(...) hb_retclen_buffer(...)
      it's not _exactly_ the same and in some cases it cannot be
      replaced so users should know what exactly they are doing

  * harbour/source/rtl/gttrm/gttrm.c
    + added some #ifdef OS_UNIX_COMPATIBLE for future non *nix ports

  * harbour/source/rdd/dbf1.c
    ! added RT error when someone tires to create DBF with more then
      2046 fields - without it corrupted files were created or GPF
      appeared

  * harbour/contrib/ole2/w32ole.c
    * changed hb_retclenAdoptRaw() to hb_retclen_buffer()

best regards,
Przemek
From druzus at priv.onet.pl  Mon Jul 30 12:10:10 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jul 30 12:10:16 2007
Subject: [Harbour] ChangeLog 2007-07-30 18:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070730161009.GB1010@localhost.localdomain>

2007-07-30 18:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  + harbour/tests/foreach2.prg
    * added example for FOR EACH overloading

best regards,
Przemek
From antonioharbour at gmail.com  Mon Jul 30 12:52:24 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Jul 30 12:52:33 2007
Subject: [Harbour] GTK+
Message-ID: <46ae174b.1781420a.2766.5c57@mx.google.com>

Przemek,

If I build a little C application that uses GTK+ and try to run it from
Nautilus, I can't. Only from the terminal. Any hints ?

Thanks,

Regards,

Antonio

From lostmyhearttoher at gmail.com  Mon Jul 30 12:58:16 2007
From: lostmyhearttoher at gmail.com (Lost)
Date: Mon Jul 30 12:58:15 2007
Subject: [Harbour] GTK+
In-Reply-To: <46ae174b.1781420a.2766.5c57@mx.google.com>
References: <46ae174b.1781420a.2766.5c57@mx.google.com>
Message-ID: <46AE18A8.7050204@gmail.com>

Antonio Linares escribi? el 30/07/07 a las 13:52:
> Przemek,
> 
> If I build a little C application that uses GTK+ and try to run it from
> Nautilus, I can't. Only from the terminal. Any hints ?

Sorry to step in, but could you please specify how are you building it?
I routinely write and use GTK applications and in my environemnt (Ubuntu
7.04) they run just fine.

> 
> Thanks,
> 
> Regards,
> 
> Antonio

HTH,

Lost
From antonioharbour at gmail.com  Mon Jul 30 13:01:51 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Jul 30 13:02:00 2007
Subject: [Harbour] GTK+
In-Reply-To: <46AE18A8.7050204@gmail.com>
Message-ID: <46ae1982.01a4420a.5f90.5865@mx.google.com>

>
Sorry to step in, but could you please specify how are you building it?
I routinely write and use GTK applications and in my environemnt (Ubuntu
7.04) they run just fine.
>

echo linking...
gcc $1.o -o$1 -L./../lib -L./../../harbour/lib `pkg-config --libs gtk+-2.0`
`pkg-config --libs libgnomeprintui-2.2` -lfive -lfivec -ldebug -lvm -lrtl
-lgtcrs -lncurses -llang -lrdd -lrtl -lvm -lmacro -lpp -ldbfntx -ldbfcdx
-ldbfdbt -lcommon -lgpm -lm 

Thanks,

Antonio

From lostmyhearttoher at gmail.com  Mon Jul 30 13:03:24 2007
From: lostmyhearttoher at gmail.com (Lost)
Date: Mon Jul 30 13:03:27 2007
Subject: [Harbour] FOR EACH overloading
In-Reply-To: <20070730152904.GB31594@localhost.localdomain>
References: <46AA3EDD.3040405@gmail.com>
	<20070730152904.GB31594@localhost.localdomain>
Message-ID: <46AE19DC.5000106@gmail.com>

Przemyslaw Czerpak escribi? el 30/07/07 a las 12:29:

>> Hi all,
>> I'd like to traverse some specialized list objects I use with the "FOR
>> EACH" syntax, given that Przemek added some support for it. However,
>> after searching this mailing list, I could find no specs for doing so.
>> I tried then searching the source code, but the only implementation I
>> found (contrib/ole2/win32ole.prg) makes no sense to me (I'm not W32
>> user) and worse yet, Przemek himself flagged it as "not tested".
> 
> I also do not use Windows so it will be nice if some Windows users can
> test if FOR EACH overloading works in WIN32OLE - I added it but I cannot
> test it in Linux.

Sorry, I guess I won't be of much help here...

> 
>> In summary, I could find no documentation or samples on the subject.
>> Thus, my question is, does anybody have a hint regarding how to use and
>> overload the __enum messages? Is the current implementation usable? I
>> wouldn't mind writing some documentation on the subject, as long as I
>> can (with your help! ;)) make sense of it.
>> Thanks in advance, and best regards,
> 
> See the code below. I hope it will illustrate how to overload FOR EACH
> in Harbour. It uses two different methods of overloading but in fact you
> can overload any of __enum*() messages if you need it. This code also
> shows how flexible is message interface used by Harbour in FOR EACH
> implementation in comparison to xHarbour. If some of you tried to
> overload FOR EACH in xHarbour knows that it's not possible to reach
> such functionality as presented below.
> 
> best regards,
> Przemek
> 

Great! This is the kind of documentation-by-sample that I appreciate the
most.
I'll try the provided samples, and look forward to writing some
documentation out of it.
(Slightly off topic: is there any online documentation facility for
harbour? What I see in the official page seems a bit outdated, and
definitely not extensible)

Thanks a lot, and best regards,

Lost
From lostmyhearttoher at gmail.com  Mon Jul 30 13:15:10 2007
From: lostmyhearttoher at gmail.com (Lost)
Date: Mon Jul 30 13:15:13 2007
Subject: [Harbour] GTK+
In-Reply-To: <46ae1982.01a4420a.5f90.5865@mx.google.com>
References: <46ae1982.01a4420a.5f90.5865@mx.google.com>
Message-ID: <46AE1C9E.9050006@gmail.com>

Antonio Linares escribi? el 30/07/07 a las 14:01:
> 
> echo linking...
> gcc $1.o -o$1 -L./../lib -L./../../harbour/lib `pkg-config --libs gtk+-2.0`
> `pkg-config --libs libgnomeprintui-2.2` -lfive -lfivec -ldebug -lvm -lrtl
> -lgtcrs -lncurses -llang -lrdd -lrtl -lvm -lmacro -lpp -ldbfntx -ldbfcdx
> -ldbfdbt -lcommon -lgpm -lm 

Mmm.
What window manager (eg. Gnome, KDE, etc) are you using?
How do you start the X-server?

> 
> Thanks,
> 
> Antonio
> 

HTH,

Lost
From antonioharbour at gmail.com  Mon Jul 30 13:17:31 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Jul 30 13:17:40 2007
Subject: [Harbour] GTK+
In-Reply-To: <46AE1C9E.9050006@gmail.com>
Message-ID: <46ae1d30.2876420a.7e47.5560@mx.google.com>

> What window manager (eg. Gnome, KDE, etc) are you using?

Ubuntu 7.04, Gnome

> How do you start the X-server?

It starts automatically when Ubuntu boots,

Thanks,

Regards,

Antonio

From lostmyhearttoher at gmail.com  Mon Jul 30 13:23:02 2007
From: lostmyhearttoher at gmail.com (Lost)
Date: Mon Jul 30 13:23:02 2007
Subject: [Harbour] GTK+
In-Reply-To: <46ae1982.01a4420a.5f90.5865@mx.google.com>
References: <46ae1982.01a4420a.5f90.5865@mx.google.com>
Message-ID: <46AE1E76.9000108@gmail.com>

Antonio Linares escribi? el 30/07/07 a las 14:01:
> 
> echo linking...
> gcc $1.o -o$1 -L./../lib -L./../../harbour/lib `pkg-config --libs gtk+-2.0`
> `pkg-config --libs libgnomeprintui-2.2` -lfive -lfivec -ldebug -lvm -lrtl
> -lgtcrs -lncurses -llang -lrdd -lrtl -lvm -lmacro -lpp -ldbfntx -ldbfcdx
> -ldbfdbt -lcommon -lgpm -lm 
> 
Also, since it runs from the console, maybe you can strace it?

HTH,

Lost
From antonioharbour at gmail.com  Mon Jul 30 13:28:12 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Jul 30 13:28:19 2007
Subject: [Harbour] GTK+
In-Reply-To: <46AE1E76.9000108@gmail.com>
Message-ID: <46ae1fae.1e8d420a.7f56.61d1@mx.google.com>

Lost, 

> Also, since it runs from the console, maybe you can strace it?

How to do that ? :-)

Could you provide me a small sample of a GTK+ MessageBox() alike that runs
from Nautilus ? Thanks,

Regards,

Antonio

From druzus at priv.onet.pl  Mon Jul 30 13:44:43 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jul 30 13:44:50 2007
Subject: [Harbour] GTK+
In-Reply-To: <46ae174b.1781420a.2766.5c57@mx.google.com>
References: <46ae174b.1781420a.2766.5c57@mx.google.com>
Message-ID: <20070730174443.GA2128@localhost.localdomain>

On Mon, 30 Jul 2007, Antonio Linares wrote:
> Przemek,
> If I build a little C application that uses GTK+ and try to run it from
> Nautilus, I can't. Only from the terminal. Any hints ?

What does it mean that you can't run it.
Do you have any error messages?
Did you tried to create some script to run your application?
Try to create some small script like:

    #!/bin/sh
    ./myprog 2>/tmp/ERR > /tmp/EOK

and then check what you have in /tmp/ERR and /tmp/EOK files.

best regards,
Przemek
From lostmyhearttoher at gmail.com  Mon Jul 30 14:37:41 2007
From: lostmyhearttoher at gmail.com (Lost)
Date: Mon Jul 30 14:37:42 2007
Subject: [Harbour] GTK+
In-Reply-To: <46ae1fae.1e8d420a.7f56.61d1@mx.google.com>
References: <46ae1fae.1e8d420a.7f56.61d1@mx.google.com>
Message-ID: <46AE2FF5.5020203@gmail.com>

Antonio Linares escribi? el 30/07/07 a las 14:28:
> Lost, 
> 
>> Also, since it runs from the console, maybe you can strace it?
> 
> How to do that ? :-)

strace -v <nombre de la aplicaci?n>
(Be prepared for A LOT of information! ;))

> 
> Could you provide me a small sample of a GTK+ MessageBox() alike that runs
> from Nautilus ? Thanks,

Sure

<snip>
#include <gtk/gtk.h>

int main (int argc, char *argv[])
{
  GtkWidget *dialog;
  GtkResponseType result;

  gtk_init (&argc, &argv);

  dialog = gtk_message_dialog_new ( NULL,
                                    GTK_MESSAGE_INFO,
                                    GTK_BUTTONS_OK,
                                    GTK_DIALOG_MODAL,
                                    "?Un mensaje!");

  result = gtk_dialog_run (GTK_DIALOG (dialog));

  gtk_widget_destroy (dialog);

  return 0;
}
</snip>

Make sure to specify `pkg-config gtk+-2.0 --cflags --libs` in your
compile command.

> 
> Regards,
> 
> Antonio

HTH,

Lost
From lostmyhearttoher at gmail.com  Mon Jul 30 15:02:35 2007
From: lostmyhearttoher at gmail.com (Lost)
Date: Mon Jul 30 15:02:33 2007
Subject: [Harbour] FOR EACH overloading
In-Reply-To: <20070730152904.GB31594@localhost.localdomain>
References: <46AA3EDD.3040405@gmail.com>
	<20070730152904.GB31594@localhost.localdomain>
Message-ID: <46AE35CB.2010608@gmail.com>

Przemyslaw Czerpak escribi? el 30/07/07 a las 12:29:

Hi Przemek,

> See the code below. I hope it will illustrate how to overload FOR EACH
> in Harbour. It uses two different methods of overloading but in fact you
> can overload any of __enum*() messages if you need it. This code also
> shows how flexible is message interface used by Harbour in FOR EACH
> implementation in comparison to xHarbour. If some of you tried to
> overload FOR EACH in xHarbour knows that it's not possible to reach
> such functionality as presented below.

I made a sample (and silly) test program, as follows:

<code>
#include "hbclass.ch"

procedure main()
local oTest,_data

   oTest := HTest()
   for each _data in oTest
      ? "_data:__enumIndex =>", _data:__enumIndex, "/ _data:__enumValue
=>", _data:__enumValue
   endfor

return

class HTest
exported:
   method __enumStart
   method __enumSkip
   method __enumStop
endclass

method function __enumStart( xEnum,lDescend ) class HTest

   (@xEnum):__enumValue( 0 ) // to begin with something
// (@xEnum):__enumIndex( 1 ) // otherwise __enumIndex starts at 0!!!

return .T.

method function __enumSkip( xEnum,lDescend ) class HTest
static nCounter := 0

   (@xEnum):__enumValue( ++nCounter )

return iif( (nCounter > 9),.F.,.T. )

method procedure __enumStop( ... ) class HTest

return
</code>

It works perfectly thanks to your clear examples.
Only one doubt arises: __enumIndex is 0 in the first iteration (unless I
uncomment the __enumIndex( 1 ) call). I expected it to be 1, as is the
case with arrays, for example. Is this the intended behavior?

Thanks in advance, and best regards,

Lost
From druzus at priv.onet.pl  Mon Jul 30 15:22:16 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jul 30 15:22:24 2007
Subject: [Harbour] FOR EACH overloading
In-Reply-To: <46AE35CB.2010608@gmail.com>
References: <46AA3EDD.3040405@gmail.com>
	<20070730152904.GB31594@localhost.localdomain>
	<46AE35CB.2010608@gmail.com>
Message-ID: <20070730192216.GA3599@localhost.localdomain>

On Mon, 30 Jul 2007, Lost wrote:
> Only one doubt arises: __enumIndex is 0 in the first iteration (unless I
> uncomment the __enumIndex( 1 ) call). I expected it to be 1, as is the
> case with arrays, for example. Is this the intended behavior?

It was intentional because in Harbour FOR EACH can iterate also in
descending order and IMHO it will look more ugly if you will have
indexes like:
    1
    0
    -1
    -2
    ...

so I decided to always set 0 when __enumStart() is overloaded as
the most natural index for both directions and users code can
change it. The other choice was setting -1 for descending order
and 1 for ascending but many users do not like negative indexes.
Please also note that if you do not overload __enumSkip() then
the indexes (just like whole iteration) are automatically updated
by HVM.

best regards,
Przemek
From lostmyhearttoher at gmail.com  Mon Jul 30 15:36:59 2007
From: lostmyhearttoher at gmail.com (Lost)
Date: Mon Jul 30 15:36:59 2007
Subject: [Harbour] FOR EACH overloading
In-Reply-To: <20070730192216.GA3599@localhost.localdomain>
References: <46AA3EDD.3040405@gmail.com>	<20070730152904.GB31594@localhost.localdomain>	<46AE35CB.2010608@gmail.com>
	<20070730192216.GA3599@localhost.localdomain>
Message-ID: <46AE3DDB.9080305@gmail.com>

Przemyslaw Czerpak escribi? el 30/07/07 a las 16:22:

>> Only one doubt arises: __enumIndex is 0 in the first iteration (unless I
>> uncomment the __enumIndex( 1 ) call). I expected it to be 1, as is the
>> case with arrays, for example. Is this the intended behavior?
> 
> It was intentional because in Harbour FOR EACH can iterate also in
> descending order and IMHO it will look more ugly if you will have
> indexes like:
>     1
>     0
>     -1
>     -2
>     ...
> 
> so I decided to always set 0 when __enumStart() is overloaded as
> the most natural index for both directions and users code can
> change it. The other choice was setting -1 for descending order
> and 1 for ascending but many users do not like negative indexes.
> Please also note that if you do not overload __enumSkip() then
> the indexes (just like whole iteration) are automatically updated
> by HVM.

Ok, now I got it. The truth is, I forgot about the DESCEND clause. That
will teach me to grab the WHOLE picture before asking ;)

> best regards,
> Przemek

Thanks a lot, and best regards,

Lost

From antonioharbour at gmail.com  Mon Jul 30 17:10:08 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Jul 30 17:10:17 2007
Subject: [Harbour] GTK+
In-Reply-To: <46AE2FF5.5020203@gmail.com>
References: <46ae1fae.1e8d420a.7f56.61d1@mx.google.com>
	<46AE2FF5.5020203@gmail.com>
Message-ID: <1185829808.5801.3.camel@anto-desktop>

Lost,

> > Could you provide me a small sample of a GTK+ MessageBox() alike that runs
> > from Nautilus ? Thanks,
> 
> Sure
> 
> <snip>
> ...
> </snip>
> 
> Make sure to specify `pkg-config gtk+-2.0 --cflags --libs` in your
> compile command.

Cool, it runs ok from Nautilus, thanks :-)  though it does not run from
gnome-commander

I wonder why a Harbour application does not run from Nautilus

regards,

Antonio

From antonioharbour at gmail.com  Mon Jul 30 17:23:40 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Jul 30 17:23:49 2007
Subject: [Harbour] FOR EACH overloading
In-Reply-To: <46AE35CB.2010608@gmail.com>
References: <46AA3EDD.3040405@gmail.com>
	<20070730152904.GB31594@localhost.localdomain>
	<46AE35CB.2010608@gmail.com>
Message-ID: <1185830620.5801.9.camel@anto-desktop>

>    (@xEnum):__enumValue( 0 )

Whats the meaning/functionality of (@xEnum) here ? Thanks,

regards,

Antonio

From druzus at priv.onet.pl  Mon Jul 30 17:31:34 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jul 30 17:31:41 2007
Subject: [Harbour] FOR EACH overloading
In-Reply-To: <1185830620.5801.9.camel@anto-desktop>
References: <46AA3EDD.3040405@gmail.com>
	<20070730152904.GB31594@localhost.localdomain>
	<46AE35CB.2010608@gmail.com> <1185830620.5801.9.camel@anto-desktop>
Message-ID: <20070730213134.GA31827@localhost.localdomain>

On Mon, 30 Jul 2007, Antonio Linares wrote:
> >    (@xEnum):__enumValue( 0 )
> Whats the meaning/functionality of (@xEnum) here ? Thanks,

It set's 0 to enumerator variable. You can also make:
    xEnum := 0
it will have the same effect.

best regards,
Przemek
From lostmyhearttoher at gmail.com  Mon Jul 30 17:34:32 2007
From: lostmyhearttoher at gmail.com (Lost)
Date: Mon Jul 30 17:34:31 2007
Subject: [Harbour] GTK+
In-Reply-To: <1185829808.5801.3.camel@anto-desktop>
References: <46ae1fae.1e8d420a.7f56.61d1@mx.google.com>	<46AE2FF5.5020203@gmail.com>
	<1185829808.5801.3.camel@anto-desktop>
Message-ID: <46AE5968.5010702@gmail.com>

Antonio Linares escribi? el 30/07/07 a las 18:10:
> Lost,
> 
>>> Could you provide me a small sample of a GTK+ MessageBox() alike that runs
>>> from Nautilus ? Thanks,
>> Sure
>>
>> <snip>
>> ...
>> </snip>
>>
>> Make sure to specify `pkg-config gtk+-2.0 --cflags --libs` in your
>> compile command.
> 
> Cool, it runs ok from Nautilus, thanks :-)  though it does not run from
> gnome-commander

Strange. It should run from there, though. What (if any) error messages
do you see? Are you linking against the static harbour library? Have you
tried Przemek's suggestion of redirecting handles? Have you run your app
through strace to see if something is preventing it from running normally?

> 
> I wonder why a Harbour application does not run from Nautilus
> 
> regards,
> 
> Antonio

Me too. However, my harbour apps (built with Phil Krylov's xbgtk) work
fine, no matter what launcher I use.


Best regards,

Lost
From antonioharbour at gmail.com  Mon Jul 30 17:34:29 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Jul 30 17:34:36 2007
Subject: [Harbour] GTK+
In-Reply-To: <46AE2FF5.5020203@gmail.com>
References: <46ae1fae.1e8d420a.7f56.61d1@mx.google.com>
	<46AE2FF5.5020203@gmail.com>
Message-ID: <1185831269.5801.15.camel@anto-desktop>

Przemek,

>
#!/bin/sh
    ./myprog 2>/tmp/ERR > /tmp/EOK

and then check what you have in /tmp/ERR and /tmp/EOK files.
>

/tmp/ERR
Error opening terminal: unknown.

/tmp/EOK
its empty

So it looks as it is trying to open a terminal ? thanks,
Please notice that I am not using the most recent Harbour build

regards,

Antonio

From antonioharbour at gmail.com  Mon Jul 30 17:40:05 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Jul 30 17:40:15 2007
Subject: [Harbour] FOR EACH overloading
In-Reply-To: <20070730213134.GA31827@localhost.localdomain>
References: <46AA3EDD.3040405@gmail.com>
	<20070730152904.GB31594@localhost.localdomain>
	<46AE35CB.2010608@gmail.com> <1185830620.5801.9.camel@anto-desktop>
	<20070730213134.GA31827@localhost.localdomain>
Message-ID: <1185831605.5801.18.camel@anto-desktop>

Przemek,

> It set's 0 to enumerator variable. You can also make:
>     xEnum := 0
> it will have the same effect.

Is xEnum an object ?

Is :__enumValue() a true method call ? Or is it simulated ? thanks,

regards,

Antonio

From antonioharbour at gmail.com  Mon Jul 30 17:44:16 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Jul 30 17:44:25 2007
Subject: [Harbour] GTK+
In-Reply-To: <46AE5968.5010702@gmail.com>
References: <46ae1fae.1e8d420a.7f56.61d1@mx.google.com>
	<46AE2FF5.5020203@gmail.com> <1185829808.5801.3.camel@anto-desktop>
	<46AE5968.5010702@gmail.com>
Message-ID: <1185831856.5801.22.camel@anto-desktop>

Lost,

> Strange. It should run from there, though. What (if any) error messages
> do you see? 

Probably it is because I am using an old Harbour build here. I need to
upgrade it :-)

> (built with Phil Krylov's xbgtk)

Is it available for Harbour ? Where to download it ? thanks,

regards,

Antonio

From druzus at priv.onet.pl  Mon Jul 30 17:46:23 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jul 30 17:46:31 2007
Subject: [Harbour] GTK+
In-Reply-To: <1185831269.5801.15.camel@anto-desktop>
References: <46ae1fae.1e8d420a.7f56.61d1@mx.google.com>
	<46AE2FF5.5020203@gmail.com>
	<1185831269.5801.15.camel@anto-desktop>
Message-ID: <20070730214623.GA32035@localhost.localdomain>

On Mon, 30 Jul 2007, Antonio Linares wrote:
> Przemek,
> >
> #!/bin/sh
>     ./myprog 2>/tmp/ERR > /tmp/EOK
> and then check what you have in /tmp/ERR and /tmp/EOK files.
> /tmp/ERR
> Error opening terminal: unknown.

your TERM variable is set to some wrong value when you run program
in nautilius and it's the reason of problems you have.
Link your application with gtstd as default terminal - it will not
use termcap/terminfo database so it will not need TERM envvar.

best regards,
Przemek
From antonioharbour at gmail.com  Mon Jul 30 17:54:16 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Jul 30 17:54:23 2007
Subject: [Harbour] GTK+
In-Reply-To: <20070730214623.GA32035@localhost.localdomain>
References: <46ae1fae.1e8d420a.7f56.61d1@mx.google.com>
	<46AE2FF5.5020203@gmail.com> <1185831269.5801.15.camel@anto-desktop>
	<20070730214623.GA32035@localhost.localdomain>
Message-ID: <1185832456.5801.25.camel@anto-desktop>

Przemek,

> Link your application with gtstd as default terminal - it will not
> use termcap/terminfo database so it will not need TERM envvar.

May I use gtgui as I am using GUI ?

BTW, I am trying to build current Harbour (in Linux) and I get this:

gcc -I. -I../../../../include -DHB_OS_LINUX -Wall -W  -c ../../odbc.c
-oodbc.o
../../odbc.c:103:17: error: sql.h: No such file or directory
../../odbc.c:104:20: error: sqlext.h: No such file or directory
../../odbc.c:105:22: error: sqltypes.h: No such file or directory

any hints ? thanks,

regards,

From druzus at priv.onet.pl  Mon Jul 30 18:03:21 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jul 30 18:03:31 2007
Subject: [Harbour] FOR EACH overloading
In-Reply-To: <1185831605.5801.18.camel@anto-desktop>
References: <46AA3EDD.3040405@gmail.com>
	<20070730152904.GB31594@localhost.localdomain>
	<46AE35CB.2010608@gmail.com> <1185830620.5801.9.camel@anto-desktop>
	<20070730213134.GA31827@localhost.localdomain>
	<1185831605.5801.18.camel@anto-desktop>
Message-ID: <20070730220321.GB32035@localhost.localdomain>

On Mon, 30 Jul 2007, Antonio Linares wrote:
> > It set's 0 to enumerator variable. You can also make:
> >     xEnum := 0
> > it will have the same effect.
> Is xEnum an object ?
> Is :__enumValue() a true method call ? Or is it simulated ? thanks,

It's enumerator value which recognize:
    __enumIndex()
    __enumValue()
    __enumBase()
    __enumKey()
messages. If you will iterate object which has such messages.
Try this code:

    proc main()
    local aBase := { 1, 2, 3 }, ;
          hBase := { "abc"=>123, "qwe"=>456, "asd"=>789 }, ;
          cBase := "zxc", ;
          v1, v2, v3
    ? repl("=",64)
    aeval( aBase, {|v,i|qout(i,":",v)} )
    hb_heval( hBase, {|k,v,i|qout(i,":",k,"=>",v)} )
    ? cBase
    ? repl("=",64)
    for each v1, v2, v3 in aBase, hBase, @cBase
       ? v1, v1:__enumIndex()
       ? v2, v2:__enumIndex(), v2:__enumKey()
       ? v3, v3:__enumIndex(), v3:__enumBase()
       v1 += 1000
       v2 := -v2
       v3 := upper(v3)
    next
    ? repl("=",64)
    aeval( aBase, {|v,i|qout(i,":",v)} )
    hb_heval( hBase, {|k,v,i|qout(i,":",k,"=>",v)} )
    ? cBase
    ? repl("=",64)
    return


best regards,
Przemek
    
From carlo.borelli at gmail.com  Mon Jul 30 18:05:30 2007
From: carlo.borelli at gmail.com (Carlo Borelli)
Date: Mon Jul 30 18:05:32 2007
Subject: [Harbour] GTK+
In-Reply-To: <1185832456.5801.25.camel@anto-desktop>
References: <46ae1fae.1e8d420a.7f56.61d1@mx.google.com>
	<46AE2FF5.5020203@gmail.com> <1185831269.5801.15.camel@anto-desktop>
	<20070730214623.GA32035@localhost.localdomain>
	<1185832456.5801.25.camel@anto-desktop>
Message-ID: <f60d50830707301505u76f67702v516442fa9872c92e@mail.gmail.com>

Hi, you need to install UnixODBC-dev and rebuild the harbour library.

Bests regards.

2007/7/30, Antonio Linares <antonioharbour@gmail.com>:
> Przemek,
>
> > Link your application with gtstd as default terminal - it will not
> > use termcap/terminfo database so it will not need TERM envvar.
>
> May I use gtgui as I am using GUI ?
>
> BTW, I am trying to build current Harbour (in Linux) and I get this:
>
> gcc -I. -I../../../../include -DHB_OS_LINUX -Wall -W  -c ../../odbc.c
> -oodbc.o
> ../../odbc.c:103:17: error: sql.h: No such file or directory
> ../../odbc.c:104:20: error: sqlext.h: No such file or directory
> ../../odbc.c:105:22: error: sqltypes.h: No such file or directory
>
> any hints ? thanks,
>
> regards,
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From lostmyhearttoher at gmail.com  Mon Jul 30 18:05:46 2007
From: lostmyhearttoher at gmail.com (Lost)
Date: Mon Jul 30 18:05:46 2007
Subject: [Harbour] FOR EACH overloading
In-Reply-To: <1185830620.5801.9.camel@anto-desktop>
References: <46AA3EDD.3040405@gmail.com>	<20070730152904.GB31594@localhost.localdomain>	<46AE35CB.2010608@gmail.com>
	<1185830620.5801.9.camel@anto-desktop>
Message-ID: <46AE60BA.7080709@gmail.com>

Antonio Linares escribi? el 30/07/07 a las 18:23:
>>    (@xEnum):__enumValue( 0 )
> 
> Whats the meaning/functionality of (@xEnum) here ? Thanks,
> 

As far as I understand it, xEnum is the enumeration variable (what you
use in the "FOR EACH <whatever> IN ...", the <whatever> part) Being an
enumeration variable, it has some properties of its own. What I've
identified so far (and Przemek, please don't hesitate to prove me wrong)
are as follows:

__enumStart( enumeratorRef,lDescend )

Called upon entry to the enumeration block. enumeratorRef contains the
enumerator variable (which has a type of its own) lDescend flags wether
the requested enumeration is in ascending or descending order.
Return value must be a logical, depicting whether the enumeration is
possible at all or not (eg. no elements available to enumerate)

__enumSkip( enumeratorRef,lDescend )

Called whenever the enumeration block needs to skip to the next
available value. As with __enumStart, enumeratorRef contains the
enumerator variable and lDescend flags whether the requested enumeration
is in ascending or descending order.
Return value must be a logical, stating whether the enumeration can
continue or not (eg. no more elements available to enumerate)

__enumStop()

Called when the enumeration is done (i.e. __enumStart OR __enumSkip
returned .F.)

__enumIndex( nIndex )

Gets/sets the current enumeration index.

__enumValue( xValue )

Gets/sets the current enumeration value (the element being currently
enumerated).

__enumBase( enumerationRef )

Contains the actual enumeration (what is being enumerated, NOT the
element but the container itself) I've seen its assignable.

__enumKey()

When traversing a hash, __enumKey() makes the key available.

HTH,

Lost
From antonioharbour at gmail.com  Mon Jul 30 20:09:01 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Jul 30 18:09:10 2007
Subject: [Harbour] GTK+
In-Reply-To: <f60d50830707301505u76f67702v516442fa9872c92e@mail.gmail.com>
References: <46ae1fae.1e8d420a.7f56.61d1@mx.google.com>
	<46AE2FF5.5020203@gmail.com>
	<1185831269.5801.15.camel@anto-desktop>
	<20070730214623.GA32035@localhost.localdomain>
	<1185832456.5801.25.camel@anto-desktop>
	<f60d50830707301505u76f67702v516442fa9872c92e@mail.gmail.com>
Message-ID: <EEA7926C-241B-4A3C-BED6-7E48C2731178@gmail.com>

> Hi, you need to install UnixODBC-dev and rebuild the harbour library.

Do we need to install UnixODBC-dev to build Harbour ?

I guess Harbour make should detect if such package is available and  
avoid odbc module it if not is present

regards,

Antonio
From lostmyhearttoher at gmail.com  Mon Jul 30 18:10:21 2007
From: lostmyhearttoher at gmail.com (Lost)
Date: Mon Jul 30 18:10:22 2007
Subject: [Harbour] GTK+
In-Reply-To: <1185831856.5801.22.camel@anto-desktop>
References: <46ae1fae.1e8d420a.7f56.61d1@mx.google.com>	<46AE2FF5.5020203@gmail.com>
	<1185829808.5801.3.camel@anto-desktop>	<46AE5968.5010702@gmail.com>
	<1185831856.5801.22.camel@anto-desktop>
Message-ID: <46AE61CD.2060106@gmail.com>

Antonio Linares escribi? el 30/07/07 a las 18:44:

>> (built with Phil Krylov's xbgtk)
> 
> Is it available for Harbour ? Where to download it ? thanks,

http://xbgtk.sourceforge.net/index.php?TITLE=Home

Best regards,

Lost

From druzus at priv.onet.pl  Mon Jul 30 18:10:27 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jul 30 18:10:33 2007
Subject: [Harbour] GTK+
In-Reply-To: <1185832456.5801.25.camel@anto-desktop>
References: <46ae1fae.1e8d420a.7f56.61d1@mx.google.com>
	<46AE2FF5.5020203@gmail.com>
	<1185831269.5801.15.camel@anto-desktop>
	<20070730214623.GA32035@localhost.localdomain>
	<1185832456.5801.25.camel@anto-desktop>
Message-ID: <20070730221027.GC32035@localhost.localdomain>

On Mon, 30 Jul 2007, Antonio Linares wrote:
> > Link your application with gtstd as default terminal - it will not
> > use termcap/terminfo database so it will not need TERM envvar.
> May I use gtgui as I am using GUI ?

In Windows it's necessary due to Windows limitation but in *nixes
there is no difference between GUI and CUI application so you can
use any GT driver. There is no GTGUI in *nixes because it will be
empty GT driver and we already have such empty GT called GTNUL.
Adding yet another one to replace 3 leterrs (NUL->GUI) does not
seems to be good idea.

> BTW, I am trying to build current Harbour (in Linux) and I get this:
> gcc -I. -I../../../../include -DHB_OS_LINUX -Wall -W  -c ../../odbc.c
> -oodbc.o
> ../../odbc.c:103:17: error: sql.h: No such file or directory
> ../../odbc.c:104:20: error: sqlext.h: No such file or directory
> ../../odbc.c:105:22: error: sqltypes.h: No such file or directory

Yes. You do not have unix odbc devel package.
See doc/linux1st.txt for information about packages you should install
in Ubuntu to build all Harbour libraries.

best regards,
Przemek
From antonioharbour at gmail.com  Mon Jul 30 20:14:24 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Jul 30 18:14:32 2007
Subject: [Harbour] FOR EACH overloading
In-Reply-To: <20070730220321.GB32035@localhost.localdomain>
References: <46AA3EDD.3040405@gmail.com>
	<20070730152904.GB31594@localhost.localdomain>
	<46AE35CB.2010608@gmail.com> <1185830620.5801.9.camel@anto-desktop>
	<20070730213134.GA31827@localhost.localdomain>
	<1185831605.5801.18.camel@anto-desktop>
	<20070730220321.GB32035@localhost.localdomain>
Message-ID: <39BF9524-F6CC-4E00-9C89-1C9F52DCC49A@gmail.com>

Przemek,

Please excuse my ignorance:

> "abc"=>123

Whats the meaning for the above ? thanks,

regards,
From druzus at priv.onet.pl  Mon Jul 30 18:16:23 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jul 30 18:16:32 2007
Subject: [Harbour] GTK+
In-Reply-To: <EEA7926C-241B-4A3C-BED6-7E48C2731178@gmail.com>
References: <46ae1fae.1e8d420a.7f56.61d1@mx.google.com>
	<46AE2FF5.5020203@gmail.com>
	<1185831269.5801.15.camel@anto-desktop>
	<20070730214623.GA32035@localhost.localdomain>
	<1185832456.5801.25.camel@anto-desktop>
	<f60d50830707301505u76f67702v516442fa9872c92e@mail.gmail.com>
	<EEA7926C-241B-4A3C-BED6-7E48C2731178@gmail.com>
Message-ID: <20070730221623.GD32035@localhost.localdomain>

On Tue, 31 Jul 2007, Antonio Linares wrote:
> >Hi, you need to install UnixODBC-dev and rebuild the harbour library.
> Do we need to install UnixODBC-dev to build Harbour ?

No. You need UnixODBC-dev to build hbodbc library only.

> I guess Harbour make should detect if such package is available and  
> avoid odbc module it if not is present

For such jobs autoconf is used. So far we do not have autoconf support
though I added some simple detections in make_{gnu,gcc,tgz}.sh for some
libraries.

best regards,
Przemek
From lostmyhearttoher at gmail.com  Mon Jul 30 18:16:39 2007
From: lostmyhearttoher at gmail.com (Lost)
Date: Mon Jul 30 18:16:38 2007
Subject: [Harbour] FOR EACH overloading
In-Reply-To: <39BF9524-F6CC-4E00-9C89-1C9F52DCC49A@gmail.com>
References: <46AA3EDD.3040405@gmail.com>	<20070730152904.GB31594@localhost.localdomain>	<46AE35CB.2010608@gmail.com>
	<1185830620.5801.9.camel@anto-desktop>	<20070730213134.GA31827@localhost.localdomain>	<1185831605.5801.18.camel@anto-desktop>	<20070730220321.GB32035@localhost.localdomain>
	<39BF9524-F6CC-4E00-9C89-1C9F52DCC49A@gmail.com>
Message-ID: <46AE6347.7020302@gmail.com>

Antonio Linares escribi? el 30/07/07 a las 21:14:

>> "abc"=>123
> 
> Whats the meaning for the above ? thanks,
> 

It's a hash pair (key/value) in literal form. Alternatively, you can use
hb_hset( hash,key,value )

HTH,

Lost

From antonioharbour at gmail.com  Mon Jul 30 20:17:14 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Jul 30 18:17:23 2007
Subject: [Harbour] FOR EACH overloading
In-Reply-To: <46AE60BA.7080709@gmail.com>
References: <46AA3EDD.3040405@gmail.com>	<20070730152904.GB31594@localhost.localdomain>	<46AE35CB.2010608@gmail.com>
	<1185830620.5801.9.camel@anto-desktop> <46AE60BA.7080709@gmail.com>
Message-ID: <D64178A7-A0F5-4894-A6E2-52FC92B1D7C3@gmail.com>

Lost,

Thanks for your explanation,

Unfortunately meanwhile Harbour and xHarbour don't manage FOR EACH  
exactly the same way, we can't use such language extension to build  
our libraries as they need to be compatible with both compilers.

regards,

Antonio
From lostmyhearttoher at gmail.com  Mon Jul 30 18:26:28 2007
From: lostmyhearttoher at gmail.com (Lost)
Date: Mon Jul 30 18:26:29 2007
Subject: [Harbour] FOR EACH overloading
In-Reply-To: <D64178A7-A0F5-4894-A6E2-52FC92B1D7C3@gmail.com>
References: <46AA3EDD.3040405@gmail.com>	<20070730152904.GB31594@localhost.localdomain>	<46AE35CB.2010608@gmail.com>	<1185830620.5801.9.camel@anto-desktop>
	<46AE60BA.7080709@gmail.com>
	<D64178A7-A0F5-4894-A6E2-52FC92B1D7C3@gmail.com>
Message-ID: <46AE6594.4030603@gmail.com>

Antonio Linares escribi? el 30/07/07 a las 21:17:
> Lost,
> 
> Thanks for your explanation,

You are most welcome!

> 
> Unfortunately meanwhile Harbour and xHarbour don't manage FOR EACH
> exactly the same way, we can't use such language extension to build our
> libraries as they need to be compatible with both compilers.
> 

Antonio, may I suggest you to take a look at include/hbcompat.ch and the
HB_COMPAT_XHB flag (you can search this mailing list for it) Even though
I don't need xHarbour compatibility, I know that a good deal of work is
done to provide it.

> regards,
> 
> Antonio

HTH,

Lost
From druzus at priv.onet.pl  Mon Jul 30 18:32:12 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Jul 30 18:32:20 2007
Subject: [Harbour] FOR EACH overloading
In-Reply-To: <39BF9524-F6CC-4E00-9C89-1C9F52DCC49A@gmail.com>
References: <46AA3EDD.3040405@gmail.com>
	<20070730152904.GB31594@localhost.localdomain>
	<46AE35CB.2010608@gmail.com> <1185830620.5801.9.camel@anto-desktop>
	<20070730213134.GA31827@localhost.localdomain>
	<1185831605.5801.18.camel@anto-desktop>
	<20070730220321.GB32035@localhost.localdomain>
	<39BF9524-F6CC-4E00-9C89-1C9F52DCC49A@gmail.com>
Message-ID: <20070730223212.GE32035@localhost.localdomain>

On Tue, 31 Jul 2007, Antonio Linares wrote:
> Przemek,
> Please excuse my ignorance:
> >"abc"=>123
> Whats the meaning for the above ? thanks,

It's a hash item - array in which you can use noncontinuous and
nonnumerical indexes, f.e.:

    proc main()
    local hValue := {"abc"=>10, "qwe"=>20, "zxc"=>30}
    ? hValue[ "abc" ], hValue[ "qwe" ], hValue[ "zxc" ]
    hValue[ "abc" ] += 100
    hValue[ "qwe" ] := date()
    hValue[ "zxc" ] *= 10
    ? hValue[ "abc" ], hValue[ "qwe" ], hValue[ "zxc" ]
    return

As index in hash items you can use strings, numbers and dates.
Now some more interesting example: let's calculate average salaries
in each state using tests/test.dbf

    #include "common.ch"
    proc main()
    local hValue, v
    use test
    hValue:={=>}
    hb_hDefault(hValue,{0,0})
    hb_hAutoAdd(hValue,HB_HAUTOADD_ALWAYS)
    go top
    while !eof()
       hValue[field->STATE,1]++
       hValue[field->STATE,2] += field->SALARY
       dbskip()
    enddo
    for each v in hValue
       ? "State:", v:__enumKey(), ", people:", str(v[1],3),;
         ", average salaries:", ltrim(str(v[2]/v[1]))
    next
    close
    return

best regards,
Przemek
From antonioharbour at gmail.com  Mon Jul 30 20:45:28 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Jul 30 18:45:38 2007
Subject: [Harbour] FOR EACH overloading
In-Reply-To: <46AE6594.4030603@gmail.com>
References: <46AA3EDD.3040405@gmail.com>	<20070730152904.GB31594@localhost.localdomain>	<46AE35CB.2010608@gmail.com>	<1185830620.5801.9.camel@anto-desktop>
	<46AE60BA.7080709@gmail.com>
	<D64178A7-A0F5-4894-A6E2-52FC92B1D7C3@gmail.com>
	<46AE6594.4030603@gmail.com>
Message-ID: <AADFB649-2FEC-4212-872A-5A5B7D11BBFA@gmail.com>

Lost,

> may I suggest you to take a look at include/hbcompat.ch and the
> HB_COMPAT_XHB flag

We already use such flag, but unfortunately it does not cover all the  
Harbour/xHarbour differences

Thats why we advise our customers not to use those language extensions

regards,

Antonio
From antonioharbour at gmail.com  Mon Jul 30 20:52:53 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Jul 30 18:53:01 2007
Subject: [Harbour] FOR EACH overloading
In-Reply-To: <20070730223212.GE32035@localhost.localdomain>
References: <46AA3EDD.3040405@gmail.com>
	<20070730152904.GB31594@localhost.localdomain>
	<46AE35CB.2010608@gmail.com> <1185830620.5801.9.camel@anto-desktop>
	<20070730213134.GA31827@localhost.localdomain>
	<1185831605.5801.18.camel@anto-desktop>
	<20070730220321.GB32035@localhost.localdomain>
	<39BF9524-F6CC-4E00-9C89-1C9F52DCC49A@gmail.com>
	<20070730223212.GE32035@localhost.localdomain>
Message-ID: <4B3762BF-CB19-4FE9-8EC0-60C08DA97A27@gmail.com>

Przemek,

>     local hValue := {"abc"=>10, "qwe"=>20, "zxc"=>30}
>     ? hValue[ "abc" ], hValue[ "qwe" ], hValue[ "zxc" ]

I am not going into its usefulness or not, but from a xBase language  
style, they look quite ugly, IMO.

Is "abc" equivalent to 1 ? "qwe" equivalent to 2 ? "zxc" equivalent  
to 3 ?

If we have classes and objects, whats the real need for those  
extensions ?

regards,

Antonio
From antonioharbour at gmail.com  Tue Jul 31 02:47:29 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jul 31 02:47:39 2007
Subject: [Harbour] GTK+
In-Reply-To: <20070730214623.GA32035@localhost.localdomain>
References: <46ae1fae.1e8d420a.7f56.61d1@mx.google.com>
	<46AE2FF5.5020203@gmail.com> <1185831269.5801.15.camel@anto-desktop>
	<20070730214623.GA32035@localhost.localdomain>
Message-ID: <1185864449.18044.4.camel@anto-desktop>

Przemek,

I built the current Harbour version (thanks to the unixODBC-dev tip) and
not the applications run fine from the gnome Nautilus :-)

Anyhow if I try to run them from gnome-commander I get this error msg:

No default application found for the mime-type application/x-executable.
Open the "File types and programs" page in the Control Center to add one

Any hints ? Whats the "Control Center" ? thanks,

regards,

From antonioharbour at gmail.com  Tue Jul 31 03:00:04 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jul 31 03:00:13 2007
Subject: [Harbour] OT: xHarbour
Message-ID: <1185865204.18044.6.camel@anto-desktop>

Przemek,

Are you able to build current xHarbour on Linux ? Thanks,

regards,

From antonioharbour at gmail.com  Tue Jul 31 03:10:42 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jul 31 03:10:49 2007
Subject: [Harbour] GTK+
In-Reply-To: <1185864449.18044.4.camel@anto-desktop>
References: <46ae1fae.1e8d420a.7f56.61d1@mx.google.com>
	<46AE2FF5.5020203@gmail.com> <1185831269.5801.15.camel@anto-desktop>
	<20070730214623.GA32035@localhost.localdomain>
	<1185864449.18044.4.camel@anto-desktop>
Message-ID: <1185865842.18044.10.camel@anto-desktop>

> and *not* the applications run fine from the gnome Nautilus :-) 

I meant "now" :-)



From lorenzo.fiorini at gmail.com  Tue Jul 31 04:46:25 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Jul 31 04:46:30 2007
Subject: [Harbour] OT: xHarbour
In-Reply-To: <1185865204.18044.6.camel@anto-desktop>
References: <1185865204.18044.6.camel@anto-desktop>
Message-ID: <9257026e0707310146t73c695e6o6830a5298b643c0a@mail.gmail.com>

On 7/31/07, Antonio Linares <antonioharbour@gmail.com> wrote:

> Are you able to build current xHarbour on Linux ? Thanks,

I've just built it under Fedora 7 using make_gnu.sh.

A lot of warnings and memory leak reports but it builds.

best regards,
Lorenzo
From dbtopas at dbtopas.lt  Tue Jul 31 05:40:17 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Jul 31 05:40:15 2007
Subject: [Harbour] FOR EACH overloading
In-Reply-To: <4B3762BF-CB19-4FE9-8EC0-60C08DA97A27@gmail.com>
References: <46AA3EDD.3040405@gmail.com>	<20070730152904.GB31594@localhost.localdomain>	<46AE35CB.2010608@gmail.com>
	<1185830620.5801.9.camel@anto-desktop>	<20070730213134.GA31827@localhost.localdomain>	<1185831605.5801.18.camel@anto-desktop>	<20070730220321.GB32035@localhost.localdomain>	<39BF9524-F6CC-4E00-9C89-1C9F52DCC49A@gmail.com>	<20070730223212.GE32035@localhost.localdomain>
	<4B3762BF-CB19-4FE9-8EC0-60C08DA97A27@gmail.com>
Message-ID: <46AF0381.8060505@dbtopas.lt>

Antonio Linares wrote:
>>     local hValue := {"abc"=>10, "qwe"=>20, "zxc"=>30}
>>     ? hValue[ "abc" ], hValue[ "qwe" ], hValue[ "zxc" ]
> 
> I am not going into its usefulness or not, but from a xBase language 
> style, they look quite ugly, IMO.
> 
> Is "abc" equivalent to 1 ? "qwe" equivalent to 2 ? "zxc" equivalent to 3 ?


Hello,


hashes are arrays with not integer indexes. The array would be defined:
   LOCAL aValue := {10, 20, 30}
   ? aValue[1], aValue[2], aValue[3]

So, 1, 2 and 3 are fixed index values of array and I can not change it. 
If I use hashes I can use any values for indexing, ex. "abc", "qwe" and 
"zxc". And the syntax following syntax is used to indicate index/key value:
   LOCAL hValue := {"abc"=>10, "qwe"=>20, "zxc"=>30}

This syntax looks ugly if you've never used it, but this kind of syntax 
is used in many other languages, ex. PHP. So, inventing a new syntax 
would be inventing a wheel, and perhaps new syntax would be ugly (for 
those, how haven't used it before) anyway.


> If we have classes and objects, whats the real need for those extensions ?

I'll try to rewrite the Przemek's example to show usefulness of hashes.

With hashes:
     while !eof()
        hValue[field->STATE,1]++
        hValue[field->STATE,2] += field->SALARY
        dbskip()
     enddo

Without hashes:
     while !eof()
        nI := ASCAN(aValue, {|X| X[1]==field->STATE})
        IF nI == 0
           AADD(aValue, {field->STATE, 1, field->SALARY})
        ELSE
           aValue[nI, 2]++
           aValue[nI, 3] += field->SALARY
        ENDIF
        dbskip()
     enddo

Hash version is much more clear and much faster to execute. I also use 
hashes in many places to store database record in memory (for example to 
pass database record to GUI dialog to edit field values). Instead of 
array form:
   aRecord := {{"FIELD_NAME_1", FIELD_VALUE_1}, ... }
I use:
   hRecord := {"FIELD_NAME_1"=>FIELD_VALUE_1, ... }

Accessing of field is much more easy, I just need to write
   hRecord["FIELD_NAME_1"]
instead of
   aRecord[ASCAN(aRecord, {|X| X[1]=="FIELD_NAME_1"}), 2]

My current code uses a LOT OF hashes and hashes are perhaps the most 
important extension.


> If we have classes and objects, whats the real need for those extensions ?

Yes, I can do similar extension using classes and objects and use syntax:
   oRecord:FIELD_NAME_1 := FIELD_VALUE_1
but definition of object takes a few dozens lines of code. I also need a 
name for class. Hashes implementations is more simple. Class 
implementation also needs to now the method names, sometimes it is not 
possible. Look to the Przemek's example, field->STATE can take any 
values, I do not need to know all states to create some class:
CLASS USAStateStatistics
    VAR aAlaska   INIT {0, 0}  // {population, salary}
    VAR aAlabama  INIT {0, 0}
    VAR aArkansas INIT {0, 0}
    ...
ENDCLASS

 From this point of view hashes are a kind of typeless objects.


Best regards,
Mindaugas
From lorenzo.fiorini at gmail.com  Tue Jul 31 05:49:36 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Jul 31 05:49:41 2007
Subject: [Harbour] FOR EACH overloading
In-Reply-To: <46AF0381.8060505@dbtopas.lt>
References: <46AA3EDD.3040405@gmail.com> <46AE35CB.2010608@gmail.com>
	<1185830620.5801.9.camel@anto-desktop>
	<20070730213134.GA31827@localhost.localdomain>
	<1185831605.5801.18.camel@anto-desktop>
	<20070730220321.GB32035@localhost.localdomain>
	<39BF9524-F6CC-4E00-9C89-1C9F52DCC49A@gmail.com>
	<20070730223212.GE32035@localhost.localdomain>
	<4B3762BF-CB19-4FE9-8EC0-60C08DA97A27@gmail.com>
	<46AF0381.8060505@dbtopas.lt>
Message-ID: <9257026e0707310249s1ca7858ag147d68bed5acc675@mail.gmail.com>

On 7/31/07, Mindaugas Kavaliauskas <dbtopas@dbtopas.lt> wrote:

> My current code uses a LOT OF hashes and hashes are perhaps the most
> important extension.

+1

best regards,
Lorenzo
From antonioharbour at gmail.com  Tue Jul 31 06:23:14 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jul 31 06:23:23 2007
Subject: [Harbour] FOR EACH overloading
In-Reply-To: <46AF0381.8060505@dbtopas.lt>
References: <46AA3EDD.3040405@gmail.com>
	<20070730152904.GB31594@localhost.localdomain>	<46AE35CB.2010608@gmail.com>
	<1185830620.5801.9.camel@anto-desktop>
	<20070730213134.GA31827@localhost.localdomain>
	<1185831605.5801.18.camel@anto-desktop>
	<20070730220321.GB32035@localhost.localdomain>
	<39BF9524-F6CC-4E00-9C89-1C9F52DCC49A@gmail.com>
	<20070730223212.GE32035@localhost.localdomain>
	<4B3762BF-CB19-4FE9-8EC0-60C08DA97A27@gmail.com>
	<46AF0381.8060505@dbtopas.lt>
Message-ID: <1185877394.8424.1.camel@anto-desktop>

Mindaugas,

Thanks for your clear explanation,

regards,

Antonio

On Tue, 2007-07-31 at 12:40 +0300, Mindaugas Kavaliauskas wrote:
> Antonio Linares wrote:
> >>     local hValue := {"abc"=>10, "qwe"=>20, "zxc"=>30}
> >>     ? hValue[ "abc" ], hValue[ "qwe" ], hValue[ "zxc" ]
> > 
> > I am not going into its usefulness or not, but from a xBase language 
> > style, they look quite ugly, IMO.
> > 
> > Is "abc" equivalent to 1 ? "qwe" equivalent to 2 ? "zxc" equivalent to 3 ?
> 
> 
> Hello,
> 
> 
> hashes are arrays with not integer indexes. The array would be defined:
>    LOCAL aValue := {10, 20, 30}
>    ? aValue[1], aValue[2], aValue[3]
> 
> So, 1, 2 and 3 are fixed index values of array and I can not change it. 
> If I use hashes I can use any values for indexing, ex. "abc", "qwe" and 
> "zxc". And the syntax following syntax is used to indicate index/key value:
>    LOCAL hValue := {"abc"=>10, "qwe"=>20, "zxc"=>30}
> 
> This syntax looks ugly if you've never used it, but this kind of syntax 
> is used in many other languages, ex. PHP. So, inventing a new syntax 
> would be inventing a wheel, and perhaps new syntax would be ugly (for 
> those, how haven't used it before) anyway.
> 
> 
> > If we have classes and objects, whats the real need for those extensions ?
> 
> I'll try to rewrite the Przemek's example to show usefulness of hashes.
> 
> With hashes:
>      while !eof()
>         hValue[field->STATE,1]++
>         hValue[field->STATE,2] += field->SALARY
>         dbskip()
>      enddo
> 
> Without hashes:
>      while !eof()
>         nI := ASCAN(aValue, {|X| X[1]==field->STATE})
>         IF nI == 0
>            AADD(aValue, {field->STATE, 1, field->SALARY})
>         ELSE
>            aValue[nI, 2]++
>            aValue[nI, 3] += field->SALARY
>         ENDIF
>         dbskip()
>      enddo
> 
> Hash version is much more clear and much faster to execute. I also use 
> hashes in many places to store database record in memory (for example to 
> pass database record to GUI dialog to edit field values). Instead of 
> array form:
>    aRecord := {{"FIELD_NAME_1", FIELD_VALUE_1}, ... }
> I use:
>    hRecord := {"FIELD_NAME_1"=>FIELD_VALUE_1, ... }
> 
> Accessing of field is much more easy, I just need to write
>    hRecord["FIELD_NAME_1"]
> instead of
>    aRecord[ASCAN(aRecord, {|X| X[1]=="FIELD_NAME_1"}), 2]
> 
> My current code uses a LOT OF hashes and hashes are perhaps the most 
> important extension.
> 
> 
> > If we have classes and objects, whats the real need for those extensions ?
> 
> Yes, I can do similar extension using classes and objects and use syntax:
>    oRecord:FIELD_NAME_1 := FIELD_VALUE_1
> but definition of object takes a few dozens lines of code. I also need a 
> name for class. Hashes implementations is more simple. Class 
> implementation also needs to now the method names, sometimes it is not 
> possible. Look to the Przemek's example, field->STATE can take any 
> values, I do not need to know all states to create some class:
> CLASS USAStateStatistics
>     VAR aAlaska   INIT {0, 0}  // {population, salary}
>     VAR aAlabama  INIT {0, 0}
>     VAR aArkansas INIT {0, 0}
>     ...
> ENDCLASS
> 
>  From this point of view hashes are a kind of typeless objects.
> 
> 
> Best regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Tue Jul 31 06:47:43 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 31 06:47:48 2007
Subject: [Harbour] OT: xHarbour
In-Reply-To: <1185865204.18044.6.camel@anto-desktop>
References: <1185865204.18044.6.camel@anto-desktop>
Message-ID: <20070731104743.GA7640@localhost.localdomain>

On Tue, 31 Jul 2007, Antonio Linares wrote:
> Are you able to build current xHarbour on Linux ? Thanks,

It's possible but it will report a lot of warnings and memory leaks.

best regards,
Przemek
From druzus at priv.onet.pl  Tue Jul 31 07:06:21 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 31 07:06:27 2007
Subject: [Harbour] OT: xHarbour
In-Reply-To: <20070731104743.GA7640@localhost.localdomain>
References: <1185865204.18044.6.camel@anto-desktop>
	<20070731104743.GA7640@localhost.localdomain>
Message-ID: <20070731110621.GA16722@localhost.localdomain>

On Tue, 31 Jul 2007, Przemyslaw Czerpak wrote:
> On Tue, 31 Jul 2007, Antonio Linares wrote:
> > Are you able to build current xHarbour on Linux ? Thanks,
> It's possible but it will report a lot of warnings and memory leaks.

and please remember that you will need bison-1.875 or higher installed
to build xHarbour and do not set HB_TR_LEVEL_DEBUG macro - it was breaking
the build process.

best regards,
Przemek
From antonioharbour at gmail.com  Tue Jul 31 07:42:44 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jul 31 07:42:53 2007
Subject: [Harbour] OT: xHarbour
In-Reply-To: <20070731110621.GA16722@localhost.localdomain>
References: <1185865204.18044.6.camel@anto-desktop>
	<20070731104743.GA7640@localhost.localdomain>
	<20070731110621.GA16722@localhost.localdomain>
Message-ID: <1185882164.8424.8.camel@anto-desktop>

Przemek,

> and please remember that you will need bison-1.875 or higher installed
> to build xHarbour and do not set HB_TR_LEVEL_DEBUG macro - it was breaking
> the build process.

Bison was missing from a standard Ubuntu 7.04 setup.

Now it builds ok, thanks :-)

regards,

Antonio

From antonioharbour at gmail.com  Tue Jul 31 08:30:10 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jul 31 08:30:20 2007
Subject: [Harbour] OT: xHarbour libraries linking order
Message-ID: <1185885010.8424.12.camel@anto-desktop>

Przemek,

Whats the xHarbour libraries proper order to build an app ? I am using
this:

-ldebug -lvm -lrtl -lgtstd -lncurses -llang -lrdd -lrtl -lmacro -lpp
-ldbfntx -ldbfcdx -ldbffpt -lhbsix -lcommon -lgpm -lm

but I get lots of errors (it works fine with Harbour)

thanks,

From druzus at priv.onet.pl  Tue Jul 31 09:11:52 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 31 09:12:03 2007
Subject: [Harbour] OT: xHarbour libraries linking order
In-Reply-To: <1185885010.8424.12.camel@anto-desktop>
References: <1185885010.8424.12.camel@anto-desktop>
Message-ID: <20070731131152.GA23389@localhost.localdomain>

On Tue, 31 Jul 2007, Antonio Linares wrote:
> Whats the xHarbour libraries proper order to build an app ? I am using
> this:
> -ldebug -lvm -lrtl -lgtstd -lncurses -llang -lrdd -lrtl -lmacro -lpp
> -ldbfntx -ldbfcdx -ldbffpt -lhbsix -lcommon -lgpm -lm
> but I get lots of errors (it works fine with Harbour)

Use xhblnk to link your application just like now you are using
gcc - you will not have to add core libraries, f.e.:

    xhblnk myprog1.o myprog2.o mylib1.a mylib2.a -lotherlib -gtstd

xhb* scripts are created automatically when you execute
    make install
you can use 'install' parameter in make_gnu.sh. You can also execute
make_tgz.sh which wikll create installation packages.
In Harbour similar scripts exist but without 'x' prefix, f.e.: hbcmp,
hbcc, hblnk, hbmk.

BTW you are using Ubuntu distribution. What about DEB packages and
contact with Luis Mayoral? I updated his debian specs for current
Harbour version and can commit it but it should be tested by some
Debian/Ubuntu users - it will be perfect if it can be done by Luis.
 
Best regards,
Przemek
From antonioharbour at gmail.com  Tue Jul 31 11:22:55 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jul 31 09:23:07 2007
Subject: [Harbour] OT: xHarbour libraries linking order
In-Reply-To: <20070731131152.GA23389@localhost.localdomain>
References: <1185885010.8424.12.camel@anto-desktop>
	<20070731131152.GA23389@localhost.localdomain>
Message-ID: <00C4E7E9-9D51-46CF-9537-E6645B9B7071@gmail.com>

Przemek,

> Use xhblnk to link your application just like now you are using
> gcc - you will not have to add core libraries, f.e.:
>
>     xhblnk myprog1.o myprog2.o mylib1.a mylib2.a -lotherlib -gtstd

Thanks!

> BTW you are using Ubuntu distribution. What about DEB packages and
> contact with Luis Mayoral? I updated his debian specs for current
> Harbour version and can commit it but it should be tested by some
> Debian/Ubuntu users - it will be perfect if it can be done by Luis.

I have contacted him several times and he seems that he does not care  
anymore.

He just told me that we should upgrade the package and update it  
ourselves. He is actually using Mac, no more Linux.

regards,
From lostmyhearttoher at gmail.com  Tue Jul 31 11:12:11 2007
From: lostmyhearttoher at gmail.com (Lost)
Date: Tue Jul 31 11:12:21 2007
Subject: [Harbour] Possible typo in source/vm/classes.c
Message-ID: <46AF514B.4040909@gmail.com>

Hi all,
In file source/vm/classes.c, line 281 (the operator symbols table) it reads:
   { "__OPADDIGN",            {HB_FS_MESSAGE}, {NULL}, NULL },  /* 15 */

Shouldn't it be like this:
   { "__OPASSIGN",            {HB_FS_MESSAGE}, {NULL}, NULL },  /* 15 */
           ^^

(ie. __OPASSIGN instead of __OPADDIGN)?

Best regards,

Lost
From druzus at priv.onet.pl  Tue Jul 31 12:10:58 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 31 12:11:04 2007
Subject: [Harbour] Possible typo in source/vm/classes.c
In-Reply-To: <46AF514B.4040909@gmail.com>
References: <46AF514B.4040909@gmail.com>
Message-ID: <20070731161058.GA24088@localhost.localdomain>

On Tue, 31 Jul 2007, Lost wrote:
> Hi all,
> In file source/vm/classes.c, line 281 (the operator symbols table) it reads:
>    { "__OPADDIGN",            {HB_FS_MESSAGE}, {NULL}, NULL },  /* 15 */
> Shouldn't it be like this:
>    { "__OPASSIGN",            {HB_FS_MESSAGE}, {NULL}, NULL },  /* 15 */
>            ^^
> (ie. __OPASSIGN instead of __OPADDIGN)?

Yes, it's typo - many thanks for the information. I'll clean it in next
commit though it should not cause any bad side effects for code which
uses ":=" and OPERATOR clause.
BTW be careful with overloading ":=" - it will have similar effect
to the references stored in variables which Mindaugas nicely called:
"infected" ;-)

best regards,
Przemek
From lostmyhearttoher at gmail.com  Tue Jul 31 12:23:27 2007
From: lostmyhearttoher at gmail.com (Lost)
Date: Tue Jul 31 12:23:33 2007
Subject: [Harbour] Possible typo in source/vm/classes.c
In-Reply-To: <20070731161058.GA24088@localhost.localdomain>
References: <46AF514B.4040909@gmail.com>
	<20070731161058.GA24088@localhost.localdomain>
Message-ID: <46AF61FF.1030002@gmail.com>

Przemyslaw Czerpak escribi? el 31/07/07 a las 13:10:

> On Tue, 31 Jul 2007, Lost wrote:
>> Hi all,
>> In file source/vm/classes.c, line 281 (the operator symbols table) it reads:
>>    { "__OPADDIGN",            {HB_FS_MESSAGE}, {NULL}, NULL },  /* 15 */
>> Shouldn't it be like this:
>>    { "__OPASSIGN",            {HB_FS_MESSAGE}, {NULL}, NULL },  /* 15 */
>>            ^^
>> (ie. __OPASSIGN instead of __OPADDIGN)?
> 
> Yes, it's typo - many thanks for the information. I'll clean it in next
> commit though it should not cause any bad side effects for code which
> uses ":=" and OPERATOR clause.

You're welcome.

> BTW be careful with overloading ":=" - it will have similar effect
> to the references stored in variables which Mindaugas nicely called:
> "infected" ;-)

Thanks for the advice. I'm just beginning to investigate the
overloading, anyhow. Expect a lot of questions from my side!
And here goes the first. HB_IT_ENUM variables have a implicit "value"
property. As far as I could see, user-created objects do not have it.
Is this true? If it is, are there any plans to implement a "default"
property for objects?

> 
> best regards,
> Przemek

Thanks in advance, and best regards,

Lost

From dbtopas at dbtopas.lt  Tue Jul 31 12:49:22 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Jul 31 12:49:18 2007
Subject: [Harbour] Possible typo in source/vm/classes.c
In-Reply-To: <46AF514B.4040909@gmail.com>
References: <46AF514B.4040909@gmail.com>
Message-ID: <46AF6812.4070806@dbtopas.lt>

Lost wrote:
> In file source/vm/classes.c, line 281 (the operator symbols table) it reads:
>    { "__OPADDIGN",            {HB_FS_MESSAGE}, {NULL}, NULL },  /* 15 */
> 
> Shouldn't it be like this:
>    { "__OPASSIGN",            {HB_FS_MESSAGE}, {NULL}, NULL },  /* 15 */

Hello,


source\macro\macro.y line#922:
       ( hb_strnicmp( "_FILED", pToken->value, pToken->len ) == 0 ||
         hb_strnicmp( "FILED", pToken->value, pToken->len ) == 0 ) )



I guess it should be FIELD.


Regards,
Mindaugas
From antonioharbour at gmail.com  Tue Jul 31 13:09:37 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jul 31 13:09:46 2007
Subject: [Harbour] OT: xHarbour
In-Reply-To: <20070731110621.GA16722@localhost.localdomain>
References: <1185865204.18044.6.camel@anto-desktop>
	<20070731104743.GA7640@localhost.localdomain>
	<20070731110621.GA16722@localhost.localdomain>
Message-ID: <1185901777.5777.8.camel@anto-desktop>

Przemek,

>
xhb* scripts are created automatically when you execute
    make install
you can use 'install' parameter in make_gnu.sh
>

Where are those scripts located ? Why don't they need ".sh" when writing them ? thanks,

I would like to review its contents

regards,


From druzus at priv.onet.pl  Tue Jul 31 14:23:16 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 31 14:23:22 2007
Subject: [Harbour] OT: xHarbour
In-Reply-To: <1185901777.5777.8.camel@anto-desktop>
References: <1185865204.18044.6.camel@anto-desktop>
	<20070731104743.GA7640@localhost.localdomain>
	<20070731110621.GA16722@localhost.localdomain>
	<1185901777.5777.8.camel@anto-desktop>
Message-ID: <20070731182316.GA24789@localhost.localdomain>

On Tue, 31 Jul 2007, Antonio Linares wrote:
> > xhb* scripts are created automatically when you execute
> >     make install
> > you can use 'install' parameter in make_gnu.sh
> Where are those scripts located ?

They are created dynamically in $HB_BIN_INSTALL directory.

> Why don't they need ".sh" when writing them ? thanks,

Because it's not necessary - In *nixes file extensions do not
have any special meaning in for OS - only executable attribute.

> I would like to review its contents

run make_tgz.sh and then extract .tar.gz archive using:

    harbour-*-inst.sh --extracts

then you can see inside what and were can be installed in typical
*nix installation.

best regards,
Przemek
From druzus at priv.onet.pl  Tue Jul 31 14:25:12 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 31 14:25:18 2007
Subject: [Harbour] Possible typo in source/vm/classes.c
In-Reply-To: <46AF6812.4070806@dbtopas.lt>
References: <46AF514B.4040909@gmail.com> <46AF6812.4070806@dbtopas.lt>
Message-ID: <20070731182512.GB24789@localhost.localdomain>

On Tue, 31 Jul 2007, Mindaugas Kavaliauskas wrote:
> source\macro\macro.y line#922:
>       ( hb_strnicmp( "_FILED", pToken->value, pToken->len ) == 0 ||
>         hb_strnicmp( "FILED", pToken->value, pToken->len ) == 0 ) )
> I guess it should be FIELD.

Yes it is. It's part of inactive code (alternative lexer which
translates PP tokens into grammar terminal symbols) but it should
be fixed - I'll do that ASAP, thanks for information.

best regards,
Przemek
From druzus at priv.onet.pl  Tue Jul 31 14:54:28 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 31 14:54:33 2007
Subject: [Harbour] Possible typo in source/vm/classes.c
In-Reply-To: <46AF61FF.1030002@gmail.com>
References: <46AF514B.4040909@gmail.com>
	<20070731161058.GA24088@localhost.localdomain>
	<46AF61FF.1030002@gmail.com>
Message-ID: <20070731185428.GC24789@localhost.localdomain>

On Tue, 31 Jul 2007, Lost wrote:
> Thanks for the advice. I'm just beginning to investigate the
> overloading, anyhow. Expect a lot of questions from my side!
> And here goes the first. HB_IT_ENUM variables have a implicit "value"
> property. As far as I could see, user-created objects do not have it.
> Is this true? If it is, are there any plans to implement a "default"
> property for objects?

In last year I separated classes code from the rest of HVM. It means
that anyone can create alternative class implementation and replace
to original one. It's enough to implement functions defined in hbapicls.h
In current low level code by default all items understand the following
messages:
    className()
    classH()
    classSel()

inside WITH OBJECT structure can be used also
    :__withObject
pseudo message to get/set current WITH OBJECT value.
This message can be overloaded by the object so programmer can define
different actions for it.

HB_IT_ENUM item unbderstand the folowing messages:
    __enumIndex()
    __enumValue()
    __enumBase()
    __enumKey()
When HVM executes FOR EACH statements it also checks if the folowing
message exists in class definition:
    __enumStart()
    __enumSkip()
    __enumStop()
and if they are them use them instead of default action(s)

Additionally some other items types understands:

HB_IT_BLOCK:
    eval()

HB_IT_SYMBOL (created by @<funcName>(), can be used in similar
way to SYMBOL class from Class(y)):
    eval()
    exec()

HB_IT_HASH item:
    values()
    keys()
    when classes.c is compiled with HB_HASH_MSG_ITEMS then it can also
    translate messages to hash keys

These are basic messages enabled by vm/classes.c code.
Additionally each class in Harbour inherits by default from HBOBJECT
class and in rtl/tobject.prg you can see which messages are implemented
by default. So far I haven't time to implement all Class(y) compatible
messages. Because I was never Class(y) then I will have to spend some
time on detail Class(y) tests. So far I implement nearly all features
necessary at .c level to create fully Class(y) compatible system (even
such hacking functions like: _cyPshSelf()). Core .c code has many
interesting extensions like destructors safe for HVM internals and resolves
many of problems not addressed by Class(y) or other OOP implementations
in xBase languages I know like name conflicts in class with multi inheritance
or real hidden messages with automatic scoping so it should be quite easy
to create nice OOP system with set of default proprieties. But it will be
perfect if we can find someone who well knows Class(y) and can implement
at .prg level basic CLASS and OBJECT classes which will be compatible with
Class(y) or at least can document what are default CLASS proprieties/messages
in Class(y) - it will safe a lot of tests time.

Best regards,
Przemek
From antonioharbour at gmail.com  Tue Jul 31 14:56:35 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jul 31 14:56:43 2007
Subject: [Harbour] OT: xHarbour
In-Reply-To: <20070731182316.GA24789@localhost.localdomain>
References: <1185865204.18044.6.camel@anto-desktop>
	<20070731104743.GA7640@localhost.localdomain>
	<20070731110621.GA16722@localhost.localdomain>
	<1185901777.5777.8.camel@anto-desktop>
	<20070731182316.GA24789@localhost.localdomain>
Message-ID: <1185908195.6462.1.camel@anto-desktop>

Przemek,

> run make_tgz.sh and then extract .tar.gz archive using:

Is sudo needed to run make_tgz.sh ?

Where the .tar.gz file is placed ? can't find it

thanks,


From druzus at priv.onet.pl  Tue Jul 31 15:06:52 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 31 15:06:59 2007
Subject: [Harbour] OT: xHarbour
In-Reply-To: <1185908195.6462.1.camel@anto-desktop>
References: <1185865204.18044.6.camel@anto-desktop>
	<20070731104743.GA7640@localhost.localdomain>
	<20070731110621.GA16722@localhost.localdomain>
	<1185901777.5777.8.camel@anto-desktop>
	<20070731182316.GA24789@localhost.localdomain>
	<1185908195.6462.1.camel@anto-desktop>
Message-ID: <20070731190652.GD24789@localhost.localdomain>

On Tue, 31 Jul 2007, Antonio Linares wrote:
> Przemek,
> > run make_tgz.sh and then extract .tar.gz archive using:
> Is sudo needed to run make_tgz.sh ?

No.

> Where the .tar.gz file is placed ? can't find it

It's inside:
    harbour-<ver>.inst.sh
which is created by make_tgz.sh. If you run from root account then
all Harbour binaries will be installed.
If you run it from any account with --extract parameter then
in current directory harbour-<ver>.bin.tar.gz will be created.

best regards,
Przemek
From druzus at priv.onet.pl  Tue Jul 31 15:08:02 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 31 15:08:07 2007
Subject: [Harbour] ChangeLog 2007-07-31 21:00 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070731190802.GE24789@localhost.localdomain>

2007-07-31 21:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbexprb.c
    * disable CTOD("") optimization when -kc switch is used

  * harbour/source/macro/macro.yyc
  * harbour/source/macro/macro.y
    * fixed typo reported by Mindaugas

  * harbour/source/vm/classes.c
    * fixed typo reported by Lost

best regards,
Przemek
From antonioharbour at gmail.com  Tue Jul 31 15:09:56 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jul 31 15:10:06 2007
Subject: [Harbour] OT: xHarbour
In-Reply-To: <20070731190652.GD24789@localhost.localdomain>
References: <1185865204.18044.6.camel@anto-desktop>
	<20070731104743.GA7640@localhost.localdomain>
	<20070731110621.GA16722@localhost.localdomain>
	<1185901777.5777.8.camel@anto-desktop>
	<20070731182316.GA24789@localhost.localdomain>
	<1185908195.6462.1.camel@anto-desktop>
	<20070731190652.GD24789@localhost.localdomain>
Message-ID: <1185908996.6462.4.camel@anto-desktop>

Przemek,

> > Where the .tar.gz file is placed ? can't find it
> 
> It's inside:
>     harbour-<ver>.inst.sh
> which is created by make_tgz.sh. If you run from root account then
> all Harbour binaries will be installed.
> If you run it from any account with --extract parameter then
> in current directory harbour-<ver>.bin.tar.gz will be created.

Does it applies to xHarbour too ?

damn, I can't get it to work. (Why is it so complicated ?)

regards,

From antonioharbour at gmail.com  Tue Jul 31 15:13:59 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jul 31 15:14:08 2007
Subject: [Harbour] OT: xHarbour
In-Reply-To: <1185908996.6462.4.camel@anto-desktop>
References: <1185865204.18044.6.camel@anto-desktop>
	<20070731104743.GA7640@localhost.localdomain>
	<20070731110621.GA16722@localhost.localdomain>
	<1185901777.5777.8.camel@anto-desktop>
	<20070731182316.GA24789@localhost.localdomain>
	<1185908195.6462.1.camel@anto-desktop>
	<20070731190652.GD24789@localhost.localdomain>
	<1185908996.6462.4.camel@anto-desktop>
Message-ID: <1185909239.6462.7.camel@anto-desktop>

> Does it applies to xHarbour too ?
> 
> damn, I can't get it to work. (Why is it so complicated ?)

I just need to know the linking order of the libraries in xHarbour.

Thats all, that easy

Don't want to build packages, populate the whole machine with files here
and there, etc. 

thanks,

regards

From druzus at priv.onet.pl  Tue Jul 31 15:27:38 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 31 15:27:46 2007
Subject: [Harbour] OT: xHarbour
In-Reply-To: <1185909239.6462.7.camel@anto-desktop>
References: <1185865204.18044.6.camel@anto-desktop>
	<20070731104743.GA7640@localhost.localdomain>
	<20070731110621.GA16722@localhost.localdomain>
	<1185901777.5777.8.camel@anto-desktop>
	<20070731182316.GA24789@localhost.localdomain>
	<1185908195.6462.1.camel@anto-desktop>
	<20070731190652.GD24789@localhost.localdomain>
	<1185908996.6462.4.camel@anto-desktop>
	<1185909239.6462.7.camel@anto-desktop>
Message-ID: <20070731192738.GF24789@localhost.localdomain>

On Tue, 31 Jul 2007, Antonio Linares wrote:
> I just need to know the linking order of the libraries in xHarbour.
> Thats all, that easy

use:
    -Wl,--start-group -llib1, -llib2, .... -Wl,--end-group
you will not have to repeat library names.

best regards,
Przemek
From druzus at priv.onet.pl  Tue Jul 31 15:30:14 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 31 15:30:21 2007
Subject: [Harbour] OT: xHarbour
In-Reply-To: <1185908996.6462.4.camel@anto-desktop>
References: <1185865204.18044.6.camel@anto-desktop>
	<20070731104743.GA7640@localhost.localdomain>
	<20070731110621.GA16722@localhost.localdomain>
	<1185901777.5777.8.camel@anto-desktop>
	<20070731182316.GA24789@localhost.localdomain>
	<1185908195.6462.1.camel@anto-desktop>
	<20070731190652.GD24789@localhost.localdomain>
	<1185908996.6462.4.camel@anto-desktop>
Message-ID: <20070731193014.GG24789@localhost.localdomain>

On Tue, 31 Jul 2007, Antonio Linares wrote:
> Does it applies to xHarbour too ?

Yes.

> damn, I can't get it to work. (Why is it so complicated ?)

It was as simple as running one script few months ago.
IMHO even now if you ignore warnings then make_tgz.sh should
be enough. Please do not set any HB_* variables and allow
make_tgz.sh to set all of them automatically.

best regards,
Przemek
From druzus at priv.onet.pl  Tue Jul 31 15:35:47 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 31 15:35:53 2007
Subject: [Harbour] ChangeLog 2007-07-31 21:35 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070731193547.GH24789@localhost.localdomain>

2007-07-31 21:35 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/make_rpm.sh
    * removed not longer necessary flex and bison from dependences list

  + harbour/debian
  + harbour/debian/control
  + harbour/debian/harbour.cfg
  + harbour/debian/harbour.1
  + harbour/debian/dirs
  + harbour/debian/rules.cf
  + harbour/debian/compat
  + harbour/debian/hbmake.1
  + harbour/debian/changelog
  + harbour/debian/copyright
  + harbour/debian/hbtest.1
  + harbour/debian/hbpp.1
  + harbour/debian/hbrun.1
  + harbour/debian/hbdoc.1
  + harbour/make_deb.sh
    + added rules to generate DEB packages - rules by Luis Mayoral
      taken from Debian distribution updated for current code but
      not tested at all. Please make some test running make_deb.sh
      in Debian and Ubuntu distribution and give me an information
      about results.

best regards,
Przmek
From antonioharbour at gmail.com  Tue Jul 31 15:42:18 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jul 31 15:42:24 2007
Subject: [Harbour] OT: xHarbour
In-Reply-To: <20070731192738.GF24789@localhost.localdomain>
References: <1185865204.18044.6.camel@anto-desktop>
	<20070731104743.GA7640@localhost.localdomain>
	<20070731110621.GA16722@localhost.localdomain>
	<1185901777.5777.8.camel@anto-desktop>
	<20070731182316.GA24789@localhost.localdomain>
	<1185908195.6462.1.camel@anto-desktop>
	<20070731190652.GD24789@localhost.localdomain>
	<1185908996.6462.4.camel@anto-desktop>
	<1185909239.6462.7.camel@anto-desktop>
	<20070731192738.GF24789@localhost.localdomain>
Message-ID: <1185910938.6462.12.camel@anto-desktop>

Przemek,

> use:
>     -Wl,--start-group -llib1, -llib2, .... -Wl,--end-group
> you will not have to repeat library names.

I don't know whats "-Wl", "--start-group", etc. Whats that ?

What I mean is:

-ldebug -lvm -lrtl -lgtstd -lncurses -llang -lrdd -lrtl -lvm -lmacro
-lpp -ldbfntx -ldbfcdx -ldbffpt -lhbsix -lcommon -lgpm -lm

Is that the right order ? Whats the right order ? thanks,

From antonioharbour at gmail.com  Tue Jul 31 15:47:27 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jul 31 15:47:36 2007
Subject: [Harbour] OT: xHarbour
In-Reply-To: <20070731192738.GF24789@localhost.localdomain>
References: <1185865204.18044.6.camel@anto-desktop>
	<20070731104743.GA7640@localhost.localdomain>
	<20070731110621.GA16722@localhost.localdomain>
	<1185901777.5777.8.camel@anto-desktop>
	<20070731182316.GA24789@localhost.localdomain>
	<1185908195.6462.1.camel@anto-desktop>
	<20070731190652.GD24789@localhost.localdomain>
	<1185908996.6462.4.camel@anto-desktop>
	<1185909239.6462.7.camel@anto-desktop>
	<20070731192738.GF24789@localhost.localdomain>
Message-ID: <1185911247.6462.14.camel@anto-desktop>

Przemek,

Do you mean this ?

-Wl, --start-group -ldebug -lvm -lrtl -lgtstd -lncurses -llang -lrdd
-lrtl -lmacro -lpp -ldbfntx -ldbfcdx -ldbffpt -lhbsix -lcommon -lgpm -lm
-Wl, --end-group

thanks,

regards,

Antonio

From druzus at priv.onet.pl  Tue Jul 31 15:57:26 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 31 15:57:32 2007
Subject: [Harbour] OT: xHarbour
In-Reply-To: <1185910938.6462.12.camel@anto-desktop>
References: <20070731104743.GA7640@localhost.localdomain>
	<20070731110621.GA16722@localhost.localdomain>
	<1185901777.5777.8.camel@anto-desktop>
	<20070731182316.GA24789@localhost.localdomain>
	<1185908195.6462.1.camel@anto-desktop>
	<20070731190652.GD24789@localhost.localdomain>
	<1185908996.6462.4.camel@anto-desktop>
	<1185909239.6462.7.camel@anto-desktop>
	<20070731192738.GF24789@localhost.localdomain>
	<1185910938.6462.12.camel@anto-desktop>
Message-ID: <20070731195726.GI24789@localhost.localdomain>

On Tue, 31 Jul 2007, Antonio Linares wrote:
> > use:
> >     -Wl,--start-group -llib1, -llib2, .... -Wl,--end-group
> > you will not have to repeat library names.
> I don't know whats "-Wl", "--start-group", etc. Whats that ?
> What I mean is:
> -ldebug -lvm -lrtl -lgtstd -lncurses -llang -lrdd -lrtl -lvm -lmacro
> -lpp -ldbfntx -ldbfcdx -ldbffpt -lhbsix -lcommon -lgpm -lm
> Is that the right order ? Whats the right order ? thanks,

Use:

-Wl,--start-group -lcommon -lvm -lrtl -lrdd -lmacro -llang -lcodepage -lpp 
 -ldbfntx -ldbfcdx -ldbffpt -lhbsix -lhsx -lpcrepos -lusrrdd -ltip -lct
 -lcgi -lgtnul -lgtstd -lgtcgi -lgtcrs -lhbodbc -ldebug -Wl,--end-group
 -lm -lgpm -lncurses


"-Wl,--start-group" - begin library group with cross references
"-Wl,--end-group"   - end of library group with cross references

The cross references between libraries inside -Wl,--start-group/
-Wl,--end-group will be resolved just like in BCC and MSC so
you will not have to repeat them in linked library list.


best regards,
Przemek
From lostmyhearttoher at gmail.com  Tue Jul 31 16:03:48 2007
From: lostmyhearttoher at gmail.com (Lost)
Date: Tue Jul 31 16:03:58 2007
Subject: [Harbour] OT: xHarbour
In-Reply-To: <1185910938.6462.12.camel@anto-desktop>
References: <1185865204.18044.6.camel@anto-desktop>	<20070731104743.GA7640@localhost.localdomain>	<20070731110621.GA16722@localhost.localdomain>	<1185901777.5777.8.camel@anto-desktop>	<20070731182316.GA24789@localhost.localdomain>	<1185908195.6462.1.camel@anto-desktop>	<20070731190652.GD24789@localhost.localdomain>	<1185908996.6462.4.camel@anto-desktop>	<1185909239.6462.7.camel@anto-desktop>	<20070731192738.GF24789@localhost.localdomain>
	<1185910938.6462.12.camel@anto-desktop>
Message-ID: <46AF95A4.3060507@gmail.com>

Antonio Linares el 31/07/07 16:42:
> Przemek,
> 
>> use:
>>     -Wl,--start-group -llib1, -llib2, .... -Wl,--end-group
>> you will not have to repeat library names.
> 
> I don't know whats "-Wl", "--start-group", etc. Whats that ?

"-Wl," means that the option following it goes to ld (the linker) rather
than gcc (the compiler)

"-start-group" and "--end-group" instruct the linker to search the files
specified inbetween them as many times as necessary until there are no
more unresolved references.

> 
> What I mean is:
> 
> -ldebug -lvm -lrtl -lgtstd -lncurses -llang -lrdd -lrtl -lvm -lmacro
> -lpp -ldbfntx -ldbfcdx -ldbffpt -lhbsix -lcommon -lgpm -lm
> 
> Is that the right order ? Whats the right order ? thanks,
> 


-Wl, --start-group <your list of libraries and object files> -Wl,
--end-group

Try "man ld" from a console.

HTH,

Lost
From lostmyhearttoher at gmail.com  Tue Jul 31 16:10:41 2007
From: lostmyhearttoher at gmail.com (Lost)
Date: Tue Jul 31 16:10:50 2007
Subject: [Harbour] Possible typo in source/vm/classes.c
In-Reply-To: <20070731185428.GC24789@localhost.localdomain>
References: <46AF514B.4040909@gmail.com>	<20070731161058.GA24088@localhost.localdomain>	<46AF61FF.1030002@gmail.com>
	<20070731185428.GC24789@localhost.localdomain>
Message-ID: <46AF9741.5050900@gmail.com>

Przemyslaw Czerpak escribi? el 31/07/07 a las 15:54:

> 
> In last year I separated classes code from the rest of HVM. It means
> that anyone can create alternative class implementation and replace
> to original one. It's enough to implement functions defined in hbapicls.h
> In current low level code by default all items understand the following
> messages:
>     className()
>     classH()
>     classSel()
> 
> inside WITH OBJECT structure can be used also
>     :__withObject
> pseudo message to get/set current WITH OBJECT value.
> This message can be overloaded by the object so programmer can define
> different actions for it.
> 
> HB_IT_ENUM item unbderstand the folowing messages:
>     __enumIndex()
>     __enumValue()
>     __enumBase()
>     __enumKey()
> When HVM executes FOR EACH statements it also checks if the folowing
> message exists in class definition:
>     __enumStart()
>     __enumSkip()
>     __enumStop()
> and if they are them use them instead of default action(s)
> 
> Additionally some other items types understands:
> 
> HB_IT_BLOCK:
>     eval()
> 
> HB_IT_SYMBOL (created by @<funcName>(), can be used in similar
> way to SYMBOL class from Class(y)):
>     eval()
>     exec()
> 
> HB_IT_HASH item:
>     values()
>     keys()
>     when classes.c is compiled with HB_HASH_MSG_ITEMS then it can also
>     translate messages to hash keys
> 
> These are basic messages enabled by vm/classes.c code.

Excellent explanation, thank you very much. I understand then that
alternative implementations of the OO engine could be used.
Are there any such alternatives?

> Additionally each class in Harbour inherits by default from HBOBJECT
> class and in rtl/tobject.prg you can see which messages are implemented
> by default. So far I haven't time to implement all Class(y) compatible
> messages. Because I was never Class(y) then I will have to spend some
> time on detail Class(y) tests. So far I implement nearly all features
> necessary at .c level to create fully Class(y) compatible system (even
> such hacking functions like: _cyPshSelf()). Core .c code has many
> interesting extensions like destructors safe for HVM internals and resolves
> many of problems not addressed by Class(y) or other OOP implementations
> in xBase languages I know like name conflicts in class with multi inheritance
> or real hidden messages with automatic scoping so it should be quite easy
> to create nice OOP system with set of default proprieties. But it will be
> perfect if we can find someone who well knows Class(y) and can implement
> at .prg level basic CLASS and OBJECT classes which will be compatible with
> Class(y) or at least can document what are default CLASS proprieties/messages
> in Class(y) - it will safe a lot of tests time.

Here I can help a little, I guess. Let me reach for the (somewhat terse
;)) documentation we wrote for Class(y) ages ago, and I'll post it here.

Best regards,

Lost

From antonioharbour at gmail.com  Tue Jul 31 16:12:26 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jul 31 16:12:35 2007
Subject: [Harbour] OT: xHarbour
In-Reply-To: <20070731195726.GI24789@localhost.localdomain>
References: <20070731104743.GA7640@localhost.localdomain>
	<20070731110621.GA16722@localhost.localdomain>
	<1185901777.5777.8.camel@anto-desktop>
	<20070731182316.GA24789@localhost.localdomain>
	<1185908195.6462.1.camel@anto-desktop>
	<20070731190652.GD24789@localhost.localdomain>
	<1185908996.6462.4.camel@anto-desktop>
	<1185909239.6462.7.camel@anto-desktop>
	<20070731192738.GF24789@localhost.localdomain>
	<1185910938.6462.12.camel@anto-desktop>
	<20070731195726.GI24789@localhost.localdomain>
Message-ID: <1185912746.6462.17.camel@anto-desktop>

Przemek,

> Use:
> 
> -Wl,--start-group -lcommon -lvm -lrtl -lrdd -lmacro -llang -lcodepage -lpp 
>  -ldbfntx -ldbfcdx -ldbffpt -lhbsix -lhsx -lpcrepos -lusrrdd -ltip -lct
>  -lcgi -lgtnul -lgtstd -lgtcgi -lgtcrs -lhbodbc -ldebug -Wl,--end-group
>  -lm -lgpm -lncurses

Thanks. Now I get this:

Again, many thanks for your help

./../../xharbour/lib/libvm.a(hvm.o): In function `hb_vmQuit':
(.text+0x3b5): undefined reference to `hb_seriviceExit'
./../../xharbour/lib/libvm.a(itemapi.o): In function `hb_itemStrCmp':
(.text+0x504): undefined reference to `s_cdpage'
./../../xharbour/lib/librtl.a(abs.o): In function `HB_FUN_ABS':
abs.c:(.text+0xc9): undefined reference to `hb_itemGetNInt'
./../../xharbour/lib/librtl.a(chrasc.o): In function `HB_FUN_CHR':
chrasc.c:(.text+0x40): undefined reference to `hb_retclenStatic'
./../../xharbour/lib/librtl.a(dateshb.o): In function `HB_FUN_DATETIME':
dateshb.c:(.text+0xdf0): undefined reference to `hb_retdt'
./../../xharbour/lib/librtl.a(dateshb.o): In function `HB_FUN_TTOS':
dateshb.c:(.text+0xeb4): undefined reference to `hb_pardtsbuff'
./../../xharbour/lib/librtl.a(dateshb.o): In function `HB_FUN_TTOC':
dateshb.c:(.text+0xf5c): undefined reference to `hb_pardtsbuff'
./../../xharbour/lib/librtl.a(dateshb.o): In function `HB_FUN_CTOT':
dateshb.c:(.text+0x13b6): undefined reference to `hb_retdt'
./../../xharbour/lib/librtl.a(dateshb.o): In function `HB_FUN_STOT':
dateshb.c:(.text+0x14e8): undefined reference to `hb_retdtl'
./../../xharbour/lib/librtl.a(gtapi.o): In function
`hb_gtProcessMessages':
gtapi.c:(.text+0x3559): undefined reference to `hb_gt_ProcessMessages'
./../../xharbour/lib/librtl.a(hbserv.o): In function
`HB_FUN_HB_STARTSERVICE':
hbserv.c:(.text+0x5eb): undefined reference to `pHVMFuncService'
./../../xharbour/lib/librtl.a(idle.o): In function `HB_FUN_HB_IDLEDEL':
idle.c:(.text+0x53c): undefined reference to `hb_itemReturnForward'
./../../xharbour/lib/librtl.a(minmax.o): In function `HB_FUN_MAX':
minmax.c:(.text+0x130): undefined reference to `hb_itemGetNInt'
minmax.c:(.text+0x141): undefined reference to `hb_itemGetNInt'
minmax.c:(.text+0x2d6): undefined reference to `hb_itemGetNInt'
minmax.c:(.text+0x2e7): undefined reference to `hb_itemGetNInt'
./../../xharbour/lib/librtl.a(minmax.o): In function `HB_FUN_MIN':
minmax.c:(.text+0x597): undefined reference to `hb_itemGetNInt'
./../../xharbour/lib/librtl.a(minmax.o):minmax.c:(.text+0x5a8): more
undefined references to `hb_itemGetNInt' follow
./../../xharbour/lib/librtl.a(regex.o): In function `hb_regex':
regex.c:(.text+0x83d): undefined reference to `hb_itemReturnForward'
regex.c:(.text+0x9ed): undefined reference to `hb_itemReturnForward'
regex.c:(.text+0xbf9): undefined reference to `hb_itemReturnForward'
regex.c:(.text+0x1186): undefined reference to `hb_itemReturnForward'
regex.c:(.text+0x11e9): undefined reference to `hb_itemReturnForward'
./../../xharbour/lib/librtl.a(regex.o): In function `HB_FUN_HB_ATX':
regex.c:(.text+0x14d5): undefined reference to `hb_stackST'
regex.c:(.text+0x14ff): undefined reference to `hb_stackST'
regex.c:(.text+0x1549): undefined reference to `hb_stackST'
regex.c:(.text+0x1579): undefined reference to `hb_stackST'
regex.c:(.text+0x159e): undefined reference to `hb_stackST'
./../../xharbour/lib/librtl.a(regex.o):regex.c:(.text+0x1628): more
undefined references to `hb_stackST' follow
./../../xharbour/lib/librtl.a(valtype.o): In function
`HB_FUN_HB_ISOBJECT':
valtype.c:(.text+0x2b3): undefined reference to `hb_extIsObject'
./../../xharbour/lib/librtl.a(tclass.o):(.data+0x308): undefined
reference to `HB_FUN_THROW'
./../../xharbour/lib/librtl.a(tobject.o):(.data+0x268): undefined
reference to `HB_FUN_HSETAACOMPATIBILITY'
./../../xharbour/lib/librtl.a(tobject.o):(.data+0x278): undefined
reference to `HB_FUN_THROW'
./../../xharbour/lib/librtl.a(hbrandom.o): In function
`HB_FUN_HB_RANDOMINT':
hbrandom.c:(.text+0x12b): undefined reference to `hb_parnint'
hbrandom.c:(.text+0x174): undefined reference to `hb_parnint'
hbrandom.c:(.text+0x186): undefined reference to `hb_parnint'
./../../xharbour/lib/librtl.a(philes.o): In function `HB_FUN_FREAD':
philes.c:(.text+0x2c7): undefined reference to `hb_itemUnShare'
./../../xharbour/lib/librtl.a(philes.o): In function `HB_FUN_FSEEK':
philes.c:(.text+0x5fa): undefined reference to `hb_parnint'
./../../xharbour/lib/librtl.a(cstr.o):(.data+0x98): undefined reference
to `HB_FUN_THROW'
./../../xharbour/lib/librtl.a(cstr.o):(.data+0x1f8): undefined reference
to `HB_FUN___CLSINSTNAME'
./../../xharbour/lib/librtl.a(hbhex2n.o): In function `HB_FUN_NUMTOHEX':
hbhex2n.c:(.text+0x16b): undefined reference to `hb_parnint'
./../../xharbour/lib/librdd.a(dbf1.o): In function `hb_dbfGetValue':
(.text+0x6cd): undefined reference to `s_cdpage'
./../../xharbour/lib/librdd.a(dbf1.o): In function `hb_dbfPutValue':
(.text+0x8ed): undefined reference to `s_cdpage'
./../../xharbour/lib/librdd.a(dbf1.o): In function `hb_dbfOpen':
(.text+0x12d1): undefined reference to `s_cdpage'
./../../xharbour/lib/libmacro.a(macrob.o): In function
`hb_compExprUseDate':
macrob.c:(.text+0x1e8): undefined reference to `hb_compGenPushDate'
./../../xharbour/lib/libdbfntx.a(dbfntx1.o): In function
`hb_ntxErrorRT':
dbfntx1.c:(.text+0x17a): undefined reference to `hb_errRelease'
./../../xharbour/lib/libdbfntx.a(dbfntx1.o): In function
`hb_ntxEvalCond':
dbfntx1.c:(.text+0x9c2): undefined reference to `hb_vmEvalBlockOrMacro'
./../../xharbour/lib/libdbfntx.a(dbfntx1.o): In function
`hb_ntxGetKeyType':
dbfntx1.c:(.text+0xb4b): undefined reference to `hb_vmEvalBlockOrMacro'
./../../xharbour/lib/libdbfntx.a(dbfntx1.o): In function
`hb_ntxEvalKey':
dbfntx1.c:(.text+0xc66): undefined reference to `hb_vmEvalBlockOrMacro'
./../../xharbour/lib/libdbfntx.a(dbfntx1.o): In function `hb_ntxTagNew':
dbfntx1.c:(.text+0x2449): undefined reference to `hb_rddFieldExpIndex'
dbfntx1.c:(.text+0x24b1): undefined reference to `hb_rddGetNode'
./../../xharbour/lib/libdbfntx.a(dbfntx1.o): In function
`hb_ntxTagFree':
dbfntx1.c:(.text+0x2600): undefined reference to
`hb_vmDestroyBlockOrMacro'
dbfntx1.c:(.text+0x2618): undefined reference to
`hb_vmDestroyBlockOrMacro'
./../../xharbour/lib/libdbfntx.a(dbfntx1.o): In function
`hb_ntxTagLoad':
dbfntx1.c:(.text+0x2919): undefined reference to
`hb_vmDestroyBlockOrMacro'
./../../xharbour/lib/libdbfntx.a(dbfntx1.o): In function
`hb_ntxTagCreate':
dbfntx1.c:(.text+0xc4ea): undefined reference to `hb_vmEvalBlockOrMacro'
./../../xharbour/lib/libdbfntx.a(dbfntx1.o): In function `ntxOpen':
dbfntx1.c:(.text+0xdbc1): undefined reference to `hb_rddGetNode'
dbfntx1.c:(.text+0xdbea): undefined reference to `hb_rddGetNode'
./../../xharbour/lib/libdbfntx.a(dbfntx1.o): In function
`ntxOrderCreate':
dbfntx1.c:(.text+0xe061): undefined reference to
`hb_vmDestroyBlockOrMacro'
dbfntx1.c:(.text+0xe1e2): undefined reference to
`hb_vmDestroyBlockOrMacro'
dbfntx1.c:(.text+0xe359): undefined reference to
`hb_vmDestroyBlockOrMacro'
dbfntx1.c:(.text+0xe3f6): undefined reference to
`hb_vmDestroyBlockOrMacro'
dbfntx1.c:(.text+0xe404): undefined reference to
`hb_vmDestroyBlockOrMacro'
./../../xharbour/lib/libdbfntx.a(dbfntx1.o):dbfntx1.c:(.text+0xe491):
more undefined references to `hb_vmDestroyBlockOrMacro' follow
./../../xharbour/lib/libdbfntx.a(dbfntx1.o): In function
`ntxOrderCreate':
dbfntx1.c:(.text+0xe5c3): undefined reference to `hb_rddGetNode'
dbfntx1.c:(.text+0xe743): undefined reference to
`hb_vmDestroyBlockOrMacro'
dbfntx1.c:(.text+0xe75a): undefined reference to
`hb_vmDestroyBlockOrMacro'
dbfntx1.c:(.text+0xe98a): undefined reference to
`hb_vmDestroyBlockOrMacro'
dbfntx1.c:(.text+0xe9a1): undefined reference to
`hb_vmDestroyBlockOrMacro'
dbfntx1.c:(.text+0xeb34): undefined reference to
`hb_vmDestroyBlockOrMacro'
./../../xharbour/lib/libdbfntx.a(dbfntx1.o):dbfntx1.c:(.text+0xeb4b):
more undefined references to `hb_vmDestroyBlockOrMacro' follow
./../../xharbour/lib/libdbfntx.a(dbfntx1.o): In function
`ntxOrderCreate':
dbfntx1.c:(.text+0xedda): undefined reference to `hb_rddGetNode'
dbfntx1.c:(.text+0xf1f8): undefined reference to `hb_rddGetNode'
dbfntx1.c:(.text+0xf21d): undefined reference to `hb_rddGetNode'
./../../xharbour/lib/libdbfntx.a(dbfntx1.o): In function
`ntxOrderDestroy':
dbfntx1.c:(.text+0xf42a): undefined reference to `hb_rddGetNode'
dbfntx1.c:(.text+0xf450): undefined reference to `hb_rddGetNode'
./../../xharbour/lib/libdbfntx.a(dbfntx1.o):dbfntx1.c:(.text+0xf5aa):
more undefined references to `hb_rddGetNode' follow
./../../xharbour/lib/libdbfntx.a(dbfntx1.o): In function `ntxOrderInfo':
dbfntx1.c:(.text+0xfec7): undefined reference to
`hb_vmDestroyBlockOrMacro'
dbfntx1.c:(.text+0xff52): undefined reference to
`hb_vmDestroyBlockOrMacro'
dbfntx1.c:(.text+0x109ff): undefined reference to `hb_arrayGetPtr'
dbfntx1.c:(.text+0x10a4d): undefined reference to `hb_arrayGetPtr'
dbfntx1.c:(.text+0x10a65): undefined reference to `hb_arrayGetPtr'
./../../xharbour/lib/libdbfntx.a(dbfntx1.o): In function
`ntxOrderListClear':
dbfntx1.c:(.text+0x11608): undefined reference to `hb_rddGetNode'
dbfntx1.c:(.text+0x11634): undefined reference to `hb_rddGetNode'
./../../xharbour/lib/libdbfntx.a(dbfntx1.o): In function
`hb_dbfntxRddInit':
dbfntx1.c:(.text+0x11de8): undefined reference to `hb_rddRegister'
dbfntx1.c:(.text+0x11e05): undefined reference to `hb_rddRegister'
dbfntx1.c:(.text+0x11e19): undefined reference to `hb_rddRegister'
dbfntx1.c:(.text+0x11e58): undefined reference to `hb_rddGetNode'
dbfntx1.c:(.text+0x11e70): undefined reference to `hb_rddGetNode'
./../../xharbour/lib/libdbfntx.a(dbfntx1.o): In function
`_hb_dbfntx_rdd_init_':
dbfntx1.c:(.text+0x11f33): undefined reference to `hb_vmAtInit'
./../../xharbour/lib/libdbffpt.a(dbffpt1.o): In function
`hb_memoErrorRT':
dbffpt1.c:(.text+0x128): undefined reference to `hb_errRelease'
./../../xharbour/lib/libdbffpt.a(dbffpt1.o): In function
`hb_fptGetMemoLen':
dbffpt1.c:(.text+0x21ee): undefined reference to `hb_dbfGetMemoData'
./../../xharbour/lib/libdbffpt.a(dbffpt1.o): In function
`hb_fptGetMemoType':
dbffpt1.c:(.text+0x242d): undefined reference to `hb_dbfGetMemoData'
./../../xharbour/lib/libdbffpt.a(dbffpt1.o): In function
`hb_fptCountSMTItemLength':
dbffpt1.c:(.text+0x28cc): undefined reference to `hb_itemGetNInt'
./../../xharbour/lib/libdbffpt.a(dbffpt1.o): In function
`hb_fptStoreSMTItem':
dbffpt1.c:(.text+0x2d1c): undefined reference to `hb_itemGetNInt'
./../../xharbour/lib/libdbffpt.a(dbffpt1.o): In function
`hb_fptStoreSixItem':
dbffpt1.c:(.text+0x384a): undefined reference to `hb_itemGetNInt'
./../../xharbour/lib/libdbffpt.a(dbffpt1.o): In function
`hb_fptCountFlexItemLength':
dbffpt1.c:(.text+0x3ee7): undefined reference to `hb_itemGetNInt'
./../../xharbour/lib/libdbffpt.a(dbffpt1.o): In function
`hb_fptStoreFlexItem':
dbffpt1.c:(.text+0x41e5): undefined reference to `hb_itemGetNInt'
./../../xharbour/lib/libdbffpt.a(dbffpt1.o): In function
`hb_fptGetMemo':
dbffpt1.c:(.text+0x549d): undefined reference to `hb_dbfGetMemoData'
./../../xharbour/lib/libdbffpt.a(dbffpt1.o): In function
`hb_fptPutMemo':
dbffpt1.c:(.text+0x6743): undefined reference to `hb_itemGetNInt'
dbffpt1.c:(.text+0x68c1): undefined reference to `hb_dbfGetMemoData'
dbffpt1.c:(.text+0x6994): undefined reference to `hb_dbfSetMemoData'
./../../xharbour/lib/libdbffpt.a(dbffpt1.o): In function
`hb_fptPutVarField':
dbffpt1.c:(.text+0x75aa): undefined reference to `hb_itemGetNInt'
dbffpt1.c:(.text+0x788e): undefined reference to `hb_itemGetNInt'
./../../xharbour/lib/libdbffpt.a(dbffpt1.o): In function
`hb_fptPutValueFile':
dbffpt1.c:(.text+0x9545): undefined reference to `hb_dbfGetMemoData'
dbffpt1.c:(.text+0x95c6): undefined reference to `hb_dbfSetMemoData'
./../../xharbour/lib/libdbffpt.a(dbffpt1.o): In function `hb_fptInfo':
dbffpt1.c:(.text+0x97cc): undefined reference to `hb_rddGetNode'
dbffpt1.c:(.text+0x9962): undefined reference to `hb_rddGetNode'
dbffpt1.c:(.text+0x997d): undefined reference to `hb_rddGetNode'
dbffpt1.c:(.text+0x9a31): undefined reference to `hb_rddGetNode'
dbffpt1.c:(.text+0x9a4c): undefined reference to `hb_rddGetNode'
./../../xharbour/lib/libdbffpt.a(dbffpt1.o):dbffpt1.c:(.text+0x9b0f):
more undefined references to `hb_rddGetNode' follow
./../../xharbour/lib/libdbffpt.a(dbffpt1.o): In function
`hb_fptFieldInfo':
dbffpt1.c:(.text+0xa2ff): undefined reference to `hb_dbfGetMemoData'
dbffpt1.c:(.text+0xa3ca): undefined reference to `hb_dbfGetMemoData'
./../../xharbour/lib/libdbffpt.a(dbffpt1.o): In function
`hb_dbffptRddInit':
dbffpt1.c:(.text+0xa8f5): undefined reference to `hb_rddRegister'
dbffpt1.c:(.text+0xa90e): undefined reference to `hb_rddRegister'
dbffpt1.c:(.text+0xa927): undefined reference to `hb_rddRegister'
./../../xharbour/lib/libdbffpt.a(dbffpt1.o): In function
`_hb_dbffpt_rdd_init_':
dbffpt1.c:(.text+0xa9c0): undefined reference to `hb_vmAtInit'
./../../xharbour/lib/libhbsix.a(sxdate.o): In function `HB_FUN_SX_DTOP':
sxdate.c:(.text+0x105): undefined reference to `hb_pardl'
./../../xharbour/lib/libgtcrs.a(gtcrs.o): In function
`hb_CRS_gt_SetDispCP':
(.text+0x29c4): undefined reference to `s_cdpage'
./../../xharbour/lib/libgtcrs.a(gtcrs.o): In function
`hb_CRS_gt_SetKeyCP':
(.text+0x423a): undefined reference to `s_cdpage'
./../../xharbour/lib/librtl.a(fparse.o): In function `HB_FUN_FPARSE':
fparse.c:(.text+0x7c3): undefined reference to `hb_itemReturnForward'
./../../xharbour/lib/librtl.a(fparse.o): In function `HB_FUN_FPARSEEX':
fparse.c:(.text+0x97a): undefined reference to `hb_itemReturnForward'
./../../xharbour/lib/librtl.a(fparse.o): In function
`HB_FUN_FPARSELINE':
fparse.c:(.text+0xd0b): undefined reference to `hb_itemReturnForward'


From antonioharbour at gmail.com  Tue Jul 31 16:17:34 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jul 31 16:17:42 2007
Subject: [Harbour] OT: xHarbour
In-Reply-To: <46AF95A4.3060507@gmail.com>
References: <1185865204.18044.6.camel@anto-desktop>
	<20070731104743.GA7640@localhost.localdomain>
	<20070731110621.GA16722@localhost.localdomain>
	<1185901777.5777.8.camel@anto-desktop>
	<20070731182316.GA24789@localhost.localdomain>
	<1185908195.6462.1.camel@anto-desktop>
	<20070731190652.GD24789@localhost.localdomain>
	<1185908996.6462.4.camel@anto-desktop>
	<1185909239.6462.7.camel@anto-desktop>
	<20070731192738.GF24789@localhost.localdomain>
	<1185910938.6462.12.camel@anto-desktop>  <46AF95A4.3060507@gmail.com>
Message-ID: <1185913054.6462.20.camel@anto-desktop>

Lost,

> "-Wl," means that the option following it goes to ld (the linker) rather
> than gcc (the compiler)
> 
> "--start-group" and "--end-group" instruct the linker to search the files
> specified in between them as many times as necessary until there are no
> more unresolved references.

> -Wl, --start-group <your list of libraries and object files> -Wl,
> --end-group

many thanks!

regards,

Antonio

From druzus at priv.onet.pl  Tue Jul 31 16:51:33 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 31 16:51:42 2007
Subject: [Harbour] OT: xHarbour
In-Reply-To: <1185912746.6462.17.camel@anto-desktop>
References: <1185901777.5777.8.camel@anto-desktop>
	<20070731182316.GA24789@localhost.localdomain>
	<1185908195.6462.1.camel@anto-desktop>
	<20070731190652.GD24789@localhost.localdomain>
	<1185908996.6462.4.camel@anto-desktop>
	<1185909239.6462.7.camel@anto-desktop>
	<20070731192738.GF24789@localhost.localdomain>
	<1185910938.6462.12.camel@anto-desktop>
	<20070731195726.GI24789@localhost.localdomain>
	<1185912746.6462.17.camel@anto-desktop>
Message-ID: <20070731205133.GA1356@localhost.localdomain>

On Tue, 31 Jul 2007, Antonio Linares wrote:
> Thanks. Now I get this:
> Again, many thanks for your help
> ./../../xharbour/lib/libvm.a(hvm.o): In function `hb_vmQuit':
> (.text+0x3b5): undefined reference to `hb_seriviceExit'
> ./../../xharbour/lib/libvm.a(itemapi.o): In function `hb_itemStrCmp':
> (.text+0x504): undefined reference to `s_cdpage'
> ./../../xharbour/lib/librtl.a(abs.o): In function `HB_FUN_ABS':
[...]

You have incomplete xHarbour binaries or the above library list was
not at the end of your link script. I can only guess why.
I suggest to make the following operation which I just made few
minutes ago using todays xharbour anonymous CVS.
After downloading xHarbour check if you do not have _any_ HB_*
environment variable set (set|less). If you have any then unset
them (unset). Then  go to the directory when you have clean xHarbour
source code and execute:
    (export PREFIX=/usr/local; ./make_tgz.sh >log-tgz 2>log-tgz.err)

wait few minutes and you should have:
    xharbour-0.99.71-<dist>.inst.sh
file. It's executable files. Install it using:
    ./xharbour-0.99.71*inst.sh
from root account.
Then please check if /usr/local/bin is in your PATH envvar. If not
add it:
    export PATH="/usr/local/bin:$PATH"
inside /usr/local/bin you will find xhblnk and other xhb* scripts
and other xHarbour binaries.
Use them to compile and link your code. To compile .prg files
use xhbcmp, for linking xhblnk. If you will need to execute gcc
with path set to xHarbour header files then use 'xhbcc' instead
of 'gcc'

If sth will be wrong with build process then you will find information
about it inside log-tgz.err file. for todays xHarbour CVS it has about
4.5KB of GCC warnings. Ignore them an look for error messages. If you
will find any please send it here. Do not try to set any other HB_*
envvars or compilation macros like:
    C_USR=-DHB_FM_STATISTICS
or you will have log-tgz.err file full of information about memory
leaks during compilation.

best regards,
Przemek
From druzus at priv.onet.pl  Tue Jul 31 17:01:05 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Jul 31 17:01:10 2007
Subject: [Harbour] ChangeLog 2007-07-31 23:00 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070731210105.GA10739@localhost.localdomain>

2007-07-31 23:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/make_gcc.sh
    * cleanup
  - harbour/make_drw.sh
  - harbour/make_bsd.sh
    - removed not longer necessary files - make_gnu.sh can be used
      instead with exactly the same effect

best regards,
Przemek
From antonioharbour at gmail.com  Tue Jul 31 17:14:17 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jul 31 17:14:26 2007
Subject: [Harbour] OT: xHarbour
In-Reply-To: <20070731205133.GA1356@localhost.localdomain>
References: <1185901777.5777.8.camel@anto-desktop>
	<20070731182316.GA24789@localhost.localdomain>
	<1185908195.6462.1.camel@anto-desktop>
	<20070731190652.GD24789@localhost.localdomain>
	<1185908996.6462.4.camel@anto-desktop>
	<1185909239.6462.7.camel@anto-desktop>
	<20070731192738.GF24789@localhost.localdomain>
	<1185910938.6462.12.camel@anto-desktop>
	<20070731195726.GI24789@localhost.localdomain>
	<1185912746.6462.17.camel@anto-desktop>
	<20070731205133.GA1356@localhost.localdomain>
Message-ID: <1185916457.6462.24.camel@anto-desktop>

Przemek,

You were right and my binaries were not fine, so I did a clean checkout
and rebuilt everything and finally I got it working :-)

Thanks a lot!

I am doing some tests, and later on I plan to test your DEB package,

best regards,

Antonio

From antonioharbour at gmail.com  Tue Jul 31 17:15:22 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jul 31 17:15:30 2007
Subject: [Harbour] ChangeLog 2007-07-31 23:00 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <20070731210105.GA10739@localhost.localdomain>
References: <20070731210105.GA10739@localhost.localdomain>
Message-ID: <1185916522.6462.26.camel@anto-desktop>

Przemek,

What Linux distro do you use ?

regards,

Antonio

From antonioharbour at gmail.com  Tue Jul 31 17:25:39 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jul 31 17:25:47 2007
Subject: [Harbour] gnome-commander error
Message-ID: <1185917139.6462.29.camel@anto-desktop>

Przemek,

Any hint to fix this error I get from gnome-commander when I try to run
a Harbour app (with GTK+) ?

No default application found for the mime-type application/x-executable.
Open the "File types and programs" page in the Control Center to add one

AFAIK there is no a control center in Ubuntu...

Thanks,

Antonio

From antonioharbour at gmail.com  Tue Jul 31 18:18:41 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Jul 31 18:18:53 2007
Subject: [Harbour] USE error ?
Message-ID: <1185920321.6462.34.camel@anto-desktop>

Przemek,

I am totally puzzled here. This code (in Linux):

REQUEST DBFCDX
...
USE customer VIA "DBFCDX"

Alias() is empty here, there is no error and DBFCDX is properly linked
as a RDD 

With xHarbour Alias() is ok. Any hints ?

Thanks,

Antonio

From gerrylist at drouillard.ca  Tue Jul 31 18:31:50 2007
From: gerrylist at drouillard.ca (Gerald Drouillard)
Date: Tue Jul 31 18:32:33 2007
Subject: [Harbour] USE error ?
In-Reply-To: <1185920321.6462.34.camel@anto-desktop>
References: <1185920321.6462.34.camel@anto-desktop>
Message-ID: <46AFB856.9060306@drouillard.ca>

Antonio Linares wrote:
> Przemek,
> 
> I am totally puzzled here. This code (in Linux):
> 
> REQUEST DBFCDX
> ...
> USE customer VIA "DBFCDX"
> 
> Alias() is empty here, there is no error and DBFCDX is properly linked
> as a RDD 
> 
> With xHarbour Alias() is ok. Any hints ?
> 
neterr()
file('customer.dbf')

The linux file system is case sensitive.
SET(_SET_FILECASE  ,'MIXED')
SET( _SET_DIRCASE,'MIXED')


-- 
Regards
--------------------------------------
Gerald Drouillard
Technology Architect
Drouillard & Associates, Inc.
http://www.Drouillard.ca
From bhays at abacuslaw.com  Tue Jul 31 21:53:18 2007
From: bhays at abacuslaw.com (bhays)
Date: Tue Jul 31 21:51:21 2007
Subject: [xHarbour-developers] [Harbour] Problem creating .adt files
In-Reply-To: <20070727110932.GD10606@localhost.localdomain>
Message-ID: <05a401c7d3de$bbbee9c0$0301a8c0@bh>

Przemek:

I got the code from the Extended System folks that did the undocumented
conversion of
Fields with type "N" to int or doubles.

I propose that I put a check into adsCreateFields() for the
   case 'N':
and determine if just the "N" was passed OR if the new full "Numeric"
string was passed (or actually if any part beyond just the "N").
If MORE than "N" is passed, use their "new" Numeric type.
Otherwise if just "N" is passed, implement their old logic.

...where we set the
      pFieldInfo.uiType = HB_IT_LONG;
also set
	pFieldInfo.uiTypeExtended
to shortint, longint, double, etc. according to that logic.

Does that sound good?

--
  Brian Hays



-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Friday, July 27, 2007 4:10 AM
To: Harbour Project Main Developer List.
Subject: Re: RE: [xHarbour-developers] [Harbour] Problem creating .adt files

On Thu, 26 Jul 2007, bhays wrote:
> >>But maybe it's time to define new format for extended database types
> common for all RDDs. Now we do not have RDD portable DBCREATE() structure.
> Yes, this would be good.

I'll be absent for few days. When I'll be back I'll try to create some basic
proposition which we can start to discuss. I hope that Marcelo and Jacek
(SQLRDD/MEDIATOR) will also take a part in discussion.

> Yes, we discussed this about 6 months ago when I needed to create a
> DLL that used FiveWin and ADS.
> Antonio was nice enough to modify his code to use hb_GetSetStructPtr()
> instead of direct access to the internal structure.
> I believe there was some other reason why it was not as simple as
> declaring that structure as dllexport, but I don't remember those
specifics right now.

Just make a test and declare hb_set with DLLIMPORT (not DLLEXPORT) attribute
and then recompile ADS RDD from Harbour. It will work.

> When you want to make it all thread safe, I'll be eager to help.

Thank you very much.
I'll try to sync both RDDs ASAP but maybe it will be better to define first
some hb_getSet*() functions in both projects? Please also note that direct
access to hb_set structure allows to change some settings by 3-rd party code
without validation or callback notification. It can be source of very
pleasure and hard to locate problems, f.e. you may link some 3-rd party
binaries with your code which change some SETs which should be synced with
ACE library.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour


